[{"tags": ["c", "crystal-lang"], "comments": [{"owner": {"reputation": 12011, "user_id": 641451, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/IcOuq.jpg?s=128&g=1", "display_name": "mgarciaisaia", "link": "https://stackoverflow.com/users/641451/mgarciaisaia"}, "edited": false, "score": 0, "creation_date": 1493253425, "post_id": 43646456, "comment_id": 74341726, "body": "This sounds a bit too broad for the site - but awesome for the <a href=\"https://crystal-lang.org/community\" rel=\"nofollow noreferrer\">developers list</a>"}, {"owner": {"reputation": 914, "user_id": 5843840, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58ecdbd6cee1807add0dcbbeb0f22a64?s=128&d=identicon&r=PG&f=1", "display_name": "Jones", "link": "https://stackoverflow.com/users/5843840/jones"}, "reply_to_user": {"reputation": 12011, "user_id": 641451, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/IcOuq.jpg?s=128&g=1", "display_name": "mgarciaisaia", "link": "https://stackoverflow.com/users/641451/mgarciaisaia"}, "edited": false, "score": 0, "creation_date": 1493253603, "post_id": 43646456, "comment_id": 74341772, "body": "I&#39;m not sure I understand what you mean."}, {"owner": {"reputation": 12011, "user_id": 641451, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/IcOuq.jpg?s=128&g=1", "display_name": "mgarciaisaia", "link": "https://stackoverflow.com/users/641451/mgarciaisaia"}, "edited": false, "score": 0, "creation_date": 1493253698, "post_id": 43646456, "comment_id": 74341799, "body": "Sorry - I mean the question seems to be offtipic for the site, for being too broad, but you could get some help asking at Crystal&#39;s mailing list"}, {"owner": {"reputation": 914, "user_id": 5843840, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58ecdbd6cee1807add0dcbbeb0f22a64?s=128&d=identicon&r=PG&f=1", "display_name": "Jones", "link": "https://stackoverflow.com/users/5843840/jones"}, "reply_to_user": {"reputation": 12011, "user_id": 641451, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/IcOuq.jpg?s=128&g=1", "display_name": "mgarciaisaia", "link": "https://stackoverflow.com/users/641451/mgarciaisaia"}, "edited": false, "score": 0, "creation_date": 1493253781, "post_id": 43646456, "comment_id": 74341814, "body": "Which site is &quot;the site&quot;? Sorry, I&#39;m not following."}], "answers": [{"comments": [{"owner": {"reputation": 914, "user_id": 5843840, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58ecdbd6cee1807add0dcbbeb0f22a64?s=128&d=identicon&r=PG&f=1", "display_name": "Jones", "link": "https://stackoverflow.com/users/5843840/jones"}, "edited": false, "score": 0, "creation_date": 1493472136, "post_id": 43693365, "comment_id": 74437187, "body": "Yep, that&#39;s what I did."}], "tags": [], "owner": {"reputation": 28705, "user_id": 241039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0fb3b178709c2d4509c94967a7082ac2?s=128&d=identicon&r=PG", "display_name": "Oleh Prypin", "link": "https://stackoverflow.com/users/241039/oleh-prypin"}, "is_accepted": true, "score": 4, "last_activity_date": 1493453670, "creation_date": 1493453670, "answer_id": 43693365, "question_id": 43646456, "link": "https://stackoverflow.com/questions/43646456/binding-c-to-crystal-preprocessor-directives/43693365#43693365", "title": "Binding C to Crystal: preprocessor directives", "body": "<p>You cannot access things that are only in C header files (and things that are done through the preprocessor) in a shared library file, because they simply aren't put there.</p>\n\n<p>Since Crystal only binds to a shared library file, there is no option other than manually (sometimes <a href=\"https://github.com/crystal-lang/crystal_lib\" rel=\"noreferrer\">automatically</a>) duplicating these as constants in Crystal code.</p>\n"}], "owner": {"reputation": 914, "user_id": 5843840, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58ecdbd6cee1807add0dcbbeb0f22a64?s=128&d=identicon&r=PG&f=1", "display_name": "Jones", "link": "https://stackoverflow.com/users/5843840/jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 43693365, "answer_count": 1, "score": 0, "last_activity_date": 1493453670, "creation_date": 1493251134, "last_edit_date": 1493251294, "question_id": 43646456, "link": "https://stackoverflow.com/questions/43646456/binding-c-to-crystal-preprocessor-directives", "title": "Binding C to Crystal: preprocessor directives", "body": "<p>I'm working with the <code>crt.cr</code> Crystal shard, which binds ncurses. It's lacking some things I want, like <code>mvhline()</code>. So I'm adding the things I want.</p>\n\n<p>One thing I want is is ncurses alternative character sheet, so I can make nice boxes. </p>\n\n<p>As far as I can tell, this is pretty dang hard (but I'm not an expert in either Crystal or C). <a href=\"https://github.com/gittup/ncurses/blob/5a58bcb99470378fbbb24d21cb5e54f08cb7d353/include/curses.h.in#L234\" rel=\"nofollow noreferrer\">From what I can tell, the alternative character sheet characters are all unsigned chars, defined by the preprocessor.</a></p>\n\n<p>Can someone explain how I can get access to the alternative character sheet characters?</p>\n"}, {"tags": ["c", "function", "for-loop", "if-statement", "return-value"], "comments": [{"owner": {"reputation": 46515, "user_id": 5647260, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oByMV.jpg?s=128&g=1", "display_name": "Andrew Li", "link": "https://stackoverflow.com/users/5647260/andrew-li"}, "edited": false, "score": 2, "creation_date": 1493251061, "post_id": 43646419, "comment_id": 74341156, "body": "Did you try running through your function step-by-step, through a debugger or even just with pen and paper?"}, {"owner": {"reputation": 1619, "user_id": 7864413, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208517922736756/picture?type=large", "display_name": "Phil M", "link": "https://stackoverflow.com/users/7864413/phil-m"}, "edited": false, "score": 0, "creation_date": 1493251196, "post_id": 43646419, "comment_id": 74341192, "body": "And while debugging, check what&#39;s in each of the boxes if they don&#39;t have an X or an O."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 2, "creation_date": 1493251351, "post_id": 43646419, "comment_id": 74341240, "body": "You cannot index the 4th row or column in a 3 by 3 matrix."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 2, "creation_date": 1493251369, "post_id": 43646419, "comment_id": 74341250, "body": "<code>for (i = 0; i &lt;= 3; i++)</code> is wrong when the size of the arrays is only <code>[3][3]</code>."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 1, "creation_date": 1493251527, "post_id": 43646419, "comment_id": 74341278, "body": "<code>c</code> is a <code>0</code> base array, not <code>1</code> base. The array is from <code>[0][0]</code> up to <code>[2][2]</code>, not from <code>[1][1]</code> up to <code>[3][3]</code>."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1493367723, "post_id": 43646419, "comment_id": 74396917, "body": "well, do you know that a C array <b>is  always zero based</b> (the first index in the array is <code>0</code>) and the last <b>is always the number of cells minus one</b>?  you have <code>for</code> loops runing for values <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code> (this is <i>four array elements, and not three</i>) and you check array elements with indexes <code>1</code>, <code>2</code>, and <code>3</code> (that should be <code>0</code>, <code>1</code> and <code>2</code> instead) etc.  Check this, you&#39;ll get probably a surprise :)  (you have the code crowded of this kind of buggies, so you have to correct this, before more checking)"}], "answers": [{"tags": [], "owner": {"reputation": 919, "user_id": 2428220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fadc6b021c1a7d2443fbe1810234387?s=128&d=identicon&r=PG", "display_name": "sigbjornlo", "link": "https://stackoverflow.com/users/2428220/sigbjornlo"}, "is_accepted": true, "score": 5, "last_activity_date": 1493252212, "last_edit_date": 1493252212, "creation_date": 1493251450, "answer_id": 43646495, "question_id": 43646419, "link": "https://stackoverflow.com/questions/43646419/why-does-my-function-always-return-1/43646495#43646495", "title": "Why does my function always return 1?", "body": "<p>You are passing in a 3x3 array (with indices 0, 1 and 2 in each dimension), but in your loops you are iterating 4 times (indices 0, 1, 2 and 3). Try <code>for (i = 0; i &lt; 3; i++)</code> in your loops instead, as your loops will now check values beyond the boundaries of the <code>p</code> array, and if you are unlucky the contents of that memory causes your control function to return 1.</p>\n\n<p>Finally, I think the final else-block should not be in the loop, but rather outside of it: If both loops have run and you have not returned yet, you can safely return 0, but you wouldn't want to return a 0 prematurely before you have checked all your verticals.</p>\n\n<p>Here is the function with the changes to the indices and the diagonal checks and final else-block fished out of the second for-loop:</p>\n\n<pre><code>int control(char p[3][3]) {\n    int i;\n\n    /* Check horizontals */\n    for (i = 0; i &lt; 3; i++)\n        if (p[i][0] == p[i][1] &amp;&amp; p[i][1] == p[i][2]) \n            return 1;\n\n    /* Check verticals */\n    for (i = 0; i &lt; 3; i++)\n        if (p[0][i] == p[1][i] &amp;&amp; p[1][i] == p[2][i])\n            return 1;\n\n    /* Check diagonals */\n    if (p[0][0] == p[1][1] &amp;&amp; p[1][1] == p[2][2])\n        return 1;\n    if (p[2][0] == p[1][1] &amp;&amp; p[1][1] == p[0][2])\n        return 1;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7669230, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1807797602579227/picture?type=large", "display_name": "Jakob Eklund", "link": "https://stackoverflow.com/users/7669230/jakob-eklund"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 43646495, "answer_count": 1, "score": 0, "last_activity_date": 1493252212, "creation_date": 1493250924, "last_edit_date": 1493251239, "question_id": 43646419, "link": "https://stackoverflow.com/questions/43646419/why-does-my-function-always-return-1", "title": "Why does my function always return 1?", "body": "<p>I'm writing a function that's supposed to check whether there is a winner or not in a game of \"noughts and crosses\", or \"three in a row\".</p>\n\n<p>The game works by first drawing out 3 x 3 squares in the command prompt. The user then moves the cursor between the squares, and presses enter to place an \"X\". The next selected square gets an \"O\" placed in it, and then an \"X\" again, and so on. After turn 5 (the first possible turn there could be a winner) the program checks if there is a winner after every turn, and if none is found after 9 turns (when all squares have something in them) the program declares a draw.</p>\n\n<p>However, the function I've written to check for a winner always returns 1 when it's called, which means there is a winner (X more specifically, since that\u00e4s the one that made the last move). Therefore the game ends on turn 5, no matter what the squares contain.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>int control(char p[3][3]) {\n    int i;\n    for (i = 0; i &lt;= 3; i++)    //Checks if any of the horizontals have 3 of the same markers in a row\n        if (p[i][1] == p[i][2] &amp;&amp; p[i][2] == p[i][3]) \n            return 1;\n\n    for (i = 0; i &lt;= 3; i++)    //Checks if any of the vertical columns have 3 of the same markers\n        if (p[1][i] == p[2][i] &amp;&amp; p[2][i] == p[3][i])\n            return 1;\n        else if (p[1][1] == p[2][2] &amp;&amp; p[2][2] == p[3][3])    //Checks if top left, middle and bottom right squares have the same marker\n            return 1;\n        else if (p[3][1] == p[2][2] &amp;&amp; p[2][2] == p[1][3])    //Checks if the top right, middle and bottom left have the same marker\n            return 1;\n        else               //If none of the above have the same 3 markers, the game keeps going\n            return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "strcmp"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493250130, "post_id": 43646175, "comment_id": 74340904, "body": "Use a debugger and inspect the values of variables after each line.  Look up the documentation for any function you don&#39;t understand."}, {"owner": {"reputation": 53, "user_id": 7928248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7873d17b8c1f2a56cac3979a2f713341?s=128&d=identicon&r=PG&f=1", "display_name": "LiveToLearn", "link": "https://stackoverflow.com/users/7928248/livetolearn"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493254355, "post_id": 43646175, "comment_id": 74341943, "body": "@M.M  This question is not for debugging. Its a logic question. I am sorry that I was unclear about that. The code I provided was not meant to be ran, it was meant to just look at and figure out the logic. This was my first question on stackoverflow. Im still learning :)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493254676, "post_id": 43646175, "comment_id": 74342016, "body": "You should try to solve your question first before posting it , and one way of solving it is to follow in the debugger"}, {"owner": {"reputation": 53, "user_id": 7928248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7873d17b8c1f2a56cac3979a2f713341?s=128&d=identicon&r=PG&f=1", "display_name": "LiveToLearn", "link": "https://stackoverflow.com/users/7928248/livetolearn"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493255742, "post_id": 43646175, "comment_id": 74342294, "body": "@M.M I wouldn&#39;t have gone out of my way to create an account here and post a question to something that I already didn&#39;t try to figure out myself. Why would I debug a piece of incomplete code? Again, im trying to understand the logic, not syntax, not error checking, not debugging. Anyway, someone else helped me out. I got my answer."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493258232, "post_id": 43646175, "comment_id": 74342950, "body": "&quot;Why would I debug a piece of incomplete code?&quot; - because that&#39;s a way to figure out the logic of something you don&#39;t understand"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7928248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7873d17b8c1f2a56cac3979a2f713341?s=128&d=identicon&r=PG&f=1", "display_name": "LiveToLearn", "link": "https://stackoverflow.com/users/7928248/livetolearn"}, "edited": false, "score": 0, "creation_date": 1493252829, "post_id": 43646484, "comment_id": 74341597, "body": "Thank you for your response. So, what makes s1 less than s2? Like I know the &#39;c&#39; from the first letter of  &quot;computer&quot; is decimal number 99 according to the ASCII table and &#39;s&#39; from the first letter in &quot;science&quot; is decimal number 115 according to the ASCII table. is this what strcmp is comparing? Im sorry, if this sounds confusing. Im confused so im finding it difficult to articulate my question properly."}, {"owner": {"reputation": 3623, "user_id": 701302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a0209e45e0162da89877cf2981ff127?s=128&d=identicon&r=PG", "display_name": "slevy1", "link": "https://stackoverflow.com/users/701302/slevy1"}, "reply_to_user": {"reputation": 53, "user_id": 7928248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7873d17b8c1f2a56cac3979a2f713341?s=128&d=identicon&r=PG&f=1", "display_name": "LiveToLearn", "link": "https://stackoverflow.com/users/7928248/livetolearn"}, "edited": false, "score": 2, "creation_date": 1493253284, "post_id": 43646484, "comment_id": 74341684, "body": "You&#39;re welcome.  The comparison is performed looking at each character in each of the two strings and the comparison stops when the characters don&#39;t match.  Here&#39;s a link you may find useful: <a href=\"https://www.techonthenet.com/c_language/standard_library_functions/string_h/strcmp.php\" rel=\"nofollow noreferrer\">techonthenet.com/c_language/standard_library_functions/strin&zwnj;&#8203;g_h/&hellip;</a> that deals with strcmp in C."}], "tags": [], "owner": {"reputation": 3623, "user_id": 701302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a0209e45e0162da89877cf2981ff127?s=128&d=identicon&r=PG", "display_name": "slevy1", "link": "https://stackoverflow.com/users/701302/slevy1"}, "is_accepted": true, "score": 2, "last_activity_date": 1493252190, "last_edit_date": 1493252190, "creation_date": 1493251360, "answer_id": 43646484, "question_id": 43646175, "link": "https://stackoverflow.com/questions/43646175/how-does-using-strcmp-as-a-condition-in-an-if-statement-work/43646484#43646484", "title": "How does using strcmp() as a condition in an if() statement work?", "body": "<p>Okay, first let's see a working example of the code and then I'll explain how it works:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid main() {\n\n  char s1[100], s2[100];\n\n  strcpy(s1, \"computer\");\n  strcpy(s2, \"science\");\n\n  if(strcmp(s1, s2) &lt; 0)\n  {\n   strcat(s1, s2); \n  }\n  else\n  {\n   strcat(s2, s1);\n  }\n\n  s1[strlen(s1) - 6] = '\\0';\n  printf(\"%s\",s1);\n}\n</code></pre>\n\n<p>Variable <strong>s1</strong> gets set to \"computer\" and  <strong>s2</strong> gets set to \"science\". The first string comparison done with <em>strcmp()</em> evaluates whether  s1 is less in value than that of s2.  If so, then s1 gets concatenated with s2, so that the new value of s1 would be \"computerscience\".  Otherwise whether the strings have the same value or s2 is greater than s1, s2 gets concatenated to s1 with s2 having the resulting value of \"sciencecomputer\".  </p>\n\n<p>The if-conditional that results in a true result is that \"computer\" is less than \"science\" so \nthe value of s1 changes and becomes \"computerscience\".  The value 6 is then subtracted from the length of s1 and at that index which happens to hold the character \"c\", a null character is set as that element's value.  So, now the value of s1 is \"computers\\0ience\".  This means that when s1 is passed to <em>printf()</em> that function will print every character until it reaches the null character and then the function ceases to display the null as well as the characters following it.</p>\n"}], "owner": {"reputation": 53, "user_id": 7928248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7873d17b8c1f2a56cac3979a2f713341?s=128&d=identicon&r=PG&f=1", "display_name": "LiveToLearn", "link": "https://stackoverflow.com/users/7928248/livetolearn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 1, "closed_date": 1493250523, "accepted_answer_id": 43646484, "answer_count": 1, "score": -2, "last_activity_date": 1568445579, "creation_date": 1493249190, "last_edit_date": 1568445579, "question_id": 43646175, "link": "https://stackoverflow.com/questions/43646175/how-does-using-strcmp-as-a-condition-in-an-if-statement-work", "closed_reason": "Not suitable for this site", "title": "How does using strcmp() as a condition in an if() statement work?", "body": "<p>The output of the below psuedocode(its psuedocode because it is not meant to be syntactically correct) produces \"computers\" </p>\n\n<pre><code>strcpy(s1, \"computer\");\nstrcpy(s2, \"science\");\n\nif(strcmp(s1, s2) &lt; 0)\n{\n   strcat(s1, s2); \n}\nelse\n{\n  strcat(s2, s1);\n}\ns1[strlen(s1) - 6] = '\\0';\n</code></pre>\n\n<p>I am unclear as to how the result is \"computers\". I cant wrap my head around the logic of how strcmp() is used in in the if() statements</p>\n"}, {"tags": ["c", "exec"], "comments": [{"owner": {"reputation": 682, "user_id": 4811285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d60KB.jpg?s=128&g=1", "display_name": "theoden8", "link": "https://stackoverflow.com/users/4811285/theoden8"}, "edited": false, "score": 0, "creation_date": 1493248489, "post_id": 43646023, "comment_id": 74340463, "body": "Maybe the problem is that you are closing <code>pipefd</code> before executing <code>ls</code>? And same for <code>cat</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493251796, "post_id": 43646023, "comment_id": 74341349, "body": "Note that waiting for the first child in a pipeline to finish before starting the next is the wrong way to do things.  It forces linear/sequential execution instead of permitting parallel/concurrent execution.  It can also run into blocking if the first process in the pipeline generates so much data that it is blocked waiting for the next process to read some, but the next process is not started because the first hasn&#39;t finished yet."}], "answers": [{"tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": true, "score": 1, "last_activity_date": 1493249245, "creation_date": 1493249245, "answer_id": 43646188, "question_id": 43646023, "link": "https://stackoverflow.com/questions/43646023/exec-not-terminating-when-used-with-dup2/43646188#43646188", "title": "exec() not terminating when used with dup2", "body": "<p>The parent still has the write side of the pipe open.  <code>cat</code> is waiting for the parent to close it, and the parent is waiting for <code>cat</code> to terminate.  You should close both sides of the pipe in the parent before you wait for the grand child.</p>\n"}], "owner": {"reputation": 92, "user_id": 4280346, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dEgJcdUL1BU/AAAAAAAAAAI/AAAAAAAAAAA/p_55gTN9UBA/photo.jpg?sz=128", "display_name": "Dylan Redfield", "link": "https://stackoverflow.com/users/4280346/dylan-redfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 43646188, "answer_count": 1, "score": 0, "last_activity_date": 1493249245, "creation_date": 1493248270, "question_id": 43646023, "link": "https://stackoverflow.com/questions/43646023/exec-not-terminating-when-used-with-dup2", "title": "exec() not terminating when used with dup2", "body": "<p>I am using <code>dup2()</code>, <code>pipe()</code>, and <code>fork()</code> to process commands with input of another.  The output from the <code>ls</code> is correctly passed into <code>cat</code>, and the terminal displays output, but it does not stop receiving input. In other words cat does not terminate, so I can continue typing.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/stat.h&gt;\nint main() {\n   int pipefd[2], child_pid, grand_child;\n\n   pipe(pipefd);\n\n   child_pid = fork();\n\n   if (child_pid) {\n      waitpid(child_pid, NULL, 0);\n      /* Parent */\n\n      grand_child = fork();\n\n      if (!grand_child) {\n         dup2(pipefd[0], STDIN_FILENO);\n         close(pipefd[0]);\n         close(pipefd[1]);\n         execlp(\"cat\", \"cat\", NULL);\n      } else {\n         waitpid(grand_child, NULL, 0);\n      }\n\n   } else {\n      /* Child */\n\n      dup2(pipefd[1], STDOUT_FILENO);\n\n      close(pipefd[1]);\n      close(pipefd[0]);\n\n\n      execlp(\"ls\", \"ls\", NULL);\n   }\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 676, "user_id": 2497968, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uwWXN.jpg?s=128&g=1", "display_name": "Thunder Storm", "link": "https://stackoverflow.com/users/2497968/thunder-storm"}, "edited": false, "score": 1, "creation_date": 1493248445, "post_id": 43645990, "comment_id": 74340451, "body": "When you dereference a char* you get a single char. Not quite sure why you would return a char* at function2 then."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 1, "creation_date": 1493248452, "post_id": 43645990, "comment_id": 74340454, "body": "No - you lost it when you dereferenced with &#39;return *sequence;&#39;"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1493248729, "post_id": 43645990, "comment_id": 74340538, "body": "Pay attention to compiler error messages; if you don&#39;t see any then you need to adjust your compiler settings.  (Don&#39;t ignore this)"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 1, "creation_date": 1493248788, "post_id": 43645990, "comment_id": 74340555, "body": "If you paid attention to the warnings your compiler is giving you, you&#39;d quickly realize what you are doing is nonsensical. (For GCC, always use <code>gcc -Wall -Werror</code>)"}, {"owner": {"reputation": 463, "user_id": 4832930, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xw8yq.jpg?s=128&g=1", "display_name": "Aly Shmahell", "link": "https://stackoverflow.com/users/4832930/aly-shmahell"}, "edited": false, "score": 0, "creation_date": 1493248798, "post_id": 43645990, "comment_id": 74340558, "body": "thank you guys, something I never thought of before (function return is dereferenced the same as parameter passing). problem solved... :D"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1493248912, "post_id": 43645990, "comment_id": 74340594, "body": "Compilers don&#39;t (normally) give segmentation faults.  The compiler gives error messages, or your program experiences a segmentation fault when you run it."}, {"owner": {"reputation": 463, "user_id": 4832930, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xw8yq.jpg?s=128&g=1", "display_name": "Aly Shmahell", "link": "https://stackoverflow.com/users/4832930/aly-shmahell"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1493249168, "post_id": 43645990, "comment_id": 74340668, "body": "@aschepler I edited accordingly, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 463, "user_id": 4832930, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xw8yq.jpg?s=128&g=1", "display_name": "Aly Shmahell", "link": "https://stackoverflow.com/users/4832930/aly-shmahell"}, "edited": false, "score": 0, "creation_date": 1493248690, "post_id": 43646071, "comment_id": 74340520, "body": "aaaalright, back on track. I never thought function return works the same as parameter passing in regards to pointers! thank you :)"}], "tags": [], "owner": {"reputation": 1033, "user_id": 3410010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFRd3.jpg?s=128&g=1", "display_name": "yadhu", "link": "https://stackoverflow.com/users/3410010/yadhu"}, "is_accepted": false, "score": 1, "last_activity_date": 1493248708, "last_edit_date": 1493248708, "creation_date": 1493248563, "answer_id": 43646071, "question_id": 43645990, "link": "https://stackoverflow.com/questions/43645990/casting-a-result-pointer-of-a-pointer-returning-function-to-a-reference-passabl/43646071#43646071", "title": "casting a result pointer of a pointer-returning-function to a reference, passable to another function as parameter", "body": "<p>Your function2 is returning a value not the address however function1 is thinking of that value as address and trying to access it. hence you are getting segfault. function2 should return pointer but in your case you are returning *sequence instead of pointer</p>\n"}, {"comments": [{"owner": {"reputation": 463, "user_id": 4832930, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xw8yq.jpg?s=128&g=1", "display_name": "Aly Shmahell", "link": "https://stackoverflow.com/users/4832930/aly-shmahell"}, "edited": false, "score": 0, "creation_date": 1493249142, "post_id": 43646099, "comment_id": 74340660, "body": "so this is what the following warning has been telling me: test.c|7|warning: return makes pointer from integer without a cast [-Wint-conversion]|"}, {"owner": {"reputation": 676, "user_id": 2497968, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uwWXN.jpg?s=128&g=1", "display_name": "Thunder Storm", "link": "https://stackoverflow.com/users/2497968/thunder-storm"}, "reply_to_user": {"reputation": 463, "user_id": 4832930, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xw8yq.jpg?s=128&g=1", "display_name": "Aly Shmahell", "link": "https://stackoverflow.com/users/4832930/aly-shmahell"}, "edited": false, "score": 0, "creation_date": 1493249661, "post_id": 43646099, "comment_id": 74340793, "body": "@AlyShmahell right, that&#39;s what I was saying: it warns you about the fact that you are implicitly casting a character to a pointer to a character, which is likely to segfault."}, {"owner": {"reputation": 463, "user_id": 4832930, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xw8yq.jpg?s=128&g=1", "display_name": "Aly Shmahell", "link": "https://stackoverflow.com/users/4832930/aly-shmahell"}, "edited": false, "score": 0, "creation_date": 1493250098, "post_id": 43646099, "comment_id": 74340895, "body": "the mention of integer in the warning got me into thinking it wasn&#39;t the issue, but thinking about it now, a pointer to a character is in fact a hexadecimal value and I was pointing at it..."}], "tags": [], "owner": {"reputation": 676, "user_id": 2497968, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uwWXN.jpg?s=128&g=1", "display_name": "Thunder Storm", "link": "https://stackoverflow.com/users/2497968/thunder-storm"}, "is_accepted": true, "score": 2, "last_activity_date": 1493248736, "creation_date": 1493248736, "answer_id": 43646099, "question_id": 43645990, "link": "https://stackoverflow.com/questions/43645990/casting-a-result-pointer-of-a-pointer-returning-function-to-a-reference-passabl/43646099#43646099", "title": "casting a result pointer of a pointer-returning-function to a reference, passable to another function as parameter", "body": "<p>I think you want to do something like this:</p>\n\n<pre><code>char* function1(char* parameter)\n{\n    printf(\"%c\", *parameter);\n    return parameter;\n}\nchar* function2(char* sequence)\n{\n    return sequence;\n}\nint main()\n{\n    char* sequence = (char*)malloc(1);\n    *sequence = 'a';\n    function1(function2(sequence));\n}\n</code></pre>\n\n<p>You can also use your compiler to spot some errors. \n<code>function2()</code> must return a char* but you are dereferencing it right when you return which gets you a single char.\nFurtermore <code>function1()</code> doesn't return a value neither.</p>\n"}], "owner": {"reputation": 463, "user_id": 4832930, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xw8yq.jpg?s=128&g=1", "display_name": "Aly Shmahell", "link": "https://stackoverflow.com/users/4832930/aly-shmahell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 43646099, "answer_count": 2, "score": 0, "last_activity_date": 1493249063, "creation_date": 1493248085, "last_edit_date": 1493249063, "question_id": 43645990, "link": "https://stackoverflow.com/questions/43645990/casting-a-result-pointer-of-a-pointer-returning-function-to-a-reference-passabl", "title": "casting a result pointer of a pointer-returning-function to a reference, passable to another function as parameter", "body": "<p>having the following:  </p>\n\n<pre><code>char* function1(char* parameter)\n        {\n          printf(\"%c\",*parameter);\n        }\nchar* function2(char* sequence)\n        {\n          return *sequence;\n        }\nint main()\n        {\n          char* sequence = malloc(1);\n          *sequence = 'a';\n          function1(function2(sequence));\n         }  \n</code></pre>\n\n<p>The program run is rightfully giving a segmentation fault, since the call of function2 returns a pointer, and the function1 call needs a reference to be pointed at by its pointer parameter.  </p>\n\n<p>is there a way to cast the pointer returned from function2 to a reference while being passed as a parameter to function1?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493247965, "post_id": 43645950, "comment_id": 74340285, "body": "Where in memory is the pointer <code>mob-&gt;mobName</code> pointing to?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493247988, "post_id": 43645950, "comment_id": 74340295, "body": "..and the others.."}, {"owner": {"reputation": 7, "user_id": 7681923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7f56bbefd6a0548dcf42b8e85a5e674?s=128&d=identicon&r=PG&f=1", "display_name": "DeadAccount", "link": "https://stackoverflow.com/users/7681923/deadaccount"}, "edited": false, "score": 0, "creation_date": 1493247989, "post_id": 43645950, "comment_id": 74340297, "body": "I dont know how I would allcoate memory there"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1493247999, "post_id": 43645950, "comment_id": 74340301, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493248021, "post_id": 43645950, "comment_id": 74340316, "body": "So you know you should, right? Then what&#39;s the question?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1493248050, "post_id": 43645950, "comment_id": 74340326, "body": "You don&#39;t know how to allocate memory? Time to log off Stackoverflow and use your time to read a basic C book or tutorial."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493248050, "post_id": 43645950, "comment_id": 74340327, "body": "You could change your struct definition so you don&#39;t need to allocate any  more memory."}, {"owner": {"reputation": 7, "user_id": 7681923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7f56bbefd6a0548dcf42b8e85a5e674?s=128&d=identicon&r=PG&f=1", "display_name": "DeadAccount", "link": "https://stackoverflow.com/users/7681923/deadaccount"}, "edited": false, "score": 0, "creation_date": 1493248053, "post_id": 43645950, "comment_id": 74340330, "body": "How would I allcoate it though like how would i write it?"}, {"owner": {"reputation": 1463, "user_id": 4784579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KRlU0.jpg?s=128&g=1", "display_name": "ipavlu", "link": "https://stackoverflow.com/users/4784579/ipavlu"}, "edited": false, "score": 0, "creation_date": 1493248116, "post_id": 43645950, "comment_id": 74340351, "body": "@Syntax You say C, but is it really C or is it C++ compiler and you use just C part?"}, {"owner": {"reputation": 676, "user_id": 2497968, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uwWXN.jpg?s=128&g=1", "display_name": "Thunder Storm", "link": "https://stackoverflow.com/users/2497968/thunder-storm"}, "edited": false, "score": 1, "creation_date": 1493248137, "post_id": 43645950, "comment_id": 74340361, "body": "I think you wanted it to be <code>mob[i]-&gt;mobAttack = 25;</code> And I also wouldn&#39;t use pointers for mobHealth and mobAttack."}, {"owner": {"reputation": 1463, "user_id": 4784579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KRlU0.jpg?s=128&g=1", "display_name": "ipavlu", "link": "https://stackoverflow.com/users/4784579/ipavlu"}, "edited": false, "score": 0, "creation_date": 1493248151, "post_id": 43645950, "comment_id": 74340366, "body": "@Syntax For C please look on method malloc() and free() in libraries..."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493248162, "post_id": 43645950, "comment_id": 74340370, "body": "Did you intend for 1 mob to have multiple health and attack values?"}, {"owner": {"reputation": 7, "user_id": 7681923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7f56bbefd6a0548dcf42b8e85a5e674?s=128&d=identicon&r=PG&f=1", "display_name": "DeadAccount", "link": "https://stackoverflow.com/users/7681923/deadaccount"}, "edited": false, "score": 0, "creation_date": 1493248258, "post_id": 43645950, "comment_id": 74340399, "body": "no I wrote the for loop to populate 3 mobs"}], "answers": [{"comments": [{"owner": {"reputation": 1463, "user_id": 4784579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KRlU0.jpg?s=128&g=1", "display_name": "ipavlu", "link": "https://stackoverflow.com/users/4784579/ipavlu"}, "edited": false, "score": 0, "creation_date": 1493248247, "post_id": 43646000, "comment_id": 74340394, "body": "In original request it is pointer, but pm100 realized that it is unnecessary and he is right:). And provided correct code:)."}, {"owner": {"reputation": 7, "user_id": 7681923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7f56bbefd6a0548dcf42b8e85a5e674?s=128&d=identicon&r=PG&f=1", "display_name": "DeadAccount", "link": "https://stackoverflow.com/users/7681923/deadaccount"}, "edited": false, "score": 0, "creation_date": 1493248395, "post_id": 43646000, "comment_id": 74340437, "body": "Wow it worked. Thanks man!"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 1, "last_activity_date": 1493248167, "last_edit_date": 1493248167, "creation_date": 1493248121, "answer_id": 43646000, "question_id": 43645950, "link": "https://stackoverflow.com/questions/43645950/struct-array-crashing-program-c/43646000#43646000", "title": "Struct Array Crashing Program C", "body": "<p>you need</p>\n\n<pre><code>    typedef struct{\n\n    char * mobName;\n    int  mobHealth;\n    int  mobAttack;\n} enemy\n</code></pre>\n\n<p>and</p>\n\n<pre><code>  mob[i].mobAttack = 25;\n</code></pre>\n\n<p>etc. I assume the compiler was complaining big time at you , dont ignore warnings</p>\n"}], "owner": {"reputation": 7, "user_id": 7681923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7f56bbefd6a0548dcf42b8e85a5e674?s=128&d=identicon&r=PG&f=1", "display_name": "DeadAccount", "link": "https://stackoverflow.com/users/7681923/deadaccount"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1493281164, "answer_count": 1, "score": -2, "last_activity_date": 1493248167, "creation_date": 1493247866, "question_id": 43645950, "link": "https://stackoverflow.com/questions/43645950/struct-array-crashing-program-c", "closed_reason": "Duplicate", "title": "Struct Array Crashing Program C", "body": "<p>The program runs but every time I do it just ends up crashing it after. I also get <strong>\"Segmation Fault\"</strong> Error when running a debug</p>\n\n<pre><code>         enemy mob[2];\n\n         for(i=0; i&lt;2; i++){\n\n            mob-&gt;mobAttack[i] = 25;\n            mob-&gt;mobHealth[i] = 150;\n            mob-&gt;mobName[i] = \"Growler\";\n\n        } \n</code></pre>\n\n<p>Structure</p>\n\n<pre><code>typedef struct{\n\nchar * mobName;\nint * mobHealth;\nint * mobAttack;\n</code></pre>\n\n<p>} enemy;</p>\n"}, {"tags": ["c", "return"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1493247615, "post_id": 43645894, "comment_id": 74340167, "body": "<code>using namespace std;</code> is not C."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1493247701, "post_id": 43645894, "comment_id": 74340201, "body": "<code>buf</code> becomes invalid outside the function."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1493247750, "post_id": 43645894, "comment_id": 74340219, "body": "Please do not expect commenters to &quot;download the openssl/sha.h package.&quot;"}, {"owner": {"reputation": 682, "user_id": 4811285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d60KB.jpg?s=128&g=1", "display_name": "theoden8", "link": "https://stackoverflow.com/users/4811285/theoden8"}, "edited": false, "score": 0, "creation_date": 1493247775, "post_id": 43645894, "comment_id": 74340228, "body": "You can add <code>static</code> specifier to buf, the value will stay until the next call."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 682, "user_id": 4811285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d60KB.jpg?s=128&g=1", "display_name": "theoden8", "link": "https://stackoverflow.com/users/4811285/theoden8"}, "edited": false, "score": 1, "creation_date": 1493247910, "post_id": 43645894, "comment_id": 74340274, "body": "@theoden Not a good suggestion in general. Leads to all sorts of problems such as invalid data for earlier calls when the function is called multiple times. It&#39;s not necessary and can be solved in much better ways (e.g. return dynamic memory and caller passes in buffer)."}, {"owner": {"reputation": 682, "user_id": 4811285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d60KB.jpg?s=128&g=1", "display_name": "theoden8", "link": "https://stackoverflow.com/users/4811285/theoden8"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1493248166, "post_id": 43645894, "comment_id": 74340372, "body": "@kaylum, yes, <code>static</code> is like singleton, and does not return anything that needs to be used twice. No need for remembering to free it though or to pass a pointer as an argument."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1493248643, "post_id": 43645894, "comment_id": 74340502, "body": "static = auto-unthreadsafeness ;("}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1493250645, "post_id": 43645894, "comment_id": 74341044, "body": "the reason printf makes it work is because you entered the world of Undefined Behavior. UB means that anything can happen, including appearing to work sometimes."}], "answers": [{"comments": [{"owner": {"reputation": 444, "user_id": 4730778, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/698ec16b61164c94aee6a20da396f0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tawm", "link": "https://stackoverflow.com/users/4730778/tawm"}, "edited": false, "score": 0, "creation_date": 1493249299, "post_id": 43645965, "comment_id": 74340702, "body": "I read another thread which suggested this, but the poster was told that it&#39;s bad practice as its unclear who should be allowed to free that memory, the one who reserves or a different one? I&#39;ll go with it, I was just hoping to find a more &quot;proper&quot; way to go about fixing it."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "reply_to_user": {"reputation": 444, "user_id": 4730778, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/698ec16b61164c94aee6a20da396f0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tawm", "link": "https://stackoverflow.com/users/4730778/tawm"}, "edited": false, "score": 1, "creation_date": 1493249633, "post_id": 43645965, "comment_id": 74340790, "body": "It is acceptable practice to allocate memory in the function, and expect the calling routine to free it."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493252232, "post_id": 43645965, "comment_id": 74341457, "body": "For improved robustness you can replace the memset calls by initializing <code>temp</code>, and using <code>calloc</code> for <code>buf</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1493252259, "post_id": 43645965, "comment_id": 74341463, "body": "The <code>(char *)</code> cast is redundant, and your loop writes past the end of the buffer by 1 byte"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493252449, "post_id": 43645965, "comment_id": 74341503, "body": "What @M.M says is true.  I just updated the OP&#39;s code to use <code>malloc</code>."}], "tags": [], "owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "is_accepted": false, "score": 0, "last_activity_date": 1493247937, "creation_date": 1493247937, "answer_id": 43645965, "question_id": 43645894, "link": "https://stackoverflow.com/questions/43645894/returning-char-array-fails-without-printf/43645965#43645965", "title": "Returning char array fails without printf()", "body": "<p>you are returning a pointer to a buffer allocated on the stack.  Once hash_buffer returns, the memory allocated to buf goes away. You need to allocate a buf on the heap with malloc.  So, change your function:</p>\n\n<pre><code>char* hash_function(char* input_string)\n{\n    int i = 0;\n    unsigned char temp[SHA_DIGEST_LENGTH]; //where we will store the SHA digest. length = 20\n    char *buf = NULL;\n    buf = malloc(SHA_DIGEST_LENGTH*2);\n    if (buf == NULL) {\n        return NULL;\n    }\n\n    memset(temp, 0x0, SHA_DIGEST_LENGTH);  //array of size 20 to store SHA1 digest\n    memset(buf, 0x0, SHA_DIGEST_LENGTH*2); //array of size 2*20 to store hex result?\n\n    SHA1((unsigned char *)input_string, strlen(input_string), temp);\n\n    for(i=0; i&lt;SHA_DIGEST_LENGTH; i++){\n        sprintf((char*)&amp;(buf[i*2]), \"%02x\", temp[i]);\n        //element in temp[i] formatted with %02x and stored in buf[i*2]\n    }\n    return buf;\n}\n</code></pre>\n"}], "owner": {"reputation": 444, "user_id": 4730778, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/698ec16b61164c94aee6a20da396f0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tawm", "link": "https://stackoverflow.com/users/4730778/tawm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "closed_date": 1493261902, "answer_count": 1, "score": 0, "last_activity_date": 1493265218, "creation_date": 1493247534, "last_edit_date": 1493265218, "question_id": 43645894, "link": "https://stackoverflow.com/questions/43645894/returning-char-array-fails-without-printf", "closed_reason": "Duplicate", "title": "Returning char array fails without printf()", "body": "<p>I have a program which takes a user input, sends that user input as an argument to a function which makes a calculation, then returns the char array to the main() function to be output there.</p>\n\n<p>The <code>return (char *)&amp;buf;</code> works fine when a <code>printf()</code> statement is run.\nHowever, when there is no <code>printf()</code>, the return does not seem to work, as the <code>main()</code> function cannot output the returned value.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;openssl/sha.h&gt;\n\nusing namespace std;\n\nchar* hash_function(char* input_string)\n{\n    int i = 0;\n    unsigned char temp[SHA_DIGEST_LENGTH]; //where we will store the SHA digest. length = 20\n    char buf[SHA_DIGEST_LENGTH*2];\n\n    memset(temp, 0x0, SHA_DIGEST_LENGTH);  //array of size 20 to store SHA1 digest\n    memset(buf, 0x0, SHA_DIGEST_LENGTH*2); //array of size 2*20 to store hex result?\n\n    SHA1((unsigned char *)input_string, strlen(input_string), temp);\n\n    for(i=0; i&lt;SHA_DIGEST_LENGTH; i++){\n        sprintf((char*)&amp;(buf[i*2]), \"%02x\", temp[i]);\n        //element in temp[i] formatted with %02x and stored in buf[i*2]\n    }\n\n    //printf(\"In FUNCTION: %s\\n\", buf); //*************************************\n    return (char *)&amp;buf;\n}\n\nint main(int argc, char * argv[])\n{\n    if(argc != 2)\n    {\n        printf(\"Usage: %s &lt;string&gt;\\n\", argv[0]);\n        return -1;\n    }\n\n    char *hash = hash_function(argv[1]);\n\n    printf(\"Plaintext:\\t%s\\nSHA-1:\\t\\t%s\\n\\n\", argv[1], hash);\n\n    //FILE *file = fopen(\"temp_file.txt\", \"a+\"); //open file to write to\n    //fprintf(file, \"Plaintext: %s\\nSHA-1: %s\\n\\n\", argv[1], buf);\n\n    return 0;\n}\n</code></pre>\n\n<p>The line which I've marked with asterisks is the <code>print()</code> line i'm referring to.</p>\n\n<p>In order to compile, use <code>g++ [file_name] -lcrypto -o [output]</code>\nYou may have to download the <strong>openssl/sha.h</strong> package.</p>\n"}, {"tags": ["c", "for-loop", "comparison-operators"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493264609, "post_id": 43645409, "comment_id": 74344556, "body": "Welcome to Stack Overflow. Please note that the preferred way of saying &#39;thanks&#39; around here is by up-voting good questions and helpful answers (once you have enough reputation to do so), and by accepting the most helpful answer to any question you ask (which also gives you a small boost to your reputation). Please see the <a href=\"https://stackoverflow.com/tour\">About</a> page and also <a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask questions here?</a> and <a href=\"http://stackoverflow.com/help/someone-answers\">What do I do when someone answers my question?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "is_accepted": true, "score": 3, "last_activity_date": 1493245631, "last_edit_date": 1493245631, "creation_date": 1493245290, "answer_id": 43645485, "question_id": 43645409, "link": "https://stackoverflow.com/questions/43645409/whats-happening-in-this-for-loop/43645485#43645485", "title": "Whats happening in this for loop", "body": "<p>It is just a useless statement that the compiler will optimize away. The first statement in the <code>for</code> does not need to be an assignment, it is just build to be succinct/readable way to loop over a set of values. You can expand the <code>for</code> loop into a <code>while</code> and it may make it clearer:</p>\n\n<pre><code>1 == 2; // does nothing, likely emits compiler warning.\nwhile( ch &gt; 0 )\n{\n    printf(\"%d\\n\", ch);\n    x &lt;&lt;= 1;\n    y *= 2\n\n    ch++;\n}\n</code></pre>\n\n<p>If you want to use a for loop for the post iteration expression but have already initialized your variables, you can use the null statement as the first expression:</p>\n\n<pre><code>for( ; ch &gt; 0; ch++ ){ /* ... */ }\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5906491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1031056296941839/picture?type=large", "display_name": "Anthony Gayflor", "link": "https://stackoverflow.com/users/5906491/anthony-gayflor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 43645485, "answer_count": 1, "score": 0, "last_activity_date": 1493246119, "creation_date": 1493244903, "last_edit_date": 1493246119, "question_id": 43645409, "link": "https://stackoverflow.com/questions/43645409/whats-happening-in-this-for-loop", "title": "Whats happening in this for loop", "body": "<p>whats happening in the first statement of the for loop? I can not seem to wrap my head around why 1 == 2 would be acceptable because its a comparison and not a value assignment.</p>\n\n<pre><code>char ch = 120;\nunsigned char x = 1;\nunsigned int y = 1;\nfor(1 == 2; ch &gt; 0; ch++) {\n  printf(\"%d\\n\", ch);\n  x &lt;&lt;= 1;\n  y *= 2;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "tcp"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1493246255, "post_id": 43645345, "comment_id": 74339701, "body": "Related: <a href=\"http://stackoverflow.com/questions/16594387/why-should-i-use-or-not-use-msg-confirm\" title=\"why should i use or not use msg confirm\">stackoverflow.com/questions/16594387/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1493455342, "post_id": 43692859, "comment_id": 74432731, "body": "Polling on POLLOUT <i>before</i> sending is a waste of time. A socket is normally writeable. You should only use POLLOUT when you have had a send error of EAGAIN/EWOULDBLOCK. None of this has anything to do with MSG_CONFIRM."}], "tags": [], "owner": {"reputation": 41, "user_id": 7513535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b2aa0950e954059a6be81a9db7bfe9?s=128&d=identicon&r=PG&f=1", "display_name": "jski", "link": "https://stackoverflow.com/users/7513535/jski"}, "is_accepted": false, "score": 0, "last_activity_date": 1493449971, "creation_date": 1493449971, "answer_id": 43692859, "question_id": 43645345, "link": "https://stackoverflow.com/questions/43645345/msg-confirm-and-tcp/43692859#43692859", "title": "MSG_CONFIRM and TCP", "body": "<p>I jettisoned the MSG_CONFIRM with the AF_UNIX socket and polled on POLLOUT before attempting to send. I also ended up leaving the socket and associated send()'s being nonblocking. Works fine now.</p>\n"}], "owner": {"reputation": 41, "user_id": 7513535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b2aa0950e954059a6be81a9db7bfe9?s=128&d=identicon&r=PG&f=1", "display_name": "jski", "link": "https://stackoverflow.com/users/7513535/jski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 684, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493449971, "creation_date": 1493244630, "question_id": 43645345, "link": "https://stackoverflow.com/questions/43645345/msg-confirm-and-tcp", "title": "MSG_CONFIRM and TCP", "body": "<p>I inherited some socket code that uses MSG_CONFIRM as the flag in a send(). The man-page for send() seems to say that MSG_CONFIRM is only applicable for UDP sockets. This is an AF_UNIX socket using the TCP protocol. </p>\n\n<p>Without the MSG_CONFIRM flag I get \"resource temporarily unavailable\" on the send().</p>\n\n<p>What does MSG_CONFIRM meant in this context ... a AF_UNIX socket using the TCP protocol?</p>\n"}, {"tags": ["c", "linked-list", "stack", "infinite-loop"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1493244215, "post_id": 43645227, "comment_id": 74338954, "body": "In <code>printStack()</code> you define <code>tmp</code> but do not use it. Instead you modify the global <code>head</code> and from then on <code>head</code> is useless."}, {"owner": {"reputation": 49, "user_id": 7419667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1f7f66ff17e95539326e0099846e3a5f?s=128&d=identicon&r=PG&f=1", "display_name": "mychem97", "link": "https://stackoverflow.com/users/7419667/mychem97"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1493245509, "post_id": 43645227, "comment_id": 74339456, "body": "@WeatherVane I also did this in my pop() function. After changing both, the infinite loop was gone, thanks!"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1493246180, "post_id": 43645227, "comment_id": 74339679, "body": "But, it was ok in <code>pop(node *head)</code> since you were modifying a pass by value parameter as opposed to the global variable that was being modified by <code>printStack()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 919, "user_id": 2428220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fadc6b021c1a7d2443fbe1810234387?s=128&d=identicon&r=PG", "display_name": "sigbjornlo", "link": "https://stackoverflow.com/users/2428220/sigbjornlo"}, "is_accepted": false, "score": 1, "last_activity_date": 1493246719, "last_edit_date": 1493246719, "creation_date": 1493246397, "answer_id": 43645688, "question_id": 43645227, "link": "https://stackoverflow.com/questions/43645227/cant-solve-infinite-loop/43645688#43645688", "title": "Can&#39;t Solve Infinite Loop", "body": "<p>You run into an infinite loop due to not properly initialising your variables. In particular, you have no guarantees that your node* head will be initialised to NULL, or that your int variables in toBin() will be initialised to zero.</p>\n\n<p><strong>Always, always, <em>always</em> initialise your variables when programming in C/C++.</strong></p>\n\n<p>Fixing these bugs and removing unused code leaves us with:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct node_def node;\n\nstruct node_def\n{\n    int val;\n    node *next;\n};\n\n/* Note that we are initialising the global variable to NULL. */\nnode *head = NULL; \n\nvoid push(int val);\nvoid printStack();\nint toBin(int val);\n\nint main()\n{\n    int num = 0;\n\n    printf(\"Enter an integer: \");\n    scanf(\"%d\", &amp;num);\n\n    /* Removed push(num), as you're using parameters in the following call: */\n    toBin(num);\n    printStack();\n\n    return 0;\n\n}\n\n/* Changed printStack to use a tmp pointer to \n   traverse the stack without mutating it */\nvoid printStack()\n{\n    node* tmp = head;\n    while(tmp != NULL)\n    {\n        printf(\"%d \", tmp-&gt;val);\n        tmp = tmp-&gt;next;\n    }\n    printf(\"\\n\");\n    return;\n}\n\nint toBin(int val)\n{\n    /* Removed pop() as you're getting val from parameters */\n\n    /* Also initialising remainder and binary variables */\n    int i = 1, remainder = 0, binary = 0;\n\n    while(val != 0)\n    {\n        remainder = val % 2;\n        binary = binary + remainder * i;\n        val = val / 2;\n        i = i * 10;\n        push(binary);\n    }\n\n    return val;\n}\n\n/* It's a stack so no if's are necessary for pushing */\nvoid push(int val)\n{\n    node *new = malloc(sizeof(node));\n    new-&gt;val = val;\n    new-&gt;next = head;\n\n    head = new;\n    return;\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 7419667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1f7f66ff17e95539326e0099846e3a5f?s=128&d=identicon&r=PG&f=1", "display_name": "mychem97", "link": "https://stackoverflow.com/users/7419667/mychem97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493246719, "creation_date": 1493243920, "question_id": 43645227, "link": "https://stackoverflow.com/questions/43645227/cant-solve-infinite-loop", "title": "Can&#39;t Solve Infinite Loop", "body": "<p>The program is supposed to take a user entered integer and convert it into binary through a stack of singly linked lists. I think it's either my toBin() function or my printStack() function that's causing the infinite loop.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\ntypedef struct node_def node;\n\nstruct node_def\n{\n    int val;\n    node *next;\n};\n\nnode *head;\n\nvoid push(int val);\nvoid pop(node *head);\nint top();\nvoid printStack();\nint toBin(int val);\n\nint main()\n{\n    int num = 0;\n\n    printf(\"Enter an integer: \");\n    scanf(\"%d\", &amp;num);\n    push(num);\n    toBin(num);\n    printStack();\n\n    return 0;\n\n}\n\nvoid push(int val)\n{\n    node *new;\n    new = malloc(sizeof(node));\n\n    if (head == NULL)\n    {\n        head = malloc(sizeof(node));\n        head-&gt;next = NULL;\n        head-&gt;val = val;\n    }\n    else\n    {\n        new-&gt;next = head;\n        new-&gt;val = val;\n        head = new;\n\n    }\n\n    return;\n}\n\nvoid pop(node *head)\n{\n    node *tmp;\n    if(head == NULL)\n    {\n        printf(\"Stack is Empty\\n\");\n        return;\n    }\n    else\n    {\n        tmp = head;\n        head = head-&gt;next;\n        free(tmp);\n    }\n    return;\n}\n\nint top()\n{\n    return(head-&gt;val);\n}\n\nvoid printStack()\n{\n    node *tmp;\n    tmp = head;\n\n    if(head == NULL)\n    {\n        return;\n    }\n\n    while(head != NULL)\n    {\n        printf(\"%d \", head-&gt;val);\n        head = head-&gt;next;\n    }\n    printf(\"\\n\");\n    return;\n}\n\nint toBin(int val)\n{\n    pop(head);\n    int i = 1, remainder, binary;\n\n    while(val != 0)\n    {\n        remainder = val % 2;\n        binary = binary + remainder * i;\n        val = val / 2;\n        i = i * 10;\n        push(binary);\n    }\n\n    return val;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1493243545, "post_id": 43645120, "comment_id": 74338668, "body": "Please take the <a href=\"https://stackoverflow.com/tour\">tour</a>,   learn asking good questions stackoverflow.com/help/how-to-ask,   make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.   If you are looking for help with debugging code see <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1493243559, "post_id": 43645120, "comment_id": 74338671, "body": "<code>a[S]=100;</code> is outside the bounds of the array. <code>a[S]</code> may only be indexed from 0 to 99."}, {"owner": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 1, "creation_date": 1493243640, "post_id": 43645120, "comment_id": 74338713, "body": "Hint: turn on compiler-warnings (&#39;-Wall&#39; for gcc)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1493243721, "post_id": 43645120, "comment_id": 74338746, "body": "An <i>uninitialised array</i> might be seen as &quot;random&quot; but is not considered to be &quot;random&quot; programmatically."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 0, "creation_date": 1493243750, "post_id": 43645120, "comment_id": 74338757, "body": "<code>printf(a[x]);</code> as @Paul said."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 1, "creation_date": 1493243753, "post_id": 43645120, "comment_id": 74338759, "body": "@Paul I do not think that -Wall will be needed to make a compiler complain about that code. Compiling will be sufficient. And I am still waiting for a question to be asked."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1493243860, "post_id": 43645120, "comment_id": 74338806, "body": "Please post the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> that shows the problem. The code posted has naive errors and typos and does not compile. Which particular error asked about? No question was asked and cannot be answered."}, {"owner": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1493245506, "post_id": 43645120, "comment_id": 74339453, "body": "@Yunnosch youre right, my bad."}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 0, "last_activity_date": 1493244080, "creation_date": 1493244080, "answer_id": 43645256, "question_id": 43645120, "link": "https://stackoverflow.com/questions/43645120/c-program-bigneer/43645256#43645256", "title": "C Program bigneer", "body": "<p>Two things: first,  <code>int a [S]; a[S]=100</code> exceeds the array bounds (max is <code>S-1</code>).\nSecond, <code>printf(const char* format, ...)</code> expects a format string, but you pass an integer value at the place of the format string (turn on compiler warnings!). So write <code>printf(\"%d \", a[x])</code>, and the program should at least print out some numbers (once you actually assign any numbers to <code>a</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1493280062, "last_edit_date": 1493280062, "creation_date": 1493278866, "answer_id": 43651510, "question_id": 43645120, "link": "https://stackoverflow.com/questions/43645120/c-program-bigneer/43651510#43651510", "title": "C Program bigneer", "body": "<p>like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdbool.h&gt;\n\n#define SIZE  100\n#define RANGE 1000\n\nint main(void){\n    srand(time(NULL));\n\n    int a[SIZE];\n    bool chosen[RANGE] = {0};\n\n    for(int i = 0; i &lt; SIZE; ++i){\n        int select = rand() % RANGE;//select 0..RANGE-1\n        while(chosen[select]){//check duplicate\n            if(++select == RANGE)\n                select = 0;//reset\n        }\n        chosen[select] = true;//selected\n        a[i] = select;\n    }\n    //result\n    for(int i = 0; i &lt; SIZE; ++i)\n        printf(\"%d \", a[i]);\n    puts(\"\");\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6534162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd01e28611450e008c4f0f8cb69ea56?s=128&d=identicon&r=PG&f=1", "display_name": "user6534162", "link": "https://stackoverflow.com/users/6534162/user6534162"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1493280062, "creation_date": 1493243429, "question_id": 43645120, "link": "https://stackoverflow.com/questions/43645120/c-program-bigneer", "title": "C Program bigneer", "body": "<p>I am working on generate 100 random numbers and place them in a , numbers should be 0-999. I wrote my program and it didn't print the random numbers.\nI appreciate any help.\n this is my code</p>\n\n<pre><code>   #include &lt;stdio.h&gt;\n   #defin S 100\n   int main()\n  {\nint x;\nint a [S];\na[S]=100;\nfor(x=0;x&lt;s;x++){\n    printf(a[x]);\n}\n\nreturn 0;\n</code></pre>\n\n<p>}  </p>\n"}, {"tags": ["c", "linked-list", "bubble-sort"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1493244543, "post_id": 43645115, "comment_id": 74339093, "body": "Please make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 532, "user_id": 7258651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2PhS7.jpg?s=128&g=1", "display_name": "Marek Chochol&#225;\u010dek", "link": "https://stackoverflow.com/users/7258651/marek-chochol%c3%a1%c4%8dek"}, "edited": false, "score": 0, "creation_date": 1493244559, "post_id": 43645115, "comment_id": 74339105, "body": "short example input, desired output and actual output would help I guess"}, {"owner": {"reputation": 17, "user_id": 7123704, "user_type": "registered", "profile_image": "https://graph.facebook.com/284840858577618/picture?type=large", "display_name": "\u30b9\u30e9\u30d5 \u30ed\u30b9\u30c1", "link": "https://stackoverflow.com/users/7123704/%e3%82%b9%e3%83%a9%e3%83%95-%e3%83%ad%e3%82%b9%e3%83%81"}, "edited": false, "score": 0, "creation_date": 1493245224, "post_id": 43645115, "comment_id": 74339354, "body": "Oh sure, the output should be C, B, A but for some reason i&#39;ve got output C, A, B and im sure the if statement was executed 2nd times.  Input is A, B, C"}], "answers": [{"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 2, "last_activity_date": 1493245809, "creation_date": 1493245809, "answer_id": 43645568, "question_id": 43645115, "link": "https://stackoverflow.com/questions/43645115/homework-linked-list-bubble-sort/43645568#43645568", "title": "Homework, linked list bubble sort", "body": "<p>You need to reset the working pointer in each outer loop:</p>\n\n<pre><code>    Prohozeno = 1;               /* after this line */\n    AktualniPrikaz = *Seznam;    /*   add this line */\n</code></pre>\n\n<p>also the code is swapping the contents of the nodes, rather than changing the node links to accomplish the sort. I'm not sure if this is allowed for you class assignment.</p>\n\n<p>If you need to change the links instead of using a bubble sort (swapping nodes via links is complicated) it would be simpler to create a new empty list such as:</p>\n\n<pre><code>PrikazStruct *Sorted = NULL;    /* this will be sorted list */\n</code></pre>\n\n<p>then remove nodes from the original list one at a time and insert them into the to be sorted list in order. Other methods such as bottom up merge sort would be faster, but way beyond what you would expect for this type of class assignment.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Merge_sort#Bottom-up_implementation_using_lists\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Merge_sort#Bottom-up_implementation_using_lists</a></p>\n\n<p>It would be faster still to create an array of pointers to node, sort the array of pointers, then relink the list based on the sorted array of pointers, but this takes O(n) space, and it's not a linked list sort.</p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 7123704, "user_type": "registered", "profile_image": "https://graph.facebook.com/284840858577618/picture?type=large", "display_name": "\u30b9\u30e9\u30d5 \u30ed\u30b9\u30c1", "link": "https://stackoverflow.com/users/7123704/%e3%82%b9%e3%83%a9%e3%83%95-%e3%83%ad%e3%82%b9%e3%83%81"}, "edited": false, "score": 0, "creation_date": 1493252431, "post_id": 43645683, "comment_id": 74341499, "body": "I also thank you, but i have problem, when i call the bubblesort function for 2nd time, the output is broken, for example, for the 1st time its ABC, and for 2nd its only A"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 17, "user_id": 7123704, "user_type": "registered", "profile_image": "https://graph.facebook.com/284840858577618/picture?type=large", "display_name": "\u30b9\u30e9\u30d5 \u30ed\u30b9\u30c1", "link": "https://stackoverflow.com/users/7123704/%e3%82%b9%e3%83%a9%e3%83%95-%e3%83%ad%e3%82%b9%e3%83%81"}, "edited": false, "score": 0, "creation_date": 1493276477, "post_id": 43645683, "comment_id": 74349116, "body": "@\u30b9\u30e9\u30d5\u30ed\u30b9\u30c1 Sorry, there&#39;s any number of things which could be causing that. Without a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable example</a> I can&#39;t say what. I&#39;d suggest using a memory checker like <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">Valgrind</a>."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 0, "last_activity_date": 1493246377, "creation_date": 1493246377, "answer_id": 43645683, "question_id": 43645115, "link": "https://stackoverflow.com/questions/43645115/homework-linked-list-bubble-sort/43645683#43645683", "title": "Homework, linked list bubble sort", "body": "<p>Your swap function is copying the complete contents of the nodes. That's going to be very inefficient, very specific to the content of the nodes, and anyone holding pointers to those nodes will be very surprised when the content changes. A good sort algorithm only needs to know the sorting criteria.</p>\n\n<p>Instead, it should be leaving the content of the nodes alone and relinking them in the list. As you've probably noticed, with a single linked list to \"bubble up\" you need the two nodes and the previous one. Instead, of bubbling smaller items up, push the larger ones down.</p>\n\n<p>Here's the basic algorithm.</p>\n\n<pre><code>while( changed ) {\n    changed = 0;\n\n    /* I believe you forgot this part */\n    q = top;\n    p = top-&gt;next;\n\n    while( p-&gt;next != NULL ) {\n        /* push bigger items down */\n        if( p-&gt;data &gt; p-&gt;next-&gt;data ) {\n            q-&gt;next = list_switch( p, p-&gt;next );\n            changed = 1;\n        }\n\n        q = p;\n\n        if( p-&gt;next != NULL ) {\n            p = p-&gt;next;\n        }\n    }\n}\n</code></pre>\n\n<p>And the swap function is very simple.</p>\n\n<pre><code>LIST *list_switch( LIST *l1, LIST *l2 )\n{\n    l1-&gt;next = l2-&gt;next;\n    l2-&gt;next = l1;\n    return l2;\n}\n</code></pre>\n\n<p>For more, see this <a href=\"http://faculty.salina.k-state.edu/tim/CMST302/study_guide/topic7/bubble.html\" rel=\"nofollow noreferrer\">Linked List Bubble Sort example</a>.</p>\n"}], "owner": {"reputation": 17, "user_id": 7123704, "user_type": "registered", "profile_image": "https://graph.facebook.com/284840858577618/picture?type=large", "display_name": "\u30b9\u30e9\u30d5 \u30ed\u30b9\u30c1", "link": "https://stackoverflow.com/users/7123704/%e3%82%b9%e3%83%a9%e3%83%95-%e3%83%ad%e3%82%b9%e3%83%81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493246377, "creation_date": 1493243406, "last_edit_date": 1493245705, "question_id": 43645115, "link": "https://stackoverflow.com/questions/43645115/homework-linked-list-bubble-sort", "title": "Homework, linked list bubble sort", "body": "<p>i have a little problem with a homework, where i have to work with linked list, the problem is the sorting function, i choosed the bubblesort algorithm, here is a piece of code.</p>\n\n<pre><code>void BubbleSort(PrikazStruct **Seznam) {\n    int Prohozeno = NULL;\n    int Value_1, Value_2;\n\n    PrikazStruct *AktualniPrikaz = *Seznam;\n    PrikazStruct *Temp = AktualniPrikaz-&gt;Dalsi;\n\n    Value_1 = AktualniPrikaz-&gt;Jmeno[0];\n    Value_2 = AktualniPrikaz-&gt;Dalsi-&gt;Jmeno[0];\n\n    do {\n        Prohozeno = 1;\n\n        while (AktualniPrikaz-&gt;Dalsi != NULL) {\n            if (Value_1 &lt; Value_2) {\n                ProhodCleny(AktualniPrikaz, AktualniPrikaz-&gt;Dalsi);\n                Prohozeno = 0;\n            }\n\n            Value_1 = AktualniPrikaz-&gt;Jmeno[0];\n            AktualniPrikaz = AktualniPrikaz-&gt;Dalsi;\n            Value_2 = AktualniPrikaz-&gt;Jmeno[0];\n\n        }\n\n    } while (!Prohozeno);\n\n    return;\n}\n</code></pre>\n\n<p>i cant realize why, it does not sort the list properly, here is the structure swap function</p>\n\n<pre><code>void ProhodCleny(PrikazStruct *S1, PrikazStruct *S2) {\n    PrikazStruct *Temp = (PrikazStruct *) malloc(sizeof(PrikazStruct));\n\n    Temp-&gt;ID = S1-&gt;ID;\n    strcpy(Temp-&gt;Jmeno, S1-&gt;Jmeno);\n    strcpy(Temp-&gt;Prijmeni, S1-&gt;Prijmeni);\n    Temp-&gt;Castka = S1-&gt;Castka;\n    strcpy(Temp-&gt;Popis, S1-&gt;Popis);\n    Temp-&gt;Obdobi = S1-&gt;Obdobi;\n    strcpy(Temp-&gt;stringObdobi, S1-&gt;stringObdobi);\n    strcpy(Temp-&gt;JePlatba, S1-&gt;JePlatba);\n\n    S1-&gt;ID = S2-&gt;ID;\n    strcpy(S1-&gt;Jmeno, S2-&gt;Jmeno);\n    strcpy(S1-&gt;Prijmeni, S2-&gt;Prijmeni);\n    S1-&gt;Castka = S2-&gt;Castka;\n    strcpy(S1-&gt;Popis, S2-&gt;Popis);\n    S1-&gt;Obdobi = S2-&gt;Obdobi;\n    strcpy(S1-&gt;stringObdobi, S2-&gt;stringObdobi);\n    strcpy(S1-&gt;JePlatba, S2-&gt;JePlatba);\n\n    S2-&gt;ID = Temp-&gt;ID;\n    strcpy(S2-&gt;Jmeno, Temp-&gt;Jmeno);\n    strcpy(S2-&gt;Prijmeni, Temp-&gt;Prijmeni);\n    S2-&gt;Castka = Temp-&gt;Castka;\n    strcpy(S2-&gt;Popis, Temp-&gt;Popis);\n    S2-&gt;Obdobi = Temp-&gt;Obdobi;\n    strcpy(S2-&gt;stringObdobi, Temp-&gt;stringObdobi);\n    strcpy(S2-&gt;JePlatba, Temp-&gt;JePlatba);\n\n    free(Temp);\n    return;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "csv", "parsing", "pointers"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493243443, "post_id": 43645059, "comment_id": 74338631, "body": "1) <code>int A[10][10];</code> --&gt; <code>const char *A[10][10];</code>"}, {"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1493243568, "post_id": 43645059, "comment_id": 74338677, "body": "<code>getfield()</code> doesn&#39;t make any copy, it just chops up and returns a part of <code>tmp</code>.  Then you assign that part of <code>tmp</code> to a location in the matrix, then you free <code>tmp</code>.  (which as @BLUEPIXY pointed out isn&#39;t even defined to hold strings)  If you&#39;re going to store pointers in <code>A</code>, you&#39;ll have to keep them allocated till you&#39;re done with them for starters.  (I haven&#39;t read past this line of code yet, so likely more to come...)"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493244071, "post_id": 43645059, "comment_id": 74338896, "body": "3) <code>if (!--num)</code> --&gt; <code>if (!num--)</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493244104, "post_id": 43645059, "comment_id": 74338908, "body": "4) You need reset <code>j</code>. Like <code>j = 0;         while(j&lt;10){</code> or Use <code>for</code>"}, {"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493244505, "post_id": 43645059, "comment_id": 74339069, "body": "Next, <code>getfield()</code> appears to quit processing correctly after the first call since the string is already chopped up.  And, as @BLUEPIXY points out this time: <code>j</code> is not reset at all, so the double loop will only execute the <code>i</code> portion once.  On top of that, <code>j</code> is not in any way related to how many tokens are found, so it&#39;ll just go to <code>9</code>, finding nothing after the first row.  (and only possibly 1 item in that first row due to the re-entry problem in <code>getfield()</code>).  Your question seems more of the form &quot;how do I do this?&quot; than &quot;what is wrong?&quot;, so I&#39;ll look for something, but CSV is tough."}, {"owner": {"reputation": 67, "user_id": 7853394, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c2f17d61eeefc4c8cce47e798560e202?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew R", "link": "https://stackoverflow.com/users/7853394/matthew-r"}, "edited": false, "score": 0, "creation_date": 1493244959, "post_id": 43645059, "comment_id": 74339262, "body": "You&#39;re right definitely more of how do I this question. I&#39;ve never worked with csv before outside of excel. By incorporating your changes I&#39;m not at the point where the output has &quot;aGd&quot; in the first column, &quot;d&quot; in the second, and 54.9 in the last"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493246963, "post_id": 43645059, "comment_id": 74339944, "body": "<a href=\"http://ideone.com/9FhKL6\" rel=\"nofollow noreferrer\">DEMO</a>"}, {"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493247860, "post_id": 43645059, "comment_id": 74340257, "body": "@BLUEPIXY shouldn&#39;t that be an &quot;answer&quot;?  And looks like you win the foot race."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 1, "creation_date": 1493248008, "post_id": 43645059, "comment_id": 74340304, "body": "@ebyrob Basically these questions are mostly off-topics."}, {"owner": {"reputation": 67, "user_id": 7853394, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c2f17d61eeefc4c8cce47e798560e202?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew R", "link": "https://stackoverflow.com/users/7853394/matthew-r"}, "edited": false, "score": 0, "creation_date": 1493248215, "post_id": 43645059, "comment_id": 74340385, "body": "Works like a charm! Thank you for the help!"}, {"owner": {"reputation": 67, "user_id": 7853394, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c2f17d61eeefc4c8cce47e798560e202?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew R", "link": "https://stackoverflow.com/users/7853394/matthew-r"}, "edited": false, "score": 0, "creation_date": 1493248490, "post_id": 43645059, "comment_id": 74340464, "body": "Do I need to award you the answer or do you need to submit as an answer first?"}, {"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1493249221, "post_id": 43645059, "comment_id": 74340684, "body": "@MatthewR Just remember that CSV parsing is tough.  You may have commas in the data, or quotes, or commented out lines, or no header, or some other character set than what you expect."}, {"owner": {"reputation": 67, "user_id": 7853394, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c2f17d61eeefc4c8cce47e798560e202?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew R", "link": "https://stackoverflow.com/users/7853394/matthew-r"}, "edited": false, "score": 0, "creation_date": 1493307695, "post_id": 43645059, "comment_id": 74371449, "body": "Will watch out for that, thanks"}], "answers": [{"tags": [], "owner": {"reputation": 360, "user_id": 4808244, "user_type": "registered", "profile_image": "https://graph.facebook.com/819807594765707/picture?type=large", "display_name": "Scott Forsythe", "link": "https://stackoverflow.com/users/4808244/scott-forsythe"}, "is_accepted": false, "score": 1, "last_activity_date": 1502042126, "creation_date": 1502042126, "answer_id": 45534983, "question_id": 43645059, "link": "https://stackoverflow.com/questions/43645059/parsing-csv-file-into-2d-array-in-c/45534983#45534983", "title": "Parsing .csv file into 2D array in C", "body": "<p>It looks like commenters have already helped you find a few errors in your code. However, the problems are pretty entrenched. One of the biggest issues is that you're using strings. Strings are, of course, char arrays; that means that there's already a dimension in use.</p>\n\n<p>It would probably be better to just use a struct like this:</p>\n\n<pre><code>struct csvTable\n{\n    char sku[10];\n    char plant[10];\n    char qty[10];\n};\n</code></pre>\n\n<p>That will also allow you to set your columns to the right data types (it looks like SKU could be an int, but I don't know the context). </p>\n\n<p>Here's an example of that implementation. I apologize for the mess, it's adapted  on the fly from something I was already working on. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n// Based on your estimate\n// You could make this adaptive or dynamic\n\n#define rowNum 500000\n\nstruct csvTable\n{\n    char sku[10];\n    char plant[10];\n    char qty[10];\n};\n\n// Declare table\nstruct csvTable table[rowNum];\n\nint main()\n{\n    // Load file\n    FILE* fp = fopen(\"demo.csv\", \"r\");\n\n    if (fp == NULL)\n    {\n        printf(\"Couldn't open file\\n\");\n        return 0;\n    }\n\n    for (int counter = 0; counter &lt; rowNum; counter++)\n    {\n        char entry[100];\n        fgets(entry, 100, fp);\n\n        char *sku = strtok(entry, \",\");\n        char *plant = strtok(NULL, \",\");\n        char *qty = strtok(NULL, \",\");\n\n        if (sku != NULL &amp;&amp; plant != NULL &amp;&amp; qty != NULL)\n        {\n            strcpy(table[counter].sku, sku);\n            strcpy(table[counter].plant, plant);\n            strcpy(table[counter].qty, qty);\n        }\n        else\n        {\n            strcpy(table[counter].sku, \"\\0\");\n            strcpy(table[counter].plant, \"\\0\");\n            strcpy(table[counter].qty, \"\\0\");\n        }\n    }\n\n    // Prove that the process worked\n    for (int printCounter = 0; printCounter &lt; rowNum; printCounter++)\n    {\n        printf(\"Row %d: column 1 = %s, column 2 = %s, column 3 = %s\\n\", \n            printCounter + 1, table[printCounter].sku, \n            table[printCounter].plant, table[printCounter].qty);\n    }\n\n    // Wait for keypress to exit\n    getchar();\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1502118980, "creation_date": 1502118980, "answer_id": 45550366, "question_id": 43645059, "link": "https://stackoverflow.com/questions/43645059/parsing-csv-file-into-2d-array-in-c/45550366#45550366", "title": "Parsing .csv file into 2D array in C", "body": "<p>There are multiple problems in your code:</p>\n\n<ul>\n<li>In the second loop, you do not stop reading the file after 10 lines, so you would try and store elements beyond the end of the <code>A</code> array.</li>\n<li>You do not reset <code>j</code> to <code>0</code> at the start of the <code>while (j &lt; 10)</code> loop.  <code>j</code> happens to have the value <code>10</code> at the end of the initialization loop, so you effectively do not store anything into the matrix.</li>\n<li>The matrix <code>A</code> should be a 2D array of <code>char *</code>, not <code>int</code>, or potentially an array of structures.</li>\n</ul>\n\n<p>Here is a simpler version with an allocated array of structures:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct item_t {\n    char SKU[20];\n    char Plant[20];\n    char Qty[20];\n};\n\nint main(void) {\n    FILE *stream = fopen(\"input/input.csv\", \"r\");\n    char line[200];\n    int size = 0, len = 0, i, c;\n    item_t *A = NULL;\n\n    if (stream) {\n        while (fgets(line, sizeof(line), stream)) {\n            if (len == size) {\n                size = size ? size * 2 : 1000;\n                A = realloc(A, sizeof(*A) * size);\n                if (A == NULL) {\n                    fprintf(stderr, \"out of memory for %d items\\n\", size);\n                    return 1;\n                }\n            }\n            if (sscanf(line, \"%19[^,\\n],%19[^,\\n],%19[^,\\n]%c\",\n                       A[len].SKU, A[len].Plant, A[len].Qty, &amp;c) != 4\n            ||  c != '\\n') {\n                fprintf(stderr, \"invalid format: %s\\n, line);\n            } else {\n                len++;\n            }\n        }\n        fclose(stream);\n\n        //print matrix\n        for (i = 0; i &lt; len; i++) {\n            printf(\"%s,%s,%s\\n\", A[i].SKU, A[i].Plant, A[i].Qty);\n        }\n        free(A);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 7853394, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c2f17d61eeefc4c8cce47e798560e202?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew R", "link": "https://stackoverflow.com/users/7853394/matthew-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2151, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1502118980, "creation_date": 1493243172, "last_edit_date": 1502117668, "question_id": 43645059, "link": "https://stackoverflow.com/questions/43645059/parsing-csv-file-into-2d-array-in-c", "title": "Parsing .csv file into 2D array in C", "body": "<p>I have a .csv file that reads like:</p>\n\n<pre><code>SKU,Plant,Qty\n40000,ca56,1245\n40000,ca81,12553.3\n40000,ca82,125.3\n45000,ca62,0\n45000,ca71,3\n45000,ca78,54.9\n</code></pre>\n\n<p>Note: This is my example but in reality this has about 500,000 rows and 3 columns.</p>\n\n<p>I am trying to convert these entries into a 2D array so that I can then manipulate the data. You'll notice that in my example I just set a small 10x10 matrix <code>A</code> to try and get this example to work before moving on to the real thing.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nconst char *getfield(char *line, int num);\n\nint main() {\n    FILE *stream = fopen(\"input/input.csv\", \"r\");\n    char line[1000000];\n    int A[10][10];\n    int i, j = 0;\n\n    //Zero matrix\n    for (i = 0; i &lt; 10; i++) {\n        for (j = 0; j &lt; 10; j++) {\n            A[i][j] = 0;\n        }\n    }\n\n    for (i = 0; fgets(line, 1000000, stream); i++) {\n        while (j &lt; 10) {\n            char *tmp = strdup(line);\n            A[i][j] = getfield(tmp, j);\n            free(tmp);\n            j++;\n        }\n    }\n    //print matrix\n    for (i = 0; i &lt; 10; i++) {\n        for (j = 0; j &lt; 10; j++) {\n            printf(\"%s\\t\", A[i][j]);\n        }\n        printf(\"\\n\");\n    }\n}\n\nconst char *getfield(char *line, int num) {\n    const char *tok;\n    for (tok = strtok(line, \",\");\n         tok &amp;&amp; *tok;\n         tok = strtok(NULL, \",\\n\"))\n    {\n        if (!--num)\n            return tok;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>It prints only \"null\" errors, and it is my belief that I am making a mistake related to pointers on this line: <code>A[i][j] = getfield(tmp, j)</code>. I'm just not really sure how to fix that. </p>\n\n<p>This is work that is based almost entirely on this question: <a href=\"https://stackoverflow.com/questions/12911299/read-csv-file-in-c\">Read .CSV file in C</a> .  Any help in adapting this would be very much appreciated as it's been a couple years since I last touched C or external files. </p>\n"}, {"tags": ["c", "compilation", "openssl"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1493243414, "post_id": 43644785, "comment_id": 74338620, "body": "post your code in text here.  don&#39;t use links to images that contain text."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1493245364, "post_id": 43644785, "comment_id": 74339414, "body": "Btw, I have compiled openssl code with exactly the gcc flags you used."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1493249288, "post_id": 43644785, "comment_id": 74340698, "body": "Ubuntu ships with OpenSSL 1.0.2 (or maybe 1.0.1); not OpenSSL 1.1.0. You need to use <code>-L</code>, too. <code>-L</code> tells the linker where to find the libraries. You might find it easier to use Ubuntu&#39;s OpenSSL since everything will be on-path. Also see <a href=\"http://stackoverflow.com/q/3016956/608639\">How do I install the OpenSSL libraries on Ubuntu?</a>"}, {"owner": {"reputation": 2461, "user_id": 1716583, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2dn6h.jpg?s=128&g=1", "display_name": "Camille G.", "link": "https://stackoverflow.com/users/1716583/camille-g"}, "edited": false, "score": 0, "creation_date": 1493275995, "post_id": 43644785, "comment_id": 74348831, "body": "#include &lt;openssl/evp.h&gt;"}, {"owner": {"reputation": 11, "user_id": 2854204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0677e694d6d41279484fad47cf417d16?s=128&d=identicon&r=PG&f=1", "display_name": "sangat", "link": "https://stackoverflow.com/users/2854204/sangat"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1493303663, "post_id": 43644785, "comment_id": 74368630, "body": "@jww thanks for comment it worked after using the default OpenSSL 1.0.0"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493327204, "post_id": 43644785, "comment_id": 74382700, "body": "post the actual code YOU are using, post the actual error messages your compiler is outputing.  DO NOT post links to that information."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493327305, "post_id": 43644785, "comment_id": 74382749, "body": "Note: when compiling with <code>gcc</code>, at a minimum use the following parameters to enable the warnings, then fix those warnings.  <code>-Wall -Wextra -pedantic</code>  I also use: `-Wconversion -std=gnu11 )"}], "owner": {"reputation": 11, "user_id": 2854204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0677e694d6d41279484fad47cf417d16?s=128&d=identicon&r=PG&f=1", "display_name": "sangat", "link": "https://stackoverflow.com/users/2854204/sangat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1269, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1504305423, "creation_date": 1493241946, "last_edit_date": 1504305423, "question_id": 43644785, "link": "https://stackoverflow.com/questions/43644785/compiling-c-program-with-openssl", "title": "Compiling C program with OpenSSL", "body": "<p>I am new to Openssl. I have openssl 1.1.0e and libssl-dev installed on ubuntu 16.04. I am trying to run the example on this page in openssl documentation\n<a href=\"https://www.openssl.org/docs/man1.1.0/crypto/EVP_DigestInit.html\" rel=\"nofollow noreferrer\">https://www.openssl.org/docs/man1.1.0/crypto/EVP_DigestInit.html</a>.</p>\n\n<p>I use the command</p>\n\n<pre><code>gcc example1.c -lssl -lcrypto \n</code></pre>\n\n<p>to compile the program. But I get the following error\n<a href=\"https://i.stack.imgur.com/Vjdkj.png\" rel=\"nofollow noreferrer\">Undefined Reference error</a></p>\n\n<p>I have seen related questions on the forum but cannot find the solution. If anyone can help with pointing out the solution, it will be a great help.</p>\n"}, {"tags": ["android", "c++", "c", "gcc", "android-ndk"], "comments": [{"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1493840041, "post_id": 43643831, "comment_id": 74578525, "body": "What kind errors are you getting? Please post error messages, at least."}, {"owner": {"reputation": 1109, "user_id": 3026829, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/72ee15905cc129607590b061adfb181e?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. A", "link": "https://stackoverflow.com/users/3026829/mr-a"}, "reply_to_user": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1493893554, "post_id": 43643831, "comment_id": 74600831, "body": "I have added error info"}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 1, "creation_date": 1493894277, "post_id": 43643831, "comment_id": 74601331, "body": "At some point you may need to tell gradle where to find the libraries (epic5.1)."}, {"owner": {"reputation": 1109, "user_id": 3026829, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/72ee15905cc129607590b061adfb181e?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. A", "link": "https://stackoverflow.com/users/3026829/mr-a"}, "reply_to_user": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1493895586, "post_id": 43643831, "comment_id": 74602171, "body": "how to do that in gradle"}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1493898390, "post_id": 43643831, "comment_id": 74604175, "body": "Not familiar with gradle. But check this: <a href=\"https://discuss.gradle.org/t/how-do-i-link-a-c-library-with-another-library-file-that-i-know-the-path-of/7241/6\" rel=\"nofollow noreferrer\">discuss.gradle.org/t/&hellip;</a>"}, {"owner": {"reputation": 918, "user_id": 2135548, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/fM5xR.png?s=128&g=1", "display_name": "Mandar", "link": "https://stackoverflow.com/users/2135548/mandar"}, "edited": false, "score": 0, "creation_date": 1493903827, "post_id": 43643831, "comment_id": 74608312, "body": "You can create a gradle task for compiling and copying your lib&#39;s Refer:   <a href=\"https://gist.github.com/pocmo/6461138\" rel=\"nofollow noreferrer\">gist.github.com/pocmo/6461138</a>"}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 0, "creation_date": 1493916248, "post_id": 43643831, "comment_id": 74617627, "body": "@Mr.A <code>-lepic5.1</code> inside <code>cppFlags</code>? Maybe there are <code>ldFlags</code> and you should move there your <code>-lepic5.1</code>."}, {"owner": {"reputation": 1109, "user_id": 3026829, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/72ee15905cc129607590b061adfb181e?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. A", "link": "https://stackoverflow.com/users/3026829/mr-a"}, "edited": false, "score": 0, "creation_date": 1493927111, "post_id": 43643831, "comment_id": 74623727, "body": "Gradle sync failed: Could not find method ldFlags()  for arguments [-lepic5.1] on object of type com.android.build.gradle.internal.dsl.ExternalNativeCmakeOpt&zwnj;&#8203;ions. \t\t\t\tConsult IDE log for more details (Help | Show Log)"}, {"owner": {"reputation": 719, "user_id": 1083220, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/0e36597bde57aaf26954f464b79f5df4?s=128&d=identicon&r=PG&f=1", "display_name": "Misgevolution", "link": "https://stackoverflow.com/users/1083220/misgevolution"}, "edited": false, "score": 0, "creation_date": 1494311510, "post_id": 43643831, "comment_id": 74760582, "body": "Is  libepic in the standard loader path? you should configure that and try again."}, {"owner": {"reputation": 1109, "user_id": 3026829, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/72ee15905cc129607590b061adfb181e?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. A", "link": "https://stackoverflow.com/users/3026829/mr-a"}, "edited": false, "score": 0, "creation_date": 1494324697, "post_id": 43643831, "comment_id": 74769051, "body": "I tried with <code>-L&#47;path&#47;to&#47;folder</code> in <code>cppFlags</code>  but failed with same error"}, {"owner": {"reputation": 1109, "user_id": 3026829, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/72ee15905cc129607590b061adfb181e?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. A", "link": "https://stackoverflow.com/users/3026829/mr-a"}, "edited": false, "score": 0, "creation_date": 1494324899, "post_id": 43643831, "comment_id": 74769185, "body": "I&#39;m able to compile with gcc and call from Java but failed to use same in Android gradle"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1494327515, "post_id": 43643831, "comment_id": 74770928, "body": "I think you don&#39;t need an external build system, the NDK it self has some rules for this. I did this once, but don&#39;t remember how. I will check my code to see how I did it."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 4, "last_activity_date": 1494329022, "creation_date": 1494329022, "answer_id": 43868499, "question_id": 43643831, "link": "https://stackoverflow.com/questions/43643831/convert-a-gcc-command-to-cmake-for-android-ndk/43868499#43868499", "title": "Convert a gcc command to CMake for android ndk", "body": "<p>You simply need to add something to your module <em>build.gradle</em>, like this</p>\n\n<pre><code>ndk {\n    moduleName \"code\"\n    cFlags \"-I/usr/include/epic5.1 -I/usr/include/i386-linux-gnu/epic5.1 -lepic5.1 -frtti -fexceptions\"\n    ldLibs \"log\"\n}\n</code></pre>\n\n<p>and place the source files in <em>main/jni</em>.</p>\n\n<p>Perhaps, you need to change <code>cFlags</code> to <code>cppFlags</code>, but I recommend that you search for more information about this, the suggestion is based on the fact that you have <code>-fnoexceptions</code> flag, which is for c++.</p>\n\n<p>You need of course <code>libepic5.1.so</code> binary to use it for compilation, if you can add it's source code it will work.</p>\n"}], "owner": {"reputation": 1109, "user_id": 3026829, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/72ee15905cc129607590b061adfb181e?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. A", "link": "https://stackoverflow.com/users/3026829/mr-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 1, "answer_count": 1, "score": 10, "last_activity_date": 1494329022, "creation_date": 1493238101, "last_edit_date": 1495541874, "question_id": 43643831, "link": "https://stackoverflow.com/questions/43643831/convert-a-gcc-command-to-cmake-for-android-ndk", "title": "Convert a gcc command to CMake for android ndk", "body": "<p>I need to add a c project which can be compiled with <code>gcc</code> as follows </p>\n\n<pre><code>gcc  -I/usr/include/epic5.1 -I/usr/include/i386-linux-gnu/epic5.1 -I./smproject/ -o code code.c ./smproject/smlib.so -lepic5.1\n</code></pre>\n\n<p>I have moved the <code>code.c</code> files content to my Android NDK .cpp file (src/main/cpp/native-lib.cpp)  and also moved all files inside <code>smproject</code> directory to <code>src/main/cpp/smproject/</code> directory</p>\n\n<p>Here is my CMakeList.txt content </p>\n\n<pre><code># For more information about using CMake with Android Studio, read the\n# documentation: https://d.android.com/studio/projects/add-native-code.html\n\n# Sets the minimum version of CMake required to build the native library.\n\ncmake_minimum_required(VERSION 3.4.1)\n\n# Creates and names a library, sets it as either STATIC\n# or SHARED, and provides the relative paths to its source code.\n# You can define multiple libraries, and CMake builds them for you.\n# Gradle automatically packages shared libraries with your APK.\ninclude_directories( /usr/include/epic5.1 )\ninclude_directories( /usr/include/i386-linux-gnu/epic5.1 )\ninclude_directories( src/main/cpp )\n\nset_target_properties( delorean PROPERTIES IMPORTED_LOCATION\n                       src/main/cpp/smlib.so\n                        )\nadd_library( smlib STATIC IMPORTED )\n\nadd_library( # Sets the name of the library.\n             native-lib\n\n             # Sets the library as a shared library.\n             SHARED\n\n             # Provides a relative path to your source file(s).\n             src/main/cpp/native-lib.cpp\n             )\n\n# Searches for a specified prebuilt library and stores the path as a\n# variable. Because CMake includes system libraries in the search path by\n# default, you only need to specify the name of the public NDK library\n# you want to add. CMake verifies that the library exists before\n# completing its build.\n\nfind_library( # Sets the name of the path variable.\n              log-lib\n\n              # Specifies the name of the NDK library that\n              # you want CMake to locate.\n              log)\n\n# Specifies libraries CMake should link to your target library. You\n# can link multiple libraries, such as libraries you define in this\n# build script, pre-built third-party libraries, or system libraries.\n\ntarget_link_libraries( # Specifies the target library.\n                       native-lib\n\n                       # Links the target library to the log library\n                       # included in the NDK.\n                       ${log-lib}\n                       smlib\n                       )\n</code></pre>\n\n<p>I tried to follow <a href=\"https://stackoverflow.com/questions/37780921/android-ndk-cmake-with-other-libraries\">Android NDK, CMake with other libraries</a> but that didn't work for me it started throwing gradle error</p>\n\n<p>tried following in <code>build.gradle</code> file</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion \"25.0.2\"\n    defaultConfig {\n        applicationId \"in.etpg.sampleapp\"\n        minSdkVersion 15\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n        externalNativeBuild {\n            cmake {\n                cppFlags \"-I/usr/include/epic5.1 -I/usr/include/i386-linux-gnu/epic5.1 -lepic5.1 -frtti -fexceptions\"\n            }\n        }\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    externalNativeBuild {\n        cmake {\n            path \"CMakeLists.txt\"\n        }\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    compile 'com.android.support:appcompat-v7:25.3.1'\n    compile 'com.android.support.constraint:constraint-layout:1.0.2'\n    testCompile 'junit:junit:4.12'\n}\n</code></pre>\n\n<p>Errors</p>\n\n<pre><code>Error:cannot find -lepic5.1\nError:error: linker command failed with exit code 1 (use -v to see\nWarning:warning: -lepic5.1: 'linker' input unused\nError:A problem occurred configuring project ':app'.\n&gt; executing external native build for cmake /Users/laptop.user/AndroidStudioProjects/SampleApp/app/CMakeLists.txt\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 4, "creation_date": 1493237130, "post_id": 43643546, "comment_id": 74335457, "body": "1) <code>sizeof(str[0])</code> is <code>sizeof(char*)</code>, not buffer size."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493237610, "post_id": 43643546, "comment_id": 74335721, "body": "2) Since the result of <code>fgets</code> contains a newline, it is necessary to exclude newline. For example, use <code>strcspn</code> (<code>#include &lt;string.h&gt;</code>) after <code>fgets</code> as follows. E.g. <code>str[0][strcspn(str[0], &quot;\\n&quot;)]=0;</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493264472, "post_id": 43643546, "comment_id": 74344510, "body": "Welcome to Stack Overflow. Please note that the preferred way of saying &#39;thanks&#39; around here is by up-voting good questions and helpful answers (once you have enough reputation to do so), and by accepting the most helpful answer to any question you ask (which also gives you a small boost to your reputation). Please see the <a href=\"https://stackoverflow.com/tour\">About</a> page and also <a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask questions here?</a> and <a href=\"http://stackoverflow.com/help/someone-answers\">What do I do when someone answers my question?</a>"}, {"owner": {"reputation": 21, "user_id": 6631441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh6.googleusercontent.com/-7agmZoJ31eU/AAAAAAAAAAI/AAAAAAAAAE0/Ogl4wCoPYf4/photo.jpg?sz=128", "display_name": "wroh woefh", "link": "https://stackoverflow.com/users/6631441/wroh-woefh"}, "edited": false, "score": 0, "creation_date": 1493316953, "post_id": 43643546, "comment_id": 74377314, "body": "the thing that BLUEPIXY mentioned is really helpful."}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1493237376, "post_id": 43643588, "comment_id": 74335593, "body": "Note that there are two objects named <code>string</code> in the program. The <code>string</code> referenced in the <code>fgets</code> call is an array of 200 <code>char</code> elements. But the second parameter to the <code>convert_input()</code> function is also named <code>string</code>, and it&#39;s a pointer, not an array (a function parameter defined with array syntax is really an array, and the size is quietly ignored). It would be clearer to declare the function as <code>int convert_input(struct sNode** t_ArrayRef, char *string)</code> -- and it wouldn&#39;t hurt to pick a name other than <code>string</code>."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1493237103, "creation_date": 1493237103, "answer_id": 43643588, "question_id": 43643546, "link": "https://stackoverflow.com/questions/43643546/i-get-error-when-i-use-fgets-instead-of-gets/43643588#43643588", "title": "I get error when i use fgets instead of gets", "body": "<p>When you use</p>\n\n<pre><code>fgets(str[0], sizeof(str[0]), stdin);\n</code></pre>\n\n<p>you do not pass the correct size: <code>sizeof(str[0])</code> is the size of a pointer to <code>char</code>, not the size of the 200-byte <code>char</code> array that you stored in it.</p>\n\n<p>The compiler resolves this <code>sizeof</code> operator at compile time. It has no idea about the value that you put into element zero. In fact, it ignores zero altogether, replacing with <code>sizeof(*str)</code>.</p>\n\n<p>Fix this problem by passing the proper size:</p>\n\n<pre><code>fgets(str[0], sizeof(string), stdin);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6631441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh6.googleusercontent.com/-7agmZoJ31eU/AAAAAAAAAAI/AAAAAAAAAE0/Ogl4wCoPYf4/photo.jpg?sz=128", "display_name": "wroh woefh", "link": "https://stackoverflow.com/users/6631441/wroh-woefh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 43643588, "answer_count": 1, "score": 1, "last_activity_date": 1493237103, "creation_date": 1493236950, "question_id": 43643546, "link": "https://stackoverflow.com/questions/43643546/i-get-error-when-i-use-fgets-instead-of-gets", "title": "I get error when i use fgets instead of gets", "body": "<p>This is a picture when I use fgets. (it does not work properly, insanely slow !!)</p>\n\n<p><a href=\"https://i.stack.imgur.com/nW1jd.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nW1jd.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>and This is a picture when it comes to gets. (works fine)</p>\n\n<p><a href=\"https://i.stack.imgur.com/xxcQ7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xxcQ7.jpg\" alt=\"enter image description here\"></a></p>\n\n<pre><code># define _CRT_SECURE_NO_WARNINGS\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct sNode {\n    struct sNode* tNode;\n    int G[20];\n};\n\nstruct tNode {\n    struct tNode* prev;\n    struct tNode* next;\n    int data;\n    int used;\n};\n\nint convert_input(struct sNode** t_ArrayRef, char string[200])\n{\n    int j = 0, i = 0, temp = 0;\n    int K[20];\n    while (string[i] != '\\0')\n    {\n        temp = 0;\n        while (string[i] != ' ' &amp;&amp; string[i] != '\\0')\n            temp = temp * 10 + (string[i++] - '0');\n        if (string[i] == ' ')\n        {\n            i++;\n        }\n\n        (*t_ArrayRef)-&gt;G[j++] = temp;\n\n    }\n\n    return j - 1;\n}\n\nint main() {\n\nint i;\nchar string[200];\nchar* str[5];\n\nstruct sNode* t = (struct sNode*)malloc(sizeof(struct sNode));\n\nstr[0] = string;\n\n\n//fgets(str[0], sizeof(str[0]), stdin); // doesn't works !!!\ngets(str[0]); // works !!!\n\nint c = convert_input(&amp;t, str[0]);\n\nint num = t-&gt;G[0];\nconst int a = num;\nstruct tNode* tNod[6000];\n\nfor (i = 0; i&lt;num; i++) {\n    tNod[i] = (struct tNode*)malloc(sizeof(struct tNode));\n}i = 0;\n\nfor (i = 1; i&lt;num; i++) {\n    tNod[i - 1]-&gt;data = i;\n    tNod[i - 1]-&gt;used = 0;\n\n    if (i != num - 1) {\n        tNod[i - 1]-&gt;next = tNod[i];\n    }\n    else {\n        tNod[i - 1]-&gt;next = tNod[i];\n        tNod[i]-&gt;data = i + 1;\n        tNod[i]-&gt;next = tNod[0];\n    }\n}i = 0;\n\nstruct tNode* current;\n\ni = 1; int j = 0; int fCount = 0; int zCount = 0;\ncurrent = tNod[i - 1];\nprintf(\"&lt;\");\nwhile (fCount == 0) {\n    while (current-&gt;used == 1) {\n        current = current-&gt;next;\n        j++;\n        if (j &gt; num) {\n            fCount = 1;\n            break;\n        }\n    }\n    j = 0;\n    if (i % t-&gt;G[1] == 0 &amp;&amp; fCount == 0) {\n        zCount++;\n        if (zCount != t-&gt;G[0]) {\n            printf(\"%d, \", current-&gt;data, i);\n            current-&gt;used = 1;\n        }\n        else {\n            printf(\"%d\", current-&gt;data, i);\n            current-&gt;used = 1;\n        }\n    }\n    i++;\n    current = current-&gt;next;\n}\nprintf(\"&gt;\");\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>Could anyone explain to me why I can't get it working using fgets ?</p>\n"}, {"tags": ["c", "variables", "if-statement", "ansi", "declare"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1493236493, "post_id": 43643349, "comment_id": 74335097, "body": "No.  That is not allowed in C."}, {"owner": {"reputation": 1, "user_id": 7927688, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C_AVVHL_iiw/AAAAAAAAAAI/AAAAAAAAAME/RCHRqVEDGTM/photo.jpg?sz=128", "display_name": "Jorge Cavaiuolo", "link": "https://stackoverflow.com/users/7927688/jorge-cavaiuolo"}, "edited": false, "score": 1, "creation_date": 1493236564, "post_id": 43643349, "comment_id": 74335144, "body": "<a href=\"http://stackoverflow.com/questions/8474100/where-you-can-and-cannot-declare-new-variables-in-c\" title=\"where you can and cannot declare new variables in c\">stackoverflow.com/questions/8474100/&hellip;</a>"}, {"owner": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "edited": false, "score": 4, "creation_date": 1493236735, "post_id": 43643349, "comment_id": 74335227, "body": "According to the <a href=\"https://www.lysator.liu.se/c/ANSI-C-grammar-y.html#expression\" rel=\"nofollow noreferrer\">ANSI C Grammar</a>, the grammar for the if statement is <code>IF &#39;(&#39; expression &#39;)&#39; statement</code>.  <code>expression</code> cannot resolve to <code>declaration</code>, so there is no way to put a declaration in an if statement like in your example."}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1493237103, "post_id": 43643349, "comment_id": 74335440, "body": "Declare a variable strictly using a classic declaration of format <code>type var = value</code>? No."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "edited": false, "score": 0, "creation_date": 1588303301, "post_id": 43643349, "comment_id": 108852648, "body": "@RandomDavis That grammar is not up to date (but that particular production hasn&#39;t changed). Note that <code>IF</code> in that grammar refers to the <code>if</code> keyword (<code>IF</code> is an ordinary identifier). The grammar in the ISO C standard is <b><code>if</code></b> <b><code>(</code></b> <i>expression</i> <b><code>)</code></b> <i>statement</i> or <b><code>if</code></b> <b><code>(</code></b> <i>expression</i> <b><code>)</code></b> <i>statement</i> <b><code>else</code></b> <i>statement</i>"}], "answers": [{"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": true, "score": 5, "last_activity_date": 1493236510, "creation_date": 1493236510, "answer_id": 43643420, "question_id": 43643349, "link": "https://stackoverflow.com/questions/43643349/declare-variable-in-if-statement-ansi-c/43643420#43643420", "title": "Declare variable in if statement (ANSI C)", "body": "<p>No, you cannot do that.</p>\n\n<p>What you can do is create a block just for the <code>if</code></p>\n\n<pre><code>    {\n        int variable;\n        variable = some_function();\n        if (variable) return 1;\n    }\n    /* variable is out of scope here */\n</code></pre>\n\n<p>Note that for this simple case you can call the function as the condition of the <code>if</code> (no need for an extra variable)</p>\n\n<pre><code>if (some_function()) return 1;\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 6184711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10acb73edf513dd9652616a957407e52?s=128&d=identicon&r=PG&f=1", "display_name": "ARTAGE", "link": "https://stackoverflow.com/users/6184711/artage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5446, "favorite_count": 2, "accepted_answer_id": 43643420, "answer_count": 1, "score": 1, "last_activity_date": 1493236510, "creation_date": 1493236281, "question_id": 43643349, "link": "https://stackoverflow.com/questions/43643349/declare-variable-in-if-statement-ansi-c", "title": "Declare variable in if statement (ANSI C)", "body": "<p>Is there any way to declare variable in <strong><em>if statement</em></strong> (using <strong><em>ANSI C</em></strong> only) ?</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>if(int variable = some_function())\n{\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c", "binary-search-tree"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1493236807, "post_id": 43643287, "comment_id": 74335277, "body": "If you run your code under a debugger, it should pinpoint the code responsible for the segfault, and let you examine the data responsible for it.  Very likely the problem arises from data corruption incurred <i>previously</i>, but that will at least give you something to watch."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1493236872, "post_id": 43643287, "comment_id": 74335319, "body": "If you want us to look at it, then we generally want to see a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which in this case would include at least a sequence of insertions and deletions with which the error can be reproduced."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493239235, "post_id": 43643287, "comment_id": 74336588, "body": "Suppose only 1 node is added to a tree and then <code>DeleteNodeOfBST()</code> is called with the matching key. <code>Tree* w = t-&gt;right;</code> --&gt; <code>w</code> is <code>NULL</code> and then <code>w-&gt;parent</code> is UB."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1493238959, "post_id": 43643631, "comment_id": 74336442, "body": "A completely different code that solves the same problem does not address the OP&#39;s question about what&#39;s wrong with <i>his</i> code and how to fix it."}, {"owner": {"reputation": 151, "user_id": 5844321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9BxzT.png?s=128&g=1", "display_name": "James Balajan", "link": "https://stackoverflow.com/users/5844321/james-balajan"}, "edited": false, "score": 0, "creation_date": 1593246227, "post_id": 43643631, "comment_id": 110716585, "body": "I hate these copy pasted answers which do not address the question."}], "tags": [], "owner": {"reputation": 1, "user_id": 7910762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1760134530723d1b3a0f7d0b2c092cc?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/7910762/sam"}, "is_accepted": false, "score": -2, "last_activity_date": 1493237265, "creation_date": 1493237265, "answer_id": 43643631, "question_id": 43643287, "link": "https://stackoverflow.com/questions/43643287/delete-node-from-binary-search-tree-with-parent-pointer/43643631#43643631", "title": "Delete node from binary search tree with parent pointer", "body": "<p>Here is the source code for C Program for Insertion and Deletion in Binary Search Tree Recursive..................</p>\n\n<pre><code> /*  C Program for Insertion and Deletion in Binary Search Tree\u00a0Recursive  */\n\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nstruct node\n{\n    struct node *lchild;\n    int info;\n    struct node *rchild;\n};\n\nstruct node *insert(struct node *ptr, int ikey);\nvoid display(struct node *ptr,int level);\nstruct node *del(struct node *ptr, int dkey);\n\nint main( )\n{\n    struct node *root=NULL,*ptr;\n    int choice,k;\n    while(1)\n    {\n        printf(\"\\n\");\n        printf(\"1.Insert\\n\");\n        printf(\"2.Delete\\n\");\n        printf(\"3.Display\\n\");\n        printf(\"4.Quit\\n\");\n        printf(\"\\nEnter your choice : \");\n        scanf(\"%d\",&amp;choice);\n\n        switch(choice)\n        {\n        case 1:\n            printf(\"Enter the key to be inserted : \");\n            scanf(\"%d\",&amp;k);\n            root = insert(root, k);\n            break;\n        case 2:\n            printf(\"Enter the key to be deleted : \");\n            scanf(\"%d\",&amp;k);\n            root = del(root,k);\n            break;\n         case 3:\n             display(root,0);\n             break;\n         case 4:\n            exit(1);\n         default:\n            printf(\"\\nWrong choice\\n\");\n        }/*End of switch */\n    }/*End of while */\n\n    return 0;\n\n}/*End of main( )*/\n\nstruct node *insert(struct node *ptr, int ikey )\n{\n    if(ptr==NULL)\n    {\n        ptr = (struct node *) malloc(sizeof(struct node));\n        ptr-&gt;info = ikey;\n        ptr-&gt;lchild = NULL;\n        ptr-&gt;rchild = NULL;\n    }\n    else if(ikey &lt; ptr-&gt;info)   /*Insertion in left subtree*/\n        ptr-&gt;lchild = insert(ptr-&gt;lchild, ikey);\n    else if(ikey &gt; ptr-&gt;info)   /*Insertion in right subtree */\n        ptr-&gt;rchild = insert(ptr-&gt;rchild, ikey);\n    else\n        printf(\"\\nDuplicate key\\n\");\n    return ptr;\n}/*End of insert( )*/\n\nvoid display(struct node *ptr,int level)\n{\n    int i;\n    if(ptr == NULL )/*Base Case*/\n        return;\n    else\n    {\n        display(ptr-&gt;rchild, level+1);\n        printf(\"\\n\");\n        for (i=0; i&lt;level; i++)\n            printf(\"    \");\n        printf(\"%d\", ptr-&gt;info);\n        display(ptr-&gt;lchild, level+1);\n    }\n\n       printf(\"\\n\");\n\n}/*End of display()*/\n\n\nstruct node *del(struct node *ptr, int dkey)\n{\n    struct node *tmp, *succ;\n\n    if( ptr == NULL)\n    {\n        printf(\"dkey not found\\n\");\n        return(ptr);\n    }\n    if( dkey &lt; ptr-&gt;info )/*delete from left subtree*/\n        ptr-&gt;lchild = del(ptr-&gt;lchild, dkey);\n    else if( dkey &gt; ptr-&gt;info )/*delete from right subtree*/\n        ptr-&gt;rchild = del(ptr-&gt;rchild, dkey);\n    else\n    {\n        /*key to be deleted is found*/\n        if( ptr-&gt;lchild!=NULL  &amp;&amp;  ptr-&gt;rchild!=NULL )  /*2 children*/\n        {\n            succ=ptr-&gt;rchild;\n            while(succ-&gt;lchild)\n                succ=succ-&gt;lchild;\n            ptr-&gt;info=succ-&gt;info;\n            ptr-&gt;rchild = del(ptr-&gt;rchild, succ-&gt;info);\n        }\n        else\n        {\n            tmp = ptr;\n            if( ptr-&gt;lchild != NULL ) /*only left child*/\n                ptr = ptr-&gt;lchild;\n            else if( ptr-&gt;rchild != NULL) /*only right child*/\n                ptr = ptr-&gt;rchild;\n            else    /* no child */\n                ptr = NULL;\n            free(tmp);\n        }\n    }\n    return ptr;\n}/*End of del( )*/\n</code></pre>\n\n<p>Hope it may help you. For more details, Visit here for More Operations on Binary Search tree ---> <a href=\"http://www.codezclub.com/c-insertion-deletion-in-binary-search-tree/\" rel=\"nofollow noreferrer\">C Program for Insertion and Deletion in Binary Search Tree Recursive</a> </p>\n\n<p>and  <a href=\"http://www.codezclub.com/c-binary-tree-deletion-without-recursion/\" rel=\"nofollow noreferrer\">C Program for binary search tree deletion without recursion</a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7492345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34be6aa735030b3ab67f4082a35641d2?s=128&d=identicon&r=PG&f=1", "display_name": "corbin-coleman", "link": "https://stackoverflow.com/users/7492345/corbin-coleman"}, "is_accepted": false, "score": 1, "last_activity_date": 1493240814, "creation_date": 1493240814, "answer_id": 43644536, "question_id": 43643287, "link": "https://stackoverflow.com/questions/43643287/delete-node-from-binary-search-tree-with-parent-pointer/43644536#43644536", "title": "Delete node from binary search tree with parent pointer", "body": "<p>So, without any examples of how your code runs it's hard to say where exactly the segmentation fault is occurring when your program is running. When your program encounters a segmentation fault that means that the program is attempting to access memory that, for whatever reason, it is unable to. This generally means your pointers are trying to point at an address in memory that they shouldn't be.</p>\n\n<p>My suggestion would be to run the code step by step and see where the problem occurs. Or find a debugger that can show you the memory issues your program is having. I know that the program Valgrind exists for Ubuntu and other Linux best machines, but I'm not sure what others are available for other OSes. You can read more about Valgrind here: <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">http://valgrind.org/</a>. I use it whenever I need to check for potential memory handling issues in my programs.</p>\n\n<p>Other than that, just keep a real close eye on the space that you create using malloc, as well as where your pointers are pointing. Make sure to reconnect your tree properly when you delete the given node. Manually handling memory can be a pain, but you'll get the hang of it.</p>\n"}], "owner": {"reputation": 139, "user_id": 7394384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e99271ef0689045c53a5f246525db9e5?s=128&d=identicon&r=PG&f=1", "display_name": "Zelazny", "link": "https://stackoverflow.com/users/7394384/zelazny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1747, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493240814, "creation_date": 1493236069, "question_id": 43643287, "link": "https://stackoverflow.com/questions/43643287/delete-node-from-binary-search-tree-with-parent-pointer", "title": "Delete node from binary search tree with parent pointer", "body": "<p>I am working on an algorithm to delete a node with a given key from a binary search tree. So far, I have been able to come up with the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;time.h&gt;\n\ntypedef int ElType;\n\ntypedef struct Tree {\n    ElType key;\n    struct Tree *left;\n    struct Tree *right;\n    struct Tree *parent;\n} Tree;\n\nTree* InsertBST(Tree* t, int k)\n{\n    if (t == NULL) {\n        Tree* w = (Tree*) malloc(sizeof(Tree));\n        w-&gt;key = k;\n        w-&gt;left = NULL;\n        w-&gt;right = NULL;\n        w-&gt;parent = NULL;\n        return w;\n    }\n\n    if (k &lt;= t-&gt;key) {\n        t-&gt;left = InsertBST(t-&gt;left, k);\n        t-&gt;left-&gt;parent = t;\n    }\n    else {\n        t-&gt;right = InsertBST(t-&gt;right, k);\n        t-&gt;right-&gt;parent = t;\n    }\n\n    return t;\n}\n\nTree* DeleteMaxOfBST(Tree* t, ElType *deleted_value)\n{\n    if (t == NULL) {\n        *deleted_value = -1;\n        return NULL;\n    }\n\n    if (t-&gt;right == NULL) {\n        *deleted_value = t-&gt;key;\n        Tree* w = t-&gt;left;\n        w-&gt;parent = t-&gt;parent;\n        free(t);\n        return w;\n    }\n\n    t-&gt;right = DeleteMaxOfBST(t-&gt;right, deleted_value);\n    return t;\n}\n\nTree* DeleteNodeOfBST(Tree* t, int k)\n{\n    if (t == NULL) return NULL;\n\n    if (k &lt; t-&gt;key) {\n        t-&gt;left = DeleteNodeOfBST(t-&gt;left, k);\n        return t;\n    }\n    else if (k &gt; t-&gt;key) {\n        t-&gt;right = DeleteNodeOfBST(t-&gt;right, k);\n        return t;\n    }\n    else if (t-&gt;left == NULL) {\n        Tree* w = t-&gt;right;\n        w-&gt;parent = t-&gt;parent;\n        free(t);\n        return w;\n    }\n    else {\n        ElType max_left;\n        t-&gt;left = DeleteMaxOfBST(t-&gt;left, &amp;max_left);\n        t-&gt;key = max_left;\n        return t;\n    }\n}\n</code></pre>\n\n<p>The general idea is that I want to work with a BST with pointers to parent nodes and be able to delete a node with whichever key I specify while preserving the structure of a BST.</p>\n\n<p>My code works for some keys in some trees but crashes for other keys without any apparent pattern. I then get the following error:</p>\n\n<pre><code>Segmentation fault (core dumped)\n</code></pre>\n\n<p>I am inclined to think I have messed up the pointers to the parent nodes but cannot quite pinpoint where the fault is. I am relatively new to C, so I would appreciate any comments whether pointers are in fact the problem here and how to possibly fix this.</p>\n"}, {"tags": ["c", "list", "memory", "memory-address"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1493235449, "post_id": 43643079, "comment_id": 74334502, "body": "It&#39;s <code>16</code> bytes."}, {"owner": {"reputation": 3, "user_id": 7927094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dbec26529617361ce0bfb79d8c843ab?s=128&d=identicon&r=PG&f=1", "display_name": "Calin", "link": "https://stackoverflow.com/users/7927094/calin"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493235604, "post_id": 43643079, "comment_id": 74334595, "body": "That clears it. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 231, "user_id": 4946427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ab8bebe7076c9f2a634d55da49c010?s=128&d=identicon&r=PG&f=1", "display_name": "Sascha", "link": "https://stackoverflow.com/users/4946427/sascha"}, "is_accepted": true, "score": 1, "last_activity_date": 1493244086, "creation_date": 1493244086, "answer_id": 43645257, "question_id": 43643079, "link": "https://stackoverflow.com/questions/43643079/linked-list-basic-memoryin-c/43645257#43645257", "title": "Linked list basic memory(in C)", "body": "<p>You are ignoring the last digit, the difference is 16 bytes. The 16 bytes are most likely a result of 8 byte alignment of your system.</p>\n"}], "owner": {"reputation": 3, "user_id": 7927094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dbec26529617361ce0bfb79d8c843ab?s=128&d=identicon&r=PG&f=1", "display_name": "Calin", "link": "https://stackoverflow.com/users/7927094/calin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 43645257, "answer_count": 1, "score": 0, "last_activity_date": 1493321455, "creation_date": 1493235361, "last_edit_date": 1493321455, "question_id": 43643079, "link": "https://stackoverflow.com/questions/43643079/linked-list-basic-memoryin-c", "title": "Linked list basic memory(in C)", "body": "<p>I was trying to understand better how the memory in the linked list is allocated so I made a simple program in order to see where the addresses are stored.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct node {\n    int data;\n    struct node* next;\n};\n\nint main()\n{\n\n    struct node first;\n    struct node second;\n    struct node third;\n    struct node *aux; //pointer to go through list\n\n    first.data = 1;\n    second.data = 2;\n    third.data = 3;\n\n    first.next = &amp;second;\n    second.next = &amp;third;\n    third.next = NULL;\n    aux = &amp;first;\n\n    while (aux) \n    {\n        printf(\"%p\\n\", aux); //printing each address \n        aux = aux-&gt;next;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>And we get the output:</p>\n\n<pre><code>0x7fff14fabac0\n0x7fff14fabad0\n0x7fff14fabae0\n</code></pre>\n\n<p>So there is 1 byte difference between nodes. </p>\n\n<p>So basically first = second - 1. How come there are spaces in memory left for integers since sizeof(int) equals 4 bytes, and we advance only by 1 byte?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1493235310, "post_id": 43643041, "comment_id": 74334422, "body": "Your second example is an assignment, not an initialization."}, {"owner": {"reputation": 91, "user_id": 7371948, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Uqh6Nmqj53Y/AAAAAAAAAAI/AAAAAAAAAA4/L-UAO2KY4FA/photo.jpg?sz=128", "display_name": "JiangIsAtWar", "link": "https://stackoverflow.com/users/7371948/jiangisatwar"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1493235391, "post_id": 43643041, "comment_id": 74334464, "body": "This kind of assignment is not allowed?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1493235503, "post_id": 43643041, "comment_id": 74334534, "body": "Is this C or C++? Don&#39;t use both tags."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1493235617, "post_id": 43643041, "comment_id": 74334602, "body": "That kind of assignment is allowed in C++, but not C."}, {"owner": {"reputation": 91, "user_id": 7371948, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Uqh6Nmqj53Y/AAAAAAAAAAI/AAAAAAAAAA4/L-UAO2KY4FA/photo.jpg?sz=128", "display_name": "JiangIsAtWar", "link": "https://stackoverflow.com/users/7371948/jiangisatwar"}, "edited": false, "score": 0, "creation_date": 1493235760, "post_id": 43643041, "comment_id": 74334690, "body": "Thanks. Do you guys know what &quot;expected expression&quot; mean here?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1493235807, "post_id": 43643041, "comment_id": 74334721, "body": "It means that the compiler expects the right side of an assignment to be an expression. <code>{3, &quot;three&quot;}</code> is not an expression."}], "answers": [{"comments": [{"owner": {"reputation": 231, "user_id": 4946427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ab8bebe7076c9f2a634d55da49c010?s=128&d=identicon&r=PG&f=1", "display_name": "Sascha", "link": "https://stackoverflow.com/users/4946427/sascha"}, "edited": false, "score": 2, "creation_date": 1515702478, "post_id": 43643823, "comment_id": 83412445, "body": "Actually, C supports assignments for structs. There is no problem with <code>struct foobar three = {3, &quot;a&quot;}; struct foobar b; b = three;</code>."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 9, "last_activity_date": 1493238067, "creation_date": 1493238067, "answer_id": 43643823, "question_id": 43643041, "link": "https://stackoverflow.com/questions/43643041/struct-initialization-in-c-with-error-expected-expression/43643823#43643823", "title": "Struct initialization in C with error: expected expression", "body": "<p>\"initialization\" and \"assignment\", though having quite similar syntax, are two different things with different restrictions.</p>\n\n<p>\"Initialization\" means to define the initial value of a variable right in the course of variable definition. Assignment, in contrast, assigns a value to a variable defined elsewhere in the program.</p>\n\n<p>C does not support <em>assignment</em> of values to variables of type <code>struct</code> or <code>array</code>, but it supports <em>initialization</em> of variables of these types:</p>\n\n<p><code>struct foobar three = {3, \"three\"}</code> is an initialization, since the value is defined together with the variable definition. This is supported in C and in C++.</p>\n\n<p><code>struct foobar three; three = {3, \"three\"}</code> in contrast, is an assignment, because the variable is first declared, but the value is assigned in a separate statement. This is not supported in C, but would be supported in C++.</p>\n"}, {"comments": [{"owner": {"reputation": 42, "user_id": 7487627, "user_type": "registered", "profile_image": "https://graph.facebook.com/1356210711102273/picture?type=large", "display_name": "Walton Lee", "link": "https://stackoverflow.com/users/7487627/walton-lee"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493240834, "post_id": 43644400, "comment_id": 74337453, "body": "Have you tried compiling it and using printf x.i? <code>#include &lt;stdio.h&gt; int main (void) {   typedef struct foobar {       int i;       char *word;   }three;      three x = {3, &quot;three&quot;};   printf(&quot;%s\\n&quot;, x.word);   return (0); } </code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493241845, "post_id": 43644400, "comment_id": 74337931, "body": "Have you tried compiling OP&#39;s second code snippet? It works just fine without typedef. The question is about why it doesn&#39;t work to separate the assignment from the initialization. You would see the same error if you change your last line to <code>three x; x = {3, &quot;three&quot;};</code>."}], "tags": [], "owner": {"reputation": 42, "user_id": 7487627, "user_type": "registered", "profile_image": "https://graph.facebook.com/1356210711102273/picture?type=large", "display_name": "Walton Lee", "link": "https://stackoverflow.com/users/7487627/walton-lee"}, "is_accepted": false, "score": -2, "last_activity_date": 1493240638, "last_edit_date": 1493240638, "creation_date": 1493240337, "answer_id": 43644400, "question_id": 43643041, "link": "https://stackoverflow.com/questions/43643041/struct-initialization-in-c-with-error-expected-expression/43644400#43644400", "title": "Struct initialization in C with error: expected expression", "body": "<p>The reason why this:</p>\n\n<pre><code>struct foobar {\n    int i;\n    char *word;\n} three;\nthree = {3, \"three\"};\n</code></pre>\n\n<p>doesn't work is because you did not typedef the struct.</p>\n\n<p>You want to do:</p>\n\n<pre><code>typedef struct foobar {\n      int i;\n      char *word;\n} three;\n</code></pre>\n\n<p>Once you typedef, three now becomes your new datatype like int or char. If you want to work with three you want to do this:</p>\n\n<pre><code>three x = {3, \"three\"};\n</code></pre>\n\n<p>You initialize a variable, such as x, and assign it {3, \"three\"}</p>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 7371948, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Uqh6Nmqj53Y/AAAAAAAAAAI/AAAAAAAAAA4/L-UAO2KY4FA/photo.jpg?sz=128", "display_name": "JiangIsAtWar", "link": "https://stackoverflow.com/users/7371948/jiangisatwar"}, "edited": false, "score": 0, "creation_date": 1493308508, "post_id": 43645413, "comment_id": 74372030, "body": "This really works. So basically, you are doing an assignment and this assignment looks like an initialization. Am I right about this?"}, {"owner": {"reputation": 231, "user_id": 4946427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ab8bebe7076c9f2a634d55da49c010?s=128&d=identicon&r=PG&f=1", "display_name": "Sascha", "link": "https://stackoverflow.com/users/4946427/sascha"}, "reply_to_user": {"reputation": 91, "user_id": 7371948, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Uqh6Nmqj53Y/AAAAAAAAAAI/AAAAAAAAAA4/L-UAO2KY4FA/photo.jpg?sz=128", "display_name": "JiangIsAtWar", "link": "https://stackoverflow.com/users/7371948/jiangisatwar"}, "edited": false, "score": 1, "creation_date": 1493453153, "post_id": 43645413, "comment_id": 74432264, "body": "@JianglsAtWar: You can basically think of the compound literal to be an anonymous object with automatic storage class (i.e. valid for the current block). First you initialize this anonymous object, next it will be copied to &quot;three&quot;. Likely you can trust your compiler to silently optimize away the overhead of creating the anonymous object."}, {"owner": {"reputation": 367, "user_id": 589493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69cb7b92fb370da2a6da64315410276e?s=128&d=identicon&r=PG", "display_name": "Tchakabam", "link": "https://stackoverflow.com/users/589493/tchakabam"}, "edited": false, "score": 0, "creation_date": 1595773083, "post_id": 43645413, "comment_id": 111583896, "body": "i have a case where casting the type with the <code>struct</code> keyword works, and another where it doesn&#39;t (&quot;a compount littereal of type Foo is not allowed&quot; - static checker, or also &quot;variable has incomplete type &#39;struct MQTTClient_createOptions&#39; - clang error). can you explain why? Is it because the type contains an array? It seems just dropping struct works anyway (at least with Clang here in my env)."}, {"owner": {"reputation": 231, "user_id": 4946427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ab8bebe7076c9f2a634d55da49c010?s=128&d=identicon&r=PG&f=1", "display_name": "Sascha", "link": "https://stackoverflow.com/users/4946427/sascha"}, "reply_to_user": {"reputation": 367, "user_id": 589493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69cb7b92fb370da2a6da64315410276e?s=128&d=identicon&r=PG", "display_name": "Tchakabam", "link": "https://stackoverflow.com/users/589493/tchakabam"}, "edited": false, "score": 0, "creation_date": 1595869331, "post_id": 43645413, "comment_id": 111617512, "body": "@Tchakabam: Without seeing the code, I think the clang message telling you the reason. In the scope you are trying to initialize your struct, the struct is just declared, but not defined. I.e. you have something like &quot;struct MQTTClient_createOptions;&quot; somewhere in your included headers, but the complete struct definition with all its members is not visible. Therefore the struct has an incomplete type. You will be able to get an pointer to this type, but can&#39;t instantiate a variable of this struct."}], "tags": [], "owner": {"reputation": 231, "user_id": 4946427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ab8bebe7076c9f2a634d55da49c010?s=128&d=identicon&r=PG&f=1", "display_name": "Sascha", "link": "https://stackoverflow.com/users/4946427/sascha"}, "is_accepted": false, "score": 11, "last_activity_date": 1493244923, "creation_date": 1493244923, "answer_id": 43645413, "question_id": 43643041, "link": "https://stackoverflow.com/questions/43643041/struct-initialization-in-c-with-error-expected-expression/43645413#43645413", "title": "Struct initialization in C with error: expected expression", "body": "<p>It doesn't work, because C doesn't know what type {3, \"three\"} should be of; C doesn't look at the left side of the \"=\" operator to guess your type, so you don't have any type information there. With C99 you can use a compound literal for this:</p>\n\n<pre><code>three = (struct foobar) { 3, \"three\" };\n</code></pre>\n\n<p>The cast gives the type, the values in the curly brackets the initiallizer. The result is than assigned to your variable three.</p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 12121416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb087ffc0aeb9f662649a828c756b20a?s=128&d=identicon&r=PG&f=1", "display_name": "Rautermann", "link": "https://stackoverflow.com/users/12121416/rautermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1583180831, "last_edit_date": 1583180831, "creation_date": 1583180383, "answer_id": 60496050, "question_id": 43643041, "link": "https://stackoverflow.com/questions/43643041/struct-initialization-in-c-with-error-expected-expression/60496050#60496050", "title": "Struct initialization in C with error: expected expression", "body": "<p>It looks like you are trying to use the so-called \"instantiation syntax\" here. Unfortunately, this only works at the very moment you declare the variable! </p>\n\n<p>If you do it after declaration (like in your example), you have to use one of the more cumbersome ways.</p>\n\n<p>To clarify, this is how it would work:</p>\n\n<pre><code>struct foobar {\n    int i;\n    char *word;\n    } three = {3, \"three\"};\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 7371948, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Uqh6Nmqj53Y/AAAAAAAAAAI/AAAAAAAAAA4/L-UAO2KY4FA/photo.jpg?sz=128", "display_name": "JiangIsAtWar", "link": "https://stackoverflow.com/users/7371948/jiangisatwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9888, "favorite_count": 4, "accepted_answer_id": 43643823, "answer_count": 4, "score": 8, "last_activity_date": 1583180831, "creation_date": 1493235259, "last_edit_date": 1493235533, "question_id": 43643041, "link": "https://stackoverflow.com/questions/43643041/struct-initialization-in-c-with-error-expected-expression", "title": "Struct initialization in C with error: expected expression", "body": "<p>I have a struct like this:</p>\n\n<pre><code>struct foobar {\n    int i;\n    char *word;\n};\n</code></pre>\n\n<p>I know this will work:</p>\n\n<pre><code>struct foobar {\n    int i;\n    char *word;\n};\nstruct foobar three = {3, \"three\"};\n</code></pre>\n\n<p>Why this doesn't work:</p>\n\n<pre><code>struct foobar {\n    int i;\n    char *word;\n} three;\nthree = {3, \"three\"};\n</code></pre>\n\n<p>It will give an error: expected expression<br>\nThanks!</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493245460, "post_id": 43642980, "comment_id": 74339436, "body": "Don&#39;t use <code>&lt;malloc.h&gt;</code>; use <code>&lt;stdlib.h&gt;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 287, "user_id": 4590796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oWzHG.png?s=128&g=1", "display_name": "Muhammad Ahsan", "link": "https://stackoverflow.com/users/4590796/muhammad-ahsan"}, "is_accepted": false, "score": 0, "last_activity_date": 1493243717, "last_edit_date": 1493243717, "creation_date": 1493235079, "answer_id": 43642995, "question_id": 43642980, "link": "https://stackoverflow.com/questions/43642980/use-printf-and-scanf-on-char/43642995#43642995", "title": "use printf and scanf on char *", "body": "<p>Use <code>getchar()</code> instead of <code>scanf()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 2, "last_activity_date": 1493235483, "creation_date": 1493235483, "answer_id": 43643124, "question_id": 43642980, "link": "https://stackoverflow.com/questions/43642980/use-printf-and-scanf-on-char/43643124#43643124", "title": "use printf and scanf on char *", "body": "<p>you're allocating the structures all right but you're forgetting to allocate memory for <code>char *</code> members: you're writing into uninitialized memory when doing <code>scanf</code> (not to mention that you're passing the address of the pointer, not the pointer itself: don't use <code>&amp;</code> when scanning strings).</p>\n\n<p>For simplicity's sake, you could just put fixed buffer lengths in your structures:</p>\n\n<pre><code>struct Date\n{\n  int day;\n char month[20];\n  int year;\n}date;\nstruct sports_team\n{\n     char name[100];\n    char city[100];\n int no_of_players;\nstruct Date creation_date;\n};\n</code></pre>\n\n<p>and limit size when scanning (don't use <code>&amp;</code> when scanning strings BTW)</p>\n\n<pre><code>scanf(\"%99s\",my_team[i].name);\nscanf(\"%99s\",my_team[i].city);\nscanf(\"%19s\",my_team[i].creation_date.month);\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 6536968, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-ftXVaiTqD0A/AAAAAAAAAAI/AAAAAAAAAK4/_mYfPjf4IDY/photo.jpg?sz=128", "display_name": "Mayank Bhardwaj", "link": "https://stackoverflow.com/users/6536968/mayank-bhardwaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 43643124, "answer_count": 2, "score": 0, "last_activity_date": 1493243717, "creation_date": 1493235029, "question_id": 43642980, "link": "https://stackoverflow.com/questions/43642980/use-printf-and-scanf-on-char", "title": "use printf and scanf on char *", "body": "<p>I'm having problems inputting values into this structure template, please help.\nI've got to use char* for those attributes. so it doesn't give an error while inputting data but crashes when its time to display.</p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n#include&lt;malloc.h&gt;\n#include&lt;conio.h&gt;\nstruct Date\n{\n  int day;\n char *month;\n  int year;\n}date;\nstruct sports_team\n{\n     char *name;\n    char *city;\n int no_of_players;\nstruct Date creation_date;\n};\nvoid main()\n{\n     struct sports_team *my_team;\n     my_team = (struct sports_team*)malloc(sizeof(struct sports_team)*2);\n\nprintf(\"fill information for teams:\\n\");\n\n\nfor(int i=0;i&lt;2;i++)\n{\n    printf(\"\\nenter team name:\");\n    scanf(\"%s\",&amp;my_team[i].name);\n    printf(\"\\nenter team city:\");\n    scanf(\"%s\",&amp;my_team[i].city);\n    printf(\"\\nenter no. of players:\");\n    scanf(\"%d\",&amp;my_team[i].no_of_players);\n    printf(\"\\nenter creation day:\");\n    scanf(\"%d\",&amp;(my_team[i].creation_date.day));\n    printf(\"\\nenter creation month:\");\n    scanf(\"%s\",&amp;(my_team[i].creation_date.month));\n    printf(\"\\nenter creation year:\");\n    scanf(\"%d\",&amp;(my_team[i].creation_date.year));\n    printf(\"\\n\\n\");\n}\n\n printf(\"\\n information for teams:\\n\");\nfor(int i=0;i&lt;2;i++)\n{\n\n    printf(\"%s \",my_team[i].name);\n\n    printf(\"%s \",my_team[i].city);\n\n    printf(\"%d \",my_team[i].no_of_players);\n\n    printf(\"%d \",my_team[i].creation_date.day);\n\n    printf(\"%s \",my_team[i].creation_date.month);\n\n    printf(\"%d \",my_team[i].creation_date.year);\n    printf(\"\\n\\n\");\n}\nfree(my_team);\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "pragma"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493235159, "post_id": 43642928, "comment_id": 74334326, "body": "just tested with gcc 6.2.1 and I get no warnings, even when using <code>-Wall</code>. If I remove the ununsed function pragma, I get the warning... BTW you could <a href=\"https://stackoverflow.com/posts/43642928/edit\">edit</a> your post to only include base types &amp; values so it would really be a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which isn&#39;t right now."}, {"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493235375, "post_id": 43642928, "comment_id": 74334451, "body": "I am using GCC 4.8.5 and upgrading is not an option. If this is a &quot;bug&quot; with how GCC 4.8.5 handles pragmas, that&#39;s fine, if I can get some confirmation of this behavior. I do not get these warnings with Apple&#39;s current build of Clang, either (8.1.0), so I recognize this may be a GCC-specific issue and have tagged the question so."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1493235849, "post_id": 43642928, "comment_id": 74334744, "body": "This is a known bug.  See the linked dup."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493236058, "post_id": 43642928, "comment_id": 74334866, "body": "@AlexReynolds if you cannot upgrade, you can always silence the unused parameter warnings using <code>(void)parameter</code> or attr ununused: <a href=\"http://stackoverflow.com/questions/3599160/unused-parameter-warnings-in-c-code\" title=\"unused parameter warnings in c code\">stackoverflow.com/questions/3599160/&hellip;</a> so in your case, you only have 1 pragma warning to use."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493236664, "post_id": 43642928, "comment_id": 74335185, "body": "also note that <code>-Wunused-parameter</code> isn&#39;t included in <code>-Wall</code> option in 6.2"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493243002, "post_id": 43642928, "comment_id": 74338458, "body": "See if the answer to the supposed duplicate actually answers your question"}], "owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "closed_date": 1493235831, "answer_count": 0, "score": 1, "last_activity_date": 1493237775, "creation_date": 1493234802, "last_edit_date": 1493237775, "question_id": 43642928, "link": "https://stackoverflow.com/questions/43642928/how-to-disable-multiple-gcc-compilation-warnings", "closed_reason": "Duplicate", "title": "How to disable multiple GCC compilation warnings?", "body": "<p>I have a chunk of code that I can disable compilation warnings for via pragmas, like the following example that disables a defined-but-not-used compilation warning:</p>\n\n<pre><code>#pragma GCC diagnostic push\n#pragma GCC diagnostic ignored \"-Wunused-function\"\nstatic int\nbs_qd_debug_kv(void* cls, enum MHD_ValueKind kind, const char* key, const char* value)\n{\n    fprintf(stderr, \"key [%s] -&gt; value [%s]\\n\", key, value);\n    return MHD_YES;\n}\n#pragma GCC diagnostic pop\n</code></pre>\n\n<p>This works fine, but how can I disable multiple warnings? </p>\n\n<p>For instance, I get a defined-but-not-used compilation warning with the following two pragmas:</p>\n\n<pre><code>#pragma GCC diagnostic push\n#pragma GCC diagnostic ignored \"-Wunused-parameter\"\n#pragma GCC diagnostic push\n#pragma GCC diagnostic ignored \"-Wunused-function\"\nstatic int\nbs_qd_debug_kv(void* cls, enum MHD_ValueKind kind, const char* key, const char* value)\n{\n    fprintf(stderr, \"key [%s] -&gt; value [%s]\\n\", key, value);\n    return MHD_YES;\n}\n#pragma GCC diagnostic pop\n#pragma GCC diagnostic pop\n</code></pre>\n\n<p>Is there a different arrangement of <code>#pragma</code> directives, which allows specification of multiple pragmas on the enclosed code?</p>\n\n<p><strong>EDIT</strong> </p>\n\n<p>Upon reading the linked question, it seems that question is almost entirely different from this one. This question asks about the use of multiple GCC-specific pragmas. The linked question asks about a compiler response to pragmas from OpenMP. I'm not sure that the two questions are identical, even though they both tangentially touch on the use of pragmas with GCC.</p>\n"}, {"tags": ["c", "arrays", "memory"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1493234899, "post_id": 43642916, "comment_id": 74334186, "body": "<code>unsigned long int v[UPPER_LIMIT];</code> is probably too big. Try creating with <code>malloc</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493249206, "post_id": 43642916, "comment_id": 74340680, "body": "Since when was 5 not a prime number between 1 and 10?"}], "answers": [{"tags": [], "owner": {"reputation": 718, "user_id": 3111913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/88694ab4799ab1a0c1b1baf7856b81c4?s=128&d=identicon&r=PG", "display_name": "unreleased", "link": "https://stackoverflow.com/users/3111913/unreleased"}, "is_accepted": false, "score": 0, "last_activity_date": 1493237247, "last_edit_date": 1493237247, "creation_date": 1493235380, "answer_id": 43643094, "question_id": 43642916, "link": "https://stackoverflow.com/questions/43642916/c-getting-prime-numbers-from-particular-big-range/43643094#43643094", "title": "C - getting prime numbers from particular BIG RANGE", "body": "<p>Globally declare the primes array with max size.<br>\nYou can use vector to store primes (c++ container).<br>\nAnd array size can be 10^7 to 10^8 at best,\nyou can not declare <code>unsigned long int v[2147483647];</code> this big array\nAlso you can't solve the problem through this approach :) .</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1493236561, "creation_date": 1493236561, "answer_id": 43643435, "question_id": 43642916, "link": "https://stackoverflow.com/questions/43642916/c-getting-prime-numbers-from-particular-big-range/43643435#43643435", "title": "C - getting prime numbers from particular BIG RANGE", "body": "<p>You're attempting to create a local variable, which in most implementations lives on the stack, of a very large size.  With 2G elements of type <code>unsigned long</code>, you're most likely looking at either 8 GB or 16 GB.  That's way too large for the stack.</p>\n\n<p>Create this variable as a global instead.  That way it will not live on the stack but in (depending on the implementation) the data section.</p>\n\n<p>Also, since this array is only being assigned the values 0 and 1, change the type of the array to <code>char</code> so each element only uses 1 byte.  That will save you a lot of memory.</p>\n"}, {"comments": [{"owner": {"reputation": 923, "user_id": 6232717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a71e841a05cc4408b404170fc4b50e4?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey Cash", "link": "https://stackoverflow.com/users/6232717/jeffrey-cash"}, "edited": false, "score": 1, "creation_date": 1493238755, "post_id": 43643451, "comment_id": 74336327, "body": "If you&#39;re using C++, you can use the specialized <code>std::vector&lt;bool&gt;</code> for an easy to use implementation where each index is stored as an individual bit."}], "tags": [], "owner": {"reputation": 2157, "user_id": 406310, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c215d21410f50000b50ef0ea545a8b00?s=128&d=identicon&r=PG", "display_name": "Vin&#237;cius Gobbo A. de Oliveira", "link": "https://stackoverflow.com/users/406310/vin%c3%adcius-gobbo-a-de-oliveira"}, "is_accepted": false, "score": 1, "last_activity_date": 1493236619, "creation_date": 1493236619, "answer_id": 43643451, "question_id": 43642916, "link": "https://stackoverflow.com/questions/43642916/c-getting-prime-numbers-from-particular-big-range/43643451#43643451", "title": "C - getting prime numbers from particular BIG RANGE", "body": "<p>There is no point in using an <code>unsigned long</code> array to store only <code>0</code> or <code>1</code>.</p>\n\n<p>You only need <code>2147483647 / 8</code> bits to store all the information you need, so you should declare an array of at most <code>2147483647 / 8 + 1</code> bytes:</p>\n\n<pre><code>const unsigned int SIZE = 1 + (2147483647 / 8);\nunsigned char primes[SIZE];\n</code></pre>\n\n<p>Or even better, through heap allocation:</p>\n\n<pre><code>const unsigned int SIZE = 1 + (2147483647 / 8);\nunsigned char *primes = (unsigned char*)malloc(SIZE);\n</code></pre>\n\n<p>The array initialization becomes:</p>\n\n<pre><code>for (unsigned i = 0; i &lt; SIZE ; i++ ){  \n    primes[i] = 1;\n}\n</code></pre>\n\n<p>The access to individual bits of the array can be done with the bitwise operators <code>&gt;&gt;</code>, <code>&lt;&lt;</code>, and <code>&amp;</code>. Implementing this is left as an exercise, since this looks like an university exercise.</p>\n"}], "owner": {"reputation": 11, "user_id": 7927508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b75c168c6091bff70c9857ea633cd25?s=128&d=identicon&r=PG&f=1", "display_name": "deadal", "link": "https://stackoverflow.com/users/7927508/deadal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1493249189, "creation_date": 1493234761, "last_edit_date": 1493249189, "question_id": 43642916, "link": "https://stackoverflow.com/questions/43642916/c-getting-prime-numbers-from-particular-big-range", "title": "C - getting prime numbers from particular BIG RANGE", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#define UPPER_LIMIT 2147483647\nvoid sieve(unsigned long int n, unsigned long int primes[]);  \nmain()  \n{  \n    unsigned long int low, up, steps;  \n    unsigned long int v[UPPER_LIMIT];  \n    sieve(UPPER_LIMIT, v);  \n    scanf(\"%ld\\n\",&amp;steps);  \n    for (unsigned long int i=0;i&lt;steps;i++){  \n        scanf(\"%ld %ld\\n\",&amp;low,&amp;up);  \n        for(unsigned long int j=low; j&lt;up; j++){  \n            if (v[j] == 1){  \n                printf(\"%ld\\n\",j);  \n            }  \n        }   \n    }  \n}  \nvoid sieve(unsigned long int n, unsigned long int primes[])  \n{  \n    for (unsigned long int i=0;i&lt;n;i++){  \n        primes[i]=1;  \n    }  \n    primes[0]=0,primes[1]=0;   \n\n    for (unsigned long int i=2;i&lt;sqrt(n);i++) {  \n        for (unsigned long int j=i*i;j&lt;n;j+=i){  \n            primes[j] = 0;  \n        }  \n    }  \n}  \n</code></pre>\n\n<p>I'm trying to solve the problem of printing prime numbers from a particular range. \nAt first <code>scanf</code> we get number of cases to be reviewed. The range is given by next lines of stdin e.g (1 10) upper value can be at max 2147483647. I'm using Sieve of Erastostenes to find prime numbers. After that I would like to <code>printf</code> prime numbers in ascending order. Unfortunately I'm getting a Runtime Error, and I assume that is because of the very big array I'm trying to create. I need advice on the possible solution of the problem.</p>\n\n<p>Example of stdin:  </p>\n\n<pre><code>1  \n1 10\n</code></pre>\n\n<p>Example of stdout:  </p>\n\n<pre><code>2  \n3  \n7  \n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1493240771, "post_id": 43642853, "comment_id": 74337417, "body": "<code>while(!feof(pf)){          fread(&amp;alu,sizeof(student),1,pf);</code> --&gt; <code>while(fread(&amp;alu,sizeof(student),1,pf) == 1);</code>  Who or what text suggested using <code>feof()</code>?"}, {"owner": {"reputation": 115, "user_id": 7869325, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/cd4025b33d5de8046f5f5b2e14d4ea46?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Olivadese", "link": "https://stackoverflow.com/users/7869325/juan-olivadese"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493241086, "post_id": 43642853, "comment_id": 74337579, "body": "Why i can not use feof() ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493241140, "post_id": 43642853, "comment_id": 74337600, "body": "Be fair, first, Who or what text suggested using <code>feof()</code>?"}, {"owner": {"reputation": 115, "user_id": 7869325, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/cd4025b33d5de8046f5f5b2e14d4ea46?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Olivadese", "link": "https://stackoverflow.com/users/7869325/juan-olivadese"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493241340, "post_id": 43642853, "comment_id": 74337684, "body": "I saw the code from a classmate, and i thought that it would work....."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493241554, "post_id": 43642853, "comment_id": 74337791, "body": "Try testing the return value of <code>fread()</code> <a href=\"http://stackoverflow.com/questions/43642853/load-an-array-of-structs-and-then-load-it-on-an-archive?noredirect=1#comment74337417_43642853\">like this</a> instead and see if that solves <a href=\"http://stackoverflow.com/questions/43642853/load-an-array-of-structs-and-then-load-it-on-an-archive?noredirect=1#comment74334448_43642975\">this problem</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493241685, "post_id": 43642853, "comment_id": 74337848, "body": "Code can use <code>feof()</code>, and code can use <code>sqrt()</code>, but neither tells code if the next <code>fread()</code> will work.  Important to test the function return value of all input functions - saves debugging time."}, {"owner": {"reputation": 115, "user_id": 7869325, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/cd4025b33d5de8046f5f5b2e14d4ea46?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Olivadese", "link": "https://stackoverflow.com/users/7869325/juan-olivadese"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493243036, "post_id": 43642853, "comment_id": 74338476, "body": "So... what is the use of feof?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1493243650, "post_id": 43642853, "comment_id": 74338718, "body": "When a function like <code>fread()</code>, <code>fgetc()</code>, <code>fscanf()</code> indicate via its return value that  no data was read, code can use <code>feof()&#47;ferror()</code> to determine why: end-of-file occurred or input error.  The point being <code>feof()</code> is true when input was attempted and there was no more - it reflects the past, not the future.  Did <code>fread()==1</code> solve <a href=\"http://stackoverflow.com/questions/43642853/load-an-array-of-structs-and-then-load-it-on-an-archive?noredirect=1#comment74334448_43642975\">this</a>?"}, {"owner": {"reputation": 115, "user_id": 7869325, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/cd4025b33d5de8046f5f5b2e14d4ea46?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Olivadese", "link": "https://stackoverflow.com/users/7869325/juan-olivadese"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1493243875, "post_id": 43642853, "comment_id": 74338811, "body": "yes! That resolved the problem."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493329505, "post_id": 43642853, "comment_id": 74383696, "body": "this line: <code>fwrite(al,sizeof(student)*3,3,pf);</code> has a problem that it is trying to write nine(9) instances of <code>student</code> to the file.  the line should be: `if( 1 != fwrite( al, sizeof(student)*3, 1, pf ) ) { perror( &quot;fwrite failed&quot; );  exit( EXIT_FAILURE ); }"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493329569, "post_id": 43642853, "comment_id": 74383735, "body": "when calling <code>fopen()</code>, always check (!=NULL) the returned value to assure the operation was successful,"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493329636, "post_id": 43642853, "comment_id": 74383756, "body": "NEVER use <code>while( !feof( .. ) )</code>  because it does not do what you are expecting.   Suggest: <code>while( 1 == fread(&amp;alu,sizeof(student),1,pf) )</code>"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 7869325, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/cd4025b33d5de8046f5f5b2e14d4ea46?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Olivadese", "link": "https://stackoverflow.com/users/7869325/juan-olivadese"}, "edited": false, "score": 0, "creation_date": 1493235369, "post_id": 43642975, "comment_id": 74334448, "body": "It worked! but the lecture is repeating the las element :("}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1493235016, "creation_date": 1493235016, "answer_id": 43642975, "question_id": 43642853, "link": "https://stackoverflow.com/questions/43642853/load-an-array-of-structs-and-then-load-it-on-an-archive/43642975#43642975", "title": "Load an array of structs and then load it on an archive", "body": "<p>You're writing too much data:</p>\n\n<pre><code>fwrite(al,sizeof(student)*3,3,pf);\n</code></pre>\n\n<p>The second argument to <code>fwrite</code> specifies the size of <em>each</em> element, and the third specifies the number of elements.  You're doing double work by multiplying the size by 3 and giving a count of 3.  Do this instead:</p>\n\n<pre><code>fwrite(al,sizeof(student),3,pf);\n</code></pre>\n\n<p>Also, you could check the return value of <code>fopen</code>, <code>fwrite</code>, and <code>fread</code> to ensure they were successful.</p>\n"}], "owner": {"reputation": 115, "user_id": 7869325, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/cd4025b33d5de8046f5f5b2e14d4ea46?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Olivadese", "link": "https://stackoverflow.com/users/7869325/juan-olivadese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 43642975, "answer_count": 1, "score": 2, "last_activity_date": 1493235016, "creation_date": 1493234580, "question_id": 43642853, "link": "https://stackoverflow.com/questions/43642853/load-an-array-of-structs-and-then-load-it-on-an-archive", "title": "Load an array of structs and then load it on an archive", "body": "<p>I have two programs, one to load the array of structs in archive.txt , and another to read archive.txt . The problem is that when i read the archive, a lot of symmbols appear at the end of the file.</p>\n\n<p>The structs:</p>\n\n<pre><code>typedef struct{\n\n    int dd;\n    int mm;\n    int aa;\n\n} date;\n\n\ntypedef struct{\n\n    char nya[30];\n    char dni[9];\n    date dat;\n\n} student;\n</code></pre>\n\n<p>This is the program to load an array of structs to archive.txt</p>\n\n<pre><code>int main()\n{\n\n    student al[3]={{\"Pedro\",\"34434343\",{11,11,2011}},{\"Jose\",\"23233233\",{11,12,2003}},{\"Ramon\",\"23434334\",{11,2,1002}}};\n\n    FILE * pf = fopen(\"C:\\\\Users\\\\usuario\\\\Desktop\\\\archive.txt\",\"w\");\n\n    fwrite(al,sizeof(student)*3,3,pf);\n\n    fclose(pf);\n\n    return 0;\n}\n</code></pre>\n\n<p>and here is the program to read the archive.txt:</p>\n\n<pre><code>int main(){\n    student alu;\n\n    FILE * pf = fopen(\"C:\\\\Users\\\\usuario\\\\Desktop\\\\archive.txt\",\"r\");\n\n    while(!feof(pf)){\n\n        fread(&amp;alu,sizeof(student),1,pf);\n        printf(\"%s\\n\",alu.nya);\n        printf(\"%s\\n\",alu.dni);\n        printf(\"%d %d %d\\n\",alu.dat.dd,alu.dat.mm,alu.dat.aa);\n    }\n\n    fclose(pf);\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/yYMDU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yYMDU.png\" alt=\"This is the result of the program.\"></a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 0, "creation_date": 1493238613, "post_id": 43642746, "comment_id": 74336257, "body": "debug help: try modifying <code>aprnt</code> to show the true value in the cell no matter what."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493264345, "post_id": 43642746, "comment_id": 74344476, "body": "Welcome to Stack Overflow. Please note that the preferred way of saying &#39;thanks&#39; around here is by up-voting good questions and helpful answers (once you have enough reputation to do so), and by accepting the most helpful answer to any question you ask (which also gives you a small boost to your reputation). Please see the <a href=\"https://stackoverflow.com/tour\">About</a> page and also <a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask questions here?</a> and <a href=\"http://stackoverflow.com/help/someone-answers\">What do I do when someone answers my question?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "is_accepted": true, "score": 1, "last_activity_date": 1493239088, "last_edit_date": 1493239088, "creation_date": 1493238539, "answer_id": 43643957, "question_id": 43642746, "link": "https://stackoverflow.com/questions/43642746/cellular-automata-in-c/43643957#43643957", "title": "Cellular Automata in C", "body": "<p>The first time you run <code>arev</code>, the last element becomes '5'. This suggests that you are not handling the boundary condition correctly.</p>\n\n<p>Clue: How many times are you going to assign to <code>b[i]</code> when <code>i==s-1</code>?</p>\n"}], "owner": {"reputation": 3, "user_id": 7915470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bqnmA.jpg?s=128&g=1", "display_name": "Doge666", "link": "https://stackoverflow.com/users/7915470/doge666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 43643957, "answer_count": 1, "score": 0, "last_activity_date": 1493239088, "creation_date": 1493234210, "question_id": 43642746, "link": "https://stackoverflow.com/questions/43642746/cellular-automata-in-c", "title": "Cellular Automata in C", "body": "<p>It's the first time I code an automata and I'm not sure if it works correctly. I also have some questions:<br>\n-why does newF function return 5 sometimes? I specified every possible combination of 0's and 1's, so shouldn't it return only 0's and 1's?<br>\n-after running the code, why is it cut nicely on the left side, and not so nice on the right?<br>\nRules: <a href=\"http://natureofcode.com/book/imgs/chapter07/ch07_14.png\" rel=\"nofollow noreferrer\">http://natureofcode.com/book/imgs/chapter07/ch07_14.png</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#define size 50\nint newF(int, int, int);\nvoid arprnt(int a[], int);\nvoid arev(int a[], int b[], int s);\nint test(int a[], int);\n\nint main()\n{\n    srand(time(NULL));\n\n    int tab[size], ew[size];\n\n    int i, num=0;\n\n    for(i=0; i&lt;size; ++i)\n    {\n        tab[i] = rand()%2;\n        printf(\"%d\", tab[i]);\n    }\n\n\n    int stan = 0;\n\n    while(1)\n    {\n\n        if(stan)\n        {\n            arev(ew, tab, size);\n            arprnt(tab, size);\n            stan = !stan;\n            num = test(ew, size);\n            if(!num)\n            {\n                return 0;\n            }\n\n        }\n        else\n        {\n            arev(tab, ew, size);\n            arprnt(ew, size);\n            stan = !stan;\n            num = test(tab, size);\n            if(!num)\n            {\n                return 0;\n            }\n        }\n\n\n    }\n\n\n\n    return 0;\n}\n\nint newF(int a, int b, int c)\n{\n    if(a==0 &amp;&amp; b==0 &amp;&amp; c==0)\n    {\n        return 0;\n    }\n\n    if(a==1 &amp;&amp; b==1 &amp;&amp; c==1)\n    {\n        return 0;\n    }\n\n    if(a == 1)\n    {\n        if(b == 1)\n        {\n            if(c == 0)\n            {\n                return 1;\n            }\n        }\n        else if(b == 0)\n        {\n            if(c == 1)\n            {\n                return 0;\n            }\n            else\n            {\n                return 1;\n            }\n        }\n    }\n    else if(a == 0)\n    {\n        if(b == 1)\n        {\n            if(c == 1)\n            {\n                return 1;\n            }\n            else\n            {\n                return 0;\n            }\n        }\n        else\n        {\n            if(c == 1)\n            {\n                return 1;\n            }\n        }\n    }\n\n    return 5;\n}\n\nvoid arprnt(int a[], int b)\n{\n    int i;\n    printf(\"\\n\");\n    for(i=0; i&lt;b; ++i)\n    {\n        if(a[i] == 5 || a[i] == 1)   // (a[i] == 5 || a[i] == 1) to print only zeros\n        {\n            printf(\" \");\n        }\n        else\n        {\n            printf(\"%d\", a[i]);\n        }\n    }\n}\n\nvoid arev(int a[], int b[], int s)\n{\n    int i;\n    for(i=0; i&lt;s; ++i)\n    {\n        if(i == 0)\n        {\n            b[i] = newF(a[size-1], a[0], a[1]);\n        }\n        if(i == s-1)\n        {\n            b[i] = newF(a[size-2], a[size-1], a[0]);\n        }\n        b[i] = newF(a[i-1], a[i], a[i+1]);\n    }\n}\n\nint test(int a[], int c)\n{\n    int i, num=0;\n    for(i=1; i&lt;c; ++i)\n            {\n                if(a[0] != a[i])\n                {\n                    num++;\n                }\n            }\n    return num;\n}\n</code></pre>\n"}, {"tags": ["c", "mpi"], "answers": [{"tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": true, "score": 1, "last_activity_date": 1493235104, "creation_date": 1493235104, "answer_id": 43643008, "question_id": 43642561, "link": "https://stackoverflow.com/questions/43642561/scatter-variable-length-data/43643008#43643008", "title": "scatter variable length data", "body": "<p><a href=\"https://www.open-mpi.org/doc/v2.0/man3/MPI_Scatterv.3.php\" rel=\"nofollow noreferrer\"><code>MPI_Scatterv</code></a> is made for exactly this case. You specify both a vector of sendcounts, as well as a vector of offset. It can be a bit tricky to properly create those, so there is an example:</p>\n\n<pre><code>int remainder = rows % comm_size;\nint local_rows = (rows / comm_size)\nif (comm_rank &lt; remainder) {\n    local_rows++;\n}\nint* sendcounts = NULL;\nint* displacements = NULL;\ndouble* data = NULL;\nif (comm_rank = root) {\n    data = ...;\n    sendcounts = malloc(sizeof(int) * comm_size);\n    displacements = malloc(sizeof(int) * comm_size);\n    int sum = 0;\n    for (int i = 0; i &lt; comm_size; i++) {\n        sendcounts[i] = (rows / comm_size) * columns;\n        if (remainder &gt; 0) {\n            sendcounts[i] += columns;\n            remainder--;\n        }\n        displacements[i] = sum;\n        sum += sendcounts[i];\n    }\n}\ndouble* local_data = malloc(sizeof(*local_data) * local_rows * columns);\nMPI_Scatterv(data, sendcounts, displacements, MPI_DOUBLE,\n             local_data, local_rows * columns, MPI_DOUBLE, root, MPI_COMM_WORLD);\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 708489, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/722325f52a11e3f8e9cd988c998faa89?s=128&d=identicon&r=PG&f=1", "display_name": "PPGoodMan", "link": "https://stackoverflow.com/users/708489/ppgoodman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 43643008, "answer_count": 1, "score": 0, "last_activity_date": 1493235104, "creation_date": 1493233515, "question_id": 43642561, "link": "https://stackoverflow.com/questions/43642561/scatter-variable-length-data", "title": "scatter variable length data", "body": "<p>I'm a new programmer to MPI. I'm writing a simple program to multiply a matrix by a vector. What I do is I first broadcast the vector to all the nodes and then send a bunch of rows of the matrix to each of the nodes using scatter. </p>\n\n<p>My problem is, the number of rows in the array is not a multiple of the number of nodes available. So different nodes end up having different number of rows. At the moment I'm using point to point communication in a loop to do this. But I prefer if I could use MPI_Scatter instead. But MPI_Scatter only sends data of same length to all the nodes. </p>\n\n<p>Is there anyway that I could use scatter to send data even when each of nodes get different size of data chunk?</p>\n"}, {"tags": ["c", "function", "gcc", "memory", "compiler-construction"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 5, "creation_date": 1493232528, "post_id": 43642239, "comment_id": 74332795, "body": "It appears the answer is &quot;No&quot; to the first question and &quot;Yes&quot; to the second question. See <a href=\"http://stackoverflow.com/questions/1266233/what-is-activation-record-in-the-context-of-c-and-c\" title=\"what is activation record in the context of c and c\">stackoverflow.com/questions/1266233/&hellip;</a>."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1493232682, "post_id": 43642239, "comment_id": 74332891, "body": "This is a platform-specific question. One can imagine platforms, for example, where locals are never stored on the stack and it&#39;s just used for parameters and returned values."}, {"owner": {"reputation": 1, "user_id": 7919319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81abeede406f4f155497369025a67b52?s=128&d=identicon&r=PG&f=1", "display_name": "ugurduzel", "link": "https://stackoverflow.com/users/7919319/ugurduzel"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1493232747, "post_id": 43642239, "comment_id": 74332925, "body": "@RSahu I have seen the same post but I wanted make sure so I asked specifically"}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 3, "creation_date": 1493233009, "post_id": 43642239, "comment_id": 74333070, "body": "any type of treatment of local variables (or even global variables) is platform and ABI specific."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1493233184, "post_id": 43642239, "comment_id": 74333189, "body": "Activation records is not a term used in C or C++ Standard. The question is moot."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1493233185, "post_id": 43642239, "comment_id": 74333190, "body": "@ugurduzel,if the other post does not answer any of your questions or doubts, please elaborate with addition information in your question. Otherwise, this post can be closed as a duplicate."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1493233243, "post_id": 43642239, "comment_id": 74333234, "body": "Why C++ tag for a C question?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1493233820, "post_id": 43642239, "comment_id": 74333582, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1266233/what-is-activation-record-in-the-context-of-c-and-c\">What is activation record in the context of C and C++?</a>"}, {"owner": {"reputation": 1, "user_id": 7919319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81abeede406f4f155497369025a67b52?s=128&d=identicon&r=PG&f=1", "display_name": "ugurduzel", "link": "https://stackoverflow.com/users/7919319/ugurduzel"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1493242134, "post_id": 43642239, "comment_id": 74338078, "body": "@DavidSchwartz I editted the most specific way I can. I am new to C I wasn&#39;t able to deduce directly. That is why I try to ask specifically. Please see the editted version"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1493244195, "post_id": 43642239, "comment_id": 74338944, "body": "@ugurduzel This is now a question about what &quot;the compiler&quot; is able to do without us having any idea what compiler we&#39;re talking about."}, {"owner": {"reputation": 1, "user_id": 7919319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81abeede406f4f155497369025a67b52?s=128&d=identicon&r=PG&f=1", "display_name": "ugurduzel", "link": "https://stackoverflow.com/users/7919319/ugurduzel"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1493244371, "post_id": 43642239, "comment_id": 74339018, "body": "@DavidSchwartz this is a previous exam question of ours compiler is gcc"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1493244608, "post_id": 43642239, "comment_id": 74339133, "body": "If this is a gcc question, you should tag it."}, {"owner": {"reputation": 1, "user_id": 7919319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81abeede406f4f155497369025a67b52?s=128&d=identicon&r=PG&f=1", "display_name": "ugurduzel", "link": "https://stackoverflow.com/users/7919319/ugurduzel"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1493244695, "post_id": 43642239, "comment_id": 74339169, "body": "@DavidSchwartz It wasn&#39;t specified as gcc in the question but we use gcc in the department. I dont even know if it was compiler dependent"}, {"owner": {"reputation": 1, "user_id": 7919319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81abeede406f4f155497369025a67b52?s=128&d=identicon&r=PG&f=1", "display_name": "ugurduzel", "link": "https://stackoverflow.com/users/7919319/ugurduzel"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1493245101, "post_id": 43642239, "comment_id": 74339308, "body": "@DavidSchwartz why dont you answer the question if you know it so much, stop criticizing my wrong or missing expressions why do you all treat this way to a new comer look at the all comments above."}, {"owner": {"reputation": 1, "user_id": 7919319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81abeede406f4f155497369025a67b52?s=128&d=identicon&r=PG&f=1", "display_name": "ugurduzel", "link": "https://stackoverflow.com/users/7919319/ugurduzel"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1493245256, "post_id": 43642239, "comment_id": 74339370, "body": "@SergeyA the same with DavidSchwartz why dont you answer the question if you know it so much, stop criticizing my wrong or missing expressions why do you all treat this way to a new comer look at the all comments above."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1493245593, "post_id": 43642239, "comment_id": 74339483, "body": "We can&#39;t answer the question until we know what the question is. The purpose of our comments is to get you to clarify the question."}, {"owner": {"reputation": 1, "user_id": 7919319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81abeede406f4f155497369025a67b52?s=128&d=identicon&r=PG&f=1", "display_name": "ugurduzel", "link": "https://stackoverflow.com/users/7919319/ugurduzel"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1493245686, "post_id": 43642239, "comment_id": 74339512, "body": "@DavidSchwartz This is the exact question nothing is missing actually they didnt even specify that the compiler is gcc. So is there anything left to answer the question?"}], "owner": {"reputation": 1, "user_id": 7919319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81abeede406f4f155497369025a67b52?s=128&d=identicon&r=PG&f=1", "display_name": "ugurduzel", "link": "https://stackoverflow.com/users/7919319/ugurduzel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1493244790, "creation_date": 1493232401, "last_edit_date": 1493244790, "question_id": 43642239, "link": "https://stackoverflow.com/questions/43642239/in-c-is-the-prototype-of-a-function-enough-to-structure-the-lay-out-of-the-activ", "title": "In C is the prototype of a function enough to structure the lay out of the activation record?", "body": "<p>In a prototype line of a function</p>\n\n<p>\u2022 the data type and the order of the parameters</p>\n\n<p>\u2022 the data type of the return value</p>\n\n<p>are defined. Having to hand this information the compiler is able to structure the lay out\nof the activation record. Is this true?\nThanks in advance</p>\n"}, {"tags": ["c", "arm"], "comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1493232406, "post_id": 43642231, "comment_id": 74332727, "body": "Why the MIPS tag?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493232486, "post_id": 43642231, "comment_id": 74332763, "body": "rewrite it as a bunch of nested <code>if</code>s with simple conditions."}, {"owner": {"reputation": 11, "user_id": 7927351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160b9645f2ef24fbac9058791ad3621f?s=128&d=identicon&r=PG&f=1", "display_name": "broke19", "link": "https://stackoverflow.com/users/7927351/broke19"}, "edited": false, "score": 0, "creation_date": 1493232537, "post_id": 43642231, "comment_id": 74332800, "body": "I thought that MIPS and ArmAssembly were rather comparable?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493232590, "post_id": 43642231, "comment_id": 74332836, "body": "Comparable and very different."}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 1, "creation_date": 1493232596, "post_id": 43642231, "comment_id": 74332844, "body": "How about running that C code through your favorite ARM C compiler (e.g. GCC) and looking at the assembly produced as a starting point?  Also, you should generally make more of an attempt to solve your own problem, and post what you tried, and explain why it didn&#39;t work, instead of just asking others to do the entire task."}, {"owner": {"reputation": 11, "user_id": 7927351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160b9645f2ef24fbac9058791ad3621f?s=128&d=identicon&r=PG&f=1", "display_name": "broke19", "link": "https://stackoverflow.com/users/7927351/broke19"}, "edited": false, "score": 0, "creation_date": 1493232790, "post_id": 43642231, "comment_id": 74332945, "body": "I was just simply asking for a start. I was just learning a new language and got a little baffled by what to do."}, {"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 2, "creation_date": 1493232918, "post_id": 43642231, "comment_id": 74333025, "body": "MIPS: <a href=\"https://godbolt.org/g/8rJ2YQ\" rel=\"nofollow noreferrer\">godbolt.org/g/8rJ2YQ</a> ARM: <a href=\"https://godbolt.org/g/HRI8zx\" rel=\"nofollow noreferrer\">godbolt.org/g/HRI8zx</a>"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 3, "creation_date": 1493234681, "post_id": 43642231, "comment_id": 74334068, "body": "We&#39;re not very good at starts, but excellent at finishes.  Can you not find compares and jumps in the ARM instruction set?  CMP?  b[condition] ?"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1493241960, "post_id": 43642231, "comment_id": 74337990, "body": "start with the arm architectural reference manual for the core you are using, and a compiler..."}], "answers": [{"tags": [], "owner": {"reputation": 5746, "user_id": 583570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17472ad659a41e48c4574e01d2312807?s=128&d=identicon&r=PG", "display_name": "markgz", "link": "https://stackoverflow.com/users/583570/markgz"}, "is_accepted": false, "score": 1, "last_activity_date": 1493332470, "last_edit_date": 1493332470, "creation_date": 1493327820, "answer_id": 43668057, "question_id": 43642231, "link": "https://stackoverflow.com/questions/43642231/armassembly-short-circuit-program/43668057#43668057", "title": "ARMAssembly short-circuit program", "body": "<p>The way to solve these sorts of problems is to rewrite your C input such that each C statement corresponds to a single assembler instruction.</p>\n\n<p>Here's the original C code:</p>\n\n<pre><code> if ((x &gt; y &amp;&amp; y &gt; z) || (y &lt; z &amp;&amp; y &lt; x)) {\n   true-action;\n } else {\n   false-action;\n }\n</code></pre>\n\n<p>Here's the re-written C code:</p>\n\n<pre><code>   bool xgty = x &gt; y;\n   if (xgty) goto L1;\n   bool ygtz = y &gt; z;\n   if (!ygtz) goto false-action;\nL1:\n   bool yltz = y &lt; z;\n   if (!yltz) goto false-action;\n   bool yltx = y &lt; x;\n   if (!yltx) goto false-action;\ntrue-action:\n   ...\n   goto done;\nfalse-action:\n   ...\ndone:\n</code></pre>\n\n<p>Translating this into assembler should be trivial.</p>\n"}], "owner": {"reputation": 11, "user_id": 7927351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160b9645f2ef24fbac9058791ad3621f?s=128&d=identicon&r=PG&f=1", "display_name": "broke19", "link": "https://stackoverflow.com/users/7927351/broke19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493332470, "creation_date": 1493232364, "last_edit_date": 1493243662, "question_id": 43642231, "link": "https://stackoverflow.com/questions/43642231/armassembly-short-circuit-program", "title": "ARMAssembly short-circuit program", "body": "<p>I am attempting to write a program in ARMAssembly language and I am having difficulties right from the beginning. I am trying to write a program that will do a short-circuit evaluation of the following complex conditional:\nif ((x > y &amp;&amp; y > z) || (y &lt; z &amp;&amp; y &lt; x)). I understand that I to put x, y, and z into r1, r2, and r3 but I am getting confused by syntax and everything else. Assistance would be much appreciated. </p>\n"}, {"tags": ["c", "string", "pointers", "indexing", "struct"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1493231689, "post_id": 43641971, "comment_id": 74332324, "body": "So what do you see when you debug your code?"}, {"owner": {"reputation": 1646, "user_id": 7501501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24ed8d70ce334750ebb5f7e387d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Yonlif", "link": "https://stackoverflow.com/users/7501501/yonlif"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1493231966, "post_id": 43641971, "comment_id": 74332480, "body": "When I&#39;m entering yonatan.lif I get lif yonatanp"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 4, "creation_date": 1493232145, "post_id": 43641971, "comment_id": 74332588, "body": "1) CString requires a null-terminator(<code>&#39;\\0&#39;</code>) at the end of the string."}, {"owner": {"reputation": 1646, "user_id": 7501501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24ed8d70ce334750ebb5f7e387d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Yonlif", "link": "https://stackoverflow.com/users/7501501/yonlif"}, "edited": false, "score": 0, "creation_date": 1493232328, "post_id": 43641971, "comment_id": 74332676, "body": "wow problem solved ty so much"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1497217572, "post_id": 43641971, "comment_id": 75972183, "body": "<code>word = realloc(word,(i+1)*sizeof(char));</code> Advice: dont do this. Your code will call realloc() once<i>per character</i> . Instead: allocate too much and change  the size with larger increments. BTW: your initial allocation<code>sizeof (char*)</code> is wrong. (but harmless)"}, {"owner": {"reputation": 1646, "user_id": 7501501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24ed8d70ce334750ebb5f7e387d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Yonlif", "link": "https://stackoverflow.com/users/7501501/yonlif"}, "edited": false, "score": 0, "creation_date": 1497289487, "post_id": 43641971, "comment_id": 76004643, "body": "Ok I&#39;ll notice this next time, thanks"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1497473787, "post_id": 43641971, "comment_id": 76099501, "body": "@Yonlif I see you edited your question, what&#39;s the problem now? And what have you fixed via the discussion in the comments? I am a bit lost with your code. This line <code>word = malloc(sizeof(char));;</code> does allocate space for 1 char only, is that what you want?"}, {"owner": {"reputation": 1646, "user_id": 7501501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24ed8d70ce334750ebb5f7e387d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Yonlif", "link": "https://stackoverflow.com/users/7501501/yonlif"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1497474232, "post_id": 43641971, "comment_id": 76099707, "body": "Ok @gsamaras I edited it again, I think its more clear now: I have code, It&#39;s not doing what I want him to do, I describe how, I&#39;m asking for help. If you think I should edit it please say how."}, {"owner": {"reputation": 1646, "user_id": 7501501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24ed8d70ce334750ebb5f7e387d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Yonlif", "link": "https://stackoverflow.com/users/7501501/yonlif"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1497474343, "post_id": 43641971, "comment_id": 76099760, "body": "Yes it should, thats only for realloc later @gsamaras."}], "answers": [{"comments": [{"owner": {"reputation": 1646, "user_id": 7501501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24ed8d70ce334750ebb5f7e387d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Yonlif", "link": "https://stackoverflow.com/users/7501501/yonlif"}, "edited": false, "score": 1, "creation_date": 1497555337, "post_id": 44555449, "comment_id": 76139938, "body": "Thanks. &quot;<i>You should take a piece of paper and a pencil and draw what your code does next time</i>&quot; defiantly gonna use it."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 2, "last_activity_date": 1497477850, "creation_date": 1497477850, "answer_id": 44555449, "question_id": 43641971, "link": "https://stackoverflow.com/questions/43641971/c-creating-index-what-am-i-doing-wrong/44555449#44555449", "title": "C: creating index, what am I doing wrong?", "body": "<p><strong><em>Strings in C must be null terminating</em></strong> when you are working with functions provided by most of the standard headers, such as <code>strcmp()</code>, <code>printf()</code>, and so on. From <a href=\"http://www.cplusplus.com/reference/cstring/strcmp/\" rel=\"nofollow noreferrer\"><code>strcmp()</code></a>'s ref:</p>\n\n<blockquote>\n  <p>This function starts comparing the first character of each string.\n  [...] it continues [...] <em>until a terminating null-character is\n  reached</em>.</p>\n</blockquote>\n\n<p>This is what causing the <em>Undefined Behavior</em> you are invoking, but not null terminating your strings. To do so, modify your code to:</p>\n\n<pre><code>word[i] = '\\0';\ni = -1;\nadd(&amp;root, word, line);\n</code></pre>\n\n<p>Now your words will be null terminated and your program shall function properly.</p>\n\n<hr>\n\n<p>Here is the scenario of what is happening to your program (<em>You</em> should take a piece of paper and a pencil and draw what your code does next time).</p>\n\n<ol>\n<li><code>word</code> points to \"yonatan\".</li>\n<li>You meat '.', thus <code>add()</code> is called.</li>\n<li>There a <code>new</code> struct is created, where it's <code>next</code> member will be\nset to <code>root</code>, which is <code>NULL</code>, <code>value</code> to where <code>word</code> points to,\nand <code>line</code>...well this member will remain uninitialized (it should\nbe probably be set to 0, but you know better).</li>\n<li>We continue and now <code>word</code> forgets about \"yonatan\" and points to\n\"lif\".</li>\n<li><code>add()</code> is called again, where another <code>new</code> struct is created, with\nits <code>value</code> to \"lif\" and its <code>next</code> to the previously-created\nstruct, at step 3. That's why your words will be printed in reserve\nfrom their input order. <code>line</code> will be left uninitialized again.</li>\n<li><code>display()</code> is called, but the <code>%s</code> format seeks for the null\nterminator to stop, which your strings might lack, thus invoking\nundefined behavior (the junk characters you are witnessing, like\n'p').</li>\n</ol>\n\n<p>Now you should ask and what about my for loop and <code>compare()</code> functions? You will enter that loop once <code>add()</code> is called for the 2nd time, and your <code>compare()</code> function is called, but without null terminated strings <code>strcmp()</code> fails to do its job properly, and my guess is that it returns a junk positive value, which breaks the loop.</p>\n\n<hr>\n\n<p>PS: Not a problem, but may cause confusion to reader:</p>\n\n<pre><code>char *word;\nword = malloc(sizeof(char*));\n</code></pre>\n\n<p>Why you allocate space for a pointer? You probably meant to just to this:</p>\n\n<pre><code>word = malloc(sizeof(char));\n</code></pre>\n"}], "owner": {"reputation": 1646, "user_id": 7501501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24ed8d70ce334750ebb5f7e387d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Yonlif", "link": "https://stackoverflow.com/users/7501501/yonlif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 44555449, "answer_count": 1, "score": 3, "last_activity_date": 1497478062, "creation_date": 1493231516, "last_edit_date": 1497478062, "question_id": 43641971, "link": "https://stackoverflow.com/questions/43641971/c-creating-index-what-am-i-doing-wrong", "title": "C: creating index, what am I doing wrong?", "body": "<p>I created the next index code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nstruct wordlist {\n    char *value;\n    int *lines;\n    struct wordlist *next;\n};\n\nint compare (struct wordlist *one , struct wordlist *two) {\n    return strcmp(one-&gt;value, two-&gt;value);\n}\n\nvoid add(struct wordlist **pp, char *value, int line) {\n\n    struct wordlist *new;\n    new = malloc(sizeof(*new));\n    new-&gt;value = value;\n\n    for ( ; *pp != NULL; pp = &amp;(*pp)-&gt;next) {\n        if (compare(*pp, new) == 0) {\n            return;\n        }\n        else if (compare(*pp, new) &gt; 0) {\n            break;\n        }\n    }\n\n    new-&gt;next = *pp;\n    *pp = new;\n}\n\nvoid display(struct wordlist *ptr) {\n\n    for (; ptr != NULL; ptr = ptr-&gt;next) {\n        printf(\"%s\\n\", ptr-&gt;value);\n    }\n}\n</code></pre>\n\n<p>its too much code\nso i break it to submit. sorry</p>\n\n<pre><code>int main(void) {\n    struct wordlist *root = NULL;\n    int c;\n    char *word;\n    word = malloc(sizeof(char*));\n    int line = 1;\n    for (int i = 0;;i++) {\n        c = getchar();\n        if (c == EOF) {\n            break;\n        }\n        if (!isalpha(c)) {\n            i = -1;\n            add(&amp;root, word, line);\n            word = malloc(sizeof(char));\n            if (c == '\\n') {\n                line++;\n            }\n            continue;\n        }\n        c = tolower(c);\n        word[i] = c;\n        word = realloc(word,(i+1)*sizeof(char));\n    }\n    display(root);\n\n    return 0;\n}\n</code></pre>\n\n<p>It suppose to break the string by every thing which is not a a-z or A-Z char.</p>\n\n<p>When I debug my code by giving him a string like</p>\n\n<blockquote>\n  <p>yonatan.lif</p>\n</blockquote>\n\n<p>He is printing:</p>\n\n<blockquote>\n  <p>lif yonatanp</p>\n</blockquote>\n\n<p>As my output should be</p>\n\n<blockquote>\n  <p>lif yonatan</p>\n</blockquote>\n\n<p>(I don't want the 'p' or any other char to be there)</p>\n\n<p>As long as the input is the longer the length of the chars after the string that shouldn't be there</p>\n\n<p>It works but it acts in the way I described with long inputs and I can't figure out why. Can you please help me figure what I'm doing wrong?</p>\n\n<p>thanks for all the helpers.   </p>\n"}, {"tags": ["c", "hash", "hashtable"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1493233391, "post_id": 43641821, "comment_id": 74333311, "body": "Have you stepped through your code with a debugger?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493233797, "post_id": 43641821, "comment_id": 74333565, "body": "Note that <code>memset(b, -1, 100)</code> does not set all <code>b[]</code> to -1."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493233951, "post_id": 43641821, "comment_id": 74333654, "body": "Rather than stopping at <code>while (i != N)</code>, keep looking.  Perhaps after <code>i &gt;= N&#47;2</code> just look linearly for the next free cell."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1493234072, "post_id": 43641821, "comment_id": 74333726, "body": "replacing the <code>memset()</code> statement with <code>for(i=0;i&lt;100;i++) b[i]=-1;</code> does not fix the apparent problem."}, {"owner": {"reputation": 91, "user_id": 7168429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/263c2f93d7bdcfd366868fdd20b0fc63?s=128&d=identicon&r=PG&f=1", "display_name": "SomeoneNew", "link": "https://stackoverflow.com/users/7168429/someonenew"}, "edited": false, "score": 0, "creation_date": 1493234127, "post_id": 43641821, "comment_id": 74333751, "body": "I used something similar to debugger. I used  printf(&quot;Position %d&quot;,position)  and it was pretty clear for me that the hash function is skipping some values. I can see that it&#39;s wrong, but i can&#39;t find out why... I need to use a quadratic function of hash :("}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493235806, "post_id": 43641821, "comment_id": 74334719, "body": "Consider the hash function in 2 parts.  Pre-hash <code>(k + i*c1 + i*i*c2)</code> and post-hash <code>pre_hash()%N</code>.  You are looking for a <code>pre_hash(k,i)</code> with a modulo period of <code>N</code> based on <code>i</code>.  A <i>good</i> <code>pre_hash()</code> would not have such a periodicity - it should be independent of <code>N, i, k</code>.  You could use <code>k+i</code> to meet this question goal, but that has other weak hash qualities."}], "answers": [{"tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 0, "last_activity_date": 1493241125, "last_edit_date": 1493241125, "creation_date": 1493234319, "answer_id": 43642775, "question_id": 43641821, "link": "https://stackoverflow.com/questions/43641821/what-is-wrong-with-my-hash-function/43642775#43642775", "title": "What is wrong with my hash function?", "body": "<p>In short, you are producing repeating values for <code>position</code> often enough to prevent <code>h_table[]</code> from being populated after only <code>N</code> attempts...  </p>\n\n<p>The pseudo-random number generator is not guaranteed to produce a set of unique numbers, nor is your <code>h(...)</code> function guaranteed to produce a mutually exclusive set of position values.  It is likely that you are generating the same position enough times that you run out of loops before all 19 positions have been generated.  The question <em>how many times must <code>h(...)</code> be called on average before you are likely to get the value of an unused position?</em> should be answered.  This may help to direct you to the problem.</p>\n\n<p><strong><em>As an experiment</em></strong>, I increased the looping indexes from <code>N</code> to <code>100</code> in all but the <code>h(...)</code> function (so as not to overrun <code>h_table[]</code> ).  And as expected the first 5 positions filled immediately.  The next one filled after 3 more tries.  The next one 10 tries later, and so on, until by the end of 100 tries, there were still some unwritten positions.<br>\n<strong><em>On the next run</em></strong>, all table positions were filled.</p>\n\n<p>2 possible solutions:<br>\n1) Modify hash to improve probability of unique values.<br>\n2) Increase iterations to populate <code>h_table</code></p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1493235562, "last_edit_date": 1493235562, "creation_date": 1493234333, "answer_id": 43642779, "question_id": 43641821, "link": "https://stackoverflow.com/questions/43641821/what-is-wrong-with-my-hash-function/43642779#43642779", "title": "What is wrong with my hash function?", "body": "<p>A <code>good_hash_function() % N</code> may repeat itself in <code>N</code> re-hashes.  A good hash looks nearly <em>random</em> in its output even though it is deterministic.  So in <code>N</code> tries it might not loop through all the array elements.</p>\n\n<p>After failing to find a free array element after a number of tries, say N/3 tries, recommend a different approach.  Just look for the next free element.</p>\n"}], "owner": {"reputation": 91, "user_id": 7168429, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/263c2f93d7bdcfd366868fdd20b0fc63?s=128&d=identicon&r=PG&f=1", "display_name": "SomeoneNew", "link": "https://stackoverflow.com/users/7168429/someonenew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 43642775, "answer_count": 2, "score": 0, "last_activity_date": 1493241125, "creation_date": 1493231030, "question_id": 43641821, "link": "https://stackoverflow.com/questions/43641821/what-is-wrong-with-my-hash-function", "title": "What is wrong with my hash function?", "body": "<p>I'm trying to create a hash table. Here is my code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define N 19\n#define c1 3\n#define c2 5\n#define m 3000\nint efort;\nint h_table[N];\n\nint h(int k, int i)\n{\n    return (k + i*c1 + i*i*c2) % N;\n}\nvoid init()\n{\n    for (int i = 0; i &lt; N; i++)\n        h_table[i] = -1;\n}\nvoid insert(int k)\n{\n    int position, i;\n    i = 0;\n    do\n    {\n        position = h(k, i);\n        printf(\"\\n Position %d \\n\", position);\n        if (h_table[position] == -1)\n        {       \n            h_table[position] = k;\n            printf(\"Inserted :elem %d at %d \\n\", h_table[position], position);\n            break;\n        }\n        else\n        {\n            i += 1;\n        }\n    } while (i != N);\n}\nvoid print(int n)\n{\n    printf(\"\\nTable content: \\n\");\n    for (int i = 0; i &lt; n; i++)\n    {\n        printf(\"%d \", h_table[i]);\n    }\n\n }\n\n\nvoid test()\n {\n    int a[100];\n    int b[100];\n    init();\n    memset(b, -1, 100);\n    srand(time(NULL));\n    for (int i = 0; i &lt; N; i++)\n    {\n        a[i] = rand() % (3000 + 1 - 2000) + 2000;\n    }\n    for (int i = 0; i &lt; N ; i++)\n    {\n        insert(a[i]);\n    }\n    print(N);\n}\n int main()\n{   \n    test();\n    return 0;\n}\n</code></pre>\n\n<p>Hash (\"h\") function and \"insert\" function are took from \"Introduction to algorithms\" book (Cormen).I don't know what is happening with the h function or insert function. Sometimes it fills completely my array, but sometimes it doesn't. That means it doesn't work good. What am I doing wrong? </p>\n"}, {"tags": ["c", "forms", "ncurses"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7926962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed7e18671ad62cef4c410d413b647001?s=128&d=identicon&r=PG&f=1", "display_name": "Wonnegrausen", "link": "https://stackoverflow.com/users/7926962/wonnegrausen"}, "edited": false, "score": 0, "creation_date": 1493308958, "post_id": 43653131, "comment_id": 74372308, "body": "Great! With an extra window for the form an wgetch its working now. Actually I have tried this out before and apparently made some mistake so that the value would not update unless I pressed a key. So I concluded (wrongly) that wgetch is not affected by timeout(1). Thanks a lot!"}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 1, "last_activity_date": 1493283384, "creation_date": 1493283384, "answer_id": 43653131, "question_id": 43641703, "link": "https://stackoverflow.com/questions/43641703/ncurses-forms-show-editing-cursor-highlight-active-field/43653131#43653131", "title": "ncurses forms: Show editing cursor / highlight active field", "body": "<p>The <code>getch</code> call essentially tells ncurses to leave the cursor where your <code>mvprintw</code> has left it &mdash; on the <em>standard screen</em>.  To get it to move to your form, you would have to tell it to use <code>wgetch</code>, passing the <code>WINDOW*</code> pointer for the current form (which in turn holds a window's position for the field).</p>\n\n<p>Further reading:</p>\n\n<ul>\n<li><a href=\"http://invisible-island.net/ncurses/man/form_page.3x.html\" rel=\"nofollow noreferrer\"><strong><code>FIELD *current_field(const FORM *);</code></strong></a></li>\n<li><a href=\"http://invisible-island.net/ncurses/man/form_win.3x.html\" rel=\"nofollow noreferrer\"><strong><code>WINDOW *form_win(const FORM *form);</code></strong></a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 546, "user_id": 3024176, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/CL0jb.jpg?s=128&g=1", "display_name": "cirrusio", "link": "https://stackoverflow.com/users/3024176/cirrusio"}, "is_accepted": false, "score": 0, "last_activity_date": 1537397364, "creation_date": 1537397364, "answer_id": 52415184, "question_id": 43641703, "link": "https://stackoverflow.com/questions/43641703/ncurses-forms-show-editing-cursor-highlight-active-field/52415184#52415184", "title": "ncurses forms: Show editing cursor / highlight active field", "body": "<p>One thing that @Thomas's answer does not provide is how to highlight the active field (as indicated by the title of the question).  For completion's sake, I am going to add a function here that will allow you to do just that:</p>\n\n<pre><code>void highlight_current_field(FORM *form, FIELD *fields[])\n{\n    FIELD *cfield = current_field(form);\n    FIELD *currfield;\n    int i = 0;\n    while ((currfield = fields[i]) != NULL)\n    {\n        if (currfield == cfield)\n            set_field_back(currfield, A_STANDOUT);\n        else if (i &gt;= 4)\n            set_field_back(currfield, A_UNDERLINE);\n\n        ++i;\n    }\n}\n</code></pre>\n\n<p>I hope this helps fellow travelers.  For more information on the attributes provide, check out <a href=\"http://www.cs.ukzn.ac.za/~hughm/os/notes/ncurses.html\" rel=\"nofollow noreferrer\">this site</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 7926962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed7e18671ad62cef4c410d413b647001?s=128&d=identicon&r=PG&f=1", "display_name": "Wonnegrausen", "link": "https://stackoverflow.com/users/7926962/wonnegrausen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1276, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1537397364, "creation_date": 1493230662, "question_id": 43641703, "link": "https://stackoverflow.com/questions/43641703/ncurses-forms-show-editing-cursor-highlight-active-field", "title": "ncurses forms: Show editing cursor / highlight active field", "body": "<p>I\u2019m new to programming and I\u2019d like to realise the following with ncurses in C:\nA form with fields to fill out and underneath this form, there is a continuously changing sensor value to be observed by the user during filling out the form, which results in the desired actions. </p>\n\n<p>I\u2019m glad I made it that far, that I can put the field buffer into my variables now, by pressing return, but now I\u2019m facing a problem which seems to be not googleable.</p>\n\n<p>My program started off from the example, which I posted underneath. In the original example I just added two lines and it already demonstrates my problem very well.</p>\n\n<p>I set timeout(1); so the getch() function won\u2019t wait for user input in the form before it prints the fresh sensor values. \nInto the while-loop I put in the sennsor value with mvprint.</p>\n\n<p>Now the sensor values are always up-to-date and it is still possible to move from one field to the other with the arrow keys and type into the fields.\nBut the visible Cursor always stays at the sensor value, which makes sense to me, because it is continuously moved there for printing. The forms driver seems to remember the position which was edited lastly, so that editing the fields will still function, but without any optical hint at which position the typing will be. The documentation refers to this position as the \u201cediting-cursor\u201d at one point.</p>\n\n<p>Am I doing something completely wrong? Or is there a way to highlight the field, or even make the editing-cursor visible?\nThank you!</p>\n\n<pre><code>    /* gcc -Wall -pthread -g -o formncurses formncurses.c -lform -lncurses */\n\n    #include &lt;form.h&gt;\n\n    int main()\n    {   FIELD *field[3];\n    FORM  *my_form;\n    int ch;\n\n    /* Initialize curses */\n    initscr();\n    cbreak();\n    noecho();\n    keypad(stdscr, TRUE);\n\n    timeout(1);\n\n    /* Initialize the fields */\n    field[0] = new_field(1, 10, 4, 18, 0, 0);\n    field[1] = new_field(1, 10, 6, 18, 0, 0);\n    field[2] = NULL;\n\n    /* Set field options */\n    set_field_back(field[0], A_UNDERLINE);  /* Print a line for the option  */\n    field_opts_off(field[0], O_AUTOSKIP);   /* Don't go to next field when this */\n                        /* Field is filled up       */\n    set_field_back(field[1], A_UNDERLINE); \n    field_opts_off(field[1], O_AUTOSKIP);\n\n    /* Create the form and post it */\n    my_form = new_form(field);\n    post_form(my_form);\n    refresh();\n\n    mvprintw(4, 10, \"Value 1:\");\n    mvprintw(6, 10, \"Value 2:\");\n    refresh();\n\n    /* Loop through to get user requests */\n    while((ch = getch()) != KEY_F(1))\n    {   switch(ch)\n        {   case KEY_DOWN:\n                /* Go to next field */\n                form_driver(my_form, REQ_NEXT_FIELD);\n                /* Go to the end of the present buffer */\n                /* Leaves nicely at the last character */\n                form_driver(my_form, REQ_END_LINE);\n                break;\n            case KEY_UP:\n                /* Go to previous field */\n                form_driver(my_form, REQ_PREV_FIELD);\n                form_driver(my_form, REQ_END_LINE);\n                break;\n            default:\n                /* If this is a normal character, it gets */\n                /* Printed                */    \n                form_driver(my_form, ch);\n                break;\n        }\n\n    mvprintw(12, 10, \"Here stands the changing sensor value\");\n\n    }\n\n    /* Un post form and free the memory */\n    unpost_form(my_form);\n    free_form(my_form);\n    free_field(field[0]);\n    free_field(field[1]); \n\n    endwin();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1493229497, "post_id": 43641344, "comment_id": 74330956, "body": "Hint: Check the data type of <code>p.array</code>..."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1493229528, "post_id": 43641344, "comment_id": 74330972, "body": "<code>p.array[SIZE]</code> is off  by one, C uses 0-based indexing. You cannot assign arrays, moreover."}, {"owner": {"reputation": 3, "user_id": 7879892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c35c17a575b33707590b3a8d40d04a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/7879892/adam"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1493229585, "post_id": 43641344, "comment_id": 74331011, "body": "How can I assign an array to a field in a struct ?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493229599, "post_id": 43641344, "comment_id": 74331018, "body": "BTW <code>typedef struct stdata data{ ... }</code> --&gt; <code>typedef struct stdata { ... } data;</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1493229618, "post_id": 43641344, "comment_id": 74331030, "body": "You can&#39;t, you have to assign element by element, using a loop."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493229681, "post_id": 43641344, "comment_id": 74331066, "body": "Also <code>data p;</code> is local variable inside function <code>initialize</code>."}, {"owner": {"reputation": 3, "user_id": 7879892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c35c17a575b33707590b3a8d40d04a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/7879892/adam"}, "edited": false, "score": 0, "creation_date": 1493229736, "post_id": 43641344, "comment_id": 74331099, "body": "Can anybody please write the entire code I have an exam tomorrow I would really appreciate it"}, {"owner": {"reputation": 3278, "user_id": 1223297, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/663526923/picture?type=large", "display_name": "Mahmoud Fayez", "link": "https://stackoverflow.com/users/1223297/mahmoud-fayez"}, "edited": false, "score": 0, "creation_date": 1493230173, "post_id": 43641344, "comment_id": 74331349, "body": "@Adam it is not about the exam, you have to love programming otherwise you will be stuck in a job that is not satisfying for you. Passing the exam is no the key. Also consider the comments to make your code 100% correct. The machine will never let you down."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493230193, "post_id": 43641344, "comment_id": 74331364, "body": "like <a href=\"http://ideone.com/gkkcU6\" rel=\"nofollow noreferrer\">this</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3278, "user_id": 1223297, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/663526923/picture?type=large", "display_name": "Mahmoud Fayez", "link": "https://stackoverflow.com/users/1223297/mahmoud-fayez"}, "is_accepted": false, "score": 1, "last_activity_date": 1493229746, "creation_date": 1493229746, "answer_id": 43641439, "question_id": 43641344, "link": "https://stackoverflow.com/questions/43641344/how-to-initialize-an-array-field-inside-a-structure/43641439#43641439", "title": "How to initialize an array field inside a structure?", "body": "<p>You can do it in two different ways both are correct:</p>\n\n<p>Method 1:</p>\n\n<pre><code>memcpy(p.array, array, sizeof(int) * length);\n</code></pre>\n\n<p>Method 2: (using a loop)</p>\n\n<pre><code>for (int i = 0; i &lt; length; i++) p.array[i] = array[i];\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7879892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c35c17a575b33707590b3a8d40d04a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/7879892/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1493229746, "creation_date": 1493229401, "last_edit_date": 1493229510, "question_id": 43641344, "link": "https://stackoverflow.com/questions/43641344/how-to-initialize-an-array-field-inside-a-structure", "title": "How to initialize an array field inside a structure?", "body": "<p>So I have an exercice that asks me to define a structure that has 2 fields: one field to store an array of an already defined size, one field to store the length of the array. Then I have to define a function that should initialize the 2 fields in the structure, and another funciton that prints the 2 fields \nI'm just a beginner in programming, here's my attempt to write the code, but it doesn't seem to work. Thanks in advance for the help.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#define SIZE 10\ntypedef struct stdata data{\n    int array[SIZE];\n    int length;\n}\nvoid initialize (int array[],int length){\n    data p;\n    p.array[SIZE]=array;\n    p.length=length;\n}\nvoid print(data p){\n    printf(\"%d %d \",p.array,p.length);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "ansi-c"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 3, "creation_date": 1493229654, "post_id": 43641342, "comment_id": 74331051, "body": "The strings need space for 3 chars  - 2 letters + &#39;\\0&#39; (string terminator)."}, {"owner": {"reputation": 195, "user_id": 4879877, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1567598543514989/picture?type=large", "display_name": "Jo&#227;o Lucas Gouveia", "link": "https://stackoverflow.com/users/4879877/jo%c3%a3o-lucas-gouveia"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1493229831, "post_id": 43641342, "comment_id": 74331158, "body": "that&#39;s it. Thank you very much. But now the position 1 comes with some trash.          C[0] = ab          C[1] = t\ufffdcd"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1493230309, "post_id": 43641342, "comment_id": 74331439, "body": "There&#39;s no need for all that pointer stuff. Remove all the <code>*</code> and <code>&amp;</code>."}, {"owner": {"reputation": 195, "user_id": 4879877, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1567598543514989/picture?type=large", "display_name": "Jo&#227;o Lucas Gouveia", "link": "https://stackoverflow.com/users/4879877/jo%c3%a3o-lucas-gouveia"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1493230802, "post_id": 43641342, "comment_id": 74331788, "body": "Yea, now it is working. Thanks"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493230907, "post_id": 43641342, "comment_id": 74331855, "body": "fix like <a href=\"http://ideone.com/tlC8fb\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493240494, "post_id": 43641342, "comment_id": 74337277, "body": "1) C does not support references 2) A pointer is not a reference. 3) The cannonical way is to pass apointer to a 1D array to which a 2D array would decay naturally. 4) Use the index-operator when working with arrays, resp. pointers to the first element of an array."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1498737369, "post_id": 43641342, "comment_id": 76628709, "body": "If you did pass <code>matrix</code> your original way, note that the second row is <code>(*matrix)[1]</code>.  Your <code>*matrix[1]</code> advances just past the end of the entire 2D array and then dereferences."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1498740310, "post_id": 44824403, "comment_id": 76631108, "body": "The OP code and your code are both correct ways to pass a matrix by reference. (The OP code makes a mistake inside the function body though)"}], "tags": [], "owner": {"reputation": 166, "user_id": 6571467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58c70d68c0e00c538077a76d05a2117a?s=128&d=identicon&r=PG&f=1", "display_name": "tigre200", "link": "https://stackoverflow.com/users/6571467/tigre200"}, "is_accepted": false, "score": 1, "last_activity_date": 1498737143, "creation_date": 1498737143, "answer_id": 44824403, "question_id": 43641342, "link": "https://stackoverflow.com/questions/43641342/passing-2d-array-by-reference-c-and-modify-values/44824403#44824403", "title": "Passing 2D array by reference C and modify values", "body": "<p>That is not how you declare a function that receives a matriz in C.\nThe function prototype should be: </p>\n\n<pre><code>void changeMatrix(char matrix[2][2]);\n</code></pre>\n\n<p>Being that the first number in brackets is ignored.\nAnd you should invoke the function like this:</p>\n\n<pre><code>char C[2][2];\nchangeMatrix(C);\n</code></pre>\n\n<p>This is so, because remember that an array's name is the address of the first element in the array. A matrix declared as <code>char C[n][m]</code> is an array of n*m positions in which the first m positions belong to the first column, and so forth.</p>\n\n<p>A matrix is then just a kind of one  dimensional array.</p>\n"}], "owner": {"reputation": 195, "user_id": 4879877, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1567598543514989/picture?type=large", "display_name": "Jo&#227;o Lucas Gouveia", "link": "https://stackoverflow.com/users/4879877/jo%c3%a3o-lucas-gouveia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1216, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498737143, "creation_date": 1493229399, "question_id": 43641342, "link": "https://stackoverflow.com/questions/43641342/passing-2d-array-by-reference-c-and-modify-values", "title": "Passing 2D array by reference C and modify values", "body": "<p>I'm trying to pass a 2x2 char matrix to my function so I can modify it's values inside it. In my code now, the only value that is changed is the first line of the matrix, the line 1 it doesn't change.</p>\n\n<p>in console, my results are</p>\n\n<pre><code>     C[0] = ab \n     C[1] = \n</code></pre>\n\n<p>So C[1] is not updating in my function, please, help me to figure out what is going on.</p>\n\n<p>Here's the code</p>\n\n<pre><code>    #include&lt;stdlib.h&gt;\n    #include&lt;stdio.h&gt;\n    #include&lt;string.h&gt;\n\n    void changeMatrix(char (*matrix)[2][2]){\n        strcpy(*matrix[1], \"cd\");\n        strcpy(*matrix[0], \"ab\");   \n    }\n\n    int main(){\n        char C[2][2];\n        changeMatrix(&amp;C);\n        printf(\"C[0] = %s \\n\", C[0]);\n        printf(\"C[1] = %s \\n\", C[1]);\n\n    }\n</code></pre>\n"}, {"tags": ["c", "arrays", "function", "loops", "8051"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1493230377, "post_id": 43641294, "comment_id": 74331480, "body": "<code>else if(command_byte==0x82)</code> There is no natching <code>if</code> (you probably made a cut&amp;paste error somewhere)"}, {"owner": {"reputation": 77, "user_id": 6906043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1MD9D.jpg?s=128&g=1", "display_name": "Jaime Perez", "link": "https://stackoverflow.com/users/6906043/jaime-perez"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1493230539, "post_id": 43641294, "comment_id": 74331585, "body": "@wildplasser I apologize for that statement. There is a matching <code>if</code> statement in my actual code that goes before it. I just excluded it for purposes of condensing my code in the question. I can see how this would cause confusion."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1493231088, "post_id": 43641294, "comment_id": 74331973, "body": "What was your intention with <code>if (next_address+=15)</code> ? <code>next_address += 15</code> adds <code>15</code>, but this always evaluates to <code>true</code>, and it&#39;s confusing when you change the <code>for</code> loop variable at two places. Did you mean something like <code>next_address % 16 == 15</code>? I would say the code is rather convoluted for what it does. How about you 1) read the data into an array of a certain length in one function, and then 2) dump the contents of an array into a hex string in a second function? That would be much easier to test (and reason about) than this."}, {"owner": {"reputation": 77, "user_id": 6906043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1MD9D.jpg?s=128&g=1", "display_name": "Jaime Perez", "link": "https://stackoverflow.com/users/6906043/jaime-perez"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1493231360, "post_id": 43641294, "comment_id": 74332138, "body": "@Groo my intention was for the <code>for</code> loop to increment <code>next_address</code> 15 times and when the 15th time came around then that would fill up the <code>data_buffer</code> and send it out to the terminal. So I should see 16 rows with data from 16 addresses. Which is what I got but I am getting <code>null char</code> instead of <code>FF</code>. I hope that makes sense. I may have explained that all over the place ha"}, {"owner": {"reputation": 77, "user_id": 6906043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1MD9D.jpg?s=128&g=1", "display_name": "Jaime Perez", "link": "https://stackoverflow.com/users/6906043/jaime-perez"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1493231458, "post_id": 43641294, "comment_id": 74332191, "body": "@Groo I have not tried the modulus operation yet. Brb with outcome"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1493231594, "post_id": 43641294, "comment_id": 74332265, "body": "In that case, there&#39;s a mistake, because <code>next_address += 15</code> increases <code>next_address</code> by <code>15</code> in each iteration. <code>next_address % 16</code> will be 0 for <code>0</code>, <code>16</code>, <code>32</code>, etc., so I presumed you will want to dump on the <code>15th</code> index."}, {"owner": {"reputation": 77, "user_id": 6906043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1MD9D.jpg?s=128&g=1", "display_name": "Jaime Perez", "link": "https://stackoverflow.com/users/6906043/jaime-perez"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1493231932, "post_id": 43641294, "comment_id": 74332461, "body": "@Groo yes! Exactly! I was using the <code>if</code> statement to check if <code>next_address</code> had been incremented 15 times, and if so jump to the subroutine where it would load the rest of the buffer with values that I hardwired into it."}, {"owner": {"reputation": 77, "user_id": 6906043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1MD9D.jpg?s=128&g=1", "display_name": "Jaime Perez", "link": "https://stackoverflow.com/users/6906043/jaime-perez"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1493232270, "post_id": 43641294, "comment_id": 74332645, "body": "@Groo <code>next_address%16==0</code> is working to a degree. I assume this must be the way my code is formatted."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1493232676, "post_id": 43641294, "comment_id": 74332884, "body": "Well, <code>i</code> variable is also suspicious. You initialize it to <code>14</code> (I am presuming <code>output_address</code> then writes to these first <code>14</code> bytes, but you haven&#39;t posted it), but you never reset it back after dumping a line. As I said, I would ditch this and split it into several simple functions which don&#39;t operate on shared state, to make it easier to test each function separately."}, {"owner": {"reputation": 77, "user_id": 6906043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1MD9D.jpg?s=128&g=1", "display_name": "Jaime Perez", "link": "https://stackoverflow.com/users/6906043/jaime-perez"}, "edited": false, "score": 0, "creation_date": 1493235089, "post_id": 43641294, "comment_id": 74334283, "body": "You are right I never initialize it back down to 14. I do have a function in which the first 14 indexes are loaded into the buffer. This routine is meant to load indexes 14-62 then output."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 6906043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1MD9D.jpg?s=128&g=1", "display_name": "Jaime Perez", "link": "https://stackoverflow.com/users/6906043/jaime-perez"}, "edited": false, "score": 0, "creation_date": 1493234862, "post_id": 43642533, "comment_id": 74334162, "body": "<code>address_sum</code> is not 8 bytes wide but it was 5 bytes wide &amp; I don&#39;t know of a data type that is 6 bytes wide. <code>chip_byte</code> is unsigned so the check is mainly for sanity on my part. I am not familiar with the <code>volatile</code> type so I will look in on that. Address sum will never go beyond 0x140000 (declared variable that prevent that). I will place the <code>++</code> to clean it up. I assumed that if I hardwired the character into that index I wouldn&#39;t need to convert? I am checking to see if <code>next_address</code> has been incremented 15 times so I can dump it out into the terminal. Like checking for a <code>NULL</code> char?"}, {"owner": {"reputation": 77, "user_id": 6906043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1MD9D.jpg?s=128&g=1", "display_name": "Jaime Perez", "link": "https://stackoverflow.com/users/6906043/jaime-perez"}, "edited": false, "score": 0, "creation_date": 1493234890, "post_id": 43642533, "comment_id": 74334179, "body": "Thank you for all the suggestions! Just had a couple more questions for ya"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "reply_to_user": {"reputation": 77, "user_id": 6906043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1MD9D.jpg?s=128&g=1", "display_name": "Jaime Perez", "link": "https://stackoverflow.com/users/6906043/jaime-perez"}, "edited": false, "score": 0, "creation_date": 1493312600, "post_id": 43642533, "comment_id": 74374752, "body": "<code>address_sum</code> then is a non-standard type?  That means your compiler must be doing some magic to make the math work on your system.  <code>volatile</code> tells your compiler to not optimize your loop - to always read the value in, even though it appears it will never change.  It&#39;s very common in embedded coding.  And if you are checking to see if <code>next_address</code> has been incremented 15 times, then consider a separate counter.  Increment it every loop, if == 15, reset to 0 and dump.  Much cleaner as what you have now will not really do that at all."}, {"owner": {"reputation": 77, "user_id": 6906043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1MD9D.jpg?s=128&g=1", "display_name": "Jaime Perez", "link": "https://stackoverflow.com/users/6906043/jaime-perez"}, "edited": false, "score": 0, "creation_date": 1493318788, "post_id": 43642533, "comment_id": 74378334, "body": "I got it to work! Actually ended up splitting a couple of the repeating code into separate subroutines for purposes of cleaning up and readability. It works fine now! appreciate the help"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "reply_to_user": {"reputation": 77, "user_id": 6906043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1MD9D.jpg?s=128&g=1", "display_name": "Jaime Perez", "link": "https://stackoverflow.com/users/6906043/jaime-perez"}, "edited": false, "score": 0, "creation_date": 1493325821, "post_id": 43642533, "comment_id": 74382051, "body": "Glad to hear it!"}], "tags": [], "owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "is_accepted": true, "score": 1, "last_activity_date": 1493233415, "creation_date": 1493233415, "answer_id": 43642533, "question_id": 43641294, "link": "https://stackoverflow.com/questions/43641294/c-8051-array-output/43642533#43642533", "title": "C - 8051 Array output", "body": "<p>I may not find your issue, but let me put some comments on what I see in your code for you to ponder.  Comments will appears above code in question:</p>\n\n<pre><code>void read_256_address(void)\n{\n    char SFRPAGE_SAVE=SFRPAGE;\n    SFRPAGE=CONFIG_PAGE;\n\n    RFLAG=0;\n</code></pre>\n\n<p>Assuming address sum is at least 32-bits in size?</p>\n\n<pre><code>    address_sum=((unsigned long)address_byte3&lt;&lt;16)\n                +((unsigned long)address_byte2&lt;&lt;8)\n                +((unsigned long)address_byte1);\n</code></pre>\n\n<p>If <code>chip_bytes</code> is unsigned, the 0 check is not needed</p>\n\n<pre><code>    if(chip_byte&gt;=0 &amp;&amp; chip_byte&lt;=76)\n    {\n        Port4=chip_byte;\n        read_address_loop();\n    }\n</code></pre>\n\n<p>I pray that <code>RFLAG</code> is <code>volatile</code> here otherwise chaos.  On a threaded system, a yield or the like would be good here instead of spinning.</p>\n\n<pre><code>    while(RFLAG==0){if(RFLAG==1){break;}}\n\n    SFRPAGE=SFRPAGE_SAVE;\n}\n\nvoid read_address_loop(void)\n{\n</code></pre>\n\n<p>Very magical 14 and i as a non-index is also not a good idea (oh, I see - used later for indexing.)</p>\n\n<pre><code>    unsigned long int i=14;\n\n    char SFRPAGE_SAVE=SFRPAGE;\n    SFRPAGE=CONFIG_PAGE;\n\n    RFLAG=0;\n\n    if(command_byte==0x82)\n    {\n        write_P4();\n</code></pre>\n\n<p>If address_sum is close to the size of its type, this could loop forever.</p>\n\n<pre><code>        for(next_address=address_sum;\n            next_address&lt;(address_sum+256);\n            next_address++)\n        {\n            output_address();\n            read_op();\n            hex_data=data_read;\n            HEXtoASC();\n</code></pre>\n\n<p>Consider placing the ++ on the i in the indexing</p>\n\n<pre><code>            data_buffer[i]=msb;i++;\n            data_buffer[i]=lsb;i++;\n</code></pre>\n\n<p>A space for the 3rd byte?  That is interesting - guessing this is the part where you are getting the <code>NUL</code> values instead.  Perhaps double check your converter to see if it is helping you by converting spaces to 0.</p>\n\n<pre><code>            data_buffer[i]=' ';i++;\n</code></pre>\n\n<p>Consider using <code>next_address &amp; 0x0f</code> if you are checking for 0 in low nibble, the plus 15 is very strange.  Do you perhaps mean plus 16?</p>\n\n<pre><code>            if(next_address+=15){format_data_dump();}\n        }\n   }\n\nvoid output_data(void)\n{\n    unsigned char i;\n</code></pre>\n\n<p>Magical 65 size again - consider sizeof() the array or checking for end via another method.</p>\n\n<pre><code>    for(i=0;i&lt;65;i++)\n    {\n        send_byte(data_buffer[i]);\n    }\n}\n</code></pre>\n\n<p>Of all the stuff I call out above, the if check with the +=15 is the area that seems the most troubling.  Again, I don't know if anything of what I have catches your issue, but it is worth looking at them deeper to be sure.</p>\n"}], "owner": {"reputation": 77, "user_id": 6906043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1MD9D.jpg?s=128&g=1", "display_name": "Jaime Perez", "link": "https://stackoverflow.com/users/6906043/jaime-perez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 1, "accepted_answer_id": 43642533, "answer_count": 1, "score": 1, "last_activity_date": 1493233415, "creation_date": 1493229240, "last_edit_date": 1493231759, "question_id": 43641294, "link": "https://stackoverflow.com/questions/43641294/c-8051-array-output", "title": "C - 8051 Array output", "body": "<p>I am getting a very trivial but yet seemingly hard bug in my code to fix. Long story short, I have a an array that gets filled with information as I am reading values of data from a chip. This array called <code>data_buffer</code> then sends every character into the UART in a sort of hex file format for debugging purposes. </p>\n\n<p>When I type the command and the characters are output into the terminal the array is spitting out null characters for spaces in which I specified there be data. </p>\n\n<p>The code is as follows and I will try my best to put it in sequential order:</p>\n\n<pre><code>void read_256_address(void)\n{\n    char SFRPAGE_SAVE=SFRPAGE;\n    SFRPAGE=CONFIG_PAGE;\n\n    RFLAG=0;\n\n    address_sum=((unsigned long)address_byte3&lt;&lt;16)\n                +((unsigned long)address_byte2&lt;&lt;8)\n                +((unsigned long)address_byte1);\n\n    if(chip_byte&gt;=0 &amp;&amp; chip_byte&lt;=76)\n    {\n        Port4=chip_byte;\n        read_address_loop();\n    }\n\n    while(RFLAG==0){if(RFLAG==1){break;}}\n\n    SFRPAGE=SFRPAGE_SAVE;\n}\n\nvoid read_address_loop(void)\n{\n    unsigned long int i=14;\n\n    char SFRPAGE_SAVE=SFRPAGE;\n    SFRPAGE=CONFIG_PAGE;\n\n    RFLAG=0;\n\n    if(command_byte==0x82)\n    {\n        write_P4();\n  for(next_address=address_sum;next_address&lt;(address_sum+256);next_address++)\n        {\n            output_address();\n            read_op();\n            hex_data=data_read;\n            HEXtoASC();\n            data_buffer[i]=msb;i++;\n            data_buffer[i]=lsb;i++;\n            data_buffer[i]=' ';i++;\n            if(next_address+=15){format_data_dump();}\n        }\n   }\n\nvoid output_data(void)\n{\n    unsigned char i;\n\n    for(i=0;i&lt;65;i++)\n    {\n        send_byte(data_buffer[i]);\n    }\n}\n</code></pre>\n\n<p>I apologize for the indention on the <code>for loop</code> but that was due to formatting. It should be aligned with the <code>write_P4();</code> code above it. When the code above runs it outputs the format wanted but not the values, such as:</p>\n\n<pre><code>M82 1B 104560 FF ****null char for remaining indices**** 0x0D 0x0A\nM82 1B 104560 FF FF ****null char for remaining indices**** 0x0D 0x0A\nM82 1B 104560 FF FF FF ****null char for remaining indices**** 0x0D 0x0A\n</code></pre>\n\n<p>What I am expecting to see is below:</p>\n\n<pre><code>M82 1B 1040560 FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF 0x0D 0x0A\nM82 1B 1040570 FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF 0x0D 0x0A\n.\n.\n.\nM82 1B 1040650 FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF 0x0D 0x0A\n</code></pre>\n\n<p>Could someone please give me some insight as to why this may be happening? It seems like the buffer is increasing in length after each iteration of the entire buffer not the same length every time.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 2, "creation_date": 1493228600, "post_id": 43641084, "comment_id": 74330498, "body": "Does this code work but you&#39;re looking for a code review, or is it giving an error or wrong answer?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493231146, "post_id": 43641084, "comment_id": 74332004, "body": "Note <a href=\"http://stackoverflow.com/questions/204476/\">What should <code>main()</code> return in C and C++</a>."}, {"owner": {"reputation": 2145, "user_id": 2256028, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7e1699a9b80e21f10598aef5fb36dc2e?s=128&d=identicon&r=PG", "display_name": "dckuehn", "link": "https://stackoverflow.com/users/2256028/dckuehn"}, "edited": false, "score": 0, "creation_date": 1493232963, "post_id": 43641084, "comment_id": 74333046, "body": "If there is an error please include it.  IF there is no error, please include what the ACTUAL output is for an example that does not work."}, {"owner": {"reputation": 1, "user_id": 7927052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2fe352ce57ff2aa1c0e69ad0ebc5336?s=128&d=identicon&r=PG&f=1", "display_name": "roi", "link": "https://stackoverflow.com/users/7927052/roi"}, "edited": false, "score": 0, "creation_date": 1493276090, "post_id": 43641084, "comment_id": 74348888, "body": "the output is ok i just need to make the code more efficiunt"}], "answers": [{"tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1493230715, "last_edit_date": 1493230715, "creation_date": 1493230320, "answer_id": 43641616, "question_id": 43641084, "link": "https://stackoverflow.com/questions/43641084/how-to-calculate-the-number-of-combinations-more-efficiently/43641616#43641616", "title": "How to calculate the number of combinations more efficiently?", "body": "<p>Brute force:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n/* coin_types must be sorted from smallest to largest */\nint count_coin_combinations(const unsigned *coin_types, unsigned num_coin_types, unsigned n) {\n   if (n == 0)\n      return 1;\n\n   int count = 0;\n   while (num_coin_types &amp;&amp; *coin_types &lt;= n) {\n      count += count_coin_combinations(coin_types, num_coin_types, n-*coin_types);\n      ++coin_types;\n      --num_coin_types;\n   }\n\n   return count;\n}\n\nint main() {\n   const unsigned coin_types[] = { 1, 2, 5, 10, 20, 50, 100, 200 };\n   const unsigned num_coin_types = sizeof(coin_types)/sizeof(*coin_types);\n\n   unsigned n = 5;\n   unsigned count = count_coin_combinations(coin_types, num_coin_types, n);\n   printf(\"%d\\n\", count);\n\n   return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ gcc -Wall -Wextra -pedantic -std=c99 -o a a.c &amp;&amp; a\n4\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7927052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2fe352ce57ff2aa1c0e69ad0ebc5336?s=128&d=identicon&r=PG&f=1", "display_name": "roi", "link": "https://stackoverflow.com/users/7927052/roi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1493231082, "creation_date": 1493228445, "last_edit_date": 1493231082, "question_id": 43641084, "link": "https://stackoverflow.com/questions/43641084/how-to-calculate-the-number-of-combinations-more-efficiently", "title": "How to calculate the number of combinations more efficiently?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nvoid main()\n{\n    int count = 0, amount, temp, n_200, n_100, n_50, n_20, n_10, n_5, n_2, n_1;    /*count=check how much posibiliti you have,amount=the amount that the user enter   ,n_200=bill of 200 nis ,n_100=bill of 100 nis.... n_1=1 nis coin.*/\n    double min = 500, max = 0, current = 0;    \n//part 2 of the job check the max and min whight...\n\n    while (1) {                         //the progrem run all the time\n        printf_s(\"What is the amount that you like to check? (or press '0' to exit)\\n\");\n        scanf_s(\"%d\", &amp;amount);\n        temp = amount;\n        if (amount == 0)\n//if the user click 0 the lop is finish and the progrem exit\n            return;\n\n        for (n_200 = 0; amount - n_200 &gt;= 0; n_200 += 200)    \n//first lop the duplicate of 200\n        {\n\n            for (n_100 = 0; amount - n_100 &gt;= 0; n_100 += 100)   \n//secend lop the duplicate of 100\n            {\n\n\n                for (n_50 = 0; amount - n_50 &gt;= 0; n_50 += 50)     \n//thired lop the duplicate of 50\n                {\n\n\n                    for (n_20 = 0; (amount - n_20) / 20 &gt;= 0; n_20 += 20)     //fourth lop the duplicate of 20\n                    {\n\n\n                        for (n_10 = 0; amount - n_10 &gt;= 0; n_10 += 10)   \n//fifth lop the duplicate of 10\n                        {\n\n\n                            for (n_5 = 0; amount - n_5 &gt;= 0; n_5 += 5)     \n//six lop the duplicate of 5  \n                            {\n\n\n                                for (n_2 = 0; amount - n_2 &gt;= 0; n_2 += 2)    //seventh lop the duplicate of 2  \n                                {\n\n\n                                    for (n_1 = 0; amount - n_1 &gt;= 0; n_1 += 1)  //eighth lop the duplicate of 1  \n                                    {\n                                        temp = amount - n_200 - n_100 - n_50 - n_20 - n_10 - n_5 - n_2 - n_1;\n\n\n                                        if (temp == 0) {  /////if temp==0 all the money is returend,the counter (posibiliti) is grow by one and the loop start again this time with other posibiliti.\n                                            count += 1;\n\n                                            current = current + (n_200 / 200 + n_100 / 100 + n_50 / 50 + n_20 / 20)*0.001 + (n_10 / 10)*0.007 + (n_5 / 5)*0.0082 + (n_2 / 2)*0.0057 + n_1*0.004;  \n// In each variation we check the whight (curent) \n                                            if (current &gt; max)   \n//if the current is bigerr the max \n                                                max = current;   \n//the progrem save it as max\n                                            if (current &lt; min)   \n//if the current is smaller the min\n                                                min = current;   \n//the progrem save it as min`enter code here`\n\n\n                                            temp = amount;\n                                            current = 0;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        printf_s(\"\\nThe number of possibilities is: %d.\\n\", count);\n        printf_s(\"The maximum weight is %.4lf [kg]\\n\", max);\n        printf_s(\"The minimmum weight is %.4lf [kg]\\n\\n\", min);\n        count = 0;                 //to start again we rest the deta the we get.\n        min = 500, max = 0, current = 0;\n    }\n}\n</code></pre>\n\n<p>I need to calculate how many combinations are there for the sum of 1, 2, 5, 10, 20, 50, 100, 200 to add up to a given number by the user.\nFor example, if the user enters 5, the combinations can be:</p>\n\n<pre><code>1+1+1+1+1\n1+1+1+2\n2+2+1\n5\n</code></pre>\n"}, {"tags": ["c", "do-while"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493229094, "post_id": 43641009, "comment_id": 74330733, "body": "&quot;This code works fine&quot; and <code>while (feof(fp) == 0) { ...   c = getc(fp);                  printf(&quot;... is %c\\n&quot;, c);</code> is suspect as that prints a character with the value of <code>(unsigned char) EOF</code>"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1493229243, "post_id": 43641269, "comment_id": 74330807, "body": "&quot;C does not have a separate boolean data type.&quot;  Disagree since C99, there is <code>_Bool</code> which the spec calls a <i>boolean type</i>, an object large enough to store the values 0 and 1."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493229451, "post_id": 43641269, "comment_id": 74330928, "body": "Ok, @chux, I hope my revised language is now satisfactorily precise."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493229619, "post_id": 43641269, "comment_id": 74331031, "body": "The boolean, <code>_Bool</code> issue is tangential and it does not come into play here.  <code>while (expression )</code> simple compares the <i>expression</i> against 0."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493234037, "post_id": 43641269, "comment_id": 74333707, "body": "And the expression in question is one involving the <i>logical negation</i> operator, @chux, which is at least inspired by boolean logic.  Moreover, the reason and or meaning of applying that operator to the return value of <code>fseek()</code>, an <code>int</code>, is one of the OP&#39;s express points of confusion.  This is where the boolean issue is important (not <code>_Bool</code> in particular, I agree, but <i>you</i> brought that up)."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1493229271, "last_edit_date": 1493229271, "creation_date": 1493229139, "answer_id": 43641269, "question_id": 43641009, "link": "https://stackoverflow.com/questions/43641009/cant-understand-how-the-do-while-loop-in-the-end-is-working/43641269#43641269", "title": "Can&#39;t understand how the do while loop in the end is working", "body": "<p>C does not have a separate type family for boolean values.  It uses integers -- 0 means <code>false</code>, and anything else means <code>true</code>.  The <code>_Bool</code> type introduced in C99 is an integer type that can represent these values, and other integer types can be used freely to represent boolean values.  The logical operator <code>!</code> just swaps these; <code>!x</code> is equivalent to <code>(x == 0) ? 1 : 0</code>, which is itself equivalent to just <code>(x == 0)</code>.</p>\n\n<p>Like many C functions <code>fseek()</code>'s return value indicates its success or failure.  It is common that negative values represent failure, and non-negative ones success; details vary a bit, and <code>fseek()</code> specifically uses <code>0</code> for success and <code>-1</code> for failure.</p>\n\n<p>The predicate of the <code>while</code> loop in question ...</p>\n\n<pre><code>while(!fseek(fp, -2L, 1))\n</code></pre>\n\n<p>... can thus be interpreted as \"call <code>fseek(fp, -2L, 1)</code> and perform another iteration if it succeeds, as indicated by returning 0\".  The call attempts to move backward past the character just read (and printed), and onward past one further character, with the effect, if it succeeds, that the next character read will be the one immediately preceding the previous character read in the file.</p>\n"}, {"tags": [], "owner": {"reputation": 1341, "user_id": 4524618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e1ca7e81266dc3e8f724a4864b3d90e?s=128&d=identicon&r=PG", "display_name": "Sniper", "link": "https://stackoverflow.com/users/4524618/sniper"}, "is_accepted": true, "score": 2, "last_activity_date": 1493229163, "creation_date": 1493229163, "answer_id": 43641278, "question_id": 43641009, "link": "https://stackoverflow.com/questions/43641009/cant-understand-how-the-do-while-loop-in-the-end-is-working/43641278#43641278", "title": "Can&#39;t understand how the do while loop in the end is working", "body": "<p><a href=\"http://www.cplusplus.com/reference/cstdio/fseek/\" rel=\"nofollow noreferrer\">fseek</a> returns <code>0</code> on successful and a non-zero value on unsuccessful.</p>\n\n<blockquote>\n  <p>Return Value</p>\n</blockquote>\n\n<pre><code>If successful, the function returns zero.\nOtherwise, it returns non-zero value.\n</code></pre>\n\n<p>So when it is successful it will return <code>0</code> and you would want to continue when it does. Hence the <code>not</code></p>\n"}], "owner": {"reputation": 157, "user_id": 7868053, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-Bl_9eC4Kl-M/AAAAAAAAAAI/AAAAAAAAADM/NwBJVuvzjl8/photo.jpg?sz=128", "display_name": "daljinder singh", "link": "https://stackoverflow.com/users/7868053/daljinder-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 43641278, "answer_count": 2, "score": 0, "last_activity_date": 1493229271, "creation_date": 1493228205, "last_edit_date": 1493228368, "question_id": 43641009, "link": "https://stackoverflow.com/questions/43641009/cant-understand-how-the-do-while-loop-in-the-end-is-working", "title": "Can&#39;t understand how the do while loop in the end is working", "body": "<p>I am trying but just can't figure out how the last do-while loop in the program is working.\nIt is supposed to print the characters of the file from the end to the first position and terminate when it crosses the bounds of the file.\nThe code i am showing is working, but i am not getting how.\nThe while condition is what i can't seem to understand, why the not symbol ! is used with the condition in while.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n        long n, k;\n        char c;\n        FILE *fp;\n        fp = fopen(\"RANDOM\", \"w\");\n        while ((c = getchar()) != EOF) {\n                putc(c, fp);\n        }\n        n = ftell(fp);\n        printf(\"\\nNo. of characters entered by the user is : %ld\\n\", n);\n        fclose(fp);\n        fp = fopen(\"RANDOM\", \"r\");\n        k = 0L;\n        while (feof(fp) == 0) {\n                fseek(fp, k, 0);\n                n = ftell(fp);\n                c = getc(fp);\n                printf(\"The character at %ld position is %c\\n\", n, c);\n                k += 5L;\n        }\n        fseek(fp, -1L, 2);\n        do {\n                printf(\"%c\", getc(fp));\n        } while(!fseek(fp, -2L, 1));\n        putchar('\\n');\n}\n</code></pre>\n\n<p>This code works fine, just can't understand why, not \"!\" of the condition in the last while is used because i thought of using the same condition but without the not part. </p>\n"}, {"tags": ["c", "switch-statement"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1493228223, "post_id": 43640944, "comment_id": 74330290, "body": "Indentation doesn&#39;t matter (for the compiler) in C, so asking for &quot;proper&quot; indentation is essentially asking about personal preferences"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1497141314, "post_id": 43640944, "comment_id": 75953598, "body": "You might want to look at the <a href=\"https://gcc.gnu.org/onlinedocs/gcc-7.1.0/gcc/Warning-Options.html#Warning-Options\" rel=\"nofollow noreferrer\"><code>-Wimplicit-fallthrough</code></a> option added to GCC 7.1 \u2014 you&#39;ll have to search for it.  Or then again, maybe that is beyond what you&#39;re ready to deal with now, but it may be useful at some time in the future.  Note that in C, the flow of control continues between <code>case</code> labels unless there&#39;s a <code>break</code> (or <code>continue</code> if there&#39;s a surrounding loop, or <code>return</code>, or <code>goto</code>, or any other transfer of control \u2014 <code>longjmp()</code>, <code>exit()</code>, or any other &#39;no return&#39; function)."}], "answers": [{"tags": [], "owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "is_accepted": true, "score": 0, "last_activity_date": 1493290429, "last_edit_date": 1493290429, "creation_date": 1493228313, "answer_id": 43641045, "question_id": 43640944, "link": "https://stackoverflow.com/questions/43640944/switch-statement-line-after-break-and-proper-indentation/43641045#43641045", "title": "Switch Statement - line after break and proper indentation", "body": "<p>We'll format the code to be more readable, and put comments in explaining:</p>\n\n<pre><code>int i, j = 0;\n\nfor(i = 0; i &lt; N; i++){\n   switch (i) {\n      case 0:\n      case 1:           // Take this case if i is 0 or 1\n          if (i &lt; 1)\n              break;    // if i &lt; 1 (in other words, it's 0), then break out of switch\n          i = 123;      // if i wasn't &lt; 1, then set i to 123 AND fall through to next case\n      case 456:         // take this case if i is (originally) 456\n                        //    (prior statement still falls through here!)\n          j = 666;      // this will happen if either i was 456, or if i was 1\n                        //    and then set to 123\n          break;\n      default:\n          j = 777;\n   }\n\n   if (j == 666)\n       break;    // break out of for loop if i is 666\n}\n\nprintf(\"%i %i\\n\", i, j);\n</code></pre>\n\n<p>Adding a block around the single statement in the <code>if</code> clause doesn't change it's behavior. So in this case, this:</p>\n\n<pre><code>if (i &lt; 1)\n    break;\n</code></pre>\n\n<p>Has the same behavior as this:</p>\n\n<pre><code>if (i &lt; 1) {\n    break;\n}\n</code></pre>\n\n<p>The <code>break</code> does not apply to the <code>if</code> block. It still applies to the outer <code>switch</code>.</p>\n\n<p>Simply, the <code>switch</code> just creates a jump table for values of <code>i</code>. A <code>break</code> within the cases of the switch will exit the \"bottom\" of the switch. If you get to the end of a <code>case</code> and there's no break, then the code continues to execute through the next <code>case</code> or <code>default</code> if there is one.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1493228699, "last_edit_date": 1493228699, "creation_date": 1493228337, "answer_id": 43641051, "question_id": 43640944, "link": "https://stackoverflow.com/questions/43640944/switch-statement-line-after-break-and-proper-indentation/43641051#43641051", "title": "Switch Statement - line after break and proper indentation", "body": "<p>I believe you're confused between the \"indentation\" with the \"expected separation\" of case statements.</p>\n\n<p>The <code>case</code> statements are essentially just labels. Unless separated through <code>break</code> statement, they act as fall-through model.</p>\n\n<p>So, in your case, <code>i</code> does not need to be <code>456</code> to \"trigger\" <code>case 456:</code> and related statements. A value of <code>1</code> will have just the same effect.</p>\n\n<blockquote>\n  <p><em>However, I do not understand the <code>i=123</code> after the break in <code>case 1</code>.</em></p>\n</blockquote>\n\n<p>Well, that is a conditional <code>break</code> statement. The <code>if</code> condition will be hit in both the cases of <code>i</code> value being <code>0</code> or <code>1</code>. In case of <code>i</code> having a value <code>0</code>, the condition check will be success and it will break out of the <code>switch</code> statements. Otherwise, it will continue and the assignment statement will be executed.</p>\n\n<p>So, as long as the <code>N</code> (other loop condition) is <code>&gt;=1</code>, <code>i</code> will be set to <code>123</code> and <code>j</code> to <code>666</code>.</p>\n\n<blockquote>\n  <p><em>...but I don't see how the value of <code>i</code> gets to <code>456</code> in order for <code>case 456</code> to be triggered.</em></p>\n</blockquote>\n\n<p>It need not, it's a fall-through action.</p>\n\n<hr>\n\n<p>Regarding the actual importance of \"indentation\" part, well, compiler does not care about indentation, we, humans to. Proper indentation makes the code readable and maintainable, thus making them valuable.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1493228358, "creation_date": 1493228358, "answer_id": 43641057, "question_id": 43640944, "link": "https://stackoverflow.com/questions/43640944/switch-statement-line-after-break-and-proper-indentation/43641057#43641057", "title": "Switch Statement - line after break and proper indentation", "body": "<p>Let's format this code  more properly:</p>\n\n<pre><code>int i,j=0;\nfor(i=0;i&lt;N;i++){\n   switch(i){\n   case 0:\n   case 1: \n      if(i&lt;1) \n         break; \n      i=123;\n   case 456: \n      j=666; \n      break;\n   default: \n      j=777;\n   }\n   if(j==666) break;\n}\nprintf(\"%i %i\\n\",i,j);\n</code></pre>\n\n<p>When <code>i</code> is 1 the <code>if (i&lt;1)</code> condition evaluates to false.  So the <code>break</code> does not run, and the statement after the <code>if</code> (namely <code>i=123</code>) is executed.  It then falls through to <code>case 456</code> which sets <code>j</code> to 666 and breaks out of the <code>switch</code>.  At this point it reaches  <code>if (j==666)</code> which evaluates to true and breaks out of the <code>for</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "is_accepted": false, "score": 0, "last_activity_date": 1497141820, "last_edit_date": 1497141820, "creation_date": 1493233657, "answer_id": 43642602, "question_id": 43640944, "link": "https://stackoverflow.com/questions/43640944/switch-statement-line-after-break-and-proper-indentation/43642602#43642602", "title": "Switch Statement - line after break and proper indentation", "body": "<p>I simplified your code to explain how the <code>switch</code> works.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    int i;\n    int N=5;\n\n    for(i=0;i&lt;N;i++){\n       printf(\"i: %d\\n\",i);\n       switch(i){\n       case 0:\n       case 1: \n          if(i&lt;1){\n             printf(\"in case 1 in if when case: 0 \\n\"); \n             break;\n          } \n          else{   \n            printf(\"in case 1 after if --&gt; in else\\n\");\n          }\n       case 3: \n          printf(\"in case 3\\n\");\n          break;\n       default: \n          printf(\"default : \");\n          printf(\"i: %d\\n\",i);\n       }\n\n       if(i==4){\n            printf(\"after switch\\n\");\n            break;\n       }\n    }\n\n    printf(\"after for\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>Program output : <a href=\"https://i.stack.imgur.com/pDJVo.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/pDJVo.png</a></p>\n\n<p>Simply in <code>switch</code> block when <code>case 0</code> is executed, program control goes to\n<code>case 1</code> as you do not enter any expression.</p>\n"}], "owner": {"reputation": 13, "user_id": 7926980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2080079a73d3743b3eaf7b6961741505?s=128&d=identicon&r=PG&f=1", "display_name": "Jia Yi", "link": "https://stackoverflow.com/users/7926980/jia-yi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 43641045, "answer_count": 4, "score": 1, "last_activity_date": 1497141820, "creation_date": 1493227944, "last_edit_date": 1493228846, "question_id": 43640944, "link": "https://stackoverflow.com/questions/43640944/switch-statement-line-after-break-and-proper-indentation", "title": "Switch Statement - line after break and proper indentation", "body": "<pre><code>    int i,j=0;\n    for(i=0;i&lt;N;i++){\n       switch(i){\n          case 0:\n          case 1: if(i&lt;1) break; i=123;\n          case 456: j=666; break;\n          default: j=777;\n       }\n       if(j==666) break;\n    }\n    printf(\"%i %i\\n\",i,j);\n</code></pre>\n\n<p>I would like to ask about the proper indentation for the switch statement in this case. From what I understand,</p>\n\n<pre><code>    case 0:\n    case 1: if(i&lt;1) break; i=123;\n</code></pre>\n\n<p>is equivalent to </p>\n\n<pre><code>    case 0: case 1:{\n       if(i&lt;1){\n          break;\n       }\n       i=123;\n    } \n</code></pre>\n\n<p>However, I do not understand the <code>i=123</code> after the break in <code>case 1</code>. I have also tried playing with different <code>N</code> values and found that as long as <code>N&gt;=2</code> I will always get the output of </p>\n\n<blockquote>\n  <p>123 666</p>\n</blockquote>\n\n<p>but I don't see how the value of <code>i</code> gets to <code>456</code> in order for <code>case 456</code> to be triggered.</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 4, "creation_date": 1493228412, "post_id": 43640930, "comment_id": 74330382, "body": "What did you see when you used a debugger to analyze your code&#39;s behavior?"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1493228458, "post_id": 43640930, "comment_id": 74330422, "body": "I suggest that you use a debugger or add printf() statements to find which line in your code causes the crash. Learning to debug code is just as important as learning to write code."}, {"owner": {"reputation": 141, "user_id": 7787417, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1295829987169442/picture?type=large", "display_name": "Omer Guttman", "link": "https://stackoverflow.com/users/7787417/omer-guttman"}, "edited": false, "score": 0, "creation_date": 1493228561, "post_id": 43640930, "comment_id": 74330476, "body": "the problem is the print in the row of printf function, im guessing its trying to reach and print a something without value but i dont really understand how"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493228927, "post_id": 43640930, "comment_id": 74330658, "body": "(1) You are using an uninitialized node.  So Remove <code>head=malloc(sizeof(node));     if (head == NULL)     {         return 1;     }</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1493229053, "post_id": 43640930, "comment_id": 74330718, "body": "(2) result of <code>fgets</code> contains entered newline."}], "answers": [{"tags": [], "owner": {"reputation": 734, "user_id": 6864400, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-d-5fGoRO7dg/AAAAAAAAAAI/AAAAAAAAAUU/9fMrJJAQFaE/photo.jpg?sz=128", "display_name": "Simone Cifani", "link": "https://stackoverflow.com/users/6864400/simone-cifani"}, "is_accepted": true, "score": 2, "last_activity_date": 1493229499, "creation_date": 1493229499, "answer_id": 43641377, "question_id": 43640930, "link": "https://stackoverflow.com/questions/43640930/understanding-linked-lists-in-c/43641377#43641377", "title": "Understanding linked lists in C", "body": "<p>When you do a </p>\n\n<pre><code>ptr = malloc(sizeof(node)); \n</code></pre>\n\n<p>the memory is allocated but not initialized. This will cause the next pointer of the node struct to point to something undefined. Then, when you use it in the print function, the program crashes. <br/>\nPut a </p>\n\n<pre><code>memset(ptr, 0, sizeof(node)) \n</code></pre>\n\n<p>after the malloc or explicitly initialize the next pointer to NULL.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1497144477, "post_id": 43643265, "comment_id": 75954006, "body": "There isn&#39;t very much explanation of what you changed and why you changed it.  Almost always, a good answer will provide an explanation of the changes as well as the changed code."}], "tags": [], "owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "is_accepted": false, "score": 0, "last_activity_date": 1493235971, "creation_date": 1493235971, "answer_id": 43643265, "question_id": 43640930, "link": "https://stackoverflow.com/questions/43640930/understanding-linked-lists-in-c/43643265#43643265", "title": "Understanding linked lists in C", "body": "<p>I change your code to :</p>\n\n<pre><code>#include &lt;stdlib.h&gt; \n#include &lt;stdio.h&gt; \n#include &lt;string.h&gt; \n\nstruct node\n{\n    char* day;\n    char* month;\n    char* year;\n    struct node* next;\n};\ntypedef struct node node;\n\nvoid print(node *head){\n    node *temp = head;\n\n    while(temp){\n        printf(\"day:%s\\nmonth:%s\\nyear:%s\\n\",temp-&gt;day,temp-&gt;month,temp-&gt;year);\n        temp=temp-&gt;next;\n    }\n\n}\nnode* add(node* head)\n{\n    node * new_node;\n    int n;\n    char temp[25];\n    new_node = malloc(sizeof(node));\n    printf(\"day:\\n\");\n    fgets(temp,sizeof(temp),stdin);\n    n=strlen(temp);\n    new_node-&gt;day=malloc(n+1);\n    strcpy(new_node-&gt;day,temp);\n\n    printf(\"Month:\\n\");\n    fgets(temp,sizeof(temp),stdin);\n    n=strlen(temp);\n    new_node-&gt;month=malloc(n+1);\n    strcpy(new_node-&gt;month,temp);\n    printf(\"Year:\\n\");\n    fgets(temp,sizeof(temp),stdin);\n    n=strlen(temp);\n    new_node-&gt;year=malloc(n+1);\n    strcpy(new_node-&gt;year,temp);\n\n   /// new_node-&gt;next=head;///\n\n    printf(\"\\n\\n\\n\");\n    //printf(\"%s%s%s \\n\",new_node-&gt;day,new_node-&gt;month,new_node-&gt;year);\n\n    return new_node;\n}\nint main(int argc,char* argv[])\n{\n\n    node* head=NULL;\n    head=malloc(sizeof(node));\n    if (head == NULL)\n    {\n        printf(\"NULL\\n\");///cant allocate memory\n    }\n    printf(\"this\\n\");\n    head=add(head); \n    print(head);\n    return 100;\n}\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 7787417, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1295829987169442/picture?type=large", "display_name": "Omer Guttman", "link": "https://stackoverflow.com/users/7787417/omer-guttman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 43641377, "answer_count": 2, "score": 1, "last_activity_date": 1497144398, "creation_date": 1493227910, "last_edit_date": 1497144398, "question_id": 43640930, "link": "https://stackoverflow.com/questions/43640930/understanding-linked-lists-in-c", "title": "Understanding linked lists in C", "body": "<p>I have recently started to learn about linked lists and I was wondering 2 things about my code:</p>\n\n<ol>\n<li><p>Why does the program crash?</p></li>\n<li><p>Why does it type every single member with a newline <code>\\n</code> at the end?</p></li>\n</ol>\n\n<p>This is my code. All I was trying to do is add one member and print it.</p>\n\n<pre><code>struct node\n{\n    char* day;\n    char* month;\n    char* year;\n    struct node* next;\n};\ntypedef struct node node;\n\nvoid print(node* head){\n    node* temp=head;\n    while(temp != NULL){\n    printf(\"%s %s %s\",temp-&gt;day,temp-&gt;month,temp-&gt;year);\n    temp=temp-&gt;next;\n    }\n}\n\nnode* add(node* head)\n{\n    node * new_node;\n    int n;\n    char temp[25];\n    new_node = malloc(sizeof(node));\n\n    fgets(temp,sizeof(temp),stdin);\n    n=strlen(temp);\n    new_node-&gt;day=malloc(n+1);\n    strcpy(new_node-&gt;day,temp);\n\n    fgets(temp,sizeof(temp),stdin);\n    n=strlen(temp);\n    new_node-&gt;month=malloc(n+1);\n    strcpy(new_node-&gt;month,temp);\n\n    fgets(temp,sizeof(temp),stdin);\n    n=strlen(temp);\n    new_node-&gt;year=malloc(n+1);\n    strcpy(new_node-&gt;year,temp);\n\n    new_node-&gt;next=head;\n    return new_node;\n}\n\nint main(void)\n{\n    node* head=NULL;\n    head=malloc(sizeof(node));\n    if (head == NULL)\n    {\n        return 1;\n    }\n    head=add(head); \n    print(head);\n    return 100;\n}\n</code></pre>\n\n<p>Can anyone point out what I am doing wrong and what I could have done better?</p>\n"}, {"tags": ["c", "embedded", "microcontroller", "stm32", "stm32ldiscovery"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1493226292, "post_id": 43640408, "comment_id": 74329116, "body": "Way too broad.."}], "answers": [{"tags": [], "owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "is_accepted": true, "score": 1, "last_activity_date": 1493231543, "creation_date": 1493231543, "answer_id": 43641984, "question_id": 43640408, "link": "https://stackoverflow.com/questions/43640408/c-code-modification-from-stm32f-to-stm32l/43641984#43641984", "title": "C code modification from stm32F to stm32L", "body": "<p>These are two different chips.  Just because they are from ST just because they are ARM based, they are not the same chip.  for starters the stm32f4 is a cortex-m4 the stm32l might not be, 99.9% of your code wont care, just some assembly might.  if the stm32l is a cortex-m0 then you have far fewer instructions so the assembly will matter if it is a cortex-m3 then it wont.</p>\n\n<p>The real isssue is peripherals not that this is two st chips not that this is two arm chips, the peripherals can/will vary.  ST has a number of chips that use the same uart or same gpio or other, but they have more than one uart they use for STM32 chips, and more than one GPIO.  And they mix and match as they make new chips, so if you want to port from one to the other you need to go peripheral by peripheral reading the new and old docs to see what if anything changed.</p>\n\n<p>Sounds like you are using a library so the tool may know from the chip you have chosen what peripherals you have and which library you need, so it might not be finding them because for that chip that peripheral and thus that function and those defines do not apply.  Take it one perpheral at a time and port between chips.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10399229, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XRbt4vU_7ak/AAAAAAAAAAI/AAAAAAAADDE/Y2Rmue7Nk6g/photo.jpg?sz=128", "display_name": "Rz Az", "link": "https://stackoverflow.com/users/10399229/rz-az"}, "is_accepted": false, "score": 0, "last_activity_date": 1537581294, "creation_date": 1537581294, "answer_id": 52452823, "question_id": 43640408, "link": "https://stackoverflow.com/questions/43640408/c-code-modification-from-stm32f-to-stm32l/52452823#52452823", "title": "C code modification from stm32F to stm32L", "body": "<p>stm32 (L) serise incloud EEPROM which are important when they go to sleep mode and want to recover variables after wakup . so make sure application is running in sleep modes need to save data somewhere. so if you use STM (F) series care needs to attache a external EEPROM </p>\n"}], "owner": {"reputation": 11, "user_id": 7908492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fb03287cb8581527ee6612f0307a47a5?s=128&d=identicon&r=PG&f=1", "display_name": "lightworks", "link": "https://stackoverflow.com/users/7908492/lightworks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 949, "favorite_count": 0, "accepted_answer_id": 43641984, "answer_count": 2, "score": -1, "last_activity_date": 1537581294, "creation_date": 1493226147, "last_edit_date": 1493229173, "question_id": 43640408, "link": "https://stackoverflow.com/questions/43640408/c-code-modification-from-stm32f-to-stm32l", "title": "C code modification from stm32F to stm32L", "body": "<p>I'm trying to learn and master embedded C, so I was just gonna test a code that I found on Github, which is built for STM32F4 discovery board. The board that I'm actually working on is STM32L152. when I tried to build/run the code (obviously it won't work) the errors I'm getting are mostly related to functions not being defined or \"<em>identifier 'function_name' is undefined</em>\", note that the code file includes a library (lib).\ntake a look at the code file:\n<a href=\"https://github.com/TDAbboud/STM32F4_Examples/tree/master/04_PWM_Servo\" rel=\"nofollow noreferrer\">https://github.com/TDAbboud/STM32F4_Examples/tree/master/04_PWM_Servo</a></p>\n\n<p>Generally speaking, What modifications should be done to successfully run the code on STM32L1?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "vector"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1493225736, "post_id": 43640235, "comment_id": 74328795, "body": "Code should be inside a function (<code>main</code> in your case, I guess..)."}, {"owner": {"reputation": 391, "user_id": 7450068, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4da675e19d1e6fabfa6a5779cbba0160?s=128&d=identicon&r=PG&f=1", "display_name": "L&#39;ultimo", "link": "https://stackoverflow.com/users/7450068/lultimo"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493225796, "post_id": 43640235, "comment_id": 74328827, "body": "What piece of code? Anything? @EugeneSh."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1493225851, "post_id": 43640235, "comment_id": 74328864, "body": "At least the <code>v*</code>and <code>res</code> assignments. You should go a bit back to the basics."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1493226165, "post_id": 43640235, "comment_id": 74329036, "body": "Outside of any function, it&#39;s possible <code>v1[0] = 3;</code> (for example) is being interpreted as a declaration of a zero-element array of <code>int</code> initialised to <code>3</code> (which isn&#39;t a valid array initialiser)."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1493226513, "post_id": 43640235, "comment_id": 74329267, "body": "@EugeneSh.: The word &quot;code&quot; is ambiguous. <i>Statements</i> need to be inside a function."}], "answers": [{"comments": [{"owner": {"reputation": 391, "user_id": 7450068, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4da675e19d1e6fabfa6a5779cbba0160?s=128&d=identicon&r=PG&f=1", "display_name": "L&#39;ultimo", "link": "https://stackoverflow.com/users/7450068/lultimo"}, "edited": false, "score": 0, "creation_date": 1493226123, "post_id": 43640307, "comment_id": 74329011, "body": "Thank you! So I have to keep in mind that I can&#39;t assing a value outside of a function"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 7, "last_activity_date": 1493225856, "creation_date": 1493225856, "answer_id": 43640307, "question_id": 43640235, "link": "https://stackoverflow.com/questions/43640235/c-why-do-i-get-invalid-initializer/43640307#43640307", "title": "C: why do I get invalid initializer?", "body": "<p>What you are attempting to do is not <em>initialization</em> but <em>assignment</em>.  The former is done at the time the variable is defined, while the later is done later as an executable statement.  You're getting an error because executable statements are not allowed outside of a function.</p>\n\n<p>You need to use an initializer at the time the arrays are defined:</p>\n\n<pre><code>float v1[3] = {3, 2, 0};\nfloat v2[3] = {2, 5, 0};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1493227840, "post_id": 43640316, "comment_id": 74330068, "body": "The code is <i>not</i> fine.  It is erroneous, and the compiler rightly rejects it.  Your alternative is fine, but different."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493228162, "post_id": 43640316, "comment_id": 74330252, "body": "Curious to use <code>printf(&quot;%lf&quot;, res);</code> for a <code>float</code>.  Its OK, just unusual."}], "tags": [], "owner": {"reputation": 357, "user_id": 7763210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2431674aae29bd58336eaa2fcb83ba91?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammed Bakr Sikal", "link": "https://stackoverflow.com/users/7763210/mohammed-bakr-sikal"}, "is_accepted": false, "score": 0, "last_activity_date": 1493225884, "creation_date": 1493225884, "answer_id": 43640316, "question_id": 43640235, "link": "https://stackoverflow.com/questions/43640235/c-why-do-i-get-invalid-initializer/43640316#43640316", "title": "C: why do I get invalid initializer?", "body": "<p>Your code is fine; you are probably just having a structure problem.\nTry something like:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nfloat dotProd(float * vec1, float * vec2) {\n    return vec1[0] * vec2[0] + vec1[1] * vec2[1] + vec1[2] * vec2[2];\n}\nint main() {\n    float res;\n    float v1[3];\n    float v2[3];\n\n    v1[0] = 3;\n    v1[1] = 2;\n    v1[2] = 0;\n    v2[0] = 2;\n    v2[1] = 5;\n    v2[2] = 0;\n\n    res = dotProd(v1, v2);\n    printf(\"%lf\", res);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 3, "last_activity_date": 1493306984, "last_edit_date": 1493306984, "creation_date": 1493226891, "answer_id": 43640639, "question_id": 43640235, "link": "https://stackoverflow.com/questions/43640235/c-why-do-i-get-invalid-initializer/43640639#43640639", "title": "C: why do I get invalid initializer?", "body": "<pre><code>float v1[3];\n// ...    \nv1[0] = 3;\nv1[1] = 2;\nv1[2] = 0;\n</code></pre>\n\n<p>This: <code>float v1[3];</code> is a declaration (and a definition).  It defines an array object named <code>v1</code>. It can legally appear either at file scope (outside any function) or at block scope (inside a function definition).</p>\n\n<p>This: <code>v1[0] = 3;</code> is a <em>statement</em>. Statements are permitted only inside a function definition.</p>\n\n<p>If you want those statements to be executed just once, you can put them inside your <code>main</code> function.</p>\n\n<p>Execution of your program begins with an implicit call to your <code>main</code> function. Very nearly everything that happens as your program runs results from that, as other functions are called from <code>main</code>, directly or indirectly. If you could have statements outside any function, there would be no way for them ever to be executed. File-scope declarations are permitted, but they're restricted to ones that don't execute any code. For example, a declaration like:</p>\n\n<pre><code>int n = 42;\n</code></pre>\n\n<p>is permitted either at file scope or at block scope; if it's at file scope the value <code>42</code> is loaded into <code>n</code> at program startup.  But if the initializer isn't a constant expression, such as:</p>\n\n<pre><code>int r = rand();\n</code></pre>\n\n<p>then it can only appear at block scope; there's no way to call a function before <code>main</code> starts.</p>\n\n<p>As for why you're getting that particular message, the compiler's parser isn't expecting to see a statement in that context, so it tries (and fails) to interpret <code>v1[0] = 3;</code> as a declaration. When a compiler sees something that's syntactically invalid, it <em>tries</em> to interpret it in a way that lets it give a meaningful error message, but it doesn't always succeed.</p>\n"}], "owner": {"reputation": 391, "user_id": 7450068, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4da675e19d1e6fabfa6a5779cbba0160?s=128&d=identicon&r=PG&f=1", "display_name": "L&#39;ultimo", "link": "https://stackoverflow.com/users/7450068/lultimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1209, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1493306984, "creation_date": 1493225621, "question_id": 43640235, "link": "https://stackoverflow.com/questions/43640235/c-why-do-i-get-invalid-initializer", "title": "C: why do I get invalid initializer?", "body": "<p>I have to do a function which returns the dot product of two vectors.\nHere his the code:</p>\n\n<pre><code>float res;\nfloat v1[3];\nfloat v2[3];\n\nv1[0] = 3;\nv1[1] = 2;\nv1[2] = 0;\nv2[0] = 2;\nv2[1] = 5;\nv2[2] = 0;\n\n\nfloat dotProd(float *vec1, float *vec2) {\n    return vec1[0]*vec2[0] + vec1[1]*vec2[1] + vec1[2]*vec2[2];\n}\n\nres = dotProd(v1, v2)\n</code></pre>\n\n<p>I thik the function is right,  the problem is that I get <em>invalid initializer</em> error when I define the values of the vectors.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["c", "algorithm", "sorting", "vector"], "comments": [{"owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "edited": false, "score": 3, "creation_date": 1493225666, "post_id": 43640085, "comment_id": 74328752, "body": "The program produces no output. Perhaps that&#39;s wrong?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1493226431, "post_id": 43640085, "comment_id": 74329215, "body": "Stack overflow, and loop is not right."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1493227432, "post_id": 43640085, "comment_id": 74329816, "body": "Unrelated, a <i>flag array</i> of size 60 containing lit values only for numbers in the winning line will eliminate the triple nest and increase your efficiency considerably. Just saying."}, {"owner": {"reputation": 65, "user_id": 6631827, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1441505b98d7d5d23e9571a31348a481?s=128&d=identicon&r=PG&f=1", "display_name": "Ruan", "link": "https://stackoverflow.com/users/6631827/ruan"}, "edited": false, "score": 0, "creation_date": 1493227814, "post_id": 43640085, "comment_id": 74330058, "body": "It&#39;s not meant to print the variables, but they should store the correct values."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1493229193, "post_id": 43640085, "comment_id": 74330779, "body": "@Ruan If some other program is going to test it, you&#39;re going to have to output their values so it can check them. How are you testing it yourself? In a debugger?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1493229272, "post_id": 43640085, "comment_id": 74330824, "body": "You&#39;re spending far more time sorting than you&#39;re saving from it in that final loop, by the way."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 6631827, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1441505b98d7d5d23e9571a31348a481?s=128&d=identicon&r=PG&f=1", "display_name": "Ruan", "link": "https://stackoverflow.com/users/6631827/ruan"}, "edited": false, "score": 0, "creation_date": 1493227869, "post_id": 43640322, "comment_id": 74330085, "body": "I didn&#39;t mean it to loop through the entire code. It&#39;s just meant to receive the first line ( lottery results ) as input."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 65, "user_id": 6631827, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1441505b98d7d5d23e9571a31348a481?s=128&d=identicon&r=PG&f=1", "display_name": "Ruan", "link": "https://stackoverflow.com/users/6631827/ruan"}, "edited": false, "score": 0, "creation_date": 1493228446, "post_id": 43640322, "comment_id": 74330414, "body": "Okay.  I was not sure.  Then ignore the comments about curly braces in that case.  But definitely increase your stack size to accommodate the large array variable. :)  Also, although I do not think your code is running into uninitialized variables, it is still a good habit to explicitly initialize them before use."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 1, "last_activity_date": 1493228763, "last_edit_date": 1493228763, "creation_date": 1493225897, "answer_id": 43640322, "question_id": 43640085, "link": "https://stackoverflow.com/questions/43640085/c-program-to-check-lottery-numbers-why-some-tests-fail/43640322#43640322", "title": "C program to check lottery numbers: why some tests fail?", "body": "<p>Yes, there are a couple of noteworthy issues with your code:  </p>\n\n<p>Compile time indicates possibility of uninitialized variable:</p>\n\n<p><a href=\"https://i.stack.imgur.com/wOtYf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wOtYf.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>But, <strong><em>run-time</em></strong> results in fatal run-time at unknown source location. <em>Stack overflow</em>.  It is likely due to this line:</p>\n\n<pre><code>int v[50500][6]; \n</code></pre>\n\n<p>Increase your stack size.  It needs to be about 2.5Mbytes for <code>v</code> alone.</p>\n\n<p>Also, this line may not be what you intended:</p>\n\n<pre><code>for(i=0;i&lt;6;++i) scanf(\"%i\",&amp;mega[i]); //first line, lottery results\n                                     ^\n</code></pre>\n\n<p>If you meant to loop around the remainder of the code, remove the <code>;</code> after the <code>for()</code> statement, and use curly braces:  </p>\n\n<pre><code>for(i=0;i&lt;6;++i) scanf(\"%i\",&amp;mega[i]) //first line, lottery results\n{\n    scanf(\"%i\",&amp;n);\n    ....\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 6631827, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1441505b98d7d5d23e9571a31348a481?s=128&d=identicon&r=PG&f=1", "display_name": "Ruan", "link": "https://stackoverflow.com/users/6631827/ruan"}, "edited": false, "score": 0, "creation_date": 1493235870, "post_id": 43641048, "comment_id": 74334756, "body": "I tried something really stupid ( if statements ) and it worked perfectly. So yes, I was just overcomplicating things."}], "tags": [], "owner": {"reputation": 90, "user_id": 7921262, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213360341862111/picture?type=large", "display_name": "Ahmet Enes", "link": "https://stackoverflow.com/users/7921262/ahmet-enes"}, "is_accepted": false, "score": 1, "last_activity_date": 1493228318, "creation_date": 1493228318, "answer_id": 43641048, "question_id": 43640085, "link": "https://stackoverflow.com/questions/43640085/c-program-to-check-lottery-numbers-why-some-tests-fail/43641048#43641048", "title": "C program to check lottery numbers: why some tests fail?", "body": "<p>Your code is true, I understood and tried the flow of it. Looks fine but if you dont need to sort everyline (and use j as a counter in this loop <code>for(j=0;v[i][j] == 61 &amp;&amp; j&lt;6;++j);</code> ), you can use simpler <code>if</code>statements to compare real lottery results with the ones that entered. What I mean is that your algorithm is a little complex. Try a simple one and see how it works.</p>\n"}], "owner": {"reputation": 65, "user_id": 6631827, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1441505b98d7d5d23e9571a31348a481?s=128&d=identicon&r=PG&f=1", "display_name": "Ruan", "link": "https://stackoverflow.com/users/6631827/ruan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493228763, "creation_date": 1493225063, "question_id": 43640085, "link": "https://stackoverflow.com/questions/43640085/c-program-to-check-lottery-numbers-why-some-tests-fail", "title": "C program to check lottery numbers: why some tests fail?", "body": "<p>This program takes as an input the following lines:</p>\n\n<pre><code>23 12 33 19 10 8\n5\n23 19 8 12 60 18\n14 60 12 44 54 10\n8 3 12 19 33 10\n33 15 7 60 12 10\n22 12 19 23 33 11\n</code></pre>\n\n<p>23 12 33 19 10 8 ( The first line ) are the lottery results.\nn ( in this specific case, 5 ) informs how many lines will follow below.</p>\n\n<p>Each line has 6 numbers. The number order doesn't matter.</p>\n\n<p>The rules are: numbers range from 1 to 60 ( including 1 and 60 ) and they never repeat themselves in the same line.</p>\n\n<p>The variable \"quadra\" stores how many lines have got 4 numbers right. </p>\n\n<p>The variable \"quina\" stores how many lines have got 5 numbers right.</p>\n\n<p>The variable \"sena\" stores how many lines have got 6 numbers right. </p>\n\n<p>So, a computer program is running some tests over my code below and it's claiming that it goes wrong for most of them, but I can't see what's the problem here. Does anybody have a clue? Is this code wrong, or is there something wrong with the software that's testing this code?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    int mega[6];\n    int v[50500][6];\n    int n,swap; \n    int i,j,k; //counters\n    int quadra,quina,sena;\n    quadra = 0;\n    quina = 0;\n    sena = 0;\n    for(i=0;i&lt;6;++i) scanf(\"%i\",&amp;mega[i]); //first line, lottery results\n    scanf(\"%i\",&amp;n);\n    for(i=0;i&lt;n;++i){\n        for(j=0;j&lt;6;++j){\n            scanf(\"%i\",&amp;v[i][j]);\n        }\n    }\n    for(i=0;i&lt;n;++i){\n        for(j=0;j&lt;6;++j){\n            for(k=0;k&lt;6;++k){\n                if(v[i][j] == mega[k]){\n                    v[i][j] = 61;\n                }\n            }\n        }\n    }\n\n    //reverse bubble sort\n    for(i=0;i&lt;n;++i){\n        for(j=0;j&lt;6;++j){\n            for(k=j+1;k&lt;6;++k){\n                if(v[i][j] &lt; v[i][k]){\n                    swap = v[i][k];\n                    v[i][k] = v[i][j];\n                    v[i][j] = swap;\n                }\n            }\n        }\n    }\n\n    for(i=0;i&lt;n;++i){\n        for(j=0;v[i][j] == 61 &amp;&amp; j&lt;6;++j);\n        if(j == 4) ++quadra;\n        else if(j == 5) ++quina;\n        else if(j == 6) ++sena;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "resize", "logic", "cs50"], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 7910101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a26c1dff656d3fc4e94396c850ba57e?s=128&d=identicon&r=PG&f=1", "display_name": "Saha", "link": "https://stackoverflow.com/users/7910101/saha"}, "is_accepted": false, "score": 0, "last_activity_date": 1493227962, "last_edit_date": 1493227962, "creation_date": 1493227637, "answer_id": 43640851, "question_id": 43640070, "link": "https://stackoverflow.com/questions/43640070/cs50-pset-4-resize-vertical-stretching-gives-weird-output/43640851#43640851", "title": "CS50 pset 4 resize Vertical stretching gives weird output", "body": "<p>You haven't updated the <code>biSizeImage</code> and <code>bfSize</code> before writing the <code>BITMAPFILEHEADER</code> and <br>\n<code>BITMAPINFOHEADER</code>.<br>\n<br>\nAlso, the padding for the new file will change.\n<br><br>\nHence, calculate the new padding, <code>biSizeImage</code>, and <code>bfSize</code> using</p>\n\n<pre><code>padding = (4 - (bi.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;\nbi.biSizeImage = ((sizeof(RGBTRIPLE) * bi.biWidth + padding) * abs(bi.biHeight);\nbi.bfSize = bi.biSizeImage + sizeof(BITMAPFILEHEADER) + sizeof(BITMAPINFOHEADER);\n</code></pre>\n\n<p>Padding in <code>fseek()</code> for 'intptr' will be different than that for 'outptr'. Hence store both the paddings in <br>different variables.</p>\n"}], "owner": {"reputation": 9, "user_id": 7904273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f544b7028ecc5218c5b763089282c87e?s=128&d=identicon&r=PG&f=1", "display_name": "Tanuj Shrivastava", "link": "https://stackoverflow.com/users/7904273/tanuj-shrivastava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493227962, "creation_date": 1493225017, "question_id": 43640070, "link": "https://stackoverflow.com/questions/43640070/cs50-pset-4-resize-vertical-stretching-gives-weird-output", "title": "CS50 pset 4 resize Vertical stretching gives weird output", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include \"bmp.h\"\n\nint main(int argc, char *argv[])\n{\n    // ensure proper usage\n    if (argc != 4)\n    {\n        fprintf(stderr, \"Usage: ./resize scale infile outfile\\n\");\n        return 1;\n    }\n\n    // remember filenames\n    int n = atoi(argv[1]);\n    char *infile = argv[2];\n    char *outfile = argv[3];\n\n    // open input file \n    FILE *inptr = fopen(infile, \"r\");\n    if (inptr == NULL)\n    {\n        fprintf(stderr, \"Could not open %s.\\n\", infile);\n        return 2;\n    }\n\n    // open output file\n    FILE *outptr = fopen(outfile, \"w\");\n    if (outptr == NULL)\n    {\n        fclose(inptr);\n        fprintf(stderr, \"Could not create %s.\\n\", outfile);\n        return 3;\n    }\n\n    // read infile's BITMAPFILEHEADER\n    BITMAPFILEHEADER bf;\n    fread(&amp;bf, sizeof(BITMAPFILEHEADER), 1, inptr);\n\n    // read infile's BITMAPINFOHEADER\n    BITMAPINFOHEADER bi;\n    fread(&amp;bi, sizeof(BITMAPINFOHEADER), 1, inptr);\n\n    // ensure infile is (likely) a 24-bit uncompressed BMP 4.0\n    if (bf.bfType != 0x4d42 || bf.bfOffBits != 54 || bi.biSize != 40 || \n        bi.biBitCount != 24 || bi.biCompression != 0)\n    {\n        fclose(outptr);\n        fclose(inptr);\n        fprintf(stderr, \"Unsupported file format.\\n\");\n        return 4;\n    }\n\n    // write outfile's BITMAPFILEHEADER\n    fwrite(&amp;bf, sizeof(BITMAPFILEHEADER), 1, outptr);\n\n\n    //Changes the Width and Height of the final image\n    bi.biWidth *= n;\n    bi.biHeight *= n;\n\n    // write outfile's BITMAPINFOHEADER\n    fwrite(&amp;bi, sizeof(BITMAPINFOHEADER), 1, outptr);\n\n    int padding = (4 - (bi.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;\n\n    // iterate over infile's scanlines\n    for (int i = 1, biHeight = abs(bi.biHeight) + 1; i &lt; biHeight; i++) {\n        //array where the last line will be stored\n        for (int curn = 0; curn &lt; n; curn++) {\n            long int temp = sizeof(RGBTRIPLE);\n            // iterate over pixels in scanline\n            for (int j = 0; j &lt; bi.biWidth; j++) {\n\n                // temporary storage\n                RGBTRIPLE triple;\n                // read RGB triple from infile\n                fread(&amp;triple, sizeof(RGBTRIPLE), 1, inptr);\n\n                // write RGB triple to outfile\n                for (int k = 0; k &lt; n; k++) {\n                    fwrite(&amp;triple, sizeof(RGBTRIPLE), 1, outptr);\n                }\n            } \n            fseek(inptr, -temp * bi.biWidth, SEEK_CUR);\n        }\n\n        // skip over padding, if any\n        fseek(inptr, padding, SEEK_CUR);\n\n        // then add it back (to demonstrate how)\n        for (int k = 0; k &lt; padding; k++)\n        {\n            fputc(0x00, outptr);\n        }\n    }\n\n    // close infile\n    fclose(inptr);\n\n    // close outfile\n    fclose(outptr);\n\n    // success\n    return 0;\n}\n</code></pre>\n\n<p>This is my long piece of code that I am using. I tried to understand other questions on the same topic but I was not able to correlate the answers to my own code. I personally think there is something wrong with the logic with the for n times because without it it prints a horizontally stretched image but I can't pinpoint what the solution is. My pseudo code is simply:</p>\n\n<pre><code>    for each row\n        for n times\n            for each pixel in the row\n                read from inptr\n                for n times (second time)\n                    write into outptr\n                end of n times (second time)\n            end of each pixel in the row\n    skip over padding\n    put the padding back\nend of each row\n</code></pre>\n\n<p>This is what is supposed to be stretched <a href=\"https://i.stack.imgur.com/hcVTk.png\" rel=\"nofollow noreferrer\">Image1</a></p>\n\n<p>and this is what it looks like when I use ./resize 4 smiley.bmp final.bmp <a href=\"https://i.stack.imgur.com/KHe88.png\" rel=\"nofollow noreferrer\">Image3</a></p>\n\n<p>Thanks for the help!</p>\n"}, {"tags": ["c", "visual-studio", "visual-studio-2013"], "comments": [{"owner": {"reputation": 31053, "user_id": 566608, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bf8ff77ca000b80a2b19d07dbb257645?s=128&d=identicon&r=PG", "display_name": "Felice Pollano", "link": "https://stackoverflow.com/users/566608/felice-pollano"}, "edited": false, "score": 1, "creation_date": 1493223607, "post_id": 43639616, "comment_id": 74327539, "body": "did you try to output the string without the _T(&quot;&quot;) ?"}, {"owner": {"reputation": 45, "user_id": 7570168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e07eae66d44da16e81d316c566877160?s=128&d=identicon&r=PG&f=1", "display_name": "OpenGLNoob", "link": "https://stackoverflow.com/users/7570168/openglnoob"}, "reply_to_user": {"reputation": 31053, "user_id": 566608, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bf8ff77ca000b80a2b19d07dbb257645?s=128&d=identicon&r=PG", "display_name": "Felice Pollano", "link": "https://stackoverflow.com/users/566608/felice-pollano"}, "edited": false, "score": 0, "creation_date": 1493223920, "post_id": 43639616, "comment_id": 74327751, "body": "Right now I tryed &#39;OutputDebugString(&quot;HELLO\\n&quot;);&#39; and &#39;OutputDebugString(&quot;hello\\n&quot;);&#39;  but the same. Also I restarted MSVC with Mixed type of debugging. Nope.(("}, {"owner": {"reputation": 45, "user_id": 7570168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e07eae66d44da16e81d316c566877160?s=128&d=identicon&r=PG&f=1", "display_name": "OpenGLNoob", "link": "https://stackoverflow.com/users/7570168/openglnoob"}, "reply_to_user": {"reputation": 31053, "user_id": 566608, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bf8ff77ca000b80a2b19d07dbb257645?s=128&d=identicon&r=PG", "display_name": "Felice Pollano", "link": "https://stackoverflow.com/users/566608/felice-pollano"}, "edited": false, "score": 0, "creation_date": 1493224193, "post_id": 43639616, "comment_id": 74327911, "body": "Numbers as string works perfect!"}, {"owner": {"reputation": 45, "user_id": 7570168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e07eae66d44da16e81d316c566877160?s=128&d=identicon&r=PG&f=1", "display_name": "OpenGLNoob", "link": "https://stackoverflow.com/users/7570168/openglnoob"}, "reply_to_user": {"reputation": 31053, "user_id": 566608, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bf8ff77ca000b80a2b19d07dbb257645?s=128&d=identicon&r=PG", "display_name": "Felice Pollano", "link": "https://stackoverflow.com/users/566608/felice-pollano"}, "edited": false, "score": 0, "creation_date": 1493224983, "post_id": 43639616, "comment_id": 74328392, "body": "Hmm. May be a reason is it string in .lib file, may be something else, but when I put it in main function in C++ it works perfect."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493225058, "post_id": 43639616, "comment_id": 74328440, "body": "Please provide MCVE."}], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 7570168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e07eae66d44da16e81d316c566877160?s=128&d=identicon&r=PG&f=1", "display_name": "OpenGLNoob", "link": "https://stackoverflow.com/users/7570168/openglnoob"}, "is_accepted": true, "score": 1, "last_activity_date": 1493225943, "creation_date": 1493225943, "answer_id": 43640342, "question_id": 43639616, "link": "https://stackoverflow.com/questions/43639616/outputdebugstring-output-instead-string/43640342#43640342", "title": "OutputDebugString output &quot;??????&quot; instead string", "body": "<p>Ok, got it! </p>\n\n<pre><code>OutputDebugStringA(\"Hello!\\n\"); \n</code></pre>\n\n<p>Works perfect! (MSVC2013, WIN7, 64)</p>\n"}], "owner": {"reputation": 45, "user_id": 7570168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e07eae66d44da16e81d316c566877160?s=128&d=identicon&r=PG&f=1", "display_name": "OpenGLNoob", "link": "https://stackoverflow.com/users/7570168/openglnoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 43640342, "answer_count": 1, "score": -1, "last_activity_date": 1493225943, "creation_date": 1493223488, "question_id": 43639616, "link": "https://stackoverflow.com/questions/43639616/outputdebugstring-output-instead-string", "title": "OutputDebugString output &quot;??????&quot; instead string", "body": "<p>I try to debug some values in C in MSVC 2013 and decided to use this function first time.\nI don't know, but I receive only</p>\n\n<p><code>\"??????????????\"</code> </p>\n\n<p>in the ouput window. I checked the Debugging type, tryed to both state Auto/Mixed, but the same. Look it:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n...\nOutputDebugString(_T(\"HELLO!\\n\"));\n...\n</code></pre>\n\n<p>What do you think about it? Thanks!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1493223508, "post_id": 43639564, "comment_id": 74327476, "body": "Make sure you&#39;re using signed values in the expression... you&#39;ll never get a negative, unsigned value."}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1493223548, "post_id": 43639564, "comment_id": 74327497, "body": "Why do you need minus before bitmap width?"}, {"owner": {"reputation": 13, "user_id": 7910101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a26c1dff656d3fc4e94396c850ba57e?s=128&d=identicon&r=PG&f=1", "display_name": "Saha", "link": "https://stackoverflow.com/users/7910101/saha"}, "reply_to_user": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1493223811, "post_id": 43639564, "comment_id": 74327686, "body": "@yellowantphil bi.biWidth is of type int32_t. <code>RGBTRIPLE</code> returns three values of type uint8_t."}, {"owner": {"reputation": 13, "user_id": 7910101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a26c1dff656d3fc4e94396c850ba57e?s=128&d=identicon&r=PG&f=1", "display_name": "Saha", "link": "https://stackoverflow.com/users/7910101/saha"}, "reply_to_user": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1493223877, "post_id": 43639564, "comment_id": 74327732, "body": "@fukanchik I am at the end of a line in a file, and I need to offset to the beginning."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1493224063, "post_id": 43639564, "comment_id": 74327825, "body": "What about <code>fseek(inptr, -(long)(bi.biWidth * sizeof(RGBTRIPLE)), SEEK_CUR)</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1493224133, "post_id": 43639564, "comment_id": 74327867, "body": "if you&#39;re reading a text file, using <code>sizeof</code> a structure isn&#39;t right. You need to know the number of characters you read on the line."}, {"owner": {"reputation": 2475, "user_id": 6327365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vlpxf.png?s=128&g=1", "display_name": "grochmal", "link": "https://stackoverflow.com/users/6327365/grochmal"}, "edited": false, "score": 0, "creation_date": 1493224134, "post_id": 43639564, "comment_id": 74327871, "body": "You need that <code>-bi.biWidth * sizeof(RGBTRIPLE)</code> fit in a <code>long</code> (see <code>man fseek</code>.  No one can tell you how they fit without knowing what <code>bi.biWidth</code> and <code>RGBTRIPLE</code> can contain.  Now, I still find the fact that the error is an <b>unsigned</b> int overflow strange.  The <code>long</code> in the third argument for <code>fseek</code> is a signed int."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1493224167, "post_id": 43639564, "comment_id": 74327893, "body": "You should use <code>ftell()</code> before reading the line, and save it in a variable. Then use <code>fseek()</code> with that variable to go back to that same position."}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1493224219, "post_id": 43639564, "comment_id": 74327928, "body": "This number is suspicious : 18446744073709551613 in hex it is <code>0x1999 9999 9999 9999</code>. I guess you somehow corrupted bi.biWidth or misplaced it to palette region."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "reply_to_user": {"reputation": 2475, "user_id": 6327365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vlpxf.png?s=128&g=1", "display_name": "grochmal", "link": "https://stackoverflow.com/users/6327365/grochmal"}, "edited": false, "score": 1, "creation_date": 1493224242, "post_id": 43639564, "comment_id": 74327941, "body": "@grochmal ...but <code>sizeof(RGBTRIPLE)</code> is unsigned and probably larger than <code>int32_t</code>"}, {"owner": {"reputation": 2475, "user_id": 6327365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vlpxf.png?s=128&g=1", "display_name": "grochmal", "link": "https://stackoverflow.com/users/6327365/grochmal"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1493224524, "post_id": 43639564, "comment_id": 74328113, "body": "@Dmitri - Hmmm... I do not think that <code>sizeof</code> of something can be larger than a machine word (int).  <code>sizeof</code> would return something that would be the size of something in memory (otherwise it does not makes sense since the program would not start), and all memory should fit inside a machine word."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "reply_to_user": {"reputation": 2475, "user_id": 6327365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vlpxf.png?s=128&g=1", "display_name": "grochmal", "link": "https://stackoverflow.com/users/6327365/grochmal"}, "edited": false, "score": 0, "creation_date": 1493224719, "post_id": 43639564, "comment_id": 74328242, "body": "@grochmal I&#39;ve got 64-bit <code>size_t</code> and 32-bit <code>int</code> on my 64-bit Linux system... <code>size_t</code> is usually <i>at least</i> as large as <code>int</code>, often larger (and is unsigned)."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "reply_to_user": {"reputation": 2475, "user_id": 6327365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vlpxf.png?s=128&g=1", "display_name": "grochmal", "link": "https://stackoverflow.com/users/6327365/grochmal"}, "edited": false, "score": 0, "creation_date": 1493225011, "post_id": 43639564, "comment_id": 74328411, "body": "@grochmal I&#39;m not saying <code>sizeof(RGBTRIPLE)</code> gives a value that won&#39;t fit in <code>int</code>, I&#39;m saying its <i>type</i> is unsigned and (probably) larger than <code>int</code> and will cause the other value in the expression to be converted accordingly."}, {"owner": {"reputation": 13, "user_id": 7910101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a26c1dff656d3fc4e94396c850ba57e?s=128&d=identicon&r=PG&f=1", "display_name": "Saha", "link": "https://stackoverflow.com/users/7910101/saha"}, "edited": false, "score": 1, "creation_date": 1493225287, "post_id": 43639564, "comment_id": 74328551, "body": "<code>RGBTRIPLE</code> had type uint8_t, and <code>bi.biWidth * sizeof(RGBTRIPLE)</code> returned an unsigned long. Hence <code>-(bi.biWidth * (int)(sizeof(RGBTRIPLE))</code> gave me the correct value."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1493226620, "post_id": 43639564, "comment_id": 74329330, "body": "@Saha <code>sizeof</code> <i>anything</i> gives a <code>size_t</code> value (which is unsigned).  The cast to <code>int</code> does fix your problem, but whether <code>RGBTRIPLE</code> is a signed or unsigned type doesn&#39;t affect it."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1493227609, "last_edit_date": 1495541402, "creation_date": 1493227609, "answer_id": 43640842, "question_id": 43639564, "link": "https://stackoverflow.com/questions/43639564/how-to-get-to-the-beginning-of-a-particular-line-in-a-file/43640842#43640842", "title": "How to get to the beginning of a particular line in a file?", "body": "<p><em>unsigned</em> math.</p>\n\n<p><code>sizeof(RGBTRIPLE)</code> has a value of 3 and type of <code>size_t</code>, some <em>unsigned</em> type.  (<code>size_t</code> is <code>unsigned long</code> on OP's machine)</p>\n\n<p><code>-bi.biWidth</code> has a value of -3 of some signed type narrower than <code>size_t</code>, likely <code>int</code>.</p>\n\n<p>When multiplied, the -3 is converted to a <code>size_t</code> type with a value of <code>18446744073709551613u</code> or <code>0xfffffffffffffffd</code>.</p>\n\n<p>This product exceeds <code>size_t</code> .</p>\n\n<p><code>fseek()</code> expects a <code>long</code>, so use <code>long</code> math.</p>\n\n<pre><code>fseek(inptr, -bi.biWidth * (long) sizeof(RGBTRIPLE), SEEK_CUR)\n</code></pre>\n\n<hr>\n\n<p>The type of <code>RGBTRIPLE</code> is not of issue here.  <a href=\"https://stackoverflow.com/users/929459/dmitri\">@Dmitri</a></p>\n"}], "owner": {"reputation": 13, "user_id": 7910101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a26c1dff656d3fc4e94396c850ba57e?s=128&d=identicon&r=PG&f=1", "display_name": "Saha", "link": "https://stackoverflow.com/users/7910101/saha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 43640842, "answer_count": 1, "score": 1, "last_activity_date": 1493227609, "creation_date": 1493223358, "last_edit_date": 1493223717, "question_id": 43639564, "link": "https://stackoverflow.com/questions/43639564/how-to-get-to-the-beginning-of-a-particular-line-in-a-file", "title": "How to get to the beginning of a particular line in a file?", "body": "<p>When I try to return to the beginning of a line in a file using fseek(), I get an error.</p>\n\n<p>My code is as follows:</p>\n\n<pre><code>fseek(inptr, -bi.biWidth * sizeof(RGBTRIPLE), SEEK_CUR)\n</code></pre>\n\n<p>bi.biwidth is of the type int32_t.</p>\n\n<p>I am getting the following error:</p>\n\n<pre><code>runtime error: unsigned integer overflow: 18446744073709551613 * 3 cannot be represented in type 'unsigned long'\n</code></pre>\n\n<p>Now I understand the error, but I do not know how to resolve it. Kindly help.</p>\n\n<p>Also, what other way can this be implemented?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 4, "creation_date": 1493222726, "post_id": 43639265, "comment_id": 74326939, "body": "<code>!=</code> is not an assignment."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493222732, "post_id": 43639265, "comment_id": 74326944, "body": "<code>!</code> is a <i>logical</i> negation."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7678106, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8IxvitSPn5w/AAAAAAAAAAI/AAAAAAAAA3A/M2Ui3XBULmg/photo.jpg?sz=128", "display_name": "Lokesh Chebrolu", "link": "https://stackoverflow.com/users/7678106/lokesh-chebrolu"}, "edited": false, "score": 1, "creation_date": 1493222973, "post_id": 43639348, "comment_id": 74327111, "body": "Yes got it now. I thought != is same as like *= . So now b does not change."}], "tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": true, "score": 7, "last_activity_date": 1493222992, "last_edit_date": 1493222992, "creation_date": 1493222728, "answer_id": 43639348, "question_id": 43639265, "link": "https://stackoverflow.com/questions/43639265/c-programming-arithmetic-operator-operation/43639348#43639348", "title": "C programming ! Arithmetic operator operation", "body": "<p>Since a is initially 10, then <code>!a</code>  evaluates to <code>0</code></p>\n\n<p>Therefore <code>b != !a</code> evaluates to <code>5 != 0</code>, which evaluates to a true expression (<code>1</code>). (But as Michael points out in his answer, this is not an assignment operator).</p>\n\n<p><code>c = !!a</code> which evaluates to <code>c = !0</code>, which evaluates to <code>c = 1</code></p>\n\n<p>Explanation:\nThe language lawyers may scold me on this, but <code>!</code> operator applied to a non-zero expression evaluates to zero.  The <code>!</code> operator applied to any false (0) expression evaluates to 1.</p>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 3, "last_activity_date": 1493222955, "creation_date": 1493222955, "answer_id": 43639419, "question_id": 43639265, "link": "https://stackoverflow.com/questions/43639265/c-programming-arithmetic-operator-operation/43639419#43639419", "title": "C programming ! Arithmetic operator operation", "body": "<p>It's a trick question.</p>\n\n<p><code>b != !a;</code> is basically a NOP. It just evaluates to <code>1</code> but doesn't change the content of <code>b</code>. You can remove this line altogether and you'll get the same output.</p>\n"}], "owner": {"reputation": 43, "user_id": 7678106, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8IxvitSPn5w/AAAAAAAAAAI/AAAAAAAAA3A/M2Ui3XBULmg/photo.jpg?sz=128", "display_name": "Lokesh Chebrolu", "link": "https://stackoverflow.com/users/7678106/lokesh-chebrolu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "accepted_answer_id": 43639348, "answer_count": 2, "score": 2, "last_activity_date": 1493222992, "creation_date": 1493222534, "last_edit_date": 1493222701, "question_id": 43639265, "link": "https://stackoverflow.com/questions/43639265/c-programming-arithmetic-operator-operation", "title": "C programming ! Arithmetic operator operation", "body": "<pre><code>#include &lt;stdio.h&gt; \nint main()\n{ \n    int a = 10, b = 5, c = 3; \n    b != !a; \n    c = !!a; \n    printf(\"%d\\t%d\", b, c); \n}\n</code></pre>\n\n<p>This is the c code. I got the output as 5    1 . I cant get the operation behind this expressions of b and c. Can anyone please explain how?</p>\n"}, {"tags": ["python", "c", "imap", "restart"], "comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1493273863, "post_id": 43638897, "comment_id": 74347691, "body": "What do you mean by <i>in another shell</i>??? I know what processes and threads are, I know what a shell is, and also what a terminal window is, but I cannot understand what means <i>start another script in another shell</i>..."}, {"owner": {"reputation": 17, "user_id": 4322023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc5137d758aa03cb0235e916e55c619?s=128&d=identicon&r=PG&f=1", "display_name": "LORMILAN", "link": "https://stackoverflow.com/users/4322023/lormilan"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1493318718, "post_id": 43638897, "comment_id": 74378301, "body": "Terminal window, sorry"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 4322023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc5137d758aa03cb0235e916e55c619?s=128&d=identicon&r=PG&f=1", "display_name": "LORMILAN", "link": "https://stackoverflow.com/users/4322023/lormilan"}, "edited": false, "score": 0, "creation_date": 1493222506, "post_id": 43639008, "comment_id": 74326802, "body": "subprocess.Popen([&quot;C:\\Users\\light\\Documents\\Python\\BOTBOL\\Gm&zwnj;&#8203;ail\\V1\\send.py&quot;], shell = True)"}, {"owner": {"reputation": 17, "user_id": 4322023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc5137d758aa03cb0235e916e55c619?s=128&d=identicon&r=PG&f=1", "display_name": "LORMILAN", "link": "https://stackoverflow.com/users/4322023/lormilan"}, "edited": false, "score": 0, "creation_date": 1493222516, "post_id": 43639008, "comment_id": 74326809, "body": "still in the same shell"}, {"owner": {"reputation": 17, "user_id": 4322023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc5137d758aa03cb0235e916e55c619?s=128&d=identicon&r=PG&f=1", "display_name": "LORMILAN", "link": "https://stackoverflow.com/users/4322023/lormilan"}, "edited": false, "score": 0, "creation_date": 1493228001, "post_id": 43639008, "comment_id": 74330156, "body": "ill try doing it in 1 with threading.Thread(target=something).start() threading.Thread(target=my_thing).start()"}, {"owner": {"reputation": 549, "user_id": 7900383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f22c1c597c0928afccb9c0205c4816?s=128&d=identicon&r=PG&f=1", "display_name": "Satyadev", "link": "https://stackoverflow.com/users/7900383/satyadev"}, "reply_to_user": {"reputation": 17, "user_id": 4322023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc5137d758aa03cb0235e916e55c619?s=128&d=identicon&r=PG&f=1", "display_name": "LORMILAN", "link": "https://stackoverflow.com/users/4322023/lormilan"}, "edited": false, "score": 0, "creation_date": 1493272242, "post_id": 43639008, "comment_id": 74347013, "body": "Have updated my answer - the separate shell part was vague , what i meant was you will be directly working with the shell. Also note that shell = True is a little dangerous - <a href=\"https://docs.python.org/2/library/subprocess.html#frequently-used-arguments\" rel=\"nofollow noreferrer\">docs.python.org/2/library/&hellip;</a> A"}], "tags": [], "owner": {"reputation": 549, "user_id": 7900383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f22c1c597c0928afccb9c0205c4816?s=128&d=identicon&r=PG&f=1", "display_name": "Satyadev", "link": "https://stackoverflow.com/users/7900383/satyadev"}, "is_accepted": false, "score": 0, "last_activity_date": 1493272195, "last_edit_date": 1493272195, "creation_date": 1493221799, "answer_id": 43639008, "question_id": 43638897, "link": "https://stackoverflow.com/questions/43638897/python-restart-script-in-another-cmds-window/43639008#43639008", "title": "Python restart script in another cmd&#39;s window", "body": "<p>Subprocess has an option called shell which is what you want. Os calls are blocking which means that only after the command is completed will the interpreter move to the next line. On the other hand subprocess popens are non blocking, however both these commands will spawn off child process from the process running this code. If you want to run in shell and get access shell features to execute this , try the shell = True in subprocess.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 0, "last_activity_date": 1493327342, "creation_date": 1493327342, "answer_id": 43667937, "question_id": 43638897, "link": "https://stackoverflow.com/questions/43638897/python-restart-script-in-another-cmds-window/43667937#43667937", "title": "Python restart script in another cmd&#39;s window", "body": "<p>After your last comment and as the syntax show that you are using Windows, I assume that you want to launch a Python script in another console. The magic word here is <code>START</code> if you want that the launching execute in parallel with the new one, or <code>START /W</code> if you want to wait for the end of the subprocess.</p>\n\n<p>In your case, you could use:</p>\n\n<pre><code>subprocess.call([\"cmd.exe\", \"/c\", \"START\", \"C:\\Path\\To\\PYTHON.EXE\",\n    \"C:\\Users\\light\\Documents\\Python\\BOTBOL\\Gmail\\V1\\send.py\"])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 4322023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc5137d758aa03cb0235e916e55c619?s=128&d=identicon&r=PG&f=1", "display_name": "LORMILAN", "link": "https://stackoverflow.com/users/4322023/lormilan"}, "edited": false, "score": 0, "creation_date": 1493382962, "post_id": 43668126, "comment_id": 74406836, "body": "i have tried, (probably not enough), but seems that it still wait the first thread to finish before starting the second (maybe im wrong)"}, {"owner": {"reputation": 23, "user_id": 7905059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9fce167c9a33c327ba482642acf5fd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stijn", "link": "https://stackoverflow.com/users/7905059/stijn"}, "reply_to_user": {"reputation": 17, "user_id": 4322023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc5137d758aa03cb0235e916e55c619?s=128&d=identicon&r=PG&f=1", "display_name": "LORMILAN", "link": "https://stackoverflow.com/users/4322023/lormilan"}, "edited": false, "score": 0, "creation_date": 1493385073, "post_id": 43668126, "comment_id": 74408206, "body": "It should be using 2 threads, but youll have 1 main and another in a def."}], "tags": [], "owner": {"reputation": 23, "user_id": 7905059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9fce167c9a33c327ba482642acf5fd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stijn", "link": "https://stackoverflow.com/users/7905059/stijn"}, "is_accepted": false, "score": 0, "last_activity_date": 1493328149, "creation_date": 1493328149, "answer_id": 43668126, "question_id": 43638897, "link": "https://stackoverflow.com/questions/43638897/python-restart-script-in-another-cmds-window/43668126#43668126", "title": "Python restart script in another cmd&#39;s window", "body": "<p>I could try and explain everything you need but I think this video will do it better: <a href=\"https://youtu.be/PJ4t2U15ACo\" rel=\"nofollow noreferrer\">Youtube Video about multithreading</a></p>\n\n<p>This will allow you to run 2 things f.e. \nHave 1 run on checkin email and the other one on inputs so it wont stop at those moments and making multiple 'shelves' possible, as they are parallel.</p>\n\n<p>If you really want to have a different window for this, i am sorry and I can not help.</p>\n\n<p>Hope this was were you were looking for.</p>\n"}], "owner": {"reputation": 17, "user_id": 4322023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc5137d758aa03cb0235e916e55c619?s=128&d=identicon&r=PG&f=1", "display_name": "LORMILAN", "link": "https://stackoverflow.com/users/4322023/lormilan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 43667937, "answer_count": 3, "score": 0, "last_activity_date": 1493328149, "creation_date": 1493221508, "last_edit_date": 1493319906, "question_id": 43638897, "link": "https://stackoverflow.com/questions/43638897/python-restart-script-in-another-cmds-window", "title": "Python restart script in another cmd&#39;s window", "body": "<p>is there a way to restart another script in another shell?\ni have script that sometimes stuck waiting to read email from gmail and imap. from another script i would like to restart the main one but without stopping the execution of the second \ni have tried:</p>\n\n<pre><code>os.system(\"C:\\Users\\light\\Documents\\Python\\BOTBOL\\Gmail\\V1\\send.py\")\nprocess = subprocess.Popen([\"python\", \"C:\\Users\\light\\Documents\\Python\\BOTBOL\\Gmail\\V1\\send.py\"])\n</code></pre>\n\n<p>but both run the main in the second's shell\nEDIT:\nsorry, for shell i mean terminal window</p>\n"}, {"tags": ["c", "fseek"], "comments": [{"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 3, "creation_date": 1493221672, "post_id": 43638871, "comment_id": 74326208, "body": "1.) see <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">why while( !feof() ) is always wrong</a>"}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 1, "creation_date": 1493221729, "post_id": 43638871, "comment_id": 74326249, "body": "2.) you don&#39;t reassign <code>fp</code> with your second <code>fopen( &quot;RANDON&quot;, &quot;r&quot; )</code>"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 1, "creation_date": 1493221888, "post_id": 43638871, "comment_id": 74326353, "body": "You are using <code>feof()</code> and <code>ftell()</code> then you are even reading from a closed file. You probably wanted to <code>fp = fopen(&quot;RANDOM&quot;, &quot;r&quot;);</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1493221912, "post_id": 43638871, "comment_id": 74326365, "body": "Exactly. This invokes <i>undefined behavior</i>. You closed the <code>fp</code>, opened the file again and leaked the resulting result (likely a valid <code>FILE*</code>) never to be seen again, then sent the old, still closed, <code>fp</code> in to your loop. Short version: you&#39;re missing <code>fp = </code> in this code."}, {"owner": {"reputation": 157, "user_id": 7868053, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-Bl_9eC4Kl-M/AAAAAAAAAAI/AAAAAAAAADM/NwBJVuvzjl8/photo.jpg?sz=128", "display_name": "daljinder singh", "link": "https://stackoverflow.com/users/7868053/daljinder-singh"}, "edited": false, "score": 0, "creation_date": 1493222315, "post_id": 43638871, "comment_id": 74326661, "body": "actually that was a copy mistake, it is still not working with the <code>fp =</code>  added."}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 1, "creation_date": 1493222628, "post_id": 43638871, "comment_id": 74326876, "body": "What are you trying to accomplish using <code>c = getchar()) != EOF</code> ?"}, {"owner": {"reputation": 157, "user_id": 7868053, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-Bl_9eC4Kl-M/AAAAAAAAAAI/AAAAAAAAADM/NwBJVuvzjl8/photo.jpg?sz=128", "display_name": "daljinder singh", "link": "https://stackoverflow.com/users/7868053/daljinder-singh"}, "edited": false, "score": 0, "creation_date": 1493222735, "post_id": 43638871, "comment_id": 74326946, "body": "it will take input from the user until the user presses <code>ctrl-d</code> which assign EOF meaning end of the file."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1493223841, "post_id": 43639411, "comment_id": 74327707, "body": "Please don&#39;t repeat the error of using the magic number <code>1</code> as the third argument to <code>fseek()</code>.  The only proper values are <code>SEEK_SET</code>, <code>SEEK_CUR</code>, and <code>SEEK_END</code>."}], "tags": [], "owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "is_accepted": true, "score": 3, "last_activity_date": 1493223990, "last_edit_date": 1493223990, "creation_date": 1493222932, "answer_id": 43639411, "question_id": 43638871, "link": "https://stackoverflow.com/questions/43638871/fseek-crossing-file-limit-and-not-terminating/43639411#43639411", "title": "fseek() crossing file limit and not terminating", "body": "<p>From <a href=\"https://linux.die.net/man/3/fseek\" rel=\"nofollow noreferrer\">man fseek()</a>:</p>\n\n<blockquote>\n  <p>A successful call to the <code>fseek()</code> function clears the end-of-file indicator for the stream.</p>\n</blockquote>\n\n<p>And <code>fseek()</code> will be successful even when you set the position indicator behind EOF.\nSo it becomes clear that <code>while (feof(fp) == 0)</code> will never terminate when <code>fseek()</code> is the last command within the loop.</p>\n\n<p>Instead, you could do:</p>\n\n<pre><code>for( ;; ) {\n    n = ftell(fp);\n    if( (c = getc(fp)) == EOF )\n         break;\n    printf(\"The character at %ld position is %c\\n\", n, c);\n    fseek(fp, 4l, SEEK_CUR);\n}\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 7868053, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-Bl_9eC4Kl-M/AAAAAAAAAAI/AAAAAAAAADM/NwBJVuvzjl8/photo.jpg?sz=128", "display_name": "daljinder singh", "link": "https://stackoverflow.com/users/7868053/daljinder-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 43639411, "answer_count": 1, "score": -2, "last_activity_date": 1493223990, "creation_date": 1493221454, "last_edit_date": 1493222267, "question_id": 43638871, "link": "https://stackoverflow.com/questions/43638871/fseek-crossing-file-limit-and-not-terminating", "title": "fseek() crossing file limit and not terminating", "body": "<p>In the last while loop, every 5th character stored in the file should be printed, but the loop is going on indefinitely and not terminating.\nthe feof() function should return 1 on reaching END OF FILE and the loop should be exited but the loop is going on indefinitely.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nmain() {\n  long n, k;\n  char c;\n  FILE *fp;\n  fp = fopen(\"RANDOM\", \"w\");\n\n  while ((c = getchar()) != EOF) {\n    putc(c, fp);\n  }\n\n  n = ftell(fp);\n  printf(\"\\nNo. of characters entered by the user is : %ld\\n\", n);\n  fclose(fp);\n  fp = fopen(\"RANDOM\", \"r\");\n\n  while(feof(fp) == 0) {\n    n = ftell(fp);\n    c = getc(fp);\n    printf(\"The character at %ld position is %c\\n\", n, c);\n    fseek(fp, 4l, 1);\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "fseek"], "comments": [{"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1493222933, "post_id": 43638864, "comment_id": 74327088, "body": "Just <code>fseek(fptr,sizeof(struct clientData)*(CliName-1),SEEK_SET)</code>. If that doesn&#39;t work play around.  It looks like <code>CliName</code> is actually a CliNUMBER? Based on user input."}, {"owner": {"reputation": 29, "user_id": 7210334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46b26bc94ed61d1ff7cf2204864b7382?s=128&d=identicon&r=PG", "display_name": "Kem", "link": "https://stackoverflow.com/users/7210334/kem"}, "reply_to_user": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1493223611, "post_id": 43638864, "comment_id": 74327541, "body": "Thank You so much, it worked and yes i will change cliname to cli number... many thanks.."}, {"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1493223804, "post_id": 43638864, "comment_id": 74327682, "body": "I&#39;ll Post as the answer"}, {"owner": {"reputation": 29, "user_id": 7210334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46b26bc94ed61d1ff7cf2204864b7382?s=128&d=identicon&r=PG", "display_name": "Kem", "link": "https://stackoverflow.com/users/7210334/kem"}, "reply_to_user": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1493224023, "post_id": 43638864, "comment_id": 74327803, "body": "Definitely, do that."}], "answers": [{"tags": [], "owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "is_accepted": true, "score": 0, "last_activity_date": 1493223851, "creation_date": 1493223851, "answer_id": 43639720, "question_id": 43638864, "link": "https://stackoverflow.com/questions/43638864/use-fseek-with-structure-array-in-c/43639720#43639720", "title": "use fseek with structure array in c", "body": "<p>Use </p>\n\n<pre><code>fseek(fptr,sizeof(struct clientData)*(CliName-1),SEEK_SET)\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7210334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46b26bc94ed61d1ff7cf2204864b7382?s=128&d=identicon&r=PG", "display_name": "Kem", "link": "https://stackoverflow.com/users/7210334/kem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1425, "favorite_count": 0, "accepted_answer_id": 43639720, "answer_count": 1, "score": 0, "last_activity_date": 1493223851, "creation_date": 1493221433, "question_id": 43638864, "link": "https://stackoverflow.com/questions/43638864/use-fseek-with-structure-array-in-c", "title": "use fseek with structure array in c", "body": "<p>everyone.so I have this binary file with data written to it using an array of structures. Now I want to update a specific record in it. however, i am unsure of how to achieve this based on using fseek. Could anyone please offer some assistance?</p>\n\n<pre><code>struct clientData{\n    char cliName[16];\n    char persIdNum[10];\n    int pos;\n    char empID[6];\n\n};\n\n\n     FILE* fptr;\n    //FILE* f;\n    char compName[15];\n    printf(\"Enter company name: \");\n    scanf(\" %s\", compName);\n    fptr = fopen(strcat(compName,\".dat\"), \"wb\");\n\n    struct clientData data[5];\n\n    int i;\n\n   for(i=0; i&lt;5; i++){\n\n            data[i].pos = i;\n            printf(\"\\nEnter client name %d: \", i+1);\n            scanf(\" %s\", data[i].cliName);\n\n            printf(\"\\nEnter client personal id %d: \", i+1);\n            scanf(\" %s\", data[i].persIdNum);\n\n            printf(\"\\nEnter employee ID %d: \", i+1);\n            scanf(\" %s\", data[i].empID);\n}\n\n    fwrite(data, sizeof(struct clientData), 5, fptr);\n    fclose(fptr);\n///////////////////////////////////////////////////////////////////////////////////////////////////////\n\nFILE *fptr;\nstruct clientData info[5];\n\nfptr = fopen(CmpName, \"rb+\");\n\n        if (fptr == NULL)\n            printf(\"eRROR OPENING\");\n     do {\n       system(\"cls\");\n    printf(\"\\n\\t\\t\\t   CLIENTS IN FILE: %s \", CmpName);\n     for(i=0; i&lt;5; i++){\n        fread(info, sizeof(struct clientData), 5, fptr);\n        printf(\"\\n\\n\\t\\t\\t\\t%d  %s\", info[i].pos+1, info[i].cliName);\n     }\n\n    printf(\"\\n\\t\\t******************************************************\");\n\n    printf(\"\\n\\n\\t\\t\\tSelect client name to be updated: \");\n    scanf(\" %d\", &amp;CliName);\n        if(CliName &gt;=1 &amp;&amp; CliName &lt;=5 ){\n\n            correct = true;\n            for(i=0; i&lt;5; i++){\n                fread(info, sizeof(struct clientData), 5, fptr);\n\n/*i want to fseek to the positon of the data selected above by the user.\nwhere should i put it?*/\n\n                         printf(\"\\n\\n\\t\\t\\tEnter New Client Name:\");;\n                         scanf(\" %s\", NewCliName);\n\n                         printf(\"\\n\\n\\t\\t\\tEnter New Client Personal ID:\");;\n                         scanf(\" %s\", NewCliPersID);\n\n                         strcpy(info[i].cliName, NewCliName);\n                         strcpy(info[i].persIdNum, NewCliPersID);\n\n                         fwrite(info, sizeof(struct clientData), 5, fptr);\n                         break;\n                         }//END OF FOR LOOP\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1493221412, "post_id": 43638832, "comment_id": 74326019, "body": "C != C++. If this is C++, you should use C++ constructs and don&#39;t tag C, if this is C, don&#39;t tag C++."}, {"owner": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "edited": false, "score": 2, "creation_date": 1493221707, "post_id": 43638832, "comment_id": 74326227, "body": "If that is what you want, you can read the string and chars at the same time. Read char by char, when you encounter a space, start a new word but continue adding it to the chars. But really in your program you aren&#39;t reading the chars in, but reading the char and outputting it..."}, {"owner": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 1, "creation_date": 1493221771, "post_id": 43638832, "comment_id": 74326281, "body": "<code>rewind(wordFile);</code> between passes?"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 1, "creation_date": 1493221839, "post_id": 43638832, "comment_id": 74326327, "body": "It&#39;s safer for you to set the buffer size in the <code>fscanf</code> format argument. 225 chars should be big enough, but it&#39;s still better to be safe than sorry: <code>fscanf(wordFile, &quot;%224s&quot;, &amp;word)</code>"}, {"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1493221843, "post_id": 43638832, "comment_id": 74326331, "body": "I&#39;m not sure what the issue is.  Once you <code>fscanf</code> your pointer is moved.  In your 1st loop after, your word count, do a <code>strlen</code> to get the charCount."}, {"owner": {"reputation": 31, "user_id": 7839375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/512c9d03060f4636640a61901586af13?s=128&d=identicon&r=PG&f=1", "display_name": "user7839375", "link": "https://stackoverflow.com/users/7839375/user7839375"}, "edited": false, "score": 0, "creation_date": 1493222749, "post_id": 43638832, "comment_id": 74326957, "body": "I know there&#39;s other ways of doing this but I <b>need</b> to do it this way. I need to use a loop to get the strings and a loop to get the chars and in those loop I need to print them out. I just want to understand why I can&#39;t use the same file twice to do this. I can&#39;t use anything else but what I already have in my code. Thanks for the suggestions though, again not trying to get you guys to do this for me I&#39;m just asking one thing: How can I use the same file twice in both loops?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493224569, "post_id": 43638832, "comment_id": 74328148, "body": "What is the longest word in &quot;Story.txt&quot;?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493224669, "post_id": 43638832, "comment_id": 74328219, "body": "<code>fclose(wordFile);  FILE* charFile = fopen(&quot;Story.txt&quot;,&quot;r&quot;);</code> --&gt; <code>rewind(wordFile);</code>"}, {"owner": {"reputation": 31, "user_id": 7839375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/512c9d03060f4636640a61901586af13?s=128&d=identicon&r=PG&f=1", "display_name": "user7839375", "link": "https://stackoverflow.com/users/7839375/user7839375"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493225037, "post_id": 43638832, "comment_id": 74328430, "body": "@chux I can only use what&#39;s already in my code sorry so I wouldn&#39;t be able to use &#39;rewind&#39;, thank you for your answer though. Also, the longest word in &quot;Story.txt&quot; is &quot;Something&quot;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493327690, "post_id": 43638832, "comment_id": 74382928, "body": "you can eliminate the extra open/close calls and the second FILE* variable by calling <code>fseek( wordFile, 0, SEEK_SET );</code> or <code>rewind( wordFile );</code>"}], "answers": [{"tags": [], "owner": {"reputation": 357, "user_id": 7763210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2431674aae29bd58336eaa2fcb83ba91?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammed Bakr Sikal", "link": "https://stackoverflow.com/users/7763210/mohammed-bakr-sikal"}, "is_accepted": false, "score": 0, "last_activity_date": 1493222587, "creation_date": 1493222587, "answer_id": 43639288, "question_id": 43638832, "link": "https://stackoverflow.com/questions/43638832/fscanf-wont-work-twice/43639288#43639288", "title": "fscanf won&#39;t work twice?", "body": "<pre><code>fscanf(wordFile,\"%s\",&amp;word);\n</code></pre>\n\n<p>The variable \"word\" is the pointer to the first element of your array (string), so here you are scanning the address not the value. You should rather use: </p>\n\n<pre><code>fscanf(wordFile,\"%s\",word);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 7839375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/512c9d03060f4636640a61901586af13?s=128&d=identicon&r=PG&f=1", "display_name": "user7839375", "link": "https://stackoverflow.com/users/7839375/user7839375"}, "edited": false, "score": 0, "creation_date": 1493246535, "post_id": 43639664, "comment_id": 74339794, "body": "thank you I understand now, but why do I need to set it to the beginning of the file? Is this just how &#39;fscanf&#39; works, so every time I want to scan the entire file I need to set it back to the beginning?"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 31, "user_id": 7839375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/512c9d03060f4636640a61901586af13?s=128&d=identicon&r=PG&f=1", "display_name": "user7839375", "link": "https://stackoverflow.com/users/7839375/user7839375"}, "edited": false, "score": 0, "creation_date": 1493260898, "post_id": 43639664, "comment_id": 74343638, "body": "<code>so every time I want to scan the entire file I need to set it back to the beginning? </code> - YES ! But this is a very lazy approach as I already mentioned. A better option would be count the number of characters in each string, isn&#39;t it?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 31, "user_id": 7839375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/512c9d03060f4636640a61901586af13?s=128&d=identicon&r=PG&f=1", "display_name": "user7839375", "link": "https://stackoverflow.com/users/7839375/user7839375"}, "edited": false, "score": 0, "creation_date": 1493327990, "post_id": 43639664, "comment_id": 74383076, "body": "@user7839375, it has nothing to do with <code>fscan()</code> but rather the concept of the <code>current file pointer</code>  which indicates the location in the file where a read or write operation will be preformed.  each call to <code>fscan()</code> advances that &#39;current file pointer` through the file by the number of bytes read.  So after the first loop is completed, the <code>current file pointer</code> will indicate the end of the file.  a call to <code>rewind()</code> or <code>fseek( wordFile, 0, SEEK_SET);</code> will move the <code>current file pointer</code> back to the beginning of the file"}], "tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": true, "score": 1, "last_activity_date": 1493223659, "creation_date": 1493223659, "answer_id": 43639664, "question_id": 43638832, "link": "https://stackoverflow.com/questions/43638832/fscanf-wont-work-twice/43639664#43639664", "title": "fscanf won&#39;t work twice?", "body": "<p>Do something like below - the lazy way of course</p>\n\n<pre><code>char word[225]; \nchar c; \nint wordCount = 0; \nint charCount = 0; \n\nFILE* wordFile = fopen(\"Story.txt\",\"r\"); \n\nprintf(\"Words: \"); \n\nwhile(fscanf(wordFile,\"%s\",word)==1){  // word gives the address not &amp;word\n    wordCount = wordCount + 1; \n}\n\nprintf(\"%d\\n\",wordCount);\n\nfseek(wordFile,0,SEEK_SET); // setting the file pointer to point to the beginning of file\n\nprintf(\"Chars: \"); \n\nwhile(fscanf(wordFile,\"%c\",&amp;c)==1){ \n    if(c!=' '&amp;&amp; c!='\\n' &amp;&amp; c!='\\t'){ \n        charCount = charCount + 1; \n    }\n}\nprintf(\"%d\\n\",charCount);\nfclose(wordFile);  // Closing the file once for all\n\nreturn 0;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7839375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/512c9d03060f4636640a61901586af13?s=128&d=identicon&r=PG&f=1", "display_name": "user7839375", "link": "https://stackoverflow.com/users/7839375/user7839375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1093, "favorite_count": 0, "accepted_answer_id": 43639664, "answer_count": 2, "score": 1, "last_activity_date": 1493223659, "creation_date": 1493221337, "last_edit_date": 1495540466, "question_id": 43638832, "link": "https://stackoverflow.com/questions/43638832/fscanf-wont-work-twice", "title": "fscanf won&#39;t work twice?", "body": "<p>I'm just trying to get fscanf to read all the characters in a file, along with all the words, but whenever I try to run a <code>while</code>loop on the file I opened twice it doesn't seem to work? It only seems to be able to use <code>fscanf</code>on a file <strong>one time</strong>. I found a work around where I can scan the same file twice except I need to open the file a <strong>2nd time</strong> for this to work. How can I use <code>fscanf</code> on the same instance of a file twice?</p>\n\n<pre><code>/*Description: Program will open a file named Story.txt\n           then counts the number of words and characters\n           and prints them out */\n\nint main(){\n\nchar word[225]; // will be used to hold words (array of chars)\nchar c; // will be used to hold chars\nint wordCount = 0; // will be used to hold the number of words in the file\nint charCount = 0; // will be used to hold the number of chars in the file\n\nFILE* wordFile = fopen(\"Story.txt\",\"r\"); // opens the file Story.txt for counting words\n\nprintf(\"Words: \"); // indicates that the following outout will be the words of the file\n\nwhile(fscanf(wordFile,\"%s\",&amp;word)==1){ // a loop to scan the file for all the words in it until the end of the file\n    printf(\" %s \",word); // prints out the word in the given cycle\n    wordCount = wordCount + 1; // keeps count of the words the loop has scanned up till now\n}\n\nfclose(wordFile); // closes wordFile and frees the memory\nFILE* charFile = fopen(\"Story.txt\",\"r\"); // opens file Story.txt for counting chars\n\nprintf(\"\\n\\nChars: \"); // indicates the following output will be the chars of the file\n\nwhile(fscanf(charFile,\"%c\",&amp;c)==1){ // a loop to scan the file for all the chars in it until the end fot he file\n    if(c!=' '){ // will check if the char is a space, if it is it will not count it\n        printf(\" %c \",c); // prints out the char for the given cycle\n        charCount = charCount + 1; // keeps count of the chars the loop has scanned up till now\n    }\n}\n\nfclose(charFile); // closes charFile and frees the memory\n\nprintf(\"\\n\\nWord count: %d and Char count: %d\",wordCount,charCount-1); // prints out the word count and char count\n\nreturn 0;\n}\n</code></pre>\n\n<p>As you can see i have to create <strong>two</strong> instances of the file or else it will not work. The first instance is called <code>wordFile</code> and the 2nd instance is called <code>charFile</code>. Here's the thing though: <strong>Both loops work</strong>, it's just that I can't use them on the same file <strong>twice</strong>. How can I make it so that I will only need to open <strong>one</strong> instance of the file and then use it to count both the words and the chars in it? </p>\n\n<p>Things I tried: adding the space as suggested here didn't work: <a href=\"https://stackoverflow.com/questions/9562218/c-multiple-scanfs-when-i-enter-in-a-value-for-one-scanf-it-skips-the-second-s\">C: Multiple scanf&#39;s, when I enter in a value for one scanf it skips the second scanf</a> (i searched fscanf but scanf is all that came up so i went off of that).</p>\n\n<p>Another work around that I found strange: if i use <code>wordFile</code>in the 2nd while loop to search for chars it works, the only problem is I have to declare <code>fclose(wordFile);</code> <strong>right before</strong> it's used in the <code>while</code> loop. I thought <code>fclose</code>was suppose to close the file and make it unusable? Anyways that worked but what I really want is to use use <strong>one instance of the file</strong> to read all the chars and strings in it. </p>\n"}, {"tags": ["c", "pointers", "tizen", "tizen-wearable-sdk"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7818274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e17e4458e5d26b266bab53b2abaeb?s=128&d=identicon&r=PG&f=1", "display_name": "Moon Technolabs Pvt Ltd", "link": "https://stackoverflow.com/users/7818274/moon-technolabs-pvt-ltd"}, "edited": false, "score": 0, "creation_date": 1493382945, "post_id": 43639632, "comment_id": 74406825, "body": "Hi John, Thanks for clear out doubt but still not work with Try1. please see my question on Tizen Community <a href=\"https://developer.tizen.org/forums/native-application-development/failed-concate-pointer-variables#none\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 51, "user_id": 7818274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e17e4458e5d26b266bab53b2abaeb?s=128&d=identicon&r=PG&f=1", "display_name": "Moon Technolabs Pvt Ltd", "link": "https://stackoverflow.com/users/7818274/moon-technolabs-pvt-ltd"}, "edited": false, "score": 0, "creation_date": 1493395076, "post_id": 43639632, "comment_id": 74414736, "body": "@MTTeam, I will not refer to your posts on some other site; any information on which an answer here should be based must be presented in the question <i>here</i>.  There is nothing more that can be said based on the information currently provided.  If you take nothing else from this answer, you should take this: the main problem with your Try 1 is likely not with the code you&#39;ve posted, but rather with the data it is operating on, i.e. the values you are assigning to <code>id0</code> and <code>id1</code>, and the data, if any, to which they point."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1493223845, "last_edit_date": 1592644375, "creation_date": 1493223541, "answer_id": 43639632, "question_id": 43638637, "link": "https://stackoverflow.com/questions/43638637/failed-to-concate-pointer-variables/43639632#43639632", "title": "Failed to concate pointer variables", "body": "<h2>Concerning your try 1</h2>\n<p>Given that <code>finalFrame</code> is pointer array, these declarations and their initializers are fine:</p>\n<blockquote>\n<pre><code>  char *id1 = finalFrame[6]; //0\n  char *id0 = finalFrame[7]; //3 \n</code></pre>\n</blockquote>\n<p>but they do not appear to go with the formats in these print statements:</p>\n<blockquote>\n<pre><code>  dlog_print(DLOG_INFO, LOG_TAG, &quot;id0 : %d&quot;, id0); // output: id1 : 0 \n  dlog_print(DLOG_INFO, LOG_TAG, &quot;id1 : %d&quot;, id1); // output: id1 : 3 \n</code></pre>\n</blockquote>\n<p>Supposing that <code>dlog_print()</code> uses <code>printf</code>'s format string language, if you mean to print the values of the pointers themselves then you should use the <code>%p</code> field descriptor, not <code>%d</code>.  If you mean to print the contents of the character arrays to which they point (assuming them to be null-terminated) then you would use <code>%s</code>.  Using <code>%d</code> produces undefined behavior, but I'm prepared to speculate that the fact that the first <code>dlog_print()</code> outputs &quot;0&quot; indicates that <code>id0</code>'s value is a null pointer, and the fact that the second outputs &quot;3&quot; suggests that <code>id1</code>'s value is probably not a valid pointer.</p>\n<p>If <code>id0</code> and <code>id1</code> were valid pointers to null-terminated character arrays, then the rest of try 1 would be just fine, but the fact that you get a crash on the next line:</p>\n<blockquote>\n<pre><code>   if((idP = (char *)malloc(strlen(id0) + strlen(id1) + 1)) != NULL){ // appcrash here\n</code></pre>\n</blockquote>\n<p>tends to support the hypothesis that one or both of your pointers are invalid.</p>\n<h2>Concerning try 2</h2>\n<p>This relies on there being enough unused space in the array pointed to by the first argument to accommodate the contents of the string to which the second points, plus the space you insert between (the terminator is already accounted for if the argument indeed points to a null-terminated string).  When that condition is satisfied, and the arguments are in fact valid pointers to null-terminated strings in the first place, it should work fine.</p>\n<h2>Concerning try 3</h2>\n<p>Given this declaration:</p>\n<blockquote>\n<pre><code>char *prefixAry[2];\n</code></pre>\n</blockquote>\n<p>... this allocation attempt is incorrect:</p>\n<blockquote>\n<pre><code>char *prefix = malloc(sizeof(char) * strlen(prefixAry) + 1);//+1 for the zero-terminator;\n</code></pre>\n</blockquote>\n<p>In the first place, <code>prefixAry</code> is not initialized.  If it has file scope then its elements will be initialized to null pointers by default; otherwise, its initial value is indeterminate.  You cannot use it like that for your purpose, so let us move on by supposing that it was initialiized:</p>\n<pre><code>char *prefixAry[2] = { &quot;one&quot;, &quot;two&quot; };\n</code></pre>\n<p>That still does not save the allocation, however, because it depends on <code>strlen(prefixAry)</code>.  The argument to <code>strlen()</code> must be a pointer to a null-terminated array of <code>char</code>, and that's not what you are providing.  Nor would <code>sizeof()</code> be right, either, for it would get you the combined size of two <em>pointers</em>, whereas you need the size of the data to which they point.</p>\n<p>To rescue this, you would need something like</p>\n<pre><code> char *prefix = malloc(strlen(prefixAry[0]) + strlen(prefixAry[1]) + 1);\n</code></pre>\n<p>Note that <code>sizeof(char)</code> is 1 by definition, and that this allocation is now equivalent to the one in your &quot;Try 1&quot;.</p>\n<p>Having allocated enough space, the <code>strcat()</code>-based approach in this alternative is viable.</p>\n"}], "owner": {"reputation": 51, "user_id": 7818274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e17e4458e5d26b266bab53b2abaeb?s=128&d=identicon&r=PG&f=1", "display_name": "Moon Technolabs Pvt Ltd", "link": "https://stackoverflow.com/users/7818274/moon-technolabs-pvt-ltd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1493354764, "creation_date": 1493220822, "last_edit_date": 1493221795, "question_id": 43638637, "link": "https://stackoverflow.com/questions/43638637/failed-to-concate-pointer-variables", "title": "Failed to concate pointer variables", "body": "<p>I want to concat two pointer variable. try different apporch but failed, No Resource found - No address found error comes.  </p>\n\n<p>FYI: Tizen Wearable SDK 3.0 Samsung Gear S2 watch</p>\n\n<p>Try1:</p>\n\n<pre><code>  char *idP;\n\n  //finalFrame is pointer array. \n  //finalFrame is char Array char *finalFrame[25]\n  char *id1 = finalFrame[6]; //0\n  char *id0 = finalFrame[7]; //3 \n  dlog_print(DLOG_INFO, LOG_TAG, \"id0 : %d\", id0); // output: id1 : 0 \n  dlog_print(DLOG_INFO, LOG_TAG, \"id1 : %d\", id1); // output: id1 : 3 \n\n   if((idP = (char *)malloc(strlen(id0) + strlen(id1) + 1)) != NULL){ // appcrash here\n                *idP='\\0';\n                strcpy(idP, id1);\n                strcat(idP, id0);\n                dlog_print(DLOG_INFO, LOG_TAG, \"-----idP %s\",idP);\n            }else{\n                dlog_print(DLOG_INFO, LOG_TAG, \"No memory\");\n            }\n</code></pre>\n\n<p>Try2:</p>\n\n<pre><code>char *idP=concat(id1,id0);\n\ndlog_print(DLOG_INFO, LOG_TAG, \"-----id : %s\", idP); // but failed\n\n//method\nchar * concat(char *str1, char *str2) {\nchar *conc = str1;\n\nwhile (*str1 != '\\0')\n    str1++;\n\n*str1 = ' ';\n++str1;\n\nwhile (*str2 != '\\0') {\n    *str1 = *str2;\n    str1++, str2++;\n}\n\n*str1 = '\\0';\n//printf(\"Concatenated String:\\n\");\n//puts(conc);\ndlog_print(DLOG_INFO, LOG_TAG, \"%s\", conc);\nreturn conc;\n\n}\n</code></pre>\n\n<p>Try 3:</p>\n\n<pre><code> char *prefixAry[2];\nchar *prefix = malloc(sizeof(char) * strlen(prefixAry) + 1);//+1 for the zero-terminator;\n             *prefix = '\\0';\n             strcat(prefix, prefixAry[0]); //any value set\n             strcat(prefix, prefixAry[1]); //any value set\n             dlog_print(DLOG_INFO, LOG_TAG, \"-----Prefix : %s\", prefix);\n</code></pre>\n\n<p>Am i doing right way ? Please help.</p>\n\n<p>Actually i am parsing frames which comes from BLE chip. i have to decode it and get information then display it on UI. so choose array.</p>\n\n<p>checkout my other issue if any different approch will appply:<a href=\"https://developer.tizen.org/ko/forums/native-application-development/read-write-value-custom-ble-chip.-native-wear-3.0?langredirect=1\" rel=\"nofollow noreferrer\">ISSUE1</a> </p>\n\n<p>Thanks in advance.\nRegards.</p>\n"}, {"tags": ["c", "plc", "modbus-tcp"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1493220748, "post_id": 43638471, "comment_id": 74325501, "body": "This is not only far too broad but also primarily opinion-based, <i>and</i> it is off-topic on account of seeking opinions / recommendations for off-site resources -- a trifecta in just five lines!"}, {"owner": {"reputation": 28846, "user_id": 327083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i8ttM.png?s=128&g=1", "display_name": "J...", "link": "https://stackoverflow.com/users/327083/j"}, "edited": false, "score": 3, "creation_date": 1493221904, "post_id": 43638471, "comment_id": 74326362, "body": "I also agree that this is completely off topic.  Forget about the dream of perfect PLC interoperability.  OPC is as close as you&#39;re going to get for a standard.  If you need to solve a real-world problem, first pick a PLC - this will be based on its performance requirements and your budget.  Then pick a protocol to talk to it with - depending on manufacturer sometimes the proprietary tools are faster, easier, better, cheaper (or all of the above) than an OPC solution.  Don&#39;t write your own Modbus... you will almost certainly get it wrong."}], "owner": {"reputation": 1, "user_id": 7899975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e917fadcd2d5492a232c8a1560409304?s=128&d=identicon&r=PG&f=1", "display_name": "Cedric", "link": "https://stackoverflow.com/users/7899975/cedric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493223626, "creation_date": 1493220446, "last_edit_date": 1493223626, "question_id": 43638471, "link": "https://stackoverflow.com/questions/43638471/collect-and-change-data-into-a-plc", "title": "Collect and change data into a PLC", "body": "<p>I am working on a project to collect and change the data into a PLC. I would like to work with any PLC manufacturers so I guess the best way is to create my own modbus communication protocol and not use the OPC protocol (to avoid to be dependant of manufacturers).</p>\n\n<p>What do you think it is the best: OPC protocol or directly in ModBus protocol?</p>\n\n<p>Also, I found modbus libraries libmodbus and nmodbus what do you think about them? Do you think my project is feasible?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 3, "creation_date": 1493220557, "post_id": 43638449, "comment_id": 74325355, "body": "So, what exactly is your question?"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 2, "creation_date": 1493220678, "post_id": 43638449, "comment_id": 74325453, "body": "Characters are - surprise! - <i>numbers</i> you can do regular math with."}, {"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "edited": false, "score": 0, "creation_date": 1493220753, "post_id": 43638449, "comment_id": 74325506, "body": "Refer to this page to check your index: <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">asciitable.com</a>"}, {"owner": {"reputation": 313, "user_id": 6472208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc8bde1900fd9f0ca22c7c014fbabe50?s=128&d=identicon&r=PG&f=1", "display_name": "Davigor", "link": "https://stackoverflow.com/users/6472208/davigor"}, "reply_to_user": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 0, "creation_date": 1493221028, "post_id": 43638449, "comment_id": 74325722, "body": "@dan04 Sorry, I realize I didn&#39;t make it clear. My code doesn&#39;t print the line  <code>printf(&quot;%c&quot;, ((p[i] - &#39;a&#39;) + ((argv[1][i % m]) - &#39;a&#39;)) % 26);</code>  but it does if the line is only  <code>printf(&quot;%c&quot;, p[i] + argv[1][i % m]);</code>  I don&#39;t know why this is."}], "answers": [{"comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1493220921, "post_id": 43638556, "comment_id": 74325644, "body": "Characters are <code>int</code>s?! OMG, this is why <code>strchr</code>&#39;s second argument is an integer! Now, why do we need <code>char</code> and, especially, <code>char *</code> to represent strings if we could&#39;ve used <code>int *</code> everywhere?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1493220973, "post_id": 43638556, "comment_id": 74325687, "body": "Cuz pointer arithmetic on <code>int*</code> is platform specific and the C standard specifies sizeof(char) to be 1. Funnily enough, I answered a question on this yesterday. See <a href=\"http://stackoverflow.com/questions/43621142/why-does-this-printf-statement-output-0/43621502#43621530\" title=\"why does this printf statement output 0\">stackoverflow.com/questions/43621142/&hellip;</a>"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1493221366, "post_id": 43638556, "comment_id": 74325976, "body": "this is the problem, to my mind: what if I&#39;m using some Unicode characters and try to put them into an array of <code>char</code>s? Can&#39;t they be too large to be put into a <code>char</code> to get out of <code>char</code>&#39;s bounds and thus be truncated violently?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1493221478, "post_id": 43638556, "comment_id": 74326073, "body": "You can&#39;t easily stuff UTF-16 into a char array. You need a wide character type to do that. Lots of stuff on the internet on this."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1493221914, "post_id": 43638556, "comment_id": 74326367, "body": "@ForceBru Be aware that character <i>literals</i> are of type int (i. e. when you write &#39;a&#39;, &#39;b&#39;, &#39;7&#39;, ...)! (By the way: different in C++...) If you write <code>char c;</code> then c is of type char occupying one single byte (compared to 4 of int on most modern systems)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1493222032, "post_id": 43638556, "comment_id": 74326467, "body": "@ForceBru &quot;unicode characters and try to [...]&quot; - this is where utf-8 comes into play - unicode code points above 127 need to be distributed over multiple bytes."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1493222147, "post_id": 43638556, "comment_id": 74326538, "body": "@Aconcagua, right, this makes me wonder why even use <code>char</code> for strings, if we could&#39;ve used <code>int</code>s instead to be able to work with Unicode and stuff that goes beyond ASCII?.. And all these fancy wide characters could safely go to hell."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1493222220, "post_id": 43638556, "comment_id": 74326593, "body": "@Aconcagua, yeah, but why deal with such a nightmare if I could&#39;ve put a Unicode character into one single <code>int</code>?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1493222362, "post_id": 43638556, "comment_id": 74326697, "body": "@ForceBru: you might not be able to, if <code>int</code> is a 1&#39;s complement 16 bit. I&#39;d be inclined to stuff the data into what essentially boils down to an <code>unsigned char</code> array."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1493222367, "post_id": 43638556, "comment_id": 74326702, "body": "@ForceBru One could (assuming 4 byte integers - and one would use the unsigned variant then) - but that would blow up the vast majority of text documents by factor of four, as most get along quite well with ASCII only. In most other languages, only few characters need to be encoded with two bytes, e. g. in German &#228;&#246;&#252;&#223;&#196;&#214;&#220;, Spanish &#241;&#191;&#161; (and others)."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1493222793, "post_id": 43638556, "comment_id": 74326988, "body": "@Aconcagua, I completely forgot that the size of text data actually matters XD Well, given the modern bazillion TB drives that may not be a huge problem, although I wouldn&#39;t enjoy it if I suddenly needed 4 times as much storage as I have now."}, {"owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1493223856, "post_id": 43638556, "comment_id": 74327717, "body": "@ForceBru: While <i>storage</i> may be cheap, RAM and network bandwidth are not as cheap.  Plus, there&#39;s the issue of backwards compatibility with APIs and protocols that expect text strings to consist of 8-bit code units.  Thus, UTF-8 remains a more popular encoding than UTF-32."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1493220631, "creation_date": 1493220631, "answer_id": 43638556, "question_id": 43638449, "link": "https://stackoverflow.com/questions/43638449/c-performing-mathematical-operations-on-string-characters/43638556#43638556", "title": "C- Performing mathematical operations on string characters", "body": "<p>You are correct, you can simplify your code.</p>\n\n<p>In C, things like <code>'a'</code> are <code>int</code> types. (Contrary to popular belief, they are <strong>not</strong> <code>char</code> types, it's just that the C standard guarantees that they can be assigned to a <code>char</code> type without any danger of overflow.) The single quotation notation is used to obviate the fact that C does not mandate a specific character <em>encoding</em>. That is, you ought not care what number <code>'a'</code> etc. represents. If you do care then strictly speaking your code is not portable C.</p>\n\n<p>So yes, your expressions of the form <code>(a - b) - (c - b)</code> simplify to <code>a - c</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "edited": false, "score": 0, "creation_date": 1493221629, "post_id": 43638849, "comment_id": 74326174, "body": "He should have seen my ascii table reference page. In there he will see that if he minus by 97, especially when dealing with character &#39;a&#39;, he will definitely get a NUL character."}, {"owner": {"reputation": 313, "user_id": 6472208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc8bde1900fd9f0ca22c7c014fbabe50?s=128&d=identicon&r=PG&f=1", "display_name": "Davigor", "link": "https://stackoverflow.com/users/6472208/davigor"}, "edited": false, "score": 0, "creation_date": 1493224842, "post_id": 43638849, "comment_id": 74328308, "body": "I&#39;ve been using an ASCII reference while writing this code. I&#39;ve modified the code a bit, but the problem still stands: <code>printf(&quot;%c&quot;, (p[i] + ((p[i] - &#39;a&#39;) + ((argv[1][i % m]) - &#39;a&#39;))) % 26);</code>  My logic is as follows: take the plaintext character <code>p[i]</code>, let&#39;s say &quot;b&quot;, and subtract a which = (98 - 97) = 1. Take the first cypher character from <code>argv</code> (the modulo is so it loops), let&#39;s say &quot;c&quot;, and subtract a (99 - 97) = 2. Add them, and do modulo 26 so it will wrap around if need be. Then add this to <code>p[i]</code> and print to get the cyphertext character. However, it&#39;s not printing anything."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 313, "user_id": 6472208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc8bde1900fd9f0ca22c7c014fbabe50?s=128&d=identicon&r=PG&f=1", "display_name": "Davigor", "link": "https://stackoverflow.com/users/6472208/davigor"}, "edited": false, "score": 0, "creation_date": 1493229121, "post_id": 43638849, "comment_id": 74330743, "body": "@Davigor Ah, sorry, got irritated from Bathsheba&#39;s subtraction - as you are <i>adding</i> the differences, calculation looks a little different. Sorry for being inattendant... Fixed the response now. The clue remains the same, though: You still have to add &#39;a&#39; (or &#39;A&#39;) after the modulo operation! Subtracting <code>2*&#39;a&#39;</code> is more efficient, by the way, as the multiplication is done at compile time and you are just subtracting a constant..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 313, "user_id": 6472208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc8bde1900fd9f0ca22c7c014fbabe50?s=128&d=identicon&r=PG&f=1", "display_name": "Davigor", "link": "https://stackoverflow.com/users/6472208/davigor"}, "edited": false, "score": 0, "creation_date": 1493229478, "post_id": 43638849, "comment_id": 74330948, "body": "@Davigor Your own variant (using the two differences) must look like this: <code>printf(&quot;%c&quot;, ((p[i] - &#39;a&#39;) + (argv[1][i % m] - &#39;a&#39;)) % 26 + &#39;a&#39;);</code> (adding &#39;a&#39; <i>after</i> the modulo calculation!)."}, {"owner": {"reputation": 313, "user_id": 6472208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc8bde1900fd9f0ca22c7c014fbabe50?s=128&d=identicon&r=PG&f=1", "display_name": "Davigor", "link": "https://stackoverflow.com/users/6472208/davigor"}, "edited": false, "score": 0, "creation_date": 1493233545, "post_id": 43638849, "comment_id": 74333408, "body": "@Aconcagua Right, I carefully checked through the math again and came to the same conclusion. Adding back in the &#39;a&#39; gives me what I need. My concern was that I thought it was a syntax problem, or a misunderstanding of how characters behave as integers in C. Thanks for the help!"}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 3, "last_activity_date": 1493229518, "last_edit_date": 1493229518, "creation_date": 1493221384, "answer_id": 43638849, "question_id": 43638449, "link": "https://stackoverflow.com/questions/43638449/c-performing-mathematical-operations-on-string-characters/43638849#43638849", "title": "C- Performing mathematical operations on string characters", "body": "<pre><code>printf(\"%c\", ((p[i] - 'a') + ((argv[1][i % m]) - 'a')) % 26);\n</code></pre>\n\n<p>Stolen from Bathsheba:</p>\n\n<blockquote>\n  <p>So yes, your expressions of the form (a - b) - (c - b) simplify to a - c.</p>\n</blockquote>\n\n<p>Well, (a - b) + (c - b) then gets a + c - 2*b, too...</p>\n\n<p>So you get first:</p>\n\n<pre><code>printf(\"%c\", (p[i] + argv[1][i % m] - 2*'a') % 26);\n//                                           ^  yet left...\n</code></pre>\n\n<p>Next point is % 26 - it will calculate values from 0 to 26 - which all are control characters you presumably do not want to see...</p>\n\n<p>Be aware that 'a' has a numerical value of 97 and 'A' of 65 (in ASCII, at least...). So you'll be interested in re-adding this value to your result:</p>\n\n<pre><code>printf(\"%c\", (p[i] + argv[1][i % m] - 2*'a') % 26 + 'a');\n//                                                ^ (or 'A' in the upper case case)\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 6472208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc8bde1900fd9f0ca22c7c014fbabe50?s=128&d=identicon&r=PG&f=1", "display_name": "Davigor", "link": "https://stackoverflow.com/users/6472208/davigor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 43638849, "answer_count": 2, "score": 0, "last_activity_date": 1493262326, "creation_date": 1493220387, "last_edit_date": 1493262326, "question_id": 43638449, "link": "https://stackoverflow.com/questions/43638449/c-performing-mathematical-operations-on-string-characters", "title": "C- Performing mathematical operations on string characters", "body": "<p>I'm confused about mathematical operations being performed on characters in C. This is for implementing a basic cypher. I'm working with a string stored in a command line argument, argv.</p>\n\n<pre><code>for (int i = 0, n = strlen(p), m = strlen(argv[1]); i &lt; n; i++)\n{\n    if ((p[i] &gt;= 'A' &amp;&amp; p[i] &lt;= 'Z') || (p[i] &gt;= 'a' &amp;&amp; p[i] &lt;= 'z'))\n    {\n        if (argv[1][i % m] &gt;= 'A' &amp;&amp; argv[1][i % m] &lt;= 'Z')\n        {\n            printf(\"%c\", ((p[i] - 'A') + ((argv[1][i % m]) - 'A')) % 26);\n        }\n\n        else if (argv[1][i % m] &gt;= 'a' &amp;&amp; argv[1][i % m] &lt;= 'z')\n        {\n            printf(\"%c\", ((p[i] - 'a') + ((argv[1][i % m]) - 'a')) % 26);\n        }\n    }\n\n    else \n    {\n        printf(\"%c\", p[i]);\n    }\n</code></pre>\n\n<p>My confusion comes in the \"printf\" lines. They aren't printing as written, and I don't know why. I did a few tests and found that my code will print fine if I remove the - 'a' and the % 26, to where it just looks like:</p>\n\n<pre><code>printf(\"%c\", p[i] + argv[1][i % m]);\n</code></pre>\n\n<p>I don't know why this is, however. In my eyes, what I'm trying to do should be no different than an example given by the prof.:</p>\n\n<pre><code>string s = get_string();\nif (s != NULL)\n{\n    for (int i = 0, n = strlen(s); i &lt; n; i++)\n    {\n        if (s[i] &gt;= 'a' &amp;&amp; s[i] &lt;= 'z')\n    {\n        printf(\"%c\", s[i] - ('a' - 'A'));\n    }\n    else\n    {\n        printf(\"%c\", s[i]);\n    }\n}\n</code></pre>\n\n<p>In particular, the line:</p>\n\n<pre><code>printf(\"%c\", s[i] - ('a' - 'A'));\n</code></pre>\n\n<p>Any guidance is much appreciated!</p>\n"}, {"tags": ["c", "arrays", "sorting", "pointers", "selection-sort"], "comments": [{"owner": {"reputation": 762, "user_id": 5456631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac7baf0c7db5e866813487fca4202ff?s=128&d=identicon&r=PG&f=1", "display_name": "Muntasir", "link": "https://stackoverflow.com/users/5456631/muntasir"}, "edited": false, "score": 1, "creation_date": 1493219576, "post_id": 43638087, "comment_id": 74324627, "body": "is the code really about quicksort?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 3, "creation_date": 1493219592, "post_id": 43638087, "comment_id": 74324641, "body": "Why are you asking for <code>quicksort</code> and your function name is <code>bubble</code>... o.O"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1493219707, "post_id": 43638087, "comment_id": 74324721, "body": "@Junsong Huang  There is no the quick sort, nor the bubble sort. I think there is the selection sort that is written incorrectly.:)"}, {"owner": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "edited": false, "score": 0, "creation_date": 1493219897, "post_id": 43638087, "comment_id": 74324854, "body": "@JunsongHuang when you say <code>quicksort</code>, you mean <code>qsort</code> right?"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7689954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de5c500c7f66620b723722197fb2fee5?s=128&d=identicon&r=PG&f=1", "display_name": "Junsong Huang", "link": "https://stackoverflow.com/users/7689954/junsong-huang"}, "edited": false, "score": 0, "creation_date": 1493220853, "post_id": 43638356, "comment_id": 74325585, "body": "thank you very much! it&#39;s my problem about the pointer. So can i think that i should exchange the address rather than the value, if i exchange the value, because the address isn&#39;t changed, when doing &#39;printf&#39;, the value won&#39;t be changed."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 9, "user_id": 7689954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de5c500c7f66620b723722197fb2fee5?s=128&d=identicon&r=PG&f=1", "display_name": "Junsong Huang", "link": "https://stackoverflow.com/users/7689954/junsong-huang"}, "edited": false, "score": 0, "creation_date": 1493220996, "post_id": 43638356, "comment_id": 74325700, "body": "@JunsongHuang It seems you are trying to sort the array of pointers according to the criteria that one value pointed to by one pointer is less than the value pointed to by another pointer. That is the original array of values is not changed. It is the array of pointers to the elements of the original array that is changed."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1493220168, "creation_date": 1493220168, "answer_id": 43638356, "question_id": 43638087, "link": "https://stackoverflow.com/questions/43638087/whats-wrong-with-my-c-program-its-about-pointer-and-selection-sort/43638356#43638356", "title": "What&#39;s wrong with my C program? It&#39;s about pointer and selection sort", "body": "<p>I have found neither the quick sort nor the bubble sort in the presented code.</p>\n\n<p>It seems you are trying to use the selection sort.</p>\n\n<p>I think that the function can look the following way.</p>\n\n<pre><code>void selection_sort( int * a[], int n )\n{\n    int i;\n\n    for ( i = 0; i &lt; n; i++ )\n    {\n        int position = i;\n        int j = i + 1;\n\n        for ( ; j &lt; n; j++ )\n        {\n            if ( *a[j] &lt; *a[position] ) position = j;\n        }\n\n        if ( position != i )\n        {\n            int *temp = a[position];\n            a[position] = a[i];\n            a[i] = temp;\n        }\n    }\n\n    for ( i = 0; i &lt; n; i++ ) printf( \"%d \", *a[i] );\n    putchar( '\\n' );\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7689954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de5c500c7f66620b723722197fb2fee5?s=128&d=identicon&r=PG&f=1", "display_name": "Junsong Huang", "link": "https://stackoverflow.com/users/7689954/junsong-huang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 43638356, "answer_count": 1, "score": -2, "last_activity_date": 1493220943, "creation_date": 1493219389, "last_edit_date": 1493220943, "question_id": 43638087, "link": "https://stackoverflow.com/questions/43638087/whats-wrong-with-my-c-program-its-about-pointer-and-selection-sort", "title": "What&#39;s wrong with my C program? It&#39;s about pointer and selection sort", "body": "<p>What's wrong with my C program? the title is to sort n number from small to large, when i run it, everything goes fine but the number isn't been sorted. I just don't know how to solve that although i have thought for a long time.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid selection(int *a[], int n);\nint main()\n{\n    int n;\n    int i;\n    scanf(\"%d\", &amp;n);\n    int *a[n];\n    int b[n];\n    srand((int) time(0));\n    for (i = 0; i &lt; n; i++)\n    {\n        b[i] = ((int) (rand() % 100));\n        a[i] = &amp;b[i];\n    }\n    selection(a, n);\n    return 0;\n}\n\nvoid selection(int *a[], int n)\n{\n    int i;\n    int j;\n    int position;\n    int temp;\n    for (i = 0; i &lt; n - 1; i++)\n    {\n        position = i;\n        for (j = i + 1; j &lt; n; j++)\n        {\n            if (*a[i] &gt; *a[j])\n                position = j;\n        }\n        temp = *a[i];\n        *a[i] = *a[position];\n        *a[position] = temp;\n    }\n    for (i = 0; i &lt; n - 1; i++)\n        printf(\"%d\\n\", *a[i]);\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "libcurl"], "comments": [{"owner": {"reputation": 2505, "user_id": 3118401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c066b73af214d8e7cf6b52f6ef75314a?s=128&d=identicon&r=PG", "display_name": "marcolz", "link": "https://stackoverflow.com/users/3118401/marcolz"}, "edited": false, "score": 1, "creation_date": 1493219881, "post_id": 43637632, "comment_id": 74324843, "body": "What are you missing then here ? <a href=\"https://curl.haxx.se/libcurl/c/CURLMOPT_SOCKETFUNCTION.html\" rel=\"nofollow noreferrer\">curl.haxx.se/libcurl/c/CURLMOPT_SOCKETFUNCTION.html</a> and <a href=\"https://curl.haxx.se/libcurl/c/curl_multi_socket_action.html\" rel=\"nofollow noreferrer\">curl.haxx.se/libcurl/c/curl_multi_socket_action.html</a>"}, {"owner": {"reputation": 334, "user_id": 7670016, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e748c5f3047fd4ec76e56626d00c5017?s=128&d=identicon&r=PG&f=1", "display_name": "code_worker", "link": "https://stackoverflow.com/users/7670016/code-worker"}, "reply_to_user": {"reputation": 2505, "user_id": 3118401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c066b73af214d8e7cf6b52f6ef75314a?s=128&d=identicon&r=PG", "display_name": "marcolz", "link": "https://stackoverflow.com/users/3118401/marcolz"}, "edited": false, "score": 0, "creation_date": 1493276668, "post_id": 43637632, "comment_id": 74349226, "body": "@marcolz it didn&#39;t mentioned where the curl_socket_t is from. That&#39;s why I&#39;m so confused. and what&#39;s the purpose of curl_socket_t?"}], "owner": {"reputation": 334, "user_id": 7670016, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e748c5f3047fd4ec76e56626d00c5017?s=128&d=identicon&r=PG&f=1", "display_name": "code_worker", "link": "https://stackoverflow.com/users/7670016/code-worker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1494056655, "creation_date": 1493218348, "last_edit_date": 1494056655, "question_id": 43637632, "link": "https://stackoverflow.com/questions/43637632/how-can-i-use-curl-multi-setoptcurlm-handle-curlmopt-socketfunction-socket-c", "title": "how can I use curl_multi_setopt(CURLM *handle, CURLMOPT_SOCKETFUNCTION, socket_callback)", "body": "<p>I see <code>curl_multi_setopt(CURLM *handle, CURLMOPT_SOCKETFUNCTION, socket_callback);</code> in <em>libcurl</em> homepage.</p>\n\n<p>I saw the info about the <code>socket_callback</code></p>\n\n<pre><code>int socket_callback(CURL *easy,      /* easy handle */\n                    curl_socket_t s, /* socket */\n                    int what,        /* describes the socket */\n                    void *userp,     /* private callback pointer */\n                    void *socketp);  /* private socket pointer */\n</code></pre>\n\n<p>where is the variable <code>curl_socket_t</code> from in <strong><em>libcurl</em></strong>? The document didn't mention it.</p>\n"}, {"tags": ["c", "char", "printf", "character", "scanf"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1493217507, "post_id": 43637255, "comment_id": 74322896, "body": "No, <code>scanf</code> actually <i>did</i> work and read the newline sent by pressing <code>Enter</code>. Why don&#39;t you just check the contents of <code>ch</code> after reading?"}, {"owner": {"reputation": 11760, "user_id": 9516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/66d55ddc7c1ec31e76623b4c1a7c0a85?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/9516/robert"}, "edited": false, "score": 1, "creation_date": 1493217670, "post_id": 43637255, "comment_id": 74323035, "body": "try scanf_s(&quot;%c&quot;, &amp;ch, 1);"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493218375, "post_id": 43637255, "comment_id": 74323614, "body": "What compiler are you using that did not generate  a warning for <code>scanf_s(&quot;%c&quot;, &amp;ch);</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493218461, "post_id": 43637624, "comment_id": 74323689, "body": "This answer also quietly changes <code>scanf_s()</code> to <code>scanf()</code>.  A critical difference with <code>%c</code>."}], "tags": [], "owner": {"reputation": 21, "user_id": 6652943, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208515214656057/picture?type=large", "display_name": "Aloysius Peter Augustine", "link": "https://stackoverflow.com/users/6652943/aloysius-peter-augustine"}, "is_accepted": false, "score": 0, "last_activity_date": 1493219135, "last_edit_date": 1493219135, "creation_date": 1493218329, "answer_id": 43637624, "question_id": 43637255, "link": "https://stackoverflow.com/questions/43637255/scanf-didnt-work/43637624#43637624", "title": "Scanf Didn&#39;t work", "body": "<p>try this : I changed scanf_s() to scanf and gave space to %c as the %c conversion specifier won't automatically skip any leading whitespace, so if there's a stray newline in the input stream (from a previous entry, for example) the scanf call will consume it immediately. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\nint a, result;\n// ***************** Menu *******************\nprintf(\"Hello !!! \\n The Operations That This Calculator Can Do :\");\nprintf(\"\\n1. Simple Operations\");\nprintf(\"\\n2. Calculate The Biggest Number\");\nprintf(\"\\n3. Taylor expansion\");\nprintf(\"\\n4. Sum Digits Of a Number\");\nprintf(\"\\n5. Found The Prime Numbers Before The Number That You Entered\");\nprintf(\"\\nEnter The Number Of Operation That You Want : \");\nscanf(\"%d\", &amp;a);\nif (a == 1){\nchar ch;\nint num1, num2;\nprintf(\"\\n Please Enter Your Operation Like That (- 5 3 ) : \");\nscanf(\" %c\", &amp;ch);\nif (ch == '-'){ scanf(\" %d\", &amp;num1); scanf(\" %d\", &amp;num2); result = num1 - \nnum2; printf(\"\\n &gt; %d\", result); }\nif (ch == '+'){ scanf(\" %d\", &amp;num1); scanf(\" %d\", &amp;num2); result = num1 + \nnum2; printf(\"\\n &gt; %d\", result); }  }\nsystem(\"pause\"); }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7816437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23cd50424faae95b1def3f6291c45b43?s=128&d=identicon&r=PG&f=1", "display_name": "M. Dear", "link": "https://stackoverflow.com/users/7816437/m-dear"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "closed_date": 1493223562, "answer_count": 1, "score": -5, "last_activity_date": 1493219135, "creation_date": 1493217341, "question_id": 43637255, "link": "https://stackoverflow.com/questions/43637255/scanf-didnt-work", "closed_reason": "Duplicate", "title": "Scanf Didn&#39;t work", "body": "<p>In my code second scanf doesn't work and couldn't read the character.\nHow can I solve that ?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\nint a, result;\n// ***************** Menu *******************\nprintf(\"Hello !!! \\n The Operations That This Calculator Can Do :\");\nprintf(\"\\n1. Simple Operations\");\nprintf(\"\\n2. Calculate The Biggest Number\");\nprintf(\"\\n3. Taylor expansion\");\nprintf(\"\\n4. Sum Digits Of a Number\");\nprintf(\"\\n5. Found The Prime Numbers Before The Number That You Entered\");\nprintf(\"\\nEnter The Number Of Operation That You Want : \");\nscanf_s(\"%d\", &amp;a);\nif (a == 1){\n    char ch;\n    int num1, num2;\n    printf(\"\\n Please Enter Your Operation Like That (- 5 3 ) : \");\n    scanf_s(\"%c\", &amp;ch);\n    if (ch == '-'){ scanf_s(\"%d\", &amp;num1); scanf_s(\"%d\", &amp;num2); result = num1 - num2; printf(\"\\n &gt; %d\", result); }\n    if (ch == '+'){ scanf_s(\"%d\", &amp;num1); scanf_s(\"%d\", &amp;num2); result = num1 + num2; printf(\"\\n &gt; %d\", result); }  }  return 0; }\n</code></pre>\n"}, {"tags": ["c", "linux", "directory"], "comments": [{"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 6, "creation_date": 1493216629, "post_id": 43636743, "comment_id": 74322166, "body": "that&#39;s not possible, and it&#39;s a mistake. you have to use the system call chdir(2) in order to change the pwd. whoever said you have to build your own doesn&#39;t know what they&#39;re talking about."}, {"owner": {"reputation": 55, "user_id": 7217505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f7e0f994e508c252553bc8f2a6e1d2?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/7217505/stefan"}, "reply_to_user": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1493216761, "post_id": 43636743, "comment_id": 74322269, "body": "I figured so, thank you for confirming this :)"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 5, "creation_date": 1493216838, "post_id": 43636743, "comment_id": 74322350, "body": "The current working directory of a process is controlled by the kernel.  To truly &quot;build your own&quot; you&#39;d have to modify the kernel.  As @AhmedMasud said, whoever said you have to build your own doesn&#39;t know what they&#39;re talking about.  One thing to be aware of, though, is that maybe you <i>shouldn&#39;t</i> change the working directory because it is a process-wide thing and can affect other parts of the program.  In general, <code>chdir()</code> is something to be used very carefully."}, {"owner": {"reputation": 931, "user_id": 2394967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFaiD.png?s=128&g=1", "display_name": "sknt", "link": "https://stackoverflow.com/users/2394967/sknt"}, "edited": false, "score": 1, "creation_date": 1493217049, "post_id": 43636743, "comment_id": 74322528, "body": "If this works: <a href=\"http://stackoverflow.com/questions/2375003/how-do-i-set-the-working-directory-of-the-parent-process\" title=\"how do i set the working directory of the parent process\">stackoverflow.com/questions/2375003/&hellip;</a> you could in theory use it - I think it could create a funny reaction. The real answer is, as already mentioned, yes - it&#39;s the only way."}, {"owner": {"reputation": 55, "user_id": 7217505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f7e0f994e508c252553bc8f2a6e1d2?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/7217505/stefan"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1493217540, "post_id": 43636743, "comment_id": 74322930, "body": "@JohnBollinger  I asked my lecturer and he specifically said I have to implement my own chdir function, rather than use the one ready at hand, which is why I found it so confusing."}, {"owner": {"reputation": 55, "user_id": 7217505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f7e0f994e508c252553bc8f2a6e1d2?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/7217505/stefan"}, "reply_to_user": {"reputation": 931, "user_id": 2394967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFaiD.png?s=128&g=1", "display_name": "sknt", "link": "https://stackoverflow.com/users/2394967/sknt"}, "edited": false, "score": 0, "creation_date": 1493217807, "post_id": 43636743, "comment_id": 74323147, "body": "@Skynet I&#39;d do that, but wouldn&#39;t that be a cheeky way to use chdir without formally calling it? :)"}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1493218416, "post_id": 43636743, "comment_id": 74323644, "body": "@JohnBollinger chdir(1) is not a utility of any sort (nature of changing present working directories being what they are cannot be a sub process), the shell command in bourne shell compatible is the built-in command cd"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1493218598, "post_id": 43636743, "comment_id": 74323806, "body": "@Stefan, your assignment already seems weird, as the working directory ordinarily is not directly relevant to the terminal, but rather to what ever is running <i>in it</i>, e.g. a shell, which will typically have its own provisions for such things.  I continue to suspect a misunderstanding here, possibly related to imprecise word usage.  If the lecturer insists that you implement <code>chdir</code>, then I suggest you seek their help or advice on how to implement it.  Feel free also to point them to this discussion."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1493219027, "post_id": 43636743, "comment_id": 74324216, "body": "@AhmedMasud, I&#39;ve seen too many operating systems in too many years.  You are correct that <code>chdir</code> is not the name of a standard utility, but I note that many shells from both major Unix families provide it as a builtin (though Bash and the original Bourne shell are not among those)."}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1493220440, "post_id": 43636743, "comment_id": 74325264, "body": "@JohnBollinger actually i stand corrected bourne shell did provide chdir; korn didn&#39;t"}], "answers": [{"comments": [{"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 3, "creation_date": 1493217546, "post_id": 43637036, "comment_id": 74322934, "body": "You can open the directory to obtain a file descriptor and use <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/fchdir.html\" rel=\"nofollow noreferrer\">fchdir()</a>. That conforms to the letter of the rule but not the spirit."}], "tags": [], "owner": {"reputation": 3133, "user_id": 3668462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Rj1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/3668462/johan"}, "is_accepted": true, "score": 3, "last_activity_date": 1493216779, "creation_date": 1493216779, "answer_id": 43637036, "question_id": 43636743, "link": "https://stackoverflow.com/questions/43636743/is-using-chdir-the-only-way-to-change-the-working-directory-in-linux-c/43637036#43637036", "title": "Is using chdir() the only way to change the working directory in Linux C?", "body": "<p>chdir() is the only way to change the current working directory of the process. If you are not allowed to use this function you can partially simulate chdir() by keeping track of the current directory in the application, e.g. by using a variable. Note that such a simulation will not be complete, in particular the working directory of child processes will be where your program was started, not then one in your variable.</p>\n"}], "owner": {"reputation": 55, "user_id": 7217505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f7e0f994e508c252553bc8f2a6e1d2?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/7217505/stefan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 43637036, "answer_count": 1, "score": 0, "last_activity_date": 1493216779, "creation_date": 1493216089, "last_edit_date": 1493216623, "question_id": 43636743, "link": "https://stackoverflow.com/questions/43636743/is-using-chdir-the-only-way-to-change-the-working-directory-in-linux-c", "title": "Is using chdir() the only way to change the working directory in Linux C?", "body": "<p>I have been given an assignment where I have to build a custom terminal using ncurses and C, and implementation of several commands is requested.</p>\n\n<p>One of the commands happens to be <em>chdir</em>, which is meant to change the working directory, however I could not find anything more relevant in C when it comes to changing the working directory besides the already built in chdir() function in C.</p>\n\n<p>It is requested I do <strong>not</strong> use the available chdir() function but rather build my own. I am not even sure if this is possible, or if it is a mistake, shouldn't directory handling be implementation dependent?</p>\n\n<p>Thank you for your time and help.</p>\n"}, {"tags": ["c", "visual-studio-2013", "vectorization", "c11", "sse2"], "answers": [{"comments": [{"owner": {"reputation": 11132, "user_id": 136285, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/98d92168760c5b402a315926e4700d5f?s=128&d=identicon&r=PG", "display_name": "malat", "link": "https://stackoverflow.com/users/136285/malat"}, "edited": false, "score": 0, "creation_date": 1493219329, "post_id": 43637411, "comment_id": 74324448, "body": "<code>gcc</code> seems to produce something much faster. I need to dig exactly what it is doing, but yes you are right my <code>in</code> expressed as <code>unsigned short</code> may not be trivial to use directly from SSE2."}, {"owner": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "reply_to_user": {"reputation": 11132, "user_id": 136285, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/98d92168760c5b402a315926e4700d5f?s=128&d=identicon&r=PG", "display_name": "malat", "link": "https://stackoverflow.com/users/136285/malat"}, "edited": false, "score": 0, "creation_date": 1493219921, "post_id": 43637411, "comment_id": 74324874, "body": "@malat, AFAIR, GCC can construct vectors &#171;by hand&#187;, filling multiple XMM registers and then unrolling several iterations to make use of them."}], "tags": [], "owner": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "is_accepted": true, "score": 1, "last_activity_date": 1493217762, "creation_date": 1493217762, "answer_id": 43637411, "question_id": 43635197, "link": "https://stackoverflow.com/questions/43635197/info-c5012-loop-not-parallelized-due-to-reason-1007/43637411#43637411", "title": "info C5012: loop not parallelized due to reason \u20181007\u2019", "body": "<p>Neither SSE2 nor its predecessor, SSE, have proper instructions that convert <code>uint16_t</code>-s into <code>double</code>-s.</p>\n\n<p>Convert <code>in</code> into <code>double*</code>.</p>\n"}], "owner": {"reputation": 11132, "user_id": 136285, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/98d92168760c5b402a315926e4700d5f?s=128&d=identicon&r=PG", "display_name": "malat", "link": "https://stackoverflow.com/users/136285/malat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 43637411, "answer_count": 1, "score": 1, "last_activity_date": 1493217762, "creation_date": 1493212120, "last_edit_date": 1493212697, "question_id": 43635197, "link": "https://stackoverflow.com/questions/43635197/info-c5012-loop-not-parallelized-due-to-reason-1007", "title": "info C5012: loop not parallelized due to reason \u20181007\u2019", "body": "<p>I am trying out the Auto-Vectorizer mode of Visual Studio 2013 on x86_64, and I am a bit surprised with the following. Consider the naive code:</p>\n\n<pre><code>static void rescale( double * __restrict out, unsigned short * __restrict in, size_t n, const double intercept, const double slope )\n{\n    for( size_t i = 0; i &lt; n; ++i )\n        out[i] = slope * in[i] + intercept;\n}\n</code></pre>\n\n<p>Visual Studio returns that it is failing on such naive example with:</p>\n\n<pre><code>--- Analyzing function: rescale\nc:\\users\\malat\\autovec\\vec.c(18) : info C5012: loop not parallelized due to reason '1007'\n</code></pre>\n\n<p>Where compilation line is (I am only interested in SSE2 for now):</p>\n\n<pre><code>cl vec.c /O2 /Qpar /Qpar-report:2\n</code></pre>\n\n<p>Looking at the documentation:</p>\n\n<ul>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/hh872235(v=vs.120).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/hh872235(v=vs.120).aspx</a></li>\n</ul>\n\n<p>Leads to:</p>\n\n<ul>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/jj658585(v=vs.120).aspx#BKMK_ReasonCode100x\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/jj658585(v=vs.120).aspx#BKMK_ReasonCode100x</a></li>\n</ul>\n\n<p>Which reads as:</p>\n\n<blockquote>\n  <p>The loop induction variable or the loop bounds are not signed 32-bit\n  numbers (int or long). Resolve this by changing the type of the\n  induction variable.</p>\n</blockquote>\n\n<p>Is there a way to rewrite this loop so that the Auto-Vectorizer mode is triggered properly ?</p>\n\n<p>I failed to rewrite the code using a simple approach:</p>\n\n<pre><code>static void rescale( double * __restrict out, unsigned short * __restrict in, size_t n, const double intercept, const double slope )\n{\n  const long first = (long)n;\n  const long secnd = n &gt; LONG_MAX ? n - LONG_MAX : 0;\n  for( long i = 0; i &lt; first; ++i )\n    out[i] = slope * in[i] + intercept;\n  for( long i = 0; i &lt; secnd; ++i )\n    out[LONG_MAX+i] = slope * in[LONG_MAX+i] + intercept;\n}\n</code></pre>\n\n<p>In the above case Visual Studio now reports:</p>\n\n<pre><code>--- Analyzing function: rescale\nc:\\users\\malat\\autovec\\vec.c(21) : info C5012: loop not parallelized due to reason '1000'\nc:\\users\\malat\\autovec\\vec.c(23) : info C5012: loop not parallelized due to reason '1000'\n</code></pre>\n\n<p>Which means:</p>\n\n<blockquote>\n  <p>The compiler detected a data dependency in the loop body.</p>\n</blockquote>\n\n<p>I cannot see where there would be a data dependency in my second case.</p>\n\n<p>How should I rewrite my initial code to please the Auto-Vectorizer mode of Visual Studio 2013 ?</p>\n"}, {"tags": ["c", "printing"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1493211173, "post_id": 43634768, "comment_id": 74317493, "body": "@Idos: A macro is not a variable! They are completely different concepts."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1493211186, "post_id": 43634768, "comment_id": 74317511, "body": "The symbol <code>Page</code> doesn&#39;t exist at run-time afaik, so it would be impossible to get it. It <i>may</i> be possible to stringify it at compile-time, but I&#39;d question why you&#39;d need to know the name of the preprocessor symbol."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1493211240, "post_id": 43634768, "comment_id": 74317562, "body": "@Carcigenicate: Of course there is a symbol &quot;Page&quot;. It is just in the pre--processor. (if the C language would even use that term)."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493211265, "post_id": 43634768, "comment_id": 74317590, "body": "@Olaf At runtime?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493211282, "post_id": 43634768, "comment_id": 74317604, "body": "You edited the comment. At run-time, no names exist at all, not just macros."}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1493211293, "post_id": 43634768, "comment_id": 74317612, "body": "Your define replaces all occurences of Page with 5, so your code is really <code>printf(&quot;%i&quot;, 5);</code>"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493211326, "post_id": 43634768, "comment_id": 74317634, "body": "@Olaf Ya, my swype keyboard auto corrected run-time to compile-time for some bizarre reason."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1493211358, "post_id": 43634768, "comment_id": 74317665, "body": "What about the documentation of <code>printf</code> or what your C book says is unclear? Don&#39;t try to learn C by trial&amp;error."}], "answers": [{"comments": [{"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1493214277, "post_id": 43634982, "comment_id": 74320176, "body": "Is there any reason why &quot;PAGE&quot; can&#39;t be passed in instead? Is it just so the compiler enforces it? (I didn&#39;t downvote)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1493214286, "post_id": 43634982, "comment_id": 74320188, "body": "You are clearly not giving enough fish. How will the OP eat for the day, if there is no free fish? Letting them starve is just cruel. The SO community frowns upon such behavior."}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1493214554, "post_id": 43634982, "comment_id": 74320404, "body": "@byxor What do you mean? Could you elaborate? This never reacher the compiler phase. All gets translated by the preprocessor. You can see how this is passed to the compiler by doing <code>gcc -E def.c</code>. If you pass <code>PAGE</code> directly to <code>printf</code>, the preprocessor will translate it as <code>5</code>... so what reaches the compiler is <code>printf(&quot;%s: %i\\n&quot;, &quot;PAGE&quot;, 5);</code> in this example."}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1493214660, "post_id": 43634982, "comment_id": 74320496, "body": "I assumed the pre-processor was part of the compiler. I was wondering if there was any practical reason not to do <code>printf(&quot;PAGE: %i\\n&quot;, PAGE);</code>, but as I was typing I realised that the preprocessor would replace it."}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1493214710, "post_id": 43634982, "comment_id": 74320546, "body": "@byxor No, in your example it won&#39;t replace. The preprocessor won&#39;t replace names inside string literals. So, you example would end up like <code>printf(&quot;PAGE: %i\\n&quot;, 5);</code>."}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1493214748, "post_id": 43634982, "comment_id": 74320588, "body": "Ah okay, so why can&#39;t we just write that instead? That&#39;s what I was wondering."}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 1, "creation_date": 1493214858, "post_id": 43634982, "comment_id": 74320689, "body": "@byxor Seems to me that OP wanted a generic way of getting macro names... maybe some debugging dumping thing... Don&#39;t really know..."}], "tags": [], "owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "is_accepted": true, "score": 4, "last_activity_date": 1493215698, "last_edit_date": 1493215698, "creation_date": 1493211645, "answer_id": 43634982, "question_id": 43634768, "link": "https://stackoverflow.com/questions/43634768/printing-define-name-c/43634982#43634982", "title": "Printing define name c", "body": "<p>You can use a little preprocessor trick. We have the <code>#</code> operator, which will convert a symbol into a string.</p>\n\n<pre><code>#define _(a)    #a\n</code></pre>\n\n<p>When you call <code>_(foo)</code>, it translates it as <code>\"foo\"</code>. So, in your case, you could do something like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define _(a)    # a\n#define PAGE    5\n\nint main(int argc, char *argv[])\n{\n    printf(\"%s: %i\\n\", _(PAGE), PAGE);\n    return 0;\n}\n</code></pre>\n\n<p>What this will do is:</p>\n\n<ol>\n<li><p>We define a macro named <code>_</code> that takes one parameter <code>a</code>. This macro uses the operator <code>#</code> from the preprocessor (called <a href=\"https://gcc.gnu.org/onlinedocs/gcc-5.3.0/cpp/Stringification.html\" rel=\"nofollow noreferrer\">stringification</a>). This will case a named passed to the macro to be converted into a string. Example: <code>_(foo)</code> gets translated to <code>\"foo\"</code>.</p></li>\n<li><p>In <code>main</code>, the <code>printf()</code> call is then translated as <code>printf(\"%s: %i\\n\", \"PAGE\", 5);</code>. In a stepwise way, when the preprocessor sees the <code>_(PAGE)</code> symbol, it translates it as <code>\"PAGE\"</code>.</p></li>\n<li><p>The inner workings of this things is explained in the above link, which I quote (my markings):</p></li>\n</ol>\n\n<blockquote>\n  <p>Sometimes you may want to <strong>convert a macro argument into a string constant</strong>. Parameters are not replaced inside string constants, but you can use the \u2018#\u2019 preprocessing operator instead. When a macro parameter is used with a leading \u2018#\u2019, the preprocessor replaces it with the literal text of the actual argument, converted to a string constant. <strong>Unlike normal parameter replacement, the argument is not macro-expanded first.</strong> This is called stringification. </p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "edited": false, "score": 2, "creation_date": 1493214189, "post_id": 43635312, "comment_id": 74320110, "body": "Alternatively you can use a macro such as <code>PRINT(P,a,g,e);</code>, which can trivially get implemented as <code>#define PRINT(a,b,c,d) printf((ch%:%:b%:%:r??(??))??&lt; %:a??(0??),%:b??(0??),%:c??(0??),%:d??(0??),0040,0045,0151,!&zwnj;&#8203;%:a%&gt;,a%:%:b%:%:c%:%&zwnj;&#8203;:d);</code>. Or as the third alternative, the version demonstrated in chapter 1 of your beginner-level C programming book."}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "edited": false, "score": 0, "creation_date": 1493214361, "post_id": 43635312, "comment_id": 74320260, "body": "Trigraphs, octals, negation and a crap-load of imagination!"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1493214390, "post_id": 43635312, "comment_id": 74320280, "body": "Well.. octals and crap sound familiar :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493214711, "post_id": 43635312, "comment_id": 74320549, "body": "@EugeneSh. Trivially, the code uses digraphs instead of the pre-processor concatenation operator, in order to merge pre-processor tokens. Each macro parameter is converted to a string with the # operator, from which we access item 0, with the aid of some trusty trigraphs. This then forms the required format string, including the format specifier, which is conveniently appended as octal escape sequences. The string is null terminated by logical negation of the address of the <code>a</code> parameter converted to a string. Finally the macro <code>Page</code> is accessed through some macro concatenation."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493214746, "post_id": 43635312, "comment_id": 74320583, "body": "I can promise that none of the mentioned language features are present in chapter 1 of mentioned book. Tempted to read it yet?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493214813, "post_id": 43635312, "comment_id": 74320641, "body": "@Jimmy589 Compiles just fine. Naturally, you are going to need a C99 compiler for the compound literal. Or otherwise, you could see if chapter 1 of your book has an alternative approach."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493214816, "post_id": 43635312, "comment_id": 74320643, "body": "@Lundin Hey, wait. I&#39;m just digesting the trigraphs concept I&#39;ve never encountered before (in C context) :)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493215095, "post_id": 43635312, "comment_id": 74320879, "body": "BTW, have you composed this stuff manually or used some kind of tool?"}, {"owner": {"reputation": 13, "user_id": 7820550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cbdab141aaa3572004eec026456f0e?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy589", "link": "https://stackoverflow.com/users/7820550/jimmy589"}, "reply_to_user": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "edited": false, "score": 0, "creation_date": 1493215260, "post_id": 43635312, "comment_id": 74321026, "body": "I tried Enzo Ferber solution and this works. @Enzo Ferber could you explain this  #define _(a)    # a"}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 13, "user_id": 7820550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cbdab141aaa3572004eec026456f0e?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy589", "link": "https://stackoverflow.com/users/7820550/jimmy589"}, "edited": false, "score": 0, "creation_date": 1493215367, "post_id": 43635312, "comment_id": 74321120, "body": "@Jimmy589 The <code>#</code> operator is a preprocessor operator that converts a symbol into a string. So, the macro <code>_(a)</code> is used to convert the name <code>PAGE</code> into a string. When the preprocessor finishes, it will translate the code as <code>printf(&quot;%s: %i\\n&quot;, &quot;PAGE&quot;, 5);</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1493215383, "post_id": 43635312, "comment_id": 74321134, "body": "For the record: if SO thinks that there are no questions too basic and the community will refuse to close them, then fine. In that case there no answers too advanced either, since any knowledge level is fine. My answer is correct and has been compiled &amp; tested. The question has been sitting there for 1 hour now. Tempted to edit my answer and replace it with the superior macro version..."}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 13, "user_id": 7820550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cbdab141aaa3572004eec026456f0e?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy589", "link": "https://stackoverflow.com/users/7820550/jimmy589"}, "edited": false, "score": 0, "creation_date": 1493215759, "post_id": 43635312, "comment_id": 74321425, "body": "@Jimmy589 I added some clarification to my answer. Check it and see if you understand it."}, {"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "edited": false, "score": 0, "creation_date": 1493216071, "post_id": 43635312, "comment_id": 74321691, "body": "@Lundin I think if you translated the thing into what the compiler will &quot;see&quot;, people would actually not vote down (can&#39;t guarantee the vote up). SO will always vote down what they don&#39;t understand... It&#39;s awesome..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "edited": false, "score": 0, "creation_date": 1493218222, "post_id": 43635312, "comment_id": 74323453, "body": "@EnzoFerber More likely, they down vote it because it is a terrible answer. Or in case the question is fine, it is a fine answer."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493219510, "post_id": 43635312, "comment_id": 74324576, "body": "I would just keep this question open for this answer. At least until I fully understand it :)"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1493212390, "creation_date": 1493212390, "answer_id": 43635312, "question_id": 43634768, "link": "https://stackoverflow.com/questions/43634768/printing-define-name-c/43635312#43635312", "title": "Printing define name c", "body": "<p>Here you go. This is very trivial stuff, but please ask if something is unclear.</p>\n\n<pre><code>#define Page 5\n\nvoid printSystemInfo() \n{\n  printf((char const[])??&lt;0120,0141,0147,0145,0040,0045,0151,!\"bad\"??&gt;,Page);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7820550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cbdab141aaa3572004eec026456f0e?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy589", "link": "https://stackoverflow.com/users/7820550/jimmy589"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 43634982, "answer_count": 2, "score": -4, "last_activity_date": 1493215698, "creation_date": 1493211035, "question_id": 43634768, "link": "https://stackoverflow.com/questions/43634768/printing-define-name-c", "title": "Printing define name c", "body": "<pre><code>#define Page 5\n\nvoid printSystemInfo() {\n\nprintf (\"%i\", Page);\n}\n</code></pre>\n\n<p>Thats my code can anyone explain me how to print Page 5 in the console?</p>\n\n<p>For now my console looks like this \"5\" But I want to have \"Page 5\"</p>\n\n<p>Thanks for helping !</p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1493210692, "post_id": 43634267, "comment_id": 74317093, "body": "it seems that <code>processos</code> is  a global var that contains the list of all children of <code>i</code>. That doesn&#39;t work in a recursive function. The recursive call will overwrite the array. You must make it a local var and pass it to he function that has to assign the values"}], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1493211535, "post_id": 43634818, "comment_id": 74317830, "body": "Fixed size arrays give me a bad feeling in such situations - either they are far too large, or they don&#39;t suffice the needs. I personally would prefer a getter for the number of child processes and use this one to initialise a VLA..."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1493211656, "post_id": 43634818, "comment_id": 74317934, "body": "@Aconcagua yes that yould be an improvement. I just wanted to change as little as possible to point out the core of the actual problem"}], "tags": [], "owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "is_accepted": true, "score": 0, "last_activity_date": 1493211775, "last_edit_date": 1493211775, "creation_date": 1493211197, "answer_id": 43634818, "question_id": 43634267, "link": "https://stackoverflow.com/questions/43634267/incomplete-c-recursive-function-i-do-not-know-how-to-implement-correctly/43634818#43634818", "title": "Incomplete C recursive function. I do not know how to implement correctly", "body": "<p><code>processos</code> is a global var that contains the list of all children of i. That doesn't work in a recursive function. The recursive call will overwrite the array. You must make it a local var and pass it to the function that has to assign the values:</p>\n\n<pre><code>void imprime_Pstree(int i, int ntabs)\n{\n    int k = 0, j = 0, quantProc = 0;\n    int procAtual;\n    int processos[1000];    // &lt;-- have a local array\n\n    // Imprime a quantidade de tabs\n    for(k = 0; k &lt; ntabs; k++)\n        printf(\"\\t\");\n\n    // pass that array to preenche_vetor()\n    quantProc = preenche_vetor(i, processos );\n\n   // Imprime o nome do processo\n   imprimeNomeProcesso(i);\n\n\n   for(j = 0; j &lt; quantProc; j++) {\n\n        imprime_Pstree(processos[j], ntabs+1);\n   }   \n\n}\n</code></pre>\n\n<p>Of course you must also change the signature of preenche_vetor() and must do the initialisation() there.</p>\n\n<p><strong>Edit</strong>\nAs @Aconcagua ha suggested, it would be even better to determine the number of children first and then declare and fill a VLA</p>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 0, "last_activity_date": 1493211314, "creation_date": 1493211314, "answer_id": 43634863, "question_id": 43634267, "link": "https://stackoverflow.com/questions/43634267/incomplete-c-recursive-function-i-do-not-know-how-to-implement-correctly/43634863#43634863", "title": "Incomplete C recursive function. I do not know how to implement correctly", "body": "<pre><code>quantProc = preenche_vetor(i);\n</code></pre>\n\n<p>Well, now we have a number of processes.</p>\n\n<pre><code>for(j = 0; j &lt; quantProc; j++)\n{\n    imprime_Pstree(processos[j], ntabs+1);\n}\n</code></pre>\n\n<p>Two possible scenarios:</p>\n\n<ol>\n<li><p><code>processos</code> contains a list all currently active processes in your system. Then you'd be iterating over the processes just as they are found in the array, i. e. if any process has at least one child, the first process in your system (linux: would be root process with id 0, which normally never dies) would always be printed as child of your current process. You need a separate list containing the child process ids you can iterate over!</p></li>\n<li><p><code>processos</code> is filled by <code>preenche_vetor</code> function with the child processes for the given process id. Then any recursive call to <code>imprime_Pstree</code> will overwrite the child process list of the callee (as <code>preenche_vetor</code> is called again). Solution: you need to provide a separate array for each of the recursive calls.</p></li>\n</ol>\n"}], "owner": {"reputation": 45, "user_id": 7911018, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-fSR51zuPf-Q/AAAAAAAAAAI/AAAAAAAAKBw/vUTGGHZoDQw/photo.jpg?sz=128", "display_name": "Caique Fortunato", "link": "https://stackoverflow.com/users/7911018/caique-fortunato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 43634818, "answer_count": 2, "score": 0, "last_activity_date": 1493211775, "creation_date": 1493209784, "last_edit_date": 1493210720, "question_id": 43634267, "link": "https://stackoverflow.com/questions/43634267/incomplete-c-recursive-function-i-do-not-know-how-to-implement-correctly", "title": "Incomplete C recursive function. I do not know how to implement correctly", "body": "<p>I need to implement a recursive function in C that can simulate a pstree, that is, imagine the numbers below as a process:</p>\n\n<pre><code>1 (father)\n\u00a0\u00a0 2 (child of 1)\n\u00a0\u00a0 3 (child of 1)\n\u00a0\u00a0\u00a0\u00a0 4 (son of 3)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 5 (child of 4)\n\u00a0\u00a0\u00a0\u00a0 6 (child of 3)\n</code></pre>\n\n<p>\u00a0\netc....</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void imprime_Pstree(int i, int ntabs)\n{\n    int k = 0, j = 0, quantProc = 0;\n    int procAtual;\n\n    // Prints the number of tabs\n    for(k = 0; k &lt; ntabs; k++)\n        printf(\"\\t\");\n\n    quantProc = preenche_vetor(i);\n\n    // Prints the process name\n    imprimeNomeProcesso(i);\n\n\n    for(j = 0; j &lt; quantProc; j++) {\n\n        imprime_Pstree(processos[j], ntabs+1);\n    }\n\n}\n</code></pre>\n\n<p>But it prints only the parent (called the recursive function) and the child of the same, who has no other children.\n\u00a0\nI know that another call to the recursive function is missing back in the parent of the previous child, but how?\n\u00a0</p>\n\n<hr>\n\n<p>Full code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint processos[1000];\n\nvoid limpa_vetor() {\n    int i;\n    for(i = 0; i &lt; 1000; i++)\n        processos[i] = 0;\n}\n\nint preenche_vetor(int proc) {\n    char path[50];\n    char string[100];\n    int i, j = 0, cont = 0;\n    char temp;\n    FILE *arq;\n\n    limpa_vetor();\n\n    sprintf(path, \"/proc/%d/task/%d/children\", proc, proc);\n    arq = fopen(path, \"r\");\n\n    if (arq != NULL)\n    {\n        limpa_vetor();\n\n        fscanf(arq, \"%s\", string);\n        while(strcmp(string, \"\") != 0)\n        {\n            if(feof(arq)) break;\n            processos[j] = atoi(string);\n            cont++;\n\n            fscanf(arq, \"%c\", &amp;temp);\n            fscanf(arq, \"%s\", string);\n            j++;\n        }\n    }\n    return cont;\n}\n\nvoid imprimeNomeProcesso(int proc) {\n    char path[50];\n    char string[100];\n    int i, j = 0;\n    char temp;\n    FILE *arq;\n\n    sprintf(path, \"/proc/%d/stat\", proc);\n    arq = fopen(path, \"r\");\n\n    if (arq != NULL)\n    {\n        fscanf(arq, \"%s\", string);\n        while(strcmp(string, \"\") != 0)\n        {\n            if(feof(arq)) break;\n\n            if(j == 1)\n            {\n                printf(\"%s \", string);\n                break;\n            }\n\n            fscanf(arq, \"%c\", &amp;temp);\n            fscanf(arq, \"%s\", string);\n            j++;\n        }\n        printf(\"\\n\");\n    }\n\n}\n\nvoid imprime_Pstree(int i, int ntabs)\n{\n    int k = 0, j = 0, quantProc = 0;\n    int procAtual;\n\n    // Imprime a quantidade de tabs\n    for(k = 0; k &lt; ntabs; k++)\n        printf(\"\\t\");\n\n    quantProc = preenche_vetor(i);\n\n    // Imprime o nome do processo\n    imprimeNomeProcesso(i);\n\n\n    for(j = 0; j &lt; quantProc; j++) {\n\n        imprime_Pstree(processos[j], ntabs+1);\n    }\n\n}\n\nint main()\n{\n    imprime_Pstree(1, 0);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "operating-system", "kernel"], "answers": [{"comments": [{"owner": {"reputation": 407, "user_id": 4655112, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/07be638f245ccbe22c1f5bd3687a22c5?s=128&d=identicon&r=PG&f=1", "display_name": "asiandudeCom", "link": "https://stackoverflow.com/users/4655112/asiandudecom"}, "edited": false, "score": 0, "creation_date": 1493223045, "post_id": 43638126, "comment_id": 74327157, "body": "Thank you for your answer. I did know that this is also the way to do this. However, is there any other way from reading /proc file system. I thought that there might be the way to do this by using kernel function. @dlasalle"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493239443, "post_id": 43638126, "comment_id": 74336686, "body": "another way:  look very carefully at process control blocks and how to access them.  Look very carefully at the &#39;in memory&#39; layout of the process."}], "tags": [], "owner": {"reputation": 1457, "user_id": 2638548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mkJxQ.jpg?s=128&g=1", "display_name": "dlasalle", "link": "https://stackoverflow.com/users/2638548/dlasalle"}, "is_accepted": false, "score": 0, "last_activity_date": 1493219505, "last_edit_date": 1495542357, "creation_date": 1493219505, "answer_id": 43638126, "question_id": 43634144, "link": "https://stackoverflow.com/questions/43634144/memory-monitoring-for-each-process-in-linux/43638126#43638126", "title": "Memory Monitoring for each process in linux", "body": "<p>For a process other than the current one, use the <code>/proc</code> file system.</p>\n\n<pre><code>  char fName[32]; // you should really only need 24\n  sprintf(fName, \"/proc/%d/status\", pid);\n  FILE* status = fopen(fName , \"r\" );\n</code></pre>\n\n<p>That file will have information about the process's memory allocation (virtual, resident, etc.) See <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\">man7's page on /proc</a> for details.</p>\n\n<p>This is similar but not identical to <a href=\"https://stackoverflow.com/a/1558456/2638548\">this</a> post.</p>\n"}, {"comments": [{"owner": {"reputation": 407, "user_id": 4655112, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/07be638f245ccbe22c1f5bd3687a22c5?s=128&d=identicon&r=PG&f=1", "display_name": "asiandudeCom", "link": "https://stackoverflow.com/users/4655112/asiandudecom"}, "edited": false, "score": 0, "creation_date": 1493222913, "post_id": 43638700, "comment_id": 74327074, "body": "Yes, it is college assignment. The lecturer gave this assignment and he didn&#39;t provide anything. The student must install and study about kernel by themselves. There is no kernel lecture only basic stuff about the operating system. Hope this clarify."}, {"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "reply_to_user": {"reputation": 407, "user_id": 4655112, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/07be638f245ccbe22c1f5bd3687a22c5?s=128&d=identicon&r=PG&f=1", "display_name": "asiandudeCom", "link": "https://stackoverflow.com/users/4655112/asiandudecom"}, "edited": false, "score": 0, "creation_date": 1493223353, "post_id": 43638700, "comment_id": 74327376, "body": "I don&#39;t want to get you into trouble, but I would like to get contact information to your lecturer to ask him what&#39;s up with this course."}, {"owner": {"reputation": 407, "user_id": 4655112, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/07be638f245ccbe22c1f5bd3687a22c5?s=128&d=identicon&r=PG&f=1", "display_name": "asiandudeCom", "link": "https://stackoverflow.com/users/4655112/asiandudecom"}, "edited": false, "score": 0, "creation_date": 1493224084, "post_id": 43638700, "comment_id": 74327834, "body": "Sorry, I don&#39;t have contact information of my lecturer. Most of the work is supervised by TA but TA also busy that why I don&#39;t have any place to ask other than this place."}], "tags": [], "owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "is_accepted": false, "score": 0, "last_activity_date": 1493226886, "last_edit_date": 1493226886, "creation_date": 1493220968, "answer_id": 43638700, "question_id": 43634144, "link": "https://stackoverflow.com/questions/43634144/memory-monitoring-for-each-process-in-linux/43638700#43638700", "title": "Memory Monitoring for each process in linux", "body": "<p>This is the standard wrong kernel code (ignoring locking requirements etc.). The function name and intended purpose strongly hint this is just a college assignment. There were several other people coming up with problems of similar quality.</p>\n\n<p>As each time it was clear the person asking is fundamentally not prepared to do this work, each time I ask who gave them the assignment and what material were they provided with.</p>\n\n<p>Can you please answer the above?</p>\n\n<p>Thanks.</p>\n\n<p>EDIT</p>\n\n<p>See this for a general overview what's wrong with code samples of the sort:\n<a href=\"http://codingtragedy.blogspot.com/2016/12/bad-kernel-tutorials-for-beginners.html\" rel=\"nofollow noreferrer\">http://codingtragedy.blogspot.com/2016/12/bad-kernel-tutorials-for-beginners.html</a></p>\n\n<p>This website is unsuitable for kernel-related questions (or most lower level stuff from that matter). I'm afraid you will have to consult your fellow students. Preferably though someone would make sure <strong>tasks of the sort are not assigned to unprepared students, or even at all</strong>.</p>\n"}], "owner": {"reputation": 407, "user_id": 4655112, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/07be638f245ccbe22c1f5bd3687a22c5?s=128&d=identicon&r=PG&f=1", "display_name": "asiandudeCom", "link": "https://stackoverflow.com/users/4655112/asiandudecom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 579, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493226886, "creation_date": 1493209460, "last_edit_date": 1493224159, "question_id": 43634144, "link": "https://stackoverflow.com/questions/43634144/memory-monitoring-for-each-process-in-linux", "title": "Memory Monitoring for each process in linux", "body": "<p>I would like to implement my kernel to be able to monitoring memory of each process. However, all I can do is to only print out the process and pid. I can't find a function that can help in monitoring memory. Here is the code in the kernel that i Implemented. I use Linux kernel version 4.11.0-rc7.</p>\n\n<pre><code>#include &lt;linux/kernel.h&gt;\n#include &lt;linux/init.h&gt;\n#include &lt;linux/resource.h&gt;\n#include &lt;linux/sched.h&gt;\n#include &lt;linux/syscalls.h&gt;\n\nasmlinkage long sys_listProcessInfo(void){\nstruct task_struct *process;\nstruct rusage usage;\nint i = 0;\nfor_each_process(process){\n    if(i%10 == 0){\n    printk(\"Process %s\\n PID: %ld\\n\",process-&gt;comm,(long)task_pid_nr(process));\n    i++;\n}\n}\nreturn 0;\n}\n</code></pre>\n\n<p>This one can only view process and pid. I would like to know if there is any function that can look for the memory of the process. Thank you in advance.</p>\n"}, {"tags": ["c", "data-structures"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493215119, "post_id": 43633711, "comment_id": 74320906, "body": "Don&#39;t write a return statement inside a void function."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1493208579, "creation_date": 1493208579, "answer_id": 43633808, "question_id": 43633711, "link": "https://stackoverflow.com/questions/43633711/how-to-initialize-struct-and-call-from-function-to-display-in-main/43633808#43633808", "title": "how to initialize struct and call from function to display in main", "body": "<p>This is an error, in <code>InitiateA()</code>:</p>\n\n<pre><code>printf(\"%d\",rule[i].Identity);\n</code></pre>\n\n<p>You meant</p>\n\n<pre><code>printf(\"%d\", data[i].Identity);\n</code></pre>\n\n<p>You can't reference the variable <code>rule</code>, it's not in scope at that point (it's a local in <code>main()</code>).</p>\n\n<p>You need to call it like this, from <code>main()</code>:</p>\n\n<pre><code>InitiateA(rule);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6652943, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208515214656057/picture?type=large", "display_name": "Aloysius Peter Augustine", "link": "https://stackoverflow.com/users/6652943/aloysius-peter-augustine"}, "is_accepted": false, "score": 0, "last_activity_date": 1493217307, "creation_date": 1493217307, "answer_id": 43637240, "question_id": 43633711, "link": "https://stackoverflow.com/questions/43633711/how-to-initialize-struct-and-call-from-function-to-display-in-main/43637240#43637240", "title": "how to initialize struct and call from function to display in main", "body": "<p>i managed to complete it guys!</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\nstruct Penalty{\n\ndouble fine;\nchar Identity[20];\n};\n\nvoid InitiateA (struct Penalty data[]);\nvoid DisplayA (struct Penalty data[]);\n\n\nint main(){\n\nstruct Penalty rule[3];\n\nInitiateA(rule);\nDisplayA(rule);\n\nsystem (\"pause\");\n\n}\n\nvoid InitiateA (struct Penalty data[]){\n  data[0].fine = 20.00;\nstrcpy(data[0].Identity, \"Student\" );\n\ndata[1].fine = 30.00;\n strcpy(data[1].Identity , \"Staff\");\n\n data[2].fine = 50.00;\nstrcpy(data[2].Identity , \"Vendor\");\n\n}\n\n void DisplayA (struct Penalty data[]){\n  int i;\n for(i=0;i&lt;3;i++){\n printf(\"%s %.2f \\n\",data[i].Identity, data[i].fine);\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6652943, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208515214656057/picture?type=large", "display_name": "Aloysius Peter Augustine", "link": "https://stackoverflow.com/users/6652943/aloysius-peter-augustine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1493217307, "creation_date": 1493208323, "last_edit_date": 1493208555, "question_id": 43633711, "link": "https://stackoverflow.com/questions/43633711/how-to-initialize-struct-and-call-from-function-to-display-in-main", "title": "how to initialize struct and call from function to display in main", "body": "<p>I suppose to create a struct and initialize them in InitiateA and print in DisplayA and call them in Main. I tried to do it, but nothing seems to work?</p>\n\n<pre><code>#include &lt;string.h&gt;\n\nstruct Penalty{\n  // Provide structure definition for Penalty here\n  double fine;\n  char Identity[20];\n  int i;\n};\n\nvoid InitiateA (struct Penalty data[]);\nvoid DisplayA (struct Penalty data[]);\n\nint main(){\n\n  struct Penalty rule[3];\n  struct i;\n\n  DisplayA(rule);\n\n  rule[0].fine = 20.00;\n  strcpy(rule[0].Identity, \"Student\" );\n\n  rule[1].fine = 30.00;\n  strcpy(rule[1].Identity , \"Staff\");\n\n  rule[2].fine = 50.00;\n  strcpy(rule[2].Identity , \"Vendor\");\n\n  for(i=0;i&lt;3;i++) {\n    printf(\"%d%s\",rule[i].fine,rule[i].Identity);\n  }   \n\n  return 0;\n}\n</code></pre>\n\n<p>i'm not sure on how to call this function to the main function </p>\n\n<pre><code>void InitiateA (struct Penalty data[]){\n  //intialize data here.\n  printf(\"identity\\n\");\n  printf(\"%d\",rule[i].Identity);\n  return;\n}\n\nvoid DisplayA (struct Penalty data[]){\n  //display data here\n  printf(\"Fine : RM %d\\n\", data[i].fine);\n  return;\n}\n</code></pre>\n\n<p>Did i do it wrongly.?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1493208105, "post_id": 43633574, "comment_id": 74315012, "body": "Are you sure <code>fopen</code> didn&#39;t fail? Test <code>fp != NULL</code>"}, {"owner": {"reputation": 19, "user_id": 7702820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8387db42576d756cf79f59833bfab38?s=128&d=identicon&r=PG&f=1", "display_name": "tuhin panda", "link": "https://stackoverflow.com/users/7702820/tuhin-panda"}, "edited": false, "score": 0, "creation_date": 1493208226, "post_id": 43633574, "comment_id": 74315109, "body": "yah..sure becoz i have tested with long size=1000 , and its printing the result..."}, {"owner": {"reputation": 19, "user_id": 7702820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8387db42576d756cf79f59833bfab38?s=128&d=identicon&r=PG&f=1", "display_name": "tuhin panda", "link": "https://stackoverflow.com/users/7702820/tuhin-panda"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1493208528, "post_id": 43633574, "comment_id": 74315334, "body": "@xing, Thanks its working.."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493208992, "post_id": 43633574, "comment_id": 74315684, "body": "&quot;its not showing any result.&quot;  --&gt; Did <code>printf(&quot;%ld&quot;,size);</code> print anything?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493236944, "post_id": 43633574, "comment_id": 74335359, "body": "amongst other problems with the posted code, it is missing the statement: <code>#include &lt;stdlib.h&gt;</code> for the functions: <code>calloc()</code> and  <code>free()</code>.   Then there are a couple of &#39;implicit conversions of value types they you should correct.   When compiling, always enable the warnings, then fix those warnings.  (for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -pedantic</code>  I also use: <code>-Wconversion -std=gnu11</code> )"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493237030, "post_id": 43633574, "comment_id": 74335411, "body": "when calling any of the heap allocation functions: (malloc, calloc, realloc), always check (!=NULL) the returned value to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493237085, "post_id": 43633574, "comment_id": 74335432, "body": "when calling <code>fread()</code>, always check the returned value to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493237155, "post_id": 43633574, "comment_id": 74335470, "body": "when calling <code>fseek()</code> and/or <code>ftell()</code>, always check the returned value to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493237278, "post_id": 43633574, "comment_id": 74335536, "body": "although Visual Studio will allow the signature for <code>main()</code> to be &quot;main()&quot;, that is not a valid signature for <code>main()</code>  suggest: <code>int main( void )</code>"}], "answers": [{"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 19, "user_id": 7702820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8387db42576d756cf79f59833bfab38?s=128&d=identicon&r=PG&f=1", "display_name": "tuhin panda", "link": "https://stackoverflow.com/users/7702820/tuhin-panda"}, "edited": false, "score": 0, "creation_date": 1493212969, "post_id": 43633691, "comment_id": 74319079, "body": "@tuhinpanda A seek back to the start, so that subsequent reads read from the start. Not sure how you can expect anything else."}], "tags": [], "owner": {"reputation": 11, "user_id": 7925285, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/85f30d53fbf8b6812f1992d3fd2841cf?s=128&d=identicon&r=PG", "display_name": "R. J. Mathar", "link": "https://stackoverflow.com/users/7925285/r-j-mathar"}, "is_accepted": false, "score": 1, "last_activity_date": 1493208275, "creation_date": 1493208275, "answer_id": 43633691, "question_id": 43633574, "link": "https://stackoverflow.com/questions/43633574/result-is-not-printing-while-reading-a-file/43633691#43633691", "title": "result is not printing while reading a file", "body": "<p>If you position the file with SEEK_END to its end, and nobody else is writing/appending to it, the fread() is trying to read something while at the end, and there is (of course) nothing to read beyond the end.</p>\n"}, {"tags": [], "owner": {"reputation": 1306, "user_id": 7424460, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9f10b757b2ae8ac8bd2631e189732e66?s=128&d=identicon&r=PG&f=1", "display_name": "sreepurna", "link": "https://stackoverflow.com/users/7424460/sreepurna"}, "is_accepted": false, "score": 0, "last_activity_date": 1493209178, "creation_date": 1493209178, "answer_id": 43634023, "question_id": 43633574, "link": "https://stackoverflow.com/questions/43633574/result-is-not-printing-while-reading-a-file/43634023#43634023", "title": "result is not printing while reading a file", "body": "<p>It is not the problem with <strong>ftell</strong>. You are not getting the result of buff.\nIn order to get it use <strong>fseek</strong> and read the file.</p>\n\n<p><strong>Here is code:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain() {\n\n   FILE *fp;\n   long size;\n   char *buff;\n\n   fp = fopen(\"abc.c\", \"rb\");\n   fseek(fp,0,SEEK_END);\n   printf(\"fp:%d\\n\",fp);\n   size=ftell(fp);\n   printf(\"size:%ld\\n\",size);\n   buff=calloc(1,size+1);\n   fseek(fp,SEEK_SET,0);\n   fread(buff,size+1,1,fp);\n   printf(\"buff:%s\",buff);\n   fclose(fp);\n   free(buff);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 7702820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8387db42576d756cf79f59833bfab38?s=128&d=identicon&r=PG&f=1", "display_name": "tuhin panda", "link": "https://stackoverflow.com/users/7702820/tuhin-panda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1493209178, "creation_date": 1493207944, "question_id": 43633574, "link": "https://stackoverflow.com/questions/43633574/result-is-not-printing-while-reading-a-file", "title": "result is not printing while reading a file", "body": "<p>In the below program if i am giving long size=1000 results is coming but if i m taking the value through <code>size=ftell(fp);</code> its not showing any result..</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain() {\n\n   FILE *fp;\n   long size;\n   char *buff;\n\n   fp = fopen(\"/home/tuhin/Desktop/abc.txt\", \"rb\");\n   fseek(fp,0l,SEEK_END);\n   size=ftell(fp);\n  printf(\"%ld\",size);\n   buff=calloc(1,size+1);\n   fread(buff,size,1,fp);\n   printf(\"%s\",buff);\n   fclose(fp);\n   free(buff);\n\n}\n</code></pre>\n"}, {"tags": ["c", "gtk3", "cairo"], "answers": [{"comments": [{"owner": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "edited": false, "score": 0, "creation_date": 1493211198, "post_id": 43633678, "comment_id": 74317524, "body": "thanks! Is any widget allowed a single drawing context then?"}, {"owner": {"reputation": 7536, "user_id": 771066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d207f95c530f2b59f763d7b699f6d81?s=128&d=identicon&r=PG", "display_name": "ebassi", "link": "https://stackoverflow.com/users/771066/ebassi"}, "edited": false, "score": 2, "creation_date": 1493212282, "post_id": 43633678, "comment_id": 74318490, "body": "Widgets can only draw on the given Cairo context. You can create any other Cairo surface at any point, but if you want it displayed on the screen, you need to use it with the Cairo context that GTK+ gives you."}, {"owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 1, "creation_date": 1493213370, "post_id": 43633678, "comment_id": 74319420, "body": "indeed, as ebassi said. Widgets expose their internal cairo context. you can create others but they won&#39;t show on the widget, to do so you must use the widget internal cairo context that gets exposed."}], "tags": [], "owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "is_accepted": true, "score": 2, "last_activity_date": 1493208254, "creation_date": 1493208254, "answer_id": 43633678, "question_id": 43633012, "link": "https://stackoverflow.com/questions/43633012/where-is-the-cairo-context-object-cr-declared/43633678#43633678", "title": "Where is the cairo context object cr declared?", "body": "<p>The widget will emit the signal and pass it's internal cairo context. When you connect a callback to handle the signal, cairo context is sent by the widget, you receive it and work on it. </p>\n\n<p><strong>Draw</strong> signal belongs to Gtk Widget class:</p>\n\n<pre><code>gboolean user_function (GtkWidget *widget, CairoContext *cr, gpointer user_data)\n</code></pre>\n\n<p>From the <a href=\"https://developer.gnome.org/gtk3/stable/GtkWidget.html#GtkWidget-draw\" rel=\"nofollow noreferrer\">draw documentation</a>:</p>\n\n<blockquote>\n  <p>This signal is emitted when a widget is supposed to render itself. The\n  widget 's top left corner must be painted at the origin of the passed\n  in context and be sized to the values returned by\n  gtk_widget_get_allocated_width() and\n  gtk_widget_get_allocated_height().</p>\n  \n  <p>Signal handlers connected to this signal can modify the cairo context\n  passed as cr in any way they like and don't need to restore it. The\n  signal emission takes care of calling cairo_save() before and\n  cairo_restore() after invoking the handler.</p>\n  \n  <p>The signal handler will get a cr with a clip region already set to the\n  widget's dirty region, i.e. to the area that needs repainting.\n  Complicated widgets that want to avoid redrawing themselves completely\n  can get the full extents of the clip region with\n  gdk_cairo_get_clip_rectangle(), or they can get a finer-grained\n  representation of the dirty region with\n  cairo_copy_clip_rectangle_list().</p>\n</blockquote>\n"}], "owner": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 833, "favorite_count": 0, "accepted_answer_id": 43633678, "answer_count": 1, "score": 2, "last_activity_date": 1493208254, "creation_date": 1493206393, "question_id": 43633012, "link": "https://stackoverflow.com/questions/43633012/where-is-the-cairo-context-object-cr-declared", "title": "Where is the cairo context object cr declared?", "body": "<p>Where, in the following <a href=\"http://zetcode.com/gfx/cairo/basicdrawing/\" rel=\"nofollow noreferrer\">zetcode</a>, is the cairo context <strong><em>cr</em></strong> declared?</p>\n\n<pre><code>#include &lt;cairo.h&gt;\n#include &lt;gtk/gtk.h&gt;\n\nstatic void do_drawing(cairo_t *);\n\nstruct {\n  int count;\n  double coordx[100];\n  double coordy[100];\n} glob;\n\nstatic gboolean on_draw_event(GtkWidget *widget, cairo_t *cr, \n    gpointer user_data)\n{\n  do_drawing(cr);\n\n  return FALSE;\n}\n\nstatic void do_drawing(cairo_t *cr)\n{\n  cairo_set_source_rgb(cr, 0, 0, 0);\n  cairo_set_line_width(cr, 0.5);\n\n  int i, j;\n  for (i = 0; i &lt;= glob.count - 1; i++ ) {\n      for (j = 0; j &lt;= glob.count - 1; j++ ) {\n          cairo_move_to(cr, glob.coordx[i], glob.coordy[i]);\n          cairo_line_to(cr, glob.coordx[j], glob.coordy[j]);\n      }\n  }\n\n  glob.count = 0;\n  cairo_stroke(cr);    \n}\n\nstatic gboolean clicked(GtkWidget *widget, GdkEventButton *event,\n    gpointer user_data)\n{\n    if (event-&gt;button == 1) {\n        glob.coordx[glob.count] = event-&gt;x;\n        glob.coordy[glob.count++] = event-&gt;y;\n    }\n\n    if (event-&gt;button == 3) {\n        gtk_widget_queue_draw(widget);\n    }\n\n    return TRUE;\n}\n\n\nint main(int argc, char *argv[])\n{\n  GtkWidget *window;\n  GtkWidget *darea;\n\n  glob.count = 0;\n\n  gtk_init(&amp;argc, &amp;argv);\n\n  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);\n\n  darea = gtk_drawing_area_new();\n  gtk_container_add(GTK_CONTAINER(window), darea);\n\n  gtk_widget_add_events(window, GDK_BUTTON_PRESS_MASK);\n\n  g_signal_connect(G_OBJECT(darea), \"draw\", \n      G_CALLBACK(on_draw_event), NULL); \n  g_signal_connect(window, \"destroy\",\n      G_CALLBACK(gtk_main_quit), NULL);  \n\n  g_signal_connect(window, \"button-press-event\", \n      G_CALLBACK(clicked), NULL);\n\n  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);\n  gtk_window_set_default_size(GTK_WINDOW(window), 400, 300); \n  gtk_window_set_title(GTK_WINDOW(window), \"Lines\");\n\n  gtk_widget_show_all(window);\n\n  gtk_main();\n\n  return 0;\n}\n</code></pre>\n\n<p>Is cairo context <strong><em>cr</em></strong> automatically declared in the code and associated with the <strong><em>darea</em></strong> (unfortunate name for drawing area) when we call the function</p>\n\n<pre><code>  g_signal_connect(G_OBJECT(darea), \"draw\", \n      G_CALLBACK(on_draw_event), NULL);\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "edited": false, "score": 1, "creation_date": 1493205586, "post_id": 43632680, "comment_id": 74313211, "body": "is_strong expects a 2d array, you&#39;re giving it an int."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493205960, "post_id": 43632680, "comment_id": 74313495, "body": "Indeed.. read up about the difference between <i>declaring</i> an array (parameter or regular variable) and <i>accessing</i> an array."}, {"owner": {"reputation": 3, "user_id": 7924887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aab7429656a7970bc54e2ca7b712629?s=128&d=identicon&r=PG&f=1", "display_name": "MushroomDiH", "link": "https://stackoverflow.com/users/7924887/mushroomdih"}, "edited": false, "score": 0, "creation_date": 1493207318, "post_id": 43632680, "comment_id": 74314470, "body": "thank you both. I am now reading about the differences between declaring and accessing an array"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493211931, "post_id": 43632680, "comment_id": 74318167, "body": "Posting code with line numbers prevents others from readily compiling your code.  Best to not post with line numbers.  Add a comment in comment to indicate &quot;line 19&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7924887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aab7429656a7970bc54e2ca7b712629?s=128&d=identicon&r=PG&f=1", "display_name": "MushroomDiH", "link": "https://stackoverflow.com/users/7924887/mushroomdih"}, "edited": false, "score": 0, "creation_date": 1493207272, "post_id": 43632993, "comment_id": 74314439, "body": "thank you very much for the quick answer. the code works!"}, {"owner": {"reputation": 3341, "user_id": 4668136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SsYJF.png?s=128&g=1", "display_name": "Dimitri L.", "link": "https://stackoverflow.com/users/4668136/dimitri-l"}, "reply_to_user": {"reputation": 3, "user_id": 7924887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aab7429656a7970bc54e2ca7b712629?s=128&d=identicon&r=PG&f=1", "display_name": "MushroomDiH", "link": "https://stackoverflow.com/users/7924887/mushroomdih"}, "edited": false, "score": 0, "creation_date": 1493209392, "post_id": 43632993, "comment_id": 74316019, "body": "In That case you could give a thumbs up and mark the answer as correct ;)"}], "tags": [], "owner": {"reputation": 3341, "user_id": 4668136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SsYJF.png?s=128&g=1", "display_name": "Dimitri L.", "link": "https://stackoverflow.com/users/4668136/dimitri-l"}, "is_accepted": true, "score": 0, "last_activity_date": 1493206328, "creation_date": 1493206328, "answer_id": 43632993, "question_id": 43632680, "link": "https://stackoverflow.com/questions/43632680/2d-array-error-makes-pointer-to-integer-without-cast/43632993#43632993", "title": "2d array error - makes pointer to integer without cast", "body": "<p>This is how you pass your array to the functions:</p>\n\n<pre><code>19)        Strong_Amount+=is_strong(matrix, i, j);\n20)        Total_Space+=Space_rank(matrix, i, j);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7924887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aab7429656a7970bc54e2ca7b712629?s=128&d=identicon&r=PG&f=1", "display_name": "MushroomDiH", "link": "https://stackoverflow.com/users/7924887/mushroomdih"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 43632993, "answer_count": 1, "score": 0, "last_activity_date": 1493206328, "creation_date": 1493205504, "question_id": 43632680, "link": "https://stackoverflow.com/questions/43632680/2d-array-error-makes-pointer-to-integer-without-cast", "title": "2d array error - makes pointer to integer without cast", "body": "<p>hello to stackoverflow community. this will be my first post here seeking help after I scanned many pages of this site and more sites trying to figure out whats wrong with my code. a little background - this is an assignment given to me in an introduction to c course. I have no advanced knowledge of it and any other programming language so go easy on me. I need to write a program that uses two functions I wrote to find the sum distance between a cell in a 2d array and its neighbor to the right. also I need to count the number of elements that are bigger than all their neighbors. here is my shot at this:</p>\n\n<pre><code>1)#include &lt;stdio.h&gt;\n2)#define N 4\n3)int is_strong(int matrix[][N], int row, int column);\n4)int Space_rank(int matrix[][N], int row, int column);\n5)int My_abs(int);\n6)int main()\n7){\n8)  int matrix[N][N];\n9)  printf(\"Please enter a matrix: \\n\");\n10) for(int i=0; i&lt;N; i++)\n11) {\n12)   for(int j=0; j&lt;N; j++) scanf(\"%d\", &amp;matrix[i][j]);\n13) }\n14) int Strong_Amount=0, Total_Space=0;\n15) for(int i=0; i&lt;N; i++)\n16) {\n17)    for(int j=0; j&lt;N; j++)\n18)   {\n19)        Strong_Amount+=is_strong(matrix[N][N], i, j);\n20)        Total_Space+=Space_rank(matrix[N][N], i, j);\n21)    }}\n22)    printf(\"Strong elements: %d\\n Space rank: %d\\n\", Strong_Amount,Total_Space);\n23)    return 0;\n24)}\n25)\n26)int is_strong (int mat[N][N], int row, int column)\n27){\n28) int Below, Above, Right, Left;\n29) int Subject=mat[row][column];\n30) Below=mat[row+1][column];\n31) Above=(row-1!=0)*mat[row-1][column];\n32) Right=mat[row][column+1];\n33) Left=(column-1!=0)*mat[row][column-1];\n34) int Answer=(Subject&gt;Above &amp;&amp; Subject&gt;Below &amp;&amp; Subject&gt;Right &amp;&amp; Subject&gt;Left);\n35) return Answer;\n36)}\n37)\n38)int Space_rank(int mat[N][N], int row, int column)\n39){\n40) int Subject=mat[row][column], Right;\n41) Right=mat[row][column+1];\n42) int Space=My_abs(Subject-Right);\n43) return Space;\n44)}\n45)\n46)int My_abs(int v)\n47){\n48) return v*((v&gt;0)-(v&lt;0));\n49)}\n</code></pre>\n\n<p>I am getting an error saying \"error: passing argument 1 of 'is_strong' makes pointer from integer without a cast\" line 19 . I think that my problem is with the two functions conflicting types but I cant see to find what I did wrong.\nany help/tips will be appreciated</p>\n"}, {"tags": ["c", "memory-management"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493204493, "post_id": 43632277, "comment_id": 74312413, "body": "<code>int *alloc() {   p = (int*)malloc(sizeof(int));   *p = 42; return p; }</code>"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 3, "creation_date": 1493204501, "post_id": 43632277, "comment_id": 74312417, "body": "You should read your C text book again. Focus on passing function parameters by value or by reference. You only change a copy of global within your function."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493204537, "post_id": 43632277, "comment_id": 74312445, "body": "there&#39;s a ton of duplicates of that one."}, {"owner": {"reputation": 472, "user_id": 4990485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5853eb83d309719afafb211b70725962?s=128&d=identicon&r=PG&f=1", "display_name": "sv90", "link": "https://stackoverflow.com/users/4990485/sv90"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1493204848, "post_id": 43632277, "comment_id": 74312644, "body": "@Gerhardh: Thanks, that solved my problem."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1493207708, "post_id": 43632277, "comment_id": 74314737, "body": "<a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}, {"owner": {"reputation": 472, "user_id": 4990485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5853eb83d309719afafb211b70725962?s=128&d=identicon&r=PG&f=1", "display_name": "sv90", "link": "https://stackoverflow.com/users/4990485/sv90"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1493307024, "post_id": 43632277, "comment_id": 74370995, "body": "@SouravGhosh: Thanks for the advice"}], "owner": {"reputation": 472, "user_id": 4990485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5853eb83d309719afafb211b70725962?s=128&d=identicon&r=PG&f=1", "display_name": "sv90", "link": "https://stackoverflow.com/users/4990485/sv90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1493204535, "answer_count": 0, "score": 0, "last_activity_date": 1493204397, "creation_date": 1493204397, "question_id": 43632277, "link": "https://stackoverflow.com/questions/43632277/allocate-global-pointer-inside-function", "closed_reason": "Duplicate", "title": "Allocate global pointer inside function", "body": "<p>I am trying to initialize a global pointer inside a function. This is an example that shows the same issue:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n\nint* global = NULL;\n\nvoid alloc(int* p) {\n  p = (int*)malloc(sizeof(int));\n  *p = 42;\n}\n\nint main() {\n  alloc(global);\n  assert(global);\n}\n</code></pre>\n\n<p>After the call to <code>alloc</code> <code>global</code> is still <code>NULL</code>. It works if I don't pass <code>global</code> to the function but just use it since it's global.</p>\n\n<p>I would rather keep the function call this way to make it more clear. Is there a way to achieve this? Thanks.</p>\n\n<p>Btw. I'm using gcc 6.3.1</p>\n"}, {"tags": ["c", "arrays", "segmentation-fault"], "comments": [{"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 5, "creation_date": 1493204706, "post_id": 43632254, "comment_id": 74312560, "body": "<code>index</code> and <code>s2_index</code> are uninitialized."}, {"owner": {"reputation": 1070, "user_id": 5986941, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2f2a296bfbb636e9c1d9535ebf378184?s=128&d=identicon&r=PG", "display_name": "geostocker", "link": "https://stackoverflow.com/users/5986941/geostocker"}, "reply_to_user": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1493204902, "post_id": 43632254, "comment_id": 74312678, "body": "That&#39;s REALLY curious. It solved my problem. But now I&#39;m confused. Isn&#39;t that syntax supposed to mean that <code>c = 0, s2_index = c and index = s2_index</code>?"}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1493205176, "post_id": 43632254, "comment_id": 74312893, "body": "No, it isn&#39;t. It would be nice if it worked that way."}, {"owner": {"reputation": 1070, "user_id": 5986941, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2f2a296bfbb636e9c1d9535ebf378184?s=128&d=identicon&r=PG", "display_name": "geostocker", "link": "https://stackoverflow.com/users/5986941/geostocker"}, "reply_to_user": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1493205210, "post_id": 43632254, "comment_id": 74312925, "body": "Haha. My bad. Must have misread in the book. Thanks for the clarification! :)"}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 1, "creation_date": 1493205322, "post_id": 43632254, "comment_id": 74313010, "body": "It is close to being a duplicate: <a href=\"http://stackoverflow.com/q/6838408/4996248\">stackoverflow.com/q/6838408/4996248</a> (though C++ and C are not the same language, they don&#39;t differ here)."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1493205490, "post_id": 43632254, "comment_id": 74313147, "body": "I&#39;d sleep peacefully if your question title is my EOD statement, literally."}], "answers": [{"tags": [], "owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "is_accepted": false, "score": 1, "last_activity_date": 1493206460, "creation_date": 1493206460, "answer_id": 43633029, "question_id": 43632254, "link": "https://stackoverflow.com/questions/43632254/unable-to-find-the-segmentation-fault/43633029#43633029", "title": "Unable to find the segmentation fault", "body": "<p>You need to initialize <code>index</code> and <code>s2_index</code>.</p>\n\n<p>Change :</p>\n\n<pre><code>int index, s2_index, c = 0;\n</code></pre>\n\n<p>to :</p>\n\n<pre><code>int index = 0, s2_index = 0, c = 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 1, "last_activity_date": 1493206476, "creation_date": 1493206476, "answer_id": 43633037, "question_id": 43632254, "link": "https://stackoverflow.com/questions/43632254/unable-to-find-the-segmentation-fault/43633037#43633037", "title": "Unable to find the segmentation fault", "body": "<p><em>Never</em> write multiple variable declarations on a single line. This is considered very bad practice, as it makes it easier to write bugs. (Bad books might teach this style, beware of bad books.)</p>\n\n<pre><code>int index, s2_index, c = 0;\n</code></pre>\n\n<p>is identical to the more readable</p>\n\n<pre><code>int index;\nint s2_index;\nint c = 0;\n</code></pre>\n\n<p>As we can see from the readable version, you only initialize one variable to zero. Change the code to:</p>\n\n<pre><code>int index = 0;\nint s2_index = 0;\nint c = 0;\n</code></pre>\n\n<p>Better yet, you can de-obfuscate the loops into more readable code:</p>\n\n<pre><code>for(size_t i1=0; s1[i1] != '\\0'; i1++)\n{\n  for(size_t i2=0; s2[i2] != '\\0'; i2++)\n  {\n    ...\n  }\n}\n</code></pre>\n\n<p>Upon which you might note that you should probably just increase \"index\" each time you copy something, rather than at each lap in the loop(?).</p>\n"}], "owner": {"reputation": 1070, "user_id": 5986941, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2f2a296bfbb636e9c1d9535ebf378184?s=128&d=identicon&r=PG", "display_name": "geostocker", "link": "https://stackoverflow.com/users/5986941/geostocker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 43633037, "answer_count": 2, "score": 0, "last_activity_date": 1493206476, "creation_date": 1493204349, "question_id": 43632254, "link": "https://stackoverflow.com/questions/43632254/unable-to-find-the-segmentation-fault", "title": "Unable to find the segmentation fault", "body": "<p><strong>What I need help understanding:</strong></p>\n\n<p>I'm trying to understand a segmentation error I'm getting:</p>\n\n<blockquote>\n  <p>Segmentation fault (core dumped)</p>\n</blockquote>\n\n<p>From looking at SO and Google this seems to have to do with attempting to access memory the code doesn't have access to in some scope. However I can't seem to figure out where it's occurring.</p>\n\n<p><strong>What I'm trying to do (expecting):</strong></p>\n\n<p>I'm following along in The C Programming language and am attempting to solve exercise 2.4: <code>squeeze(s1, s2)</code> - remove all instances of characters in s2 in s1.</p>\n\n<p>I have yet to touch on dynamic arrays etc, so I am only 'able' (in the mildest sense of the word) of working with simple, primitive data types. I've got experience with higher level languages though!</p>\n\n<p><strong>What I've done:</strong></p>\n\n<p>I'm running CygWin on a Windows 10 machine and have no issues with the compiler (gcc). </p>\n\n<p>Here is the code I've written to solve the above problem:</p>\n\n<pre><code>/*\n    Exercise 2.4\n    squeeze (s1, s2): Remove all characters of s2 in s1.\n    INPUT : s1.length &gt;= s2 &gt; 0.\n    OUTPUT: The rest of s1 after deleting all occurances of letters in s2.\n*/\n\n#include &lt;stdio.h&gt;\n\nvoid squeeze (char s1[], const char *s2);  /* Returns (by-ref) the resulting string s1 after removing all occurences of s2. */\nint toUpper(char c);                      /* returns the numerical representation of a hexadecimal digit. */\n\nint main () {\n    char s1[] = \"I am a test.\\0\";\n    const char *s2 = \"AE\\0\";\n    printf(\"Before manipulation: %s\\n\", s1);\n    squeeze(s1, s2);\n    printf(\"After manipulation:  %s\", s1);\n}\n\n/*\n    Returns the (by-ref) resulting string s1 after removing all occurences\n    of letters in s2.\n*/\n\nvoid squeeze (char s1[], const char *s2) {\n    int index, s2_index, c = 0;\n\n    while (s1[index] != '\\0') {\n        while(s2[s2_index] != '\\0') {\n            if ((c = toUpper(s1[index])) == s2[s2_index]){\n                s1[index] = s1[index + 1];\n            }\n            s2_index++;\n        }\n        s2_index = 0;\n        index++;\n    }\n}\n/*\n    Returns the upper-case representation of char c.\n*/\n\nint toUpper (char c) {\n    if (c &gt;= 'a' &amp;&amp; c &lt;= 'z')\n        return c - 32;\n    else\n        return c;\n}\n</code></pre>\n\n<p>Cheers! If you have any questions or if I've missed something, don't hesitate to comment! :)</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["c", "undeclared-identifier"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 10, "creation_date": 1493203789, "post_id": 43632043, "comment_id": 74311986, "body": "C doesn&#39;t have packages or namespaces... it&#39;s <code>pow</code>, and include <code>math.h</code>"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1493203791, "post_id": 43632043, "comment_id": 74311990, "body": "@Yasmin12  Just remove Math."}, {"owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493203937, "post_id": 43632043, "comment_id": 74312070, "body": "@Jean-Fran&#231;oisFabre and link with <code>-lm</code>"}, {"owner": {"reputation": 1648, "user_id": 4620387, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e3a06c1e1f8e1b1b4e3c8a6651be2b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam12", "link": "https://stackoverflow.com/users/4620387/sam12"}, "edited": false, "score": 0, "creation_date": 1493203978, "post_id": 43632043, "comment_id": 74312090, "body": "Thank you!! worked"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "edited": false, "score": 0, "creation_date": 1493204069, "post_id": 43632043, "comment_id": 74312148, "body": "@yoones: you&#39;re right, but I found out that it was no longer necessary on latest versions of gcc."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 5, "last_activity_date": 1493204368, "last_edit_date": 1495541878, "creation_date": 1493204033, "answer_id": 43632141, "question_id": 43632043, "link": "https://stackoverflow.com/questions/43632043/error-math-undeclared-first-use-in-this-function/43632141#43632141", "title": "Error: &#39;Math&#39; undeclared first use in this function", "body": "<p><code>pow</code> is part of the math library, but there are no namespaces or packages in C.</p>\n\n<p>So first</p>\n\n<pre><code>#include &lt;math.h&gt;\n</code></pre>\n\n<p>then call as:</p>\n\n<pre><code>int x = pow(10.0,k);\n</code></pre>\n\n<p>Old versions of <code>gcc</code> require you to add <code>-lm</code> when linking, although this is unnecessary with latest versions (version 6 doesn't require it anymore).</p>\n\n<p>note that there's no need to cast <code>k</code> as a <code>double</code>, and also, you may have loss of precision by storing your result in an <code>int</code> (truncating)</p>\n\n<p>Also note that if you're doing that to get an integer power of <code>10</code>, you'd better use integer multiplication in a loop (there are even better algorithms, but still integers, like <a href=\"https://stackoverflow.com/questions/101439/the-most-efficient-way-to-implement-an-integer-based-power-function-powint-int\">The most efficient way to implement an integer based power function pow(int, int)</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 666, "user_id": 5528050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/042147048891864e89e7c7671e3d21f4?s=128&d=identicon&r=PG&f=1", "display_name": "Abi", "link": "https://stackoverflow.com/users/5528050/abi"}, "is_accepted": false, "score": 1, "last_activity_date": 1493204120, "creation_date": 1493204120, "answer_id": 43632172, "question_id": 43632043, "link": "https://stackoverflow.com/questions/43632043/error-math-undeclared-first-use-in-this-function/43632172#43632172", "title": "Error: &#39;Math&#39; undeclared first use in this function", "body": "<p>First You need to include <strong>math library</strong> before main like</p>\n\n<pre><code>#include &lt;math.h&gt;\n</code></pre>\n\n<p>Then just use Your code as </p>\n\n<pre><code>int x= pow(10.0,(double)k);\n</code></pre>\n"}], "owner": {"reputation": 1648, "user_id": 4620387, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e3a06c1e1f8e1b1b4e3c8a6651be2b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam12", "link": "https://stackoverflow.com/users/4620387/sam12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2873, "favorite_count": 0, "accepted_answer_id": 43632141, "answer_count": 2, "score": 1, "last_activity_date": 1493227194, "creation_date": 1493203742, "last_edit_date": 1493227194, "question_id": 43632043, "link": "https://stackoverflow.com/questions/43632043/error-math-undeclared-first-use-in-this-function", "title": "Error: &#39;Math&#39; undeclared first use in this function", "body": "<p>I keep getting this error:</p>\n\n<blockquote>\n  <p>'Math' undeclared first use in this function</p>\n</blockquote>\n\n<p>although I included the math library.</p>\n\n<pre><code>int x = Math.pow(10.0,(double)k);\n</code></pre>\n\n<p>This is the line where I get the error, any ideas why?</p>\n"}, {"tags": ["c", "malloc", "popen", "realloc", "pclose"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 4, "creation_date": 1493203249, "post_id": 43631826, "comment_id": 74311603, "body": "<code>strlen(version) + strlen(path) + 1</code> you&#39;re missing the NUL terminator your buffer is too short"}, {"owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "edited": false, "score": 3, "creation_date": 1493203261, "post_id": 43631826, "comment_id": 74311611, "body": "You&#39;re missing one byte in your memory allocation for the &#39;\\0&#39; caracter."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493203288, "post_id": 43631826, "comment_id": 74311626, "body": "<code>version = realloc(version, strlen(version) + strlen(path) + 1);</code> don&#39;t cast return value of <code>realloc</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1493203378, "post_id": 43631826, "comment_id": 74311684, "body": "that said: you&#39;re very unlucky (or lucky, depends) to crash your program with only 1 byte too short. Those kind of errors are usually invisible or act like a time-bomb on your program."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493203791, "post_id": 43631826, "comment_id": 74311991, "body": "@Jean-Fran&#231;oisFabre Well, the old <a href=\"http://stackoverflow.com/q/605845/1312382\">discussion</a> again - and there is the &quot;do cast&quot; fraction, too (I personally am part of...). I like the conclusion from this <a href=\"http://stackoverflow.com/a/33047365/1312382\">answer</a>: &quot;Although malloc without cast is preferred method and most experienced programmers choose it, you should use whichever you like having aware of the issues.&quot;"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1493204168, "post_id": 43631826, "comment_id": 74312206, "body": "Never do <code>version = realloc(version ...)</code> What if realloc returns NULL? It will lead to a leak."}, {"owner": {"reputation": 81, "user_id": 7306443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07f09f3135863f160314a57e244042a0?s=128&d=identicon&r=PG&f=1", "display_name": "Mantas Pranck\u016bnas", "link": "https://stackoverflow.com/users/7306443/mantas-pranck%c5%abnas"}, "edited": false, "score": 0, "creation_date": 1493204859, "post_id": 43631826, "comment_id": 74312652, "body": "Thanks !!!!! Jean-Fran&#231;ois Fabre answer was correct"}], "owner": {"reputation": 81, "user_id": 7306443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07f09f3135863f160314a57e244042a0?s=128&d=identicon&r=PG&f=1", "display_name": "Mantas Pranck\u016bnas", "link": "https://stackoverflow.com/users/7306443/mantas-pranck%c5%abnas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1493203119, "creation_date": 1493203119, "question_id": 43631826, "link": "https://stackoverflow.com/questions/43631826/segmentation-fault-after-realloc", "title": "Segmentation fault after realloc", "body": "<p>this is my code:</p>\n\n<pre><code>void  Available_firmware_version(){\nchar *version = (char *) malloc(2);\nstrcpy(version, \"\");\nFILE *fp;\nint status = 0;\nchar path[PATH_MAX];\nfp = popen(\"swift list Manto\", \"r\");\n\nif (fp == NULL){\n    printf(\"Error: Popen is NULL \\n\");\n    return;\n}\n\nwhile (fgets(path, PATH_MAX, fp) != NULL){\n    version = (char *) realloc(version, strlen(version) + strlen(path));\n    strcat(version, path);\n    printf(\"%s\\n\", version);\n}\n\nstatus = pclose(fp);\nif (status == -1) {\n    printf(\"Error: Popen not closed (pclose)\\n\");\n    return;\n}\nfree(version);\n}\n</code></pre>\n\n<p>When I execute code my program crash. Output is segmentation fault, before pclose(fp) command. When I delete realloc program run fine. Maybe I doing something wrong with realloc? </p>\n"}, {"tags": ["python", "c++", "c", "linux", "signal-processing"], "comments": [{"owner": {"reputation": 19105, "user_id": 3005167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t0bMQ.png?s=128&g=1", "display_name": "kazemakase", "link": "https://stackoverflow.com/users/3005167/kazemakase"}, "edited": false, "score": 0, "creation_date": 1493203799, "post_id": 43631564, "comment_id": 74311996, "body": "<a href=\"http://stackoverflow.com/q/43353172/3005167\">This question</a> contains working Python code for capturing microphone data. Might come in handy for you."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1493204310, "post_id": 43631564, "comment_id": 74312292, "body": "If you wanted a C or Python answer, why did you add a C++ tag?"}, {"owner": {"reputation": 482, "user_id": 5811508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/961907533886165/picture?type=large", "display_name": "denisb411", "link": "https://stackoverflow.com/users/5811508/denisb411"}, "edited": false, "score": 0, "creation_date": 1493204373, "post_id": 43631564, "comment_id": 74312330, "body": "It can be in C++ too. Editted the question."}, {"owner": {"reputation": 482, "user_id": 5811508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/961907533886165/picture?type=large", "display_name": "denisb411", "link": "https://stackoverflow.com/users/5811508/denisb411"}, "reply_to_user": {"reputation": 19105, "user_id": 3005167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t0bMQ.png?s=128&g=1", "display_name": "kazemakase", "link": "https://stackoverflow.com/users/3005167/kazemakase"}, "edited": false, "score": 0, "creation_date": 1493204389, "post_id": 43631564, "comment_id": 74312344, "body": "@kazemakase Thanks for the suggestion."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493207509, "post_id": 43631564, "comment_id": 74314625, "body": "&quot;How do I record sound with code written in any programming language&quot; is far too broad a question for this site."}], "answers": [{"comments": [{"owner": {"reputation": 482, "user_id": 5811508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/961907533886165/picture?type=large", "display_name": "denisb411", "link": "https://stackoverflow.com/users/5811508/denisb411"}, "edited": false, "score": 0, "creation_date": 1493212522, "post_id": 43632432, "comment_id": 74318698, "body": "Thanks a lot for your answer. I&#39;m just having a bad time at understanding how the microphone works and how can I get &#39;high quality&#39; data. Do you have any article talking about this so I can learn how it works?"}, {"owner": {"reputation": 482, "user_id": 5811508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/961907533886165/picture?type=large", "display_name": "denisb411", "link": "https://stackoverflow.com/users/5811508/denisb411"}, "edited": false, "score": 0, "creation_date": 1493213260, "post_id": 43632432, "comment_id": 74319332, "body": "I&#39;m reading about buffer size, and it in most cases is 1024. What does it means?"}, {"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 1, "creation_date": 1493214349, "post_id": 43632432, "comment_id": 74320248, "body": "It means there&#39;s a buffer, 1024 elements long, each element is probably a sample."}, {"owner": {"reputation": 482, "user_id": 5811508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/961907533886165/picture?type=large", "display_name": "denisb411", "link": "https://stackoverflow.com/users/5811508/denisb411"}, "reply_to_user": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 0, "creation_date": 1493225337, "post_id": 43632432, "comment_id": 74328588, "body": "@Colin__s each element is a wave? 1024 elements per second? I&#39;m not understanding."}, {"owner": {"reputation": 422, "user_id": 6517986, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/875b67dfc371dc5b052028606869ce60?s=128&d=identicon&r=PG&f=1", "display_name": "Atrag", "link": "https://stackoverflow.com/users/6517986/atrag"}, "edited": false, "score": 0, "creation_date": 1493239557, "post_id": 43632432, "comment_id": 74336738, "body": "Regardless of the wording he used, it seems pretty obvious to me that he wants to read the samples delivered by the sound card &#39;every few milliseconds&#39; rather than sampling himself the microphone signal level at that rate!"}, {"owner": {"reputation": 422, "user_id": 6517986, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/875b67dfc371dc5b052028606869ce60?s=128&d=identicon&r=PG&f=1", "display_name": "Atrag", "link": "https://stackoverflow.com/users/6517986/atrag"}, "edited": false, "score": 0, "creation_date": 1493239572, "post_id": 43632432, "comment_id": 74336746, "body": "That being the case, he can safely ignore this response.   On a side note: It is not true that he would &#39;ignore&#39; frequencies above the nyquist frequency, as they would be there in the form of aliasing products."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 3, "last_activity_date": 1493204819, "creation_date": 1493204819, "answer_id": 43632432, "question_id": 43631564, "link": "https://stackoverflow.com/questions/43631564/how-to-capture-the-microphone-buffer-raw-data/43632432#43632432", "title": "How to capture the microphone buffer raw data?", "body": "<p>\"I'm needing to capture the raw data (every few milliseconds) that the microphone provides\"</p>\n\n<p>No, you don't. That wouldn't work. Even if you captured that data every millisecond, at exactly a multiple of 1000 microseconds (no jitter), you would have an audio quality that's utterly horrible. A sample frequency of 1000 Hz (once per millisecond) limits the Nyquist frequency to 500 Hz. That's horribly low.</p>\n\n<p>\"I want to make real time maginitude analysis\". Well, you're ignoring the magnitude of components above 500 Hz, which is about 98% of the audible frequencies.</p>\n\n<p>\"real time fft\" - same problem, that too would miss 98%. </p>\n\n<p>You can't handle raw audio like that. You must rely on the sound card to do the heavy lifting, to get the timing rights. It can sample sounds every 21 <strong>microseconds</strong>, with microsecond accuracy. You can talk to the audio card using ALSA or PulseAudio, or a few other options (that's sound on Linux for you). But recommendations there would be off-topic.</p>\n"}], "owner": {"reputation": 482, "user_id": 5811508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/961907533886165/picture?type=large", "display_name": "denisb411", "link": "https://stackoverflow.com/users/5811508/denisb411"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1153, "favorite_count": 0, "closed_date": 1493214045, "accepted_answer_id": 43632432, "answer_count": 1, "score": 2, "last_activity_date": 1493204819, "creation_date": 1493202480, "last_edit_date": 1493204347, "question_id": 43631564, "link": "https://stackoverflow.com/questions/43631564/how-to-capture-the-microphone-buffer-raw-data", "closed_reason": "Needs more focus", "title": "How to capture the microphone buffer raw data?", "body": "<p>I'm needing to capture the raw data (every few miliseconds) that the microphone provides. For preference on Python, but it can be in C/C++ too. I'm using Linux/macOS.</p>\n\n<p>How do I capture the audio wave (microphone input) and what kind of data it will be? Pure bytes? An array with some data?</p>\n\n<p>I want to make real time maginitude analysis and (if magnitude reachs a determined value) real time fft of the microphone signal, but I don't know the concepts about what data and how much data the microphone provides me.</p>\n\n<p>I see a lot of code that sets to capture 44.1kHz of the audio, but does it capture all this data? The portion of data taken depends of how it was programmed?</p>\n"}, {"tags": ["c", "malloc"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 3, "creation_date": 1493203161, "post_id": 43631235, "comment_id": 74311538, "body": "Post text as text itself, not as an image."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493207295, "post_id": 43631235, "comment_id": 74314458, "body": "Use 2D arrays instead of pointer arrays and all such bugs will go away automatically. There is no apparent need to use an array of pointers here."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7924484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4601e2d0a96abad4a12ac1773085a1f5?s=128&d=identicon&r=PG&f=1", "display_name": "Lidor", "link": "https://stackoverflow.com/users/7924484/lidor"}, "edited": false, "score": 0, "creation_date": 1493203303, "post_id": 43631310, "comment_id": 74311636, "body": "Thank you, it worked. but why shouldn&#39;t I cast the return value of malloc()? Our teacher told us to do so, it&#39;s a convention"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 11, "user_id": 7924484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4601e2d0a96abad4a12ac1773085a1f5?s=128&d=identicon&r=PG&f=1", "display_name": "Lidor", "link": "https://stackoverflow.com/users/7924484/lidor"}, "edited": false, "score": 0, "creation_date": 1493205457, "post_id": 43631310, "comment_id": 74313126, "body": "@Lidor You can <a href=\"http://stackoverflow.com/a/605858/28169\">see this answer</a> for the reasons why. If that&#39;s your convention I guess you have to, but I can&#39;t know that when you post your code. :) Also, I&#39;d say it&#39;s a bad convention and should be changed, for the reasons given in the linked answer."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 4, "last_activity_date": 1493201839, "creation_date": 1493201839, "answer_id": 43631310, "question_id": 43631235, "link": "https://stackoverflow.com/questions/43631235/free-crashes-the-code/43631310#43631310", "title": "free() crashes the code", "body": "<p>This:</p>\n\n<pre><code>pArr[i] = (int*) malloc(sizeof(int) * sizes + 1);\n</code></pre>\n\n<p>under-allocates. Adding a single byte to the size of an array of <code>int</code> makes little sense. You probably meant:</p>\n\n<pre><code>pArr[i] = malloc((sizes + 1) * sizeof *pArri[i]);\n</code></pre>\n\n<p>Don't cast the return value of <code>malloc()</code>, and use <code>sizeof</code> on the left-hand side.</p>\n"}], "owner": {"reputation": 11, "user_id": 7924484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4601e2d0a96abad4a12ac1773085a1f5?s=128&d=identicon&r=PG&f=1", "display_name": "Lidor", "link": "https://stackoverflow.com/users/7924484/lidor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 43631310, "answer_count": 1, "score": 0, "last_activity_date": 1493201839, "creation_date": 1493201626, "question_id": 43631235, "link": "https://stackoverflow.com/questions/43631235/free-crashes-the-code", "title": "free() crashes the code", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid printingArr(int** arr, int rows);\nvoid sortingEachOneOfThem(int** pArr, int rows);\nvoid sortingTheWholeArray(int** pArr, int rows);\nvoid bubbleSort(int* arr);\nvoid freeArray(int **a, int m);\n\nint main(void)\n{\n    int** pArr = 0;\n    int numOfRows = 0;\n    int sizes = 0;\n    printf(\"Enter number of rows: \");\n    scanf(\"%d\", &amp;numOfRows);\n    pArr = (int**) malloc(sizeof(int*) * numOfRows);\n    if (pArr == NULL)\n    {\n        printf(\"Unsuccessful malloc!\\n\");\n        return 1;\n    }\n\n    for (int i = 0; i &lt; numOfRows; i++)\n    {\n        printf(\"Enter array length for row %d: \",i);\n        scanf(\"%d\", &amp;sizes);\n        pArr[i] = (int*) malloc(sizeof(int) * sizes + 1);\n        if (pArr[i] == NULL)\n        {\n            printf(\"Unsuccessful malloc!\\n\");\n            return 1;\n        }   \n        pArr[i][0] = sizes;\n        for (int k = 1; k &lt; sizes + 1; k++)\n        {\n            printf(\"Enter value for array: \");\n            scanf(\"%d\", &amp;pArr[i][k]);\n        }\n    }\n    printingArr(pArr, numOfRows);\n    sortingEachOneOfThem(pArr, numOfRows);\n    printingArr(pArr, numOfRows);\n    sortingTheWholeArray(pArr, numOfRows);\n    printingArr(pArr, numOfRows);\n\n\n    for (int i = 0; i &lt; numOfRows; i++)\n    {\n        if (pArr[i] != NULL)\n        {\n            free(*(pArr + i));\n        }\n    }\n    //free(pArr);\n\n    system(\"pause\");\n    return 0;\n}\n/*\nthis amazing, wonderfull piece of program prints the array given\ninput: int** arr, int rows\noutput: none\n*/\nvoid printingArr(int** arr, int rows)\n{\n    int i = 0;\n    int k = 0;\n    for (i = 0; i &lt; rows; i++)\n    {\n        for (k = 0; k &lt;= arr[i][0]; k++)\n        {\n            printf(\"%d \", arr[i][k]);\n        }\n        printf(\"\\n\");\n    }\n    printf(\"\\n\");\n}\n/*\nThis beautiful function sorts the whole array, but its length of rows like a pyramid\ninput: int** arr, int rows\noutput: none\n*/\nvoid sortingTheWholeArray(int** pArr, int rows)\n{\n    int* temp = 0;\n    int i = 0, k = 0;\n    for (i = 0; i &lt; rows - 1; i++)\n    {\n        for (k = 0; k &lt; rows - 1; k++)\n        {\n            if (pArr[k][0] &gt; pArr[k + 1][0])\n            {\n                temp = pArr[k];\n                pArr[k] = pArr[k + 1];\n                pArr[k + 1] = temp;\n            }\n        }\n    }\n}\n/*\nThis little small function sorts every row of the array of arrays given to it\ninput: int** arr, int rows\noutput: none\n*/\n\nvoid sortingEachOneOfThem(int** pArr, int rows)\n{\n    int i = 0;\n    for (i = 0; i &lt; rows; i++)\n    {\n        bubbleSort(pArr[i]);\n    }\n}\n\n/*\nThis little piece of a code is a bubble sort, sorts the array given to it :)\ninput: int* arr, int rows\noutput: none\n*/\n\nvoid bubbleSort(int* arr)\n{\n    int i = 1, k = 0;\n    for (i = 1; i &lt; arr[0] - 1; i++)\n    {\n        for (k = 1; k &lt;= arr[0] - i; k++)\n        {\n            if (arr[k] &gt; arr[k + 1])\n            {\n                arr[k] += arr[k + 1];\n                arr[k + 1] = arr[k] - arr[k + 1];\n                arr[k] -= arr[k + 1];\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>the free at the end crashes my code, showing this error:\n<a href=\"https://i.stack.imgur.com/nqxBG.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/nqxBG.png</a>\nthe same usage of the function free() on another code worked good, but not here. I have tried running through it in step by step mode, it crashes at the first free. Dr. memory shows this: <a href=\"https://i.stack.imgur.com/rSZJr.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/rSZJr.png</a> \nanother link: https:// i.stack. imgur.com/ZX2Ne.png (paste it without the spaces in the middle, Can't post more than 2 links)\nwhat can I do?</p>\n"}, {"tags": ["c", "gcc", "clang", "typedef"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1493201334, "post_id": 43631062, "comment_id": 74310269, "body": "The attribute is most likely applied on <code>aligned_floatptr2</code> and not the <code>float</code> type."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1493205435, "post_id": 43631062, "comment_id": 74313109, "body": "@StoryTeller, I think you&#39;re right. I think it my the same as <code>typedef float * restrict aligned_floatptr2 __attribute((aligned(64)));</code> which has the same effect. I guess there is no way to do this in one typedef. That&#39;s not a big deal. It just took me a while to figure out that it was not doing what I wanted."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1493206785, "post_id": 43631062, "comment_id": 74314111, "body": "1) Never typedef pointers. 2) How does it even make sense to typedef something as <code>restrict</code>? How can a type know how variables of that type will be used by the program? It is a bad idea in general to use type qualifiers inside type definitions."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493207617, "post_id": 43631062, "comment_id": 74314698, "body": "@Lundin I edited my question to explain why I want to do this.  Is <code>intptr_t</code> a typedef of a int pointer?  Wikiepedia give an example of typedef with pointers <a href=\"https://en.wikipedia.org/wiki/Typedef#Using_typedef_with_pointers\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Typedef#Using_typedef_with_pointers</a>  . Why should I never do this?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1493207741, "post_id": 43631062, "comment_id": 74314760, "body": "@Zboson - The examples in Wikipedia are not normative to say the least. This one in particular is a toy example that should be removed for the bad practice it demonstrates as a side effect."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1493210353, "post_id": 43631062, "comment_id": 74316823, "body": "@Zboson: <code>intptr_t</code> is not a typedef of an int pointer, it&#39;s just named that way because it is the signed integer type that can temporarily hold the value of any <code>void</code> pointer. The reason you should not typedef pointers is  that it makes the code much harder to understand correctly for us humans, and in a way that makes misunderstanding easier/more likely than correct understanding -- nasty gotchas with no upsides (other than maybe making writing the initial version of the code easier)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493211359, "post_id": 43631062, "comment_id": 74317668, "body": "@Zboson <code>intptr_t</code> is an integer, not a pointer. As per the very definition of that type&#39;s usage: to be large enough to hold a pointer converted to an integer. I don&#39;t know which amateur hobbyist that wrote the linked Wikipedia article, but that&#39;s Wikipedia&#39;s problem... The reason why you shouldn&#39;t hide pointers behind typedefs is because it leads to confusion and makes the code unreadable. There is a broad industry consensus about this and it has been debated many times before on SO."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1493212875, "post_id": 43631062, "comment_id": 74319001, "body": "@Lundin <code>intptr_t</code> was a stupid example. Wikipedia typedef a int pointer they called <code>intptr</code> and I confused it with <code>intptr_t</code>. Okay, this is the first time I typedef a pointer. I admit I did not like it at first because it&#39;s not clear it&#39;s a pointer anymore but on the other hand it removed a lot of code duplication.  <code>floatptr a</code> which I have many times is a lot shorter than <code>float * restrict a</code>. I get a huge benefit with <code>restrict</code> in dense matrix multiplication."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1493213245, "post_id": 43631062, "comment_id": 74319326, "body": "@Zboson &quot;Saving key presses&quot; is a terrible rationale for changing the program design. If you feel that the original declaration line turned to long, you can format the code so that each function parameter ends up on a line of its own."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493214227, "post_id": 43631062, "comment_id": 74320140, "body": "BTW: C11 (maybe C99) offers <code>alignas</code>, so maybe use <code>typedef alignas(64) float aligned_float;</code> for portability.  Also: why 64?"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493276261, "post_id": 43631062, "comment_id": 74348990, "body": "@chux as far as I can tell you cannot typedef <code>alignas</code>"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493276611, "post_id": 43631062, "comment_id": 74349202, "body": "@Lundin, I got the idea for typedef for a pointer with restrict from <a href=\"http://stackoverflow.com/a/4175350/2542702\">herer</a> and <a href=\"https://stackoverflow.com/questions/2748818/c-c-restrict-type\">here</a>."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493286187, "post_id": 43631062, "comment_id": 74355654, "body": "@chux, the most portable way I know for alignment is to use <code>#pragma omp simd aligned(a,b,c:64)</code>. That works for GCC, Clang, and ICC but not MSVC.  The alignment probably only needs to be 32 (AVX). I don&#39;t have a good reason to use 64. The alignment only matters because GCC produces much better code when it&#39;s aligned (Clang produces good code either way)."}], "owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1493303252, "creation_date": 1493201185, "last_edit_date": 1493303252, "question_id": 43631062, "link": "https://stackoverflow.com/questions/43631062/typedef-with-restrict-keyword", "title": "typedef with restrict keyword", "body": "<p>I defined aligned floats like this</p>\n\n<pre><code>typedef __attribute((aligned(64))) float aligned_float;\n</code></pre>\n\n<p>And then I define aligned floats with the <code>restrict</code> keyword like this</p>\n\n<pre><code>typedef aligned_float * restrict aligned_floatptr;\n</code></pre>\n\n<p>This works like I expect. But since I almost always want these two together I tried typedef in one line like this</p>\n\n<pre><code>typedef __attribute((aligned(64))) float * restrict aligned_floatptr2\n</code></pre>\n\n<p>However, this does not work. The <code>restrict</code> keyword is still recognized but the alignment is not.  The compiler gives me no warning however. I only realized the alignment did not work by looking at the assembly.  </p>\n\n<p>Why does the combined definition not work and why don't I get a warning?</p>\n\n<p>You can see the assembly for Clang and GCC <a href=\"https://godbolt.org/g/7Bm2US\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<hr>\n\n<p>The reason I want to do this is that I have code like this</p>\n\n<pre><code>static void kernel(float * restrict a, float * restrict b, float * restrict c, int n) {\n  a = __builtin_assume_aligned(a, 64);\n  b = __builtin_assume_aligned(b, 64);\n  c = __builtin_assume_aligned(c, 64);\n  //rest of code\n</code></pre>\n\n<p>}</p>\n\n<p>and I have MANY variations of this. I find it more convenient to use</p>\n\n<pre><code>static void kernel(aligned_flotptr a, aligned_floatptr b, aligned_floatptr c, int n) {\n    //rest of code\n}\n</code></pre>\n\n<hr>\n\n<p>I just realized that Clang does not seem to recognizing even <code>aligned_float</code>. It's only GCC the recognizes it.  With Clang I still need to use <code>__builtin_assume_aligned</code> (or maybe <code>#praga omp sind aligned</code>). On the other hand, Clang produces good code even without alignment (unaligned instructions are as fast as the aligned versions for several generations now) so it's really really with GCC that I need alignment.</p>\n"}, {"tags": ["c", "switch-statement"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7881131"}, "edited": false, "score": 3, "creation_date": 1493200409, "post_id": 43630748, "comment_id": 74309646, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/integer_literal\" rel=\"nofollow noreferrer\">Octal literal</a>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1493200416, "post_id": 43630748, "comment_id": 74309651, "body": "It is octal......"}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 1, "creation_date": 1493200581, "post_id": 43630748, "comment_id": 74309747, "body": "I&#39;ve removed the assembly tag for the question, as standing, has nothing to do with assembly. You can re-add it later if needed. Remember that the assembly tag always goes with a specific architecture tag (e.g. x86-64, arm, mips, ...)"}, {"owner": {"reputation": 70991, "user_id": 650492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/FY7Qc.png?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/650492/johan"}, "edited": false, "score": 0, "creation_date": 1493200947, "post_id": 43630748, "comment_id": 74310034, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/20621405/using-c-am-i-right-in-thinking-that-literals-beginning-with-multiple-zeros-are-c\">Using C am I right in thinking that literals beginning with multiple zeros are considered octal?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 5, "last_activity_date": 1493201826, "last_edit_date": 1592644375, "creation_date": 1493200567, "answer_id": 43630837, "question_id": 43630748, "link": "https://stackoverflow.com/questions/43630748/how-does-switch-case-work-when-the-cases-have-number-prepended-with-0/43630837#43630837", "title": "How does switch case work when the cases have number prepended with 0?", "body": "<p>Referring to <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">c standard</a></p>\n<blockquote>\n<p><strong>6.4.4.1 Integer constants</strong></p>\n<p>A decimal constant begins with a nonzero digit and consists of a sequence of decimal\ndigits. <strong>An octal constant consists of the prefix 0 optionally followed by a sequence of the\ndigits 0 through 7 only.</strong> A hexadecimal constant consists of the prefix 0x or 0X followed\nby a sequence of the decimal digits and the letters a (or A) through f (or F) with values\n10 through 15 respectively.</p>\n</blockquote>\n<p><sup>Emphasis mine</sup></p>\n<p>As the code shown seems/is <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a> you can also refer to <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4296.pdf\" rel=\"nofollow noreferrer\">c++14</a></p>\n<blockquote>\n<p><strong>2.13.2 Integer literals</strong></p>\n<p>An integer literal is a sequence of digits that has no period or exponent part, with optional separating single\nquotes that are ignored when determining its value. An integer literal may have a prefix that specifies its base\nand a suffix that specifies its type. The lexically first digit of the sequence of digits is the most significant.\nA binary integer literal (base two) begins with 0b or 0B and consists of a sequence of binary digits. <strong>An octal\ninteger literal (base eight) begins with the digit 0 and consists of a sequence of octal digits.</strong> A decimal\ninteger literal (base ten) begins with a digit other than 0 and consists of a sequence of decimal digits. A\nhexadecimal integer literal (base sixteen) begins with 0x or 0X and consists of a sequence of hexadecimal\ndigits, which include the decimal digits and the letters a through f and A through F with decimal values\nten through fifteen. [ Example: The number twelve can be written 12, 014, 0XC, or 0b1100. The literals\n1048576, 1\u2019048\u2019576, 0X100000, 0x10\u20190000, and 0\u2019004\u2019000\u2019000 all have the same value. \u2014 end example ]</p>\n</blockquote>\n<p><sup>Emphasis mine</sup></p>\n"}, {"tags": [], "owner": {"reputation": 543, "user_id": 3587570, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001071662888/picture?type=large", "display_name": "Valy", "link": "https://stackoverflow.com/users/3587570/valy"}, "is_accepted": false, "score": 3, "last_activity_date": 1493201253, "last_edit_date": 1493201253, "creation_date": 1493200866, "answer_id": 43630955, "question_id": 43630748, "link": "https://stackoverflow.com/questions/43630748/how-does-switch-case-work-when-the-cases-have-number-prepended-with-0/43630955#43630955", "title": "How does switch case work when the cases have number prepended with 0?", "body": "<p>The two numbers <code>021</code> and <code>051</code> are written in <a href=\"http://codingstreet.com/how-to-represent-octal-and-hex-number-in-c/\" rel=\"nofollow noreferrer\">octal form</a>. If you convert them into decimal form you will get:</p>\n\n<pre><code>21 (base 8) = 1 * 8^0 + 2 * 8^1 = 1 + 16 = 17 (base 10)\n51 (base 8) = 1 * 8^0 + 5 * 8^2 = 1 + 40 = 41 (base 10)\n</code></pre>\n\n<p>So, I think you see now why when <code>bankPEM</code> is 17, <code>case 021</code> is executed and when it is 41, <code>case 051</code> is executed.</p>\n\n<p>I don't understand though why the person who implemented the code decided to write the switch cases like this (it isn't even consistent because the 3rd case has a number in base 10).</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7874596, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158279273760467/picture?type=large", "display_name": "Zeeshan Abbas", "link": "https://stackoverflow.com/users/7874596/zeeshan-abbas"}, "is_accepted": false, "score": 1, "last_activity_date": 1493201397, "creation_date": 1493201397, "answer_id": 43631147, "question_id": 43630748, "link": "https://stackoverflow.com/questions/43630748/how-does-switch-case-work-when-the-cases-have-number-prepended-with-0/43631147#43631147", "title": "How does switch case work when the cases have number prepended with 0?", "body": "<p>The problem is preceding zero in case declaration preceding zero make complier to think it's an octal number 021 therefore  17 base 10 = 21 base 8 hence the execution of of case 021 : same goes for 41 base 10 = 51 base 8. </p>\n\n<pre><code> short bankPEM = 0;\n//bankPEM = 41; //Chip\nbankPEM = 17; //Swipe\n//bankPEM = 801; //Fallback\n\n\n\nswitch (bankPEM) {\n    case 021: cout &lt;&lt; bankPEM &lt;&lt; \" \" &lt;&lt; 021;\n\n        break; //Swipe\n    case 051: cout  &lt;&lt; bankPEM &lt;&lt; \" \" &lt;&lt; 051;\n        break; //Chip\n    case 801: cout &lt;&lt; \"801\";\n        break; //Fallback\n    default: cout &lt;&lt; \"Default\";\n        break;\n}\n</code></pre>\n\n<p>I hope this helps. </p>\n"}], "owner": {"reputation": 882, "user_id": 1163286, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/yq3OX.jpg?s=128&g=1", "display_name": "Pankaj Kumar Thapa", "link": "https://stackoverflow.com/users/1163286/pankaj-kumar-thapa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1493201826, "creation_date": 1493200354, "last_edit_date": 1493200498, "question_id": 43630748, "link": "https://stackoverflow.com/questions/43630748/how-does-switch-case-work-when-the-cases-have-number-prepended-with-0", "title": "How does switch case work when the cases have number prepended with 0?", "body": "<p>I am working on an Ingenico's EDC terminal. The below code was existing from previous implementation. While debugging I came across this block of code which I am facing difficulty in understanding.</p>\n\n<pre><code>short bankPEM = 0;\n//bankPEM = 41; //Chip\nbankPEM = 17; //Swipe\n//bankPEM = 801; //Fallback\n\nswitch(bankPEM)\n{\n    case 021: cout&lt;&lt;\"021\"; break; //Swipe\n    case 051: cout&lt;&lt;\"051\"; break; //Chip\n    case 801: cout&lt;&lt;\"801\"; break; //Fallback\n    default: cout&lt;&lt;\"Default\"; break;\n}\n</code></pre>\n\n<p><code>bankPEM</code> is a short variable. I found below exection observation:</p>\n\n<ol>\n<li>When it contains <code>41</code>, <code>case 051</code> is executed.</li>\n<li>When it contains <code>17</code>, <code>case 021</code> is executed.</li>\n<li>When it contains <code>801</code>, <code>case 801</code> is executed.</li>\n</ol>\n\n<p>I expected the code to executed <code>default</code> case for number 1 &amp; 2.\nCan anyone show some light in this case.</p>\n\n<p>I am also converting the code to assembly language. I will share my understanding after debugging the assembly code.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "xml"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1493199716, "post_id": 43630280, "comment_id": 74309148, "body": "There is no generic answer to this. It depends on your xml file and the application that uses it."}, {"owner": {"reputation": 408, "user_id": 6406569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534c75e4dd0ae2bd2406944f73deee19?s=128&d=identicon&r=PG&f=1", "display_name": "vivek", "link": "https://stackoverflow.com/users/6406569/vivek"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1493199779, "post_id": 43630280, "comment_id": 74309190, "body": "There is no way where I can split large xml file into smaller one"}, {"owner": {"reputation": 1568, "user_id": 1058889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e57754cee53ad244135f3d8323323e?s=128&d=identicon&r=PG", "display_name": "Ken Cheung", "link": "https://stackoverflow.com/users/1058889/ken-cheung"}, "edited": false, "score": 0, "creation_date": 1493199788, "post_id": 43630280, "comment_id": 74309196, "body": "XML is not a programming language. It&#39;s just a text file of data. If you want a smaller one, that means either you have a (new) way to break the data file into multiple smaller text (XML) file to process, or... why you care its very large (1GB? 10GB?) if you&#39;re not doing a DOM but a SAX parsing and run through the data processing without fear."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1493200319, "post_id": 43630280, "comment_id": 74309572, "body": "Perhaps you could use XML Inclusions (<a href=\"https://www.w3.org/TR/xinclude/\" rel=\"nofollow noreferrer\">Xinclude</a>) if your XML parser supports it."}, {"owner": {"reputation": 8169, "user_id": 759558, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kz2la.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/759558/neil"}, "edited": false, "score": 1, "creation_date": 1493201226, "post_id": 43630280, "comment_id": 74310208, "body": "Can you explain why you think the file is &#39;too large&#39;, and exactly how large is it?   A 1MB file is large for an embedded system, but it&#39;s tiny for most PCs."}, {"owner": {"reputation": 408, "user_id": 6406569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534c75e4dd0ae2bd2406944f73deee19?s=128&d=identicon&r=PG&f=1", "display_name": "vivek", "link": "https://stackoverflow.com/users/6406569/vivek"}, "reply_to_user": {"reputation": 8169, "user_id": 759558, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kz2la.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/759558/neil"}, "edited": false, "score": 0, "creation_date": 1493202386, "post_id": 43630280, "comment_id": 74311024, "body": "@neil I am implementing xml file in <a href=\"http://libcode.org/projects/klish/\" rel=\"nofollow noreferrer\">klish</a>. So we are implementing some commands for a equipment for that we are using klish. Now the problem is in one xml file I have made many commands so it is now becoming very difficult to track all commands in one xml file. So we decided to split that xml file into multiple xml file so that it become easy to track all command."}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1493207381, "post_id": 43630280, "comment_id": 74314518, "body": "Large xml files should be read using an XmlReader, not split"}, {"owner": {"reputation": 408, "user_id": 6406569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534c75e4dd0ae2bd2406944f73deee19?s=128&d=identicon&r=PG&f=1", "display_name": "vivek", "link": "https://stackoverflow.com/users/6406569/vivek"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1493211202, "post_id": 43630280, "comment_id": 74317527, "body": "@Ian Abbott  Thank you. Your suggestion helped me."}], "answers": [{"tags": [], "owner": {"reputation": 187, "user_id": 3355587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9na1s.jpg?s=128&g=1", "display_name": "Jimmy_A", "link": "https://stackoverflow.com/users/3355587/jimmy-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1493202647, "creation_date": 1493202647, "answer_id": 43631637, "question_id": 43630280, "link": "https://stackoverflow.com/questions/43630280/split-of-xml-files/43631637#43631637", "title": "Split of XML files", "body": "<p>If you just want to split the file into smaller parts you can use the <code>split</code> command in terminal. </p>\n\n<pre><code>Usage: split [OPTION] [INPUT [PREFIX]]\nOutput fixed-size pieces of INPUT to PREFIXaa, PREFIXab, ...; default\nsize is 1000 lines, and default PREFIX is `x'.  With no INPUT, or when INPUT\nis -, read standard input.\n\nMandatory arguments to long options are mandatory for short options too.\n-a, --suffix-length=N   use suffixes of length N (default 2)\n-b, --bytes=SIZE        put SIZE bytes per output file\n-C, --line-bytes=SIZE   put at most SIZE bytes of lines per output file\n-d, --numeric-suffixes  use numeric suffixes instead of alphabetic\n-l, --lines=NUMBER      put NUMBER lines per output file\n    --verbose           print a diagnostic to standard error just\n                        before each output file is opened\n    --help     display this help and exit\n    --version  output version information and exit\n</code></pre>\n"}], "owner": {"reputation": 408, "user_id": 6406569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534c75e4dd0ae2bd2406944f73deee19?s=128&d=identicon&r=PG&f=1", "display_name": "vivek", "link": "https://stackoverflow.com/users/6406569/vivek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 449, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493202647, "creation_date": 1493199165, "last_edit_date": 1493199642, "question_id": 43630280, "link": "https://stackoverflow.com/questions/43630280/split-of-xml-files", "title": "Split of XML files", "body": "<p>I am working on xml file but unfortunately my xml file is become large. So now I want to split my xml file into multiple smaller xml files. Is it possible to split one large xml file into multiple smaller xml files.</p>\n\n<p>For E.g.  If we make any project in c language then we create multiple c files but the main function will always be present in one c file. All other functions or sub programs we keep in different c files. So if we have to call any function we call it from the c file which is having main function.  </p>\n\n<p>Same or similar to that I want in my xml file where there will be one main xml file and all other xml file would be dependent on the main xml file. </p>\n\n<p>In simple words I want to split my large xml file into smaller xml files. I don't have any idea about it. I request you all that please share an example or link for any example of this kind of thing.\nThanks</p>\n"}, {"tags": ["c", "certificate", "verification"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3975449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6149fe71cd560cd421a1b8100ab26836?s=128&d=identicon&r=PG&f=1", "display_name": "Samah Mahdi", "link": "https://stackoverflow.com/users/3975449/samah-mahdi"}, "edited": false, "score": 0, "creation_date": 1493884213, "post_id": 43631589, "comment_id": 74594589, "body": "Thanks a lot ... Now I have used xyssl"}], "tags": [], "owner": {"reputation": 2019, "user_id": 3160184, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LP224.png?s=128&g=1", "display_name": "Motun", "link": "https://stackoverflow.com/users/3160184/motun"}, "is_accepted": true, "score": 0, "last_activity_date": 1493202535, "creation_date": 1493202535, "answer_id": 43631589, "question_id": 43630158, "link": "https://stackoverflow.com/questions/43630158/verify-x-509-certificate-signature-and-validity-c-code/43631589#43631589", "title": "verify x-509 certificate signature and validity c code", "body": "<p>Here are some good sources to look at:</p>\n\n<ul>\n<li><p><a href=\"https://github.com/wolfSSL/wolfssl/blob/dd2915f4faa6c5322ccdecefedd13fe8d524db2e/wolfcrypt/src/asn.c\" rel=\"nofollow noreferrer\">wolfSSL</a></p></li>\n<li><p><a href=\"https://github.com/axic/tropicssl/blob/master/library/x509parse.c\" rel=\"nofollow noreferrer\">tropicssl</a></p></li>\n</ul>\n\n<p>As far as I know, wolfSSL is pretty popular for embedded applications. You will probably find good support when porting it. I haven't taken a closer look at tropicssl but it looks good, too.</p>\n\n<p>And of course, you can always try to port OpenSSL as well, you may begin from here:</p>\n\n<ul>\n<li><a href=\"https://github.com/openssl/openssl/blob/master/crypto/x509/x509_vfy.c\" rel=\"nofollow noreferrer\">OpenSSL</a></li>\n</ul>\n"}], "owner": {"reputation": 3, "user_id": 3975449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6149fe71cd560cd421a1b8100ab26836?s=128&d=identicon&r=PG&f=1", "display_name": "Samah Mahdi", "link": "https://stackoverflow.com/users/3975449/samah-mahdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 1, "closed_date": 1493206712, "accepted_answer_id": 43631589, "answer_count": 1, "score": 0, "last_activity_date": 1493207130, "creation_date": 1493198834, "last_edit_date": 1493207130, "question_id": 43630158, "link": "https://stackoverflow.com/questions/43630158/verify-x-509-certificate-signature-and-validity-c-code", "closed_reason": "Not suitable for this site", "title": "verify x-509 certificate signature and validity c code", "body": "<p>I am searching for small free open source X-509 certificate verification code written in C language for embedded device that do the following:</p>\n\n<ul>\n<li>read X509 certificate and parse it</li>\n<li>check if it signed by specific CA certificate</li>\n<li>check the validity period for the certificate</li>\n</ul>\n\n<p>The code should be without any dependencies like OpenSSL</p>\n"}, {"tags": ["c", "loops"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1493197205, "post_id": 43629491, "comment_id": 74307381, "body": "Pro tips: (1) format your code properly (2) learn to use your debugger."}, {"owner": {"reputation": 690, "user_id": 4187370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/240cfc5c0fab089cfe9035e9bc85f421?s=128&d=identicon&r=PG&f=1", "display_name": "Rogus", "link": "https://stackoverflow.com/users/4187370/rogus"}, "edited": false, "score": 2, "creation_date": 1493197248, "post_id": 43629491, "comment_id": 74307411, "body": "(3) always initialize local variables with values (in your case <code>int a,i,j,rep;</code>)"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1493197330, "post_id": 43629491, "comment_id": 74307462, "body": "(4) <code>main()</code> ---&gt; <code>int main (void)</code>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1493197462, "post_id": 43629491, "comment_id": 74307557, "body": "Read the definition of the <code>for</code> loop. Then, translating a for-loop into a while loop should be a very small problem."}], "answers": [{"tags": [], "owner": {"reputation": 1331, "user_id": 6006584, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5ab44f4eee6188113ae91adc8719d666?s=128&d=identicon&r=PG&f=1", "display_name": "ddor254", "link": "https://stackoverflow.com/users/6006584/ddor254"}, "is_accepted": false, "score": 0, "last_activity_date": 1493197435, "creation_date": 1493197435, "answer_id": 43629630, "question_id": 43629491, "link": "https://stackoverflow.com/questions/43629491/number-triangle-with-while-loop-in-c/43629630#43629630", "title": "Number triangle with while loop in c", "body": "<p>from a quick look at your code it seems like your i and j variables are not initiated with a value , in your program it should be 1 or 0 , depend on the while condition.</p>\n"}, {"comments": [{"owner": {"reputation": 690, "user_id": 4187370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/240cfc5c0fab089cfe9035e9bc85f421?s=128&d=identicon&r=PG&f=1", "display_name": "Rogus", "link": "https://stackoverflow.com/users/4187370/rogus"}, "edited": false, "score": 0, "creation_date": 1493197722, "post_id": 43629685, "comment_id": 74307734, "body": "<b>they haven&#39;t got a value</b> they have a value, but most often it&#39;s trash"}], "tags": [], "owner": {"reputation": 98, "user_id": 4227153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ff40d82d1441627400d9c7a6e77b3f?s=128&d=identicon&r=PG&f=1", "display_name": "Krom", "link": "https://stackoverflow.com/users/4227153/krom"}, "is_accepted": false, "score": 0, "last_activity_date": 1493197893, "last_edit_date": 1493197893, "creation_date": 1493197581, "answer_id": 43629685, "question_id": 43629491, "link": "https://stackoverflow.com/questions/43629491/number-triangle-with-while-loop-in-c/43629685#43629685", "title": "Number triangle with while loop in c", "body": "<p>First of all, you need to instanciate the variables because with while they haven't got a value: int j,i = 1;\nAnd then:</p>\n\n<pre><code>while (i &lt;= a)\n{\n    while (j &lt;= i)\n    {\n        printf(\"%i\", j);\n        j++;\n    }\n    printf(\"\\n\");\n    i++;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7924169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/491ea1d6d5bb4bfc615fb50a9c7d614e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrancas", "link": "https://stackoverflow.com/users/7924169/patrancas"}, "edited": false, "score": 0, "creation_date": 1493198530, "post_id": 43629779, "comment_id": 74308311, "body": "Thank you!! I see I was putting the values in all the wrong places."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 0, "last_activity_date": 1493197842, "creation_date": 1493197842, "answer_id": 43629779, "question_id": 43629491, "link": "https://stackoverflow.com/questions/43629491/number-triangle-with-while-loop-in-c/43629779#43629779", "title": "Number triangle with while loop in c", "body": "<p>You must translate what for does, so:</p>\n\n<ol>\n<li>Init variables before start loops</li>\n<li>use same conditions for your new <code>while</code> loops</li>\n</ol>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int a;\n    int i;\n    int j;\n    int rep;\n    do\n    {\n        printf(\"Type the width of the triangle \\n\");\n        scanf(\"%d\", &amp;a);\n\n        // init i before start loop\n        i=1;\n        while (i &lt;= a)\n        {\n            // init j before start loop\n            j = 1;\n            while (j &lt;= i)\n            {\n                printf(\"%i\", j);\n                j++;\n            }\n            printf(\"\\n\");\n            i++;\n        }\n\n        // init i before start loop\n        i=0;\n        while (i &lt;= a)\n        {\n            // init j before start loop\n            j = 1;\n            while (j &lt;= a-i)\n            {\n                printf(\"%i\", j);\n                j++;\n            }\n            printf(\"\\n\");\n            i++;\n        }\n        printf(\"\\n Do you want to run the program again? \\n 1=Yes \\n\");\n        scanf(\"%i\", &amp;rep);\n    }\n    while (rep == 1);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "is_accepted": true, "score": 0, "last_activity_date": 1493197938, "creation_date": 1493197938, "answer_id": 43629813, "question_id": 43629491, "link": "https://stackoverflow.com/questions/43629491/number-triangle-with-while-loop-in-c/43629813#43629813", "title": "Number triangle with while loop in c", "body": "<p>The outer <code>for</code> part :</p>\n\n<pre><code>for (i = 1; i &lt;= a; i++)\n{\n    ...\n}\n</code></pre>\n\n<p>is equivalent to :</p>\n\n<pre><code>int i = 1;\nwhile (i &lt;= a)\n{\n    ...\n    i++;\n}\n</code></pre>\n\n<p>and the inner <code>for</code> part :</p>\n\n<pre><code>for (j = 1; j &lt;= i; j++)\n{\n    ...\n}\n</code></pre>\n\n<p>is equivalent to :</p>\n\n<pre><code>int j = 1;\nwhile (j &lt;= i)\n{\n    ...\n    j++;\n}\n</code></pre>\n\n<p>So the whole first loop :</p>\n\n<pre><code>for (i = 1; i &lt;= a; i++)\n{\n    for (j = 1; j &lt;= i; j++)\n    {\n        printf(\"%i\", j);\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>will be transformed to :</p>\n\n<pre><code>int i = 1, j;\nwhile (i &lt;= a)\n{\n    j = 1;\n    while (j &lt;= i)\n    {\n        printf(\"%i\", j);\n        j++;\n    }\n    printf(\"\\n\");\n    i++;\n}\n</code></pre>\n\n<hr>\n\n<p>In a similar manner, the second loop :</p>\n\n<pre><code>for (i = 0; i &lt;= a; i++)\n{\n    for (j = 1; j &lt;= a - i; j++)\n    {\n        printf(\"%i\", j);\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>will be transformed to :</p>\n\n<pre><code>int i = 0, j;\nwhile (i &lt;= a)\n{\n    j = 1;\n    while (j &lt;= a - i)\n    {\n        printf(\"%i\", j);\n        j++;\n    }\n    printf(\"\\n\");\n    i++;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": false, "score": 0, "last_activity_date": 1493198343, "creation_date": 1493198343, "answer_id": 43629959, "question_id": 43629491, "link": "https://stackoverflow.com/questions/43629491/number-triangle-with-while-loop-in-c/43629959#43629959", "title": "Number triangle with while loop in c", "body": "<p>In K&amp;R The C Programming Language, the <code>for</code> loop is introduced as syntactic sugar for a while loop i.e.</p>\n\n<pre><code>for (i = 0 ; i &lt; someValue ; ++i)\n//   ^^^^^A  ^^^^^^^^^^^^^B  ^^^C\n{\n    doSomething(i);\n}\n</code></pre>\n\n<p>Is really</p>\n\n<pre><code>i = 0; \n//^^^A\nwhile (i &lt; someValue) \n//     ^^^^^^^^^^^^^B\n{\n    doSomething(i);\n    i++; \n//  ^^^C\n}\n</code></pre>\n\n<p>(For the language lawyers, there is a subtle difference, but you don't need to worry about it until you get to <code>break</code> and <code>continue</code>)</p>\n\n<p>In your program that uses <code>while</code> you do not do any initialisation of your loop variables (bits labelled <code>A</code> in the code sample above). For example, i and j start out undefined and therefore technically remain undefined throughout the code. If by chance they started out as 0, in your j loops you never reset j back to 0</p>\n"}], "owner": {"reputation": 3, "user_id": 7924169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/491ea1d6d5bb4bfc615fb50a9c7d614e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrancas", "link": "https://stackoverflow.com/users/7924169/patrancas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 644, "favorite_count": 0, "accepted_answer_id": 43629813, "answer_count": 5, "score": 0, "last_activity_date": 1493198343, "creation_date": 1493197085, "last_edit_date": 1493197297, "question_id": 43629491, "link": "https://stackoverflow.com/questions/43629491/number-triangle-with-while-loop-in-c", "title": "Number triangle with while loop in c", "body": "<p>I'm just starting to learn and this is actually my firts post here, so sorry if it's kind of a silly question.</p>\n\n<p>I need to make a triangle -which width is determined by the user- using loops. I've already managed to do it with the for loop but when I try to rearrange the variables for the while loop, everything becomes chaos.</p>\n\n<p>This is what i have for 'for':</p>\n\n<pre><code>main()\n{\n    int a, i, j, rep;\n    do\n    {\n        printf(\"Type the width of the triangle \\n\");\n        scanf(\"%d\", &amp;a);\n\n        for (i = 1; i &lt;= a; i++)\n        {\n            for (j = 1; j &lt;= i; j++)\n            {\n                printf(\"%i\", j);\n            }\n            printf(\"\\n\");\n        }\n\n        for (i = 0; i &lt;= a; i++)\n        {\n            for (j = 1; j &lt;= a - i; j++)\n            {\n                printf(\"%i\", j);\n            }\n            printf(\"\\n\");\n        }\n        printf(\"\\n Do you want to run the program again? \\n 1=Yes \\n\");\n        scanf(\"%i\", &amp;rep);\n    }\n    while (rep == 1);\n}\n</code></pre>\n\n<p>and this is what i tried -and failed- with while:</p>\n\n<pre><code>main()\n{\n    int a, i, j, rep;\n    do\n    {\n        printf(\"Type the width of the triangle \\n\");\n        scanf(\"%d\", &amp;a);\n\n        while (i &gt;= 0)\n        {\n            while (j &lt;= a)\n            {\n                printf(\"%i\", j);\n                j++;\n            }\n            a--;\n            printf(\"\\n\");\n            i--;\n            j = 1;\n        }\n        while (i &gt;= 0)\n        {\n            while (j &lt;= a)\n            {\n                printf(\"%i\", j);\n                j++;\n            }\n            a--;\n            printf(\"\\n\");\n            i--;\n            j = 1;\n        }\n        printf(\"\\n Do you want to run the program again? \\n 1=Yes \\n\");\n        scanf(\"%i\", &amp;rep);\n    }\n    while (rep == 1);\n}\n</code></pre>\n"}, {"tags": ["c", "callback", "opencl", "race-condition"], "comments": [{"owner": {"reputation": 658, "user_id": 2108046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3fc0b5573d8bf49d788f942d49ddb7?s=128&d=identicon&r=PG", "display_name": "Ruyk", "link": "https://stackoverflow.com/users/2108046/ruyk"}, "edited": false, "score": 1, "creation_date": 1493207618, "post_id": 43628875, "comment_id": 74314699, "body": "Note that complex code on the callback functions is not allowed in the OpenCL specification, and some functions are specifically disallowed:   <a href=\"https://www.khronos.org/registry/OpenCL/sdk/2.1/docs/man/xhtml/clSetEventCallback.html\" rel=\"nofollow noreferrer\">khronos.org/registry/OpenCL/sdk/2.1/docs/man/xhtml/&hellip;</a>  In particular, clEnqueueReadBuffer cannot be called from your callback function. The main reason is that the OpenCL implementation may have a single scheduling thread, which is calling the callback. If you perform a blocking operation inside the callback, you are blocking the only thread that can execute that operation."}, {"owner": {"reputation": 347, "user_id": 3819881, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4017d4919a45fe1bf02eb791921428a7?s=128&d=identicon&r=PG&f=1", "display_name": "user3819881", "link": "https://stackoverflow.com/users/3819881/user3819881"}, "reply_to_user": {"reputation": 658, "user_id": 2108046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3fc0b5573d8bf49d788f942d49ddb7?s=128&d=identicon&r=PG", "display_name": "Ruyk", "link": "https://stackoverflow.com/users/2108046/ruyk"}, "edited": false, "score": 0, "creation_date": 1493449620, "post_id": 43628875, "comment_id": 74431395, "body": "@Ruyk And how would you do that async behavior dynamically? With the callbacks I understand the behavior, but how would you do it if it is not with callbacks? (can you modify the queue dynamically?)"}, {"owner": {"reputation": 2546, "user_id": 1210992, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/667308854998f2f3ce1a8f386e8c2854?s=128&d=identicon&r=PG", "display_name": "BlueWanderer", "link": "https://stackoverflow.com/users/1210992/bluewanderer"}, "edited": false, "score": 0, "creation_date": 1493572718, "post_id": 43628875, "comment_id": 74462251, "body": "@user3819881 You can signal other threads inside the callback."}, {"owner": {"reputation": 658, "user_id": 2108046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3fc0b5573d8bf49d788f942d49ddb7?s=128&d=identicon&r=PG", "display_name": "Ruyk", "link": "https://stackoverflow.com/users/2108046/ruyk"}, "edited": false, "score": 0, "creation_date": 1493797797, "post_id": 43628875, "comment_id": 74549805, "body": "@user3819881 What do you mean by async behaviour? Non-blocking enqueue operations are asynchronous w.r.t the user thread. They are enqueued into the OpenCL queue, hence they execute one after the other (unless an out-of-order queue is created). clFinish simply blocks the caller thread until all operations in the queue have finished. You can continue to enqueue work on the queue, including from different threads, but it is up to you to synchronize the OpenCL operations with the caller thread. You can, for example, set up a user event that sets an atomic that your thread is monitoring."}], "owner": {"reputation": 347, "user_id": 3819881, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4017d4919a45fe1bf02eb791921428a7?s=128&d=identicon&r=PG&f=1", "display_name": "user3819881", "link": "https://stackoverflow.com/users/3819881/user3819881"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493195568, "creation_date": 1493195568, "question_id": 43628875, "link": "https://stackoverflow.com/questions/43628875/opencl-potential-race-on-read-buffer-non-blocking", "title": "OpenCL potential race on read buffer non blocking", "body": "<p>Although it is not important, I have three 3 buffers of the same size, and a sample kernel.cl (just vector addition). I omit the initialization and releasing steps of the execution.</p>\n\n<p>I have two write buffer (buffer A and B) and one kernel execution (shown below). I define 2 callbacks.</p>\n\n<pre><code>void\nCL_CALLBACK callback_read_fn(cl_event event, cl_int ev_status, void* user_data)\n{\n  printf(\"callback read executed (%d)\\n\", ev_status);\n  callback_data* cb_data = (callback_data*)user_data;\n  int* c_v = cb_data-&gt;c_v;\n  cl_event end = *(cb_data-&gt;end);\n\n  cl_int st;\n\n  printf(\"c_v %p\\n\", (void*)c_v);\n  printf(\"c_v[0] = %d\\n\", c_v[0]);\n\n  c_v[1] = 1;\n\n  st = clSetUserEventStatus(end, CL_COMPLETE);\n  printf(\"set event callback (%d)\\n\", st);\n}\n\nvoid\nCL_CALLBACK callback_kernel_fn(cl_event event, cl_int ev_status, void* user_data)\n{\n  printf(\"callback kernel executed (%d)\\n\", ev_status);\n  callback_data* cb_data = (callback_data*)user_data;\n  cl_command_queue queue = *(cb_data-&gt;queue);\n  cl_mem buf_c = *(cb_data-&gt;buf_c);\n  int* c_v = cb_data-&gt;c_v;\n  int size = cb_data-&gt;size;\n  bool nested_callbacks = cb_data-&gt;nested_callbacks;\n  bool blocking = cb_data-&gt;blocking;\n  cl_event end = *(cb_data-&gt;end);\n\n  cl_event ev_read;\n\n  printf(\"c_v %p\\n\", (void*)c_v);\n  printf(\"c_v[0] = %d\\n\", c_v[0]);\n\n  cl_int st;\n\n  /* printf(\"about to flush\\n\"); */\n  /* clFlush(queue); */\n  /* printf(\"flushed\\n\"); */\n\n  size_t offset = 0;\n  /* size = size + 4; */\n  printf(\"about to read the c buffer\\n\");\n  /* why it does not work? -  blocking to CL_TRUE */\n  st = clEnqueueReadBuffer(queue, buf_c, blocking, offset,\n                           size * sizeof(int), c_v, 0, NULL, &amp;ev_read);\n                           /* size * sizeof(int), c_v, 0, NULL, NULL); */\n\n\n  if (nested_callbacks){\n    st = clSetEventCallback(ev_read, CL_COMPLETE, callback_read_fn, user_data);\n    printf(\"set event callback (%d)\\n\", st);\n  }\n\n  if (!nested_callbacks){\n    st = clSetUserEventStatus(end, CL_COMPLETE);\n    printf(\"set event callback (%d)\\n\", st);\n\n    printf(\"read buffer c_v - buf_c (%d)\\n\", st);\n  }\n}\n\nint\nmain()\n{\n  // initialization\n\n  // Execute kernel\n  st = clEnqueueNDRangeKernel(queue, kernel1, dims, NULL, (const size_t*)gws,\n                              (const size_t*)lws, 0, NULL, &amp;ev_kernel);\n                              /* (const size_t*)lws, 0, NULL, NULL); */\n  printf(\"nd range kernel1 (%d %s)\\n\", st, clErrorString(st));\n\n  end = clCreateUserEvent(context, &amp;st);\n  printf(\"create user event (%d)\\n\", st);\n\n  callback_data* user_data = (callback_data*)malloc(sizeof(callback_data));\n\n  printf(\"c_v %p\\n\", (void*)c_v);\n\n  user_data-&gt;queue = &amp;queue;\n  user_data-&gt;buf_c = &amp;buf_c;\n  user_data-&gt;c_v = c_v;\n  user_data-&gt;size = size;\n  user_data-&gt;end = &amp;end;\n  user_data-&gt;nested_callbacks = use_nested_callbacks;\n  use_data-&gt;blocking = use_blocking;\n\n  if (use_callbacks){\n    st = clSetEventCallback(ev_kernel, CL_COMPLETE, callback_kernel_fn, user_data);\n    printf(\"set event callback (%d)\\n\", st);\n  }\n  /* printf(\"finish queue\\n\"); */\n  /* clFinish(queue); */\n  /* printf(\"finished queue\\n\"); */\n\n  if (use_callbacks){\n    printf(\"waiting for events\\n\");\n    /* /\\* cl_event events[] = {ev_kernel}; *\\/ */\n    cl_event events[] = {end};\n    clWaitForEvents(1, events); // ev_kernel);\n    printf(\"waited for events\\n\");\n  }else{\n    printf(\"about to read the c buffer\\n\");\n    st = clEnqueueReadBuffer(queue, buf_c, use_blocking, 0,\n                             size * sizeof(int), c_v, 0, NULL, NULL);\n    printf(\"read buffer c_v - buf_c (%d)\\n\", st);\n  }\n\n  free(user_data);\n  // ...\n  #define THRESHOLD 0\n  // check\n  printf(\"about to check (first: %d)\\n\", c_v[0]);\n  for (size_t i=0; i&lt;size; i++){\n    if (abs(c_v[i] - (a_v[i] + b_v[i])) &gt; THRESHOLD){\n      printf(\"Wrong checking: a_v[%ld] = %d, b_v[%ld] = %d, c_v[%ld] = %d\\n\", i, a_v[i], i, b_v[i], i, c_v[i]);\n      exit(EXIT_FAILURE);\n    }\n  }\n  // ...\n\n}\n</code></pre>\n\n<p>My problems are related to racings and freezes.</p>\n\n<p>Three questions:</p>\n\n<ol>\n<li>If I use <code>use_callbacks = 1</code>, <code>use_blocking = CL_FALSE</code> and <code>use_nested_callbacks = 0</code> <strong>is there any potencial racing when checking the contents of C?</strong> (maybe the <code>clEnqueueReadBuffer</code> from <code>callback_kernel_fn</code> hasn't finished when we are checking C in <code>main</code>). Also, if I use <code>use_callbacks = 0</code> and <code>use_blocking = CL_FALSE</code> <strong>is there any potencial racing when checking the contents of C?</strong> (all in the same function <code>main</code>). </li>\n<li>Also, <strong>what is the difference in asynchronous behavior between using callbacks and using <code>clFinish</code></strong>? with <code>clFinish</code> I need to provide the <code>queue</code>, but can I still modify the queue from a callback to be able to continue the execution? <strong>I would like use cases</strong>.</li>\n<li><strong>Why using Intel Xeon (CPU and Phi) the process hangs (freezes)</strong> when doing <code>clEnqueueReadBuffer</code> with <code>use_blocking = CL_TRUE</code> only if done in the <code>callback_kernel_fn</code> but not if done in the <code>main</code>? (so, using <code>use_callbacks = 1</code> for the first, or <code>use_callbacks = 0</code> for the second case. It does not happen when using e.g. NVIDIA or AMD GPU.</li>\n</ol>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1493195451, "post_id": 43628824, "comment_id": 74306142, "body": "If the code works but you seek to improve it, this belongs on <a href=\"https://codereview.stackexchange.com\">Code Review</a>"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1493195620, "post_id": 43628824, "comment_id": 74306255, "body": "Look up memoization."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1493195842, "post_id": 43628824, "comment_id": 74306397, "body": "<code>scanf_s(&quot;%d&quot;, &amp;num);</code> with <code>long int num;</code> is undefined behavior, so fix that first. :) Either use <code>%ld</code> or just <code>int num;</code>, the types have to match."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1493200872, "post_id": 43628824, "comment_id": 74309974, "body": "To give a hint, consider what happens if <code>nis200 * 200 == num</code> (in which case, all the other variables can only be zero (i.e. only the first iteration of each inner loop is needed).   Compare that with the number of iterations of each loop that your code actually runs ....."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1493223432, "post_id": 43628824, "comment_id": 74327427, "body": "Welcome to Stack Overflow! I&#39;m voting to close this question as off-topic because this is really much too broad for Stack Overflow, which deals with more focussed coding problems than this.  For advice on improving working code, consider <a href=\"https://codereview.stackexchange.com\">Code Review</a> instead - but do read <a href=\"//codereview.meta.stackexchange.com/a/5778\">A guide to Code Review for Stack Overflow users</a> first."}], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 6044264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d2d52296c121703ff0ec78ea27c0dea?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Fighter", "link": "https://stackoverflow.com/users/6044264/phil-fighter"}, "is_accepted": false, "score": 0, "last_activity_date": 1493217578, "creation_date": 1493217578, "answer_id": 43637346, "question_id": 43628824, "link": "https://stackoverflow.com/questions/43628824/how-can-i-make-this-code-more-efficient-need-to-calaulate-number-of-combination/43637346#43637346", "title": "how can i make this code more efficient? need to calaulate number of combinations", "body": "<p>Check in each for loop if your <code>sum</code> is already above the <code>num</code> and break the loop if it is the case. Not the ultimate optimization but it makes your code much faster.</p>\n"}, {"tags": [], "owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "is_accepted": false, "score": 0, "last_activity_date": 1493223270, "last_edit_date": 1493223270, "creation_date": 1493222883, "answer_id": 43639397, "question_id": 43628824, "link": "https://stackoverflow.com/questions/43628824/how-can-i-make-this-code-more-efficient-need-to-calaulate-number-of-combination/43639397#43639397", "title": "how can i make this code more efficient? need to calaulate number of combinations", "body": "<ol>\n<li><p>You do a lot of counting from 0 to whatever.  If you use a number like 500, then your first iteration will be 0 x 200, 0 x 100 ... all the way down to 0 x 2, and then you count 1s from 0 to 500.  When you're down to your last option, you should be able to calculate how many 1s you still need.</p></li>\n<li><p>For any given bill, you always count how many of it you need without regard for the bills you've already selected.  If you use a number like 500, and you already have 2 x 200, then you will never need 100 5s; you should be able to calculate the maximum number of 5s you will need.  (Keep a running total of each selection-so-far).</p></li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 7924081, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209421600958454/picture?type=large", "display_name": "Josh Algrably", "link": "https://stackoverflow.com/users/7924081/josh-algrably"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1493223270, "creation_date": 1493195404, "last_edit_date": 1493195598, "question_id": 43628824, "link": "https://stackoverflow.com/questions/43628824/how-can-i-make-this-code-more-efficient-need-to-calaulate-number-of-combination", "title": "how can i make this code more efficient? need to calaulate number of combinations", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nvoid main() {\nint nis1 = 0, nis2 = 0, nis5 = 0, nis10 = 0, nis20 = 0, nis50 = 0, nis100 = 0, nis200 = 0;\nlong int num, count = 0, sum = 0;\n\nwhile (1)\n{\n    printf_s(\"what number you like to check? (or press '0' to exit)\\n\");\n    scanf_s(\"%d\", &amp;num);\n    if (num == 0)\n        break;\n\n\n    for (nis200 = 0; nis200 &lt;= num / 200; nis200++) {\n\n        for (nis100 = 0; nis100 &lt;= num / 100; nis100++) {\n\n            for (nis50 = 0; nis50 &lt;= num / 50; nis50++) {\n\n                for (nis20 = 0; nis20 &lt;= num / 20; nis20++) {\n\n                    for (nis10 = 0; nis10 &lt;= num / 10; nis10++) {\n\n                        for (nis5 = 0; nis5 &lt;= num / 5; nis5++) {\n\n                            for (nis2 = 0; nis2 &lt;= num / 2; nis2++) {\n\n                                for (nis1 = 0; nis1 &lt;= num; nis1++) {\n\n                                    sum = nis200 * 200 + nis100 * 100 + nis50 * 50 + nis20 * 20 + nis10 * 10 + nis5 * 5 + nis2 * 2 + nis1 * 1;\n                                    if (sum == num) {\n                                        count++;\n                                        break;\n                                    }\n                                    if (sum &gt; num)\n                                    {\n                                        break;\n                                    }\n\n\n                                }\n                            }\n                        }\n\n                    }\n                }\n            }\n\n        }\n    }\n\n\n    printf_s(\"the number of combinations is: %d\\n\", count);\n\n    count = 0;\n\n\n}\n</code></pre>\n\n<p>}\n//i have to build a code that with a given number by the user, how many posibillities are there to sum the number with the number:1,2,5,10,20,50,100,200.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1493195608, "post_id": 43628783, "comment_id": 74306246, "body": "<code>srand (time (NULL)); int val = rand() % 50; printf (&quot;Enter a value: %d&quot;, val);</code> will work. (include the <code>stdlib.h</code> and <code>time.h</code> headers)  As mentioned below, you would have to then <code>scanf</code> a value and replace the number initially shown."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493195612, "post_id": 43628783, "comment_id": 74306249, "body": "You cannot usually erase a character written to <code>stdout</code> by filling <code>stdin</code> with <code>&#39;\\b&#39;</code> from the console. What you can however do is read input character by character and then erase some characters if the input is <code>&#39;\\b&#39;</code>. I can write an answer demo ing the same."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1493195647, "post_id": 43628783, "comment_id": 74306273, "body": "@DavidC.Rankin That is not what he wants (as far as I understand)."}, {"owner": {"reputation": 502, "user_id": 4681442, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/73fec9197f51f779d2c18627ff5e3f66?s=128&d=identicon&r=PG&f=1", "display_name": "redxef", "link": "https://stackoverflow.com/users/4681442/redxef"}, "edited": false, "score": 2, "creation_date": 1493195688, "post_id": 43628783, "comment_id": 74306296, "body": "The conventional way is to have a default value set and notify the user of it. When the user only presses enter, then this value will be used, otherwise the supplied one. If you can live with that, I would suggest you do it this way, because your approach is complicated."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493195835, "post_id": 43628783, "comment_id": 74306392, "body": "@AjayBrahmakshatriya - yes, I see what you are saying and added a reference to your comment in my original. I also agree with @redxef approach to show a default, e.g. <code>printf (&quot;Enter a value (default: 5): &quot;);</code> (the default could be randomly generated if that is the point)"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1493196253, "post_id": 43628783, "comment_id": 74306687, "body": "@KamiKaze most systems and terminals support erasing by putting <code>&#39;\\b&#39;</code> in <code>stdout</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493236523, "post_id": 43628783, "comment_id": 74335115, "body": "a much better method (from the point of view of the user) is to output the default value, then output the ascii terminal control sequence to move the cursor to the left of the default value, Then the user can just press &#39;enter&#39; or they can type in a different value and press enter.  The program uses a portable method like: <code>getchar()</code> to input the value, if the first input char is &#39;\\n&#39; then use the default value, other wise continue to call <code>getchar()</code> until a &#39;\\n&#39; is input, while accumulating the keypresses from the user."}], "answers": [{"tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 1, "last_activity_date": 1493197468, "last_edit_date": 1493197468, "creation_date": 1493196897, "answer_id": 43629385, "question_id": 43628783, "link": "https://stackoverflow.com/questions/43628783/c-interact-with-terminal-so-that-command-is-written-on-terminal-but-not-execut/43629385#43629385", "title": "C - interact with terminal so that command is written on terminal but not executed", "body": "<p>This is one way you can do it </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main(){\n        char input[100] = \"5\";\n        int pos = 1;\n        int c_read = 0;\n        printf(\"Enter a value: 5\");\n        while (1){\n                c_read = getch();\n                if (c_read == 13 || c_read == -1){\n                       printf(\"\\n\");\n                       break;\n                }\n                if (c_read == 8){\n                        if(pos == 0)\n                                continue;\n                        pos--;\n                        input[pos] = '\\0';\n                        printf(\"\\b \\b\");\n                }else{\n                        if (pos == 99)\n                            continue;  \n                        printf(\"%c\", c_read);\n                        input[pos] = c_read;\n                        pos++;\n                        input[pos] = '\\0';\n                }\n         }\n         printf(\"You entered %s\\n\", input);\n}\n</code></pre>\n\n<p>Ofcourse this uses the god awful <code>getch</code>. You can find that in the <code>ncurses</code> library on Linux and comes with MinGW on windows. </p>\n\n<p>You could replace <code>getch</code> with alternative implementation to read characters from the keyboard.</p>\n\n<p>Also I am leaving it to you to convert the string to number before using.</p>\n\n<p>PS: You might also have to put a <code>fflush(stdout)</code> after every print if it is being buffered for you and changes are not reflecting.</p>\n"}], "owner": {"reputation": 1028, "user_id": 2446144, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6a534deabbc19417be3b7e5100657286?s=128&d=identicon&r=PG", "display_name": "Jose V", "link": "https://stackoverflow.com/users/2446144/jose-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493197468, "creation_date": 1493195276, "question_id": 43628783, "link": "https://stackoverflow.com/questions/43628783/c-interact-with-terminal-so-that-command-is-written-on-terminal-but-not-execut", "title": "C - interact with terminal so that command is written on terminal but not executed", "body": "<p>so i have </p>\n\n<pre><code>system(\"clear\");\nprintf( \"Enter a value :\");`\nint c = getchar();\n</code></pre>\n\n<p>which results in the terminal asking for a character this way</p>\n\n<pre><code>Enter a value:\n</code></pre>\n\n<p>What i want is the program to suggest a value as if the user had typed the value but didn't press enter, like this:</p>\n\n<pre><code>Enter a value: 5\n</code></pre>\n\n<p>Then the user can press enter and <code>getchar()</code> will receive <code>5</code> or backspace the <code>5</code> and input whatever value they want</p>\n\n<p>Is this possible?</p>\n"}, {"tags": ["c", "average", "adc", "ansi-c"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1493194483, "post_id": 43628414, "comment_id": 74305523, "body": "Your equation is not correct, try with <code>ADCaverage +=  (adc_result0-ADCaverage)&#47;samples;</code>"}, {"owner": {"reputation": 15, "user_id": 5273550, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af22dd34aba249d8e13b767e5571a4d0?s=128&d=identicon&r=PG&f=1", "display_name": "Branis", "link": "https://stackoverflow.com/users/5273550/branis"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1493194755, "post_id": 43628414, "comment_id": 74305698, "body": "ty mate, it works"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493194829, "post_id": 43628414, "comment_id": 74305742, "body": "If noise is a concern, you might also want to use integers and not float."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1493194857, "post_id": 43628414, "comment_id": 74305757, "body": "Put my proposal, please mark it as correct."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1493202140, "post_id": 43628414, "comment_id": 74310848, "body": "Please note that your (incorrect) code and eyllanesc&#39;s corrected version is   for a <i>cumulative</i> moving average over all previous data points, but you probably want a <i>simple</i> moving average over the previous <i>N</i> data points for noise filtering purposes."}, {"owner": {"reputation": 15, "user_id": 5273550, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af22dd34aba249d8e13b767e5571a4d0?s=128&d=identicon&r=PG&f=1", "display_name": "Branis", "link": "https://stackoverflow.com/users/5273550/branis"}, "edited": false, "score": 0, "creation_date": 1493203944, "post_id": 43628414, "comment_id": 74312074, "body": "yes, i would like to edit it for average of last 100 data points"}], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1493195201, "last_edit_date": 1493195201, "creation_date": 1493194808, "answer_id": 43628616, "question_id": 43628414, "link": "https://stackoverflow.com/questions/43628414/floating-average-with-reading-of-adc-values/43628616#43628616", "title": "Floating average with reading of ADC values", "body": "<p>Your equation is not correct.</p>\n\n<p>Let <code>s_n = (sum_{i=0}^{n} x[i])/n</code> then:</p>\n\n<pre><code>s_(n-1) = sum_{i=0}^{n-1} x[i])/(n-1)\n\nsum_{i=0}^{n-1} x[i] = (n-1)*s_(n-1)\nsum_{i=0}^{n} x[i] = n*s_n\n\n\nsum_{i=0}^{n} x[i] = sum_{i=0}^{n-1} x[i] + x[n]\n\nn*s_n = (n-1)*s_(n-1) + x[n] =  n*s_(n-1) + (x[n]-s_(n-1))\ns_n = s_(n-1) + (x[n]-s_(n-1))/n\n</code></pre>\n\n<p>You must use </p>\n\n<pre><code>ADCaverage += (adc_result0-ADCaverage)/samples; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 823, "user_id": 1850429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aeac2c1534ffc9cd94072b3196838b9?s=128&d=identicon&r=PG", "display_name": "Jeroen3", "link": "https://stackoverflow.com/users/1850429/jeroen3"}, "is_accepted": false, "score": 0, "last_activity_date": 1493212224, "creation_date": 1493212224, "answer_id": 43635243, "question_id": 43628414, "link": "https://stackoverflow.com/questions/43628414/floating-average-with-reading-of-adc-values/43635243#43635243", "title": "Floating average with reading of ADC values", "body": "<p>You can use an exponential moving average which only needs 1 memory unit.<br>\n<code>y[0] = (x[0] + y[-1] * (a-1) )/a</code><br>\nWhere <strong>a</strong> is the filter factor.</p>\n\n<p>If <strong>a</strong> is multiples of 2 you can use shifts and optimize for speed significantly:<br>\n<code>y[0] = ( x[0] + ( ( y[-1] &lt;&lt; a ) - y[-1] ) ) &gt;&gt; a</code></p>\n\n<p>This works especially well with left aligned ADC's. Just keep an eye on the word size of the shift result.</p>\n"}], "owner": {"reputation": 15, "user_id": 5273550, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af22dd34aba249d8e13b767e5571a4d0?s=128&d=identicon&r=PG&f=1", "display_name": "Branis", "link": "https://stackoverflow.com/users/5273550/branis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1401, "favorite_count": 0, "accepted_answer_id": 43628616, "answer_count": 2, "score": 0, "last_activity_date": 1493212224, "creation_date": 1493194170, "last_edit_date": 1493194616, "question_id": 43628414, "link": "https://stackoverflow.com/questions/43628414/floating-average-with-reading-of-adc-values", "title": "Floating average with reading of ADC values", "body": "<p>I want to do moving average or something similar to that, because I am getting noisy values from ADC, this is my first try, just to compute moving average, but values goes to 0 everytime, can you help me?</p>\n\n<p>This is part of code, which makes this magic:</p>\n\n<pre><code>unsigned char buffer[5];\n    int samples = 0;\n    USART_Init0(MYUBRR);\n    uint16_t adc_result0, adc_result1;\n    float ADCaverage = 0;\n\n    while(1)\n    {\n\n        adc_result0 = adc_read(0);      // read adc value at PA0\n        samples++;\n        //adc_result1 = adc_read(1);      // read adc value at PA1\n\n        ADCaverage = (ADCaverage + adc_result0)/samples;\n\n        sprintf(buffer, \"%d\\n\", (int)ADCaverage); \n        char * p = buffer;\n        while (*p) { USART_Transmit0(*p++); }\n        _delay_ms(1000);\n    }\n    return(0);\n}\n</code></pre>\n\n<p>This result I am sending via usart to display value.</p>\n"}, {"tags": ["c", "string", "strtok"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1493193825, "post_id": 43628224, "comment_id": 74305118, "body": "Can you show us the <code>number_of_delimiters</code> function, how you call the <code>split_at</code> function and how you print the result?"}, {"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "edited": false, "score": 0, "creation_date": 1493193983, "post_id": 43628224, "comment_id": 74305214, "body": "Step through your code with a debugger to see what goes wrong. BTW: It may be a help to replace the delimiter with <code>&#39;\\0&#39;</code>  while iterating, so you can allocate space and copy out the words easily. If you you are not allowed to do this on the source (<code>const</code>?), make a copy."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1493194452, "post_id": 43628224, "comment_id": 74305492, "body": "&quot;Currently, this just returns an array of spaces.&quot; How do you check? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1493194489, "post_id": 43628224, "comment_id": 74305527, "body": "Your first while loop emulates a <code>strchr(s+a, d);</code> ,more ore less. Your second while loop effectively does a memcpy(). Plus: you need to allocate one character more than sizeofj. And: <code>for (int i = 0; i &lt; numdelim; i++){...}</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1493194795, "post_id": 43628224, "comment_id": 74305721, "body": "Where do you get the second parameter to pass to <code>print_string_array</code>? What is <code>end</code> in <code>split_at</code>? Note, all words are significant in <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. A complete program has <code>main()</code> and <code>#include</code> directives, for example."}, {"owner": {"reputation": 1, "user_id": 7830474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7f946a48faa2d071af607b96c3ba95?s=128&d=identicon&r=PG&f=1", "display_name": "B.F.", "link": "https://stackoverflow.com/users/7830474/b-f"}, "edited": false, "score": 0, "creation_date": 1493195817, "post_id": 43628224, "comment_id": 74306381, "body": "I&#39;ve edited the question to answer some of the comments. I apologize for the issues with the question itself; I&#39;ve only just begun asking questions on stack. Also, while some of my loops may be more easily done using items in the string library, we&#39;ve been instructed to keep our use of string library functions to a minimum, and to instead practice accomplishing these goals with loops."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1493196158, "post_id": 43628224, "comment_id": 74306621, "body": "<b>Are you using any #include directives?</b>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1493196695, "post_id": 43628224, "comment_id": 74307007, "body": "&quot;This currently returns {Hi, my name is none.}&quot; What do you expect it to print?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1493198883, "post_id": 43628224, "comment_id": 74308535, "body": "This is not a debugging service. Please stop presenting us a moving target to fix. I am reverting your changes to the state where answers are valid. If you have additional questions, ask them separately."}, {"owner": {"reputation": 1, "user_id": 7830474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7f946a48faa2d071af607b96c3ba95?s=128&d=identicon&r=PG&f=1", "display_name": "B.F.", "link": "https://stackoverflow.com/users/7830474/b-f"}, "edited": false, "score": 0, "creation_date": 1493199169, "post_id": 43628224, "comment_id": 74308729, "body": "Understood. Apologies."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1493199300, "post_id": 43628224, "comment_id": 74308842, "body": "This is a good time to learn some basic skills. Start yoir debugger. Trace rhe execution of the program step by step, noting the values of critical variables at each step. Find the harmful change you have intriduced."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7830474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7f946a48faa2d071af607b96c3ba95?s=128&d=identicon&r=PG&f=1", "display_name": "B.F.", "link": "https://stackoverflow.com/users/7830474/b-f"}, "edited": false, "score": 0, "creation_date": 1493198718, "post_id": 43629297, "comment_id": 74308418, "body": "The behavior you have described with subsequent delimiters is the expected one, according to the assignment (though I did not include that information). Taking into account the edits both you and n.m. suggested, and editing the print function you provided for newline characters rather than spaces, it currently prints: {Hi,  (\\n)y n (\\n)me is (\\n)non (\\n).}"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 1, "user_id": 7830474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7f946a48faa2d071af607b96c3ba95?s=128&d=identicon&r=PG&f=1", "display_name": "B.F.", "link": "https://stackoverflow.com/users/7830474/b-f"}, "edited": false, "score": 0, "creation_date": 1493199088, "post_id": 43629297, "comment_id": 74308672, "body": "@BrianFenaughty OK, then fine. However, you are doing stuff a little complicated, not profiting from the fact that c-strings are null terminated other than calculating your x. If you use pointer arithmetic, you can simplify your code quite a lot. If interested, I can show you for comparison..."}, {"owner": {"reputation": 1, "user_id": 7830474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7f946a48faa2d071af607b96c3ba95?s=128&d=identicon&r=PG&f=1", "display_name": "B.F.", "link": "https://stackoverflow.com/users/7830474/b-f"}, "edited": false, "score": 0, "creation_date": 1493199277, "post_id": 43629297, "comment_id": 74308823, "body": "That would be helpful, yes please"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 1, "user_id": 7830474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7f946a48faa2d071af607b96c3ba95?s=128&d=identicon&r=PG&f=1", "display_name": "B.F.", "link": "https://stackoverflow.com/users/7830474/b-f"}, "edited": false, "score": 0, "creation_date": 1493200387, "post_id": 43629297, "comment_id": 74309625, "body": "@BrianFenaughty OK, here it is. Just a side note: If you really want to profit from: Don&#39;t just copy and paste it to your homework! First try to fully understand it (ask further questions, if need be) - then try to re-implement it <i>yourself</i>."}, {"owner": {"reputation": 1, "user_id": 7830474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7f946a48faa2d071af607b96c3ba95?s=128&d=identicon&r=PG&f=1", "display_name": "B.F.", "link": "https://stackoverflow.com/users/7830474/b-f"}, "edited": false, "score": 1, "creation_date": 1493201521, "post_id": 43629297, "comment_id": 74310400, "body": "Thank you! For the sake of honesty, I will use my own code (now that I&#39;ve fixed it), but looking at this solution gives me a much better sense of how I should&#39;ve looked to approach this from the beginning."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 0, "last_activity_date": 1493200171, "last_edit_date": 1493200171, "creation_date": 1493196667, "answer_id": 43629297, "question_id": 43628224, "link": "https://stackoverflow.com/questions/43628224/attempting-to-split-and-store-arrays-similar-to-strtok/43629297#43629297", "title": "Attempting to split and store arrays similar to strtok", "body": "<p>Just for explanation:</p>\n\n<p><code>strtok</code> will <em>modify</em> the array you pass in! After</p>\n\n<pre><code>char test[] = \"a b c \";\nfor(char* t = test; strtok(t, \" \"); t = NULL);\n</code></pre>\n\n<p><code>test</code> content will be:</p>\n\n<pre><code>{ 'a', 0, 'b', 0, 'c', 0, 0 }\n</code></pre>\n\n<p>You get subsequently these pointers to your test array: <code>test + 0</code>, <code>test + 2</code>, <code>test + 4</code>, <code>NULL</code>.</p>\n\n<p>strtok remembers the pointer you pass to it internally (most likely, you saw a <code>static</code> variable in your source code...) so you can (and <em>must</em>) pass <code>NULL</code> the next time you call it (as long as you want to operate on the same source string).</p>\n\n<p>You, in contrast, apparently want to copy the data. Fine, one can do so. But here we get a problem:</p>\n\n<pre><code>char** final = //...\nreturn final;\n\nvoid print_string_array(char* a[], unsigned int alen)\n</code></pre>\n\n<p>You just return the array, but you are losing length information!\nHow do you want to pass the length to your print function then?</p>\n\n<pre><code>char** tokens = split_at(...);\nprint_string_array(tokens, sizeof(tokens));\n</code></pre>\n\n<p>will fail, because <code>sizeof(tokens)</code> will always return the size of a pointer on your local system (most likely 8, possibly 4 on older hardware)!</p>\n\n<p>My personal recommendation: create a null terminated array of c strings:</p>\n\n<pre><code>char** final = (char**)malloc((numdelim + 2) * sizeof(char*));\n//                                        ^ (!)\n\n// ...\n\nfinal[numdelim + 1] = NULL;\n</code></pre>\n\n<p>Then your print function could look like this:</p>\n\n<pre><code>void print_string_array(char* a[]) // no len parameter any more!\n{\n    printf(\"{\");\n    if(*a)\n    {\n        printf(\"%s\", *a);   // printing first element without space\n        for (++a; *a; ++a)  // *a: checking, if current pointer is not NULL\n        {\n            printf(\" %s\", *a); // next elements with spaces\n        }\n    }\n    printf(\"}\");\n}\n</code></pre>\n\n<p>No problems with length any more. Actually, this is exactly the same principle C strings use themselves (the terminating null character, remember?).</p>\n\n<p>Additionally, here is a problem in your own code:</p>\n\n<pre><code>while (j &lt; sizeofj)\n{\n    final[i][j] = s[b];\n    j++; // j will always point behind your string!\n    b++;\n}\n\nb++;\n// thus, you need:\nfinal[i][j] = '\\0'; // no +1 !\n</code></pre>\n\n<p>For completeness (this was discovered by n.m. already, see the other answer): If there is no trailing delimiter in your source string,</p>\n\n<pre><code>while (s[a] != d)\n</code></pre>\n\n<p>will read beyond your input string (which is undefined behaviour and could result in your program crashing). You need to check for the terminating null character, too:</p>\n\n<pre><code>while(s[a] &amp;&amp; s[a] != d)\n</code></pre>\n\n<p>Finally: how do you want to handle subsequent delimiters? Currently, you will insert empty strings into your array? Print out your strings as follows (with two delimiting symbols - I used * and + like birth and death...):</p>\n\n<pre><code>printf(\"*%s+\", *a);\n</code></pre>\n\n<p>and you will see. Is this intended?</p>\n\n<p><strong>Edit 2</strong>: The variant with pointer arithmetic (only):</p>\n\n<pre><code>char** split_at (char* s, char d)\n{\n    int numdelim = 0;\n    char* t = s; // need a copy\n    while(*t)\n    {\n        numdelim += *t == d;\n        ++t;\n    }\n\n    char** final = (char**)malloc((numdelim + 2) * sizeof(char*));\n    char** f = final; // pointer to current position within final\n\n    t = s;  // re-assign t, using s as start pointer for new strings\n    while(*t) // see above\n    {\n        if(*t == d) // delimiter found!\n        {\n            // can subtract pointers --\n            // as long as they point to the same array!!!\n            char* n = (char*)malloc(t - s + 1); // +1: terminating null\n            *f++ = n; // store in position pointer and increment it\n            while(s != t) // copy the string from start to current t\n                *n++ = *s++;\n            *n = 0; // terminate the new string\n        }\n        ++t; // next character...\n    }\n    *f = NULL; // and finally terminate the string array\n    return final;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7830474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7f946a48faa2d071af607b96c3ba95?s=128&d=identicon&r=PG&f=1", "display_name": "B.F.", "link": "https://stackoverflow.com/users/7830474/b-f"}, "edited": false, "score": 0, "creation_date": 1493198143, "post_id": 43629453, "comment_id": 74308038, "body": "I&#39;ve changed the code to reflect the first two points here. As far as the third, I&#39;m not sure if there&#39;s something I can do about that within the framework of the assignment. We are sometimes given work to practice skills which may not necessarily lead to &quot;useful&quot; programs, in some senses."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1493197012, "creation_date": 1493197012, "answer_id": 43629453, "question_id": 43628224, "link": "https://stackoverflow.com/questions/43628224/attempting-to-split-and-store-arrays-similar-to-strtok/43629453#43629453", "title": "Attempting to split and store arrays similar to strtok", "body": "<p>The program has several problems.</p>\n\n<ol>\n<li><code>while (s[a] != d)</code> is wrong, there is no delimiter after the last word in the string.</li>\n<li><code>final[i][j+1] = '\\0';</code> is wrong, <code>j+1</code> is one position too much.</li>\n<li>The returned array is unusable, unless you know beforehand how many elements are there.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7830474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7f946a48faa2d071af607b96c3ba95?s=128&d=identicon&r=PG&f=1", "display_name": "B.F.", "link": "https://stackoverflow.com/users/7830474/b-f"}, "is_accepted": false, "score": 0, "last_activity_date": 1493201308, "creation_date": 1493201308, "answer_id": 43631109, "question_id": 43628224, "link": "https://stackoverflow.com/questions/43628224/attempting-to-split-and-store-arrays-similar-to-strtok/43631109#43631109", "title": "Attempting to split and store arrays similar to strtok", "body": "<p>While I've now been shown a more elegant solution, I've found and rectified the issues in my code:</p>\n\n<pre><code>char** split_at (char* s, char d)\n{\n    int numdelim = 0;\n    int x;\n    for (x = 0; s[x] != '\\0'; x++)\n    {\n        if (s[x] == d)\n        {\n            numdelim++;\n        }\n    }\n    int a = 0;\n    int b = 0;\n    char** final = (char**)malloc((numdelim+1) * sizeof(char*));\n    for (int i = 0; i &lt;= numdelim; i++)\n    {\n        int sizeofj = 0;\n        while ((s[a] != d) &amp;&amp; (a &lt; x))\n        {\n            sizeofj++;\n            a++;\n        }\n        final[i] = (char*)malloc(sizeofj);\n        a++;\n        int j = 0;\n        while (j &lt; sizeofj)\n        {\n            final[i][j] = s[b];\n            j++;\n            b++;\n        }\n        final[i][j] = '\\0';\n        b++;\n    }\n    return final;\n}\n</code></pre>\n\n<p>I consolidated what I previously had as a helper function, and modified some points where I incorrectly incremented .</p>\n"}], "owner": {"reputation": 1, "user_id": 7830474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7f946a48faa2d071af607b96c3ba95?s=128&d=identicon&r=PG&f=1", "display_name": "B.F.", "link": "https://stackoverflow.com/users/7830474/b-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 322, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1493201308, "creation_date": 1493193587, "last_edit_date": 1493199009, "question_id": 43628224, "link": "https://stackoverflow.com/questions/43628224/attempting-to-split-and-store-arrays-similar-to-strtok", "title": "Attempting to split and store arrays similar to strtok", "body": "<p>For an assignment in class, we have been instructed to write a program which takes a string and a delimiter and then takes \"words\" and stores them in a new array of strings. i.e., the input (\"my name is\", \" \") would return an array with elements \"my\" \"name\" \"is\". </p>\n\n<p>Roughly, what I've attempted is to:</p>\n\n<ol>\n<li><p>Use a separate helper called <code>number_of_delimeters()</code> to determine the size of the array of strings</p></li>\n<li><p>Iterate through the initial array to find the number of elements in a given string which would be placed in the array</p></li>\n<li><p>Allocate storage within my array for each string</p></li>\n<li><p>Store the elements within the allocated memory</p></li>\n</ol>\n\n<p>Include directives:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n</code></pre>\n\n<p>This is the separate helper:</p>\n\n<pre><code>int number_of_delimiters (char* s, int d)\n{\n    int numdelim = 0;\n    for (int i = 0; s[i] != '\\0'; i++)\n    {\n        if (s[i] == d)\n        {\n            numdelim++;\n        }\n    }\n    return numdelim;\n}\n</code></pre>\n\n<p>`This is the function itself:</p>\n\n<pre><code>char** split_at (char* s, char d)\n{\n    int numdelim = number_of_delimiters(s, d);\n    int a = 0;\n    int b = 0;\n\n    char** final = (char**)malloc((numdelim+1) * sizeof(char*));\n\n    for (int i = 0; i &lt;= numdelim; i++)\n    {\n        int sizeofj = 0;\n        while (s[a] != d)\n        {\n            sizeofj++;\n            a++;\n        }\n\n        final[i] = (char*)malloc(sizeofj);\n        a++;\n        int j = 0;\n\n        while (j &lt; sizeofj)\n        {\n            final[i][j] = s[b];\n            j++;\n            b++;\n        }\n\n        b++;\n        final[i][j+1] = '\\0';\n    }\n    return final;\n}\n</code></pre>\n\n<p>To print:</p>\n\n<pre><code>void print_string_array(char* a[], unsigned int alen)\n{\n    printf(\"{\");\n    for (int i = 0; i &lt; alen; i++)\n    {\n        if (i == alen - 1)\n        {\n            printf(\"%s\", a[i]);\n        }\n        else\n        {\n        printf(\"%s \", a[i]);\n        }\n    }\n    printf(\"}\");\n}\n\nint main(int argc, char *argv[])\n{\n    print_string_array(split_at(\"Hi, my name is none.\", ' '), 5);\n    return 0;\n}\n</code></pre>\n\n<p>This currently returns {Hi, my name is none.}</p>\n\n<p>After doing some research, I realized that the purpose of this function is either similar or identical to strtok. However, looking at the source code for this proved to be little help because it included concepts we have not yet used in class.</p>\n\n<p>I know the question is vague, and the code rough to read, but what can you point to as immediately problematic with this approach to the problem?</p>\n"}, {"tags": ["c", "linux", "shell", "terminal"], "comments": [{"owner": {"reputation": 4783, "user_id": 948128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/788ac757a97bd1fa3ca6fd0d3eeffc1b?s=128&d=identicon&r=PG", "display_name": "piwi", "link": "https://stackoverflow.com/users/948128/piwi"}, "edited": false, "score": 1, "creation_date": 1493193602, "post_id": 43628171, "comment_id": 74304990, "body": "You should use a Makefile."}, {"owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 1, "creation_date": 1493193691, "post_id": 43628171, "comment_id": 74305039, "body": "You <i>could</i> use a Makefile. You could also use CMake, or Ninja, or bfg9000, or gyp, or..."}, {"owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "edited": false, "score": 1, "creation_date": 1493193852, "post_id": 43628171, "comment_id": 74305134, "body": "...or nothing, since there is only one file being compiled!"}], "answers": [{"tags": [], "owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "is_accepted": false, "score": 5, "last_activity_date": 1493193775, "creation_date": 1493193775, "answer_id": 43628288, "question_id": 43628171, "link": "https://stackoverflow.com/questions/43628171/script-to-compile-c-code/43628288#43628288", "title": "Script to compile C code", "body": "<p>Your error is on the first line, since you're not assigning anything to <code>a</code>:</p>\n\n<pre><code>a=$(echo \"$1\" | rev | cut -c3- | rev)\n</code></pre>\n\n<p>Would fix the problem (for well-behaved filenames, at least, since you're missing quotes further down in your script). A space after <code>a</code> means you're assigning an empty string to it and <em>then</em> running the commands in the pipeline. </p>\n\n<p>Instead of going to all the effort of reversing the twice, just remove the last two characters with <code>${1%??}</code>:</p>\n\n<pre><code>cc -o \"${1%??}\" \"$1\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 1, "last_activity_date": 1493220763, "creation_date": 1493220763, "answer_id": 43638617, "question_id": 43628171, "link": "https://stackoverflow.com/questions/43628171/script-to-compile-c-code/43638617#43638617", "title": "Script to compile C code", "body": "<p>The most common tool to do this is <code>make</code>. It reads the recipes from a file named <code>Makefile</code> in the directory it is run, and performs any tasks necessary. It is smart enough to check the file timestamps to detect if or which parts of your projects need to be re-compiled. Here is an example Makefile:\n</p>\n\n<pre><code>CC      := gcc\nCFLAGS  := -Wall -O2\nLDFLAGS := -lm\n\nPROGS   := number_input\n\n.PHONY: all clean\n\nall: $(PROGS)\n\nclean:\n    rm -f $(PROGS)\n\n$(PROGS): %: %.c\n    $(CC) $(CFLAGS) $^ $(LDFLAGS) -o $@\n</code></pre>\n\n<p>Note that indentation in a <code>Makefile</code> must use tabs, not spaces. If you copy the above, and paste to a file, you will need to run <code>sed -e 's|^  *|\\t|' -i Makefile</code> to fix the indentation.</p>\n\n<p>The first three lines name the compiler used, the compiler options, and the linking options. The <code>-lm</code> linking option is not needed for your particular use case; I just included it because you will sooner or later want to use <code>&lt;math.h&gt;</code>, and then you do need to include the <code>-lm</code> linking option.</p>\n\n<p>The <code>PROGS</code> line names your programs. You can specify more than one, just separate them by spaces.</p>\n\n<p>The <code>.PHONY:</code> line tells <code>make</code> that targets <code>all</code> and <code>clean</code> are \"phony\", that they do not generate files of that name.</p>\n\n<p>The <code>all</code> recipe, as the first recipe in a <code>Makefile</code>, is the default recipe that is followed, when you run <code>make</code>. This one tells that all programs listed in <code>PROGS</code> should be built.</p>\n\n<p>The <code>clean</code> recipe (run <code>make clean</code>) removes all temporary files and compiled files from the directory -- essentially cleaning it.</p>\n\n<p>The last recipe is a tricky one. It says that all the files listed in <code>PROGS</code> are each built from a file having the same name plus a <code>.c</code> suffix. The <code>$^</code> refers to the <code>.c</code> file name, and <code>$@</code> to the file name without the suffix.</p>\n\n<p>If this <code>Makefile</code> were used for returning exercises via email to a teacher, I'd also add a new <code>.PHONY</code> target, <code>tarball</code>:\n</p>\n\n<pre><code>CC      := gcc\nCFLAGS  := -Wall -O2\nLDFLAGS := -lm\n\nPROGS   := number_input\nTAR     := $(notdir $(CURDIR)).tar\n\n.PHONY: all clean tarball\n\nall: $(PROGS)\n\nclean:\n    rm -f $(PROGS)\n\ntarball: clean\n    rm -f ../$(TAR)\n    tar -cf ../$(TAR) $(notdir $(CURDIR))/\n\n$(PROGS): %: %.c\n    $(CC) $(CFLAGS) $^ $(LDFLAGS) -o $@\n</code></pre>\n\n<p>Running <code>make</code> will compile <code>number_input</code>, if <code>number_input.c</code> has been modified after the last time <code>number_input</code> was compiled, or if <code>number_input</code> does not exist yet.</p>\n\n<p>Running <code>make TAR=myname-ex01.tar tarball</code> removes the compiled files from the current directory, then creates a tarball of the current directory (and its subdirectories, if any) in the parent directory as <code>myname-ex01.tar</code>. If you run just <code>make tarball</code>, the tar file name will be the same as the name of the current directory, but with a <code>.tar</code> suffix.</p>\n\n<p>I hope you can see why writing a <code>Makefile</code> is so useful.</p>\n"}], "owner": {"reputation": 1, "user_id": 7383340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/072b5a595afa2c267b77469e581687ed?s=128&d=identicon&r=PG&f=1", "display_name": "guy man", "link": "https://stackoverflow.com/users/7383340/guy-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1493220763, "creation_date": 1493193423, "last_edit_date": 1493194229, "question_id": 43628171, "link": "https://stackoverflow.com/questions/43628171/script-to-compile-c-code", "title": "Script to compile C code", "body": "<p>Usually if I want to compile a C program called <code>number_input.c</code> I would type</p>\n\n<pre><code>cc -o number_input number_input.c\n</code></pre>\n\n<p>I want to use my mac terminal to make a script so that I don't have to type that extra word. Originally I did this to save myself 1 sec of programming but ironically I've spent over 2 hrs trying to get this to work.</p>\n\n<pre><code>a= echo \"$1\" | rev | cut -c3- | rev\necho $a\ncc -o $a $1\necho $1\n</code></pre>\n\n<p>This is my output:</p>\n\n<blockquote>\n  <p>number_input</p>\n  \n  <p>clang: error: no input files\n  number_input.c</p>\n</blockquote>\n\n<p>I can tell that the names are being inputted correctly but for some reason the <code>cc</code> command isn't taking in the value of <code>$1</code>? I am assuming that somehow the <code>$1</code> isn't directly converted into a string or something like that but I am not sure.</p>\n"}, {"tags": ["c", "string", "asprintf"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 6, "creation_date": 1493192043, "post_id": 43627709, "comment_id": 74304034, "body": "<code>sprintf</code> is a complex function. Some compilers allow you to specify the level of support the function has. For example, you could disable float specifiers if you never use them, and function would be a lot smaller."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1493192365, "post_id": 43627709, "comment_id": 74304232, "body": "...and: are you sure your score is 4 digits long as max?"}, {"owner": {"reputation": 13, "user_id": 2471230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/30ad3cbc30bf7f18f5767f1027cdd869?s=128&d=identicon&r=PG", "display_name": "Omar Khalik", "link": "https://stackoverflow.com/users/2471230/omar-khalik"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1493192375, "post_id": 43627709, "comment_id": 74304244, "body": "@user694733, I&#39;m not sure my compiler allows me to do that... I&#39;m running a relatively weak one"}, {"owner": {"reputation": 13, "user_id": 2471230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/30ad3cbc30bf7f18f5767f1027cdd869?s=128&d=identicon&r=PG", "display_name": "Omar Khalik", "link": "https://stackoverflow.com/users/2471230/omar-khalik"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1493192428, "post_id": 43627709, "comment_id": 74304276, "body": "@LPs The game I&#39;m making is essentially Flappy Bird. I figure nobody will score passed that"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1493192430, "post_id": 43627709, "comment_id": 74304278, "body": "If you need to show only integers, you can do it manually easily."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1493192811, "post_id": 43627709, "comment_id": 74304546, "body": "@OmarKhalik What compiler do you use? You should check the manual to be sure, if you don&#39;t want to write your own."}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1493193712, "post_id": 43628104, "comment_id": 74305052, "body": "Note: This won&#39;t work for <code>INT_MIN</code> (assuming 2&#39;s complement)."}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1493194081, "post_id": 43628104, "comment_id": 74305281, "body": "I agree. When <code>value</code> is <code>INT_MIN</code> (i.e. <code>-2147483648</code> for 32-bit <code>int</code>), <code>value = -value</code> will remain unchanged (negative) and the result is garbage. Added a simple fix."}], "tags": [], "owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": 1, "last_activity_date": 1493194213, "last_edit_date": 1493194213, "creation_date": 1493193181, "answer_id": 43628104, "question_id": 43627709, "link": "https://stackoverflow.com/questions/43627709/converting-int-to-char-in-c-when-sprintf-is-too-costly-to-use/43628104#43628104", "title": "Converting int to char* in C when sprintf is too costly to use", "body": "<p>Here is my quick implementation of <code>int</code> to <code>string</code> function:</p>\n\n<pre><code>// buf - string buffer, e.g. 16 bytes\n// len - size of buf\n// value - integer value\nchar * i2s( char * buf, int len, int value )\n{\n    char m = 0;\n\n    if ( value &lt; 0 )\n    {\n        // if ( value == -2147483648 ) return \"-2147483648\"; // fix for INT_MIN\n        value = -value;\n        m = '-'; // minus for negative values\n    }\n    buf[len - 1] = 0; // 0 for end of string\n    for ( int i = len - 2; i &gt; 0; i-- ) // loop from right (last digits) to left\n    {\n        buf[i] = '0' + ( value % 10 );\n        value /= 10;\n        if ( value == 0 )\n            break;\n    }\n    if ( m ) buf[--i] = m;\n    return buf + i;\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>char my_buf[16];\n\nchar * s = i2s( my_buf, sizeof my_buf, 10850 ); // 10850 is the int value\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 0, "last_activity_date": 1493193200, "last_edit_date": 1495542352, "creation_date": 1493193200, "answer_id": 43628110, "question_id": 43627709, "link": "https://stackoverflow.com/questions/43627709/converting-int-to-char-in-c-when-sprintf-is-too-costly-to-use/43628110#43628110", "title": "Converting int to char* in C when sprintf is too costly to use", "body": "<p>There already is a <a href=\"https://stackoverflow.com/a/3982385/646887\">general solution</a> posted.\nIn your case, where the upper and lower limits are known, you can use the following code:</p>\n\n<pre><code>void updateScore() {\n   char str[5] = \"0\";     /* Can hold up to 4 digits. */\n   int i, div = 1000; /* 10^(length of str - 2). */\n   int sc = score;\n   /* Fast-forward to the first non-zero digit */\n   while (div &gt; sc) {\n     div /= 10;\n   }\n   for (i = 0; div; i++) {\n     str[i] = \u00b40\u00b4 + sc / div;\n     sc %= div;\n     div /= 10;\n   }\n   drawString(str);\n}\n</code></pre>\n\n<p>If you want to 0-pad the score you don't need to fast-forward to the first non-zero digit:</p>\n\n<pre><code>void updateScore() {\n   char str[5] = \"0\";     /* Can hold up to 4 digits. */\n   int i, div = 1000; /* 10^(length of str - 2). */\n   int sc = score;\n   for (i = 0; div; i++) {\n     str[i] = \u00b40\u00b4 + sc / div;\n     sc %= div;\n     div /= 10;\n   }\n   drawString(str);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 0, "last_activity_date": 1493193638, "last_edit_date": 1493193638, "creation_date": 1493193297, "answer_id": 43628140, "question_id": 43627709, "link": "https://stackoverflow.com/questions/43627709/converting-int-to-char-in-c-when-sprintf-is-too-costly-to-use/43628140#43628140", "title": "Converting int to char* in C when sprintf is too costly to use", "body": "<p>You can print integers manually, like</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdbool.h&gt;\n\nvoid drawChar ( char c )\n{\n    printf(\"%c\", c);\n}\n\nvoid drawScore(uint16_t score)\n{\n    bool startFound = false;\n    uint16_t devider = 1000;\n\n    while (devider != 0)\n    {\n        uint8_t digit = (score / devider);\n\n        if (( digit == 0) &amp;&amp; (startFound == false))\n        {\n            // draw space\n            drawChar(0x20);\n        }\n        else\n        {\n            // first digit of score found\n            startFound = true;\n\n            // draw space\n            drawChar(digit+'0');\n        }\n\n        // move to the next digit\n        score -= digit * devider;\n        devider /= 10;\n    }\n}\n\nint main(void)\n{\n    drawScore(1234);\n    printf(\"\\n\");\n    drawScore(234);\n    printf(\"\\n\");\n    drawScore(34);\n    printf(\"\\n\");\n    drawScore(4);\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>OUTPUT on a linux terminal.</p>\n\n<pre><code>1234\n 234\n  34\n   4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 0, "last_activity_date": 1493194712, "last_edit_date": 1493194712, "creation_date": 1493193996, "answer_id": 43628351, "question_id": 43627709, "link": "https://stackoverflow.com/questions/43627709/converting-int-to-char-in-c-when-sprintf-is-too-costly-to-use/43628351#43628351", "title": "Converting int to char* in C when sprintf is too costly to use", "body": "<p>Five characters is a not much - to cover each value of an int, you need at least 10 digits + sign + terminating 0 character, i. e. 12. I'd create an array of size of power of two then, so 16:</p>\n\n<pre><code>char str[16];\n</code></pre>\n\n<p>Then you can encode from the backwards simply:</p>\n\n<pre><code>str[sizeof(str)] = 0;\nchar* pos = str + (sizeof(str) - 1);\nint n = score &lt; 0 ? -score : score;\ndo // do while handles n == 0 correctly!\n{\n    // possible, if all digits are placed one after another\n    // in ascending order, such as in ASCII (and those based on):\n    *--pos = '0' + n % 10;\n    // alternative, portable over all encodings:\n    //*--pos = \"0123456789\"[n % 10];\n    n /= 10;\n}\nwhile(n);\nif(score &lt; 0)\n    *--pos = '-';\n\ndrawString(pos);\n</code></pre>\n\n<p><strong>Edit</strong> (looking at the other answers (and comments) posted while writing mine):</p>\n\n<p>Above solution, too, will fail for <code>INT_MIN</code>!</p>\n\n<p>You could catch this separately (score == INT_MIN) &ndash; or simply rely on this value never being reached anyway (because not reasonable in your game).</p>\n\n<p>Additionally: my output is left-aligned! If you want right-aligned output, you'd could simply place additional spaces in a for loop:</p>\n\n<pre><code>for(char* align = str + 4; pos &gt; align;)\n    *--pos = ' ';\n</code></pre>\n\n<p>Be aware that you cannot compare arbitrary pointers with <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>! <em>Here</em>, it is possible, because both pointers point to the same array!</p>\n"}], "owner": {"reputation": 13, "user_id": 2471230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/30ad3cbc30bf7f18f5767f1027cdd869?s=128&d=identicon&r=PG", "display_name": "Omar Khalik", "link": "https://stackoverflow.com/users/2471230/omar-khalik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 1, "closed_date": 1493194701, "answer_count": 4, "score": 0, "last_activity_date": 1493194712, "creation_date": 1493191877, "last_edit_date": 1493194421, "question_id": 43627709, "link": "https://stackoverflow.com/questions/43627709/converting-int-to-char-in-c-when-sprintf-is-too-costly-to-use", "closed_reason": "Duplicate", "title": "Converting int to char* in C when sprintf is too costly to use", "body": "<p>I need to convert an <code>int</code> value to a <code>char</code> string, I used the following function where score is of type <code>int</code>.</p>\n\n<pre><code>void updateScore(){\n   char str[5] = \"0\";\n   sprintf(str, \"%d\", score);\n   drawString(str);\n}\n\nvoid drawString5x7(char *string){\n   while (*string) \n      drawChar5x7(*string++);\n}\n</code></pre>\n\n<p>This seems to work, except this snippet of code is part of a much larger system where I am coding a video game on a microcontroller (MSP430) with limited memory space available. I am able to update the score one time before my game freezes and crashes. </p>\n\n<p>For some reason, whenever I add the <code>sprintf()</code> function (or other similar functions like <code>snprintf</code>, or <code>asprintf</code>), it eats up a lot of the available memory on the MCU. </p>\n\n<p>With the <code>sprintf</code> functions it compiles at <strong>11407 bytes</strong>.\nIf I comment that single line out, my code compiles at <strong>4714 bytes</strong></p>\n\n<p>I'm not too familiar with converting <code>int</code> to <code>char</code> strings, however, I don't think it's supposed to consume that much memory. Any guidance will be much appreciated.</p>\n"}, {"tags": ["c", "linux", "unix"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1493200076, "post_id": 43627117, "comment_id": 74309390, "body": "Note also that <code>read()</code> and <code>write()</code> return <code>ssize_t</code> instead of <code>int</code>.  They are <i>not</i> the same."}, {"owner": {"reputation": 7, "user_id": 5863243, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-_SFlLBGFCBY/AAAAAAAAAAI/AAAAAAAAABE/ZS9IF6CGjWk/photo.jpg?sz=128", "display_name": "mmm", "link": "https://stackoverflow.com/users/5863243/mmm"}, "edited": false, "score": 0, "creation_date": 1493214944, "post_id": 43627117, "comment_id": 74320765, "body": "Thank you for pointing that out."}, {"owner": {"reputation": 7, "user_id": 5863243, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-_SFlLBGFCBY/AAAAAAAAAAI/AAAAAAAAABE/ZS9IF6CGjWk/photo.jpg?sz=128", "display_name": "mmm", "link": "https://stackoverflow.com/users/5863243/mmm"}, "edited": false, "score": 0, "creation_date": 1493215077, "post_id": 43627117, "comment_id": 74320864, "body": "Garg365, I will try the method you provide, I think it will work as well"}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1493200206, "post_id": 43627186, "comment_id": 74309482, "body": "Since the file is being copied and there are open file descriptors to the process, you can also use <code>fstat()</code> and <code>fchmod()</code> on the file descriptors directly."}, {"owner": {"reputation": 7, "user_id": 5863243, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-_SFlLBGFCBY/AAAAAAAAAAI/AAAAAAAAABE/ZS9IF6CGjWk/photo.jpg?sz=128", "display_name": "mmm", "link": "https://stackoverflow.com/users/5863243/mmm"}, "edited": false, "score": 0, "creation_date": 1493214918, "post_id": 43627186, "comment_id": 74320738, "body": "I believe the second solution you gave me is the best one. Thank you for helping me :). lesson learned, i never thought it was that simple."}, {"owner": {"reputation": 7, "user_id": 5863243, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-_SFlLBGFCBY/AAAAAAAAAAI/AAAAAAAAABE/ZS9IF6CGjWk/photo.jpg?sz=128", "display_name": "mmm", "link": "https://stackoverflow.com/users/5863243/mmm"}, "edited": false, "score": 0, "creation_date": 1493215171, "post_id": 43627186, "comment_id": 74320959, "body": "Andrew Henle, I will try your method and update the solution shortly. (If it works)"}], "tags": [], "owner": {"reputation": 1346, "user_id": 7917910, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75c481e1da6fee556c223936f4a23f83?s=128&d=identicon&r=PG&f=1", "display_name": "Martin B.", "link": "https://stackoverflow.com/users/7917910/martin-b"}, "is_accepted": true, "score": 6, "last_activity_date": 1493201336, "last_edit_date": 1493201336, "creation_date": 1493190206, "answer_id": 43627186, "question_id": 43627117, "link": "https://stackoverflow.com/questions/43627117/unix-copy-a-file-with-original-permission-in-c/43627186#43627186", "title": "Unix: copy a file with original permission in C", "body": "<p>You just need to read the permissions of the source file and set the same permissions on the destination file.  You can use <code>stat()</code> to read the permissions and <code>chmod()</code> to set them: </p>\n\n<pre><code>#include &lt;sys/stat.h&gt;\n\nvoid copyPermission(const char* fromFile, const char* toFile) {\n    struct stat tmp;\n    stat(fromFile, &amp;tmp);\n    chmod(toFile, tmp.st_mode);\n}\n</code></pre>\n\n<p>(N.B. error-checking omitted).</p>\n\n<p>In your <code>main</code> function at the bottom you can just simply do this:</p>\n\n<pre><code>chmod(av[2], file1.st_mode);\n</code></pre>\n\n<p>The other option is to simply create the file with the right permissions:</p>\n\n<p>Instead of:</p>\n\n<pre><code>if ( (out_fd=creat( av[2], COPYMODE)) == -1 )\n</code></pre>\n\n<p>do</p>\n\n<pre><code>if ( (out_fd=creat( av[2], file1.st_mode)) == -1 )\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 5863243, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-_SFlLBGFCBY/AAAAAAAAAAI/AAAAAAAAABE/ZS9IF6CGjWk/photo.jpg?sz=128", "display_name": "mmm", "link": "https://stackoverflow.com/users/5863243/mmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 978, "favorite_count": 0, "closed_date": 1493397160, "accepted_answer_id": 43627186, "answer_count": 1, "score": 0, "last_activity_date": 1493397145, "creation_date": 1493189966, "last_edit_date": 1493397145, "question_id": 43627117, "link": "https://stackoverflow.com/questions/43627117/unix-copy-a-file-with-original-permission-in-c", "closed_reason": "Duplicate", "title": "Unix: copy a file with original permission in C", "body": "<p>I am trying to make a copy program. It's similar to cp function in linux. I can copy a file successfully using ./copy file1 file2, but somehow the premission from the source is not copied to the destination. Does anyone know how to do this? Example and code are shown below :)</p>\n\n<p>My files and their original permission.\n<img src=\"https://i.stack.imgur.com/azmyt.jpg\" alt=\"My files and their original permission.\"></p>\n\n<p>Successfully copied the file but the permission was not copied.\n<img src=\"https://i.stack.imgur.com/yvQfL.jpg\" alt=\"Successfully copied the file but the permission was not copied.\"></p>\n\n<pre><code>#define buff_s      4096\n#define mod        0644\n\nvoid printError(char *, char *);\n\nmain(int ac, char *txts[])\n{\n    int     input, output, n_chars;\n    char    buf[buff_s];\n\n    struct stat file1;\n    struct stat file2;\n    stat(txts[1], &amp;file1);\n    stat(txts[2], &amp;file2);\n\n    if ( (input=open(txts[1], O_RDONLY)) == -1 )\n        printError(\"error\", av[1]);\n\n    if ( (output=creat( txts[2], mod)) == -1 )\n        printError( \"error\", txts[2]);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23673, "user_id": 1118321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56b8390b7457739ed8cc7cbd52bf251?s=128&d=identicon&r=PG", "display_name": "user1118321", "link": "https://stackoverflow.com/users/1118321/user1118321"}, "edited": false, "score": 2, "creation_date": 1493184003, "post_id": 43625586, "comment_id": 74299823, "body": "141.42 is the correct Euclidean distance between those points. What do you expect the distance to be?"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 3, "creation_date": 1493184101, "post_id": 43625586, "comment_id": 74299871, "body": "When you use the format <code>%1f</code>, at most one digit will be read in.  You seem to have mistyped lower-case L and used the digit 1 instead."}, {"owner": {"user_type": "does_not_exist", "display_name": "user180100"}, "edited": false, "score": 4, "creation_date": 1493184104, "post_id": 43625586, "comment_id": 74299873, "body": "The real question is why is there 4 locations in here (or why location has 4 something)"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1493184107, "post_id": 43625586, "comment_id": 74299874, "body": "What did you expect to happen?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1493185442, "post_id": 43625586, "comment_id": 74300491, "body": "Welcome to StackOverflow. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and learn <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>. If you look for help with debugging code have a look at <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>."}], "answers": [{"tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": false, "score": 2, "last_activity_date": 1493184287, "creation_date": 1493184287, "answer_id": 43625693, "question_id": 43625586, "link": "https://stackoverflow.com/questions/43625586/distance-between-a-b/43625693#43625693", "title": "Distance between A, B", "body": "<p>Do you notice the difference between your <code>scanf</code> format string on the two lines:</p>\n\n<pre><code>scanf(\"%lf %lf\",&amp;h.a,&amp;i.b);\nscanf(\"%1f %1f\",&amp;j.c,&amp;k.d);\n</code></pre>\n\n<p>That's right!  The second line uses <code>%1f</code> instead of <code>%lf</code>.  That has a completely different meaning, and in your case is wrong.  Use <code>%lf</code>.</p>\n\n<p>When you get results you don't understand, it's a great time to use a debugger, or add <code>printf</code> statements to check your variable values against what you expect them to be.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1493221296, "post_id": 43626405, "comment_id": 74325925, "body": "Could replace <code>sqrt(pow(vector.x, 2) + pow(vector.y, 2)</code> with standard function <code>hypot()</code>"}], "tags": [], "owner": {"reputation": 931, "user_id": 2394967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFaiD.png?s=128&g=1", "display_name": "sknt", "link": "https://stackoverflow.com/users/2394967/sknt"}, "is_accepted": false, "score": 0, "last_activity_date": 1493272454, "last_edit_date": 1495540956, "creation_date": 1493187483, "answer_id": 43626405, "question_id": 43625586, "link": "https://stackoverflow.com/questions/43625586/distance-between-a-b/43626405#43626405", "title": "Distance between A, B", "body": "<p>With the corrections from paddy the code should work, but I still think it's worth mentioning/correcting the smaller mistakes.</p>\n\n<p>First of all <code>void main()</code> is not defined in the standard. <a href=\"https://stackoverflow.com/questions/9857048/why-is-it-bad-to-type-void-main-in-c\">Why is it bad to type void main() in C++</a></p>\n\n<p>If you are using GCC try to compile with the <code>-Wall</code> parameter. Then you get a lot more warnings which will help you write better code in the end.</p>\n\n<p>Also why do you have 4 locations with 4 members? I refactored your code a bit and I think this version is a lot easier to read and understand.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\ntypedef struct {\n    double x;\n    double y;\n} Point;\n\ndouble DistanceBetween(Point p1, Point p2)\n{\n    Point vector = {\n        p2.x - p1.x, p2.y - p1.y\n    };\n\n    return hypot(vector.x, vector.y);\n}\n\nint main()\n{\n    Point p1;\n    Point p2;\n\n    printf(\"Enter first point: \");\n    scanf(\"%lf %lf\", &amp;p1.x, &amp;p1.y);\n\n    printf(\"Enter second point: \");\n    scanf(\"%lf %lf\", &amp;p2.x, &amp;p2.y);\n\n    double distance = DistanceBetween(p1, p2);\n    printf(\"The distance is: %lf\\r\\n\", distance);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7923206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1cb979e4da89caad3439b1f5d6b9e43?s=128&d=identicon&r=PG&f=1", "display_name": "user7923206", "link": "https://stackoverflow.com/users/7923206/user7923206"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "closed_date": 1493187524, "answer_count": 2, "score": 0, "last_activity_date": 1493272454, "creation_date": 1493183788, "last_edit_date": 1493184542, "question_id": 43625586, "link": "https://stackoverflow.com/questions/43625586/distance-between-a-b", "closed_reason": "Not suitable for this site", "title": "Distance between A, B", "body": "<p>I tried to calculate distance between 2 points, A, B. When I run the terminal window it give me a false number. Can anyone help me to change some value, or stuct or many tips.</p>\n\n<blockquote>\n  <p><strong>Example:</strong>\n  in A : -50 -50 \n  in B : 50 50\n  distance is 141.42</p>\n</blockquote>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;math.h&gt;\n\ntypedef struct{\n    double a;\n    double b;\n    double c;\n    double d;\n}location;\n\ndouble dist(location  w,location x, location y,location z)\n{\n    double l;\n    l=sqrt(pow((y.c-w.a),2)+pow((z.d-x.b),2));\n    return(l);\n}\n\nvoid main()\n{\n    location h;\n    location i;\n    location j;\n    location k;\n    printf(\"Enter 1st point(A)\\n\");\n    scanf(\"%lf %lf\",&amp;h.a,&amp;i.b);\n    printf(\"Enter 2nd point(B)\\n\");\n    scanf(\"%1f %1f\",&amp;j.c,&amp;k.d);\n    double data;\n    data = dist(h,i,j,k);\n    printf(\"%.2lf\",data);\n}\n</code></pre>\n"}, {"tags": ["c", "string", "strlen"], "comments": [{"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 1, "creation_date": 1493181501, "post_id": 43625123, "comment_id": 74298927, "body": "not luck...... so don&#39;t upvote those comments"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1493181530, "post_id": 43625123, "comment_id": 74298937, "body": "<code>char *a = calloc(5, 5)</code> corresponds to <code>char a[25] = {0};</code>."}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 1, "creation_date": 1493181644, "post_id": 43625123, "comment_id": 74298970, "body": "<code>length = %d</code> should also be <code>length = %lu</code>..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493181716, "post_id": 43625123, "comment_id": 74298987, "body": "Moving target is hard to answer.  Especially after an <a href=\"http://stackoverflow.com/a/43625150/2410359\">answer</a>. Maybe things will change again in the next five minutes."}, {"owner": {"reputation": 665, "user_id": 2279854, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ynl6G.jpg?s=128&g=1", "display_name": "Tony Lin", "link": "https://stackoverflow.com/users/2279854/tony-lin"}, "edited": false, "score": 1, "creation_date": 1493181756, "post_id": 43625123, "comment_id": 74299009, "body": "Sorry, I typed wrong. It&#39;s calloc(5,sizeof(char))"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1493181761, "post_id": 43625123, "comment_id": 74299011, "body": "Okay, <i>now</i> it&#39;s just bad luck."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493181864, "post_id": 43625123, "comment_id": 74299041, "body": "&quot;Why is strlen working fine without &#39;\\0&#39;?&quot; --&gt; What do you think is specified to happen?  Programmer broke the rules, why should the compiler create code that catches the mistake?  Welcome to the world of undefined behavior."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7171623"}, "edited": false, "score": 2, "creation_date": 1493181980, "post_id": 43625123, "comment_id": 74299080, "body": "@tonylin Never modify a question, whatever the case might be."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 1, "creation_date": 1493182016, "post_id": 43625123, "comment_id": 74299088, "body": "@l&#39;L&#39;l   Code should be <code>length = %zu</code>."}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493182255, "post_id": 43625123, "comment_id": 74299161, "body": "@chux, I&#39;m old school apparently... old compilers, old man, old format specifiers; I&#39;ll now remember what <code>%zu</code> said though :) Is there a reason for <code>%zu</code> over <code>%lu</code>? my compiler says use <code>%lu</code>, on this end."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1493182670, "post_id": 43625123, "comment_id": 74299300, "body": "If you&#39;ve got an answer and need to change the question, change the question without completely invalidating the answer \u2014 add revised code.  Since the revised code invokes undefined behaviour (causing <code>strlen()</code> to read outside the bounds of the 5-byte array allocated by <code>calloc()</code>), any result is OK \u2014 crash, 5, or any other answer, or other behaviour, at all."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1493182790, "post_id": 43625123, "comment_id": 74299344, "body": "@tonylin then please edit to fix the code in your question"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 1, "creation_date": 1493183617, "post_id": 43625123, "comment_id": 74299659, "body": "@l&#39;L&#39;l <code>%lu</code> for <code>sie_t</code> is plain wrong without a cast. For example in 64-bit Windows <code>long int</code> is still 32-bits but <code>size_t</code> 64-bits, so anything can happen."}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1493186263, "post_id": 43625123, "comment_id": 74300850, "body": "@AnttiHaapala: Interesting that the compiler suggests that: <code>format specifies type &#39;int&#39; but the argument has type &#39;unsigned long&#39;</code> <code>%d ~~ %lu</code>; good to know - thanks."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1493190585, "post_id": 43625123, "comment_id": 74303110, "body": "@l&#39;L&#39;l no, <code>%zu</code> is the correct one. <code>strlen</code> returns <code>size_t</code>. In 32 and 64-bit windows <code>%zu</code> corresponds to <code>%llu</code>"}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1493227220, "post_id": 43625123, "comment_id": 74329678, "body": "@AnttiHaapala: I&#39;m not using windows, but linux, although I presume what you mention would be relative for both?"}], "answers": [{"comments": [{"owner": {"reputation": 665, "user_id": 2279854, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ynl6G.jpg?s=128&g=1", "display_name": "Tony Lin", "link": "https://stackoverflow.com/users/2279854/tony-lin"}, "edited": false, "score": 0, "creation_date": 1493181868, "post_id": 43625150, "comment_id": 74299042, "body": "Sorry, I typed wrong. It&#39;s calloc(5,sizeof(char))"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 665, "user_id": 2279854, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ynl6G.jpg?s=128&g=1", "display_name": "Tony Lin", "link": "https://stackoverflow.com/users/2279854/tony-lin"}, "edited": false, "score": 0, "creation_date": 1493193388, "post_id": 43625150, "comment_id": 74304865, "body": "@tonylin if it&#39;s <code>calloc(5,sizeof(char))</code> then you get undefined behaviour. <code>calloc(5,sizeof(char))</code> allocated 5 bytes. It seems to work in your case because the byte immediately following the 5 allocated bytes is 0 by chance, but actually it&#39;s value is indetermined, so if you run your program on another computer or if you compile it with another compiler or maybe if you just reboot your computer it may very well not work any more."}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 3, "last_activity_date": 1493181463, "creation_date": 1493181463, "answer_id": 43625150, "question_id": 43625123, "link": "https://stackoverflow.com/questions/43625123/why-is-strlen-working-fine-without-0/43625150#43625150", "title": "Why is strlen working fine without &#39;\\0&#39;?", "body": "<p><code>calloc(5, 5)</code> allocates and zeroes 25 bytes.  You assign the first five of these, but the sixth is still <code>'\\0'</code>.</p>\n"}], "owner": {"reputation": 665, "user_id": 2279854, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ynl6G.jpg?s=128&g=1", "display_name": "Tony Lin", "link": "https://stackoverflow.com/users/2279854/tony-lin"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "closed_date": 1493190006, "accepted_answer_id": 43625150, "answer_count": 1, "score": -3, "last_activity_date": 1493183100, "creation_date": 1493181322, "last_edit_date": 1493183100, "question_id": 43625123, "link": "https://stackoverflow.com/questions/43625123/why-is-strlen-working-fine-without-0", "closed_reason": "Duplicate", "title": "Why is strlen working fine without &#39;\\0&#39;?", "body": "<p>As title, I have some question using char* in c. For example, if I write this</p>\n\n<pre><code>char *a = calloc(5, 5);\na[0] = '1';\na[1] = '1';\na[2] = '1';\na[3] = '1';\na[4] = '1';\nprintf(\"a = %s, length = %d\", a, strlen(a));\n</code></pre>\n\n<p>and the output is </p>\n\n<pre><code>a = 11111, length = 5\n</code></pre>\n\n<p>Why is strlen working fine without '\\0'? Can someone help me understand?</p>\n"}, {"tags": ["c", "sorting", "pointers", "struct", "doubly-linked-list"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1493185420, "post_id": 43624878, "comment_id": 74300481, "body": "I would start by using meaningful variable names.  And by recognising that, for example, if <code>(*node1)-&gt;prev_</code> is NULL then you are <i>absolutely not allowed</i> to access <code>(*node1)-&gt;prev_-&gt;next_</code> (hint: you <i>do</i>).  Of course, if you used a debugger, you would find exactly the line that crashes, and you wouldn&#39;t need to ask here."}, {"owner": {"reputation": 17, "user_id": 7922975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe5720ca40fc43a400bf018be553b9b0?s=128&d=identicon&r=PG&f=1", "display_name": "EthanGlory", "link": "https://stackoverflow.com/users/7922975/ethanglory"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1493187976, "post_id": 43624878, "comment_id": 74301627, "body": "Ah I forgot I made that change. I was trying to make it easier to read when I posted here. I guess it was counter intuitive. Yea I couldn&#39;t understand how to make the gdb take my program and the sample.txt file at the same time."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1493188643, "post_id": 43624878, "comment_id": 74302023, "body": "Yeah.. you need to tame your debugger.  Without it, you are essentially unable to develop software."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1493195223, "post_id": 43624878, "comment_id": 74305987, "body": "If your data isn&#39;t super-heavy, it might be easier to just sort by swapping the data rather than the pointers. That&#39;s a bit like &quot;cheating&quot;, but if it leads to simpler software with fewer bugs, that&#39;s fine. Another approach might be to gather the data into an array, sort that, then overwrite the list by iterating the array and list in parallel. That&#39;s perhaps a bit extreme, though."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1493198008, "post_id": 43624878, "comment_id": 74307938, "body": "Another option is to add a dummy head and tail node onto the list temporarily.  That way you know <i>all</i> your pointers are valid.  Then you just remove them at the end.  A further simplification is to only manage single linkage while sorting the list, and then do one final pass that sets all the <code>prev_</code> pointers."}, {"owner": {"reputation": 17, "user_id": 7922975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe5720ca40fc43a400bf018be553b9b0?s=128&d=identicon&r=PG&f=1", "display_name": "EthanGlory", "link": "https://stackoverflow.com/users/7922975/ethanglory"}, "edited": false, "score": 0, "creation_date": 1493233338, "post_id": 43624878, "comment_id": 74333289, "body": "I have done the dummy head and tail method. I also have done the swapping of the data inside the nodes which was much easier  but I would still like to know how to do this specific method. I think if I can understand this then I will have a better understanding of pointers. Thank you for taking the time to respond."}], "answers": [{"comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1493200100, "post_id": 43630398, "comment_id": 74309405, "body": "There is an additional special case: a and b can be adjacent; (a-&gt;next == b;  b-&gt;prev ==a;)"}, {"owner": {"reputation": 17, "user_id": 7922975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe5720ca40fc43a400bf018be553b9b0?s=128&d=identicon&r=PG&f=1", "display_name": "EthanGlory", "link": "https://stackoverflow.com/users/7922975/ethanglory"}, "edited": false, "score": 0, "creation_date": 1493232756, "post_id": 43630398, "comment_id": 74332932, "body": "would you be able to explain the sanity test you are using? I a new to pointers/doubly linked list and haven&#39;t seen that syntax. Is it something similar to a ternary operator that I just have to look up? Thank you for the help"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1493250145, "post_id": 43630398, "comment_id": 74340909, "body": "@wildplasser I mentioned that there are special cases (two actually) where the nodes are adjacent.  In that case, half of the pointer assignments are redundant but no harm is done because these pointers are first saved on the stack."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 17, "user_id": 7922975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe5720ca40fc43a400bf018be553b9b0?s=128&d=identicon&r=PG&f=1", "display_name": "EthanGlory", "link": "https://stackoverflow.com/users/7922975/ethanglory"}, "edited": false, "score": 0, "creation_date": 1493250269, "post_id": 43630398, "comment_id": 74340952, "body": "@EthanGlory You don&#39;t need the ternary operator.  I&#39;m just doing a unary pointer test.  The statement <code>if (a_prev)</code> is a <i>non-zero = truth</i> case and is specially allowed by the C standard to be equivalent to <code>if (a_prev != NULL)</code>."}, {"owner": {"reputation": 17, "user_id": 7922975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe5720ca40fc43a400bf018be553b9b0?s=128&d=identicon&r=PG&f=1", "display_name": "EthanGlory", "link": "https://stackoverflow.com/users/7922975/ethanglory"}, "edited": false, "score": 0, "creation_date": 1493251296, "post_id": 43630398, "comment_id": 74341216, "body": "@paddy what is the other special case. I assumed windplasser answer correct. If they are neighbors that mean that the <code>a-&gt;next == b &amp;&amp; a ==b-&gt;prev</code> which would mean when I save the initial pointers a_next I can&#39;t use it the same way I would if they were separated one node between them. This is the problem I think I have since if I just make <code>a-&gt;next = b-&gt;next;</code>. I would be essentially making <code>a_node-&gt;next</code> point right back to <code>a_node</code> or is this completely wrong?"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1493255346, "post_id": 43630398, "comment_id": 74342197, "body": "Ahh yes you&#39;re right.  My mistake for answering too quickly without spending enough thought on it.  I&#39;ve updated my answer with a breakdown of the special cases."}], "tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": true, "score": 1, "last_activity_date": 1493255324, "last_edit_date": 1493255324, "creation_date": 1493199448, "answer_id": 43630398, "question_id": 43624878, "link": "https://stackoverflow.com/questions/43624878/doubly-linked-list-sorting-function-in-c/43630398#43630398", "title": "Doubly Linked List sorting function in C", "body": "<p>There are 8 pointers to modify when you swap two nodes in a double linked list.  See the 8 arrows in the diagram below.</p>\n\n<pre><code>+---+    +---+    +---+        +---+    +---+    +---+\n|   |---&gt;| A |---&gt;|   | ...... |   |---&gt;| B |---&gt;|   |\n|   |&lt;---|   |&lt;---|   | ...... |   |&lt;---|   |&lt;---|   |\n+---+    +---+    +---+        +---+    +---+    +---+\n</code></pre>\n\n<p>Now, either of A or B could possibly be at the beginning or end of the list.  They could also be right next to each other (a special case we will address in a bit).</p>\n\n<p>The simplest thing to do here is to first store pointers to those four unlabeled nodes.  This is <em>all</em> the information you will need:</p>\n\n<pre><code>struct node *a_prev = a-&gt;prev;\nstruct node *a_next = a-&gt;next;\nstruct node *b_prev = b-&gt;prev;\nstruct node *b_next = b-&gt;next;\n</code></pre>\n\n<p>Now, since any of those pointers can be NULL, you simply do a sanity test before acting on them:</p>\n\n<pre><code>if (a_prev) a_prev-&gt;next = b;  //(1)\nif (a_next) a_next-&gt;prev = b;  //(2)\nif (b_prev) b_prev-&gt;next = a;  //(3)\nif (b_next) b_next-&gt;prev = a;  //(4)\n</code></pre>\n\n<p>And then you can update the links from the actual nodes:</p>\n\n<pre><code>a-&gt;prev = b_prev;  //(5)\na-&gt;next = b_next;  //(6)\nb-&gt;prev = a_prev;  //(7)\nb-&gt;next = a_next;  //(8)\n</code></pre>\n\n<hr>\n\n<p>Now, what about that special case?  There are two versions:</p>\n\n<pre><code>a_prev   b_prev   a_next   b_next\n+---+    +---+    +---+    +---+\n|   |---&gt;| A |---&gt;| B |---&gt;|   |\n|   |&lt;---|   |&lt;---|   |&lt;---|   |\n+---+    +---+    +---+    +---+\n\nb_prev   a_prev   b_next   a_next\n+---+    +---+    +---+    +---+\n|   |---&gt;| B |---&gt;| A |---&gt;|   |\n|   |&lt;---|   |&lt;---|   |&lt;---|   |\n+---+    +---+    +---+    +---+\n</code></pre>\n\n<p>Let's take the first one.  What lines of code will break the structure of the list?  You can see that since <code>b_prev == a</code> and <code>a_next == b</code>, the following:</p>\n\n<pre><code>if (a_prev) a_prev-&gt;next = b;  //(1) OK\nif (a_next) a_next-&gt;prev = b;  //(2) ERROR b-&gt;prev = b \nif (b_prev) b_prev-&gt;next = a;  //(3) ERROR a-&gt;next = a\nif (b_next) b_next-&gt;prev = a;  //(4) OK\na-&gt;prev = b_prev;  //(5) ERROR a-&gt;prev = a\na-&gt;next = b_next;  //(6) OK and fixes 3\nb-&gt;prev = a_prev;  //(7) OK and fixes 2\nb-&gt;next = a_next;  //(8) ERROR b-&gt;next = b\n</code></pre>\n\n<p>So there are two statements (5 and 8) which break.  First, what <em>should</em> they be?</p>\n\n<pre><code>a-&gt;prev = b;\nb-&gt;prev = a;\n</code></pre>\n\n<p>You can also see that if A and B are reversed (the second case) then the opposite problem occurs (5 and 8 will break; 6 and 7 will fix 1 and 4; 2 and 3 will be okay).</p>\n\n<p>If you want compactness, you can extend these four last statements with the ternary operator.  It might mess with your head a bit though:</p>\n\n<pre><code>a-&gt;prev = (b_prev == a ? b : b_prev);  //(5)\na-&gt;next = (b_next == a ? b : b_next);  //(6)\nb-&gt;prev = (a_prev == b ? a : a_prev);  //(7)\nb-&gt;next = (a_next == b ? a : a_next);  //(8)\n</code></pre>\n\n<p>To squeeze out the last of the branching, you could rearrange these four statements without the ternary operator (since half the tests are redundant).  Alternatively you could rewrite the statements to use two tests (instead of the four I wrote for symmetry) and rely on the compiler for optimization.</p>\n\n<p>I might not bother, but you could also expand the whole thing:</p>\n\n<pre><code>if (a_next == b)\n{\n    a-&gt;prev = b;       //(5)\n    a-&gt;next = b_next;  //(6)\n    b-&gt;prev = a_prev;  //(7)\n    b-&gt;next = a;       //(8)\n}\nelse if (b_next == a)\n{\n    a-&gt;prev = b_prev;  //(5)\n    a-&gt;next = b;       //(6)\n    b-&gt;prev = a;       //(7)\n    b-&gt;next = a_next;  //(8)\n}\nelse\n{\n    a-&gt;prev = b_prev;  //(5)\n    a-&gt;next = b_next;  //(6)\n    b-&gt;prev = a_prev;  //(7)\n    b-&gt;next = a_next;  //(8)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158, "user_id": 7511215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c7b6cc0d229ea65e18e86a77080ebe?s=128&d=identicon&r=PG&f=1", "display_name": "anil", "link": "https://stackoverflow.com/users/7511215/anil"}, "is_accepted": false, "score": 0, "last_activity_date": 1493209621, "creation_date": 1493209621, "answer_id": 43634206, "question_id": 43624878, "link": "https://stackoverflow.com/questions/43624878/doubly-linked-list-sorting-function-in-c/43634206#43634206", "title": "Doubly Linked List sorting function in C", "body": "<p>The problem in your swap() is x4 and y4 , both has NULL value and you are trying to de-reference both pointers, which leads to segmentation fault.</p>\n"}], "owner": {"reputation": 17, "user_id": 7922975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe5720ca40fc43a400bf018be553b9b0?s=128&d=identicon&r=PG&f=1", "display_name": "EthanGlory", "link": "https://stackoverflow.com/users/7922975/ethanglory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 43630398, "answer_count": 2, "score": 1, "last_activity_date": 1493255324, "creation_date": 1493179799, "last_edit_date": 1493232599, "question_id": 43624878, "link": "https://stackoverflow.com/questions/43624878/doubly-linked-list-sorting-function-in-c", "title": "Doubly Linked List sorting function in C", "body": "<p>I am using a bubble sort to change the nodes positions. I understand there are a few situations to be aware of if node 1 is at the beginning of the list. If node 2 is at the end of the list. If node1 is at the beginning and node2 is at the end. So I believe the issue is when I am swapping nodes that are neighbors as in node1->next_ = node2; because if I do my regular swap i end up with node2->next_ = node2. </p>\n\n<p>I would like to know if I am on track because I tried something similar to what I wrote and ended up infinitely loop. I think there is something I am not understanding like I am losing a pointer somewhere.</p>\n\n<p>I believe this is correct except for the case of if the 2 nodes are neighbors in the linked list. </p>\n\n<p>edit clarified naming of links. reverted to original. </p>\n\n<pre><code>void swap(struct student_record_node** node1, struct student_record_node** node2)\n{\n\n  struct student_record_node *p1, *x1, *n1, *p2,*x2,*n2, *temp;\n\n  p1 = (*node1)-&gt;prev_;\n  x1 = *node1;\n  n1 = (*node1)-&gt;next_;\n\n  p2 = (*node2)-&gt;prev_;\n  x2 = *node2;\n  n2 = (*node2)-&gt;next_;\n\n  /* swap next_  */\n\n  if (p1 == NULL &amp;&amp; n2 == NULL)\n  {\n\n\n\n  /* step one swap nodes */\n    temp = *node1;\n    *node1 = *node2;\n    *node2 = temp; \n    /* step two swap node1 prev to be node2 prev */\n    (*node2)-&gt;prev_ = NULL;\n    /* step three swap node1 next to be node 2 next */\n    (*node2)-&gt;next_ = n1;\n    /* step four swap node1 next prev to be node2 next prev */\n    (*node2)-&gt;next_-&gt;prev_ = x2;\n\n    /* step 5 swap node2 next to be node1 next */\n    (*node1)-&gt;next_ = NULL;\n    /* step 6 swap node2 prev to be node1 prev */\n    (*node1)-&gt;prev_ = n2;\n    /* step 7 swap node2 prev next to be node1 prev next */\n    (*node1)-&gt;prev_-&gt;next_ = x1;\n\n\n  }\n  else if (p1 == NULL)\n  {\n   /* step one swap nodes */\n    temp = *node1;\n    *node1 = *node2;\n    *node2 = temp; \n     /* step two swap node1 prev to be node2 prev */\n    (*node2)-&gt;prev_ = NULL;\n    /* step three swap node1 next to be node 2 next */\n    (*node2)-&gt;next_ = n1;\n    /* step four swap node1 next prev to be node2 next prev */\n    (*node2)-&gt;next_-&gt;prev_ = x2;\n\n    /* step 5 swap node2 next to be node1 next */\n    (*node1)-&gt;next_ = n2;\n    /* step 6 swap node2 prev to be node1 prev */\n    (*node1)-&gt;prev_ = p2;\n    /* step 7 swap node2 prev next to be node1 prev next */\n    (*node1)-&gt;prev_-&gt;next_ = x1;\n    /* step 8 swap node2 next prev to be node1 next prev */\n    (*node1)-&gt;next_-&gt;prev_ = x1;\n\n\n\n  }\n  else if(n2 == NULL)\n  {\n     /* step one swap nodes */\n    temp = *node1;\n    *node1 = *node2;\n    *node2 = temp; \n     /* step two swap node1 prev to be node2 prev */\n    (*node2)-&gt;prev_ = p1;\n    /* step three swap node1 next to be node 2 next */\n    (*node2)-&gt;next_ = n1;\n    /* step four swap node1 next prev to be node2 next prev */\n    (*node2)-&gt;next_-&gt;prev_ = x2;\n        /* step 5 node1 prev next swapped with node2 prev next */\n    (*node2)-&gt;prev_-&gt;next_ = x2;\n\n\n    /* step 6 swap node2 next to be node1 next */\n    (*node1)-&gt;next_ = NULL;\n    /* step 7 swap node2 prev to be node1 prev */\n    (*node1)-&gt;prev_ = p2;\n    /* step 8 swap node2 prev next to be node1 prev next */\n    (*node1)-&gt;prev_-&gt;next_ = x1;\n\n\n  }\n  else\n  {\n       /* step one swap nodes */\n    temp = *node1;\n    *node1 = *node2;\n    *node2 = temp; \n     /* step two swap node1 prev to be node2 prev */\n    (*node2)-&gt;prev_ = p1;\n    /* step three swap node1 next to be node 2 next */\n    (*node2)-&gt;next_ = n1;\n    /* step four swap node1 next prev to be node2 next prev */\n    (*node2)-&gt;next_-&gt;prev_ = x2;\n        /* step 5 node1 prev next swapped with node2 prev next */\n    (*node2)-&gt;prev_-&gt;next_ = x2;\n\n\n    /* step 6 swap node2 next to be node1 next */\n    (*node1)-&gt;next_ = n2;\n    /* step 7 swap node2 prev to be node1 prev */\n    (*node1)-&gt;prev_ = p2;\n    /* step 8 swap node2 prev next to be node1 prev next */\n    (*node1)-&gt;prev_-&gt;next_ = x1;\n    /* step 9 swap node2 next prev to be node1 next prev */\n    (*node1)-&gt;next_-&gt;prev_ = x1;\n\n\n  }\n  /* swap surrounding */\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 5, "creation_date": 1493178384, "post_id": 43624641, "comment_id": 74298040, "body": "<code>&amp;(Finish_times)</code> --&gt; <code>&amp;Finish_times[i]</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1493178606, "post_id": 43624641, "comment_id": 74298091, "body": "<code>Finish_times[i] &lt; Worst_time</code> ??"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493178682, "post_id": 43624641, "comment_id": 74298121, "body": "<code>1000</code> --&gt; <code>1000.</code> , <code>3600</code> --&gt; <code>3600.</code>"}], "answers": [{"tags": [], "owner": {"reputation": 158, "user_id": 7511215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c7b6cc0d229ea65e18e86a77080ebe?s=128&d=identicon&r=PG&f=1", "display_name": "anil", "link": "https://stackoverflow.com/users/7511215/anil"}, "is_accepted": false, "score": 0, "last_activity_date": 1493181921, "creation_date": 1493181921, "answer_id": 43625243, "question_id": 43624641, "link": "https://stackoverflow.com/questions/43624641/format-f-expects-argument-of-type-float-but-argument-2-has-type-float/43625243#43625243", "title": "format \u2018%f\u2019 expects argument of type \u2018float*\u2019, but argument 2 has type \u2018float (*)[(((sizetype)", "body": "<p>First of all, you should create array using dynamic memory allocation i.e. using <code>malloc()</code> or <code>calloc()</code> functions  Or you should define array elements at compile time i.e. while writing the code, decide array size. \nSecond thing, while reading into a array you should use subscript operator ( [ ] ) with array name like this:</p>\n\n<pre><code>scanf (\"%f\", &amp;Finish_times[i])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1493195667, "creation_date": 1493195667, "answer_id": 43628916, "question_id": 43624641, "link": "https://stackoverflow.com/questions/43624641/format-f-expects-argument-of-type-float-but-argument-2-has-type-float/43628916#43628916", "title": "format \u2018%f\u2019 expects argument of type \u2018float*\u2019, but argument 2 has type \u2018float (*)[(((sizetype)", "body": "<p>This:</p>\n\n<pre><code>scanf (\"%f\", &amp;(Finish_times));\n</code></pre>\n\n<p>is wrong, it passes the address of the entire array each time. Instead, what you meant was \"scan this into the <code>i</code>:th element\", so you need to provide the address to the i:th element:</p>\n\n<pre><code>scanf (\"%f\", &amp;Finish_times[i]);\n</code></pre>\n\n<p>Also, please note that if you're going to loop over <code>n</code> numbers to compute the min and the average, you generally don't need to store the numbers themselves. Just keep a running min and a running sum, and divide the latter by <code>n</code> once you're done. Much simpler.</p>\n"}], "owner": {"reputation": 9, "user_id": 7922913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bdad6941a26ef217eb604f3ea1ded4?s=128&d=identicon&r=PG&f=1", "display_name": "Majeet", "link": "https://stackoverflow.com/users/7922913/majeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 553, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495449161, "creation_date": 1493178284, "last_edit_date": 1495449161, "question_id": 43624641, "link": "https://stackoverflow.com/questions/43624641/format-f-expects-argument-of-type-float-but-argument-2-has-type-float", "title": "format \u2018%f\u2019 expects argument of type \u2018float*\u2019, but argument 2 has type \u2018float (*)[(((sizetype)", "body": "<p>im so confused, i know this program is not right at all, but don't know hot to fix it..</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n\n  int main ()\n {\n    int distance;\n    float avg_speed;\n\n    printf (\"Enter the race distance (m): \");\n    scanf (\"%d\", &amp;distance);\n\n    int Num_lanes;\n\n    printf (\"Enter number of lanes in use:\");\n    scanf (\"%d\", &amp;Num_lanes);\n\n    float Finish_times[Num_lanes];\n\n    int i;\n    for (i = 0; i &lt; Num_lanes; i++)\n    {\n    printf (\"Enter finish time for lane %d (sec): \", i + 1);\n    scanf (\"%f\", &amp;(Finish_times));\n    }\n\n    int Worst_time = 0;\n    for (i = 0; i &lt; Num_lanes; i++)\n    {\n    if (Finish_times[i] &lt; Worst_time)\n    {\n     Worst_time = Finish_times[i];\n     }\n     }\n\n     avg_speed = (distance / 1000) / (Worst_time / 3600);\n\n     printf (\"Lane wins in %d seconds, with an average speed of %f km/h\",\n     Worst_time, avg_speed);\n\n     return 0\n     }\n</code></pre>\n\n<p>if anyone could please guide me a little on some mistakes so i can improve, i will be thankful </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 2, "creation_date": 1493178379, "post_id": 43624629, "comment_id": 74298037, "body": "This looks more like C than C++.  Please remove tag <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> and add tag <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a>."}, {"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1493183749, "post_id": 43624629, "comment_id": 74299715, "body": "Looks like you are missing some use case."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1493184679, "post_id": 43624629, "comment_id": 74300162, "body": "Your manual number conversion doesn&#39;t handle negatives.  Why don&#39;t you use <code>atoi</code>?  And use <code>tolower</code> instead of that wild lowercase conversion you&#39;re doing."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 1, "creation_date": 1493184745, "post_id": 43624629, "comment_id": 74300194, "body": "You are printing the number without a trailing newline.  I don&#39;t know what the online judge is looking for but I would expect a trailing newline."}, {"owner": {"reputation": 3197, "user_id": 5853530, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3b9567983f2e1d6c2315fa26202accb6?s=128&d=identicon&r=PG&f=1", "display_name": "Rajeev Singh", "link": "https://stackoverflow.com/users/5853530/rajeev-singh"}, "edited": false, "score": 0, "creation_date": 1493185825, "post_id": 43624629, "comment_id": 74300664, "body": "what if the input is like <code>1ABSGDV</code>, you end up converting it to number !!"}], "owner": {"reputation": 3, "user_id": 7743592, "user_type": "registered", "profile_image": "https://graph.facebook.com/1217041278411552/picture?type=large", "display_name": "Heggman", "link": "https://stackoverflow.com/users/7743592/heggman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496132346, "creation_date": 1493178214, "last_edit_date": 1496132346, "question_id": 43624629, "link": "https://stackoverflow.com/questions/43624629/count-the-amount-of-times-specified-numbers-or-words-are-entered", "title": "Count the amount of times specified numbers or words are entered", "body": "<p>So an assignment says I'm supposed to write a program to print the total amount of times either a number below 18, excluding 16, is entered OR one of these words: <strong>ABSINTH, BEER, BRANDY, CHAMPAGNE, GIN, RUM, SAKE, TEQUILA, VODKA, WHISKEY, WINE</strong>.</p>\n\n<p>For example: Input:</p>\n\n<pre><code>7               //specify the number of inputs\n18\nVodka\n16\nCoke\n19\n17\nGin\n</code></pre>\n\n<p>Output: <code>3</code></p>\n\n<h3>Here's my code</h3>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar *p (char str[]){\n    int i=0;\n    while (str[i]){\n        str[i]=tolower(str[i]);\n        i++;\n    }\n  return str;\n}\nbool check(char a[]){\n    int i=0;\n    while (a[i]){\n        if (!isdigit(a[i]))\n            return false;\n        i++;    \n    }\n    return true;\n}\nint main (){\n    int n,t;\n    int s=0;\n    char a[20];\n    #ifndef ONLINE_JUDGE\n        freopen (\"input.txt\",\"r\",stdin);\n    #endif\n    scanf (\"%d\\n\",&amp;n);\n    for (int i=0;i&lt;n;i++){\n        t=0;\n        gets (a);\n        if (check(a)){\n            t = atoi (a);\n            if (t&lt;18&amp;&amp;t!=16)\n                s++;\n        }\n        else if (!strcmp(p(a),\"absinth\")||!strcmp(p(a),\"beer\")||!strcmp(p(a),\"brandy\")||!strcmp(p(a),\"champagne\")||!strcmp(p(a),\"gin\")||!strcmp(p(a),\"rum\")||!strcmp(p(a),\"sake\")||!strcmp(p(a),\"tequila\")||!strcmp(p(a),\"vodka\")||!strcmp(p(a),\"whiskey\")||!strcmp(p(a),\"wine\"))\n            s++;\n    }\n    printf (\"%d\",s);\n    return 0;\n}\n</code></pre>\n\n<p>Output is just as the assignment wants but somehow the online judge keeps telling me the code is incorrect. Can someone please tell me where I may have been wrong?</p>\n"}, {"tags": ["c", "assembly", "shellcode"], "comments": [{"owner": {"reputation": 6606, "user_id": 4135670, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mArsS.jpg?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/4135670/rafael"}, "edited": false, "score": 0, "creation_date": 1493176769, "post_id": 43624389, "comment_id": 74297599, "body": "there won&#39;t be much difference if you wrote good code, and followed the abi. You probably overlooked something"}, {"owner": {"reputation": 3981, "user_id": 1021959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PaP06.png?s=128&g=1", "display_name": "Bernard", "link": "https://stackoverflow.com/users/1021959/bernard"}, "edited": false, "score": 0, "creation_date": 1493176901, "post_id": 43624389, "comment_id": 74297646, "body": "Maybe there was existing data in the registers that wasn&#39;t cleared properly, or your code messed up some of the callee-saved registers?"}, {"owner": {"reputation": 690, "user_id": 2438391, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EMZ2X.jpg?s=128&g=1", "display_name": "InfinitelyManic", "link": "https://stackoverflow.com/users/2438391/infinitelymanic"}, "edited": false, "score": 0, "creation_date": 1493181149, "post_id": 43624389, "comment_id": 74298804, "body": "Please see screenshot <a href=\"https://plus.google.com/u/0/115019598668825244997/posts/QvbMtC4Vtqj\" rel=\"nofollow noreferrer\">plus.google.com/u/0/115019598668825244997/posts/QvbMtC4Vtqj</a> illustrating an objdump of the x86-64 Assembly code in question, on the left, and gdb running shellcode with a break point at *&amp;code, on the right. If you look around &quot;movabs rbx,0x68732f2f6e69622f&quot; , you&#39;ll see the encoded shellcode down to the &quot;syscall&quot;.  I would expect significant diffs elsewhere. Your x86-64 is using _start vs main in the C prog, among things."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 7839182, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/844026d8385b81af3e9592933401d044?s=128&d=identicon&r=PG&f=1", "display_name": "adam", "link": "https://stackoverflow.com/users/7839182/adam"}, "edited": false, "score": 1, "creation_date": 1493237978, "post_id": 43633857, "comment_id": 74335908, "body": "Thank you for your answer, Valy, the referenced article from Dhaval Kapil was indeed very enlightening."}, {"owner": {"reputation": 543, "user_id": 3587570, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001071662888/picture?type=large", "display_name": "Valy", "link": "https://stackoverflow.com/users/3587570/valy"}, "reply_to_user": {"reputation": 129, "user_id": 7839182, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/844026d8385b81af3e9592933401d044?s=128&d=identicon&r=PG&f=1", "display_name": "adam", "link": "https://stackoverflow.com/users/7839182/adam"}, "edited": false, "score": 0, "creation_date": 1493285063, "post_id": 43633857, "comment_id": 74354812, "body": "You&#39;re welcome! Basically, the <code>shellcode.c</code> program is only used so that you can test a shellcode which later on you would use in an exploit."}], "tags": [], "owner": {"reputation": 543, "user_id": 3587570, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001071662888/picture?type=large", "display_name": "Valy", "link": "https://stackoverflow.com/users/3587570/valy"}, "is_accepted": true, "score": 2, "last_activity_date": 1493208704, "creation_date": 1493208704, "answer_id": 43633857, "question_id": 43624389, "link": "https://stackoverflow.com/questions/43624389/difference-between-running-an-assembly-program-and-running-the-disassembled-code/43633857#43633857", "title": "Difference between running an assembly program and running the disassembled code in shellcode.c", "body": "<p>There is no theoretical difference between the two methods. In both you end up executing a bunch of assembly instructions on the processor.</p>\n\n<p>The <code>shellcode.c</code> program is there to just demonstrate what would happen if you run the assembly defined as an array of bytes in the <code>unsigned char code[]</code> variable.</p>\n\n<blockquote>\n  <p>Why use one method over the other?</p>\n</blockquote>\n\n<p>I think you don't understand the purpose of shellcodes and the reasoning behind the <code>shellcode.c</code> program (why it shows what happens when an arbitrary sequence of bytes <strong>you have control on</strong> is executed on the processor).</p>\n\n<p>A shellcode is a small piece of assembly code that is used to exploit a software vulnerability. An attacker usually injects a shellcode into software by taking advantage of common programming errors such as <a href=\"https://en.wikipedia.org/wiki/Buffer_overflow\" rel=\"nofollow noreferrer\">buffer overflows</a> and then tries to make the software execute that injected shellcode.</p>\n\n<p>A good article showing a step-by-step tutorial on how to generate a shell by performing shellcode injection using buffer overflows can be found <a href=\"https://dhavalkapil.com/blogs/Shellcode-Injection/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Here is how a classic shellcode <code>\\x83\\xec\\x48\\x31\\xc0\\x31\\xd2\\x50\\x68\\x2f\\x2f\\x73\\x68\\x68\\x2f\\x62\\x69\\x6e\\x89\\xe3\\x50\\x53\\x89\\xe1\\xb0\\x0b\\xcd\\x80</code> looks like in assembler:</p>\n\n<pre><code>sub esp, 72\nxor eax, eax\nxor edx, edx\npush eax\npush 0x68732f2f    ; \"hs//\" (/ is doubled because you need to push 4 bytes on the stack)\npush 0x6e69622f    ; \"nib/\"\nmov ebx, esp       ; EBX = address of string \"/bin//sh\"\npush eax\npush ebx\nmov ecx, esp\nmov al, 0xb        ; EAX = 11 (which is the ID of the sys_execve Linux system call)\nint 0x80\n</code></pre>\n\n<p>In an x86 environment, this does an <code>execve</code> system call with the \"/bin/sh\" string as parameter.</p>\n"}], "owner": {"reputation": 129, "user_id": 7839182, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/844026d8385b81af3e9592933401d044?s=128&d=identicon&r=PG&f=1", "display_name": "adam", "link": "https://stackoverflow.com/users/7839182/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 722, "favorite_count": 0, "accepted_answer_id": 43633857, "answer_count": 1, "score": 0, "last_activity_date": 1493208704, "creation_date": 1493176586, "last_edit_date": 1495541435, "question_id": 43624389, "link": "https://stackoverflow.com/questions/43624389/difference-between-running-an-assembly-program-and-running-the-disassembled-code", "title": "Difference between running an assembly program and running the disassembled code in shellcode.c", "body": "<p>I am currently working on 'Pentester Academy's x86_64 Assembly Language and Shellcoding on Linux' course (www.pentesteracademy.com/course?id=7). I have one simple question that I can't quite figure out: what is the exact difference between running an assembly program that has been assembled and linked with <code>NASM</code> and <code>ld</code> vs. running the same disassembled program in the classic <code>shellcode.c</code> program (written below). Why use one method over the other?</p>\n\n<p>As an example, when following the first method, I use the commands :</p>\n\n<pre><code>nasm -f elf64 -o execve_stack.o execve_stack.asm\nld -o execve_stack execve_stack.o\n./execve_stack\n</code></pre>\n\n<p>When using the second method, I insert the disassembled shellcode in the <code>shellcode.c</code> program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nunsigned char code[] = \\\n\"\\x48\\x31\\xc0\\x50\\x48\\x89\\xe2\\x48\\xbb\\x2f\\x62\\x69\\x6e\\x2f\\x2f\\x73\\x68\\x53\\x48\\x89\\xe7\\x50\\x57\\x48\\x89\\xe6\\xb0\\x3b\\x0f\\x05\";\n\nint main(void) {\n\n    printf(\"Shellcode length: %d\\n\", (int)strlen(code));\n    int (*ret)() = (int(*)())code;\n    ret();\n\n    return 0;\n}\n</code></pre>\n\n<p>... and use the commands:</p>\n\n<pre><code>gcc -fno-stack-protector -z execstack -o shellcode shellcode.c\n./shellcode\n</code></pre>\n\n<p>I have analyzed both programs in GDB and found that addresses stored in certain registers differ. I have also read the answer to the following question (<a href=\"https://stackoverflow.com/questions/17636540/c-code-explanation\">C code explanation</a>), which helped me understand the way the shellcode.c program works. Having said that, I still don't fully understand the exact way in which these two methods differ.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493177234, "post_id": 43624388, "comment_id": 74297746, "body": "If <code>s.x == 0</code> and <code>s.y==0</code>, is the transform correct?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1493177235, "post_id": 43624388, "comment_id": 74297747, "body": "Welcome to Stack Overflow. Please read the <a href=\"https://stackoverflow.com/tour\">About</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> pages soon, but even more importantly, please read about how to create an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>). You need to identify a whole lot of what you&#39;ve got and what you&#39;re up to.  What is <code>s</code>; what are <code>x1</code>, <code>y1</code>, \u2026 What is the type of all the variables?  What is an example input that gives bad output, and what is the actual and expected output?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1493177440, "post_id": 43624388, "comment_id": 74297789, "body": "Have you not heard of &#39;functions&#39;?   They&#39;re useful for avoiding repetition.  Why aren&#39;t the vertices of the triangle in the same structure type as the rotation point?  It would make it a whole heap easier to write sensible functions: <code>new_p1 = rotate(old_p1, s, radians);</code> to rotate old point <code>old_p1</code> about centre <code>s</code> by angle <code>radians</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493178019, "post_id": 43624388, "comment_id": 74297946, "body": "Given <a href=\"https://en.wikipedia.org/wiki/Rotation_(mathematics)#Two_dimensions\" rel=\"nofollow noreferrer\">2d</a>, I&#39;d expect <code>x1r = ((x1 - s.x) * cos(radians)) - ((y1 - s.y) * sin(radians)) + s.x; y1r = ((y1 - s.y) * cos(radians)) + ((x1 - s.x) * sin(radians)) + s.y;</code>  Try that."}, {"owner": {"reputation": 73, "user_id": 7922833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee575c42b1489048f4835591b675248e?s=128&d=identicon&r=PG&f=1", "display_name": "SnowTurtle96", "link": "https://stackoverflow.com/users/7922833/snowturtle96"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493194610, "post_id": 43624388, "comment_id": 74305597, "body": "@chux Spot on mate, worked perfectly"}, {"owner": {"reputation": 73, "user_id": 7922833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee575c42b1489048f4835591b675248e?s=128&d=identicon&r=PG&f=1", "display_name": "SnowTurtle96", "link": "https://stackoverflow.com/users/7922833/snowturtle96"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493194648, "post_id": 43624388, "comment_id": 74305625, "body": "@JonathanLeffler Thanks for the tips, I&#39;ll implement these changes"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1493208459, "creation_date": 1493208459, "answer_id": 43633756, "question_id": 43624388, "link": "https://stackoverflow.com/questions/43624388/rotating-a-triangle-around-a-point-of-origin/43633756#43633756", "title": "Rotating a triangle around a point of origin", "body": "<p>Incorrect formula used to rotate in the 3 points.  <a href=\"https://en.wikipedia.org/wiki/Rotation_(mathematics)#Two_dimensions\" rel=\"nofollow noreferrer\">Ref</a></p>\n\n<pre><code>//x1r = ((x1 - s.x) * cos(radians)) - ((s.y - y1) * sin(radians)) + s.x;\n//y1r = ((s.y - y1) * cos(radians)) + ((x1 - s.x) * sin(radians)) + s.y;\n  x1r = ((x1 - s.x) * cos(radians)) - ((y1 - s.y) * sin(radians)) + s.x;\n  y1r = ((y1 - s.y) * cos(radians)) + ((x1 - s.x) * sin(radians)) + s.y;\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 7922833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee575c42b1489048f4835591b675248e?s=128&d=identicon&r=PG&f=1", "display_name": "SnowTurtle96", "link": "https://stackoverflow.com/users/7922833/snowturtle96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1493208459, "creation_date": 1493176584, "question_id": 43624388, "link": "https://stackoverflow.com/questions/43624388/rotating-a-triangle-around-a-point-of-origin", "title": "Rotating a triangle around a point of origin", "body": "<p>Having trouble rotating a triangle around a center point, triangle warps and exceeds it's usual size when trying to rotate. </p>\n\n<p>Here's what I'm working with</p>\n\n<pre><code>     x1r = ((x1 - s.x) * cos(radians)) - ((s.y - y1) * sin(radians)) + s.x;\n     y1r = ((s.y - y1) * cos(radians)) + ((x1 - s.x) * sin(radians)) + s.y;\n     x2r = ((x2 - s.x) * cos(radians)) - ((s.y - y2) * sin(radians)) + s.x;\n     y2r = ((s.y - y2) * cos(radians)) + ((x2 - s.x) * sin(radians)) + s.y;\n     x3r = ((x3 - s.x) * cos(radians)) - ((s.y - y3) * sin(radians)) + s.x;\n     y3r = ((s.y - y3) * cos(radians)) + ((x3 - s.x) * sin(radians)) + s.y;\n</code></pre>\n\n<p>Any guidance would be much appreciated!</p>\n"}, {"tags": ["c", "c-preprocessor", "solaris"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1493177017, "post_id": 43624030, "comment_id": 74297692, "body": "Make sure there are no carriage returns at the ends of the lines (after the backslash, before the newline).  Otherwise, there&#39;s no problem.  You should identify which Sun tools have the problem.  I&#39;ve never seen a problem like that on any platform over a long period, but I&#39;ve not done much on Solaris in the last five years or so, and things might have changed (but I don&#39;t think it likely).  Note that backslash-newline parsing comes before the input is tokenized.  You can split keywords with backslash-newline as long as there&#39;s no leading space on the next line."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493180286, "post_id": 43624030, "comment_id": 74298560, "body": "@JonathanLeffler - There should be no whitespace after the backslash. Our makefile has a <a href=\"https://github.com/weidai11/cryptopp/blob/master/GNUmakefile#L740\" rel=\"nofollow noreferrer\">recipe to trim trailing whitespace</a>, and other tools like GCC don&#39;t warn of extra whitespace. For an example of the error in Sun tools, see <a href=\"https://groups.google.com/d/msg/cryptopp-users/OYaByDEbSI0/zrIjWUtEAQAJ\" rel=\"nofollow noreferrer\">Coredump in cryptest.exe on Solaris 10</a>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493181015, "post_id": 43624030, "comment_id": 74298763, "body": "I used the Sun compiler more on Solaris 9 \u2014 running the result on Solaris 10 \u2014 but I&#39;ve not worked with Solaris 11. (It always exasperated me that keeping up-to-date with the leading edge environments wasn&#39;t deemed important.) It puzzles that the compiler generates code that crashes when other compilers accept it; that sort of thing tends to be a show-stopper, or cause to switch to an alternative compiler.  Sometimes, the trouble is undefined behaviour; presumably that isn&#39;t the problem in this code.  I&#39;m not clear that the problem is backslashes, but I&#39;ve not studied the code in detail."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1493200649, "post_id": 43624030, "comment_id": 74309804, "body": "What are these Sun tools you speak of? Sun is dead... ;-)  Assuming you&#39;re running Studio 12.5, what are the complaints?  I&#39;ve not seen such problems, but I don&#39;t recall now if I&#39;ve actually used <code>dbx</code> under 12.5."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1493200815, "post_id": 43624094, "comment_id": 74309926, "body": "That&#39;s a C++ reference.  The question is tagged C <i>and</i> C-preprocessor."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1493201827, "post_id": 43624094, "comment_id": 74310633, "body": "<a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">The C Standard</a> reference is <b>5.1.1.2 Translation phases</b>, paragraph 2:  &quot;Each  instance  of  a  backslash  character  (\\&#41;  immediately  followed  by  a  new-line character  is  deleted,  splicing  physical  source  lines  to  form  logical  source  lines.&quot;"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1493204044, "post_id": 43624094, "comment_id": 74312133, "body": "@AndrewHenle thanks, I&#39;ve just fixed the link and the quote"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1496723535, "post_id": 43624094, "comment_id": 75763080, "body": "Thanks @L\u01b0uV\u0129nhPh&#250;c. I guess we are encountering a Solaris bug."}], "tags": [], "owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "is_accepted": true, "score": 6, "last_activity_date": 1493204028, "last_edit_date": 1493204028, "creation_date": 1493174487, "answer_id": 43624094, "question_id": 43624030, "link": "https://stackoverflow.com/questions/43624030/is-backslash-newline-valid-on-if-and-elif/43624094#43624094", "title": "Is backslash-newline valid on #if and #elif?", "body": "<p>They're valid, because the backslashes before newlines are removed in phase 2 before the preprocessing is done in phase 4.</p>\n\n<blockquote>\n  <h1>Phase 2</h1>\n  \n  <ol>\n  <li>Whenever backslash appears at the end of a line (immediately followed by the newline character), both backslash and newline are deleted, combining two physical source lines into one logical source line. This is a single-pass operation: a line ending in two backslashes followed by an empty line does not combine three lines into one.</li>\n  </ol>\n  \n  <p>...</p>\n  \n  <h1>Phase 4</h1>\n  \n  <ol>\n  <li>Preprocessor is executed.</li>\n  </ol>\n</blockquote>\n\n<p><a href=\"http://en.cppreference.com/w/c/language/translation_phases\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/c/language/translation_phases</a></p>\n"}], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 43624094, "answer_count": 1, "score": 1, "last_activity_date": 1493204028, "creation_date": 1493174061, "last_edit_date": 1495540961, "question_id": 43624030, "link": "https://stackoverflow.com/questions/43624030/is-backslash-newline-valid-on-if-and-elif", "title": "Is backslash-newline valid on #if and #elif?", "body": "<p>This is related to <a href=\"https://stackoverflow.com/q/10419530/608639\">Multi line preprocessor macros</a>. I'm interested in the <code>#if</code> or <code>#elif</code>, and not the macro being defined. For example, is the following valid:</p>\n\n<pre><code>#if defined(X) || defined(Y) || \\\n    defined(Z)\n...\n#endif\n</code></pre>\n\n<p>The reason I'm asking is Clang, GCC and MSVC accept it, but some Sun tools on Solaris are complaining about it. GCC documents the behavior at <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Initial-processing.html\" rel=\"nofollow noreferrer\">1.2 Initial processing</a> (<em>\"backslash-newline\"</em> and <em>\"continued lines\"</em>), but Sun tools like DBX encounter an internal error.</p>\n"}, {"tags": ["c", "opengl", "rendering", "freeimage"], "comments": [{"owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1493174508, "post_id": 43624006, "comment_id": 74297079, "body": "@genpfault: I had that before and same issue, although you&#39;re right it definitely should be switched back"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1493174765, "post_id": 43624006, "comment_id": 74297148, "body": "Aye, <a href=\"http://stackoverflow.com/a/17371181/44729\">here ya go</a>, feel free to use that to build on."}, {"owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1493174815, "post_id": 43624006, "comment_id": 74297166, "body": "I&#39;ll give it a go, thanks!"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1493191172, "post_id": 43624006, "comment_id": 74303445, "body": "Warning, your call to <code>FreeImage_ConvertFromRawBits</code> seems wrong: <code>FreeImage_ConvertFromRawBits(pixels, _winWidth,     </code> <b><code>_winWidth</code></b> <code>,...</code>"}, {"owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1493218518, "post_id": 43624006, "comment_id": 74323737, "body": "@purplepsycho: Whoops, that&#39;s a typo, thanks! It worked because I have 1024x1024 images"}], "answers": [{"tags": [], "owner": {"reputation": 18987, "user_id": 2470818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c3e0df5ee75b18ce0c8aeadf4433e151?s=128&d=identicon&r=PG&f=1", "display_name": "vallentin", "link": "https://stackoverflow.com/users/2470818/vallentin"}, "is_accepted": true, "score": 1, "last_activity_date": 1493179000, "last_edit_date": 1592644375, "creation_date": 1493179000, "answer_id": 43624755, "question_id": 43624006, "link": "https://stackoverflow.com/questions/43624006/opengl-glreadpixels-to-freeimage-bitmap/43624755#43624755", "title": "OpenGL glReadPixels to FreeImage bitmap", "body": "<p><em>I saw this question a bit after you posted it. If I recall correctly, I think you said your snippet was simplified in contrast to what you're actually using.</em></p>\n<p>Thus the best guess then is that you aren't allocating enough memory for <code>pixels</code>.</p>\n<p>Here is a more complete example for taking a screenshot and saving it with FreeImage.</p>\n<pre><code>BYTE *pixels = (BYTE*)malloc(width * height * 3);\n\nglReadPixels(0, 0, width, height, GL_BGR, GL_UNSIGNED_BYTE, pixels);\n\nFIBITMAP *image = FreeImage_ConvertFromRawBits(pixels, width, height, 3 * width, 24, FI_RGBA_RED_MASK, FI_RGBA_GREEN_MASK, FI_RGBA_BLUE_MASK, FALSE);\n\nif (FreeImage_Save(FIF_BMP, image, &quot;screenshot.bmp&quot;, 0))\n    printf(&quot;Successfully saved!\\n&quot;);\nelse\n    printf(&quot;Failed saving!\\n&quot;);\n\nFreeImage_Unload(image);\n\nfree(pixels);\n</code></pre>\n<p>Here you can see that OpenGL as well as the photo viewer are showing the same.</p>\n<p><a href=\"https://i.stack.imgur.com/EWi0F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EWi0F.png\" alt=\"\" /></a></p>\n<p>Lastly I remembered something about the color mask being redundant. I looked a bit around and found this thread from 2005.</p>\n<blockquote>\n<p>At the moment, color mask are only used for 16-bit RGB images, that's why your code produces two identical images.</p>\n<p>\u2013 <em><a href=\"https://sourceforge.net/p/freeimage/discussion/36110/thread/6e51905d/\" rel=\"nofollow noreferrer\">FreeImage Thread, 2005</a></em></p>\n</blockquote>\n<p>It's of course an old thread, so take it with a grain of salt. I wasn't however able to find any newer mentions of it. Changing the masks for <code>FreeImage_ConvertFromRawBits()</code> had no effect when I tested it.</p>\n"}], "owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "accepted_answer_id": 43624755, "answer_count": 1, "score": 1, "last_activity_date": 1493218526, "creation_date": 1493173859, "last_edit_date": 1493218526, "question_id": 43624006, "link": "https://stackoverflow.com/questions/43624006/opengl-glreadpixels-to-freeimage-bitmap", "title": "OpenGL glReadPixels to FreeImage bitmap", "body": "<p>I'm trying to save the output of my rendering to file. I'm already using FreeImage as a dependency so I'd like to continue using it. I'm using <code>glReadPixels</code> to read the RGB values from the buffer. These values were entered into the buffer as GLubytes, so I figure I need to read them as such. However, when I run the following code snippet, the <code>FreeImage_ConvertFromRawBits</code> call seg faults and I don't understand why. I've consulted <a href=\"http://gentoo.osuosl.org/distfiles/FreeImage3154.pdf\" rel=\"nofollow noreferrer\">the docs</a>, and it seems that I'm doing everything correctly. Has anyone else run into this issue?</p>\n\n<pre><code>GLubyte pixels[3*_winWidth*_winHeight];\nglReadPixels(0, 0, _winWidth, _winHeight, GL_RGB, GL_UNSIGNED_BYTE, pixels);\nFIBITMAP *bitmap = FreeImage_ConvertFromRawBits(pixels, _winWidth,\n    _winHeight, 3 *_winWidth, 24, FI_RGBA_RED_MASK, FI_RGBA_GREEN_MASK,\n    FI_RGBA_BLUE_MASK, false);\n</code></pre>\n"}, {"tags": ["python", "c", "python-3.x", "iterator", "python-c-extension"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1493169389, "post_id": 43623174, "comment_id": 74295748, "body": "<code>yield</code> has no C++ equivalent. I&#39;d start by <a href=\"https://www.python.org/dev/peps/pep-0234/\" rel=\"nofollow noreferrer\">implementing the iterator protocol manually</a> in Python, to get out of the <code>yield</code> and <code>yield from</code> mindset."}], "answers": [{"comments": [{"owner": {"reputation": 4536, "user_id": 4165324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d50177f8e05b2c515b26455ba250ce?s=128&d=identicon&r=PG&f=1", "display_name": "danny", "link": "https://stackoverflow.com/users/4165324/danny"}, "reply_to_user": {"reputation": 3397, "user_id": 7711283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qCfAB.jpg?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/7711283/claudio"}, "edited": false, "score": 0, "creation_date": 1493310263, "post_id": 43662599, "comment_id": 74373259, "body": "The answer directly answers the question of how to implement an iterator in much more detail than the comment saying &#39;implement protocol described in PEP here&#39;. Therefore I feel it is clearer and more appropriate. If your question is no longer applicable or you feel has been covered else where consider locking/updating it stating as such."}, {"owner": {"reputation": 4536, "user_id": 4165324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d50177f8e05b2c515b26455ba250ce?s=128&d=identicon&r=PG&f=1", "display_name": "danny", "link": "https://stackoverflow.com/users/4165324/danny"}, "reply_to_user": {"reputation": 3397, "user_id": 7711283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qCfAB.jpg?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/7711283/claudio"}, "edited": false, "score": 0, "creation_date": 1493310591, "post_id": 43662599, "comment_id": 74373497, "body": "See last line in answer."}, {"owner": {"reputation": 4536, "user_id": 4165324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d50177f8e05b2c515b26455ba250ce?s=128&d=identicon&r=PG&f=1", "display_name": "danny", "link": "https://stackoverflow.com/users/4165324/danny"}, "reply_to_user": {"reputation": 3397, "user_id": 7711283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qCfAB.jpg?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/7711283/claudio"}, "edited": false, "score": 0, "creation_date": 1493728993, "post_id": 43662599, "comment_id": 74519252, "body": "I agree with the conclusion of the reviewers. The answer is valid as it stands and your answer contains no additional relevant information that is not already present in the above answer."}], "tags": [], "owner": {"reputation": 4536, "user_id": 4165324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d50177f8e05b2c515b26455ba250ce?s=128&d=identicon&r=PG&f=1", "display_name": "danny", "link": "https://stackoverflow.com/users/4165324/danny"}, "is_accepted": false, "score": 1, "last_activity_date": 1493310086, "last_edit_date": 1493310086, "creation_date": 1493308673, "answer_id": 43662599, "question_id": 43623174, "link": "https://stackoverflow.com/questions/43623174/how-to-write-c-code-of-a-python-module-able-to-return-a-python-iterator-object/43662599#43662599", "title": "How to write C code (of a Python module) able to return a Python iterator object?", "body": "<p>An iterator in Python is a special form of a generator and is implemented by a class containing methods <code>__iter__</code> and <code>next</code> where <code>__iter__</code> returns <code>self</code> and <code>next</code> returns each value in turn, raising <code>StopIteration</code> on end of iteration - <a href=\"https://www.python.org/dev/peps/pep-0234/\" rel=\"nofollow noreferrer\">see PEP</a>.</p>\n\n<p>To provide a C++ equivalent, the C++ code needs to implement those same python functions to conform to the protocol. The resulting extension type is an iterator.</p>\n\n<p>In other words, the answer to this question is the same as asking '<em>How do I implement an iterator without using <code>yield</code></em>' but in a C++ extension instead of pure Python. There are several existing answers for this on stack overflow.</p>\n\n<p>NB - <code>next</code> is <code>__next__</code> on Python 3.</p>\n"}, {"comments": [{"owner": {"reputation": 3397, "user_id": 7711283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qCfAB.jpg?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/7711283/claudio"}, "edited": false, "score": 0, "creation_date": 1496105525, "post_id": 44242410, "comment_id": 75512297, "body": "You write: <code>Cython clearly offers a straightforward way of doing it without writing C yourself, but it doesn&#39;t use any special techniques to do the translation on top of what you&#39;ve already been told.</code> and at the same time (if I have understood your answer right), explain the special technique Cython uses to translate Python <code>yield</code> to an appropriate C-equivalent on top what I have been told:  using a switch to <code>goto</code> statements where the state of the iteration is kept in a special <code>closure</code> structure."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "reply_to_user": {"reputation": 3397, "user_id": 7711283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qCfAB.jpg?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/7711283/claudio"}, "edited": false, "score": 1, "creation_date": 1496126044, "post_id": 44242410, "comment_id": 75518214, "body": "You do understand it right. I think my point was that it&#39;s nothing you couldn&#39;t write yourself. I suspect if you gave the problem of writing a function that can be called multiple times to work like a Python generator to a C programmer, they&#39;d probably come up with something similar (maybe avoiding <code>goto</code>...). Anyway - I mostly thought it&#39;s worth looking at how Cython does it. It&#39;ll either show a useful mechanism to copy, or convince you that you&#39;d rather not write it yourself and you should just use Cython (both of which are ok outcomes)"}, {"owner": {"reputation": 3397, "user_id": 7711283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qCfAB.jpg?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/7711283/claudio"}, "edited": false, "score": 0, "creation_date": 1496143222, "post_id": 44242410, "comment_id": 75529417, "body": "In this context it would be sure interesting to know how the Python interpreter does it in it&#39;s own C-code. I wouldn&#39;t be surprised if Cython just copy how Python does it itself."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "reply_to_user": {"reputation": 3397, "user_id": 7711283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qCfAB.jpg?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/7711283/claudio"}, "edited": false, "score": 1, "creation_date": 1496144749, "post_id": 44242410, "comment_id": 75530530, "body": "The best answer I can see is <a href=\"https://stackoverflow.com/questions/24501406/how-do-yield-works-in-python-c-code-good-bad-part/24524417#24524417\" title=\"how do yield works in python c code good bad part\">stackoverflow.com/questions/24501406/&hellip;</a>. I think that most of the information is held in the frame object and there isn&#39;t a huge difference between how functions and generators are handled (Python still needs to store the current line number and the local variables for either of them, so it isn&#39;t too hard to be able to resume from a point - this is also used in the debugger for example)."}], "tags": [], "owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "is_accepted": true, "score": 1, "last_activity_date": 1496060575, "creation_date": 1496060575, "answer_id": 44242410, "question_id": 43623174, "link": "https://stackoverflow.com/questions/43623174/how-to-write-c-code-of-a-python-module-able-to-return-a-python-iterator-object/44242410#44242410", "title": "How to write C code (of a Python module) able to return a Python iterator object?", "body": "<p>This is more a response to your question edit than a complete answer - I agree with the gist of Danny's answer, that you need to implement this in a class with a <code>__next__</code>/<code>next</code> method (depending on the version of Python). In your edit you assert that it must be possible because Cython can do it. I thought it was worth having a look at exactly how Cython does it.</p>\n\n<p>Start with a basic example (picked because it has a few different <code>yield</code> statements and a loop):</p>\n\n<pre><code>def basic_iter(n):\n    a = 0\n    b = 5\n    yield a\n    a+=3\n    yield b\n    b+=2\n\n    for i in range(n):\n        yield a+b+n\n        a = b+1\n        b*=2\n    yield 50\n</code></pre>\n\n<p>The first thing Cython does is define a <code>__pyx_CoroutineObject</code> C class with a <code>__Pyx_Generator_Next</code> method that implements <code>__next__</code>/<code>next</code>. A few relevant attributes of the <code>__pyx_CoroutineObject</code>:</p>\n\n<ul>\n<li><code>body</code> - a C function pointer that implements the logic you've defined.</li>\n<li><code>resume_label</code> - an integer used to remember how far you've got in the function defined by <code>body</code></li>\n<li><code>closure</code> - a custom created C class that stores all the variables used within <code>body</code>.</li>\n</ul>\n\n<p>In a slightly roundabout way, <code>__Pyx_Generator_Next</code> calls the <code>body</code> attribute, which is the translation of the Python code you've defined.</p>\n\n<p>Let's then look at how the function assigned to <code>body</code> works - in the case of my example called <code>__pyx_gb_5iters_2generator</code>. The first thing it does is use <code>resume_label</code> to jump to the right <code>yield</code> statement:</p>\n\n<pre><code>switch (__pyx_generator-&gt;resume_label) {\n    case 0: goto __pyx_L3_first_run;\n    case 1: goto __pyx_L4_resume_from_yield;\n    case 2: goto __pyx_L5_resume_from_yield;\n    case 3: goto __pyx_L8_resume_from_yield;\n    case 4: goto __pyx_L9_resume_from_yield;\n    default: /* CPython raises the right error here */\n    __Pyx_RefNannyFinishContext();\n    return NULL;\n  }\n</code></pre>\n\n<p>Any variable assignments are done through the <code>closure</code> structure (locally named to <code>__pyx_cur_scope</code>:</p>\n\n<pre><code>/*     a = 0             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; */\n__pyx_cur_scope-&gt;__pyx_v_a = __pyx_int_0\n</code></pre>\n\n<p><code>yield</code> sets the <code>resume_label</code> and returns (with <code>resume_label</code> allowing you to jump straight back next time):</p>\n\n<pre><code>__pyx_generator-&gt;resume_label = 1;\nreturn __pyx_r;\n</code></pre>\n\n<p>The loop is slightly more complicated but basically the same thing - it uses <code>goto</code> to jump into the C loop (which is legal).</p>\n\n<p>Finally, once it's reached the end it raises a <code>StopIteration</code> error:</p>\n\n<pre><code>PyErr_SetNone(PyExc_StopIteration);\n</code></pre>\n\n<hr>\n\n<p>In summary, Cython does exactly what you've been advised to do: it defines a class with <code>__next__</code> or <code>next</code> method and uses that class to keep track of the state. Because it's automated, it's quite good at keeping track of reference counting and thus avoids the <code>Segmentation Fault</code> errors you experienced. The use of <code>goto</code> to return to the previous point of execution is efficient, but requires care.</p>\n\n<p>I can see why rewriting your generator function in C in terms of a single <code>__next__</code>/<code>next</code> function is unappealing, and Cython clearly offers a straightforward way of doing it without writing C yourself, but it doesn't use any special techniques to do the translation on top of what you've already been told.</p>\n"}], "owner": {"reputation": 3397, "user_id": 7711283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qCfAB.jpg?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/7711283/claudio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 44242410, "answer_count": 2, "score": 2, "last_activity_date": 1496060575, "creation_date": 1493167606, "last_edit_date": 1495540963, "question_id": 43623174, "link": "https://stackoverflow.com/questions/43623174/how-to-write-c-code-of-a-python-module-able-to-return-a-python-iterator-object", "title": "How to write C code (of a Python module) able to return a Python iterator object?", "body": "<p>After I have shortly succeed in writing a minimalistic Python3.6 extension module in C++ ( <a href=\"https://stackoverflow.com/questions/43621948/c-python-module-import-error-undefined-symbol-py-initmodule3-py-initmodu\">see here</a> ) I plan to provide a Python module which does the same as the following Python function <code>iterUniqueCombos()</code>:</p>\n\n<pre><code>def iterUniqueCombos(lstOfSortableItems, sizeOfCombo):\n    lstOfSortedItems = sorted(lstOfSortableItems)\n    sizeOfList = len(lstOfSortedItems)\n\n    lstComboCandidate = []\n\n    def idxNextUnique(idxItemOfList):\n        idxNextUniqueCandidate = idxItemOfList + 1\n\n        while (\n                idxNextUniqueCandidate &lt; sizeOfList \n                    and \n                lstOfSortedItems[idxNextUniqueCandidate] == lstOfSortedItems[idxItemOfList]\n        ): # while\n            idxNextUniqueCandidate += 1\n\n        idxNextUnique = idxNextUniqueCandidate\n\n        return idxNextUnique\n\n    def combinate(idxItemOfList):\n        if len(lstComboCandidate) == sizeOfCombo:\n            yield tuple(lstComboCandidate)\n        elif sizeOfList - idxItemOfList &gt;= sizeOfCombo - len(lstComboCandidate):\n            lstComboCandidate.append(lstOfSortedItems[idxItemOfList])\n            yield from combinate(idxItemOfList + 1)\n            lstComboCandidate.pop()\n            yield from combinate(idxNextUnique(idxItemOfList))\n\n    yield from combinate(0)\n</code></pre>\n\n<p>I have some basic understanding of Python and C++ programming, but absolutely no idea how to \"translate\" Pythons <strong>yield</strong> into C++ code of an Python extension module. So my question is: </p>\n\n<blockquote>\n  <p>How to write C++ code (of a Python module) able to return a Python iterator object?</p>\n</blockquote>\n\n<p>Any hints to get me started are welcome. </p>\n\n<p><strong>UPDATE (status 2017-05-07):</strong></p>\n\n<p>Both the comment: <em>yield has no C++ equivalent. I'd start by implementing the iterator protocol manually in Python, to get out of the yield and yield from mindset. \u2013 user2357112 Apr 26 at 1:16</em> and the hint in the answer by <code>danny</code> <em>the answer to this question is the same as asking 'How do I implement an iterator without using yield' but in a C++ extension instead of pure Python.</em> put my programming efforts in the wrong direction of reinventing the wheel by rewriting the algorithms code in order to eliminate <code>yield</code> and by writing the C-code of a Python extension module from scratch (what resulted in raining <code>Segmentation Fault</code> errors). </p>\n\n<blockquote>\n  <p><strong>The state-of-the-art of my current knowledge on the subject of the question is that using <a href=\"http://cython.org\" rel=\"nofollow noreferrer\">Cython</a> it is possible to translate the above Python code (which is using <code>yield</code>) directly into C code of a Python extension module.</strong></p>\n</blockquote>\n\n<p>This is not only possible using the Python code just as it is (without the need of rewriting anything), but in addition to that the speed of the extension module created by Cython from the algorithm using <code>yield</code> runs at least twice that fast as the extension module created from the to an iterator class using <code>__iter__</code> and <code>__next__</code> rewritten algorithm <em>(the latter is valid if no Cython specific speed optimization code is added to the  Python script)</em>. </p>\n"}, {"tags": ["c", "gcc", "mingw", "mingw-w64"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1493166225, "post_id": 43622836, "comment_id": 74295025, "body": "Delete something, see if your code still compiles. Repeat until no further deletions possible"}, {"owner": {"reputation": 61, "user_id": 4019145, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CXIQc0HKFq0/AAAAAAAAAAI/AAAAAAAAABs/ATq6ZpQLONc/photo.jpg?sz=128", "display_name": "TAdrian", "link": "https://stackoverflow.com/users/4019145/tadrian"}, "edited": false, "score": 0, "creation_date": 1555497332, "post_id": 43622836, "comment_id": 98129905, "body": "Have you found a solution to what files you can delete?"}], "answers": [{"tags": [], "owner": {"reputation": 1154, "user_id": 6521181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/81957e6bc199ffd1ce4362dda7d488f1?s=128&d=identicon&r=PG&f=1", "display_name": "John London", "link": "https://stackoverflow.com/users/6521181/john-london"}, "is_accepted": false, "score": 0, "last_activity_date": 1493981402, "creation_date": 1493981402, "answer_id": 43803062, "question_id": 43622836, "link": "https://stackoverflow.com/questions/43622836/what-files-can-be-safely-deleted-from-the-mingw-w64-binaries/43803062#43803062", "title": "What files can be safely deleted from the MinGW-w64 binaries?", "body": "<p>If you want a smaller GCC toolset, try <a href=\"https://nuwen.net/mingw.html\" rel=\"nofollow noreferrer\">MinGW Distro</a>.</p>\n\n<p>Scroll down to \"How To Build Your Own Distro\", download components-14.1.7z, extract it, extract binutils 2.27 and GCC 6.3.0 inside the same folder. The total size is about 270MB.</p>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 7624712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4001d43c8a9e5c81aefebd1a5ba9b013?s=128&d=identicon&r=PG&f=1", "display_name": "J. Stone", "link": "https://stackoverflow.com/users/7624712/j-stone"}, "is_accepted": false, "score": 0, "last_activity_date": 1580747280, "creation_date": 1580747280, "answer_id": 60043335, "question_id": 43622836, "link": "https://stackoverflow.com/questions/43622836/what-files-can-be-safely-deleted-from-the-mingw-w64-binaries/60043335#60043335", "title": "What files can be safely deleted from the MinGW-w64 binaries?", "body": "<p>as far as i know the minimum are yours</p>\n\n<p>1, bin\n5. libexec</p>\n\n<p>not all tools in bin you may need but generally i would hold both of those dirs</p>\n\n<p>you also ned libraries and headers if you want to build abainst standard c library and windows.h, so</p>\n\n<ol start=\"3\">\n<li>include</li>\n<li>lib</li>\n</ol>\n\n<p>is also needed (hovever part of it may contain also headers and libraries for c++ standard library) all those main 3 libs are kinda mixed there afaik so it might be a bit hard to find what comes for what</p>\n"}, {"tags": [], "owner": {"reputation": 42, "user_id": 14890888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf9819a2ad7b92121d469b88509a839?s=128&d=identicon&r=PG", "display_name": "nazibalalam", "link": "https://stackoverflow.com/users/14890888/nazibalalam"}, "is_accepted": false, "score": 0, "last_activity_date": 1609218419, "creation_date": 1609218419, "answer_id": 65487540, "question_id": 43622836, "link": "https://stackoverflow.com/questions/43622836/what-files-can-be-safely-deleted-from-the-mingw-w64-binaries/65487540#65487540", "title": "What files can be safely deleted from the MinGW-w64 binaries?", "body": "<p>Why are people still using Mingw or Mingw64 instead of <a href=\"https://jmeubank.github.io/tdm-gcc/\" rel=\"nofollow noreferrer\">TDM-GCC</a> ? You have to rely on the default builds or build it yourself from source. Trying to install it on your own terms sucks.</p>\n<p><a href=\"https://jmeubank.github.io/tdm-gcc/\" rel=\"nofollow noreferrer\">TDM-GCC</a> on the other hand, you can specify where and which components to install as you wish. You can upgrade or remove it without any worries. It's more fast, easy,modern and equivelant these days.</p>\n<p>Now for your question, you can download and install <a href=\"https://jmeubank.github.io/tdm-gcc/\" rel=\"nofollow noreferrer\">TDM-GCC</a> by it's <a href=\"https://github.com/jmeubank/tdm-gcc/releases/download/v9.2.0-tdm-1/tdm-gcc-9.2.0.exe\" rel=\"nofollow noreferrer\">installer</a>. I don't really think you need any further instructions as a 5 year old would understand how to use it. Just select only the components required for c.</p>\n<p>If you don't understand,I would gladly help you more if needed. ^_^</p>\n"}], "owner": {"reputation": 35, "user_id": 7876518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41e02a26e27f33755234abdbc14fa342?s=128&d=identicon&r=PG&f=1", "display_name": "Spaghetti Obfuscator", "link": "https://stackoverflow.com/users/7876518/spaghetti-obfuscator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 509, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1609218419, "creation_date": 1493164958, "last_edit_date": 1493165592, "question_id": 43622836, "link": "https://stackoverflow.com/questions/43622836/what-files-can-be-safely-deleted-from-the-mingw-w64-binaries", "title": "What files can be safely deleted from the MinGW-w64 binaries?", "body": "<p>I am using the <code>MinGW-w64</code> installer found here:<br>\n<a href=\"https://mingw-w64.org/doku.php/download/mingw-builds\" rel=\"nofollow noreferrer\">https://mingw-w64.org/doku.php/download/mingw-builds</a></p>\n\n<p>Installing to a directory creates a folder called <code>mingw32</code> or <code>mingw64</code> that contains the compiler. I already know that the additional batch script, HTML link, and uninstall executable in the same directory can be deleted.</p>\n\n<p>The <code>mingw32/64</code> folder contains these folders:</p>\n\n<blockquote>\n  <ol>\n  <li>bin</li>\n  <li>etc</li>\n  <li>include</li>\n  <li>lib</li>\n  <li>libexec</li>\n  <li>licenses</li>\n  <li>opt</li>\n  <li>share</li>\n  <li>i686-w64-mingw32 (mingw32) or x86_64-w64-mingw32 (mingw64)</li>\n  </ol>\n</blockquote>\n\n<p>I only wish to compile with <code>C</code> and nothing else. So what files can I delete in order to reduce the file count because the compiler contains files for <code>Ruby</code>, <code>Fortran</code> and other languages which as I stated, I don't need it.</p>\n"}, {"tags": ["c", "linked-list", "output"], "comments": [{"owner": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "edited": false, "score": 1, "creation_date": 1493163908, "post_id": 43622675, "comment_id": 74294437, "body": "It&#39;s working perfectly fine for me. I get a list of prime numbers."}, {"owner": {"reputation": 6882, "user_id": 611562, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3dbe1a93b0b5d353b419d62de19832c3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/611562/matt"}, "edited": false, "score": 0, "creation_date": 1493163925, "post_id": 43622675, "comment_id": 74294443, "body": "Works for me. I get a list of what looks like prime numbers up to 1000."}, {"owner": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "edited": false, "score": 0, "creation_date": 1493163987, "post_id": 43622675, "comment_id": 74294457, "body": "what <code>gcc</code> version are you using? I&#39;m compiling it on Repl.it which has gcc version 4.6.3"}, {"owner": {"reputation": 177, "user_id": 7594127, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/965c731d858cdf1a15090769f9171075?s=128&d=identicon&r=PG&f=1", "display_name": "below_avg_st", "link": "https://stackoverflow.com/users/7594127/below-avg-st"}, "edited": false, "score": 0, "creation_date": 1493164002, "post_id": 43622675, "comment_id": 74294460, "body": "Interesting I tried it on  gcc and devc++ and it didn&#39;t work there either, but seems to work fine on several online compilers."}, {"owner": {"reputation": 2133, "user_id": 5447208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f8eb976d91e3b7bb21366a68d1a70f?s=128&d=identicon&r=PG&f=1", "display_name": "Cody", "link": "https://stackoverflow.com/users/5447208/cody"}, "edited": false, "score": 2, "creation_date": 1493164039, "post_id": 43622675, "comment_id": 74294471, "body": "I tried running it, but I think you&#39;re missing a <code>}</code> in your print function."}, {"owner": {"reputation": 177, "user_id": 7594127, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/965c731d858cdf1a15090769f9171075?s=128&d=identicon&r=PG&f=1", "display_name": "below_avg_st", "link": "https://stackoverflow.com/users/7594127/below-avg-st"}, "reply_to_user": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "edited": false, "score": 0, "creation_date": 1493164180, "post_id": 43622675, "comment_id": 74294509, "body": "@narusin I am using version 4.8.4"}, {"owner": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "edited": false, "score": 0, "creation_date": 1493164214, "post_id": 43622675, "comment_id": 74294517, "body": "@below_avg_st what compiler are you using?"}, {"owner": {"reputation": 6882, "user_id": 611562, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3dbe1a93b0b5d353b419d62de19832c3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/611562/matt"}, "edited": false, "score": 1, "creation_date": 1493164365, "post_id": 43622675, "comment_id": 74294566, "body": "Can&#39;t see any issue with the logic really. Only problem I can see is that you aren&#39;t ever freeing memory when deleting items from the list."}, {"owner": {"reputation": 177, "user_id": 7594127, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/965c731d858cdf1a15090769f9171075?s=128&d=identicon&r=PG&f=1", "display_name": "below_avg_st", "link": "https://stackoverflow.com/users/7594127/below-avg-st"}, "reply_to_user": {"reputation": 6882, "user_id": 611562, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3dbe1a93b0b5d353b419d62de19832c3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/611562/matt"}, "edited": false, "score": 0, "creation_date": 1493164530, "post_id": 43622675, "comment_id": 74294598, "body": "@Matt do you have a suggestion on how to free it? Not what I intentionally posted on but I haven&#39;t been able to find a way to do it because of the logic I used for my delete method."}, {"owner": {"reputation": 6882, "user_id": 611562, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3dbe1a93b0b5d353b419d62de19832c3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/611562/matt"}, "edited": false, "score": 1, "creation_date": 1493164945, "post_id": 43622675, "comment_id": 74294695, "body": "@below_avg_st store the current pointer, move onto the next, then delete the stored one. <a href=\"https://gist.github.com/MattDiesel/1eb6167304f5e23b98c1fa9cd6346736\" rel=\"nofollow noreferrer\">gist.github.com/MattDiesel/1eb6167304f5e23b98c1fa9cd6346736</a>"}, {"owner": {"reputation": 3197, "user_id": 5853530, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3b9567983f2e1d6c2315fa26202accb6?s=128&d=identicon&r=PG&f=1", "display_name": "Rajeev Singh", "link": "https://stackoverflow.com/users/5853530/rajeev-singh"}, "edited": false, "score": 0, "creation_date": 1493166229, "post_id": 43622675, "comment_id": 74295028, "body": "I think your <code>Deletemultiples</code> function will not able to delete the element at the beginning of the list."}, {"owner": {"reputation": 6882, "user_id": 611562, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3dbe1a93b0b5d353b419d62de19832c3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/611562/matt"}, "reply_to_user": {"reputation": 3197, "user_id": 5853530, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3b9567983f2e1d6c2315fa26202accb6?s=128&d=identicon&r=PG&f=1", "display_name": "Rajeev Singh", "link": "https://stackoverflow.com/users/5853530/rajeev-singh"}, "edited": false, "score": 0, "creation_date": 1493168661, "post_id": 43622675, "comment_id": 74295570, "body": "@RajeevSingh true."}, {"owner": {"reputation": 177, "user_id": 7594127, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/965c731d858cdf1a15090769f9171075?s=128&d=identicon&r=PG&f=1", "display_name": "below_avg_st", "link": "https://stackoverflow.com/users/7594127/below-avg-st"}, "reply_to_user": {"reputation": 3197, "user_id": 5853530, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3b9567983f2e1d6c2315fa26202accb6?s=128&d=identicon&r=PG&f=1", "display_name": "Rajeev Singh", "link": "https://stackoverflow.com/users/5853530/rajeev-singh"}, "edited": false, "score": 0, "creation_date": 1493169110, "post_id": 43622675, "comment_id": 74295691, "body": "@RajeevSingh good point I forgot to delete the first element."}], "answers": [{"tags": [], "owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "is_accepted": true, "score": 1, "last_activity_date": 1493166044, "creation_date": 1493166044, "answer_id": 43622976, "question_id": 43622675, "link": "https://stackoverflow.com/questions/43622675/linked-list-not-printing/43622976#43622976", "title": "Linked list not Printing?", "body": "<p>your code is correct. i run it under ubuntu 16.04 LTS with gcc 5.4.0 and\nall things are OK.</p>\n\n<p><a href=\"https://i.stack.imgur.com/eRlpF.png\" rel=\"nofollow noreferrer\">Terminal output</a></p>\n"}], "owner": {"reputation": 177, "user_id": 7594127, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/965c731d858cdf1a15090769f9171075?s=128&d=identicon&r=PG&f=1", "display_name": "below_avg_st", "link": "https://stackoverflow.com/users/7594127/below-avg-st"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "accepted_answer_id": 43622976, "answer_count": 1, "score": 1, "last_activity_date": 1493166044, "creation_date": 1493163719, "last_edit_date": 1493164144, "question_id": 43622675, "link": "https://stackoverflow.com/questions/43622675/linked-list-not-printing", "title": "Linked list not Printing?", "body": "<p>Okay this is making me sweat. I have a program that is compiling, but I am not receiving my desired output when I execute it on gcc, instead the output is <code>Error</code>. I am pretty sure my code and call for <code>Print</code> is at least correct. I can't find any error in my program that would mess up the output.\nThis is my code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\ntypedef struct node{\n    int data;\n    struct node *next;\n}node;\nnode *Inserttail(node *head, int x){\n    node *temp = (node*)malloc(sizeof(node));\n    temp-&gt;data = x;\n    temp-&gt;next = NULL;\n    node *temp1 = head;\n    if(head==NULL)\n        return temp;\n    else if(head-&gt;next ==NULL){\n        head -&gt;next = temp;\n        return head;\n    }\n    while(head-&gt;next != NULL)\n        head = head-&gt;next;\n    head-&gt;next = temp;\n    return temp1;\n}\nvoid Print(node *head){\n    if(head == NULL)\n        printf(\"Error\");\n    while(head != NULL){\n        printf(\"%d \", head-&gt;data);\n        head = head-&gt;next;\n    }\n    printf(\"\\n\");\n}\nnode *Deletemultiples(node *head, int k){\n    node *temp = head, *old = temp;\n    if(head == NULL)\n        return NULL;\n    if(head-&gt;data == 1)\n        head= head-&gt;next;\n    while(temp!=NULL){\n        if(temp-&gt;data %k ==0 &amp;&amp; temp-&gt;data != k)\n            old-&gt;next = temp-&gt;next;\n        old=temp;\n        temp= temp-&gt;next;\n    }\n    return head;\n}\nvoid Freelist(node *head){\n    node *temp = head;\n    while(head != NULL){\n        head = head -&gt; next;\n        free(temp);\n        temp = head;\n    }\n}\nint main(){\n    node *head = NULL;\n    int i;\n    for(i=1; i&lt;=1000; i++)\n        head = Inserttail(head, i);\n    for(i=2; i&lt;=32; i++){\n        head = Deletemultiples(head, i);\n    }\n    Print(head);\n    Freelist(head);\n    return 0;\n}\n</code></pre>\n\n<p>Because of the if statement before the printf, I believe there is something wrong with head, I just can't find the issue.Any thoughts?</p>\n"}, {"tags": ["c", "file", "newline", "c99", "fgets"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 4, "creation_date": 1493163445, "post_id": 43622633, "comment_id": 74294337, "body": "Start by checking the return value of <code>fopen</code>."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 4, "creation_date": 1493163519, "post_id": 43622633, "comment_id": 74294346, "body": "<code>buffer == &quot;\\n&quot;</code> And that is not the way to compare strings in C. Need to use <code>strcmp</code> or character comparison <code>buffer[0] == &#39;\\n&#39;</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1493163618, "post_id": 43622633, "comment_id": 74294371, "body": "<code>fgets</code> does not return <code>EOF</code>."}, {"owner": {"reputation": 81, "user_id": 3750554, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5a74788d438f6150e6e2242f2520f47?s=128&d=identicon&r=PG&f=1", "display_name": "John Nunley", "link": "https://stackoverflow.com/users/3750554/john-nunley"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493168545, "post_id": 43622633, "comment_id": 74295545, "body": "@BLUEPIXY I checked the output of fopen, it says &quot;file not found&quot;, despite the fact that there is a &quot;stuff.br&quot; (the name of the file being opened, I checked) in the same directory."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1493168875, "post_id": 43622633, "comment_id": 74295633, "body": "Does the file exist in the same directory as the executable file? When running in IDE It is often not the same directory. try specifying the full path to the file name. Also, if you are entering a file name from the user Are you removing newline?"}, {"owner": {"reputation": 81, "user_id": 3750554, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5a74788d438f6150e6e2242f2520f47?s=128&d=identicon&r=PG&f=1", "display_name": "John Nunley", "link": "https://stackoverflow.com/users/3750554/john-nunley"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493170295, "post_id": 43622633, "comment_id": 74295961, "body": "@BLUEPIXY Yes, it does exist in the same directory as the executable. I&#39;m not using the IDE, I&#39;m using Vim+CMake+Gcc. I am removing newline from user input. I will try specifying the full directory path, however."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493170724, "post_id": 43622633, "comment_id": 74296053, "body": "Perhaps you think that some recognition is wrong, but I have no way to confirm it."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493171066, "post_id": 43622633, "comment_id": 74296140, "body": "For example, Please change to the following format and test it. <code>ls *.br</code> ... <code>.&#47;a.out stuff.br</code>... <code>int main(int argc, char *argv[]){</code>...  <code>int count = countLinesInFile(argv[1]);</code>"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1493177681, "post_id": 43622633, "comment_id": 74297858, "body": "If the file is definitely there, check the permissions to make sure you (or the user/group the program runs as, at least) are actually allowed to read it.  Also, do you need <code>access()</code>, or can you just check whether <code>fopen()</code> returned NULL (which you need to do anyway)?"}], "answers": [{"tags": [], "owner": {"reputation": 7027, "user_id": 210754, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c85a96b78ee58515ba23a395b2c0f30?s=128&d=identicon&r=PG", "display_name": "No Refunds No Returns", "link": "https://stackoverflow.com/users/210754/no-refunds-no-returns"}, "is_accepted": false, "score": 0, "last_activity_date": 1493163642, "creation_date": 1493163642, "answer_id": 43622661, "question_id": 43622633, "link": "https://stackoverflow.com/questions/43622633/how-to-count-newlines-within-a-file-but-not-counting-lines-that-are-just-newlin/43622661#43622661", "title": "How to count newlines within a file, but not counting lines that are just newlines?", "body": "<p>I think you will need to keep track of the file offset of your last <code>\\n</code> and if the position of this <code>\\n</code> == last+1 then don't increment.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 3750554, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5a74788d438f6150e6e2242f2520f47?s=128&d=identicon&r=PG&f=1", "display_name": "John Nunley", "link": "https://stackoverflow.com/users/3750554/john-nunley"}, "edited": false, "score": 0, "creation_date": 1493166893, "post_id": 43622714, "comment_id": 74295180, "body": "Unfortunately, that would mean it would output if I added a line that prints whenever it runs the loop, which I did try. Unfortunately, it did not. I think this means that the first fgets fails."}], "tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 0, "last_activity_date": 1493164062, "creation_date": 1493164062, "answer_id": 43622714, "question_id": 43622633, "link": "https://stackoverflow.com/questions/43622633/how-to-count-newlines-within-a-file-but-not-counting-lines-that-are-just-newlin/43622714#43622714", "title": "How to count newlines within a file, but not counting lines that are just newlines?", "body": "<p>Function <code>fgets</code> returns a pointer value, or NULL on failure. EOF is (usually, unless you've changed it) defined as -1. They will never compare equal, which means you'll be calling fgets long after you should stop.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 3750554, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5a74788d438f6150e6e2242f2520f47?s=128&d=identicon&r=PG&f=1", "display_name": "John Nunley", "link": "https://stackoverflow.com/users/3750554/john-nunley"}, "edited": false, "score": 0, "creation_date": 1493167002, "post_id": 43622757, "comment_id": 74295207, "body": "I did this, but it continues to segfault. I think the problem is with the first call of fgets."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 1, "last_activity_date": 1493164364, "creation_date": 1493164364, "answer_id": 43622757, "question_id": 43622633, "link": "https://stackoverflow.com/questions/43622633/how-to-count-newlines-within-a-file-but-not-counting-lines-that-are-just-newlin/43622757#43622757", "title": "How to count newlines within a file, but not counting lines that are just newlines?", "body": "<p>Two things: first, <code>fgets</code> returns <code>NULL</code> as soon as no more line could be read, not <code>EOF</code>. Hence, the condition should be <code>while(fgets(...) != NULL)</code> or short <code>while(fgets(...))</code>.\nSecond, <code>buffer == \"\\n\"</code> compares two pointers to characters, i.e. two memory addresses are compared. And it is very unlikely that anything has the same memory address as string literal <code>\"\\n\"</code>. Hence, compare characters, i.e. <code>buffer[0]=='\\n'</code> or <code>buffer[0]!='\\n'</code>.\nAnd I think you could easily get rid of the <code>continue</code>-statement, such that the code looks like the following:</p>\n\n<pre><code>  while (fgets(buffer,sizeof(buffer),input)) {\n    if (buffer[0] != '\\n') {\n      newlines++;\n    }\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1493165614, "post_id": 43622832, "comment_id": 74294875, "body": "What&#39;s wrong with <code>FILE *input = fopen(filename,&quot;r&quot;);</code>? &quot;use a binary file reading function&quot; why would a binary file reader be needed for a text file?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1493166565, "post_id": 43622832, "comment_id": 74295108, "body": "There is no merit in the two-line code.  Your beliefs about <code>fgets()</code> are wrong \u2014 specifically, it includes the newline in the data unless there isn&#39;t room for it.  It indicates EOF by returning a null pointer.  There&#39;s absolutely no need to read the entire file into a buffer.  You can do the job with three integers (last character, this character, overall count) and <code>getc()</code>."}], "tags": [], "owner": {"reputation": 526, "user_id": 7892613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d91fd434fab7b1d94f378329c2c3ae3?s=128&d=identicon&r=PG&f=1", "display_name": "thx1138v2", "link": "https://stackoverflow.com/users/7892613/thx1138v2"}, "is_accepted": false, "score": -2, "last_activity_date": 1493193610, "last_edit_date": 1493193610, "creation_date": 1493164938, "answer_id": 43622832, "question_id": 43622633, "link": "https://stackoverflow.com/questions/43622633/how-to-count-newlines-within-a-file-but-not-counting-lines-that-are-just-newlin/43622832#43622832", "title": "How to count newlines within a file, but not counting lines that are just newlines?", "body": "<pre><code>FILE *input = fopen(filename,\"r\");\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>FILE *input;\ninput = fopen(filename,\"r\");\n</code></pre>\n\n<p>I don't believe that <code>fgets()</code> returns a newline or an EOF. It stops reading at the character before the newline and the next read will be the character after the newline or successive newlines.</p>\n\n<p>You probably need to use a binary file reading function that will read the entire file at once and then parse out the lines. This will also handle the case of a text file that does not have an EOF at the end. Many don't</p>\n\n<ul>\n<li>Get the size of the file.</li>\n<li>Allocate a buffer to hold the entire file.</li>\n<li>Read the entire file into the buffer.</li>\n<li>Parse the buffer.</li>\n</ul>\n\n<p><a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_fgets.htm\" rel=\"nofollow noreferrer\">C library function - fgets()</a><br>\n<a href=\"http://www.cprogramming.com/tutorial/cfileio.html\" rel=\"nofollow noreferrer\">C File I/O and Binary File I/O</a></p>\n"}, {"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 0, "last_activity_date": 1493206522, "creation_date": 1493206522, "answer_id": 43633057, "question_id": 43622633, "link": "https://stackoverflow.com/questions/43622633/how-to-count-newlines-within-a-file-but-not-counting-lines-that-are-just-newlin/43633057#43633057", "title": "How to count newlines within a file, but not counting lines that are just newlines?", "body": "<p><code>fgets()</code> restricts you to a predefined line length.  To get around that, you can use <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html\" rel=\"nofollow noreferrer\">POSIX-standard <code>getline()</code></a>.</p>\n\n<p>When counting lines, to skip empty lines you can simply discount anything that matches <code>\"\\n\"</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n...\n\nlong countLines( const char *filename )\n{\n    FILE *fp = fopen( filename, \"r\" );\n    if ( fp == NULL )\n    {\n        return( -1L );\n    }\n\n    char *line = NULL;\n    size_t bytes = 0UL;\n    long lineCount = 0L;\n\n    for ( ;; )\n    {\n        ssize_t result = getline( &amp;line, &amp;bytes, fp );\n        if ( -1 == result )\n        {\n            break;\n        }\n\n        if ( strcmp( line, \"\\n\" ) )\n        {\n            lineCount++;\n        }\n    }\n\n    free( line );\n    fclose( fp );\n\n    return( lineCount );\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 3750554, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b5a74788d438f6150e6e2242f2520f47?s=128&d=identicon&r=PG&f=1", "display_name": "John Nunley", "link": "https://stackoverflow.com/users/3750554/john-nunley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 5, "score": -1, "last_activity_date": 1493246263, "creation_date": 1493163338, "last_edit_date": 1493246263, "question_id": 43622633, "link": "https://stackoverflow.com/questions/43622633/how-to-count-newlines-within-a-file-but-not-counting-lines-that-are-just-newlin", "title": "How to count newlines within a file, but not counting lines that are just newlines?", "body": "<p>In order to properly parse input, I need to be able to count the number of lines in a file. However, I do not want to count lines that are just newlines. To help with this, I created the following function:</p>\n\n<pre><code>int countLinesInFile(char *filename) {\n  int newlines = 0;\n\n  if (access(filename,F_OK) != -1)\n    error(\"File not found\",0);\n\n  FILE *input = fopen(filename,\"r\");\n\n  int size = 256 * 4;\n  char buffer[size];\n  while ((fgets(buffer,sizeof(buffer),input)) != EOF) {\n    printf(\"Read a string\");\n    if (buffer == \"\\n\")\n      continue;\n    newlines++;\n  }\n\n  fclose(input);\n  return newlines;\n}\n</code></pre>\n\n<p>At the top of the file, I have the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n</code></pre>\n\n<p>When I run the program and attempt to count the lines, it segmentation faults. Using valgrind, I can see the following:</p>\n\n<pre><code>==6632== Invalid read of size 4\n==6632==    at 0x4EA8E6B: fgets (in /usr/lib64/libc-2.24.so)\n==6632==    by 0x402219: countLinesInFile (in [executable])\n[other information about program, does not seem relevant]\n==6632==  Address 0x0 is not stack'd, malloc'd or (recently) free'd\n==6632== \n==6632== \n==6632== Process terminating with default action of signal 11 (SIGSEGV)\n==6632==  Access not within mapped region at address 0x0\n==6632==    at 0x4EA8E6B: fgets (in /usr/lib64/libc-2.24.so)\n==6632==    by 0x402219: countLinesInFile (in [executable])\n[other information about program, does not seem relevant]\n==6632==  If you believe this happened as a result of a stack\n==6632==  overflow in your program's main thread (unlikely but\n==6632==  possible), you can try to increase the size of the\n==6632==  main thread stack using the --main-stacksize= flag.\n==6632==  The main thread stack size used in this run was 8388608.\n==6632== \n==6632== HEAP SUMMARY:\n==6632==     in use at exit: 475 bytes in 16 blocks\n==6632==   total heap usage: 19 allocs, 3 frees, 3,075 bytes allocated\n==6632== \n==6632== LEAK SUMMARY:\n==6632==    definitely lost: 0 bytes in 0 blocks\n==6632==    indirectly lost: 0 bytes in 0 blocks\n==6632==      possibly lost: 0 bytes in 0 blocks\n==6632==    still reachable: 475 bytes in 16 blocks\n==6632==         suppressed: 0 bytes in 0 blocks\n==6632== Rerun with --leak-check=full to see details of leaked memory\n==6632== \n==6632== For counts of detected and suppressed errors, rerun with: -v\n==6632== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>I have attempted to put a line that says \"printf(\"Reading file\")\" at the start of the while loop. This code does not execute, and I believe that the fgets is the problem. Unfortunately, I do not know what this problem is.</p>\n\n<p>I have verified that the file I am trying to read does have the correct text in it, and is not empty.</p>\n\n<p>Is the function that I have created the correct method of this task? If so, what problem could I be having? How could I avoid this problem in the future?</p>\n\n<p>Update: This was really a stupid mistake on my part. I was running the program with Valgrind, which looks like it doesn't use the executable's directory, which meant it couldn't find the file. Thanks for helping.</p>\n"}, {"tags": ["c", "unix", "makefile", "linker"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 4, "creation_date": 1493162934, "post_id": 43622560, "comment_id": 74294198, "body": "I presume you want to link that library into an executable. Do you know how to do it manually on the command line? If so then it&#39;s the same command option in the Makefile. If not, then you need to learn that first. If you need help with a specific Makefile then you need to show what you have so far."}], "answers": [{"tags": [], "owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "is_accepted": false, "score": -1, "last_activity_date": 1558116992, "last_edit_date": 1558116992, "creation_date": 1493171659, "answer_id": 43623723, "question_id": 43622560, "link": "https://stackoverflow.com/questions/43622560/linking-a-file-in-makefile/43623723#43623723", "title": "Linking .a file in Makefile", "body": "<p>(Supposing mylib.a and mylib.h are on the same ../mylib/ path) </p>\n\n<pre><code>CC = gcc\nCFLAGS = -O3 -Wall\n\nLIB = mylib\nLIB_PATH = ../mylib/\n\nPROGRAM = myprogram\n...\n\nall:\n    ...\n    $(CC) $(CFLAGS) -I$(LIB_PATH) -L$(LIB_PATH) -o $(PROGRAM) main.c  -l$(LIB) `pkg-config ...`\n</code></pre>\n\n<p>Basically, you need set the include path to the .h file with -I, then -L for the lib path and -l to set the lib name.</p>\n"}], "owner": {"reputation": 77, "user_id": 1519226, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/874b80c1ed77d29f41746b295d4e8c39?s=128&d=identicon&r=PG", "display_name": "user1519226", "link": "https://stackoverflow.com/users/1519226/user1519226"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3059, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558116992, "creation_date": 1493162771, "question_id": 43622560, "link": "https://stackoverflow.com/questions/43622560/linking-a-file-in-makefile", "title": "Linking .a file in Makefile", "body": "<p>How can I add a .a library into my Makefile?</p>\n\n<p>For example, if I have ../mylib/mylib.a, what do I have to write into the Makefile in order for it to include all the code in mylib.a?</p>\n\n<p>Sorry, Makefiles are very new to me.  Thanks for the help!</p>\n"}, {"tags": ["c", "arm"], "comments": [{"owner": {"reputation": 2688, "user_id": 990142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c17dc83972d868e5a4a065549967ee2?s=128&d=identicon&r=PG", "display_name": "rwols", "link": "https://stackoverflow.com/users/990142/rwols"}, "edited": false, "score": 1, "creation_date": 1493161094, "post_id": 43622253, "comment_id": 74293631, "body": "I&#39;m kind of confused by the naming of the member variables. Are bit1, .., bit4 supposed to be exactly one bit in size, or is bit1 supposed to be 3 bits in size, bit2 4 bits in size, bit3 5 bits in size and bit4 6 bits in size?"}, {"owner": {"reputation": 29, "user_id": 7922066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b21fed5fc6fa0925b8ddae402d5cdbc?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Yu", "link": "https://stackoverflow.com/users/7922066/steve-yu"}, "reply_to_user": {"reputation": 2688, "user_id": 990142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c17dc83972d868e5a4a065549967ee2?s=128&d=identicon&r=PG", "display_name": "rwols", "link": "https://stackoverflow.com/users/990142/rwols"}, "edited": false, "score": 1, "creation_date": 1493162986, "post_id": 43622253, "comment_id": 74294214, "body": "Sorry for confusing. It just a name. bit1 has 3 bits, bit2 4 bits. Something like that. I changed member&#39;s name."}, {"owner": {"reputation": 2688, "user_id": 990142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c17dc83972d868e5a4a065549967ee2?s=128&d=identicon&r=PG", "display_name": "rwols", "link": "https://stackoverflow.com/users/990142/rwols"}, "edited": false, "score": 1, "creation_date": 1493163088, "post_id": 43622253, "comment_id": 74294241, "body": "Then I believe <a href=\"http://en.cppreference.com/w/c/types/offsetof\" rel=\"nofollow noreferrer\">offsetof</a> is what you are looking for."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 2, "creation_date": 1493163452, "post_id": 43622253, "comment_id": 74294338, "body": "offsetof gives byte offset not bit offset"}, {"owner": {"reputation": 2688, "user_id": 990142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c17dc83972d868e5a4a065549967ee2?s=128&d=identicon&r=PG", "display_name": "rwols", "link": "https://stackoverflow.com/users/990142/rwols"}, "edited": false, "score": 0, "creation_date": 1493163797, "post_id": 43622253, "comment_id": 74294409, "body": "Yes, it&#39;s just a building block to the solution, not the solution itself. You&#39;ll also have to add a little bit of bit fiddling."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 2688, "user_id": 990142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c17dc83972d868e5a4a065549967ee2?s=128&d=identicon&r=PG", "display_name": "rwols", "link": "https://stackoverflow.com/users/990142/rwols"}, "edited": false, "score": 2, "creation_date": 1493164062, "post_id": 43622253, "comment_id": 74294480, "body": "@rwols: C11 draft standard n1570: <i>7.19 Common definitions &lt;stddef.h&gt; 3 The macros are NULL which expands to an implementation-defined null pointer constant; and offsetof(type, member-designator) [...] (If the specified member is a bit-field, the behavior is undefined.)</i>"}, {"owner": {"reputation": 2688, "user_id": 990142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c17dc83972d868e5a4a065549967ee2?s=128&d=identicon&r=PG", "display_name": "rwols", "link": "https://stackoverflow.com/users/990142/rwols"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1493166441, "post_id": 43622253, "comment_id": 74295076, "body": "@EOF I guess I learned something today!"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493167492, "post_id": 43622824, "comment_id": 74295292, "body": "Interesting.  The <code>0b10000000</code> notation is a non-standard extension in C (C++ has standardized it, though).  Much more significantly, you have to have the <code>toto.c</code> reference to make this work, which means you can&#39;t do the job generically.  Your code works for <code>toto.c</code>; it has to be revised to set <code>toto.b</code> or <code>toto.a</code> .  But it is better than nothing, which is the alternative that the standard provides.  Bit fields are one of the most arcane parts of standard C, and almost all the behaviour is implementation defined."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493168876, "post_id": 43622824, "comment_id": 74295634, "body": "<code>(bytes * 8) + bits</code> is a little-endian byte, big endian bit  indexing.  I&#39;d favor a consistent endian numbering like little-little.  Bonus <code>0b10000000</code> --&gt; <code>1</code>"}], "tags": [], "owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "is_accepted": false, "score": 2, "last_activity_date": 1493167060, "last_edit_date": 1493167060, "creation_date": 1493164913, "answer_id": 43622824, "question_id": 43622253, "link": "https://stackoverflow.com/questions/43622253/how-to-get-the-bit-position-of-any-member-in-structure/43622824#43622824", "title": "How to get the bit position of any member in structure", "body": "<p>There is no standard way that I know of to do so, but it doesn't mean you can't find a solution.</p>\n\n<p>The following is not the prettiest code ever; it's a kind of hack to identify where the variable \"begins\" in memory. Please keep in mind that the following can give different results depending on the endianess:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct s_toto\n{\n  int a:2;\n  int b:3;\n  int c:3;    \n} t_toto;\n\nint\nmain()\n{\n  t_toto toto;\n  unsigned char *c;\n  int bytes;\n  int bits;\n\n  memset(&amp;toto, 0, sizeof(t_toto));\n  toto.c = 1;\n  c = (unsigned char *)&amp;toto;\n  for (bytes = 0; bytes &lt; (int)sizeof(t_toto); bytes++)\n    {\n      if (*c)\n        break;\n    }\n  for (bits = 0; bits &lt; 8; bits++)\n    {\n      if (*c &amp; 0b10000000)\n        break;\n      *c = (*c &lt;&lt; 1);\n    }\n  printf(\"position (bytes=%d, bits=%d): %d\\n\", bytes, bits, (bytes * 8) + bits);\n  return 0;\n}\n</code></pre>\n\n<p>What I do is that I initialize the whole structure to 0 and I set 1 as value of the variable I want to locate. The result is that only one bit is set to 1 in the structure. Then I read the memory byte per byte until I find one that's not zero. Once found, I can look at its bits until I find the one that's set.</p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 7922066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b21fed5fc6fa0925b8ddae402d5cdbc?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Yu", "link": "https://stackoverflow.com/users/7922066/steve-yu"}, "edited": false, "score": 0, "creation_date": 1493247580, "post_id": 43644442, "comment_id": 74340154, "body": "Thank you for your comment. The tool makes header files of hardware registers in my company. Usually, I define bit positions for bit fields which I really need. But everytime hardware register spec. is changed, it happens."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1493405185, "post_id": 43644442, "comment_id": 74420010, "body": "Then you probably don\u2019t care about portability and you might be able to find this information in your compiler ABI documentation."}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 1, "last_activity_date": 1493240472, "creation_date": 1493240472, "answer_id": 43644442, "question_id": 43622253, "link": "https://stackoverflow.com/questions/43622253/how-to-get-the-bit-position-of-any-member-in-structure/43644442#43644442", "title": "How to get the bit position of any member in structure", "body": "<p>There is no portable (aka standard C) way. But thinking outside the box, if you need full control or need this information badly, bitfields are the wrong approach. The proper solution is shifting and masking. Of course this is feasible only when you are in control of the source code.</p>\n"}], "owner": {"reputation": 29, "user_id": 7922066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b21fed5fc6fa0925b8ddae402d5cdbc?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Yu", "link": "https://stackoverflow.com/users/7922066/steve-yu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1118, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1493241226, "creation_date": 1493160685, "last_edit_date": 1493166297, "question_id": 43622253, "link": "https://stackoverflow.com/questions/43622253/how-to-get-the-bit-position-of-any-member-in-structure", "title": "How to get the bit position of any member in structure", "body": "<p>How can I get the bit position of any members in structure?</p>\n\n<p>In example></p>\n\n<pre><code>typedef struct BitExamStruct_\n{\n    unsigned int v1: 3;\n    unsigned int v2: 4;\n    unsigned int v3: 5;\n    unsigned int v4: 6;\n} BitExamStruct;\n</code></pre>\n\n<p>Is there any macro to get the bit position of any members like GetBitPos(v2, BitExamStruct)?</p>\n\n<p>I thought that compiler might know members' location based on bits length in the structure. So I want to know whether I can get it by using just a simple macro without running code.</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c", "enums"], "comments": [{"owner": {"reputation": 2475, "user_id": 6327365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vlpxf.png?s=128&g=1", "display_name": "grochmal", "link": "https://stackoverflow.com/users/6327365/grochmal"}, "edited": false, "score": 0, "creation_date": 1493161333, "post_id": 43622235, "comment_id": 74293714, "body": "I may be wrong but that&#39;s not how typedef works.  It is <code>colors_t</code> that becomes the type, not <code>enum colors_t</code>.  Just like with structs."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1493161346, "post_id": 43622235, "comment_id": 74293719, "body": "Note that should be <code>file3.c</code> or <code>main.c</code>, not <code>file3.h</code>. If you have function definitions in a file, it&#39;s probably not a header."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1493161548, "post_id": 43622235, "comment_id": 74293792, "body": "If you want to use both <code>enum colors_t</code> and <code>colors_t</code>, write: <code>typedef enum colors_t {     RED,     BLUE,     GREEN2, } colors_t;</code>.  Otherwise, choose one and stick with it."}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 5, "last_activity_date": 1493161293, "creation_date": 1493161293, "answer_id": 43622338, "question_id": 43622235, "link": "https://stackoverflow.com/questions/43622235/storage-size-of-isnt-known-enum/43622338#43622338", "title": "storage size of isn&#39;t known : enum", "body": "<p>The signature of <code>get_colors</code> should be...</p>\n\n<pre><code>void get_color(colors_t *col);\n</code></pre>\n\n<p>The type is <code>colors_t</code>. Not <code>enum colors_t</code>; there is no such type.</p>\n\n<hr>\n\n<p>I believe the problem is understanding how <code>typedef</code> works. <code>typedef</code> creates a name for a type.</p>\n\n<pre><code>typedef &lt;type&gt; &lt;alias&gt;;\n</code></pre>\n\n<p>For simple types, this is pretty straight-forward. This aliases <code>unsigned char</code> as <code>uint8_t</code>.</p>\n\n<pre><code>typedef unsigned char uint8_t;\n</code></pre>\n\n<p>For structs and enums it's easy to get confused.</p>\n\n<pre><code>typedef enum {\n    RED,\n    BLUE,\n    GREEN2,\n} colors_t;\n</code></pre>\n\n<p>The type is <code>enum { RED, BLUE, GREEN2 }</code>. The aliased name is <code>colors_t</code>. </p>\n\n<p>In this case, the type has no other name; it's an anonymous <code>enum</code> which can only be referenced by <code>colors_t</code>.</p>\n\n<p>You can give it a name.</p>\n\n<pre><code>typedef enum colors {\n    RED,\n    BLUE,\n    GREEN2,\n} colors_t;\n</code></pre>\n\n<p>Now the same type can be referred to as <code>enum colors</code> or <code>colors_t</code>.</p>\n\n<p>I recommend against doing this as it allows people to pierce the veil of encapsulation offered by a <code>typedef</code>. That is, if everyone uses <code>colors_t</code> you can change it in subtle ways behind the scenes.</p>\n"}, {"tags": [], "owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "is_accepted": false, "score": 1, "last_activity_date": 1493231592, "last_edit_date": 1493231592, "creation_date": 1493162903, "answer_id": 43622577, "question_id": 43622235, "link": "https://stackoverflow.com/questions/43622235/storage-size-of-isnt-known-enum/43622577#43622577", "title": "storage size of isn&#39;t known : enum", "body": "<p>simply your code change to:</p>\n\n<pre><code>typedef enum {\n  RED,\n  BLUE,\n  GREEN2,\n} colors_t;\n\nvoid get_color(colors_t *col)\n{\n    /// get_color body  \n}\n\nint main(int argc, char **argv)\n{\n     colors_t col;\n     get_color(&amp;col); \n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1537, "user_id": 968000, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/tU8sw.jpg?s=128&g=1", "display_name": "user968000", "link": "https://stackoverflow.com/users/968000/user968000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 43622338, "answer_count": 2, "score": 1, "last_activity_date": 1493231592, "creation_date": 1493160560, "question_id": 43622235, "link": "https://stackoverflow.com/questions/43622235/storage-size-of-isnt-known-enum", "title": "storage size of isn&#39;t known : enum", "body": "<p>I have an enum defined in file1.h. I want to refer this enum as an argument in another file file2.h without including file1.h. Now I have to call get_color() function from file3.h. I am getting two different types of error:</p>\n\n<ol>\n<li>passing argument 1 of 'get_color' from  incompatible pointer type [-Werror]</li>\n<li>Error 1 is resolved, but I get a different error: storage size of col isn't known.</li>\n</ol>\n\n<p>The only issue is I cannot include file1.h in file2.h. Please suggest how I could resolve the issue.</p>\n\n<p>file1.h</p>\n\n<pre><code>typedef enum {\n    RED,\n    BLUE,\n    GREEN2,\n} colors_t;\n</code></pre>\n\n<p>file2.h</p>\n\n<pre><code>void get_color(enum colors_t *col);\n</code></pre>\n\n<p>file3.h //option 1</p>\n\n<pre><code>#include \"file1.h\"\n#include \"file2.h\" \nint main()\n{\n     colors_t col;\n     get_color(&amp;col); //error: passing argument 1 of 'get_color' from   incompatible pointer type [-Werror]\n\n}\n</code></pre>\n\n<p>file3.h //option 2</p>\n\n<pre><code>#include \"file1.h\"\n#include \"file2.h\" \nint main()\n{\n     enum colors_t col;\n     get_color(&amp;col); //error: storage size of col isn't known.\n\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 3, "creation_date": 1493160571, "post_id": 43622198, "comment_id": 74293462, "body": "Neither of you actually sets <code>head</code> which makes me call B.S. that one of those is from your teacher. Anyway. Not clear what you are a) trying to do and b) what the question is."}, {"owner": {"reputation": 677, "user_id": 3785680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16e7953767467649c81b58fe9e5a9278?s=128&d=identicon&r=PG&f=1", "display_name": "Outshined", "link": "https://stackoverflow.com/users/3785680/outshined"}, "edited": false, "score": 0, "creation_date": 1493160878, "post_id": 43622198, "comment_id": 74293562, "body": "The only change you made is passing a pointer to a pointer instead of just a pointer? Or am I missing something? Can you elaborate why do you think your version is better? For me there isn&#39;t any performance boost and the code is sligly less readable."}, {"owner": {"reputation": 51, "user_id": 7448575, "user_type": "registered", "profile_image": "https://graph.facebook.com/368823430165541/picture?type=large", "display_name": "girdharshubham", "link": "https://stackoverflow.com/users/7448575/girdharshubham"}, "reply_to_user": {"reputation": 677, "user_id": 3785680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16e7953767467649c81b58fe9e5a9278?s=128&d=identicon&r=PG&f=1", "display_name": "Outshined", "link": "https://stackoverflow.com/users/3785680/outshined"}, "edited": false, "score": 0, "creation_date": 1493161118, "post_id": 43622198, "comment_id": 74293641, "body": "@Caribou you didn&#39;t miss anything. I just thought it would be better if I just passed the address, instead of a copy. That&#39;s how it works, doesn&#39;t it?"}, {"owner": {"reputation": 677, "user_id": 3785680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16e7953767467649c81b58fe9e5a9278?s=128&d=identicon&r=PG&f=1", "display_name": "Outshined", "link": "https://stackoverflow.com/users/3785680/outshined"}, "edited": false, "score": 0, "creation_date": 1493161536, "post_id": 43622198, "comment_id": 74293786, "body": "@ShubhamGirdhar Your teacher does exactly that. He declares node pointer called head. This node pointer holds only the adress to an actual variable, not a value itself. Thus, when you pass a pointer to a function you pass a copy of a pointer, not a copy of an object itself. Your version goes one step further, and passes an adress to that pointer (i. e. a pointer to a pointer to a variable)"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1493161592, "post_id": 43622198, "comment_id": 74293807, "body": "@ShubhamGirdhar <code>node head</code> would pass a copy. <code>node *head</code> passes a pointer. <code>node **head</code> passes a pointer to a pointer (a double pointer). Basically, <code>type *</code> is a pointer to <code>type</code>. Double pointers have their uses, this isn&#39;t one of them. The comment &quot;//copy of *head passed&quot; is incorrect, or very misleading, it&#39;s passing a pointer; this is why comments explaining what can be read from the code are typically avoided, comments explain <i>why</i> not the <i>what</i>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493161889, "post_id": 43622198, "comment_id": 74293902, "body": "Note that the dot <code>.</code> and arrow <code>-&gt;</code> operators bind very tightly and should never have spaces around them."}, {"owner": {"reputation": 51, "user_id": 7448575, "user_type": "registered", "profile_image": "https://graph.facebook.com/368823430165541/picture?type=large", "display_name": "girdharshubham", "link": "https://stackoverflow.com/users/7448575/girdharshubham"}, "reply_to_user": {"reputation": 677, "user_id": 3785680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16e7953767467649c81b58fe9e5a9278?s=128&d=identicon&r=PG&f=1", "display_name": "Outshined", "link": "https://stackoverflow.com/users/3785680/outshined"}, "edited": false, "score": 0, "creation_date": 1493162000, "post_id": 43622198, "comment_id": 74293928, "body": "@Caribou In mine, I passed the address of the pointer to the function and then dereferenced it and then passed the dereferenced pointer to function searchUnsorted(). I believe that made 2 copies in total of the pointer. Also, in my teacher&#39;s, 3 copies were made. Could you look into it again, and explain if what I explained matches what I wrote?"}, {"owner": {"reputation": 51, "user_id": 7448575, "user_type": "registered", "profile_image": "https://graph.facebook.com/368823430165541/picture?type=large", "display_name": "girdharshubham", "link": "https://stackoverflow.com/users/7448575/girdharshubham"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493162077, "post_id": 43622198, "comment_id": 74293953, "body": "@JonathanLeffler I will keep that in mind, thanks!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493162102, "post_id": 43622198, "comment_id": 74293969, "body": "As far as I&#39;m concerned, the first code is more nearly correct than the second, but neither is correct.  The second code might be OK if the function was changed to <code>node *insertAfter(node *head, int item, int after)</code> and it was called like <code>head = insertAfter(head, item, after);</code> \u2014 then it could work.  You&#39;d return the value in <code>head</code> unless you created it.  Note that you&#39;d need to initialize <code>node *head = NULL;</code> in <code>main()</code> \u2014 in both versions of the code."}, {"owner": {"reputation": 677, "user_id": 3785680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16e7953767467649c81b58fe9e5a9278?s=128&d=identicon&r=PG&f=1", "display_name": "Outshined", "link": "https://stackoverflow.com/users/3785680/outshined"}, "edited": false, "score": 0, "creation_date": 1493163138, "post_id": 43622198, "comment_id": 74294255, "body": "@ShubhamGirdhar Your code and your teachers code make exactly same number of copies. The difference is level of indirection. Your code doesn&#39;t imply need for this indirection. You would use a pointer to a pointer if you would like to change the passed object. //EDIT Stephan Lechner explained that very well :)"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1493163613, "post_id": 43622198, "comment_id": 74294369, "body": "passing in <code>node **head</code> strongly suggests that you intend to update the callers <code>node * head</code>. Which in fact you are not. So teacher is correct"}], "answers": [{"tags": [], "owner": {"reputation": 104, "user_id": 7903823, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U8Q4f1UutTU/AAAAAAAAAAI/AAAAAAAAA3E/kRFjFbAQMw4/photo.jpg?sz=128", "display_name": "Prashanth Kondedath", "link": "https://stackoverflow.com/users/7903823/prashanth-kondedath"}, "is_accepted": false, "score": 0, "last_activity_date": 1493161859, "creation_date": 1493161859, "answer_id": 43622432, "question_id": 43622198, "link": "https://stackoverflow.com/questions/43622198/what-would-be-the-better-way/43622432#43622432", "title": "What would be the better way?", "body": "<p>You're teacher is trying to pass by value and you're trying to pass by reference. In my opinion your approach is better than teacher's. But it does vary from what you want to do with.\nIf you want your head pointer to be updated during the callee function  then pass by reference is good. By this any changes done on head pointer memory location by the callee is updated also in the main.</p>\n\n<p>Suppose head -> 0xabc123 ( Memory address of head) and content 0xadf432</p>\n\n<p>Your teacher's theory</p>\n\n<p>head of insertAfter() stores content of head(of main) ie 0xadf432 . You can play around with the nodes, But you cannot modify the content of head(of main) ie cant change the value of 0xabc123 to something else.</p>\n\n<p>But in your approach you could do this. Thus able to change the head(of main) content ( problem after your function operations) your head may point to new node.........</p>\n"}, {"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 2, "last_activity_date": 1493162921, "creation_date": 1493162921, "answer_id": 43622580, "question_id": 43622198, "link": "https://stackoverflow.com/questions/43622198/what-would-be-the-better-way/43622580#43622580", "title": "What would be the better way?", "body": "<p>I think the question should be \"when should I pass a pointer (i.e. your teacher's version), and when should I pass a pointer to a pointer (i.e. your version)\".</p>\n\n<p>In the context of linked list, passing a pointer to a pointer makes sense if the function may exchange the head of the list. Consider, for example, a function called <code>insertAtFront(node**head, int item)</code>, which will insert a value <em>before</em> the current head and therefore the caller has to be informed about the \"new\" head.</p>\n\n<pre><code>insertAtFront(node**head, int item) {\n  node *prevHead = *head; \n  *head = createNode(item);  // assign *head a new value; caller's pointer value will change\n  *head-&gt;next = prevHead;\n}\ninsertAtFrontWrong(node*head, int item) {\n  node *prevHead = head; \n  head = createNode(item);  // only local variable head will get new value; caller's value will not change\n  head-&gt;next = prevHead;\n}\n\nint main() {\n  node *main_head = createNode(10);\n  insertAtFront(&amp; main_head,20); // OK; afterwards main_head will point to the new head\n  insertAtFrontWrong(main_head,30); // Not OK; value of main_head will remain as is\n}\n</code></pre>\n\n<p>However, if a function will by definition not exchange the head, it is not necessary to pass a pointer to a pointer; a \"plain\" pointer is sufficient:</p>\n\n<pre><code>void insertAfterSuperflousIndirection(node **head, int item, int after) {\n   // use (*head)-&gt;... to traverse/change successors\n   // *head will, however, never be set to a new value, so indirection is superfluous\n}\n\nvoid insertAfter(node *head, int item, int after) {\n   // use head-&gt;... to traverse/change successors\n}\n</code></pre>\n\n<p>So in your case, if \"insertAfter\" will never exchange the head, I'd prefer the teacher's version.</p>\n"}], "owner": {"reputation": 51, "user_id": 7448575, "user_type": "registered", "profile_image": "https://graph.facebook.com/368823430165541/picture?type=large", "display_name": "girdharshubham", "link": "https://stackoverflow.com/users/7448575/girdharshubham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1493166006, "accepted_answer_id": 43622580, "answer_count": 2, "score": 0, "last_activity_date": 1493162921, "creation_date": 1493160355, "last_edit_date": 1493160505, "question_id": 43622198, "link": "https://stackoverflow.com/questions/43622198/what-would-be-the-better-way", "closed_reason": "Not suitable for this site", "title": "What would be the better way?", "body": "<p>This is what I believe would be the better way.</p>\n\n<pre><code>int main()\n{\n\n    node *head;\n    insertAfter(&amp;head, 14, 12);\n}\n\nvoid insertAfter(node **head, int item, int after)\n{\n\n    node *ptr, *loc;\n\n    loc = searchUnsorted(*head, after); //copy of *head passed \n\n    if(loc == (node *) NULL)\n            return;\n    ptr = (node*)malloc(sizeof(node));\n\n    ptr -&gt; info = item;\n    ptr -&gt; next = loc -&gt; next;\n    loc -&gt; next = ptr;\n}\n</code></pre>\n\n<p>And this is what my teacher thinks would be it.</p>\n\n<pre><code>int main()\n{\n\n    node *head;\n    insertAfter(head, 14, 12);\n}\nvoid insertAfter(node *head, int item, int after)\n{\n\n    node *ptr, *loc;\n\n    loc = searchUnsorted(head, after); //copy of *head passed \n\n    if(loc == (node *) NULL)\n            return;\n    ptr = (node*)malloc(sizeof(node));\n\n    ptr -&gt; info = item;\n    ptr -&gt; next = loc -&gt; next;\n    loc -&gt; next = ptr;\n}\n</code></pre>\n"}]