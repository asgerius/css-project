[{"tags": ["c", "char", "int", "ascii"], "comments": [{"owner": {"reputation": 3076, "user_id": 2112731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0cd41c5afcd4701fbb21ca081bcb0c?s=128&d=identicon&r=PG", "display_name": "DoxyLover", "link": "https://stackoverflow.com/users/2112731/doxylover"}, "edited": false, "score": 3, "creation_date": 1424303882, "post_id": 28596288, "comment_id": 45499095, "body": "Use <code>unsigned char</code> instead of <code>char</code> and <code>%u</code> instead of <code>%d</code>."}, {"owner": {"reputation": 17, "user_id": 4517413, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/790cf126150c0989bf3a39bcbf116d2e?s=128&d=identicon&r=PG&f=1", "display_name": "Dro", "link": "https://stackoverflow.com/users/4517413/dro"}, "reply_to_user": {"reputation": 3076, "user_id": 2112731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0cd41c5afcd4701fbb21ca081bcb0c?s=128&d=identicon&r=PG", "display_name": "DoxyLover", "link": "https://stackoverflow.com/users/2112731/doxylover"}, "edited": false, "score": 0, "creation_date": 1424304012, "post_id": 28596288, "comment_id": 45499126, "body": "@DoxyLover so y is unsigned?"}, {"owner": {"reputation": 3076, "user_id": 2112731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0cd41c5afcd4701fbb21ca081bcb0c?s=128&d=identicon&r=PG", "display_name": "DoxyLover", "link": "https://stackoverflow.com/users/2112731/doxylover"}, "edited": false, "score": 0, "creation_date": 1424304135, "post_id": 28596288, "comment_id": 45499164, "body": "<code>signed char</code> has a range of -128 to +127. Obviously, you cannot represent 255 or 223 in this range. <code>unsigned char</code> has a range of 0 to 255."}, {"owner": {"reputation": 17, "user_id": 4517413, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/790cf126150c0989bf3a39bcbf116d2e?s=128&d=identicon&r=PG&f=1", "display_name": "Dro", "link": "https://stackoverflow.com/users/4517413/dro"}, "reply_to_user": {"reputation": 3076, "user_id": 2112731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0cd41c5afcd4701fbb21ca081bcb0c?s=128&d=identicon&r=PG", "display_name": "DoxyLover", "link": "https://stackoverflow.com/users/2112731/doxylover"}, "edited": false, "score": 0, "creation_date": 1424304425, "post_id": 28596288, "comment_id": 45499250, "body": "@DoxyLover thank you, I&#39;m learning as I go. You help me solve the problem inside my function but what about it when I call it in my main? Thank you so much for your time."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1424304702, "post_id": 28596288, "comment_id": 45499348, "body": "Same issue: since invertChar is a signed char, it will be sign-extended to a negative integer, which, when printed with %u, will result in 2^32-x."}, {"owner": {"reputation": 17, "user_id": 4517413, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/790cf126150c0989bf3a39bcbf116d2e?s=128&d=identicon&r=PG&f=1", "display_name": "Dro", "link": "https://stackoverflow.com/users/4517413/dro"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1424305175, "post_id": 28596288, "comment_id": 45499515, "body": "@LeeDanielCrocker invertChar is an unsigned char. isnt it? and the help variable is also unsigned."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1424305292, "post_id": 28596288, "comment_id": 45499550, "body": "Sorry, I mean the invertedBuffer[] array. It&#39;s still signed."}, {"owner": {"reputation": 17, "user_id": 4517413, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/790cf126150c0989bf3a39bcbf116d2e?s=128&d=identicon&r=PG&f=1", "display_name": "Dro", "link": "https://stackoverflow.com/users/4517413/dro"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1424305570, "post_id": 28596288, "comment_id": 45499657, "body": "@LeeDanielCrocker Oh, thank you very much! I forgot that must be changed as well! my issue is officially closed. Is it possible you post this as an answer, I&#39;ll give you my upvote. :D"}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1424305646, "post_id": 28596288, "comment_id": 45499678, "body": "One note: The standard makes no guarantees that the character set is ASCII. It <i>usually</i> is nowadays, at least on consumer hardware; certain IBM mainframes use EBCDIC, for example. There are pretty much only two guarantees in the standard: 1) <code>&#39;\\0&#39;</code> ends the string, and 2) <code>0123456789</code> are together in a sequence."}, {"owner": {"reputation": 17, "user_id": 4517413, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/790cf126150c0989bf3a39bcbf116d2e?s=128&d=identicon&r=PG&f=1", "display_name": "Dro", "link": "https://stackoverflow.com/users/4517413/dro"}, "reply_to_user": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1424310364, "post_id": 28596288, "comment_id": 45501104, "body": "@Tim\u010cas what do you mean with &#39;standard&#39;??"}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1424350610, "post_id": 28596288, "comment_id": 45517993, "body": "@Dro: Any C standard. C89, C99 or C11. In other words, you cannot rely on the strings to be in a specific encoding (assuming you&#39;re writing portable code)."}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1439896851, "creation_date": 1439896851, "answer_id": 32070980, "question_id": 28596288, "link": "https://stackoverflow.com/questions/28596288/manipulating-a-char-by-ascii-number/32070980#32070980", "title": "Manipulating a char by ascii number", "body": "<p>since the invertedBuffer[] array is a signed char, it will be sign-extended to a negative integer, which, when printed with %u, will result in 2^32-x. \u2013  Lee Daniel Crocker</p>\n"}], "owner": {"reputation": 17, "user_id": 4517413, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/790cf126150c0989bf3a39bcbf116d2e?s=128&d=identicon&r=PG&f=1", "display_name": "Dro", "link": "https://stackoverflow.com/users/4517413/dro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439896851, "creation_date": 1424303795, "last_edit_date": 1424304371, "question_id": 28596288, "link": "https://stackoverflow.com/questions/28596288/manipulating-a-char-by-ascii-number", "title": "Manipulating a char by ascii number", "body": "<p>I want to change a char using ascii values.</p>\n\n<p>So far I have this:</p>\n\n<pre><code>unsigned char invertChar(char c){\n\n    unsigned char y;\n    printf(\"255 - %d=\", c);\n    y = 255 - (int)c;\n    printf(\"%d\\n\", y);\n    return y;\n\n}\n</code></pre>\n\n<p>////EDIT.</p>\n\n<p>So far so good but I've encountered another problem.</p>\n\n<pre><code>int main(void){\nchar source[10]; //Has info.\nchar invertedBuffer[10];\nunsigned char help;\nint counter;\n\n\nfor(counter = 0; counter&lt;10; counter++){\nhelp = invertChar(source[counter]);\n invertedBuffer[counter] = help;\n  printf(\"Inverted Char: %u\\n\", invertedBuffer[counter]);\n\n}\n</code></pre>\n\n<p>The problem is that when I do printf, I get this(on all of my prints):</p>\n\n<pre><code>Inverted Char: 4294967194\n</code></pre>\n\n<p>Thank you for your time and expertise. </p>\n"}, {"tags": ["c", "matrix"], "comments": [{"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1424301963, "post_id": 28595947, "comment_id": 45498461, "body": "Just because it works on your particular system, when compiled with your particular compiler, using your particular compiler flags, does not mean it works in general. You&#39;re actually invoking undefined behavior."}, {"owner": {"reputation": 47, "user_id": 4530709, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32bd5f38d43f751120562ac59af3c7bf?s=128&d=identicon&r=PG&f=1", "display_name": "WIlopu", "link": "https://stackoverflow.com/users/4530709/wilopu"}, "reply_to_user": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1424302114, "post_id": 28595947, "comment_id": 45498515, "body": "@Tim: The thing is, it prints the exact values no matter what they are and how I change them. I noticed this because it actually literally breaks my algorithm, which is otherwise correct. In fact, I check whether my index is still within the range, but since it gets reinitialized to within the range the moment it gets out of it, there&#39;s no stopping it &#39;til the end.  ryyker: I did, and the result is the same."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 2, "creation_date": 1424302177, "post_id": 28595947, "comment_id": 45498531, "body": "This could be useful for your question: <a href=\"http://stackoverflow.com/questions/6290956/one-dimensional-access-to-a-multidimensional-array-well-defined-c\" title=\"one dimensional access to a multidimensional array well defined c\">stackoverflow.com/questions/6290956/&hellip;</a>. I&#39;m not sure which guarantees about memory storage of multidimensional arrays hold under C standard but you can take a look for yourself. In anycase it&#39;s not a matter of &quot;coordinate adjusting&quot;, fact is that the array is stored in contiguous memory and since compiler doesn&#39;t check for bounds what happens is that <code>&amp;mx[0][4] == &amp;mx[1][0]</code> and so on."}, {"owner": {"reputation": 47, "user_id": 4530709, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32bd5f38d43f751120562ac59af3c7bf?s=128&d=identicon&r=PG&f=1", "display_name": "WIlopu", "link": "https://stackoverflow.com/users/4530709/wilopu"}, "reply_to_user": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 0, "creation_date": 1424302483, "post_id": 28595947, "comment_id": 45498634, "body": "@Jack: Could this be potentially exploited or is it completely unsafe to exploit it?"}, {"owner": {"reputation": 9289, "user_id": 2572431, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2ad85f81981e5365a21d94114f3926b2?s=128&d=identicon&r=PG", "display_name": "augurar", "link": "https://stackoverflow.com/users/2572431/augurar"}, "edited": false, "score": 0, "creation_date": 1424302986, "post_id": 28595947, "comment_id": 45498800, "body": "See also <a href=\"https://stackoverflow.com/questions/7269099/may-i-treat-a-2d-array-as-a-contiguous-1d-array\" title=\"may i treat a 2d array as a contiguous 1d array\">stackoverflow.com/questions/7269099/&hellip;</a>"}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1424305366, "post_id": 28595947, "comment_id": 45499574, "body": "I hear (relatively) recent changes in GCC that require stricter aliasing break this treatment of 2D arrays though; which was a point of contention at one point between GCC devs (claiming that it was UB anyways, and they were right) and C devs (claiming strict aliasing requirements like that have no place in a language like C, and they may have <i>also</i> been right). Of course, the breaking isn&#39;t certain, and it might &quot;randomly&quot; pop up, depending on whether the compiler decides to use a specific optimization."}], "answers": [{"comments": [{"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1424305442, "post_id": 28596103, "comment_id": 45499611, "body": "See my 2nd comment on the question itself (the &quot;I hear (relatively) recent changes in GCC&quot; one) as to why the compiler <i>might</i> care nevertheless."}], "tags": [], "owner": {"reputation": 154, "user_id": 4132527, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OH-FBOU21V8/AAAAAAAAAAI/AAAAAAAAABU/fStdEejMaNo/photo.jpg?sz=128", "display_name": "Diogo Pinto", "link": "https://stackoverflow.com/users/4132527/diogo-pinto"}, "is_accepted": false, "score": 1, "last_activity_date": 1424302752, "creation_date": 1424302752, "answer_id": 28596103, "question_id": 28595947, "link": "https://stackoverflow.com/questions/28595947/matrix-indexs-automatic-update/28596103#28596103", "title": "Matrix index&#39;s automatic update?", "body": "<p>In reality the C multi-dimensional arrays defined on declaration (and not product of dynamic memory allocation) are constituted by sequential rows in memory. So, </p>\n\n<pre><code>mx[0]\n</code></pre>\n\n<p>is the base address of <code>mx</code> array (same as <code>mx</code> alone). The formula to access memory position is </p>\n\n<pre><code>row_index * nr_columns + column_index\n</code></pre>\n\n<p>(you can easily understand why both ways to access this array are the same).</p>\n\n<p>As it was said, although what you are doing is undefined behaviour, the compiler simply doesn't care and let you break things if you want.</p>\n"}], "owner": {"reputation": 47, "user_id": 4530709, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32bd5f38d43f751120562ac59af3c7bf?s=128&d=identicon&r=PG&f=1", "display_name": "WIlopu", "link": "https://stackoverflow.com/users/4530709/wilopu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424302998, "creation_date": 1424301904, "question_id": 28595947, "link": "https://stackoverflow.com/questions/28595947/matrix-indexs-automatic-update", "title": "Matrix index&#39;s automatic update?", "body": "<p>I've got a 4x4 matrix and do stuff on it. After some tests, I was under the impression that the first coordinate is automatically incremented/decremented depending on the second's value, even though that seemed impossible. In order to make it clear, I ran the most basic test: printing.</p>\n\n<p>To my surprise, it turns out that the (first) coordinate is kinda sorta automatically adjusted depending on the second's value, that is, the following code prints in one line all the matrix's elements with no segfault whatsoever:</p>\n\n<pre><code>for (int j = 0; j &lt; 16; j++)\n    printf(\"%d \", mx[0][j])\n</code></pre>\n\n<p>The first thing my mind went off to was a potential optimization the compiler does, but the result was the same with the most basic settings.</p>\n\n<p>Please explain what's going on.</p>\n"}, {"tags": ["c", "linker", "arm", "microcontroller"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4581735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b6234fa343e46875c1c9f35038e1e15?s=128&d=identicon&r=PG&f=1", "display_name": "GKu", "link": "https://stackoverflow.com/users/4581735/gku"}, "edited": false, "score": 0, "creation_date": 1424304771, "post_id": 28596365, "comment_id": 45499368, "body": "Sorry that was a typo while trying to make post look pretty. I am using Keil&#39;s editor which does dynamic syntax checking, and macro expansion is correct."}], "tags": [], "owner": {"reputation": 7207, "user_id": 410847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a354e99dd64adf823aa72c4ee22a1fc?s=128&d=identicon&r=PG", "display_name": "Turbo J", "link": "https://stackoverflow.com/users/410847/turbo-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1424304310, "creation_date": 1424304310, "answer_id": 28596365, "question_id": 28595932, "link": "https://stackoverflow.com/questions/28595932/redefine-a-weak-irq-handler-using-linker-directives-macros-or-any-other-trick/28596365#28596365", "title": "Redefine a weak IRQ handler using linker directives/macros or any other trick", "body": "<p>When designing macros, you might want to look at the preprocessors output, e.g. with <code>gcc -E</code>.</p>\n\n<p>Then you could have spotted the error:</p>\n\n<p><code>#define IRQH() MAKE_IRQH(x)</code> </p>\n\n<p>shoud actually be:\n<code>#define IRQH(x) MAKE_IRQH(x)</code> </p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4581735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b6234fa343e46875c1c9f35038e1e15?s=128&d=identicon&r=PG&f=1", "display_name": "GKu", "link": "https://stackoverflow.com/users/4581735/gku"}, "is_accepted": false, "score": 1, "last_activity_date": 1424338510, "creation_date": 1424338510, "answer_id": 28602858, "question_id": 28595932, "link": "https://stackoverflow.com/questions/28595932/redefine-a-weak-irq-handler-using-linker-directives-macros-or-any-other-trick/28602858#28602858", "title": "Redefine a weak IRQ handler using linker directives/macros or any other trick", "body": "<p>I was using same UART in different places, mistake on my part. It works now.</p>\n"}], "owner": {"reputation": 11, "user_id": 4581735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b6234fa343e46875c1c9f35038e1e15?s=128&d=identicon&r=PG&f=1", "display_name": "GKu", "link": "https://stackoverflow.com/users/4581735/gku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1424338510, "creation_date": 1424301835, "last_edit_date": 1424304813, "question_id": 28595932, "link": "https://stackoverflow.com/questions/28595932/redefine-a-weak-irq-handler-using-linker-directives-macros-or-any-other-trick", "title": "Redefine a weak IRQ handler using linker directives/macros or any other trick", "body": "<p>Environment - KEIL ARMcc v5.05 compiler, ARMlink v5.05 linker for LPC1769</p>\n\n<p>I asked this question on some other forums too, if this looks familiar.\nI want to create a base project which can be reused for same or similar\nprocessors.I am trying to create interrupt handlers which can be defined/declared by a macro and can over-ride the default weak definition.</p>\n\n<p>For. e.g I want to write DBG port handler but I want the next person to\nchose what UART he wants by just changing a macro in a  header file.</p>\n\n<p>/* The following macro will create text void UART0_IRQhandler */</p>\n\n<p><code>#define DBG_UART UART0\n #define MAKE_IRQH(x) void x##_IRQHandler(void)\n #define IRQH(x) MAKE_IRQH(x)</code>   </p>\n\n<p>So in my dbg.c file I write</p>\n\n<pre><code>IRQH(DBG_UART){\n/*....... UART handling stuff ....*/ \n}\n</code></pre>\n\n<p>My intention is that next person can take this project and just change say\nUART0 to UART1 and won't need to change dbg.c file.</p>\n\n<p>The above thing doesn't work, and my code still hits default weak handler as\nthough void UART0_IRQhandler has not been defined.\nDo you guys see any other way of accomplishing this?</p>\n"}, {"tags": ["c", "gcc", "integer", "character", "variadic-functions"], "comments": [{"owner": {"reputation": 20231, "user_id": 1342730, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/36543a7316596ec6e930bc8c996bf14b?s=128&d=identicon&r=PG", "display_name": "mathematician1975", "link": "https://stackoverflow.com/users/1342730/mathematician1975"}, "edited": false, "score": 0, "creation_date": 1424301368, "post_id": 28595787, "comment_id": 45498235, "body": "As far as I recall, char <b>literals</b> (that you are passing) are actually stored as int types in C. If this is wrong I am sure someone will correct me."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1424301460, "post_id": 28595787, "comment_id": 45498259, "body": "Yes, <code>&#39;A&#39;</code> is an <code>int</code>. Also, <a href=\"http://stackoverflow.com/questions/1255775/default-argument-promotions-in-c-function-calls\" title=\"default argument promotions in c function calls\">stackoverflow.com/questions/1255775/&hellip;</a>"}, {"owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1424303285, "post_id": 28595787, "comment_id": 45498908, "body": "@LeeDanielCrocker Thanks for the link. Will go through it."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1424301984, "post_id": 28595844, "comment_id": 45498467, "body": "But even if the extra arguments were <code>char a = &#39;A&#39;;</code> and <code>display(2, 3, a, a, a)</code>, the values would be passed as <code>int</code>, not <code>char</code>, because of <i>default argument promotions</i> (6.5.2.2 Function calls, para 7 in the C11 standard)."}, {"owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "edited": false, "score": 0, "creation_date": 1424302928, "post_id": 28595844, "comment_id": 45498787, "body": "@iharob yea checked it. But after that i had a question like , &quot;If I pass a char to a function and store it in a <b>char</b> variable in called function, how is it possible ?  int needs 4 bytes ?  char has 1 byte ? &quot; But I again thought, &quot;hold on, chars are of 1 byte so they can take a value only upto 2 (pow)8 - 1 , so if I pass an integer of a value which i equal or less than 2(pow)8 - 1 , then of course I can store that in a <b>char</b> variable .&quot; Is my understanding right ?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "edited": false, "score": 0, "creation_date": 1424303344, "post_id": 28595844, "comment_id": 45498928, "body": "@1Byn Yes, it&#39;s right. If you pass a larger value you will have problems though. But as long as the value only needs 1 byte, there will be no problem."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 2, "last_activity_date": 1424302924, "last_edit_date": 1495542026, "creation_date": 1424301378, "answer_id": 28595844, "question_id": 28595787, "link": "https://stackoverflow.com/questions/28595787/are-characters-passed-as-integers-to-called-functions/28595844#28595844", "title": "Are characters passed as integers to called functions?", "body": "<p>Yes type of <code>'A'</code> is <code>int</code>, try this</p>\n\n<pre><code>printf(\"typeof('A') == typeof(int) -&gt; %s\\n\", \n         (sizeof('A') == sizeof(int)) ? \"YES\" : \"NO\");\n</code></pre>\n\n<p>and check it yourself.</p>\n\n<p><strong>Edit</strong>: <br>According to <a href=\"https://stackoverflow.com/users/15168/jonathan-leffler\">Jonathan Leffler</a>'s comment the warning would be issued even if you did this</p>\n\n<pre><code>char a = 'A';\n</code></pre>\n\n<p>and then passed <code>a</code>, because it will be anyway promoted to<code>int</code>, so it means that</p>\n\n<pre><code>int arg = va_arg(ptr, int);\n</code></pre>\n\n<p>is always correct, the mentioned part of the standard in the comment says the following</p>\n\n<p><strong>&sect;6.5.2.2</strong></p>\n\n<blockquote>\n  <p><strong>7</strong>. If the expression that denotes the called function has a type that does include a prototype,\n  the arguments are implicitly converted, as if by assignment, to the types of the\n  corresponding parameters, taking the type of each parameter to be the unqualified version\n  of its declared type. The ellipsis notation in a function prototype declarator causes\n  argument type conversion to stop after the last declared parameter. The default argument\n  promotions are performed on trailing arguments.</p>\n</blockquote>\n"}], "owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 28595844, "answer_count": 1, "score": 0, "last_activity_date": 1424302924, "creation_date": 1424301169, "last_edit_date": 1424301445, "question_id": 28595787, "link": "https://stackoverflow.com/questions/28595787/are-characters-passed-as-integers-to-called-functions", "title": "Are characters passed as integers to called functions?", "body": "<p>I wrote below C program to call function with variable number of arguments.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdarg.h&gt;\n\nvoid display(int, int, ...);\n\nint main()\n{\n    display(1,5,1,2,3,4,5);\n    display(2,3,'A','B','C');\n    printf(\"\\n\");\n    return 0;\n}\n\nvoid display(int type, int tot_num, ...)\n{\n    int i, j;\n    char c;\n\n    va_list ptr;\n    va_start (ptr, tot_num);\n\n    switch(type)\n    {\n            case 1:\n            for (j=0; j&lt;tot_num; j++)\n            {\n                    i = va_arg (ptr, int);\n                    printf(\"%d \",i);\n\n            }\n            break;\n\n            case 2:\n            for (j=0; j&lt;tot_num; j++)\n            {\n                    c = va_arg(ptr, char);\n                    printf(\"%c \",c);\n            }\n    }\n}\n</code></pre>\n\n<p>However when I compile the program i get below warning from gcc.\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>-bash-4.1$ gcc varArg3.c\nvarArg3.c: In function \u00e2display\u00e2:\nvarArg3.c:41: warning: \u00e2char\u00e2 is promoted to \u00e2int\u00e2 when passed through \u00e2...\u00e2\nvarArg3.c:41: note: (so you should pass \u00e2int\u00e2 not \u00e2char\u00e2 to \u00e2va_arg\u00e2)\nvarArg3.c:41: note: if this code is reached, the program will abort\n-bash-4.1$\n</code></pre>\n\n<p>Line 41 is <code>c = va_arg(ptr, char);</code></p>\n\n<p>When I read the man 3 page for va_arg it was mentioned as below:</p>\n\n<p><em>If there is no next argument, or if type is not compatible with the type of       the actual next argument (as promoted according to the default argument promotions), random errors will occur.</em></p>\n\n<p>When I read this, I was thinking that <code>c = va_arg(ptr, char);</code> is correct because, the data in the variable argument list were <strong>characters</strong> . However above warning by gcc suggest that variable arguments passed are not really characters but integers. </p>\n\n<p>As suggested by gcc, I change it to <code>c = va_arg(ptr, int);</code>, and now I get no warnings. Also I get expected output when I run the program.</p>\n\n<p>So, were the characters (in second call to <code>diplay()</code> in <code>main()</code>) passed as integers to <code>display()</code> ?</p>\n\n<p>Thanks. </p>\n"}, {"tags": ["c", "api", "google-project-tango", "tango", "c-api"], "comments": [{"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1424301130, "post_id": 28595668, "comment_id": 45498138, "body": "<a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>."}, {"owner": {"reputation": 11, "user_id": 4581727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2b18a6878af60fc00cb219b2402005?s=128&d=identicon&r=PG&f=1", "display_name": "David Menard", "link": "https://stackoverflow.com/users/4581727/david-menard"}, "reply_to_user": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1424352694, "post_id": 28595668, "comment_id": 45519321, "body": "That wasn&#39;t any more relevant to the question. It&#39;s ironic that you would comment to a first-timer by posting a simple link to a &quot;How to properly ask&quot;. You would think you would apply the same principles to answers! Anyways, I modified the question, hope it helps :S"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1424363616, "post_id": 28595668, "comment_id": 45527055, "body": "@DavidMenard: You didn&#39;t escape the include statement with backslashes, which SO use to indicate code snippets. The <code>&lt;&gt;</code> in the statement then rendered the filename invisible -- which made your question a bit confusing. ;-)"}], "answers": [{"tags": [], "owner": {"reputation": 1320, "user_id": 116328, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7920ede5a9e331ed6836a12acb497462?s=128&d=identicon&r=PG", "display_name": "Mark Mullin", "link": "https://stackoverflow.com/users/116328/mark-mullin"}, "is_accepted": false, "score": 1, "last_activity_date": 1424439226, "creation_date": 1424439226, "answer_id": 28630232, "question_id": 28595668, "link": "https://stackoverflow.com/questions/28595668/using-the-c-api-requires-include-tango-api-public-api-h/28630232#28630232", "title": "using the C API requires #include &lt;tango-api/public-api.h&gt;", "body": "<p>the header is located at tango-example-c/tango-sdk/include. </p>\n\n<p>Credit for the answer to @JasonGuo - he put the answer on G+ - this is just housekeeping</p>\n"}], "owner": {"reputation": 11, "user_id": 4581727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2b18a6878af60fc00cb219b2402005?s=128&d=identicon&r=PG&f=1", "display_name": "David Menard", "link": "https://stackoverflow.com/users/4581727/david-menard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424439226, "creation_date": 1424300657, "last_edit_date": 1424363174, "question_id": 28595668, "link": "https://stackoverflow.com/questions/28595668/using-the-c-api-requires-include-tango-api-public-api-h", "title": "using the C API requires #include &lt;tango-api/public-api.h&gt;", "body": "<p>I'm trying to use the Tango C API, but in all the files in the SDK, there are references to <code>#include &lt;tango-api/public-api.h&gt;</code>. I have done some research and cannot find where to get the public tango API or what it is. Shouldn't the SDK include all the required header files?</p>\n\n<p>What is the public API and how do I get it?</p>\n"}, {"tags": ["android", "c", "segmentation-fault", "realpath", "bionic"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1424300934, "post_id": 28595601, "comment_id": 45498056, "body": "What is the value of PATH_MAX?"}, {"owner": {"reputation": 4470, "user_id": 1907083, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1dd7c40fdbbeaea97a60f489410c0d9f?s=128&d=identicon&r=PG", "display_name": "Reuben Tanner", "link": "https://stackoverflow.com/users/1907083/reuben-tanner"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1424300985, "post_id": 28595601, "comment_id": 45498073, "body": "A large number defined in &lt;linux/limits.h&gt;"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1424301159, "post_id": 28595601, "comment_id": 45498146, "body": "Yes, well the point is that you need to know what that number is, in order to evaluate whether 3 arrays of that size on the stack will cause a stack overflow. Of course, you also need to know how big the stack is, and how deep you are into the stack when you call <code>realpath</code>."}, {"owner": {"reputation": 4470, "user_id": 1907083, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1dd7c40fdbbeaea97a60f489410c0d9f?s=128&d=identicon&r=PG", "display_name": "Reuben Tanner", "link": "https://stackoverflow.com/users/1907083/reuben-tanner"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1424302320, "post_id": 28595601, "comment_id": 45498576, "body": "Yeah, that sounds right. How can I determine those things (the size of the stack I&#39;m working with and my current depth in the stack)?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1424304241, "post_id": 28595601, "comment_id": 45499204, "body": "The stack size is a large number defined in the Android documentation. You can find the  (approximate) current depth by taking the address of a local variable in the top-level function (saved as a global variable), and subtracting the address of a local variable in some lower-level function. Note that both addresses need to be cast as <code>char *</code> to get the stack depth in bytes."}], "answers": [{"comments": [{"owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "edited": false, "score": 0, "creation_date": 1425662149, "post_id": 28903898, "comment_id": 46067434, "body": "If the original problem is repeatable, one would think you could test that via similar sized stack allocations, vs. running the same code at a shallower stack depth."}], "tags": [], "owner": {"reputation": 4470, "user_id": 1907083, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1dd7c40fdbbeaea97a60f489410c0d9f?s=128&d=identicon&r=PG", "display_name": "Reuben Tanner", "link": "https://stackoverflow.com/users/1907083/reuben-tanner"}, "is_accepted": false, "score": 0, "last_activity_date": 1425661591, "creation_date": 1425661591, "answer_id": 28903898, "question_id": 28595601, "link": "https://stackoverflow.com/questions/28595601/segfault-when-accessing-char/28903898#28903898", "title": "Segfault when accessing char[]", "body": "<p>I was unable to completely verify this but I believe it was a stack overflow.</p>\n"}], "owner": {"reputation": 4470, "user_id": 1907083, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1dd7c40fdbbeaea97a60f489410c0d9f?s=128&d=identicon&r=PG", "display_name": "Reuben Tanner", "link": "https://stackoverflow.com/users/1907083/reuben-tanner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 323, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1425661591, "creation_date": 1424300371, "last_edit_date": 1424303115, "question_id": 28595601, "link": "https://stackoverflow.com/questions/28595601/segfault-when-accessing-char", "title": "Segfault when accessing char[]", "body": "<p>I've got a function</p>\n\n<pre><code>int foo() {\n    ...\n    char* real_path_buffer = (char*)malloc(sizeof(char)*PATH_MAX);\n    realpath(\"a/certain/path/that/doesnt/exist\", real_path_buffer);\n    ...\n}\n</code></pre>\n\n<p>That makes a call to <code>realpath</code> in Android bionic</p>\n\n<pre><code>char* realpath(const __restrict char*, __restrict char*){\n    char path1[PATH_MAX], path2[PATH_MAX], path3[PATH_MAX];\n    ...\n    path1 = something_valid; //recall, this is a library function\n    ...\n    memcpy(path2, path1, a_valid_size);\n    ...\n}\n</code></pre>\n\n<p>And when passing a certain non-existent path to <code>realpath</code> from a production like scenario, I get a segfault upon accessing<code>path2</code> in any way (it happens when I simply try to print it as well as <code>memcpy</code> to it). </p>\n\n<p>I have verified that the program is not out of memory when the segfault occurs (by making a call to malloc and verifying that its return is not <code>NULL</code>) but you can be assured that this call happens on a fairly hefty stack. </p>\n\n<p>I've also verified that in less intense code paths, <code>realpath</code> accurately returns <code>NULL</code> without segfaulting.</p>\n\n<p>Does anyone have any ideas why this is happening? </p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 11404, "user_id": 599436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b6fa83b64b8ad9dc7643a68bf5c214d?s=128&d=identicon&r=PG", "display_name": "Jon Egeland", "link": "https://stackoverflow.com/users/599436/jon-egeland"}, "edited": false, "score": 0, "creation_date": 1424299504, "post_id": 28595402, "comment_id": 45497465, "body": "Have you tried looking <i>anywhere</i> on the internet? There are hundreds, if not thousands, if not hundreds-of-thousands of answers to this already."}, {"owner": {"reputation": 5554, "user_id": 732419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2caafa6cd8f59597d0d3e9320f106d48?s=128&d=identicon&r=PG", "display_name": "ott--", "link": "https://stackoverflow.com/users/732419/ott"}, "edited": false, "score": 0, "creation_date": 1424299629, "post_id": 28595402, "comment_id": 45497516, "body": "!= 0 (not &#39;0&#39;) to recognize the end"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1424299660, "post_id": 28595402, "comment_id": 45497532, "body": "C has no concept &quot;end of array&quot;. By convention, arrays of characters are terminated with a single &#39;\\0&#39; character (NOT &#39;0&#39;--that&#39;s the digit)."}, {"owner": {"reputation": 11404, "user_id": 599436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b6fa83b64b8ad9dc7643a68bf5c214d?s=128&d=identicon&r=PG", "display_name": "Jon Egeland", "link": "https://stackoverflow.com/users/599436/jon-egeland"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1424299833, "post_id": 28595402, "comment_id": 45497593, "body": "@LeeDanielCrocker Note that <code>&#39;\\0&#39; == 0</code> by definition."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1424299938, "post_id": 28595402, "comment_id": 45497635, "body": "Yes, neither of which equals &#39;0&#39;."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 2, "creation_date": 1424299958, "post_id": 28595402, "comment_id": 45497644, "body": "@LeeDanielCrocker you mean strings of characters. Arrays are a fixed-size block of memory which may contain strings."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1424300057, "post_id": 28595402, "comment_id": 45497688, "body": "I don&#39;t consider what C does with characters to be &quot;strings&quot; like real string-handling languages have. It just has arrays of characters, some of which are interpreted as ending with &#39;\\0&#39;."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1424300307, "post_id": 28595402, "comment_id": 45497794, "body": "VOTED TO REOPEN: This is not just a &quot;please debug me&quot; question. It&#39;s a &quot;How does C handle arrays of characters&quot; question, to which there is a good answer. It might be considered too basic, but I think many people learning C after some other language will have the same question."}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1424300062, "post_id": 28595449, "comment_id": 45497691, "body": "The assumption being that the array contains a null-terminated string."}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 1, "last_activity_date": 1424299668, "creation_date": 1424299668, "answer_id": 28595449, "question_id": 28595402, "link": "https://stackoverflow.com/questions/28595402/for-loop-to-end-of-array/28595449#28595449", "title": "For loop to end of array", "body": "<pre><code> while (characters[i] != '0' ) \n</code></pre>\n\n<p>looks for the character 0 (which is x30). YOu need</p>\n\n<pre><code> while (characters[i] != 0 ) \n</code></pre>\n\n<p>or </p>\n\n<pre><code> while (characters[i] != '\\0' ) \n</code></pre>\n\n<p>which looks for the character coded as  0x00.</p>\n"}, {"comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1424309091, "post_id": 28595480, "comment_id": 45500751, "body": "Note: this only works if <code>characters</code> is an array, not a pointer. (It does answer the question as written)"}], "tags": [], "owner": {"reputation": 6697, "user_id": 531310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GRZeg.jpg?s=128&g=1", "display_name": "Rami", "link": "https://stackoverflow.com/users/531310/rami"}, "is_accepted": false, "score": 2, "last_activity_date": 1424303942, "last_edit_date": 1424303942, "creation_date": 1424299797, "answer_id": 28595480, "question_id": 28595402, "link": "https://stackoverflow.com/questions/28595402/for-loop-to-end-of-array/28595480#28595480", "title": "For loop to end of array", "body": "<pre><code>int arraySize = sizeof(characters)/sizeof(characters[0]);\n\nfor(int i = 0; i &lt; arraySize; i++) {\n      printf(\" %c\", characters[i]);\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4581660, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/15b0e1ed0ea09fcc50e0889f87307e58?s=128&d=identicon&r=PG&f=1", "display_name": "t3choo", "link": "https://stackoverflow.com/users/4581660/t3choo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3287, "favorite_count": 0, "closed_date": 1424299958, "answer_count": 2, "score": -2, "last_activity_date": 1424303942, "creation_date": 1424299370, "last_edit_date": 1424299888, "question_id": 28595402, "link": "https://stackoverflow.com/questions/28595402/for-loop-to-end-of-array", "closed_reason": "Not suitable for this site", "title": "For loop to end of array", "body": "<p>I'm making <code>function</code>. To that function i send the <code>array</code> and then i need to write down that <code>array</code> with one space between characters in it .</p>\n\n<p>How can i know is it end of array or not ? </p>\n\n<pre><code> while (characters[i] != '0' ) \n{\nprintf(\" %c\");\ni++; \n}\n</code></pre>\n\n<p>Edit </p>\n\n<pre><code>int i=0;\nwhile (characters[i] != 0 ) \n{\n   printf(\" %c\", characters[i]);\n   i++; \n}\n</code></pre>\n"}, {"tags": ["c++", "c", "enums"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1424298803, "post_id": 28595206, "comment_id": 45497135, "body": "<code>strtok()</code> is probably the worst choice :-( ... And <code>static_cast&lt;type_t &gt;(type_char )</code> doesn&#39;t work, because these types are completely unrelated."}, {"owner": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1424298845, "post_id": 28595206, "comment_id": 45497148, "body": "But I need to split my string in to &quot;|&quot; symbol."}, {"owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "edited": false, "score": 1, "creation_date": 1424298896, "post_id": 28595206, "comment_id": 45497182, "body": "Consider more simple solution with defining array (or vector) of strings (or char *) and using enum as an index"}, {"owner": {"reputation": 9020, "user_id": 485088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4c2e26c21ecd1e0565915687b8c092?s=128&d=identicon&r=PG", "display_name": "Tim \u010cas", "link": "https://stackoverflow.com/users/485088/tim-%c4%8cas"}, "edited": false, "score": 0, "creation_date": 1424306165, "post_id": 28595206, "comment_id": 45499867, "body": "Your code is <i>definitely</i> not valid C, and it is not valid C++; and yet, you&#39;ve tagged both. <code>static_cast</code> implies you meant only the C++ tag, so please <i>only</i> use the language-appropriate tag. C != C++."}], "answers": [{"comments": [{"owner": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "edited": false, "score": 0, "creation_date": 1424299207, "post_id": 28595309, "comment_id": 45497344, "body": "my enum contain around 100 element for simplification I just mention 2 elements. Also char type[] is dynamic,  for simplification I put static value."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "edited": false, "score": 0, "creation_date": 1424305672, "post_id": 28595309, "comment_id": 45499688, "body": "@eswaat There isn&#39;t much you can do - apart from using a macro for adding items to <code>nameToTypeT</code>, e.g. <code>#define ADD_ENUM_NAME(x) nameToTypeT[#x] = x</code> and using <code>ADD_ENUM_NAME(MSG_1); ADD_ENUM_NAME(MSG_2); ... ADD_ENUM_NAME(MSG_1000);</code> there are no simple tricks to make the task simple. It&#39;s perfectly OK to dynamic content in <code>type[]</code>, though."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 5, "last_activity_date": 1424298873, "creation_date": 1424298873, "answer_id": 28595309, "question_id": 28595206, "link": "https://stackoverflow.com/questions/28595206/coverting-char-to-enum-in-c/28595309#28595309", "title": "Coverting char * to enum in c++", "body": "<p>Unlike other languages that have stronger run-time \"reflection\" capabilities, in C++ <code>enum</code>s are a purely compile-time artifact. Once the compiler is done, there is no way to get the names of enumeration constants. Debuggers can get them by reading special tables the compiler prepares for the debuggers, but it would be counterproductive to access these files.</p>\n\n<p>If you want to be able to convert names of enumerations to their values, make a <code>unordered_map</code> from <code>string</code> to your <code>enum</code>, populate it statically, and perform lookups as needed:</p>\n\n<pre><code>static std::unordered_map&lt;std::string,type_t&gt; nameToTypeT;\n...\nnameToTypeT[\"MSG_1\"] = MSG_1;\nnameToTypeT[\"MSG_2\"] = MSG_2;\n...\ntype_t = nameToTypeT[std::string(type_char)];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1424309152, "post_id": 28595331, "comment_id": 45500762, "body": "Don&#39;t forget to <code>#undef X</code> if you do it this way."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 2, "last_activity_date": 1424298957, "creation_date": 1424298957, "answer_id": 28595331, "question_id": 28595206, "link": "https://stackoverflow.com/questions/28595206/coverting-char-to-enum-in-c/28595331#28595331", "title": "Coverting char * to enum in c++", "body": "<p>You will have to write code that translates the text in the string into the relevant enum value. </p>\n\n<p>I typically do this by writing a function along these lines:</p>\n\n<pre><code>type_t str_to_type_t(const char *str)\n{\n#define X(x) { #x, x }\n  struct entry\n  {\n     const char *name;\n     type_t value;\n  };\n  entry table[] = {\n      X(MSG_1),\n      X(MSG_2)\n  };\n\n  for(auto e : table)\n  {\n     if (strcmp(e.name, s) == 0)\n       return e.value;\n  }\n  return -1;   // Or MSG_UNKNOWN or similar. \n}\n</code></pre>\n\n<p>If there are a large number of enums, then using a <code>std::map&lt;std::string, type_t&gt; table;</code> and then <code>if ((auto it = table.find(s)) != table.end()) { return it-&gt;second;</code> [or <code>unordered_map</code>, perhaps would be the better solution, but for a small number it makes little difference.</p>\n"}, {"tags": [], "owner": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "is_accepted": false, "score": 1, "last_activity_date": 1424298973, "creation_date": 1424298973, "answer_id": 28595336, "question_id": 28595206, "link": "https://stackoverflow.com/questions/28595206/coverting-char-to-enum-in-c/28595336#28595336", "title": "Coverting char * to enum in c++", "body": "<p>Here is an example:</p>\n\n<pre><code>struct entry_t\n{\n   type_t      value;\n   const char *literal;\n};\nstatic const entry_t table[] =\n{\n   {MSG_1, \"MSG1\"},\n   {MSG_2, \"MSG2\"},\n};\n\ntype_t typeFromLiteral(const char *literal)\n{\n   for (size_t i = 0; i &lt; sizeof(table)/sizeof(table[0]); ++i)\n   {\n     if (0 == strcmp(table[i].literal, literal))\n     {\n        return table[i].value;\n     }\n   };\n   abort();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1472850084, "last_edit_date": 1472850084, "creation_date": 1424301521, "answer_id": 28595876, "question_id": 28595206, "link": "https://stackoverflow.com/questions/28595206/coverting-char-to-enum-in-c/28595876#28595876", "title": "Coverting char * to enum in c++", "body": "<p>You can't cast from <code>char *</code> to <code>enum</code>, they are incompatible types. You have three options</p>\n\n<ol>\n<li><p>Use an </p>\n\n<pre><code>if (strcmp(textualRepresentation, \"EnumValue1\") == 0)\n     return EnumValue1;\nelse if (strcmp(textualRepresentation, \"EnumValue2\") == 0)\n     return EnumValue2;\n</code></pre></li>\n<li><p>Create a struct containing both the textual representation and the value of the <code>enum</code> and then use <code>bsearch()</code> to match the textual representation and retrieve the <code>enum</code> value.</p>\n\n<pre><code>struct EnumData {\n    const char *name;\n    Enum value;\n};\n\nEnumData enums[ENUM_COUNT] = {\n    {\"EnumValue1\", EnumValue1},\n    {\"EnumValue2\", EnumValue2}\n};\n\nint compare_enums(const void *const lhs, const void *const rhs)\n{\n    return strcmp(reinterpret_cast&lt;const EnumData *&gt;(lhs)-&gt;name,\n                  reinterpret_cast&lt;const EnumData *&gt;(rhs)-&gt;name);\n}\n</code></pre>\n\n<p>and then search like this</p>\n\n<pre><code>EnumData  key;\nvoid     *found;\n\nkey.name = \"EnumValue2\";\nfound    = bsearch(&amp;key, enums, ENUM_COUNT, sizeof(EnumData), compare_enums);\nif (found != NULL)\n    std::cout &lt;&lt; reinterpret_cast&lt;EnumData *&gt;(found)-&gt;value &lt;&lt; \" is the enum value\" &lt;&lt; std::endl;\n</code></pre></li>\n<li><p>Use <code>std::map&lt;const char *,Enum&gt;</code>, this is the best option.</p></li>\n</ol>\n\n<p>The following code demonstrates the methods 2 and 3, method 1 is evident</p>\n\n<pre><code>enum Enum {\n    InvalidEnumValue,\n    EnumValue1,\n    EnumValue2,\n    EnumCount\n};\n\nstruct EnumData {\n    const char *name;\n    Enum        value;\n};\n\nstatic EnumData enums[EnumCount] = {\n    {\"EnumValue1\", EnumValue1},\n    {\"EnumValue2\", EnumValue2},\n    {\"InvalidEnumValue\", InvalidEnumValue}\n};   \n\nint compare_enums(const void *const lhs, const void *const rhs)\n{\n    return strcmp(reinterpret_cast&lt;const EnumData *&gt;(lhs)-&gt;name,\n                  reinterpret_cast&lt;const EnumData *&gt;(rhs)-&gt;name);\n}\n\nEnum find_enum_value_with_bsearch(const char *const name)\n{\n    EnumData  key;\n    void     *found;\n\n    key.name = name;\n    found    = bsearch(&amp;key, enums, EnumCount, sizeof(EnumData), compare_enums);\n    if (found == NULL)\n        return InvalidEnumValue;\n    return reinterpret_cast&lt;EnumData *&gt;(found)-&gt;value;\n}\n\n\nint\nmain()\n{\n    Enum                        value;\n    std::map&lt;const char *,Enum&gt; enumsMap;\n\n    enumsMap[\"EnumValue1\"] = EnumValue1;\n    enumsMap[\"EnumValue2\"] = EnumValue2;\n\n    value = find_enum_value_with_bsearch(\"EnumValue2\");\n\n    std::cerr &lt;&lt; value &lt;&lt; std::endl;\n    std::cerr &lt;&lt; enumsMap[\"EnumValue1\"] &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 633, "user_id": 3167839, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9733482d33613b69ce278f902ecf93bc?s=128&d=identicon&r=PG&f=1", "display_name": "eswaat", "link": "https://stackoverflow.com/users/3167839/eswaat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3133, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1472850084, "creation_date": 1424298530, "last_edit_date": 1495542168, "question_id": 28595206, "link": "https://stackoverflow.com/questions/28595206/coverting-char-to-enum-in-c", "title": "Coverting char * to enum in c++", "body": "<p>I want to convert <code>char *</code> to <code>enum</code> so I used <a href=\"https://stackoverflow.com/questions/1297385/c-enum-from-char\">this</a>. But I am getting error while converting <code>char *</code> to <code>enum</code></p>\n\n<p>I cannot change my <code>enum</code>. Also <code>type[]</code> is dynamic for simplification I am showing static value.</p>\n\n<pre><code>enum type_t {\n    MSG_1 = 0,\n    MSG_2\n};\n\nchar type[] = \"MSG_1|MSG_2\";\nchar *type_char;\ntype_char = strtok (type,\"|\");\nwhile (type_char != NULL)\n{\n    type_t type_enum = static_cast&lt;type_t &gt;(type_char );\n    type_char = strtok (NULL, \"|;\");\n}\n</code></pre>\n\n<p>I am getting below error </p>\n\n<pre><code>error: invalid static_cast from type 'char*' to type 'type_t'\n</code></pre>\n\n<p>I want to convert <code>char *</code> to <code>enum</code></p>\n"}, {"tags": ["c", "struct", "operator-keyword"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1424298015, "post_id": 28595046, "comment_id": 45496788, "body": "The <code>-&gt;</code> operator is sort of lacking a name.  C++ calls it <code>operator-&gt;</code>, but wikipedia calls it the &quot;Structure dereference&quot; amongst other things. <a href=\"http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": 3, "last_activity_date": 1424298096, "creation_date": 1424298096, "answer_id": 28595090, "question_id": 28595046, "link": "https://stackoverflow.com/questions/28595046/struct-in-c-with-or-%e2%86%92-operator/28595090#28595090", "title": "Struct in C with (.) or \u2192 operator", "body": "<p>Point is used for structure instance (object), and -> is when you access the structure with pointer. E.g. <code>obj.member</code> and <code>ptr_obj-&gt;member</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 2847332, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b8ff4bf29b8e6729a819189059d2de9?s=128&d=identicon&r=PG&f=1", "display_name": "superuser", "link": "https://stackoverflow.com/users/2847332/superuser"}, "edited": false, "score": 0, "creation_date": 1424298866, "post_id": 28595116, "comment_id": 45497166, "body": "so, this code is correct?  \t \tstruct dashboard{ \t\tchar name[20]; \t\tint idade;\t\t \t}; \t           struct dashboard *user; \t  \tuser-&gt;idade;   \tuser-&gt;name;"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "reply_to_user": {"reputation": 15, "user_id": 2847332, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b8ff4bf29b8e6729a819189059d2de9?s=128&d=identicon&r=PG&f=1", "display_name": "superuser", "link": "https://stackoverflow.com/users/2847332/superuser"}, "edited": false, "score": 1, "creation_date": 1424298952, "post_id": 28595116, "comment_id": 45497210, "body": "Um, no, because you don&#39;t make &quot;user&quot; point to anything before trying to dereference it. You still need to actually allocate memory for a structure."}], "tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": true, "score": 1, "last_activity_date": 1424298165, "creation_date": 1424298165, "answer_id": 28595116, "question_id": 28595046, "link": "https://stackoverflow.com/questions/28595046/struct-in-c-with-or-%e2%86%92-operator/28595116#28595116", "title": "Struct in C with (.) or \u2192 operator", "body": "<p>The dot picks members of structures. The arrow dereferences pointers to structures and then picks a member.</p>\n\n<pre><code>struct dashboard user, *up = &amp;user;\n\n. . . user.name . . .\n. . . up-&gt;name . . .\n</code></pre>\n\n<p>are equivalent (assuming up still points to user).</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 2847332, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b8ff4bf29b8e6729a819189059d2de9?s=128&d=identicon&r=PG&f=1", "display_name": "superuser", "link": "https://stackoverflow.com/users/2847332/superuser"}, "edited": false, "score": 0, "creation_date": 1424305436, "post_id": 28595322, "comment_id": 45499609, "body": "I follow your example, but the compiler not work, I&#39;m not sure if I&#39;m doing something wrong , but it seems to me you are missing some additional explanation! Because when i tried to access field1 with the pointer *b the IDE freezes."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 15, "user_id": 2847332, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b8ff4bf29b8e6729a819189059d2de9?s=128&d=identicon&r=PG&f=1", "display_name": "superuser", "link": "https://stackoverflow.com/users/2847332/superuser"}, "edited": false, "score": 0, "creation_date": 1424309306, "post_id": 28595322, "comment_id": 45500822, "body": "@superuser I highly doubt the IDE freezes."}, {"owner": {"reputation": 251, "user_id": 4182129, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DB1k9.jpg?s=128&g=1", "display_name": "angel208", "link": "https://stackoverflow.com/users/4182129/angel208"}, "edited": false, "score": 0, "creation_date": 1424313799, "post_id": 28595322, "comment_id": 45501957, "body": "well, that example was just to show you the difference. when you try to run it as a program, it probably freezes (you are working in windows i guess) because it gives a segmentation fault error. you have to allocate memory to <code>*b</code> using malloc: <code>b=malloc (sizeof (ExStructure) );</code> . remember that you are declaring the pointer to an struct (*b), but it isn&#39;t pointing at any memory location yet. You could also make b point to a and then try to access the field on b, but if you want them to be two different structures, you will have to use malloc."}, {"owner": {"reputation": 15, "user_id": 2847332, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b8ff4bf29b8e6729a819189059d2de9?s=128&d=identicon&r=PG&f=1", "display_name": "superuser", "link": "https://stackoverflow.com/users/2847332/superuser"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1424317776, "post_id": 28595322, "comment_id": 45502872, "body": "@immibis  Yes is it  freeze, because i not referencing or alocate memory to the pointer, and angel208  you can use another way, referencing pointer to another address to access memory like the Lee Daniel Crocker done, anyway thaks a lot!"}], "tags": [], "owner": {"reputation": 251, "user_id": 4182129, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DB1k9.jpg?s=128&g=1", "display_name": "angel208", "link": "https://stackoverflow.com/users/4182129/angel208"}, "is_accepted": false, "score": 1, "last_activity_date": 1424298900, "creation_date": 1424298900, "answer_id": 28595322, "question_id": 28595046, "link": "https://stackoverflow.com/questions/28595046/struct-in-c-with-or-%e2%86%92-operator/28595322#28595322", "title": "Struct in C with (.) or \u2192 operator", "body": "<p><code>structure.field</code> is the field on the structure, that simple. <code>structure-&gt;field</code> is  equivalent to <code>(*structure).field</code>. <code>-&gt;</code> its used when you want to access the field of a structure pointed by a pointer you have. imagine you have this structure:</p>\n\n<pre><code> typedef struct example{\n   int field1;\n   int field2;\n } ExStructure;\n</code></pre>\n\n<p>ans this variables:</p>\n\n<pre><code>ExStructure a, *b;\n</code></pre>\n\n<p>you have an structure and a pointer to an structure. if you want to access to the field one of the first structure, you simply do <code>X=a.field1</code>. But the second one is a pointer to an structure so to access the field1 of that structure you need to do <code>X=(*b).field1</code>, and that's equivalent to <code>X=b-&gt;field1</code>. So <code>-&gt;</code> makes the code simpler to read. </p>\n"}], "owner": {"reputation": 15, "user_id": 2847332, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b8ff4bf29b8e6729a819189059d2de9?s=128&d=identicon&r=PG&f=1", "display_name": "superuser", "link": "https://stackoverflow.com/users/2847332/superuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 28595116, "answer_count": 3, "score": 0, "last_activity_date": 1424318652, "creation_date": 1424297936, "last_edit_date": 1424318652, "question_id": 28595046, "link": "https://stackoverflow.com/questions/28595046/struct-in-c-with-or-%e2%86%92-operator", "title": "Struct in C with (.) or \u2192 operator", "body": "<p>Guys I'm a little confused with the -> operator in C, can someone explain to me how it works and how it can be used, and the main diference between dot . operator and -> operator, what is the name of this operator -> ?</p>\n\n<p>P.S. I need very much to understand this , to complete an exercise , please explain me or gibe me, pdf , video, tutorial or something to help me, thanks!</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n\nstruct dashboard{\n    char name[20];\n    int idade;      \n};\n\nstruct dashboard user;\n\nchar* n = strcpy(user.name, \"anyname\");\nuser.idade = 10;  \n\nprintf(\"Name is: %s and age is: %d\", n, user.idade); \n\nreturn 0;}\n</code></pre>\n\n<p>how can I implement this same structure with the -> ?</p>\n\n<p>The answer to my question with help of stackoverflow members.</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n\nstruct dashboard{\n    char name[20];\n    int idade;      \n};\n\nstruct dashboard *user, u;\n\n//Referencing pointer to memory address of u \nuser = &amp;u;  \n\nchar* n = strcpy(user-&gt;name, \"anyname\");\nuser-&gt;idade = 10;  \n\nprintf(\"Name is: %s, Age is: %d\", n, user-&gt;idade); \n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["python", "c", "automation", "automated-tests"], "answers": [{"tags": [], "owner": {"reputation": 850, "user_id": 4580729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac46efd39b35cac8c51a4b4b2e7163d5?s=128&d=identicon&r=PG", "display_name": "Tom Hunt", "link": "https://stackoverflow.com/users/4580729/tom-hunt"}, "is_accepted": false, "score": 0, "last_activity_date": 1424297665, "creation_date": 1424297665, "answer_id": 28594984, "question_id": 28594933, "link": "https://stackoverflow.com/questions/28594933/autograder-script-reading-keyboard-inputs-from-textfile/28594984#28594984", "title": "Autograder script - reading keyboard inputs from textfile", "body": "<p>You can use the <code>subprocess</code> module in Python to spawn other programs, retrieve their output and feed them arbitrary input. The relevant pieces will most likely be the <code>Popen.communicate()</code> method and/or the <code>.stdin</code> and <code>.stdout</code> file objects; ensure when you do this that you passed <code>PIPE</code> as the argument to the <code>stdin</code> and <code>stdout</code> keywords on creation.</p>\n"}], "owner": {"reputation": 1570, "user_id": 1172265, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/6905627f5ac47b04ac122da356da5f2a?s=128&d=identicon&r=PG", "display_name": "Batuhan B", "link": "https://stackoverflow.com/users/1172265/batuhan-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424297665, "creation_date": 1424297444, "question_id": 28594933, "link": "https://stackoverflow.com/questions/28594933/autograder-script-reading-keyboard-inputs-from-textfile", "title": "Autograder script - reading keyboard inputs from textfile", "body": "<p>I need to score my students c programming homeworks. I want to write an autograder script which automatically score the homeworks. I plan to write this script in python language.</p>\n\n<p>My question is, in the homework, in some parts students get some input from keyboard with <strong>scanf</strong>, how can i handle this problem if I try to write an autograder?  Is there any way to read from text file when the <strong>scanf</strong> line runs in homework ? </p>\n\n<p>Any idea is appreciated.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 41117, "user_id": 1864167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/WalEV.jpg?s=128&g=1", "display_name": "Jeroen Vannevel", "link": "https://stackoverflow.com/users/1864167/jeroen-vannevel"}, "edited": false, "score": 1, "creation_date": 1424297091, "post_id": 28594837, "comment_id": 45496297, "body": "I would assume you at least know the language you&#39;re programming in?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 5, "creation_date": 1424297149, "post_id": 28594837, "comment_id": 45496319, "body": "Here, <a href=\"http://coliru.stacked-crooked.com/a/946719496cbe37bf\" rel=\"nofollow noreferrer\">let the compiler help</a>. Each of those warning/error messages can be easily researched."}, {"owner": {"reputation": 12849, "user_id": 1218281, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2a7d7e9fa2049d4dbf9a508e5eccdb0a?s=128&d=identicon&r=PG", "display_name": "Cyral", "link": "https://stackoverflow.com/users/1218281/cyral"}, "edited": false, "score": 1, "creation_date": 1424297166, "post_id": 28594837, "comment_id": 45496326, "body": "Remove the <code>;</code> in <code>while (i &lt;= 5);</code>"}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1424297348, "post_id": 28594837, "comment_id": 45496421, "body": "Proper indentation of your code is ignored by the compiler but crucial for the human reader to spot simple bugs like this one.  Also consider learning how to use a debugger.  It would have told you quickly what was going o here."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1424297318, "post_id": 28594870, "comment_id": 45496402, "body": "You need a semicolon after the <code>0</code>"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1424297544, "post_id": 28594870, "comment_id": 45496535, "body": "<code>main</code> returns 0 implicitly."}, {"owner": {"reputation": 12849, "user_id": 1218281, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2a7d7e9fa2049d4dbf9a508e5eccdb0a?s=128&d=identicon&r=PG", "display_name": "Cyral", "link": "https://stackoverflow.com/users/1218281/cyral"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1424297662, "post_id": 28594870, "comment_id": 45496598, "body": "@chris Thanks, I don&#39;t program in c."}, {"owner": {"reputation": 19, "user_id": 4556324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/839f3aaf4c287af86ac127088e1152b3?s=128&d=identicon&r=PG&f=1", "display_name": "Tafadzwa", "link": "https://stackoverflow.com/users/4556324/tafadzwa"}, "edited": false, "score": 0, "creation_date": 1424298857, "post_id": 28594870, "comment_id": 45497158, "body": "also the output is coming out in a single row                                                i = 0i = 1i , but I wanted it in a colum reading i = 1, i = 2 etc."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1424321460, "post_id": 28594870, "comment_id": 45503831, "body": "I forgot a piece of that statement. In C, <code>main</code> returns 0 implicitly from C99 onward. Anyway, your <code>printf</code> is missing an argument."}], "tags": [], "owner": {"reputation": 12849, "user_id": 1218281, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2a7d7e9fa2049d4dbf9a508e5eccdb0a?s=128&d=identicon&r=PG", "display_name": "Cyral", "link": "https://stackoverflow.com/users/1218281/cyral"}, "is_accepted": true, "score": 1, "last_activity_date": 1424309526, "last_edit_date": 1424309526, "creation_date": 1424297228, "answer_id": 28594870, "question_id": 28594837, "link": "https://stackoverflow.com/questions/28594837/compiled-program-not-executing-just-has-blinking-cursor/28594870#28594870", "title": "compiled program not executing, just has blinking cursor", "body": "<p>Notice how there was also a missing semicolon after <code>i = 0</code>, this will throw an error and prevent your program from continuing. Also, remove the semicolon after your while loop, it will not run the code inside with it present (And will just sit idle after skipping it). Your program should look like:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    int i;\n    i = 0;\n\n    while (i &lt;= 5)\n    {\n        printf ( \"i = %d\" );\n        i += 1;\n    } \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 251, "user_id": 4182129, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DB1k9.jpg?s=128&g=1", "display_name": "angel208", "link": "https://stackoverflow.com/users/4182129/angel208"}, "is_accepted": false, "score": 0, "last_activity_date": 1424297969, "creation_date": 1424297969, "answer_id": 28595058, "question_id": 28594837, "link": "https://stackoverflow.com/questions/28594837/compiled-program-not-executing-just-has-blinking-cursor/28595058#28595058", "title": "compiled program not executing, just has blinking cursor", "body": "<p>adding to the answer of Cyral, a semicolon indicates the end of a statement. if you have</p>\n\n<pre><code>   while (i &lt;= 5);\n         {\n          printf ( \"i = %d\" );\n          i += 1;\n    }\n</code></pre>\n\n<p>the program will run statement by statement, so it will first run the while, doing nothing in every loop because it is a while with a blank instruction <code>;</code>. then it will run the next statement, that is everything inside the <code>{ }</code>.</p>\n\n<p>the blinking cursor occurs because you increment <code>i</code> inside the statement that follows the while, so, the while, expecting an <code>i</code> thats grater than 5 to stop (an <code>i</code> that never increments inside the loop) enters in an infinite loop.</p>\n"}], "owner": {"reputation": 19, "user_id": 4556324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/839f3aaf4c287af86ac127088e1152b3?s=128&d=identicon&r=PG&f=1", "display_name": "Tafadzwa", "link": "https://stackoverflow.com/users/4556324/tafadzwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 28594870, "answer_count": 2, "score": -3, "last_activity_date": 1424309526, "creation_date": 1424297055, "last_edit_date": 1424297154, "question_id": 28594837, "link": "https://stackoverflow.com/questions/28594837/compiled-program-not-executing-just-has-blinking-cursor", "title": "compiled program not executing, just has blinking cursor", "body": "<p>trying to get this loop to run but it just has the cursor blinking. I am new to programing. Can you please help?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n       int i;\n       i = 0\n\n       while (i &lt;= 5);\n             {\n              printf ( \"i = %d\" );\n              i += 1;\n        }\n}\n</code></pre>\n"}, {"tags": ["c", "string", "access-violation"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424296527, "post_id": 28594653, "comment_id": 45496000, "body": "So, the wheels fell off when you moves this code to a DLL, is that correct ?"}, {"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424296551, "post_id": 28594653, "comment_id": 45496006, "body": "yes - was working before i did that..."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424296653, "post_id": 28594653, "comment_id": 45496055, "body": "Are they both using the same VC runtime (debug mt dll, for example) and using the same <i>calling convention</i> ? (_cdecl vs _stdcall, etc). ?"}, {"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424296725, "post_id": 28594653, "comment_id": 45496096, "body": "yes they are, other functions called in the same dll work fine, only difference I can tell from the two projects is that he caller defines UNICODE and _UNICODE and the dependent dll doesn&#39;t (though I tried to define them and didn&#39;t change result)"}, {"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424296859, "post_id": 28594653, "comment_id": 45496176, "body": "One odd thing I noticed was that trying to debug print TEXT(&quot;Source name: %s\\n&quot;), sourceName only gave me the first letter... I expected the word"}, {"owner": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "edited": false, "score": 0, "creation_date": 1424296890, "post_id": 28594653, "comment_id": 45496191, "body": "Is your library built with UNICODE option?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424296910, "post_id": 28594653, "comment_id": 45496208, "body": "That&#39;s because the DLL is not using Unicode. <code>OutputDebugString</code> will default to <code>OutputDebugStringA</code> and that <code>TEXT</code> macro wrapper will become a no-op. (no <code>L&quot;</code> preamble). Thus you&#39;re sending a <code>WCHAR*</code> to a function expecting <code>CHAR*</code>. Frankly I&#39;m surprised you didn&#39;t get a big fat compiler warning."}, {"owner": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "edited": false, "score": 0, "creation_date": 1424296958, "post_id": 28594653, "comment_id": 45496228, "body": "Change string to be L&quot;c:/test/%ls%3u.bmp&quot;"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424297128, "post_id": 28594653, "comment_id": 45496314, "body": "This thing should be debuggable. And if you installed VC with all the whistles it should include the VC runtime library so you can trace into the CRT functions. This is odd."}, {"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "edited": false, "score": 0, "creation_date": 1424297220, "post_id": 28594653, "comment_id": 45496358, "body": "This is code i put in a driver - only way to debug is attach windbg to a process..."}, {"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "reply_to_user": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "edited": false, "score": 0, "creation_date": 1424297273, "post_id": 28594653, "comment_id": 45496381, "body": "@ValeriAtamaniouk Thank you that didn&#39;t work"}, {"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "edited": false, "score": 0, "creation_date": 1424297578, "post_id": 28594653, "comment_id": 45496551, "body": "Adding UNICODE and _UNICODE allowed me to debug print the source name - still same error on the swprintf_s"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424297712, "post_id": 28594653, "comment_id": 45496633, "body": "Humor me. Try <code>LPWSTR pwsz = wFileName; swprintf_s(pwsz, _countof(wFileName), wSpec, sourceName, fileCounter());</code>"}, {"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424297956, "post_id": 28594653, "comment_id": 45496757, "body": "@WhozCraig Same problem"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424298063, "post_id": 28594653, "comment_id": 45496814, "body": "Then I don&#39;t know what to tell you besides wire up symbols and a debugger. You&#39;re calling it correctly. Either the calling convention is mismatched (which I mentioned earlier) or the wrong function is being called. The previous comment was to ensure the template&lt;&gt; version was <i>not</i> being incorrectly pieced in. I&#39;d also check and make sure both lib and exe are using the same settings for <code>wchar_t</code> as a native type or not (honestly makes no difference which as long as they match)."}, {"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "edited": false, "score": 0, "creation_date": 1424298122, "post_id": 28594653, "comment_id": 45496840, "body": "How do I do that ? (check and make sure both lib and exe are using the same settings for wchar_t as a native type) - where do I find that info or how can i print it out ?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424298162, "post_id": 28594653, "comment_id": 45496857, "body": "Its part of the C++ compiler settings. But I&#39;d still make sure they&#39;re both using the <i>same calling convention</i> (caller and callee). Btw, pretty gutsy calling CRT code from a sys driver. I avoid that like the plague =P"}, {"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "edited": false, "score": 0, "creation_date": 1424298402, "post_id": 28594653, "comment_id": 45496970, "body": "Because I don&#39;t know any better... I define it out in release mode ... what would be the alternative ?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1424301967, "post_id": 28594653, "comment_id": 45498462, "body": "This function doesn&#39;t actually do anything after <code>swprintf_s</code> so it is redundant... I guess the &quot;real code&quot; has more code after <code>swprintf_s</code>, is the error happening with only the code you have posted present?"}], "owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1424296349, "creation_date": 1424296349, "question_id": 28594653, "link": "https://stackoverflow.com/questions/28594653/c-swprintf-s-access-violation", "title": "c &quot;swprintf_s&quot; access violation", "body": "<p>I am trying to generate some file names automatically. The following was working:</p>\n\n<pre><code>unsigned int fileCounter()\n{\n    static unsigned int fileNo = 0;\n    return fileNo++;\n}\n\nvoid createFile(WCHAR* sourceName)  \n{\n    static const WCHAR wSpec[] = L\"c:/test/%s%3u.bmp\";\n    WCHAR wFileName[MAX_PATH];\n    swprintf_s(wFileName, MAX_PATH, wSpec, sourceName, fileCounter());\n}\n\n// called by\ncreateFile(TEXT(\"somename\"));\n</code></pre>\n\n<p>I tried to separate the above function into a separate dll project (where the <code>createFile</code> function is exported, using the typical </p>\n\n<pre><code>#ifdef MY_EXPORTS\n#define MY_API __declspec(dllexport) \n#else\n#define MY_API __declspec(dllimport) \n#endif\n\nMY_API void createFile(WCHAR* sourceName);\n</code></pre>\n\n<p>in the header file included in the source caller, and I get an access violation error on the <code>swprintf_s</code></p>\n\n<p>I have tried to replace with the \"unsafe\" version, but I get the same error. (same if I used the sprintf_s and CHAR* variables)</p>\n\n<p>Also have tried (suggested in a similar question)</p>\n\n<pre><code>swprintf_s(wFileName, _countof(wFileName), wSpec, sourceName, fileCounter());\n</code></pre>\n\n<p>I still get</p>\n\n<pre><code>(5ec.4d4): Access violation - code c0000005 (first chance)\n</code></pre>\n\n<p>I can't figure out  what is wrong...</p>\n"}, {"tags": ["c++", "c", "ffmpeg"], "comments": [{"owner": {"reputation": 116828, "user_id": 55075, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8bbc94977312d285045b2412257b6cb8?s=128&d=identicon&r=PG", "display_name": "kenorb", "link": "https://stackoverflow.com/users/55075/kenorb"}, "edited": false, "score": 0, "creation_date": 1424301407, "post_id": 28594614, "comment_id": 45498241, "body": "Do you have any code that you can paste it which you&#39;ve tried so far?"}, {"owner": {"reputation": 39, "user_id": 1816574, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/02fcde8b3e51fe996b8b295e2fa7b64c?s=128&d=identicon&r=PG", "display_name": "user1816574", "link": "https://stackoverflow.com/users/1816574/user1816574"}, "reply_to_user": {"reputation": 116828, "user_id": 55075, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8bbc94977312d285045b2412257b6cb8?s=128&d=identicon&r=PG", "display_name": "kenorb", "link": "https://stackoverflow.com/users/55075/kenorb"}, "edited": false, "score": 0, "creation_date": 1424361041, "post_id": 28594614, "comment_id": 45525105, "body": "I have added the code. thanks."}], "owner": {"reputation": 39, "user_id": 1816574, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/02fcde8b3e51fe996b8b295e2fa7b64c?s=128&d=identicon&r=PG", "display_name": "user1816574", "link": "https://stackoverflow.com/users/1816574/user1816574"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1586, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1424362958, "creation_date": 1424296193, "last_edit_date": 1424361006, "question_id": 28594614, "link": "https://stackoverflow.com/questions/28594614/how-to-set-up-ffmpeg-options-for-hls", "title": "How to set up ffmpeg options for HLS?", "body": "<p>I have a streaming device that streams mpegts video and audio. I am trying to capture those streams and save them multiple .ts file using HLS of ffmpeg. </p>\n\n<p>So, I have been successful in capturing and saving the streams in a single .ts file. It seems like when I send the output file to be .m3u8, ffmpeg automatically chooses hls demuxer.  But, doing so I get a floating point exception.\nHere is my simple code...</p>\n\n<pre><code>static int ipcam_streaming_main_configure_input_parameters(const char *p_ifilename, AVFormatContext **ppx_ifmt_ctx)\n\n{\n   AVStream *px_istream          = NULL;\n   AVCodecContext *px_icodec_ctx = NULL;\n   int ret                       = -1;\n   unsigned int i                = 0;\n   enum AVCodecID input_codec_id = AV_CODEC_ID_NONE;\n   AVCodec *p_decoder            = NULL;\n\n\n   if (avformat_open_input(ppx_ifmt_ctx, p_ifilename, NULL, NULL) &lt; 0)\n\n   {\n      printf(\"%s(): avformat_open_input() failed\\n\", __FUNCTION__);\n\n   }\n   else if (avformat_find_stream_info(*ppx_ifmt_ctx, NULL) &lt; 0)\n   {\n      printf(\"%s(): avformat_find_stream_info() failed\\n\", __FUNCTION__);\n   }\n   else\n   {\n      /* find the input streams to be remuxed */\n      for (i = 0; i &lt; (*ppx_ifmt_ctx)-&gt;nb_streams; i++)\n      {\n         /* get the stream, codec context for the stream */\n         px_istream = (*ppx_ifmt_ctx)-&gt;streams[i];\n         px_icodec_ctx = px_istream-&gt;codec;\n\n         if ((AVMEDIA_TYPE_VIDEO == px_icodec_ctx-&gt;codec_type)\n             || (AVMEDIA_TYPE_AUDIO == px_icodec_ctx-&gt;codec_type))\n         {\n            /* get the codec_id for the audio/video stream */\n            input_codec_id = px_icodec_ctx-&gt;codec_id;\n\n            /* get the decoder for the input codec id */\n            p_decoder = avcodec_find_decoder(px_icodec_ctx-&gt;codec_id);\n\n            /* Open decoder for the input codec audio/video */\n            ret = avcodec_open2(px_icodec_ctx,\n                                p_decoder,\n                                NULL);\n            if (ret &lt; 0)\n            {\n               printf(\"%s(): avcodec_open2() failed\\n\", __FUNCTION__);\n            }\n            else\n            {\n               printf(\"Input stream type &lt;%d&gt; with codec_id &lt;%d&gt; found and decoder opened\\n\", px_icodec_ctx-&gt;codec_type, input_codec_id);\n            }\n         }\n      }\n   }\n\n   /* dump the data into stdout */\n   av_dump_format(*ppx_ifmt_ctx, 0, p_ifilename, 0);\n\n   return ret;\n}\n\nstatic int ipcam_streaming_main_configure_output_parameters(const char *p_ofilename,\n                                                            AVFormatContext *px_ifmt_ctx,\n                                                            AVFormatContext **ppx_ofmt_ctx)\n{\n   AVStream *px_ostream       = NULL;\n   AVStream *px_istream       = NULL;\n   AVCodecContext *px_dec_ctx = NULL;\n   AVCodecContext *px_enc_ctx = NULL;\n   int ret                    = -1;\n   unsigned int i             = 0;\n\n   if ((NULL == p_ofilename) || (NULL == px_ifmt_ctx) || (NULL == ppx_ofmt_ctx))\n   {\n      printf(\"%s(): NULL arg(s) &lt;%p, %p, %p&gt;\", __FUNCTION__, p_ofilename, px_ifmt_ctx, ppx_ofmt_ctx);\n      return -1;\n   }\n\n   /* remove the output file if already exists */\n   remove(p_ofilename);\n\n   /* allocate the output format context */\n   if (avformat_alloc_output_context2(ppx_ofmt_ctx, NULL, NULL, p_ofilename) &lt; 0)\n   {\n      printf(\"%s(): avformat_alloc_output_context2() failed\\n\", __FUNCTION__);\n   }\n   else\n   {\n      for (i = 0; i &lt; px_ifmt_ctx-&gt;nb_streams; i++)\n      {\n         if ((AVMEDIA_TYPE_VIDEO == px_ifmt_ctx-&gt;streams[i]-&gt;codec-&gt;codec_type)\n             || (AVMEDIA_TYPE_AUDIO == px_ifmt_ctx-&gt;streams[i]-&gt;codec-&gt;codec_type))\n         {\n            printf(\"Stream &lt;%d&gt; is type &lt;%d&gt;: Adding to output stream\\n\", i, px_ifmt_ctx-&gt;streams[i]-&gt;codec-&gt;codec_type);\n\n            /* create a new output stream */\n            px_ostream = avformat_new_stream(*ppx_ofmt_ctx, NULL);\n            if (NULL == px_ostream)\n            {\n               printf(\"%s(): avformat_new_stream() failed\\n\", __FUNCTION__);\n            }\n            else\n            {\n               px_istream = px_ifmt_ctx-&gt;streams[i];\n               px_dec_ctx = px_istream-&gt;codec;\n               px_enc_ctx = px_ostream-&gt;codec;\n\n               /* Since, we do not need to encode the video stream, it is just remuxing\n                  just copying the input codec context to output is sufficient */\n               ret = avcodec_copy_context((*ppx_ofmt_ctx)-&gt;streams[i]-&gt;codec,\n                                          px_ifmt_ctx-&gt;streams[i]-&gt;codec);\n\n               if ((*ppx_ofmt_ctx)-&gt;oformat-&gt;flags &amp; AVFMT_GLOBALHEADER)\n               {\n                  px_enc_ctx-&gt;flags |= CODEC_FLAG_GLOBAL_HEADER;\n               }\n            }\n         }\n         else\n         {\n            printf(\"Stream &lt;%d&gt; is Unknown: Ignore it \\n\", i);\n         }\n      }\n\n      /* dump the output media file into stdout */\n      av_dump_format(*ppx_ofmt_ctx, 0, p_ofilename, 1);\n\n      if (0 == ((*ppx_ofmt_ctx)-&gt;oformat-&gt;flags &amp; AVFMT_NOFILE))\n      {\n         /* open the output media file so that we can write the data into it */\n         ret = avio_open(&amp;(*ppx_ofmt_ctx)-&gt;pb, p_ofilename, AVIO_FLAG_WRITE);\n         if (ret &lt; 0)\n         {\n            printf(\"%s(): avio_open() failed\\n\", __FUNCTION__);\n         }\n         else\n         {\n            /* init muxer, write output file header */\n            ret = avformat_write_header((*ppx_ofmt_ctx), NULL);\n            if (ret &lt; 0)\n            {\n               printf(\"%s(): avformat_write_header() failed\\n\", __FUNCTION__);\n            }\n         }\n      }\n   }\n\n   return ret;\n}\n\n\nint main(int argnum, char **argv)\n{\n   AVFormatContext *px_ifmt_ctx = NULL;\n   AVFormatContext *px_ofmt_ctx = NULL;\n   AVPacket packet              = {0};\n   enum AVMediaType type        = AVMEDIA_TYPE_UNKNOWN;\n   unsigned int stream_index    = -1;\n   unsigned int i               = 0;\n   int ret                      = -1;\n\n   if (argnum != 3)\n   {\n      printf(\"Please enough number of parameters\\n\");\n      return -1;\n   }\n\n   /* register all the services requred */\n   av_register_all();\n   avformat_network_init();\n\n   if (0 != ipcam_streaming_main_configure_input_parameters(argv[1],\n                                                            &amp;px_ifmt_ctx))\n   {\n      printf(\"%s(): ipcam_streaming_main_configure_iput_parameters() failed\\n\", __FUNCTION__);\n   }\n   else if (0 != ipcam_streaming_main_configure_output_parameters(argv[2],\n                                                                  px_ifmt_ctx,\n                                                                  &amp;px_ofmt_ctx)) \n   {\n      printf(\"%s(): ipcam_streaming_main_configure_output_parameters() failed\\n\", __FUNCTION__);\n   }\n   else\n   {\n      printf(\"Input and output configuration done successfully: Now reading packets\\n\");\n      while (true)\n      {\n         if ((ret = av_read_frame(px_ifmt_ctx, &amp;packet)) &lt; 0)\n         {\n            printf(\"av_read_frame() failed with error &lt;%d&gt;: Exit\\n\", ret);\n            break;\n         }\n\n         /* get the stream index and codec type of the packet read */\n         stream_index = packet.stream_index;\n         type = px_ifmt_ctx-&gt;streams[stream_index]-&gt;codec-&gt;codec_type;\n\n         /* remux only if the type is video, otherwise ignore it */\n         if ((AVMEDIA_TYPE_VIDEO == type)\n             || (AVMEDIA_TYPE_AUDIO == type))\n         {\n            printf(\"Remuxing the stream type &lt;%d&gt;, frame with stream index &lt;%d&gt;\\n\", type, stream_index);\n\n            /* remux this frame without reencoding */\n            packet.dts = av_rescale_q_rnd(packet.dts,\n                                          px_ifmt_ctx-&gt;streams[stream_index]-&gt;time_base,\n                                          px_ofmt_ctx-&gt;streams[stream_index]-&gt;time_base,\n                                          AV_ROUND_NEAR_INF | AV_ROUND_PASS_MINMAX);\n\n            packet.pts = av_rescale_q_rnd(packet.pts,\n                                          px_ifmt_ctx-&gt;streams[stream_index]-&gt;time_base,\n                                          px_ofmt_ctx-&gt;streams[stream_index]-&gt;time_base,\n                                          AV_ROUND_NEAR_INF | AV_ROUND_PASS_MINMAX);\n\n            /* write the frame into the output media file */\n            ret = av_write_frame(px_ofmt_ctx, &amp;packet);\n\n            if (ret &lt; 0)\n            {\n               printf(\"Ignoring video packet stream index &lt;%d&gt;\\n\", packet.stream_index);\n            }\n\n            /* free the packet for next use */\n            av_free_packet(&amp;packet);\n         }\n         else\n         {\n            printf(\"Ignoring stream index &lt;%d&gt;, type &lt;%d&gt;\\n\", packet.stream_index, type);\n         }\n      }\n   }\n\n   /* write the trailer */\n   av_write_trailer(px_ofmt_ctx);\n\n   av_free_packet(&amp;packet);\n\n   for (i = 0; i &lt; px_ifmt_ctx-&gt;nb_streams; i++)\n   {\n      /* close the input codec that has been opened */\n      avcodec_close(px_ifmt_ctx-&gt;streams[i]-&gt;codec);\n\n      if ((NULL != px_ofmt_ctx) &amp;&amp; (px_ofmt_ctx-&gt;nb_streams &gt; i) &amp;&amp; \n          (NULL != px_ofmt_ctx-&gt;streams[i]) &amp;&amp; ( NULL != px_ofmt_ctx-&gt;streams[i]-&gt;codec))\n      {\n         /* close the output code */\n         avcodec_close(px_ofmt_ctx-&gt;streams[i]-&gt;codec);\n      }\n   }\n\n   /* close the input */\n   avformat_close_input(&amp;px_ifmt_ctx);\n\n   if ((NULL != px_ofmt_ctx) &amp;&amp; (0 == (px_ofmt_ctx-&gt;oformat-&gt;flags &amp; AVFMT_NOFILE)))\n   {\n      /* close the output context */\n      avio_close(px_ofmt_ctx-&gt;pb);\n   }\n\n   /* free the output context */\n   avformat_free_context(px_ofmt_ctx);\n\n   return ret;\n}\n</code></pre>\n\n<p>So, If i pass the output filename to be .m3u8 file, it gives a floating point exception.</p>\n"}, {"tags": ["c", "printf", "double", "scanf"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424296396, "post_id": 28594606, "comment_id": 45495929, "body": "Use the <code>long</code> datatype instead of <code>int</code>, not double, since it is floating point as long as you need only integer arithmetic. As a format specifier use <code>%ld</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424297166, "post_id": 28594606, "comment_id": 45496325, "body": "<code>printf(&quot;\\n You entered: %lf&quot;, &amp;number);</code> --&gt; <code>printf(&quot;\\n You entered: %f&quot;, number);</code>  Drop <code>l</code> and <code>&amp;</code>."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1424297295, "post_id": 28594606, "comment_id": 45496392, "body": "Start by checking return value of scanf..."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4531217, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/86fe086657a7f7c991533ab2a78cde6c?s=128&d=identicon&r=PG&f=1", "display_name": "kagushajeiel", "link": "https://stackoverflow.com/users/4531217/kagushajeiel"}, "edited": false, "score": 0, "creation_date": 1424296502, "post_id": 28594661, "comment_id": 45495979, "body": "You mean removing the ampersand sign? &quot;&amp;&quot;. The output still shows &quot;0.00000&quot; after I removed it -&gt; build -&gt; run."}, {"owner": {"reputation": 80, "user_id": 3589654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a18caf2805aee949e91e99a03e5111?s=128&d=identicon&r=PG&f=1", "display_name": "Jurica Penjgu\u0161i\u0107", "link": "https://stackoverflow.com/users/3589654/jurica-penjgu%c5%a1i%c4%87"}, "reply_to_user": {"reputation": 81, "user_id": 4531217, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/86fe086657a7f7c991533ab2a78cde6c?s=128&d=identicon&r=PG&f=1", "display_name": "kagushajeiel", "link": "https://stackoverflow.com/users/4531217/kagushajeiel"}, "edited": false, "score": 0, "creation_date": 1424296903, "post_id": 28594661, "comment_id": 45496200, "body": "Try without &amp;, and save project. I tried this code without ampersend and it is workin. Save your project"}], "tags": [], "owner": {"reputation": 80, "user_id": 3589654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a18caf2805aee949e91e99a03e5111?s=128&d=identicon&r=PG&f=1", "display_name": "Jurica Penjgu\u0161i\u0107", "link": "https://stackoverflow.com/users/3589654/jurica-penjgu%c5%a1i%c4%87"}, "is_accepted": false, "score": 1, "last_activity_date": 1424296376, "creation_date": 1424296376, "answer_id": 28594661, "question_id": 28594606, "link": "https://stackoverflow.com/questions/28594606/scanning-and-printing-variable-data-type-double-in-c/28594661#28594661", "title": "Scanning and printing variable data type &quot;double&quot; in C", "body": "<p>The problem is in function <code>printf(\"%lf\",&amp;number)</code> should be <code>printf(\"%lf\",number)</code></p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424297323, "post_id": 28594717, "comment_id": 45496406, "body": "Maybe <code>number % div</code> instead of <code>fmod(number,div)</code>?"}, {"owner": {"reputation": 9113, "user_id": 2097780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db5b03704c129196a4e9415e55413ce6?s=128&d=identicon&r=PG", "display_name": "kirbyfan64sos", "link": "https://stackoverflow.com/users/2097780/kirbyfan64sos"}, "reply_to_user": {"reputation": 81, "user_id": 4531217, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/86fe086657a7f7c991533ab2a78cde6c?s=128&d=identicon&r=PG&f=1", "display_name": "kagushajeiel", "link": "https://stackoverflow.com/users/4531217/kagushajeiel"}, "edited": false, "score": 0, "creation_date": 1424300353, "post_id": 28594717, "comment_id": 45497824, "body": "@kagushajeiel No problem. Also, try doing the change that chux mentioned in a comment on this answer."}], "tags": [], "owner": {"reputation": 9113, "user_id": 2097780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db5b03704c129196a4e9415e55413ce6?s=128&d=identicon&r=PG", "display_name": "kirbyfan64sos", "link": "https://stackoverflow.com/users/2097780/kirbyfan64sos"}, "is_accepted": true, "score": 0, "last_activity_date": 1424300294, "last_edit_date": 1424300294, "creation_date": 1424296584, "answer_id": 28594717, "question_id": 28594606, "link": "https://stackoverflow.com/questions/28594606/scanning-and-printing-variable-data-type-double-in-c/28594717#28594717", "title": "Scanning and printing variable data type &quot;double&quot; in C", "body": "<p>Compiling with a compiler with warnings shows the issue:</p>\n\n<pre><code>dbl.c:13:31: warning: format specifies type 'double' but the argument has type\n     'double *' [-Wformat]\nprintf(\"\\n You entered: %lf\", &amp;number);\n                       ~~~   ^~~~~~~\n1 warning generated.\n</code></pre>\n\n<p>Change that line to:</p>\n\n<pre><code>printf(\"\\n You entered: %lf\", number);\n</code></pre>\n\n<p>You're trying to print the number's address instead of the number.</p>\n\n<p>Also, try adding a newline to the end:</p>\n\n<pre><code>printf(\"\\n The highest number is %lf\\n\", highest);\n</code></pre>\n\n<p>Since, you're working with integral numbers, though, I'd advise you to just use a <code>long long</code>, assuming you have a C99 compiler:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\nlong long number;\nlong long div = 2;\nlong long highest = 2;\n\nprintf(\"Please input a number: \");\nscanf(\"%lld\", &amp;number);\n\nprintf(\"\\n You entered: %lld\", number);\n\nwhile(number!=0){\n    if(number % div != 0){div = div + 1;}\n    else{\n    number = number / div;\n    printf(\"\\n %lld\", div);\n\n    if(highest &lt; div){highest = div;}\n    if(number == 1){break;}\n    }\n}\nprintf(\"\\n The highest number is %lld\\n\", highest);\n\nreturn 0;}\n</code></pre>\n\n<p>You can also reformat your code a bit for readability:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main() {\n    long long number, div, highest;\n    div = highest = 2;\n\n    printf(\"Please input a number: \");\n    scanf(\"%lld\", &amp;number);\n\n    printf(\"\\n You entered: %lld\", number);\n\n    while(number != 0) {\n        if (number % div != 0) div += 1;\n        else {\n            number /= div;\n            printf(\"\\n %lld\", div);\n\n            if (highest &lt; div) highest = div;\n            if (number == 1) break;\n        }\n    }\n    printf(\"\\n The highest number is %lld\\n\", highest);\n\n    return 0;\n}\n</code></pre>\n\n<p>I would also advise doing the newlines a little differently, which leaves you with:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main() {\n    long long number, div, highest;\n    div = highest = 2;\n\n    printf(\"Please input a number: \");\n    scanf(\"%lld\", &amp;number);\n\n    printf(\"\\n You entered: %lld\\n\", number);\n\n    while(number != 0) {\n        if (number % div != 0) div += 1;\n        else {\n            number /= div;\n            printf(\"%lld\\n\", div);\n\n            if (highest &lt; div) highest = div;\n            if (number == 1) break;\n        }\n    }\n    printf(\"The highest number is %lld\\n\", highest);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 4531217, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/86fe086657a7f7c991533ab2a78cde6c?s=128&d=identicon&r=PG&f=1", "display_name": "kagushajeiel", "link": "https://stackoverflow.com/users/4531217/kagushajeiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20791, "favorite_count": 0, "accepted_answer_id": 28594717, "answer_count": 2, "score": 1, "last_activity_date": 1424300294, "creation_date": 1424296161, "last_edit_date": 1495540821, "question_id": 28594606, "link": "https://stackoverflow.com/questions/28594606/scanning-and-printing-variable-data-type-double-in-c", "title": "Scanning and printing variable data type &quot;double&quot; in C", "body": "<p>I'm studying algorithms and would love to learn. My problem is this, I can't output a number \"600851475143\" using the integer data type in C. So I switched to doubles. However the output is \"0.0000\". Can someone kindly tell me what I'm doing wrong? I simply want to scan and print any number in the double data type then I'm going to focus on getting the highest prime factor :)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\ndouble number;\ndouble div = 2;\ndouble highest = 2;\n\nprintf(\"Please input a number: \");\nscanf(\"%lf\", &amp;number);\n\nprintf(\"\\n You entered: %lf\", &amp;number);\n\nwhile(number!=0){\n    if(fmod(number,div) != 0){div = div + 1;}\n    else{\n    number = number / div;\n    printf(\"\\n %lf\", div);\n\n    if(highest &lt; div){highest = div;}\n    if(number == 1){break;}\n    }\n}\nprintf(\"\\n The highest number is %lf\", highest);\n\nreturn 0;}\n</code></pre>\n\n<p>What I did:</p>\n\n<ol>\n<li><p>Searched for \"scan double in c\" in google, learned the \"%lf\" is the right way to go, but the program doesn't show anything.</p></li>\n<li><p>I checked out various questions in Stackoverflow like: </p></li>\n</ol>\n\n<p><a href=\"https://stackoverflow.com/questions/210590/why-does-scanf-need-lf-for-doubles-when-printf-is-okay-with-just-f\">Why does scanf need lf for doubles</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/13730188/reading-in-double-values-with-scanf-in-c\">Reading in double values with scanf in c</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/2386772/difference-between-float-and-double\">Difference between float and double</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/24857048/read-and-write-within-a-file-in-c-double-it\">Read and Write within a file in C (double it)</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/16463661/reading-and-writing-double-precision-from-to-files\">Reading and writing double precision from/to files</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/5098558/float-vs-double-precision\">float vs. double precision</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/13730188/reading-in-double-values-with-scanf-in-c\">Reading in double values with scanf in c</a></p>\n\n<ol start=\"3\">\n<li>Other sites I searched:</li>\n</ol>\n\n<p><a href=\"http://www.technoburst.net/2011/07/reading-double-in-c-using-scanf.html\" rel=\"nofollow noreferrer\">http://www.technoburst.net/2011/07/reading-double-in-c-using-scanf.html</a></p>\n\n<p>Thank you for enlightening me with your knowledge.</p>\n"}, {"tags": ["ios", "c", "swift"], "answers": [{"tags": [], "owner": {"reputation": 340494, "user_id": 77567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f74022962edfb2f4bf9e7f497cd14eb?s=128&d=identicon&r=PG", "display_name": "rob mayoff", "link": "https://stackoverflow.com/users/77567/rob-mayoff"}, "is_accepted": true, "score": 2, "last_activity_date": 1424297427, "creation_date": 1424297427, "answer_id": 28594927, "question_id": 28594534, "link": "https://stackoverflow.com/questions/28594534/swift-string-to-unsigned-char-cunsignedchar/28594927#28594927", "title": "Swift String to unsigned char [](CUnsignedChar)", "body": "<p>If you want to convert a Swift string to an immutable C string to pass to a C function, try this:</p>\n\n<pre><code>let s: String = \"hello, world!\"\ns.nulTerminatedUTF8.withUnsafeBufferPointer { p -&gt; Void in\n    puts(UnsafePointer&lt;Int8&gt;(p.baseAddress))\n    Void()\n}\n</code></pre>\n\n<p>You may need to use <code>UnsafePointer&lt;UInt8&gt;</code> if your function takes an <code>unsigned char *</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 5258951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cea2fd91ed8fdaa3d022140fcaaf425?s=128&d=identicon&r=PG&f=1", "display_name": "ddfish", "link": "https://stackoverflow.com/users/5258951/ddfish"}, "is_accepted": false, "score": 0, "last_activity_date": 1449643353, "creation_date": 1449643353, "answer_id": 34172287, "question_id": 28594534, "link": "https://stackoverflow.com/questions/28594534/swift-string-to-unsigned-char-cunsignedchar/34172287#34172287", "title": "Swift String to unsigned char [](CUnsignedChar)", "body": "<p>I turn String to NSData first ,then turn NSData to CUnsignedChar array </p>\n\n<pre><code>if let data = str.dataUsingEncoding(NSUTF8StringEncoding){\n        var rawData = [CUnsignedChar](count: data.length,repeatedValue: 0)\n        data.getBytes(&amp;rawData, length: data.length)\n\n}\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 2030194, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/NlS1E.png?s=128&g=1", "display_name": "Rodrigo Montano", "link": "https://stackoverflow.com/users/2030194/rodrigo-montano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2393, "favorite_count": 0, "accepted_answer_id": 28594927, "answer_count": 2, "score": 0, "last_activity_date": 1449643353, "creation_date": 1424295901, "question_id": 28594534, "link": "https://stackoverflow.com/questions/28594534/swift-string-to-unsigned-char-cunsignedchar", "title": "Swift String to unsigned char [](CUnsignedChar)", "body": "<p>Hello i'm trying to use an old legacy C library that uses buffers (unsigned char []) to transform the data. The main issue here is that I couldn't find a way to transform a String to a CUnsignedChar and then be able to alloc that buffer to a UnsafeMutablePointer</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1424295863, "post_id": 28594473, "comment_id": 45495657, "body": "Google &quot;nagle algorithm&quot;."}, {"owner": {"reputation": 251, "user_id": 2521723, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08bdf37e11bc3f0fe09aa4cc2751961a?s=128&d=identicon&r=PG", "display_name": "decypher", "link": "https://stackoverflow.com/users/2521723/decypher"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1424296020, "post_id": 28594473, "comment_id": 45495733, "body": "so it seems like it&#39;s a congestion problem?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1424296131, "post_id": 28594473, "comment_id": 45495786, "body": "No. It seems like it&#39;s the Nagle algorithm, which delays sends so it can combine them with future sens."}, {"owner": {"reputation": 251, "user_id": 2521723, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08bdf37e11bc3f0fe09aa4cc2751961a?s=128&d=identicon&r=PG", "display_name": "decypher", "link": "https://stackoverflow.com/users/2521723/decypher"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1424296430, "post_id": 28594473, "comment_id": 45495942, "body": "but how can there be a delay when it&#39;s not even coming through??"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1424296581, "post_id": 28594473, "comment_id": 45496020, "body": "The Nagle algorithm delays SENDING the packet."}, {"owner": {"reputation": 251, "user_id": 2521723, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08bdf37e11bc3f0fe09aa4cc2751961a?s=128&d=identicon&r=PG", "display_name": "decypher", "link": "https://stackoverflow.com/users/2521723/decypher"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1424296638, "post_id": 28594473, "comment_id": 45496047, "body": "so does that mean the packet will be received sooner or later?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1424296669, "post_id": 28594473, "comment_id": 45496065, "body": "Yes. It shouldn&#39;t be delayed very long, just a large fraction of a second."}, {"owner": {"reputation": 251, "user_id": 2521723, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08bdf37e11bc3f0fe09aa4cc2751961a?s=128&d=identicon&r=PG", "display_name": "decypher", "link": "https://stackoverflow.com/users/2521723/decypher"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1424297007, "post_id": 28594473, "comment_id": 45496259, "body": "I&#39;m sorry, but I&#39;m confused. The data from the second send function is not sent or received. It is completely missing. I can wait for 1 minute, and it don&#39;t see it in the wireshark. So I don&#39;t think it&#39;s delayed. The second send function is not sent at all..."}], "owner": {"reputation": 251, "user_id": 2521723, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08bdf37e11bc3f0fe09aa4cc2751961a?s=128&d=identicon&r=PG", "display_name": "decypher", "link": "https://stackoverflow.com/users/2521723/decypher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1424296179, "creation_date": 1424295647, "last_edit_date": 1424296179, "question_id": 28594473, "link": "https://stackoverflow.com/questions/28594473/two-send-functions-only-sending-one", "title": "two send functions, only sending one", "body": "<p>I'm trying to send two send functions to PIC, and read it through the wireshark.</p>\n\n<pre><code>send(StreamSock, tbfr1, tlen1, 0);\nDelayMsec(20000);\nsend(StreamSock, tbfr2, tlen2, 0);\n</code></pre>\n\n<p>tbfr1 is 90 bytes, tbfr2 is 584 bytes.</p>\n\n<p>But the second send function is not sent.</p>\n\n<p>If I put only either one function, they are sent. But If two send functions only send the first one.</p>\n\n<p>Does anyone know the issue with this?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "ios", "c", "image", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 4225236, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4cad1a27a51b42f30978791eb9f71473?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Tchadenis", "link": "https://stackoverflow.com/users/4225236/steven-tchadenis"}, "edited": false, "score": 0, "creation_date": 1424371468, "post_id": 28597538, "comment_id": 45531996, "body": "Thank you for all this information. I&#39;ve been trying to run Instruments myself but am getting multiple &quot;Apple Mach-O Linker Error&quot; issues.   I will try reducing the camera images, because to be honest I&#39;m under-qualified to make major changes to your code.  Of course, if I do happen to stumble upon any improvements, I will send a pull request."}, {"owner": {"reputation": 30809, "user_id": 1375695, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/df08e9e25d8fa6007a35d9c906864516?s=128&d=identicon&r=PG", "display_name": "foundry", "link": "https://stackoverflow.com/users/1375695/foundry"}, "reply_to_user": {"reputation": 151, "user_id": 4225236, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4cad1a27a51b42f30978791eb9f71473?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Tchadenis", "link": "https://stackoverflow.com/users/4225236/steven-tchadenis"}, "edited": false, "score": 1, "creation_date": 1424372182, "post_id": 28597538, "comment_id": 45532377, "body": "@Ryan, see my update. Resizing the camera output is your best bet for now."}, {"owner": {"reputation": 151, "user_id": 4225236, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4cad1a27a51b42f30978791eb9f71473?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Tchadenis", "link": "https://stackoverflow.com/users/4225236/steven-tchadenis"}, "edited": false, "score": 0, "creation_date": 1424380363, "post_id": 28597538, "comment_id": 45537001, "body": "Ok. If you make any progress on the tiling and cacheing let me know! Thanks for everything."}], "tags": [], "owner": {"reputation": 30809, "user_id": 1375695, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/df08e9e25d8fa6007a35d9c906864516?s=128&d=identicon&r=PG", "display_name": "foundry", "link": "https://stackoverflow.com/users/1375695/foundry"}, "is_accepted": true, "score": 6, "last_activity_date": 1446729250, "last_edit_date": 1446729250, "creation_date": 1424311689, "answer_id": 28597538, "question_id": 28594416, "link": "https://stackoverflow.com/questions/28594416/issue-with-stitching-images-using-opencv-for-ios/28597538#28597538", "title": "Issue with stitching images using openCV for iOS", "body": "<p>You are hitting memory limits. The four demo images included are 720 x 960 px, whereas you are using the full resolution image from the device camera.</p>\n\n<p>Here is an Allocations trace in instruments leading up to the crash, stitching two images from the camera...</p>\n\n<p><img src=\"https://i.stack.imgur.com/q2kv7.png\" alt=\"enter image description here\"> </p>\n\n<p>The point of this github sample is to illustrate a few things...<br>\n(1) how to integrate openCV with iOS;<br>\n(2) how to separate Objective-C and C++ code using a wrapper;<br>\n(3) how to implement the <em>most basic</em> stitching function in openCV. </p>\n\n<p>It is best regarded as a 'hello world' project for iOS+openCV, and was not designed to work robustly with camera images. If you want to use my code as-is, I would suggest first reducing your camera images to a manageable size (e.g. max 1000 on the long side). </p>\n\n<p>In any case the openCV framework you are using is as old as the project. Thanks to your question, I have just updated it (now arm64-friendly), although the memory limitations still apply. </p>\n\n<p>V2, <a href=\"https://github.com/foundry/OpenCVSwiftStitch\" rel=\"nofollow noreferrer\">OpenCVSwiftStitch</a> may be a more interesting starting-point for your experiments - the interface is written in Swift, and it uses cocoaPods to keep up with openCV versions (albeit currently fixed to 2.4.9.1 as 2.4.10 breaks everything). So it still illustrates the three points, and also shows how to use Swift with C++ using an Objective-C wrapper as an intermediary.</p>\n\n<p><strike>I may be able to improve memory handling (by passing around pointers). If so I will push an update to both v1 and v2. If <em>you</em> can make any improvements, please send a pull request.</strike></p>\n\n<p><strong>update</strong> i've had another look and I am fairly sure it won't be possible to improve the memory handling without getting deeper into the openCV stitching algorithms. The images are already allocated on the heap so there are no improvements to be made there. I expect the best bet would be to tile and cache the intermediate images which it seems openCV is creating as part of the process. I will post an update if I get any further with this. Meanwhile, resizing the camera images is the way to go.</p>\n\n<p><strong>update 2</strong><br>\nSome while later, I found the underlying cause of the issue. When you use images from the iOS camera as your inputs, if those images are in portrait orientation they will have the incorrect input dimensions (and orientation) for openCV. This is because all iOS camera photos are taken natively as 'landscape left'. The pixel dimensions are landscape, with the home button on the right. To display portrait, the 'imageOrientation' flag is set to UIImageOrientationRight. This is <em>only</em> an indication to the OS to rotate the image 90 degrees to the right for display. </p>\n\n<p>The image is stored unrotated, landscape left. The incorrect pixel orientation leads to higher memory requirements and unpredictable/broken results in openCV.  </p>\n\n<p>I have <a href=\"https://github.com/foundry/OpenCVSwiftStitch/issues/12\" rel=\"nofollow noreferrer\">fixed this</a> in the latest version of openCVSwiftStitch: when necessary images are rotated pixelwise before adding to the openCV pipeline.</p>\n"}], "owner": {"reputation": 151, "user_id": 4225236, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4cad1a27a51b42f30978791eb9f71473?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Tchadenis", "link": "https://stackoverflow.com/users/4225236/steven-tchadenis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1444, "favorite_count": 2, "accepted_answer_id": 28597538, "answer_count": 1, "score": 2, "last_activity_date": 1446729250, "creation_date": 1424295446, "last_edit_date": 1438783646, "question_id": 28594416, "link": "https://stackoverflow.com/questions/28594416/issue-with-stitching-images-using-opencv-for-ios", "title": "Issue with stitching images using openCV for iOS", "body": "<p>I'm trying to adopt the code from here:</p>\n\n<p><a href=\"https://github.com/foundry/OpenCVStitch\" rel=\"nofollow\">https://github.com/foundry/OpenCVStitch</a></p>\n\n<p>into my program. However, I've run up against a wall. This code stitches images together that are already existing. The program I'm trying to make will stitch images together that the user took. The error I'm getting is that when I pass the images to the stitch function, it is saying they are of invalid size (0 x 0). </p>\n\n<p>Here is the stitching function: </p>\n\n<pre><code>- (IBAction)stitchImages:(UIButton *)sender {\n    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{\n\n\n        NSArray* imageArray = [NSArray arrayWithObjects:\n                               chosenImage, chosenImage2, nil];\n        UIImage* stitchedImage = [CVWrapper processWithArray:imageArray]; // error occurring within processWithArray function\n        dispatch_async(dispatch_get_main_queue(), ^{\n\n            NSLog (@\"stitchedImage %@\",stitchedImage);\n            UIImageView *imageView = [[UIImageView alloc] initWithImage:stitchedImage];\n            self.imageView = imageView;\n            [self.scrollView addSubview:imageView];\n            self.scrollView.backgroundColor = [UIColor blackColor];\n            self.scrollView.contentSize = self.imageView.bounds.size;\n            self.scrollView.maximumZoomScale = 4.0;\n            self.scrollView.minimumZoomScale = 0.5;\n            self.scrollView.contentOffset = CGPointMake(-(self.scrollView.bounds.size.width-self.imageView.bounds.size.width)/2, -(self.scrollView.bounds.size.height-self.imageView.bounds.size.height)/2);\n            [self.spinner stopAnimating];\n\n        });\n\n\n    });\n\n}\n</code></pre>\n\n<p>chosenImage and chosenImage2 are images the user has taken using these two functions:</p>\n\n<pre><code>- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {\n    savedImage = info[UIImagePickerControllerOriginalImage];\n\n    // display photo in the correct UIImageView\n    switch(image_location){\n        case 1:\n            chosenImage = info[UIImagePickerControllerOriginalImage];\n            self.imageView2.image = chosenImage;\n            image_location++;\n            break;\n        case 2:\n            chosenImage2 = info[UIImagePickerControllerOriginalImage];\n            self.imageView3.image = chosenImage2;\n            image_location--;\n            break;\n\n    }\n    // if user clicked \"take photo\", it should save photo\n    // if user clicked \"select photo\", it should not save photo\n    /*if (should_save){\n     UIImageWriteToSavedPhotosAlbum(chosenImage, nil, nil, nil);\n     }*/\n    [picker dismissViewControllerAnimated:YES completion:NULL];\n\n}\n\n- (IBAction)takePhoto:(UIButton *)sender {\n    UIImagePickerController *picker = [[UIImagePickerController alloc] init];\n    picker.delegate = self;\n    picker.allowsEditing = NO;\n    picker.sourceType = UIImagePickerControllerSourceTypeCamera;\n    //last_pressed = 1;\n    should_save = 1;\n    [self presentViewController:picker animated:YES completion:NULL];\n}\n</code></pre>\n\n<p>The stitchesImages function passes an array of these two images to this function:</p>\n\n<pre><code>+ (UIImage*) processWithArray:(NSArray*)imageArray\n{\n    if ([imageArray count]==0){\n        NSLog (@\"imageArray is empty\");\n        return 0;\n        }\n    cv::vector&lt;cv::Mat&gt; matImages;\n\n    for (id image in imageArray) {\n        if ([image isKindOfClass: [UIImage class]]) {\n            cv::Mat matImage = [image CVMat3];\n            NSLog (@\"matImage: %@\",image);\n            matImages.push_back(matImage);\n        }\n    }\n    NSLog (@\"stitching...\");\n    cv::Mat stitchedMat = stitch (matImages); // error occurring within stitch function\n    UIImage* result =  [UIImage imageWithCVMat:stitchedMat];\n    return result;\n}\n</code></pre>\n\n<p>This is where the program is running into a problem. When it is passed images that are saved locally in the application file, it works fine. However, when it is passed images that are saved in variables (chosenImage and chosenImage2), it doesn't work. </p>\n\n<p>Here is the stitch function that is being called in the processWithArray function and is causing the error:</p>\n\n<pre><code>cv::Mat stitch (vector&lt;Mat&gt;&amp; images)\n{\n    imgs = images;\n    Mat pano;\n    Stitcher stitcher = Stitcher::createDefault(try_use_gpu);\n    Stitcher::Status status = stitcher.stitch(imgs, pano);\n\n    if (status != Stitcher::OK)\n        {\n        cout &lt;&lt; \"Can't stitch images, error code = \" &lt;&lt; int(status) &lt;&lt; endl;\n            //return 0;\n        }\n    return pano;\n}\n</code></pre>\n\n<p>The error is \"Can't stitch images, error code = 1\".</p>\n"}, {"tags": ["c", "list", "segmentation-fault"], "comments": [{"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "edited": false, "score": 0, "creation_date": 1424295570, "post_id": 28594300, "comment_id": 45495484, "body": "In <code>AppendLast()</code> you forgot to set <code>L.last</code> but it is not the source of segmentation fault"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1424295722, "post_id": 28594300, "comment_id": 45495572, "body": "Notice that nowhere in the AppendFirst() fuction do you update the &quot;next&quot; pointer of any node."}, {"owner": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "edited": false, "score": 4, "creation_date": 1424295834, "post_id": 28594300, "comment_id": 45495647, "body": "Don&#39;t pass structures by values. You are making copies on the stack instead of modifying original variables."}, {"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "edited": false, "score": 0, "creation_date": 1424296674, "post_id": 28594300, "comment_id": 45496071, "body": "As far can understand when you print your list it should contain just the first and last elements (print dump just the first). But I cannot see where you can have a segmentation fault."}, {"owner": {"reputation": 701, "user_id": 3288572, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/8ZVyP.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3288572/alex"}, "edited": false, "score": 0, "creation_date": 1424296686, "post_id": 28594300, "comment_id": 45496077, "body": "Thank you very much Valeri, that solved it for me. Well, it is still a long road to become good @ C."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1424296963, "post_id": 28594300, "comment_id": 45496233, "body": "Also, don&#39;t disguise pointer types with typedefs.  Among other things, it makes it harder to recognize when you are passing a structure by value, as you cannot rely on recognizing pointer types by the <code>*</code>."}], "answers": [{"tags": [], "owner": {"reputation": 701, "user_id": 3288572, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/8ZVyP.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3288572/alex"}, "is_accepted": true, "score": 1, "last_activity_date": 1424298165, "creation_date": 1424298165, "answer_id": 28595115, "question_id": 28594300, "link": "https://stackoverflow.com/questions/28594300/c-list-segmentation-fault/28595115#28595115", "title": "C List Segmentation Fault", "body": "<p>To make it work, I made two changes to listops.h, apart from calling structs by reference now.  </p>\n\n<p>First, i replaced np->next = NULL in the else-branch of AppendLast() with\nL->last = np.</p>\n\n<p>Second, i changed the condition of the while-loop from np->next!=NULL\nto np!=NULL.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n#ifndef LISTOPS_H\n#define LISTOPS_H\n\ntypedef struct NodeData{\n    int myInt;\n}nodeData, *ndp;\n\ntypedef struct Node{\n    ndp data;\n    struct Node* next;\n} node, *nodeptr;\n\ntypedef struct List{\n    nodeptr first;\n    nodeptr last;\n} list, *listptr;\n\nlist initList(list L){\n    L.first = NULL;\n    L.last = NULL;\n    return L;\n}\n\nint isListEmpty(listptr L){\n    return (L-&gt;first == NULL &amp;&amp; L-&gt;last == NULL);\n}\n\nvoid AppendFirst(listptr L, ndp item){\n    /* node erstellen */\n    nodeptr np = createNode(item);\n    /* Checken, ob Liste leer */\n    if(isListEmpty(L)){\n        L-&gt;first = np;\n        L-&gt;last = np;\n    }\n    else{\n        np-&gt;next = L-&gt;first;\n        L-&gt;first = np;\n    }\n}\n\nvoid AppendLast(listptr L, ndp item){\n    nodeptr np = createNode(item);\n    if(isListEmpty(L)){\n        L-&gt;first = np;\n        L-&gt;last = np;\n    }\n    else{\n       L-&gt;last-&gt;next = np;\n       L-&gt;last = np;\n    }\n}\n\n   void printList(list L){\n    nodeptr np = L.first;\n    int nodeCount = 1;\n    while(np!=NULL){\n        printf(\"data #%d: %d\\n\", nodeCount, np-&gt;data-&gt;myInt);\n        nodeCount++;\n        np = np-&gt;next;\n    }\n}\n\n#endif // LISTOPS_H\n</code></pre>\n"}], "owner": {"reputation": 701, "user_id": 3288572, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/8ZVyP.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3288572/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 28595115, "answer_count": 1, "score": 0, "last_activity_date": 1424298165, "creation_date": 1424294968, "last_edit_date": 1424295317, "question_id": 28594300, "link": "https://stackoverflow.com/questions/28594300/c-list-segmentation-fault", "title": "C List Segmentation Fault", "body": "<p>I tried to implement linked lists in C. However, when i want to print the list it segfaults. This is probably because the list remains empty as I found out in debug mode. Where did I mess up (ofc neither AppendLast() nor AppendFirst() would work.) ? I didn't have any compiler errors or warnings. Here's my code:</p>\n\n<p>main.c:</p>\n\n<pre><code>#include \"listops.h\"\n\nint main(){\n    list L, M;\n    L = initList(L);\n    M = initList(M);\n\n    nodeData myNumbers[5] = {{1},{2},{3},{4},{5}};\n\n    int i;\n    ndp myNumbersPtr;\n\n    for(i=0;i&lt;5;i++){\n        myNumbersPtr = &amp;myNumbers[i];\n        AppendLast(L, myNumbersPtr);\n    }\n\n    printList(L);\n\n\n    return 0;\n}\n</code></pre>\n\n<p>listops.h:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n#ifndef LISTOPS_H\n#define LISTOPS_H\n\ntypedef struct NodeData{\n    int myInt;\n}nodeData, *ndp;\n\ntypedef struct Node{\n    ndp data;\n    struct Node* next;\n} node, *nodeptr;\n\ntypedef struct List{\n    nodeptr first;\n    nodeptr last;\n} list, *listptr;\n\nlist initList(list L){\n    L.first = NULL;\n    L.last = NULL;\n    return L;\n}\n\nint isListEmpty(list L){\n    return (L.first == NULL &amp;&amp; L.last == NULL);\n}\n\nnodeptr createNode(ndp item){\n    nodeptr np;\n    np = (nodeptr)malloc(sizeof(node));\n    np-&gt;data = item;\n    np-&gt;next = NULL;\n    return np;\n}  \n\nvoid AppendFirst(list L, ndp item){\n    /* node erstellen */\n    nodeptr np = createNode(item);\n    /* Checken, ob Liste leer */\n    if(isListEmpty(L)){\n        L.first = np;\n        L.last = np;\n    }\n    else{\n        np-&gt;next = L.first;\n        L.first = np;\n    }\n}\n\nvoid AppendLast(list L, ndp item){\n    nodeptr np = createNode(item);\n    if(isListEmpty(L)){\n        L.first = np;\n        L.last = np;\n    }\n    else{\n       L.last-&gt;next = np;\n       np-&gt;next = NULL;\n    }\n}\n\nvoid printList(list L){\n    nodeptr np = L.first;\n    int nodeCount = 1;\n    while(np-&gt;next!=NULL){\n        printf(\"data #%d: %d\\n\", nodeCount, np-&gt;data-&gt;myInt);\n        nodeCount++;\n        np = np-&gt;next;\n    }\n}\n\n#endif // LISTOPS_H\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "enums", "segmentation-fault"], "comments": [{"owner": {"reputation": 3012, "user_id": 3101082, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1WxPj.jpg?s=128&g=1", "display_name": "dub stylee", "link": "https://stackoverflow.com/users/3101082/dub-stylee"}, "edited": false, "score": 1, "creation_date": 1424294122, "post_id": 28594012, "comment_id": 45494670, "body": "Have you done a stack trace?  Also, when posting a question, try to only post the relevant code.  <code>shuffle_deck</code> in this case.  It makes it much easier for people to see when they don&#39;t have to look through all of your other code."}, {"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 2, "creation_date": 1424294165, "post_id": 28594012, "comment_id": 45494692, "body": "In shuffle, you are assigning a random integer to your stack <code>*stack = rand() %stack-&gt;size;</code> -- I don&#39;t think that&#39;s what you intend."}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 3012, "user_id": 3101082, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1WxPj.jpg?s=128&g=1", "display_name": "dub stylee", "link": "https://stackoverflow.com/users/3101082/dub-stylee"}, "edited": false, "score": 0, "creation_date": 1424294335, "post_id": 28594012, "comment_id": 45494776, "body": "@dubstylee Thanks I didn&#39;t really know what I needed to include"}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1424294363, "post_id": 28594012, "comment_id": 45494794, "body": "@user590028 You&#39;re right but what do I do with the int I assign?"}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 3012, "user_id": 3101082, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1WxPj.jpg?s=128&g=1", "display_name": "dub stylee", "link": "https://stackoverflow.com/users/3101082/dub-stylee"}, "edited": false, "score": 0, "creation_date": 1424294424, "post_id": 28594012, "comment_id": 45494831, "body": "@dubstylee Oh and no I have no idea what that is"}, {"owner": {"reputation": 3012, "user_id": 3101082, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1WxPj.jpg?s=128&g=1", "display_name": "dub stylee", "link": "https://stackoverflow.com/users/3101082/dub-stylee"}, "edited": false, "score": 0, "creation_date": 1424294665, "post_id": 28594012, "comment_id": 45494968, "body": "@CodeHero There is a very helpful tool called GDB that you can use to run a stack trace on a coredump.  When you get a segmentation fault, depending on your settings, you may get a coredump file that you can use to run some diagnostics and see what is actually causing the program to crash."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1424294674, "post_id": 28594012, "comment_id": 45494974, "body": "Your code performs various manipulations on <code>stack</code>, but it looks like what you want to be manipulating are the elements of <code>stack-&gt;deck</code>."}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1424294890, "post_id": 28594012, "comment_id": 45495093, "body": "@JohnBollinger yes but when I change the *stack to stack-&gt;deck it says that they are incompatible types when assigning"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1424294968, "post_id": 28594012, "comment_id": 45495146, "body": "I see you have a deck of 53 cards, presumably because you refer to them as index <code>1..52</code>. It is better to <i>work</i> with 0-based representations and convert for human consumption at the point of input/output. So if a <code>card</code> has a value <code>0..51</code> its <code>suit</code> will be <code>card&#47;13</code> and its <code>rank</code> will be <code>card%13</code>, with arrays to present them to the user with <code>suit</code> and <code>rank</code> also 0-based."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1424295164, "post_id": 28594012, "comment_id": 45495263, "body": "Well yes, because the elements of <code>stack-&gt;deck</code> have type <code>card_t</code>.  If you want to assign the value of such an element to another variable, say <code>temp</code>, then that variable must also have type <code>card_t</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1424295506, "post_id": 28594012, "comment_id": 45495451, "body": "Is the fifty-third card in the deck an extra Ace of Spades?"}], "answers": [{"tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": false, "score": 1, "last_activity_date": 1424295146, "creation_date": 1424295146, "answer_id": 28594349, "question_id": 28594012, "link": "https://stackoverflow.com/questions/28594012/deck-shuffling-in-c-will-compile-but-segmentation-faults/28594349#28594349", "title": "Deck shuffling in C will compile but Segmentation Faults", "body": "<p>This line:</p>\n\n<pre><code>*cardptr = *stack;\n</code></pre>\n\n<p>happens before the variable <code>cardptr</code> is made to point to anything, therefore it points to random memory, which you overwrite.</p>\n\n<p>Shuffling is a well-known solved problem. Google \"Fisher-Yates\".</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 0, "last_activity_date": 1424295849, "creation_date": 1424295849, "answer_id": 28594520, "question_id": 28594012, "link": "https://stackoverflow.com/questions/28594012/deck-shuffling-in-c-will-compile-but-segmentation-faults/28594520#28594520", "title": "Deck shuffling in C will compile but Segmentation Faults", "body": "<p>Your swapping code is dubious at best.  It might be more nearly correct to use:</p>\n\n<pre><code>for (i = 0; i &lt; stack-&gt;size; i++)\n{\n    int j = rand() % stack-&gt;size;\n    card_t temp = stack-&gt;deck[i];\n    stack-&gt;deck[i] = stack-&gt;deck[j];\n    stack-&gt;deck[j] = temp;\n}\n</code></pre>\n\n<p>This probably isn't an unbiassed shuffle.  See <a href=\"http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\" rel=\"nofollow\">Fisher-Yates</a> at Wikipedia and also <a href=\"http://blog.codinghorror.com/the-danger-of-naivete/\" rel=\"nofollow\">The Danger of Na\u00efvet\u00e9</a> on Coding Horror.</p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1424296320, "post_id": 28594607, "comment_id": 45495887, "body": "Note that that assumes the valid elements of <code>stack-&gt;deck</code> to be those from index <code>0</code> to index <code>stack-&gt;size - 1</code>."}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "edited": false, "score": 0, "creation_date": 1424296444, "post_id": 28594607, "comment_id": 45495946, "body": "This gives me an idea of what I need to do thank you."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 0, "last_activity_date": 1424296166, "creation_date": 1424296166, "answer_id": 28594607, "question_id": 28594012, "link": "https://stackoverflow.com/questions/28594012/deck-shuffling-in-c-will-compile-but-segmentation-faults/28594607#28594607", "title": "Deck shuffling in C will compile but Segmentation Faults", "body": "<p>Consider first the algorithm.  There are various ways to perform a shuffle, but a common technique (Fisher-Yates) is:</p>\n\n<ol>\n<li>If there are fewer than two elements remaining to be shuffled then stop.</li>\n<li>Select a random element from the pool of those remaining to be shuffled, and swap it with the last element of the pool.</li>\n<li>Reduce the size of the pool by one, and go back to step 1.</li>\n</ol>\n\n<p>An implementation of that in C might look like this:</p>\n\n<pre><code>void shuffle_deck(stack_h *stack)\n{\n   int last;\n\n   for (last = stack-&gt;size - 1; last &gt; 0; last -= 1)\n   {\n      int i = rand() % (last + 1);\n\n      if (i &lt; last) {\n          card_t temp = stack-&gt;deck[i];\n          stack-&gt;deck[i] = stack-&gt;deck[last];\n          stack-&gt;deck[last] = temp;\n      } // else the chosen element is already in the target position\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 28594607, "answer_count": 3, "score": 0, "last_activity_date": 1424296166, "creation_date": 1424293967, "last_edit_date": 1424295471, "question_id": 28594012, "link": "https://stackoverflow.com/questions/28594012/deck-shuffling-in-c-will-compile-but-segmentation-faults", "title": "Deck shuffling in C will compile but Segmentation Faults", "body": "<pre><code>typedef enum {Clubs = 1, Diamonds, Hearts, Spades} suit_t;\ntypedef enum {Ace = 1, Two = 2, Three = 3, Four = 4, Five = 5,\n              Six = 6, Seven = 7, Eight = 8, Nine = 9, Ten = 10,\n              Jack = 11, Queen = 12, King = 13} face_t;\n\ntypedef struct card_t\n{\n        suit_t suit;\n        face_t face;\n} card;\n\ntypedef struct stack_t\n{\n    struct card_t deck[53];\n    int size;\n} stack_h;\n\nvoid shuffle_deck(stack_h *stack)\n{\n   stack_h temp, *cardptr;\n   int i,num;\n\n   for(i = 0; i &lt; stack-&gt;size; i++)\n   {\n    i = rand() %stack-&gt;size;\n    *cardptr = *stack;\n    temp = *cardptr;\n    *cardptr = *stack;\n    *stack = temp;\n   }\n}\n</code></pre>\n\n<p>So I have tried many different ways to make my deck shuffle but unfortunately I have had no luck what I am trying to do is well shuffle the deck it compiles but when it gets shuffling the deck it'll segmentation fault. Any ideas on how to fix it? Everything works but the shuffling function.</p>\n"}, {"tags": ["c", "sockets", "pipe", "file-descriptor"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1424294830, "post_id": 28593885, "comment_id": 45495058, "body": "Please post a complete example.  Why do you think that this is \u201chorribly inefficient\u201d? From what I can say now: why is your buffer only 2 bytes?  That&#39;s certainly too small to be efficient."}, {"owner": {"reputation": 33, "user_id": 4237781, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5da0111939024f8b9b02e7d1e6bbc7da?s=128&d=identicon&r=PG&f=1", "display_name": "Tookmund", "link": "https://stackoverflow.com/users/4237781/tookmund"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1424295074, "post_id": 28593885, "comment_id": 45495207, "body": "Fixed my explanation."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1424295345, "post_id": 28593885, "comment_id": 45495368, "body": "How about using <code>fgets</code> or <code>getline</code>?  You can <code>fdopen</code> a <code>FILE *</code> for any file descriptor.  You can also <code>read</code> (or <code>recv</code>) into a <i>large</i> buffer and <code>memchr</code> for the <code>&#39;\\n&#39;</code> yourself, if you really want to.  The I/O functions will return early if not enough data is available."}, {"owner": {"reputation": 33, "user_id": 4237781, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5da0111939024f8b9b02e7d1e6bbc7da?s=128&d=identicon&r=PG&f=1", "display_name": "Tookmund", "link": "https://stackoverflow.com/users/4237781/tookmund"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1424295588, "post_id": 28593885, "comment_id": 45495491, "body": "<code>getline</code> looks like the best option ill try that"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1424378886, "post_id": 28614844, "comment_id": 45536218, "body": "Why set non-blocking mode?  You normally want the read to block (and the write too)."}, {"owner": {"reputation": 3794, "user_id": 289654, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/71401c0709151be97900ce20be622cdf?s=128&d=identicon&r=PG", "display_name": "Giuseppe Guerrini", "link": "https://stackoverflow.com/users/289654/giuseppe-guerrini"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1424379549, "post_id": 28614844, "comment_id": 45536594, "body": "The &quot;waiting point&quot; is on the &quot;select&quot; system call. When a channel gets ready to read (or write) the &quot;read&quot; call should not block so the loop may continue immediately handling more events. If read blocked, other events (e.g. Incoming data from the other direction) would be delayed."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1424380161, "post_id": 28614844, "comment_id": 45536908, "body": "I am unconvinced.  The <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/select.html\" rel=\"nofollow noreferrer\"><code>select()</code></a> specification says, in part: <i>A descriptor shall be considered ready for reading when a call to an input function with O_NONBLOCK clear would not block, whether or not the function would transfer data successfully. ... A descriptor shall be considered ready for writing when a call to an output function with O_NONBLOCK clear would not block, whether or not the function would transfer data successfully.</i>  At least setting the O_NONBLOCK flag is unnecessary."}, {"owner": {"reputation": 3794, "user_id": 289654, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/71401c0709151be97900ce20be622cdf?s=128&d=identicon&r=PG", "display_name": "Giuseppe Guerrini", "link": "https://stackoverflow.com/users/289654/giuseppe-guerrini"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1424380583, "post_id": 28614844, "comment_id": 45537121, "body": "Nonblock  avoids that reading n bytes blocks until exactly n bytes are received"}], "tags": [], "owner": {"reputation": 3794, "user_id": 289654, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/71401c0709151be97900ce20be622cdf?s=128&d=identicon&r=PG", "display_name": "Giuseppe Guerrini", "link": "https://stackoverflow.com/users/289654/giuseppe-guerrini"}, "is_accepted": false, "score": 1, "last_activity_date": 1424378653, "last_edit_date": 1495542120, "creation_date": 1424372949, "answer_id": 28614844, "question_id": 28593885, "link": "https://stackoverflow.com/questions/28593885/connect-socket-and-fifo-pipe/28614844#28614844", "title": "Connect socket and FIFO pipe", "body": "<p>Some hints to have a bigger throughput:</p>\n\n<p>1) Set the non-blocking mode on file descriptors. Example <a href=\"http://www.kegel.com/dkftpbench/nonblocking.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>2) Use \"select\" or \"poll\" to wait until data are coming in (many examples availabe, an explanation is <a href=\"https://stackoverflow.com/questions/14544621/why-is-select-used-in-linux\">here</a>)</p>\n\n<p>3) Enlarge the read buffers (e.g. up to 4 kb), so you can receive more data in a single call. Use the read's return value to know how many bytes you have actually received.</p>\n\n<p>4) write the whole received buffer. Check write's return value to know how many bytes have been actually transferred, write may send less then you requested. In that case (probably congestion) send the remaining data later. \"select\" is able to signal you also if a fd is ready to be written. The whole logic becomes quite complicated, but if the throughput is your goal you probably have to deal with it.</p>\n\n<p>5) Also, you can split your loop in two sepatare threads, one for the in->sfd direction and one for sfd->out direction. Many of the previous notes still apply.</p>\n"}], "owner": {"reputation": 33, "user_id": 4237781, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5da0111939024f8b9b02e7d1e6bbc7da?s=128&d=identicon&r=PG&f=1", "display_name": "Tookmund", "link": "https://stackoverflow.com/users/4237781/tookmund"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424378653, "creation_date": 1424293479, "last_edit_date": 1424295035, "question_id": 28593885, "link": "https://stackoverflow.com/questions/28593885/connect-socket-and-fifo-pipe", "title": "Connect socket and FIFO pipe", "body": "<p>I am trying to connect a socket to a FIFO pipe, but can't find an easy way to do it.</p>\n\n<p>At the moment I am using:</p>\n\n<pre><code> char localbuf[2];\n\n    while(1) {\n            memset(localbuf,0,sizeof(localbuf));\n\n            ret = read(sfd,localbuf,1);\n            test(ret,\"Unable to read from socket\");\n\n            ret = write(out,localbuf,1);\n            test(ret,\"Unable to write to out FIFO\");\n\n            read(in,localbuf,1);\n            test(ret,\"Unable to read from in FIFO\");\n\n            write(sfd,localbuf,1);\n            test(ret,\"Unable to write to socket\");\n    }\n</code></pre>\n\n<p>However, this seems horribly inefficient and wrong because it should not send the data until it receives a newline but cannot know beforehand how much data there will be.</p>\n\n<p>Complete code <a href=\"https://github.com/Tookmund/netdir\" rel=\"nofollow\">here</a></p>\n\n<p>Is there a better way? </p>\n"}, {"tags": ["c", "arrays", "char"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424293048, "post_id": 28593724, "comment_id": 45494064, "body": "<code>fgetc</code> is a function for reading a single char. You might want to use <code>fscanf</code> instead."}, {"owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 0, "creation_date": 1424293930, "post_id": 28593724, "comment_id": 45494565, "body": "What do you mean by separating by symbols?"}, {"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 2, "creation_date": 1424294896, "post_id": 28593724, "comment_id": 45495097, "body": "Better use <code>int c</code> if you want to compare to <code>EOF</code>."}], "answers": [{"comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1424293332, "post_id": 28593780, "comment_id": 45494222, "body": "You have one extra right parenthesis in your <code>while</code>."}, {"owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 0, "creation_date": 1424293807, "post_id": 28593780, "comment_id": 45494512, "body": "this does words, but doesn&#39;t help with separating by symbols."}], "tags": [], "owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "is_accepted": false, "score": 0, "last_activity_date": 1424293696, "last_edit_date": 1424293696, "creation_date": 1424293071, "answer_id": 28593780, "question_id": 28593724, "link": "https://stackoverflow.com/questions/28593724/how-to-make-a-char-into-one-word-in-c/28593780#28593780", "title": "how to make a char into one word in C", "body": "<p>Use <code>fscanf(3)</code> instead</p>\n\n<pre><code>char word[256], *p;\nwhile(fscanf(f, \"%s\", &amp;word) != EOF) {\n     printf(\"%s\\n\", word);\n     /* break down word into individual chars */\n     for(p=word; *p; p++) {\n         printf(\"%c \", *p);\n         }\n     printf(\"\\n\");\n     }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80, "user_id": 3589654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a18caf2805aee949e91e99a03e5111?s=128&d=identicon&r=PG&f=1", "display_name": "Jurica Penjgu\u0161i\u0107", "link": "https://stackoverflow.com/users/3589654/jurica-penjgu%c5%a1i%c4%87"}, "is_accepted": false, "score": 1, "last_activity_date": 1424293922, "creation_date": 1424293922, "answer_id": 28593993, "question_id": 28593724, "link": "https://stackoverflow.com/questions/28593724/how-to-make-a-char-into-one-word-in-c/28593993#28593993", "title": "how to make a char into one word in C", "body": "<p>You could use <code>char * fgets ( char * str, int num, FILE * stream );</code>\nThen use <code>char *strtok(char *str, const char *delim)</code>\nfor example </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n int main()\n{\n FILE * pFile;\n char mystring [100];\n const char delimters[2] = \" ,:\";\n char *token;\n\n pFile = fopen (\"myfile.txt\" , \"r\");\n if (pFile == NULL) perror (\"Error opening file\");\n else {\n   if ( fgets (mystring , 100 , pFile) != NULL )\n\n    /* get the first token */\n     token = strtok(mystring, delimiters);\n\n  /* walk through other tokens */\n  while( token != NULL ) \n {\n    printf( \" %s\\n\", token );\n\n  token = strtok(NULL, delimiters);\n }\n\n   fclose (pFile);\n  }\n return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424303403, "post_id": 28594144, "comment_id": 45498950, "body": "Minor: <code>printf(&quot;%zuth word: %s\\n&quot;</code> to match <code>size_t</code>."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1424303531, "last_edit_date": 1424303531, "creation_date": 1424294425, "answer_id": 28594144, "question_id": 28593724, "link": "https://stackoverflow.com/questions/28593724/how-to-make-a-char-into-one-word-in-c/28594144#28594144", "title": "how to make a char into one word in C", "body": "<ol>\n<li>First problem <code>fgetc()</code> returns an <code>int</code> you cannot store <code>EOF</code> in a <code>char</code> variable.</li>\n<li>You should check if <code>fopen()</code> didn't return <code>NULL</code>.</li>\n</ol>\n\n<p>You can use this technique to read words like this</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX_BUFFER_SIZE 256\n\nchar **load_words_from_file(const char *filename)\n{\n    size_t wordcount;\n    size_t charcount;\n    char   buffer[MAX_BUFFER_SIZE];\n    int    chr;\n    FILE  *file;\n    char **words;\n    void  *pointer;\n\n    file = fopen(filename, \"r\");\n    if (file == NULL)\n        return NULL;\n    wordcount = 0;\n    charcount = 0;\n    words     = NULL;\n    while ((chr = fgetc(file)) != EOF)\n    {\n        /* it's a white space or it exceeded buffer size, it's a word delimiter */\n        if ((isspace(chr) != 0) || (charcount &gt;= sizeof(buffer) - 1))\n        {\n            /* 'nul' terminate 'buffer' for strcpy() and strlen() */\n            buffer[charcount] = '\\0';\n            pointer           = realloc(words, (1 + wordcount) * sizeof(char *));\n            if (pointer == NULL) /* failure, free allocated memory and return NULL */\n                goto failure;\n            words            = pointer;\n            words[wordcount] = malloc(1 + charcount);\n            charcount        = 0; /* reset character count */\n            if (words[wordcount] == NULL)\n                goto failure;\n            strcpy(words[wordcount], buffer);\n\n            wordcount += 1;\n        }\n        else\n        {\n            /* store the character and count it */\n            buffer[charcount] = (char)chr;\n            charcount        += 1;\n        }\n    }\n    pointer = realloc(words, (1 + wordcount) * sizeof(char *));\n    if (pointer == NULL)\n        goto failure;\n    words            = pointer;\n    words[wordcount] = NULL; /* this will let you know when to stop fetching words */\n\n    fclose(file);\n    return words;\nfailure:\n    for (size_t i = 0 ; i &lt; wordcount ; ++i)\n        free(words[i]);\n    free(words);\n    return NULL;\n}\n\nint\nmain()\n{\n    const char *filename = \"your-file-name-here\";\n    char      **words    = load_words_from_file(filename);\n    size_t      counter  = 0;\n\n    if (words == NULL)\n    {\n        printf(\"no words found in the file\\n\");\n        return -1;\n    }\n    while (words[counter] != NULL)\n    {\n        printf(\"%zuth word: %s\\n\", 1 + counter, words[counter]);\n        free(words[counter]); /* this program will not use it again */\n        counter += 1;\n    }\n    free(words);\n    return 0;\n}\n</code></pre>\n\n<p>the <code>strtok()</code> method would also work, but it's harder to understand.</p>\n\n<p>Note the use of <code>goto</code>, it's a benign usage, although some people think that <code>goto</code> is always harmful, that's not true, using it like this makes the program adhere to the <a href=\"http://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow\">DRY</a> priniciple.</p>\n"}, {"tags": [], "owner": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "is_accepted": true, "score": 1, "last_activity_date": 1424468282, "last_edit_date": 1424468282, "creation_date": 1424301368, "answer_id": 28595840, "question_id": 28593724, "link": "https://stackoverflow.com/questions/28593724/how-to-make-a-char-into-one-word-in-c/28595840#28595840", "title": "how to make a char into one word in C", "body": "<p>You can use a scanset with fscanf or sscanf. This scanset, <code>%29[a-zA-Z]</code>, reads lower and upper case English characters and stops when it encounters a character not in the set. The 29 limits the maximum number of characters to read so as to not overwrite the buffer, <code>word[30]</code>. When fscanf fails, the else will read one character from the file and give fscanf another try at reading another word.<br>\nThis also uses the command line to pass in the file to read as argv[1].</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main( int argc, char *argv[])\n{\n    char word[30] = {'\\0'};\n    int ch = 0;\n    FILE *pf = NULL;\n\n    if ( argc != 2) {//command requires program name and a file name\n        printf ( \"useage: program filename\\n\");\n        return 1;\n    }\n\n    if ( ( pf = fopen ( argv[1], \"r\")) == NULL) {\n        perror ( \"could not open file\");\n        return 1;\n    }\n\n    while ( 1) {\n        if ( ( fscanf ( pf, \"%29[a-zA-Z]\", word)) == 1) {\n            printf ( \"%s\\n\", word);\n        }\n        else {\n            if ( ( ch = fgetc ( pf)) == EOF) {//read one character and check for end of file\n                break;\n            }\n            //could do something here with the value of ch if needed\n        }\n    }\n    printf ( \"--DONE--\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>This will allocate an array for each word.  As words are added the array is expanded using realloc.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main( int argc, char *argv[])\n{\n    char **words = NULL;//pointer for words\n    char **temp = NULL;\n    char word[30] = {'\\0'};\n    int ch = 0;\n    int each = 0;\n    int found = 0;\n    int count = 0;\n    int wordsize = 0;\n    FILE *pf = NULL;\n\n    if ( argc != 2) {//command requires program name and a file name\n        printf ( \"useage: program filename\\n\");\n        return 1;\n    }\n\n    if ( ( pf = fopen ( argv[1], \"r\")) == NULL) {\n        perror ( \"could not open file\");\n        return 1;\n    }\n\n    while ( 1) {\n        if ( ( fscanf ( pf, \"%29[a-zA-Z]\", word)) == 1) {\n            found = 0;\n            for ( each = 0; each &lt; wordsize; each++) {\n                if ( strcmp ( words[each], word) == 0) {\n                    found = 1;\n                    break;\n                }\n            }\n            if ( found == 0) {\n                wordsize += 1;// increment number of words\n                temp = realloc ( words, wordsize * sizeof ( char *));//reallocate for another word\n                if ( temp != NULL) {\n                    words = temp;\n                    words[wordsize - 1] = malloc ( strlen ( word) + 1);//malloc for the word itself\n                    if ( words[wordsize - 1] != NULL) {\n                        strcpy ( words[wordsize - 1], word);\n                    }\n                    else {\n                        printf ( \"malloc failed\\n\");\n                        wordsize -= 1;\n                        break;\n                    }\n                }\n                else {\n                    printf ( \"realloc failed\\n\");\n                    wordsize -= 1;\n                    break;\n                }\n            }\n            printf ( \"%s\\n\", word);\n        }\n        else {\n            if ( ( ch = fgetc ( pf)) == EOF) {//read one character and check for end of file\n                break;\n            }\n            //something could be done with ch if needed\n        }\n    }\n    printf ( \"--DONE Reading file--\\n\");\n    for ( each = 0; each &lt; wordsize; each++) {// print each word\n        printf ( \"%s\\n\", words[each]);\n    }\n    count = 0;\n    printf ( \"Enter a word to search for\\n\");\n    if ( ( scanf ( \"%29[a-zA-Z]\", word)) == 1) {\n        for ( each = 0; each &lt; wordsize; each++) {\n            if ( strcmp ( words[each], word) == 0) {\n                printf ( \"Found %s at index %d\\n\" word, each);\n                count++;\n            }\n        }\n        printf ( \"Found %s %d times\\n\" word, count);\n    }\n    for ( each = 0; each &lt; wordsize; each++) {//release memory\n        free ( words[each]);\n    }\n    free ( words);\n\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4332856"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2183, "favorite_count": 0, "accepted_answer_id": 28595840, "answer_count": 4, "score": 1, "last_activity_date": 1424483152, "creation_date": 1424292868, "last_edit_date": 1424483152, "question_id": 28593724, "link": "https://stackoverflow.com/questions/28593724/how-to-make-a-char-into-one-word-in-c", "title": "how to make a char into one word in C", "body": "<p>I am currently collecting input from a file but my program separates each letter into the char array instead of each word. How can I change my code to get each word?</p>\n\n<pre><code>char c, fileName[20];\nFILE *f;\n\nvoid getFile() {    \n    f = fopen(fileName, \"r\");\n\n    while((c = fgetc(f)) != EOF) {\n        printf(\"%c\",c);\n    }\n    fclose(f);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 0, "creation_date": 1424292523, "post_id": 28593594, "comment_id": 45493780, "body": "what is the problem?"}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 2, "creation_date": 1424292555, "post_id": 28593594, "comment_id": 45493798, "body": "<code>nome[p]</code> and <code>name[p]</code>? Why two different array names? If they&#39;re supposed to the same, then why the two ifs? Both cases wouldn&#39;t be true, so <code>if (!islpha(...)) { j = 0; break }</code> would all you need. just set <code>j=1</code> before you start the loop. if it&#39;s 0 afterwards, then you hit a non-alpha char."}, {"owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "edited": false, "score": 0, "creation_date": 1424292947, "post_id": 28593594, "comment_id": 45494011, "body": "I tried that and it doenst work. My code is much larger but i&#39;m having a problem with this little part."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424293164, "post_id": 28593594, "comment_id": 45494123, "body": "Why don&#39;t you use <code>else</code>?"}, {"owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "edited": false, "score": 0, "creation_date": 1424293200, "post_id": 28593594, "comment_id": 45494139, "body": "Tried that and i didn&#39;t work out."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424293230, "post_id": 28593594, "comment_id": 45494157, "body": "Well, there is something that you are not showing us."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1424293250, "post_id": 28593594, "comment_id": 45494167, "body": "You do have a <code>break</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1424293316, "post_id": 28593594, "comment_id": 45494213, "body": "Is <code>**if</code> intended to mark the line? It&#39;s a syntax error. If you want to mark a line, it&#39;s better to use a syntactically valid comment."}, {"owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "edited": false, "score": 0, "creation_date": 1424293439, "post_id": 28593594, "comment_id": 45494288, "body": "**if was to be &quot;bold&quot;. It&#39;s my first time here and i&#39;m getting used for asking questions."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424293487, "post_id": 28593594, "comment_id": 45494318, "body": "Why are you so sure your <code>name[p]</code> is actually alphanumeric? Have traced it with debugger?"}, {"owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "edited": false, "score": 0, "creation_date": 1424293491, "post_id": 28593594, "comment_id": 45494322, "body": "I&#39;ll leave now and will be back tomorrow guys. Thank you all for the help."}, {"owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "edited": false, "score": 1, "creation_date": 1424293578, "post_id": 28593594, "comment_id": 45494370, "body": "name[p] is an stdin. It&#39;s the name of the person. If the person enters a numerical character it will give a warning &quot;Invalid input&quot;. I&#39;m getting used to a debugger. I&#39;m learning programming for two weeks now."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1424295705, "post_id": 28593594, "comment_id": 45495562, "body": "You probably don&#39;t always have exactly 50 characters long name. C usually uses NUL-terminated 8-bit char strings, meaning there is a 0-byte after last character byte. Use that to detect end of string."}, {"owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "edited": false, "score": 0, "creation_date": 1424296193, "post_id": 28593594, "comment_id": 45495813, "body": "So. You are saying to add a if statment if null is found and do a break?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1424517477, "post_id": 28593594, "comment_id": 45588125, "body": "<code>NULL</code> is null pointer, not be mixed with &quot;NUL&quot; character <code>&#39;\\0&#39;</code> or just <code>0</code>. But yeah, when iterating over chars of string in C, test for that to detect end of string (and when making strings, be sure to put 0 at its end)."}], "answers": [{"comments": [{"owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "edited": false, "score": 0, "creation_date": 1424292771, "post_id": 28593633, "comment_id": 45493902, "body": "The program is in Portuguese and i forgot to change that. As long as the name/nome goes it&#39;s all right in the original code. I tried placing a break after &quot;j = 0&quot; and it never entered this cycle."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424292851, "post_id": 28593633, "comment_id": 45493958, "body": "What do you mean &quot;all right&quot;? Do you have same name or different ones in the actual code?"}, {"owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "edited": false, "score": 0, "creation_date": 1424293086, "post_id": 28593633, "comment_id": 45494079, "body": "Yes. You got that :) In the actually code it&#39;s allright. The names match. Here i forgot to change the second &quot;nome&quot;"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1424293278, "post_id": 28593633, "comment_id": 45494182, "body": "Then please update the question to fix that problem. Ideally, the question should include code that actually reproduces the problem you&#39;re having."}, {"owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "edited": false, "score": 0, "creation_date": 1424293398, "post_id": 28593633, "comment_id": 45494260, "body": "btw, i dont have break in the  j = 0 because it will get out of the cycle if the first character will be alphabetical. If the second isnt alpabethical it will never get there."}], "tags": [], "owner": {"reputation": 15322, "user_id": 291737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/432bda8139dee981e1411f40cab0a13e?s=128&d=identicon&r=PG", "display_name": "StilesCrisis", "link": "https://stackoverflow.com/users/291737/stilescrisis"}, "is_accepted": false, "score": 0, "last_activity_date": 1424292574, "creation_date": 1424292574, "answer_id": 28593633, "question_id": 28593594, "link": "https://stackoverflow.com/questions/28593594/my-cycle-never-enters-a-if-statment/28593633#28593633", "title": "My cycle never enters a if statment", "body": "<p>You have a small typo. In the second comparison, you spell the variable as <code>nome</code> instead of <code>name</code>, making it an entirely separate check.</p>\n\n<p>Also, if you want the loop to terminate when <code>isalpha</code>, put a <code>break</code> statement after <code>j=0;</code>.</p>\n"}], "owner": {"reputation": 1864, "user_id": 4581336, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b5d7bbd86863406b495a518128005eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4581336/charlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1424293407, "creation_date": 1424292430, "last_edit_date": 1424293407, "question_id": 28593594, "link": "https://stackoverflow.com/questions/28593594/my-cycle-never-enters-a-if-statment", "title": "My cycle never enters a if statment", "body": "<p>I guess my problem is very simple. I check a string to see if the value is all alphabetical and if it is it will <code>j = 0</code> to continue to the next instruction if it's not <code>j = 1</code> to continue asking the user the name. If you fail the first time it'll set the <code>j = 1</code> and it will never enter the <code>j = 0</code> if it's all alphabetical.</p>\n\n<pre><code>for(p = 0; p &lt; 50; p++)\n{\n    if(isalpha(name[p]) == 0)\n    {\n        printf(\"Invalide value.\\n\");\n        j = 1;\n        break;\n    }\n    **if(isalpha(name[p]) != 0)\n    {\n        j = 0;\n    }**\n}\n</code></pre>\n\n<p>I also tried the next code:</p>\n\n<pre><code>for(p = 0; p &lt; 50; p++)\n{\n    if(!isalpha(name[p]))\n    {\n        printf(\"Invalide value.\\n\");\n        j = 1;\n        break;\n    }\n    **if(isalpha(name[p]))\n    {\n        j = 0;\n    }**\n}\n</code></pre>\n"}, {"tags": ["xorg", "c", "xcb"], "comments": [{"owner": {"reputation": 10419, "user_id": 1151724, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/q6fMI.jpg?s=128&g=1", "display_name": "CodeClown42", "link": "https://stackoverflow.com/users/1151724/codeclown42"}, "edited": false, "score": 0, "creation_date": 1424292716, "post_id": 28597471, "comment_id": 45501306, "body": "Here&#39;s the first page I found after googling &quot;xcb_auth_info_t&quot;: <a href=\"http://xcb.freedesktop.org/manual/structxcb__auth__info__t.html\" rel=\"nofollow noreferrer\">xcb.freedesktop.org/manual/structxcb__auth__info__t.html</a>"}, {"owner": {"reputation": 4370, "user_id": 379572, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/da446e0e8ec2bc947b163b8ef7e478be?s=128&d=identicon&r=PG", "display_name": "Azmisov", "link": "https://stackoverflow.com/users/379572/azmisov"}, "reply_to_user": {"reputation": 10419, "user_id": 1151724, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/q6fMI.jpg?s=128&g=1", "display_name": "CodeClown42", "link": "https://stackoverflow.com/users/1151724/codeclown42"}, "edited": false, "score": 0, "creation_date": 1424294846, "post_id": 28597471, "comment_id": 45501307, "body": "Thanks goldilocks. I&#39;m trying to find information on the X server authorization file. When you start X, one option is <code>-auth authorization_file</code>, but I can&#39;t find much info on how that file is formatted."}], "answers": [{"tags": [], "owner": {"reputation": 299, "user_id": 4440445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079efb3c08fc853cb3ef1ee9d906c18f?s=128&d=identicon&r=PG", "display_name": "steeldriver", "link": "https://stackoverflow.com/users/4440445/steeldriver"}, "is_accepted": false, "score": 3, "last_activity_date": 1424299458, "creation_date": 1424299458, "answer_id": 28597472, "question_id": 28597471, "link": "https://stackoverflow.com/questions/28597471/parsing-x-server-authorization-file/28597472#28597472", "title": "Parsing X server authorization file", "body": "<p>The authorization protocols and files are discussed briefly in the <code>xauth</code> and <code>Xsecurity</code> manual pages, and in more detail in those for the <code>Xau</code> library functions (<code>XauWriteAuth</code> etc.). The <code>xcb_auth_info_t</code> structure appears to be defined in the <code>/usr/include/xcb/xcb.h</code> file as follows:</p>\n\n<pre><code>/**\n * @brief Container for authorization information.\n *\n * A container for authorization information to be sent to the X server.\n */\ntypedef struct xcb_auth_info_t {\n    int   namelen;  /**&lt; Length of the string name (as returned by strlen). */\n    char *name;     /**&lt; String containing the authentication protocol name, such as \"MIT-MAGIC-COOKIE-1\" or \"XDM-AUTHORIZATION-1\". */\n    int   datalen;  /**&lt; Length of the data member. */\n    char *data;   /**&lt; Data interpreted in a protocol-specific manner. */\n} xcb_auth_info_t;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4370, "user_id": 379572, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/da446e0e8ec2bc947b163b8ef7e478be?s=128&d=identicon&r=PG", "display_name": "Azmisov", "link": "https://stackoverflow.com/users/379572/azmisov"}, "edited": false, "score": 0, "creation_date": 1424396082, "post_id": 28603336, "comment_id": 45543027, "body": "Thanks a lot cedlemo. I need to get the authorization info from an arbitrary file, rather than the default Xauthority file. Nevertheless, the links you provided were extremely helpful and led me to a solution. I&#39;ve updated the question with what I settled on."}], "tags": [], "owner": {"reputation": 2946, "user_id": 1002965, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EHzyL.jpg?s=128&g=1", "display_name": "cedlemo", "link": "https://stackoverflow.com/users/1002965/cedlemo"}, "is_accepted": true, "score": 2, "last_activity_date": 1424339885, "creation_date": 1424339885, "answer_id": 28603336, "question_id": 28597471, "link": "https://stackoverflow.com/questions/28597471/parsing-x-server-authorization-file/28603336#28603336", "title": "Parsing X server authorization file", "body": "<p>After some searches, it is like you doesn't have to build this structure yourself. Looks at this discussion:</p>\n\n<p><a href=\"https://www.mail-archive.com/search?l=xorg-devel@lists.x.org&amp;q=subject:%22What&#39;s%20the%20right%20way%20to%20call%20xcb_connect_to_display_with_auth_info()%20given%20a%20Xauthority%20file%3F%22&amp;o=newest&amp;f=1\" rel=\"nofollow\">What's the right way to call xcb_connect_to_display_with_auth_info() given a Xauthority file</a></p>\n\n<p>The Xauthory file is specified in the XAUTHORITY environement variable. This file is generated by the program that start the X server (xdm, startx or xauth itself for example according to the doc in <em>man xauth</em>)</p>\n\n<p>A classical connection with auth file specified via the XAUTHORITY variable works like this :</p>\n\n<ul>\n<li>xcb_connect call xcb_connect_with_auth_info() with a auth info set as NULL </li>\n<li>xcb_connect_with_auth_info() call _xcb_get_auth_info() in order to get auth information from the default xauthority file.</li>\n</ul>\n\n<p>If you really want to see how this function get the auth info:</p>\n\n<pre><code>git clone git://anongit.freedesktop.org/xcb/libxcb\n</code></pre>\n\n<ul>\n<li>Look at the file <strong>./libxcb/src/xcb_util.c</strong> lines 478 to end</li>\n<li>Look at the file <strong>./libxcb/src/xcb_auth.c</strong> lines 312 to 379 for _xcb_get_auth_info() </li>\n</ul>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1424311215, "question_id": 185583}, "owner": {"reputation": 4370, "user_id": 379572, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/da446e0e8ec2bc947b163b8ef7e478be?s=128&d=identicon&r=PG", "display_name": "Azmisov", "link": "https://stackoverflow.com/users/379572/azmisov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "accepted_answer_id": 28603336, "answer_count": 2, "score": 1, "last_activity_date": 1424395982, "creation_date": 1424292175, "last_edit_date": 1424395982, "question_id": 28597471, "link": "https://stackoverflow.com/questions/28597471/parsing-x-server-authorization-file", "title": "Parsing X server authorization file", "body": "<p>Is there any API's or documentation to facilitate in parsing the authorization file for X server?</p>\n\n<p>I am using <code>xcb</code> to connect to a display. It accepts a <code>xcb_auth_info_t</code> struct for authorization info. However, I cannot find any information on how to build this structure. There doesn't seem to be any documentation on the format of the X server authorization files.</p>\n\n<p><strong>Solution I settled with:</strong></p>\n\n<p>It turns out, for <code>MIT-MAGIC-COOKIE-1</code> type X authority files, the <code>Xauth</code> structure (from <code>X11/Xauth.h</code>) members map directly to the <code>xcb_auth_info_t</code> members. So, just read an <code>Xauth</code> structure from your X authority file using <code>XauReadAuth</code>. Then copy over the <code>name</code>, <code>name_length</code>, <code>data</code>, and <code>data_length</code> members.</p>\n\n<p>If you want a more portable way to parse the X authority file, you can refer to <code>xcb</code>'s source code. It is pretty messy, but it shouldn't be too difficult to adapt their source code for your own purposes. Refer to <code>xcb_util.c</code> for details on how to open a socket to a display. Once you have the socket, you can use methods from <code>xcb_auth.c</code> to create the <code>xcb_auth_info_t</code> struct (see the methods <code>_xcb_get_auth_info</code>, <code>get_auth_ptr</code>, and <code>compute_auth</code>).</p>\n\n<p>I only needed to connect through unix sockets (<code>AF_UNIX</code>), so the code I ported over was fairly minimal. I mostly just used the <code>compute_auth</code> method (and its dependencies).</p>\n"}, {"tags": ["c", "msvc12"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1424291533, "post_id": 28593202, "comment_id": 45493197, "body": "You get two different addresses because those are two different variables (and they are <i>not</i> global variables).  Look up what variables declared <code>static</code> at file scope means."}], "answers": [{"comments": [{"owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "edited": false, "score": 1, "creation_date": 1424291301, "post_id": 28593248, "comment_id": 45493063, "body": "ITYM ...get a different variable."}, {"owner": {"reputation": 25, "user_id": 1577561, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1f62e67b31cfab4882bacdaf1559a3b3?s=128&d=identicon&r=PG", "display_name": "user1577561", "link": "https://stackoverflow.com/users/1577561/user1577561"}, "edited": false, "score": 0, "creation_date": 1424297675, "post_id": 28593248, "comment_id": 45496608, "body": "Uhh... Now I&#39;m feeling dumb, and deservedly... Thanks!"}], "tags": [], "owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "is_accepted": true, "score": 4, "last_activity_date": 1424291212, "creation_date": 1424291212, "answer_id": 28593248, "question_id": 28593202, "link": "https://stackoverflow.com/questions/28593202/global-variable-seems-to-have-two-different-addresses/28593248#28593248", "title": "Global Variable Seems To Have Two Different Addresses...?", "body": "<p>You have both declared and defined the variable in the <code>.h</code> file as <code>static</code> which means that <em>every</em> file that <code>#includes</code> the header will get their own <em>private</em> copy of the variable.</p>\n\n<p>You need to split <code>core.h</code> into <code>core.h</code> and <code>core.c</code> looking something like:</p>\n\n<p>core.h:</p>\n\n<pre><code>#pragma once  \nextern int MY_MARK;\n</code></pre>\n\n<p>core.c:</p>\n\n<pre><code>#include \"core.h\"\n\nint MY_MARK = -1;\n</code></pre>\n\n<p>All other files should <code>#include \"core.h\"</code>, and when compiling and linking you should link in <code>core.c</code></p>\n"}], "owner": {"reputation": 25, "user_id": 1577561, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1f62e67b31cfab4882bacdaf1559a3b3?s=128&d=identicon&r=PG", "display_name": "user1577561", "link": "https://stackoverflow.com/users/1577561/user1577561"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 28593248, "answer_count": 1, "score": 0, "last_activity_date": 1424291508, "creation_date": 1424291058, "question_id": 28593202, "link": "https://stackoverflow.com/questions/28593202/global-variable-seems-to-have-two-different-addresses", "title": "Global Variable Seems To Have Two Different Addresses...?", "body": "<p>Take into consideration the following 4 files:</p>\n\n<p>[core.h]</p>\n\n<pre><code>#pragma once  \nstatic int MY_MARK = -1;  \n</code></pre>\n\n<p>[count.h]</p>\n\n<pre><code>#pragma once\n#include \"core.h\"\n#include &lt;stdarg.h&gt;\n#define Count(...) CountImpl(&amp;MY_MARK, __VA_ARGS__, &amp;MY_MARK)\nint CountImpl(void*, ...);\n</code></pre>\n\n<p>[count.c]  </p>\n\n<pre><code>#include \"count.h\"\n\nint CountImpl(void* dummy, ...) {\n    int     count = 0;\n    va_list lst;\n\n    va_start(lst, dummy);\n\n    for(;;) {\n        void* ptr = va_arg(lst, void *);\n        if(ptr == &amp;MY_MARK) {break;}\n        ++count;\n    }\n\n    va_end(lst);\n    return count;\n}\n</code></pre>\n\n<p>[WeirdProblem.c]  </p>\n\n<pre><code>#include &lt;tchar.h&gt;\n#include \"count.h\"\n\nint _tmain(int argc, wchar_t* argv[], wchar_t* envp[]) {\n    int a = 1;\n    int b = 2;\n    int c = 3;\n    int d = Count(&amp;a, &amp;b, &amp;c);\n    return 0;\n}\n</code></pre>\n\n<p>I'm using Microsoft Visual Studio Community 2013.<br>\nWhen running the code above, I would expect the 'd' variable to have a value of 3. The problem is that the execution never breaks from the loop, as it does not compare 'ptr' and '&amp;MY_MARK' to be equal. (Eventually it throws an error trying to read protected memory or whatever.)<br>\nActually, I see two different addresses in the Watch window:  </p>\n\n<pre><code>(int*)ptr       0x000000013f8d9004 {WeirdProblemTest.exe!int MY_MARK} {-1}  int *\n&amp;MY_MARK        0x000000013f8d9000 {WeirdProblemTest.exe!int MY_MARK} {-1}  int *\n</code></pre>\n\n<p>I know I could workaround the issue using the 'dummy' variable instead of referring to '&amp;MY_MARK', but that's not the point.<br>\nI really need to understand what is going on, because the same problem is happening in different parts of my code and in there there's not such a nice workaround for them.  </p>\n\n<p>Sorry for the long post, but I found no way to keep it shorter.</p>\n"}, {"tags": ["c", "function", "warnings", "void"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1424291054, "post_id": 28592865, "comment_id": 45492912, "body": "Note: 1) Converting both strings with <code>tolower()</code> or <code>toupper()</code>  is a classic approach but has a problem:  Other than the usual A-Z,a-z, some conversions are not 1 to 1 creating difference result between using the upper or lower method.  2) Any case insensitive compare that relies on the <i>sign</i> of the response may get different results depend on if using the upper/lower methods like <code>if (stricmp(&quot;A&quot;,&quot;_&quot;)   &gt; 0</code>.  Use <a href=\"http://stackoverflow.com/a/28592903/2410359\">stackoverflow.com/a/28592903/2410359</a>"}], "answers": [{"comments": [{"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 21, "user_id": 4573505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f7cf099fe28d2d474291197962e0b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Brian DeBoi", "link": "https://stackoverflow.com/users/4573505/brian-deboi"}, "edited": false, "score": 0, "creation_date": 1424290489, "post_id": 28592903, "comment_id": 45492598, "body": "@BrianDeBoi Just remember that these are not in the C standard library."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1424290596, "post_id": 28592903, "comment_id": 45492663, "body": "This is why I said Unix not C... <code>strcasecmp</code> is POSIX compliant."}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 5, "last_activity_date": 1424290004, "creation_date": 1424290004, "answer_id": 28592903, "question_id": 28592865, "link": "https://stackoverflow.com/questions/28592865/c-how-do-i-make-lowercase-input-and-uppercase-input-equal-in-strcmp/28592903#28592903", "title": "C: How do I make lowercase input and uppercase input equal in strcmp?", "body": "<p>Unix systems have <code>strcasecmp</code>. Windows has <code>stricmp</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 4573505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f7cf099fe28d2d474291197962e0b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Brian DeBoi", "link": "https://stackoverflow.com/users/4573505/brian-deboi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1729, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1424290109, "creation_date": 1424289856, "question_id": 28592865, "link": "https://stackoverflow.com/questions/28592865/c-how-do-i-make-lowercase-input-and-uppercase-input-equal-in-strcmp", "title": "C: How do I make lowercase input and uppercase input equal in strcmp?", "body": "<p>I am writing a program in C and have one question.</p>\n\n<p>First, let's say I have a scan for a string and then use strcmp.</p>\n\n<p>~~scan for user input~~</p>\n\n<pre><code>if (strcmp(string,\"meat\") == 0)\n    return 1;\n</code></pre>\n\n<p>How can I make it so that Meat,mEat,MEAT, etc will all be correct in this strcmp?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "c", "optimization", "compiler-optimization"], "comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 4, "creation_date": 1424289658, "post_id": 28592721, "comment_id": 45492107, "body": "so there are some serious issues with your benchmark programs. That will break anything you&#39;re trying to test anyway. Most notably you&#39;re mixing types and have type coersion going on which is VERY expensive in and of itself (and could be what your friend was referring to). Also there is nothing here a compiler can&#39;t calculate at compile time."}, {"owner": {"reputation": 192274, "user_id": 36565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ccfec45e3fba785daf0e89a797c9216?s=128&d=identicon&r=PG", "display_name": "David Rodr&#237;guez - dribeas", "link": "https://stackoverflow.com/users/36565/david-rodr%c3%adguez-dribeas"}, "edited": false, "score": 5, "creation_date": 1424289843, "post_id": 28592721, "comment_id": 45492234, "body": "<code>n = i * 0.5;</code> promotes <code>i</code> to <code>double</code>, multplies by .5 and converts back to <code>float</code>. <code>n = i &#47; 2;</code> divides (probably shifts) <code>i</code> by 2, then converts to double. You are not testing multiply vs. divide, but unrelated operations."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1424289855, "post_id": 28592721, "comment_id": 45492243, "body": "If you want your &quot;benchmarks&quot; to not get optimized away, try accumulating the result within each iteration in the <code>s</code> variable. Then print the final value of <code>s</code> after you&#39;ve made the timing calculation."}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 1, "creation_date": 1424290209, "post_id": 28592721, "comment_id": 45492453, "body": "To add to David&#39;s correct point: even if you did <code>i &#47; 2.0</code> and <code>i * 0.5</code>, the compiler is not (legally) allowed to optimize the divide into a multiplication. <a href=\"http://stackoverflow.com/questions/6430448/why-doesnt-gcc-optimize-aaaaaa-to-aaaaaa\">Floating point operations need to be performed as specified</a>. (although you might be able to argue that <code>2.0</code> and <code>0.5</code> are both perfectly representable by IEEE-754, so the compiler <i>might</i> be able to do this optimization in this specific case, but in general it can&#39;t)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1424290318, "post_id": 28592721, "comment_id": 45492511, "body": "I seriously doubt you are getting <i>&quot;1,000,000,000 calculations per microsecond!&quot;</i>"}, {"owner": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "edited": false, "score": 0, "creation_date": 1424290621, "post_id": 28592721, "comment_id": 45492681, "body": "to explain your friends attempt : multiplication is ALWAYS faster than division - BUT since modern hardware is massively optimized and has dedicated circuits for different purposes --- together with MANY OS-optimizations of various kind its pretty much impossible to make a statement about arithmetic speed, you can only measure it - and the results will never be general results, they will ALWAYS be specific ones, benchmarks for your current hardware &amp; software. The exact same testing-method WILL yield different results on different machines, even contradicting ones. Its only theory, not reality"}, {"owner": {"reputation": 1061, "user_id": 2529423, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/oQkBi.png?s=128&g=1", "display_name": "thephpdev", "link": "https://stackoverflow.com/users/2529423/thephpdev"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1424291059, "post_id": 28592721, "comment_id": 45492915, "body": "@Mgetz, I agree. I&#39;ve rewritten it. How&#39;s that?"}, {"owner": {"reputation": 1061, "user_id": 2529423, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/oQkBi.png?s=128&g=1", "display_name": "thephpdev", "link": "https://stackoverflow.com/users/2529423/thephpdev"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1424291088, "post_id": 28592721, "comment_id": 45492931, "body": "@Praetorian, done. See edit."}, {"owner": {"reputation": 1061, "user_id": 2529423, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/oQkBi.png?s=128&g=1", "display_name": "thephpdev", "link": "https://stackoverflow.com/users/2529423/thephpdev"}, "reply_to_user": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "edited": false, "score": 0, "creation_date": 1424291125, "post_id": 28592721, "comment_id": 45492949, "body": "@specializt, check latest edit,."}, {"owner": {"reputation": 3993, "user_id": 125405, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/71e57d309c0a11cc78732e82e3486f3e?s=128&d=identicon&r=PG", "display_name": "wolfPack88", "link": "https://stackoverflow.com/users/125405/wolfpack88"}, "edited": false, "score": 5, "creation_date": 1424291162, "post_id": 28592721, "comment_id": 45492969, "body": "@thephpdev: Don&#39;t completely change the question after you&#39;ve gotten answers. Ask a new question; otherwise you invalidate the answers already given."}, {"owner": {"reputation": 1061, "user_id": 2529423, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/oQkBi.png?s=128&g=1", "display_name": "thephpdev", "link": "https://stackoverflow.com/users/2529423/thephpdev"}, "reply_to_user": {"reputation": 3993, "user_id": 125405, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/71e57d309c0a11cc78732e82e3486f3e?s=128&d=identicon&r=PG", "display_name": "wolfPack88", "link": "https://stackoverflow.com/users/125405/wolfpack88"}, "edited": false, "score": 0, "creation_date": 1424291222, "post_id": 28592721, "comment_id": 45493009, "body": "@wolfPack88, will do. Apologies."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1424291970, "post_id": 28592721, "comment_id": 45493457, "body": "<a href=\"http://coliru.stacked-crooked.com/a/ba74dc83a98bde77\" rel=\"nofollow noreferrer\">Fixed sandbox app that explores the issue</a>"}, {"owner": {"reputation": 1130, "user_id": 3494492, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/j7gkb.png?s=128&g=1", "display_name": "kiwixz", "link": "https://stackoverflow.com/users/3494492/kiwixz"}, "edited": false, "score": 0, "creation_date": 1424292478, "post_id": 28592721, "comment_id": 45493748, "body": "Anyway <code>*2</code> is <code>&lt;&lt;1</code> and <code>&#47;2</code> is <code>&gt;&gt;1</code>..."}, {"owner": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "edited": false, "score": 0, "creation_date": 1424292692, "post_id": 28592721, "comment_id": 45493868, "body": "i dont see how your edit changes the fact that digital multiplication is always faster than division if measured for the exact same, non-specialized, arithmetic circuit ..."}, {"owner": {"reputation": 3681, "user_id": 2817371, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fafb901e8d840c703f4a5089692427ad?s=128&d=identicon&r=PG&f=1", "display_name": "Red Alert", "link": "https://stackoverflow.com/users/2817371/red-alert"}, "edited": false, "score": 0, "creation_date": 1424293763, "post_id": 28592721, "comment_id": 45494487, "body": "If you compile with <code>-ffast-math</code>, gcc will favor fast operations over strict adherence to the standard. Substituting division with a reciprocal approximation should be one such optimization."}], "answers": [{"comments": [{"owner": {"reputation": 523, "user_id": 2413844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKPJF.png?s=128&g=1", "display_name": "dwn", "link": "https://stackoverflow.com/users/2413844/dwn"}, "edited": false, "score": 0, "creation_date": 1424290293, "post_id": 28592795, "comment_id": 45492500, "body": "Just to be clear, I think @wolfPack88 is saying basically all your code evaluates is &#39;(float)((m-1)&gt;&gt;1)&#39;. You should probably look at the asm."}, {"owner": {"reputation": 3993, "user_id": 125405, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/71e57d309c0a11cc78732e82e3486f3e?s=128&d=identicon&r=PG", "display_name": "wolfPack88", "link": "https://stackoverflow.com/users/125405/wolfpack88"}, "reply_to_user": {"reputation": 523, "user_id": 2413844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKPJF.png?s=128&g=1", "display_name": "dwn", "link": "https://stackoverflow.com/users/2413844/dwn"}, "edited": false, "score": 2, "creation_date": 1424290493, "post_id": 28592795, "comment_id": 45492599, "body": "@dwn: No, look at the third code block (the one he timed with and without optimization). He has a loop that calculates something 1000000 times, but the calculation is exactly the same. The compiler is smart enough to notice that, and calculate it only once (perhaps even at compile time), leaving the executable with very little to do."}, {"owner": {"reputation": 523, "user_id": 2413844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKPJF.png?s=128&g=1", "display_name": "dwn", "link": "https://stackoverflow.com/users/2413844/dwn"}, "edited": false, "score": 0, "creation_date": 1424290638, "post_id": 28592795, "comment_id": 45492699, "body": "Oh, then I think I disagree; the variable &#39;n&#39; is never referenced in the loop, so it is probably just ignored."}, {"owner": {"reputation": 3993, "user_id": 125405, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/71e57d309c0a11cc78732e82e3486f3e?s=128&d=identicon&r=PG", "display_name": "wolfPack88", "link": "https://stackoverflow.com/users/125405/wolfpack88"}, "reply_to_user": {"reputation": 523, "user_id": 2413844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKPJF.png?s=128&g=1", "display_name": "dwn", "link": "https://stackoverflow.com/users/2413844/dwn"}, "edited": false, "score": 0, "creation_date": 1424290746, "post_id": 28592795, "comment_id": 45492751, "body": "@dwn: That&#39;s more or less what I said... the compiler is smart enough to recognize that things aren&#39;t being used, and it gets optimized away. That&#39;s how optimization can have such a large effect."}, {"owner": {"reputation": 523, "user_id": 2413844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKPJF.png?s=128&g=1", "display_name": "dwn", "link": "https://stackoverflow.com/users/2413844/dwn"}, "edited": false, "score": 0, "creation_date": 1424290786, "post_id": 28592795, "comment_id": 45492776, "body": "@woldPack88 Okay, sounds like we agree more or less"}, {"owner": {"reputation": 1061, "user_id": 2529423, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/oQkBi.png?s=128&g=1", "display_name": "thephpdev", "link": "https://stackoverflow.com/users/2529423/thephpdev"}, "edited": false, "score": 0, "creation_date": 1424291191, "post_id": 28592795, "comment_id": 45492990, "body": "OK, it appears that was happening."}], "tags": [], "owner": {"reputation": 3993, "user_id": 125405, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/71e57d309c0a11cc78732e82e3486f3e?s=128&d=identicon&r=PG", "display_name": "wolfPack88", "link": "https://stackoverflow.com/users/125405/wolfpack88"}, "is_accepted": true, "score": 19, "last_activity_date": 1424289628, "creation_date": 1424289628, "answer_id": 28592795, "question_id": 28592721, "link": "https://stackoverflow.com/questions/28592721/1-000-000-000-calculations-per-microsecond/28592795#28592795", "title": "1,000,000,000 calculations per microsecond?", "body": "<p>Since the code doesn't do anything differently in each iteration of the loop, the compiler is free to move the code within the loop outside (the result will be exactly the same), and remove the loop entirely, leaving you with an almost 0 run-time, as you saw.</p>\n"}, {"tags": [], "owner": {"reputation": 7120, "user_id": 168610, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JGCpk.png?s=128&g=1", "display_name": "davbryn", "link": "https://stackoverflow.com/users/168610/davbryn"}, "is_accepted": false, "score": 5, "last_activity_date": 1424289896, "creation_date": 1424289896, "answer_id": 28592876, "question_id": 28592721, "link": "https://stackoverflow.com/questions/28592721/1-000-000-000-calculations-per-microsecond/28592876#28592876", "title": "1,000,000,000 calculations per microsecond?", "body": "<pre><code>for (i = 0; i &lt; m; i++)\n{\n    //  make it a trivial pure float calculation with no int casting to float\n    n = 11.1 * 0.53;\n    o = n * 0.53;\n    p = o * 0.53;\n    q = p * 0.53;\n    r = q * 0.53;\n    s = r * 0.53;\n}\n</code></pre>\n\n<p>is a loop that does not reference <code>i</code> or <code>m</code> and contains no circular references so it is trivial for the compiler to remove the looping statement</p>\n"}, {"tags": [], "owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "is_accepted": false, "score": 5, "last_activity_date": 1424766811, "last_edit_date": 1424766811, "creation_date": 1424765717, "answer_id": 28690939, "question_id": 28592721, "link": "https://stackoverflow.com/questions/28592721/1-000-000-000-calculations-per-microsecond/28690939#28690939", "title": "1,000,000,000 calculations per microsecond?", "body": "<p>This is a good example of how benchmarking a high level language is even harder than benchmarking assembly (which is hard enough to get right already). The compiler can, and often will, interfere with your benchmark.</p>\n\n<p>Your friend has a point, a division (<em>actual</em> division, not just writing <code>/</code> in C) is slower than a multiplication. For doubles, the ratio is about 4 for the latency, and division isn't pipelined whereas multiplication is, so the throughput ratio is much worse: around 20. (these numbers are for Haswell, but are typical)</p>\n\n<p>Integer division is slower than floating point division, but using floating point multiplication on integer causes two conversions. The conversions aren't too bad, so in total, the floating point multiplication is still faster.</p>\n\n<p>But any proper compiler will turn integer division by a constant into integer multiplication and a shift, and maybe some extra fix-up stuff (depending on the divisor and the type). Division by a power of two is even simpler. For details, see <a href=\"https://gmplib.org/~tege/divcnst-pldi94.pdf\" rel=\"noreferrer\">Division by Invariant Integers using Multiplication</a>. As an example, consider</p>\n\n<pre><code>int div2(int i)\n{\n    return i / 2;\n}\n</code></pre>\n\n<p>GCC turns this into</p>\n\n<pre><code>mov eax, edi\nshr eax, 31\nadd eax, edi\nsar eax\nret\n</code></pre>\n\n<p>Which depending on the \u00b5arch, would take 3 or 4 cycles (excluding control flow).</p>\n\n<p>On the other hand,</p>\n\n<pre><code>int div2(int i)\n{\n    return i * 0.5;\n}\n</code></pre>\n\n<p>Is turned into</p>\n\n<pre><code>    cvtsi2sd    xmm0, edi\n    mulsd   xmm0, QWORD PTR .LC0[rip]\n    cvttsd2si   eax, xmm0\n    ret\n.LC0:\n    .long   0\n    .long   1071644672\n</code></pre>\n\n<p>Which would take about 4+5+4 = 13 cycles.</p>\n\n<p>A compiler is also allowed to turn <code>f / 2.0</code> into <code>f * 0.5</code> even without any \"unsafe optimizations\", division by a <em>power of two</em> is equivalent to multiplication by its inverse. That does not hold for numbers that are not a power of two.</p>\n\n<p>So even with a benchmark that at least measured <em>something</em>, it probably wouldn't have measured the right thing. In order to measure the latency floating point division vs multiplication, you could write something like:</p>\n\n<pre><code>.section data\nalign 16\none: dq 1.0, 1.0\n.section text\n_bench1:\n  mov ecx, -10000000\n  movapd xmm0, [one]\nloopone:\n  mulpd xmm0, xmm0\n  mulpd xmm0, xmm0\n  add ecx, 1\n  jnz loopone\n  ret\n_bench2:\n  mov ecx, -10000000\n  movapd xmm0, [one]\nlooptwo:\n  divpd xmm0, xmm0\n  divpd xmm0, xmm0\n  add ecx, 1\n  jnz looptwo\n  ret\n</code></pre>\n\n<p>Call both a thousand, wrapped in <code>rdtsc</code> to get the time. Take the lowest time for both. Multiply the time by the ratio between your base clock and turbo clock. Then you should have (approximately) the number of cycles both loops take, divide by 20000000 to get the number of cycles per <code>mulpd</code> or <code>divpd</code>. The time division takes depends on the values being divided, so it doesn't give the most general result.</p>\n\n<p>You may also be interested in a <a href=\"http://www.agner.org/optimize/instruction_tables.pdf\" rel=\"noreferrer\">list of instruction latencies and throughputs</a>.</p>\n"}], "owner": {"reputation": 1061, "user_id": 2529423, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/oQkBi.png?s=128&g=1", "display_name": "thephpdev", "link": "https://stackoverflow.com/users/2529423/thephpdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1607, "favorite_count": 2, "accepted_answer_id": 28592795, "answer_count": 3, "score": 12, "last_activity_date": 1424766811, "creation_date": 1424289387, "last_edit_date": 1424291127, "question_id": 28592721, "link": "https://stackoverflow.com/questions/28592721/1-000-000-000-calculations-per-microsecond", "title": "1,000,000,000 calculations per microsecond?", "body": "<p>OK, I've been talking to a friend about compilers and optimisation of programs, and he suggested that <code>n * 0.5</code> is faster than <code>n / 2</code>. I said that compilers do that kind of optimisation automatically, so I wrote a small program to see if there was a difference between <code>n / 2</code> and <code>n * 0.5</code>:</p>\n\n<p>Division:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main(int argc, const char * argv[]) {\n    int i, m;\n    float n, s;\n    clock_t t;\n\n    m = 1000000000;\n    t = clock();\n    for(i = 0; i &lt; m; i++) {\n        n = i / 2;\n    }\n    s = (float)(clock() - t) / CLOCKS_PER_SEC;\n\n    printf(\"n = i / 2: %d calculations took %f seconds (last calculation = %f)\\n\", m, s, n);\n\n    return 0;\n}\n</code></pre>\n\n<p>Multiplication:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main(int argc, const char * argv[]) {\n    int i, m;\n    float n, s;\n    clock_t t;\n\n    m = 1000000000;\n    t = clock();\n    for(i = 0; i &lt; m; i++) {\n        n = i * 0.5;\n    }\n    s = (float)(clock() - t) / CLOCKS_PER_SEC;\n\n    printf(\"n = i * 0.5: %d calculations took %f seconds (last calculation = %f)\\n\", m, s, n);\n\n    return 0;\n}\n</code></pre>\n\n<p>And for both versions I got 0.000002s avg. when compiled with <code>clang main.c -O1</code>. And he said there must be something wrong with the time measurement. So he then wrote a program:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n\nusing namespace std;\n\nint main()\n{\n    clock_t ts, te;\n    double  dT;\n\n    int i, m;\n    double n, o, p, q, r, s;\n    m = 1000000000;\n\n    cout &lt;&lt; \"Independent calculations:\\n\";\n    ts = clock();\n    for (i = 0; i &lt; m; i++)\n    {\n        //  make it a trivial pure float calculation with no int casting to float\n        n = 11.1 / 2.3;\n        o = 22.2 / 2.3;\n        p = 33.3 / 2.3;\n        q = 44.4 / 2.3;\n        r = 55.5 / 2.3;\n        s = 66.6 / 2.3;\n    }\n\n    te = clock();\n    dT = ((float)(te - ts)) / CLOCKS_PER_SEC;   //  make initial call to get the elapsed time to run the loop\n    ts = clock();\n\n    printf(\"Division: %d calculations took %f seconds\\n\", m, dT);\n\n    for (i = 0; i &lt; m; i++)\n    {\n        //  make it a trivial pure float calculation with no int casting to float\n        n = 11.1 * 0.53;\n        o = 22.2 * 0.53;\n        p = 33.3 * 0.53;\n        q = 44.4 * 0.53;\n        r = 55.5 * 0.53;\n        s = 66.6 * 0.53;\n    }\n\n    te = clock();\n    dT = ((float)(te - ts)) / CLOCKS_PER_SEC;   //  make initial call to get the elapsed time to run the loop\n    ts = clock();\n\n    printf(\"Multiplication: %d calculations took %f seconds\\n\", m, dT);\n\n    cout &lt;&lt; \"\\nDependent calculations:\\n\";\n    for (i = 0; i &lt; m; i++)\n    {\n        //  make it a trivial pure float calculation with no int casting to float\n        n = 11.1 / 2.3;\n        o = n / 2.3;\n        p = o / 2.3;\n        q = p / 2.3;\n        r = q / 2.3;\n        s = r / 2.3;\n    }\n\n\n    te = clock();\n    dT = ((float)(te - ts)) / CLOCKS_PER_SEC;   //  make initial call to get the elapsed time to run the loop\n    ts = clock();\n\n    printf(\"Division: %d calculations took %f seconds\\n\", m, dT);\n\n    for (i = 0; i &lt; m; i++)\n    {\n        //  make it a trivial pure float calculation with no int casting to float\n        n = 11.1 * 0.53;\n        o = n * 0.53;\n        p = o * 0.53;\n        q = p * 0.53;\n        r = q * 0.53;\n        s = r * 0.53;\n    }\n\n\n    te = clock();\n    dT = ((float)(te - ts)) / CLOCKS_PER_SEC;   //  make initial call to get the elapsed time to run the loop\n    ts = clock();\n\n    printf(\"Multiplication: %d calculations took %f seconds\\n\", m, dT);\n\n    return 0;\n}\n</code></pre>\n\n<p>And for that he got...</p>\n\n<pre><code>1.869570s\n1.868254s\n25.674016s\n3.497555s\n</code></pre>\n\n<p>...in that order.</p>\n\n<p>So I ran the program on my machine compiled with <code>clang++ main.cpp -O1</code> and I got similar results as before: <code>0.000002 to 0.000011</code>.</p>\n\n<p>However, when I compiled the program without optimisation, I got similar results to him on his first test. So my question is, how can any amount of optimisation make the program <em>that</em> much faster?</p>\n"}, {"tags": ["c", "pointers", "allocation"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424289482, "post_id": 28592686, "comment_id": 45491988, "body": "the <code>sizeof(strlen(buffer))</code> is a very interesting construct, which at the first glance I am failing to interpret. Anyway, this is obviously not doing what you intend. <code>strlen</code> alone will be enough here."}, {"owner": {"reputation": 9308, "user_id": 235700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ab02b76dcfedbe47d2b7335a6277f3?s=128&d=identicon&r=PG", "display_name": "slugonamission", "link": "https://stackoverflow.com/users/235700/slugonamission"}, "edited": false, "score": 0, "creation_date": 1424289538, "post_id": 28592686, "comment_id": 45492025, "body": "<code>strcpy(array[size],buffer);</code> - your compiler should be throwing a warning about this line, heed it! <code>strcpy</code> expects a <code>char*</code>, and you&#39;re passing it a <code>char</code>. You probably want to take the address of it ;)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424289596, "post_id": 28592686, "comment_id": 45492066, "body": "And <code>malloc</code>-ing stuff in a loop, but freeing it once should ignite some red lights in your head."}, {"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "edited": false, "score": 1, "creation_date": 1424289712, "post_id": 28592686, "comment_id": 45492145, "body": "You declare buffer to be an array of 50 characters, yet in your fgets statement you are reading up to 150 characters into that buffer (i.e. a buffer overflow).  Also, each time through the loop you will be assigning a new memory location to array leading to a lot of dangling pointers."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 4581172, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3ccde2f2b5ecf70c2e95ada0fd4e774f?s=128&d=identicon&r=PG&f=1", "display_name": "BeginnerC96", "link": "https://stackoverflow.com/users/4581172/beginnerc96"}, "edited": false, "score": 0, "creation_date": 1424291466, "post_id": 28592848, "comment_id": 45493157, "body": "Thanks, everything you wrote worked, except when it reads the first line, for some reason it is giving me stuff like this: ?K?p? instead of the actual line. First i do the realloc, then i malloc, copy it and increment the size"}, {"owner": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "edited": false, "score": 0, "creation_date": 1424291930, "post_id": 28592848, "comment_id": 45493440, "body": "Extending &#39;array&#39; by a single element each iteration calls to mind the tale of Shlemiel and the painter&#39;s algorithm ..."}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 1, "last_activity_date": 1424291664, "last_edit_date": 1424291664, "creation_date": 1424289789, "answer_id": 28592848, "question_id": 28592686, "link": "https://stackoverflow.com/questions/28592686/reading-in-values-using-pointers/28592848#28592848", "title": "Reading in values using pointers", "body": "<p>Your <code>array</code> should be an array of pointers. You have lines (so an array of lines), each line being a C-string (a pointer to a NUL terminated char array).\nSo you need to declare your variable as <code>char **array = NULL</code>.</p>\n\n<p>Now, each time you read a line you must alloc a new entry in your array of lines, this way <code>array=realloc(array,(size+1)*sizeof(char *))</code> then read a buffer, allocate memory to store the string read with <code>array[size]=malloc(strlen(buffer)+1)</code> and then copy <code>strcpy(array[size],buffer)</code> then increment the <code>size++</code>.</p>\n\n<p>You must free everything accordingly (free all pointers and then free the array). Also, take care about sizes, buffer is 50 but you tried to read 150... Be consistent.</p>\n"}], "owner": {"reputation": 9, "user_id": 4581172, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3ccde2f2b5ecf70c2e95ada0fd4e774f?s=128&d=identicon&r=PG&f=1", "display_name": "BeginnerC96", "link": "https://stackoverflow.com/users/4581172/beginnerc96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424291664, "creation_date": 1424289278, "question_id": 28592686, "link": "https://stackoverflow.com/questions/28592686/reading-in-values-using-pointers", "title": "Reading in values using pointers", "body": "<p>I have the following code, and i'm wondering how I can store each line of a text document into an array of pointers. I think im close but i'm getting a few errors.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n\n    FILE * fp;\n    char buffer[50];\n    int totalSize;\n    totalSize = 6;\n    int size = 0;\n    char * array;\n\n    fp = fopen(location,\"r\");\n\n\n    while (fgets(buffer,150,fp) != NULL)\n    {\n        array = malloc(sizeof(strlen(buffer))+1);\n        strcpy(array[size],buffer);\n        size++;\n    }\n\n    for (int x = 0; x &lt; size ; x++)\n    {\n        printf(\"%s\",array[x]);\n    } \n\n    free(array);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "file-io"], "comments": [{"owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "edited": false, "score": 0, "creation_date": 1424289925, "post_id": 28592682, "comment_id": 45492290, "body": "6 values is too many? Are you writing one on each of your fingers? Of one hand?"}, {"owner": {"reputation": 3, "user_id": 4529522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79522c18dfbccf6f5b9387384a246c63?s=128&d=identicon&r=PG&f=1", "display_name": "bandit1979", "link": "https://stackoverflow.com/users/4529522/bandit1979"}, "reply_to_user": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "edited": false, "score": 0, "creation_date": 1424290008, "post_id": 28592682, "comment_id": 45492337, "body": "No it isn&#39;t. My actual file contains 100,000,000 values in two columns of 50,000,000 values apiece."}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1424291469, "post_id": 28593120, "comment_id": 45493159, "body": "<code>while(fscanf(file, &quot;%f %f&quot;, &amp;v1, &amp;v2) == 2)</code> would ensure you read two values successfully."}], "tags": [], "owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "is_accepted": true, "score": 2, "last_activity_date": 1424292577, "last_edit_date": 1424292577, "creation_date": 1424290766, "answer_id": 28593120, "question_id": 28592682, "link": "https://stackoverflow.com/questions/28592682/attempting-to-read-certain-values-from-a-file-into-an-array-in-c/28593120#28593120", "title": "Attempting to Read Certain Values from a File into an Array in C", "body": "<p>I suggest reading both, and just ignoring the first. Something like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n    float v1, v2;\n    FILE* file = fopen(myfile, \"r\");\n    if (file == NULL) {\n        perror(\"open failed\");\n        return -1;\n        }\n    while(fscanf(file, \"%f %f\", &amp;v1, &amp;v2) == 2) {\n        print(\"read %f\\n\", v2);\n        }\n    return 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4529522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79522c18dfbccf6f5b9387384a246c63?s=128&d=identicon&r=PG&f=1", "display_name": "bandit1979", "link": "https://stackoverflow.com/users/4529522/bandit1979"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 28593120, "answer_count": 1, "score": 0, "last_activity_date": 1424292577, "creation_date": 1424289260, "last_edit_date": 1424291259, "question_id": 28592682, "link": "https://stackoverflow.com/questions/28592682/attempting-to-read-certain-values-from-a-file-into-an-array-in-c", "title": "Attempting to Read Certain Values from a File into an Array in C", "body": "<p>I have a file,examplefile.txt, with data like this:</p>\n\n<pre><code>0.000 3.142\n3.142 4.712\n4.712 1.571\n</code></pre>\n\n<p>I am trying to read only the values in the second column. In an effort to do this I have been using the following code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;float.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;math.h&gt;\n\nint main(int argc, const char * argv[])\n{\n    double tempvalue;\n    int a,b;\n\n    FILE *file;\n    char *myfile=malloc(sizeof(char)*80);\n    sprintf(myfile,\"examplefile.txt\");\n    if (fopen(myfile,\"r\")==NULL)\n    {\n\n    }\n    else\n    {\n        file=fopen(myfile,\"r\");\n        for (a=0;a&lt;3;a++)\n        {\n            for (b=0;b&lt;2;b++)\n            {\n                printf(\"a=%d\\n\",a);\n                fscanf(file,\"%lf\",&amp;tempvalue);\n                if (b==1)\n                {\n                    printf(\"%lf\\n\",tempvalue);\n                }\n            }\n        }  \n    }\n}\n</code></pre>\n\n<p>However,this only returns the value 1.571 every time. I can't store all of the values because the actual file I'm using contains too many values to store. I have not been able to find a solution for this problem yet. </p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424288897, "post_id": 28592520, "comment_id": 45491623, "body": "please reformat the code properly"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4581049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5eec32c17571ba6659a02b0f7024161?s=128&d=identicon&r=PG&f=1", "display_name": "LCM", "link": "https://stackoverflow.com/users/4581049/lcm"}, "edited": false, "score": 0, "creation_date": 1424639095, "post_id": 28592874, "comment_id": 45621436, "body": "You are correct in your assumption: SGENT_1 doesn&#39;t use the calc member but it does use all other members in the structure, in that order too. It then may make sense to use &amp;sgen as argument. I just don&#39;t know how the argument &amp;sgen from C is used in the assembly code of SGENT_1 so that it can access the members of the structure. In any case, the code only executes correctly with &amp;sgen as argument. Thanks for your help !"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1424289884, "creation_date": 1424289884, "answer_id": 28592874, "question_id": 28592520, "link": "https://stackoverflow.com/questions/28592520/invoking-a-function-calculation-in-c-through-a-pointer-defined-in-a-structure-w/28592874#28592874", "title": "Invoking a function calculation in C through a pointer defined in a structure, when function is written in assembly code", "body": "<p><code>sgen.calc</code> is a pointer to a function accepting one argument of type <code>void *</code> and returning nothing.  It is irrelevant how the machine code of the pointed-to function was produced.  In any event, the <em>value</em> of <code>sgen.calc</code> carries no information about the variable in which that value is stored, so if <code>sgen</code> contains the data to be submitted to the function, then the fact that its <code>calc</code> member points to that function doesn't provide any way around passing (a pointer to) that <code>struct</code>.</p>\n\n<p>Given no other information about the function pointed to by <code>sgen.calc</code>, a pointer to <code>sgen</code> is as good an argument for it as any other object pointer.  There is nothing inherently special about choosing that particular argument over any other.</p>\n\n<p>In fact, however, it is reasonable to suppose that the function assumes its argument to point to a data structure with a particular layout.  The C code implies that type <code>SGENT_1</code> is consistent with that layout.  It is impossible to determine from the code presented whether the function uses the <code>calc</code> member of that <code>struct</code>, but its placement as the last member is consistent with it not doing so.  In that case, it may be included in the C <code>struct</code> simply for organizational purposes.</p>\n"}], "owner": {"reputation": 3, "user_id": 4581049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5eec32c17571ba6659a02b0f7024161?s=128&d=identicon&r=PG&f=1", "display_name": "LCM", "link": "https://stackoverflow.com/users/4581049/lcm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 28592874, "answer_count": 1, "score": 0, "last_activity_date": 1424290079, "creation_date": 1424288744, "last_edit_date": 1424290079, "question_id": 28592520, "link": "https://stackoverflow.com/questions/28592520/invoking-a-function-calculation-in-c-through-a-pointer-defined-in-a-structure-w", "title": "Invoking a function calculation in C through a pointer defined in a structure, when function is written in assembly code", "body": "<p>I have a piece of code I am trying to understand how it works. SGENT_1_calc is a signal generator function, written as assembly code elsewhere. When the calculation is invoked in C,  sgen.calc(&amp;sgen),  requires its own structure address as argument. Why ?\nTHANKS IN ADVANCE FOR YOUR HELP !</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef struct {   \n    unsigned int freq;\n    unsigned int step_max;\n    unsigned int alpha;\n    int gain;\n    int offset;\n    int out;\n    void (*calc)(void *);\n    }SGENT_1;\n\n#define SGENT_1_DEFAULTS    { 5369,\n    1000,\n    0,\n    0x7fff,\n    0,\n    0,\n    (void (*)(void *))SGENT_1_calc}    // pointer casted here ???\n\n\n    void SGENT_1_calc(void *);  //SGENT1_calc is a signal generator function\n\n\n    SGENT_1 sgen = SGENT_1_DEFAULTS; // this is an instance \n\n    sgen.calc(&amp;sgen);  //don't understand how the calculation is invoked, \n                       // why it has &amp;sgen as an argument ???\n</code></pre>\n"}, {"tags": ["c", "process", "operating-system", "fork", "sleep"], "comments": [{"owner": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "edited": false, "score": 0, "creation_date": 1424292961, "post_id": 28592437, "comment_id": 45494020, "body": "Can you add implementations of read/writeNumber functions?"}, {"owner": {"reputation": 453, "user_id": 4496504, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/abdcd19d00d81c76c5c3398a5977abe3?s=128&d=identicon&r=PG&f=1", "display_name": "ChaniLastnam&#233;", "link": "https://stackoverflow.com/users/4496504/chanilastnam%c3%a9"}, "reply_to_user": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "edited": false, "score": 0, "creation_date": 1424294200, "post_id": 28592437, "comment_id": 45494709, "body": "@ValeriAtamaniouk Added"}, {"owner": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "edited": false, "score": 0, "creation_date": 1424294441, "post_id": 28592437, "comment_id": 45494840, "body": "Your read/write open operations are a bit inconsistent: both should use text mode to correctly handle newline chars."}], "answers": [{"tags": [], "owner": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "is_accepted": true, "score": 0, "last_activity_date": 1424295324, "last_edit_date": 1424295324, "creation_date": 1424294287, "answer_id": 28594102, "question_id": 28592437, "link": "https://stackoverflow.com/questions/28592437/c-create-two-processes-which-can-generate-odd-and-even-integers/28594102#28594102", "title": "C - create two processes which can generate odd and even integers", "body": "<p>The code looks ok. It can be simplified a lot though.</p>\n\n<pre><code>void getUniqueNumbers()\n{\n  struct process p;       // We need only 1 structure\n  size_t counter = 0;     // sample counter\n  int    oddEven;         // flag if we are parent\n  pid_t pid = fork();     // Fork here\n  if (-1 == pid)\n  {\n    abort(); // simply die on error\n  }\n\n  oddEven = 0 == pid ? 0 : 1;\n  p.processId = getpid(); // We are either child or parent.\n\n  while (counter &lt; numLimit)\n  {\n    int numberFromFile = getNumberFromFile();\n    if ((numberFromFile &amp; 1) == oddEven)\n    {\n      p.numbers[counter++] = numberFromFile;\n      printf(\"N: %d, PID: %ld\\n\", numberFromFile, (long)p.processId);\n      numberFromFile++;\n      writeNumberToFile(numberFromFile);\n    }\n    sleep(1); // sleep in both cases\n    // Extra check for parent: if child has died, we are in infinite\n    // loop, so check it here\n    if (0 != pid &amp;&amp; counter &lt; numLimit)\n    {\n      int status = 0;\n      if (waitpid(pid, &amp;status, WNOHANG) &gt; 0)\n      {\n        printf(\"Child exited with 0x%08X status\\n\", status);\n        break;\n      }\n    }\n  }\n\n  // wait till child process terminates\n  if (0 != pid)\n  {\n    int status = 0;\n    waitpid(pid, &amp;status, 0);\n    printf(\"Child exited with 0x%08X status\\n\", status);\n  }\n}\n</code></pre>\n\n<p>Also, the file reading/writing either should use file lock operations, or atomic file change. It is important to prevent potential errors like one thread is writing number 40006, and another one manages to read 400. Should not happen in real life though.</p>\n\n<p>File locks are needed to prevent concurrent access to the same contents. It can be exclusive lock, or shared read exclusive write.</p>\n\n<p>Atomic modifications are feature that enables to replace file contents atomically, regardless of how many operations it took to write the data. It is an alternative to keep data consistent. </p>\n"}], "owner": {"reputation": 453, "user_id": 4496504, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/abdcd19d00d81c76c5c3398a5977abe3?s=128&d=identicon&r=PG&f=1", "display_name": "ChaniLastnam&#233;", "link": "https://stackoverflow.com/users/4496504/chanilastnam%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1467, "favorite_count": 0, "accepted_answer_id": 28594102, "answer_count": 1, "score": 0, "last_activity_date": 1424295324, "creation_date": 1424288411, "last_edit_date": 1495540622, "question_id": 28592437, "link": "https://stackoverflow.com/questions/28592437/c-create-two-processes-which-can-generate-odd-and-even-integers", "title": "C - create two processes which can generate odd and even integers", "body": "<p>I have this assignment where I have to create two processes and each process has to generate 50 integers which are odd or even. </p>\n\n<blockquote>\n  <p>Write a simple sequence-number system through which two processes, P1 and P2, can each obtain 50 unique integers, such that one receives all the odd and the other all the even numbers. Use the fork() call to create P1 and P2. Given a file, F, containing a single number, each process must perform the following steps: <br><br>\n  a. Open F.<br>\n  b. Read the sequence number N from the file.<br>\n  c. Close F.<br>\n  d. Output N and the process' PID (either on screen or test file).<br>\n  e. Increment N by 1<br>\n  f. Open F.<br>\n  g. Write N to F.<br>\n  h. Flush F.<br>\n  i. Close F<br></p>\n</blockquote>\n\n<p>As <a href=\"https://stackoverflow.com/a/28554710/4496504\">suggested by SO user</a> I have created a loop in each process and ran the steps as mentioned above. But I am not sure if this approach is correct. I have asked my Teaching assistant for help and he suggested to do the same(using sleep call and waiting for a valid integer). But the thing is I can obtain the same results without using the sleep call. So I am not sure if I am applying the logic properly to code. Can someone please help?</p>\n\n<p>This is my implementation:</p>\n\n<pre><code>void getUniqueNumbers() {\n\n    struct process p1;\n    struct process p2;\n    int numberFromFile;\n\n    pid_t pid = fork();\n\n    // Process 1\n    if (pid == 0) {\n\n        int p1Counter = 0;\n        p1.processId = getpid();\n\n        while(p1Counter &lt; numLimit) {\n            numberFromFile = getNumberFromFile();\n            if (numberFromFile % 2 == 0) { // even\n                p1.numbers[p1Counter] = numberFromFile;\n                printf(\"N: %d, PID: %d\\n\", numberFromFile, p1.processId);\n                numberFromFile++;\n                writeNumberToFile(numberFromFile);\n                p1Counter++;\n            }\n            else {\n                sleep(1);\n            }\n\n        }\n\n    }\n    // Process 2\n    else if (pid &gt; 0 ) {\n\n        int p2Counter = 0;\n        p2.processId = getpid();\n\n        while(p2Counter &lt; numLimit) {\n            numberFromFile = getNumberFromFile();\n            if (numberFromFile % 2 != 0) { // odd\n                p2.numbers[p2Counter] = numberFromFile;\n                printf(\"N: %d, PID: %d\\n\", numberFromFile, p2.processId);\n                numberFromFile++;\n                writeNumberToFile(numberFromFile);\n                p2Counter++;\n            }\n            else {\n                sleep(1);\n            }\n        }\n\n    }\n    else {\n        printf(\"Error: Could not create process\\n\");\n    }\n\n}\n</code></pre>\n\n<p>Read/Write functions:</p>\n\n<pre><code>// Returns the number included in user provided file\nint getNumberFromFile() {\n\n    FILE *fp = fopen(fileName, \"rb\");\n    int num = 0;\n\n    if (fp != 0) {\n        char line[10];\n        if (fgets(line, sizeof(line), fp) != 0)\n            num = atoi(line);\n        fclose(fp);\n    }\n\n    return num;\n\n}\n\n// Writes a given number to the user provided file\nvoid writeNumberToFile(int num) {\n\n    FILE *fp = fopen(fileName, \"w\");\n\n    if (fp != 0) {\n        fprintf(fp, \"%d\", num);\n        fclose(fp);\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424366861, "post_id": 28592349, "comment_id": 45529332, "body": "So the exercise calls for tranposing a matrix to another size, for example a 4x5 matrix will be transposed to a 5x4 matrix.  Though a function cannot return the value, i figured i would transpose and print the matrix within the function, however my output is garbage.  Any idea?"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424303216, "post_id": 28592429, "comment_id": 45498881, "body": "although, why would some of the values transfer?  If its destroyed, wouldnt all the values be junk, instead of the ones at the end of the array?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424303441, "post_id": 28592429, "comment_id": 45498961, "body": "you are experiencing whats called &#39;Undefined Behavior&#39;. Anything is possible, what actually happening in your case in the the Matrix in displayMatrix gets allocated in the roughly same place in memory as the first Matrix and so you can see some of the values. Try calling printf(&quot;heelo world&quot;) between te calls to the defineMAtrix and displayMAtrix calls, that will reuse the same memory and mess it up totally"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": true, "score": 1, "last_activity_date": 1424288399, "creation_date": 1424288399, "answer_id": 28592429, "question_id": 28592349, "link": "https://stackoverflow.com/questions/28592349/kochans-programming-in-c-exercise-7-12/28592429#28592429", "title": "Kochan&#39;s Programming in C Exercise 7.12", "body": "<p>you create a matrix called Matrix in defineMatrix. This is private to that function and it gets destroyed when the function completes. Since you want a dynamically sized array things get complicated, the easiest thing to do is to not have those 2 functions. Just put the code inline in main</p>\n"}, {"comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "edited": false, "score": 0, "creation_date": 1424293252, "post_id": 28592569, "comment_id": 45494168, "body": "@Jerry Singh thats why i said &#39;things get complicated&#39;"}], "tags": [], "owner": {"reputation": 1439, "user_id": 3717347, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/rUWzF.jpg?s=128&g=1", "display_name": "lychee", "link": "https://stackoverflow.com/users/3717347/lychee"}, "is_accepted": false, "score": 0, "last_activity_date": 1424288901, "creation_date": 1424288901, "answer_id": 28592569, "question_id": 28592349, "link": "https://stackoverflow.com/questions/28592349/kochans-programming-in-c-exercise-7-12/28592569#28592569", "title": "Kochan&#39;s Programming in C Exercise 7.12", "body": "<p>It's because the array matrix in defineMatrix life is over when the function completes(the stack frame is popped from the stack). In this case if you want to modify an array in another function your function should accept a reference to the array, or to request memory and create matrix from heap with malloc() and return a pointer to it.</p>\n"}], "owner": {"reputation": 71, "user_id": 4368657, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/61a8607ac335c9aea88c073b39915534?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry Singh", "link": "https://stackoverflow.com/users/4368657/jerry-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 1, "accepted_answer_id": 28592429, "answer_count": 2, "score": -3, "last_activity_date": 1424288901, "creation_date": 1424288148, "question_id": 28592349, "link": "https://stackoverflow.com/questions/28592349/kochans-programming-in-c-exercise-7-12", "title": "Kochan&#39;s Programming in C Exercise 7.12", "body": "<p>working on Kochans book, and ran into a little difficulty with Exercise 7.12.  The goal is to input a variable length two dimensional array and transpose it.  I've got the transposing part alright, however when i input values into the array, they dont all make it.  The code is below.  Say I specify the array should have two rows, and two column.  and i enter 1,2,3,4.  The return i get is 1,2,3,32.  I think the 32 is just a junk number.  While I suspect there is a problem with my algorithm, I cant figure what it is.  Any insight would be appreciated. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void)\n{\nint Matrix;\nint transposedMatrix;\nint a;\nint b;\n\nprintf (\"Enter rows\\n\");\nscanf (\"%i\", &amp;a);\nprintf (\"Enter columns\\n\");\nscanf (\"%i\", &amp;b);\n\ndefineMatrix (a,b);\ndisplayMatrix(a,b);\n\n return 0;\n}\n\nvoid defineMatrix(a,b)\n{\nint Matrix[a][b];\n\nint row, column;\n\nfor (row = 0; row &lt; a; ++row){\n    for (column= 0; column &lt; b; ++column){\n       printf (\"Enter value\");\n       scanf (\"%i\\n\", &amp;Matrix[row][column]);\n}\n}\nreturn 0;\n}\n\nvoid displayMatrix(a,b)\n\n{\n\nint row, column;\nint Matrix[a][b];\n\nfor (row = 0; row &lt; a; ++row){\n    for (column= 0; column &lt;b; ++column)\n        printf (\"%5i\", Matrix[row][column]);\n\n    printf (\"\\n\");\n\n}\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424287367, "post_id": 28592028, "comment_id": 45490681, "body": "&quot;How could I &quot;force&quot; a function that includes test.h&quot;... functions don&#39;t include headers; translation units do. As you have it now, it will <i>not</i> link correctly, as <code>test_func</code> is <code>inline</code>d in a single translation unit (main.c), yet referenced from another (test.c).  What problem are you <i>really</i> trying to solve ?"}, {"owner": {"reputation": 776, "user_id": 1806687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa0b54ac5d06573cfe66409b08e9d153?s=128&d=identicon&r=PG", "display_name": "user1806687", "link": "https://stackoverflow.com/users/1806687/user1806687"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424287484, "post_id": 28592028, "comment_id": 45490754, "body": "@WhozCraig I am writting a piece of software for microcontrollers that the users will be able to use. But I need them to manually define that specific function, because its up to them to do with that value what they want."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424287570, "post_id": 28592028, "comment_id": 45490805, "body": "Would a function pointer, referencing a default implementation or detectable as NULL (no-op) and reset to the user-provided alternative on load achieve your goal ?"}, {"owner": {"reputation": 776, "user_id": 1806687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa0b54ac5d06573cfe66409b08e9d153?s=128&d=identicon&r=PG", "display_name": "user1806687", "link": "https://stackoverflow.com/users/1806687/user1806687"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424287653, "post_id": 28592028, "comment_id": 45490861, "body": "@WhozCraig But wouldn&#39;t this require a global variable in test.h?"}, {"owner": {"reputation": 776, "user_id": 1806687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa0b54ac5d06573cfe66409b08e9d153?s=128&d=identicon&r=PG", "display_name": "user1806687", "link": "https://stackoverflow.com/users/1806687/user1806687"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424287799, "post_id": 28592028, "comment_id": 45490944, "body": "@WhozCraig Could you post an anwser with what exactly  you mean? I am having trouble understanding."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424287811, "post_id": 28592028, "comment_id": 45490953, "body": "Likely it would require an <code>extern</code> setup in one way or another. If you want a compile-time solution the alternative is to lose the inlining and instead simply prototype and invoke. The linker will sort out the madness if the user didn&#39;t <code>#define SOMETHING</code> and provide an implementation during build."}, {"owner": {"reputation": 776, "user_id": 1806687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa0b54ac5d06573cfe66409b08e9d153?s=128&d=identicon&r=PG", "display_name": "user1806687", "link": "https://stackoverflow.com/users/1806687/user1806687"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424287927, "post_id": 28592028, "comment_id": 45491012, "body": "@WhozCraig I guess I could live without inline."}, {"owner": {"reputation": 776, "user_id": 1806687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa0b54ac5d06573cfe66409b08e9d153?s=128&d=identicon&r=PG", "display_name": "user1806687", "link": "https://stackoverflow.com/users/1806687/user1806687"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424288065, "post_id": 28592028, "comment_id": 45491083, "body": "@WhozCraig Just for completness could you provide more detail on how you&#39;d achieve it, how you said it above ? With extern and what not."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1424288282, "post_id": 28592028, "comment_id": 45491217, "body": "If you want it compile-time, my prior comment (and dove-tailing with Philip&#39;s answer) is how I would do it. Provide the prototype, invoke the function, and mandate the user <code>#define SOMETHING</code> and provide a function body <i>somewhere</i> (doesn&#39;t have to be <code>main.c</code>; they could conditionally pull inan additional .c file into the build). I think you have it down. A functor-ptr solution would be more akin to a runtime-decision of execution, and considerably more tedious to setup."}], "answers": [{"tags": [], "owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "is_accepted": true, "score": 2, "last_activity_date": 1424287354, "creation_date": 1424287354, "answer_id": 28592102, "question_id": 28592028, "link": "https://stackoverflow.com/questions/28592028/force-another-file-to-define-a-function/28592102#28592102", "title": "force another file to define a function", "body": "<p>In short it should be possible to do this.\nWhy ? The file implementing a function does not have to be in a header file with the same name.\nThe linker will resolve any issues if any and complain if something is missing.\nIf the compiler complains, then there is a missing header file or your header file function definition does not match with what you have in the c file.</p>\n"}], "owner": {"reputation": 776, "user_id": 1806687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa0b54ac5d06573cfe66409b08e9d153?s=128&d=identicon&r=PG", "display_name": "user1806687", "link": "https://stackoverflow.com/users/1806687/user1806687"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 28592102, "answer_count": 1, "score": 0, "last_activity_date": 1424287354, "creation_date": 1424287109, "question_id": 28592028, "link": "https://stackoverflow.com/questions/28592028/force-another-file-to-define-a-function", "title": "force another file to define a function", "body": "<p>Lets say I have 3 seperate files called: <strong>main.c</strong>, <strong>test.c</strong> and <strong>test.h</strong>. How could I \"force\" a function that includes <strong>test.h</strong> to define a function which is already declared in <strong>test.h</strong>, that <strong>test.c</strong> file can call it. </p>\n\n<p>This ia a bit messy, so let me give you some code samples of what I mean.</p>\n\n<p><strong>test.h</strong>:</p>\n\n<pre><code>...\n#define SOMETHING\n...\n#ifdef SOMETHING\ninline void test_func(BYTE b);\n#endif\n...\n</code></pre>\n\n<p><strong>test.c</strong>:</p>\n\n<pre><code>#include \"test.h\"\n\nvoid somefunction(void) \n{\n    ...\n    #ifdef SOMETHING\n    test_func(integer_value);\n    #endif\n    ...        \n}\n</code></pre>\n\n<p><strong>main.c</strong>:</p>\n\n<pre><code>#include \"test.h\"\n\nint main(void)\n{\n    ...\n}\ninline void test_func(BYTE b)\n{\n    // Do something with b\n}\n</code></pre>\n\n<p>In short: <strong>test.h</strong> declared a function, <strong>main.c</strong> defines that function and <strong>test.c</strong> calls that function.</p>\n\n<p>Is this possible? How?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>The user declares the function in <strong>main.c</strong> when to compiler gives a error or something that that function is not declared.</p>\n"}, {"tags": ["c", "crc32"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424288734, "post_id": 28591991, "comment_id": 45491514, "body": "Look here: <a href=\"http://www.danielvik.com/2010/10/calculating-reverse-crc.html\" rel=\"nofollow noreferrer\">danielvik.com/2010/10/calculating-reverse-crc.html</a>  ,specifically in the &quot;reversing crc&quot; section. It is demonstrating how to to get ANY desired CRC by appending four bytes to the data."}, {"owner": {"reputation": 107, "user_id": 4565423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pP6Oj.jpg?s=128&g=1", "display_name": "mrhpogie", "link": "https://stackoverflow.com/users/4565423/mrhpogie"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424289231, "post_id": 28591991, "comment_id": 45491828, "body": "thx very much. I certainly will take a closer look"}], "answers": [{"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 1, "last_activity_date": 1424294144, "last_edit_date": 1424294144, "creation_date": 1424290933, "answer_id": 28593175, "question_id": 28591991, "link": "https://stackoverflow.com/questions/28591991/crc32-of-already-crc32-treated-data-with-the-crc-data-appended/28593175#28593175", "title": "CRC32 of already CRC32 treated data with the CRC data appended", "body": "<p>It should always end up with crc32 = 0x2144DF1C because of these two lines:</p>\n\n<pre><code>    crc = accumulatedCrc32 ^ 0xFFFFFFFF;\n\n    return crc ^ 0xFFFFFFFF;\n</code></pre>\n\n<p>So when regenerating the crc again on data that contains the original data + crc, check for the value 0x2144DF1C . If those two lines had been:</p>\n\n<pre><code>    crc = 0;\n\n    return crc;\n</code></pre>\n\n<p>then you would get a crc of zero if you ran the crc again on data + crc.</p>\n"}, {"tags": [], "owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": true, "score": 5, "last_activity_date": 1424318286, "creation_date": 1424318286, "answer_id": 28598371, "question_id": 28591991, "link": "https://stackoverflow.com/questions/28591991/crc32-of-already-crc32-treated-data-with-the-crc-data-appended/28598371#28598371", "title": "CRC32 of already CRC32 treated data with the CRC data appended", "body": "<p>This is a mathematical property of CRCs.  If a \"pure\" CRC without pre or post-processing, is appended to the message, then the CRC of the whole thing will always be zero.  In fact this simplifies the checking of messages with CRCs in hardware, since you can just run the entire message and CRC through the CRC register, and check that the result at the end is zero.</p>\n\n<p>In the mathematics of CRC, you can consider a division operation, where the dividend is the message, the divisor is the CRC polynomial, and the remainder of the division is the CRC.  If you append the CRC to the message, it is effectively subtracting the remainder.  Then when you divide <em>that</em> message by the polynomial, you get a zero remainder.  In the realm of integers, 137 % 7 == 4.  I subtract 4 from 137, I get 133.  Then 133 % 7 == 0.</p>\n\n<p>In this case there is pre and post-processing (the <code>^ 0xFFFFFFFF</code>s).  Then the result is not zero, but a different constant.  That constant is simply the CRC of the message \"00 00 00 00\".</p>\n"}], "owner": {"reputation": 107, "user_id": 4565423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pP6Oj.jpg?s=128&g=1", "display_name": "mrhpogie", "link": "https://stackoverflow.com/users/4565423/mrhpogie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 969, "favorite_count": 1, "accepted_answer_id": 28598371, "answer_count": 2, "score": 4, "last_activity_date": 1424318286, "creation_date": 1424286952, "question_id": 28591991, "link": "https://stackoverflow.com/questions/28591991/crc32-of-already-crc32-treated-data-with-the-crc-data-appended", "title": "CRC32 of already CRC32 treated data with the CRC data appended", "body": "<p>I use the following C algo to calculate a CRC32 on data:</p>\n\n<pre><code>#define CRC32_POLYNOM_REVERSED   0xEDB88320\n\nuint32 calcCrc32(uint8* buffer, uint32 bufferSize) {\n    return accumulateCrc32(0, buffer, bufferSize);\n}\n\nuint32 accumulateCrc32(uint32 accumulatedCrc32, uint8* buffer, uint32 bufferSize) {\n    uint32 i, j;\n    uint32 crc, mask;\n\n    crc = accumulatedCrc32 ^ 0xFFFFFFFF;\n\n    for (i = 0; i &lt; bufferSize; i++) {\n        crc ^= buffer[i];\n        for (j = 8; j &gt; 0; j--) {\n            mask = -(crc &amp; 1);\n            crc = (crc &gt;&gt; 1) ^ (CRC32_POLYNOM_REVERSED &amp; mask);\n        }\n    }\n\n    return crc ^ 0xFFFFFFFF;\n}\n</code></pre>\n\n<p>When I apply it to any data and concatenate the resulting 4 bytes of CRC32 to the data and run it through this routine again, it always ends up with the result</p>\n\n<p>crc32 = <strong>0x2144DF1C</strong></p>\n\n<p>Anybody having an idea, why it is behaving like this?</p>\n"}, {"tags": ["c", "arrays", "memory", "location"], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1424286985, "post_id": 28591852, "comment_id": 45490455, "body": "Worth noting, even if the implementation is an array of pointers (i.e. a faux 2D array) the math <i>still</i> works. Only the numbers being crunched are altered, but the results are still correct."}], "tags": [], "owner": {"reputation": 224, "user_id": 4538133, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Livo5sx5qtU/AAAAAAAAAAI/AAAAAAAAAj0/qW5U23OSSVM/photo.jpg?sz=128", "display_name": "TheHorse", "link": "https://stackoverflow.com/users/4538133/thehorse"}, "is_accepted": false, "score": 2, "last_activity_date": 1424286830, "last_edit_date": 1424286830, "creation_date": 1424286473, "answer_id": 28591852, "question_id": 28591779, "link": "https://stackoverflow.com/questions/28591779/position-of-memory-in-a-two-dimensional-array/28591852#28591852", "title": "Position of memory in a two dimensional array?", "body": "<p>Position <code>a[i]</code> is <code>*(a+i)</code></p>\n\n<p>Position <code>a[i][j]</code> is <code>*(*(a + i) + j)</code></p>\n\n<p>Remember that a 2 dimensional array is an array of arrays. Therefore <code>*a+0</code> points to the first array, <code>*a+1</code> points to the second array, and so on.  </p>\n\n<p>To simplify...</p>\n\n<p><code>*(*a+1) = *(*(a + 0) + 1 ) =  *(a[0] + 1) = a[0][1]</code></p>\n"}, {"tags": [], "owner": {"reputation": 170, "user_id": 4508974, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-dicaNfkRxP4/AAAAAAAAAAI/AAAAAAAAA4E/VhPDaMMD4u4/photo.jpg?sz=128", "display_name": "Adi agarwal", "link": "https://stackoverflow.com/users/4508974/adi-agarwal"}, "is_accepted": false, "score": 1, "last_activity_date": 1424286628, "creation_date": 1424286628, "answer_id": 28591895, "question_id": 28591779, "link": "https://stackoverflow.com/questions/28591779/position-of-memory-in-a-two-dimensional-array/28591895#28591895", "title": "Position of memory in a two dimensional array?", "body": "<pre><code>a[i][j] is *(a[i] + j) or  *(*(a + i) + j)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1131, "user_id": 4510954, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33bbeea2b6290dc6b09afbcb82e7ceb6?s=128&d=identicon&r=PG&f=1", "display_name": "ElConrado", "link": "https://stackoverflow.com/users/4510954/elconrado"}, "is_accepted": false, "score": 0, "last_activity_date": 1424286875, "creation_date": 1424286875, "answer_id": 28591961, "question_id": 28591779, "link": "https://stackoverflow.com/questions/28591779/position-of-memory-in-a-two-dimensional-array/28591961#28591961", "title": "Position of memory in a two dimensional array?", "body": "<p>Your indexes : </p>\n\n<pre><code>*(a + ((i(size of the second array) + j))\n</code></pre>\n\n<p>are for 2D vector, if you allocate 2D array in continous memory you can index like in following example:</p>\n\n<pre><code>float *I = (float*)malloc(n*n*sizeof(float));\nfor(int i=0;i&lt;n;i++){\n    for(int j=0;j&lt;n;j++){\n        if(i==j) I[i*n+i]=1.0;\n            else I[i*n+j]=0.0;\n}\n}\n</code></pre>\n\n<p>It's identity matrix in continous memory block.</p>\n"}], "owner": {"reputation": 860, "user_id": 4578243, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/079afa3ba33c9a664f7ace5bb696e700?s=128&d=identicon&r=PG&f=1", "display_name": "db2791", "link": "https://stackoverflow.com/users/4578243/db2791"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1424286875, "creation_date": 1424286224, "question_id": 28591779, "link": "https://stackoverflow.com/questions/28591779/position-of-memory-in-a-two-dimensional-array", "title": "Position of memory in a two dimensional array?", "body": "<p>In C, a position a[i] in an array is equal to *(a+i). However, for a two dimensional array a[i][j], what would be the equivalent pointer? I arrived at \n<em>(a + ((i</em>(size of the second array) + j)), but this doesn't seem like a clear answer. </p>\n"}, {"tags": ["c", "arrays", "image"], "comments": [{"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1424286398, "post_id": 28591756, "comment_id": 45490087, "body": "The most important thing you would need to figure out is how to map values to colors, which is more of an art than a science. Once you&#39;ve decided that, it&#39;s just a matter of writing the data into a file in the <a href=\"http://en.wikipedia.org/wiki/BMP_file_format\" rel=\"nofollow noreferrer\">BMP file format</a>."}, {"owner": {"reputation": 962, "user_id": 1343278, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eQLei.jpg?s=128&g=1", "display_name": "Jamie Stuart Robin Parsons", "link": "https://stackoverflow.com/users/1343278/jamie-stuart-robin-parsons"}, "reply_to_user": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1424286747, "post_id": 28591756, "comment_id": 45490311, "body": "The arrays are large so 1 pixel per value is fine. For the colour mapping, if BMP uses RGB I could just use R[x]G[x]B[x] where x is a value representative of its position from 0-255 from the values min-max value. I have no experience with outputting into image files however"}, {"owner": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "edited": false, "score": 3, "creation_date": 1424287028, "post_id": 28591756, "comment_id": 45490477, "body": "The <a href=\"http://netpbm.sourceforge.net/doc/pgm.html\" rel=\"nofollow noreferrer\">PGM file format</a> is very simple if you only need a greyscale image. It has minimal header information and you can write raw pixel data as-is from a 2D array of <code>char</code> or <code>short</code>. Keep in mind with image files the convention is to use low values as black and high values for white."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1424287483, "post_id": 28591756, "comment_id": 45490753, "body": "I answered a previous question about placing a bullet position on a bitmap to file. It needs a thoughtful approach, and although the question doesn&#39;t answer everything, you may get something useful. The main things with bitmaps, are 1) making sure the endianness of the header fields is correct, 2) making sure the header struct you use is correctly packed/aligned, and 3) being aware that each raster row must have a byte length divisible by 4 (pad bytes are ignored). <a href=\"https://stackoverflow.com/questions/27362625/create-bitmap-in-c/27364496#27364496\" title=\"create bitmap in c\">stackoverflow.com/questions/27362625/create-bitmap-in-c/&hellip;</a>"}, {"owner": {"reputation": 962, "user_id": 1343278, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eQLei.jpg?s=128&g=1", "display_name": "Jamie Stuart Robin Parsons", "link": "https://stackoverflow.com/users/1343278/jamie-stuart-robin-parsons"}, "edited": false, "score": 1, "creation_date": 1424287689, "post_id": 28591756, "comment_id": 45490885, "body": "I really only need a simple implementation (greyscale) as the display is for a threshold matrix (so I will be looking for a specific shape with density areas). The PGM format seems promising, I will try it out with some sample data and report back, thanks"}, {"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 2, "creation_date": 1424290566, "post_id": 28591756, "comment_id": 45492650, "body": "Once you have a <code>PGM</code> (which is great advice), you can use ImageMagick to make a JPEG or PNG like this <code>convert input.pgm output.jpg</code> or <code>convert input.pgm -resize 600x600 output.png</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1424290967, "post_id": 28591756, "comment_id": 45492875, "body": "With bitmaps, a greyscale is more complicated as you have to set up the header with a palette lookup, unless you make each of the RGB components of a 24-bit map equal."}], "owner": {"reputation": 962, "user_id": 1343278, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eQLei.jpg?s=128&g=1", "display_name": "Jamie Stuart Robin Parsons", "link": "https://stackoverflow.com/users/1343278/jamie-stuart-robin-parsons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 355, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1424286107, "creation_date": 1424286107, "question_id": 28591756, "link": "https://stackoverflow.com/questions/28591756/basic-image-display-of-2d-array", "title": "Basic Image display of 2D array", "body": "<p>As part of a project I am doing in C, it would be helpful to produce a visual representation of the data I am working with.</p>\n\n<p>My question is: for some dynamically declared array:</p>\n\n<pre><code>double *foo;\nfoo = (double *)malloc(sizeof(double)*x*y);\n\nfor (i=0;i&lt;x;i++)\n    for (j=0;j&lt;y;j++)\n        foo[i*y+j] = someValue;\n</code></pre>\n\n<p>If the data has some max/min value (lets say max = 100.0 and min = 5.0), what is the simplest way to represent this data graphically?</p>\n\n<p>I would like some method of displaying each number as a gradient of some color, for example, the max would be black and the min would be white.</p>\n\n<p>An output of a Bitmap image for example would be a good as I need to do this for multiple arrays.</p>\n\n<p>thanks.</p>\n"}, {"tags": ["c", "multithreading", "mutex"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1424285905, "post_id": 28591604, "comment_id": 45489769, "body": "Can it be that you are using a simple <code>int</code> as mutex? That&#39;s not going to work, check out the <code>pthread_mutex...</code> functions. Also, what are <code>waitMainlock</code> and <code>closeMainlock</code>? Those are missing from your code, unless I&#39;m missing something."}, {"owner": {"reputation": 387, "user_id": 4321738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82ac8885bad10ec7133c6db1649ebf9a?s=128&d=identicon&r=PG&f=1", "display_name": "Strawhare", "link": "https://stackoverflow.com/users/4321738/strawhare"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1424289121, "post_id": 28591604, "comment_id": 45491764, "body": "oh wait, damn. I defined a couple of bits at the start, I&#39;ll add them in. the mutex function returns an int. It returns 0 when the function executes properly, ie, it took the lock."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1424289912, "post_id": 28591604, "comment_id": 45492281, "body": "Ouch. Those macros are highly misleading. If you used ALL_UPPERCASE, it would at least have been obvious that those are macros. That said, if you want to avoid typing those function calls, use subroutines that lock the mutex, check the returnvalue and exit on failure. That way, the main functions wouldn&#39;t be cluttered by the errorhandling."}], "answers": [{"tags": [], "owner": {"reputation": 1530, "user_id": 4562911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ebc7b3d9f657ab929c232596182c861?s=128&d=identicon&r=PG&f=1", "display_name": "halfflat", "link": "https://stackoverflow.com/users/4562911/halfflat"}, "is_accepted": false, "score": 0, "last_activity_date": 1424290585, "creation_date": 1424290585, "answer_id": 28593068, "question_id": 28591604, "link": "https://stackoverflow.com/questions/28591604/mutex-threading-code-doesnt-seem-to-exit-properly/28593068#28593068", "title": "Mutex Threading - Code doesn&#39;t seem to Exit Properly", "body": "<p>Something seems to be awry with your use of <code>openMainlock</code>, which expands to a <code>pthread_mutex_lock</code> call.</p>\n\n<p>One one hand, you shouldn't expect to ever get a non-zero return value from <code>openMainlock</code>: <code>pthread_mutex_lock</code> should either return zero (lock acquired) or block, unless the mutex is not initialised or is an error-checking mutex.</p>\n\n<p>Further, once the lock is acquired, if the producer is done, i.e. <code>dataleft</code> is zero, the thread calls <code>exit(0)</code>, which will terminate the whole process rather than terminating the thread. <code>pthread_exit</code> should be used instead, or just return from the function, but note that at this point you still own the main lock, which won't be released.</p>\n"}, {"tags": [], "owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "is_accepted": true, "score": 0, "last_activity_date": 1424292336, "last_edit_date": 1424292336, "creation_date": 1424291708, "answer_id": 28593399, "question_id": 28591604, "link": "https://stackoverflow.com/questions/28591604/mutex-threading-code-doesnt-seem-to-exit-properly/28593399#28593399", "title": "Mutex Threading - Code doesn&#39;t seem to Exit Properly", "body": "<p>Check out this piece of code:</p>\n\n<pre><code>    if (!rc)\n    {\n        printf(\"Consumer %x: Completed. Exiting...\\n\");\n        exit(0);\n    }\n</code></pre>\n\n<p>If the consumer has finished, the process(!) is terminated. You need to use pthread_exit() instead, or simply return from the thread function.</p>\n\n<p>Then, there is also</p>\n\n<pre><code>../nptl/pthread_mutex_lock.c:80:\n    __pthread_mutex_lock: Assertion `mutex-&gt;__data.__owner == 0' failed.\n</code></pre>\n\n<p>which I got a few times running the code. That could be caused by e.g. double unlock or some other invalid use. I'd start with cleaning up the weird macros, so that you have a free view on the logic of the program itself. </p>\n\n<p>Also, one important advise concerning mutexes: Always document precisely which data should be protected by the mutex. The point is that it's not always clear and getting this wrong means that you accidentally access data without synchronization. In order to make this very clear, use a structure like here:</p>\n\n<pre><code> struct {\n     pthread_mutex_t mutex;\n     pthread_cond_t cond;\n     int data;\n } synced_data = {\n     PTHREAD_MUTEX_INITIALIZER,\n     PTHREAD_COND_INITIALIZER,\n     0\n };\n</code></pre>\n\n<p>Actually, it's not just about the shared data that documentation is important. Consider for example <code>IsthereDataleft</code>: This is a mutex but it doesn't guard anything, right? Instead, it is used to signal to the started threads that there is nothing left to do, right? Documenting this not only helps others to understand your code but it makes sure that you understand yourself what the intention is. Sometimes, while trying to explain it, you will then find yourself that something doesn't make sense.</p>\n"}], "owner": {"reputation": 387, "user_id": 4321738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82ac8885bad10ec7133c6db1649ebf9a?s=128&d=identicon&r=PG&f=1", "display_name": "Strawhare", "link": "https://stackoverflow.com/users/4321738/strawhare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 0, "accepted_answer_id": 28593399, "answer_count": 2, "score": -2, "last_activity_date": 1554137972, "creation_date": 1424285616, "last_edit_date": 1554137972, "question_id": 28591604, "link": "https://stackoverflow.com/questions/28591604/mutex-threading-code-doesnt-seem-to-exit-properly", "title": "Mutex Threading - Code doesn&#39;t seem to Exit Properly", "body": "<p>So I have code here which makes two kinds of threads. One kind \"produces\" data and the other one \"consumes\" it. There can only be a certain amount of data that can exist at any one time, so the Producers will pause producing once there is a certain amount of data created (ie, when sharedData = BUFFER), and the consumers will pause when sharedData = 0. There is also only so much data that can be made (amount stored in dataleft), and once all the data has been made and consumed, the program should end.</p>\n\n<p>For some reason, the printf() lines I have at the end of the code don't seem to ever trigger. I can't tell if the threads are closed properly or not because of this. It feels like I've done something really stupid, but I can't see the issue.</p>\n\n<p>A couple of definitions at the start:</p>\n\n<pre><code>#define                 NUMCONSUMERS    4\n#define                 NUMPRODUCERS    4\n#define                 PACKETS         10\n#define                 tryMainlock     pthread_mutex_trylock(&amp;dataMutex)\n#define                 openMainlock    pthread_mutex_lock(&amp;dataMutex)\n#define                 closeMainlock   pthread_mutex_unlock(&amp;dataMutex)\n#define                 waitMainlock    pthread_cond_wait(&amp;dataPresentCondition, &amp;dataMutex);\n#define                 signalMainlock  pthread_cond_signal(&amp;dataPresentCondition);\n\n#define                 trydatalock     pthread_mutex_trylock(&amp;IsthereDataleft)\n#define                 opendatalock    pthread_mutex_lock(&amp;IsthereDataleft)\n#define                 closedatalock   pthread_mutex_unlock(&amp;IsthereDataleft)\n\npthread_mutex_t         dataMutex = PTHREAD_MUTEX_INITIALIZER;\npthread_cond_t          dataPresentCondition = PTHREAD_COND_INITIALIZER;\n\npthread_mutex_t         IsthereDataleft = PTHREAD_MUTEX_INITIALIZER;\n\nint                     sharedData=0;   //amount of data present\nint                     BUFFER = 5;\nint                     dataleft=PACKETS;\n</code></pre>\n\n<p>The Main Function:</p>\n\n<pre><code>int main(int argc, char **argv)\n{\nint rc;                                 \nint i;\npthread_t  consumer[NUMCONSUMERS];\npthread_t  producer[NUMPRODUCERS];\n\nrc = opendatalock;                      //lock to determine whether there's any point waiting for data\n\nfor (i=0; i &lt;NUMPRODUCERS; i++) {       //Build up the producers\n    rc = pthread_create(&amp;producer[i], NULL, Producer, (void *)i);\n    if (rc)\n        printf(\"Error building Producer Thread: %x\\n\", i);\n}\n\nfor (i=0; i &lt;NUMCONSUMERS; i++) {       //Build up the consumers\n    rc = pthread_create(&amp;consumer[i], NULL, Consumer, (void *)i);\n    if (rc)\n        printf(\"Error building Consumer Thread: %x\\n\", i);\n}\n\nprintf(\"All Producers and Consumers created\\n\");\n\nfor (i=0; i &lt;NUMPRODUCERS; i++) {       //Join up the producers\n    rc = pthread_join(producer[i], NULL);\n    if (rc)\n        printf(\"Error: Producer %x: Failed to join\\n\", i);\n}\n\nrc = closedatalock;                     //producers finished, no data left to make\n\nprintf(\"datalock closed, consumers finishing...\\n\");\nfor (i=0; i &lt;NUMCONSUMERS; i++) {       //Join up the consumers\n    rc = pthread_join(consumer[i], NULL);\n    if (rc)\n        printf(\"Error: Consumer %x: Failed to join\\n\", i);\n}\nrc = pthread_mutex_destroy(&amp;dataMutex);\nrc = pthread_cond_destroy(&amp;dataPresentCondition);\nrc = pthread_mutex_destroy(&amp;IsthereDataleft);\n\nprintf(\"All Threads finished. Exiting....\\n\");\nreturn 0;\n}\n</code></pre>\n\n<p>The Consumer Thread:</p>\n\n<pre><code>void *Consumer(void *threadid){\nint rc;\nprintf(\"Consumer Thread %x: Created\\n\", (int)threadid);\nwhile (1)\n{\n    printf(\"Consumer %x: Entering Loop\\n\", (int)threadid);\n    rc = openMainlock;      //take hold of main lock\n    if (rc)\n    {\n        printf(\"Consumer %x: Waiting...\\n\", (int)threadid);\n        rc = waitMainlock;  //if main lock is taken, wait\n        if (rc)             //if wait fails, exit the thread.\n        {\n            printf(\"Consumer Thread %x: wait for Main Lock failed\\n\", threadid);\n            exit(0);\n        }\n    }\n\n    while (sharedData == 0) //if the buffer is empty\n    {\n        rc = trydatalock;\n        if (!rc)\n        {\n            printf(\"Consumer %x: Completed. Exiting...\\n\");\n            exit(0);\n        }\n        rc = closeMainlock;\n        if (rc)\n        {\n            printf(\"code.\\n\");\n        }\n        rc = waitMainlock;\n        if (rc)\n        {\n            printf(\"code.\\n\");\n        }\n    }\n    sharedData--;\n    rc = closeMainlock;\n    rc = signalMainlock;\n    if (rc)\n        {\n            printf(\"code.\\n\");\n        }\n    printf(\"Consumer %x: Releasing Lock\\n\", (int)threadid);         \n}\n}\n</code></pre>\n\n<p>And the Producer Thread:</p>\n\n<pre><code>void *Producer(void *threadid){\nint rc;\nprintf(\"Producer Thread %x: Created\\n\", (int)threadid);\nwhile (1)\n{\n    printf(\"Producer %x: Entering Loop\\n\", (int)threadid);\n    rc = openMainlock;          //take hold of the lock\n    if (rc)                     //if lock is currently being used by a consumer or a producer\n    {   \n        printf(\"Producer %x: Waiting...\\n\", (int)threadid);\n        rc = waitMainlock;      //wait here until lock is released\n        if (rc)\n        {\n            printf(\"Producer Thread %x: wait for Main Lock failed\\n\", threadid);\n            exit(0);\n        }\n    }\n    if (!dataleft)              //If there's no data left to add to the stream, close the thread\n    {\n        printf(\"Producer Thread %x: Completed, exiting...\\n\", (int)threadid);\n        exit(0);\n    }\n    while (sharedData &gt;=BUFFER)\n    {\n        rc = closeMainlock;\n        if (rc)\n        {\n            printf(\"code.\\n\");\n        }\n        rc = waitMainlock;\n        if (rc)\n        {\n            printf(\"code.\\n\");\n        }\n    }\n    printf(\"Producer %x: Lock Acquired\\n\", (int)threadid);\n    sharedData++;\n    dataleft--;\n    rc = closeMainlock;\n    rc = signalMainlock;\n    if (rc)\n        {\n            printf(\"code.\\n\");\n        }\n    printf(\"Producer %x: Releasing Lock\\n\", (int)threadid);\n}\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "unix", "virtualization", "qemu"], "comments": [{"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 1, "creation_date": 1424293678, "post_id": 28591587, "comment_id": 45494435, "body": "It sounds like the QEMU server process has not completely read the contents of the last send(). What happens if you switch to using TCP instead of domain sockets? Is there any difference in behavior?"}, {"owner": {"reputation": 73, "user_id": 4580811, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NiQwckYOTXY/AAAAAAAAAAI/AAAAAAAAAAA/FvsoA1uT_Io/photo.jpg?sz=128", "display_name": "mgamal", "link": "https://stackoverflow.com/users/4580811/mgamal"}, "reply_to_user": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1424348519, "post_id": 28591587, "comment_id": 45516751, "body": "The behavior I just described isn&#39;t 100% reproducible, and unfortunately using TCP is not an option for me."}, {"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1424356059, "post_id": 28591587, "comment_id": 45521509, "body": "Can we see the output of <code>netstat -ap</code> ?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1424459993, "post_id": 28591587, "comment_id": 45572837, "body": "I would hazard a guess that it&#39;s pending stuff in the socket buffer, so a read from the socket might close it."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1424538176, "post_id": 28591587, "comment_id": 45594568, "body": "I use this all the time, so it can be made to work. Do you do a <code>shutdown</code> before <code>close()</code>? Are you reading back the full amount of data from the command you issued? I might see if I&#39;ve got some releaseable test code around."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1424538252, "post_id": 28591587, "comment_id": 45594599, "body": "Actually better still, can you post whatever logic you are using in your QMP client as a little stand-alone C, and see if replicates the problem?"}, {"owner": {"reputation": 73, "user_id": 4580811, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NiQwckYOTXY/AAAAAAAAAAI/AAAAAAAAAAA/FvsoA1uT_Io/photo.jpg?sz=128", "display_name": "mgamal", "link": "https://stackoverflow.com/users/4580811/mgamal"}, "reply_to_user": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1424541032, "post_id": 28591587, "comment_id": 45595675, "body": "@abligh I don&#39;t call shutdown() before close(). The data is usually fully read from the commands until some close() operation doesn&#39;t end up closing the socket, or at least that&#39;s what I know."}, {"owner": {"reputation": 73, "user_id": 4580811, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NiQwckYOTXY/AAAAAAAAAAI/AAAAAAAAAAA/FvsoA1uT_Io/photo.jpg?sz=128", "display_name": "mgamal", "link": "https://stackoverflow.com/users/4580811/mgamal"}, "reply_to_user": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1424541166, "post_id": 28591587, "comment_id": 45595723, "body": "@abligh I actually wrote some test code to mock the client&#39;s behavior and couldn&#39;t reproduce the problem except when I deliberately skipped a call to close() in order to leave a lingering connection. However all the close() calls were successful.  I checked the client code as well, but I couldn&#39;t find any paths that would skip closing the socket, which is why I concluded that some calls to close() don&#39;t end up in actually closing the socket immediately."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1424542525, "post_id": 28591587, "comment_id": 45596254, "body": "I&#39;ve checked the code I use here (sadly the test code I use just calls the library I can&#39;t publish) and I don&#39;t use <code>shutdown</code> either. In terms of packet discipline, I don&#39;t just <code>write</code>, <code>read</code> and hope to get complete JSON packets through; I do full buffering, and cope with both partial reads and writes. I wonder whether that&#39;s your issue."}, {"owner": {"reputation": 73, "user_id": 4580811, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NiQwckYOTXY/AAAAAAAAAAI/AAAAAAAAAAA/FvsoA1uT_Io/photo.jpg?sz=128", "display_name": "mgamal", "link": "https://stackoverflow.com/users/4580811/mgamal"}, "reply_to_user": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1424698742, "post_id": 28591587, "comment_id": 45643304, "body": "@abligh I use send() and recv() as opposed to read() and write(), would that be any different?"}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1424707920, "post_id": 28591587, "comment_id": 45649263, "body": "@MohammedGamal I can&#39;t see why it should be different, but it wouldn&#39;t hurt to swap over."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1424900904, "post_id": 28591587, "comment_id": 45746803, "body": "<code>shutdown()</code> before <code>close()</code> won&#39;t change anything. Clearly you are missing a close somewhere."}, {"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 2, "creation_date": 1424905140, "post_id": 28591587, "comment_id": 45748787, "body": "Check that you&#39;re not leaking the fd into another process via <code>fork()&#47;exec()</code> or its ilk. use <code>fcntl(fd, F_SETFD, FD_CLOEXEC)</code> to ensure that&#39;s not the source of the problem."}, {"owner": {"reputation": 243, "user_id": 4011767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba41c86519ceb89402d502b53d4ae9c2?s=128&d=identicon&r=PG&f=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/4011767/jan"}, "edited": false, "score": 0, "creation_date": 1425029734, "post_id": 28591587, "comment_id": 45803045, "body": "... and see if you have closed all <code>dup()</code>ed instances of the fd"}], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1424900877, "post_id": 28729903, "comment_id": 45746791, "body": "It doesn&#39;t &#39;assure callers that both ends have acknowledged a normal shutdown&#39;. It only assure the caller that all pending data has been sent."}, {"owner": {"reputation": 73, "user_id": 4580811, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NiQwckYOTXY/AAAAAAAAAAI/AAAAAAAAAAA/FvsoA1uT_Io/photo.jpg?sz=128", "display_name": "mgamal", "link": "https://stackoverflow.com/users/4580811/mgamal"}, "edited": false, "score": 2, "creation_date": 1424954443, "post_id": 28729903, "comment_id": 45768319, "body": "The socket in question is a file-based UNIX domain socket, so I am not really sure if using SO_LINGER should help here."}], "tags": [], "owner": {"reputation": 1, "user_id": 4607575, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aVQXdjgzq-Q/AAAAAAAAAAI/AAAAAAAAFYM/NvTIq9wSOPA/photo.jpg?sz=128", "display_name": "Felipe Saraiva", "link": "https://stackoverflow.com/users/4607575/felipe-saraiva"}, "is_accepted": false, "score": -1, "last_activity_date": 1424899497, "creation_date": 1424899497, "answer_id": 28729903, "question_id": 28591587, "link": "https://stackoverflow.com/questions/28591587/unix-domain-socket-not-closed-after-close/28729903#28729903", "title": "UNIX domain socket not closed after close()", "body": "<p>You could just try SO_LINGER  via setsockopt(2) option with a timeout of 0. This way, when you close the socket is forcibly closed, sending a RST instead of going into the FIN/ACK closing behavior. </p>\n\n<p>The purpose of the SO_LINGER option is to control how the socket is shut down when the function close(2) is called. This option applies only to connection-oriented protocols such as TCP.</p>\n\n<p>The default behavior of the kernel is to allow the close(2) function to return immediately to the caller. Any unsent TCP/IP data will be transmitted and delivered if possible, but no guarantee is made. Because the close(2) call returns control immediately to the caller, the application has no way of knowing whether the last bit of data was actually delivered.</p>\n\n<p>The SO_LINGER option can be enabled on the socket, to cause the application to block in the close(2) call until all final data is delivered to the remote end. Furthermore, this assures the caller that both ends have acknowledged a normal socket shutdown. Failing this, the indicated option timeout occurs and an error is returned to the calling application.</p>\n\n<p>One final scenario can be applied, by use of different SO_LINGER option values. If the calling application wants to abort communications immediately, appropriate values can be set in the linger structure. Then, a call to close(2) will initiate an abort of the communication link, discarding all pending data and immediately close the socket.</p>\n"}, {"tags": [], "owner": {"reputation": 858, "user_id": 521729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93673411f1eb0f8371757923cb1c2e8?s=128&d=identicon&r=PG", "display_name": "Arkain", "link": "https://stackoverflow.com/users/521729/arkain"}, "is_accepted": false, "score": 0, "last_activity_date": 1425056148, "creation_date": 1425056148, "answer_id": 28770267, "question_id": 28591587, "link": "https://stackoverflow.com/questions/28591587/unix-domain-socket-not-closed-after-close/28770267#28770267", "title": "UNIX domain socket not closed after close()", "body": "<p>Have you tried closing the socket from the other end? It's asynchronous, but it gives both sides a chance to ensure socket closure.</p>\n\n<p>You can send a close command through to the listener on the other end and have it recycle the socket. When the socket gets closed, you should end up getting a SIGPIPE. Catch the SIGPIPE and close your end of the socket. If you end up with an EPIPE doing that, then ignore it. That just means you were already notified of the socket closure.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 4580811, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NiQwckYOTXY/AAAAAAAAAAI/AAAAAAAAAAA/FvsoA1uT_Io/photo.jpg?sz=128", "display_name": "mgamal", "link": "https://stackoverflow.com/users/4580811/mgamal"}, "edited": false, "score": 0, "creation_date": 1425551501, "post_id": 28770306, "comment_id": 46013335, "body": "I used to get -EAGAIN whenever I tried connecting to a new socket if another connection is lingering. After I used shutdown(), I could actually connect() to the socket without getting -EAGAIN even if another socket is not close()d"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1425056264, "creation_date": 1425056264, "answer_id": 28770306, "question_id": 28591587, "link": "https://stackoverflow.com/questions/28591587/unix-domain-socket-not-closed-after-close/28770306#28770306", "title": "UNIX domain socket not closed after close()", "body": "<p>It could be that the file descriptor has been <code>dup</code>ed, <code>fork</code>ed, or leaked. </p>\n\n<p>Call <a href=\"http://man7.org/linux/man-pages/man2/shutdown.2.html\" rel=\"nofollow\"><code>shutdown(sock, SHUT_RDWR)</code></a> on it to close the connection for sure before <code>close</code>ing.</p>\n"}], "owner": {"reputation": 73, "user_id": 4580811, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NiQwckYOTXY/AAAAAAAAAAI/AAAAAAAAAAA/FvsoA1uT_Io/photo.jpg?sz=128", "display_name": "mgamal", "link": "https://stackoverflow.com/users/4580811/mgamal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4915, "favorite_count": 1, "answer_count": 3, "score": 6, "last_activity_date": 1425056264, "creation_date": 1424285569, "question_id": 28591587, "link": "https://stackoverflow.com/questions/28591587/unix-domain-socket-not-closed-after-close", "title": "UNIX domain socket not closed after close()", "body": "<p>I have a client application communicating with a QEMU process through a QMP Unix domain socket. Sometimes after the client calls close() on the socket connection, 'netstat -ap unix' still shows it in CONNECTED state. I do check the return value of the close() call and it returns successfully with a value of 0, but the connection still seems to be lingering. </p>\n\n<p>Since QMP doesn't really support multiple connections on its socket, all the subsequent calls to connect to the socket fail since they wait indefinitely for the lingering connection to be closed.</p>\n\n<p>Is there a way to make sure from the code that the socket is really closed, and is there a way to force the socket to close?</p>\n"}, {"tags": ["c", "gcc", "c99", "variable-length-array"], "comments": [{"owner": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "edited": false, "score": 0, "creation_date": 1424285185, "post_id": 28591113, "comment_id": 45489296, "body": "If you haven&#39;t already, try adding -std=c99 -pedantic-errors to your gcc compile line and see if that makes any difference."}, {"owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "reply_to_user": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "edited": false, "score": 0, "creation_date": 1424285308, "post_id": 28591113, "comment_id": 45489378, "body": "@jschultz410: good idea, but no-it makes no difference at all =("}, {"owner": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "edited": false, "score": 0, "creation_date": 1424285585, "post_id": 28591113, "comment_id": 45489553, "body": "There are many instances where it would be impossible for the compiler to statically deduce the value of c (e.g. - c is input from stdin).  Therefore, it would often be impossible to do any kind of meaningful static type checking on such a function definition&#39;s parameters.  It seems if you do this, then the compiler is saying &quot;OK, I&#39;ll allow you to pass whatever you want as d, so long as its type is a doubly indexed array of ints.  Good luck!&quot;"}, {"owner": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "edited": false, "score": 0, "creation_date": 1424285809, "post_id": 28591113, "comment_id": 45489714, "body": "In such a function, what happens for different invocations with different values of c that advance d???  Does it do the right thing by dynamically figuring out how far it should advance in memory based on c?"}, {"owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "reply_to_user": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "edited": false, "score": 0, "creation_date": 1424286031, "post_id": 28591113, "comment_id": 45489854, "body": "@jschultz410: I&#39;m not sure I understand what you mean... Can you give an example?"}], "answers": [{"comments": [{"owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "edited": false, "score": 0, "creation_date": 1424286368, "post_id": 28591768, "comment_id": 45490075, "body": "Yes, as <code>sizeof(*d)</code> is calculated using <code>c</code>, as it is shown in my question =)"}, {"owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "edited": false, "score": 0, "creation_date": 1424287617, "post_id": 28591768, "comment_id": 45490835, "body": "&quot;However, it is typically impossible for the compiler to determine if/when you call foo() incorrectly&quot;. That is exactly the problem. Why am I even allowed to call <code>foo</code> if this completely kills static type-checking? Also, dynamic type-checking could be used. A VLA implementation would have to keep its size as some form of metadata anyway for dynamic <code>sizeof</code> calls, so why not, say, segfault or go UB if this size doesn&#39;t match the size of the type of the parameter it was passed as?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "edited": false, "score": 2, "creation_date": 1424288178, "post_id": 28591768, "comment_id": 45491154, "body": "@Mints97: C does not require dynamic type checking. If the size doesn&#39;t match, the behavior is undefined; it <i>does</i>, as you say, &quot;go UB&quot;. Undefined behavior doesn&#39;t mean your program will crash. It means the behavior is undefined. That often includes the program appearing to &quot;work&quot;."}], "tags": [], "owner": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "is_accepted": false, "score": -1, "last_activity_date": 1424287828, "last_edit_date": 1424287828, "creation_date": 1424286170, "answer_id": 28591768, "question_id": 28591113, "link": "https://stackoverflow.com/questions/28591113/variably-modified-types-compatibility-and-its-security-implications/28591768#28591768", "title": "Variably-modified types compatibility and its security implications", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nvoid foo(int c, char d[][c])\n{\n  fprintf(stdout, \"c = %d; d = %p; d + 1 = %p\\n\", c, d, d + 1);\n}\n\nint main()\n{\n  char x[2][4];\n  char y[3][16];\n  char (*z)[4] = y;  /* Warning: incompatible types */\n\n  foo(4, x);\n  foo(16, y);\n  foo(16, x);        /* We are lying about x. What can / should the compiler / code do? */\n  foo(4, y);         /* We are lying about y. What can / should the compiler / code do? */\n\n  return 0;\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>c = 4; d = 0x7fff5b295b70; d + 1 = 0x7fff5b295b74\nc = 16; d = 0x7fff5b295b40; d + 1 = 0x7fff5b295b50\nc = 16; d = 0x7fff5b295b70; d + 1 = 0x7fff5b295b80\nc = 4; d = 0x7fff5b295b40; d + 1 = 0x7fff5b295b44\n</code></pre>\n\n<p>So, foo() does dynamically figure out how far to advance d based on c, as your code also demonstrates.</p>\n\n<p>However, it is often impossible for the compiler to statically determine if/when you call foo() incorrectly.  It seems that if you do this, then the compiler is saying \"OK, I'll allow you to pass whatever you want as d, so long as its type is a doubly indexed array of chars.  Operations on the pointer d will be determined by c.  Good luck!\"</p>\n\n<p>That is, yes, the compiler often can't do static type checking on these kinds of parameters and so the standard almost certainly does not mandate compilers to catch all cases where it is possible to statically determine a type incompatibility.</p>\n"}, {"comments": [{"owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "edited": false, "score": 0, "creation_date": 1424288371, "post_id": 28592255, "comment_id": 45491291, "body": "Thanks, that&#39;s a great answer! I think you&#39;re right, my reading of this rule was probably incorrect. I was probably too used to type incompatibility being UB cause Number One... That leaves the C standard in the clear, but not gcc =) anyway, ranting about it not giving warnings will probably not do much good..."}, {"owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "edited": false, "score": 0, "creation_date": 1424288891, "post_id": 28592255, "comment_id": 45491616, "body": "And if it was up to me, I&#39;d explicitly declare VM types incompatible to everything just to be sure =) Makes sense, IMO."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "edited": false, "score": 1, "creation_date": 1424290616, "post_id": 28592255, "comment_id": 45492678, "body": "But @Mints, VM types have to be compatible at least with themselves, else they would be unusable.  You can still have undefined behavior with VM types having exactly the same declarator, however, when at runtime the variable dimensions differ.  Given that issue, what&#39;s to be gained by making VM types automatically incompatible with everything else?  This is another example of C giving the programmer powerful tools, with which he can wreak powerful damage.  C is not for weenies.  (Not implying anything there.)"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 4, "last_activity_date": 1424287830, "creation_date": 1424287830, "answer_id": 28592255, "question_id": 28591113, "link": "https://stackoverflow.com/questions/28591113/variably-modified-types-compatibility-and-its-security-implications/28592255#28592255", "title": "Variably-modified types compatibility and its security implications", "body": "<p>C99, section 6.7.5.2 seems to be where the relevant rules are given.  In particular,</p>\n\n<p>Line 6:</p>\n\n<blockquote>\n  <p>For two array types to be compatible, both shall have compatible element types, and if both size specifiers are present, and are integer constant expressions, then both size specifiers shall have the same constant value. If the two array types are used in a context which requires them to be compatible, it is undefined behavior if the two size specifiers evaluate to unequal values.</p>\n</blockquote>\n\n<p>A previous, now-deleted answer also referenced line 6.  Commentary on that answer argued that the second sentence was subject to the condition at the end of the first, but that seems an unlikely reading.  Example 3 of that section may clarify (excerpt):</p>\n\n<pre><code>int c[n][n][6][m];\nint (*r)[n][n][n+1];\nr=c;   // compatible, but defined behavior only if\n       // n == 6 and m == n+1\n</code></pre>\n\n<p>That seems comparable to the example in the question: two array types, one having a constant dimension and the other having a corresponding variable dimension, and required to be compatible.  Behavior is undefined (per comment in example 3 and one reasonable reading of 6.7.5.2/6) when at runtime the variable dimension differs from the compile-time constant dimension.  And isn't undefined behavior what you would expect anyway?  Else why raise the question?</p>\n\n<p>Supposing we can agree that behavior is undefined when such a mismatch occurs, I observe that compilers are in general not required to recognize undefined or possibly-undefined behavior, nor to issue any kind of diagnostic whatsoever if they do recognize such.  I'd hope in this case that the compiler would be capable of warning about the possibly-undefined behavior, but it must successfully compile the code because it is syntactically correct and satisfies all applicable constraints.  Note that a compiler capable of warning about such uses might not do so <em>by default</em>.</p>\n"}], "owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 2, "accepted_answer_id": 28592255, "answer_count": 2, "score": 10, "last_activity_date": 1424288060, "creation_date": 1424284028, "last_edit_date": 1495541700, "question_id": 28591113, "link": "https://stackoverflow.com/questions/28591113/variably-modified-types-compatibility-and-its-security-implications", "title": "Variably-modified types compatibility and its security implications", "body": "<p>I'm going through a surge of interest in C99's variably-modified type system. This question was inspired by <a href=\"https://stackoverflow.com/questions/28589518/what-method-signature-would-i-make-for-this-function\">this one</a>.</p>\n\n<p>Checking the code from this question, I discovered something interesting. Consider this code:</p>\n\n<pre><code>int myFunc(int, int, int, int[][100]);\n\nint myFunc(int a, int b, int c, int d[][200]) {\n    /* Some code here... */\n}\n</code></pre>\n\n<p>This obviously won't (and does not) compile. However, this code:</p>\n\n<pre><code>int myFunc(int, int, int, int[][100]);\n\nint myFunc(int a, int b, int c, int d[][c]) {\n    /* Some code here... */\n}\n</code></pre>\n\n<p>compiles without even a warning (on gcc).</p>\n\n<p>That seems to imply that a variably-modified array type is compatible with any non-variably-modified array type!</p>\n\n<p>But that's not all. You'd expect a variably-modified type to at least bother with which variable is used to set its size. But it doesn't seem to do so!</p>\n\n<pre><code>int myFunc(int, int b, int, int[][b]);\n\nint myFunc(int a, int b, int c, int d[][c]) {\n    return 0;\n}\n</code></pre>\n\n<p>Also compiles without any error.</p>\n\n<p>So, my question is: is this correct standardized behaviour?</p>\n\n<p>Also, if a variably-modified array type would really be compatible with any array that has the same dimensions, wouldn't this mean nasty security problems? For example, consider the following code:</p>\n\n<pre><code>int myFunc(int a, int b, int c, int d[][c]) {\n    printf(\"%d\\n\", sizeof(*d) / sizeof((*d)[0]));\n    return 0;\n}\n\nint main(){\n    int arr[10] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};\n    myFunc(0, 0, 100, &amp;arr);\n\n    return 0;\n}\n</code></pre>\n\n<p>Compiles and outputs 100, no errors or warnings, nothing. As I see it, that means easy out-of-bounds array write even if you are strictly checking the size of your array via <code>sizeof</code>, <em>not doing a single cast</em> and even have all warnings turned on! Or am I missing something?</p>\n"}, {"tags": ["c++", "c", "unit-testing", "testing", "doxygen"], "comments": [{"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 2, "creation_date": 1424285511, "post_id": 28590887, "comment_id": 45489512, "body": "I got the snippet to work. After the brief command either put a . (when JAVADOC_BRIEF is enabled) or an empty line (i.e. line with just a *) to end the brief, now [Zero test] is seen as continuation of @brief (as shown in my case with the error message: warning: block marked with [Zero Test.] for \\snippet should appear twice in file test\\test_suite_1.c. Set also the EXAMPLE path to the path leading to the test directory (not including the test)Small remark don&#39;t use \\ (backslash) in the path makes it less portable and also might lead strange effects when seen as escape character."}, {"owner": {"reputation": 12137, "user_id": 451007, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3d3a48b34dda00ca0a5745a5c285068c?s=128&d=identicon&r=PG", "display_name": "010110110101", "link": "https://stackoverflow.com/users/451007/010110110101"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1424286980, "post_id": 28590887, "comment_id": 45490451, "body": "Perfect!  If you&#39;ll write this as a complete answer, I&#39;ll give you credit."}], "answers": [{"tags": [], "owner": {"reputation": 1698, "user_id": 2214806, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/RgdBJ.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/2214806/michael"}, "is_accepted": false, "score": 0, "last_activity_date": 1429310620, "last_edit_date": 1495541169, "creation_date": 1429310620, "answer_id": 29710624, "question_id": 28590887, "link": "https://stackoverflow.com/questions/28590887/how-to-embed-the-body-of-a-live-unit-test-function-as-example-usage-with-doxygen/29710624#29710624", "title": "How to embed the body of a live unit test function as example usage with Doxygen?", "body": "<p>Notice that the error says it's looking for <code>[Zero Test.]</code>, and not <code>[Zero Test]</code>.  This is because your snippet is actually part of the brief, and it looks like a brief is automatically terminated with a <code>.</code> regardless if you put one.  </p>\n\n<p>The snippet is actually looking for the markers <code>[Zero Test.]</code>; if you put the <code>.</code> in the marker, it'll actually work.  But your solution is better, just terminate the brief! :)</p>\n\n<p>To be completely honest, it was your comment that led me to solve the issue (which I was having too); <a href=\"https://stackoverflow.com/users/451007/010110110101\">010110110101</a> is right, you should get credit for this.</p>\n"}], "owner": {"reputation": 12137, "user_id": 451007, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3d3a48b34dda00ca0a5745a5c285068c?s=128&d=identicon&r=PG", "display_name": "010110110101", "link": "https://stackoverflow.com/users/451007/010110110101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 408, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1429310620, "creation_date": 1424283295, "last_edit_date": 1495541169, "question_id": 28590887, "link": "https://stackoverflow.com/questions/28590887/how-to-embed-the-body-of-a-live-unit-test-function-as-example-usage-with-doxygen", "title": "How to embed the body of a live unit test function as example usage with Doxygen?", "body": "<p><strong>I want to embed the body of a live unit test function as the example.</strong>  </p>\n\n<p><a href=\"https://stackoverflow.com/questions/25511878/in-doxygen-how-can-include-a-snippet-by-function-name-from-example-code-instead\">This is a similar question</a></p>\n\n<p>In doxygen, we can show example usage:</p>\n\n<ul>\n<li>with an entire .c file using the @example instruction.</li>\n<li>with a snipper using the @code instruction</li>\n<li>somehow with the @snippet directive + EXAMPLE_PATH (can't get it to work)</li>\n</ul>\n\n<p><code>@example</code> won't work because I don't have just one unit test per c file.  My test files have a bunch of unit tests in them organized as functions.</p>\n\n<p><code>@code</code> means I have to write some code that isn't going to get compiled or actually executed.  (In Python, there are doctests -- which is the reverse of what I'm looking for because doctests can be actually executed as a unit test.  Something like that would be fine here.)</p>\n\n<p><code>@snippet</code> might work. It looks like we would decorate the unit test and that makes it into a snippet.  I can't get this to work. (see below)</p>\n\n<p>Here's an example:</p>\n\n<pre><code>/**\n * @brief Sets the values to zero\n *\n */\nvoid set_to_zero(my_type_t *t)\n{\n    t-&gt;x = 0;\n    t-&gt;y = 0;\n}\n</code></pre>\n\n<p>... in another test_suite_1.c file, where I have lots of unit tests.  Here's one ...</p>\n\n<pre><code>int test_set_to_zero()\n{\n    my_type_t t;\n    set_to_zero(t);\n    MYASSERT(t.x == 0);\n    MYASSERT(t.y == 0);\n}\n</code></pre>\n\n<p>I would like just this unit test, from my test_suite_1.c file (not <em>all</em> unit tests in the whole file) to appear in the documentation as example usage of this particular function.</p>\n\n<p>The reason I want to do this is so that I can keep practicing DRY.  The unit test is essentially a pretty good example of basic usage.  </p>\n\n<p><strong>Is there some directive like:  <code>@embed_function_body_here&lt;test_set_to_zero&gt;</code></strong></p>\n\n<p>Going back to <code>@snippet</code>.  As I said, it didn't work.  Here's what I tried to do with the <code>@snippet</code> directive:</p>\n\n<p>My unit tests are in a \\test folder.  There are separate .c files containing unit tests (e.g. test_suite_1.c, test_suite_2.c, etc</p>\n\n<p>... in test_suite_1.c ...</p>\n\n<pre><code>//! [Zero Test]\nint test_set_to_zero()\n{\n    my_type_t t;\n    set_to_zero(t);\n    MYASSERT(t.x == 0);\n    MYASSERT(t.y == 0);\n}\n//! [Zero Test]\n</code></pre>\n\n<p>... in regular_code.c ...</p>\n\n<pre><code>/**\n * @brief Sets the values to zero\n * @snippet test\\test_suite_1.c Zero Test\n *\n */\nvoid set_to_zero(my_type_t *t)\n{\n    t-&gt;x = 0;\n    t-&gt;y = 0;\n}\n</code></pre>\n\n<p>... in doxyfile ...</p>\n\n<pre><code>...\nEXAMPLE_PATH = test\nEXAMPLE_RECURSIVE = YES\n...\n</code></pre>\n\n<p>This whole <code>@snippet</code> endeavor doesn't work.  Nothing shows in the resulting html where the snippet should be.</p>\n"}, {"tags": ["c++", "c", "gcc", "assembly"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1424286723, "post_id": 28590730, "comment_id": 45490294, "body": "Stay away from tricks. Stick to plain and simple. Things can get tricky enough anyway."}], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 1082170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8f364ad4c94b4b5eb5747b0d123f31e?s=128&d=identicon&r=PG", "display_name": "user1082170", "link": "https://stackoverflow.com/users/1082170/user1082170"}, "edited": false, "score": 0, "creation_date": 1424311094, "post_id": 28595292, "comment_id": 45501276, "body": "Thanks for your comment. Regarding %c, would be it correct to understand that &quot;%c6(%5)&quot; == sum of the values of %5 and %6 and use this as an constant address in the memory from where we can only read but cannot write?"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "reply_to_user": {"reputation": 323, "user_id": 1082170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8f364ad4c94b4b5eb5747b0d123f31e?s=128&d=identicon&r=PG", "display_name": "user1082170", "link": "https://stackoverflow.com/users/1082170/user1082170"}, "edited": false, "score": 1, "creation_date": 1424344359, "post_id": 28595292, "comment_id": 45514336, "body": "No, the address is constant not the value. It&#39;s a <code>foo* const</code> not a <code>const foo*</code>."}], "tags": [], "owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "is_accepted": true, "score": 1, "last_activity_date": 1424298811, "creation_date": 1424298811, "answer_id": 28595292, "question_id": 28590730, "link": "https://stackoverflow.com/questions/28590730/inline-assembly-operand-constraints/28595292#28595292", "title": "inline assembly operand constraints", "body": "<p><code>%c</code> forces output as a constant address, here it is used to get rid of the <code>$</code> normally emitted in at&amp;t syntax mode for immediates (that the <code>i</code> constraint implies).</p>\n\n<p>The <code>%b</code>, <code>%w</code>, <code>%l</code> and <code>%q</code> are size override modifiers, they force the appropriate sized register (that is byte, word, long or quad) for the operand.</p>\n\n<p>The parentheses are just part of your everyday at&amp;t style effective address syntax.</p>\n\n<p><code>i</code> is an immediate integer operand (one with constant value).</p>\n\n<p><code>\"1\"</code> and <code>\"2\"</code> are matching constraints, that is place them in the same location as the indicated other operands.</p>\n"}], "owner": {"reputation": 323, "user_id": 1082170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8f364ad4c94b4b5eb5747b0d123f31e?s=128&d=identicon&r=PG", "display_name": "user1082170", "link": "https://stackoverflow.com/users/1082170/user1082170"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 28595292, "answer_count": 1, "score": 2, "last_activity_date": 1424342370, "creation_date": 1424282861, "last_edit_date": 1424342370, "question_id": 28590730, "link": "https://stackoverflow.com/questions/28590730/inline-assembly-operand-constraints", "title": "inline assembly operand constraints", "body": "<p>I have the a few questions regarding a piece of code I am trying to understand. I have read <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Using-Assembly-Language-with-C.html#Using-Assembly-Language-with-C\" rel=\"nofollow\">the manual here</a>. But it does not seem to explain or answer all of the tricks being used here. </p>\n\n<p>Here is the code:</p>\n\n<pre><code>#define SAMPLE_OFFSET1 0\n#define SAMPLE_OFFSET2 100\n#define SAMPLE_OFFSET1 1000\n#define STRINGIFY(s) #s\n\nstruct data {\n    int m1;\n    int m2;\n    const uint *m3;\n    const uint *m4;\n};\n\n#define assembly_function(param1, ... param15) \\\n... body \\\n... body \\\n... body \\\n... body\n\nvoid testFunction (data* c, uint *const sample) {\nint bat, tmp;\n    __asm__ volatile(\n        assembly_function(\"%0\", \"%q0\", \"(%4)\", \"%1\", \"%w1\",\n                             \"%2\", \"%q2\", \"%3\", \"%b3\",\n                             \"%c6(%5)\", \"%c7(%5)\",\n                             STRINGIFY(SAMPLE_OFFSET1),\n                             STRINGIFY(SAMPLE_OFFSET2),\n                             STRINGIFY(SAMPLE_OFFSET3),\n                             \"%8\")\n        : \"=&amp;r\"(bat), \"=&amp;r\"(c-&gt;m1), \"=&amp;r\"(c-&gt;m2), \"=&amp;q\"(tmp)\n        : \"r\"(sample), \"r\"(c),\n          \"i\"(offsetof(data, m3)),\n          \"i\"(offsetof(data, m4)),\n          \"1\"(c-&gt;m1), \"2\"(c-&gt;m2)\n        : \"%rcx\", \"memory\"\n    );\n}\n</code></pre>\n\n<p>I have wild guesses about the usage of some of the following constraints/options. But I feel its better to confirm from other fellows (or get link to some detailed manual).</p>\n\n<ul>\n<li>%c in \"%c6(%5)\" and \"%c7(%5)\"</li>\n<li>%q in \"%q0\" and \"%q2\", </li>\n<li>%b in \"%b3\"</li>\n<li>%w in \"%w1\"</li>\n<li>parentheses in \"(%4)\"</li>\n<li>\"i\" for two of the input parameters.</li>\n<li>\"1\" and \"2\" for two of the input parameters.</li>\n</ul>\n\n<p>Thanks for your help.   </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424290115, "post_id": 28590528, "comment_id": 45492407, "body": "<code>printf(&quot;%f\\n&quot;, normal_average);</code>  or  <code>printf(&quot;%e\\n&quot;, normal_average);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1356, "user_id": 3760021, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1168165975/picture?type=large", "display_name": "RafaelCaballero", "link": "https://stackoverflow.com/users/3760021/rafaelcaballero"}, "edited": false, "score": 0, "creation_date": 1424282964, "post_id": 28590731, "comment_id": 45488041, "body": "A similar question: <a href=\"http://stackoverflow.com/questions/4264127/correct-format-specifier-for-double-in-printf\" title=\"correct format specifier for double in printf\">stackoverflow.com/questions/4264127/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1356, "user_id": 3760021, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1168165975/picture?type=large", "display_name": "RafaelCaballero", "link": "https://stackoverflow.com/users/3760021/rafaelcaballero"}, "is_accepted": false, "score": 0, "last_activity_date": 1424282869, "creation_date": 1424282869, "answer_id": 28590731, "question_id": 28590528, "link": "https://stackoverflow.com/questions/28590528/what-do-i-need-to-add-to-get-the-output-to-display-to-the-user/28590731#28590731", "title": "What do I need to add to get the output to display to the user?", "body": "<p>You don't say what number corresponds to each description. Anyway to show a double use printf(\"%f\", doubleValue); </p>\n\n<pre><code>// Print output\nprintf(\"Statistics:\\n\");\nprintf(\"   Average %f\\n\",normalAverage );\n</code></pre>\n\n<p>Analogously use %s for strings, %c for characters, or %d for integers</p>\n"}, {"tags": [], "owner": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "is_accepted": false, "score": 0, "last_activity_date": 1424294762, "last_edit_date": 1424294762, "creation_date": 1424283185, "answer_id": 28590847, "question_id": 28590528, "link": "https://stackoverflow.com/questions/28590528/what-do-i-need-to-add-to-get-the-output-to-display-to-the-user/28590847#28590847", "title": "What do I need to add to get the output to display to the user?", "body": "<pre><code>printf(\"%f\", normal_average);  /*double */\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424292039, "post_id": 28591144, "comment_id": 45493501, "body": "@chux I meant to use &quot;format specifiers&quot; in <code>printf()</code> to print value stored in variables. After reading the question I got the impression that the one who posted the question was not sure how to print the value stored in variables. However, your point sounds valid. I have removed the &quot;same&quot; word, as I too agree that may be misleading."}], "tags": [], "owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "is_accepted": false, "score": 2, "last_activity_date": 1424292092, "last_edit_date": 1424292092, "creation_date": 1424284128, "answer_id": 28591144, "question_id": 28590528, "link": "https://stackoverflow.com/questions/28590528/what-do-i-need-to-add-to-get-the-output-to-display-to-the-user/28591144#28591144", "title": "What do I need to add to get the output to display to the user?", "body": "<p>To print the results you can use \"format specifiers\" like in <code>scanf()</code>.</p>\n\n<p>When you use </p>\n\n<pre><code>scanf(\"%d\", &amp;age);\n</code></pre>\n\n<p>Here <code>%d</code> is format specifier for integer. You can similarly use format specifiers for <code>printf()</code> as well.</p>\n\n<p><strong>For example:</strong></p>\n\n<p>If you have your age stored in an integer variable <code>age</code> then you can print it like this:</p>\n\n<pre><code>printf(\"Age is: %d\",age);\n</code></pre>\n\n<p>Here <code>printf()</code> prints whatever is inside <code>\" \"</code>(first Argument) to the monitor. While doing so <code>%d</code> is replaced by the value of <code>age</code>.</p>\n\n<p>So if <code>age</code> is equal to <code>25</code>, then what will be displayed is as below:</p>\n\n<pre><code>Age is 25\n</code></pre>\n\n<p><code>%d</code> is <strong>Format specifier</strong> for <strong>INTERGER</strong> variables. Each data type have their own format specifiers. </p>\n\n<p>One more ex:</p>\n\n<pre><code>printf(\"Age is %d , weight is %d\", age, weight);\n</code></pre>\n\n<p>So basically you need to use format specifier in the <code>printf()</code> statement to print values stored in variables. And if you have your results stored in variables, you can use those variable names with correct format specifiers.</p>\n\n<p>You can google, \"format specifiers in C\" to find out format specifiers of all data types used in C.</p>\n"}], "owner": {"reputation": 11, "user_id": 4580780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f999e8309420c2d4ae250364f20e6ef?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Johnson", "link": "https://stackoverflow.com/users/4580780/bob-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1424294762, "creation_date": 1424282197, "question_id": 28590528, "link": "https://stackoverflow.com/questions/28590528/what-do-i-need-to-add-to-get-the-output-to-display-to-the-user", "title": "What do I need to add to get the output to display to the user?", "body": "<p>What do I need to add to get the output to display to the user? I am not sure what printf statement I need to add to make it work. I know how to display text to the user but not how to display the results of the calculations. </p>\n\n<pre><code>        #include &lt;stdio.h&gt;\n        #define NORMAL_ROD 10\n        #define SENTINEL 0\n\n\n           int main(void)\n{\n    //Variable declarations\n    int normal_count = 0;           \n    int normal_total = 0;          \n    int long_count = 0;\n    int long_total = 0;\n    int short_count = 0;\n    int short_total = 0 ;\n    double normal_average;          \n    double long_average;\n    double short_average;\n    double overall_average;\n    int overall_count =0;\n    int overall_total= 0;\n\n\n\n    int rodLength = 1;\n\n\n    printf(\"Rod Manufacturing Quality Control\\n\");\n\n\n    while(1)\n    {\n        printf(\"Input Rod Length: \");   \n        scanf(\"%i\", &amp;rodLength);        \n        if(rodLength == SENTINEL) break;\n\n        overall_count = overall_count + 1;\n        overall_total = overall_total + rodLength;\n\n        if(rodLength == NORMAL_ROD)\n        {\n            normal_count = normal_count + 1;\n            normal_total = normal_total + rodLength;\n        }\n        else if(rodLength &gt; NORMAL_ROD)\n        {\n            long_count = long_count +1;\n            long_total = long_total + rodLength;\n        }\n        else\n        {\n            short_count = short_count +1;\n            short_total = short_total = rodLength;\n        }\n    }\n\n    // Average calcs\n    normal_average = (double)normal_total / normal_count;\n    short_average = (double)short_total / short_count;\n    long_average = (double)long_total / long_count;\n    overall_average = (double)overall_total / overall_count;\n    /*\n    ...\n    ...\n    ...\n    */\n\n    // Print output\n    printf(\"Statistics:\\n\");\n    printf(\"Desc        Number        Total        Average\\n\");\n\n\n\n    return 0;\n}\n\n/*\n\nOutput here!\n\n*/\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1424281992, "post_id": 28590421, "comment_id": 45487452, "body": "what do you think realloc is doing?"}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424283206, "post_id": 28590540, "comment_id": 45488178, "body": "To get around <code>strdup()</code> this would do also: <code>Asaf.name = malloc(strlen(buffer) + 1); &#47;* +1 for the 0-terminator *&#47;</code> The call to <code>strcpy()</code> is however still necessary."}], "tags": [], "owner": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "is_accepted": true, "score": 3, "last_activity_date": 1424284580, "last_edit_date": 1424284580, "creation_date": 1424282236, "answer_id": 28590540, "question_id": 28590421, "link": "https://stackoverflow.com/questions/28590421/c-structures-and-pointers/28590540#28590540", "title": "C structures and pointers", "body": "<p>You are trying to realloc (which operates on the heap) an array that is allocated on the stack, which is a no-no.  What you want instead is something like:</p>\n\n<pre><code>Asaf.name = strdup(buffer);  /* POSIX: allocates a string copy of buffer on the heap */\n</code></pre>\n\n<p>Or, more standardly:</p>\n\n<pre><code>Asaf.name = (char*) malloc(strlen(buffer) + 1);  /* TODO: should check allocations for NULL return */\nstrcpy(Asaf.name, buffer);\n</code></pre>\n\n<p>Also, you should use fgets() rather than gets().  gets() is inherently dangerous and should never be used because it doesn't do any bounds checking on the array to which it writes.</p>\n\n<pre><code>fgets(buffer, sizeof(buffer), stdin);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 174, "user_id": 4264158, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dd740e6a9590210f8ce122bd117750d5?s=128&d=identicon&r=PG", "display_name": "SUMIT KUMAR SINGH", "link": "https://stackoverflow.com/users/4264158/sumit-kumar-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1424283803, "last_edit_date": 1495542026, "creation_date": 1424283803, "answer_id": 28591048, "question_id": 28590421, "link": "https://stackoverflow.com/questions/28590421/c-structures-and-pointers/28591048#28591048", "title": "C structures and pointers", "body": "<p>This function returns a pointer to the newly allocated memory, or NULL if the request fails.                                                                     </p>\n\n<p>so as realloc operates on heap here getting pointer to the memory allocation in heap area to a pointer guy sitting in stack can cause some problems buddy.\nso maybe undefined behavior can be the answer for the output you are getting.</p>\n\n<p>About how using realloc, all the didactic examples include this-\nUse realloc:<br>\n1>Check if it's NULL.In this case use perror and exit the program<br>\n2>If it's not NULL use the memory allocated<br>\n3>Free the memory when you don't need it anymore.  </p>\n\n<p>possible duplicate of:<a href=\"https://stackoverflow.com/questions/13748338/how-to-use-realloc-in-a-function-in-c\">How to use realloc in a function in C</a>                               </p>\n"}], "owner": {"reputation": 25, "user_id": 4481304, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7717ff25ec7697e2b762c24d41224e45?s=128&d=identicon&r=PG&f=1", "display_name": "Assaf Karavani", "link": "https://stackoverflow.com/users/4481304/assaf-karavani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 28590540, "answer_count": 2, "score": 0, "last_activity_date": 1424284580, "creation_date": 1424281892, "question_id": 28590421, "link": "https://stackoverflow.com/questions/28590421/c-structures-and-pointers", "title": "C structures and pointers", "body": "<p>This is my struct:</p>\n\n<pre><code>typedef struct Person {\n\n    char* name;\n    int age;\n    float height;\n    float weight;\n    char** hobbies;\n\n}person;\n</code></pre>\n\n<p>I tried to fill the name but it just ain't working.</p>\n\n<pre><code>void main(){\n\n    person Asaf;\n    char buffer[50];\n    int length;\n\n    puts(\"Please enter the name of the student\");\n    gets(buffer);\n    length = strlen(buffer);\n    Asaf.name = realloc(buffer, length);\n\n}\n</code></pre>\n\n<p>I just can't figure the problem...\nI guess it has something to do with the realloc function.\nplease help!! :P</p>\n"}, {"tags": ["c", "for-loop", "mkfifo"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4237781, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5da0111939024f8b9b02e7d1e6bbc7da?s=128&d=identicon&r=PG&f=1", "display_name": "Tookmund", "link": "https://stackoverflow.com/users/4237781/tookmund"}, "edited": false, "score": 0, "creation_date": 1424282717, "post_id": 28590560, "comment_id": 45487891, "body": "I&#39;ve fixed that now, but it still exits."}], "tags": [], "owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "is_accepted": true, "score": 2, "last_activity_date": 1424283096, "last_edit_date": 1424283096, "creation_date": 1424282320, "answer_id": 28590560, "question_id": 28590412, "link": "https://stackoverflow.com/questions/28590412/loop-fails-to-continue-looping/28590560#28590560", "title": "Loop fails to continue looping", "body": "<p>Taking a second look, I would say your problem is in <code>switch( fork() )</code>.\n<code>fork()</code> returns <code>0</code> for the child process and the child's PID for the parent but you have <code>exit(0);</code> in <code>default:</code> so you exit the parent.</p>\n\n<p>Another problem (seen first):\nYour loop is:</p>\n\n<pre><code>for(;;ret = read(ctfd,create,1)) {\n   do_something;\n}\n</code></pre>\n\n<p>which is equal to:</p>\n\n<pre><code>while( 1 ) {\n    do_something;\n    ret = read(ctfd,create,1);\n}\n</code></pre>\n\n<p>do you 'do something' before reading. That leads to Undefined Beahaviour, e.g. becaus the contents of <code>create</code> isn't defined.</p>\n"}], "owner": {"reputation": 33, "user_id": 4237781, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5da0111939024f8b9b02e7d1e6bbc7da?s=128&d=identicon&r=PG&f=1", "display_name": "Tookmund", "link": "https://stackoverflow.com/users/4237781/tookmund"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 28590560, "answer_count": 1, "score": 1, "last_activity_date": 1424283096, "creation_date": 1424281850, "question_id": 28590412, "link": "https://stackoverflow.com/questions/28590412/loop-fails-to-continue-looping", "title": "Loop fails to continue looping", "body": "<p>I was working on some code to create a new folder everytime a specific FIFO is written to:</p>\n\n<pre><code>int main (int argc, char* argv[]) {\nif (argc != 2) {\n    printf(\"Usage: %s &lt;directory&gt;\\n\",argv[0]);\n    exit(0);\n}\nint ret = chdir(argv[1]);\nif (ret &lt; 0) {\n    printf(\"Could not chdir to %s\\n\",argv[1]);\n    perror(\"\");\n    exit(0);\n}\n\nret = mkfifo(\"create\",0666);\nif (ret &lt; 0) {\n    perror(\"Could not make create fifo\");\n    return 0;\n}\nint ctfd = open(\"create\",O_RDWR);\nif (ctfd &lt; 0) {\n    perror(\"Could not open create\");\n    return 0;\n}\nchar create[1];\n//socket counter\nint count = 0;\nchar crdir[15];\n\nfor(;;ret = read(ctfd,create,1)) {\n    //printf(\"%s %d\\n\",create,count);\n    if (ret &lt; 0) {\n        perror(\"Failed to read from create\");\n        continue;\n    }\n    else if (ret &lt; 1 || create[0] == '\\n') {\n        continue;\n    }\n\n    sprintf(crdir,\"%d\",count);\n    ret = mkdir(crdir,0777);\n    if (ret &lt; 0) {\n        printf(\"Failed to create dir\");\n        perror(\"\");\n        continue;\n    }\n    count++;\n    switch(fork()) {\n        case -1:\n            perror(\"Failed to fork\");\n            break;\n        case 0:\n            printf(\"%d\\n\",count);\n            break;\n        default:\n            //char* argv[ ] = {\"netclient\",cte};\n            exit(0);\n    }\n    printf(\"test\");\n}\n//execvp()\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>However when run this happens:</p>\n\n<pre><code>arthur@dent:~/coding/netdir$ mkdir test\narthur@dent:~/coding/netdir$ ./netserver test &amp;\n[1] 2122\narthur@dent:~/coding/netdir$ echo 1 &gt; test/create \n[1]+  Done                    ./netserver test\n1\n</code></pre>\n\n<p>What did I do wrong? Why does it not continue looping and wait for more input?\nThe FIFO is opened for reading and writing so that it would not be closed when the writing stopped, did that not work properly?</p>\n"}, {"tags": ["c", "windows", "string", "stdio"], "comments": [{"owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 0, "creation_date": 1424281668, "post_id": 28590319, "comment_id": 45487250, "body": "Shouldn&#39;t this question be tagged as C?"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 0, "creation_date": 1424281716, "post_id": 28590319, "comment_id": 45487274, "body": "Actually it will be called from C++ CLI."}, {"owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 0, "creation_date": 1424281802, "post_id": 28590319, "comment_id": 45487327, "body": "Why not use the STL?"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 1, "creation_date": 1424281889, "post_id": 28590319, "comment_id": 45487388, "body": "How will STL support a Posix FILE ?"}, {"owner": {"reputation": 303, "user_id": 1459583, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ff0980b8767e4dbc32d3e2b650696ed9?s=128&d=identicon&r=PG", "display_name": "Disco Globeulon", "link": "https://stackoverflow.com/users/1459583/disco-globeulon"}, "edited": false, "score": 0, "creation_date": 1424281981, "post_id": 28590319, "comment_id": 45487444, "body": "Maybe I&#39;m not understanding what you mean, but why not use a char * and realloc when necessary?"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1424282111, "post_id": 28590319, "comment_id": 45487513, "body": "On Linux you can use <code>fopencookie</code> or <code>open_memstream</code> to do this. I don&#39;t think Windows has an equivalent."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 303, "user_id": 1459583, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ff0980b8767e4dbc32d3e2b650696ed9?s=128&d=identicon&r=PG", "display_name": "Disco Globeulon", "link": "https://stackoverflow.com/users/1459583/disco-globeulon"}, "edited": false, "score": 0, "creation_date": 1424282114, "post_id": 28590319, "comment_id": 45487516, "body": "@Josh: Because the legacy code will not tell me when a realloc is required. That should be handled by the string FILE, which receives the write requests."}, {"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 0, "creation_date": 1424282124, "post_id": 28590319, "comment_id": 45487527, "body": "No, there isn&#39;t anything like STL in C. You&#39;ll need to write your own buffer struct and reallocate space, as needed."}, {"owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 2, "creation_date": 1424282257, "post_id": 28590319, "comment_id": 45487605, "body": "You can get a std::fstream from a FILE * <a href=\"http://stackoverflow.com/questions/2746168/how-to-construct-a-c-fstream-from-a-posix-file-descriptor\">on windows</a>."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1424282473, "post_id": 28590319, "comment_id": 45487740, "body": "Why is this tagged posix when you said you use C++/CLI? Which OS and compiler are you using?"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1424282485, "post_id": 28590319, "comment_id": 45487748, "body": "@interjay: it seems that open_memstream is exactly what I need (there&#39;s also a fmemopen but it doesn&#39;t grow the buffer). fopencookie  could do as well as it allows you to write your own hooks. I would need a Windows equivalent of one of these."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1424282579, "post_id": 28590319, "comment_id": 45487813, "body": "@interjay: the calling code is written in C++ CLI with MSVC, and invokes a native API that uses Posix."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1424282777, "post_id": 28590319, "comment_id": 45487931, "body": "If you aren&#39;t actually on a POSIX system then I suggest removing that tag."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1424282833, "post_id": 28590319, "comment_id": 45487962, "body": "@interjay: The POSIX tag is there to stress C POSIX library compliance (stdio)."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424283814, "post_id": 28590319, "comment_id": 45488527, "body": "If this is for Window only, I&#39;d tag the question [windows]."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1424284216, "post_id": 28590319, "comment_id": 45488751, "body": "@YvesDaoust stdio is part of the C standard. POSIX is a standard which includes that but also a lot more (for example, it defines <code>open_memstream</code>, which isn&#39;t in the C standard) and isn&#39;t directly supported on Windows."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1424284358, "post_id": 28590319, "comment_id": 45488844, "body": "Note that <code>fmemopen()</code> and <code>open_memstream()</code> are not in POSIX.1-2001, but only in POSIX.1-2008.  There are still a good number of systems that comply with the former but not the latter, and on such systems you are unlikely to find those functions available.  I&#39;m not sure whether Windows is among them."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1424284540, "post_id": 28590319, "comment_id": 45488949, "body": "If you want a solution that is based only on the C standard library (for maximum portability, including to Windows) then you are out of luck.  The standard library does not provide a <code>FILE</code> view of memory, nor any mechanism by which you could portably roll your own."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1424284960, "post_id": 28590319, "comment_id": 45489181, "body": "@JohnBollinger: I just need a solution that supports the FILE type and runs under Windows. I don&#39;t care about portability."}], "answers": [{"comments": [{"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1424336858, "post_id": 28602127, "comment_id": 45509811, "body": "Unfortunately, these do not appear to be supported by MS, nor fopencookie nor funopen."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1424336924, "post_id": 28602127, "comment_id": 45509839, "body": "But then, you might use a RAM based file."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1424337009, "post_id": 28602127, "comment_id": 45509899, "body": "That&#39;s what I am looking for from the beginning."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1424337154, "post_id": 28602127, "comment_id": 45509980, "body": "Follow the links in my answer!"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1424337444, "post_id": 28602127, "comment_id": 45510164, "body": "Using an &quot;external&quot; RAM disk is a pretty heavy solution, and you have to give it a fixed size anyway :( Using stringstream is of no use here as it does not emulate a FILE."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1424337497, "post_id": 28602127, "comment_id": 45510193, "body": "It (using a RAM disk) is a configuration and sysadmin issue."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1424338134, "post_id": 28602127, "comment_id": 45510558, "body": "Yep, this application is intended to be copied and run on any machine without an installation. So far my best option is a real file with a temporary attribute (tmpfs), hoping the rights are granted."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1424338247, "last_edit_date": 1495542767, "creation_date": 1424336354, "answer_id": 28602127, "question_id": 28590319, "link": "https://stackoverflow.com/questions/28590319/string-file-stdio-compatible/28602127#28602127", "title": "string FILE stdio compatible?", "body": "<p><a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fmemopen.html\" rel=\"nofollow noreferrer\">fmemopen</a> &amp; <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/open_memstream.html\" rel=\"nofollow noreferrer\">open_memstream</a> are in the <a href=\"http://en.wikipedia.org/wiki/POSIX\" rel=\"nofollow noreferrer\">POSIX</a> 2008 standard, probably inspired by GNU libc <a href=\"http://www.gnu.org/software/libc/manual/html_node/String-Streams.html\" rel=\"nofollow noreferrer\">string streams</a>, and give in-memory  <code>FILE*</code> streams.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/q/12249610/841108\">this question</a> quite similar to yours, and also <a href=\"https://stackoverflow.com/a/5253726/841108\">that answer</a>.</p>\n\n<p>BTW, many operating systems <a href=\"http://en.wikipedia.org/wiki/List_of_RAM_drive_software\" rel=\"nofollow noreferrer\">have</a> RAM based or virtual memory based filesystems (\u00e0 la <a href=\"http://en.wikipedia.org/wiki/Tmpfs\" rel=\"nofollow noreferrer\">tmpfs</a>)</p>\n\n<p>If you are coding in <a href=\"http://en.wikipedia.org/wiki/C++11\" rel=\"nofollow noreferrer\">C++11</a> (not in C) and perhaps for some earlier C++ standard  you can of course use <a href=\"http://www.cplusplus.com/reference/sstream/stringstream/\" rel=\"nofollow noreferrer\">std::stringstream</a>-s</p>\n\n<p>So you could use <code>open_memstream</code> on Posix, and some <a href=\"https://stackoverflow.com/a/5253726/841108\">other</a> solution on Windows (just with <code>#if _POSIX_C_SOURCE &gt; 200809L</code> per <a href=\"http://man7.org/linux/man-pages/man7/feature_test_macros.7.html\" rel=\"nofollow noreferrer\">feature_test_macros(7)</a> ...)</p>\n\n<p>The C standard does not provide (yet) any in-memory <code>FILE</code> streams, so if you need them you <em>have</em> to code or use <em>platform-specific</em> functions.</p>\n"}, {"comments": [{"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1424339533, "post_id": 28602986, "comment_id": 45511432, "body": "Yep, that&#39;s my current solution. I don&#39;t mind that there can indeed be disk accesses, I am more worried by the need to access the file system and be allowed to do so."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1424339889, "post_id": 28602986, "comment_id": 45511621, "body": "@YvesDaoust: Why would that be a problem? <code>GetTempPath</code> should give you a writeable directory. Create a GUID for a filename and you don&#39;t have collisions. But if you do have a &quot; current solution&quot;  you really should include that in the question!"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 0, "last_activity_date": 1424338866, "last_edit_date": 1495540304, "creation_date": 1424338866, "answer_id": 28602986, "question_id": 28590319, "link": "https://stackoverflow.com/questions/28590319/string-file-stdio-compatible/28602986#28602986", "title": "string FILE stdio compatible?", "body": "<p>Create the temporary file using <code>CreateFile(... FILE_ATTRIBUTE_TEMPORARY, FILE_FLAG_DELETE_ON_CLOSE ...)</code> and then <a href=\"https://stackoverflow.com/questions/7369445/is-there-a-windows-equivalent-to-fdopen-for-handles\">convert the <code>HANDLE</code> to <code>FILE*</code></a>.</p>\n\n<p>You said you didn't like a write to a temporary file, so these flags to CreateFile are a strong hint to Windows to keep the file in cache if possible. And if Windows would run of of RAM, even a <code>char[]</code> can end up in a swap file anyway. </p>\n"}], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1424354238, "creation_date": 1424281606, "last_edit_date": 1424354238, "question_id": 28590319, "link": "https://stackoverflow.com/questions/28590319/string-file-stdio-compatible", "title": "string FILE stdio compatible?", "body": "<p>Is there anything like a string file in stdio/string/stdlib ? I mean a special way to fopen a FILE stream, which actually directs the writes to an internal buffer and takes care of buffer allocation/reallocation ? After fclose, the text should be available as null-terminated char[] or similar.</p>\n\n<p>I need to interface to legacy code that receives a FILE* as an argument and writes to it, and I'd prefer to avoid writing to a temporary disk file.</p>\n\n<p>Other forms of storage could do instead of char[] (f.i. string), but a FILE* pointer must be available.</p>\n\n<p>I am looking for an alternative to creating a temporary disk file.</p>\n"}, {"tags": ["c", "file-io", "strcat"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1424280883, "post_id": 28590035, "comment_id": 45486800, "body": "What happens when you try it? Is <code>msg</code> the value you expect?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1424280913, "post_id": 28590035, "comment_id": 45486820, "body": "<i>would msg be 12345?</i> no."}, {"owner": {"reputation": 174, "user_id": 4264158, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dd740e6a9590210f8ce122bd117750d5?s=128&d=identicon&r=PG", "display_name": "SUMIT KUMAR SINGH", "link": "https://stackoverflow.com/users/4264158/sumit-kumar-singh"}, "edited": false, "score": 0, "creation_date": 1424282328, "post_id": 28590035, "comment_id": 45487648, "body": "just a suggestion: <a href=\"http://stackoverflow.com/questions/5431941/while-feof-file-is-always-wrong\" title=\"while feof file is always wrong\">stackoverflow.com/questions/5431941/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 853, "user_id": 2591754, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/137c6516f428331c8fc2d3853f067aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Delfino", "link": "https://stackoverflow.com/users/2591754/delfino"}, "edited": false, "score": 0, "creation_date": 1424281256, "post_id": 28590142, "comment_id": 45487022, "body": "In regards to the size of <code>msg</code>, I would like it to be as long as how many characters are contained in my file. So, if my file has <code>12345</code>, I would like <code>strlen(msg)</code> to be 5."}], "tags": [], "owner": {"reputation": 19923, "user_id": 66519, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/83ea6683f15edb2087f6a3ad4f42605b?s=128&d=identicon&r=PG", "display_name": "ojblass", "link": "https://stackoverflow.com/users/66519/ojblass"}, "is_accepted": false, "score": 0, "last_activity_date": 1424281051, "creation_date": 1424281051, "answer_id": 28590142, "question_id": 28590035, "link": "https://stackoverflow.com/questions/28590035/fill-array-from-file/28590142#28590142", "title": "Fill Array From File", "body": "<p>Strcat would likely not be what you want to use.  It assumes the string you are appending is null terminited which you did not guarentee.  In addition this code will fail because you have not allocated any space for msg.  Also I am a little suspect that msg is a pointer to a pointer by use of the [].  I would suggest looking at examples of the fgets function rather than what you are doing.</p>\n"}, {"comments": [{"owner": {"reputation": 19923, "user_id": 66519, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/83ea6683f15edb2087f6a3ad4f42605b?s=128&d=identicon&r=PG", "display_name": "ojblass", "link": "https://stackoverflow.com/users/66519/ojblass"}, "edited": false, "score": 1, "creation_date": 1424281366, "post_id": 28590213, "comment_id": 45487083, "body": "A little too much spoonfeeding but +1 for the detail"}, {"owner": {"reputation": 853, "user_id": 2591754, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/137c6516f428331c8fc2d3853f067aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Delfino", "link": "https://stackoverflow.com/users/2591754/delfino"}, "edited": false, "score": 0, "creation_date": 1424281468, "post_id": 28590213, "comment_id": 45487151, "body": "Sorry, I&#39;m really new to C, and my professor just gave us an assignment where he wants us using C, so I&#39;m sort of scrambling for help."}, {"owner": {"reputation": 19923, "user_id": 66519, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/83ea6683f15edb2087f6a3ad4f42605b?s=128&d=identicon&r=PG", "display_name": "ojblass", "link": "https://stackoverflow.com/users/66519/ojblass"}, "edited": false, "score": 0, "creation_date": 1424281678, "post_id": 28590213, "comment_id": 45487260, "body": "If you want msg to be exactly the right size you can loop through the file twice instead of hardcoding 100 as the maximum length.  You might try doing that and using the malloc command.  If your professor provides a very long string you will get a ding."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 19923, "user_id": 66519, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/83ea6683f15edb2087f6a3ad4f42605b?s=128&d=identicon&r=PG", "display_name": "ojblass", "link": "https://stackoverflow.com/users/66519/ojblass"}, "edited": false, "score": 0, "creation_date": 1424281767, "post_id": 28590213, "comment_id": 45487306, "body": "@ojblass yes or, you could use <code>realloc()</code> and <code>fread()</code> to read chunks from the file at once."}, {"owner": {"reputation": 853, "user_id": 2591754, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/137c6516f428331c8fc2d3853f067aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Delfino", "link": "https://stackoverflow.com/users/2591754/delfino"}, "edited": false, "score": 0, "creation_date": 1424283743, "post_id": 28590213, "comment_id": 45488485, "body": "What does <code>(count &lt; sizeof(msg) - 1)</code> do?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 853, "user_id": 2591754, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/137c6516f428331c8fc2d3853f067aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Delfino", "link": "https://stackoverflow.com/users/2591754/delfino"}, "edited": false, "score": 0, "creation_date": 1424284472, "post_id": 28590213, "comment_id": 45488912, "body": "@Delfini Prevents overflowing the <code>msg</code> buffer, <code>sizeof</code> operator when applied to an array it gives the size of the array in bytes, and since it&#39;s a <code>char</code> array and since <code>sizeof(char) == 1</code> by definition, then it gives the number of  <code>char</code>&#39;s that fit into the array, preventing that count exceeds the maximum value, and leaves a place for the <code>nul</code> terminating byte, hence <code>sizeof(msg) - 1</code>"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 2, "last_activity_date": 1424282248, "last_edit_date": 1424282248, "creation_date": 1424281279, "answer_id": 28590213, "question_id": 28590035, "link": "https://stackoverflow.com/questions/28590035/fill-array-from-file/28590213#28590213", "title": "Fill Array From File", "body": "<p>You didn't allocate space for the <code>char</code> array also it's type is incompatible with the first parameter of <code>strcat()</code> you also need to <code>nul</code> terminate the array so it's a valid string, so</p>\n\n<ol>\n<li>Redeclare <code>msg</code></li>\n<li>Allocate space for the string.</li>\n<li><code>nul</code> terminate the array.</li>\n<li><code>fgetc()</code> returns <code>int</code> not <code>char</code>.</li>\n<li>You really don't need to use <code>break</code> in this case, and almost never.</li>\n<li>You also don't need <code>strcat()</code></li>\n<li>Check that <code>fopen()</code> didn't return <code>NULL</code></li>\n</ol>\n\n<p>This is how you should do it</p>\n\n<pre><code>int  ch, count;\nchar msg[100];\nFIlE *file = fopen(argv[1], \"r\");\nif (file == NULL)\n    return -1;\n\ncount = 0\nwhile (((ch = fgetc(file)) != EOF) &amp;&amp; (count &lt; sizeof(msg) - 1))\n   msg[count++] = (char)ch;\nmsg[count] = '\\0';\nprintf(\"%s\", msg);\n</code></pre>\n\n<p>Also notice that </p>\n\n<pre><code>while (1)\n{\n    if (condition)\n        break;\n}\n</code></pre>\n\n<p>is really</p>\n\n<pre><code>while (condition)\n{\n}\n</code></pre>\n\n<p>but with the aditional risk that you could change <code>condition</code> before evaluating it, and also makes the code very hard to understand.</p>\n"}, {"tags": [], "owner": {"reputation": 2961, "user_id": 782997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b1670afb45ccf62c3df7beca06aac63?s=128&d=identicon&r=PG", "display_name": "kjp", "link": "https://stackoverflow.com/users/782997/kjp"}, "is_accepted": false, "score": 2, "last_activity_date": 1424281719, "creation_date": 1424281719, "answer_id": 28590361, "question_id": 28590035, "link": "https://stackoverflow.com/questions/28590035/fill-array-from-file/28590361#28590361", "title": "Fill Array From File", "body": "<p>You should just use fgets(). But be careful, you need to know the size of the array that you are reading into - otherwise you could end up with some nasty BufferOverflow errors.</p>\n\n<pre><code>char msg[100];\n\nFIlE *file = fopen(argv[1], \"r\");\nif (file == NULL)\n    return -1;\n\nif( fgets (msg, 100, file)!=NULL ) {\n      printf (\"%s\\n\", msg);\n}\nfclose(fp);\n</code></pre>\n\n<p>A better way would be to find the size of the file you are reading from, dynamically allocate the msg array using malloc with that size and then read that many characters from the file (instead of hard-coded values like 100).</p>\n"}], "owner": {"reputation": 853, "user_id": 2591754, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/137c6516f428331c8fc2d3853f067aa0?s=128&d=identicon&r=PG&f=1", "display_name": "Delfino", "link": "https://stackoverflow.com/users/2591754/delfino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 28590213, "answer_count": 3, "score": 0, "last_activity_date": 1424282248, "creation_date": 1424280730, "question_id": 28590035, "link": "https://stackoverflow.com/questions/28590035/fill-array-from-file", "title": "Fill Array From File", "body": "<p>I have a file that contains a set of characters that I would like to have stored in an array, and was wondering if C's <code>strcat()</code> function could do the job. </p>\n\n<p>So, would the following be a valid way of getting characters from a file?</p>\n\n<pre><code>FIlE *file = fopen(argv[1], \"r\");\nchar ch, *msg[];\n\nwhile(1)\n{\n   if(feof(file))\n   {\n      break;\n   }\n   ch = fgetc(file);\n   strcat(msg,ch);\n}\nprintf(\"%s\", msg);\n</code></pre>\n\n<p>If I had a file <code>example.txt</code> containing <code>12345</code>, would <code>msg</code> be <code>12345</code>?</p>\n"}, {"tags": ["c", "opengl"], "comments": [{"owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 2, "creation_date": 1424279525, "post_id": 28589567, "comment_id": 45485889, "body": "Where it crashes? have you checked with the debugger?"}], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1424282635, "post_id": 28590509, "comment_id": 45487847, "body": "You must not use <code>&lt;stdlib.h&gt;</code> <code>&lt;stdio.h&gt;</code> in C++. Use <code>&lt;cstdlib&gt;</code> <code>&lt;cstdio&gt;</code> instead."}, {"owner": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1424282738, "post_id": 28590509, "comment_id": 45487904, "body": "@HolyBlackCat: I&#39;m not using C++ here, only old good C :) You can see it from my Makefile. This project doesn&#39;t use anything from C++, so why use C++ to build it at all?"}, {"owner": {"reputation": 997, "user_id": 2132646, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ce9b2b9e5ce5033e7d45a4a530ade2a3?s=128&d=identicon&r=PG", "display_name": "Trung B&#250;n", "link": "https://stackoverflow.com/users/2132646/trung-b%c3%ban"}, "edited": false, "score": 0, "creation_date": 1424283288, "post_id": 28590509, "comment_id": 45488232, "body": "I removed those headers stuffs and initializing code and add comments where I put them instead. Just too many uneccessary codes. Anw, thank for the help."}, {"owner": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "edited": false, "score": 0, "creation_date": 1424283852, "post_id": 28590509, "comment_id": 45488554, "body": "Please see my EDITs I just added in the end of my answer. If they fix your problem -- please verify my answer as correct one."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1424291381, "post_id": 28590509, "comment_id": 45493122, "body": "@SamProtsenko Ok. They just looked strange in answer to C++ question. :)"}], "tags": [], "owner": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1424287872, "last_edit_date": 1424287872, "creation_date": 1424282155, "answer_id": 28590509, "question_id": 28589567, "link": "https://stackoverflow.com/questions/28589567/opengl-application-crashing/28590509#28590509", "title": "OpenGL application crashing", "body": "<p>Ok, first of all you should have provided more details, but I figured them by myself. Here is it:</p>\n\n<p>Missed headers:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;GL/glew.h&gt;\n#include &lt;GLFW/glfw3.h&gt;\n</code></pre>\n\n<p>Makefile:</p>\n\n<pre><code>CFLAGS = -Wall -O2\nCFLAGS += $(shell pkg-config --cflags glfw3)\nCFLAGS += $(shell pkg-config --cflags glew)\nLDFLAGS += $(shell pkg-config --libs glfw3)\nLDFLAGS += $(shell pkg-config --libs glew)\nSOURCES = main.c\nOUT = gl-test\nCC = gcc\n\ndefault: $(SOURCES)\n    $(CC) $(CFLAGS) $(LDFLAGS) $(SOURCES) -o $(OUT)\n\nclean:\n    -rm -f $(OUT)\n\n.PHONY: default clean\n</code></pre>\n\n<p>Error occured: Segmentation fault, in next command:</p>\n\n<pre><code>glGenBuffers(1, &amp;vertexBuffer);\n</code></pre>\n\n<p>But what I see is that <strong>glfwCreateWindow()</strong> returns NULL, so the error is already in very first instruction. You can figure out why this error happend like this:</p>\n\n<pre><code>static void error_callback(int error, const char *description)\n{\n    puts(description);\n}\n\nint main(void)\n{\n    glfwSetErrorCallback(error_callback);\n    ...\n}\n</code></pre>\n\n<p>And also it worth to modify window creating code to be like that:</p>\n\n<pre><code>// Create a windowed mode window and its OpenGL context\nwindow = glfwCreateWindow(700, 500, \"Hello World\", NULL, NULL);\nif (window == NULL) {\n    fprintf(stderr, \"Error in glfwCreateWindow\\n\");\n    return EXIT_FAILURE;\n}\n</code></pre>\n\n<p>After this you can see next output in my terminal:</p>\n\n<pre><code>The GLFW library is not initialized\nError in glfwCreateWindow\n</code></pre>\n\n<p>Please try to do the same and confirm that you have the same problem. If no, please provide output from your terminal.</p>\n\n<p><strong>EDIT 1</strong>:</p>\n\n<p>Ok, it seems like first of all you need to do the next just in the <strong>main()</strong> beginning:</p>\n\n<pre><code>if (!glfwInit()) {\n    fprintf(stderr, \"Error on GLWF init\\n\");\n    return EXIT_FAILURE;\n}\n</code></pre>\n\n<p>It solves previous error, but I still have segmentation fault error.</p>\n\n<p><strong>EDIT 2</strong>:</p>\n\n<p>Second error is that GLEW wasn't initialized. It seems GLEW init must be put when window is already created, like this:</p>\n\n<pre><code>// Make the window's context current\nglfwMakeContextCurrent(window);\n\nglewinit_res = glewInit();\nif (glewinit_res != GLEW_OK) {\n    fprintf(stderr, \"Glew init error: %s\\n\",\n            glewGetErrorString(glewinit_res));\n    return EXIT_FAILURE;\n}\n</code></pre>\n\n<p>Now I don't have any runtime errors, window shows up, but it only has black background and nothing on it. Anyway, I believe original error is fixed.</p>\n\n<p><strong>EDIT 3</strong>:</p>\n\n<p>If you want to see your triangles, just remove <strong>glClear()</strong> function call.</p>\n\n<p>Here is what I see:\n<img src=\"https://i.stack.imgur.com/5JhY2.png\" alt=\"screenshot\">.</p>\n\n<p>Here is modified code that works for me (main.c file):\n<a href=\"http://pastebin.com/sx5nMQHc\" rel=\"nofollow noreferrer\">http://pastebin.com/sx5nMQHc</a></p>\n"}], "owner": {"reputation": 997, "user_id": 2132646, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ce9b2b9e5ce5033e7d45a4a530ade2a3?s=128&d=identicon&r=PG", "display_name": "Trung B&#250;n", "link": "https://stackoverflow.com/users/2132646/trung-b%c3%ban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1505, "favorite_count": 0, "accepted_answer_id": 28590509, "answer_count": 1, "score": 0, "last_activity_date": 1454683207, "creation_date": 1424279429, "last_edit_date": 1454683207, "question_id": 28589567, "link": "https://stackoverflow.com/questions/28589567/opengl-application-crashing", "title": "OpenGL application crashing", "body": "<p>This OpenGL program is written to draw a triangle and it got crashed.</p>\n\n<p>Basically a set of triangle vertices is define as array named coordinate, then this array is passed to a buffer and the method glDrawArrays will draw the triangle based on the mode GL_TRIANGLES start from vertex 0, 3 vertices in total.</p>\n\n<p>Am I right? And could someone show me where is the error? Here is the code:</p>\n\n<pre><code>// Open an OpenGL window\nGLFWwindow* window;\nint k = 0;\n\n/****Step 1: define vertices in (x, y, z) form****/\nconst GLfloat coordinates[] = {\n    -1.0f, -1.0f, 0.0f,\n    1.0f, -1.0f, 0.0f,\n    0.0f, 1.0f, 0.0f\n};\n/************************/\n\n/**Step 2: send this triangle vertices to OpenGL through a buffer**/\nGLuint vertexBuffer; // identify vertex buffer\n\nvoid Render(void){\n    /************************/\n    glEnableVertexAttribArray(0);\n    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);\n    glVertexAttribPointer(0, 3 /*size*/, GL_FLOAT /*type*/, GL_FALSE, 0, (void*)0);\n    glDrawArrays(GL_TRIANGLES, 0, 3);\n    //glDisableVertexAttribArray(0);\n    /************************/\n\n//    glClearColor(0., 1., 1., 1.); // blue colour\n    glClear( GL_COLOR_BUFFER_BIT );\n    // Swap front and back rendering buffers\n    glfwSwapBuffers(window);\n    //Poll for and process events\n    glfwPollEvents();\n}\n\nint main( void ) {\n    /*Initializing steps here*/\n\n\n    // Create a windowed mode window and its OpenGL context\n    window = glfwCreateWindow(700, 500, \"Hello World\", NULL, NULL);\n\n    // Make the window's context current\n    glfwMakeContextCurrent(window);\n\n    /**Step 2: send this triangle vertices to OpenGL through a buffer**/\n    glGenBuffers(1, &amp;vertexBuffer); // generating 1 buffer, put resulting identifier in this buffer\n    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(coordinates), coordinates, GL_STATIC_DRAW);\n    /************************/\n\n    // Main loop\n    while( glfwWindowShouldClose(window) == 0) {\n            // OpenGL rendering goes here...\n        Render();\n    }\n    // Close window and terminate GLFW\n    glfwDestroyWindow(window);\n    glfwTerminate();\n    // Exit program\n    exit( EXIT_SUCCESS );\n    }\n</code></pre>\n\n<p><strong>EDIT</strong>\nHere is a screenshot of the output:</p>\n\n<p><img src=\"https://i.stack.imgur.com/odXPx.png\" alt=\"enter image description here\"></p>\n\n<p><strong>UPDATE</strong>\nI found the error, this is because I create the OpenGL context after initializing GLEW. It causes program to crash.</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 5, "last_activity_date": 1424280360, "last_edit_date": 1424280360, "creation_date": 1424279431, "answer_id": 28589568, "question_id": 28589518, "link": "https://stackoverflow.com/questions/28589518/what-function-prototype-would-i-make-for-this-function/28589568#28589568", "title": "What Function Prototype Would I Make for this Function?", "body": "<p>Now try this  </p>\n\n<pre><code>int myFunc(int a, int b, int c, int (*)[c]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "is_accepted": false, "score": 3, "last_activity_date": 1424284647, "last_edit_date": 1495540302, "creation_date": 1424282676, "answer_id": 28590674, "question_id": 28589518, "link": "https://stackoverflow.com/questions/28589518/what-function-prototype-would-i-make-for-this-function/28590674#28590674", "title": "What Function Prototype Would I Make for this Function?", "body": "<p>If you want to skip all parameters' names for your signature, then since C99 Standard you can use this:</p>\n\n<pre><code>int myFunc(int, int, int, int [][*]);\n</code></pre>\n\n<p>or even combining with haccks's <a href=\"https://stackoverflow.com/a/28589568/586873\">answer</a>:</p>\n\n<pre><code>int myFunc(int, int, int, int (*)[*]);\n</code></pre>\n\n<p>Note that these both forms are equivalent, it's more like matter of preference, which one to take.</p>\n\n<p>The <code>[*]</code> means that array size is obtained from one of its previous parameters and you don't have to tell exactly which one needs to be taken. There might be even more than one, thus following declaration:</p>\n\n<pre><code>int someFunc(int m, int n, int [][m+n]);\n</code></pre>\n\n<p>is legal in C.</p>\n\n<p>Here is the basic program, so you can see it that works for you:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint myFunc(int, int, int, int [][*]);\n\nint myFunc(int a, int b, int c, int d[][c]) {\n    return d[0][0];\n}\n\nint main(void)\n{       \n    printf(\"%d\\n\", myFunc(1, 1, 2, (int[1][2]){{3, 5}}));\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 251, "user_id": 3735278, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a86963e305daf296660ba67c8179c277?s=128&d=identicon&r=PG&f=1", "display_name": "user3735278", "link": "https://stackoverflow.com/users/3735278/user3735278"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 28589568, "answer_count": 2, "score": 4, "last_activity_date": 1424458244, "creation_date": 1424279280, "last_edit_date": 1424458244, "question_id": 28589518, "link": "https://stackoverflow.com/questions/28589518/what-function-prototype-would-i-make-for-this-function", "title": "What Function Prototype Would I Make for this Function?", "body": "<pre><code>int myFunc(int a, int b, int c, int d[][c]) {\n    //code\n}\n</code></pre>\n\n<p>I've tried this:</p>\n\n<pre><code>int myFunc(int, int, int, int *);\n</code></pre>\n\n<p>And this:</p>\n\n<pre><code>int myFunc(int, int, int, int *[int]);\n</code></pre>\n\n<p>And this:</p>\n\n<pre><code>int myFunc(int, int, int, int **);\n</code></pre>\n\n<p>But none of them seem to work. I think I'm having trouble pinning down the last parameter's type. Any help would be greatly appreciated.</p>\n"}, {"tags": ["c", "string", "binary", "floating-point"], "comments": [{"owner": {"reputation": 15391, "user_id": 1679537, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/98a2b2fb7ba8e1c1fa8e7bff95d523de?s=128&d=identicon&r=PG", "display_name": "xlecoustillier", "link": "https://stackoverflow.com/users/1679537/xlecoustillier"}, "edited": false, "score": 0, "creation_date": 1424278889, "post_id": 28589302, "comment_id": 45485480, "body": "Looks like homework. What did you try ?"}, {"owner": {"reputation": 836, "user_id": 3507670, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/hNULU.jpg?s=128&g=1", "display_name": "Jordan Benge", "link": "https://stackoverflow.com/users/3507670/jordan-benge"}, "reply_to_user": {"reputation": 15391, "user_id": 1679537, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/98a2b2fb7ba8e1c1fa8e7bff95d523de?s=128&d=identicon&r=PG", "display_name": "xlecoustillier", "link": "https://stackoverflow.com/users/1679537/xlecoustillier"}, "edited": false, "score": 0, "creation_date": 1424279001, "post_id": 28589302, "comment_id": 45485556, "body": "Its bonus work I asked my professor for, since I didn&#39;t have a firm understanding of C. But I tried swapping the binary 0&#39;s into 1&#39;s and vise-versa, counting up the 1&#39;s and then doing (2^i) based on how many 1&#39;s were present after the swap."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1424282825, "post_id": 28589302, "comment_id": 45487953, "body": "IEEE is an association of professionals: the Institute of Electrical and Electronics Engineers (<a href=\"https://www.ieee.org\" rel=\"nofollow noreferrer\">ieee.org</a> ). You cannot easily convert a binary string to an institute of electrical and electronics engineers."}], "answers": [{"comments": [{"owner": {"reputation": 836, "user_id": 3507670, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/hNULU.jpg?s=128&g=1", "display_name": "Jordan Benge", "link": "https://stackoverflow.com/users/3507670/jordan-benge"}, "edited": false, "score": 0, "creation_date": 1424279098, "post_id": 28589395, "comment_id": 45485605, "body": "Okay, but would storing the binary value in a Int also work for twos complement?"}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "reply_to_user": {"reputation": 836, "user_id": 3507670, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/hNULU.jpg?s=128&g=1", "display_name": "Jordan Benge", "link": "https://stackoverflow.com/users/3507670/jordan-benge"}, "edited": false, "score": 0, "creation_date": 1424279193, "post_id": 28589395, "comment_id": 45485668, "body": "Since <code>int</code> is already interpreted as a two&#39;s complement number then yes. Always assuming that <code>sizeof(int) == 4</code>, otherwise you&#39;d need to pad the higher bits with the sign bit."}, {"owner": {"reputation": 836, "user_id": 3507670, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/hNULU.jpg?s=128&g=1", "display_name": "Jordan Benge", "link": "https://stackoverflow.com/users/3507670/jordan-benge"}, "edited": false, "score": 0, "creation_date": 1424289335, "post_id": 28589395, "comment_id": 45491882, "body": "but when you assign it to a &quot;float&quot; or an &quot;int&quot; it just changes the value of the orig. binary value to 0."}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": false, "score": 0, "last_activity_date": 1424278936, "creation_date": 1424278936, "answer_id": 28589395, "question_id": 28589302, "link": "https://stackoverflow.com/questions/28589302/how-to-convert-a-binary-string-into-twos-complement-and-ieee-in-c/28589395#28589395", "title": "how to convert a binary string into two&#39;s complement and IEEE in C", "body": "<p>How a binary value is interpreted is duty of the representation, not how you store the value itself.</p>\n\n<p>What I mean is that, once you have a 32 bit binary value, you don't need to \"convert\" it, you need to interpret it according to a specific codification.</p>\n\n<p>Storing the value in an type appropriate variable is enough for your purpose. So if you store this value directly in a <code>float</code> variable (assuming <code>sizeof(float) == 4</code>) will yield the correct interpretation according to IEEE and so on.</p>\n"}, {"comments": [{"owner": {"reputation": 836, "user_id": 3507670, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/hNULU.jpg?s=128&g=1", "display_name": "Jordan Benge", "link": "https://stackoverflow.com/users/3507670/jordan-benge"}, "edited": false, "score": 0, "creation_date": 1424281236, "post_id": 28589984, "comment_id": 45487012, "body": "In &quot;Display&quot; what is the &quot;Const Char&quot; variable that we&#39;re passing?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 836, "user_id": 3507670, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/hNULU.jpg?s=128&g=1", "display_name": "Jordan Benge", "link": "https://stackoverflow.com/users/3507670/jordan-benge"}, "edited": false, "score": 0, "creation_date": 1424282448, "post_id": 28589984, "comment_id": 45487720, "body": "@Shika see lower portion of answer for an example: The &quot;binary string&quot; <code>display(&quot;01000000010010001111010111000011&quot;, &#39;I&#39;)</code>"}, {"owner": {"reputation": 836, "user_id": 3507670, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/hNULU.jpg?s=128&g=1", "display_name": "Jordan Benge", "link": "https://stackoverflow.com/users/3507670/jordan-benge"}, "edited": false, "score": 0, "creation_date": 1424403559, "post_id": 28589984, "comment_id": 45544747, "body": "I tried the above code that you supplied, and kept receiving an error regarding &quot;FLT_DECIMAL_DIG 9&quot; not being declared, so i just hard coded it into the &quot;display&quot; method as a float. I also am having an issue where the format (mode) will not display correctly, i&#39;m having it passed into the display method through a set of two if statements, which call the &quot;display&quot; method with the correct format. But when I run it, it automatically displays the the format is &quot;bad&quot; and gives me a set of characters. I&#39;ll supply the code that i&#39;ve written if you don&#39;t mind taking a look at it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 836, "user_id": 3507670, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/hNULU.jpg?s=128&g=1", "display_name": "Jordan Benge", "link": "https://stackoverflow.com/users/3507670/jordan-benge"}, "edited": false, "score": 0, "creation_date": 1424403860, "post_id": 28589984, "comment_id": 45544806, "body": "@Shika Append your additional info to your post."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 836, "user_id": 3507670, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/hNULU.jpg?s=128&g=1", "display_name": "Jordan Benge", "link": "https://stackoverflow.com/users/3507670/jordan-benge"}, "edited": false, "score": 0, "creation_date": 1424404246, "post_id": 28589984, "comment_id": 45544898, "body": "@Shika BTW: your trouble about FLT_DECIMAL_DIG is a concern.  For now, just use <code>case &#39;F&#39; : printf(&quot;float      %.*e\\n&quot;, 9 - 1, u.f); break;</code>"}, {"owner": {"reputation": 836, "user_id": 3507670, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/hNULU.jpg?s=128&g=1", "display_name": "Jordan Benge", "link": "https://stackoverflow.com/users/3507670/jordan-benge"}, "edited": false, "score": 0, "creation_date": 1424405495, "post_id": 28589984, "comment_id": 45545197, "body": "uh...I would append the info to the post...but my code randomly added thousands of random symbols...And i have no idea why...So i&#39;m re-writing everything..I&#39;ll try and do your fix and see if it works that way."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1424280606, "creation_date": 1424280606, "answer_id": 28589984, "question_id": 28589302, "link": "https://stackoverflow.com/questions/28589302/how-to-convert-a-binary-string-into-twos-complement-and-ieee-in-c/28589984#28589984", "title": "how to convert a binary string into two&#39;s complement and IEEE in C", "body": "<p>Read the convert the \"binary string\" into a <code>long</code> using <code>strtol(...,..., 2)</code>.  Union the resultant <code>long</code> with a <code>float</code> and print the desired format.</p>\n\n<p>When printing a <code>float</code>, be certain to print with enough precision to provide meaning results: <code>\"%f\"</code> will not do.</p>\n\n<pre><code>#include &lt;float.h&gt;\n#ifndef FLT_DECIMAL_DIG\n#define FLT_DECIMAL_DIG 9\n#endif\n\nvoid display(const char *binary_string, char mode) {\n  union {\n    long i;\n    float f;\n  } u;\n  errno = 0;\n  char *endptr;\n  u.i = strtol(binary_string, &amp;endptr, 2);\n  if (errno || endptr == binary_string) {\n    printf(\"Bad binary string '%s'\\n\", binary_string);\n  }\n  switch (mode) {\n    case 'I' : printf(\"32-bit 2's %ld\\n\", u.i); break;\n    case 'F' : printf(\"float      %.*e\\n\", FLT_DECIMAL_DIG - 1, u.f); break;\n    default: printf(\"Bad mode '%c'\\n\", mode);\n  }\n}\n\n\ndisplay(\"01000000010010001111010111000011\", 'I'); // 1078523331\ndisplay(\"01000000010010001111010111000011\", 'F'); // 3.14000010e+00\n</code></pre>\n\n<p>Assumptions: <code>sizeof(long) == sizeof(float)</code>.</p>\n"}], "owner": {"reputation": 836, "user_id": 3507670, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/hNULU.jpg?s=128&g=1", "display_name": "Jordan Benge", "link": "https://stackoverflow.com/users/3507670/jordan-benge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 710, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1424280606, "creation_date": 1424278698, "last_edit_date": 1424280279, "question_id": 28589302, "link": "https://stackoverflow.com/questions/28589302/how-to-convert-a-binary-string-into-twos-complement-and-ieee-in-c", "title": "how to convert a binary string into two&#39;s complement and IEEE in C", "body": "<p>SO I have been tasked to write a program that scans in two 32-character binary strings from the user, which will always be 32 characters long. After reading the numbers in, i'm supposed to ask the user which format they would like the strings to be represented in either Two's complement, or IEEE floating point format. The format of the string will determine the numerical value of the string. After which, it is going to be used in a simple math problem, and converted to Octal, Decimal and Hex respectively. </p>\n\n<p>What I am not sure about, is how to convert the 32-character string into two's complement and IEEE floating point respectively. I've tried looking up how to do so, but all of the explanations are above and beyond my understanding of C (which is relatively new to me). </p>\n\n<p>This is a sample binary string in its respective representations:</p>\n\n<p>Binary String: 01000000010010001111010111000011</p>\n\n<p>Format: (Int) for Twos complement, or (Float) for floating-point.</p>\n\n<p>Twos complement representation: 1078523331</p>\n\n<p>Floating-point representation: 3.14</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 454, "user_id": 4552288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ce7e986bb51499855b41f5cde90f6d7?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4552288/matt"}, "edited": false, "score": 0, "creation_date": 1424279414, "post_id": 28589274, "comment_id": 45485817, "body": "Just an (off-topic) note for you: this is not the standard in <b>C++</b> - you&#39;d want to use a vector."}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1424278691, "creation_date": 1424278691, "answer_id": 28589298, "question_id": 28589274, "link": "https://stackoverflow.com/questions/28589274/memory-allocation-of-variable-arrays-in-c/28589298#28589298", "title": "Memory allocation of variable arrays in c", "body": "<p>It is allocated on run time but on stack not on heap.</p>\n"}, {"tags": [], "owner": {"reputation": 18603, "user_id": 4526187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YP5so.jpg?s=128&g=1", "display_name": "JuniorCompressor", "link": "https://stackoverflow.com/users/4526187/juniorcompressor"}, "is_accepted": false, "score": 2, "last_activity_date": 1424278704, "creation_date": 1424278704, "answer_id": 28589306, "question_id": 28589274, "link": "https://stackoverflow.com/questions/28589274/memory-allocation-of-variable-arrays-in-c/28589306#28589306", "title": "Memory allocation of variable arrays in c", "body": "<p>Since the size <code>n</code> of the array is defined at runtime, then also the allocation happens in the runtime. </p>\n\n<p>The memory is allocated from the stack, which is faster than allocating from the heap. But how much memory you can reserve is much lower.</p>\n"}], "owner": {"reputation": 21, "user_id": 4555502, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4CBMhYkVZfg/AAAAAAAAAAI/AAAAAAAAABU/3OJsgne8LTI/photo.jpg?sz=128", "display_name": "Ravneet Taneja", "link": "https://stackoverflow.com/users/4555502/ravneet-taneja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1424278704, "creation_date": 1424278613, "question_id": 28589274, "link": "https://stackoverflow.com/questions/28589274/memory-allocation-of-variable-arrays-in-c", "title": "Memory allocation of variable arrays in c", "body": "<p>Is the memory to variable arrays allocated during run-time or compile-time in c? </p>\n\n<pre><code>int n; \nprintf(\"Enter size of the array: \");\nscanf(\"%d\",&amp;n);\n\nint a[n];\nfor(int i=0; i&lt;n; i++)\n   {\n      a[i] = 0;\n   }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1424278476, "post_id": 28589174, "comment_id": 45485165, "body": "It&#39;s C. <code>*</code> = pointer or multiplication, depending on usage. in this case, it&#39;s a pointer."}, {"owner": {"reputation": 9308, "user_id": 235700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ab02b76dcfedbe47d2b7335a6277f3?s=128&d=identicon&r=PG", "display_name": "slugonamission", "link": "https://stackoverflow.com/users/235700/slugonamission"}, "edited": false, "score": 1, "creation_date": 1424278480, "post_id": 28589174, "comment_id": 45485168, "body": "It means to dereference the pointer (i.e. to access what the pointer is pointing at). This example will be from a simple version of <code>memcpy</code>."}, {"owner": {"reputation": 1828, "user_id": 2584754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Q3gFD.jpg?s=128&g=1", "display_name": "sturcotte06", "link": "https://stackoverflow.com/users/2584754/sturcotte06"}, "edited": false, "score": 0, "creation_date": 1424278547, "post_id": 28589174, "comment_id": 45485210, "body": "ok so <code>*src</code> is the same thing as <code>src[0]</code>?"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1424278661, "post_id": 28589174, "comment_id": 45485299, "body": "@sturcotte06 Yes, they are the same thing."}, {"owner": {"reputation": 1828, "user_id": 2584754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Q3gFD.jpg?s=128&g=1", "display_name": "sturcotte06", "link": "https://stackoverflow.com/users/2584754/sturcotte06"}, "edited": false, "score": 0, "creation_date": 1424278978, "post_id": 28589174, "comment_id": 45485543, "body": "Ok thank you. I don&#39;t know why my question got down rated, it&#39;s actually hard to find an answer to this question when all you have is a line of code and no word to describe it."}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1424279612, "post_id": 28589174, "comment_id": 45485950, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/2094666/pointers-in-c-when-to-use-the-ampersand-and-the-asterisk\">Pointers in C: when to use the ampersand and the asterisk?</a>"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1424280351, "post_id": 28589174, "comment_id": 45486438, "body": "@sturcotte06: You&#39;re question is getting downvoted because it can be answered by looking at any basic C reference (either online or on paper)."}, {"owner": {"reputation": 1828, "user_id": 2584754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Q3gFD.jpg?s=128&g=1", "display_name": "sturcotte06", "link": "https://stackoverflow.com/users/2584754/sturcotte06"}, "edited": false, "score": 0, "creation_date": 1424280594, "post_id": 28589174, "comment_id": 45486613, "body": "If reading a reference was always the answer, then stackoverflow wouldn&#39;t exist. It&#39;s to dodge the hassle of reading 40 pages of a document to find what we want that we ask questions."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1424292191, "post_id": 28589174, "comment_id": 45493603, "body": "@sturcotte06: ...aaaaand that&#39;s why your question is getting downvoted."}], "answers": [{"comments": [{"owner": {"reputation": 1828, "user_id": 2584754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Q3gFD.jpg?s=128&g=1", "display_name": "sturcotte06", "link": "https://stackoverflow.com/users/2584754/sturcotte06"}, "edited": false, "score": 0, "creation_date": 1424279418, "post_id": 28589275, "comment_id": 45485820, "body": "It&#39;s unrelated, but this code would be faster (on 64bit architecture) if dest and src were casted to long int* before the loop, right?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 1828, "user_id": 2584754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Q3gFD.jpg?s=128&g=1", "display_name": "sturcotte06", "link": "https://stackoverflow.com/users/2584754/sturcotte06"}, "edited": false, "score": 0, "creation_date": 1424279760, "post_id": 28589275, "comment_id": 45486066, "body": "@sturcotte06 This specific piece of code expects the pointers to point to <code>char</code>, so that it could detect null terminator, which is a single char <code>&#39;\\0&#39;</code>. An implementation of <code>memcpy</code> would benefit from a cast to <code>int</code> or <code>long long</code>, but then one would have to be careful not to &quot;overshoot&quot; the end of the buffer, and also to avoid dereferencing at an odd address (some architectures would trap that, and abort the program)."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1424278618, "creation_date": 1424278618, "answer_id": 28589275, "question_id": 28589174, "link": "https://stackoverflow.com/questions/28589174/in-c-what-does-the-asterisk-means-on-an-already-defined-variable/28589275#28589275", "title": "In C, what does the asterisk means on an already defined variable", "body": "<p>Here is a very common context<sup>*</sup> for an operation like this:</p>\n\n<pre><code>void strcpy(char *dest, const char *src) {\n    while (*dest++ = *src++)\n        ;\n}\n</code></pre>\n\n<p>This is an implementation of C string copying algorithm. An asterisk in each expression means <em>pointer dereference</em>, i.e. obtaining the value stored at the location pointed to by the pointer.</p>\n\n<p><sup>*</sup> Second edition of <a href=\"http://en.wikipedia.org/wiki/The_C_Programming_Language\" rel=\"nofollow\">K&amp;R</a>, page 88.</p>\n"}, {"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 0, "last_activity_date": 1424278722, "creation_date": 1424278722, "answer_id": 28589312, "question_id": 28589174, "link": "https://stackoverflow.com/questions/28589174/in-c-what-does-the-asterisk-means-on-an-already-defined-variable/28589312#28589312", "title": "In C, what does the asterisk means on an already defined variable", "body": "<p><strong>Easy to understand version</strong></p>\n\n<pre><code>void strcpy(char* dest, char* src)\n{\n    while(*src != '\\0')  // While the src-character is not at the end of the string\n    {\n        *dest = *src; // Copy one character from the src buffer to the destination bufffer\n        src++;        // Move the src to the next character\n        dest++;       // Move the dest to the next character.\n    }\n}\n</code></pre>\n\n<p><strong>Short Version</strong></p>\n\n<pre><code>void strcpy(char* dest, char* src)\n{\n    while(*src) *dest++ = *src++;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1424278748, "creation_date": 1424278748, "answer_id": 28589320, "question_id": 28589174, "link": "https://stackoverflow.com/questions/28589174/in-c-what-does-the-asterisk-means-on-an-already-defined-variable/28589320#28589320", "title": "In C, what does the asterisk means on an already defined variable", "body": "<p>The asterisk, like many other symbols in C, have multiple meanings depending on context. In a variable declaration it means the variable is a pointer, used in an expression like this it <em>dereferences</em> a pointer, that is it gets the value of what the pointer points to.</p>\n\n<p>Then you have the postfix increment operator <code>++</code> which returns the value of the expression and then increases it, in this case it returns the pointer and then increases the pointer.</p>\n\n<p>So what e.g. <code>*src++</code> does is dereerence the pointer <code>src</code> to get its value, then increase the pointer (so it points to next location in memory).</p>\n\n<p>As for the whole expression <code>*dest++ = *src++</code> it simply copies the value pointed at by <code>src</code> to the value pointed at by <code>dest</code> then increase respective pointer. In short, it copies from <code>src</code> to <code>dest</code>. You will most likely see this in a loop.</p>\n"}, {"tags": [], "owner": {"reputation": 13430, "user_id": 622571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41523c6db74e0f187eae731a6871a320?s=128&d=identicon&r=PG", "display_name": "Richard Schwartz", "link": "https://stackoverflow.com/users/622571/richard-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1424279142, "creation_date": 1424279142, "answer_id": 28589475, "question_id": 28589174, "link": "https://stackoverflow.com/questions/28589174/in-c-what-does-the-asterisk-means-on-an-already-defined-variable/28589475#28589475", "title": "In C, what does the asterisk means on an already defined variable", "body": "<p>In long-winded form that avoids terms like \"dereferencing\", you can read this line as </p>\n\n<ul>\n<li>src is a pointer containing the address of a memory location, which is presumably pointing to an element within an array of values of a specific type.</li>\n<li>*src is the value stored in that specific location.</li>\n<li>dest is also a pointer containing the address of a memory location, which is also presumably an element within an array of values of a specific type (which should be compatible with the type pointed to by src).</li>\n<li>*dest is the value stored in that specific location.</li>\n<li>Assign the value from the memory location pointed to by src to the memory location pointed to by dest; then increment both the src and  dest pointer values by the size of their respective types, advancing both pointers to the next elements in their respective arrays.</li>\n</ul>\n"}], "owner": {"reputation": 1828, "user_id": 2584754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Q3gFD.jpg?s=128&g=1", "display_name": "sturcotte06", "link": "https://stackoverflow.com/users/2584754/sturcotte06"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 28589275, "answer_count": 4, "score": -2, "last_activity_date": 1424279142, "creation_date": 1424278364, "question_id": 28589174, "link": "https://stackoverflow.com/questions/28589174/in-c-what-does-the-asterisk-means-on-an-already-defined-variable", "title": "In C, what does the asterisk means on an already defined variable", "body": "<p>I saw some C code, and I'm not sure what it does.</p>\n\n<pre><code>*dest++ = *src++;\n</code></pre>\n\n<p>I do not have this code in a context unfortunately (I was reading an article), but I assume src and dest were defined earlier. So I know an asterisk on a variable definition means a pointer to the memory location of that variable. But what does the asterisk mean in the context of a computation?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 2, "creation_date": 1424278292, "post_id": 28589129, "comment_id": 45485034, "body": "why tag the question with c++ if you need help reading in c?"}, {"owner": {"reputation": 29, "user_id": 4580539, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/137e54c0f2feb4a199194ea9f5d94110?s=128&d=identicon&r=PG&f=1", "display_name": "Maria Margarida Brito", "link": "https://stackoverflow.com/users/4580539/maria-margarida-brito"}, "reply_to_user": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 0, "creation_date": 1424278333, "post_id": 28589129, "comment_id": 45485061, "body": "C/C++  i think people that understand C++ can help me to."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1424278362, "post_id": 28589129, "comment_id": 45485081, "body": "I think you need to parse the file with <code>strtok()</code> becase there is no way to write a <code>fscanf()</code> format string that will always work, so <code>fgets()</code> + <code>strtok()</code> should do it."}, {"owner": {"reputation": 29, "user_id": 4580539, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/137e54c0f2feb4a199194ea9f5d94110?s=128&d=identicon&r=PG&f=1", "display_name": "Maria Margarida Brito", "link": "https://stackoverflow.com/users/4580539/maria-margarida-brito"}, "edited": false, "score": 0, "creation_date": 1424278416, "post_id": 28589129, "comment_id": 45485115, "body": "can you give me some example or one site where i can read more about it?"}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 0, "creation_date": 1424278449, "post_id": 28589129, "comment_id": 45485140, "body": "Sure. <a href=\"http://en.cppreference.com/w/c/string/byte/strtok\" rel=\"nofollow noreferrer\">Right here</a>."}, {"owner": {"reputation": 29, "user_id": 4580539, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/137e54c0f2feb4a199194ea9f5d94110?s=128&d=identicon&r=PG&f=1", "display_name": "Maria Margarida Brito", "link": "https://stackoverflow.com/users/4580539/maria-margarida-brito"}, "edited": false, "score": 0, "creation_date": 1424278512, "post_id": 28589129, "comment_id": 45485183, "body": "Thanks mate, i will read it"}, {"owner": {"reputation": 1510, "user_id": 3382783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b07917e0748ba571376db44722c8c0b?s=128&d=identicon&r=PG", "display_name": "Iban Cereijo", "link": "https://stackoverflow.com/users/3382783/iban-cereijo"}, "edited": false, "score": 0, "creation_date": 1424278556, "post_id": 28589129, "comment_id": 45485217, "body": "ugly fix: just add a 0 at the left of every line, it&#39;s innocuous for sscanf."}], "answers": [{"tags": [], "owner": {"reputation": 7120, "user_id": 168610, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JGCpk.png?s=128&g=1", "display_name": "davbryn", "link": "https://stackoverflow.com/users/168610/davbryn"}, "is_accepted": true, "score": 1, "last_activity_date": 1424279441, "creation_date": 1424279441, "answer_id": 28589574, "question_id": 28589129, "link": "https://stackoverflow.com/questions/28589129/need-help-reading-file-in-c-language/28589574#28589574", "title": "Need help reading file in C language", "body": "<p>This place is getting tiring; ignore the down votes for a reasonable question...   </p>\n\n<p>Basically, this is a problem that requires you to <a href=\"http://en.wikipedia.org/wiki/Parsing\" rel=\"nofollow\">parse</a> the input string and intelligently convert the data. <a href=\"http://www.cplusplus.com/reference/cstdio/fscanf/\" rel=\"nofollow\">fscanf</a> will not give this functionality to you for free so you will need to <em>tokenise</em> the input (using the suggested <code>strtok()</code>) and process the result of that operation. </p>\n\n<p>If you aren't aware of the terminology, that file format is commonly referred to as a <em>CSV</em> (or <em>Comma Separated Values</em>), so you might find some useful resources if you search for information using the phrases <em>C parsing</em>, <em>C CSV parsing</em>, <em>C tokenization</em> </p>\n"}], "owner": {"reputation": 29, "user_id": 4580539, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/137e54c0f2feb4a199194ea9f5d94110?s=128&d=identicon&r=PG&f=1", "display_name": "Maria Margarida Brito", "link": "https://stackoverflow.com/users/4580539/maria-margarida-brito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 28589574, "answer_count": 1, "score": -3, "last_activity_date": 1424279441, "creation_date": 1424278234, "last_edit_date": 1424278426, "question_id": 28589129, "link": "https://stackoverflow.com/questions/28589129/need-help-reading-file-in-c-language", "title": "Need help reading file in C language", "body": "<p>i am having  a problem when i am trying to read a file in C language.</p>\n\n<p>This is my file .txt format</p>\n\n<pre><code>1,325.1.1, ,,,,4,5.0,9.0,10.0\n2-5,354.1.1, ,,,,3,5.0,10.0,9.0\n,111.1.1, ,,,,3,4.0,8.0,6.0\n,646.1.1, ,,,,3,3.0,7.0,9.0\n,132.1.1, ,,,,3,3.0,7.0,6.0\n6-7,234.1.1, ,,,,2,4.0,9.0,5.0\n,321.1.1, ,,,,2,4.0,7.0,5.0\n8-11,567.1.1, ,,,,1,5.0,8.0,1.0\n,123.1.1, ,,,,1,4.0,8.0,4.0\n,324.1.1, ,,,,1,4.0,8.0,4.0\n,456.1.1, ,,,,1,4.0,8.0,1.0\n12,666.1.1, ,,,,0,3.0,7.0,0.0\n</code></pre>\n\n<p>I can read the first and second line well because they start by an integer, but when i go to the third line i can't read it because it starts by a comma.\nCan you guys help me solving this problem?</p>\n\n<p>Here is my code to read all the lines and save them on an array of a structur.</p>\n\n<pre><code>int main()\n{\n    FILE *fp;\n    INFORMACAO *inf;\n    if((inf=(INFORMACAO *)malloc(NMAX_INFORMACAO*sizeof(INFORMACAO)))==NULL) return 0;\n    fp=fopen(\"111.1.1.txt\",\"r\");\n    if(fp == NULL)\n    {\n        printf(\"\\n[ERROR]File not Found\");\n        return (0);\n    }\n    else\n    {\n        while(!feof(fp))\n        {\n            fscanf(fp,\"%d,%d.%d.%d, ,,,,%d,%f,%f,%f\\n\",&amp;inf[0].id_escola,&amp;inf[0].ciclo,&amp;inf[0].jogo,&amp;inf[0].pontuacao,&amp;inf[0].desempate1,&amp;inf[0].desempate2,&amp;inf[0].desempate3);\n            i++;\n        }\n    }\n</code></pre>\n"}, {"tags": ["c", "embedded"], "comments": [{"owner": {"reputation": 2316, "user_id": 469006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3855250cd4b053ce9204c773246196b?s=128&d=identicon&r=PG", "display_name": "D Krueger", "link": "https://stackoverflow.com/users/469006/d-krueger"}, "edited": false, "score": 1, "creation_date": 1424283083, "post_id": 28589106, "comment_id": 45488115, "body": "See <a href=\"http://stackoverflow.com/questions/13870489/is-inline-asm-part-of-the-ansi-c-standard\" title=\"is inline asm part of the ansi c standard\">stackoverflow.com/questions/13870489/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "edited": false, "score": 1, "creation_date": 1424286025, "post_id": 28589277, "comment_id": 45489851, "body": "Oh, sorry maybe i should have worded it more accurately. I&#39;m aware that the part within <code>{ assembler or similar }</code> is not defined by standard C. I meant the whole function-like construct."}, {"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "reply_to_user": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "edited": false, "score": 0, "creation_date": 1424286146, "post_id": 28589277, "comment_id": 45489929, "body": "No, nothing about that is standard either."}], "tags": [], "owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "is_accepted": true, "score": 4, "last_activity_date": 1424278620, "creation_date": 1424278620, "answer_id": 28589277, "question_id": 28589106, "link": "https://stackoverflow.com/questions/28589106/is-an-asm-macro-part-of-standard-c/28589277#28589277", "title": "Is an &quot;asm Macro&quot; part of standard C?", "body": "<p>No, it is not standard C. Anything architecture-specific, like assembly code, is going to be an implementation-specific extension just about by definition.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1424340972, "post_id": 28592419, "comment_id": 45512286, "body": "The syntax is not implementation-defined in C++. The standard (C++03 7.4) specifies the actual syntax for inline asm to be <code>asm &quot;NOP&quot;;</code> and nothing else. The implementation-defined part is only the actual assembly inside the quotation marks, in this case the NOP instruction."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1424371973, "post_id": 28592419, "comment_id": 45532263, "body": "@Lundin : Good point, though that defined syntax does not cover the syntax in the question nor the input/output/clobber specification syntax in GCC, and historically there has been little standardisation - expect compilers to vary is my advice.  VC++ uses a different syntax introduced by <code>__asm</code>, which is the more correct form for non-standard compiler extensions."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 0, "last_activity_date": 1424288388, "creation_date": 1424288388, "answer_id": 28592419, "question_id": 28589106, "link": "https://stackoverflow.com/questions/28589106/is-an-asm-macro-part-of-standard-c/28592419#28592419", "title": "Is an &quot;asm Macro&quot; part of standard C?", "body": "<p>The <code>asm</code> keyword is not standard in C, it is reserved in C++, but in both cases the the syntax is implementation specific as described <a href=\"http://en.cppreference.com/w/cpp/language/asm\" rel=\"nofollow\">here</a>:</p>\n\n<blockquote>\n  <p><em>asm-declaration</em> gives the ability to embed assembly language source code within a C++ program. This declaration is conditionally-supported and implementation defined, meaning that it may not be present and, even when provided by the implementation, it does not have a fixed meaning.</p>\n</blockquote>\n\n<p>It's use to define a macro is new to me and interesting however. </p>\n"}], "owner": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 28589277, "answer_count": 2, "score": 3, "last_activity_date": 1424288388, "creation_date": 1424278177, "last_edit_date": 1424286111, "question_id": 28589106, "link": "https://stackoverflow.com/questions/28589106/is-an-asm-macro-part-of-standard-c", "title": "Is an &quot;asm Macro&quot; part of standard C?", "body": "<p>We develop code for embedded PowerPC architectures.</p>\n\n<p>Our compiler supports something called asm Macros. </p>\n\n<p>Here an excerpt from the handbook:</p>\n\n<blockquote>\n  <p><strong>asm Macro Syntax</strong></p>\n  \n  <p>An asm macro definition looks much like a function definition, including a return type and parameter list, and function body.</p>\n  \n  <p>The syntax is:</p>\n\n<pre><code>asm [volatile] [return-type] macro-name ( [ parameter-list ] )\n {\n % storage-mode-list (must start in column 1)\n ! register-list     (\u201c!\u201d must be first non-whitespace)\n   asm-code      \n } (must start in column 1\n</code></pre>\n</blockquote>\n\n<p>Is this standard C? My compiler does not list this as an extension in his handbook.</p>\n\n<p>Clarification after first answer:</p>\n\n<p>I'm aware the part withen <code>{ }</code> is not defined by standard C. I meant the function like construct after <code>asm</code> and before the closing <code>)</code>.</p>\n"}, {"tags": ["c", "function", "vector"], "answers": [{"comments": [{"owner": {"reputation": 3873, "user_id": 4143292, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/dRHrc.png?s=128&g=1", "display_name": "Federico Gentile", "link": "https://stackoverflow.com/users/4143292/federico-gentile"}, "edited": false, "score": 0, "creation_date": 1424278283, "post_id": 28589122, "comment_id": 45485028, "body": "is there any way to write it as o=mul(r,o)?"}, {"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "reply_to_user": {"reputation": 3873, "user_id": 4143292, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/dRHrc.png?s=128&g=1", "display_name": "Federico Gentile", "link": "https://stackoverflow.com/users/4143292/federico-gentile"}, "edited": false, "score": 0, "creation_date": 1424278309, "post_id": 28589122, "comment_id": 45485046, "body": "No, you can never assign a value to an array in C ever."}], "tags": [], "owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "is_accepted": true, "score": 2, "last_activity_date": 1424278215, "creation_date": 1424278215, "answer_id": 28589122, "question_id": 28589088, "link": "https://stackoverflow.com/questions/28589088/how-to-pass-vectors-to-a-function-in-c/28589122#28589122", "title": "How to pass vectors to a function in C", "body": "<ol>\n<li><p>In C it's called an \"array\", not a \"vector\".</p></li>\n<li><p>You can't assign a value to an array.</p></li>\n<li><p>You have <code>mul</code> declared as returning a <code>float</code>, but it doesn't return anything - change that to <code>void</code>.</p></li>\n<li><p>When you call <code>mul</code>, since it doesn't return anything, you don't need the <code>o=</code>. Just <code>mul(r,o)</code>, will be fine.</p></li>\n<li><p>An array is <em>not</em> a pointer. That said, an array does decay into a pointer to its first element in most contexts, including the function call you're using it in. Likewise, the <code>float r[], float o[]</code> in your <code>mul</code> function signature is just syntactic sugar for <code>float *r, float *o</code>.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": false, "score": 0, "last_activity_date": 1424278379, "creation_date": 1424278379, "answer_id": 28589177, "question_id": 28589088, "link": "https://stackoverflow.com/questions/28589088/how-to-pass-vectors-to-a-function-in-c/28589177#28589177", "title": "How to pass vectors to a function in C", "body": "<pre><code>o=mul(r,o);\n</code></pre>\n\n<p>assigns <code>o</code> to the return value of the <code>mul</code> function. But <code>mul</code> has no return value--it has no return statement at all, nor does it need one, because it operates directly on the arrays passed to it. Instead, just declare it <code>void</code>:</p>\n\n<pre><code>void mul(float r[], float o[]) {\n    . . .\n</code></pre>\n\n<p>Then call it without the assignment:</p>\n\n<pre><code>mul(r, o);\n</code></pre>\n"}], "owner": {"reputation": 3873, "user_id": 4143292, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/dRHrc.png?s=128&g=1", "display_name": "Federico Gentile", "link": "https://stackoverflow.com/users/4143292/federico-gentile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 28589122, "answer_count": 2, "score": 0, "last_activity_date": 1424278379, "creation_date": 1424278128, "question_id": 28589088, "link": "https://stackoverflow.com/questions/28589088/how-to-pass-vectors-to-a-function-in-c", "title": "How to pass vectors to a function in C", "body": "<p>I wrote a simple C program because I just got started learning how to program.\nHere is the main.c file:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n\nfloat mul(float r[],float o[]){\n  o[0] = r[0]*11;\n  o[1] = r[1]*22;\n  o[2] = r[2]*33;\n}\n//==============================================================\nint main(void){\nfloat r[3];\nr[0]=1;r[1]=2;r[2]=3;\nfloat o[3];\n\no=mul(r,o);\n\nreturn 0;\n}`\n</code></pre>\n\n<p>My goal is to fill vector <em>o</em> by using the function <em>mul</em>; I am required to keep the definition of the variables as it is; the only thing that I am supposed to modify is the function.\nWhen I run it by typing <code>gcc main.c</code> I get an error message like this:</p>\n\n<pre><code>error: incompatible types when assigning to type \u2018float[3]\u2019 from type \u2018float\u2019\no=mul(r,o);\n</code></pre>\n\n<p>And I have no Idea how to fix it. What am I supposed to change in my little code? as far as I learned I should pass to the function the pointers referred to the vectors but it should be the same thing of what I have done since the vector name is the pointer to the vector itself.</p>\n\n<p>Thanks for your help</p>\n"}, {"tags": ["c", "gcc", "compilation", "linker", "ld"], "comments": [{"owner": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 2, "creation_date": 1424277464, "post_id": 28588661, "comment_id": 45484525, "body": "It depends on how bar is compiled... If you build with -fvisibility=hidden you don&#39;t need to do anything but link it in."}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1424277585, "post_id": 28588661, "comment_id": 45484592, "body": "I&#39;m confused. How is <code>bar</code> exposed? If the library user code only <code>#includes</code> <code>foo.h</code>, it will only be able to call the functions declared there. The functions that call <code>bar()</code> should be defined in <code>foo.c</code>, so as long as <code>foo.h</code> doesn&#39;t include <code>bar.h</code>, everything should be fine. What am I missing?"}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "reply_to_user": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1424277755, "post_id": 28588661, "comment_id": 45484687, "body": "@AustinMullins: The problem is at the linker level. The linker doesn&#39;t look at <code>.h</code> files. It looks directly at binaries."}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1424277848, "post_id": 28588661, "comment_id": 45484753, "body": "Right. That&#39;s what I&#39;m saying. How is <code>bar</code> exposed to user code?"}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "reply_to_user": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 1, "creation_date": 1424278319, "post_id": 28588661, "comment_id": 45485051, "body": "@AustinMullins: It is in the library. If you have a non-static <code>bar</code> in your code and you link with my library, there will be a linker conflict."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 1, "creation_date": 1424281078, "post_id": 28588661, "comment_id": 45486913, "body": "for a dynamic library, you could try to use the <code>ld</code> option <code>-- exclude-symbols symbol,symbol,...</code> (just saw it in the man pages, I haven&#39;t tried it)"}], "answers": [{"comments": [{"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1424277379, "post_id": 28588764, "comment_id": 45484459, "body": "The problem is <code>bar.o</code> might not be compiled from C, or may be compiled from C but with different options. In either case, your workaround doesn&#39;t work."}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1424277485, "post_id": 28588764, "comment_id": 45484538, "body": "What are the &quot;specific tools&quot;?"}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1424278794, "post_id": 28588764, "comment_id": 45485409, "body": "That&#39;s a nice obfuscation but what does prevent a module outside the library to call <code>bar_functions-&gt;bar(x)</code> the same way <code>foo.c</code> module does it? <code>bar_functions</code> object will still have external linkage."}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1424279117, "post_id": 28588764, "comment_id": 45485622, "body": "I don&#39;t have a <code>bar.c</code>, I have a <code>bar.o</code>. Your approach still exposes <code>bar_functions</code>, which is not any different from exposing <code>bar</code>."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1424279119, "post_id": 28588764, "comment_id": 45485623, "body": "@ouah If <code>bar.h</code> is not available to the user, they would have to reverse engineer the contents of <code>bar_functions</code>. Of course they can do that, but I would argue that similarly they could reverse engineer the contents of the library itself and create their own pointer to <code>bar()</code>\u2026"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1424279302, "post_id": 28588764, "comment_id": 45485748, "body": "@Matt Exporting a pointer to a <code>struct</code> of unknown composition is definitely different from exporting a function <code>bar</code>, especially in terms of what it signals to the user of the library. But if you only have <code>bar.o</code>, which you can not edit the source of, then clearly you can no longer control whether <code>bar</code> is exported or not\u2026 Your only choice seems to be some means outside of C, i.e., some linker tool."}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1424279367, "post_id": 28588764, "comment_id": 45485788, "body": "@Arkku: The problem is not that I don&#39;t want people calling it, the problem is I don&#39;t want the symbol exposed, and your method just changes what the symbol points to (data rather than instructions)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1424280378, "post_id": 28588764, "comment_id": 45486463, "body": "Since tags indicate that the GNU toolchain is in use, the desired result can be obtained by declaring function bar with <code>__attribute__ ((__visibility__ (&quot;hidden&quot;)))</code>.  This produces exactly the result requested, even with <code>bar()</code> compiled separately, for targets that support it (which include ELF).  Although support for this kind of linkage is standard in ELF, support for declaring it in C is a GCC extension."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1424280875, "post_id": 28588764, "comment_id": 45486796, "body": "@JohnBollinger I actually edited my answer to include a mention of the attribute just minutes before your comment, but I&#39;m not sure if it&#39;s possible to somehow specify this attribute for the function <code>bar</code> if you only have <code>bar.o</code> and not its source code (which might be non-C, interpreting the OP&#39;s question strictly). So can you somehow apply the attribute externally (e.g., in a header you can create)?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1424281091, "post_id": 28588764, "comment_id": 45486921, "body": "@Arkku, to the best of my knowledge, that attribute needs to be associated with <code>bar()</code>s declaration during that function&#39;s own compilation for it to be effective.  It affects details of the object file.  It might be possible to modify the existing object file to change the symbol&#39;s visibility, but that&#39;s out of my depth."}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1424281913, "post_id": 28588764, "comment_id": 45487403, "body": "@JohnBollinger: Do you know if there is a way to do this in a way that&#39;s portable across Linux, OS X, and Cygwin?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1424282920, "post_id": 28588764, "comment_id": 45488010, "body": "@Matt, I do not know.  The <code>__attribute__</code> approach is the best idea I have if you&#39;re committed to GCC, but I am uncertain whether it is effective on OS X or Cygwin."}], "tags": [], "owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "is_accepted": true, "score": 8, "last_activity_date": 1424284738, "last_edit_date": 1424284738, "creation_date": 1424277287, "answer_id": 28588764, "question_id": 28588661, "link": "https://stackoverflow.com/questions/28588661/how-can-i-make-a-function-have-library-internal-linkage/28588764#28588764", "title": "How can I make a function have library-internal linkage?", "body": "<p>With standard C you can only either export the function or not, there is no \u201cexport only to these files\u201d option. So basically you would have to move <code>bar()</code> to <code>foo.c</code> and declare it as <code>static</code>. If you wish to keep the file separate, an ugly hack would be to <code>#include</code> it from <code>foo.c</code> (and not compile <code>bar.o</code>)\u2026</p>\n\n<p>With tools outside the scope of standard C you can remove the public export from the library at or after linking. Some linker solutions are shown below, and with GCC and clang (in cases where you can modify the code) you can hide a function by prefixing it with the non-standard attribute: <code>__attribute__ ((visibility (\"hidden\")))</code> \u2013 the compilation-unit-wide equivalent of this would be the option <code>-fvisibility=hidden</code> when compiling, e.g., <code>bar.c</code>.</p>\n\n<h2>C workaround</h2>\n\n<p>If you can edit the C code freely, a workaround in standard C would be to make <code>bar()</code> <code>static</code> within <code>bar.c</code> and deliver a function pointer to it for use in <code>foo()</code> through some means, e.g., export a pointer to a <code>struct</code> containing the function pointer (and any other \u201cprivate\u201d data), and do not expose the details of the <code>struct</code> outside of a private header used only by your library.</p>\n\n<p>For example:</p>\n\n<p>In <code>bar.h</code> (private, do not share with the library's user):</p>\n\n<pre><code>struct bar_private_struct { int (*bar)(int); };\nextern struct bar_private_struct *bar_functions;\n</code></pre>\n\n<p>In <code>bar.c</code>:</p>\n\n<pre><code>#include \"bar.h\"\nstatic int bar (int x) { /* \u2026 */ return x; }\nstatic struct bar_private_struct functions = { bar };\nstruct bar_private_struct *bar_functions = &amp;functions;\n</code></pre>\n\n<p>In <code>foo.c</code>:</p>\n\n<pre><code>#include \"bar.h\"\nint foo (int x) { x = bar_functions-&gt;bar(x); /* \u2026 */ }\n</code></pre>\n\n<p>In this solution there will be an exported pointer called <code>bar_functions</code>, but no details about the data/functions pointed to are revealed through this export. Without access to <code>bar.h</code> the user of the library would have to reverse engineer the contents to call the \u201cprivate\u201d functions correctly. In case of multiple \u201cprivate\u201d functions this approach can also condense them to a single exported pointer, removing clutter from the list of exports.</p>\n\n<h2>Linker solutions</h2>\n\n<p>Exploring specific linkers, I found a way to exclude specific symbols from a dynamic library:</p>\n\n<p>With GNU <code>ld</code>, create a version script, such as <code>libfoobar.version</code>:</p>\n\n<pre><code>FOOBAR {\n    global: *;\n    local: bar;\n};\n</code></pre>\n\n<p>Invocation through <code>gcc</code>:</p>\n\n<pre><code>gcc -shared -o libfoobar.so foo.o bar.o -Wl,-version-script=libfoobar.version\n</code></pre>\n\n<p>With the <code>clang</code> <code>ld</code> (on OS X) create a list of unexported symbols, such as <code>unexported</code> (one symbol per line):</p>\n\n<pre><code>_bar\n</code></pre>\n\n<p>Invocation through <code>clang</code>:</p>\n\n<pre><code>clang -shared -o libfoobar.dylib foo.o bar.o -Wl,-unexported_symbols_list,unexported\n</code></pre>\n\n<p>In both cases the function <code>bar</code> is hidden and externally uncallable but <code>foo</code> remains operational (and calls <code>bar</code> internally), even though both had the same external visibility in their respective source (and object) files.</p>\n\n<p>Test code, <code>foo.c</code>:</p>\n\n<pre><code>int bar(int x);\nint foo (int x) { return bar(x) * 3; }\n</code></pre>\n\n<p><code>bar.c</code>:</p>\n\n<pre><code>int bar (int x) { return x * 2; }\n</code></pre>\n\n<p><code>main.c</code> (link against the library before removing the export for <code>bar</code>):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint foo(int x);\nint bar(int x);\nint main () {\n    (void) printf(\"foo(2) = %d\\n\", foo(2));\n    (void) printf(\"bar(2) = %d\\n\", bar(2));\n    return 0;\n}\n</code></pre>\n\n<p>Test case:</p>\n\n<pre><code># before unexporting bar:\n$ nm -gU libfoobar.dylib\n0000000000000f70 T _bar\n0000000000000f50 T _foo\n$ ./main\nfoo(2) = 12\nbar(2) = 4\n\n# after unexporting bar:\n$ nm -gU libfoobar.dylib\n0000000000000f50 T _foo\n$ ./main\nfoo(2) = 12\ndyld: lazy symbol binding failed: Symbol not found: _bar\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "edited": false, "score": 0, "creation_date": 1424279238, "post_id": 28588881, "comment_id": 45485695, "body": "I don&#39;t &quot;want&quot; to use different modules. I just have to compile <code>bar.o</code> in a completely different way. And then link it as if it were defined as a static function in <code>foo.c</code>."}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 0, "last_activity_date": 1424277625, "creation_date": 1424277625, "answer_id": 28588881, "question_id": 28588661, "link": "https://stackoverflow.com/questions/28588661/how-can-i-make-a-function-have-library-internal-linkage/28588881#28588881", "title": "How can I make a function have library-internal linkage?", "body": "<p>Functions can only have internal or external linkage.</p>\n\n<p>If you want to use different modules, your functions need to have external linkage so they can be called from one translation unit to the other.</p>\n\n<p>You can use an external function pointer to a static function but of course this will still allow the other modules to call the function through the function pointer. </p>\n"}], "owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1662, "favorite_count": 1, "accepted_answer_id": 28588764, "answer_count": 2, "score": 5, "last_activity_date": 1514730535, "creation_date": 1424277016, "last_edit_date": 1424279143, "question_id": 28588661, "link": "https://stackoverflow.com/questions/28588661/how-can-i-make-a-function-have-library-internal-linkage", "title": "How can I make a function have library-internal linkage?", "body": "<p>For example, if I have two files <code>foo.c</code> and <code>bar.o</code>, and <code>foo.c</code> contains a function <code>foo()</code> that references a function <code>bar()</code> in <code>bar.o</code>:</p>\n\n<pre><code>int foo(int x) { x = bar(x); /* ... */ }\n</code></pre>\n\n<p>How can I compile a static or dynamic library that exposes <code>foo()</code>, but does not expose <code>bar()</code>? In other words, I want <code>bar()</code> to be linked only inside the library.</p>\n"}, {"tags": ["c", "matrix", "row", "operation"], "answers": [{"comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1424278160, "post_id": 28588810, "comment_id": 45484928, "body": "That&#39;s not correct either; the inner dimension must be specified."}], "tags": [], "owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "is_accepted": false, "score": 0, "last_activity_date": 1424277414, "creation_date": 1424277414, "answer_id": 28588810, "question_id": 28588633, "link": "https://stackoverflow.com/questions/28588633/c-error-subscripted-value-is-neither-array-nor-pointer-in-row-echelon-form/28588810#28588810", "title": "C error : &quot;Subscripted value is neither array nor pointer&quot; in row echelon form", "body": "<p>Argument to <code>void printmatrix(float a[])</code> is not correct.</p>\n\n<p>Replace function prototype with:</p>\n\n<p><code>void printmatrix(float a[][])</code></p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 2, "last_activity_date": 1424285212, "last_edit_date": 1424285212, "creation_date": 1424279244, "answer_id": 28589505, "question_id": 28588633, "link": "https://stackoverflow.com/questions/28588633/c-error-subscripted-value-is-neither-array-nor-pointer-in-row-echelon-form/28589505#28589505", "title": "C error : &quot;Subscripted value is neither array nor pointer&quot; in row echelon form", "body": "<p>You've declared <code>printmatrix</code> to take a 1-D array as a parameter, but you're trying to index that parameter as a 2-D array.  That won't work.  </p>\n\n<p>Some options:</p>\n\n<p>Since you're assuming you're always working with a 3x4 matrix, you can simply declare it as such in the function parameter list:</p>\n\n<pre><code>void printmatrix( float a[3][4] )\n{\n  ...\n}\n</code></pre>\n\n<p>However, be aware that within the context of a function parameter declaration, any declaration of the form <code>T a[]</code> or <code>T a[N]</code> will be treated as <code>T *a</code>; as a result, the declaration above will be interpreted as</p>\n\n<pre><code>void printmatrix( float (*a)[4] )\n{\n  ...\n}\n</code></pre>\n\n<p><sup>Edit - had the type of <code>a</code> wrong; that's what I get for posting without testing</sup></p>\n\n<p>In general, you should not hardcode your array dimensions in the <code>printmatrix</code> function; what if you want to display 2 matrices with different dimensions?  A better idea is to pass the array dimensions as separate arguments.  </p>\n\n<p>If you're using a C99 compiler or a C2011 compiler that supports variable-length arrays, this is easy:</p>\n\n<pre><code>void printmatrix( size_t rows, size_t cols, float (*a[rows]) )\n{\n  size_t i, j;\n\n  printf(\"\\nOutput matrix: \\n\");\n  for(i=0; i&lt;rows; i++){\n    for(j=0; j&lt;cols; j++){\n      printf(\"%f \", a[i][j]);\n  }\n  printf(\"\\n\");\n}   \n</code></pre>\n\n<p>and you would call it as</p>\n\n<pre><code>printmatrix( 3, 4, matrix );\n</code></pre>\n\n<p>If you're <em>not</em> using a C99 compiler or a C2011 compiler that supports variable-length arrays, you'll have to do something a little hackish.  You can explicitly pass the address of the first element, and then manually compute the 2D offset, like so:</p>\n\n<pre><code>void printmatrix( size_t rows, size_t cols, float *a )\n{\n  size_t i, j;\n  for ( i = 0; i &lt; rows; i++ )\n  {\n    for ( j = 0; j &lt; cols; j++ )\n      printf(\"    %f\", a[i * rows + j] );\n    putchar( '\\n' );\n  }\n}\n</code></pre>\n\n<p>and you would call it as</p>\n\n<pre><code>printmatrix( 3, 4, &amp;matrix[0][0] );\n</code></pre>\n"}], "owner": {"reputation": 1049, "user_id": 4151080, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh5.googleusercontent.com/-GtVcat7nYvs/AAAAAAAAAAI/AAAAAAAAABU/0a5yjXMEkWY/photo.jpg?sz=128", "display_name": "Jainam Jhaveri", "link": "https://stackoverflow.com/users/4151080/jainam-jhaveri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 0, "accepted_answer_id": 28589505, "answer_count": 2, "score": 2, "last_activity_date": 1424285212, "creation_date": 1424276918, "question_id": 28588633, "link": "https://stackoverflow.com/questions/28588633/c-error-subscripted-value-is-neither-array-nor-pointer-in-row-echelon-form", "title": "C error : &quot;Subscripted value is neither array nor pointer&quot; in row echelon form", "body": "<pre><code>#include &lt;stdio.h&gt;\n</code></pre>\n\n<p>// Printing matrix</p>\n\n<pre><code>void printmatrix(float a[]){\nint i, j;\n\nprintf(\"\\nOutput matrix: \\n\");\nfor(i=0; i&lt;3; i++){\n    for(j=0; j&lt;4; j++){\n        printf(\"%f \", a[i][j]);\n    }\n    printf(\"\\n\");\n}\n}\n\n\nvoid main(){\nint i, j, k, l, count;\nfloat temp, value;\nfloat a[3][4];\n\nprintf(\"Enter a matrix: \\n\");\n</code></pre>\n\n<p>// Taking matrix input from the user</p>\n\n<pre><code>for(i=0; i&lt;3; i++){\n    for(j=0; j&lt;4; j++){\n        scanf(\"%f\", &amp;a[i][j]);\n    }\n}\n\nprintmatrix(a);\n</code></pre>\n\n<p>// Checks 1 in 2nd and 3rd row and replaces the corresponding row with 1st row</p>\n\n<pre><code>for(i=0, count =0; i&lt;3; i++){\n    if(a[i][0] == 1 &amp;&amp; i != 0){\n        for(j=0; j&lt;4; j++){  // swapping two rows\n            temp = a[i][j];\n            a[i][j] = a[0][j];\n            a[0][j] = temp;\n        }\n        break;\n    }\n    count++;\n    // If there is no 1 in any row then divide 1st row by a[0][0]\n    if(count == 3){\n        k = 0;\n        value = a[0][0];\n        for(j=0; j&lt;4; j++){\n            a[k][j] = a[k][j]/value;\n        }\n    }\n}\n</code></pre>\n\n<p>// Subtract 2nd and 3rd row from 1st row to make a[1][0]=a[2][0]=0</p>\n\n<pre><code>for(i=1; i&lt;3; i++){\n    value = a[i][0];\n    for(j=0; j&lt;4; j++){\n        a[i][j] = a[i][j] - value * a[0][j];\n    }\n    printf(\"\\n\");\n}\n\nprintmatrix(a);\n</code></pre>\n\n<p>// Checks 1 in 3rd row and replaces 3rd row and 2nd row</p>\n\n<pre><code>for(i=1, count =0; i&lt;3; i++){\n    if(a[i][0] == 1 &amp;&amp; i != 1){\n        for(j=0; j&lt;4; j++){ // swapping two rows\n            temp = a[i][j];\n            a[i][j] = a[0][j];\n            a[0][j] = temp;\n        }\n        break;\n    }\n    count++;\n    // If there is no 1 in any row then divide 2nd row by a[1][1]\n    if(count == 2){\n        k = 1;\n        value = a[1][1];\n        for(j=0; j&lt;4; j++){\n            a[k][j] = a[k][j]/value;\n        }\n    }\n}\n</code></pre>\n\n<p>// Subtract 3rd row from 1st row to make a[2][1]=0</p>\n\n<pre><code>for(i=2; i&lt;3; i++){\n    value = a[i][1];\n    for(j=0; j&lt;4; j++){\n        a[i][j] = a[i][j] - value * a[1][j];\n    }\n    printf(\"\\n\");\n}\n\nprintmatrix(a);\n\n}\n</code></pre>\n"}, {"tags": ["java", "android", "c++", "c", "pci"], "answers": [{"comments": [{"owner": {"reputation": 8260, "user_id": 906738, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/40909afbdc397444acebc91b63958a99?s=128&d=identicon&r=PG", "display_name": "JohnnyFromBF", "link": "https://stackoverflow.com/users/906738/johnnyfrombf"}, "edited": false, "score": 0, "creation_date": 1462366421, "post_id": 35379234, "comment_id": 61606678, "body": "Gives me the following runtime error: <code>FATAL EXCEPTION: main                                                                           Process: com.example.me.antennas, PID: 21831                                                                           java.lang.NullPointerException: Attempt to invoke interface method &#39;java.util.Iterator java.util.List.iterator()&#39; on a null object reference</code> at <code>for (CellInfo m : cellInfo)</code>."}], "tags": [], "owner": {"reputation": 113, "user_id": 4568636, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O3QXWgyfDOM/AAAAAAAAAAI/AAAAAAAAACs/U-mPRGJ01Pw/photo.jpg?sz=128", "display_name": "Shakawat Hossain", "link": "https://stackoverflow.com/users/4568636/shakawat-hossain"}, "is_accepted": false, "score": 1, "last_activity_date": 1455362552, "creation_date": 1455362552, "answer_id": 35379234, "question_id": 28588212, "link": "https://stackoverflow.com/questions/28588212/how-to-get-pci-info-about-display-device-on-android/35379234#35379234", "title": "How to get PCI info about display device on Android", "body": "<p>Here is the java class </p>\n\n<pre><code>import android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.telephony.CellInfo;\nimport android.telephony.CellInfoLte;\nimport android.telephony.PhoneStateListener;\nimport android.telephony.TelephonyManager;\nimport android.util.Log;\nimport android.view.Window;\nimport android.widget.TextView;\nimport java.util.List;\n\npublic class MainActivity extends AppCompatActivity {\n\nphoneStateListener listener;\nTelephonyManager telephonyManager;\nTextView tv;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    telephonyManager = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);\n    listener = new phoneStateListener();\n    telephonyManager.listen(listener,PhoneStateListener.LISTEN_CELL_INFO);\n    tv = (TextView) findViewById(R.id.tv);\n}\n\n@Override\nprotected void onResume() {\n    super.onResume();\n}\n\npublic class phoneStateListener extends PhoneStateListener{\n    public phoneStateListener(){\n\n    }\n\n    @Override\n    public void onCellInfoChanged(List&lt;CellInfo&gt; cellInfo) {\n        super.onCellInfoChanged(cellInfo);\n        for(CellInfo m: cellInfo)\n            if (m instanceof CellInfoLte){\n                CellInfoLte cellInfoLte=(CellInfoLte) m;\n                int pciNum = cellInfoLte.getCellIdentity().getPci();\n                Log.d(\"onCellInfoChanged\", \"CellInfoLte--\" + m);\n                tv.setText(\"PCINUMBER: \"+pciNum);\n            }\n    }\n}\n\n@Override\nprotected void onStop() {\n    super.onStop();\n    telephonyManager = null;\n}\n}\n</code></pre>\n\n<p>Don't forget to use permission\n    <strong>android.permission.READ_PHONE_STATE</strong>\n    <strong>android.permission.ACCESS_COARSE_LOCATION</strong></p>\n"}], "owner": {"reputation": 124, "user_id": 4580234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2525747d9ffe887ee7ab69f0ce559f4?s=128&d=identicon&r=PG", "display_name": "Frank Secilia", "link": "https://stackoverflow.com/users/4580234/frank-secilia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1458, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1455362552, "creation_date": 1424275773, "last_edit_date": 1424280238, "question_id": 28588212, "link": "https://stackoverflow.com/questions/28588212/how-to-get-pci-info-about-display-device-on-android", "title": "How to get PCI info about display device on Android", "body": "<p>Morning, folks!</p>\n\n<p>I'm porting a desktop OpenGL c++ app to Android. This app is already fairly cross-platform. It requires reliable rendering on all platforms, so it accounts for differences in graphics driver implementations by enabling or disabling certain code paths based on the the host OS and the card's PCI information. Specifically, it switches over the device, vendor, and revision IDs. </p>\n\n<p>I need to get these PCI IDs from within Android. </p>\n\n<p>I'd prefer to do it programmatically from native code, but a JNI path or even parsing output of an external command are reasonable alternatives.</p>\n\n<p>I've been looking around but I can't find anything reliable. Any google search I can come up with involving Android and PCI or ID, even with a ton of filtering, returns getting the Android device's ID, a database or list of all known PCI device IDs, or the PCI Security Standards Council. Nothing about actual PCI headers. Maybe I just need more google-fu?</p>\n\n<p>There is no lspci on Android. Poking around in adb shell, I see that there is no accessible /sys filesystem and /proc/bus/pci/devices is empty. The closest I've seen is /proc/device-tree/nvidia-boardids on a Tegra, which prints out a fairly cryptic string that I'm pretty sure contains these IDs. This will probably work for devices which have it, but that's only the subset of devices running nVidia cards.</p>\n\n<p>As a last resort, we can probably use the info that comes back from glGetString, but that varies far more than PCI IDs. I would strongly prefer avoiding this route.</p>\n\n<p>This app is meant for Google Play distribution, so I absolutely cannot root these devices. </p>\n\n<p>Any ideas?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "std", "strtok"], "comments": [{"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 6, "creation_date": 1424276148, "post_id": 28588170, "comment_id": 45483564, "body": "it&#39;s not &quot;broken&quot;. It has a well-defined behavior. In certain cases, that behavior will cause issues, but those cases are not what the function was designed for. A more accurate statement, is that <code>strtok</code> is often used wrong."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1424276256, "post_id": 28588170, "comment_id": 45483646, "body": "@Sander:  See the example below.  Every bit of code is written properly and safely, and <code>strtok</code> still leads to Undefined Behavior."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 5, "creation_date": 1424276414, "post_id": 28588170, "comment_id": 45483768, "body": "no, your code is invalid. You&#39;re treating <code>strtok</code> as if it were re-entrant. But it isn&#39;t."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1424276695, "post_id": 28588170, "comment_id": 45483969, "body": "@Sander: <a href=\"http://en.wikipedia.org/wiki/Reentrancy_%28computing%29\" rel=\"nofollow noreferrer\">Re-entrancy</a> is when a function is invoked when another call already exists on the callstack (similar to a recursive call).  In my code, there is only ever one call to strtok on the stack at a time.  This is not a re-entrancy problem."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 1, "creation_date": 1424277183, "post_id": 28588170, "comment_id": 45484308, "body": "Subsequent calls to <code>strtok</code> for the same string are generally treated as if they&#39;re one call to <code>strtok</code> that gets interrupted, and re-entered later (because the two are conceptually the same). But if you prefer, I&#39;ll phrase my earlier comment differently : the same reason why <code>strtok</code> is not re-entrant (it keeps global state), is the reason why your code is invalid."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1424277376, "post_id": 28588170, "comment_id": 45484457, "body": "If you want to think of it like that, then you can put the blame on my code instead of strtok.  But that is not the semantics of functions in C.  Grouping multiple separate calls to strtok together, and treating them as a single-unit is NOT how the C-language works.   Imagine if you could not call a function like <code>printf</code> without also tracking where other calls to <code>printf</code> occur, because they might interfere with each other?  With strtok, you need to not only track your own use of the function, but <i>any</i> other use anywhere in the program!"}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1424277537, "post_id": 28588170, "comment_id": 45484564, "body": "Assume that the function <code>GetSentenceStats</code> was written by the Sentence-team:  They wrote unit-tests, they verified its behavior, and delivered their finished product to another team.   The Paragraph-team does not know that the Sentence-team used <code>strtok</code>.  The Paragraph-team wrote their function to the specification, and called the Sentence-function properly according to the spec.   Every team followed their obligations, and the program still does not work."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 1, "creation_date": 1424278133, "post_id": 28588170, "comment_id": 45484917, "body": "the point I was making, is that claiming that <code>strtok</code> is broken because you can&#39;t use it in a way that it was never designed for, makes no sense. Sure, <code>strtok</code> can only be safely used under certain well-defined conditions (which is why they added <code>strtok_s</code> later). But under those well-defined conditions, <code>strtok</code> is good at what it does, and is not broken."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1424278223, "post_id": 28588170, "comment_id": 45484986, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/71185/discussion-between-abelenky-and-sander-de-dycker\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 0, "creation_date": 1424275829, "post_id": 28588171, "comment_id": 45483329, "body": "So strtok uses global state? It really sounds like a singleton object."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 2, "creation_date": 1424276091, "post_id": 28588171, "comment_id": 45483533, "body": "@sashoalm AFAIK not global, it&#39;s a static variable in the function."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1424276210, "post_id": 28588171, "comment_id": 45483616, "body": "That is why we have <code>strtok_s()</code>, so you can work with different strings at the same time."}, {"owner": {"reputation": 9854, "user_id": 1741450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7900ed57a92b336effd879fa61de226?s=128&d=identicon&r=PG", "display_name": "lucasg", "link": "https://stackoverflow.com/users/1741450/lucasg"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1424276956, "post_id": 28588171, "comment_id": 45484146, "body": "@WeatherVane : since C11. On older version, you need to explicitely feed the input sentence :  sentence = strtok(sentence + (int)strlen(sentence) + 1, delims);"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1424277386, "post_id": 28588171, "comment_id": 45484466, "body": "Why did this get downvotes?  Is any of it wrong?  Looks resonable to me, (unlike strtok static state - ugh!)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 9854, "user_id": 1741450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7900ed57a92b336effd879fa61de226?s=128&d=identicon&r=PG", "display_name": "lucasg", "link": "https://stackoverflow.com/users/1741450/lucasg"}, "edited": false, "score": 0, "creation_date": 1424277614, "post_id": 28588171, "comment_id": 45484609, "body": "@georgesl since MSVC 9.0 is free, and contains the &quot;safer&quot; version of many functions, there is no point using an older version."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1424277628, "post_id": 28588171, "comment_id": 45484619, "body": "@MartinJames:  Thank you. :)   All I can say is &quot;haters gonna hate&quot;.   I put a lot of thought and time into making that example as clear and precise as I could."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1424278614, "post_id": 28588171, "comment_id": 45485262, "body": "@WeatherVane: On linux, you need to use <code>strtok_r</code>, which is in Posix but not in C11. <code>strtok_s</code> is in the optional Annex K of C11, which glibc doesn&#39;t currently implement. So it&#39;s not quite that simple."}, {"owner": {"reputation": 2685, "user_id": 37788, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/714e2a0679c506ba07f3ad81d72e0b23?s=128&d=identicon&r=PG", "display_name": "Kennet Belenky", "link": "https://stackoverflow.com/users/37788/kennet-belenky"}, "edited": false, "score": 0, "creation_date": 1424281718, "post_id": 28588171, "comment_id": 45487276, "body": "Strtok is a table saw with all the guards and safeties removed. It&#39;s dangerous and something to avoid, but it has no incompetence or malicious intent. The people who use strtok, however, I tend to judge much more harshly."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 2685, "user_id": 37788, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/714e2a0679c506ba07f3ad81d72e0b23?s=128&d=identicon&r=PG", "display_name": "Kennet Belenky", "link": "https://stackoverflow.com/users/37788/kennet-belenky"}, "edited": false, "score": 1, "creation_date": 1424281963, "post_id": 28588171, "comment_id": 45487432, "body": "@KennetBelenky perhaps we should avoid C altogether then. <code>strtok()</code> is not the only function to use static data internal to the function. A call to <code>ctime()</code> destroys the results of any previous call to itself and to <code>asctime()</code> and  <code>localtime()</code>. But this was an interesting question and self-answer: upvoted."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 3, "creation_date": 1424282156, "post_id": 28588171, "comment_id": 45487549, "body": "This whole discussion seems to have taken on the feel of a religious war.  Any technically relevant statements <i>against</i> your idea (eg. <b><i><a href=\"http://stackoverflow.com/q/28420931/645128\">here</a></i></b>, and arguments offered by @Sander De Dycker above, ) have been met with your opinions on the implementation of <code>strtok()</code>.  If you have such strong feelings about the implementation, can you not bring it up to the <b><i><a href=\"http://www.open-std.org/jtc1/sc22/wg14/\" rel=\"nofollow noreferrer\">C standards committee</a></i></b>?"}, {"owner": {"reputation": 2685, "user_id": 37788, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/714e2a0679c506ba07f3ad81d72e0b23?s=128&d=identicon&r=PG", "display_name": "Kennet Belenky", "link": "https://stackoverflow.com/users/37788/kennet-belenky"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1424301929, "post_id": 28588171, "comment_id": 45498441, "body": "@WeatherVane I made my comment about judging people because the chain of events that culminates with a person using strtok probably contains a human error or deficiency. In today&#39;s ecosystem, the number of places where C <i>is</i> used is much greater than the number of places where C <i>should</i> be used. From simple probabilities, if a person is using strtok, it is likely that they should not."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1424304643, "post_id": 28588171, "comment_id": 45499331, "body": "OMG! Maybe the function calling <code>strtok()</code> calls another function which also calls <code>strtok()</code> before the first function has finished with <code>strtok()</code> but also calls the first function that calls <code>strtok()</code> before the second function that called <code>strtok()</code> has finished with <code>strtok()</code>, and if both are also playing with the same files or pointers too it is no more dangerous than slicing two different fruits or even digits in the kitchen with a sharp knife, as @iharob one implied. Only a ... blames the tools."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1424304894, "post_id": 28588171, "comment_id": 45499410, "body": "@WeatherVane yes <code>strtok</code> is not reentrant."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424305053, "post_id": 28588171, "comment_id": 45499462, "body": "@iharob, maybe recursion will be written out of a language, and indeed in some houses it is forbidden."}], "tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 2, "last_activity_date": 1424275670, "creation_date": 1424275670, "answer_id": 28588171, "question_id": 28588170, "link": "https://stackoverflow.com/questions/28588170/is-strtok-broken-or-just-tricky/28588171#28588171", "title": "Is strtok broken? Or just tricky?", "body": "<p>Yes, <code>strtok</code> is hopelessly broken, <strong><em>even in a simple single-threaded program</em></strong>, and I will demonstrate this failure with some sample code:</p>\n\n<p>Let us begin with a simple text-analyzer function to gather statistics about sentences of text, using <code>strtok</code>.\nThis code will lead to undefined behavior.</p>\n\n<p>In this example, a sentence is a set of words separated by spaces, commas, semi-colons, and periods.</p>\n\n<pre><code>// Example:\n//     int words, longest;\n//     GetSentenceStats(\"There were a king with a large jaw and a queen with a plain face, on the throne of England.\", &amp;words, &amp;longest);\n// will report there are 20 words, and the longest word has 7 characters (\"England\").\nvoid GetSentenceStats(const char* sentence, int* pWordCount, int* pMaxWordLen)\n{\n    char* delims = \" ,;.\";           // In a sentence, words are separated by spaces, commas, semi-colons or period.\n    char* input = strdup(sentence);  // Make an local copy of the sentence, to be modified without affecting the caller.\n\n    *pWordCount = 0;                 // Initialize the output to Zero\n    *pMaxWordLen = 0;\n\n    char* word = strtok(input, delims);\n    while(word)\n    {\n        (*pWordCount)++;\n        *pMaxWordLen = MAX(*pMaxWordLen, (int)strlen(word));\n        word = strtok(NULL, delims);\n    }\n    free(input);\n}\n</code></pre>\n\n<p><strong>This simple function works.  There are no bugs so far.</strong></p>\n\n<hr>\n\n<p>Now let us augment our library to add a function that gathers stats on Paragraphs of text.<br>\nA paragraph is a set of sentences separated by Exclamation Marks, Question Marks and Periods.</p>\n\n<p>It will return the number of sentences in the paragraph, and the number of words in the longest sentence.<br>\nAnd perhaps most importantly, it will use the earlier function <code>GetSentenceStats</code> to help </p>\n\n<pre><code>void GetParagraphStats(const char* paragraph, int* pSentenceCount, int* pMaxWords)\n{\n    char* delims = \".!?\";             // Sentences in a paragraph are separated by Period, Question-Mark, and Exclamation.\n    char* input = strdup(paragraph);  // Make an local copy of the paragraph, to be modified without affecting the caller.\n\n    *pSentenceCount = 0;\n    *pMaxWords = 0;\n    char* sentence = strtok(input, delims);\n    while(sentence)\n    {\n        (*pSentenceCount)++;\n\n        int wordCount;\n        int longestWord;\n        GetSentenceStats(sentence, &amp;wordCount, &amp;longestWord);\n        *pMaxWords = MAX(*pMaxWords, wordCount);\n        sentence = strtok(NULL, delims);    // This line returns garbage data, \n    }\n    free(input);\n}\n</code></pre>\n\n<p>This function also looks very simple and straightforward.<br>\n<strong><em>But it does not work, as demonstrated by this sample program.</em></strong></p>\n\n<pre><code>int main(void)\n{\n    int cnt;\n    int len;\n\n    // First demonstrate that the SentenceStats function works properly:\n    char *sentence = \"There were a king with a large jaw and a queen with a plain face, on the throne of England.\"; \n    GetSentenceStats(sentence, &amp;cnt, &amp;len);\n    printf(\"Word Count: %d\\nLongest Word: %d\\n\", cnt, len);\n    // Correct Answer:\n    // Word Count: 20\n    // Longest Word: 7   (\"England\")\n\n\n    printf(\"\\n\\nAt this point, expected output is 20/7.\\nEverything is working fine\\n\\n\");\n\n    char paragraph[] =  \"It was the best of times!\"   // Literary purists will note I have changed Dicken's original text to make a better example\n                        \"It was the worst of times?\"\n                        \"It was the age of wisdom.\"\n                        \"It was the age of foolishness.\"\n                        \"We were all going direct to Heaven!\";\n    int sentenceCount;\n    int maxWords;\n    GetParagraphStats(paragraph, &amp;sentenceCount, &amp;maxWords);\n    printf(\"Sentence Count: %d\\nLongest Sentence: %d\\n\", sentenceCount, maxWords);\n    // Correct Answer:\n    // Sentence Count: 5\n    // Longest Sentence: 7  (\"We were all going direct to Heaven\")\n\n    printf(\"\\n\\nAt the end, expected output is 5/7.\\nBut Actual Output is Undefined Behavior! Strtok is hopelessly broken\\n\");\n    _getch();\n    return 0;\n}\n</code></pre>\n\n<p>All calls to <code>strtok</code> are entirely correct, and are on separate data.<br><strong><em>But the result is Undefined Behavior!</em></strong></p>\n\n<p><strong>Why does this happen?</strong><br>\nWhen <code>GetParagraphStats</code> is called, it begins a <code>strtok</code>-loop to get sentences.\nOn the first sentence it will call <code>GetSentenceStats</code>.   <code>GetSentenceStats</code> will also being a <code>strtok</code>-loop, losing all state established by <code>GetParagraphStats</code>.\nWhen <code>GetSentenceStats</code> returns, the caller (<code>GetParagraphStats</code>) will call <code>strtok(NULL)</code> again to get the next sentence.<p></p>\n\n<p>But <code>strtok</code> will <em>think</em> this is a call to continue the previous operation, and will continue tokenizing memory that has now been freed!\nThe result is the dreaded Undefined Behavior.</p>\n\n<p><strong>When is it safe to use strtok?</strong><br>\n<em>Even in a single-threaded environment</em>, <code>strtok</code> can <strong>only</strong> be used safely when the programmer/architect is sure of two conditions:</p>\n\n<ul>\n<li><p>The function using <code>strtok</code> must never call any function that may also use strtok.<br>If it calls a subroutine that also uses strtok, its own use of strtok may be interrupted.</p></li>\n<li><p>The function using <code>strtok</code> must never be called by any function that may also use strtok.<br>If this function ever called by another routine using strtok, then this function will interrupt the callers use of strtok.</p></li>\n</ul>\n\n<p>In a multi-threaded environment, use of <code>strtok</code> is even more impossible, because the programmer needs to be sure that there is only one use of <code>strtok</code> on the current thread, and also, no other threads are using <code>strtok</code> either.</p>\n"}], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 785, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1518704818, "creation_date": 1424275670, "question_id": 28588170, "link": "https://stackoverflow.com/questions/28588170/is-strtok-broken-or-just-tricky", "title": "Is strtok broken? Or just tricky?", "body": "<p>Is <code>strtok</code> hopelessly broken?</p>\n\n<p>On many StackOverflow questions about text-parsing in C, someone will suggest using <code>strtok</code>,\nand one common reply is that <code>strtok</code> should never be used, that it is hopelessly broken.</p>\n\n<p>Some posters have claimed that <code>strtok</code>'s problems are limited to multi-threading issues, and it is safe in a single-threaded environment.</p>\n\n<p>What is the right answer?<br>\nDoes it work? <br>\nIs it hopelessly broken?<br>\nCan you back up your answer with examples?</p>\n"}, {"tags": ["c", "pipe", "parent-child"], "comments": [{"owner": {"reputation": 9353, "user_id": 3197055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ns7gZ.jpg?s=128&g=1", "display_name": "Kavindu Dodanduwa", "link": "https://stackoverflow.com/users/3197055/kavindu-dodanduwa"}, "edited": false, "score": 0, "creation_date": 1424276861, "post_id": 28587900, "comment_id": 45484075, "body": "Asking SO for debugging is fine but it shall be not done all the time.. Said that, verify you close and dup pipes correctly. And you are giving child the proper pipe end.."}, {"owner": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "edited": false, "score": 0, "creation_date": 1424277028, "post_id": 28587900, "comment_id": 45484188, "body": "What is the output that you are getting versus what you want?  Nothing jumps out at me as being obviously wrong."}, {"owner": {"reputation": 9353, "user_id": 3197055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ns7gZ.jpg?s=128&g=1", "display_name": "Kavindu Dodanduwa", "link": "https://stackoverflow.com/users/3197055/kavindu-dodanduwa"}, "edited": false, "score": 0, "creation_date": 1424277736, "post_id": 28587900, "comment_id": 45484677, "body": "printf(&quot;CHILD  1/2/3  : goodbye\\n&quot;); will never reach in your code.. If it&#39;s that you expected"}, {"owner": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "edited": false, "score": 0, "creation_date": 1424278547, "post_id": 28587900, "comment_id": 45485209, "body": "When I ran your code, I noticed that the grep child process hung.  This might be because you didn&#39;t close the write side of the pipe in the &#39;ps&#39; child, so EOF was never posted to grep, so it sat there waiting for more input."}, {"owner": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "edited": false, "score": 0, "creation_date": 1424281129, "post_id": 28587900, "comment_id": 45486952, "body": "You won&#39;t see the &quot;CHILD 2: goodbye&quot; before the grep child calls execlp because you&#39;ve already dup&#39;ed its stdout to the write side of the pipe heading to the sort process.  Obviously, that status line will also improperly head to your sort program."}, {"owner": {"reputation": 105, "user_id": 4552184, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/467813c0954f974f59bd27245b6e7d62?s=128&d=identicon&r=PG&f=1", "display_name": "Tad Lithuania", "link": "https://stackoverflow.com/users/4552184/tad-lithuania"}, "edited": false, "score": 0, "creation_date": 1424285398, "post_id": 28587900, "comment_id": 45489441, "body": "Yes the only problem with the code was that I had to close all four file descriptors in each child and the parent. Thanks guys!"}], "answers": [{"tags": [], "owner": {"reputation": 2652, "user_id": 4564515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90733097a656c664a472c437678aad42?s=128&d=identicon&r=PG&f=1", "display_name": "jschultz410", "link": "https://stackoverflow.com/users/4564515/jschultz410"}, "is_accepted": true, "score": 0, "last_activity_date": 1424281255, "last_edit_date": 1424281255, "creation_date": 1424277681, "answer_id": 28588906, "question_id": 28587900, "link": "https://stackoverflow.com/questions/28587900/creating-two-pipes-with-three-execlp-small-error-somewhere-c-system-programming/28588906#28588906", "title": "Creating two pipes with three execlp small error somewhere C System Programming", "body": "<p>The problem is that you didn't close the pipe file descriptors in the children and so, because you dup'ed them over to STDOUT_FILENO (e.g. - grep child), even though the program was done its regular output it didn't fully exit and post an EOF to the next child process (i.e. - sort) and so those children hung around waiting forever.</p>\n\n<p>I'm not entirely sure why your grep process refused to exit like normal because it does seem that the ps child exits, which should post an EOF to the grep child's stdin.</p>\n\n<p>Here's a version that does what you want:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n  pid_t pid = getpid();\n\n  printf(\"PARENT: STARTING PROCESSXXX %d\\n\",pid);\n\n  int c1Toc2[2];\n  int c2Toc3[2];\n\n  if (pipe(c1Toc2) == -1)\n  {\n    perror(\"pipe\");\n    exit(EXIT_FAILURE);\n  }\n\n  if (pipe(c2Toc3) == -1)\n  {\n    perror(\"pipe\");\n    exit(EXIT_FAILURE);\n  }\n\n  int rValue = fork();\n\n  if (rValue == -1)\n  {\n    perror(\"Child_1\");\n    exit(EXIT_FAILURE);\n  }\n  else if (rValue == 0)\n  {\n    printf(\"CHILD 1: PROCESS ID IS: %ld \\tMY PARENT ID IS: %ld\\trValue IS: %d\\n\", (long) getpid(), (long) getppid(), rValue);\n\n    dup2(c1Toc2[1], STDOUT_FILENO);\n\n    close(c1Toc2[0]);\n    close(c1Toc2[1]);\n    close(c2Toc3[0]);\n    close(c2Toc3[1]);\n\n    execlp(\"ps\", \"ps\", \"-ef\", NULL);\n    perror(\"CHILD 1: execlp\");\n    exit(EXIT_FAILURE);\n  }\n\n  rValue = fork();\n\n  if (rValue == -1)\n  {\n    perror(\"Child_2\");\n    exit(EXIT_FAILURE);\n  }\n  else if (rValue == 0)\n  { \n    printf(\"CHILD 2: PROCESS ID IS: %ld \\tMY PARENT ID IS: %ld\\trValue IS: %d\\n\", (long) getpid(), (long) getppid(), rValue);\n\n    dup2(c1Toc2[0], STDIN_FILENO);\n    dup2(c2Toc3[1], STDOUT_FILENO);\n\n    close(c1Toc2[0]);\n    close(c1Toc2[1]);\n    close(c2Toc3[0]);\n    close(c2Toc3[1]);\n\n    execlp(\"grep\",\"grep\",\"root\",NULL);\n    perror(\"CHILD 2: execlp\");\n    exit(EXIT_FAILURE);\n  }\n\n  rValue = fork();\n\n  if (rValue == -1)\n  {\n    perror(\"Child_3\");\n    exit(EXIT_FAILURE);\n  }\n  else if (rValue == 0)\n  { \n    printf(\"CHILD 3: PROCESS ID IS: %ld \\tMY PARENT ID IS: %ld\\trValue IS: %d\\n\", (long) getpid(), (long) getppid(), rValue);\n\n    dup2(c2Toc3[0], STDIN_FILENO);\n\n    close(c1Toc2[0]);\n    close(c1Toc2[1]);\n    close(c2Toc3[0]);\n    close(c2Toc3[1]);\n\n    execlp(\"sort\",\"sort\",\"-n\", \"-k4\",NULL);\n    perror(\"CHILD 3: execlp\");\n    exit(EXIT_FAILURE);\n  }\n\n  close(c1Toc2[0]);\n  close(c1Toc2[1]);\n  close(c2Toc3[0]);\n  close(c2Toc3[1]);\n\n  printf(\"PARENT: PROCESS Waiting on children to complete\\n\");\n  sleep(3);\n  printf(\"PARENT: Final Print Statement before exit\\n\");\n\n  return 0;\n}  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1424279200, "last_edit_date": 1424279200, "creation_date": 1424278601, "answer_id": 28589270, "question_id": 28587900, "link": "https://stackoverflow.com/questions/28587900/creating-two-pipes-with-three-execlp-small-error-somewhere-c-system-programming/28589270#28589270", "title": "Creating two pipes with three execlp small error somewhere C System Programming", "body": "<p>Your code looks more or less right, but it does seem to reflect an imperfect understanding of fork / exec and child process management.</p>\n\n<p>For one thing, note that the exec-family functions, including <code>execlp()</code>, do not return except on failure.  Your code seems to assume otherwise.  In particular, the child processes will not print \"goodbye\" messages after calling <code>execlp()</code> unless the <code>execlp()</code> call fails.  You <em>should</em> handle the (failure) case in which <code>execlp()</code> does return, but normally you would do so with error-handling / error-reporting code.</p>\n\n<p>Also, each process, including the parent, should close those file descriptors it isn't going to use.  That includes closing a FD after duplicating it onto one of the standard file numbers, and closing all file descriptors intended exclusively for other processes.  You miss several of those:</p>\n\n<ul>\n<li>Child 1 fails to close file descriptors <code>c1Toc2[1]</code> (after duplicating it) and <code>c2Toc3[1]</code>.</li>\n<li>Child 2 fails to close file descriptors <code>c1Toc2[0]</code> and <code>c2Toc3[1]</code> (after duplicating them).</li>\n</ul>\n\n<p>Furthermore, it is pointless for the parent process to <code>sleep()</code> to wait on its children.  If it wanted to ensure that they completed and/or to obtain their exit statuses, then it should use <code>wait()</code> or <code>waitpid()</code>.  If it were not going to exit immediately after, then it should definitely use one of those functions, else the child processes will hang around as zombie processes until the parent exits.  No amount of <code>sleep()</code> is sufficient to <strong>ensure</strong> that the child processes finish.  If you don't care about any of those things, on the other hand, then you can just let the parent exit.  There's no special advantage in that case to keeping it around.</p>\n\n<p>I don't know whether any of those explains the unexpected behavior you see, because you haven't explained what that is.</p>\n"}], "owner": {"reputation": 105, "user_id": 4552184, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/467813c0954f974f59bd27245b6e7d62?s=128&d=identicon&r=PG&f=1", "display_name": "Tad Lithuania", "link": "https://stackoverflow.com/users/4552184/tad-lithuania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 28588906, "answer_count": 2, "score": 0, "last_activity_date": 1424281255, "creation_date": 1424274881, "last_edit_date": 1424276899, "question_id": 28587900, "link": "https://stackoverflow.com/questions/28587900/creating-two-pipes-with-three-execlp-small-error-somewhere-c-system-programming", "title": "Creating two pipes with three execlp small error somewhere C System Programming", "body": "<p>I'm trying to create three child processes and two pipes that will execute three <code>execlp()</code>.  When my program runs, however, the output is not what I expect.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    pid_t  pid = getpid();\n    printf(\"STARTING PROCESSXXX %d\\n\",pid);\n\n    int c1Toc2[2];\n    int c2Toc3[2];\n\n    if(pipe(c1Toc2) == -1)\n    {\n        perror(\"pipe\");\n        exit(EXIT_FAILURE);\n    }\n    if(pipe(c2Toc3) == -1)\n    {\n        perror(\"pipe\");\n        exit(EXIT_FAILURE);\n    }\n\n    int rValue = fork();\n\n    if(rValue == -1)\n    {\n        perror(\"Child_1\");\n    }\n    else if (rValue == 0)\n    {\n        printf(\"CHILD 1:  \");\n        printf(\"PROCESS ID IS: %ld \\tMY PARENT ID IS: %ld\\trValue IS: %d\\n\", (long) getpid(), (long) getppid(), rValue);\n\n        dup2(c1Toc2[1], STDOUT_FILENO);\n        close(c1Toc2[0]);\n        close(c2Toc3[0]);\n\n        execlp(\"ps\", \"ps\", \"-ef\", NULL);\n\n        exit(0);\n    }\n\n    rValue = fork();\n\n    if(rValue == -1)\n    {\n        perror(\"Child_2\");\n    }\n    else if (rValue == 0)\n    { \n        printf(\"CHILD 2:  \");\n        printf(\"PROCESS ID IS: %ld \\tMY PARENT ID IS: %ld\\trValue IS: %d\\n\",\n                (long) getpid(), (long) getppid(), rValue);\n\n        dup2(c1Toc2[0], STDIN_FILENO);\n        close(c1Toc2[1]);\n\n        dup2(c2Toc3[1], STDOUT_FILENO);\n        close(c2Toc3[0]);\n        printf(\"CHILD 2 : goodbye\\n\");\n        execlp(\"grep\",\"grep\",\"root\",NULL);\n\n        printf(\"CHILD 2 : goodbye\\n\");\n        exit(0);\n    }\n\n    rValue = fork();\n\n    if(rValue == -1)\n    {\n        perror(\"Child_3\");\n    }\n    else if (rValue == 0)\n    { \n        printf(\"CHILD 3:  \");\n        printf(\"PROCESS ID IS: %ld \\tMY PARENT ID IS: %ld\\trValue IS: %d\\n\",\n                (long) getpid(), (long) getppid(), rValue);\n\n        dup2(c2Toc3[0], STDIN_FILENO);\n        close(c2Toc3[1]);\n        close(c2Toc3[0]);\n        printf(\"CHILD 3 : \\n\");\n        execlp(\"sort\",\"sort\",\"-n\", \"-k4\",NULL);\n\n        printf(\"CHILD 3 : goodbye\\n\");\n        exit(0);\n    }\n\n    close(c1Toc2[1]);\n    close(c1Toc2[0]);\n\n    close(c2Toc3[1]);\n    close(c2Toc3[0]);\n    // Add the code for the two children  here\n    sleep(3);\n    printf(\"PARENT: PROCESS Waiting on children to complete\\n\");\n\n    printf(\"Final Print Statement before exit\\n\");\n    exit(0);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "curl", "libcurl", "ntlm"], "answers": [{"tags": [], "owner": {"reputation": 381, "user_id": 3410377, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/MGgp0.png?s=128&g=1", "display_name": "Razlo3p", "link": "https://stackoverflow.com/users/3410377/razlo3p"}, "is_accepted": true, "score": 0, "last_activity_date": 1453972763, "creation_date": 1453972763, "answer_id": 35057359, "question_id": 28587817, "link": "https://stackoverflow.com/questions/28587817/error-http-407-using-libcurl-and-ntml/35057359#35057359", "title": "Error http 407 using libcurl and ntml", "body": "<p>Solved: i was missing this instruction</p>\n\n<pre><code>curl_easy_setopt(ctx, CURLOPT_PROXYUSERPWD, \":\");\n</code></pre>\n\n<p>This (i think) tell curl to use Username an Password retrieved from SO passing througt ntlm auth</p>\n"}], "owner": {"reputation": 381, "user_id": 3410377, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/MGgp0.png?s=128&g=1", "display_name": "Razlo3p", "link": "https://stackoverflow.com/users/3410377/razlo3p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 1, "accepted_answer_id": 35057359, "answer_count": 1, "score": 0, "last_activity_date": 1453972763, "creation_date": 1424274685, "last_edit_date": 1424293397, "question_id": 28587817, "link": "https://stackoverflow.com/questions/28587817/error-http-407-using-libcurl-and-ntml", "title": "Error http 407 using libcurl and ntml", "body": "<p>i'm developing a small application.\nFor testing purpouse i'm tryng to \"ping\" google using libcurl while behind an ntlm proxy.\nThis is my c++ code:</p>\n\n<pre><code>CURLcode testConnection(void)\n{\n    CURL *curl;\n    CURLcode res = CURLE_OK;\n    res = curl_global_init(CURL_GLOBAL_ALL);\n    curl = curl_easy_init();\n    if (curl)\n    {\n        cout &lt;&lt; \"Url: \" &lt;&lt; curl_easy_strerror(curl_easy_setopt(curl, CURLOPT_URL, \"http://www.google.com\")) &lt;&lt; \"\\n\";\n        cout &lt;&lt; \"T-out: \" &lt;&lt; curl_easy_strerror(curl_easy_setopt(curl, CURLOPT_CONNECTTIMEOUT, 3)) &lt;&lt; \"\\n\";\n        cout &lt;&lt; \"No_body: \" &lt;&lt; curl_easy_strerror(curl_easy_setopt(curl, CURLOPT_NOBODY, true)) &lt;&lt; \"\\n\";\n        cout &lt;&lt; \"Proxy Url: \" &lt;&lt; curl_easy_strerror(curl_easy_setopt(curl, CURLOPT_PROXY, \"proxyrm.wind.root.it\")) &lt;&lt; \"\\n\";\n        cout &lt;&lt; \"Proxy Port: \" &lt;&lt; curl_easy_strerror(curl_easy_setopt(curl, CURLOPT_PROXYPORT, 8080)) &lt;&lt; \"\\n\";\n        cout &lt;&lt; \"Ntml: \" &lt;&lt; curl_easy_strerror(curl_easy_setopt(curl, CURLOPT_HTTPAUTH, CURLAUTH_NTLM)) &lt;&lt; \"\\n\";\n        cout &lt;&lt; \"Verbose: \" &lt;&lt; curl_easy_strerror(curl_easy_setopt(curl, CURLOPT_VERBOSE, true)) &lt;&lt; \"\\n\";\n\n        res = curl_easy_perform(curl);\n        curl_easy_cleanup(curl);\n    }\n    else\n        res = CURLE_FAILED_INIT;\n    curl_global_cleanup();\n    return res;\n}\n</code></pre>\n\n<p>All thi went good, since the verbose output is the following.</p>\n\n<pre><code>Url: No error\nT-out: No error\nNo_body: No error\nProxy Url: No error\nProxy Port: No error\nNtml: No error\nVerbose: No error\n* About to connect() to proxy myroxy  port 8080 (#0)\n*   Trying IP...\n* Connected to myroxy   (IP) port 8080 (#0)\n&gt; HEAD http://www.google.com HTTP/1.1\nHost: www.google.com\nAccept: */*\nProxy-Connection: Keep-Alive\n\n&lt; HTTP/1.1 407 Proxy Authentication Required\n&lt; Proxy-Authenticate: NTLM\n&lt; Proxy-Authenticate: BASIC realm=\"windroot\"\n&lt; Cache-Control: no-cache\n&lt; Pragma: no-cache\n&lt; Content-Type: text/html; charset=utf-8\n* HTTP/1.1 proxy connection set close!\n&lt; Proxy-Connection: close\n&lt; Set-Cookie: BCSI-CS-602d36a7505d346e=2; Path=/\n&lt; Connection: close\n&lt; Content-Length: 989\n&lt;\n* Closing connection 0\n\nCurl Final: No error\n</code></pre>\n\n<p>But, if i try to ping <a href=\"https://google.com\" rel=\"nofollow\">https://google.com</a> the result become this</p>\n\n<pre><code>Url: No error\nT-out: No error\nNo_body: No error\nProxy Url: No error\nProxy Port: No error\nNtml: No error\nNtml: No error\nNtml: No error\nVerbose: No error\n* About to connect() to proxy myroxy port 8080 (#0\n*   Trying IP...\n* Connected to myroxy  (IP) port 8080 (#0)\n* Establish HTTP proxy tunnel to www.google.com:443\n&gt; CONNECT www.google.com:443 HTTP/1.1\nHost: www.google.com:443\nProxy-Connection: Keep-Alive\n\n&lt; HTTP/1.1 407 Proxy Authentication Required\n&lt; Proxy-Authenticate: NTLM\n&lt; Proxy-Authenticate: BASIC realm=\"windroot\"\n&lt; Cache-Control: no-cache\n&lt; Pragma: no-cache\n&lt; Content-Type: text/html; charset=utf-8\n&lt; Proxy-Connection: close\n&lt; Set-Cookie: BCSI-CS-602d36a7505d346e=2; Path=/\n&lt; Connection: close\n&lt; Content-Length: 1135\n&lt;\n* Ignore 1135 bytes of response-body\n* Received HTTP code 407 from proxy after CONNECT\n* Connection #0 to host myroxy left intact\n\nCurl Final: Failure when receiving data from the peer\n</code></pre>\n\n<p>Using curl in command line allow me to ping https (i have to specify the -k argument) but i don't know if this is really relevant. Someone can help me to figure out what's happening? And how to avoid that?</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "system-calls"], "comments": [{"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1424274683, "post_id": 28587721, "comment_id": 45482540, "body": "You can use the <code>ps</code> command: <code>ps -eLf</code>"}, {"owner": {"reputation": 29, "user_id": 3386335, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ee5474555ffa0586fc1b8afb5fa85d49?s=128&d=identicon&r=PG&f=1", "display_name": "mambo", "link": "https://stackoverflow.com/users/3386335/mambo"}, "reply_to_user": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1424275315, "post_id": 28587721, "comment_id": 45482991, "body": "I have to actually add a new system call and then call this system call on my multithreaded program after threads are created. How do I do that?"}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1424275655, "post_id": 28587721, "comment_id": 45483209, "body": "Why do you need a <i>system call</i>? you can simply use <code>system(&quot;ps -eLf&quot;);</code>"}, {"owner": {"reputation": 29, "user_id": 3386335, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ee5474555ffa0586fc1b8afb5fa85d49?s=128&d=identicon&r=PG&f=1", "display_name": "mambo", "link": "https://stackoverflow.com/users/3386335/mambo"}, "reply_to_user": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1424276125, "post_id": 28587721, "comment_id": 45483555, "body": "Only because its a requirement,  if not this would&#39;ve work like a charm, thank you."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 1, "creation_date": 1424276323, "post_id": 28587721, "comment_id": 45483695, "body": "Is this for educational usage? I can&#39;t see other reasons for a system call. The kernel supports all that information through the <code>&#47;proc</code> filesystem. (And this is what ps is using)...."}, {"owner": {"reputation": 29, "user_id": 3386335, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ee5474555ffa0586fc1b8afb5fa85d49?s=128&d=identicon&r=PG&f=1", "display_name": "mambo", "link": "https://stackoverflow.com/users/3386335/mambo"}, "reply_to_user": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1424276409, "post_id": 28587721, "comment_id": 45483764, "body": "Yes, it is for my own education, I am not attending school, but saw this project online and started to try it out. In other words, I am teaching myself."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1424276498, "post_id": 28587721, "comment_id": 45483826, "body": "Ok, understood. I suggest to read the kernel sources and learn how the relevant information is written to the <code>&#47;proc</code> filesystem."}], "answers": [{"comments": [{"owner": {"reputation": 2748, "user_id": 2879338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e1Inh.jpg?s=128&g=1", "display_name": "Milind Dumbare", "link": "https://stackoverflow.com/users/2879338/milind-dumbare"}, "edited": false, "score": 0, "creation_date": 1424281588, "post_id": 28589950, "comment_id": 45487217, "body": "where do you get <code>task</code> from?"}, {"owner": {"reputation": 29, "user_id": 3386335, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ee5474555ffa0586fc1b8afb5fa85d49?s=128&d=identicon&r=PG&f=1", "display_name": "mambo", "link": "https://stackoverflow.com/users/3386335/mambo"}, "edited": false, "score": 0, "creation_date": 1424281779, "post_id": 28589950, "comment_id": 45487313, "body": "Thank you so much, will try this now... Compile and install modules correct?"}, {"owner": {"reputation": 919, "user_id": 3095460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utTEO.jpg?s=128&g=1", "display_name": "Sridhar Nagarajan", "link": "https://stackoverflow.com/users/3095460/sridhar-nagarajan"}, "edited": false, "score": 0, "creation_date": 1424282143, "post_id": 28589950, "comment_id": 45487541, "body": "Inside the kernel, <code>tasks</code> are typically referenced directly by a pointer to their <code>task_struct</code> structure present in the kernel stack. the macro retrieves that address of each <code>tast_struct</code> one by one for all the processes running on the system."}, {"owner": {"reputation": 919, "user_id": 3095460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utTEO.jpg?s=128&g=1", "display_name": "Sridhar Nagarajan", "link": "https://stackoverflow.com/users/3095460/sridhar-nagarajan"}, "edited": false, "score": 0, "creation_date": 1424282265, "post_id": 28589950, "comment_id": 45487610, "body": "<a href=\"https://tssurya.wordpress.com/2014/08/19/adding-a-hello-world-system-call-to-linux-kernel-3-16-0/\" rel=\"nofollow noreferrer\">tssurya.wordpress.com/2014/08/19/&hellip;</a> follow this tutorial, for adding new system call, its easy to read."}, {"owner": {"reputation": 29, "user_id": 3386335, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ee5474555ffa0586fc1b8afb5fa85d49?s=128&d=identicon&r=PG&f=1", "display_name": "mambo", "link": "https://stackoverflow.com/users/3386335/mambo"}, "edited": false, "score": 0, "creation_date": 1424282843, "post_id": 28589950, "comment_id": 45487970, "body": "Yes, indeed, thank you so much.. happy I found help here and I am glad I learned this is very interesting"}], "tags": [], "owner": {"reputation": 919, "user_id": 3095460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utTEO.jpg?s=128&g=1", "display_name": "Sridhar Nagarajan", "link": "https://stackoverflow.com/users/3095460/sridhar-nagarajan"}, "is_accepted": false, "score": 0, "last_activity_date": 1424281225, "last_edit_date": 1424281225, "creation_date": 1424280507, "answer_id": 28589950, "question_id": 28587721, "link": "https://stackoverflow.com/questions/28587721/a-system-call-to-dump-information-about-all-system-processes-and-the-threads-in/28589950#28589950", "title": "A system call to dump information about all system processes and the threads in a multithreaded program", "body": "<p>First Step is to implement a system call to list the processes.</p>\n\n<p>The kernel stores the list of processes in a circular doubly linked list called the <code>task list</code>. Each element in the task list is a process descriptor of the type <code>struct task_struct</code>, which is defined in <code>&lt;linux/sched.h&gt;</code>. The process descriptor contains all the information about a specific process.</p>\n\n<p>The <code>task_struct</code> structure contains all the information that the kernel has and needs about a process. The process descriptor contains the data that describes the executing program open files, the process's address space, pending signals, the process's state, and much more.</p>\n\n<pre><code>#include &lt;linux/kernel.h&gt;\n#include &lt;linux/printk.h&gt;\n#include &lt;linux/sched.h&gt;\n\nasmlinkage long sys_proclist(void*)\n{\n    struct task_struct *task;\n\n    for_each_process(task) {\n        /* this prints the name and PID of each task */\n        printk(\"%s[%d]\\n\", task-&gt;comm, task-&gt;pid);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The macro <code>for_each_process(task)</code> iterates over the entire task list. On each iteration, task points to the next task in the list.</p>\n\n<p>Once you have the implementation of the system call in a <code>proclist.c</code> file,\nnow you have to add this system call to your kernel source, recompile the kernel, install and reboot to use it in user space.</p>\n\n<p><strong>To compile the kernel:</strong> do a little bit of reading (follow a tutorial) before doing it, you will break your system if anything goes wrong.</p>\n\n<p><strong>NOTE:</strong> File paths and file names provided in any tutorial may vary depending on the kernel version so be careful.</p>\n"}], "owner": {"reputation": 29, "user_id": 3386335, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ee5474555ffa0586fc1b8afb5fa85d49?s=128&d=identicon&r=PG&f=1", "display_name": "mambo", "link": "https://stackoverflow.com/users/3386335/mambo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 979, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1424281225, "creation_date": 1424274467, "question_id": 28587721, "link": "https://stackoverflow.com/questions/28587721/a-system-call-to-dump-information-about-all-system-processes-and-the-threads-in", "title": "A system call to dump information about all system processes and the threads in a multithreaded program", "body": "<p>How can I make a system call in linux (I'm using ubuntu) to dump information about all the processes in the system and also about the threads in my multithreaded program? Thank you so much for your help.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1424274127, "post_id": 28587469, "comment_id": 45482118, "body": "The first thing is that abData should be in fact an array of uints if endianess is relevant. The next thing is that you should swap the endianess before sending the data or after receiving the data."}, {"owner": {"reputation": 1, "user_id": 4502915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c1b00fc22f787f13670bb4c0116e60?s=128&d=identicon&r=PG&f=1", "display_name": "xPCSIM", "link": "https://stackoverflow.com/users/4502915/xpcsim"}, "reply_to_user": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1424274198, "post_id": 28587469, "comment_id": 45482182, "body": "but isnt it an array of uint? its uint8_t so am i wrong? i cant change the type of the data its &quot;fixed&quot; what would u do before or after? and how would u do? thanks for ur fast answer"}, {"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 1, "creation_date": 1424275475, "post_id": 28587469, "comment_id": 45483094, "body": "AFAIK, the bits within a byte are always stored in the same order. Machine endianess alters how bytes in multi-byte data elements are stored. So, a little endian 254 would be 0xFE, as would a big-endian one.However, a little-endian 256 would be 0x00, 0x01 while a big-endian one would be 0x01, 0x00. This is the reason I believe for chmikes comment - he&#39;s saying the array should be uint16 rather than uint8, since uint16s consume more than 1 byte of storage they can also be affected by changes in endianess. Make it an array of uint16 then pass each byte of the int in the right (expected) order."}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 1, "creation_date": 1424275591, "post_id": 28587469, "comment_id": 45483169, "body": "You didn&#39;t specify if the values are 16bits or 32bits. The data is probably encoded in network byte order (bigendian) so you need to convert it into host byte order (littleendian). To do this you have to use the ntohs(uint16_t) function or ntohl(uint32_t) function according to the size of the values you want to byte swap."}, {"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "reply_to_user": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 0, "creation_date": 1424281289, "post_id": 28587469, "comment_id": 45487041, "body": "@chmike ntoh won&#39;t necessarily help. It&#39;s the far end which is little-endian, not (necessarily) the host. Anyway, if <code>abData</code> is truly <code>uint8_t</code>, endianness is irrelevant."}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "reply_to_user": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 0, "creation_date": 1424423175, "post_id": 28587469, "comment_id": 45551235, "body": "@kdopen, the question is lacking information. It&#39;s not specified if the data to decode is in network byte order or just bigendian. It is also not specified how he concludes the endianess is wrong. There is a missing step in the decoded process. Anyway, the decoder has to swap the bytes in abData. He could do it manually."}], "owner": {"reputation": 1, "user_id": 4502915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c1b00fc22f787f13670bb4c0116e60?s=128&d=identicon&r=PG&f=1", "display_name": "xPCSIM", "link": "https://stackoverflow.com/users/4502915/xpcsim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424274920, "creation_date": 1424273842, "last_edit_date": 1424274920, "question_id": 28587469, "link": "https://stackoverflow.com/questions/28587469/convert-big-endian-to-little-endian-of-an-array-which-is-part-of-a-structure", "title": "convert big endian to little endian of an array which is part of a structure", "body": "<p>I have a structure which has these two elements:</p>\n\n<pre><code>_HEADER  tHeader;                   \nuint8_t  abData[DATA_SIZE];\n</code></pre>\n\n<p>As you can see it has got a header which is full of <code>uint</code> numbers and an array with size <code>DATA_SIZE</code></p>\n\n<p>I want to send this array in some project (not necessary to describe for the problem) and have a problem. The destination expects little endian of the abData[DATA_SIZE] but it is bigendian.. the header doesnt matter- it's correct. </p>\n\n<p>I'm really new in C so I dont know how to convert :/ googling is even more confusing so maybe you can give me a clue how to figure out! Is there a short function I can use to convert this array? The data in the array was copied from a structure including only uints... so maybe I can change the structure before copying or how would you pros handle that?</p>\n"}, {"tags": ["c", "function", "typedef"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1424273726, "post_id": 28587347, "comment_id": 45481848, "body": "May find <a href=\"http://cdecl.ridiculousfish.com/?q=void+%28inst_cb_t%29+%28const+char%2A%2C+size_t%29%3B\" rel=\"nofollow noreferrer\">this interesting</a>"}, {"owner": {"reputation": 3688, "user_id": 1111557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2b40cacf02c8fa3f91429ef441912ac?s=128&d=identicon&r=PG", "display_name": "inetknght", "link": "https://stackoverflow.com/users/1111557/inetknght"}, "edited": false, "score": 0, "creation_date": 1424273744, "post_id": 28587347, "comment_id": 45481864, "body": "No, that&#39;s a typedef for a function pointer. See <a href=\"http://stackoverflow.com/questions/1591361/understanding-typedefs-for-function-pointers-in-c-examples-hints-and-tips-ple\" title=\"understanding typedefs for function pointers in c examples hints and tips ple\">stackoverflow.com/questions/1591361/&hellip;</a>"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "reply_to_user": {"reputation": 3688, "user_id": 1111557, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f2b40cacf02c8fa3f91429ef441912ac?s=128&d=identicon&r=PG", "display_name": "inetknght", "link": "https://stackoverflow.com/users/1111557/inetknght"}, "edited": false, "score": 2, "creation_date": 1424273951, "post_id": 28587347, "comment_id": 45482008, "body": "@inetknght that&#39;s a typedef for a function, not for a function pointer."}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 12, "last_activity_date": 1567591481, "last_edit_date": 1567591481, "creation_date": 1424273658, "answer_id": 28587410, "question_id": 28587347, "link": "https://stackoverflow.com/questions/28587347/what-does-these-two-arguments-mean-in-typedef/28587410#28587410", "title": "What does these two arguments mean in typedef?", "body": "<p>The declaration  </p>\n\n<pre><code>typedef void (inst_cb_t) (const char*, size_t);\n</code></pre>\n\n<p>defines <code>inst_cb_t</code> as a function that takes two arguments of type <code>const char*</code> and <code>size_t</code> and returns <code>void</code>.   </p>\n\n<p>One interesting part of this declaration is that you can use this only in function declaration and pointer to function deceleration.   </p>\n\n<pre><code>inst_cb_t foo;  \n</code></pre>\n\n<p>You can't use it in function definition like  </p>\n\n<pre><code>inst_cb_t foo      // WRONG\n{\n    // Function body\n}  \n</code></pre>\n\n<p>Look at C standard:  </p>\n\n<h3>C11: 6.9.1 Function definitions:</h3>\n\n<blockquote>\n  <p>The identifier declared in a function definition (which is the name of the function) shall have a function type, as specified by the declarator portion of the function definition.<sup>162)</sup> </p>\n</blockquote>\n\n<p>and footnote 162 is  </p>\n\n<blockquote>\n  <p>The intent is that the type category in a function definition cannot be inherited from a <code>typedef</code>:  </p>\n\n<pre><code>typedef int F(void);              // type F is \u2018\u2018function with no parameters\n                                  // returning int\u2019\u2019\nF f, g;                           // f and g both have type compatible with F\nF f { /* ... */ }                 // WRONG: syntax/constraint error\nF g() { /* ... */ }               // WRONG: declares that g returns a function\nint f(void) { /* ... */ }         // RIGHT: f has type compatible with F\nint g() { /* ... */ }             // RIGHT: g has type compatible with F\nF *e(void) { /* ... */ }          // e returns a pointer to a function\nF *((e))(void) { /* ... */ }      // same: parentheses irrelevant\nint (*fp)(void);                  // fp points to a function that has type F\nF *Fp;                            // Fp points to a function that has type F\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 1217, "user_id": 4108363, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IWGPW.png?s=128&g=1", "display_name": "LPrc", "link": "https://stackoverflow.com/users/4108363/lprc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 0, "accepted_answer_id": 28587410, "answer_count": 1, "score": 6, "last_activity_date": 1567591481, "creation_date": 1424273495, "last_edit_date": 1424339709, "question_id": 28587347, "link": "https://stackoverflow.com/questions/28587347/what-does-these-two-arguments-mean-in-typedef", "title": "What does these two arguments mean in typedef?", "body": "<p>I have a piece of code and I don't understand that one <code>typedef</code>:</p>\n\n<pre><code>typedef void (inst_cb_t) (const char*, size_t);\n</code></pre>\n\n<p>Doesn't that actually mean you can use <code>inst_cb_t</code> as a <code>void</code> now? But what about the stuff in the second brackets?</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 2776, "user_id": 1941161, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ae4309dc77c0f9adf3258ade2483a4b3?s=128&d=identicon&r=PG", "display_name": "Scis", "link": "https://stackoverflow.com/users/1941161/scis"}, "edited": false, "score": 3, "creation_date": 1424273550, "post_id": 28587296, "comment_id": 45481711, "body": "How exactly did you come up with this conclusion ? What does the client code look like ?"}, {"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 3, "creation_date": 1424273718, "post_id": 28587296, "comment_id": 45481841, "body": "The code is correct and should write &quot;ABC&quot; in the first example and &quot;ABCD&quot; in the second example. The problem could be that you don&#39;t send the trailing \\0 along with the letters so that you misinterpret what is sent. Replace strlen(foo) with strlen(foo)+1."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1424273992, "post_id": 28587296, "comment_id": 45482036, "body": "How does the client know how many bytes to read?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4108117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HxV46.jpg?s=128&g=1", "display_name": "Chris Song", "link": "https://stackoverflow.com/users/4108117/chris-song"}, "edited": false, "score": 0, "creation_date": 1424283909, "post_id": 28588193, "comment_id": 45488596, "body": "The &quot;1 + strlen(foo)&quot; worked but I&#39;m not sure why it isn&#39;t required for strings less than 4 characters."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 3, "user_id": 4108117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HxV46.jpg?s=128&g=1", "display_name": "Chris Song", "link": "https://stackoverflow.com/users/4108117/chris-song"}, "edited": false, "score": 0, "creation_date": 1424284261, "post_id": 28588193, "comment_id": 45488790, "body": "@ChrisSong because passing a non <code>nul</code> terminated string to <code>fprintf()</code> causes undefined behavior, so it might work, or it may fail, it&#39;s undefined."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 0, "last_activity_date": 1424275728, "creation_date": 1424275728, "answer_id": 28588193, "question_id": 28587296, "link": "https://stackoverflow.com/questions/28587296/write-is-adding-padding-when-my-strings-are-4-5-characters/28588193#28588193", "title": "write() is adding padding when my strings are 4-5 characters?", "body": "<p>I suspect as apparently all the others, that you are reading the characters on the other side of the connection and printing them with <code>printf()</code> which expects a <code>nul</code> terminated sequence of bytes, i.e. a string, so either write the <code>nul</code> byte like this</p>\n\n<pre><code>write(sock, foo, 1 + strlen(foo));\n</code></pre>\n\n<p>or where you recieve it, do it like this</p>\n\n<pre><code>int count;\nchar array[LARGER_THAN_POSSIBLE_COUNT];\ncount = read(sock, array, sizeof(array));\nif (count &gt; 0)\n    fwrite(array, 1, count, stdout);\nfprintf(stdout, \"\\n\");\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4108117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HxV46.jpg?s=128&g=1", "display_name": "Chris Song", "link": "https://stackoverflow.com/users/4108117/chris-song"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 28588193, "answer_count": 1, "score": -3, "last_activity_date": 1424275728, "creation_date": 1424273384, "question_id": 28587296, "link": "https://stackoverflow.com/questions/28587296/write-is-adding-padding-when-my-strings-are-4-5-characters", "title": "write() is adding padding when my strings are 4-5 characters?", "body": "<p>The following write() is received by the client correctly:</p>\n\n<pre><code>char *foo = \"ABC\";\nwrite(sock, foo, strlen(foo));\n</code></pre>\n\n<p>But when I extend the foo string to 4 or 5 characters, write() will pad the string with garbage until it has 6 characters.  Example of a write that gets extra padding:</p>\n\n<pre><code>char *foo = \"ABCD\";\nwrite(sock, foo, strlen(foo));\n</code></pre>\n\n<p>Anybody know why this happens?</p>\n"}, {"tags": ["c", "gtk"], "comments": [{"owner": {"reputation": 41, "user_id": 4570142, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af3049127bde3e82bdf3a34b34aa44f8?s=128&d=identicon&r=PG&f=1", "display_name": "iMadz", "link": "https://stackoverflow.com/users/4570142/imadz"}, "edited": false, "score": 0, "creation_date": 1424272932, "post_id": 28587138, "comment_id": 45481285, "body": "the code to get the text is: static void ok_clicked(GtkWidget *widget, GtkWidget *entry){          const gchar *get_text;     get_text = gtk_entry_get_text(GTK_ENTRY(entry));     printf(&quot;entry contents: %s\\n&quot;,get_text); }"}], "answers": [{"tags": [], "owner": {"reputation": 80, "user_id": 3589654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a18caf2805aee949e91e99a03e5111?s=128&d=identicon&r=PG&f=1", "display_name": "Jurica Penjgu\u0161i\u0107", "link": "https://stackoverflow.com/users/3589654/jurica-penjgu%c5%a1i%c4%87"}, "is_accepted": true, "score": 0, "last_activity_date": 1424292644, "creation_date": 1424292644, "answer_id": 28593657, "question_id": 28587138, "link": "https://stackoverflow.com/questions/28587138/getting-a-number-from-an-entry-text/28593657#28593657", "title": "Getting a number from an entry text", "body": "<p>You could use <code>guint64 g_ascii_strtoll (const gchar *nptr,gchar **endptr,guint base);</code>\nwhich converts a string to a gint64 value. This function behaves like the standard strtoll() function does in the C locale. For double you could use</p>\n\n<pre><code>gdouble g_ascii_strtod (const gchar *nptr, gchar **endptr); I hope this helps. \n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4570142, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af3049127bde3e82bdf3a34b34aa44f8?s=128&d=identicon&r=PG&f=1", "display_name": "iMadz", "link": "https://stackoverflow.com/users/4570142/imadz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 28593657, "answer_count": 1, "score": 1, "last_activity_date": 1424292644, "creation_date": 1424272915, "last_edit_date": 1424273930, "question_id": 28587138, "link": "https://stackoverflow.com/questions/28587138/getting-a-number-from-an-entry-text", "title": "Getting a number from an entry text", "body": "<p>I am making an interface using GTK and C. I've put an entry text in my interface, the user will type only numbers. And I need to get the entered numbers to use them later. However, using the function <code>gtk_entry_get_text</code> will stock the entered text in a <code>const</code> <code>gchar</code> variable. How can I get what the user typed as a number?</p>\n\n<p>The code to get the text is: </p>\n\n<pre><code>static void ok_clicked(GtkWidget *widget, GtkWidget *entry){ \nconst gchar *get_text; \nget_text = gtk_entry_get_text(GTK_ENTRY(entry)); \nprintf(\"entry contents: %s\\n\",get_text); }\n</code></pre>\n"}, {"tags": ["c", "arrays", "count", "arguments", "scanf"], "comments": [{"owner": {"reputation": 224, "user_id": 4538133, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Livo5sx5qtU/AAAAAAAAAAI/AAAAAAAAAj0/qW5U23OSSVM/photo.jpg?sz=128", "display_name": "TheHorse", "link": "https://stackoverflow.com/users/4538133/thehorse"}, "edited": false, "score": 0, "creation_date": 1424273245, "post_id": 28587066, "comment_id": 45481511, "body": "Could you clarify what exactly it is you are trying to do?"}, {"owner": {"reputation": 2633, "user_id": 27898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84028aac31ee14ca90aa08c2442e3a1e?s=128&d=identicon&r=PG", "display_name": "mpez0", "link": "https://stackoverflow.com/users/27898/mpez0"}, "edited": false, "score": 0, "creation_date": 1424273314, "post_id": 28587066, "comment_id": 45481555, "body": "<code>scanf</code> returns &quot;the number of input items successfully matched and assigned.&quot; That&#39;s not quite what you asked, but it&#39;s probably close to what you want."}, {"owner": {"reputation": 16626, "user_id": 2694184, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/ebdf34f5c572d4a25df713ac80228328?s=128&d=identicon&r=PG&f=1", "display_name": "Gibbs", "link": "https://stackoverflow.com/users/2694184/gibbs"}, "edited": false, "score": 0, "creation_date": 1424275284, "post_id": 28587066, "comment_id": 45482965, "body": "scanf automaticalyy returns number of variables assigned. so <code>int count=scanf(&quot;%d&quot;.&amp;a)</code> will return 1 if a is successfully assigned. Similary you can use your statment"}], "answers": [{"comments": [{"owner": {"reputation": 694, "user_id": 4321774, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XBNKmQRq_NM/AAAAAAAAAAI/AAAAAAAAABE/OAyGYx3aB20/photo.jpg?sz=128", "display_name": "vdelricco", "link": "https://stackoverflow.com/users/4321774/vdelricco"}, "reply_to_user": {"reputation": 33, "user_id": 4577978, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b07b9f1eb31495741db410d6afe6e12b?s=128&d=identicon&r=PG&f=1", "display_name": "user4577978", "link": "https://stackoverflow.com/users/4577978/user4577978"}, "edited": false, "score": 1, "creation_date": 1424275856, "post_id": 28588005, "comment_id": 45483350, "body": "I think I better understand what you want to do. Please check my edit. When scanf returns &gt; 0, a value was successfully set and you can increment the counter. Otherwise, just break the loop and you should be left with the correct number of values set in scanf_counter after the loop breaks."}, {"owner": {"reputation": 224, "user_id": 4538133, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Livo5sx5qtU/AAAAAAAAAAI/AAAAAAAAAj0/qW5U23OSSVM/photo.jpg?sz=128", "display_name": "TheHorse", "link": "https://stackoverflow.com/users/4538133/thehorse"}, "reply_to_user": {"reputation": 33, "user_id": 4577978, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b07b9f1eb31495741db410d6afe6e12b?s=128&d=identicon&r=PG&f=1", "display_name": "user4577978", "link": "https://stackoverflow.com/users/4577978/user4577978"}, "edited": false, "score": 1, "creation_date": 1424275928, "post_id": 28588005, "comment_id": 45483412, "body": "@user4577978 Please clarify what you are looking for. We cannot help you otherwise."}, {"owner": {"reputation": 694, "user_id": 4321774, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XBNKmQRq_NM/AAAAAAAAAAI/AAAAAAAAABE/OAyGYx3aB20/photo.jpg?sz=128", "display_name": "vdelricco", "link": "https://stackoverflow.com/users/4321774/vdelricco"}, "edited": false, "score": 0, "creation_date": 1424314930, "post_id": 28588005, "comment_id": 45502211, "body": "You&#39;re welcome, would you mind selecting my answer as the accepted answer as it seems to have helped you?"}, {"owner": {"reputation": 694, "user_id": 4321774, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XBNKmQRq_NM/AAAAAAAAAAI/AAAAAAAAABE/OAyGYx3aB20/photo.jpg?sz=128", "display_name": "vdelricco", "link": "https://stackoverflow.com/users/4321774/vdelricco"}, "edited": false, "score": 0, "creation_date": 1424316457, "post_id": 28588005, "comment_id": 45502558, "body": "There should be a check mark to the left of my answer near the up and down arrows. If you click that, it should turn green and it will show my answer as accepted."}], "tags": [], "owner": {"reputation": 694, "user_id": 4321774, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XBNKmQRq_NM/AAAAAAAAAAI/AAAAAAAAABE/OAyGYx3aB20/photo.jpg?sz=128", "display_name": "vdelricco", "link": "https://stackoverflow.com/users/4321774/vdelricco"}, "is_accepted": true, "score": 2, "last_activity_date": 1424275708, "last_edit_date": 1424275708, "creation_date": 1424275202, "answer_id": 28588005, "question_id": 28587066, "link": "https://stackoverflow.com/questions/28587066/counting-arguments-passed-to-scanf-in-c/28588005#28588005", "title": "Counting arguments passed to scanf() in C", "body": "<p>I don't think there's a built in way to do this, but why not just create a counter that increments when scanf returns successfully and break the loop otherwise?</p>\n\n<pre><code>int scanf_counter = 0;\nint array[1000], i;\n\nfor(i=0;i&lt;1000;i++) {\n\n    if(scanf(\"%d\",&amp;array[i] &gt; 0) {\n        scanf_counter++;\n    } else {\n        break;\n    }\n\n}\n</code></pre>\n\n<p>Although I'm not sure I understand your question exactly because you could always just find the size of the array by doing this</p>\n\n<pre><code>int size = sizeof(array)/sizeof(array[0])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1424382872, "post_id": 28597899, "comment_id": 45538422, "body": "400000 bytes (100000*sizeof int) on the stack is a very bad idea.  Suggest placing the array in the file global address space"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1424383007, "post_id": 28597899, "comment_id": 45538496, "body": "I see your having a similar problem as I do regarding placing $include &lt;...&gt; statements in an answer.  Does anyone know of a fix?"}], "tags": [], "owner": {"reputation": 33, "user_id": 4577978, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b07b9f1eb31495741db410d6afe6e12b?s=128&d=identicon&r=PG&f=1", "display_name": "user4577978", "link": "https://stackoverflow.com/users/4577978/user4577978"}, "is_accepted": false, "score": 0, "last_activity_date": 1424314379, "creation_date": 1424314379, "answer_id": 28597899, "question_id": 28587066, "link": "https://stackoverflow.com/questions/28587066/counting-arguments-passed-to-scanf-in-c/28597899#28597899", "title": "Counting arguments passed to scanf() in C", "body": "<p>Look the scanf() fragment carefully, thus:</p>\n\n<h1>include </h1>\n\n<p>int main()</p>\n\n<p>{\n    double a[100000],mx=0;</p>\n\n<pre><code>int i,j,c=0;\nprintf(\"Enter as many numbers as you wish . Press Ctrl+D or any character to stop inputting :\\n\");  \n\nfor(i=0;i&lt;100000;i++)\n\n{\n    if((scanf(\"%lf\",&amp;a[i]))==1)\n\n        c++;\n\n    //else break;\n\n}\n\nfor(j=0;j&lt;c;j++)\n\n{\n    if(a[j]&gt;mx) mx=a[j];\n}\n\nprintf(\"You have inserted %d values and the maximum is:%g\",c,mx);\n\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 33, "user_id": 4577978, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b07b9f1eb31495741db410d6afe6e12b?s=128&d=identicon&r=PG&f=1", "display_name": "user4577978", "link": "https://stackoverflow.com/users/4577978/user4577978"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1747, "favorite_count": 0, "accepted_answer_id": 28588005, "answer_count": 2, "score": 2, "last_activity_date": 1424314379, "creation_date": 1424272746, "last_edit_date": 1424276478, "question_id": 28587066, "link": "https://stackoverflow.com/questions/28587066/counting-arguments-passed-to-scanf-in-c", "title": "Counting arguments passed to scanf() in C", "body": "<p>Is there any way to Count number of arguments passed to <code>scanf()</code> in C ? Specially, while assigning <code>int</code> arrays through <code>scanf()</code>. \nExample:</p>\n\n<pre><code>int array[1000], i;\nfor(i=0;i&lt;1000;i++)\n    scanf(\"%d\",&amp;array[i]);\n</code></pre>\n\n<p>I need to count how many values are inserted by user </p>\n"}, {"tags": ["c", "makefile", "shared-libraries", "tcl", "configure"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1424274675, "post_id": 28587042, "comment_id": 45482528, "body": "That&#39;s not a tcl build problem. That&#39;s a your app linking problem. How did you link your app to tcl? What does <code>ldd</code> say about your app?"}], "answers": [{"tags": [], "owner": {"reputation": 1585, "user_id": 110126, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a97e0e8ce453ea59823f78f898a68caf?s=128&d=identicon&r=PG", "display_name": "buzz3791", "link": "https://stackoverflow.com/users/110126/buzz3791"}, "is_accepted": false, "score": 1, "last_activity_date": 1424278856, "creation_date": 1424278856, "answer_id": 28589370, "question_id": 28587042, "link": "https://stackoverflow.com/questions/28587042/does-configure-disable-shared-work-with-tcl-8-6-3-need-static-libtcl8-6-a/28589370#28589370", "title": "Does configure --disable-shared work with tcl 8.6.3? Need static libtcl8.6.a", "body": "<p>As @Etan suggested, I re-linked the app and the problem went away.</p>\n\n<p>My failing version of the app was linked through soft-links (using ln) so I didn't have to disturb the build environment too much when upgrading from 8.4.11 to 8.6.3.</p>\n\n<p>My working version did way with the soft-links and instead updated the build environment to properly link to 8.6.3 directly.</p>\n"}], "owner": {"reputation": 1585, "user_id": 110126, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a97e0e8ce453ea59823f78f898a68caf?s=128&d=identicon&r=PG", "display_name": "buzz3791", "link": "https://stackoverflow.com/users/110126/buzz3791"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424278856, "creation_date": 1424272690, "question_id": 28587042, "link": "https://stackoverflow.com/questions/28587042/does-configure-disable-shared-work-with-tcl-8-6-3-need-static-libtcl8-6-a", "title": "Does configure --disable-shared work with tcl 8.6.3? Need static libtcl8.6.a", "body": "<p>My goal is to build a static libtcl8.6.a</p>\n\n<p>So I just tried to build tcl8.6.3 with</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>./configure --enable-threads --disable-shared --enable-symbols=mem\n</code></pre>\n\n<p>Then I linked my app to libtcl8.6.a.  But when I run the app I get this output:</p>\n\n<blockquote>\n  <p>error while loading shared libraries: libtcl8.6.so: cannot open shared object file: No such file or directory\n  It's as if the --disable-shared config was ignored.</p>\n</blockquote>\n\n<p>Is that expected with tcl 8.6.3?</p>\n"}, {"tags": ["c", "pointers", "language-lawyer", "undefined-behavior"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1424272988, "post_id": 28587022, "comment_id": 45481325, "body": "You are not using the value of the pointer, only the address of the variable that stores the pointer value.  Which is well-defined."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 9, "last_activity_date": 1424273297, "last_edit_date": 1424273297, "creation_date": 1424272871, "answer_id": 28587117, "question_id": 28587022, "link": "https://stackoverflow.com/questions/28587022/is-it-undefined-behavior-to-take-the-address-of-an-uninitialized-pointer/28587117#28587117", "title": "Is it undefined behavior to take the address of an uninitialized pointer?", "body": "<p>The pointer's value and its address are not the same.</p>\n\n<pre><code>void *foo;\n</code></pre>\n\n<p>That pointer has an undefined value, but the address of <code>foo</code>, i.e. the value of <code>&amp;foo</code>, must be well-determined (since otherwise we can't access it).</p>\n\n<p>At least that's my intuitive understanding, I didn't dig up the standard now, I just think you're mis-reading it.</p>\n\n<p>When talking about code, the two are sometimes confused (\"what's the address of that pointer?\" <em>can</em> mean \"what's the value of that pointer, what address is it pointing to?\") but they are really distinct.</p>\n"}, {"comments": [{"owner": {"reputation": 3993, "user_id": 125405, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/71e57d309c0a11cc78732e82e3486f3e?s=128&d=identicon&r=PG", "display_name": "wolfPack88", "link": "https://stackoverflow.com/users/125405/wolfpack88"}, "edited": false, "score": 0, "creation_date": 1424273109, "post_id": 28587163, "comment_id": 45481401, "body": "As <code>NULL</code> is normally <code>#define</code>d as 0, and the standard makes explicit allowance for calling <code>strtol</code> with <code>**endptr</code> as <code>NULL</code>, why can&#39;t you do <code>strtol(str, 0, 10);</code>?"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 3993, "user_id": 125405, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/71e57d309c0a11cc78732e82e3486f3e?s=128&d=identicon&r=PG", "display_name": "wolfPack88", "link": "https://stackoverflow.com/users/125405/wolfpack88"}, "edited": false, "score": 0, "creation_date": 1424273524, "post_id": 28587163, "comment_id": 45481695, "body": "My answer is a bit misleading...It&#39;s in reply to <i>...provided that endptr is not a null pointer.</i> Of course, it does allow it to be <code>0</code>. I&#39;ll edit that part."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 2, "last_activity_date": 1424273713, "last_edit_date": 1424273713, "creation_date": 1424272985, "answer_id": 28587163, "question_id": 28587022, "link": "https://stackoverflow.com/questions/28587022/is-it-undefined-behavior-to-take-the-address-of-an-uninitialized-pointer/28587163#28587163", "title": "Is it undefined behavior to take the address of an uninitialized pointer?", "body": "<p>No. It's not undefined behaviour. Only <code>ptr</code> is uninitialized and has indeterminate value but <code>&amp;ptr</code> has a proper value. </p>\n\n<p>What the standard quote on <code>strtol</code> says:</p>\n\n<p><em>...If the subject sequence is empty or does not have the expected form, no conversion is performed; the value of nptr is stored in the object pointed to by endptr, provided that endptr is not a null pointer.</em></p>\n\n<p>That above quote is talks about a call like this:</p>\n\n<pre><code>strtol(str, 0, 10);\n</code></pre>\n\n<p>The call in the man page and the linked answer are perfectly fine.</p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 2, "last_activity_date": 1424273465, "last_edit_date": 1424273465, "creation_date": 1424273110, "answer_id": 28587208, "question_id": 28587022, "link": "https://stackoverflow.com/questions/28587022/is-it-undefined-behavior-to-take-the-address-of-an-uninitialized-pointer/28587208#28587208", "title": "Is it undefined behavior to take the address of an uninitialized pointer?", "body": "<p>See this example  </p>\n\n<pre><code>char * ptr; \n</code></pre>\n\n<p>Since <code>ptr</code> is not pointing to any object, dereferencing it invokes undefined behavior. But when you pass its address to <code>strtol</code>, having syntax  </p>\n\n<pre><code>long int strtol(const char *nptr, char **endptr, int base);  \n</code></pre>\n\n<p>in statement  </p>\n\n<pre><code>long parsed = strtol(\"11110111\", &amp;ptr, 2);   \n</code></pre>\n\n<p>the <code>endptr</code> parameter of <code>strtol</code> is pointing to object <code>ptr</code> and derefeencing it will not invoke any UB.</p>\n"}, {"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": true, "score": 4, "last_activity_date": 1424273574, "creation_date": 1424273574, "answer_id": 28587371, "question_id": 28587022, "link": "https://stackoverflow.com/questions/28587022/is-it-undefined-behavior-to-take-the-address-of-an-uninitialized-pointer/28587371#28587371", "title": "Is it undefined behavior to take the address of an uninitialized pointer?", "body": "<p>In this expression:</p>\n\n<p><code>&amp;ptr</code></p>\n\n<p>the address of the <code>&amp;</code> operand, i. e., the address of the <code>ptr</code> object is yielded but the <code>ptr</code> object is never evaluated.</p>\n\n<p>(C11, 6.3.2.1p2) \"Except when it is the operand of the sizeof operator, the unary &amp; operator, the ++ operator, the -- operator, or the left operand of the . operator or an assignment operator, an lvalue that does not have array type is converted to the value stored in the designated object (and is no longer an lvalue); this is called lvalue conversion.\"</p>\n"}, {"tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 0, "last_activity_date": 1424274696, "creation_date": 1424274696, "answer_id": 28587824, "question_id": 28587022, "link": "https://stackoverflow.com/questions/28587022/is-it-undefined-behavior-to-take-the-address-of-an-uninitialized-pointer/28587824#28587824", "title": "Is it undefined behavior to take the address of an uninitialized pointer?", "body": "<p>I only have access to N1256 but I will be surprised if there is any material change.</p>\n\n<p>The most relevant section is \"6.5.3.2 Address and indirection operators\"</p>\n\n<p>And in particular paragraph 3 (my emphasis):</p>\n\n<blockquote>\n  <p>Semantics </p>\n  \n  <p>3 <strong>The unary &amp; operator yields the address of its operand.</strong> If the\n  operand has type ''type'', the result has type ''pointer to type''. If\n  the operand is the result of a unary * operator, neither that operator\n  nor the &amp; operator is evaluated and the result is as if both were\n  omitted, except that the constraints on the operators still apply and\n  the result is not an lvalue. Similarly, if the operand is the result\n  of a [] operator, neither the &amp; operator nor the unary * that is\n  implied by the [] is evaluated and the result is as if the &amp; operator\n  were removed and the [] operator were changed to a + operator.\n  Otherwise, the result is a pointer to the object or function\n  designated by its operand.</p>\n</blockquote>\n\n<p>None of the cited paragraphs in the OP apply because as many have pointed out. The value of something and its address are very different.</p>\n\n<p>I would argue that the absence of any restriction on &amp; regarding uninitialized values taking their address is permitted (by the absence of prohibition).</p>\n\n<p>NOTE: We all know it's fine but it's very rare to find statements in these standards that explicitly say \"Yes you can do so &amp; so.\"</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3920237"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "accepted_answer_id": 28587371, "answer_count": 5, "score": 5, "last_activity_date": 1424274696, "creation_date": 1424272634, "last_edit_date": 1495539874, "question_id": 28587022, "link": "https://stackoverflow.com/questions/28587022/is-it-undefined-behavior-to-take-the-address-of-an-uninitialized-pointer", "title": "Is it undefined behavior to take the address of an uninitialized pointer?", "body": "<p>N1570 states that this is undefined behavior:</p>\n\n<blockquote>\n  <p>\u00a7J.2/1 The value of an object with automatic storage duration is used\n  while it is indeterminate (6.2.4, 6.7.9, 6.8).</p>\n</blockquote>\n\n<p>And in this case, our pointer has an indeterminate value:</p>\n\n<blockquote>\n  <p>\u00a76.7.9/10 If an object that has automatic storage duration is not\n  initialized explicitly, its value is indeterminate. If an object that\n  has static or thread storage duration is not initialized explicitly,\n  then:</p>\n  \n  <p>\u2014 if it has pointer type, it is initialized to a null pointer;</p>\n</blockquote>\n\n<p>I then presume the following test program exhibits undefined behavior:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    char * ptr;\n    printf(\"%p\", (void*)&amp;ptr);\n}\n</code></pre>\n\n<p>My motivating concern is the <code>strtol</code> function. First, let me quote the parts of N1570 related to the <code>endptr</code> parameter:</p>\n\n<blockquote>\n  <p>\u00a77.22.1.4/5 If the subject sequence has the expected form and the\n  value of base is zero, the sequence of characters starting with the\n  first digit is interpreted as an integer constant according to the\n  rules of 6.4.4.1. [...] A pointer to the final string is stored in the\n  object pointed to by <code>endptr</code>, provided that <code>endptr</code> is not a null\n  pointer.</p>\n  \n  <p>\u00a77.22.1.4/7 If the subject sequence is empty or does not have the\n  expected form, no conversion is performed; the value of <code>nptr</code> is\n  stored in the object pointed to by <code>endptr</code>, provided that <code>endptr</code> is\n  not a null pointer.</p>\n</blockquote>\n\n<p>This implies that <code>endptr</code> needs to be pointing to an object, and also that <code>endptr</code> is at some point dereferenced. For example, <a href=\"https://www.opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/libkern/strtol.c\" rel=\"nofollow noreferrer\">this implementation does so</a>:</p>\n\n<pre><code>if (endptr != 0)\n    *endptr = (char *)(any ? s - 1 : nptr);\n</code></pre>\n\n<p>Yet, <a href=\"https://stackoverflow.com/a/117870/3920237\">this highly upvoted answer</a> as well as <a href=\"http://man7.org/linux/man-pages/man3/strtol.3.html\" rel=\"nofollow noreferrer\">this man page</a> both show <code>endptr</code> being passed to <code>strtol</code> uninitialized. Is there an exception which makes this not undefined behavior?</p>\n"}, {"tags": ["c", "enums", "int"], "comments": [{"owner": {"reputation": 9854, "user_id": 1741450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7900ed57a92b336effd879fa61de226?s=128&d=identicon&r=PG", "display_name": "lucasg", "link": "https://stackoverflow.com/users/1741450/lucasg"}, "edited": false, "score": 0, "creation_date": 1424270967, "post_id": 28586361, "comment_id": 45480071, "body": "Ctrl+F &quot;malloc&quot; return nothing in your code : where do you allocate stack ?"}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 9854, "user_id": 1741450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7900ed57a92b336effd879fa61de226?s=128&d=identicon&r=PG", "display_name": "lucasg", "link": "https://stackoverflow.com/users/1741450/lucasg"}, "edited": false, "score": 0, "creation_date": 1424271137, "post_id": 28586361, "comment_id": 45480179, "body": "@georgesl Up in my stack_t structure I have card_t deck[52] that&#39;s where I&#39;ve allocated it."}, {"owner": {"reputation": 9854, "user_id": 1741450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7900ed57a92b336effd879fa61de226?s=128&d=identicon&r=PG", "display_name": "lucasg", "link": "https://stackoverflow.com/users/1741450/lucasg"}, "edited": false, "score": 0, "creation_date": 1424271532, "post_id": 28586361, "comment_id": 45480418, "body": "my issue is this line : &quot;stack_h *stack;&quot; . It hints that you want to use a heap-allocated memory to hold your instance called &#39;stack&#39;. However, dynamically allocation in C has to be manually done using the malloc function. Your &#39;stack&#39; variable is just a dangling pointer."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424271716, "post_id": 28586361, "comment_id": 45480525, "body": "BTW, where is <code>stack_h</code> defined? I see only <code>stack_t</code>."}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "edited": false, "score": 0, "creation_date": 1424271888, "post_id": 28586361, "comment_id": 45480618, "body": "stack_h *stack; this is in main and should be declaring it unless I&#39;m wrong."}, {"owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1424271975, "post_id": 28586361, "comment_id": 45480672, "body": "This didn&#39;t compile.  <code>stack_h</code> isn&#39;t defined, and you&#39;re missing a ; in the <code>stack_t</code> declaration."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424271977, "post_id": 28586361, "comment_id": 45480675, "body": "<code>stack_h</code> is a type. Where is it&#39;s definition?"}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424272073, "post_id": 28586361, "comment_id": 45480745, "body": "@EugeneSh. I messed up there when I declared the stack_t I meant for it to be stack_h which I changed and everything should be in order. My bad when I was getting the code over here from my compiler."}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424272257, "post_id": 28586361, "comment_id": 45480865, "body": "@EugeneSh. I have it to where stack_t becomes stack_h then later inside of main I have it stack_h *stack. Which should have it as a pointer allowing me to use what I have down below."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424272326, "post_id": 28586361, "comment_id": 45480905, "body": "Ok, you might want to add a semicolon after <code>stack_h</code>. But having a pointer is not enough to do whatever you do down below. This pointer has to point to some allocated memory. In you case it is just uninitialized (having some random value, or NULL)."}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424272510, "post_id": 28586361, "comment_id": 45481010, "body": "@EugeneSh. Okay. I have done that and ran it through my compiler and I receive no errors. But it still does what I said. I haven&#39;t ever used malloc nor do I know how."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424272545, "post_id": 28586361, "comment_id": 45481024, "body": "So you might want to show us the updated code. I guess it is a good time to learn how to use <code>malloc</code>. Pretty handy stuff."}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424273002, "post_id": 28586361, "comment_id": 45481334, "body": "@EugeneSh. So I&#39;ve updated it to how was told to declare my stack_h, the updated code is above."}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424273029, "post_id": 28586361, "comment_id": 45481352, "body": "@EugeneSh. I&#39;ve seen malloc used sometimes but I don&#39;t fully understand it"}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "edited": false, "score": 0, "creation_date": 1424273165, "post_id": 28586361, "comment_id": 45481436, "body": "@MikeHousky I&#39;ve made those changes but I don&#39;t know exactly how to use malloc, the changes made compiled correctly I guess all thats left is to use malloc which I don&#39;t really know what yo do with."}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424273434, "post_id": 28586361, "comment_id": 45481637, "body": "@EugeneSh. So you are saying that up in my struct where I have size declared I set it to 0 which in code int size = 0; ?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424273519, "post_id": 28586361, "comment_id": 45481690, "body": "I guess, putting <code>stack-&gt;size=0;</code> in the beginning of your <code>deck_init</code> will be enough (see the update about <code>deck_show</code> as well)."}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424274508, "post_id": 28586361, "comment_id": 45482397, "body": "@EugeneSh. For deck_show () I fixed the format error I changed the x to an I so that I&#39;d have more cards instead of repeats but it only counts 40 cards and that&#39;s it and also it doesn&#39;t make the suits correctly so I think maybe doing the same for suits or setting j to read every 13 cards and put it into that suit"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424275608, "post_id": 28586361, "comment_id": 45483176, "body": "<code>j</code> is still uninitialized."}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424276365, "post_id": 28586361, "comment_id": 45483737, "body": "@EugeneSh. I just initialized it sorry for the delay on that. I was testing but I changed The j to read in each suit and each card by changing I &lt; 13; is that okay to do?"}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424276732, "post_id": 28586361, "comment_id": 45483999, "body": "@EugeneSh. Yes :D I just need it to display the actual name Ace instead of 0 and so on so forth."}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424276923, "post_id": 28586361, "comment_id": 45484121, "body": "@EugeneSh. Do you think that if I create a const char* {}with the names inside and then take it down to my print that&#39;d work?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424276988, "post_id": 28586361, "comment_id": 45484162, "body": "Look here: <a href=\"http://www.lemoda.net/c/c-string-array-initialization/\" rel=\"nofollow noreferrer\">lemoda.net/c/c-string-array-initialization</a>"}, {"owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1424285187, "post_id": 28586361, "comment_id": 45489297, "body": "@EugeneSh. Alright thank you very much for the help! I have resolved what I needed at the moment!"}], "answers": [{"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 1, "last_activity_date": 1424273655, "last_edit_date": 1424273655, "creation_date": 1424271495, "answer_id": 28586643, "question_id": 28586361, "link": "https://stackoverflow.com/questions/28586361/c-blackjack-compiles-but-segmentation-faults/28586643#28586643", "title": "C BlackJack compiles but Segmentation Faults", "body": "<p>The <code>stack</code> structure is not allocated anywhere, and you are attempting to access unallocated <code>stack</code> pointer's fields in your <code>deck_init</code> (and later). You might want to allocate it dynamically using <code>malloc</code> or declare <code>stack_t</code> variable in your <code>main</code> statically, and work with pointer to it.  <br>\nUpd( After the edit) : The <code>stack-&gt;size</code> is not initialized anywhere as well. It should be initialized to zero prior the use in <code>deck_init</code>. <br>\nUpd2: In <code>deck_show</code> you are attempting to print uninitialized variables <code>i,j</code>, and also passing the two variables, while only one formatting modifier in <code>printf</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "is_accepted": false, "score": 0, "last_activity_date": 1424272479, "creation_date": 1424272479, "answer_id": 28586972, "question_id": 28586361, "link": "https://stackoverflow.com/questions/28586361/c-blackjack-compiles-but-segmentation-faults/28586972#28586972", "title": "C BlackJack compiles but Segmentation Faults", "body": "<p>If you want to allocate a stack in <code>main()</code> and pass it's pointer to functions you call, use:</p>\n\n<pre><code>stack_t stack; /* or stack_h if that's your new type name */\n</code></pre>\n\n<p>Then use <code>&amp;stack</code> to pass it's pointer to a function that takes a stack pointer:</p>\n\n<pre><code>deck_init(&amp;stack): /* for example */\n</code></pre>\n\n<p>Your <code>stack_t *stack;</code> declaration creates a pointer only, and does not give that pointer a value.</p>\n\n<p>If this was a large structure, or if there were going to be many of them, then you might want to use <code>malloc()</code> to allocate them at run-time, but I'd wait and add that complexity later--if it's even needed.</p>\n"}], "owner": {"reputation": 23, "user_id": 4573959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecd0b3e3797b6bb3cc090c83f15d0b97?s=128&d=identicon&r=PG&f=1", "display_name": "CodeHero", "link": "https://stackoverflow.com/users/4573959/codehero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 28586643, "answer_count": 2, "score": 1, "last_activity_date": 1424276384, "creation_date": 1424270675, "last_edit_date": 1424276384, "question_id": 28586361, "link": "https://stackoverflow.com/questions/28586361/c-blackjack-compiles-but-segmentation-faults", "title": "C BlackJack compiles but Segmentation Faults", "body": "<pre><code> #include &lt;stdio.h&gt;\n #include &lt;stdlib.h&gt;\n #include &lt;time.h&gt;\n #include &lt;getopt.h&gt;\n\n\ntypedef enum {Clubs, Diamonds, Hearts, Spades} suit_t;\ntypedef enum {Ace = 1, Two = 2, Three = 3, Four = 4, Five = 5, Six = 6, Seven = 7, Eight = 8, Nine = 9, Ten = 10, Jack = 10, Queen = 10, King = 10} face_t;\n\ntypedef struct card_t\n{\n        suit_t suit;\n        face_t face;\n} card;\n\ntypedef struct stack_t\n{\n    card_t deck[52];\n    int size;\n} stack_h;\n\nvoid deck_init(stack_h *stack);\nint main()\n{\n        stack_h stack;\n        int entry;\n        printf(\"Welcome to BlackJack by CodeHero\\n\");\n        fflush ( stdout );\n        printf(\"Enter 1 to Continue or press 2 to Exit\\n\");\n        fflush ( stdout );\n        scanf(\"%d\", &amp;entry);\n        fflush ( stdin );\n\n        switch ( entry )\n        {\n                case 1:\n\n                        deck_init ( &amp;stack );\n                        deck_show ( &amp;stack );\n                        break;\n                case 2:\n                        printf(\"Exitting\\n\");\n                        fflush ( stdout );\n                        exit( 1 );\n                        break;\n        }\n}\n\n void deck_init(stack_h *stack)\n {\n        for (int i = Ace; i &lt;= King; ++i)\n        {\n                for (int j = Clubs; j &lt;= Spades; j++)\n                {\n                         stack-&gt;deck[stack-&gt;size].face = i;\n                         stack-&gt;deck[stack-&gt;size].suit = j;\n                         stack-&gt;size++;\n                }\n        }\n}\n\nvoid deck_show (stack_h *stack)\n{\n    int x, i ,j;\n    printf(\"%d Cards in the deck. \", stack -&gt; size);\n    for (i = 0; i&lt; 13; i++)\n    {\n      for(j=0; j &lt; 4; j++)\n      {\n                printf(\"%d of %d\\n\", i, j);\n       }\n     }\n}\n</code></pre>\n\n<p>What I am trying to do is fill the deck with cards and then display all the cards to make sure that the filling of the deck is working, but when I compile it says I have no errors then I go to running the program and it gets all the way to where it says stack->deck[stack->size].face = i; then segmentation faults. I dont really know what I need to do with this since I believe it should work. I have tried changing it from being a pointer to just a regular style stack.deck sorta technique but that came to the same problem. I think it may have an issue to due with the 'enum' not being an int and it does not want to increment an 'enum' or something like that, maybe anyways.</p>\n"}, {"tags": ["c", "assembly", "x86", "mingw", "inline-assembly"], "answers": [{"tags": [], "owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "is_accepted": false, "score": 1, "last_activity_date": 1424274194, "creation_date": 1424274194, "answer_id": 28587601, "question_id": 28586179, "link": "https://stackoverflow.com/questions/28586179/merging-together-inline-assembly-snippets/28587601#28587601", "title": "Merging together inline assembly snippets", "body": "<p>Those are nonsensical asm blocks to start with. Rule of thumb is, if you ever use a <code>mov</code> you are probably doing it wrong. Also, even though you claimed it works as expected, the code is broken. Nothing stops the compiler from allocating <code>%2</code> to the same register as <code>%0</code> producing wrong code. You were just lucky it didn't happen for you.</p>\n\n<p>Anyway, the second asm block simply copies <code>i</code> into <code>x</code>. As such a merged asm could look like:</p>\n\n<pre><code>__asm__ (\"movl %2, %0;\"\n         \"subl %3, %0;\"\n         \"movl %0, %1;\"\n           : \"=&amp;r\" (i), \"=r\" (x)\n           : \"r\" (4), \"r\" (x));\n</code></pre>\n\n<p>This is of course still silly, but at least it isn't technically wrong. Notice the early-clobber <code>&amp;</code> modifier for the first output. It isn't needed for the second, however.</p>\n"}, {"tags": [], "owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "is_accepted": true, "score": 1, "last_activity_date": 1424274262, "creation_date": 1424274262, "answer_id": 28587629, "question_id": 28586179, "link": "https://stackoverflow.com/questions/28586179/merging-together-inline-assembly-snippets/28587629#28587629", "title": "Merging together inline assembly snippets", "body": "<p>The first <code>__asm__</code> sets: <code>i &lt;- 4 - x</code>. The second sets: <code>x &lt;- i</code>. They can be combined as:</p>\n\n<pre><code>__asm__ (\"subl %k2, %k0\" : \"=r\" (x) : \"0\" ((unsigned)(4)), \"g\" (x));\n</code></pre>\n\n<p>No clobbers are needed (unless you want to include <code>\"cc\"</code>, which is always assumed by gcc anyway), and there's no issue of inputs being overwritten before they are read. The <code>\"g\"</code> constraint indicates that a register, memory, or immediate operand is acceptable. The output should be: <code>\"-1\"</code> in this case: <code>x &lt;- 4 - 5</code></p>\n\n<p>Note: the first <code>__asm__</code> should have <code>=&amp;r</code> for its output. Furthermore, neither should list <code>%0</code> as clobbered - this is implicit, as <code>%0</code> is an output in both cases.</p>\n"}], "owner": {"reputation": 1446, "user_id": 2464424, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9d81757c14f0f6e43348730fd49dd645?s=128&d=identicon&r=PG", "display_name": "user2464424", "link": "https://stackoverflow.com/users/2464424/user2464424"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 28587629, "answer_count": 2, "score": 2, "last_activity_date": 1424274262, "creation_date": 1424270081, "last_edit_date": 1424274244, "question_id": 28586179, "link": "https://stackoverflow.com/questions/28586179/merging-together-inline-assembly-snippets", "title": "Merging together inline assembly snippets", "body": "<p>So, I have this code that works as expected:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main () {\n    unsigned int i;\n    int x=5;\n\n    __asm__ (\"movl %1, %0;\"\n             \"subl %2, %0;\"\n           : \"=r\" (i)\n           : \"r\" (4), \"r\" (x)\n           : \"0\");\n\n     __asm__ (\"movl %1, %0;\"\n           : \"=r\" (x)\n           : \"r\" (i)\n           : \"0\");\n\n    printf(\"%d\\n\", x);\n    return 0;\n}\n</code></pre>\n\n<p>How do I merge the two calls into one?</p>\n"}, {"tags": ["c", "multithreading", "pthreads", "semaphore", "barrier"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1424269859, "post_id": 28586044, "comment_id": 45479365, "body": "<a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Don&#39;t cast the return value of <code>malloc()</code> in C</a>. Write your allocations like: <code>st_main = malloc(sizeof *st_main);</code>. Much shorter, no pointless casts, and a bit safer too."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1424269859, "post_id": 28586044, "comment_id": 45479366, "body": "As almost everyone else, you cast <code>malloc()</code>, <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">which is not needed</a> but ignore it&#39;s return value, which is bad practice. Also, use a mutex, and don&#39;t use a global variable, pass the array to the thread function via the last argument to <code>pthread_create</code>. And remember each <code>malloc()</code> should be matched by a <code>free()</code> somewhere."}, {"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 0, "creation_date": 1424270035, "post_id": 28586044, "comment_id": 45479477, "body": "Semaphore? Barriers? I&#39;d avoid them searching for maximum in array, they&#39;ll hurt performance enough to push you back to a straight non parallel execution. If you&#39;re doing this for performance I&#39;d consider to use <i>atomics</i> (with a very careful implementation) or even (if your architecture allows you this <i>trick</i>) using <i>volatile</i>."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 2044100, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3fb1d42c871662815cb06a9785469512?s=128&d=identicon&r=PG", "display_name": "Jf2k", "link": "https://stackoverflow.com/users/2044100/jf2k"}, "edited": false, "score": 0, "creation_date": 1424321726, "post_id": 28586345, "comment_id": 45503910, "body": "how would you do this if you had to start off with a bunch of threads containing two numbers each, and they had to build up the solution from there?  Let&#39;s assume the array size is a power of 2, for the sake of my sanity, and yours."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 1, "last_activity_date": 1424270625, "creation_date": 1424270625, "answer_id": 28586345, "question_id": 28586044, "link": "https://stackoverflow.com/questions/28586044/find-max-in-array-using-threads/28586345#28586345", "title": "Find max in array using threads?", "body": "<p><strong>You didn't include <code>stdlib.h</code></strong>: which is the main problem, but you should also consider some other minor fixes that would make your code robust.</p>\n\n<p>The problem with not includeing <code>stdlib.h</code> is that the compiler assumes that <code>malloc()</code> returns an <code>int</code>, so you can see that this will cause problems.</p>\n\n<p>If you enable compiler warnings, you can prevent this kind of things, I sometimes forget some headers, but I don't get too far because the compiler reminds me.</p>\n\n<p>Assuming that you work with <code>gcc</code> then\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>gcc -Wall -Werror -o output $sourceFiles -pthread\n</code></pre>\n\n<p>will prevent compilation in this case.</p>\n\n<p>This is an improved version of your program, with the <code>stdlib.h</code> header included\n</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n\n#define arrSize 10\n\nstruct StructMax\n{\n    int iMax;\n};\n\npthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;\n\nvoid *thread_search_max(void *);\n\nint main()\n{\n    pthread_t         tid;\n    struct StructMax *st_main;\n    struct StructMax *st_th;\n    int               FinalMax;\n    int               arr[arrSize];\n\n    st_main = malloc(sizeof(struct StructMax));\n    if (st_main == NULL)\n        return -1;\n    int iCount;\n    for (iCount = 0 ; iCount &lt; arrSize ; iCount++)\n    {\n        printf(\"Enter Value of arr[%d] :\",iCount);\n        scanf(\"%d\",&amp;arr[iCount]);\n    }\n    pthread_create(&amp;tid, NULL, thread_search_max, arr);\n\n    /* lock the mutex, in this secction we access 'arr' */\n    pthread_mutex_lock(&amp;mutex);\n    st_main-&gt;iMax = arr[0];\n    pthread_mutex_unlock(&amp;mutex);\n\n    for (iCount = 1 ; iCount &lt; arrSize / 2 ; iCount++)\n    {\n        /* lock the mutex, in this secction we access 'arr' */\n        pthread_mutex_lock(&amp;mutex);\n        if (arr[iCount] &gt; st_main-&gt;iMax)\n        {\n            st_main-&gt;iMax = arr[iCount];\n        }\n        pthread_mutex_unlock(&amp;mutex);\n    }\n    pthread_join(tid, (void **)&amp;st_th);\n\n    if (st_main-&gt;iMax &gt;= st_th-&gt;iMax)\n    {\n        FinalMax = st_main-&gt;iMax;\n    }\n    else\n    {\n        FinalMax = st_th-&gt;iMax;\n    }\n    printf(\"Final Max : %d \\n\", FinalMax);\n    free(st_th);\n    free(st_main);\n    return 0;\n}\n\nvoid *thread_search_max(void *para)\n{\n    struct StructMax *st;\n    int               iCount;\n    int              *arr;\n\n    arr = para;\n    if (arr == NULL)\n        return NULL;\n    st = malloc(sizeof(struct StructMax));\n    if (st == NULL)\n        return NULL;\n    /* lock the mutex, in this secction we access 'arr' */\n    pthread_mutex_lock(&amp;mutex);\n    st-&gt;iMax = arr[arrSize/2];\n    pthread_mutex_unlock(&amp;mutex);\n    for (iCount = arrSize /  2 + 1 ; iCount &lt; arrSize ; iCount++)\n    {\n        /* lock the mutex, in this secction we access 'arr' */\n        pthread_mutex_lock(&amp;mutex);\n        if (arr[iCount] &gt; st-&gt;iMax)\n        {\n            st-&gt;iMax = arr[iCount];\n        }\n        pthread_mutex_unlock(&amp;mutex);\n    }\n    pthread_exit((void *)st);\n}\n</code></pre>\n\n<p>see the usage of the <code>mutex</code>, it prevents the two threads from accessing the value simultaneously. And how global variables are not needed, besides they are a really bad idea when multithreading.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6902349, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-36m6K0QdA-0/AAAAAAAAAAI/AAAAAAAAAAo/vbYZ8mduMlQ/photo.jpg?sz=128", "display_name": "Mahantesh Salimath", "link": "https://stackoverflow.com/users/6902349/mahantesh-salimath"}, "is_accepted": false, "score": 0, "last_activity_date": 1487862440, "creation_date": 1487862440, "answer_id": 42419439, "question_id": 28586044, "link": "https://stackoverflow.com/questions/28586044/find-max-in-array-using-threads/42419439#42419439", "title": "Find max in array using threads?", "body": "<p>Adding to the above optimization, the pthread should be created with attrributes specifying that is joinable (to guarantee that pthread_join() will block untill the thread specified is done). You can do this by declaring a 'attr' of type pthread_attr_t.\nThe sample coded looks like below.</p>\n\n<pre><code>pthread_attr_t attr;\npthread_attr_init(&amp;attr);\npthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_JOINABLE);\npthread_t tid;\n\npthread_create(&amp;tid, &amp;attr, function, args);\n//....\npthread_attr_destroy(&amp;attr);\n\npthread_join(&amp;tid, (void **)status);\n</code></pre>\n\n<p>The pthread_attr_destroy() is called before pthread_join(), because attr is no longer required once pthread_create() is invoked with appropriate arguments.</p>\n"}], "owner": {"reputation": 139, "user_id": 2044100, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3fb1d42c871662815cb06a9785469512?s=128&d=identicon&r=PG", "display_name": "Jf2k", "link": "https://stackoverflow.com/users/2044100/jf2k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2511, "favorite_count": 0, "accepted_answer_id": 28586345, "answer_count": 2, "score": 1, "last_activity_date": 1487862440, "creation_date": 1424269654, "question_id": 28586044, "link": "https://stackoverflow.com/questions/28586044/find-max-in-array-using-threads", "title": "Find max in array using threads?", "body": "<p>How would you do this in c with a binary reduction and a barrier implemented using binary semaphores?  This is the code I have so far.  It doesnt have a barrier, and I'm confused on how to make one.  Would I need mutex locks for this?  </p>\n\n<pre><code># include &lt;stdio.h&gt;\n# include &lt;pthread.h&gt;\n# define arrSize 10\n\nstruct StructMax\n{\n    int iMax;\n};\n\nint arr[arrSize];\n\nvoid *thread_search_max(void *);\n\nint main()\n{\n    pthread_t tid;\n    struct StructMax *st_main,*st_th;\n    int FinalMax;\n\n    st_main=(struct StructMax*)malloc(sizeof(struct StructMax));\n\n    int iCount;\n    for(iCount=0;iCount&lt;arrSize;iCount++)\n    {\n        printf(\"Enter Value of arr[%d] :\",iCount);\n        scanf(\"%d\",&amp;arr[iCount]);\n    }        \n    pthread_create(&amp;tid,NULL,thread_search_max,NULL);\n\n    st_main-&gt;iMax=arr[0];\n\n    for(iCount=1;iCount&lt;arrSize/2;iCount++)\n    {\n        if(arr[iCount] &gt; st_main-&gt;iMax)\n        {\n            st_main-&gt;iMax=arr[iCount];\n        }\n    }    \n\n    pthread_join(tid,(void**)&amp;st_th);    \n\n    if(st_main-&gt;iMax &gt;= st_th-&gt;iMax)\n    {\n        FinalMax=st_main-&gt;iMax;\n    }    \n    else\n    {\n        FinalMax=st_th-&gt;iMax;\n    }\n\n\n    printf(\"Final Max : %d \\n\",FinalMax);\n    return 0;\n}\n\n\nvoid *thread_search_max(void *para)\n{\n    struct StructMax *st;\n    st=(struct StructMax*)malloc(sizeof(struct StructMax));\n\n    int iCount;\n    st-&gt;iMax=arr[arrSize/2];\n\n\n    for(iCount=arrSize/2 + 1;iCount&lt;arrSize;iCount++)\n    {\n        if(arr[iCount] &gt; st-&gt;iMax)\n        {\n            st-&gt;iMax=arr[iCount];\n        }\n    }    \n\n    pthread_exit((void*)st);        \n}\n</code></pre>\n"}, {"tags": ["c", "string", "valgrind"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1424269186, "post_id": 28585777, "comment_id": 45478878, "body": "Though <b>Chostakovitch</b>&#39;s answer is wrong, it should be <code>*dstr = malloc(sizeof(**dstr))</code> in fact."}, {"owner": {"reputation": 955, "user_id": 4384927, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c233d91742b49c9a2f27a62e9f08b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "Chostakovitch", "link": "https://stackoverflow.com/users/4384927/chostakovitch"}, "edited": false, "score": 0, "creation_date": 1424269198, "post_id": 28585777, "comment_id": 45478888, "body": "Sorry for my answer, I realized that <code>dstr</code> wasn&#39;t the type but the pointer itself. I removed it. iharob is right."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 4579180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/803bed1492fbf0c7653c5adcc246211e?s=128&d=identicon&r=PG&f=1", "display_name": "vstakhov", "link": "https://stackoverflow.com/users/4579180/vstakhov"}, "is_accepted": true, "score": 3, "last_activity_date": 1424269293, "creation_date": 1424269293, "answer_id": 28585922, "question_id": 28585777, "link": "https://stackoverflow.com/questions/28585777/invalid-write-of-size-8-valgrind/28585922#28585922", "title": "invalid write of size 8 valgrind", "body": "<p>You specify the wrong amount of memory for allocate the structure:</p>\n\n<pre><code>if((*dstr = malloc(sizeof *dstr)) == NULL)\n</code></pre>\n\n<p>Since dstr is (struct dstr **), then sizeof(*dstr) is the size of pointer, not the size of structure. To fix that, you might want to write it in this way:</p>\n\n<pre><code>if((*dstr = malloc(sizeof **dstr)) == NULL)\n</code></pre>\n"}], "owner": {"reputation": 3128, "user_id": 3210059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/a39WK.jpg?s=128&g=1", "display_name": "karim", "link": "https://stackoverflow.com/users/3210059/karim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3524, "favorite_count": 0, "accepted_answer_id": 28585922, "answer_count": 1, "score": 1, "last_activity_date": 1424451028, "creation_date": 1424268907, "last_edit_date": 1424451028, "question_id": 28585777, "link": "https://stackoverflow.com/questions/28585777/invalid-write-of-size-8-valgrind", "title": "invalid write of size 8 valgrind", "body": "<p>I have developed a dynamic string that can be resized in the c programming language, but i have some invalid read that valgrind report to me, i tried to figure out why, but i failed:</p>\n\n<p>PS : the program is working.</p>\n\n<h1>dstring.c</h1>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#include \"error.h\"\n#include \"dstring.h\"\n\n#define DEFAULT_SIZE    512 \n\nstruct dstring {\n    char *str;\n    char *estr;\n    size_t msize;\n};\n\nlgw_return lgw_init_dstring(struct dstring **dstr, const char *data)\n{\n    size_t len;\n\n    if((*dstr = malloc(sizeof *dstr)) == NULL)\n        return LGW_ERROR_MALLOC;        \n\n    if(data != NULL) {\n        // intiliaze dstring with value of data\n        len = strlen(data);\n\n        if(((*dstr)-&gt;str = malloc(len + DEFAULT_SIZE)) == NULL) {\n            free(*dstr);\n            return LGW_ERROR_MALLOC;\n        }\n\n        strcpy((*dstr)-&gt;str, data);\n        (*dstr)-&gt;estr = (*dstr)-&gt;str + len;\n        (*dstr)-&gt;msize = len + DEFAULT_SIZE;\n    }\n    else {\n        // create empty dstring\n        if(((*dstr)-&gt;str = malloc(DEFAULT_SIZE)) == NULL) {\n            free(*dstr);\n            return LGW_ERROR_MALLOC;\n        }\n\n        *((*dstr)-&gt;str) = '\\0';\n        (*dstr)-&gt;estr = (*dstr)-&gt;str; \n        (*dstr)-&gt;msize = DEFAULT_SIZE;\n    }\n\n    return LGW_SUCCESS;\n}\n\nlgw_return lgw_destroy_dstring(struct dstring **dstr)\n{\n    free((*dstr)-&gt;str);\n    free(*dstr);\n    *dstr = NULL;\n    return LGW_SUCCESS;\n}\n\nlgw_return lgw_write_dstring(struct dstring *dstr, const char *data, size_t off)\n{\n    size_t datalen = strlen(data);\n    char *tmp_str;\n\n    //if offset is beyond the '\\0' char return error\n    if(off &gt; dstr-&gt;estr - dstr-&gt;str)\n        return LGW_OUT_OF_RANGE;\n\n    if(off + datalen &gt;  dstr-&gt;msize) {\n\n        if((tmp_str = realloc(dstr-&gt;str, dstr-&gt;msize +\n            datalen + DEFAULT_SIZE)) == NULL) \n\n            return LGW_ERROR_MALLOC;    \n\n        dstr-&gt;str = tmp_str;\n        dstr-&gt;msize += datalen + DEFAULT_SIZE;\n    }\n\n    strcpy(dstr-&gt;str + off, data);\n    dstr-&gt;estr = dstr-&gt;str + off + datalen;\n\n    return LGW_SUCCESS;\n}\n\nlgw_return lgw_append_dstring(struct dstring *dstr, const char *data)\n{\n    return lgw_write_dstring(dstr, data, dstr-&gt;estr - dstr-&gt;str);\n}\nconst char *lgw_get_dstring(struct dstring *dstr)\n{\n    return (const char *)(dstr-&gt;str);\n}\n</code></pre>\n\n<h1>dstring.h</h1>\n\n<pre><code>#ifndef DSTRING_H_INCLUDED\n#define DSTRING_H_INCLUDED\n\n#include \"error.h\"\n\ntypedef struct dstring DynamicString;\n\nlgw_return lgw_init_dstring(struct dstring **dstr, const char *data);\nlgw_return lgw_destroy_dstring(struct dstring **dstr);\nlgw_return lgw_write_dstring(struct dstring *dstr, const char *data, size_t off);\nlgw_return lgw_append_dstring(struct dstring *dstr, const char *data);\nconst char *lgw_get_dstring(struct dstring *dstr);\n\n#endif\n</code></pre>\n\n<h1>main.c</h1>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#include \"error.h\"\n#include \"dstring.h\"\n\n\nint main()\n{\n    lgw_return rc;\n    DynamicString *s;\n\n    if((rc =lgw_init_dstring(&amp;s, \"test\")) != LGW_SUCCESS) {\n        fprintf(stderr, \"ERROR : %s\", lgw_strerror(rc));\n        exit(EXIT_FAILURE);\n    }\n\n    lgw_append_dstring(s, \"123\");\n    const char *str = lgw_get_dstring(s);\n\n    printf(\"value is : %s\\n\", str);\n    lgw_destroy_dstring(&amp;s);\n}\n</code></pre>\n\n<h1>valgrind output</h1>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>==6919== Memcheck, a memory error detector\n==6919== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==6919== Using Valgrind-3.10.0 and LibVEX; rerun with -h for copyright info\n==6919== Command: ./a.out\n==6919== \n==6919== Invalid write of size 8\n==6919==    at 0x40084A: lgw_init_dstring (dstring.c:33)\n==6919==    by 0x400AD7: main (test.c:14)\n==6919==  Address 0x51de048 is 0 bytes after a block of size 8 alloc'd\n==6919==    at 0x4C28C20: malloc (vg_replace_malloc.c:296)\n==6919==    by 0x4007A0: lgw_init_dstring (dstring.c:20)\n==6919==    by 0x400AD7: main (test.c:14)\n==6919== \n==6919== Invalid write of size 8\n==6919==    at 0x400860: lgw_init_dstring (dstring.c:34)\n==6919==    by 0x400AD7: main (test.c:14)\n==6919==  Address 0x51de050 is 8 bytes after a block of size 8 alloc'd\n==6919==    at 0x4C28C20: malloc (vg_replace_malloc.c:296)\n==6919==    by 0x4007A0: lgw_init_dstring (dstring.c:20)\n==6919==    by 0x400AD7: main (test.c:14)\n==6919== \n==6919== Invalid read of size 8\n==6919==    at 0x400A30: lgw_append_dstring (dstring.c:87)\n==6919==    by 0x400B21: main (test.c:19)\n==6919==  Address 0x51de048 is 0 bytes after a block of size 8 alloc'd\n==6919==    at 0x4C28C20: malloc (vg_replace_malloc.c:296)\n==6919==    by 0x4007A0: lgw_init_dstring (dstring.c:20)\n==6919==    by 0x400AD7: main (test.c:14)\n==6919== \n==6919== Invalid read of size 8\n==6919==    at 0x40093C: lgw_write_dstring (dstring.c:65)\n==6919==    by 0x400A59: lgw_append_dstring (dstring.c:87)\n==6919==    by 0x400B21: main (test.c:19)\n==6919==  Address 0x51de048 is 0 bytes after a block of size 8 alloc'd\n==6919==    at 0x4C28C20: malloc (vg_replace_malloc.c:296)\n==6919==    by 0x4007A0: lgw_init_dstring (dstring.c:20)\n==6919==    by 0x400AD7: main (test.c:14)\n==6919== \n==6919== Invalid read of size 8\n==6919==    at 0x40096F: lgw_write_dstring (dstring.c:68)\n==6919==    by 0x400A59: lgw_append_dstring (dstring.c:87)\n==6919==    by 0x400B21: main (test.c:19)\n==6919==  Address 0x51de050 is 8 bytes after a block of size 8 alloc'd\n==6919==    at 0x4C28C20: malloc (vg_replace_malloc.c:296)\n==6919==    by 0x4007A0: lgw_init_dstring (dstring.c:20)\n==6919==    by 0x400AD7: main (test.c:14)\n==6919== \n==6919== Invalid write of size 8\n==6919==    at 0x400A11: lgw_write_dstring (dstring.c:80)\n==6919==    by 0x400A59: lgw_append_dstring (dstring.c:87)\n==6919==    by 0x400B21: main (test.c:19)\n==6919==  Address 0x51de048 is 0 bytes after a block of size 8 alloc'd\n==6919==    at 0x4C28C20: malloc (vg_replace_malloc.c:296)\n==6919==    by 0x4007A0: lgw_init_dstring (dstring.c:20)\n==6919==    by 0x400AD7: main (test.c:14)\n==6919== \nvalue is : test123\n==6919== \n==6919== HEAP SUMMARY:\n==6919==     in use at exit: 0 bytes in 0 blocks\n==6919==   total heap usage: 2 allocs, 2 frees, 524 bytes allocated\n==6919== \n==6919== All heap blocks were freed -- no leaks are possible\n==6919== \n==6919== For counts of detected and suppressed errors, rerun with: -v\n==6919== ERROR SUMMARY: 6 errors from 6 contexts (suppressed: 0 from 0)\n</code></pre>\n"}, {"tags": ["c", "debugging", "batch-file", "gdb"], "comments": [{"owner": {"reputation": 6388, "user_id": 676030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56d223c1778b85cd4fcdca39a16fb69?s=128&d=identicon&r=PG", "display_name": "scottt", "link": "https://stackoverflow.com/users/676030/scottt"}, "edited": false, "score": 0, "creation_date": 1424272324, "post_id": 28585662, "comment_id": 45480903, "body": "It&#39;s possible. Describe a bit more about how you&#39;re starting the component that acts as the <code>gdbserver</code>  (Are you using <code>openocd</code>, <code>JLinkGDBServer</code>?) and how you&#39;re connecting <code>gdb</code> to it (Are you <code>target extended-remote</code> or <code>target remote</code> in <code>mpu-gdb</code>? Which TCP ports are you using?)"}, {"owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "reply_to_user": {"reputation": 6388, "user_id": 676030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56d223c1778b85cd4fcdca39a16fb69?s=128&d=identicon&r=PG", "display_name": "scottt", "link": "https://stackoverflow.com/users/676030/scottt"}, "edited": false, "score": 0, "creation_date": 1424272953, "post_id": 28585662, "comment_id": 45481297, "body": "Scottt, I am using Xtensa OCD Daemon (Copyrighted by Tensilica) to connect the mpu-gdb (which is the remote target CPU) to gdb (running on Unix server). Similar to mpu, there are 3 more targets as I mentioned in my post."}, {"owner": {"reputation": 6388, "user_id": 676030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56d223c1778b85cd4fcdca39a16fb69?s=128&d=identicon&r=PG", "display_name": "scottt", "link": "https://stackoverflow.com/users/676030/scottt"}, "edited": false, "score": 0, "creation_date": 1424273616, "post_id": 28585662, "comment_id": 45481765, "body": "I&#39;m guessing {fepu,mpu,sbmu,bepu}-gdb each uses a different transport channel, likely a different TCP port, to connect to one Xtensa OCD process. If you can tell me which TCP port each is using, I can present you a solution that&#39;d require less adaptation to your environment and I don&#39;t have to come up and explain an artificial setup myself ;) Is <code>mpu-gdb</code> a shell script that calls <code>xt-gdb</code> with a <code>-x SOME-SCRIPT</code> argument?"}, {"owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "reply_to_user": {"reputation": 6388, "user_id": 676030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56d223c1778b85cd4fcdca39a16fb69?s=128&d=identicon&r=PG", "display_name": "scottt", "link": "https://stackoverflow.com/users/676030/scottt"}, "edited": false, "score": 0, "creation_date": 1424322888, "post_id": 28585662, "comment_id": 45504255, "body": "Scottt, I am in a different time zone, so replying you late....yes you are correct, each gdb uses a different transport channel to connect to one Xtensa OCD process. When I start the Xtensa OCD Daemon on a Windows PC with a ip address say 135.20.2.0.160, a channel opens for FEPU:  135.20.2.0.160:20000 for MPU: 135.20.2.0.160:20001, for SBMU: 135.20.2.0.160:20002 and for BEPU: 135.20.2.0.160: 20003."}, {"owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "reply_to_user": {"reputation": 6388, "user_id": 676030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56d223c1778b85cd4fcdca39a16fb69?s=128&d=identicon&r=PG", "display_name": "scottt", "link": "https://stackoverflow.com/users/676030/scottt"}, "edited": false, "score": 0, "creation_date": 1424323158, "post_id": 28585662, "comment_id": 45504356, "body": "Yes, all the cpu core-gdb are shell scripts which I need to invoke or run from the corresponding CPU folder (the script parses the folders name to load that particular processors elf file which was generated in the build process and residing in the corresponding CPU directory (like fepu/fepu.elf and so on)"}, {"owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "reply_to_user": {"reputation": 6388, "user_id": 676030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56d223c1778b85cd4fcdca39a16fb69?s=128&d=identicon&r=PG", "display_name": "scottt", "link": "https://stackoverflow.com/users/676030/scottt"}, "edited": false, "score": 0, "creation_date": 1424323411, "post_id": 28585662, "comment_id": 45504432, "body": "In the script file GDB is invoked like this: GDB=&quot;$XTENSA_TOOLS_ROOT/bin/xt-gdb --xtensa-system=$XTENSA_SYSTEM --xtensa-core=$XTENSA_CORE_NAME \\ 122  --xtensa-params=&quot;"}, {"owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "reply_to_user": {"reputation": 6388, "user_id": 676030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56d223c1778b85cd4fcdca39a16fb69?s=128&d=identicon&r=PG", "display_name": "scottt", "link": "https://stackoverflow.com/users/676030/scottt"}, "edited": false, "score": 0, "creation_date": 1424323560, "post_id": 28585662, "comment_id": 45504475, "body": "And the settings are like this: $GDB $ELF --nx --nw \\ --ex=&quot;set pagination off&quot;  \\ --ex=&quot;set \\$Autotest_Watchpoints=$Watchpoints&quot;  \\ --ex=&quot;set \\$Autotest_Debug=$Debug&quot;  \\ --ex=&quot;set logging file $LOGFILE&quot; \\ --ex=&quot;set logging on&quot; \\ --ex=&quot;source $SCRIPT_FOLDER/xt-gdb.scr.custom&quot; \\ --ex=&quot;source $SCRIPT_FOLDER/autotest/FC_GdbAutotestEngine.scr&quot; \\ --ex=&quot;connectBepu&quot; \\ --ex=&quot;$clearRom&quot; \\ --ex=&quot;$loadgcu&quot; \\ --ex=&quot;$InitNewFifoConfig&quot; \\ --ex=&quot;$runCpu&quot; \\ --ex=&quot;load $ELF&quot; \\ --ex=&quot;PrintRunStates&quot; \\ --ex=&quot;echo $ELF\\n&quot;"}], "owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 532, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424269458, "creation_date": 1424268560, "last_edit_date": 1424269458, "question_id": 28585662, "link": "https://stackoverflow.com/questions/28585662/how-to-write-gdb-batch-script-for-a-multi-core-environment", "title": "How to write Gdb batch script for a multi core environment?", "body": "<p>Is it possible to run four different gdb sessions in batch mode or a single script?</p>\n\n<p>For example:</p>\n\n<ol>\n<li><p>I have 4 different processor cores, fepu, mpu, sbmu and bepu. I go into the respective folders and do: </p>\n\n<pre><code>../scripts/rungdb.sh logs \n</code></pre></li>\n</ol>\n\n<p>The shell script reads the folder name and picks up the corresponding elf file to load and also runs gdb session for that particular core.</p>\n\n<ol start=\"2\">\n<li><p>Then I do 'Continue' one by one for all the four processors. </p></li>\n<li><p>I halt mpu by doing 'Ctrl C' in mpu-gdb and</p></li>\n<li>Set an mpu register Set <code>*0x44880810 = 1</code></li>\n<li>Do 'C' to continue mpu core running again</li>\n</ol>\n\n<p>Is it possible to automate all these steps in a single batch script ? If yes, then it will help me to include the script in my Python automation framework.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1424268059, "post_id": 28585454, "comment_id": 45478170, "body": "Standard Warning : Please <a href=\"http://stackoverflow.com/q/605845/2173917\">do not cast</a> the return value of <code>malloc()</code> and family."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1424268100, "post_id": 28585454, "comment_id": 45478196, "body": "Please provide a <b><i><a href=\"http://stackoverflow.com/help/mcve\">MCVE</a></i></b>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 4, "creation_date": 1424268278, "post_id": 28585454, "comment_id": 45478307, "body": "1) <code>newPtr = (STACK_NODE*)malloc(sizeof(STACK_NODE*));</code> --&gt; <code>newPtr = (STACK_NODE*)malloc(sizeof(STACK_NODE));</code>"}, {"owner": {"reputation": 41, "user_id": 4579061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/adcf5484939ec9e61ffa0c2cbf4e469f?s=128&d=identicon&r=PG", "display_name": "bastille77", "link": "https://stackoverflow.com/users/4579061/bastille77"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1424269880, "post_id": 28585454, "comment_id": 45479382, "body": "@SouravGhosh, I&#39;ve included a small driver program with which the error can be reproduced."}], "answers": [{"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1424270153, "post_id": 28586139, "comment_id": 45479549, "body": "I think it&#39;s enough to say that <code>sizeof(STACK_NODE*) &lt; sizeof(STACK_NODE);</code>  without emphasizing the actual value that <code>sizeof()</code> is returning."}, {"owner": {"reputation": 891, "user_id": 1257487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e5XCW.jpg?s=128&g=1", "display_name": "Anonymouse", "link": "https://stackoverflow.com/users/1257487/anonymouse"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1424270239, "post_id": 28586139, "comment_id": 45479600, "body": "disagree, was trying to make it crystal clear what the problem is... Just saying that &quot;sizeof(STACK_NODE*) &lt; sizeof(STACK_NODE);&quot; would confuse the hell out of me for answer, and I know what the problem is."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1424270462, "post_id": 28586139, "comment_id": 45479745, "body": "You add that to the answer you gave.  The OP used the wrong type in the call to malloc, which is the main point.  If the struct were only 4 bytes, their code would still be wrong but the error would be masked."}, {"owner": {"reputation": 41, "user_id": 4579061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/adcf5484939ec9e61ffa0c2cbf4e469f?s=128&d=identicon&r=PG", "display_name": "bastille77", "link": "https://stackoverflow.com/users/4579061/bastille77"}, "edited": false, "score": 0, "creation_date": 1424271157, "post_id": 28586139, "comment_id": 45480195, "body": "@Anonymouse, that indeed fixes the problem. Thank you very much! I&#39;ve been agonizing over this problem for hours now on account of failing to catch that extra asterisk after STACK_NODE... It was a careless typo on my part."}, {"owner": {"reputation": 891, "user_id": 1257487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e5XCW.jpg?s=128&g=1", "display_name": "Anonymouse", "link": "https://stackoverflow.com/users/1257487/anonymouse"}, "reply_to_user": {"reputation": 41, "user_id": 4579061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/adcf5484939ec9e61ffa0c2cbf4e469f?s=128&d=identicon&r=PG", "display_name": "bastille77", "link": "https://stackoverflow.com/users/4579061/bastille77"}, "edited": false, "score": 0, "creation_date": 1424272795, "post_id": 28586139, "comment_id": 45481182, "body": "@bastille77 For your reference the &quot;Setting Breakpoints on a Memory Allocation Number&quot; section on <a href=\"https://msdn.microsoft.com/en-us/library/x98tx3cf.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/x98tx3cf.aspx</a> is VERY useful for tracking down such bugs..."}], "tags": [], "owner": {"reputation": 891, "user_id": 1257487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e5XCW.jpg?s=128&g=1", "display_name": "Anonymouse", "link": "https://stackoverflow.com/users/1257487/anonymouse"}, "is_accepted": true, "score": 2, "last_activity_date": 1424269940, "creation_date": 1424269940, "answer_id": 28586139, "question_id": 28585454, "link": "https://stackoverflow.com/questions/28585454/why-does-heap-corruption-occur-in-my-stack-program-implemented-with-linked-list/28586139#28586139", "title": "Why does heap corruption occur in my stack program implemented with linked list? And how to fix it?", "body": "<pre><code>  newPtr = (STACK_NODE*)malloc(sizeof(STACK_NODE*));\n</code></pre>\n\n<p>Is allocating enough storage for a \"STACK_NODE Pointer\" - normally 4 bytes - but sizeof (STACK_NODE) is 8 bytes, so when you use newPtr you are overwriting memory.</p>\n\n<p>The correct form is </p>\n\n<pre><code>  newPtr = (STACK_NODE*)malloc(sizeof(STACK_NODE));\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4579061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/adcf5484939ec9e61ffa0c2cbf4e469f?s=128&d=identicon&r=PG", "display_name": "bastille77", "link": "https://stackoverflow.com/users/4579061/bastille77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 28586139, "answer_count": 1, "score": 1, "last_activity_date": 1424270120, "creation_date": 1424267924, "last_edit_date": 1424270120, "question_id": 28585454, "link": "https://stackoverflow.com/questions/28585454/why-does-heap-corruption-occur-in-my-stack-program-implemented-with-linked-list", "title": "Why does heap corruption occur in my stack program implemented with linked list? And how to fix it?", "body": "<p>I've created a C header file for a data structure course which I'm taking in school. I've only limited coding experience in C and C++. It contains code which builds a stack using linked list for data storage. When I try to run a driver program with Visual Studio 2013 to test if the implementation works, it throws the following error:</p>\n\n<p>HEAP CORRUPTION DETECTED: after Normal block (#68) at 0x006F8178.\nCRT detected that the application wrote to memory after end of heap buffer.</p>\n\n<p>The code in the said header file is listed below:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\n//type definition for a single stack data node\ntypedef struct node\n{\n    void *dataPtr; //create void pointer to user data\n    struct node *link; //create pointer to next node in stack\n}STACK_NODE;\n\n//type definition for stack head structure\ntypedef struct stack\n{\n    int count; //location to hold number of entries in stack\n    STACK_NODE *top; //create pointer to top of stack\n}STACK;\n\n//function to create empty stack\nSTACK* createStack()\n{\n    STACK *stack; //create a stack head node\n\n    stack = (STACK*)malloc(sizeof(STACK));\n    if (stack){\n        stack-&gt;count = 0; //set stack count to zero\n        stack-&gt;top = NULL; //initialize top pointer to null\n    }\n    return stack; //return address of node in dynamic memory\n}\n\n//function to push data onto stack\nbool pushStack(STACK *stack, void *dataInPtr)\n{\n    STACK_NODE *newPtr;\n\n    newPtr = (STACK_NODE*)malloc(sizeof(STACK_NODE*));\n    //if out of memory\n    if (!newPtr)\n        return false;\n\n    newPtr-&gt;dataPtr = dataInPtr; //assign data pointer to node\n    newPtr-&gt;link = stack-&gt;top; //set link to point to node currently indicated as stack top\n    stack-&gt;top = newPtr; //set top node to point to data in new node\n\n    ++(stack-&gt;count); //add one to stack count\n    return true;\n}\n\n//function to pop data off the stack and recycle node\nvoid* popStack(STACK *stack)\n{\n    void *dataOutPtr;\n    STACK_NODE *temp;\n\n    //if stack is empty, return NULL\n    if (stack-&gt;count == 0)\n        dataOutPtr = NULL;\n    else{\n        temp = stack-&gt;top; //set temp to point to top node to be recycled\n        dataOutPtr = stack-&gt;top-&gt;dataPtr; //set dataOutPtr to point to value currently stored in the top node\n        stack-&gt;top = stack-&gt;top-&gt;link; //set top pointer to point to next node in stack\n        free(temp); //delete top node\n        --(stack-&gt;count);\n    }\n    return dataOutPtr; //return address of popped data\n}\n\n//function to retrieve data in top node\nvoid* stackTop(STACK *stack)\n{\n    //if stack is empty, return NULL\n    if (stack-&gt;count == 0)\n        return NULL;\n    //if top node contains data, return dataPtr\n    else\n        return stack-&gt;top-&gt;dataPtr;\n}\n\n//function to test if stack contains data\nbool emptyStack(STACK *stack)\n{\n    return (stack-&gt;count == 0);\n}\n\n//function to delete nodes in stack\nSTACK* destroyStack(STACK *stack)\n{\n    STACK_NODE *temp;\n\n    //if stack is not empty\n    if (stack){\n        //delete all nodes in stack\n        while (stack-&gt;top != NULL){\n            //delete data entry in top node\n            free(stack-&gt;top-&gt;dataPtr);\n\n            temp = stack-&gt;top; //set temp to point to top node to be recycled\n            stack-&gt;top = stack-&gt;top-&gt;link; //set top node to point to next node\n            free(temp); //destroy top node\n        }\n        //stack now empty, destroy stack head node\n        free(stack);\n    }\n    return NULL;\n}\n</code></pre>\n\n<p>The code for the driver program is listed below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"stackADT.h\"\n\nint main()\n{\n    int a = 4;\n    int *dataPtr, *result, *popped;\n\n    STACK *stack1;\n\n    //create stack\n    stack1 = createStack();\n\n    //push value in a onto stack and output value on stack top\n    dataPtr = malloc(sizeof(int));\n    *dataPtr = a;\n    pushStack(stack1, dataPtr);\n    result = (int*)stackTop(stack1);\n    printf(\"Value in stack is: %d\\n\", *result);\n\n    //pop stack and output popped value\n    popped = (int*)popStack(stack1);\n    printf(\"Value popped off is: %d\\n\", *popped);\n\n    destroyStack(stack1);\n    return 0;\n}\n</code></pre>\n\n<p>TBH, when I first saw the error message I have no idea what it meant. After doing some rudimentary research I now understand that it is caused by writing data to the heap buffer without having allocated enough memory in the first place.</p>\n\n<p>While I'm not entirely certain, I believe the error occurs both in the popStack and destroyStack function at the line:</p>\n\n<pre><code>temp = stack-&gt;top;\n</code></pre>\n\n<p>And it is detected and reported at the line:</p>\n\n<pre><code>free(temp);\n</code></pre>\n\n<p>My idea is to pass the address contained in the current top node (stack->top) to a temporary node and then call free() to release the memory in the temp node. Since both pointers are of the same type (i.e. both are of STACK_NODE type), I do not understand why the assignment action would trigger a heap corruption error.</p>\n\n<p>Any help in resolving the issue will be greatly appreciated!</p>\n"}, {"tags": ["c", "xcode", "xcode6"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1424267733, "post_id": 28585359, "comment_id": 45477959, "body": "Is it the path of the file you are trying to open? have you tried to give an absolute path? and also <a href=\"http://stackoverflow.com/a/605858/1983495\">don&#39;t cast the return value from <code>malloc()</code></a>"}, {"owner": {"reputation": 283, "user_id": 2941211, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/cYuC0.png?s=128&g=1", "display_name": "Byte_Monster", "link": "https://stackoverflow.com/users/2941211/byte-monster"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1424360383, "post_id": 28585359, "comment_id": 45524601, "body": "Thanks a lot for the answer. I did try the absolute path and it works. So I guess my real problem is to open a relative path via xcode. I found this: <a href=\"http://stackoverflow.com/questions/4796943/open-method-opens-files-with-full-path-only-c\" title=\"open method opens files with full path only c\">stackoverflow.com/questions/4796943/&hellip;</a> wich answers my question.  Thanks again"}], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 2941211, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/cYuC0.png?s=128&g=1", "display_name": "Byte_Monster", "link": "https://stackoverflow.com/users/2941211/byte-monster"}, "edited": false, "score": 1, "creation_date": 1424356382, "post_id": 28586938, "comment_id": 45521725, "body": "Thanks a lot for your answer but this does not seem to be my problem. I added the code: <a href=\"http://pastebin.com/CjZMVM26\" rel=\"nofollow noreferrer\">pastebin.com/CjZMVM26</a>  in order to make sure there is a \\0 at the end of my string but still terminal runs the program fine but xcode does not."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1424272369, "creation_date": 1424272369, "answer_id": 28586938, "question_id": 28585359, "link": "https://stackoverflow.com/questions/28585359/open-function-c-file-not-found-on-xcode-but-terminal-works/28586938#28586938", "title": "Open function C &quot;file not found&quot; on Xcode but terminal works", "body": "<p>This:</p>\n\n<pre><code>filename = malloc(sizeof(char)*strlen(cc[1]));\nstrcpy(filename, cc[1]);\n</code></pre>\n\n<p>is broken, it fails to allocate room for the string's terminator, so it causes buffer overflow and undefined behavior.</p>\n\n<p>Also, you never need to scale by <code>sizeof (char)</code>, that's always 1. It should be:</p>\n\n<pre><code>filename = malloc(strlen(cc[1]) + 1);\nstrpcy(filename, cc[1]);\n</code></pre>\n\n<p>or, if you have it, just:</p>\n\n<pre><code>filename = strdup(cc[1]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 283, "user_id": 2941211, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/cYuC0.png?s=128&g=1", "display_name": "Byte_Monster", "link": "https://stackoverflow.com/users/2941211/byte-monster"}, "is_accepted": false, "score": 1, "last_activity_date": 1424360603, "last_edit_date": 1495541173, "creation_date": 1424360603, "answer_id": 28610554, "question_id": 28585359, "link": "https://stackoverflow.com/questions/28585359/open-function-c-file-not-found-on-xcode-but-terminal-works/28610554#28610554", "title": "Open function C &quot;file not found&quot; on Xcode but terminal works", "body": "<p>I found the problem thanks to iharob's comment. It seems xcode has a hard time opening relative paths since it uses a different file while running the program. There is a relative discussion here:  </p>\n\n<p><a href=\"https://stackoverflow.com/questions/4796943/open-method-opens-files-with-full-path-only-c\">Open method opens files with full path only C++</a></p>\n\n<p>thanks again everyone.</p>\n"}], "owner": {"reputation": 283, "user_id": 2941211, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/cYuC0.png?s=128&g=1", "display_name": "Byte_Monster", "link": "https://stackoverflow.com/users/2941211/byte-monster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1424360603, "creation_date": 1424267638, "last_edit_date": 1424271976, "question_id": 28585359, "link": "https://stackoverflow.com/questions/28585359/open-function-c-file-not-found-on-xcode-but-terminal-works", "title": "Open function C &quot;file not found&quot; on Xcode but terminal works", "body": "<p>I work on Xcode and I have a simple function that opens a file using <code>open</code> in C.</p>\n\n<pre><code> void mfs_workwith() {\n  char *token, *temp_token;\n  char *search = \".\";\n  temp_token = (char*)malloc(sizeof(char)*strlen(cc[1]));\n  strcpy(temp_token, cc[1]);\n  if ((token = strtok(temp_token, search)) == NULL) {\n    printf(\"mfs_workwith command is only used with mfs type files e.g. example.mfs \\n\");\n  } else if ((token = strtok(NULL, \" \\n\\0\")) == NULL) {\n    printf(\"mfs_workwith command is only used with mfs type files e.g. example.mfs \\n\");\n  } else if (strcmp(token, \"mfs\") == 0) {\n    filename = malloc(sizeof(char)*strlen(cc[1]));\n    strcpy(filename, cc[1]);\n    if ((file_mfs = open(filename, O_RDWR)) == -1) {\n      perror(\"open error\");\n    } else {\n      printf(\"open successful \\n\");\n    }\n  }\n}\n</code></pre>\n\n<p>The name of the file is stored in a global array and then copied into local buffers in order to tokenize and check if it has the right format (.mfs). </p>\n\n<p>Then if everything is ok I make a fresh copy of the name of the file and call <code>open</code> with it. </p>\n\n<p>My problem is that when I run my program in terminal it runs fine, prints <code>open successful</code> and then continues. But when I try to run it in Xcode it fails with this error:</p>\n\n<pre><code>No such file or directory\n</code></pre>\n\n<p>I am giving the input <code>file.mfs</code> which is the name of a file in the same directory.</p>\n\n<p>Am I missing something obvious?</p>\n"}, {"tags": ["c", "build", "static-linking"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1424267726, "post_id": 28585261, "comment_id": 45477955, "body": "That will depend upon the toolset you have available for whatever microprocessor platform you&#39;re targeting. Even if there were a standard way, they would need to be compliant with it."}], "answers": [{"comments": [{"owner": {"reputation": 536, "user_id": 1200218, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/35c038a8d55546b9ae28d916ff9888fa?s=128&d=identicon&r=PG", "display_name": "CHollman82", "link": "https://stackoverflow.com/users/1200218/chollman82"}, "edited": false, "score": 0, "creation_date": 1424268206, "post_id": 28585512, "comment_id": 45478264, "body": "Multiple projects use the same library, hence the purpose of using libraries, and some of the projects use the functions and some do not. Unfortunately all of those answers apply to GCC, I am using Texas Instruments proprietary IDE known as Code Composer Studio, thanks anyway, it looks like this is a platform specific problem and I&#39;ll try asking again with that specified."}, {"owner": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "reply_to_user": {"reputation": 536, "user_id": 1200218, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/35c038a8d55546b9ae28d916ff9888fa?s=128&d=identicon&r=PG", "display_name": "CHollman82", "link": "https://stackoverflow.com/users/1200218/chollman82"}, "edited": false, "score": 1, "creation_date": 1424270228, "post_id": 28585512, "comment_id": 45479590, "body": "Actually it is compiler which matters, not IDE. As far as I remember, CCS can use GCC toolchain, not only TI compiler (it based on Eclipse so it&#39;s very flexible).So as one of options you can consider moving to GCC. If it&#39;s not appropriate -- then try to read help for  compiler you use and find something similar to GCC flags mentioned at link I provided."}, {"owner": {"reputation": 536, "user_id": 1200218, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/35c038a8d55546b9ae28d916ff9888fa?s=128&d=identicon&r=PG", "display_name": "CHollman82", "link": "https://stackoverflow.com/users/1200218/chollman82"}, "edited": false, "score": 0, "creation_date": 1424271630, "post_id": 28585512, "comment_id": 45480468, "body": "Is that true with CCS v3? I know their newer versions are based on Eclipse but I thought that started with v4. Anyway, thank you, while moving to GCC is probably not an option at least now I have a lead on finding the answer (looking through the compiler and linker options)."}], "tags": [], "owner": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1424268101, "last_edit_date": 1495542491, "creation_date": 1424268101, "answer_id": 28585512, "question_id": 28585261, "link": "https://stackoverflow.com/questions/28585261/exclude-unreferenced-functions-from-c-build/28585512#28585512", "title": "Exclude unreferenced functions from C build?", "body": "<p>I believe the answer is here: <a href=\"https://stackoverflow.com/questions/6687630/c-c-gcc-ld-remove-unused-symbols\">How to remove unused C/C++ symbols with GCC and ld?</a></p>\n\n<p>Still, if you're not gonna use some functions from library you wrote, maybe the best choice would be to remove them at all?</p>\n"}], "owner": {"reputation": 536, "user_id": 1200218, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/35c038a8d55546b9ae28d916ff9888fa?s=128&d=identicon&r=PG", "display_name": "CHollman82", "link": "https://stackoverflow.com/users/1200218/chollman82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1424268101, "creation_date": 1424267394, "question_id": 28585261, "link": "https://stackoverflow.com/questions/28585261/exclude-unreferenced-functions-from-c-build", "title": "Exclude unreferenced functions from C build?", "body": "<p>I write firmware for embedded processors in C and we have limited space for code in the processors flash memory and I'm trying to reduce the amount of space we are using and I've noticed that functions in libraries (which I wrote) that are not being used are still being included in the build. Is there a standard way to exclude library functions that are never referenced from the build without removing those functions from the library?</p>\n"}, {"tags": ["c", "multithreading", "gmp", "sqrt"], "comments": [{"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1424268004, "post_id": 28585253, "comment_id": 45478136, "body": "So how many seconds does it take to run your program?"}, {"owner": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1424268345, "post_id": 28585253, "comment_id": 45478351, "body": "@nwellnhof Is that relevant because I didn&#39;t write it down... On both the exact same time atleast"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1424269279, "post_id": 28585253, "comment_id": 45478944, "body": "You&#39;re measuring time as an integer ... What&#39;s the ballpark here? In real code a difference between e.g. 1.1 seconds and 1.9 seconds would be major, but you&#39;d just see them as &quot;1&quot;."}, {"owner": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1424269921, "post_id": 28585253, "comment_id": 45479411, "body": "@unwind You are right but that wouldn&#39;t matter anyway because there is no difference to me if it&#39;s 55 or 54 seconds."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1424270140, "post_id": 28585253, "comment_id": 45479539, "body": "@iPh1ps99 But you refused to say what the actual value was, so I should I know that it&#39;s almost a minute? If it had been 1.1 vs 1.9, your code would be almost twice as fast on the faster CPU."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 1, "creation_date": 1424270308, "post_id": 28585253, "comment_id": 45479648, "body": "One possibility is that the execution time of your code is limited by memory bandwidth."}, {"owner": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1424270368, "post_id": 28585253, "comment_id": 45479687, "body": "@unwind I can give you other irrational numbers and there I have values. I managed amount digits so that it matters about seconds and not about milliseconds."}, {"owner": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1424270437, "post_id": 28585253, "comment_id": 45479726, "body": "@nwellnhof So there&#39;s no way to fix that, right?"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1424270688, "post_id": 28585253, "comment_id": 45479910, "body": "<i>If</i> main memory bandwidth is the limiting factor, you could only try to find a more cache-friendly implementation of arbitrary-precision sqrt."}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1424270836, "post_id": 28585253, "comment_id": 45480006, "body": "@nwellnhof may be right : on my Intel(R) Core(TM)2 Duo CPU   P7350  @ 2.00GHz and memory DDR2 @800MHz, Data Width: 64 bits, it took 199s (and 117s if i shut down tv...). Type <code>cat &#47;proc&#47;cpuinfo</code> to know more about your processor and <code>dmidecode --type memory</code> to know more about memory"}, {"owner": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "reply_to_user": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1424271303, "post_id": 28585253, "comment_id": 45480286, "body": "@francis Hmm I&#39;ve got 2x 2GB DDR3@1600Mhz, the other one 2x 8GB at same frequency"}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1424272547, "post_id": 28585253, "comment_id": 45481027, "body": "Hence, it seems that the explanation of @nwellnhof is the right one  :  computing a large number of digits of <code>sqrt(2)</code> requires a large memory bandwidth. And comparable memory bandwidths (roughly frequencies...but much more complex, account for latency...) lead to similar execution time."}, {"owner": {"reputation": 2633, "user_id": 27898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84028aac31ee14ca90aa08c2442e3a1e?s=128&d=identicon&r=PG", "display_name": "mpez0", "link": "https://stackoverflow.com/users/27898/mpez0"}, "edited": false, "score": 0, "creation_date": 1424275154, "post_id": 28585253, "comment_id": 45482880, "body": "profile, profile, profile. How much time is spent computing digits, and how much time is spent converting digits to printable? Multiple cores don&#39;t matter for the serial parts of your program (Amdahl&#39;s Law), including I/O -- and traffic between the CPU and memory counts as I/O."}, {"owner": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "reply_to_user": {"reputation": 2633, "user_id": 27898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84028aac31ee14ca90aa08c2442e3a1e?s=128&d=identicon&r=PG", "display_name": "mpez0", "link": "https://stackoverflow.com/users/27898/mpez0"}, "edited": false, "score": 0, "creation_date": 1424279572, "post_id": 28585253, "comment_id": 45485914, "body": "@mpez0 Tried that too. I changed the time measurement for just measuring the calculation. That doesn&#39;t differ much though and it&#39;s still the same on the other PC"}, {"owner": {"reputation": 7445, "user_id": 1174378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8e5416e29987d91116420dc387e7153?s=128&d=identicon&r=PG", "display_name": "Mihai Todor", "link": "https://stackoverflow.com/users/1174378/mihai-todor"}, "edited": false, "score": 0, "creation_date": 1424453556, "post_id": 28585253, "comment_id": 45569590, "body": "If I recall correctly, GMP doesn&#39;t exploit multithreading for its algorithms. Did they add such functionality in the mean time? (I really doubt it)"}], "owner": {"reputation": 87, "user_id": 2233233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2b3c3e68aa2a3198e3e99eac8c593ad4?s=128&d=identicon&r=PG", "display_name": "iPh1ps99", "link": "https://stackoverflow.com/users/2233233/iph1ps99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1424270833, "creation_date": 1424267373, "last_edit_date": 1424267587, "question_id": 28585253, "link": "https://stackoverflow.com/questions/28585253/processing-speed-makes-no-difference-in-c-program", "title": "Processing speed makes no difference in C program", "body": "<p>I'm programming a tool that generates some digits of the square root of 2. The library I'm using is GMP to achive more digits. I debugged the program on a dual core with 1.4Ghz and on a quadcore with 3.4Ghz. Also I measured the time with the time(0) function which I used before the function call and after and then I substracted the result. I noticed that there is completely no difference in time when I try the program on different PC's with different CPU's. Maybe I need to enable something like multithreading or that it uses full power of the CPU. I should also mention that everything was compiled with GCC with the linker flags -lgmp. </p>\n\n<p>Here is the code</p>\n\n<pre><code>/*\n * sqrt2.c\n *\n *  Created on: 18.02.2015\n *      Author: iPh1ps99\n */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;gmp.h&gt;\n#include \"helper.h\"\n\n/*\n * @param decimals: Holds the amount of digits\n * @return Returns the malloc'd string holding the digits\n */\nchar *sqrt2(unsigned long decimals) {\n    mpf_t result;\n    mp_exp_t exp;\n    char *output;\n\n    /*\n     * Initializing\n     */\n    mpf_set_default_prec(decimals * BINARYLOG10);\n    mpf_inits(result, NULL);\n\n    /*\n     * Calculation\n     */\n    mpf_sqrt_ui(result, 2);\n\n    /*\n     * Converting number to a string\n     */\n    output = mpf_get_str(NULL, &amp;exp, 10, 0, result);\n\n    /*\n     * Cleaning up\n     */\n    mpf_clears(result, NULL);\n\n    return output;\n}\n</code></pre>\n\n<p>And here is how I call the function</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include \"helper.h\"\n\nint main() {\n    unsigned long decimals = 100000000;\n    char *output = NULL;\n    FILE *out = NULL;\n    out = fopen(\"sqrt2.txt\", \"w\");\n    if (out == NULL) {\n        printf(\"Error occured while opening file!\");\n        return 1;\n    }\n\n    int start = time(NULL);\n    output = sqrt2(decimals);\n    int end = time(NULL);\n    fprintf(out, \"%.1s.%s\\n\", output, output + 1);\n    printf(\"It took me about %d seconds to calculate %lu decimals\\n\", end - start,\n            decimals);\n\n    fclose(out);\n    free(output);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "function", "struct", "argument-passing"], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 4, "last_activity_date": 1424266767, "last_edit_date": 1495542510, "creation_date": 1424266767, "answer_id": 28585044, "question_id": 28585002, "link": "https://stackoverflow.com/questions/28585002/how-to-pass-structures-to-a-function-in-c/28585044#28585044", "title": "How to pass structures to a function in C", "body": "<p>You should change this</p>\n\n<pre><code>collisione(coll_vcm1[i].x,i);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>collisione(coll_vcm1, i);\n</code></pre>\n\n<p>you where passing the <code>x</code> field at position <code>i</code> in the array, instead of the pointer to the array <code>coll_vcm1</code></p>\n\n<p>Also, note that <a href=\"https://stackoverflow.com/a/605858/1983495\">casting the return value from <code>malloc()</code></a> makes you among other things, repeat yourself.</p>\n\n<pre><code>coll_vcm1=(vect_xyz*)malloc(Np*sizeof(vect_xyz));\n</code></pre>\n\n<p>could just be</p>\n\n<pre><code>coll_vcm1 = malloc(Np * sizeof(vect_xyz));\n</code></pre>\n\n<p>and what you actually should do, is check the return value, on error <code>malloc()</code> returns <code>NULL</code>, so</p>\n\n<pre><code>coll_vcm1 = malloc(Np * sizeof(vect_xyz));\nif (coll_vcm1 == NULL)\n    tragedy_cannotAllocateMemory_DoNot_Continue();\n</code></pre>\n\n<p>and finally take your time to format your code, so others and you can read it and understand it.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1424267310, "last_edit_date": 1592644375, "creation_date": 1424266907, "answer_id": 28585094, "question_id": 28585002, "link": "https://stackoverflow.com/questions/28585002/how-to-pass-structures-to-a-function-in-c/28585094#28585094", "title": "How to pass structures to a function in C", "body": "<p>The error message speaks for itself, isn't it?</p>\n<blockquote>\n<p>incompatible type for argument 1 of \u2018collisione\u2019</p>\n<p>expected \u2018struct vect_xyz *\u2019 but argument is of type \u2018float\u2019</p>\n</blockquote>\n<p>Your function prototype is</p>\n<pre><code>void collisione(vect_xyz *coll_vcm1,int i)\n</code></pre>\n<p>and you're calling this function like</p>\n<pre><code>collisione(coll_vcm1[i].x,i);\n</code></pre>\n<p>where, the first supplied argument <code>coll_vcm1[i].x</code> is of type <code>float</code>. You need to change that to</p>\n<pre><code>collisione(coll_vcm1, i);\n</code></pre>\n<p>so that the first argument is of type <code>vect_xyz *</code>.</p>\n<p>Note: Please <a href=\"https://stackoverflow.com/q/605845/2173917\">do not cast</a> the return value of <code>malloc()</code> and family.</p>\n"}], "owner": {"reputation": 3873, "user_id": 4143292, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/dRHrc.png?s=128&g=1", "display_name": "Federico Gentile", "link": "https://stackoverflow.com/users/4143292/federico-gentile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 28585044, "answer_count": 2, "score": 0, "last_activity_date": 1424267310, "creation_date": 1424266657, "last_edit_date": 1424267251, "question_id": 28585002, "link": "https://stackoverflow.com/questions/28585002/how-to-pass-structures-to-a-function-in-c", "title": "How to pass structures to a function in C", "body": "<p>I wrote a C code which is formed by these files: <em>main.c</em>, <em>kernel.c</em>. Here are the files:</p>\n\n<p><em>main.c</em>:</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n\ntypedef struct{\n  float x;\n  float y;\n  float z;\n} vect_xyz;\n\nvect_xyz *coll_vcm1;\n\n#include \"kernel.c\"\n//==============================================================\nint main(void){\n\nint Np=10, i;   \nfloat xx = 1;\ncoll_vcm1=(vect_xyz*)malloc(Np*sizeof(vect_xyz));\n\nfor(i=0;i&lt;Np;i++){\n  coll_vcm1[i].x = xx;\n  coll_vcm1[i].y = 2*xx;\n  coll_vcm1[i].z = 3*xx;\n  xx = xx + 1;\n}\n\nfor(i=0;i&lt;Np;i++){\n  collisione(coll_vcm1[i].x,i);\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p><em>kernel.c</em></p>\n\n<pre><code>void collisione(vect_xyz *coll_vcm1,int i){ \n  printf(\"coll_vcm1[%d].x=%f\\n\",i,coll_vcm1[i].x);\n}\n</code></pre>\n\n<p>Here is the make file:</p>\n\n<pre><code>CC=gcc\nCFLAGS=-Wall\nOBJS = main.o \n\nall: eseguibile\n\neseguibile: $(OBJS)\n   $(CC) $(CFLAGS) $(OBJS) -o eseguibile -lm\n\nmain.o: main.c kernel.c\n   $(CC) -c $(CFLAGS) main.c\n\nclean:\n  rm -rf *.o eseguibile\n</code></pre>\n\n<p>(watch out for the tabs). When I run it by typing <em>make</em> I get this error message: </p>\n\n<pre><code>main.c: In function \u2018main\u2019:\nmain.c:30:7: error: incompatible type for argument 1 of \u2018collisione\u2019\n   collisione(coll_vcm1[i].x,i);\n   ^\nIn file included from main.c:14:0:\nkernel.c:1:6: note: expected \u2018struct vect_xyz *\u2019 but argument is of type \u2018float\u2019\nvoid collisione(vect_xyz *coll_vcm1,int i){ \n  ^\nmake: *** [main.o] Error 1\n</code></pre>\n\n<p>Of course the mistake occurs when I call the function <em>collisione()</em> but I don't understand why. The other thing that I suppose to be wrong is in the <em>kernel.c</em> file; as a matter of fact I believe that writing <code>vect_xyz *coll_vcm1</code> is wrong because I am not specifying the index <em>i</em>.</p>\n\n<p>So here is my question:\n- What should I write in the <em>kernel.c</em> file in order to print the values of structure everytime in the for loop?</p>\n\n<p>PS: I want to keep the loop </p>\n\n<pre><code>for(i=0;i&lt;Np;i++){\n  collisione(coll_vcm1[i].x,i);\n}\n</code></pre>\n\n<p>outside of the <em>kernel.c</em> file.</p>\n"}, {"tags": ["c", "microcontroller"], "comments": [{"owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 0, "creation_date": 1424266397, "post_id": 28584900, "comment_id": 45477052, "body": "Or do I have to modify the python script instead?"}], "answers": [{"comments": [{"owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 0, "creation_date": 1424269165, "post_id": 28585216, "comment_id": 45478857, "body": "I added a piece of the python script that takes in the data. Any ideas how I can set it up to receive the new 2 8-bit numbers and combine them into a glorious 16-bit number?"}, {"owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 0, "creation_date": 1424293152, "post_id": 28585216, "comment_id": 45494113, "body": "Isn&#39;t there a way to just transmit the data in it&#39;s full 16-bit form by modifying the transmit function? Can I avoid splitting up the data into two 8-bit pieces?"}, {"owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 0, "creation_date": 1424293527, "post_id": 28585216, "comment_id": 45494338, "body": "Also, making the modifications you suggest doesn&#39;t exactly work. The data I get now switches between two integers: 120.0 and 30720.0 now when I try to transmit the number 300. Any thoughts to why that is?"}, {"owner": {"reputation": 9854, "user_id": 1741450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7900ed57a92b336effd879fa61de226?s=128&d=identicon&r=PG", "display_name": "lucasg", "link": "https://stackoverflow.com/users/1741450/lucasg"}, "reply_to_user": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 0, "creation_date": 1424296690, "post_id": 28585216, "comment_id": 45496079, "body": "I&#39;ve forgot a &#39;+&#39; sign in the new_value. Now it shouldn&#39;t switch anymore. As for the two values, it means that data[0] == &#39;x&#39;, which means you are sending only x char. Why ? I don&#39;t know. You should check using a rs323 sniffer or wireshark if it&#39;s IP based."}, {"owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 0, "creation_date": 1424297370, "post_id": 28585216, "comment_id": 45496439, "body": "Ya now it switches between 30720 and 30840. I dont think it is IP based or whatnot, because I could transmit the value 200 no problem or anything less than 256. With the code you suggested I don&#39;t get values below 256 now, just displays zero. And above 256 I only get the swtiching between 30720 ,30840. Sorry to keep bugging you - any thoughts?"}], "tags": [], "owner": {"reputation": 9854, "user_id": 1741450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7900ed57a92b336effd879fa61de226?s=128&d=identicon&r=PG", "display_name": "lucasg", "link": "https://stackoverflow.com/users/1741450/lucasg"}, "is_accepted": false, "score": 2, "last_activity_date": 1424296570, "last_edit_date": 1424296570, "creation_date": 1424267239, "answer_id": 28585216, "question_id": 28584900, "link": "https://stackoverflow.com/questions/28584900/transmit-16-bit-number-instead-of-8/28585216#28585216", "title": "transmit 16 bit number instead of 8", "body": "<p>Transmit your 16-bit number as two 8-bit ones : </p>\n\n<pre><code>TXByte = 300 &gt;&gt; 8;\nTransmit();\nTXByte = 300 &amp; 0xff;\nTransmit();\n</code></pre>\n\n<p>Of course, the receiving end has to know you're working with big-endian 16-bit words, otherwise you'll get false results.  </p>\n\n<p>Python's receiver : </p>\n\n<pre><code>while(1): #loop forever\n    new_value = 0\n\n    for byte_count in range(2): # we need to wait two bytes\n        data = ser.read(1) # read one byte at a time\n        if len(data) &gt; 0: \n             # the first byte is right-shifted by b bits, the second not.\n             new_value += ord(data[0]) &lt;&lt; 8*(1-byte_count) \n\n    # new_values contains a 16-bit integer        \n    yvals[49] = new_value \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2379, "user_id": 3696798, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ab86feaa934235389b714b491e8ef441?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/3696798/simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1424282667, "last_edit_date": 1424282667, "creation_date": 1424267905, "answer_id": 28585448, "question_id": 28584900, "link": "https://stackoverflow.com/questions/28584900/transmit-16-bit-number-instead-of-8/28585448#28585448", "title": "transmit 16 bit number instead of 8", "body": "<p>Your problem is in the following comment\n//Load Bit counter, 8 data + Start/Stop bit.</p>\n\n<p>If there are 8 data bits, the biggest number you can express is 2^8-1 = 255 \nWhen you set the byte to 300 for example this is what happens:\n300:        0b'100101100\nempty byte:  0b'00000000\nif you set the byte to 300, only the 8 least significant bits get copied (for the others is no space), so you end up with the number 0b'00101100 which is 44</p>\n\n<p>EDIT:\nimho you should change the transmit function such that it doesnt transmit a byte which is stored in a global but a byte which is input to the function, so you get: void transmit(unsigned char transmitByte)</p>\n\n<p>Now you can build a new function:</p>\n\n<pre><code>void transmitBigNumber(unsigned short transmitBits) {\n    transmit(transmitBits &amp; 0x00FF); transmit(transmitBits &gt;&gt; 8);\n}\n</code></pre>\n\n<p>On the receive side you do the same but the other way around and you merge the bytes again.</p>\n"}, {"comments": [{"owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 0, "creation_date": 1424291862, "post_id": 28586724, "comment_id": 45493397, "body": "so I need some more if statements in my C code or in my python script? Really confused how to implement what you suggested into my code"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1424271721, "creation_date": 1424271721, "answer_id": 28586724, "question_id": 28584900, "link": "https://stackoverflow.com/questions/28584900/transmit-16-bit-number-instead-of-8/28586724#28586724", "title": "transmit 16 bit number instead of 8", "body": "<p>Let us say the ability to transmit/receive 8-bits of data is the lowest level of communication and view this from the receiving end.  Certainly receiving all of the 65,536 combinations of 16-bits of data needs at least two 8-bit bytes.  But upon receiving a byte, is it the 1st or 2nd byte that was received?  Thus some <em>synchronization</em> is needed.  There are many standards ones can use.  I'll put forth an idea: variation on <a href=\"http://en.wikipedia.org/wiki/UTF-8#Description\" rel=\"nofollow\">UTF-8</a>.</p>\n\n<p>When value is <code>0</code> to <code>127</code>, receiver sees <code>0-127</code> and knows the value.</p>\n\n<p>When the value is <code>128-255</code>, receiver knows it is part of a multi-byte transfer.  </p>\n\n<p>All continuation bytes begin with <code>0b10xxxxxx</code>, so if one is first received, code discards that, waiting for a <code>0</code> to <code>127</code> or <code>0xb11xxxxxx</code>.  </p>\n\n<p>Upon receiving <code>0b110xxxxx</code>, code knows this is the beginning of a 2 byte sequence for the values <code>0x80</code> to <code>0x7FF</code>.  </p>\n\n<p>Upon receiving <code>0b1110xxxx</code>, code knows this is the beginning of a 3 byte sequence for the values <code>0x800</code> to <code>0xFFFF</code>.  </p>\n\n<p>16-bit values are formed from combining the optional <code>x</code> bits in the lead sequence and the continuation bytes per the UTF-8 spec.  <a href=\"http://en.wikipedia.org/wiki/UTF-8#Examples\" rel=\"nofollow\">Example</a></p>\n"}], "owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1424296570, "creation_date": 1424266339, "last_edit_date": 1424269107, "question_id": 28584900, "link": "https://stackoverflow.com/questions/28584900/transmit-16-bit-number-instead-of-8", "title": "transmit 16 bit number instead of 8", "body": "<p>Prob a long shot but I am trying to transmit a 16 bit number via C and the TI MSP430 to a python script.</p>\n\n<p>I have no problem transmitting 8 bit numbers, up to 255 that is, but once the number goes over 255 it becomes Whatever number that is minus 256. For example if I try to transmit the number 300 I get 44 instead. </p>\n\n<p>I am really not sure what part of the code I should change as it is not my code and I am new to all this. i am trying to modify existing code. Here are the relevant bits I think : Here is the code, can someone help me modify the code to transmit numbers higher than 236. Probably up to like 2000 or so. THANKS!</p>\n\n<pre><code>unsigned char BitCnt;\nunsigned int TXByte;\n\nvoid Transmit(void);\n\nvoid main(void)\n{\n    WDTCTL = WDTPW + WDTHOLD; // Stop WDT\n\n\n        TXByte = 300;\n        Transmit();\n\n    }\n\n}\n\nvoid Transmit()\n{\n\n  BitCnt = 0xA;           // Load Bit counter, 8 data + Start/Stop bit\n  TXByte |= 0x100;        // Add mark stop bit to TXByte\n  TXByte = TXByte &lt;&lt; 1;   // Add space start bit\n\n\n  TACCR0 = TAR+ Bitime;\n  TACCTL0 =  CCIS0 + OUTMOD0 + CCIE;   // TXD = mark = idle, enable interrupts\n  // OUTMOD0 sets output mode 1: SET which will\n  // have the CCR bit (our TX bit) to go high when the timer expires\n  while ( TACCTL0 &amp; CCIE );                   // Wait for TX completion\n}\n</code></pre>\n\n<p>Python script: \nSo now I need to edit my python script to combine these two sets of 8-bit numbers. Currently I have something like:</p>\n\n<pre><code>while(1): #loop forever\n    data = ser.read(1) # look for a character from serial port\n    if len(data) &gt; 0: #was there a byte to read? Will always be true\n        yvals[49] = ord(data)\n</code></pre>\n\n<p>How would I combine the 8-bit sets of number? 'data' is the incoming information from the MSP430 controller.</p>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 1, "creation_date": 1424265762, "post_id": 28584676, "comment_id": 45476657, "body": "Why don&#39;t you debug it?"}, {"owner": {"reputation": 667, "user_id": 981403, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PrBma.png?s=128&g=1", "display_name": "Mazeryt", "link": "https://stackoverflow.com/users/981403/mazeryt"}, "edited": false, "score": 0, "creation_date": 1424266099, "post_id": 28584676, "comment_id": 45476852, "body": "ignoring other issues Your loop will never iterate element [3][17]. It only iterate [0][0], [1][1], [2][2]... [35][35] elements because You increase i and j simultaneously, so main loop is wrong to show [3][17]"}, {"owner": {"reputation": 1, "user_id": 4135594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb15cfcbcf9d2bd8025d663aec1afcb?s=128&d=identicon&r=PG&f=1", "display_name": "user4135594", "link": "https://stackoverflow.com/users/4135594/user4135594"}, "edited": false, "score": 0, "creation_date": 1424266468, "post_id": 28584676, "comment_id": 45477106, "body": "You&#39;re right stupid mistake. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4135594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb15cfcbcf9d2bd8025d663aec1afcb?s=128&d=identicon&r=PG&f=1", "display_name": "user4135594", "link": "https://stackoverflow.com/users/4135594/user4135594"}, "edited": false, "score": 0, "creation_date": 1424266495, "post_id": 28584783, "comment_id": 45477125, "body": "As I said earlier that&#39;s a stupid mistake. I will try this thank you very much"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1, "user_id": 4135594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb15cfcbcf9d2bd8025d663aec1afcb?s=128&d=identicon&r=PG&f=1", "display_name": "user4135594", "link": "https://stackoverflow.com/users/4135594/user4135594"}, "edited": false, "score": 0, "creation_date": 1424266591, "post_id": 28584783, "comment_id": 45477191, "body": "@user4135594 You&#39;re welcome. BTW, i did not put that comment and wrote the answer beforehands, so the <i>As I said earlier</i> is not applicable to me. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1424266045, "creation_date": 1424266045, "answer_id": 28584783, "question_id": 28584676, "link": "https://stackoverflow.com/questions/28584676/finding-an-element-in-an-array-c/28584783#28584783", "title": "Finding an element in an array C", "body": "<p>The problem is, you're incrementing both <code>i</code> and <code>j</code> in every iteration. This will only give you elements like</p>\n\n<pre><code>array[0][0]\narray[1][1]\narray[2][2]\n...\n</code></pre>\n\n<p>What you need here is a nested loop.</p>\n\n<p>Sample pesudocode:</p>\n\n<pre><code>for (i = 0; i &lt; SIZE_X; i++)\n    for (j = 0; j &lt; SIZE_Y; j++)    //for a particular value of i, traverse all values of j\n    {\n         if (array[i][j].choice == 1)\n             printf(\"%d %d\\n\",i,j);\n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4135594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb15cfcbcf9d2bd8025d663aec1afcb?s=128&d=identicon&r=PG&f=1", "display_name": "user4135594", "link": "https://stackoverflow.com/users/4135594/user4135594"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1424268756, "creation_date": 1424265713, "last_edit_date": 1424268756, "question_id": 28584676, "link": "https://stackoverflow.com/questions/28584676/finding-an-element-in-an-array-c", "title": "Finding an element in an array C", "body": "<p>I'm having troubles finding an element on an array.</p>\n\n<p>I have a 2D array of elements    <code>t_elem **array</code>.</p>\n\n<p>For the size of the array , I used the malloc function with  <code>#define SIZE_X 45</code>and <code>#define SIZE_Y 35</code>. Doesn't seem to be any problem with the malloc</p>\n\n<p>The struct elem:</p>\n\n<pre><code>typedef struct elem\n{\n\n    int choice; \n    int color;\n\n}t_elem;\n</code></pre>\n\n<p><code>choice</code> is supposed to be a boolean : <code>1</code> if the element is choosen , <code>0</code> if it's not.</p>\n\n<p>I initialize all the elements to <code>0</code> , except <code>array[3][17]</code> (3rd column and 17th line)</p>\n\n<p>When I want to access to the choosen element , I use the following code:</p>\n\n<pre><code>array[3][17].choice = 1;  \n\nwhile(array[i][j].choice != 1 &amp;&amp; i &lt; SIZE_X &amp;&amp; j &lt; SIZE_Y)\n{\n    i++;\n    j++;\n}\nprintf(\"%d %d\\n\",i,j);\n</code></pre>\n\n<p>I expect the <code>printf()</code> to return <code>3 17</code> , but all I got is <code>35 35</code></p>\n\n<p>I'm not that good in C and I may be missing something evident. Any help please?</p>\n"}, {"tags": ["c", "arrays", "nested-loops"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424265039, "post_id": 28584448, "comment_id": 45476206, "body": "Why aren&#39;t you using SQL?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424265538, "post_id": 28584448, "comment_id": 45476512, "body": "why did you reedit the code? did you add something? also use more whitespace to make your code clear and easy to read, the compiler will ignore them anyway."}, {"owner": {"reputation": 23, "user_id": 4579566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97570ce2a5b57adfc986990c4cbb6407?s=128&d=identicon&r=PG&f=1", "display_name": "Shema", "link": "https://stackoverflow.com/users/4579566/shema"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424265607, "post_id": 28584448, "comment_id": 45476549, "body": "No I just corrected grammar mistakes. Thanks for the edit of yours."}, {"owner": {"reputation": 9854, "user_id": 1741450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7900ed57a92b336effd879fa61de226?s=128&d=identicon&r=PG", "display_name": "lucasg", "link": "https://stackoverflow.com/users/1741450/lucasg"}, "edited": false, "score": 0, "creation_date": 1424265951, "post_id": 28584448, "comment_id": 45476772, "body": "beware, you&#39;re trying to access outside the array : array[m - 1] when m==0. that&#39;s maybe why you can&#39;t find a match."}, {"owner": {"reputation": 23, "user_id": 4579566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97570ce2a5b57adfc986990c4cbb6407?s=128&d=identicon&r=PG&f=1", "display_name": "Shema", "link": "https://stackoverflow.com/users/4579566/shema"}, "edited": false, "score": 0, "creation_date": 1424266214, "post_id": 28584448, "comment_id": 45476927, "body": "Good catch. That doesn&#39;t seem to solve the problem though, it juts prints the all of the months."}, {"owner": {"reputation": 23, "user_id": 4579566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97570ce2a5b57adfc986990c4cbb6407?s=128&d=identicon&r=PG&f=1", "display_name": "Shema", "link": "https://stackoverflow.com/users/4579566/shema"}, "edited": false, "score": 0, "creation_date": 1424266313, "post_id": 28584448, "comment_id": 45476989, "body": "What would be a more elegant way, without those loops? Maybe the use of a function to compare integer arrays?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424267814, "post_id": 28584448, "comment_id": 45478018, "body": "@Shema did you check my answer?"}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1424268853, "last_edit_date": 1424268853, "creation_date": 1424266543, "answer_id": 28584961, "question_id": 28584448, "link": "https://stackoverflow.com/questions/28584448/retrieving-missing-entries-from-a-file/28584961#28584961", "title": "Retrieving missing entries from a file", "body": "<p>You can build an array of months which would have an integer value indicating if the month is present, then for each citi name, you iterate until the city name changes in a while loop, making each entry in the array equal to <code>1</code> for each entry in the file, after the array will contain in the <strong>missing</strong> months positions - 1, a <code>0</code> so if it does you output that value to the file.</p>\n\n<p>Here is the code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct City {\n    char name[20];\n    int month;\n    float avg;\n\n};\n\nint scan(struct City *arr, int len)\n{\n    FILE *fp = fopen(\"measurements.txt\", \"r\");\n    int   i  = 0;\n\n    if (fp == NULL) {\n        printf(\"Error while reading.\");\n        exit(1);\n    }\n\n    while ((fscanf(fp,\"%12s%d%f\\n\", arr[i].name, &amp;arr[i].month, &amp;arr[i].avg)) == 3)\n        i++;\n    fclose(fp);\n\n    return i;\n\n}\n\nvoid sort(struct City *arr, int len)\n{\n    struct City temp[100];\n    int         i, j;\n\n    for (i = 0 ; i &lt; len - 1 ; i++) {\n        for (j = i + 1 ; j &lt; len; j++) {\n            int compare = strcmp(arr[i].name, arr[j].name);\n            if(compare &gt; 0) {\n                temp[i] = arr[i];\n                arr[i]  = arr[j];\n                arr[j]  = temp[i];\n            }\n        }\n    }\n\n}\n\nint main()\n{\n    struct City array[100];\n    FILE       *fout;\n    int         len;\n    const char *previous;\n    int         month;\n\n    len = scan(array, 100);\n    if (len == 0)\n        return -1;\n    sort(array, len);\n\n    fout = fopen(\"missing.txt\",\"w\");\n    if (fout == NULL) {\n        printf(\"Error while printing\");\n        return -1;\n    }\n    previous = NULL;\n    month    = 1;\n    for (int i = 0 ; i &lt; len ; i++) {\n        int months[12] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};\n\n        previous = array[i].name;\n        while (strcmp(previous, array[i].name) == 0)\n        {\n            int month;\n            month = array[i].month;\n            if ((month &gt;= 0) &amp;&amp; (month &lt; 12))\n                months[month - 1] = 1;\n            i += 1;\n        }\n        i -= 1;\n\n        for (int j = 0 ; j &lt; 12 ; j++)\n        {\n            if (months[j] != 0)\n                continue;\n            fprintf(fout, \"%15s%5d\\n\", previous, j + 1);\n        }\n    }\n    fclose(fout);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4579566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97570ce2a5b57adfc986990c4cbb6407?s=128&d=identicon&r=PG&f=1", "display_name": "Shema", "link": "https://stackoverflow.com/users/4579566/shema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424272640, "creation_date": 1424264923, "last_edit_date": 1424266683, "question_id": 28584448, "link": "https://stackoverflow.com/questions/28584448/retrieving-missing-entries-from-a-file", "title": "Retrieving missing entries from a file", "body": "<p>Say there's a text file 'measurements' that looks like this:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>         London     1   0.5\n         London     2   1.0\n          Tokyo     3   2.0\n         London     6  18.4\n          Tokyo    11  -1.0\n          Tokyo     1  -0.3\n        Toronto     3  -1.0\n         London     8   8.0\n        Toronto    11  11.0\n        Toronto    12  10.4\n         London     7  -5.6\n</code></pre>\n\n<p>Where the first column stores the cities' names, the second one represents the month in which the measurement took place, and the third one is simply the average temperature for that month in the given city. Now, what I want is to read all this data, and find for what months there are no entries for one city(e.g. London 3, Tokyo 6 etc.), and put all of that in the text file called 'errors'.\nHere's how I tried, but ultimately got stuck:\n</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct City {\n    char name[20];\n    int month;\n    float avg;\n\n};\n\nint scan(struct City *arr, int len)\n{\n    FILE *fp = fopen(\"measurements.txt\", \"r\");\n    if (fp == NULL) {\n        printf(\"Error while reading.\");\n        exit(1);\n    }\n    int i = 0;\n    while ((fscanf(fp,\"%12s%d%f\\n\", arr[i].name, &amp;arr[i].month, &amp;arr[i].avg)) == 3)\n        i++;\n    fclose(fp);\n    return i;\n}\n\nvoid sort(struct City *arr, int len)\n{\n    struct City temp[100];\n    int         i, j;\n\n    for (i = 0 ; i &lt; len - 1 ; i++) {\n        for (j = i + 1 ; j &lt; len; j++) {\n            int compare = strcmp(arr[i].name, arr[j].name);\n            if (compare &gt; 0) {\n                temp[i] = arr[i];\n                arr[i]  = arr[j];\n                arr[j]  = temp[i];\n            }\n        }\n    }\n\n}\n\nint main()\n{\n    struct City array[100];\n    int len = scan(array,1000);\n    sort(array, len);\n\n    FILE *fout;\n\n    fout = fopen(\"missing.txt\",\"w\");\n    if (fout == NULL) {\n        printf(\"Error while printing\");\n        exit(1);\n    }\n\n    int i;\n    for (i = 1 ; i &lt; len ; i++) {\n        int j, m = 1, found = 0;\n        for (j = 1 ; j &lt;= 12 ; j++) {\n            while (strcmp(array[m - 1].name, array[m].name) == 0) {\n                if (array[m - 1].month == j)\n                    found=1;\n            }\n            if (found == 0)\n                fprintf(fout,\"%15s %d\",array[i].name, j);\n        }\n    }\n    fclose(fout);\n    return 0;\n}\n</code></pre>\n\n<p>However, when I run this program, the file 'output' remains empty, which I guess, is due to a mistake in the nested loops near the end of the code. I feel there must be a simpler and more elegant way to do this. How would you approach this problem?</p>\n"}, {"tags": ["c", "function", "function-pointers"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424263113, "post_id": 28583879, "comment_id": 45475116, "body": "can you please post the exact code? a compilable sample?"}, {"owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "edited": false, "score": 1, "creation_date": 1424263372, "post_id": 28583879, "comment_id": 45475270, "body": "This might help  <a href=\"http://stackoverflow.com/questions/840501/how-do-function-pointers-in-c-work?rq=1\" title=\"how do function pointers in c work\">stackoverflow.com/questions/840501/&hellip;</a>"}, {"owner": {"reputation": 608, "user_id": 4050822, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UiYwh.jpg?s=128&g=1", "display_name": "Shivendra Mishra", "link": "https://stackoverflow.com/users/4050822/shivendra-mishra"}, "edited": false, "score": 0, "creation_date": 1424263886, "post_id": 28583879, "comment_id": 45475552, "body": "@ iharob: My code is longer. I just updated."}], "answers": [{"comments": [{"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 2, "creation_date": 1424263817, "post_id": 28584014, "comment_id": 45475506, "body": "<code>fn_pointer</code> is not a pointer in this declaration (just a function)."}], "tags": [], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "is_accepted": false, "score": 4, "last_activity_date": 1424265059, "last_edit_date": 1424265059, "creation_date": 1424263478, "answer_id": 28584014, "question_id": 28583879, "link": "https://stackoverflow.com/questions/28583879/writing-a-function-pointer-in-c/28584014#28584014", "title": "Writing a function pointer in c", "body": "<p>From <a href=\"http://cdecl.org/\" rel=\"nofollow\">cdecl</a> (which is a handy helper tool to decipher C declarations):</p>\n\n<pre><code>int (*fn_pointer ( this_args1 ))( this_args2 )\n</code></pre>\n\n<blockquote>\n  <p>declare fn_pointer as function (this_args1) returning pointer to\n  function (this_args2) returning int</p>\n</blockquote>\n\n<p>Hence the former is a function, that returns pointer to function, while the latter:</p>\n\n<p><code>return_type (*fn_pointer ) (arguments);</code></p>\n\n<p>is an ordinary \"pointer to function\".</p>\n\n<hr>\n\n<p>Read more about undestanding complex declarations from the <a href=\"http://c-faq.com/decl/spiral.anderson.html\" rel=\"nofollow\">Clockwise/Spiral Rule</a> article.</p>\n"}, {"comments": [{"owner": {"reputation": 608, "user_id": 4050822, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UiYwh.jpg?s=128&g=1", "display_name": "Shivendra Mishra", "link": "https://stackoverflow.com/users/4050822/shivendra-mishra"}, "edited": false, "score": 0, "creation_date": 1424264157, "post_id": 28584081, "comment_id": 45475737, "body": "Which one is argument and which one is return ?"}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 10, "last_activity_date": 1424267953, "last_edit_date": 1495542582, "creation_date": 1424263683, "answer_id": 28584081, "question_id": 28583879, "link": "https://stackoverflow.com/questions/28583879/writing-a-function-pointer-in-c/28584081#28584081", "title": "Writing a function pointer in c", "body": "<pre><code>int (*fn_pointer ( this_args ))( this_args );  \n</code></pre>\n\n<p>declares <code>fn_pointer</code> as a function that takes <code>this_args</code> and returns a pointer to a function that takes <code>this_args</code> as argument and returns an <code>int</code> type. It is equivalent to   </p>\n\n<pre><code>typedef int (*func_ptr)(this_args);\nfunc_ptr fn_pointer(this_args);\n</code></pre>\n\n<p>Let's understand it a bit more:  </p>\n\n<pre><code>int f1(arg1, arg2);  // f1 is a function that takes two arguments of type   \n                     // arg1 and arg2 and returns an int.\n\nint *f2(arg1, arg2);  // f2 is a function that takes two arguments of type  \n                      // arg1 and arg2 and returns a pointer to int.  \n\nint (*fp)(arg1, arg2); // fp is a pointer to a function that takes two arguments of type  \n                       // arg1 and arg2 and returns a pointer to int.  \n\nint f3(arg3, int (*fp)(arg1, arg2)); // f3 is a function that takes two arguments of  \n                                        // type arg3 and a pointer to a function that \n                                        // takes two arguments of type arg1 and arg2 and \n                                        // returns an int.  \n\nint (*f4(arg3))(arg1, arg2); // f4 is a function that takes an arguments of type   \n                             // arg3 and returns a pointer to a function that takes two \n                             // arguments of type arg1 and arg2 and returns an int   \n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/10759352/2455888\">How to read</a> <code>int (*f4(arg3))(arg1, arg2);</code>   </p>\n\n<pre><code>          f4                           -- f4\n        f3(   )                        -- is a function\n        f3(arg3)                       --  taking an arg3 argument\n       *f3(arg3)                       --   returning a pointer\n     (*f3(arg3))(    )                 --   to a function\n    (*f3(arg3))(arg1, arg2)            --     taking arg1 and arg2 parameter\n  int (*f3(arg3))(arg1, arg2)           --     and returning an int  \n</code></pre>\n\n<p>So, finally a home work :). Try to figure out the declaration  </p>\n\n<pre><code>void (*signal(int sig, void (*func)(int)))(int);  \n</code></pre>\n\n<p>and use <code>typedef</code> to redefine it.</p>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1424264696, "creation_date": 1424264696, "answer_id": 28584369, "question_id": 28583879, "link": "https://stackoverflow.com/questions/28583879/writing-a-function-pointer-in-c/28584369#28584369", "title": "Writing a function pointer in c", "body": "<p>This</p>\n\n<pre><code>int (*fn_pointer ( this_args1 ))( this_args2 )\n</code></pre>\n\n<p>declares a function that takes as arguments <code>this_args1</code> and returns a function pointer of type</p>\n\n<pre><code>int (*fn_pointer)(this_args2)\n</code></pre>\n\n<p>so it's just a function that returns a function pointer.</p>\n"}], "owner": {"reputation": 608, "user_id": 4050822, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UiYwh.jpg?s=128&g=1", "display_name": "Shivendra Mishra", "link": "https://stackoverflow.com/users/4050822/shivendra-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 28584081, "answer_count": 3, "score": 5, "last_activity_date": 1439983998, "creation_date": 1424263056, "last_edit_date": 1495539834, "question_id": 28583879, "link": "https://stackoverflow.com/questions/28583879/writing-a-function-pointer-in-c", "title": "Writing a function pointer in c", "body": "<p>I was recently reading a code, and found that a function pointer is written as :</p>\n\n<pre><code>int (*fn_pointer ( this_args ))( this_args )\n</code></pre>\n\n<p>I usually encounter a function pointer like this :</p>\n\n<pre><code>return_type (*fn_pointer ) (arguments);\n</code></pre>\n\n<p>Similar thing is discussed <a href=\"https://stackoverflow.com/questions/840501/how-do-function-pointers-in-c-work?rq=1\">here</a>:</p>\n\n<pre><code>// this is a function called functionFactory which receives parameter n\n// and returns a pointer to another function which receives two ints\n// and it returns another int\nint (*functionFactory(int n))(int, int) {\nprintf(\"Got parameter %d\", n);\nint (*functionPtr)(int,int) = &amp;addInt;\nreturn functionPtr;\n}\n</code></pre>\n\n<p>Can somebody tell me what is the difference and how does this work ?</p>\n"}, {"tags": ["c", "linux", "zlib"], "comments": [{"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1424262847, "post_id": 28583687, "comment_id": 45474971, "body": "In this case AMD64 simply refers to the architecture itself, the 64-bit extension to the x86 which first developed by AMD but nowadays used by Intel as well. In any event are you tied specifically to (g-)zip or are you free to consider other, potentially more performant, alternatives?"}, {"owner": {"reputation": 619, "user_id": 2156678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DEjZM.jpg?s=128&g=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/2156678/amit"}, "reply_to_user": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1424264095, "post_id": 28583687, "comment_id": 45475693, "body": "I use other option such as lzma and planning to experiment with lzo, however most of the existing data is in gzip format."}, {"owner": {"reputation": 3577, "user_id": 1070329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b153ef5149a399ceec0cc097eda2ebd7?s=128&d=identicon&r=PG", "display_name": "mjsa", "link": "https://stackoverflow.com/users/1070329/mjsa"}, "edited": false, "score": 0, "creation_date": 1447755426, "post_id": 28583687, "comment_id": 55276110, "body": "Kinda off topic, but interestingly CloudFlare are now starting to experiment with Brotli: <a href=\"https://blog.cloudflare.com/results-experimenting-brotli/\" rel=\"nofollow noreferrer\">blog.cloudflare.com/results-experimenting-brotli</a>"}], "answers": [{"comments": [{"owner": {"reputation": 619, "user_id": 2156678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DEjZM.jpg?s=128&g=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/2156678/amit"}, "edited": false, "score": 1, "creation_date": 1425363153, "post_id": 28798787, "comment_id": 45921184, "body": "Vlad, could you please add any link/reference suggesting that CloudFlare is tuned to Haswell ? My use-case is decompression speed however the CloudFlare zlib I compiled from <a href=\"https://github.com/cloudflare/zlib/branches\" rel=\"nofollow noreferrer\">github.com/cloudflare/zlib/branches</a> (64 bit Linux, gcc compiler) doesn&#39;t show any such speed up."}, {"owner": {"reputation": 977, "user_id": 1516766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c56deb9028a911d7f98e1ce6b04c107?s=128&d=identicon&r=PG", "display_name": "Vlad Krasnov", "link": "https://stackoverflow.com/users/1516766/vlad-krasnov"}, "reply_to_user": {"reputation": 619, "user_id": 2156678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DEjZM.jpg?s=128&g=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/2156678/amit"}, "edited": false, "score": 1, "creation_date": 1425638159, "post_id": 28798787, "comment_id": 46053510, "body": "I was one of the people working on it, so I know. Like I said it is for fast compression, decompression is fast anyway."}, {"owner": {"reputation": 619, "user_id": 2156678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DEjZM.jpg?s=128&g=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/2156678/amit"}, "edited": false, "score": 1, "creation_date": 1426141767, "post_id": 28798787, "comment_id": 46253301, "body": "My use-case writes ones and reads multiple times, so decompression speed is important. Didn&#39;t see much decompression speed-up with ipp_zlib either, but that&#39;s not official version (I picked up ipp version from <a href=\"https://github.com/jtkukunas/zlib.git\" rel=\"nofollow noreferrer\">github.com/jtkukunas/zlib.git</a>). I will update once I have official Intel zlib patch installed."}], "tags": [], "owner": {"reputation": 977, "user_id": 1516766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c56deb9028a911d7f98e1ce6b04c107?s=128&d=identicon&r=PG", "display_name": "Vlad Krasnov", "link": "https://stackoverflow.com/users/1516766/vlad-krasnov"}, "is_accepted": true, "score": 3, "last_activity_date": 1425242401, "creation_date": 1425242401, "answer_id": 28798787, "question_id": 28583687, "link": "https://stackoverflow.com/questions/28583687/is-cloudflare-fork-of-zlib-optimized-only-for-amd/28798787#28798787", "title": "Is CloudFlare fork of zlib optimized only for amd?", "body": "<p>In fact Cloudflare version of gzip is optimized for Intel Haswell processors. It is 100% gzip complient.\nIt is however optimized for high speed compression and does not improve the compression ratio. If you only use statically compressed content, there is not much benefit.</p>\n"}, {"comments": [{"owner": {"reputation": 619, "user_id": 2156678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DEjZM.jpg?s=128&g=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/2156678/amit"}, "edited": false, "score": 1, "creation_date": 1447857410, "post_id": 33751123, "comment_id": 55332251, "body": "This matches with what I experienced i.e. no speed-up in inflate. I am using SSE4.2+ arch."}], "tags": [], "owner": {"reputation": 256, "user_id": 4005224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9226477c1c8e721b606df1c5b95cbbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey Khlystov", "link": "https://stackoverflow.com/users/4005224/sergey-khlystov"}, "is_accepted": false, "score": 4, "last_activity_date": 1447766060, "last_edit_date": 1447766060, "creation_date": 1447744365, "answer_id": 33751123, "question_id": 28583687, "link": "https://stackoverflow.com/questions/28583687/is-cloudflare-fork-of-zlib-optimized-only-for-amd/33751123#33751123", "title": "Is CloudFlare fork of zlib optimized only for amd?", "body": "<p>Neither CloudFlare nor Kukunas' versions of ZLIB help in decompression speedup. They both tuned for faster compression, i.e. deflate. For compression they are good. The \"inflate\" source code remains untouched.</p>\n\n<p>Though, they must be specifically built. I was able to build them only for 64-bit mode on Linux with Intel compiler and</p>\n\n<pre><code>$ export CFLAGS=\"-D__PCLMUL__ -D__SSE4_2__\"\n$ ./configure\n$ make # (or, $ make shared)\n</code></pre>\n\n<p>commands. And the CPU should have SSE4.2+ architecture. Intel or AMD, whatever.</p>\n\n<p>Though, CFLAGS='-msse4.2 -mpclmul -O3' might work too for GCC compiler, haven't checked.</p>\n"}], "owner": {"reputation": 619, "user_id": 2156678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DEjZM.jpg?s=128&g=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/2156678/amit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1522, "favorite_count": 1, "accepted_answer_id": 28798787, "answer_count": 2, "score": 2, "last_activity_date": 1447766060, "creation_date": 1424262472, "question_id": 28583687, "link": "https://stackoverflow.com/questions/28583687/is-cloudflare-fork-of-zlib-optimized-only-for-amd", "title": "Is CloudFlare fork of zlib optimized only for amd?", "body": "<p>I extensively use zlib for storing compressed data. While reading data most of the time is spent in inflate_fast and crc32 zlib calls. I am exploring alternatives to speed-up decompression and have two candidates, ipp_zlib from Intel and zlib fork from CloudFlare. I would like to know:</p>\n\n<ol>\n<li><p>Is CloudFlare fork tuned only for AMD processors ? I see that related branch is tagged with 'amd64' at <a href=\"https://github.com/cloudflare/zlib/branches\" rel=\"nofollow\">https://github.com/cloudflare/zlib/branches</a>. I have Intel CPUs, so amd64 won't serve the purpose.</p></li>\n<li><p>Whether I need to rewrite data to use CloudFlare version ? If yes, then I will have to ignore this library.</p></li>\n</ol>\n\n<p>I tried getting both libraries for my Linux machine, but don't see easy way i.e. download link. If anyone installed above, please share instructions to download and build.</p>\n"}, {"tags": ["c", "sqlite"], "comments": [{"owner": {"reputation": 432, "user_id": 415380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfca3ac132a345bc2a6a7f9f14386977?s=128&d=identicon&r=PG", "display_name": "tribeca", "link": "https://stackoverflow.com/users/415380/tribeca"}, "edited": false, "score": 1, "creation_date": 1424262495, "post_id": 28583631, "comment_id": 45474776, "body": "Data stored like this can be difficult to manage, I would suggest normalising the table so that you had one table with ID and Name called, say, Person and another with two fields PersonID and Tel called, perhaps Telephone. This will then allow you to force uniqueness."}, {"owner": {"reputation": 423, "user_id": 440414, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/bdbcccbe286491f5a299a939707da6ce?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/440414/maddy"}, "reply_to_user": {"reputation": 432, "user_id": 415380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfca3ac132a345bc2a6a7f9f14386977?s=128&d=identicon&r=PG", "display_name": "tribeca", "link": "https://stackoverflow.com/users/415380/tribeca"}, "edited": false, "score": 0, "creation_date": 1424262635, "post_id": 28583631, "comment_id": 45474861, "body": "@Tribeca: The table I use in my project looks like this as shown below. Normnalising the  table would make it more complex for me to decode the answer and apply the same logic here. Please let me know what is not clear?"}], "answers": [{"tags": [], "owner": {"reputation": 432, "user_id": 415380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfca3ac132a345bc2a6a7f9f14386977?s=128&d=identicon&r=PG", "display_name": "tribeca", "link": "https://stackoverflow.com/users/415380/tribeca"}, "is_accepted": false, "score": 1, "last_activity_date": 1424266989, "creation_date": 1424266989, "answer_id": 28585128, "question_id": 28583631, "link": "https://stackoverflow.com/questions/28583631/removing-the-repeating-elements-from-a-row-in-a-squlite-table/28585128#28585128", "title": "Removing the repeating elements from a row in a squlite table", "body": "<p>I fear that it will be more complicated to keep this format than to split the table in two as I suggested. If you insist on keeping the current schema then I would suggest that you query the row, organise the fields in application code and then perform an update on the database.</p>\n\n<p>You could also try to use SQL UNION operator to give you a list of the numbers, a UNION by default will remove all duplicate rows:</p>\n\n<pre><code>SELECT Name, Tel FROM \n  (SELECT Name, Tel0 AS Tel FROM Person UNION \n   SELECT Name, Tel1 FROM Person UNION\n   SELECT Name, Tel2 FROM Person) ORDER BY Name ;\n</code></pre>\n\n<p>Which should give you a result set like this:</p>\n\n<pre><code>John|1\nJohn|2\n</code></pre>\n\n<p>You will then have to step through the result set and saving each number into a separate variable (skipping those variables that do not exist) until the \"Name\" field changes.</p>\n\n<pre><code>Tel1 := Null; Tel2 := Null;\nName := ResultSet['Name'];\nTel0 := ResultSet['Tel'];\nResultSet.Next();\nif (Name == ResultSet['Name']) {\n  Tel1 := ResultSet['Tel'];\n} else {\n  UPDATE here.\n  StartAgain;\n}\nResultSet.Next();\nif (Name == ResultSet['Name']) {\n  Tel2 := ResultSet['Tel'];\n} else {\n  UPDATE here.\n  StartAgain;\n}\n</code></pre>\n\n<p>I am not recommending you do this, it is very bad use of a relational database but once implemented in a real language and debugged that should work.</p>\n"}], "owner": {"reputation": 423, "user_id": 440414, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/bdbcccbe286491f5a299a939707da6ce?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/440414/maddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424266989, "creation_date": 1424262221, "question_id": 28583631, "link": "https://stackoverflow.com/questions/28583631/removing-the-repeating-elements-from-a-row-in-a-squlite-table", "title": "Removing the repeating elements from a row in a squlite table", "body": "<p>Please let me know if there is any query where in I remove the repeating entries in a row.</p>\n\n<p>For eg: I have a table which has name with 9 telephone numbers:</p>\n\n<pre><code>Name     Tel0  Tel1  Tel2  Tel3  Tel4  Tel5  Tel6  Tel7  Tel8\n\nJohn       1      2     2     2    3     3     4     5      1\n</code></pre>\n\n<p>The final result should be as shown below:</p>\n\n<pre><code>Name     Tel0  Tel1  Tel2  Tel3  Tel4  Tel5  Tel6  Tel7  Tel8\n\nJohn      1      2    3     4     5      \n</code></pre>\n\n<p>regards\n   Maddy</p>\n"}, {"tags": ["c", "matlab", "makefile", "mex"], "answers": [{"comments": [{"owner": {"reputation": 1082, "user_id": 1138921, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28e465db4c6f6e1260d382283c0b4f26?s=128&d=identicon&r=PG", "display_name": "Garima Singh", "link": "https://stackoverflow.com/users/1138921/garima-singh"}, "edited": false, "score": 0, "creation_date": 1424340418, "post_id": 28589350, "comment_id": 45511946, "body": "I did modified MEXFLAGS as you suggested:  ` MEXFLAGS \t=  -fPIC -v -cxx CC=&#39;$(CXX)&#39; CXX=&#39;$(CXX)&#39; CFLAGS=&#39;$(CFLAGS)&#39; CXXFLAGS=&#39;$(CFLAGS)&#39; LD=&#39;$(CXX)&#39;` But, that gives me the error that <code>........................ibm.so &#47;usr&#47;local&#47;lib&#47;taucs_full&#47;lib&#47;linux&#47;libtaucs.a Verbose mode is on. Unknown MEX argument &#39;-fPIC&#39;. make: *** [Test_tsnnls_Mex.mexa64] Error 255  </code>. Does this mean that I should recompile object files in <code>OBJS_tsnnls0 </code> with <code>-fPIC</code> option?"}, {"owner": {"reputation": 1082, "user_id": 1138921, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28e465db4c6f6e1260d382283c0b4f26?s=128&d=identicon&r=PG", "display_name": "Garima Singh", "link": "https://stackoverflow.com/users/1138921/garima-singh"}, "edited": false, "score": 0, "creation_date": 1424341390, "post_id": 28589350, "comment_id": 45512577, "body": "My understanding of makefile is at the beginner level and I understand very little about mex compiler option.  I modified this makefile (mex project)<a href=\"http://www.cs.ubc.ca/~pcarbo/mex-tutorial/\" rel=\"nofollow noreferrer\">link</a>. What I want is: to compile all *.c using gcc compiler and then link it using mex file. It works if I remove all obj files included via <code>OBJS_tsnnls0</code> and also do not call corresponding function from mex. MEXFLAGS appear very strange to me, particularly part which <code>CC=&#39;$(CXX)&#39; CXX=&#39;$(CXX)&#39; CFLAGS=&#39;$(CFLAGS)&#39; CXXFLAGS=&#39;$(CFLAGS)&#39;  LD=&#39;$(CXX)&#39; </code> Could you please explain what is being done here?"}, {"owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "reply_to_user": {"reputation": 1082, "user_id": 1138921, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28e465db4c6f6e1260d382283c0b4f26?s=128&d=identicon&r=PG", "display_name": "Garima Singh", "link": "https://stackoverflow.com/users/1138921/garima-singh"}, "edited": false, "score": 0, "creation_date": 1424387238, "post_id": 28589350, "comment_id": 45540480, "body": "@GarimaSingh I did not make that suggestion.  See my answer again.  There is no <code>-fPIC</code> in <code>MEXFLAGS</code>; it is in <code>CFLAGS</code>.  Also, in <code>mex</code> it will only use one of <code>CXX</code> or <code>CC</code> and one of <code>CXXFLAGS</code> or <code>CFLAGS</code>, depending on if it is being compiled as C++ or C.  It looks like <code>-cxx</code> tells it to compile as C++, but I can&#39;t find any docs about this switch.  Do some experimentation and look at the output when using the <code>-v</code> flag to figure this out."}], "tags": [], "owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "is_accepted": false, "score": 0, "last_activity_date": 1424279654, "last_edit_date": 1424279654, "creation_date": 1424278813, "answer_id": 28589350, "question_id": 28583355, "link": "https://stackoverflow.com/questions/28583355/makefile-with-mex-project-rodata-can-not-be-used-when-making-a-shared-object/28589350#28589350", "title": "makefile with mex-project: `.rodata&#39; can not be used when making a shared object", "body": "<p>Have another look at the error messages - the part with the call to <code>mex</code>:</p>\n\n<pre><code>mex -cxx CC='gcc' CXX='gcc' LD='gcc' -largtable2 -llapack -lblas -lquadmath -lm  \n</code></pre>\n\n<p>While you have modified the <code>CFLAGS</code> Makefile variable to include <code>-fPIC</code>, you didn't ensure it was being passed to <code>mex</code> (the very bottom command in your Makefile).  You could modify <code>MEXFLAGS</code>.  This should cover all bases:</p>\n\n<pre><code>MEXFLAGS = -v -cxx CC='$(CXX)' CXX='$(CXX)' CFLAGS='$(CFLAGS)' CXXFLAGS='$(CFLAGS)' LD='$(CXX)'\n</code></pre>\n\n<p>You don't need both <code>CC</code> and <code>CXX</code> (probably just <code>CXX</code> since it's compiling as C++).  Also, add the <code>-v</code> flag to see what the failing g++ command was.</p>\n\n<p>It is interesting to use <code>mex</code> just to link object files instead of also do the compiling.  If I understand the goal here, it's to link object files compiled as C, and the approach was to instruct <code>mex</code> to compile as C++, but setting <code>CXX=gcc</code>, forcing it to use the C frontend.  Should work I guess, but it seems rather contorted.</p>\n"}], "owner": {"reputation": 1082, "user_id": 1138921, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28e465db4c6f6e1260d382283c0b4f26?s=128&d=identicon&r=PG", "display_name": "Garima Singh", "link": "https://stackoverflow.com/users/1138921/garima-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 456, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424279654, "creation_date": 1424261376, "last_edit_date": 1495541190, "question_id": 28583355, "link": "https://stackoverflow.com/questions/28583355/makefile-with-mex-project-rodata-can-not-be-used-when-making-a-shared-object", "title": "makefile with mex-project: `.rodata&#39; can not be used when making a shared object", "body": "<p>I have a c-code which I can compile using makefile and run. Now, I want to convert it to mex file which I would like to compile using corresponding makefile. However, my makefile for mex code is not working. I would appreciate if someone can guide me.</p>\n\n<p>I am working on <strong>64 bit</strong> system.</p>\n\n<p>Structure of both C-codes and mex codes:</p>\n\n<pre><code>C-codes                                Mex Code\nTest_tsnnls.c &lt;--Main defined         Test_tsnnls_MEX.c &lt;--mex defined here\nInclude_4_TSNNLS.h                    Include_4_TSNNLS.h\nInclude_4_TSNNLS.c                    Include_4_TSNNLS.c\n</code></pre>\n\n<p>Makefile (C-project) works:</p>\n\n<pre><code>CXX       = gcc\nFLAGS     = \nCFLAGS    = \"-m64\"   ## \"-m32\"\nINCLUDE_TSNNLS  = -I/home/dkumar/libtsnnls-2.3.3 -I/home/dkumar/libtsnnls-2.3.3/tsnnls  -I/home/dkumar/libtsnnls-2.3.3/tsnnls/taucs_basic\n\n#################### ALL TSNNLS lib related ##########################\n## this is where all object file (*.o) generated by tsnnls library makefile are located.\ntsnnl_PATH = /home/dkumar/libtsnnls-2.3.3/tsnnls/\n\n# Here is a Make Macro that uses the backslash to extend to multiple lines.\nOBJS_tsnnls0 =  libtsnnls_la-taucs_malloc.o libtsnnls_la-taucs_ccs_order.o \\\n    libtsnnls_la-taucs_ccs_ops.o libtsnnls_la-taucs_vec_base.o \\\n    libtsnnls_la-taucs_complex.o libtsnnls_la-colamd.o \\\n    libtsnnls_la-amdbar.o libtsnnls_la-amdexa.o \\\n    libtsnnls_la-amdtru.o libtsnnls_la-genmmd.o \\\n    libtsnnls_la-taucs_timer.o libtsnnls_la-taucs_sn_llt.o \\\n    libtsnnls_la-taucs_ccs_base.o libtsnnls_la-tlsqr.o \\\n    libtsnnls_la-tsnnls.o libtsnnls_la-lsqr.o\n\n ## adding \"$(OBJS_PATH)\" to each word in \"$(OBJS)\"\n# which in our case is basically to add the same folder in front of all \"*.o\" object files.\nOBJS_tsnnls = $(addprefix $(tsnnl_PATH), $(OBJS_tsnnls0)) \n\n# Libraries for tsnnls\nSTLIB_tsnnls    = /usr/local/lib/taucs_full/lib/linux/libtaucs.a \nLIBS_tsnnls     = -largtable2 -llapack -lblas -lquadmath -lm\n\n########################################################################\nTARGET_WO_EXTN =   Test_tsnnls\nTARGET         =   $(TARGET_WO_EXTN)\nLIBS           =   $(LIBS_tsnnls)   $(STLIB_tsnnls)\nINCLUDE        =   $(INCLUDE_TSNNLS)\nREBUILDABLES   =   *.o          $(TARGET) \n\nall : $(TARGET)\n    echo All done\n\nclean : \n    rm -f $(REBUILDABLES)   \n    echo Clean done\n\nInclude_4_TSNNLS.o: Include_4_TSNNLS.c\n    $(CXX) -c -o Include_4_TSNNLS.o Include_4_TSNNLS.c\n\n$(TARGET_WO_EXTN).o: $(TARGET_WO_EXTN).c\n    $(CXX) -c -o $(TARGET_WO_EXTN).o  $(TARGET_WO_EXTN).c\n\n# Final linking\n$(TARGET) : $(OBJS_tsnnls)   $(TARGET_WO_EXTN).o   Include_4_TSNNLS.o $(LIBS)\n    $(CXX) -g -o $@ $(INCLUDE) $(CFLAGS) $^\n</code></pre>\n\n<p>Makefile (mex project) DOES NOT work:</p>\n\n<pre><code>MEXSUFFIX  = mexa64\nMATLABHOME = /usr/local/MATLAB/R2014b\nMEX        = mex\nCXX        = gcc\nCFLAGS     = -fPIC -pthread -DMX_COMPAT_32 \\\n               -DMATLAB_MEX_FILE\n\nINCLUDE_Matlab  = -I$(MATLABHOME)/extern/include\nMEXFLAGS    = -cxx CC='$(CXX)' CXX='$(CXX)' LD='$(CXX)'\n\nINCLUDE_TSNNLS  = -I/home/dkumar/libtsnnls-2.3.3 -I/home/dkumar/libtsnnls-2.3.3/tsnnls  -I/home/dkumar/libtsnnls-2.3.3/tsnnls/taucs_basic\n\n#################### ALL TSNNLS lib related ##########################\n## this is where all object file (*.o) generated by tsnnls library makefile are located.\ntsnnl_PATH = /home/dkumar/libtsnnls-2.3.3/tsnnls/\n\n# Here is a Make Macro that uses the backslash to extend to multiple lines.\nOBJS_tsnnls0 =  libtsnnls_la-taucs_malloc.o libtsnnls_la-taucs_ccs_order.o \\\n    libtsnnls_la-taucs_ccs_ops.o libtsnnls_la-taucs_vec_base.o \\\n    libtsnnls_la-taucs_complex.o libtsnnls_la-colamd.o \\\n    libtsnnls_la-amdbar.o libtsnnls_la-amdexa.o \\\n    libtsnnls_la-amdtru.o libtsnnls_la-genmmd.o \\\n    libtsnnls_la-taucs_timer.o libtsnnls_la-taucs_sn_llt.o \\\n    libtsnnls_la-taucs_ccs_base.o libtsnnls_la-tlsqr.o \\\n    libtsnnls_la-tsnnls.o libtsnnls_la-lsqr.o\n\n ## adding \"$(OBJS_PATH)\" to each word in \"$(OBJS)\"\n# which in our case is basically to add the same folder in front of all \"*.o\" object files.\nOBJS_tsnnls = $(addprefix $(tsnnl_PATH), $(OBJS_tsnnls0)) \n\n# Libraries for tsnnls\nSTLIB_tsnnls    = /usr/local/lib/taucs_full/lib/linux/libtaucs.a \nLIBS_tsnnls     = -largtable2 -llapack -lblas -lquadmath -lm\n\n########################################################################\nTARGET_WO_EXTN =  Test_tsnnls_Mex\nTARGET         = $(TARGET_WO_EXTN).$(MEXSUFFIX)\nLIBS           = $(LIBS_tsnnls)     $(STLIB_tsnnls)\nINCLUDE        = $(INCLUDE_Matlab)  $(INCLUDE_TSNNLS)\nREBUILDABLES   = *.o            $(TARGET)  \n\nall : $(TARGET)\n    echo All done\n\nclean : \n    rm -f $(REBUILDABLES)   \n    echo Clean done\n\nInclude_4_TSNNLS.o:  Include_4_TSNNLS.c\n    $(CXX) $(CFLAGS) $(INCLUDE) -c $^\n##  $(CXX) -c -o Include_4_TSNNLS.o Include_4_TSNNLS.c\n\n$(TARGET_WO_EXTN).o: $(TARGET_WO_EXTN).c\n    $(CXX) $(CFLAGS) $(INCLUDE) -c $^\n\n# Final linking\n$(TARGET): $(OBJS_tsnnls)   $(TARGET_WO_EXTN).o   Include_4_TSNNLS.o $(LIBS)\n    $(MEX) $(MEXFLAGS) $(LIBS) -output $(TARGET_WO_EXTN) $^\n</code></pre>\n\n<p>Errors that I get</p>\n\n<pre><code>dkumar@dkumar-Precision-WorkStation-T7500 ~/Mex_Codes_DKU/Using_tsnnls_DKU_copy_MEX/Pure_Mex $ make\ncc -fPIC -pthread -DMX_COMPAT_32 -DMATLAB_MEX_FILE   -c -o Test_tsnnls_Mex.o Test_tsnnls_Mex.c\ngcc -c -o Include_4_TSNNLS.o Include_4_TSNNLS.c\nIn file included from Include_4_TSNNLS.c:1:0:\nInclude_4_TSNNLS.h:72:15: warning: useless storage class specifier in empty declaration [enabled by default]\n   extern enum STYPE;\n               ^\nmex -cxx CC='gcc' CXX='gcc' LD='gcc' -largtable2 -llapack -lblas -lquadmath -lm     /usr/local/lib/taucs_full/lib/linux/libtaucs.a  -output Test_tsnnls_Mex /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-taucs_malloc.o /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-taucs_ccs_order.o /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-taucs_ccs_ops.o /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-taucs_vec_base.o /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-taucs_complex.o /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-colamd.o /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-amdbar.o /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-amdexa.o /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-amdtru.o /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-genmmd.o /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-taucs_timer.o /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-taucs_sn_llt.o /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-taucs_ccs_base.o /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-tlsqr.o /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-tsnnls.o /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-lsqr.o Test_tsnnls_Mex.o Include_4_TSNNLS.o /usr/local/lib/libargtable2.so /usr/lib/liblapack.so /usr/lib/libblas.so /usr/lib/libquadmath.so /usr/lib/x86_64-linux-gnu/libm.so /usr/local/lib/taucs_full/lib/linux/libtaucs.a\nBuilding with 'g++'.\nWarning: You are using gcc version '4.8.2'. The version of gcc is not supported. The version currently supported with MEX is '4.7.x'. For a list of currently supported compilers see: http://www.mathworks.com/support/compilers/current_release.\nWarning: You are using gcc version '4.8.2-19ubuntu1)'. The version of gcc is not supported. The version currently supported with MEX is '4.7.x'. For a list of currently supported compilers see: http://www.mathworks.com/support/compilers/current_release.\n/usr/bin/ld: /home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-taucs_ccs_order.o: relocation R_X86_64_32 against `.rodata' can not be used when making a shared object; recompile with -fPIC\n/home/dkumar/libtsnnls-2.3.3/tsnnls/libtsnnls_la-taucs_ccs_order.o: error adding symbols: Bad value\ncollect2: error: ld returned 1 exit status\n\nmake: *** [Test_tsnnls_Mex.mexa64] Error 255\n</code></pre>\n\n<p>I think that I am already compiling with -fPIC.\nMy understanding is that  <code>$(OBJS_tsnnls)</code> may not properly included in my mex project.</p>\n\n<p>OR, \nissue could be with 32-bit vs 64 bit platform <a href=\"https://stackoverflow.com/questions/9637551/relocation-r-x86-64-32s-against-rodata-while-compiling-on-64-bit-platform\">Stackoveflow-link</a>. I have no idea how to fix this.</p>\n\n<p>Any help would be so very much appreciated.</p>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1424319623, "post_id": 28583259, "comment_id": 45503338, "body": "every header file needs a guard wrapper so it cannot be included more than once in any one compilation unit (source file)"}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1424261440, "creation_date": 1424261440, "answer_id": 28583374, "question_id": 28583259, "link": "https://stackoverflow.com/questions/28583259/how-to-set-up-correctly-makefile-and-get-the-right-results-in-this-c-program/28583374#28583374", "title": "How to set up correctly makefile and get the right results in this C program", "body": "<p>You never call the <code>funzione()</code> function. You need to call it and pass it a pointer to <code>o</code>, somewhere.</p>\n\n<p>Also, you really shouldn't use <code>#include</code> on C files, only on headers.</p>\n\n<p>You need to add a dependency from somewhere to <code>funzione.c</code>, so <code>Make</code> can pick that up and re-build the file when needed. Something like:</p>\n\n<pre><code>eseguibile: main.o funzione.o\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9308, "user_id": 235700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ab02b76dcfedbe47d2b7335a6277f3?s=128&d=identicon&r=PG", "display_name": "slugonamission", "link": "https://stackoverflow.com/users/235700/slugonamission"}, "is_accepted": true, "score": 1, "last_activity_date": 1424261571, "creation_date": 1424261571, "answer_id": 28583422, "question_id": 28583259, "link": "https://stackoverflow.com/questions/28583259/how-to-set-up-correctly-makefile-and-get-the-right-results-in-this-c-program/28583422#28583422", "title": "How to set up correctly makefile and get the right results in this C program", "body": "<p><code>main.c</code> should be recompiled if <code>kernel.c</code> changes, since you <code>#include</code> kernel.c inside it, but <code>make</code> doesn't know about the dependency. You can add it to <code>main.o</code> too, like this:</p>\n\n<pre><code>main.o: main.c funzione.h struttura.h kernel.c\n    $(CC) -c $(CFLAGS) main.c\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 4532321, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NN5TYnWyGTs/AAAAAAAAAAI/AAAAAAAAAC0/RdAhvS_QZbw/photo.jpg?sz=128", "display_name": "Egor", "link": "https://stackoverflow.com/users/4532321/egor"}, "is_accepted": false, "score": 0, "last_activity_date": 1424262969, "creation_date": 1424262969, "answer_id": 28583857, "question_id": 28583259, "link": "https://stackoverflow.com/questions/28583259/how-to-set-up-correctly-makefile-and-get-the-right-results-in-this-c-program/28583857#28583857", "title": "How to set up correctly makefile and get the right results in this C program", "body": "<ol>\n<li><p>fix errors:</p>\n\n<p><code>void funzione(struttura* a)</code></p></li>\n</ol>\n\n<p>is not called and values to o.x is not assigned. Call this function before calling</p>\n\n<pre><code>pincopallo();\n</code></pre>\n\n<p>in main.c\nwrite like this:</p>\n\n<pre><code>funzione(&amp;o);\npincopallo();\nreturn 0;\n</code></pre>\n\n<ol start=\"2\">\n<li>include *.c files is not very good practice.\n*.h files used to include.\nCreate kernel.h file and add into main.c and kernel.c</li>\n</ol>\n\n<p><code>#include \"kernel.h\"</code></p>\n\n<p>write into kernel.h declaration of pincopallo() :</p>\n\n<pre><code>void pincopallo(void);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1424322541, "creation_date": 1424322541, "answer_id": 28599001, "question_id": 28583259, "link": "https://stackoverflow.com/questions/28583259/how-to-set-up-correctly-makefile-and-get-the-right-results-in-this-c-program/28599001#28599001", "title": "How to set up correctly makefile and get the right results in this C program", "body": "<p>Note: including a .c file in a .c file is a very bad practice</p>\n\n<p>It would be much better to organize the make file like the following</p>\n\n<p>and remove the #include \"kernel.c\" from the main.c file</p>\n\n<p>beyond the following, it would be good, especially as the projects get\nlarger, to also generate the dependency files\nSee notes at end for a method to do that.</p>\n\n<pre><code>name = eseguibile\nCC=gcc\nCFLAGS :=-Wall\nLIBS := -lm\n\nSRC := $(wildcard *.c)\nOBJ := $(SRC:.c=.o)\nHDR := $(wildcard *.h)\n\n.PHONY: all clean\n\nall: $(name)\n\n$(name): $(OBJ)\n    #\n    # ======= $(name) Link Start =========\n    $(CC) -o $@ $(OBJ) $(LIBS)\n    # ======= $(name) Link Done ==========\n    #\n\n%.o: %.c $(HDR)\n    #\n    # ========= START $&lt; TO $@ =========\n    $(CC) $(CCFLAGS) -c $&lt; -o $@ -I.\n    # ========= END $&lt; TO $@ =========\n    #\n\nclean:\n    rm -rf *.o $(name)\n\n\n\ndependency notes:  only use the following after understanding it\n\n#\n#create dependancy files -- inference rule\n# (gcc has parameters that do not require the sed utility)\n#\n%.d: %.c\n    #\n    # ========= START $&lt; TO $@ =========\n    $(CC) -M $(CPPFLAGS) $&lt; &gt; $@.$$$$;                      \\\n    sed 's,\\($*\\)\\.o[ :]*,\\1.o $@ : ,g' &lt; $@.$$$$ &gt; $@;     \\\n    rm -f $@.$$$$\n    # ========= END $&lt; TO $@ =========\n\n\n#\n# compile the .c file into .o files using the compiler flags\n# -- inference rule\n#\n%.o: %.c %.d makefile\n    #\n    # ========= START $&lt; TO $@ =========\n    $(CC) $(CCFLAGS) -c $&lt; -o $@ -I.\n    # ========= END $&lt; TO $@ =========\n    #\n</code></pre>\n\n<p>clean:\n        rm -rf *.o *.d $(name)</p>\n\n<pre><code># include the contents of all the .d files\n# note: the .d files contain:\n# &lt;filename&gt;.o:&lt;filename&gt;.c plus all the dependancies for that .c file\n# I.E. the #include'd header files\n# wrap with ifneg... so will not rebuild *.d files when goal is 'clean'\n#\nifneq \"$(MAKECMDGOALS)\" \"clean\"\n-include $(DEP)\nendif\n</code></pre>\n"}], "owner": {"reputation": 3873, "user_id": 4143292, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/dRHrc.png?s=128&g=1", "display_name": "Federico Gentile", "link": "https://stackoverflow.com/users/4143292/federico-gentile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 28583422, "answer_count": 4, "score": 0, "last_activity_date": 1424322541, "creation_date": 1424261075, "last_edit_date": 1424262261, "question_id": 28583259, "link": "https://stackoverflow.com/questions/28583259/how-to-set-up-correctly-makefile-and-get-the-right-results-in-this-c-program", "title": "How to set up correctly makefile and get the right results in this C program", "body": "<p>I wrote a C code which is formed by these files: <em>main.c</em>, <em>kernel.c</em>, <em>funzione.c</em>, <em>funzione.h</em> and <em>struttura.h</em>. Here are the files:</p>\n\n<p><em>main.c</em>:</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include \"stdio.h\"\n\n#include \"struttura.h\"\n#include \"funzione.h\"\n\nstruttura o;\n\n#include \"kernel.c\"\n\nint main(void){\n\n  pincopallo();\n  return 0;\n}\n</code></pre>\n\n<p><em>kernel.c</em></p>\n\n<pre><code>void pincopallo(void){  \nprintf(\"o.x=%f\\n\",o.x);\nprintf(\"o.y=%f\\n\",o.y);\n}\n</code></pre>\n\n<p><em>funzione.cu</em></p>\n\n<pre><code>#include \"struttura.h\"\n\nvoid funzione(struttura* a){\n  (*a).x  = 450;\n  (*a).y  = 150;\n}\n</code></pre>\n\n<p><em>funzione.h</em></p>\n\n<pre><code>#include \"struttura.h\"\nvoid funzione(struttura* a);\n</code></pre>\n\n<p><em>struttura.h</em></p>\n\n<pre><code>#ifndef STRUTTURA_H\n#define STRUTTURA_H\n\ntypedef struct{\n  float x;\n  float y;  \n}struttura;\n\n#endif /* STRUTTURA_H */\n</code></pre>\n\n<p>My goal is to display the values contained inside of the <em>funzione.c</em> file (which I don't want to modify at all just as <em>struttura.h</em>). However when I compile it with the <em>makefile</em> I wrote myself, I get the following results:</p>\n\n<pre><code>o.x=0.000000\no.y=0.000000\n</code></pre>\n\n<p>instead of the values 450 and 150.</p>\n\n<p>Here is the make file:</p>\n\n<pre><code>enter CC=gcc\nCFLAGS=-Wall\nOBJS = main.o funzione.o \n\nall: eseguibile\n\neseguibile: $(OBJS)\n    $(CC) $(CFLAGS) $(OBJS) -o eseguibile -lm\n\nmain.o: main.c funzione.h struttura.h\n    $(CC) -c $(CFLAGS) main.c\n\nfunzione.o: funzione.c funzione.h struttura.h\n    $(CC) -c $(CFLAGS) funzione.c\n\nclean:\n    rm -rf *.o eseguibilecode here\n</code></pre>\n\n<p>(watch out for the tabs). I know for sure that the <em>makefile</em> is not completely correct: as a matter of fact, if run it the first time, it compiles all the way. However if I modify something in <em>kernel.c</em> (for example I change <code>printf(\"o.x=%f\\n\",o.x);</code> into <code>printf(\"o.x=%d\\n\",o.x);</code>) and I try to compile again, the terminal will show the following message: <code>make: Nothing to be done for all.</code> In such case I need to do <code>make clean</code> and compile again in order to get the obvious error message: \n<code>error: \u2018struttura\u2019 has no member named \u2018z\u2019 printf(\"o.x=%f\\n\",o.z);</code></p>\n\n<p>So basically my questions are 2:</p>\n\n<ul>\n<li><p>How can I get the results correctly?</p></li>\n<li><p>How should I modify the <em>makefile</em> so it compiles everytime I modify something in <em>kernel.c</em></p></li>\n</ul>\n"}, {"tags": ["c", "pointers", "char"], "comments": [{"owner": {"reputation": 2559, "user_id": 2334932, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a1844eccc9d568378157965e433d023b?s=128&d=identicon&r=PG", "display_name": "Vinz", "link": "https://stackoverflow.com/users/2334932/vinz"}, "edited": false, "score": 0, "creation_date": 1424261007, "post_id": 28583172, "comment_id": 45473863, "body": "Can you show what&#39;s &quot;inside it&quot;? It could happen that you mistake the size of a pointer with the size of a datatype"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 2, "creation_date": 1424261072, "post_id": 28583172, "comment_id": 45473913, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array\">How to find the &#39;sizeof&#39;(a pointer pointing to an array)?</a>"}, {"owner": {"reputation": 2996, "user_id": 1141649, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c121a84f18d9512b03b8a21ecae2a7?s=128&d=identicon&r=PG", "display_name": "John Boe", "link": "https://stackoverflow.com/users/1141649/john-boe"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1424261622, "post_id": 28583172, "comment_id": 45474292, "body": "@user3121023: if you post it as an answer I will accept it. Thanks."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1424264858, "post_id": 28583172, "comment_id": 45476106, "body": "Are <b>you</b> defining those headers or are you trying to read existing files? The official BMP header does has <code>char[2]</code> as the 1st two bytes: <a href=\"http://en.wikipedia.org/wiki/BMP_file_format#Bitmap_file_header\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/BMP_file_format#Bitmap_file_header</a> so defining <code>char[3]</code> won&#39;t help you."}], "answers": [{"comments": [{"owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "edited": false, "score": 2, "creation_date": 1424261480, "post_id": 28583224, "comment_id": 45474177, "body": "He is not doing <code>sizeof</code> anywhere in code this is irrelevant  here."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "edited": false, "score": 2, "creation_date": 1424261598, "post_id": 28583224, "comment_id": 45474272, "body": "@Vagish Look at OP&#39;s post: <code>inside writeBytes there is sizeof item == 4 bytes and sizeof *item == 1 byte, hence I ask, why this happen?</code>"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "edited": false, "score": 0, "creation_date": 1424262595, "post_id": 28583224, "comment_id": 45474833, "body": "@Vagish Read the question properly before dictating what&#39;s relevant or irrelevant."}, {"owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "edited": false, "score": 0, "creation_date": 1424263232, "post_id": 28583224, "comment_id": 45475186, "body": "@BlueMoon sorry,the OP has not formatted  sizeof  into code format so I took its literal meaning."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 2, "last_activity_date": 1424260998, "creation_date": 1424260998, "answer_id": 28583224, "question_id": 28583172, "link": "https://stackoverflow.com/questions/28583172/why-i-see-4-byte-string-instead-2-bytes-in-function-in-c/28583224#28583224", "title": "Why I see 4 byte string instead 2 bytes in function? In C", "body": "<p>Inside the function, when you do <code>sizeof item</code>, it returns the size of the char pointer i.e. <code>sizeof(char*)</code>, not the number of bytes it's pointing to.</p>\n"}, {"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1424261323, "post_id": 28583300, "comment_id": 45474084, "body": "<code>unsigned char magicNo[2]</code> can store only <code>&#39;B&#39;</code> and <code>&#39;M&#39;</code>, there is no space for <code>&#39;\\0&#39;</code>"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1424262786, "post_id": 28583300, "comment_id": 45474936, "body": "There&#39;s no necessity for <code>magicNo</code> to be a <i>string</i> despite what OP accepting this. It could very well be a 2 byte array with length being passed , especially looking at <code>writeBytes()</code> definition and and it&#39;s simply a memcpy."}, {"owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1424263363, "post_id": 28583300, "comment_id": 45475263, "body": "@BlueMoon that is what my answer is, to get size of a array you cannot use <code>strlen()</code>. we are talking the same thing here."}], "tags": [], "owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "is_accepted": true, "score": 3, "last_activity_date": 1424262160, "last_edit_date": 1424262160, "creation_date": 1424261192, "answer_id": 28583300, "question_id": 28583172, "link": "https://stackoverflow.com/questions/28583172/why-i-see-4-byte-string-instead-2-bytes-in-function-in-c/28583300#28583300", "title": "Why I see 4 byte string instead 2 bytes in function? In C", "body": "<p>A string literal in C is terminated by null char i.e. <code>\\0</code></p>\n\n<p>Thus <code>\"BM\"</code> is actually <code>B</code>,<code>M</code>,<code>0</code> stored at consecutive locations.</p>\n\n<p><code>strlen()</code> evaluates the passed <code>char *</code> till it finds the <code>'\\0'</code> char.</p>\n\n<p>As your <code>magicNo[2]</code> array is of two bytes only it does not hold the null char,<code>strlen()</code> is searching for null in your case and luckily null is found at 5th location from start of array that's why you are getting wrong string length.</p>\n\n<p>Notes:</p>\n\n<pre><code>sizeof(magicNo); --&gt; Gives size of `magicNo` array.\nsizeof(item); --&gt; Gives size of character pointer \nsizeof(*item); --&gt; Gives size of single character\n</code></pre>\n\n<p>EDIT:\nIn your example code:</p>\n\n<pre><code>int size=strlen(item); // expected size==2\n</code></pre>\n\n<p>You are assuming wrong here,<code>strlen</code> do NOT gives the size of array. \nIf you want to find the size of array based on passed pointer to it then you CAN'T do that in C. You have to remember it explicitly in code.</p>\n"}], "owner": {"reputation": 2996, "user_id": 1141649, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c121a84f18d9512b03b8a21ecae2a7?s=128&d=identicon&r=PG", "display_name": "John Boe", "link": "https://stackoverflow.com/users/1141649/john-boe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 28583300, "answer_count": 2, "score": 1, "last_activity_date": 1424262160, "creation_date": 1424260858, "last_edit_date": 1424262098, "question_id": 28583172, "link": "https://stackoverflow.com/questions/28583172/why-i-see-4-byte-string-instead-2-bytes-in-function-in-c", "title": "Why I see 4 byte string instead 2 bytes in function? In C", "body": "<p>I have a function </p>\n\n<pre><code>static void writeBytes(char ** pDestStr, char* item) {\n  int size=strlen(item); // expected size==2\n  memcpy(*pDestStr,item,size);\n  *pDestStr+=size;\n}\n</code></pre>\n\n<p>and a 2 byte string defined in struct <code>HEADER</code></p>\n\n<pre><code>typedef struct HEADER {\n  unsigned char magicNo[2]; // two bytes\n} BMPHEADER;\n</code></pre>\n\n<p>In my program the <code>magicNo</code> is set to 2 bytes and it contains \"BM\". But when I call the function like this:</p>\n\n<pre><code>writeBytes(&amp;pBlock, bmpfile-&gt;header.magicNo);\n</code></pre>\n\n<p>inside <code>writeBytes</code> there is sizeof item == 4 bytes and sizeof *item == 1 byte,\nhence I ask, why this happen? The string contains 2 additional characters which I did not set. This is on the first line of the function definition. As a result the function works wrong because it adds the pointer +4 instead +2 bytes... Any idea how to fix this?</p>\n\n<p><strong>Solved:</strong>\nAnswered in comments. Correct size of magicNo should be 3 and I am missing terminating character \\0. So correction:</p>\n\n<pre><code>unsigned char magicNo[3];\n</code></pre>\n"}, {"tags": ["c", "linux", "encoding", "qr-code", "bmp"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1424260548, "post_id": 28583010, "comment_id": 45473549, "body": "The encoding of the source code of course has <i>nothing</i> to do with the encoding of the output of running the compiled program. You probably have some bug where you rely on undefined behavior (perhaps struct packing), but of course it&#39;s impossible to say without the code."}, {"owner": {"reputation": 124, "user_id": 1295813, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9f94581af9fbb689ab0da7e68d4f7256?s=128&d=identicon&r=PG", "display_name": "Vcoder", "link": "https://stackoverflow.com/users/1295813/vcoder"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1424261921, "post_id": 28583010, "comment_id": 45474450, "body": "Ah yes! Perfect, that was the problem. I knew that the encoding of the source code had nothing to do with the output of the running compiled program, but i was afraid i was forgetting something."}], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 1295813, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9f94581af9fbb689ab0da7e68d4f7256?s=128&d=identicon&r=PG", "display_name": "Vcoder", "link": "https://stackoverflow.com/users/1295813/vcoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1424261993, "creation_date": 1424261993, "answer_id": 28583562, "question_id": 28583010, "link": "https://stackoverflow.com/questions/28583010/generating-bmp-image-on-2-different-linux-machines-gives-me-1-working-file-and-1/28583562#28583562", "title": "Generating bmp image on 2 different linux machines gives me 1 working file and 1 corrupt", "body": "<p>I solved the problem by doing:</p>\n\n<pre><code>#pragma pack(push, 2)\n\nstruct goes here\n\n#pragma pack(pop)\n</code></pre>\n\n<p>Thanks to unwind.</p>\n"}], "owner": {"reputation": 124, "user_id": 1295813, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9f94581af9fbb689ab0da7e68d4f7256?s=128&d=identicon&r=PG", "display_name": "Vcoder", "link": "https://stackoverflow.com/users/1295813/vcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491409236, "creation_date": 1424260414, "last_edit_date": 1491409236, "question_id": 28583010, "link": "https://stackoverflow.com/questions/28583010/generating-bmp-image-on-2-different-linux-machines-gives-me-1-working-file-and-1", "title": "Generating bmp image on 2 different linux machines gives me 1 working file and 1 corrupt", "body": "<p>I created a program that according to a string it creates a BMP file. </p>\n\n<p>On a slackware machine:</p>\n\n<ul>\n<li>i686;</li>\n<li>little endian;</li>\n<li>lang = en_US;</li>\n</ul>\n\n<p>The image is generated perfectly with the result of file img.bmp being:</p>\n\n<ul>\n<li>'img.bmp: PC bitmap, Windows 3.x format, 168 x -168 x 24' </li>\n</ul>\n\n<p>And the result of file -si img.bmp being: </p>\n\n<ul>\n<li>'img.bmp: image/x-ms-bmp; charset=binary'</li>\n</ul>\n\n<p>On a Xubuntu:</p>\n\n<ul>\n<li>i686;</li>\n<li>little endian;</li>\n<li>lang = en_US;</li>\n</ul>\n\n<p>The image is corrupt with 2 more bytes than the working one and file img.bmp gives: </p>\n\n<ul>\n<li>'img.bmp: data' </li>\n</ul>\n\n<p>And file -si img.bmp gives: </p>\n\n<ul>\n<li>'img.bmp: application/octet-stream; charset=binary'... </li>\n</ul>\n\n<p>Both the source files are in 'ASCII text'.</p>\n\n<p>The encoding of the working binary executable is: </p>\n\n<ul>\n<li>'ELF 32-bit LSB  executable, Intel 80386, version 1 (SYSV), dynamically linked (uses shared libs), not stripped'. </li>\n</ul>\n\n<p>The encoding of working binary executable (but generates corrupt image) is: </p>\n\n<ul>\n<li>'ELF 32-bit LSB  executable, Intel 80386, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.24, BuildID[sha1]=07dc7b384509e7a6b2d1f87460998b00fe050866, not stripped'. </li>\n</ul>\n\n<p>I'm trying to understand why I can view the image generated on my slackware VM but I can't view it on Xubuntu...</p>\n"}, {"tags": ["c", "pointers", "glib"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1424260012, "post_id": 28582837, "comment_id": 45473280, "body": "Why don&#39;t you check <code>l1</code> and <code>digit</code> for NULL before using them?"}, {"owner": {"reputation": 4168, "user_id": 3552561, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7d0994b2ce09612027ca2b69e6bddd5?s=128&d=identicon&r=PG&f=1", "display_name": "qiubit", "link": "https://stackoverflow.com/users/3552561/qiubit"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1424260094, "post_id": 28582837, "comment_id": 45473321, "body": "Because I&#39;m trusting that <code>g_list_append</code> will actually add some data to l. That means l1 should be a GList * containing 2."}], "answers": [{"tags": [], "owner": {"reputation": 9308, "user_id": 235700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ab02b76dcfedbe47d2b7335a6277f3?s=128&d=identicon&r=PG", "display_name": "slugonamission", "link": "https://stackoverflow.com/users/235700/slugonamission"}, "is_accepted": true, "score": 3, "last_activity_date": 1424260799, "creation_date": 1424260799, "answer_id": 28583150, "question_id": 28582837, "link": "https://stackoverflow.com/questions/28582837/gpointer-cast-to-gint-causes-segmentation-fault-why/28583150#28583150", "title": "gpointer cast to gint * causes segmentation fault - why?", "body": "<p><code>g_list_append</code> expects a pointer to the data you want to store to be passed. <code>GINT_TO_POINTER</code> simply converts the given integer to a pointer (i.e. it's basically <code>(gpointer)x</code>), hence the pointer isn't actually pointing at any valid data, it's just a number. After adding the data to the list, the pointers will have the value 1, 2 and 3.</p>\n\n<p>Assuming that <code>g_list_nth</code> is successful, <code>l1-&gt;data</code> will be the <em>pointer</em> passed to <code>g_list_append</code> earlier. In this case, the value of the pointer will be 2 (<strong>not</strong> the value being pointed to). You then attempt to dereference this pointer, which will cause a segmentation fault.</p>\n\n<p>Instead, just cast it straight back to an <code>int</code> and don't dereference to get the value back. You should probably use the provided reverse macro <code>GPOINTER_TO_INT</code> though, e.g.</p>\n\n<pre><code>gpointer snd_element = (l1-&gt;data);\ngint digit = GPOINTER_TO_INT(snd_element); // Note I've removed the *...\ngint forty_two = 40;\nforty_two = forty_two + digit; // Note I've not attempted to dereference it\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9308, "user_id": 235700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ab02b76dcfedbe47d2b7335a6277f3?s=128&d=identicon&r=PG", "display_name": "slugonamission", "link": "https://stackoverflow.com/users/235700/slugonamission"}, "edited": false, "score": 0, "creation_date": 1424260996, "post_id": 28583167, "comment_id": 45473858, "body": "&quot;why do you expect 40 + 1 to be 42?&quot; -&gt; <code>g_list_nth</code> takes a zero-based index ;)"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 3, "last_activity_date": 1424260849, "creation_date": 1424260849, "answer_id": 28583167, "question_id": 28582837, "link": "https://stackoverflow.com/questions/28582837/gpointer-cast-to-gint-causes-segmentation-fault-why/28583167#28583167", "title": "gpointer cast to gint * causes segmentation fault - why?", "body": "<p>This:</p>\n\n<pre><code>gpointer snd_element = (l1-&gt;data);\n</code></pre>\n\n<p>Makes <code>snd_element</code> contain the value <code>2</code> but converted to a pointer. This is very probably <em>not</em> a valid memory address for your process.</p>\n\n<p>So this:</p>\n\n<pre><code>forty_two = forty_two + *digit;\n</code></pre>\n\n<p>which de-references <code>digit</code> causes undefined behavior.</p>\n\n<p>You should do:</p>\n\n<pre><code>const int forty_two = 40 + GPOINTER_TO_INT(digit);\n</code></pre>\n"}], "owner": {"reputation": 4168, "user_id": 3552561, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7d0994b2ce09612027ca2b69e6bddd5?s=128&d=identicon&r=PG&f=1", "display_name": "qiubit", "link": "https://stackoverflow.com/users/3552561/qiubit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 1, "accepted_answer_id": 28583150, "answer_count": 2, "score": 1, "last_activity_date": 1424260849, "creation_date": 1424259916, "question_id": 28582837, "link": "https://stackoverflow.com/questions/28582837/gpointer-cast-to-gint-causes-segmentation-fault-why", "title": "gpointer cast to gint * causes segmentation fault - why?", "body": "<p>I'm trying to learn using void pointers in C. Here's a code I've written using GLib:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;gtk/gtk.h&gt;\n\nint\nmain (void)\n{\n  GList *l = NULL;\n  l = g_list_append (l, GINT_TO_POINTER (1));\n  l = g_list_append (l, GINT_TO_POINTER (2));\n  l = g_list_append (l, GINT_TO_POINTER (3));\n  GList *l1 = g_list_nth (l, 1);\n  gpointer snd_element = (l1-&gt;data);\n  gint *digit = snd_element;\n  gint forty_two = 40;\n  forty_two = forty_two + *digit;\n  printf (\"%d\\n\", forty_two);\n\n  return 0;\n}\n</code></pre>\n\n<p>The behaviour I expect from this program would be to print 42. Unfortunately running it causes segmentation fault. Why?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 1562, "user_id": 4098326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a222a6f6508bea1c3b2f97cb0234be0?s=128&d=identicon&r=PG", "display_name": "user4098326", "link": "https://stackoverflow.com/users/4098326/user4098326"}, "edited": false, "score": 4, "creation_date": 1424259456, "post_id": 28582660, "comment_id": 45472975, "body": "You&#39;d better use 23&amp;1."}, {"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 1, "creation_date": 1424259485, "post_id": 28582660, "comment_id": 45472994, "body": "What&#39;s your goal exactly?"}, {"owner": {"reputation": 9308, "user_id": 235700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ab02b76dcfedbe47d2b7335a6277f3?s=128&d=identicon&r=PG", "display_name": "slugonamission", "link": "https://stackoverflow.com/users/235700/slugonamission"}, "edited": false, "score": 1, "creation_date": 1424259487, "post_id": 28582660, "comment_id": 45472998, "body": "Yes, but not after shifting (in most architectures). If you shift a value right be one, you can use the bitwise AND operator to select the bits that would be shifted off."}, {"owner": {"reputation": 14069, "user_id": 1769720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5815db653a13a7122066f811caa020a7?s=128&d=identicon&r=PG", "display_name": "didierc", "link": "https://stackoverflow.com/users/1769720/didierc"}, "edited": false, "score": 1, "creation_date": 1424259502, "post_id": 28582660, "comment_id": 45473008, "body": "You can only do that by applying another operation on the original value before doing the shift."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1424261015, "post_id": 28582660, "comment_id": 45473867, "body": "What do you mean by &quot;can we access&quot;? What do you want to do with it? &quot;Access&quot; is extremely vague."}], "answers": [{"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 0, "last_activity_date": 1424259506, "creation_date": 1424259506, "answer_id": 28582718, "question_id": 28582660, "link": "https://stackoverflow.com/questions/28582660/bits-shifted-by-bit-shifting-operators-in-c-c/28582718#28582718", "title": "Bits shifted by bit shifting operators(&lt;&lt;, &gt;&gt;) in C, C++", "body": "<p>You can access the bits <em>before</em> shifting, e.g.</p>\n\n<pre><code>value  = 23;          // start with some value\nlsbits = value &amp; 1;   // extract the LSB\nvalue &gt;&gt;= 1;          // shift\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 930, "user_id": 776142, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d7f290f5c21eea3d32876da2f513e93?s=128&d=identicon&r=PG", "display_name": "Daerst", "link": "https://stackoverflow.com/users/776142/daerst"}, "is_accepted": true, "score": 2, "last_activity_date": 1424259549, "creation_date": 1424259549, "answer_id": 28582733, "question_id": 28582660, "link": "https://stackoverflow.com/questions/28582660/bits-shifted-by-bit-shifting-operators-in-c-c/28582733#28582733", "title": "Bits shifted by bit shifting operators(&lt;&lt;, &gt;&gt;) in C, C++", "body": "<p>By using <code>23&gt;&gt;1</code>, the bit <code>0x01</code> is purged - you have no way of retrieving it after the bit shift.</p>\n\n<p>That said, nothing's stopping you from checking for the bit <em>before</em> shifting:</p>\n\n<pre><code>int  value   = 23;\nbool bit1    = value &amp; 0x01;\nint  shifted = value &gt;&gt; 1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 3, "last_activity_date": 1424259559, "creation_date": 1424259559, "answer_id": 28582738, "question_id": 28582660, "link": "https://stackoverflow.com/questions/28582660/bits-shifted-by-bit-shifting-operators-in-c-c/28582738#28582738", "title": "Bits shifted by bit shifting operators(&lt;&lt;, &gt;&gt;) in C, C++", "body": "<p>No, the shift operators only give the value after shifting. You'll need to do other bitwise operations to extract the bits that are shifted out of the value; for example:</p>\n\n<pre><code>unsigned all_lost  = value &amp; ((1 &lt;&lt; shift)-1);  // all bits to be removed by shift\nunsigned last_lost = (value &gt;&gt; (shift-1)) &amp; 1;  // last bit to be removed by shift\nunsigned remaining = value &gt;&gt; shift;            // lose those bits\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31053, "user_id": 566608, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bf8ff77ca000b80a2b19d07dbb257645?s=128&d=identicon&r=PG", "display_name": "Felice Pollano", "link": "https://stackoverflow.com/users/566608/felice-pollano"}, "is_accepted": false, "score": 0, "last_activity_date": 1424260059, "creation_date": 1424260059, "answer_id": 28582886, "question_id": 28582660, "link": "https://stackoverflow.com/questions/28582660/bits-shifted-by-bit-shifting-operators-in-c-c/28582886#28582886", "title": "Bits shifted by bit shifting operators(&lt;&lt;, &gt;&gt;) in C, C++", "body": "<p>It worth signal that on MSVC compiler an intrinsic function exists: <a href=\"https://msdn.microsoft.com/en-us/library/h65k4tze(VS.80).aspx\" rel=\"nofollow\">_bittest</a></p>\n\n<p>that speeds up the operation.</p>\n"}], "owner": {"reputation": 93, "user_id": 4470804, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EIV3WJr1o4s/AAAAAAAAAAI/AAAAAAAAADA/9T23rCi3KRI/photo.jpg?sz=128", "display_name": "Sanyam Jain", "link": "https://stackoverflow.com/users/4470804/sanyam-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 1, "accepted_answer_id": 28582733, "answer_count": 4, "score": 0, "last_activity_date": 1424260059, "creation_date": 1424259340, "question_id": 28582660, "link": "https://stackoverflow.com/questions/28582660/bits-shifted-by-bit-shifting-operators-in-c-c", "title": "Bits shifted by bit shifting operators(&lt;&lt;, &gt;&gt;) in C, C++", "body": "<p>can we access the bits shifted by bit shifting operators(&lt;&lt;, >>) in C, C++?\nFor example:\n23>>1\ncan we access the last bit shifted(1 in this case)?</p>\n"}, {"tags": ["c", "pointers", "binary-search-tree", "double-pointer"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1424260556, "post_id": 28582460, "comment_id": 45473556, "body": "If <code>key</code> is not in the tree, the first <code>while()</code> loop will fail by dereferencing a <code>NULL</code> pointer, so it should be checking the pointers. Then in <code>if(p-&gt;left==NULL &amp;&amp; p-&gt;right==NULL)</code> you <i>have</i> found a match. You should delete the leaf, but why are you expecting the <code>head</code> to change (unless the head is the parent of the leaf)?"}, {"owner": {"reputation": 573, "user_id": 4496072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/679c0cc9c8b29f61a2f507e7361698e9?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Pandey", "link": "https://stackoverflow.com/users/4496072/nitin-pandey"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1424261360, "post_id": 28582460, "comment_id": 45474109, "body": "@WeatherVane I&#39;m making sure that <code>delete()</code> is only called is the key exists in the tree.So I&#39;m not checking it here and it won&#39;t dereference a null pointer. I&#39;m using that condition to check if the found node is a leaf."}, {"owner": {"reputation": 573, "user_id": 4496072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/679c0cc9c8b29f61a2f507e7361698e9?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Pandey", "link": "https://stackoverflow.com/users/4496072/nitin-pandey"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1424261424, "post_id": 28582460, "comment_id": 45474144, "body": "@WeatherVane What if the node found to be deleted is not a leaf..say has 1 child , or maybe two then we have to find inorder predecessor / successor."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1424263183, "post_id": 28582460, "comment_id": 45475157, "body": "If the node has one child that&#39;s easy - just link the child to the node&#39;s parent and free the node. If the node has two children it&#39;s trickier. You can patch out one of the children as before, then follow that branch to find where to re-insert the other branch you are losing. In the case of keeping the left branch, you follow its right-pointers until you find a NULL. In the case of keeping the right branch, you follow its left-pointers until you find a NULL. The only times you need to change <code>head</code> are 1) when the node you are deleting has no parent node and 2) when you re-balance a tree."}], "owner": {"reputation": 573, "user_id": 4496072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/679c0cc9c8b29f61a2f507e7361698e9?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Pandey", "link": "https://stackoverflow.com/users/4496072/nitin-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1424259326, "creation_date": 1424258757, "last_edit_date": 1424259326, "question_id": 28582460, "link": "https://stackoverflow.com/questions/28582460/deletion-in-a-bst", "title": "Deletion in a BST", "body": "<p>Deletion is taking place inside function but not reflected in the <code>head</code> after returning from function. I'm using double pointer so I think it should.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>void delete(node **head,int key)\n{\n    int x;\n    node *p=*head,*q=*head;\n    while(p-&gt;data!=key)\n    {\n        q=p; //q will have the address of parent\n        if(p-&gt;data&gt;key)\n            p=p-&gt;left;\n        else\n            p=p-&gt;right;\n    }   \n    if(p-&gt;left==NULL &amp;&amp; p-&gt;right==NULL) //leaf\n    {   \n        p=NULL;\n        return ;\n    }\n    if(p-&gt;left==NULL)\n    {\n        if(q-&gt;left&amp;&amp;q-&gt;left==p) //Check if the node to be deleted is a left/right child of parent\n        {\n            q-&gt;left=p-&gt;right;\n            free(p);\n            return;\n        }\n        if(q-&gt;right&amp;&amp;q-&gt;right==p)\n        {\n            q-&gt;right=p-&gt;right;\n            free(p);\n            return;\n        }\n\n    }\n    if(p-&gt;left!=NULL &amp;&amp; p-&gt;right!=NULL)\n    {\n        q=giveAddress(*head,inorderSuccessor(*head,key));   //give address find the address of the inorder successor\n        p-&gt;data=q-&gt;data;\n        free(q);\n    }   \n\n\n\n\n}\n</code></pre>\n\n<p>Function call : delete(&amp;head,key);</p>\n\n<p>Note : One thing I don't understand is if i change the condition inside leaf part of the above function it works for leaf.</p>\n\n<pre><code>if(p-&gt;left==NULL &amp;&amp; p-&gt;right==NULL) //leaf\n    {   \n        if(q-&gt;left&amp;&amp;q-&gt;left==p) //Check if the node to be deleted is a left/right child of parent\n        {\n            q-&gt;left=NULL;\n            free(p);\n            return;\n        }\n        if(q-&gt;right&amp;&amp;q-&gt;right==p)\n        {\n            q-&gt;right=NULL;\n            free(p);\n            return;\n        }\n\n    }\n</code></pre>\n\n<p>It's okay since we are making the pointer of parent (left,right ) NULL . So it will delete the node. It will not free the memory location though , right?</p>\n\n<p><strong>Correct me if I'm wrong</strong></p>\n\n<p>So if we do <code>p=Null</code> it assigns a null value to p and parent->left is still holding the address to the node to be deleted. Hence ,it is not deleted.\nOnly the pointer p is changed, rest is okay!</p>\n\n<p>But, in recursion we can do that..why?</p>\n"}, {"tags": ["c", "compilation"], "comments": [{"owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "edited": false, "score": 1, "creation_date": 1424258732, "post_id": 28582387, "comment_id": 45472564, "body": "Is your code really formatted like this?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1424259311, "post_id": 28582387, "comment_id": 45472895, "body": "Please, <code>int main(void)</code>, <code>return 0</code>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1424260661, "post_id": 28582387, "comment_id": 45473626, "body": "As a beginner, don&#39;t use <code>-O2</code>  at first for <code>gcc</code>. Compile with <code>gcc -Wall -Wextra -g</code>. Learn how to use the debugger (<code>gdb</code>). Only once your program has no bugs could you recompile it with <code>-O2</code> (e.g. for benchmarking purposes)."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4578492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78192f3aa1205d47419c1bf42e2f66a0?s=128&d=identicon&r=PG&f=1", "display_name": "Cars and Computers", "link": "https://stackoverflow.com/users/4578492/cars-and-computers"}, "edited": false, "score": 1, "creation_date": 1424259679, "post_id": 28582492, "comment_id": 45473099, "body": "I am new to C  working on a project and got that code from the textbook. When I typed in the other code still received errors compiling."}], "tags": [], "owner": {"reputation": 4425, "user_id": 2077651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/16036f8a383cc2cf4cde596b7f9f3a42?s=128&d=identicon&r=PG", "display_name": "Ganesh Kamath - &#39;Code Frenzy&#39;", "link": "https://stackoverflow.com/users/2077651/ganesh-kamath-code-frenzy"}, "is_accepted": false, "score": 1, "last_activity_date": 1424258882, "creation_date": 1424258882, "answer_id": 28582492, "question_id": 28582387, "link": "https://stackoverflow.com/questions/28582387/compiling-in-c-programming/28582492#28582492", "title": "Compiling in C Programming", "body": "<p>I think this is what you were trying:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain()\n{\n    int c, n1 = 0;\n    c = getchar();\n    while (c != EOF){\n        if(c == 40 || c == '\\n')\n            ++n1;\n        printf(\"%d\",n1);\n        c = getchar();\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 1, "last_activity_date": 1424259984, "last_edit_date": 1424259984, "creation_date": 1424259564, "answer_id": 28582739, "question_id": 28582387, "link": "https://stackoverflow.com/questions/28582387/compiling-in-c-programming/28582739#28582739", "title": "Compiling in C Programming", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint\nmain(void)\n  {\n    int c, n1;\n    n1 = 0;\n    while ((c = getchar()) !=EOF)\n        if\n(c == '\\n')\n        ++n1;\n        printf(\"%d\\n\", n1);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4578492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78192f3aa1205d47419c1bf42e2f66a0?s=128&d=identicon&r=PG&f=1", "display_name": "Cars and Computers", "link": "https://stackoverflow.com/users/4578492/cars-and-computers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": -7, "last_activity_date": 1424263105, "creation_date": 1424258554, "last_edit_date": 1424263105, "question_id": 28582387, "link": "https://stackoverflow.com/questions/28582387/compiling-in-c-programming", "title": "Compiling in C Programming", "body": "<p>I am having trouble compiling the program I recently started called format. I am getting the following errors: </p>\n\n<pre><code>format.c:7:1: warning: return type defaults to \u2018int\u2019 [enabled by default]\nformat.c: In function \u2018main\u2019:\nformat.c:11:27: error: expected expression before \u2018!=\u2019 token\nformat.c:14:10: warning: missing terminating \" character [enabled by default]\nformat.c:14:3: error: missing terminating \" character\nformat.c:16:1: error: expected expression before \u2018}\u2019 token\nformat.c:16:1: error: expected \u2018;\u2019 before \u2018}\u2019 token\nformat.c:9:10: warning: variable \u2018n1\u2019 set but not used [-Wunused-but-set-variable]\n</code></pre>\n\n<p>When I compile using gcc -Wall -pedantic -std=c99 -O2 -o format format.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain()\n { \n  int c, n1;\n  n1 = 0;\n  while ((c + getchar())) !=EOF\n     if \n(c == 40'\\n')\n     ++n1;\n      printf(\"%d\\\",n1);\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 2234, "user_id": 3052438, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X9OWu.png?s=128&g=1", "display_name": "NO_NAME", "link": "https://stackoverflow.com/users/3052438/no-name"}, "edited": false, "score": 1, "creation_date": 1424256602, "post_id": 28581684, "comment_id": 45471385, "body": "Read about design patterns &quot;callback&quot; and &quot;listener&quot;."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1424259322, "post_id": 28581684, "comment_id": 45472900, "body": "With C++11 <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">lambda functions</a> could be <i>very helpful</i>"}, {"owner": {"reputation": 596, "user_id": 2634500, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/188c300aa6d4fa82404ad9c4468040de?s=128&d=identicon&r=PG", "display_name": "Marcel", "link": "https://stackoverflow.com/users/2634500/marcel"}, "edited": false, "score": 0, "creation_date": 1424273907, "post_id": 28581684, "comment_id": 45481977, "body": "My question was actually aiming at something different. I wanted to know if it is legitimate to write a custom header file for the shared library which declares only the functions the library requires. @hvd has already provided a useful answer. Sorry for not making myself clear enough."}], "answers": [{"comments": [{"owner": {"reputation": 596, "user_id": 2634500, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/188c300aa6d4fa82404ad9c4468040de?s=128&d=identicon&r=PG", "display_name": "Marcel", "link": "https://stackoverflow.com/users/2634500/marcel"}, "edited": false, "score": 0, "creation_date": 1424273209, "post_id": 28582150, "comment_id": 45481474, "body": "Thank you for this clear and precise answer. I assume that also the case where the shared library is written in a different language (e.g., when interfacing Fortran and C) is one of the rare occassions where it makes sense to provide custom-written headers, right?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 596, "user_id": 2634500, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/188c300aa6d4fa82404ad9c4468040de?s=128&d=identicon&r=PG", "display_name": "Marcel", "link": "https://stackoverflow.com/users/2634500/marcel"}, "edited": false, "score": 0, "creation_date": 1424274805, "post_id": 28582150, "comment_id": 45482631, "body": "@Marcel That would be a good example. For something similar, I&#39;ve had to do it in Delphi when interfacing to libraries written in C or in C++, that only provide a C header file."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": true, "score": 1, "last_activity_date": 1424257900, "creation_date": 1424257900, "answer_id": 28582150, "question_id": 28581684, "link": "https://stackoverflow.com/questions/28581684/c-c-extern-function-declarations/28582150#28582150", "title": "C/C++ extern function declarations", "body": "<blockquote>\n  <p>Can this be considered good practice?</p>\n</blockquote>\n\n<p>No. Shipping your own headers means you get no warning when the headers no longer match up with the library<sup>1</sup>. Structure types may get additional members, functions may change e.g. taking <code>long</code> instead of <code>int</code> like they used to, little things like that, that shouldn't affect users that use the provided headers, but will badly affect users that write their own.</p>\n\n<p>The only time it makes sense is if the library promises ABI stability, that already-compiled third-party projects linked against an older version of the library will continue working. That's the exception, though, not the norm.</p>\n\n<blockquote>\n  <p>What about libraries where the source code is not distributed? I would assume they use the same approach.</p>\n</blockquote>\n\n<p>If A links against B, and A is closed source, then A may still be recompiled by A's author against all versions of B.</p>\n\n<p>If A links against B, and B is closed source, B <em>still</em> typically ships headers to allow users to make use of it.</p>\n\n<p>If A links against B, and B is closed source, and <em>doesn't</em> ship headers, then typically, it is not designed to be linked against, and doing so anyway is a <em>very</em> bad idea. In a few rare scenarios, however, it does make sense, and shipping custom-written headers for B along with A may be a good idea.</p>\n\n<p><sub><sup>1</sup> When I write \"library\", I'm referring to the product associated with the headers. In the case of a plug-in, it's possible that the product associated with the headers would typically not be called a library, but the code using those headers would be.</sub></p>\n"}, {"tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": false, "score": 1, "last_activity_date": 1424258911, "creation_date": 1424258911, "answer_id": 28582496, "question_id": 28581684, "link": "https://stackoverflow.com/questions/28581684/c-c-extern-function-declarations/28582496#28582496", "title": "C/C++ extern function declarations", "body": "<p>You could use callbacks to separate main program from library.</p>\n\n<p>For example, library which can calculate something. It could be data from\nany source, but here it is read from file:</p>\n\n<p><strong>library.h</strong></p>\n\n<pre><code>struct FooCalc_S;\ntypedef struct FooCalc_S FooCalc_T;\ntypedef int (*Callback_T)(void * extra);\n\nFooCalc_T * FooCalc_Create(Callback_T callback, void * extra);\nint FooCalc_Run(FooCalc_T * fc); // Calls callback multiple times \n</code></pre>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>#include \"library.h\"\n\nint ReadFromFile(void * extra) {\n    FILE * fp = extra;\n    // Reads next entry from file\n    return result;\n}\n\nint main(void) {\n    FILE * fp = // Open file here\n    FooCalc_T * fc = FooCalc_Create(ReadFromFile, fp);\n    int foo = FooCalc_Run(fc);\n</code></pre>\n"}], "owner": {"reputation": 596, "user_id": 2634500, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/188c300aa6d4fa82404ad9c4468040de?s=128&d=identicon&r=PG", "display_name": "Marcel", "link": "https://stackoverflow.com/users/2634500/marcel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 1, "accepted_answer_id": 28582150, "answer_count": 2, "score": 1, "last_activity_date": 1424258911, "creation_date": 1424256467, "question_id": 28581684, "link": "https://stackoverflow.com/questions/28581684/c-c-extern-function-declarations", "title": "C/C++ extern function declarations", "body": "<p>I'm currently writing a C/C++ shared library which is planned to be an extension for another project. In the library, I need to call some functions and access some of the data structures of the original code. Clearly, the most obvious option would be to include the headers from the original code and let the user of the extension pass the pathes to the header files and build the library. In order to ease the build process, I thought about rewriting the required function declarations in a separate header file. Can this be considered good practice? What about libraries where the source code is not distributed? I would assume they use the same approach. Any help is appreciated!</p>\n"}, {"tags": ["c++", "c", "floating-point", "double", "overflow"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1424255662, "post_id": 28581323, "comment_id": 45470776, "body": "Check it with a <code>long double</code>"}, {"owner": {"reputation": 7490, "user_id": 4417613, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/leKlt.jpg?s=128&g=1", "display_name": "m0bi5", "link": "https://stackoverflow.com/users/4417613/m0bi5"}, "edited": false, "score": 0, "creation_date": 1424255687, "post_id": 28581323, "comment_id": 45470794, "body": "<a href=\"http://www.codeproject.com/Articles/25294/Avoiding-Overflow-Underflow-and-Loss-of-Precision\" rel=\"nofollow noreferrer\">codeproject.com/Articles/25294/&hellip;</a>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1424256588, "post_id": 28581323, "comment_id": 45471374, "body": "@AlterMann: There&#39;s no guarantee that <code>long double</code> is longer than <code>double</code>."}, {"owner": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "edited": false, "score": 0, "creation_date": 1424258706, "post_id": 28581323, "comment_id": 45472541, "body": "You can use exactly the same method for floating point as for integer."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 1, "creation_date": 1424262217, "post_id": 28581323, "comment_id": 45474617, "body": "If <code>double</code> is an IEEE 754 format, and <code>long double</code> is at least the \u201cextended\u201d version of that format, then there is a guarantee that the product of two <code>double</code> values as <code>long double</code> is a finite <code>long double</code> value. But then again, if you know that the floating-point types map to IEEE 754 formats, why wouldn&#39;t you use the infinity values and overflow \u201cexceptions\u201d that were carefully designed for this purpose?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424270296, "post_id": 28581323, "comment_id": 45479642, "body": "Not sure why code needs to prevent overflow, but if the operation was <code>c = a*b;</code>, could use <code>if (a &gt;= MAX_DOUBLE&#47;b) PreventOverflow(); else c = a*b;</code>.  (+/- and <code>b==0</code> features also needed) To best answer this post, OP needs to provide more details as to what higher level problem exists."}, {"owner": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 1, "creation_date": 1424281290, "post_id": 28581323, "comment_id": 45487042, "body": "@PascalCuoq: Because popular compilers were carefully designed to thwart that purpose? :)"}], "answers": [{"comments": [{"owner": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "edited": false, "score": 0, "creation_date": 1424258797, "post_id": 28581455, "comment_id": 45472595, "body": "Checking for infinity is independent of the rounding mode.  But it depends on how portable he wants to be; not all floating point formats have an infinity."}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "reply_to_user": {"reputation": 142024, "user_id": 649665, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea803aa8fff6a34f2a5d16e21fc85787?s=128&d=identicon&r=PG", "display_name": "James Kanze", "link": "https://stackoverflow.com/users/649665/james-kanze"}, "edited": false, "score": 2, "creation_date": 1424263949, "post_id": 28581455, "comment_id": 45475593, "body": "I mention the rounding mode, because in IEEE-754 not all rounding modes carry the overflows to infinity, e.g., roundTowardZero that carries to the format\u2019s largest finite number. You also mention that not all floating points formats have an infinity but I&#39;m addressing IEEE-754 where the three binary formats have the infinities."}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 1, "last_activity_date": 1424255787, "creation_date": 1424255787, "answer_id": 28581455, "question_id": 28581323, "link": "https://stackoverflow.com/questions/28581323/how-to-prevent-double-overflow-in-c/28581455#28581455", "title": "How to prevent double overflow in C?", "body": "<p>In IEEE-754, if the rounding mode is roundTiesToEven (the default) you can detect an overflow by checking an infinity result for normal operands as </p>\n\n<blockquote>\n  <p>(IEEE-754:2008, 7.4 Overflow) \"roundTiesToEven and roundTiesToAway carry all overflows to \u221e with the sign of the intermediate result\"</p>\n</blockquote>\n"}], "owner": {"reputation": 459, "user_id": 3864176, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/eca7c1cdd5f6d448051b75f333d748fc?s=128&d=identicon&r=PG&f=1", "display_name": "Progress1ve", "link": "https://stackoverflow.com/users/3864176/progress1ve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1555, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424256187, "creation_date": 1424255439, "last_edit_date": 1424256187, "question_id": 28581323, "link": "https://stackoverflow.com/questions/28581323/how-to-prevent-double-overflow-in-c", "title": "How to prevent double overflow in C?", "body": "<p>I'm looking for an answer to the question from the topic of this post. I don't have a problem when it comes to checking for integer overflow, but i don't know how to handle it with double variables. I would appreciate if anybody could point me in the right direction. </p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1424255451, "post_id": 28581204, "comment_id": 45470619, "body": "why&#39;d you put function definitions in header?"}, {"owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1424255517, "post_id": 28581204, "comment_id": 45470668, "body": "@SouravGhosh I followed a tutorial on using headers and this is how he wold me to do it"}, {"owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "edited": false, "score": 0, "creation_date": 1424255623, "post_id": 28581204, "comment_id": 45470749, "body": "are you sure <code>string.h</code> and <code>main.c</code> are in same folder?Its working for me.Make sure you typed names correctly."}, {"owner": {"reputation": 4733, "user_id": 1068497, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c20ce344a5b5edf654c9bdfb61b947?s=128&d=identicon&r=PG", "display_name": "swang", "link": "https://stackoverflow.com/users/1068497/swang"}, "edited": false, "score": 0, "creation_date": 1424255719, "post_id": 28581204, "comment_id": 45470819, "body": "it works for me, but you need to cast the malloc result to char*"}, {"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "reply_to_user": {"reputation": 4733, "user_id": 1068497, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c20ce344a5b5edf654c9bdfb61b947?s=128&d=identicon&r=PG", "display_name": "swang", "link": "https://stackoverflow.com/users/1068497/swang"}, "edited": false, "score": 2, "creation_date": 1424255809, "post_id": 28581204, "comment_id": 45470878, "body": "@swang Check this <code>http:&#47;&#47;stackoverflow.com&#47;questions&#47;605845&#47;do-i-cast-the-resu&zwnj;&#8203;lt-of-malloc</code> for why you should not cast the result of malloc."}, {"owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "edited": false, "score": 0, "creation_date": 1424255827, "post_id": 28581204, "comment_id": 45470893, "body": "@wsang what does that mean"}, {"owner": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "edited": false, "score": 7, "creation_date": 1424255922, "post_id": 28581204, "comment_id": 45470960, "body": "Don&#39;t call your header <code>string.h</code> , it&#39;s the same name as a C library header which contains, for example, strlen/strcat/etc. Rename your header to something else, like <code>my_string.h</code>"}, {"owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "edited": false, "score": 0, "creation_date": 1424256010, "post_id": 28581204, "comment_id": 45471014, "body": "yeah no, I changed the name because the headerr is my first name which I dont want to lay around the internet so i changed it"}, {"owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "edited": false, "score": 0, "creation_date": 1424256455, "post_id": 28581204, "comment_id": 45471294, "body": "i tried: <code>s_insert(&amp;name);</code> instead of <code>s_insert(name);</code> but no succes"}, {"owner": {"reputation": 4733, "user_id": 1068497, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c20ce344a5b5edf654c9bdfb61b947?s=128&d=identicon&r=PG", "display_name": "swang", "link": "https://stackoverflow.com/users/1068497/swang"}, "edited": false, "score": 0, "creation_date": 1424256510, "post_id": 28581204, "comment_id": 45471329, "body": "@CoderGuy: by the way this is a pure C question, you may want to edit the tag so it&#39;s not c++"}, {"owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "edited": false, "score": 0, "creation_date": 1424256891, "post_id": 28581204, "comment_id": 45471564, "body": "I thought I deleted that but I&#39;ll take care of it now"}, {"owner": {"reputation": 4733, "user_id": 1068497, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/32c20ce344a5b5edf654c9bdfb61b947?s=128&d=identicon&r=PG", "display_name": "swang", "link": "https://stackoverflow.com/users/1068497/swang"}, "reply_to_user": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 0, "creation_date": 1424256919, "post_id": 28581204, "comment_id": 45471576, "body": "@SantoshA neither clang nor gcc4.9 will compile it without the cast: error: assigning to &#39;char *&#39; from incompatible type &#39;void *&#39; -- I just realised I was saving the file in .cpp so it&#39;s compiled as c++, it&#39;s fine in c, but in c++ it won&#39;t compile without the cast."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1424258729, "post_id": 28581204, "comment_id": 45472561, "body": "This should give either an error for all three functions (including <code>s_length</code>) or for none of them. Please make sure the code is copied and pasted from code you&#39;ve tried exhibiting the described behavior, and include the compiler output verbatim."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1424258943, "post_id": 28581204, "comment_id": 45472681, "body": "OT: This <code>s_insert</code> function is inherently broken. No matter how much memory <code>string_one</code> points to, the user could provide more input. (Look for the <code>gets</code> function which was removed from the language for exactly the same reason, for example, for further explanation.)"}, {"owner": {"reputation": 1505, "user_id": 2641513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bGWLp.jpg?s=128&g=1", "display_name": "zoska", "link": "https://stackoverflow.com/users/2641513/zoska"}, "edited": false, "score": 0, "creation_date": 1424264953, "post_id": 28581204, "comment_id": 45476156, "body": "The problem is not in the code you are showing us"}, {"owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "reply_to_user": {"reputation": 1505, "user_id": 2641513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bGWLp.jpg?s=128&g=1", "display_name": "zoska", "link": "https://stackoverflow.com/users/2641513/zoska"}, "edited": false, "score": 0, "creation_date": 1424278171, "post_id": 28581204, "comment_id": 45484939, "body": "@zoska than what is it?"}], "answers": [{"comments": [{"owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "edited": false, "score": 0, "creation_date": 1424257054, "post_id": 28581640, "comment_id": 45471636, "body": "the header is not called that way but I just called it so you guys dont know my real name"}, {"owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "reply_to_user": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "edited": false, "score": 0, "creation_date": 1424257183, "post_id": 28581640, "comment_id": 45471693, "body": "@CoderGuy try removing #ifndef in your header and check whats the result."}, {"owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "reply_to_user": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "edited": false, "score": 0, "creation_date": 1424257615, "post_id": 28581640, "comment_id": 45471941, "body": "@CoderGuy have you stored header and source file in same folder?"}, {"owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "edited": false, "score": 0, "creation_date": 1424330634, "post_id": 28581640, "comment_id": 45506993, "body": "can you show me your string.h file so i maybe can see a difference"}, {"owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "reply_to_user": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "edited": false, "score": 0, "creation_date": 1424330934, "post_id": 28581640, "comment_id": 45507118, "body": "@CoderGuy I copied exactly same code what you have posted in question.No any change."}, {"owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "edited": false, "score": 0, "creation_date": 1424331207, "post_id": 28581640, "comment_id": 45507235, "body": "that&#39;s wierd. I will try making another one and see if it works"}], "tags": [], "owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "is_accepted": true, "score": 1, "last_activity_date": 1424256707, "last_edit_date": 1424256707, "creation_date": 1424256322, "answer_id": 28581640, "question_id": 28581204, "link": "https://stackoverflow.com/questions/28581204/only-first-function-in-header-works-but-the-last-two-dont-in-c/28581640#28581640", "title": "Only first function in header works but the last two don&#39;t in c", "body": "<p>I compiled  your code in .c file and compiled it. I was hoping to get error as</p>\n\n<p><code>string.h : No such file or directory</code></p>\n\n<p>but,as string.h is also a name of standard C library compiler gave me </p>\n\n<p><code>[Warning] implicit declaration of function 's_insert' [-Wimplicit-function-declaration]</code></p>\n\n<p>Hope above explanation gives you a clue.</p>\n\n<p>Most probably:</p>\n\n<ol>\n<li>Your header and source are not in same folder. </li>\n</ol>\n\n<p>OR</p>\n\n<ol start=\"2\">\n<li>Your include path not set to correct location</li>\n</ol>\n\n<p>OR</p>\n\n<p>3.You are having other name to header than <code>string.h</code></p>\n\n<p>Note:\nCopying your header code into <code>string.h</code> created by me works well.</p>\n\n<p><img src=\"https://i.stack.imgur.com/5sqE8.jpg\" alt=\"enter image description here\"></p>\n"}, {"comments": [{"owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "edited": false, "score": 0, "creation_date": 1424256722, "post_id": 28581646, "comment_id": 45471451, "body": "the header is not called that way but I just called it so you guys dont know my real name"}, {"owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "edited": false, "score": 0, "creation_date": 1424256964, "post_id": 28581646, "comment_id": 45471597, "body": "so do I have to make another c file and than main.c is my main code and functions.c is the new file."}, {"owner": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "reply_to_user": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "edited": false, "score": 0, "creation_date": 1424257432, "post_id": 28581646, "comment_id": 45471829, "body": "That would be the right thing to do. Your attempt with main.c and one header would work for this small example, but it&#39;s a bad habit to do it that way."}], "tags": [], "owner": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "is_accepted": false, "score": 0, "last_activity_date": 1424258074, "last_edit_date": 1424258074, "creation_date": 1424256332, "answer_id": 28581646, "question_id": 28581204, "link": "https://stackoverflow.com/questions/28581204/only-first-function-in-header-works-but-the-last-two-dont-in-c/28581646#28581646", "title": "Only first function in header works but the last two don&#39;t in c", "body": "<p>It's very likely that the <code>string.h</code> that got included was not \"your\" string.h but the C library's <code>string.h</code>. I'm only guessing because you didn't show us how you invoked the compiler.</p>\n\n<p>You should rename your header file.</p>\n\n<p>Also, you shouldn't <strong>define</strong> functions in a header, only <strong>declare</strong> them:</p>\n\n<pre><code>int s_length(char *test_string);      //returns string length\nvoid s_insert(char *string_one);      //inserts string\n</code></pre>\n\n<p>The implementation should be in another c file (what you have in your header file now). Then you should build the main file and the file implementing your functions, together:</p>\n\n<pre><code>$ gcc -Wall -pedantic -W main.c functions.c\n</code></pre>\n\n<p>If you are still getting the <code>warning: implicit declaration of function \u2018s_insert\u2019</code> and <code>undefined reference to 's_insert'</code> messages, that means that your header (whatever its name) was not processed by the compiler. If you did not get a <code>fatal  error: string.h: No such file or directory</code> message, that means another file with the same name was found (that's why <code>string.h</code> is a bad idea for your own file). To check what files are included, add the <code>-H</code> switch to GCC (or /showIncludes if you are using Microsoft Visual Studio).</p>\n"}], "owner": {"reputation": 686, "user_id": 4454435, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mKdSJ.png?s=128&g=1", "display_name": "BRHSM", "link": "https://stackoverflow.com/users/4454435/brhsm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 28581640, "answer_count": 2, "score": 1, "last_activity_date": 1424258074, "creation_date": 1424255115, "last_edit_date": 1424256899, "question_id": 28581204, "link": "https://stackoverflow.com/questions/28581204/only-first-function-in-header-works-but-the-last-two-dont-in-c", "title": "Only first function in header works but the last two don&#39;t in c", "body": "<p>I made this header for some program functions:</p>\n\n<pre><code>#ifndef STRING_H_INCLUDED\n#define STRING_H_INCLUDED\n\n#include &lt;stdio.h&gt;\n\nint s_length(char *test_string){      //returns string length\n    int i=0;\n    while(*test_string){\n        i++;\n        test_string++;\n    }\n    return i;\n};\n\nvoid s_insert(char *string_one){        //inserts string\n    scanf(\"%s\",string_one);\n};\n\nvoid s_output(char *string_one){        //outputs string\n    printf(\"%s\",string_one);\n};\n\n#endif\n</code></pre>\n\n<p>and I call the functions in the c file like 2 times each. But the last 2 of them get this:  <code>warning: implicit declaration of function \u2018s_insert\u2019</code> and <code>undefined reference to 's_insert'</code>. for both functions.</p>\n\n<p>What does this mean, and what did I do wrong?</p>\n\n<p>It might have to do with the main c file in which I call the functions.</p>\n\n<p>main progam:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"string.h\"\n\nchar *name,*surname;\n\n\nvoid menu(){\n    int choise;\n    do{\n        printf(\"1: incerici dati\\n\");\n        printf(\"2: output dati\\n\");\n        printf(\"3: calcola lungezza\\n\");\n        printf(\"0: ecsi\\n\");\n        printf(\"incerici: \");\n        scanf(\"%d\", &amp;choise);\n        printf(\"------------------\\n\");\n        switch(choise){\n            case 1:\n                printf(\"String 1:\");\n                s_insert(name);\n                printf(\"String 2:\");\n                s_insert(surname);\n                printf(\"------------------\\n\");\n                break;\n            case 2:\n                s_output(name);\n                s_output(surname);\n                printf(\"------------------\\n\");\n                break;\n            case 3:\n                printf(\"string 1: %s  lungezza: %d \\n\",name,s_length(name));\n                printf(\"string 2: %s  lungezza: %d \\n\",surname,s_length(surname));\n                printf(\"------------------\\n\");\n                break;\n            case 0:\n                printf(\"prgram closed!!\\n\");\n                break;\n            default:\n                printf(\"Errore: %d schelta invalida\\n\",choise);\n                break;\n        }\n    }while(choise);\n};\n\nint main(int argc, char *argv[]){\n    name=malloc(sizeof(char)*20);\n    surname=malloc(sizeof(char)*30);\n    menu();\n    return 0;\n}\n</code></pre>\n\n<p>ps fot the people wondering, the printed text is italian because it's a school exercice.</p>\n"}, {"tags": ["c", "gcc", "assembly", "x86-64"], "comments": [{"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 1, "creation_date": 1424255646, "post_id": 28581001, "comment_id": 45470764, "body": "<a href=\"http://pix.cs.olemiss.edu/csci223/asX64Directives.txt\" rel=\"nofollow noreferrer\">Read this.</a>  I believe that <code>6</code> is the register number for <code>rbp</code> and <code>7</code> is <code>rsp</code>.  If you are writing the assembly yourself, you can use the register name such as <code>%rbp</code> instead of <code>6</code>."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 0, "creation_date": 1424258641, "post_id": 28581001, "comment_id": 45472500, "body": "Well done JS1, i could have my answers thanks to your pointers. I update the question accordingly. +1. By the way, grab some more rep if you make it an answer :)"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1424274651, "post_id": 28581001, "comment_id": 45482505, "body": "In general you don&#39;t have to bother with <code>cfi</code> directives when writing assembly, unless you want very nice debugging."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "edited": false, "score": 0, "creation_date": 1424279410, "post_id": 28581001, "comment_id": 45485812, "body": "Thanks Jester, that is a good point for me to know ;)"}], "owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1424258732, "creation_date": 1424254544, "last_edit_date": 1592644375, "question_id": 28581001, "link": "https://stackoverflow.com/questions/28581001/the-cfi-are-not-clear-to-me", "title": "The cfi_* are not clear to me", "body": "<h2>Update:</h2>\n<p>I could have parts of my answers there :\n<a href=\"http://www.x86-64.org/documentation/abi.pdf\" rel=\"nofollow noreferrer\">http://www.x86-64.org/documentation/abi.pdf</a></p>\n<p>page 58.\nPffeeeew assembly is a tough language :)</p>\n<h3>Context:</h3>\n<p>Learning GAS assembly for 2-3 days now.\nLinux 64 bits.</p>\n<p>GCC 4.8.2</p>\n<p>Compilation with <strong>no optimization</strong> (-O0 -march=native) to see the basic assembly generated.</p>\n<h3>Question:</h3>\n<p><strong><em>Is my explanation (below) right ?</em></strong></p>\n<p>All my C converted code is composed the same way with</p>\n<pre><code>.cfi_startproc\npushq   %rbp\n.cfi_def_cfa_offset 16\n.cfi_offset 6, -16\nmovq    %rsp, %rbp\n.cfi_def_cfa_register 6\nsubq    $16, %rsp\n\n#my code here\n\nmovl    $0, %eax\nleave\n.cfi_def_cfa 7, 8\nret\n.cfi_endproc\n</code></pre>\n<p>I try to explain the steps :</p>\n<p>1)</p>\n<p>I read that the <code>cfi_def_cfa_offset</code> <em>has</em> to be 16 on 64 bits arch. That is a rule (<strong>right ?</strong>).</p>\n<p>2)</p>\n<p><code>cfi_offset</code> and <code>cfi_def_cfa_register</code> are &quot;associated&quot; to the value 6. <strong>Why ??</strong></p>\n<p>3)</p>\n<p>I understand that we skip the cfi_def_cfa_offset 16 bytes with the <code>subq</code>.</p>\n<p>4)</p>\n<p>But <strong>why the <code>cfi_def_cfa 7, 8</code> in the end ?</strong> it doesn't make sense to me because 8 appears nowhere. Why not <code>cfi_def_cfa 15, 16</code> by the way ?</p>\n<p>Thanks</p>\n"}, {"tags": ["c", "linux", "process", "fork", "pid"], "answers": [{"comments": [{"owner": {"reputation": 925, "user_id": 3437352, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001435488390/picture?type=large", "display_name": "Siddharth Kamaria", "link": "https://stackoverflow.com/users/3437352/siddharth-kamaria"}, "edited": false, "score": 0, "creation_date": 1424253481, "post_id": 28580578, "comment_id": 45469312, "body": "Can you elaborate? Why would it print 8 outputs even though there is an &#39;if&#39; statement."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1424255575, "last_edit_date": 1424255575, "creation_date": 1424253363, "answer_id": 28580578, "question_id": 28580510, "link": "https://stackoverflow.com/questions/28580510/different-outputs-while-forking-process/28580578#28580578", "title": "Different outputs while forking process", "body": "<p>You forgot to include the required header files. to use <code>fork()</code>, you need to have</p>\n\n<pre><code>   #include &lt;sys/types.h&gt;\n   #include &lt;unistd.h&gt;\n</code></pre>\n\n<p>With this, I'm able to get the expected output.</p>\n\n<p>That said, in your code, it seems you don't wait for completion of child processes.</p>\n\n<p>You need to have a <a href=\"http://linux.die.net/man/2/waitpid\" rel=\"nofollow\"><code>wait()</code></a> call in your parent process to wait till child has finished execution. </p>\n\n<p>Also, it's not <code>void main()</code>, actually <code>int main(void)</code>. a <code>return 0</code> at the end is good practice.</p>\n"}, {"comments": [{"owner": {"reputation": 925, "user_id": 3437352, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001435488390/picture?type=large", "display_name": "Siddharth Kamaria", "link": "https://stackoverflow.com/users/3437352/siddharth-kamaria"}, "edited": false, "score": 0, "creation_date": 1424254065, "post_id": 28580692, "comment_id": 45469694, "body": "What is the need to include a wait() call??"}, {"owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "reply_to_user": {"reputation": 925, "user_id": 3437352, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001435488390/picture?type=large", "display_name": "Siddharth Kamaria", "link": "https://stackoverflow.com/users/3437352/siddharth-kamaria"}, "edited": false, "score": 0, "creation_date": 1424264785, "post_id": 28580692, "comment_id": 45476070, "body": "@sidkamaria if you will not wait in main process then when your child process is going on and main process terminate then its child will also get terminated so your print msg will not come"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1424317691, "post_id": 28580692, "comment_id": 45502849, "body": "a pid is defined as a &#39;pid_t&#39;, not as an int."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1424317841, "post_id": 28580692, "comment_id": 45502894, "body": "exiting the parent process while the child process is still running can produce a zombie process of the child  so each process that performs a &#39;fork()&#39; needs to wait for its&#39; child process to exit."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1424318079, "post_id": 28580692, "comment_id": 45502955, "body": "the getppid() and getpid() and fork() system calls require #include &lt;sys/types..h&gt; and #include &lt;unistd.h&gt;    Without those #includes, the compiler will assume all values and return types are &#39;int&#39;   And without those #includes, the compiler (you are enabling all warnings, yes) will complain about using those default parameter and return types"}], "tags": [], "owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "is_accepted": true, "score": 1, "last_activity_date": 1424254179, "last_edit_date": 1424254179, "creation_date": 1424253664, "answer_id": 28580692, "question_id": 28580510, "link": "https://stackoverflow.com/questions/28580510/different-outputs-while-forking-process/28580692#28580692", "title": "Different outputs while forking process", "body": "<pre><code>#include &lt;stdio.h&gt;\n\n    void main()\n    {\n        int pidb=-1;\n        if(fork()==0) pidb=getpid();\n        fork();\n        if(getppid()!=pidb) fork();\n        wait(NULL);  // Wait for all child process\n        printf(\"%d\\n\",getpid());\n    }\n</code></pre>\n\n<p>This is what you want.\nThis will print 7 pid of those 7 process</p>\n\n<hr>\n\n<p>Final process tree would be like this</p>\n\n<pre><code>          A (First fork) \n       /    \\\n      B      c   (2nd fork) \n     / \\     / \\\n    D   E    F  G  (3rd fork)\n   / \\  / \\  /\\   | \n   1  2 3 4  5 6  7\n</code></pre>\n"}], "owner": {"reputation": 925, "user_id": 3437352, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001435488390/picture?type=large", "display_name": "Siddharth Kamaria", "link": "https://stackoverflow.com/users/3437352/siddharth-kamaria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 28580692, "answer_count": 2, "score": 0, "last_activity_date": 1424255575, "creation_date": 1424253193, "question_id": 28580510, "link": "https://stackoverflow.com/questions/28580510/different-outputs-while-forking-process", "title": "Different outputs while forking process", "body": "<p>I'm getting different number of outputs in the below attached code. Sometimes it prints 6 PID's or sometimes 8 PID's. <strong>Desired output is 7 PID's</strong>. Though sometimes I'm able to get 7 PID's. </p>\n\n<p><strong>Process tree:</strong></p>\n\n<pre><code>          A\n       /  |  \\\n      B   C   D\n     / \\  |\n    E   F G\n</code></pre>\n\n<p><strong>My Code:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main()\n{\n    int pidb=-1;\n    if(fork()==0) pidb=getpid();\n    fork();\n    if(getppid()!=pidb) fork(); \n    printf(\"%d\\n\",getpid());\n}\n</code></pre>\n\n<p><strong>Note:</strong> Assume that the fork call will be successful.</p>\n\n<p>[update]</p>\n\n<p>We need to achieve it using 3 fork calls.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 2597, "user_id": 768656, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TgeZI.png?s=128&g=1", "display_name": "Benjamin Maurer", "link": "https://stackoverflow.com/users/768656/benjamin-maurer"}, "edited": false, "score": 1, "creation_date": 1424253675, "post_id": 28580463, "comment_id": 45469436, "body": "Can&#39;t run it bc. you use conio.h and I&#39;m on Linux. But there are several problems with this. You have to be very careful with string length checking, especially with user input. Fore example, gets() doesn&#39;t care about your buffer size and will happily read 80+ chars. But i suspect the error in copyString. Print the end value of k. You never check if k &lt; SIZE -- Edit: gcc gives me tons of warnings. Always compile with warning flags and correct them!"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1424253907, "post_id": 28580463, "comment_id": 45469573, "body": "Your new string may be longer than <code>SIZE</code>. (<a href=\"http://stackoverflow.com/questions/1694036/why-is-the-gets-function-dangerous-why-should-it-not-be-used\">Don&#39;t use <code>gets</code>, by the way.</a>)"}, {"owner": {"reputation": 31, "user_id": 4019577, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-72mS_Gt_qbk/AAAAAAAAAAI/AAAAAAAAAE0/JgVwtUhr-AU/photo.jpg?sz=128", "display_name": "Gurucharan Sharma", "link": "https://stackoverflow.com/users/4019577/gurucharan-sharma"}, "edited": false, "score": 0, "creation_date": 1424253943, "post_id": 28580463, "comment_id": 45469606, "body": "First of all thank you Benjamin for answering my question. Now about the k, I didn&#39;t include the tests for k intentionally and that&#39;s because I never type too long strings. I excluded the test for k just for my convenience. About conio.h, you can remove it but than you will have to remove the getch() function, called just before the return EXIT_SUCCESS. I just can&#39;t figure out why is the stack around piglatinText being corrupted!"}, {"owner": {"reputation": 2597, "user_id": 768656, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TgeZI.png?s=128&g=1", "display_name": "Benjamin Maurer", "link": "https://stackoverflow.com/users/768656/benjamin-maurer"}, "edited": false, "score": 0, "creation_date": 1424253975, "post_id": 28580463, "comment_id": 45469632, "body": "The program actually works for me, unless I enter too much text."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4019577, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-72mS_Gt_qbk/AAAAAAAAAAI/AAAAAAAAAE0/JgVwtUhr-AU/photo.jpg?sz=128", "display_name": "Gurucharan Sharma", "link": "https://stackoverflow.com/users/4019577/gurucharan-sharma"}, "edited": false, "score": 0, "creation_date": 1424254360, "post_id": 28580792, "comment_id": 45469895, "body": "Thanks @Vagish, that solves my problem. May be I was too engrossed in debugging the complex constructs of the code that I forgot that error could be hidden anywhere, even in the silliest of the places. Thanks once again."}], "tags": [], "owner": {"reputation": 2462, "user_id": 2705907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/e2UTS.jpg?s=128&g=1", "display_name": "Vagish", "link": "https://stackoverflow.com/users/2705907/vagish"}, "is_accepted": true, "score": 1, "last_activity_date": 1424254280, "last_edit_date": 1424254280, "creation_date": 1424253973, "answer_id": 28580792, "question_id": 28580463, "link": "https://stackoverflow.com/questions/28580463/stack-around-the-variable-piglatintext-was-corrupted/28580792#28580792", "title": "stack around the variable &#39;PiglatinText&#39; was corrupted", "body": "<p>To your <code>void initialiseString(char string[])</code> function you are passing a non-initialized array <code>firstChar[SIZE]</code>. And in that function you are using <code>strlen()</code>\non that array. This will cause a undefined behavior.</p>\n\n<p>Most probably  this function giving you a wrong length and based on that you are wrongly initializing it. This may lead to stack corruption on further processing.</p>\n\n<p>You should first initialize <code>firstChar[SIZE]</code> with null characters as you have done with other arrays.</p>\n\n<pre><code>// piglatin Generator\n    for (i = 0; i &lt; wordCount; i++) {\n        initialiseString(firstChar);  //&lt;-- For first iteration of for loop this will cause problem as 'firstChar' is not initialized.\n        l = 0;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4019577, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-72mS_Gt_qbk/AAAAAAAAAAI/AAAAAAAAAE0/JgVwtUhr-AU/photo.jpg?sz=128", "display_name": "Gurucharan Sharma", "link": "https://stackoverflow.com/users/4019577/gurucharan-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "accepted_answer_id": 28580792, "answer_count": 1, "score": 0, "last_activity_date": 1424254280, "creation_date": 1424253060, "last_edit_date": 1424253593, "question_id": 28580463, "link": "https://stackoverflow.com/questions/28580463/stack-around-the-variable-piglatintext-was-corrupted", "title": "stack around the variable &#39;PiglatinText&#39; was corrupted", "body": "<pre><code>**Source.c**\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\n#define SIZE 80\n#define SPACE ' '\n\nextern int isVowel(char);\nextern void initialiseString(char[]);\nextern int copyString(char[], char[], int);\n\nint main() {\n    char originalText[SIZE] = {'\\0'};\n    char piglatinText[SIZE] = {'\\0'};\n    char firstChar[SIZE];\n    int i, j, k, l, wordCount;\n    wordCount = 1;\n    i = j = k = l = 0;\n\n    printf(\"Enter the text for which you want to generate the piglatin\\n\");\n    gets(originalText);\n\n    while (originalText[i] != NULL) {\n        if (originalText[i] == SPACE) {\n            if (originalText[i + 1] != SPACE) {\n                wordCount++;\n            }\n        }\n        i++;\n    }\n\n    printf(\"Total words in the string are %i\\n\", wordCount);\n\n    // piglatin Generator\n    for (i = 0; i &lt; wordCount; i++) {\n        initialiseString(firstChar);\n        l = 0;\n\n        while (!isVowel(originalText[j]) &amp;&amp; (originalText[j] != SPACE) &amp;&amp; (originalText[j] != NULL)) {\n            firstChar[l++] = originalText[j++];\n        }\n\n        if (isVowel(originalText[j])) {\n            while ((originalText[j] != SPACE) &amp;&amp; (originalText[j] != NULL)) {\n                piglatinText[k++] = originalText[j++];\n            }\n\n            k = copyString(piglatinText, firstChar, k);\n        } else {\n            firstChar[l] = '\\0';\n            k = copyString(piglatinText, firstChar, k);\n        }\n\n        piglatinText[k++] = 'a';\n        piglatinText[k++] = ' ';\n        j++;\n    }\n\n    printf(\"The piglatin text\\n\");\n    puts(piglatinText);\n\n    getch();\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p><strong>Functions.c</strong></p>\n\n<pre><code>#include &lt;string.h&gt;\n\nint isVowel(char ch) {\n    if (ch == 'a' || ch == 'e' || ch == 'i' || ch == 'o' || ch == 'u' ||\n        ch == 'A' || ch == 'E' || ch == 'I' || ch == 'O' || ch == 'U') {\n        return 1;\n    }\n\n    return 0;\n}\n\nvoid initialiseString(char string[]) {\n    int i;\n    int len;\n    len = strlen(string);\n    i = 0;\n\n    while (i &lt;= len) {\n        string[i++] = '\\0';\n    }\n\n    return;\n}\n\nint copyString(char stringOne[], char stringTwo[], int k) {\n    int i;\n    int len;\n    len = strlen(stringTwo);\n    i = 0;\n\n    while (len &gt; 0) {\n        stringOne[k++] = stringTwo[i++];\n        len--;\n    }\n\n    return k;\n}\n</code></pre>\n\n<p>Here the main function is present in the Source.c file and all the functions used in Source.c file are defined in Functions.c file.</p>\n\n<p>Whenever I run this code, the originalText is encoded correctly but at the end the error <strong>stack around the variable 'PiglatinText' was corrupted</strong> is generated! I tried to find the error by debugging but was unable to find the error source.</p>\n"}, {"tags": ["c", "arrays", "scanf"], "comments": [{"owner": {"reputation": 1505, "user_id": 2641513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bGWLp.jpg?s=128&g=1", "display_name": "zoska", "link": "https://stackoverflow.com/users/2641513/zoska"}, "edited": false, "score": 0, "creation_date": 1424253048, "post_id": 28580345, "comment_id": 45469048, "body": "What do you mean by sized array?"}, {"owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "edited": false, "score": 1, "creation_date": 1424253179, "post_id": 28580345, "comment_id": 45469123, "body": "C arrays are fixed size. You can use expression <code>sizeof(array)&#47;sizeof(array[0])</code> or just some constant pre-defined. And no, you can&#39;t figure the array&#39;s size inside the subroutine."}, {"owner": {"reputation": 1505, "user_id": 2641513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bGWLp.jpg?s=128&g=1", "display_name": "zoska", "link": "https://stackoverflow.com/users/2641513/zoska"}, "edited": false, "score": 0, "creation_date": 1424253221, "post_id": 28580345, "comment_id": 45469146, "body": "not when you pass them to function"}, {"owner": {"reputation": 3177, "user_id": 1221236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/230d4a82674b9e02c0b95e4ecf7468ae?s=128&d=identicon&r=PG", "display_name": "dragosht", "link": "https://stackoverflow.com/users/1221236/dragosht"}, "edited": false, "score": 2, "creation_date": 1424253266, "post_id": 28580345, "comment_id": 45469172, "body": "So you want to count the elements without counting them ? ..."}, {"owner": {"reputation": 1505, "user_id": 2641513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bGWLp.jpg?s=128&g=1", "display_name": "zoska", "link": "https://stackoverflow.com/users/2641513/zoska"}, "edited": false, "score": 1, "creation_date": 1424253393, "post_id": 28580345, "comment_id": 45469257, "body": "you need to have some kind of termination in your array, but it&#39;s not possible for every case"}, {"owner": {"reputation": 1505, "user_id": 2641513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bGWLp.jpg?s=128&g=1", "display_name": "zoska", "link": "https://stackoverflow.com/users/2641513/zoska"}, "edited": false, "score": 0, "creation_date": 1424254276, "post_id": 28580345, "comment_id": 45469834, "body": "what kind of input does your program expect (I know that int&#39;s, but are they any specific values?)"}, {"owner": {"reputation": 33, "user_id": 4577978, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b07b9f1eb31495741db410d6afe6e12b?s=128&d=identicon&r=PG&f=1", "display_name": "user4577978", "link": "https://stackoverflow.com/users/4577978/user4577978"}, "edited": false, "score": 0, "creation_date": 1424273919, "post_id": 28580345, "comment_id": 45481984, "body": "sized means not unsized like:arr_[1000] where unsized is like:arr_[] .Though unsized array is invalid in this case"}, {"owner": {"reputation": 33, "user_id": 4577978, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b07b9f1eb31495741db410d6afe6e12b?s=128&d=identicon&r=PG&f=1", "display_name": "user4577978", "link": "https://stackoverflow.com/users/4577978/user4577978"}, "edited": false, "score": 0, "creation_date": 1424274228, "post_id": 28580345, "comment_id": 45482206, "body": "This program&#39;s prime task is to count how many values are passed to scanf()  any"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1424284979, "post_id": 28580345, "comment_id": 45489191, "body": "In that case, count them at the point of entry."}], "answers": [{"tags": [], "owner": {"reputation": 3177, "user_id": 1221236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/230d4a82674b9e02c0b95e4ecf7468ae?s=128&d=identicon&r=PG", "display_name": "dragosht", "link": "https://stackoverflow.com/users/1221236/dragosht"}, "is_accepted": false, "score": 0, "last_activity_date": 1424253891, "creation_date": 1424253891, "answer_id": 28580774, "question_id": 28580345, "link": "https://stackoverflow.com/questions/28580345/how-to-count-integer-array-elements-like-char-based-strlen-in-c/28580774#28580774", "title": "How to count Integer array elements like char based strlen() in C?", "body": "<p><code>strlen()</code> iterates on the character array until the C string termination character (ASCII <code>\\0</code>) is encountered. So it is <code>COUNTING</code> the elements. If you want to do that for an <code>int</code> array I guess you could also have a reserved 'terminator' value for your array, make room for it (allocate one more int in your array for the terminator) and implement your own <code>int_array_len()</code> similar to <code>strlen</code>. However, in your case counting the elements while inputting them seems like a much better way to go.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1424259826, "creation_date": 1424259826, "answer_id": 28582807, "question_id": 28580345, "link": "https://stackoverflow.com/questions/28580345/how-to-count-integer-array-elements-like-char-based-strlen-in-c/28582807#28582807", "title": "How to count Integer array elements like char based strlen() in C?", "body": "<p>Without having a termination value, you will have to count the inputs as they are made. You could do this by defining a <code>struct</code> to hold the array. Your program does not know how many integers you will enter, and this code allocates more memory when the array is full, keeping track of the array size and elements used.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define ARRAY_STEP 10       // increment in array size\n\ntypedef struct {\n    int maxlen;             // capacity of array\n    int length;             // elements used\n    int *array;             // the array pointer\n} istruct;\n\nint main(void) {\n    istruct intarr = {0};   // empty array\n    int i;\n    printf (\"Enter some integers:\\n\");\n    while (scanf(\"%d\", &amp;i) == 1) {\n        if (intarr.length &gt;= intarr.maxlen) {\n            intarr.maxlen += ARRAY_STEP;        // increase array size\n            intarr.array = realloc(intarr.array, intarr.maxlen * sizeof(int));\n            if (intarr.array == NULL) {\n                printf(\"Memory allocation error\\n\");\n                exit (1);\n            }\n        }\n        intarr.array[intarr.length++] = i;\n    }\n\n    printf (\"You entered:\\n\");\n    for (i=0; i&lt;intarr.length; i++)\n        printf (\"%-10d\", intarr.array[i]);\n    printf (\"\\n\");\n    if (intarr.array)\n        free(intarr.array);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 4577978, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b07b9f1eb31495741db410d6afe6e12b?s=128&d=identicon&r=PG&f=1", "display_name": "user4577978", "link": "https://stackoverflow.com/users/4577978/user4577978"}, "is_accepted": false, "score": 0, "last_activity_date": 1424856443, "last_edit_date": 1424856443, "creation_date": 1424315948, "answer_id": 28598077, "question_id": 28580345, "link": "https://stackoverflow.com/questions/28580345/how-to-count-integer-array-elements-like-char-based-strlen-in-c/28598077#28598077", "title": "How to count Integer array elements like char based strlen() in C?", "body": "<p>Smart vertion:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n\n{\n\n    double a[100000],mx=0;\n\n    int i,j,c=0;\n\n    printf(\"Enter as many numbers as you wish . Press Ctrl+D or any character to stop inputting :\\n\");\n    /*for(i=0;i&lt;100000;i++)\n        a[i]=0;*/\n    for(i=0;i&lt;100000;i++)\n    {\n        if((scanf(\"%lf\",&amp;a[i]))==1)\n            c++;\n        //else break;\n    }\n    for(j=0;j&lt;c;j++)\n    {\n        if(a[j]&gt;mx) mx=a[j];\n    }\n    printf(\"You have inserted %d values and the maximum is:%g\",c,mx);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2191, "user_id": 10232790, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ffWFm9uJgO4/AAAAAAAAAAI/AAAAAAAABjI/hXd8V3yjdoE/photo.jpg?sz=128", "display_name": "Harshith Rai", "link": "https://stackoverflow.com/users/10232790/harshith-rai"}, "is_accepted": false, "score": 0, "last_activity_date": 1539068703, "creation_date": 1539068703, "answer_id": 52715129, "question_id": 28580345, "link": "https://stackoverflow.com/questions/28580345/how-to-count-integer-array-elements-like-char-based-strlen-in-c/52715129#52715129", "title": "How to count Integer array elements like char based strlen() in C?", "body": "<p>It's pretty simple.</p>\n\n<p>just declare of your desired \"initial size\". And keep checking if input is a valid integer or not. </p>\n\n<p><code>if((scanf(\"%d\",&amp;a[i]))==1)</code> this would be <code>true</code> if and only if the input is a valid integer. hence the moment the input is not an int, it exits the loop. You can count the number of input values within the same loop and also the max values.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;limits.h&gt;\nint main()\n{\n    int a[100],max = INT_MIN;\n    int i,j,count=0;\n\n    printf(\"Start Entering the integers... Give any non-integer input to stop:\\n\");\n    for(i=0;i&lt;100;i++)\n    {\n        if((scanf(\"%d\",&amp;a[i]))==1) {\n          count++;\n          if(a[i]&gt;max) {\n            max = a[i];\n          }\n        }\n        else\n          break;\n    }\n    printf(\"number of input values: %d;\\nThe maximum input value: %d\",count,max);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4577978, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b07b9f1eb31495741db410d6afe6e12b?s=128&d=identicon&r=PG&f=1", "display_name": "user4577978", "link": "https://stackoverflow.com/users/4577978/user4577978"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2702, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1539068703, "creation_date": 1424252720, "last_edit_date": 1424274352, "question_id": 28580345, "link": "https://stackoverflow.com/questions/28580345/how-to-count-integer-array-elements-like-char-based-strlen-in-c", "title": "How to count Integer array elements like char based strlen() in C?", "body": "<p>I would like to count the number of elements in an integer array(sized, like: array[1000]) after input without counting manually while inputting(using <code>scanf()</code> which is = number of arguments passed to scanf).Though int arrays are not null terminated as well as <code>scanf()</code> cannot be used like <code>getchar()</code> or <code>gets()</code> and no availale function like <code>strlen()</code> for int arrays,is it possible to write a C program to prompt the user to input as many numbers as he wishes and the program will count them(total arguments passed to scanf()) and print the maximum using arrays or pointers?</p>\n"}, {"tags": ["c", "struct", "bit-fields"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1424252909, "post_id": 28580344, "comment_id": 45468962, "body": "advise <i>what?</i> what do you want? why would you worry? of course different compilers on different platforms do different things when it comes to implementation details\u2026"}, {"owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "edited": false, "score": 1, "creation_date": 1424252946, "post_id": 28580344, "comment_id": 45468989, "body": "Read this <a href=\"http://stackoverflow.com/questions/18284640/c-size-of-structure-when-bit-field-is-used-and-how-it-is-stored-in-memory\" title=\"c size of structure when bit field is used and how it is stored in memory\">stackoverflow.com/questions/18284640/&hellip;</a>"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1424253091, "post_id": 28580344, "comment_id": 45469075, "body": "Unless you insert unnamed, zero-size bitfields, you can&#39;t assume anything about the layout of the bitfield."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1424253272, "post_id": 28580344, "comment_id": 45469177, "body": "Advice: If memory layout or size is important, don&#39;t use bit-field because practically nothing is guaranteed."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1424253508, "post_id": 28580344, "comment_id": 45469327, "body": "You can get them packed to 2 bytes on Windows by making them both uint16_t."}], "answers": [{"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": true, "score": 3, "last_activity_date": 1424253931, "creation_date": 1424253931, "answer_id": 28580784, "question_id": 28580344, "link": "https://stackoverflow.com/questions/28580344/sizeofstruct-different-for-different-compilers/28580784#28580784", "title": "sizeof(struct) different for different compilers", "body": "<p><em>Not sure if I understand it well, but I see that while first compiler compresses the struct to 9+7 = 16 bits, the other uses 16 bits of uint16_t and 8 of uint8_t. Could you advise?</em></p>\n\n<p>The first thing to remember about bit-field is this phrase from K&amp;R, 2nd: </p>\n\n<blockquote>\n  <p>(6.9 Bit-fields) \"Almost everything about fields is implementation-dependent.\"</p>\n</blockquote>\n\n<p>It includes padding, alignment and bit endianness.</p>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 3415290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c99e8eb344c32d92ee43e7d8f345f43?s=128&d=identicon&r=PG&f=1", "display_name": "user3415290", "link": "https://stackoverflow.com/users/3415290/user3415290"}, "is_accepted": false, "score": 0, "last_activity_date": 1424253978, "creation_date": 1424253978, "answer_id": 28580798, "question_id": 28580344, "link": "https://stackoverflow.com/questions/28580344/sizeofstruct-different-for-different-compilers/28580798#28580798", "title": "sizeof(struct) different for different compilers", "body": "<p>There are two possible problems that might be occurring:</p>\n\n<p>Bit-fields are very poorly standardized part  within the ANSI C specification. The compiler chooses how bits are allocated within the bit-field container.You should avoid using them inside structures instead you can use #define or enum.</p>\n\n<p>The second possible issue is that the compiler will lay the structure in memory by adding padding to ensure that the next object is aligned to the size of that object.It is a good practices to place elements of the struct according to their size:</p>\n\n<pre><code>typedef struct{\n        uint8_t x : 7;\n        uint16_t y : 9;\n    } z;\n</code></pre>\n"}], "owner": {"reputation": 400, "user_id": 2287125, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a70ae7fc8ccd14cb0a84097f4664076?s=128&d=identicon&r=PG", "display_name": "Szymon Fortuna", "link": "https://stackoverflow.com/users/2287125/szymon-fortuna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 28580784, "answer_count": 2, "score": 1, "last_activity_date": 1424253978, "creation_date": 1424252719, "question_id": 28580344, "link": "https://stackoverflow.com/questions/28580344/sizeofstruct-different-for-different-compilers", "title": "sizeof(struct) different for different compilers", "body": "<p>Supposing I have a code like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\nint main(int argc, char *argv[]) {\n    typedef struct{\n        uint16_t x : 9;\n        uint8_t y : 7;\n    } z;\n    printf(\"sizeof(z) = %lu\\n\",sizeof(z));\n}\n</code></pre>\n\n<p>I have different results for clang on Mac (2) and someone told me on Windows it returned (3). Not sure if I understand it well, but I see that while first compiler compresses the struct to 9+7 = 16 bits, the other uses 16 bits of uint16_t and 8 of uint8_t. Could you advise?</p>\n"}, {"tags": ["c", "language-lawyer", "c89"], "comments": [{"owner": {"reputation": 4857, "user_id": 1405614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9a70943a5d825c32446259aa7e9348?s=128&d=identicon&r=PG", "display_name": "Valeri Atamaniouk", "link": "https://stackoverflow.com/users/1405614/valeri-atamaniouk"}, "edited": false, "score": 0, "creation_date": 1424251670, "post_id": 28579943, "comment_id": 45468173, "body": "<code>TRUE=1</code> and <code>FALSE=0</code> are bound to standard as you have noted. <code>TRUE=(1==1)</code> and <code>FALSE=(!TRUE)</code> are bound to compiler-specific implementation. So if you get a non-standard-compliant compiler (which is bad), you can still have somewhat portable code."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 2, "creation_date": 1424251916, "post_id": 28579943, "comment_id": 45468357, "body": "Note that <code>1 == 1</code> <b>is</b> <code>1</code> and <code>!(1 == 1)</code> <b>is</b> zero \u2013 since they are <i>constant expressions</i>. One case where it would make sense is e. g. when you want your compiler not to accept <code>FALSE</code> as a null pointer literal."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 2, "creation_date": 1424252060, "post_id": 28579943, "comment_id": 45468440, "body": "It is also useful if done in a header file that may be included by a C++ program. Then <code>TRUE</code> will be the proper <code>bool</code> typed <code>true</code>."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1424252452, "post_id": 28579943, "comment_id": 45468674, "body": "Related (with relevant discussion): <a href=\"http://stackoverflow.com/q/14642096/694733\">stackoverflow.com/q/14642096/694733</a>"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1424273694, "post_id": 28579943, "comment_id": 45481820, "body": "@TheParamagneticCroissant: <code>!(1==1)</code> is a valid null pointer constant. (E.g. <code>(0,0)</code> or <code>(0 , !(1==1))</code> etc aren&#39;t, and would make the compiler complain if used in a pointer context.)"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": true, "score": 3, "last_activity_date": 1424256895, "creation_date": 1424256895, "answer_id": 28581835, "question_id": 28579943, "link": "https://stackoverflow.com/questions/28579943/nitpicking-booleans-in-c/28581835#28581835", "title": "Nitpicking booleans in C", "body": "<p><code>(1==1)</code> and <code>(!TRUE)</code> are useful definitions on some compilers (I don't have a concrete example off of the top of my head) that track whether an integer came from a boolean comparison. This enables them to warn for</p>\n\n<pre><code>if (i)\n</code></pre>\n\n<p>while at the same time not warning for</p>\n\n<pre><code>if (i != 0)\n</code></pre>\n\n<p>and also not warning for</p>\n\n<pre><code>j = i != 0;\nif (j)\n</code></pre>\n\n<p>even though in all three cases, the conditional is a non-constant <code>int</code>.</p>\n\n<p>This way, no warning would be generated for <code>int b = TRUE;</code>...<code>if (b)</code>, since <code>b</code> would be considered a truth-integer.</p>\n\n<p>You can make a legitimate argument that such warnings are useless, but others can make an equally legitimate argument that such warnings do have use. It will have many false positives in common code, but it may make code more readable if it is written in a way that avoids such warnings.</p>\n\n<p>At the same time, such definitions are harmless for other compilers that do not track this, since they just see constant expressions that evaluate to <code>1</code> and <code>0</code>.</p>\n"}], "owner": {"reputation": 1147, "user_id": 639428, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6aaa2e6c7e59408dc0fa056a4999e802?s=128&d=identicon&r=PG", "display_name": "Kenneth", "link": "https://stackoverflow.com/users/639428/kenneth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "accepted_answer_id": 28581835, "answer_count": 1, "score": 2, "last_activity_date": 1424542283, "creation_date": 1424251484, "last_edit_date": 1424542283, "question_id": 28579943, "link": "https://stackoverflow.com/questions/28579943/nitpicking-booleans-in-c", "title": "Nitpicking booleans in C", "body": "<p>I was reading <a href=\"http://c-faq.com/bool/booltype.html\" rel=\"nofollow\">comp.lang.c</a>s description of booleans values, pre-C99. It mentions that some people prefer to define their own boolean values as:</p>\n\n<pre><code>#define TRUE (1==1)\n#define FALSE (!TRUE)\n</code></pre>\n\n<p>However, the standard defines the equality operator to always return a signed int with a value of 1 when two values compare equal (C11 - 6.5.9) and the logical not operator shall return a int with a value of 0 if the value compares unequal to 0 (C11 - 6.5.3.3). </p>\n\n<p>If this is the case and the above definitions use literals, won't the evaluation happen compile time and the resulting definitions be:</p>\n\n<pre><code>#define TRUE (1)\n#define FALSE (0)\n</code></pre>\n\n<p>And a follow-up question. Is there any case where it makes sense to define the true and false labels to anything other than 1 and 0, respectively?</p>\n\n<p>And pardon that I reference C11 when my question concerns C89 but I only have the C11 standard at hand.</p>\n"}]