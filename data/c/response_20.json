[{"tags": ["c"], "comments": [{"owner": {"reputation": 424, "user_id": 3592525, "user_type": "registered", "profile_image": "https://graph.facebook.com/1406357266/picture?type=large", "display_name": "Epirocks", "link": "https://stackoverflow.com/users/3592525/epirocks"}, "edited": false, "score": 3, "creation_date": 1432770401, "post_id": 30494922, "comment_id": 49067481, "body": "I&#39;m sure you could use powers of ten to get the digits. 1234/1000 = 1 and so on. e.g to get the second you would 1234-1000 = 234 so 234/100 = 2, then 234-2*100 = 34 so 34/10 = 3"}, {"owner": {"reputation": 279739, "user_id": 16076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D29fm.jpg?s=128&g=1", "display_name": "Mitch Wheat", "link": "https://stackoverflow.com/users/16076/mitch-wheat"}, "edited": false, "score": 1, "creation_date": 1432770514, "post_id": 30494922, "comment_id": 49067515, "body": "&quot;In some kinds of problems I often face this situation where I have a determined variable where I need to shift digits position i.e int e = 2385&quot; - what kinds of programs?"}, {"owner": {"reputation": 6788, "user_id": 298206, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2911c6ad709ff05272e49a21df247da2?s=128&d=identicon&r=PG", "display_name": "Valentin Heinitz", "link": "https://stackoverflow.com/users/298206/valentin-heinitz"}, "edited": false, "score": 0, "creation_date": 1432770936, "post_id": 30494922, "comment_id": 49067611, "body": "From where do you start to count the position left or right?"}, {"owner": {"reputation": 204, "user_id": 4806007, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/5MUQn.jpg?s=128&g=1", "display_name": "Ezequiel Barbosa", "link": "https://stackoverflow.com/users/4806007/ezequiel-barbosa"}, "reply_to_user": {"reputation": 6788, "user_id": 298206, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2911c6ad709ff05272e49a21df247da2?s=128&d=identicon&r=PG", "display_name": "Valentin Heinitz", "link": "https://stackoverflow.com/users/298206/valentin-heinitz"}, "edited": false, "score": 0, "creation_date": 1432772114, "post_id": 30494922, "comment_id": 49067915, "body": "@ValentinHeinitz from left. @MitchWheat get a palindrome, subtract 1, then invert the last and first digits. On four digits numbers that means same as subtracting 1000. But what if I have a bigger number, but I don&#39;t know it&#39;s size?  What I mean is that I would like to treat each digit separately, if possible.  Now, on a different case, I also need to put numbers together to create another, like in the example of variables <code>a</code> and <code>b</code> I gave above. This will turn very handy to work on the remainders in a long division calculator that shows the calculation just as we do by hand, for example."}, {"owner": {"reputation": 204, "user_id": 4806007, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/5MUQn.jpg?s=128&g=1", "display_name": "Ezequiel Barbosa", "link": "https://stackoverflow.com/users/4806007/ezequiel-barbosa"}, "edited": false, "score": 0, "creation_date": 1432772454, "post_id": 30494922, "comment_id": 49067992, "body": "@MitchWheatby the way the problems where proposed by my teacher, so they&#39;re not for serious/commercial programming WHEN we&#39;re talking about inverting digits position. But on the second case, I really wanna construct a bunch of calculators that print the math just as we do in paper, and I didn&#39;t figure out all of them yet, but for the long division (with and without decimals) I indeed think having a way to get i.e <code>int a = 1</code> and <code>int b = 2</code> and putting them together as algarisms of a third number is going to be useful."}], "answers": [{"tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": true, "score": 3, "last_activity_date": 1432770952, "last_edit_date": 1432770952, "creation_date": 1432770648, "answer_id": 30495012, "question_id": 30494922, "link": "https://stackoverflow.com/questions/30494922/how-do-i-manipulate-the-digits-of-a-number/30495012#30495012", "title": "How do I manipulate the digits of a number?", "body": "<p>This can be broken into two tasks: (1) breaking up a number into pieces, and (2) combining pieces into a whole number.</p>\n\n<ol>\n<li><p>To break up a number into pieces, use the division and modulus operators.</p>\n\n<pre><code>int num = 2385;\n\nint a = num / 1000;       // 2\nint b = num / 100 % 10;   // 3\nint c = num / 10  % 10;   // 8\nint d = num / 1   % 10;   // 5\n</code></pre>\n\n<p>The trick is to use division to remove the digits to the right, then modulus to keep only the rightmost digit. For example, to calculate the hundreds' place (<code>b</code>) we compute 2385 / 100, which is 23. 23 % 10 is the remainder when you divide 23 by 10. The remainder is 3.</p></li>\n<li><p>To combine the pieces back into a number, do the opposite with multiplication and addition.</p>\n\n<pre><code>num = a * 1000            //   2000\n    + d *  100            // +  500\n    + c *   10            // +   80\n    + b *    1;           // +    3\n                          //   ----\n                          //   2583\n</code></pre>\n\n<p>Notice how I switched <code>d</code> and <code>b</code> to swap those digits.</p></li>\n</ol>\n"}], "owner": {"reputation": 204, "user_id": 4806007, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/5MUQn.jpg?s=128&g=1", "display_name": "Ezequiel Barbosa", "link": "https://stackoverflow.com/users/4806007/ezequiel-barbosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "accepted_answer_id": 30495012, "answer_count": 1, "score": -2, "last_activity_date": 1432771106, "creation_date": 1432770030, "last_edit_date": 1432771106, "question_id": 30494922, "link": "https://stackoverflow.com/questions/30494922/how-do-i-manipulate-the-digits-of-a-number", "title": "How do I manipulate the digits of a number?", "body": "<p>In some kinds of problems I often face this situation where I have a variable where I need to rearrange the digits, e.g., <code>int e = 2385;</code>. Let's suppose I don't know which number is stored there, but still I need to shift 2nd and 4th position. When I know variable's value I can simply do <code>e = 2583</code>, but when I don't know I simply can't solve the problem.</p>\n\n<p>Another situation is when I have two values and want to use them to form another number i.e <code>int a = 2, b = 1;</code>, and I need to order them so that I will get a 21 or a 212. I mean, that's easy to do when I'm outputting data, I can simply do:</p>\n\n<pre><code>printf(\"%d%d\\n\",a,b); \nprintf(\"%d%d%d\",a,b,a);\n</code></pre>\n\n<p>Problem is when I have to store this number in another variable. I don't know how to do that.</p>\n"}, {"tags": ["c", "debugging", "gdb"], "answers": [{"comments": [{"owner": {"reputation": 826, "user_id": 1413779, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/25f8755083b4a5f333a64d0c65947398?s=128&d=identicon&r=PG", "display_name": "Phildo", "link": "https://stackoverflow.com/users/1413779/phildo"}, "edited": false, "score": 4, "creation_date": 1432829500, "post_id": 30503660, "comment_id": 49099036, "body": "Wonderful! Thanks!  And for those wondering, you can put defines in .gdbinit line separated without the prompts as you&#39;d expect."}], "tags": [], "owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "is_accepted": true, "score": 7, "last_activity_date": 1432808220, "creation_date": 1432808220, "answer_id": 30503660, "question_id": 30494918, "link": "https://stackoverflow.com/questions/30494918/gdb-alias-for-quick-saving-loading-of-breakpoints/30503660#30503660", "title": "gdb alias for quick saving/loading of breakpoints", "body": "<blockquote>\n  <p>Can GDB have filenames in aliases?</p>\n</blockquote>\n\n<p>Looks like no. It looks like aliases can't have any arguments to commands, not only filenames. This alias fails also:</p>\n\n<pre><code>(gdb) alias spe = set print elements 0\nInvalid command to alias to: set print elements 0\n</code></pre>\n\n<blockquote>\n  <p>Or am I looking for something other than an 'alias'?</p>\n</blockquote>\n\n<p>Yes, you can use <a href=\"https://sourceware.org/gdb/onlinedocs/gdb/Define.html\" rel=\"noreferrer\">user-defined command</a> instead:</p>\n\n<pre><code>(gdb) define savebps\nType commands for definition of \"savebps\".\nEnd with a line saying just \"end\".\n&gt;save breakpoints .gdb_bps\n&gt;end\n(gdb) \n(gdb) define loadbps\nType commands for definition of \"loadbps\".\nEnd with a line saying just \"end\".\n&gt;source .gdb_bps\n&gt;end\n(gdb) \n</code></pre>\n"}], "owner": {"reputation": 826, "user_id": 1413779, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/25f8755083b4a5f333a64d0c65947398?s=128&d=identicon&r=PG", "display_name": "Phildo", "link": "https://stackoverflow.com/users/1413779/phildo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1520, "favorite_count": 0, "accepted_answer_id": 30503660, "answer_count": 1, "score": 4, "last_activity_date": 1432808220, "creation_date": 1432769995, "question_id": 30494918, "link": "https://stackoverflow.com/questions/30494918/gdb-alias-for-quick-saving-loading-of-breakpoints", "title": "gdb alias for quick saving/loading of breakpoints", "body": "<p>So I'm pretty new to gdb, and have just learned that you can save breakpoints with:</p>\n\n<pre><code>save breakpoints filename\n</code></pre>\n\n<p>and load them with</p>\n\n<pre><code>source filename\n</code></pre>\n\n<p>which is great, but because it's something I more or less plan on doing every time I enter/exit gdb, I'd like to get it down to a quick alias.</p>\n\n<p>So, in my ~/.gdbinit I have the lines</p>\n\n<pre><code>alias savebps = save breakpoints .gdb_bps\nalias loadbps = source .gdb_bps\nloadbps\n</code></pre>\n\n<p>Unfortunately, every time I open gdb I get the error:</p>\n\n<pre><code>Invalid command to alias to: save breakpoints .gdb_bps\n</code></pre>\n\n<p>I know(/ strongly think) I have the syntax correct, as I've tested</p>\n\n<pre><code>alias savebps = help\n</code></pre>\n\n<p>and that alias works. So I think it's an issue with having a non-gdb command word (the filename) as part of an alias. </p>\n\n<p>So, my questions are this:</p>\n\n<ul>\n<li>Am I being totally stupid and there's already a great way to auto-save and maintain my list of breakpoints?</li>\n<li>Can GDB have filenames in aliases? Or am I looking for something other than an 'alias'?</li>\n<li>If they CAN have filenames in them, what am I doing wrong?</li>\n</ul>\n\n<p>Oh and as a note the '.gdb_bps' is an arbitrary file name I just kinda came up with as it'd be a nice unobtrusive thing to easily .gitignore and stuff.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "floating-point", "constants"], "comments": [{"owner": {"reputation": 4061, "user_id": 1775715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vzyZN.png?s=128&g=1", "display_name": "ShellFish", "link": "https://stackoverflow.com/users/1775715/shellfish"}, "edited": false, "score": 0, "creation_date": 1432770295, "post_id": 30494894, "comment_id": 49067449, "body": "Perhaps include the error in your post, so people can more easily help you out. I&#39;m not that familiar with <code>c</code> but I guess the problem is that <code>a*a*a</code> is not a constant expression. Perhaps try to make <code>a</code> a const value. Otherwise you&#39;ll have to define the content of volume in the <code>.c</code> file."}, {"owner": {"reputation": 3, "user_id": 4942783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KL2p0.jpg?s=128&g=1", "display_name": "AlucardVP22", "link": "https://stackoverflow.com/users/4942783/alucardvp22"}, "reply_to_user": {"reputation": 4061, "user_id": 1775715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vzyZN.png?s=128&g=1", "display_name": "ShellFish", "link": "https://stackoverflow.com/users/1775715/shellfish"}, "edited": false, "score": 0, "creation_date": 1432770619, "post_id": 30494894, "comment_id": 49067537, "body": "&quot;(a<i>a</i>a)&quot; is just a simple multiplication problem and its not involved in the problem . I know this because when i take out that  portion from the .h file and put it into the actual code(.c file) It runs perfectly"}, {"owner": {"reputation": 3, "user_id": 4942783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KL2p0.jpg?s=128&g=1", "display_name": "AlucardVP22", "link": "https://stackoverflow.com/users/4942783/alucardvp22"}, "reply_to_user": {"reputation": 4061, "user_id": 1775715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vzyZN.png?s=128&g=1", "display_name": "ShellFish", "link": "https://stackoverflow.com/users/1775715/shellfish"}, "edited": false, "score": 0, "creation_date": 1432770891, "post_id": 30494894, "comment_id": 49067598, "body": "but its easier to have all formulas in one .h file so I don&#39;t have to rewrite everything again"}, {"owner": {"reputation": 4061, "user_id": 1775715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vzyZN.png?s=128&g=1", "display_name": "ShellFish", "link": "https://stackoverflow.com/users/1775715/shellfish"}, "edited": false, "score": 0, "creation_date": 1432771166, "post_id": 30494894, "comment_id": 49067674, "body": "Try and declare <code>a</code> const, which doesn&#39;t make much sense since it hasn&#39;t been set."}], "answers": [{"comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1432770239, "post_id": 30494925, "comment_id": 49067434, "body": "Would it make a difference if <code>a</code> was declared <code>const</code>, though?"}, {"owner": {"reputation": 3, "user_id": 4942783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KL2p0.jpg?s=128&g=1", "display_name": "AlucardVP22", "link": "https://stackoverflow.com/users/4942783/alucardvp22"}, "edited": false, "score": 0, "creation_date": 1432770321, "post_id": 30494925, "comment_id": 49067459, "body": "@Eric J. it doesn&#39;t make a difference if i take out the &quot;const&quot; , I had it without the const before the float and it gives me the same error"}], "tags": [], "owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1432770053, "creation_date": 1432770053, "answer_id": 30494925, "question_id": 30494894, "link": "https://stackoverflow.com/questions/30494894/error-initializer-element-is-not-constant-c-language/30494925#30494925", "title": "Error: Initializer Element is not constant (c language)", "body": "<p>The message</p>\n\n<blockquote>\n  <p>Error: Initializer Element is not constant</p>\n</blockquote>\n\n<p>pretty much says it all</p>\n\n<pre><code>float a;\n</code></pre>\n\n<p>is not declared as a constant (it can change as the program runs), so</p>\n\n<pre><code>const float volume_cube=(a*a*a);\n</code></pre>\n\n<p>cannot be a constant, as it is based on the non-constant <code>a</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 4942783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KL2p0.jpg?s=128&g=1", "display_name": "AlucardVP22", "link": "https://stackoverflow.com/users/4942783/alucardvp22"}, "edited": false, "score": 0, "creation_date": 1432771336, "post_id": 30494992, "comment_id": 49067713, "body": "okay but in my case i want the user to input the value of a and multiply it by the value of 3 and that&#39;s why I put a<i>a</i>a .Will that still work?because it works fine in the actual .c file"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 3, "user_id": 4942783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KL2p0.jpg?s=128&g=1", "display_name": "AlucardVP22", "link": "https://stackoverflow.com/users/4942783/alucardvp22"}, "edited": false, "score": 0, "creation_date": 1432771383, "post_id": 30494992, "comment_id": 49067725, "body": "@AlucardVP22: That has nothing to do with anything. You can always <i>change</i> the value of a global variable later. We are <i>only</i> talking about the initializer here."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 3, "user_id": 4942783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KL2p0.jpg?s=128&g=1", "display_name": "AlucardVP22", "link": "https://stackoverflow.com/users/4942783/alucardvp22"}, "edited": false, "score": 0, "creation_date": 1432771498, "post_id": 30494992, "comment_id": 49067749, "body": "@AlucardVP22: You may be confused about how C works. C is imperative, not declarative. You execute statements. You <i>don&#39;t</i> once and forever declare <code>c</code> to be the value of <code>a * a * a</code> and have the value of <code>c</code> change as <code>a</code> changes (like an Excel formula). That&#39;s what <i>functions</i> are for: <code>float volume(float length) { return length * length * length; }</code>"}, {"owner": {"reputation": 3, "user_id": 4942783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KL2p0.jpg?s=128&g=1", "display_name": "AlucardVP22", "link": "https://stackoverflow.com/users/4942783/alucardvp22"}, "edited": false, "score": 0, "creation_date": 1432771992, "post_id": 30494992, "comment_id": 49067881, "body": "Thanks for letting me know. And also i want to ask how come when I put the code in .c file works and in the .h file does not"}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 3, "last_activity_date": 1432770830, "last_edit_date": 1432770830, "creation_date": 1432770527, "answer_id": 30494992, "question_id": 30494894, "link": "https://stackoverflow.com/questions/30494894/error-initializer-element-is-not-constant-c-language/30494992#30494992", "title": "Error: Initializer Element is not constant (c language)", "body": "<p>Global variables in C can only be initialized with <em>compile-time constant expressions</em>, and that is a very narrow class of expressions. It essentially only comprises literals or expressions involving literals:</p>\n\n<pre><code>float a1 = 1.5;                   // OK\nconst float a2 = 2.5 * 10 / 300;  // Also OK\n</code></pre>\n\n<p>An expression that identifies another global variable is not a compile-time constant expression:</p>\n\n<pre><code>// float a3 = a2;                 // Error!\n</code></pre>\n\n<p>C is just not expressive enough for this. This is all for the sake of simplicity. For example, C does not distinguish between <code>const float b1 = 2.5;</code> and <code>extern const float b2;</code>. The variable <code>b1</code> is no \"more const\" than <code>b2</code>, but only <code>b1</code>'s value is known to the compiler, whereas <code>b2</code>'s value is not known &mdash; it may be set only by a different translation unit, and without any ordering. So there's no way to make one constant \"more constant\" than the other. The simple solution in C is that <em>no</em> id-expression can be used as a compile-time constant.</p>\n\n<p>(C++, by contrast, allows global variables to have dynamic initializers. This introduces a whole set of ordering concerns if one global variable's initializer depends on another global variable. C has none of those problems.)</p>\n"}], "owner": {"reputation": 3, "user_id": 4942783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KL2p0.jpg?s=128&g=1", "display_name": "AlucardVP22", "link": "https://stackoverflow.com/users/4942783/alucardvp22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1258, "favorite_count": 0, "accepted_answer_id": 30494992, "answer_count": 2, "score": -1, "last_activity_date": 1432770830, "creation_date": 1432769837, "question_id": 30494894, "link": "https://stackoverflow.com/questions/30494894/error-initializer-element-is-not-constant-c-language", "title": "Error: Initializer Element is not constant (c language)", "body": "<p>This is a .h file to store formulas but it gives me the ERROR you see at the tittle on line #16(below the string). I'm a beginner and the error says is not constant so I though of putting \"const\" before the \"float\" but it doesn't work either way.</p>\n\n<pre><code>#ifndef FORMULAS_H_INCLUDED\n#define FORMULAS_H_INCLUDED\n\nfloat a;\nfloat Pi=3.1415926536;\nfloat r;\nfloat b;\nfloat c;\nfloat h;\n\n\n\n\nchar formula_volume_cube[100] = \"Formula for the Volume of a Cube: V=a*a*a\";\nconst float volume_cube=(a*a*a);\n\n\n\n#endif // FORMULAS_H_INCLUDED\n</code></pre>\n\n<p>Any help will be appreciated. THANK you for YOUR time.</p>\n"}, {"tags": ["c", "lint", "iar", "pc-lint"], "answers": [{"tags": [], "owner": {"reputation": 1133, "user_id": 2344440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A27lB.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/2344440/nick"}, "is_accepted": true, "score": 0, "last_activity_date": 1433355752, "creation_date": 1433355752, "answer_id": 30627792, "question_id": 30494826, "link": "https://stackoverflow.com/questions/30494826/iar-ewarm-pc-lint-inhibiting-messages-from-a-header-included-with-the-header-op/30627792#30627792", "title": "IAR EWARM PC-LINT Inhibiting messages from a header included with the -header option", "body": "<p>All of these messages were being explicitly turned on using the +elib() argument in the au-misra3.lnt file. That is why they were not being enabled by default. </p>\n\n<p>Also, it did not work when I used -elib() to suppress them because when I included the au-misra3.lnt file they were reenabled.</p>\n\n<p>So the answer is, include the au-misra3.lnt file and then manually suppress all of the messages I don't care to see about library files because that's more transparent then modifying the file that ships with lint or supplying my own file for MISRA.</p>\n"}], "owner": {"reputation": 1133, "user_id": 2344440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A27lB.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/2344440/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 0, "accepted_answer_id": 30627792, "answer_count": 1, "score": 0, "last_activity_date": 1433355752, "creation_date": 1432769378, "last_edit_date": 1432769986, "question_id": 30494826, "link": "https://stackoverflow.com/questions/30494826/iar-ewarm-pc-lint-inhibiting-messages-from-a-header-included-with-the-header-op", "title": "IAR EWARM PC-LINT Inhibiting messages from a header included with the -header option", "body": "<p>I am using IAR EWARM 7.4</p>\n\n<p>I have followed the instructions here: <a href=\"http://www.safetycritical.info/library/static/pc-lint/ewb-pclint-v2.pdf\" rel=\"nofollow\">http://www.safetycritical.info/library/static/pc-lint/ewb-pclint-v2.pdf</a></p>\n\n<p>I have created a header full of compiler definitions using the --predef_macros compiler option</p>\n\n<pre><code>--predef_macros C:\\lint\\lnt\\iar-ewarm-predefined_macros_for_PC-lint.h\n</code></pre>\n\n<p>In iar-co-arm-v6.lnt I've added the following:</p>\n\n<pre><code>//\n//    EWARM extended defines\n//\n-header(C:/lint/lnt/iar-ewarm-predefined_macros_for_PC-lint.h)\n</code></pre>\n\n<p>Lint it gryping about a ton of MISRA violations from within that file. </p>\n\n<p>Edit:\nI tried adding the line </p>\n\n<pre><code>+libh(C:/lint/lnt/iar-ewarm-predefined_macros_for_PC-lint.h)\n</code></pre>\n\n<p>This cuts down on many of many of the MISRA violations, but I am still getting a few, e.g:</p>\n\n<pre><code>#define __CODE_MEMORY_LIST1__() __CODE_MEM_HELPER1__(__code, 0)\n        ^\n\"LINT: C:\\lint\\lnt\\iar-ewarm-predefined_macros_for_PC-lint.h (150, 9) Note 9026: Function-like macro, '__CODE_MEMORY_LIST1__', defined [MISRA 2012 \nDirective 4.9, advisory]\"\n\n#define __CODE_MEMORY_LIST2__(_P1) __CODE_MEM_HELPER2__(__code, 0, _P1)\n        ^\n\"LINT: C:\\lint\\lnt\\iar-ewarm-predefined_macros_for_PC-lint.h (151, 9) Note 9026: Function-like macro, '__CODE_MEMORY_LIST2__', defined [MISRA 2012 \nDirective 4.9, advisory]\"\n</code></pre>\n"}, {"tags": ["c", "ssl", "encryption", "hash", "openssl"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1432768938, "post_id": 30494684, "comment_id": 49067039, "body": "Related, <code>Ek(file || H(file))</code> is known to be defective. See <a href=\"https://groups.google.com/forum/#!topic/sci.crypt/xsUyn3eT5PQ\" rel=\"nofollow noreferrer\">Message Confidentiality and Integrity - Prepend Hash versus Append Hash</a>. That&#39;s the method specified in Handbook of Applied Cryptography, section 9.6, but we have a better understanding now. Instead, you should use an authenticated encryption mode, like EAX, CCM or GCM. For that, see <a href=\"https://wiki.openssl.org/index.php/EVP_Authenticated_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">EVP Authenticated Encryption and Decryption</a>."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1432769276, "post_id": 30494684, "comment_id": 49067152, "body": "Related, that &quot;one pass&quot; you are looking for is patented by Rogaway. Its built into <a href=\"http://web.cs.ucdavis.edu/~rogaway/ocb/\" rel=\"nofollow noreferrer\">OCB mode</a>. Nearly everything else uses &quot;two pass&quot; to avoid the patent. Fortunately, Rogaway is very liberal on his licensing of the patent. I think he&#39;s <a href=\"http://web.cs.ucdavis.edu/~rogaway/ocb/license.htm\" rel=\"nofollow noreferrer\">given it to SSL/TLS royalty free, and related projects like OpenSSL, GnuTLS, etc</a>. I think the only restriction he places is non-military."}, {"owner": {"reputation": 72, "user_id": 2124310, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4a3a88306c7fab9c6835604c27802d62?s=128&d=identicon&r=PG", "display_name": "LuigiDB", "link": "https://stackoverflow.com/users/2124310/luigidb"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1432769761, "post_id": 30494684, "comment_id": 49067309, "body": "Thanks for all the information.  I surely remember that.  But in this case I need to implement a specific protocol that I have build,  it&#39;s not strictly necessary for me to do encryption and hashing in one pass but this way is much more efficient so I don&#39;t think I&#39;m violating some patent."}], "owner": {"reputation": 72, "user_id": 2124310, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4a3a88306c7fab9c6835604c27802d62?s=128&d=identicon&r=PG", "display_name": "LuigiDB", "link": "https://stackoverflow.com/users/2124310/luigidb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 10, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432787350, "creation_date": 1432768432, "last_edit_date": 1432787350, "question_id": 30494684, "link": "https://stackoverflow.com/questions/30494684/create-and-send-ekfile-hfile-in-one-passage", "title": "create and send Ek(file || H(file)) in one passage", "body": "<p>I want to send through a socket a message encrypted in symmetric way with his hash.\nIf possible i want to do all with only one read on the file to be more efficient and sending data when they are ready.\nI make this but i can't figure out why doesn't work:</p>\n\n<pre><code>    void symmetric_encrypt_send(SSL* connection, char* file_name, unsigned char* key, int key_len){\n\n        //generic\n        int ret;\n        unsigned char buffer[DIM_BUFFER];\n        FILE* fd;\n        int readed_byte;\n\n        //encrypt\n        EVP_CIPHER_CTX* ctx;\n        unsigned char ciphertex[DIM_BUFFER];\n        int outlen = 0;\n\n        //hash\n        EVP_MD_CTX sha_ctx;\n        unsigned int digest_size = 32;\n        unsigned char hash[digest_size];\n\n        //open file\n        fd = fopen(file_name, \"r\");\n        if(fd == NULL){\n            printf(\"Impossible to open %s file\\n\", file_name);\n            exit(EXIT_FAILURE);\n        }\n\n        //encrypt initialization\n        ctx = (EVP_CIPHER_CTX*)malloc(sizeof(EVP_CIPHER_CTX));  \n        EVP_CIPHER_CTX_init(ctx);\n        EVP_EncryptInit(ctx, SYM_CIPHER, key, NULL);\n\n        //hash initialization\n        EVP_MD_CTX_init(&amp;sha_ctx);\n        EVP_DigestInit(&amp;sha_ctx, EVP_sha256());\n\n        //send dimension\n        struct stat st;\n        stat(file_name, &amp;st); // file size = st.st_size\n        int tmp = ((st.st_size + digest_size)/ EVP_CIPHER_block_size(SYM_CIPHER)) + 1;\n        ret = secure_write(0, &amp;tmp, sizeof(int), connection); \n        check_ret(ret, sizeof(int));\n\n        //read until end of file\n        //for each read update encrypt and hash\n        while( 1 ){\n\n            readed_byte = fread(buffer, sizeof(char), DIM_BUFFER, fd);\n            if(readed_byte == -1){\n                printf(\"Error\");\n                exit(EXIT_FAILURE);\n            }\n\n            if(readed_byte == 0){   //nel caso in cui la dimensione del file \u00e8 multipla di dim_buffer\n                break;\n            }\n\n            //Encrypt Update\n            EVP_EncryptUpdate(ctx, ciphertex, &amp;outlen, buffer, readed_byte);\n\n            //hash update\n            EVP_DigestUpdate(&amp;sha_ctx, buffer, readed_byte);\n\n            //send encrypted data at this step\n            printf(\"testo inviato: %.*s\\n\", outlen, ciphertex);\n            ret = secure_write(0, ciphertex, outlen, connection); \n            check_ret(ret, outlen);\n\n            if(readed_byte != DIM_BUFFER){\n                break;\n            }\n        }\n\n        //hashfinal; also clear ctx\n        EVP_DigestFinal(&amp;sha_ctx, hash, &amp;digest_size);\n\n\n        //encrypt update the hash\n        EVP_EncryptUpdate(ctx, ciphertex, &amp;outlen, hash, digest_size);\n        ret = secure_write(0, ciphertex, outlen, connection); \n        check_ret(ret, outlen);\n\n        //EVP_EncryptFinal(); also close ctx so no need for EVP_CIPHER_CTX_cleanup(ctx);\n        ret = EVP_EncryptFinal(ctx, ciphertex, &amp;outlen);\n        if(ret == 0)\n            exit(EXIT_FAILURE);\n        ret = secure_write(0, ciphertex, outlen, connection); \n        check_ret(ret, outlen);\n\n        //close\n        free(ctx);\n        fclose(fd);\n    }\n</code></pre>\n\n<p>where </p>\n\n<pre><code>    #define DIM_BUFFER 1024\n    int secure_read(int fd, void* buffer, int count, SSL* sock);\n    int secure_write(int fd, void* buffer, int count, SSL* sock);\n</code></pre>\n"}, {"tags": ["python", "c", "templates", "code-generation"], "comments": [{"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1432768875, "post_id": 30494547, "comment_id": 49067019, "body": "Why not enlist cpp to do it?"}, {"owner": {"reputation": 6875, "user_id": 2002452, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3c2349a8ccc58b9d485eff0095025ae5?s=128&d=identicon&r=PG", "display_name": "michaelmeyer", "link": "https://stackoverflow.com/users/2002452/michaelmeyer"}, "edited": false, "score": 1, "creation_date": 1432770510, "post_id": 30494547, "comment_id": 49067512, "body": "There is Cog in Python (<a href=\"http://nedbatchelder.com/code/cog/\" rel=\"nofollow noreferrer\">nedbatchelder.com/code/cog</a>). But why not generate a file that you then would <code>#include</code> into your main code?"}, {"owner": {"reputation": 18035, "user_id": 1828289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/S6fiE.png?s=128&g=1", "display_name": "Alex I", "link": "https://stackoverflow.com/users/1828289/alex-i"}, "reply_to_user": {"reputation": 6875, "user_id": 2002452, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3c2349a8ccc58b9d485eff0095025ae5?s=128&d=identicon&r=PG", "display_name": "michaelmeyer", "link": "https://stackoverflow.com/users/2002452/michaelmeyer"}, "edited": false, "score": 1, "creation_date": 1432772781, "post_id": 30494547, "comment_id": 49068077, "body": "@michaelmeyer: Cog sounds very close to what I was looking for.  Post as an answer?  as for #include, I guess it depends on how many code snippets there are :)  I wanted the result to be a single C file that can be read straight through, partly for maintainability and partly for aesthetics."}, {"owner": {"reputation": 18035, "user_id": 1828289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/S6fiE.png?s=128&g=1", "display_name": "Alex I", "link": "https://stackoverflow.com/users/1828289/alex-i"}, "reply_to_user": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1432772840, "post_id": 30494547, "comment_id": 49068082, "body": "@IgnacioVazquez-Abrams: how would you use cpp?  #define stuff in one place and then let it be expanded in another place?  #include?"}, {"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1432772941, "post_id": 30494547, "comment_id": 49068105, "body": "I&#39;d have Python generate C code containing defines and invoke cpp with it prepended."}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1432792511, "post_id": 30494547, "comment_id": 49073248, "body": "@Alex: if the &quot;some code&quot; contains preprocessor directives, the #define scheme doesn&#39;t work."}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1432792648, "post_id": 30494547, "comment_id": 49073313, "body": "@Alex:  why is this hard to implement yourself?  Slurp in the C source file as  string.  Implement your function by finding your markers with a string search. Hack in the replacement string. Write the file content. This should be 10-20 lines of code."}], "owner": {"reputation": 18035, "user_id": 1828289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/S6fiE.png?s=128&g=1", "display_name": "Alex I", "link": "https://stackoverflow.com/users/1828289/alex-i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1878, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1432791300, "creation_date": 1432767606, "question_id": 30494547, "link": "https://stackoverflow.com/questions/30494547/generating-c-code-from-script-how-to-template", "title": "Generating C code from script: how to template?", "body": "<p>I'm looking for a way to insert some auto-generated code into C source files.  The code generation is in python and that's not a problem, the trick is how to replace/update blocks of code in existing C code with the generated code.  I'm looking for a templating library which is compatible with C syntax (the templating statements can be hidden in comments), and in which the template and expanded template can be one and the same thing.  </p>\n\n<p>Example C file with code to be updated:</p>\n\n<pre><code>// start generated block (blockname)\n... some code here\n// end generated block (blockname)\n</code></pre>\n\n<p>Example python pseudo code:</p>\n\n<pre><code>replace_code_in_c_file(filename, blockname, new_code)\n</code></pre>\n\n<p>After running this the // comments stay in place but the code block would be replaced with the new code.</p>\n"}, {"tags": ["c", "recursion", "data-structures", "binary-tree", "realloc"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1432767603, "post_id": 30494524, "comment_id": 49066641, "body": "&#39;I&#39;ll explain a little more where I think the problem comes from&#39; - does your debugger support this?"}, {"owner": {"reputation": 900, "user_id": 4786728, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/DXg4w.jpg?s=128&g=1", "display_name": "Michael Heidelberg", "link": "https://stackoverflow.com/users/4786728/michael-heidelberg"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1432767682, "post_id": 30494524, "comment_id": 49066666, "body": "I don&#39;t use a debugger, I&#39;m a C beginner. and I didn&#39;t learn how to debug."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1432767817, "post_id": 30494524, "comment_id": 49066707, "body": "Good time to learn wouldn&#39;t you think? What would you say to a carpenter that said I&#39;m a beginner carpenter, I didn&#39;t learn how to use a hammer?"}, {"owner": {"reputation": 900, "user_id": 4786728, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/DXg4w.jpg?s=128&g=1", "display_name": "Michael Heidelberg", "link": "https://stackoverflow.com/users/4786728/michael-heidelberg"}, "edited": false, "score": 0, "creation_date": 1432767967, "post_id": 30494524, "comment_id": 49066755, "body": "I think so ^^ ; I&#39;ll invest the next months to learn new things ."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1432768006, "post_id": 30494524, "comment_id": 49066768, "body": "Consider what value for <code>table</code> you&#39;re passing down each recursed call of the <i>left</i> side. Now consider what value <code>table</code> <i>still has</i> when you back out a left-recursed call and proceed down the <i>right</i> side. If the traversal down a left path performs a <code>realloc</code>, how does the <i>caller</i> know that ? In short, <code>table = ...anything...</code> is not conveyed up the call-stack."}, {"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 1, "creation_date": 1432768133, "post_id": 30494524, "comment_id": 49066807, "body": "time spent learning how to use the debugger will not be wasted..."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1432769170, "post_id": 30494524, "comment_id": 49067112, "body": "Beginners need debugging skills even more than experienced developers.  If you cannot debug, you shoud not try and develop software because you don&#39;t have a requisite skill."}, {"owner": {"reputation": 900, "user_id": 4786728, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/DXg4w.jpg?s=128&g=1", "display_name": "Michael Heidelberg", "link": "https://stackoverflow.com/users/4786728/michael-heidelberg"}, "edited": false, "score": 0, "creation_date": 1432769816, "post_id": 30494524, "comment_id": 49067335, "body": "I don&#39;t develop a software it&#39;s just an exercise o_o ; I have already the solution , but I don&#39;t to know why my own code doesn&#39;t work"}], "answers": [{"tags": [], "owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "is_accepted": true, "score": 3, "last_activity_date": 1432768116, "last_edit_date": 1495542112, "creation_date": 1432767815, "answer_id": 30494579, "question_id": 30494524, "link": "https://stackoverflow.com/questions/30494524/my-program-just-crushes-using-realloc-in-recursive-function/30494579#30494579", "title": "my program just crushes, using realloc() in recursive function", "body": "<p>Here is the thing about <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/realloc.html\" rel=\"nofollow noreferrer\">realloc</a>: it has the freedom to change not just the size of the allocated memory block, but also its location.  In general, realloc can break any pointers you have that are pointing to objects in the block of memory that was realloced.  When you try to use those pointers later, you will get undefined behavior.</p>\n\n<p>You should either allocate enough memory at the beginning of your program that you won't need to call realloc, or you should redesign your program so you don't need to allocate that memory block in the first place, or you should make your <code>table</code> pointer be a global variable so that when you change its value, it gets updated for every function that is using the table.</p>\n\n<p>Right now the problem with your code is that when you call <code>helper</code>, it might call realloc and change the location of your table, but it doesn't communicate that change to the caller in any way, so the caller doesn't know where the table is located.</p>\n\n<p>There might be other problems with your code.  If you continue to have trouble, I strongly urge you to produce an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> and post that in your next question.  Doing that makes it much easier for someone else to reproduce your problem and find a solution to it that actually works.</p>\n"}, {"tags": [], "owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "is_accepted": false, "score": 1, "last_activity_date": 1432767983, "creation_date": 1432767983, "answer_id": 30494602, "question_id": 30494524, "link": "https://stackoverflow.com/questions/30494524/my-program-just-crushes-using-realloc-in-recursive-function/30494602#30494602", "title": "my program just crushes, using realloc() in recursive function", "body": "<p>It's hard to tell <em>exactly</em> what going on because it quite a big mess, but generally... The first thing <code>helper()</code> does (after validating <code>node!=NULL</code>) is reallocate <code>table</code>. That means when you get to the recursion point, <code>helper(node-&gt;left..</code> will reallocate, and then immediately after <code>helper(node-&gt;right..</code> will also try to do so, but on an invalid pointer. From there on, it's a wild ride to exceptions...</p>\n"}], "owner": {"reputation": 900, "user_id": 4786728, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/DXg4w.jpg?s=128&g=1", "display_name": "Michael Heidelberg", "link": "https://stackoverflow.com/users/4786728/michael-heidelberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 30494579, "answer_count": 2, "score": -2, "last_activity_date": 1432768116, "creation_date": 1432767523, "last_edit_date": 1432767825, "question_id": 30494524, "link": "https://stackoverflow.com/questions/30494524/my-program-just-crushes-using-realloc-in-recursive-function", "title": "my program just crushes, using realloc() in recursive function", "body": "<p>I have a problem with this code, I tried to understand what's going on, but I cannot understand why it just crushes. the functions works like I expect for the node->left.</p>\n\n<p>But when the last call of the function ends in the case node->left; the function just crushes, I think because of the reallocated array, I don't know if I'm trying to access a forbidden memory.</p>\n\n<p>I'll explain a little more where I think the problem comes from:we are in the last call of helper(node->left,table,len) before printing the array : consider len = N and node->left!=NULL ==> reallocating table len = N+1, assigning node->data to table[len] and everything is fine, node->left == NULL ==> printing the table and we are done with the helper(node->left,table,N) case; now we are in the helper(node->right,table,N) case; in this case the program just crushes ; it's supposed to reallocate table; and assign node->data to table[N]; and so one ... </p>\n\n<p>By the way : this function tries to print all the Root-leaf paths in a binary tree.</p>\n\n<pre><code>struct node {\n    int data;\n    struct node* left;\n    struct node* right;\n};\n\nvoid helper(struct node* node,int *table,int len)\n{\n    if(node == NULL){\n        return;\n    }\n    else{\n        table = realloc(table,(len+1)*sizeof(int));\n        table[len]=node-&gt;data;\n        len = len +1;\n        if(node-&gt;left == NULL &amp;&amp; node-&gt;right == NULL)\n        {\n            int cmt=0;\n            for(cmt = 0; cmt &lt; len ; cmt++ ){\n                    printf(\"%d -&gt;\",table[cmt]);\n                }    \n        }\n        else{\n            helper(node-&gt;left,table,len);\n            helper(node-&gt;right,table,len);\n        }    \n    }\n}\n\n\nvoid print_rtl(struct node* node) {\n    if(NULL == node) return;\n    else{\n        int *t=malloc(sizeof(int));\n        t[0]=node-&gt;data;\n        int lenght = 1;\n        helper(node-&gt;left,t,1);\n        helper(node-&gt;right,t,1);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "kernighan-and-ritchie"], "comments": [{"owner": {"reputation": 4912, "user_id": 1953533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Vs4v8.jpg?s=128&g=1", "display_name": "CroCo", "link": "https://stackoverflow.com/users/1953533/croco"}, "edited": false, "score": 0, "creation_date": 1432767532, "post_id": 30494501, "comment_id": 49066614, "body": "How this even compiled? The size of the array is uninitialized."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4544078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcdb7b4e4632074c1b4ea65f1642e4de?s=128&d=identicon&r=PG&f=1", "display_name": "Xochozomatli", "link": "https://stackoverflow.com/users/4544078/xochozomatli"}, "edited": false, "score": 0, "creation_date": 1432768215, "post_id": 30494519, "comment_id": 49066826, "body": "ok, so I initialized length[max] after the loop that defines max and it works perfectly. Does that imply that after 6 characters the program was trying to eat into some memory that it wasn&#39;t allowed or what?"}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "reply_to_user": {"reputation": 13, "user_id": 4544078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcdb7b4e4632074c1b4ea65f1642e4de?s=128&d=identicon&r=PG&f=1", "display_name": "Xochozomatli", "link": "https://stackoverflow.com/users/4544078/xochozomatli"}, "edited": false, "score": 0, "creation_date": 1432768265, "post_id": 30494519, "comment_id": 49066844, "body": "@Fittesbane - I guess, but it&#39;s always hard to tell when you have buffer overruns."}], "tags": [], "owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "is_accepted": true, "score": 3, "last_activity_date": 1432767493, "creation_date": 1432767493, "answer_id": 30494519, "question_id": 30494501, "link": "https://stackoverflow.com/questions/30494501/c-program-freezes-for-word-lengths-greater-than-6/30494519#30494519", "title": "C program freezes for word lengths greater than 6", "body": "<p><code>max</code> is uninitialized when <code>length[max]</code> is defined. Essentially, you're using unallocated memory.</p>\n"}], "owner": {"reputation": 13, "user_id": 4544078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcdb7b4e4632074c1b4ea65f1642e4de?s=128&d=identicon&r=PG&f=1", "display_name": "Xochozomatli", "link": "https://stackoverflow.com/users/4544078/xochozomatli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 30494519, "answer_count": 1, "score": 0, "last_activity_date": 1432767493, "creation_date": 1432767382, "question_id": 30494501, "link": "https://stackoverflow.com/questions/30494501/c-program-freezes-for-word-lengths-greater-than-6", "title": "C program freezes for word lengths greater than 6", "body": "<p>I'm working through the first chapter of K&amp;R and came to the exercise where you're supposed to create a histogram of word lengths for some input. I started by trying to use a while loop to create an array of zeros as long as the longest word, but inputs with words longer than six characters cause the program to freeze. I'm less interested in just a solution than I am in knowing the cause.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain()\n{\nint c, i, l, max;\nint length[max];\n\nl = max = 0;\n\n    while((c = getchar()) != EOF){\n        if(c != ' ' &amp;&amp; c != '\\t' &amp;&amp; c != '\\n'){\n            ++l;\n            if(l &gt; max)\n               max = l;\n             else\n                 ;\n             }\n        else\n            l = 0;\n        }\n    for(i = 0; i &lt; max; ++i)\n        length[i] = 0;\n\n    for(i = 0; i &lt; max; ++i)    \n        printf(\"\\n%d\", length[i]);\n        putchar('\\n');\n}\n</code></pre>\n"}, {"tags": ["c", "input", "decimal", "limit", "point"], "comments": [{"owner": {"reputation": 1632, "user_id": 4178025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159c588df64aaa5d1b2c96c1461e85cf?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4178025/diego"}, "edited": false, "score": 1, "creation_date": 1432766900, "post_id": 30494336, "comment_id": 49066426, "body": "use <code>getline</code> and parse the string yourself?"}, {"owner": {"reputation": 11081, "user_id": 2161954, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccdcef378f17549482325c2051c4048?s=128&d=identicon&r=PG", "display_name": "SnakeDoc", "link": "https://stackoverflow.com/users/2161954/snakedoc"}, "edited": false, "score": 0, "creation_date": 1432766980, "post_id": 30494336, "comment_id": 49066452, "body": "<code>atof</code> function will probably be useful"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1432767139, "post_id": 30494409, "comment_id": 49066503, "body": "It might be possible instead to do <code>scanf</code>, then <code>strtod</code>, then <code>sprintf</code> with a 1d.p. format string, then <code>strcmp</code> with the original input ... however I think that would be less reliable, there might be various corner cases where it doesn&#39;t work"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432779419, "post_id": 30494409, "comment_id": 49069503, "body": "Agree about corner cases.  e.g.: <code>float</code> like 123456789012345.0`, would not compare."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1432766892, "creation_date": 1432766892, "answer_id": 30494409, "question_id": 30494336, "link": "https://stackoverflow.com/questions/30494336/how-to-limit-user-to-input-a-float-with-one-decimal-point-in-c/30494409#30494409", "title": "How to limit user to input a float with one decimal point in C", "body": "<p>You will have to input the data as string, then check it only has one decimal place. </p>\n\n<p>It is not possible to input a floating-point value and then check for decimal places; since the floating point values are stored internally with <em>binary places</em> and hold an approximation of the value that was input, in most cases.</p>\n\n<p>The input code could look like:</p>\n\n<pre><code>char temp[20];\nif ( 1 != scanf(\"%19s\", temp) )\n     return EXIT_FAILURE;\n\n// code to check for decimal place goes here - I'm purposefully not \n// showing it as this looks like homework!\n\n// once we have checked that the input is correct, then convert to double\ngrade[i] = strtod(temp, NULL);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432778109, "post_id": 30494420, "comment_id": 49069196, "body": "OP is trying to use <code>scanf()</code>, not <code>printf()</code> whose specifiers work differently."}], "tags": [], "owner": {"reputation": 2963, "user_id": 1855442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61b99c64abe73180373944232b0c734f?s=128&d=identicon&r=PG", "display_name": "Pradheep", "link": "https://stackoverflow.com/users/1855442/pradheep"}, "is_accepted": false, "score": -2, "last_activity_date": 1432766950, "creation_date": 1432766950, "answer_id": 30494420, "question_id": 30494336, "link": "https://stackoverflow.com/questions/30494336/how-to-limit-user-to-input-a-float-with-one-decimal-point-in-c/30494420#30494420", "title": "How to limit user to input a float with one decimal point in C", "body": "<p>You can use printf format specifiers to specificy the number of positions you are interested.</p>\n\n<p>A format specifier follows this prototype: [see compatibility note below]</p>\n\n<pre><code>   %[flags][width][.precision][length]specifier \n</code></pre>\n\n<p>Example from the cplusplus.com</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    printf (\"floats: %4.2f %+.0e %E \\n\", 3.1416, 3.1416, 3.1416);\n    return 0\n }\n</code></pre>\n\n<p>Output</p>\n\n<p>floats: 3.14 +3e+000 3.141600E+000</p>\n\n<p>More examples here <a href=\"http://www.cplusplus.com/reference/cstdio/printf/\" rel=\"nofollow\">http://www.cplusplus.com/reference/cstdio/printf/</a></p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1432779199, "last_edit_date": 1495541827, "creation_date": 1432778789, "answer_id": 30496037, "question_id": 30494336, "link": "https://stackoverflow.com/questions/30494336/how-to-limit-user-to-input-a-float-with-one-decimal-point-in-c/30496037#30496037", "title": "How to limit user to input a float with one decimal point in C", "body": "<p>Use <code>fgets()</code> to read the line into a buffer and then test that buffer.</p>\n\n<pre><code>char buf[99];\nfgets(buf, sizeof buf, stdin);\n\n// parse the line as a float - look for problems\nchar *endptr;\nfloat f = strtof(buf, &amp;endptr);\nif (buf == endptr || *endptr != '\\n') Fail_NonFloatInput();\n\n// look for .\nchar *dot = strchr(buf, '.');\nif (dot &amp;&amp; isdigit(dot[1]) &amp;&amp; isdigit(dot[2])) Fail_TooMuchPrecisison();\n}\n</code></pre>\n\n<p>Alternatively code could try:</p>\n\n<pre><code>long long i;\nint f;\nif (2 != scanf(\"%lld.%1d\", &amp;i, &amp;f)) Bad_Input();\nfloat fl = i + f/10.0;\n</code></pre>\n\n<p>But that fails <code>float</code> input like <code>123456789012345678901234567890.0</code>.<br>\nAs <a href=\"https://stackoverflow.com/a/30494409/2410359\">@Matt McNabb</a> says, read as text first.</p>\n"}, {"tags": [], "owner": {"reputation": 526, "user_id": 4946732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXvnD.jpg?s=128&g=1", "display_name": "xtonousou", "link": "https://stackoverflow.com/users/4946732/xtonousou"}, "is_accepted": false, "score": 1, "last_activity_date": 1432830868, "creation_date": 1432830868, "answer_id": 30512309, "question_id": 30494336, "link": "https://stackoverflow.com/questions/30494336/how-to-limit-user-to-input-a-float-with-one-decimal-point-in-c/30512309#30512309", "title": "How to limit user to input a float with one decimal point in C", "body": "<pre><code>#include &lt;stdio.h&gt; // printf(), scanf()\n#include &lt;math.h&gt; // floor()\n\nmain()\n{\n\n    double grade[8];\n    int i;\n\n    for (i = 0; i &lt; 8; i++)\n        {\n\n            do\n            {\n\n                printf(\"Insert grade: \");\n                scanf(\"%lf\", &amp;grade[i]);\n\n                grade[i] *= 10;\n\n                if (grade[i] != floor(grade[i])) // Prints error message, if user types more than one decimal point\n                {\n                    printf(\"Grade must have one decimal point.\\nPlease re-enter grade.\\n\");\n                }\n\n            }while (grade[i] != floor(grade[i])); // Checks decimal point\n\n        }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 526, "user_id": 4946732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXvnD.jpg?s=128&g=1", "display_name": "xtonousou", "link": "https://stackoverflow.com/users/4946732/xtonousou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2644, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1432830868, "creation_date": 1432766466, "last_edit_date": 1432771432, "question_id": 30494336, "link": "https://stackoverflow.com/questions/30494336/how-to-limit-user-to-input-a-float-with-one-decimal-point-in-c", "title": "How to limit user to input a float with one decimal point in C", "body": "<p>Program to limit the user's input to one decimal point in C.</p>\n\n<p>For example:</p>\n\n<p>Enter grade: 5 //Acceptable<br>\nEnter grade: 8.5 //Acceptable<br>\nEnter grade: 6.4<strong>67</strong> //Not acceptable, Re-enter grade  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nmain()\n{       \n    double grade[8];\n    int i;\n\n    for (i = 0; i &lt; 8; i++) {           \n        printf(\"Insert grade: \");\n        scanf(\"%f\", &amp;grade[i]);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "algorithm", "time-complexity"], "comments": [{"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1432766364, "post_id": 30494296, "comment_id": 49066263, "body": "Yes; that&#39;s a fixed cost."}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 8, "creation_date": 1432766420, "post_id": 30494296, "comment_id": 49066273, "body": "&quot;Better&quot; than what? The version without the busy-loop is also O(n)."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 3, "creation_date": 1432766689, "post_id": 30494296, "comment_id": 49066363, "body": "It&#39;s a better algorithm from a complexity standpoint, but one that has been very poorly implemented."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1432766810, "post_id": 30494296, "comment_id": 49066392, "body": "I&#39;m not sure what image you have of &quot;modern-day interviewers&quot; but I suspect that if you go into an interviewer thinking that the interviewers are irrational or idiotic, then you&#39;re less likely to have a good interview. But, then, why would you want to work for a company with interviewers like that?"}, {"owner": {"reputation": 351, "user_id": 4905335, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ba66eb8a28b943066353287470184fc8?s=128&d=identicon&r=PG&f=1", "display_name": "user4905335", "link": "https://stackoverflow.com/users/4905335/user4905335"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1432767330, "post_id": 30494296, "comment_id": 49066558, "body": "@rici This isn&#39;t a carbon-copy of an interview question I&#39;ve had, but I&#39;ve had several incidences where I supposedly had an answer that was &quot;wrong&quot; because it wasn&#39;t the clever <code>O(n)</code> solution from the Crack the Coding Interview Book, even though the solution from the book actually requires a lot of patchwork to get all the corner cases, and a lot of operations within the loop. I come up with an &#39;O(n*log(n))` solutions that is 2 lines of readable code and covers all possibly cases, and it&#39;s considered wrong, somehow."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 2, "creation_date": 1432767485, "post_id": 30494296, "comment_id": 49066601, "body": "I&#39;m voting to close this question as off-topic because it&#39;s basically just ranting about code screens."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 3, "creation_date": 1432767572, "post_id": 30494296, "comment_id": 49066627, "body": "Honestly, what kind of answers are you expecting to a question like this? You already know that it&#39;s technically O(n) with a large additive constant in the loop body, so what&#39;s the point of this question, besides obliquely ranting about some bad interview you had?"}, {"owner": {"reputation": 2582, "user_id": 156604, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uIrFK.png?s=128&g=1", "display_name": "neminem", "link": "https://stackoverflow.com/users/156604/neminem"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1432768279, "post_id": 30494296, "comment_id": 49066851, "body": "@MatteoItalia I think it&#39;s reasonable for him to be asking if he&#39;s missing anything? Which, yes, he was missing something, which is that O() isn&#39;t everything, it&#39;s just one measure."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 2582, "user_id": 156604, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uIrFK.png?s=128&g=1", "display_name": "neminem", "link": "https://stackoverflow.com/users/156604/neminem"}, "edited": false, "score": 0, "creation_date": 1432768429, "post_id": 30494296, "comment_id": 49066899, "body": "@neminem: to me it looks like he knows very well that it&#39;s just <i>one</i> measure, and, in facts, he is more or less implicitly saying that, by most other measures - such as readability, maintainability, elegance, maybe actual runtime in many cases - his code is better. It&#39;s understandable to feel frustrated by an interviewer who won&#39;t listen to a reasonable alternative to the solution he has printed in his book (I for one would appreciate a candidate that would show where one efficiency measure falls short, or where tradeoffs can be made), but, again, rants do not belong to SO."}], "answers": [{"tags": [], "owner": {"reputation": 2582, "user_id": 156604, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uIrFK.png?s=128&g=1", "display_name": "neminem", "link": "https://stackoverflow.com/users/156604/neminem"}, "is_accepted": false, "score": 5, "last_activity_date": 1432766674, "creation_date": 1432766674, "answer_id": 30494369, "question_id": 30494296, "link": "https://stackoverflow.com/questions/30494296/is-this-technically-an-on-algorithm/30494369#30494369", "title": "Is this technically an O(n) algorithm?", "body": "<p>Yes, it absolutely would be considered O(n) still. The first line is a constant (extremely large, but still constant) cost, so it doesn't affect the asymptotic complexity at all.</p>\n\n<p>That said, the algorithm would only be considered universally \"better\" than a more sane O(n log n) algorithm, etc., according to an interviewer that had no idea what they were talking about. Any real-world discussion of algorithmic complexity, especially in comparing multiple options, absolutely should include asymptotic complexity, but also the constants involved (both multiplicative - 2n vs. 1000000n - and additive - n vs. n + 100000000), as well as the context it will be run under (for instance: suppose you were running a googol items through your algorithm: now your algorithm <em>might</em> be the better option.) </p>\n\n<p>If I were asked this at an interview, that is what I would say, and most likely, what an interviewer would want to hear.</p>\n"}, {"comments": [{"owner": {"reputation": 2912, "user_id": 1274223, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/uGq26.jpg?s=128&g=1", "display_name": "Alejandro", "link": "https://stackoverflow.com/users/1274223/alejandro"}, "edited": false, "score": 1, "creation_date": 1432767573, "post_id": 30494461, "comment_id": 49066629, "body": "Excellent point made about the overflow!"}, {"owner": {"reputation": 2582, "user_id": 156604, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uIrFK.png?s=128&g=1", "display_name": "neminem", "link": "https://stackoverflow.com/users/156604/neminem"}, "edited": false, "score": 0, "creation_date": 1432768150, "post_id": 30494461, "comment_id": 49066812, "body": "Cute. I see a question of asymptotic complexity and I just assume a language-agnostic perfect theoretical language, even if it does look like c++. But yes, there is totally an overflow issue, even if I don&#39;t think that&#39;s what he was actually going for (you could probably make his question more in line with what he meant to ask by, say, splitting the loop into a couple loops, or just waiting on a timer or something.)"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 2582, "user_id": 156604, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uIrFK.png?s=128&g=1", "display_name": "neminem", "link": "https://stackoverflow.com/users/156604/neminem"}, "edited": false, "score": 0, "creation_date": 1432768413, "post_id": 30494461, "comment_id": 49066890, "body": "@neminem: The question IS tagged <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> and <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> (I checked, before posting)"}, {"owner": {"reputation": 2582, "user_id": 156604, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uIrFK.png?s=128&g=1", "display_name": "neminem", "link": "https://stackoverflow.com/users/156604/neminem"}, "edited": false, "score": 2, "creation_date": 1432768573, "post_id": 30494461, "comment_id": 49066940, "body": "@BenVoigt Yes, I agree with you (I upvoted you for being technically correct, and for cleverness). I just have a feeling it isn&#39;t what the question-asker actually meant by the question - but I could be wrong, lacking proof to the contrary in the form of the person coming back and specifying."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1432768816, "post_id": 30494461, "comment_id": 49067006, "body": "Even assuming <code>int</code> has enough precision to store such a value, that code <i>still</i> won&#39;t compile..."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1432769083, "post_id": 30494461, "comment_id": 49067083, "body": "@undefinedbehaviour: Are you referring to the missing <code>#include</code>s?  Clearly this is a snippet, not an entire compilation unit.  Or perhaps the fact that C doesn&#39;t have <code>std::cout</code>?"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1432769838, "post_id": 30494461, "comment_id": 49067345, "body": "@BenVoigt Analyse <code>for (; int * offend = arr + n; ++arr)</code>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1432770319, "post_id": 30494461, "comment_id": 49067458, "body": "Surely not what was intended, but it is a legal infinite loop. Except for the lack of side effects. It is not optimization stable, but then nothing in this function is."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1432772966, "post_id": 30494461, "comment_id": 49068107, "body": "Since when did the expression <code>int * offend = array + n</code> result in a boolean value? <i>edit</i>: Hmmmmmm..."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1432792915, "post_id": 30494461, "comment_id": 49073430, "body": "While your analysis is strictly correct, I think that OP was reasoning at &quot;common algorithmic level&quot; and there is no overflow at that point."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1432792967, "post_id": 30494461, "comment_id": 49073451, "body": "@Jean-BaptisteYun&#232;s: Then he should have specified a different language (perhaps <a href=\"https://stackoverflow.com/questions/tagged/pseudocode\">pseudocode</a>)"}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 5, "last_activity_date": 1432767545, "last_edit_date": 1492087846, "creation_date": 1432767198, "answer_id": 30494461, "question_id": 30494296, "link": "https://stackoverflow.com/questions/30494296/is-this-technically-an-on-algorithm/30494461#30494461", "title": "Is this technically an O(n) algorithm?", "body": "<p><strong>No, it is not O(n).</strong></p>\n\n<p>If your compiler doesn't have an extended integral type with over 96 bits, it will be rejected as ill-formed.  If it does compile (128 bit integral types are not unheard of), the situation is potentially even worse...</p>\n\n<p>The behavior, and therefore the complexity, are both undefined, due to overflow of the signed integer variable <code>k</code>.  On many sane compilers, this code will never terminate, which makes it worse than an algorithm with O(n<sup>n</sup>!) complexity... in fact, it's also worse than the tower of powers seen in <a href=\"https://puzzling.stackexchange.com/q/13050/10031\">The Magic Money Machine</a>.</p>\n\n<p>If you see this code in an interview, it leads naturally into a discussion of the merits of correctness over performance.</p>\n"}], "owner": {"reputation": 351, "user_id": 4905335, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ba66eb8a28b943066353287470184fc8?s=128&d=identicon&r=PG&f=1", "display_name": "user4905335", "link": "https://stackoverflow.com/users/4905335/user4905335"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "closed_date": 1432841942, "answer_count": 2, "score": 0, "last_activity_date": 1432823099, "creation_date": 1432766232, "last_edit_date": 1432823099, "question_id": 30494296, "link": "https://stackoverflow.com/questions/30494296/is-this-technically-an-on-algorithm", "closed_reason": "Needs details or clarity", "title": "Is this technically an O(n) algorithm?", "body": "<p>From my understanding of algorithms, the following is technically a linear solution.</p>\n\n<pre><code>int max ( int * arr, size_t n )\n{\n    for (int k = 0; k &lt; 100000000000000000000000000000; ++k)\n        std::cout &lt;&lt; rand(); // doesn't do anything useful   \n\n    int largest = *arr; \n\n    for (int * offend = arr + n; arr != offend; ++arr)\n        if (*arr &gt; largest)\n            largest = *arr;    \n\n    return largest;\n}\n</code></pre>\n\n<p>In fact, I can add as much garbage as I want to it, and as long as the number of operations <strong>grows</strong> linearly with respect to <code>n</code>, it's considered a \"better\" algorithm according to modern-day interviewers. Is that correct?</p>\n"}, {"tags": ["c", "import", "fread"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 5, "creation_date": 1432765665, "post_id": 30494107, "comment_id": 49065993, "body": "Fyi, you know you&#39;re telling <code>fread</code> to read one more byte than the file size, right? And since you never check the result of <code>fread</code> (or any of your other library call results on that note), how <i>exactly</i> are you determining how many bytes have actually been read? Finally, <code>file1</code> is declared, but <code>file</code> is used. How about posting the <i>real</i> code."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432765808, "post_id": 30494107, "comment_id": 49066043, "body": "And don&#39;t cast the return value of <code>malloc()</code>. One important thing, how do you know how many elements it&#39;s reading if you are not checking that? it would be <code>size - 1</code>, so <code>int count = fread(buff, 1, size, file);</code> then <code>count</code> is <code>size -1</code>."}, {"owner": {"reputation": 3, "user_id": 4946701, "user_type": "registered", "profile_image": "https://graph.facebook.com/691211950989478/picture?type=large", "display_name": "Mher Tolpin", "link": "https://stackoverflow.com/users/4946701/mher-tolpin"}, "edited": false, "score": 0, "creation_date": 1432766834, "post_id": 30494107, "comment_id": 49066401, "body": "I looked on the string in Visual Studio and the size of the string was wrong , but thank you both , I will check if its works."}, {"owner": {"reputation": 3, "user_id": 4946701, "user_type": "registered", "profile_image": "https://graph.facebook.com/691211950989478/picture?type=large", "display_name": "Mher Tolpin", "link": "https://stackoverflow.com/users/4946701/mher-tolpin"}, "edited": false, "score": 0, "creation_date": 1432767285, "post_id": 30494107, "comment_id": 49066545, "body": "The number of the chars is right , thank you . but why the chars are not same? the number of read chars is 494 but I see only 135 ."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1432767476, "post_id": 30494107, "comment_id": 49066598, "body": "@MherTolpin &#39;cos your debugger stops at null."}, {"owner": {"reputation": 3, "user_id": 4946701, "user_type": "registered", "profile_image": "https://graph.facebook.com/691211950989478/picture?type=large", "display_name": "Mher Tolpin", "link": "https://stackoverflow.com/users/4946701/mher-tolpin"}, "edited": false, "score": 0, "creation_date": 1432767676, "post_id": 30494107, "comment_id": 49066663, "body": "ok, thank you all!!!"}], "owner": {"reputation": 3, "user_id": 4946701, "user_type": "registered", "profile_image": "https://graph.facebook.com/691211950989478/picture?type=large", "display_name": "Mher Tolpin", "link": "https://stackoverflow.com/users/4946701/mher-tolpin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 435, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432765784, "creation_date": 1432765349, "last_edit_date": 1432765784, "question_id": 30494107, "link": "https://stackoverflow.com/questions/30494107/reading-all-the-file-using-fread-c", "title": "Reading all the file using Fread c", "body": "<ol>\n<li><p>I need to read a full binary file to a buffer in my program , when I do fread it isn't working :( , how can I import all the file with all the binary chars? </p></li>\n<li><p>I want to read a string from binary file but again it isn't reading all the string I want. </p>\n\n<p>The File:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[\u00ae\u05df\u0192\u05e4\u05c3m\u05f1&lt;\u00ac\u2030\u00afW\nA\u05d6\u05dd\u00ad\u05c1\u05c20]:w\u201aA\u200e\u200f\u05be}\u02dc-]\u2014\uf893F7\uf893\u00a7c.\u00ae4\u00a1\u00ad9\u05f3vh\u05b37 \u05df\u05e2GO\u05b1\u00b8^\u00a3\u00ad}    \u05bb\u05de\u05daY&amp;@\u05dc\u00f7\u05e3 \uf891\u05d9\u02c6\u00bb\u00bchYc,\u05d0x\uf894Fx\u05b0 \u05c3 \u00ad/=%y\u05f3\u05d9\u00d7\u00ae\uf894m\u00ab\u20aa\"\u00b3\uf891P   U\u05f2IE,L\u05e2\u05c2\u201c\u00a0\u05bd\u20aa4C\u05b4\u05ba\u05c0\u00afj\u05da_GX&amp;j\u2019=Xr\u05c0\u00b6F\u05e9`&lt;\u05b3\u00bf6\u05bf\u05e0\u05e1v\u05f4\u203a^smNY\u05b5\u203a@\uf88fOR\u05ea\u00bbt\uf890y5\u00bc\u00a9`\u200e\uf894f\u00be| \u05e1\u05d4/:\u2039\u00b9s\u05c0\u05dfZ\u00bdq\\\u00a2\u05b7\u05e1\u05e1,K\u02c6\u05bf&lt;\u00bb\u00a6\u05b1WI\u2013D\u00b5@\u20aa\u05bb\u05b2[!\uf893Ho\u05e0&gt;\uf896\u00a5\n\u201e\u00ad\u00a2\u05d3\u05ea\\\u2030j\u05b6\u05e7\u00b3l\u05d1\u2019\u2019`\u2026\u05be\u00b0\u05c2-\u05e5\uf895\u05b7\u02c6/7\u00ac!8\uf891\u05dd\u203066]\u05df\u203aR\u05f0\u05b6~\u203050\u00b6\n%\u05ba\u05e5Y\u05b8\u05e2\u05da\u201da\u00a2s\u02dc\u2013\u203a*\u05e7\u00b7\u05e6kW\uf892nTPxC\u00ac#\u00ab\u05e5Z\u05d1\u20aa\u05b8\u20ac\u05d6o[\u05bb\u05db\u05bb\u05bc00}\u00a8\u05dcg\u05b6\u02c6V\u05b7\u20aa\u00b0p\u00a7\u05e6\u2018\u05e9w\u00be\u05d5\u00bd\u05f4Y.\u05f4tP\u05df  QN\u05bco\u05d9\u00b1\u00affG\u05b8\u05b9\u2020]\u00bb)LY2&amp;jo\u05d3\u05e2B \u00b6.\u05c2\n8+U\u00a3\u05beI;\u05f2sE!\u05de\u00bc\u05db\u201c\u00b9\u05f3\u05be\u05d4\u05b6\u05de\u00bd]\u2019\u00b2\u00ad\u201aiy?r\u00b7*\u05d7\u05f3\u05d2\u05ba\u05e4\n</code></pre></li>\n</ol>\n\n<p>The Code :\n </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void main()\n{\n    int size;\n    FILE * file1;\n    file=fopen(\"file\",\"rb\");\n    char * buff;\n    fseek(file,0,seek_end);// calculating the length of the file\n    size=ftell(file)+1;\n    fseek(file,0,seek_set);\n    buff=(char *)malloc(sizeof(char)*size));\n    fread(buff,1,size,file);// this line isn't working,I have a file with\n                          // a size of 495 but it's reads only 5 elements.\n    free(buff);\n}\n</code></pre>\n"}, {"tags": ["c", "math"], "answers": [{"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1432765575, "last_edit_date": 1432765575, "creation_date": 1432765526, "answer_id": 30494152, "question_id": 30493940, "link": "https://stackoverflow.com/questions/30493940/simple-c-program-not-calculating-correctly/30494152#30494152", "title": "Simple C program not calculating correctly", "body": "<p><code>\"%.2f\"</code> is an illegal format string for <code>scanf</code>, so your code causes undefined behaviour.  The correct format string is <code>\"%f\"</code>.</p>\n\n<p>Also you should check the result of scanf. If <code>scanf</code> fails, the bad data is not consumed from the input and so subsequent scanfs fail too (this is why you see the other inputs skipped).</p>\n\n<p>For example:</p>\n\n<pre><code>if ( 1 != scanf(\"%f\", &amp;fRate) )\n{ \n    printf(\"Invalid input for fRate.\\n\");\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1432765532, "creation_date": 1432765532, "answer_id": 30494154, "question_id": 30493940, "link": "https://stackoverflow.com/questions/30493940/simple-c-program-not-calculating-correctly/30494154#30494154", "title": "Simple C program not calculating correctly", "body": "<p>Your format specifier is wrong, you must use compiler warnings if you do, then you wouldn't be asking this, because that format specifier is invalid, you cannot limit the number of decimal places with <code>scanf()</code> it's been discussed in many questions on SO, more importantly you don't need to, and it wouldn't be meaningful, so just remove the <code>.2</code> from your format specifier, and instead, check that <code>scanf()</code> succeeded before using the values.</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 4946677, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-wZXDKORUu9M/AAAAAAAAAAI/AAAAAAAAABA/0pCtrBzMLzI/photo.jpg?sz=128", "display_name": "John T", "link": "https://stackoverflow.com/users/4946677/john-t"}, "edited": false, "score": 0, "creation_date": 1432768455, "post_id": 30494162, "comment_id": 49066907, "body": "That is such a simple error on my part. Thank you for the advice, I&#39;ll start trying to do that from now on."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1432765643, "last_edit_date": 1432765643, "creation_date": 1432765600, "answer_id": 30494162, "question_id": 30493940, "link": "https://stackoverflow.com/questions/30493940/simple-c-program-not-calculating-correctly/30494162#30494162", "title": "Simple C program not calculating correctly", "body": "<p><code>\"%.2f\"</code> is not a valid format for <code>scanf</code>. See <a href=\"http://man7.org/linux/man-pages/man3/scanf.3.html\" rel=\"nofollow\"><code>scanf()</code> manual page</a> for details.</p>\n\n<p>The easiest format to use is <code>\"%f\"</code>.</p>\n\n<p>Also, it's a good practice to check the return value of <code>scanf</code> so you know when the operation was successful.</p>\n\n<pre><code>if ( scanf(\"%f\", &amp;fRate) != 1 )\n{\n   // Error reading the data.\n   // Deal with the error.\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4946677, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-wZXDKORUu9M/AAAAAAAAAAI/AAAAAAAAABA/0pCtrBzMLzI/photo.jpg?sz=128", "display_name": "John T", "link": "https://stackoverflow.com/users/4946677/john-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1023, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1432766352, "creation_date": 1432764403, "last_edit_date": 1432766352, "question_id": 30493940, "link": "https://stackoverflow.com/questions/30493940/simple-c-program-not-calculating-correctly", "title": "Simple C program not calculating correctly", "body": "<p>So, I'm completely new to programming, and I'm learning to program C. I'm trying to write a simple program in C to calculate commission as follows</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    float fRate, fSales_Price, fCost, fCommission;\n\n    printf(\"\\nEnter your commission rate: \");\n    scanf(\"%.2f\",&amp;fRate);\n    printf(\"\\nEnter the price of the item sold: \");\n    scanf(\"%.2f\", &amp;fSales_Price);\n    printf(\"\\nEnter the original cost of the item: \");\n    scanf(\"%.2f\", &amp;fCost);\n\n    fCommission = (fRate / 100) * (fSales_Price - fCost);\n\n    printf(\"\\nYour commission is: %.2f\", fCommission);\n}\n</code></pre>\n\n<p>Whenever I try to run it, two things happen. First, if I try to enter any decimals into the program, e.g. if I said the rate was 12.5, it immediately skips the other inputs and completes the program, saying commission is 0.00. If I ignore decimals, the program runs fine until the end, when I still get commission as 0.00. Any suggestions?</p>\n"}, {"tags": ["c", "mpi", "openmp", "hybrid"], "answers": [{"tags": [], "owner": {"reputation": 1770, "user_id": 2163727, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IGakU.jpg?s=128&g=1", "display_name": "MasterHD", "link": "https://stackoverflow.com/users/2163727/masterhd"}, "is_accepted": true, "score": 1, "last_activity_date": 1432766080, "last_edit_date": 1432766080, "creation_date": 1432765770, "answer_id": 30494201, "question_id": 30493837, "link": "https://stackoverflow.com/questions/30493837/hybrid-openmpmpi-i-need-an-explanation-from-this-example/30494201#30494201", "title": "Hybrid OpenMP+MPI : I need an explanation from this example", "body": "<p>A, B, and C are dynamic 2D arrays that use the pointer of pointers approach. The indices are <code>A[row][col]</code>. When omitting the last index the address of the first element (column zero) in that row is returned. This is useful because you can pass a single row by using that address and the \"width\" of the matrix. This is how the 2D arrays are being stored in memory:</p>\n\n<p><img src=\"https://i.stack.imgur.com/vK3T5.gif\" alt=\"enter image description here\"></p>\n\n<p>Send the 5th row from matrix <code>A</code> with a total of <code>num_cols</code> columns:</p>\n\n<pre><code>MPI_Send(A[5], num_cols, MPI_DOUBLE, ...);\n</code></pre>\n\n<p>Equivalently, you could write <code>&amp;A[5][0]</code> to access that same address, but it's just messier.</p>\n\n<p>Furthermore, if you wish to send the full 2D matrix, this can be easily done because each row is stored contiguously in memory. Just use the first row <code>B[0]</code> (which points to the first column also) and use the <code>N*N</code> linearized length (assuming this is a square matrix).</p>\n\n<p>Send a full <code>N*N</code> square matrix <code>B</code>:</p>\n\n<pre><code>MPI_Bcast(B[0], N*N, MPI_DOUBLE, ...);\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 4163717, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/MSWl4.jpg?s=128&g=1", "display_name": "JPerk", "link": "https://stackoverflow.com/users/4163717/jperk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 30494201, "answer_count": 1, "score": 0, "last_activity_date": 1432766080, "creation_date": 1432763817, "question_id": 30493837, "link": "https://stackoverflow.com/questions/30493837/hybrid-openmpmpi-i-need-an-explanation-from-this-example", "title": "Hybrid OpenMP+MPI : I need an explanation from this example", "body": "<p>I found this example on internet, but I can't understand what exactly is sent from the master node if it's A[5] for example what will be sent to other slaves? The 5th row or all elements till 5th row or all elements from 5th row and so on???\n    #include \n    #include \n    #include \n    #include </p>\n\n<pre><code>#define TAG 13\n\nint main(int argc, char *argv[]) {\n  //double **A, **B, **C, *tmp;\n  double **A, **B, **C, *tmp;\n  double startTime, endTime;\n  int numElements, offset, stripSize, myrank, numnodes, N, i, j, k;\n  int numThreads, chunkSize = 10;\n\n  MPI_Init(&amp;argc, &amp;argv);\n\n  MPI_Comm_rank(MPI_COMM_WORLD, &amp;myrank);\n  MPI_Comm_size(MPI_COMM_WORLD, &amp;numnodes);\n\n  N = atoi(argv[1]);\n  numThreads = atoi(argv[2]);  // difference from MPI: how many threads/rank?\n\n  omp_set_num_threads(numThreads);  // OpenMP call to set threads per rank\n\n  if (myrank == 0) {\n    tmp = (double *) malloc (sizeof(double ) * N * N);\n    A = (double **) malloc (sizeof(double *) * N);\n    for (i = 0; i &lt; N; i++)\n      A[i] = &amp;tmp[i * N];\n  }\n  else {\n    tmp = (double *) malloc (sizeof(double ) * N * N / numnodes);\n    A = (double **) malloc (sizeof(double *) * N / numnodes);\n    for (i = 0; i &lt; N / numnodes; i++)\n      A[i] = &amp;tmp[i * N];\n  }\n\n\n  tmp = (double *) malloc (sizeof(double ) * N * N);\n  B = (double **) malloc (sizeof(double *) * N);\n  for (i = 0; i &lt; N; i++)\n    B[i] = &amp;tmp[i * N];\n\n\n  if (myrank == 0) {\n    tmp = (double *) malloc (sizeof(double ) * N * N);\n    C = (double **) malloc (sizeof(double *) * N);\n    for (i = 0; i &lt; N; i++)\n      C[i] = &amp;tmp[i * N];\n  }\n  else {\n    tmp = (double *) malloc (sizeof(double ) * N * N / numnodes);\n    C = (double **) malloc (sizeof(double *) * N / numnodes);\n    for (i = 0; i &lt; N / numnodes; i++)\n      C[i] = &amp;tmp[i * N];\n  }\n\n  if (myrank == 0) {\n    // initialize A and B\n    for (i=0; i&lt;N; i++) {\n      for (j=0; j&lt;N; j++) {\n        A[i][j] = 1.0;\n        B[i][j] = 1.0;\n      }\n    }\n  }\n\n  // start timer\n  if (myrank == 0) {\n    startTime = MPI_Wtime();\n  }\n\n  stripSize = N/numnodes;\n\n  // send each node its piece of A -- note could be done via MPI_Scatter\n  if (myrank == 0) {\n    offset = stripSize;\n    numElements = stripSize * N;\n    for (i=1; i&lt;numnodes; i++) {\n</code></pre>\n\n<p>I can't understand here on the line below with the sending</p>\n\n<pre><code>MPI_Send(A[offset], numElements, MPI_DOUBLE, i, TAG, MPI_COMM_WORLD);\n      offset += stripSize;\n    }\n  }\n  else {  // receive my part of A\n</code></pre>\n\n<p>And here also:</p>\n\n<pre><code>MPI_Recv(A[0], stripSize * N, MPI_DOUBLE, 0, TAG, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n  }\n</code></pre>\n\n<p>Same here with broadcast what will be sent from B?      </p>\n\n<pre><code>// everyone gets B\n  MPI_Bcast(B[0], N*N, MPI_DOUBLE, 0, MPI_COMM_WORLD);\n\n  // Let each process initialize C to zero \n  for (i=0; i&lt;stripSize; i++) {\n    for (j=0; j&lt;N; j++) {\n      C[i][j] = 0.0;\n    }\n  }\n\n  // do the work---this is the primary difference from the pure MPI program\n  #pragma omp parallel for shared(A,B,C,numThreads) private(i,j,k) schedule (static, chunkSize)\n  for (i=0; i&lt;stripSize; i++) {\n    for (j=0; j&lt;N; j++) {\n      for (k=0; k&lt;N; k++) {\n    C[i][j] += A[i][k] * B[k][j];\n      }\n    }\n  }\n\n  // master receives from workers  -- note could be done via MPI_Gather\n  if (myrank == 0) {\n    offset = stripSize; \n    numElements = stripSize * N;\n    for (i=1; i&lt;numnodes; i++) {\n      MPI_Recv(C[offset], numElements, MPI_DOUBLE, i, TAG, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n      offset += stripSize;\n    }\n  }\n  else { // send my contribution to C\n    MPI_Send(C[0], stripSize * N, MPI_DOUBLE, 0, TAG, MPI_COMM_WORLD);\n  }\n\n\n\n  MPI_Finalize();\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "windows"], "comments": [{"owner": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "edited": false, "score": 0, "creation_date": 1432761946, "post_id": 30493420, "comment_id": 49064568, "body": "Hiding the console is not something C will do for you. That will depend on the display system you&#39;re using."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1432761973, "post_id": 30493420, "comment_id": 49064583, "body": "what system/framework are you builing on?"}, {"owner": {"reputation": 1803, "user_id": 3531912, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/Qh3Y8.png?s=128&g=1", "display_name": "Alessandro Suglia", "link": "https://stackoverflow.com/users/3531912/alessandro-suglia"}, "edited": false, "score": 0, "creation_date": 1432762246, "post_id": 30493420, "comment_id": 49064699, "body": "I think that what you&#39;re looking for is a daemon process ( <a href=\"http://en.wikipedia.org/wiki/Daemon_%28computing%29\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Daemon_%28computing%29</a>). Maybe a duplicate of this post: <a href=\"http://stackoverflow.com/questions/5384168/how-to-make-a-process-daemon\" title=\"how to make a process daemon\">stackoverflow.com/questions/5384168/&hellip;</a>"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 4, "creation_date": 1432763171, "post_id": 30493420, "comment_id": 49065121, "body": "Don&#39;t compile it as a console executable: <a href=\"http://stackoverflow.com/questions/29882262/how-to-have-an-executable-file-run-without-a-console\">How to have an executable file run without a console?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1432800574, "post_id": 30495930, "comment_id": 49077622, "body": "If you really don&#39;t want the console window at all, instead call <a href=\"https://msdn.microsoft.com/en-us/library/ms683150\" rel=\"nofollow noreferrer\"><code>FreeConsole</code></a>."}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1526671691, "post_id": 30495930, "comment_id": 87851695, "body": "Should that not be <code>&lt;windows.h&gt;</code>?"}, {"owner": {"reputation": 2065, "user_id": 2836552, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/47c7b954e22c8f427b46edf4cc9c2432?s=128&d=identicon&r=PG&f=1", "display_name": "ThreeStarProgrammer57", "link": "https://stackoverflow.com/users/2836552/threestarprogrammer57"}, "reply_to_user": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1526763073, "post_id": 30495930, "comment_id": 87873411, "body": "@Simon possible, tbh I don&#39;t understand the rule. Could you explain why should this be <code>&lt;windows.h&gt;</code>?"}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1526763279, "post_id": 30495930, "comment_id": 87873464, "body": "You would use <code>include&lt;windows.h&gt;</code> when <code>windows.h</code> is in your library (the standard one).  You would use <code>#include &quot;windows.h&quot;</code> when <code>windows.h</code> is along with your c file (or in a sub dictionary in which case it would be <code>#include&quot;sub_file&#47;windows.h&quot;</code>."}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1526763542, "post_id": 30495930, "comment_id": 87873531, "body": "I thought the <code>windows.h</code> header is always part of the standard library.  In which case it should be <code>&lt;windows.h&gt;</code>"}], "tags": [], "owner": {"reputation": 2065, "user_id": 2836552, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/47c7b954e22c8f427b46edf4cc9c2432?s=128&d=identicon&r=PG&f=1", "display_name": "ThreeStarProgrammer57", "link": "https://stackoverflow.com/users/2836552/threestarprogrammer57"}, "is_accepted": true, "score": 5, "last_activity_date": 1526889628, "last_edit_date": 1526889628, "creation_date": 1432777954, "answer_id": 30495930, "question_id": 30493420, "link": "https://stackoverflow.com/questions/30493420/how-do-i-hide-the-console-after-starting-a-windows-application-from-it/30495930#30495930", "title": "How do I hide the console after starting a Windows application from it?", "body": "<pre><code>#include &lt;windows.h&gt;\n\nint main(void) {\n\n    printf(\"%s\", \"Hello from the console.\\n\");\n\n    MessageBox(NULL, \"Click OK to hide the console.\", \"\", MB_ICONINFORMATION);\n\n    ShowWindow(GetConsoleWindow(), SW_HIDE);\n\n    MessageBox(NULL, \"Console is now hidden.\", \"\", MB_ICONINFORMATION);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 265, "user_id": 4942648, "user_type": "registered", "profile_image": "https://graph.facebook.com/897350786992492/picture?type=large", "display_name": "Tiago Couto", "link": "https://stackoverflow.com/users/4942648/tiago-couto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 931, "favorite_count": 2, "accepted_answer_id": 30495930, "answer_count": 1, "score": 2, "last_activity_date": 1526889628, "creation_date": 1432761882, "last_edit_date": 1432761982, "question_id": 30493420, "link": "https://stackoverflow.com/questions/30493420/how-do-i-hide-the-console-after-starting-a-windows-application-from-it", "title": "How do I hide the console after starting a Windows application from it?", "body": "<p>I have an app that opens the console and then it opens the GUI, but the console does not disappear.</p>\n\n<p>Is there any way of hiding the console window?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "command-line", "makefile", "symbols"], "comments": [{"owner": {"reputation": 31, "user_id": 3961481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09333aae1f3245547526301b6bb576e8?s=128&d=identicon&r=PG&f=1", "display_name": "olltsu", "link": "https://stackoverflow.com/users/3961481/olltsu"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1432762091, "post_id": 30493367, "comment_id": 49064642, "body": "Good point, but that was a typo :D"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432762305, "post_id": 30493367, "comment_id": 49064738, "body": "Try <code>echo</code>-ing the <code>CC_FLAGS</code> from the makefile"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1432763421, "post_id": 30493367, "comment_id": 49065225, "body": "Consider using <code>-DVERSION=1.2.3</code> at the command line and internally <code>#define STR_VERSION STRINGIFY(VERSION)</code> and <code>#define STRINGIFY(x) #x</code>.  Then you don&#39;t have to fuss with the quotes as much."}], "answers": [{"tags": [], "owner": {"reputation": 675, "user_id": 3227721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HtyqY.jpg?s=128&g=1", "display_name": "Atafar", "link": "https://stackoverflow.com/users/3227721/atafar"}, "is_accepted": false, "score": 1, "last_activity_date": 1432762793, "creation_date": 1432762793, "answer_id": 30493628, "question_id": 30493367, "link": "https://stackoverflow.com/questions/30493367/make-command-line-string-variables/30493628#30493628", "title": "Make command line string variables", "body": "<p>You need to use the proper escaping/quoting for your shell. Try this:</p>\n\n<pre><code>make -f makefile CC_FLAGS='-DVERSION=\\\"1.2.3\\\" -DVERSION_1_2_3'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "is_accepted": false, "score": 2, "last_activity_date": 1432762856, "creation_date": 1432762856, "answer_id": 30493643, "question_id": 30493367, "link": "https://stackoverflow.com/questions/30493367/make-command-line-string-variables/30493643#30493643", "title": "Make command line string variables", "body": "<p>You do not need the additional single quotes <em>inside</em> the ones you have. This works:</p>\n\n<pre><code>make -f makefile CC_FLAGS='-DVERSION=\\\"1.2.3\\\" -DVERSION_1_2_3'\n</code></pre>\n\n<p>as shown with this program</p>\n\n<pre><code>int main (void)\n{\n    printf (\"Are we defined?\\n\");\n#ifdef VERSION_1_2_3\n    printf (\"yeah we have a version.\\n\");\n#endif\n\n#ifdef VERSION\n    printf (\"version is: \\\"%s\\\"\\n\", VERSION);\n#endif\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 3961481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09333aae1f3245547526301b6bb576e8?s=128&d=identicon&r=PG&f=1", "display_name": "olltsu", "link": "https://stackoverflow.com/users/3961481/olltsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432762856, "creation_date": 1432761689, "last_edit_date": 1432762070, "question_id": 30493367, "link": "https://stackoverflow.com/questions/30493367/make-command-line-string-variables", "title": "Make command line string variables", "body": "<p>I want to define values to CC_FLAGS at make command line. </p>\n\n<pre><code>make - f makefile CC_FLAGS=-DVERSION='\\\"1.2.3\\\"'\n</code></pre>\n\n<p>Works, but what if want to define multiple values to CC_FLAGS? </p>\n\n<pre><code>make -f makefile CC_FLAGS='-DVERSION='\\\"1.2.3\\\"' -DVERSION_1_2_3'\n</code></pre>\n\n<p>This doesn't work. Idea is to have a string telling the software version number as well as a symbol for #ifdef usage. </p>\n"}, {"tags": ["c", "vagrant", "opencl", "virtualbox", "sse"], "comments": [{"owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 1, "creation_date": 1432764809, "post_id": 30493327, "comment_id": 49065714, "body": "Try calling <code>clGetDeviceInfo</code> with the <code>CL_DEVICE_AVAILABLE</code> query. I seem to remember also having problems with Intel&#39;s OpenCL implementation in a virtual machine."}, {"owner": {"reputation": 1001, "user_id": 3716293, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7a8cd5bb41e926b0973deb7c882e5782?s=128&d=identicon&r=PG&f=1", "display_name": "GuSuku", "link": "https://stackoverflow.com/users/3716293/gusuku"}, "reply_to_user": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 0, "creation_date": 1432766995, "post_id": 30493327, "comment_id": 49066456, "body": "Thanks! That did point me in the right direction. I will post my solution below, if it helps."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1432804441, "post_id": 30493327, "comment_id": 49080201, "body": "<a href=\"https://stackoverflow.com/questions/24543874/does-ubuntu-14-04-support-avx-extension/30299294#30299294\">VitualBox 5.0 beta3 now supports SSE4.1, SSE4.2, and AVX</a>. So if you use VB 5.0 beta3 Intel OpenCL should work."}], "answers": [{"comments": [{"owner": {"reputation": 1001, "user_id": 3716293, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7a8cd5bb41e926b0973deb7c882e5782?s=128&d=identicon&r=PG&f=1", "display_name": "GuSuku", "link": "https://stackoverflow.com/users/3716293/gusuku"}, "edited": false, "score": 0, "creation_date": 1432766938, "post_id": 30493702, "comment_id": 49066440, "body": "You were right - Intel OpenCL SDK does have some issues with VirtualBox. I will paste my solution, in case it helps anyone."}], "tags": [], "owner": {"reputation": 7948, "user_id": 4899330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a19fa016a8fc6c0a3250f03f108a9?s=128&d=identicon&r=PG&f=1", "display_name": "doqtor", "link": "https://stackoverflow.com/users/4899330/doqtor"}, "is_accepted": false, "score": 1, "last_activity_date": 1432763146, "creation_date": 1432763146, "answer_id": 30493702, "question_id": 30493327, "link": "https://stackoverflow.com/questions/30493327/opencl-demo-program-works-on-one-system-but-not-on-an-other-very-similar-virtua/30493702#30493702", "title": "OpenCL demo program works on one system, but not on an other very similar VirtualBox system", "body": "<p>I couldn't make work Intel OpenCL using Intel SDK/drivers on Ubuntu 14.04 under VirtualBox either. You can install AMD APP SDK if that makes no difference to you (it shouldn't), it works very well on Intel CPU.</p>\n\n<p>Link:\n<a href=\"http://developer.amd.com/tools-and-sdks/opencl-zone/amd-accelerated-parallel-processing-app-sdk/\" rel=\"nofollow\">AMD APP SDK</a></p>\n"}, {"comments": [{"owner": {"reputation": 7948, "user_id": 4899330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a19fa016a8fc6c0a3250f03f108a9?s=128&d=identicon&r=PG&f=1", "display_name": "doqtor", "link": "https://stackoverflow.com/users/4899330/doqtor"}, "edited": false, "score": 0, "creation_date": 1432768837, "post_id": 30494512, "comment_id": 49067009, "body": "I didn&#39;t know such options exist, I did enable SSE4.1/2 for my VM and I can see they are there. I&#39;m not going to check if Intel OpenCL is working, don&#39;t want to mess with it as I have AMD one installed already :) Thanks!"}, {"owner": {"reputation": 1001, "user_id": 3716293, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7a8cd5bb41e926b0973deb7c882e5782?s=128&d=identicon&r=PG&f=1", "display_name": "GuSuku", "link": "https://stackoverflow.com/users/3716293/gusuku"}, "reply_to_user": {"reputation": 7948, "user_id": 4899330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a19fa016a8fc6c0a3250f03f108a9?s=128&d=identicon&r=PG&f=1", "display_name": "doqtor", "link": "https://stackoverflow.com/users/4899330/doqtor"}, "edited": false, "score": 0, "creation_date": 1432769171, "post_id": 30494512, "comment_id": 49067113, "body": "You are welcome. I am already onto another problem now - I see the cl_khr_fp64 extension (needed for double precision) on the Amazon&#39;s Ubuntu+Intel, and see it online for others with same Intel processor as mine, but i dont see it on my home system above. Sigh! I might go with AMD after all."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 1, "creation_date": 1432804503, "post_id": 30494512, "comment_id": 49080247, "body": "This is interesting! I&#39;m surprised by this. Why would these be disabled by default? Anyway <a href=\"https://stackoverflow.com/questions/24543874/does-ubuntu-14-04-support-avx-extension/30299294#30299294\">VB 5.0 beta3 now supports them as well as AVX and AVX2 by default</a>."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1435903865, "post_id": 30494512, "comment_id": 50402672, "body": "@Zboson: Possibly for migrating machine state to older machines that don&#39;t support those instruction sets.  (I haven&#39;t used vbox for a while, but I assume it lets you hibernate your VM and then resume on a different machine.  This only works if the other machine supports all the CPU features exposed by the VM.)"}], "tags": [], "owner": {"reputation": 1001, "user_id": 3716293, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7a8cd5bb41e926b0973deb7c882e5782?s=128&d=identicon&r=PG&f=1", "display_name": "GuSuku", "link": "https://stackoverflow.com/users/3716293/gusuku"}, "is_accepted": true, "score": 2, "last_activity_date": 1432767441, "creation_date": 1432767441, "answer_id": 30494512, "question_id": 30493327, "link": "https://stackoverflow.com/questions/30493327/opencl-demo-program-works-on-one-system-but-not-on-an-other-very-similar-virtua/30494512#30494512", "title": "OpenCL demo program works on one system, but not on an other very similar VirtualBox system", "body": "<p>As others have said here, Intel's OpenCL SDK does not work out of the box on a VirtualBox. Apparently, the SDK requires that the CPU support SIMD extensions SSE4_1 and SSE4_2, but VirtualBox's default settings are turned off for them (can check with: <code>cat /proc/cpuinfo</code> )</p>\n\n<p>So, open the host (Windows, in my case) console, go to the VirtualBox installation directory and enter:</p>\n\n<pre><code>VBoxManage setextradata \"your-VM-name\" VBoxInternal/CPUM/SSE4.1 1\nVBoxManage setextradata \"your-VM-name\" VBoxInternal/CPUM/SSE4.2 1\n</code></pre>\n\n<p>Now restart the VM, and OpenCL should work (at least it did for me).</p>\n"}], "owner": {"reputation": 1001, "user_id": 3716293, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7a8cd5bb41e926b0973deb7c882e5782?s=128&d=identicon&r=PG&f=1", "display_name": "GuSuku", "link": "https://stackoverflow.com/users/3716293/gusuku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "accepted_answer_id": 30494512, "answer_count": 2, "score": 2, "last_activity_date": 1432792497, "creation_date": 1432761516, "last_edit_date": 1432792497, "question_id": 30493327, "link": "https://stackoverflow.com/questions/30493327/opencl-demo-program-works-on-one-system-but-not-on-an-other-very-similar-virtua", "title": "OpenCL demo program works on one system, but not on an other very similar VirtualBox system", "body": "<p>I am trying out the following simple OpenCL vector addition program (I have not included my printSystemInfo() function for brevity):</p>\n\n<pre><code>// Vector addition demo similar to one from Oak Ridge lab:\n// https://www.olcf.ornl.gov/tutorials/opencl-vector-addition/#vecAdd.c\n\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n//To suppress warnings when using the deprecated clCreateCommandQueue of OpenCL v1.0:\n#define CL_USE_DEPRECATED_OPENCL_2_0_APIS\n\n#include &lt;math.h&gt;\n#include &lt;CL/opencl.h&gt;\n\n// Declaration of a printing function, that is not seen at this StackOverflow question\nint printSystemInfo (cl_platform_id platform_id, cl_device_id device_id);\n\n// OpenCL kernel. Each work item takes care of one element of vector c\nconst char *kernelSource =                                       \"\\n\" \\\n\"__kernel void vecAdd(  __global int *a,                       \\n\" \\\n\"                       __global int *b,                       \\n\" \\\n\"                       __global int *c,                       \\n\" \\\n\"                       const unsigned int n)                    \\n\" \\\n\"{                                                               \\n\" \\\n\"    //Get our global thread ID                                  \\n\" \\\n\"    int id = get_global_id(0);                                  \\n\" \\\n\"                                                                \\n\" \\\n\"    //Make sure we do not go out of bounds                      \\n\" \\\n\"    if (id &lt; n)                                                 \\n\" \\\n\"        c[id] = a[id] + b[id];                                  \\n\" \\\n\"}                                                               \\n\" \\\n                                                                \"\\n\" ;\n\nint main( int argc, char* argv[] )\n{\n    // Length of vectors\n    unsigned int n = 10;\n\n    // Host input vectors\n    int *h_a;\n    int *h_b;\n    // Host output vector\n    int *h_c;\n\n    // Device input buffers\n    cl_mem d_a;\n    cl_mem d_b;\n    // Device output buffer\n    cl_mem d_c;\n\n    cl_platform_id platform_id;        // OpenCL platform\n    cl_device_id device_id;           // device ID\n    cl_context context;               // context\n    cl_command_queue queue;           // command queue\n    cl_program program;               // program\n    cl_kernel kernel;                 // kernel\n\n    // Size, in bytes, of each vector\n    size_t bytes = n*sizeof(int);\n\n    // Allocate memory for each vector on host\n    h_a = (int*)malloc(bytes);\n    h_b = (int*)malloc(bytes);\n    h_c = (int*)malloc(bytes);\n\n    // Initialize vectors on host\n    int i;\n    for( i = 0; i &lt; n; i++ )\n    {\n        h_a[i] = i;\n        h_b[i] = i+1;\n    }\n\n    size_t globalSize, localSize;\n    cl_int err;\n\n    // Number of work items in each local work group\n    localSize = 64;\n\n    // Number of total work items - localSize must be a divisor\n    globalSize = ceil(n/(float)localSize)*localSize;\n\n    // Bind to platform\n    err = clGetPlatformIDs(1, &amp;platform_id, NULL);\n\n    // Get ID for the device\n    //err = clGetDeviceIDs(cpPlatform, CL_DEVICE_TYPE_GPU, 1, &amp;device_id, NULL);\n    err = clGetDeviceIDs(platform_id, CL_DEVICE_TYPE_CPU, 1, &amp;device_id, NULL);\n\n    // Call a local function that fetches and prints system info\n    err = printSystemInfo (platform_id, device_id);\n\n    // Create a context\n    context = clCreateContext(0, 1, &amp;device_id, NULL, NULL, &amp;err);\n\n    // Create a command queue\n    queue = clCreateCommandQueue(context, device_id, 0, &amp;err);\n\n    // Create the compute program from the source buffer\n    program = clCreateProgramWithSource(context, 1,\n                            (const char **) &amp; kernelSource, NULL, &amp;err);\n\n    // Build the program executable\n    clBuildProgram(program, 0, NULL, NULL, NULL, NULL);\n\n    // Create the compute kernel in the program we wish to run\n    kernel = clCreateKernel(program, \"vecAdd\", &amp;err);\n\n    // Create the input and output arrays in device memory for our calculation\n    d_a = clCreateBuffer(context, CL_MEM_READ_ONLY, bytes, NULL, NULL);\n    d_b = clCreateBuffer(context, CL_MEM_READ_ONLY, bytes, NULL, NULL);\n    d_c = clCreateBuffer(context, CL_MEM_WRITE_ONLY, bytes, NULL, NULL);\n\n    // Write our data set into the input array in device memory\n    err = clEnqueueWriteBuffer(queue, d_a, CL_TRUE, 0,\n                                   bytes, h_a, 0, NULL, NULL);\n    err |= clEnqueueWriteBuffer(queue, d_b, CL_TRUE, 0,\n                                   bytes, h_b, 0, NULL, NULL);\n\n    // Set the arguments to our compute kernel\n    err  = clSetKernelArg(kernel, 0, sizeof(cl_mem), &amp;d_a);\n    err |= clSetKernelArg(kernel, 1, sizeof(cl_mem), &amp;d_b);\n    err |= clSetKernelArg(kernel, 2, sizeof(cl_mem), &amp;d_c);\n    err |= clSetKernelArg(kernel, 3, sizeof(unsigned int), &amp;n);\n\n    // Execute the kernel over the entire range of the data set\n    err = clEnqueueNDRangeKernel(queue, kernel, 1, NULL, &amp;globalSize, &amp;localSize,\n                                                              0, NULL, NULL);\n\n    // Wait for the command queue to get serviced before reading back results\n    clFinish(queue);\n\n    // Read the results from the device\n    clEnqueueReadBuffer(queue, d_c, CL_TRUE, 0,\n                                bytes, h_c, 0, NULL, NULL );\n\n    //Print vectors a, b and c=a+b\n    for(i=0; i&lt;n; i++)\n        printf(\"a: %d  b: %d  c=a+b: %d \\n\", h_a[i], h_b[i], h_c[i] );\n\n    // release OpenCL resources\n    clReleaseMemObject(d_a);\n    clReleaseMemObject(d_b);\n    clReleaseMemObject(d_c);\n    clReleaseProgram(program);\n    clReleaseKernel(kernel);\n    clReleaseCommandQueue(queue);\n    clReleaseContext(context);\n\n    //release host memory\n    free(h_a);\n    free(h_b);\n    free(h_c);\n\n    return 0;\n}\n</code></pre>\n\n<p>It works on an Amazon EC2 system running Ubuntu 14.04...</p>\n\n<pre><code>ubuntu@ip-xxx:~/programs/OpenCL$ gcc ./cldemo.c ./printSystemInfo.c  -o ./cldemo -I/opt/intel/intel-opencl-1.2-5.0.0.43/opencl-1.2-sdk-5.0.0.43/include -L/opt/intel/intel-opencl-1.2-5.0.0.43/opencl-1.2-5.0.0.43/lib64 -lOpenCL -Wall -lm\n\nubuntu@ip-xxx:~/programs/OpenCL$ ./cldemo\n\nOS name: Linux\nRelease:3.13.0-52-generic\nVersion:#86-Ubuntu SMP Mon May 4 04:32:59 UTC 2015\nMachine:x86_64\n\nPlatform name = Intel(R) OpenCL\nPlatform version = OpenCL 1.2 LINUX\nPlatform extensions = cl_khr_icd cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_byte_addressable_store cl_khr_depth_images cl_khr_3d_image_writes cl_intel_exec_by_local_thread cl_khr_spir cl_khr_fp64\n\nDevice name =       Intel(R) Xeon(R) CPU E5-2670 v2 @ 2.50GHz\nDevice version = OpenCL 1.2 (Build 43)\nDevice global memory size= 1040740352\nDevice extensions= cl_khr_icd cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_byte_addressable_store cl_khr_depth_images cl_khr_3d_image_writes cl_intel_exec_by_local_thread cl_khr_spir cl_khr_fp64\n\na: 0  b: 1  c=a+b: 1\na: 1  b: 2  c=a+b: 3\na: 2  b: 3  c=a+b: 5\na: 3  b: 4  c=a+b: 7\na: 4  b: 5  c=a+b: 9\na: 5  b: 6  c=a+b: 11\na: 6  b: 7  c=a+b: 13\na: 7  b: 8  c=a+b: 15\na: 8  b: 9  c=a+b: 17\na: 9  b: 10  c=a+b: 19\n</code></pre>\n\n<p>But not on a similar system at home (but with the Ubuntu 14.04 running as a Vagrant VirtualBox machine inside a Windows 7 host):</p>\n\n<pre><code>OS name: Linux \nRelease:3.13.0-53-generic \nVersion:#89-Ubuntu SMP Wed May 20 10:34:39 UTC 2015 \nMachine:x86_64 \n\nPlatform name = Intel(R) OpenCL \nPlatform version = OpenCL 1.2 LINUX \nPlatform extensions = cl_khr_icd cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_byte_addressable_store cl_khr_depth_images cl_khr_3d_image_writes cl_intel_exec_by_local_thread cl_khr_spir  \n\nDevice name =        Intel(R) Core(TM) i7-2620M CPU @ 2.70GHz \nDevice version = OpenCL 1.2 (Build 43) \nDevice global memory size= 3156189184\nDevice extensions= cl_khr_icd cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_byte_addressable_store cl_khr_depth_images cl_khr_3d_image_writes cl_intel_exec_by_local_thread cl_khr_spir  \n\na: 0  b: 1  c=a+b: 0 \na: 1  b: 2  c=a+b: 0 \na: 2  b: 3  c=a+b: 0 \na: 3  b: 4  c=a+b: 0 \na: 4  b: 5  c=a+b: 0 \na: 5  b: 6  c=a+b: 0 \na: 6  b: 7  c=a+b: 0 \na: 7  b: 8  c=a+b: 0 \na: 8  b: 9  c=a+b: 0 \na: 9  b: 10  c=a+b: 0\n</code></pre>\n\n<p>I am new to OpenCL. Any helpful pointers would be greatly appreciated!</p>\n"}, {"tags": ["c", "gtk", "glade", "anjuta"], "answers": [{"tags": [], "owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "is_accepted": true, "score": 1, "last_activity_date": 1432770030, "last_edit_date": 1432770030, "creation_date": 1432764459, "answer_id": 30493954, "question_id": 30493311, "link": "https://stackoverflow.com/questions/30493311/changing-window-title-on-button-press-does-not-work/30493954#30493954", "title": "Changing window title on button press does not work", "body": "<p>From the <a href=\"https://developer.gnome.org/gtk3/stable/GtkButton.html#GtkButton-clicked\" rel=\"nofollow noreferrer\">GTK+ 3 Reference Manual</a>:</p>\n\n<blockquote>\n  <h2>The <code>\u201cclicked\u201d</code> signal</h2>\n\n<pre><code>void\nuser_function (GtkButton *button,\n               gpointer   user_data)\n</code></pre>\n</blockquote>\n\n<p>This means that, when the callback function is called, the first argument passed to it will be the button, not the window.</p>\n\n<p>To fix this, you have two options:</p>\n\n<p>You can either change <code>changetitle</code> to the following:</p>\n\n<pre><code>void changetitle(GtkButton *button, gpointer win) { //...\n</code></pre>\n\n<p><strong>Or</strong> (i.e. don't do both together), in Glade when you connect the signal, check the \"swap\" box:</p>\n\n<p><img src=\"https://i.stack.imgur.com/GFnLZ.png\" alt=\"screenshot: connect &quot;swap&quot; button in Glade\"></p>\n\n<p>By doing so, the order of the parameters will be swapped, so the first parameter will be your specified data (i.e. the window), and the second parameter (which isn't specified in your callback function and hence will not matter) will be your button.</p>\n"}], "owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 30493954, "answer_count": 1, "score": 1, "last_activity_date": 1432770030, "creation_date": 1432761468, "last_edit_date": 1432766202, "question_id": 30493311, "link": "https://stackoverflow.com/questions/30493311/changing-window-title-on-button-press-does-not-work", "title": "Changing window title on button press does not work", "body": "<p>I'm using anjuta with glade and gtk+.</p>\n\n<p>I'm trying to get the button in my app to change the window title:</p>\n\n<pre><code>void changetitle(GtkWidget *win)\n{\ngtk_window_set_title(GTK_WINDOW(win),\"My Window\"); \n    FILE *fh = fopen(\"/tmp/output.txt\", \"w\");\n  fclose(fh);\n}\n</code></pre>\n\n<p>I'm trying to get the button to execute this action, but I seem to be failing with passing the window as an argument.</p>\n\n<p>Here's what I've tried:</p>\n\n<p><img src=\"https://i.stack.imgur.com/rhbY2.png\" alt=\"enter image description here\"></p>\n\n<p>the second function (creating the file) seems to work.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 27, "creation_date": 1432761037, "post_id": 30493198, "comment_id": 49064130, "body": "That&#39;s how you become a <a href=\"http://c2.com/cgi/wiki?ThreeStarProgrammer\" rel=\"nofollow noreferrer\"><i>three star programmer</i></a>."}, {"owner": {"reputation": 426, "user_id": 4320207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc4bdecdb0bc1abfe07ac605134c66ea?s=128&d=identicon&r=PG&f=1", "display_name": "aGer", "link": "https://stackoverflow.com/users/4320207/ager"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1432761130, "post_id": 30493198, "comment_id": 49064175, "body": "I do not want to be &quot;three star programmer&quot; at all ;)"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1432761242, "post_id": 30493198, "comment_id": 49064219, "body": "I&#39;m tempted to post &quot;when you don&#39;t understand the concept of abstraction.&quot; as an answer, but I guess for now I won&#39;t."}, {"owner": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "edited": false, "score": 0, "creation_date": 1432761287, "post_id": 30493198, "comment_id": 49064243, "body": "I&#39;d like to see example code of what a triple pointer is."}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1432761289, "post_id": 30493198, "comment_id": 49064245, "body": "<code>void MakeJagged( int*** arr, int width, int height );</code>"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 7, "creation_date": 1432761310, "post_id": 30493198, "comment_id": 49064256, "body": "When you want to write a function that modifies a <code>**</code>. In C, without reference, you need one more layer of pointer."}, {"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1432761464, "post_id": 30493198, "comment_id": 49064333, "body": "A better question would be: <i>an example of why one should NOT use triple-pointers</i>..."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1432761589, "post_id": 30493198, "comment_id": 49064387, "body": "Maybe you should pick one language. I can&#39;t think of a situation where you&#39;d need a triple pointer in C++."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432761693, "post_id": 30493198, "comment_id": 49064424, "body": "@fabio same list, really, bit with implementation and use cases added."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1432762000, "post_id": 30493198, "comment_id": 49064596, "body": "@aGer <i>&quot;Edit: Especially i&#39;m looking for a source-code which uses triple-pointers.&quot;</i> THX for pointing out why this question is off-topic."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1432763294, "post_id": 30493198, "comment_id": 49065166, "body": "Asking for lists and suggestions is frowned upon. Pointers to pointers to pointers is pretty uncommon. Other than a three dimensional array, I&#39;ve only seen it used legitimately once or twice, and those probably could have been avoided. The rest look like this: <a href=\"http://stackoverflow.com/questions/30387128/why-put-dozens-of-before-function-pointer-or-function-that-return-a-function-p\" title=\"why put dozens of before function pointer or function that return a function p\">stackoverflow.com/questions/30387128/&hellip;</a>"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1432763642, "post_id": 30493198, "comment_id": 49065304, "body": "aGer: There&#39;s nothing particularly scary or magic about multiple indirection.  Triple indirection is relatively rare, but there are use cases for it (R&#39;s is one of the better ones).  Instead of saying &quot;I don&#39;t want to be a three star programmer&quot;, take the time to learn <i>why</i> such constructs may exist.  Sometimes you have to work with high-dimension data.  Sometimes you have multiple layers of indirection."}], "answers": [{"comments": [{"owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 5, "creation_date": 1432761794, "post_id": 30493377, "comment_id": 49064489, "body": "That isn&#39;t a triple pointer. That&#39;s just a 3d array. You would only need triple pointers for a jagged 3d array."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 6, "creation_date": 1432761929, "post_id": 30493377, "comment_id": 49064558, "body": "@VoidStar: No, using a 3d array defeats the whole purpose and makes it equivalent to a flat array. The key word is <b>sparse</b>. I updated my answer to clarify."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 1, "creation_date": 1432762069, "post_id": 30493377, "comment_id": 49064632, "body": "If it were a 3d array, it would necessarily use a total of <code>68*128*128*sizeof ***proptable</code> bytes of storage, which is huge. In practice such multi-level tables fit in several kb."}, {"owner": {"reputation": 426, "user_id": 4320207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc4bdecdb0bc1abfe07ac605134c66ea?s=128&d=identicon&r=PG&f=1", "display_name": "aGer", "link": "https://stackoverflow.com/users/4320207/ager"}, "edited": false, "score": 1, "creation_date": 1432763421, "post_id": 30493377, "comment_id": 49065224, "body": "Thx for your example :)"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 0, "creation_date": 1432794036, "post_id": 30493377, "comment_id": 49073911, "body": "In fairness to @VoidStar, my answer was less clear when the first comment was posted."}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": true, "score": 13, "last_activity_date": 1432762423, "last_edit_date": 1432762423, "creation_date": 1432761740, "answer_id": 30493377, "question_id": 30493198, "link": "https://stackoverflow.com/questions/30493198/example-why-someone-should-use-triple-pointers-in-c-c/30493377#30493377", "title": "Example why someone should use triple-pointers in C/C++?", "body": "<p>The best example that comes to mind is a sparse multi-level table. For instance one way to implement properties for Unicode characters might be:</p>\n\n<pre><code>prop_type ***proptable;\n...\nprop_type prop = proptable[c&gt;&gt;14][c&gt;&gt;7&amp;0x7f][c&amp;0x7f];\n</code></pre>\n\n<p>In this case <code>proptable</code> would need to have a triple-pointer type (and possibly quadruple pointer if the final resulting type is a pointer type). The reason for doing this as multiple levels rather than one flat table is that, at the first and second levels, multiple entries can point to the same subtable when the contents are all the same (e.g. huge CJK ranges).</p>\n\n<p>Here's another example of a multi-level table that I implemented; I can't say I'm terribly proud of the design but given the constraints the code has to satisfy, it's one of the least-bad implementation choices:</p>\n\n<p><a href=\"http://git.musl-libc.org/cgit/musl/tree/src/aio/aio.c?id=56fbaa3bbe73f12af2bfbbcf2adb196e6f9fe264\">http://git.musl-libc.org/cgit/musl/tree/src/aio/aio.c?id=56fbaa3bbe73f12af2bfbbcf2adb196e6f9fe264</a></p>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 4712451, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NAmKn.jpg?s=128&g=1", "display_name": "cip", "link": "https://stackoverflow.com/users/4712451/cip"}, "is_accepted": false, "score": 3, "last_activity_date": 1432762484, "creation_date": 1432762484, "answer_id": 30493559, "question_id": 30493198, "link": "https://stackoverflow.com/questions/30493198/example-why-someone-should-use-triple-pointers-in-c-c/30493559#30493559", "title": "Example why someone should use triple-pointers in C/C++?", "body": "<p>If you use a linked list you have to store the address of the first element of the list <code>( first pointer )</code> . </p>\n\n<p>If you need to change in that list you need another pointer <code>( two pointer)</code></p>\n\n<p>If you need to pass your list that you are changing in two pointers and change it in another function you need another pointer  <code>( three pointer )</code>...</p>\n\n<p>They are a lots of examples</p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 3817801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b47535170303474bd46c5d44af9be04e?s=128&d=identicon&r=PG&f=1", "display_name": "Intrepid Traveller", "link": "https://stackoverflow.com/users/3817801/intrepid-traveller"}, "is_accepted": false, "score": 1, "last_activity_date": 1432763324, "creation_date": 1432763324, "answer_id": 30493745, "question_id": 30493198, "link": "https://stackoverflow.com/questions/30493198/example-why-someone-should-use-triple-pointers-in-c-c/30493745#30493745", "title": "Example why someone should use triple-pointers in C/C++?", "body": "<p>A very simple example is a pointer to an array of arrays of arrays.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1432797550, "post_id": 30493891, "comment_id": 49075792, "body": "Note that the for loop for freeing pointers and the array of pointers should be extracted into a separate function and used both in the clean-up path for error handling and in the calling function when finished with the array of strings.  You pass the number of initialized pointers (<code>i</code> in the error recovery code) and the pointers (variable <code>pointers</code> in the code) to the function."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 6, "last_activity_date": 1432765435, "last_edit_date": 1432765435, "creation_date": 1432764144, "answer_id": 30493891, "question_id": 30493198, "link": "https://stackoverflow.com/questions/30493198/example-why-someone-should-use-triple-pointers-in-c-c/30493891#30493891", "title": "Example why someone should use triple-pointers in C/C++?", "body": "<p>If you need to return an array of pointers to variable length strings via a function parameter:</p>\n\n<pre><code>int array_of_strings(int *num_strings, char ***string_data)\n{\n    int n = 32;\n    char **pointers = malloc(n * sizeof(*pointers));\n    if (pointers == 0)\n        return -1;  // Failure\n    char line[256];\n    int i;\n    for (i = 0; i &lt; n &amp;&amp; fgets(line, sizeof(line), stdin) != 0; i++)\n    {\n        size_t len = strlen(line);\n        if (line[len-1] == '\\n')\n            line[len-1] = '\\0';\n        pointers[i] = strdup(line);\n        if (pointers[i] == 0)\n        {\n            // Release already allocated resources\n            for (int j = 0; j &lt; i; j++)\n                free(pointers[j]);\n            free(pointers);\n            return -1;  // Failure\n        }\n    }\n    *num_strings = i;\n    *string_data = pointers;\n    return 0;  // Success\n}\n</code></pre>\n\n<p><sup><em>Compiled code.</em></sup></p>\n"}, {"tags": [], "owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "is_accepted": false, "score": 2, "last_activity_date": 1432776777, "creation_date": 1432776777, "answer_id": 30495790, "question_id": 30493198, "link": "https://stackoverflow.com/questions/30493198/example-why-someone-should-use-triple-pointers-in-c-c/30495790#30495790", "title": "Example why someone should use triple-pointers in C/C++?", "body": "<p>I've used triple pointers in C++:</p>\n\n<p>There is an interface written for a Java program: </p>\n\n<p><a href=\"https://github.com/BenLand100/SMART/blob/master/src/SMARTPlugin.h\" rel=\"nofollow\">https://github.com/BenLand100/SMART/blob/master/src/SMARTPlugin.h</a></p>\n\n<p>and it takes an array of strings.</p>\n\n<pre><code>typedef void (*_SMARTPluginInit)(SMARTInfo *ptr, bool *replace, int *buttonc, char ***buttonv, int **buttonid, _SMARTButtonPressed *buttonproc);\n</code></pre>\n\n<p>Then in my program I do:</p>\n\n<pre><code>char* btnTexts[2] = {\"Disable OpenGL_Enable OpenGL\", \"Enable Debug_Disable glDebug\"}; //array of C-style strings.\n\nvoid SMARTPluginInit(SMARTInfo* ptr, bool* ReplaceButtons, int* ButtonCount, char*** ButtonTexts, int** ButtonIDs, _SMARTButtonPressed* ButtonCallback)\n{\n    *ButtonText = btnTexts; //return an array of strings.\n}\n</code></pre>\n\n<p>but in C++, you can use a reference instead of pointer and it'd become:</p>\n\n<pre><code>void SMARTPluginInit(SMARTInfo* ptr, bool* ReplaceButtons, int* ButtonCount, char** &amp;ButtonTexts, int** ButtonIDs, _SMARTButtonPressed* ButtonCallback)\n{\n    ButtonText = btnTexts; //return an array of strings.\n}\n</code></pre>\n\n<p>Notice now that \"ButtonTexts\" is a reference to an array of C-style strings now.</p>\n\n<p>A <code>char***</code> can be a pointer to an array of C-style strings and that's one time that you'd use it.</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 7568681, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PhbuGU5oIlY/AAAAAAAAAAI/AAAAAAAABbI/2cC8UWFtEdc/photo.jpg?sz=128", "display_name": "Murtaza Chawala", "link": "https://stackoverflow.com/users/7568681/murtaza-chawala"}, "is_accepted": false, "score": -3, "last_activity_date": 1487161054, "creation_date": 1487161054, "answer_id": 42249197, "question_id": 30493198, "link": "https://stackoverflow.com/questions/30493198/example-why-someone-should-use-triple-pointers-in-c-c/42249197#42249197", "title": "Example why someone should use triple-pointers in C/C++?", "body": "<p>Triple pointer is a pointer variable that points to a pointer which in turn points to another pointer. The use of this complex programming technique is that usually in which companies process tons and tons of data at one time .A single pointer would point to a single block of data (suppose in a large file) using the triple pointer would result in 3 times faster processing as different blocks of data(in the same file) can be pointed by different pointer and thus data could be accessed/processed faster (unlike 1 pointer going through the whole file).</p>\n"}], "owner": {"reputation": 426, "user_id": 4320207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc4bdecdb0bc1abfe07ac605134c66ea?s=128&d=identicon&r=PG&f=1", "display_name": "aGer", "link": "https://stackoverflow.com/users/4320207/ager"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17826, "favorite_count": 7, "accepted_answer_id": 30493377, "answer_count": 6, "score": 14, "last_activity_date": 1487161054, "creation_date": 1432760979, "last_edit_date": 1432761529, "question_id": 30493198, "link": "https://stackoverflow.com/questions/30493198/example-why-someone-should-use-triple-pointers-in-c-c", "title": "Example why someone should use triple-pointers in C/C++?", "body": "<p>I'm searching for an example or explanation why someone should use <strong>OR</strong> not use triple-pointers in C/C++. Are there any source-code where triple-pointer arise?</p>\n\n<p>Thanks in advance.</p>\n\n<p><strong>Edit:</strong> Especially i'm looking for a source-code which uses triple-pointers. </p>\n"}, {"tags": ["c", "bit", "avr", "led", "operations"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 4909037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea72332473a1a41ac12af5e011dfcfe2?s=128&d=identicon&r=PG&f=1", "display_name": "Lexander", "link": "https://stackoverflow.com/users/4909037/lexander"}, "edited": false, "score": 0, "creation_date": 1432762440, "post_id": 30493382, "comment_id": 49064803, "body": "I&#39;ve copied your code and it works. My should work as well, but it didn&#39;t. As to the number inside uin8_t dot, I&#39;ve used it in binary (0b0101). Thank you"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432762623, "post_id": 30493382, "comment_id": 49064882, "body": "Yep. The precedence is the case here. You should enclose the left part of the <code>==</code> operator in brackets."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 1, "last_activity_date": 1432761755, "creation_date": 1432761755, "answer_id": 30493382, "question_id": 30493140, "link": "https://stackoverflow.com/questions/30493140/bit-comparison-in-loop-on-avrs/30493382#30493382", "title": "bit comparison in loop on AVRs", "body": "<p>It is done by <em>bit masking</em>. If you want to check whether or not an <code>i</code>'th bit of <code>a</code> is 1 you will do something like this:</p>\n\n<pre><code>if (a &amp; (1 &lt;&lt; i))\n{\n    // Do something\n}\n</code></pre>\n\n<p>This way all of the bits of <code>a</code> except the <code>i</code>'th one will be <em>AND</em>ed with zeros, thus getting a value of zero. The <code>i</code>'th bit will be <em>AND</em>ed with <code>1</code>, thus not changing it's value. So the <code>if</code> condition will be true in case the bit is not zero, and false otherwise. <br>\n The comparison code you are presenting should work as well, but I suspect the <code>dot</code> variable is not containing the value you think it is containing. <code>uint8_t dot=0101;</code> makes it to be equal to <code>101</code> in <strong>octal</strong> base (due to the leading zero) or <code>65</code> in decimal. Not <code>101</code> in binary.</p>\n"}], "owner": {"reputation": 125, "user_id": 4909037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea72332473a1a41ac12af5e011dfcfe2?s=128&d=identicon&r=PG&f=1", "display_name": "Lexander", "link": "https://stackoverflow.com/users/4909037/lexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 30493382, "answer_count": 1, "score": 1, "last_activity_date": 1432761755, "creation_date": 1432760748, "question_id": 30493140, "link": "https://stackoverflow.com/questions/30493140/bit-comparison-in-loop-on-avrs", "title": "bit comparison in loop on AVRs", "body": "<p>I'm learning about bit logic in C on AVRs and I have a problem.</p>\n\n<p>I want to compare an \"i\" bit (from the right) from int8_t variable and if it is 1, then do the next instruction, but it doesn't work. Here's what I write:</p>\n\n<pre><code>if (variable &amp; (1&lt;&lt;i)==(1&lt;&lt;i)) instruction;\n</code></pre>\n\n<p>In example for following data:</p>\n\n<pre><code>uint8_t dot=0101;\nPORTC=1;\nfor (int i=0; i&lt;4; i++)\n{\n    PORTB = fourDigit[i];\n    if (dot &amp; (1&lt;&lt;i)==(1&lt;&lt;i)) PORTB--;\n    PORTC&lt;&lt;=1;\n}\n</code></pre>\n\n<p>The dot (as it is connected to PB0) should illuminate on the first and third digit, but at present it lamps on every digit. What's the problem?</p>\n\n<p>Thanks for your time.</p>\n"}, {"tags": ["c", "gtk"], "answers": [{"comments": [{"owner": {"reputation": 4212, "user_id": 4426072, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/60b201e405f47e947422e0c33dff8c31?s=128&d=identicon&r=PG&f=1", "display_name": "DannyMoshe", "link": "https://stackoverflow.com/users/4426072/dannymoshe"}, "edited": false, "score": 0, "creation_date": 1432773684, "post_id": 30493596, "comment_id": 49068271, "body": "When i write the pkg-config --cflag in a dos prompt i get a huge output which doesnt really make sense. Regarding gcc -o program program.c <code>pkg-config --cflags --libs gtk+-3.0</code> command you mention above, where does this code physically need to go? Im not familiar with   <b>shell</b> or <b>bash</b> and am just executing the c file in visual studio. This command gives me errors when written in my c file. Still feel like im missing something here."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "reply_to_user": {"reputation": 4212, "user_id": 4426072, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/60b201e405f47e947422e0c33dff8c31?s=128&d=identicon&r=PG&f=1", "display_name": "DannyMoshe", "link": "https://stackoverflow.com/users/4426072/dannymoshe"}, "edited": false, "score": 1, "creation_date": 1432777485, "post_id": 30493596, "comment_id": 49069060, "body": "Ah, I see. I had missed the &quot;visual studio&quot; in your original post and had thought you were using a Unix system/command line. In that case <a href=\"http://www.gtk.org/download/win32_tutorial.php\" rel=\"nofollow noreferrer\">this</a> explains you take the output of <code>pkg-config</code> and use it as compiler options in your Visual Studio project options."}, {"owner": {"reputation": 844, "user_id": 4927891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d6bbefea663dbeed1e0bd871c43d62c?s=128&d=identicon&r=PG&f=1", "display_name": "Bertrand125", "link": "https://stackoverflow.com/users/4927891/bertrand125"}, "edited": false, "score": 1, "creation_date": 1432795169, "post_id": 30493596, "comment_id": 49074474, "body": "This <a href=\"http://stackoverflow.com/questions/15906580/how-to-configure-gtk-on-visual-studio-2010\">page</a> explain how to configure Visual Studio. You have to pass --msvc-syntax to pkg-config to get the syntax for Visual Studio."}], "tags": [], "owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "is_accepted": true, "score": 3, "last_activity_date": 1432762639, "creation_date": 1432762639, "answer_id": 30493596, "question_id": 30493092, "link": "https://stackoverflow.com/questions/30493092/how-to-include-gtk-gtk-h-in-a-c-file/30493596#30493596", "title": "How to include gtk/gtk.h in a C file", "body": "<p>The <code>pkg-config</code> line is a shell command that produces on standard output the compiler flags you would need to pass to use the function you want. For example,</p>\n\n<pre><code>pkg-config --cflags gtk+-3.0\n</code></pre>\n\n<p>produces for me</p>\n\n<pre><code>-pthread -I/usr/include/gtk-3.0 -I/usr/include/at-spi2-atk/2.0 -I/usr/include/at-spi-2.0 -I/usr/include/dbus-1.0 -I/usr/lib/x86_64-linux-gnu/dbus-1.0/include -I/usr/include/gtk-3.0 -I/usr/include/gio-unix-2.0/ -I/usr/include/mirclient -I/usr/include/mircommon -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include/harfbuzz -I/usr/include/pango-1.0 -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pixman-1 -I/usr/include/freetype2 -I/usr/include/libpng12 -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/libpng12 -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include \n</code></pre>\n\n<p>What you want to do is use a feature of your shell in which the output of a command is dropped into the command line of another one. In bash, this is done with <code>`...`</code>:</p>\n\n<pre><code>gcc -o program program.c `pkg-config --cflags --libs gtk+-3.0`\n</code></pre>\n\n<p>For bash, another syntax is <code>$(...)</code>:</p>\n\n<pre><code>gcc -o program program.c $(pkg-config --cflags --libs gtk+-3.0)\n</code></pre>\n\n<p>For GNU make makefiles, if you want to use <code>$(...)</code>, you will need to use the <code>shell</code> function:</p>\n\n<pre><code>gcc -o program program.c $(shell pkg-config --cflags --libs gtk+-3.0)\n</code></pre>\n\n<p><code>--cflags</code> produces the C compiler flags, <code>--libs</code> produces the linker flags. If you're building using a makefile, you'll want to only provide <code>--cflags</code> to the recipe that produces the <code>.o</code> files and only provide <code>--libs</code> to the recipe that produces the final executable. For compiling a single C file directly into an executable with a single command, provide both.</p>\n"}], "owner": {"reputation": 4212, "user_id": 4426072, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/60b201e405f47e947422e0c33dff8c31?s=128&d=identicon&r=PG&f=1", "display_name": "DannyMoshe", "link": "https://stackoverflow.com/users/4426072/dannymoshe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4697, "favorite_count": 2, "accepted_answer_id": 30493596, "answer_count": 1, "score": 2, "last_activity_date": 1432762639, "creation_date": 1432760611, "last_edit_date": 1432762167, "question_id": 30493092, "link": "https://stackoverflow.com/questions/30493092/how-to-include-gtk-gtk-h-in-a-c-file", "title": "How to include gtk/gtk.h in a C file", "body": "<p>Im very new to development in C and would like to create a GUI using GTK. Ive already downloaded and installed gtk 3.6.4 bundle. Im trying to compile some example code like this:</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n\nint main(int argc, char *argv[])\n{\n    GtkWidget *window;\n    gtk_init(&amp;argc, &amp;argv);\n    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);\n    gtk_widget_show(window);\n    gtk_main();\n    return 0;\n}\n</code></pre>\n\n<p>I'm really having trouble understanding how to include the header files. I've seen a couple threads which discuss using a pkg-config command like :</p>\n\n<pre><code>pkg-config --cflags --libs gtk+-3.0\n</code></pre>\n\n<p>Where should this code be inserted? It runs on the command window and generates some output but this doesnt solve the error I get in MS visual studio in my code. I apologize in advance for repeating a question but I still am having trouble understanding where this pkg-config code should be run and that is not clear to me from the other responses.</p>\n"}, {"tags": ["c++", "c", "qt", "makefile", "qt-creator"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 2898243, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/knuVM.png?s=128&g=1", "display_name": "Neldar", "link": "https://stackoverflow.com/users/2898243/neldar"}, "edited": false, "score": 0, "creation_date": 1432768573, "post_id": 30493746, "comment_id": 49066941, "body": "Thanks a lot, you put me in the right direction. I had a lot to change, the original makefile use g++ and gcc, so I had to use the right one with the right files, and I had to select the files to compile, the makefile does not compile them all. Now, I managed to make it works, thanks to you."}], "tags": [], "owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "is_accepted": false, "score": 0, "last_activity_date": 1432763328, "creation_date": 1432763328, "answer_id": 30493746, "question_id": 30492967, "link": "https://stackoverflow.com/questions/30492967/adding-makefile-options-into-qtcreator-project/30493746#30493746", "title": "Adding Makefile options into qtcreator project", "body": "<p>The relevant qmake variable is <code>INCLUDEPATH</code>.</p>\n\n<p>So, for the following from the original makefile:</p>\n\n<pre><code>CSINCLUDE = -I${CSDIR}/Include \nPINKINCLUDE = -I${PINKDIR} \nARGVINCLUDE = -I${ARGV} \nPWINCLUDE = -Iinclude\nINCL = ${CSINCLUDE} ${PINKINCLUDE} ${ARGVINCLUDE} ${PWINCLUDE}\n</code></pre>\n\n<p>would be something like this:</p>\n\n<pre><code>INCLUDEPATH += ${CSDIR}/Include \\\n               ${PINKDIR} \\\n               ${ARGV} \\\n               include\n</code></pre>\n\n<p>This is documented in the <a href=\"http://doc.qt.io/qt-5/qmake-manual.html\" rel=\"nofollow\">QMake manual</a> in the <a href=\"http://doc.qt.io/qt-5/qmake-variable-reference.html#includepath\" rel=\"nofollow\">reference pages</a>.</p>\n"}], "owner": {"reputation": 21, "user_id": 2898243, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/knuVM.png?s=128&g=1", "display_name": "Neldar", "link": "https://stackoverflow.com/users/2898243/neldar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432763328, "creation_date": 1432760163, "last_edit_date": 1432760265, "question_id": 30492967, "link": "https://stackoverflow.com/questions/30492967/adding-makefile-options-into-qtcreator-project", "title": "Adding Makefile options into qtcreator project", "body": "<p>I have a project made in qtcreator. The project in itself isn't very important for the question. I would like to add a project called PowerWatershed, the sources are available here:\n<a href=\"http://powerwatershed.sourceforge.net/\" rel=\"nofollow\">PowerWatershed</a></p>\n\n<p>Unfortunately, adding all the files to the .pro file give me an error when compiling, when making the \"make\" command with the Makefile of the PowerWatershed project works.</p>\n\n<p>The makefile of the project is:</p>\n\n<pre><code># Camille Couprie \n# october 2009\n\nOBJDIR  = objects\nPINKDIR = PINK\nCSDIR   = CSparse\nARGV = argv\nPWSRC = src\nVPATH = ${PINKDIR}:${CSDIR}:${ARGV}\n\nCSINCLUDE = -I${CSDIR}/Include \nPINKINCLUDE = -I${PINKDIR} \nARGVINCLUDE = -I${ARGV} \nPWINCLUDE = -Iinclude\nINCL = ${CSINCLUDE} ${PINKINCLUDE} ${ARGVINCLUDE} ${PWINCLUDE}\n\nOBJ=    objects/larith.o \\\nobjects/ccsort.o \\\nobjects/cccodimage.o \\\nobjects/gageodesic.o \\\nobjects/mccodimage.o \\\nobjects/mcimage.o \\\nobjects/mcindic.o \\\nobjects/mclifo.o \\\nobjects/random_walker.o \\\nobjects/lMSF.o \\\nobjects/MSF_RW.o \\\nobjects/mcrbt.o \\\nobjects/union_find.o \\\nobjects/image_toolbox.o \\\nobjects/cs_lu.o \\\nobjects/cs_lusol.o \\\nobjects/cs_malloc.o \\\nobjects/cs_util.o \\\nobjects/cs_multiply.o \\\nobjects/cs_compress.o \\\nobjects/cs_lsolve.o \\\nobjects/cs_scatter.o \\\nobjects/cs_cumsum.o \\\nobjects/cs_sqr.o \\\nobjects/cs_ipvec.o \\\nobjects/cs_amd.o \\\nobjects/cs_permute.o \\\nobjects/cs_transpose.o \\\nobjects/cs_counts.o \\\nobjects/cs_add.o \\\nobjects/cs_etree.o \\\nobjects/cs_leaf.o \\\nobjects/cs_fkeep.o \\\nobjects/cs_tdfs.o \\\nobjects/cs_usolve.o \\\nobjects/cs_spsolve.o \\\nobjects/cs_post.o \\\nobjects/cs_reach.o \\\nobjects/cs_dfs.o \\\nobjects/argv.o  \n#   objects/cs_print.o \\\n#   objects/cs_norm.o \\\n#   \nFLAGS = -g -Wall # -pg \nCXX = g++ \nCC = gcc\n\nOPTIMISE=-O4\nWARNINGS=-Wall #-Werror\nDEBUG=-g\nCXXFLAGS= ${DEBUG} ${WARNINGS} ${OPTIMISE} -Wno-deprecated ${FLAGS}\nCFLAGS = ${DEBUG} ${WARNINGS} ${OPTIMISE} ${FLAGS}\n\nall:    ${CS} ${OBJ}\n${MAKE} powerwatsegm.exe \n\n# make with the Intel compiler, a very good complement to gcc/g++\n# much more efficient and with better diagnoses\nintel: \n${MAKE} CC=icc CXX=icpc all\n\ndebug:\n${MAKE} OPTIMISE='' all\n\n# remove the asserts and the debug information\nproduction:\n${MAKE} DEBUG='' FLAGS=\"-DNDEBUG\" all\n\nclean:\nrm -f *.exe; rm -f *~; rm -f $(OBJ);  #rm -f overlay*; rm -f mask*;  \n\npowerwatsegm.exe: ${PWSRC}/powerwatsegm.c  $(OBJ)\n$(CXX) $(CXXFLAGS) $(INCL) ${PWSRC}/powerwatsegm.c $(OBJ) -o     powerwatsegm.exe \n\n$(OBJDIR)/%.o:  ${PWSRC}/%.c \n$(CXX) $(CXXFLAGS) ${INCL} -c $&lt; -o $@ \n\n$(OBJDIR)/%.o:  ${CSDIR}/Source/%.c ${CSDIR}/Include/cs.h\n$(CC) $(CFLAGS) ${CSINCLUDE} -c $&lt; -o $@\n\n$(OBJDIR)/%.o:  ${PINKDIR}/%.c\n$(CXX) $(CXXFLAGS) ${PINKINCLUDE} -c $&lt; -o $@\n\n$(OBJDIR)/argv.o:   ${ARGV}/argv.c ${ARGV}/argv.h ${ARGV}/argv_loc.h\n$(CC) $(CCFLAGS) ${ARGVINCLUDE} -c $&lt; -o $@\n\n$(OBJDIR)/lMSF.o:   ${PWSRC}/lMSF.c ${PINKDIR}/mcimage.h     ${PINKDIR}/mccodimage.h  \n$(CXX) $(CFLAGS) ${PINKINCLUDE} ${PWINCLUDE} -c ${PWSRC}/lMSF.c -o $@\n</code></pre>\n\n<p>I would like to add th propoer option to my .pro file to make the compilation work. At the moment, my pro file looks like</p>\n\n<pre><code>QT       += core gui\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTARGET = Power\nTEMPLATE = app\n\n\nSOURCES += main.cpp\\\n        mainwindow.cpp \\\n    PW_1.0.1/argv/argv.c \\\n    PW_1.0.1/CSparse/Source/cs_add.c \\\n    PW_1.0.1/CSparse/Source/cs_amd.c \\\n    PW_1.0.1/CSparse/Source/cs_chol.c \\\n    PW_1.0.1/CSparse/Source/cs_cholsol.c \\\n    PW_1.0.1/CSparse/Source/cs_compress.c \\\n    PW_1.0.1/CSparse/Source/cs_counts.c \\\n    PW_1.0.1/CSparse/Source/cs_cumsum.c \\\n    PW_1.0.1/CSparse/Source/cs_dfs.c \\\n    PW_1.0.1/CSparse/Source/cs_etree.c \\\n    PW_1.0.1/CSparse/Source/cs_fkeep.c \\\n    PW_1.0.1/CSparse/Source/cs_ipvec.c \\\n    PW_1.0.1/CSparse/Source/cs_leaf.c \\\n    PW_1.0.1/CSparse/Source/cs_lsolve.c \\\n    PW_1.0.1/CSparse/Source/cs_lu.c \\\n    PW_1.0.1/CSparse/Source/cs_lusol.c \\\n    PW_1.0.1/CSparse/Source/cs_malloc.c \\\n    PW_1.0.1/CSparse/Source/cs_multiply.c \\\n    PW_1.0.1/CSparse/Source/cs_norm.c \\\n    PW_1.0.1/CSparse/Source/cs_permute.c \\\n    PW_1.0.1/CSparse/Source/cs_post.c \\\n    PW_1.0.1/CSparse/Source/cs_print.c \\\n    PW_1.0.1/CSparse/Source/cs_reach.c \\\n    PW_1.0.1/CSparse/Source/cs_scatter.c \\\n    PW_1.0.1/CSparse/Source/cs_spsolve.c \\\n    PW_1.0.1/CSparse/Source/cs_sqr.c \\\n    PW_1.0.1/CSparse/Source/cs_tdfs.c \\\n    PW_1.0.1/CSparse/Source/cs_transpose.c \\\n    PW_1.0.1/CSparse/Source/cs_usolve.c \\\n    PW_1.0.1/CSparse/Source/cs_util.c \\\n    PW_1.0.1/PINK/gageodesic.c \\\n    PW_1.0.1/PINK/larith.c \\\n    PW_1.0.1/PINK/lMSF.c \\\n    PW_1.0.1/PINK/mccodimage.c \\\n    PW_1.0.1/PINK/mcimage.c \\\n    PW_1.0.1/PINK/mcindic.c \\\n    PW_1.0.1/PINK/mclifo.c \\\n    PW_1.0.1/PINK/mcrbt.c \\\n    PW_1.0.1/src/cccodimage.c \\\n    PW_1.0.1/src/ccsort.c \\\n    PW_1.0.1/src/gageodesic.c \\\n    PW_1.0.1/src/image_toolbox.c \\\n    PW_1.0.1/src/lMSF.c \\\n    PW_1.0.1/src/MSF_RW.c \\\n    PW_1.0.1/src/powerwatsegm.c \\\n    PW_1.0.1/src/random_walker.c \\\n    PW_1.0.1/src/union_find.c\n\nHEADERS  += mainwindow.h \\\n    PW_1.0.1/argv/argv.h \\\n    PW_1.0.1/argv/argv_loc.h \\\n    PW_1.0.1/argv/compat.h \\\n    PW_1.0.1/argv/conf.h \\\n    PW_1.0.1/CSparse/Include/cs.h \\\n    PW_1.0.1/include/cccodimage.h \\\n    PW_1.0.1/include/ccsort.h \\\n    PW_1.0.1/include/gageodesic.h \\\n    PW_1.0.1/include/image_toolbox.h \\\n    PW_1.0.1/include/lMSF.h \\\n    PW_1.0.1/include/MSF_RW.h \\\n    PW_1.0.1/include/powerwatsegm.h \\\n    PW_1.0.1/include/random_walker.h \\\n    PW_1.0.1/include/union_find.h \\\n    PW_1.0.1/PINK/larith.h \\\n    PW_1.0.1/PINK/mccodimage.h \\\n    PW_1.0.1/PINK/mcimage.h \\\n    PW_1.0.1/PINK/mcindic.h \\\n    PW_1.0.1/PINK/mclifo.h \\\n    PW_1.0.1/PINK/mcrbt.h \\\n    PW_1.0.1/PINK/mcutil.h\n\nFORMS    += mainwindow.ui\n</code></pre>\n\n<p>And I have the error:</p>\n\n<pre><code>/home/iznogood/Documents/Power/PW_1.0.1/src/gageodesic.c:44: erreur : mccodimage.h: No such file or directory\n #include &lt;mccodimage.h&gt;\n                        ^\n</code></pre>\n\n<p>I think this is a matter of path, which are mentionned in the Makefile with:</p>\n\n<pre><code>OBJDIR  = objects\nPINKDIR = PINK\nCSDIR   = CSparse\nARGV = argv\nPWSRC = src\nVPATH = ${PINKDIR}:${CSDIR}:${ARGV}\n</code></pre>\n\n<p>But I can't manage to add them to the .pro file.</p>\n"}, {"tags": ["c", "arduino", "arduino-uno", "arduino-ide"], "answers": [{"tags": [], "owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "is_accepted": false, "score": 3, "last_activity_date": 1432759857, "creation_date": 1432759857, "answer_id": 30492879, "question_id": 30492730, "link": "https://stackoverflow.com/questions/30492730/arduino-sprintf-in-println-with-f/30492879#30492879", "title": "Arduino sprintf in println with F()", "body": "<p><code>F()</code> is for <em>constant strings</em>. Such as the format strings passed to <code>sprintf()</code>. Not like the variables passed to <code>Serial.println()</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4946480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d935f7d57bd602a5428bd299e5ca671?s=128&d=identicon&r=PG&f=1", "display_name": "Borod", "link": "https://stackoverflow.com/users/4946480/borod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432760939, "creation_date": 1432759236, "last_edit_date": 1432760939, "question_id": 30492730, "link": "https://stackoverflow.com/questions/30492730/arduino-sprintf-in-println-with-f", "title": "Arduino sprintf in println with F()", "body": "<p>Hello I am having problems with my C code , I am trying to println(F(VARIABLE)) but I am getting an error</p>\n\n<pre><code>void setup() {\n    // put your setup code here, to run once:\n    Serial.begin(9600);\n    sendData(25,60);\n}\n\nvoid loop() {\n    // put your main code here, to run repeatedly:    \n}\n\nvoid sendData(float temperature,float batterylvl){\n    char tmp[25];\n    char batt[25];\n    sprintf(tmp, \"temperature=%f\", temperature);\n    sprintf(batt, \"battery=%f\", batterylvl);\n\n    Serial.println(F(tmp));\n    Serial.println(F(batt));      \n}\n</code></pre>\n"}, {"tags": ["c", "haskell", "makefile", "ghc", "webots"], "answers": [{"comments": [{"owner": {"reputation": 1726, "user_id": 2210777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed2b06be7765e94570ace8fb755b266c?s=128&d=identicon&r=PG", "display_name": "FabienRohrer", "link": "https://stackoverflow.com/users/2210777/fabienrohrer"}, "edited": false, "score": 0, "creation_date": 1432842512, "post_id": 30493708, "comment_id": 49106744, "body": "Indeed <code>-lController</code> should link with <code>libController.dylib</code> contained into the <code>&#47;Applications&#47;Webots&#47;lib&#47;</code> path."}], "tags": [], "owner": {"reputation": 14485, "user_id": 190376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8280c5e1491b8cf55760750ed97dec?s=128&d=identicon&r=PG", "display_name": "Reid Barton", "link": "https://stackoverflow.com/users/190376/reid-barton"}, "is_accepted": true, "score": 1, "last_activity_date": 1432763183, "creation_date": 1432763183, "answer_id": 30493708, "question_id": 30492653, "link": "https://stackoverflow.com/questions/30492653/linking-with-ghc/30493708#30493708", "title": "Linking with GHC", "body": "<p>It means the linker can't find those functions/symbols, because you didn't tell it to link with the Webots library.</p>\n\n<p>You need to add <code>-lsomething</code>, assuming the library file name is <code>/Applications/Webots/lib/libsomething.dylib</code> (or <code>libsomething.a</code>).</p>\n"}], "owner": {"reputation": 3209, "user_id": 1276374, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7ce4a877cf573491b23fc6aa1bf18a1d?s=128&d=identicon&r=PG", "display_name": "Boris Mocialov", "link": "https://stackoverflow.com/users/1276374/boris-mocialov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 30493708, "answer_count": 1, "score": 0, "last_activity_date": 1432763183, "creation_date": 1432758957, "last_edit_date": 1432760249, "question_id": 30492653, "link": "https://stackoverflow.com/questions/30492653/linking-with-ghc", "title": "Linking with GHC", "body": "<p>I am following this <a href=\"https://wiki.haskell.org/Calling_Haskell_from_C\" rel=\"nofollow\">short tutorial</a></p>\n\n<p>and trying to compile <em>Webots</em> application (written in C) using GHC (Glasgow Haskell Compiler, Version 7.10.1) with following command:</p>\n\n<pre><code>ghc --make -no-hs-main -optc-O \n-I\"/Applications/Webots/include/controller/c/\" \n-L\"/Applications/Webots/lib/\" \n-outputdir build/release/ \nadvanced_genetic_algorithm_supervisor.c \nSafe \n-o advanced_genetic_algorithm_supervisor\n</code></pre>\n\n<p>and getting the following error during the linking phase:</p>\n\n<pre><code>Linking advanced_genetic_algorithm_supervisor ...\nUndefined symbols for architecture x86_64:\n  \"_wb_display_draw_text\", referenced from:\n      _main in advanced_genetic_algorithm_supervisor.o\n  \"_wb_display_get_height\", referenced from:\n      _main in advanced_genetic_algorithm_supervisor.o\n  \"_wb_display_get_width\", referenced from:\n      _main in advanced_genetic_algorithm_supervisor.o\n  \"_wb_emitter_send\", referenced from:\n      _evaluate_genotype in advanced_genetic_algorithm_supervisor.o\n  \"_wb_receiver_enable\", referenced from:\n      _main in advanced_genetic_algorithm_supervisor.o\n  \"_wb_receiver_get_data\", referenced from:\n      _check_for_slaves_data in advanced_genetic_algorithm_supervisor.o\n  \"_wb_receiver_get_queue_length\", referenced from:\n      _check_for_slaves_data in advanced_genetic_algorithm_supervisor.o\n  \"_wb_receiver_next_packet\", referenced from:\n      _check_for_slaves_data in advanced_genetic_algorithm_supervisor.o\n  \"_wb_robot_cleanup\", referenced from:\n      _run_optimization in advanced_genetic_algorithm_supervisor.o\n  \"_wb_robot_get_basic_time_step\", referenced from:\n      _main in advanced_genetic_algorithm_supervisor.o\n  \"_wb_robot_get_device\", referenced from:\n      _main in advanced_genetic_algorithm_supervisor.o\n  \"_wb_robot_init\", referenced from:\n      _main in advanced_genetic_algorithm_supervisor.o\n  \"_wb_robot_step\", referenced from:\n      _run_seconds in advanced_genetic_algorithm_supervisor.o\n      _evaluate_genotype in advanced_genetic_algorithm_supervisor.o\n  \"_wb_supervisor_field_get_sf_rotation\", referenced from:\n      _main in advanced_genetic_algorithm_supervisor.o\n  \"_wb_supervisor_field_get_sf_vec3f\", referenced from:\n      _main in advanced_genetic_algorithm_supervisor.o\n  \"_wb_supervisor_field_set_sf_rotation\", referenced from:\n      _evaluate_genotype in advanced_genetic_algorithm_supervisor.o\n  \"_wb_supervisor_field_set_sf_vec3f\", referenced from:\n      _evaluate_genotype in advanced_genetic_algorithm_supervisor.o\n  \"_wb_supervisor_node_get_field\", referenced from:\n      _main in advanced_genetic_algorithm_supervisor.o\n  \"_wb_supervisor_node_get_from_def\", referenced from:\n      _main in advanced_genetic_algorithm_supervisor.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>I believe that it means that the compiler cannot find functions ('symbols'), although it managed to pass through compilation process parsing all includes specified in the program using -I path</p>\n"}, {"tags": ["c", "windows", "console-application", "windows-console"], "comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432758731, "post_id": 30492563, "comment_id": 49062980, "body": "The <code>Press any key to continue</code> prompt can be triggered with <code>system(&quot;pause&quot;)</code>. Open <code>cmd.exe</code>, type <code>pause</code> and see what happens."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1432758783, "post_id": 30492563, "comment_id": 49063006, "body": "Show general options with <code>&#47;?</code> only, and full help with <code>&#47;? topic1</code>, <code>&#47;? topic2</code> etc."}, {"owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432758794, "post_id": 30492563, "comment_id": 49063012, "body": "@szczurcio: I know that, but I assume this behaviour is done somehow else, since if the window size changes, the message will be displayed less."}, {"owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1432758852, "post_id": 30492563, "comment_id": 49063046, "body": "@Jongware: That&#39;s an option too, but I like to use the method cmd uses. How does cmd do that?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1432758877, "post_id": 30492563, "comment_id": 49063058, "body": "It probably begins with asking the console window how big it is."}, {"owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1432758932, "post_id": 30492563, "comment_id": 49063088, "body": "@Jongware: Probably, but I don&#39;t know which APIs to use. If I could see an example, it would be helpful, but I have no Idea where to begin."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1432759018, "post_id": 30492563, "comment_id": 49063127, "body": "Google suggests this SO question (not a total surprise): <a href=\"http://stackoverflow.com/questions/10921152/how-to-get-windows-console-height\" title=\"how to get windows console height\">stackoverflow.com/questions/10921152/&hellip;</a> Note the note - perhaps it ought to be integrated in the answer, or added as a standalone answer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1432759117, "post_id": 30492563, "comment_id": 49063181, "body": "Pipe the output through a pager like less."}], "answers": [{"tags": [], "owner": {"reputation": 12011, "user_id": 641451, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/IcOuq.jpg?s=128&g=1", "display_name": "mgarciaisaia", "link": "https://stackoverflow.com/users/641451/mgarciaisaia"}, "is_accepted": false, "score": 0, "last_activity_date": 1432767527, "creation_date": 1432767527, "answer_id": 30494525, "question_id": 30492563, "link": "https://stackoverflow.com/questions/30492563/how-to-show-a-long-usage-information-with-press-any-key-to-continue-message/30494525#30494525", "title": "How to show a long usage information with &quot;Press any key to continue&quot; message?", "body": "<p>I don't know <em>how</em> you would execute it, but what you need is a <a href=\"http://en.wikipedia.org/wiki/Terminal_pager\" rel=\"nofollow\">pager</a>.</p>\n\n<p>I haven't tested it, but <a href=\"http://www.computerhope.com/morehlp.htm\" rel=\"nofollow\">here</a> it says the <code>more</code> command is available in MS-DOS and most Windows versions (Windows 95, 98, ME, NT, 2000, XP, Vista, 7 &amp; 8).</p>\n\n<p>If you were running it standalone, you'd do <code>echo some-long-text | more</code>. I don't know how you'd use this from your own program, but that should be the way (I imagine there should be something like POSIX's <code>system()</code> syscall to run a command).</p>\n"}], "owner": {"reputation": 2172, "user_id": 178878, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ab776d9e9a3043f815553db0bceddd5c?s=128&d=identicon&r=PG", "display_name": "kampi", "link": "https://stackoverflow.com/users/178878/kampi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432767527, "creation_date": 1432758648, "last_edit_date": 1432759231, "question_id": 30492563, "link": "https://stackoverflow.com/questions/30492563/how-to-show-a-long-usage-information-with-press-any-key-to-continue-message", "title": "How to show a long usage information with &quot;Press any key to continue&quot; message?", "body": "<p>Sorry, this might be a simple question, but I can't find a solution to that. I have a console application, which has several parameters. I show a usage information, how to use the application correctly, but since I have to explain each parameter it is very long. The whole usage won't fit in the console window.</p>\n\n<p>So how can I display only that much from the usage which fits to actual window size?</p>\n\n<p>A good example is <code>cmd</code>. If you open a command prompt, and then type <code>cmd /?</code> the usage information will be shown, but it will only show that much of the usage which will fit to the actual window size, and then waits for a keypress. If the window is small, you have to press a key 7 times. But if you make the console window bigger you have to press a key less.</p>\n\n<p>So my question, how can I achieve this?</p>\n"}, {"tags": ["c", "intrinsics", "avx"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1432757855, "post_id": 30492092, "comment_id": 49062566, "body": "pre meture optimization, just memcpy"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4580220"}, "edited": false, "score": 0, "creation_date": 1432757938, "post_id": 30492092, "comment_id": 49062592, "body": "Why not use simple bit shifting?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1432758095, "post_id": 30492092, "comment_id": 49062690, "body": "Are you sure you want big-endian semantics?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 1, "creation_date": 1432760370, "post_id": 30492092, "comment_id": 49063765, "body": "I hope you really meant for that data to be reversed, because if it&#39;s supposed to be the right way around this would be actually trivial (no-op, just cast the pointer)."}, {"owner": {"reputation": 74, "user_id": 4129707, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/TIkHf.jpg?s=128&g=1", "display_name": "baton", "link": "https://stackoverflow.com/users/4129707/baton"}, "edited": false, "score": 0, "creation_date": 1432823230, "post_id": 30492092, "comment_id": 49094316, "body": "user3528438: memcpy does not work - it was my first idea. GRC: I do not know how :-( chqrlie&amp;harold: yes I am sure."}], "answers": [{"comments": [{"owner": {"reputation": 74, "user_id": 4129707, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/TIkHf.jpg?s=128&g=1", "display_name": "baton", "link": "https://stackoverflow.com/users/4129707/baton"}, "edited": false, "score": 0, "creation_date": 1432762493, "post_id": 30492828, "comment_id": 49064826, "body": "Thanks for your replay. Unfortunatelly I cannot use AVX2 instructions :-( But showing me that current solution is not good is very helpful. I will look further."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 74, "user_id": 4129707, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/TIkHf.jpg?s=128&g=1", "display_name": "baton", "link": "https://stackoverflow.com/users/4129707/baton"}, "edited": false, "score": 0, "creation_date": 1432806124, "post_id": 30492828, "comment_id": 49081371, "body": "@baton, use SSE and shuffle then."}], "tags": [], "owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "is_accepted": false, "score": 3, "last_activity_date": 1432760280, "last_edit_date": 1432760280, "creation_date": 1432759635, "answer_id": 30492828, "question_id": 30492092, "link": "https://stackoverflow.com/questions/30492092/how-to-build-32bit-integers-from-array-of-8bit-integers-using-intel-intrinsics/30492828#30492828", "title": "How to build 32bit integers from array of 8bit integers using Intel intrinsics?", "body": "<p>As usual, check the disassembly. Then as it turns out, with the compiler I used anyway, that it relies on that data being a compile time constant, and it rearranges it so that it can be loaded easily. If that is <em>actually</em> the case in your real code, this is fine (but then why not use an array of uints to begin with?). But if, as I suspect it is, this is just an example and the actual array with be variable, this is a disaster, just look at it:</p>\n\n<pre><code>movzx   eax, BYTE PTR [rsp+95]\nxor ebx, ebx\nmov BYTE PTR [rsp], al\nmovzx   eax, BYTE PTR [rsp+93]\nvmovd   xmm7, DWORD PTR [rsp]\nvpinsrb xmm7, xmm7, BYTE PTR [rsp+94], 1\nmov BYTE PTR [rsp], al\nmovzx   eax, BYTE PTR [rsp+91]\nvmovd   xmm3, DWORD PTR [rsp]\nvpinsrb xmm3, xmm3, BYTE PTR [rsp+92], 1\nmov BYTE PTR [rsp], al\nmovzx   eax, BYTE PTR [rsp+89]\nvmovd   xmm1, DWORD PTR [rsp]\nvpinsrb xmm1, xmm1, BYTE PTR [rsp+90], 1\nmov BYTE PTR [rsp], al\nmovzx   eax, BYTE PTR [rsp+87]\nvmovd   xmm6, DWORD PTR [rsp]\nvpunpcklwd  xmm3, xmm7, xmm3\nvpinsrb xmm6, xmm6, BYTE PTR [rsp+88], 1\nmov BYTE PTR [rsp], al\nmovzx   eax, BYTE PTR [rsp+85]\nvmovd   xmm5, DWORD PTR [rsp]\nvpinsrb xmm5, xmm5, BYTE PTR [rsp+86], 1\nmov BYTE PTR [rsp], al\nmovzx   eax, BYTE PTR [rsp+83]\nvmovd   xmm2, DWORD PTR [rsp]\nvpunpcklwd  xmm1, xmm1, xmm6\nvpinsrb xmm2, xmm2, BYTE PTR [rsp+84], 1\nmov BYTE PTR [rsp], al\nmovzx   eax, BYTE PTR [rsp+81]\nvmovd   xmm0, DWORD PTR [rsp]\nvpunpckldq  xmm1, xmm3, xmm1\nvpinsrb xmm0, xmm0, BYTE PTR [rsp+82], 1\nmov BYTE PTR [rsp], al\nmovzx   eax, BYTE PTR [rsp+79]\nvmovd   xmm4, DWORD PTR [rsp]\nvpunpcklwd  xmm2, xmm5, xmm2\nvpinsrb xmm4, xmm4, BYTE PTR [rsp+80], 1\nmov BYTE PTR [rsp], al\nmovzx   eax, BYTE PTR [rsp+77]\nvmovd   xmm8, DWORD PTR [rsp]\nvpinsrb xmm8, xmm8, BYTE PTR [rsp+78], 1\nmov BYTE PTR [rsp], al\nmovzx   eax, BYTE PTR [rsp+75]\nvpunpcklwd  xmm0, xmm0, xmm4\nvmovd   xmm4, DWORD PTR [rsp]\nvpinsrb xmm4, xmm4, BYTE PTR [rsp+76], 1\nmov BYTE PTR [rsp], al\nmovzx   eax, BYTE PTR [rsp+73]\nvpunpckldq  xmm0, xmm2, xmm0\nvmovd   xmm2, DWORD PTR [rsp]\nvpinsrb xmm2, xmm2, BYTE PTR [rsp+74], 1\nmov BYTE PTR [rsp], al\nmovzx   eax, BYTE PTR [rsp+71]\nvmovd   xmm7, DWORD PTR [rsp]\nvpunpcklqdq xmm1, xmm1, xmm0\nvpunpcklwd  xmm4, xmm8, xmm4\nvpinsrb xmm7, xmm7, BYTE PTR [rsp+72], 1\nmov BYTE PTR [rsp], al\nmovzx   eax, BYTE PTR [rsp+69]\nvmovd   xmm6, DWORD PTR [rsp]\nvpinsrb xmm6, xmm6, BYTE PTR [rsp+70], 1\nmov BYTE PTR [rsp], al\nmovzx   eax, BYTE PTR [rsp+67]\nvmovd   xmm0, DWORD PTR [rsp]\nvpunpcklwd  xmm2, xmm2, xmm7\nvpinsrb xmm0, xmm0, BYTE PTR [rsp+68], 1\nmov BYTE PTR [rsp], al\nmovzx   eax, BYTE PTR [rsp+65]\nvmovd   xmm5, DWORD PTR [rsp]\nvpunpckldq  xmm2, xmm4, xmm2\nvpinsrb xmm5, xmm5, BYTE PTR [rsp+66], 1\nmov BYTE PTR [rsp], al\nvmovd   xmm3, DWORD PTR [rsp]\nvpunpcklwd  xmm0, xmm6, xmm0\nvpinsrb xmm3, xmm3, BYTE PTR [rsp+64], 1\nvpunpcklwd  xmm3, xmm5, xmm3\nvpunpckldq  xmm0, xmm0, xmm3\nvpunpcklqdq xmm0, xmm2, xmm0\nvinserti128 ymm0, ymm1, xmm0, 0x1\nvmovdqa YMMWORD PTR [rsp+32], ymm0\n</code></pre>\n\n<p>Wow. Ok, not so good. Indeed worse than if the same thing was done without intrinsics, but not all is lost. It would be better to load the data as little endian uints, and then swap them around with a <code>_mm256_shuffle_epi8</code>, sort of like this (but check that shuffle mask, I didn't test it)</p>\n\n<pre><code>__m256i ymm9 = _mm256_shuffle_epi8(_mm256_load_si256((__m256i*)block), _mm256_set_epi8(\n    0, 1, 2, 3,\n    4, 5, 6, 7,\n    8, 9, 10, 11,\n    12, 13, 14, 15,\n    0, 1, 2, 3,\n    4, 5, 6, 7,\n    8, 9, 10, 11,\n    12, 13, 14, 15));\nymm9 = _mm256_permute2x128_si256(ymm9, ymm9, 1);\n_mm256_store_si256((__m256i*)m, ymm9);\n</code></pre>\n\n<p>In general, be very careful with the \"set\" family of intrinsics, they can compile to very bad instruction sequences.</p>\n"}, {"comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1432835231, "post_id": 30510965, "comment_id": 49102382, "body": "Shouldn&#39;t you also swap the high 16 bytes with the low 16 bytes? The original code did that. That&#39;s a trivial change though. The code itself looks fine, but I think you disassembled the wrong functions there"}, {"owner": {"reputation": 74, "user_id": 4129707, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/TIkHf.jpg?s=128&g=1", "display_name": "baton", "link": "https://stackoverflow.com/users/4129707/baton"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1432884786, "post_id": 30510965, "comment_id": 49121059, "body": "I shuffle all 32 bytes in 2 steps - 16 bytes in each."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1432885756, "post_id": 30510965, "comment_id": 49121643, "body": "Yes but what I mean is, shouldn&#39;t the first 16 bytes from the source go into the second 16 bytes of the destination? In that big <code>_mm256_set_epi8</code> you had in your first post, you started with the 0th byte in the top"}, {"owner": {"reputation": 74, "user_id": 4129707, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/TIkHf.jpg?s=128&g=1", "display_name": "baton", "link": "https://stackoverflow.com/users/4129707/baton"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1433057461, "post_id": 30510965, "comment_id": 49181841, "body": "I do not think so. Result is the same as expected."}], "tags": [], "owner": {"reputation": 74, "user_id": 4129707, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/TIkHf.jpg?s=128&g=1", "display_name": "baton", "link": "https://stackoverflow.com/users/4129707/baton"}, "is_accepted": false, "score": 1, "last_activity_date": 1432827023, "creation_date": 1432827023, "answer_id": 30510965, "question_id": 30492092, "link": "https://stackoverflow.com/questions/30492092/how-to-build-32bit-integers-from-array-of-8bit-integers-using-intel-intrinsics/30510965#30510965", "title": "How to build 32bit integers from array of 8bit integers using Intel intrinsics?", "body": "<p>Thanks all for comments. Especially harold's and Zboson's.</p>\n\n<p>This is my second try:</p>\n\n<pre><code>const uint8_t block[32] __attribute((aligned(32))) = {\n  0x00,0x11,0x22,0x33,0x44,0x55,0x66,0x77,\n  0x88,0x99,0xaa,0xbb,0xcc,0xdd,0xee,0xff,\n  0x00,0x11,0x22,0x33,0x44,0x55,0x66,0x77,\n  0x88,0x99,0xaa,0xbb,0xcc,0xdd,0xee,0xff};\nuint32_t m[8] __attribute((aligned(32)));\nconst uint8_t maska[16] __attribute((aligned(16))) = {\n  0x0F,0x0E,0x0D,0x0C,0x0B,0x0A,0x09,0x08,\n  0x07,0x06,0x05,0x04,0x03,0x02,0x01,0x00};\n__m128i mask = _mm_load_si128(maska);\n__m128i xmm0 = _mm_load_si128(block);\n_mm_store_si128((__m128i*)&amp;(m[0]),_mm_shuffle_epi8(xmm0, mask));\nxmm0 = _mm_load_si128(block+16);\n_mm_store_si128((__m128i*)&amp;(m[4]),_mm_shuffle_epi8(xmm0, mask));\n</code></pre>\n\n<p>What do you think about that ? I am pretty sure there is a room for improvment. I do not know if _mm_load_si128 is the best way to copy data from memory to register. Assembler for first iteration:</p>\n\n<pre><code>/* Create a vector with element 0 as *P and the rest zero.  */\n\nextern __inline __m128i __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n_mm_load_si128 (__m128i const *__P)\n{\nreturn *__P;\nmov    0x8(%rsp),%rax\nvmovdqa (%rax),%xmm0\n    0x0F,0x0E,0x0D,0x0C,0x0B,0x0A,0x09,0x08,\n    0x07,0x06,0x05,0x04,0x03,0x02,0x01,0x00};\n__m128i mask = _mm_load_si128(maska);\nvmovdqa %xmm0,0x30(%rsp)\nlea    0xf0(%rsp),%rax\nmov    %rax,0x10(%rsp)\nmov    0x10(%rsp),%rax\nvmovdqa (%rax),%xmm0\n__m128i xmm0 = _mm_load_si128(block);\nvmovdqa %xmm0,0x40(%rsp)\nvmovdqa 0x40(%rsp),%xmm0\nvmovdqa %xmm0,0x50(%rsp)\nvmovdqa 0x30(%rsp),%xmm0\nvmovdqa %xmm0,0x60(%rsp)\n}\n\nextern __inline __m128i __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n_mm_shuffle_epi8 (__m128i __X, __m128i __Y)\n{\nreturn (__m128i) __builtin_ia32_pshufb128 ((__v16qi)__X, (__v16qi)__Y);\nvmovdqa 0x60(%rsp),%xmm1\nvmovdqa 0x50(%rsp),%xmm0\nvpshufb %xmm1,%xmm0,%xmm0\nlea    0xb0(%rsp),%rax\nmov    %rax,0x18(%rsp)\nvmovdqa %xmm0,0x70(%rsp)\n}\n\nextern __inline void __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n_mm_store_si128 (__m128i *__P, __m128i __B)\n{\n*__P = __B;\nmov    0x18(%rsp),%rax\nvmovdqa 0x70(%rsp),%xmm0\nvmovdqa %xmm0,(%rax)\nlea    0xf0(%rsp),%rax\nadd    $0x10,%rax\nmov    %rax,0x20(%rsp)\n</code></pre>\n\n<p>What do you think ?</p>\n"}], "owner": {"reputation": 74, "user_id": 4129707, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/TIkHf.jpg?s=128&g=1", "display_name": "baton", "link": "https://stackoverflow.com/users/4129707/baton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1432827023, "creation_date": 1432756997, "question_id": 30492092, "link": "https://stackoverflow.com/questions/30492092/how-to-build-32bit-integers-from-array-of-8bit-integers-using-intel-intrinsics", "title": "How to build 32bit integers from array of 8bit integers using Intel intrinsics?", "body": "<p>I have an array which consists of 32 bytes. I need to build 8 4 bytes integers out of this array. E.g\n0x00,0x11,0x22,0x33 8bit ints need to be one 0x00112233 32bit int.\nI decided to use AVX instructions because I can load whole array to a register with one command.</p>\n\n<p>Code I wrote:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"immintrin.h\"\n\ntypedef unsigned int        uint32_t;\ntypedef unsigned char       uint8_t;\n\nmain() {\n  const uint8_t block[32] __attribute((aligned(32))) = {\n   0x00,0x11,0x22,0x33,0x44,0x55,0x66,0x77,0x88,0x99,0xaa,0xbb,0xcc,0xdd,0xee,0xff\n  ,0x00,0x11,0x22,0x33,0x44,0x55,0x66,0x77,0x88,0x99,0xaa,0xbb,0xcc,0xdd,0xee,0xff\n  };\n  uint32_t m[8] __attribute((aligned(32)));\n\n  __m256i ymm9 = _mm256_set_epi8(\n        block[ 0],block[ 1],block[ 2],block[ 3],block[ 4],block[ 5],block[ 6],block[ 7],\n        block[ 8],block[ 9],block[10],block[11],block[12],block[13],block[14],block[15],\n        block[16],block[17],block[18],block[19],block[20],block[21],block[22],block[23],\n        block[24],block[25],block[26],block[27],block[28],block[29],block[30],block[31]);\n  _mm256_store_si256(&amp;(m[0]),ymm9);\n  int i;\n  for(i=0;i&lt;32;++i) printf(\"i=%d, 0x%02x\\n\",i,block[i]);\n  for(i=0;i&lt;8;++i) printf(\"i=%d, 0x%08x\\n\",i,m[i]);\n}\n</code></pre>\n\n<p>Do you think it is optimal in terms of performance ? Can it be done better and run faster ? I use Linux @x86_64 and gcc 4.8.2.</p>\n\n<p>I am a beginner in the world of Intel intrinsics. Thanks for your help.</p>\n"}, {"tags": ["c", "parallel-processing", "segmentation-fault", "mpi"], "comments": [{"owner": {"reputation": 21234, "user_id": 274261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3be1df1fa2e3588564cdd9a4f517ad0?s=128&d=identicon&r=PG", "display_name": "ArjunShankar", "link": "https://stackoverflow.com/users/274261/arjunshankar"}, "edited": false, "score": 3, "creation_date": 1432760824, "post_id": 30492074, "comment_id": 49063994, "body": "Consider making it as easy as possible for others to help you. i.e. do not dump snippets of seemingly unrelated code. And do not dump your entire program here. Instead, try to delete blocks of the code that are not relevant to the problem while still reproducing your bug. i.e. try to produce a <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">short, self contained, compilable example</a>. Then paste that. What you&#39;ve pasted here is so disconnected most people won&#39;t even feel like reading it."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1432788123, "post_id": 30492074, "comment_id": 49071617, "body": "Variable <code>P</code> is used without being initialized first!"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 4889266, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e3d54f0040e8ed236567336794e83ed?s=128&d=identicon&r=PG&f=1", "display_name": "TCMSSS", "link": "https://stackoverflow.com/users/4889266/tcmsss"}, "edited": false, "score": 0, "creation_date": 1432803042, "post_id": 30497166, "comment_id": 49079190, "body": "thanks for the answer. I already make that change, and now it works, but only for 1 processor. When I use 2 or more process&#39;s, i still have the segmentation fault error"}], "tags": [], "owner": {"reputation": 900, "user_id": 4639394, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-70_dUZwwcZo/AAAAAAAAAAI/AAAAAAAABlk/m3YuUmA_K3Q/photo.jpg?sz=128", "display_name": "Patrick", "link": "https://stackoverflow.com/users/4639394/patrick"}, "is_accepted": false, "score": 1, "last_activity_date": 1432786606, "creation_date": 1432786606, "answer_id": 30497166, "question_id": 30492074, "link": "https://stackoverflow.com/questions/30492074/mpi-scatter-segmentation-fault-signal-11/30497166#30497166", "title": "MPI_Scatter segmentation fault (signal 11)", "body": "<p>You cannot directly send a 2-D matrix (<code>double**</code>). Instead, you have to pass the address of the actual data: <code>&amp;A[0][0]</code>. For receiving, you also have to pass an address to where the data is actually stored. In your case this would be: <code>&amp;A[from][0]</code> instead of <code>&amp;A[from]</code>.</p>\n\n<p>Try this as the scatter:</p>\n\n<pre><code>MPI_Scatter(&amp;A[0][0], N*N/P, MPI_INT, &amp;A[from][0], N*N/P, MPI_INT, 0, MPI_COMM_WORLD);\n</code></pre>\n\n<p>On another note, on the receiving process all values in <code>A</code> other than those received will remain invalid. You might want to consider creating a separate receive buffer of the size required:</p>\n\n<pre><code>double* local_A = (double*)malloc(sizeof(double)*N*N/P);\nMPI_Scatter(&amp;A[0][0], N*N/P, MPI_INT, local_A, N*N/P, MPI_INT, 0, MPI_COMM_WORLD);\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 4889266, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e3d54f0040e8ed236567336794e83ed?s=128&d=identicon&r=PG&f=1", "display_name": "TCMSSS", "link": "https://stackoverflow.com/users/4889266/tcmsss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1148, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432786606, "creation_date": 1432756941, "question_id": 30492074, "link": "https://stackoverflow.com/questions/30492074/mpi-scatter-segmentation-fault-signal-11", "title": "MPI_Scatter segmentation fault (signal 11)", "body": "<p>I'm trying to Parallelize some piece of code that calculates matrices, but I'm getting segmentation fault error. I already debug the code, but I cant find out the problem.</p>\n\n<p>Here is the snippet where I declare the matrice:</p>\n\n<pre><code>double **A, **B, **C, *tmp1,*tmp2,*tmp3;\nint N;\nint myrank, P, from, to;\n\nN = 100;\n\ntmp1 = (double *) malloc (sizeof(double ) * N * N);\ntmp2 = (double *) malloc (sizeof(double ) * N * N);\ntmp3 = (double *) malloc (sizeof(double ) * N * N);\nA = (double **) malloc (sizeof(double *) * N);\nB = (double **) malloc (sizeof(double *) * N);\nC = (double **) malloc (sizeof(double *) * N);\n\nfrom = myrank * N/P;\nto = (myrank+1) * N/P;\n</code></pre>\n\n<p>Then here is where I inicialize the MPI</p>\n\n<pre><code>MPI_Init (&amp;argc, &amp;argv);\nMPI_Comm_rank(MPI_COMM_WORLD, &amp;myrank);\nMPI_Comm_size(MPI_COMM_WORLD, &amp;P);\n</code></pre>\n\n<p>But somehow, I can't scatter...</p>\n\n<pre><code>MPI_Bcast(B, N*N, MPI_INT, 0, MPI_COMM_WORLD);\n\nprintf(\"Rank: %d\\n\", myrank);\n\nMPI_Scatter(A, N*N/P, MPI_INT, &amp;A[from], N*N/P, MPI_INT, 0, MPI_COMM_WORLD);\n</code></pre>\n\n<p>I can't wrote all the code here because I'm not allowed...But the problem is in Scatter it self. What I'am doing wrong?</p>\n"}, {"tags": ["c++", "c", "gcc", "pthreads", "glib"], "comments": [{"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1432756520, "post_id": 30491839, "comment_id": 49061787, "body": "When you compile and link, do you specify whatever flag your platform requires for pthreads support? (Probably <code>-pthread</code>.)"}, {"owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "edited": false, "score": 0, "creation_date": 1432759888, "post_id": 30491839, "comment_id": 49063527, "body": "Which <code>glibc</code> version do you use?"}, {"owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "edited": false, "score": 0, "creation_date": 1432761697, "post_id": 30491839, "comment_id": 49064426, "body": "If you set a breakpoint in <code>pthread_cond_init</code>, does it stop at <code>pthread_cond_init@@GLIBC_2.3.2</code>? Or is there another GLIBC number?"}, {"owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "reply_to_user": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1432762343, "post_id": 30491839, "comment_id": 49064758, "body": "@DavidSchwartz, yes I am compiling with <code>-pthread</code> and <code>-D _REENTRANT</code>"}, {"owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "reply_to_user": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "edited": false, "score": 0, "creation_date": 1432762451, "post_id": 30491839, "comment_id": 49064814, "body": "@4566976, I&#39;m using glibc 2.5 - an very old version"}], "answers": [{"tags": [], "owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "is_accepted": false, "score": 0, "last_activity_date": 1432833494, "last_edit_date": 1432833494, "creation_date": 1432829138, "answer_id": 30511764, "question_id": 30491839, "link": "https://stackoverflow.com/questions/30491839/pthread-library-fails-when-called-from-static-constructor-code/30511764#30511764", "title": "pthread library fails when called from static constructor code", "body": "<p>In <code>glibc-2.5</code> there are two versions of <code>pthread_cond_init</code>. The old one, which is probably used, has a comment that</p>\n\n<blockquote>\n  <p>neither clocks other than CLOCK_REALTIME</p>\n</blockquote>\n\n<p>are supported, and <code>EINVAL</code> can be returned.</p>\n\n<p>In line <a href=\"https://github.com/djdeath/glib/blob/master/glib/gthread-posix.c\" rel=\"nofollow\">642</a> of <code>gthread-posix.c</code> there's the call</p>\n\n<pre><code>pthread_condattr_setclock (&amp;attr, CLOCK_MONOTONIC);\n</code></pre>\n\n<p>which probably causes the return of <code>EINVAL</code> from <code>pthread_cond_init</code>.</p>\n\n<p>If you can recompile your <code>glib</code> you could undefine <code>HAVE_PTHREAD_CONDATTR_SETCLOCK</code>.</p>\n\n<p>Otherwise I would update the <code>glibc</code> if possible.</p>\n"}], "owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 980, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1432833494, "creation_date": 1432756029, "last_edit_date": 1432756456, "question_id": 30491839, "link": "https://stackoverflow.com/questions/30491839/pthread-library-fails-when-called-from-static-constructor-code", "title": "pthread library fails when called from static constructor code", "body": "<p>I have a C++ shared library object which incorporates the <a href=\"https://developer.gnome.org/glib/\" rel=\"nofollow\">GLib library</a>.</p>\n\n<p>When I create a minimal test program with an <strong>empty <code>main()</code></strong> function, and I link with the shared library, the program aborts immediately at runtime with the following GLib error message:</p>\n\n<pre><code>GLib (gthread-posix.c): Unexpected error from C library during 'pthread_cond_init': Invalid argument.  Aborting.\n</code></pre>\n\n<p>Since my main function is empty, the error must be happening in some pre-main initialization function somewhere.  So, using GDB I found that GLib has a static initialization constructor function (in <code>glib-init.c</code>) which it calls at runtime before <code>main()</code>.  Within that initialization function, it calls <code>pthread_cond_init</code>, which mysteriously fails.</p>\n\n<p>Here is the complete backtrace:</p>\n\n<pre><code>(gdb) run\nStarting program: ~/example\nwarning: no loadable sections found in added symbol-file system-supplied DSO at 0x2aaaaaaab000\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib64/libthread_db.so.1\".\nGLib (gthread-posix.c): Unexpected error from C library during 'pthread_cond_init': Invalid argument.  Aborting.\n\nProgram received signal SIGABRT, Aborted.\n0x0000003891830265 in raise () from /lib64/libc.so.6\n(gdb) bt\n#0  0x0000003891830265 in raise () from /lib64/libc.so.6\n#1  0x0000003891831d10 in abort () from /lib64/libc.so.6\n#2  0x00002aaaab9aed32 in g_thread_abort (status=22,\n    function=0x2aaaabcbdd2b \"pthread_cond_init\")\n    at ~/libs/glib/gthread-posix.c:75\n#3  0x00002aaaab9af349 in g_cond_impl_new ()\n    at ~/libs/glib/gthread-posix.c:656\n#4  0x00002aaaab9af39b in g_cond_get_impl (\n    cond=0x2aaaac15f690 &lt;g_once_cond&gt;)\n    at ~/libs/glib/gthread-posix.c:677\n#5  0x00002aaaab9af4b2 in g_cond_broadcast (\n    cond=0x2aaaac15f690 &lt;g_once_cond&gt;)\n    at ~/libs/glib/gthread-posix.c:792\n#6  0x00002aaaab9ab529 in g_once_init_leave (\n    location=0x2aaaac160510 &lt;g_define_type_id__volatile.11714&gt;,\n    result=6524000) at ~/libs/glib/gthread.c:682\n#7  0x00002aaaaba34a2f in g_value_array_get_type ()\n    at ~/libs/gobject/gboxed.c:132\n#8  0x00002aaaaba41b28 in _g_param_spec_types_init ()\n    at ~/libs/gobject/gparamspecs.c:1511\n#9  0x00002aaaaba30c72 in gobject_init_ctor ()\n    at ~/libs/gobject/gtype.c:4391\n#10 0x00002aaaabb2bc36 in __do_global_ctors_aux ()\n   from ./MYLIB.so\n#11 0x00002aaaaad368eb in _init () from ./MYLIB.so\n#12 0x00002aaab0180e60 in ?? ()\n#13 0x000000389140d4ab in call_init ()\n  from /lib64/ld-linux-x86-64.so.2\n#14 0x000000389140d5b5 in _dl_init_internal ()\n   from /lib64/ld-linux-x86-64.so.2\n#15 0x0000003891400aaa in _dl_start_user ()\n   from /lib64/ld-linux-x86-64.so.2\n#16 0x0000000000000001 in ?? ()\n#17 0x00007fffffffe6de in ?? ()\n#18 0x0000000000000000 in ?? ()\n</code></pre>\n\n<p>So, my first thought was perhaps the <code>.so</code> file isn't properly linked with the pthread library.  So, I used the <code>ldd</code> utility to check how it is linking to pthread:</p>\n\n<pre><code>$ ldd MYLIB.so\n        linux-vdso.so.1 =&gt;  (0x00007fff56ed1000)\n        libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00002b8a747bf000)\n        librt.so.1 =&gt; /lib64/librt.so.1 (0x00002b8a749db000)\n        libpng12.so.0 =&gt; /usr/lib64/libpng12.so.0 (0x00002b8a74be5000)\n        libfontconfig.so.1 =&gt; /usr/lib64/libfontconfig.so.1 (0x00002b8a74e09000)\n        libz.so.1 =&gt; /lib64/libz.so.1 (0x00002b8a7503d000)\n        libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00002b8a75252000)\n        libstdc++.so.6 =&gt; /usr/lib64/libstdc++.so.6 (0x00002b8a75456000)\n        libm.so.6 =&gt; /lib64/libm.so.6 (0x00002b8a75756000)\n        libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00002b8a759da000)\n        libc.so.6 =&gt; /lib64/libc.so.6 (0x00002b8a75be8000)\n        /lib64/ld-linux-x86-64.so.2 (0x0000003891400000)\n        libfreetype.so.6 =&gt; /usr/lib64/libfreetype.so.6 (0x00002b8a75f41000)\n        libexpat.so.0 =&gt; /lib64/libexpat.so.0 (0x00002b8a761c6000)\n</code></pre>\n\n<p>So, it is properly linked with libpthread via <code>/usr/lib64/pthread.so.0</code></p>\n\n<p>So then I looked at the GLib source code that is failing on <code>pthread_cond_init</code>.  It's very straightforward.  I removed some <code>#ifdef</code> statements for clarity:</p>\n\n<pre><code>  pthread_condattr_t attr;\n  pthread_cond_t *cond;\n  gint status;\n  pthread_condattr_init (&amp;attr);\n\n  cond = malloc (sizeof (pthread_cond_t));\n  if G_UNLIKELY (cond == NULL)\n    g_thread_abort (errno, \"malloc\");\n\n  if G_UNLIKELY ((status = pthread_cond_init (cond, &amp;attr)) != 0) &lt;--- this fails\n    g_thread_abort (status, \"pthread_cond_init\");\n</code></pre>\n\n<p>So nothing looks wrong there, and I doubt GLib would have any obvious error like this, considering it is used extensively throughout many major Linux codebases.</p>\n\n<p>So, at this point, I'm out of ideas.  What are some possible and/or likely causes for this problem?  Is it possible this could be a order-of-initialization issue, where the pthread lib needs to perform some static initialization before GLib can use it?  </p>\n"}, {"tags": ["c", "unix"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4946197, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DjkoEU7wJho/AAAAAAAAAAI/AAAAAAAAAF0/OvXKVXvX3sg/photo.jpg?sz=128", "display_name": "Edvinas", "link": "https://stackoverflow.com/users/4946197/edvinas"}, "edited": false, "score": 0, "creation_date": 1432756541, "post_id": 30491590, "comment_id": 49061807, "body": "where i shoud put wait?  I puted it in <code>if (child1 != 0){ \tchild2=fork(); \twait(NULL); }</code> but it didn&#39;t work"}, {"owner": {"reputation": 19318, "user_id": 371834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a378ed2410bdabed82883f2615f6b61?s=128&d=identicon&r=PG", "display_name": "Mihai Maruseac", "link": "https://stackoverflow.com/users/371834/mihai-maruseac"}, "reply_to_user": {"reputation": 21, "user_id": 4946197, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DjkoEU7wJho/AAAAAAAAAAI/AAAAAAAAAF0/OvXKVXvX3sg/photo.jpg?sz=128", "display_name": "Edvinas", "link": "https://stackoverflow.com/users/4946197/edvinas"}, "edited": false, "score": 0, "creation_date": 1432756648, "post_id": 30491590, "comment_id": 49061870, "body": "In parent. He should wait for the kids to die."}], "tags": [], "owner": {"reputation": 19318, "user_id": 371834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a378ed2410bdabed82883f2615f6b61?s=128&d=identicon&r=PG", "display_name": "Mihai Maruseac", "link": "https://stackoverflow.com/users/371834/mihai-maruseac"}, "is_accepted": true, "score": 0, "last_activity_date": 1432755307, "creation_date": 1432755307, "answer_id": 30491590, "question_id": 30491446, "link": "https://stackoverflow.com/questions/30491446/parent-dies-before-child-in-for-loop/30491590#30491590", "title": "Parent dies before child in for loop", "body": "<p>Use <code>wait</code> or <code>waitpid</code> to wait in parent until all children finish execution.</p>\n\n<p>Be careful not to create a fork bomb.</p>\n"}, {"tags": [], "owner": {"reputation": 211, "user_id": 4308444, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/38e1be9f092a5b5ef320e1d2b2f13984?s=128&d=identicon&r=PG&f=1", "display_name": "NeuTronas", "link": "https://stackoverflow.com/users/4308444/neutronas"}, "is_accepted": false, "score": 1, "last_activity_date": 1432759283, "creation_date": 1432759283, "answer_id": 30492739, "question_id": 30491446, "link": "https://stackoverflow.com/questions/30491446/parent-dies-before-child-in-for-loop/30492739#30492739", "title": "Parent dies before child in for loop", "body": "<pre><code>#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main( int argc, char *argv[] ){\n    pid_t child1;\n    pid_t child2;\n    int status;\n    int i, a, b;\n    child1 = fork();\n    if (child1 != 0){\n        child2=fork();\n    }\n    if (child1 != 0 &amp; child2 != 0){\n        wait(&amp;status);\n    }\n    if (child1 == 0){\n    for (i=1; i&lt;=atoi(argv[1]); i++){\n        if (a !=0){\n            a=fork();\n            if (a == 0){\n                printf(\"pid=%d ppid=%d\\n\", getpid(),getppid());\n                exit(1);\n            }\n        }\n        }\n    }\n    else if (child2 == 0){\n        printf(\"pid=%d ppid=%d\\n\", getpid(),getppid());\n        for (i=1; i&lt;=atoi(argv[2]); i++){\n            if(b !=0){\n                b=fork();\n                if (b == 0){\n                    exit(1);\n                }\n            }\n        }\n    exit(status);\n    }\n    printf(\"pid=%d ppid=%d\\n\", getpid(),getppid());\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4946197, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DjkoEU7wJho/AAAAAAAAAAI/AAAAAAAAAF0/OvXKVXvX3sg/photo.jpg?sz=128", "display_name": "Edvinas", "link": "https://stackoverflow.com/users/4946197/edvinas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 30491590, "answer_count": 2, "score": 1, "last_activity_date": 1432759283, "creation_date": 1432754850, "last_edit_date": 1432755272, "question_id": 30491446, "link": "https://stackoverflow.com/questions/30491446/parent-dies-before-child-in-for-loop", "title": "Parent dies before child in for loop", "body": "<p>I am trying to create 2 children and then they get and argument which tells how many children those 2 have to create like so:  </p>\n\n<p><img src=\"https://i.stack.imgur.com/nOrFb.png\" alt=\"http://i.imgur.com/bR3tTNP.png?1\"></p>\n\n<p>I get 2 arguments for example 2 and 3 and they have to create that many. I did it with for and it kinda works but parent dies before his second child dies</p>\n\n<pre><code>edvsil@os:~/4laboras$ ./testas 2 3\npid=389 ppid=387\npid=390 ppid=387\npid=386 ppid=27959\npid=391 ppid=388\nedvsil@os:~/4laboras$ pid=387 ppid=1\npid=392 ppid=388\npid=388 ppid=1\npid=393 ppid=388\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main( int argc, char *argv[] ){\npid_t child1;\npid_t child2;\nint i, a, b;\nchild1 = fork();\nif (child1 != 0){\n    child2=fork();\n}\nif (child1 == 0){\n    for (i=1; i&lt;=atoi(argv[1]); i++){\n        if (a !=0){\n            a=fork();\n            if (a == 0){\n            printf(\"pid=%d ppid=%d\\n\", getpid(),getppid());\n            exit(1);\n            }\n        }\n    }\n}\nelse\nif (child2 == 0){\n    for (i=1; i&lt;=atoi(argv[2]); i++){\n        if(b !=0){\n            b=fork();\n            if (b == 0){\n            printf(\"pid=%d ppid=%d\\n\", getpid(),getppid());\n            exit(1);\n            }\n        }\n    }\n}\nprintf(\"pid=%d ppid=%d\\n\", getpid(),getppid());\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "time", "clock"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1432754970, "post_id": 30491376, "comment_id": 49060786, "body": "Why are the two <code>i</code> loops not the same length? One is 10 times the other? And both are quite short operations anyway. Give it some real meat to work on, to far exceed the granularity of the clocks, and make sure the compiler doesn&#39;t optimize the unused results away."}, {"owner": {"reputation": 3329, "user_id": 972659, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b2c604ca2eb56274413c1b5c6d96489a?s=128&d=identicon&r=PG", "display_name": "Manohar", "link": "https://stackoverflow.com/users/972659/manohar"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432755572, "post_id": 30491376, "comment_id": 49061201, "body": "argh.. my bad.. I was trying with different numbers in the loop and had this typo. With that corrected, numbers are in much closer. The difference is probably because of the approximation clock() does. I don&#39;t have any portability concerns right now. So will use clock_gettime(). Thanks."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432755998, "post_id": 30491376, "comment_id": 49061467, "body": "And remember that just because <code>struct timespec</code> has <code>tv_nsec</code> field in nanoseconds, that doesn&#39;t imply its significance. You can test such things in a tight loop checking / reporting when that field changes, and by how much it changes, to establish the granularity."}, {"owner": {"reputation": 3329, "user_id": 972659, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b2c604ca2eb56274413c1b5c6d96489a?s=128&d=identicon&r=PG", "display_name": "Manohar", "link": "https://stackoverflow.com/users/972659/manohar"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432756509, "post_id": 30491376, "comment_id": 49061775, "body": "Yes, I noticed that in a Linux VM the highest resolution I could get was 10 microseconds with clock_gettime() where as in a physical host the resolution is much higher.."}], "owner": {"reputation": 3329, "user_id": 972659, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b2c604ca2eb56274413c1b5c6d96489a?s=128&d=identicon&r=PG", "display_name": "Manohar", "link": "https://stackoverflow.com/users/972659/manohar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 567, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1432755683, "creation_date": 1432754596, "last_edit_date": 1432755683, "question_id": 30491376, "link": "https://stackoverflow.com/questions/30491376/clock-vs-clock-gettime-resolution-difference", "title": "clock() vs clock_gettime() resolution difference", "body": "<p>Update: Operator error.. :( 2nd loop was 1/10th of the first one. Typo. With that corrected numbers are much closer.</p>\n\n<p>In the code snippet below I am measuring the time it takes for a loop using clock() and clock_gettime(). Its a 64 bit Ubunutu. CLOCK_PER_SEC value is 1000000. </p>\n\n<pre><code>int main() {\nstruct timespec ts, te;\nclock_t s, e;\nint i, temp = 0;;\ns = clock();\nfor (i = 0; i &lt; 10000; i++) {\n    temp += i;\n}\ne = clock();\nprintf(\"%.6f\\n\", 1.0 * (e-s)/CLOCKS_PER_SEC);\n\nclock_gettime(CLOCK_PROCESS_CPUTIME_ID, &amp;ts);\nfor (i = 0; i &lt; 1000; i++) {\n    temp += i;\n}\nclock_gettime(CLOCK_PROCESS_CPUTIME_ID, &amp;te);\n\nprintf(\"%lu %lu\\n\", (long)(te.tv_sec - ts.tv_sec),\n                    (long)(te.tv_nsec - ts.tv_nsec));\n</code></pre>\n\n<p>}</p>\n\n<p>one sample output.. (in multiple runs I see them to be in the same range)</p>\n\n<p>0.000068<br>\n0 4449  </p>\n\n<p>In the measurement using clock_gettime() the loop took ~4000 nanoseconds (~4 microseconds). But the measurement with clock() gives 68 microseconds.</p>\n\n<p>Why is clock() off by such a big margin ?</p>\n"}, {"tags": ["c", "arrays", "memory", "numpy", "free"], "comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1432758620, "post_id": 30491372, "comment_id": 49062931, "body": "I think @user3121023 is right; not only does this assignment cause a memory leak since you lose the pointers to the allocated memory, you also try to call <code>free</code> on the pointers stored in <code>result</code>, but they&#39;re not pointing to the memory <i>you</i> have allocated, since you took them from <code>arrayin-&gt;data</code>."}, {"owner": {"reputation": 1729, "user_id": 4321462, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/689f5fbc965c62e30e67375e34d13ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Samufi", "link": "https://stackoverflow.com/users/4321462/samufi"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1432767490, "post_id": 30491372, "comment_id": 49066604, "body": "Thanks for your comments user3121023 and @szczurcio. I guess I did not understand everything correctly but finally figured out a solution that works. I would be glad if you could look over my comment to the answer of user3121023 to make sure I understood everything well. I am a little bit worried that my solution only works because of good luck and will cause a memory leak later or on other machines..."}], "answers": [{"comments": [{"owner": {"reputation": 1729, "user_id": 4321462, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/689f5fbc965c62e30e67375e34d13ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Samufi", "link": "https://stackoverflow.com/users/4321462/samufi"}, "edited": false, "score": 0, "creation_date": 1432767174, "post_id": 30492577, "comment_id": 49066510, "body": "I am not sure whether I understood you right. I understood you that way that the statement <code>if (!(result[i] = malloc(dim2 * sizeof(int))))</code> is unnecessary and even harmful. Furthermore, I do not need to run go over all entries of <code>ptr</code> and only have to free <code>ptr</code> itself. Hence, I deleted the respective lines (i.e. the <code>for</code>-loops in <code>ptrvectorInt</code> and <code>free_CarrayptrsInt</code>). My program worked fine and the memory usage remained constant. To me it looks as if the problem is solved that way. Were these the changes you suggested? Or am I still doing something wrong or risky?"}, {"owner": {"reputation": 1729, "user_id": 4321462, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/689f5fbc965c62e30e67375e34d13ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Samufi", "link": "https://stackoverflow.com/users/4321462/samufi"}, "edited": false, "score": 0, "creation_date": 1432771217, "post_id": 30492577, "comment_id": 49067689, "body": "Thanks for the answer, @user3121023! <code>arrayin-&gt;data</code> is related to a python object whose memory is managed by python. Therefore, it will never be freed. Since performance is imprtant for my program, I prefer not to copy the values."}], "tags": [], "owner": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "is_accepted": true, "score": 2, "last_activity_date": 1432758705, "creation_date": 1432758705, "answer_id": 30492577, "question_id": 30491372, "link": "https://stackoverflow.com/questions/30491372/c-free-for-row-of-2d-int-array-makes-program-halt/30492577#30492577", "title": "C: free() for row of 2d int array makes program halt", "body": "<p><code>pymatrix_to_CarrayptrsInt()</code> calls <code>ptrvectorInt()</code> and this allocation is made<br>\n<code>if (!(result[i] = malloc(dim2 * sizeof(int)))){</code><br>\nthen <code>pymatrix_to_CarrayptrsInt()</code> writes over that allocation with this assignment<br>\n<code>result[i] = &amp;array[i * m];</code><br>\ncausing a memory leak. If <code>array</code> is free()'d then attempting to free() <code>result</code> will fail</p>\n"}], "owner": {"reputation": 1729, "user_id": 4321462, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/689f5fbc965c62e30e67375e34d13ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Samufi", "link": "https://stackoverflow.com/users/4321462/samufi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 30492577, "answer_count": 1, "score": 2, "last_activity_date": 1432758705, "creation_date": 1432754582, "last_edit_date": 1495540266, "question_id": 30491372, "link": "https://stackoverflow.com/questions/30491372/c-free-for-row-of-2d-int-array-makes-program-halt", "title": "C: free() for row of 2d int array makes program halt", "body": "<p>I am relatively new to C and have coded (or more precise: copied from <a href=\"http://wiki.scipy.org/Cookbook/C_Extensions/NumPy_arrays\" rel=\"nofollow noreferrer\">here</a> and adapted) the functions below. The first one takes a numpy array and converts it to a C int array:</p>\n\n<pre><code>int **pymatrix_to_CarrayptrsInt(PyArrayObject *arrayin) {\n   int **result, *array, *tmpResult;\n   int i, n, m, j;\n\n   n = arrayin-&gt;dimensions[0];\n   m = arrayin-&gt;dimensions[1];\n   result = ptrvectorInt(n, m);\n\n   array = (int *) arrayin-&gt;data; /* pointer to arrayin data as int */\n   for (i = 0; i &lt; n; i++) {\n      result[i] = &amp;array[i * m];\n   }\n   return result;\n}\n</code></pre>\n\n<p>The second one is used within the first one to allocate the necessary memory of the row vectors:</p>\n\n<pre><code>int **ptrvectorInt(long dim1, long dim2) {\n   int **result, i;\n   result = malloc(dim1 * sizeof(int*));\n   for (i = 0; i &lt; dim1; i++) {\n     if (!(result[i] = malloc(dim2 * sizeof(int)))){\n        printf(\"In **ptrvectorInt. Allocation of memory for int array failed.\");\n        exit(0);\n     }\n   }\n   return result;\n}\n</code></pre>\n\n<p>Up to this point everything works quite fine. Now I want to free the memory occupied by the C array. I have found multiple threads about how to do it, e.g. <a href=\"https://stackoverflow.com/questions/22440033/allocate-and-free-2d-array-in-c-using-void\">Allocate and free 2D array in C using void</a>, <a href=\"https://stackoverflow.com/questions/1733881/c-correctly-freeing-memory-of-a-multi-dimensional-array\">C: Correctly freeing memory of a multi-dimensional array</a>, or <a href=\"https://stackoverflow.com/questions/5666214/how-to-free-c-2d-array\">how to free c 2d array</a>. Inspired by the respective answers I wrote my freeing function:</p>\n\n<pre><code>void free_CarrayptrsInt(int **ptr, int i) {\n\n    for (i -= 1; i &gt;= 0; i--) {\n        free(ptr[i]);\n    }\n    free(ptr);\n}\n</code></pre>\n\n<p>Nontheless, I found out that already the first call of <code>free</code> fails - no matter whether I let the for loop go down or up. </p>\n\n<p>I looked for explenations for failing <code>free</code> commands: <a href=\"https://stackoverflow.com/questions/5308758/can-a-call-to-free-in-c-ever-fail\">Can a call to free() in C ever fail?</a> and <a href=\"https://stackoverflow.com/questions/12029061/free-up-on-malloc-fails\">free up on malloc fails</a>. This suggests, that there may have been a problem already at the memory allocation. However, my program works completely as expected - except memory freeing. Printing the regarded array shows that everything should be fine. What could be the issue? And even more important: How can I properly free the array?</p>\n\n<p>I work on a Win8 64 bit machine with Visual Studio 10 64bit compiler. I use C together with python 3.4 64bit.</p>\n\n<p>Thanks for all help!</p>\n"}, {"tags": ["c", "io", "eof"], "comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1432789872, "post_id": 30491288, "comment_id": 49072154, "body": "You should add terminating NUL char, before you handle the read bytes as string (for example print it with <code>%s</code> format without specifying size). <code>if (bytes &gt;=0 &amp;&amp; bytes &lt; buf_size) { bf[bytes] = 0; .. } else { handle invalid case }</code>"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1432790064, "post_id": 30491288, "comment_id": 49072223, "body": "And generally, <i>always</i> check return value of file IO functions, and print error (only exception is output to stdout/stderr, there error checking is more trouble that it&#39;s worth). There are always errors like not having permissions, having wrong file name either in program or on disk, disk full... things easy to fix if you just bother to detect and report any errors."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 2791459, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100001710482721/picture?type=large", "display_name": "gaurav11093", "link": "https://stackoverflow.com/users/2791459/gaurav11093"}, "edited": false, "score": 0, "creation_date": 1432764783, "post_id": 30491392, "comment_id": 49065703, "body": "That is another way to solve it, but my question is why this is happening only in case if file path is  /proc/[pid]/cmdline."}], "tags": [], "owner": {"reputation": 24609, "user_id": 1974224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/rQQMq.png?s=128&g=1", "display_name": "Cristik", "link": "https://stackoverflow.com/users/1974224/cristik"}, "is_accepted": true, "score": 4, "last_activity_date": 1432789627, "last_edit_date": 1432789627, "creation_date": 1432754664, "answer_id": 30491392, "question_id": 30491288, "link": "https://stackoverflow.com/questions/30491288/read-function-in-c-only-reading-3072-bytes/30491392#30491392", "title": "read function in c only reading 3072 bytes", "body": "<p>You should not rely on reading a whole file from the first try, even if you know you've allocated enough space for the read. Instead you should read in chunks and process the bytes chunk-by-chunk:</p>\n\n<pre><code>char buff[4096];\nwhile((cnt = read(fd, bf, buf_size-1)) &gt; 0) {\n    // process the bytes just read, or append them to\n    // a larger buffer\n}\n</code></pre>\n\n<p>Quoting from the man page for <a href=\"http://linux.die.net/man/2/read\" rel=\"nofollow\">read()</a>:</p>\n\n<blockquote>\n  <p>It is not an error if this number is smaller than the number of bytes requested; this may happen for example because fewer bytes are actually available right now (maybe because we were close to end-of-file, or because we are reading from a pipe, or from a terminal), or because read() was interrupted by a signal.</p>\n</blockquote>\n\n<p>For <code>/proc</code> files, we can see <a href=\"http://www.tldp.org/LDP/Linux-Filesystem-Hierarchy/html/proc.html\" rel=\"nofollow\">here</a> that:</p>\n\n<blockquote>\n  <p>The most distinctive thing about files in this directory is the fact that all of them have a file size of 0, with the exception of kcore, mtrr and self.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>You might wonder how you can see details of a process that has a file size of 0. It makes more sense if you think of it as a window into the kernel. The file doesn't actually contain any data; it just acts as a pointer to where the actual process information resides.</p>\n</blockquote>\n\n<p>which means that the contents of those pseudo-files are sent by the kernel, in batches as large as the kernel wants. This looks very similar to a pipe, where a produces writes data and a consumer reads it, each of them operating at different speeds.</p>\n"}], "owner": {"reputation": 43, "user_id": 2791459, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100001710482721/picture?type=large", "display_name": "gaurav11093", "link": "https://stackoverflow.com/users/2791459/gaurav11093"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 961, "favorite_count": 0, "accepted_answer_id": 30491392, "answer_count": 1, "score": 2, "last_activity_date": 1432789627, "creation_date": 1432754281, "last_edit_date": 1432754822, "question_id": 30491288, "link": "https://stackoverflow.com/questions/30491288/read-function-in-c-only-reading-3072-bytes", "title": "read function in c only reading 3072 bytes", "body": "<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include&lt;stdio.h&gt;\nint main(){\n        int fd;\n        char bf[4096];\n        int buf_size=4096;\n        fd = open(\"/proc/18022/cmdline\", O_RDONLY);\n        int bytes = read(fd, bf, buf_size-1);\n        printf(\"%d %s\\n\\n\",bytes,bf);\n        close(fd);\n}\n</code></pre>\n\n<p>Above code is always reading only 3072 bytes while <code>cmdline</code> have more characters than 3072.\nIf i copy content of <code>cmdline</code> to gedit and then run the above code on this newly created file then it is reading all bytes of the file.\nI googled it and found that it reads bytes up to <code>SSIZE_MAX</code> but my doubt is  why it is reading all the bytes in second case. </p>\n"}, {"tags": ["c", "algorithm", "linked-list"], "comments": [{"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1432754297, "post_id": 30491181, "comment_id": 49060446, "body": "Your code <i>looks</i> just fine (didn&#39;t run it to test though). You will return a pointer to the head of the copied list, and if there are other nodes, they will be pointed to by the previous ones."}], "answers": [{"comments": [{"owner": {"reputation": 1028, "user_id": 2763399, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/35382e72b5ecb0d596d17798c061e77d?s=128&d=identicon&r=PG&f=1", "display_name": "Raaj", "link": "https://stackoverflow.com/users/2763399/raaj"}, "edited": false, "score": 0, "creation_date": 1432760829, "post_id": 30491266, "comment_id": 49063997, "body": "So this would be equivalent to returning tail? Or should I compulsorily return newList ?"}, {"owner": {"reputation": 1028, "user_id": 2763399, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/35382e72b5ecb0d596d17798c061e77d?s=128&d=identicon&r=PG&f=1", "display_name": "Raaj", "link": "https://stackoverflow.com/users/2763399/raaj"}, "edited": false, "score": 1, "creation_date": 1432762054, "post_id": 30491266, "comment_id": 49064624, "body": "Ah never mind, I understood. Tail is advancing and it would be the end of the list, where as newList is the header and thus includes pointer to the entire new list created by moving tail in each iteration."}, {"owner": {"reputation": 19318, "user_id": 371834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a378ed2410bdabed82883f2615f6b61?s=128&d=identicon&r=PG", "display_name": "Mihai Maruseac", "link": "https://stackoverflow.com/users/371834/mihai-maruseac"}, "reply_to_user": {"reputation": 1028, "user_id": 2763399, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/35382e72b5ecb0d596d17798c061e77d?s=128&d=identicon&r=PG&f=1", "display_name": "Raaj", "link": "https://stackoverflow.com/users/2763399/raaj"}, "edited": false, "score": 0, "creation_date": 1432764764, "post_id": 30491266, "comment_id": 49065699, "body": "Yep, that&#39;s why you always return <code>newList</code> instead of <code>tail</code>. Returning <code>tail</code> (or any other element in the list) will not get you the elements before it."}], "tags": [], "owner": {"reputation": 19318, "user_id": 371834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a378ed2410bdabed82883f2615f6b61?s=128&d=identicon&r=PG", "display_name": "Mihai Maruseac", "link": "https://stackoverflow.com/users/371834/mihai-maruseac"}, "is_accepted": true, "score": 3, "last_activity_date": 1432754200, "creation_date": 1432754200, "answer_id": 30491266, "question_id": 30491181, "link": "https://stackoverflow.com/questions/30491181/copying-a-linked-list-onto-another-linked-list-iteratively-c-understanding/30491266#30491266", "title": "Copying a linked list onto another linked list - iteratively - C - understanding the returned list", "body": "<p>When you add the first element in the list <code>newList</code> and <code>tail</code> point to the same address (<code>tail = newList</code>).</p>\n\n<p>Each time you add another element you add it after <code>tail</code> and then move it to the next position (<code>tail = tail-&gt;next</code>). That is, when you add the second element, <code>tail</code> which was <code>newList</code> will now be <code>newList-&gt;next</code>.</p>\n\n<p>This way, you can return <code>newList</code> and have all the pointers point to the next element in the list.</p>\n"}], "owner": {"reputation": 1028, "user_id": 2763399, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/35382e72b5ecb0d596d17798c061e77d?s=128&d=identicon&r=PG&f=1", "display_name": "Raaj", "link": "https://stackoverflow.com/users/2763399/raaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1703, "favorite_count": 0, "accepted_answer_id": 30491266, "answer_count": 1, "score": 0, "last_activity_date": 1432754200, "creation_date": 1432753923, "question_id": 30491181, "link": "https://stackoverflow.com/questions/30491181/copying-a-linked-list-onto-another-linked-list-iteratively-c-understanding", "title": "Copying a linked list onto another linked list - iteratively - C - understanding the returned list", "body": "<p>Trying my hand at linked list problems, and for today I'm trying \"given a linked list, copy it to another linked list\"</p>\n\n<p>For doing this iteratively, </p>\n\n<p>The logic would be\n- Use three pointers - current, newList, newTail.</p>\n\n<p><code>current</code> to keep track of the <em>current node</em> in the given, original list.</p>\n\n<p><code>newList</code> to keep track of the <em>head</em> of the list that I'm copying to. </p>\n\n<p><code>Tail</code> to keep the track of <em>tail</em> of the list I'm copying to.</p>\n\n<ul>\n<li>When the new list is empty, create a new node and copy the head, always have <code>tail</code> pointing to the last node.</li>\n</ul>\n\n<p>To that end, my copy list function <strong>should supposedly</strong> look like this - </p>\n\n<pre><code>struct node* CopyList(struct node* head) {\n   struct node* current = head; // used to iterate over the original list\n   struct node* newList = NULL; // head of the new list\n   struct node* tail = NULL; // kept pointing to the last node in the new list\n\n   while (current != NULL) {\n     if (newList == NULL) { // special case for the first new node\n       newList = malloc(sizeof(struct node));\n       newList-&gt;data = current-&gt;data;\n       newList-&gt;next = NULL;\n       tail = newList;\n     }\n    else {\n       tail-&gt;next = malloc(sizeof(struct node));\n       tail = tail-&gt;next;\n       tail-&gt;data = current-&gt;data;\n       tail-&gt;next = NULL;\n     }\n     current = current-&gt;next;\n     }\nreturn(newList);\n}  \n</code></pre>\n\n<p>My question is:\nIf I <code>return(newList)</code> ,I will have only one node, won't I?\nBecause I'm advancing <code>Tail</code> if the new list is not empty, shouldn't I return <code>Tail</code> instead of <code>newList</code> ?</p>\n"}, {"tags": ["c", "pointers", "push"], "comments": [{"owner": {"reputation": 21, "user_id": 3115435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eba69396ef95fbdbd52c66b811a9a675?s=128&d=identicon&r=PG&f=1", "display_name": "user3115435", "link": "https://stackoverflow.com/users/3115435/user3115435"}, "edited": false, "score": 0, "creation_date": 1432753853, "post_id": 30491125, "comment_id": 49060209, "body": "Can anybody explain it and give me the correct reason for choosing any of the below:"}, {"owner": {"reputation": 21, "user_id": 3115435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eba69396ef95fbdbd52c66b811a9a675?s=128&d=identicon&r=PG&f=1", "display_name": "user3115435", "link": "https://stackoverflow.com/users/3115435/user3115435"}, "edited": false, "score": 0, "creation_date": 1432753862, "post_id": 30491125, "comment_id": 49060212, "body": "A. works correctly on all strings B. returns the wrong answer on the input &quot;a()&quot; C. returns the wrong answer on the input &quot;)a&quot; D. returns the wrong answer on the input &quot;())&quot;"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1432753983, "post_id": 30491125, "comment_id": 49060269, "body": "You also don&#39;t need a stack; a counter will be enough, because you never push anything other than open parentheses. Your cloing-parentheses clause is wrong, too: You should ony return false if the stack is empty, otherwise pop and proceed; don&#39;t return."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1432754048, "post_id": 30491125, "comment_id": 49060307, "body": "@MOehm It&#39;s likely an assignment/homework meant to demonstrate the use of the stack."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 1, "creation_date": 1432754273, "post_id": 30491125, "comment_id": 49060431, "body": "@szczurcio: Yeah, probably, but then the task should really make use of the stack&#39;s contents.such as checking strings with different kinds of brackets."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1432754678, "post_id": 30491125, "comment_id": 49060629, "body": "So...looking at your posted code, do you see <i>any</i> way one can see a character <i>after</i> any <code>)</code> with your current algorithm? You could push a hundred <code>(</code>, and as soon as you encounter a single <code>)</code> <i>all</i> code paths in that case <code>return</code> something, leaving no chance to process the hopefully-remaining 99 other <code>)</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1432761973, "post_id": 30491125, "comment_id": 49064582, "body": "<code>if(pop(&amp;s) == &#39;(&#39;) return 1;       else return 0;</code> shoud be <code>if(pop(&amp;s) != &#39;(&#39;) return 0;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1432770383, "post_id": 30491873, "comment_id": 49067475, "body": "the stack is a bit superfluous; you could get away with a <code>int parencnt;</code>"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1432787844, "post_id": 30491873, "comment_id": 49071520, "body": "@sp2danny: I know and I&#39;ve said so in a comment on the question. Another commenter suggested that this is an exercide to use the stack. (If so, the excercise is poor.)"}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 1, "last_activity_date": 1432756143, "creation_date": 1432756143, "answer_id": 30491873, "question_id": 30491125, "link": "https://stackoverflow.com/questions/30491125/push-and-pop-operation-using-stack-on-string/30491873#30491873", "title": "push and pop operation using stack on string", "body": "<p>You've got the basic idea right: Walk through the string and push opening parens, pop closing parens. You have two basic cases of mismatched parentheses: (1) You close a parenthesis that wasn't opened. In that case, you underflow the stack. (2) You don't close a parenthesis that was opened. Here, you still have opening parens on the stack after you have walked the string.</p>\n\n<p>Your error is when you pop the stack: Wen the stack is empty, you would underflow it, and so you (correctly) return false. When you have successfully popped a parenthesis, don't return. You must check the rest of the string for correctness. <code>return</code> leaves the function and also breaks the loop. It does not set a return value for later, it returns immediately.</p>\n\n<p>So:</p>\n\n<pre><code>int matched(const char *x)\n{\n    int i, j;\n    stack_t s;\n\n    init(&amp;s);\n\n    for (i = 0; x[i] != '\\0'; i++) {\n        switch (x[i]) {\n        case '(':\n            push(&amp;s, i);\n            printf(\"Opening paren at %d\\n\", i);\n            break;\n\n        case ')':\n            if (isEmpty(&amp;s)) return 0;\n            j = pop(&amp;s);\n            printf(\"Closing paren opened at %d at %d\\n\", j, i);\n            break;\n        }\n    }\n\n    return isEmpty(&amp;s);\n}\n</code></pre>\n\n<p>I've taken the liberty to push the parnetheses' positions, so that there is at least some meaningful data on the stack. The <code>printf</code> statements are just for illustration.</p>\n\n<p>(Such small problems can usually be played through withz pencil and paper or by printing information during development.)</p>\n"}], "owner": {"reputation": 21, "user_id": 3115435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eba69396ef95fbdbd52c66b811a9a675?s=128&d=identicon&r=PG&f=1", "display_name": "user3115435", "link": "https://stackoverflow.com/users/3115435/user3115435"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 764, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1432756143, "creation_date": 1432753755, "question_id": 30491125, "link": "https://stackoverflow.com/questions/30491125/push-and-pop-operation-using-stack-on-string", "title": "push and pop operation using stack on string", "body": "<p>Please answer\nA string x is well-matched if (i) it has an equal number of '(' and ')' letters, and (ii) for each ')' in x, there is a unique '(' that before it in x. For example, the strings \"a()\", \"(a)\" and \"(a(a))\" are well-matched whereas \"a(\", \")a(\" and \"())(\" are NOT well-matched. The following function is supposed to return 1 if the given string x is well-matched, and is supposed to return 0 otherwise:</p>\n\n<pre><code>int matched(char *x) {\n  int i;\n  stack_t s;\n  init(&amp;s);\n  for(i = 0; x[i] != '\\0'; i++) {\n    switch(x[i]) {\n    case '(':\n      push(&amp;s, x[i]); break;\n    case ')':\n      if(isEmpty(&amp;s)) return 0;\n      if(pop(&amp;s) == '(') return 1;\n      else return 0;\n    }\n  }\n  return isEmpty(&amp;s);\n}\n</code></pre>\n\n<p>Assuming that push() operations never fail, the above function:</p>\n\n<p>Note: The isEmpty() function correctly returns 1 if the stack is empty, and returns 0 otherwise.\n A. works correctly on all strings\n B. returns the wrong answer on the input \"a()\"\n C. returns the wrong answer on the input \")a\"\n D. returns the wrong answer on the input \"())\"</p>\n"}, {"tags": ["c", "libuv"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 3, "creation_date": 1432753461, "post_id": 30490999, "comment_id": 49059991, "body": "You know what a function pointer is, right ? It looks like the library uses function pointers to pass callback functions."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1432753529, "post_id": 30490999, "comment_id": 49060031, "body": "<code>uv_fs_open</code> provides the parameters when <i>it</i> calls <code>open_cb</code> , which was provided as a function pointer parameter."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432753647, "post_id": 30490999, "comment_id": 49060090, "body": "Do you mean passing <code>open_cb</code> to <code>uv_fs_open</code> with no arguments? That&#39;s because  you don&#39;t supply the arguments there, you are only telling <code>uv_fs_open</code> which function to call so that <i>it</i> can supply the arguments."}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1432753653, "post_id": 30490999, "comment_id": 49060095, "body": "Assuming you have little experience with c (by the nature of your question), you&#39;re much better off learning from actual learning material (books, tutorials, dedicated web sites) than from 1 of the more advanced pieces of code around the open source world."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432754083, "post_id": 30490999, "comment_id": 49060321, "body": "@rreichel you deleted your comment, but the reason you don&#39;t see <code>uv_fs_open</code> doing anything with its argument <code>cb</code> (which was passed as <code>open_cb</code>) is that it is handled by the macro called <code>POST</code>"}, {"owner": {"reputation": 634, "user_id": 882338, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ed5ec433e0a0fa1b09bde806dd983369?s=128&d=identicon&r=PG", "display_name": "rreichel", "link": "https://stackoverflow.com/users/882338/rreichel"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432754368, "post_id": 30490999, "comment_id": 49060476, "body": "Thanks for the quick response!  I do know what a function pointer is but I&#39;m moving to C from a Java background so its been slow going and not the first thing I thought of. Thanks again!  @WeatherVane I did delete it - Accidentally added the comment too early - whoops."}, {"owner": {"reputation": 634, "user_id": 882338, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ed5ec433e0a0fa1b09bde806dd983369?s=128&d=identicon&r=PG", "display_name": "rreichel", "link": "https://stackoverflow.com/users/882338/rreichel"}, "edited": false, "score": 0, "creation_date": 1494345933, "post_id": 30490999, "comment_id": 74784488, "body": "2 years and a lot more CS schooling later I just wanted to thank all of you for your kind responses - I realize this was a newbie question and really appreciate the helpful constructive responses you all gave. Cheers!"}], "answers": [{"comments": [{"owner": {"reputation": 634, "user_id": 882338, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ed5ec433e0a0fa1b09bde806dd983369?s=128&d=identicon&r=PG", "display_name": "rreichel", "link": "https://stackoverflow.com/users/882338/rreichel"}, "edited": false, "score": 0, "creation_date": 1432754626, "post_id": 30491114, "comment_id": 49060593, "body": "Thanks @Venemo ! Heres a quick follow up: Where is the documentation for writing a callback to match the uv_fs_cb type?  The API docs don&#39;t specify that"}, {"owner": {"reputation": 17121, "user_id": 202919, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c98b750637d6114f5fd1893dbdfe1f39?s=128&d=identicon&r=PG", "display_name": "Venemo", "link": "https://stackoverflow.com/users/202919/venemo"}, "reply_to_user": {"reputation": 634, "user_id": 882338, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ed5ec433e0a0fa1b09bde806dd983369?s=128&d=identicon&r=PG", "display_name": "rreichel", "link": "https://stackoverflow.com/users/882338/rreichel"}, "edited": false, "score": 0, "creation_date": 1432754798, "post_id": 30491114, "comment_id": 49060683, "body": "@rreichel most of the time, those callbacks accept a single parameter whose type is a pointer to the <i>baton</i> object. I suggest you take a look at the libuv book: <a href=\"http://nikhilm.github.io/uvbook/\" rel=\"nofollow noreferrer\">nikhilm.github.io/uvbook</a> it also has a chapter on file system operations: <a href=\"http://nikhilm.github.io/uvbook/filesystem.html\" rel=\"nofollow noreferrer\">nikhilm.github.io/uvbook/filesystem.html</a>"}], "tags": [], "owner": {"reputation": 17121, "user_id": 202919, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c98b750637d6114f5fd1893dbdfe1f39?s=128&d=identicon&r=PG", "display_name": "Venemo", "link": "https://stackoverflow.com/users/202919/venemo"}, "is_accepted": true, "score": 2, "last_activity_date": 1432754033, "last_edit_date": 1432754033, "creation_date": 1432753716, "answer_id": 30491114, "question_id": 30490999, "link": "https://stackoverflow.com/questions/30490999/c-function-calling-without-required-parameters/30491114#30491114", "title": "C function calling without required parameters", "body": "<p>libuv uses a pattern called <em>callback baton</em> for its async functions. The rationale is very simple: let's assume you want to do something asynchronously. So you pass a callback function as a <a href=\"http://www.cprogramming.com/tutorial/function-pointers.html\" rel=\"nofollow\">function pointer</a> to call when it's done. libuv's functions do their job asynchronously and call the function you specified when they're done.</p>\n\n<p>However, if you have more than one places where you call these functions, once the callback is called, you are going to need to tell <strong>which</strong> request the callback is called for. That is the purpose of the <em>baton</em> object. In the case of your example code, that's the <code>open_req</code> variable (of the type <code>uv_fs_t</code>).</p>\n\n<p>You can read more about libuv's file system operations <a href=\"http://docs.libuv.org/en/v1.x/fs.html\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 634, "user_id": 882338, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ed5ec433e0a0fa1b09bde806dd983369?s=128&d=identicon&r=PG", "display_name": "rreichel", "link": "https://stackoverflow.com/users/882338/rreichel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "closed_date": 1432753752, "accepted_answer_id": 30491114, "answer_count": 1, "score": -1, "last_activity_date": 1432754033, "creation_date": 1432753296, "question_id": 30490999, "link": "https://stackoverflow.com/questions/30490999/c-function-calling-without-required-parameters", "closed_reason": "Duplicate", "title": "C function calling without required parameters", "body": "<p>I've been looking at this source code provided by developers of a library called libuv.  In some of the example code they pass a function as a parameter for another function but none of the required parameters are passed. How are the parameters being filled out? The function I'm looking at is uv_fs_open.</p>\n\n<p>Here is the link to the source (look around line 1000 for the function code): <a href=\"https://github.com/libuv/libuv/blob/202195c2f45ced200ccf880ff4502eee94f11ab5/src/unix/fs.c\" rel=\"nofollow\">https://github.com/libuv/libuv/blob/202195c2f45ced200ccf880ff4502eee94f11ab5/src/unix/fs.c</a><br>\nHere is the example code: </p>\n\n<pre><code>int main() {\n    loop = uv_default_loop();\n\n    int r = uv_fs_open(loop, &amp;open_req, path, O_RDONLY, S_IRUSR, open_cb);\n\n    if (r) {\n         fprintf(stderr, \"Error at opening file: %s.\\n\", \n                uv_strerror(uv_last_error(loop)));\n    }  \n\n    uv_run(loop, UV_RUN_DEFAULT);\n\n    return 0;\n}\n\nvoid open_cb(uv_fs_t* req) {\n    int result = req-&gt;result;\n\n    if (result == -1) {\n        fprintf(stderr, \"Error at opening file: %s.\\n\", \n                uv_strerror(uv_last_error(loop)));\n    }  \n\n    uv_fs_req_cleanup(req);\n    uv_fs_read(loop, &amp;read_req, result, buf, sizeof(buf), -1, read_cb);\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1432751934, "post_id": 30490552, "comment_id": 49059161, "body": "Use std::array or vector."}, {"owner": {"reputation": 42285, "user_id": 2057919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec600dcd84770c5d835cd4c943514088?s=128&d=identicon&r=PG&f=1", "display_name": "elixenide", "link": "https://stackoverflow.com/users/2057919/elixenide"}, "edited": false, "score": 9, "creation_date": 1432751970, "post_id": 30490552, "comment_id": 49059175, "body": "<a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> != <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1432752109, "post_id": 30490552, "comment_id": 49059256, "body": "c-array are not assignable."}, {"owner": {"reputation": 1718, "user_id": 2065237, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tG7xt.png?s=128&g=1", "display_name": "Sildoreth", "link": "https://stackoverflow.com/users/2065237/sildoreth"}, "edited": false, "score": 1, "creation_date": 1432752145, "post_id": 30490552, "comment_id": 49059284, "body": "Do not create functions that allocate memory and return a pointer.  That is setting yourself up for a memory leak.  You should instead set up this function to take in a pointer to an already-allocated block of memory and populate the information there."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 1718, "user_id": 2065237, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tG7xt.png?s=128&g=1", "display_name": "Sildoreth", "link": "https://stackoverflow.com/users/2065237/sildoreth"}, "edited": false, "score": 1, "creation_date": 1432752518, "post_id": 30490552, "comment_id": 49059486, "body": "@Sildoreth The <code>board</code> array is allocated on the stack and will be automatically destroyed when the function returns. The bad behavior here is that you&#39;ll be returning a pointer to that destroyed data."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 1718, "user_id": 2065237, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tG7xt.png?s=128&g=1", "display_name": "Sildoreth", "link": "https://stackoverflow.com/users/2065237/sildoreth"}, "edited": false, "score": 0, "creation_date": 1432755219, "post_id": 30490552, "comment_id": 49060947, "body": "@Sildoreth: Allocating memory and  returning a pointer to has the considerable advantage that the function can determine how big the array needs to be. Yes, it can leak memory if the caller doesn&#39;t release it -- so make sure the caller releases it.  Having the caller pass a pointer to an already allocated block <i>can</i> be a good solution, but only if the caller knows how big the array will need to be."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1432755234, "post_id": 30490552, "comment_id": 49060951, "body": "A C or C++ function cannot return an array."}], "answers": [{"tags": [], "owner": {"reputation": 1718, "user_id": 2065237, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tG7xt.png?s=128&g=1", "display_name": "Sildoreth", "link": "https://stackoverflow.com/users/2065237/sildoreth"}, "is_accepted": false, "score": 2, "last_activity_date": 1432818425, "last_edit_date": 1432818425, "creation_date": 1432752569, "answer_id": 30490773, "question_id": 30490552, "link": "https://stackoverflow.com/questions/30490552/static-short99-getrandomboard/30490773#30490773", "title": "static short[9][9] getRandomBoard();", "body": "<h2>Problem 1</h2>\n\n<p>First off, your declaration of the function needs to be changed.</p>\n\n<pre><code>static short[9][9] getRandomBoard()\n</code></pre>\n\n<p>It should be</p>\n\n<pre><code>static short** getRandomBoard()\n</code></pre>\n\n<h2>Problem 2</h2>\n\n<p>The stack level for <code>getRandomBoard</code> owns the variable named <code>board</code>.  When the stack level for your function disappears, so does the 2D array for the variable <code>board</code>.  This means that you are returning a pointer to a memory location that is no longer valid.</p>\n\n<p>The easy way to remember this and avoid problems in the future is that if you use <code>new</code>, then data is created on the <a href=\"https://en.wikipedia.org/wiki/Memory_management#HEAP\" rel=\"nofollow\">heap</a>; otherwise, it is created on the <a href=\"https://en.wikipedia.org/wiki/Call_stack\" rel=\"nofollow\">stack</a>.</p>\n\n<p>The bare minimum changes to make your example work would give you this:</p>\n\n<pre><code>static short** getRandomBoard() {\n  //Allocate 2D array on the heap, not on the stack\n  short** board = new short*[9];\n  //Create 2nd level of 2D array with arrays allocated on the heap\n  for(int i = 0; i &lt; 9; i++) {\n    board[i] = new short[9];\n  }\n  //Populate 2D array here\n  return board;\n}\n</code></pre>\n\n<p>That being said, it is bad practice (if you can avoid it) to have a function allocate memory and return a pointer to the allocated memory.  This tends to lead to <a href=\"https://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow\">memory leaks</a>.  Instead, you should have your function take in the array as a parameter.</p>\n\n<pre><code>static void populateRandomBoard(short board[9][9]) {\n  //Populate board here\n}\n</code></pre>\n\n<p>And then use the function like this:</p>\n\n<pre><code>static int main() {\n  short board[9][9];\n  populateRandomBoard(board);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8382, "user_id": 398461, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ixu8F.jpg?s=128&g=1", "display_name": "wcochran", "link": "https://stackoverflow.com/users/398461/wcochran"}, "is_accepted": true, "score": 1, "last_activity_date": 1432756320, "last_edit_date": 1432756320, "creation_date": 1432754546, "answer_id": 30491362, "question_id": 30490552, "link": "https://stackoverflow.com/questions/30490552/static-short99-getrandomboard/30491362#30491362", "title": "static short[9][9] getRandomBoard();", "body": "<p>In your example <code>board</code> is an array allocated of off of the stack frame which goes away once the function is returned. If you wish to return a contiguous array allocated off of the heap do the following:</p>\n\n<pre><code>static short(* getRandomBoard())[9] {\n  short (*board)[9] = (short (*)[9]) malloc(9*9*sizeof(short));\n  ...\n  board[i][j] = 3;\n  ...\n  return board;\n}\n</code></pre>\n\n<p>Just remember to <code>free(board)</code> when done with the array to avoid a leak.</p>\n\n<p>Better yet, redefine your function to pass <code>board</code> as an argument (i.e., let the caller worry about allocation):</p>\n\n<pre><code>void getRandomBoard(short board[9][9]) {\n   ....\n}\n</code></pre>\n\n<p>This way <code>board</code> could be allocated off the stack (no need to free), the heap, or statically.</p>\n\n<p>It would be better to use <code>&lt;array&gt;</code> if you are using c++</p>\n\n<pre><code>array&lt;array&lt;short,9&gt;,9&gt; getRandomBoard() {\n   array&lt;array&lt;short,9&gt;,9&gt; board;\n   ...\n   board[i][j] = 3;\n   ...\n   return board;\n}\n</code></pre>\n\n<p>If you want to stick with C, the following link will tell you all the ways you can represent a 2D array in C:</p>\n\n<p><a href=\"http://ezekiel.vancouver.wsu.edu/~cs330/lectures/linear_algebra/matrix/matrix.pdf\" rel=\"nofollow\">http://ezekiel.vancouver.wsu.edu/~cs330/lectures/linear_algebra/matrix/matrix.pdf</a></p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1432929812, "creation_date": 1432929812, "answer_id": 30538154, "question_id": 30490552, "link": "https://stackoverflow.com/questions/30490552/static-short99-getrandomboard/30538154#30538154", "title": "static short[9][9] getRandomBoard();", "body": "<p>C-array are not assignable and can't be returned from function.</p>\n\n<p>The easier is to use a structure</p>\n\n<pre><code>struct Board\n{\n    short numbers[9][9];\n};\n\nBoard CreateRandomBoard()\n{\n    Board board;\n\n    // Fill board values\n    // board.numbers[i][j] = value;\n    // ...\n\n    return board;\n}\n</code></pre>\n\n<p>and you avoid memory management.</p>\n"}], "owner": {"reputation": 2079, "user_id": 1703871, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/pgOJ0.png?s=128&g=1", "display_name": "motis10", "link": "https://stackoverflow.com/users/1703871/motis10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 30491362, "answer_count": 3, "score": -5, "last_activity_date": 1432929812, "creation_date": 1432751880, "question_id": 30490552, "link": "https://stackoverflow.com/questions/30490552/static-short99-getrandomboard", "title": "static short[9][9] getRandomBoard();", "body": "<p>I tried to return short[9][9] for soduko game\nstatic short[9][9] getRandomBoard();</p>\n\n<pre><code>static short[9][9] getRandomBoard()\n{\n    short board[9][9];\n\n    bla bla bla.....................\n    bla bla bla.....................\n    bla bla bla.....................\n\n    return board;\n}\n</code></pre>\n\n<p>and i got an error:\nError excpected a ';'</p>\n"}, {"tags": ["c", "codeblocks"], "answers": [{"tags": [], "owner": {"reputation": 6288, "user_id": 2499076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72dcd37bc8460b1645d72f7a8248156e?s=128&d=identicon&r=PG", "display_name": "Ewan Mellor", "link": "https://stackoverflow.com/users/2499076/ewan-mellor"}, "is_accepted": false, "score": 3, "last_activity_date": 1432751945, "creation_date": 1432751945, "answer_id": 30490572, "question_id": 30490462, "link": "https://stackoverflow.com/questions/30490462/program-to-print-the-digits-of-numbers-in-words/30490572#30490572", "title": "Program to print the digits of numbers, in words", "body": "<p>This is wrong:</p>\n\n<pre><code>scanf (\"%lli\", n);\n</code></pre>\n\n<p>It needs to be:</p>\n\n<pre><code>scanf (\"%lli\", &amp;n);\n</code></pre>\n\n<p>scanf's argument needs to be the address of a variable to put the result into.</p>\n"}, {"comments": [{"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 1, "creation_date": 1432752150, "post_id": 30490579, "comment_id": 49059286, "body": "is the space really required in this case?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432752708, "post_id": 30490579, "comment_id": 49059595, "body": "@NatashaDutta - Not <i>necessary</i>, but white space in the format string matches any amount of white space, including none, in the input.  In this case, <code>\\n</code> will precede the input."}, {"owner": {"reputation": 3536, "user_id": 4944292, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/06d372b6ee2b05c9cdb86cd79d1d776f?s=128&d=identicon&r=PG&f=1", "display_name": "Rockstar5645", "link": "https://stackoverflow.com/users/4944292/rockstar5645"}, "edited": false, "score": 0, "creation_date": 1432753048, "post_id": 30490579, "comment_id": 49059774, "body": "yea, but it&#39;s still not working, even after I switched based on digit"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 3536, "user_id": 4944292, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/06d372b6ee2b05c9cdb86cd79d1d776f?s=128&d=identicon&r=PG&f=1", "display_name": "Rockstar5645", "link": "https://stackoverflow.com/users/4944292/rockstar5645"}, "edited": false, "score": 0, "creation_date": 1432753315, "post_id": 30490579, "comment_id": 49059907, "body": "@Rockstar5645 - depending on how you have your environment set, I wonder if &quot; %lld&quot; would work for you?.  What is the error message?"}, {"owner": {"reputation": 3536, "user_id": 4944292, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/06d372b6ee2b05c9cdb86cd79d1d776f?s=128&d=identicon&r=PG&f=1", "display_name": "Rockstar5645", "link": "https://stackoverflow.com/users/4944292/rockstar5645"}, "edited": false, "score": 0, "creation_date": 1432753613, "post_id": 30490579, "comment_id": 49060072, "body": "@ryyker - I fixed the ampersand issue and I changed the expression of the switch statement to digit, but after I type in a number in my terminal, it&#39;s just returning the process as 0. There isn&#39;t even an error message anymore."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432758820, "post_id": 30490579, "comment_id": 49063028, "body": "@ryyker <code>&quot;%lli&quot;</code> will consume leading white-space, even without the <code>&quot;  &quot;</code>.  The space is _not_needed. &quot;Input white-space characters (as specified by the isspace function) are skipped, unless the specification includes a [, c, or n specifier.&quot; C11 &#167;7.21.6.2 8"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432767971, "post_id": 30490579, "comment_id": 49066758, "body": "@chux - Yep. You&#39;re right.  Had to <b><i><a href=\"http://www.cplusplus.com/reference/cstdio/scanf/\" rel=\"nofollow noreferrer\">look it up</a></i></b>, again....  Edited.  And thanks for your reference."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1432768109, "post_id": 30490579, "comment_id": 49066797, "body": "@NatashaDutta - Sorry for mis-information about leading space in format specifier.  See Chux reference above, and I edited my answer (again) to reflect the correction.  Thanks for your observation."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 0, "last_activity_date": 1432768036, "last_edit_date": 1432768036, "creation_date": 1432751974, "answer_id": 30490579, "question_id": 30490462, "link": "https://stackoverflow.com/questions/30490462/program-to-print-the-digits-of-numbers-in-words/30490579#30490579", "title": "Program to print the digits of numbers, in words", "body": "<p>For starters, you can change this line:  </p>\n\n<pre><code>scanf (\"%lli\", n);  //passed variable\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>scanf (\"%lli\", &amp;n); //  \n//      ^       ^   // Always: When you need to change the value of an \n                     // argument, you need to pass the address \n                     // of the value, not the value itself. \n</code></pre>\n\n<p><strong><em>Edit</em></strong> (to answer question in comments)<br>\nYou are <em>changing</em> the value of <strong><em>n</em></strong> to 0 before it is able to be evaluated properly. You want to <em>compare</em> it.  Once the following edit is made, input seems to be processed correctly...<br>\n<strong><em>Change the line</em></strong>:</p>\n\n<pre><code>if (n = 0) //ASSIGNS value of 0 to value of n\n</code></pre>\n\n<p>to </p>\n\n<pre><code>if (n == 0) //COMPARES value of 0 to value of n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3536, "user_id": 4944292, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/06d372b6ee2b05c9cdb86cd79d1d776f?s=128&d=identicon&r=PG&f=1", "display_name": "Rockstar5645", "link": "https://stackoverflow.com/users/4944292/rockstar5645"}, "edited": false, "score": 0, "creation_date": 1432753226, "post_id": 30490631, "comment_id": 49059858, "body": "I didn&#39;t quite understand that last part."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 3536, "user_id": 4944292, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/06d372b6ee2b05c9cdb86cd79d1d776f?s=128&d=identicon&r=PG&f=1", "display_name": "Rockstar5645", "link": "https://stackoverflow.com/users/4944292/rockstar5645"}, "edited": false, "score": 0, "creation_date": 1432753286, "post_id": 30490631, "comment_id": 49059889, "body": "If the user typed in something that is not a number, say <code>l234</code> instead <code>1234</code>, then you will be able to catch the error and deal with it."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1432756204, "post_id": 30490631, "comment_id": 49061599, "body": "@RSahu - Just an observation:  the <i>text</i> version of the number in your comment is almost indistinguishable from the numeric version.  Try using double quotes around digits. &quot;1234&quot;"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1432756831, "post_id": 30490631, "comment_id": 49061980, "body": "@ryyker, that was on purpose :) To present an example where it is easy for humans to make such mistakes."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1432752150, "creation_date": 1432752150, "answer_id": 30490631, "question_id": 30490462, "link": "https://stackoverflow.com/questions/30490462/program-to-print-the-digits-of-numbers-in-words/30490631#30490631", "title": "Program to print the digits of numbers, in words", "body": "<p>The line</p>\n\n<pre><code>scanf (\"%lli\", n);\n</code></pre>\n\n<p>needs to be</p>\n\n<pre><code>scanf (\"%lli\", &amp;n);\n</code></pre>\n\n<p>Better still, check the return value of the function to make sure that reading of the input was successful.</p>\n\n<pre><code>if ( scanf(\"%lli\", &amp;n) != 1 )\n{\n   // Error in reading the input.\n   // Deal with the error\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2963, "user_id": 1855442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61b99c64abe73180373944232b0c734f?s=128&d=identicon&r=PG", "display_name": "Pradheep", "link": "https://stackoverflow.com/users/1855442/pradheep"}, "is_accepted": false, "score": 1, "last_activity_date": 1432752186, "creation_date": 1432752186, "answer_id": 30490646, "question_id": 30490462, "link": "https://stackoverflow.com/questions/30490462/program-to-print-the-digits-of-numbers-in-words/30490646#30490646", "title": "Program to print the digits of numbers, in words", "body": "<p>I think you must switch based on digit and not on m</p>\n\n<pre><code>     digit = m%10;\n     switch (m){\n\n     case 0:\n           printf (\"zero \");\n           break;\n</code></pre>\n\n<p>must be </p>\n\n<pre><code>     digit = m%10;\n     switch (digit){\n\n     case 0:\n           printf (\"zero \");\n           break;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1432755559, "creation_date": 1432755559, "answer_id": 30491668, "question_id": 30490462, "link": "https://stackoverflow.com/questions/30490462/program-to-print-the-digits-of-numbers-in-words/30491668#30491668", "title": "Program to print the digits of numbers, in words", "body": "<p>You should treat the input as characters rather than digits.  </p>\n\n<p>You can also use an array for the digit text:  </p>\n\n<pre><code>const char number_as_text[] = \"1234\";\nconst char * digit_names[] = \n{ \"zero\", \"one\", \"two\", \"three\", \"four\",\n  \"five\", \"six\", \"seven\", \"eight\", \"nine\"};\n\nconst unsigned int length = strlen(number_as_text);\n\nfor (unsigned int i = 0; i &lt; length; ++i)\n{\n  unsigned int digit_value = number_as_text[i] - '0';\n  puts(digit_names[i]);\n  puts(\"\\n\");\n}\n</code></pre>\n\n<p>This should also be faster because there is no division operations.  Most processors don't like division and division slows them down.  </p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1432759850, "last_edit_date": 1432759850, "creation_date": 1432758651, "answer_id": 30492564, "question_id": 30490462, "link": "https://stackoverflow.com/questions/30490462/program-to-print-the-digits-of-numbers-in-words/30492564#30492564", "title": "Program to print the digits of numbers, in words", "body": "<p>Reversing will fail for large numbers whose reversed pattern does not fit in a <code>long long</code>.  Use recursion instead.</p>\n\n<p>Various improvements commented below.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstatic void int_text_helper(long long neg_x) {\n  if (neg_x &lt;= -10) {\n    int_text_helper(neg_x / 10);\n    fputc(' ', stdout);\n  }\n  int digit = -(neg_x % 10);\n  static const char *text[] = { \"zero\", \"one\", \"two\", \"three\", \"four\", \"five\",\n      \"six\", \"seven\", \"eight\", \"nine\" };\n  fputs(text[digit], stdout);\n}\n\nint main(void) {\n  long long int n; // m = 0, n, digit;\n  // printf(\"Whats your number? \\n\");  Typo\n  printf(\"What's your number? \\n\");\n  // Note: this will read numbers like 0123 and an octal number.\n  scanf(\"%lli\", &amp;n);\n\n  // Let us work with negative numbers instead so code can handle LLONG_MIN.\n  if (n &lt; 0) {\n    fputs(\"negative \", stdout);\n  } else {\n    n = -n;\n  }\n\n  // Use do loop (or recursion), so no special case with 0\n  // if (n = 0) printf(\"zero \");\n\n  // Let us use recursion rather than reversing the number.\n  // Reverse fails for a number like 9223372036854775799 (Near LLONG_MAX)\n  int_text_helper(n);\n\n  return 0;\n}\n\n-9223372036854775808\nnegative nine two two three three seven two zero three six eight five four seven seven five eight zero eight\n</code></pre>\n"}], "owner": {"reputation": 3536, "user_id": 4944292, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/06d372b6ee2b05c9cdb86cd79d1d776f?s=128&d=identicon&r=PG&f=1", "display_name": "Rockstar5645", "link": "https://stackoverflow.com/users/4944292/rockstar5645"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1719, "favorite_count": 0, "answer_count": 6, "score": 0, "last_activity_date": 1432768036, "creation_date": 1432751575, "last_edit_date": 1432753103, "question_id": 30490462, "link": "https://stackoverflow.com/questions/30490462/program-to-print-the-digits-of-numbers-in-words", "title": "Program to print the digits of numbers, in words", "body": "<p>I wrote a program the prints the digits of the numbers that I entered in the terminal in words. Ex, 123 would return one two three. When I try to run the program, after I put in my number, it's saying the program has stopped working. I use Codeblocks. Is there anything wrong with the code? It's compiling but it's returning the error -1073741510. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void)\n{\n   long long int m = 0, n, digit;\n\n   printf (\"Whats your number? \\n\");\n   scanf (\"%lli\", &amp;n);\n\n   if (n &lt; 0){\n      n = -n;\n      printf (\"negative \");\n   }\n\n   if (n = 0)\n      printf (\"zero \");\n\n   else {\n      while (n != 0){                     //this is to reverse the number\n         m = m*10 + n%10;\n         n = n/10;\n      }\n\n      while (m != 0){\n         digit = m%10;\n         switch (digit){\n\n            case 0:\n               printf (\"zero \");\n               break;\n            case 1:\n               printf (\"one \");\n               break;\n            case 2:\n               printf (\"two \");\n               break;\n            case 3:\n               printf (\"three \");\n               break;\n            case 4:\n               printf (\"four \");\n               break;\n            case 5:\n               printf (\"five \");\n               break;\n            case 6:\n               printf (\"six \");\n               break;\n            case 7:\n               printf (\"seven \");\n               break;\n            case 8:\n               printf (\"eight \");\n               break;\n            case 9:\n               printf (\"nine \");\n               break;\n         }\n         m = m / 10;\n      }\n   }\n   return 0;\n} \n</code></pre>\n"}, {"tags": ["c", "debugging", "arm", "interrupt-handling", "cortex-m"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432751632, "post_id": 30490361, "comment_id": 49059001, "body": "Isn&#39;t the <code>UART_Handler PROC</code> lacking a return from interrupt instruction? Or is that taken care of with the final <code>POP</code>? Usually a <code>RETI</code> type instruction will restore the flags register too."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432751824, "post_id": 30490361, "comment_id": 49059084, "body": "Could it be that your <code>UART_ISR</code> is corrupting the normal flow (corrupting the stack, for instance)? The <code>__attribute__ ((__interrupt__))</code> should not be needed here, since the routine is a regular function just called from the actual ISR"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432752076, "post_id": 30490361, "comment_id": 49059235, "body": "And shouldn&#39;t the ISR handler <code>CALL UART_ISR</code> and not branch to it?"}, {"owner": {"reputation": 560, "user_id": 2129392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3cc9596c9461e6f50132e952170f3058?s=128&d=identicon&r=PG", "display_name": "lorenzli", "link": "https://stackoverflow.com/users/2129392/lorenzli"}, "edited": false, "score": 0, "creation_date": 1432752123, "post_id": 30490361, "comment_id": 49059263, "body": "Thanks for the comments. I&#39;m actually just responsible for the C code, the ASM code was written by a previous student working on the project. So you say that once UART_Handler gets jumped to, ARM backups the registers itself and releases them with a <code>RETI</code>?"}, {"owner": {"reputation": 560, "user_id": 2129392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3cc9596c9461e6f50132e952170f3058?s=128&d=identicon&r=PG", "display_name": "lorenzli", "link": "https://stackoverflow.com/users/2129392/lorenzli"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432752196, "post_id": 30490361, "comment_id": 49059312, "body": "@EugeneSh. could you please elaborate how you think it is corrupting the stack?"}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1432752233, "post_id": 30490361, "comment_id": 49059333, "body": "@WeatherVane In the M-class architecture, exceptions place a magic value in the link register - loading that back into the PC triggers an exception return rather than a normal branch. <code>BL</code> <i>is</i> a returnable-from &#39;call&#39; rather than a straight jump. ARM is downright weird if you&#39;re used to x86 ;)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432752260, "post_id": 30490361, "comment_id": 49059347, "body": "I might elaborate if you show the full code of the function."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1432752306, "post_id": 30490361, "comment_id": 49059372, "body": "<code>BL</code> is a correct instruction here"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432752554, "post_id": 30490361, "comment_id": 49059514, "body": "Thanks, obviously I was guessing. I only ever wrote one simple thing for <code>ARM</code> processor. I forget when."}, {"owner": {"reputation": 560, "user_id": 2129392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3cc9596c9461e6f50132e952170f3058?s=128&d=identicon&r=PG", "display_name": "lorenzli", "link": "https://stackoverflow.com/users/2129392/lorenzli"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432752625, "post_id": 30490361, "comment_id": 49059552, "body": "Great if the handler is fine, thanks! @EugeneSh. I extended the isr code."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1432752897, "post_id": 30490361, "comment_id": 49059683, "body": "The simplest thing would be to remove all of the code except the GPIO and see if it is working. The other note is that you should declare the global vars used in ISR as <code>volatile</code>"}, {"owner": {"reputation": 560, "user_id": 2129392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3cc9596c9461e6f50132e952170f3058?s=128&d=identicon&r=PG", "display_name": "lorenzli", "link": "https://stackoverflow.com/users/2129392/lorenzli"}, "edited": false, "score": 0, "creation_date": 1432753021, "post_id": 30490361, "comment_id": 49059755, "body": "Thank you, 2x good ideas! I will have a look into it."}, {"owner": {"reputation": 51497, "user_id": 49246, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c421b43470bb8d3c099c5a847e588549?s=128&d=identicon&r=PG", "display_name": "starblue", "link": "https://stackoverflow.com/users/49246/starblue"}, "edited": false, "score": 0, "creation_date": 1432838663, "post_id": 30490361, "comment_id": 49104392, "body": "Just point your interrupt vector directly at the C function and you&#39;ll be fine. Cortex-M doesn&#39;t need assembly code for interrupt handlers."}, {"owner": {"reputation": 560, "user_id": 2129392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3cc9596c9461e6f50132e952170f3058?s=128&d=identicon&r=PG", "display_name": "lorenzli", "link": "https://stackoverflow.com/users/2129392/lorenzli"}, "reply_to_user": {"reputation": 51497, "user_id": 49246, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c421b43470bb8d3c099c5a847e588549?s=128&d=identicon&r=PG", "display_name": "starblue", "link": "https://stackoverflow.com/users/49246/starblue"}, "edited": false, "score": 0, "creation_date": 1432845573, "post_id": 30490361, "comment_id": 49108362, "body": "@starblue I will try it out but why would ARM propose such a procedure in their example projects then?"}], "answers": [{"comments": [{"owner": {"reputation": 560, "user_id": 2129392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3cc9596c9461e6f50132e952170f3058?s=128&d=identicon&r=PG", "display_name": "lorenzli", "link": "https://stackoverflow.com/users/2129392/lorenzli"}, "edited": false, "score": 0, "creation_date": 1432834976, "post_id": 30512301, "comment_id": 49102234, "body": "I agree this might be an issue. But currently my problem is that my code doesn&#39;t return from the ISR - which is not related to any register values."}, {"owner": {"reputation": 51497, "user_id": 49246, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c421b43470bb8d3c099c5a847e588549?s=128&d=identicon&r=PG", "display_name": "starblue", "link": "https://stackoverflow.com/users/49246/starblue"}, "edited": false, "score": 2, "creation_date": 1432883203, "post_id": 30512301, "comment_id": 49120213, "body": "No, Cortex-M saves the necessary registers automatically. It is designed so that C functions can be used for interrupts directly."}], "tags": [], "owner": {"reputation": 505, "user_id": 4949846, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153236219326708/picture?type=large", "display_name": "Arun Valiaparambil", "link": "https://stackoverflow.com/users/4949846/arun-valiaparambil"}, "is_accepted": false, "score": 0, "last_activity_date": 1432830852, "creation_date": 1432830852, "answer_id": 30512301, "question_id": 30490361, "link": "https://stackoverflow.com/questions/30490361/interrupt-service-routine-doesnt-jump-back-to-interrupt-handler-on-an-arm-corte/30512301#30512301", "title": "Interrupt Service Routine doesn&#39;t jump back to Interrupt Handler on an ARM Cortex M0", "body": "<p>Try pushing R0-R3, LR into stack and popping all of that out before return. The function call to handle your interrupt will corrupt those registers. </p>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 4759815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85aae512422569deb694afdf67f8acda?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Klitzke", "link": "https://stackoverflow.com/users/4759815/andrew-klitzke"}, "is_accepted": false, "score": 2, "last_activity_date": 1432849634, "creation_date": 1432849634, "answer_id": 30517644, "question_id": 30490361, "link": "https://stackoverflow.com/questions/30490361/interrupt-service-routine-doesnt-jump-back-to-interrupt-handler-on-an-arm-corte/30517644#30517644", "title": "Interrupt Service Routine doesn&#39;t jump back to Interrupt Handler on an ARM Cortex M0", "body": "<p>I don't see you clearing the interrupt. Some UART peripherals require you to clear the interrupt or the interrupt will continue to cycle. Some will clear the interrupt automatically when the data register is read, though, so refer to the peripheral documentation. In my experience an uncleared interrupt is often the cause of a perpetually cycling interrupt.</p>\n\n<p>Also, I'm unconvinced it's your problem but, you shouldn't need the</p>\n\n<pre><code>MOVS    R0, #1      ; MASK all interrupts\nMSR     PRIMASK, R0\n</code></pre>\n\n<p>and </p>\n\n<pre><code>MOVS    R0, #0      ; ENABLE all interrupts\nMSR     PRIMASK, R0\n</code></pre>\n\n<p>sections of code. You shouldn't have to mask any interrupts while in an interrupt. If you're executing from an interrupt context, having properly configured interrupt priorities will stop other interrupts from triggering. </p>\n\n<p>Like others say, based on how you're using it, you shouldn't need the assembly code at all, just name your C function \"UART_Handler\".</p>\n"}], "owner": {"reputation": 560, "user_id": 2129392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3cc9596c9461e6f50132e952170f3058?s=128&d=identicon&r=PG", "display_name": "lorenzli", "link": "https://stackoverflow.com/users/2129392/lorenzli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1832, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1432849634, "creation_date": 1432751201, "last_edit_date": 1432752547, "question_id": 30490361, "link": "https://stackoverflow.com/questions/30490361/interrupt-service-routine-doesnt-jump-back-to-interrupt-handler-on-an-arm-corte", "title": "Interrupt Service Routine doesn&#39;t jump back to Interrupt Handler on an ARM Cortex M0", "body": "<p>Currently I'm trying to establish a communication between my PC and an ARM Cortex M0 over UART. The system is simple: The custom-made UART module has a one Byte buffer. If the buffer is full the interrupt flag is set. The interrupt handler gets called and calls the interrupt service routine (ISR) in return. The ISR reads the buffer (therefore the interrupt flag of the modules gets reset) and writes the obtained Byte into a global array.</p>\n\n<p>Doing so I discovered the following problem: Once I send a character (=1 Byte), the system enters the ISR but never returns. I can interrupt the system again and again but it never returns to the main code.\nNow due to my setup with the ARM hardcore integrated on an Xilinx Spartan 6 FPGA which is build on a dev board debugging of the ARM code is difficult. I haven't yet figured out a way how to do. So I thought of trying to eliminate possible (theoretical) errors before starting the pain of setting up a new debugging toolchain. Therefore my post here.</p>\n\n<p>I think that I misunderstood somehow the way how to treat interrupts on an ARM. Here is how I do it:</p>\n\n<p>Interrupt Handler Code (in ASM):</p>\n\n<pre><code>; Jump Table\n__Vectors   DCD __initial_sp\n            DCD Reset_Handler\n            DCD 0\n\n            ...\n\n            ; External Interrupts\n            DCD UART_Handler\n\n            ...\n\n; Interrupt Handler\nUART_Handler PROC\n    EXPORT  UART_Handler\n    IMPORT  UART_ISR\n\n    PUSH    {R0,LR}     ; SAVE register state\n    ; GPIO #1\n\n    MOVS    R0, #1      ; MASK all interrupts\n    MSR     PRIMASK, R0\n\n    BL      UART_ISR    ; JUMP to ISR\n    ; GPIO #4\n\n    MOVS    R0, #0      ; ENABLE all interrupts\n    MSR     PRIMASK, R0\n\n    POP     {R0,PC}     ; RESTORE register state\n    ENDP\n</code></pre>\n\n<p>Interrupt Service Routine Code (in C):</p>\n\n<pre><code>// Defined in the main routine\nchar buffer[129] __attribute__((aligned (4)));\n\n// Global Variables\nint uart_in_progress;\nchar* uart_ptr = buffer;\nunsigned int uart_length;\n\nvoid UART_ISR()\n{   \n    char inChar;\n\n    // GPIO #2\n\n    // Read Character out of Buffer (=reset interrupt flag)\n    inChar= *(unsigned int*)APB_UART_BASE;\n\n    if(uart_in_progress) {\n        // end transmission for EOL or Max Length\n        if(current_char == '\\n' || uart_length == 129) {\n            uart_in_progress = 0;\n        }\n        // add next character to Memory Buffer\n        else {\n            *(uart_ptr + uart_length) = current_char;\n            uart_length++;\n        }\n    }\n\n    // GPIO #3\n    return;\n}\n</code></pre>\n\n<p>After my understanding this code is sufficient to treat and respond the interrupt call. Using GPIOs I can easily see how the flag rises, the interrupt handler reacts (GPIO #1), the ISR starts (GPIO #2), the flag falls, the ISR ends (GPIO #3) and then never jumps back to the handler (missing GPIO #4). The Stack should be large enough. Using only the simulator of ARM Keil everything works as it should.</p>\n\n<p>Having googled to find examples I sometimes came across an explicit definition for ISR as following:</p>\n\n<pre><code>__attribute__ ((__interrupt__)) void UART_ISR()\n</code></pre>\n\n<p>Is such a definition mandatory? Or are additional commands necessary to indicate to the ARM processor that the interrupt was treated? Looking at my complied asm code I just see jumps back and forth and do not understand if such a definition would add anything to these (correct) jumps.</p>\n\n<p>Any advice is much appreciated. And again: I am well aware of the need of a correct debugger - would just be great if I can avoid the hassle.</p>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1435193298, "post_id": 30490193, "comment_id": 50102639, "body": "Note, in C++11 you can get a <i>similar</i> effect (as far as being an expression) with <code>[&amp;](){&#47;*...*&#47;}()</code>, but it still has several disadvantages, such as being unable to <code>return</code> (need to implement rust-style <code>try!</code>) or use <code>decltype</code> on the expression (since lambdas aren&#39;t allowed in unevaluated contexts)."}], "answers": [{"comments": [{"owner": {"reputation": 28006, "user_id": 960828, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5dbfc386f986b9d600324cd02dae266d?s=128&d=identicon&r=PG", "display_name": "Alex D", "link": "https://stackoverflow.com/users/960828/alex-d"}, "edited": false, "score": 0, "creation_date": 1432750966, "post_id": 30490255, "comment_id": 49058608, "body": "Oh, OK... it makes sense now."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 31, "last_activity_date": 1432751120, "last_edit_date": 1432751120, "creation_date": 1432750804, "answer_id": 30490255, "question_id": 30490193, "link": "https://stackoverflow.com/questions/30490193/advantages-of-do-while0-versus-in-a-macro/30490255#30490255", "title": "Advantages of do { } while(0) versus ({ }) in a macro?", "body": "<p>Because <code>({...})</code> is <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.1/gcc/Statement-Exprs.html\">a GCC extension</a>.</p>\n"}], "owner": {"reputation": 28006, "user_id": 960828, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5dbfc386f986b9d600324cd02dae266d?s=128&d=identicon&r=PG", "display_name": "Alex D", "link": "https://stackoverflow.com/users/960828/alex-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 1, "accepted_answer_id": 30490255, "answer_count": 1, "score": 13, "last_activity_date": 1432754770, "creation_date": 1432750570, "question_id": 30490193, "link": "https://stackoverflow.com/questions/30490193/advantages-of-do-while0-versus-in-a-macro", "title": "Advantages of do { } while(0) versus ({ }) in a macro?", "body": "<p>There are plenty of questions on Stack Overflow regarding the use of <code>do { ... } while(0)</code> in macros, but this is a bit different. I understand why <code>do { ... } while(0)</code> is used to wrap multiple lines of code in a macro expansion. But there is another form I often see: <code>({ ... })</code>.</p>\n\n<p>The <code>({ })</code> form has the advantage that it is an expression and can have a \"return value\". It also (subjectively) reads better than <code>do { } while(0)</code>. So why isn't it always used? What advantage is there to using <code>do { } while(0)</code> in a macro instead?</p>\n"}, {"tags": ["c", "algorithm", "math", "methods", "sensors"], "comments": [{"owner": {"reputation": 21, "user_id": 3059708, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LgRYfyqikLc/AAAAAAAAAAI/AAAAAAAAAC8/bRV7AAYgw5w/photo.jpg?sz=128", "display_name": "Bo SM6FIE", "link": "https://stackoverflow.com/users/3059708/bo-sm6fie"}, "edited": false, "score": 1, "creation_date": 1432748801, "post_id": 30489469, "comment_id": 49057403, "body": "\u201cFrom a sensor I have for signals\u201d should be: \u201cFrom a sensor I have four signals\u2026\u201d"}, {"owner": {"reputation": 7700, "user_id": 12570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1zSkK.png?s=128&g=1", "display_name": "Peter K.", "link": "https://stackoverflow.com/users/12570/peter-k"}, "edited": false, "score": 0, "creation_date": 1432748908, "post_id": 30489469, "comment_id": 49057468, "body": "Without thinking about it too much, I&#39;d say that a <a href=\"http://www.cs.cmu.edu/~motionplanning/papers/sbp_papers/integrated1/venema_kalman_encoders.pdf\" rel=\"nofollow noreferrer\">Kalman Filter</a> might give you a good estimate for the intermediate positions. But I&#39;d have to think about it to say exactly how it would apply.  Also, it will depend on what you assume about the dynamics of the motion: can it be ludicrously quick (impossible?), or is the motion highly constrained?"}, {"owner": {"reputation": 21, "user_id": 3059708, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LgRYfyqikLc/AAAAAAAAAAI/AAAAAAAAAC8/bRV7AAYgw5w/photo.jpg?sz=128", "display_name": "Bo SM6FIE", "link": "https://stackoverflow.com/users/3059708/bo-sm6fie"}, "reply_to_user": {"reputation": 7700, "user_id": 12570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1zSkK.png?s=128&g=1", "display_name": "Peter K.", "link": "https://stackoverflow.com/users/12570/peter-k"}, "edited": false, "score": 0, "creation_date": 1432750364, "post_id": 30489469, "comment_id": 49058237, "body": "Thanks Peter. The movement is rather slow, up to max 75 mm per second. I have an ADC value about every 2 mS for each analog value (A/B). So the resolution at max speed is: 0.15 mm. However mostly the speed is more moderate and in the order of 0.1 to 5 mm per second. @Peter K."}], "answers": [{"tags": [], "owner": {"reputation": 521, "user_id": 4847722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-80GHeNDFurQ/AAAAAAAAAAI/AAAAAAAAC40/KlV00Gfm8KY/photo.jpg?sz=128", "display_name": "Anton Staaf", "link": "https://stackoverflow.com/users/4847722/anton-staaf"}, "is_accepted": true, "score": 1, "last_activity_date": 1432750528, "creation_date": 1432750528, "answer_id": 30490179, "question_id": 30489469, "link": "https://stackoverflow.com/questions/30489469/quadrature-sensor-sinus-signal-to-distance-value/30490179#30490179", "title": "Quadrature sensor sinus signal to distance value", "body": "<p>If your analog signals are roughly sinusoidal then you can think of them as the sine and cosine of the phase angle (one full 2mm travel would be 2 * pi radians of phase).  In C (and other languages) you can use the <a href=\"http://en.wikipedia.org/wiki/Atan2\" rel=\"nofollow\" title=\"atan2\">atan2</a> function to convert from your analog signals to phase angle.  In pseudo code you would have:</p>\n\n<pre><code>fractional_distance = atan2(analog-A, analog-B) * 2 mm / 2 pi radians\n</code></pre>\n\n<p>If your signals are not actually sinusoidal then this will still work, it will just introduce distortions in your fractional distance.</p>\n"}], "owner": {"reputation": 21, "user_id": 3059708, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LgRYfyqikLc/AAAAAAAAAAI/AAAAAAAAAC8/bRV7AAYgw5w/photo.jpg?sz=128", "display_name": "Bo SM6FIE", "link": "https://stackoverflow.com/users/3059708/bo-sm6fie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 30490179, "answer_count": 1, "score": 2, "last_activity_date": 1569648074, "creation_date": 1432748247, "last_edit_date": 1569648074, "question_id": 30489469, "link": "https://stackoverflow.com/questions/30489469/quadrature-sensor-sinus-signal-to-distance-value", "title": "Quadrature sensor sinus signal to distance value", "body": "<p>From a sensor I have 4 signals in quadrature. Two signals are analog and two are digital. The signals represent the position of a pickup sensor, se figure. The signals are:</p>\n\n<ul>\n<li>A-Analog</li>\n<li>B-Analog</li>\n<li>A-Digital</li>\n<li>B-Digital</li>\n</ul>\n\n<p>The analog signals are phase shifted by 90 degrees. The digital signal is produced by a zero crossing detector. One period of the analog signal represent 2 mm of movement of the sensor. </p>\n\n<p>I can catch the minimum and maximum value of the analog signal via an ADC (10 bit) when I have a transition of the digital signal. I can also use the phase relations of the digital signals to detect if we are moving in a positive or negative direction. I can easily also measure the distance by detecting the transitions of the digital signals with a resolution of 1 mm.</p>\n\n<p>But what is the <strong>best</strong> algorithm/method to get the fractional part of the distance based on the current values of the analog signals? I want to do that with maximal dynamic resolution by combining the A and B analog signal.</p>\n\n<p>Figure: <a href=\"https://i.stack.imgur.com/gmL0i.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gmL0i.jpg\" alt=\"http://www.spectron.us/SM6FIE//Images/ScreenCut1.JPG\"></a><br>\n<sub>(source: <a href=\"http://www.spectron.us/SM6FIE//Images/ScreenCut1.JPG\" rel=\"nofollow noreferrer\">spectron.us</a>)</sub>  </p>\n"}, {"tags": ["c", "list"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1432747414, "post_id": 30489209, "comment_id": 49056632, "body": "Why not just step through the code in your debugger to see what&#39;s going on ?"}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1432747502, "post_id": 30489209, "comment_id": 49056690, "body": "You forgot to ask a question. What help do you need exactly?"}, {"owner": {"reputation": 3, "user_id": 4943607, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206877829974420/picture?type=large", "display_name": "Jurica Sirovec", "link": "https://stackoverflow.com/users/4943607/jurica-sirovec"}, "edited": false, "score": 0, "creation_date": 1432747715, "post_id": 30489209, "comment_id": 49056801, "body": "in function &quot;nadji blok &quot; while i try to go trough the list (in for loop) it goes very long and it does not stop"}, {"owner": {"reputation": 3, "user_id": 4943607, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206877829974420/picture?type=large", "display_name": "Jurica Sirovec", "link": "https://stackoverflow.com/users/4943607/jurica-sirovec"}, "edited": false, "score": 0, "creation_date": 1432747855, "post_id": 30489209, "comment_id": 49056869, "body": "it goes somewhere to the midle of the list and then starts again at the begining of the list... something is not good with the pointers and i dont know what..."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 1, "creation_date": 1432750700, "post_id": 30489209, "comment_id": 49058430, "body": "You really should try to code in English when you plan to ask for help online."}, {"owner": {"reputation": 393, "user_id": 1015192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR9UX.jpg?s=128&g=1", "display_name": "pedwards", "link": "https://stackoverflow.com/users/1015192/pedwards"}, "edited": false, "score": 0, "creation_date": 1432750847, "post_id": 30489209, "comment_id": 49058523, "body": "You should initialized <code>indeks.head</code> and <code>indeks.tail</code> somewhere so you know it&#39;s <code>NULL</code> on the first call to <code>insert()</code> .  On your 2nd, 3rd, etc calls to <code>insert()</code>, I think you are over-writing <code>tail</code> repeatedly.  You should be finding the <i>real</i> tail first and add the new value there so you chain things together properly."}], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 4942981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/481025aa6095f7c3c3e00542d51a1f24?s=128&d=identicon&r=PG&f=1", "display_name": "WackyYeti", "link": "https://stackoverflow.com/users/4942981/wackyyeti"}, "is_accepted": true, "score": 1, "last_activity_date": 1432754060, "creation_date": 1432754060, "answer_id": 30491226, "question_id": 30489209, "link": "https://stackoverflow.com/questions/30489209/doubley-list-in-c-trouble-in-print/30491226#30491226", "title": "Doubley list in c , trouble in print", "body": "<p>It seems like you've got a couple of issues here. The first is that </p>\n\n<pre><code>struct  st{\n    struct at *head, *tail;\n    char medijan[51];\n} indeks;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>struct  st{\n    struct at head, tail;\n    char medijan[51];\n} indeks;\n</code></pre>\n\n<p>because you want <code>head</code> and <code>tail</code> to be actual elements with their own <code>next</code> and <code>before</code> pointers.</p>\n\n<p>Now you need to point <code>indeks.head</code> at <code>indeks.tail</code> in your code (some initialization code) like this:</p>\n\n<pre><code>indeks.head-&gt;next = &amp;indeks.tail;\nindeks.head-&gt;before = &amp;indeks.tail;\nindeks.tail-&gt;next = &amp;indeks.head;\nindeks.tail-&gt;before = &amp;indeks.head;\n</code></pre>\n\n<p>Next, I would separate out the allocation of your 'new' object and the filling it in from the insertion into the list. It's just cleaner that way.</p>\n\n<p>Now, when you want to insert you would do something like this:</p>\n\n<pre><code>void foo(char *ime_prezime, long pocetak_bloka)\n{\n    atom *new;\n\n    if ((new = (atom*)malloc(sizeof(atom)))) {\n        strcpy(new-&gt;ime_prezime, ime_prezime);\n        new-&gt;pocetak_bloka = pocetak_bloka;\n        printf(\" DODAJ U LISTU : %s \\n\", new-&gt;ime_prezime);   /* control */\n        insert(&amp;indeks.head, new);\n    }\n}\n\nvoid insert(atom *at_location, atom *element)\n{\n    element-&gt;next = at_location-&gt;next;\n    element-&gt;before = element-&gt;next-&gt;before;\n    element-&gt;next-&gt;before = element;\n    at_location-&gt;next = element;\n}\n</code></pre>\n\n<p>To print the list:</p>\n\n<pre><code>void print_list(void)\n{\n    atom *element;\n\n    element = &amp;indeks.head-&gt;next;\n\n    while (element != &amp;indeks.head) {\n        // print whatever info\n        element = element-&gt;next;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4943607, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206877829974420/picture?type=large", "display_name": "Jurica Sirovec", "link": "https://stackoverflow.com/users/4943607/jurica-sirovec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 30491226, "answer_count": 1, "score": -1, "last_activity_date": 1432754060, "creation_date": 1432747285, "last_edit_date": 1432747682, "question_id": 30489209, "link": "https://stackoverflow.com/questions/30489209/doubley-list-in-c-trouble-in-print", "title": "Doubley list in c , trouble in print", "body": "<p>I have problem when I try to print doubly linked list from head to tail. It goes to the somewhere in the middle and than starts from the beginning and so on. There is a  C code with functions \"insert \" and one function at the end(\"nadji blok\") which is printing a list.  Focus on function \"insert\" and \"nadji blok-(find block)\".</p>\n\n<pre><code>#include \"dodatno.h\"\n#include \"algoritam.h\"\n#include&lt;string.h&gt;\n#include&lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct at {\n    char ime_prezime[51];\n    long pocetak_bloka;\n    struct at *next, *before;\n};\ntypedef struct at atom;\n\nstruct  st{\n    struct at *head, *tail;\n    char medijan[51];\n} indeks;\n\nint insert(char *ime_prezime, long pocetak_bloka)\n{\n    atom *new;\n    if ((new = (atom*)malloc(sizeof(atom))))\n    {\n        strcpy(new-&gt;ime_prezime, ime_prezime);\n        new-&gt;pocetak_bloka = pocetak_bloka;\n        printf(\" DODAJ U LISTU : %s \\n\", new-&gt;ime_prezime);   /* control */\n\n        new-&gt;next = NULL;\n        new-&gt;before = NULL;\n\n        if (indeks.head == NULL)\n        {\n            indeks.head = new;\n            indeks.tail = new;\n        }\n        else{\n            indeks.tail-&gt;next = new;\n            new-&gt;before = indeks.tail;\n            indeks.tail = new;\n        }\n        return 1;\n    }\n    return 0;\n}\n\nvoid inicijaliziraj(FILE *ulaz)\n{\n    int i; long pocetak;\n    struct stanovnik buff;\n    for (i = 0; i&lt;100; i++)\n    {\n        fseek(ulaz, i*sizeof(buff)*VELICINA, SEEK_SET);\n        fread(&amp;buff, sizeof(buff), 1, ulaz);\n        /* printf(\" FREAD : %s\", buff.ime_prezime);*/\n        fseek(ulaz, -1 * sizeof(buff), SEEK_CUR);\n        pocetak = ftell(ulaz);\n        DodajUListu(buff.ime_prezime, pocetak);\n    }\n    return;\n}\n\nlong nadji_blok(char *ime_prezime, FILE *ulaz)\n{\n    struct stanovnik vel;\n    atom *p = indeks.head;\n\n    for (; p; p = p-&gt;next)\n    {\n        printf(\"%s\\n \", p-&gt;ime_prezime);\n        if (strcmp(ime_prezime, p-&gt;ime_prezime) &lt; 0)\n            /*   in this for loop it goes indefenetly */\n        {\n            return (p-&gt;pocetak_bloka) - (VELICINA*sizeof(vel));\n            break;\n        }\n    }\n    return 1;\n}\n\nchar *izl_naziv()\n{\n    char *s = \"indeksna_pretraga.rez\";\n    return s;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 199084, "user_id": 56338, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92fb4563ddc5ceeaa8b19b60a7a172f4?s=128&d=identicon&r=PG", "display_name": "sth", "link": "https://stackoverflow.com/users/56338/sth"}, "edited": false, "score": 0, "creation_date": 1432746251, "post_id": 30488781, "comment_id": 49055941, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/506366/c-pointer-to-struct-in-the-struct-definition\">C: pointer to struct in the struct definition</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432747094, "post_id": 30488781, "comment_id": 49056441, "body": "@\u041d\u0438\u043a\u043e\u043b\u0430\u0421\u043f\u0430\u0458\u0438\u045b please &quot;accept&quot; the best answer, that&#39;s how SO should work, thanks."}], "answers": [{"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 1, "last_activity_date": 1432746034, "creation_date": 1432746034, "answer_id": 30488820, "question_id": 30488781, "link": "https://stackoverflow.com/questions/30488781/cant-find-an-error-but-it-gives-me-one/30488820#30488820", "title": "Cant find an error but it gives me one", "body": "<p>Change this :</p>\n\n<pre><code>typedef struct clan{\n    Clan *prethodni;\n    Clan *sledeci;\n    Info *prevod;\n}Clan;\n</code></pre>\n\n<p>to </p>\n\n<pre><code>typedef struct clan{\n    struct clan *prethodni;\n    struct clan *sledeci;\n    Info *prevod;\n}Clan;\n</code></pre>\n\n<p>Since you are using the type <code>Clan</code> before it is actually defined.</p>\n"}, {"tags": [], "owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "is_accepted": false, "score": 1, "last_activity_date": 1432746090, "creation_date": 1432746090, "answer_id": 30488847, "question_id": 30488781, "link": "https://stackoverflow.com/questions/30488781/cant-find-an-error-but-it-gives-me-one/30488847#30488847", "title": "Cant find an error but it gives me one", "body": "<pre><code>typedef struct clan{\n    Clan *prethodni;\n    Clan *sledeci;\n    Info *prevod;\n}Clan;\n</code></pre>\n\n<p>When you provide the definition of the struct here, the compiler doesn't yet \"know\" what <code>Clan</code> is; change it to</p>\n\n<pre><code>typedef struct clan{\n    struct clan *prethodni;    // Don't use the typedefed name, it's not yet \"available\"\n    struct clan *sledeci;\n    Info *prevod;\n}Clan;\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 4834143, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206924177011287/picture?type=large", "display_name": "\u041d\u0438\u043a\u043e\u043b\u0430 \u0421\u043f\u0430\u0458\u0438\u045b", "link": "https://stackoverflow.com/users/4834143/%d0%9d%d0%b8%d0%ba%d0%be%d0%bb%d0%b0-%d0%a1%d0%bf%d0%b0%d1%98%d0%b8%d1%9b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1432746090, "creation_date": 1432745896, "question_id": 30488781, "link": "https://stackoverflow.com/questions/30488781/cant-find-an-error-but-it-gives-me-one", "title": "Cant find an error but it gives me one", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct info{\n    int vreme_pojavljivanja;\n    int vreme_uklanjanja;\n    char *tekst;\n\n}Info;\n\ntypedef struct clan{\n    Clan *prethodni;\n    Clan *sledeci;\n    Info *prevod;\n}Clan;\n\nClan *novi_clan(char *tekst, int vreme_poc, int vreme_kraj, int max_text);\n</code></pre>\n\n<p>this is my Strukture.h file</p>\n\n<p>and this is my novi_clan.c file</p>\n\n<pre><code>#include \"strukture.h\"\n\nClan *novi_clan(char *tekst,int vreme_poc,int vreme_kraj,int max_text){\n    Clan *novi = malloc(sizeof(Clan));\n\n\n    novi-&gt;prethodni = NULL;\n    novi-&gt;sledeci = NULL;\n    novi-&gt;prevod = malloc(sizeof(Info));\n    novi-&gt;prevod-&gt;vreme_pojavljivanja = vreme_poc;\n    novi-&gt;prevod-&gt;vreme_uklanjanja = vreme_kraj;\n    novi-&gt;prevod-&gt;tekst = calloc(max_text, sizeof(char));\n    strcpy(novi-&gt;prevod-&gt;tekst, tekst);\n    return novi;\n\n}\n</code></pre>\n\n<p>It gives me errors like Clan is not defined ..\nAnd if someone sees an error please reply to it</p>\n"}, {"tags": ["c++", "c", "compilation", "linker", "g++"], "comments": [{"owner": {"reputation": 10223, "user_id": 592182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fu0me.jpg?s=128&g=1", "display_name": "forsvarir", "link": "https://stackoverflow.com/users/592182/forsvarir"}, "edited": false, "score": 1, "creation_date": 1432752777, "post_id": 30488702, "comment_id": 49059634, "body": "The error you are getting is coming from the linker step, not the compiler. It doesn&#39;t have anything to do with your includes. You have to tell the linker all of the object files that are required to make the target binary."}, {"owner": {"reputation": 778, "user_id": 761902, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/7atdk.jpg?s=128&g=1", "display_name": "ansonl", "link": "https://stackoverflow.com/users/761902/ansonl"}, "reply_to_user": {"reputation": 10223, "user_id": 592182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fu0me.jpg?s=128&g=1", "display_name": "forsvarir", "link": "https://stackoverflow.com/users/592182/forsvarir"}, "edited": false, "score": 0, "creation_date": 1432770465, "post_id": 30488702, "comment_id": 49067496, "body": "So is there a one liner command for g++ to accomplish this?"}, {"owner": {"reputation": 10223, "user_id": 592182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fu0me.jpg?s=128&g=1", "display_name": "forsvarir", "link": "https://stackoverflow.com/users/592182/forsvarir"}, "edited": false, "score": 0, "creation_date": 1432801659, "post_id": 30488702, "comment_id": 49078298, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/3202136/using-g-to-compile-multiple-cpp-and-h-files\">Using G++ to compile multiple .cpp and .h files</a>"}], "answers": [{"tags": [], "owner": {"reputation": 10223, "user_id": 592182, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fu0me.jpg?s=128&g=1", "display_name": "forsvarir", "link": "https://stackoverflow.com/users/592182/forsvarir"}, "is_accepted": true, "score": 2, "last_activity_date": 1432802809, "last_edit_date": 1495535213, "creation_date": 1432801635, "answer_id": 30501099, "question_id": 30488702, "link": "https://stackoverflow.com/questions/30488702/g-include-files-in-other-directories/30501099#30501099", "title": "g++ include files in other directories", "body": "<p>The error you are getting is coming from the linker step, not the compiler step.  It doesn't have anything to do with your includes. You need to tell the linker all the files required to make the target binary.  As has been said in <a href=\"https://stackoverflow.com/a/3202161/592182\">this answer</a>, which may be the question this was previously closed as a duplicate of, you just need to list all of the cpp files after main in the command line.  So for yours, the command line should be something like:</p>\n\n<pre><code>g++ -o configtest -Wall -I../inih/cpp main.cpp ../inih/cpp/INIReader.cpp ../inih/ini.c\n</code></pre>\n\n<p>Once you start compiling all of the files in one step, you may have to add an extra include instruction to find header files in different paths, so your command line might need to be:</p>\n\n<pre><code>g++ -o configtest -Wall -I../inih/cpp -I../inih main.cpp ../inih/cpp/INIReader.cpp ../inih/ini.c\n</code></pre>\n\n<p>But that depends how you're including your headers from your source files...</p>\n"}], "owner": {"reputation": 778, "user_id": 761902, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/7atdk.jpg?s=128&g=1", "display_name": "ansonl", "link": "https://stackoverflow.com/users/761902/ansonl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1498, "favorite_count": 0, "accepted_answer_id": 30501099, "answer_count": 1, "score": 1, "last_activity_date": 1432833838, "creation_date": 1432745643, "last_edit_date": 1432833838, "question_id": 30488702, "link": "https://stackoverflow.com/questions/30488702/g-include-files-in-other-directories", "title": "g++ include files in other directories", "body": "<p>I have a main.cpp file in a directory called test that has an </p>\n\n<pre><code>#include \"INIReader.h\"\n</code></pre>\n\n<p>The structure of the files is like below</p>\n\n<pre><code>---/test/main.cpp\n\n---/inih/ini.h\n         ini.c\n\n---/inih/cpp/INIReader.h\n             INIReader.cpp\n</code></pre>\n\n<p><em>INIReader.cpp</em> has these includes</p>\n\n<pre><code>#include \"../ini.h\"\n#include \"INIReader.h\"\n</code></pre>\n\n<p>I am trying to compile <em>main.cpp</em> in one line with </p>\n\n<pre><code>g++ -o test -Wall -I../inih/cpp main.cpp\n</code></pre>\n\n<p>but it is not working. Errors like </p>\n\n<pre><code>&gt; Undefined symbols for architecture x86_64: \n&gt;... REFERENCES TO stuff in INIReader ...\n&gt;ld: symbol(s) not found\n&gt; for architecture x86_64 clang: error: linker command failed with exit\n&gt; code 1 (use -v to see invocation)\n</code></pre>\n\n<p>show up. </p>\n\n<p>Right now I am compiling by running the commands and it will work. </p>\n\n<pre><code>&gt; g++ -c -Wall ../inih/cpp/INIReader.cpp \n&gt; g++ -c -Wall ../inih/ini.c \n&gt; g++ -c -Wall -I../inih/cpp main.cpp \n&gt; g++ -o configtest main.o INIReader.o ini.o\n</code></pre>\n\n<p>I thought that the g++ compiler will look for each #include in each of the default include directories and the passed <em>-I</em> directory and do not know why the above one liner does not work. Will g++ \"follow\" includes in all files like the <em>./ini.h</em>? I have not been able to find a good resource for learning this. \nHow can I combine these command into one line like the previous command? Thanks. </p>\n\n<p>Edit:</p>\n\n<p>I have looked at the \"duplicate\" question but not understand how it relates to my problem. I am trying to find a good resource for learning how to \"include\" correctly with g++ and know why my current one liner does not work.\nIt is not a problem in the code, as compiling and then linking one by one is successful!</p>\n\n<p><strong>Duplicate question was similar, but did not cover including files in other directories.</strong> </p>\n"}, {"tags": ["c", "data-structures", "linked-list"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1432750055, "post_id": 30488688, "comment_id": 49058090, "body": "<a href=\"http://stackoverflow.com/a/605858/3233393\">Please don&#39;t cast the result of <code>malloc()</code></a>."}, {"owner": {"reputation": 75, "user_id": 1749355, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8cdb24b1d2c5c56f68b716f0401251d6?s=128&d=identicon&r=PG", "display_name": "Oka Prinarjaya", "link": "https://stackoverflow.com/users/1749355/oka-prinarjaya"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1432830553, "post_id": 30488688, "comment_id": 49099697, "body": "@Quentin - thank you for that cool reference"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 1749355, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8cdb24b1d2c5c56f68b716f0401251d6?s=128&d=identicon&r=PG", "display_name": "Oka Prinarjaya", "link": "https://stackoverflow.com/users/1749355/oka-prinarjaya"}, "edited": false, "score": 0, "creation_date": 1432746115, "post_id": 30488780, "comment_id": 49055848, "body": "what you mean with &#39;keeps track of the tail pointer&#39; ? Did you mean i able to directly to go to tail? or what?"}, {"owner": {"reputation": 199084, "user_id": 56338, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92fb4563ddc5ceeaa8b19b60a7a172f4?s=128&d=identicon&r=PG", "display_name": "sth", "link": "https://stackoverflow.com/users/56338/sth"}, "reply_to_user": {"reputation": 75, "user_id": 1749355, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8cdb24b1d2c5c56f68b716f0401251d6?s=128&d=identicon&r=PG", "display_name": "Oka Prinarjaya", "link": "https://stackoverflow.com/users/1749355/oka-prinarjaya"}, "edited": false, "score": 0, "creation_date": 1432746222, "post_id": 30488780, "comment_id": 49055922, "body": "@OkaPrinarjaya: Yes, I assume the <code>tail</code> field will point to the tail of the list, doesn&#39;t it?"}, {"owner": {"reputation": 75, "user_id": 1749355, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8cdb24b1d2c5c56f68b716f0401251d6?s=128&d=identicon&r=PG", "display_name": "Oka Prinarjaya", "link": "https://stackoverflow.com/users/1749355/oka-prinarjaya"}, "edited": false, "score": 0, "creation_date": 1432746661, "post_id": 30488780, "comment_id": 49056168, "body": "any other benefit of using other struct (method number 2). And what benefit of keeps track to the tail?"}], "tags": [], "owner": {"reputation": 199084, "user_id": 56338, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92fb4563ddc5ceeaa8b19b60a7a172f4?s=128&d=identicon&r=PG", "display_name": "sth", "link": "https://stackoverflow.com/users/56338/sth"}, "is_accepted": false, "score": 0, "last_activity_date": 1432745890, "creation_date": 1432745890, "answer_id": 30488780, "question_id": 30488688, "link": "https://stackoverflow.com/questions/30488688/which-better-to-store-ansi-c-linked-list-by-using-head-or-by-using-other-struc/30488780#30488780", "title": "Which better to store ANSI C linked list? By using *head OR by using other structure?", "body": "<p>One version also keeps track of the tail pointer and the size of the list, so it has additional features. It's up to you to decide of those features are a helpful addition or useless bloat in your particular situation.</p>\n\n<p>Which version is better depends on the specific use case.</p>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 1749355, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8cdb24b1d2c5c56f68b716f0401251d6?s=128&d=identicon&r=PG", "display_name": "Oka Prinarjaya", "link": "https://stackoverflow.com/users/1749355/oka-prinarjaya"}, "edited": false, "score": 0, "creation_date": 1432830500, "post_id": 30489930, "comment_id": 49099660, "body": "Nicolas - Hi, thank you very much your answer. Please correct me, that&#39;s not special, i think we can keep track the size of  the list without using other struct. Just increment or decrement an integer variable outside the struct. Any other special thing / benefit if i store linked list using other struct?"}, {"owner": {"reputation": 119, "user_id": 2364700, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/z7k4y.jpg?s=128&g=1", "display_name": "Sasha Nicolas", "link": "https://stackoverflow.com/users/2364700/sasha-nicolas"}, "reply_to_user": {"reputation": 75, "user_id": 1749355, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8cdb24b1d2c5c56f68b716f0401251d6?s=128&d=identicon&r=PG", "display_name": "Oka Prinarjaya", "link": "https://stackoverflow.com/users/1749355/oka-prinarjaya"}, "edited": false, "score": 0, "creation_date": 1432861557, "post_id": 30489930, "comment_id": 49113833, "body": "Yes, you can keep a variable outside for that. I can&#39;t think of other benefit than keep things organized and more clear."}], "tags": [], "owner": {"reputation": 119, "user_id": 2364700, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/z7k4y.jpg?s=128&g=1", "display_name": "Sasha Nicolas", "link": "https://stackoverflow.com/users/2364700/sasha-nicolas"}, "is_accepted": false, "score": 1, "last_activity_date": 1432749769, "creation_date": 1432749769, "answer_id": 30489930, "question_id": 30488688, "link": "https://stackoverflow.com/questions/30488688/which-better-to-store-ansi-c-linked-list-by-using-head-or-by-using-other-struc/30489930#30489930", "title": "Which better to store ANSI C linked list? By using *head OR by using other structure?", "body": "<p>Short answer: there's no better way.</p>\n\n<p>But... it might depend on what you aim to do. Let say you want work with single linked list, just to store with no fancy operations. </p>\n\n<p>You will only need the list item, and keep the first as follow;</p>\n\n<pre><code>typedef struct listItem{\n    void * content;\n    struct * listItem next;\n}ListItem;\n\nListItem first;\n</code></pre>\n\n<p>Or if you want a double linked list:</p>\n\n<pre><code>typedef struct listItem{\n    void * content;\n    struct * listItem previous;\n    struct * listItem next;\n}ListItem;\n\nListItem first;\n</code></pre>\n\n<p>On the other hand, if you want to keep track of size, and other stuff, let say quantity of certain types in the list, among others, it might be a good choice to have a new data structure in order to keep track of them.</p>\n\n<pre><code>typedef struct listItem{\n    void * content;\n    struct * listItem previous;\n    struct * listItem next;\n}ListItem;\n\ntypedef struct list{\n    ListItem * first, * last;\n    int quantity;\n}List;\n\nList myList;\n</code></pre>\n\n<p>You don't have to have a pointer for the list. But you can. \nIn the second implementation, you gain performance on things you would have to go through the list in order to get such as the quantity. But now you have to keep updating the quantity every time you add or remove an item. </p>\n"}], "owner": {"reputation": 75, "user_id": 1749355, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8cdb24b1d2c5c56f68b716f0401251d6?s=128&d=identicon&r=PG", "display_name": "Oka Prinarjaya", "link": "https://stackoverflow.com/users/1749355/oka-prinarjaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432749769, "creation_date": 1432745593, "question_id": 30488688, "link": "https://stackoverflow.com/questions/30488688/which-better-to-store-ansi-c-linked-list-by-using-head-or-by-using-other-struc", "title": "Which better to store ANSI C linked list? By using *head OR by using other structure?", "body": "<p>I was studying linked list (single &amp; double) in C. From many basic tutorials i've read, the average of the tutorials have two way to store linked list. Such as:</p>\n\n<ol>\n<li>Using *head</li>\n</ol>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct ListItem *head;\n\nstruct ListItem *a = (struct ListItem *) malloc(sizeof(struct ListItem));\na-&gt;data = 10;\na-&gt;next = NULL;\n\nstruct ListItem *b = (struct ListItem *) malloc(sizeof(struct ListItem));\nb-&gt;data = 25;\nb-&gt;next = NULL;\n\n// Link it!\nhead = a;\na-&gt;next = b;\n</code></pre>\n\n<ol start=\"2\">\n<li>Using other structure (<code>struct jsw_list</code>) as code example below:</li>\n</ol>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct jsw_list {\n    struct jsw_node *head;\n    struct jsw_node *tail;\n    size_t size;\n};\n\nstruct jsw_list *new_list(int has_dummy_head, int has_dummy_tail)\n{\n    struct jsw_list *rv = (struct jsw_list *) malloc(sizeof(struct jsw_list));\n    //.\n    //.\n    //.\n}\n\nstruct jsw_list *list = new_list(1,1);\nstruct jsw_node *node;\n\nnode = insert_after(list, list-&gt;head, 10000);\nnode = insert_after(list, node, 5000);\n</code></pre>\n\n<p>Which better? </p>\n\n<p>Please Enlightenment</p>\n\n<p>Thank You</p>\n"}, {"tags": ["c", "file", "codeblocks"], "comments": [{"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 2, "creation_date": 1432744927, "post_id": 30488386, "comment_id": 49055078, "body": "But it isn&#39;t in the same folder. It is in a folder called <code>res</code>, while your source file is in a folder called <code>src</code>. You have to either add <code>res</code> to the include path or add more of the path in the include statement."}], "answers": [{"tags": [], "owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "is_accepted": false, "score": 0, "last_activity_date": 1432758120, "creation_date": 1432758120, "answer_id": 30492410, "question_id": 30488386, "link": "https://stackoverflow.com/questions/30488386/c-compiler-in-codeblocks-fails-on-unfound-h-file-even-though-it-has-file-in-d/30492410#30492410", "title": "C Compiler in Code::Blocks Fails on Unfound .h File Even Though It Has File in Directory", "body": "<p>A few options:</p>\n\n<ol>\n<li><p>Change the <code>#include</code> line to</p>\n\n<pre><code>#include \"../res/resource.h\"\n</code></pre>\n\n<p>Here, the two dots <code>..</code> mean the parent directory.</p></li>\n<li><p>Include the path of the directory when compiling</p>\n\n<pre><code>gcc -I../res ./winmain.c\n</code></pre>\n\n<p>This tells the compiler to search in <code>../res</code> for header files. Since you are using CodeBlocks you may have to do this via some settings. See the <a href=\"http://wiki.codeblocks.org/index.php?title=FAQ-Compiling_%28general%29#Q:_I_would_like_to_compile_a_project_using_some_non-standard_libraries._How_can_I_indicate_to_CodeBlocks_that_these_libraries_and_include_files_exist.3F\" rel=\"nofollow\">CodeBlocks FAQ</a> for details.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 519, "user_id": 4929939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1TZ9u.jpg?s=128&g=1", "display_name": "LPeteR90", "link": "https://stackoverflow.com/users/4929939/lpeter90"}, "is_accepted": false, "score": 0, "last_activity_date": 1432767625, "creation_date": 1432767625, "answer_id": 30494549, "question_id": 30488386, "link": "https://stackoverflow.com/questions/30488386/c-compiler-in-codeblocks-fails-on-unfound-h-file-even-though-it-has-file-in-d/30494549#30494549", "title": "C Compiler in Code::Blocks Fails on Unfound .h File Even Though It Has File in Directory", "body": "<p>I had exactly the same problem once, but I'm not sure, if the solution also applies to you. </p>\n\n<p>I added all files in my project structure to my project with Project->Add Files. </p>\n"}], "owner": {"reputation": 1, "user_id": 4945674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f72d37ea8998d94baf71b7d057d7eed0?s=128&d=identicon&r=PG&f=1", "display_name": "Thinkerer", "link": "https://stackoverflow.com/users/4945674/thinkerer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432838171, "creation_date": 1432744701, "last_edit_date": 1432838171, "question_id": 30488386, "link": "https://stackoverflow.com/questions/30488386/c-compiler-in-codeblocks-fails-on-unfound-h-file-even-though-it-has-file-in-d", "title": "C Compiler in Code::Blocks Fails on Unfound .h File Even Though It Has File in Directory", "body": "<p>This has to be a noob error, but I can't find it.</p>\n\n<p>Using CodeBlocks and the compiler quits since it can't find a particular file ( resource.h ).  That file is in the directory structure (pic on Imgur here: <a href=\"http://imgur.com/CviWADl\" rel=\"nofollow\">http://imgur.com/CviWADl</a> since I'm also new to stackoverflow)</p>\n\n<p>I can't be the first person to make this mistake, but can't get any farther with it.  My guess is that it won't find the other header files that follow in the list either.</p>\n\n<p>Suggestions?</p>\n\n<hr>\n\n<p>@ace and others have it - it's the path that needs to be included in the code.  On to other errors...thanks everyone.</p>\n"}, {"tags": ["c", "linux", "shell", "pipe"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1432744633, "post_id": 30488288, "comment_id": 49054926, "body": "Why in the world is this tagged bash? You&#39;re not using bash at all. &quot;Joe A&#39;s shell&quot; is certainly not bash. (Not just picking on you, btw -- anyone asking about csh or ksh or zsh and tagging their question bash would be every bit as off-base)."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1432744696, "post_id": 30488288, "comment_id": 49054963, "body": "...back towards topic, use <code>strace -f -e execve .&#47;myterminal cat file - grep &#39;aa&#39; - grep &#39;bb&#39;</code>, and see what arguments your code is passing around."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1432744872, "post_id": 30488288, "comment_id": 49055049, "body": "Actually -- <code>Usage: aa</code> makes at least one problem obvious; you&#39;re passing <code>argv[1]</code> in the position where <code>argv[0]</code> needs to be."}, {"owner": {"reputation": 13, "user_id": 4938022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3844af3a049f7e47acc292d683b943?s=128&d=identicon&r=PG&f=1", "display_name": "Joe A", "link": "https://stackoverflow.com/users/4938022/joe-a"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1432745498, "post_id": 30488288, "comment_id": 49055446, "body": "You&#39;re the man Charles! Its fixed!"}], "owner": {"reputation": 13, "user_id": 4938022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3844af3a049f7e47acc292d683b943?s=128&d=identicon&r=PG&f=1", "display_name": "Joe A", "link": "https://stackoverflow.com/users/4938022/joe-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432745265, "creation_date": 1432744411, "last_edit_date": 1432745265, "question_id": 30488288, "link": "https://stackoverflow.com/questions/30488288/grep-command-behaving-weirdly-in-terminal-emulation", "title": "Grep command behaving weirdly in terminal emulation", "body": "<p>I wrote a program that aims to simulate the terminal, more specifically, unnamed pipes. For example, I can simulate the terminal command cat file | grep 'aa' \nusing the command</p>\n\n<p>./myterminal cat file - grep 'aa'</p>\n\n<p>(I separate the arguments with - instead of |). And it works perfectly. However, if I try to use the command \n./myterminal cat file - grep 'aa' - grep 'bb'</p>\n\n<p>I get the error messege:</p>\n\n<p>Usage: aa [OPTION] ... PATTERN [FILE]...\nTry 'aa--help' for more information.</p>\n\n<p>So obviously something is wrong. When I try the command\n./myterminal cat file - grep 'aa' 'file' - grep 'bb' 'file'</p>\n\n<p>The correct line from the file is printed -- however, so is the error message. What is happening here? Clearly something is wrong with my program, I just dont understand what. The program itself is so simple I'm not sure what's going wrong here.</p>\n\n<p>The code itself is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nvoid np_exec(char* cmd, char** argv)\n{\nint fd[2];\n\nwhile(*(++argv) != NULL)\n{\n    pipe(fd);\n\n    int pid = fork(); //parent executes\n    if(pid &lt; 0)\n    {\n        printf(\"Error forking\");\n        exit(1);\n    }\n\n    if(pid != 0) // parent\n    {\n        dup2(fd[1],1);\n        close(fd[0]);   \n\n        if (execvp(cmd, argv) == -1)\n        {\n            perror(\"execvp failed\");\n        }\n    }\n    else\n    {\n        dup2(fd[0],0);  \n        close(fd[1]);\n    }\n}\n}\n\nint main(int argc, char** argv)\n{\nassert(strcmp(argv[argc-1], \"-\"));\n\nint i;\nfor (i = 1; i &lt; argc; ++i) {\n    if (!strcmp(argv[i], \"-\")) \n    {\n        argv[i] = NULL;\n        np_exec(argv[1], &amp;argv[1]);\n        argv = &amp;argv[i];\n        argc -= i;\n        i = 0;\n    }\n}\n\nchar* args[argc];\nargs[argc-1] = NULL;\n\nfor (i = 1; i &lt; argc; ++i) {\n    args[i-1] = argv[i];\n}\n\nif (execvp(args[0], args) == -1)\n    perror(\"execvp failed\");\n\nreturn 0;\n}\n</code></pre>\n\n<p>Does anyone know where I'm wrong?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 4, "creation_date": 1432743053, "post_id": 30487800, "comment_id": 49053918, "body": "Why would it return <code>char</code>? it returns the difference between the strings."}, {"owner": {"reputation": 1697, "user_id": 3395831, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76732996d10182885b6ac1046e13c95?s=128&d=identicon&r=PG&f=1", "display_name": "Utku", "link": "https://stackoverflow.com/users/3395831/utku"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432743120, "post_id": 30487800, "comment_id": 49053959, "body": "Yes but doesn&#39;t it stop upon seeing the first non-matching character? Then the result must be fitting into a char. Is that wrong?"}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1432743128, "post_id": 30487800, "comment_id": 49053968, "body": "What if the difference is 255?"}, {"owner": {"reputation": 503, "user_id": 1280961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/mtA9d.jpg?s=128&g=1", "display_name": "wonko realtime", "link": "https://stackoverflow.com/users/1280961/wonko-realtime"}, "edited": false, "score": 1, "creation_date": 1432743343, "post_id": 30487800, "comment_id": 49054101, "body": "see <a href=\"http://stackoverflow.com/questions/163254/on-32-bit-cpus-is-an-integer-type-more-efficient-than-a-short-type\" title=\"on 32 bit cpus is an integer type more efficient than a short type\">stackoverflow.com/questions/163254/&hellip;</a>"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 6, "creation_date": 1432743435, "post_id": 30487800, "comment_id": 49054158, "body": "The difference between two 8-bit chars will be between -255 and 255, and that range doesn&#39;t fit in a char."}, {"owner": {"reputation": 503, "user_id": 1280961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/mtA9d.jpg?s=128&g=1", "display_name": "wonko realtime", "link": "https://stackoverflow.com/users/1280961/wonko-realtime"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1432744144, "post_id": 30487800, "comment_id": 49054637, "body": "@interjay only the sign is the same (which probably was formulated this way in the hope that it would make explanation easier) but not more. strcmp only defines three results, where one is strictly lower than zero (and most of the times -1 maybe, but might change all the time afaik), one is exactly zero and the last one always higher than zero. See <a href=\"http://www.cplusplus.com/reference/cstring/strcmp/\" rel=\"nofollow noreferrer\">here</a> for an alternative description."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 503, "user_id": 1280961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/mtA9d.jpg?s=128&g=1", "display_name": "wonko realtime", "link": "https://stackoverflow.com/users/1280961/wonko-realtime"}, "edited": false, "score": 4, "creation_date": 1432744253, "post_id": 30487800, "comment_id": 49054699, "body": "@wonkorealtime I know that. I was only pointing out that the OP is wrong in assuming that the difference between two chars can be stored in a char."}, {"owner": {"reputation": 1419, "user_id": 3126790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lzjzz.jpg?s=128&g=1", "display_name": "Filip Veli\u010dkovi\u0107", "link": "https://stackoverflow.com/users/3126790/filip-veli%c4%8dkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1432779906, "post_id": 30487800, "comment_id": 49069601, "body": "Really weird question that I have ever seen... strcmp() is to supposed to return only -1, 0, 1... which looks pretty convenient to almost all the developers and it&#39;s the OP of this function. Seeing the first non-matching character won&#39;t even return each string&#39;s precedence. What&#39;s the use?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1433126893, "post_id": 30487800, "comment_id": 49201040, "body": "&quot;Since chars are being compared, their difference fits into a char in all cases&quot; - this is not true for signed chars. For example the difference between <code>127</code> and <code>-2</code> is <code>129</code> which doesn&#39;t fit into a signed char.   Nor can the return value be <code>unsigned char</code> because they can&#39;t be negative."}], "answers": [{"comments": [{"owner": {"reputation": 1697, "user_id": 3395831, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76732996d10182885b6ac1046e13c95?s=128&d=identicon&r=PG&f=1", "display_name": "Utku", "link": "https://stackoverflow.com/users/3395831/utku"}, "edited": false, "score": 0, "creation_date": 1432744865, "post_id": 30487879, "comment_id": 49055044, "body": "On the requirement to represent negative values: I guess that the function might have returned, say, 0 for negative, 1 for equal and 2 for greater, since as far as I understand, the function does not give any guarantees about the return value will represent the difference between first pair of non-matching characters. If that&#39;s the case, the function might have returned char right? So I wonder if could there be a more fundamental reason?"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "reply_to_user": {"reputation": 1697, "user_id": 3395831, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76732996d10182885b6ac1046e13c95?s=128&d=identicon&r=PG&f=1", "display_name": "Utku", "link": "https://stackoverflow.com/users/3395831/utku"}, "edited": false, "score": 0, "creation_date": 1432745067, "post_id": 30487879, "comment_id": 49055165, "body": "@Utku: Yes, it could have encoded the result in a different way and not required a signed type. But it would probably have returned <code>int</code> anyway, since that&#39;s the natural size for a function return value. And the encoding would probably be less efficient than the obvious implementation of <code>if (c1 != c2) return c1 - c2;</code>"}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "reply_to_user": {"reputation": 1697, "user_id": 3395831, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76732996d10182885b6ac1046e13c95?s=128&d=identicon&r=PG&f=1", "display_name": "Utku", "link": "https://stackoverflow.com/users/3395831/utku"}, "edited": false, "score": 0, "creation_date": 1432745242, "post_id": 30487879, "comment_id": 49055279, "body": "@Utku In mathematical terms <code>a &lt; b implies strcmp(a,b) &lt; 0</code> is more sound than <code>a &lt; b implies strcmp(a,b) = 1</code>"}, {"owner": {"reputation": 1697, "user_id": 3395831, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76732996d10182885b6ac1046e13c95?s=128&d=identicon&r=PG&f=1", "display_name": "Utku", "link": "https://stackoverflow.com/users/3395831/utku"}, "reply_to_user": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1432745410, "post_id": 30487879, "comment_id": 49055392, "body": "@UmNyobe Of course, but I speculated that it might have been done in the purpose of saving memory, unless there is another reason not to."}, {"owner": {"reputation": 1697, "user_id": 3395831, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76732996d10182885b6ac1046e13c95?s=128&d=identicon&r=PG&f=1", "display_name": "Utku", "link": "https://stackoverflow.com/users/3395831/utku"}, "edited": false, "score": 0, "creation_date": 1432746081, "post_id": 30487879, "comment_id": 49055825, "body": "@MikeSeymour But why using a &quot;natural size&quot; for return values is so important? Could you point out a resource on the importance of using natural size for function return values?"}, {"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "edited": false, "score": 0, "creation_date": 1432747897, "post_id": 30487879, "comment_id": 49056886, "body": "@uktu It&#39;s not particularly important, just the natural thing to do given a type whose size has been chosen to be efficient to pass around."}, {"owner": {"reputation": 4269, "user_id": 567326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/977ecb18cd54a1e3a9b76ffdd59d412a?s=128&d=identicon&r=PG", "display_name": "rskar", "link": "https://stackoverflow.com/users/567326/rskar"}, "edited": false, "score": 8, "creation_date": 1432748257, "post_id": 30487879, "comment_id": 49057102, "body": "A &quot;natural size&quot; <code>int</code> is a consequence of CPU design (see <a href=\"http://stackoverflow.com/questions/2331751/does-the-size-of-an-int-depend-on-the-compiler-and-or-processor\" title=\"does the size of an int depend on the compiler and or processor\">stackoverflow.com/questions/2331751/&hellip;</a>). One aspect of CPU design consideration generally respected by compiler writers is &quot;word alignment&quot; (see <a href=\"http://stackoverflow.com/questions/381244/purpose-of-memory-alignment\" title=\"purpose of memory alignment\">stackoverflow.com/questions/381244/purpose-of-memory-alignme&zwnj;&#8203;nt</a>). This consideration of &quot;word alignment&quot; would then guide the implementation of &quot;stack frames&quot; (see <a href=\"http://stackoverflow.com/questions/10057443/explain-the-concept-of-a-stack-frame-in-a-nutshell\" title=\"explain the concept of a stack frame in a nutshell\">stackoverflow.com/questions/10057443/&hellip;</a>)."}, {"owner": {"reputation": 4269, "user_id": 567326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/977ecb18cd54a1e3a9b76ffdd59d412a?s=128&d=identicon&r=PG", "display_name": "rskar", "link": "https://stackoverflow.com/users/567326/rskar"}, "edited": false, "score": 1, "creation_date": 1432748265, "post_id": 30487879, "comment_id": 49057109, "body": "Hence, for the sake of CPU efficiency and reliable compilation (not to mention skirting any chance of an unintended promotion or non-promotion, per platform implementation or compiler settings), the library writer(s) explicitly made the result returned into an <code>int</code>. That would be my guess, anyway."}], "tags": [], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 28, "last_activity_date": 1432743225, "creation_date": 1432743225, "answer_id": 30487879, "question_id": 30487800, "link": "https://stackoverflow.com/questions/30487800/why-strcmp-returns-int-but-not-char/30487879#30487879", "title": "Why strcmp returns int but not char?", "body": "<p><code>char</code> may or may not be signed. <code>strcmp</code> must return a signed type, so that it can be negative if the difference is negative.</p>\n\n<p>More generally, <code>int</code> is preferred for passing and returning simple numerical values, since it's defined as the \"natural\" size for such values and, on some platforms, is more efficient to deal with than smaller types.</p>\n"}, {"comments": [{"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1432743760, "post_id": 30487906, "comment_id": 49054371, "body": "@interjay: That may be for <code>getchar</code>, but for <code>isalpha</code> is useless. It looks like they said: &quot;look, we can accept EOF here and type <code>isalpha(getchar())</code>&quot;."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1432744582, "post_id": 30487906, "comment_id": 49054892, "body": "It&#39;s actually worse than useless, because it makes passing a <code>char</code> to <code>isalpha</code> wrong (you need to cast it to <code>unsigned char</code> first)."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1432748054, "post_id": 30487906, "comment_id": 49056979, "body": "@interjay: You only need to cast it if it is a char-as-char. If you have a proper char-as-integer, then it is fine: &#39;char x=getchar(); isalpha(x);` wrong! <code>int x=getchar(); isalpha(x);&quot; ok! Curiously, </code>isalpha(&#39;&#241;&#39;)` is ok in C but undefined in C++!"}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1432752269, "post_id": 30487906, "comment_id": 49059355, "body": "@rodrigo I don&#39;t think that&#39;s true - <code>&#39;&#241;&#39;</code> is an int in C, yes, but it will still have the same negative value."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1432752460, "post_id": 30487906, "comment_id": 49059454, "body": "@Random832: Hmmm, I&#39;ve just checked and you are right. Now I wonder why using GCC and Latin-1 encoding,<code>&#39;&#241;&#39;</code> is <code>-15</code> and not <code>241</code>."}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1432752464, "post_id": 30487906, "comment_id": 49059456, "body": "Also, for isalpha, it originally had isascii as a prerequisite (i.e. you needed to check <code>isascii(x) &amp;&amp; isalpha(x)</code>), in the pre-ANSI days."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1433127906, "post_id": 30487906, "comment_id": 49201195, "body": "@Random832: rodrigo was right the first time. <code>getchar()</code> returns either the negative value <code>EOF</code> (typically <code>-1</code>) <b>or</b> the next input character *as an <code>unsigned char</code> converted to an <code>int</code>. So assuming Latin-1, <code>getchar()</code> will return 241 for <code>&#39;&#241;&#39;</code>. Storing that value in a plain <code>char (if plain </code>char` is signed) will convert the <code>241</code> to <code>(char)-15</code>."}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1433128065, "post_id": 30487906, "comment_id": 49201224, "body": "@KeithThompson However, his allusion to it being different in C++ made it clear he was talking about using the <i>character literal</i> <code>&#39;&#241;&#39;</code> (which is a char in C++, but an int [but still with the value of a plain char] in C), not a char variable as a result of getchar or whatever."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1433145206, "post_id": 30487906, "comment_id": 49207050, "body": "@KeithThompson: Rangom832 is right. I was mistaken about the value of the character literal. Now I don&#39;t understand why <code>getchar()</code> reading a latin-1 <code>&#39;&#241;&#39;</code> returns <code>(int)241</code> but the literal <code>&#39;&#241;&#39;</code> is <code>(int)-15</code>. It is madness!"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1433170695, "post_id": 30487906, "comment_id": 49223599, "body": "@rodrigo: In C, a character constant is of type <code>int</code>; the value is that of the corresponding <code>char</code> value. If plain <code>char</code> is signed, certain character constants can be negative. In C++, the value of <code>&#39;&#241;&#39;</code> is also negative (again assuming plain <code>char</code> is signed); the difference is that its type is <code>char</code>."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1433176699, "post_id": 30487906, "comment_id": 49227499, "body": "@KeithThompson: Yeah, I know that now. And <code>getchar()</code> is defined as reading &quot;<i>the next byte as an <b>unsigned char</b> converted to an int</i>&quot; so everything is perfectly defined. I just find surprising that I have to write <code>(unsigned char)&#39;&#241;&#39;</code> to get the proper value of a character."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1433178857, "post_id": 30487906, "comment_id": 49228737, "body": "@rodrigo: That&#39;s assuming you&#39;re using Latin-1. With my setup, for example, I&#39;m not even sure how to enter a Latin-1 <code>&#39;&#241;&#39;</code> character in a text file; if I type or copy-and-paste it, I get a UTF-8 2-byte sequence."}], "tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": false, "score": 3, "last_activity_date": 1432743303, "creation_date": 1432743303, "answer_id": 30487906, "question_id": 30487800, "link": "https://stackoverflow.com/questions/30487800/why-strcmp-returns-int-but-not-char/30487906#30487906", "title": "Why strcmp returns int but not char?", "body": "<p>AFAIK, the standard C library doesn't have a single function that takes or returns values of type <code>char</code>. It has arguments and return types of type <code>char*</code> or <code>const char*</code> but not plain <code>char</code>.</p>\n\n<p>Look for example at <code>int isalpha(int c);</code> for a more shocking instance.</p>\n\n<p>I don't know why, but I can guess. Maybe it is due to the ABI. In any ABI I know, any argument or return value of type <code>char</code> is internally promoted to <code>int</code> anyway, so there is no point in doing it. It acutally will make the code <em>less</em> efficient, as you will need to do the truncating each time the function is used.</p>\n"}, {"comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1432765474, "post_id": 30488010, "comment_id": 49065921, "body": "... Why do you have a PDP-11 available to test stuff on?"}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1432766002, "post_id": 30488010, "comment_id": 49066123, "body": "@immibis It&#39;s emulated, of course. And V7 does handle it properly; but my point stands that it costs extra instructions to convert it, and still more to make sure out-of-range values are handled correctly, and that there&#39;s no real benefit to returning a char."}], "tags": [], "owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "is_accepted": true, "score": 11, "last_activity_date": 1432750512, "last_edit_date": 1432750512, "creation_date": 1432743581, "answer_id": 30488010, "question_id": 30487800, "link": "https://stackoverflow.com/questions/30487800/why-strcmp-returns-int-but-not-char/30488010#30488010", "title": "Why strcmp returns int but not char?", "body": "<p>Of course, despite the overflow possibility others have mentioned, it only <em>needs</em> to be able to return e.g. -1, 0, or 1 - which easily fit in a signed char. The real historical reason for this is that in the original version of C in the 1970s, functions <em>couldn't</em> return a char, and any attempt to do so resulted in returning an int.</p>\n\n<p>In these early compilers, int was also the default type (many situations, including function return values as seen in main below, allowed you to declare something as int without actually using the int keyword), so it made sense to define any function that didn't specifically need to return a different type as returning an int.</p>\n\n<p>Even now, a char return simply sign-extends the value into the int return register (r0 on pdp11, eax on x86), anyway. Treating it as a char would not have any performance benefit, whereas allowing it to be the actual difference rather than forcing it to be -1 or 1 did have a small performance benefit. And axiac's answer also makes the good point that it would have had to be promoted back to an int anyway, for the comparison operator. The reason for these promotions is also historical, incidentally, it was so that the compiler did not have to implement separate operators for every possible combination of char and int, especially since the comparison instructions on many processors only works with an int anyway.</p>\n\n<hr>\n\n<p>Proof: If I make a test program on Unix V6 for PDP-11, the char type is silently ignored and an integer value outside the range is returned:</p>\n\n<pre><code>char foo() {\n    return 257;\n}\n\nmain() {\n    printf(\"%d\\n\", foo());\n    return 0;\n}\n\n# cc foo.c\n# a.out\n257\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1697, "user_id": 3395831, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76732996d10182885b6ac1046e13c95?s=128&d=identicon&r=PG&f=1", "display_name": "Utku", "link": "https://stackoverflow.com/users/3395831/utku"}, "edited": false, "score": 0, "creation_date": 1432745286, "post_id": 30488433, "comment_id": 49055309, "body": "So, the reason is the fact that arithmetic operators always operate on int, and any other type that is an operand of an arithmetic operator is <i>always</i> implicitly converted to int?"}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "reply_to_user": {"reputation": 1697, "user_id": 3395831, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76732996d10182885b6ac1046e13c95?s=128&d=identicon&r=PG&f=1", "display_name": "Utku", "link": "https://stackoverflow.com/users/3395831/utku"}, "edited": false, "score": 0, "creation_date": 1432752157, "post_id": 30488433, "comment_id": 49059295, "body": "@Utku Not <i>always</i> per se, only when it&#39;s char or short."}], "tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": false, "score": 3, "last_activity_date": 1432745478, "last_edit_date": 1495542139, "creation_date": 1432744857, "answer_id": 30488433, "question_id": 30487800, "link": "https://stackoverflow.com/questions/30487800/why-strcmp-returns-int-but-not-char/30488433#30488433", "title": "Why strcmp returns int but not char?", "body": "<p>One possible reason why <code>strcmp()</code> promotes the values it returns to <code>int</code> is to spare a processor instruction in the calling code.</p>\n\n<p>Usually (always?) the value returned by <code>strcmp()</code> is used with a <a href=\"http://en.cppreference.com/w/c/language/operator_comparison\" rel=\"nofollow noreferrer\">comparison operator</a>.</p>\n\n<p>Let's see what happens with the operands of comparison operators.</p>\n\n<blockquote>\n  <p><strong>Usual arithmetic conversions</strong></p>\n  \n  <p>The arguments of the following arithmetic operators undergo implicit conversions for the purpose of obtaining the common real type, which is the type in which the calculation is performed:</p>\n  \n  <ul>\n  <li>binary arithmetic <code>*</code>, <code>/</code>, <code>%</code>, <code>+</code>, <code>-</code></li>\n  <li>relational operators <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>==</code>, <code>!=</code> </li>\n  <li>binary bitwise arithmetic <code>&amp;</code>, <code>^</code>, <code>|</code></li>\n  <li>the conditional operator <code>?:</code></li>\n  </ul>\n  \n  <p>...</p>\n  \n  <p>4) Otherwise, both operands are integers. In that case,</p>\n  \n  <p>First of all, both operands undergo integer promotions.<br>\n  ...</p>\n</blockquote>\n\n<p><em>(source: <a href=\"http://en.cppreference.com/w/c/language/conversion#Usual_arithmetic_conversions\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/c/language/conversion#Usual_arithmetic_conversions</a>)</em></p>\n\n<blockquote>\n  <p><strong>Integer promotions</strong></p>\n  \n  <p>Integer promotion is the implicit conversion of a value of any integer type with rank less or equal to rank of int or of a bit field of type _Bool, int, signed int, unsigned int, to the value of type <code>int</code> or <code>unsigned int</code>.</p>\n</blockquote>\n\n<p><em>(source: <a href=\"http://en.cppreference.com/w/c/language/conversion#Integer_promotions\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/c/language/conversion#Integer_promotions</a>)</em></p>\n\n<h3>Back to <code>strcmp()</code></h3>\n\n<p>As you can see from the quotes above, a possible <code>char</code> value returned by <code>strcmp()</code> is promoted to <code>int</code> anyway.</p>\n\n<h3>Why did the creators of C chose to return an <code>int</code>?</h3>\n\n<p>For a very simple reason: because the promotion is going to happen anyway and because (at least) one processor instruction is needed to perform the promotion, its more convenient to add that instruction to the code of <code>strcmp()</code> (i.e. in a single place) than everywhere the <code>strcmp()</code> function is called.</p>\n\n<p>Back in the 70s both the memory and the CPU were very valuable resources. An optimization that now seems insignificant (a couple of bytes of memory saved here and there, maybe in several dozen places in the code) had much more importance back then.</p>\n\n<h3>Update:</h3>\n\n<p>On a second thought, I think the historical reasons provided by <a href=\"https://stackoverflow.com/a/30488010/4265352\">this answer</a> and <a href=\"https://stackoverflow.com/a/30487879/4265352\">this answer</a> are more accurate than mine.</p>\n"}], "owner": {"reputation": 1697, "user_id": 3395831, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76732996d10182885b6ac1046e13c95?s=128&d=identicon&r=PG&f=1", "display_name": "Utku", "link": "https://stackoverflow.com/users/3395831/utku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1172, "favorite_count": 1, "accepted_answer_id": 30488010, "answer_count": 4, "score": 14, "last_activity_date": 1433124929, "creation_date": 1432743001, "question_id": 30487800, "link": "https://stackoverflow.com/questions/30487800/why-strcmp-returns-int-but-not-char", "title": "Why strcmp returns int but not char?", "body": "<p>As far as I know, the only difference between variable types such as <code>char</code>, <code>int</code> etc. is the amount of memory they occupy. I guess that they have no role in regulating what the variable they are holding represents. If that's true, in <a href=\"http://www.gnu.org/software/libc/manual/html_node/String_002fArray-Comparison.html\" rel=\"noreferrer\">here</a>, I have seen the following for <code>strcmp</code>:</p>\n\n<blockquote>\n  <p>The strcmp function compares the string s1 against s2, returning a\n  value that has the same sign as the difference between the first\n  differing pair of characters (interpreted as unsigned char objects,\n  then promoted to int).</p>\n</blockquote>\n\n<p>I want to ask why is the result promoted to <code>int</code>? Since <code>char</code>s are being compared, their difference fits into a <code>char</code> in all cases. So isn't promoting the result to <code>int</code> simply appending bunch of 0's at the end of the result? So, why is this done?</p>\n"}, {"tags": ["c", "while-loop", "formatting", "boolean-logic"], "comments": [{"owner": {"reputation": 199084, "user_id": 56338, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92fb4563ddc5ceeaa8b19b60a7a172f4?s=128&d=identicon&r=PG", "display_name": "sth", "link": "https://stackoverflow.com/users/56338/sth"}, "edited": false, "score": 2, "creation_date": 1432740784, "post_id": 30486919, "comment_id": 49052351, "body": "You should get a few compiler warnings about invalid conversions/... since you are assigning/comparing strings to integers."}, {"owner": {"reputation": 486, "user_id": 4773612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tslp9.jpg?s=128&g=1", "display_name": "Misery", "link": "https://stackoverflow.com/users/4773612/misery"}, "edited": false, "score": 1, "creation_date": 1432740795, "post_id": 30486919, "comment_id": 49052360, "body": "Use <code>true</code> and <code>false</code> instead of <code>&quot;true&quot;</code> and <code>&quot;false&quot;</code>.  <code>&quot;true&quot;</code> is a string (or a char array as you prefer)  and <code>true</code> is a call to your define"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432740842, "post_id": 30486919, "comment_id": 49052400, "body": "Can you please explain why are you using quotes?"}, {"owner": {"reputation": 8331, "user_id": 4350275, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh4.googleusercontent.com/-Mo6YiD_JPIc/AAAAAAAAAAI/AAAAAAAAHB4/TgdGmvza868/photo.jpg?sz=128", "display_name": "Prerak Sola", "link": "https://stackoverflow.com/users/4350275/prerak-sola"}, "edited": false, "score": 0, "creation_date": 1432741024, "post_id": 30486919, "comment_id": 49052530, "body": "Apart from compiler errors, the line with <code>break</code> is breaking your outer loop."}, {"owner": {"reputation": 63, "user_id": 4945329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb6a5d2f2af3dbca91a564ca69cc08d?s=128&d=identicon&r=PG&f=1", "display_name": "WRosko", "link": "https://stackoverflow.com/users/4945329/wrosko"}, "edited": false, "score": 0, "creation_date": 1432741069, "post_id": 30486919, "comment_id": 49052556, "body": "I did the quotes because after defining a true and false, it would just skip over everything. I set the int to a string just as a value that could be checked or returned."}, {"owner": {"reputation": 63, "user_id": 4945329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb6a5d2f2af3dbca91a564ca69cc08d?s=128&d=identicon&r=PG&f=1", "display_name": "WRosko", "link": "https://stackoverflow.com/users/4945329/wrosko"}, "edited": false, "score": 0, "creation_date": 1432741172, "post_id": 30486919, "comment_id": 49052622, "body": "If I delete that last break, then I get an infinitely repeating text output in my command window. I&#39;m using codeblocks and am not getting any compiler errors."}, {"owner": {"reputation": 486, "user_id": 4773612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tslp9.jpg?s=128&g=1", "display_name": "Misery", "link": "https://stackoverflow.com/users/4773612/misery"}, "edited": false, "score": 0, "creation_date": 1432741214, "post_id": 30486919, "comment_id": 49052656, "body": "@WadeRosko It doesn&#39;t makes any sense. Did you even try to print your int values to see what is wrong ? You should."}, {"owner": {"reputation": 63, "user_id": 4945329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb6a5d2f2af3dbca91a564ca69cc08d?s=128&d=identicon&r=PG&f=1", "display_name": "WRosko", "link": "https://stackoverflow.com/users/4945329/wrosko"}, "edited": false, "score": 0, "creation_date": 1432741933, "post_id": 30486919, "comment_id": 49053169, "body": "In these two pictures you see the plain true false and how nothing appears in the cmd window, and then the outcome of the quoted one. imgur.com/a/Ap62C"}, {"owner": {"reputation": 8331, "user_id": 4350275, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh4.googleusercontent.com/-Mo6YiD_JPIc/AAAAAAAAAAI/AAAAAAAAHB4/TgdGmvza868/photo.jpg?sz=128", "display_name": "Prerak Sola", "link": "https://stackoverflow.com/users/4350275/prerak-sola"}, "edited": false, "score": 0, "creation_date": 1432742127, "post_id": 30486919, "comment_id": 49053311, "body": "Also, how do you plan to terminate the program? Means, how can a user exit from the program?"}, {"owner": {"reputation": 486, "user_id": 4773612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tslp9.jpg?s=128&g=1", "display_name": "Misery", "link": "https://stackoverflow.com/users/4773612/misery"}, "edited": false, "score": 0, "creation_date": 1432742265, "post_id": 30486919, "comment_id": 49053408, "body": "Just put back these 2 lines <code>int stilltrue = false;</code> and <code>while (stilltrue == false)</code> but without the quotes, it&#39;s the only thing you have to change, just remove the quotes, nothing else."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 4945329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb6a5d2f2af3dbca91a564ca69cc08d?s=128&d=identicon&r=PG&f=1", "display_name": "WRosko", "link": "https://stackoverflow.com/users/4945329/wrosko"}, "edited": false, "score": 0, "creation_date": 1432741349, "post_id": 30487119, "comment_id": 49052749, "body": "That&#39;s what I did initially, but it ends up not prompting the user for any information and does not print anything when it runs."}, {"owner": {"reputation": 1769, "user_id": 2708608, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/zPQK0.png?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2708608/amit-sharma"}, "reply_to_user": {"reputation": 63, "user_id": 4945329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb6a5d2f2af3dbca91a564ca69cc08d?s=128&d=identicon&r=PG&f=1", "display_name": "WRosko", "link": "https://stackoverflow.com/users/4945329/wrosko"}, "edited": false, "score": 0, "creation_date": 1432741579, "post_id": 30487119, "comment_id": 49052912, "body": "You have to simply assign the value as <code>int stilltrue = false;</code> and while loop condition  will be simply as <code>while(stilltrue)</code>. The condition are basically an expression which finally has to be evaluated as <code>true</code> ie. <code>non-zero</code> in C and <code>false</code> ie. <code>zero</code> in C."}, {"owner": {"reputation": 486, "user_id": 4773612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tslp9.jpg?s=128&g=1", "display_name": "Misery", "link": "https://stackoverflow.com/users/4773612/misery"}, "reply_to_user": {"reputation": 63, "user_id": 4945329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb6a5d2f2af3dbca91a564ca69cc08d?s=128&d=identicon&r=PG&f=1", "display_name": "WRosko", "link": "https://stackoverflow.com/users/4945329/wrosko"}, "edited": false, "score": 0, "creation_date": 1432741706, "post_id": 30487119, "comment_id": 49053014, "body": "@WadeRosko It is because you don&#39;t have remove your <code>break</code> statement yet."}, {"owner": {"reputation": 63, "user_id": 4945329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb6a5d2f2af3dbca91a564ca69cc08d?s=128&d=identicon&r=PG&f=1", "display_name": "WRosko", "link": "https://stackoverflow.com/users/4945329/wrosko"}, "edited": false, "score": 0, "creation_date": 1432741846, "post_id": 30487119, "comment_id": 49053105, "body": "I did that, and then also tried another variant of it without the quotes. In these two pictures you see the plain true false and how nothing appears in the cmd window, and then the outcome of the quoted one. <a href=\"http://imgur.com/a/Ap62C\" rel=\"nofollow noreferrer\">imgur.com/a/Ap62C</a>"}, {"owner": {"reputation": 1769, "user_id": 2708608, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/zPQK0.png?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2708608/amit-sharma"}, "edited": false, "score": 1, "creation_date": 1432742124, "post_id": 30487119, "comment_id": 49053306, "body": "one more thing <code>scanf</code> return the number of characters written. Therefore, in case some one inputted integer of more than two digits . <code>if</code> condition in first <code>while</code> loop will fail."}, {"owner": {"reputation": 63, "user_id": 4945329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb6a5d2f2af3dbca91a564ca69cc08d?s=128&d=identicon&r=PG&f=1", "display_name": "WRosko", "link": "https://stackoverflow.com/users/4945329/wrosko"}, "edited": false, "score": 0, "creation_date": 1432742361, "post_id": 30487119, "comment_id": 49053468, "body": "It does not fail. I can enter any int regardless of its length and the program runs and displays each output. I&#39;m just stuck trying to get the program to loop back to asking for the number if someone does not input a number."}, {"owner": {"reputation": 1769, "user_id": 2708608, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/zPQK0.png?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2708608/amit-sharma"}, "edited": false, "score": 0, "creation_date": 1432743866, "post_id": 30487119, "comment_id": 49054440, "body": "First adopt the above suggested changes. <code>stilltrue = &quot;true&quot;;</code> remove this line from the body of second <code>while</code> loop. And set the value of <code>stilltrue</code> in <code>else</code> as <code>stilltrue = false;</code> and do remove the <code>break</code> too. First <code>while</code> condition can be anything <code>stilltrue == false</code> or <code>!stilltrue</code>. Adopt these changes."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1432759861, "post_id": 30487119, "comment_id": 49063516, "body": "@AmitSharma: <code>scanf</code> returns the number of successful conversions and assignments, not characters read.  <code>scanf(&quot;%d&quot;,&amp;user_number) == 1</code> will work for any number of digits (up to the max supported by <code>int</code>, anyway)."}, {"owner": {"reputation": 1769, "user_id": 2708608, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/zPQK0.png?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2708608/amit-sharma"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1432777811, "post_id": 30487119, "comment_id": 49069121, "body": "@JohnBode Yeah.. Thanks. True it is <code>printf</code> which returns the number of char written. Whereas <code>scanf</code> returns the no. of successful conversion and assignment."}], "tags": [], "owner": {"reputation": 1769, "user_id": 2708608, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/zPQK0.png?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2708608/amit-sharma"}, "is_accepted": false, "score": 1, "last_activity_date": 1432741244, "creation_date": 1432741244, "answer_id": 30487119, "question_id": 30486919, "link": "https://stackoverflow.com/questions/30486919/how-to-format-code-so-while-loop-is-triggered-c/30487119#30487119", "title": "How to format code so while loop is triggered C", "body": "<pre><code>#define true 1\n#define false 0\n</code></pre>\n\n<p>These are directives and <code>#define</code> directive causes the compiler to substitute token-string for each occurrence of identifier in the source file.</p>\n\n<p>Simply use <code>true</code> or <code>false</code> instead <code>\"true\"</code> and <code>\"false\"</code>. By using them as <code>\"true\"</code> or <code>\"false\"</code> they will be treated as string. Therefore your loop is not iterating.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1432741848, "creation_date": 1432741848, "answer_id": 30487356, "question_id": 30486919, "link": "https://stackoverflow.com/questions/30486919/how-to-format-code-so-while-loop-is-triggered-c/30487356#30487356", "title": "How to format code so while loop is triggered C", "body": "<pre><code>int stilltrue = \"false\"; //create integer to use in while\nwhile (stilltrue == \"false\"){//initiate while loop\n</code></pre>\n\n<p>Those lines will absolutely <em>not</em> do what you want, and your compiler should have complained about the initialization of <code>stilltrue</code> in the declaration.  <code>\"false\"</code> is a <em>string literal</em>, not the <code>false</code> symbol that you defined earlier. </p>\n\n<p>Change those to</p>\n\n<pre><code>int stilltrue = false; //create integer to use in while\nwhile (stilltrue == false){//initiate while loop\n</code></pre>\n\n<p>or better,</p>\n\n<pre><code>int stilltrue = false;\nwhile ( !stilltrue ) {\n</code></pre>\n\n<p>Note that <code>true</code> and <code>false</code> are already defined in <code>stdbool.h</code>; there's no need to define them on your own.  </p>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 4945329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb6a5d2f2af3dbca91a564ca69cc08d?s=128&d=identicon&r=PG&f=1", "display_name": "WRosko", "link": "https://stackoverflow.com/users/4945329/wrosko"}, "edited": false, "score": 0, "creation_date": 1432910787, "post_id": 30516282, "comment_id": 49138630, "body": "That works great. Thank you. Why is the <b>scanf ( &quot;%*[^\\n]&quot;);</b> necessary/ what does it do in this case."}], "tags": [], "owner": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "is_accepted": true, "score": 0, "last_activity_date": 1432844148, "creation_date": 1432844148, "answer_id": 30516282, "question_id": 30486919, "link": "https://stackoverflow.com/questions/30486919/how-to-format-code-so-while-loop-is-triggered-c/30516282#30516282", "title": "How to format code so while loop is triggered C", "body": "<p>If scanf fails when reading an integer, the input buffer needs to be cleared of the character causing the failure. The scanset <code>\"%*[^\\n]\"</code> scans and discards characters that are not newline. A newline is left in the input buffer but the <code>%d</code> format specifier will skip leading whitespace.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define true 1\n#define false 0\n\nint main()\n{\n    int user_number;//create a new integer variable\n    int last_multiple;//create a new integer variable for max in mult table\n    int stilltrue = false; //create integer to use in while\n    while (stilltrue == false){//initiate while loop\n        printf(\"Please enter a positive integer you would like the table for and\"\n        \" hit enter, then enter the max value of its multiplication \"\n        \"table: \\n\");\n        //takes two inputs and makes sure they are integers\n        if ( ( scanf(\"%d %d\", &amp;user_number, &amp;last_multiple)) == 2){\n            printf(\"The number you typed was %d and the \"\n            \" value was %d \\n\\n\",user_number,last_multiple);\n\n            while (last_multiple &gt; 0){\n                int multiple;//multiple of user_number and last_multiple\n                multiple = user_number * last_multiple;\n                printf(\"%d x %d is %d \\n\\n\", user_number,last_multiple,multiple);\n                last_multiple = last_multiple - 1;//decrease the last_multiple value by 1\n                stilltrue = true;\n            }\n\n        } else {\n            printf(\"That was not an integer. \\n\");\n            stilltrue = false; //This isn't needed here\n            scanf ( \"%*[^\\n]\");//clear input buffer of all characters up to newline\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4945329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb6a5d2f2af3dbca91a564ca69cc08d?s=128&d=identicon&r=PG&f=1", "display_name": "WRosko", "link": "https://stackoverflow.com/users/4945329/wrosko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 30516282, "answer_count": 3, "score": 0, "last_activity_date": 1432844148, "creation_date": 1432740707, "question_id": 30486919, "link": "https://stackoverflow.com/questions/30486919/how-to-format-code-so-while-loop-is-triggered-c", "title": "How to format code so while loop is triggered C", "body": "<p>So I have two while loops. The outer most one does not loop back the way I want it to. </p>\n\n<p>I first tried:</p>\n\n<pre><code>#define true 1\n#define false 0\n</code></pre>\n\n<p>But then  set it to what I did below.</p>\n\n<p>My problem is that when I run the program, it terminates after an invalid input. I would like it to loop back to the start if something incorrect is entered.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int user_number;//create a new integer variable\n    int last_multiple;//create a new integer variable for max in mult table\n    int stilltrue = \"false\"; //create integer to use in while\n    while (stilltrue == \"false\"){//initiate while loop\n    printf(\"Please enter a positive integer you would like the table for and\"\n           \" hit enter, then enter the max value of its multiplication \"\n           \"table: \\n\");\n//takes two inputs and makes sure they are integers\n    if(scanf(\"%d\",&amp;user_number) == 1 &amp;&amp; scanf(\"%d\",&amp;last_multiple)== 1){\n        printf(\"The number you typed was %d and the \"\n           \" value was %d \\n\\n\",user_number,last_multiple);\n\n    while (last_multiple &gt; 0){\n\n        int multiple;//multiple of user_number and last_multiple\n        multiple = user_number * last_multiple;\n        printf(\"%d x %d is %d \\n\\n\", user_number,last_multiple,multiple);\n        last_multiple = last_multiple - 1;//decrease the last_multiple value by 1\n        stilltrue = \"true\";\n    }\n\n    } else {\n        printf(\"That was not an integer. \\n\");\n        stilltrue = \"false\"; //This isn't needed here\n\n    }break;\n    }\n    return 0;\n\n}\n</code></pre>\n\n<p>So what do I modify to make it loop back if it makes it to this spot</p>\n\n<pre><code>else {\n        printf(\"That was not an integer. \\n\");\n        stilltrue = \"false\"; //This isn't needed here\n\n    }\n</code></pre>\n\n<p>Thank you for the help!</p>\n"}, {"tags": ["php", "c", "date", "time", "strtotime"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1432740619, "post_id": 30486776, "comment_id": 49052214, "body": "POSIX has <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/strptime.html\" rel=\"nofollow noreferrer\"><code>strptime()</code></a>. POSIX is not universal though."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1432741531, "post_id": 30486776, "comment_id": 49052867, "body": "@pmg: Just curious: what would be universal? I only can think of a human, but that might have as well problems with alien (yes, those from above) encodings."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1432742812, "post_id": 30486776, "comment_id": 49053775, "body": "When I hear &quot;universal&quot; in the context of C, I interpret as belonging to the C99 Standard (or maybe C89 Standard if &quot;universal&quot; includes windows)."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1432742841, "post_id": 30486776, "comment_id": 49053799, "body": "If you want to catch several formats and also do reasonable error checking, <code>sscanf</code> probably isn&#39;t a good approach. You could store several patterns, though, and check them one by one."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1432743156, "post_id": 30486776, "comment_id": 49053984, "body": "@pmg: Well, that would be for program code. For a data format, I would see that broader actually. Or just stick to ISO8601. But &quot;universal&quot; is <i>very</i> ambitious."}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432778654, "post_id": 30488711, "comment_id": 49069315, "body": "a MUCH better way to get to the common code is make that common code a function, with appropriate parameters. and call it when needed."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432784467, "post_id": 30488711, "comment_id": 49070704, "body": "Curious, Why <code>&quot;%u-%u-%u ...&quot;</code> instead of <code>&quot;%d-%d-%d ...</code>? Both accept <code>&#39;+&#39;</code> and <code>&#39;-&#39;</code>."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432787766, "post_id": 30488711, "comment_id": 49071504, "body": "@chux: Do they? In my implementation they don&#39;t."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432823233, "post_id": 30488711, "comment_id": 49094318, "body": "<code>unsigned u = 7; sscanf(&quot;-1&quot;, &quot;%u&quot;, &amp;u); printf(&quot;%u\\n&quot;, u);</code> --&gt; <code>4294967295</code> and the C spec does says <code>%u</code> matches <code>strtoul()</code> and  <code>strtol()&#47;strtoul()</code> accept <code>+&#47;-</code>"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432826533, "post_id": 30488711, "comment_id": 49096891, "body": "@chux: Okay, I&#39;m not fluent in the C standard, but you are right: &quot;<b>u</b> -- Matches an optionally signed decimal integer...&quot;, which I find somewhat counterintuitive. When I tested it this morning, with a similar test like yours, I got a result of 0 and the value was still the magic value I put in, but that might have been because that machine isn&#39;t super up-to-date. Anyway: My answer to your question &quot;Why <code>%u</code> instead of <code>%d</code>&quot; is: Because it semantically ought to be unsigned, even if <code>%d</code> and <code>%u</code> seem to be the same by the standard."}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 2, "last_activity_date": 1432745665, "creation_date": 1432745665, "answer_id": 30488711, "question_id": 30486776, "link": "https://stackoverflow.com/questions/30486776/strtotime-function-in-c/30488711#30488711", "title": "strtotime function in C", "body": "<p>A function to convert any time format is a very ambitious project as a A look at the recognised date formats for the PHP <code>strtotime</code> function shows. </p>\n\n<p>But if you have a few known timestamp formats in use on your servers, you can check them separately:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n\nint strtomonth(int *mm, const char *str)\n{\n    static const char *sname[] = {\n        \"jan\", \"feb\", \"mar\", \"apr\", \"may\", \"jun\",\n        \"jul\", \"aug\", \"sep\", \"oct\", \"nov\", \"dec\",\n        NULL\n    };    \n    int i;\n\n    for (i = 0; sname[i]; i++) {\n        if (strcmp(sname[i], str) == 0) {\n            *mm = i + 1;\n            return 1;\n        }\n    }\n\n    return 0;\n}\n\nint strtotime(time_t *time, const char *s)\n{\n    struct tm tm;\n    int dd, mm, yy;\n    int hrs, min, sec;\n    char buf[20];\n\n    if (sscanf(s, \"%u-%u-%u %u:%u:%u\",\n        &amp;yy, &amp;mm, &amp;dd, &amp;hrs, &amp;min, &amp;sec) == 6) goto okay;\n\n    if (sscanf(s, \"%u-%19[a-zA-Z]-%u %u:%u:%u\",\n        &amp;yy, buf, &amp;dd, &amp;hrs, &amp;min, &amp;sec) == 6\n        &amp;&amp; strtomonth(&amp;mm, buf)) goto okay;\n\n    return 0;\n\n  okay:\n    // Do some sanity checking to rule out 2015-mar-35 and such\n\n    tm.tm_sec = sec;\n    tm.tm_min = min;\n    tm.tm_hour = hrs;\n    tm.tm_mday = dd;\n    tm.tm_mon = mm - 1;\n    tm.tm_year = yy - 1900;\n\n    *time = mktime(&amp;tm);\n    return 1;\n}\n</code></pre>\n\n<p>This rather long but still very rough code, which doesn't check whether the dates and times are reasonable, recognises the two formats <code>\"2015-05-30 18:13:04\"</code>and <code>\"2015-may-30 18:13:04\"</code>. You can add more as you encounter them.</p>\n\n<p>The <code>goto</code> may be ugly, but I think it is a good way to get to the common code at the end. The month lookup is very crude, but should be okay for short strings.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4656543"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1668, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432745665, "creation_date": 1432740361, "question_id": 30486776, "link": "https://stackoverflow.com/questions/30486776/strtotime-function-in-c", "title": "strtotime function in C", "body": "<p>I'm trying to make a universal function in C that can convert a date from any server log file in any format into a timestamp since I want to log how frequent potential hackers failed to crack the server. In PHP I can use strtotime but I don't think such functionality exists in C.</p>\n\n<p>If all log files used the same time format in the form of YYYY-MM-DD HH:MM:SS then I could get away with code like this:</p>\n\n<pre><code>//tmadd = 19 bytes as a char reserved for date/time plus trailing null\nlong result=0;\nstruct tm x;\nif (sscanf(tmadd,\"%i-%i-%i %i:%i:%i\",&amp;x.tm_year,&amp;x.tm_mon,&amp;x.tm_mday,&amp;x.tm_hour,&amp;x.tm_min,&amp;x.tm_sec) &gt;= 6){x.tm_year-=1900;result=mktime(&amp;x);}\n</code></pre>\n\n<p>The problem is some logs have months as words and I have yet to find a function to capture the numeric equivalent.</p>\n\n<p>I want to be able to do the whole conversion within one function. </p>\n\n<p>Is there an easy function I can use to get a raw timestamp from any specified date in any common format? I'm basically looking for a way to roll off my own PHP's strtotime().</p>\n"}, {"tags": ["c", "gcc", "optimization", "x86"], "comments": [{"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 1, "creation_date": 1432740518, "post_id": 30486708, "comment_id": 49052144, "body": "what optimization level are you compiling with? because I have a real hard time beating the compiler when I write normal code and use -O3 or -Ofast"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1432740896, "post_id": 30486708, "comment_id": 49052441, "body": "I guess you can hint gcc about the probability of condition being true or false. It seems like your gcc is very convinced that the branch is either mostly true or mostly false so that runtime prediction works better than predication?"}, {"owner": {"reputation": 1416, "user_id": 1614328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87513aca8db89da2687b1ca6de473c16?s=128&d=identicon&r=PG", "display_name": "Pat Morin", "link": "https://stackoverflow.com/users/1614328/pat-morin"}, "reply_to_user": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1432750668, "post_id": 30486708, "comment_id": 49058411, "body": "@GradyPlayer: This is compiled with -O4, and in the first example it happily uses cmov operations."}, {"owner": {"reputation": 1416, "user_id": 1614328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87513aca8db89da2687b1ca6de473c16?s=128&d=identicon&r=PG", "display_name": "Pat Morin", "link": "https://stackoverflow.com/users/1614328/pat-morin"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1432750790, "post_id": 30486708, "comment_id": 49058486, "body": "@user3528438 : In that case, gcc is completely wrong. Each branch has a 50% chance of being taken at each step."}, {"owner": {"reputation": 11382, "user_id": 383299, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c58112cf5af7aa705cf709d96af8f7c1?s=128&d=identicon&r=PG&f=1", "display_name": "Jukka Suomela", "link": "https://stackoverflow.com/users/383299/jukka-suomela"}, "edited": false, "score": 0, "creation_date": 1432757116, "post_id": 30486708, "comment_id": 49062126, "body": "Apparently, this is not specific to prefetching as such. Simply adding e.g. <code>asm (&quot;&quot;);</code> instead of <code>__builtin_prefetch</code> has the same effect."}, {"owner": {"reputation": 1416, "user_id": 1614328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87513aca8db89da2687b1ca6de473c16?s=128&d=identicon&r=PG", "display_name": "Pat Morin", "link": "https://stackoverflow.com/users/1614328/pat-morin"}, "reply_to_user": {"reputation": 11382, "user_id": 383299, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c58112cf5af7aa705cf709d96af8f7c1?s=128&d=identicon&r=PG&f=1", "display_name": "Jukka Suomela", "link": "https://stackoverflow.com/users/383299/jukka-suomela"}, "edited": false, "score": 0, "creation_date": 1432758141, "post_id": 30486708, "comment_id": 49062717, "body": "@JukkaSuomela I can understand <code>asm</code> being a problem (who knows what it&#39;s doing) but gcc controls the code generated by the <code>__builtin_prefetch</code>, so I wouldn&#39;t have thought it would have such a profound effect.  <code>clang</code> seems to handle it better."}], "answers": [{"comments": [{"owner": {"reputation": 1416, "user_id": 1614328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87513aca8db89da2687b1ca6de473c16?s=128&d=identicon&r=PG", "display_name": "Pat Morin", "link": "https://stackoverflow.com/users/1614328/pat-morin"}, "edited": false, "score": 0, "creation_date": 1432751198, "post_id": 30487046, "comment_id": 49058737, "body": "Unfortunately, this isn&#39;t acceptable. The code above is just a minimum working example.  In reality, this is a templated C++ method in which &quot;int* a&quot; is &quot;T* a&quot; and &quot;int x&quot; is &quot;T x&quot;.  I can&#39;t write assembly stubs for every possible type T.  This code is part of a project to study the effects of array layouts on searching. The prefetch instruction is very specific for a reason: The cache line containing the prefetched address will be accessed exactly  four iterations after the prefetch instruction is issued."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1416, "user_id": 1614328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87513aca8db89da2687b1ca6de473c16?s=128&d=identicon&r=PG", "display_name": "Pat Morin", "link": "https://stackoverflow.com/users/1614328/pat-morin"}, "edited": false, "score": 0, "creation_date": 1432755004, "post_id": 30487046, "comment_id": 49060804, "body": "@PatMorin: No reason to blame (downvote? - bad attitude) the messenger for an unpleasant message. The gcc team will very likely be happy if you help them enhance their optimization algorithms. Alternatively, you might try clang/llvm; that might prove better here, or - at least - should be easier to extend with your own optimizer. Also note you tagged the question C and there are no templates in C, so you might as well blame yourself for giving wrong information."}, {"owner": {"reputation": 1416, "user_id": 1614328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87513aca8db89da2687b1ca6de473c16?s=128&d=identicon&r=PG", "display_name": "Pat Morin", "link": "https://stackoverflow.com/users/1614328/pat-morin"}, "edited": false, "score": 0, "creation_date": 1432755722, "post_id": 30487046, "comment_id": 49061296, "body": "Fair enough. Sorry. I just wanted to highlight that writing assembly is not an answer to the question and jumped the gun. I&#39;d remove my downvote, but it seems I&#39;m not allowed to unless you change your answer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1416, "user_id": 1614328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87513aca8db89da2687b1ca6de473c16?s=128&d=identicon&r=PG", "display_name": "Pat Morin", "link": "https://stackoverflow.com/users/1614328/pat-morin"}, "edited": false, "score": 0, "creation_date": 1432756444, "post_id": 30487046, "comment_id": 49061743, "body": "@PatMorin: Accepted. Just trying to help. (Its not for a downvote per se, but I just think it was not fair)."}, {"owner": {"reputation": 1416, "user_id": 1614328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87513aca8db89da2687b1ca6de473c16?s=128&d=identicon&r=PG", "display_name": "Pat Morin", "link": "https://stackoverflow.com/users/1614328/pat-morin"}, "edited": false, "score": 0, "creation_date": 1432760527, "post_id": 30487046, "comment_id": 49063851, "body": "Indeed, clang does what I want in this case (but does the opposite in another case that g++ handles well.)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1416, "user_id": 1614328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87513aca8db89da2687b1ca6de473c16?s=128&d=identicon&r=PG", "display_name": "Pat Morin", "link": "https://stackoverflow.com/users/1614328/pat-morin"}, "edited": false, "score": 0, "creation_date": 1432760686, "post_id": 30487046, "comment_id": 49063924, "body": "@PatMorin: I&#39;ve written myself enough compilers/interpreters already to assure you this is quiet a minefield. Even more for high-end CPUs (whereas ARM is still easier than x86 - RISC vs. CISC instruction set with tons of legacy stuff). If you needs some well-defined environment, you might have a look at much simpler architectures like Cortex-M. They migh have less variation, but I would not bet on that. If you really have to rely on the code, you might really have to ressemble to assembler. Possibly automatically generated (I can recommend Python very much use it myself for this)."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 5, "last_activity_date": 1432787826, "last_edit_date": 1432787826, "creation_date": 1432741017, "answer_id": 30487046, "question_id": 30486708, "link": "https://stackoverflow.com/questions/30486708/make-gcc-use-conditional-moves/30487046#30487046", "title": "Make gcc use conditional moves", "body": "<p>If you really rely on that level of optimization, you have to write your own assembler stubs.</p>\n\n<p>Reason is that even a modification elsewhere in the code might change the code the compiler (that is not gcc specific) emits. Also, a different version of gcc, different options (e.g. -fomit-frame-pointer) can change the code dramatically.</p>\n\n<p>You should really only do this if you have to. Other influences might have much more impact, like cache configuration, memory allocation (DRAM-page/bank), execution order compared with concurrently run programs, CPU association, and much more. Play with compiler optimizations first. Command line options you will find in the <a href=\"https://www.google.de/search?q=gcc+doc&amp;ie=UTF-8&amp;gws_rd=cr&amp;ei=yuNlVYm6JoKCzAPPp4OQCg\" rel=\"nofollow\">docs</a> (you did not post the version used, therefore not more specific).</p>\n\n<p>A (serious) alternative would be to use clang/llvm. Or just help the gcc team improve their optimizers. You would not be the first. Note also that gcc has made massive improvements specifically for ARM over the last versions.</p>\n"}, {"tags": [], "owner": {"reputation": 407, "user_id": 3068530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06fd798a26974bc99fa660592a104899?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/3068530/pierre"}, "is_accepted": false, "score": 5, "last_activity_date": 1437937603, "creation_date": 1437937603, "answer_id": 31640851, "question_id": 30486708, "link": "https://stackoverflow.com/questions/30486708/make-gcc-use-conditional-moves/31640851#31640851", "title": "Make gcc use conditional moves", "body": "<p>It looks like gcc might have troubles to generate branch-free code on variables used in loop conditions and post-conditions, together with the constraints of keeping temporary registers alive across a pseudo-function intrinsic call.</p>\n\n<p>There is something suspicious, the generated code from your function is different when using -funroll-all-loops and -fguess-branch-probability. I generates many return instructions. It smells like a little bug in gcc, around the rtl pass of the compiler, or simplifications of blocks of codes.</p>\n\n<p>The following code is branch-less in both cases. This would be a good reason to submit a bug to GCC. At level -O3, GCC should always generate the same code.</p>\n\n<pre><code>int foo( int *a,  int n,  int x) {\n     int c, i = 0, j = n;\n\n    while (i &lt; n) {\n#ifdef PREFETCH\n        __builtin_prefetch(a+16*i + 15);\n#endif /* PREFETCH */\n        c = (x &gt; a[i]);\n        j = c ? j : i;\n        i = 2*i + 1 + c;\n    }\n    return j;\n}\n</code></pre>\n\n<p>which generates this</p>\n\n<pre><code>        .cfi_startproc\n        testl   %esi, %esi\n        movl    %esi, %eax\n        jle     .L4\n        xorl    %ecx, %ecx\n        .p2align 4,,10\n        .p2align 3\n.L3:\n        movslq  %ecx, %r8\n        cmpl    %edx, (%rdi,%r8,4)\n        setl    %r8b\n        cmovge  %ecx, %eax\n        movzbl  %r8b, %r8d\n        leal    1(%r8,%rcx,2), %ecx\n        cmpl    %ecx, %esi\n        jg      .L3\n.L4:\n        rep ret\n        .cfi_endproc\n</code></pre>\n\n<p>and this</p>\n\n<pre><code>        .cfi_startproc\n        testl   %esi, %esi\n        movl    %esi, %eax\n        jle     .L5\n        xorl    %ecx, %ecx\n        .p2align 4,,10\n        .p2align 3\n.L4:\n        movl    %ecx, %r8d\n        sall    $4, %r8d\n        movslq  %r8d, %r8\n        prefetcht0      60(%rdi,%r8,4)\n        movslq  %ecx, %r8\n        cmpl    %edx, (%rdi,%r8,4)\n        setl    %r8b\n        testb   %r8b, %r8b\n        movzbl  %r8b, %r9d\n        cmove   %ecx, %eax\n        leal    1(%r9,%rcx,2), %ecx\n        cmpl    %ecx, %esi\n        jg      .L4\n.L5:\n        rep ret\n        .cfi_endproc\n</code></pre>\n"}], "owner": {"reputation": 1416, "user_id": 1614328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87513aca8db89da2687b1ca6de473c16?s=128&d=identicon&r=PG", "display_name": "Pat Morin", "link": "https://stackoverflow.com/users/1614328/pat-morin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2526, "favorite_count": 2, "answer_count": 2, "score": 10, "last_activity_date": 1437937603, "creation_date": 1432740179, "last_edit_date": 1432787539, "question_id": 30486708, "link": "https://stackoverflow.com/questions/30486708/make-gcc-use-conditional-moves", "title": "Make gcc use conditional moves", "body": "<p>Is there a gcc pragma or something I can use to force gcc to generate branch-free instructions on a specific section of code?</p>\n\n<p>I have a piece of code that I want gcc to compile to branch-free code using cmov instructions:</p>\n\n<pre><code>int foo(int *a, int n, int x) {\n    int i = 0, j = n;\n\n    while (i &lt; n) {\n#ifdef PREFETCH\n        __builtin_prefetch(a+16*i + 15);\n#endif /* PREFETCH */\n        j = (x &lt;= a[i]) ? i : j;\n        i = (x &lt;= a[i]) ? 2*i + 1 : 2*i + 2;\n    }\n    return j;\n}\n</code></pre>\n\n<p>and, indeed, it does so:</p>\n\n<pre><code>morin@soprano$ gcc -O4 -S -c test.c -o -    \n    .file   \"test.c\"\n    .text\n    .p2align 4,,15\n    .globl  foo\n    .type   foo, @function\nfoo:\n.LFB0:\n    .cfi_startproc\n    testl   %esi, %esi\n    movl    %esi, %eax\n    jle .L2\n    xorl    %r8d, %r8d\n    jmp .L3\n    .p2align 4,,10\n    .p2align 3\n.L6:\n    movl    %ecx, %r8d\n.L3:\n    movslq  %r8d, %rcx\n    movl    (%rdi,%rcx,4), %r9d\n    leal    (%r8,%r8), %ecx      # put 2*i in ecx\n    leal    1(%rcx), %r10d       # put 2*i+1 in r10d\n    addl    $2, %ecx             # put 2*i+2 in ecx\n    cmpl    %edx, %r9d\n    cmovge  %r10d, %ecx          # put 2*i+1 in ecx if appropriate\n    cmovge  %r8d, %eax           # set j = i if appropriate\n    cmpl    %esi, %ecx\n    jl  .L6\n.L2:\n    rep ret\n    .cfi_endproc\n.LFE0:\n    .size   foo, .-foo\n    .ident  \"GCC: (Ubuntu 4.8.2-19ubuntu1) 4.8.2\"\n    .section    .note.GNU-stack,\"\",@progbits\n</code></pre>\n\n<p>(Yes, I realize the loop is a branch, but I'm talking about the choice operators inside the loop.) </p>\n\n<p>Unfortunately, when I enable the <code>__builtin_prefetch</code> call, gcc generates branchy code:</p>\n\n<pre><code>morin@soprano$ gcc -DPREFETCH -O4 -S -c test.c -o -\n    .file   \"test.c\"\n    .text\n    .p2align 4,,15\n    .globl  foo\n    .type   foo, @function\nfoo:\n.LFB0:\n    .cfi_startproc\n    testl   %esi, %esi\n    movl    %esi, %eax\n    jle .L7\n    xorl    %ecx, %ecx\n    jmp .L5\n    .p2align 4,,10\n    .p2align 3\n.L3:\n    movl    %ecx, %eax           # this is the x &lt;= a[i] branch\n    leal    1(%rcx,%rcx), %ecx\n    cmpl    %esi, %ecx\n    jge .L11\n.L5:\n    movl    %ecx, %r8d           # this is the main branch\n    sall    $4, %r8d             # setup the prefetch\n    movslq  %r8d, %r8            # setup the prefetch\n    prefetcht0  60(%rdi,%r8,4)   # do the prefetch\n    movslq  %ecx, %r8\n    cmpl    %edx, (%rdi,%r8,4)   # compare x with a[i]\n    jge .L3\n    leal    2(%rcx,%rcx), %ecx   # this is the x &gt; a[i] branch\n    cmpl    %esi, %ecx\n    jl  .L5\n.L11:\n    rep ret\n.L7:\n    .p2align 4,,5\n    rep ret\n    .cfi_endproc\n.LFE0:\n    .size   foo, .-foo\n    .ident  \"GCC: (Ubuntu 4.8.2-19ubuntu1) 4.8.2\"\n    .section    .note.GNU-stack,\"\",@progbits\n</code></pre>\n\n<p>I've tried using <code>__attribute__((optimize(\"if-conversion2\")))</code> on this function, but that has no effect.</p>\n\n<p>The reason I care so much is that I haved hand-edited compiler-generated branch-free code (from the first example) to include the prefetcht0 instructions and it runs considerably faster than both of the versions gcc produces.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 3, "creation_date": 1432740426, "post_id": 30486692, "comment_id": 49052072, "body": "Please post a <i>complete</i> minimal example."}, {"owner": {"reputation": 704, "user_id": 2012895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc39548d59c8c0ca58108ac8f3b143ce?s=128&d=identicon&r=PG", "display_name": "allen1", "link": "https://stackoverflow.com/users/2012895/allen1"}, "edited": false, "score": 0, "creation_date": 1432740597, "post_id": 30486692, "comment_id": 49052199, "body": "Karoly is right: we need to compile this one and look at what is going on."}, {"owner": {"reputation": 4455, "user_id": 1313967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/msDex.jpg?s=128&g=1", "display_name": "dave234", "link": "https://stackoverflow.com/users/1313967/dave234"}, "edited": false, "score": 0, "creation_date": 1432740699, "post_id": 30486692, "comment_id": 49052286, "body": "To access your strict member via&quot; -&gt;&quot; in the function which is given a LinList_p*, you would do have to dereference the pointer first like this *pointer-&gt;variable."}, {"owner": {"reputation": 1232, "user_id": 4847772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd5efa4bdec75631678b36842fea7c5a?s=128&d=identicon&r=PG&f=1", "display_name": "PJTraill", "link": "https://stackoverflow.com/users/4847772/pjtraill"}, "edited": false, "score": 0, "creation_date": 1432740704, "post_id": 30486692, "comment_id": 49052292, "body": "There ought to be a difference, as one should have the address of a struct (which you could modify), while the other has the address of a pointer, so that you can not only access the struct, but also change the pointer to point somewhere else. Perhaps you passed both of them a pointer to a struct, and didn\u2019t let your compiler report it as an error. Could you post a complete minimal example compiled with strict checks?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1432740738, "post_id": 30486692, "comment_id": 49052317, "body": "Use <code>%p</code> to print out pointer values - <code>printf( &quot;Address: %p\\n&quot;, (void *) pointer);</code> .  This is one of the few times you need to explicitly cast to <code>void *</code>."}, {"owner": {"reputation": 3379, "user_id": 4787510, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0p1SM.jpg?s=128&g=1", "display_name": "Sossenbinder", "link": "https://stackoverflow.com/users/4787510/sossenbinder"}, "edited": false, "score": 0, "creation_date": 1432741148, "post_id": 30486692, "comment_id": 49052611, "body": "Alright, I think I got everything important in there now."}], "answers": [{"tags": [], "owner": {"reputation": 4403, "user_id": 2201050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54a421b64c0fa2a710f5275f42133d7?s=128&d=identicon&r=PG", "display_name": "folkol", "link": "https://stackoverflow.com/users/2201050/folkol"}, "is_accepted": false, "score": 0, "last_activity_date": 1432740816, "creation_date": 1432740816, "answer_id": 30486963, "question_id": 30486692, "link": "https://stackoverflow.com/questions/30486692/why-is-there-no-difference-in-these-2-pointer-adresses/30486963#30486963", "title": "Why is there no difference in these 2 pointer adresses?", "body": "<p>A pointer to a struct has got the same value as a pointer to its first member (ISO/IEC 9899:2011, \u00a76.7.2.1.13).</p>\n\n<p>Just because some <code>char*</code> happens to have the same value as a <code>struct lin_list*</code> doesn't mean that you can treat it, for all intent and purposes, as a <code>struct lin_list*</code>-pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 22053, "user_id": 19404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/180eea9fb31f162096da95e7a8c744cf?s=128&d=identicon&r=PG", "display_name": "Gerald", "link": "https://stackoverflow.com/users/19404/gerald"}, "is_accepted": false, "score": 0, "last_activity_date": 1432741309, "last_edit_date": 1432741309, "creation_date": 1432740841, "answer_id": 30486971, "question_id": 30486692, "link": "https://stackoverflow.com/questions/30486692/why-is-there-no-difference-in-these-2-pointer-adresses/30486971#30486971", "title": "Why is there no difference in these 2 pointer adresses?", "body": "<p>The reason you can't access pointer->variable on the <code>LinList_p*</code> is because the compiler treats <code>LinList_p*</code> as a pointer-to-a-pointer, regardless of what address is actually being passed in.</p>\n\n<p>It look like you are passing a <code>LinList_p</code> to <code>LinListExtractFirst</code>, which expects a <code>LinList_p*</code>. This is not going to work. You either have to change the signature of <code>LinListExtractFirst</code> to take a <code>LinList_p</code> or pass in the address of <code>linlistpointer</code>:</p>\n\n<p><code>linlistpointer = LinListExtractFirst(&amp;linlistpointer);</code></p>\n\n<p>depending on what it is you want it to do.</p>\n\n<p>Also, <code>linlistpointer</code> is never initialized in your example.</p>\n"}, {"tags": [], "owner": {"reputation": 8571, "user_id": 1307166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc3a10ed3ebf00cf0f9dc70a014a703e?s=128&d=identicon&r=PG", "display_name": "b4hand", "link": "https://stackoverflow.com/users/1307166/b4hand"}, "is_accepted": false, "score": 1, "last_activity_date": 1432741088, "creation_date": 1432741088, "answer_id": 30487069, "question_id": 30486692, "link": "https://stackoverflow.com/questions/30486692/why-is-there-no-difference-in-these-2-pointer-adresses/30487069#30487069", "title": "Why is there no difference in these 2 pointer adresses?", "body": "<p><code>linlistpointer</code> is an uninitialized pointer. It's value is undefined and relying on its value is undefined behavior. Everything after that doesn't matter as your program can do just about anything and that be considered fine from the compiler's perspective.</p>\n"}, {"tags": [], "owner": {"reputation": 1769, "user_id": 2708608, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/zPQK0.png?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2708608/amit-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1432747431, "creation_date": 1432747431, "answer_id": 30489245, "question_id": 30486692, "link": "https://stackoverflow.com/questions/30486692/why-is-there-no-difference-in-these-2-pointer-adresses/30489245#30489245", "title": "Why is there no difference in these 2 pointer adresses?", "body": "<p>Your code is not correct. As it will give you segmentation fault.\nYour question's language is ambiguous. But want to know why these two prints in following function. you are printing the both <code>anchor</code> values after modification. </p>\n\n<p>If I got your question correctly, <code>printf(\"\\nNew first Element: %X\\n\\n\",anchor);</code> should come before modifying the anchor ?</p>\n\n<pre><code>LinList_p LinListInsertFirst(LinList_p *anchor, LinList_p newcell){\n    newcell-&gt;next=anchor;\n    anchor = newcell;\n\n    printf(\"\\nNew first Element: %X\\n\\n\",anchor);\n\n    printf(\"\\nAnchor: %X\\n\\n\",anchor);\n    return anchor;  \n}\n</code></pre>\n"}], "owner": {"reputation": 3379, "user_id": 4787510, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0p1SM.jpg?s=128&g=1", "display_name": "Sossenbinder", "link": "https://stackoverflow.com/users/4787510/sossenbinder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1432747431, "creation_date": 1432740121, "last_edit_date": 1432741123, "question_id": 30486692, "link": "https://stackoverflow.com/questions/30486692/why-is-there-no-difference-in-these-2-pointer-adresses", "title": "Why is there no difference in these 2 pointer adresses?", "body": "<p>I have this struct:</p>\n\n<pre><code>typedef struct lin_list{\n    char* payload;\n    struct lin_list* next;\n}LinListCell, *LinList_p;\n</code></pre>\n\n<p>and this is my main, containing the needed information to show you my problem:</p>\n\n<pre><code>int main(void){\n    LinList_p linlistpointer;\n\n    char payLoad[80+1];\n    strcpy(payLoad,\"Test\");\n\n    printf(\"%X\\n\\n\",linlistpointer);\n\n    linlistpointer = LinListInsertFirst(linlistpointer,LinListAllocCell(payLoad));\n    linlistpointer = LinListInsertFirst(linlistpointer,LinListAllocCell(payLoad));\n    linlistpointer = LinListInsertFirst(linlistpointer,LinListAllocCell(payLoad));\n    listLists(linlistpointer);\n    linlistpointer = LinListExtractFirst(linlistpointer);\n}\n</code></pre>\n\n<p>These are the functions from my main.</p>\n\n<pre><code>LinList_p LinListInsertFirst(LinList_p *anchor, LinList_p newcell){\n    newcell-&gt;next=anchor;\n    anchor = newcell;\n\n    printf(\"\\nNew first Element: %X\\n\\n\",anchor);\n\n    printf(\"\\nAnchor: %X\\n\\n\",anchor);\n    return anchor;  \n}\n\nLinList_p LinListAllocCell(char* payload){\n    LinList_p listpointer;\n    listpointer = malloc(sizeof(LinListCell));\n    listpointer-&gt;payload = strdup(payload);\n    listpointer-&gt;next = NULL;\n\n    printf(\"New Cell:\\nAdress: %X\\nPayload: %s\\n\",listpointer, listpointer-&gt;payload);\n    return listpointer;\n}\n\nvoid listLists(LinList_p pointer){\n\n    int counter=1;\n    LinList_p thispointer = pointer;\n\n    printf(\"Listlistspointer: %X\",pointer);\n    printf(\"\\n\\n----------------\");\n    while(thispointer){\n        printf(\"\\nNow: #%d\\n\",counter);\n        printf(\"Adresse: %X\\n\",thispointer);\n        printf(\"Next: %X\\n\",thispointer-&gt;next);\n        printf(\"Payload: %s\\n\",thispointer-&gt;payload);\n        printf(\"----------------\");\n        thispointer=thispointer-&gt;next;\n        counter++;\n    }\n    printf(\"\\n\\n\");\n}\n\nLinList_p LinListExtractFirst(LinList_p *anchor){\n\n    printf(\"%X\",anchor);\n\n    return NULL;\n\n}\n</code></pre>\n\n<p>Note that the LinListExtractFirst is not finished so far, actually I just wanted to check if my pointer was valid and got stuck there, ending up here.</p>\n\n<p>As you can see, one is given a LinList_p* and the other a simple LinList_p.</p>\n\n<p>However, when I try to print out both values via</p>\n\n<pre><code>printf(\"\\nAdress: %X\\n\\n\",pointer);\n</code></pre>\n\n<p>in both functions, I get the exact same value in both, which is exactly the same adress as I got in my main function.</p>\n\n<p>Can anyone explain this to me? Both seem to be the same, however I cannot access a struct variable via</p>\n\n<pre><code>pointer-&gt;variable;\n</code></pre>\n\n<p>in the function which is given a LinList_p*, so there has to be a difference.</p>\n\n<p>I am confused right now...</p>\n"}, {"tags": ["c#", "c", "com"], "answers": [{"comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1432741207, "post_id": 30486918, "comment_id": 49052653, "body": "This declaration corrupts the GC heap.  The <i>lpBuffer</i> argument must be a byte[] or a StringBuilder with a Capacity set to <i>wBufferSize</i>.  [MarshalAs] is unnecessary."}, {"owner": {"reputation": 10328, "user_id": 4798077, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A03gw.jpg?s=128&g=1", "display_name": "Ron Beyer", "link": "https://stackoverflow.com/users/4798077/ron-beyer"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1432741290, "post_id": 30486918, "comment_id": 49052705, "body": "@HansPassant, are you saying its unncessary, or wouldn&#39;t work as is? I&#39;ll update or delete the answer depending on which it is..."}, {"owner": {"reputation": 143, "user_id": 3713722, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/bf3ebf4535b0beb9364907bf5bbfeb7c?s=128&d=identicon&r=PG&f=1", "display_name": "anand", "link": "https://stackoverflow.com/users/3713722/anand"}, "edited": false, "score": 0, "creation_date": 1432741598, "post_id": 30486918, "comment_id": 49052926, "body": "if I use byte[], getting error:Additional information: Attempted to read or write protected memory. This is often an indication that other memory is corrupt."}, {"owner": {"reputation": 10328, "user_id": 4798077, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A03gw.jpg?s=128&g=1", "display_name": "Ron Beyer", "link": "https://stackoverflow.com/users/4798077/ron-beyer"}, "reply_to_user": {"reputation": 143, "user_id": 3713722, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/bf3ebf4535b0beb9364907bf5bbfeb7c?s=128&d=identicon&r=PG&f=1", "display_name": "anand", "link": "https://stackoverflow.com/users/3713722/anand"}, "edited": false, "score": 0, "creation_date": 1432741884, "post_id": 30486918, "comment_id": 49053128, "body": "@anand I&#39;ve updated the answer based on what Hans said."}], "tags": [], "owner": {"reputation": 10328, "user_id": 4798077, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A03gw.jpg?s=128&g=1", "display_name": "Ron Beyer", "link": "https://stackoverflow.com/users/4798077/ron-beyer"}, "is_accepted": true, "score": 1, "last_activity_date": 1432741861, "last_edit_date": 1432741861, "creation_date": 1432740702, "answer_id": 30486918, "question_id": 30486686, "link": "https://stackoverflow.com/questions/30486686/what-is-the-equivalent-c-type-for-char-point-in-c/30486918#30486918", "title": "What is the equivalent c# type for char point in C", "body": "<p>I think you are close, you just need to tell the marshalling system what kind of string to marshal it as:\n<strike>\n    [DllImport(\"Sn62.dll\", CallingConvention = CallingConvention.Cdecl)]\n    public static extern int GetLicenseNo([MarshalAs(UnmanagedType.LPStr)]string lpszLicenseKey,\n                                          [MarshalAs(UnmanagedType.LPStr)]string lpszEncryptionKey,\n                                          [MarshalAs(UnmanagedType.LPStr)]string lpBuffer,\n                                          ushort wBufferSize);</p>\n\n<p>That way it knows exactly how to transform the data.\n</strike></p>\n\n<p>Edit: You may also need to specify the calling convention to match the type of export that you are using, see the <code>CallingConvention</code> in the <code>DllImport</code> attribute.</p>\n\n<p>Based on what Hans Passant says, this is probably more correct:</p>\n\n<pre><code>[DllImport(\"Sn62.dll\", CallingConvention = CallingConvention.Cdecl)]\npublic static extern int GetLicenseNo(StringBuilder lpszLicenseKey,\n                                      StringBuilder lpszEncryptionKey,\n                                      StringBuilder lpBuffer,\n                                      ushort wBufferSize);\n</code></pre>\n\n<p>Which you would call with:</p>\n\n<pre><code>ushort wBufferSize = 250;   //Set to the size you need\nStringBuilder licKey = new StringBuilder(wBufferSize);\nStringBuilder encKey = new StringBuilder(wBufferSize);\nStringBuilder buffer = new StringBuilder(wBufferSize);\n\n//Intialize values here...\n\nGetLicenseNo(licKey, encKey, buffer, wBufferSize);\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 3713722, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/bf3ebf4535b0beb9364907bf5bbfeb7c?s=128&d=identicon&r=PG&f=1", "display_name": "anand", "link": "https://stackoverflow.com/users/3713722/anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 30486918, "answer_count": 1, "score": 0, "last_activity_date": 1432741861, "creation_date": 1432740108, "last_edit_date": 1432740299, "question_id": 30486686, "link": "https://stackoverflow.com/questions/30486686/what-is-the-equivalent-c-type-for-char-point-in-c", "title": "What is the equivalent c# type for char point in C", "body": "<p>What is the equivalent C# parameter type to be used for below C com function?</p>\n\n<p>For the signature below I'm getting the error:</p>\n\n<blockquote>\n  <p>This is likely because the managed PInvoke signature does not match the unmanaged target signature. Check that the calling convention and parameters of the PInvoke signature match the target unmanaged signature.</p>\n</blockquote>\n\n<p>C#</p>\n\n<pre><code>[DllImport(\"Sn62.dll\")]\npublic static extern int GetLicenseNo(string lpszLicenseKey, \n                                      string lpszEncryptionKey, \n                                      string lpBuffer, \n                                      ushort wBufferSize);\n</code></pre>\n\n<p>C code</p>\n\n<pre><code>#define _SAL2_Source_(Name, args, annotes) _SA_annotes3(SAL_name, #Name, \"\", \"2\") _Group_(annotes _SAL_nop_impl_)\n\n#define _Null_terminated_                 _SAL2_Source_(_Null_terminated_, (), _Null_terminated_impl_)\n\ntypedef int                 BOOL;\ntypedef _Null_terminated_ CHAR *LPSTR;\ntypedef unsigned short      WORD;\n\n\n\n__declspec(dllexport)   BOOL  SN_GetLicenseNo(LPSTR lpszLicenseKey,LPSTR lpszEncryptionKey,LPSTR lpBuffer,WORD wBufferSize);\n\n\nBOOL  GetLicenseNo(LPSTR lpszLicenseKey, LPSTR lpszEncryptionKey, LPSTR lpszBuffer, WORD wBufferSize)\n{\n    struct t_license *lp;\n    BOOL bRet;\n\n    if (wBufferSize&lt;SIZE_LICENSENO + 1)\n        return(FALSE);\n\n\n    ClearText(lpszLicenseKey, lpszEncryptionKey);\n    lp = (struct t_license *)DecodeBuffer;\n    bRet = TRUE;\n\n    CopyString(lpszBuffer, lp-&gt;LicenseNo, SIZE_LICENSENO); //lpszBuffer is used to return value.\n\n    return(bRet);\n}\n</code></pre>\n"}, {"tags": ["c", "search"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1432739728, "post_id": 30486362, "comment_id": 49051527, "body": "Without seeing your code we can only guess. Maybe the words you don&#39;t find are on the border between two &quot;pieces&quot; you read, E.g: you search for &quot;ABC&quot;, piece 1 : &quot;123AB&quot;, piece 2: &quot;CDEXYZ&quot;"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1432739988, "post_id": 30486362, "comment_id": 49051732, "body": "try on smaller input. Find the smallest input for which your program output differ from vim. Debug/try to figure out what messes up your algorithm. Fix it. Be happy."}, {"owner": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1432740036, "post_id": 30486362, "comment_id": 49051770, "body": "@MichaelWalz  I would. wait a minute please"}, {"owner": {"reputation": 3331, "user_id": 2581593, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NtHku.jpg?s=128&g=1", "display_name": "zubergu", "link": "https://stackoverflow.com/users/2581593/zubergu"}, "edited": false, "score": 1, "creation_date": 1432740212, "post_id": 30486362, "comment_id": 49051922, "body": "look where your test txt file is being split. That&#39;s the hot spot I&#39;d look for those missing 30 occurences. Add information how you split your file, this might be helpful. Generate a file consisting only of word you want to look. One being split, one that doesn&#39;t, if the output of latter is wrong-&gt; here&#39;s your answer."}, {"owner": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1432742091, "post_id": 30486362, "comment_id": 49053284, "body": "@MichaelWalz@zubergu@bolov I have put on my code. please check"}, {"owner": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "edited": false, "score": 0, "creation_date": 1432742723, "post_id": 30486362, "comment_id": 49053713, "body": "Well I have add my code. Hopefully it can be reopened."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1432743695, "post_id": 30486362, "comment_id": 49054332, "body": "That&#39;s an extraordinary piece of code. You split a file into 50-byte pieces and are checking for the existence of the hard-coded word <code>&quot;make&quot;</code> in upper or lower case letter by letter, and trying to bridge block boundaries. It&#39;s a hiding to nowhere. If your input file of 20Mbytes is &quot;too big to read&quot; (on my system I have over 2Gbytes available), why don&#39;t you just read it char by char and maintain a current buffer of 4 bytes, the length of <code>&quot;make&quot;</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1432745607, "post_id": 30486362, "comment_id": 49055519, "body": "Apart from the framework and opening / closing the file, it can be done in 10 lines of code.         <code>char buff[4];         int count = 0;         if (4 == fread(buff, 1, 4, fs)) {             do {                 if (strnicmp(buff, &quot;make&quot;, 4) == 0)                     count++;                 memmove(buff, buff+1, 3);             } while (1 == fread(buff+3, 1, 1, fs));         }         printf(&quot;%d\\n&quot;, count);</code>"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432747596, "post_id": 30486362, "comment_id": 49056740, "body": ".. @WeatherVane:  that is even better, it&#39;s just <i>one</i> line of code!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1432750744, "post_id": 30486362, "comment_id": 49058457, "body": "@Jongware ended up with an answer of 21 lines."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1432751259, "post_id": 30486362, "comment_id": 49058775, "body": "Text editors typically store the entire file in memory, and have no need to deal with strings crossing any kind of buffer boundaries. Tools like <code>grep</code> process files a line at a time, and either limit the length of a line or (like GNU grep) allocate as much space as is needed for each line; a word like <code>&quot;make&quot;</code> cannot cross a line boundary."}, {"owner": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1432936232, "post_id": 30486362, "comment_id": 49152534, "body": "@KeithThompson wouldn&#39;t it consume up the memory if it store the entire file in it? I mean, even though it do not consume up the memory, it will also take up too many place in the memory, thus slow down other process  in the same computer. Isn&#39;t there a &quot;buffer&quot; or something that text editor use to handle this problem?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1432938834, "post_id": 30486362, "comment_id": 49153488, "body": "@walkerlala: Most text files I edit are much smaller than the memory my system has. Loading the entire file into memory makes operations on it <i>much</i> faster. If you try to edit a file that won&#39;t fit in memory, some editors might swap parts of it to disk. Or, more likely, they might just slurp the whole file into memory anyway, and count on the OS&#39;s virtual memory system to do the right thing. See also <code>mmap</code>."}, {"owner": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1432949722, "post_id": 30486362, "comment_id": 49155819, "body": "@KeithThompson \t I have modified my code a little bit (moving the declaration of those bool values out of the for loop to make things more clear). It does give me a right number of pieces totally. But I can&#39;t get the exact number (2035) as Weather Vane&#39;s program have does (it give me 1933, far away from the right answer). Could you help me find out the bugs in my code? I try to debug it but fail. I thinks that it might be some buffer issues..."}], "answers": [{"comments": [{"owner": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "edited": false, "score": 0, "creation_date": 1432915253, "post_id": 30490110, "comment_id": 49141785, "body": "That is so cool !!! especially when you shift the buffer one byte by one byte using <code>do{...} while(1==(fread(buff+3,1,1,fs))</code>....However, I wonder wheter it will slow down the speed to load data indirectly from a file(stream) rather than memeory? Originally, the reason why I split the text and load it into an array of 51 bytes was that I think it would me faster for the CPU to load data from memory than from a file (stream)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "edited": false, "score": 0, "creation_date": 1432922569, "post_id": 30490110, "comment_id": 49146000, "body": "Although your question title referred to <b>text editor</b>, my answer was directed at the detail of the question, as you search a file for a string. Nothing really to do with a text editor but @KeithThompson wrote a good remark &quot;Text editors typically store the entire file in memory&quot;. Note too, that a text search in an editor won&#39;t look for a word that crosses a line break."}, {"owner": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "edited": false, "score": 0, "creation_date": 1432936342, "post_id": 30490110, "comment_id": 49152577, "body": "wouldn&#39;t it consume up (or use too much) the memory if it a text editor store the entire file in the memory? ....ps,I was doing a little project which is related to a text editor. But I think it&#39;s good to change the title."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "edited": false, "score": 0, "creation_date": 1432941032, "post_id": 30490110, "comment_id": 49154097, "body": "@walkerlala the memory is there for <i>you</i> to use, not somebody else. My system has 2GB free at the moment. That could hold 100 of the 20Mb files you mention in an editor&#39;s tabs."}, {"owner": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "edited": false, "score": 0, "creation_date": 1432941362, "post_id": 30490110, "comment_id": 49154158, "body": "Another thing that I am confused about is, when don&#39;t you flush the stream after using <code>fread()</code>? I don&#39;t get when the stream will be flushed in your code, can you tell me?"}, {"owner": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "edited": false, "score": 0, "creation_date": 1432948632, "post_id": 30490110, "comment_id": 49155608, "body": "I have modified my code a little bit (moving the declaration of those <code>bool</code> values out of the for loop to make things more clear). It does give me a right number of piece totally. But I can&#39;t get the exact number (<code>2035</code>) as your program have does (it give me <code>1933</code>, far away from the right answer). Could you help me find out the bug in my code?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "edited": false, "score": 0, "creation_date": 1433018904, "post_id": 30490110, "comment_id": 49174385, "body": "@walkerlala presumably your <code>flag2</code> etc are still <code>0</code> since you didn&#39;t increment them in your boundary test. Your boolean tests should be setting <code>flag2+=1</code> (etc), but instead you conditionally set <code>endOfPiece1</code> (etc). Also you are not checking the array properly. The first byte of the array is <code>arr[0]</code>, not <code>arr[1]</code> (etc)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "edited": false, "score": 0, "creation_date": 1433019090, "post_id": 30490110, "comment_id": 49174447, "body": "@walkerlala you don&#39;t flush an input stream, and why would I anyway? Open file, read until no more data, close file - end of."}, {"owner": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "edited": false, "score": 0, "creation_date": 1433149117, "post_id": 30490110, "comment_id": 49209120, "body": "May I ask you a question? It seems like that you are a skilled programmer. So, normally, are you used to flushing the stream when you want the input or output? Or is it a good habit to flush a stream any time you want some input or output? If not, then when is it necessary or goog for a programmer to flush a stream manually? If you may, please give me some personal advice. Thank you."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "edited": false, "score": 0, "creation_date": 1433174513, "post_id": 30490110, "comment_id": 49226260, "body": "@walkerlala flushing streams: I only flush an output stream by using a <code>newline</code> (ie <code>\\n</code>) for a text file, or by closing the file, or with <code>fflush</code> if really needed. I sometimes flush an input stream when I want to clean off any buffered input. Two examples 1) using <code>scanf</code> to input a char when I have just input a value ending in a <code>newline</code>, which remains in the buffer. 2) when I want to confirm an action like &quot;Do you really want to destroy the world?&quot; I will clear off any type-ahead in the input buffer. As for my skill, thank you but I only know what I know."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 5, "last_activity_date": 1432750355, "creation_date": 1432750355, "answer_id": 30490110, "question_id": 30486362, "link": "https://stackoverflow.com/questions/30486362/searching-a-particular-string-in-a-large-file/30490110#30490110", "title": "Searching a particular string in a large file", "body": "<p>You can do this quite simply just by having a rolling buffer. You don't need to break the file into sections.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\n\n    char buff [4];                                  // word buffer\n    int count = 0;                                  // occurrences\n    FILE* fs=fopen(\"test.txt\",\"r\");                 // open the file\n    if (fs != NULL) {                               // if the file opened\n        if (4 == fread(buff, 1, 4, fs)) {           // fill the buffer\n            do {                                    // if it worked\n                if (strnicmp(buff, \"make\", 4) == 0) // check for target word\n                    count++;                        // tally\n                memmove(buff, buff+1, 3);           // shift the buffer down\n            } while (1 == fread(buff+3, 1, 1, fs)); // fill the last position\n        }                                           // end of file\n        fclose(fs);                                 // close the file\n    }\n    printf(\"%d\\n\", count);                          // report the result\n    return 0;\n}\n</code></pre>\n\n<p>For simplicity I stopped short of making the search word \"softer\" and allocating the correct buffer and various sizes, since that wasn't in the question. And I have to leave something for OP to do.</p>\n"}], "owner": {"reputation": 1242, "user_id": 4845608, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/8k6sK.png?s=128&g=1", "display_name": "walkerlala", "link": "https://stackoverflow.com/users/4845608/walkerlala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1305, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432948387, "creation_date": 1432739235, "last_edit_date": 1432948387, "question_id": 30486362, "link": "https://stackoverflow.com/questions/30486362/searching-a-particular-string-in-a-large-file", "title": "Searching a particular string in a large file", "body": "<p>I am making program in C which can search for a specific string in a large <strong>.txt</strong> file and <strong>count it and then print it out</strong>. But it seems that something have go wrong, cause the output of my program is different from that of the two text editor. According to the text editor, there are totally 3000 words,in this case I search for the word \"make\", in that <strong>.txt</strong> file. But the output of my program is just 2970.</p>\n\n<p>I cannot find out the problem of my program. So I am curios about how could a text editor search for a specific string so accurately? How do people implement that? Can any people show me some code in C?</p>\n\n<p>To make things clear: that is a large <strong>.txt</strong> file, 20M or so, containing lots of characters. So I think it's not so good to read it into memory all at once. I have implement my program by splitting my program in to pieces and then scan all of those for parsing. However, it fail some way.</p>\n\n<p>Maybe I should put the code here. Wait a minute please.</p>\n\n<p>The code is kinda long, 70 lines or so. I have put it on my github, if you have any interest, please help. <a href=\"https://github.com/walkerlala/searchText\" rel=\"nofollow\">https://github.com/walkerlala/searchText</a>\nnote that the only related file is <strong>wordCount.c</strong> and <strong>testfile.txt</strong> which goes like:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;stdbool.h&gt;\nchar arr[51];\nint flag=0;\nint flag2=0;\nint flag3=0;\nint flag4=0;\nint pieceCount(FILE*);\nint main()\n{\n     //the file in which I want to search the word is testfile.txt\n    //I have formatted the file so that it contain no newlins any more\n    FILE* fs=fopen(\"testfile.txt\",\"r\");\n    int n=pieceCount(fs);\n    printf(\"%d\\n\",n);           \n\n\n\n    rewind(fs);         //refresh the file...\n\n    static bool endOfPiece1=false,endOfPiece2=false,endOfPiece3=false;\n    bool begOfPiece1,begOfPiece2,begOfPiece3;\n\n    for(int start=0;start&lt;n;++start){\n            fgets(arr,sizeof(arr),fs);\n            for(int i=0;i&lt;=46;++i){\n                if((arr[i]=='M'||arr[i]=='m')&amp;&amp;(arr[i+1]=='A'||arr[i+1]=='a')&amp;&amp;(arr[i+2]=='K'||arr[i+2]=='k')&amp;&amp;(arr[i+3]=='E'||arr[i+3]=='e')){\n                    flag+=1;\n                    //continue;\n                }\n        }\n\n\n    //check the border\n        begOfPiece1=((arr[1]=='e'||arr[1]=='E'));\n        if(begOfPiece1==true&amp;&amp;endOfPiece1==true)\n            flag2+=1;\n        endOfPiece1=((arr[47]=='m'||arr[47]=='M')&amp;&amp;(arr[48]=='a'||arr[48]=='A')&amp;&amp;(arr[49]=='k'||arr[49]=='K'));\n\n        begOfPiece2=((arr[1]=='k'||arr[1]=='K')&amp;&amp;(arr[2]=='e'||arr[2]=='E'));\n        if(begOfPiece2==true&amp;&amp;endOfPiece2==true)\n            flag3+=1;\n        endOfPiece2=((arr[48]=='m'||arr[48]=='M')&amp;&amp;(arr[49]=='a'||arr[49]=='A'));\n\n        begOfPiece3=((arr[1]=='a'||arr[1]=='A')&amp;&amp;(arr[2]=='k'||arr[2]=='K')&amp;&amp;(arr[3]=='e'||arr[3]=='E'));\n        if(begOfPiece3==true&amp;&amp;endOfPiece3==true)\n            flag4+=1;\n        endOfPiece3=(arr[49]=='m'||arr[49]=='M');\n\n} \n  printf(\"%d\\n%d\\n%d\\n%d\\n\",flag,flag2,flag3,flag4);\n    getchar();\n    return 0;\n}\n\n//the function counts how many pieces have I split the file into\nint pieceCount(FILE* file){\n    static int count=0;\n    char arr2[51]={'\\0'};\n  while(fgets(arr2,sizeof(arr),file)){\n        count+=1;\n        continue;\n    }\n\n    return count;\n}\n</code></pre>\n"}, {"tags": ["c", "random", "passwords"], "comments": [{"owner": {"reputation": 5614, "user_id": 4923889, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d19da124fb19e7dba8c5db752a17ec06?s=128&d=identicon&r=PG", "display_name": "Uma Kanth", "link": "https://stackoverflow.com/users/4923889/uma-kanth"}, "edited": false, "score": 0, "creation_date": 1432739396, "post_id": 30486336, "comment_id": 49051256, "body": "<code>srand(time(NULL)); int r = rand(); randChar[r%68]</code> try this"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1432739502, "post_id": 30486336, "comment_id": 49051352, "body": "Cannot reproduce. This program <i>does</i> create passwords that consist of the same character all over, but not the same one every run."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1432740134, "post_id": 30486336, "comment_id": 49051860, "body": "@EOF I didn&#39;t understand your comment, you are completely and absolutely right!"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1432740148, "post_id": 30486336, "comment_id": 49051872, "body": "@EOF I just ran the program and got exactly the same result as the questioner, and I mean <b>exactly</b> i.e. I got <code>pkDHTxm</code>"}, {"owner": {"reputation": 13, "user_id": 4945297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa513c5e4675542263a60f5e9fa3472?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Calmes", "link": "https://stackoverflow.com/users/4945297/christopher-calmes"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432740305, "post_id": 30486336, "comment_id": 49051992, "body": "I took out the extra  <code>srand(time(NULL))</code>, but still comes out with the same exact string. Happens in ideone as well. @iharob"}, {"owner": {"reputation": 13, "user_id": 4945297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa513c5e4675542263a60f5e9fa3472?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Calmes", "link": "https://stackoverflow.com/users/4945297/christopher-calmes"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1432740354, "post_id": 30486336, "comment_id": 49052021, "body": "@EOF macos x snow leopard, gcc compiler"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432740402, "post_id": 30486336, "comment_id": 49052065, "body": "How are you executing the program?"}, {"owner": {"reputation": 13, "user_id": 4945297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa513c5e4675542263a60f5e9fa3472?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Calmes", "link": "https://stackoverflow.com/users/4945297/christopher-calmes"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432740434, "post_id": 30486336, "comment_id": 49052078, "body": "./a.out, then input length @iharob"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1432740603, "post_id": 30486336, "comment_id": 49052207, "body": "@user3121023 absolutely, I never noticed that the OP used <code>random()</code> because of the very weird line <code>&quot;ABCD...&quot;[index]</code> which bothers me a lot."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1432740674, "post_id": 30486336, "comment_id": 49052266, "body": "@EOF see my answer for the real problem"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1432741040, "post_id": 30486336, "comment_id": 49052540, "body": "@EOF I literally did a copy-paste of the code into vi and compiled it with clang (OS X) with no special flags and I got the exact same password as Christopher every time.  Because the problem is that the random number generator he was using was not seeded at all."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1432741234, "post_id": 30486336, "comment_id": 49052671, "body": "@EOF It occurs to me that a C library might make <code>srand</code> and <code>srandom</code> aliases as well as <code>rand</code> and <code>random</code>.  If that were the case, you would see the behaviour you were getting."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1432741342, "post_id": 30486336, "comment_id": 49052747, "body": "@JeremyP: Yes, that&#39;s exactly what happens on Linux, <code>man srand: [...]The versions of rand() and srand() in the Linux C Library use the  same random number generator as random(3) and srandom(3)[...]</code>, and importantly, according to my tests, on ideone, contrary to what the OP stated in a comment..."}, {"owner": {"reputation": 13, "user_id": 4945297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa513c5e4675542263a60f5e9fa3472?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Calmes", "link": "https://stackoverflow.com/users/4945297/christopher-calmes"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1432741444, "post_id": 30486336, "comment_id": 49052803, "body": "@EOF Yes!! Just a stupid mistake. Worked on ideone, not on gcc. :-)"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1432741633, "post_id": 30486336, "comment_id": 49052957, "body": "@ChristopherCalmes It&#39;s not the compiler, it is the C library.  The functions are not aliased on OS X which is why you got the same password on OS X."}], "answers": [{"tags": [], "owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "is_accepted": false, "score": 0, "last_activity_date": 1432739335, "creation_date": 1432739335, "answer_id": 30486400, "question_id": 30486336, "link": "https://stackoverflow.com/questions/30486336/random-password-generator-same-string/30486400#30486400", "title": "Random password generator same string", "body": "<p>Your loop takes less than a second to run.  </p>\n\n<p>Therefore, <code>time(NULL)</code> always returns the same value, so your random numbers all have the same seed.</p>\n\n<p>Don't do that.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1432739691, "last_edit_date": 1432739691, "creation_date": 1432739534, "answer_id": 30486468, "question_id": 30486336, "link": "https://stackoverflow.com/questions/30486336/random-password-generator-same-string/30486468#30486468", "title": "Random password generator same string", "body": "<p>The standard:</p>\n\n<blockquote>\n  <p>The <code>srand</code> function uses the argument as a seed for a new sequence of\n  pseudo-random numbers to be returned by subsequent calls to <code>rand</code>. If\n  <code>srand</code> is then called with the same seed value, the sequence of\n  pseudo-random numbers shall be repeated.</p>\n</blockquote>\n\n<p>It is very likely that the <code>time_t</code> on your system is based on seconds or something like that. But the execution time between <code>srand()</code> calls is far far less than one second, so you keep feeding it the same seed value.</p>\n\n<p>Always just call <code>srand()</code> once in your whole program.</p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432740689, "post_id": 30486892, "comment_id": 49052279, "body": "Yes you&#39;re right, but it&#39;s really because everyone assumed that the OP used <code>rand()</code> instead of <code>random()</code>."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432740912, "post_id": 30486892, "comment_id": 49052456, "body": "@iharob I&#39;ve rolled back your edit because a) it&#39;s closer to the original code and b) it almost certainly makes no difference to the program."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432741463, "post_id": 30486892, "comment_id": 49052815, "body": "It makes no difference you are right about the rollback, sorry it&#39;s just that I can&#39;t believe that someone would write such a horrible line of code, I know that it&#39;s a little bit stupid but I love programming and I feel that this kind of programmers hurt programming, so ... I will delete this comment once I know you read it."}, {"owner": {"reputation": 13, "user_id": 4945297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa513c5e4675542263a60f5e9fa3472?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Calmes", "link": "https://stackoverflow.com/users/4945297/christopher-calmes"}, "edited": false, "score": 0, "creation_date": 1432741482, "post_id": 30486892, "comment_id": 49052830, "body": "Thank you @JeremyP :-) newb mistake I guess."}, {"owner": {"reputation": 13, "user_id": 4945297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa513c5e4675542263a60f5e9fa3472?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Calmes", "link": "https://stackoverflow.com/users/4945297/christopher-calmes"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432741617, "post_id": 30486892, "comment_id": 49052941, "body": "@iharob Just 2 semesters of java programming in high school. I&#39;m just starting out."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432741778, "post_id": 30486892, "comment_id": 49053059, "body": "Java ... that&#39;s why such an idea might occur to you, you have to make your code elegant and beautiful, even if you are starting, I don&#39;t really blame you, it&#39;s that there are so many online resources with bad style and bad practice, that it&#39;s quite easy to run into this kind of thinking, and Java seems to help, I&#39;ve noticed that many java programmers don&#39;t really care to format their code nicely, even though the eclipse thing has the functionality to make it easy."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432741895, "post_id": 30486892, "comment_id": 49053136, "body": "@iharob I would have written the code the same way as you, but I don&#39;t see anything intrinsically wrong except that it is the equivalent of a &quot;magic number&quot; in the code."}, {"owner": {"reputation": 13, "user_id": 4945297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa513c5e4675542263a60f5e9fa3472?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Calmes", "link": "https://stackoverflow.com/users/4945297/christopher-calmes"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432741958, "post_id": 30486892, "comment_id": 49053187, "body": "@iharob how would you have done it? I thought that this way makes it machine independent because it doesn&#39;t rely on ascii <b>edit</b>: ascii not ancii... midnight in Taiwan)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432742021, "post_id": 30486892, "comment_id": 49053229, "body": "What is <code>ancii</code>? and I don&#39;t understand what you mean."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 13, "user_id": 4945297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa513c5e4675542263a60f5e9fa3472?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Calmes", "link": "https://stackoverflow.com/users/4945297/christopher-calmes"}, "edited": false, "score": 0, "creation_date": 1432742027, "post_id": 30486892, "comment_id": 49053235, "body": "@ChristopherCalmes Look at his edit of my answer (edit 2 in the history) by clicking on the &quot;edited xx minutes ago&quot; link"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 13, "user_id": 4945297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa513c5e4675542263a60f5e9fa3472?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Calmes", "link": "https://stackoverflow.com/users/4945297/christopher-calmes"}, "edited": false, "score": 0, "creation_date": 1432742286, "post_id": 30486892, "comment_id": 49053418, "body": "@ChristopherCalmes Although note that there is a bug in his answer in that he forgets that <code>sizeof(characters)</code> is one too big due to the terminating <code>\\0</code>"}, {"owner": {"reputation": 13, "user_id": 4945297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa513c5e4675542263a60f5e9fa3472?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Calmes", "link": "https://stackoverflow.com/users/4945297/christopher-calmes"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1432742416, "post_id": 30486892, "comment_id": 49053508, "body": "Right, so no magic numbers and use a const. The formatting is bad because....nano. @iharob Thanks for all the help guys!"}], "tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": true, "score": 3, "last_activity_date": 1432740841, "last_edit_date": 1432740841, "creation_date": 1432740617, "answer_id": 30486892, "question_id": 30486336, "link": "https://stackoverflow.com/questions/30486336/random-password-generator-same-string/30486892#30486892", "title": "Random password generator same string", "body": "<p>Oh dear.  Everybody has got the answer wrong, including me before I tried the questioner's code for myself.</p>\n\n<p>In fact, yes there should be no call to <code>srand()</code> in the loop because it will reseed the random number generator on each iteration. However, there should also be no call to <code>srand()</code> outside the loop either because the function used to generate actual random numbers is <code>random()</code> not <code>rand()</code>.  The correct code is  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main()\n{\n    int counter = 0;\n    srandom(time(NULL));  // Correct seeding function for random()\n    char randChar;\n\n    int  passwordLength;\n\n    printf(\"Type in a password Length \\n\");\n    scanf(\"%d\", &amp;passwordLength);\n\n    while(counter &lt; passwordLength)\n    {\n        randChar = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"[random () % 62];\n        printf(\"%c\", randChar);\n        counter++;\n    }\n    printf(\"\\n\"); // Stops the output from being on the same line as the prompt\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4945297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa513c5e4675542263a60f5e9fa3472?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Calmes", "link": "https://stackoverflow.com/users/4945297/christopher-calmes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3137, "favorite_count": 0, "accepted_answer_id": 30486892, "answer_count": 3, "score": 1, "last_activity_date": 1432740841, "creation_date": 1432739142, "last_edit_date": 1432739694, "question_id": 30486336, "link": "https://stackoverflow.com/questions/30486336/random-password-generator-same-string", "title": "Random password generator same string", "body": "<p>This is my first C program and I wanted to make a random password, but every time I run the program, it generates the same string. (always generates \"pkDHTxmMR1...\") This is not going to actually be used so the security of rand() doesn't really matter to me. Why would it output the same string every time that I run it?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;  \n//this is a program to generate a random password\n\nint main()\n{\n    int counter = 0;\n    srand(time(NULL));\n    char randChar;\n\n    int  passwordLength;\n\n    printf(\"Type in a password Length \\n\");\n    scanf(\"%d\", &amp;passwordLength);\n\n    while(counter &lt; passwordLength)\n    {\n        //seed random based on time\n        srand(time(NULL));\n        randChar = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"[random () % 62];    \n        printf(\"%c\", randChar);\n        counter++;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1432777769, "post_id": 30486156, "comment_id": 49069116, "body": "always check (!=NULL) the returned value from fopen() to assure the operation was successful.   always check the returned value (not the parameters) from fscanf() to assure the input/conversion operation(s) was successful.  there are several &#39;magic&#39; numbers (10, 100) in the source.  Magic numbers are a maintenance nightmare, especially when they are not commented.  Suggest inserting appropriate #define statements, with comments, and use those #define&#39;d names in the code.   When #define&#39;ing a numeric value, always wrap the value in parens &#39;(&#39; &#39;)&#39; so avoid certain text replacement problems."}], "answers": [{"comments": [{"owner": {"reputation": 360, "user_id": 4393375, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/4HnA9.png?s=128&g=1", "display_name": "jimo", "link": "https://stackoverflow.com/users/4393375/jimo"}, "edited": false, "score": 0, "creation_date": 1432739701, "post_id": 30486181, "comment_id": 49051499, "body": "with this implementation the value of the matrix is altered!"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1432738709, "creation_date": 1432738709, "answer_id": 30486181, "question_id": 30486156, "link": "https://stackoverflow.com/questions/30486156/printing-text-in-a-new-file-bug/30486181#30486181", "title": "Printing text in a new file bug", "body": "<p>You don't have to <code>fopen()</code> the file inside the loop, you only need to <code>fopen()</code> the file once, check that it did open, and then <code>fprintf()</code> to it in the loop.</p>\n\n<p>Fix your program like this</p>\n\n<pre><code>FILE* file;\n\nfile = fopen(\"adjacency.txt\", \"w\");\nif (file != NULL)\n {\n    for (int i = 0; i&lt;v; i++)\n     {\n        for (int j = 0; j&lt;v; j++)\n         {\n            fprintf(f,\"%d\", matrix[i][j]);\n         }\n        fprintf(f,\"\\n\");\n     }\n }\n</code></pre>\n"}], "owner": {"reputation": 360, "user_id": 4393375, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/4HnA9.png?s=128&g=1", "display_name": "jimo", "link": "https://stackoverflow.com/users/4393375/jimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432738709, "creation_date": 1432738652, "question_id": 30486156, "link": "https://stackoverflow.com/questions/30486156/printing-text-in-a-new-file-bug", "title": "Printing text in a new file bug", "body": "<p>Okay so I am trying to write this adjacency matrix into this text file but my code is just writing the first value of the adjacency matrix.</p>\n\n<p>Instead of <code>fprint</code> I checked using simply <code>printf</code> and it works fine, but I can't really understand what is going wrong with printing the same thing inside a <code>.txt</code> file</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define MAXVERTICES 10 \n\nint main(){\n\n\n  FILE* fp = fopen(\"input.txt\", \"r\");\n  int **mat;\n  int num[100];\n  int i,v,e,j,a,b,u,ne=1,p;\n\n  int matrix[MAXVERTICES][MAXVERTICES];\n  int cost[10][10];\n  int taken[10] = {0}, min, mincost=0;\n\n  //printf(\"ENter\");\n\n  fscanf(fp, \"%d %d\", &amp;v, &amp;e);\n\n  for (int i = 0; i &lt;e; i++)\n  {\n    int v1, v2;\n    int weight;\n\n    fscanf(fp, \"%d %d %d\", &amp;v1, &amp;v2, &amp;weight);    \n\n    matrix[v1][v2] = matrix[v2][v1]=weight;\n    //   printf(\"%d\", weight);\n  }\n\n  //printf(\"Check 0\");\n  FILE* f;\n  for (int i = 0; i&lt;v; i++){\n    for (int j = 0; j&lt;v; j++){\n      f=fopen(\"adjacency.txt\", \"w\");\n\n      fprintf(f,\"%d\", matrix[i][j]);\n    }\n     fprintf(f,\"\\n\");\n  }\n fclose(f)\nreturn 0;\n}    \n</code></pre>\n"}, {"tags": ["c", "loops", "while-loop", "conditional-statements", "break"], "comments": [{"owner": {"reputation": 31255, "user_id": 28494, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/c14ME.gif?s=128&g=1", "display_name": "qrdl", "link": "https://stackoverflow.com/users/28494/qrdl"}, "edited": false, "score": 1, "creation_date": 1432737953, "post_id": 30485580, "comment_id": 49050168, "body": "Last time I&#39;ve checked <code>while</code> was ok"}], "answers": [{"tags": [], "owner": {"reputation": 1079, "user_id": 4472848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bc7b33199a0a5e067e1a33265cf88d1?s=128&d=identicon&r=PG", "display_name": "Wouter Verhelst", "link": "https://stackoverflow.com/users/4472848/wouter-verhelst"}, "is_accepted": false, "score": 0, "last_activity_date": 1432737591, "creation_date": 1432737591, "answer_id": 30485736, "question_id": 30485580, "link": "https://stackoverflow.com/questions/30485580/while-loop-not-working-for-c-programming/30485736#30485736", "title": "While loop not working for c programming", "body": "<p>scanf also adds the <code>\\n</code> at the end. You'll need to either chop that off, or add it to the strings you're comparing to. Alternatively, if you don't care about someone entering something like \"European money\" instead of \"Euro\", you can use strncmp() instead of strcmp().</p>\n\n<p>Note though that your code is vulnerable to a buffer overflow if someone enters more than 98 characters (after adding the <code>\\n</code> and <code>\\0</code>, you'll be at byte 101). To ensure that doesn't cause a problem,  you should use 'scanf(\"%99s\")' instead, which will chop off the string after the 99th character (or, alternatively, use a different input function).</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 4942556, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/73a7e441ef693c5ce0da0ed3237a3243?s=128&d=identicon&r=PG&f=1", "display_name": "Nicol Ramirez", "link": "https://stackoverflow.com/users/4942556/nicol-ramirez"}, "edited": false, "score": 0, "creation_date": 1432738241, "post_id": 30485790, "comment_id": 49050388, "body": "Thank you so much!! It works now and I understand why it was failing to break the loop."}, {"owner": {"reputation": 961, "user_id": 844799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b0f431ad80b4bb0af513535f04650b4?s=128&d=identicon&r=PG", "display_name": "OTTA", "link": "https://stackoverflow.com/users/844799/otta"}, "reply_to_user": {"reputation": 19, "user_id": 4942556, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/73a7e441ef693c5ce0da0ed3237a3243?s=128&d=identicon&r=PG&f=1", "display_name": "Nicol Ramirez", "link": "https://stackoverflow.com/users/4942556/nicol-ramirez"}, "edited": false, "score": 0, "creation_date": 1432738532, "post_id": 30485790, "comment_id": 49050599, "body": "No problem, seen that logical error so many times over the years, tripped myself up with it as well :-)"}], "tags": [], "owner": {"reputation": 961, "user_id": 844799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b0f431ad80b4bb0af513535f04650b4?s=128&d=identicon&r=PG", "display_name": "OTTA", "link": "https://stackoverflow.com/users/844799/otta"}, "is_accepted": false, "score": 0, "last_activity_date": 1432737714, "creation_date": 1432737714, "answer_id": 30485790, "question_id": 30485580, "link": "https://stackoverflow.com/questions/30485580/while-loop-not-working-for-c-programming/30485790#30485790", "title": "While loop not working for c programming", "body": "<p>You're using OR operators in your while statement when you should be using an AND. Whatever valid currency selected will fail 2 of the conditions so you're stuck in a loop.</p>\n"}, {"tags": [], "owner": {"reputation": 486, "user_id": 4773612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tslp9.jpg?s=128&g=1", "display_name": "Misery", "link": "https://stackoverflow.com/users/4773612/misery"}, "is_accepted": false, "score": 2, "last_activity_date": 1432737880, "creation_date": 1432737880, "answer_id": 30485838, "question_id": 30485580, "link": "https://stackoverflow.com/questions/30485580/while-loop-not-working-for-c-programming/30485838#30485838", "title": "While loop not working for c programming", "body": "<p>In this line\n<code>while ((strcmp(currency, str1) != 0) || (strcmp(currency, str2) != 0) || (strcmp(currency, str3) != 0))</code></p>\n\n<p>you're telling your code to loop until <code>currency</code> is equal to <code>str1</code> <strong>and</strong> <code>str2</code> <strong>and</strong> <code>str3</code> which will never happen.</p>\n\n<p>You need to change it to\n<code>while ((strcmp(currency, str1) != 0) &amp;&amp; (strcmp(currency, str2) != 0) &amp;&amp; (strcmp(currency, str3) != 0))</code></p>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1432737939, "creation_date": 1432737939, "answer_id": 30485866, "question_id": 30485580, "link": "https://stackoverflow.com/questions/30485580/while-loop-not-working-for-c-programming/30485866#30485866", "title": "While loop not working for c programming", "body": "<p>There are sevreal issues.</p>\n\n<p>This condition is wrong</p>\n\n<pre><code>while ((strcmp(currency, str1) != 0) || (strcmp(currency, str2) != 0) || strcmp(currency, str3) != 0))\n</code></pre>\n\n<p>Replaced by:</p>\n\n<pre><code>while ((strcmp(currency, str1) != 0) &amp;&amp; (strcmp(currency, str2) != 0) &amp;&amp; strcmp(currency, str3) != 0))\n</code></pre>\n\n<p>I let you find out the reason as an exercice.</p>\n\n<p>Your usage of <code>scanf</code> is overly complicated, you probably want this:</p>\n\n<pre><code>float gas_gallons;\nfloat cost_today_gallons;\nint main()\n{\n    printf(\"\\nPlease enter the number of gallons of gasoline: \");\n    scanf(\"%f\", &amp;gas_gallons);\n\n    float carbon_dioxide_pounds = gas_gallons * 19.64;\n    printf(\"\\n%.2f gallons of gasoline produces approximately %f pounds of carbon dioxide.\", gas_gallons, carbon_dioxide_pounds );\n\n    float barrels_crude_oil = gas_gallons/19.0;\n    printf(\"\\n%.2f gallons of gasoline requires %f barrels of crude oil.\", gas_gallons, barrels_crude_oil);\n\n    cost_today_gallons = gas_gallons*2.738;\n    printf(\"\\n%.2f gallons of gasoline costs a total average of %f US dollars today.\", gas_gallons, cost_today_gallons);\n\n\n    char currency[100];\n    printf(\"\\nChoose a currency you want to see your total cost in (Euro, Pound, or Yen): \");\n    scanf(\"%s\", currency);\n\n    char *str1 = \"Yen\";\n    char *str2 = \"Euro\";\n    char *str3 = \"Pound\";\n\n    while ((strcmp(currency, str1) != 0) &amp;&amp; (strcmp(currency, str2) != 0) &amp;&amp; (strcmp(currency, str3) != 0))\n    {\n        printf(\"\\nYou need choose one of these currencies (Euro, Pound or Yen). Please enter one: \");\n        scanf(\"%s\", &amp;currency);\n    }\n\n    if ((strcmp(currency, str1) == 0))\n    {\n        float yen_total_cost = cost_today_gallons*123.07;\n        printf(\"\\n%.2f gallons of gasoline costs a total average of %f Japenese Yens today.\", gas_gallons, yen_total_cost);\n    }\n    if (strcmp(currency, str2) == 0)\n    {\n        float euro_total_cost = cost_today_gallons*0.92;\n        printf(\"\\n%.2f gallons of gasoline costs a total average of %f Euros today.\", gas_gallons, euro_total_cost);\n    }\n    if (strcmp(currency, str3) == 0)\n    {\n        float pound_total_cost = cost_today_gallons*0.65;\n        printf(\"\\n%.2f gallons of gasoline costs a total average of %f British Pounds today.\", gas_gallons, pound_total_cost);\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>Bonus: the choice of the variable names <code>str1</code>to <code>str3</code> is poor. Why not choose names as <code>strEuro</code>, <code>strYen</code>, <code>strPound</code> ?</p>\n"}], "owner": {"reputation": 19, "user_id": 4942556, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/73a7e441ef693c5ce0da0ed3237a3243?s=128&d=identicon&r=PG&f=1", "display_name": "Nicol Ramirez", "link": "https://stackoverflow.com/users/4942556/nicol-ramirez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1432737939, "creation_date": 1432737187, "last_edit_date": 1432737328, "question_id": 30485580, "link": "https://stackoverflow.com/questions/30485580/while-loop-not-working-for-c-programming", "title": "While loop not working for c programming", "body": "<p>I am trying to get the program to allow the user to enter a currency they want to change the total cost to. when the user does enter a wrong input and then is prompted to enter again a correct currency, when they do enter a correct currency the while loop is not breaking. It keeps asking the user again to enter a correct currency.</p>\n\n<pre><code>Please enter the number of gallons of gasoline: 7\n\n7.0 gallons of gasoline produces..\n7.0 gallons of gasoline requires.. \n7.0 gallons of gasoline costs..\n\nChoose a currency you want to see your total cost in (Euro, Pound, or Yen): eurooo\n\nYou need choose one of these currencies (Euro, Pound, or Yen). Please enter one: Euro\n\nYou need choose one of these currencies (Euro, Pound, or Yen). Please enter one: Euro\n\nYou need choose one of these currencies (Euro, Pound, or Yen). Please enter one: \n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdbool.h&gt;\n\nfloat gas_gallons;\nfloat cost_today_gallons;\nint main()\n{\n    char input;\n    printf(\"\\nPlease enter the number of gallons of gasoline: \");\n    scanf(\" %c\", &amp;input);\n    getchar();\n\n    while (!isdigit(input))\n    {\n        printf(\"\\nYou need to enter a digit. Please enter the number of gallons of gasoline: \");\n        scanf(\"%c\", &amp;input);\n        }\n\n    if (isdigit(input))\n    {\n        gas_gallons = input - '0';\n\n        float carbon_dioxide_pounds = gas_gallons * 19.64;\n        printf(\"\\n%.2f gallons of gasoline produces approximately %f pounds of carbon dioxide.\", gas_gallons, carbon_dioxide_pounds );\n\n        float barrels_crude_oil = gas_gallons/19.0;\n        printf(\"\\n%.2f gallons of gasoline requires %f barrels of crude oil.\", gas_gallons, barrels_crude_oil);\n\n        cost_today_gallons = gas_gallons*2.738;\n        printf(\"\\n%.2f gallons of gasoline costs a total average of %f US dollars today.\", gas_gallons, cost_today_gallons);\n        }\n\n    char currency[100];\n    printf(\"\\nChoose a currency you want to see your total cost in (Euro, Pound, or Yen): \");\n    scanf(\"%s\", &amp;currency);\n    getchar();\n\n    char *str1 = \"Yen\";\n    char *str2 = \"Euro\";\n    char *str3 = \"Pound\";\n\n    while ((strcmp(currency, str1) != 0) || (strcmp(currency, str2) != 0) || (strcmp(currency, str3) != 0))\n    {\n        printf(\"\\nYou need choose one of these currencies (Euro, Pound or Yen). Please enter one: \");\n        scanf(\"%s\", &amp;currency);\n    }\n\n    if ((strcmp(currency, str1) == 0))\n    {\n        float yen_total_cost = cost_today_gallons*123.07;\n        printf(\"\\n%.2f gallons of gasoline costs a total average of %f Japenese Yens today.\", gas_gallons, yen_total_cost);\n    }\n    if (strcmp(currency, str2) == 0)\n    {\n        float euro_total_cost = cost_today_gallons*0.92;\n        printf(\"\\n%.2f gallons of gasoline costs a total average of %f Euros today.\", gas_gallons, euro_total_cost);\n    }\n    if (strcmp(currency, str3) == 0)\n    {\n        float pound_total_cost = cost_today_gallons*0.65;\n        printf(\"\\n%.2f gallons of gasoline costs a total average of %f British Pounds today.\", gas_gallons, pound_total_cost);\n    }\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 1, "creation_date": 1432736873, "post_id": 30485431, "comment_id": 49049261, "body": "Here you go: <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">asciitable.com</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1432737090, "post_id": 30485431, "comment_id": 49049456, "body": "To be honest, it actually depends on your system. Most systems today uses ASCII encoding which means you don&#39;t have to do anything. If you are running on a system which <i>doesn&#39;t</i> use ASCII, and you want to convert whatever encoding the system uses to ASCII then it&#39;s a bit more work, but it&#39;s not impossible (or hard really) if you know the systems encoding and have an ASCII table."}], "answers": [{"comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1432737062, "post_id": 30485466, "comment_id": 49049421, "body": "Note that this only works if your platform uses ASCII - for an IBM system with EBCDIC character set for example this would not return the ASCII value of the character, and you would need to use a lookup table instead."}, {"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1432737190, "post_id": 30485466, "comment_id": 49049549, "body": "@PaulR I see the point, very True. So, what disclaimer should I add to my answer? Can you help me with the words?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1432737225, "post_id": 30485466, "comment_id": 49049574, "body": "@PaulR I don&#39;t think you&#39;d be particularly interested in knowing the ASCII values on such a system. Unless the purpose of the program is to print out asciitable.com or some such."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1432737250, "post_id": 30485466, "comment_id": 49049597, "body": "I&#39;m probably being overly-pedantic, but you can just copy and paste my comment into your answer if you like, as a footnote. Your answer is fine though otherwise."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432737389, "post_id": 30485466, "comment_id": 49049701, "body": "@NatashaDutta Simply change your output to <code>printf(&quot;Symbol table index of %c is %d\\n&quot;, x, x);</code> to sate the pedants."}, {"owner": {"reputation": 3, "user_id": 4945130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a20f8a347a3904988e30cf6809552f0f?s=128&d=identicon&r=PG&f=1", "display_name": "Roshan K", "link": "https://stackoverflow.com/users/4945130/roshan-k"}, "edited": false, "score": 0, "creation_date": 1432739244, "post_id": 30485466, "comment_id": 49051145, "body": "I actually need the function to use in an other program. This function makes THAT other program easy... That&#39;s the reason I asked."}], "tags": [], "owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "is_accepted": false, "score": 5, "last_activity_date": 1432737424, "last_edit_date": 1432737424, "creation_date": 1432736910, "answer_id": 30485466, "question_id": 30485431, "link": "https://stackoverflow.com/questions/30485431/how-to-find-the-ascii-code-of-a-give-character-using-functions-in-c/30485466#30485466", "title": "How to find the ASCII Code of a give character using functions in C?", "body": "<p>There is no need for a function, like <code>ascii()</code>. For this purpose, it is kind of <em>overkill</em>, If I may say so.</p>\n\n<p>Simply use</p>\n\n<pre><code>char x = 'a';\nprintf(\"Symbol table index of %c is %d\\n\", x, x);\n</code></pre>\n\n<hr>\n\n<p><sup>Note that this only works if your platform uses ASCII - for an IBM system with EBCDIC character set for example this would not return the ASCII value of the character, and you would need to use a lookup table instead.</sup></p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 4945130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a20f8a347a3904988e30cf6809552f0f?s=128&d=identicon&r=PG&f=1", "display_name": "Roshan K", "link": "https://stackoverflow.com/users/4945130/roshan-k"}, "edited": false, "score": 0, "creation_date": 1432739460, "post_id": 30485535, "comment_id": 49051312, "body": "It served my purpose. Thanks. :D"}], "tags": [], "owner": {"reputation": 59, "user_id": 4936787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff07b9b29357e43b5d49cc3c9e81408?s=128&d=identicon&r=PG&f=1", "display_name": "eldad uzman", "link": "https://stackoverflow.com/users/4936787/eldad-uzman"}, "is_accepted": true, "score": 0, "last_activity_date": 1432737257, "last_edit_date": 1432737257, "creation_date": 1432737059, "answer_id": 30485535, "question_id": 30485431, "link": "https://stackoverflow.com/questions/30485431/how-to-find-the-ascii-code-of-a-give-character-using-functions-in-c/30485535#30485535", "title": "How to find the ASCII Code of a give character using functions in C?", "body": "<p>What if you simply assign your <code>char</code> to an integer variable with proper type casting?</p>\n\n<pre><code>char c = 'a';\nint  i = (int) c;\n</code></pre>\n\n<p>Would that work?</p>\n"}], "owner": {"reputation": 3, "user_id": 4945130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a20f8a347a3904988e30cf6809552f0f?s=128&d=identicon&r=PG&f=1", "display_name": "Roshan K", "link": "https://stackoverflow.com/users/4945130/roshan-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 30485535, "answer_count": 2, "score": 0, "last_activity_date": 1432737773, "creation_date": 1432736827, "last_edit_date": 1432737773, "question_id": 30485431, "link": "https://stackoverflow.com/questions/30485431/how-to-find-the-ascii-code-of-a-give-character-using-functions-in-c", "title": "How to find the ASCII Code of a give character using functions in C?", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nvoid ascii()\n{\n  //code goes here\n}\n\nint main()\n{\n    int b;\n    char a;\n    b=ascii(a);\n    printf(\"%d\",b);//Expecting the ASCII Value of a to printed.\n    return 0;\n}\n</code></pre>\n\n<p>Expecting the printf statement to give the ASCII Value of a.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "c", "ctypes"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 1, "creation_date": 1432737150, "post_id": 30485239, "comment_id": 49049503, "body": "You have to provide that information because the shared library doesn&#39;t know it. It doesn&#39;t store function argument types, just their names and addresses."}], "answers": [{"tags": [], "owner": {"reputation": 17046, "user_id": 364980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf8ae304409c53b006b47101fe61e34?s=128&d=identicon&r=PG", "display_name": "James Mills", "link": "https://stackoverflow.com/users/364980/james-mills"}, "is_accepted": false, "score": 1, "last_activity_date": 1432737178, "last_edit_date": 1492086984, "creation_date": 1432736934, "answer_id": 30485484, "question_id": 30485239, "link": "https://stackoverflow.com/questions/30485239/is-it-possible-to-make-functions-in-a-dynamic-library-auto-detectable-for-python/30485484#30485484", "title": "Is it possible to make functions in a dynamic library auto-detectable for Python?", "body": "<p>You can use <code>readelf</code>; however it would not be trivial to use this programatically from Python and it looks like it only gies you function names for C and mangled names for C++.</p>\n\n<p>See: <a href=\"https://unix.stackexchange.com/questions/61940/introspection-of-the-interface-of-a-shared-library\">Introspection of the interface of a shared library</a></p>\n\n<p><strong>NB:</strong> The information in the shared library does not store information about function parameters for C; for C++ whilst you get <em>mangled</em> names you can use <code>c++filt</code> to <em>demangle</em> and get function parameters.</p>\n\n<hr>\n\n<p>However you may want to have a look at <a href=\"https://github.com/davidjamesca/ctypesgen\" rel=\"nofollow noreferrer\">ctypesgen</a> a tool which can be used to <em>automatically</em> generate a <a href=\"https://docs.python.org/2/library/ctypes.html\" rel=\"nofollow noreferrer\">ctypes</a> module for you given the Header file(s) <code>.h</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 296564, "user_id": 34088, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8a4d6f03a8879432d8563aefbf48e787?s=128&d=identicon&r=PG", "display_name": "Aaron Digulla", "link": "https://stackoverflow.com/users/34088/aaron-digulla"}, "is_accepted": false, "score": 2, "last_activity_date": 1432737011, "creation_date": 1432737011, "answer_id": 30485509, "question_id": 30485239, "link": "https://stackoverflow.com/questions/30485239/is-it-possible-to-make-functions-in-a-dynamic-library-auto-detectable-for-python/30485509#30485509", "title": "Is it possible to make functions in a dynamic library auto-detectable for Python?", "body": "<p>On Linux, you can use tools like <code>objdump --dynamic-syms</code> to list all dynamic symbols im-/exported by a shared library.</p>\n\n<p>Symbols in the <code>.text</code> section are exported and functions have the flags <code>DF</code>:</p>\n\n<pre><code>0000000000005586 g    DF .text  0000000000000024  Base        gtkspell_attach\n</code></pre>\n\n<p>Imported functions can be identified by <code>DF *UND*</code>:</p>\n\n<pre><code>0000000000000000      DF *UND*  0000000000000000              g_free\n</code></pre>\n\n<p>The only way to figure out what arguments the function takes and what it returns is to look at the debug information which is optional.</p>\n"}], "owner": {"reputation": 90284, "user_id": 562769, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e86681e49622d52817b36fd2a4c936b7?s=128&d=identicon&r=PG", "display_name": "Martin Thoma", "link": "https://stackoverflow.com/users/562769/martin-thoma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1432755988, "creation_date": 1432736368, "last_edit_date": 1432755988, "question_id": 30485239, "link": "https://stackoverflow.com/questions/30485239/is-it-possible-to-make-functions-in-a-dynamic-library-auto-detectable-for-python", "title": "Is it possible to make functions in a dynamic library auto-detectable for Python?", "body": "<p>When I want to use rust code in Python I would write something like the following in rust</p>\n\n<pre><code>#![crate_type = \"dylib\"]\n\n#[no_mangle]\npub extern fn fib(n: u32) -&gt; u32 {\n    if n &lt;= 1 {\n        return n;\n    } else {\n        return fib(n-1) + fib(n-2);\n    }\n}\n</code></pre>\n\n<p>and then something like the following in Python to use the code.</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport ctypes\n\nfiblib = ctypes.CDLL(\"./libfibonacci.so\")\nfib = fiblib.fib\nn = 37\nprint(\"The %ith Fibonacci number is %i.\" % (n, fib(n)))\n</code></pre>\n\n<p>However, I have to know that there is a function <code>fib</code> which takes one integer as an argument and returns an integer.</p>\n\n<p>Is it possible to auto-detect which functions are in a dynamic library?</p>\n\n<p>Is it possible to write / compile rust (or C) code in such a way that it is automatically detectable with Python?</p>\n"}, {"tags": ["c++", "c", "gcc", "buffer", "buffer-overflow"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1432736569, "post_id": 30485224, "comment_id": 49048966, "body": "C (or C++) <i>doesn&#39;t</i> recognize that. Neither language have bounds checking on C-strings or arrays, not standardized anyway. Writing out of bounds of anything leads to <i>undefined behavior</i> meaning anything could happen."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1432736634, "post_id": 30485224, "comment_id": 49049025, "body": "It is impossible to answer definitely without the generated assembly for your code (<code>gcc -S</code>), and once provided, the answer should be clear enough that no question is necessary."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1432737122, "post_id": 30485224, "comment_id": 49049485, "body": "What platform, version of gcc, and compile/link command line are you using?"}, {"owner": {"reputation": 920, "user_id": 840580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e370a6a478d478e6ce9e4e1b0bd0316e?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/840580/nikita"}, "edited": false, "score": 1, "creation_date": 1432737330, "post_id": 30485224, "comment_id": 49049667, "body": "check how you run your program, probably you&#39;re forcing some runtime check. See how it works here <a href=\"http://ideone.com/wQHItj\" rel=\"nofollow noreferrer\">ideone.com/wQHItj</a>  . Also note that on ideone stack grows in opposite direction."}, {"owner": {"reputation": 1332, "user_id": 1239203, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9fb563abf3a6d11c19f312b572a52e19?s=128&d=identicon&r=PG", "display_name": "Thor Correia", "link": "https://stackoverflow.com/users/1239203/thor-correia"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1432784162, "post_id": 30485224, "comment_id": 49070623, "body": "@MichaelBurr OS 10.10.2, latest version of GCC 4.2.1"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1432736570, "creation_date": 1432736570, "answer_id": 30485318, "question_id": 30485224, "link": "https://stackoverflow.com/questions/30485224/why-doesnt-buffer-overflow-occur-with-gcc/30485318#30485318", "title": "Why doesn&#39;t buffer overflow occur with GCC?", "body": "<p>In your case, you've successfuly produced a buffer overflow by <em>attempting</em> to write <code>14</code> <code>char</code>s in a memory region of <code>8</code> <code>char</code>s.</p>\n\n<p>As soon as you write past the allocated memory, the behaviour goes undefined. So, the <code>Abort</code> message is there.</p>\n\n<p>Related: <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432738338, "post_id": 30485357, "comment_id": 49050459, "body": "How do you link your nose together with your program though?"}, {"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432738505, "post_id": 30485357, "comment_id": 49050578, "body": "@Lundin Now, asking that question will result in UB. :-D"}], "tags": [], "owner": {"reputation": 141, "user_id": 3324271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a825874654d3057c20cd43048106573?s=128&d=identicon&r=PG&f=1", "display_name": "Olaf Seibert", "link": "https://stackoverflow.com/users/3324271/olaf-seibert"}, "is_accepted": false, "score": 1, "last_activity_date": 1432737051, "last_edit_date": 1432737051, "creation_date": 1432736643, "answer_id": 30485357, "question_id": 30485224, "link": "https://stackoverflow.com/questions/30485224/why-doesnt-buffer-overflow-occur-with-gcc/30485357#30485357", "title": "Why doesn&#39;t buffer overflow occur with GCC?", "body": "<p>What happens when a buffer overflow occurs is <a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow\">undefined</a>. That means that anything might happen. For instance, <a href=\"http://www.catb.org/jargon/html/N/nasal-demons.html\" rel=\"nofollow\">demons may fly from your nose</a>.</p>\n\n<p>What happened here is that your program crashed. Rather boring.</p>\n"}, {"tags": [], "owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "is_accepted": false, "score": 2, "last_activity_date": 1432736783, "creation_date": 1432736783, "answer_id": 30485415, "question_id": 30485224, "link": "https://stackoverflow.com/questions/30485224/why-doesnt-buffer-overflow-occur-with-gcc/30485415#30485415", "title": "Why doesn&#39;t buffer overflow occur with GCC?", "body": "<blockquote>\n  <p><em>Why doesn't buffer overflow occur with GCC?</em></p>\n</blockquote>\n\n<p>Well, it <strong>is</strong> happenning in your case. That's why, as a <em>side effect</em> you can see the <em>Abort</em> message.</p>\n"}], "owner": {"reputation": 1332, "user_id": 1239203, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9fb563abf3a6d11c19f312b572a52e19?s=128&d=identicon&r=PG", "display_name": "Thor Correia", "link": "https://stackoverflow.com/users/1239203/thor-correia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1432737926, "creation_date": 1432736329, "question_id": 30485224, "link": "https://stackoverflow.com/questions/30485224/why-doesnt-buffer-overflow-occur-with-gcc", "title": "Why doesn&#39;t buffer overflow occur with GCC?", "body": "<p>I was just recently learning about buffer overflows. I was attempting to replicate it using GCC. Here's the code I wrote.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int value = 5;\n    char buffer_one[8], buffer_two[8];\n\n    strcpy(buffer_one, \"one\");\n    strcpy(buffer_two, \"two\");\n\n    printf(\"[BEFORE] buffer_two is at %p and contains %s\\n\", buffer_two, buffer_two);\n    printf(\"[BEFORE] buffer_one is at %p and contains %s\\n\", buffer_one, buffer_one);\n    printf(\"[BEFORE] value is at %p and contains %d\\n\\n\", value, value);\n\n    printf(\"[STRCPY] copying %d bytes into buffer_two\\n\\n\", strlen(argv[1]));\n    strcpy(buffer_two, argv[1]);\n\n    printf(\"[BEFORE] buffer_two is at %p and contains %s\\n\", buffer_two, buffer_two);\n    printf(\"[BEFORE] buffer_one is at %p and contains %s\\n\", buffer_one, buffer_one);\n    printf(\"[BEFORE] value is at %p and contains %d\\n\\n\", value, value);\n\n    return 0;\n}\n</code></pre>\n\n<p>Seems like it should work, right? Buffer_two and buffer_one are adjacent from each other in memory.</p>\n\n<pre><code>[BEFORE] buffer_two is at 0x7fff56ff2b68 and contains two\n[BEFORE] buffer_one is at 0x7fff56ff2b70 and contains one\n[BEFORE] value is at 0x5 and contains 5\n</code></pre>\n\n<p>However, shortly following this\u2026</p>\n\n<pre><code>[STRCPY] copying 14 bytes into buffer_two\n\nAbort trap: 6\n</code></pre>\n\n<p>How come C recognizes this? And how can some hackers execute more complex buffer overflows that actually work?</p>\n"}, {"tags": ["c", "character-encoding"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 2, "creation_date": 1432734759, "post_id": 30484527, "comment_id": 49047513, "body": "You&#39;re writing the binary representation of an <code>int</code>, which isn&#39;t text."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1432734773, "post_id": 30484527, "comment_id": 49047520, "body": "Not very sure, but maybe encoding issue? Did you try with <code>fopen()</code>/<code>fprintf()</code>/<code>flose()</code> trio?"}, {"owner": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "edited": false, "score": 0, "creation_date": 1432734934, "post_id": 30484527, "comment_id": 49047652, "body": "ohh... Now i get it thank you. So the file would contain 4 byte number in binary right?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432734972, "post_id": 30484527, "comment_id": 49047680, "body": "It will contain 4 bytes. It&#39;s up to you how you interpret them. Don&#39;t forget to close the file."}, {"owner": {"reputation": 428, "user_id": 2652091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/046pf.png?s=128&g=1", "display_name": "Subinoy", "link": "https://stackoverflow.com/users/2652091/subinoy"}, "edited": false, "score": 0, "creation_date": 1432735034, "post_id": 30484527, "comment_id": 49047741, "body": "need fclose()? do fclose and then see the result"}, {"owner": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "edited": false, "score": 0, "creation_date": 1432735041, "post_id": 30484527, "comment_id": 49047748, "body": "Is it possible for me to write the number itself instead of binary number?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432735087, "post_id": 30484527, "comment_id": 49047793, "body": "Why don&#39;t you use <code>fopen&#47;fprintf</code>? It will be easier."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 428, "user_id": 2652091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/046pf.png?s=128&g=1", "display_name": "Subinoy", "link": "https://stackoverflow.com/users/2652091/subinoy"}, "edited": false, "score": 0, "creation_date": 1432735141, "post_id": 30484527, "comment_id": 49047844, "body": "@Subinoy <code>close</code> rather than <code>fclose</code> in his case."}, {"owner": {"reputation": 428, "user_id": 2652091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/046pf.png?s=128&g=1", "display_name": "Subinoy", "link": "https://stackoverflow.com/users/2652091/subinoy"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432735256, "post_id": 30484527, "comment_id": 49047931, "body": "Yes @EugeneSh. you are right"}], "answers": [{"comments": [{"owner": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "edited": false, "score": 0, "creation_date": 1432735261, "post_id": 30484707, "comment_id": 49047938, "body": "Is it possible for me to write the number itself instead of binary number?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "edited": false, "score": 0, "creation_date": 1432735341, "post_id": 30484707, "comment_id": 49047998, "body": "@Ojs did I mention about <code>fprintf()</code>?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1432735350, "post_id": 30484707, "comment_id": 49048005, "body": "If you are insisting on binary access, use <code>sprintf</code> into a buffer and then write the buffer to the file."}], "tags": [], "owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "is_accepted": true, "score": 1, "last_activity_date": 1432735081, "creation_date": 1432735081, "answer_id": 30484707, "question_id": 30484527, "link": "https://stackoverflow.com/questions/30484527/why-cant-i-read-data-from-file-where-i-wrote-text-c/30484707#30484707", "title": "Why can&#39;t I read data from file where i wrote text. C", "body": "<p><code>write(fd, &amp;userid, 4);</code></p>\n\n<p>You are writing 4 bytes of data from the memory starting at the beginning of your <code>userid</code> variable which is an <code>int</code>.</p>\n\n<p>Let's say your userid is <code>42</code>, your <a href=\"http://en.wikipedia.org/wiki/Least_significant_bit\" rel=\"nofollow\">LSB</a> is on the right (in human reading order) and your architecture is in <a href=\"http://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow\">Big endian</a>. Your variable contains these 4 bytes:</p>\n\n<pre><code>0000 0000  0000 0000  0000 0000  0010 1010\n</code></pre>\n\n<p>You are writing these 4 bytes inside of your file, which results in these characters:</p>\n\n<pre><code>NUL NUL NUL *\n</code></pre>\n\n<p>Your notepad warns you because having <code>NUL</code> in a file is not normal (reminder: this is what is written for guid 42, <em>YMMV</em>)</p>\n"}], "owner": {"reputation": 856, "user_id": 4881854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad097f53a73b499090fdadaf695470c9?s=128&d=identicon&r=PG&f=1", "display_name": "Ojs", "link": "https://stackoverflow.com/users/4881854/ojs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1912, "favorite_count": 0, "accepted_answer_id": 30484707, "answer_count": 1, "score": -1, "last_activity_date": 1526664936, "creation_date": 1432734681, "last_edit_date": 1432735321, "question_id": 30484527, "link": "https://stackoverflow.com/questions/30484527/why-cant-i-read-data-from-file-where-i-wrote-text-c", "title": "Why can&#39;t I read data from file where i wrote text. C", "body": "<p>I'm new in C so i got confused a little bit. Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;stdlib.h&gt;\n#define FILENAME \"/var/note\"\n\nint main(int argc, char *argv[])\n{\n  int userid = getuid();\n  int fd = open(FILENAME, O_WRONLY|O_CREAT|O_APPEND, S_IRUSR|S_IWUSR);\n  write(fd, &amp;userid, 4);\n}\n</code></pre>\n\n<p>Basically I'm writing UID in a text file. But when I try to actually open note file (with hand) It gives me error which says:</p>\n\n<blockquote>\n  <p>The file you opened has some invalid characters. If you continue editing this file you could corrupt this document.\n  You can also choose another character encoding and try again.</p>\n</blockquote>\n\n<p>I can't figure out why does it give me this error (when i actually wrote some text in this file) and how to solve it. In my opinion the problem is in character encoding but I don't know which one to use. Sorry if question sounds silly. Thank you.</p>\n"}, {"tags": ["c", "websocket", "jetty", "http-status-code-400", "cometd"], "answers": [{"comments": [{"owner": {"reputation": 716, "user_id": 2881685, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004845400077/picture?type=large", "display_name": "Hakeem El Bakka-lee", "link": "https://stackoverflow.com/users/2881685/hakeem-el-bakka-lee"}, "edited": false, "score": 0, "creation_date": 1432799339, "post_id": 30491662, "comment_id": 49076881, "body": "As always thank you for your fast answers. Concerning the misconfiguration of the server i can totally be true, but i have a doubt about it as it works well with Java and JavaScript, is there a difference with a request coming from a C client ? As i send my Handshake by Tcp protocol and not http. Thank you for your time."}, {"owner": {"reputation": 13642, "user_id": 1215076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363920d78e5115b7d2cf0774b60d653?s=128&d=identicon&r=PG", "display_name": "sbordet", "link": "https://stackoverflow.com/users/1215076/sbordet"}, "reply_to_user": {"reputation": 716, "user_id": 2881685, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004845400077/picture?type=large", "display_name": "Hakeem El Bakka-lee", "link": "https://stackoverflow.com/users/2881685/hakeem-el-bakka-lee"}, "edited": false, "score": 0, "creation_date": 1432812383, "post_id": 30491662, "comment_id": 49085798, "body": "I tested your upgrade via TCP by using telnet, and you can only send HTTP requests via TCP, so the language is not an issue, if you do it right."}], "tags": [], "owner": {"reputation": 13642, "user_id": 1215076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363920d78e5115b7d2cf0774b60d653?s=128&d=identicon&r=PG", "display_name": "sbordet", "link": "https://stackoverflow.com/users/1215076/sbordet"}, "is_accepted": true, "score": 1, "last_activity_date": 1432755549, "creation_date": 1432755549, "answer_id": 30491662, "question_id": 30484488, "link": "https://stackoverflow.com/questions/30484488/server-giving-http-400-error-after-websocket-handshake-request/30491662#30491662", "title": "Server giving http 400 error after WebSocket handshake request", "body": "<p>Very likely you have a misconfigured server, without support for WebSocket.</p>\n\n<p>I suggest that you start the CometD demo server like explained <a href=\"http://docs.cometd.org/3/reference/#_installation_demos\" rel=\"nofollow\">here</a>, and try your C client against that.</p>\n\n<p>I just tried your upgrade request (just replaced the host name and port), and it works just fine.</p>\n"}], "owner": {"reputation": 716, "user_id": 2881685, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004845400077/picture?type=large", "display_name": "Hakeem El Bakka-lee", "link": "https://stackoverflow.com/users/2881685/hakeem-el-bakka-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1316, "favorite_count": 0, "accepted_answer_id": 30491662, "answer_count": 1, "score": 0, "last_activity_date": 1432755549, "creation_date": 1432734617, "last_edit_date": 1432737523, "question_id": 30484488, "link": "https://stackoverflow.com/questions/30484488/server-giving-http-400-error-after-websocket-handshake-request", "title": "Server giving http 400 error after WebSocket handshake request", "body": "<p>I'am trying to achieve an open source CometD library in C, to be able to run a CometD client on barely any given device.</p>\n\n<p>The Long_Polling technique to handshake and communicate with the server is done, so logically i have to give the WebSocket option to the user.</p>\n\n<p>So i fetched the Inter Web and bumped into the <a href=\"http://www.aspl.es/nopoll/html/group__nopoll__conn_ga0b31b7e0694d654663b49ecaf82c0776.html#ga0b31b7e0694d654663b49ecaf82c0776\" rel=\"nofollow\">NoPoll</a> library to help me out on the WebSocket part.</p>\n\n<p>Thanks to <a href=\"http://www.aspl.es/nopoll/html/group__nopoll__conn_ga0b31b7e0694d654663b49ecaf82c0776.html#ga0b31b7e0694d654663b49ecaf82c0776\" rel=\"nofollow\">NoPoll</a> now i can reach the server and knock on his door, but when i try to handshake with it i always get this 400 Error :</p>\n\n<p>Here is my Handshake :</p>\n\n<pre><code>GET ws://m.zpush.ovh:8080/str/strd HTTP/1.1\nHost: m.zpush.ovh:8080\nUpgrade: websocket\nConnection: Upgrade\nSec-WebSocket-Extension: permessage-deflate;client_max_window_bits\nSec-WebSocket-Key: Z0WLawAAAADGI3syAAAAAA==\nOrigin: null\nCookie: BAYEUX_BROWSER=56a9-mchhnynonz6ji8a6hs1sh49; JSESSIONID=8gz8e00htqrl15vcm3o9yi95f\nSec-WebSocket-Version: 13\n</code></pre>\n\n<p>And here is the Jetty error :</p>\n\n<pre><code>WARN:oejh.HttpParser:qtp1213415012-14: badMessage: 400 for HttpChannelOverHttp@40ec53c2{r=0,c=false,a=IDLE,uri=-}\n</code></pre>\n\n<p>So i fetched again the cybernet but i didn't found any clue about it. \nFrom i what i read jetty usually gives more precise error messages, but you will agree this one is very blurry.</p>\n\n<p>It doesn't tell my why and what should i fix to achieve the Handshake. But i suspect that i'am missing something in the HandShake Format.</p>\n\n<p>The other thing that i doesn't understand is that it says \"HttpParser\" but i'am looking for a WebSocket Handshake.</p>\n\n<p>Any light on this would be much appreciated, and as always when i get an answer i properly make a little tutorial using the given answer to help others developers and give them some code to stand on.</p>\n\n<p>PS : I can upload my code on GitHub if it is needed no problem.</p>\n\n<p>Thank you for your time.</p>\n"}, {"tags": ["c", "linux", "raspberry-pi", "watchdog"], "comments": [{"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1432735129, "post_id": 30484167, "comment_id": 49047833, "body": "What <code>fuser -v &#47;dev&#47;watchdog</code> says?"}, {"owner": {"reputation": 3618, "user_id": 999516, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd9425c01ac16523dfbe295007c2f09?s=128&d=identicon&r=PG&f=1", "display_name": "TMichel", "link": "https://stackoverflow.com/users/999516/tmichel"}, "reply_to_user": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1432736009, "post_id": 30484167, "comment_id": 49048473, "body": "Nothing, just empty."}, {"owner": {"reputation": 4859, "user_id": 1000626, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=128&d=identicon&r=PG", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/1000626/chris-watts"}, "edited": false, "score": 0, "creation_date": 1444256350, "post_id": 30484167, "comment_id": 53831709, "body": "Are you running <code>echo V &gt; &#47;dev&#47;watchdog</code> as root? As for the program, are you closing the file after you open it?"}, {"owner": {"reputation": 3618, "user_id": 999516, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd9425c01ac16523dfbe295007c2f09?s=128&d=identicon&r=PG&f=1", "display_name": "TMichel", "link": "https://stackoverflow.com/users/999516/tmichel"}, "reply_to_user": {"reputation": 4859, "user_id": 1000626, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=128&d=identicon&r=PG", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/1000626/chris-watts"}, "edited": false, "score": 0, "creation_date": 1455871888, "post_id": 30484167, "comment_id": 58693357, "body": "I know it&#39;s been a while but never got to solve this and still interested. @CJxD Yes, both echoing and executing the program as root."}, {"owner": {"reputation": 4859, "user_id": 1000626, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=128&d=identicon&r=PG", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/1000626/chris-watts"}, "edited": false, "score": 0, "creation_date": 1455918213, "post_id": 30484167, "comment_id": 58721756, "body": "Just to make sure, what are the permissions set on <code>&#47;dev&#47;watchdog</code>?"}, {"owner": {"reputation": 251, "user_id": 524844, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c80ea496781acb397f5a05e20cf31034?s=128&d=identicon&r=PG", "display_name": "beemaster", "link": "https://stackoverflow.com/users/524844/beemaster"}, "reply_to_user": {"reputation": 4859, "user_id": 1000626, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=128&d=identicon&r=PG", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/1000626/chris-watts"}, "edited": false, "score": 1, "creation_date": 1489740718, "post_id": 30484167, "comment_id": 72812716, "body": "@CJxD: I have the same issue:   crw------- 1 root root 10, 130 Mar 17 08:15 /dev/watchdog"}], "answers": [{"comments": [{"owner": {"reputation": 3618, "user_id": 999516, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd9425c01ac16523dfbe295007c2f09?s=128&d=identicon&r=PG&f=1", "display_name": "TMichel", "link": "https://stackoverflow.com/users/999516/tmichel"}, "edited": false, "score": 0, "creation_date": 1456993202, "post_id": 35766435, "comment_id": 59205273, "body": "I cannot try it right now but if it works, this is gold. Thank you very much and I&#39;ll keep you updated."}, {"owner": {"reputation": 251, "user_id": 524844, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c80ea496781acb397f5a05e20cf31034?s=128&d=identicon&r=PG", "display_name": "beemaster", "link": "https://stackoverflow.com/users/524844/beemaster"}, "reply_to_user": {"reputation": 3618, "user_id": 999516, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd9425c01ac16523dfbe295007c2f09?s=128&d=identicon&r=PG&f=1", "display_name": "TMichel", "link": "https://stackoverflow.com/users/999516/tmichel"}, "edited": false, "score": 0, "creation_date": 1489741096, "post_id": 35766435, "comment_id": 72812939, "body": "Didn&#39;t work for me: still &quot;Device or resource busy&quot;. @TMichel: do you have any progress?"}, {"owner": {"reputation": 4859, "user_id": 1000626, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=128&d=identicon&r=PG", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/1000626/chris-watts"}, "edited": false, "score": 1, "creation_date": 1489754714, "post_id": 35766435, "comment_id": 72821825, "body": "This is essentially opening up read and write permissions to everybody on the system (which is a bad idea if you care about security). If you&#39;re going to do this, do something like <code>KERNEL==&quot;watchdog&quot;, MODE=&quot;0660&quot;, GROUP=&quot;watchdog&quot;</code> and add your user to the <code>watchdog</code> group. Ideally, this should work with root though..."}, {"owner": {"reputation": 251, "user_id": 524844, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c80ea496781acb397f5a05e20cf31034?s=128&d=identicon&r=PG", "display_name": "beemaster", "link": "https://stackoverflow.com/users/524844/beemaster"}, "reply_to_user": {"reputation": 4859, "user_id": 1000626, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=128&d=identicon&r=PG", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/1000626/chris-watts"}, "edited": false, "score": 1, "creation_date": 1489759583, "post_id": 35766435, "comment_id": 72825340, "body": "@CJxD: I understand it changes the file permissions. And it does. But it doesn&#39;t help. I&#39;ve tried the very simple code in &#39;c&#39; that just opens the file:  <code>int fd = open(&quot;&#47;dev&#47;watchdog&quot;, O_WRONLY);</code> Run it from root. Got the same error. It looks like the error comes from within the &#39;open&#39; function."}], "tags": [], "owner": {"reputation": 301, "user_id": 1304837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ad770a8de4ec00412600c7da5e6781?s=128&d=identicon&r=PG", "display_name": "mozer", "link": "https://stackoverflow.com/users/1304837/mozer"}, "is_accepted": false, "score": 6, "last_activity_date": 1456992290, "creation_date": 1456992290, "answer_id": 35766435, "question_id": 30484167, "link": "https://stackoverflow.com/questions/30484167/watchdog-device-or-resource-busy/35766435#35766435", "title": "watchdog: Device or resource busy", "body": "<p>I had this problem when i worked with Raspberry Pi. My application used extensive CPU time. After 1 or 2 days work it caused the Raspberry pi hangs. So i decided to use the wtchdog. When i wanted to write watchdog device from C++ program i got same error.</p>\n\n<p>The solution that i found:</p>\n\n<p>open a new rule file\n<code>sudo nano /etc/udev/rules.d/60-watchdog.rules</code></p>\n\n<p>and add this line to the file\n<code>KERNEL==\"watchdog\", MODE=\"0666\"</code></p>\n\n<p>After this, i was able to access watchdog form terminal screen or c++ program. </p>\n"}, {"comments": [{"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "edited": false, "score": 0, "creation_date": 1591298390, "post_id": 53825667, "comment_id": 110011207, "body": "Removing the references to watchdog in <code>&#47;etc&#47;systemd&#47;system.conf</code> then rebooting, fixed the problem for me in Ubuntu 16.04.  Thank you."}], "tags": [], "owner": {"reputation": 724, "user_id": 1931185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PtIpF.jpg?s=128&g=1", "display_name": "Kelton Temby", "link": "https://stackoverflow.com/users/1931185/kelton-temby"}, "is_accepted": false, "score": 2, "last_activity_date": 1545102746, "last_edit_date": 1545102746, "creation_date": 1545100599, "answer_id": 53825667, "question_id": 30484167, "link": "https://stackoverflow.com/questions/30484167/watchdog-device-or-resource-busy/53825667#53825667", "title": "watchdog: Device or resource busy", "body": "<h3>Why the 'device or resource busy' error</h3>\n\n<p>The issue I found was that systemd and wd_keepalive seemed to be using the watchdog resource per fuser output:</p>\n\n<pre><code>&gt;sudo fuser -v /dev/watchdog\n                     USER        PID ACCESS COMMAND\n/dev/watchdog:       root      15087 F.... wd_keepalive\n</code></pre>\n\n<p>and </p>\n\n<pre><code>&gt;sudo fuser -v /dev/watchdog\n                     USER        PID ACCESS COMMAND\n/dev/watchdog:       root          1 F.... systemd\n</code></pre>\n\n<h3>Fix the Busy Error</h3>\n\n<p>I removed watchdog timer references from <code>/etc/systemd/system.conf</code> to get rid of the busy issue on the <code>systemd</code> busy system.  </p>\n\n<p>If you're feeling bold, you can kill -9 your wd_keepalive PID, then echo your character toward the <code>/dev/watchdog</code> device, if you want to manually control the watchdog.  I prefer just letting the daemon do its thing.</p>\n\n<h3>Watchdog setup that works on Pi running Stretch 12/17/18</h3>\n\n<p>Unlike some other suggestions on SO and the net, I did not need to install watchdog as a device on the Pi e.g. in <code>/boot/config.txt</code>. Nor did I need to call any services other than via systemctl.  I just ran </p>\n\n<pre><code>sudo apt-get install watchdog\nsudo update-rc.d watchdog defaults\n</code></pre>\n\n<p>Then to configure watchdog I put these lines in <code>/etc/watchdog.conf</code></p>\n\n<pre><code>watchdog-device = /dev/watchdog\n\n# Set default Timeout\nwatchdog-timeout         = 14\n</code></pre>\n\n<h3>Running Watchdog</h3>\n\n<p>Then the only thing I needed to do to use watchdog was call this from my application, which I run after bootup:</p>\n\n<pre><code>sudo systemctl enable watchdog\nsudo systemctl start watchdog\nsudo systemctl -l status watchdog\n</code></pre>\n"}], "owner": {"reputation": 3618, "user_id": 999516, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd9425c01ac16523dfbe295007c2f09?s=128&d=identicon&r=PG&f=1", "display_name": "TMichel", "link": "https://stackoverflow.com/users/999516/tmichel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7517, "favorite_count": 0, "answer_count": 2, "score": 8, "last_activity_date": 1545102746, "creation_date": 1432733849, "question_id": 30484167, "link": "https://stackoverflow.com/questions/30484167/watchdog-device-or-resource-busy", "title": "watchdog: Device or resource busy", "body": "<p>I'm trying to feed the watchdog device - <code>/dev/watchdog</code> in Raspbian - from C. </p>\n\n<p>The problem is no matter how i try to access the device always throws busy or permission denied errors (as the process is already running and being fed by the system..).</p>\n\n<p>In the <a href=\"http://www.mjmwired.net/kernel/Documentation/watchdog/watchdog-api.txt\" rel=\"noreferrer\">watchdog API</a> says that <em>'..the driver will not disable the\nwatchdog unless a specific magic character 'V' has been sent to\n /dev/watchdog just before closing the file.'</em> but then again i <strong>cannot</strong> write <code>/dev/watchdog</code>.. I tried:</p>\n\n<pre><code>echo V &gt; /dev/watchdog //bash, /dev/watchdog: Permission denied\n\nopen(\"/dev/watchdog\", O_WRONLY); //C, Device or resource busy\n</code></pre>\n\n<p>Is there any way to free the device so i can control the heartbeat from C?</p>\n"}, {"tags": ["c", "database", "oracle", "oracle-call-interface"], "answers": [{"comments": [{"owner": {"reputation": 96, "user_id": 1848553, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/UaJ5j.jpg?s=128&g=1", "display_name": "Pingwin Tux", "link": "https://stackoverflow.com/users/1848553/pingwin-tux"}, "edited": false, "score": 0, "creation_date": 1432796610, "post_id": 30489293, "comment_id": 49075303, "body": "Now I have segmentation fault."}, {"owner": {"reputation": 160176, "user_id": 266304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bdb6217d08dcea7d67ff75f5f255081?s=128&d=identicon&r=PG", "display_name": "Alex Poole", "link": "https://stackoverflow.com/users/266304/alex-poole"}, "reply_to_user": {"reputation": 96, "user_id": 1848553, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/UaJ5j.jpg?s=128&g=1", "display_name": "Pingwin Tux", "link": "https://stackoverflow.com/users/1848553/pingwin-tux"}, "edited": false, "score": 1, "creation_date": 1432799989, "post_id": 30489293, "comment_id": 49077266, "body": "@PingwinTux - I don&#39;t get a fault; I had to make some of the code up and it only seems to recognise numeric columns and gets the number wrong (<code>select 10 from dual</code> shows <code>ROW  INT 3009</code> for example), so I&#39;m doing something different anyway... Is if faulting in the code you posted or somewhere else though?"}, {"owner": {"reputation": 96, "user_id": 1848553, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/UaJ5j.jpg?s=128&g=1", "display_name": "Pingwin Tux", "link": "https://stackoverflow.com/users/1848553/pingwin-tux"}, "edited": false, "score": 0, "creation_date": 1432802142, "post_id": 30489293, "comment_id": 49078581, "body": "Indeed, segmentation fault was related with pointer to char[]. Integers don&#39;t crash but values still are wrong. It seems like pointers given to OCIDefineByPos are invalid."}, {"owner": {"reputation": 160176, "user_id": 266304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bdb6217d08dcea7d67ff75f5f255081?s=128&d=identicon&r=PG", "display_name": "Alex Poole", "link": "https://stackoverflow.com/users/266304/alex-poole"}, "reply_to_user": {"reputation": 96, "user_id": 1848553, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/UaJ5j.jpg?s=128&g=1", "display_name": "Pingwin Tux", "link": "https://stackoverflow.com/users/1848553/pingwin-tux"}, "edited": false, "score": 0, "creation_date": 1432805608, "post_id": 30489293, "comment_id": 49080997, "body": "@PingwinTux - you seem to be conflating types; SQLT_INT and SQLT_NUM aren&#39;t interchangeable. If you force the bind to use SQLT_INT (since you&#39;re binding to an int in the structure) it gets the right value. But you might not only be dealing with integers, of course. For your sigsegv, the bind for the .text field doesn&#39;t need the <code>&amp;</code>?"}, {"owner": {"reputation": 96, "user_id": 1848553, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/UaJ5j.jpg?s=128&g=1", "display_name": "Pingwin Tux", "link": "https://stackoverflow.com/users/1848553/pingwin-tux"}, "edited": false, "score": 0, "creation_date": 1432816065, "post_id": 30489293, "comment_id": 49088628, "body": "Now I have correct numbers.So, should I have   status = OCIDefineByPos(statementHandler, &amp;defnp, errhp, a+1, (dvoid *)(columns[a].text), (sword) columns[a].argSize, colTypes[a], (dvoid *) 0, (ub2 *) 0, (ub2 *) 0, OCI_DEFAULT);    for type char[512]?"}, {"owner": {"reputation": 96, "user_id": 1848553, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/UaJ5j.jpg?s=128&g=1", "display_name": "Pingwin Tux", "link": "https://stackoverflow.com/users/1848553/pingwin-tux"}, "edited": false, "score": 0, "creation_date": 1432816571, "post_id": 30489293, "comment_id": 49089064, "body": "OK, now everything works fine. Thank you for patience and help."}], "tags": [], "owner": {"reputation": 160176, "user_id": 266304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bdb6217d08dcea7d67ff75f5f255081?s=128&d=identicon&r=PG", "display_name": "Alex Poole", "link": "https://stackoverflow.com/users/266304/alex-poole"}, "is_accepted": false, "score": 1, "last_activity_date": 1432747577, "creation_date": 1432747577, "answer_id": 30489293, "question_id": 30484087, "link": "https://stackoverflow.com/questions/30484087/error-define-not-done-before-fetch-or-execute-and-fetch/30489293#30489293", "title": "ERROR: Define not done before fetch or execute and fetch", "body": "<p>You need to move this line:</p>\n\n<pre><code>status = OCIStmtPrepare(statementHandler, errhp, statement, (ub4) strlen((char *) statement), (ub4)OCI_NTV_SYNTAX, (ub4) OCI_DEFAULT);\n</code></pre>\n\n<p>... to before you start calling <code>OCIDefineByPos(statementHandler, ...)</code>.</p>\n\n<p>It could be the first OCI call in <code>executeStatement</code> really, before you do anything with <code>structureHandler</code>. But it needs to be before the <code>for (int a = 0; a &lt; numcols; ++a)</code> loop, anyway.</p>\n\n<p>I believe the order wasn't enforced as strongly in earlier releases (9i and before?), but now you have to prepare before you can define the bind variables.</p>\n"}], "owner": {"reputation": 96, "user_id": 1848553, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/UaJ5j.jpg?s=128&g=1", "display_name": "Pingwin Tux", "link": "https://stackoverflow.com/users/1848553/pingwin-tux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1144, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432747577, "creation_date": 1432733660, "last_edit_date": 1432733687, "question_id": 30484087, "link": "https://stackoverflow.com/questions/30484087/error-define-not-done-before-fetch-or-execute-and-fetch", "title": "ERROR: Define not done before fetch or execute and fetch", "body": "<p>My application receive query from external source (config file), so that it have to obtain columns from query result. I have some piece of code:</p>\n\n<pre><code>typedef union _DbField {\n    text text[512];\n    sword integer;\n    double precise;\n} DbField;\n\ntypedef struct _Arg {\n    size_t argSize;\n    DbField field;\n} Arg;\nOCIEnv *envhp;\nOCISession *authp = (OCISession *) 0;\nOCIError *errhp;\nOCISvcCtx *svchp;\nOCIServer *srvhp;\nOCIStmt *statementHandler;\nOCIDefine *defnp = (OCIDefine *) 0;\nsword status;\n\n...\n\n//int main()\n\n    status = OCIEnvCreate((OCIEnv **) &amp;envhp, (ub4) OCI_DEFAULT, (dvoid *) 0,\n            (dvoid * (*)(dvoid *, size_t)) 0, (dvoid * (*)(dvoid *, dvoid *, size_t)) 0,\n            (void (*)(dvoid *, dvoid *)) 0, (size_t) 0, (dvoid **) 0);\n\n    checkError(0, __LINE__);\n\n    status = OCIHandleAlloc((dvoid *) envhp, (dvoid **) &amp;errhp, OCI_HTYPE_ERROR, (size_t) 0,\n            (dvoid **) 0);\n    checkError(0, __LINE__);\n\n    status = OCIHandleAlloc((dvoid *) envhp, (dvoid **) &amp;srvhp, OCI_HTYPE_SERVER, (size_t) 0,\n            (dvoid **) 0);\n    checkError(0, __LINE__);\n\n    status = OCIHandleAlloc((dvoid *) envhp, (dvoid **) &amp;svchp, OCI_HTYPE_SVCCTX, (size_t) 0,\n            (dvoid **) 0);\n    checkError(0, __LINE__);\n\n    status = OCIHandleAlloc((dvoid *) envhp, (dvoid **) &amp;statementHandler, OCI_HTYPE_STMT,\n            (size_t) 0, (dvoid **) 0);\n    checkError(0, __LINE__);\n\n    status = OCIServerAttach(srvhp, errhp, (text *) connection-&gt;dbName, (sb4) strlen((char *) connection-&gt;dbName), 0);\n    status = OCIServerAttach(srvhp, errhp, (text *) \"\", (sb4) strlen((char *) \"\"), 0);\n    checkError(0, __LINE__);\n\n    status = OCIAttrSet((dvoid *) svchp, OCI_HTYPE_SVCCTX, (dvoid *) srvhp, (ub4) 0,\n    OCI_ATTR_SERVER, (OCIError *) errhp);\n    if (status != 0) {\n        printf(\"HANDLER ERROR %d !!!\\n\\n\", status);\n        exit(2);\n    }\n\n    (void) OCIHandleAlloc((dvoid *) envhp, (dvoid **) &amp;authp, (ub4) OCI_HTYPE_SESSION,\n            (size_t) 0, (dvoid **) 0);\n\n    (void) OCIAttrSet((dvoid *) authp, (ub4) OCI_HTYPE_SESSION, (dvoid *) connection-&gt;userName,\n            (ub4) strlen((char *) connection-&gt;userName), (ub4) OCI_ATTR_USERNAME, errhp);\n\n    (void) OCIAttrSet((dvoid *) authp, (ub4) OCI_HTYPE_SESSION,\n            (dvoid *) connection-&gt;userPassword,\n            (ub4) strlen((char *) connection-&gt;userPassword), (ub4) OCI_ATTR_PASSWORD, errhp);\n\n    status = OCISessionBegin(svchp, errhp, authp, OCI_CRED_RDBMS, (ub4) OCI_DEFAULT);\n\n    (void) OCIAttrSet((dvoid *) svchp, (ub4) OCI_HTYPE_SVCCTX, (dvoid *) authp, (ub4) 0,\n            (ub4) OCI_ATTR_SESSION, errhp);\n    errhp, OCIHandleAlloc((dvoid *) envhp, (dvoid **) &amp;statementHandler, OCI_HTYPE_STMT,\n            (size_t) 0, (dvoid **) 0);\n\n    executeStatement(\"SELECT * FROM logs order by log_id\");\n\n\n//end of int main()\n\nstatic inline sword executeStatement(char *statement) {\n    int rowsFetched = 0;\n    int forSecond = 0;\n    ub4 numcols = 0;\n    ub2 dtype = 0;\n    OCIStmt *structureHandler;\n    OCIParam *colhd = (OCIParam *) 0;\n    char *statementCopy = malloc(strlen(statement));\n    memcpy(statementCopy, statement, strlen(statement));\n\n    status = OCIHandleAlloc((dvoid *) envhp, (dvoid **) &amp;structureHandler, OCI_HTYPE_STMT, (size_t) 0, (dvoid **) 0);\n    checkError(1, __LINE__);\n\n    status = OCIStmtPrepare(structureHandler, errhp, statementCopy, (ub4) strlen((char *) statement), (ub4)OCI_NTV_SYNTAX, (ub4) OCI_NO_SHARING);\n    checkError(1, __LINE__);\n    status = OCIStmtExecute(svchp, structureHandler, errhp, (ub4) 1, (ub4) 0,(const OCISnapshot *) NULL, (OCISnapshot *) NULL, (ub4) OCI_DESCRIBE_ONLY);\n    checkError(1, __LINE__);\n    OCIAttrGet((dvoid *)structureHandler, OCI_HTYPE_STMT, (dvoid *)&amp;numcols, (ub4 *)0, OCI_ATTR_PARAM_COUNT, errhp);\n    ub2 colTypes[numcols];\n    Arg columns[numcols];\n    for (int a = 0; a &lt; numcols; ++a) {\n        OCIParamGet((dvoid *)structureHandler, OCI_HTYPE_STMT, errhp, (dvoid **)&amp;colhd, a+1);\n        OCIAttrGet((dvoid *)colhd, OCI_DTYPE_PARAM,(dvoid *)&amp;dtype, (ub4 *)0, OCI_ATTR_DATA_TYPE, errhp);\n        colTypes[a] = dtype;\n        printf(\"Coltype %d\\t\\t\", colTypes[a]);\n        if (colTypes[a] == SQLT_INT || colTypes[a] == SQLT_NUM) {\n            columns[a].argSize = sizeof(int);\n            printf(\"Param is %d INT, size %d \", a, columns[a].argSize);\n            status = OCIDefineByPos(statementHandler, &amp;defnp, errhp, a+1, (dvoid *)&amp;(columns[a].field.integer), (sword) columns[a].argSize, colTypes[a], (dvoid *) 0, (ub2 *) 0, (ub2 *) 0, OCI_DEFAULT);\n            if (status == 0) {\n                printf(\"Param %d bind OK\\n\", a+1);\n            } else {\n                printf(\"Binding %d param caused error!!!\\n\", a+1);\n            }\n            fflush(stdout);\n        } else if (colTypes[a] == SQLT_STR || colTypes[a] == SQLT_CLOB) {\n            columns[a].argSize = sizeof(char)*1024;\n            status = OCIDefineByPos(statementHandler, &amp;defnp, errhp, a+1, (dvoid *)&amp;(columns[a].field.text), (sword) columns[a].argSize, colTypes[a], (dvoid *) 0, (ub2 *) 0, (ub2 *) 0, OCI_DEFAULT);\n            printf(\"Param is %d STR, size %d \", a, columns[a].argSize);\n            if (status == 0) {\n                printf(\"Param %d bind OK\\n\", a+1);\n            } else {\n                printf(\"Binding %d param caused error!!!\\n\", a+1);\n            }\n            fflush(stdout);\n        } else if (colTypes[a] == SQLT_TIMESTAMP) {\n            columns[a].argSize = sizeof(char)*768;\n            status = OCIDefineByPos(statementHandler, &amp;defnp, errhp, a+1, (dvoid *)&amp;(columns[a].field.text), (sword) columns[a].argSize, colTypes[a], (dvoid *) 0, (ub2 *) 0, (ub2 *) 0, OCI_DEFAULT);\n            printf(\"Param is %d TIMESTAMP, size %d \", a, columns[a].argSize);\n            if (status == 0) {\n                printf(\"Param %d bind OK\\n\", a+1);\n            } else {\n                printf(\"Binding %d param caused error!!!\\n\", a+1);\n            }\n            fflush(stdout);\n        } else {\n            //Other types are not needed for me right now\n            perror(\"Invalid column type\\n\\n\");\n            printf(\"Other type for [%d]: %d\\n\", a, colTypes[a]);\n            fflush(stdout);\n            exit(3);\n        }\n\n    }\n\n    status = OCIStmtPrepare(statementHandler, errhp, statement, (ub4) strlen((char *) statement), (ub4)OCI_NTV_SYNTAX, (ub4) OCI_DEFAULT);\n    checkError(0, __LINE__);\n    //ERROR IN LINE ABOVE\n    status = OCIStmtExecute(svchp, statementHandler, errhp, (ub4) 1, (ub4) 0,(const OCISnapshot *) NULL, (OCISnapshot *) NULL, (ub4) OCI_DEFAULT);\n    checkError(0, __LINE__);\n\n    status = OCIAttrGet(statementHandler, OCI_HTYPE_STMT, (void*)&amp;rowsFetched, NULL, OCI_ATTR_ROWS_FETCHED, errhp);\n    printf(\"Total rows: %d, status %d.\\n\", rowsFetched, status);\n\n    if (rowsFetched == 0) {\n        printf(\"No data!\\n\");\n        return OCI_NO_DATA;\n    }\n\n    do {\n        printf(\"ROW \");\n        for (int a = 0; a &lt; numcols; ++a) {\n            if (colTypes[a] == SQLT_INT || colTypes[a] == SQLT_NUM) {\n                printf(\" INT %d\", columns[a].field.integer);\n            } else if (colTypes[a] == SQLT_STR || colTypes[a] == SQLT_CLOB) {\n                printf(\" TXT %s\", columns[a].field.text);\n            } else if (colTypes[a] == SQLT_TIMESTAMP) {\n                printf(\" TIMESTAMP %s\", columns[a].field.text);\n            } else {\n                perror(\"Invalid column type\\n\\n\");\n                printf(\"Other type for [%d]: %d\\n\", a, colTypes[a]);\n                fflush(stdout);\n                exit(3);\n            }\n        }\n        printf(\"\\n\");\n        status = OCIStmtFetch2(statementHandler, errhp, 1, OCI_DEFAULT, (sb4) 1, OCI_DEFAULT);\n    } while (status != OCI_NO_DATA &amp;&amp; status != OCI_ERROR);\n\n    return OCI_SUCCESS;\n}\n</code></pre>\n\n<p>This code in marked line causes error ORA-24374: define not done before fetch or executeand fetch. My application says that columns count is matching to query and binding is OK. I have no idea what to do.</p>\n"}, {"tags": ["c++", "c", "multiplication", "negative-number"], "comments": [{"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1432732623, "post_id": 30483535, "comment_id": 49045774, "body": "I would imagine that <code>x*= -1</code> would actually need to perform the multiplication of the binary representation of <code>x</code>, so O(n) where n is the number of bits of the input. <code>x = -x</code> would probably simply swap the signed bit: O(1). In reality, would a compiler optimize it? Probably so."}, {"owner": {"reputation": 18677, "user_id": 3458744, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/t3fM8.jpg?s=128&g=1", "display_name": "Mike Wise", "link": "https://stackoverflow.com/users/3458744/mike-wise"}, "edited": false, "score": 4, "creation_date": 1432732686, "post_id": 30483535, "comment_id": 49045833, "body": "I would expect it to be completely compiler dependent."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1432732714, "post_id": 30483535, "comment_id": 49045865, "body": "Compiler may generate same or different instructions for both cases. Functionally both are same after different language rules. So choose the one that is more readable for you."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 3, "creation_date": 1432732798, "post_id": 30483535, "comment_id": 49045932, "body": "Also, I don&#39;t think this is a duplicate. OP is asking about difference -- not about which is more efficient. Can someone with higher reputation unmark?"}, {"owner": {"reputation": 63704, "user_id": 201863, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/996952de195a8bc83b2421e49a754e7d?s=128&d=identicon&r=PG", "display_name": "LearnCocos2D", "link": "https://stackoverflow.com/users/201863/learncocos2d"}, "edited": false, "score": 0, "creation_date": 1432733327, "post_id": 30483535, "comment_id": 49046372, "body": "I understand the implications of float math and rounding errors but I&#39;m not that interested in equality, rather if there&#39;s some other reason to prefer multiplication. Ie cases where -f creates a fundamentally different value than *-1.0."}, {"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1432733582, "post_id": 30483535, "comment_id": 49046562, "body": "I think that is always better to keep in mind the idea to not demand all to the compiler. If you know that an addition has a faster execution than a multiplication why  do you have to use a multiplication? In this case a change of sign is for sure faster than a multiplication. Probably the compiler knows that, but ... :)"}, {"owner": {"reputation": 1232, "user_id": 4847772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd5efa4bdec75631678b36842fea7c5a?s=128&d=identicon&r=PG&f=1", "display_name": "PJTraill", "link": "https://stackoverflow.com/users/4847772/pjtraill"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1432736740, "post_id": 30483535, "comment_id": 49049135, "body": "@erip: Amusing point, which probably only applies to multiple-precision arithmetic libraries. After all, normal hardware will probably negate a standard-size integer in a single instruction."}, {"owner": {"reputation": 1232, "user_id": 4847772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd5efa4bdec75631678b36842fea7c5a?s=128&d=identicon&r=PG&f=1", "display_name": "PJTraill", "link": "https://stackoverflow.com/users/4847772/pjtraill"}, "edited": false, "score": 1, "creation_date": 1432737135, "post_id": 30483535, "comment_id": 49049493, "body": "One reason for the <code>*= -1</code> idiom could be that it also applies when the left hand side is complex and has side-effects: <code>(f ? a : b)[prime_after(i++)] *= -1</code> or a little more plausibly: <code>parity[state][getc()] *= -1</code> or even simply <code>variable_with_a_long_explanatory_name *= -1</code>. And once one has adopted an idiom, one tends to stick with it in other situations."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1432740934, "post_id": 30483535, "comment_id": 49052472, "body": "I don&#39;t think floating point rounding errors will apply in this case, the result will always be exact. I even did a test against infinity, it behaved as expected: <a href=\"http://ideone.com/ZZkXjF\" rel=\"nofollow noreferrer\">ideone.com/ZZkXjF</a>. A good optimizing compiler should realize that these are the same operation and generate the same code for both cases, so speed won&#39;t be an issue either."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1432747416, "post_id": 30483535, "comment_id": 49056634, "body": "@erip: amusing point, but only the original close voter can retract his vote. It seems that happened here, but really it depends on (1) the close-voter revisiting the question, and (2) the close-voter changing his opinion, based on a question edit or a discussion."}], "answers": [{"tags": [], "owner": {"reputation": 1232, "user_id": 4847772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd5efa4bdec75631678b36842fea7c5a?s=128&d=identicon&r=PG&f=1", "display_name": "PJTraill", "link": "https://stackoverflow.com/users/4847772/pjtraill"}, "is_accepted": false, "score": 6, "last_activity_date": 1432741830, "last_edit_date": 1495540715, "creation_date": 1432741830, "answer_id": 30487350, "question_id": 30483535, "link": "https://stackoverflow.com/questions/30483535/is-there-a-functional-difference-between-x-x-and-x-1-when-negating-va/30487350#30487350", "title": "Is there a functional difference between &quot;x = -x&quot; and &quot;x *= -1&quot; when negating values?", "body": "<p><em>Based on my answer to \u201c<a href=\"https://stackoverflow.com/questions/15111466/fastest-way-to-negate-a-number\">fastest-way-to-negate-a-number</a>\u201d</em></p>\n\n<h3>Speed</h3>\n\n<p>The answers to a <a href=\"https://stackoverflow.com/questions/15111466/fastest-way-to-negate-a-number\">similar question</a> have indicated that:</p>\n\n<ul>\n<li>You should forget about speed and choose the idiom that you find most readable.</li>\n<li>Almost all compilers generate equivalent optimal code (probably a single instruction) for anything like <code>a = -a</code>, <code>a *= -1</code> etc.\n\n<ul>\n<li>But though MSVS 2012 (optimised?) uses one instruction for each, they take 1 cycle for <code>= -a</code> and 3 for <code>*= -1</code>.</li>\n</ul></li>\n<li>Any attempt to make it faster will make it far less readable and could easily make it slower.</li>\n<li>If you need to optimise, you should start by analysing generated code and performance.</li>\n</ul>\n\n<h3>Side-effects and irredundancy</h3>\n\n<p>There is however a practical advantage to the <code>*= -1</code> idiom: you only have to write the left hand side once, and it is only evaluated once. This is relevant when the LHS is long, complex or expensive or may have side-effects:</p>\n\n<pre><code>(valid ? a : b)[prime_after(i++)] *= -1;\n*look_up (input) *= -1;  // Where look_up may have side-effects\nparity[state][(unsigned int)getc(stdin)] *= -1;\nvariable_with_a_long_explanatory_name *= -1;\n</code></pre>\n\n<p>A further advantage of this irredundancy is that when seeking a bug one can be certain that the number really is being negated <em>in situ</em>, and that there is no subtle difference in the two expressions.</p>\n\n<p>Once one has adopted an idiom, one tends to stick with it in other situations, so it is understandable to stick to <code>*= -1</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 63704, "user_id": 201863, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/996952de195a8bc83b2421e49a754e7d?s=128&d=identicon&r=PG", "display_name": "LearnCocos2D", "link": "https://stackoverflow.com/users/201863/learncocos2d"}, "edited": false, "score": 1, "creation_date": 1432920104, "post_id": 30488150, "comment_id": 49144636, "body": "thanks for historical context, this probably best explains the bias towards *= -1"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1432744747, "last_edit_date": 1432744747, "creation_date": 1432743993, "answer_id": 30488150, "question_id": 30483535, "link": "https://stackoverflow.com/questions/30483535/is-there-a-functional-difference-between-x-x-and-x-1-when-negating-va/30488150#30488150", "title": "Is there a functional difference between &quot;x = -x&quot; and &quot;x *= -1&quot; when negating values?", "body": "<p>Recommend to use what explains the code best, unless one is working with an old platform or compiler.  In that case, use negation.</p>\n\n<p>Following are some obscure differences:</p>\n\n<p><code>int</code> format with non-2's complement:<br>\nIn days of yore, a multiplication by of <code>0</code> and <code>-1</code> could result in <code>0</code> yet a negation of <code>0</code> could result in <code>-0</code>. Of course <code>0</code> and <code>-0</code> have the same <em>value</em>, yet different signs.  Not all non-2's complement machines worked the same concerning this.</p>\n\n<p>Floating Point:<br>\nSpeed: A smart compiler will create efficient and likely the same code for <code>f *= -1.0f</code> and <code>f *= -f</code>.  Yet a lesser compiler may not identify this equivalence and perform one slower than the other.</p>\n\n<p>Rounding: A negation need not invoke any rounding, yet a multiplication, even by 1.0, can involve a round. This happens in 2 cases: when the variables are of a higher precision (allowed in modern C, <code>FLT_EVAL_METHOD</code>) and in machines (more like relics) that performed their FP using base-16 rather than base-2.  In this latter case, the precision wobbles (e.g <a href=\"http://en.wikipedia.org/wiki/IBM_Floating_Point_Architecture\" rel=\"nofollow\">IBM Floating Point</a>) and a simple multiplication would present a rounded product.  This behavior is uncommon these days.</p>\n\n<p>There also exist FP formats that have multiple representations for the same value, but a multiplication by 1 would return the preferred format, whereas negation would simply flip the sign bit.  The results are the same <em>value</em>, but different bit patterns of the FP number.</p>\n"}], "owner": {"reputation": 63704, "user_id": 201863, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/996952de195a8bc83b2421e49a754e7d?s=128&d=identicon&r=PG", "display_name": "LearnCocos2D", "link": "https://stackoverflow.com/users/201863/learncocos2d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 1, "accepted_answer_id": 30488150, "answer_count": 2, "score": 9, "last_activity_date": 1432744747, "creation_date": 1432732332, "question_id": 30483535, "link": "https://stackoverflow.com/questions/30483535/is-there-a-functional-difference-between-x-x-and-x-1-when-negating-va", "title": "Is there a functional difference between &quot;x = -x&quot; and &quot;x *= -1&quot; when negating values?", "body": "<p>Code example:</p>\n\n<pre><code>float f = 123.456;\nint i = 12345;\n// negate by changing sign\ni = -i;\nf = -f;\n// negate by multiplying with -1\ni *= -1;\nf *= -1.0f;\n</code></pre>\n\n<p>Apart from aesthetics, is there any factual reason why one should prefer one way over the other?</p>\n\n<p>To me multiplication seems a little unnecessary. But I see the multiplication style more often, and wanted to hear if there's a good reason for it, besides preference.</p>\n"}, {"tags": ["c", "oracle-pro-c"], "answers": [{"comments": [{"owner": {"reputation": 398, "user_id": 1652132, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/641e5b61d8cfb1d10dae51deac9a525c?s=128&d=identicon&r=PG", "display_name": "Dax", "link": "https://stackoverflow.com/users/1652132/dax"}, "edited": false, "score": 0, "creation_date": 1432732190, "post_id": 30483297, "comment_id": 49045445, "body": "Hi! thanks for your quick reply. what do you mean by something((*s_no)[i]); ?! I have  insert into table_1(col1)   values(x);  what is x?!"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "reply_to_user": {"reputation": 398, "user_id": 1652132, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/641e5b61d8cfb1d10dae51deac9a525c?s=128&d=identicon&r=PG", "display_name": "Dax", "link": "https://stackoverflow.com/users/1652132/dax"}, "edited": false, "score": 0, "creation_date": 1432732450, "post_id": 30483297, "comment_id": 49045646, "body": "<code>(*s_no)[i]</code> is the value at index <code>i</code> in your array."}, {"owner": {"reputation": 398, "user_id": 1652132, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/641e5b61d8cfb1d10dae51deac9a525c?s=128&d=identicon&r=PG", "display_name": "Dax", "link": "https://stackoverflow.com/users/1652132/dax"}, "edited": false, "score": 0, "creation_date": 1432732578, "post_id": 30483297, "comment_id": 49045740, "body": "but how can I insert it into table_1?! can I say int   x; then for (int i = 0; ....; i++) {   strcpy(x,((*s_no)[i]);  exec sql insert into table_1 (col1) values(x); }"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "reply_to_user": {"reputation": 398, "user_id": 1652132, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/641e5b61d8cfb1d10dae51deac9a525c?s=128&d=identicon&r=PG", "display_name": "Dax", "link": "https://stackoverflow.com/users/1652132/dax"}, "edited": false, "score": 0, "creation_date": 1432733568, "post_id": 30483297, "comment_id": 49046555, "body": "@Dax I was wrong in my assumptions, I edited my answer and I hope it suits your problem better."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1432740328, "post_id": 30483297, "comment_id": 49052003, "body": "I wonder if this would work for the &quot;scattered&quot; array described <code>char (*s_no)[100]</code>."}], "tags": [], "owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "is_accepted": false, "score": 2, "last_activity_date": 1432733993, "last_edit_date": 1432733993, "creation_date": 1432731728, "answer_id": 30483297, "question_id": 30483258, "link": "https://stackoverflow.com/questions/30483258/how-can-i-use-the-passed-pointer-to-an-array-of-characters/30483297#30483297", "title": "How can I use the passed pointer to an array of characters?", "body": "<p>If <code>s_no</code> is of type <code>char (*)[100]</code> then <code>s_no[i]</code> is of type <code>char*</code>.  </p>\n\n<p>To insert it as an array you can use <a href=\"http://docs.oracle.com/cd/B28359_01/appdev.111/b28427/pc_08arr.htm#i1874\" rel=\"nofollow\">Host arrays</a>:</p>\n\n<blockquote>\n  <p>You can use host arrays as input variables in an INSERT statement.\n  Just make sure your program populates the arrays with data before\n  executing the INSERT statement.</p>\n  \n  <p>If some elements in the arrays are irrelevant, you can use the FOR\n  clause to control the number of rows inserted. See also \"Using the FOR\n  Clause\".</p>\n  \n  <p>An example of inserting with host arrays follows:</p>\n\n<pre><code>char   emp_name[50][20];\nint    emp_number[50];  float  salary[50]; \n/* populate the host arrays */  \n   EXEC SQL INSERT INTO EMP (ENAME, EMPNO, SAL) \n    VALUES (:emp_name, :emp_number, :salary);\n</code></pre>\n</blockquote>\n\n<p>(From docs.oracle.com on PRO*C)</p>\n\n<p>So here I think you can simply use :</p>\n\n<pre><code>values (:s_no )\n</code></pre>\n\n<p>If that doesn't work it means you have to specify a size of your string (I'd think you should because your columns are not infinite in size)</p>\n"}], "owner": {"reputation": 398, "user_id": 1652132, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/641e5b61d8cfb1d10dae51deac9a525c?s=128&d=identicon&r=PG", "display_name": "Dax", "link": "https://stackoverflow.com/users/1652132/dax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1432733993, "creation_date": 1432731617, "last_edit_date": 1432731670, "question_id": 30483258, "link": "https://stackoverflow.com/questions/30483258/how-can-i-use-the-passed-pointer-to-an-array-of-characters", "title": "How can I use the passed pointer to an array of characters?", "body": "<p>I am biginner in C and PRO*C and need some help. I have a structure as below:</p>\n\n<pre><code>typedef struct pt_st{\n   char (*s_no)[100];\n   char (*s)[100];\n} pt_st;\n</code></pre>\n\n<p>have a function like c_info which calls post function:</p>\n\n<pre><code>int c_info(pt_st ir_st)\n{\n  int   li_result = 0;\n  li_result = post(ir_st.s_no)\n} \n</code></pre>\n\n<p>and post function is :</p>\n\n<pre><code>int post(char (*s_no)[100])\n{\n  EXEC SQL FOR 100\n  insert into table_1(col1)\n  values(values from the array); //I want to read one value each time in the loop and insert\n}\n</code></pre>\n\n<p>What should \"values from the array\" be?!</p>\n\n<p>Many thanks!</p>\n"}, {"tags": ["c", "pointers", "parameters", "reference", "dereference"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 4, "creation_date": 1432731703, "post_id": 30483253, "comment_id": 49045050, "body": "This is C++ reference"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 4, "creation_date": 1432731779, "post_id": 30483253, "comment_id": 49045114, "body": "This is illegal in C. You must be looking at C++ code and not realize it."}, {"owner": {"reputation": 1697, "user_id": 3395831, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76732996d10182885b6ac1046e13c95?s=128&d=identicon&r=PG&f=1", "display_name": "Utku", "link": "https://stackoverflow.com/users/3395831/utku"}, "edited": false, "score": 0, "creation_date": 1432731837, "post_id": 30483253, "comment_id": 49045180, "body": "Then what is their difference in C++?"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 1, "creation_date": 1432731959, "post_id": 30483253, "comment_id": 49045266, "body": "You can think of a reference as <code>an automatically dereferenced constant pointer</code>, so it almost looks like the copy of variable itself. You can read more about reference in any basic C++ book."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1432731695, "last_edit_date": 1495541665, "creation_date": 1432731695, "answer_id": 30483284, "question_id": 30483253, "link": "https://stackoverflow.com/questions/30483253/what-is-the-difference-between-and-in-function-parameters/30483284#30483284", "title": "What is the difference between * and &amp; in function parameters?", "body": "<p>A syntax like <code>A_struct &amp;var</code> is not valid in context of <code>C</code>.</p>\n\n<p>It is used in case of <code>C++</code> to denote <em>pass-by-reference</em>.</p>\n\n<p>Related: See <a href=\"https://stackoverflow.com/q/334856/2173917\">this question</a> and related answers for more details.</p>\n"}, {"tags": [], "owner": {"reputation": 428, "user_id": 2652091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/046pf.png?s=128&g=1", "display_name": "Subinoy", "link": "https://stackoverflow.com/users/2652091/subinoy"}, "is_accepted": true, "score": 1, "last_activity_date": 1432732330, "creation_date": 1432732330, "answer_id": 30483533, "question_id": 30483253, "link": "https://stackoverflow.com/questions/30483253/what-is-the-difference-between-and-in-function-parameters/30483533#30483533", "title": "What is the difference between * and &amp; in function parameters?", "body": "<p>Your question is actually related to <code>C++</code></p>\n\n<p><code>void function(A_struct &amp;var)</code> is not valid for <code>C</code> because in <code>C</code> it is used to get an address of a variable. In <code>C++</code> it is a type of variable which is known as <code>reference</code>. You can see an example of it in <a href=\"http://www.hermetic.ch/cfunlib/ast_amp2.htm\" rel=\"nofollow\">here</a></p>\n\n<p><code>void function(A_struct *var)</code> is allowed in <code>C</code> and <code>C++</code>, because is a pointer which holds the address of <code>A_struct</code> type variable's address.</p>\n"}], "owner": {"reputation": 1697, "user_id": 3395831, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76732996d10182885b6ac1046e13c95?s=128&d=identicon&r=PG&f=1", "display_name": "Utku", "link": "https://stackoverflow.com/users/3395831/utku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 30483533, "answer_count": 2, "score": -4, "last_activity_date": 1432732330, "creation_date": 1432731611, "last_edit_date": 1432732018, "question_id": 30483253, "link": "https://stackoverflow.com/questions/30483253/what-is-the-difference-between-and-in-function-parameters", "title": "What is the difference between * and &amp; in function parameters?", "body": "<p>I have seen something in this form:</p>\n\n<pre><code>void function( A_struct &amp;var ) {\n   var.field0 = 0;\n   // ...\n}\n</code></pre>\n\n<p>Since there is <code>&amp;</code> before <code>var</code>, I thought that <code>var</code> is a pointer. But in the body, instead of writing <code>var-&gt;field0</code>, <code>var.field0</code> is written. So, my questions are:</p>\n\n<ol>\n<li><p>Isn't <code>var</code> a pointer?</p></li>\n<li><p>What is the difference between writing <code>A_struct &amp;var</code> and <code>A_struct *var</code> in function parameter?</p></li>\n</ol>\n"}, {"tags": ["c", "arrays", "memset"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 5, "creation_date": 1432730926, "post_id": 30482898, "comment_id": 49044418, "body": "no, they aren&#39;t. the second one doesn&#39;t compile."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1432730952, "post_id": 30482898, "comment_id": 49044441, "body": "@TheParamagneticCroissant , The <code>memset</code> is useless isn&#39;t it?"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1432731091, "post_id": 30482898, "comment_id": 49044552, "body": "@CoolGuy memset&#39;s 3rd parameter is the number of bytes to write, and not a pointer. if the <code>NULL</code> pointer constant happens to be 0 on OP&#39;s platform, <b>and</b> the compiler doesn&#39;t choke on the implicit pointer-to-integer conversion, then the <code>memset()</code> is ineffective and the variable is left uninitialized."}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1432731240, "post_id": 30482898, "comment_id": 49044672, "body": "Related: <a href=\"http://stackoverflow.com/questions/14031727/what-is-the-difference-between-struct-0-and-memset-0/14031737#14031737\">what is the difference between struct {0} and memset 0</a>"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 5, "creation_date": 1432731297, "post_id": 30482898, "comment_id": 49044714, "body": "Rolled back to original question. Let&#39;s not put our own words into OP&#39;s mouth."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 4, "creation_date": 1432731712, "post_id": 30482898, "comment_id": 49045055, "body": "@TheParamagneticCroissant the null pointer constant <i>must</i> be <code>0</code>, or an ICE that evaluates to <code>0</code>, optionally cast to <code>(void *)</code>.  So this code is either ill-formed, or sets zero bytes."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1432733332, "post_id": 30482898, "comment_id": 49046376, "body": "@MattMcNabb The null pointer constant, when converted to an integral type, may not have the numeric value zero. (in fact, since all pointer-to-integer conversions are implementation defined, it may have any value which, when converted back to a pointer, yields a null pointer.)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 1, "creation_date": 1432734362, "post_id": 30482898, "comment_id": 49047186, "body": "@TheParamagneticCroissant Rephrasing as it was apparently unclear. There are two cases of null pointer constant: (a) an ICE evaluating to <code>0</code>,  (b) an ICE evaluating to <code>0</code> which is then cast to <code>(void *)</code>. (6.3.2.3/3).  In case (a) it <i>must</i> have value zero. Since it is of integral type already, &quot;converted to integral type&quot; makes no change. In case (b), the <code>memset</code> is ill-formed because a pointer is not implicitly convertable to <code>int</code>."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1432751232, "post_id": 30482898, "comment_id": 49058756, "body": "@MattMcNabb I think we are talking about different issues. Obtaining a null pointer from a null pointer constant does need to be done using an integral constant of value 0. The representation of pointers and pointer-to-integer conversions, however, are implementation-defined. Thus, the value obtained by converting <i>any</i> pointer (including the null pointer) to an integer is implementation-defined. Put differently, you muse use <code>0</code> (and co.) in a pointer context in order to acquire a null pointer, but <code>(int)NULL</code> may not have the numeric value 0."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1432751860, "post_id": 30482898, "comment_id": 49059111, "body": "@MattMcNabb <a href=\"https://stackoverflow.com/questions/15429372/typecasting-null-pointer-in-c\">(see this answer in particular.)</a> (and yes, I do realize that this is not true when <code>NULL</code> is simply an integral constant of value 0 <i>without</i> an explicit cast to <code>void *</code>. I&#39;m addressing the case when its definition includes a cast.)"}], "answers": [{"comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 4, "creation_date": 1432731136, "post_id": 30483016, "comment_id": 49044585, "body": "in the second example, <code>var</code> is not initialized to zeros. it <b>could</b> be <b>set</b> to all zeros, <b>if</b> OP wrote the correct code for that."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1432731177, "post_id": 30483016, "comment_id": 49044619, "body": "@TheParamagneticCroissant You are right, corrected."}, {"owner": {"reputation": 17586, "user_id": 3482140, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/lSFth.jpg?s=128&g=1", "display_name": "Am_I_Helpful", "link": "https://stackoverflow.com/users/3482140/am-i-helpful"}, "edited": false, "score": 2, "creation_date": 1432731288, "post_id": 30483016, "comment_id": 49044710, "body": "Why did you change OP&#39;s code for your own purpose? It&#39;s strictly No-No here on SO. You should have explained clearly that point in your answer."}, {"owner": {"reputation": 1878, "user_id": 2588499, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/a774cbfdbf028557b13027b6ec42cccf?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/2588499/arun"}, "edited": false, "score": 0, "creation_date": 1432731432, "post_id": 30483016, "comment_id": 49044824, "body": "What will happen if I assign some value to it. i.e. more than 1 byte? eg: strcpy(var, &quot;some value&quot;);"}, {"owner": {"reputation": 1878, "user_id": 2588499, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/a774cbfdbf028557b13027b6ec42cccf?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/2588499/arun"}, "edited": false, "score": 0, "creation_date": 1432731615, "post_id": 30483016, "comment_id": 49044961, "body": "int main() { \tchar value[] = {0}; \tdouble dVal = 234.576; \tsprintf(value, &quot;%f&quot;, dVal); \tstrcat(value, &quot;appending some test here&quot;); \t..... \t..... }"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 1878, "user_id": 2588499, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/a774cbfdbf028557b13027b6ec42cccf?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/2588499/arun"}, "edited": false, "score": 1, "creation_date": 1432731828, "post_id": 30483016, "comment_id": 49045167, "body": "@impulse <code>strcpy(var, &quot;some value&quot;)</code> leads to undefined behaviour as you are overrunning the array size (<code>1</code> in this case)"}], "tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": false, "score": 3, "last_activity_date": 1432731619, "last_edit_date": 1432731619, "creation_date": 1432731060, "answer_id": 30483016, "question_id": 30482898, "link": "https://stackoverflow.com/questions/30482898/char-var-0-and-char-var1-are-equivalent-in-c/30483016#30483016", "title": "char var[] = {0}; and char var[1]; are equivalent in C?", "body": "<p><code>char var[]</code> will define <code>var</code> as a char array where size is decided by the initializer list size.</p>\n\n<p>So <code>char var[] = {0}</code> is equivalent to <code>char var[1] = {0}</code>.</p>\n\n<p>In your later code snippet, <code>var</code> may be uninitialized first (if a local variable, which I believe it is as it is followed by <code>memset</code>) and is then set to all zeros.(assuming you meant <code>memset(var, 0, 1)</code>) Although the observable effect of the both snippets are same, compiler may generate different instructions or compiler may choose to call the <code>memset</code> which may add function call overhead in later snippet.</p>\n"}], "owner": {"reputation": 1878, "user_id": 2588499, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/a774cbfdbf028557b13027b6ec42cccf?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/2588499/arun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1432732330, "creation_date": 1432730790, "last_edit_date": 1432731245, "question_id": 30482898, "link": "https://stackoverflow.com/questions/30482898/char-var-0-and-char-var1-are-equivalent-in-c", "title": "char var[] = {0}; and char var[1]; are equivalent in C?", "body": "<p>what this line will do?</p>\n\n<pre><code>char var[] = {0};\n</code></pre>\n\n<p>Is this equivalent to the following?</p>\n\n<pre><code>char var[1];\nmemset(var, 0, NULL); \n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 2, "creation_date": 1432730874, "post_id": 30482889, "comment_id": 49044373, "body": "Don&#39;t do it, reconsider what you want to write and read back."}, {"owner": {"reputation": 1045, "user_id": 2305161, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a4956f14412244c2942ff6746b81fc04?s=128&d=identicon&r=PG", "display_name": "Andy Newman", "link": "https://stackoverflow.com/users/2305161/andy-newman"}, "edited": false, "score": 0, "creation_date": 1432730948, "post_id": 30482889, "comment_id": 49044437, "body": "While this is a BAD IDEA, the code should actually work.  In what way are the values &quot;incorrect&quot;?  Are they different? Can you print them out before and after?"}, {"owner": {"reputation": 808, "user_id": 614656, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/07550f59451abebb488b5cc886c06f4b?s=128&d=identicon&r=PG", "display_name": "911", "link": "https://stackoverflow.com/users/614656/911"}, "edited": false, "score": 2, "creation_date": 1432730978, "post_id": 30482889, "comment_id": 49044467, "body": "class is a keyword in C++"}, {"owner": {"reputation": 5440, "user_id": 860566, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7b3c9600bd9d213f52750ac083c1ac28?s=128&d=identicon&r=PG", "display_name": "Thomas Russell", "link": "https://stackoverflow.com/users/860566/thomas-russell"}, "edited": false, "score": 1, "creation_date": 1432730993, "post_id": 30482889, "comment_id": 49044478, "body": "Just out of curiosity, what&#39;s your rationale for doing this?"}, {"owner": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "edited": false, "score": 0, "creation_date": 1432731205, "post_id": 30482889, "comment_id": 49044645, "body": "If this program would ever be successful, that could be a serious security vulnerability.  Imagine some hacker noticing that file and changing it."}, {"owner": {"reputation": 12389, "user_id": 1233508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/93MDM.jpg?s=128&g=1", "display_name": "DCoder", "link": "https://stackoverflow.com/users/1233508/dcoder"}, "reply_to_user": {"reputation": 5440, "user_id": 860566, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7b3c9600bd9d213f52750ac083c1ac28?s=128&d=identicon&r=PG", "display_name": "Thomas Russell", "link": "https://stackoverflow.com/users/860566/thomas-russell"}, "edited": false, "score": 0, "creation_date": 1432732617, "post_id": 30482889, "comment_id": 49045769, "body": "@Shaktal, @stefaanv: saving pointers to objects is (used to be?) popular in savegames. For example, the entire Command&amp;Conquer line of games did it. When saving, they write the object&#39;s address and then bitwise copy the object into the stream. When loading, an object is constructed, it reads its data from the stream and tells a manager &quot;I used to be at <code>0xf00c</code>, now I&#39;m at <code>0xb44c</code>&quot;, later the manager rewrites (&quot;swizzles&quot;) all the changed pointers. Here the pointer acts more like a &quot;guid&quot;. (However, there was one pointer the developers missed and the community had to find/fix it)."}, {"owner": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "reply_to_user": {"reputation": 12389, "user_id": 1233508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/93MDM.jpg?s=128&g=1", "display_name": "DCoder", "link": "https://stackoverflow.com/users/1233508/dcoder"}, "edited": false, "score": 0, "creation_date": 1432733659, "post_id": 30482889, "comment_id": 49046617, "body": "@DCoder: in this case the pointer is used again, assuming it will always be in the same address space."}, {"owner": {"reputation": 137, "user_id": 933322, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d18ffccaca0ce9e787e7e9149661e549?s=128&d=identicon&r=PG", "display_name": "mgr", "link": "https://stackoverflow.com/users/933322/mgr"}, "edited": false, "score": 0, "creation_date": 1432733985, "post_id": 30482889, "comment_id": 49046870, "body": "Hi, thanks for the comments, I had to do it to debug an issue, won&#39;t use it in production code :)"}, {"owner": {"reputation": 12389, "user_id": 1233508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/93MDM.jpg?s=128&g=1", "display_name": "DCoder", "link": "https://stackoverflow.com/users/1233508/dcoder"}, "reply_to_user": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "edited": false, "score": 0, "creation_date": 1432734134, "post_id": 30482889, "comment_id": 49046980, "body": "@stefaanv: Yes, I am aware of this. In the savegame scenario, if the game does not rewrite some pointer (because the developers forgot to add it to the &quot;things to rewrite&quot; list), it&#39;s left with the value loaded from file - if you load the save without restarting the application, you have a pretty similar situation."}], "answers": [{"comments": [{"owner": {"reputation": 1045, "user_id": 2305161, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a4956f14412244c2942ff6746b81fc04?s=128&d=identicon&r=PG", "display_name": "Andy Newman", "link": "https://stackoverflow.com/users/2305161/andy-newman"}, "edited": false, "score": 0, "creation_date": 1432730983, "post_id": 30482957, "comment_id": 49044472, "body": "I missed that.  Well spotted."}], "tags": [], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": true, "score": 5, "last_activity_date": 1432731026, "last_edit_date": 1432731026, "creation_date": 1432730929, "answer_id": 30482957, "question_id": 30482889, "link": "https://stackoverflow.com/questions/30482889/how-to-write-pointers-of-an-object-into-a-file/30482957#30482957", "title": "How to write pointers of an object into a file?", "body": "<p>To read and write the pointer itself, you'll need to pass its address, not the address it points to:</p>\n\n<pre><code>fwrite(&amp;class, sizeof(class), 1, output_file);\nfread (&amp;class_read, sizeof(class_read), 1, in_file);\n       ^\n</code></pre>\n\n<p>You're instead writing the first few bytes of whatever <code>class</code> points to, then trying to read them back into whatever <code>class_read</code> points to (failing if it's not yet a valid pointer).</p>\n"}], "owner": {"reputation": 137, "user_id": 933322, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d18ffccaca0ce9e787e7e9149661e549?s=128&d=identicon&r=PG", "display_name": "mgr", "link": "https://stackoverflow.com/users/933322/mgr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 30482957, "answer_count": 1, "score": 1, "last_activity_date": 1432731026, "creation_date": 1432730774, "last_edit_date": 1432730823, "question_id": 30482889, "link": "https://stackoverflow.com/questions/30482889/how-to-write-pointers-of-an-object-into-a-file", "title": "How to write pointers of an object into a file?", "body": "<p>I have a situation where I need to store an object's pointer into an file and read it again in the same process.  How should I do it?</p>\n\n<p>Right now I write/read like this:</p>\n\n<pre><code>    Myclass* class  = &lt;valid pointer to Myclass&gt;\n    FILE* output_file = fopen(filename, \"w\");\n    fwrite(class, sizeof(class), 1, output_file)\n\n// and read it\n\n    FILE* in_file = fopen(filename, \"r\");\n    Myclass* class_read\n    fread(class_read, sizeof(class_read), 1, in_file)\n</code></pre>\n\n<p>I don't see correct values when reading back.  I will read and write these files in the same address space.</p>\n"}, {"tags": ["c", "dynamic-memory-allocation", "static-variables"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1432730395, "post_id": 30482645, "comment_id": 49043985, "body": "And more importantly why are you doing that? You know that functions accept paramters! You don&#39;t want to be confused when your program grows!"}, {"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "edited": false, "score": 1, "creation_date": 1432730550, "post_id": 30482645, "comment_id": 49044127, "body": "what you mean by only the pointer is static?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1432731944, "post_id": 30482645, "comment_id": 49045255, "body": "The pointer itself is static, but the memory which you allocated via the pointer neither knows nor cares about this."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432781834, "post_id": 30482645, "comment_id": 49070084, "body": "1) in C, do not cast the returned value from malloc() (and family of functions)  2) always check (!=NULL) the returned value from malloc() (and family of functions) to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432781938, "post_id": 30482645, "comment_id": 49070107, "body": "the &#39;static&#39; modifier means the pointer is only visible within the current file.  This is a link time attribute.  Other than that detail, it is like any other &#39;global&#39; variable."}], "answers": [{"comments": [{"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "edited": false, "score": 0, "creation_date": 1432730400, "post_id": 30482697, "comment_id": 49043989, "body": "this is C code. What you mean &quot;so this structure may be better suited to be in a wrapper function or class where the destruction of it can be tracked.&quot;"}, {"owner": {"reputation": 4184, "user_id": 3987536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/327abb72f81fec541e936876b90d25d2?s=128&d=identicon&r=PG", "display_name": "Lawrence Aiello", "link": "https://stackoverflow.com/users/3987536/lawrence-aiello"}, "reply_to_user": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "edited": false, "score": 0, "creation_date": 1432730455, "post_id": 30482697, "comment_id": 49044032, "body": "Ah yes - you are correct. In that case, you will want to free your structure at the end of the main() function."}, {"owner": {"reputation": 33621, "user_id": 108802, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nABuD.jpg?s=128&g=1", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/108802/gauthier"}, "edited": false, "score": 0, "creation_date": 1432740171, "post_id": 30482697, "comment_id": 49051889, "body": "Well, and <code>static</code> does not mean you can have only one instance of the object. This <i>is</i> one definition, this defines one object (or rather variable, since we&#39;re talking C)."}], "tags": [], "owner": {"reputation": 4184, "user_id": 3987536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/327abb72f81fec541e936876b90d25d2?s=128&d=identicon&r=PG", "display_name": "Lawrence Aiello", "link": "https://stackoverflow.com/users/3987536/lawrence-aiello"}, "is_accepted": false, "score": 0, "last_activity_date": 1432730478, "last_edit_date": 1432730478, "creation_date": 1432730266, "answer_id": 30482697, "question_id": 30482645, "link": "https://stackoverflow.com/questions/30482645/can-we-dynamically-allocate-memory-for-static-variable-in-c/30482697#30482697", "title": "can we dynamically allocate memory for static variable in C?", "body": "<p>I don't see why not. Even though static means there can only be one instance of the object, you still need space for that object. Keep in mind however that anything that is <code>malloc</code>'d needs to be <code>free</code>'d, so you will want to do that at the end of your <code>main()</code> function.</p>\n"}, {"comments": [{"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "edited": false, "score": 0, "creation_date": 1432730521, "post_id": 30482703, "comment_id": 49044089, "body": "why if it is const, it is invalid?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "edited": false, "score": 0, "creation_date": 1432730546, "post_id": 30482703, "comment_id": 49044120, "body": "@ratzip you cannot change <code>const</code>. :-)"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1432732055, "post_id": 30482703, "comment_id": 49045339, "body": "<code>const</code>-ness is irrelevant here, and probably is just confusing the issue."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1432732164, "post_id": 30482703, "comment_id": 49045426, "body": "@PaulR Sir, I thought of bringing up the <code>const</code>, as OP had written <i>dynamic allocation for static variable</i>, so thought this will clear up the issue. Please correct me if i&#39;m wrong"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1432732311, "post_id": 30482703, "comment_id": 49045545, "body": "I don&#39;t think <code>const</code>-ness is at all relevant - you could still allocate memory dynamically - see e.g. <a href=\"http://codepad.org/fhn2PHg4\" rel=\"nofollow noreferrer\">codepad.org/fhn2PHg4</a> (although of course in this instance that would not be particularly useful!)."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1432732690, "post_id": 30482703, "comment_id": 49045836, "body": "@PaulR Sir, I think I&#39;m doing a miserable job in explaining myself . :-( I tried to mean <code>struct person* const person_p = NULL;</code> in this case. Hope this is fine."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1432732835, "post_id": 30482703, "comment_id": 49045963, "body": "In that case though the use of <code>const</code> is not analogous to the use of <code>static</code> - I would suggest just deleting the following: &quot;The variable is static, not const. So, there is no issue.&quot; and keep everything else - then your answer would make sense."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1432733112, "post_id": 30482703, "comment_id": 49046182, "body": "@PaulR Appriciate the review sir, Updated, can you check once for the clarity now?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1432734272, "post_id": 30482703, "comment_id": 49047109, "body": "Thanks for taking the time to clarify the answer."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 4, "last_activity_date": 1432733078, "last_edit_date": 1495535212, "creation_date": 1432730288, "answer_id": 30482703, "question_id": 30482645, "link": "https://stackoverflow.com/questions/30482645/can-we-dynamically-allocate-memory-for-static-variable-in-c/30482703#30482703", "title": "can we dynamically allocate memory for static variable in C?", "body": "<p>Yes, it's valid and allowed. (Unless you're using the pointer as a <em>placeholder</em>) You can (and need to) dynamically allocate and <code>free()</code> memory to and from the pointer before and after using it.</p>\n\n<p>Rather, please make a note, you <a href=\"https://stackoverflow.com/q/605845/2173917\">do not cast</a> the return value of <code>malloc()</code> and family in C.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1432735257, "creation_date": 1432735257, "answer_id": 30484781, "question_id": 30482645, "link": "https://stackoverflow.com/questions/30482645/can-we-dynamically-allocate-memory-for-static-variable-in-c/30484781#30484781", "title": "can we dynamically allocate memory for static variable in C?", "body": "<p>Memory isn't \"owned\" by pointers to it. You can do the following things:</p>\n\n<ul>\n<li>Dynamically allocate memory</li>\n<li>Make a pointer point to that memory</li>\n</ul>\n\n<p>It doesn't really make sense to say \"dynamically allocate memory <strong>for</strong> a pointer\".</p>\n\n<p>Any pointer can point to any object (subject to alignment and aliasing restrictions), it makes no difference what the storage duration of the pointer is.</p>\n"}, {"tags": [], "owner": {"reputation": 33621, "user_id": 108802, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nABuD.jpg?s=128&g=1", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/108802/gauthier"}, "is_accepted": false, "score": 0, "last_activity_date": 1432740072, "creation_date": 1432740072, "answer_id": 30486676, "question_id": 30482645, "link": "https://stackoverflow.com/questions/30482645/can-we-dynamically-allocate-memory-for-static-variable-in-c/30486676#30486676", "title": "can we dynamically allocate memory for static variable in C?", "body": "<p>Note that it is the <em>pointer</em> that is static, not the memory it points to.</p>\n\n<p><code>static</code> means two unrelated things:</p>\n\n<ol>\n<li>give static memory allocation (memory allocated at start of program, and only released at end of program)</li>\n<li>give internal linkage (do not allow other compilation units - modules - to access the identifier. Here a variable, could be a function)</li>\n</ol>\n\n<p>In your code, 1. static memory allocation is irrelevant, since the variable is global anyway and as such already has it.</p>\n\n<p>Then, 2. internal linkage does not matter either, because what you are trying to do is inside the module anyway.</p>\n\n<p>In other words, <code>person_p</code> is exactly as a usual global variable within your module, and you can do whatever you want to it.</p>\n\n<p>It's only the pointer that is defined by this line of code, so you can dynamically allocate memory elsewhere, and assign the memory address to <code>person_p</code> if you wish.</p>\n"}], "owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1970, "favorite_count": 1, "accepted_answer_id": 30482703, "answer_count": 4, "score": 3, "last_activity_date": 1432740072, "creation_date": 1432730158, "last_edit_date": 1432733925, "question_id": 30482645, "link": "https://stackoverflow.com/questions/30482645/can-we-dynamically-allocate-memory-for-static-variable-in-c", "title": "can we dynamically allocate memory for static variable in C?", "body": "<p>Is it allowed to dynamically allocate memory for static variable like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; \n\nstruct person\n{\n   int age;\n   int number;\n};\n\nstatic struct person* person_p = NULL;\n\nint main()\n{\n    person_p = (struct person*)malloc(10 * sizeof(struct person));\n}\n</code></pre>\n\n<p>The above code built, but is it really allowed to dynamically allocate memory for static variable?</p>\n"}, {"tags": ["c", "complexity-theory", "graph-theory", "depth-first-search", "adjacency-list"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1432731638, "post_id": 30482594, "comment_id": 49044982, "body": "An adjacency list seems like a lot more trouble than it is worth if you can rely on there being no gaps, other than possibly at the bottom.  Just store the scores in sequential elements of an array (up to <code>(nN * (nN + 1)) &#47; 2</code> elements are needed).  From the element at index <code>x</code>, the choices of next step are the ones at index <code>2 * x + 1</code> and <code>2 * x + 2</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1432731929, "post_id": 30482594, "comment_id": 49045247, "body": "Note, too, that although you certainly can use an explicit stack data structure, and you even know up front what capacity it requires, you can also write the algorithm recursively.  That gives you the call stack as your stack."}, {"owner": {"reputation": 19, "user_id": 4241745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc817fdf4e38e0d60f0d36940042418a?s=128&d=identicon&r=PG&f=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/4241745/dom"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1432732460, "post_id": 30482594, "comment_id": 49045656, "body": "I don&#39;t believe <code>2 * x + 1</code> and <code>2 * x + 2</code> would be enough to get the next step of them, for example: <code>2,2,1,4,9,4,3,2,1,2</code>, if you get the second 4 it should point to 1 and 2, but if you use the formula it won&#39;t point to anyone."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1432733014, "post_id": 30482594, "comment_id": 49046108, "body": "Hmm, my bad.  Those formulae are for a binary tree, which is not actually what you have.  Nevertheless, there should be an arithmetic approach.  Perhaps I can work it out."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1432733443, "post_id": 30482594, "comment_id": 49046466, "body": "Ok, it&#39;s not bad.  You just need to keep track of which step you&#39;re on.  On the first step, the choices are <code>x + 1</code> and <code>x + 2</code>.  On the second, they are <code>x + 2</code> and <code>x + 3</code>.  On the <code>n</code>th they are <code>x + n</code> and <code>x + n + 1</code>."}, {"owner": {"reputation": 19, "user_id": 4241745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc817fdf4e38e0d60f0d36940042418a?s=128&d=identicon&r=PG&f=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/4241745/dom"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1432780269, "post_id": 30482594, "comment_id": 49069690, "body": "I&#39;ve managed to make the program work, but I had to use recursion to make it able to get the biggest value, would there be any other faster way? As the online judge gives me a timeout limit in one case."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1432733969, "post_id": 30483510, "comment_id": 49046862, "body": "You&#39;ve mistaken the options for the path: from the example, they are (1) straight down, and (2) down + right (the OP&#39;s use of &quot;left&quot; seems to be from the point of view of a person actually walking forward along the path).  You&#39;re quite correct that a DP approach scales much better, though. It would be pretty easy to write one, too, as you just need to work from the bottom up instead of from the top down."}, {"owner": {"reputation": 19, "user_id": 4241745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc817fdf4e38e0d60f0d36940042418a?s=128&d=identicon&r=PG&f=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/4241745/dom"}, "edited": false, "score": 0, "creation_date": 1432780517, "post_id": 30483510, "comment_id": 49069747, "body": "The biggest problem using this code is that I still get timeout limit in one of the cases, even when I have another way of telling me that I have already passed through that path, returning me the its biggest value, instead of running through it again."}, {"owner": {"reputation": 430, "user_id": 992703, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cxDvv.png?s=128&g=1", "display_name": "kaitian521", "link": "https://stackoverflow.com/users/992703/kaitian521"}, "edited": false, "score": 0, "creation_date": 1432793837, "post_id": 30483510, "comment_id": 49073819, "body": "By using DP, you can reduce the time complexity to O(m*n), but my answer is something wrong according to John"}], "tags": [], "owner": {"reputation": 430, "user_id": 992703, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cxDvv.png?s=128&g=1", "display_name": "kaitian521", "link": "https://stackoverflow.com/users/992703/kaitian521"}, "is_accepted": false, "score": 0, "last_activity_date": 1432732278, "last_edit_date": 1495541665, "creation_date": 1432732278, "answer_id": 30483510, "question_id": 30482594, "link": "https://stackoverflow.com/questions/30482594/find-the-path-with-the-biggest-value-using-depth-first-search/30483510#30483510", "title": "Find the path with the biggest value using depth-first-search", "body": "<p>At first, I want to ask you a question:\nWhy using list? Can we use array instead of list?</p>\n\n<p>For example, Assume that we are in <code>array[i][j]</code>:</p>\n\n<ul>\n<li>if we want to move right, then we are in <code>array[i][j+1]</code></li>\n<li>if we want to move down, we are in <code>array[i+1][j]</code></li>\n</ul>\n\n<p>So I think we should just use Array to present our datastructures.</p>\n\n<p>You picked up that DFS can solve your problems, so we have a look at what we should do:</p>\n\n<pre><code>int dfs(int **array, int row, int column) {\n    if (row == m || column == n) return 0;\n    int res = array[row][column];\n    int option_right = dfs(array, row, column + 1);\n    int option_down = dfs(array, row + 1, column);\n    return std::max(option_right, option_down) + res;\n}\n</code></pre>\n\n<p>It can solve this problem, but we should notice that the big(O) is very large:\nO(exponential)\uff0c we must make some improvement:</p>\n\n<p>Dynamic Programming </p>\n\n<p><a href=\"https://stackoverflow.com/questions/6184869/what-is-difference-between-memoization-and-dynamic-programming\">What is the difference between memoization and dynamic programming?</a></p>\n"}], "owner": {"reputation": 19, "user_id": 4241745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc817fdf4e38e0d60f0d36940042418a?s=128&d=identicon&r=PG&f=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/4241745/dom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 483, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1432732278, "creation_date": 1432730042, "question_id": 30482594, "link": "https://stackoverflow.com/questions/30482594/find-the-path-with-the-biggest-value-using-depth-first-search", "title": "Find the path with the biggest value using depth-first-search", "body": "<p>I'm having some trouble resolving a problem that I believe needs the use of depth-first-search algorithm.</p>\n\n<p>This problems involves trying to find the biggest value of the path, but every time you walk through the path, you can either go straight or to your left.</p>\n\n<p>Here is a example of a path:</p>\n\n<pre><code> _\n|2|_\n|2|1|_\n|4|9|4|_\n|3|2|1|2|\n</code></pre>\n\n<p>The biggest value in this path would be 2+2+9+2 = 15</p>\n\n<p>Now to the problem:</p>\n\n<p>I've decided that the best way to solve this problem is to make a adjacency list and use a stack with DFS to get the biggest value of the path, but I'm having a hard time figuring out how to create the adjacency list, considering that the program input is:</p>\n\n<pre><code>4 //Number of lines\n2 // First line\n2 1 \n4 9 4 \n3 2 1 2 \n</code></pre>\n\n<p>Here is what I have so far</p>\n\n<pre><code>// Recieve the size of the path\nscanf(\"%d\", &amp;nN);\n\n// Get the amount of elements in the list: n!\nfor( i = 0, nFact = 0 ; i &lt; nN ; i++ )\n    nFact += nN - i;\n\n// Create list of adjacency\nlist = malloc( nFat * sizeof( List ) );\n\n// Insert elements\nfor( i = 0 ; i &lt; nN ; i++ ) {\n    scanf(\"%d\", list[i].value);\n    lista[i].color = 0;\n    lista[i].prox = NULL;\n    // No idea on how to insert the elements on their specific slot and on their adjacency, as the number keeps increasing for each line\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "answers": [{"tags": [], "owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "is_accepted": false, "score": 6, "last_activity_date": 1432743548, "last_edit_date": 1432743548, "creation_date": 1432728200, "answer_id": 30481878, "question_id": 30481827, "link": "https://stackoverflow.com/questions/30481827/how-do-i-check-the-contents-of-an-array/30481878#30481878", "title": "How do I check the contents of an array?", "body": "<p>In fact</p>\n\n<pre><code>array == {'0','0','0','0','0','0','0','0'}\n</code></pre>\n\n<p>is not allowed, you cannot compare arrays like this. Rather, do it in a loop:</p>\n\n<pre><code>int row_is_all_zeroes(char arr[8])\n{\n  for (int i = 0; i &lt; 8; i++)\n  {\n    if (arr[i] != '0')\n      return 0;\n  }\n  return 1;\n}\n</code></pre>\n\n<p>If you want a more elegant solution, have a look at iharob or Sourav's answers</p>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 7, "last_activity_date": 1432743516, "last_edit_date": 1432743516, "creation_date": 1432728345, "answer_id": 30481920, "question_id": 30481827, "link": "https://stackoverflow.com/questions/30481827/how-do-i-check-the-contents-of-an-array/30481920#30481920", "title": "How do I check the contents of an array?", "body": "<p>This</p>\n\n<pre><code>array == {'0','0','0','0','0','0','0','0'}\n</code></pre>\n\n<p>is definitely wrong, and surely not compiling.</p>\n\n<p>You can compare the values with <code>memcmp()</code> like this</p>\n\n<pre><code>int allZeroes = (memcmp(array, \"00000000\", 8) == 0);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 50669, "user_id": 1711796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6pRI7.png?s=128&g=1", "display_name": "Bernhard Barker", "link": "https://stackoverflow.com/users/1711796/bernhard-barker"}, "edited": false, "score": 0, "creation_date": 1432792296, "post_id": 30481923, "comment_id": 49073133, "body": "Much thanks Mr. @Dukeling for taking the charge to make the question and <i>all</i> the answers easily understandable and more useful . Kudos !!"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 5, "last_activity_date": 1432743531, "last_edit_date": 1432743531, "creation_date": 1432728351, "answer_id": 30481923, "question_id": 30481827, "link": "https://stackoverflow.com/questions/30481827/how-do-i-check-the-contents-of-an-array/30481923#30481923", "title": "How do I check the contents of an array?", "body": "<pre><code>{'0','0','0','0','0','0','0','0'}\n</code></pre>\n\n<p>is called (and used as) a <em>brace enclosed</em> initializer list. This cannot be used for <em>comparison</em> anywhere.</p>\n\n<p>You can make use of <a href=\"http://linux.die.net/man/3/memcmp\" rel=\"nofollow\"><code>memcmp()</code></a> to achieve this in an <em>elegant</em> way.</p>\n\n<p>Pseudo-code</p>\n\n<pre><code>if (!memcmp(array, \"00000000\", 8))\n{\n   break;\n}\n</code></pre>\n"}], "owner": {"reputation": 128, "user_id": 4944538, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0mlcq.jpg?s=128&g=1", "display_name": "trunks1ace", "link": "https://stackoverflow.com/users/4944538/trunks1ace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1432744798, "creation_date": 1432728058, "last_edit_date": 1432744798, "question_id": 30481827, "link": "https://stackoverflow.com/questions/30481827/how-do-i-check-the-contents-of-an-array", "title": "How do I check the contents of an array?", "body": "<p>I want to check if a char array contains all <code>'0'</code>s.</p>\n\n<p>I tried this, but it doesn't work:</p>\n\n<pre><code>char array[8];\n// ...\nif (array == {'0','0','0','0','0','0','0','0'})\n   // do something\n</code></pre>\n\n<p>How do I do this?</p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1432728015, "post_id": 30481702, "comment_id": 49042279, "body": "(apart from the typedef) your usage of <code>strncpy()</code> is wrong. (use of strncpy() is <b>always</b> wrong)"}], "answers": [{"comments": [{"owner": {"reputation": 727, "user_id": 3952735, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1381bff4c16b2ff4ae15f5ab703bb971?s=128&d=identicon&r=PG&f=1", "display_name": "malajedala", "link": "https://stackoverflow.com/users/3952735/malajedala"}, "edited": false, "score": 0, "creation_date": 1432727944, "post_id": 30481716, "comment_id": 49042224, "body": "I am blind -.-!!  Thanks a lot!"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 6, "last_activity_date": 1432727766, "creation_date": 1432727766, "answer_id": 30481716, "question_id": 30481702, "link": "https://stackoverflow.com/questions/30481702/recursive-structure-definition-in-c-error-forward-declaration/30481716#30481716", "title": "Recursive structure definition in C, error &quot;forward declaration&quot;", "body": "<p>There is no <code>struct my_struct</code> in your code, your <code>struct</code> is an anonymous <code>typedef</code>, you need it to be like this</p>\n\n<pre><code>typedef struct my_struct {\n     char *string;\n     struct my_struct **children;\n     int child_num;\n} my_struct;\n</code></pre>\n\n<p>Or even</p>\n\n<pre><code>typedef struct my_struct my_struct;\nstruct my_struct {\n     char *string;\n     my_struct **children;\n     int child_num;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1432728062, "last_edit_date": 1432728062, "creation_date": 1432727848, "answer_id": 30481743, "question_id": 30481702, "link": "https://stackoverflow.com/questions/30481702/recursive-structure-definition-in-c-error-forward-declaration/30481743#30481743", "title": "Recursive structure definition in C, error &quot;forward declaration&quot;", "body": "<pre><code> typedef struct {\n\n char *string;\n struct my_struct **children; //I want a list of children, therefore pointer to pointer\n int child_num;\n } my_struct;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code> typedef struct my_struct{\n\n char *string;\n struct my_struct **children; //I want a list of children, therefore pointer to pointer\n int child_num;\n } my_struct;\n</code></pre>\n\n<p>As said by <strong>@iharob</strong> there is no struct <code>my_struct</code> in your code and compiler is complaining about it you first have a struct my_struct has shown and then have a typedef for your struct</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1432727980, "creation_date": 1432727980, "answer_id": 30481795, "question_id": 30481702, "link": "https://stackoverflow.com/questions/30481702/recursive-structure-definition-in-c-error-forward-declaration/30481795#30481795", "title": "Recursive structure definition in C, error &quot;forward declaration&quot;", "body": "<p>In your code</p>\n\n<pre><code>typedef struct {\n char *string;\n struct my_struct **children; \n int child_num;\n } my_struct;\n</code></pre>\n\n<p><strong>does not</strong> define a <code>struct</code> called <code>struct my_struct</code>, rather , it <code>typedef</code>s <code>my_struct</code> to be an alias of an <em>unnamed</em> struct. So you cannot use <code>struct my_struct</code> in your code. Either</p>\n\n<p>Either</p>\n\n<ul>\n<li>You need to put the <code>typedef</code> before the structure definiion.</li>\n</ul>\n\n<p>or</p>\n\n<ul>\n<li>You need to use a <em>named</em> <code>struct</code>.</li>\n</ul>\n"}], "owner": {"reputation": 727, "user_id": 3952735, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1381bff4c16b2ff4ae15f5ab703bb971?s=128&d=identicon&r=PG&f=1", "display_name": "malajedala", "link": "https://stackoverflow.com/users/3952735/malajedala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 30481716, "answer_count": 3, "score": 0, "last_activity_date": 1432728062, "creation_date": 1432727699, "question_id": 30481702, "link": "https://stackoverflow.com/questions/30481702/recursive-structure-definition-in-c-error-forward-declaration", "title": "Recursive structure definition in C, error &quot;forward declaration&quot;", "body": "<p>I want do declare my structure as a recursive one. So what I did until now looks like this:</p>\n\n<pre><code> typedef struct {\n\n char *string;\n struct my_struct **children; //I want a list of children, therefore pointer to pointer\n int child_num;\n } my_struct;\n</code></pre>\n\n<p>But when I then try to initialize it like this:</p>\n\n<pre><code>my_struct *alig;\nalig = malloc(sizeof(my_struct)*1);\nalig-&gt;child_num = 5;\nalig-&gt;string = malloc(sizeof(char)*9);\nstrncpy(alig-&gt;string, \"AAACGTCA\", 8);\n\nalig-&gt;children = malloc(sizeof(my_struct*)*alig-&gt;child_num);\n\nint j;\nfor (j = 0; j &lt; alig-&gt;child_num; j++) {\n    alig-&gt;children[j] = malloc(sizeof(my_struct)*1);\n    alig-&gt;children[j]-&gt;string = malloc(sizeof(char)*9); // *********error ********\n}\n</code></pre>\n\n<p>I get the error:\n\"./structurs.h:27:13: note: forward declaration of 'struct my_struct' \" </p>\n\n<p>As well as this error at the marked line:\nmain.c:56:22: error: incomplete definition of type 'struct my_struct'</p>\n\n<p>Does someone now where my mistake is??</p>\n"}, {"tags": ["c", "floating-point", "atof"], "comments": [{"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 1, "creation_date": 1432727393, "post_id": 30481587, "comment_id": 49041814, "body": "So your question is what should you do to circumvent this limitation of <code>atof</code>?"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1432727746, "post_id": 30481587, "comment_id": 49042071, "body": "I would suggest putting the <code>while (num == 0);</code> on the same line as the closing brace <code>}</code> as what you have here confuses into thinking you have a stray <code>while</code> running an infinite loop"}, {"owner": {"reputation": 31, "user_id": 4541639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7066f96726e603e56d7dd2e31ee5908?s=128&d=identicon&r=PG&f=1", "display_name": "nosperov", "link": "https://stackoverflow.com/users/4541639/nosperov"}, "edited": false, "score": 0, "creation_date": 1432728511, "post_id": 30481587, "comment_id": 49042645, "body": "yes :). I have a variable that should only accept float values between -10 and 15, inclusive the 0. But I wanted to validate the data input, so that the user enter a letter the program not crashes."}, {"owner": {"reputation": 31, "user_id": 4541639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7066f96726e603e56d7dd2e31ee5908?s=128&d=identicon&r=PG&f=1", "display_name": "nosperov", "link": "https://stackoverflow.com/users/4541639/nosperov"}, "edited": false, "score": 0, "creation_date": 1432734379, "post_id": 30481587, "comment_id": 49047202, "body": "Thank you : )! I found this function, and works fine to :). int isfloat( char *str ) {     double num;     return sscanf(str, &quot;%f&quot;, &amp;num); }"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 5, "last_activity_date": 1432729776, "last_edit_date": 1432729776, "creation_date": 1432727397, "answer_id": 30481604, "question_id": 30481587, "link": "https://stackoverflow.com/questions/30481587/alternative-to-atof-function-to-differenciate-input-0-with-failure/30481604#30481604", "title": "Alternative to atof() function to differenciate input 0 with failure", "body": "<p>Yes, that's a limitation for <code>atof()</code>.</p>\n\n<p>You can make use of <a href=\"http://linux.die.net/man/3/strtof\" rel=\"nofollow\"><code>strtof()</code></a>/<a href=\"http://linux.die.net/man/3/strtod\" rel=\"nofollow\"><code>strtod()</code></a> instead.</p>\n\n<p><strong>Syantax:</strong></p>\n\n<pre><code>double strtod(const char *nptr, char **endptr);\nfloat strtof(const char *nptr, char **endptr);\n</code></pre>\n\n<p>Note: To differenciate between an <em>actual input</em> <code>0</code> and a <em>no conversion</em> <code>0</code>, you need to check the <code>endptr</code>.</p>\n\n<hr>\n\n<p>Now that said, as also mentioned by others, </p>\n\n<ul>\n<li>Do not use <code>fflush(stdin)</code>. It  invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</li>\n<li>Never use <code>gets()</code>, it suffers from possible buffer overflow. Use <a href=\"http://linux.die.net/man/3/fgets\" rel=\"nofollow\"><code>fgets()</code></a> instead.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "is_accepted": false, "score": 1, "last_activity_date": 1432727436, "creation_date": 1432727436, "answer_id": 30481620, "question_id": 30481587, "link": "https://stackoverflow.com/questions/30481587/alternative-to-atof-function-to-differenciate-input-0-with-failure/30481620#30481620", "title": "Alternative to atof() function to differenciate input 0 with failure", "body": "<p>This is a well-known limitation of <code>atof</code> as standardized. To circumvent this limitation, use <code>strtod</code> instead and pass a non-null pointer for the second argument.</p>\n\n<p>From the man page on my system:</p>\n\n<blockquote>\n  <p>double\n       strtod(const char *restrict nptr, char **restrict endptr);</p>\n  \n  <p>\u2026</p>\n  \n  <p>If endptr is not NULL, a pointer to the character after the last character\n       used in the conversion is stored in the location referenced by endptr.</p>\n  \n  <p>If no conversion is performed, zero is returned and the value of nptr is\n       stored in the location referenced by endptr.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1432727517, "creation_date": 1432727517, "answer_id": 30481644, "question_id": 30481587, "link": "https://stackoverflow.com/questions/30481587/alternative-to-atof-function-to-differenciate-input-0-with-failure/30481644#30481644", "title": "Alternative to atof() function to differenciate input 0 with failure", "body": "<ol>\n<li><p>Do not <code>fflush()</code> <code>stdin</code> it's undefined behavior.</p></li>\n<li><p>It's simple, just use this</p>\n\n<pre><code>int isfloat(const char *value)\n {\n    char *endptr;\n    float num; \n    num = strtof(str, &amp;endptr);\n    if (*endptr != '\\0')\n        return 0;\n    return 1;\n }\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 31, "user_id": 4541639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7066f96726e603e56d7dd2e31ee5908?s=128&d=identicon&r=PG&f=1", "display_name": "nosperov", "link": "https://stackoverflow.com/users/4541639/nosperov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2814, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1438317739, "creation_date": 1432727339, "last_edit_date": 1438317739, "question_id": 30481587, "link": "https://stackoverflow.com/questions/30481587/alternative-to-atof-function-to-differenciate-input-0-with-failure", "title": "Alternative to atof() function to differenciate input 0 with failure", "body": "<p>I created a function to validate the input of real numbers . It is working well , but as the <code>atof()</code> function returns <code>0</code> upon failure, it is not possible to enter <code>0</code> as an input value. Anyone can give help to solve this?</p>\n\n<pre><code>float validate_float()\n{\n    float num;\n    char str[8];\n    do\n    {\n        printf(\"enter a float number:\");\n        fflush(stdin);\n        gets(str);\n        num=atof(str);\n    }\n    while(num==0);\n    return num;\n}\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1432726740, "post_id": 30481343, "comment_id": 49041306, "body": "<code>unsigned char btyte1[1]</code> makes no sense just <code>unsigned char byte1</code>, and in the case <code>unsigned char length[2]</code> it would be <code>unsigned short length;</code>. And <a href=\"http://stackoverflow.com/a/605858/1983495\">Do not cast the return value of <code>malloc()</code></a>, but do check that it&#39;s not <code>NULL</code>. Please explain NO BIG EFFORT!, what is your idea, have you tried anything at all?"}, {"owner": {"reputation": 39, "user_id": 4767796, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/03268e6f9b25a130b160487f2016a4db?s=128&d=identicon&r=PG&f=1", "display_name": "florian2840", "link": "https://stackoverflow.com/users/4767796/florian2840"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432727133, "post_id": 30481343, "comment_id": 49041613, "body": "My first idea was to cast my array to my struct that way: Packet = (struct Packet*)buffer; This is a really short possibility, but I think it only works, when entries in the struct have the same data type, right?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432727173, "post_id": 30481343, "comment_id": 49041645, "body": "I don&#39;t know whether that is a bad idea or not, have to see the code."}, {"owner": {"reputation": 39, "user_id": 4767796, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/03268e6f9b25a130b160487f2016a4db?s=128&d=identicon&r=PG&f=1", "display_name": "florian2840", "link": "https://stackoverflow.com/users/4767796/florian2840"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432731175, "post_id": 30481343, "comment_id": 49044616, "body": "why char byte1[1] make no sense? How can I save a char value from an array in a struct, which is defined as follows: struct Pointer{ char byte1; char byte2;} *Pointer; This does not work: Pointer-&gt;byte =  array[0];"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432731345, "post_id": 30481343, "comment_id": 49044764, "body": "Why doesn&#39;t it work? it sure does, unless your code has some other problem. I think that you are not posting the right question, and that means that you have no clue of what is wrong with your program, and that means that you need to try and <b>figure out</b> that by yourself and when you&#39;re stuck with an <b>specific</b> problem, then you can go to Stack Overflow and ask, meanwhile I am voting to close this question."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4767796, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/03268e6f9b25a130b160487f2016a4db?s=128&d=identicon&r=PG&f=1", "display_name": "florian2840", "link": "https://stackoverflow.com/users/4767796/florian2840"}, "edited": false, "score": 0, "creation_date": 1433142137, "post_id": 30483199, "comment_id": 49205469, "body": "I dont understand thos two lines:  unsigned short length = header[3] * 0x100 + header[4]; // assuming network byte order Packet *packet = malloc( sizeof *packet + length );  I thought I have to set the length of my data array. And the length of my data array is standing in dataLength. How I can set the length?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 39, "user_id": 4767796, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/03268e6f9b25a130b160487f2016a4db?s=128&d=identicon&r=PG&f=1", "display_name": "florian2840", "link": "https://stackoverflow.com/users/4767796/florian2840"}, "edited": false, "score": 0, "creation_date": 1433145187, "post_id": 30483199, "comment_id": 49207040, "body": "@florian2840 I am using the technique <a href=\"http://stackoverflow.com/questions/3047530/flexible-array-member-in-c-structure\">flexible array member</a> where you call <code>malloc</code> once; and that block will contain the data, and <code>byte1</code> <code>byte2</code> and <code>byte3</code>.   My suggestion is that this is simpler than your setup of having to malloc a <code>Packet</code> and then also malloc more space for data."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 39, "user_id": 4767796, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/03268e6f9b25a130b160487f2016a4db?s=128&d=identicon&r=PG&f=1", "display_name": "florian2840", "link": "https://stackoverflow.com/users/4767796/florian2840"}, "edited": false, "score": 0, "creation_date": 1433145297, "post_id": 30483199, "comment_id": 49207112, "body": "<code>header[3] * 0x100 + header[4]</code> converts the two bytes stored in your <code>lengthData</code> to be an integer value. For example of those bytes were <code>0x02 0x30</code> then the length will be <code>0x230</code> (or <code>560</code> decimal). You didn&#39;t say which of those two bytes was the <a href=\"http://stackoverflow.com/a/16535398/1505939\">most significant byte</a> so I made the assumption that the first one is ; as that is the most common way to send integers over a network."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1432731493, "creation_date": 1432731493, "answer_id": 30483199, "question_id": 30481343, "link": "https://stackoverflow.com/questions/30481343/structure-with-variable-length-c/30483199#30483199", "title": "structure with variable length C", "body": "<p>Firstly fix the struct definition:</p>\n\n<pre><code>typedef struct Packet {\n   unsigned char byte1, byte2, byte3;\n   unsigned short length;\n   unsigned char data[];\n} Packet;   // note: no bogus star\n</code></pre>\n\n<p>Here is one way of reading it in portably:</p>\n\n<pre><code>unsigned char header[5];\nif ( 5 != read(fd, header, 5) )\n    // error handling... \n\nunsigned short length = header[3] * 0x100 + header[4]; // assuming network byte order\nPacket *packet = malloc( sizeof *packet + length );\nif ( !packet )\n    // error handling....\n\npacket-&gt;byte1 = header[0];\npacket-&gt;byte2 = header[1];\npacket-&gt;byte3 = header[2];\npacket-&gt;length = length;\nssize_t num_read = read(fd, packet-&gt;data, length);\n\nif ( num_read != length )\n    // error handling...\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4767796, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/03268e6f9b25a130b160487f2016a4db?s=128&d=identicon&r=PG&f=1", "display_name": "florian2840", "link": "https://stackoverflow.com/users/4767796/florian2840"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 788, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1432731493, "creation_date": 1432726676, "last_edit_date": 1432727084, "question_id": 30481343, "link": "https://stackoverflow.com/questions/30481343/structure-with-variable-length-c", "title": "structure with variable length C", "body": "<p>I have a problem to get databytes into my struct. I am programming in C.\nMy received bytes looks like that:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Byte1 | Byte 2 | Byte 3| lengthData (2 Bytes) | data (variable)\n</code></pre>\n\n<p>My structure looks like that:\n</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct Packet {\n   unsigned char byte1[1];\n   unsigned char byte2[1];\n   unsigned char byte3[1];\n   unsigned char length[2];\n   unsigned char * data; \n}*Packet\n</code></pre>\n\n<p>Via the read command I have the data in replay.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>char * replay;\nreplay = (char*) malloc (MAX_DATA_LENGTH);\nmemset(replay, 0x00, MAX_DATA_LENGTH);\nread(fd, replay, MAX_DATA_LENGTH)\n</code></pre>\n\n<p>Now I want to get my data bytes into the structure. Firstly I have to allocate memory for the pointer data. My question, how can I get the data with no big effort in the struct?</p>\n"}, {"tags": ["c", "go", "language-interoperability"], "comments": [{"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 2, "creation_date": 1432726567, "post_id": 30481268, "comment_id": 49041178, "body": "Have you tried adding <code>#include &lt;stdlib.h&gt;</code> in your cgo comment?"}], "answers": [{"comments": [{"owner": {"reputation": 2282, "user_id": 1035792, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/cQjEY.png?s=128&g=1", "display_name": "gsscoder", "link": "https://stackoverflow.com/users/1035792/gsscoder"}, "edited": false, "score": 0, "creation_date": 1432731331, "post_id": 30481688, "comment_id": 49044748, "body": "+1 This worked perfectly and answers my question. To be honest I was misled by documentation that seems suggest that <code>C.free()</code> is part of the special <code>C</code> package. But in reality we&#39;re talking of standard <code>stdlib::free()</code>."}, {"owner": {"reputation": 2282, "user_id": 1035792, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/cQjEY.png?s=128&g=1", "display_name": "gsscoder", "link": "https://stackoverflow.com/users/1035792/gsscoder"}, "edited": false, "score": 0, "creation_date": 1432788584, "post_id": 30481688, "comment_id": 49071735, "body": "Like other runtimes also Go libs lack an API for managing already running OS processes, so I&#39;m trying to writing one. For now just a stub (<a href=\"https://github.com/gsscoder/goproc\" rel=\"nofollow noreferrer\">github.com/gsscoder/goproc</a>)."}], "tags": [], "owner": {"reputation": 8356, "user_id": 443265, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f10e24ce2786d8a6ddb4d79462dce5?s=128&d=identicon&r=PG", "display_name": "Martin T&#246;rnwall", "link": "https://stackoverflow.com/users/443265/martin-t%c3%b6rnwall"}, "is_accepted": true, "score": 19, "last_activity_date": 1432727640, "creation_date": 1432727640, "answer_id": 30481688, "question_id": 30481268, "link": "https://stackoverflow.com/questions/30481268/c-and-go-interoperability-issue-involving-c-free/30481688#30481688", "title": "C and Go interoperability issue involving C.free()", "body": "<p><code>libproc.h</code> doesn't include <code>stdlib.h</code>, where <code>free()</code> is declared. As such, the compiler cannot resolve the name. After I added <code>#include &lt;stdlib.h&gt;</code> at the beginning of the cgo comment block your code built successfully on my system.</p>\n"}], "owner": {"reputation": 2282, "user_id": 1035792, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/cQjEY.png?s=128&g=1", "display_name": "gsscoder", "link": "https://stackoverflow.com/users/1035792/gsscoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5762, "favorite_count": 1, "accepted_answer_id": 30481688, "answer_count": 1, "score": 13, "last_activity_date": 1432727640, "creation_date": 1432726445, "question_id": 30481268, "link": "https://stackoverflow.com/questions/30481268/c-and-go-interoperability-issue-involving-c-free", "title": "C and Go interoperability issue involving C.free()", "body": "<p>I've a Go function that wraps the <code>proc_name(pid,...)</code> function from <code>lib_proc.h</code>.</p>\n\n<p>This is the complete <strong>C prototype</strong>:</p>\n\n<pre><code>\nint proc_name(int pid, void * buffer, uint32_t buffersize) __OSX_AVAILABLE_STARTING(__MAC_10_5, __IPHONE_2_0);\n</code></pre>\n\n<p>that can be found here <code>/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk/usr/include/libproc.h</code> (at least on my system).</p>\n\n<p>It follows Go code:</p>\n\n<pre><code>\npackage goproc\n\n    /*\n    #include \"libproc.h\"\n\n    int call_proc_name(int pid, char *name, int name_size) {\n      return proc_name(pid, name, name_size);\n    }\n    */\n    import \"C\"\n    import \"unsafe\"\n    import \"strings\"\n\n    type DarwinProcess struct {\n        Process\n    }\n\n    func (DarwinProcess) NameOf(pid int) string {\n        name := C.CString(strings.Repeat(\"\\x00\", 1024))\n        defer C.free(unsafe.Pointer(name))\n        nameLen := C.call_proc_name(C.int(pid), name, C.int(1024))\n        var result string\n\n        if (nameLen > 0) {\n            result = C.GoString(name);\n        } else {\n            result = \"\"\n        }\n\n        return result;\n    }\n</code></pre>\n\n<p>This code won't compile unless the call to <code>C.free(unsafe.Pointer(...))</code> and <code>import \"unsafe\"</code> clause are removed.\n<code>DarwinProcess::NameOf(pid)</code> method is meant to work only on <strong>Mac OS X</strong> and <em>it actually works</em> if <code>C.free(...)</code> is removed from code.</p>\n\n<p>In its actual form after <code>go build</code> I get the following error message:\n<code>could not determine kind of name for C.free</code> (and nothing more, this is the whole compiler output).</p>\n\n<p>Removing <code>C.free(...)</code> is not acceptable to me, I must find how to properly free the memory allocated with <code>C.CString()</code>.</p>\n\n<p>I'm puzzled since, according to <a href=\"https://golang.org/cmd/cgo/\" rel=\"noreferrer\">documentation</a>, everything is done properly. I have not been able to find a solution nor searching here nor on the web.</p>\n"}, {"tags": ["c++", "c", "gcc", "g++", "libstdc++"], "comments": [{"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 1, "creation_date": 1432731154, "post_id": 30481166, "comment_id": 49044602, "body": "Maybe this lib needs a newer version of the libstdc++. Take a look if that version is listed here: &quot;find / -name &quot;libstdc++.so.5&quot; 2&gt; /dev/null -exec strings {} \\; | grep  &#39;GLIBCPP&quot;."}, {"owner": {"reputation": 163, "user_id": 4150781, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/779e24ca55bf33ecc2cf3232b7035c26?s=128&d=identicon&r=PG&f=1", "display_name": "Heinrich Heine", "link": "https://stackoverflow.com/users/4150781/heinrich-heine"}, "reply_to_user": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1432735606, "post_id": 30481166, "comment_id": 49048180, "body": "Hi,  the output of your command is identical to the following output: $ strings /usr/local/lib/libstdc++.so.5 | grep &#39;LIB&#39; I updated my question with the output of this command. What does that mean for us? That I need a newer version of the libstdc++.so.5 library?"}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1432745927, "post_id": 30481166, "comment_id": 49055714, "body": "I guess so, or an older version of the expansion lib or the expansion lib  recompiled with the old gcc and old c++ lib."}, {"owner": {"reputation": 163, "user_id": 4150781, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/779e24ca55bf33ecc2cf3232b7035c26?s=128&d=identicon&r=PG&f=1", "display_name": "Heinrich Heine", "link": "https://stackoverflow.com/users/4150781/heinrich-heine"}, "reply_to_user": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1432750084, "post_id": 30481166, "comment_id": 49058103, "body": "Hmm.. Got myself libstdc++.so.5.0.7 (I had 5.0.6) which contains the GLIBCPP_3.2 string.. The problem still persists.."}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1432758835, "post_id": 30481166, "comment_id": 49063035, "body": "Does it point to the correct lib? Try &quot;ldd -v libextension.so&quot;"}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1432759075, "post_id": 30481166, "comment_id": 49063153, "body": "Oh wait, you are trying to link and not run it. Then just ignore my last post sorry."}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1432759424, "post_id": 30481166, "comment_id": 49063326, "body": "But still if the lib itself has dependencies need to resolve it could be possible it points to the wrong libstdc++"}, {"owner": {"reputation": 163, "user_id": 4150781, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/779e24ca55bf33ecc2cf3232b7035c26?s=128&d=identicon&r=PG&f=1", "display_name": "Heinrich Heine", "link": "https://stackoverflow.com/users/4150781/heinrich-heine"}, "reply_to_user": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1432800547, "post_id": 30481166, "comment_id": 49077599, "body": "Hey, thanks for your help so far. The lib should be pointing to the correct libstdc++.. I updated my question with my findings. Any other suggestions?"}, {"owner": {"reputation": 163, "user_id": 4150781, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/779e24ca55bf33ecc2cf3232b7035c26?s=128&d=identicon&r=PG&f=1", "display_name": "Heinrich Heine", "link": "https://stackoverflow.com/users/4150781/heinrich-heine"}, "reply_to_user": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1432845094, "post_id": 30481166, "comment_id": 49108118, "body": "@fassi Found the solution! Thanks for your invaluable help!"}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1432845159, "post_id": 30481166, "comment_id": 49108155, "body": "Great! What was the problem?"}, {"owner": {"reputation": 163, "user_id": 4150781, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/779e24ca55bf33ecc2cf3232b7035c26?s=128&d=identicon&r=PG&f=1", "display_name": "Heinrich Heine", "link": "https://stackoverflow.com/users/4150781/heinrich-heine"}, "reply_to_user": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1432845467, "post_id": 30481166, "comment_id": 49108328, "body": "I posted an answer to the question. I still have to find out what exactly causes the problem. However, you were right. Apparently the linker could not find the libstdc++.so.5 library..."}], "answers": [{"tags": [], "owner": {"reputation": 163, "user_id": 4150781, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/779e24ca55bf33ecc2cf3232b7035c26?s=128&d=identicon&r=PG&f=1", "display_name": "Heinrich Heine", "link": "https://stackoverflow.com/users/4150781/heinrich-heine"}, "is_accepted": true, "score": 2, "last_activity_date": 1432845336, "last_edit_date": 1495540691, "creation_date": 1432845336, "answer_id": 30516609, "question_id": 30481166, "link": "https://stackoverflow.com/questions/30481166/compiling-against-libstdc-so-5-is-not-finding-symbols-glibcpp-3-2/30516609#30516609", "title": "compiling against libstdc++.so.5 is not finding symbols @GLIBCPP_3.2", "body": "<p>I have no idea what causes my linker not finding the lib on its own...\nThe following question helped me however find a \"workaround\" to my problem: <a href=\"https://stackoverflow.com/questions/4422493/how-to-force-linker-to-use-shared-library-instead-of-static-library\">how to force linker to use shared library instead of static library?</a> </p>\n\n<p>Simply forcing my linker to link against the library helped..</p>\n\n<pre><code>gcc -o app app.o {other libs} /usr/lib/libstdc++.so.5\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 4150781, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/779e24ca55bf33ecc2cf3232b7035c26?s=128&d=identicon&r=PG&f=1", "display_name": "Heinrich Heine", "link": "https://stackoverflow.com/users/4150781/heinrich-heine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 777, "favorite_count": 0, "accepted_answer_id": 30516609, "answer_count": 1, "score": 1, "last_activity_date": 1432845539, "creation_date": 1432726143, "last_edit_date": 1432845539, "question_id": 30481166, "link": "https://stackoverflow.com/questions/30481166/compiling-against-libstdc-so-5-is-not-finding-symbols-glibcpp-3-2", "title": "compiling against libstdc++.so.5 is not finding symbols @GLIBCPP_3.2", "body": "<p>I am building an application which makes use of a third party library which requires libstdc++.so.5. Until recently I was compiling my application with libstdc++.so.6 which worked fine, however it had some portability issues.</p>\n\n<p>Therefore I decided installing g++ version 3.3.4 in order to be capable of compiling my application with libstdc++.so.5. However now I cannot compile my application at all. Neither with my old g++ nor with the 3.3.4 Version of it... Building the application reports the following error message:</p>\n\n<pre><code>/opt/ExPansion/lib/libexpansion.so: undefined reference to `std::basic_istream&lt;char, std::char_traits&lt;char&gt; &gt;::basic_istream(std::basic_streambuf&lt;char, std::char_traits&lt;char&gt; &gt;*)@GLIBCPP_3.2'\n</code></pre>\n\n<p><strong>EDIT:</strong>\nInteresting might also be the output of the following commands:</p>\n\n<pre><code>$ strings /usr/lib/libstdc++.so.5 | grep 'LIB'    \nGLIBCPP_3.2\nGLIBCPP_3.2.1\nGLIBCPP_3.2.2\nGLIBCPP_3.2.3\nGLIBCPP_3.2.4\nGLIBC_2.0\nGLIBC_2.3\nGLIBC_2.1.3\nGLIBC_2.1\nGLIBC_2.2\nGLIBCPP_FORCE_NEW\n</code></pre>\n\n<p>The only thing that makes me wonder is the following:</p>\n\n<pre><code>$ nm /usr/lib/libstdc++.so.5\nnm: /usr/lib/libstdc++.so.5: no symbols\n</code></pre>\n\n<p>Is that \"normal\"? Is it possible that my lib is not containing the needed symbols? I downloaded this lib through: </p>\n\n<pre><code>yum install compat-libstdc++-33\n</code></pre>\n\n<p>..so it shouldn't be causing any problems..</p>\n\n<p>From my understanding @GLIBCPP_3.2 is provided by my libstdc++.so.5. So what could be going wrong here?</p>\n"}, {"tags": ["c", "command-line-interface", "main", "argv", "cmark"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432725684, "post_id": 30480976, "comment_id": 49040556, "body": "What is the result of <code>4 | 4</code> and <code>4 + 4</code>? You need to read about <a href=\"http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/bitwise.html\" rel=\"nofollow noreferrer\">Bitwise Operators</a>"}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1432725761, "post_id": 30480976, "comment_id": 49040600, "body": "BTW, why do not use loop and keep options as array of pairs name -&gt; mask."}, {"owner": {"reputation": 28742, "user_id": 318752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/v3hRK.jpg?s=128&g=1", "display_name": "Jeroen", "link": "https://stackoverflow.com/users/318752/jeroen"}, "edited": false, "score": 0, "creation_date": 1432726201, "post_id": 30480976, "comment_id": 49040886, "body": "Ok thanks I get it now. The benefit of <code>|=</code> is that it is idempotent if the same argument is specified twice. Otherwise <code>--sourcepos --sourcepos</code> would equal <code>--hardbreaks</code> which makes no sense."}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1432728897, "post_id": 30480976, "comment_id": 49042903, "body": "@Jeroen: if <code>--sourcepos</code> may be specified more than once, you may reserve multiple bits for it and use <code>+=</code> for it. For example, <code>preempt_count</code> in Linux works like this (a single word with multiple counters inside)."}], "owner": {"reputation": 28742, "user_id": 318752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/v3hRK.jpg?s=128&g=1", "display_name": "Jeroen", "link": "https://stackoverflow.com/users/318752/jeroen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1432725763, "answer_count": 0, "score": 0, "last_activity_date": 1432726173, "creation_date": 1432725624, "last_edit_date": 1432726173, "question_id": 30480976, "link": "https://stackoverflow.com/questions/30480976/using-for-cli-argument-parsing", "closed_reason": "Duplicate", "title": "Using |= for CLI argument parsing", "body": "<p>The CLI in <a href=\"https://github.com/jgm/cmark/blob/0.19.0/src/main.c#L87-L94\" rel=\"nofollow\">main.c</a> of cmark uses the <code>|=</code> operator for combining on/off options when iterating over arguments. A simplified version looks like:</p>\n\n<pre><code>#define CMARK_OPT_DEFAULT 0\n#define CMARK_OPT_SOURCEPOS 1\n#define CMARK_OPT_HARDBREAKS 2\n#define CMARK_OPT_NORMALIZE 4\n#define CMARK_OPT_SMART 8\n\nint options = CMARK_OPT_DEFAULT;\n\nfor (i = 1; i &lt; argc; i++) {\n    if (strcmp(argv[i], \"--sourcepos\") == 0) {\n        options |= CMARK_OPT_SOURCEPOS;\n    } else if (strcmp(argv[i], \"--hardbreaks\") == 0) {\n        options |= CMARK_OPT_HARDBREAKS;\n    } else if (strcmp(argv[i], \"--smart\") == 0) {\n        options |= CMARK_OPT_SMART;\n    } else if (strcmp(argv[i], \"--normalize\") == 0) {\n        options |= CMARK_OPT_NORMALIZE;\n    } \n    ...\n}\n</code></pre>\n\n<p>What is the benefit of using <code>|=</code> and not <code>+=</code> to add up the options?</p>\n"}, {"tags": ["c++", "c", "multithreading", "segmentation-fault"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1432725222, "post_id": 30480818, "comment_id": 49040226, "body": "Heh? what do you mean by <code>handle this safely and does not crash, although it tells me a segmentation fault</code>?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1432725262, "post_id": 30480818, "comment_id": 49040254, "body": "Also, you may like to read about <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a>."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1432725549, "post_id": 30480818, "comment_id": 49040450, "body": "There is another recent question about <i>recovering</i> a SIGSEGV, which is impossible."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1432725723, "post_id": 30480818, "comment_id": 49040574, "body": "@iharob By any chance, do you have any answer to my first comment? I&#39;m still confused."}, {"owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1432728067, "post_id": 30480818, "comment_id": 49042325, "body": "@SouravGhosh What I meant by &#39;not crash&#39; is that at least the system is still responsive to do my favours."}], "answers": [{"tags": [], "owner": {"reputation": 134, "user_id": 4940233, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6HvbdYCU7fk/AAAAAAAAAAI/AAAAAAAAAE8/eNQabHICh94/photo.jpg?sz=128", "display_name": "Fran Lupi&#243;n", "link": "https://stackoverflow.com/users/4940233/fran-lupi%c3%b3n"}, "is_accepted": false, "score": 3, "last_activity_date": 1432725594, "creation_date": 1432725594, "answer_id": 30480967, "question_id": 30480818, "link": "https://stackoverflow.com/questions/30480818/a-safe-segmentation-fault/30480967#30480967", "title": "A Safe Segmentation Fault?", "body": "<p>That segmentation fault probably means that you are trying to access memory outside the process reserve set by the kernel.</p>\n\n<p>You should try and fix the problem causing the segmentation fault, a tool very useful for memory analysis is <a href=\"http://valgrind.org/\" rel=\"nofollow\">Valgrind</a> you can install it from your ubuntu repositories.</p>\n"}, {"tags": [], "owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "is_accepted": true, "score": 4, "last_activity_date": 1432725598, "creation_date": 1432725598, "answer_id": 30480968, "question_id": 30480818, "link": "https://stackoverflow.com/questions/30480818/a-safe-segmentation-fault/30480968#30480968", "title": "A Safe Segmentation Fault?", "body": "<p>From what I understand, the main thread is freeing memory used by the drawing thread without any form of synchronization, i.e., the main thread may free that memory when it is being written by the drawing thread.</p>\n\n<p>It's not safe, and you most definitely shouldn't be leaving it that way. The exit handlers on the main thread should either stop the drawing thread, or wait for it to complete, and only then free the memory.</p>\n\n<p>As you describe it, your code has undefined behavior. Note that working as expected is a valid form of undefined behavior -- but it doesn't mean it will always work as expected. Anything can happen.</p>\n"}, {"tags": [], "owner": {"reputation": 4237, "user_id": 295726, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/cb26cbd67ecfd04292fe33fc5e3e4bb0?s=128&d=identicon&r=PG", "display_name": "holtavolt", "link": "https://stackoverflow.com/users/295726/holtavolt"}, "is_accepted": false, "score": 1, "last_activity_date": 1432725637, "creation_date": 1432725637, "answer_id": 30480987, "question_id": 30480818, "link": "https://stackoverflow.com/questions/30480818/a-safe-segmentation-fault/30480987#30480987", "title": "A Safe Segmentation Fault?", "body": "<p>This does not sound like a good design, and in fact sounds very similar to the <a href=\"http://en.wikipedia.org/wiki/Coding_by_exception\" rel=\"nofollow\">Coding by exception</a> anti-pattern.  It would be better to have the thread post the event back to the main tread, and perform a 'join' to have a controlled shut-down.</p>\n"}, {"comments": [{"owner": {"reputation": 1505, "user_id": 2641513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bGWLp.jpg?s=128&g=1", "display_name": "zoska", "link": "https://stackoverflow.com/users/2641513/zoska"}, "edited": false, "score": 0, "creation_date": 1432733764, "post_id": 30482389, "comment_id": 49046700, "body": "Sleep in a loop is not really the best way of synchronization, since you have better mechanisms."}, {"owner": {"reputation": 1, "user_id": 3878426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e21f51e3094280ddbfc677176e9250?s=128&d=identicon&r=PG&f=1", "display_name": "me_4C", "link": "https://stackoverflow.com/users/3878426/me-4c"}, "reply_to_user": {"reputation": 1505, "user_id": 2641513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bGWLp.jpg?s=128&g=1", "display_name": "zoska", "link": "https://stackoverflow.com/users/2641513/zoska"}, "edited": false, "score": 0, "creation_date": 1432765935, "post_id": 30482389, "comment_id": 49066090, "body": "Not for sincronization, but if you only check if the threads have finished their work, you can use a loop in a low priority thread, so a sleep can be added here. As the question said the problem is not sicronization, but the way of closing the application. In order to close a multithreaded app you need to assure that all threads have finished working so that is what i suggest with flags"}, {"owner": {"reputation": 1505, "user_id": 2641513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bGWLp.jpg?s=128&g=1", "display_name": "zoska", "link": "https://stackoverflow.com/users/2641513/zoska"}, "edited": false, "score": 0, "creation_date": 1432802321, "post_id": 30482389, "comment_id": 49078699, "body": "Well, waiting for some kind of event to happen in different thread/process is usually a synchronization problem. Active waiting (even with sleep) is not the best idea."}], "tags": [], "owner": {"reputation": 1, "user_id": 3878426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e21f51e3094280ddbfc677176e9250?s=128&d=identicon&r=PG&f=1", "display_name": "me_4C", "link": "https://stackoverflow.com/users/3878426/me-4c"}, "is_accepted": false, "score": 0, "last_activity_date": 1432729536, "creation_date": 1432729536, "answer_id": 30482389, "question_id": 30480818, "link": "https://stackoverflow.com/questions/30480818/a-safe-segmentation-fault/30482389#30482389", "title": "A Safe Segmentation Fault?", "body": "<p>When you want to exit the program, you can just hide the gui and try to flag all the threads that are running to stop. Before call exit on the program check in a loop until all the threads have been stopped with a timeout of iterations. To avoid overloading the cpu put a sleep on this loop</p>\n"}], "owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 30480968, "answer_count": 4, "score": 2, "last_activity_date": 1432729536, "creation_date": 1432725163, "question_id": 30480818, "link": "https://stackoverflow.com/questions/30480818/a-safe-segmentation-fault", "title": "A Safe Segmentation Fault?", "body": "<p>In my simple game, there is a thread that does the drawing to the screen. I made my program throw an exit signal as an exception when I press the ESC key. Whenever this exception is caught, the clean-up function is called and the program exits. This 'expected' segmentation fault occurs when the clean-up function is called while a drawing to the screen was not completed, and as a result the drawing thread is somewhat orphaned. My Ubuntu Linux OS seems to handle this safely and does not crash, although it tells me a segmentation fault. Do you think it is fine to leave it this way? If not, what kind of serious problems I may face? I'm just a little interested in what happens deep inside the system in such situations.</p>\n"}, {"tags": ["c", "mpi", "deadlock"], "comments": [{"owner": {"reputation": 47129, "user_id": 463827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwR2m.jpg?s=128&g=1", "display_name": "Jonathan Dursi", "link": "https://stackoverflow.com/users/463827/jonathan-dursi"}, "edited": false, "score": 4, "creation_date": 1432731951, "post_id": 30479817, "comment_id": 49045262, "body": "You can&#39;t really have tasks opt out of collective communications.  The best option is probably just to have the tasks that are done continue to participate, but &quot;sending&quot; a sentinel value which won&#39;t be the minimum, like INT_MIN from limits.h, and then when the minimum value is INT_MIN, you know everyone&#39; done.  You could split the communicator, but splitting the communicator every single iteration - or even just checking if you have to - is going to be expensive too."}], "answers": [{"tags": [], "owner": {"reputation": 2085, "user_id": 4371080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb71c0f8f249373532fd27cc817c563?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Sarofeen", "link": "https://stackoverflow.com/users/4371080/christian-sarofeen"}, "is_accepted": false, "score": 0, "last_activity_date": 1432776401, "creation_date": 1432776401, "answer_id": 30495735, "question_id": 30479817, "link": "https://stackoverflow.com/questions/30479817/mpi-deadlock-with-collective-functions/30495735#30495735", "title": "MPI Deadlock with collective functions", "body": "<p>If you have control over a process before it terminates you should send a non-blocking flag to a rank that cannot terminate early (lets call it the root rank). Then instead of having a blocking all_reduce, you could have sends from all ranks to the root rank with their value.</p>\n\n<p>The root rank could post non-blocking receives for a possible flag, and the value. All ranks would have to have sent one or the other. Once all ranks are accounted for you can do the reduce on the root rank, remove exited ranks from communication and broadcast it.</p>\n\n<p>If your ranks exit without notice, I am not sure what options you have.</p>\n"}], "owner": {"reputation": 59, "user_id": 4943842, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206874918861436/picture?type=large", "display_name": "Gianluca Brilli", "link": "https://stackoverflow.com/users/4943842/gianluca-brilli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 378, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1432776401, "creation_date": 1432722496, "last_edit_date": 1432724966, "question_id": 30479817, "link": "https://stackoverflow.com/questions/30479817/mpi-deadlock-with-collective-functions", "title": "MPI Deadlock with collective functions", "body": "<p>I'm writing a simple program in C with MPI library.\nThe intent of this program is the following:</p>\n\n<p>I have a group of processes that perform an iterative loop, at the end of this loop all processes in the communicator must call two collective functions(<code>MPI_Allreduce</code> and <code>MPI_Bcast</code>). The first one sends the id of the processes that have generated the minimum value of the <code>num.val</code> variable, and the second one broadcasts from the source <code>num_min.idx_v</code> to all processes in the communicator <code>MPI_COMM_WORLD</code>.</p>\n\n<p>The problem is that I don't know if the i-th process will be finalized before calling the collective functions. All processes have a probability of 1/10 to terminate. This simulates the behaviour of the real program that I'm implementing. And when the first process terminates, the others cause deadlock.</p>\n\n<p>This is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;mpi.h&gt;\n\ntypedef struct double_int{\n    double val;\n    int idx_v;\n}double_int;\n\nint main(int argc, char **argv)\n{\n    int n = 10;\n    int max_it = 4000;\n    int proc_id, n_proc;double *x = (double *)malloc(n*sizeof(double));\n\n    MPI_Init(&amp;argc, &amp;argv);\n\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;n_proc);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;proc_id);\n\n    srand(proc_id);\n\n    double_int num_min;\n    double_int num;\n\n    int k;\n    for(k = 0; k &lt; max_it; k++){\n\n        num.idx_v = proc_id;\n        num.val = rand()/(double)RAND_MAX;\n\n        if((rand() % 10) == 0){\n\n            printf(\"iter %d: proc %d terminato\\n\", k, proc_id);\n\n            MPI_Finalize();\n            exit(EXIT_SUCCESS);\n        }\n\n        MPI_Allreduce(&amp;num, &amp;num_min, 1, MPI_DOUBLE_INT, MPI_MINLOC, MPI_COMM_WORLD);\n        MPI_Bcast(x, n, MPI_DOUBLE, num_min.idx_v, MPI_COMM_WORLD);\n    }\n\n    MPI_Finalize();\n    exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>Perhaps I should create a new group and new communicator before calling MPI_Finalize function in the if statement? How should I solve this?</p>\n"}, {"tags": ["c++", "c", "vector"], "comments": [{"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1432722110, "post_id": 30479632, "comment_id": 49038075, "body": "Do you look for the same element multiple times? If so, you can cache the result."}, {"owner": {"reputation": 3908, "user_id": 124797, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Nm3vK.jpg?s=128&g=1", "display_name": "Jagannath", "link": "https://stackoverflow.com/users/124797/jagannath"}, "edited": false, "score": 0, "creation_date": 1432722165, "post_id": 30479632, "comment_id": 49038107, "body": "What type of data the vector has ?"}, {"owner": {"reputation": 8600, "user_id": 450758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ccb382a98f56c846d0e064f44920dc?s=128&d=identicon&r=PG", "display_name": "marko", "link": "https://stackoverflow.com/users/450758/marko"}, "edited": false, "score": 0, "creation_date": 1432722170, "post_id": 30479632, "comment_id": 49038115, "body": "To provide a meaningful answer, we would need to know the other constraints - for instance. the expected performance of insertion (and if used, removal) operations."}, {"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1432722389, "post_id": 30479632, "comment_id": 49038246, "body": "A trie should be faster if you can organize your data that way."}, {"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1432722432, "post_id": 30479632, "comment_id": 49038274, "body": "The binary search will need log_{2}(81e7)  ~= 30 steps at most. Are you sure that size is your problem?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1432722710, "post_id": 30479632, "comment_id": 49038484, "body": "Perhaps the <code>90.000 * 9000</code> hints at a vector of vectors? Micha is right, a binary search on a 1D vector can be quite hard to beat. Possibly <code>std::unordered_set&lt; &gt;</code> (hash table) ?"}, {"owner": {"reputation": 853, "user_id": 4360034, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f288ec78f7cde374ca038375bc32cc21?s=128&d=identicon&r=PG&f=1", "display_name": "Steg Verner", "link": "https://stackoverflow.com/users/4360034/steg-verner"}, "reply_to_user": {"reputation": 3908, "user_id": 124797, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Nm3vK.jpg?s=128&g=1", "display_name": "Jagannath", "link": "https://stackoverflow.com/users/124797/jagannath"}, "edited": false, "score": 0, "creation_date": 1432722898, "post_id": 30479632, "comment_id": 49038630, "body": "@Jagannath vector has unsigned elements"}, {"owner": {"reputation": 853, "user_id": 4360034, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f288ec78f7cde374ca038375bc32cc21?s=128&d=identicon&r=PG&f=1", "display_name": "Steg Verner", "link": "https://stackoverflow.com/users/4360034/steg-verner"}, "reply_to_user": {"reputation": 8600, "user_id": 450758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ccb382a98f56c846d0e064f44920dc?s=128&d=identicon&r=PG", "display_name": "marko", "link": "https://stackoverflow.com/users/450758/marko"}, "edited": false, "score": 0, "creation_date": 1432723040, "post_id": 30479632, "comment_id": 49038720, "body": "@marko I perform insertion (bulk-insertion) only once. The rest of the times I perform only lookups, so the main overhead here is because of lookups"}, {"owner": {"reputation": 853, "user_id": 4360034, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f288ec78f7cde374ca038375bc32cc21?s=128&d=identicon&r=PG&f=1", "display_name": "Steg Verner", "link": "https://stackoverflow.com/users/4360034/steg-verner"}, "reply_to_user": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1432723076, "post_id": 30479632, "comment_id": 49038745, "body": "@MichaWiedenmann Time and again performing binary search is a problem..as I need to perform binary search a million times"}, {"owner": {"reputation": 853, "user_id": 4360034, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f288ec78f7cde374ca038375bc32cc21?s=128&d=identicon&r=PG&f=1", "display_name": "Steg Verner", "link": "https://stackoverflow.com/users/4360034/steg-verner"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1432723124, "post_id": 30479632, "comment_id": 49038787, "body": "@MSalters * implies multiplication. It is a 1 D array of size 90,000 multiplied by 9,000 elements"}], "answers": [{"comments": [{"owner": {"reputation": 8600, "user_id": 450758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ccb382a98f56c846d0e064f44920dc?s=128&d=identicon&r=PG", "display_name": "marko", "link": "https://stackoverflow.com/users/450758/marko"}, "edited": false, "score": 0, "creation_date": 1432722419, "post_id": 30479726, "comment_id": 49038267, "body": "I wondered about the 90,000 * 9000 requirement and whether this implied that the vector was being used as a 2d array - in which case, the index of the element might be what is being found."}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "reply_to_user": {"reputation": 8600, "user_id": 450758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ccb382a98f56c846d0e064f44920dc?s=128&d=identicon&r=PG", "display_name": "marko", "link": "https://stackoverflow.com/users/450758/marko"}, "edited": false, "score": 0, "creation_date": 1432722649, "post_id": 30479726, "comment_id": 49038437, "body": "@marko yes you&#39;re right in this case it may be worth to change the unordered_map templated parameters to e.g. <code>std::unordered_map&lt;std::pair&lt;int, int&gt;, sometype&gt;</code>"}, {"owner": {"reputation": 853, "user_id": 4360034, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f288ec78f7cde374ca038375bc32cc21?s=128&d=identicon&r=PG&f=1", "display_name": "Steg Verner", "link": "https://stackoverflow.com/users/4360034/steg-verner"}, "reply_to_user": {"reputation": 8600, "user_id": 450758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ccb382a98f56c846d0e064f44920dc?s=128&d=identicon&r=PG", "display_name": "marko", "link": "https://stackoverflow.com/users/450758/marko"}, "edited": false, "score": 0, "creation_date": 1432722817, "post_id": 30479726, "comment_id": 49038566, "body": "@marko The vector being used is a 1-D array. * stands for multiplication..:)"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1432722822, "post_id": 30479726, "comment_id": 49038571, "body": "I think you don&#39;t want a <code>map</code> but a <code>set</code> - there&#39;s no key/value separation."}, {"owner": {"reputation": 8600, "user_id": 450758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ccb382a98f56c846d0e064f44920dc?s=128&d=identicon&r=PG", "display_name": "marko", "link": "https://stackoverflow.com/users/450758/marko"}, "edited": false, "score": 0, "creation_date": 1432723194, "post_id": 30479726, "comment_id": 49038834, "body": "Using <code>boost::multi_index</code> might be an option too using both <code>random_access_index</code> and <code>hashed_index</code> as indices.  You get O(1) conversion between index types - so in this case we&#39;d use the hash_index to find the item in close to  O(1) and covert back to array index (also  O(1))."}, {"owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "edited": false, "score": 0, "creation_date": 1432723446, "post_id": 30479726, "comment_id": 49038995, "body": "If he is using a binary_search lookup time will already be O(log n) so map and set will not be fast. If anything it will be slow due to less localized memory. An unordered_set should be faster though."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "edited": false, "score": 0, "creation_date": 1432723566, "post_id": 30479726, "comment_id": 49039074, "body": "@doron: A binary search doesn&#39;t have locality of reference on a <code>std::vector</code>, precisely because the vector is contiguous and the binary search only accesses adjacent elements in the very last step."}, {"owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1432724535, "post_id": 30479726, "comment_id": 49039725, "body": "@MSalters - given the size of the vector, you are right."}], "tags": [], "owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1432722887, "last_edit_date": 1432722887, "creation_date": 1432722230, "answer_id": 30479726, "question_id": 30479632, "link": "https://stackoverflow.com/questions/30479632/how-to-efficiently-look-up-elements-in-a-large-vector/30479726#30479726", "title": "How to efficiently look up elements in a large vector", "body": "<p>If you do not need iterate through the collection (in a sorted manner) since c++11 you could use <code>std::unordered_set&lt;yourtype&gt;</code> all you need to do is to provide the collection way of getting hashing and equality information for <code>yourtype</code>. The time of accessing element of the collection is here amortised O(1), unlike sorted vector where it's O(log(n)).</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1432722751, "post_id": 30479886, "comment_id": 49038513, "body": "The question specifies binary_search, which is neither O(1) or O(N) but O(log N). Also, <code>vector</code> is backed by contiguous memory, not an associative array or a linked list."}, {"owner": {"reputation": 33506, "user_id": 706456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8440c1cc847e9fd1e0272853724e6060?s=128&d=identicon&r=PG", "display_name": "oleksii", "link": "https://stackoverflow.com/users/706456/oleksii"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1432722920, "post_id": 30479886, "comment_id": 49038646, "body": "No, the question doesn&#39;t say that. The question is, I qoute:  <i>&quot;I need to find many times whether an element exists in this vector or not?&quot;</i>. Binary search is the solution that OP attempted and indeed binary search is <code>O(logN)</code>, but he can do it in <code>O(1)</code> with a hashtable, which is what I suggested as one of the options."}], "tags": [], "owner": {"reputation": 33506, "user_id": 706456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8440c1cc847e9fd1e0272853724e6060?s=128&d=identicon&r=PG", "display_name": "oleksii", "link": "https://stackoverflow.com/users/706456/oleksii"}, "is_accepted": false, "score": 3, "last_activity_date": 1432723123, "last_edit_date": 1432723123, "creation_date": 1432722659, "answer_id": 30479886, "question_id": 30479632, "link": "https://stackoverflow.com/questions/30479632/how-to-efficiently-look-up-elements-in-a-large-vector/30479886#30479886", "title": "How to efficiently look up elements in a large vector", "body": "<p>Depending on the actual data structure of the vector the <code>contains</code> operation may take an <code>O(n)</code> or <code>O(1)</code>. Usually, it's <code>O(N)</code> if vector is backed by either associative array or linked list, in this case <code>contains</code> will be a full scan in the worst case scenario. You have mitigated a full scan by ordering and using binary search, which is <code>O(log (N))</code>. <code>Log N</code> is pretty good complexity with only <code>O(1)</code> being better. So your choice is either:</p>\n\n<ul>\n<li>Cache look up result for the items, this might be a good compromise if you have many repetitions of the same element</li>\n<li>Replace vector with another data structure with efficient <code>contains</code> operation such as the one based on a <a href=\"http://www.cplusplus.com/reference/unordered_map/unordered_map/\" rel=\"nofollow\">hashtable</a> or <a href=\"http://www.cplusplus.com/reference/set/set/\" rel=\"nofollow\">set</a>. Note you may loose other features, such as ordering of items</li>\n<li>Use two data structures, one for <code>contains</code> operations and original vector for whatever you use it for</li>\n<li>Use a third data structure that offers a compromise, for example a data structure that work well with <a href=\"https://code.google.com/p/bloom/\" rel=\"nofollow\">bloom filter</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 853, "user_id": 4360034, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f288ec78f7cde374ca038375bc32cc21?s=128&d=identicon&r=PG&f=1", "display_name": "Steg Verner", "link": "https://stackoverflow.com/users/4360034/steg-verner"}, "edited": false, "score": 0, "creation_date": 1432723474, "post_id": 30480189, "comment_id": 49039013, "body": "I am not able to understand how can I use std::vector&lt;bool&gt;"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 853, "user_id": 4360034, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f288ec78f7cde374ca038375bc32cc21?s=128&d=identicon&r=PG&f=1", "display_name": "Steg Verner", "link": "https://stackoverflow.com/users/4360034/steg-verner"}, "edited": false, "score": 1, "creation_date": 1432723732, "post_id": 30480189, "comment_id": 49039188, "body": "@StegVerner: Simple: you start with a vector of <code>UNIT_MAX</code> values, all false. To insert 42, you set <code>v[42]=true</code>. To remove 42, <code>v[42]=false</code>. To check if 42 is present,  <code>if (v[42])</code>"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 10, "last_activity_date": 1432724013, "last_edit_date": 1432724013, "creation_date": 1432723381, "answer_id": 30480189, "question_id": 30479632, "link": "https://stackoverflow.com/questions/30479632/how-to-efficiently-look-up-elements-in-a-large-vector/30480189#30480189", "title": "How to efficiently look up elements in a large vector", "body": "<p>You've got 810 million values out of 4 billion possible values (assuming 32 bits <code>unsigned</code>). That's 1/5th of the total range, and uses 3.2 GB. This means you're in fact better of with a <code>std::vector&lt;bool&gt;</code> with 4 billion bits. This gives you O(1) lookup in less space (0.5 GB).</p>\n\n<p>(In theory, <code>unsigned</code> could be 16 bits. <code>unsigned long</code> is <em>at least</em> 32 bits, <code>std::uint32_t</code> might be what you want)</p>\n"}, {"tags": [], "owner": {"reputation": 6039, "user_id": 439599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b60ad58b64cdd58cd3bbc7ec30a0fe?s=128&d=identicon&r=PG", "display_name": "uesp", "link": "https://stackoverflow.com/users/439599/uesp"}, "is_accepted": false, "score": 2, "last_activity_date": 1432733859, "creation_date": 1432733859, "answer_id": 30484173, "question_id": 30479632, "link": "https://stackoverflow.com/questions/30479632/how-to-efficiently-look-up-elements-in-a-large-vector/30484173#30484173", "title": "How to efficiently look up elements in a large vector", "body": "<blockquote>\n  <p>However on profiling using perf I find that looking up elements in\n  vector is the slowest operation.</p>\n</blockquote>\n\n<p>That is half of the information you need, the other half being <strong><em>\"how fast is it compared to other algorithms/containers\"</em></strong>? Maybe using <code>std::vector&lt;&gt;</code> is actually the fastest, or maybe its the slowest. To find you'll have to benchmark/profile a few different designs.</p>\n\n<p>For example, the following are <em>very naive</em> benchmarks using random integers on 1000x9000 sized containers (I would get seg-faults on larger sizes for the maps, assumably a limit of 32-bit memory). </p>\n\n<p>If you need a count of non-unique integers:</p>\n\n<ul>\n<li><code>std::vector&lt;unsigned&gt;</code> = <strong>500 ms</strong></li>\n<li><code>std::map&lt;unsigned, unsigned&gt;</code> = <strong>1700 ms</strong></li>\n<li><code>std::unordered_map&lt;unsigned, unsigned&gt;</code> = <strong>3700 ms</strong></li>\n</ul>\n\n<p>If you just need to test for the presence of unique integers:</p>\n\n<ul>\n<li><code>std::vector&lt;bool&gt;</code> = <strong>15 ms</strong></li>\n<li><code>std::bitset&lt;&gt;</code> = <strong>50 ms</strong></li>\n<li><code>std::set&lt;unsigned&gt;</code> = <strong>350 ms</strong></li>\n</ul>\n\n<p>Note that we're not too interested in the exact values but rather the relative comparisons between containers. <code>std::map&lt;&gt;</code> is relatively slow which is not surprising given the number of dynamic allocations and non-locality of the data involved. The bitsets are by far the fastest but don't work if need the counts of non-unique integers.</p>\n\n<p>I would suggest doing a similar benchmark using your exact container sizes and contents, both of which may well affect the benchmark results. It may turn out that <code>std::vector&lt;&gt;</code> may be the best solution after all but now you have some data to back up that design choice.</p>\n"}], "owner": {"reputation": 853, "user_id": 4360034, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f288ec78f7cde374ca038375bc32cc21?s=128&d=identicon&r=PG&f=1", "display_name": "Steg Verner", "link": "https://stackoverflow.com/users/4360034/steg-verner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 2, "accepted_answer_id": 30480189, "answer_count": 4, "score": 3, "last_activity_date": 1432733859, "creation_date": 1432721985, "last_edit_date": 1432723018, "question_id": 30479632, "link": "https://stackoverflow.com/questions/30479632/how-to-efficiently-look-up-elements-in-a-large-vector", "title": "How to efficiently look up elements in a large vector", "body": "<p>I have a <code>vector&lt;unsigned&gt;</code> of size <code>(90,000 * 9,000)</code>. I need to find many times whether an element exists in this vector or not? </p>\n\n<p>For doing so, I stored the vector in a sorted form using <code>std::sort()</code> and then looked up elements in the vector using <code>std::binary_search()</code>. However on profiling using <code>perf</code> I find that looking up elements in <code>vector&lt;unsigned&gt;</code> is the slowest operation.</p>\n\n<p>Can someone suggest some <code>data-structure</code> in <code>C/C++</code> which I can use to efficiently look up elements in a vector of <code>(90,000 * 9,000)</code> elements.</p>\n\n<p>I perform insertion (bulk-insertion) only once. The rest of the times I perform only lookups, so the main overhead here is because of lookups.</p>\n"}, {"tags": ["c", "linux", "file", "file-io", "dev-c++"], "comments": [{"owner": {"reputation": 844, "user_id": 4927891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d6bbefea663dbeed1e0bd871c43d62c?s=128&d=identicon&r=PG&f=1", "display_name": "Bertrand125", "link": "https://stackoverflow.com/users/4927891/bertrand125"}, "edited": false, "score": 0, "creation_date": 1432740533, "post_id": 30479518, "comment_id": 49052159, "body": "I edited my answer to post an example of how to check errno."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4925053, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204114404164242/picture?type=large", "display_name": "Thomas M", "link": "https://stackoverflow.com/users/4925053/thomas-m"}, "edited": false, "score": 0, "creation_date": 1432735561, "post_id": 30479622, "comment_id": 49048147, "body": "Thank you! I have added this fopen() check and it has failed. what should I do?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 21, "user_id": 4925053, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204114404164242/picture?type=large", "display_name": "Thomas M", "link": "https://stackoverflow.com/users/4925053/thomas-m"}, "edited": false, "score": 0, "creation_date": 1432735621, "post_id": 30479622, "comment_id": 49048196, "body": "@ThomasM I told...check <code>errno</code> for the reson behind the failure."}, {"owner": {"reputation": 21, "user_id": 4925053, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204114404164242/picture?type=large", "display_name": "Thomas M", "link": "https://stackoverflow.com/users/4925053/thomas-m"}, "edited": false, "score": 0, "creation_date": 1432736427, "post_id": 30479622, "comment_id": 49048839, "body": "how do i check errno?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1432724284, "last_edit_date": 1432724284, "creation_date": 1432721961, "answer_id": 30479622, "question_id": 30479518, "link": "https://stackoverflow.com/questions/30479518/dev-c-isnt-writing-output-file-to-disk/30479622#30479622", "title": "Dev-C++ isn&#39;t writing output file to disk", "body": "<p>Always check the success of <code>fopen()</code> before using the returned pointer. Otherwise, if <code>fopen()</code> fails (to open the file), using the returned <code>FILE *</code> further will be <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n\n<p>Additionally, upon <code>fopen()</code> failure, you can check the <code>errno</code> to decide the reson behind the failure.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 4925053, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204114404164242/picture?type=large", "display_name": "Thomas M", "link": "https://stackoverflow.com/users/4925053/thomas-m"}, "edited": false, "score": 0, "creation_date": 1432735171, "post_id": 30479869, "comment_id": 49047872, "body": "replacing &quot;wb&quot; with &quot;w&quot; did not change the outcome, thankd for your help though = )"}, {"owner": {"reputation": 2595, "user_id": 3897316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cf468fea626f3aec65a199e2f67b309?s=128&d=identicon&r=PG&f=1", "display_name": "Degustaf", "link": "https://stackoverflow.com/users/3897316/degustaf"}, "edited": false, "score": 0, "creation_date": 1432741244, "post_id": 30479869, "comment_id": 49052679, "body": "<code>func_errno</code> is a bad re-implementation of an already available function, <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/\" rel=\"nofollow noreferrer\">strerror</a>."}], "tags": [], "owner": {"reputation": 844, "user_id": 4927891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d6bbefea663dbeed1e0bd871c43d62c?s=128&d=identicon&r=PG&f=1", "display_name": "Bertrand125", "link": "https://stackoverflow.com/users/4927891/bertrand125"}, "is_accepted": false, "score": 0, "last_activity_date": 1432748603, "last_edit_date": 1432748603, "creation_date": 1432722617, "answer_id": 30479869, "question_id": 30479518, "link": "https://stackoverflow.com/questions/30479518/dev-c-isnt-writing-output-file-to-disk/30479869#30479869", "title": "Dev-C++ isn&#39;t writing output file to disk", "body": "<p>On Windows and mingw, you may need to open the file in binary mode, adding a \"b\" to the fopen mode:</p>\n\n<pre><code>fp_1 = fopen(\"fred.out\",\"wb\");\n</code></pre>\n\n<p>Edit2: As Degustaf said in comments, you can use <code>char * strerror(int errnum)</code>, including errno.h and string.h, to know what was the error:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    FILE *fp_1;\n    float mat[3][3] = {{1,2,3},{4,5,6},{7,8,9}};\n    int i,j;\n\n    fp_1 = fopen(\"fred.out\",\"w\");\n    if(fp_1 == NULL) {\n        printf(\"\\n%s\",strerror(errno));\n        return 1;\n    }\n\n    for (j=0;j&lt;3;j++)\n    {\n        for (i=0;i&lt;3;i++)\n            fprintf(fp_1,\" %+10.2f\\n\",mat[j][i]);\n        fprintf(fp_1,\"\\n\");\n    }\n    fclose(fp_1);\n\n    getch();\n    return 0;\n}\n</code></pre>\n\n<p>Edit: You can check errno by the following way, including errno.h, and checking for the variable named \"errno\". In the following example, there are some errors not listed, because fopen can set errno to the same errors than malloc, see man pages of fopen, open, and malloc for more details:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;errno.h&gt;\n\nvoid func_errno() {\n\n  switch(errno) {\n\n    case EACCES: printf(\"\\nEACCES\"); break;\n    case EEXIST: printf(\"\\nEEXIST\"); break;\n    case EFAULT: printf(\"\\nEFAULT\"); break;\n    case EFBIG: printf(\"\\nEFBIG\"); break;\n    case EINTR: printf(\"\\nEINTR\"); break;\n    case EISDIR: printf(\"\\nEISDIR\"); break;\n    case ELOOP: printf(\"\\nELOOP\"); break;\n    case EMFILE: printf(\"\\nEMFILE\"); break;\n    case ENAMETOOLONG: printf(\"\\nENAMETOOLONG\"); break;\n    case ENFILE: printf(\"\\nENFILE\"); break;\n    case ENODEV: printf(\"\\nENODEV\"); break;\n    case ENOENT: printf(\"\\nENOENT\"); break;\n    case ENOMEM: printf(\"\\nENOMEM\"); break;\n    case ENOSPC: printf(\"\\nENOSPC\"); break;\n    case ENOTDIR: printf(\"\\nENOTDIR\"); break;\n    case ENXIO: printf(\"\\nENXIO\"); break;\n    case EOVERFLOW: printf(\"\\nEOVERFLOW\"); break;\n    case EPERM: printf(\"\\nEPERM\"); break;\n    case EROFS: printf(\"\\nEROFS\"); break;\n    case EWOULDBLOCK: printf(\"\\nEWOULDBLOCK\"); break;\n    default: printf(\"\\nOther error.\"); break;\n  }\n}\n\n\nint main(void)\n{\n    FILE *fp_1;\n    float mat[3][3] = {{1,2,3},{4,5,6},{7,8,9}};\n    int i,j;\n\n    fp_1 = fopen(\"fred.out\",\"w\");\n    if(fp_1 == NULL) {\n        func_errno();\n        return 1;\n    }\n\n    for (j=0;j&lt;3;j++)\n    {\n        for (i=0;i&lt;3;i++)\n            fprintf(fp_1,\" %+10.2f\\n\",mat[j][i]);\n        fprintf(fp_1,\"\\n\");\n    }\n    fclose(fp_1);\n\n    getch();\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 4925053, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204114404164242/picture?type=large", "display_name": "Thomas M", "link": "https://stackoverflow.com/users/4925053/thomas-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1432862938, "creation_date": 1432862938, "answer_id": 30519703, "question_id": 30479518, "link": "https://stackoverflow.com/questions/30479518/dev-c-isnt-writing-output-file-to-disk/30519703#30519703", "title": "Dev-C++ isn&#39;t writing output file to disk", "body": "<p>I'm not sure what was wrong but I copied my files from my thumb-disk to my hard-drive and it had no problem writing files. Thanks for all your answers guys!</p>\n"}], "owner": {"reputation": 21, "user_id": 4925053, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204114404164242/picture?type=large", "display_name": "Thomas M", "link": "https://stackoverflow.com/users/4925053/thomas-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1432862938, "creation_date": 1432721695, "last_edit_date": 1432736211, "question_id": 30479518, "link": "https://stackoverflow.com/questions/30479518/dev-c-isnt-writing-output-file-to-disk", "title": "Dev-C++ isn&#39;t writing output file to disk", "body": "<p>When I run my program on linux at uni the program works fine. The <code>fred.out</code> file is created. But when I run it at home on Dev-C++ it does not write an output file.</p>\n\n<p>How do I fix this? I have been searching and trying for a couple of hours now. I have tried including multiple libraries. Could this be a security issue?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    FILE *fp_1;\n    float mat[3][3] = {{1,2,3},{4,5,6},{7,8,9}};\n    int i,j;\n\n    fp_1 = fopen(\"fred.out\",\"w\");\n    for (j=0;j&lt;3;j++)\n    {\n        for (i=0;i&lt;3;i++)\n            fprintf(fp_1,\" %+10.2f\\n\",mat[j][i]);\n        fprintf(fp_1,\"\\n\");\n    }\n    fclose(fp_1);\n\n    getch();\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p><img src=\"https://i.stack.imgur.com/npIRU.png\" alt=\"after entering a fopen() check\"></p>\n"}, {"tags": ["c", "typedef", "gmp", "ruby-c-extension"], "comments": [{"owner": {"reputation": 137011, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "edited": false, "score": 0, "creation_date": 1432721202, "post_id": 30479106, "comment_id": 49037488, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/4835112/some-questions-about-a-single-instance-array-in-typedef\">Some questions about a single-instance array in typedef</a>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1432721660, "post_id": 30479106, "comment_id": 49037782, "body": "OT: Why couldn&#39;t you just pass the address of simple <code>struct</code> var using the <code>&amp;</code>-operator?"}, {"owner": {"reputation": 104, "user_id": 3926828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1260f67f7edb00afccc51767b1b55de2?s=128&d=identicon&r=PG&f=1", "display_name": "Abinash Meher", "link": "https://stackoverflow.com/users/3926828/abinash-meher"}, "reply_to_user": {"reputation": 137011, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "edited": false, "score": 0, "creation_date": 1432721951, "post_id": 30479106, "comment_id": 49037980, "body": "@ecatmur Thanks! That helps but only a part of the question. The side effects are unaswered."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1432724589, "post_id": 30479106, "comment_id": 49039780, "body": "Regarding side-effect: <code>mpz_t m; __mpz_struct * p = &amp;(m[0]) + 1;</code> would be valid, whereas <code>__mpz_struct MP_INT; __mpz_struct * p = (&amp;MP_INT) + 1;</code> wouldn&#39;t."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1432744584, "post_id": 30479106, "comment_id": 49054894, "body": "That doesn&#39;t seem to be part of the current GMP sources. It would help if you gave a precise link to the source of that quote so we can look at the context..."}, {"owner": {"reputation": 104, "user_id": 3926828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1260f67f7edb00afccc51767b1b55de2?s=128&d=identicon&r=PG&f=1", "display_name": "Abinash Meher", "link": "https://stackoverflow.com/users/3926828/abinash-meher"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1432816244, "post_id": 30479106, "comment_id": 49088775, "body": "@MarcGlisse Here is the link <a href=\"https://github.com/srawlins/gmp/blob/master/ext/ruby_gmp.h#L25\" rel=\"nofollow noreferrer\">github.com/srawlins/gmp/blob/master/ext/ruby_gmp.h#L25</a>"}, {"owner": {"reputation": 104, "user_id": 3926828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1260f67f7edb00afccc51767b1b55de2?s=128&d=identicon&r=PG&f=1", "display_name": "Abinash Meher", "link": "https://stackoverflow.com/users/3926828/abinash-meher"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1432816449, "post_id": 30479106, "comment_id": 49088944, "body": "@alk In your latest comment did you mean <code>MP_INT some_variable; __mpz_struct * p = (&amp;some_variable) + 1;</code>  because this would work."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1432817254, "post_id": 30479106, "comment_id": 49089580, "body": "I indeed ment <code>MPINT some_variable;</code>. This <code>MP_INT * p = (&amp;some_variable) + 1;</code> however will invoke undefined bahaviour. @AbinashMeher"}], "answers": [{"tags": [], "owner": {"reputation": 1334, "user_id": 2156785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQr9B.jpg?s=128&g=1", "display_name": "ANjaNA", "link": "https://stackoverflow.com/users/2156785/anjana"}, "is_accepted": false, "score": 0, "last_activity_date": 1432721387, "creation_date": 1432721387, "answer_id": 30479401, "question_id": 30479106, "link": "https://stackoverflow.com/questions/30479106/possible-side-effects-of-doing-a-typedef-of-a-struct-to-an-array-of-one-element/30479401#30479401", "title": "Possible side effects of doing a typedef of a struct to an array of one element in C", "body": "<p>Look at this sample code</p>\n\n<pre><code>typedef char type24[3];\n</code></pre>\n\n<p>Same as your, but well known data type 'char' insted of your struct <code>__mpz_struct</code> type.</p>\n\n<p>above type def means, I am using above typedef to represent char[3].</p>\n\n<p>So in your sample code, </p>\n\n<pre><code>typedef __mpz_struct mpz_t[1];\n</code></pre>\n\n<p><code>mpz_t</code> should be <code>__mpz_struct</code> type. </p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1432724843, "post_id": 30479583, "comment_id": 49039936, "body": "Nitpicking: &quot;<i>the name of an array &quot;decays&quot;</i>&quot; the name is gone after compilation, so the array &quot;decays&quot;."}, {"owner": {"reputation": 141, "user_id": 3324271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a825874654d3057c20cd43048106573?s=128&d=identicon&r=PG&f=1", "display_name": "Olaf Seibert", "link": "https://stackoverflow.com/users/3324271/olaf-seibert"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1432725290, "post_id": 30479583, "comment_id": 49040278, "body": "well, yes, but to use it in an expression you have to use its name. But I&#39;ll rephrase a bit indeed."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1432725457, "post_id": 30479583, "comment_id": 49040385, "body": "Who commented on my comment you or your name? ;-)"}], "tags": [], "owner": {"reputation": 141, "user_id": 3324271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a825874654d3057c20cd43048106573?s=128&d=identicon&r=PG&f=1", "display_name": "Olaf Seibert", "link": "https://stackoverflow.com/users/3324271/olaf-seibert"}, "is_accepted": false, "score": 2, "last_activity_date": 1432726765, "last_edit_date": 1432726765, "creation_date": 1432721857, "answer_id": 30479583, "question_id": 30479106, "link": "https://stackoverflow.com/questions/30479106/possible-side-effects-of-doing-a-typedef-of-a-struct-to-an-array-of-one-element/30479583#30479583", "title": "Possible side effects of doing a typedef of a struct to an array of one element in C", "body": "<p>I see two parts to your question. The first part, how the typedef works for passing arguments to functions, would better be illustrated with an example. Without it, I'll have to guess a bit.</p>\n\n<p>In C function declarations, <a href=\"http://c-faq.com/aryptr/aryptrparam.html\" rel=\"nofollow\">an array parameter is equivalent to a pointer</a>. That's why you see (for example) equivalently for the main function,</p>\n\n<pre><code>int main(int argc, char **argv)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int main(int argc, char *argv[])\n</code></pre>\n\n<p>Similarly, if a function in your program would be declared</p>\n\n<pre><code>int func(__mpz_struct *arg)\n</code></pre>\n\n<p>it would be equivalent to</p>\n\n<pre><code>int func(__mpz_struct arg[])\n</code></pre>\n\n<p>and hence to</p>\n\n<pre><code>int func(mpz_t arg)\n</code></pre>\n\n<p>Also, on the calling side, if you have a variable of type mpz_t, hence the array, and you pass it to a function, the \"<a href=\"http://c-faq.com/aryptr/aryptrequiv.html\" rel=\"nofollow\">pointer decay</a>\" takes effect: in an expression, if you use (the name of) an array it \"decays\" into a pointer to its first element.\nThis way you can call the function:</p>\n\n<pre><code>mpz_t value;\nfunc(value);\n</code></pre>\n\n<p>Of course, to modify these mpz_t objects outside of the API functions, you still have to be aware of their true nature.</p>\n\n<p>The side effects that you mention, I would also have to guess about them. Possibly it is meant that you have to be aware you're working with pointers inside the functions. It might be considered better to make that explicit by using the pointer syntax.</p>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432778195, "post_id": 30479692, "comment_id": 49069214, "body": "these two examples: void set_S(struct S * ps) {   ps[0] = 40;   ps[0] = 2.; }  is equivalent to  void set_S(struct S ps[1]) {   ps[0] = 40;   ps[0] = 2.; } are not correct.  the field names need to be reference, like ps[0].f and ps[0].i"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432791081, "post_id": 30479692, "comment_id": 49072631, "body": "@user3629249: Fixed. Thanks!"}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 2, "last_activity_date": 1432791056, "last_edit_date": 1432791056, "creation_date": 1432722113, "answer_id": 30479692, "question_id": 30479106, "link": "https://stackoverflow.com/questions/30479106/possible-side-effects-of-doing-a-typedef-of-a-struct-to-an-array-of-one-element/30479692#30479692", "title": "Possible side effects of doing a typedef of a struct to an array of one element in C", "body": "<p>Passing an array to a function let's the array decay to a pointer to it's 1st element.</p>\n\n<p>One can achieve the same effect by applying the Address-Of operator <code>&amp;</code> to a simple variable of the same type as the array's elements.</p>\n\n<p>Examples:</p>\n\n<pre><code>struct S\n{\n   int i;\n   float f;\n};\n</code></pre>\n\n<p>This</p>\n\n<pre><code>void set_S(struct S * ps)\n{\n  ps-&gt;i = 40;\n  ps-&gt;f = 2.;\n}\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>void set_S(struct S ps[1])\n{\n  ps-&gt;i = 40;\n  ps-&gt;f = 2.;\n}\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>void set_S(struct S * ps)\n{\n  ps[0].i = 40;\n  ps[0].f = 2.;\n}\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>void set_S(struct S ps[1])\n{\n  ps[0].i = 40;\n  ps[0].f = 2.;\n}\n</code></pre>\n\n<p>One-Element-Array approach:</p>\n\n<pre><code>typedef struct S Array_of_S_with_size_1[1];\n\nint main(void)\n{\n  Array_of_S_with_size_1 array_of_S_with_size_1;\n  array_of_S_with_size_1[0].i = 0;\n  array_of_S_with_size_1[0].f = 0.;\n\n  set_S(array_of_S_with_size_1);\n\n  ...\n}\n</code></pre>\n\n<p>The above <code>main()</code> provides the same functionality as the following:</p>\n\n<pre><code>int main(void)\n{\n  struct S s;\n  s.i = 0;\n  s.f = 0.;\n\n  set_S(&amp;s);\n\n  ...\n}\n</code></pre>\n\n<p>I do not see any gain using the \"<em>One-Element-Array</em>\" approach. An expection might be if the <code>&amp;</code>-key is broken on ones keyboard ... ;-)</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7739499, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/0cc866d1394a70f9ffd07d0e71095bad?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/7739499/david"}, "is_accepted": false, "score": 1, "last_activity_date": 1490008489, "creation_date": 1490008489, "answer_id": 42902157, "question_id": 30479106, "link": "https://stackoverflow.com/questions/30479106/possible-side-effects-of-doing-a-typedef-of-a-struct-to-an-array-of-one-element/42902157#42902157", "title": "Possible side effects of doing a typedef of a struct to an array of one element in C", "body": "<p>You can assign an MP_INT to another but you can not assign an mpz_t to another since assignment is not defined for arrays. If you do not want your clients to assign variables other than by your methods (which might do memory managements and stuff) this is the trick for you.</p>\n"}], "owner": {"reputation": 104, "user_id": 3926828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1260f67f7edb00afccc51767b1b55de2?s=128&d=identicon&r=PG&f=1", "display_name": "Abinash Meher", "link": "https://stackoverflow.com/users/3926828/abinash-meher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 30479692, "answer_count": 4, "score": 6, "last_activity_date": 1490008489, "creation_date": 1432720670, "last_edit_date": 1432721824, "question_id": 30479106, "link": "https://stackoverflow.com/questions/30479106/possible-side-effects-of-doing-a-typedef-of-a-struct-to-an-array-of-one-element", "title": "Possible side effects of doing a typedef of a struct to an array of one element in C", "body": "<p>I came across this code.</p>\n\n<pre><code>typedef __mpz_struct MP_INT;\ntypedef __mpz_struct mpz_t[1];\n</code></pre>\n\n<p>Here the struct <code>__mpz_struct</code> is a struct that is typedefed to an array of single element. I understand that this is a trick to pass by reference in C. Then <code>mpz_t</code> has been used as a type to declare variables and pass them to function as parameters. Also, There was one more comment</p>\n\n<pre><code>/*\n  MP_INT*, MP_RAT* and MP_FLOAT* are used because they don't have side-effects\n  of single-element arrays mp*_t\n*/\n</code></pre>\n\n<p><strong>What kind of side effects are they talking about?</strong></p>\n"}, {"tags": ["c", "naming"], "comments": [{"owner": {"reputation": 3200, "user_id": 1038709, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/beb90c989dab16915affaec83961931e?s=128&d=identicon&r=PG", "display_name": "Se&#231;kin Sava\u015f&#231;\u0131", "link": "https://stackoverflow.com/users/1038709/se%c3%a7kin-sava%c5%9f%c3%a7%c4%b1"}, "edited": false, "score": 2, "creation_date": 1432720805, "post_id": 30478936, "comment_id": 49037219, "body": "You are not shadowing anything, IMO. Your approach is simply round robin. I suggest <code>status_selected</code> or similar."}, {"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 0, "creation_date": 1432720806, "post_id": 30478936, "comment_id": 49037221, "body": "I like <code>status_shadow</code>, it was immediately clear what you were doing. A possibly related term is &quot;working set&quot;, which might have been a better name if it was an actual set of variables."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1432720826, "post_id": 30478936, "comment_id": 49037236, "body": "OT: Copying the <code>struct</code> would also take time. Wether this is few then pushing a pointer value on the stack a few times might be a subject to discuss."}, {"owner": {"reputation": 38927, "user_id": 279313, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4ab0299c28ce807a9ca21041ed6ef085?s=128&d=identicon&r=PG", "display_name": "Alex F", "link": "https://stackoverflow.com/users/279313/alex-f"}, "edited": false, "score": 1, "creation_date": 1432720838, "post_id": 30478936, "comment_id": 49037245, "body": "<code>current_status, active_status</code>? I don&#39;t see shadowing here."}], "answers": [{"tags": [], "owner": {"reputation": 2178, "user_id": 1980925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UgYrw.jpg?s=128&g=1", "display_name": "Alex Mazzariol", "link": "https://stackoverflow.com/users/1980925/alex-mazzariol"}, "is_accepted": true, "score": 3, "last_activity_date": 1432721004, "creation_date": 1432721004, "answer_id": 30479263, "question_id": 30478936, "link": "https://stackoverflow.com/questions/30478936/what-would-be-the-correct-variable-name/30479263#30479263", "title": "What would be the correct variable name?", "body": "<p>You are not technically shadowing; you would have to define a variable of the same <strong>name</strong> to shadow it. Moreover, shadowing is generally frowned upon because careless use could lead to easy confusion.</p>\n\n<p>What you are doing is taking the <strong>current item</strong> for your cycle, so a suited name could be <code>current_status</code> or <code>cur_status</code>. If you used it as a parameter, so the name would be only contained into the <code>for()</code>, it could have been <code>current</code> or <code>cur_item</code> as well.</p>\n\n<p>Another idea could be <code>temp_channel_status</code>, implying that the value is not to be considered fixed albeit the variable is global.</p>\n"}, {"tags": [], "owner": {"reputation": 844, "user_id": 4927891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d6bbefea663dbeed1e0bd871c43d62c?s=128&d=identicon&r=PG&f=1", "display_name": "Bertrand125", "link": "https://stackoverflow.com/users/4927891/bertrand125"}, "is_accepted": false, "score": 0, "last_activity_date": 1432764005, "last_edit_date": 1432764005, "creation_date": 1432721187, "answer_id": 30479329, "question_id": 30478936, "link": "https://stackoverflow.com/questions/30478936/what-would-be-the-correct-variable-name/30479329#30479329", "title": "What would be the correct variable name?", "body": "<p>You could use <code>status_local</code>, or <code>status_local_copy</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 3324271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a825874654d3057c20cd43048106573?s=128&d=identicon&r=PG&f=1", "display_name": "Olaf Seibert", "link": "https://stackoverflow.com/users/3324271/olaf-seibert"}, "is_accepted": false, "score": 0, "last_activity_date": 1432723599, "creation_date": 1432723599, "answer_id": 30480265, "question_id": 30478936, "link": "https://stackoverflow.com/questions/30478936/what-would-be-the-correct-variable-name/30480265#30480265", "title": "What would be the correct variable name?", "body": "<p>I would like a name such as <code>work_status</code> or <code>status_copy</code>.</p>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 30479263, "answer_count": 3, "score": 1, "last_activity_date": 1432764005, "creation_date": 1432720308, "last_edit_date": 1592644375, "question_id": 30478936, "link": "https://stackoverflow.com/questions/30478936/what-would-be-the-correct-variable-name", "title": "What would be the correct variable name?", "body": "<p>In a implementation for a real time embedded device, I have a status register variable for each channel (let's blindly assume my embedded device have multiple channels and some work has to be done for each of them).</p>\n<p>So here's how the status variable is currently declared:</p>\n<pre><code>struct channel_status status[NCHANNELS];\n</code></pre>\n<p>Matter of performance, it is better to use an intermediate global variable that is the copy of the <code>status</code> variable for the selected channel.</p>\n<p>Example:</p>\n<pre><code>struct channel_status status_shadow;\n\nvoid some_work() {\n    for(channel = 0; channel &lt; NCHANNELS; channel++) {\n        status_shadow = status[channel]; \n        foo(); // Function that use the status_shadow as global\n        bar(); // &quot;\n        baz(); // &quot;\n        status[channel] = status_shadow;\n}\n</code></pre>\n<p>Am I not discussing the implementation neither the possibility to use a pointer instead of a variable. My question is related to the name of the intermediate variable.</p>\n<p>I chose <code>status_shadow</code> because I think I am doing some kind of <a href=\"http://en.wikipedia.org/wiki/Variable_shadowing\" rel=\"nofollow noreferrer\">shadowing</a>.</p>\n<blockquote>\n<p>Is there a better/more accurate <em>technical</em> name for such intermediate variable ?</p>\n</blockquote>\n<h3>Implementation considerations:</h3>\n<p>The reason why I decided to use this intermediate variable is because it is too resource consuming to pass either the channel pointer <code>i</code> or the status variable to each function <code>foo</code>, <code>bar</code>, <code>baz</code>, ... In terms of performance avoiding stack push/pop can save some precious time in real-time applications.</p>\n"}, {"tags": ["c", "multidimensional-array"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1432720528, "post_id": 30478921, "comment_id": 49037038, "body": "&quot;<i>I&#39;m trying to implement this code</i>&quot;. No. You don&#39;t implement code. You implement an algorithm, an idea, anything, <i>with</i> code. If you have code, it&#39;s <i>already</i> implemented, even if it&#39;s not doing what you need."}], "answers": [{"tags": [], "owner": {"reputation": 159, "user_id": 3274972, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1397981865/picture?type=large", "display_name": "Aqeel Abbas", "link": "https://stackoverflow.com/users/3274972/aqeel-abbas"}, "is_accepted": false, "score": 1, "last_activity_date": 1432720480, "creation_date": 1432720480, "answer_id": 30479011, "question_id": 30478921, "link": "https://stackoverflow.com/questions/30478921/error-in-c-code-while-using-2d-array/30479011#30479011", "title": "Error in C code while using 2d array", "body": "<p>What you need to know is that in C/C++ array starts from 0 to array length -1. Change this in <code>for loops</code> and see what happens</p>\n"}, {"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": true, "score": 2, "last_activity_date": 1432720503, "creation_date": 1432720503, "answer_id": 30479020, "question_id": 30478921, "link": "https://stackoverflow.com/questions/30478921/error-in-c-code-while-using-2d-array/30479020#30479020", "title": "Error in C code while using 2d array", "body": "<p>C uses 0 based indexing. So, the valid indices of an array start from 0 and end at length-1. </p>\n\n<p>This means that you'll have to modify your loops. This:</p>\n\n<pre><code>for(i=1;i&lt;=m;i++)\n</code></pre>\n\n<p>and needs to be</p>\n\n<pre><code>for(i=0;i&lt;m;i++)\n</code></pre>\n\n<p>You'll need to do the same for the all the other loops. Otherwise, you access an invalid array index and this leads to Undefined Behavior.</p>\n"}], "owner": {"reputation": 1106, "user_id": 4685152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/60c8f86c84be6709de90a02f65b4df5a?s=128&d=identicon&r=PG&f=1", "display_name": "Noober", "link": "https://stackoverflow.com/users/4685152/noober"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 30479020, "answer_count": 2, "score": 0, "last_activity_date": 1432720957, "creation_date": 1432720280, "last_edit_date": 1432720957, "question_id": 30478921, "link": "https://stackoverflow.com/questions/30478921/error-in-c-code-while-using-2d-array", "title": "Error in C code while using 2d array", "body": "<p>I am trying to implement this simple code(no algo as such).</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main()\n{\n    int l,h1,h2,h3,i,j,t,m,n;\n   scanf(\"%d %d\",&amp;m,&amp;n);\n\n    int A[m][n];\n    for(i=1;i&lt;=m;i++)\n       {\n            for(j=1;j&lt;=n;j++)\n             scanf(\"%d\",&amp;A[i][j]);\n       }\n\n    int n1=m*n;\n    int adj[n1][n1];\n    printf(\"Before initialization array A =\\n\");\n    for(i=1;i&lt;=m;i++)\n        {\n            for(j=1;j&lt;=n;j++)\n                printf(\"%d \",A[i][j]);\n            printf(\"\\n\");\n\n        }\n    for(i=1;i&lt;=n1;i++)\n        {\n          for(j=1;j&lt;=n1;j++)\n             adj[i][j]=-1;\n        }\n    printf(\"After initialization array A =\\n\");\n    for(i=1;i&lt;=m;i++)\n        {\n          for(j=1;j&lt;=n;j++)\n            printf(\"%d \",A[i][j]);\n            printf(\"\\n\");\n\n       }\n    return 0;\n}\n</code></pre>\n\n<p>This is my input file       -</p>\n\n<pre><code>4 3 \n2 3 2\n2 5 1\n5 3 1\n3 1 1\n</code></pre>\n\n<p>So here 1st 2 elements are m,n i.e. no of rows and columns.Then for m rows there are n elements.I store these elements in a 2d array <code>A</code>. I then print this array.It gives the correct answer.Then I am making new arrary <code>adj[m*n][m*n]</code>.I initialize this array to <code>-1</code>.After that when I print my <code>A</code> array back first five element of <code>A</code> also becomes -1.I am not changing value of <code>A</code>.So why is this happening.This is the output I get-</p>\n\n<pre><code>Before initialization array A =\n2 3 2 \n2 5 1 \n5 3 1 \n3 1 1 \nAfter initialization array A =\n-1 -1 -1 \n-1 -1 1 \n5 3 1 \n3 1 1 \n</code></pre>\n"}, {"tags": ["c", "pointers", "struct", "nested"], "comments": [{"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 0, "creation_date": 1432724330, "post_id": 30478829, "comment_id": 49039588, "body": "Too much code, narrow your problem down to <a href=\"http://stackoverflow.com/help/mcve\">a Minimal, Complete, and Verifiable example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 9554, "user_id": 3306465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MAduK.png?s=128&g=1", "display_name": "Igal S.", "link": "https://stackoverflow.com/users/3306465/igal-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1432732548, "last_edit_date": 1495541665, "creation_date": 1432732548, "answer_id": 30483617, "question_id": 30478829, "link": "https://stackoverflow.com/questions/30478829/using-nested-struct-with-with-pointers/30483617#30483617", "title": "Using nested struct with with Pointers", "body": "<p>In case 4 you are allocating <code>numOfDocuments</code> size array, meaning the range of the array is <code>0</code> to <code>numOfDocuments-1</code> - so in the next line you should not access <code>docs[numOfDocuments]</code>, you probably meant to use <code>docs[numOfDocuments-1]</code></p>\n\n<p>Regardless, you have several other issues in the code. Just in the following line for example:</p>\n\n<pre><code>(*folder).docs=(Folder **)malloc(sizeof(Folder **)*numOfDocuments)\n</code></pre>\n\n<p>It should be</p>\n\n<pre><code>folder-&gt;docs= malloc(sizeof(Folder *)*numOfDocuments)\n</code></pre>\n\n<ol>\n<li>Use <code>p-&gt;</code> instead of (*p) - it is just semantic, but it is the common way.</li>\n<li><a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc/605858#605858\">Don't cast return value of malloc</a></li>\n<li>The correct size should be of (Folder*) - it has no affect in your case, because size of pointer is the same size of pointer to pointer, but it is wrong to do it that way.</li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 2982731, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cd18cea4d42d382b4b5051a919b3a584?s=128&d=identicon&r=PG&f=1", "display_name": "user2982731", "link": "https://stackoverflow.com/users/2982731/user2982731"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432732548, "creation_date": 1432720062, "last_edit_date": 1432724151, "question_id": 30478829, "link": "https://stackoverflow.com/questions/30478829/using-nested-struct-with-with-pointers", "title": "Using nested struct with with Pointers", "body": "<p>I have an exercise in which I have to print the list of the document's names that exists in a Folder. </p>\n\n<p>By the program i can type detailes for each new document including Document's name.  Basicly i have to build  2 structs : </p>\n\n<ul>\n<li>one for the Document's detailes</li>\n<li>and the other one for the Folder</li>\n</ul>\n\n<p>In Folder's struct there is a nested struct that should contain the Document's details (<code>Document struct</code>). For my understanding i have to store each document's detailes in the Folder. </p>\n\n<p>My <em>question</em> is how can I store the document's detais in the Folder and how can I print by using <code>PrintFolderDetails</code> function. Is it correct to write double astrics by writing : <code>struct document **docs</code>; </p>\n\n<p>I've tried to  assign  in <code>option 4</code> after copying the document but i get the message: </p>\n\n<blockquote>\n  <p>access violation reading location...</p>\n</blockquote>\n\n<p>Here is my Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define LENGTH 100\n\ntypedef struct document\n{\n    char *docName;\n    int  linesAmountInDoc;\n    char **docContent;\n}Document;\n\ntypedef struct folder\n{\n    char folderName[20];\n    struct document **docs;\n}Folder;\n\nvoid NewFolder();\nvoid MainMenu();    \nDocument *NewDocument(char *);\nvoid EditDocument(Document *);\nvoid PrintDocument(Document *);\nDocument *CopyDocument(Document *, int numOfDocuments);\nvoid DeleteDocument(Document *);\nvoid ListDocsInFolder();\nvoid PrintFolderDetailes(Folder *fldr, int numOfDocuments); \n\n\nvoid main()\n{\n    NewFolder();\n    MainMenu();\n}\n\n\n//Creates the new Folder\nvoid NewFolder()\n{\n    Document *docs =(Document *)malloc(sizeof(Document));\n    Folder *folder=(Folder *)malloc(sizeof(Folder));\n    char *foldName;\n    int folderSize;\n\n    foldName=(char *)malloc(sizeof(char )*20);\n    printf(\"Please enter the Folder's name : \");\n    scanf(\"%s\", foldName);\n    strcpy(folder-&gt;folderName, foldName);\n    printf(\"How many documents do you want in your Folder : \");\n    scanf(\"%d\", &amp;folderSize);\n\n    folder-&gt;docs=(Document **)malloc(sizeof(Document )*folderSize);\n\n    PrintFolderDetailes(folder, folderSize);\n\n    printf(\"A new Folder has been created \\n \");\n}\n\n\nvoid MainMenu()\n{\n    char quit ;\n    int menuOption, numOfDocuments=0;\n    Document *doc=(Document *)malloc(sizeof(Document));\n    Document *copyDoc=(Document *)malloc(sizeof(Document));\n    Folder *folder=(Folder *)malloc(sizeof(Folder));\n    //folder-&gt;docs= (Document **)malloc(sizeof(Document)*10);\n    do\n    {\n        printf(\"\\nWelcom to Document System \\n\");\n        printf(\"1. Create Docuent \\n\");\n        printf(\"2. Edit Document \\n\");\n        printf(\"3. Print Document \\n\");\n        printf(\"4. Copy Document \\n\");\n        printf(\"5. Delete Document \\n\");\n        printf(\"6. Show List of Documents in Folder \\n\");\n        printf(\"\\nChoose one of the Options above : \");\n        scanf(\"%d\", &amp;menuOption);\n\n        switch(menuOption)\n        {\n        case 1:\n            printf(\"Enter your Document name : \");\n            doc-&gt;docName=(char *)malloc(sizeof(char *)*LENGTH);\n            scanf(\"%s\", doc-&gt;docName);\n            doc=NewDocument(doc-&gt;docName); \n            break;\n        case 2:\n            EditDocument(doc);\n            break;\n        case 3:\n            PrintDocument(doc);\n            break;\n        case 4:\n            numOfDocuments+=1;\n            copyDoc=CopyDocument(doc, numOfDocuments);\n            (*folder).docs=(Folder **)malloc(sizeof(Folder **)*numOfDocuments);              \n            strcpy((*folder).docs[numOfDocuments]-&gt;docName, copyDoc-&gt;docName); //access violation            \n            //strcpy(folder-&gt;docs[numOfDocuments].docName,copyDoc-&gt;docName);   //access violation   \n            break;\n        case 5:\n            DeleteDocument(doc);\n            break;\n        case 6:\n            PrintFolderDetailes(folder, numOfDocuments);\n            break;\n        default:\n            scanf(\"%c\", &amp;quit) ;\n            break;\n        }\n\n        quit=getchar();\n        //getchar();\n\n    }while (quit != 'q');\n}\n\n\nDocument* NewDocument(char *docName)\n{\n    Document *newDocument;\n    newDocument=(Document*)malloc(sizeof(Document));\n    newDocument-&gt;docName= docName;\n    newDocument-&gt;linesAmountInDoc=0;\n    newDocument-&gt;docContent=(char **)malloc(sizeof(char));\n    return newDocument;\n}\n\nvoid EditDocument(Document *document)\n{\n    int i;\n    printf(\"Please enter How many lines do you want to write ? \");\n    scanf(\"%d\", &amp;(*document).linesAmountInDoc);\n    printf(\"You can write %d lines in your Document \\n \",    \n    (*document).linesAmountInDoc-1);\n    //The number of lines in Document\n    (*document).docContent=(char **)malloc(sizeof(char **)*(*document).linesAmountInDoc);  \n\n    printf(\"Please enter the content of the Document \\n\");\n    for(i=0;i&lt;document-&gt;linesAmountInDoc;i++)\n    {\n        (*document).docContent[i]=(char *)malloc(sizeof(char *)*LENGTH);     \n        //the length of each line\n        //scanf(\"%s\", (*document).docContent[i]); //Typing the sentence without spaces between words\n        gets((*document).docContent[i]);\n    }\n}\n\nvoid PrintDocument(Document *document)\n{\n    int i=0;\n    printf(\"Document name : \");\n    printf(\"%s \\n\", document-&gt;docName);\n    puts(\"========================\");\n    for(i=0;i&lt;(*document).linesAmountInDoc;i++)\n    {\n        printf(\"%s\\n\", (*document).docContent[i]);\n    }\n}\n\nDocument *CopyDocument(Document *document, int numOfDocuments)\n{\n    char *documentName=(char *)malloc(sizeof(char)*8);\n    char *documentNumber=(char *)malloc(sizeof(char)*2);\n    char *documentNameAndNumber=(char *)malloc(sizeof(strlen(document-&gt;docName)+1));\n\n    strcpy(documentName, document-&gt;docName);\n    sprintf(documentNumber, \"%d\" , numOfDocuments) ;    //casting the document's serial number to characters\n    strcpy(documentNameAndNumber, documentName);\n    strcat(documentNameAndNumber, documentNumber);      //concatenate the document's name &amp; number\n    strcpy(document-&gt;docName, documentNameAndNumber);   //Good!!!\n\n    //For checking the copying results\n    PrintDocument(document);\n    printf(\"The Document has been copied \\n\");\n    return document;\n}\n\n\nvoid DeleteDocument(Document *document)\n{\n    free((*document).docName);\n    free((*document).docContent);\n\n    free(document);\n    document=NULL;\n\n    printf(\"The tow Documents has been deleted\");\n}\n\n\nvoid PrintFolderDetailes(Folder *folder, int numOfDocuments)\n{\n    int i=0;\n\n    printf(\"Folder name : \");\n    printf(\"%s \\n\", folder-&gt;folderName);\n    puts(\"========================\");\n\n    if(numOfDocuments==0)\n    {\n        printf(\"The Folder %s is empty \\n\", folder-&gt;folderName);\n        return;\n    }\n    else\n    {\n        for(i=0;i&lt;numOfDocuments;i++)\n        {\n            //strcpy((*folder).docs[i].docName,doc-&gt;docName);\n            printf(\"%s\\n\", (*folder).docs[i]-&gt;docName);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "sockets"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1432720082, "post_id": 30478801, "comment_id": 49036711, "body": "You forgot to post the relevant source code."}, {"owner": {"reputation": 41, "user_id": 2531564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b49e7cded420898014a7ca36d7d2a1c?s=128&d=identicon&r=PG", "display_name": "user2531564", "link": "https://stackoverflow.com/users/2531564/user2531564"}, "edited": false, "score": 0, "creation_date": 1432720290, "post_id": 30478801, "comment_id": 49036867, "body": "There you go. I have edited and added the source code"}, {"owner": {"reputation": 41, "user_id": 2531564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b49e7cded420898014a7ca36d7d2a1c?s=128&d=identicon&r=PG", "display_name": "user2531564", "link": "https://stackoverflow.com/users/2531564/user2531564"}, "reply_to_user": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 0, "creation_date": 1432720359, "post_id": 30478801, "comment_id": 49036914, "body": "@user1095108 : Could u please elaborate"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1432720456, "post_id": 30478801, "comment_id": 49036989, "body": "remove <code>logDebug1</code>, and check again"}, {"owner": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 1, "creation_date": 1432720837, "post_id": 30478801, "comment_id": 49037243, "body": "@user2531564 Never mind, you&#39;re interpreting errno wrongly."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 2531564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b49e7cded420898014a7ca36d7d2a1c?s=128&d=identicon&r=PG", "display_name": "user2531564", "link": "https://stackoverflow.com/users/2531564/user2531564"}, "edited": false, "score": 0, "creation_date": 1432721219, "post_id": 30479110, "comment_id": 49037501, "body": "logDebug1 and logPError and logTimestamp are the functions that print data using printf and perror functions.. My query on broader picture is that, what are the possible reasons to get Illegal seek error ."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "reply_to_user": {"reputation": 41, "user_id": 2531564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b49e7cded420898014a7ca36d7d2a1c?s=128&d=identicon&r=PG", "display_name": "user2531564", "link": "https://stackoverflow.com/users/2531564/user2531564"}, "edited": false, "score": 1, "creation_date": 1432721310, "post_id": 30479110, "comment_id": 49037558, "body": "@user2531564: if you don&#39;t reflect on what he wrote, how should we know whether you understood a word of it?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 41, "user_id": 2531564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b49e7cded420898014a7ca36d7d2a1c?s=128&d=identicon&r=PG", "display_name": "user2531564", "link": "https://stackoverflow.com/users/2531564/user2531564"}, "edited": false, "score": 1, "creation_date": 1432722305, "post_id": 30479110, "comment_id": 49038197, "body": "@user2531564 The &#39;broader picture&#39; is that you <i>didn&#39;t</i> get an &#39;illegal seek&#39; error from a socket operation. You got a <i>presently unknown</i> error, which you corrupted by doing other things between getting it and printing it. Do pay attention."}], "tags": [], "owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "is_accepted": false, "score": 3, "last_activity_date": 1432720682, "creation_date": 1432720682, "answer_id": 30479110, "question_id": 30478801, "link": "https://stackoverflow.com/questions/30478801/probable-reasons-for-illegal-seek-in-socket-programming/30479110#30479110", "title": "Probable reasons for Illegal seek in socket programming", "body": "<p><strong>You're not interpreting the right error</strong> because of the intervening <code>logDebug1</code> call.</p>\n\n<ul>\n<li>You have a <code>send</code> that returns something &lt;= 0 and possibly an <code>errno</code> that you could inspect</li>\n<li>You print something (<code>logDebug1</code>) <strong>which likely clobbers <code>errno</code></strong></li>\n<li>You do some sort of <code>perror</code> which interprets the clobbered <code>errno</code></li>\n</ul>\n\n<p>What you want to do instead is check if <code>sentBytes &lt; 0</code>, <strong><code>perror</code> immediately</strong> and then maybe print more debugging stuff if you want.</p>\n"}], "owner": {"reputation": 41, "user_id": 2531564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b49e7cded420898014a7ca36d7d2a1c?s=128&d=identicon&r=PG", "display_name": "user2531564", "link": "https://stackoverflow.com/users/2531564/user2531564"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "closed_date": 1432770336, "answer_count": 1, "score": -5, "last_activity_date": 1432720682, "creation_date": 1432719995, "last_edit_date": 1432720250, "question_id": 30478801, "link": "https://stackoverflow.com/questions/30478801/probable-reasons-for-illegal-seek-in-socket-programming", "closed_reason": "Not suitable for this site", "title": "Probable reasons for Illegal seek in socket programming", "body": "<p>I have received following error while sending data.</p>\n\n<p>send:29-Illegal seek</p>\n\n<p>Please explain the probable reasons for it. I am new to socket programming. Thanks in advance.</p>\n\n<pre><code>CHAR datasend[200];\n    DOUBLE64 fTime=0.0;\n    LONG32 sent_bytes=0;\n    while(TRUE)\n    {\n            memset(datasend,0,200);\n            fTime=getTime();\n            sprintf(datasend,\"0=%.0lf \",fTime);\n            sent_bytes = send ( isockfd, datasend, strlen(datasend),0);\n            logDebug1(\"Pulse is %s and data bytes is %d\",datasend,strlen(datasend));\n            if(sent_bytes &lt;= 0)\n            {\n                    logPError(\"send\");\n                    logTimestamp(\"Closing socket\\n\");\n                    close(isockfd);\n                    return NULL;\n            }\n\n            sleep(25);\n\n    }\n</code></pre>\n"}, {"tags": ["c", "file-io", "file-descriptor", "process-substitution"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1432719790, "post_id": 30478699, "comment_id": 49036469, "body": "Suggestion: check for <code>argc &gt; n</code> before using <code>argv[n]</code>"}, {"owner": {"reputation": 181, "user_id": 4878867, "user_type": "registered", "profile_image": "https://graph.facebook.com/795614867213112/picture?type=large", "display_name": "AccessViolation", "link": "https://stackoverflow.com/users/4878867/accessviolation"}, "edited": false, "score": 0, "creation_date": 1432719905, "post_id": 30478699, "comment_id": 49036579, "body": "True - in one case You have file name in <code>argv</code> in other You have the contents of the file in standard input"}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 1, "creation_date": 1432720265, "post_id": 30478699, "comment_id": 49036843, "body": "No, the second call doesn&#39;t have to (and can&#39;t) read the <code>cat</code> command&#39;s output from its stdin. <code>&lt;()</code> will make bash will generate a FIFO at <code>&#47;dev&#47;fd&#47;somenumber</code> that is supposed to be opened and read from like a file. However, because it&#39;s not a regular file, you can&#39;t use <code>fseek</code>, <code>ftell</code> etc. on it, and that is the problem here -- you&#39;ll not be able to know the length of the &quot;file&quot; in advance and have to rewrite your program accordingly."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1432720683, "post_id": 30478699, "comment_id": 49037130, "body": "Add: If you inspect <code>errno</code> after the <code>ftell</code> and <code>fseek</code> calls, you&#39;ll probably get <code>ESPIPE</code>. (remember to reset <code>errno = 0;</code> before the calls so that its value is meaningful afterwards)"}], "owner": {"reputation": 1044, "user_id": 2694385, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/cdf94d63a070b0b047d34b050a7c41fd?s=128&d=identicon&r=PG&f=1", "display_name": "user80551", "link": "https://stackoverflow.com/users/2694385/user80551"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432720051, "creation_date": 1432719705, "question_id": 30478699, "link": "https://stackoverflow.com/questions/30478699/read-from-a-file-or-a-file-descriptor", "title": "Read from a file OR a file descriptor", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;assert.h&gt;\n\nint main(int argc, char** argv) {\n    FILE* input_file = fopen(argv[1], \"rb\");\n    printf(\"%ld\\n\", ftell(input_file));\n    fseek(input_file, 0, SEEK_END);\n    printf(\"%ld\\n\", ftell(input_file));\n    size_t length  = ftell(input_file);\n    char* src   = malloc(length);\n    assert(src != NULL);\n    fseek(input_file, 0, SEEK_SET);\n    fread(src, 1, length, input_file);\n    fclose(input_file);\n\n    // Do stuff with src\n    free(src);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ ./a.out somefile.txt \n0\n4\n$ ./a.out &lt;(cat somefile.txt)\n-1\n-1\na.out: a.c:12: main: Assertion `src != ((void *)0)' failed.\nAborted\n</code></pre>\n\n<p>Is there a way to make it work even if the file is a file descriptor obtained by bash process substitution?</p>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 1, "creation_date": 1432721311, "post_id": 30478587, "comment_id": 49037560, "body": "The &amp; symbol cause the F to be underlined. It also means that Alt-F will activate this menu item. See the <b>Menu Access Keys</b> heading in this document: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms647553(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 0, "creation_date": 1432721676, "post_id": 30478587, "comment_id": 49037794, "body": "@enhzflep Thanks, can&#39;t believe i didn&#39;t find that myself! For anyone else it is specifically mentioned <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms647553(v=vs.85).aspx#_win32_Menu_Access_Keys\" rel=\"nofollow noreferrer\">here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1432721709, "post_id": 30479418, "comment_id": 49037809, "body": "Thanks, exactly what i was looking for :)"}], "tags": [], "owner": {"reputation": 14930, "user_id": 395718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f1323cdc2a70698b5275082bf6e61184?s=128&d=identicon&r=PG", "display_name": "Dialecticus", "link": "https://stackoverflow.com/users/395718/dialecticus"}, "is_accepted": true, "score": 2, "last_activity_date": 1432721829, "last_edit_date": 1432721829, "creation_date": 1432721422, "answer_id": 30479418, "question_id": 30478587, "link": "https://stackoverflow.com/questions/30478587/winapi-appendmenu-lpctstr-variable-ampersand/30479418#30479418", "title": "Winapi AppendMenu LPCTSTR variable ampersand", "body": "<p>Ampersand is a placeholder for <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms647553%28v=vs.85%29.aspx#_win32_Menu_Access_Keys\" rel=\"nofollow\">menu access key</a>. The following letter is underlined, and Windows can be set up to show the underscore always, or when Alt key is pressed. The underlined letter is an access key, so when particular menu is open you can press the key to activate the menu item. If there is more than one menu item with that access key pressing the key will select them one by one, but you'd have to press Enter to activate the selected menu item.</p>\n"}], "owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 30479418, "answer_count": 1, "score": 1, "last_activity_date": 1432721844, "creation_date": 1432719438, "last_edit_date": 1432721844, "question_id": 30478587, "link": "https://stackoverflow.com/questions/30478587/winapi-appendmenu-lpctstr-variable-ampersand", "title": "Winapi AppendMenu LPCTSTR variable ampersand", "body": "<p>I'm currently beginning learning WINAPI and have been following the tutorials on <a href=\"http://www.winprog.org\" rel=\"nofollow\">http://www.winprog.org</a></p>\n\n<p>On this specific <a href=\"http://www.winprog.org/tutorial/menus.html\" rel=\"nofollow\">tutorial</a>, there is a section where the sub menu is created using <code>AppendMenu</code>.</p>\n\n<p>The final arg to this is a LPCTSTR, which as i understand would not really be interpreted by anything and is just a string, so shouldn't be the address of anything.</p>\n\n<pre><code>AppendMenu(hMenu, MF_STRING | MF_POPUP, (UINT)hSubMenu, \"&amp;File\");\n                                                         ^\n</code></pre>\n\n<p>So i was wondering why the author includes <code>&amp;</code> before the text for the menu button.<br>\nRemoving the ampersand appears to make no difference to the functionality of the program, but as it doesn't appear in the string that is displayed I'm assuming it does something.</p>\n\n<p>So the question is whether this <code>&amp;</code> actually provides any functionality and if so when should it be used ?</p>\n"}, {"tags": ["c", "loops", "duffs-device"], "comments": [{"owner": {"reputation": 38771, "user_id": 31317, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3fde1f239875d7d7ce65c12108d6fdd8?s=128&d=identicon&r=PG", "display_name": "peterchen", "link": "https://stackoverflow.com/users/31317/peterchen"}, "edited": false, "score": 2, "creation_date": 1432718341, "post_id": 30478072, "comment_id": 49035330, "body": "Original version was output to a memory mapped I/O port, that&#39;s why it didn&#39;t have the increment. You are right to include it for a memory copy."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1432718811, "post_id": 30478072, "comment_id": 49035702, "body": "&quot;Duff&#39;s device&quot; is the bizarre mixture of switch and loop. If you separate the switch from the loop, it&#39;s no longer Duff&#39;s device."}, {"owner": {"reputation": 6048, "user_id": 492716, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6831c7dec9e7ca59c06a09135559ef62?s=128&d=identicon&r=PG", "display_name": "onemasse", "link": "https://stackoverflow.com/users/492716/onemasse"}, "edited": false, "score": 1, "creation_date": 1432718899, "post_id": 30478072, "comment_id": 49035768, "body": "I hope you&#39;re not using Duff&#39;s Device as anything other than an exercise in programming."}, {"owner": {"reputation": 2836, "user_id": 973549, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b87d425695ded9df1f74f0f22b09c4cd?s=128&d=identicon&r=PG", "display_name": "AR89", "link": "https://stackoverflow.com/users/973549/ar89"}, "reply_to_user": {"reputation": 6048, "user_id": 492716, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6831c7dec9e7ca59c06a09135559ef62?s=128&d=identicon&r=PG", "display_name": "onemasse", "link": "https://stackoverflow.com/users/492716/onemasse"}, "edited": false, "score": 0, "creation_date": 1432719058, "post_id": 30478072, "comment_id": 49035903, "body": "@onemasse Yes, it&#39;s just an exercise. molbdnilo: If I separate them I change the syntax but the semantic looks the same to me."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1432779416, "post_id": 30478072, "comment_id": 49069502, "body": "The duff function has a while loop.  That while loop copies past the end of the a[] array.  This is undefined behavior that can/will lead to a seg fault event.   Note: all the copying can be properly performed with a single call to memcpy()."}], "answers": [{"comments": [{"owner": {"reputation": 2836, "user_id": 973549, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b87d425695ded9df1f74f0f22b09c4cd?s=128&d=identicon&r=PG", "display_name": "AR89", "link": "https://stackoverflow.com/users/973549/ar89"}, "edited": false, "score": 0, "creation_date": 1432719012, "post_id": 30478230, "comment_id": 49035868, "body": "I&#39;ve modified my code, but it&#39;s still not working, see my edit."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "reply_to_user": {"reputation": 2836, "user_id": 973549, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b87d425695ded9df1f74f0f22b09c4cd?s=128&d=identicon&r=PG", "display_name": "AR89", "link": "https://stackoverflow.com/users/973549/ar89"}, "edited": false, "score": 0, "creation_date": 1432719115, "post_id": 30478230, "comment_id": 49035951, "body": "you changed the wrong function call, change the <code>duff_function</code> call: <a href=\"https://ideone.com/Uz5ebm\" rel=\"nofollow noreferrer\">ideone.com/Uz5ebm</a>"}, {"owner": {"reputation": 2836, "user_id": 973549, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b87d425695ded9df1f74f0f22b09c4cd?s=128&d=identicon&r=PG", "display_name": "AR89", "link": "https://stackoverflow.com/users/973549/ar89"}, "edited": false, "score": 1, "creation_date": 1432719210, "post_id": 30478230, "comment_id": 49036027, "body": "Thank you, I&#39;m making terrible mistakes with this code."}], "tags": [], "owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "is_accepted": true, "score": 2, "last_activity_date": 1432718589, "creation_date": 1432718589, "answer_id": 30478230, "question_id": 30478072, "link": "https://stackoverflow.com/questions/30478072/duff-device-not-working/30478230#30478230", "title": "duff device not working", "body": "<p>you are copying from <code>b</code> to <code>a</code>, but you want to copy from <code>a</code> to <code>b</code>.</p>\n\n<p>change every <code>*a++ = *b++;</code> to <code>*b++ = *a++;</code></p>\n\n<p>you can also do just <code>memcpy(b, a, length * sizeof *a);</code></p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1432780310, "creation_date": 1432780310, "answer_id": 30496249, "question_id": 30478072, "link": "https://stackoverflow.com/questions/30478072/duff-device-not-working/30496249#30496249", "title": "duff device not working", "body": "<p>this function:</p>\n\n<pre><code>void send(int *to, int *from, int count)\n{\n    int n=(count+7)/8;\n    switch(count%8)\n    {\n       case 0: do{ *to = *from++;\n       case 7:     *to = *from++;\n       case 6:     *to = *from++;\n       case 5:     *to = *from++;\n       case 4:     *to = *from++;\n       case 3:     *to = *from++;\n       case 2:     *to = *from++;\n       case 1:     *to = *from++;\n                }while( --n&gt;0);\n    }  \n}\n</code></pre>\n\n<p>contains several problems.</p>\n\n<pre><code>1) the while statement \n   places the majority of the switch case statements \n   at a different scope level from the first case statement.\n\n2) stepping through the code\n   int n = (10+7)%8 = 2\n   switch(2)\n      (jumping into the center of a do/while loop is \n      a very poor program practice)\n      do{\n      case 2: *to = *from++;\n      case 1: *to = *from++; // which overlays the prior line\n      } while( --n &gt;0 ) // on first pass decrement 'n' to 1\n      case 7:   overlays prior *to with from[2]\n      case 6:   overlays prior *t0 with from[3]\n      case 5:   ... from[4]\n      case 4:   ... from[5]\n      case 3:   ... from[6]\n      case 2:   ... from[7]\n      case 1\"   ... from[8]\n         while( --n &gt;0 ) fails, exiting loop\n\n      final result, *to = from[8]\n</code></pre>\n\n<p>this is probably not what you wanted to do</p>\n"}], "owner": {"reputation": 2836, "user_id": 973549, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b87d425695ded9df1f74f0f22b09c4cd?s=128&d=identicon&r=PG", "display_name": "AR89", "link": "https://stackoverflow.com/users/973549/ar89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 30478230, "answer_count": 2, "score": 1, "last_activity_date": 1432780310, "creation_date": 1432718120, "last_edit_date": 1432721198, "question_id": 30478072, "link": "https://stackoverflow.com/questions/30478072/duff-device-not-working", "title": "duff device not working", "body": "<p>I've tried to implement the Duff device, but it's not working. It doesn't copy anything. I've implemented the original version and a more clear version:</p>\n\n<pre><code>void duff_function(int *a, int *b, int length)\n{\n    int n = (length + 7) / 8;\n    switch(length % 8)\n    {\n        case 0: *a++ = *b++;    // I dereference, copy, and then increment the pointer, * &gt; ++\n        case 7: *a++ = *b++;\n        case 6: *a++ = *b++;\n        case 5: *a++ = *b++;\n        case 4: *a++ = *b++;\n        case 3: *a++ = *b++;\n        case 2: *a++ = *b++;\n        case 1: *a++ = *b++;\n    }\n    while ( --n &gt; 0)\n    {\n        *a++ = *b++;\n        *a++ = *b++;\n        *a++ = *b++;\n        *a++ = *b++;\n        *a++ = *b++;\n        *a++ = *b++;\n        *a++ = *b++;\n        *a++ = *b++;\n    }\n\n}\n\nvoid send(int *to, int *from, int count)\n{\n        int n=(count+7)/8;\n        switch(count%8){\n           case 0: do{ *to = *from++;\n           case 7:     *to = *from++;\n           case 6:     *to = *from++;\n           case 5:     *to = *from++;\n           case 4:     *to = *from++;\n           case 3:     *to = *from++;\n           case 2:     *to = *from++;\n           case 1:     *to = *from++;\n                    }while( --n&gt;0);\n        }  \n}\n\nint main()\n{\n    int a[10] = {21, 34, 12, 64, 13, 9, 56, 54, 90, 1};\n    int b[10] = {22};\n    for (int i = 0; i &lt; 10; ++i)\n    {\n       printf(\"%d, \", a[i]);\n    }\n    printf(\"\\n\");\n    duff_function(a, b, 10);\n    //send(a, b, 10);\n\n    for(int i = 0; i &lt; 10; ++i)\n        printf(\"%d, \", b[i]);\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>21, 34, 12, 64, 13, 9, 56, 54, 90, 1, \n22, 0, 0, 0, 0, 0, 0, 0, 0, 0, \n</code></pre>\n\n<p>It doesn't copy anything.\nIn the original version for some reason it doesn't increment the pointer to, but I think that I should increment it (I do it in my function).</p>\n\n<p><strong>EDIT</strong>\nAs reported there is an error in my code:\nI've changed it:</p>\n\n<pre><code>send(b, a, 10);\n</code></pre>\n\n<p>But now the output is:</p>\n\n<pre><code>1, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n</code></pre>\n\n<p><strong>EDIT 2</strong>\nLast edit to make the code work:</p>\n\n<pre><code>duff_function(b, a);\n</code></pre>\n"}, {"tags": ["c", "function-pointers", "typedef"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1432719512, "post_id": 30477874, "comment_id": 49036251, "body": "This function pointer typedef works exactly the same as if you would do <code>typedef int* obscure_t; ...obscure_t ptr = &amp;some_int;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2532, "user_id": 2139094, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7b7f096622f36595ba50f9d65a39508a?s=128&d=identicon&r=PG", "display_name": "mjs", "link": "https://stackoverflow.com/users/2139094/mjs"}, "edited": false, "score": 1, "creation_date": 1432718126, "post_id": 30477981, "comment_id": 49035187, "body": "Am I missing something? Isnt create_patchwork_value_fct a typedef, not the func ptr itself?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 14229, "user_id": 574115, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/CtK6N.png?s=128&g=1", "display_name": "Daan Timmer", "link": "https://stackoverflow.com/users/574115/daan-timmer"}, "edited": false, "score": 1, "creation_date": 1432718607, "post_id": 30477981, "comment_id": 49035551, "body": "@DaanTimmer yep, I stand correted. Thanks to mjs, though. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1432718742, "last_edit_date": 1495541154, "creation_date": 1432717902, "answer_id": 30477981, "question_id": 30477874, "link": "https://stackoverflow.com/questions/30477874/how-to-use-a-function-pointer-properly/30477981#30477981", "title": "How to use a function pointer properly", "body": "<p>You need to </p>\n\n<ol>\n<li>Define a variable of the <em>type</em> of the <code>typedef</code>ed function pointer.</li>\n<li>Put the address of a function having same signature to it.</li>\n<li>Use the variable as a <em>normal</em> function name to make the function call.</li>\n</ol>\n\n<p>Pseudo-code</p>\n\n<p>If you have a function like</p>\n\n<pre><code>struct patchwork * funccall(const enum nature_primitif)\n{\n  //do something\n}\n</code></pre>\n\n<p>and then, you can do</p>\n\n<pre><code>create_patchwork_value_fct fp= funccall;\nstruct patchwork * retptr = NULL;\nenum nature_primitif enumVal = &lt;some enum value&gt;;\n\nretptr = fp(enumVal);\n</code></pre>\n\n<p>Maybe you can read <a href=\"https://stackoverflow.com/q/840501/2173917\">this answer</a> to get some more insight.</p>\n"}, {"tags": [], "owner": {"reputation": 2532, "user_id": 2139094, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7b7f096622f36595ba50f9d65a39508a?s=128&d=identicon&r=PG", "display_name": "mjs", "link": "https://stackoverflow.com/users/2139094/mjs"}, "is_accepted": false, "score": 0, "last_activity_date": 1432719010, "last_edit_date": 1432719010, "creation_date": 1432718092, "answer_id": 30478062, "question_id": 30477874, "link": "https://stackoverflow.com/questions/30477874/how-to-use-a-function-pointer-properly/30478062#30478062", "title": "How to use a function pointer properly", "body": "<p>This isnt actually a function pointer - this is defining a function pointer type:</p>\n\n<p><code>typedef struct patchwork *(*create_patchwork_value_fct) \n                                            (const enum nature_primitif);</code></p>\n\n<p>So, this defines a function pointer type called <code>create_patchwork_value_fct</code>. This is a function pointer to a function that takes a single parameter(const enum nature_primitif), and returns a <code>struct patchwork*</code> - i.e. a pointer to a patchwork struct.</p>\n\n<p>Lets look at how this could be used:</p>\n\n<pre><code>void someFunc(create_patchwork_value_fct funcToCall, enum param)\n{\n    funcToCall(param);\n}\n\nstruct patchwork* CreateAPatchworkValue(enum nature_primitif enumVal)\n{\n     struct patchwork* pwork = malloc(sizeof(struct patchwork));\n     pwork-&gt;someVal = enumVal;\n     return pwork;\n}\n\n\nvoid main()\n{\n    someFunc(CreateAPatchworkValue, &lt;a valid nature_primitif enumeration value&gt;)\n}\n</code></pre>\n\n<p>in this example, <code>main()</code> calls <code>someFunc()</code>, passing it a pointer to CreateAPatchworkValue as the <code>funcToCall</code> parameter, and a value from the nature_primitif enum. </p>\n\n<p>someFunc then calls funcToCall, which is actually a call to CreateAPatchworkValue.</p>\n"}], "owner": {"reputation": 1, "user_id": 4733975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ee37ffa8abaf0180909415bf340745?s=128&d=identicon&r=PG&f=1", "display_name": "Maxence Hammen", "link": "https://stackoverflow.com/users/4733975/maxence-hammen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1432719010, "creation_date": 1432717611, "last_edit_date": 1432718904, "question_id": 30477874, "link": "https://stackoverflow.com/questions/30477874/how-to-use-a-function-pointer-properly", "title": "How to use a function pointer properly", "body": "<p>I have problem with a function pointer. I have this typedef :</p>\n\n<pre><code>typedef struct patchwork *(*create_patchwork_value_fct) \n                                            (const enum nature_primitif);\n</code></pre>\n\n<p>which is generic for the sake of it (implemented in another file). I want to call it with an input. How do I do ?</p>\n"}, {"tags": ["c++", "c", "linker", "cmake"], "comments": [{"owner": {"reputation": 1751, "user_id": 2959769, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9WfJf.jpg?s=128&g=1", "display_name": "Vinay Shukla", "link": "https://stackoverflow.com/users/2959769/vinay-shukla"}, "edited": false, "score": 0, "creation_date": 1432717822, "post_id": 30477834, "comment_id": 49034981, "body": "In our case we normally compile and repackage all the libraries which have the instance of this updated library"}, {"owner": {"reputation": 1537, "user_id": 1723578, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0c57d8471226917c3f73a6d2678f4ffb?s=128&d=identicon&r=PG", "display_name": "Issam T.", "link": "https://stackoverflow.com/users/1723578/issam-t"}, "reply_to_user": {"reputation": 1751, "user_id": 2959769, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9WfJf.jpg?s=128&g=1", "display_name": "Vinay Shukla", "link": "https://stackoverflow.com/users/2959769/vinay-shukla"}, "edited": false, "score": 0, "creation_date": 1432718443, "post_id": 30477834, "comment_id": 49035413, "body": "@yanivx Well this is not possible for us, as we would like to only provide part of the source files to the users. The users might modify and recompile those files but they won&#39;t be able to recompile the whole lib.a."}, {"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1432797930, "post_id": 30477834, "comment_id": 49076002, "body": "I&#39;d supply two libraries, one precompiled and the other one as source code."}], "answers": [{"comments": [{"owner": {"reputation": 1537, "user_id": 1723578, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0c57d8471226917c3f73a6d2678f4ffb?s=128&d=identicon&r=PG", "display_name": "Issam T.", "link": "https://stackoverflow.com/users/1723578/issam-t"}, "edited": false, "score": 0, "creation_date": 1432719919, "post_id": 30478652, "comment_id": 49036587, "body": "Thank you. I was wondering though if this is possible using cmake. Is there an option for example to give to target_link_libraries..."}, {"owner": {"reputation": 1671, "user_id": 3129160, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5b7d550bef4841db605997570b530363?s=128&d=identicon&r=PG&f=1", "display_name": "banach-space", "link": "https://stackoverflow.com/users/3129160/banach-space"}, "reply_to_user": {"reputation": 1537, "user_id": 1723578, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0c57d8471226917c3f73a6d2678f4ffb?s=128&d=identicon&r=PG", "display_name": "Issam T.", "link": "https://stackoverflow.com/users/1723578/issam-t"}, "edited": false, "score": 0, "creation_date": 1432720120, "post_id": 30478652, "comment_id": 49036736, "body": "I haven&#39;t used <code>cmake</code> yet, but in <code>make</code> you just embed the call to <code>ar</code> in one of your rules. Sorry if this is not what you&#39;re looking for."}, {"owner": {"reputation": 1537, "user_id": 1723578, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0c57d8471226917c3f73a6d2678f4ffb?s=128&d=identicon&r=PG", "display_name": "Issam T.", "link": "https://stackoverflow.com/users/1723578/issam-t"}, "edited": false, "score": 0, "creation_date": 1432722619, "post_id": 30478652, "comment_id": 49038410, "body": "np. upvoated since it adds some insight to the problem ;)"}, {"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "reply_to_user": {"reputation": 1537, "user_id": 1723578, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0c57d8471226917c3f73a6d2678f4ffb?s=128&d=identicon&r=PG", "display_name": "Issam T.", "link": "https://stackoverflow.com/users/1723578/issam-t"}, "edited": false, "score": 0, "creation_date": 1432751028, "post_id": 30478652, "comment_id": 49058654, "body": "@IssamT. does it have to be cross-platform? otherwise you can just run this command through cmake"}, {"owner": {"reputation": 1537, "user_id": 1723578, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0c57d8471226917c3f73a6d2678f4ffb?s=128&d=identicon&r=PG", "display_name": "Issam T.", "link": "https://stackoverflow.com/users/1723578/issam-t"}, "reply_to_user": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1432797754, "post_id": 30478652, "comment_id": 49075895, "body": "@m.s. unfortunately yes, it has to be cross-platform."}], "tags": [], "owner": {"reputation": 1671, "user_id": 3129160, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5b7d550bef4841db605997570b530363?s=128&d=identicon&r=PG&f=1", "display_name": "banach-space", "link": "https://stackoverflow.com/users/3129160/banach-space"}, "is_accepted": false, "score": 1, "last_activity_date": 1432719570, "creation_date": 1432719570, "answer_id": 30478652, "question_id": 30477834, "link": "https://stackoverflow.com/questions/30477834/swap-object-files-inside-a-library/30478652#30478652", "title": "swap object files inside a library", "body": "<p>On Linux: <code>$ ar -ru lib.a c.o</code> should do. This will update <code>c.o</code> in <code>lib.a</code> provided that <code>c.o</code> is newer than the copy already included in <code>lib.a</code>.</p>\n\n<p>From <code>$ man ar</code>:</p>\n\n<blockquote>\n  <p>Normally, ar r... inserts all files listed into the archive. If you\n  would like to insert only those of the files you list that are newer\n  than existing members of the same names, use this modifier. The u\n  modifier is allowed only for the operation r (replace). In particular,\n  the combination qu is not allowed, since checking the timestamps would\n  lose any speed advantage from the operation q.</p>\n</blockquote>\n"}], "owner": {"reputation": 1537, "user_id": 1723578, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0c57d8471226917c3f73a6d2678f4ffb?s=128&d=identicon&r=PG", "display_name": "Issam T.", "link": "https://stackoverflow.com/users/1723578/issam-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1432719570, "creation_date": 1432717494, "question_id": 30477834, "link": "https://stackoverflow.com/questions/30477834/swap-object-files-inside-a-library", "title": "swap object files inside a library", "body": "<p>In our project that we manage using cmake we use a static library lib.a\nwhen linking.</p>\n\n<p>So the final executable (statically linked) will be made of the object files that we have just compiled</p>\n\n<p><code>a.o</code></p>\n\n<p><code>b.o</code></p>\n\n<p><code>c.o</code></p>\n\n<p>and the static library\n<code>lib.a</code></p>\n\n<p>However, it is possible (not always) that some of those files (let's say <code>c.o</code>) was already in lib.a. In this case, we would like to use the newest <code>c.o</code> that we have just compiled and not the one that was already in lib.a</p>\n\n<p>Is this possible and how can we do that with Cmake?</p>\n\n<p>What I thought was like un-archiving the lib.a, finding out whether any of the object files was already inside and archiving it again (using the <code>c.o</code> in this case), then linking normally the executable using</p>\n\n<p><code>a.o</code> </p>\n\n<p><code>b.o</code></p>\n\n<p>and the newly made</p>\n\n<p><code>lib.a</code></p>\n"}, {"tags": ["c", "arrays", "file", "struct"], "comments": [{"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1432717350, "post_id": 30477664, "comment_id": 49034673, "body": "All your struct is dumped into the file, for example for <code>fname[51]</code> the 51 chars will be put into the file."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1432717420, "post_id": 30477664, "comment_id": 49034724, "body": "One point: <code>if(records_temp == NULL)</code>, then you should not do <code>records = records_temp;</code> and <code>scanf(&quot;%s&quot;, records[i].fname);</code> and so on..."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1432717500, "post_id": 30477664, "comment_id": 49034767, "body": "Also, instead of using <code>fwrite()</code> use formatted i/o APIs to write each element into file."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432717888, "post_id": 30477664, "comment_id": 49035025, "body": "I suggest using <code>char[]</code> for zip code (it includes letters where I live) and for phone number (my phone number overflows an <code>int</code>)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432718167, "post_id": 30477664, "comment_id": 49035228, "body": "Also those two <code>int</code> fields will be &quot;weird&quot; when you look at the file content."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432947910, "post_id": 30477664, "comment_id": 49155498, "body": "Think of what <code>scanf(&quot; %c&quot;, answer);</code> does.  It calls a function and gives the function the <i>value</i> of <code>answer</code>.  What even would <code>scanf()</code> use that?  Maybe if code passed the <i>address</i> of <code>answer</code>?  BTW: Certainly your compiler should be waning about this line.  Save time, enable all warnings or get a new compiler."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 4857738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/38b58705b58b9423dce9141ceeacd5f3?s=128&d=identicon&r=PG&f=1", "display_name": "Karlioh", "link": "https://stackoverflow.com/users/4857738/karlioh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1432720126, "post_id": 30477986, "comment_id": 49036741, "body": "@WeatherVane Using calloc() fixed most of my issues, but at the end of the loop when it ask the user if their are any records the program automatically exits, why is that?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 77, "user_id": 4857738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/38b58705b58b9423dce9141ceeacd5f3?s=128&d=identicon&r=PG&f=1", "display_name": "Karlioh", "link": "https://stackoverflow.com/users/4857738/karlioh"}, "edited": false, "score": 0, "creation_date": 1432720750, "post_id": 30477986, "comment_id": 49037184, "body": "@Karlioh please see my answer."}, {"owner": {"reputation": 77, "user_id": 4857738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/38b58705b58b9423dce9141ceeacd5f3?s=128&d=identicon&r=PG&f=1", "display_name": "Karlioh", "link": "https://stackoverflow.com/users/4857738/karlioh"}, "edited": false, "score": 0, "creation_date": 1432764420, "post_id": 30477986, "comment_id": 49065583, "body": "I think some of your modifications might have caused the access violation in my edited code above."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432764492, "post_id": 30477986, "comment_id": 49065605, "body": "Rather than <code>Demo *demo = (Demo*)malloc(sizeof(Demo));</code>, consider the easier to code and maintain <code>Demo *demo = malloc(sizeof *demo);</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432764591, "post_id": 30477986, "comment_id": 49065635, "body": "No need for <code>if()</code> in <code>if (records == NULL) { ..</code>  Just use <code>records = realloc(records, size * sizeof *records);</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432764676, "post_id": 30477986, "comment_id": 49065666, "body": "<code>scanf(&quot; %[^\\n]&quot;, currentRecord-&gt;address);</code> reads nothing into <code>currentRecord-&gt;address</code> if use just enters <code>&quot;\\n&quot;</code>.  Suggest <code>currentRecord-&gt;address[0] = 0;</code> first.  Better to use <code>scanf(&quot; %50[^\\n]&quot;, currentRecord-&gt;address);</code> to prevent overrun."}, {"owner": {"reputation": 77, "user_id": 4857738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/38b58705b58b9423dce9141ceeacd5f3?s=128&d=identicon&r=PG&f=1", "display_name": "Karlioh", "link": "https://stackoverflow.com/users/4857738/karlioh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1432947031, "post_id": 30477986, "comment_id": 49155333, "body": "@chux See the edited code, the changes I&#39;ve made have seemed to fix many of the formatting problems I was having, but I&#39;m still getting access violations at &quot;char answer&quot; when the program asks the user if there are more records."}], "tags": [], "owner": {"reputation": 2677, "user_id": 3370480, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/U8ayS.jpg?s=128&g=1", "display_name": "Flovdis", "link": "https://stackoverflow.com/users/3370480/flovdis"}, "is_accepted": true, "score": 3, "last_activity_date": 1432719122, "last_edit_date": 1432719122, "creation_date": 1432717919, "answer_id": 30477986, "question_id": 30477664, "link": "https://stackoverflow.com/questions/30477664/why-do-strange-characters-appear-when-i-attempt-to-write-to-file/30477986#30477986", "title": "Why do strange characters appear when I attempt to write to file?", "body": "<p>If you allocate memory, this memory is not cleared.</p>\n\n<pre><code>char *data = (char*)malloc(100);\n</code></pre>\n\n<p>This does allocate memory for 100 characters. But the memory can contain random data. If you write from this address you can end up writing random data into the file.</p>\n\n<p>Clear the memory to make sure there is no random data.</p>\n\n<pre><code>memset(data, 0, 100);\n</code></pre>\n\n<p>Or for a <code>struct</code>:</p>\n\n<pre><code>struct Demo {\n    int a;\n    int b;\n};\n\nDemo *demo = (Demo*)malloc(sizeof(Demo));\nmemset(demo, 0, sizeof(Demo));\n</code></pre>\n\n<h2>Your Code Corrected</h2>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nstruct Record\n{\n    char fname[51];\n    char lname[51];\n    char address[51];\n    char city[51];\n    char state[51];\n    int zipcode;\n    int phoneNumber;\n};\n\n\nint main()\n{\n    char answer = 'y';\n    int size = 0;\n    Record *records = NULL;\n\n    do {\n        ++size;\n        // resize records array.\n        if (records == NULL) {\n            records = (Record*)malloc(sizeof(Record)*size);\n        } else {\n            records = (Record*)realloc(records, sizeof(Record)*size);\n        }\n        // Get a pointer to the current record.\n        Record *currentRecord = &amp;records[size-1];\n        // Clear the record\n        memset(currentRecord, 0, sizeof(Record));\n\n        // Ask for all data.\n        printf(\"First Name: \\n\");\n        scanf(\"%s\", currentRecord-&gt;fname);\n        printf(\"Last Name: \\n\");\n        scanf(\"%s\", currentRecord-&gt;lname);\n        printf(\"Address: \\n\");\n        scanf(\" %[^\\n]\", currentRecord-&gt;address);\n        printf(\"City: \\n\");\n        scanf(\"%s\", currentRecord-&gt;city);\n        printf(\"State: \\n\");\n        scanf(\"%s\", currentRecord-&gt;state);\n        printf(\"Zipcode: \\n\");\n        scanf(\"%d\", &amp;(currentRecord-&gt;zipcode));\n        printf(\"Phone Number: \\n\");\n        scanf(\"%d\", &amp;(currentRecord-&gt;phoneNumber));\n\n        // Ask for more.\n        printf(\"Are there anymore records? [y/n] \");\n        answer = getchar();\n        printf(\"\\n\");\n    } while (answer == 'y'||answer == 'Y');\n\n    // Write all records\n    const char filename[] = \"data.txt\";\n    FILE *fileWriter = fopen(filename, \"wb\");\n    if (fileWriter != NULL) {\n        if (fwrite(records, sizeof(Record), size, fileWriter) != size) {\n            fprintf(stderr, \"Failed to write to %s\\n\", filename);\n            exit(1);\n        }\n        fclose(fileWriter);\n    } else {\n        printf(\"Error opening file.\");\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 4857738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/38b58705b58b9423dce9141ceeacd5f3?s=128&d=identicon&r=PG&f=1", "display_name": "Karlioh", "link": "https://stackoverflow.com/users/4857738/karlioh"}, "edited": false, "score": 0, "creation_date": 1432720313, "post_id": 30478806, "comment_id": 49036884, "body": "What could I do to fix the problem? Would turning those integers into strings help?"}], "tags": [], "owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "is_accepted": false, "score": 1, "last_activity_date": 1432720873, "last_edit_date": 1432720873, "creation_date": 1432720016, "answer_id": 30478806, "question_id": 30477664, "link": "https://stackoverflow.com/questions/30477664/why-do-strange-characters-appear-when-i-attempt-to-write-to-file/30478806#30478806", "title": "Why do strange characters appear when I attempt to write to file?", "body": "<p>There are several problems with <code>fwrite(records,sizeof(*records),size,fileWriter)</code>:</p>\n\n<ul>\n<li><p><code>struct Record</code> contains 5 null-terminated strings, so your file will contain 5 null-characters separating those strings, where you probably want newline-characters instead.</p></li>\n<li><p><code>struct Record</code> contains 2 integers which are written into the file as binary data, and can most certainly qualify under \"strange characters appearing in the file\".</p></li>\n</ul>\n\n<hr>\n\n<p>You can fix it by writing each one of those fields according to its specific type:</p>\n\n<pre><code>fprintf(fileWriter,\"%s\\n\",records-&gt;fname);\nfprintf(fileWriter,\"%s\\n\",records-&gt;lname);\nfprintf(fileWriter,\"%s\\n\",records-&gt;address);\nfprintf(fileWriter,\"%s\\n\",records-&gt;city);\nfprintf(fileWriter,\"%s\\n\",records-&gt;state);\nfprintf(fileWriter,\"%d\\n\",records-&gt;zipcode);\nfprintf(fileWriter,\"%d\\n\",records-&gt;phoneNumber);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1432720676, "creation_date": 1432720676, "answer_id": 30479108, "question_id": 30477664, "link": "https://stackoverflow.com/questions/30477664/why-do-strange-characters-appear-when-i-attempt-to-write-to-file/30479108#30479108", "title": "Why do strange characters appear when I attempt to write to file?", "body": "<p>Answering OP's commented question asking why the program automatically exits, I suggest this (by example). Note the <code>' '</code> space before <code>%c</code>, which cleans up any preceding white space.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(void) {\n    int phone;\n    char answer;\n    scanf(\"%d\", &amp;phone);        // leaves newline in buffer\n    //answer  = getchar();      // reads the newline still in buffer\n    scanf(\" %c\", &amp;answer);      // skips preceding white-space\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 4857738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/38b58705b58b9423dce9141ceeacd5f3?s=128&d=identicon&r=PG&f=1", "display_name": "Karlioh", "link": "https://stackoverflow.com/users/4857738/karlioh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2464, "favorite_count": 1, "accepted_answer_id": 30477986, "answer_count": 3, "score": 1, "last_activity_date": 1432947157, "creation_date": 1432717027, "last_edit_date": 1432947157, "question_id": 30477664, "link": "https://stackoverflow.com/questions/30477664/why-do-strange-characters-appear-when-i-attempt-to-write-to-file", "title": "Why do strange characters appear when I attempt to write to file?", "body": "<p>In this program I attempt to write a file that displays an unknown number of records entered by the user. Each record has the following fields: First Name, Last Name, Address, City, State, Zip Code, and Phone Number. I assumed the best way to do this would be to define a struct Record with the fields above, then declare an array of Records that would contain as many records as the user entered. To accomplish this I would use a loop to get the inputs for each field per record, then if the user wanted to continue dynamically allocate an extra space in the Record array and continue until the user enters no. The program compiles and creates the file, but the characters written are totally weird. What causes this to happen?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n\nstruct Record\n    {\n        char fname[51];\n        char lname[51];\n        char address[51];\n        char city[51];\n        char state[51];\n        int zipcode;\n        int phoneNumber;\n    };\n\n\n\n\nint main()\n{\n    FILE *fileWriter;\n    const char filename[] = \"data.txt\";\n    char answer = 'y';\n    int size = 1;\n    int i = 0;\n    struct Record *records = NULL;\n    struct Record *records_temp;\n\n\n\n\n    while(answer == 'y' || answer == 'Y')\n    {\n        struct Record *records_temp = realloc(records,(size)*sizeof(*records));\n\n        if(records_temp == NULL)  \n        {\n            free(records); \n\n        }\n        records = records_temp;\n        printf(\"First Name: \\n\");\n        scanf(\"%s\", records[i].fname);\n        printf(\"Last Name: \\n\");\n        scanf(\"%s\", records[i].lname);\n\n        printf(\"Address: \\n\");\n        scanf(\" %[^\\n]\", records[i].address);\n\n        printf(\"City: \\n\");\n        scanf(\"%s\", records[i].city);\n\n        printf(\"State: \\n\");\n        scanf(\"%s\", records[i].state);\n\n        printf(\"Zipcode: \\n\");\n        scanf(\"%d\", &amp;records[i].zipcode);\n\n        printf(\"Phone Number: \\n\");\n        scanf(\"%d\", &amp;records[i].phoneNumber);\n        //stores all record info\n\n        printf(\"Are there anymore records? [y/n] \");\n        answer = getchar();\n        if(answer == 'y' || answer == 'Y')\n        {\n            size++;\n            records[i++];\n            printf(\"\\n\");\n        }\n\n        //open file\n\n    fileWriter = fopen(filename,\"wb\");\n\n    if(fileWriter != NULL)\n    {\n        if(fwrite(records,sizeof(*records),size,fileWriter) != 1)\n        {\n            fprintf(stderr, \"Failed to write to %s\\n\", filename);\n            exit(1);\n        }\n        fclose(fileWriter);\n    }\n    else\n    {\n        printf(\"Error opening file.\");\n    }\n}\n}\n</code></pre>\n\n<p><strong>EDITED VERSION</strong>\nI've modified the code and fixed many of the errors that were occurring, but now I am currently getting an access violation at  scanf( \"%c\", answer)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n\nstruct Record\n    {\n        char fname[51];\n        char lname[51];\n        char address[51];\n        char city[51];\n        char state[51];\n        char zipcode[51];\n        char phoneNumber[51];\n    };\n\n\n\n\nint main()\n{\n    FILE *fileWriter;\n    const char filename[] = \"data.txt\";\n    char answer = 'y';\n    char a = 'n';\n    int size = 1;\n    int i = 0;\n    struct Record *records;\n    struct Record *records_temp = NULL;\n\n\n\n\n    while(answer == 'y' || answer == 'Y')\n    {\n        struct Record *records_temp = calloc((size),sizeof(*records));  \n\n        records = records_temp;\n        printf(\"First Name: \\n\");\n        scanf(\"%s\", records[size-1].fname);\n\n        printf(\"Last Name: \\n\");\n        scanf(\"%s\", records[size-1].lname);\n\n        printf(\"Address: \\n\");\n        scanf(\" %[^\\n]\", records[size-1].address);\n\n        printf(\"City: \\n\");\n        scanf(\"%s\", records[size-1].city);\n\n        printf(\"State: \\n\");\n        scanf(\"%s\", records[size-1].state);\n\n        printf(\"Zipcode: \\n\");\n        scanf(\"%s\", records[size-1].zipcode);\n\n        printf(\"Phone Number: \\n\");\n        scanf(\"%s\", records[size-1].phoneNumber);\n        //stores all record info\n\n        printf(\"Are there anymore records? [y/n] \");\n        scanf(\" %c\", answer);\n        if(answer == 'y' || answer == 'Y')\n        {\n            size++;\n            printf(\"\\n\");\n        }\n    }\n        //open file\n\n    fileWriter = fopen(filename,\"wb\");\n\n    if(fileWriter != NULL)\n    {\n        for(;i&lt; size; i++)\n        {\n            fprintf(fileWriter,\"%s\\n\",records[i].fname);\n            fprintf(fileWriter,\"%s\\n\",records[i].lname);\n            fprintf(fileWriter,\"%s\\n\",records[i].address);\n            fprintf(fileWriter,\"%s\\n\",records[i].city);\n            fprintf(fileWriter,\"%s\\n\",records[i].state);\n            fprintf(fileWriter,\"%d\\n\",records[i].zipcode);\n            fprintf(fileWriter,\"%d\\n\",records[i].phoneNumber);\n        }\n        fclose(fileWriter);\n    }\n    else\n    {\n        printf(\"Error opening file.\");   \n    }\n\n}\n</code></pre>\n"}, {"tags": ["java", "c", "swig"], "comments": [{"owner": {"reputation": 6443, "user_id": 201506, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/om1R2.jpg?s=128&g=1", "display_name": "geert3", "link": "https://stackoverflow.com/users/201506/geert3"}, "edited": false, "score": 0, "creation_date": 1432717033, "post_id": 30477383, "comment_id": 49034449, "body": "not sure I understand your question, but the official way to have Java and C talk to each other is called <code>JNI</code>, see <a href=\"http://en.wikipedia.org/wiki/Java_Native_Interface\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Java_Native_Interface</a> - The <code>JNI</code> class that you seem to be using is (I think) unrelated."}, {"owner": {"reputation": 14918, "user_id": 687514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b39911759d36daa9c0b3d47c08ec75b?s=128&d=identicon&r=PG", "display_name": "Anders R. Bystrup", "link": "https://stackoverflow.com/users/687514/anders-r-bystrup"}, "edited": false, "score": 0, "creation_date": 1432717161, "post_id": 30477383, "comment_id": 49034542, "body": "Why isn&#39;t <code>JNI.new_String()</code> a proper method?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "edited": false, "score": 1, "creation_date": 1432717324, "post_id": 30477383, "comment_id": 49034651, "body": "Yes, what&#39;s meant by &quot;proper method&quot; here? If what was meant is that you want that kind of syntax on the C side, it&#39;s unfortunately impossible as C lacks classes. The closest you have there is a struct with function pointers which is somewhat common for APIs (a table of function pointers), but I recommend just getting used to that <code>String*</code> style there with free-standing functions operating on an opaque handle/pointer."}, {"owner": {"reputation": 5080, "user_id": 532208, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/884af194754d44c58858f2b29adbbccd?s=128&d=identicon&r=PG", "display_name": "triclosan", "link": "https://stackoverflow.com/users/532208/triclosan"}, "reply_to_user": {"reputation": 14918, "user_id": 687514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b39911759d36daa9c0b3d47c08ec75b?s=128&d=identicon&r=PG", "display_name": "Anders R. Bystrup", "link": "https://stackoverflow.com/users/687514/anders-r-bystrup"}, "edited": false, "score": 0, "creation_date": 1432718564, "post_id": 30477383, "comment_id": 49035510, "body": "@AndersR.Bystrup I&#39;ve update my question"}, {"owner": {"reputation": 6443, "user_id": 201506, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/om1R2.jpg?s=128&g=1", "display_name": "geert3", "link": "https://stackoverflow.com/users/201506/geert3"}, "edited": false, "score": 0, "creation_date": 1432719230, "post_id": 30477383, "comment_id": 49036044, "body": "What I mean by official way, is that JNI (see my link, not the JNI class used in the original question) is AFAIK the Oracle/Java endorsed way of exposing/interacting with Java objects from other languages (e.g. C). I don&#39;t know the JNI class used by the original poster, but that appears to be some third-party (hence unofficial) way."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "reply_to_user": {"reputation": 6443, "user_id": 201506, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/om1R2.jpg?s=128&g=1", "display_name": "geert3", "link": "https://stackoverflow.com/users/201506/geert3"}, "edited": false, "score": 0, "creation_date": 1432968726, "post_id": 30477383, "comment_id": 49159397, "body": "@geert3 the JNI class referred to is just auto generated &quot;official&quot; JNI code from SWIG parsing the C headers."}], "answers": [{"tags": [], "owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "is_accepted": false, "score": 2, "last_activity_date": 1432757087, "creation_date": 1432757087, "answer_id": 30492128, "question_id": 30477383, "link": "https://stackoverflow.com/questions/30477383/use-custom-creator-and-deleter-for-c-structure/30492128#30492128", "title": "Use custom creator and deleter for C structure", "body": "<p>Assuming the C you showed is in a file called test.h the following SWIG interface would do what you wanted:</p>\n\n<pre><code>%module test\n\n%{\n#include \"test.h\"\n%}\n\n%extend C_String {\n  C_String() {\n    return StringNew();\n  }\n  ~C_String() {\n    StringFree($self);\n  }\n}\n\n%ignore StringNew;\n%ignore StringFree;\n\n%include \"test.h\"\n</code></pre>\n\n<p>This uses <code>%extend</code> to supply a custom constructor and destructor for the <code>C_String</code> type. This constructor/destructor pair just calls the C functions <code>StringNew</code> and <code>StringFree</code> respectively. </p>\n\n<p>In your question you asked to have these calls happen from within the generated Java code. The way I've written it above makes these calls happen from within C instead. This has two primary benefits:</p>\n\n<ol>\n<li>It is language neutral - the same interface file works equally well regardless of what language you're targeting.</li>\n<li>It minimses calls between native and Java (or any other target) code. This is generally a good thing from a performance perspective since these cross-language jumps tend to be the most expensive part of your interface.</li>\n</ol>\n\n<hr>\n\n<p>The remainder of this answer is mostly just here as a learning point and not a recommended solution.</p>\n\n<p>If you really wanted to though you could write this as Java and make the JNI calls you asked for. To do this you would need to write a few <a href=\"http://www.swig.org/Doc2.0/Java.html#Java_code_typemaps\" rel=\"nofollow\">typemaps</a>, you would need at least two which (untested) might look something like:</p>\n\n<ol>\n<li><p>javabody:</p>\n\n<pre><code>%typemap(javabody) C_String %{\n  private long swigCPtr;\n  protected boolean swigCMemOwn;\n\n  protected $javaclassname(long cPtr, boolean cMemoryOwn) {\n    swigCMemOwn = cMemoryOwn;\n    swigCPtr = cPtr;\n  }\n\n  public $javaclassname() {\n      $javaclassname tmp = $imclassname.StringNew();\n      swigCMemOwn = tmp.swigCMemoryOwn;\n      swigCPtr = tmp.swigCPtr;\n      tmp.swigCMemoryOwn = false;\n  }\n\n  protected static long getCPtr($javaclassname obj) {\n    return (obj == null) ? 0 : obj.swigCPtr;\n  }\n%}\n</code></pre></li>\n<li><p>javadestruct:</p>\n\n<pre><code>%typemap(javabody) C_String %{\npublic synchronized void delete() {\n    if (swigCPtr != 0) {\n      if (swigCMemOwn) {\n        swigCMemOwn = false;\n        $imclassname.StringFree(swigCPtr);\n      }\n      swigCPtr = 0;\n    }\n  }\n%}\n</code></pre></li>\n</ol>\n\n<p>But as noted previously this really isn't the best way to solve the problem. (You'd need a 'javadestruct_derived' typemap as well if you wanted this to still happen for cases with inheritance)</p>\n"}], "owner": {"reputation": 5080, "user_id": 532208, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/884af194754d44c58858f2b29adbbccd?s=128&d=identicon&r=PG", "display_name": "triclosan", "link": "https://stackoverflow.com/users/532208/triclosan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1432757087, "creation_date": 1432716280, "last_edit_date": 1432717950, "question_id": 30477383, "link": "https://stackoverflow.com/questions/30477383/use-custom-creator-and-deleter-for-c-structure", "title": "Use custom creator and deleter for C structure", "body": "<p>I have on C side</p>\n\n<pre><code>typedef struct {} C_String;\nC_String* StringNew();\nvoid StringFree(C_String* string);\n</code></pre>\n\n<p>On Java I get such wrapper class</p>\n\n<pre><code>public class String {\n  private long swigCPtr;\n  protected boolean swigCMemOwn;\n\n  protected String(long cPtr, boolean cMemoryOwn) {\n    swigCMemOwn = cMemoryOwn;\n    swigCPtr = cPtr;\n  }\n\n  protected static long getCPtr(String obj) {\n    return (obj == null) ? 0 : obj.swigCPtr;\n  }\n\n  protected void finalize() {\n    delete();\n  }\n\n  public synchronized void delete() {\n    if (swigCPtr != 0) {\n      if (swigCMemOwn) {\n        swigCMemOwn = false;\n        JNI.delete_C_String(swigCPtr);\n      }\n      swigCPtr = 0;\n    }\n  }\n\n  public String() {\n    this(JNI.new_C_String(), true);\n  }\n\n}\n</code></pre>\n\n<p>JNI.new_\u0421_String and JNI.delete_\u0421_String are native methods generated by SWIG, they do simple work - allocate <code>C_String</code> by <code>malloc</code> and delete it by <code>free</code> respectively. In my case scenario should be different, since <code>C_String</code> is empty structure and acts like shortcut proper way should be allocation by <code>StringNew</code> which has <code>malloc</code> under hood and freeing by <code>StringFree</code>.</p>\n\n<p>I want to use proper methods instead of <code>JNI.new_String</code>, <code>JNI.delete_String</code> what the easiest method to achieve this?  </p>\n"}, {"tags": ["c", "linux", "process", "fork", "job-control"], "comments": [{"owner": {"reputation": 1779, "user_id": 2214576, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ca0629dcdb8d4d3747c78674e90d5203?s=128&d=identicon&r=PG", "display_name": "Randomly Named User", "link": "https://stackoverflow.com/users/2214576/randomly-named-user"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1432715303, "post_id": 30476971, "comment_id": 49033362, "body": "<code>Linux</code>. Just edited the question to mention <code>Linux</code>."}, {"owner": {"reputation": 2554, "user_id": 2911773, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/dae6d0d2fd888bca096b9c3be2d1d58e?s=128&d=identicon&r=PG&f=1", "display_name": "Bhoot", "link": "https://stackoverflow.com/users/2911773/bhoot"}, "edited": false, "score": 1, "creation_date": 1432715326, "post_id": 30476971, "comment_id": 49033373, "body": "<a href=\"http://stackoverflow.com/questions/8319484/regarding-background-processes-using-fork-and-child-processes-in-my-dummy-shel\" title=\"regarding background processes using fork and child processes in my dummy shel\">stackoverflow.com/questions/8319484/&hellip;</a>"}, {"owner": {"reputation": 17954, "user_id": 1248008, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Z3JaL.png?s=128&g=1", "display_name": "Jonas Sch&#228;fer", "link": "https://stackoverflow.com/users/1248008/jonas-sch%c3%a4fer"}, "edited": false, "score": 1, "creation_date": 1432715327, "post_id": 30476971, "comment_id": 49033374, "body": "What is a &quot;foreground&quot; and a &quot;background&quot; process in your terminology?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1432715470, "post_id": 30476971, "comment_id": 49033447, "body": "@RandomlyNamedUser: No need to edit the wording; that&#39;s what tags are for. I fixed up your tags."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 4, "creation_date": 1432715527, "post_id": 30476971, "comment_id": 49033482, "body": "The notion of &quot;foreground&quot; and &quot;background&quot; are part of Linux&#39;s <i>job control</i> mechanism, if you want something you can search for. It&#39;s a fairly complex topic, involving process groups, session leaders, teletypes, zombies and reapers, and a daemonic double fork."}], "answers": [{"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1432715504, "post_id": 30477063, "comment_id": 49033467, "body": "Wrong: background processes have no controlling terminals or session ids."}, {"owner": {"reputation": 4378, "user_id": 4358680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KGQtt.jpg?s=128&g=1", "display_name": "Meghdeep Ray", "link": "https://stackoverflow.com/users/4358680/meghdeep-ray"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1432715548, "post_id": 30477063, "comment_id": 49033498, "body": "You mean by default ?"}, {"owner": {"reputation": 1591, "user_id": 622121, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb5b05a7391cfa97fc9016ce95471ee?s=128&d=identicon&r=PG", "display_name": "Kenji Noguchi", "link": "https://stackoverflow.com/users/622121/kenji-noguchi"}, "edited": false, "score": 0, "creation_date": 1483492776, "post_id": 30477063, "comment_id": 70116033, "body": "When the parent process has the controlling terminal the forked background processes do have controlling terminals and session ids unless detached by dup2 and setsid system calls.   It&#39;s easy to check.  Run something in bg from login shell, and do <code>ps xao pid,pgid,sid,tty,comm</code>"}], "tags": [], "owner": {"reputation": 4378, "user_id": 4358680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KGQtt.jpg?s=128&g=1", "display_name": "Meghdeep Ray", "link": "https://stackoverflow.com/users/4358680/meghdeep-ray"}, "is_accepted": false, "score": 2, "last_activity_date": 1432715835, "last_edit_date": 1432715835, "creation_date": 1432715356, "answer_id": 30477063, "question_id": 30476971, "link": "https://stackoverflow.com/questions/30476971/is-the-child-process-in-foreground-or-background-on-fork-in-c/30477063#30477063", "title": "Is the child process in foreground or background on fork in C", "body": "<p>Simply set the sequence as background or foreground using the commands I detailed below. Use the <strong>pid = fork()</strong> to ensure you execute in the parent or child whichever you want to set first. In the parent, pid will be the PID of the child and in the child it will be 0. Use it like this :</p>\n\n<pre><code>if(pid)\n// Parent\nelse\n// Child\n</code></pre>\n\n<p><strong>Process</strong></p>\n\n<p>A process pid is put into the process group pgid by</p>\n\n<pre><code>setpgid(pid, pgid);\n</code></pre>\n\n<p>If pgid == pid or pgid == 0 then this creates a new process group with process group leader pid. Otherwise, this puts pid into the already existing process group pgid. A zero pid refers to the current process. The call setpgrp() is equivalent to setpgid(0,0).</p>\n\n<p><strong>Foreground</strong></p>\n\n<p>Among the process groups in a session at most one can be the foreground process group of that session. The tty input and tty signals (signals generated by ^C, ^Z, etc.) go to processes in this foreground process group.</p>\n\n<p>A process can determine the foreground process group in its session using tcgetpgrp(fd), where fd refers to its controlling tty. If there is none, this returns a random value larger than 1 that is not a process group ID.</p>\n\n<p>A process can set the foreground process group in its session using tcsetpgrp(fd,pgrp), where fd refers to its controlling tty, and pgrp is a process group in the its session, and this session still is associated to the controlling tty of the calling process.</p>\n\n<p>How does one get fd? By definition, /dev/tty refers to the controlling tty, entirely independent of redirects of standard input and output. (There is also the function ctermid() to get the name of the controlling terminal. On a POSIX standard system it will return /dev/tty.) Opening the name of the controlling tty gives a file descriptor fd.</p>\n\n<p><strong>Background</strong></p>\n\n<p>All process groups in a session that are not foreground process group are background process groups. Since the user at the keyboard is interacting with foreground processes, background processes should stay away from it. When a background process reads from the terminal it gets a SIGTTIN signal. Normally, that will stop it, the job control shell notices and tells the user, who can say fg to continue this background process as a foreground process, and then this process can read from the terminal. But if the background process ignores or blocks the SIGTTIN signal, or if its process group is orphaned (see below), then the read() returns an EIO error, and no signal is sent. (Indeed, the idea is to tell the process that reading from the terminal is not allowed right now. If it wouldn't see the signal, then it will see the error return.)</p>\n\n<p>When a background process writes to the terminal, it may get a SIGTTOU signal. May: namely, when the flag that this must happen is set (it is off by default). One can set the flag by</p>\n\n<pre><code>% stty tostop\n</code></pre>\n\n<p>and clear it again by</p>\n\n<pre><code>% stty -tostop\n</code></pre>\n\n<p>and inspect it by</p>\n\n<pre><code>% stty -a\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1603, "user_id": 2231059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b16055d451b2f7cdcd760d1ed9203a50?s=128&d=identicon&r=PG&f=1", "display_name": "marbu", "link": "https://stackoverflow.com/users/2231059/marbu"}, "edited": false, "score": 1, "creation_date": 1432716484, "post_id": 30477153, "comment_id": 49034077, "body": "Other good explanation of process groups is <a href=\"http://www.informit.com/articles/article.aspx?p=397655&amp;seqNum=6&amp;rll=1\" rel=\"nofollow noreferrer\">Sessions and Process Groups</a>"}, {"owner": {"reputation": 1591, "user_id": 622121, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb5b05a7391cfa97fc9016ce95471ee?s=128&d=identicon&r=PG", "display_name": "Kenji Noguchi", "link": "https://stackoverflow.com/users/622121/kenji-noguchi"}, "edited": false, "score": 0, "creation_date": 1483492299, "post_id": 30477153, "comment_id": 70115898, "body": "Why are you talking about daemons when the OP simply asked about background processes."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1432716533, "last_edit_date": 1432716533, "creation_date": 1432715612, "answer_id": 30477153, "question_id": 30476971, "link": "https://stackoverflow.com/questions/30476971/is-the-child-process-in-foreground-or-background-on-fork-in-c/30477153#30477153", "title": "Is the child process in foreground or background on fork in C", "body": "<p>On Linux and many Unix like systems, you may want to use <a href=\"http://man7.org/linux/man-pages/man3/daemon.3.html\" rel=\"nofollow\">daemon(3)</a> to create a background, <a href=\"http://en.wikipedia.org/wiki/Daemon_%28computing%29\" rel=\"nofollow\">daemonized</a> process.</p>\n\n<p>You may also want to <a href=\"http://man7.org/linux/man-pages/man2/close.2.html\" rel=\"nofollow\">close(2)</a> or redirect all of <em>stdin</em>, <em>stdout</em>, <em>stderr</em> (perhaps to <code>/dev/null</code>, see <a href=\"http://man7.org/linux/man-pages/man4/null.4.html\" rel=\"nofollow\">null(4)</a>) using <a href=\"http://man7.org/linux/man-pages/man2/dup2.2.html\" rel=\"nofollow\">dup2(2)</a>.</p>\n\n<p>Otherwise, take care about controlling <a href=\"http://en.wikipedia.org/wiki/POSIX_terminal_interface\" rel=\"nofollow\">terminals</a>, <a href=\"http://en.wikipedia.org/wiki/Process_group\" rel=\"nofollow\">process groups</a>, <a href=\"http://en.wikipedia.org/wiki/Job_control_%28Unix%29\" rel=\"nofollow\">job control</a>, session ids. See <a href=\"http://man7.org/linux/man-pages/man2/setpgrp.2.html\" rel=\"nofollow\">setpgrp(2)</a> (and <code>setpgid</code>) and the <em>NOTES</em> section. Use <a href=\"http://man7.org/linux/man-pages/man3/tcsetpgrp.3.html\" rel=\"nofollow\">tcsetpgrp(3)</a>, <a href=\"http://man7.org/linux/man-pages/man2/setsid.2.html\" rel=\"nofollow\">setsid(2)</a></p>\n\n<p>Read also the <a href=\"http://www.linusakesson.net/programming/tty/\" rel=\"nofollow\">tty demystified</a> page &amp;&amp; <a href=\"http://man7.org/linux/man-pages/man4/tty.4.html\" rel=\"nofollow\">tty(4)</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4943701, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wtt1LzxyPQk/AAAAAAAAAAI/AAAAAAAAAlw/K_-8K-JOtqs/photo.jpg?sz=128", "display_name": "ror", "link": "https://stackoverflow.com/users/4943701/ror"}, "is_accepted": false, "score": 0, "last_activity_date": 1432716209, "creation_date": 1432716209, "answer_id": 30477366, "question_id": 30476971, "link": "https://stackoverflow.com/questions/30476971/is-the-child-process-in-foreground-or-background-on-fork-in-c/30477366#30477366", "title": "Is the child process in foreground or background on fork in C", "body": "<p>Are you trying to change the <em>nice</em> value in code?  Whenever you <em>fork</em> a process it is in the \"background.\" Depending on what you mean, and what you're trying to do.  </p>\n"}], "owner": {"reputation": 1779, "user_id": 2214576, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ca0629dcdb8d4d3747c78674e90d5203?s=128&d=identicon&r=PG", "display_name": "Randomly Named User", "link": "https://stackoverflow.com/users/2214576/randomly-named-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5085, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1432716533, "creation_date": 1432715079, "last_edit_date": 1432715443, "question_id": 30476971, "link": "https://stackoverflow.com/questions/30476971/is-the-child-process-in-foreground-or-background-on-fork-in-c", "title": "Is the child process in foreground or background on fork in C", "body": "<p>When I perform a <code>fork()</code> in C on <code>Linux</code>, is the newly created child a foreground or a background process?</p>\n\n<p>If it is foreground by default, is there any way to force it to be created as a background process?</p>\n\n<p>I read through quite a few links about <code>fork</code>, but whether it's foreground or background is not mentioned anywhere.</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Fork_(system_call)\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Fork_(system_call)</a></p>\n\n<p><a href=\"http://linux.die.net/man/2/fork\" rel=\"nofollow\">http://linux.die.net/man/2/fork</a></p>\n\n<p><a href=\"http://www.csl.mtu.edu/cs4411.ck/www/NOTES/process/fork/create.html\" rel=\"nofollow\">http://www.csl.mtu.edu/cs4411.ck/www/NOTES/process/fork/create.html</a></p>\n"}, {"tags": ["c", "free"], "answers": [{"comments": [{"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 1, "creation_date": 1432714990, "post_id": 30476909, "comment_id": 49033196, "body": "&quot;Undefined behaviour&quot; means anything can happen, including everything working fine in development and crashing and destroying user&#39;s data when the product is shipped."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 0, "creation_date": 1432718067, "post_id": 30476909, "comment_id": 49035145, "body": "@gnasher729 Thanks for the elaboration. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1432714891, "creation_date": 1432714891, "answer_id": 30476909, "question_id": 30476884, "link": "https://stackoverflow.com/questions/30476884/shallow-copy-struct-got-weird-result-on-xcode/30476909#30476909", "title": "shallow copy struct got weird result on Xcode", "body": "<p>Accessing memory after you've <code>free()</code>d it invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n\n<p>You should <strong>not</strong> be using the <code>printf()</code> with the <code>free()</code>d memory after you call</p>\n\n<pre><code> free(pc1.p);\n</code></pre>\n"}], "owner": {"reputation": 1304, "user_id": 4730119, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c48c29fd1761c18eb56e660116fda64f?s=128&d=identicon&r=PG&f=1", "display_name": "dispute", "link": "https://stackoverflow.com/users/4730119/dispute"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 30476909, "answer_count": 1, "score": 1, "last_activity_date": 1437909223, "creation_date": 1432714820, "last_edit_date": 1437909223, "question_id": 30476884, "link": "https://stackoverflow.com/questions/30476884/shallow-copy-struct-got-weird-result-on-xcode", "title": "shallow copy struct got weird result on Xcode", "body": "<p>The code here is a typical example for shallow copy, it ought to got the warning when running, but on my Xcode, it's running well and result is</p>\n\n<blockquote>\n  <p>hi,hi<br>hi,hi</p>\n</blockquote>\n\n<p>why?</p>\n\n<p>The code:</p>\n\n<pre><code>struct pc\n{\n    char *p;\n};\n\nint main()\n{\n    struct pc pc1;\n    pc1.p = malloc(100);\n    strcpy(pc1.p, \"hi\");\n    struct pc pc2 = pc1; // shallow copy\n    printf(\"%s,%s\\n\", pc1.p, pc2.p);\n    free(pc1.p);\n    printf(\"%s,%s\", pc1.p, pc2.p);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "fopen", "readdir"], "answers": [{"comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1432713655, "post_id": 30476443, "comment_id": 49032367, "body": "Alternatively, change the working directory to the directory in question, <code>chdir(argv[1])</code>"}, {"owner": {"reputation": 59, "user_id": 4333976, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/710362983/picture?type=large", "display_name": "Yakov Abrams", "link": "https://stackoverflow.com/users/4333976/yakov-abrams"}, "edited": false, "score": 0, "creation_date": 1432714601, "post_id": 30476443, "comment_id": 49032934, "body": "no, it does find the file, and it prints &quot;opening youtubesign&quot;, the point of failure is in fopen"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 59, "user_id": 4333976, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/710362983/picture?type=large", "display_name": "Yakov Abrams", "link": "https://stackoverflow.com/users/4333976/yakov-abrams"}, "edited": false, "score": 0, "creation_date": 1432715244, "post_id": 30476443, "comment_id": 49033335, "body": "@YakovAbrams Yes and that&#39;s what I&#39;m telling you. The file is found, but if you print the <code>d_name</code> structure member you will see that it only contains the file-name <b><i>without the path</i></b>. So if the current working directory of the program is <code>A</code>, and you provide <code>B</code> as argument, then the <code>fopen</code> call will try to open the file <code>A&#47;YouTubeSign</code> and <i>not</i> <code>B&#47;YouTubeSign</code>."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 4, "last_activity_date": 1432713477, "creation_date": 1432713477, "answer_id": 30476443, "question_id": 30476380, "link": "https://stackoverflow.com/questions/30476380/fopen-in-c-returns-null-even-when-file-exists-is-returned-by-readdir/30476443#30476443", "title": "fopen() in C returns NULL even when file exists (is returned by readdir())", "body": "<p>The problem is that the file-name you get from <code>readdir</code> does <em>not</em> include the base path provided to <code>opendir</code>.</p>\n\n<p>You have to create the full path using the base path, the path separator and the file-name.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4943701, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wtt1LzxyPQk/AAAAAAAAAAI/AAAAAAAAAlw/K_-8K-JOtqs/photo.jpg?sz=128", "display_name": "ror", "link": "https://stackoverflow.com/users/4943701/ror"}, "is_accepted": false, "score": -1, "last_activity_date": 1432715374, "creation_date": 1432715374, "answer_id": 30477072, "question_id": 30476380, "link": "https://stackoverflow.com/questions/30476380/fopen-in-c-returns-null-even-when-file-exists-is-returned-by-readdir/30477072#30477072", "title": "fopen() in C returns NULL even when file exists (is returned by readdir())", "body": "<p>The problem is that it will work from the command line when you're testing this code.  There's nothing <em>technically</em> missing here.  You need to make sure that the process is using the correct working directory.</p>\n"}, {"tags": [], "owner": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "is_accepted": false, "score": 0, "last_activity_date": 1432716094, "creation_date": 1432716094, "answer_id": 30477324, "question_id": 30476380, "link": "https://stackoverflow.com/questions/30476380/fopen-in-c-returns-null-even-when-file-exists-is-returned-by-readdir/30477324#30477324", "title": "fopen() in C returns NULL even when file exists (is returned by readdir())", "body": "<p>You have to pass an absolute file name when you use <code>fopen()</code>, composed with the directory name and file base name, e.g.:</p>\n\n<pre><code>char abs_path[PATH_MAX];\n// ...\nsnprintf(abs_path, PATH_MAX, \"%s/%s\", argv[1], in_file-&gt;d_name);\nsignature = fopen(abs_path, \"r\");\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 4333976, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/710362983/picture?type=large", "display_name": "Yakov Abrams", "link": "https://stackoverflow.com/users/4333976/yakov-abrams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1570794917, "creation_date": 1432713324, "last_edit_date": 1570794917, "question_id": 30476380, "link": "https://stackoverflow.com/questions/30476380/fopen-in-c-returns-null-even-when-file-exists-is-returned-by-readdir", "title": "fopen() in C returns NULL even when file exists (is returned by readdir())", "body": "<p>I am trying to open a directory, and then open a file named \"YouTubeSign\", directory opens fine, but for some reason fopen() on the file fails even if the file exists; any ideas?</p>\n\n<pre><code>int main(int argc, char **argv)\n{\n    DIR *pdir = NULL;\n    struct dirent *in_file;\n    FILE *signature = NULL;\n    pdir = opendir(argv[1]);\n\n      if (pdir == NULL)\n       {\n        printf(\"could not open directory %s\", argv[1]);\n        return -1;\n      }\n\n    while (in_file = readdir(pdir))\n    {\n        if (strcmp(in_file-&gt;d_name, \"YouTubeSign\") == 0)\n        {\n        signature = fopen(in_file-&gt;d_name, \"r\");\n        printf(\"opening youtubesign\");\n        break;\n        }\n    }\n\n    if (signature == NULL){\n        printf(\"could not open file \");\n        return -1;\n    }\n</code></pre>\n"}, {"tags": ["c", "linux", "driver"], "answers": [{"comments": [{"owner": {"reputation": 7270, "user_id": 1391074, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8f68df8049c2367f1e312b85a1b984a8?s=128&d=identicon&r=PG", "display_name": "avasin", "link": "https://stackoverflow.com/users/1391074/avasin"}, "edited": false, "score": 0, "creation_date": 1432713376, "post_id": 30476206, "comment_id": 49032181, "body": "Wow! Thank a lot for reply. But how i will be able to communicate with my driver via command line? Or there could be only programming interface, and i will have to make separate program to work with?"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 7270, "user_id": 1391074, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8f68df8049c2367f1e312b85a1b984a8?s=128&d=identicon&r=PG", "display_name": "avasin", "link": "https://stackoverflow.com/users/1391074/avasin"}, "edited": false, "score": 1, "creation_date": 1432713519, "post_id": 30476206, "comment_id": 49032275, "body": "@avasin: Ah!, that is the drawback! There is no generic command for <code>ioctl</code>. In order to communicate with the driver you will have to write a small user-space utility. Just a <code>main()</code> program that parses <code>argv[1]</code>, sends it to the <code>ioctl</code> and prints back the result."}, {"owner": {"reputation": 7270, "user_id": 1391074, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8f68df8049c2367f1e312b85a1b984a8?s=128&d=identicon&r=PG", "display_name": "avasin", "link": "https://stackoverflow.com/users/1391074/avasin"}, "edited": false, "score": 0, "creation_date": 1432713554, "post_id": 30476206, "comment_id": 49032304, "body": "Thanks a lot! Got it!"}, {"owner": {"reputation": 7270, "user_id": 1391074, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8f68df8049c2367f1e312b85a1b984a8?s=128&d=identicon&r=PG", "display_name": "avasin", "link": "https://stackoverflow.com/users/1391074/avasin"}, "edited": false, "score": 0, "creation_date": 1453758005, "post_id": 30476206, "comment_id": 57733904, "body": "i found, that ioctl negative values can be treated as error status. So, i have to implement read &amp; write interface."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 7270, "user_id": 1391074, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8f68df8049c2367f1e312b85a1b984a8?s=128&d=identicon&r=PG", "display_name": "avasin", "link": "https://stackoverflow.com/users/1391074/avasin"}, "edited": false, "score": 1, "creation_date": 1453763521, "post_id": 30476206, "comment_id": 57736476, "body": "@avasin: Well, <code>ioctl</code> can get a pointer, either to a single value or a struct. Or given that the sine of an angle is between -1 and 1, you could normalize the output to (0, 2) and correct it in user-land."}], "tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": true, "score": 2, "last_activity_date": 1432712878, "creation_date": 1432712878, "answer_id": 30476206, "question_id": 30476144, "link": "https://stackoverflow.com/questions/30476144/how-i-can-retrieve-data-in-my-linux-virtual-device-driver/30476206#30476206", "title": "How i can retrieve data in my linux virtual device driver?", "body": "<p>The most painless solution would probably be to implement a <code>ioctl</code>.</p>\n\n<p>The <code>cat</code> in the linked example uses <code>read()</code>, that is nice when your device generates data, such as a mouse or a video camera, but when a device replies to commands a <code>ioctl</code> is more appropriate: you send a command <code>GET_SIN</code> with an angle as argument and get a reply with the answer.</p>\n\n<p>The alternative would be to <code>write()</code> the angle and then <code>read()</code> the solution: far more complicated, because there may be several processes reading and writing at the same time and it would be a mess!</p>\n\n<p>BTW, beware! AFAIK, the kernel is not allowed to use floating point arithmentic, nor to link to <code>-lm</code>, so you will have to implement the sine as a fix-point integer function, maybe using a table...</p>\n"}], "owner": {"reputation": 7270, "user_id": 1391074, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8f68df8049c2367f1e312b85a1b984a8?s=128&d=identicon&r=PG", "display_name": "avasin", "link": "https://stackoverflow.com/users/1391074/avasin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 30476206, "answer_count": 1, "score": 0, "last_activity_date": 1432712878, "creation_date": 1432712627, "question_id": 30476144, "link": "https://stackoverflow.com/questions/30476144/how-i-can-retrieve-data-in-my-linux-virtual-device-driver", "title": "How i can retrieve data in my linux virtual device driver?", "body": "<p>I have to implement virtual device driver, that will calculate sin of specified angle.</p>\n\n<p>I found <a href=\"http://www.linuxdevcenter.com/pub/a/linux/2007/07/05/devhelloworld-a-simple-introduction-to-device-drivers-under-linux.html?page=2\" rel=\"nofollow\">article</a> how to write hello-world driver, it works nice, when i call <code>cat</code> on it.</p>\n\n<p>But to calculate sin, i need to transfer some data to my driver. Which solution is most painless?</p>\n\n<p>Should i first of all read all input data in separate method, remember it somewhere and then calculate &amp; output?</p>\n"}, {"tags": ["c++", "c"], "answers": [{"tags": [], "owner": {"reputation": 10089, "user_id": 294813, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/33c092532e11d12bd14f4fbe564560fb?s=128&d=identicon&r=PG", "display_name": "petersohn", "link": "https://stackoverflow.com/users/294813/petersohn"}, "is_accepted": false, "score": 3, "last_activity_date": 1432712437, "last_edit_date": 1432712437, "creation_date": 1432712092, "answer_id": 30475984, "question_id": 30475904, "link": "https://stackoverflow.com/questions/30475904/preprocessor-definition-in-function-parameter/30475984#30475984", "title": "Preprocessor Definition in function parameter", "body": "<p>You can do something like this (suppose your code is in <code>foo.h</code>):</p>\n\n<h1>Non-const A</h1>\n\n<pre><code>#include \"foo.h\"\n...\n</code></pre>\n\n<h1>const A</h1>\n\n<pre><code>#define A const\n#include \"foo.h\"\n</code></pre>\n\n<p>Basically what your code does is that it allows adding a flag to the parameter. If no <code>A</code> macro is defined when the header is included, then it defines it as an empty string, so it is ignored. If the macro is defined, however, then its value is substituted into the signature.</p>\n\n<p>Another usage is to select features based on compiler capabilities. For example:</p>\n\n<pre><code>#ifdef HAVE_CPP11\n# define FORWARD_REF &amp;&amp;\n# define FORWARD(T, x) std::forward&lt;T&gt;(x)\n#else\n# define FORWARD_REF const &amp;\n# define FORWARD(T, x) x\n#endif\n\ntemplate &lt;typename T&gt;\nvoid function_that_forwards_parameter(T FORWARD_REF t) {\n    foo(FORWARD(T, t));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33588, "user_id": 402169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2ec8fa642572c1d90a0dadf374811e4d?s=128&d=identicon&r=PG", "display_name": "tenfour", "link": "https://stackoverflow.com/users/402169/tenfour"}, "is_accepted": true, "score": 4, "last_activity_date": 1432712148, "creation_date": 1432712148, "answer_id": 30475999, "question_id": 30475904, "link": "https://stackoverflow.com/questions/30475904/preprocessor-definition-in-function-parameter/30475999#30475999", "title": "Preprocessor Definition in function parameter", "body": "<p>For:</p>\n\n<pre><code>#define A this_is_a\n</code></pre>\n\n<p>The preprocessor will replace <code>A</code> with <code>this_is_a</code>.</p>\n\n<p>For:</p>\n\n<pre><code>#define A\n</code></pre>\n\n<p>The preprocessor will replace <code>A</code> with nothing.</p>\n\n<p>So in your example code, <code>A</code> and <code>B</code> symbols are just discarded. People use this technique to annotate code sometimes, for example:</p>\n\n<pre><code>#define IN\n#define OUT\n</code></pre>\n\n<p>Now you can annotate function parameters showing whether they are \"in\" or \"out\" parameters:</p>\n\n<pre><code>void my_function(IN int i, OUT int&amp; x) { ... }\n</code></pre>\n"}], "owner": {"reputation": 782, "user_id": 2166335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aff1bfb1242ff1651415e41c178a7c0?s=128&d=identicon&r=PG", "display_name": "Melvin Sy", "link": "https://stackoverflow.com/users/2166335/melvin-sy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 30475999, "answer_count": 2, "score": 2, "last_activity_date": 1432712437, "creation_date": 1432711852, "question_id": 30475904, "link": "https://stackoverflow.com/questions/30475904/preprocessor-definition-in-function-parameter", "title": "Preprocessor Definition in function parameter", "body": "<p>it is my first type to encounter this type of code. I am having a hard time understanding it.</p>\n\n<pre><code>#ifndef A\n#define A\n#endif\n\n#ifndef B\n#define B\n#endif\n\nvoid funct (structA* A paramA, structB* B paramB){};\n</code></pre>\n\n<p>What is the purpose of preprocessor A and B in the parameter? </p>\n"}, {"tags": ["mysql", "c"], "answers": [{"comments": [{"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1432716559, "post_id": 30475514, "comment_id": 49034139, "body": "Okie Dokie !! I&#39;m somewhat beginning to understand the concept. :)"}], "tags": [], "owner": {"reputation": 1268, "user_id": 1786423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d506911da3c8df4588f158b088ad61a?s=128&d=identicon&r=PG", "display_name": "jkavalik", "link": "https://stackoverflow.com/users/1786423/jkavalik"}, "is_accepted": true, "score": 2, "last_activity_date": 1432710698, "creation_date": 1432710698, "answer_id": 30475514, "question_id": 30475318, "link": "https://stackoverflow.com/questions/30475318/embedded-mysql-server-and-application-size/30475514#30475514", "title": "Embedded mysql server and application size", "body": "<p>Embedding mysql means embedding the \"server\" code, not data. Database tables will be stored in configured datadir.</p>\n"}], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 30475514, "answer_count": 1, "score": 1, "last_activity_date": 1432710698, "creation_date": 1432710104, "question_id": 30475318, "link": "https://stackoverflow.com/questions/30475318/embedded-mysql-server-and-application-size", "title": "Embedded mysql server and application size", "body": "<p>Sorry if this is too stupid but I couldn't resist asking.<br>\nI wish to create a  C application with an embedded MYSQL database <strong>(libmysqld)</strong> in it.\nWhat I am confused about is the size of the application.<br>\nSince the application itself embeds a mysql db in it, would the size of the application be the size of the binary(excluding db) + size of the embedded db?<br>\nIf this is the case wouldn't it be difficult run standalone applications which\ndeals with large volumes of mysql data as they would consume a lot of RAM?</p>\n\n<p>Am I missing the concept here?</p>\n"}, {"tags": ["c++", "c", "dijkstra"], "comments": [{"owner": {"reputation": 101, "user_id": 4942869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f40d4d20748fa19bb995c99010d7fb?s=128&d=identicon&r=PG&f=1", "display_name": "Abby", "link": "https://stackoverflow.com/users/4942869/abby"}, "edited": false, "score": 0, "creation_date": 1432709757, "post_id": 30475125, "comment_id": 49029967, "body": "Nearest[v] \u2190\ud835\udc64(\ud835\udc62\ud835\udc63) = Nearest[v] \u2190w(uv)"}, {"owner": {"reputation": 23582, "user_id": 598289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b04c9074fed0dd215caec771c2a9ea98?s=128&d=identicon&r=PG", "display_name": "SJuan76", "link": "https://stackoverflow.com/users/598289/sjuan76"}, "edited": false, "score": 1, "creation_date": 1432710820, "post_id": 30475125, "comment_id": 49030579, "body": "Not the issue, but usually you would write <code>for (int i = 0; i &lt; N; i++) dist[i] = INT_MAX, sptSet[i] = false;</code> as <code>for (int i = 0; i &lt; N; i++) {dist[i] = INT_MAX; sptSet[i] = false;}</code>; the comma operator is not usually used just to put several statements in a line."}, {"owner": {"reputation": 101, "user_id": 4942869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f40d4d20748fa19bb995c99010d7fb?s=128&d=identicon&r=PG&f=1", "display_name": "Abby", "link": "https://stackoverflow.com/users/4942869/abby"}, "reply_to_user": {"reputation": 23582, "user_id": 598289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b04c9074fed0dd215caec771c2a9ea98?s=128&d=identicon&r=PG", "display_name": "SJuan76", "link": "https://stackoverflow.com/users/598289/sjuan76"}, "edited": false, "score": 0, "creation_date": 1432711256, "post_id": 30475125, "comment_id": 49030877, "body": "@SJuan76 Thanks, I have edited accordingly. The problem was, this code does not match the pseudocode it seems. I would like to know which part it does not match."}, {"owner": {"reputation": 6076, "user_id": 2212172, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/LDkDc.png?s=128&g=1", "display_name": "Lord Zsolt", "link": "https://stackoverflow.com/users/2212172/lord-zsolt"}, "edited": false, "score": 1, "creation_date": 1432711634, "post_id": 30475125, "comment_id": 49031128, "body": "Currently, the code doesn&#39;t compile. <code>sptSet[i] = false;</code> is outside the for loop (Which is why i tell everyone to ALWAYS put {} even if there&#39;s a single-line statement in it."}, {"owner": {"reputation": 23582, "user_id": 598289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b04c9074fed0dd215caec771c2a9ea98?s=128&d=identicon&r=PG", "display_name": "SJuan76", "link": "https://stackoverflow.com/users/598289/sjuan76"}, "reply_to_user": {"reputation": 6076, "user_id": 2212172, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/LDkDc.png?s=128&g=1", "display_name": "Lord Zsolt", "link": "https://stackoverflow.com/users/2212172/lord-zsolt"}, "edited": false, "score": 0, "creation_date": 1432711731, "post_id": 30475125, "comment_id": 49031190, "body": "@LordZsolt already edited the correction."}, {"owner": {"reputation": 6076, "user_id": 2212172, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/LDkDc.png?s=128&g=1", "display_name": "Lord Zsolt", "link": "https://stackoverflow.com/users/2212172/lord-zsolt"}, "edited": false, "score": 0, "creation_date": 1432711874, "post_id": 30475125, "comment_id": 49031259, "body": "I don&#39;t see you doing anything with <code>Nearest[v] \u2190w(uv)</code> and <code>Parent[r] \u2190 u</code> (Pardon me, it&#39;s been a while since I wrote a Dijkstra myself, so I might not see where you use it). Also, how long did your professor spend looking at your code? If less then 5-10 seconds, he&#39;s ignorant and a jerk. Did you ask him why? Did he answer with anything?"}, {"owner": {"reputation": 11698, "user_id": 166247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c5bd086b49b0b66cf9089d6f7e4d41?s=128&d=identicon&r=PG", "display_name": "Ashalynd", "link": "https://stackoverflow.com/users/166247/ashalynd"}, "edited": false, "score": 0, "creation_date": 1432712217, "post_id": 30475125, "comment_id": 49031458, "body": "The pseudocode method signature has source and destination, but yours only has one vertice."}, {"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 2, "creation_date": 1432713121, "post_id": 30475125, "comment_id": 49032016, "body": "Question 1: Do you need to implement <code>nearest</code> and <code>parent</code>?  Question 2: Is there a requirement to use a priority queue (min heap)?"}, {"owner": {"reputation": 101, "user_id": 4942869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f40d4d20748fa19bb995c99010d7fb?s=128&d=identicon&r=PG&f=1", "display_name": "Abby", "link": "https://stackoverflow.com/users/4942869/abby"}, "reply_to_user": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 0, "creation_date": 1432713472, "post_id": 30475125, "comment_id": 49032246, "body": "@JS1 question 1: yes, furthermore I need to modified the code to solve some real time problem. But the the basic i need to solve the pseudocode first ;( question2 : no requirement to use priority queue"}, {"owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "edited": false, "score": 0, "creation_date": 1432713626, "post_id": 30475125, "comment_id": 49032345, "body": "The code currently doesn&#39;t compile: <code>sptSet[v] == false</code> needs to be <code>sptSet[n] == false</code>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1432715300, "post_id": 30475125, "comment_id": 49033359, "body": "I believe the goal is to find the shortest paths, not only the lengths of those paths. (And the pseudocode doesn&#39;t do any printing.) You would make things much easier for yourself if you used the same naming as the pseudocode. Does renaming &quot;InTheTree&quot; to &quot;sptSet&quot; really make anything clearer?"}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1432745325, "post_id": 30487242, "comment_id": 49055330, "body": "No, it matches the pseudocode (and Dijkstra generally) that <code>minDistance()</code> considers only unvisited nodes.  In the pseudocode, that corresponds to the condition &quot;over all u such that InTheTree[u] = .false.&quot;.  Dijkstra implementations ordinarily use a min-heap to manage this selection, which is more efficient, but the pseudocode doesn&#39;t require that."}], "tags": [], "owner": {"reputation": 2760, "user_id": 1235183, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/59caaeef5801c8d3c82eb76080994599?s=128&d=identicon&r=PG", "display_name": "user1235183", "link": "https://stackoverflow.com/users/1235183/user1235183"}, "is_accepted": false, "score": -1, "last_activity_date": 1432741566, "creation_date": 1432741566, "answer_id": 30487242, "question_id": 30475125, "link": "https://stackoverflow.com/questions/30475125/dijkstras-algorithm-in-c/30487242#30487242", "title": "Dijkstra&#39;s algorithm in C++", "body": "<p>On problem is i belive your minDistance function, it seems that you only update unvisited nodes ( line 10 if (sptSet[v] == false &amp;&amp; dist[n] &lt;= min)). I guess this is wrong. Consider the following graph (nodes V={n1, n2, n3, n4} with the following distances d(n1, n2) = 10; d(n1,n3) = 3; d(n3,n2) = 3 ( all others are infinity).</p>\n\n<p>Starting in n1 you discover n2 with the cost of 10</p>\n\n<p>you discover also n3 with the cost of 3</p>\n\n<p>from n2 you dont discover the shorter path to n2 ( n1-n3-n2), because you marked n2 already as visited.</p>\n\n<p>I'm not sure, if i'm wright. If not dont blame me.</p>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 4942869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f40d4d20748fa19bb995c99010d7fb?s=128&d=identicon&r=PG&f=1", "display_name": "Abby", "link": "https://stackoverflow.com/users/4942869/abby"}, "edited": false, "score": 0, "creation_date": 1432783747, "post_id": 30489534, "comment_id": 49070529, "body": "thanks a lot for pointing out the mistake, And my lecturer agree with the mistake as below:-  - It looks like the conditional if Dist[u] \u2190 w(uv) &lt; Dist[v] then should instead be if Dist[u] + w(uv) &lt; Dist[v] then. (You have implemented the correct version, which could be construed as another difference from the pseudocode.)  - It looks like Parent[r] \u2190 u should be Parent[v] \u2190 u.    [Nearest] is equals to MIN ?"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 5, "last_activity_date": 1432749476, "last_edit_date": 1432749476, "creation_date": 1432748479, "answer_id": 30489534, "question_id": 30475125, "link": "https://stackoverflow.com/questions/30475125/dijkstras-algorithm-in-c/30489534#30489534", "title": "Dijkstra&#39;s algorithm in C++", "body": "<p>The most obvious mismatch is that your code does not have anything corresponding to to the pseudocode's <code>Parent</code> array.  I take that as an output parameter, though it's not explicitly so marked.  As you seem to have recognized, it is not needed for computing only the <em>lengths</em> of the minimum paths, but it contains all the information about the actual steps in those paths, and that is often desired information.</p>\n\n<p>You also have no analog of the pseudocode's <code>Nearest</code>; it would be a bit mean to complain about that, though, as <code>Nearest</code> is not a parameter to the routine, and the pseudocode does not show its elements ever being read.  As such, it does not appear to serve any useful purpose.</p>\n\n<p>It appears that this code also does not quite match:</p>\n\n<pre><code>         if (!sptSet[n] &amp;&amp; graph[u][n] &amp;&amp; dist[u] != INT_MAX \n                                       &amp;&amp; dist[u]+graph[u][n] &lt; dist[n])\n            dist[n] = dist[u] + graph[u][n];\n</code></pre>\n\n<p>The condition <code>&amp;&amp; dist[u] != INT_MAX</code> does not correspond to anything in the pseudocode. (It's also unnecessary, inasmuch as <code>u</code> was returned by <code>minDistance()</code>, and therefore that condition should always be satisfied).</p>\n\n<p>Conceivably, your instructor may also be dissatisfied that you print the min path lengths instead of returning them.  It depends a bit on the pseudocode dialect, but I'd be inclined to take the appearance of <code>Dist</code> in the parameter list as an indication that it is an output parameter, not merely an internal variable.</p>\n\n<p>If your instructor is being extremely picky, then perhaps you can get some slack by pointing out some apparent errors in the pseudocode:</p>\n\n<ul>\n<li>As already mentioned, <code>Nearest</code> is not a parameter, and it is written to but never read from.</li>\n<li>It looks like the conditional <code>if Dist[u] \u2190 w(uv) &lt; Dist[v] then</code> should instead be <code>if Dist[u] + w(uv) &lt; Dist[v] then</code>.  (You have implemented the correct version, which could be construed as another difference from the pseudocode.)</li>\n<li>It looks like <code>Parent[r] \u2190 u</code> should be <code>Parent[v] \u2190 u</code>.</li>\n</ul>\n\n<p>Of course, it could be that your instructor wanted you to implement the pseudocode exactly, errors and all ....</p>\n\n<p>As a matter of strategy, I would have tried to use variable names better matching the pseudocode.  I don't think it would be fair for your instructor to reject the code on those grounds, but comparing the C++ code to the pseudocode would have been easier for <em>everyone</em> if you had stuck a bit closer with your names.</p>\n\n<p>While I'm talking about your code, by the way, I observe that although your <code>minDistance()</code> function appears to implement the pseudocode's requirements, it does so in an inefficient way (and Dijkstra isn't particularly efficient to begin with).  The usual approach uses a min-heap to track nodes that have been seen but not yet visited, which reduces the cost of selecting the min-distance node from O(n) to O(log n).  Not that it matters for so few elements as you are testing on, of course, but for large graphs the difference is enormous.</p>\n"}], "owner": {"reputation": 101, "user_id": 4942869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f40d4d20748fa19bb995c99010d7fb?s=128&d=identicon&r=PG&f=1", "display_name": "Abby", "link": "https://stackoverflow.com/users/4942869/abby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1388, "favorite_count": 3, "answer_count": 2, "score": 9, "last_activity_date": 1524660264, "creation_date": 1432709489, "last_edit_date": 1524660264, "question_id": 30475125, "link": "https://stackoverflow.com/questions/30475125/dijkstras-algorithm-in-c", "title": "Dijkstra&#39;s algorithm in C++", "body": "<p>I'm required to implement the Dijkstra's algorithm via ADT graph using the adjacency matrix representation for finding a shortest path by enhancing the pseudo code below using either C/C++ language.</p>\n\n<pre><code>procedure Dijkstra(G, w, r, Parent[0:n-1], Dist)\n  for v\u2190 0 to n-1 do\n    Dist[v] \u2190 \u221e\n    InTheTree[v] \u2190 .false.\n  endfor\n  Parent[r] \u2190-1\n  Dist[r] \u21900\n  for Stage \u21901 to n-1 do \n    Select vertex u that minimises Dist[u] over all u such that InTheTree[u] = .false. \n    InTheTree[u] = .true.                                       // add u to T\n    for each vertex v such that uv \u2208 E do             // update Dist[v] and \n      if .not. InTheTree[v]  then                // Parent[v] arrays\n        if Dist[u] + w(uv) &lt; Dist[v]\n          Dist[v] = Dist[u] + w(uv)\n          Nearest[v] \u2190w(uv) \n          Parent[v] \u2190 u\n        endif\n      endif\n    endfor\n  endfor\nend Dijkstra\n</code></pre>\n\n<p>Here is my solution of code which is being coded in C++. My lecturer claim that the code does not meet the pseudocode requirements and I'm not sure \nwhere it went wrong so can anyone help me to spot what doesn't match between the code and the pseudocode?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n#define N 9\n\nint minDistance(int dist[], bool sptSet[])\n{\n   int min = INT_MAX, min_index;\n\n   for (int n = 0; n &lt; N; n++)\n     if (sptSet[v] == false &amp;&amp; dist[n] &lt;= min)\n         min = dist[n], min_index = n;\n\n   return min_index;\n}\nint printSolution(int dist[], int v)\n{\n   printf(\"Vertex   Distance from Source\\n\");\n   for (int i = 0; i &lt; N; i++)\n      printf(\"%d \\t\\t %d\\n\", i, dist[i]);\n}\nvoid dijkstra(int graph[N][N], int src)\n{\n     int dist[N];     \n\n     bool sptSet[N];                         \n\n     for (int i = 0; i &lt; N; i++) {\n        dist[i] = INT_MAX;\n        sptSet[i] = false;\n     }\n\n     dist[src] = 0;\n\n\n     for (int count = 0; count &lt; N-1; count++)\n     {\n\n       int u = minDistance(dist, sptSet);\n            sptSet[u] = true;\n       for (int n = 0; n &lt; N; n++)\n         if (!sptSet[n] &amp;&amp; graph[u][n] &amp;&amp; dist[u] != INT_MAX \n                                       &amp;&amp; dist[u]+graph[u][n] &lt; dist[n])\n            dist[n] = dist[u] + graph[u][n];\n     }\n     printSolution(dist, N);\n}\n\nint main()\n{\n   int graph[N][N] = {{0, 4, 0, 0, 0, 0, 0, 8, 0},\n                      {4, 0, 8, 0, 0, 0, 0, 11, 0},\n                      {0, 8, 0, 7, 0, 4, 0, 0, 2},\n                      {0, 0, 7, 0, 9, 14, 0, 0, 0},\n                      {0, 0, 0, 9, 0, 10, 0, 0, 0},\n                      {0, 0, 4, 0, 10, 0, 2, 0, 0},\n                      {0, 0, 0, 14, 0, 2, 0, 1, 6},\n                      {8, 11, 0, 0, 0, 0, 1, 0, 7},\n                      {0, 0, 2, 0, 0, 0, 6, 7, 0}\n                     };\n\n    dijkstra(graph, 0);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2677, "user_id": 3370480, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/U8ayS.jpg?s=128&g=1", "display_name": "Flovdis", "link": "https://stackoverflow.com/users/3370480/flovdis"}, "edited": false, "score": 0, "creation_date": 1432717496, "post_id": 30475051, "comment_id": 49034764, "body": "Your question is not clear. A command can use any of these 7 different methods, using zero to three arguments. From where are the values coming to call the read or write method?"}, {"owner": {"reputation": 103, "user_id": 2000795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa41b5c4bd194949f6f3f9e329fb7b77?s=128&d=identicon&r=PG", "display_name": "john7", "link": "https://stackoverflow.com/users/2000795/john7"}, "reply_to_user": {"reputation": 2677, "user_id": 3370480, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/U8ayS.jpg?s=128&g=1", "display_name": "Flovdis", "link": "https://stackoverflow.com/users/3370480/flovdis"}, "edited": false, "score": 0, "creation_date": 1432722562, "post_id": 30475051, "comment_id": 49038370, "body": "That\u2019s the catch \u2013 how to \u201cfeed\u201d the write pointer according to some condition/case."}, {"owner": {"reputation": 2677, "user_id": 3370480, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/U8ayS.jpg?s=128&g=1", "display_name": "Flovdis", "link": "https://stackoverflow.com/users/3370480/flovdis"}, "edited": false, "score": 0, "creation_date": 1432722665, "post_id": 30475051, "comment_id": 49038453, "body": "What is the source of the data? From where do you get the zero, one, two or three values which are used to call the functions? What is the final goal of this generic calling?"}, {"owner": {"reputation": 103, "user_id": 2000795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa41b5c4bd194949f6f3f9e329fb7b77?s=128&d=identicon&r=PG", "display_name": "john7", "link": "https://stackoverflow.com/users/2000795/john7"}, "reply_to_user": {"reputation": 2677, "user_id": 3370480, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/U8ayS.jpg?s=128&g=1", "display_name": "Flovdis", "link": "https://stackoverflow.com/users/3370480/flovdis"}, "edited": false, "score": 0, "creation_date": 1432723626, "post_id": 30475051, "comment_id": 49039118, "body": "Well\u2026In my command structure I can create a variable like pointer_type and then in switch(pointer_type)  go through all cases and set the pointer in its case. But I was looking for more elegant way."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 2000795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa41b5c4bd194949f6f3f9e329fb7b77?s=128&d=identicon&r=PG", "display_name": "john7", "link": "https://stackoverflow.com/users/2000795/john7"}, "edited": false, "score": 0, "creation_date": 1432722662, "post_id": 30477588, "comment_id": 49038451, "body": "It\u2019s a straightforward method. I thought there is more elegant one."}, {"owner": {"reputation": 519, "user_id": 4929939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1TZ9u.jpg?s=128&g=1", "display_name": "LPeteR90", "link": "https://stackoverflow.com/users/4929939/lpeter90"}, "reply_to_user": {"reputation": 103, "user_id": 2000795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa41b5c4bd194949f6f3f9e329fb7b77?s=128&d=identicon&r=PG", "display_name": "john7", "link": "https://stackoverflow.com/users/2000795/john7"}, "edited": false, "score": 0, "creation_date": 1432723943, "post_id": 30477588, "comment_id": 49039329, "body": "I&#39;m not sure if there is a more elegant method. However, you could use the concept of <a href=\"http://en.wikipedia.org/wiki/Variadic_function\" rel=\"nofollow noreferrer\">variadic functions</a> to write a wrapper function to which you could pass a variable number of args. One problem would still remain though: The different return values (void or uint32)."}, {"owner": {"reputation": 103, "user_id": 2000795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa41b5c4bd194949f6f3f9e329fb7b77?s=128&d=identicon&r=PG", "display_name": "john7", "link": "https://stackoverflow.com/users/2000795/john7"}, "edited": false, "score": 0, "creation_date": 1432724440, "post_id": 30477588, "comment_id": 49039658, "body": "Thanks for the info. I&#39;ll look into."}], "tags": [], "owner": {"reputation": 519, "user_id": 4929939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1TZ9u.jpg?s=128&g=1", "display_name": "LPeteR90", "link": "https://stackoverflow.com/users/4929939/lpeter90"}, "is_accepted": false, "score": 0, "last_activity_date": 1432716822, "creation_date": 1432716822, "answer_id": 30477588, "question_id": 30475051, "link": "https://stackoverflow.com/questions/30475051/conditional-substitution-of-union-member-in-c/30477588#30477588", "title": "Conditional substitution of union member in C", "body": "<p>I don't know if thats an option for you, but how about adding an enum representing the function pointer type to your struct?</p>\n\n<p>In the conditon statement you could switch on the enum and then call the right function pointer. </p>\n"}, {"tags": [], "owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": 0, "last_activity_date": 1432717474, "creation_date": 1432717474, "answer_id": 30477823, "question_id": 30475051, "link": "https://stackoverflow.com/questions/30475051/conditional-substitution-of-union-member-in-c/30477823#30477823", "title": "Conditional substitution of union member in C", "body": "<p>I think you may use anonymous members for unions:</p>\n\n<pre><code>struct command\n{\n    char *name;  //command name\n    ...\n    union \n    {\n        ....\n        void (*fp4p)(uint32_t, uint32_t, uint32_t);\n        uint32_t (*fp6p)(uint32_t, uint32_t);\n    };\n    ...\n};\n</code></pre>\n\n<p>You have to change <code>fp6p</code>, etc. names to <code>fp6pw</code> for write_func members. Then call directly <code>commands[0].fp6p(...)</code>. Not sure but initialization must be \"generic\" as you want.</p>\n"}, {"comments": [{"owner": {"reputation": 2677, "user_id": 3370480, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/U8ayS.jpg?s=128&g=1", "display_name": "Flovdis", "link": "https://stackoverflow.com/users/3370480/flovdis"}, "edited": false, "score": 0, "creation_date": 1432736189, "post_id": 30480082, "comment_id": 49048639, "body": "Ok, this is useful information. So you get the input values from an array of <code>const char*</code>? Like the command line arguments? And you would like to map the first argument to a given call with 1-3 parameters. I would create a new question and add this context to the question. It seems to me, you just search for a good design. And for this case there are plenty good design alternatives."}, {"owner": {"reputation": 103, "user_id": 2000795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa41b5c4bd194949f6f3f9e329fb7b77?s=128&d=identicon&r=PG", "display_name": "john7", "link": "https://stackoverflow.com/users/2000795/john7"}, "reply_to_user": {"reputation": 2677, "user_id": 3370480, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/U8ayS.jpg?s=128&g=1", "display_name": "Flovdis", "link": "https://stackoverflow.com/users/3370480/flovdis"}, "edited": false, "score": 0, "creation_date": 1432742213, "post_id": 30480082, "comment_id": 49053373, "body": "Thanks. As I suspected \u2013 I should look for a better design.  :)\uf04a"}], "tags": [], "owner": {"reputation": 103, "user_id": 2000795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa41b5c4bd194949f6f3f9e329fb7b77?s=128&d=identicon&r=PG", "display_name": "john7", "link": "https://stackoverflow.com/users/2000795/john7"}, "is_accepted": false, "score": 0, "last_activity_date": 1432724255, "last_edit_date": 1432724255, "creation_date": 1432723132, "answer_id": 30480082, "question_id": 30475051, "link": "https://stackoverflow.com/questions/30475051/conditional-substitution-of-union-member-in-c/30480082#30480082", "title": "Conditional substitution of union member in C", "body": "<p>I'd like to clarify.\nSuppose we have several commands </p>\n\n<pre><code>struct command commands[] = {\n [0] = { \"reg1001\", 0,0,0,0, .read_func_pointer.fp6p =      TDC1000_SPIByteReadReg, .write_func_pointer.fp4p = TDC1000_SPIByteWriteReg },\n   [1] = = { \"reg7201\", 0,0,0,0, .read_func_pointer.fp3p =   TDC7200_SPIByteReadReg, .write_func_pointer.fp5p = TDC7200_SPIByteWriteReg },\n};\n</code></pre>\n\n<p>I have a generic function to choose an incoming command  </p>\n\n<pre><code>For (i=0; I &lt; sizeof(commands); i++)\n{\n    if (strcmp(commands[i].name,args[0])==0)\n    {\n        commands[i]. read_func_pointer.&lt;- Here \u2013 how can I know what    pointer to place?\n    }\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 2000795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa41b5c4bd194949f6f3f9e329fb7b77?s=128&d=identicon&r=PG", "display_name": "john7", "link": "https://stackoverflow.com/users/2000795/john7"}, "edited": false, "score": 0, "creation_date": 1432724540, "post_id": 30480435, "comment_id": 49039735, "body": "I see. Thank you. It&#39;s better to implement switch-case method then."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 103, "user_id": 2000795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa41b5c4bd194949f6f3f9e329fb7b77?s=128&d=identicon&r=PG", "display_name": "john7", "link": "https://stackoverflow.com/users/2000795/john7"}, "edited": false, "score": 0, "creation_date": 1432724562, "post_id": 30480435, "comment_id": 49039756, "body": "I would recommend instead using <code>libffi</code>"}, {"owner": {"reputation": 103, "user_id": 2000795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa41b5c4bd194949f6f3f9e329fb7b77?s=128&d=identicon&r=PG", "display_name": "john7", "link": "https://stackoverflow.com/users/2000795/john7"}, "edited": false, "score": 0, "creation_date": 1432730672, "post_id": 30480435, "comment_id": 49044223, "body": "It\u2019s an embedded application. I\u2019m limited in resources."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 103, "user_id": 2000795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa41b5c4bd194949f6f3f9e329fb7b77?s=128&d=identicon&r=PG", "display_name": "john7", "link": "https://stackoverflow.com/users/2000795/john7"}, "edited": false, "score": 0, "creation_date": 1432730770, "post_id": 30480435, "comment_id": 49044293, "body": "AFAIK, <code>libffi</code> is quite small (31Kbytes on my Linux/x86-64). You probably won&#39;t do better."}, {"owner": {"reputation": 103, "user_id": 2000795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa41b5c4bd194949f6f3f9e329fb7b77?s=128&d=identicon&r=PG", "display_name": "john7", "link": "https://stackoverflow.com/users/2000795/john7"}, "edited": false, "score": 0, "creation_date": 1432742343, "post_id": 30480435, "comment_id": 49053457, "body": "My chip flash is 256kb  - so 31kb quite a chunk. :)  And the command parser is a small part of the program. :)"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1432724912, "last_edit_date": 1432724912, "creation_date": 1432724119, "answer_id": 30480435, "question_id": 30475051, "link": "https://stackoverflow.com/questions/30475051/conditional-substitution-of-union-member-in-c/30480435#30480435", "title": "Conditional substitution of union member in C", "body": "<p>Calling a function of signature known only at runtime is not achievable in portable standard C99 or C11; the signature should be known at compile time (and you could extend your code, conceptually by having a <a href=\"http://en.wikipedia.org/wiki/Tagged_union\" rel=\"nofollow\">tagged union</a> of function pointers, that is by keeping a tag describing the signature). This is so because the <a href=\"http://en.wikipedia.org/wiki/Calling_convention\" rel=\"nofollow\">calling conventions</a> can (and do) vary with the function signature (the ABI would use different registers for passing different kinds or types of arguments or results).</p>\n\n<p>Alternatively, consider using <a href=\"https://sourceware.org/libffi/\" rel=\"nofollow\">libffi</a>; it contains some magic (assembler code, dependent of the <a href=\"http://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow\">ABI</a>), which invokes an <em>arbitrary</em> function pointer whose signature is <em>described</em> by some meta-data.</p>\n\n<p>If you are targetting POSIX, you could use some <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/dlopen.html\" rel=\"nofollow\">dlopen</a> &amp; <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/dlsym.html\" rel=\"nofollow\">dlsym</a> tricks (you might also consider plugin support in frameworks like <a href=\"http://qt.io/\" rel=\"nofollow\">Qt5</a> or <a href=\"http://pocoproject.org/\" rel=\"nofollow\">POCO</a> or <a href=\"http://developer.gnome.org/glib/stable/\" rel=\"nofollow\">Glib</a>...). You might generate (at runtime) some appropriate (glue) C code in <code>generated-code-001.c</code>, compile it by forking some compiler command (e.g. <code>gcc -Wall -O -fPIC generated-code-001.c -shared -o generated-code-001.so</code>), then <code>dlopen</code> that <code>./generated-code-001.so</code> shared object (on Linux; on MacOSX the compilation command and the file extension are different), and use <code>dlsym</code> to get the function pointer. I am extensively using such tricks in <a href=\"http://gcc-melt.org/\" rel=\"nofollow\">MELT</a></p>\n"}], "owner": {"reputation": 103, "user_id": 2000795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa41b5c4bd194949f6f3f9e329fb7b77?s=128&d=identicon&r=PG", "display_name": "john7", "link": "https://stackoverflow.com/users/2000795/john7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1432724912, "creation_date": 1432709207, "last_edit_date": 1432710809, "question_id": 30475051, "link": "https://stackoverflow.com/questions/30475051/conditional-substitution-of-union-member-in-c", "title": "Conditional substitution of union member in C", "body": "<p>I have</p>\n\n<pre><code>typedef union \n{\n    void (*fp1p)(void);\n    void (*fp2p)(uint32_t);\n    void (*fp3p)(uint32_t, uint32_t);\n    void (*fp4p)(uint32_t, uint32_t, uint32_t);\n    uint32_t (*fp5p)(uint32_t);\n    uint32_t (*fp6p)(uint32_t, uint32_t);\n    uint32_t (*fp7p)(uint32_t, uint32_t, uint32_t);\n} fp;\nstruct command\n{\n    char *name;  //command name\n    uint32_t minargs;\n    uint32_t maxargs;\n    int minval;\n    int maxval;\n    fp read_func_pointer;\n    fp write_func_pointer;\n};\n\nstruct command commands[] = \n{\n    [0] = { \"reg1001\", 0,0,0,0, .read_func_pointer.fp6p = TDC1000_SPIByteReadReg, .write_func_pointer.fp4p = TDC1000_SPIByteWriteReg },\n    //\n   //\n   };\n</code></pre>\n\n<p>And then </p>\n\n<pre><code>if(condition)\n{\n   uint32_t ret_val = commands[0].read_func_pointer.fp6p(\u2026);\n}\nelse\n{\n   commands[0]. write_func_pointer.fp6p(\u2026);\n}\n</code></pre>\n\n<p>How can I make it generic instead of .fp6p?</p>\n"}]