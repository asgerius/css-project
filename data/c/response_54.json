[{"tags": ["c", "arrays", "pointers", "multidimensional-array"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453341721, "post_id": 34912981, "comment_id": 57563520, "body": "Why not pas a 2D array as a pointer to array? I.e. <code>f(int arr[ROW][COL])</code>? Anything else is just nonsense. (That is converted to <code>int (*)[COL]</code>, but you can use 2D indexing as usual). And make <code>p</code> the correct type, too!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453341938, "post_id": 34912981, "comment_id": 57563566, "body": "Oh, and if that what your prof provided is really meant for a 2D array, change course. And enable compiler warnings and pay heed to them - especially when it comes to pointer and arrays."}], "answers": [{"comments": [{"owner": {"reputation": 2533, "user_id": 2925287, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/821554321/picture?type=large", "display_name": "Pierre Emmanuel Lallemant", "link": "https://stackoverflow.com/users/2925287/pierre-emmanuel-lallemant"}, "edited": false, "score": 0, "creation_date": 1453334729, "post_id": 34913044, "comment_id": 57561567, "body": "you should add that it&#39;s why we can&#39;t convert 2D Arrays into double pointers (int **), it&#39;s a common mistake."}, {"owner": {"reputation": 175, "user_id": 2502019, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b85a3708a1db5e874c93ddc9806439a2?s=128&d=identicon&r=PG", "display_name": "ay lmao", "link": "https://stackoverflow.com/users/2502019/ay-lmao"}, "edited": false, "score": 0, "creation_date": 1453335381, "post_id": 34913044, "comment_id": 57561763, "body": "so if I wanted to assign the value 4 to m[2][2], I would do <code>*(m + (2*COL) + 2) = 4</code> ?"}, {"owner": {"reputation": 487, "user_id": 1233319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KqOmc.jpg?s=128&g=1", "display_name": "myin528", "link": "https://stackoverflow.com/users/1233319/myin528"}, "edited": false, "score": 0, "creation_date": 1453336231, "post_id": 34913044, "comment_id": 57561999, "body": "That&#39;s correct. Though in your case a type cast is needed, which is *(p+...), or alternatively *((int *)mat + ...)."}], "tags": [], "owner": {"reputation": 487, "user_id": 1233319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KqOmc.jpg?s=128&g=1", "display_name": "myin528", "link": "https://stackoverflow.com/users/1233319/myin528"}, "is_accepted": true, "score": 1, "last_activity_date": 1453335124, "last_edit_date": 1453335124, "creation_date": 1453334616, "answer_id": 34913044, "question_id": 34912981, "link": "https://stackoverflow.com/questions/34912981/accessing-2d-array-using-pointers-in-c/34913044#34913044", "title": "accessing 2d array using pointers in C", "body": "<p>That's correct. You can use</p>\n\n<pre><code>*(m + (rowNumber*COL) + colNumber) = val\n</code></pre>\n\n<p>to access it. Basically the elements in the two-dimensional array are stored consecutively in memory, and m points to the beginning of it. Therefore you can do it in this way as an one-dimensional array. That's why we don't use something like **m, as it's not \"a pointer to a pointer\", even it's a two-dimensional array.</p>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 3566346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374a81db897ab2ca6ca5ff11b10829dc?s=128&d=identicon&r=PG&f=1", "display_name": "shadowfire", "link": "https://stackoverflow.com/users/3566346/shadowfire"}, "is_accepted": false, "score": 1, "last_activity_date": 1453335036, "creation_date": 1453335036, "answer_id": 34913104, "question_id": 34912981, "link": "https://stackoverflow.com/questions/34912981/accessing-2d-array-using-pointers-in-c/34913104#34913104", "title": "accessing 2d array using pointers in C", "body": "<p>The way you have it initialized <code>*((p+0) + 0) = 1;</code> would make <code>mat[0][0] = 1;</code></p>\n\n<pre><code>*((p+0) + 1) = 2; would be mat[0][1] = 2;\n*((p+1) + 0) = 3; would be mat[1][0] = 3;\n</code></pre>\n\n<p>etc..</p>\n"}, {"tags": [], "owner": {"reputation": 2183, "user_id": 3813674, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5c0a2f070bc16774a68382c1ba240652?s=128&d=identicon&r=PG&f=1", "display_name": "user3813674", "link": "https://stackoverflow.com/users/3813674/user3813674"}, "is_accepted": false, "score": 2, "last_activity_date": 1453335628, "last_edit_date": 1453335628, "creation_date": 1453335300, "answer_id": 34913154, "question_id": 34912981, "link": "https://stackoverflow.com/questions/34912981/accessing-2d-array-using-pointers-in-c/34913154#34913154", "title": "accessing 2d array using pointers in C", "body": "<p>Suppose you have 2D array declared as <code>arr[rows][cols]</code>. Then:</p>\n\n<ul>\n<li><code>arr</code> points to the first subarray</li>\n<li><code>arr + 1</code> points to the second subarray</li>\n<li><code>*(*(arr+2)+3)</code> is equivalent to arr[2][3]</li>\n</ul>\n\n<p>So if you want to assign a <code>val</code> to the first element of second row for example:</p>\n\n<pre><code>*(*(mat+1) + 0) = val;\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 2502019, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b85a3708a1db5e874c93ddc9806439a2?s=128&d=identicon&r=PG", "display_name": "ay lmao", "link": "https://stackoverflow.com/users/2502019/ay-lmao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1985, "favorite_count": 1, "accepted_answer_id": 34913044, "answer_count": 3, "score": 0, "last_activity_date": 1453335956, "creation_date": 1453334239, "last_edit_date": 1453335956, "question_id": 34912981, "link": "https://stackoverflow.com/questions/34912981/accessing-2d-array-using-pointers-in-c", "title": "accessing 2d array using pointers in C", "body": "<p>In my main I have </p>\n\n<pre><code>  int mat[ROW][COL];\n  int *p = &amp;mat[0][0];\n  minput(p, ROW, COL);\n</code></pre>\n\n<p>I'm stuck on how to make minput, because I'm supposed to initialize the 2d array with set numbers, but I just don't understand how I'm supposed to assign the numbers,</p>\n\n<p>I get that m[0][0] in pointer is <code>*(*(m+0)+0)</code>, but it doesn't let me do something like <code>*(*(m+0)+0)=0;</code>, </p>\n\n<p>because it gives the <code>invalid type argument of unary \u2018*\u2019 (have \u2018int\u2019)</code> error.</p>\n\n<p>So basically I just want to know how to assign a number to a 2d array using pointers, if we didn't have to use pointers this would be so easy with m[2][2]=5 and whatever but I have no idea how to do this with pointers.</p>\n\n<p>My prof provided a one line example of the minput function and it was just <code>*(m+0) = 8;</code>, which doesn't make sense to me, isn't that what we use for a 1d array? if that's the way to do it then does that mean I'm supposed to do something like</p>\n\n<pre><code>*(m+0) = 8;\n*(m+1) = 1;\n*(m+2) = 6;\n*(m+3) = 3;\n*(m+4) = 5;\n*(m+5) = 7;\n*(m+6) = 4;\n*(m+7) = 9;\n*(m+8) = 2;\n</code></pre>\n\n<p>for a 3x3 array? it doesn't seem right to me, It would be great if someone could help me out with this, pointers are very confusing to me.</p>\n\n<p>EDIT: so I see that apparently the correct way to do it is the way I listed above with the \n<code>*(*(m+0)+0) = val</code></p>\n\n<p>but when I do this in my code, I get the this error:</p>\n\n<pre><code>error: invalid type argument of unary \u2018*\u2019 (have \u2018int\u2019)\n  *(*(m+0)+2)=6;\n  ^\n</code></pre>\n\n<p>why is this the case? is the assignment wrong? </p>\n"}, {"tags": ["c", "android-ndk", "java-native-interface"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1453336130, "post_id": 34912948, "comment_id": 57561975, "body": "Have you looked to see the encoding of str?  It&#39;s most likely encoded in a non-ASCII friendly way, such as UTF-8."}, {"owner": {"reputation": 63, "user_id": 5716859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818e678b6e0e2ded2676ddbc6bb64bcd?s=128&d=identicon&r=PG&f=1", "display_name": "user5716859", "link": "https://stackoverflow.com/users/5716859/user5716859"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1453371717, "post_id": 34912948, "comment_id": 57575875, "body": "@bruceg No, sorry, I haven&#39;t. How do I do that?"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1453380297, "post_id": 34912948, "comment_id": 57581695, "body": "<i>&quot;How do I do that?&quot;</i> Do a hexdump of the contents of <code>str</code> (i.e. for a byte with the value 0, print &quot;00&quot;; for the value 255, print &quot;FF&quot;, etc)."}, {"owner": {"reputation": 63, "user_id": 5716859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818e678b6e0e2ded2676ddbc6bb64bcd?s=128&d=identicon&r=PG&f=1", "display_name": "user5716859", "link": "https://stackoverflow.com/users/5716859/user5716859"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1453390939, "post_id": 34912948, "comment_id": 57589367, "body": "@Michael Thank you, but before I can go ahead and encode the string, I must first assemble it. As it is now, I can&#39;t even <i>create</i> the string to be encoded since sprintf() refuses these characters..?"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 5716859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818e678b6e0e2ded2676ddbc6bb64bcd?s=128&d=identicon&r=PG&f=1", "display_name": "user5716859", "link": "https://stackoverflow.com/users/5716859/user5716859"}, "edited": false, "score": 0, "creation_date": 1453415774, "post_id": 34932206, "comment_id": 57604045, "body": "I looked at it with HxD and if I&#39;m reading it right, &quot;&#246;&quot; is just one byte and it&#39;s F6 in hex. I also don&#39;t have any <code>-fexec-charset=</code> in my makefiles. I am building with ndk-build on Windows. My build target is android-22 (5.1.1) and my phone is 5.1.1. I can&#39;t get sprintf() to accept these characters..."}, {"owner": {"reputation": 48475, "user_id": 294248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b5dbf3643399236154fbf7f94c20367?s=128&d=identicon&r=PG&f=1", "display_name": "fadden", "link": "https://stackoverflow.com/users/294248/fadden"}, "reply_to_user": {"reputation": 63, "user_id": 5716859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818e678b6e0e2ded2676ddbc6bb64bcd?s=128&d=identicon&r=PG&f=1", "display_name": "user5716859", "link": "https://stackoverflow.com/users/5716859/user5716859"}, "edited": false, "score": 0, "creation_date": 1453418044, "post_id": 34932206, "comment_id": 57604945, "body": "That explains the rejection. You need to get a UTF-8 encoded representation of the character into the string. (As an experiment, try adding it explicitly, e.g. <code>&quot;Hell\\xc3\\xb6 again&quot;</code>.) Get a hex dump of your source file to see if your editor is writing UTF-8 or CP-1252 -- gcc may not understand what you&#39;re intending. If you can&#39;t configure your editor to write UTF-8, you may need to specify <code>-finput-charset=</code> to gcc to match whatever it&#39;s actually using. FWIW, note in the bug report I linked some examples of people who found it easier to drop in a replacement <code>sprintf()</code>."}], "tags": [], "owner": {"reputation": 48475, "user_id": 294248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b5dbf3643399236154fbf7f94c20367?s=128&d=identicon&r=PG&f=1", "display_name": "fadden", "link": "https://stackoverflow.com/users/294248/fadden"}, "is_accepted": false, "score": 2, "last_activity_date": 1453403006, "creation_date": 1453403006, "answer_id": 34932206, "question_id": 34912948, "link": "https://stackoverflow.com/questions/34912948/android-ndk-strings-containing-non-ascii-characters-get-cut-off/34932206#34932206", "title": "(Android NDK) Strings containing non-ASCII characters get cut off", "body": "<p>A \"preview\" version of Android 5.0 had some issues that were fixed in the final release.  See <a href=\"https://code.google.com/p/android/issues/detail?id=78669\" rel=\"nofollow\">this bug report</a> for more information.</p>\n\n<p>If you get a hex dump of the .o file (with e.g. <code>xxd</code> on Linux) and search for a fragment of the string, you can see how it's encoded in the executable. If it's valid UTF-8 -- I get <code>c3 b6</code> for '\u00f6' when I compile with desktop gcc -- then it should work.  If it's using some other encoding, the Android libc may reject it as invalid.</p>\n\n<p>If the string in the binary doesn't appear to be UTF-8, check your makefiles for things like <code>-fexec-charset=</code>.</p>\n"}], "owner": {"reputation": 63, "user_id": 5716859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818e678b6e0e2ded2676ddbc6bb64bcd?s=128&d=identicon&r=PG&f=1", "display_name": "user5716859", "link": "https://stackoverflow.com/users/5716859/user5716859"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 617, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1453403006, "creation_date": 1453334044, "question_id": 34912948, "link": "https://stackoverflow.com/questions/34912948/android-ndk-strings-containing-non-ascii-characters-get-cut-off", "title": "(Android NDK) Strings containing non-ASCII characters get cut off", "body": "<p>I'm trying to port a program written in C to Android using the NDK and JNI, and I'm stuck with a ridiculous problem which is driving me crazy.</p>\n\n<p>To make it short, if I do this...</p>\n\n<pre><code>char str[1024];\nsprintf(str, \"Hell\u00f6, this is s\u00f6me str\u00e4nge letters.\");\n</code></pre>\n\n<p>...<em>strlen(str)</em> returns 35, as expected. Right?</p>\n\n<p>But if I include a specifier, and do this...</p>\n\n<pre><code>char str[1024];\nsprintf(str, \"Hell\u00f6 again. Here's a number: %d\", 1);\n</code></pre>\n\n<p>...<em>strlen(str)</em> returns 4.</p>\n\n<p>Do you see what's happening? It appears the NDK can't (or won't?) accept non-ASCII characters in strings, if I try to format them.</p>\n\n<p>Any time I include an ASCII character >127 in the format string, it just gets cut off. Like it was NULL-terminated.</p>\n\n<p>Is this a bug? Is this expected behaviour?</p>\n\n<p>Ultimately, my question is: <strong>What can I do to solve this?</strong></p>\n\n<p>Many thanks in advance.</p>\n"}, {"tags": ["c", "gtk3"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1453339065, "post_id": 34912757, "comment_id": 57562830, "body": "I think you need to post some code as the answer could be in your event handling [particularly for expose events]. If you&#39;re doing heavy computation, you may be starving the event handler. You might also consider splitting computation off into a separate thread so the main thread is free to handle all GTK related activity."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4845927"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1453339931, "post_id": 34912757, "comment_id": 57563069, "body": "Hello Craig, the processing is way less than the available power. The wait is on the SSD. The code has plenty of time to redraw. When I added the funny extra code for GTK, the redraw screamed along even with a redraw on every row."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4845927"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1453339999, "post_id": 34912757, "comment_id": 57563091, "body": "What I cannot find is an option to close the question."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1453340403, "post_id": 34912757, "comment_id": 57563210, "body": "The <code>g_main_context_*</code> you just posted will work (i.e. events as I had mentioned). The thread split I suggested wasn&#39;t for speed reasons, but as a way to get smooth event processing without having to interject the <code>g_main_context_*</code> calls in various/numerous places. No need to close the question, you&#39;re fine. Just add a one liner at the top, indicating you found the solution: (e.g. &quot;found a solution, see below&quot;). That&#39;s easier for others to see. I would reformat the solution in an indented code block, however. You&#39;re also free to post your solution as a real answer just like somebody else"}, {"owner": {"reputation": 1538, "user_id": 1810625, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Ss8dC.jpg?s=128&g=1", "display_name": "Kyrylo Polezhaiev", "link": "https://stackoverflow.com/users/1810625/kyrylo-polezhaiev"}, "edited": false, "score": 0, "creation_date": 1453341501, "post_id": 34912757, "comment_id": 57563469, "body": "Can you please provide minimum code to reproduce?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 1538, "user_id": 1810625, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Ss8dC.jpg?s=128&g=1", "display_name": "Kyrylo Polezhaiev", "link": "https://stackoverflow.com/users/1810625/kyrylo-polezhaiev"}, "edited": false, "score": 0, "creation_date": 1453341936, "post_id": 34912757, "comment_id": 57563565, "body": "@KyryloPolezhaiev OP has already posted the solution at the bottom of the [edited] question"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4845927"}, "reply_to_user": {"reputation": 1538, "user_id": 1810625, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Ss8dC.jpg?s=128&g=1", "display_name": "Kyrylo Polezhaiev", "link": "https://stackoverflow.com/users/1810625/kyrylo-polezhaiev"}, "edited": false, "score": 0, "creation_date": 1453430445, "post_id": 34912757, "comment_id": 57608509, "body": "@Kyrylo, I do not know what the minimum useful code could be. You can only see the problem when the code runs for a while. I get the problem because I read thousands of rows and and display some throughout the process. The example would have to have loops displaying data and loops chewing up some time between each display."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4845927"}, "edited": false, "score": 0, "creation_date": 1453430821, "post_id": 34912757, "comment_id": 57608609, "body": "A hint for anyone looking at gtk_grid: It is slow for anything over a few hundred lines."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4845927"}, "edited": false, "score": 0, "creation_date": 1534319509, "post_id": 34912757, "comment_id": 90662038, "body": "The problem and solotion are the same in GTK 3.22."}], "owner": {"user_type": "does_not_exist", "display_name": "user4845927"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1848, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1534319973, "creation_date": 1453333025, "last_edit_date": 1453349800, "question_id": 34912757, "link": "https://stackoverflow.com/questions/34912757/how-do-you-force-a-screen-refresh-in-gtk-3-8", "title": "How do you force a screen refresh in GTK 3.8?", "body": "<p>Found a solution. See below.</p>\n\n<p>I am using GTK 3.8 <strong>gtk_grid</strong> in a scrolled window. The C code works through a lot of data and displays some in the grid. GTK does not draw the grid until the program finishes processing all data. How do you force GTK 3 to refresh the screen when you add data?</p>\n\n<p>I tried <strong>gtk_widget_queue_draw</strong> but nothing happens.\nI also tested <strong>gtk_widget_show_now</strong> but nothing happened.</p>\n\n<p>The process might run for a few seconds or many minutes. The user can select the range of data to display and the refresh. The refresh might be every 5 seconds or every 10 rows. I would be happy if either worked.</p>\n\n<p>The only relevant question I can find is on GTK 2 and recommends gtk_widget_queue_draw which does not work. I read all the GTK documentation and that recommends the same function. Something is missing in the documentation, examples, and answers.</p>\n\n<p>From what I can see, I would have to process 100 rows then stop and display a button to request the next 100. This is not viable. The user needs the data scrolling through to the end.</p>\n\n<p>GTK_grid appears to have changed a few times in version 3. I am not locked into GTK_grid if there is a more efficient or effective way to display rows and columns. There is no option to revert to an earlier GTK.</p>\n\n<hr>\n\n<p>I found something that works in GTK 3.8. Add a line after gtk_widget_queue_draw:</p>\n\n<pre><code>gtk_widget_queue_draw(results);  \nwhile (g_main_context_pending(NULL)) {\n    g_main_context_iteration(NULL,FALSE);\n}\n</code></pre>\n\n<p>Read <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html\" rel=\"nofollow\">The Main Event Loop</a> for more details.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4719, "user_id": 2958070, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FtkjC.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/2958070/ben"}, "edited": false, "score": 0, "creation_date": 1453330550, "post_id": 34912180, "comment_id": 57560061, "body": "Can you not simply add the condition to your while loop? <code>while (value != EOF &amp;&amp; value &gt;= -100000 &amp;&amp; value &lt;= 100000)</code>"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1453330649, "post_id": 34912180, "comment_id": 57560102, "body": "scanf() has a return value. Use it."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 4719, "user_id": 2958070, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FtkjC.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/2958070/ben"}, "edited": false, "score": 2, "creation_date": 1453330660, "post_id": 34912180, "comment_id": 57560107, "body": "@Ben Except that <code>value</code> will never be equal to EOF (unless the user just happens to enter something equal to the value of the constant on OP&#39;s platform). The return value of <code>scanf</code> should be checked."}, {"owner": {"reputation": 51, "user_id": 5818479, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/04342600ba324fb8e11bfaded53d8e85?s=128&d=identicon&r=PG", "display_name": "Immortal", "link": "https://stackoverflow.com/users/5818479/immortal"}, "edited": false, "score": 0, "creation_date": 1453330704, "post_id": 34912180, "comment_id": 57560128, "body": "That&#39;s what I tried first. For some reason nothing happens when I click CTRL + D (I&#39;m on Linux)."}, {"owner": {"reputation": 51, "user_id": 5818479, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/04342600ba324fb8e11bfaded53d8e85?s=128&d=identicon&r=PG", "display_name": "Immortal", "link": "https://stackoverflow.com/users/5818479/immortal"}, "edited": false, "score": 0, "creation_date": 1453330733, "post_id": 34912180, "comment_id": 57560139, "body": "Okay thanks I&#39;ll try that wildplasser."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5818479, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/04342600ba324fb8e11bfaded53d8e85?s=128&d=identicon&r=PG", "display_name": "Immortal", "link": "https://stackoverflow.com/users/5818479/immortal"}, "edited": false, "score": 0, "creation_date": 1453331469, "post_id": 34912355, "comment_id": 57560425, "body": "The system guarantees that only well-formed input will be given to my program, so I won&#39;t need to worry about those instances. Thank you very much!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 51, "user_id": 5818479, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/04342600ba324fb8e11bfaded53d8e85?s=128&d=identicon&r=PG", "display_name": "Immortal", "link": "https://stackoverflow.com/users/5818479/immortal"}, "edited": false, "score": 0, "creation_date": 1453331980, "post_id": 34912355, "comment_id": 57560619, "body": "@Rubiks &quot;system guarantees that only well-formed input&quot; is information that belongs in your post - but then that changes the question a bit."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 2, "last_activity_date": 1453331103, "creation_date": 1453331103, "answer_id": 34912355, "question_id": 34912180, "link": "https://stackoverflow.com/questions/34912180/c-how-would-i-break-out-of-the-loop-with-eof/34912355#34912355", "title": "C How would I break out of the loop with EOF?", "body": "<p>How do you want to handle bad (non-numeric) input?</p>\n\n<p>The simplest approach is probably the following:</p>\n\n<pre><code>while ( scanf( \"%f\", &amp;value ) == 1 &amp;&amp; value &gt;= -100000 &amp;&amp; value &lt;= 100000 )\n{\n  // do stuff with value\n}\n</code></pre>\n\n<p>This will loop until <code>value</code> is outside the specified range <em>or</em> <code>scanf</code> fails on input, either because of a matching failure (the input isn't numeric) or because EOF has been signaled, or because of some other input error.  </p>\n\n<p>Note that the <code>&amp;&amp;</code> operator forces left-to-right evaluation; the <code>scanf</code> call will be executed and <code>value</code> updated before either test.  </p>\n\n<p>Also note that if the user types in a number with a non-numeric trailing character like <code>12.3r</code>, <code>scanf</code> will convert and assign <code>12.3</code> to <code>value</code> and leave <code>r</code> stuck in the input stream, which will cause the <em>next</em> call to <code>scanf</code> to fail, at which point the loop will exit.  </p>\n"}, {"tags": [], "owner": {"reputation": 1912, "user_id": 2599567, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zLvLW.jpg?s=128&g=1", "display_name": "gollum", "link": "https://stackoverflow.com/users/2599567/gollum"}, "is_accepted": false, "score": 1, "last_activity_date": 1453333174, "last_edit_date": 1453333174, "creation_date": 1453331665, "answer_id": 34912470, "question_id": 34912180, "link": "https://stackoverflow.com/questions/34912180/c-how-would-i-break-out-of-the-loop-with-eof/34912470#34912470", "title": "C How would I break out of the loop with EOF?", "body": "<p>As others have pointed out, use the scanf result.\nAnd you don't need to call scanf from 2 locations.\nI'd suggest something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    float sum, smallest, largest, value, average;\n    int count;\n\n    for (count = sum = 0; scanf(\"%f\", &amp;value) == 1; count++) {\n        if (value &lt;= -100000 || value &gt;= 100000)\n            break;\n\n        sum += value;\n\n        if (count == 0)\n            smallest = largest = value;\n        else if (value &gt; largest)\n            largest = value;\n        else if (value &lt; smallest)\n            smallest = value;\n    }\n\n    if (count) {\n        average = sum / count;\n        printf(\"%.2f %.2f %.2f\\n\", smallest, largest, average);\n    } else {\n        printf(\"error, no data processed\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5818479, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/04342600ba324fb8e11bfaded53d8e85?s=128&d=identicon&r=PG", "display_name": "Immortal", "link": "https://stackoverflow.com/users/5818479/immortal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "accepted_answer_id": 34912355, "answer_count": 2, "score": 1, "last_activity_date": 1453333174, "creation_date": 1453330308, "question_id": 34912180, "link": "https://stackoverflow.com/questions/34912180/c-how-would-i-break-out-of-the-loop-with-eof", "title": "C How would I break out of the loop with EOF?", "body": "<p>My program essentially asks the user to enter an undefined amount of floats and I wish for the program to output the smallest value, largest value, and the mean of the values upon the user entering EOF. </p>\n\n<p>Right now the loop exits and outputs the smallest value, largest value, and mean when the user enters a number &lt;= -100,000 or => 100,000, of which is the restrictions the program imposes on the user's input. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n\n\n    float sum, smallest, largest;\n    float value, average,check;\n    int count;\n\n    sum = 0.000000;\n    count = 0;\n    check = scanf(\" %f\",&amp;value);\n    smallest = value;\n    largest = value;\n\n    while (value &gt;= -100000 &amp;&amp; value &lt;= 100000)\n    {\n        sum += value;\n        count++;\n        if (value &gt; largest)\n            largest = value;\n\n        else if (value &lt; smallest)\n            smallest = value;\n\n        scanf(\" %f\",&amp;value);\n    }\n        average = sum / count;\n        printf(\"%.2f \",smallest);\n        printf(\"%.2f \",largest);\n        printf(\"%.2f\\n\",average);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "visual-studio-2015", "c99"], "comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1453331303, "post_id": 34912145, "comment_id": 57560357, "body": "I think, they meant <b>Unlike _snprintf</b>, which indeed doesn&#39;t null-terminate. VS doesn&#39;t know snprintf at all (except as a macro for sprintf_s)"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1453331326, "post_id": 34912145, "comment_id": 57560369, "body": "I suspect it&#39;s a documentation bug rather than anything unusual/wrong with the implementation of <code>snprintf()</code> in visual studio."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1453331388, "post_id": 34912145, "comment_id": 57560390, "body": "Microsoft&#39;s 1980s implementation of <code>snprintf</code> was different to the C99 Standard one; that&#39;s the root of all these issues.  IDK when (if ever) VS runtime would have been updated to use the C99 version."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453331555, "post_id": 34912145, "comment_id": 57560458, "body": "MS have never made any effort to comply with C99 - what makes you think &quot;Visual Studio is including a C99 compliant version of snprintf&quot; ?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453415016, "post_id": 34912145, "comment_id": 57603705, "body": "suggest, for verification of what actually happens....  write a small program that passes an &#39;overlenght&#39; buffer to snprintf() then use the debugger to see what is actually placed in the resulting buffer."}, {"owner": {"reputation": 6288, "user_id": 1455631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9b8e88a8dbed8a574ed79d075c3f924?s=128&d=identicon&r=PG", "display_name": "Medinoc", "link": "https://stackoverflow.com/users/1455631/medinoc"}, "edited": false, "score": 0, "creation_date": 1491637074, "post_id": 34912145, "comment_id": 73650205, "body": "Wow, your predecessor&#39;s macro is anything but &quot;equivalent&quot;. Not only would it have been necessary to use <code>_snprintf_s()</code> instead of <code>sprintf_s()</code> to avoid an (artificial) crash, but the return value would have been wrong too (until VS2015, only <code>_scprintf()</code> unconditionally returned the &quot;full&quot; length)."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1453331535, "post_id": 34912278, "comment_id": 57560450, "body": "The MSDN documentation would be describing the behaviour of MS tools, which may differ from the ISO C standard. AFAIK , MS have never made any claim to support C99 (let alone C11)"}, {"owner": {"reputation": 2592, "user_id": 121694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cAz0P.jpg?s=128&g=1", "display_name": "RjOllos", "link": "https://stackoverflow.com/users/121694/rjollos"}, "edited": false, "score": 0, "creation_date": 1453331685, "post_id": 34912278, "comment_id": 57560500, "body": "See <a href=\"http://blogs.msdn.com/b/vcblog/archive/2014/06/18/crt-features-fixes-and-breaking-changes-in-visual-studio-14-ctp1.aspx\" rel=\"nofollow noreferrer\">this blog</a>: snprintf and vsnprintf Are Now Implemented: The C99 snprintf and vsnprintf functions have been implemented."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453331726, "post_id": 34912278, "comment_id": 57560518, "body": "@M.M <a href=\"http://blogs.msdn.com/b/vcblog/archive/2014/06/18/crt-features-fixes-and-breaking-changes-in-visual-studio-14-ctp1.aspx\" rel=\"nofollow noreferrer\">The latest visual studio provides nearly complete support for C99.</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1453334410, "post_id": 34912278, "comment_id": 57561467, "body": "I ran the example with MSVC 9.0 and 15.0. The earlier one does not have <code>snprintf</code> only <code>_snprintf</code>, using the latter both compilers produced code that wrote 5 characters to the string and did not terminate it. However MSVC 15.0 does have <code>snprintf</code> which behaves as OP says. MSVC documentation for <a href=\"https://msdn.microsoft.com/en-us/library/2ts7cx93.aspx\" rel=\"nofollow noreferrer\">_snprintf</a> says <i>&quot;this function does not guarantee NULL termination&quot;</i>, and that set of documentation does not mention <code>snprintf</code>. So yes, there is a documentation fault, and the two versions <code>snprintf</code> and <code>_snprintf</code> do not behave the same."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1453330737, "creation_date": 1453330737, "answer_id": 34912278, "question_id": 34912145, "link": "https://stackoverflow.com/questions/34912145/is-the-output-of-snprintf-guaranteed-to-be-null-terminated-with-visual-studio-20/34912278#34912278", "title": "Is the output of snprintf guaranteed to be null-terminated with Visual Studio 2015?", "body": "<p><a href=\"http://man7.org/linux/man-pages/man3/printf.3.html\" rel=\"nofollow\"><code>snprintf()</code></a> would always nul terminate the buffer as long as the second argument to it is greater than zero. So yes, the MSDN documentation is wrong.</p>\n\n<p><a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.21.6.5\" rel=\"nofollow\"><em>From C11 standard, snprintf():</em></a></p>\n\n<blockquote>\n  <p>The snprintf function is equivalent to fprintf, except that the output\n  is written into an array (speci\ufb01ed by argument s) rather than to a\n  stream. <strong>If n is zero, nothing is written</strong>, and s may  be  a  null \n  pointer. Otherwise,  output  characters  beyond  the n-1st  are\n  discarded rather than being written to the array, and <strong>a null character\n  is written at the end of the characters actually written into the\n  array.</strong> If copying takes place between objects that overlap, the\n  behavior is undefined.</p>\n</blockquote>\n\n<p>(emphasis mine).</p>\n"}], "owner": {"reputation": 2592, "user_id": 121694, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cAz0P.jpg?s=128&g=1", "display_name": "RjOllos", "link": "https://stackoverflow.com/users/121694/rjollos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1141, "favorite_count": 0, "accepted_answer_id": 34912278, "answer_count": 1, "score": 3, "last_activity_date": 1453330737, "creation_date": 1453330132, "last_edit_date": 1495542336, "question_id": 34912145, "link": "https://stackoverflow.com/questions/34912145/is-the-output-of-snprintf-guaranteed-to-be-null-terminated-with-visual-studio-20", "title": "Is the output of snprintf guaranteed to be null-terminated with Visual Studio 2015?", "body": "<p>I'm working with a C codebase in which my predecessor used:</p>\n\n<pre><code>#ifdef _MSC_VER\n  // Map to equivalent function\n  #define snprintf sprintf_s\n#endif\n</code></pre>\n\n<p>The codebase needs to compile on Linux (gcc/clang), OSX (gcc/clang) and Windows (VS). I've attempted to compile the code in Visual Studio 2015 for the first time. Previously Visual Studio 2010 had been used. I encountered the error described <a href=\"https://stackoverflow.com/questions/27754492/vs-2015-compiling-cocos2d-x-3-3-error-fatal-error-c1189-error-macro-definiti\">here</a> and was able to compile using a clue from the accepted answer:</p>\n\n<pre><code>#ifdef _MSC_VER\n  #if _MSC_VER&lt;1900\n    #define snprintf sprintf_s\n  #endif\n#endif\n</code></pre>\n\n<p>The project compiles now with Visual Studio 2015 and clang on OSX. However, I'm concerned about a statement in the <a href=\"https://msdn.microsoft.com/en-us/library/ce3zzk1k.aspx\" rel=\"nofollow noreferrer\">sprintf_s</a> documentation:</p>\n\n<p><strong>Unlike snprintf, sprintf_s guarantees that the buffer will be null-terminated (unless the buffer size is zero).</strong></p>\n\n<p>If Visual Studio is including a C99 compliant version of <code>snprintf</code>, shouldn't the buffer be guaranteed to be null-terminated?</p>\n\n<p>I wrote a small program to evaluate the behavior.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char** argv) {\n    char buf[5];\n    snprintf(buf, sizeof(buf), \"abcdef\");\n    printf(\"buffer: %s\\n\", buf);\n    printf(\"size of buffer: %lu\\n\", strlen(buf));\n    printf(\"last character a null terminator?: %s\\n\",\n        (strcmp(&amp;buf[4], \"\\0\") == 0) ? \"yes\" : \"no\");\n    return 0;\n}\n</code></pre>\n\n<p>I built and ran the program on OSX, and Windows with Visual Studio 2015.</p>\n\n<p>On OSX, the output is:</p>\n\n<pre><code>~$c99 main.c\n~$./a.out \nbuffer: abcd\nsize of buffer: 4\nlast character a null terminator?: yes\n</code></pre>\n\n<p>On Windows 7 with Visual Studio 2015 the output is</p>\n\n<pre><code>&gt; printf_evaluation.exe\nbuffer: abcd\nsize of buffer: 4\nlast character a null terminator?: yes\n</code></pre>\n\n<p>Doesn't that demonstrate the the output is in fact null-terminated, and suggest that the MSDN documentation is incorrect? Is my example too trivial? Are there cases when the output of <code>snprintf</code> might not be NULL terminated with Visual Studio 2015?</p>\n"}, {"tags": ["c", "pipe", "fork", "io-redirection"], "answers": [{"comments": [{"owner": {"reputation": 477, "user_id": 4254033, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/bf1ada35cd0755b213121663b1140f91?s=128&d=identicon&r=PG&f=1", "display_name": "skulpt", "link": "https://stackoverflow.com/users/4254033/skulpt"}, "edited": false, "score": 0, "creation_date": 1453330582, "post_id": 34912118, "comment_id": 57560074, "body": "Thanks, that makes sense. I did try moving closing c2pipe to the second iteration of the loop in the parent, and it didn&#39;t help. In fact, it seems that the first child doesn&#39;t receive any data, at all, and I can&#39;t really figure out why.  I guess I&#39;ll try adding some error handling to this, maybe it&#39;ll clear things up."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 477, "user_id": 4254033, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/bf1ada35cd0755b213121663b1140f91?s=128&d=identicon&r=PG&f=1", "display_name": "skulpt", "link": "https://stackoverflow.com/users/4254033/skulpt"}, "edited": false, "score": 0, "creation_date": 1453330803, "post_id": 34912118, "comment_id": 57560173, "body": "@skulpt There&#39;s another issue I spotted. I&#39;ve already updated the answer."}, {"owner": {"reputation": 477, "user_id": 4254033, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/bf1ada35cd0755b213121663b1140f91?s=128&d=identicon&r=PG&f=1", "display_name": "skulpt", "link": "https://stackoverflow.com/users/4254033/skulpt"}, "edited": false, "score": 0, "creation_date": 1453331026, "post_id": 34912118, "comment_id": 57560255, "body": "Thanks, that seemed to be it. Now I&#39;m actually getting an output. I didn&#39;t know the parent sends a signal to the children to terminate - I know orphan processes exist, and I just assumed they&#39;ll become orphan&#39;d in this case, without terminating.  Thanks a lot for clearing this up."}], "tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": true, "score": 1, "last_activity_date": 1453330643, "last_edit_date": 1453330643, "creation_date": 1453330046, "answer_id": 34912118, "question_id": 34911850, "link": "https://stackoverflow.com/questions/34911850/c-redirecting-stdin-stdout-to-pipes/34912118#34912118", "title": "C: redirecting stdin, stdout to pipes", "body": "<p>In the parent process, you are closing both ends of c2pipe before you have forked the second child.</p>\n\n<p>You'd probably have figured this out already if you had put any error handling in on any of the read/write calls. In fact, if you checked for an error on the dup2 calls and then looked at errno, you probably would have found that it was <code>EBADF</code> (bad file descriptor). </p>\n\n<p>Another issue is that your parent process exits before it knows that both child processes have finished. This means that the child processes will receive a signal and will themselves be terminated. The parent needs to call one of the variants of <code>wait()</code> to make sure both children have gone.</p>\n"}], "owner": {"reputation": 477, "user_id": 4254033, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/bf1ada35cd0755b213121663b1140f91?s=128&d=identicon&r=PG&f=1", "display_name": "skulpt", "link": "https://stackoverflow.com/users/4254033/skulpt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1400, "favorite_count": 0, "accepted_answer_id": 34912118, "answer_count": 1, "score": 0, "last_activity_date": 1453330643, "creation_date": 1453328864, "question_id": 34911850, "link": "https://stackoverflow.com/questions/34911850/c-redirecting-stdin-stdout-to-pipes", "title": "C: redirecting stdin, stdout to pipes", "body": "<p>I'm in the process of properly understanding pipes and FDs and I'm trying to program the following thing:\nThe program basically compresses stuff like gzip does with the options -cf.\nThe basic idea is:</p>\n\n<p>I create two pipes in the parent process, then I fork it twice so that I'll have two children. In the first child, I redirect the first pipe's read end to stdin, and the second pipe's write end to stdout. Then I exec gzip with the -cf options so that it'll write to stdout (now the writing end of pipe2)</p>\n\n<p>In the second child, I read from pipe2 and either output it directly or save it to a file.\nThe problem is, however, that no data arrives at the second child and I'm not really sure why. Here's the code:</p>\n\n<pre><code>int main(int argc, char **argv) {\n    char *file;\n    int out = 0;\n    if(argc == 2) {\n        file = argv[1];\n        out = 1;\n    } else if (argc &gt; 2) {\n        exit(EXIT_FAILURE);         \n    }\n\n    int c1pipe[2];\n    int c2pipe[2];\n    pipe(c1pipe);\n    pipe(c2pipe);\n\n    int f;    \n    for(int i = 0; i &lt; 2; i++) {\n        switch(f = fork()) {\n            case 0: //child\n                if(i == 0) { //first loop iteration, child 1\n                    close(c1pipe[1]); \n                    dup2(c1pipe[0], fileno(stdin));\n                    close(c1pipe[0]); \n                    close(c2pipe[0]); \n                    dup2(c2pipe[1], fileno(stdout));\n                    close(c2pipe[1]); \n                    execlp(\"gzip\", \"gzip\", \"-cf\", (char *) NULL);\n                } else if (i == 1) { //second loop iteration, child2\n                    close(c1pipe[0]);\n                    close(c1pipe[1]);\n                    close(c2pipe[1]);\n                    FILE *read = fdopen(c2pipe[0], \"r\");    \n                    char buffer[1024];\n\n                    if(out == 0) { //output to stdout\n                        while(fgets(buffer, 1024, read) != NULL) {\n                            fprintf(stdout, \"%s\", buffer);\n                            fflush(stdout);\n                        }\n                    } else { //write to specified file\n                        FILE *writeto = fopen(file, \"w\");\n                        while(fread(buffer, sizeof(char), strlen(buffer)+1, read) &gt; 0) {\n                            fwrite(buffer, sizeof(char), strlen(buffer)+1, writeto);\n                            fflush(writeto);\n                        }\n                        fclose(writeto);\n                    }\n\n                    close(c2pipe[0]);\n                    fclose(read);\n                }           \n            break;\n            case -1: //err\n                //not implemented\n            break;\n            default: //parent\n                if(i == 0) {\n                    close(c2pipe[0]);\n                    close(c2pipe[1]);\n                    close(c1pipe[0]);\n                    FILE *writer;\n                    writer = fdopen(c1pipe[1], \"w\");\n                    char buffer[1024];\n                    while(fgets(buffer, sizeof buffer, stdin) != NULL) {\n                        fwrite(buffer, sizeof (char), strlen(buffer)+1, writer);\n                    }\n                    close(c1pipe[1]);\n                    fclose(writer);\n                }\n            break;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Please excuse the missing error handling as I wanted to create a quick-and-dirty version.</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1453327540, "post_id": 34911532, "comment_id": 57558675, "body": "How do you declare <code>student</code> in <code>main()</code>. Please post the code and if it&#39;s not working why isn&#39;t it. And if it&#39;s working then why are you asking?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 5, "creation_date": 1453327587, "post_id": 34911532, "comment_id": 57558705, "body": "You&#39;re too sloppy with your terminology. &quot;In the following struct&quot; is confused. The struct definition defines a <i>type</i>, not a value."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 2, "creation_date": 1453328415, "post_id": 34911532, "comment_id": 57559111, "body": "Setting pointers to null is easy: <code>Tom.name = NULL;</code>.  Is that all you&#39;re asking about?"}, {"owner": {"reputation": 401, "user_id": 5565459, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d3d149f7a2f658f33c68a6d6191b30d8?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/5565459/brandon"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1453329725, "post_id": 34911532, "comment_id": 57559704, "body": "@SteveSummit yes that was I was asking about. I was under the impression that you only set to NULL that way when it is just a plain char variable and not a pointer as it is in this case."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1453330366, "post_id": 34911532, "comment_id": 57559969, "body": "@Brandon: pretty much the other way around; <code>NULL</code> is usually only meaningful in a pointer context.  It represents a well-defined &quot;nowhere&quot; (a known <i>invalid</i> pointer value that&#39;s guaranteed to be unequal to any object or function pointer value).  The <code>NULL</code> macro expands to a <i>null pointer constant</i>, which is a zero-valued integral expression (either a naked <code>0</code>, or an expression like <code>(void *) 0</code>, or something similar)."}], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 5565459, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d3d149f7a2f658f33c68a6d6191b30d8?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/5565459/brandon"}, "edited": false, "score": 0, "creation_date": 1453328661, "post_id": 34911738, "comment_id": 57559238, "body": "Would Tom.name = NULL work even though it is a pointer? I was under the impression that Tom.name would only work if it was just a char variable and not a pointer."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 401, "user_id": 5565459, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d3d149f7a2f658f33c68a6d6191b30d8?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/5565459/brandon"}, "edited": false, "score": 0, "creation_date": 1453328793, "post_id": 34911738, "comment_id": 57559288, "body": "@Brandon In general you have to allocate memory dynamically which will be pointed to by Tom.name where you are going to write the actual name of the Tom. For example Tom.name = malloc( 4 * sizeof( char ) ); strcpy( Tom.name, &quot;Tom&quot; );"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 401, "user_id": 5565459, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d3d149f7a2f658f33c68a6d6191b30d8?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/5565459/brandon"}, "edited": false, "score": 0, "creation_date": 1453329095, "post_id": 34911738, "comment_id": 57559421, "body": "@Brandon Why wouldn&#39;t it work? <code>int *i; i = NULL;</code> works. Just don&#39;t confuse <code>Tom.name</code> (the pointer itself) with <code>*Tom.name</code> (the thing it points to) or <code>(*Tom).name</code> or <code>Tom-&gt;name</code> (which you&#39;d use if <code>Tom</code> was a pointer, as opposed to <code>Tom.name</code> being a pointer)."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1453328352, "creation_date": 1453328352, "answer_id": 34911738, "question_id": 34911532, "link": "https://stackoverflow.com/questions/34911532/setting-pointer-within-a-stuct-to-null/34911738#34911738", "title": "Setting pointer within a stuct to null", "body": "<p>You can do it for example the following way</p>\n\n<pre><code>Student Tom = { NULL, NULL };\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Student Tom = { .name = NULL, .age = NULL };\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Student Tom;\n\nTom.name = NULL;\nTom.age = NULL;\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 5565459, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d3d149f7a2f658f33c68a6d6191b30d8?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/5565459/brandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 34911738, "answer_count": 1, "score": -3, "last_activity_date": 1453328352, "creation_date": 1453327477, "last_edit_date": 1453327949, "question_id": 34911532, "link": "https://stackoverflow.com/questions/34911532/setting-pointer-within-a-stuct-to-null", "title": "Setting pointer within a stuct to null", "body": "<p>I would like to set the pointers <code>*name</code> and <code>*age</code> in Student struct to NULL. Im not sure how this could be done from the main(). </p>\n\n<pre><code>typedef struct Student Student;\ntypedef struct Student{\n    char *name; \n    int *age;\n} Student;\n</code></pre>\n\n<p>I would like to set the pointers mentioned above to NULL in my main.</p>\n\n<p>My declaration of Student in main is:</p>\n\n<pre><code>Student Tom;\n</code></pre>\n\n<p>I am not sure how to set tom.name and tom.age pointers to NULL.</p>\n"}, {"tags": ["c", "enter", "getchar"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453326890, "post_id": 34911356, "comment_id": 57558306, "body": "The one line per line style again :) ... I wonder where does it come from if it&#39;s so ugly?"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1453327056, "post_id": 34911356, "comment_id": 57558403, "body": "It doesn&#39;t look like this code puts anything into &quot;word&quot;.  Shouldn&#39;t your scanf use word and not mot?  And mot isn&#39;t defined either."}, {"owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "edited": false, "score": 0, "creation_date": 1453327066, "post_id": 34911356, "comment_id": 57558408, "body": "scanf wants to read at leas one non-whitespace character."}, {"owner": {"reputation": 1471, "user_id": 5727643, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/74e0b7b2ed3064d458bc3a7e72b10d86?s=128&d=identicon&r=PG&f=1", "display_name": "Amin NAIRI", "link": "https://stackoverflow.com/users/5727643/amin-nairi"}, "edited": false, "score": 0, "creation_date": 1453327119, "post_id": 34911356, "comment_id": 57558439, "body": "yes I was just translating my code from french to english"}, {"owner": {"reputation": 1471, "user_id": 5727643, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/74e0b7b2ed3064d458bc3a7e72b10d86?s=128&d=identicon&r=PG&f=1", "display_name": "Amin NAIRI", "link": "https://stackoverflow.com/users/5727643/amin-nairi"}, "edited": false, "score": 0, "creation_date": 1453327216, "post_id": 34911356, "comment_id": 57558506, "body": "So you suggest I should use something better than scanf ?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1453327246, "post_id": 34911356, "comment_id": 57558522, "body": "<code>word != &quot;hello&quot;</code> compares two addresses."}, {"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "edited": false, "score": 0, "creation_date": 1453327305, "post_id": 34911356, "comment_id": 57558553, "body": "You should use strcmp to compare strings not != operator"}, {"owner": {"reputation": 2939, "user_id": 4320738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de47f691b009d906bf13e2e6c0fb1451?s=128&d=identicon&r=PG&f=1", "display_name": "Munir", "link": "https://stackoverflow.com/users/4320738/munir"}, "edited": false, "score": 0, "creation_date": 1453327315, "post_id": 34911356, "comment_id": 57558558, "body": "You need <code>strcmp</code> to compare string in C."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1453327348, "post_id": 34911356, "comment_id": 57558576, "body": "You&#39;re doing a pointer comparison with <code>word != &quot;hello&quot;</code> which is guaranteed to be false.  What you want instead is <code>strcmp(word, &quot;hello&quot;) != 0</code>"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1453327476, "post_id": 34911356, "comment_id": 57558644, "body": "read a <i>whole line</i>."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1453327815, "post_id": 34911356, "comment_id": 57558815, "body": "Please don&#39;t modify the question to apply any suggested changes, as that invalidates the answers.  Instead, comment on whether the changes worked or not."}, {"owner": {"reputation": 1471, "user_id": 5727643, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/74e0b7b2ed3064d458bc3a7e72b10d86?s=128&d=identicon&r=PG&f=1", "display_name": "Amin NAIRI", "link": "https://stackoverflow.com/users/5727643/amin-nairi"}, "edited": false, "score": 0, "creation_date": 1453328106, "post_id": 34911356, "comment_id": 57558963, "body": "It was just minors mistakes as I firstly used char but then changed to try with the word hello so I forgot to use string instead but it doesn&#39;t change my question at all. I&#39;m still trying to find how to take enter key behavior in count in my while loop"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453339990, "post_id": 34911356, "comment_id": 57563088, "body": "Gradiuss, <a href=\"http://stackoverflow.com/a/34911501/2410359\">@dbush</a> Answer well answer this post&#39;s concerns. The original post did not have minor, but major mistakes.   Re-writing the post to a new question creates a moving target. Better to learn from this post, form a new question (add a link to this post) and move forward."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1453340200, "post_id": 34911356, "comment_id": 57563155, "body": "Concerning &quot;entering the ENTER key will not loop again&quot;, do not use <code>scanf(&quot; %s&quot;,...</code>.  An answer explains &quot;The %s format specifier already ignores leading whitespace.&quot;  Instead use <code>fgets()</code>."}, {"owner": {"reputation": 1471, "user_id": 5727643, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/74e0b7b2ed3064d458bc3a7e72b10d86?s=128&d=identicon&r=PG&f=1", "display_name": "Amin NAIRI", "link": "https://stackoverflow.com/users/5727643/amin-nairi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453370931, "post_id": 34911356, "comment_id": 57575304, "body": "Thanks @chux it worked (kind of), I struggled but I found online that for direct keyboard input I should use stdin instead of NULL."}], "answers": [{"comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1453327562, "post_id": 34911501, "comment_id": 57558688, "body": "scanf is a bad idea, for interactive sessions you want to read a line."}, {"owner": {"reputation": 1471, "user_id": 5727643, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/74e0b7b2ed3064d458bc3a7e72b10d86?s=128&d=identicon&r=PG&f=1", "display_name": "Amin NAIRI", "link": "https://stackoverflow.com/users/5727643/amin-nairi"}, "edited": false, "score": 0, "creation_date": 1453327893, "post_id": 34911501, "comment_id": 57558850, "body": "took notes thanks. I was actually rushing into that enter key problem and so I forgot all my manners :)"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1453327639, "last_edit_date": 1453327639, "creation_date": 1453327371, "answer_id": 34911501, "question_id": 34911356, "link": "https://stackoverflow.com/questions/34911356/enter-key-in-a-while-loop/34911501#34911501", "title": "Enter key in a while loop", "body": "<p>Three things:</p>\n\n<p>You don't need the space in the <code>scanf</code> format string.  The <code>%s</code> format specifier already ignores leading whitespace.  So instead of <code>\" %s\"</code> use <code>\"%s\"</code>.</p>\n\n<p>The main problem is <code>word != \"hello\"</code>.  That's not how strings are compared.  What you're actually doing is comparing the address of <code>word</code> with the address of the string constant <code>\"hello\"</code>.  To do a string comparison, use <code>strcmp</code>.  If it returns 0, the strings are the same, so your <code>while</code> loop should check for non-zero:</p>\n\n<pre><code>while (strcmp(word,\"hello\")) {\n</code></pre>\n\n<p>Be sure to <code>#include &lt;string.h&gt;</code> to get the declaration of <code>strcmp</code>.</p>\n\n<p>Finally, you need to initialize <code>word</code> so that the initial string comparison doesn't invoke undefined behavior by reading uninitialized data:</p>\n\n<pre><code>char word[100] = {0};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1453389052, "last_edit_date": 1495540752, "creation_date": 1453389052, "answer_id": 34927340, "question_id": 34911356, "link": "https://stackoverflow.com/questions/34911356/enter-key-in-a-while-loop/34927340#34927340", "title": "Enter key in a while loop", "body": "<p><a href=\"https://stackoverflow.com/a/34911501/2410359\">@dbush</a> well answered OP initial concerns.</p>\n\n<p>OP is now using <code>fgets(word, 100, stdin);</code> and types in <kbd>h</kbd> <kbd>e</kbd> <kbd>l</kbd> <kbd>l</kbd> <kbd>o</kbd> <kbd>Enter</kbd>.  <code>word[]</code> is then filled with <code>\"hello\\n\"</code> and this does not pass <code>strcmp(word, \"hello\") != 0</code>.</p>\n\n<p>Solution: strip final <code>'\\n'</code>.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#define BUFFER_SIZE 100\n\nint main() {\n  char word[BUFFER_SIZE] = { 0 };\n\n  while (strcmp(word, \"hello\") != 0) {\n    system(\"clear\");\n    printf(\"\\nSay hello to me : \");\n    // insure buffered output is flushed\n    fflush(stdout);\n\n    // Avoid magic numbers, use `sizeof  word`\n    // Test if input was received\n    if (fgets(word, sizeof word, stdin) == NULL) {\n      fprintf(stderr, \"\\nInput closed\\n\");\n      return 1;\n    }\n\n    // lop off potential trailing \\n\n    word[strcspn(word, \"\\n\")] = '\\0';\n  }\n\n  printf(\"congrats, you made it !\\n\");\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1471, "user_id": 5727643, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/74e0b7b2ed3064d458bc3a7e72b10d86?s=128&d=identicon&r=PG&f=1", "display_name": "Amin NAIRI", "link": "https://stackoverflow.com/users/5727643/amin-nairi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 34927340, "answer_count": 2, "score": 1, "last_activity_date": 1453389052, "creation_date": 1453326859, "last_edit_date": 1453371812, "question_id": 34911356, "link": "https://stackoverflow.com/questions/34911356/enter-key-in-a-while-loop", "title": "Enter key in a while loop", "body": "<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main () \n{\n    char word[100];\n\n    while (word != \"hello\") {\n\n        system(\"clear\");\n\n        printf(\"\\nSay hello to me : \");\n\n        scanf(\" %s\", word);\n    }\n\n    printf(\"congrats, you made it !\");\n\n    return 0;\n}\n</code></pre>\n\n<p>In this code : if i enter anything but hello, the loop continue. However, entering the ENTER key will not loop again, it will just add a line.</p>\n\n<p>I read somewhere that using getchar() might help but I'm kinda new to the C developpement and I'm stuck here searching for hours how to make it works.</p>\n\n<p><strong>EDIT 0 :</strong></p>\n\n<p>Removed</p>\n\n<pre><code>while (word != \"hello\")\nchar word[100];\nscanf(\" %s\", word);\n</code></pre>\n\n<p>Added</p>\n\n<pre><code>#include &lt;string.h&gt;\nwhile (strcmp(word, \"hello\") != 0)\nchar word[100] = {0}; \nfgets(word, 6, stdin);\n</code></pre>\n\n<p><strong>EDIT 1 :</strong></p>\n\n<p>I tried to include in my code something like that</p>\n\n<pre><code>fgets(word, 6, NULL);\n</code></pre>\n\n<p>But it got me a segmentation fault.</p>\n\n<p>**EDIT 2 : **</p>\n\n<p>The correct working input is :</p>\n\n<pre><code>fgets(word, 6, stdin);\n</code></pre>\n\n<p>So it worked, but adding more than 6 character to the question like :</p>\n\n<pre><code>Say hello to me : hello from the inside\n</code></pre>\n\n<p>Will just print :</p>\n\n<pre><code>Say hello to me :\nSay hello to me :\n</code></pre>\n\n<p>So I just modified the function like that :</p>\n\n<pre><code>fgets(word, 100, stdin);\n</code></pre>\n\n<p>But now it will not get me any input to work</p>\n"}, {"tags": ["c", "linux", "input", "gamepad"], "comments": [{"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 1, "creation_date": 1453327534, "post_id": 34911196, "comment_id": 57558668, "body": "Most games/frameworks (including <code>pygame</code>) would end up using <a href=\"https://www.libsdl.org/release/SDL-1.2.15/docs/html/guideinput.html\" rel=\"nofollow noreferrer\">libsdl</a>."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1453328158, "post_id": 34911196, "comment_id": 57558985, "body": "Once upon a time, about 15 years ago, I wrote a quick little Python library for interpreting raw evdev events. No idea what happened to it, or if it ever became public (was done in the context of job-related QA automation), but... it&#39;s really not hard at all; once you have the format, the <code>struct</code> module does a fine job of decoding them."}], "answers": [{"tags": [], "owner": {"reputation": 601, "user_id": 5295948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50ee18dd627645a3829a3d381a7752fa?s=128&d=identicon&r=PG&f=1", "display_name": "recycler", "link": "https://stackoverflow.com/users/5295948/recycler"}, "is_accepted": false, "score": 1, "last_activity_date": 1453327162, "creation_date": 1453327162, "answer_id": 34911434, "question_id": 34911196, "link": "https://stackoverflow.com/questions/34911196/how-does-one-handle-input-from-a-character-device-gamepad-directly-in-linux-syst/34911434#34911434", "title": "How does one handle input from a character device/gamepad directly in Linux systems?", "body": "<p>It is an USB Hid device, so it is handled by the hid driver - see in your debug output \"USB HID v1.10 Gamepad\"\nThere are various tutorials and examples out how to do it.</p>\n\n<p>As starting point, you could install joystick over \"apt-get install joystick\" and have a look on the source code.</p>\n\n<p>Also libhidapi is a good choice.</p>\n"}, {"tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": true, "score": 5, "last_activity_date": 1453329592, "last_edit_date": 1453329592, "creation_date": 1453328021, "answer_id": 34911664, "question_id": 34911196, "link": "https://stackoverflow.com/questions/34911196/how-does-one-handle-input-from-a-character-device-gamepad-directly-in-linux-syst/34911664#34911664", "title": "How does one handle input from a character device/gamepad directly in Linux systems?", "body": "<p>USB input devices in Linux are usually handled by the HID driver (Human Interface Device), which in turn are converted into input devices.</p>\n\n<p>You can read them as raw USB devices, but that is not usually a very good idea, because it is a very low level protocol.</p>\n\n<p>You can read the <code>/dev/input/*</code> devices, if you have the proper permissions. Usually they are readable only by root. If you do not want to read the raw bytes, there are some libraries, such as <a href=\"http://www.freedesktop.org/wiki/Software/libinput/\" rel=\"nofollow\">libinput</a>, that do that job for you.</p>\n\n<p>But if your game works in XWindows (most likely), then you should manage the XInput devices. You can do that with raw X calls, but you are probably better using some library such as <a href=\"https://www.libsdl.org/\" rel=\"nofollow\">SDL</a>. Actually SDL is what <code>pygame</code> uses under the hood, so I'd try that first.</p>\n\n<p>About how to identify the proper device, every input device has a name, and some even a serial number (you see those as the symlink under <code>/dev/input/by-id</code> These are usually enough to identify the device, instead of the input number. </p>\n\n<p>If you want to read the raw input devices, let me explain a bout about your hexdumps. You are reading the <code>input*</code> devices, so you are getting values of type <code>struct input_event</code> (see <code>/usr/include/linux/input.h</code>):</p>\n\n<pre><code>struct input_event {\n    struct timeval time;\n    __u16 type;\n    __u16 code;\n    __s32 value;\n};\n</code></pre>\n\n<p>In your first dump, for example:</p>\n\n<pre><code>0000000 f53a 569f 0000 0000 ac6c 000c 0000 0000\n0000010 0003 0000 007f 0000 f53a 569f 0000 0000\n0000020 ac6c 000c 0000 0000 0000 0000 0000 0000\n</code></pre>\n\n<p>There are actually two <code>input_event</code>s. The first one is:</p>\n\n<pre><code>f53a 569f 0000 0000 ac6c 000c 0000 0000 0003 0000 007f 0000\n</code></pre>\n\n<p>The first 64 bytes is the timestamp. Then, <code>0003 (EV_ABS)</code> means a movement of an absolute axis, <code>0000 (ABS_X)</code> is the axis index and <code>0000007f</code> is the position of that axis. Absolute axes are sometimes used to represent throttles, joysticks and the like (sometimes keypads are sent as a joystick instead of 4 buttons), and you get the position on first read to know where the control is, even if you do not move it.</p>\n\n<p>The second event is:</p>\n\n<pre><code>f53a 569f 0000 0000 ac6c 000c 0000 0000 0000 0000 0000 0000\n</code></pre>\n\n<p>The first 64 bytes is the timestamp (same as above. Then <code>0000 (EV_SYN)</code> means a synchronization event. With <code>EV_SYN</code>, the other fields are unused. <code>EV_SYN</code> is used to group together the different values of a single event, such as the horizontal and vertical axes of a mouse or a joystick.</p>\n\n<p>Your other dump is similar but for <code>AXIS_Y</code>.</p>\n\n<p>My guess is that the keypad is being treated as a digital joystick, two axes <code>ABS_X</code> and <code>ABS_Y</code>, being <code>0x7F</code> the middle point (range from <code>0x00</code> to <code>0xFF</code>). The messages you are getting are simply the middle point, that is no keypad button pressed. Maybe your <code>hexdump</code> output is being buffered?</p>\n"}], "owner": {"reputation": 189, "user_id": 1348572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ALppn.jpg?s=128&g=1", "display_name": "tunacado", "link": "https://stackoverflow.com/users/1348572/tunacado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2850, "favorite_count": 4, "accepted_answer_id": 34911664, "answer_count": 2, "score": 7, "last_activity_date": 1453329592, "creation_date": 1453326264, "question_id": 34911196, "link": "https://stackoverflow.com/questions/34911196/how-does-one-handle-input-from-a-character-device-gamepad-directly-in-linux-syst", "title": "How does one handle input from a character device/gamepad directly in Linux systems?", "body": "<p>I am developing a program in C that uses a <a href=\"https://rads.stackoverflow.com/amzn/click/com/B0034ZOAO0\" rel=\"noreferrer\" rel=\"nofollow noreferrer\">USB SNES controller</a> for input on a RPM based distribution.  Is there a library anyone knows of that makes this easier to interact with, or some tool (joydev?) that allows to properly read input from the device?  I do not need an entire game engine; it is only for input from the character device.</p>\n\n<p>If there's a library that already does this for me, that would be excellent (I can just see what the library does on my own) and this can be closed with just a link; otherwise, if I have to do this myself, I have a few specific questions:</p>\n\n<h3>The questions:</h3>\n\n<ul>\n<li>Is there an already existing C library that handles all of my USB device interactions to a gamepad for me?  I'll gladly learn a new library.  (My google-fu has failed me here, I apologize if this is excessively obvious)</li>\n<li>What is the appropriate way to ensure you open the proper character device every time, as the event* name changes between sessions/initialization?</li>\n<li>What is the appropriate method to handle input from these devices from my application?  Just determine what each button press amounts to value-wise and perform actions based on that input when we poll over the character device?</li>\n</ul>\n\n<p>In brief pseduo-C, something like this?</p>\n\n<pre><code>struct gamepad {\n    int fd;\n};\n\nvoid get_input(struct gamepad *gamepad)\n{\n    char *buf;\n    read(gamepad-&gt;fd, buf, 48);\n    switch(buf)\n    {\n        /* insert cases about handling differing buttons */\n    }\n}\n</code></pre>\n\n<h3>How the device presents itself:</h3>\n\n<p>I can clearly see the device registers properly as far as I can see:</p>\n\n<pre><code>$ dmesg | tail\n[198564.517068] usb 1-1: USB disconnect, device number 17\n[198566.154324] usb 1-1: new low-speed USB device number 18 using xhci_hcd\n[198566.323309] usb 1-1: New USB device found, idVendor=12bd, idProduct=d015\n[198566.323312] usb 1-1: New USB device strings: Mfr=0, Product=2, SerialNumber=0\n[198566.323313] usb 1-1: Product: 2Axes 11Keys Game  Pad\n[198566.323792] usb 1-1: ep 0x81 - rounding interval to 64 microframes, ep desc says 80 microframes\n[198566.328692] input: 2Axes 11Keys Game  Pad as /devices/pci0000:00/0000:00:14.0/usb1/1-1/1-1:1.0/input/input20\n[198566.329036] hid-generic 0003:12BD:D015.0006: input,hidraw2: USB HID v1.10 Gamepad [2Axes 11Keys Game  Pad] on usb-0000:00:14.0-1/input0\n</code></pre>\n\n<p>And if I read from the device, I can see that it receives an interrupt and input from the device just be using hexdump:</p>\n\n<pre><code>$ ls -lattr /dev/input/by-id/usb-12bd_2Axes_11Keys_Game_Pad-event-joystick \nlrwxrwxrwx. 1 root root 10 Jan 20 15:56 /dev/input/by-id/usb-12bd_2Axes_11Keys_Game_Pad-event-joystick -&gt; ../event17\n</code></pre>\n\n<p>When I press a key (not releasing) it appears to work as expected although I cannot decipher what is being returned from the buffer without context as of yet:</p>\n\n<pre><code>$ hexdump /dev/input/event17 \n0000000 f53a 569f 0000 0000 ac6c 000c 0000 0000\n0000010 0003 0000 007f 0000 f53a 569f 0000 0000\n0000020 ac6c 000c 0000 0000 0000 0000 0000 0000\n</code></pre>\n\n<p>On release of a button, you receive similar output:</p>\n\n<pre><code>0000030 f53c 569f 0000 0000 8be3 0007 0000 0000\n0000040 0003 0001 007f 0000 f53c 569f 0000 0000\n0000050 8be3 0007 0000 0000 0000 0000 0000 0000\n</code></pre>\n\n<p>That is the 'up' button being pressed and released above.</p>\n\n<h3>The research:</h3>\n\n<p>In an effort to determine how other libraries do this, I thought about doing an strace of <code>pygame</code> in python and seeing what devices it opens as well as how it reads input, but I'm still learning through how to use it.  I also saw some vague mentions concerning joydev, but, again, haven't learned how to use them.  I'm doing that currently and will post results if I learn anything of value.</p>\n\n<p>Beyond that, watching button presses via ASCII and hexdump, I note that they have a similar input based on button, but there appears to be what I figure is a count of interrupts for the USB bus at the end of the output above (0xf53a to 0xf53c).  This always appears to increment as well, and, for my purposes, can probably be discarded.</p>\n\n<p>There is also the possibility I'm just not mounting the device correctly because I'm missing some module or package (thinking, again, about joydev and what it is supposed to do).  I have not worked often with USB at all so this type of device handling is new to me.</p>\n\n<p>Searching around for a while, I didn't see anything that showed exactly what I was looking for, but I gladly accept redirects to other questions/topics for reading.</p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1453326213, "post_id": 34911166, "comment_id": 57557924, "body": "Why didn&#39;t you take the time to understand what the function does and whether it does it correctly? Aren&#39;t you interested in learning?"}, {"owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453326334, "post_id": 34911166, "comment_id": 57557981, "body": "I&#39;m not that interested in C, but I do have a school project, so I need to do this."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1453326524, "post_id": 34911166, "comment_id": 57558114, "body": "I am very sorry for you if you are not interested in the most beautiful and powerful language of all. It&#39;s like not being interested in learning english if you are not native english speaker."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453326560, "post_id": 34911242, "comment_id": 57558127, "body": "@BasileStarynkevitch I think GNU readline implements a history which is what the OP wants."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1453326583, "post_id": 34911242, "comment_id": 57558144, "body": "Tha&#39;t why I said &quot;yes&quot;"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1453326671, "last_edit_date": 1453326671, "creation_date": 1453326415, "answer_id": 34911242, "question_id": 34911166, "link": "https://stackoverflow.com/questions/34911166/get-pressed-key-in-linux-c/34911242#34911242", "title": "Get pressed key in linux C", "body": "<p>It is tricky. You should read about <code>tty</code>-s, notably the <a href=\"http://www.linusakesson.net/programming/tty/\" rel=\"nofollow\">TTY demystified</a>. Understand the role of the kernel in <a href=\"https://en.wikipedia.org/wiki/Line_discipline\" rel=\"nofollow\">line discipline</a>.</p>\n\n<p>I suggest using the <a href=\"https://cnswww.cns.cwru.edu/php/chet/readline/rltop.html\" rel=\"nofollow\">GNU readline</a> (it has history and autocompletion functions!) or the <a href=\"https://www.gnu.org/software/ncurses/\" rel=\"nofollow\">GNU ncurses</a> library (otherwise, if running a GUI application under X11, code in <a href=\"http://qt.io/\" rel=\"nofollow\">Qt</a> or <a href=\"http://gtk.org/\" rel=\"nofollow\">GTK</a>). Otherwise, dive into books (e.g. <a href=\"http://www.makelinux.net/alp/\" rel=\"nofollow\"><em>Advanced Linux Programming</em></a>) explaining the details of tty (and its raw &amp; cooked modes), and see <a href=\"http://man7.org/linux/man-pages/man3/termios.3.html\" rel=\"nofollow\">termios(3)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow\">poll(2)</a> for a start.</p>\n"}], "owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 571, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1453326671, "creation_date": 1453326134, "question_id": 34911166, "link": "https://stackoverflow.com/questions/34911166/get-pressed-key-in-linux-c", "title": "Get pressed key in linux C", "body": "<p>I'm trying to recognize the key pressed by the user. I wan't the program to stop if the user is pressing an 'UP' key. I'm doing this for a further command history implementation. This <code>getKey()</code> code is not my function, I found it here somewhere, should it work ? Because whenever I press the 'UP' key nothing happens.</p>\n\n<pre><code>int getKey(){\nint character;\nstruct termios orig_term_attr;\nstruct termios new_term_attr;\n\ntcgetattr(fileno(stdin), &amp;orig_term_attr);\nmemcpy(&amp;new_term_attr, &amp;orig_term_attr, sizeof(struct termios));\nnew_term_attr.c_lflag &amp;= ~(ECHO|ICANON);\nnew_term_attr.c_cc[VTIME] = 0;\nnew_term_attr.c_cc[VMIN] = 0;\ntcsetattr(fileno(stdin), TCSANOW, &amp;new_term_attr);\n\ncharacter = fgetc(stdin);\n\ntcsetattr(fileno(stdin), TCSANOW, &amp;orig_term_attr);\n\nreturn character;\n}\n\nint main(int argc, char *argv[]){\n\nchar cmd[500];\nint key;\n\ndo{\n    printf(\"$ &gt; \");\n    fgets(cmd, 499, stdin);\n    trim(cmd);\n    key = getKey();\n\n    if(key == 0x17C){\n        break;\n    }\n\n    if(starts_with(cmd, \"./\")){\n        execute_external_command(cmd);\n    }else{\n        execute_internal_command(cmd);\n    }\n\n\n}while(strcmp(cmd, \"exit\") != 0);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "c99", "dead-code"], "comments": [{"owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "edited": false, "score": 1, "creation_date": 1453326653, "post_id": 34910994, "comment_id": 57558190, "body": "Take a look here: <a href=\"http://stackoverflow.com/questions/6687630/how-to-remove-unused-c-c-symbols-with-gcc-and-ld\" title=\"how to remove unused c c symbols with gcc and ld\">stackoverflow.com/questions/6687630/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3868, "user_id": 318811, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/3d03167ed57857f7e7564bac118a4d03?s=128&d=identicon&r=PG", "display_name": "MarkP", "link": "https://stackoverflow.com/users/318811/markp"}, "edited": false, "score": 0, "creation_date": 1453390237, "post_id": 34912580, "comment_id": 57588924, "body": "I updated the original post to assume the functions were implemented. In any case, would <code>-flto</code> help in stripping during linking?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 3868, "user_id": 318811, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/3d03167ed57857f7e7564bac118a4d03?s=128&d=identicon&r=PG", "display_name": "MarkP", "link": "https://stackoverflow.com/users/318811/markp"}, "edited": false, "score": 0, "creation_date": 1453391690, "post_id": 34912580, "comment_id": 57589948, "body": "It depends. If the symbols are in the dynamic symbol table (option -rdynamic), the link time optimizer cannot remove it, since it doesn&#39;t know if it will be linked at runtime. With standard options, it can detect that the symbol DEFAULT_FUNCS isn&#39;t referenced and remove the code and subsequently all symbols, which are not referenced after removing it."}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": true, "score": 0, "last_activity_date": 1453332171, "creation_date": 1453332171, "answer_id": 34912580, "question_id": 34910994, "link": "https://stackoverflow.com/questions/34910994/dead-code-removal-of-externd-global/34912580#34912580", "title": "Dead code removal of extern&#39;d global", "body": "<p><strong>DEFAULT_FUNCS:</strong></p>\n\n<p>Since the symbol DEFAULT_FUNCS - due to its scope and modifiers - is subject to being exported to the symbol table of the binary for (dynamic) linking, it cannot be stripped. In other words: The linker (ld) cannot determine if the symbols will be used or not.</p>\n\n<p><strong>Functions def_foo &amp; def_bar</strong></p>\n\n<p>Furthermore, there are no functions at all which could be stripped, since you only <em>declared</em> them. Indeed, linking of this binary would fail, since <code>def_foo</code> and <code>def_bar</code> are undefined symbols.</p>\n\n<p>One more thing: Correct would be:</p>\n\n<pre><code>const struct func_ptrs DEFAULT_FUNCS = ...\n</code></pre>\n\n<p>without the asterisk, since you initialize a struct, not a pointer.</p>\n"}], "owner": {"reputation": 3868, "user_id": 318811, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/3d03167ed57857f7e7564bac118a4d03?s=128&d=identicon&r=PG", "display_name": "MarkP", "link": "https://stackoverflow.com/users/318811/markp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 34912580, "answer_count": 1, "score": 2, "last_activity_date": 1453474859, "creation_date": 1453325539, "last_edit_date": 1453474859, "question_id": 34910994, "link": "https://stackoverflow.com/questions/34910994/dead-code-removal-of-externd-global", "title": "Dead code removal of extern&#39;d global", "body": "<p>I'm wondering if the compiler/linker will remove global variables that have been <code>extern</code>'d in a public header? For example:</p>\n\n<pre><code>// public.h\nstruct func_ptrs {\n   void (*foo)(void);\n   void (*bar)(int);\n};\n\nextern const struct func_ptrs DEFAULT_FUNCS;\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>// private.c\n#include \"public.h\"\n\nvoid def_foo(void) { ... }\nvoid def_bar(int a) { ... }\n\nconst struct func_ptrs DEFAULT_FUNCS = { .foo = def_foo, .bar = def_bar };\n</code></pre>\n\n<p>Are there any specific linker flags that will allow for this variable (and the two functions) to be stripped from the resulting binary?</p>\n\n<p>Assume GCC and MSVC as the two target compilers.</p>\n"}, {"tags": ["c", "process", "pipe", "parent-child"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453324819, "post_id": 34910707, "comment_id": 57557150, "body": "Which process do you think should terminate first, the parent or the child?"}, {"owner": {"reputation": 85, "user_id": 4255328, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/a7rZY.jpg?s=128&g=1", "display_name": "TimNeutron", "link": "https://stackoverflow.com/users/4255328/timneutron"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453324907, "post_id": 34910707, "comment_id": 57557215, "body": "@DavidSchwartz the child. But also if I wait for the child process, then it is a deadlock again."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453325003, "post_id": 34910707, "comment_id": 57557264, "body": "How can the child terminate? Its <code>while</code> loop waits for its <code>stdin</code> to close. Where does the parent close it? Where is the <code>close(fd[1])</code> in the parent?"}, {"owner": {"reputation": 85, "user_id": 4255328, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/a7rZY.jpg?s=128&g=1", "display_name": "TimNeutron", "link": "https://stackoverflow.com/users/4255328/timneutron"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453325121, "post_id": 34910707, "comment_id": 57557341, "body": "@DavidSchwartz it terminates when it reaches EOF (ctrl + D), then it outputs what it has read"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453325159, "post_id": 34910707, "comment_id": 57557361, "body": "There is no EOF. The parent never does <code>close(fd[1])</code> which would indicate end of file. If you want to send an EOF to the child, the parent needs to close its end of the pipe."}, {"owner": {"reputation": 85, "user_id": 4255328, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/a7rZY.jpg?s=128&g=1", "display_name": "TimNeutron", "link": "https://stackoverflow.com/users/4255328/timneutron"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453325209, "post_id": 34910707, "comment_id": 57557389, "body": "@DavidSchwartz yes but I do that manually, via terminal"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453325222, "post_id": 34910707, "comment_id": 57557400, "body": "You do <i>what</i> manually? You close the parent&#39;s side of the pipe to the child? How the heck could you do that?!"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1453325528, "post_id": 34910707, "comment_id": 57557548, "body": "Standard C11 or C99 does not have pipes. But POSIX and Linux (and MacOSX) have them. So you should at least edit your question to add some tags"}, {"owner": {"reputation": 85, "user_id": 4255328, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/a7rZY.jpg?s=128&g=1", "display_name": "TimNeutron", "link": "https://stackoverflow.com/users/4255328/timneutron"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1453325692, "post_id": 34910707, "comment_id": 57557646, "body": "@BasileStarynkevitch yeah..sorry I had no idea about that"}, {"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1453328189, "post_id": 34910707, "comment_id": 57559005, "body": "<code>nanomsg</code> may be interesting to you... <a href=\"http://tim.dysinger.net/posts/2013-09-16-getting-started-with-nanomsg.html\" rel=\"nofollow noreferrer\">tim.dysinger.net/posts/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4255328, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/a7rZY.jpg?s=128&g=1", "display_name": "TimNeutron", "link": "https://stackoverflow.com/users/4255328/timneutron"}, "edited": false, "score": 0, "creation_date": 1453325732, "post_id": 34910939, "comment_id": 57557657, "body": "Thank you now there is no more deadlock!! But the output is gibberish...any idea why?"}, {"owner": {"reputation": 85, "user_id": 4255328, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/a7rZY.jpg?s=128&g=1", "display_name": "TimNeutron", "link": "https://stackoverflow.com/users/4255328/timneutron"}, "edited": false, "score": 0, "creation_date": 1453325895, "post_id": 34910939, "comment_id": 57557746, "body": "Oh okay...I am super tired and I did close(fd[0]) instead of fclose(output). Thanks sir, you are like a debugging ninja"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 1, "last_activity_date": 1453325357, "creation_date": 1453325357, "answer_id": 34910939, "question_id": 34910707, "link": "https://stackoverflow.com/questions/34910707/communicating-via-pipes-in-c/34910939#34910939", "title": "Communicating via pipes in C", "body": "<p>The parent needs to close its side of the pipe to the child so that the child will detect end-of-file and terminate.</p>\n\n<pre><code>  while(fgets(buffer,255,stdin)!=NULL)\n      fprintf(output,\"%s\",buffer);\n  fclose(output); // does close(fd[1]);\n  FILE *input = fdopen(fd2[0],\"r\");\n  while(fgets(buffer,255,input)!=NULL)\n    printf(\"Parent: %s\",buffer);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": false, "score": 1, "last_activity_date": 1453325678, "creation_date": 1453325678, "answer_id": 34911038, "question_id": 34910707, "link": "https://stackoverflow.com/questions/34910707/communicating-via-pipes-in-c/34911038#34911038", "title": "Communicating via pipes in C", "body": "<p>Make sure everything gets closed.  After</p>\n\n<pre><code>dup2(fd[0],fileno(stdin));\n</code></pre>\n\n<p>you should do:</p>\n\n<pre><code>close(fd[0]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1453326005, "last_edit_date": 1495540757, "creation_date": 1453325687, "answer_id": 34911042, "question_id": 34910707, "link": "https://stackoverflow.com/questions/34910707/communicating-via-pipes-in-c/34911042#34911042", "title": "Communicating via pipes in C", "body": "<p>When you have both input and output pipes between two (single-threaded) processes, you can have some <a href=\"https://en.wikipedia.org/wiki/Deadlock\" rel=\"nofollow noreferrer\">deadlock</a>, so you need to have an <a href=\"https://en.wikipedia.org/wiki/Event_loop\" rel=\"nofollow noreferrer\">event loop</a> using a multiplexing syscall (generally <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow noreferrer\">poll(2)</a>...) and you will either read or write, depending on what is possible. Of course you need to buffer! BTW, in that case, you'll better use low level <a href=\"http://man7.org/linux/man-pages/man2/syscalls.2.html\" rel=\"nofollow noreferrer\">syscalls(2)</a> without using <code>&lt;stdio.h&gt;</code> (and if you still do use <code>stdio</code>, don't forget to <a href=\"http://man7.org/linux/man-pages/man3/fflush.3.html\" rel=\"nofollow noreferrer\">fflush(3)</a>....). See also <a href=\"https://stackoverflow.com/a/20582916/841108\">this answer</a>.</p>\n\n<p><sup>(of course I am supposing a POSIX or Linux system)</sup></p>\n"}], "owner": {"reputation": 85, "user_id": 4255328, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/a7rZY.jpg?s=128&g=1", "display_name": "TimNeutron", "link": "https://stackoverflow.com/users/4255328/timneutron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "accepted_answer_id": 34910939, "answer_count": 3, "score": 1, "last_activity_date": 1453326005, "creation_date": 1453324613, "last_edit_date": 1453324727, "question_id": 34910707, "link": "https://stackoverflow.com/questions/34910707/communicating-via-pipes-in-c", "title": "Communicating via pipes in C", "body": "<p>I am trying to write this little program, where the parent and the child communicate with each other via pipes, the code here works, unless you 'uncomment' the commented lines, than it comes to some sort of deadlock, and I cannot figure it out why? Any ideas?</p>\n\n<pre><code>int main(int argc, char **argv){\n\n  int fd[2];\n  int fd2[2];\n  pid_t pid;\n  pipe(fd);\n  pipe(fd2);\n  pid = fork();\n\n  if(pid==0){\n      close(fd[1]);\n      dup2(fd[0],fileno(stdin));\n      close(fd2[0]);\n      FILE *output = fdopen(fd2[1],\"w\");\n      char buffer[255];\n      while(fgets(buffer,255,stdin)!=NULL)\n          printf(\"child: %s\",buffer);\n  //  fprintf(output,\"%s\",buffer);\n  } else {\n      close(fd[0]);\n      close(fd2[1]);\n      FILE *output = fdopen(fd[1],\"w\");\n      char buffer[255];\n      while(fgets(buffer,255,stdin)!=NULL)\n          fprintf(output,\"%s\",buffer);\n      //FILE *input = fdopen(fd2[0],\"r\");\n      //while(fgets(buffer,255,input)!=NULL)\n      //  printf(\"Parent: %s\",buffer);\n  }\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 1, "last_activity_date": 1453324586, "creation_date": 1453324586, "answer_id": 34910693, "question_id": 34910561, "link": "https://stackoverflow.com/questions/34910561/can-anyone-explain-me-about-recursion-in-tower-of-hanoi-in-c-language/34910693#34910693", "title": "Can anyone explain me about recursion in Tower of Hanoi in C language?", "body": "<p>A reasonable comment for <code>towers</code> would be:</p>\n\n<blockquote>\n  <p>Move <em>num</em> discs from peg <em>frompeg</em> to peg <em>topeg</em> (the remaining peg being <em>auxpeg</em>)</p>\n</blockquote>\n\n<p>Then recursive section says to:</p>\n\n<ol>\n<li><p>Move <em>num-1</em> discs from peg <em>frompeg</em> to peg <em>auxpeg</em> (the remaining peg being <em>topeg</em></p></li>\n<li><p>Move disc from peg <em>frompeg</em> to peg <em>topeg</em>.</p></li>\n<li><p>Move <em>num-1</em> discs from peg <em>auxpeg</em> to peg <em>topeg</em> (the remaining peg being <em>frompeg</em></p></li>\n</ol>\n"}], "owner": {"reputation": 73, "user_id": 5461745, "user_type": "registered", "profile_image": "https://graph.facebook.com/933277283386870/picture?type=large", "display_name": "Jan Nutcha", "link": "https://stackoverflow.com/users/5461745/jan-nutcha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "closed_date": 1453325604, "answer_count": 1, "score": 0, "last_activity_date": 1453324676, "creation_date": 1453324129, "last_edit_date": 1453324676, "question_id": 34910561, "link": "https://stackoverflow.com/questions/34910561/can-anyone-explain-me-about-recursion-in-tower-of-hanoi-in-c-language", "closed_reason": "Needs more focus", "title": "Can anyone explain me about recursion in Tower of Hanoi in C language?", "body": "<pre><code>// Tower of Hanoi\n#include &lt;stdio.h&gt;\n\nvoid towers(int, char, char, char);\n\nint main()\n{\n    int num;\n    clrscr();\n    printf(\"Enter the number of disks : \");\n    scanf(\"%d\", &amp;num);\n    printf(\"The sequence of moves involved in the Tower of Hanoi are :\\n\");\n    towers(num, 'A', 'C', 'B');\n    getch();\n    return 0;\n}\n\nvoid towers(int num, char frompeg, char topeg, char auxpeg)\n{\n    if (num == 1) {\n        printf(\"\\n Move disk 1 from peg %c to peg %c\", frompeg, topeg);\n        return;\n    }\n    towers(num - 1, frompeg, auxpeg, topeg);\n    printf(\"\\n Move disk %d from peg %c to peg %c\", num, frompeg, topeg);\n    towers(num - 1, auxpeg, topeg, frompeg);\n    getch();\n}\n</code></pre>\n\n<p>I ran this code and the output is correct, but I don't understand the recursion of this. Please explain me :} Thank you :]</p>\n"}, {"tags": ["c", "cs50", "vigenere"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1453323922, "post_id": 34910414, "comment_id": 57556634, "body": "Suggest using <code>&#39;a&#39;</code> and <code>&#39;z&#39;</code> (and <code>&#39;A&#39;</code> and <code>&#39;Z&#39;</code>) in place of numbers."}, {"owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "edited": false, "score": 0, "creation_date": 1453324035, "post_id": 34910414, "comment_id": 57556700, "body": "How your <code>GetString</code> function works? And what do you mean by &#39;when &quot;s&quot; consists of space(&quot; &quot;)&#39;?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1453324051, "post_id": 34910414, "comment_id": 57556708, "body": "When you treat a non-alpha character, you skip a letter in the key because you&#39;re using <code>i</code> to step through both the key and the data to be encrypted.  You need to use separate indexes."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "edited": false, "score": 0, "creation_date": 1453324100, "post_id": 34910414, "comment_id": 57556741, "body": "@nsilent22: <code>GetString()</code> is a semi-standard function when the <code>&lt;cs50.h&gt;</code> header is included.  You can find the source online rather easily; it appears quite often here on SO."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453324127, "post_id": 34910414, "comment_id": 57556759, "body": "General rule in programming: do not use magic numbers."}, {"owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1453324504, "post_id": 34910414, "comment_id": 57556992, "body": "@JonathanLeffler: Does it read string until the newline character (I don&#39;t have such cs50.h header)?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1453324622, "post_id": 34910414, "comment_id": 57557051, "body": "The header says: <code>&#47;**  * Reads a line of text from standard input and returns it as a  * string (char *), sans trailing newline character.  (Ergo, if  * user inputs only &quot;\\n&quot;, returns &quot;&quot; not NULL.)  Returns NULL  * upon error or no input whatsoever (i.e., just EOF).  Leading  * and trailing whitespace is not ignored.  Stores string on heap  * (via malloc); memory must be freed by caller to avoid leak.  *&#47; string GetString(void);</code> (only the comment has 6 lines of text and a top and bottom line, and the declaration appears on the 9th line of the quoted fragment)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1453325216, "post_id": 34910414, "comment_id": 57557396, "body": "See also <a href=\"http://cs50.net/\" rel=\"nofollow noreferrer\">CS50</a> and <a href=\"http://reference.cs50.net/cs50.h/GetString\" rel=\"nofollow noreferrer\"><code>GetString()</code></a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453349338, "post_id": 34910414, "comment_id": 57565533, "body": "Your code works correctly for me, and it also looks correct so long as the <i>key</i> only contains lower-case letters. (Putting spaces in the key might break the code, but you said you only put spaces in the input string).  I tested your code with <code>hello</code> as the key (supplied on commandline) and <code>The quick brown fox</code> as input (supplied during execution) and got the output <code>Alp ebmnv ivzhb jzi</code>.   If you are still having trouble please update your question to include the exact values you used for key and string , and the exact output you got."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453349410, "post_id": 34910414, "comment_id": 57565545, "body": "It might be wise to validate the key, e.g. <code>for (int i = 0; i &lt; l; ++i) if ( ! islower(k[i]) ) { printf(&quot;Invalid key.\\n&quot;); return EXIT_FAILURE; }</code>"}, {"owner": {"reputation": 63, "user_id": 2795300, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f6e7cba374ce14670baea9782273faeb?s=128&d=identicon&r=PG&f=1", "display_name": "HakBon", "link": "https://stackoverflow.com/users/2795300/hakbon"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1453419008, "post_id": 34910414, "comment_id": 57605311, "body": "@JonathanLeffler you sir are a lifesaver! Your second comment made it clear and after few changes I was able to get the code working. I hadn&#39;t truly understood the fact that while running a &quot;for&quot; loop when can have more than a single variable iterate! Many thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 0, "last_activity_date": 1453348838, "creation_date": 1453348838, "answer_id": 34915180, "question_id": 34910414, "link": "https://stackoverflow.com/questions/34910414/vigenere-cipher-only-works-up-until-dealing-with-a-space-in-c-why/34915180#34915180", "title": "Vigenere Cipher only works up until dealing with a space(&quot; &quot;) in C - why?", "body": "<p>Here is code that implements the 'separate counters for string and key' comment that I made. It also uses the letter codes <code>'a'</code> and <code>'A'</code> (and avoids needing to use <code>'z'</code> or <code>'Z'</code>) instead of using numbers.  It does assume that you are dealing with a single-byte code set (not UTF-8 unless you're working in the ASCII range) where the lower-case and upper-case letters are each in a contiguous range (so it won't work reliably with EBCDIC, but will with most other code sets), and it also ignores accented characters.  (It would have to do <code>setlocale(\"\")</code> to get locale-specific interpretations of which characters are letters.)</p>\n\n<pre><code>#include &lt;cs50.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, string argv[])\n{\n    if (argc != 2)\n    {\n        fprintf(stderr, \"Usage: %s key\\n\", argv[0]);\n        return 1;\n    }\n\n    string k = argv[1];\n    int l = strlen(k);\n\n    for (int i = 0; i &lt; l; i++)\n    {\n        int c = k[i];\n        if (!isalpha(c))\n        {\n            fprintf(stderr, \"%s: non-alpha character %c in key string\\n\", argv[0], c);\n            return 1;\n        }\n        k[i] = tolower(c);\n    }\n\n    printf(\"Enter a string to be encrypted:\\n\");\n    string s = GetString();\n    int n = strlen(s);\n\n    for (int i = 0, j = 0; i &lt; n; i++)\n    {\n        int c = (unsigned char)s[i];\n        if (isupper(c))\n            c = ((c - 'A') + (k[j++ % l] - 'a')) % 26 + 'A';\n        else if (islower(c))\n            c = ((c - 'a') + (k[j++ % l] - 'a')) % 26 + 'a';\n        putchar(c);\n    }\n    putchar('\\n');\n\n    return 0;\n}\n</code></pre>\n\n<p>Here is a sample run that demonstrates the weakness of using 'a' as one of the letters in the key for this Vigenere cipher:</p>\n\n<pre><code>./vc caesArandAbrAcaDabRa\nEnter a string to be encrypted: \nIt is reported that Caesar said \"Veni, vidi, vici\" when he conquered Britain.\nKt mk rvpbutfu tjaw Cbvscr wsiu \"Vrqi, wzdk, vlcj\" nhgn lw cfndxesvd Drltbzn.\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 2795300, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f6e7cba374ce14670baea9782273faeb?s=128&d=identicon&r=PG&f=1", "display_name": "HakBon", "link": "https://stackoverflow.com/users/2795300/hakbon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 663, "favorite_count": 0, "accepted_answer_id": 34915180, "answer_count": 1, "score": -1, "last_activity_date": 1472454164, "creation_date": 1453323623, "last_edit_date": 1472454164, "question_id": 34910414, "link": "https://stackoverflow.com/questions/34910414/vigenere-cipher-only-works-up-until-dealing-with-a-space-in-c-why", "title": "Vigenere Cipher only works up until dealing with a space(&quot; &quot;) in C - why?", "body": "<pre><code> #include &lt;stdio.h&gt;\n #include &lt;cs50.h&gt;\n #include &lt;string.h&gt;\n #include &lt;stdlib.h&gt;\n #include &lt;ctype.h&gt;\n\n int main(int argc, string argv[])\n {\n      string k = argv[1];\n      string s = GetString();\n      int l = strlen(k);\n\n      for(int i = 0, n = strlen(s); i &lt; n; i++)\n      {\n          if(s[i] &gt;= 65 &amp;&amp; s[i] &lt;= 90)\n          {\n              int i2 = ((s[i]-65) + (k[i%l]-97)) % 26;\n              printf(\"%c\", i2+65);\n          } else if(s[i] &gt;= 97 &amp;&amp; s[i] &lt;= 122)\n          {\n              int i2 = ((s[i]-97) + (k[i%l]-97)) % 26;\n              printf(\"%c\", i2+97);\n          } else\n          {\n              printf(\"%c\", s[i]);\n          }\n      }\n      printf(\"\\n\");\n      return 0;\n }\n</code></pre>\n\n<p>I have removed as many parts as I can in order to make the code more relevant to the question. Basically why does this code work when \"s\" does not have any space(\" \") in it and doesn't when \"s\" consists of space(\" \")?</p>\n\n<p>As most of you may know the idea is the argument entered at argv[1] is the \"keyword\" for the cipher. User then inputs a \"plain-text\" to cipher (s). It works when I try with various words or sentences if it doesn't include any space, \" \". I just don't understand the logic behind this. Why does the cycle break if <code>s[i]</code> is not one of the first two conditions - I would have thought that \"else\" condition would work.</p>\n\n<p>I would really appreciate it if someone can shed some light on this - many thanks in advance!</p>\n\n<p>ps: I know there are some extra libraries at the top and the user input at <code>argv[1]</code> is not verified via <code>isalpha()</code>. I just want to understand the cycle process better for now, I have those checks in another file ready.</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1453321688, "post_id": 34909789, "comment_id": 57555386, "body": "<code>scanf(&quot;%f&quot;,d[i].mark);</code> --&gt; <code>scanf(&quot;%f&quot;, &amp;d[i].mark);</code>,  <code>free(date);</code> --&gt; <code>free(d);</code>"}, {"owner": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "edited": false, "score": 0, "creation_date": 1453321749, "post_id": 34909789, "comment_id": 57555418, "body": "Learn to format your code well. Everyone you work with will thank you for it. Example: <code>for(i = 0; i &lt; n; i++)</code>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1453321934, "post_id": 34909789, "comment_id": 57555533, "body": "Usual hints: compile with all warnings &amp; debug info (<code>gcc -Wall -Wextra -g</code>) then <b>use the debugger</b> (<code>gdb</code>) &amp; <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a>."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 5, "last_activity_date": 1453321956, "last_edit_date": 1453321956, "creation_date": 1453321763, "answer_id": 34909888, "question_id": 34909789, "link": "https://stackoverflow.com/questions/34909789/program-crashes-when-reading-first-data-point/34909888#34909888", "title": "Program crashes when reading first data point", "body": "<p>The crash is most likely due to this:</p>\n\n<pre><code>    scanf(\"%f\",d[i].mark);\n</code></pre>\n\n<p>You should pass the <em>address</em> as argument to read a float value. It should be:</p>\n\n<pre><code>    scanf(\"%f\", &amp;d[i].mark);\n</code></pre>\n\n<p>Technically, this is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\"><em>undefined behaviour.</em></a>.</p>\n\n<p>Compile with all warnings enabled. gcc warns even without any specific options:</p>\n\n<blockquote>\n  <p>warning: format %f expects argument of type \u00e2float *\u00e2, but argument 2 has type double [-Wformat=]<br>\n           scanf(\"%f\",d[i].mark);</p>\n</blockquote>\n"}], "owner": {"reputation": 21, "user_id": 5817963, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-M3GDm34m00E/AAAAAAAAAAI/AAAAAAAAAJQ/A8aMlC0lp8U/photo.jpg?sz=128", "display_name": "Rapper Bless", "link": "https://stackoverflow.com/users/5817963/rapper-bless"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453321956, "creation_date": 1453321493, "last_edit_date": 1453321849, "question_id": 34909789, "link": "https://stackoverflow.com/questions/34909789/program-crashes-when-reading-first-data-point", "title": "Program crashes when reading first data point", "body": "<p>I want to see what student have the best mark in the class.\nSo I make this ,but i don't know where I am wrong</p>\n\n<pre><code>struct Date {\n    char name[31];\n    float mark;\n};\n\nstruct Date * Read(unsigned int n,struct Date *d){\n\n    int i;\n\n    for(i=0;i&lt;n;i++){\n        getchar();\n        fgets(d[i].name, 31, stdin);\n        scanf(\"%f\",d[i].mark);\n\n    }\n    return  d;\n\n\n}\n\nint main(){\n\n    unsigned int n;\n    struct Date  *d;\n\n    scanf(\"%u\",&amp;n);\n    d = (struct Date*) malloc(n*sizeof(struct Date));\n    d=Read(n,d);\n\n\n    free(date);\n\n    return 0;\n}\n</code></pre>\n\n<p>after i read the mark the program crash.\nCan someone help me and explain what to change?\nThanks a lot.</p>\n"}, {"tags": ["c", "visual-studio", "compilation", "server", "external"], "comments": [{"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 1, "creation_date": 1453321127, "post_id": 34909517, "comment_id": 57555057, "body": "Visual Studio is an <i>IDE</i>, not a compiler. It comes with a compiler that targets Windows, not Linux. It is possible to acquire a Linux compiler that runs on Windows, and it is possible to configure your VS project to use that compiler. How to do these things is much too broad for Stack Overflow. You might google &quot;linux compiler in visual studio&quot;, which appears to have many relevant links."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1453321550, "post_id": 34909517, "comment_id": 57555300, "body": "<i>&quot;Our tutor told us we should always use the server to compile and test our program to make sure its working correctly.&quot;</i> You were not clear whether C code would not compile on the uni server, or would compile but not run, or locally compiled code would not run. If only you had made periodic tests on the server as work proceeded..."}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 1, "creation_date": 1453321611, "post_id": 34909517, "comment_id": 57555338, "body": "Do you mean doing thing like this ? <a href=\"http://stackoverflow.com/questions/15236389/visual-studio-remote-compile-and-run\" title=\"visual studio remote compile and run\">stackoverflow.com/questions/15236389/&hellip;</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1453324921, "post_id": 34909517, "comment_id": 57557223, "body": "You should consider installing Linux on your own laptop. It is a very good environment to learn programming. Linux being mostly free software, you&#39;ll learn a lot studying their source code and improving some of them."}], "answers": [{"comments": [{"owner": {"reputation": 134, "user_id": 5196012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/518f0b3ea29e686931553e2aa977e336?s=128&d=identicon&r=PG&f=1", "display_name": "t0b4cc0", "link": "https://stackoverflow.com/users/5196012/t0b4cc0"}, "edited": false, "score": 0, "creation_date": 1453327427, "post_id": 34911159, "comment_id": 57558613, "body": "installing this extension throws this error message: This extension cannot be installed because the following references are missing: - Microsoft.VisualStudio.Android.VC                          Microsoft Visual Studio Emulator for Android requires Windows 8. I guess I just use Putty and the command line (wich is sad because the debugging in VS is awesome) thanks tho!"}, {"owner": {"reputation": 316, "user_id": 4589867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5rdCG.jpg?s=128&g=1", "display_name": "ab.", "link": "https://stackoverflow.com/users/4589867/ab"}, "reply_to_user": {"reputation": 134, "user_id": 5196012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/518f0b3ea29e686931553e2aa977e336?s=128&d=identicon&r=PG&f=1", "display_name": "t0b4cc0", "link": "https://stackoverflow.com/users/5196012/t0b4cc0"}, "edited": false, "score": 0, "creation_date": 1453335174, "post_id": 34911159, "comment_id": 57561705, "body": "Hmm, I&#39;m guessing the &quot;requires Windows 8&quot; is for Hyper-V for emulated Android VMs, whereas you really just need the VS extension bits. If you can convince those to install somehow, it might still work."}], "tags": [], "owner": {"reputation": 316, "user_id": 4589867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5rdCG.jpg?s=128&g=1", "display_name": "ab.", "link": "https://stackoverflow.com/users/4589867/ab"}, "is_accepted": true, "score": 0, "last_activity_date": 1453326100, "creation_date": 1453326100, "answer_id": 34911159, "question_id": 34909517, "link": "https://stackoverflow.com/questions/34909517/visualstudio-how-to-run-and-compile-c-on-linux-server/34911159#34911159", "title": "VisualStudio - how to run and compile C on linux server", "body": "<p>Visual Studio has a GDB extension for remote debugging on Linux. Instructions are in <a href=\"http://blogs.msdn.com/b/vcblog/archive/2015/11/18/announcing-the-vs-gdb-debugger-extension.aspx\" rel=\"nofollow\">the blog post here</a>... basically, the copy-the-files-over-and-build part of the process is automated using putty. Somewhat cumbersome (for larger projects a file share is probably more appropriate) but it seems to work.</p>\n"}], "owner": {"reputation": 134, "user_id": 5196012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/518f0b3ea29e686931553e2aa977e336?s=128&d=identicon&r=PG&f=1", "display_name": "t0b4cc0", "link": "https://stackoverflow.com/users/5196012/t0b4cc0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 554, "favorite_count": 0, "accepted_answer_id": 34911159, "answer_count": 1, "score": -1, "last_activity_date": 1453327044, "creation_date": 1453320500, "last_edit_date": 1453327044, "question_id": 34909517, "link": "https://stackoverflow.com/questions/34909517/visualstudio-how-to-run-and-compile-c-on-linux-server", "title": "VisualStudio - how to run and compile C on linux server", "body": "<p>We have had a group project in C (writing a compiler for brainfuck language). We had a pretty good project (with breakpoints, etc) but we ultimately failed the assignment because our code wouldnt run on the testsystem the university uses. Its a linux system.</p>\n\n<p>Our tutor told us we should always use the server to compile and test our program to make sure its working correctly.</p>\n\n<p>Now I asked her if its possible to compile and run the file on the server from Visual Studio, she said probably, and mentioned that in her (linux based) IDE its possible. (normally we copy over the file with filezilla, then from a sftp connection console access the server and compile and run our program on it wich is tedious, so much that one of us wrote a script that does this.... but at some point we ignored it and just debugged from visual studio)</p>\n\n<p>Is it possible to use a directory of the server as working directory and when I hit \"start debug\" it opens a console but connected to the server where some parameters to compile and execute will be used?</p>\n\n<p>I couldnt find anything on the web about this topic, maybe I dont know what im looking for / what this is called.</p>\n\n<p>PS: I use VS2015, they probably do too.</p>\n\n<p>@Basile Starynkevitch</p>\n\n<p>ah yes, I love linux, in fact the last 2 people that came to me for laptop help I \"talked into linux\", and if I ever have to setup my pc new I'll also use it. but for now I dont want to change anything to my pc since its totally bloated with stuff and a windows partition and im scared to change anything.</p>\n\n<p>@mikedu95\nthat was what i was looking for. in the linked thread the only solution was WinGDB wich costs up to 90 bucks per head. i think we will use a good ol script.</p>\n\n<p>@Weather Vane \nThe program does compile but doesnt run well / fails every testcase. (she even told us exactly what the differences are, why the problems have occured) we did do periodic tests, but the endphase was pretty heated (3 day coding weekend till 3 in the night) and for the last hours we didnt have time for testing on the server (if only we knew how different it runs on linux...)</p>\n\n<p>@mah \nI did not ask to use a linux compiler in VS but to use the compiler that is on our server from VS. i know what a compiler and what an ide is</p>\n"}, {"tags": ["c", "debugging", "gcc", "visual-studio-2015", "console-application"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453320059, "post_id": 34909324, "comment_id": 57554458, "body": "Trying to use 2 debugging tools at the same time?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 2, "creation_date": 1453320066, "post_id": 34909324, "comment_id": 57554465, "body": "I suspect <code>-mwindows</code> sets the subsystem field in the PE header to &quot;GUI&quot;. How about you use <code>AllocConsole</code> at runtime and redirect <code>stdout</code> to be able to print? That might help. See here: <a href=\"http://stackoverflow.com/questions/311955/redirecting-cout-to-a-console-in-windows\" title=\"redirecting cout to a console in windows\">stackoverflow.com/questions/311955/&hellip;</a> (the question is about C++&#39;s <code>std::cout</code> but it also has a C solution)."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1453320576, "post_id": 34909324, "comment_id": 57554746, "body": "@WeatherVane : GDB is now supported by Visual Studio. I suggest you look at <a href=\"http://blogs.msdn.com/b/vcblog/archive/2015/11/18/announcing-the-vs-gdb-debugger-extension.aspx\" rel=\"nofollow noreferrer\">this blog post</a>. The VS debugger has a lot of great features, so it&#39;s good that it now supports being a GDB front-end.  My problem, though, is not with the actual debugging, which works great. I would just like to see my console output in a readable way."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 2, "creation_date": 1453320854, "post_id": 34909324, "comment_id": 57554897, "body": "@szczurcio : Using AllocConsole adds a dependency on window.h to my project. I&#39;d prefer if the solution didn&#39;t involve adding WinAPI code."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1453321315, "post_id": 34909324, "comment_id": 57555169, "body": "@MartinV&#233;ronneau Oh, okay then. I assumed you were using <code>Windows.h</code> because you are doing Windows programming."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 3, "creation_date": 1453321946, "post_id": 34909324, "comment_id": 57555539, "body": "@szczurcio : That wasn&#39;t expressly stated, but it&#39;s cross-plateform development. I&#39;m just using VS2015 under Windows."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 1, "creation_date": 1453335608, "post_id": 34909324, "comment_id": 57561830, "body": "On Windows, AllocConsole is the only way for a GUI application to get a console window.  If you need cross-platform compatibility, you&#39;ll have to hide that detail in an abstraction."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1453335674, "post_id": 34909324, "comment_id": 57561854, "body": "The other option is to build your application as a console application, since console applications can create GUI windows."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 2, "creation_date": 1453386537, "post_id": 34909324, "comment_id": 57586257, "body": "@AdrianMcCarthy That&#39;s what I&#39;m doing when I omit the -mwindows parameter. Keep in mind, as I said, that I have a working console, as long as I don&#39;t run from Visual Studio."}, {"owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 0, "creation_date": 1453391679, "post_id": 34909324, "comment_id": 57589943, "body": "Have you looked in `Menu-&gt;Tools-&gt;Options...&quot; then &quot;Debugging&quot; for some setting which might control this?"}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 2, "creation_date": 1453393074, "post_id": 34909324, "comment_id": 57590905, "body": "@Ben Yes I did. The only settings I thought would be helpful was &quot;Redirect all Output Window text to the Immediate Window&quot;. Unfortunately, the Immediate Windows has the same probleme than the Debug Console, so I reverted the option back. From my search in SO, I understand the console is supposed to be used for debugging variables, so it gets a special formatting to support that. Why in blazes did Microsoft thought it could replace a proper console is beyond me..."}, {"owner": {"reputation": 6218, "user_id": 20392, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9167d52e6cf674d8af8f4280a5c9e059?s=128&d=identicon&r=PG", "display_name": "rep_movsd", "link": "https://stackoverflow.com/users/20392/rep-movsd"}, "edited": false, "score": 1, "creation_date": 1462051864, "post_id": 34909324, "comment_id": 61478193, "body": "Maybe write to a file and use tail on it from elsewhere"}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 6218, "user_id": 20392, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9167d52e6cf674d8af8f4280a5c9e059?s=128&d=identicon&r=PG", "display_name": "rep_movsd", "link": "https://stackoverflow.com/users/20392/rep-movsd"}, "edited": false, "score": 1, "creation_date": 1462210993, "post_id": 34909324, "comment_id": 61531171, "body": "That&#39;s a good workaround, @rep_movsd. Thanks! But I&#39;d much prefer Visual Studio to not try to be clevere than me."}, {"owner": {"reputation": 2387, "user_id": 3818191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aca92340c2b2e2bb08aeb1441914e929?s=128&d=identicon&r=PG&f=1", "display_name": "JCx", "link": "https://stackoverflow.com/users/3818191/jcx"}, "edited": false, "score": 0, "creation_date": 1462826879, "post_id": 34909324, "comment_id": 61791135, "body": "The framework I use a lot calls &quot;<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363362%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>&quot; OutputDebugString to handle printing to the VS output window and successfully handles a \\n.  Maybe that&#39;ll help?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1465312956, "post_id": 34909324, "comment_id": 62843746, "body": "Add an option to your program to <code>popen</code> a logger (another configurable program) and output to the resulting <code>FILE</code>. A logger can be a one-line shell script, or it can be as complicated as you need.  Now if you want to change logging behaviour, you only need to substitute the right logger without touching the main program."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1465313156, "post_id": 34909324, "comment_id": 62843891, "body": "@n.m. That&#39;s actually pretty clever, and I think I&#39;ll use this approach in the future."}], "answers": [{"comments": [{"owner": {"reputation": 26602, "user_id": 761095, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/6qOuP.png?s=128&g=1", "display_name": "bahrep", "link": "https://stackoverflow.com/users/761095/bahrep"}, "edited": false, "score": 0, "creation_date": 1468846911, "post_id": 37682799, "comment_id": 64280366, "body": "Is there a public issue ID? E.g. a URL to the issue report."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 26602, "user_id": 761095, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/6qOuP.png?s=128&g=1", "display_name": "bahrep", "link": "https://stackoverflow.com/users/761095/bahrep"}, "edited": false, "score": 0, "creation_date": 1468849969, "post_id": 37682799, "comment_id": 64282668, "body": "Unfortunately, not one that I&#39;m aware of. The discussion with the PM Manager (sic) was very formal. I was glad he reached out, though. This shows that you can actually get something out of sending feedback by VS."}, {"owner": {"reputation": 26602, "user_id": 761095, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/6qOuP.png?s=128&g=1", "display_name": "bahrep", "link": "https://stackoverflow.com/users/761095/bahrep"}, "edited": false, "score": 0, "creation_date": 1468850053, "post_id": 37682799, "comment_id": 64282732, "body": "I just thought about some issue entry like this one <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/807715/making-any-change-to-a-resource-only-dll-project-causes-a-dialog-definition-to-change-an-become-invalid\" rel=\"nofollow noreferrer\">connect.microsoft.com/VisualStudio/feedback/details/807715/&hellip;</a>"}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 26602, "user_id": 761095, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/6qOuP.png?s=128&g=1", "display_name": "bahrep", "link": "https://stackoverflow.com/users/761095/bahrep"}, "edited": false, "score": 0, "creation_date": 1468850437, "post_id": 37682799, "comment_id": 64283015, "body": "No, there is nothing like that."}], "tags": [], "owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "is_accepted": true, "score": 1, "last_activity_date": 1465311423, "creation_date": 1465311423, "answer_id": 37682799, "question_id": 34909324, "link": "https://stackoverflow.com/questions/34909324/visual-studio-2015-stealing-the-applications-console/37682799#37682799", "title": "Visual Studio 2015 &quot;stealing&quot; the application&#39;s console", "body": "<p>I was contacted by a Senior PM Manager for Visual Studio at Microsoft regarding this issue. I posted it as a \"feedback\" inside Visual Studio, about four months ago (around the time I posted it here)..</p>\n\n<p>He acknowledged the problem, and said they're gonna try to add support for external consoles with Update 3.</p>\n"}], "owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 3, "accepted_answer_id": 37682799, "answer_count": 1, "score": 13, "last_activity_date": 1478376349, "creation_date": 1453319779, "last_edit_date": 1478376349, "question_id": 34909324, "link": "https://stackoverflow.com/questions/34909324/visual-studio-2015-stealing-the-applications-console", "title": "Visual Studio 2015 &quot;stealing&quot; the application&#39;s console", "body": "<p>I'm developing a gcc application using Visual Studio 2015 as an IDE. The debugger is gdb.</p>\n\n<p>The application creates it's own window. When I compile with a DEBUG switch, I need the application to also spawn a console window. It's used for debugging and outputing printf's from multiple threads. Thanks to the \"-mwindows\" switch, this works correctly when I execute the application from outside Visual Studio.</p>\n\n<p>Unfortunately, when I run the application from within Visual Studio, it seem to steal the console window. No console is spawned, and the printf's output are redirected to the <em>Output Debug</em> window.</p>\n\n<p>This wouldn't be much of a problem if the VS console actually printed the \"\\n\" correctly instead of stripping them out of the ouput. Everything gets printed on the same line, and the output becomes unreadable. Try as I may, I couldn't get VS to insert a newline in the <em>Output Debug</em> window. I searched online a lot, and this problem seems to be well documented, but I couldn't find a satisfying answer.</p>\n\n<p>At this point, either of these solutions would work for me :</p>\n\n<ol>\n<li>Prevent Visual Studio from stealing the application's console window;</li>\n<li>Add special characters to all my printf in order to make the <em>Output Debug</em> print line feeds and carriage returns.</li>\n</ol>\n\n<p><strong>EDIT :</strong>\nIdeally, the solution should be cross-plateform, in a sense that it should not add dependency to WinAPI.</p>\n\n<p><strong>EDIT2 :</strong>\n\"\\t\" seems to work as intended. Why does \"\\n\" doesn't work? I also tried \"\\r\\n\" to no avail.</p>\n"}, {"tags": ["c++", "c", "linux", "makefile", "linker"], "comments": [{"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1453319357, "post_id": 34909040, "comment_id": 57554108, "body": "I&#39;d recommend adding the minimum set of rules from your makefile that demonstrates this problem, 10 lines max. As is, we&#39;re left speculating on exactly what is in your makefile and if there is an optimal improvement that can be offered. Good luck."}, {"owner": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "edited": false, "score": 0, "creation_date": 1453319387, "post_id": 34909040, "comment_id": 57554127, "body": "Check out this post: <a href=\"http://stackoverflow.com/questions/1904990/what-is-the-difference-between-ld-library-path-and-l-at-link-time\" title=\"what is the difference between ld library path and l at link time\">stackoverflow.com/questions/1904990/&hellip;</a> , where a similar question has been answered"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1453325201, "post_id": 34909040, "comment_id": 57557387, "body": "<code>-L</code> and <code>LD_LIBRARY_PATH</code> affect two very <i>different</i> (but related) operations. Compile-time linking and runtime linking."}], "answers": [{"comments": [{"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1453320674, "post_id": 34909145, "comment_id": 57554802, "body": "Thanks for that. How does the runtime linker know which library to link tho? LD_LIBRARY_PATH only has the path to the library directory and doesn&#39;t name the actual library"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1453320929, "post_id": 34909145, "comment_id": 57554942, "body": "@Engineer999, because the name of the actual .so required by your executable is already recorded in the executable. You can run <code>ldd &lt;your executable&gt;</code> to see which .so&#39;s your file needs, and where runtime linker can find them in the given environment"}, {"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1453321218, "post_id": 34909145, "comment_id": 57555107, "body": "How does my executable know about the .so when I don&#39;t even give it the information at compile time, only the header file is included?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1453321259, "post_id": 34909145, "comment_id": 57555125, "body": "@Engineer999, because you still have -l rule."}, {"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1453323967, "post_id": 34909145, "comment_id": 57556660, "body": "but even when I removed that from the makefile, it still found it"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1453324520, "post_id": 34909145, "comment_id": 57557004, "body": "@Engineer999, no this is not possible."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1453319206, "creation_date": 1453319206, "answer_id": 34909145, "question_id": 34909040, "link": "https://stackoverflow.com/questions/34909040/linker-library-path-in-makefile-confusion/34909145#34909145", "title": "Linker library path in makefile confusion", "body": "<p>There is no mystery here. Default library paths for linker (one you call to make your executable file, for example, <code>ld</code>) and runtime linker (one which is responsible for loading shared libraries when you execute your program, for example, <code>ld.so</code>) are different. Runtime linker uses LD_LIBRARY_PATH, while linker uses whatever was configured when ld was build. </p>\n\n<p>In your case, looks like <code>/usr/local/lib</code> is part of one, but not another.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453319469, "post_id": 34909211, "comment_id": 57554173, "body": "rpath is obsolete and not to be used. Has been for looooong time."}, {"owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453319582, "post_id": 34909211, "comment_id": 57554222, "body": "@SergeyA: Could you elaborate?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453319873, "post_id": 34909211, "comment_id": 57554369, "body": "instead of rpath, one should use runpath - for the reason that the latter can be still overriddent with LD_LIBRARY_PATH, while the former can not."}, {"owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1453320031, "post_id": 34909211, "comment_id": 57554443, "body": "@SergeyA: Well, my <code>man ld</code> says nothing about runpath, so it can&#39;t be obsoleted for looooong time, since my system is not veeeeery old."}, {"owner": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453320054, "post_id": 34909211, "comment_id": 57554457, "body": "@SergeyA could you back up that claim with a reference? I think it&#39;s <i>not</i> deprecated"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "edited": false, "score": 1, "creation_date": 1453320109, "post_id": 34909211, "comment_id": 57554491, "body": "@lima.sierra, of course I can. Here is the copy-paste from man ld.so: <code>(ELF  only)  Using  the directories specified in the DT_RPATH dynamic section attribute of the binary if present and DT_RUNPATH attribute does not exist.  Use of DT_RPATH is  deprecated.</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453320374, "post_id": 34909211, "comment_id": 57554632, "body": "@nsilent22, from here, for example: <a href=\"http://man7.org/linux/man-pages/man8/ld.so.8.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man8/ld.so.8.html</a> or any other link."}, {"owner": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453320564, "post_id": 34909211, "comment_id": 57554737, "body": "@SergeyA yep, seems you&#39;re right! @nsilent22 have a look at <code>man 8 ld.so</code> (mine is from 2015-12-28) :)"}, {"owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453320771, "post_id": 34909211, "comment_id": 57554851, "body": "@SergeyA: Ok, so maybe it&#39;s time to upgrade my Ubuntu 12.04 :)"}, {"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1453320841, "post_id": 34909211, "comment_id": 57554887, "body": "why does runpath, rpath or LD_LIBRARY_PATH only need the path to the directory containing the libraries , and not the exact library specified?"}, {"owner": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "edited": false, "score": 0, "creation_date": 1453320879, "post_id": 34909211, "comment_id": 57554911, "body": "@nsilent22 could you edit your post and add a deprecation warning?"}], "tags": [], "owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "is_accepted": false, "score": 2, "last_activity_date": 1453321242, "last_edit_date": 1453321242, "creation_date": 1453319405, "answer_id": 34909211, "question_id": 34909040, "link": "https://stackoverflow.com/questions/34909040/linker-library-path-in-makefile-confusion/34909211#34909211", "title": "Linker library path in makefile confusion", "body": "<p>Compile your program with <code>-Wl,-rpath=/usr/local/lib</code>. This way you'll add /usr/local/lib to runtime library search patch of your program and you won't need the LD_LIBRARY_PATH<br>\n<strong>Warning</strong>: since modern dynamic linkers consider <code>rpath</code> as deprecated you can set also <code>runpath</code> (which supersedes it) by specifying <code>-Wl,-rpath=/usr/local/lib,--enable-new-dtags</code></p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 0, "last_activity_date": 1453320588, "creation_date": 1453320588, "answer_id": 34909538, "question_id": 34909040, "link": "https://stackoverflow.com/questions/34909040/linker-library-path-in-makefile-confusion/34909538#34909538", "title": "Linker library path in makefile confusion", "body": "<p>If you're using static linking, all you have to do is tell the linker where your library is at compile/link time.  The library (or as much of it as is necessary) gets copied into your executable, and your executable is standalone.</p>\n\n<p>But for various reasons, these days we generally use dynamic linking, not static linking.  With dynamic linking, you have to tell the linker where to find the library at compile/link time, <em>and</em> the dynamic linker (<code>ld.so</code>) has to be able to find the library at run time.</p>\n\n<p>If the library was in one of the standard places (<code>/lib</code>, <code>/usr/lib</code>, etc.) there's no problem.  But if you linked against a library in a nonstandard place, in general, you have to add that nonstandard place to your LD_LIBRARY_PATH, so that the runtime linker will always be able to find it.</p>\n"}, {"comments": [{"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1453324576, "post_id": 34909759, "comment_id": 57557024, "body": "This might be a question for somewhere else, but how does the executable decide whether to use the static library provided or the shared library?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "reply_to_user": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 1, "creation_date": 1453325303, "post_id": 34909759, "comment_id": 57557444, "body": "@Engineer999 The application doesn&#39;t decide anything. The runtime linker does. With a statically linked library (at compile time) there is no runtime linking of shared objects to be done for that library at all."}], "tags": [], "owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "is_accepted": false, "score": 5, "last_activity_date": 1453321366, "creation_date": 1453321366, "answer_id": 34909759, "question_id": 34909040, "link": "https://stackoverflow.com/questions/34909040/linker-library-path-in-makefile-confusion/34909759#34909759", "title": "Linker library path in makefile confusion", "body": "<p>compilation and running are different things. :)</p>\n\n<p>1) A make file contains rules on how to build your application.  So when you write a rule like:</p>\n\n<pre><code>    -L/usr/local/lib -lxerces-c-3.1\n</code></pre>\n\n<p>You are passing options to the linker.  The <code>-L</code> option tells the linker to add additional libraries (in this case '/usr/local/lib') to the linker's search path.  The <code>-l</code> option names the library that should be linked in.</p>\n\n<p>2) When you go to run an executable, the loader needs to find all the required libraries.  For example, on a Linux system you can use the ldd command to see what shared libraries are used.  For example on my system:</p>\n\n<pre><code>ldd FEParser\n    linux-vdso.so.1 =&gt;  (0x00007ffcdc7c9000)\n    libstdc++.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f835b143000)\n    libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f835ae3d000)\n    libgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f835ac27000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f835a862000)\n/lib64/ld-linux-x86-64.so.2 (0x00007f835b447000)\n</code></pre>\n\n<p>From this, you can see the name of the library that is linked to the left of the '=>' token, and the path to the library to the right.  If a library is not found it will show up as missing.</p>\n\n<p>Now in your case, you were able to successfully compile and link your program due to giving the path and library name to use.  You were not able to run the program due to the loader not being able to find the library at run time.</p>\n\n<p>You have several options here:</p>\n\n<p>1) you can move the library in a directory that is in the loaders search path.</p>\n\n<p>2) you can modify <code>LD_LIBRARY_PATH</code> which adds additional directories to the loaders search path.  Additionally, the directories specified in <code>LD_LIBRARY_PATH</code> will be passed to the linker (it will be appended after all <code>-L</code> flags).  You do need to be careful with this, as if you set it globally (say in <code>.bashrc</code>), then it will effect all compilations that you do.  You may or may not want this behavior. </p>\n\n<p>3) As others have specified you can use <code>-Wl,rpath=....</code>, but it is deprecated, and I rarely use it.</p>\n\n<p>4) If you need the library installed in an unusual location, you can add a create a file under <code>/etc/ld.so.conf.d</code> that contains, for example (file is yaml.conf):</p>\n\n<pre><code># yaml default configuration\n/opt/yaml/lib\n</code></pre>\n\n<p>At system boot, the loader reads all the files in this directory and appends the paths to the loader path.  If you make a modification to this directory you can use the <code>ldconfig</code> command to cause the loader to reprocess <code>/etc/ld.so.con.d</code>.  N.B.  I know this works on centOS and Ubuntu flavors of GNU/Linux - can't speak authoritatively on other flavors.</p>\n"}], "owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7291, "favorite_count": 4, "answer_count": 4, "score": 1, "last_activity_date": 1453321366, "creation_date": 1453318835, "question_id": 34909040, "link": "https://stackoverflow.com/questions/34909040/linker-library-path-in-makefile-confusion", "title": "Linker library path in makefile confusion", "body": "<p>I've been programming a while but I still don't fully understand how the linker behaves.</p>\n\n<p>For example, today I downloaded and installed a library that I want to use in my application in Linux. (It was Xerces - for parsing XML files).</p>\n\n<p>I created a makefile and gave it the path to the .so and .a files in my command : -L/usr/local/lib and also told it the name of the library to include : -lxerces-c-3.1. </p>\n\n<p>My application compiled fine but failed during runtime with \"cannot open shared object file libxerces-c-3.1.so\". Why would this be the case, when I properly give it the path and name in the makefile?</p>\n\n<p>I then added the library path to the LD_LIBRARY_PATH variable in my .bashrc file and then it worked. That's fine , but if I now remove the path to the library in my makefile and don't even include the name of the library , it still works.</p>\n\n<p>I'm confused as to what is going on here. How can it still find the correct library just by assigning the path to the LD_LIBRARY_PATH variable and will only work if I do so? I have read elsewhere to not even use LD_LIBRARY_PATH. </p>\n\n<p>I appreciate any answer for this. The question is a bit long and hopefully not off-topic but I hope others can learn from it too. Thanks</p>\n"}, {"tags": ["c", "escaping", "printf", "gcc-warning"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1453318720, "post_id": 34908971, "comment_id": 57553761, "body": "I don&#39;t know of any working reference as in <code>C11</code> standard. can you link to the man page please?"}, {"owner": {"reputation": 1287, "user_id": 5767099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1144731518892203/picture?type=large", "display_name": "Claudio Cortese", "link": "https://stackoverflow.com/users/5767099/claudio-cortese"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1453318957, "post_id": 34908971, "comment_id": 57553883, "body": "@SouravGhosh <a href=\"http://linux.die.net/man/1/printf\" rel=\"nofollow noreferrer\">linux.die.net/man/1/printf</a>, it&#39;s also listed when I type man printf in a terminal."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1453319074, "post_id": 34908971, "comment_id": 57553952, "body": "isn&#39;t manpage 1 is for commands? Just saying, I did not see anything on man 3"}, {"owner": {"reputation": 1287, "user_id": 5767099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1144731518892203/picture?type=large", "display_name": "Claudio Cortese", "link": "https://stackoverflow.com/users/5767099/claudio-cortese"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1453319261, "post_id": 34908971, "comment_id": 57554051, "body": "@SouravGhosh Yes, I found it on manpage 1. If this can help I have tested it both on Ubuntu and on Elementary OS (lastest version)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453319419, "post_id": 34908971, "comment_id": 57554137, "body": "MSVC gives <i>&quot;warning C4129: &#39;c&#39; : unrecognized character escape sequence&quot;</i>"}, {"owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "edited": false, "score": 2, "creation_date": 1453319864, "post_id": 34908971, "comment_id": 57554365, "body": "Man page for printf C function is <code>man 3 printf</code>. What you&#39;ve seen is man for <code>printf</code> unix command."}, {"owner": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 1, "creation_date": 1453319994, "post_id": 34908971, "comment_id": 57554425, "body": "I tried using <code>\\c</code> in dash and bash and both of them print literally &quot;\\c&quot;.  zsh however does stop printing like the documentation says.  I guess there&#39;s a bash built-in printf because <code>&#47;usr&#47;bin&#47;printf</code> works (which I guess is what zsh is using?)."}], "answers": [{"comments": [{"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1453321165, "post_id": 34909408, "comment_id": 57555082, "body": "Great summary! Where did you get it?"}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1453321429, "post_id": 34909408, "comment_id": 57555231, "body": "I thought it, but there isn&#39;t on OS X. Maybe I should consider to switch back to linux ..."}, {"owner": {"reputation": 1287, "user_id": 5767099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1144731518892203/picture?type=large", "display_name": "Claudio Cortese", "link": "https://stackoverflow.com/users/5767099/claudio-cortese"}, "edited": false, "score": 2, "creation_date": 1453321820, "post_id": 34909408, "comment_id": 57555460, "body": "That&#39;s the kind of answer I love to see here on SO. Really, thank you for your time."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 7, "last_activity_date": 1453320830, "last_edit_date": 1453320830, "creation_date": 1453320091, "answer_id": 34909408, "question_id": 34908971, "link": "https://stackoverflow.com/questions/34908971/c-escape-sequence-listed-in-man-but-unkown-in-c/34909408#34909408", "title": "\\c escape sequence listed in man but unkown in C", "body": "<p>You are <em>not</em> reading the correct man page. What you are looking at is: <code>man 1 printf</code>, which is about the shell command <code>printf</code>, not the C standard function printf.</p>\n\n<p>Use:</p>\n\n<pre><code> man 3 printf\n</code></pre>\n\n<p>to read about the C library function. <code>\\c</code> is not in C and hence, it's not recognized by <code>printf(3)</code>.</p>\n\n<p>The <code>printf(1)</code> you are looking at does work as documented.</p>\n\n<pre><code>$ /usr/bin/printf \"ABC\\chi\"\n</code></pre>\n\n<p>produces:</p>\n\n<pre><code>ABC\n</code></pre>\n\n<p>Note that the Linux man pages in general may also have additional non-standard extensions (specific to Linux or glibc) and POSIX extensions etc. Non-standard extensions are usually documented as such but easy to miss. So if you are looking for what C standard says then you should look at the C standard. Here's an <a href=\"http://port70.net/~nsz/c/c11/n1570.html#5.2.2\" rel=\"noreferrer\">online draft</a>.</p>\n\n<p>If you are wondering what the <em>number</em> passed to <code>man</code> is, it's the <em>section</em> number. <code>3</code> corresponds to library function. You can find details with: <code>man man</code>.\nHere's summary of the sections:</p>\n\n<blockquote>\n<pre><code>   1   Executable programs or shell commands\n   2   System calls (functions provided by the kernel)\n   3   Library calls (functions within program libraries)\n   4   Special files (usually found in /dev)\n   5   File formats and conventions eg /etc/passwd\n   6   Games\n   7   Miscellaneous (including macro packages and conventions), e.g. man(7), groff(7)\n   8   System administration commands (usually only for root)\n   9   Kernel routines [Non standard]\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 1287, "user_id": 5767099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1144731518892203/picture?type=large", "display_name": "Claudio Cortese", "link": "https://stackoverflow.com/users/5767099/claudio-cortese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 0, "accepted_answer_id": 34909408, "answer_count": 1, "score": 5, "last_activity_date": 1453320830, "creation_date": 1453318615, "last_edit_date": 1495540321, "question_id": 34908971, "link": "https://stackoverflow.com/questions/34908971/c-escape-sequence-listed-in-man-but-unkown-in-c", "title": "\\c escape sequence listed in man but unkown in C", "body": "<p><strong><em>I'm currently studying C, if this question seems an easy one or a newbie ones, then you know why.</em></strong></p>\n\n<p>Reading the <a href=\"http://linux.die.net/man/1/printf\" rel=\"nofollow noreferrer\">man page</a> for <em>printf</em> I found <strong><em>\\c</em></strong> listed as an <strong>escape sequence.</strong> Its description is </p>\n\n<blockquote>\n  <p>produce no further output</p>\n</blockquote>\n\n<p>I've never seen and heard about <strong><em>\\c</em></strong> prior to this moment. So I decided to try it out in a simple hello world program :</p>\n\n<pre><code>printf(\"\\nHello World\\n\\n\\c\");\n</code></pre>\n\n<p>As a result, gcc gives me this warning : </p>\n\n<blockquote>\n  <p>warning: unknown escape sequence: '\\c' [enabled by default]</p>\n</blockquote>\n\n<p>This sounds kind of odd for me, so I went trough it further investigating : I went to <a href=\"https://en.wikipedia.org/wiki/Escape_sequences_in_C\" rel=\"nofollow noreferrer\">Wikipedia</a> and <strong><em>\\c</em></strong> wasn't listed as an escape sequence... Hence I tried searching around the web, and here on stack overflow. I've found very few references to <strong><em>\\c</em></strong> (actually two) as discussed in <a href=\"https://stackoverflow.com/questions/18718787/printf-format-parameter-contain-undefined-escape-character\">this topic</a> and <a href=\"https://stackoverflow.com/questions/7154800/what-is-the-bash-escape-character-c\">this one</a> (I think that the latter isn't really related to C  but it seems that we are talking about \"the same <strong><em>\\c</em></strong>\", reading the description given).\nCould somebody help  me to understand this thing?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1453320649, "post_id": 34908845, "comment_id": 57554789, "body": "I think you need to dereference <code>a</code> and <code>b</code>."}], "answers": [{"comments": [{"owner": {"reputation": 4733, "user_id": 922445, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a469120d35647d9aa50646cb4d778c71?s=128&d=identicon&r=PG&f=1", "display_name": "Nulik", "link": "https://stackoverflow.com/users/922445/nulik"}, "edited": false, "score": 0, "creation_date": 1453322880, "post_id": 34910008, "comment_id": 57556102, "body": "Ohh, I see. compiled it but it doesn&#39;t work , it must return 15 but it returns 0 . Does it work for you?"}, {"owner": {"reputation": 4733, "user_id": 922445, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a469120d35647d9aa50646cb4d778c71?s=128&d=identicon&r=PG&f=1", "display_name": "Nulik", "link": "https://stackoverflow.com/users/922445/nulik"}, "edited": false, "score": 0, "creation_date": 1453324819, "post_id": 34910008, "comment_id": 57557149, "body": "it works, I had to swap a and b. dam it , very poor docs on sse"}], "tags": [], "owner": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "is_accepted": true, "score": 1, "last_activity_date": 1453322209, "creation_date": 1453322209, "answer_id": 34910008, "question_id": 34908845, "link": "https://stackoverflow.com/questions/34908845/compiling-sse-intrinsic-instructions/34910008#34910008", "title": "compiling sse intrinsic instructions", "body": "<p>@FUZxxl is right, the signature of the function is given as:</p>\n\n<pre><code>int _mm_cmpestri (\n   __m128i a, \n   int la,\n   __m128i b,\n   int lb, \n   const int mode\n);\n</code></pre>\n\n<p>So, you need to dereference a and b as:</p>\n\n<pre><code>idx=_mm_cmpestri (*a, 16, *b, 1, _SIDD_UBYTE_OPS |_SIDD_CMP_EQUAL_ANY|_SIDD_LEAST_SIGNIFICANT);\n</code></pre>\n"}], "owner": {"reputation": 4733, "user_id": 922445, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a469120d35647d9aa50646cb4d778c71?s=128&d=identicon&r=PG&f=1", "display_name": "Nulik", "link": "https://stackoverflow.com/users/922445/nulik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 34910008, "answer_count": 1, "score": 0, "last_activity_date": 1453322209, "creation_date": 1453318172, "question_id": 34908845, "link": "https://stackoverflow.com/questions/34908845/compiling-sse-intrinsic-instructions", "title": "compiling sse intrinsic instructions", "body": "<p>I am testing pcmpistr instruction which is a strchr() equivalent in SSE but I get the error on return value, for some reason the compiler thinks that the 'int' type variable 'idx' is a vector, but it is a scalar and it should store the index of the character found in the string. What is the problem here?</p>\n\n<pre><code>[niko@dev1 test]$ cat pcmpistr.c\n#include &lt;nmmintrin.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc,char **argv) {\n    int idx;\n    char str1[16] __attribute__ ((aligned (16))) ={'G','E','T',' ','/','i','n','d','e','x','.','h','t','m','l','\\n'} ;\n    char str2[1]  __attribute__ ((aligned (16))) ={'\\n'};\n    __m128i *a,*b;\n\n    a=(__m128i*) str1;\n    b=(__m128i*) str2;\n    idx=_mm_cmpestri (a, 16, b, 1, _SIDD_UBYTE_OPS |_SIDD_CMP_EQUAL_ANY|_SIDD_LEAST_SIGNIFICANT);\n\n    printf(\"idx=%d\\n\",idx);\n}\n[niko@dev1 test]$ gcc -o pcmpstr pcmpistr.c \npcmpistr.c: In function \u2018main\u2019:\npcmpistr.c:13:2: error: can\u2019t convert value to a vector\n  idx=_mm_cmpestri (a, 16, b, 1, _SIDD_UBYTE_OPS |_SIDD_CMP_EQUAL_ANY|_SIDD_LEAST_SIGNIFICANT);\n  ^\npcmpistr.c:13:2: error: can\u2019t convert value to a vector\n[niko@dev1 test]$ \n</code></pre>\n"}, {"tags": ["c++", "c", "memory", "virtual-memory", "aslr"], "comments": [{"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "edited": false, "score": 13, "creation_date": 1453317931, "post_id": 34908728, "comment_id": 57553283, "body": "For one, ASLR likely contributes \u2013 is it enabled in the kernels on your testing systems?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1453318025, "post_id": 34908728, "comment_id": 57553339, "body": "Yep, this is almost certainly <a href=\"https://en.wikipedia.org/wiki/Address_space_layout_randomization\" rel=\"nofollow noreferrer\">ASLR</a> at work."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "edited": false, "score": 1, "creation_date": 1453318079, "post_id": 34908728, "comment_id": 57553363, "body": "@fish2000, you should certainly add this as an answer with a bit of explanation."}, {"owner": {"reputation": 763, "user_id": 599391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/03b93fefdf9e96bce1e27e0d20b6dc25?s=128&d=identicon&r=PG", "display_name": "Chiubaka", "link": "https://stackoverflow.com/users/599391/chiubaka"}, "edited": false, "score": 2, "creation_date": 1453318875, "post_id": 34908728, "comment_id": 57553840, "body": "Non-deterministic compiler optimizations may also screw with you here."}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453318877, "post_id": 34908728, "comment_id": 57553841, "body": "@SergeyA done, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 6, "creation_date": 1453321391, "post_id": 34909043, "comment_id": 57555208, "body": "Incidentally, ASLR also applies to the stack location, which is why local variables also have different addresses with each execution. Which is really what the question was getting at."}, {"owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "reply_to_user": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 0, "creation_date": 1453321664, "post_id": 34909043, "comment_id": 57555364, "body": "@JordanMelo good point \u2013 I did assume a casual understanding of terms like e.g. \u201cstack\u201d and \u201cheap\u201d in the answer \u2013 but yeah a program\u2019s stack is indeed itself initialized by the memory manager using ASLR and I totally did mean  to mention that fact, thanks"}, {"owner": {"reputation": 2440, "user_id": 2676096, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1178790d916aa2177656a70aba28f86?s=128&d=identicon&r=PG&f=1", "display_name": "Banex", "link": "https://stackoverflow.com/users/2676096/banex"}, "edited": false, "score": 2, "creation_date": 1453328254, "post_id": 34909043, "comment_id": 57559036, "body": "When you talk about ASLR as a security feature, did you mean it protects against stack-based buffer overflows (and not heap)? I guess that&#39;s the major vulnerability it addresses."}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "reply_to_user": {"reputation": 2440, "user_id": 2676096, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1178790d916aa2177656a70aba28f86?s=128&d=identicon&r=PG&f=1", "display_name": "Banex", "link": "https://stackoverflow.com/users/2676096/banex"}, "edited": false, "score": 1, "creation_date": 1539799102, "post_id": 34909043, "comment_id": 92636372, "body": "@Banex: It protects against both.  Local and heap addresses will both vary."}], "tags": [], "owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "is_accepted": true, "score": 11, "last_activity_date": 1453327789, "last_edit_date": 1453327789, "creation_date": 1453318847, "answer_id": 34909043, "question_id": 34908728, "link": "https://stackoverflow.com/questions/34908728/why-the-addresses-of-local-variables-can-be-different-every-time/34909043#34909043", "title": "Why the addresses of local variables can be different every time?", "body": "<p>When allocating on the heap (using the <code>new</code> operator or <code>malloc()</code> and friends), your program has to ask the OS to allocate your heap memory. Lots of behind-the-scenes stuff happens in the OS memory manager (the implementation details of which are mostly above my pay-grade: garbage collection, consolidation of reclaimed memory, etc) and it is a <em>good thing</em> to not have to think about it.</p>\n\n<p>Local variables are allocated on the stack.  Traditionally, stack allocation would be repeatable, but this has changed in recent years.\n<a href=\"https://en.wikipedia.org/wiki/Address_space_layout_randomization\" rel=\"nofollow\">Address space layout randomization</a> (ASR) is a relatively recent innovation in OS memory management, which deliberately makes memory addresses in stack allocations (such as those you have observed) as non-deterministic as possible at runtime. It\u2019s a security feature: this keeps bad actors from exploiting heap buffer overflows, because if the ASLR implementation is entropic enough, who knows what\u2019s going to be there at the end of the overflowing buffer? </p>\n\n<p>The price you pay for this and other memory-management features is control.  Betting on the addresses of allocations on a modern (non-embedded) platform is like playing Powerball: possibly an amusing distraction but not a workable plan for the future. If your code is running on an AVR-ISA platform or somesuch, maybe the odds are closer enough to Blackjack such that someone might be enticed to play to win (so to speak).</p>\n\n<p>Either way I am not a gambling man, personally \u2013 as I often say, gentlemen prefer stack allocation. But that is basically why you are getting those results.</p>\n\n<p>Thanks to @T.C. for the link and @SergeyA for the suggestion.</p>\n"}], "owner": {"reputation": 1523, "user_id": 4713342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/38a9ab324599fd206d89a56dedccd201?s=128&d=identicon&r=PG&f=1", "display_name": "TimeString", "link": "https://stackoverflow.com/users/4713342/timestring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 969, "favorite_count": 0, "accepted_answer_id": 34909043, "answer_count": 1, "score": 8, "last_activity_date": 1488388990, "creation_date": 1453317855, "last_edit_date": 1495540451, "question_id": 34908728, "link": "https://stackoverflow.com/questions/34908728/why-the-addresses-of-local-variables-can-be-different-every-time", "title": "Why the addresses of local variables can be different every time?", "body": "<p>I've asked Google and did some research on StackOverflow. My question is that when I enter the <code>main()</code> function in a C++ program and declare the very first variable, why is it that the address of this variable can vary upon different executions? Please see my example program below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main() {\n    int *a = new int;\n    int *b = new int;\n\n    std::cout &lt;&lt; \"address: \" &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"address of locals: \" &lt;&lt; &amp;a &lt;&lt; \" \" &lt;&lt; &amp;b &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p><strong>Result on execution 1:</strong></p>\n\n<pre><code>address: 0xa32010 0xa32030\naddress of locals: 0x7fff10de2cf0 0x7fff10de2cf8\n</code></pre>\n\n<p><strong>Result on execution 2:</strong></p>\n\n<pre><code>address: 0x1668010 0x1668030\naddress of locals: 0x7ffc252ccd90 0x7ffc252ccd98\n</code></pre>\n\n<p><strong>Result on execution 3:</strong></p>\n\n<pre><code>address: 0x10e0010 0x10e0030\naddress of locals: 0x7ffd3d2cf7f0 0x7ffd3d2cf7f8\n</code></pre>\n\n<p>As you can see, I get different results upon different executions. The first line of the output corresponding to the address of the allocated memory, which should happen in the heap \u2013 if they are assigned different addresses every time, it kinda make sense to me. However, even when I print the addresses of local variables \u2013 corresponding to the second line \u2013 the results are still different.</p>\n\n<p>At first glance, I was thinking it's because the program is printing a physical memory address, but this post, <a href=\"https://stackoverflow.com/questions/24480899/virtual-memory-or-physical-memory\">Virtual Memory or Physical Memory</a>, disproves my initial thought. Is there any reason that, given the programs\u2019 execution is \"the same,\" with no threading, no user inputs, etc, that there are still memory allocations with different addresses?</p>\n\n<p><strong>Testing environment:</strong></p>\n\n<ul>\n<li>Linux 14.04</li>\n<li>Mac OS X 10.10</li>\n</ul>\n"}, {"tags": ["c", "linux", "file"], "comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1453317742, "post_id": 34908588, "comment_id": 57553183, "body": "You can either redirect simply using <code>bash</code>, or you could use <code>freopen</code> to redirect <code>stdout</code> inside your program."}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1453317749, "post_id": 34908588, "comment_id": 57553188, "body": "The most glaring issue is you using <code>100</code> as your buffer to <code>fwrite</code> (the only correct parameter in that call seems to be the <code>1</code>). Is there a reason why you&#39;re trying to do this with pipes instead of opening the file as fd 1 like a shell would?"}, {"owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1453317960, "post_id": 34908588, "comment_id": 57553293, "body": "Sorry, typing mistake, but also using this, it does not write to file. It is a task to use pipes."}], "answers": [{"comments": [{"owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1453317785, "post_id": 34908661, "comment_id": 57553209, "body": "I&#39;m creating a program that should do what the &quot;&gt;&quot; does. Not use it."}, {"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "reply_to_user": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1453317983, "post_id": 34908661, "comment_id": 57553309, "body": "is this helpful? <a href=\"http://stackoverflow.com/questions/584868/rerouting-stdin-and-stdout-from-c\" title=\"rerouting stdin and stdout from c\">stackoverflow.com/questions/584868/&hellip;</a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1453318357, "post_id": 34908661, "comment_id": 57553526, "body": "@OlarAndrei, it sounds like what your want is simply to write all of your output routines with <code>fprintf (fp, &quot;....&quot;);</code> Then in your code, if you read <code>&gt;</code> (or <code>&gt;&gt;</code>) as input, use <code>fopen</code> or <code>freopen</code> with the appropriate <code>mode</code> and take the file name as the next input following <code>&gt;</code> or <code>&gt;&gt;</code>. (or <code>stdout</code> by default)."}, {"owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1453318477, "post_id": 34908661, "comment_id": 57553605, "body": "<code>.&#47;pipetest</code> has  two <code>printf()</code> which I want to redirect to a file and not to my stdout."}], "tags": [], "owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "is_accepted": false, "score": 1, "last_activity_date": 1453317670, "creation_date": 1453317670, "answer_id": 34908661, "question_id": 34908588, "link": "https://stackoverflow.com/questions/34908588/how-to-redirect-program-output-to-text-file/34908661#34908661", "title": "How to redirect program output to text file", "body": "<p>The easiest way is to do this at the bash by calling:</p>\n\n<pre><code>./myprogram &gt; output.txt\n</code></pre>\n\n<p>This will redirect all of the outputs to output.txt</p>\n"}, {"tags": [], "owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "is_accepted": false, "score": 1, "last_activity_date": 1453318458, "creation_date": 1453318458, "answer_id": 34908927, "question_id": 34908588, "link": "https://stackoverflow.com/questions/34908588/how-to-redirect-program-output-to-text-file/34908927#34908927", "title": "How to redirect program output to text file", "body": "<p>You can use <code>freopen</code>, it's probably the simplest way:</p>\n\n<pre><code>if (!freopen(\"out.txt\", \"w\", stdout))\n{\n    // failed to open the file stream, handle the error\n}\n</code></pre>\n\n<p>You can then just use <code>printf</code> to write to that file. You can do the same with <code>stderr</code>, but that's probably a bad idea - by definition <code>stderr</code> is used to report errors, and from what I know the convention is to have it output to console.</p>\n"}, {"tags": [], "owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "is_accepted": true, "score": 5, "last_activity_date": 1453318735, "creation_date": 1453318735, "answer_id": 34909006, "question_id": 34908588, "link": "https://stackoverflow.com/questions/34908588/how-to-redirect-program-output-to-text-file/34909006#34909006", "title": "How to redirect program output to text file", "body": "<p>A good start is not ignoring compiler warnings:</p>\n\n<pre><code>test.c: In function \u2018main\u2019:\ntest.c:42:13: warning: passing argument 4 of \u2018fwrite\u2019 makes pointer from integer without a cast [enabled by default]\n             fwrite(c, 1, sizeof(c), output);\n             ^\nIn file included from test.c:1:0:\n/usr/include/stdio.h:715:15: note: expected \u2018struct FILE * __restrict__\u2019 but argument is of type \u2018int\u2019\n extern size_t fwrite (const void *__restrict __ptr, size_t __size,\n               ^\n</code></pre>\n\n<p><code>int</code> and <code>FILE*</code> are not interchangable. If you use <code>open</code>, write with <code>write</code>. If you use <code>fopen</code>, write with <code>fwrite</code>.</p>\n\n<p>Additionally, you never modify stdout of your process. Instead you modify <code>output</code>, which doesn't make sense. Here are the minimum changes to your code to make it work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;                                                                                                                                                                                                                                                                                                                                                                                                                       \n#include &lt;sys/types.h&gt;                                                                                                                                                                                                                                                                                                                                                                                                                   \n#include &lt;sys/stat.h&gt;                                                                                                                                                                                                                                                                                                                                                                                                                    \n#include &lt;fcntl.h&gt;                                                                                                                                                                                                                                                                                                                                                                                                                       \n#include &lt;unistd.h&gt;                                                                                                                                                                                                                                                                                                                                                                                                                      \n\nint main() {                                                                                                                                                                                                                                                                                                                                                                                                                             \n    int fd[2];                                                                                                                                                                                                                                                                                                                                                                                                                           \n    int processId;                                                                                                                                                                                                                                                                                                                                                                                                                       \n    int output;                                                                                                                                                                                                                                                                                                                                                                                                                          \n    char filename[] = \"output.txt\";                                                                                                                                                                                                                                                                                                                                                                                                      \n\n    if((output = open(filename, O_CREAT | O_WRONLY, S_IRUSR | S_IWUSR)) == -1){                                                                                                                                                                                                                                                                                                                                                          \n        fprintf(stderr, \"Unable to create/open file '%s'\\n\", filename);                                                                                                                                                                                                                                                                                                                                                                  \n        return 1;                                                                                                                                                                                                                                                                                                                                                                                                                        \n    }                                                                                                                                                                                                                                                                                                                                                                                                                                    \n\n    if(pipe(fd) == -1){                                                                                                                                                                                                                                                                                                                                                                                                                  \n        fprintf(stderr, \"Error creating pipe\\n\");                                                                                                                                                                                                                                                                                                                                                                                        \n        return 2;                                                                                                                                                                                                                                                                                                                                                                                                                        \n    }                                                                                                                                                                                                                                                                                                                                                                                                                                    \n\n    if((processId = fork()) == -1){                                                                                                                                                                                                                                                                                                                                                                                                      \n        fprintf(stderr, \"Error forking\\n\");                                                                                                                                                                                                                                                                                                                                                                                              \n        return 3;                                                                                                                                                                                                                                                                                                                                                                                                                        \n    }                                                                                                                                                                                                                                                                                                                                                                                                                                    \n\n    if(processId == 0){                                                                                                                                                                                                                                                                                                                                                                                                                  \n        int newFD = dup(STDOUT_FILENO);                                                                                                                                                                                                                                                                                                                                                                                                  \n        char newFileDescriptor[2];                                                                                                                                                                                                                                                                                                                                                                                                       \n        sprintf(newFileDescriptor, \"%d\", newFD);                                                                                                                                                                                                                                                                                                                                                                                         \n        dup2(fd[1], STDOUT_FILENO); // You want to modify STDOUT_FILENO                                                                                                                                                                                                                                                                                                                                                                  \n        close(fd[0]);                                                                                                                                                                                                                                                                                                                                                                                                                    \n        execl(\"/bin/echo\", \"echo\", newFileDescriptor, NULL); // switched to echo                                                                                                                                                                                                                                                                                                                                                         \n    }else{                                                                                                                                                                                                                                                                                                                                                                                                                               \n        close(fd[1]);                                                                                                                                                                                                                                                                                                                                                                                                                    \n        char c[10];                                                                                                                                                                                                                                                                                                                                                                                                                      \n        int r = read(fd[0], c, sizeof(char) * 10);                                                                                                                                                                                                                                                                                                                                                                                       \n\n        if(r &gt; 0){                                                                                                                                                                                                                                                                                                                                                                                                                       \n            fprintf(stderr, \"PIPE INPUT = %s\", c);                                                                                                                                                                                                                                                                                                                                                                                       \n            write(output, c, r); // use write instead of fwrite                                                                                                                                                                                                                                                                                                                                                                          \n        }                                                                                                                                                                                                                                                                                                                                                                                                                                \n    }                                                                                                                                                                                                                                                                                                                                                                                                                                    \n}                                                                                                                                                                                                                                                                                                                                                                                                                                        \n</code></pre>\n\n<p>Here's the result of running it:</p>\n\n<pre><code>$ gcc test.c -o test\n$ ./test\nPIPE INPUT = 6\n$ cat output.txt \n6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2418, "user_id": 5128826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b54c3cd8c70aad8122d9391ce8028a?s=128&d=identicon&r=PG&f=1", "display_name": "nsilent22", "link": "https://stackoverflow.com/users/5128826/nsilent22"}, "is_accepted": false, "score": 0, "last_activity_date": 1453319229, "creation_date": 1453319229, "answer_id": 34909157, "question_id": 34908588, "link": "https://stackoverflow.com/questions/34908588/how-to-redirect-program-output-to-text-file/34909157#34909157", "title": "How to redirect program output to text file", "body": "<p>Here's simples example how to do this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(void) {\n    int out = open(\"/tmp/output.txt\", O_WRONLY | O_CREAT, 0644);\n    if (out == -1) {\n        perror(\"open:\");\n        return -1;\n    }\n    int r;\n    r = close(1); /* this closes stdout */\n    if (r != 0) {\n        perror(\"close:\");\n        return -1;\n    }\n    r = dup2(out, 1); /* this duplicates your file descriptor to stdout */\n    if (r == -1) {\n        perror(\"dup2:\");\n        return -1;\n    }\n    printf(\"this should go to the output file\\n\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3417, "favorite_count": 2, "accepted_answer_id": 34909006, "answer_count": 4, "score": 1, "last_activity_date": 1453319229, "creation_date": 1453317456, "last_edit_date": 1453317897, "question_id": 34908588, "link": "https://stackoverflow.com/questions/34908588/how-to-redirect-program-output-to-text-file", "title": "How to redirect program output to text file", "body": "<p>I want to redirect the output of a program to a file. How can I do this? At the moment my file doesn't get created, I can only print the output to my console.</p>\n\n<pre><code>    int fd[2];\n    int processId;\n    int output;\n    char filename[] = \"output.txt\";\n\n    if((output = open(filename, O_CREAT | O_WRONLY, S_IRUSR | S_IWUSR)) == -1){\n        fprintf(stderr, \"Unable to create/open file '%s'\\n\", filename);\n        return 1;\n    }\n\n    if(pipe(fd) == -1){\n        fprintf(stderr, \"Error creating pipe\\n\");\n        return 2;\n    }\n\n    if((processId = fork()) == -1){\n        fprintf(stderr, \"Error forking\\n\");\n        return 3;\n    }   \n\n    if(processId == 0){\n        int newFD = dup(STDOUT_FILENO);\n        char newFileDescriptor[2];\n        sprintf(newFileDescriptor, \"%d\", newFD);\n        dup2(fd[1], output);\n        close(fd[0]);\n        execl(\"./pipetest\", \"pipetest\", newFileDescriptor, NULL);\n    }else{\n        close(fd[1]);\n        char c[10];\n        int r = read(fd[0], c, sizeof(char) * 10);\n\n        if(r &gt; 0){\n            fprintf(stderr, \"PIPE INPUT = %s\", c);\n            fwrite(c, 1, sizeof(c), output);\n        }\n    }\n</code></pre>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1453313985, "post_id": 34907514, "comment_id": 57551127, "body": "And where is the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> that shows what you do?"}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1453314329, "post_id": 34907514, "comment_id": 57551325, "body": "Have you included math.h?"}, {"owner": {"reputation": 21, "user_id": 5817471, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208496695353216/picture?type=large", "display_name": "Shlomi Amichay", "link": "https://stackoverflow.com/users/5817471/shlomi-amichay"}, "edited": false, "score": 0, "creation_date": 1453314358, "post_id": 34907514, "comment_id": 57551340, "body": "thank you you user3121023, it actually worked!"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 8, "last_activity_date": 1453314423, "creation_date": 1453314423, "answer_id": 34907700, "question_id": 34907514, "link": "https://stackoverflow.com/questions/34907514/main-c-text0x170-undefined-reference-to-sqrt-used-lm/34907700#34907700", "title": "main.c:(.text+0x170): undefined reference to `sqrt&#39; (used -lm)", "body": "<p>You need to use <code>-lm</code> in the link line, not in the compile line.</p>\n\n<pre><code>a.out:  GBST.o main.o\n        gcc GBST.o  main.o -lm\n#                          ^^^^ Need it here\n\nGBST.o: GBST.c GBST.h\n        gcc -c GBST.c\n\nmain.o: main.c\n        gcc -c main.c\n#                     ^^^^ Don't need it here\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5817471, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208496695353216/picture?type=large", "display_name": "Shlomi Amichay", "link": "https://stackoverflow.com/users/5817471/shlomi-amichay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 34907700, "answer_count": 1, "score": 1, "last_activity_date": 1453314530, "creation_date": 1453313757, "last_edit_date": 1453314327, "question_id": 34907514, "link": "https://stackoverflow.com/questions/34907514/main-c-text0x170-undefined-reference-to-sqrt-used-lm", "title": "main.c:(.text+0x170): undefined reference to `sqrt&#39; (used -lm)", "body": "<p>ok, so i'm trying to compile my code using makefile, i've got only 2 .c file and 1 .h file, i used \"sqrt()\" function from math.h (only in main), here is my makefile:</p>\n\n<pre><code>a.out:  GBST.o main.o\n        gcc GBST.o  main.o\n\nGBST.o: GBST.c GBST.h\n        gcc -c GBST.c\n\nmain.o: main.c\n        gcc -c main.c -lm\n</code></pre>\n\n<p>still, I get main.c:(.text+0x170): undefined reference to `sqrt' error, what can it be? (btw, i wrote -lm in GBST line before and it did not help, so i have deleted it)</p>\n"}, {"tags": ["c", "gcc", "optimization", "fread"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1453315145, "post_id": 34907503, "comment_id": 57551781, "body": "No error for me with gcc 4.4.5."}, {"owner": {"reputation": 1663, "user_id": 916672, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/56c85230b3c9262e003bade8156e48be?s=128&d=identicon&r=PG", "display_name": "Kevin Meier", "link": "https://stackoverflow.com/users/916672/kevin-meier"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1453315339, "post_id": 34907503, "comment_id": 57551890, "body": "Unfortunately i also get an error with <code>gcc 4.6.4</code>. I hope it&#39;s not a bug of gcc."}, {"owner": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "edited": false, "score": 0, "creation_date": 1453318324, "post_id": 34907503, "comment_id": 57553503, "body": "Works fine for me with gcc 5.3.0 !"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1453319183, "post_id": 34907503, "comment_id": 57554002, "body": "I tried on a RHEL 5 box (Linux hostname 2.6.18-128.el5 #1 SMP Wed Dec 17 11:41:38 EST 2008 x86_64 x86_64 x86_64 GNU/Linux) with GCC versions 4.1.2, 4.5.1, 4.7.1, 5.2.0, 5.3.0 with the options: <code>&#47;path&#47;to&#47;version&#47;bin&#47;gcc -std=c99 -O3 -g -Wall -Wextra -Werror -Wmissing-prototypes -Wstrict-prototypes  -Wold-style-definition  so-34907503-b.c -o so-34907503-b&#39; and after adding </code>static` before <code>test</code> (to avoid <code>-Wmissing-prototypes</code>), it compiled without problem."}, {"owner": {"reputation": 6049, "user_id": 1595323, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2dd4e62d8f84c5dee2d68ba35393f266?s=128&d=identicon&r=PG", "display_name": "Konstantin Vladimirov", "link": "https://stackoverflow.com/users/1595323/konstantin-vladimirov"}, "edited": false, "score": 0, "creation_date": 1453366445, "post_id": 34907503, "comment_id": 57572368, "body": "tested on gcc 4.6.3, no problem reproduced"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1453379472, "post_id": 34907503, "comment_id": 57581118, "body": "I don&#39;t think gcc version matters much. Try compiling with <code>-D_FORTIFY_SOURCE=1</code> and you should trigger it. This flag is enabled by default in Ubuntu and not most other Linuxes."}], "answers": [{"comments": [{"owner": {"reputation": 1663, "user_id": 916672, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/56c85230b3c9262e003bade8156e48be?s=128&d=identicon&r=PG", "display_name": "Kevin Meier", "link": "https://stackoverflow.com/users/916672/kevin-meier"}, "edited": false, "score": 0, "creation_date": 1453482220, "post_id": 34923798, "comment_id": 57635871, "body": "This works great. Thanks:) I know that i sometimes try some special combinations of such &quot;hacks&quot;, but for real world applications i avoid such things. Anyway: Thanks!:)"}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": true, "score": 1, "last_activity_date": 1453379536, "last_edit_date": 1453379536, "creation_date": 1453379151, "answer_id": 34923798, "question_id": 34907503, "link": "https://stackoverflow.com/questions/34907503/gcc-fread-chk-warn-warning/34923798#34923798", "title": "gcc: __fread_chk_warn warning", "body": "<p>Ubuntu enable the <code>_FORTIFY_SOURCE</code> feature by default for optimization levels <code>-O1</code> or higher. This option makes the system headers pre-process to use different functions for <code>fread</code> among others. Those functions perform some basic safety checks of arguments. The option gets enabled globally when the header is included so it makes the assumption that all the code will be compiled with <code>-O1</code> or higher. I assume that it is disabled on lower optimization levels because gcc doesn't have enough information without some optimizations and that causes those magic fortify macros to generate false positives (like you got).</p>\n\n<p>If you compile the whole file with <code>-O0</code>, <code>_FORTIFY_SOURCE</code> is disabled and things will work. Alternatively I guess you can compile the whole file with <code>-D_FORTIFY_SOURCE=0</code>, although I haven't tried it.</p>\n\n<p>Also, I could reproduce this on other flavors of linux by just adding <code>-D_FORTIFY_SOURCE=1</code>.</p>\n\n<p>I guess you can call it a compiler/glibc/Ubuntu bug. Or just stop using crazy optimization attributes. The world can't be tested with all possible weird combinations so we should exercise caution when pushing buttons and turning knobs.</p>\n"}], "owner": {"reputation": 1663, "user_id": 916672, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/56c85230b3c9262e003bade8156e48be?s=128&d=identicon&r=PG", "display_name": "Kevin Meier", "link": "https://stackoverflow.com/users/916672/kevin-meier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1149, "favorite_count": 0, "accepted_answer_id": 34923798, "answer_count": 1, "score": 2, "last_activity_date": 1453379536, "creation_date": 1453313733, "last_edit_date": 1453320082, "question_id": 34907503, "link": "https://stackoverflow.com/questions/34907503/gcc-fread-chk-warn-warning", "title": "gcc: __fread_chk_warn warning", "body": "<p>I have a compilation problem with gcc.</p>\n\n<p>Assume the following program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint test(const char *fname) {\n    FILE *fh = fopen(fname, \"rb\");\n    int tmp;\n    if (fread(&amp;tmp, sizeof(tmp), 1, fh) &lt; 1) {\n        tmp = 0;\n    }\n    fclose(fh);\n    return tmp;\n}\n\nint main(void) {\n    printf(\"%d\\n\", test(\"test.txt\"));\n    return 0;\n}\n</code></pre>\n\n<p>And the file <code>test.txt</code>:</p>\n\n<pre><code>11111111111111111111111111111111...\n</code></pre>\n\n<p>Of course, the program is very stupid, but it works:</p>\n\n<pre><code>user@ubuntu:~/tmp/optxx$ gcc -O3 -Wall -Wextra test.c\nuser@ubuntu:~/tmp/optxx$ ./a.out\n825307441\n</code></pre>\n\n<p>Let's modify it a bit (only add an attribute to the <code>test</code>-function):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint __attribute__((optimize(\"O0\"))) test(const char *fname) {\n    FILE *fh = fopen(fname, \"rb\");\n    int tmp;\n    if (fread(&amp;tmp, sizeof(tmp), 1, fh) &lt; 1) {\n        tmp = 0;\n    }\n    fclose(fh);\n    return tmp;\n}\n\nint main(void) {\n    printf(\"%d\\n\", test(\"test.txt\"));\n    return 0;\n}\n</code></pre>\n\n<p>The function <code>test</code> should no longer be optimized. But now compilation fails:</p>\n\n<pre><code>user@ubuntu:~/tmp/optxx$ gcc -Wall -Wextra -O3 test.c\nIn file included from /usr/include/stdio.h:936:0,\n                 from test.c:1:\nIn function \u2018fread\u2019,\n    inlined from \u2018test\u2019 at test.c:6:9:\n/usr/include/x86_64-linux-gnu/bits/stdio2.h:293:9: warning: call to \u2018__fread_chk_warn\u2019 declared with attribute warning: fread called with bigger size * nmemb than length of destination buffer\n  return __fread_chk_warn (__ptr, __bos0 (__ptr), __size, __n, __stream);\n         ^\n</code></pre>\n\n<p>I get a warning and normally i compile with <code>-Werror</code>, so i don't like warnings.\nThe used <code>gcc</code> version:</p>\n\n<pre><code>user@ubuntu:~/tmp/optxx$ gcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/5/lto-wrapper\nTarget: x86_64-linux-gnu\nConfigured with: ../src/configure -v --with-pkgversion='Ubuntu 5.3.1-6ubuntu2' --with-bugurl=file:///usr/share/doc/gcc-5/README.Bugs --enable-languages=c,ada,c++,java,go,d,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-5 --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --enable-plugin --with-system-zlib --disable-browser-plugin --enable-java-awt=gtk --enable-gtk-cairo --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-5-amd64/jre --enable-java-home --with-jvm-root-dir=/usr/lib/jvm/java-1.5.0-gcj-5-amd64 --with-jvm-jar-dir=/usr/lib/jvm-exports/java-1.5.0-gcj-5-amd64 --with-arch-directory=amd64 --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --enable-objc-gc --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\nThread model: posix\ngcc version 5.3.1 20160119 (Ubuntu 5.3.1-6ubuntu2)\n</code></pre>\n\n<p>Unfortunately i am not able to fix the warning:(</p>\n\n<p>Maybe someone has an idea why this happens?</p>\n\n<p>-edit-</p>\n\n<p>A (dirty) hack would also be okay to remove this warning:)</p>\n\n<p>-edit-</p>\n\n<p>Probably something with my linux is wrong, because it seems to work for everyone else. Anayway a dirty hack / fix would be to add this code before the <code>fread</code> call:</p>\n\n<pre><code>static size_t fread_wrapper(void *ptr, size_t size, size_t count, FILE *stream) {\n    return fread(ptr, size, count, stream);\n}\n#define fread(ptr, size, count, stream)         fread_wrapper((ptr), (size), (count), (stream))\n</code></pre>\n"}, {"tags": ["c", "string", "file", "search"], "comments": [{"owner": {"reputation": 11, "user_id": 5817454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66f0e95c45e2d0a54afe657799de3bbc?s=128&d=identicon&r=PG&f=1", "display_name": "holger94", "link": "https://stackoverflow.com/users/5817454/holger94"}, "reply_to_user": {"reputation": 6681, "user_id": 4525938, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/343235a4439284a843e301760bc42612?s=128&d=identicon&r=PG&f=1", "display_name": "winhowes", "link": "https://stackoverflow.com/users/4525938/winhowes"}, "edited": false, "score": 0, "creation_date": 1453314282, "post_id": 34907493, "comment_id": 57551289, "body": "Hi, i have tried to save the file in a string. but this doesnt work."}, {"owner": {"reputation": 11, "user_id": 5817454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66f0e95c45e2d0a54afe657799de3bbc?s=128&d=identicon&r=PG&f=1", "display_name": "holger94", "link": "https://stackoverflow.com/users/5817454/holger94"}, "reply_to_user": {"reputation": 6681, "user_id": 4525938, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/343235a4439284a843e301760bc42612?s=128&d=identicon&r=PG&f=1", "display_name": "winhowes", "link": "https://stackoverflow.com/users/4525938/winhowes"}, "edited": false, "score": 0, "creation_date": 1453314325, "post_id": 34907493, "comment_id": 57551322, "body": "then i tried with &quot;fscan&quot; and &quot;fgets&quot;. :/"}, {"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "edited": false, "score": 0, "creation_date": 1453314375, "post_id": 34907493, "comment_id": 57551351, "body": "where is the variable &quot;text&quot; defined?"}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1453314441, "post_id": 34907493, "comment_id": 57551391, "body": "Use fscanf to scan for words in file and strcmp from string.h to compare scanned work with word you want to find."}, {"owner": {"reputation": 11, "user_id": 5817454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66f0e95c45e2d0a54afe657799de3bbc?s=128&d=identicon&r=PG&f=1", "display_name": "holger94", "link": "https://stackoverflow.com/users/5817454/holger94"}, "edited": false, "score": 0, "creation_date": 1453314468, "post_id": 34907493, "comment_id": 57551411, "body": "oh, i forgot to copy. one moment, i edit the code."}, {"owner": {"reputation": 11, "user_id": 5817454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66f0e95c45e2d0a54afe657799de3bbc?s=128&d=identicon&r=PG&f=1", "display_name": "holger94", "link": "https://stackoverflow.com/users/5817454/holger94"}, "edited": false, "score": 0, "creation_date": 1453314541, "post_id": 34907493, "comment_id": 57551458, "body": "i have edited the code"}, {"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "edited": false, "score": 0, "creation_date": 1453314689, "post_id": 34907493, "comment_id": 57551528, "body": "ok now can you get the string?"}, {"owner": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 3, "creation_date": 1453314763, "post_id": 34907493, "comment_id": 57551568, "body": "There is a function called <code>strstr</code> that would help: <a href=\"http://stackoverflow.com/questions/27303062/strstr-function-like-that-ignores-upper-or-lower-case\" title=\"strstr function like that ignores upper or lower case\">stackoverflow.com/questions/27303062/&hellip;</a>.  Also,  <code>text[100] = &#39;\\0&#39;;</code> is out of bounds of your array."}], "answers": [{"tags": [], "owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "is_accepted": false, "score": 1, "last_activity_date": 1453314815, "creation_date": 1453314815, "answer_id": 34907823, "question_id": 34907493, "link": "https://stackoverflow.com/questions/34907493/c-search-words-in-a-string/34907823#34907823", "title": "C search words in a String", "body": "<p>There are two very simple ways to accomplish this:</p>\n\n<ol>\n<li><p>In loop you use fscanf to find words from file until you reach EOF, and in meantime ask whether that word is what you're looking for with strcmp (string compare) from string.h</p></li>\n<li><p>Use two loops, in outer loop with fgetc get chars until you reach some delimiter such as space or \\n or \\t, and in inner loop check if that word you scanned with getc is word you're looking for. You'll need some temporarly char array for this.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 1, "last_activity_date": 1453320353, "last_edit_date": 1453320353, "creation_date": 1453319707, "answer_id": 34909301, "question_id": 34907493, "link": "https://stackoverflow.com/questions/34907493/c-search-words-in-a-string/34909301#34909301", "title": "C search words in a String", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(void) {\n    char *such = \"Ingo\";\n    FILE *datei;\n    char word[100];\n    int counter = 0;\n\n    datei = fopen(\"names.txt\", \"r\");\n\n    if (datei == NULL) {\n        printf(\"Fehler\\n\");\n    }\n    else \n    {\n        while(1==fscanf(datei, \"%99s\", word)){//read word by word\n            word[0] = toupper(word[0]);       //ingo --&gt; Ingo\n            if (strcmp(word, such) == 0){\n                ++counter;\n            }\n        }\n        fclose(datei);\n        if (counter != 0){\n            printf(\"number of '%s' is %d\\n\", such, counter);\n        }   \n\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1454191137, "last_edit_date": 1454191137, "creation_date": 1453322991, "answer_id": 34910249, "question_id": 34907493, "link": "https://stackoverflow.com/questions/34907493/c-search-words-in-a-string/34910249#34910249", "title": "C search words in a String", "body": "<p>There are a whole lot of conditions you should test for to insure you are only matching whole words, etc. The following is one approach to searching for <code>jury</code> and only matching <code>jury</code>, <code>jury's</code>, but not <code>injury</code>. You should also consider whether you want to match plurals for a word or not (e.g. <code>review</code> and <code>reviews</code>. Below a single collection of delimiters (<code>delim</code>) is considered to insure you match whole words. You could easily break that into two and have a beginning and ending set if you wanted to match plurals or various other suffixes.</p>\n\n<p>The code expects the filename to search as the first argument and the search term (<code>sterm</code>) as the second. (if no arguments are given, it will search the text on <code>stdin</code> for <code>'the'</code>). The code reads each line in the file into a temporary buffer called <code>line</code> and then searches each character in <code>line</code> for the beginning character in <code>sterm</code>. If found, the previous character is checked to insure it is a delimiter and then the character following the word (by <code>sterm</code> length) is also a delimiter. If it is a word that starts with the same character as <code>sterm</code>, is delimited before and after, then the contents are compared using <code>strncmp</code>.</p>\n\n<p>If all conditions are satisfied, the word is copied to <code>tmp</code> and the <code>count</code> is incremented. The results are printed along with the <em>zero-based</em> position in <code>line</code> for the match. This is just a basic whole-word search that has not been optimized, but should give you a starting place for discriminating whole words from lesser included substrings. (i.e. searching for <code>'the'</code> will not also match <code>'them'</code>, <code>'then'</code>, <code>'they'</code>, etc..). You can also turn this code into a function, that saves the line number and position of each match in an array of structs to which you can return a pointer. That way you can parse your text and return a pointer to an array that holds the line and position of each match. (that's for another day). </p>\n\n<p>Look over the code and let me know if you have questions. If you are not concerned with only matching <em>whole-words</em>, then you could simply call <code>strstr</code> repeatedly on each line while advancing a pointer to count the occurrences of the search term. Whatever best meets your needs.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXS 256\n\nint main (int argc, char **argv)\n{\n    char line[MAXS] = {0};  /* line buffer for fgets */\n    FILE *fp = argc &gt; 1 ? fopen (argv[1], \"r\") : stdin;\n    char *sterm = argc &gt; 2 ? argv[2] : \"the\";\n    char *delim = \" \\t\\n\\'\\\".\";\n    size_t count = 0, idx = 0, slen = strlen (sterm);\n\n    if (!fp) {\n        fprintf (stderr, \"error: file open failed '%s'\\n\", argv[1]);\n        return 1;\n    }\n\n    while (fgets (line, MAXS, fp))\n    {\n        size_t i, llen = strlen (line);\n        idx++;\n\n        if (llen &lt; slen + 1)\n            continue;       /* line not longer than search term + \\n */\n\n        for (i = 0; i &lt; llen - slen + 1; i++) {\n\n            if (line[i] != *sterm)\n                continue;   /* char != first char in sterm  */\n            if (i &amp;&amp; !strchr (delim, line[i-1]))\n                continue;   /* prior char is not a delim    */\n            if (!strchr (delim, line[i+slen]))\n                continue;   /* next char is not a delim     */\n            if (strncmp (&amp;line[i], sterm, slen))\n                continue;   /* chars don't match sterm      */\n\n            printf (\" line[%2zu] match %2zu. '%s' at location %zu\\n\",\n                    idx, ++count, sterm, &amp;line[i] - line);\n        }\n    }\n    if (fp != stdin) fclose (fp);\n\n    printf (\"\\n total occurrences of '%s' in '%s' : %zu\\n\\n\",\n            sterm, argc &gt; 1 ? argv[1] : \"stdin\", count);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Sample File</strong></p>\n\n<pre><code>$ cat dat/damages.txt\nPersonal injury damage awards are unliquidated\nand are not capable of certain measurement; thus, the\njury has broad discretion in assessing the amount of\ndamages in a personal injury case. Yet, at the same\ntime, a factual sufficiency review insures that the\nevidence supports the jury's award; and, although\ndifficult, the law requires appellate courts to conduct\nfactual sufficiency reviews on damage awards in\npersonal injury cases. Thus, while a jury has latitude in\nassessing intangible damages in personal injury cases,\na jury's damage award does not escape the scrutiny of\nappellate review.\n\nBecause Texas law applies no physical manifestation\nrule to restrict wrongful death recoveries, a\ntrial court in a death case is prudent when it chooses\nto submit the issues of mental anguish and loss of\nsociety and companionship. While there is a\npresumption of mental anguish for the wrongful death\nbeneficiary, the Texas Supreme Court has not indicated\nthat reviewing courts should presume that the mental\nanguish is sufficient to support a large award. Testimony\nthat proves the beneficiary suffered severe mental\nanguish or severe grief should be a significant and\nsometimes determining factor in a factual sufficiency\nanalysis of large non-pecuniary damage awards.\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/searchterm dat/damages.txt jury\n line[ 3] match  1. 'jury' at location 0\n line[ 6] match  2. 'jury' at location 22\n line[ 9] match  3. 'jury' at location 37\n line[11] match  4. 'jury' at location 2\n\n total occurrences of 'jury' in 'dat/damages.txt' : 4\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$ ./bin/searchterm &lt;dat/damages.txt\n line[ 2] match  1. 'the' at location 50\n line[ 3] match  2. 'the' at location 39\n line[ 4] match  3. 'the' at location 43\n line[ 5] match  4. 'the' at location 48\n line[ 6] match  5. 'the' at location 18\n line[ 7] match  6. 'the' at location 11\n line[11] match  7. 'the' at location 38\n line[17] match  8. 'the' at location 10\n line[19] match  9. 'the' at location 34\n line[20] match 10. 'the' at location 13\n line[21] match 11. 'the' at location 42\n line[23] match 12. 'the' at location 12\n\n total occurrences of 'the' in 'stdin' : 12\n</code></pre>\n\n<hr>\n\n<p><strong>Using a pointer instead of array index notation</strong></p>\n\n<p>You may find it a bit more natural to use a <em>pointer</em> instead of <em>array index</em> notation. (e.g. using <code>char *p = line;</code> and advancing <code>p</code>, instead of using <code>line[X]</code> notation). If so, you can replace the read loop with the following:</p>\n\n<pre><code>    while (fgets (line, MAXS, fp))\n    {\n        char *p = line;\n        size_t llen = strlen (line);\n        idx++;\n\n        if (llen &lt; slen + 1)\n            continue;       /* line not longer than search term + \\n */\n\n        for (;p &lt; (line + llen - slen + 1); p++) {\n\n            if (*p != *sterm)\n                continue;   /* char != first char in sterm  */\n            if (p &gt; line &amp;&amp; !strchr (delim, *(p - 1)))\n                continue;   /* prior char is not a delim    */\n            if (!strchr (delim, *(p + slen)))\n                continue;   /* next char is not a delim     */\n            if (strncmp (p, sterm, slen))\n                continue;   /* chars don't match sterm      */\n\n            printf (\" line[%2zu] match %2zu. '%s' at location %zu\\n\",\n                    idx, ++count, sterm, p - line);\n        }\n    }\n</code></pre>\n\n<p>The pointer notation is probably a bit more natural in C. Let me know if you have any questions.</p>\n"}], "owner": {"reputation": 11, "user_id": 5817454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66f0e95c45e2d0a54afe657799de3bbc?s=128&d=identicon&r=PG&f=1", "display_name": "holger94", "link": "https://stackoverflow.com/users/5817454/holger94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1258, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1454191137, "creation_date": 1453313699, "last_edit_date": 1453316962, "question_id": 34907493, "link": "https://stackoverflow.com/questions/34907493/c-search-words-in-a-string", "title": "C search words in a String", "body": "<p>I hope someone can help me. I think it's an easy question,\nI want to write a program that searches words in a file.</p>\n\n<pre><code>char *such = \"Ingo\";\nchar *fund;\nFILE *datei;\nchar text[100];\n\ndatei = fopen(\"names.txt\", \"r\");\n\nif (datei == NULL) {\n    printf(\"Fehler\\n\");\n}\nelse \n{\n    fscanf(datei, \"%100c\", text);\n    text[100] = '\\0';\n    //i think this dont work\n    if (fgets(text, 100, datei) != NULL)\n    {\n        printf(\"%s \\n\", text);\n    }   \n}\n\nreturn 0;\n</code></pre>\n\n<p>The file contains this:</p>\n\n<pre><code>Ingo Test Test 123 Test Ingo Ingo\n</code></pre>\n\n<p>Now I want to search how often the name \"Ingo\" is in the file.</p>\n\n<p>It is possible to search for more words, maybe \"ingo\" and \"test\" and count this?</p>\n"}, {"tags": ["c", "linked-list", "doubly-linked-list"], "comments": [{"owner": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "edited": false, "score": 0, "creation_date": 1453314858, "post_id": 34907485, "comment_id": 57551617, "body": "try changing char country[3] to char country[4] for the &#39;\\0&#39;"}, {"owner": {"reputation": 375, "user_id": 5683152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/d7Iy3.png?s=128&g=1", "display_name": "sstefan", "link": "https://stackoverflow.com/users/5683152/sstefan"}, "reply_to_user": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "edited": false, "score": 0, "creation_date": 1453315100, "post_id": 34907485, "comment_id": 57551756, "body": "@novice tried, still the same...do you have any other idea?"}, {"owner": {"reputation": 375, "user_id": 5683152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/d7Iy3.png?s=128&g=1", "display_name": "sstefan", "link": "https://stackoverflow.com/users/5683152/sstefan"}, "reply_to_user": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "edited": false, "score": 0, "creation_date": 1453315289, "post_id": 34907485, "comment_id": 57551860, "body": "@novice actually it worked, my bad...thanks"}, {"owner": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "edited": false, "score": 0, "creation_date": 1453315343, "post_id": 34907485, "comment_id": 57551893, "body": "cool, ill add it as an answer then"}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1453318545, "post_id": 34907485, "comment_id": 57553649, "body": "Why are you passing in pointer-to-pointers to your functions? Simple pointers are all that you really need for a linked list."}, {"owner": {"reputation": 375, "user_id": 5683152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/d7Iy3.png?s=128&g=1", "display_name": "sstefan", "link": "https://stackoverflow.com/users/5683152/sstefan"}, "reply_to_user": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1453323974, "post_id": 34907485, "comment_id": 57556669, "body": "@Chimera since you first initialize the head pointer to NULL, you need to pass the head by reference in order to change its value after insertion."}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1453328994, "post_id": 34907485, "comment_id": 57559372, "body": "@sstefan Of course. My bad. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453315749, "post_id": 34907969, "comment_id": 57552140, "body": "That is true, but there are few countries that have 3-letter names. Also TV shows&#39; <code>name[20]</code> and <code>genre[20]</code> are likely to run out of steam. Consider allocating memory for the name, and storing a pointer. Consider having a list of genres to reference, that will address any user&#39;s typo problems."}, {"owner": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453316118, "post_id": 34907969, "comment_id": 57552328, "body": "I think it&#39;s the way his files are stored. Maybe he is storing all country names as three letters"}, {"owner": {"reputation": 375, "user_id": 5683152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/d7Iy3.png?s=128&g=1", "display_name": "sstefan", "link": "https://stackoverflow.com/users/5683152/sstefan"}, "edited": false, "score": 1, "creation_date": 1453316170, "post_id": 34907969, "comment_id": 57552354, "body": "Got it. As for the countries, I forgot to add that country field refers to 3-letter abbreviation."}], "tags": [], "owner": {"reputation": 545, "user_id": 3404790, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/284304e7a2bc28b900f1990d0cc45231?s=128&d=identicon&r=PG&f=1", "display_name": "novice", "link": "https://stackoverflow.com/users/3404790/novice"}, "is_accepted": true, "score": 1, "last_activity_date": 1453315381, "creation_date": 1453315381, "answer_id": 34907969, "question_id": 34907485, "link": "https://stackoverflow.com/questions/34907485/loading-info-from-a-file-into-a-list-in-c/34907969#34907969", "title": "Loading info from a file into a list in c", "body": "<p>change <code>char country[3]</code> to <code>char country[4]</code> for the '\\0' null character</p>\n"}], "owner": {"reputation": 375, "user_id": 5683152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/d7Iy3.png?s=128&g=1", "display_name": "sstefan", "link": "https://stackoverflow.com/users/5683152/sstefan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 34907969, "answer_count": 1, "score": 1, "last_activity_date": 1453315381, "creation_date": 1453313671, "question_id": 34907485, "link": "https://stackoverflow.com/questions/34907485/loading-info-from-a-file-into-a-list-in-c", "title": "Loading info from a file into a list in c", "body": "<p>I'm writing a program which will read info from a file, line by line, and then load the info into a doubly linked list. The info is loaded as a structure called tvshow:</p>\n\n<pre><code>typedef struct tvshow{\n    char name[20];\n    int epNumber;\n    int year;\n    float duration;\n    char country[3];\n    char genre[20];\n}tvshow;\n\ntypedef struct node{\n    tvshow inf;\n    struct node *next;\n    struct node *prev;\n}node;\n\nvoid insert(node **, tvshow);\nvoid print(node *);\nFILE *safe_open(char *, char *);\nvoid load(node **, FILE *);\n\nint main(){\n    node *head;\n    head=NULL;\n\n    FILE *in=safe_open(\"tvshows.txt\", \"r\");\n\n    load(&amp;head, in);\n    print(head);\n\n    fclose(in);\n\n    return 0;\n    }\n\nvoid insert(node **head, tvshow data){\n    node *new=malloc(sizeof(node));\n    new-&gt;inf=data;\n    new-&gt;next=NULL;\n\n    if (*head==NULL){\n        *head=new;\n        new-&gt;prev=NULL;\n    }else{\n        node *temp=*head;\n        while (temp-&gt;next!=NULL){\n        temp=temp-&gt;next;\n     }\n    temp-&gt;next=new;\n    new-&gt;prev=temp;\n    }\n}\n\nvoid print(node *head){\n    while (head!=NULL){\n        printf(\"%s %d %d %f %s %s\\n\", head-&gt;inf.name,head-&gt;inf.epNumber,head-&gt;inf.year, head-&gt;inf.duration,head-&gt;inf.country, head-&gt;inf.genre);\n        head=head-&gt;next;\n    }\n}\n\nFILE *safe_open(char *name, char *mode){\n    FILE *fp=fopen(name, mode);\n\n    if (fp==NULL){\n        printf(\"failed to open\");\n        exit(1);\n    }\n\n    return fp;\n}\n\nvoid load(node **head, FILE *fp){\n    tvshow temp;\n\n    while (fscanf(fp, \"%s %d %d %f %s %s\", temp.name, &amp;temp.epNumber,&amp;temp.year, &amp;temp.duration, temp.country, temp.genre)!=EOF){\n        insert(head, temp);\n    }\n}\n</code></pre>\n\n<p>here is the example line from the .txt file:\n        <code>TheSopranos 86 1999 55 USA Drama</code></p>\n\n<p>What is bothering me is that when I run the program, it prints the following:</p>\n\n<pre><code>TheSopranos 86 1999 55 USADrama Drama\n</code></pre>\n\n<p>Why USADrama? Where did it go wrong?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 6, "creation_date": 1453313046, "post_id": 34907297, "comment_id": 57550619, "body": "What makes you think that?"}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "edited": false, "score": 7, "creation_date": 1453313103, "post_id": 34907297, "comment_id": 57550661, "body": "No, you also have to be careful with <code>void* a, b;</code> - only <code>a</code> is a pointer here."}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "reply_to_user": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1453313639, "post_id": 34907297, "comment_id": 57550957, "body": "Lol @szczurcio, very nice :D. Now Shashank Gandham, one problem per thread please. Since you intitulated this thread &quot;Declaring a pointer in C&quot;, open another thread to discuss about regex, please."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "edited": false, "score": 6, "creation_date": 1453313694, "post_id": 34907297, "comment_id": 57550998, "body": "@Danny_ds indeed, and <code>void b;</code> is not even a valid declaration."}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453313813, "post_id": 34907297, "comment_id": 57551050, "body": "@WeatherVane - Oh yes, of course - I overlooked that one."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 6, "last_activity_date": 1453313728, "creation_date": 1453313728, "answer_id": 34907500, "question_id": 34907297, "link": "https://stackoverflow.com/questions/34907297/declaring-a-pointer-using-regex-in-c/34907500#34907500", "title": "Declaring a pointer using regex in C", "body": "<p>C does not have support for regular expressions in the code itself.  Libraries exist to perform regular expressions on text, but not on the code. </p>\n\n<p>Variable declarations must be done separately.  For pointers in particular, a <code>*</code> next to a declared variable applies only to that variable.  For example:</p>\n\n<pre><code>int *a, b, *c;\n</code></pre>\n\n<p>This declares <code>a</code> and <code>c</code> as <code>int *</code> and <code>b</code> as <code>int</code>.  Another way of looking at is that <code>*a</code>, <code>b</code>, and <code>*c</code> are all of type <code>int</code>.</p>\n"}], "owner": {"reputation": 83, "user_id": 5744672, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c12896a4f3262fdb1629227739458e37?s=128&d=identicon&r=PG&f=1", "display_name": "Arihant Jain", "link": "https://stackoverflow.com/users/5744672/arihant-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 34907500, "answer_count": 1, "score": -1, "last_activity_date": 1453443911, "creation_date": 1453312999, "last_edit_date": 1453443911, "question_id": 34907297, "link": "https://stackoverflow.com/questions/34907297/declaring-a-pointer-using-regex-in-c", "title": "Declaring a pointer using regex in C", "body": "<p>Regular expression in C.</p>\n\n<p>Can I declare a pointer like <code>void *{a,b}</code> which means <code>void *a, *b;</code></p>\n\n<p>Is it possible, are regex expressions a standard in ANSI C</p>\n"}, {"tags": ["c", "heap"], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453311966, "post_id": 34906720, "comment_id": 57549891, "body": "The OP&#39;s earlier question was so poorly asked it was deleted by moderators. Essentially, this is the same. Plus 1, but I question your effect of re-using <code>p</code>. Doesn&#39;t it cause UB on the first reuse, after OP ignored the return value from <code>realloc</code>?"}, {"owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453312589, "post_id": 34906720, "comment_id": 57550299, "body": "@WeatherVane I edited my code. (I think now it is obvious)"}], "tags": [], "owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 2, "last_activity_date": 1453312468, "last_edit_date": 1453312468, "creation_date": 1453311149, "answer_id": 34906720, "question_id": 34906606, "link": "https://stackoverflow.com/questions/34906606/ci-am-trying-to-find-size-of-heap-using-malloc-and-realloc-but-getting-infinite/34906720#34906720", "title": "C:I am trying to find size of heap using malloc and realloc but getting infinite whats the exact solution for my program", "body": "<p><code>realloc(p,10*sizeof(int)</code> always allocates the same range of memory. Change it to\n<code>p = realloc(p,m*sizeof(int)</code>. If <code>realloc</code> succeeds it returns the pointer to the new dynamic memory by its return value, and the memory pointer passed to it gets freed (the data behind the pointer is moved from old memory to new memory). If <code>realloc</code> fails to allocate memory it returns <code>NULL</code>, no memory is allocated and no memory is freed. Further you should always <code>free</code> the allocated memory. Adapt your code like this:</p>\n\n<pre><code>int main() { \n    int *p = NULL;\n    int  m = 40;\n    int *newP;\n    do\n    {\n        newP = realloc( p, m*sizeof( int ) );\n        if ( newP != NULL )\n            p = newP;\n        m = m+40;\n    }\n    while ( newP != NULL );\n    free( p );\n    printf(\"Number of bytes allocated for heap\",m);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1453311793, "post_id": 34906832, "comment_id": 57549758, "body": "Why don&#39;t you use the returned value from <code>realloc</code>? Same mistake as question."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453311885, "post_id": 34906832, "comment_id": 57549831, "body": "@WeatherVane What do you mean, don&#39;t use it? <code>realloc</code> returns a pointer to the newly allocated memory block, which I feed to <code>while</code> to see if the allocation was successful. I don&#39;t need to save it anywhere because I don&#39;t use the memory. Of course, maybe it would be better style to <code>free</code> it before I exit the program, but that really doesn&#39;t matter here."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453312054, "post_id": 34906832, "comment_id": 57549959, "body": "I think you threw away the pointer. You have to feed it back into the next <code>realloc</code>."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453312106, "post_id": 34906832, "comment_id": 57550005, "body": "@WeatherVane Oh, true, didn&#39;t notice that, thanks."}, {"owner": {"reputation": 13, "user_id": 5816459, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gTTycKKdROU/AAAAAAAAAAI/AAAAAAAAAas/6-mu6vfcbng/photo.jpg?sz=128", "display_name": "Ranganayaki Srimath Kandadai", "link": "https://stackoverflow.com/users/5816459/ranganayaki-srimath-kandadai"}, "edited": false, "score": 0, "creation_date": 1453316021, "post_id": 34906832, "comment_id": 57552275, "body": "thanks to all ................"}, {"owner": {"reputation": 13, "user_id": 5816459, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gTTycKKdROU/AAAAAAAAAAI/AAAAAAAAAas/6-mu6vfcbng/photo.jpg?sz=128", "display_name": "Ranganayaki Srimath Kandadai", "link": "https://stackoverflow.com/users/5816459/ranganayaki-srimath-kandadai"}, "edited": false, "score": 0, "creation_date": 1453316364, "post_id": 34906832, "comment_id": 57552452, "body": "k but getting negative value????????????????????y ?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "reply_to_user": {"reputation": 13, "user_id": 5816459, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gTTycKKdROU/AAAAAAAAAAI/AAAAAAAAAas/6-mu6vfcbng/photo.jpg?sz=128", "display_name": "Ranganayaki Srimath Kandadai", "link": "https://stackoverflow.com/users/5816459/ranganayaki-srimath-kandadai"}, "edited": false, "score": 0, "creation_date": 1453316895, "post_id": 34906832, "comment_id": 57552739, "body": "@RanganayakiSrimathKandadai Maybe you&#39;re on a 64-bit operating system and as a result you can allocate &gt; 2GB of memory? Try using <code>size_t</code> with the <code>%zu</code> format specifier."}], "tags": [], "owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "is_accepted": false, "score": 1, "last_activity_date": 1453316186, "last_edit_date": 1495535275, "creation_date": 1453311500, "answer_id": 34906832, "question_id": 34906606, "link": "https://stackoverflow.com/questions/34906606/ci-am-trying-to-find-size-of-heap-using-malloc-and-realloc-but-getting-infinite/34906832#34906832", "title": "C:I am trying to find size of heap using malloc and realloc but getting infinite whats the exact solution for my program", "body": "<p>1) You have a mistake in your <code>printf</code> format string, you need to actually tell it to print the integer you're passing: <code>%d</code> or <code>%i</code></p>\n\n<p>2) You're <code>realloc</code>ing the same number of bytes with every call, you need to increase it.</p>\n\n<p>3) To be fully standards compliant, use <code>int main(void)</code>.</p>\n\n<p>4) See <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">here</a> to find out why not to cast the result of <code>malloc</code> in C.</p>\n\n<p>5) <code>realloc</code> can accept a <code>NULL</code> pointer and the result is well-defined, so your initial <code>malloc</code> call is not needed anyway.</p>\n\n<p>6) Use a named constant + <code>sizeof(type/variable)</code> to make your code more robust and maintainable (and correct, because <code>sizeof(int)</code> need not be 4).</p>\n\n<p>All these things combined, here's how I'd rewrite your code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define REALLOC_NUM_ELEMENTS 10\n\nint main(void) \n{\n    int *p = NULL;\n    int m = 0;\n\n    while (p = realloc(p, (m + REALLOC_NUM_ELEMENTS * sizeof(int))))\n        m += REALLOC_NUM_ELEMENTS * sizeof(int);\n\n    printf(\"Number of bytes allocated for heap %d\\n\", m);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5816459, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gTTycKKdROU/AAAAAAAAAAI/AAAAAAAAAas/6-mu6vfcbng/photo.jpg?sz=128", "display_name": "Ranganayaki Srimath Kandadai", "link": "https://stackoverflow.com/users/5816459/ranganayaki-srimath-kandadai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1453316556, "accepted_answer_id": 34906720, "answer_count": 2, "score": -1, "last_activity_date": 1453316186, "creation_date": 1453310867, "last_edit_date": 1453311080, "question_id": 34906606, "link": "https://stackoverflow.com/questions/34906606/ci-am-trying-to-find-size-of-heap-using-malloc-and-realloc-but-getting-infinite", "closed_reason": "Duplicate", "title": "C:I am trying to find size of heap using malloc and realloc but getting infinite whats the exact solution for my program", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main() { \n    int *p;\n    int m=40;\n    p=(int *)malloc(sizeof(int)*10);\n    while(realloc(p,10*sizeof(int))\n        m=m+40;\n    printf(\"Number of bytes allocated for heap\",m);\n}\n</code></pre>\n\n<p>what's wrong with this program</p>\n"}, {"tags": ["c", "pointers"], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1453310872, "creation_date": 1453310872, "answer_id": 34906608, "question_id": 34906594, "link": "https://stackoverflow.com/questions/34906594/how-does-0-get-assigned-to-the-variable-a/34906608#34906608", "title": "How does 0 get assigned to the variable &#39;a&#39;?", "body": "<p>It doesn't come from anywhere! It's an arbitrary value.</p>\n\n<p>You didn't initialise <code>a</code>, so what happens when you try to print its value is completely unpredictable.</p>\n"}, {"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 5, "last_activity_date": 1453311318, "last_edit_date": 1453311318, "creation_date": 1453310906, "answer_id": 34906619, "question_id": 34906594, "link": "https://stackoverflow.com/questions/34906594/how-does-0-get-assigned-to-the-variable-a/34906619#34906619", "title": "How does 0 get assigned to the variable &#39;a&#39;?", "body": "<p>The value of an uninitialized variable is <em>indeterminate</em>. Reading from an uninitialized variable is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\"><em>undefined behaviour</em></a>. So anything can happen. <code>0</code> is also a possible result of that.</p>\n\n<p><a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.9p10\" rel=\"nofollow\">C11 standard says:</a></p>\n\n<blockquote>\n  <p>If an object that has automatic storage duration is not initialized\n  explicitly, its value is indeterminate.</p>\n</blockquote>\n\n<p>and </p>\n\n<p><a href=\"http://port70.net/~nsz/c/c11/n1570.html#3.19.2p1\" rel=\"nofollow\">indeterminate value</a> is defined as:</p>\n\n<blockquote>\n  <p>either an unspecified value or a trap representation</p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3256372"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1453311194, "accepted_answer_id": 34906619, "answer_count": 2, "score": 0, "last_activity_date": 1453377319, "creation_date": 1453310798, "last_edit_date": 1453377319, "question_id": 34906594, "link": "https://stackoverflow.com/questions/34906594/how-does-0-get-assigned-to-the-variable-a", "closed_reason": "Duplicate", "title": "How does 0 get assigned to the variable &#39;a&#39;?", "body": "<p>I wrote a simple program in C (newbie in C)</p>\n\n<p>when i try to compile this program it's get compiled.</p>\n\n<p>created pointer to int 'p' and store the address of of variable 'a'</p>\n\n<p>when i derefernce the pointer it show the value 0 but i never assigned any value </p>\n\n<p>to my variable so where does 0 come from ?\nand if  we write \n    <code>int a;</code> \nit allocates space in the memory even before assigning any value to it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int a;\n    int *p = &amp;a;\n    printf(\"%d\\n\", *p);\n    return 0;\n}\n</code></pre>\n\n<p>compiler : clang</p>\n"}, {"tags": ["c", "mongodb", "mongodb-c"], "answers": [{"comments": [{"owner": {"reputation": 374, "user_id": 5117002, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5dOiu.jpg?s=128&g=1", "display_name": "Davidgs", "link": "https://stackoverflow.com/users/5117002/davidgs"}, "edited": false, "score": 1, "creation_date": 1453316966, "post_id": 34907505, "comment_id": 57552779, "body": "Indeed ... the char[100] was too short in some instances. fixing that fixed everything. Thanks for seeing that. I had been staring at it too long!"}], "tags": [], "owner": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "is_accepted": true, "score": 1, "last_activity_date": 1585316585, "last_edit_date": 1585316585, "creation_date": 1453313734, "answer_id": 34907505, "question_id": 34906576, "link": "https://stackoverflow.com/questions/34906576/mongodb-bson-oid-failure/34907505#34907505", "title": "MongoDB BSON OID Failure", "body": "<p>I <strong>guess</strong> that your JSON string does not fit into <code>char[100]</code> and therefore the segfault is produced at <code>doc = bson_new_from_json((const uint8_t *)json, -1, &amp;error);</code>. I could imagine that, since you have automatic string length detection enabled (second parameter, <code>-1</code>), the function continues to read your memory after <code>char[100]</code> because it cannot find the end of a string that did not fit into the buffer.  </p>\n\n<p>To tackle this possibility, replace <code>-1</code> with <code>100</code> (i.e. the size of your buffer) and see if there's an error message instead of a segfault now.<br>\n<em>Edit:</em> Expanding on this idea, it could also be that <code>bson_new_from_json</code> fails, thus <code>doc</code> is still <em>NULL</em> and in the next line you try to append the OID to <em>NULL</em>, which could produce a segfault.</p>\n"}], "owner": {"reputation": 374, "user_id": 5117002, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5dOiu.jpg?s=128&g=1", "display_name": "Davidgs", "link": "https://stackoverflow.com/users/5117002/davidgs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 763, "favorite_count": 0, "accepted_answer_id": 34907505, "answer_count": 1, "score": 0, "last_activity_date": 1585316585, "creation_date": 1453310739, "last_edit_date": 1453315617, "question_id": 34906576, "link": "https://stackoverflow.com/questions/34906576/mongodb-bson-oid-failure", "title": "MongoDB BSON OID Failure", "body": "<p>I'm using the MongoDB C library to insert documents into various collections within the same database and I'm getting the referenced error repeatedly (along with a lovely see fault) when calling BSON_APPEND_OID (doc, \"_id\", &amp;oid);</p>\n\n<p>I <em>had</em> wanted to use the same oid across collections -- so that each time-stamped entry in each collection would have the same oid, and that's when I started getting the error. So I backed off of that, and tried creating new OIDs for each entry, and I'm still getting the same error. </p>\n\n<p>Version one where I attempt to re-use the OID:</p>\n\n<pre><code>int insert_mongo(char json[100], char *coll, mongoc_client_t *client, bson_oid_t oid){\n\n    mongoc_collection_t *collection;\n    bson_error_t error;\n    bson_t *doc;\n\n    collection = mongoc_client_get_collection (client, \"edison\", coll);     \n    doc = bson_new_from_json((const uint8_t *)json, -1, &amp;error);\n    BSON_APPEND_OID (doc, \"_id\", &amp;oid);\n    if (!doc) {\n        fprintf (stderr, \"%s\\n\", error.message);\n        return EXIT_FAILURE;\n    }\n\n    if (!mongoc_collection_insert (collection, MONGOC_INSERT_NONE, doc, NULL, &amp;error)) {\n        fprintf (stderr, \"%s\\n\", error.message);\n        return EXIT_FAILURE;\n    }\n    bson_destroy (doc);\n    mongoc_collection_destroy (collection);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>And version 2 where I create a new OID:</p>\n\n<pre><code>int insert_mongo(char json[100], char *coll, mongoc_client_t *client){\n\n    mongoc_collection_t *collection;\n    bson_error_t error;\n    bson_t *doc;\n    bson_oid_t oid;\n\n    bson_oid_init (&amp;oid, NULL);\n    collection = mongoc_client_get_collection (client, \"edison\", coll);\n    doc = bson_new_from_json((const uint8_t *)json, -1, &amp;error);\n    BSON_APPEND_OID (doc, \"_id\", &amp;oid);\n    if (!doc) {\n        fprintf (stderr, \"%s\\n\", error.message);\n        return EXIT_FAILURE;\n    }\n\n    if (!mongoc_collection_insert (collection, MONGOC_INSERT_NONE, doc, NULL, &amp;error)) {\n        fprintf (stderr, \"%s\\n\", error.message);\n        return EXIT_FAILURE;\n    }\n    bson_destroy (doc);\n    mongoc_collection_destroy (collection);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Both versions seg fault the SECOND time the function is called with \nMongoDB bson_append_oid(): precondition failed: bson</p>\n"}, {"tags": ["c++", "c", "rounding"], "comments": [{"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "edited": false, "score": 1, "creation_date": 1453310538, "post_id": 34906413, "comment_id": 57548939, "body": "I doubt it is possible to read the question as fast as you down-voted. Why so?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1453310547, "post_id": 34906413, "comment_id": 57548944, "body": "Why do you need to do it this way?  Are the logical operators on your CPU broken?  Or is this just an intellectual puzzle?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1453310646, "post_id": 34906413, "comment_id": 57549016, "body": "Why not just cast one of them to <code>float</code>, perform the division to get a real number as a result, then call <code>ceil</code>?"}, {"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "edited": false, "score": 0, "creation_date": 1453310647, "post_id": 34906413, "comment_id": 57549017, "body": "Because on my embedded system I have to implement this function, there are no conditional instructions. And of course, due to performance, it would be nice not to go larger than 32 bits."}, {"owner": {"reputation": 858, "user_id": 3093427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlDuy.png?s=128&g=1", "display_name": "gmoshkin", "link": "https://stackoverflow.com/users/3093427/gmoshkin"}, "edited": false, "score": 3, "creation_date": 1453311024, "post_id": 34906413, "comment_id": 57549280, "body": "is it even possible for a cpu to not have conditional instructions?"}, {"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "edited": false, "score": 0, "creation_date": 1453311118, "post_id": 34906413, "comment_id": 57549349, "body": "There are conditional instructions, but they are expensive and destroy the pipeline, because conditionals are jumps."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453311250, "post_id": 34906413, "comment_id": 57549422, "body": "What is the range of <code>a</code> and <code>b</code>?  <code>rounded_division(a, 0)</code> and <code>rounded_division(INT_MAX, -1)</code> are problems.  It looks like we can assume <code>b &gt; 0</code>."}, {"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "edited": false, "score": 0, "creation_date": 1453311300, "post_id": 34906413, "comment_id": 57549455, "body": "The ranges are any signed integer with 32 bit."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1453311444, "post_id": 34906413, "comment_id": 57549541, "body": "<code>floor(a&#47;b + 0.5)</code> and <code>rounded_division(-1, 2) &#47;&#47; = -1</code> are contradictory. as <code>floor(-1.0&#47;2.0 + 0.5) --&gt; 0</code> Which one is correct?  Do you want floor or truncate?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453311661, "post_id": 34906413, "comment_id": 57549674, "body": "Does the code need to work on pre-C99 compiler.  Integer division has implementation dependent issues when <code>a,b</code> are negative."}, {"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453311801, "post_id": 34906413, "comment_id": 57549764, "body": "@chux: Thanks for pointing this out. The examples show what I want. I corrected the pseudo code.  No pre-C99."}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1453312803, "post_id": 34906413, "comment_id": 57550446, "body": "@MichaelDorner Are you sure that there&#39;s not a single predicated instruction in the processor?  Not even <a href=\"http://stackoverflow.com/a/14131292/2726892\">conditional-move</a>?"}, {"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1453314562, "post_id": 34906413, "comment_id": 57551473, "body": "@MooseBoys unfortunately yes: <a href=\"http://stackoverflow.com/q/22168992/1864294\">stackoverflow.com/q/22168992/1864294</a>"}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1453315300, "post_id": 34906413, "comment_id": 57551867, "body": "@MichaelDorner If you&#39;re really on ARMv8, the instruction set <i>does</i> include a limited set of conditional &quot;<a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.den0024a/CHDEEABE.html\" rel=\"nofollow noreferrer\">data processing instructions</a>&quot;, including <code>CSEL</code> (conditional-move)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1453315809, "post_id": 34906413, "comment_id": 57552163, "body": "Suggest the reference function you want is <code>int rounded_division(int a, int b) { return round(1.0*a&#47;b); }</code>. `"}, {"owner": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "edited": false, "score": 0, "creation_date": 1453316428, "post_id": 34906413, "comment_id": 57552492, "body": "Honestly, I think the &quot;problem&quot; with missing conditional instructions is not as bad as you think. AFAIK branch instructions are not that much heavier than C.I. that it would be worth writing messy code :) Better spare a stack frame and wrap your rounding functionality into a macro instead of a function"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453326398, "post_id": 34906413, "comment_id": 57558029, "body": "A far amount of work appears to be needed to get the correct functionality when either <code>a</code> or <code>b</code> are near <code>INT_MIN, INT_MAX</code>.  If requirements were relaxed such that <code>a +&#47;- b&#47;2</code> could be assumed to not overflow, then speedier code is possible."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1453327561, "post_id": 34906413, "comment_id": 57558686, "body": "Note: <code>((a &lt; 0) ^ (b &lt; 0)) ? ((a - b &#47; 2) &#47; b) : ((a + b &#47; 2) &#47; b);</code> fails to match <code>round(1.0 * a&#47;b);</code> for many large values of  <code>a</code> and <i>dramatically</i> (wrong sign) for all sorts of values of <code>b</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "edited": false, "score": 0, "creation_date": 1453310956, "post_id": 34906577, "comment_id": 57549223, "body": "I mentioned the signed integer <code>a</code> and <code>b</code>. This is the reason why this problem is not trivial."}, {"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "edited": false, "score": 0, "creation_date": 1453311259, "post_id": 34906577, "comment_id": 57549429, "body": "Yes, this was meant to be an example. :) But they are both signed integers."}, {"owner": {"reputation": 646, "user_id": 7547110, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tPZGD.png?s=128&g=1", "display_name": "NemPlayer", "link": "https://stackoverflow.com/users/7547110/nemplayer"}, "edited": false, "score": 0, "creation_date": 1537548236, "post_id": 34906577, "comment_id": 91838790, "body": "Hey! I know this is a very old post, but I&#39;d like to know how you got that formula and is it perfect? Proof would be pretty cool too. Sorry if I&#39;m bothering you."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 646, "user_id": 7547110, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tPZGD.png?s=128&g=1", "display_name": "NemPlayer", "link": "https://stackoverflow.com/users/7547110/nemplayer"}, "edited": false, "score": 1, "creation_date": 1537562927, "post_id": 34906577, "comment_id": 91845047, "body": "@NemPlayer &quot;how you got that formula&quot; --&gt; self derived.  Consider <code>b%2 == 0</code> that is <code>a&#47;b + 2*r&#47;b</code> which rounds as desired.  Try yourself walking through remaining <code>b%2 == 1</code> and <code>b%2 == -1</code> cases.  &quot;is it perfect?&quot; --&gt; tested good with billions of test cases 2 yrs ago.  I also explored corners and not just random and found no fault."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 9, "last_activity_date": 1532435195, "last_edit_date": 1532435195, "creation_date": 1453310741, "answer_id": 34906577, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators/34906577#34906577", "title": "Rounding integer division without logical operators", "body": "<p><code>a/b + a%b/(b/2 + b%2)</code> works quite well - not failed in billion+ test cases.  It meets all OP's goals: No overflow, no <code>long long</code>, no branching, works over entire range of <code>int</code> when <code>a/b</code> is defined.</p>\n\n<p>No 32-bit dependency.  If using C99 or later, no implementation behavior restrictions.</p>\n\n<pre><code>int rounded_division(int a, int b) {\n  int q = a / b;\n  int r = a % b;\n  return q + r/(b/2 + b%2);\n}\n</code></pre>\n\n<p>This works with 2's complement, 1s' complement and sign-magnitude as all operations are math ones.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453311875, "post_id": 34906904, "comment_id": 57549822, "body": "Note: An example of implementation-defined behavior is the propagation of the high-order bit when a signed integer is shifted right.  C11 3.4.1"}, {"owner": {"reputation": 858, "user_id": 3093427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlDuy.png?s=128&g=1", "display_name": "gmoshkin", "link": "https://stackoverflow.com/users/3093427/gmoshkin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1453312124, "post_id": 34906904, "comment_id": 57550021, "body": "@chux yeah, this is a tricky part. But the author of the question works with a specific platform, so the implementation-dependable behavior is not such a big problem in my opinion."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1453312596, "post_id": 34906904, "comment_id": 57550307, "body": "Nice.  <code>a + b&#47;2</code> does have a corner problem when it overflows, but suspect OP will ignore that."}, {"owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "edited": false, "score": 1, "creation_date": 1453312751, "post_id": 34906904, "comment_id": 57550404, "body": "But what happens if <code>a = INT_MAX </code> and/or <code>b = INT_MAX </code>?"}, {"owner": {"reputation": 858, "user_id": 3093427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlDuy.png?s=128&g=1", "display_name": "gmoshkin", "link": "https://stackoverflow.com/users/3093427/gmoshkin"}, "reply_to_user": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "edited": false, "score": 0, "creation_date": 1453312844, "post_id": 34906904, "comment_id": 57550478, "body": "@MichaelDorner you can convert the expression into a sum of three divisions. Maybe if you could solve this problem in your question&#39;s example, I could solve it in my answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1453313681, "post_id": 34906904, "comment_id": 57550991, "body": "This <code>rounded_division(0, -1)</code> comes up -1.  I think 0 is expected."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1453314561, "post_id": 34906904, "comment_id": 57551471, "body": "<code>rounded_division(-1, 1)</code> comes up -2.  Many unexpected results the <code>a b</code> signs differ."}, {"owner": {"reputation": 858, "user_id": 3093427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlDuy.png?s=128&g=1", "display_name": "gmoshkin", "link": "https://stackoverflow.com/users/3093427/gmoshkin"}, "reply_to_user": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1453383987, "post_id": 34906904, "comment_id": 57584324, "body": "@Amadeus what points do you mean? If you mean failure when a and b are very large, then yes, I realize that."}, {"owner": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1453384106, "post_id": 34906904, "comment_id": 57584414, "body": "@gmoshkin Yes, it does not cover all possible scenaries, but I did not realized that you know that"}], "tags": [], "owner": {"reputation": 858, "user_id": 3093427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlDuy.png?s=128&g=1", "display_name": "gmoshkin", "link": "https://stackoverflow.com/users/3093427/gmoshkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1453376774, "last_edit_date": 1453376774, "creation_date": 1453311718, "answer_id": 34906904, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators/34906904#34906904", "title": "Rounding integer division without logical operators", "body": "<p>How about this:</p>\n\n<pre><code>int rounded_division(const int a, const int b) {\n    return (a + b/2 + b * ((a^b) &gt;&gt; 31))/b;\n}\n</code></pre>\n\n<p><code>(a ^ b) >> 31</code> should evaluate to <code>-1</code> if <code>a</code> and <code>b</code> have different signs and <code>0</code> otherwise, assuming <code>int</code> has 32 bits and the leftmost is the sign bit.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>As pointed out by @chux in his comments this method is wrong due to integer division. This new version evaluates the same as OP's example, but contains a bit more operations.</p>\n\n<pre><code>int rounded_division(const int a, const int b) {\n    return (a + b * (1 + 2 * ((a^b) &gt;&gt; 31)) / 2)/b;\n}\n</code></pre>\n\n<p>This version still however does not take into account the overflow problem.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1453312014, "post_id": 34906907, "comment_id": 57549927, "body": "As OP commented &quot;ranges are any signed integer with 32 bit&quot;, certainly <code>a*b</code> may overflow."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1453312100, "post_id": 34906907, "comment_id": 57549999, "body": "@chux: Ahok, missed this comment."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1453312470, "post_id": 34906907, "comment_id": 57550225, "body": "<code>abs(a)</code> <i>seems</i> like it may generate conditional code."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1453312764, "post_id": 34906907, "comment_id": 57550414, "body": "Yes, was thinking about this as well. @chux But <i>formally</i> the approach meets the requirements, so I&#39;ll leave it around ... :)"}, {"owner": {"reputation": 858, "user_id": 3093427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlDuy.png?s=128&g=1", "display_name": "gmoshkin", "link": "https://stackoverflow.com/users/3093427/gmoshkin"}, "edited": false, "score": 0, "creation_date": 1453313449, "post_id": 34906907, "comment_id": 57550848, "body": "@alk <code>-1</code> is usually represented as <code>0xfffffff</code> not <code>0xaffffff</code>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 858, "user_id": 3093427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlDuy.png?s=128&g=1", "display_name": "gmoshkin", "link": "https://stackoverflow.com/users/3093427/gmoshkin"}, "edited": false, "score": 0, "creation_date": 1453313673, "post_id": 34906907, "comment_id": 57550985, "body": "jaja, already noticed my brain laps and cleaned up, thanks for your comment any way ... :} bit playing is not my favourite task @gmoshkin"}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 1, "last_activity_date": 1453313400, "last_edit_date": 1453313400, "creation_date": 1453311721, "answer_id": 34906907, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators/34906907#34906907", "title": "Rounding integer division without logical operators", "body": "<p>What about </p>\n\n<pre><code>  ...\n  return ((a + (a*b)/abs(a*b) * b / 2) / b);\n}\n</code></pre>\n\n<p>Without overflow:</p>\n\n<pre><code>  ...\n  return ((a + ((a/abs(a))*(b/abs(b))) * b / 2) / b);    \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5813024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6672b21ca6e03c9ce899f245b48bd76f?s=128&d=identicon&r=PG&f=1", "display_name": "MSR", "link": "https://stackoverflow.com/users/5813024/msr"}, "edited": false, "score": 0, "creation_date": 1453314268, "post_id": 34907506, "comment_id": 57551279, "body": "Ignore my post, gmoshkin provided a cleaner method."}], "tags": [], "owner": {"reputation": 11, "user_id": 5813024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6672b21ca6e03c9ce899f245b48bd76f?s=128&d=identicon&r=PG&f=1", "display_name": "MSR", "link": "https://stackoverflow.com/users/5813024/msr"}, "is_accepted": false, "score": 1, "last_activity_date": 1453313737, "creation_date": 1453313737, "answer_id": 34907506, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators/34907506#34907506", "title": "Rounding integer division without logical operators", "body": "<p>This is a rough approach that you may use. Using a mask to apply something if the operation a*b &lt; 0.  </p>\n\n<p>Please note that I did not test this appropriately.</p>\n\n<pre><code>int function(int a, int b){\n    int tmp = float(a)/b + 0.5;\n    int mask = (a*b) &gt;&gt; 31; // shift sign bit to set rest of the bits\n\n    return tmp - (1 &amp; mask);//minus one if a*b was &lt; 0\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1453326024, "last_edit_date": 1495542658, "creation_date": 1453316931, "answer_id": 34908408, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators/34908408#34908408", "title": "Rounding integer division without logical operators", "body": "<p>The following  <code>rounded_division_test1()</code> meets OP's requirement of no branching - if one counts <code>sign(int a)</code>, <code>nabs(int a)</code>, and <code>cmp_le(int a, int b)</code> as non-branching.  See <a href=\"https://stackoverflow.com/questions/1610836/branchless-code-that-maps-zero-negative-and-positive-to-0-1-2\">here</a> for ideas of how to do <code>sign()</code> without compare operators.  These helper functions could be rolled into <code>rounded_division_test1()</code> without explicit calls.</p>\n\n<p>The code demonstrates the correct functionality and is useful for testing various answers.  When <code>a/b</code> is defined, this answer does not overflow.   </p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n\nint nabs(int a) {\n  return (a &lt; 0) * a - (a &gt;= 0) * a;\n}\n\nint sign(int a) {\n  return (a &gt; 0) - (a &lt; 0);\n}\n\nint cmp_le(int a, int b) {\n  return (a &lt;= b);\n}\n\nint rounded_division_test1(int a, int b) {\n  int q = a / b;\n  int r = a % b;\n  int flag = cmp_le(nabs(r), (nabs(b) / 2 + nabs(b % 2)));\n  return q + flag * sign(b) * sign(r);\n}\n\n// Alternative that uses long long\nint rounded_division_test1LL(int a, int b) {\n  int c = (a^b)&gt;&gt;31;\n  return (a + (c*2 + 1)*1LL*b/2)/b;\n}\n\n// Reference code\nint rounded_division(int a, int b) {\n  return round(1.0*a/b);\n}\n\nint test(int a, int b) {\n  int q0 = rounded_division(a, b);\n  //int q1 = function(a,b);\n  int q1 = rounded_division_test1(a, b);\n  if (q0 != q1) {\n    printf(\"%d %d --&gt; %d %d\\n\", a, b, q0, q1);\n    fflush(stdout);\n  }\n  return q0 != q1;\n}\n\nvoid tests(void) {\n  int err = 0;\n  int const a[] = { INT_MIN, INT_MIN + 1, INT_MIN + 1, -3, -2, -1, 0, 1, 2, 3,\n      INT_MAX - 1, INT_MAX };\n  for (unsigned i = 0; i &lt; sizeof a / sizeof a[0]; i++) {\n    for (unsigned j = 0; j &lt; sizeof a / sizeof a[0]; j++) {\n      if (a[j] == 0) continue;\n      if (a[i] == INT_MIN &amp;&amp; a[j] == -1) continue;\n      err += test(a[i], a[j]);\n    }\n  }\n  printf(\"Err %d\\n\", err);\n}\n\nint main(void) {\n  tests();\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 2889887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a2c28b0a473cd1083daf0883e90dbc7?s=128&d=identicon&r=PG&f=1", "display_name": "user2889887", "link": "https://stackoverflow.com/users/2889887/user2889887"}, "is_accepted": false, "score": 0, "last_activity_date": 1453317045, "creation_date": 1453317045, "answer_id": 34908449, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators/34908449#34908449", "title": "Rounding integer division without logical operators", "body": "<p>since the function seems to be symmetric how about <code>sign(a/b)*floor(abs(a/b)+0.5)</code></p>\n"}, {"tags": [], "owner": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "is_accepted": false, "score": 1, "last_activity_date": 1453383200, "last_edit_date": 1453383200, "creation_date": 1453346674, "answer_id": 34914867, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators/34914867#34914867", "title": "Rounding integer division without logical operators", "body": "<p>Let me give my contribution:</p>\n\n<p>What about: </p>\n\n<pre><code>int rounded_division(const int a, const int b) {\n    return a/b + (2*(a%b))/b;\n}\n</code></pre>\n\n<p>No branch, no logical operators, only mathematical operators. But it could fail if b is great than INT_MAX/2 or less than INT_MIN/2.</p>\n\n<p>But if 64 bits are allowed to compute 32 bits rounds. It will not fail</p>\n\n<pre><code>int rounded_division(const int a, const int b) {\n    return a/b + (2LL*(a%b))/b;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 2273706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa10ba32ecc40bc3a1cc853a8e3a040e?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/2273706/craig"}, "is_accepted": false, "score": 1, "last_activity_date": 1560241885, "last_edit_date": 1560241885, "creation_date": 1560241266, "answer_id": 56539367, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators/56539367#56539367", "title": "Rounding integer division without logical operators", "body": "<p>Code that I came up with for use on ARM M0 (no floating point, slow divide).\nIt only uses one divide instruction and no conditionals, but will overflow if numerator + (denominator/2) > INT_MAX.</p>\n\n<p>Cycle count on ARM M0 = 7 cycles + the divide (M0 has no divide instruction, so it is toolchain dependant).</p>\n\n<pre><code>int32_t Int32_SignOf(int32_t val)\n{\n    return (+1 | (val &gt;&gt; 31)); // if v &lt; 0 then -1, else +1\n}\n\nuint32_t Int32_Abs(int32_t val)\n{\n    int32_t tmp = val ^ (val &gt;&gt; 31);\n    return (tmp - (val &gt;&gt; 31));\n\n    // the following code looks like it should be faster, using subexpression elimination\n    // except on arm a bitshift is free when performed with another operation,\n    // so it would actually end up being slower\n    // tmp = val &gt;&gt; 31;\n    // dst = val ^ (tmp);\n    // dst -= tmp;\n    // return dst;\n}\n\nint32_t Int32_DivRound(int32_t numerator, int32_t denominator)\n{\n    // use the absolute (unsigned) demominator in the fudge value\n    // as the divide by 2 then becomes a bitshift\n    int32_t  sign_num  = Int32_SignOf(numerator);\n    uint32_t abs_denom = Int32_Abs(denominator);\n    return (numerator + sign_num * ((int32_t)(abs_denom / 2u))) / denominator;\n}\n</code></pre>\n"}], "owner": {"reputation": 11776, "user_id": 1864294, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2b93a0614502fce3ed01786e631b0cb6?s=128&d=identicon&r=PG", "display_name": "Michael Dorner", "link": "https://stackoverflow.com/users/1864294/michael-dorner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 768, "favorite_count": 1, "accepted_answer_id": 34906577, "answer_count": 8, "score": 4, "last_activity_date": 1560241885, "creation_date": 1453310313, "last_edit_date": 1495541716, "question_id": 34906413, "link": "https://stackoverflow.com/questions/34906413/rounding-integer-division-without-logical-operators", "title": "Rounding integer division without logical operators", "body": "<p>I want a function</p>\n\n<pre><code>int rounded_division(const int a, const int b) { \n    return round(1.0 * a/b); \n}\n</code></pre>\n\n<p>So we have, for example,</p>\n\n<pre><code>rounded_division(3, 2) // = 2\nrounded_division(2, 2) // = 1\nrounded_division(1, 2) // = 1\nrounded_division(0, 2) // = 0\nrounded_division(-1, 2) // = -1\nrounded_division(-2, 2) // = -1\nrounded_division(-3, -2) // = 2\n</code></pre>\n\n<p>Or in code, where <code>a</code> and <code>b</code> are 32 bit signed  integers:</p>\n\n<pre><code>int rounded_division(const int a, const int b) {\n    return ((a &lt; 0) ^ (b &lt; 0)) ? ((a - b / 2) / b) : ((a + b / 2) / b);\n}\n</code></pre>\n\n<p>And here comes the tricky part: How to implement this guy <strong>efficiently</strong> (not using larger 64 bit values)  and <strong>without a logical operators</strong> such as <code>?:</code>, <code>&amp;&amp;</code>, ...? Is it possible at all?</p>\n\n<p>The reason why I am wondering of avoiding logical operators, because the processor I have to implement this function for, has no conditional instructions (<a href=\"https://stackoverflow.com/q/22168992/1864294\">more about missing conditional instructions on ARM.</a>).</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1453310771, "post_id": 34906354, "comment_id": 57549104, "body": "Unrelated, but the common naming convention for constants is all uppercase, and something more descriptive than a single letter, so for example: <code>ARRAY_SIZE</code>."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 5817128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb0b73ee747e8936d6d65746e0767100?s=128&d=identicon&r=PG", "display_name": "Heitor", "link": "https://stackoverflow.com/users/5817128/heitor"}, "edited": false, "score": 0, "creation_date": 1453313319, "post_id": 34906385, "comment_id": 57550777, "body": "What do you mean by &quot;turning on optimizations will mean that the compiler never actually allocates it.&quot; ?"}, {"owner": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "reply_to_user": {"reputation": 119, "user_id": 5817128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb0b73ee747e8936d6d65746e0767100?s=128&d=identicon&r=PG", "display_name": "Heitor", "link": "https://stackoverflow.com/users/5817128/heitor"}, "edited": false, "score": 1, "creation_date": 1453322898, "post_id": 34906385, "comment_id": 57556112, "body": "@Heitor - The compiler can tell that <code>a</code> is unused, It&#39;s a simple optimization."}], "tags": [], "owner": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "is_accepted": true, "score": 5, "last_activity_date": 1453310247, "creation_date": 1453310247, "answer_id": 34906385, "question_id": 34906354, "link": "https://stackoverflow.com/questions/34906354/gcc-segfault-with-no-optimization/34906385#34906385", "title": "gcc segfault with no optimization", "body": "<p>You've just run out of stack space.</p>\n\n<p><code>double a[n];</code> gets allocated on the stack, and it's around 40 (80?) megabytes in size.</p>\n\n<p>Making it <code>static</code> means it's no longer on the stack - and turning on optimizations will mean that the compiler never actually allocates it.</p>\n"}, {"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 7, "last_activity_date": 1453310272, "creation_date": 1453310272, "answer_id": 34906397, "question_id": 34906354, "link": "https://stackoverflow.com/questions/34906354/gcc-segfault-with-no-optimization/34906397#34906397", "title": "gcc segfault with no optimization", "body": "<p>The default <em>stack</em> size is usually small (such as 8MB). Your array size is probably too big and overflows the stack. \nYou can try to change the default stack size on *nix systems with:</p>\n\n<pre><code>ulimit -s unlimited \n</code></pre>\n\n<p>In the general case, there's no portable solution to identify whether a given array allocation with automatic storage duration (aka \"stack\") is going to be successful. So it's better to use <code>malloc()</code> when you are allocating a reasonably large object(s).</p>\n"}], "owner": {"reputation": 119, "user_id": 5817128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb0b73ee747e8936d6d65746e0767100?s=128&d=identicon&r=PG", "display_name": "Heitor", "link": "https://stackoverflow.com/users/5817128/heitor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "accepted_answer_id": 34906385, "answer_count": 2, "score": 1, "last_activity_date": 1453310272, "creation_date": 1453310133, "question_id": 34906354, "link": "https://stackoverflow.com/questions/34906354/gcc-segfault-with-no-optimization", "title": "gcc segfault with no optimization", "body": "<p>The following code compiles but gives segmentation fault when no GCC optimizations are used:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define n 10000000\n\nint main()\n{\n    fprintf(stderr, \"Array with size %ld\\n\", n * sizeof(double));\n    double a[n];\n    return 0;\n}\n\n$ gcc -O0 a.c &amp;&amp; ./a.out \nSegmentation fault (core dumped)\n$ gcc -O1 a.c &amp;&amp; ./a.out \nArray with size 80000000\n</code></pre>\n\n<p>I tested with -O1, -O2, -O3 and even with -Og it works. But with -O0 it segfaults. I am using GCC 5.3.0.</p>\n\n<p>If I remove the fprintf, or if I change the array to static double[N], there is no segmentation fault.</p>\n\n<p>Why? What is happening?</p>\n"}, {"tags": ["c", "while-loop", "infinite-loop"], "comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1453309901, "post_id": 34906244, "comment_id": 57548508, "body": "Please do mention what you&#39;re trying to achieve with the formula."}, {"owner": {"reputation": 27, "user_id": 5811764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475f948dcfe38e2d0c94d10f99ffca33?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda N", "link": "https://stackoverflow.com/users/5811764/miranda-n"}, "reply_to_user": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1453310024, "post_id": 34906244, "comment_id": 57548591, "body": "updated to include that information."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1453310410, "post_id": 34906244, "comment_id": 57548846, "body": "It would be good if you explained what the variable <code>i</code> is."}], "answers": [{"comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 3, "creation_date": 1453310791, "post_id": 34906415, "comment_id": 57549123, "body": "&quot;The only problem is, if your monthly payment are less than the interest rate - then the amount you need to pay back grows exponentially and the program never stops.&quot; Like real life :)"}], "tags": [], "owner": {"reputation": 3012, "user_id": 1182783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/057cdd9cf7b633503dee43ba597c64e7?s=128&d=identicon&r=PG", "display_name": "jofel", "link": "https://stackoverflow.com/users/1182783/jofel"}, "is_accepted": false, "score": 1, "last_activity_date": 1453310313, "creation_date": 1453310313, "answer_id": 34906415, "question_id": 34906244, "link": "https://stackoverflow.com/questions/34906244/c-program-gets-stuck-in-an-infinite-loop/34906415#34906415", "title": "C Program gets stuck in an infinite loop", "body": "<p>The program works as expected.\nThe only problem is, if your monthly payment are less\nthan the interest rate - then the amount you need to pay back\ngrows exponentially and the program never stops.</p>\n\n<p>Enter any number >= <code>92</code> and it seems to work.</p>\n\n<p>Is 22% p.a. interest rate correctly?</p>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 5817207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z3XMq.jpg?s=128&g=1", "display_name": "Kalrunoor", "link": "https://stackoverflow.com/users/5817207/kalrunoor"}, "is_accepted": true, "score": 5, "last_activity_date": 1453310404, "creation_date": 1453310404, "answer_id": 34906450, "question_id": 34906244, "link": "https://stackoverflow.com/questions/34906244/c-program-gets-stuck-in-an-infinite-loop/34906450#34906450", "title": "C Program gets stuck in an infinite loop", "body": "<p>Well, if I'm doing the math correctly it looks like if you enter a value less than 91.67 for P you are going to get stuck in an infinite loop because the monthly payments are less than the interest accusing on the debt; so you might want to add a check for that.</p>\n\n<p>As an aside if you named your variables as Interest, Base, etc. you wouldn't need the comments and the code would be easier to read.</p>\n\n<p>Also since you are printing out the payment info until balance is zero you should loop while b > 0.</p>\n"}, {"tags": [], "owner": {"reputation": 2834, "user_id": 1304312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c212de59f2f1a83a44b36487408aabf?s=128&d=identicon&r=PG", "display_name": "Diego Elio Petten&#242;", "link": "https://stackoverflow.com/users/1304312/diego-elio-petten%c3%b2"}, "is_accepted": false, "score": 1, "last_activity_date": 1453310592, "creation_date": 1453310592, "answer_id": 34906513, "question_id": 34906244, "link": "https://stackoverflow.com/questions/34906244/c-program-gets-stuck-in-an-infinite-loop/34906513#34906513", "title": "C Program gets stuck in an infinite loop", "body": "<p>I don't see this generating an infinite loop but it would become a problem if your repayment is higher than the matured interest, which with your starting parameter it means anything below 91.67.</p>\n\n<p>You may have a wrong end condition so there is always a negative line printed, though.</p>\n"}], "owner": {"reputation": 27, "user_id": 5811764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475f948dcfe38e2d0c94d10f99ffca33?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda N", "link": "https://stackoverflow.com/users/5811764/miranda-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 34906450, "answer_count": 3, "score": 1, "last_activity_date": 1453320621, "creation_date": 1453309810, "last_edit_date": 1453320621, "question_id": 34906244, "link": "https://stackoverflow.com/questions/34906244/c-program-gets-stuck-in-an-infinite-loop", "title": "C Program gets stuck in an infinite loop", "body": "<p>The problem I've been having is that my code will get stuck either in an infinite loop or will have a stack overflow problem and begin producing negative numbers during calculations.</p>\n\n<p>I am aware that this issue is coming from my while loop and also think the issue probably lies with the formula I am using being the line <code>i = (r / 12)*(b - p + temp);</code>.</p>\n\n<p>However I am unsure of how to fix this. My formula is trying to calculate the interest paid on a fixed interest loan for each month over 12 months and print that to the screen with the remaining balance. This is supposed to continue until the balance reaches <code>0</code>.  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n// main function\nint main()\n{\n    // variable declarations\n    float r = 0.22;   // interest rate\n    float b = 5000.0; // amount borrowed\n    float p;          // payment amount\n    int   m = 1;\n    float temp, ti = 0;\n    float i;\n\n    // Take in data from user\n    printf(\"Please enter the amount you wish to pay monthly: \\n\");\n    scanf(\"%f\", &amp;p);\n    printf(\"\\n\");\n\n    //display interest rate, initial balance, monthly payment\n    printf(\"r = %.2f\\nb = %.1f\\np = %.1f \\n\\n\", r, b, p);\n\n    // Month by month table showing month interest due/paid and remaining balance\n    i = (r / 12) * b;\n    temp = i;\n    printf(\"%d %.2f %.2f\\n\", m,i,b);\n    m++;\n\n    while (i &gt; 0) {\n        i = (r / 12) * (b - p + temp);\n        b = (b - p + temp);\n        ti += temp;\n        temp = i;\n        printf(\"%d %.2f %.2f\\n\",m, i, b);\n        m++;\n    }\n    printf(\"\\n\");\n    printf(\"total interest paid: %.2f\\n\", ti);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "validation", "input", "output"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1453308903, "post_id": 34905852, "comment_id": 57547840, "body": "Read input using <code>fgets()</code> and then parse it."}, {"owner": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "edited": false, "score": 0, "creation_date": 1453308967, "post_id": 34905852, "comment_id": 57547888, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/15228388/input-validation-using-scanf\">Input validation using scanf()</a>"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 2, "creation_date": 1453309067, "post_id": 34905852, "comment_id": 57547963, "body": "For interactive sessions always <i>read a whole line</i>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453415535, "post_id": 34905852, "comment_id": 57603935, "body": "the <code>scanf_s()</code> will NEVER input the alpha char(s) when using &#39;%f&#39;  (it will consume any white space)   Strongly suggest checking the returned value (not the parameter value) to assure the operation was successful.  (in this case the returned value should be 1.)   When the returned value is not 1, clean the stdin with something like: <code>int ch; while( (ch = getchar()) != EOF &amp;&amp; &#39;\\n&#39; != ch );</code>"}], "answers": [{"tags": [], "owner": {"reputation": 468, "user_id": 4734402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259b3fc3f2c46196b6f66f6ae9f84b70?s=128&d=identicon&r=PG", "display_name": "Ben Love", "link": "https://stackoverflow.com/users/4734402/ben-love"}, "is_accepted": false, "score": 0, "last_activity_date": 1453308979, "creation_date": 1453308979, "answer_id": 34905952, "question_id": 34905852, "link": "https://stackoverflow.com/questions/34905852/how-to-check-for-correct-data-input-in-c/34905952#34905952", "title": "How to check for correct data input in C", "body": "<p>You could use the function isdigit().  If you do, take a look at the return value and use that for your checking.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 4471398, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100008571934471/picture?type=large", "display_name": "Chandler Pavia", "link": "https://stackoverflow.com/users/4471398/chandler-pavia"}, "edited": false, "score": 0, "creation_date": 1453310894, "post_id": 34905970, "comment_id": 57549189, "body": "Thanks for your input! I will attempt to understand and utilize this."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1453309018, "creation_date": 1453309018, "answer_id": 34905970, "question_id": 34905852, "link": "https://stackoverflow.com/questions/34905852/how-to-check-for-correct-data-input-in-c/34905970#34905970", "title": "How to check for correct data input in C", "body": "<p><code>scanf()</code> wouldn't discard invalid input. So it's read again and again and results in an infinite loop.\nYou can read a <em>line</em> using <a href=\"http://man7.org/linux/man-pages/man3/fgetc.3.html\" rel=\"nofollow\"><code>fgets()</code></a> and parse it using <a href=\"http://man7.org/linux/man-pages/man3/scanf.3.html\" rel=\"nofollow\"><code>sscanf()</code></a>:</p>\n\n<pre><code>   char line[1024];\n   float lowWarp;\n\n   fgets(line, sizeof line, stdin);\n\n   if(sscanf(line, \"%f\", &amp;lowWarp) != 1) {\n     /* invalid */\n   }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 4471398, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100008571934471/picture?type=large", "display_name": "Chandler Pavia", "link": "https://stackoverflow.com/users/4471398/chandler-pavia"}, "edited": false, "score": 0, "creation_date": 1453310851, "post_id": 34906275, "comment_id": 57549164, "body": "As I am new to C, I am struggling to understand I3x&#39;s solution let alone the complexity of your code. I thank you immensely for your input and will spend the day on google reviewing your solution."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1453310214, "last_edit_date": 1453310214, "creation_date": 1453309893, "answer_id": 34906275, "question_id": 34905852, "link": "https://stackoverflow.com/questions/34905852/how-to-check-for-correct-data-input-in-c/34906275#34906275", "title": "How to check for correct data input in C", "body": "<p><code>scanf_s(\"%f\", &amp;lowWarp);</code> does not consume bad input as it repetitively looks for valid numeric input.  Result: infinite loop when <code>\"asdf\"</code> entered and <code>scanf_s()</code> called again.</p>\n\n<p>As good code that handles evil things a user may enter needs a number of tests, might as well make a helper function.</p>\n\n<pre><code>// 0:success or EOF\nint Read_float(const char *prompt, float *dest, float min, float max) {\n  for (;;) {\n    char buf[100];\n    fputs(prompt, stdout);\n    fflush(stdout);\n    if (fgets(buf, sizeof buf, stdin) == NULL) {\n      return EOF;\n    }\n    char *endptr;\n    double y = strtod(buf, &amp;endptr);\n    if (buf == endptr || *endptr != '\\n') {\n      continue; // only \\n entered or invalid `chars` entered\n    }\n    if (y &gt;= min &amp;&amp; y &lt;= max) {\n     *dest = (float) y;\n     return 0; // success\n    }\n  }\n}  \n\nfloat lowWarp;\nif (Read_float(\"Enter the low warp factor; warp factor = \\n\", \n    &amp;lowWarp, 1.0f, 10.0f) == EOF) {\n  Handle_EOF();\n}\n\nfloat highWarp;\nif (Read_float(\"Enter the high warp factor; warp factor = \\n\", \n    &amp;highWarp, 10.0f, 100.0f) == EOF) {\n  Handle_EOF();\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4471398, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100008571934471/picture?type=large", "display_name": "Chandler Pavia", "link": "https://stackoverflow.com/users/4471398/chandler-pavia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1453310214, "creation_date": 1453308699, "question_id": 34905852, "link": "https://stackoverflow.com/questions/34905852/how-to-check-for-correct-data-input-in-c", "title": "How to check for correct data input in C", "body": "<p>I have the following code to ask a user for input (lowWarp). The input must be from 1.0 to 10.0. If I enter, say, 0.2, it allows me to attempt entering another value. However, if I enter something like 1/2 or asdf it starts endlessly looping. How do I prevent this and instead allow a proper value to be entered?</p>\n\n<pre><code>while (badData == true)\n{\n    printf(\"Enter the low warp factor; warp factor = \\n\");\n    scanf_s(\"%f\", &amp;lowWarp);\n    if (lowWarp &lt; 1.0 || lowWarp &gt; 10.0) //Determines if number is between 1.0 - 10.0\n    {\n        badData = true;\n        printf(\"Invalid input! Range is 1.0 - 10.0.\\n\");\n        lowWarp = 0.0;\n    }\n    else\n    {\n        badData = false;\n    }\n} \n</code></pre>\n"}, {"tags": ["c", "debugging", "gdb"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1453308849, "post_id": 34905015, "comment_id": 57547808, "body": "Seriously, try setting a breakpoint somewhere else. Nobody is going to be able to help based on your description of the problem."}, {"owner": {"reputation": 754, "user_id": 1981160, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9b3b448352c2bf1359f2eaa1771d5cf1?s=128&d=identicon&r=PG", "display_name": "mr.wolle", "link": "https://stackoverflow.com/users/1981160/mr-wolle"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1453389605, "post_id": 34905015, "comment_id": 57588435, "body": "okay, it seems like that the problem is a pid namespace problem. You need to be in the correct namespace."}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1459253407, "creation_date": 1459253407, "answer_id": 36283894, "question_id": 34905015, "link": "https://stackoverflow.com/questions/34905015/debugged-program-crashes-after-resuming-execution/36283894#36283894", "title": "Debugged program crashes after resuming execution", "body": "<p>okay, it seems like that the problem is a pid namespace problem. You need to be in the correct namespace. \u2013 mr.wolle</p>\n"}], "owner": {"reputation": 754, "user_id": 1981160, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9b3b448352c2bf1359f2eaa1771d5cf1?s=128&d=identicon&r=PG", "display_name": "mr.wolle", "link": "https://stackoverflow.com/users/1981160/mr-wolle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459253407, "creation_date": 1453306394, "question_id": 34905015, "link": "https://stackoverflow.com/questions/34905015/debugged-program-crashes-after-resuming-execution", "title": "Debugged program crashes after resuming execution", "body": "<p>I am debugging a remote program using Eclipse(gdb) and a gdbserver. I am attaching my Eclipse to the already running program. Then it stops the execution at the position my breakpoint is. This all works well. I can see the content of the variables. Great. But if I then want to resume the execution via e.g. Resume or Step Over, the program gives me a segmentation fault. Do you have any ideas why a segmentation fault can happen if a debugger comes in ?</p>\n\n<p>The program uses multiple threads.\nThe last gdb traces output is following. Here a SIGILL is throwed.</p>\n\n<pre>\n\n    064,490 59-exec-next --thread 7 1\n    064,629 59^running\n    064,629 *running,thread-id=\"7\"\n    064,629 (gdb) \n    064,685 *stopped,reason=\"signal-received\",signal-name=\"SIGILL\",signal-meaning=\"Illegal instruction\",\\\n    frame={addr=\"0x000000000044c2df\",func=\"func_func\",args=[{name=\"this\",value=\"0x4053b8\"}],fil\\\n    e=\"src/funcs.c\",fullname=\"/home/local/wolle/src/funcs.c\",line=\"100\"\\\n    },thread-id=\"7\",stopped-threads=\"all\",core=\"1\"\n\n</pre>\n"}, {"tags": ["c", "switch-statement", "character", "scanf"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1453307225, "post_id": 34904963, "comment_id": 57546674, "body": "An answer explains the fault, but also should <code>flag</code> and <code>nob</code> not be set when a bad entry caused the <code>default</code> case?"}, {"owner": {"reputation": 45, "user_id": 5342729, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/08ace93591d722daea889b7ebdd99ab0?s=128&d=identicon&r=PG&f=1", "display_name": "harry", "link": "https://stackoverflow.com/users/5342729/harry"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453308124, "post_id": 34904963, "comment_id": 57547296, "body": "@Weather vane ,I am sorry ..I didn&#39;t understand what u have asked."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1453308305, "post_id": 34904963, "comment_id": 57547437, "body": "I was saying, after the <code>switch</code> statement you modify <code>flag</code> and <code>nob</code>. But if there was an invalid input, causing the <code>default:</code> case, did you still want those two variable updates? If not, move them to each of the other individual (successful) <code>case</code> statements. See the answer&#39;s update."}, {"owner": {"reputation": 45, "user_id": 5342729, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/08ace93591d722daea889b7ebdd99ab0?s=128&d=identicon&r=PG&f=1", "display_name": "harry", "link": "https://stackoverflow.com/users/5342729/harry"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453308803, "post_id": 34904963, "comment_id": 57547782, "body": "Yeah,I didn&#39;t recognize it.The answer&#39;s update is correct .I will change it .Thanks for that."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 5342729, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/08ace93591d722daea889b7ebdd99ab0?s=128&d=identicon&r=PG&f=1", "display_name": "harry", "link": "https://stackoverflow.com/users/5342729/harry"}, "edited": false, "score": 0, "creation_date": 1453308898, "post_id": 34904998, "comment_id": 57547835, "body": "Thats very much helped and corrected my code completely.can u pls explain why should we keep space before %c ."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1453309092, "post_id": 34904998, "comment_id": 57547979, "body": "The space before <code>%c</code> consumes all leading whitespace in the input buffer. In your case, it was the <code>newline</code> left over after a <code>%d</code> entry. It is not needed for <code>%d</code> or <code>%s</code> or other types, which automactically consume leading whitespace. I hate <code>scanf</code>."}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "reply_to_user": {"reputation": 45, "user_id": 5342729, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/08ace93591d722daea889b7ebdd99ab0?s=128&d=identicon&r=PG&f=1", "display_name": "harry", "link": "https://stackoverflow.com/users/5342729/harry"}, "edited": false, "score": 1, "creation_date": 1453309100, "post_id": 34904998, "comment_id": 57547987, "body": "@harry - For the previous <code>scanf()</code> for <code>nob</code>, you had to press enter to end the scan. The problem is that the newline that was entered is still in the buffer, and the next <code>scanf()</code> that scans for a single char will read in the enter first. So <code>type</code> wil have the value &#39;\\n&#39;."}, {"owner": {"reputation": 45, "user_id": 5342729, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/08ace93591d722daea889b7ebdd99ab0?s=128&d=identicon&r=PG&f=1", "display_name": "harry", "link": "https://stackoverflow.com/users/5342729/harry"}, "edited": false, "score": 0, "creation_date": 1453309382, "post_id": 34904998, "comment_id": 57548169, "body": "Thank u so much for that.Its very informative and accurate.U really deserve credit and i have given it.Bye"}], "tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": true, "score": 4, "last_activity_date": 1453308315, "last_edit_date": 1495541718, "creation_date": 1453306352, "answer_id": 34904998, "question_id": 34904963, "link": "https://stackoverflow.com/questions/34904963/something-wrong-with-character-input-and-switch-case-in-c/34904998#34904998", "title": "Something wrong with character input and switch case in C?", "body": "<p>There has to be a space before <code>%c</code> - also the <code>\\\\n</code> is not needed here:</p>\n\n<pre><code>scanf(\" %c\", &amp;type); //what type of object\n</code></pre>\n\n<p>Otherwise, the <code>newline</code> (<code>\\n</code>) from the previous <code>scanf()</code> will be read in as <code>type</code> (this is not needed for <code>%d</code>).</p>\n\n<p>You also need to define <code>ans</code>:</p>\n\n<pre><code>int ans[4] = {0};\n</code></pre>\n\n<p>And <code>j</code> is not used - can be removed:</p>\n\n<pre><code>'j' : unreferenced local variable\n</code></pre>\n\n<p>Also, as <a href=\"https://stackoverflow.com/users/4142924/weather-vane\">Weather Vane</a> mentioned, in case of bad input for <code>type</code>, <code>flag</code> and <code>nob</code> should not be updated. You can fix this as follows:</p>\n\n<pre><code>default :\n    printf(\"you entered wrong letter.\");\n    continue;\n}\nflag=1;\nnob--;\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 5342729, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/08ace93591d722daea889b7ebdd99ab0?s=128&d=identicon&r=PG&f=1", "display_name": "harry", "link": "https://stackoverflow.com/users/5342729/harry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 0, "accepted_answer_id": 34904998, "answer_count": 1, "score": 1, "last_activity_date": 1453308315, "creation_date": 1453306268, "last_edit_date": 1453307232, "question_id": 34904963, "link": "https://stackoverflow.com/questions/34904963/something-wrong-with-character-input-and-switch-case-in-c", "title": "Something wrong with character input and switch case in C?", "body": "<p>There is a question in which it takes the no: of cases and in each case it takes no: of objects and each object is either a point or circle or line segment. I have written complete code but the switch case is not working. Any suggestions are appreciated.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main()\n{\n    int test,nob,ans[4],px,py,cx,cy,cr,lx1,ly1,lx2,ly2,flag,i,j;\n    char type;\n\n    scanf(\"%d\",&amp;test); //no:of test cases\n\n    while(test) {\n\n        flag=0;\n        scanf(\"%d\",&amp;nob); //no:of objects\n        while(nob)\n        {\n            scanf(\"%c\\\\n\",&amp;type); //what type of object\n            switch(type)\n            {\n            case 'p':\n                {\n                    scanf(\"%d%d\",&amp;px,&amp;py);\n                    if((px&lt;=ans[0] &amp;&amp; py&lt;=ans[1] &amp;&amp; px&gt;=ans[2] &amp;&amp; py&gt;=ans[3])|| flag==0) {\n                        ans[0]=px;ans[1]=py;ans[2]=px;ans[3]=py;\n                    }\n                    break;\n                }\n            case 'c':\n                {\n                    scanf(\"%d%d%d\",&amp;cx,&amp;cy,&amp;cr);\n                    if((cx-cr&lt;=ans[0] &amp;&amp; cy-cr&lt;=ans[1] &amp;&amp; cx+cr&gt;=ans[2] &amp;&amp; cy+cr&gt;=ans[3])|| flag==0) {\n                        ans[0]=cx-cr;ans[1]=cy-cr;ans[2]=cx+cr;ans[3]=cy+cr;\n                    }\n                    break;\n                }\n            case 'l':\n                {\n                    scanf(\"%d%d%d%d\",&amp;lx1,&amp;ly1,&amp;lx2,&amp;ly2);\n                    if((lx1&lt;=ans[0] &amp;&amp; ly1&lt;=ans[1] &amp;&amp; lx2&gt;=ans[2] &amp;&amp; ly2&gt;=ans[3])|| flag==0) {\n                        ans[0]=lx1;ans[1]=ly1;ans[2]=lx2;ans[3]=ly2;\n                    }\n                    break;\n                }\n            default:\n                printf(\"you entered wrong letter.\");\n            }\n            flag=1;\n            nob--;\n        }\n        for(i=0;i&lt;4;i++)\n        {\n            printf(\"%d \",ans[i]);\n        }\n        printf(\"\\n\");\n        test--;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>When you run this program, the <code>switch case</code> is not working. I think so there is something wrong in taking the input of type character. pls help me. I have been trying to solve this bug for 3 days.</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4477315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6e8cc4a41e5d4e323f0d5393820406?s=128&d=identicon&r=PG&f=1", "display_name": "sadasas sadsadas", "link": "https://stackoverflow.com/users/4477315/sadasas-sadsadas"}, "edited": false, "score": 0, "creation_date": 1453305824, "post_id": 34904781, "comment_id": 57545650, "body": "Oh my god. lol. You saved me from wasting 2 hours of my life trying to figure out what&#39;s wrong. Thanks :)"}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 21, "user_id": 4477315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6e8cc4a41e5d4e323f0d5393820406?s=128&d=identicon&r=PG&f=1", "display_name": "sadasas sadsadas", "link": "https://stackoverflow.com/users/4477315/sadasas-sadsadas"}, "edited": false, "score": 1, "creation_date": 1453305869, "post_id": 34904781, "comment_id": 57545689, "body": "@sadasassadsadas, no problem.. Just take some time to name your profile properly.. :p"}, {"owner": {"reputation": 21, "user_id": 4477315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6e8cc4a41e5d4e323f0d5393820406?s=128&d=identicon&r=PG&f=1", "display_name": "sadasas sadsadas", "link": "https://stackoverflow.com/users/4477315/sadasas-sadsadas"}, "edited": false, "score": 0, "creation_date": 1453306253, "post_id": 34904781, "comment_id": 57545956, "body": "Sadasas Sadsadas? :P"}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 21, "user_id": 4477315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6e8cc4a41e5d4e323f0d5393820406?s=128&d=identicon&r=PG&f=1", "display_name": "sadasas sadsadas", "link": "https://stackoverflow.com/users/4477315/sadasas-sadsadas"}, "edited": false, "score": 0, "creation_date": 1453306584, "post_id": 34904781, "comment_id": 57546209, "body": "@sadasassadsadas, Exactly..  :)"}], "tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": true, "score": 2, "last_activity_date": 1453305835, "last_edit_date": 1453305835, "creation_date": 1453305728, "answer_id": 34904781, "question_id": 34904730, "link": "https://stackoverflow.com/questions/34904730/error-iso-c-forbids-nested-functions-whats-wrong/34904781#34904781", "title": "error: ISO C forbids nested functions - What&#39;s wrong?", "body": "<p>You missed a closing braces for <code>for</code> loop in the function <code>arraycpy</code></p>\n\n<pre><code>void arraycpy(int *dest, int *src, int n)\n{\n    int i;\n    int *src_p, *dst_p;\n\n    src_p = (int*)src;\n    dst_p = (int*)dest;\n\n    for (i = 0; i &lt; n; i++) {\n        *(dst_p+i) = *(src_p+i);\n    }\n // ^^^\n}\n</code></pre>\n\n<p>So, the next braces is being taken as the braces for the <code>for</code> loop, and thus when you define the next function, it is being defined inside the next function <code>arraycpy</code></p>\n"}], "owner": {"reputation": 21, "user_id": 4477315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6e8cc4a41e5d4e323f0d5393820406?s=128&d=identicon&r=PG&f=1", "display_name": "sadasas sadsadas", "link": "https://stackoverflow.com/users/4477315/sadasas-sadsadas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12790, "favorite_count": 1, "accepted_answer_id": 34904781, "answer_count": 1, "score": 0, "last_activity_date": 1453305835, "creation_date": 1453305620, "last_edit_date": 1453305735, "question_id": 34904730, "link": "https://stackoverflow.com/questions/34904730/error-iso-c-forbids-nested-functions-whats-wrong", "title": "error: ISO C forbids nested functions - What&#39;s wrong?", "body": "<p>What's wrong with this merge sort usage?\n<br>I'm trying to sort an array of size 9 as given in main().\n<br>However, I'm using the merge_sort method and it gives me the error: \"ISO C forbids nested functions\" for every function.\n<br> When I delete the arraycpy function these messages will no longer appear, so it's obviously a problem with \"arraycpy\".\n<br> Note that I can't use the string.h library since I'm limited to only these 3.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\nvoid merge(int a[], int na, int b[], int nb, int c[])\n{\n   int ia, ib, ic;\n   for(ia = ib = ic = 0; (ia &lt; na) &amp;&amp; (ib &lt; nb); ic++)\n   {\n       if(a[ia] &lt; b[ib]) {\n           c[ic] = a[ia];\n           ia++;\n       }\n       else {\n           c[ic] = b[ib];\n           ib++;\n       }\n   }\n   for(;ia &lt; na; ia++, ic++) c[ic] = a[ia];\n   for(;ib &lt; nb; ib++, ic++) c[ic] = b[ib];\n}\n\nvoid arraycpy(int *dest, int *src, int n)\n{\n    int i;\n    int *src_p, *dst_p;\n\n    src_p = (int*)src;\n    dst_p = (int*)dest;\n\n    for (i = 0; i &lt; n; i++) {\n        *(dst_p+i) = *(src_p+i);\n}\n\nvoid internal_msort(int a[], int n, int helper_array[])\n{\n    int left = n/2;\n    int right = n/2;\n    if (n &lt; 2)\n        return;\n    internal_msort(a, left, helper_array);\n    internal_msort(a + left, right, helper_array);\n    merge(a, left, a + left, right, helper_array);\n    arraycpy(a, helper_array, n*sizeof(int));\n}\n\nvoid merge_sort(int a[], int n)\n{\n   int *tmp_array = malloc(sizeof(int) * n);\n   internal_msort(a, n, tmp_array);\n   free(tmp_array);\n}\n\nvoid rem_sort(int array[], int size)\n{\n    merge_sort(array, size);\n}\n\nint main()\n{\n    int array[] = {3,55,72,4,21,6,9,0,4};\n    merge_sort(array, 9);\n    for (int i=0;i&lt;9;i++)\n        printf(\"%d | \", array[i]);\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "casting", "typedef", "c-preprocessor"], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1453305154, "last_edit_date": 1453305154, "creation_date": 1453304653, "answer_id": 34904399, "question_id": 34904376, "link": "https://stackoverflow.com/questions/34904376/typedef-arrays-and-pointers-in-c/34904399#34904399", "title": "typedef, arrays and pointers in C", "body": "<blockquote>\n  <p>The thing that I don't understand is, what is the type of data?</p>\n</blockquote>\n\n<p>The type of <code>data</code> is a pointer to a two-dimensional array. That is <code>uint8_t(*data)[4][4]</code>.</p>\n\n<p>See <a href=\"http://ieng9.ucsd.edu/~cs30x/rt_lt.rule.html\" rel=\"nofollow\">C right-left rule</a> for deciphering C declarations.</p>\n\n<blockquote>\n  <p>Plus, I want to assign values to this variable <code>st.data = (int8_t *)array</code>.</p>\n</blockquote>\n\n<p>In this case <code>array</code> must have the same layout as <code>uint8_t[4][4]</code> array. Since arrays are contiguous in <code>C</code>, that <code>array</code> must have at least 4 * 4 elements of type <code>int8_t</code>.</p>\n\n<p>The fact that you have to cast the <code>array</code> with <code>(uint8_t*)</code> first implies that <code>array</code> has a different type and that may cause trouble.</p>\n\n<p>Note that this is a pointer assignment only, not an element-wise copy of <code>array</code>.</p>\n\n<blockquote>\n  <p>is it possible to assign values to my data_t variable without declaring it as a pointer in my structure?</p>\n</blockquote>\n\n<p>It is possible if <code>data</code> is not a pointer, i.e. declare it as <code>data_t data;</code>. And then copy into it using <code>memcpy</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1453305388, "last_edit_date": 1453305388, "creation_date": 1453305060, "answer_id": 34904528, "question_id": 34904376, "link": "https://stackoverflow.com/questions/34904376/typedef-arrays-and-pointers-in-c/34904528#34904528", "title": "typedef, arrays and pointers in C", "body": "<p>This declaration</p>\n\n<pre><code>typedef uint8_t data_t[4][4];\n</code></pre>\n\n<p>declares name <code>data_t</code> as an alias for type <code>uint8_t [4][4]</code>.</p>\n\n<p>Thus in the structure definition</p>\n\n<pre><code>typedef struct {\n   data_t *data;\n   ...\n} my_struct;\n</code></pre>\n\n<p>member data is a pointer of type <code>data_t *</code> that is the same as <code>uint8_t ( * )[4][4]</code>.</p>\n\n<p>So it is a pointer to a two-dimensional array of pointers to objects of type `uint8_t</p>\n\n<p>Arrays do not have the assignment operator. You have to copy elements of one array into another.</p>\n\n<p>If for example you have another one-dimensional array of pointers like</p>\n\n<pre><code>uint8_t *array[4];\n</code></pre>\n\n<p>you could write</p>\n\n<pre><code>my_struct st;\nst.data = malloc( sizeof( data_t ) );\nmemcpy( st.( *data )[0], array, 4 * sizeof( uint8_t * ) );\n</code></pre>\n\n<p>Take into account that as the <code>data</code> is a pointer you have at first to allocate memory where you are going to copy objects of type <code>uint8_t *</code>.</p>\n"}], "owner": {"reputation": 1140, "user_id": 3983330, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LkOU1.png?s=128&g=1", "display_name": "Raoul722", "link": "https://stackoverflow.com/users/3983330/raoul722"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 912, "favorite_count": 0, "accepted_answer_id": 34904399, "answer_count": 2, "score": 1, "last_activity_date": 1453305388, "creation_date": 1453304565, "question_id": 34904376, "link": "https://stackoverflow.com/questions/34904376/typedef-arrays-and-pointers-in-c", "title": "typedef, arrays and pointers in C", "body": "<p>I am studying a code written in C language.</p>\n\n<p>The following part isn't clear for me:</p>\n\n<pre><code>typedef uint8_t data_t[4][4];\n\ntypedef struct {\n   data_t *data;\n   ...\n} my_struct;\n</code></pre>\n\n<p>The thing that I don't understand is, what is the type of <code>data</code>?</p>\n\n<p>Plus, I want to assign values to this variable.\nFor example, in the code there is:</p>\n\n<pre><code>my_struct st;\nst.data = (int8_t *)array\n</code></pre>\n\n<p>where array is defined as <code>int8_t *array</code>.</p>\n\n<p>I don't understand how this assignation works, could someone explain it clearly?</p>\n\n<p>To finish, is it possible to assign values to my <code>data_t</code> variable without declaring it as a pointer in my structure?</p>\n"}, {"tags": ["c", "embedded"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453305384, "post_id": 34904364, "comment_id": 57545298, "body": "I would change the <code>char</code> to <code>unsigned char</code> if it is representing peripheral address space."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453305497, "post_id": 34904364, "comment_id": 57545402, "body": "Aside: you don&#39;t need to cast to <code>void*</code> with <code>(void*)ptr</code>, the point of the <code>void*</code> type for <code>memcpy</code> is that it accepts any pointer type."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1453305593, "post_id": 34904364, "comment_id": 57545469, "body": "Code will not compile. Is address_reg identical with address?"}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1453305993, "post_id": 34904364, "comment_id": 57545775, "body": "Are you sure adresses are using 8 bits ? That would mean that the maximum length of any program (code + data) is 256 bytes. I understand that the registers may be 8 bits. But that doesn&#39;t mean that the address space is 8 bits too. Compare <code>sizeof(char *)</code> with <code>sizeof(char)</code> (i.e. with 1). What do you get ?"}, {"owner": {"reputation": 3, "user_id": 5161046, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153382652640295/picture?type=large", "display_name": "Joao Andrade", "link": "https://stackoverflow.com/users/5161046/joao-andrade"}, "edited": false, "score": 0, "creation_date": 1453306110, "post_id": 34904364, "comment_id": 57545859, "body": "Ctx, yes.Edited. You are right, addresses are not using 8-bit. From what I can tell, 32-bits are being used. Maybe a better solution would be to define an 8-bit memory addressing space with 1 byte words. Then the address would be an offset to a certain base address of the peripheral, yet to the C function is a &#39;fully qualified address&#39; to another memory space, or at least act like one."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1453306485, "post_id": 34904364, "comment_id": 57546135, "body": "@JoaoAndrade as described in the answer below, this code is wrong: <code>char address_reg = (char*)(peripheral_array);</code>.  That code tries to stuff the 4 bytes of data in <code>peripheral_array</code> as a <code>char *</code> into the <b>one-byte</b> <code>char address_reg</code>.  It doesn&#39;t fit."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453306571, "post_id": 34904364, "comment_id": 57546198, "body": "It now seems that <code>char array[4] = {3,32,-12,99};</code> (which should be <code>unsigned char</code>) represents a 32-bit address, but it&#39;s still not clear whether each byte needs to be written to the same peripheral address, or to 4 consecutive addresses."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1453306612, "post_id": 34904364, "comment_id": 57546228, "body": "@AndrewHenle sometimes it can be required to write all the values to the same register in a particular sequence."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453306651, "post_id": 34904364, "comment_id": 57546253, "body": "@WeatherVane - True, but that&#39;s not what the (currently) posted code is doing.  It&#39;s trying to put the (presumed) 4-byte address of <code>peripheral_array</code> into a <code>char</code>."}], "answers": [{"tags": [], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "is_accepted": false, "score": 1, "last_activity_date": 1453308233, "last_edit_date": 1453308233, "creation_date": 1453306276, "answer_id": 34904967, "question_id": 34904364, "link": "https://stackoverflow.com/questions/34904364/store-address-as-value-and-use-it-later-on-pointer/34904967#34904967", "title": "Store address as value and use it later on pointer", "body": "<p>why storing it into <code>char</code>? the variable that can hold an address to a <code>char</code> is a <code>char*</code> - On Both machines - your PC and your embedded MCU!</p>\n\n<p>On your MCU <code>sizeof(char*)</code> may be 1 or 2, and on your PC it may be 4 or 8;</p>\n\n<p>If you want to write platform compatible code, use a <code>char*</code>.</p>\n\n<p>If you want to go a few steps further to simulating the machines address space then you have to provide own implementations of the standard-lib functions. So that they interpret addresses in machines address space as indices to some some memory array that you defined.</p>\n\n<p>However the better approach is mostly to provide some Hardware Abstraction Layer (HAL) that encapsulates system specific tasks, rather than using machine specifica in your business logic.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 5161046, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153382652640295/picture?type=large", "display_name": "Joao Andrade", "link": "https://stackoverflow.com/users/5161046/joao-andrade"}, "edited": false, "score": 0, "creation_date": 1453307171, "post_id": 34905082, "comment_id": 57546636, "body": "Will pursue this one."}], "tags": [], "owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "is_accepted": true, "score": 3, "last_activity_date": 1453306551, "creation_date": 1453306551, "answer_id": 34905082, "question_id": 34904364, "link": "https://stackoverflow.com/questions/34904364/store-address-as-value-and-use-it-later-on-pointer/34905082#34905082", "title": "Store address as value and use it later on pointer", "body": "<p>You want to emulate something with a 8-bit address space in an environment with a 32-bit or 64-bit address space, and thus you have some difficulties, because it doesn't convert trivially. Specifically, this line <code>char address_reg = (char*)(peripheral_array)</code> cast a wide pointer to a 8-bit value, and lose most of the pointer, which means you won't be able to convert back.</p>\n\n<p>The solution is to push further your simulation and emulate your destination 8-bit address space :</p>\n\n<ul>\n<li>Typedef a 8-bit pointer (cleaner) : <code>typedef uint8_t ptr8;</code></li>\n<li>Declare your 8-bit destination address space : <code>uint8_t my_destination_memory[256]</code></li>\n<li>Define you own memcpy to copy to this address space : <pre>void my_memcpy( ptr8 addr_dest, const void * src, int len ) {\n&emsp;&emsp;&emsp;&emsp;memcpy( my_destination_memory + addr_dest, src, len );\n}\n</pre></li>\n</ul>\n\n<p>This way you can pass around your 8-bit pointer of type <code>ptr8</code> (or whatever you name it) and copy to it without problem.<br>\nNote that I assumed that your source address space is not of importance, buti f it is you can also emulate it. You should be able to emulate 16-bit or even 24-bit address space in the same way (You can use the native pointers if you need 32-bit).</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1453386261, "creation_date": 1453386261, "answer_id": 34926335, "question_id": 34904364, "link": "https://stackoverflow.com/questions/34904364/store-address-as-value-and-use-it-later-on-pointer/34926335#34926335", "title": "Store address as value and use it later on pointer", "body": "<p>First of all, please note that storing integer values in the <code>char</code> type is dangerous, since it is a type with implementation-defined signedness. It should never be used for anything but strings.</p>\n\n<p>Instead, always use either <code>int8_t</code> (signed) or <code>uint8_t</code> (unsigned).</p>\n\n<hr>\n\n<p>The cause of the problem is that a <code>char</code> (or an <code>int8_t</code> for that matter) is not large enough to hold an address. </p>\n\n<p>There is however the <code>uintptr_t</code> in <code>stdint.h</code> which is guaranteed to be large enough to contain an address.</p>\n\n<p>Simply replace</p>\n\n<pre><code>char address_reg = (char*)(peripheral_array);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>uintptr_t address_reg = (uintptr_t)peripheral_array;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5161046, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153382652640295/picture?type=large", "display_name": "Joao Andrade", "link": "https://stackoverflow.com/users/5161046/joao-andrade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 996, "favorite_count": 0, "accepted_answer_id": 34905082, "answer_count": 3, "score": -1, "last_activity_date": 1453389221, "creation_date": 1453304551, "last_edit_date": 1453389221, "question_id": 34904364, "link": "https://stackoverflow.com/questions/34904364/store-address-as-value-and-use-it-later-on-pointer", "title": "Store address as value and use it later on pointer", "body": "<p>I'm trying to emulate a system that needs to copy data to a peripheral, bare metal, no OS.</p>\n\n<p>The convention states that the copy function is a C-function which takes as the address of the peripheral an 8-bit address that is written to a certain register. The peripheral uses that internally. However, I'm simulating the thing in C and to test the full functionality I am doing something like the following MWE:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc,char *argv[]){\n\n    //stack-array to copy\n    char array[4] = {3,32,-12,99};\n    //naive emulation of the peripheral memory space\n    char peripheral_array[4];\n\n    //herein lies the address send as a value\n    char address_reg = (char*)(peripheral_array);\n\n    //assume this is the peripheral side\n    //set ptr to the address of the peripheral_array\n    char *ptr = (char*) address_reg;\n    memcpy((void*)ptr,array,sizeof(char)*4);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>I get <code>segmentation fault</code>.</p>\n\n<ul>\n<li><p>What's the issue at hand here?</p></li>\n<li><p>How can I store the pointer of array as a value, send it, recast it successfully as the address to an array and perform the <code>memcpy</code>?</p></li>\n</ul>\n"}, {"tags": ["c", "keyboard", "calculator", "avr", "lcd"], "comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1453305119, "post_id": 34904259, "comment_id": 57545102, "body": "This can have many reasons: Is the second function of some pins on portc activated? (i.e. TWI)? Some typo in the PORTC-Code (It would have been better to post this one instead of the working PORTB-Code)? Of course the circuit may be erroneous (by design or by a bad connection). Some GPIO-Pins in PORTC may be defunct, you should measure their function one by one. You would have to provide all relevant code and probably the circuit itself"}], "answers": [{"tags": [], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "is_accepted": false, "score": 1, "last_activity_date": 1453379616, "creation_date": 1453379616, "answer_id": 34923965, "question_id": 34904259, "link": "https://stackoverflow.com/questions/34904259/with-the-same-code-i-get-two-different-answers-from-two-port-in-atmega16a/34923965#34923965", "title": "with the same code i get two different answers from two port in ATMEGA16A", "body": "<p>Most probably you did not deactivated the JTAG Port that uses some Pins on Port C. Look at the fuses and set them to deactivate the JTAG to be able to use the port in your application.</p>\n"}], "owner": {"reputation": 1, "user_id": 5743266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5262644fbeede9694500058633d82f7?s=128&d=identicon&r=PG&f=1", "display_name": "Mina", "link": "https://stackoverflow.com/users/5743266/mina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1453379616, "creation_date": 1453304272, "question_id": 34904259, "link": "https://stackoverflow.com/questions/34904259/with-the-same-code-i-get-two-different-answers-from-two-port-in-atmega16a", "title": "with the same code i get two different answers from two port in ATMEGA16A", "body": "<p>i'm trying to make a calculator which needs two keyboards with ATMEGA16A\ni have wrote a code for getting input from the keyboard and it's working on PORTB but the same code (with just changing B to C)doesn't work on PORTC!!</p>\n\n<p>please help me i'm getting crazy :(</p>\n\n<pre><code> while(y[1]== 0 || y[0] ==24) \n        {\n            getB(y);\n            if(y[1]== 0 || y[0] ==24)\n            {\n                getC(y);\n            }\n        }\n\n    int* getB(int *y)\n{\n    int key;\n    DDRB = 0x0F;\n    PORTB = 0xF0;\n    delay_ms(5);\n    key = PINB;\n    DDRB = 0xF0;\n    PORTB = 0x0F;\n    delay_ms(5);       \n    key = key | PINB;\n    delay_ms(10); \n    if(key != 0xFF) {keyboardB(y);}\n    return y;\n}\n\nint* keyboardB(int* y)\n{\n    DDRB = 0x0F;\n\n    PORTB.0 = 1;\n    PORTB.1 = 0;\n    PORTB.2 = 0;\n    PORTB.3 = 0;\n    if(PINB.5 == 1){y[0] = 14; y[1] = 1; lcd_puts(\"*\");while(PINB.5 == 1){PORTD.0 = 1;}PORTD.0 = 0;return y;}\n    if(PINB.4 == 1){y[0] = 15; y[1] = 1; lcd_puts(\"/\");while(PINB.4 == 1){PORTD.0 = 1;}PORTD.0 = 0; return y;}\n    if(PINB.6 == 1){y[0] = 13; y[1] = 1; lcd_puts(\"-\");while(PINB.6 == 1){PORTD.0 = 1;}PORTD.0 = 0; return y;}\n    if(PINB.7 == 1){y[0] = 12; y[1] = 1; lcd_puts(\"+\");while(PINB.7 == 1){PORTD.0 = 1;}PORTD.0 = 0; return y;}\n    //=================================================\n    PORTB.0 = 0;\n    PORTB.1 = 1;\n    PORTB.2 = 0;\n    PORTB.3 = 0;\n    if(PINB.5 == 1){y[0] = 9; y[1] = 1; lcd_puts(\"9\");while(PINB.5 == 1){PORTD.0 = 1;}PORTD.0 = 0;return y;}\n    if(PINB.4 == 1){y[0] = 11; y[1] = 1; lcd_puts(\"=\");while(PINB.4 == 1){PORTD.0 = 1;}PORTD.0 = 0; return y;}\n    if(PINB.6 == 1){y[0] = 6; y[1] = 1; lcd_puts(\"6\");while(PINB.6 == 1){PORTD.0 = 1;}PORTD.0 = 0; return y;}\n    if(PINB.7 == 1){y[0] = 3; y[1] = 1; lcd_puts(\"3\");while(PINB.7 == 1){PORTD.0 = 1;}PORTD.0 = 0; return y;}\n    //=================================================\n    PORTB.0 = 0;\n    PORTB.1 = 0;\n    PORTB.2 = 1;\n    PORTB.3 = 0;\n    if(PINB.5 == 1){y[0] = 8; y[1] = 1; lcd_puts(\"8\");while(PINB.5 == 1){PORTD.0 = 1;}PORTD.0 = 0;return y;}\n    if(PINB.4 == 1){y[0] = 0; y[1] = 1; lcd_puts(\"0\");while(PINB.4 == 1){PORTD.0 = 1;}PORTD.0 = 0; return y;}\n    if(PINB.6 == 1){y[0] = 5; y[1] = 1; lcd_puts(\"5\");while(PINB.6 == 1){PORTD.0 = 1;}PORTD.0 = 0; return y;}\n    if(PINB.7 == 1){y[0] = 2; y[1] = 1; lcd_puts(\"2\");while(PINB.7 == 1){PORTD.0 = 1;}PORTD.0 = 0; return y;}\n    //=================================================\n    PORTB.0 = 0;\n    PORTB.1 = 0;\n    PORTB.2 = 0;\n    PORTB.3 = 1;\n    if(PINB.4 == 1)     //Mode\n    {\n        //delay_ms(1000);\n        //if(PINB.4 == 1) {while(PINB.4 == 1){}y[0] = 10; y[1] = 1; return y;}\n        //else {y[0] = 10; y[1] = 0; return y;}  //value of y[0] is not important\n        y[0] = 24; y[1] = 1;while(PINB.4 == 1){PORTD.0 = 1;}PORTD.0 = 0; return y;\n    }\n    if(PINB.5 == 1){y[0] = 24; y[1] = 1;while(PINB.5 == 1){PORTD.0 = 1;}PORTD.0 = 0; return y;}\n    if(PINB.6 == 1){y[0] = 24; y[1] = 1;while(PINB.6 == 1){PORTD.0 = 1;}PORTD.0 = 0; return y;}\n    if(PINB.7 == 1){y[0] = 24; y[1] = 1;;while(PINB.7 == 1){PORTD.0 = 1;}PORTD.0 = 0; return y;}\n}\n</code></pre>\n"}, {"tags": ["c", "switch-statement"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1453303695, "post_id": 34904011, "comment_id": 57544025, "body": "The first code has several mistakes and won&#39;t even compile."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1453303818, "post_id": 34904011, "comment_id": 57544107, "body": "&quot;<i>How does these cases work if <code>c = 0</code></i>&quot; -- Did you mean &quot;<code>c = &#39;0&#39;</code>&quot;? Because <code>0</code> and <code>&#39;0&#39;</code> are different."}, {"owner": {"reputation": 5115, "user_id": 864696, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/88RyU.jpg?s=128&g=1", "display_name": "Ross Presser", "link": "https://stackoverflow.com/users/864696/ross-presser"}, "edited": false, "score": 0, "creation_date": 1453303871, "post_id": 34904011, "comment_id": 57544154, "body": "looks like homework ..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453303920, "post_id": 34904011, "comment_id": 57544200, "body": "This will not even compile! What is <code>i &#171; 0</code> supposed to do??"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1453304411, "post_id": 34904011, "comment_id": 57544576, "body": "As a side note, you really don&#39;t need to spend effort understanding the &quot;fall through feature&quot; of switch-case, just know that it is there. Since &quot;case fall though&quot; is very bad and dangerous practice that should never be used - mainly because it is hard to tell if it was added by accident or done intentionally. (If you ever find yourself needing it, it is a clear indication of code rot or poor design.) Just add a <code>break</code> to every <code>case</code> and everything will be fine."}, {"owner": {"reputation": 1217, "user_id": 5348801, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb7973840503d60cfebfb06b3ee198c1?s=128&d=identicon&r=PG&f=1", "display_name": "psrag anvesh", "link": "https://stackoverflow.com/users/5348801/psrag-anvesh"}, "edited": false, "score": 0, "creation_date": 1453304482, "post_id": 34904011, "comment_id": 57544626, "body": "guys sorry about the code!"}, {"owner": {"reputation": 1217, "user_id": 5348801, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb7973840503d60cfebfb06b3ee198c1?s=128&d=identicon&r=PG&f=1", "display_name": "psrag anvesh", "link": "https://stackoverflow.com/users/5348801/psrag-anvesh"}, "edited": false, "score": 0, "creation_date": 1453304535, "post_id": 34904011, "comment_id": 57544666, "body": "Lundin i wanted to learn what it is and how it works, not for any practical use"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1453304734, "post_id": 34904011, "comment_id": 57544815, "body": "@Lundin, I disagree with your premise that &#39;fall through&#39; is always bad.   I do agree that a lack of a comment to assure the reader of the code that the &#39;fall through&#39; was on purpose is very bad"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1453304874, "post_id": 34904011, "comment_id": 57544920, "body": "If you do use it in real code, make sure it is clearly commented as being intentional. When I&#39;ve used it in the past, I&#39;ve added a comment like <code>&#47;* fall through *&#47;</code> at the point where it falls through to the next <code>case</code> or <code>default</code> label."}, {"owner": {"reputation": 1217, "user_id": 5348801, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb7973840503d60cfebfb06b3ee198c1?s=128&d=identicon&r=PG&f=1", "display_name": "psrag anvesh", "link": "https://stackoverflow.com/users/5348801/psrag-anvesh"}, "edited": false, "score": 0, "creation_date": 1453304983, "post_id": 34904011, "comment_id": 57544998, "body": "So how does fall through work?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453304986, "post_id": 34904011, "comment_id": 57545001, "body": "for ease of understanding and readability by us humans, 1) please follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement</i> 2) separate code blocks (for, if, else, while, do...while, switch, case, default) by one blank line"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453305642, "post_id": 34904011, "comment_id": 57545505, "body": "@user3629249 I too used to think that it was ok to use fall-through as long as you commented it explicitly. But then I started looking at the greater picture and how I ended up with the need for the fall-through in the first place. It is <i>always</i> because of muddy thinking or poor design and there is always a more sound, more readable alternative."}, {"owner": {"reputation": 1217, "user_id": 5348801, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb7973840503d60cfebfb06b3ee198c1?s=128&d=identicon&r=PG&f=1", "display_name": "psrag anvesh", "link": "https://stackoverflow.com/users/5348801/psrag-anvesh"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1453305786, "post_id": 34904011, "comment_id": 57545607, "body": "@Lundin can you share a bit of your knowledge even to me by explaining how it works?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1453306138, "post_id": 34904011, "comment_id": 57545875, "body": "@psraganvesh If there is no break, it will fall through non-conditionally (it won&#39;t check the switch condition again) and execute the next statement underneath it. And that&#39;s that. <code>case</code> works exactly like <code>goto</code> labels."}, {"owner": {"reputation": 1217, "user_id": 5348801, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb7973840503d60cfebfb06b3ee198c1?s=128&d=identicon&r=PG&f=1", "display_name": "psrag anvesh", "link": "https://stackoverflow.com/users/5348801/psrag-anvesh"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1453306267, "post_id": 34904011, "comment_id": 57545966, "body": "@Lundin Thanks atlast!"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1453306320, "post_id": 34904011, "comment_id": 57546010, "body": "@psraganvesh: there&#39;s no magic here; it&#39;s like any other sequence of statements.  The presence of the <code>case</code> labels doesn&#39;t affect execution."}], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 5690203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07ded5d2028fb4cb859a69cc6157e8e0?s=128&d=identicon&r=PG&f=1", "display_name": "Kai Iskratsch", "link": "https://stackoverflow.com/users/5690203/kai-iskratsch"}, "is_accepted": false, "score": 0, "last_activity_date": 1453304028, "creation_date": 1453304028, "answer_id": 34904178, "question_id": 34904011, "link": "https://stackoverflow.com/questions/34904011/how-does-falling-through-cases-in-c-work/34904178#34904178", "title": "How does falling through cases in c work?", "body": "<p>the switch in c jumps to the case with the matching value and then executes all code from there  until it finds a break or switch ends. son in 2nd example for value 0 all other cases are evaluated too. if you don't want this you need a break.</p>\n"}], "owner": {"reputation": 1217, "user_id": 5348801, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb7973840503d60cfebfb06b3ee198c1?s=128&d=identicon&r=PG&f=1", "display_name": "psrag anvesh", "link": "https://stackoverflow.com/users/5348801/psrag-anvesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1453304132, "creation_date": 1453303637, "last_edit_date": 1453304132, "question_id": 34904011, "link": "https://stackoverflow.com/questions/34904011/how-does-falling-through-cases-in-c-work", "title": "How does falling through cases in c work?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nmain() /* count digits, white space, others */\n{\n    int c, i, nwhite, nother, ndigit[10];\n    nwhite = nother = 0;\n    for (i = 0; i &lt; 10; i++)\n        ndigit[i] = 0;\n    while ((c = getchar()) != EOF) {\n        switch (c) {\n        case '0': case '1': case '2': case '3': case '4':\n        case '5': case '6': case '7': case '8': case '9':\n            ndigit[c-'0']++;\n            break;\n        case ' ':\n        case '\\n':\n        case '\\t':\n            nwhite++;\n            break;\n        default:\n            nother++;\n            break;\n        }\n    }\n    printf(\"digits =\");\n    for (i = 0; i &lt; 10; i++)\n        printf(\" %d\", ndigit[i]);\n    printf(\", white space = %d, other = %d\\n\",\n        nwhite, nother);\n    return 0;\n}\n</code></pre>\n\n<p>Question 1 - How does these cases work if c = 0 then does the control go to directly to the statements and break or does it remember that c = 0 and continue falling through until the statements?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int i = 0;\n    for(i = 0; i &lt; 20; i++)\n    {\n        switch(i)\n        {\n            case 0: i+=5;\n            case 1: i+=2;\n            case 5: i+=5;\n            default: i+= 4;\n            break;\n        }\n        printf(\"%d \", i);\n    }\n    return 0;\n} \n</code></pre>\n\n<p>Question 2 - In a program like this why does 2 add up in case 1? Where the current value of i will be 5? Does the control ignore all the remaining/underling case constant expressions until it finds a break if one case is true?  </p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1453302942, "post_id": 34903687, "comment_id": 57543480, "body": "Do not cast the result of <code>malloc</code> &amp; friends in C. <code>sizeof(char)</code> is <b>defined</b> to yield <code>1</code>. There is no sense in using it. And <code>return</code> is a statement, not a f<b>u</b>nction. Do not parentitise the expression."}, {"owner": {"reputation": 43, "user_id": 5816450, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1rJGY6EOpiE/AAAAAAAAAAI/AAAAAAAABiI/8RfSXE0sW-4/photo.jpg?sz=128", "display_name": "jdavin", "link": "https://stackoverflow.com/users/5816450/jdavin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453302964, "post_id": 34903687, "comment_id": 57543498, "body": "this is the output of printf: ABCD ABDC ACDB ACBD ADBC ADCB BCDA BCAD BDAC BDCA BACD BADC CDAB CDBA CABD CADB CBDA CBAD DABC DACB DBCA DBAC DCAB DCBA"}, {"owner": {"reputation": 3012, "user_id": 1182783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/057cdd9cf7b633503dee43ba597c64e7?s=128&d=identicon&r=PG", "display_name": "jofel", "link": "https://stackoverflow.com/users/1182783/jofel"}, "edited": false, "score": 0, "creation_date": 1453302982, "post_id": 34903687, "comment_id": 57543514, "body": "Introduce a new variable into which you save the printf results, like a big array."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453303098, "post_id": 34903687, "comment_id": 57543595, "body": "Your functions are meant to return a result, but you do not use it. So what would the result be good for? Also you loose memory. To sum it up: your code seems to have multiple issues. Please rethink the whole design, use a debugger and something like Valgrind to check for memory leaks."}, {"owner": {"reputation": 43, "user_id": 5816450, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1rJGY6EOpiE/AAAAAAAAAAI/AAAAAAAABiI/8RfSXE0sW-4/photo.jpg?sz=128", "display_name": "jdavin", "link": "https://stackoverflow.com/users/5816450/jdavin"}, "edited": false, "score": 0, "creation_date": 1453303325, "post_id": 34903687, "comment_id": 57543766, "body": "thanks for your quick tips I apply that immediately and also try a sized array."}, {"owner": {"reputation": 43, "user_id": 5816450, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1rJGY6EOpiE/AAAAAAAAAAI/AAAAAAAABiI/8RfSXE0sW-4/photo.jpg?sz=128", "display_name": "jdavin", "link": "https://stackoverflow.com/users/5816450/jdavin"}, "edited": false, "score": 0, "creation_date": 1453303574, "post_id": 34903687, "comment_id": 57543935, "body": "I also think about changing all the fonction, I would rather prefer an iterative way to gen all the combinaisons I&#39;m a bit lost in this recursive.."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1453303803, "post_id": 34903687, "comment_id": 57544097, "body": "<a href=\"http://www.geeksforgeeks.org/write-a-c-program-to-print-all-permutations-of-a-given-string/\" rel=\"nofollow noreferrer\">This answers the question</a>. For the record, these are called &quot;permutations&quot; so if you Google for permutation algorithms you&#39;ll find plenty of resources."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453304039, "post_id": 34903687, "comment_id": 57544281, "body": "@jdavin: As you apparently missed my hint, I try the direct approach: It is &quot;f<b>u</b>nction&quot;, not &quot;f<b>o</b>nction&quot;. No offence!"}, {"owner": {"reputation": 43, "user_id": 5816450, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1rJGY6EOpiE/AAAAAAAAAAI/AAAAAAAABiI/8RfSXE0sW-4/photo.jpg?sz=128", "display_name": "jdavin", "link": "https://stackoverflow.com/users/5816450/jdavin"}, "edited": false, "score": 0, "creation_date": 1453304359, "post_id": 34903687, "comment_id": 57544541, "body": "haha thanks a lot Olaf I&#39;m at the very beginning of my studies I know this is kind of noob questions."}, {"owner": {"reputation": 43, "user_id": 5816450, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1rJGY6EOpiE/AAAAAAAAAAI/AAAAAAAABiI/8RfSXE0sW-4/photo.jpg?sz=128", "display_name": "jdavin", "link": "https://stackoverflow.com/users/5816450/jdavin"}, "edited": false, "score": 0, "creation_date": 1453304383, "post_id": 34903687, "comment_id": 57544553, "body": "<a href=\"http://valgrind.org\" rel=\"nofollow noreferrer\">valgrind.org</a> man valgrind"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453305428, "post_id": 34903687, "comment_id": 57545334, "body": "regarding this line: <code>combi = (char *)malloc(sizeof(char) * ft_strlen(code) + 1)</code>   1)  always check (!= NULL) the returned value to assure the operation was successful.  2) in C, the returned type is <code>void*</code> which can be assigned to any other pointer.  Casting just clutters the code making it much more difficult to understand, debug, maintain  3) the expression: <code>sizeof(char)</code>  is defined as 1.  multiplying anything by 1 has no effect.  the expression just clutters the code, making it more difficult to understand, debug, maintain."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453305902, "post_id": 34903687, "comment_id": 57545704, "body": "for ease of understanding and readability by us humans: 1) consistently indent the code, (that <code>return</code> statement needs indenting) 2) separate code blocks (for, if, else, while, do...while, switch, case, default) by a single blank line.  3)  please include key comments that indicate why things are being done (we can &#39;usually&#39; read the code to see how things are being done."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5816450, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1rJGY6EOpiE/AAAAAAAAAAI/AAAAAAAABiI/8RfSXE0sW-4/photo.jpg?sz=128", "display_name": "jdavin", "link": "https://stackoverflow.com/users/5816450/jdavin"}, "edited": false, "score": 0, "creation_date": 1453344740, "post_id": 34904780, "comment_id": 57564297, "body": "so nice thank you, I used printf in order to see what I wanted to stock, of course I will free and everything when the algo will show some results."}, {"owner": {"reputation": 43, "user_id": 5816450, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1rJGY6EOpiE/AAAAAAAAAAI/AAAAAAAABiI/8RfSXE0sW-4/photo.jpg?sz=128", "display_name": "jdavin", "link": "https://stackoverflow.com/users/5816450/jdavin"}, "edited": false, "score": 0, "creation_date": 1453345320, "post_id": 34904780, "comment_id": 57564455, "body": "I just need to generate all possible permutations of N elems starting like that: 12345 12354 12453 12435 12534 12543 13542 ... ."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1453305723, "creation_date": 1453305723, "answer_id": 34904780, "question_id": 34903687, "link": "https://stackoverflow.com/questions/34903687/how-to-stock-multiple-returns-from-a-recursive-function/34904780#34904780", "title": "How to stock multiple returns from a recursive function", "body": "<p>No, there's no any special problem with any kind of control construct in any kind of function. Use <code>while</code> or whatever. Now once we've got it out of the system, let's concentrate on the important question. How to accumulate the results of your function instead of printing them? It doesn't matter what the function actually computes, it's only important that it's recursive and each invocation prints something. We want to collect instead of printing.</p>\n\n<p>First, a function should return something. Your current function returns a <code>char*</code> but it is never used. Your new function should return a value you are after, that is, a <em>collection</em>.</p>\n\n<pre><code>typedef struct {\n   /* whatever */\n} string_collection;\n</code></pre>\n\n<p>We don't specify what sits inside of the collection. It might be a linked list, or a dynamic array together with its length, or whatever. You decide what kind of collection you want.</p>\n\n<p>Now you need a couple of functions:</p>\n\n<pre><code>string_collection* create_empty_collection();\nvoid add_element (string_collection* c, const char* s);\nvoid move_elements (string_collection* c1, \n                    string_collection* c2); // moves all elements from c2 to c1, leaving c2 empty\nvoid destroy_collection (string_collection* c);\n</code></pre>\n\n<p>These functions modify their arguments. These are only example signatures. You may go for fully immutable interface if you wish:</p>\n\n<pre><code>string_collection* add_element (const string_collection* c, const char* s); \nstring_collection* concatenate (const string_collection* c1, \n                                const string_collection* c2); //etc\n</code></pre>\n\n<p>In this variant, you create a brand new collection without touching existing ones. Each style has its place; use whatever works for you.</p>\n\n<p>Now it's simple to modify the function:</p>\n\n<pre><code>string_collection* your_function (whatever parameters) \n{\n   // First, need a collection to return\n   string_collection* coll = create_empty_collection();\n\n   // whatever \n   // whatever\n\n   // ATTN: old code was: printf (\"%s\", something), now do this:\n   add_elememt (coll, something); \n\n   // whatever \n   // whatever\n\n   // ATTN: old code was: your_function(whatever parameters), now do this:\n   string_collection* new_coll = your_function(whatever parameters);\n   move_elements (coll, new_coll);\n   destroy_collection (new_coll);\n\n   // whatever \n   // whatever\n\n   // ATTN: old code was: return something, now do this:\n   return coll;\n}\n</code></pre>\n\n<p>When you call your function, you now do:</p>\n\n<pre><code>string_collection* coll = your_function (whatever parameters)'\n// do something with the collection\ndestroy_collection (coll);\n</code></pre>\n\n<p>Here we have just learned to accumulate recursive function results. Awesome!</p>\n\n<p>On a related note, your function <code>malloc</code>s a string each time it's called, but there's no <code>free</code> in sight. This is bad (a memory leak). Please add </p>\n\n<pre><code>free (combi);\n</code></pre>\n\n<p>where appropriate. In your case this means before any <code>return</code> statement. (It's a good practice to have a single <code>return</code> statement in the end of the function, instead of multiple statements scattered throughout the body; this is one reason for that).</p>\n"}, {"tags": [], "owner": {"reputation": 320, "user_id": 6267334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O_6dUCMzLxI/AAAAAAAAAAI/AAAAAAAAAF4/82deNWqdHio/photo.jpg?sz=128", "display_name": "Dinesh Agrawal", "link": "https://stackoverflow.com/users/6267334/dinesh-agrawal"}, "is_accepted": false, "score": 0, "last_activity_date": 1463331946, "creation_date": 1463331946, "answer_id": 37241215, "question_id": 34903687, "link": "https://stackoverflow.com/questions/34903687/how-to-stock-multiple-returns-from-a-recursive-function/37241215#37241215", "title": "How to stock multiple returns from a recursive function", "body": "<p>you can simplify the program using below logic     </p>\n\n<pre><code>char str[]=\"ABCD\";\n     int i,j,k,l,count=0;\n     char temp;\n      l=strlen(str);\n      j=0;\n      k=1;\n      for(i=0;i&lt;factorial(l);i++)\n       {\n        if(j==l)\n         {\n          j=0;\n         }\n        if(k==l)\n         {\n          k=0;\n         }\n        temp=str[j];\n        str[j]=str[k];\n        str[k]=temp;\n        printf(\"%s\\n\",str);\n        j++;\n        k++;\n       }\n</code></pre>\n\n<p>for more info you can <a href=\"http://ccodinggeek.blogspot.in/2016/03/c-program-to-print-all-posstion.html\" rel=\"nofollow\">see here</a></p>\n"}], "owner": {"reputation": 43, "user_id": 5816450, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1rJGY6EOpiE/AAAAAAAAAAI/AAAAAAAABiI/8RfSXE0sW-4/photo.jpg?sz=128", "display_name": "jdavin", "link": "https://stackoverflow.com/users/5816450/jdavin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 34904780, "answer_count": 2, "score": -1, "last_activity_date": 1493731376, "creation_date": 1453302742, "last_edit_date": 1493731376, "question_id": 34903687, "link": "https://stackoverflow.com/questions/34903687/how-to-stock-multiple-returns-from-a-recursive-function", "title": "How to stock multiple returns from a recursive function", "body": "<p>I am working on generating all combinations from a code like ABCD for example, 24 combinations for this one 1 * 2 * 3 * 4.</p>\n\n<p>I have this function:</p>\n\n<pre><code>static char     *combi_switch(char *code, int i)\n{\n    char        *combi;\n    int         j;\n    int         k;\n    int         l;\n    int         s;\n\n    combi = (char *)malloc(sizeof(char) * ft_strlen(code) + 1);\n    ft_strcpy(combi, code);\n    k = i;\n    l = i;\n    j = ft_strlen(code) - 1;\n    if (i == j)\n    {\n        printf(\"%s\\n\", combi);\n        return (combi);\n    }\n    while (l &lt;= j)\n    {\n        s = combi[i];\n        combi_switch(map, combi, k + 1, stock);\n        while (i &lt; j)\n        {\n            combi[i] = combi[i + 1];\n            i++;\n        }\n        i = k;\n        combi[j] = s;\n        l++;\n    }\nfree(combi);\nreturn (NULL);\n}\n</code></pre>\n\n<p>ini called by this one:</p>\n\n<pre><code>char            *combi_mix(char *code)\n{\n    combi_switch(code, 0);  \n    return (NULL);\n}\n</code></pre>\n\n<p>ft_strlen &amp;&amp; ft_strcpy are the same as the libc contains.</p>\n\n<p>So with this functions if the code = \"ABCD\", <code>printf</code> illustrates the 24 combinations that are returned.\nI went to stock all returns maybe in a char ** or a linked list.</p>\n\n<ul>\n<li>is there a way to stock all those combinations that I <code>printf</code>?</li>\n<li>is there a problem using \"while\" loops in recursive functions?</li>\n</ul>\n\n<p>This is one of the last functions of my project so thank you so much if you can help me!</p>\n"}, {"tags": ["c", "multithreading", "process", "shared-memory", "semaphore"], "comments": [{"owner": {"reputation": 4476, "user_id": 2058293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3798efb3cfd8001e14b637ea09fd2e70?s=128&d=identicon&r=PG", "display_name": "aaaaaa123456789", "link": "https://stackoverflow.com/users/2058293/aaaaaa123456789"}, "edited": false, "score": 0, "creation_date": 1453303024, "post_id": 34903627, "comment_id": 57543544, "body": "Have you checked the <code>errno</code> value that <code>semget()</code> is leaving behind?"}, {"owner": {"reputation": 427, "user_id": 4405260, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ca6f1bd188ff701e0eea239481d82901?s=128&d=identicon&r=PG&f=1", "display_name": "EagleOne", "link": "https://stackoverflow.com/users/4405260/eagleone"}, "reply_to_user": {"reputation": 4476, "user_id": 2058293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3798efb3cfd8001e14b637ea09fd2e70?s=128&d=identicon&r=PG", "display_name": "aaaaaa123456789", "link": "https://stackoverflow.com/users/2058293/aaaaaa123456789"}, "edited": false, "score": 0, "creation_date": 1453303069, "post_id": 34903627, "comment_id": 57543571, "body": "No, i didn&#39;t check the errno"}, {"owner": {"reputation": 4476, "user_id": 2058293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3798efb3cfd8001e14b637ea09fd2e70?s=128&d=identicon&r=PG", "display_name": "aaaaaa123456789", "link": "https://stackoverflow.com/users/2058293/aaaaaa123456789"}, "edited": false, "score": 0, "creation_date": 1453303135, "post_id": 34903627, "comment_id": 57543613, "body": "You should probably do that to see what error you&#39;re getting."}, {"owner": {"reputation": 427, "user_id": 4405260, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ca6f1bd188ff701e0eea239481d82901?s=128&d=identicon&r=PG&f=1", "display_name": "EagleOne", "link": "https://stackoverflow.com/users/4405260/eagleone"}, "reply_to_user": {"reputation": 4476, "user_id": 2058293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3798efb3cfd8001e14b637ea09fd2e70?s=128&d=identicon&r=PG", "display_name": "aaaaaa123456789", "link": "https://stackoverflow.com/users/2058293/aaaaaa123456789"}, "edited": false, "score": 0, "creation_date": 1453303420, "post_id": 34903627, "comment_id": 57543835, "body": "It was : invalid argument"}, {"owner": {"reputation": 4476, "user_id": 2058293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3798efb3cfd8001e14b637ea09fd2e70?s=128&d=identicon&r=PG", "display_name": "aaaaaa123456789", "link": "https://stackoverflow.com/users/2058293/aaaaaa123456789"}, "edited": false, "score": 0, "creation_date": 1453303479, "post_id": 34903627, "comment_id": 57543873, "body": "Reading from the man page, the error is probably that you&#39;re passing a 0 as the amount of semaphores in the set, but the set doesn&#39;t exist yet and it is trying to create it; therefore it fails since it cannot create a set with no semaphores."}, {"owner": {"reputation": 427, "user_id": 4405260, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ca6f1bd188ff701e0eea239481d82901?s=128&d=identicon&r=PG&f=1", "display_name": "EagleOne", "link": "https://stackoverflow.com/users/4405260/eagleone"}, "reply_to_user": {"reputation": 4476, "user_id": 2058293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3798efb3cfd8001e14b637ea09fd2e70?s=128&d=identicon&r=PG", "display_name": "aaaaaa123456789", "link": "https://stackoverflow.com/users/2058293/aaaaaa123456789"}, "edited": false, "score": 0, "creation_date": 1453303552, "post_id": 34903627, "comment_id": 57543919, "body": "The set already exists and is created by the master program. The slave program has the same key and should not create a new semaphore."}, {"owner": {"reputation": 4476, "user_id": 2058293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3798efb3cfd8001e14b637ea09fd2e70?s=128&d=identicon&r=PG", "display_name": "aaaaaa123456789", "link": "https://stackoverflow.com/users/2058293/aaaaaa123456789"}, "edited": false, "score": 0, "creation_date": 1453303595, "post_id": 34903627, "comment_id": 57543947, "body": "Are you sure the master program is running <i>before</i> the slaves, then? This looks like a typical race condition issue."}, {"owner": {"reputation": 427, "user_id": 4405260, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ca6f1bd188ff701e0eea239481d82901?s=128&d=identicon&r=PG&f=1", "display_name": "EagleOne", "link": "https://stackoverflow.com/users/4405260/eagleone"}, "reply_to_user": {"reputation": 4476, "user_id": 2058293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3798efb3cfd8001e14b637ea09fd2e70?s=128&d=identicon&r=PG", "display_name": "aaaaaa123456789", "link": "https://stackoverflow.com/users/2058293/aaaaaa123456789"}, "edited": false, "score": 0, "creation_date": 1453303711, "post_id": 34903627, "comment_id": 57544035, "body": "Yes because the fork() is before the exec(). Moreover, the instruction for shared memory and semaphore are very similar and they are written in almost the same order in all the .c files, but the shared memory is successfully used and the semaphore not."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1453306185, "post_id": 34903627, "comment_id": 57545905, "body": "@EagleOne <i>Yes because the fork() is before the exec().</i>  That actually means &quot;No&quot;.  If you don&#39;t explicitly synchronize actions, you can not be sure one happens before the other, even if it &quot;works&quot;.  Assuming you&#39;re runnong on Linux, what&#39;s the output from <code>ipcs -s</code>?"}, {"owner": {"reputation": 427, "user_id": 4405260, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ca6f1bd188ff701e0eea239481d82901?s=128&d=identicon&r=PG&f=1", "display_name": "EagleOne", "link": "https://stackoverflow.com/users/4405260/eagleone"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1453317361, "post_id": 34903627, "comment_id": 57552991, "body": "@Andrew Henle When the fork is called, the semid and semid parameters all surely already set by the master process, because it is the only process active. After setting semid and semid, the master program uses the fork() and then the exec(). So the actions have a precise order of execution"}], "owner": {"reputation": 427, "user_id": 4405260, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ca6f1bd188ff701e0eea239481d82901?s=128&d=identicon&r=PG&f=1", "display_name": "EagleOne", "link": "https://stackoverflow.com/users/4405260/eagleone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453302559, "creation_date": 1453302559, "question_id": 34903627, "link": "https://stackoverflow.com/questions/34903627/error-sharing-semaphore-id", "title": "Error sharing semaphore id", "body": "<p>I am writing a multiprocess program in which one master program executes other ones. They share a memory area and their accesses are controlled by a semaphore.</p>\n\n<p>In the master program I wrote:</p>\n\n<pre><code>#define shared_memory_path \".\"\n#define semaphore_path \".\"\n#define shared_memory_char 'a'\n#define semaphore_char 'b'\nshm_key = ftok(shared_memory_path,shared_memory_char);\nsem_key = ftok(semaphore_path,semaphore_char);\nsemid = semget(sem_key,3,IPC_CREAT|0664);\nshmid = shmget(shm_key,sizeof(myDataStructure),IPC_CREAT|0664);\n//initialization of the semaphores\n</code></pre>\n\n<p>Then in the two slave programs i wrote:</p>\n\n<pre><code>shm_key = ftok(shared_memory_path,shared_memory_char);\nsem_key = ftok(semaphore_path,semaphore_char);\n/*so i will have the same keys of the master program (the printf() function\nprint exactly the same keys  */\nshm_id = shmget(shm_key,0,IPC_CREAT|0664);\nsem_id = semget(sem_key,0,IPC_CREAT|0664); \n//I verified that the shm_id is recognized by master and slaves (with a printf())\n</code></pre>\n\n<p>The problem is that the sem_id returns a -1 value in the slaves (in the master it is a correct value). I used similar instructions for both shared memory and semaphores, but the shared memory is correctly recognized, the sempahore is not.</p>\n\n<p>I found other code that applies the same solution but that code is working.</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453301554, "post_id": 34903244, "comment_id": 57542456, "body": "This will not solve the problem but use <code>scanf(&quot;%20s%n&quot;, string_buffer, &amp;length);</code> instead of <code>strlen()</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1453301577, "post_id": 34903244, "comment_id": 57542476, "body": "Very likely because it invoked undefined behaviour 10/10 times ..."}, {"owner": {"reputation": 1287, "user_id": 5767099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1144731518892203/picture?type=large", "display_name": "Claudio Cortese", "link": "https://stackoverflow.com/users/5767099/claudio-cortese"}, "edited": false, "score": 0, "creation_date": 1453302015, "post_id": 34903244, "comment_id": 57542810, "body": "I would advice you to use fgets or getline instead of a scanf, by the way you are experiencing this problem because of the last two printf as pointed out by iharob"}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1453301680, "creation_date": 1453301680, "answer_id": 34903301, "question_id": 34903244, "link": "https://stackoverflow.com/questions/34903244/c-segmentation-fault-sometimes/34903301#34903301", "title": "C: segmentation fault sometimes?", "body": "<p>Your <code>printf()</code> statements expect a <code>char *</code> pointer and you are not passing one. That invokes undefined behavior.</p>\n\n<p>Change this</p>\n\n<pre><code>if(flag) {\n   printf(\"%sNot a Palindrome.\\n\");\n}\nelse {\n   printf(\"%sPalindrome.\\n\");\n}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if (flag == 1) \n   printf(\"`%s' IS NOT a Palindrome.\\n\", string_buffer);\nelse \n   printf(\"`%s' IS a Palindrome.\\n\", string_buffer);\n</code></pre>\n\n<p>If you enable compiler warnings you should be warned about this.</p>\n\n<p>This is an improved version of your code with the problem decribed above fixed</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char string_buffer[21];\n    int flag = 0;\n    int length;\n\n    if (scanf(\"%20s%n\", string_buffer, &amp;length) != 1)\n        return -1;\n    for (int i = 0 ; ((flag == 0) &amp;&amp; (i &lt; length)) ; ++i)\n        flag = (string_buffer[i] != string_buffer[length - i - 1]);\n    if (flag == 1)\n        printf(\"`%s' IS NOT a Palindrome.\\n\", string_buffer);\n    else\n        printf(\"`%s' IS a Palindrome.\\n\", string_buffer);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5521631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YCzWN.jpg?s=128&g=1", "display_name": "Tia", "link": "https://stackoverflow.com/users/5521631/tia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1453301680, "creation_date": 1453301518, "question_id": 34903244, "link": "https://stackoverflow.com/questions/34903244/c-segmentation-fault-sometimes", "title": "C: segmentation fault sometimes?", "body": "<p>Hello fellow Stackoverflowers!</p>\n\n<p>Why does my code below throw a Segmentation fault only sometimes (i.e. 1/10 times)?</p>\n\n<p>Console:</p>\n\n<p>Input a string</p>\n\n<p>racecar</p>\n\n<p>Segmentation fault</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n   char string_buffer[21];\n   int i, length;\n   int flag = 0;\n\n   print f(\"Input a string\\n\");\n   scanf(\"%20s\", string_buffer);\n\n   length = strlen(string_buffer);\n\n   for(i=0; i &lt; length; i++) {\n      if(string_buffer[i] != string_buffer[length-i-1]) {\n         flag = 1;\n         break;\n      }\n   }\n\n   if(flag) {\n      printf(\"%sNot a Palindrome.\\n\");\n   }\n   else {\n      printf(\"%sPalindrome.\\n\");\n   }\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["php", "c", "linux", "raspberry-pi", "cgi"], "comments": [{"owner": {"reputation": 11283, "user_id": 1528407, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7785dc902024c1eaea11364eb9937191?s=128&d=identicon&r=PG", "display_name": "Daan", "link": "https://stackoverflow.com/users/1528407/daan"}, "edited": false, "score": 1, "creation_date": 1453301265, "post_id": 34903130, "comment_id": 57542258, "body": "An database, simple text file ?"}, {"owner": {"reputation": 181, "user_id": 5690203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07ded5d2028fb4cb859a69cc6157e8e0?s=128&d=identicon&r=PG&f=1", "display_name": "Kai Iskratsch", "link": "https://stackoverflow.com/users/5690203/kai-iskratsch"}, "edited": false, "score": 1, "creation_date": 1453301432, "post_id": 34903130, "comment_id": 57542373, "body": "you can call a program, from php, and pass arguments on comandline, or via a pipe, you could have a daemon running listening at a socket ..."}, {"owner": {"reputation": 63, "user_id": 3232919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef24c62eaa903a607ef6089b583108b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3232919", "link": "https://stackoverflow.com/users/3232919/user3232919"}, "edited": false, "score": 0, "creation_date": 1453302769, "post_id": 34903130, "comment_id": 57543341, "body": "Thank you found something similar <a href=\"http://www.raspberry-projects.com/pi/programming-in-c/pipes/named-pipes-fifos\" rel=\"nofollow noreferrer\">raspberry-projects.com/pi/programming-in-c/pipes/&hellip;</a>"}], "owner": {"reputation": 63, "user_id": 3232919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef24c62eaa903a607ef6089b583108b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3232919", "link": "https://stackoverflow.com/users/3232919/user3232919"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453483621, "creation_date": 1453301174, "last_edit_date": 1453483621, "question_id": 34903130, "link": "https://stackoverflow.com/questions/34903130/how-do-we-input-data-from-cgi-scripts-to-c-program-exe-for-gpio-pins-on-raspberr", "title": "how do we input data from cgi scripts to c program.exe for gpio pins on raspberry pi?", "body": "<p>I am working on a small home automation project which involves controlling of a DC motor with PWM output. I was successful in controlling the GPIO pins on raspberry pi by using wiring pi library with Eclipse IDE for remote debugging and controlling all GPIO pins.</p>\n\n<p><strong>Next step:</strong></p>\n\n<p>How to interface this with a web server? I was able to control small LED (GPIO pin) using a PHP script. Can I invoke a program written in C, i.e. an exe file from a web server? It is OK even if it is multiple programs for 0 to full on states of motor PWM. To control motor speed using PWM from web server, how can input based on the current state of pin be used. How can communication between PHP and a program running on the server happen?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "gcc", "optimization", "clang"], "comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1453300733, "post_id": 34902857, "comment_id": 57541870, "body": "this should work. Which version of clang are you using? <a href=\"http://clang.llvm.org/docs/AttributeReference.html#optnone-clang-optnone\" rel=\"nofollow noreferrer\">clang.llvm.org/docs/&hellip;</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1453300741, "post_id": 34902857, "comment_id": 57541871, "body": "Almost duplicate of <a href=\"http://stackoverflow.com/q/26266820/841108\">this</a> question"}, {"owner": {"reputation": 20275, "user_id": 887836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UmvnY.jpg?s=128&g=1", "display_name": "Alexander Oh", "link": "https://stackoverflow.com/users/887836/alexander-oh"}, "edited": false, "score": 2, "creation_date": 1453300802, "post_id": 34902857, "comment_id": 57541908, "body": "should be <code>void blabla(void) __attribute__((optnone)) {</code> I believe."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 20275, "user_id": 887836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UmvnY.jpg?s=128&g=1", "display_name": "Alexander Oh", "link": "https://stackoverflow.com/users/887836/alexander-oh"}, "edited": false, "score": 0, "creation_date": 1453300905, "post_id": 34902857, "comment_id": 57541993, "body": "@Alex, not quite sure; the clang docs use <code>type __attribute__((stuff)) name</code> all over the place."}, {"owner": {"reputation": 20275, "user_id": 887836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UmvnY.jpg?s=128&g=1", "display_name": "Alexander Oh", "link": "https://stackoverflow.com/users/887836/alexander-oh"}, "edited": false, "score": 0, "creation_date": 1453301117, "post_id": 34902857, "comment_id": 57542151, "body": "<a href=\"http://clang.llvm.org/docs/AttributeReference.html#optnone-clang-optnone\" rel=\"nofollow noreferrer\">clang.llvm.org/docs/&hellip;</a> do you use -std=gnu maybe the attributes are only enabled if you declare your code as gnu code?"}, {"owner": {"reputation": 1663, "user_id": 916672, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/56c85230b3c9262e003bade8156e48be?s=128&d=identicon&r=PG", "display_name": "Kevin Meier", "link": "https://stackoverflow.com/users/916672/kevin-meier"}, "edited": false, "score": 0, "creation_date": 1453301350, "post_id": 34902857, "comment_id": 57542322, "body": "<code>-std=gnu</code> produeces an error (<code>error: invalid value &#39;gnu&#39; in &#39;-std=gnu&#39;</code>) and <code>-std=gnu99</code> doesn&#39;t help (same errors as described in the post)."}], "answers": [{"comments": [{"owner": {"reputation": 1663, "user_id": 916672, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/56c85230b3c9262e003bade8156e48be?s=128&d=identicon&r=PG", "display_name": "Kevin Meier", "link": "https://stackoverflow.com/users/916672/kevin-meier"}, "edited": false, "score": 1, "creation_date": 1453301377, "post_id": 34903071, "comment_id": 57542340, "body": "Ok, i&#39;ll try to update clang:) Thanks for this hint."}, {"owner": {"reputation": 1663, "user_id": 916672, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/56c85230b3c9262e003bade8156e48be?s=128&d=identicon&r=PG", "display_name": "Kevin Meier", "link": "https://stackoverflow.com/users/916672/kevin-meier"}, "edited": false, "score": 0, "creation_date": 1453303699, "post_id": 34903071, "comment_id": 57544027, "body": "Unfortunately it takes much time to upgrade ubuntu (and clang), but as soon as possible i&#39;ll test it:)"}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": true, "score": 5, "last_activity_date": 1453301012, "creation_date": 1453301012, "answer_id": 34903071, "question_id": 34902857, "link": "https://stackoverflow.com/questions/34902857/clang-do-not-optimize-a-specific-function/34903071#34903071", "title": "Clang: Do not optimize a specific function", "body": "<p>Try the following, clang-style attribute specification:</p>\n\n<pre><code>[[clang::optnone]]\nvoid blabla(void);\n</code></pre>\n\n<p><strong>EDIT</strong>: Clang 3.3 is pretty outdated. Use a more recent version, and your original <code>((optnone))</code> code will work.</p>\n"}], "owner": {"reputation": 1663, "user_id": 916672, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/56c85230b3c9262e003bade8156e48be?s=128&d=identicon&r=PG", "display_name": "Kevin Meier", "link": "https://stackoverflow.com/users/916672/kevin-meier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8451, "favorite_count": 2, "accepted_answer_id": 34903071, "answer_count": 1, "score": 9, "last_activity_date": 1453301170, "creation_date": 1453300398, "last_edit_date": 1453301170, "question_id": 34902857, "link": "https://stackoverflow.com/questions/34902857/clang-do-not-optimize-a-specific-function", "title": "Clang: Do not optimize a specific function", "body": "<p>For a long time i used <code>gcc</code> to compile C code. Sometimes i had to use the <code>optimize(\"O0\")</code> attribute to disable optimizations for a specific function. Now i like to do this with <code>clang</code>.</p>\n\n<p>Assume the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid __attribute__((optimize(\"O0\"))) blabla(void) {\n}\n\nint main(void) {\n    blabla();\n    return 0;\n}\n</code></pre>\n\n<p>If i compile it with <code>clang</code> i get this error:</p>\n\n<pre><code>test2.c:3:21: warning: unknown attribute 'optimize' ignored [-Wattributes]\nvoid __attribute__((optimize(\"O0\"))) blabla(void) {\n                    ^\n1 warning generated.\n</code></pre>\n\n<p>Then i used google (and also) stackoverflow to find out what attribute is required for <code>clang</code>, because many of them are not in the standard (as soon as i know).</p>\n\n<p>I found this thread:\n<a href=\"https://stackoverflow.com/questions/26266820/in-clang-how-do-you-use-per-function-optimization-attributes\">In clang, how do you use per-function optimization attributes?</a></p>\n\n<p>If i try the attribute <code>optimize(\"0\")</code> i get this error:</p>\n\n<pre><code>test2.c:3:21: warning: unknown attribute 'optimize' ignored [-Wattributes]\nvoid __attribute__((optimize(\"0\"))) blabla(void) {\n                    ^\n1 warning generated.\n</code></pre>\n\n<p>And if i try the attribute <code>optnone</code> i get this error:</p>\n\n<pre><code>test2.c:3:21: warning: unknown attribute 'optnone' ignored [-Wattributes]\nvoid __attribute__((optnone)) blabla(void) {\n                    ^\n1 warning generated.\n</code></pre>\n\n<p>I also tried to move the attribute after the function name, but it doesn't work (for some reason there is a warning about GCC?!):</p>\n\n<pre><code>test2.c:3:34: warning: GCC does not allow optnone attribute in this position on a function definition [-Wgcc-compat]\nvoid blabla(void) __attribute__((optnone)) {\n                                 ^\ntest2.c:3:34: warning: unknown attribute 'optnone' ignored [-Wattributes]\n2 warnings generated.\n</code></pre>\n\n<p>Another test with the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n[[clang::optnone]]\nvoid blabla(void) {\n}\n\nint main(void) {\n    blabla();\n    return 0;\n}\n</code></pre>\n\n<p>It produces:</p>\n\n<pre><code>user@ubuntu:/tmp/optxx$ clang test2.c\ntest2.c:3:1: error: expected identifier or '('\n[[clang::optnone]]\n^\ntest2.c:3:2: error: expected expression\n[[clang::optnone]]\n ^\ntest2.c:8:5: warning: implicit declaration of function 'blabla' is invalid in C99 [-Wimplicit-function-declaration]\n    blabla();\n    ^\n1 warning and 2 errors generated.\n</code></pre>\n\n<p>Probably i do something wrong, but i cannot see what.</p>\n\n<p>-edit-</p>\n\n<p><code>clang</code> version:</p>\n\n<pre><code>user@ubuntu:/tmp/optxx$ clang -v\nUbuntu clang version 3.3-16ubuntu1 (branches/release_33) (based on LLVM 3.3)\nTarget: x86_64-pc-linux-gnu\nThread model: posix\n</code></pre>\n"}, {"tags": ["c++", "c", "sockets", "sctp"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1453301161, "post_id": 34902726, "comment_id": 57542176, "body": "The appearance of strlen() in code that is supposed to transfer video stream data does not exacty fill me with confidence:("}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1453301271, "post_id": 34902726, "comment_id": 57542262, "body": "Then, how long is strlen(mystr)? And what is the result in status? Did you get the 1999 from there?"}, {"owner": {"reputation": 21, "user_id": 5746871, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kgBW2lFiSVU/AAAAAAAAAAI/AAAAAAAAAGk/FvycV4qRQ_M/photo.jpg?sz=128", "display_name": "Mohammad Aftal", "link": "https://stackoverflow.com/users/5746871/mohammad-aftal"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453302833, "post_id": 34902726, "comment_id": 57543385, "body": "It&#39;s not the actual code but the tests I did to get this exact number is experimenting withe a uchar array  which is the same data type of the openCV frame data segment  and I got up to 1999 bytes and the send recive copination worked like magic untill I got to the number 2000 and all went down the hill from there sctp_sendmsg  always is returning -1 when I get to 2000 or more uchars. Thanks for your intrest @MartinJames"}], "owner": {"reputation": 21, "user_id": 5746871, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kgBW2lFiSVU/AAAAAAAAAAI/AAAAAAAAAGk/FvycV4qRQ_M/photo.jpg?sz=128", "display_name": "Mohammad Aftal", "link": "https://stackoverflow.com/users/5746871/mohammad-aftal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453300429, "creation_date": 1453300079, "last_edit_date": 1453300429, "question_id": 34902726, "link": "https://stackoverflow.com/questions/34902726/streaming-large-messages-over-ipproto-sctp-stream-socket-in-c", "title": "Streaming large messages over IPPROTO_SCTP stream socket in C", "body": "<p>I am trying to build a video streaming app with minimum delay \"and some image processing is going to be done\" for that I am capturing frames using openCV and sending the data of the mat object to the client who should be able to view them.\nthese messages are large chunks of data 230399 bytes exactly for my current configuration\nI manged to send mat objects before and deserialize and view them using TCP stream sockets but I had problems with message boundaries so I moved to SCTP  sockets but now the problem is I can't send messages of more than 1999 bytes of data. \nThe code I am using for socket creation is </p>\n\n<pre><code>ServerSocketFileDiscriptor= socket( AF_INET, SOCK_STREAM,IPPROTO_SCTP );\n        bzero( (void *)&amp;serverAddress, sizeof(serverAddress) );\n        serverAddress.sin_family = AF_INET;\n        serverAddress.sin_addr.s_addr = htonl( INADDR_ANY );\n        serverAddress.sin_port = htons(29008);\n        bind( ServerSocketFileDiscriptor(structsockaddr*)&amp;serverAddress,sizeof(serverAddress) );\n\n    /* Maximum of 1 streams will be available per socket */\n        memset( &amp;message, 0, sizeof(message) );\n        message.sinit_num_ostreams = 1;\n        message.sinit_max_instreams = 1;\n        message.sinit_max_attempts = 2;\n        setsockopt( ServerSocketFileDiscriptor, IPPROTO_SCTP, SCTP_INITMSG,\n                &amp;message, sizeof(message) );\n\n        listen( ServerSocketFileDiscriptor, 5 );\n</code></pre>\n\n<p>and the code I am using to send messages is </p>\n\n<pre><code>    int status=sctp_sendmsg( clientSocketFileDiscriptor, (void *)buffer, (size_t)strlen(mystr), NULL, 0, 0, 0, 0 /* stream */, 0, 0 );\n   cout &lt;&lt;status&lt;&lt;\".....................................\"&lt;&lt;endl;\n</code></pre>\n"}, {"tags": ["c", "file", "io"], "comments": [{"owner": {"reputation": 7369, "user_id": 2436655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f13e1ea8bbf6506462623c85acb8e32?s=128&d=identicon&r=PG&f=1", "display_name": "pzaenger", "link": "https://stackoverflow.com/users/2436655/pzaenger"}, "edited": false, "score": 3, "creation_date": 1453299915, "post_id": 34902612, "comment_id": 57541236, "body": "What do you think, will <code>fpi++;</code> do? Also, <code>c</code> should be an <code>int</code> and you don&#39;t check the result of your second <code>fopen</code>."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1453299940, "post_id": 34902612, "comment_id": 57541260, "body": "One question at a time."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1453299949, "post_id": 34902612, "comment_id": 57541268, "body": "<code>foef</code> does  <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">not work</a> as you apparently expect. Also be careful with non-ASCII character encodings. It is well possible this does not work as expected. At least you need <code>char16_t</code> or <code>char32_t</code> fort this."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1453300092, "post_id": 34902612, "comment_id": 57541380, "body": "You can have multiple file pointers pointing to their own files, no problem. But these pointers do not point directly into the file, so you do not increment them. They point to information the OS maintains about the file and within there is information about current file location. You don&#39;t need to mess with it. You would use file I/O functions on the file pointer to get information you need like current location, etc."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453300129, "post_id": 34902612, "comment_id": 57541414, "body": "Oh, and your case labels do also not work like that. Summarising the flaws of your code, you really should consult a good C book or tutorial. You seem to have some missconception of the basics."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1453300435, "post_id": 34902612, "comment_id": 57541645, "body": "You need to read <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>."}, {"owner": {"reputation": 71, "user_id": 3795294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/740d2a3eb03d0f48be1ffb686741c235?s=128&d=identicon&r=PG&f=1", "display_name": "A.Lymphater", "link": "https://stackoverflow.com/users/3795294/a-lymphater"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1453300612, "post_id": 34902612, "comment_id": 57541783, "body": "@lurker: so does fgetc(fpi) return the next Char, everytime I call it?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "edited": false, "score": 0, "creation_date": 1453300733, "post_id": 34902612, "comment_id": 57541869, "body": "@Danny_ds: The letters are there, just sort them at your will. I think it is still clear what the typo means. (Btw. I cannot find a translation of that word. Slang?)"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1453300916, "post_id": 34902612, "comment_id": 57542013, "body": "@classMate yes it does. It will continue to do so until you see an EOF (which you get on a read after you have read the last character, which i swhy your use of <code>feof</code> is not proper - <code>feof</code> is only true after you have read an EOF, which is one read too late for your loop). Internally, the control information for the open file (pointed to by the FILE pointer) is updated automatically and keeps track of where you are. You might want to Google search &quot;file I/O in C&quot; for some examples."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "edited": false, "score": 0, "creation_date": 1453301037, "post_id": 34902612, "comment_id": 57542107, "body": "@Danny_ds: Sorry, there seems to be no translation (tried some via google). I suspect that is some slang."}], "answers": [{"comments": [{"owner": {"reputation": 4476, "user_id": 2058293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3798efb3cfd8001e14b637ea09fd2e70?s=128&d=identicon&r=PG", "display_name": "aaaaaa123456789", "link": "https://stackoverflow.com/users/2058293/aaaaaa123456789"}, "edited": false, "score": 1, "creation_date": 1453300906, "post_id": 34902843, "comment_id": 57541997, "body": "Technically, <code>&#39;&#228;&#39; || &#39;&#196;&#39;</code> evaluates the characters to whatever codepoints they have in the file encoding (not to 1)... although the final result <i>is</i> 1 since it is doing a boolean OR over two non-zero values."}, {"owner": {"reputation": 71, "user_id": 3795294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/740d2a3eb03d0f48be1ffb686741c235?s=128&d=identicon&r=PG&f=1", "display_name": "A.Lymphater", "link": "https://stackoverflow.com/users/3795294/a-lymphater"}, "edited": false, "score": 0, "creation_date": 1453301342, "post_id": 34902843, "comment_id": 57542316, "body": "This is an answer i&#39;m looking for!"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 4476, "user_id": 2058293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3798efb3cfd8001e14b637ea09fd2e70?s=128&d=identicon&r=PG", "display_name": "aaaaaa123456789", "link": "https://stackoverflow.com/users/2058293/aaaaaa123456789"}, "edited": false, "score": 0, "creation_date": 1453302439, "post_id": 34902843, "comment_id": 57543101, "body": "@aaaaaa123456789 Ah yes you&#39;re right, I should probably edit my answer to be correct. :)"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1453300801, "last_edit_date": 1453300801, "creation_date": 1453300368, "answer_id": 34902843, "question_id": 34902612, "link": "https://stackoverflow.com/questions/34902612/file-i-o-two-file-pointes/34902843#34902843", "title": "FILE I/O: two file pointes", "body": "<p>There are really to many different questions there, you should concentrate on one at a time, and post different questions if they are distinct like yours.</p>\n\n<p>I'll answer the <em>second</em> question, about the switch statement. And the answer is if you want to use multiple values in a single case, you can't. You <em>can</em> however rely on the fact that cases <em>fall through</em> down if there is no <code>break</code> statement, and then you can do e.g.</p>\n\n<pre><code>switch (c)\n{\ncase '\u00e4':\ncase '\u00c4':\n    // Code for the \u00e4 or \u00c4 case\n    break;\n\n...\n}\n</code></pre>\n\n<p>You could <em>also</em> use <a href=\"http://en.cppreference.com/w/c/string/byte/tolower\" rel=\"nofollow\"><code>tolower</code></a> or <a href=\"http://en.cppreference.com/w/c/string/byte/toupper\" rel=\"nofollow\"><code>toupper</code></a>:</p>\n\n<pre><code>switch (tolower(c))\n{\ncase '\u00e4':\n    // Code for the \u00e4 or \u00c4 case\n    break;\n\n...\n}\n</code></pre>\n\n<hr>\n\n<p>A little explanation about what is wrong with <code>case '\u00e4'||'\u00c4'</code>.</p>\n\n<p>What happens is that the compiler sees <code>'\u00e4' || '\u00c4'</code> as a <em>boolean</em> expression, and in C everything non-zero is considered <em>true</em>. Also in C boolean <em>true</em> is considered to be equal to <code>1</code>, which means that the expression in your cases are equal to <code>1 || 1</code> which is true and therefore <code>1</code>, so all your cases are <code>case 1</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 3795294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/740d2a3eb03d0f48be1ffb686741c235?s=128&d=identicon&r=PG&f=1", "display_name": "A.Lymphater", "link": "https://stackoverflow.com/users/3795294/a-lymphater"}, "edited": false, "score": 0, "creation_date": 1453301684, "post_id": 34902931, "comment_id": 57542535, "body": "So could I compare Chars with its ASCII-code ? Like: if(c==66) {}"}, {"owner": {"reputation": 4476, "user_id": 2058293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3798efb3cfd8001e14b637ea09fd2e70?s=128&d=identicon&r=PG", "display_name": "aaaaaa123456789", "link": "https://stackoverflow.com/users/2058293/aaaaaa123456789"}, "reply_to_user": {"reputation": 71, "user_id": 3795294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/740d2a3eb03d0f48be1ffb686741c235?s=128&d=identicon&r=PG&f=1", "display_name": "A.Lymphater", "link": "https://stackoverflow.com/users/3795294/a-lymphater"}, "edited": false, "score": 1, "creation_date": 1453302468, "post_id": 34902931, "comment_id": 57543126, "body": "You can do that (and in fact, in virtually every relevant platform, it&#39;s identical to <code>if (c == &#39;B&#39;) { &#47;* something *&#47; }</code>), but keep in mind that you need to know the exact codepoint. ASCII goes up to 127; after that it&#39;s no man&#39;s land (because every vendor fills the 128-255 space in a different way) unless you know the exact encoding of the text you&#39;re handling. (At any rate, remember that <code>char</code> is a numeric type, and therefore any operations valid on numbers are valid on <code>char</code>.)"}], "tags": [], "owner": {"reputation": 4476, "user_id": 2058293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3798efb3cfd8001e14b637ea09fd2e70?s=128&d=identicon&r=PG", "display_name": "aaaaaa123456789", "link": "https://stackoverflow.com/users/2058293/aaaaaa123456789"}, "is_accepted": true, "score": 1, "last_activity_date": 1453300600, "creation_date": 1453300600, "answer_id": 34902931, "question_id": 34902612, "link": "https://stackoverflow.com/questions/34902612/file-i-o-two-file-pointes/34902931#34902931", "title": "FILE I/O: two file pointes", "body": "<p>You can have as many open file pointers as you wish (limited by the maximum amount of open files a process can have, but in most modern OSes this number runs into the thousands). You should remember to close them all, though.</p>\n\n<p>As for \"incrementing\" file pointers, remember that, despite the type is called  <code>FILE *</code>, this doesn't actually point to the <em>contents</em> of the file, it points to an internal management structure that <code>&lt;stdio.h&gt;</code> uses to handle files. Therefore, something like <code>fpi ++</code> is not updating the internal file position pointer (which is what you want to do); it's simply making <code>fpi</code> point to some other <code>FILE</code> structure. While there are legitimate reasons to do this (e.g., pointers to arrays of <code>FILE *</code>), moving inside the file is not done this way.</p>\n\n<p>If you actually need to move inside a file, there's a function called <code>fseek()</code> that does this. However, reads or writes (i.e., calls to <code>fread()</code>, <code>fwrite()</code>, <code>fgets()</code>, <code>fprintf()</code>, <code>getc()</code> (and its equivalent <code>fgetc()</code>), <code>putc()</code> (and its equivalent <code>fputc()</code>), and any other function you can imagine that performs I/O on files represented by <code>FILE *</code> values) already update the internal file pointer to point after the data that the operation handled. In other words, when you read or write a character, the internal file pointer will already point after that character. You don't need to, and you shouldn't, attempt to update it yourself, since it's already been done for you.</p>\n\n<p>The character comparisons will probably fail due to encodings \u2014 while there is a pretty standard way of representing the usual ASCII characters (codepoints 32 to 126; basic letters, numbers, and so on), international characters don't have this luxury. You'll need to find out what encoding the file uses, and handle that encoding manually; probably by using the raw character numbers instead of character notation. There are also wide character functions to help you here, if you want to research into that.\nEDIT: I just noticed your <code>'C' || 'c'</code> notation in the <code>case</code> labels. That simply evaluates to 1, as any constant expression in a <code>case</code> label is solved at compile time (and non-constant ones aren't allowed at all). You need multiple <code>case</code> labels to match multiple values; you cannot use expressions there.</p>\n\n<p>Finally, the VS warning is spurious, as <code>fopen()</code> is a standard library call. Do remember to <code>#include</code> the appropriate file, though (in this case <code>&lt;stdio.h&gt;</code>).</p>\n"}], "owner": {"reputation": 71, "user_id": 3795294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/740d2a3eb03d0f48be1ffb686741c235?s=128&d=identicon&r=PG&f=1", "display_name": "A.Lymphater", "link": "https://stackoverflow.com/users/3795294/a-lymphater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1454097286, "accepted_answer_id": 34902931, "answer_count": 2, "score": -3, "last_activity_date": 1453300801, "creation_date": 1453299748, "question_id": 34902612, "link": "https://stackoverflow.com/questions/34902612/file-i-o-two-file-pointes", "closed_reason": "Needs more focus", "title": "FILE I/O: two file pointes", "body": "<p>I'm new to FILE I/O Stream and I want to write a program, which converts chars (read from \"texti.txt\") like \"\u00e4,\u00c4,\u00fc,\u00dc,\u00f6,\u00d6\" to \"ae,Ae,ue,Ue,oe,Oe\" and write them in a new file called \"texto.txt\".</p>\n\n<p><strong>First Question:</strong>\nIs it ok to have two file pointers (on to each file) at the same time like i do?</p>\n\n<p><strong>Second Question:</strong>\nWhat am I doing wrong with character compare in the switch statement?\nVS2015 is warning that cases 2 and 3 already exist (reference to case 1)</p>\n\n<p><strong>Thirt Question</strong>\nDoes <code>fpo</code> (file pointer to output-file) increment itself automatically by writig a char?</p>\n\n<p><strong>Question four:</strong>\nVS2015 is warning: </p>\n\n<p>C4996   'fopen': This function or variable may be unsafe. Consider using fopen_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.</p>\n\n<p>Is there another function I should use?</p>\n\n<pre><code>int main()\n{\n    char c;\n    FILE *fpi;\n    FILE *fpo;\n    fpi = fopen(\"texti.txt\",\"r\");\n    fpo = fopen(\"texto.txt\", \"w\");\n    if (fpi == NULL)\n        fprintf(stderr, \"Fehler beim Lesen\");\n    while (!feof(fpi))\n    {\n        c = fgetc(fpi);\n    switch (c)\n\n{\n    case '\u00e4'||'\u00c4':      \n        fputc('a', fpo);\n        fputc('e', fpo);\n        break;\n\n    case '\u00f6'||'\u00d6':\n        fputc('o', fpo);\n        fputc('e', fpo);\n        break;\n\n    case '\u00fc' || '\u00dc':\n        fputc('u', fpo);\n        fputc('e', fpo);\n        break;\n\n    default:\n        fputc((c), fpo);\n    }\n    fpi++;\n}\nfclose(fpi);\nfclose(fpo);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "linux", "permissions", "web", "hosting"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453298421, "post_id": 34902068, "comment_id": 57540136, "body": "The title is impossible to understand."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453298927, "post_id": 34902068, "comment_id": 57540514, "body": "General warning: Letting users execute arbitrary code on your server is a very bad idea and you should not do this unless you know exactly what you are doing."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453300301, "post_id": 34902068, "comment_id": 57541538, "body": "This is about server administration, not programming, thus off-topic on stack overflow."}], "answers": [{"tags": [], "owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "is_accepted": true, "score": 1, "last_activity_date": 1453298794, "creation_date": 1453298794, "answer_id": 34902241, "question_id": 34902068, "link": "https://stackoverflow.com/questions/34902068/protect-website-files-on-linux-hosting-server/34902241#34902241", "title": "Protect website files on linux hosting server", "body": "<p>The standrard solution will be to execute their code in some <code>chroot</code> or even a container. You can modify your website to create an temporary directory, chroot to it and execute users code, so there will be no way for user to interact with your files or other parts of the system. If users code may be linked with some shared libraries, you can give a read only access, it could be done with <code>mount --bind</code> to make some parts of your main filesystem available inside chroot.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5381316, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AEcyrmQHtIk/AAAAAAAAAAI/AAAAAAAAAFg/6efc4XU_eHU/photo.jpg?sz=128", "display_name": "acusp", "link": "https://stackoverflow.com/users/5381316/acusp"}, "is_accepted": false, "score": 0, "last_activity_date": 1453301109, "creation_date": 1453301109, "answer_id": 34903106, "question_id": 34902068, "link": "https://stackoverflow.com/questions/34902068/protect-website-files-on-linux-hosting-server/34903106#34903106", "title": "Protect website files on linux hosting server", "body": "<p>I think your demand is similar to implement an Online-judge system, you can search \"online judge\" on GitHub. Example <a href=\"https://github.com/DMOJ/judge\" rel=\"nofollow\">judge</a></p>\n\n<p>Maybe you can study  <a href=\"https://en.wikipedia.org/wiki/Sandbox_(computer_security)\" rel=\"nofollow\">Sandbox</a> that is a security mechanism for separating running programs.</p>\n"}], "owner": {"reputation": 21, "user_id": 5816022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68255036f2f61aee9406b6506be102a9?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Mohamed", "link": "https://stackoverflow.com/users/5816022/ahmed-mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 34902241, "answer_count": 2, "score": 0, "last_activity_date": 1453301109, "creation_date": 1453298331, "question_id": 34902068, "link": "https://stackoverflow.com/questions/34902068/protect-website-files-on-linux-hosting-server", "title": "Protect website files on linux hosting server", "body": "<p>l have a website that is hosted in linux server, and my root is (/home/MyAccountName).\nMy website allows users to upload there c++/c code, compile, and execute it.</p>\n\n<p><strong>The problem is:</strong></p>\n\n<blockquote>\n  <p>The executed user's program will have all the owner permissions (read - write -execute).</p>\n</blockquote>\n\n<p>so if the user's code is like :</p>\n\n<p><code>system('cd / &amp;&amp; rm -r MyAccountName');</code></p>\n\n<p>when executing it,  all my website files will be removed form the server.</p>\n\n<p><strong>The question is:</strong></p>\n\n<blockquote>\n  <p>how to protect my website files from user's executed programs, and give it limited permissions.</p>\n</blockquote>\n\n<p><strong>Note</strong></p>\n\n<blockquote>\n  <p>I have only one user on the linux server (the owner), and i can't create a new user in the server.</p>\n</blockquote>\n"}, {"tags": ["c", "gcc", "arm", "neon", "intrinsics"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453298150, "post_id": 34901932, "comment_id": 57539927, "body": "I have no idea. Consider reporting a compiler bug or writing assembly directly. Generally, intrinsics are handled like ordinary builtin functions. There is no guarantee that the compiler emits instructions in the same order in which wrote intrinsics."}, {"owner": {"reputation": 2264, "user_id": 412482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3103ae453066750fab3e76f4ff6197e?s=128&d=identicon&r=PG", "display_name": "James Greenhalgh", "link": "https://stackoverflow.com/users/412482/james-greenhalgh"}, "edited": false, "score": 4, "creation_date": 1453298181, "post_id": 34901932, "comment_id": 57539953, "body": "Useful information would be the version of GCC you are using along with the CPU you are tuning for ( -mcpu=??? or -mtune=??? ). In general the answer is, because GCC believes that the interleaving it is using results in better processor utilization than the interleaving you asked for. Another question would be, how are you detecting that there are stalls?"}, {"owner": {"reputation": 7979, "user_id": 104109, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1ef4d8fdadddc19a7314267a649bc10c?s=128&d=identicon&r=PG", "display_name": "BitBank", "link": "https://stackoverflow.com/users/104109/bitbank"}, "reply_to_user": {"reputation": 2264, "user_id": 412482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3103ae453066750fab3e76f4ff6197e?s=128&d=identicon&r=PG", "display_name": "James Greenhalgh", "link": "https://stackoverflow.com/users/412482/james-greenhalgh"}, "edited": false, "score": 0, "creation_date": 1453298723, "post_id": 34901932, "comment_id": 57540375, "body": "@James see above for compiler info. I&#39;ve written the asm code in my style and it&#39;s faster than GCC&#39;s code. The target CPU is a Cortex-A7."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453298832, "post_id": 34901932, "comment_id": 57540444, "body": "The Raspberry Pi supports Neon?! Colour me surprised."}, {"owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "edited": false, "score": 0, "creation_date": 1453298967, "post_id": 34901932, "comment_id": 57540542, "body": "how about trying to disable GCCs optimizaiton first?"}, {"owner": {"reputation": 7979, "user_id": 104109, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1ef4d8fdadddc19a7314267a649bc10c?s=128&d=identicon&r=PG", "display_name": "BitBank", "link": "https://stackoverflow.com/users/104109/bitbank"}, "reply_to_user": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "edited": false, "score": 1, "creation_date": 1453299162, "post_id": 34901932, "comment_id": 57540678, "body": "@coredump - disabling optimization makes it produce even slower code that still messes up the intrinsics."}, {"owner": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "edited": false, "score": 1, "creation_date": 1453299446, "post_id": 34901932, "comment_id": 57540893, "body": "If you want to write assembly, write assembly.  It&#39;s more readable anyway."}, {"owner": {"reputation": 7979, "user_id": 104109, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1ef4d8fdadddc19a7314267a649bc10c?s=128&d=identicon&r=PG", "display_name": "BitBank", "link": "https://stackoverflow.com/users/104109/bitbank"}, "reply_to_user": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "edited": false, "score": 0, "creation_date": 1453299587, "post_id": 34901932, "comment_id": 57540991, "body": "@StephenCanon - I would be happy to write ASM code, but as I said, for portability (32/64-bit ARM) and maintainability by future developers who don&#39;t know assembly language, intrinsics were chosen."}, {"owner": {"reputation": 2264, "user_id": 412482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3103ae453066750fab3e76f4ff6197e?s=128&d=identicon&r=PG", "display_name": "James Greenhalgh", "link": "https://stackoverflow.com/users/412482/james-greenhalgh"}, "edited": false, "score": 3, "creation_date": 1453299623, "post_id": 34901932, "comment_id": 57541019, "body": "Try an explicit <code>-mcpu=cortex-a7</code> to change the instruction scheduling model the compiler is using. If you want a more extreme flag to try you can ask GCC not to try any instruction scheduling at all with <code>-fno-schedule-insns -fno-schedule-insns2</code> ."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1453300084, "post_id": 34901932, "comment_id": 57541373, "body": "Well, <code>-mtune=cortex-a7</code> (Linaro GCC 5.1) makes the output look much like the input..."}, {"owner": {"reputation": 7979, "user_id": 104109, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1ef4d8fdadddc19a7314267a649bc10c?s=128&d=identicon&r=PG", "display_name": "BitBank", "link": "https://stackoverflow.com/users/104109/bitbank"}, "reply_to_user": {"reputation": 2264, "user_id": 412482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3103ae453066750fab3e76f4ff6197e?s=128&d=identicon&r=PG", "display_name": "James Greenhalgh", "link": "https://stackoverflow.com/users/412482/james-greenhalgh"}, "edited": false, "score": 1, "creation_date": 1453300117, "post_id": 34901932, "comment_id": 57541403, "body": "@JamesGreenhalgh Thanks for the suggestions. Setting -mcpu=cortex-a7 made it generate better code that interleaved instructions much better and sped things up. The -fno-schedule options both made the output slower."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453300456, "post_id": 34901932, "comment_id": 57541661, "body": "gcc just follows the C standard which allows to optimise code strict in accordance to the abstract machine. Before complaing the compiler does his job, you should first inform yourself what it is allowed to do. If you want full control, use Assembler! And what makes you think neon extensions are more portable than other instructions? Note that as you are heading for speed, ARM64 has quite a different pipeline and inner structure anyway, so all optimisation is CPU-specific anyway (even between different ARMv7A cores thre are some differences)."}, {"owner": {"reputation": 7979, "user_id": 104109, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1ef4d8fdadddc19a7314267a649bc10c?s=128&d=identicon&r=PG", "display_name": "BitBank", "link": "https://stackoverflow.com/users/104109/bitbank"}, "reply_to_user": {"reputation": 2264, "user_id": 412482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3103ae453066750fab3e76f4ff6197e?s=128&d=identicon&r=PG", "display_name": "James Greenhalgh", "link": "https://stackoverflow.com/users/412482/james-greenhalgh"}, "edited": false, "score": 0, "creation_date": 1453300974, "post_id": 34901932, "comment_id": 57542065, "body": "@JamesGreenhalgh - FYI I&#39;m also working with a Dragonboard 410c and ARM64 Linux. I&#39;ve seen some compiler behavior that led me to believe there may be bugs in the ARM64 version of GCC. If you wouldn&#39;t mind, contact me to find out more (bitbank@pobox.com)."}, {"owner": {"reputation": 2264, "user_id": 412482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3103ae453066750fab3e76f4ff6197e?s=128&d=identicon&r=PG", "display_name": "James Greenhalgh", "link": "https://stackoverflow.com/users/412482/james-greenhalgh"}, "edited": false, "score": 0, "creation_date": 1453301071, "post_id": 34901932, "comment_id": 57542127, "body": "@BitBank If it is possible for you, bad (or unexpected) GCC behaviour is best reported through the general GCC development mailing lists gcc@gcc.gnu.org or by raising a bug on the GCC Bugzilla <a href=\"https://gcc.gnu.org/bugzilla/\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla</a> . It gets more eyes on the question than just mine, and the archived responses are useful to point to in future :-)."}, {"owner": {"reputation": 25764, "user_id": 1163019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/47a57beaec8e4221a9e18ca9b876e8b2?s=128&d=identicon&r=PG", "display_name": "auselen", "link": "https://stackoverflow.com/users/1163019/auselen"}, "edited": false, "score": 0, "creation_date": 1453301148, "post_id": 34901932, "comment_id": 57542167, "body": "I can&#39;t catch up with all the reading but, if needed can&#39;t you put <code>asm volatile(&quot;&quot;);</code> between each intrinsic? that would stop moving things around."}, {"owner": {"reputation": 7979, "user_id": 104109, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1ef4d8fdadddc19a7314267a649bc10c?s=128&d=identicon&r=PG", "display_name": "BitBank", "link": "https://stackoverflow.com/users/104109/bitbank"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453301763, "post_id": 34901932, "comment_id": 57542593, "body": "@Olaf - ARM wanted backwards compatibility for their intrinsics, so even though the instruction mnemonics changed for Aarch64, the original set of intrinsics compile properly on 32-bit and 64-bit ARM compilers. That&#39;s what I meant by 32/64-bit compatibility."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453302385, "post_id": 34901932, "comment_id": 57543059, "body": "You missed the actual point."}, {"owner": {"reputation": 655, "user_id": 919570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bcd36afc1c8e8e9ea3091b66f8cb274a?s=128&d=identicon&r=PG", "display_name": "killdaclick", "link": "https://stackoverflow.com/users/919570/killdaclick"}, "edited": false, "score": 0, "creation_date": 1577805588, "post_id": 34901932, "comment_id": 105260511, "body": "@BitBank have you found solution to your problem? New GCC version introduced better code?"}, {"owner": {"reputation": 7979, "user_id": 104109, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1ef4d8fdadddc19a7314267a649bc10c?s=128&d=identicon&r=PG", "display_name": "BitBank", "link": "https://stackoverflow.com/users/104109/bitbank"}, "reply_to_user": {"reputation": 655, "user_id": 919570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bcd36afc1c8e8e9ea3091b66f8cb274a?s=128&d=identicon&r=PG", "display_name": "killdaclick", "link": "https://stackoverflow.com/users/919570/killdaclick"}, "edited": false, "score": 0, "creation_date": 1577894869, "post_id": 34901932, "comment_id": 105276435, "body": "@killdaclick - the newer versions of GCC on ARM have gotten better, but I personally mostly use LLVM and it is always ahead of GCC in terms of compiler quality. It hasn&#39;t been an issue for the projects I&#39;ve worked on recently."}], "answers": [{"tags": [], "owner": {"reputation": 2264, "user_id": 412482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3103ae453066750fab3e76f4ff6197e?s=128&d=identicon&r=PG", "display_name": "James Greenhalgh", "link": "https://stackoverflow.com/users/412482/james-greenhalgh"}, "is_accepted": true, "score": 10, "last_activity_date": 1453372163, "last_edit_date": 1453372163, "creation_date": 1453300743, "answer_id": 34902985, "question_id": 34901932, "link": "https://stackoverflow.com/questions/34901932/how-to-stop-gcc-from-breaking-my-neon-intrinsics/34902985#34902985", "title": "How to stop GCC from breaking my NEON intrinsics?", "body": "<p>Broadly, the class of optimisation you are seeing here is known as \"instruction scheduling\". GCC uses instruction scheduling to try to build a better schedule for the instructions in each basic block of your program. Here, a \"schedule\" refers to any correct ordering of the instructions in a block, and a \"better\" schedule might be one which avoids stalls and other pipeline hazards, or one which reduces the live range of variables (resulting in better register allocation), or some other ordering goal on the instructions. </p>\n\n<p>To avoid stalls due to hazards, GCC uses a model of the pipeline of the processor you are targeting (see <a href=\"https://gcc.gnu.org/onlinedocs/gccint/Processor-pipeline-description.html\">here</a> for details of the specification language used for these, and <a href=\"https://gcc.gnu.org/viewcvs/gcc/trunk/gcc/config/arm/cortex-a7.md?view=markup\">here</a> for an example pipeline model). This model gives some indication to the GCC scheduling algorithms of the functional units of a processor, and the execution characteristics of instructions on those functional units. GCC can then schedule instructions to minimise structural hazards due to multiple instructions requiring the same processor resources.</p>\n\n<p>Without a <code>-mcpu</code> or <code>-mtune</code> option (to the compiler), or a <code>--with-cpu</code>, or <code>--with-tune</code> option (to the configuration of the compiler), GCC for ARM or AArch64 will try to use a representative model for the architecture revision you are targeting. In this case, <code>-march=armv7-a</code>, causes the compiler to try to schedule instructions as if <code>-mtune=cortex-a8</code> were passed on the command line.</p>\n\n<p>So what you are seeing in your output is GCC's attempt at transforming your input in to a schedule it expects to execute well when running on a Cortex-A8, and to run reasonably well on processors which implement the ARMv7-A architecture.</p>\n\n<p>To improve on this you can try:</p>\n\n<ul>\n<li>Explicitly setting the processor you are targeting (<code>-mcpu=cortex-a7</code>)</li>\n<li>Disabling instruction scheduling entirely (`-fno-schedule-insns -fno-schedule-insns2)</li>\n</ul>\n\n<p>Note that disabling instruction scheduling entirely may well cause you problems elsewhere, as GCC will no longer be trying to reduce pipeline hazards across your code.</p>\n\n<p><strong>Edit</strong> With regards to your edit, performance bugs in GCC can be reported in the GCC Bugzilla (see <a href=\"https://gcc.gnu.org/bugs/\">https://gcc.gnu.org/bugs/</a> ) just as correctness bugs can be. Naturally with all optimisations there is some degree of heuristic involved and a compiler may not be able to beat a seasoned assembly programmer, but if the compiler is doing something especially egregious it can be worth highlighting.</p>\n"}], "owner": {"reputation": 7979, "user_id": 104109, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1ef4d8fdadddc19a7314267a649bc10c?s=128&d=identicon&r=PG", "display_name": "BitBank", "link": "https://stackoverflow.com/users/104109/bitbank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2203, "favorite_count": 2, "accepted_answer_id": 34902985, "answer_count": 1, "score": 8, "last_activity_date": 1453372163, "creation_date": 1453297995, "last_edit_date": 1453311423, "question_id": 34901932, "link": "https://stackoverflow.com/questions/34901932/how-to-stop-gcc-from-breaking-my-neon-intrinsics", "title": "How to stop GCC from breaking my NEON intrinsics?", "body": "<p>I need to write optimized NEON code for a project and I'm perfectly happy to write assembly language, but for portability/maintainability I'm using NEON instrinsics. This code needs to be as fast as possible, so I'm using my experience in ARM optimization to properly interleave instructions and avoid pipe stalls. No matter what I do, GCC works against me and creates slower code full of stalls.</p>\n\n<p>Does anyone know how to have GCC get out of the way and just translate my intrinsics into code?</p>\n\n<p>Here's an example: I have a simple loop which negates and copies floating point values. It works with 4 sets of 4 at a time to allow some time for the memory to load and instructions to execute. There are plenty of registers left over, so it's got no reason to mangle things so badly.</p>\n\n<pre><code>float32x4_t f32_0, f32_1, f32_2, f32_3;\nint x;\nfor (x=0; x&lt;n-15; x+=16)\n{\n   f32_0 = vld1q_f32(&amp;s[x]);\n   f32_1 = vld1q_f32(&amp;s[x+4]);\n   f32_2 = vld1q_f32(&amp;s[x+8]);\n   f32_3 = vld1q_f32(&amp;s[x+12]);\n   __builtin_prefetch(&amp;s[x+64]);\n   f32_0 = vnegq_f32(f32_0);\n   f32_1 = vnegq_f32(f32_1);\n   f32_2 = vnegq_f32(f32_2);\n   f32_3 = vnegq_f32(f32_3);\n   vst1q_f32(&amp;d[x], f32_0);\n   vst1q_f32(&amp;d[x+4], f32_1);\n   vst1q_f32(&amp;d[x+8], f32_2);\n   vst1q_f32(&amp;d[x+12], f32_3);\n} \n</code></pre>\n\n<p>This is the code it generates:</p>\n\n<pre><code>vld1.32 {d18-d19}, [r5]\nvneg.f32  q9,q9        &lt;-- GCC intentionally causes stalls\nadd r7,r7,#16\nvld1.32 {d22-d23}, [r8]\nadd r5,r1,r4\nvneg.f32 q11,q11   &lt;-- all of my interleaving is undone (why?!!?)\nadd r8,r3,#256\nvld1.32 {d20-d21}, [r10]\nadd r4,r1,r3\nvneg.f32 q10,q10\nadd lr,r1,lr\nvld1.32 {d16-d17}, [r9]\nadd ip,r1,ip\nvneg.f32 q8,q8\n</code></pre>\n\n<p>More info:</p>\n\n<ul>\n<li>GCC 4.9.2 for Raspbian</li>\n<li>compiler flags: <code>-c -fPIE -march=armv7-a -Wall -O3 -mfloat-abi=hard -mfpu=neon</code></li>\n</ul>\n\n<p>When I write the loop in ASM code patterned exactly as my intrinsics (without even making use of extra src/dest registers to gain some free ARM cycles), it's still faster than GCC's code.</p>\n\n<p><strong>Update:</strong> I appreciate James' answer, but in the scheme of things, it doesn't really help with the problem. The simplest of my functions perform a little better with the cortex-a7 option, but the majority saw no change. The sad truth is that GCC's optimization of intrinsics is not great. When I worked with the Microsoft ARM compiler a few years ago, it consistently created well crafted output for NEON intrinsics while GCC consistently stumbled. With GCC 4.9.x, nothing has changed. I certainly appreciate the FOSS nature of GCC and the greater GNU effort, but there is no denying that it doesn't do as good a job as Intel, Microsoft or even ARM's compilers.</p>\n"}, {"tags": ["c", "string"], "answers": [{"comments": [{"owner": {"reputation": 791, "user_id": 4607488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PikId.png?s=128&g=1", "display_name": "MC93", "link": "https://stackoverflow.com/users/4607488/mc93"}, "edited": false, "score": 0, "creation_date": 1453297326, "post_id": 34901578, "comment_id": 57539331, "body": "OP initializes <code>sNum</code> to all zeros with <code>char sNum[STRING_SIZE] = { &#39;\\0&#39; }</code>, so <code>sNum[1] = 0;</code> line isn&#39;t necessary."}], "tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": false, "score": 2, "last_activity_date": 1453298161, "last_edit_date": 1453298161, "creation_date": 1453297070, "answer_id": 34901578, "question_id": 34901533, "link": "https://stackoverflow.com/questions/34901533/c-read-string-with-fgets-from-1-and-keep-0-available-for-reading/34901578#34901578", "title": "C read string with fgets from 1 and keep 0 available for reading", "body": "<pre><code>strncpy (sNum,string,STRING_SIZE);\n</code></pre>\n\n<p>This overwrites the original value (with the sign).</p>\n\n<p>Use <a href=\"http://www.cplusplus.com/reference/cstring/strcat/\" rel=\"nofollow\"><code>strcat</code></a> instead, but make sure <code>sNum[1] == '\\0'</code>.</p>\n\n<p>Something like this:</p>\n\n<pre><code>char sNum[STRING_SIZE + 1] = {'\\0'}, string[STRING_SIZE] = {'\\0'};\n\n// ...\n\nif (num != 0) {\n    sNum[0] = (num &lt; 0) ? '-' : '+';    \n}\nstrcat(sNum, string);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1453297444, "last_edit_date": 1453297444, "creation_date": 1453297138, "answer_id": 34901605, "question_id": 34901533, "link": "https://stackoverflow.com/questions/34901533/c-read-string-with-fgets-from-1-and-keep-0-available-for-reading/34901605#34901605", "title": "C read string with fgets from 1 and keep 0 available for reading", "body": "<p>You don't need to convert it to a string check this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int value;\n    int length;\n    if (scanf(\"%d%n\", &amp;value, &amp;length) != 1)\n        return -1;\n    if (value == 0)\n        printf(\"The string length is `1' and contains the number `0'\\n\");\n    else\n        printf(\"The string length is `%d' and contains the number `%+d'\\n\",\n            length, value);\n    return 0;\n}\n</code></pre>\n\n<p>Explanation:</p>\n\n<ol>\n<li>The <code>\"%n\"</code> specifier in <code>scanf()</code> stores in <code>length</code> the number of characters <code>scanf()</code> read.</li>\n<li>The <code>printf()</code> <code>\"+\"</code> modifier adds a <code>+</code> in front of positive numbers and a <code>-</code> in front of negative numbers. The special value <code>0</code> is handled separately.</li>\n<li>Always check the return value of <code>scanf()</code>.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 4, "last_activity_date": 1453297175, "creation_date": 1453297175, "answer_id": 34901620, "question_id": 34901533, "link": "https://stackoverflow.com/questions/34901533/c-read-string-with-fgets-from-1-and-keep-0-available-for-reading/34901620#34901620", "title": "C read string with fgets from 1 and keep 0 available for reading", "body": "<p>You copy over the character you set in <code>sNum</code>. You need to copy beginning at the <em>second</em> character of <code>sNum</code>, i.e. <code>&amp;sNum[1]</code>. Also remember to copy one less character from <code>string</code>. Also remember that there is a case where <a href=\"http://en.cppreference.com/w/c/string/byte/strncpy\" rel=\"nofollow\"><code>strncpy</code></a> will not append the terminator.</p>\n\n<p>Or just use <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow\"><code>snprintf</code></a>:</p>\n\n<pre><code>snprintf(sNum, sizeof(sNum), \"%+d\", num);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5767659, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/40090ee51647de0dc22227f34f04e46d?s=128&d=identicon&r=PG&f=1", "display_name": "The baron", "link": "https://stackoverflow.com/users/5767659/the-baron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 34901620, "answer_count": 3, "score": 1, "last_activity_date": 1453298161, "creation_date": 1453296949, "last_edit_date": 1453298038, "question_id": 34901533, "link": "https://stackoverflow.com/questions/34901533/c-read-string-with-fgets-from-1-and-keep-0-available-for-reading", "title": "C read string with fgets from 1 and keep 0 available for reading", "body": "<p>I'm working on a function in C that gets a number from the user and converts it into a string, putting in the beginning of the string - + or nothing (if 0) than printing the length of the string and the string itself. </p>\n\n<p>So lets say I enter \"123\", the string will contain: '+','1','2','3','\\0'\nand it will print: \"The array length is 4 and it contain +123\"\nwith minus it will print the same thing just with - at the beginning (-123) and with 0 it wont print any thing (0)  </p>\n\n<p>That is the code I made: </p>\n\n<pre><code>#define STRING_SIZE 100\n\nint main ()\n{\n    int num;\n    char sNum[STRING_SIZE] = {'\\0'}, string[STRING_SIZE] = {'\\0'};\n    printf(\"%s\", string);\n    scanf(\"%d\", &amp;num);\n    itoa(num, string, 10);\n\n    if (num &lt; 0) {\n        sNum[0] = '-';\n    }\n    else if (num &gt; 0) {\n        sNum[0] = '+';\n    }\n    strncpy (sNum, string, STRING_SIZE);\n    printf(\"\\nThe string length is %d and contains the number: %s\\n\", strlen(sNum), sNum);\n\n    system (\"PAUSE\");\n    return 0;\n}\n</code></pre>\n\n<p>And that is my output when I enter 123: </p>\n\n<blockquote>\n  <p>The string length is 3 and contains the number: 123</p>\n</blockquote>\n"}, {"tags": ["c", "long-integer", "scanf"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1453296902, "post_id": 34901440, "comment_id": 57539033, "body": "use <code>long long unsigned</code>"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1453296903, "post_id": 34901440, "comment_id": 57539034, "body": "Mind that a long unsigned int is a 32 bit data type, with the maximum of 4294967295?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1453296910, "post_id": 34901440, "comment_id": 57539039, "body": "check <code>sizeof(unsigned long)</code>. maybe you need <code>unsigned long long.</code>"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1453296911, "post_id": 34901440, "comment_id": 57539042, "body": "My guess is that <code>long</code>s are only 32 bits on your platform. Use <code>uint64_t</code> instead to eliminate this possibility."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1453296920, "post_id": 34901440, "comment_id": 57539045, "body": "The size of <code>long</code> depends on compiler and platform. On e.g. Windows 64-bit using the Visual Studio compiler <code>long</code> is <i>still</i> 32 bits. You should use <code>unsigned long long</code> (or <code>uint64_t</code>) and corresponding formats (for which you could see e.g. <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\">this <code>printf</code> reference</a> or <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\">this <code>scanf</code> reference</a>)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 1, "creation_date": 1453301219, "post_id": 34901440, "comment_id": 57542217, "body": "@Magisch: That is not necessarily true. E.g. POSIX64 is LP64."}], "answers": [{"comments": [{"owner": {"reputation": 8362, "user_id": 2038544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VPpQ.jpg?s=128&g=1", "display_name": "razz", "link": "https://stackoverflow.com/users/2038544/razz"}, "edited": false, "score": 0, "creation_date": 1453297148, "post_id": 34901547, "comment_id": 57539217, "body": "It&#39;s saying <code>error: ISO C90 does not support long long</code>"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 8362, "user_id": 2038544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VPpQ.jpg?s=128&g=1", "display_name": "razz", "link": "https://stackoverflow.com/users/2038544/razz"}, "edited": false, "score": 1, "creation_date": 1453297312, "post_id": 34901547, "comment_id": 57539318, "body": "@razzak why are you compiling under ISO C90 standard? try the compiler option, <code>-std=c99</code> to compile under a standard that supports this."}], "tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 1, "last_activity_date": 1453296986, "creation_date": 1453296986, "answer_id": 34901547, "question_id": 34901440, "link": "https://stackoverflow.com/questions/34901440/how-to-extract-a-long-unsigned-int-from-a-string-literal-using-sscanf/34901547#34901547", "title": "How to extract a long unsigned int from a string literal using sscanf", "body": "<p>Your data type <code>long unsigned</code> is only guaranteed to be 32 bits in size, so the max value it can hold is <code>4294967295</code>, which you are getting. </p>\n\n<p>Use a <code>unsigned long long</code> instead.</p>\n"}, {"comments": [{"owner": {"reputation": 8362, "user_id": 2038544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VPpQ.jpg?s=128&g=1", "display_name": "razz", "link": "https://stackoverflow.com/users/2038544/razz"}, "edited": false, "score": 0, "creation_date": 1453297144, "post_id": 34901559, "comment_id": 57539214, "body": "It&#39;s saying <code>error: ISO C90 does not support long long</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 8362, "user_id": 2038544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VPpQ.jpg?s=128&g=1", "display_name": "razz", "link": "https://stackoverflow.com/users/2038544/razz"}, "edited": false, "score": 3, "creation_date": 1453297250, "post_id": 34901559, "comment_id": 57539287, "body": "@razzak use <code>-std=c99</code> option."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 8362, "user_id": 2038544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VPpQ.jpg?s=128&g=1", "display_name": "razz", "link": "https://stackoverflow.com/users/2038544/razz"}, "edited": false, "score": 0, "creation_date": 1453297343, "post_id": 34901559, "comment_id": 57539347, "body": "@razzak or, <code>-std=c11</code>, on gcc 4.7 and above."}, {"owner": {"reputation": 8362, "user_id": 2038544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VPpQ.jpg?s=128&g=1", "display_name": "razz", "link": "https://stackoverflow.com/users/2038544/razz"}, "edited": false, "score": 0, "creation_date": 1453297980, "post_id": 34901559, "comment_id": 57539809, "body": "@SouravGhosh Is there no way i can do this in C90?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 8362, "user_id": 2038544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VPpQ.jpg?s=128&g=1", "display_name": "razz", "link": "https://stackoverflow.com/users/2038544/razz"}, "edited": false, "score": 1, "creation_date": 1453298695, "post_id": 34901559, "comment_id": 57540362, "body": "@razzak remove <code>-pedantic</code> option. or you write library for unsigned 64bit. or use 8byte size unsigned long compiler."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1453297138, "last_edit_date": 1453297138, "creation_date": 1453297011, "answer_id": 34901559, "question_id": 34901440, "link": "https://stackoverflow.com/questions/34901440/how-to-extract-a-long-unsigned-int-from-a-string-literal-using-sscanf/34901559#34901559", "title": "How to extract a long unsigned int from a string literal using sscanf", "body": "<p>It appears, in your case, <code>unsigned long</code> occupies 4 bytes hence is not able to hold <code>2349872764943587</code> which takes more that 32 bits to be stored.</p>\n\n<p>You can use <code>unsigned long long</code> (check the size using <code>sizeof</code>, need to be 8) or <code>uint64_t</code> instead.</p>\n"}, {"comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1453298044, "post_id": 34901713, "comment_id": 57539852, "body": "<code>SCNu64</code> for <code>scanf</code>"}, {"owner": {"reputation": 8362, "user_id": 2038544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VPpQ.jpg?s=128&g=1", "display_name": "razz", "link": "https://stackoverflow.com/users/2038544/razz"}, "edited": false, "score": 0, "creation_date": 1453298101, "post_id": 34901713, "comment_id": 57539892, "body": "@BlueMoon93 It complains about <code>ISO C90 does not support the &#39;ll&#39; gnu_scanf length modifier [-Wformat=]</code> and <code>ISO C90 does not support the &#39;ll&#39; gnu_printf length modifier [-Wformat=]</code>"}, {"owner": {"reputation": 2752, "user_id": 2015911, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BaMzg.jpg?s=128&g=1", "display_name": "BlueMoon93", "link": "https://stackoverflow.com/users/2015911/bluemoon93"}, "reply_to_user": {"reputation": 8362, "user_id": 2038544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VPpQ.jpg?s=128&g=1", "display_name": "razz", "link": "https://stackoverflow.com/users/2038544/razz"}, "edited": false, "score": 0, "creation_date": 1453298863, "post_id": 34901713, "comment_id": 57540471, "body": "@razzak On your compiler options, you need to use the <code>-std=c99</code> option"}], "tags": [], "owner": {"reputation": 2752, "user_id": 2015911, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BaMzg.jpg?s=128&g=1", "display_name": "BlueMoon93", "link": "https://stackoverflow.com/users/2015911/bluemoon93"}, "is_accepted": false, "score": 0, "last_activity_date": 1453298003, "last_edit_date": 1495542658, "creation_date": 1453297399, "answer_id": 34901713, "question_id": 34901440, "link": "https://stackoverflow.com/questions/34901440/how-to-extract-a-long-unsigned-int-from-a-string-literal-using-sscanf/34901713#34901713", "title": "How to extract a long unsigned int from a string literal using sscanf", "body": "<p>For portability, <a href=\"https://matt.sh/howto-c\" rel=\"nofollow noreferrer\">avoid using</a> <code>int</code>, <code>long</code>, etc. In your platform, for example, <code>long unsigned int</code> is 32 bits, which is why you have your problem.</p>\n\n<p>Instead, <code>#include &lt;stdint.h&gt;</code> then use standard types, such as <code>int32_t</code>, <code>int64_t</code>, <code>uint32_t</code>, <code>uint64_t</code>. In your particular case, <code>uint64_t</code> does the trick.</p>\n\n<p>To use <code>uint64_t data;</code> in <code>printf</code> and <code>scanf</code>, you need to <code>#include &lt;inttypes.h&gt;</code> and then <code>printf(\"%\" PRIu64 \"\\n\", data);</code></p>\n\n<p>More info <a href=\"https://stackoverflow.com/questions/9225567/how-to-print-a-int64-t-type-in-c\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 8362, "user_id": 2038544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VPpQ.jpg?s=128&g=1", "display_name": "razz", "link": "https://stackoverflow.com/users/2038544/razz"}, "edited": false, "score": 0, "creation_date": 1453306234, "post_id": 34903873, "comment_id": 57545939, "body": "printf complains about <code>ISO C90 does not support the &#39;%lf&#39; gnu_printf format [-Wformat=]</code>, however it works when i replace the <code>%0.lf</code> with <code>%0.f</code>. thanks :)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 8362, "user_id": 2038544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VPpQ.jpg?s=128&g=1", "display_name": "razz", "link": "https://stackoverflow.com/users/2038544/razz"}, "edited": false, "score": 1, "creation_date": 1453308538, "post_id": 34903873, "comment_id": 57547597, "body": "@razzak Yes - older compiler do not accept the <code>l</code> in printf formats.  Newer compilers (C99) simply allow it and ignore it. Answer amended."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1453308469, "last_edit_date": 1453308469, "creation_date": 1453303251, "answer_id": 34903873, "question_id": 34901440, "link": "https://stackoverflow.com/questions/34901440/how-to-extract-a-long-unsigned-int-from-a-string-literal-using-sscanf/34903873#34903873", "title": "How to extract a long unsigned int from a string literal using sscanf", "body": "<p>OP's <code>unsigned long</code> appears to be a 32-bit and so cannot represent the 51-bit <code>2349872764943587</code>.</p>\n\n<p>If stuck using a compiler that lacks 64-bit integers, code could use <code>double</code>, which typically handles 53-bit whole number values without loss of precision.  </p>\n\n<pre><code>double data;\nchar buf[40] = \"data 2349872764943587\";\n\nif (sscanf (buf, \"data %lf\", &amp;data) == 1)\n{\n    printf (\"%s\\n\", buf);\n    printf (\"data:\\t%.0f\\n\", data);\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>data:   2349872764943587\n</code></pre>\n"}], "owner": {"reputation": 8362, "user_id": 2038544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VPpQ.jpg?s=128&g=1", "display_name": "razz", "link": "https://stackoverflow.com/users/2038544/razz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "accepted_answer_id": 34903873, "answer_count": 4, "score": 0, "last_activity_date": 1453308469, "creation_date": 1453296703, "last_edit_date": 1453297398, "question_id": 34901440, "link": "https://stackoverflow.com/questions/34901440/how-to-extract-a-long-unsigned-int-from-a-string-literal-using-sscanf", "title": "How to extract a long unsigned int from a string literal using sscanf", "body": "<p>I tried using all these flags <code>ld</code> <code>li</code> and <code>lu</code> with <code>sscanf</code> but none worked. The following gets <code>4294967295</code> no matter what number i put in <code>buf</code>:</p>\n\n<pre><code>long unsigned data;\nchar buf[40] = \"data 2349872764943587\";\n\nif (sscanf (buf, \"data %lu\", &amp;data) == 1)\n{\n    printf (\"%s\\n\", buf);\n    printf (\"data:\\t%lu\\n\", data);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>data 2349872764943587\ndata:   4294967295\n</code></pre>\n\n<p>Am I using the wrong conversion flag or is there something I missed?</p>\n"}, {"tags": ["c", "switch-statement", "printf", "flush"], "comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1453295920, "post_id": 34901134, "comment_id": 57538371, "body": "What are you doing with the user input?"}, {"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 4, "creation_date": 1453295978, "post_id": 34901134, "comment_id": 57538393, "body": "I think the problem is with the <code>scanf</code>. Doesn&#39;t that leave the newline in <code>stdin</code>? Maybe that&#39;s what&#39;s skipping the <code>fgets</code>. However, I don&#39;t usually use <code>scanf</code> so I can&#39;t say for sure."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1453296030, "post_id": 34901134, "comment_id": 57538424, "body": "You just said the issue. You press two keys for the <code>scanf</code>. The number is consumed by the <code>scanf</code> while the <code>\\n</code> (enter) is left in the <code>stdin</code>. So, <code>gets</code>/<code>fgets</code> sees the <code>\\n</code> and consumes it, thus not waiting for further input. Fix it by using <code>scanf(&quot;%d%*c&quot;,&amp;choice);</code> instead of <code>scanf(&quot;%d&quot;,&amp;choice);</code>. The <code>%*c</code> tells <code>scanf</code> to scan and discard a character."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1453296418, "post_id": 34901134, "comment_id": 57538685, "body": "You could&#39;ve figured it out by googling the title. There are tons of duplicates out there in the web as well as in stackoverflow."}, {"owner": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1453296610, "post_id": 34901134, "comment_id": 57538816, "body": "@CoolGuy Your solution works ! And of course I googled it, but didn&#39;t find any clear answer : ("}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1453296790, "post_id": 34901134, "comment_id": 57538963, "body": "See <a href=\"http://stackoverflow.com/questions/1694036/why-is-the-gets-function-dangerous-why-should-it-not-be-used\">Why is <code>gets()</code> too dangerous to be used?</a> for reasons why you should never, ever use <code>gets()</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1453297128, "post_id": 34901134, "comment_id": 57539199, "body": "Trying to find the right question to duplicate this too.  It is such a common problem \u2014 but also hard to search for."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1453297390, "post_id": 34901240, "comment_id": 57539376, "body": "In C, the prototype should be <code>int do_this(void);</code> (or, better, <code>static int do_this(void);</code> since the function won&#39;t be called from outside this file \u2014 if it was going to be called from outside this file, then the declaration should be in a header, of course).  The significance of this is that <code>int do_this();</code> simply says &quot;there is a function that returns an <code>int</code> but the argument list is undefined \u2014 but it isn&#39;t a variadic function with ellipsis <code>...</code> as the last argument&quot;.  It does not state that the function takes no arguments, unlike in C++."}, {"owner": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 0, "creation_date": 1453308474, "post_id": 34901240, "comment_id": 57547550, "body": "Thank you all for you answers.  That was the reason of the problem.  I used the quick fix suggested by Cool Guy above."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 0, "creation_date": 1453308652, "post_id": 34901240, "comment_id": 57547683, "body": "@lapin Which is essentially equivalent to adding a <code>getchar();</code> call after scanf() call i.e. read <code>%*c</code> (which is called <i>assignment suppression character</i> ) reads and discards one char. As long as you understand the underlying problem, you can use any of the solutions that fits your need."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 5, "last_activity_date": 1453296421, "last_edit_date": 1453296421, "creation_date": 1453296094, "answer_id": 34901240, "question_id": 34901134, "link": "https://stackoverflow.com/questions/34901134/c-user-input-getting-skipped/34901240#34901240", "title": "C - User input getting skipped?", "body": "<p><code>scanf()</code> leaves a newline which is consumed by the subsequent call to <code>gets()</code>. </p>\n\n<p>Use <code>getchar();</code> right after <code>scanf()</code> or use a loop to read and discard chars:</p>\n\n<pre><code>int c;\nwhile((c= getchar()) != '\\n' &amp;&amp; c != EOF); \n</code></pre>\n\n<p>I know you have commented about <code>gets()</code> being bad. But you shouldn't even attempt to use it even if it's a toy program. It's been <em>removed</em> from the latest C standard (C11) completely and shouldn't be used even if you are programming for C89 (due to its buffer overflow vulnerabilities). Use <code>fgets()</code> which does almost the same except possibly leaves a trailing newline.</p>\n\n<p>If this is your complete code, then you would also need a prototype or at least a declaration for <code>do_this()</code>. Implicit int rule has also been removed from C standard. So add,</p>\n\n<pre><code>int do_this();\n</code></pre>\n\n<p>at the top of your source file.</p>\n"}, {"comments": [{"owner": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 0, "creation_date": 1453296300, "post_id": 34901250, "comment_id": 57538599, "body": "Any of that would be unnecessary if I could get the user choice as <code>int</code> without <code>scanf</code>, but is that possible ?"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 0, "creation_date": 1453296416, "post_id": 34901250, "comment_id": 57538681, "body": "@lapin I don&#39;t think so, unless you want to jump through hoops to get it as string and hand-convert it to int. This could work, as all decimal numbers are follow-ups of each other in ascii. You could also do a formal check if the user entered the correct input this way."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 1, "creation_date": 1453296737, "post_id": 34901250, "comment_id": 57538917, "body": "@lapin It&#39;s not the <code>scanf()</code> itself cauing the problem but the combination of <code>scanf()</code> + <code>[f]gets()</code> that&#39;s causing the problem. In general, it&#39;s better not to mix <code>scanf()</code> and <code>fgets()</code> and even better would be to not use <code>scanf()</code> at all. A more robust approach would be to use fgets() and then <code>sscanf()</code> on the line."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1453297498, "post_id": 34901250, "comment_id": 57539444, "body": "Note that on Microsoft platforms, <a href=\"http://stackoverflow.com/questions/2979209/using-fflushstdin\">Using <code>fflush(stdin)</code></a> is defined behaviour."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1453297541, "post_id": 34901250, "comment_id": 57539472, "body": "@JonathanLeffler Thats exactly what I wrote in my answer. Read it again, please."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1453297778, "post_id": 34901250, "comment_id": 57539649, "body": "AFAICS, you wrote &quot;Using <code>fflush(stdin)</code> is undefined behaviour&quot; unconditionally \u2014 I am commenting that on Microsoft, <code>fflush(stdin)</code> has defined (and useful) behaviour, so your sweeping unconditional statement is too sweeping because it is unconditional, and it is particularly a problem because many of the people who use it are working in an environment where it is defined behaviour.  These are two different descriptions of the utility of <code>fflush(stdin)</code>."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1453297826, "post_id": 34901250, "comment_id": 57539693, "body": "@JonathanLeffler Alright fair enough, I&#39;ll edit that in."}], "tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 1, "last_activity_date": 1453297860, "last_edit_date": 1453297860, "creation_date": 1453296126, "answer_id": 34901250, "question_id": 34901134, "link": "https://stackoverflow.com/questions/34901134/c-user-input-getting-skipped/34901250#34901250", "title": "C - User input getting skipped?", "body": "<pre><code>scanf(\"%d\",&amp;choice);\n</code></pre>\n\n<p>This leaves the newline (<code>'\\n'</code>) in the standard input buffer <code>stdin</code>.</p>\n\n<p>Your call of <code>gets()</code> merely consumes that whitespace, writing nothing into <code>name</code>.</p>\n\n<p>To prevent this, consume the newline char after you call scanf, for instance by using <code>getchar()</code>. If you are not on a microsoft platform, please do not use <code>fflush(stdin)</code>, as that is undefined behavior (on non-MS platforms).</p>\n"}], "owner": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 934, "favorite_count": 0, "accepted_answer_id": 34901240, "answer_count": 2, "score": 4, "last_activity_date": 1453300605, "creation_date": 1453295821, "last_edit_date": 1453300605, "question_id": 34901134, "link": "https://stackoverflow.com/questions/34901134/c-user-input-getting-skipped", "title": "C - User input getting skipped?", "body": "<p>I want a menu from which you choose some action.</p>\n\n<p>Problem is that when we choose one, and press the \"return\" key, the user input command which should have been the next step, is skipped. Why is that ?</p>\n\n<p>The code is : </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int choice;\n\n    do\n    {\n     printf(\"Menu\\n\\n\");\n     printf(\"1. Do this\\n\");\n     printf(\"2. Do that\\n\");\n     printf(\"3. Leave\\n\");\n     scanf(\"%d\",&amp;choice);\n\n     switch (choice)\n     {\n        case 1:\n            do_this();\n            break;\n        case 2:\n            // do_that();\n            break;\n     }\n\n    } while (choice != 3);\n\n    return(0);\n}\n\nint do_this()\n{\n    char name[31];\n\n    printf(\"Please enter a name (within 30 char) : \\n\");\n    gets(name); // I know using gets is bad but I'm just using it\n\n    // fgets(name,31,stdin); // gives the same problem by the way.\n\n    // Problem is : user input gets skiped to the next statement :\n    printf(\"Something else \\n\");\n\n    return(0);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "text", "gstreamer"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5815907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7d5b4e3e00a97320c042c6dd0024460?s=128&d=identicon&r=PG&f=1", "display_name": "ManojSahu", "link": "https://stackoverflow.com/users/5815907/manojsahu"}, "edited": false, "score": 0, "creation_date": 1461834141, "post_id": 34912775, "comment_id": 61382438, "body": "Thanks for the reply Kyrylo"}], "tags": [], "owner": {"reputation": 1538, "user_id": 1810625, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Ss8dC.jpg?s=128&g=1", "display_name": "Kyrylo Polezhaiev", "link": "https://stackoverflow.com/users/1810625/kyrylo-polezhaiev"}, "is_accepted": false, "score": 0, "last_activity_date": 1453333158, "creation_date": 1453333158, "answer_id": 34912775, "question_id": 34900651, "link": "https://stackoverflow.com/questions/34900651/gstreamer-pipeline-code-to-display-text-over-live-streaming-from-camera-and-not/34912775#34912775", "title": "gstreamer pipeline code to display text over live streaming from camera and not image?", "body": "<p>You can just replace your elements with needed ones, and insert <code>videoconvert</code> if needed. I suggest you to learn how to write pipeline description, however.</p>\n\n<p>Here I replaced <code>videotestsrc</code> with <code>v4l2src</code> and put <code>videoconvert</code> element because <code>v4l2src</code> and <code>ximagesink</code> has no common video format in their list of supported formats to use together.</p>\n\n<pre><code>gst-launch-1.0 v4l2src ! videoconvert ! textoverlay font-desc=\"San 32\" text=\"CAM1 Disconnected\" ! ximagesink\n</code></pre>\n\n<p>I used GStreamer 1.x here.</p>\n\n<p>You can replace <code>ximagesink</code> with with your custom sink.</p>\n"}], "owner": {"reputation": 11, "user_id": 5815907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7d5b4e3e00a97320c042c6dd0024460?s=128&d=identicon&r=PG&f=1", "display_name": "ManojSahu", "link": "https://stackoverflow.com/users/5815907/manojsahu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 897, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1453409255, "creation_date": 1453294524, "last_edit_date": 1453409255, "question_id": 34900651, "link": "https://stackoverflow.com/questions/34900651/gstreamer-pipeline-code-to-display-text-over-live-streaming-from-camera-and-not", "title": "gstreamer pipeline code to display text over live streaming from camera and not image?", "body": "<p>Can any one please suggest a working pipeline to display text over live streaming using v4l2src and mfw_isink ?</p>\n\n<p>I have a working pipeline to display textoverlay, clockoverlay, timeoverlay but with test source and and test sink and not with desired source and sink.</p>\n\n<pre><code>gst-launch videotestsrc pattern=blue ! textoverlay font-desc=\"San 32\" text=\"CAM1 Disconnected\" valign=top halign=left ! ximagesink\n</code></pre>\n"}, {"tags": ["c", "algorithm", "int", "double", "taylor-series"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1453294300, "post_id": 34900583, "comment_id": 57537289, "body": "Please format your code correctly."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1453295169, "post_id": 34900583, "comment_id": 57537906, "body": "Sit back and think about the warning!"}], "answers": [{"comments": [{"owner": {"reputation": 14006, "user_id": 2204926, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FDbXT.png?s=128&g=1", "display_name": "Idos", "link": "https://stackoverflow.com/users/2204926/idos"}, "reply_to_user": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1453294724, "post_id": 34900638, "comment_id": 57537571, "body": "@ring&#248; I don&#39;t think fattoriale has to change. It all works with int&#39;s over there"}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1453296399, "post_id": 34900638, "comment_id": 57538670, "body": "Well, if you don&#39;t change the func sig and <i>risultato</i> to <i>double</i>  the <code>sinh(x)</code> will be a kind of <code>floor(sinh(x))</code>..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4398570"}, "edited": false, "score": 0, "creation_date": 1453296617, "post_id": 34900638, "comment_id": 57538823, "body": "i don&#39;t get why if i put sinh(3) i get an inf... the result it will be 10.01787"}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 1, "creation_date": 1453296757, "post_id": 34900638, "comment_id": 57538942, "body": "@AmarildoAliaj Do the changes I talked about: <code>double fattoriale(int n)</code> and inside <code>double risultato = 1;</code>"}], "tags": [], "owner": {"reputation": 14006, "user_id": 2204926, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FDbXT.png?s=128&g=1", "display_name": "Idos", "link": "https://stackoverflow.com/users/2204926/idos"}, "is_accepted": true, "score": 4, "last_activity_date": 1453297183, "last_edit_date": 1453297183, "creation_date": 1453294484, "answer_id": 34900638, "question_id": 34900583, "link": "https://stackoverflow.com/questions/34900583/calculation-the-taylor-series-of-sinh/34900638#34900638", "title": "Calculation the Taylor series of sinh", "body": "<p>It is actually pretty great that the compiler is warning you about this kind of data loss.<br>\nYou see, when you call this:</p>\n\n<pre><code>esponenziale(x, ((2 * n) + 1))\n</code></pre>\n\n<p>You essentially lose your accuracy since you are converting your <code>double</code>, which is <code>x</code>, to an <code>int</code>. This is since the signature of <code>esponenziale</code> is <code>int esponenziale(int base, int esponente)</code>.</p>\n\n<p>Change it to <code>double esponenziale(double base, int esponente)</code>, <code>risultato</code> should be a <code>double</code> as well, since you are returning it from the function and performing mathematical operations with/on it.</p>\n\n<p>Remember that dividing a <code>double</code> with an <code>int</code> gives you a <code>double</code> back.</p>\n\n<p>Edit: According to ring\u00f8's comment, and seeing how it actually solved your issue, you should also set <code>double fattoriale(int n)</code> and inside that <code>double risultato = 1;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1453294790, "post_id": 34900696, "comment_id": 57537620, "body": "Actually I&#39;m not so sure about the radius of convergence. Please downvote if I&#39;m wrong. I&#39;m checking..."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1453294890, "post_id": 34900696, "comment_id": 57537687, "body": "Yup, I was wrong. Radius is infinite. Rather brittle link added to the answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4398570"}, "edited": false, "score": 0, "creation_date": 1453295180, "post_id": 34900696, "comment_id": 57537914, "body": "but i get an inf if i choose x &gt;1"}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1453295644, "post_id": 34900696, "comment_id": 57538186, "body": "@AmarildoAliaj <code>sinh(x)</code> converges for any <code>x&gt;1</code>, but <code>sinh(x) \u2192 \u221e</code> when <code>x \u2192 \u221e</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4398570"}, "edited": false, "score": 0, "creation_date": 1453295769, "post_id": 34900696, "comment_id": 57538261, "body": "ok but i don&#39;t get how to solve it. for example with sinh(3) i get an inf"}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1453295832, "post_id": 34900696, "comment_id": 57538308, "body": "@AmarildoAliaj Probably because <code>x!</code> overflows pretty quickly even the <i>double</i> type"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1453295967, "post_id": 34900696, "comment_id": 57538390, "body": "Indeed, it will overflow the &quot;normal&quot; double type at 171. Did you change your factorial to return a double? If so, put a limit of 170 for <code>n</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4398570"}, "edited": false, "score": 0, "creation_date": 1453296385, "post_id": 34900696, "comment_id": 57538659, "body": "i don&#39;t change it... im not understanding can you please show me how it will be the code? Thanks"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1453295924, "last_edit_date": 1453295924, "creation_date": 1453294632, "answer_id": 34900696, "question_id": 34900583, "link": "https://stackoverflow.com/questions/34900583/calculation-the-taylor-series-of-sinh/34900696#34900696", "title": "Calculation the Taylor series of sinh", "body": "<ol>\n<li><p>You are losing precision since many of the terms will be fractional quantities. Using an <code>int</code> will clobber the decimal portion. Replace your <code>int</code> types with <code>double</code> types as appropriate.</p></li>\n<li><p>Your factorial function will overflow for surprisingly small values of <code>n</code>. For 16 bit <code>int</code>, the largest value of <code>n</code> is 7, for 32 bit it's 12 and for 64 bit it's 19. The behaviour on overflowing a <code>signed</code> integral type is <em>undefined</em>. You could use <code>unsigned long long</code> or a <code>uint128_t</code> if your compiler supports it. That will buy you a bit more time. But given you're converting to a <code>double</code> anyway, you may as well use a <code>double</code> from the get-go. Note that an IEEE764 floating point double will hit infinity at 171!</p></li>\n<li><p>Be assured that the radius of convergence of the Maclaurin expansion of <code>sinh</code> is infinite for <em>any</em> value of <code>x</code>. So any value of <code>x</code> will work, although convergence might be slow. See <a href=\"http://math.cmu.edu/~bkell/21122-2011f/sinh-maclaurin.pdf\" rel=\"nofollow\">http://math.cmu.edu/~bkell/21122-2011f/sinh-maclaurin.pdf</a>.</p></li>\n</ol>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4398570"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "accepted_answer_id": 34900638, "answer_count": 2, "score": 2, "last_activity_date": 1453448819, "creation_date": 1453294275, "last_edit_date": 1453448819, "question_id": 34900583, "link": "https://stackoverflow.com/questions/34900583/calculation-the-taylor-series-of-sinh", "title": "Calculation the Taylor series of sinh", "body": "<p>The function calculates the value of <code>sinh(x)</code> using the following\ndevelopment in a Taylor series:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GcvS1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GcvS1.png\" alt=\"sinh\"></a></p>\n\n<p>I want to calculate the value of sinh(3) = 10.01787, but the function outputs 9. I also get this warning: </p>\n\n<blockquote>\n  <p>1>main.c(24): warning C4244: 'function': conversion from 'double' to 'int', possible loss of data</p>\n</blockquote>\n\n<p>This is my code:</p>\n\n<pre><code>int fattoriale(int n)\n{\n    int risultato = 1;\n    if (n == 0) \n    {\n        return 1;\n    }\n    for (int i = 1; i &lt; n + 1; i++) \n    {\n        risultato = risultato * i;\n    }\n    return risultato;\n}\n\nint esponenziale(int base, int esponente) \n{\n    int risultato = 1;\n    for (int i = 0; i &lt; esponente; i++) \n    {\n        risultato = risultato * base;\n    }\n    return risultato;\n}\n\ndouble seno_iperbolico(double x) \n{\n    double risultato = 0, check = -1;\n    for (int n = 0; check != risultato; n++)\n    {\n        check = risultato;\n        risultato = risultato + (((esponenziale(x, ((2 * n) + 1))) / (fattoriale((2 * n) + 1))));\n    }\n    return risultato;\n}\n\nint main(void) \n{\n    double numero = 1;\n    double risultato = seno_iperbolico(numero);\n}\n</code></pre>\n\n<p>Please help me fix this program.</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 1099, "user_id": 1444126, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dO7q6.png?s=128&g=1", "display_name": "ergys", "link": "https://stackoverflow.com/users/1444126/ergys"}, "edited": false, "score": 5, "creation_date": 1453294112, "post_id": 34900368, "comment_id": 57537188, "body": "You need a <code>n+1</code> size array to store a string of length <code>n</code>."}, {"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 0, "creation_date": 1453294519, "post_id": 34900368, "comment_id": 57537446, "body": "NEVER cast the result of malloc. and you should stick to one definition (<code>PPM</code> or <code>struct PPM</code>), do not mix."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1453294628, "post_id": 34900368, "comment_id": 57537515, "body": "When you decide whether a line is a comment or not, you have already read that line. You break, but the file offset is after that line. So your next scanned number is 255, of course. (In my opinion it&#39;s a good idea not to mix <code>fscanf</code> and <code>fgets</code>, because both treat new-line characters differently.)"}, {"owner": {"reputation": 1717, "user_id": 2251468, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/42a82827ada5f035a05a1a28a4eee5ce?s=128&d=identicon&r=PG", "display_name": "madcrazydrumma", "link": "https://stackoverflow.com/users/2251468/madcrazydrumma"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1453294708, "post_id": 34900368, "comment_id": 57537557, "body": "@MOehm Okay i understand that.. but how could I fix the offset issue?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1453295327, "post_id": 34900368, "comment_id": 57537999, "body": "Why do you <code>typedef</code> <code>PPM, if you still use </code>struct PPM` only? Either <code>typedef</code> or use <code>struct</code> namespace, but not both; that is just confusing. One of the major rules in programming is to express consistently."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453394094, "post_id": 34900368, "comment_id": 57591646, "body": "the <code>argc</code> and <code>argv[]</code> parameters are not used (raises compiler warnings) suggest the main() signature be: <code>int main( void )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453394177, "post_id": 34900368, "comment_id": 57591720, "body": "the closing brace of the function is followed by a semicolon <code>;</code>.  (raises compiler warning) suggest removing the trailing semicolon <code>;</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453394328, "post_id": 34900368, "comment_id": 57591835, "body": "making the tag name of a struct that same as a typedef name for that struct can be handled by a modern compiler, but leads to confusion for the human reader. (in the case, even the OP is being confused.)  Suggest making the names different"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453394545, "post_id": 34900368, "comment_id": 57591987, "body": "there is a unused variable <code>newPPM</code> (raises compiler warning) which is an indication of sloppy coding.   Suggest, when compiling to always enable all the warnings, then fix those warnings (for gcc, at a minimum use: <code>-Wall -Wextra -pdenatic</code> (I also use: `-Wconversion -std=c99)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453394738, "post_id": 34900368, "comment_id": 57592105, "body": "when calling <code>malloc()</code> <code>realloc()</code> or <code>calloc()</code> 1) in C, the returned value has type <code>void*</code> so can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, maintain.  2) always check (!=NULL) the returned value to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453394827, "post_id": 34900368, "comment_id": 57592162, "body": "when calling the <code>scanf()</code> family of function (I.E. <code>fscanf()</code>) always check the returned value (not the parameter value) to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453395270, "post_id": 34900368, "comment_id": 57592469, "body": "regarding this line: <code>if(file == NULL) return 0;</code>  1) this tells the user NOTHING about what happened in the execution of the code. 2) the <code>0</code> return value is telling the system that the execution was successful (no errors).   3) placing the literal on the <code>rvalue</code> means a keypunch error, like entering <code>=</code> rather than <code>==</code> will be accepted by the compiler and be a major pain to debug.  4) not a good idea to call the variable name the same as the struct name with only capitalization difference. (cont)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453395451, "post_id": 34900368, "comment_id": 57592588, "body": "(cont)  Suggest: <code>if( NULL == file ) { perror( &quot;fopen for ape.ppm failed&quot; ); exit( EXIT_FAILURE ); }</code>   Note: the call to <code>perror()</code> outputs to stderr and will also output the message indicating why the OS thinks the call to fopen() failed.  calling <code>exit( EXIT_FAILURE )</code> will let the OS/shell/etc. know that the program did not execute successfully,."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453395602, "post_id": 34900368, "comment_id": 57592686, "body": "in the function: <code>getPPM()</code> there is no need to check the parameter, as the <code>main()</code> function already checked it."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453397021, "post_id": 34900368, "comment_id": 57593577, "body": "regarding this line: <code>fscanf(fd, &quot;%2s\\n&quot;, newPPMFile-&gt;format);</code> the format specifier &#39;%2s&#39;  will read the two characters, the (because it is a %s format specifier) always append a NUL byte.   This will overflow the &#39;format&#39; input buffer.  this results in undefined behaviour.  Suggest: <code>fscanf(fd, &quot;%2c &quot;, newPPMFile-&gt;format);</code> --or-- fscanf(fd, &quot;%c%c &quot;, newPPMFile-&gt;format[0]. newPPMFile-&gt;format[1] );`  (notice the trailing space char in the format string) which will input 2 characters and consume the trailing <code>white space</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1717, "user_id": 2251468, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/42a82827ada5f035a05a1a28a4eee5ce?s=128&d=identicon&r=PG", "display_name": "madcrazydrumma", "link": "https://stackoverflow.com/users/2251468/madcrazydrumma"}, "edited": false, "score": 0, "creation_date": 1453295177, "post_id": 34900763, "comment_id": 57537913, "body": "I understand both things you have said. Is there a way to move back from the advanced offset?"}], "tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 1, "last_activity_date": 1453294820, "creation_date": 1453294820, "answer_id": 34900763, "question_id": 34900368, "link": "https://stackoverflow.com/questions/34900368/program-reads-file-but-skips-lines-when-they-shouldnt-be-skipped/34900763#34900763", "title": "Program reads file but &quot;skips&quot; lines when they shouldn&#39;t be skipped", "body": "<p>There are a couple things here:</p>\n\n<pre><code>while(i &lt; COMMENT_ARRAY_SIZE &amp;&amp; fgets(str, COMMENT_LENGTH, fd) != NULL) {\n    if(str[0] != '#') {\n        break;\n</code></pre>\n\n<p>The position for the next read (offset) has already advanced, if you break or not. So naturally, it'll continue at the advanced offset, like you experienced here.</p>\n\n<p>Also, </p>\n\n<pre><code>(PPM *) malloc(sizeof(PPM));\n</code></pre>\n\n<p>Casting the result of <code>malloc()</code> is unnecessary and potentially masks errors.</p>\n"}, {"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 2, "creation_date": 1453295856, "post_id": 34901073, "comment_id": 57538325, "body": "Would the downvoter care to explain why for the rest of us...?"}, {"owner": {"reputation": 1717, "user_id": 2251468, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/42a82827ada5f035a05a1a28a4eee5ce?s=128&d=identicon&r=PG", "display_name": "madcrazydrumma", "link": "https://stackoverflow.com/users/2251468/madcrazydrumma"}, "edited": false, "score": 0, "creation_date": 1453312755, "post_id": 34901073, "comment_id": 57550408, "body": "There is an issue with reading comments though.. It only reads one of the comments. Is there a way to get round this issue? I tried things like: <code>while (fscanf(fd, &quot;%79[^\\n]&quot;, buf) &gt;= 1) { }</code> and <code>while(.. != 0)</code> but I can&#39;t get it to work"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1453357589, "post_id": 34901073, "comment_id": 57568171, "body": "The program above reads multiple comments all right, but there is an issue if the comment exceeds the prescribes line length of currently 80 chars. I&#39;ve added a fix."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453396375, "post_id": 34901073, "comment_id": 57593208, "body": "using <code>fscanf()</code> ( with the suggested format string ) will fail to read a complete comment line because such lines contain <code>white space</code> and the input will stop upon encountering the white space"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453401382, "post_id": 34901073, "comment_id": 57596202, "body": "@user3629249: No, it won&#39;t. The <code>%s</code> format scans words delimited by white space. The <code>%[</code> format, which is used to scan a comment hehe, will scan as long as the characters match, in this case until a new-line (or the end of the input) is encountered. For what it&#39;s worth, I&#39;ve tested the program above with the given input and also with multiple, very long lines. The reading is a rough draft (and it misses many checks), but the point raised in the question, namely reading the comments without swallowing data lines, works."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453406034, "post_id": 34901073, "comment_id": 57598917, "body": "Your right, I was looking at the first call to <code>fscanf()</code> and thinking that was reading a comment.  Sorry, my error"}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 0, "last_activity_date": 1453357799, "last_edit_date": 1453357799, "creation_date": 1453295686, "answer_id": 34901073, "question_id": 34900368, "link": "https://stackoverflow.com/questions/34900368/program-reads-file-but-skips-lines-when-they-shouldnt-be-skipped/34901073#34901073", "title": "Program reads file but &quot;skips&quot; lines when they shouldn&#39;t be skipped", "body": "<p><code>fgets</code> reads the full line into the buffer. It it doesn't begin with a hash mark, you lose the data on that line.</p>\n\n<p>A solution is to use <code>fscanf</code> throughout. <code>fscanf</code> stops scanning when the pattern isn't matched or if a conversion can't be made. So if you enforce a hash mark before the comment, but the line doesn't begin with a hash mark, the rest of the line is untouched:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    int width, height, max;\n    char buf[80];                             // temporary buffer\n    FILE *fd = fopen(\"kk\", \"r\");\n\n    if(fd == NULL) return 1;                  // TODO: Error message\n\n    fscanf(fd, \"%79s\", buf);\n    if (strcmp(buf, \"P3\") != 0) return 1;     // TODO: Error message\n\n    while (fscanf(fd, \" # %79[^\\n]%*[^\\n]\", buf) == 1) {\n        printf(\"Comment: %s\\n\", buf);\n    }\n\n    fscanf(fd, \"%d %d\", &amp;width, &amp;height);     // TODO: Check success\n    printf(\"%d x %d\\n\", width, height);\n\n    fscanf(fd, \"%d\", &amp;max);                   // TODO: Check success\n    printf(\"max: %d\\n\", max);\n\n    fclose(fd);    \n    return 0;\n}\n</code></pre>\n\n<p>There are some things to keep in mind, though:</p>\n\n<ul>\n<li><code>fscanf</code> does not care or know about new lines; new-line characters are just white space. That means that your first hash mark could be on the same line with the file format <code>P3</code>.</li>\n<li>What is an advantage in reading the comments may be a pitfall when you read the values: The code above doesn't check whether a conversion was made. That's not good, especially that if you read <code>EOF</code> or a string that isn't an integer, <code>fscanf</code> gets stuck.</li>\n<li>The format <code>%79[^\\n]</code> will read only up to 79 characters. If the comment line is longer, the file position will not be on the new-line character, this srewing up the reading of subsequent lines. To circumvent that, you can add <code>%*[^\\n]</code> after that: This will enforce that you read to the next new-line character, but it won't store the results. (<code>*</code> means \"don't store result\" in <code>scanf</code> formats.) That way you get up to the first 80 characters of each comment line and also ensure that the line is read completely if it is longer.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1453309024, "last_edit_date": 1495540322, "creation_date": 1453305294, "answer_id": 34904625, "question_id": 34900368, "link": "https://stackoverflow.com/questions/34900368/program-reads-file-but-skips-lines-when-they-shouldnt-be-skipped/34904625#34904625", "title": "Program reads file but &quot;skips&quot; lines when they shouldn&#39;t be skipped", "body": "<ol>\n<li><p>Insufficient space <a href=\"https://stackoverflow.com/questions/34900368/program-reads-file-but-skips-lines-when-they-shouldnt-be-skipped#comment57537188_34900368\">@errikos</a>.</p>\n\n<pre><code>// char format[2]; //2 letter code for PPM format\nchar format[2 + 1]; //2 letter code for PPM format\n...\n// 2 is the max width of non-white-space characters to scan\nfscanf(fd, \"%2s\\n\", newPPMFile-&gt;format);\n</code></pre></li>\n<li><p>Check the return values form <code>fscanf()</code></p>\n\n<pre><code>// fscanf(fd, \"%d %d\", &amp;newPPMFile-&gt;width, &amp;newPPMFile-&gt;height);\nif (fscanf(fd, \"%d %d\", &amp;newPPMFile-&gt;width, &amp;newPPMFile-&gt;height) != 2) {\n  fprintf(stderr, \"Error reading width &amp; height\\n\");\n}\n</code></pre></li>\n<li><p>Code mixes <code>fscanf()</code> with <code>fgets()</code>.  Tis often is a problem as many formats used to not consume that trailing <code>'\\n`` and then a following</code>fgets()<code>simply reads just that one character.  Reccomedn only using</code>fgets()`.</p></li>\n<li><p>Possibly other important issues too.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1453396224, "creation_date": 1453396224, "answer_id": 34930018, "question_id": 34900368, "link": "https://stackoverflow.com/questions/34900368/program-reads-file-but-skips-lines-when-they-shouldnt-be-skipped/34930018#34930018", "title": "Program reads file but &quot;skips&quot; lines when they shouldn&#39;t be skipped", "body": "<p>here is the root of the problem.</p>\n\n<p>in the loop reading comments:</p>\n\n<p>when the line is read (when reading comments) that does not start with a #, then the code has already read width+height values from the input file.</p>\n\n<p>So the code needs to parse those values from the <code>already read</code> line.</p>\n"}], "owner": {"reputation": 1717, "user_id": 2251468, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/42a82827ada5f035a05a1a28a4eee5ce?s=128&d=identicon&r=PG", "display_name": "madcrazydrumma", "link": "https://stackoverflow.com/users/2251468/madcrazydrumma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 34901073, "answer_count": 4, "score": 1, "last_activity_date": 1453396224, "creation_date": 1453293673, "question_id": 34900368, "link": "https://stackoverflow.com/questions/34900368/program-reads-file-but-skips-lines-when-they-shouldnt-be-skipped", "title": "Program reads file but &quot;skips&quot; lines when they shouldn&#39;t be skipped", "body": "<p>So basically I have a program that reads in a specific format of a file as shown:</p>\n\n<pre><code>P3\n# CREATOR: GIMP PNM Filter Version 1.1\n400 530\n255\n189\n165\n181\n181\n156\n...\n</code></pre>\n\n<p>My program reads in the first line as the format of the file, then any comments starting with a '#', then the width and height, then the max rgb value and then any other rgb values.</p>\n\n<p><strong>NOTE:</strong> the part reading in the rgb values is incomplete so ignore this for my question. Now to my issue..</p>\n\n<p>The output i want is as shown as the exact file format, but the result i get is as follows:</p>\n\n<pre><code>P3\n# CREATOR: GIMP PNM Filter Version 1.1\n255 189\n165\n</code></pre>\n\n<p>As you can see, it completely skips the width and height values and uses the next 2 values in place of it for some reason...</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define COMMENT_LENGTH 256\n#define COMMENT_ARRAY_SIZE 10\n#define MAX_PIXEL_HEIGHT 480\n#define MAX_PIXEL_WIDTH 640\n\ntypedef struct PPM {\n    char format[2]; //2 letter code for PPM format\n    char comments[COMMENT_LENGTH][COMMENT_ARRAY_SIZE]; //comment array\n    int width; //number of columns\n    int height; //number of rows\n    int max; //maximum colour value (usually 255)\n    int rgbPixels[MAX_PIXEL_WIDTH * MAX_PIXEL_HEIGHT][3]; //integers between 0 and max for pixel i's RGB values\n}PPM;\n\nstruct PPM * getPPM(FILE *fd);\n\nint main(int argc, char **argv) {\n    FILE *file = fopen(\"ape.ppm\", \"r\");\n    if(file == NULL) return 0;\n    else {\n        struct PPM *newPPM = getPPM(file);\n\n        return 0;\n    }\n}\n\nstruct PPM * getPPM(FILE *fd) {\n    if(fd == NULL) {\n        return NULL;\n    }\n\n    struct PPM *newPPMFile = (PPM *) malloc(sizeof(PPM));\n\n    fscanf(fd, \"%2s\\n\", newPPMFile-&gt;format);\n    printf(\"%2s\\n\", newPPMFile-&gt;format);\n\n    //check for comments\n    int i = 0;\n    char str[COMMENT_LENGTH];\n    while(i &lt; COMMENT_ARRAY_SIZE &amp;&amp; fgets(str, COMMENT_LENGTH, fd) != NULL) {\n        if(str[0] != '#') {\n            break;\n        } else {\n            strcpy(newPPMFile-&gt;comments[i], str);\n            printf(\"%s\", newPPMFile-&gt;comments[i]);\n        }\n    }\n\n    //read width and height\n    fscanf(fd, \"%d %d\", &amp;newPPMFile-&gt;width, &amp;newPPMFile-&gt;height);\n    printf(\"%d %d\\n\", newPPMFile-&gt;width, newPPMFile-&gt;height);\n\n    //read max\n    fscanf(fd, \"%d\", &amp;newPPMFile-&gt;max);\n    printf(\"%d\\n\", newPPMFile-&gt;max);\n\n    //read rgb data in rgb array (INCOMPLETE)\n\n\n    //close file\n    fclose(fd);\n\n    return newPPMFile;\n};\n</code></pre>\n"}, {"tags": ["c++", "c", "winapi"], "comments": [{"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1453294047, "post_id": 34900326, "comment_id": 57537156, "body": "Is <code>HHH</code> a directory and <code>abc.jpeg</code>, <code>def.txt</code> and <code>ghi.jpeg</code> files under this directory ?"}, {"owner": {"reputation": 21, "user_id": 3564711, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f4d8feb0b1273ffaa037aef20f3c9775?s=128&d=identicon&r=PG&f=1", "display_name": "Sree", "link": "https://stackoverflow.com/users/3564711/sree"}, "reply_to_user": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1453294331, "post_id": 34900326, "comment_id": 57537314, "body": "Yes, C:\\HHH  is directory"}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1453294430, "post_id": 34900326, "comment_id": 57537382, "body": "I have forgot one last question: is Backcup.bak already existing ? Or should it be created first ?"}, {"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 1, "creation_date": 1453338941, "post_id": 34900326, "comment_id": 57562784, "body": "How would you unjumble the 3 files from the bak file with no structured format?"}, {"owner": {"reputation": 21, "user_id": 3564711, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f4d8feb0b1273ffaa037aef20f3c9775?s=128&d=identicon&r=PG&f=1", "display_name": "Sree", "link": "https://stackoverflow.com/users/3564711/sree"}, "edited": false, "score": 0, "creation_date": 1453354114, "post_id": 34900326, "comment_id": 57566926, "body": "@mikedu- We have to create Backcup.bak."}], "answers": [{"tags": [], "owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "is_accepted": false, "score": 3, "last_activity_date": 1453293916, "creation_date": 1453293916, "answer_id": 34900454, "question_id": 34900326, "link": "https://stackoverflow.com/questions/34900326/how-to-use-copyfile-for-copying-a-particular-type-of-files-from-one-folder-to-an/34900454#34900454", "title": "How to use CopyFile for copying a particular type of files from one folder to another", "body": "<p>CopyFile doesn't accept wild cards or copy multiple files. It can copy a single file from one fully specified place to another.</p>\n\n<p>To achieve what you want you need to enumerate over the directory using <a href=\"https://msdn.microsoft.com/en-gb/library/windows/desktop/aa364418(v=vs.85).aspx\" rel=\"nofollow\">FindFirstFile</a>/<a href=\"https://msdn.microsoft.com/en-gb/library/windows/desktop/aa364428(v=vs.85).aspx\" rel=\"nofollow\">FindNextFile</a> and copy the files one by one using CopyFile. These functions take wildcards or you can ask for all files, and do the filtering yourself.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 3564711, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f4d8feb0b1273ffaa037aef20f3c9775?s=128&d=identicon&r=PG&f=1", "display_name": "Sree", "link": "https://stackoverflow.com/users/3564711/sree"}, "edited": false, "score": 0, "creation_date": 1453354213, "post_id": 34901833, "comment_id": 57566959, "body": "Thank you for you suggestion Mikedu95"}], "tags": [], "owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "is_accepted": true, "score": 2, "last_activity_date": 1453297714, "creation_date": 1453297714, "answer_id": 34901833, "question_id": 34900326, "link": "https://stackoverflow.com/questions/34900326/how-to-use-copyfile-for-copying-a-particular-type-of-files-from-one-folder-to-an/34901833#34901833", "title": "How to use CopyFile for copying a particular type of files from one folder to another", "body": "<p>Assuming the destination directory already exists.</p>\n\n<p><code>CopyFile</code> simply copy one file to another one. A quick solution consists in using the standard C <code>system</code> function to run the command to copy the files (using <code>copy</code> or <code>xcopy</code> for example), but that gives you less control.</p>\n\n<p>So sticking with <code>CopyFile</code>, you need to list all <code>*.jpeg</code> files from the <code>HHH</code> directory first, then copy each of them into the destination directory.</p>\n\n<p>You will also often need to split/concatenate paths during the processing, and though you can do that manually by using <code>strcpy</code>, <code>strcat</code>, etc. You've better to use dedicated functions like the <code>splitpath</code> and <code>makepath</code> family of functions or equivalents.</p>\n\n<p>That leads us to following sample code:</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt;\n#include &lt;windows.h&gt; \n#include &lt;tchar.h&gt;\n\nint main(void) {\n    WIN32_FIND_DATA File;\n    HANDLE hSearch;\n\n    TCHAR SourcePath[_MAX_PATH];\n    TCHAR SourceDrive[_MAX_DRIVE];\n    TCHAR SourceDir[_MAX_DIR];\n    TCHAR SourceFname[_MAX_FNAME];\n    TCHAR SourceExt[_MAX_EXT];\n\n    TCHAR DestPath[_MAX_PATH];\n    TCHAR DestDrive[_MAX_DRIVE];\n    TCHAR DestDir[_MAX_DIR];\n\n    LPCTSTR lpszFindPattern = TEXT(\"C:\\\\HHH\\\\*.jpeg\");\n\n    _tsplitpath_s(_T(\"C:\\\\HHH\\\\\"), SourceDrive, _MAX_DRIVE, SourceDir, _MAX_DIR, NULL, 0, NULL, 0);\n    _tsplitpath_s(_T(\"C:\\\\Backup.bak\\\\\"), DestDrive, _MAX_DRIVE, DestDir, _MAX_DIR, NULL, 0, NULL, 0);\n\n    hSearch = FindFirstFile(lpszFindPattern, &amp;File);\n    if (hSearch != INVALID_HANDLE_VALUE) {\n        do {\n            _tsplitpath_s(File.cFileName, NULL, 0, NULL, 0, SourceFname, _MAX_FNAME, SourceExt, _MAX_EXT);\n\n            _tmakepath_s(SourcePath, _MAX_PATH, SourceDrive, SourceDir, SourceFname, SourceExt);\n            _tmakepath_s(DestPath, _MAX_PATH, DestDrive, DestDir, SourceFname, SourceExt);\n\n            CopyFile(SourcePath, DestPath, FALSE);\n        } while (FindNextFile(hSearch, &amp;File));\n\n        FindClose(hSearch);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 3564711, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f4d8feb0b1273ffaa037aef20f3c9775?s=128&d=identicon&r=PG&f=1", "display_name": "Sree", "link": "https://stackoverflow.com/users/3564711/sree"}, "edited": false, "score": 0, "creation_date": 1453354353, "post_id": 34913993, "comment_id": 57567004, "body": "I prefer this one. I went through the msdn link for SHFileOperation, its saying &quot;This function has been replaced in Windows Vista by IFileOperation&quot; and the minimum supported client is Windows XP.  I have a doubt on this , its only repleced in Vista is it? what about windows 8?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 21, "user_id": 3564711, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f4d8feb0b1273ffaa037aef20f3c9775?s=128&d=identicon&r=PG&f=1", "display_name": "Sree", "link": "https://stackoverflow.com/users/3564711/sree"}, "edited": false, "score": 0, "creation_date": 1453362899, "post_id": 34913993, "comment_id": 57570490, "body": "<code>SHFileOperation()</code> was indeed replaced <b>starting in</b> Vista, and has been the preferred API by Microsoft moving forward. But like most older APIs, <code>SHFileOperation()</code> is still functional in modern Windows versions. In any case, <code>SHFileOperation()</code> is fine if you just want to copy the files and don&#39;t really care about the particulars. But using <code>FindFirstFile()</code> with <code>CopyFile()</code> or <code>IFileOperation</code> will allow you to discover which specific files are copied successfully and which files fail. <code>SHFileOperation()</code> can&#39;t tell you that."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1453340867, "creation_date": 1453340867, "answer_id": 34913993, "question_id": 34900326, "link": "https://stackoverflow.com/questions/34900326/how-to-use-copyfile-for-copying-a-particular-type-of-files-from-one-folder-to-an/34913993#34913993", "title": "How to use CopyFile for copying a particular type of files from one folder to another", "body": "<p><code>CopyFile()</code> does not support what you are asking for.  You would have to manually loop through the source directory locating the desired files and then copy them one at a time.</p>\n\n<p>A better solution is to let the OS do the work for you.  You can use the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762164.aspx\" rel=\"nofollow\"><code>SHFileOperation()</code></a> function for that:</p>\n\n<pre><code>SHFILEOPSTRUCT op = {0};\nop.hwnd = hwnd;\nop.wFunc = FO_COPY;\nop.pFrom = TEXT(\"C:\\\\HHH\\\\*.jpeg\\0\"); // note the extra null terminator!\nop.pTo = TEXT(\"C:\\\\Backup.bak\\\\\\0\"); // note the extra null terminator!\nop.fFlags = FOF_FILESONLY | FOF_NOCONFIRMATION | FOF_NOERRORUI | FOF_NORECURSION | FOF_SILENT;\n\nif (SHFileOperation(&amp;op) != 0)\n{\n    // error...\n}\nelse\n{\n    if (op.fAnyOperationsAborted)\n    {\n        // not all files copied...\n    }\n}\n</code></pre>\n\n<p>On Vista and later, <code>SHFileOperation()</code> has been deprecated by <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb775771.aspx\" rel=\"nofollow\"><code>IFileOperation</code></a>, but unfortunately it does not support wildcards at all, so you would have to enumerate the files manually first, passing each file to <code>IFileOperation::CopyItem()</code>, or putting them in an array that you can then pass to <code>IFileOperation::CopyItems()</code>, and then finally call <code>IFileOperation::PerformOperations()</code> to perform the actual copy.</p>\n"}], "owner": {"reputation": 21, "user_id": 3564711, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f4d8feb0b1273ffaa037aef20f3c9775?s=128&d=identicon&r=PG&f=1", "display_name": "Sree", "link": "https://stackoverflow.com/users/3564711/sree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1429, "favorite_count": 0, "accepted_answer_id": 34901833, "answer_count": 3, "score": 0, "last_activity_date": 1453340867, "creation_date": 1453293529, "last_edit_date": 1453299550, "question_id": 34900326, "link": "https://stackoverflow.com/questions/34900326/how-to-use-copyfile-for-copying-a-particular-type-of-files-from-one-folder-to-an", "title": "How to use CopyFile for copying a particular type of files from one folder to another", "body": "<p>How to use <code>CopyFile</code> for copying specific type of files from one folder to a backup file (<code>backup.bkp</code>)</p>\n\n<p>Example:</p>\n\n<pre><code>C:\\HHH\n  abc.jpeg\n  def.txt\n  ghi.jpeg\n</code></pre>\n\n<p>I want to copy only jpeg files to the <code>backup.bkp</code> file</p>\n\n<p>I tried the below syntax but it is not working,</p>\n\n<pre><code>CopyFile( _T(\"C:\\\\HHH\\*.jpeg\"),_T(\"C:\\\\Backup.bak\", FALSE);\n</code></pre>\n\n<p>Can anyone suggest a solution for this?</p>\n"}, {"tags": ["c", "malloc"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1453293173, "post_id": 34900122, "comment_id": 57536579, "body": "Most string functions, like e.g. <a href=\"http://en.cppreference.com/w/c/string/byte/strchr\" rel=\"nofollow noreferrer\"><code>strchr</code></a> returns pointer to a position <i>in</i> the string you pass to the function. In the case of you example, <code>strchr</code> returns a pointer to somewhere inside <code>string</code>, or <code>NULL</code>."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1453293174, "post_id": 34900122, "comment_id": 57536582, "body": "Please read about <code>malloc()</code> answering this with yes or no will confuse you more."}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1453293292, "post_id": 34900122, "comment_id": 57536670, "body": "<code>strchr</code> returns a pointer like <code>string + x</code> where <code>x</code> is the offset of the first occurrence <code>&#39;z&#39;</code> in <code>string</code>. It&#39;s a pointer to an existing, valid memory address. No need to allocate that memory twice. Mind you, if <code>string</code> is a <code>const char *</code>, <code>pointer</code> will point to read-only memory, using <code>pointer</code> to change the values in there will cause errors. In that case, you&#39;ll want to copy the string to writable memory, either on stack or heap, but even then: I&#39;d probably use <code>strdup</code> for that"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453293304, "post_id": 34900122, "comment_id": 57536680, "body": "Learn about the difference between a pointer and what it points to (the pointee). Before you can dereference a pointer, you need to point it at something. That&#39;s all."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1453293350, "post_id": 34900122, "comment_id": 57536713, "body": "Also think about it like this: When you assign the pointer returned by <code>malloc</code> to your variable <code>pointer</code>, then the value of <code>pointer</code> is the address of the newly allocated memory. If you then <i>reassign</i> the pointer to point somewhere else, you loose the original pointer, and will have a memory leak. If you have an integer variable, e.g. <code>int i</code>, and assign a value to it, lets say <code>5</code>. Then you do <code>i = 42</code>, you loose the original value of <code>i</code>. It&#39;s the same with pointer variables."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1453293463, "post_id": 34900122, "comment_id": 57536781, "body": "And finally, if you are not sure, always <i>read a reference</i>, it will tell you what it returned. <a href=\"http://en.cppreference.com/w/c\" rel=\"nofollow noreferrer\">This is a good reference for the C language</a>, and its standard functions."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1453295410, "post_id": 34900122, "comment_id": 57538056, "body": "C does not have a string type. It is all convention. And &quot;inputting a string <b>into</b> a pointer&quot; is always wrong."}], "answers": [{"tags": [], "owner": {"reputation": 5978, "user_id": 460363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b938ec8462feb7f5e2a4b81cbaa8f1?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Komorowski", "link": "https://stackoverflow.com/users/460363/micha%c5%82-komorowski"}, "is_accepted": true, "score": 0, "last_activity_date": 1453293327, "creation_date": 1453293327, "answer_id": 34900260, "question_id": 34900122, "link": "https://stackoverflow.com/questions/34900122/confused-about-when-exactly-i-should-malloc/34900260#34900260", "title": "Confused about when exactly I should malloc", "body": "<p>You don't have to allocate any memory here . Strchr function returns a pointer to the first occurence of a char in a string if it exists. If a given string deos not contain a char then a null will be returned.</p>\n\n<p>You need to allocate memory only if you want to create something new, that has not been created yet. In this case the input string exists and a pointer will point to a position within this string.</p>\n"}, {"tags": [], "owner": {"reputation": 7602, "user_id": 3845604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/4wqJf.png?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3845604/praveen"}, "is_accepted": false, "score": 0, "last_activity_date": 1453293565, "creation_date": 1453293565, "answer_id": 34900333, "question_id": 34900122, "link": "https://stackoverflow.com/questions/34900122/confused-about-when-exactly-i-should-malloc/34900333#34900333", "title": "Confused about when exactly I should malloc", "body": "<p><code>strchr</code> returns a pointer to the first occurrence of\u00a0character\u00a0in the C string.</p>\n\n<p>It's pointing to a memory location which is having the character searching  in the C string, so no need to allocate new memory using <code>malloc</code></p>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1453293575, "creation_date": 1453293575, "answer_id": 34900339, "question_id": 34900122, "link": "https://stackoverflow.com/questions/34900122/confused-about-when-exactly-i-should-malloc/34900339#34900339", "title": "Confused about when exactly I should malloc", "body": "<p>Using <code>malloc()</code> to allocate space for a pointer and then reassigning the pointer is wrong. You can't even perform pointer arithmetic on it because then you can't free it. You allocate memory and then use that memory, the pointer will then contain the address to that memory, if you overwrite that address then your program will not have a possible way to access that memory not even to free it. Then the allocated memory is useless and there is no point in allocating memory for this.</p>\n"}, {"tags": [], "owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "is_accepted": false, "score": 0, "last_activity_date": 1453293749, "creation_date": 1453293749, "answer_id": 34900398, "question_id": 34900122, "link": "https://stackoverflow.com/questions/34900122/confused-about-when-exactly-i-should-malloc/34900398#34900398", "title": "Confused about when exactly I should malloc", "body": "<p>You must use malloc if you need the system to provide you memory to store data. For example, if you want to store a string you should allocate memory for it</p>\n\n<pre><code>char* s = malloc(10);\nstrcpy(s, \"something\");\n</code></pre>\n\n<p>If you only need a pointer that points to something that already is in memory you mustn't allocate it, in your case the <code>strchr</code> function return a pointer that points to the position in memory where is the char <code>c</code> in the string <code>s</code></p>\n\n<pre><code>char* c;\nc = strchr(s, 'm');\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 5565459, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d3d149f7a2f658f33c68a6d6191b30d8?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/5565459/brandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 34900260, "answer_count": 4, "score": 4, "last_activity_date": 1453296793, "creation_date": 1453292978, "last_edit_date": 1453296454, "question_id": 34900122, "link": "https://stackoverflow.com/questions/34900122/confused-about-when-exactly-i-should-malloc", "title": "Confused about when exactly I should malloc", "body": "<p>I know if I am inputting a string into a pointer variable I would malloc that based on the size of the input received. </p>\n\n<p>But what if I am using a pointer variable for the use in <a href=\"http://en.cppreference.com/w/c/string/byte/strchr\" rel=\"nofollow\"><code>strchr</code></a>? For example if I want the pointer to point to the the character \"z\" in a string. </p>\n\n<pre><code>char *pointer;\n\npointer=strchr(string,'z');\n</code></pre>\n\n<p>Would I need to malloc pointer? Or is it not needed?</p>\n"}, {"tags": ["c", "random", "malloc", "shuffle", "srand"], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1453293356, "post_id": 34900218, "comment_id": 57536715, "body": "I think you should explain <i>why</i>. After all <code>sizeof(karten)</code> in main is valid, and is thus probably confusing."}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": true, "score": 2, "last_activity_date": 1453293384, "last_edit_date": 1495535275, "creation_date": 1453293214, "answer_id": 34900218, "question_id": 34900059, "link": "https://stackoverflow.com/questions/34900059/unable-to-shuffle-cards-randomly/34900218#34900218", "title": "Unable to shuffle cards randomly", "body": "<p><code>sizeof(karten)</code> don't give you the length of the array, see <a href=\"https://stackoverflow.com/questions/5933255/sizeof-array-clarification\">sizeof array clarification</a>. Just rewrite the code like this (don't need another array):</p>\n\n<pre><code>void shuffle(int karten[],int n,int s)\n{\n    int i=0, vi;\n    int d=0, vd;\n    for(int z=0;z&lt;=s;z++)\n    {\n        i=rand()%10;\n        d=rand()%10;\n        vi=karten[i];\n        vd=karten[d];\n        karten[d]=vi;\n        karten[i]=vd;   \n    }\n    printf(\"Es wurden %d Vertauschungen gemacht\\n\",s);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2462, "user_id": 5006325, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TpZdZ.jpg?s=128&g=1", "display_name": "Viktor Simk&#243;", "link": "https://stackoverflow.com/users/5006325/viktor-simk%c3%b3"}, "is_accepted": false, "score": 3, "last_activity_date": 1453293831, "last_edit_date": 1453293831, "creation_date": 1453293431, "answer_id": 34900282, "question_id": 34900059, "link": "https://stackoverflow.com/questions/34900059/unable-to-shuffle-cards-randomly/34900282#34900282", "title": "Unable to shuffle cards randomly", "body": "<p><code>void shuffle(int karten[],int n,int s)</code> is equivalent to<br>\n<code>void shuffle(int *karten,int n,int s)</code><br>\nso <code>int v[]={(int)malloc(sizeof(karten))};</code> allocates just the size of <code>karten</code><br>\nwhich is a pointer to an int, so 4 bytes(on most systems).<br>\nBecause of that You are trying to access unallocated memory.</p>\n"}], "owner": {"reputation": 21, "user_id": 5815716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0afeef816c1d9d03092f223f1eea6830?s=128&d=identicon&r=PG&f=1", "display_name": "heroo", "link": "https://stackoverflow.com/users/5815716/heroo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 34900218, "answer_count": 2, "score": 2, "last_activity_date": 1453293831, "creation_date": 1453292791, "last_edit_date": 1453292964, "question_id": 34900059, "link": "https://stackoverflow.com/questions/34900059/unable-to-shuffle-cards-randomly", "title": "Unable to shuffle cards randomly", "body": "<p>I am doing a project that shuffle 10 cards (12) time randomly but it didn't work with my code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid show(int[],int);\n\nvoid shuffle(int[],int,int);\n\nint main (void)\n{\n    int karten[]={1,2,3,4,5,6,7,8,9,10};\n    int n = sizeof(karten)/sizeof(int);\n    //printf(\"%d\",n);\n    int s=12;\n\n    srand(time(NULL));\n    printf(\"Karten vor dem Mischen: \\n\");\n    show(karten,n);\n    shuffle(karten,n,s);\n    printf(\"Karten nach dem Mischen:\\n\");\n    show(karten,n);\n    return 0;\n}\nvoid show(int karten[],int n)\n{\n    for(int i=0;i&lt;n;i++)\n    {\n        printf(\"%d,\",karten[i]);\n    }\n    printf(\"\\n\");\n}\nvoid shuffle(int karten[],int n,int s)\n{\n    int i=0;\n    int d=0;\n    int v[]={(int)malloc(sizeof(karten))};\n    for(int z=0;z&lt;=s;z++)\n    {\n        i=rand()%10;\n        d=rand()%10;\n        //printf(\"%d--&gt;%d\\n\",i,d);\n        v[i]=karten[i];\n        v[d]=karten[d];\n        karten[d]=v[i];\n        karten[i]=v[d];\n\n    }\n    printf(\"Es wurden %d Vertauschungen gemacht\\n\",s);\n    free(v);\n}\n</code></pre>\n\n<p>The error is </p>\n\n<pre><code>(((process returned 255))) \n</code></pre>\n\n<p>and the program crashed.</p>\n"}, {"tags": ["c", "manpage"], "answers": [{"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453293210, "post_id": 34900162, "comment_id": 57536612, "body": "On my system, the answer to the first query is \u201ctimespec: nothing appropriate.\u201d Should I return my system?"}, {"owner": {"reputation": 5259, "user_id": 482317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/baddc1ebd4dbe1bdb3fa853c18fe155f?s=128&d=identicon&r=PG", "display_name": "Andrea Bergia", "link": "https://stackoverflow.com/users/482317/andrea-bergia"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453293278, "post_id": 34900162, "comment_id": 57536659, "body": "No. You should use google, or if you <i>really</i> don&#39;t want to, you can grep your include path. But why would you?"}, {"owner": {"reputation": 2133, "user_id": 516011, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/87499230ae07fb106fb1c8434a2ea2b3?s=128&d=identicon&r=PG", "display_name": "retrodev", "link": "https://stackoverflow.com/users/516011/retrodev"}, "edited": false, "score": 0, "creation_date": 1453293552, "post_id": 34900162, "comment_id": 57536848, "body": "I also get &quot;timespec: nothing appropriate&quot;."}], "tags": [], "owner": {"reputation": 5259, "user_id": 482317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/baddc1ebd4dbe1bdb3fa853c18fe155f?s=128&d=identicon&r=PG", "display_name": "Andrea Bergia", "link": "https://stackoverflow.com/users/482317/andrea-bergia"}, "is_accepted": false, "score": 0, "last_activity_date": 1453293084, "creation_date": 1453293084, "answer_id": 34900162, "question_id": 34900056, "link": "https://stackoverflow.com/questions/34900056/how-to-find-development-information-about-struct-timespec/34900162#34900162", "title": "How to find development information about struct timespec", "body": "<pre><code>$ apropos timespec\nclock_gettime        (2)  - Return the current timespec value of tp for the specified clock\n$ man 2 clock_gettime\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2133, "user_id": 516011, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/87499230ae07fb106fb1c8434a2ea2b3?s=128&d=identicon&r=PG", "display_name": "retrodev", "link": "https://stackoverflow.com/users/516011/retrodev"}, "edited": false, "score": 0, "creation_date": 1453293519, "post_id": 34900172, "comment_id": 57536822, "body": "I&#39;m running Ubuntu 15.10 64bit."}, {"owner": {"reputation": 2133, "user_id": 516011, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/87499230ae07fb106fb1c8434a2ea2b3?s=128&d=identicon&r=PG", "display_name": "retrodev", "link": "https://stackoverflow.com/users/516011/retrodev"}, "edited": false, "score": 0, "creation_date": 1453293619, "post_id": 34900172, "comment_id": 57536895, "body": "I&#39;m guessing you know to open up time.h from experience. The man page makes no reference to that header. How could I have come to that conclusion myself?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 2133, "user_id": 516011, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/87499230ae07fb106fb1c8434a2ea2b3?s=128&d=identicon&r=PG", "display_name": "retrodev", "link": "https://stackoverflow.com/users/516011/retrodev"}, "edited": false, "score": 0, "creation_date": 1453294735, "post_id": 34900172, "comment_id": 57537576, "body": "@retrodev <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/time.h.html\" rel=\"nofollow noreferrer\">POSIX specifies</a> that this is the place where <code>struct timespec</code> is declared."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 2133, "user_id": 516011, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/87499230ae07fb106fb1c8434a2ea2b3?s=128&d=identicon&r=PG", "display_name": "retrodev", "link": "https://stackoverflow.com/users/516011/retrodev"}, "edited": false, "score": 0, "creation_date": 1453294785, "post_id": 34900172, "comment_id": 57537617, "body": "@retrodev You could also search for <code>struct timespec</code> in <code>&#47;usr&#47;include</code> to find potential declarations."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 1, "last_activity_date": 1453293114, "creation_date": 1453293114, "answer_id": 34900172, "question_id": 34900056, "link": "https://stackoverflow.com/questions/34900056/how-to-find-development-information-about-struct-timespec/34900172#34900172", "title": "How to find development information about struct timespec", "body": "<p>Typically one of the man pages describes what these structures contain. If you tell us your platform I can give further details. Otherwise, open up the header <code>/usr/include/time.h</code> to see what <code>struct timespec</code> is defined as.</p>\n"}, {"tags": [], "owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "is_accepted": false, "score": 0, "last_activity_date": 1453294781, "last_edit_date": 1453294781, "creation_date": 1453294200, "answer_id": 34900556, "question_id": 34900056, "link": "https://stackoverflow.com/questions/34900056/how-to-find-development-information-about-struct-timespec/34900556#34900556", "title": "How to find development information about struct timespec", "body": "<p>Usually, when I need information on data types or functions, if not included in the man pages, I issue a command like the following:</p>\n\n<p><code>grep -r \"timespec\" /usr/include/</code> </p>\n\n<p>in the path where are the header files.</p>\n"}], "owner": {"reputation": 2133, "user_id": 516011, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/87499230ae07fb106fb1c8434a2ea2b3?s=128&d=identicon&r=PG", "display_name": "retrodev", "link": "https://stackoverflow.com/users/516011/retrodev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 34900172, "answer_count": 3, "score": -1, "last_activity_date": 1453294781, "creation_date": 1453292783, "question_id": 34900056, "link": "https://stackoverflow.com/questions/34900056/how-to-find-development-information-about-struct-timespec", "title": "How to find development information about struct timespec", "body": "<p>I'm writing a C program using <code>nftw()</code> to walk a filesystem and retrieve file modification times for each file.</p>\n\n<p><code>nftw()</code> calls a supplied function pointer and provides a <code>struct stat</code> as an argument.</p>\n\n<p><code>man stat(2)</code> states that the time modification fields are:</p>\n\n<pre><code>struct timespec st_atim;  /* time of last access */\nstruct timespec st_mtim;  /* time of last modification */\nstruct timespec st_ctim;  /* time of last status change */\n</code></pre>\n\n<p>However, whilst <code>man stat(2)</code> provides an example of how to print the time fields, it doesn't tell me how to find information about <code>struct timespec</code>, nor how to query/manipulate the time modification fields.</p>\n\n<p>How should I go about finding that information on my computer alone, without resorting to Google?</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1453292685, "post_id": 34900003, "comment_id": 57536265, "body": "The array name is equivalent to the address of the first element, so this <code>scanf(&quot;%s&quot;,&amp;str);</code> should be <code>scanf(&quot;%s&quot;, str);</code>."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 5140709, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119016004778723/picture?type=large", "display_name": "Rakesh Narang", "link": "https://stackoverflow.com/users/5140709/rakesh-narang"}, "edited": false, "score": 0, "creation_date": 1453293134, "post_id": 34900044, "comment_id": 57536550, "body": "Sorry, this change didn&#39;t give me the correct answer."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 69, "user_id": 5140709, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119016004778723/picture?type=large", "display_name": "Rakesh Narang", "link": "https://stackoverflow.com/users/5140709/rakesh-narang"}, "edited": false, "score": 0, "creation_date": 1453293950, "post_id": 34900044, "comment_id": 57537088, "body": "@RakeshNarang Add this line after the loop and before printing <code>revStr</code> <b>-&gt;</b> <code>revStr[i]=&#39;\\0&#39;;</code> ."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 1, "last_activity_date": 1453292761, "creation_date": 1453292761, "answer_id": 34900044, "question_id": 34900003, "link": "https://stackoverflow.com/questions/34900003/code-to-reverse-string-not-clearing-up-previous-values/34900044#34900044", "title": "Code to Reverse String not clearing up previous values", "body": "<pre><code>char str[30];\nscanf(\"%s\",&amp;str);\n           ^ don't pass address of array \n</code></pre>\n\n<p>Just this would work -</p>\n\n<pre><code>scanf(\"%29s\",str);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 4804212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71c7dc2d387b145dd1f109150c7c69f?s=128&d=identicon&r=PG&f=1", "display_name": "knn", "link": "https://stackoverflow.com/users/4804212/knn"}, "is_accepted": false, "score": 0, "last_activity_date": 1453293501, "creation_date": 1453293501, "answer_id": 34900317, "question_id": 34900003, "link": "https://stackoverflow.com/questions/34900003/code-to-reverse-string-not-clearing-up-previous-values/34900317#34900317", "title": "Code to Reverse String not clearing up previous values", "body": "<p>Try this:</p>\n\n<p>int t;\n    scanf(\"%d\", &amp;t);</p>\n\n<pre><code>while (t--) \n{\n    char str[30] = { 0 };\n\n    scanf(\"%s\", &amp;str);\n\n    char revStr[30] = { 0 };\n\n    int len = strlen(str);\n    int i = 0;\n    int j = len - 1;\n\n    while (i &lt; len) {\n        revStr[i] = str[j];\n        i++; j--;\n    }\n\n    printf(\"%s\\n\", revStr);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1453295855, "creation_date": 1453295855, "answer_id": 34901145, "question_id": 34900003, "link": "https://stackoverflow.com/questions/34900003/code-to-reverse-string-not-clearing-up-previous-values/34901145#34901145", "title": "Code to Reverse String not clearing up previous values", "body": "<p>You need to make two changes</p>\n\n<p>Firstly change <code>scanf(\"%s\",&amp;str);</code> to </p>\n\n<pre><code>scanf(\"%s\",str);\n</code></pre>\n\n<p>Secondly, after the while loop, you are not making the last element <code>rev</code> string <code>\\0</code>. Add this line before the printf statement.</p>\n\n<pre><code>revStr[i] = '\\0';\n</code></pre>\n\n<p>This should solve your problem.</p>\n"}], "owner": {"reputation": 69, "user_id": 5140709, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119016004778723/picture?type=large", "display_name": "Rakesh Narang", "link": "https://stackoverflow.com/users/5140709/rakesh-narang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1453295855, "creation_date": 1453292644, "last_edit_date": 1453292690, "question_id": 34900003, "link": "https://stackoverflow.com/questions/34900003/code-to-reverse-string-not-clearing-up-previous-values", "title": "Code to Reverse String not clearing up previous values", "body": "<p>I am doing this programming problem where I have reverse string of about 30 characters for 10 test cases.</p>\n\n<p>My code is this:-</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\nint main () {\n\n    int t;\n    scanf(\"%d\",&amp;t);\n\n    while (t--) {\n        char str[30];\n\n        scanf(\"%s\",&amp;str);\n\n        char revStr[30];\n\n        int len = strlen(str);\n        int i = 0;\n        int j = len-1;\n\n        while (i &lt; len) {\n            revStr[i] = str[j];\n            i++; j--;\n        }\n\n        printf(\"%s\\n\",revStr);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The output gets garbled up if the input string is larger than previous string.</p>\n\n<p>For example,</p>\n\n<p>if <code>last-string</code> had <code>6</code> characters, like <code>rocket\\0</code> and <code>new-string</code>, which is <code>fun\\0</code> has <code>3</code> characters, the output is <code>funket\\0</code>.</p>\n"}, {"tags": ["c", "macos", "security", "openssl", "asn.1"], "comments": [{"owner": {"reputation": 86437, "user_id": 981049, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AYKWV.jpg?s=128&g=1", "display_name": "Michael Dautermann", "link": "https://stackoverflow.com/users/981049/michael-dautermann"}, "edited": false, "score": 0, "creation_date": 1453291937, "post_id": 34899657, "comment_id": 57535716, "body": "<a href=\"https://lists.apple.com/archives/macnetworkprog/2015/Jun/msg00025.html\" rel=\"nofollow noreferrer\">Apple&#39;s Developer Tech Support recommends that if you want OpenSSL functionality</a>, you build your own version of the library and include it within your app.  Which is what I do in my own apps these days."}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "reply_to_user": {"reputation": 86437, "user_id": 981049, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AYKWV.jpg?s=128&g=1", "display_name": "Michael Dautermann", "link": "https://stackoverflow.com/users/981049/michael-dautermann"}, "edited": false, "score": 0, "creation_date": 1453294427, "post_id": 34899657, "comment_id": 57537379, "body": "@MichaelDautermann, thanks for pointing this out, but i&#39;ve already found Apple alternative crypto framework to openssl in &quot;CommonCrypto/CommonCrypto.h&quot; where you have all sort of sha/hash calculations, and in order to fully end my dependency in sources that are outside the SDK, i need the asn1 parser. if it&#39;s doable, i&#39;d like to know how."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1453359370, "post_id": 34899657, "comment_id": 57568853, "body": "You can look in <b><i><code>&#47;Applications&#47;.app&#47;Contents&#47;Developer&#47;Platforms&#47;MacOSX.platf&zwnj;&#8203;orm&#47;Developer&#47;SDKs&#47;M&zwnj;&#8203;acOSX10.8.sdk&#47;System&zwnj;&#8203;&#47;Library&#47;Frameworks&#47;&zwnj;&#8203;Security.framework&#47;H&zwnj;&#8203;eaders&#47;SecAsn1Templa&zwnj;&#8203;tes.h</code></i></b> for th template constants. And there are lots of hits and example code when searching for <a href=\"http://www.google.com/search?q=SecAsn1Decode+site%3Aapple.com\" rel=\"nofollow noreferrer\">SecAsn1Decode site:apple.com</a>. You can probably refine it further with <b><i><code>filetype:c</code></i></b>."}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1453366369, "post_id": 34899657, "comment_id": 57572313, "body": "@jww, thanks for the help, I&#39;ve looked at the template constants but i&#39;m wondering how do i get the template per field i wish to extract. Well, I guess i&#39;ll have to figure it out prior to calling the function."}], "answers": [{"comments": [{"owner": {"reputation": 3466, "user_id": 826614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/935a0a598738883b4af59a73335a7aa0?s=128&d=identicon&r=PG", "display_name": "gaussblurinc", "link": "https://stackoverflow.com/users/826614/gaussblurinc"}, "edited": false, "score": 0, "creation_date": 1521030003, "post_id": 36868101, "comment_id": 85557581, "body": "could I parse subsequence of data? For example, if data contains Integer, could I read this Integer only ( for example, first integer )?"}, {"owner": {"reputation": 14488, "user_id": 1046037, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fc13107f491bce64537229a08ea7d09b?s=128&d=identicon&r=PG", "display_name": "user1046037", "link": "https://stackoverflow.com/users/1046037/user1046037"}, "reply_to_user": {"reputation": 3466, "user_id": 826614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/935a0a598738883b4af59a73335a7aa0?s=128&d=identicon&r=PG", "display_name": "gaussblurinc", "link": "https://stackoverflow.com/users/826614/gaussblurinc"}, "edited": false, "score": 0, "creation_date": 1582296791, "post_id": 36868101, "comment_id": 106739707, "body": "@gaussblurinc Not a very elegant solution, but you could take the output from the 1st decode and pass it to the 2nd decode. 2nd decode could have your custom template to parse that integer."}], "tags": [], "owner": {"reputation": 95982, "user_id": 17279, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a08771c878da3724492f3056d5eca168?s=128&d=identicon&r=PG", "display_name": "zoul", "link": "https://stackoverflow.com/users/17279/zoul"}, "is_accepted": true, "score": 2, "last_activity_date": 1461681375, "creation_date": 1461681375, "answer_id": 36868101, "question_id": 34899657, "link": "https://stackoverflow.com/questions/34899657/using-xcode-security-framework-to-parse-asn1-format/36868101#36868101", "title": "Using Xcode security framework to parse asn1 format", "body": "<p>There are now several snippets on GitHub showing how to call the <code>SecAsn1Decode</code> function, <a href=\"https://gist.github.com/sazameki/3026845\" rel=\"nofollow\">see here for example</a>:</p>\n\n<pre><code>typedef struct {\n    size_t          length;\n    unsigned char   *data;\n} ASN1_Data;\n\ntypedef struct {\n    ASN1_Data type;     // INTEGER\n    ASN1_Data version;  // INTEGER\n    ASN1_Data value;    // OCTET STRING\n} RVNReceiptAttribute;\n\ntypedef struct {\n    RVNReceiptAttribute **attrs;\n} RVNReceiptPayload;\n\n// ASN.1 receipt attribute template\nstatic const SecAsn1Template kReceiptAttributeTemplate[] = {\n    { SEC_ASN1_SEQUENCE, 0, NULL, sizeof(RVNReceiptAttribute) },\n    { SEC_ASN1_INTEGER, offsetof(RVNReceiptAttribute, type), NULL, 0 },\n    { SEC_ASN1_INTEGER, offsetof(RVNReceiptAttribute, version), NULL, 0 },\n    { SEC_ASN1_OCTET_STRING, offsetof(RVNReceiptAttribute, value), NULL, 0 },\n    { 0, 0, NULL, 0 }\n};\n\n// ASN.1 receipt template set\nstatic const SecAsn1Template kSetOfReceiptAttributeTemplate[] = {\n    { SEC_ASN1_SET_OF, 0, kReceiptAttributeTemplate, sizeof(RVNReceiptPayload) },\n    { 0, 0, NULL, 0 }\n};\n</code></pre>\n\n<p>And later:</p>\n\n<pre><code>NSData *payloadData = \u2026\nRVNReceiptPayload payload = { NULL };\nstatus = SecAsn1Decode(asn1Decoder, payloadData.bytes, payloadData.length, kSetOfReceiptAttributeTemplate, &amp;payload);\n</code></pre>\n"}], "owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1567, "favorite_count": 1, "accepted_answer_id": 36868101, "answer_count": 1, "score": 3, "last_activity_date": 1461681375, "creation_date": 1453291648, "question_id": 34899657, "link": "https://stackoverflow.com/questions/34899657/using-xcode-security-framework-to-parse-asn1-format", "title": "Using Xcode security framework to parse asn1 format", "body": "<p>I'd like to parse asn1 format under OS-X 10.11. </p>\n\n<p>Unfortunately, Apple doesn't include openssl as part of their SDK anymore. instead, there's an internal package I was advised to use exposed in the following header : </p>\n\n<pre><code>SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Security.framework/Versions/A/Headers/SecAsn1Coder.h\n</code></pre>\n\n<p>Unfortunately, the API I needed to parse the asn1 file and extract a given field, seems very different from the original openssl API.</p>\n\n<p>In openssl, the function \"asn1parse\" defined in include/openssl/asn1.h, gets a DER formatted file, decoding it and return output text that represent the asn1 tree. </p>\n\n<p>In Apple implementation, I've found \"SecAsn1Decode\" that may provide the same functionality. The documentation says that the output argument (void *dest) is a pointer to \"a template-specific struct allocated by the caller\", but i don't understand what struct should I expect and how much memory should I allocate ?  </p>\n\n<p>perhaps you can help me understand how to use it. any references are welcome. </p>\n"}, {"tags": ["c", "fopen", "c-strings"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1453291511, "post_id": 34899584, "comment_id": 57535414, "body": "You cannot concatenate strings with the <code>+</code> operator in C. Use <code>strcat</code> or any other appropriate function for this purpose."}, {"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453291600, "post_id": 34899584, "comment_id": 57535484, "body": "As, @FUZxxl said, you will have to use <code>strcat</code> to concatenate the strings."}, {"owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 5, "creation_date": 1453291690, "post_id": 34899584, "comment_id": 57535552, "body": "Read this <a href=\"http://stackoverflow.com/questions/8465006/how-to-concatenate-2-strings-in-c\">How to concatenate 2 strings in C?</a>"}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1453295719, "post_id": 34899584, "comment_id": 57538236, "body": "You should have at least reported which kind of error you had, i.e. at compile time (which error?) or runtime (which wrong behaviour?)"}], "answers": [{"tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": false, "score": 0, "last_activity_date": 1453291896, "last_edit_date": 1453291896, "creation_date": 1453291595, "answer_id": 34899635, "question_id": 34899584, "link": "https://stackoverflow.com/questions/34899584/chose-to-write-a-file-to-a-specific-directory/34899635#34899635", "title": "Chose To write a File to a Specific Directory", "body": "<p><strong>You cannot concatenate strings like this in C!</strong> *</p>\n\n<p>You'd better use <a href=\"http://www.cplusplus.com/reference/cstring/strcat/\" rel=\"nofollow\"><code>strcat</code></a>:</p>\n\n<pre><code>char fname[200+200];\n\nstrcat(fname, str);\nstrcat(fname, str2);\n\nout_file = fopen(fname, \"w\");\n</code></pre>\n\n<p><sub>* Although you are allowed to add pointers. In your case it doesn't do what you expect. </sub></p>\n"}, {"comments": [{"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "edited": false, "score": 0, "creation_date": 1453293403, "post_id": 34899669, "comment_id": 57536740, "body": "Never use <code>gets</code>. Use <code>fgets</code>."}, {"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "edited": false, "score": 0, "creation_date": 1453293477, "post_id": 34899669, "comment_id": 57536788, "body": "<code>gets</code> is very much dangerous. Check this out: <a href=\"http://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\">Why is the gets function so dangerous that it should not be used?</a>."}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "reply_to_user": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "edited": false, "score": 0, "creation_date": 1453295291, "post_id": 34899669, "comment_id": 57537981, "body": "@AshishAhuja - Yes, but wanted to keep the sample short (newlines etc.) - Used <code>scanf()</code> instead."}], "tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": false, "score": 1, "last_activity_date": 1453295207, "last_edit_date": 1453295207, "creation_date": 1453291687, "answer_id": 34899669, "question_id": 34899584, "link": "https://stackoverflow.com/questions/34899584/chose-to-write-a-file-to-a-specific-directory/34899669#34899669", "title": "Chose To write a File to a Specific Directory", "body": "<p>A few issues:</p>\n\n<ul>\n<li><p>You'll have to use <a href=\"http://www.cplusplus.com/reference/cstring/strcat/\" rel=\"nofollow\"><code>strcat()</code></a> to concatenate the strings.</p></li>\n<li><p>Here you are reading from <code>out_file</code> before opening it.</p>\n\n<pre><code>fgets(str,sizeof str,out_file);\nfgets(str2,sizeof str2,out_file);\n</code></pre></li>\n</ul>\n\n<p>A quick example (no error checking done):</p>\n\n<pre><code>char str[200], str2[200];\nchar fname[400];\nFILE *out_file;\n\nprintf(\"\\nEnter path: \");\nscanf(\"%199s\", str);  \nprintf(\"\\nEnter filename: \");\nscanf(\"%199s\", str2);\n\nstrcpy(fname, str);\nstrcat(fname, str2);\n\nout_file = fopen(fname, \"w\");\n</code></pre>\n\n<p>Or, a shorter way:</p>\n\n<pre><code>char str[400],str2[200];\nFILE * out_file;\n\nprintf(\"\\nEnter path: \");\nscanf(\"%199s\", str);  \nprintf(\"\\nEnter filename: \");\nscanf(\"%199s\", str2);\n\nstrcat(str, str2);\n\nout_file = fopen(str, \"r\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2544, "user_id": 3374593, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b52e8f3dbba2dd84cee919766d30125d?s=128&d=identicon&r=PG&f=1", "display_name": "L&#230;rne", "link": "https://stackoverflow.com/users/3374593/l%c3%a6rne"}, "edited": false, "score": 1, "creation_date": 1453292598, "post_id": 34899864, "comment_id": 57536202, "body": "You should initialize <code>file_name[0] = &#39;\\0&#39;</code> to make sure it&#39;s a valid empty string.  Or copy the first string entirely with <code>strcpy</code>."}, {"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "reply_to_user": {"reputation": 2544, "user_id": 3374593, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b52e8f3dbba2dd84cee919766d30125d?s=128&d=identicon&r=PG&f=1", "display_name": "L&#230;rne", "link": "https://stackoverflow.com/users/3374593/l%c3%a6rne"}, "edited": false, "score": 0, "creation_date": 1453292795, "post_id": 34899864, "comment_id": 57536327, "body": "@L&#230;rne, alright I&#39;ll do it."}], "tags": [], "owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "is_accepted": false, "score": 1, "last_activity_date": 1453292894, "last_edit_date": 1495535373, "creation_date": 1453292211, "answer_id": 34899864, "question_id": 34899584, "link": "https://stackoverflow.com/questions/34899584/chose-to-write-a-file-to-a-specific-directory/34899864#34899864", "title": "Chose To write a File to a Specific Directory", "body": "<p>See <a href=\"https://stackoverflow.com/questions/8465006/how-to-concatenate-2-strings-in-c\">How to concatenate 2 strings in C?</a>.</p>\n\n<p>Also, you should use <a href=\"http://www.techonthenet.com/c_language/standard_library_functions/string_h/strcat.php\" rel=\"nofollow noreferrer\"><code>strcat</code></a>.</p>\n\n<p>Check out <a href=\"http://www.techonthenet.com/c_language/standard_library_functions/string_h/strcat.php\" rel=\"nofollow noreferrer\">this</a> tutorial.</p>\n\n<p>An example in this is:</p>\n\n<pre><code>/* Example using strcat by TechOnTheNet.com */\n\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, const char * argv[])\n{\n   /* Define a temporary variable */\n   char example[100];\n\n   /* Copy the first string into the variable */\n   strcpy(example, \"TechOnTheNet.com \");\n\n   /* Concatenate the following two strings to the end of the first one */\n   strcat(example, \"is over 10 \");\n   strcat(example, \"years old.\");\n\n   /* Display the concatenated strings */\n   printf(\"%s\\n\", example);\n\n   return 0;\n}\n</code></pre>\n\n<p>In your case it would be:</p>\n\n<pre><code>char file_name[200 + 200];\nfile_name [0] = '\\0'                    // To make sure that it's a valid string.\n\nstrcpy (file_name, str);                // Concatenate `str` and `file_name`\nstrcat(file_name, str2);                // Concatenate `str2` and `file_name`\n\nout_file = fopen(file_name, \"w\");       // Open the file.\n</code></pre>\n\n<p>Also, thanks to 'laerne' for pointing out some mistakes.</p>\n"}], "owner": {"reputation": 3686, "user_id": 2902996, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/zogMf.png?s=128&g=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2902996/joel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1454097246, "answer_count": 3, "score": -3, "last_activity_date": 1453295651, "creation_date": 1453291482, "last_edit_date": 1453295651, "question_id": 34899584, "link": "https://stackoverflow.com/questions/34899584/chose-to-write-a-file-to-a-specific-directory", "closed_reason": "Duplicate", "title": "Chose To write a File to a Specific Directory", "body": "<p>So I'm trying to create a file and save it to a desired directory. </p>\n\n<p>eg: user-input: </p>\n\n<p>Directory? <code>c:\\user\\sample\\</code></p>\n\n<p>Name? <code>hello.txt</code></p>\n\n<p>This is what I've tried so far:</p>\n\n<pre><code>char str[200],str2[200];\nFILE * out_file;\nfgets(str,sizeof str,out_file);\nfgets(str2,sizeof str2,out_file);\nout_file = fopen(str+str2,\"w\");\n</code></pre>\n\n<p>Can someone please help me with this issue?</p>\n"}, {"tags": ["c", "sensors", "uart"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1453291621, "post_id": 34899435, "comment_id": 57535495, "body": "That function read a single char per time. You must loop and pass a single cell of your array to the function."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1453297696, "post_id": 34899435, "comment_id": 57539589, "body": "The PC usually has RS232-in/output, whereas the MCU has TTL-level input-outputs. This makes a big difference, you need some converter (i.e. a max232*-IC for level conversion)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453309775, "post_id": 34899435, "comment_id": 57548438, "body": "you will have to insure the baud rate, number of stop bits, parity bit format is exactly the same  sensor --&gt; mcu and mcu --&gt; pc"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453310014, "post_id": 34899435, "comment_id": 57548582, "body": "this expression: <code>sizeof(BANNER));</code> will result in transmitting the NUL byte at the end of the string.  do you really want to do that?  Perhaps you really want to use: <code>strlen(BANNER))</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1453310418, "post_id": 34899435, "comment_id": 57548850, "body": "You will need to write a &#39;wrapper&#39; around the <code>ti_uart_read()</code> function that 1) discards characters until a &#39;R&#39; is input.  2) save into a buffer all characters from the &#39;R&#39; until/including a 0x0C is input 3) append a 0x00 byte to the array of input characters.  Your main() function initializes everything, then loops calling your wrapper for <code>ti_uart_read()</code> then calling  <code>ti_uart_write_buffer()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1453310589, "creation_date": 1453310589, "answer_id": 34906510, "question_id": 34899435, "link": "https://stackoverflow.com/questions/34899435/mcu-uart-reading-serial-data-from-a-sensor-rx-pin-and-displaying-tx-pin-on/34906510#34906510", "title": "mcu UART, reading serial data from a sensor (rx pin) and displaying (Tx pin) on PC", "body": "<p>to answer your question:</p>\n\n<p>Yes, the data read, for each message from the sensor should be saved, byte by byte into an array.</p>\n\n<p>when a complete message is received from the sensor, \nthen call the write function.</p>\n"}], "owner": {"reputation": 153, "user_id": 5649409, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/24e9bf9925ce1fa296dd037cbb117edc?s=128&d=identicon&r=PG&f=1", "display_name": "ultrasonic bananna", "link": "https://stackoverflow.com/users/5649409/ultrasonic-bananna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459251906, "creation_date": 1453291143, "last_edit_date": 1459251906, "question_id": 34899435, "link": "https://stackoverflow.com/questions/34899435/mcu-uart-reading-serial-data-from-a-sensor-rx-pin-and-displaying-tx-pin-on", "title": "mcu UART, reading serial data from a sensor (rx pin) and displaying (Tx pin) on PC", "body": "<p>I am working with the UART on an MCU. Below is a example code of the mcu printing 'hello world' over a serial cable to the PC. </p>\n\n<pre><code>#define BANNER (\"Hello, world!\\n\\n\")\nint main(void)\n{\nti_uart_write_buffer(TI_UART_0, (uint8_t *)BANNER,\n                 sizeof(BANNER));\n    return 0;\n}\n</code></pre>\n\n<p>This is the <code>ti_uart_write_buffer</code> definition in the header file.</p>\n\n<pre><code>/**\n * Perform a write on the UART interface. This is a blocking\n * synchronous call. The function will block until all data has\n * been transferred.\n *\n * @brief UART multi-byte data write.\n * @param [in] uart UART index.\n * @param [in] data Data to write to UART.\n * @param [in] len Length of data to write to UART.\n * @return ti_rc_t ti_RC_OK on success, error code otherwise.\n */\nti_rc_t ti_uart_write_buffer(const ti_uart_t uart, const uint8_t *const data,\n                 uint32_t len);\n</code></pre>\n\n<p>I'm using a sensor with a serial interface. This is from the datasheet.  </p>\n\n<blockquote>\n  <p>Pin 5 Serial Output:  The sensor has a TTL outputs.  The output is an\n  ASCII capital \u201cR\u201d, followed by four ASCII character digits\n  representing the range in millimeters, followed by a carriage return\n  (ASCII 13).</p>\n</blockquote>\n\n<p>I'm trying to read in the sesor data on the Rx pin and transmit it to the PC on the Tx pin. </p>\n\n<p>This is the uart read function from the header file that I gather I will need to use. </p>\n\n<pre><code>/**\n * Perform a single character read from the UART interface.\n * This is a blocking synchronous call.\n *\n * @brief UART character data read.\n * @param [in] uart UART index.\n * @param [out] data Data to read from UART.\n * @return qm_uart_status_t Returns UART specific return code.\n */\nti_uart_status_t ti_uart_read(const ti_uart_t uart, uint8_t *data);\n</code></pre>\n\n<p>My questions are: </p>\n\n<ol>\n<li>I've created a loop in the main() which keeps reading the serial and adding new data to an array until the end marker is reached. Does this make sense? </li>\n<li>Given the hello world example above , how could I print out the array?</li>\n</ol>\n\n<hr>\n\n<pre><code>typedef uint8_t byte;\nconst byte numChars = 32;\nchar receivedChars[32]; \nbool newData = false;\n\nvoid recvWithEndMarker();\n\nint main(void)\n{\n        do{  \n    recvWithEndMarker();\n        }\n        while (1);\n    return 0;\n}\n\nvoid recvWithEndMarker()\n{\n     static byte ndx = 0;\n     char endMarker = '\\r';\n     char rc;\n     while (newData == false) {\n        rc = ti_uart_read_non_block(QM_UART_0);  \n        if (rc != endMarker) {\n        receivedChars[ndx] = rc;\n        ndx++;\n            if (ndx &gt;= numChars) {\n                ndx = numChars - 1;\n                        }\n                }\n            else {\n                receivedChars[ndx] = '\\0'; \n                ndx = 0;\n                newData = true;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1453291175, "post_id": 34899434, "comment_id": 57535176, "body": "Oh, where did you see  <code>gets()</code>? Old resource definitely. Don&#39;t use <code>gets()</code> use <code>fgets()</code>. What is <code>FP</code>? And this is not a script, it&#39;s a program. It&#39;s not the same. Scripts are programs that run with interpreters, there is no <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> interpreter."}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 4, "creation_date": 1453291214, "post_id": 34899434, "comment_id": 57535201, "body": "<code>FP</code> is expected to be of type <code>FILE *</code>. Show the full code."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453291399, "post_id": 34899434, "comment_id": 57535328, "body": "I love these questions that leave out the important parts. What is <code>FP</code>? Where is it declared and defined?"}, {"owner": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 0, "creation_date": 1453291450, "post_id": 34899434, "comment_id": 57535365, "body": "Sorry, I didn&#39;t copy paste the boilerplate code (<code>main()</code> function, <code>FILE *FP</code>, etc) and extracted the problem to easier reading."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1453291506, "post_id": 34899434, "comment_id": 57535406, "body": "Would your compiler compile this <i>easier reading</i> part?"}, {"owner": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 0, "creation_date": 1453291511, "post_id": 34899434, "comment_id": 57535413, "body": "I thought it was obvious as <code>fprintf</code> prints in a FILE."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1453291555, "post_id": 34899434, "comment_id": 57535451, "body": "For easier reading of our crystal balls, you mean. Could <code>FP</code> be a macro that gets in the way of your <code>FILE *</code> definition?"}, {"owner": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 0, "creation_date": 1453291564, "post_id": 34899434, "comment_id": 57535458, "body": "No it does not compile and throw the above error"}, {"owner": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 0, "creation_date": 1453291899, "post_id": 34899434, "comment_id": 57535688, "body": "Ok I updated with the boilerplate code. Is my problem clearer now ?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1453291944, "post_id": 34899434, "comment_id": 57535721, "body": "Your code looks ok, omiting return at the end of main(); Is this your real code?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1453292028, "post_id": 34899434, "comment_id": 57535782, "body": "@LPs: Which is OK by the standard. (In <code>main()</code> only, implies <code>return EXIT_SUCCESS;</code>.)"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1453292043, "post_id": 34899434, "comment_id": 57535790, "body": "Which compiler and which flags do you use? This might be a very localised problem."}, {"owner": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 0, "creation_date": 1453292063, "post_id": 34899434, "comment_id": 57535808, "body": "Ok, well it&#39;s updated now. It doesn&#39;t even compile, due to the above error."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1453292113, "post_id": 34899434, "comment_id": 57535838, "body": "What is your platform? Which compiler? Compiler flags?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1453292170, "post_id": 34899434, "comment_id": 57535886, "body": "The code you posted compiles fine (warnings about <code>gets()</code>, and unused <code>argc</code> and <code>argv</code> nonwithstanding). GCC 4.8.4. Either you posted the wrong code, or there&#39;s something funny with how you&#39;re calling the compiler."}, {"owner": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 0, "creation_date": 1453292175, "post_id": 34899434, "comment_id": 57535892, "body": "I don&#39;t know how to answer this. I use the <code>gcc</code> command in mac os x&#39;s terminal to compile."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1453292272, "post_id": 34899434, "comment_id": 57535968, "body": "Could you post your gcc command?"}, {"owner": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 0, "creation_date": 1453292284, "post_id": 34899434, "comment_id": 57535979, "body": "<code>gcc --version</code> outputs : (GCC) 4.2.1"}, {"owner": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 0, "creation_date": 1453292332, "post_id": 34899434, "comment_id": 57536010, "body": "My gcc command is <code>gcc file.c</code>. Which compiles into <code>a.out</code>. Which I run to see the results."}, {"owner": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 3, "creation_date": 1453292333, "post_id": 34899434, "comment_id": 57536012, "body": "I won&#39;t believe this doesn&#39;t compile till you post a screenshot of the results of <code>cat yourfile.c</code> immediately followed by <code>gcc -Wall yourfile.c</code>. Where <code>yourfile.c</code> should be <b>exactly</b> that code you have posted."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1453292362, "post_id": 34899434, "comment_id": 57536037, "body": "@lapin: The code you posted <i>looks</i> fine, and <i>compiles</i> fine. There&#39;s a problem elsewhere."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1453292486, "post_id": 34899434, "comment_id": 57536125, "body": "Take a look <a href=\"https://ideone.com/rXXV1m\" rel=\"nofollow noreferrer\">HERE</a>. The posted code compiles..."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 1655, "user_id": 3493587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0b29d44004eaedbc859bad8144bade93?s=128&d=identicon&r=PG&f=1", "display_name": "mikedu95", "link": "https://stackoverflow.com/users/3493587/mikedu95"}, "edited": false, "score": 0, "creation_date": 1453292646, "post_id": 34899434, "comment_id": 57536239, "body": "@mikedu95 wrong link. I corrected"}, {"owner": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 0, "creation_date": 1453292835, "post_id": 34899434, "comment_id": 57536348, "body": "You were all true. The previous code actually compiled. I got misleaded by the error which implied the <code>fprintf</code> was doing something wrong. Please see the updated question."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1453292840, "post_id": 34899434, "comment_id": 57536351, "body": "ah.. you left the only part that matter for the last. You got it wrong: it&#39;s leave the best for the last."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1453292901, "post_id": 34899434, "comment_id": 57536386, "body": "<code>int foo(FP) {</code> does not make sense..."}], "answers": [{"tags": [], "owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1453294834, "last_edit_date": 1453294834, "creation_date": 1453292879, "answer_id": 34900090, "question_id": 34899434, "link": "https://stackoverflow.com/questions/34899434/c-passing-argument-1-of-fprintf-makes-pointer-from-integer-without-a-cast/34900090#34900090", "title": "C - passing argument 1 of \u2018fprintf\u2019 makes pointer from integer without a cast", "body": "<p>The parameter FP in the declaration of <code>foo(FP)</code> has no type which makes it default to <code>int</code>. Because <code>foo</code> uses it as the first parameter in a call to <code>fprintf</code>, the int gets converted to a <code>FILE</code> pointer which is legal but deprecated.</p>\n\n<p>Fix: Simply declare <code>foo</code> as <code>int foo(FILE *FP){...}</code>.</p>\n\n<p>Edit: And yes, as LPs said, you should declare the function before use, especially if you pass or return other types than int to or from it. The declaration can either be separate from the definition, possibly in a header; or you simply move the function definition, which is also a declaration, to a place before its first use.</p>\n"}, {"comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 2, "creation_date": 1453293329, "post_id": 34900114, "comment_id": 57536697, "body": "@lapin you don&#39;t have to... and LPs has made the correct additional remark that <code>foo()</code> should be dclared before use. Either you write a line declaring it somewhere (on top of the file or in a header, possibly); or you move the whole function definition -- which is also a declaration -- to the top of the file."}, {"owner": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 0, "creation_date": 1453293581, "post_id": 34900114, "comment_id": 57536873, "body": "Ok, if YOU allow me then fair enough, I changed it to LPs : )"}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 2, "last_activity_date": 1453292955, "creation_date": 1453292955, "answer_id": 34900114, "question_id": 34899434, "link": "https://stackoverflow.com/questions/34899434/c-passing-argument-1-of-fprintf-makes-pointer-from-integer-without-a-cast/34900114#34900114", "title": "C - passing argument 1 of \u2018fprintf\u2019 makes pointer from integer without a cast", "body": "<p>Change</p>\n\n<pre><code>int foo(FP) {\n</code></pre>\n\n<p>to </p>\n\n<pre><code>int foo(FILE * FP) { \n</code></pre>\n\n<p>You must put a prototype of <code>foo</code> function at the top of your code.</p>\n"}, {"comments": [{"owner": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "edited": false, "score": 0, "creation_date": 1453293271, "post_id": 34900192, "comment_id": 57536654, "body": "Thank you for your easy to understand answer !"}], "tags": [], "owner": {"reputation": 93, "user_id": 2732064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c357ac695b6f71d6cadc37635afeba?s=128&d=identicon&r=PG&f=1", "display_name": "M.Bakhterev", "link": "https://stackoverflow.com/users/2732064/m-bakhterev"}, "is_accepted": false, "score": 1, "last_activity_date": 1453293166, "creation_date": 1453293166, "answer_id": 34900192, "question_id": 34899434, "link": "https://stackoverflow.com/questions/34899434/c-passing-argument-1-of-fprintf-makes-pointer-from-integer-without-a-cast/34900192#34900192", "title": "C - passing argument 1 of \u2018fprintf\u2019 makes pointer from integer without a cast", "body": "<p>By default the function arg in C has type int. So when you define your function the signature actually is</p>\n\n<pre><code>int foo(int FP).\n</code></pre>\n\n<p>You should change it to</p>\n\n<pre><code>int foo(FILE *FP)\n</code></pre>\n\n<p>And, of course, it would be nice to declare function before call it.</p>\n"}, {"tags": [], "owner": {"reputation": 328, "user_id": 4768463, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/02e9b7b066da2e7d2373ea09fcb63e33?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/4768463/aviv"}, "is_accepted": false, "score": 0, "last_activity_date": 1453392765, "last_edit_date": 1453392765, "creation_date": 1453392379, "answer_id": 34928595, "question_id": 34899434, "link": "https://stackoverflow.com/questions/34899434/c-passing-argument-1-of-fprintf-makes-pointer-from-integer-without-a-cast/34928595#34928595", "title": "C - passing argument 1 of \u2018fprintf\u2019 makes pointer from integer without a cast", "body": "<p>You forgot the type classifier in FP parameter in the Foo function. Surprisingly you didn\u00b4t get an warning about it. \nwhen you are compiling, please turn on the <code>-Wall</code> and <code>-pedantic</code> flag (if you are on <code>gcc</code>). or at least the <code>-Wimplicit-int</code> warning flag to avoid similar problems</p>\n"}], "owner": {"reputation": 1861, "user_id": 2712701, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mDxCb.png?s=128&g=1", "display_name": "lapin", "link": "https://stackoverflow.com/users/2712701/lapin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2576, "favorite_count": 0, "accepted_answer_id": 34900114, "answer_count": 4, "score": 0, "last_activity_date": 1453392765, "creation_date": 1453291137, "last_edit_date": 1453292766, "question_id": 34899434, "link": "https://stackoverflow.com/questions/34899434/c-passing-argument-1-of-fprintf-makes-pointer-from-integer-without-a-cast", "title": "C - passing argument 1 of \u2018fprintf\u2019 makes pointer from integer without a cast", "body": "<p>Very simple script throw this error : </p>\n\n<blockquote>\n  <p>passing argument 1 of \u2018fprintf\u2019 makes pointer from integer without a\n  cast</p>\n</blockquote>\n\n<p>Why is that ? The code is : </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[])\n{\nFILE *FP;\n\nif((FP = fopen(\"file.txt\", \"r+\")) == NULL) {\n    printf(\"File won't open\\n\");\n    return(1);\n}\n\nfoo(FP);\n\nreturn(0);\n}\n\nint foo(FP) {\n\n    char name[31];\n    printf( \"Please enter a name (within 30 char) : \\n\");\n    gets(name);\n    fprintf(FP, \"%s\\n\", name);\n\n    return(0);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "algorithm", "partition"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1453291052, "post_id": 34899391, "comment_id": 57535097, "body": "First mistake I see, you assume that <code>scanf()</code> was successful.&#39;"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 3, "creation_date": 1453291159, "post_id": 34899391, "comment_id": 57535167, "body": "Array index range from <code>0</code> to <code>n-1</code>. So <code>for (i=0; i&lt;=n; ++i)</code> should be <code>for (i=0; i&lt;n; ++i)</code> and similar changes in other loops. And why do you do <code>--n</code> after reading <code>n</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1453291347, "post_id": 34899391, "comment_id": 57535284, "body": "If the pivot value is out of range of the data, indexing will break the array bounds."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453291476, "post_id": 34899391, "comment_id": 57535386, "body": "In <code>while (i&lt;j &amp;&amp; A[j]&gt;x){ ++j; }</code> you increment <code>j</code> but <code>j</code> was initialised to <code>n</code>. So <code>j</code> should be decremented."}, {"owner": {"reputation": 3, "user_id": 5812744, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117026411675900/picture?type=large", "display_name": "ydl2007 ", "link": "https://stackoverflow.com/users/5812744/ydl2007"}, "edited": false, "score": 0, "creation_date": 1453291808, "post_id": 34899391, "comment_id": 57535617, "body": "I did --n; because the code is pasted from another program where I asked how many values there would be in the array. In c the first element index is 0, so without --n; putting 9 would mean an array with 10 values. This is not what causes the program to crash."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1453291856, "post_id": 34899391, "comment_id": 57535652, "body": "In future, don&#39;t confuse the number of elements with the index. If there are <code>n</code> elements you index <code>0 &lt;= index &lt; n</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5812744, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117026411675900/picture?type=large", "display_name": "ydl2007 ", "link": "https://stackoverflow.com/users/5812744/ydl2007"}, "edited": false, "score": 0, "creation_date": 1453292264, "post_id": 34899643, "comment_id": 57535965, "body": "Thank you, it worked. I don&#39;t know how I didn&#39;t see such an obvious error given that I spent hours trying to find what the heck was wrong with it."}], "tags": [], "owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "is_accepted": true, "score": 0, "last_activity_date": 1453291624, "creation_date": 1453291624, "answer_id": 34899643, "question_id": 34899391, "link": "https://stackoverflow.com/questions/34899391/partition-algorithm-runtime-error-can-someone-help-me-to-find-what-is-wrong/34899643#34899643", "title": "Partition algorithm runtime error. Can someone help me to find what is wrong?", "body": "<pre><code>--n;\nint A[n];\n</code></pre>\n\n<p>Now <code>A</code> has <code>n-1</code> elements, but you still access element n, which doesn't exists. At least swap the two lines, or keep the original n value since it's more C-ish (and run the loops until <code>i&lt;n</code>).</p>\n\n<pre><code>while (i&lt;j &amp;&amp; A[j]&gt;x){\n    ++j;\n    }\n</code></pre>\n\n<p>You should decrease <code>j</code>.\nIn the rest of the code you keep incrementing j, but I'm fairly sure you should decrement it.</p>\n"}], "owner": {"reputation": 3, "user_id": 5812744, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117026411675900/picture?type=large", "display_name": "ydl2007 ", "link": "https://stackoverflow.com/users/5812744/ydl2007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 34899643, "answer_count": 1, "score": -1, "last_activity_date": 1453291624, "creation_date": 1453291023, "question_id": 34899391, "link": "https://stackoverflow.com/questions/34899391/partition-algorithm-runtime-error-can-someone-help-me-to-find-what-is-wrong", "title": "Partition algorithm runtime error. Can someone help me to find what is wrong?", "body": "<p>I have written an array partition algorithm in C, but it gives me the error \"segmentation fault: core dumped\".\nHere is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void){\nint n;\nprintf(\"insert array width\\n\");\nscanf(\"%d\", &amp;n);\n--n;\nint A[n];\nint i,j,p;\nint x,t;\n\n//inserimento valori array\nprintf(\"insert values\\n\");\nfor (i=0; i&lt;=n; ++i){\nscanf(\"%d\", &amp;A[i]);\n}\n\nprintf(\"the array A is:\\n\");\nfor (i=0; i&lt;=n; ++i){\n    printf(\"%d \", A[i]);\n}\nprintf(\"\\n\");\n</code></pre>\n\n<p>This is the actual partition algorithm, and for sure the problem is here.</p>\n\n<pre><code>printf(\"insert the pivot value\\n\");\nscanf(\"%d\", &amp;x);\ni=0;\nj=n;\nwhile (i&lt;j &amp;&amp; A[i]&lt;=x){\n    ++i;\n    }\nwhile (i&lt;j &amp;&amp; A[j]&gt;x){\n    ++j;\n    }\nif (A[j]&gt;x) {\n    --j;\n    }\nwhile (i&lt;j){\n    t=A[i];\n    A[i]=A[j];\n    A[j]=t;\n    ++i;\n    ++j;\n    while (A[i]&lt;=x){\n        ++i;\n        }\n    while (A[j]&gt;x){\n        ++j;\n        }\n    }\np=j;\n\nprintf(\"the result of the operation is:\\n\");\nfor (i=0; i&lt;=n; ++i){\n    printf(\"%d \", A[i]);\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>Can someone help me to find what is wrong with it? Thank you.</p>\n"}, {"tags": ["c", "linked-list", "embedded"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1453290796, "post_id": 34899320, "comment_id": 57534917, "body": "What is <code>LED_GREEN</code>? Also <a href=\"http://stackoverflow.com/a/605858/1983495\">read this</a>. And what happens if you don&#39;t use the <code>if</code>?"}, {"owner": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "edited": false, "score": 0, "creation_date": 1453290918, "post_id": 34899320, "comment_id": 57534994, "body": "root-&gt;next = 0; is wrong. It should point to valid memory location"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "edited": false, "score": 1, "creation_date": 1453290982, "post_id": 34899320, "comment_id": 57535046, "body": "@JerryGoyal How is it wrong? That&#39;s how you initialize the first node a linked list."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 4, "creation_date": 1453290985, "post_id": 34899320, "comment_id": 57535048, "body": "Agree with the above... And two other things.  Firstly, don&#39;t use 0 as a substitute for null.  Use null.  Secondly, don&#39;t cast the return from Malloc.  It&#39;s (void *) for a reason!  You don&#39;t need to cast it and casting it can conceal errors.  Coupled with this, you should absolutely verify that Malloc successfully returned memory to you before you start assigning things into it. :)"}, {"owner": {"reputation": 191, "user_id": 5703503, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b023efc85baa1716b81233447654df72?s=128&d=identicon&r=PG&f=1", "display_name": "xy36", "link": "https://stackoverflow.com/users/5703503/xy36"}, "edited": false, "score": 0, "creation_date": 1453291012, "post_id": 34899320, "comment_id": 57535068, "body": "LED_GREEN is mapped to a outputpin of the controller. The command &quot;LED_GREEN = 1&quot; works fine. I tested it without using the if-statement."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 4, "creation_date": 1453291075, "post_id": 34899320, "comment_id": 57535110, "body": "@xy36 Then the problem cannot be reproduced with the code posted."}, {"owner": {"reputation": 2462, "user_id": 5006325, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TpZdZ.jpg?s=128&g=1", "display_name": "Viktor Simk&#243;", "link": "https://stackoverflow.com/users/5006325/viktor-simk%c3%b3"}, "edited": false, "score": 0, "creation_date": 1453291485, "post_id": 34899320, "comment_id": 57535392, "body": "don&#39;t cast the result of malloc: <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>"}, {"owner": {"reputation": 191, "user_id": 5703503, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b023efc85baa1716b81233447654df72?s=128&d=identicon&r=PG&f=1", "display_name": "xy36", "link": "https://stackoverflow.com/users/5703503/xy36"}, "edited": false, "score": 0, "creation_date": 1453292586, "post_id": 34899320, "comment_id": 57536188, "body": "well, but the code is not working as expected."}, {"owner": {"reputation": 191, "user_id": 5703503, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b023efc85baa1716b81233447654df72?s=128&d=identicon&r=PG&f=1", "display_name": "xy36", "link": "https://stackoverflow.com/users/5703503/xy36"}, "edited": false, "score": 0, "creation_date": 1453292783, "post_id": 34899320, "comment_id": 57536319, "body": "I checked the return value of malloc, and it seems to be 0..."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1453292990, "post_id": 34899320, "comment_id": 57536451, "body": "@xy36 then that&#39;s your problem, it means malloc failed. Do you #include &lt;stdlib.h&gt; ? Does the compiler/platform you&#39;re using support dynamic memory allocation at all ?"}, {"owner": {"reputation": 191, "user_id": 5703503, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b023efc85baa1716b81233447654df72?s=128&d=identicon&r=PG&f=1", "display_name": "xy36", "link": "https://stackoverflow.com/users/5703503/xy36"}, "edited": false, "score": 0, "creation_date": 1453293181, "post_id": 34899320, "comment_id": 57536586, "body": "Yeah it should be. I already tried other datatypes as struct node.... its always returning a 0. It seems theres a problem with my compiler/platform..."}, {"owner": {"reputation": 191, "user_id": 5703503, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b023efc85baa1716b81233447654df72?s=128&d=identicon&r=PG&f=1", "display_name": "xy36", "link": "https://stackoverflow.com/users/5703503/xy36"}, "edited": false, "score": 0, "creation_date": 1453293226, "post_id": 34899320, "comment_id": 57536622, "body": "&lt;stdlib.h&gt; is included"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5619147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tv4JH.jpg?s=128&g=1", "display_name": "FViel", "link": "https://stackoverflow.com/users/5619147/fviel"}, "is_accepted": false, "score": 0, "last_activity_date": 1453293618, "creation_date": 1453293618, "answer_id": 34900349, "question_id": 34899320, "link": "https://stackoverflow.com/questions/34899320/unexpected-behaviour-of-linked-list/34900349#34900349", "title": "unexpected behaviour of linked list", "body": "<p>@xy36 is right, and this error can`t be reproduced with the code posted. But, if you need a list, you can use the code bellow. I just improved a little your code. About the var LED_GREEN, if you want to change it's value, I sugget you to change the code inside the function addNode. If you are using an embbed board, like arduino, just check your wires connections and don't forget to use the command <em>\"digitalWrite(pin, value);\"</em> to change you led value.</p>\n\n<p>Good luck.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct node{\n    int ID;\n    int value;\n    struct node *next;\n};\n\nint LED_GREEN = 0;\n\nstruct node * addNode(struct node *conductor, int value){\n    struct node * newNode;\n    newNode = (struct node *)malloc(sizeof(struct node));\n    newNode-&gt;value = value;\n    newNode-&gt;ID = conductor-&gt;ID + 1;\n    conductor-&gt;next = newNode;\n    newNode-&gt;next = NULL;     \n    printf(\"Node added.\\n\");\n    return newNode;\n}\n\nvoid printList(struct node *root){\n    struct node *conductor = NULL;\n    conductor = root;\n\n    while(conductor){\n        printf(\"Node[%d] value: %d. \\n\",conductor-&gt;ID, conductor-&gt;value);\n        conductor = conductor-&gt;next;\n    }\n    return;\n}\n\nint main()\n{\n    struct node *root =NULL;\n    struct node *conductor = NULL;\n\n    if(!root){\n        root = (struct node *)malloc(sizeof(struct node));\n        root-&gt;next = 0;\n        conductor = root;     \n        root-&gt;value = 1;\n        root-&gt;ID = 0;\n    }\n\n    conductor = addNode(conductor, 3);\n    conductor = addNode(conductor, 5);\n    conductor = addNode(conductor, 7);\n    conductor = addNode(conductor, 11);\n    conductor = addNode(conductor, 13);\n\n    printList(root);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1453303877, "post_id": 34903857, "comment_id": 57544160, "body": "And this should make you remember ALWAYS to check the return value of <code>malloc</code> - I bet it returned NULL when the heap size was 0 ?"}, {"owner": {"reputation": 191, "user_id": 5703503, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b023efc85baa1716b81233447654df72?s=128&d=identicon&r=PG&f=1", "display_name": "xy36", "link": "https://stackoverflow.com/users/5703503/xy36"}, "reply_to_user": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1453304900, "post_id": 34903857, "comment_id": 57544938, "body": "But I got some help from the Support of the IDE. Usually there should be an linking error cause of the missing heap size but it wasn&#39;t. Anyway, thanks for the help!"}], "tags": [], "owner": {"reputation": 191, "user_id": 5703503, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b023efc85baa1716b81233447654df72?s=128&d=identicon&r=PG&f=1", "display_name": "xy36", "link": "https://stackoverflow.com/users/5703503/xy36"}, "is_accepted": false, "score": 2, "last_activity_date": 1453303202, "creation_date": 1453303202, "answer_id": 34903857, "question_id": 34899320, "link": "https://stackoverflow.com/questions/34899320/unexpected-behaviour-of-linked-list/34903857#34903857", "title": "unexpected behaviour of linked list", "body": "<p>I solved the problem myself, but maybe its helpful for similar problems, when i post the solution. The problem was solved by change the size of the heap size in the project options of my IDE. The size was set to 0, hence malloc couldnt allocate memory.</p>\n"}], "owner": {"reputation": 191, "user_id": 5703503, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/b023efc85baa1716b81233447654df72?s=128&d=identicon&r=PG&f=1", "display_name": "xy36", "link": "https://stackoverflow.com/users/5703503/xy36"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1453303202, "creation_date": 1453290751, "last_edit_date": 1453290869, "question_id": 34899320, "link": "https://stackoverflow.com/questions/34899320/unexpected-behaviour-of-linked-list", "title": "unexpected behaviour of linked list", "body": "<p>iam trying to use a simple linked list in C but I have some trouble with it.\nI created a struct node</p>\n\n<pre><code>struct node{\n    int value;\n    struct node *next;\n};\n</code></pre>\n\n<p>and wrote in the main following code</p>\n\n<pre><code>struct node *root;\nstruct node *conductor;\n\nroot = (struct node *)malloc(sizeof(struct node));\nroot-&gt;next = 0;\nconductor = root;       \n\nroot-&gt;value = 1;\n\nif ((root-&gt;value) == 1) \n    LED_GREEN = 1;\n//LED_GREEN = 1;\n</code></pre>\n\n<p>I'm running it on an embedded system and just compare the value of the root node. I would expect, the LED is going on, but it isn't. Anyone got an idea, why this is not working as expected?</p>\n"}, {"tags": ["c", "memory-management", "unions", "memory-alignment", "nrf51"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1453288439, "post_id": 34898309, "comment_id": 57533371, "body": "What happens if you include a <code>long unused</code> member in the union?"}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1453289248, "post_id": 34898309, "comment_id": 57533988, "body": "What are you talking about ? A RAM address is always byte-aligned, by definition. You can&#39;t have a fractional address. When you say &quot;mis-aligned&quot;, do you mean to say &quot;not packed correctly&quot; ? It looks like your whole question is about packing, and not alignment, but as it is now your question is non-sense and hard to understand."}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1453289466, "post_id": 34898309, "comment_id": 57534131, "body": "When a documentation says &quot;byte-aligned address&quot;, it just means &quot;Doesn&#39;t need any alignment, any address will do.&quot;."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1453289911, "post_id": 34898309, "comment_id": 57534381, "body": "@ElderBug A ram-address would be, but e.g. madv.parts.d is not (since it is part of a bitfield). It would be thinkable, that in a packed <code>struct { char a:2; char b; };</code> b isn&#39;t byte-aligned either, because a:2 doesn&#39;t end on a byte-boundary. But this isn&#39;t the case, b would be byte-aligned here, too"}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1453290189, "post_id": 34898309, "comment_id": 57534546, "body": "@Ctx Of course bitfield members can be not aligned on byte boundaries, but my point is not about that. There is no such thing as an address not aligned on bytes. You can&#39;t take the address of a bitfield member (try it). OP misunderstood this documentation sentence and thought it was the problem, when it really is about packing."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1453290820, "post_id": 34898309, "comment_id": 57534927, "body": "Make sure to add something like <code>_Static_assert(sizeof(m_adv.buf) == sizeof(m_adv.parts); &quot;Error: padding detected&quot;);</code>"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1453291130, "post_id": 34898309, "comment_id": 57535156, "body": "<i>Byte</i> aligned?  That seems strange to say unless it includes a specific number of bytes of alignment..."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1453294153, "post_id": 34898309, "comment_id": 57537205, "body": "I hope you&#39;re not expecting your bit fields to map to specific bytes of your <code>buf</code> member.  That is extremely implementation-dependent."}], "answers": [{"tags": [], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "is_accepted": false, "score": 0, "last_activity_date": 1453289169, "creation_date": 1453289169, "answer_id": 34898737, "question_id": 34898309, "link": "https://stackoverflow.com/questions/34898309/how-to-byte-align-a-unions-buffer-with-ram-address/34898737#34898737", "title": "How to byte-align a union&#39;s buffer with RAM address", "body": "<p>I am not sure about the compiler you use. But you may define alignment of your structures instance separately from the packing of the datatype.</p>\n\n<p>GCC for example defines an attributes: <code>_attribute__((aligned(4)))</code><br>\nVisual studio has another method <code>__declspec(align(4))</code>.</p>\n\n<p>So look at your compilers manual on how to explicitly define alignment of a data member.</p>\n"}, {"tags": [], "owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "is_accepted": false, "score": 1, "last_activity_date": 1453290666, "creation_date": 1453290666, "answer_id": 34899288, "question_id": 34898309, "link": "https://stackoverflow.com/questions/34898309/how-to-byte-align-a-unions-buffer-with-ram-address/34899288#34899288", "title": "How to byte-align a union&#39;s buffer with RAM address", "body": "<p>Your problem seems to be about <em>packing</em>, and not the <em>alignment</em> of the RAM address (packing plays with alignment, but alignment itself doesn't matter in your case).</p>\n\n<p>The problem here is that you don't really pack the struct because the attribute is misplaced. It should be : </p>\n\n<pre><code>typedef union\n{   \n    uint8_t buf[7];\n    struct // not here\n    {\n        uint8_t             a[2];\n        uint8_t             b;\n        uint16_t            c : 10;\n        uint16_t            d : 6;  \n        uint16_t            e : 14;\n        uint16_t            f : 2;\n    } __packed parts; // here, __packed or __attribute__((packed))\n\n}adv_t;\n</code></pre>\n\n<p>There was an additional byte inserted after <code>b</code> to align the following <code>uint16_t</code> on 16-bit boundaries.</p>\n\n<p>Note that you don't need to make a union if you don't need to access individual bytes. You can just use the struct and pass the address of the struct.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5811659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a2e9f8f150fa989476a1e2372affa42?s=128&d=identicon&r=PG&f=1", "display_name": "TRandom", "link": "https://stackoverflow.com/users/5811659/trandom"}, "is_accepted": true, "score": 0, "last_activity_date": 1453309992, "creation_date": 1453309992, "answer_id": 34906309, "question_id": 34898309, "link": "https://stackoverflow.com/questions/34898309/how-to-byte-align-a-unions-buffer-with-ram-address/34906309#34906309", "title": "How to byte-align a union&#39;s buffer with RAM address", "body": "<p>Thank you for your answers.</p>\n\n<p>My struct members fit perfectly in <code>buf</code> as I wanted (no padding, MSB/LSB placed as I expected etc.), and I didn't mean I want to access to particular bitfield members.</p>\n\n<p>I didn't detail enough, but the problem went from the receiver. </p>\n\n<p>I received for ex. <code>0xEF 0x00 0xFC 0xB2 0x38 0x00 0xB6</code> \ninstead of <code>0xCD 0xAB 0xEF 0x00 0xFC 0xB2 0x38</code> (<code>buf</code>content).</p>\n\n<p>So I thought the problem was about <code>buf</code> address and the Manual sentence talking about \"RAM address\" for <code>PACKETPTR</code> I misunderstood it.. The problem was effectively coming from the frame processing of my receiver... sorry!!</p>\n"}], "owner": {"reputation": 11, "user_id": 5811659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a2e9f8f150fa989476a1e2372affa42?s=128&d=identicon&r=PG&f=1", "display_name": "TRandom", "link": "https://stackoverflow.com/users/5811659/trandom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "accepted_answer_id": 34906309, "answer_count": 3, "score": 1, "last_activity_date": 1453309992, "creation_date": 1453287910, "question_id": 34898309, "link": "https://stackoverflow.com/questions/34898309/how-to-byte-align-a-unions-buffer-with-ram-address", "title": "How to byte-align a union&#39;s buffer with RAM address", "body": "<p>I am currently coding in C and using nRF51 MCU from NORDIC (32-bit ARM Cortex M0).</p>\n\n<p>I would like to send an union's buffer by radio. For this purpose I have to give the address of the union's buffer to PACKETPTR.\nOtherwise the address given to \"PACKETPTR\" has to be, according to the manuel reference: <strong>a byte aligned RAM address</strong>.\nIf it isn't aligned, it manages to take the next closest one but in this way the receiver will receive incomplete buffer and \"dummy\" data...</p>\n\n<p>As you can guess, my buffer isn't byte aligned. Here is the concerned union and the global variable.</p>\n\n<p>My union's elements have to be packed so that they can fit in 7 bytes; </p>\n\n<pre><code>typedef union\n{   \n    uint8_t buf[7];  //The buffer I give to PACKETPTR\n    __packed struct \n    {\n        uint8_t             a[2];\n        uint8_t             b;\n        uint16_t            c : 10;\n        uint16_t            d : 6;  \n        uint16_t            e : 14;\n        uint16_t            f : 2;\n    }parts;\n}adv_t;\n\nadv_t m_adv; //The global variable\n</code></pre>\n\n<p>...</p>\n\n<pre><code>//Later in the code to set PACKETPTR\n\nconfig_tx(ADV_PIPE, m_adv.buf);\n</code></pre>\n\n<p>...  </p>\n\n<pre><code>void __INLINE config_tx(uint8_t tx_pipe, uint8_t* payload)\n{\n   NRF_RADIO-&gt;TXADDRESS = tx_pipe;\n   NRF_RADIO-&gt;PACKETPTR = (uint32_t)payload;\n}\n</code></pre>\n\n<p>At the beginning I added <code>__packed</code> qualifier before <code>typedef union</code>. But it was as if <code>m_adv</code> was \"packed\" with some previous data, hence <code>buf</code> address wasn't byte aligned with ram address.</p>\n\n<pre><code>__packed typedef union /* Previous definition */\n{   \n    uint8_t buf[7];\n    __packed struct \n    {\n        ...\n    }parts;\n}adv_t; \n</code></pre>\n\n<p>So I removed it, and then buf address was correct (ie. byte aligned with RAM address). I thought that was the solution, but few minutes later it became mis-aligned again...\nMy questions are: Does the <code>__packed</code> qualifier affects also buf because of the union? is there a way to force <code>buf</code> address from my global variable  to be aligned? Or any suggestion?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "network-programming"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1453287428, "post_id": 34898092, "comment_id": 57532616, "body": "<i>&quot;Please clarify your specific problem or add additional details to highlight exactly what you need. As it&#39;s currently written, it\u2019s hard to tell exactly what you&#39;re asking. See the How to Ask page for help clarifying this question.&quot;</i>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1453287433, "post_id": 34898092, "comment_id": 57532619, "body": "Please show your research effort till time. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453287820, "post_id": 34898092, "comment_id": 57532908, "body": "Use <code>system()</code> to invoke <code>ifconfig</code> to do the change. That&#39;s the simplest approach."}, {"owner": {"reputation": 693, "user_id": 492927, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/139646fbca54ab3a188db0eebf92631c?s=128&d=identicon&r=PG", "display_name": "Sreeyesh", "link": "https://stackoverflow.com/users/492927/sreeyesh"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453287994, "post_id": 34898092, "comment_id": 57533039, "body": "@FUZxxl Thanks for the reply. I know how to do it from terminal and its possible to run those commands using system API. But I&#39;m looking for a better solution."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453288075, "post_id": 34898092, "comment_id": 57533096, "body": "@sreeyesh Why is that not a good solution? Perhaps I didn&#39;t understand your problem, but <code>ifconfig</code> is a fairly nice and portable abstraction over the hairy system API Linux has to configure its network stack."}, {"owner": {"reputation": 693, "user_id": 492927, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/139646fbca54ab3a188db0eebf92631c?s=128&d=identicon&r=PG", "display_name": "Sreeyesh", "link": "https://stackoverflow.com/users/492927/sreeyesh"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453288406, "post_id": 34898092, "comment_id": 57533350, "body": "@FUZxxl Correct me if I am wrong. I have heard that system API is inefficient as it involves forking another process to execute a shell command."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453288518, "post_id": 34898092, "comment_id": 57533437, "body": "@sreeyesh Yes it does. Is that a problem? How often per second are you trying to change the system&#39;s IP address? 100 times? 1000 times? A fork &amp; exec takes about 10ms on my system. Is this really too slow for your purpose?"}, {"owner": {"reputation": 693, "user_id": 492927, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/139646fbca54ab3a188db0eebf92631c?s=128&d=identicon&r=PG", "display_name": "Sreeyesh", "link": "https://stackoverflow.com/users/492927/sreeyesh"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453289069, "post_id": 34898092, "comment_id": 57533845, "body": "@FUZxxl  You are right! But I am developing application for a network device with low performance hardware. So the code should be as efficient as possible. That&#39;s why I&#39;m trying for an alternative. If there isn&#39;t any I&#39;ll stick to the &#39;system()&#39; method."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1453290027, "post_id": 34898092, "comment_id": 57534443, "body": "@sreeyesh You can directly interact with the Linux kernel, run <code>strace</code> on <code>ifconfig</code> to see how. That said, that&#39;s going to be much more complex and error prone than invoking <code>ifconfig</code> while being only slightly faster."}, {"owner": {"reputation": 693, "user_id": 492927, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/139646fbca54ab3a188db0eebf92631c?s=128&d=identicon&r=PG", "display_name": "Sreeyesh", "link": "https://stackoverflow.com/users/492927/sreeyesh"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453290146, "post_id": 34898092, "comment_id": 57534525, "body": "@FUZxxl Thanks! I will definitely try that :)"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 1, "creation_date": 1453291266, "post_id": 34898092, "comment_id": 57535224, "body": "You cannot do what you are asking without rebinding all of the addresses.  However, from the network perspective, there really isn&#39;t a difference between the addresses.  You can certainly specify that you&#39;d like to bind to a specific address when creating a listener, but you cannot do this when specifying the responding address because the IP stack at that point already has an IP address as an endpoint."}], "answers": [{"comments": [{"owner": {"reputation": 693, "user_id": 492927, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/139646fbca54ab3a188db0eebf92631c?s=128&d=identicon&r=PG", "display_name": "Sreeyesh", "link": "https://stackoverflow.com/users/492927/sreeyesh"}, "edited": false, "score": 0, "creation_date": 1453362077, "post_id": 34904691, "comment_id": 57570085, "body": "Thanks for the response. I thought of this solution first but dropped, as there are lots of already deployed network applications running on the device and I am not allowed to make changes in them."}], "tags": [], "owner": {"reputation": 2562, "user_id": 216636, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e7e9e3684b967676457914eeed61598e?s=128&d=identicon&r=PG", "display_name": "Marko Kevac", "link": "https://stackoverflow.com/users/216636/marko-kevac"}, "is_accepted": false, "score": 1, "last_activity_date": 1453305473, "creation_date": 1453305473, "answer_id": 34904691, "question_id": 34898092, "link": "https://stackoverflow.com/questions/34898092/how-to-change-the-secondary-ip-address-to-primary-ip-address/34904691#34904691", "title": "How to change the secondary IP address to primary IP address", "body": "<p>You can choose one of these IP addresses to be your source address after <code>socket()</code> and before <code>connect()</code> call via <code>bind()</code> call.\nLook at instructions in <a href=\"http://linux.die.net/man/2/bind\" rel=\"nofollow\">man bind</a> or <a href=\"http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html#bind\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 693, "user_id": 492927, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/139646fbca54ab3a188db0eebf92631c?s=128&d=identicon&r=PG", "display_name": "Sreeyesh", "link": "https://stackoverflow.com/users/492927/sreeyesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1453305473, "creation_date": 1453287402, "last_edit_date": 1453298315, "question_id": 34898092, "link": "https://stackoverflow.com/questions/34898092/how-to-change-the-secondary-ip-address-to-primary-ip-address", "title": "How to change the secondary IP address to primary IP address", "body": "<p>I am developing a network application, in C, that needs to be run on a linux PC. The machine has one NIC that has been assigned three IP addresses(one Primary and two secondary ip address). </p>\n\n<p>In a specific scenario, I need to change one of the secondary IP addresses to primary IP address. Is there any possible method for achieving this functionality in C?</p>\n\n<p>This is required since primary IP address is used as the source IP address in an outgoing IP packet. I need to use the secondary IP address as the source address in outgoing packets in some particular conditions.</p>\n"}, {"tags": ["c", "gcc", "makefile"], "answers": [{"tags": [], "owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "is_accepted": true, "score": 3, "last_activity_date": 1453291563, "creation_date": 1453291563, "answer_id": 34899620, "question_id": 34897927, "link": "https://stackoverflow.com/questions/34897927/gcc-error-cannot-specify-c-and-o-with-multiple-files/34899620#34899620", "title": "Gcc error: cannot specify -c and -o with multiple files", "body": "<p>That is a bad idea. Basically you command is invalid, because it is like <code>gcc -c file1.c -o foo/file1.o gcc -c file2.c -o foo/file2.o</code> - shell have no means to know when first command ends and second begins. If you really have to, you can add <code>;</code> to the tail of each of your generated compile commands, so they at least be separated:</p>\n\n<pre><code>compile = $(foreach p,$(sources), gcc -c $(p) -o $(objects)/$(patsubst %.c,%.o,$(notdir $(p)));)\n</code></pre>\n\n<p>However, what you should do is e.g.:</p>\n\n<pre><code>BUILDDIR:=build\nsources:=$(wildcard *.c)\nobjects:=$(addprefix $(BUILDDIR)/, $(patsubst %.c, %.o, $(sources)))\n\n$(BUILDDIR)/%.o: %.c\n    gcc -c $^ -o $@\n\nall: $(objects)\n</code></pre>\n"}], "owner": {"reputation": 1707, "user_id": 4627565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-mGteM1QT0Zk/AAAAAAAAAAI/AAAAAAAAASs/fK5voIJW1VU/photo.jpg?sz=128", "display_name": "Bionix1441", "link": "https://stackoverflow.com/users/4627565/bionix1441"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1985, "favorite_count": 1, "accepted_answer_id": 34899620, "answer_count": 1, "score": 0, "last_activity_date": 1453291563, "creation_date": 1453286994, "last_edit_date": 1453287152, "question_id": 34897927, "link": "https://stackoverflow.com/questions/34897927/gcc-error-cannot-specify-c-and-o-with-multiple-files", "title": "Gcc error: cannot specify -c and -o with multiple files", "body": "<p>I would like to compile many source files assemble them but do not link them\nI use a makefile like the following</p>\n\n<pre><code>sources = $(wildcard absolut_path_to_source_files/*.c)\nobjects = absolut_path_to_source_files_folder\ncompile = $(foreach p,$(sources), gcc -c $(p) -o $(objects)/$(patsubst %.c,%.o,$(notdir $(p)) ))\nall:\n     $(compile)\n</code></pre>\n\n<p>I get a gcc error that the two flags <code>-c</code> and <code>-o</code> cannot be used at the same time for several source files, </p>\n\n<pre><code>    gcc: fatal error: cannot specify -o with -c, -S or -E with multiple files\n    compilation terminated.\n</code></pre>\n\n<p>which is something I don't understand since it is used inside the <code>foreach</code> function which calls gcc for one and only one source file at a time (iteration).</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 5, "creation_date": 1453286681, "post_id": 34897803, "comment_id": 57532072, "body": "<code>memset</code> is declared in <code>string.h</code>"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 6, "creation_date": 1453286907, "post_id": 34897803, "comment_id": 57532238, "body": "Please please please don&#39;t use <code>gets</code>..."}, {"owner": {"reputation": 890, "user_id": 2803693, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/64d57036e35aaa27be1e38a61b8149b3?s=128&d=identicon&r=PG&f=1", "display_name": "jsaji", "link": "https://stackoverflow.com/users/2803693/jsaji"}, "edited": false, "score": 1, "creation_date": 1453288689, "post_id": 34897803, "comment_id": 57533568, "body": "@Michael : $   man memset"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5698192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e96959ec1148f0af5b6a1c8fdbcd0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5698192/michael"}, "edited": false, "score": 0, "creation_date": 1453286956, "post_id": 34897849, "comment_id": 57532280, "body": "now I have this error: warning: implicit declaration of function \u2018gets\u2019 [-Wimplicit-function-declaration] gets(buff);"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1453286743, "creation_date": 1453286743, "answer_id": 34897849, "question_id": 34897803, "link": "https://stackoverflow.com/questions/34897803/implicit-declaration-of-function-memset-wimplicit-function-declaration/34897849#34897849", "title": "implicit declaration of function \u2018memset\u2019 [-Wimplicit-function-declaration]", "body": "<p>Add</p>\n\n<pre><code>#include &lt;string.h&gt;\n</code></pre>\n\n<p>memset is available in string.h</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 5698192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e96959ec1148f0af5b6a1c8fdbcd0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5698192/michael"}, "edited": false, "score": 0, "creation_date": 1453286937, "post_id": 34897855, "comment_id": 57532264, "body": "now I have this error: warning: implicit declaration of function \u2018gets\u2019 [-Wimplicit-function-declaration]      gets(buff);"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 41, "user_id": 5698192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e96959ec1148f0af5b6a1c8fdbcd0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5698192/michael"}, "edited": false, "score": 0, "creation_date": 1453286996, "post_id": 34897855, "comment_id": 57532310, "body": "@Michael: see <a href=\"http://stackoverflow.com/a/2506036/253056\">this answer</a> to learn how to resolve these kinds of issues quickly and easily."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 41, "user_id": 5698192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e96959ec1148f0af5b6a1c8fdbcd0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5698192/michael"}, "edited": false, "score": 1, "creation_date": 1453287012, "post_id": 34897855, "comment_id": 57532321, "body": "@Michael Did you remove stdio include? BTW avoid to use that function... Use <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_scanf.htm\" rel=\"nofollow noreferrer\">scanf</a> or <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_fgets.htm\" rel=\"nofollow noreferrer\">fgets</a> instead. Take a look <a href=\"http://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\">HERE</a>"}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 12, "last_activity_date": 1453287246, "last_edit_date": 1495540326, "creation_date": 1453286756, "answer_id": 34897855, "question_id": 34897803, "link": "https://stackoverflow.com/questions/34897803/implicit-declaration-of-function-memset-wimplicit-function-declaration/34897855#34897855", "title": "implicit declaration of function \u2018memset\u2019 [-Wimplicit-function-declaration]", "body": "<p>Add</p>\n\n<pre><code>#include &lt;string.h&gt;\n</code></pre>\n\n<p>at the top of file.</p>\n\n<p>This because is the header file where the <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_memset.htm\" rel=\"noreferrer\">memset</a> prototype can be found by compiler.</p>\n\n<p>Avoid using gets function... Use <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_scanf.htm\" rel=\"noreferrer\">scanf</a> or <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_fgets.htm\" rel=\"noreferrer\">fgets</a> instead. </p>\n\n<p>Take a look <a href=\"https://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\">HERE</a></p>\n"}], "owner": {"reputation": 41, "user_id": 5698192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e96959ec1148f0af5b6a1c8fdbcd0ea?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5698192/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14145, "favorite_count": 1, "closed_date": 1453286895, "accepted_answer_id": 34897855, "answer_count": 2, "score": 1, "last_activity_date": 1453287246, "creation_date": 1453286637, "question_id": 34897803, "link": "https://stackoverflow.com/questions/34897803/implicit-declaration-of-function-memset-wimplicit-function-declaration", "closed_reason": "Duplicate", "title": "implicit declaration of function \u2018memset\u2019 [-Wimplicit-function-declaration]", "body": "<p>I have the following c code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(void)\n{\n    char buff[10];\n    memset(buff,0,sizeof(buff));\n\n    gets(buff);\n\n    printf(\"\\n The buffer entered is [%s]\\n\",buff);\n\n    return 0;\n}\n</code></pre>\n\n<p>When I run the code, I get the following warning:</p>\n\n<pre><code>warning: implicit declaration of function \u2018memset\u2019 [-Wimplicit-function-declaration]\n</code></pre>\n\n<p>How should I solve the problem?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "lookup-tables", "qsort"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1453286372, "post_id": 34897618, "comment_id": 57531831, "body": "Your comparator function ,you pass <code>a</code> and <code>b</code> but never use it . Why ? Instead of it pass it the elements of <code>rating</code> instead of declaring it as global ."}, {"owner": {"reputation": 1280, "user_id": 4932403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uLzID.jpg?s=128&g=1", "display_name": "KeylorSanchez", "link": "https://stackoverflow.com/users/4932403/keylorsanchez"}, "edited": false, "score": 0, "creation_date": 1453286471, "post_id": 34897618, "comment_id": 57531902, "body": "Because he solely wants to use the rating global variable in his comparison fuction."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1453286699, "post_id": 34897618, "comment_id": 57532081, "body": "In a word, no. That&#39;s the brain-damaged way of C. No, really, how hard it was to add a <code>qsort</code> variant that accepts an additional <code>void *user_data</code> argument and passes it to the comparator function?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1453287120, "post_id": 34897618, "comment_id": 57532400, "body": "You cannot dereference a <code>void*</code>. Just sayin&#39;."}, {"owner": {"reputation": 3809, "user_id": 290182, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4ed4ce7a63ebece709984db4a4d9703c?s=128&d=identicon&r=PG", "display_name": "beldaz", "link": "https://stackoverflow.com/users/290182/beldaz"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1453287394, "post_id": 34897618, "comment_id": 57532597, "body": "@n.m. Thanks, I was wondering what the two lines I&#39;d left out were for. Put back in now."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1453289035, "post_id": 34897618, "comment_id": 57533819, "body": "use <a href=\"http://man7.org/linux/man-pages/man3/qsort.3.html\" rel=\"nofollow noreferrer\">qsort_r</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1453290961, "post_id": 34897618, "comment_id": 57535029, "body": "@BLUEPIXY <a href=\"http://stackoverflow.com/questions/4300896/how-portable-is-the-re-entrant-qsort-r-function-compared-to-qsort\" title=\"how portable is the re entrant qsort r function compared to qsort\">stackoverflow.com/questions/4300896/&hellip;</a>"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1453292109, "post_id": 34897618, "comment_id": 57535834, "body": "@BLUEPIXY Sadly, that&#39;s not portable."}], "answers": [{"comments": [{"owner": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "edited": false, "score": 0, "creation_date": 1453286817, "post_id": 34897831, "comment_id": 57532169, "body": "That hides access to the variable, but doesn&#39;t make the variable itself any less global..."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453286829, "post_id": 34897831, "comment_id": 57532181, "body": "And how is OP supposed to set <code>rating</code> arrays values?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1453286829, "post_id": 34897831, "comment_id": 57532182, "body": "If you want to use a constant hard-coded ratings table, that&#39;s an OK method."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "edited": false, "score": 1, "creation_date": 1453286863, "post_id": 34897831, "comment_id": 57532210, "body": "@user268396 What?? Please, you can&#39;t seriously claim that <code>rating</code> is a global variable here."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453286880, "post_id": 34897831, "comment_id": 57532220, "body": "@FUZxxl How does he do it in the first place?"}, {"owner": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "edited": false, "score": 0, "creation_date": 1453286951, "post_id": 34897831, "comment_id": 57532278, "body": "@Ctx: it&#39;s a global variable the same way any singleton is just a fancy global variable with somewhat controlled access patterns."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453286991, "post_id": 34897831, "comment_id": 57532305, "body": "@Ctx By allocating an array with the lookup table he wants and setting <code>rating</code> to it somewhere."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453287061, "post_id": 34897831, "comment_id": 57532360, "body": "@FUZxxl Ok, then he can do this at the beginning of the function. I will extend the answer by an example for that."}, {"owner": {"reputation": 3809, "user_id": 290182, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4ed4ce7a63ebece709984db4a4d9703c?s=128&d=identicon&r=PG", "display_name": "beldaz", "link": "https://stackoverflow.com/users/290182/beldaz"}, "edited": false, "score": 0, "creation_date": 1453287077, "post_id": 34897831, "comment_id": 57532365, "body": "Hadn&#39;t thought of this. Presumably the init code could call a setup function that initializes the state the first time around. Only problem would be that presumably I wouldn&#39;t be able to reset the rating if I were using this code multiple times in a library."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453287164, "post_id": 34897831, "comment_id": 57532440, "body": "@Ctx This still doesn&#39;t solve the problem. Now you need a global variable for <code>comp_by_rating</code> to find out what to initialize <code>rating</code> to."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453287220, "post_id": 34897831, "comment_id": 57532476, "body": "@FUZxxl You do not know the source of the data. Maybe a file has to be read for it, etc."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453287254, "post_id": 34897831, "comment_id": 57532504, "body": "@Ctx You are right. Maybe OP should give us more details so we can give a better answer."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453287337, "post_id": 34897831, "comment_id": 57532560, "body": "@Ctx And even then, the approach to initialize <code>rating</code> inside <code>comp_by_rating</code> has the problem of not returning the memory for <code>rating</code> after sorting is done."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453287418, "post_id": 34897831, "comment_id": 57532613, "body": "@FUZxxl but it is initialized only once per process, not per sorting, so this should not be an issue. Many libraries use such an approach, this would also be the case when using a global variable (or a thread-local storage)"}, {"owner": {"reputation": 3809, "user_id": 290182, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4ed4ce7a63ebece709984db4a4d9703c?s=128&d=identicon&r=PG", "display_name": "beldaz", "link": "https://stackoverflow.com/users/290182/beldaz"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453287893, "post_id": 34897831, "comment_id": 57532961, "body": "@FUZxxl Current code does read data from a file, but part of the aim is to have a re-usable library that isn&#39;t tied to a particular source. I think this approach has merits in that while in some ways still a global it <i>feels</i> less global, but I think it&#39;s not the way to go for my particular needs. +1 from me."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "edited": false, "score": 1, "creation_date": 1453289185, "post_id": 34897831, "comment_id": 57533935, "body": "@user268396 No, it is not a global variable. In this semantics, the function <code>comp_by_rating</code> is the global, and rating is local to it. What you are actually trying to convey is that any variable, which is not on the stack, is global. This just isn&#39;t the case. See also:  <a href=\"https://en.wikipedia.org/wiki/Static_variable\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Static_variable</a> (the example)."}, {"owner": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "edited": false, "score": 0, "creation_date": 1453289785, "post_id": 34897831, "comment_id": 57534308, "body": "@Ctx: I know what the static keyword does. And what it doesn&#39;t. You will note that the machinery necessary to pass a different ratings array will wind up looking rather a lot like an indirection for modifying a global variable all prettied up as a singleton..."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1453290187, "post_id": 34897831, "comment_id": 57534544, "body": "A file-static variable is much more flexible than a function-static one, without any significant drawbacks."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "edited": false, "score": 0, "creation_date": 1453290362, "post_id": 34897831, "comment_id": 57534643, "body": "@user268396 So in your eyes, it is a sole matter on how a memory location is accessed if a variable in C is local or global? Please take into account that this may differ from architecture to architecture. In <i>many</i> architectures, static local variables are addressed <i>relative to the instruction pointer</i>, while global variables are adressed absolute. So, this would mean, that it is dependent on the architecture if it is global or not. You see, this definition doesn&#39;t lead anywhere sensible"}, {"owner": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "edited": false, "score": 0, "creation_date": 1453290950, "post_id": 34897831, "comment_id": 57535022, "body": "@Ctx the distinction is in how access to the variable in the program is structured. On this level the language itself isn&#39;t really all that relevant: the conceptual program structure/design is what matters. If you&#39;d diagram this in, say, UML object diagram/collaboration diagram, it&#39;s about cardinality/arity of the <i>possible</i> relationships."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "edited": false, "score": 1, "creation_date": 1453291078, "post_id": 34897831, "comment_id": 57535116, "body": "@user268396 In matters of the language construct, global and local are terms of the variable <i>scope</i>, you use the terms just plain wrong."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "edited": false, "score": 1, "creation_date": 1453291475, "post_id": 34897831, "comment_id": 57535384, "body": "@user268396 The definition of a global variable, is a variable which is accessible globally (big surprise). That is, it is accessible everywhere in the project. Therfore, a <code>static</code> variable can never be global by definition, at worst it can have <i>file scope</i>. File scope is not global scope. Overall, you are confusing <i>scope</i> with <i>storage duration</i>, they are entirely different things. The singleton pattern has little to do with scope, but a lot to do with storage duration."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453292282, "post_id": 34897831, "comment_id": 57535975, "body": "@Ctx C doesn&#39;t even have global scope. I&#39;ve always seen the word <i>global variable</i> as meaning <i>variable of static storage duration.</i>"}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 0, "last_activity_date": 1453287106, "last_edit_date": 1453287106, "creation_date": 1453286695, "answer_id": 34897831, "question_id": 34897618, "link": "https://stackoverflow.com/questions/34897618/c-qsort-compare-with-non-global-lookup-table/34897831#34897831", "title": "C qsort compare with non-global lookup table", "body": "<p>No, the array rating does not have to be global: You can use <code>static</code> here:</p>\n\n<pre><code>int comp_by_rating(const void *a, const void *b) {\n    static double *rating = { .. init here .. };\n</code></pre>\n\n<p>Alternate way to initialize it if members are non-constant:</p>\n\n<pre><code>int comp_by_rating(const void *a, const void *b) {\n    static double *rating = NULL;\n    if (!rating) {\n        // Initialize rating here\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3809, "user_id": 290182, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4ed4ce7a63ebece709984db4a4d9703c?s=128&d=identicon&r=PG", "display_name": "beldaz", "link": "https://stackoverflow.com/users/290182/beldaz"}, "edited": false, "score": 0, "creation_date": 1453288653, "post_id": 34897915, "comment_id": 57533538, "body": "Thanks for the definitive &quot;No&quot;. For completeness, do you know of any appropriately augmented qsort libraries that can be portably used for this?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 3809, "user_id": 290182, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4ed4ce7a63ebece709984db4a4d9703c?s=128&d=identicon&r=PG", "display_name": "beldaz", "link": "https://stackoverflow.com/users/290182/beldaz"}, "edited": false, "score": 0, "creation_date": 1453288710, "post_id": 34897915, "comment_id": 57533583, "body": "@beldaz I don&#39;t know any, I wrote my own sort routines for this problem. Sorting isn&#39;t exactly the hardest algorithm to implement yourself."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 3809, "user_id": 290182, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4ed4ce7a63ebece709984db4a4d9703c?s=128&d=identicon&r=PG", "display_name": "beldaz", "link": "https://stackoverflow.com/users/290182/beldaz"}, "edited": false, "score": 1, "creation_date": 1453288863, "post_id": 34897915, "comment_id": 57533682, "body": "@beldaz FreeBSD has <code>qsort_r</code> which is BSD-licensed. You can find the entry point <a href=\"https://github.com/freebsd/freebsd/blob/master/lib/libc/stdlib/qsort_r.c\" rel=\"nofollow noreferrer\">in the source tree</a>. The code is a little complex though."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1453291556, "post_id": 34897915, "comment_id": 57535452, "body": "@FUZxxl glibc also has <code>qsort_r</code> that does the same thing. It has a different interface. The difference may or may not be detected at compile time, but will bomb at run time if you accidentally use the wrong one. <i>That&#39;s</i> how you roll in C."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1453292046, "post_id": 34897915, "comment_id": 57535793, "body": "@n.m. I&#39;m referring to <code>qsort_r</code> as a sorting routine that does what OP needs and that can be freely copied. I&#39;m not telling him to depend on <code>qsort_r</code> being available, I tell him to copy the code into his own project. Maybe I should have made that clear."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1453294361, "post_id": 34897915, "comment_id": 57537332, "body": "OK, copying and subsequently maintaining someone else&#39;s non-trivial source code, instead of calling a standard function, because the standard has ignored the issue for 25 years. That&#39;s how you roll in C."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1453294829, "post_id": 34897915, "comment_id": 57537643, "body": "@n.m. Yeah. My first suggestion was to write your own sort routine though, because then you understand the bugs it has."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1453761566, "post_id": 34897915, "comment_id": 57735639, "body": "@n.m. You might be interested in knowing that the glibc variant of <code>qsort_r</code> is <a href=\"http://austingroupbugs.net/view.php?id=900\" rel=\"nofollow noreferrer\">proposed for inclusion into POSIX</a>."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 1, "last_activity_date": 1453286963, "last_edit_date": 1495541715, "creation_date": 1453286963, "answer_id": 34897915, "question_id": 34897618, "link": "https://stackoverflow.com/questions/34897618/c-qsort-compare-with-non-global-lookup-table/34897915#34897915", "title": "C qsort compare with non-global lookup table", "body": "<p>That's how you roll in C. If you are worried about thread-safety, consider making the variable thread-local, so multiple threads have different copies of it:</p>\n\n<pre><code>static _Thread_local double *rating;\n</code></pre>\n\n<p>This is not supported by old compilers though, instead you need some sort of <a href=\"https://stackoverflow.com/q/18298280/417501\">portability kludge</a>. If you don't like this either, you can't really get around writing your own sorting routine that allows an extra parameter.</p>\n\n<p>gcc provides <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Nested-Functions.html\" rel=\"nofollow noreferrer\">nested functions</a> as an extension to solve this problem, but they have other problems, namely, they require an executable stack which reduces the resilience of your program against bugs.</p>\n"}, {"comments": [{"owner": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "edited": false, "score": 0, "creation_date": 1453287392, "post_id": 34898043, "comment_id": 57532595, "body": "Yep. <i>This</i> is how you roll in C, and, incidentally, also why the argument &quot;just write rewrite the performance critical parts in C&quot; doesn&#39;t always work out so well in practice..."}, {"owner": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "edited": false, "score": 0, "creation_date": 1453287490, "post_id": 34898043, "comment_id": 57532660, "body": "@FUZxxl No but the general idea of making a copy, sorting the copy and then iterating over the copy using a for loop and slotting the results into place... that  still works."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "edited": false, "score": 0, "creation_date": 1453287992, "post_id": 34898043, "comment_id": 57533037, "body": "@user268396 Making the sort out-of-place just so you can use <code>qsort</code> is the way you roll in C? Sorry, I disagree with that."}, {"owner": {"reputation": 3809, "user_id": 290182, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4ed4ce7a63ebece709984db4a4d9703c?s=128&d=identicon&r=PG", "display_name": "beldaz", "link": "https://stackoverflow.com/users/290182/beldaz"}, "edited": false, "score": 1, "creation_date": 1453288175, "post_id": 34898043, "comment_id": 57533175, "body": "This is the best way to go for me, I think. Thanks."}, {"owner": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453288442, "post_id": 34898043, "comment_id": 57533374, "body": "@FUZxxl: no, copying is the way you roll in C if you need to get out of a corner you painted yourself into like that... Doing &#39;clever&#39; things is usually a recipe for worse disaster down the line."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "edited": false, "score": 0, "creation_date": 1453288486, "post_id": 34898043, "comment_id": 57533411, "body": "@user268396 Seems like you aren&#39;t sufficiently creative to find an efficient solution."}, {"owner": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453288907, "post_id": 34898043, "comment_id": 57533723, "body": "@FUZxxl Yes. Subjectively &#39;efficient&#39; solutions to problems of bad program design/structure of my own making don&#39;t strike me as the right reason for getting clever and potentially introducing bugs or requiring preconditions my existing calling code isn&#39;t prepared to guarantee. Better to redo the program structure if I can afford the time/effort."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1453287258, "creation_date": 1453287258, "answer_id": 34898043, "question_id": 34897618, "link": "https://stackoverflow.com/questions/34897618/c-qsort-compare-with-non-global-lookup-table/34898043#34898043", "title": "C qsort compare with non-global lookup table", "body": "<blockquote>\n  <p>I also can't replace <code>int *myarray</code> with an array of structs holding the rating for each item, since other code requires the array in its current form.</p>\n</blockquote>\n\n<p>You can make a temporary replacement for sorting, call <code>qsort</code>, and harvest the results back into the original array:</p>\n\n<pre><code>struct rated_int {\n    int n;\n    double r;\n};\n\nstruct rated_int *tmp = malloc(length_myarray * sizeof(struct rated_int));\nfor (int i = 0 ; i != length_myarray ; i++) {\n    tmp[i].n = myarray[i];\n    tmp[i].r = ratings[myarray[i]];\n}\nqsort(tmp, length_myarray, sizeof(struct rated_int), comp_struct);\nfor (int i = 0 ; i != length_myarray ; i++) {\n    myarray[i] = tmp[i].n;\n}\nfree(tmp);\n</code></pre>\n\n<p>This way the rest of the code would see <code>myarray</code> as an array of integers.</p>\n"}], "owner": {"reputation": 3809, "user_id": 290182, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4ed4ce7a63ebece709984db4a4d9703c?s=128&d=identicon&r=PG", "display_name": "beldaz", "link": "https://stackoverflow.com/users/290182/beldaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 34898043, "answer_count": 3, "score": 3, "last_activity_date": 1453287350, "creation_date": 1453286115, "last_edit_date": 1453287350, "question_id": 34897618, "link": "https://stackoverflow.com/questions/34897618/c-qsort-compare-with-non-global-lookup-table", "title": "C qsort compare with non-global lookup table", "body": "<p>I'm trying to refactor a utility that is currently a stand-alone C program, such that I can make a reusable library. It includes a sorting step of an array, according to the corresponding value within a global array.</p>\n\n<pre><code>// Global lookup table\ndouble *rating;\n\n// Comparator using lookup\nint comp_by_rating(const void *a, const void *b) {\n  int * x = (int *) a;\n  int * y = (int *) b;\n  if (rating[*x] &gt; rating[*y])\n    return 1;\n  else if (rating[*x] &lt; rating[*y])\n    return -1;\n  else\n    return 0;\n}\n\nint main() {\n  int* myarray;\n  // ...\n  // initialize values of local myarray and global rating\n  // ...\n\n  qsort(myarray, length_myarray, sizeof(int), comp_by_rating);\n  // ...\n  return 0;\n}\n</code></pre>\n\n<p>Is there a way for me to avoid having the <code>rating</code> lookup table global? I'm traditionally a C++ person so my first thought was a functor, but I have to stay in C and so I guess I'm functor-less. I also can't replace <code>int *myarray</code> with an array of structs holding the rating for each item, since other code requires the array in its current form. Do I have any other options?</p>\n"}, {"tags": ["c", "matlab", "matrix", "mex", "matrix-indexing"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 2, "creation_date": 1453285991, "post_id": 34897382, "comment_id": 57531590, "body": "You&#39;ve tagged C++, but in the question, you ask about C. Which did you mean to ask about?"}, {"owner": {"reputation": 1006, "user_id": 1627585, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/71e0036ad69d81de092d2b1aa528e684?s=128&d=identicon&r=PG", "display_name": "Matthias W.", "link": "https://stackoverflow.com/users/1627585/matthias-w"}, "edited": false, "score": 0, "creation_date": 1453286352, "post_id": 34897382, "comment_id": 57531815, "body": "I am confused by your naming convention. Can you provide a small example?"}, {"owner": {"reputation": 35987, "user_id": 2732801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YEZ8S.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2732801/daniel"}, "edited": false, "score": 0, "creation_date": 1453286849, "post_id": 34897382, "comment_id": 57532197, "body": "A confusing way to describe a 4 dimensional matrix."}, {"owner": {"reputation": 13, "user_id": 5815108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d11f36e843772bdb91a72a5f77370c?s=128&d=identicon&r=PG&f=1", "display_name": "PhRo", "link": "https://stackoverflow.com/users/5815108/phro"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1453288602, "post_id": 34897382, "comment_id": 57533496, "body": "@user2079303 : Yes, you are right, the tag should be C."}, {"owner": {"reputation": 13, "user_id": 5815108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d11f36e843772bdb91a72a5f77370c?s=128&d=identicon&r=PG&f=1", "display_name": "PhRo", "link": "https://stackoverflow.com/users/5815108/phro"}, "reply_to_user": {"reputation": 35987, "user_id": 2732801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YEZ8S.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2732801/daniel"}, "edited": false, "score": 0, "creation_date": 1453288744, "post_id": 34897382, "comment_id": 57533603, "body": "@Daniel : Yes, true... but how would you better represent it?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5815108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d11f36e843772bdb91a72a5f77370c?s=128&d=identicon&r=PG&f=1", "display_name": "PhRo", "link": "https://stackoverflow.com/users/5815108/phro"}, "edited": false, "score": 1, "creation_date": 1453298423, "post_id": 34897922, "comment_id": 57540140, "body": "Thank you, this indeed does the trick. Maybe in the future an explanation to how you got to this would be helpful (In case of an error for example, to see where the mistake could lie)"}, {"owner": {"reputation": 244, "user_id": 5267247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758945812216cf1425e88b51b8f5db37?s=128&d=identicon&r=PG", "display_name": "NeitherNor", "link": "https://stackoverflow.com/users/5267247/neithernor"}, "reply_to_user": {"reputation": 13, "user_id": 5815108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d11f36e843772bdb91a72a5f77370c?s=128&d=identicon&r=PG&f=1", "display_name": "PhRo", "link": "https://stackoverflow.com/users/5815108/phro"}, "edited": false, "score": 0, "creation_date": 1453385750, "post_id": 34897922, "comment_id": 57585653, "body": "OK, the explanation: your complete matrix F is N<i>m x N</i>m. In F, the element (i,j) of the submatrix F_IJ has indices (k,l)=(i+I<i>m,j+J</i>m). Note that all indices zero based. F is now saved in an N^2*m^2 long C array, such that the matrix element (k,l) of F is saved at array index idx=k+l<i>N</i>m. Putting both index transformations together results in the formula I provided."}], "tags": [], "owner": {"reputation": 244, "user_id": 5267247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758945812216cf1425e88b51b8f5db37?s=128&d=identicon&r=PG", "display_name": "NeitherNor", "link": "https://stackoverflow.com/users/5267247/neithernor"}, "is_accepted": true, "score": 2, "last_activity_date": 1453286981, "creation_date": 1453286981, "answer_id": 34897922, "question_id": 34897382, "link": "https://stackoverflow.com/questions/34897382/linear-indexing-of-matlab-matrices-in-mex-file/34897922#34897922", "title": "Linear indexing of Matlab matrices in MEX file", "body": "<p>I assume all indices to be zero based, as usual in C/C++. If you want to use Matlab style one based indices, subtract one from each index.</p>\n\n<p>I didn't check it, but I guess your index should be...</p>\n\n<pre><code>int idx = I*m+J*N*m*m+i+j*N*m;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1453288247, "last_edit_date": 1453288247, "creation_date": 1453287647, "answer_id": 34898196, "question_id": 34897382, "link": "https://stackoverflow.com/questions/34897382/linear-indexing-of-matlab-matrices-in-mex-file/34898196#34898196", "title": "Linear indexing of Matlab matrices in MEX file", "body": "<p>You can write a function that calculates the index. Note that in C, indices start at 0.</p>\n\n<pre><code>size_t index_of_2d(size_t x, size_t y, size_t n) {\n    return x + y*n;\n}\n\n\nsize_t index_of_4d(size_t I, size_t J, size_t N, size_t i, size_t j, size_t m) {\n    size_t submatrix = index_of_2d(I, J, N) * m * m; // scale the index in super matrix by the size of the submatrix\n    return submatrix + index_of_2d(i, j, m);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5815108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d11f36e843772bdb91a72a5f77370c?s=128&d=identicon&r=PG&f=1", "display_name": "PhRo", "link": "https://stackoverflow.com/users/5815108/phro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 34897922, "answer_count": 2, "score": 1, "last_activity_date": 1453298566, "creation_date": 1453285447, "last_edit_date": 1453298566, "question_id": 34897382, "link": "https://stackoverflow.com/questions/34897382/linear-indexing-of-matlab-matrices-in-mex-file", "title": "Linear indexing of Matlab matrices in MEX file", "body": "<p>I have a NxN symmetric matrix F of the following form</p>\n\n<pre><code>F_11 F_12 F_13 ... F_1N \n\nF_21 ...      \n\nF_31\n\n.\n.\n.\n\nF_N1 F_N2 F_N3 ... F_NN\n</code></pre>\n\n<p>with each submatrices F_IJ of size m x m. </p>\n\n<p>This matrix is created in MatLab, and will be used in a C-programm. So the values are stored in a vector columnwise. (E.g the vector will be of the form : (F_11_11,F_11_21,F_11_31,...F_11_m1,F_21_11,...F_NN_(m-1)m,F_NN_mm).</p>\n\n<p>My question is the following: For readability I would like to define in C a way to access the values of F, given the indices (I,J) of the location of the first submatrix, and the indices (i,j) of the location of value in the submatrix. How can I link the linear indexing of the matrix to the (I,J,i,j) indices?</p>\n"}, {"tags": ["c", "audio", "sdl", "sdl-2"], "answers": [{"comments": [{"owner": {"reputation": 408, "user_id": 2094848, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/354397a15b54dab3d84cb291aa38f1a5?s=128&d=identicon&r=PG", "display_name": "DanBennett", "link": "https://stackoverflow.com/users/2094848/danbennett"}, "edited": false, "score": 0, "creation_date": 1453286269, "post_id": 34897257, "comment_id": 57531772, "body": "Ah, great. Thanks for the quick answer. Fairly obvious when you point it out but my brain was being slow."}, {"owner": {"reputation": 408, "user_id": 2094848, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/354397a15b54dab3d84cb291aa38f1a5?s=128&d=identicon&r=PG", "display_name": "DanBennett", "link": "https://stackoverflow.com/users/2094848/danbennett"}, "edited": false, "score": 1, "creation_date": 1453376321, "post_id": 34897257, "comment_id": 57579076, "body": "Actually this doesn&#39;t seem the whole story - and again, nothing in the docs that i can find covers it. If I switch to AUDIO_U16SYS, change my audio ranges from (0-255) to (0-65535) and use your cast pointer method above, I get distorted audio. Probably I need to post more code, and perhaps best to start a new question at this point. Thanks for your help anyway - it does answer my original question. I&#39;m just even more confused than I thought :)"}, {"owner": {"reputation": 408, "user_id": 2094848, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/354397a15b54dab3d84cb291aa38f1a5?s=128&d=identicon&r=PG", "display_name": "DanBennett", "link": "https://stackoverflow.com/users/2094848/danbennett"}, "edited": false, "score": 3, "creation_date": 1453377106, "post_id": 34897257, "comment_id": 57579582, "body": "Ah! ok so I missed that the len parameter is the length <i>in bytes</i> of the buffer. So as well as changing the format, changing the audio range and casting the stream to 16 bit ints, I also need to divide the length of the buffer by sizeof(Uint16)/sizeof(Uint8). (and the fact that len is measured in bytes was covered in the docs - I just missed it)"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1453285085, "creation_date": 1453285085, "answer_id": 34897257, "question_id": 34897166, "link": "https://stackoverflow.com/questions/34897166/sdl2-audio-callback-restricted-to-8bit/34897257#34897257", "title": "SDL2 Audio Callback restricted to 8bit?", "body": "<p>While <code>stream</code> is indeed a pointer to an 8-bit integer, you can cast it to the correct type. It's just a generic pointer to a stream of bytes, how those bytes should be interpreted (like for example combining every two bytes to a 16-bit word) is up to you.</p>\n\n<p>So in the callback function, just do e.g.</p>\n\n<pre><code>Uint16 *stream16 = (Uint16 *) stream;\n</code></pre>\n"}], "owner": {"reputation": 408, "user_id": 2094848, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/354397a15b54dab3d84cb291aa38f1a5?s=128&d=identicon&r=PG", "display_name": "DanBennett", "link": "https://stackoverflow.com/users/2094848/danbennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 777, "favorite_count": 0, "accepted_answer_id": 34897257, "answer_count": 1, "score": 1, "last_activity_date": 1453285085, "creation_date": 1453284849, "question_id": 34897166, "link": "https://stackoverflow.com/questions/34897166/sdl2-audio-callback-restricted-to-8bit", "title": "SDL2 Audio Callback restricted to 8bit?", "body": "<p>Having read through the SDL2 audio documentation (which is kind of woeful), I can see that there are various audio formats available - including unsigned &amp; signed 8bit, 16bit, 32bitfloat. So far so good. \nI'm stuck using SDL for this project, and I'd like to do some simple audio synthesis in 16bit. So I've set the format in my SDL_AudioSpec struct to AUDIO_U16SYS as per this page\n<a href=\"https://wiki.libsdl.org/SDL_AudioSpec\" rel=\"nofollow\">https://wiki.libsdl.org/SDL_AudioSpec</a></p>\n\n<p>However, when I look at the callback documentation on the same page (and in fact everywhere else I've looked on the web), the audio buffer in the callback is *Uint8:</p>\n\n<pre><code>void SDL_AudioCallback(void*  userdata,\n                       Uint8* stream,\n                       int    len)\n</code></pre>\n\n<p>That being the case I can't see how I'd actually pass 16bit audio to SDL. It looks like it is always going to receive audio as 8bit, and the library just upsamples to the desired bitrate. But that sounds crazy. Is that correct, or am I missing something. For example, is there (somehow) an alternative callback prototype corresponding to eg. AUDIO_U16SYS, or do I have to use other methods for higher bitrates?</p>\n"}, {"tags": ["java", "c"], "comments": [{"owner": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "edited": false, "score": 0, "creation_date": 1453285408, "post_id": 34897063, "comment_id": 57531232, "body": "Add 12 bytes of padding.  If you had something specific in mind, you need to provide more details."}, {"owner": {"reputation": 1931, "user_id": 1293036, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc6cb7617cbacf51bb5d11870f4e3d5c?s=128&d=identicon&r=PG", "display_name": "Pheonix7", "link": "https://stackoverflow.com/users/1293036/pheonix7"}, "reply_to_user": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "edited": false, "score": 0, "creation_date": 1453285709, "post_id": 34897063, "comment_id": 57531423, "body": "well on the receiving side i have a server codded in c which expects a particular header + a sockaddr_in address (only ip address). I managed to make the header but not the ip address as InetAddress is 4 bytes and sockaddr_in is 16 bytes."}, {"owner": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "edited": false, "score": 0, "creation_date": 1453287530, "post_id": 34897063, "comment_id": 57532690, "body": "you need to determine what the format of the <code>sockaddr_in</code> is as you say it&#39;s not an IPv4 address, but that doesn&#39;t tell us what it is.  Without knowing it&#39;s format, it&#39;s not possible to guess what it should be."}, {"owner": {"reputation": 1931, "user_id": 1293036, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc6cb7617cbacf51bb5d11870f4e3d5c?s=128&d=identicon&r=PG", "display_name": "Pheonix7", "link": "https://stackoverflow.com/users/1293036/pheonix7"}, "reply_to_user": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "edited": false, "score": 0, "creation_date": 1453287921, "post_id": 34897063, "comment_id": 57532984, "body": "its originally a struct sockaddr_storage. I know that this is a very general format and that usually u need to cast it say to struct sockaddr_in. Now Im only interested in the ipaddress value. I tried printing the bytes and i get different results if i send an ipaddress via java InetAddress (byte[] ipBytes = InetAddress.getByName(&quot;1.1.1.1&quot;).getAddress();) and c sockeaddr_in (where i specify the family as AF_INET and the address say 1.1.1.1). What more of a format is there to know in this case. i just need the address."}, {"owner": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "edited": false, "score": 1, "creation_date": 1453288711, "post_id": 34897063, "comment_id": 57533584, "body": "are you actually saying that you need to transfer architecture-specific, OS-specific, language-specific, alignment-specific data structures between completely different languages?? Son ... your problems wont end here, your receiving end obviously has been developed by someone who does not know how to develop software. I recommend replacing the c app with something which actually works."}, {"owner": {"reputation": 19087, "user_id": 900130, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/m5mjk.jpg?s=128&g=1", "display_name": "Zolt&#225;n", "link": "https://stackoverflow.com/users/900130/zolt%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1453288882, "post_id": 34897063, "comment_id": 57533702, "body": "What do you want to have in those upper 12 bytes? Zeros? Ones? Something else? When you answer that question, I&#39;m sure you will figure out the solution yourself."}, {"owner": {"reputation": 1931, "user_id": 1293036, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc6cb7617cbacf51bb5d11870f4e3d5c?s=128&d=identicon&r=PG", "display_name": "Pheonix7", "link": "https://stackoverflow.com/users/1293036/pheonix7"}, "edited": false, "score": 0, "creation_date": 1453288972, "post_id": 34897063, "comment_id": 57533775, "body": "oh no.....on the receiving side he is actually waiting for this and then casts based on what it recieves: union sockunion { \tstruct  sockaddr sa; \tstruct  sockaddr_in sin; \tstruct  sockaddr_in6 sin6; \tstruct  sockaddr_storage ss; }; more than this i dont know :("}, {"owner": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "edited": false, "score": 0, "creation_date": 1453289029, "post_id": 34897063, "comment_id": 57533814, "body": "thats <i>exactly</i> what i just said. Btw : who is &quot;he&quot;?"}, {"owner": {"reputation": 1931, "user_id": 1293036, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc6cb7617cbacf51bb5d11870f4e3d5c?s=128&d=identicon&r=PG", "display_name": "Pheonix7", "link": "https://stackoverflow.com/users/1293036/pheonix7"}, "edited": false, "score": 0, "creation_date": 1453289169, "post_id": 34897063, "comment_id": 57533928, "body": "im doomed then i guess. i cant chande the c code as it does many more things. i dont know what else to do"}, {"owner": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "edited": false, "score": 1, "creation_date": 1453289268, "post_id": 34897063, "comment_id": 57533999, "body": "thats easy : replace the c app with something which actually works."}, {"owner": {"reputation": 1931, "user_id": 1293036, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc6cb7617cbacf51bb5d11870f4e3d5c?s=128&d=identicon&r=PG", "display_name": "Pheonix7", "link": "https://stackoverflow.com/users/1293036/pheonix7"}, "edited": false, "score": 0, "creation_date": 1453289299, "post_id": 34897063, "comment_id": 57534018, "body": "can&#39;t do. the c app does many more things that i need"}, {"owner": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "edited": false, "score": 2, "creation_date": 1453289413, "post_id": 34897063, "comment_id": 57534094, "body": "well you need to contact the original developer and ask him to fix it then. Transferring structs over sockets never works reliably - because its WAY too specific to be useful, thats why things like &quot;serialization&quot; have been invented. Ask him to take programming classes or something, he obviously needs them"}], "answers": [{"comments": [{"owner": {"reputation": 1931, "user_id": 1293036, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc6cb7617cbacf51bb5d11870f4e3d5c?s=128&d=identicon&r=PG", "display_name": "Pheonix7", "link": "https://stackoverflow.com/users/1293036/pheonix7"}, "edited": false, "score": 0, "creation_date": 1453303645, "post_id": 34897438, "comment_id": 57543993, "body": "So i tried a few test cases with the c code server and it actually expects Ipv4 over Ipv6 address mapping as Peter mentioned. So im sending from java a Inet6Address, but still from the c application it can not read the ip address i sent."}, {"owner": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "reply_to_user": {"reputation": 1931, "user_id": 1293036, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc6cb7617cbacf51bb5d11870f4e3d5c?s=128&d=identicon&r=PG", "display_name": "Pheonix7", "link": "https://stackoverflow.com/users/1293036/pheonix7"}, "edited": false, "score": 0, "creation_date": 1453303720, "post_id": 34897438, "comment_id": 57544040, "body": "@Pheonix7 how are your writing the IPv6 number? Are you using little endian?"}, {"owner": {"reputation": 1931, "user_id": 1293036, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc6cb7617cbacf51bb5d11870f4e3d5c?s=128&d=identicon&r=PG", "display_name": "Pheonix7", "link": "https://stackoverflow.com/users/1293036/pheonix7"}, "edited": false, "score": 0, "creation_date": 1453304268, "post_id": 34897438, "comment_id": 57544465, "body": "i dont know which one i need. I can try one or the other if i have some sample code"}, {"owner": {"reputation": 1931, "user_id": 1293036, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc6cb7617cbacf51bb5d11870f4e3d5c?s=128&d=identicon&r=PG", "display_name": "Pheonix7", "link": "https://stackoverflow.com/users/1293036/pheonix7"}, "edited": false, "score": 0, "creation_date": 1453306990, "post_id": 34897438, "comment_id": 57546489, "body": "i edited the question showing the 2 different outputs i get"}], "tags": [], "owner": {"reputation": 496316, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "is_accepted": true, "score": 2, "last_activity_date": 1453285590, "creation_date": 1453285590, "answer_id": 34897438, "question_id": 34897063, "link": "https://stackoverflow.com/questions/34897063/send-with-java-a-message-with-message-header-inetaddress-but-getting-different/34897438#34897438", "title": "Send with java a message with message header + InetAddress but getting different result than expected", "body": "<p>I am guessing you want to pass an IPv4 address over IPv6.  There is a technique called <a href=\"https://en.wikipedia.org/wiki/IPv6#IPv4-mapped_IPv6_addresses\" rel=\"nofollow\">IPv4 over Ipv6 address mapping</a> Where you pass the IPv4 address as the lower bits of an address like this</p>\n\n<blockquote>\n  <p>For example, ::ffff:192.0.2.128 represents the IPv4 address 192.0.2.128</p>\n</blockquote>\n"}], "owner": {"reputation": 1931, "user_id": 1293036, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc6cb7617cbacf51bb5d11870f4e3d5c?s=128&d=identicon&r=PG", "display_name": "Pheonix7", "link": "https://stackoverflow.com/users/1293036/pheonix7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 34897438, "answer_count": 1, "score": 0, "last_activity_date": 1453307140, "creation_date": 1453284583, "last_edit_date": 1453307140, "question_id": 34897063, "link": "https://stackoverflow.com/questions/34897063/send-with-java-a-message-with-message-header-inetaddress-but-getting-different", "title": "Send with java a message with message header + InetAddress but getting different result than expected", "body": "<p>I know that <code>InetAddress</code> is 4 bytes long. Is it possible to make it 16 bytes long? I need it 16 bytes long and then i need to send it over an <code>OutputStream</code> on a local unix socket. Thanks!</p>\n\n<p>The c application expects a <code>struct sockaddr_in</code> type which has a size of 16 bytes.</p>\n\n<p>i tried using <code>byte[] ipBytes = InetAddress.getByName(\"153.16.12.1\").getAddress();</code> which correctly sends 4 bytes, but i need the equvalent in 16 bytes (as if it were a sockaddr_in that was sending the data 16 bytes long). I tried sending both data i c and java hoping to get the same outpt but thats not the case.</p>\n\n<p>EDIT: these are the 2 outputs i get. The first which was generated by a c codded file and sends the data correctly whereas the second case is me trying to send the same data but with java. I dont think its a problem of eindianess as most of the characters are in the correct position or are near.</p>\n\n<p>I recieved n bytes: 44</p>\n\n<pre><code>[ 68 01 07 00 01 00 00 00 01 00 1f ec 2d 7f 00 00 00 00 00 00 00 00 00 00 00 00 00 00 02 00 00 00 99 10 0c 01 60 05 40 00 00 00 00 00 ]\n</code></pre>\n\n<p>I recieved n bytes: 48</p>\n\n<pre><code>[ 68 01 07 00 01 00 00 00 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 99 10 0c 01 ]\n</code></pre>\n\n<p>Strangely im getting 4 extra bytes also. Why?</p>\n"}, {"tags": ["c", "fortran", "mpi", "openmpi"], "comments": [{"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 1, "creation_date": 1453283597, "post_id": 34896420, "comment_id": 57530017, "body": "You need to use <code>MPI_Comm_f2c()</code> to retrieve the C <code>MPI_Comm</code> from the <code>int</code> value received from Fortran."}, {"owner": {"reputation": 15, "user_id": 1717527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d17f4664ec7213efc33e90ea9f0487?s=128&d=identicon&r=PG", "display_name": "nicorivas", "link": "https://stackoverflow.com/users/1717527/nicorivas"}, "reply_to_user": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1453283602, "post_id": 34896420, "comment_id": 57530020, "body": "Is there a way to make the calling of C functions from Fortran portable? Fortran does have a MPI_Comm type, but is defined as INTEGER, so I assumed that it was the same in C (as, surprisingly, I could not find in the documentation of OpenMPI an entry for MPI_Comm). Do you know where is MPI_Comm defined, so I can see if it makes sense to cast is as an int?"}, {"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 1, "creation_date": 1453283678, "post_id": 34896420, "comment_id": 57530066, "body": "See chap 17.2.4 of the current MPI standard"}, {"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 1, "creation_date": 1453283867, "post_id": 34896420, "comment_id": 57530178, "body": "And look at the <code>ISO_C_BINDING</code> module for portably inter-operate between C and Fortran"}, {"owner": {"reputation": 15, "user_id": 1717527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d17f4664ec7213efc33e90ea9f0487?s=128&d=identicon&r=PG", "display_name": "nicorivas", "link": "https://stackoverflow.com/users/1717527/nicorivas"}, "reply_to_user": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1453284295, "post_id": 34896420, "comment_id": 57530479, "body": "Yes, that seemed to be it. Thank you a lot! And the reference to the standard was perfect."}], "answers": [{"tags": [], "owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "is_accepted": true, "score": 0, "last_activity_date": 1453287779, "last_edit_date": 1453287779, "creation_date": 1453287406, "answer_id": 34898094, "question_id": 34896420, "link": "https://stackoverflow.com/questions/34896420/basic-test-of-openmpi-fortran-c-throws-different-errors-depending-on-strange/34898094#34898094", "title": "Basic test of OpenMPI + Fortran + C throws different errors depending on strange things", "body": "<p>The definition of MPI_Comm is in <code>mpi.h</code> but it is different in different MPI implementations, some use a pointer, some use an int. </p>\n\n<p>You have to use the conversion routines @Giles mentioned in the first comment. Be also aware they may be just macros and not functions. By far it is easier to pass the Fortran integer to C and convert it there (notice <code>MPI_Fint</code> instead of <code>int</code> to be sure).</p>\n\n<pre><code>void c_function_(MPI_Fint *fcomm) {\n    int world_rank;\n    MPI_Comm_rank(MPI_Comm_f2c(fcomm), &amp;world_rank);\n}\n</code></pre>\n\n<p>If you need to call the conversion from Fortran, it is more complicated. The main complication is the possibility that it is a macro.\nI personally use this (<a href=\"https://github.com/LadaF/PoisFFT/blob/master/src/f_mpi_comm_c2f.c\" rel=\"nofollow\">https://github.com/LadaF/PoisFFT/blob/master/src/f_mpi_comm_c2f.c</a>):</p>\n\n<pre><code>#include &lt;mpi.h&gt;\n\n// This function is callable from Fortran. MPI_Comm_c2f itself may be just a macro.\nMPI_Fint f_MPI_Comm_c2f(MPI_Comm *comm) {\n  return MPI_Comm_c2f(*comm);\n}\n</code></pre>\n\n<p>and in Fortran</p>\n\n<pre><code>  interface\n    ! Intentionally returning integer and not integer(c_int).\n    ! `c_handle` is a pointer to a C comm, not a C comm itself!\n    ! We cannot be sure what Fortran type a C comm is!\n    integer function MPI_Comm_c2f(c_handle) bind(C, name=\"f_MPI_Comm_c2f\")\n      use iso_c_binding\n      type(c_ptr), value :: c_handle\n    end function\n  end interface\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 1717527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d17f4664ec7213efc33e90ea9f0487?s=128&d=identicon&r=PG", "display_name": "nicorivas", "link": "https://stackoverflow.com/users/1717527/nicorivas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 34898094, "answer_count": 1, "score": 0, "last_activity_date": 1453291420, "creation_date": 1453282837, "last_edit_date": 1453291420, "question_id": 34896420, "link": "https://stackoverflow.com/questions/34896420/basic-test-of-openmpi-fortran-c-throws-different-errors-depending-on-strange", "title": "Basic test of OpenMPI + Fortran + C throws different errors depending on strange things", "body": "<p>I'm having strange problems when trying to use OpenMPI together with Fortran and C. This is a Fortran program that calls a C function, and both are using OpenMPI. I've managed to trace the error to this very simple test case:</p>\n\n<p>File <code>mpi_hello_world.F90</code>:</p>\n\n<pre><code>program mpi_hello_world\n  implicit none\n  include 'mpif.h'\n  integer :: ierror\n  call MPI_Init(ierror)\n  ! ERROR CHANGES IF I COMMENT THE FOLLOWING LINE\n  write(*,*) 'before c_function: MPI_COMM_WORLD=',MPI_COMM_WORLD\n  call c_function(MPI_COMM_WORLD)\n  call MPI_Finalize()\nend program mpi_hello_world\n</code></pre>\n\n<p>File <code>c_function.c</code>:</p>\n\n<pre><code>#include \"mpi.h\"\n#include &lt;stdio.h&gt;\nvoid c_function_(MPI_Comm *comm) {\n    printf(\"MPI_Comm comm=%d\\n\",*comm);\n    int world_rank;\n    MPI_Comm_rank(commi, &amp;world_rank);\n}\n</code></pre>\n\n<p>The output of the program is:</p>\n\n<pre><code>before c_function: MPI_COMM_WORLD=           0\nMPI_Comm comm=0\n</code></pre>\n\n<p>So it seems like the variable is being passed correctly. After that, I can get two run time errors depending if I comment or not the line that I indicated in the code. If it is like shown (not commented), then I get a Segmentation fault:</p>\n\n<pre><code>Program received signal SIGSEGV: Segmentation fault - invalid memory reference.\n\nBacktrace for this error:\n#0  0x2B5330A9A777\n#1  0x2B5330A9AD7E\n#2  0x2B5331607D3F\n#3  0x2B5331350D26\n#4  0x4015D2 in c_function_\n#5  0x401550 in MAIN__ at mpi_hello_world.F90:?\n--------------------------------------------------------------------------\nmpirun noticed that process rank 0 with PID 6088 on node pine exited on signal 11 (Segmentation fault).\n--------------------------------------------------------------------------\nmake: *** [run] Error 139\n</code></pre>\n\n<p>In case I comment that line, I get an error from OpenMPI:</p>\n\n<pre><code>[pine:6328] *** An error occurred in MPI_Comm_rank\n[pine:6328] *** reported by process [46992071589889,46991237185536]\n[pine:6328] *** on communicator MPI_COMM_WORLD\n[pine:6328] *** MPI_ERR_COMM: invalid communicator\n[pine:6328] *** MPI_ERRORS_ARE_FATAL (processes in this communicator will now abort,\n[pine:6328] ***    and potentially your MPI job)\n-------------------------------------------------------\nPrimary job  terminated normally, but 1 process returned\na non-zero exit code.. Per user-direction, the job has been aborted.\n-------------------------------------------------------\n--------------------------------------------------------------------------\nmpirun detected that one or more processes exited with non-zero status, thus causing\nthe job to be terminated. The first process to do so was:\n\n   Process name: [[12732,1],0]\n   Exit code:    5\n--------------------------------------------------------------------------\n</code></pre>\n\n<p>My idea is that there is something wrong with the libraries linking, but I can't figure out what. It would be great if I could tips on how to debug this.</p>\n\n<p>Some more information: I'm using OpenMPI 1.8.4, for compiling both the Fortran and C files. I'm also running with the correct mpirun, as <code>/path/to/openmpi/1.8.4/common/bin/mpirun -n 1 test</code>.</p>\n\n<p>To make sure that the correct libraries are being linked, I did:</p>\n\n<pre><code>[$]: ldd hello \nlinux-vdso.so.1 =&gt;  (0x00007ffee39d6000)\nlibgfortran.so.3 =&gt; /usr/lib/x86_64-linux-gnu/libgfortran.so.3 (0x0007f6a4dca5000)\nlibm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f6a4d99f000)\nlibmpi_mpifh.so.2 =&gt; /usr/lib/openmpi/1.8.4/gcc/lib/libmpi_mpifh.so.2 (0x00007f6a4d74a000)\nlibmpi.so.1 =&gt; /usr/lib/openmpi/1.8.4/gcc/lib/libmpi.so.1 (0x00007f6a4d46e000)\nlibc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f6a4d0a9000)\nlibquadmath.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libquadmath.so.0 (0x00007f6a4ce6c000)\nlibgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f6a4cc56000)\nlibpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f6a4ca38000)\nlibopen-rte.so.7 =&gt; /usr/lib/openmpi/1.8.4/gcc/lib/libopen-rte.so.7 (0x00007f6a4c7bb000)\nlibopen-pal.so.6 =&gt; /usr/lib/openmpi/1.8.4/gcc/lib/libopen-pal.so.6 (0x00007f6a4c4cf000)\n/lib64/ld-linux-x86-64.so.2 (0x000055dacdee9000)\nlibnuma.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libnuma.so.1 (0x00007f6a4c2c3000)\nlibpciaccess.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libpciaccess.so.0 (0x00007f6a4c0ba000)\nlibcudart.so.6.0 =&gt; /usr/lib/x86_64-linux-gnu/libcudart.so.6.0 (0x00007f6a4be69000)\nlibdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f6a4bc64000)\nlibrt.so.1 =&gt; /lib/x86_64-linux-gnu/librt.so.1 (0x00007f6a4ba5c000)\nlibutil.so.1 =&gt; /lib/x86_64-linux-gnu/libutil.so.1 (0x00007f6a4b859000)\nlibz.so.1 =&gt; /lib/x86_64-linux-gnu/libz.so.1 (0x00007f6a4b63f000)\nlibstdc++.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f6a4b33b000)\n</code></pre>\n\n<p>Any ideas? Anyone with a similar problem?</p>\n"}, {"tags": ["c", "embedded", "odroid"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1453282913, "post_id": 34896372, "comment_id": 57529539, "body": "Please post the problematic code here, on this site."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1453282983, "post_id": 34896372, "comment_id": 57529590, "body": "Code doesn&#39;t even seem to be on that link."}, {"owner": {"reputation": 2199, "user_id": 3248493, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/729b76d953fad3ff05b6cc752cb660db?s=128&d=identicon&r=PG&f=1", "display_name": "fandyushin", "link": "https://stackoverflow.com/users/3248493/fandyushin"}, "edited": false, "score": 1, "creation_date": 1453283028, "post_id": 34896372, "comment_id": 57529621, "body": "Post image.sh code here"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1453284169, "post_id": 34896372, "comment_id": 57530394, "body": "Assuming you are in fact trying to &quot;[r]ead raw image as a string&quot;, that&#39;s not going to work - raw image data is not a C string.  A C-style string is a series of character values that are terminated with a NUL byte.  Raw image data is binary data that can include any value."}, {"owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "edited": false, "score": 0, "creation_date": 1453289599, "post_id": 34896372, "comment_id": 57534201, "body": "Perhaps you could somehow use XPM. This is a format of an image which is represented by a normal C string."}, {"owner": {"reputation": 1, "user_id": 5814982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7a37bd0c4657e1dd84c47e216224343?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Badr", "link": "https://stackoverflow.com/users/5814982/mohamed-badr"}, "edited": false, "score": 0, "creation_date": 1453297779, "post_id": 34896372, "comment_id": 57539650, "body": "Attached is the shell script code: <a href=\"https://github.com/hardkernel/ODROID-SHOW/blob/master/example/linux/images.sh\" rel=\"nofollow noreferrer\">github.com/hardkernel/ODROID-SHOW/blob/master/example/linux/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453311786, "post_id": 34896372, "comment_id": 57549752, "body": "Exactly what do you mean by: <code>raw image</code>?   almost all images are packaged into a known format.  .tiff, .jpg, etc  Such packaged images have lots of control/etc information that should be properly processed to result in an image being displayed.  And what is the  <code>raw image</code> pixel format, 8 bit, 16bit, 24 bit, 32 bit? and are the pixels &lt;rbg&gt; or &lt;yym&gt; or what?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453312529, "post_id": 34896372, "comment_id": 57550265, "body": "the linked files are in C++, java, bash, etc. so why is this question on a &#39;C&#39; forum?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453312884, "post_id": 34896372, "comment_id": 57550507, "body": "You might want to read &lt;<a href=\"http://stackoverflow.com/questions/1536159/getting-rgb-values-for-each-pixel-from-a-raw-image-in-c\" title=\"getting rgb values for each pixel from a raw image in c\">stackoverflow.com/questions/1536159/&hellip;</a>&gt; which discusses displaying *.raw images."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453313422, "post_id": 34896372, "comment_id": 57550831, "body": "You might want to download/browse: &lt;<a href=\"https://github.com/alexandruc/android-bpg\" rel=\"nofollow noreferrer\">github.com/alexandruc/android-bpg</a>&gt; for an example of how to display a raw image on an android"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453314061, "post_id": 34896372, "comment_id": 57551171, "body": "this is from: &lt;<a href=\"https://en.wikipedia.org/wiki/Raw_image_format\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Raw_image_format</a>&gt;   Providing a detailed and concise description of the content of raw files is highly problematic. There is no single raw format; formats can be similar or radically different. &lt;snip&gt;"}, {"owner": {"reputation": 1, "user_id": 5814982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7a37bd0c4657e1dd84c47e216224343?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Badr", "link": "https://stackoverflow.com/users/5814982/mohamed-badr"}, "edited": false, "score": 0, "creation_date": 1453817535, "post_id": 34896372, "comment_id": 57758277, "body": "Thanks guys, I got my problem solved."}], "owner": {"reputation": 1, "user_id": 5814982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7a37bd0c4657e1dd84c47e216224343?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Badr", "link": "https://stackoverflow.com/users/5814982/mohamed-badr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453282689, "creation_date": 1453282689, "question_id": 34896372, "link": "https://stackoverflow.com/questions/34896372/read-raw-image-as-a-string-in-c", "title": "Read raw image as a string in C", "body": "<p>I'm trying to show images on ODROID-SHOW screen. Using C code provided in the official examples by the official website, I managed to run c code and show simple texts. but when it comes to showing images, I'm stuck trying to read raw images and show them using the same code. Code is provided on the given link.</p>\n\n<p><a href=\"http://odroid.com/dokuwiki/doku.php?id=en:show_examples\" rel=\"nofollow\">http://odroid.com/dokuwiki/doku.php?id=en:show_examples</a></p>\n\n<p>I've a thoughts that if I could read raw image into a string I can simply send it to ODROID Screen. What do you think?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1453281493, "post_id": 34895868, "comment_id": 57528576, "body": "fflush(stdin) invokes undefined behavior."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1453281494, "post_id": 34895868, "comment_id": 57528578, "body": "Thats undefined behavior."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453281587, "post_id": 34895868, "comment_id": 57528652, "body": "I&#39;m getting tired of linking the dups for this:("}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1453282855, "post_id": 34895868, "comment_id": 57529495, "body": "Welcome to Stack Overflow! <a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1453281585, "post_id": 34895913, "comment_id": 57528648, "body": "Isn&#39;t the security risk is when the buffer is on the current stack frame?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1453281653, "post_id": 34895913, "comment_id": 57528697, "body": "@StoryTeller Nope. It also a security risk per-se."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453281750, "post_id": 34895913, "comment_id": 57528761, "body": "@FUZxxl, I&#39;m not familiar with any attacks that work with memory allocated on the heap. But if you have a reference I&#39;d be happy to learn something new."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1453284715, "post_id": 34895913, "comment_id": 57530775, "body": "@StoryTeller <i>I&#39;m not familiar with any attacks that work with memory allocated on the heap.</i>  Corrupting the heap is a DOS attack at least.  And given knowledge of what&#39;s in the heap and where, arbitrary data could be used to overwrite something important."}, {"owner": {"reputation": 283736, "user_id": 298479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc66db28aa7c3fa8e4ce4238b696dee9?s=128&d=identicon&r=PG", "display_name": "ThiefMaster", "link": "https://stackoverflow.com/users/298479/thiefmaster"}, "edited": false, "score": 1, "creation_date": 1453284872, "post_id": 34895913, "comment_id": 57530862, "body": "<a href=\"https://en.wikipedia.org/wiki/Heap_overflow\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Heap_overflow</a> mentions one"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1453285132, "post_id": 34895913, "comment_id": 57531057, "body": "@AndrewHenle Lookup Heart Bleed for a fatal heap overflow attack."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1453285656, "post_id": 34895913, "comment_id": 57531384, "body": "@FUZxxl Thanks.  I knew there were examples, but it&#39;s too early in the morning so I was just pointing out in general terms how overflowing a heap buffer could be an attack vector."}], "tags": [], "owner": {"reputation": 283736, "user_id": 298479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc66db28aa7c3fa8e4ce4238b696dee9?s=128&d=identicon&r=PG", "display_name": "ThiefMaster", "link": "https://stackoverflow.com/users/298479/thiefmaster"}, "is_accepted": false, "score": 1, "last_activity_date": 1453281466, "creation_date": 1453281466, "answer_id": 34895913, "question_id": 34895868, "link": "https://stackoverflow.com/questions/34895868/charmallocsizeofchar-allocating-more-then-one-char/34895913#34895913", "title": "(char*)malloc(sizeof(char)) allocating more then one char?", "body": "<p>It's called a buffer overflow resulting in undefined behavior. It may or may not crash your problem, but it is a security hole nonetheless.</p>\n\n<p><code>scanf</code> with <code>%s</code> without a maximum length specified is always a security hole just like <code>gets()</code> and should not be used!</p>\n\n<p>BTW: <code>sizeof char</code> is guaranteed to be <code>1</code> so you don't need to specify it - just use the number of chars you need; multiplying by <code>sizeof char</code> is likely to be optimized away by your compiler.</p>\n"}, {"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1453281469, "creation_date": 1453281469, "answer_id": 34895916, "question_id": 34895868, "link": "https://stackoverflow.com/questions/34895868/charmallocsizeofchar-allocating-more-then-one-char/34895916#34895916", "title": "(char*)malloc(sizeof(char)) allocating more then one char?", "body": "<p>You write beyond the boundary of the memory you allocated. This is undefined behavior, and you are unlucky enough that it seemed to \"work\".</p>\n"}, {"tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 0, "last_activity_date": 1453282404, "creation_date": 1453282404, "answer_id": 34896267, "question_id": 34895868, "link": "https://stackoverflow.com/questions/34895868/charmallocsizeofchar-allocating-more-then-one-char/34896267#34896267", "title": "(char*)malloc(sizeof(char)) allocating more then one char?", "body": "<blockquote>\n  <p>From what I understand (char*)malloc(sizeof(char)) should only\n  allocate space for one character</p>\n</blockquote>\n\n<p>Thats correct. <code>malloc</code> in this case returns a pointer to 1 byte of allocated memory. </p>\n\n<pre><code>fflush(stdin);\n</code></pre>\n\n<p>Is undefined. At this point, anything may happen.</p>\n\n<pre><code>scanf(\"%s\",sir[i]);\n</code></pre>\n\n<p>Is also undefined. Again, at this point anything may happen, from crashing your program with a segfault to it seemingly working.</p>\n"}], "owner": {"reputation": 3, "user_id": 5814859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb2220385dbf0108b5c8baeadc9870c?s=128&d=identicon&r=PG&f=1", "display_name": "Robert ", "link": "https://stackoverflow.com/users/5814859/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "closed_date": 1453283152, "answer_count": 3, "score": -3, "last_activity_date": 1453282404, "creation_date": 1453281360, "last_edit_date": 1453281591, "question_id": 34895868, "link": "https://stackoverflow.com/questions/34895868/charmallocsizeofchar-allocating-more-then-one-char", "closed_reason": "Duplicate", "title": "(char*)malloc(sizeof(char)) allocating more then one char?", "body": "<p>I am having some trouble understanding how memory is allocated to <code>sir[i]</code>. From what I understand <code>(char*)malloc(sizeof(char))</code> should only allocate space for one character, but when I run the code it can read any word, regardless of length. Can someone plese explain how/why does this happen?  </p>\n\n<pre><code>void read(char **sir,int **ln,int n)\n{\n    int i;\n    for(i=0;i&lt;n;i++)\n    {\n        printf(\"Read word %d: \",i+1);\n        sir[i]=(char*)malloc(sizeof(char));\n        fflush(stdin);\n        scanf(\"%s\",sir[i]);\n        ln[i]=(int*)malloc(sizeof(int));\n        *(ln[i])=strlen(sir[i]);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "keyword", "flex-lexer", "lex"], "answers": [{"comments": [{"owner": {"reputation": 3690, "user_id": 2845038, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EzirQ.jpg?s=128&g=1", "display_name": "Victor Brunell", "link": "https://stackoverflow.com/users/2845038/victor-brunell"}, "edited": false, "score": 0, "creation_date": 1453281946, "post_id": 34895995, "comment_id": 57528893, "body": "Ah, I see.  So take any identifier found and compare it to a keyword lookup table?  Kind of like a symbol table?  I&#39;m wondering why something as simple as <code>&quot;char&quot; { return(CHAR); }</code> is used here then: <a href=\"http://www.quut.com/c/ANSI-C-grammar-l.html\" rel=\"nofollow noreferrer\">quut.com/c/ANSI-C-grammar-l.html</a>"}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "reply_to_user": {"reputation": 3690, "user_id": 2845038, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EzirQ.jpg?s=128&g=1", "display_name": "Victor Brunell", "link": "https://stackoverflow.com/users/2845038/victor-brunell"}, "edited": false, "score": 0, "creation_date": 1453283436, "post_id": 34895995, "comment_id": 57529910, "body": "It &quot;works&quot;, but is less general than an approach separating syntax and data.  I mostly use <code>lex</code> for syntax highlighters, and avoid mixing data in the lexer."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1453281690, "creation_date": 1453281690, "answer_id": 34895995, "question_id": 34895598, "link": "https://stackoverflow.com/questions/34895598/lex-c-keyword-rules-not-identifying-correctly/34895995#34895995", "title": "Lex: C keyword rules not identifying correctly", "body": "<p>Your lexer has to match other things (including something that will match the \"put\" substring) to allow it to distinguish between keywords and non-keywords.</p>\n\n<p>If I were writing the lexer, I would simplify it by matching possible identifiers and using a lookup table to identify keywords in the resulting tokens.</p>\n"}, {"comments": [{"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1453282542, "post_id": 34896206, "comment_id": 57529300, "body": "What have I said wrong? Comment for minus would be nice. Because this is exactly answer to his question."}, {"owner": {"reputation": 3690, "user_id": 2845038, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EzirQ.jpg?s=128&g=1", "display_name": "Victor Brunell", "link": "https://stackoverflow.com/users/2845038/victor-brunell"}, "edited": false, "score": 2, "creation_date": 1453282825, "post_id": 34896206, "comment_id": 57529470, "body": "Actually, this solved part of the problem.  Why the down votes?"}], "tags": [], "owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "is_accepted": true, "score": 2, "last_activity_date": 1453283054, "last_edit_date": 1453283054, "creation_date": 1453282228, "answer_id": 34896206, "question_id": 34895598, "link": "https://stackoverflow.com/questions/34895598/lex-c-keyword-rules-not-identifying-correctly/34896206#34896206", "title": "Lex: C keyword rules not identifying correctly", "body": "<p>You need to put keywords before identifiers. That's all. Lex is searching for regular expressions sequentially.</p>\n\n<pre><code>%%\n\nIF|ELSE|etc {action for keywords }\n\n[a-zA-Z_][a-zA-Z0-9]* {action for identifiers}\n\n%%\n</code></pre>\n"}], "owner": {"reputation": 3690, "user_id": 2845038, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/EzirQ.jpg?s=128&g=1", "display_name": "Victor Brunell", "link": "https://stackoverflow.com/users/2845038/victor-brunell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1320, "favorite_count": 0, "accepted_answer_id": 34896206, "answer_count": 2, "score": 4, "last_activity_date": 1546444974, "creation_date": 1453280601, "last_edit_date": 1546444974, "question_id": 34895598, "link": "https://stackoverflow.com/questions/34895598/lex-c-keyword-rules-not-identifying-correctly", "title": "Lex: C keyword rules not identifying correctly", "body": "<p>I wrote a simple lex file to identify C keywords.  My rules looks like:</p>\n\n<pre><code>keyword do|while|char|if\n%%\n{keyword}  { printf(\"Keyword %s found.\", yytext); }\n</code></pre>\n\n<p>The problem is the rule correctly identifies <code>char</code> in source code, but it also identifies things like <code>putchar</code> as keyword <code>char</code>.  How can I force the rule to only identify the keyword <code>char</code> and not when it's present in other words? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1453278858, "post_id": 34894978, "comment_id": 57526949, "body": "So you have a 64-bit variable initialized to zero, but it&#39;s not really clear what the result should be. <i>Where</i> do you get each <a href=\"https://en.wikipedia.org/wiki/Nibble\" rel=\"nofollow noreferrer\">nibble</a>? For some (possible) input, what should the result be? Why do you need a loop if you get all the bits for the variable inside the loop?"}, {"owner": {"reputation": 5, "user_id": 5814680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15066c198df24bccdef75333dd349376?s=128&d=identicon&r=PG&f=1", "display_name": "erf gds", "link": "https://stackoverflow.com/users/5814680/erf-gds"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1453279135, "post_id": 34894978, "comment_id": 57527106, "body": "a[] has 16 elements and each element should be assign to 4 bits in text variable respectively first element goes first lowest 4 bits second goes second lowest 4 bits.I just explained in the question,which part is not clear for you ?"}], "answers": [{"comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1453279012, "post_id": 34895035, "comment_id": 57527047, "body": "Correct me if I am wrong but it looks like it does only works for big endian and most of current computer use little endian?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1453279101, "post_id": 34895035, "comment_id": 57527090, "body": "@Holt: yes, I think endianness is a potential issue whatever solution you come up with for this - for cross-platform compatibility you would probably need to handle endianness explicitly - for a single platform then you just code it for the target endianness."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1453279110, "post_id": 34895035, "comment_id": 57527093, "body": "@Holt I&#39;d say it depends on how one initializes the bit-field structure. :)"}, {"owner": {"reputation": 4993, "user_id": 885605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16c5ec313530f501f11c809ee6c8473?s=128&d=identicon&r=PG", "display_name": "Andreas Grapentin", "link": "https://stackoverflow.com/users/885605/andreas-grapentin"}, "edited": false, "score": 0, "creation_date": 1453279714, "post_id": 34895035, "comment_id": 57527447, "body": "@PaulR bitshifts are endianness agnostic"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 4993, "user_id": 885605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16c5ec313530f501f11c809ee6c8473?s=128&d=identicon&r=PG", "display_name": "Andreas Grapentin", "link": "https://stackoverflow.com/users/885605/andreas-grapentin"}, "edited": false, "score": 0, "creation_date": 1453279838, "post_id": 34895035, "comment_id": 57527512, "body": "@AndreasGrapentin: true, but you may still need to pay attention to the ordering of the 4 bit fields, e.g. if you are going to be storing this data in a platform-agnostic way, or sending it over a network."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1453279211, "last_edit_date": 1453279211, "creation_date": 1453278819, "answer_id": 34895035, "question_id": 34894978, "link": "https://stackoverflow.com/questions/34894978/updating-every-single-block-4bits-with-different-value-in-64-bit-unsigned-vari/34895035#34895035", "title": "Updating every single block (4bits) with different value in 64 bit unsigned variable?", "body": "<p>You could use bit fields:</p>\n\n<pre><code>typedef struct {\n    int n0 : 4;\n    int n1 : 4;\n    int n2 : 4;\n    int n3 : 4;\n    int n4 : 4;\n    int n5 : 4;\n    int n6 : 4;\n    int n7 : 4;\n    int n8 : 4;\n    int n9 : 4;\n    int n10 : 4;\n    int n11 : 4;\n    int n12 : 4;\n    int n13 : 4;\n    int n14 : 4;\n    int n15 : 4;\n} S64;\n\ntypedef union {\n    uint64_t i;\n    S64 b;\n} U64;\n</code></pre>\n\n<p>Note: you may need to pay attention to to the endianness of your target platform(s), if you require a specific ordering of the 4 bit fields within the 64 bit value.</p>\n"}, {"tags": [], "owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "is_accepted": false, "score": 2, "last_activity_date": 1453278819, "creation_date": 1453278819, "answer_id": 34895036, "question_id": 34894978, "link": "https://stackoverflow.com/questions/34894978/updating-every-single-block-4bits-with-different-value-in-64-bit-unsigned-vari/34895036#34895036", "title": "Updating every single block (4bits) with different value in 64 bit unsigned variable?", "body": "<p>You can use bitshifting and bitwise-OR to do this.  Assuming the <code>a[n]</code> values are all between 0 and 15 and also <code>unsigned __int64</code>s:</p>\n\n<pre><code>unsigned __int64 text=0x0;\n\ntext = a[0] |\n       a[1] &lt;&lt; 4 |\n       a[2] &lt;&lt; 8 |\n       etc....;\n</code></pre>\n\n<p>If you don't trust the <code>a[n]</code> values, use <code>(a[n] &amp; 0xF)</code> to clear all but the four least significant bits before shifting.  If <code>a[n]</code> is not an <code>unsigned __int64</code>, cast it before shifting.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 5814680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15066c198df24bccdef75333dd349376?s=128&d=identicon&r=PG&f=1", "display_name": "erf gds", "link": "https://stackoverflow.com/users/5814680/erf-gds"}, "edited": false, "score": 0, "creation_date": 1453279971, "post_id": 34895249, "comment_id": 57527602, "body": "Don&#39;t we lose the text bits ? also you are masking a[15] with lowest 4 bits why ? it should be a[0]&amp;0x0f"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 5, "user_id": 5814680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15066c198df24bccdef75333dd349376?s=128&d=identicon&r=PG&f=1", "display_name": "erf gds", "link": "https://stackoverflow.com/users/5814680/erf-gds"}, "edited": false, "score": 0, "creation_date": 1453280042, "post_id": 34895249, "comment_id": 57527648, "body": "@erfgds Notice that bitwise shift of <code>text</code> in the loop? Try it out while running in a debugger, step through the code line by line and watch the variables change."}, {"owner": {"reputation": 5, "user_id": 5814680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15066c198df24bccdef75333dd349376?s=128&d=identicon&r=PG&f=1", "display_name": "erf gds", "link": "https://stackoverflow.com/users/5814680/erf-gds"}, "edited": false, "score": 0, "creation_date": 1453280561, "post_id": 34895249, "comment_id": 57527977, "body": "Yeah I tried and it is not correct , i tested it with correct outputs sorry"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 5, "user_id": 5814680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15066c198df24bccdef75333dd349376?s=128&d=identicon&r=PG&f=1", "display_name": "erf gds", "link": "https://stackoverflow.com/users/5814680/erf-gds"}, "edited": false, "score": 0, "creation_date": 1453281122, "post_id": 34895249, "comment_id": 57528355, "body": "@erfgds Made a slight update, it should work correctly now (<a href=\"http://ideone.com/0dWjme\" rel=\"nofollow noreferrer\">see e.g. this (very simple) example</a>)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 5, "user_id": 5814680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15066c198df24bccdef75333dd349376?s=128&d=identicon&r=PG&f=1", "display_name": "erf gds", "link": "https://stackoverflow.com/users/5814680/erf-gds"}, "edited": false, "score": 0, "creation_date": 1453289281, "post_id": 34895249, "comment_id": 57534008, "body": "@erfgds Then you need to tell us what &quot;input&quot; you have, and what the result should be. And how does your current work or not work? What output do you get? What output did you expect? And can you perhaps create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> and show us? Please edit your question to include all details or it will be hard or even impossible to actually help you."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1453280742, "last_edit_date": 1453280742, "creation_date": 1453279473, "answer_id": 34895249, "question_id": 34894978, "link": "https://stackoverflow.com/questions/34894978/updating-every-single-block-4bits-with-different-value-in-64-bit-unsigned-vari/34895249#34895249", "title": "Updating every single block (4bits) with different value in 64 bit unsigned variable?", "body": "<p>If you <em>must</em> use a loop, you can do something like</p>\n\n<pre><code>uint64_t text = 0;\nfor (int i = 15; i &gt;= 0; --i)\n{\n    text &lt;&lt;= 4;\n    text |= a[i] &amp; 0x0f;  // Masking in case a[i] have more than the lowest four bits set\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3717, "user_id": 1215996, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ff628cd135c5f60ce0dfda4b40ac06e?s=128&d=identicon&r=PG", "display_name": "Sumit Trehan", "link": "https://stackoverflow.com/users/1215996/sumit-trehan"}, "is_accepted": false, "score": 1, "last_activity_date": 1453281862, "last_edit_date": 1453281862, "creation_date": 1453281391, "answer_id": 34895882, "question_id": 34894978, "link": "https://stackoverflow.com/questions/34894978/updating-every-single-block-4bits-with-different-value-in-64-bit-unsigned-vari/34895882#34895882", "title": "Updating every single block (4bits) with different value in 64 bit unsigned variable?", "body": "<p>Try the below code. I have tried to copy 0x01, 0x02....0x0f into 16 different nibbles. The code extracts the values and shifts them appropriately combined with the OR operation.</p>\n\n<pre><code>#define NIBBLES   16      /* 64-bit has 16 nibbles */\n#define MASK      0x0FLLU  \n\n\nint main()\n{\n    unsigned int val[NIBBLES] = {0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,\n                                 0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f};\n\n    long long unsigned int num = 0, tmp;\n    int i, shift = 0;\n\n    for (i = 0; i &lt; NIBBLES; i++) { \n        tmp = (val[i] &amp; MASK) &lt;&lt; shift;\n        num = num | tmp;\n        shift = shift + 4;\n    }\n    printf (\"0x%llx\\n\", num);\n\n}\n</code></pre>\n\n<p>Output: 0xfedcba9876543210</p>\n"}], "owner": {"reputation": 5, "user_id": 5814680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15066c198df24bccdef75333dd349376?s=128&d=identicon&r=PG&f=1", "display_name": "erf gds", "link": "https://stackoverflow.com/users/5814680/erf-gds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1453281862, "creation_date": 1453278612, "last_edit_date": 1453279640, "question_id": 34894978, "link": "https://stackoverflow.com/questions/34894978/updating-every-single-block-4bits-with-different-value-in-64-bit-unsigned-vari", "title": "Updating every single block (4bits) with different value in 64 bit unsigned variable?", "body": "<p>I have a variable <code>unsigned __int64 text=0x0;</code> and I need to and update each 4 bits with different values.</p>\n\n<p>text = b64b63...b3b2b1b0\nI have a loop and inside of the loop must be like this :</p>\n\n<pre><code>for(i=0;i&lt;16;i++)\n {\n     b3b2b1b0=a[0]\n     b7b6b5b4=a[1]\n     b11b10b9b8=a[2]\n     ..\n     .. \n     ..\n }\n</code></pre>\n\n<p>I tried this one but didn't work </p>\n\n<pre><code>unsigned __int64 temp=0x0;\nunsigned __int64 index=0x0;\nfor(i=0;i&lt;16;i++)\n {\n    index = (text&gt;&gt;(i*4))&amp;0x0F;\n    temp = a[index];\n    text = text | temp&lt;&lt;(i*4);\n }\n</code></pre>\n\n<p>thank you so much </p>\n"}, {"tags": ["c++", "c", "gcc", "compilation"], "comments": [{"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 4, "creation_date": 1453278723, "post_id": 34894765, "comment_id": 57526881, "body": "Various levels of caching - files, dynamic libraries, etc. Also, there&#39;s a planetary alignment in effect at the moment."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1453280505, "post_id": 34894765, "comment_id": 57527943, "body": "Developers are the same - they are pretty slow until after the second coffee."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1453281021, "post_id": 34894765, "comment_id": 57528276, "body": "What operating system are you using?"}, {"owner": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1453281265, "post_id": 34894765, "comment_id": 57528437, "body": "@BasileStarynkevitch Currently I&#39;m using Ubuntu 15.10, but I noticed it with every Linux I used."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 3, "last_activity_date": 1453280636, "last_edit_date": 1592644375, "creation_date": 1453280290, "answer_id": 34895509, "question_id": 34894765, "link": "https://stackoverflow.com/questions/34894765/why-is-the-first-compilation-of-the-day-slower-than-next-ones/34895509#34895509", "title": "Why is the first compilation of the day slower than next ones?", "body": "<p>Notably because of the <a href=\"https://en.wikipedia.org/wiki/Page_cache\" rel=\"nofollow noreferrer\">page cache</a>. If you have enough RAM, most of the data (including your source code files, and object files also) tend to stay there.</p>\n<p>If that bothers you, use some SSD disks and/or run while drinking your <em>first</em> coffee <em>before</em> your first compilation a command reading all your source code, e.g. on Linux <code>wc *.cc</code> (and you could even make it a <code>crontab</code> job with <code>@reboot</code>); read also <a href=\"http://linuxatemyram.com/\" rel=\"nofollow noreferrer\">http://linuxatemyram.com/</a></p>\n<p>You might also use the <em>suspend-to-disk</em> facility instead of the <em>shutdown</em>: but I don't think it is worth the pain (and I like <code>/tmp/</code> being cleaned at boot time)</p>\n<p><sup>(I am guessing or hoping you are using Linux with a native filesystem, e.g. Ext4 or BTRFS)</sup></p>\n"}, {"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 2, "last_activity_date": 1453281465, "creation_date": 1453281465, "answer_id": 34895912, "question_id": 34894765, "link": "https://stackoverflow.com/questions/34894765/why-is-the-first-compilation-of-the-day-slower-than-next-ones/34895912#34895912", "title": "Why is the first compilation of the day slower than next ones?", "body": "<p>The short answer is caching, possibly at multiple levels.</p>\n\n<p>For example, a lot of modern hard drives have a built in cache, so if some data is being read repeatedly (e.g. the gcc executables, libraries, makefiles, source files) the first access will result in data being in the device cache, and subsequent operations will interact with the cache rather than reading from the platters.    Operations on the cache are must faster than - for example - positioning drive platters for reading.</p>\n\n<p>A number of operating systems also implement some form of page cache, which does a similar thing (just using system RAM as a cache).</p>\n\n<p>Most modern machines have various levels of cache (in devices, managed by the OS, multiple cache levels in the CPU, etc).</p>\n\n<p>Caching can, depending on configuration, affect both read and write operations.   Caches that affect writing (write operations actually write to cache and return, and are committed - such as to a drive - at a later time) are part of the reason operating systems require an explicit shutdown, so they commit all cached writes.</p>\n"}], "owner": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 34895509, "answer_count": 2, "score": 0, "last_activity_date": 1453281465, "creation_date": 1453277841, "last_edit_date": 1453279874, "question_id": 34894765, "link": "https://stackoverflow.com/questions/34894765/why-is-the-first-compilation-of-the-day-slower-than-next-ones", "title": "Why is the first compilation of the day slower than next ones?", "body": "<p>I'm using GCC/G++ for almost all my C and C++ projects for years, and there is something I never understood: the first use of one of them that you do after the start of your machine take always one or two seconds more than every next compilation until you shut down your computer.</p>\n\n<p>As it is only once in a days, it is not really troublesome, but I just wonder why. Does it initialize anything and re-use it then?<br>\nIf yes, does it save something somewhere?<br>\nIf yes, why does it have to reinitialize it everyday?</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 181, "user_id": 5690203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07ded5d2028fb4cb859a69cc6157e8e0?s=128&d=identicon&r=PG&f=1", "display_name": "Kai Iskratsch", "link": "https://stackoverflow.com/users/5690203/kai-iskratsch"}, "edited": false, "score": 3, "creation_date": 1453276243, "post_id": 34894272, "comment_id": 57525719, "body": "you never allocate memory for the struct, tmp just points at null and you write there which will crash the program"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1453276257, "post_id": 34894272, "comment_id": 57525730, "body": "Please oh please try to format your code in a consistent and readable (for others) way. Consistent indentation and extra line-breaks makes wonders for readability (and therefore maintainability)."}, {"owner": {"reputation": 593, "user_id": 5111934, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-9L-bn6u6Euw/AAAAAAAAAAI/AAAAAAAAAjE/Bsk9rmXELzY/photo.jpg?sz=128", "display_name": "Dhananjay Kashyap", "link": "https://stackoverflow.com/users/5111934/dhananjay-kashyap"}, "edited": false, "score": 0, "creation_date": 1453276566, "post_id": 34894272, "comment_id": 57525870, "body": "Try to allocate memory followed by snprintf function to copy string. This will work fine for you."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1453283967, "post_id": 34894272, "comment_id": 57530257, "body": "Again, we desperately need a canonical duplicate for &quot;my program copies data into an uninitialized pointer why does it crash&quot;. If anyone got a better duplicate than <a href=\"http://stackoverflow.com/questions/6923574/what-can-cause-segmentation-faults-in-c\">this one</a> please let me know."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 3426015, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001274307959/picture?type=large", "display_name": "user3426015", "link": "https://stackoverflow.com/users/3426015/user3426015"}, "edited": false, "score": 0, "creation_date": 1453278228, "post_id": 34894686, "comment_id": 57526643, "body": "Everything except typecast helps."}, {"owner": {"reputation": 456, "user_id": 5276705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e8bd54c7b2823d28abc6dbee63f3e0b?s=128&d=identicon&r=PG", "display_name": "SKD", "link": "https://stackoverflow.com/users/5276705/skd"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1453278338, "post_id": 34894686, "comment_id": 57526698, "body": "@PaulR  dependent on compiler also. If using C++ compiler for <code>C</code> code, then typecast is needed."}, {"owner": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "edited": false, "score": 1, "creation_date": 1453279292, "post_id": 34894686, "comment_id": 57527183, "body": "Casting the return value of malloc will hide issues such as failure to include <code>stdlib.h</code> in your source file. It&#39;s a bad idea to do in C as a <code>void *</code> can be implicitly casted to any other pointer, so it&#39;s redundant."}], "tags": [], "owner": {"reputation": 111, "user_id": 5748896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ecb54aca15aa5aa8b14ebee01280ab?s=128&d=identicon&r=PG&f=1", "display_name": "Avikalp Srivastava", "link": "https://stackoverflow.com/users/5748896/avikalp-srivastava"}, "is_accepted": false, "score": -1, "last_activity_date": 1453288395, "last_edit_date": 1453288395, "creation_date": 1453277516, "answer_id": 34894686, "question_id": 34894272, "link": "https://stackoverflow.com/questions/34894272/programme-crashes-when-i-try-to-add-data-to-struct/34894686#34894686", "title": "Programme crashes when I try to add data to struct", "body": "<p>The problem is that your have not allocated memory to the pointer to your structure. </p>\n\n<p><code>struct data *temp</code> can't take data in its fields unless your allocate it memory \nof the size of the structure as follows:</p>\n\n<pre><code>temp =  malloc (sizeof(struct data));\n</code></pre>\n\n<p>EDIT: \nRemoved typecast for malloc</p>\n"}, {"comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1453280207, "post_id": 34894757, "comment_id": 57527767, "body": "you should not use <code>assert</code> for checking the return value of <code>malloc</code>:  <a href=\"http://stackoverflow.com/q/17732/3684343\">stackoverflow.com/q/17732/3684343</a>"}], "tags": [], "owner": {"reputation": 109, "user_id": 5123685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDk8V.jpg?s=128&g=1", "display_name": "MatthewT53", "link": "https://stackoverflow.com/users/5123685/matthewt53"}, "is_accepted": true, "score": 2, "last_activity_date": 1453278050, "last_edit_date": 1453278050, "creation_date": 1453277811, "answer_id": 34894757, "question_id": 34894272, "link": "https://stackoverflow.com/questions/34894272/programme-crashes-when-i-try-to-add-data-to-struct/34894757#34894757", "title": "Programme crashes when I try to add data to struct", "body": "<p>The pointer to the data structure that you created does not point to anything in memory since it points to NULL. Hence when you try to call the function <code>strcpy()</code> to copy data into the pointer, the program crashes since it is not copying the data to valid memory.</p>\n\n<p>You might want to do some research into the function <code>malloc()</code> which allows you to allocate memory on the heap for your tmp ptr.</p>\n\n<p>Something like this should suffice:</p>\n\n<pre><code>tmp = malloc(sizeof(struct data));\n</code></pre>\n\n<p>You should also check if the malloc() returned memory that you can use by adding the line:</p>\n\n<pre><code>assert(tmp != NULL);\n</code></pre>\n\n<p>Note: Don't forget to include the <code>&lt;assert.h&gt;</code> library.</p>\n"}], "owner": {"reputation": 7, "user_id": 3426015, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001274307959/picture?type=large", "display_name": "user3426015", "link": "https://stackoverflow.com/users/3426015/user3426015"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 34894757, "answer_count": 2, "score": -3, "last_activity_date": 1453288395, "creation_date": 1453275998, "last_edit_date": 1453277814, "question_id": 34894272, "link": "https://stackoverflow.com/questions/34894272/programme-crashes-when-i-try-to-add-data-to-struct", "title": "Programme crashes when I try to add data to struct", "body": "<p>I have a programme that adds new positions to structure list. Structure definition is:</p>\n\n<pre><code>struct data\n{\n    char name[50];\n    char surname[50];\n    float income;\n    float taxed_income;\n    char account[20];\n    char id[10];\n    struct data *next, *prev;\n};\n</code></pre>\n\n<p>and function that adds data is :</p>\n\n<pre><code>struct data* add_element()\n\n{\n    struct data *tmp;\n    bool flag=true;\n    float input;\n    char inpt[50];\n    tmp = NULL;\n    do {\n        printf(\"Id: \");\n        fgets(inpt,49,stdin);\n        if(head != NULL)\n            flag=id_check(inpt);\n    }\n    while(!flag);\n    strcpy(tmp-&gt;id,inpt);\n    do {\n        printf(\"Name: \");\n        fgets(inpt,49,stdin);\n        flag=check(inpt);\n    }\n    while(!flag);\n    strcpy(tmp-&gt;name,inpt);\n    do {\n        printf(\"Surname: \");\n        fgets(inpt,49,stdin);\n        flag=check(inpt);\n     }\n    while(!flag);\n    strcpy(tmp-&gt;surname,inpt);\n    do {\n        printf(\"Account: \");\n        fgets(inpt,49,stdin);\n        flag=check_num(inpt);\n    }\n    while(!flag);\n    strcpy(tmp-&gt;account,inpt);\n    printf(\"Income: \");\n    scanf(\"%f\",&amp;input);\n    tmp-&gt;income=input;\n    printf(\"taxed Income: \");\n    scanf(\"%f\",&amp;input);\n    tmp-&gt;taxed_income=input;\n    return tmp;\n}\n</code></pre>\n\n<p>programme crashes when I reach first strcpy. all checks are assuring that input meet project spec.</p>\n"}, {"tags": ["c", "char", "stack", "parameter-passing"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1453275765, "post_id": 34894097, "comment_id": 57525484, "body": "Are you sure about the C++ tag? This looks like C. In C++ this would be far, far easier."}, {"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 1, "creation_date": 1453275810, "post_id": 34894097, "comment_id": 57525507, "body": "Pointless. With <code>std::string</code>, all these troubles simply don&#39;t exist. Or is it a tag error and you are doing C programming ? Then please edit tag."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1453276047, "post_id": 34894097, "comment_id": 57525628, "body": "Your code sample is bogus. <code>tmp[++i] = 0x0f;</code> <code>i</code> isn&#39;t declared at this point."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 1, "creation_date": 1453276250, "post_id": 34894097, "comment_id": 57525723, "body": "Aside from your Program having some serious flaws already pointed out by others, how do you determine that the stack is corrupted?"}, {"owner": {"reputation": 4158, "user_id": 1228449, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/03c6c1563ed94f735579a66abd200ebb?s=128&d=identicon&r=PG", "display_name": "Johannes S.", "link": "https://stackoverflow.com/users/1228449/johannes-s"}, "edited": false, "score": 2, "creation_date": 1453276308, "post_id": 34894097, "comment_id": 57525756, "body": "You&#39;re leaking memory by calling <code>malloc</code> twice"}, {"owner": {"reputation": 1, "user_id": 5814460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f119d4993b265d24d57ce79aac561aa?s=128&d=identicon&r=PG&f=1", "display_name": "Brady", "link": "https://stackoverflow.com/users/5814460/brady"}, "edited": false, "score": 0, "creation_date": 1453285615, "post_id": 34894097, "comment_id": 57531353, "body": "Yeah, sorry, forgot the <code>i</code> initialization in the snippet. I&#39;ve not copied the original code. It&#39;s more a sample."}, {"owner": {"reputation": 1, "user_id": 5814460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f119d4993b265d24d57ce79aac561aa?s=128&d=identicon&r=PG&f=1", "display_name": "Brady", "link": "https://stackoverflow.com/users/5814460/brady"}, "edited": false, "score": 0, "creation_date": 1453285695, "post_id": 34894097, "comment_id": 57531406, "body": "When I remove the second <code>malloc</code> the error still exists. It&#39;s Visual Studio which mentions the stack corruption by <code>Run-Time Check Failure - Stack around the variable &#39;tmp&#39; was corrupted</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5814460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f119d4993b265d24d57ce79aac561aa?s=128&d=identicon&r=PG&f=1", "display_name": "Brady", "link": "https://stackoverflow.com/users/5814460/brady"}, "edited": false, "score": 0, "creation_date": 1453285773, "post_id": 34894251, "comment_id": 57531462, "body": "Yeah, sorry, fogot the <code>i</code> initialization in the snippet. Also if removing the second <code>malloc</code> it&#39;s failing with <code>Run-Time Check Failure - Stack around the variable &#39;tmp&#39; was corrupted</code>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 1, "user_id": 5814460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f119d4993b265d24d57ce79aac561aa?s=128&d=identicon&r=PG&f=1", "display_name": "Brady", "link": "https://stackoverflow.com/users/5814460/brady"}, "edited": false, "score": 0, "creation_date": 1453286919, "post_id": 34894251, "comment_id": 57532247, "body": "That&#39;s because of some bug in your actual code, a bug which isn&#39;t present in this snippet. We&#39;re not psychic."}, {"owner": {"reputation": 1, "user_id": 5814460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f119d4993b265d24d57ce79aac561aa?s=128&d=identicon&r=PG&f=1", "display_name": "Brady", "link": "https://stackoverflow.com/users/5814460/brady"}, "edited": false, "score": 0, "creation_date": 1453292956, "post_id": 34894251, "comment_id": 57536424, "body": "I am really sorry, but this time it&#39;s the code. There is nothing more than the code in the snippet. Just the function name <code>myFunction</code> differs.. Nevertheless, I&#39;ve solved my problem by myself. The for loop must be changed from <code>i&lt;BLOCKSIZE</code> to <code>i&lt;(BLOCKSIZE-1)</code>."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 1, "user_id": 5814460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f119d4993b265d24d57ce79aac561aa?s=128&d=identicon&r=PG&f=1", "display_name": "Brady", "link": "https://stackoverflow.com/users/5814460/brady"}, "edited": false, "score": 0, "creation_date": 1453293167, "post_id": 34894251, "comment_id": 57536577, "body": "@Brady: The current code <b>still</b> can&#39;t compile, it fails on the very first line. <code>BLOCKSIZE</code>  has an initializer but no type. The loop length is perfectly OK. If you think you need one byte less, it&#39;s because you&#39;re treating the output as a string (not a block of bytes). A string would need one extra char for <code>\\0</code>. But you shouldn&#39;t copy a string with <code>memcpy</code> in the first place."}, {"owner": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "reply_to_user": {"reputation": 1, "user_id": 5814460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f119d4993b265d24d57ce79aac561aa?s=128&d=identicon&r=PG&f=1", "display_name": "Brady", "link": "https://stackoverflow.com/users/5814460/brady"}, "edited": false, "score": 0, "creation_date": 1453293722, "post_id": 34894251, "comment_id": 57536965, "body": "@Brady. <code>(BLOCKSIZE-1)</code> Why do you think that would makes a difference? (Hint: It shouldn&#39;t...)"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 2, "last_activity_date": 1453275912, "creation_date": 1453275912, "answer_id": 34894251, "question_id": 34894097, "link": "https://stackoverflow.com/questions/34894097/passing-char-to-a-function-in-combination-with-memcpy/34894251#34894251", "title": "Passing char* to a function in combination with memcpy", "body": "<p>Your first problem is that you <code>malloc</code> twice, before and in the function. The <code>malloc</code> outside the call (second line of <code>main</code>) is leaked.</p>\n\n<p>The second problem (and this tells me you didn't even compile the code) is that you use <code>i</code> before defining it.</p>\n"}], "owner": {"reputation": 1, "user_id": 5814460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f119d4993b265d24d57ce79aac561aa?s=128&d=identicon&r=PG&f=1", "display_name": "Brady", "link": "https://stackoverflow.com/users/5814460/brady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453294387, "creation_date": 1453275470, "last_edit_date": 1453294387, "question_id": 34894097, "link": "https://stackoverflow.com/questions/34894097/passing-char-to-a-function-in-combination-with-memcpy", "title": "Passing char* to a function in combination with memcpy", "body": "<p>usually a basic question, but maybe I am just too stupid. I try to pass an <code>char *</code> as output trought the parameter of a function. Inside the function I create a temporary <code>char *</code> which I want to <code>memcpy</code> to the address I've passed. Here is the code:</p>\n\n<pre><code>#define BLOCKSIZE=1024\nint myFunction(char *s, char **out) {\n  int i = strlen(s);\n  *out = (char *)malloc(BLOCKSIZE);\n  char tmp[BLOCKSIZE];\n\n  strcpy(tmp, s);\n  tmp[++i] = 0x0f;\n\n  for(int i=strlen(s);i &lt; BLOCKSIZE; i++) {\n    tmp[i] = 0xcc;\n  }\n\n  memcpy(*out, tmp, BLOCKSIZE);\n\n  return 0;\n}\n\nint main() {\n  char *s = \"Hello World\";\n  char *o = (char *)malloc(BLOCKSIZE);\n\n  myFunction(s, &amp;o);\n\n}\n</code></pre>\n\n<p>The problem is, the stack gets corrupted after it jumps out of the function <code>myFunction</code>..</p>\n\n<p>Is there another way to do it?</p>\n\n<p>Thank you in advance!</p>\n\n<p>Best,</p>\n\n<p><strong>Update: Problem solved</strong>\nThe for loop part <code>i &lt; BLOCKSIZE</code> must be changed to <code>i &lt; (BLOCKSIZE - 1)</code>.</p>\n"}, {"tags": ["c++", "c", "for-loop", "comparison"], "comments": [{"owner": {"reputation": 3728, "user_id": 1779504, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/K8LTB.png?s=128&g=1", "display_name": "csharpfolk", "link": "https://stackoverflow.com/users/1779504/csharpfolk"}, "edited": false, "score": 3, "creation_date": 1453274849, "post_id": 34893717, "comment_id": 57525041, "body": "If <code>N == MAX_INT_VALUE</code> then <code>N+1</code> overflows and they are different"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 3728, "user_id": 1779504, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/K8LTB.png?s=128&g=1", "display_name": "csharpfolk", "link": "https://stackoverflow.com/users/1779504/csharpfolk"}, "edited": false, "score": 0, "creation_date": 1453277027, "post_id": 34893717, "comment_id": 57526088, "body": "@csharpfolk: That would be <code>INT_MAX</code> in C, and <code>std::numeric_limits&lt;int&gt;::max()</code> in C++. Overflow makes <code>INT_MAX+1</code> undefined, so you can&#39;t reason about it anymore, but <code>N &lt;= INT_MAX</code> is rather pointless anyway (assuming <code>N</code> is an int, of course)."}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 4353308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-tYw4rRiEFc0/AAAAAAAAAAI/AAAAAAAAAFw/MvnrC_bIE70/photo.jpg?sz=128", "display_name": "astrohsy", "link": "https://stackoverflow.com/users/4353308/astrohsy"}, "edited": false, "score": 1, "creation_date": 1453274560, "post_id": 34893777, "comment_id": 57524872, "body": "Oh.. I found out that it works fine when I cast sqrtl(GCD) to (long long) thanks!"}], "tags": [], "owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "is_accepted": false, "score": 2, "last_activity_date": 1453277443, "last_edit_date": 1453277443, "creation_date": 1453274383, "answer_id": 34893777, "question_id": 34893717, "link": "https://stackoverflow.com/questions/34893717/are-i-n1-and-i-n-different/34893777#34893777", "title": "Are i &lt; N+1 and i &lt;= N different?", "body": "<p><code>sqrtl</code> return <code>long double</code> in this case your assumption:</p>\n\n<blockquote>\n  <p>no difference between <code>i &lt;= N</code> and <code>i &lt; N+1</code></p>\n</blockquote>\n\n<p>is wrong.</p>\n"}, {"comments": [{"owner": {"reputation": 303, "user_id": 4353308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-tYw4rRiEFc0/AAAAAAAAAAI/AAAAAAAAAFw/MvnrC_bIE70/photo.jpg?sz=128", "display_name": "astrohsy", "link": "https://stackoverflow.com/users/4353308/astrohsy"}, "edited": false, "score": 0, "creation_date": 1453274775, "post_id": 34893804, "comment_id": 57524995, "body": "I had a  misconception of for-loop.. I thought it would implicitly cast to non-floating type.. Thanks!"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 303, "user_id": 4353308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-tYw4rRiEFc0/AAAAAAAAAAI/AAAAAAAAAFw/MvnrC_bIE70/photo.jpg?sz=128", "display_name": "astrohsy", "link": "https://stackoverflow.com/users/4353308/astrohsy"}, "edited": false, "score": 0, "creation_date": 1453277184, "post_id": 34893804, "comment_id": 57526162, "body": "@Eureuerung: The for-loop casts the <i>result</i> of the comparison to <code>int</code> or <code>bool</code>. (This is why you shouldn&#39;t ask C/C++ questions: C and C++ have subtle differences like this. )"}, {"owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1453277373, "post_id": 34893804, "comment_id": 57526245, "body": "@MSalters: I think Eureuerung was talking about right side of comparison rather than full condition."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1453278252, "post_id": 34893804, "comment_id": 57526658, "body": "@ZbynekVyskovsky-kvr000: A for-loop can contain pretty much any expression as its conditional expression. Which part(s) of the subexpression would be cast? I.e. <code>for (char* p = ...; p &amp;&amp; *p; ...)</code> is not an unusual conditional expression."}], "tags": [], "owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "is_accepted": true, "score": 15, "last_activity_date": 1453274476, "creation_date": 1453274476, "answer_id": 34893804, "question_id": 34893717, "link": "https://stackoverflow.com/questions/34893717/are-i-n1-and-i-n-different/34893804#34893804", "title": "Are i &lt; N+1 and i &lt;= N different?", "body": "<p>This is true only for integer values. As <code>sqrtl</code> returns <code>long double</code>, in case it's fractional then for the fraction it will still differ if you compare original with fraction and <code>+1</code> where one another integer fits:</p>\n\n<pre><code>! 2 &lt;= 1.5\n2 &lt; 1.5+1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "edited": false, "score": 0, "creation_date": 1453290700, "post_id": 34894843, "comment_id": 57534850, "body": "There is a difference in some cases. See accepted answer."}], "tags": [], "owner": {"reputation": 1, "user_id": 5425056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29086c6ab4ae2900431cb51b9dd2984e?s=128&d=identicon&r=PG&f=1", "display_name": "Manish Choudhary", "link": "https://stackoverflow.com/users/5425056/manish-choudhary"}, "is_accepted": false, "score": 0, "last_activity_date": 1453291761, "last_edit_date": 1453291761, "creation_date": 1453278104, "answer_id": 34894843, "question_id": 34893717, "link": "https://stackoverflow.com/questions/34893717/are-i-n1-and-i-n-different/34894843#34894843", "title": "Are i &lt; N+1 and i &lt;= N different?", "body": "<p>well,there is no difference between <code>i&lt;=n</code> and <code>i &lt; n+1</code> as both of them runs till only <code>n</code> but what u doing is <code>sqrt</code> which returns long double and for them not necessarily to be same.</p>\n"}], "owner": {"reputation": 303, "user_id": 4353308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-tYw4rRiEFc0/AAAAAAAAAAI/AAAAAAAAAFw/MvnrC_bIE70/photo.jpg?sz=128", "display_name": "astrohsy", "link": "https://stackoverflow.com/users/4353308/astrohsy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 3, "accepted_answer_id": 34893804, "answer_count": 3, "score": 4, "last_activity_date": 1453291761, "creation_date": 1453274141, "last_edit_date": 1453281696, "question_id": 34893717, "link": "https://stackoverflow.com/questions/34893717/are-i-n1-and-i-n-different", "title": "Are i &lt; N+1 and i &lt;= N different?", "body": "<p>I used to know that There is no difference between <code>i &lt;= N</code> and <code>i &lt; N+1</code> <br>\nHowever, when I enter <code>6 6</code> to program. <br>\n<br>\nif <code>i &lt;= N</code> then it print <br></p>\n\n<blockquote>\n  <p>1 6 6 <br> 6 1 1 <br> 2 3 3 <br> 3 2 2</p>\n</blockquote>\n\n<p>otherwise </p>\n\n<blockquote>\n  <p>1 6 6 <br> 6 1 1 <br> 2 3 3 <br> 3 2 2 <br> 3 2 2 <br> 2 3 3</p>\n</blockquote>\n\n<p><br>\nI can't figure out why it make a difference</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\ntypedef long long LNT;\n\nLNT gcd(LNT a, LNT b)\n{\n    if( b == 0)\n        return a;\n\n    return gcd(b, a%b);\n}\n\nint main()\n{\n    LNT red, green;\n    LNT GCD;\n    cin &gt;&gt; red &gt;&gt; green;\n\n    GCD = gcd(red, green);\n\n    //for(LNT i = 1; i&lt;sqrtl(GCD)+1; i++)\n    for(LNT i = 1; i&lt;=sqrtl(GCD); i++)   // &lt;- This Line cause the difference \n    {\n        if( GCD % i == 0)\n        {\n            cout &lt;&lt; i &lt;&lt; \" \" &lt;&lt; red/i &lt;&lt; \" \" &lt;&lt; green/i &lt;&lt;endl;\n            if( i != GCD/i )\n            {\n                LNT k = GCD/i;\n                cout &lt;&lt; k &lt;&lt; \" \" &lt;&lt; red/k &lt;&lt; \" \" &lt;&lt; green/k &lt;&lt;endl;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "clang"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453277525, "post_id": 34893361, "comment_id": 57526302, "body": "<code>3</code> has type <code>signed int</code>. You should always be thinking about types when writing code containing shifts ."}], "answers": [{"comments": [{"owner": {"reputation": 1516, "user_id": 173586, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d2eb309aa6ae765ae391a92058d303aa?s=128&d=identicon&r=PG", "display_name": "lundman", "link": "https://stackoverflow.com/users/173586/lundman"}, "edited": false, "score": 0, "creation_date": 1453333296, "post_id": 34893452, "comment_id": 57561090, "body": "Perfect, showed one more in my code, and one in XNU sources which would be harder to fix :)"}], "tags": [], "owner": {"reputation": 31428, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "is_accepted": true, "score": 2, "last_activity_date": 1453338332, "last_edit_date": 1453338332, "creation_date": 1453273211, "answer_id": 34893452, "question_id": 34893361, "link": "https://stackoverflow.com/questions/34893361/warning-for-clangs-shifting-bare-integer-values-default-to-32-bit/34893452#34893452", "title": "Warning for clang&#39;s shifting bare integer values default to 32 bit", "body": "<p>The flag you are looking for is:  </p>\n\n<pre><code>-Wshift-sign-overflow  \n</code></pre>\n\n<p>Although, unlike gcc, I recommend using clang's compiler flag:  </p>\n\n<pre><code>-Weverything  \n</code></pre>\n\n<p>That would enable <code>-Wshift-sign-overflow</code> as well.  </p>\n"}], "owner": {"reputation": 1516, "user_id": 173586, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/d2eb309aa6ae765ae391a92058d303aa?s=128&d=identicon&r=PG", "display_name": "lundman", "link": "https://stackoverflow.com/users/173586/lundman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 34893452, "answer_count": 1, "score": 0, "last_activity_date": 1453338332, "creation_date": 1453272894, "question_id": 34893361, "link": "https://stackoverflow.com/questions/34893361/warning-for-clangs-shifting-bare-integer-values-default-to-32-bit", "title": "Warning for clang&#39;s shifting bare integer values default to 32 bit", "body": "<p>So, in the upstream sources, we have this line</p>\n\n<pre><code>rc_c_max = allmem - (3 &lt;&lt; 30);\n</code></pre>\n\n<p>Upstream which typically uses gcc, does things \"as expected\". <code>allmem</code> is uint64_t. \nBut with clang, it appears to assume \"3\" is 32 bit (or maybe signed) and the results are not \"as expected\". An easy fix for it is to change it to</p>\n\n<pre><code>rc_c_max = allmem - (3ULL &lt;&lt; 30);\n</code></pre>\n\n<p>and everything works. Changing all the bare-interger shifts, by working out/guessing which needs to be corrected is tedious, <strong>is there a warning I can enable for clang to point this out?</strong> <code>-Wall -Wextra</code> does not complain about this line.</p>\n\n<p>Output:</p>\n\n<pre><code>1/19/16 9:25:30.000 AM kernel[0]: allmem - (3 &lt;&lt; 30) : 0x373333000 : 14817636352\n1/19/16 9:25:30.000 AM kernel[0]: allmem - (3ULL &lt;&lt; 30) : 0x273333000 : 10522669056\n</code></pre>\n"}, {"tags": ["c", "gcc", "ld", "elf", "objcopy"], "comments": [{"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 1, "creation_date": 1453271978, "post_id": 34893084, "comment_id": 57523770, "body": "Where else does the binary file take input from? Please be more specific about the structure of the desired output."}, {"owner": {"reputation": 7502, "user_id": 251248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/98b54e11e17d4f7070e8b3b0d2c25370?s=128&d=identicon&r=PG", "display_name": "Gnurou", "link": "https://stackoverflow.com/users/251248/gnurou"}, "reply_to_user": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1453272248, "post_id": 34893084, "comment_id": 57523866, "body": "Added a paragraph with the details you asked - sorry for having been unclear."}], "owner": {"reputation": 7502, "user_id": 251248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/98b54e11e17d4f7070e8b3b0d2c25370?s=128&d=identicon&r=PG", "display_name": "Gnurou", "link": "https://stackoverflow.com/users/251248/gnurou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453272721, "creation_date": 1453271803, "last_edit_date": 1453272721, "question_id": 34893084, "link": "https://stackoverflow.com/questions/34893084/weaving-a-binary-file-from-an-object-file-using-ld-and-objcopy", "title": "Weaving a binary file from an object file using LD and objcopy", "body": "<p>I am trying to build a custom binary file which data mostly comes from a .o file, compiled from a big C file which looks like the following:</p>\n\n<pre><code>int a[] = { ... };\nint b[] = { ... };\nint c[] = { ... };\n</code></pre>\n\n<p>This C file basically contains a big set of data arrays, all declared within the same section. An important note here is that I cannot modify the content of this C file.</p>\n\n<p>Is it possible, using LD scripts, objcopy, or any other tool, to weave a set of output binary files containg just one or a few of these variables, in a specific order (not necessarily the same order as they appear in the C file)?</p>\n\n<p>I tried to use a LD script for this, but the finest granularity of inclusion seems to be the section of an object file. To achieve what I want I would need to be able to reference symbols directly.</p>\n\n<p>The output will ultimately be a simple binary file (generated using <em>objcopy -Obinary</em>), containing only the concatenation of the desired arrays. So for this question we can assume that I only need to output all data in a single section (i.e. there is no code, nor is there any other input than this big C file).</p>\n"}, {"tags": ["c", "arrays", "file"], "comments": [{"owner": {"reputation": 364, "user_id": 4396180, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pYtaY.png?s=128&g=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/4396180/mohammad"}, "edited": false, "score": 1, "creation_date": 1453271852, "post_id": 34893053, "comment_id": 57523723, "body": "Shouldn&#39;t you increment <code>i</code>?"}, {"owner": {"reputation": 5, "user_id": 5432109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57657632549f19e6d6da0fb752abf4be?s=128&d=identicon&r=PG&f=1", "display_name": "Vendetta Hazard", "link": "https://stackoverflow.com/users/5432109/vendetta-hazard"}, "reply_to_user": {"reputation": 364, "user_id": 4396180, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/pYtaY.png?s=128&g=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/4396180/mohammad"}, "edited": false, "score": 0, "creation_date": 1453272000, "post_id": 34893053, "comment_id": 57523776, "body": "im doing so when writing [i+1]."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1453272017, "post_id": 34893053, "comment_id": 57523784, "body": "The <code>%c</code> format is for single letters. For strings, that is char arrays, use <code>%s</code>. It is good that you specify a maximum length in the formats, but the<code>scanf</code> family of functions requires this to be one less than the buffer size."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1453272053, "post_id": 34893053, "comment_id": 57523797, "body": "<code>char nom[750]</code> --&gt; <code>char nom[30][25+1] ={{0}}</code>"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1453272064, "post_id": 34893053, "comment_id": 57523800, "body": "@VendettaHazard: No. <code>i</code> will always be 0 and <code>i + 1</code> will therefore always be 1. You need <code>i = i + 1</code> or <code>i += 1</code> or <code>i++</code>."}, {"owner": {"reputation": 5, "user_id": 5432109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57657632549f19e6d6da0fb752abf4be?s=128&d=identicon&r=PG&f=1", "display_name": "Vendetta Hazard", "link": "https://stackoverflow.com/users/5432109/vendetta-hazard"}, "edited": false, "score": 0, "creation_date": 1453272548, "post_id": 34893053, "comment_id": 57524007, "body": "why is stackoverflow not a good place for homework?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453276758, "post_id": 34893053, "comment_id": 57525965, "body": "It&#39;s onl a bad place for homework indirectly.  Students often post cdoe with just &#39;it doesn&#39;t work&#39; or the like, ie. without explaining what happened that should not have happened, what did not happen that should have happened, what error messages were generated, what log entries were generated, what inputs were provided, what outputs were generated, what was found during their own debugging efforts.  Such questions, with their implication that SO contributors should all go over the same ground as the OP has already travelled, in parallel, are depressing if not actually disrespectful:("}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 5432109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57657632549f19e6d6da0fb752abf4be?s=128&d=identicon&r=PG&f=1", "display_name": "Vendetta Hazard", "link": "https://stackoverflow.com/users/5432109/vendetta-hazard"}, "edited": false, "score": 0, "creation_date": 1453273137, "post_id": 34893344, "comment_id": 57524255, "body": "Thank you very much Bluepixy"}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 1, "last_activity_date": 1453273322, "last_edit_date": 1453273322, "creation_date": 1453272791, "answer_id": 34893344, "question_id": 34893053, "link": "https://stackoverflow.com/questions/34893053/extract-file-data-to-4-seperate-tables/34893344#34893344", "title": "Extract file data to 4 seperate tables", "body": "<p>fix sample like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void){\n    FILE *entree;\n\n    char nom[30][25+1] ={{0}}, poste[30];\n    float nbHeure[30], taux[30];\n    int i = 0;\n\n    if(entree = fopen(\"employes.dat\", \"r\")) {\n        while(i &lt; 30 &amp;&amp; 4==fscanf(entree, \" %25c %c %f %f\", nom[i], &amp;poste[i], &amp;nbHeure[i], &amp;taux[i])){\n            ++i;\n        }\n        fclose(entree);\n\n        int n = i;\n        for(i = 0; i &lt; n; ++i)\n            printf(\"%s, %c, %.1f, %.2f\\n\", nom[i], poste[i], nbHeure[i], taux[i]);\n    }\n    else\n        printf(\"Impossible d'ouvrir le fichier!\");\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>end trim version.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nchar *trimEnd(char *str){\n    if(!str || !*str)\n        return str;\n    char *endp = strchr(str, '\\0');\n    while(isspace(*--endp)){\n        *endp = 0;\n    }\n    return str;\n}\n\nint main(void){\n    FILE *entree;\n\n    char nom[30][25+1] ={{0}}, poste[30];\n    float nbHeure[30], taux[30];\n    int i = 0;\n\n    if(entree = fopen(\"employes.dat\", \"r\")) {\n        while(i &lt; 30 &amp;&amp; 4==fscanf(entree, \" %25c %c %f %f\", nom[i], &amp;poste[i], &amp;nbHeure[i], &amp;taux[i])){\n            ++i;\n        }\n        fclose(entree);\n\n        int n = i;\n        for(i = 0; i &lt; n; ++i)\n            printf(\"%s, %c, %.1f, %.2f\\n\", trimEnd(nom[i]), poste[i], nbHeure[i], taux[i]);\n    }\n    else\n        printf(\"Impossible d'ouvrir le fichier!\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 183, "user_id": 3601158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tyOqq.jpg?s=128&g=1", "display_name": "ctotolin", "link": "https://stackoverflow.com/users/3601158/ctotolin"}, "is_accepted": false, "score": 0, "last_activity_date": 1453273615, "creation_date": 1453273615, "answer_id": 34893570, "question_id": 34893053, "link": "https://stackoverflow.com/questions/34893053/extract-file-data-to-4-seperate-tables/34893570#34893570", "title": "Extract file data to 4 seperate tables", "body": "<p>I have fixed your code with minimal changes, so you won't lose your initial idea, and I will explain what I did:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n\nFILE *entree;\n\nchar nom[750], poste[30]; \nint i = 0;\nint j = 0;\nint k = 0;\nfloat nbHeure[30], taux[30];\n\nif(entree =fopen(\"employes.dat\", \"r\")) {\n    fscanf(entree, \"%25c %1c %4f %5f\", &amp;nom[j], &amp;poste[i], &amp;nbHeure[i], &amp;taux[i]);\n    while(!feof(entree)) {\n\n        j = j + 25;\n        i = i + 1;\n        fscanf(entree, \"%25c %1c %4f %5f\", &amp;nom[j], &amp;poste[i], &amp;nbHeure[i], &amp;taux[i]);\n\n        if (!feof(entree)) {\n\n        } else {\n            j = j - 25;\n            i = i - 1;\n        }\n\n    }\n    fclose(entree);\n}\n\nelse printf(\"Impossible d'ouvrir le fichier!\");\n\n    printf (\"%s \\n \\n\", nom);\n    printf (\"%s \\n \\n\", poste);\n\n    for (k = 0; k &lt; i; k++) {\n        printf (\"%f \", nbHeure[k]);\n    }\n\n    printf(\"\\n\");\n    for (k = 0; k &lt; i; k++) {\n        printf (\"%f \", taux[k]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I have declared another integer , j</p>\n\n<pre><code>int j = 0;\n</code></pre>\n\n<p>Because the i integer will point to the position inside your arrays in which one element has the size of 1, and the j integer will point to the position inside the array in which every element has the size of more than one (in our case, I counted, it's 25 per name). Let me explain by example:</p>\n\n<p>If j is now 0, the next name we write in the nom array will be starting from position 0. Correct.</p>\n\n<pre><code>j = 0; fscanf(... %25c ... &amp;nom[j]...);\n</code></pre>\n\n<p>Which means all characters from position j=0 to position j=24 (= 25 characters in total) will be filled with the first name from your file. Good</p>\n\n<p>The next name we want to write should start from the ending position of the previous name. Which is 25 exactly. To do this we increase j value by 25 \n    j = j + 25;\nNow the next word will be written starting from j+25 to j+49 . And so on.</p>\n\n<p>One more thing you will notice I did was to add this : </p>\n\n<pre><code>if (!feof(entree)) {\n\n    } else {\n        j = j - 25;\n        i = i - 1;\n    }\n</code></pre>\n\n<p>When reading from a file, you are asking at the top <strong>Is the file over yet?</strong> (feof). If not, continue reading. But the file is not over until you read a special EOF character from the file. When you read it you also try to write the name and tax and poste also, which is not what we want. The if else I wrote simply avoids reading the last line from the file, which resembles the EOF I told you about.</p>\n\n<p>Lastly, I added some printing for your arrays so you can see the results.</p>\n\n<p>Hope this helped.</p>\n"}], "owner": {"reputation": 5, "user_id": 5432109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57657632549f19e6d6da0fb752abf4be?s=128&d=identicon&r=PG&f=1", "display_name": "Vendetta Hazard", "link": "https://stackoverflow.com/users/5432109/vendetta-hazard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1486322811, "creation_date": 1453271653, "last_edit_date": 1486322811, "question_id": 34893053, "link": "https://stackoverflow.com/questions/34893053/extract-file-data-to-4-seperate-tables", "title": "Extract file data to 4 seperate tables", "body": "<p>Having a file named <code>employes.dat</code> that contains data sorted as so:</p>\n\n<pre><code>Tremblay Alain            A 35.0 35.5\nVachon Jean               P 40.0 22.75\nLapalme Justin            O 40.0 15.75\nDeschenes Sylvie          P 35.0 25.0\nLachance Carl             O 37.5 18.0\nLabonte Chantal           P 40.0 20.0\nDoucet Michel             A 40.0 33.75\n</code></pre>\n\n<p>I want to put the names, the letter, the number1 and number2 into 4 separate tables (<code>char names[]</code>, <code>char letter[]</code>, <code>float number1[]</code> and <code>float number2[]</code>).</p>\n\n<p>I tried using this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\n\nint main()\n{\n\nFILE *entree;\n\nchar nom[750], poste[30]; \nint i = 0;\nfloat nbHeure[30], taux[30];\n\nif(entree =fopen(\"employes.dat\", \"r\")) {\n    fscanf(entree, \"%30c %1c %4f %5f\", &amp;nom[i], &amp;poste[i], &amp;nbHeure[i], &amp;taux[i]);\n    while(!feof(entree))\n        fscanf(entree, \"%30c %1c %4f %5f\", &amp;nom[i+1], &amp;poste[i+1], &amp;nbHeure[i+1], &amp;taux[i+1]);\n    fclose(entree);\n}\n\nelse printf(\"Impossible d'ouvrir le fichier!\");\n\nprintf(\"%c\", nom[1]);\n\n    return 0;\n}\n</code></pre>\n\n<p>but it doesn't work... Can someone help me please? Its a homework and I'm just starting programming in C. Don't bother with the names, its french fyi.</p>\n"}, {"tags": ["c", "linux", "gcc", "compiler-construction", "gnu"], "comments": [{"owner": {"reputation": 14052, "user_id": 1004301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a6aacd03deb37cb13cbc8b65e454f2b?s=128&d=identicon&r=PG", "display_name": "Lee Duhem", "link": "https://stackoverflow.com/users/1004301/lee-duhem"}, "edited": false, "score": 0, "creation_date": 1453270041, "post_id": 34892601, "comment_id": 57523033, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6515583/need-help-with-glibc-source\">Need help with glibc source</a>"}, {"owner": {"reputation": 305, "user_id": 5720645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eca5093837cc98223d489eaedd1d32aa?s=128&d=identicon&r=PG&f=1", "display_name": "Programmer123", "link": "https://stackoverflow.com/users/5720645/programmer123"}, "reply_to_user": {"reputation": 14052, "user_id": 1004301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a6aacd03deb37cb13cbc8b65e454f2b?s=128&d=identicon&r=PG", "display_name": "Lee Duhem", "link": "https://stackoverflow.com/users/1004301/lee-duhem"}, "edited": false, "score": 0, "creation_date": 1453270515, "post_id": 34892601, "comment_id": 57523229, "body": "Thank you. Checked the first 10 pages of Google and didn&#39;t see this."}], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 5720645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eca5093837cc98223d489eaedd1d32aa?s=128&d=identicon&r=PG&f=1", "display_name": "Programmer123", "link": "https://stackoverflow.com/users/5720645/programmer123"}, "edited": false, "score": 0, "creation_date": 1453272719, "post_id": 34893039, "comment_id": 57524091, "body": "Exactly what I was looking for. Thank you."}], "tags": [], "owner": {"reputation": 36477, "user_id": 75501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8f1164e56ce1dbdc12395e0a36c60dcd?s=128&d=identicon&r=PG", "display_name": "Sam Liao", "link": "https://stackoverflow.com/users/75501/sam-liao"}, "is_accepted": true, "score": 20, "last_activity_date": 1453271610, "creation_date": 1453271610, "answer_id": 34893039, "question_id": 34892601, "link": "https://stackoverflow.com/questions/34892601/what-does-the-weak-alias-function-do-and-where-is-it-defined/34893039#34893039", "title": "what does the weak_alias function do and where is it defined", "body": "<p>from <a href=\"https://github.com/lattera/glibc/blob/master/include/libc-symbols.h\" rel=\"noreferrer\">https://github.com/lattera/glibc/blob/master/include/libc-symbols.h</a></p>\n\n<pre><code>/* Define ALIASNAME as a weak alias for NAME.\n   If weak aliases are not available, this defines a strong alias.  */\n# define weak_alias(name, aliasname) _weak_alias (name, aliasname)\n# define _weak_alias(name, aliasname) \\\n  extern __typeof (name) aliasname __attribute__ ((weak, alias (#name)));\n</code></pre>\n\n<p>About weak symbol: </p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Weak_symbol\" rel=\"noreferrer\">https://en.wikipedia.org/wiki/Weak_symbol</a></p>\n"}, {"tags": [], "owner": {"reputation": 583, "user_id": 8135257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c32514b6e4788cbdee58240a728f4d24?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Stafeyev", "link": "https://stackoverflow.com/users/8135257/anton-stafeyev"}, "is_accepted": false, "score": 2, "last_activity_date": 1585675103, "creation_date": 1585675103, "answer_id": 60956272, "question_id": 34892601, "link": "https://stackoverflow.com/questions/34892601/what-does-the-weak-alias-function-do-and-where-is-it-defined/60956272#60956272", "title": "what does the weak_alias function do and where is it defined", "body": "<p>It is a macro that does the following:</p>\n\n<p>It declares a weak function, if you didnt provide a strong symbol name for that function it will call the function you have laised it to. for example</p>\n\n<pre><code>int _foo(){ return 1;}\n\n//And weak alias\nint __attribute__((weak, alias(\"_foo\"))) foo();\n</code></pre>\n\n<p>So if you haven't provided actual implementation for foo it will basically use _foo and return 1.</p>\n"}], "owner": {"reputation": 305, "user_id": 5720645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eca5093837cc98223d489eaedd1d32aa?s=128&d=identicon&r=PG&f=1", "display_name": "Programmer123", "link": "https://stackoverflow.com/users/5720645/programmer123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10220, "favorite_count": 3, "accepted_answer_id": 34893039, "answer_count": 2, "score": 17, "last_activity_date": 1585675103, "creation_date": 1453269740, "question_id": 34892601, "link": "https://stackoverflow.com/questions/34892601/what-does-the-weak-alias-function-do-and-where-is-it-defined", "title": "what does the weak_alias function do and where is it defined", "body": "<p>So I'm looking through the source of gcc compiler and I've come along this in fork.c:</p>\n\n<pre><code>int\n__fork ()\n{\n  __set_errno (ENOSYS);\n  return -1;\n}\nlibc_hidden_def (__fork)\nstub_warning (fork)\n\nweak_alias (__fork, fork)\n#include &lt;stub-tag.h&gt;\n</code></pre>\n\n<p>I'm trying to figure out what weak_alias does. I've used the grep command inside the glibc source files to find all occurrences of #define weak_alias:</p>\n\n<pre><code>grep -r \"#define weak_alias\"\n</code></pre>\n\n<p>I've found many occurrences of the macro:</p>\n\n<pre><code>#define weak_alias(n, a)\n</code></pre>\n\n<p>but the macros don't actually explain anything. They just define that statement they don't show how its being replaced. For example one occurrence is in profil.c:</p>\n\n<pre><code>/* Turn off the attempt to generate ld aliasing records. */\n#undef weak_alias\n#define weak_alias(a,b)\n</code></pre>\n\n<p>So any ideas what weak_alias does and where it is being defined?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 328, "user_id": 3833836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1600d7f45b37c0d8b9e8b828170b4169?s=128&d=identicon&r=PG&f=1", "display_name": "SadiRubaiyet", "link": "https://stackoverflow.com/users/3833836/sadirubaiyet"}, "edited": false, "score": 6, "creation_date": 1453269735, "post_id": 34892550, "comment_id": 57522940, "body": "you can use a ternary operator for that logic and write return i != j  ? -1 : 1;"}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 2, "creation_date": 1453270769, "post_id": 34892550, "comment_id": 57523342, "body": "<code>write a simple function that returns 1 or -1 depending on the equality of two int values</code> Just a comment, but in the <code>C</code> world it would be a rather unusual design choice (or requirement) for what is essentially a boolean function to return <code>-1</code> or <code>1</code>. Far more common would be to return <code>0</code> or <code>1</code> (or anything <code>!= 0</code> for that matter) in which case it would all reduce to <code>return i == j;</code>."}, {"owner": {"reputation": 53, "user_id": 3638811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YlxJq.jpg?s=128&g=1", "display_name": "rbecca", "link": "https://stackoverflow.com/users/3638811/rbecca"}, "reply_to_user": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 0, "creation_date": 1453271604, "post_id": 34892550, "comment_id": 57523629, "body": "@dxiv Thank you for the constructive and valid criticism; you are right\u2014I should be using either a return 0 or 1 value given that my main function does return a 0"}, {"owner": {"reputation": 53, "user_id": 3638811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YlxJq.jpg?s=128&g=1", "display_name": "rbecca", "link": "https://stackoverflow.com/users/3638811/rbecca"}, "reply_to_user": {"reputation": 328, "user_id": 3833836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1600d7f45b37c0d8b9e8b828170b4169?s=128&d=identicon&r=PG&f=1", "display_name": "SadiRubaiyet", "link": "https://stackoverflow.com/users/3833836/sadirubaiyet"}, "edited": false, "score": 0, "creation_date": 1453271809, "post_id": 34892550, "comment_id": 57523708, "body": "@SadiRubaiyet Many thanks for naming the term that I could not think of (ternary operator). Given the prevalence of return statements utilizing it (from what I can see on Google), I think this would be a perfectly readable choice to utilize in my C code in the future."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453277047, "post_id": 34892550, "comment_id": 57526103, "body": "&#39;It&#39;s readable but seems inefficient&#39; - inefficient how?  You should stick with &#39;readable&#39;.  Coding is very easy, testing is less so and debugging is very hard.  Go with the coding style that reduces overall work.  &#39;Clever&#39; coding is often just bad coding."}, {"owner": {"reputation": 53, "user_id": 3638811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YlxJq.jpg?s=128&g=1", "display_name": "rbecca", "link": "https://stackoverflow.com/users/3638811/rbecca"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453277827, "post_id": 34892550, "comment_id": 57526449, "body": "@MartinJames &quot;Inefficient&quot; was perhaps the incorrect term to use\u2014perhaps &quot;lacking in style&quot; would be a better term in this case as in my current course we are penalized for any written function over 5 lines (not including switch statements). I was therefore trying to think of the best way to write a function that was both readable, functional, and concise with minimal trade-offs"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453282625, "post_id": 34892550, "comment_id": 57529352, "body": "@rbecca Ask your prof/TA if that penalty was intended to instruct students to write code that is unclear and difficult to debug!  A line with only a block racket, or the like, should not count towards your &#39;five a day&#39;.  I&#39;m giving your course a failed &#39;F&#39; grade :)"}], "answers": [{"comments": [{"owner": {"reputation": 328, "user_id": 3833836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1600d7f45b37c0d8b9e8b828170b4169?s=128&d=identicon&r=PG&f=1", "display_name": "SadiRubaiyet", "link": "https://stackoverflow.com/users/3833836/sadirubaiyet"}, "edited": false, "score": 2, "creation_date": 1453269791, "post_id": 34892600, "comment_id": 57522955, "body": "i was about the say the same thing"}, {"owner": {"reputation": 279739, "user_id": 16076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D29fm.jpg?s=128&g=1", "display_name": "Mitch Wheat", "link": "https://stackoverflow.com/users/16076/mitch-wheat"}, "edited": false, "score": 0, "creation_date": 1453270232, "post_id": 34892600, "comment_id": 57523113, "body": "The question title clearly states: &quot;A More Concise Return Statement&quot;. and that&#39;s what this shows."}, {"owner": {"reputation": 279739, "user_id": 16076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D29fm.jpg?s=128&g=1", "display_name": "Mitch Wheat", "link": "https://stackoverflow.com/users/16076/mitch-wheat"}, "edited": false, "score": 1, "creation_date": 1453272062, "post_id": 34892600, "comment_id": 57523799, "body": "The ternary operator is common place. I would disagree that it is less readable in this case."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1453276776, "post_id": 34892600, "comment_id": 57525976, "body": "The conditional operator has weird side effects though, so it shouldn&#39;t be blindly used as some &quot;cure all&quot;. Consider the following scenario: <code>int a = -1; unsigned int b = 1; long long c = -1;</code> and then do <code>if( (true ? a : b) != c) puts(&quot;-1 != -1&quot;);</code> will print <code>-1 != -1</code>. The bug is caused by the conditional operator&#39;s unintuitive promotion between the 2nd and 3rd operand, which takes place no matter if it is the 2nd or 3rd operand is actually evaluated."}], "tags": [], "owner": {"reputation": 279739, "user_id": 16076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D29fm.jpg?s=128&g=1", "display_name": "Mitch Wheat", "link": "https://stackoverflow.com/users/16076/mitch-wheat"}, "is_accepted": true, "score": 5, "last_activity_date": 1453269839, "last_edit_date": 1453269839, "creation_date": 1453269739, "answer_id": 34892600, "question_id": 34892550, "link": "https://stackoverflow.com/questions/34892550/a-more-concise-return-statement/34892600#34892600", "title": "A More Concise Return Statement", "body": "<p>You can use the ternary operator:</p>\n\n<pre><code>int valueCompare(int i, int j) \n{\n    return (i == j) ? 1 : -1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 279739, "user_id": 16076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D29fm.jpg?s=128&g=1", "display_name": "Mitch Wheat", "link": "https://stackoverflow.com/users/16076/mitch-wheat"}, "edited": false, "score": 0, "creation_date": 1453270071, "post_id": 34892676, "comment_id": 57523047, "body": "Ternary opertor is common place. I would disagree that it is less readable in this case."}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "reply_to_user": {"reputation": 279739, "user_id": 16076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D29fm.jpg?s=128&g=1", "display_name": "Mitch Wheat", "link": "https://stackoverflow.com/users/16076/mitch-wheat"}, "edited": false, "score": 0, "creation_date": 1453270159, "post_id": 34892676, "comment_id": 57523079, "body": "@MitchWheat, if it&#39;s just a simple comparison, yes. But I suppose it is just a contrived example for something that would be rather complex in practice."}, {"owner": {"reputation": 279739, "user_id": 16076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D29fm.jpg?s=128&g=1", "display_name": "Mitch Wheat", "link": "https://stackoverflow.com/users/16076/mitch-wheat"}, "edited": false, "score": 2, "creation_date": 1453270190, "post_id": 34892676, "comment_id": 57523092, "body": "Well, we can only answer the question asked, not some hypothetical problem."}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "reply_to_user": {"reputation": 279739, "user_id": 16076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D29fm.jpg?s=128&g=1", "display_name": "Mitch Wheat", "link": "https://stackoverflow.com/users/16076/mitch-wheat"}, "edited": false, "score": 0, "creation_date": 1453270293, "post_id": 34892676, "comment_id": 57523133, "body": "@MitchWheat, that&#39;s what I am doing. Answering the question asked. I just assume it is a <i>generic</i> question, so I am answering it <i>generically</i>."}, {"owner": {"reputation": 53, "user_id": 3638811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YlxJq.jpg?s=128&g=1", "display_name": "rbecca", "link": "https://stackoverflow.com/users/3638811/rbecca"}, "edited": false, "score": 0, "creation_date": 1453272057, "post_id": 34892676, "comment_id": 57523798, "body": "@JanHudec It slipped my mind that braces are not necessary if there is only one statement after the if/else if/else. Thank you for the reminder!"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453291302, "post_id": 34892676, "comment_id": 57535255, "body": "Codes who use such styles will eventually get around to shoving compound expressions in each section of the ternary and so make debug stepping through their code as difficult as possible for anyone unfortunate enough to need to maintain their code and greatly increasing the need for rewriting/retesting for minor enhancement requirements."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453291480, "post_id": 34892676, "comment_id": 57535389, "body": "Honestly, every time I see multiple, compound expressions in an if, while or return, strung together with nested ternaries, boolean operators, comma operators and no brackets, I want to find the original coder and shove them through a wood chipper."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1453291556, "post_id": 34892676, "comment_id": 57535453, "body": "Note that I&#39;m not actually advocating murder for bad coders here, (though it would clear out the PHP and Android rooms)."}], "tags": [], "owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "is_accepted": false, "score": 2, "last_activity_date": 1453297083, "last_edit_date": 1453297083, "creation_date": 1453269994, "answer_id": 34892676, "question_id": 34892550, "link": "https://stackoverflow.com/questions/34892550/a-more-concise-return-statement/34892676#34892676", "title": "A More Concise Return Statement", "body": "<p>It is readable and it is the compiler's responsibility to make it efficient. Any \"clever\" way of writing it will be <em>less readable</em> and will <em>not</em> be more efficient.</p>\n\n<p>Basically I would leave it at omitting the braces when there is just a single statement and even that is a matter of taste:</p>\n\n<pre><code>if(i != j)\n    return -1;\nelse\n    return 1;\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>if(i != j) {\n    return -1;\n} else {\n    return 1;\n}\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>if(i != j)\n{\n    return -1;\n}\nelse\n{\n    return 1;\n}\n</code></pre>\n\n<p>Of course I can think of many \"clever\" way of writing it from</p>\n\n<pre><code>return (i != j) ? -1 : 1;\n</code></pre>\n\n<p>that is only appropriate for <strong>simple</strong> expressions (i.e. this is ok, but throw in a couple of function calls and it will be totally unreadable) to</p>\n\n<pre><code>return 2 * (i == j) - 1;\n</code></pre>\n\n<p>but <strong>this is barely readable</strong>. You should, however, be able to understand it, because you <em>might</em> see this kind of thing in the wild.</p>\n\n<p>And there is absolutely nothing on either to make them more efficient.</p>\n"}, {"tags": [], "owner": {"reputation": 5718, "user_id": 15068, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7f2aa13cefa67afd0c908bf3b58a5aa8?s=128&d=identicon&r=PG&f=1", "display_name": "Friedrich", "link": "https://stackoverflow.com/users/15068/friedrich"}, "is_accepted": false, "score": 0, "last_activity_date": 1453274627, "last_edit_date": 1453274627, "creation_date": 1453270733, "answer_id": 34892848, "question_id": 34892550, "link": "https://stackoverflow.com/questions/34892550/a-more-concise-return-statement/34892848#34892848", "title": "A More Concise Return Statement", "body": "<p>How about </p>\n\n<pre><code>#define SAME_VALUE 1\n#define DIFFERENT_VALUE -1\n</code></pre>\n\n<p>Or the like ?\nand how about </p>\n\n<pre><code> int valueCompare (int i, int j){\n         return i == j;\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 3, "last_activity_date": 1453275488, "creation_date": 1453275488, "answer_id": 34894101, "question_id": 34892550, "link": "https://stackoverflow.com/questions/34892550/a-more-concise-return-statement/34894101#34894101", "title": "A More Concise Return Statement", "body": "<p>For readability, consider rewriting the function to use boolean logic instead:</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n\nbool isEqual (int i, int j) {\n  return i == j;\n}\n</code></pre>\n\n<p>This is, in my opinion, the most readable form possible.</p>\n\n<hr>\n\n<p>Or alternatively for generic programming/portability/usefulness purposes, you should make a C programming de facto standard \"functor\" for value comparison:</p>\n\n<pre><code>int compare_int (const void* i1, const void* i2)\n{\n  const int* ip1 = i1;\n  const int* ip2 = i2;\n  return *ip1 - *ip2;\n}\n</code></pre>\n\n<p>This has plenty of advantages: </p>\n\n<ul>\n<li>Generic function format.</li>\n<li>Standard. Can be passed to functions like <code>bsearch, qsort</code> etc.</li>\n<li>Mixes equality, lesser than and greater than checks in one single function.</li>\n<li>Compatible with dinosaur compilers.</li>\n</ul>\n"}], "owner": {"reputation": 53, "user_id": 3638811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YlxJq.jpg?s=128&g=1", "display_name": "rbecca", "link": "https://stackoverflow.com/users/3638811/rbecca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 34892600, "answer_count": 4, "score": 0, "last_activity_date": 1453297083, "creation_date": 1453269523, "last_edit_date": 1453274525, "question_id": 34892550, "link": "https://stackoverflow.com/questions/34892550/a-more-concise-return-statement", "title": "A More Concise Return Statement", "body": "<p>I have recently started programming in C and was wondering about a more concise way to write a simple function that returns 1 or -1 depending on the equality of two int values. What I wrote:</p>\n\n<pre><code>int valueCompare(int i, int j) {\n    if (i != j) {\n        return -1;\n    }\n    else {\n        return 1;\n    }\n}\n</code></pre>\n\n<p>It's readable but seems inefficient. I have seen return statements that utilizes a colon and question mark however am not familiar with that style. Does anyone have any recommendations on how to write a more efficient function for this without a loss of readability?</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1453269522, "post_id": 34892503, "comment_id": 57522867, "body": "Why not use <code>strcat</code> ?"}, {"owner": {"reputation": 36477, "user_id": 75501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8f1164e56ce1dbdc12395e0a36c60dcd?s=128&d=identicon&r=PG", "display_name": "Sam Liao", "link": "https://stackoverflow.com/users/75501/sam-liao"}, "edited": false, "score": 0, "creation_date": 1453270804, "post_id": 34892503, "comment_id": 57523359, "body": "what&#39;s your concern about utf-8?"}, {"owner": {"reputation": 43, "user_id": 5813711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d952332b7adf1a11a68388cd6811cf50?s=128&d=identicon&r=PG&f=1", "display_name": "alex murphy", "link": "https://stackoverflow.com/users/5813711/alex-murphy"}, "edited": false, "score": 0, "creation_date": 1453278930, "post_id": 34892503, "comment_id": 57526999, "body": "Actually I was confused. I&#39;m concerned of situations where <code>text+1</code> is not equal to text[1]."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1453284292, "post_id": 34892503, "comment_id": 57530477, "body": "In general, you should avoid <code>strncpy</code>, it is a <a href=\"http://stackoverflow.com/questions/2114896/why-are-strlcpy-and-strlcat-considered-insecure\">dangerous and unsafe function only ever intended to be used for anything but ancient string formats in Unix</a>. Better and safer alternatives are <code>memcpy</code> and <code>strcpy</code> (with buffer size known/checked)."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5813711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d952332b7adf1a11a68388cd6811cf50?s=128&d=identicon&r=PG&f=1", "display_name": "alex murphy", "link": "https://stackoverflow.com/users/5813711/alex-murphy"}, "edited": false, "score": 0, "creation_date": 1453270443, "post_id": 34892565, "comment_id": 57523185, "body": "What if the <code>text</code> buffer isn&#39;t large enough. And if I use <code>strncat</code> I still need to calculate how much empty space is left over in <code>text</code> right?"}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 1, "creation_date": 1453271358, "post_id": 34892565, "comment_id": 57523538, "body": "Please add a note to your solution that a caller function is then responsible for freeing the memory allocated by <code>concat</code> after use."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1453271640, "post_id": 34892565, "comment_id": 57523643, "body": "Yes, <code>strcat</code> simplifies the task \u2013 but it does no size testing and can overflow the destination array, as opposite to the OP&#39;s approach."}], "tags": [], "owner": {"reputation": 1981, "user_id": 1309045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6c64b6bf711fe569da004b4db24aff21?s=128&d=identicon&r=PG", "display_name": "Spade", "link": "https://stackoverflow.com/users/1309045/spade"}, "is_accepted": false, "score": 2, "last_activity_date": 1453272172, "last_edit_date": 1453272172, "creation_date": 1453269583, "answer_id": 34892565, "question_id": 34892503, "link": "https://stackoverflow.com/questions/34892503/index-into-a-char-array-to-append-a-string/34892565#34892565", "title": "Index into a char array to append a string", "body": "<p>This is exactly why strcat exists:</p>\n\n<pre><code>char text[100];\nstrcpy(text, \"Hello\");\n\nchar input[] = \"random\";\nstrcat(text, input);\n</code></pre>\n\n<p>To ensure memory sensitive concatenation preventing overflow, please use the following amendment:</p>\n\n<pre><code>   char *text;\n\n   //allocate memory\n   text = (char *) malloc(15);\n   strcpy(text, \"Hello\");\n\n\n   char input[] = \"random\";\n\n   //reallocate memory\n   text = (char *) realloc(text, strlen(text)+strlen(input) +1);\n   strcat(text, input);\n   free(text);\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5813711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d952332b7adf1a11a68388cd6811cf50?s=128&d=identicon&r=PG&f=1", "display_name": "alex murphy", "link": "https://stackoverflow.com/users/5813711/alex-murphy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1453272172, "creation_date": 1453269248, "last_edit_date": 1453270374, "question_id": 34892503, "link": "https://stackoverflow.com/questions/34892503/index-into-a-char-array-to-append-a-string", "title": "Index into a char array to append a string", "body": "<p>I am doing this to append some text:</p>\n\n<pre><code>char text[100];\nstrcpy(text, \"Hello\");\n\nchar input[] = \"random\";\nstrncpy(text + strlen(text), input, sizeof(text) - strlen(text));\n</code></pre>\n\n<p>I did this and it seems to work fine for ASCII text. But I fear I am not being safe doing pointer arithmetic. What if the input is UTF-8?</p>\n\n<p>FYI, when I do <code>text + strlen(text)</code> I am getting a pointer to the end of the sentence and then appending to the end of the sentence.</p>\n\n<p>i.e. </p>\n\n<p><code>text =&gt; |h|e|l|l|o|NUL||||||....</code></p>\n\n<p><code>text + strlen(text) =&gt; |NUL|||||.....</code></p>\n"}, {"tags": ["c", "arrays", "char", "int"], "comments": [{"owner": {"reputation": 918, "user_id": 3743451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FQT0T.jpg?s=128&g=1", "display_name": "Dr. Stitch", "link": "https://stackoverflow.com/users/3743451/dr-stitch"}, "edited": false, "score": 0, "creation_date": 1453267521, "post_id": 34892137, "comment_id": 57522254, "body": "can you change char p[10]; to int p[10];?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1453267600, "post_id": 34892137, "comment_id": 57522275, "body": "check <code>CHAR_MAX</code> in <code>#include &lt;limits.h&gt;</code>"}, {"owner": {"reputation": 65, "user_id": 4209022, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea51a8bff4a9f45fd9030bbf99bde4a2?s=128&d=identicon&r=PG&f=1", "display_name": "Shawn", "link": "https://stackoverflow.com/users/4209022/shawn"}, "edited": false, "score": 0, "creation_date": 1453267920, "post_id": 34892137, "comment_id": 57522395, "body": "That does work, Dr.Stitch. If i was to change it to <code>int p[10]</code>, would I be able to concatenate strings into the indexes of <code>p</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1761, "user_id": 2641959, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4c6d8336fe8a675f9f20f519faec5fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Mohan", "link": "https://stackoverflow.com/users/2641959/mohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1453267524, "creation_date": 1453267524, "answer_id": 34892171, "question_id": 34892137, "link": "https://stackoverflow.com/questions/34892137/storing-int-value-into-char-p-index/34892171#34892171", "title": "Storing int value into char p[] index", "body": "<p><code>char</code> store only 1 byte value so that you are getting that output. If you change <code>char p[10]</code> to <code>int p[10]</code> you will get output. </p>\n"}, {"tags": [], "owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "is_accepted": false, "score": 0, "last_activity_date": 1453267606, "creation_date": 1453267606, "answer_id": 34892186, "question_id": 34892137, "link": "https://stackoverflow.com/questions/34892137/storing-int-value-into-char-p-index/34892186#34892186", "title": "Storing int value into char p[] index", "body": "<p><code>char</code> is simply not big enough to store <code>21345</code>. Therefore compiler  takes just low 8 bits and puts them into <code>char</code>, so it becomes <code>97</code>. When passing to printf it will convert it back to <code>int</code> but the highest bits are already lost.</p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 4209022, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea51a8bff4a9f45fd9030bbf99bde4a2?s=128&d=identicon&r=PG&f=1", "display_name": "Shawn", "link": "https://stackoverflow.com/users/4209022/shawn"}, "edited": false, "score": 0, "creation_date": 1453267752, "post_id": 34892190, "comment_id": 57522331, "body": "Well that does solve the problem I posted! If I was to change it to <code>int p[10]</code>, would I be able to put concatenate strings into the indexes of <code>p</code>?"}, {"owner": {"reputation": 401, "user_id": 3201111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/750db2c25fc926e752f60f6de95ed1c0?s=128&d=identicon&r=PG&f=1", "display_name": "cimarron", "link": "https://stackoverflow.com/users/3201111/cimarron"}, "reply_to_user": {"reputation": 65, "user_id": 4209022, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea51a8bff4a9f45fd9030bbf99bde4a2?s=128&d=identicon&r=PG&f=1", "display_name": "Shawn", "link": "https://stackoverflow.com/users/4209022/shawn"}, "edited": false, "score": 1, "creation_date": 1453268593, "post_id": 34892190, "comment_id": 57522600, "body": "What do you mean by concatenate strings? Do you have an example of what you are trying to do?"}], "tags": [], "owner": {"reputation": 401, "user_id": 3201111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/750db2c25fc926e752f60f6de95ed1c0?s=128&d=identicon&r=PG&f=1", "display_name": "cimarron", "link": "https://stackoverflow.com/users/3201111/cimarron"}, "is_accepted": true, "score": 1, "last_activity_date": 1453267658, "creation_date": 1453267658, "answer_id": 34892190, "question_id": 34892137, "link": "https://stackoverflow.com/questions/34892137/storing-int-value-into-char-p-index/34892190#34892190", "title": "Storing int value into char p[] index", "body": "<p>A <code>char</code> does not have the same type as <code>int</code> and is not identical in number of bits. You would need <code>int p[10];</code> for that to work.</p>\n"}, {"tags": [], "owner": {"reputation": 1162, "user_id": 1036018, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/kc7Yd.jpg?s=128&g=1", "display_name": "ddacot", "link": "https://stackoverflow.com/users/1036018/ddacot"}, "is_accepted": false, "score": 1, "last_activity_date": 1453267797, "creation_date": 1453267797, "answer_id": 34892218, "question_id": 34892137, "link": "https://stackoverflow.com/questions/34892137/storing-int-value-into-char-p-index/34892218#34892218", "title": "Storing int value into char p[] index", "body": "<p>You have an array of signed chars, they take 1 byte each, the max value would be 127 and minimum -128. Now the x's value takes more bytes to represent, there is an overflow, and it truncates the leftmost bits,</p>\n\n<pre><code>21345 has the binary representation:           0101 0011 0110 0001\n\nnow discard the leftmost byte and you get:               0110 0001   which is 97\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 460, "user_id": 5408918, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/83dbde93fdcbfdf59e1d65d8ceae946e?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Zeeshan", "link": "https://stackoverflow.com/users/5408918/muhammad-zeeshan"}, "is_accepted": false, "score": 0, "last_activity_date": 1453269050, "last_edit_date": 1453269050, "creation_date": 1453267850, "answer_id": 34892235, "question_id": 34892137, "link": "https://stackoverflow.com/questions/34892137/storing-int-value-into-char-p-index/34892235#34892235", "title": "Storing int value into char p[] index", "body": "<p>You need to use int array instead of char\nIt should be like</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n    int x = 21345;\n    int p[10];\n    p[0] = x;\n    printf(\"%d\\n\", x);\n    printf(\"%d\", p[0]);\n    return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>21345\n21345 \n</code></pre>\n\n<p>Well if you want to use same array for strings too, use 2 dimensions char array\nbecause you can store a integer value in 4 characters array correctly.\nso you need to use p[10][4] \nNow store each byte of int in corresponding char array index</p>\n\n<pre><code>p[0][0] = (x &gt;&gt; (8*0)) &amp; 0xff;\np[0][1] = (x &gt;&gt; (8*1)) &amp; 0xff;\np[0][2] = (x &gt;&gt; (8*2)) &amp; 0xff;\np[0][3] = (x &gt;&gt; (8*3)) &amp; 0xff;\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 4209022, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ea51a8bff4a9f45fd9030bbf99bde4a2?s=128&d=identicon&r=PG&f=1", "display_name": "Shawn", "link": "https://stackoverflow.com/users/4209022/shawn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 34892190, "answer_count": 5, "score": 0, "last_activity_date": 1453269050, "creation_date": 1453267365, "last_edit_date": 1453268040, "question_id": 34892137, "link": "https://stackoverflow.com/questions/34892137/storing-int-value-into-char-p-index", "title": "Storing int value into char p[] index", "body": "<p>Been stuck on a problem. figured out my issue. I have looked online quite a bit and have read many possible solutions, but nothing seems to work for me.</p>\n\n<p>I have this program, lets call it <code>test.c</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n    int x = 21345;\n    char p[10];\n    p[0] = x;\n    printf(\"%d\\n\", x);\n    printf(\"%d\", p[0]);\n    return 0;\n}\n</code></pre>\n\n<p>As you would guess, I want the two <code>printf</code> statements to have the same output. Instead, I get the following output...</p>\n\n<pre><code>21345\n97\n</code></pre>\n\n<p>I need <code>21345</code> to be at <code>p[0]</code>, and when I call <code>printf(\"%d\", p[0]);\n</code> It needs to print out <code>21345</code>, not <code>97</code></p>\n\n<p>Any help? :(</p>\n\n<p>EDIT:\nLooks like you guys answered, thanks! Changing to <code>int p[10]</code> would solve the problem. I have another complication though, I also need to be able to store strings inside the indexes of <code>p</code>, along with ints.. how should I tackle this?</p>\n"}, {"tags": ["c", "opencl", "gpu"], "comments": [{"owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 1, "creation_date": 1453285016, "post_id": 34892069, "comment_id": 57530960, "body": "You can simply add a <code>if(id &gt;= size ){return;}</code> at the beggining of the kernel. Also, I think CL is not a good way of processing your data, since it is small and variable. A work of &lt;100 items is typically not worth to process on GPU, unless each of the items involves ultraexpensive computing."}, {"owner": {"reputation": 259, "user_id": 2098936, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/VShwW.jpg?s=128&g=1", "display_name": "Kaur", "link": "https://stackoverflow.com/users/2098936/kaur"}, "reply_to_user": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 0, "creation_date": 1453343963, "post_id": 34892069, "comment_id": 57564074, "body": "Yes, worked that out earlier. but thanks anyway. Seems like the performance is slow with this implementation on GPU."}], "answers": [{"tags": [], "owner": {"reputation": 303, "user_id": 2770716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7538c0245fde63dd83838eeec9a7a6?s=128&d=identicon&r=PG&f=1", "display_name": "James B", "link": "https://stackoverflow.com/users/2770716/james-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1453499132, "creation_date": 1453499132, "answer_id": 34956477, "question_id": 34892069, "link": "https://stackoverflow.com/questions/34892069/discard-computations-for-extra-global-work-ids-in-opencl/34956477#34956477", "title": "Discard computations for extra global work id&#39;s in OpenCL", "body": "<p>If you're using opencl >= 2.0, passing NULL as the local work group size will allow the implementation to split up the workgroups into non uniform sizes (ie maintaining optimum performance with no code modifications). This is supported by intel and AMD, though not nvidia. Under opencl &lt;= 1.2, this will produce poor performance</p>\n\n<p>If you're running under opencl &lt;= 1.2, your options are sadly to either pad your global worksize buffer and ignore the extra calculated data, or to insert a conditional check into the kernel to eliminate invalid threads. For kernels of a medium size, this is normally fast enough that it should not be a problem.</p>\n"}], "owner": {"reputation": 259, "user_id": 2098936, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/VShwW.jpg?s=128&g=1", "display_name": "Kaur", "link": "https://stackoverflow.com/users/2098936/kaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453499132, "creation_date": 1453266988, "last_edit_date": 1453270143, "question_id": 34892069, "link": "https://stackoverflow.com/questions/34892069/discard-computations-for-extra-global-work-ids-in-opencl", "title": "Discard computations for extra global work id&#39;s in OpenCL", "body": "<p>I am a beginner in OpenCL and trying to use GPU for parallel processing of data sets. These datasets are of different sizes ranging from 10 to 10000 and same kernel is invoked for these sets one by one by. The problem size for each invocation is equal to the `set_size'\nThe kernel code contains: </p>\n\n<pre><code>int id = get_global_id(0);\nresult = Process dataset[id]\noutput[id] = result;\n</code></pre>\n\n<p><code>output</code> is a global array to get back the results.</p>\n\n<p>I have a GPU with 6 compute units and max <code>local_group_size</code> of 256. For fair distribution of work items, I use <code>local_group_size=64</code> and set the global work size as:</p>\n\n<pre><code>local_work_groups=set_size / local_group_size; \nif (set_size % local_work_size) != 0\n   local_work_groups++;\nglobal_work_size=local_work_groups*local_group_size;\n....\n....\nclEnqueueNDRangeKernel(command_queue,kernel,1,NULL,&amp;global_work_size,local_group_size,0,NULL,NULL);\n</code></pre>\n\n<p>Only one dimension is used for both local and global NDRange. The confusion is that what if a <code>set_size=120</code>?\nIf <code>local_group_size=64</code> and <code>global_work_size=128</code> is used, then what will happen when a thread gets <code>id=121</code>. There is no <code>121th</code> element in the input dataset. And how will it treat <code>output[121]</code>?</p>\n\n<p>Would I need to declare <code>output[global_work_size]</code> instead of <code>output[set_size]</code> and also pad the input with extra random 8 data values? Can I discard these 8 extra results within the kernel without using conditional check or barrier?\nPlease advise if am missing something.</p>\n"}, {"tags": ["c++", "c", "googletest"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5811344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87a7bed46d8229a60ebfa509b61365b9?s=128&d=identicon&r=PG&f=1", "display_name": "ichvenkait", "link": "https://stackoverflow.com/users/5811344/ichvenkait"}, "edited": false, "score": 0, "creation_date": 1453277857, "post_id": 34891981, "comment_id": 57526468, "body": "I just wanna determine c type(int, float double, char*) and make googletest pass, is there simple way? I don&#39;t write c++, just use googletest"}, {"owner": {"reputation": 87138, "user_id": 136540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a4d5888f021e337d09be5b3109c11e72?s=128&d=identicon&r=PG", "display_name": "Michael Aaron Safyan", "link": "https://stackoverflow.com/users/136540/michael-aaron-safyan"}, "reply_to_user": {"reputation": 1, "user_id": 5811344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87a7bed46d8229a60ebfa509b61365b9?s=128&d=identicon&r=PG&f=1", "display_name": "ichvenkait", "link": "https://stackoverflow.com/users/5811344/ichvenkait"}, "edited": false, "score": 0, "creation_date": 1453352497, "post_id": 34891981, "comment_id": 57566384, "body": "I&#39;m not sure what you mean that you &quot;don&#39;t write C++, just use Google Test&quot;... Google Test is a unit testing framework for C++... I don&#39;t understand how one can write tests without also understanding the code being tested. Your best best is to define &quot;is_t(Type, x)&quot; as &quot;typeid(T) ==  typeid(x)&quot;, but this does an exact comparison on the type... it doesn&#39;t consider polymorphic relations. This is why a macro like that is confusing."}], "tags": [], "owner": {"reputation": 87138, "user_id": 136540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a4d5888f021e337d09be5b3109c11e72?s=128&d=identicon&r=PG", "display_name": "Michael Aaron Safyan", "link": "https://stackoverflow.com/users/136540/michael-aaron-safyan"}, "is_accepted": false, "score": 1, "last_activity_date": 1453267977, "last_edit_date": 1453267977, "creation_date": 1453266417, "answer_id": 34891981, "question_id": 34891883, "link": "https://stackoverflow.com/questions/34891883/how-to-determine-arg-type-in-c/34891981#34891981", "title": "How to determine arg type in c++", "body": "<p>This is a very complicated question, because there are many different ways to \"detect types\", depending on what it is you are trying to accomplish. There are basically two different categories of \"type checking\": compile-time and run-time. In terms of compile-time checking, it is very common to use \"<a href=\"https://en.wikipedia.org/wiki/Duck_typing\" rel=\"nofollow\">duck-typing</a>\" with C++ templates (it works if it satisfies the implicit requirements); however, there are some cases where this is not sufficient, and <a href=\"http://en.cppreference.com/w/cpp/header/type_traits\" rel=\"nofollow\"><code>&lt;type_traits&gt;</code></a> and <a href=\"http://en.cppreference.com/w/cpp/language/static_assert\" rel=\"nofollow\"><code>static_assert</code></a> provide ways to enforce requirements more explicitly, while <a href=\"http://en.cppreference.com/w/cpp/language/decltype\" rel=\"nofollow\"><code>decltype</code></a> allows one to refer to the type that would be returned by an expression. Type conversion at runtime is less common in C++ (usually it is done implicitly through \"dynamic dispatch\", a.k.a. virtual functions); however, in terms of explicitly checking the runtime type of an object, there is the <a href=\"http://en.cppreference.com/w/cpp/language/dynamic_cast\" rel=\"nofollow\"><code>dynamic_cast&lt;T&gt;</code></a> mechanism.</p>\n\n<p>Long-story short, though, your <code>is_t()</code> macro is probably best replaced by the builtin mechanisms for type-detection in C++. If you are using older versions of C++, <a href=\"http://www.boost.org/\" rel=\"nofollow\">Boost</a> provides widely compatible equivalents that work across many C++ compilers and both C++98 and C++11. Doing so will make it much clearer what you mean by the variable being of that type. (E.g. is it declared to be exactly of that type, does it have that runtime type, is it declared to be of a type that is assignable to the other type).</p>\n"}], "owner": {"reputation": 1, "user_id": 5811344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87a7bed46d8229a60ebfa509b61365b9?s=128&d=identicon&r=PG&f=1", "display_name": "ichvenkait", "link": "https://stackoverflow.com/users/5811344/ichvenkait"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1453267977, "creation_date": 1453265920, "question_id": 34891883, "link": "https://stackoverflow.com/questions/34891883/how-to-determine-arg-type-in-c", "title": "How to determine arg type in c++", "body": "<p>in gcc, I can use following code:</p>\n\n<pre><code>#define is_t(smth, type) ({int is_t_result; if (__builtin_types_compatible_p(__typeof__(smth), type)) {is_t_result = 1;}; is_t_result;})\n</code></pre>\n\n<p>but when I run it in googletest(c++), it raise</p>\n\n<pre><code>error: expected primary-expression before \u2018__typeof__\u2019\n</code></pre>\n\n<p>is there alternative to implement <code>is_t</code> in cpp?</p>\n"}, {"tags": ["c", "macos", "sdl", "sdl-2"], "comments": [{"owner": {"reputation": 154, "user_id": 3978772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7288a18612ec9965ea217080278ad5da?s=128&d=identicon&r=PG&f=1", "display_name": "martingrant", "link": "https://stackoverflow.com/users/3978772/martingrant"}, "edited": false, "score": 0, "creation_date": 1453450012, "post_id": 34891837, "comment_id": 57615202, "body": "Can you include your window creation code?"}, {"owner": {"reputation": 732, "user_id": 3418761, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e9efde55eea7dcb2aa0bd22fa9efa7be?s=128&d=identicon&r=PG&f=1", "display_name": "Lord Windy", "link": "https://stackoverflow.com/users/3418761/lord-windy"}, "reply_to_user": {"reputation": 154, "user_id": 3978772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7288a18612ec9965ea217080278ad5da?s=128&d=identicon&r=PG&f=1", "display_name": "martingrant", "link": "https://stackoverflow.com/users/3978772/martingrant"}, "edited": false, "score": 0, "creation_date": 1453524571, "post_id": 34891837, "comment_id": 57650564, "body": "I copied and pasted the link I shared before. It&#39;s just a bog standard open window."}], "answers": [{"comments": [{"owner": {"reputation": 732, "user_id": 3418761, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e9efde55eea7dcb2aa0bd22fa9efa7be?s=128&d=identicon&r=PG&f=1", "display_name": "Lord Windy", "link": "https://stackoverflow.com/users/3418761/lord-windy"}, "edited": false, "score": 0, "creation_date": 1493887712, "post_id": 39427898, "comment_id": 74596721, "body": "I must thank you again, I keep coming back to this to understand what I did wrong!"}], "tags": [], "owner": {"reputation": 86, "user_id": 6817149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b00d382fbf591409fe30a601db28ce3?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/6817149/ryan"}, "is_accepted": true, "score": 3, "last_activity_date": 1473523163, "creation_date": 1473523163, "answer_id": 39427898, "question_id": 34891837, "link": "https://stackoverflow.com/questions/34891837/sdl2-window-lacking-window-bar/39427898#39427898", "title": "SDL2 Window lacking window bar", "body": "<p>Not sure of the root cause but making a loop that polls events seems to do the trick.</p>\n\n<pre><code>bool loop = true;\nwhile(loop)\n{\n    SDL_Event event;\n    while(SDL_PollEvent(&amp;event))\n    {\n        if(event.type == SDL_QUIT)\n        {\n            loop = false;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 732, "user_id": 3418761, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e9efde55eea7dcb2aa0bd22fa9efa7be?s=128&d=identicon&r=PG&f=1", "display_name": "Lord Windy", "link": "https://stackoverflow.com/users/3418761/lord-windy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 928, "favorite_count": 3, "accepted_answer_id": 39427898, "answer_count": 1, "score": 2, "last_activity_date": 1473523163, "creation_date": 1453265601, "last_edit_date": 1453524494, "question_id": 34891837, "link": "https://stackoverflow.com/questions/34891837/sdl2-window-lacking-window-bar", "title": "SDL2 Window lacking window bar", "body": "<p><a href=\"https://i.stack.imgur.com/UpYBu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UpYBu.png\" alt=\"\"></a></p>\n\n<p>I'm trying to build an SDL2 app on OSX El Capitan, and I am running into an issue where the window dressing is not appearing. Things like the exit button and the resizing bar are not appearing. I've compiled on Windows and it all works fine there.</p>\n\n<p>To make it a bit easier this link to Lazy Foo's tutorial replicates the issue: <a href=\"http://lazyfoo.net/tutorials/SDL/01_hello_SDL/index2.php\" rel=\"nofollow noreferrer\">http://lazyfoo.net/tutorials/SDL/01_hello_SDL/index2.php</a></p>\n\n<p>My make file is pretty simple (I've stolen it off his website as well)</p>\n\n<pre><code>COMPILER_FLAGS = -w\n\nLINKER_FLAGS = -framework SDL2\n\n#OBJS specifies which files to compile as part of the project\nOBJS = main.c \n#CC specifies which compiler we're using\nCC = g++\n\nOBJ_NAME = main\n#This is the target that compiles our executable\nall : $(OBJS)\n    $(CC) $(OBJS) $(INCLUDE_PATHS) $(LIBRARY_PATHS) $(COMPILER_FLAGS) $(LINKER_FLAGS) -o $(OBJ_NAME)\n</code></pre>\n\n<p>If anyone knows what I am doing wrong, I'd love to find out.</p>\n\n<p>UPDATE: I pulled out an old laptop, fresh installed to El Capitan and it is having the same issue based on the Lazy Foo code.</p>\n\n<p>UPDATE:</p>\n\n<pre><code>/*This source code copyrighted by Lazy Foo' Productions (2004-2015)\nand may not be redistributed without written permission.*/\n\n//Using SDL and standard IO\n#include &lt;SDL.h&gt;\n#include &lt;stdio.h&gt;\n\n//Screen dimension constants\nconst int SCREEN_WIDTH = 640;\nconst int SCREEN_HEIGHT = 480;\n\nint main( int argc, char* args[] )\n{\n    //The window we'll be rendering to\n    SDL_Window* window = NULL;\n\n    //The surface contained by the window\n    SDL_Surface* screenSurface = NULL;\n\n    //Initialize SDL\n    if( SDL_Init( SDL_INIT_VIDEO ) &lt; 0 )\n    {\n        printf( \"SDL could not initialize! SDL_Error: %s\\n\", SDL_GetError() );\n    }\n    else\n    {\n        //Create window\n        window = SDL_CreateWindow( \"SDL Tutorial\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_SHOWN );\n        if( window == NULL )\n        {\n            printf( \"Window could not be created! SDL_Error: %s\\n\", SDL_GetError() );\n        }\n        else\n        {\n            //Get window surface\n            screenSurface = SDL_GetWindowSurface( window );\n\n            //Fill the surface white\n            SDL_FillRect( screenSurface, NULL, SDL_MapRGB( screenSurface-&gt;format, 0xFF, 0xFF, 0xFF ) );\n\n            //Update the surface\n            SDL_UpdateWindowSurface( window );\n\n            //Wait two seconds\n            SDL_Delay( 2000 );\n        }\n    }\n\n    //Destroy window\n    SDL_DestroyWindow( window );\n\n    //Quit SDL subsystems\n    SDL_Quit();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "file"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1453265165, "post_id": 34891746, "comment_id": 57521530, "body": "<code>for (a = 0; a &lt; i; ++a) {         printf(&quot;%d &quot;, myArray[a]);     }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 3278829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7CQ5A.jpg?s=128&g=1", "display_name": "Pratik Agrawal", "link": "https://stackoverflow.com/users/3278829/pratik-agrawal"}, "is_accepted": false, "score": 0, "last_activity_date": 1453265209, "creation_date": 1453265209, "answer_id": 34891785, "question_id": 34891746, "link": "https://stackoverflow.com/questions/34891746/c-reading-numbers-from-file-into-array/34891785#34891785", "title": "C Reading numbers from file into array", "body": "<p>Try this</p>\n\n<pre><code>while ((status = fscanf(myFile, \"%d\\n\", &amp;myArray[i])) == 1 &amp;&amp; i &lt; MAX_ARRAY_SIZE - 1) {\n    ++i;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 5813838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/052fe807fbd390f8df90f7373b788f1d?s=128&d=identicon&r=PG&f=1", "display_name": "Nils", "link": "https://stackoverflow.com/users/5813838/nils"}, "edited": false, "score": 0, "creation_date": 1453265674, "post_id": 34891786, "comment_id": 57521673, "body": "yeah :D i was using &quot;i&quot; before and forgot to change all of them to a :D thx"}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 0, "last_activity_date": 1453265221, "creation_date": 1453265221, "answer_id": 34891786, "question_id": 34891746, "link": "https://stackoverflow.com/questions/34891746/c-reading-numbers-from-file-into-array/34891786#34891786", "title": "C Reading numbers from file into array", "body": "<p>The problem is in your print loop:</p>\n\n<pre><code>for (a = 0; i &lt; MAX_ARRAY_SIZE; ++i)\n</code></pre>\n\n<p>There is no guarantee you are reading <code>MAX_ARRAY_SIZE</code> values. Also, if you ar using <code>'a'</code> as your loop iterator, then you need to use <code>'a'</code>. Your loop should be:</p>\n\n<pre><code>for (a = 0; a &lt; i; ++a)\n    printf(\"%d \", myArray[a]);\n</code></pre>\n\n<p>You also do not need a field-width in your <em>format-specifier</em>, <code>fscanf(myFile, \" %d\", &amp;myArray[i]))</code> will do.</p>\n"}, {"comments": [{"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1453267178, "post_id": 34891807, "comment_id": 57522136, "body": "You can edit your answer to change it as required. Do not submit another answer."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522419764, "post_id": 34891807, "comment_id": 86159679, "body": "You should delete this answer."}], "tags": [], "owner": {"reputation": 29, "user_id": 3278829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7CQ5A.jpg?s=128&g=1", "display_name": "Pratik Agrawal", "link": "https://stackoverflow.com/users/3278829/pratik-agrawal"}, "is_accepted": false, "score": -1, "last_activity_date": 1453265427, "creation_date": 1453265427, "answer_id": 34891807, "question_id": 34891746, "link": "https://stackoverflow.com/questions/34891746/c-reading-numbers-from-file-into-array/34891807#34891807", "title": "C Reading numbers from file into array", "body": "<p>True... I have not seen print loop code.. Sorry.\nProblem is in print loop not fscan, please ignore my answer</p>\n"}], "owner": {"reputation": 3, "user_id": 5813838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/052fe807fbd390f8df90f7373b788f1d?s=128&d=identicon&r=PG&f=1", "display_name": "Nils", "link": "https://stackoverflow.com/users/5813838/nils"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 34891786, "answer_count": 3, "score": 0, "last_activity_date": 1453265427, "creation_date": 1453264889, "question_id": 34891746, "link": "https://stackoverflow.com/questions/34891746/c-reading-numbers-from-file-into-array", "title": "C Reading numbers from file into array", "body": "<p>hey so i m trying to read numbers from text file and put them into an array but ive been getting weird numbers when i try to print them. text file looks like:</p>\n\n<pre><code>45\n77\n8\n...\n</code></pre>\n\n<p>i guess theres something wrong with the loop i m using but i cant seem to find out what.\nthanks for your help!</p>\n\n<p>code:</p>\n\n<pre><code>#define MAX_ARRAY_SIZE 20\n\nint main(int argc, char * argv[])\n{\n    FILE *myFile;\n    int myArray[MAX_ARRAY_SIZE];\n    //char filename[32];\n    //printf(\"enter filename\\n\");\n    //scanf(\"%s\", filename);\n\n    myFile = fopen(\"asdf.txt\", \"r\");\n    if (!myFile) {\n        printf(\"cant open file\\n\");\n        return 1;\n    }\n    int status;\n    int i = 0;\n    while ((status = fscanf(myFile, \"%2d\", &amp;myArray[i])) == 1 &amp;&amp; i &lt; MAX_ARRAY_SIZE - 1) {\n        ++i;\n    }\n    fclose(myFile);\n\n\n    int a;\n    for (a = 0; i &lt; MAX_ARRAY_SIZE; ++i) {\n        printf(\"%d \", myArray[i]);\n    }\n    printf(\"\\n\");\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arduino", "frequency", "speaker", "headphones"], "answers": [{"tags": [], "owner": {"reputation": 320, "user_id": 5813832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qQbdHguNbb4/AAAAAAAAAAI/AAAAAAAAACc/Wbhr15xl08A/photo.jpg?sz=128", "display_name": "Sid Mani", "link": "https://stackoverflow.com/users/5813832/sid-mani"}, "is_accepted": true, "score": 0, "last_activity_date": 1453265683, "creation_date": 1453265683, "answer_id": 34891848, "question_id": 34891709, "link": "https://stackoverflow.com/questions/34891709/send-tone-from-arduino-through-mono-aux-cord-to-speakers-via-3-5mm-jack/34891848#34891848", "title": "Send Tone from arduino through mono aux cord to speakers via 3.5mm jack", "body": "<p>It's exactly the same thing- just send the square wave through the audio jack. Assuming your speakers have their own amplifier (which most desktop speakers do), you should just put a 10k resistor on the output line. Just hook up the pin and ground to the jack and you should be fine.</p>\n"}], "owner": {"reputation": 13, "user_id": 4159801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e77938f1b45e35878c711fbecb43515d?s=128&d=identicon&r=PG&f=1", "display_name": "Drew P", "link": "https://stackoverflow.com/users/4159801/drew-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 846, "favorite_count": 0, "accepted_answer_id": 34891848, "answer_count": 1, "score": -1, "last_activity_date": 1453844143, "creation_date": 1453264628, "last_edit_date": 1453844143, "question_id": 34891709, "link": "https://stackoverflow.com/questions/34891709/send-tone-from-arduino-through-mono-aux-cord-to-speakers-via-3-5mm-jack", "title": "Send Tone from arduino through mono aux cord to speakers via 3.5mm jack", "body": "<p>Hello I am using Arduino C to program my microcontroller to output frequencies via tone(); to a piezo buzzer. Currently the frequency(s) is/are chosen with a potentiometer. I would like to ditch the piezo buzzer and instead output the frequency to a 3.5mm headphone jack, where either headphones can be plugged in or a mono auxiliary cord, with a pair of desktop speakers on the other end. What is the best and most efficient way to do this as far as coding/translating the frequency to be output over the 3.5mm jack?</p>\n\n<p><strong><em>update</em></strong> :\nso for my 3.5mm audio jack, i have the 10k ohm resistor inline with the ground connection and then one pin running to positive lead and the other pin running to digital pin 4 on my arduino. I have tried testing multiple frequencies on a pair of desktop speakers with a subwoofer, and comparing them to an actual tone generator app i have on my phone. my prototype seems to emit more of a noisy/fuzzy sound compared to the tone generator app which seems to be a lot more crisp/clean. Also frequencies under 100 Hz arent playing what they should sound like, however the app outputs frequencies under 100 Hz just fine. My three questions are:\n1. How can I get to output to be as close as possible to the actual frequency?\n2. How can i get the output to be crisp and clean, not noisy and fuzzy?\n3. Is there something i'm missing/any ideas how to make the frequencies go below 100 Hz?</p>\n\n<p>i know theres 5 pins on the 3.5mm audio jack but im only using 3, could this be an issue?</p>\n\n<p>please feel free to ask any questions, i can also upload pictures as needed.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1453264719, "post_id": 34891662, "comment_id": 57521418, "body": "It happens because you are printing the pointer and not the value where the pointer points to. By the way, free that memory too."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1453264805, "post_id": 34891662, "comment_id": 57521443, "body": "<code>*k[i]=10;</code> --&gt; <code>(*k)[i]=10;</code>,  <code>printf(&quot;%d\\n&quot;,k);</code> --&gt; <code>printf(&quot;%d\\n&quot;,k[i]);</code>"}, {"owner": {"reputation": 111, "user_id": 5743908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85863e12a22994ed8c99031f6fbd43d5?s=128&d=identicon&r=PG&f=1", "display_name": "Mitsos", "link": "https://stackoverflow.com/users/5743908/mitsos"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1453264921, "post_id": 34891662, "comment_id": 57521476, "body": "@Michi I placed an asterisk before k but it still crashes."}, {"owner": {"reputation": 111, "user_id": 5743908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85863e12a22994ed8c99031f6fbd43d5?s=128&d=identicon&r=PG&f=1", "display_name": "Mitsos", "link": "https://stackoverflow.com/users/5743908/mitsos"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1453265098, "post_id": 34891662, "comment_id": 57521519, "body": "@BLUEPIXY Thank you very much.It works now.Why should I place a parenthesis ?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1453265331, "post_id": 34891662, "comment_id": 57521580, "body": "It is because of the binding priority. <code>*k[i]</code> meant <code>*(k[i])</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1453266713, "post_id": 34891662, "comment_id": 57522003, "body": "Another way to saying it is &quot;it is due to <i>operator precedence</i>.&quot; You can look up the table. <code>[]</code> has higher precedence than the <code>*</code> operator. So to insure the pointer is dereferenced first, you must use parenthesis so the compiler evaluates <code>(*k)</code> before applying the array index <code>[]</code>. So <code>(*k)[i]</code> says <i>dereference</i> <code>k</code>, then evaluate the array index (offset) <code>&#39;i&#39;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 4, "last_activity_date": 1453265467, "last_edit_date": 1453265467, "creation_date": 1453265026, "answer_id": 34891761, "question_id": 34891662, "link": "https://stackoverflow.com/questions/34891662/return-memory-address-of-an-array-using-void/34891761#34891761", "title": "Return memory address of an array using void", "body": "<p>The problem is in </p>\n\n<pre><code>*k[i]=10;\n</code></pre>\n\n<p>By the order of precedence, it should be,</p>\n\n<pre><code>(*k)[i] = 10;\n</code></pre>\n\n<p>The subscripting operator has a higher precedence than the indirection operator. See <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow\">Operator Prececence Rules.</a></p>\n\n<p>Also, in the printf in main, you are printing <code>printf(\"%d\\n\",k)</code>. This will print the base addresses of the array. If you want the value you should use</p>\n\n<pre><code>printf(\"%d\\n\",k[i]);\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 5743908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85863e12a22994ed8c99031f6fbd43d5?s=128&d=identicon&r=PG&f=1", "display_name": "Mitsos", "link": "https://stackoverflow.com/users/5743908/mitsos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1453265467, "creation_date": 1453264267, "question_id": 34891662, "link": "https://stackoverflow.com/questions/34891662/return-memory-address-of-an-array-using-void", "title": "Return memory address of an array using void", "body": "<p>When I try to run the program it crashes, but it prints the numbers.Why is that?</p>\n\n<pre><code>void z(int **k)\n{\n    int i;\n    *k=malloc(20*sizeof(int));\n    for (i=0;i&lt;20;i++)\n        *k[i]=10;\n\n}\nint main()\n{\n    int *k,i;\n    z(&amp;k);\n    for (i=0;i&lt;20;i++)\n    printf(\"%d\\n\",k);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1453265729, "post_id": 34891301, "comment_id": 57521685, "body": "What you should do is to load (read) all structs from <code>MembershipRecord.DAT</code> into an array before asking the user to enter the <code>ssn</code>. (that can be done in a separate function) That way all structs are held in memory and you can simply loop over each of the elements and compare <code>ssn</code> values. Otherwise, you will have to read through the file each time the user enters a <code>ssn</code> which is orders-of-magnitude slower than reading from memory."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1453405607, "post_id": 34891301, "comment_id": 57598671, "body": "BTW: in the U.S.A. an ssn is 3digits-2digits-4digits not 3digits-3digits-3digits.  And certain ssn values will have an additional 10 character (for railroad employees, etc)"}], "answers": [{"tags": [], "owner": {"reputation": 6567, "user_id": 2435820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J6uQT.png?s=128&g=1", "display_name": "kfx", "link": "https://stackoverflow.com/users/2435820/kfx"}, "is_accepted": true, "score": 0, "last_activity_date": 1453279104, "creation_date": 1453279104, "answer_id": 34895128, "question_id": 34891301, "link": "https://stackoverflow.com/questions/34891301/how-can-i-create-a-function-to-read-structure-variables-from-a-file-and-compare/34895128#34895128", "title": "How can I create a function to read structure variables from a file and compare string dates?", "body": "<p>To compare dates, you can use <code>difftime()</code> function; first convert the dates to a correct format by <code>strptime()</code>:</p>\n\n<pre><code>bool check_expired(const char *date, const char *expdate)\n{\n    struct tm tm_date, tm_expdate;\n\n    if (strptime(date, \"%d %b %Y\", &amp;tm_date) == NULL\n        || strptime(expdate, \"%d %b %Y\", &amp;tm_expdate) == NULL) {\n        // wrong format, count as expired\n        printf(\"strptime failed\\n\");\n        return true;\n    }\n\n    return difftime(mktime(&amp;tm_date), mktime(&amp;tm_expdate)) &lt; 0;\n}\n</code></pre>\n\n<p>To compare records, for performance reasons the best idea usually is to read the file once and then keep all the records in memory, in an array.</p>\n\n<p>If it is not possible or not desired, this logic should work: read the file line-by-line. Keep a current record and fill it until all fields have been filled. Then do the SSN check; it it matches, compare the dates and break the file-reading loop. Assuming a record is always 6 non-empty lines:</p>\n\n<pre><code>#define _XOPEN_SOURCE\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdbool.h&gt;\n\n// ...\n\nvoid member_exp()\n{\n    FILE *membership;\n    struct MembershipInfo_t member;\n    char line[256];\n    char ssncheck[20];\n    char tmp1[20], tmp2[20];\n    int record_line = 0;\n\n    membership = fopen(\"MembershipRecord.DAT\", \"rb\");\n\n    printf(\"Please enter social security number\\n\");\n    if (scanf(\"%20s\", ssncheck) != 1) {\n        return;\n    }\n\n    while (fgets(line, sizeof(line), membership)) {\n        // check if the line is whitespace only\n        char *p = line;\n        bool is_spaces_only = true;\n        while (*p) {\n            if (!isspace(*p)) {\n                is_spaces_only = false;\n                break;\n            }\n            p++;\n        }\n        if (is_spaces_only) {\n            continue;\n        }\n\n        switch (record_line) {\n        case 0:\n            sscanf(line, \"%s %s\", member.cust_lname, member.cust_fname);\n            break;\n        case 1:\n            sscanf(line, \"%s\", member.memtype);\n            break;\n        case 2:\n            // TODO\n            break;\n        case 3:\n            sscanf(line, \"SSN: %s\", member.ssn);\n            break;\n        case 4:\n            // TODO\n            break;\n        case 5:\n            sscanf(line, \"%20s %20s %20s\", member.date, tmp1, tmp2);\n            strcat(member.date, \" \");\n            strcat(member.date, tmp1);\n            strcat(member.date, \" \");\n            strcat(member.date, tmp2);\n            break;\n        case 6:\n            sscanf(line, \"Expiration Date: %20s %20s %20s\", member.expdate, tmp1, tmp2);\n            strcat(member.expdate, \" \");\n            strcat(member.expdate, tmp1);\n            strcat(member.expdate, \" \");\n            strcat(member.expdate, tmp2);\n            break;\n        }\n\n        record_line++;\n        if (record_line &gt; 6) {\n            if (!strcmp(member.ssn, ssncheck)) {\n                printf(\"record found. it is %sexpired\\n\",\n                        check_expired(member.date, member.expdate) ? \"not \" : \"\");\n                break;\n            }\n            record_line = 0;\n        }\n    }\n\n    fclose(membership);\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 5787394, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yI4bYA6VcBU/AAAAAAAAAAI/AAAAAAAAAAA/knwMJkDM5oM/photo.jpg?sz=128", "display_name": "Yuan", "link": "https://stackoverflow.com/users/5787394/yuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 34895128, "answer_count": 1, "score": 0, "last_activity_date": 1453279104, "creation_date": 1453262149, "question_id": 34891301, "link": "https://stackoverflow.com/questions/34891301/how-can-i-create-a-function-to-read-structure-variables-from-a-file-and-compare", "title": "How can I create a function to read structure variables from a file and compare string dates?", "body": "<p>I'm trying to build a function that reads a primary key from a structure array to further compare two corresponding variables in the structure that stores the date (Members[x].expdate and the current date) to output a result \"Expired\" if the current date is greater than the expiration date, Members[x].expdate and \"Valid\" otherwise. Can someone show me exactly how I would do so?</p>\n\n<p>This is the structure, \"ssn\" is the primary key.</p>\n\n<pre><code>struct MembershipInfo_t\n{\nchar ssn[MAX_BUFFER_LEN];\nint   set;\nunsigned payplan;\nchar  cust_fname[ MAX_BUFFER_LEN ];\nchar  cust_lname[ MAX_BUFFER_LEN ];\nchar  memtype[ MAX_BUFFER_LEN ];\nchar  date[ MAX_BUFFER_LEN ];\nchar selection[ MAX_BUFFER_LEN ][10];\nchar status[ MAX_BUFFER_LEN ];\nchar  expdate[ MAX_BUFFER_LEN ];\n};\n</code></pre>\n\n<p>A separate function prompts the user for the above and stores it on a DAT file.</p>\n\n<p>This is what I have so far of the function that is supposed to determine validation</p>\n\n<pre><code>void MemberExp()\n{\n\nFILE *Membership;\n\nMembership= fopen(\"MembershipRecord.DAT\", \"rb\");\n\n\nprintf(\"Please enter social security number\\n\");\nscanf( \"%s\" , ssncheck);\nfscanf(Membership, \"%s\", Members[x].ssn);\n\nif(strcmp(ssncheck, Members[x].ssn)==0){\n\n\n\n}\n\n\n\n\n\nfclose(Membership);\n}\n</code></pre>\n\n<p>Can you help me to create the function that carries out the above?</p>\n\n<p>To remove ambiguity, the function that prompts the user for the information puts this on the file for example:</p>\n\n<pre><code>John    Daley\nPlatinum Membership\nYou have all services available\nSSN: 123-456-789\nThe Full cost is $ 1230\n19 January 2016\nExpiration Date: 19 February 2016\n\n\n\n\nRon John\nPlatinum Membership\nYou have all services available\nSSN: 223-456-789\nThe Full cost is $ 1230\n19 January 2016\nExpiration Date: 19 March 2016\n</code></pre>\n\n<p>The function I wish to create would identify the record using the SSN, so if I were to type 223-456-789 I would access the structure array with all the data for Ron John. If I were to type 123-456-789, I would access the structure array with all the data for John Daley. \nThen it would get the expiration date for whichever member I wanted to access using their SSN and compare it with the current date. Again, if the current date exceeds Members[x].expdate,which in the case of John Daley is the 19th of February, it would display \"expired\" or \"Valid otherwise\"</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1453261464, "post_id": 34891181, "comment_id": 57520490, "body": "Usually <code>int</code> will be the natural register size and hence fastest.  The smaller integer types are mostly useful for structs and arrays where you want to minimize the space required."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453261689, "post_id": 34891181, "comment_id": 57520557, "body": "<code>int_fast8_t</code> is the optimal solution"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1453261852, "post_id": 34891181, "comment_id": 57520609, "body": "@M.M: why not <code>uint_fast8_t</code> ?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1453262339, "post_id": 34891181, "comment_id": 57520743, "body": "@chqrlie signed arithmetic has fewer constraints that unsigned arithmetic, so in theory, all other things being equal, the signed version should be equal or faster in performance to the unsigned"}, {"owner": {"reputation": 41983, "user_id": 866732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f09f0253204000d6083ed1de21afc6fd?s=128&d=identicon&r=PG", "display_name": "WiSaGaN", "link": "https://stackoverflow.com/users/866732/wisagan"}, "edited": false, "score": 0, "creation_date": 1453262391, "post_id": 34891181, "comment_id": 57520767, "body": "Unsigned integer is actually a good source of subtle bugs in production software, and rarely offers anything meaningful. It is sometime suggested to use unsigned integer only in bit pattern representation."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 41983, "user_id": 866732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f09f0253204000d6083ed1de21afc6fd?s=128&d=identicon&r=PG", "display_name": "WiSaGaN", "link": "https://stackoverflow.com/users/866732/wisagan"}, "edited": false, "score": 0, "creation_date": 1453262545, "post_id": 34891181, "comment_id": 57520805, "body": "@WiSaGaN: I agree with you, but if the boundary is an unsigned type, using a signed index is calling for trouble."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453262695, "post_id": 34891181, "comment_id": 57520861, "body": "@M.M: signed arithmetic is more intuitive for the programmer, but I have yet to see a CPU where signed arithmetic offers any performance advantage over unsigned arithmetic, it is actually quite the contrary: <code>i &#47; 2</code> can be optimized into <code>i &gt;&gt; 1</code> if <code>i</code> is unsigned or known to be positive, not in the general signed case."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453264129, "post_id": 34891181, "comment_id": 57521244, "body": "if negative values were possible then unsigned could not be used anyway..."}], "answers": [{"comments": [{"owner": {"reputation": 41983, "user_id": 866732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f09f0253204000d6083ed1de21afc6fd?s=128&d=identicon&r=PG", "display_name": "WiSaGaN", "link": "https://stackoverflow.com/users/866732/wisagan"}, "edited": false, "score": 0, "creation_date": 1453261962, "post_id": 34891238, "comment_id": 57520645, "body": "I would actually suggest signed integers for loop, so you don&#39;t have to switch between signed/unsigned when loop direction is reversed."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 41983, "user_id": 866732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f09f0253204000d6083ed1de21afc6fd?s=128&d=identicon&r=PG", "display_name": "WiSaGaN", "link": "https://stackoverflow.com/users/866732/wisagan"}, "edited": false, "score": 0, "creation_date": 1453262378, "post_id": 34891238, "comment_id": 57520756, "body": "@WiSaGaN: You do not need to switch if you use this style: <code>for (unsigned i = 100; i-- &gt; 0; ) { }</code>"}, {"owner": {"reputation": 41983, "user_id": 866732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f09f0253204000d6083ed1de21afc6fd?s=128&d=identicon&r=PG", "display_name": "WiSaGaN", "link": "https://stackoverflow.com/users/866732/wisagan"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1453262652, "post_id": 34891238, "comment_id": 57520844, "body": "@chqrlie, I think usually in computer industry we want 99..0 inclusive, rather than 100..1 inclusive."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 41983, "user_id": 866732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f09f0253204000d6083ed1de21afc6fd?s=128&d=identicon&r=PG", "display_name": "WiSaGaN", "link": "https://stackoverflow.com/users/866732/wisagan"}, "edited": false, "score": 0, "creation_date": 1453262831, "post_id": 34891238, "comment_id": 57520901, "body": "@WiSaGaN: read more carefully, the loop style I use enumerates 99..0 inclusively <b>and</b> uses the exact count as initializer. Best of both worlds."}, {"owner": {"reputation": 41983, "user_id": 866732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f09f0253204000d6083ed1de21afc6fd?s=128&d=identicon&r=PG", "display_name": "WiSaGaN", "link": "https://stackoverflow.com/users/866732/wisagan"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1453266152, "post_id": 34891238, "comment_id": 57521818, "body": "@chqrlie OK. My bad on this one."}], "tags": [], "owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "is_accepted": false, "score": 0, "last_activity_date": 1453261664, "creation_date": 1453261664, "answer_id": 34891238, "question_id": 34891181, "link": "https://stackoverflow.com/questions/34891181/for-array-loop-use-int-or-uint8-t/34891238#34891238", "title": "for array loop use int or uint8_t?", "body": "<p>depends on the chip you are targeting</p>\n\n<p>on an 8bit chip, it could make a difference using an 8bit type, however even on an 8 bit chip they often have one register that is of a bigger size.  </p>\n\n<p>In some cases it might help with stack usage.</p>\n\n<p>In general I suggest using a unsigned for a loop anyways, but it's up to you to make informed choices on the bit width you need.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 2, "last_activity_date": 1453263252, "last_edit_date": 1453263252, "creation_date": 1453261738, "answer_id": 34891253, "question_id": 34891181, "link": "https://stackoverflow.com/questions/34891181/for-array-loop-use-int-or-uint8-t/34891253#34891253", "title": "for array loop use int or uint8_t?", "body": "<p>The first choice is much better:</p>\n\n<pre><code>for (int i = 0; i &lt; 100; i++) { }\n</code></pre>\n\n<p>The alternative is sometimes encouraged by local coding rules, it is a bad recommendation:</p>\n\n<ul>\n<li>it tends to generate more code if you use <code>i</code> in the loop body as an index or in an expression.</li>\n<li>it can also lead to more bugs especially if you later modify your code and the upper boundary exceeds 255 and is read from a <code>unsigned</code> variable.</li>\n<li>a good embedded compiler will take advantage of the small range if it is pertinent anyway.</li>\n</ul>\n\n<p>Embedded systems have plenty of resources nowadays, but if you are targeting a very limited chipset, you may want to check both alternatives and make an informed decision.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1453264183, "post_id": 34891350, "comment_id": 57521260, "body": "note: this advice only holds so long as the loop upper bound doesn&#39;t reach 32767 :)"}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 1, "last_activity_date": 1453262415, "creation_date": 1453262415, "answer_id": 34891350, "question_id": 34891181, "link": "https://stackoverflow.com/questions/34891181/for-array-loop-use-int-or-uint8-t/34891350#34891350", "title": "for array loop use int or uint8_t?", "body": "<p>Use <code>int</code>. Just use <code>int</code>. That's what it's for. If you had to think about and pick the size in bits for every variable, that'd be a nuisance, that'd indicate you were using a poor language, that wasn't doing its job.  It would be as bad as if you had to pick the machine instructions to evaluate every expression you wrote. But C is a good language. Let it generate your code efficiently. Let it worry about the exact sizes of variables when you don't care, which ought to be most of the time. Just use <code>int</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 4603962, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/175ty.jpg?s=128&g=1", "display_name": "daemondave", "link": "https://stackoverflow.com/users/4603962/daemondave"}, "is_accepted": false, "score": 0, "last_activity_date": 1453264173, "creation_date": 1453264173, "answer_id": 34891645, "question_id": 34891181, "link": "https://stackoverflow.com/questions/34891181/for-array-loop-use-int-or-uint8-t/34891645#34891645", "title": "for array loop use int or uint8_t?", "body": "<p>Use a pointer to array type and use post increment per loop. Then define magic number as constant plus max offset for sizeof() to array limit. Store address once per instantiating.   </p>\n\n<p>If you are over thinking it then you may as well go to assembly. </p>\n\n<p>Or you can apply the unix philosophy and get it working.  Optimization is another step. </p>\n"}], "owner": {"reputation": 43, "user_id": 5813711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d952332b7adf1a11a68388cd6811cf50?s=128&d=identicon&r=PG&f=1", "display_name": "alex murphy", "link": "https://stackoverflow.com/users/5813711/alex-murphy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2089, "favorite_count": 1, "accepted_answer_id": 34891253, "answer_count": 4, "score": 3, "last_activity_date": 1453264173, "creation_date": 1453261317, "last_edit_date": 1453262101, "question_id": 34891181, "link": "https://stackoverflow.com/questions/34891181/for-array-loop-use-int-or-uint8-t", "title": "for array loop use int or uint8_t?", "body": "<p>If I am looping through an array, should I use <code>int</code> or <code>uint8_t</code>?</p>\n\n<pre><code>for (int i = 0; i &lt; 100; i++) {}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>for (uint8_t i = 0; i &lt; 100; i++) {}\n</code></pre>\n\n<p>Which is better when working with embedded systems?</p>\n"}, {"tags": ["c", "timer", "setitimer"], "answers": [{"tags": [], "owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "is_accepted": false, "score": 0, "last_activity_date": 1453265347, "creation_date": 1453265347, "answer_id": 34891799, "question_id": 34891082, "link": "https://stackoverflow.com/questions/34891082/run-timer-for-30-seconds/34891799#34891799", "title": "Run timer for 30 seconds", "body": "<p>After receiving a signal your program gets unpaused and it just goes to the end of main() and returns. You need to pause it again, of you want to wait for another signal.</p>\n"}, {"comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1453266974, "post_id": 34891823, "comment_id": 57522083, "body": "Also use <code>sigaction</code> in place of <code>signal</code>(old API)."}], "tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1453265841, "last_edit_date": 1453265841, "creation_date": 1453265532, "answer_id": 34891823, "question_id": 34891082, "link": "https://stackoverflow.com/questions/34891082/run-timer-for-30-seconds/34891823#34891823", "title": "Run timer for 30 seconds", "body": "<p>One problem you have is the first timer trigger ends the <code>pause</code> call and your program terminates.  The <code>pause</code> command is described like this:</p>\n\n<blockquote>\n  <p>The pause function suspends program execution until a signal arrives whose action is either to execute a handler function, or to terminate the process.</p>\n</blockquote>\n\n<p>Another problem is that you're using the \"interval\" incorrectly.  That value is supposed to be the number that the timer is reset to if it is a repeating timer.  So to trigger every second, you need to set it to <code>1</code>.</p>\n\n<p>Now, if you want it to run for 30 seconds, you'll need to maintain a counter, and then reset the timer after that counter is finished.  Finally, you need to keep re-pausing until enough interrupts have been serviced.</p>\n\n<p>Try this:</p>\n\n<pre><code>#include &lt;sys/time.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nvolatile int timer_remain = 30;\n\nvoid alarmhandler()\n{\n    static struct itimerval notimer = { 0 };\n    printf( \"Timer triggered\\n\" );\n    if( --timer_remain == 0 )\n    {\n        setitimer( ITIMER_REAL, &amp;notimer, 0 );\n    }\n}\n\nint main()\n{\n    struct itimerval timerval = { 0 };\n    timerval.it_value.tv_sec = 1;\n    timerval.it_interval.tv_sec = 1;\n\n    signal( SIGALRM, alarmhandler );\n    setitimer( ITIMER_REAL, &amp;timerval, 0 );\n\n    while( timer_remain &gt; 0 )\n    {\n        pause();\n    }\n\n    printf( \"Done\\n\" );\n    return 0;\n}\n</code></pre>\n\n<p>One last thing to note is that there's no guarantee that the timer will be delivered every second if system load is high.</p>\n"}], "owner": {"reputation": 187, "user_id": 3998511, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/cb5c998d16a4e769866786873a349f3a?s=128&d=identicon&r=PG&f=1", "display_name": "Saiyan", "link": "https://stackoverflow.com/users/3998511/saiyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 777, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1453265841, "creation_date": 1453260667, "last_edit_date": 1453261627, "question_id": 34891082, "link": "https://stackoverflow.com/questions/34891082/run-timer-for-30-seconds", "title": "Run timer for 30 seconds", "body": "<p>I want to trigger a timer each second for 30 seconds. However, the timer is triggered only once and the program stops. How to make the timer run for 30 seconds?</p>\n\n<pre><code>#include &lt;sys/time.h&gt;\n#include &lt;signal.h&gt;\n\nvoid alarmhandler(){\n    printf(\"\\nTimer triggered\");\n}\n\nvoid main(){\n    struct itimerval timerval;\n    signal(SIGALRM, alarmhandler);\n    timerval.it_value.tv_sec = 1;\n    timerval.it_value.tv_usec = 0;\n    timerval.it_interval.tv_sec = 30;\n    timerval.it_interval.tv_usec = 0;\n    setitimer(ITIMER_REAL, &amp;timerval, 0);\n    pause();    \n}\n</code></pre>\n"}]