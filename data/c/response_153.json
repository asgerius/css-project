[{"tags": ["c", "lua"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513208849, "post_id": 47803779, "comment_id": 82569092, "body": "What is the documentation link to your problem ? Did you search in documentation ? If yes, please include this in your question that will help no lua user of this library to help you and this will improve your question with more information."}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 1, "creation_date": 1513209498, "post_id": 47803779, "comment_id": 82569324, "body": "You could also <code>lua_pushvalue(L, -1)</code> first to create a copy of the object for <code>luaL_ref</code> to consume."}, {"owner": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "edited": false, "score": 2, "creation_date": 1513210382, "post_id": 47803779, "comment_id": 82569587, "body": "See <a href=\"https://stackoverflow.com/a/47516686/107090\">stackoverflow.com/a/47516686/107090</a>"}, {"owner": {"reputation": 954, "user_id": 1935009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/LmCmh.png?s=128&g=1", "display_name": "Yashas", "link": "https://stackoverflow.com/users/1935009/yashas"}, "edited": false, "score": 0, "creation_date": 1513227234, "post_id": 47803779, "comment_id": 82573553, "body": "You&#39;d be better of not messing with the C call stack. You could allocate the memory for your object in the heap and pass it to lua."}, {"owner": {"reputation": 16694, "user_id": 62811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1296aa435772e8ef5208967463bf506a?s=128&d=identicon&r=PG&f=1", "display_name": "Emiliano", "link": "https://stackoverflow.com/users/62811/emiliano"}, "reply_to_user": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "edited": false, "score": 0, "creation_date": 1513240601, "post_id": 47803779, "comment_id": 82579118, "body": "@lhf that link provided the answer. Thanks."}], "owner": {"reputation": 16694, "user_id": 62811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1296aa435772e8ef5208967463bf506a?s=128&d=identicon&r=PG&f=1", "display_name": "Emiliano", "link": "https://stackoverflow.com/users/62811/emiliano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "closed_date": 1513245024, "answer_count": 0, "score": 3, "last_activity_date": 1513208524, "creation_date": 1513208524, "question_id": 47803779, "link": "https://stackoverflow.com/questions/47803779/am-i-allowed-to-pop-arguments-from-the-stack", "closed_reason": "Duplicate", "title": "Am I allowed to pop arguments from the stack?", "body": "<p>When writing a C function that is designed to be called from lua, I know I can use functions like <code>lua_tointeger</code> etc. to get the argument I require. These function however just read values from the stack, they don't pop it.</p>\n\n<p>But in my case, one of the parameters the C function gets, is an object I want to register in the registry. I need to call <code>luaL_ref</code> to save the argument, which however pops the value from the stack (and so, it behaves differently than <code>lua_to*</code> functions. </p>\n\n<p>So, do I need to push the value back to the stack to avoid problems?</p>\n\n<pre><code>int r = luaL_ref(Lua::priv::L, LUA_REGISTRYINDEX);\nlua_rawgeti(Lua::priv::L, LUA_REGISTRYINDEX, r); // &lt;-- Do I need this?\n</code></pre>\n\n<p>I tried both with and without the call to <code>lua_rawgeti</code> and it seems my application never crashes anyway.</p>\n"}, {"tags": ["c", "combinations"], "comments": [{"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 0, "creation_date": 1513208192, "post_id": 47803668, "comment_id": 82568902, "body": "For what cases is it correct? For what cases is it incorrect? Please provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Completed, and Verifiable Example</a>."}, {"owner": {"reputation": 3, "user_id": 6306224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa6cc22fc1c58f519ea1f46c003c0ff?s=128&d=identicon&r=PG&f=1", "display_name": "Hanna Nassar", "link": "https://stackoverflow.com/users/6306224/hanna-nassar"}, "reply_to_user": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 0, "creation_date": 1513208454, "post_id": 47803668, "comment_id": 82568980, "body": "for 17 and 9 the answer is correct."}, {"owner": {"reputation": 3, "user_id": 6306224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa6cc22fc1c58f519ea1f46c003c0ff?s=128&d=identicon&r=PG&f=1", "display_name": "Hanna Nassar", "link": "https://stackoverflow.com/users/6306224/hanna-nassar"}, "reply_to_user": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 0, "creation_date": 1513208494, "post_id": 47803668, "comment_id": 82568996, "body": "for 17 and 6 the answer is wrong"}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "edited": false, "score": 0, "creation_date": 1513210182, "post_id": 47803668, "comment_id": 82569530, "body": "Can you show the code for <code>factorial</code>?"}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "edited": false, "score": 0, "creation_date": 1513210857, "post_id": 47803668, "comment_id": 82569705, "body": "Are you sure that this is the right formula?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6306224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa6cc22fc1c58f519ea1f46c003c0ff?s=128&d=identicon&r=PG&f=1", "display_name": "Hanna Nassar", "link": "https://stackoverflow.com/users/6306224/hanna-nassar"}, "edited": false, "score": 0, "creation_date": 1513209757, "post_id": 47803700, "comment_id": 82569388, "body": "the answers are int in my test cases, so the is no rounding"}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "reply_to_user": {"reputation": 3, "user_id": 6306224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa6cc22fc1c58f519ea1f46c003c0ff?s=128&d=identicon&r=PG&f=1", "display_name": "Hanna Nassar", "link": "https://stackoverflow.com/users/6306224/hanna-nassar"}, "edited": false, "score": 0, "creation_date": 1513210066, "post_id": 47803700, "comment_id": 82569493, "body": "@HannaNassar comb is <code>int</code>. It can only fit <code>int</code>  b,k is <code>int</code> and you are returning <code>long long</code>. If you expect result as <code>long long</code> do not do operation on <code>ints</code>."}], "tags": [], "owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "is_accepted": true, "score": 3, "last_activity_date": 1513208460, "last_edit_date": 1513208460, "creation_date": 1513207948, "answer_id": 47803700, "question_id": 47803668, "link": "https://stackoverflow.com/questions/47803668/im-trying-to-get-the-combination-probability-of-2-numbers/47803700#47803700", "title": "im trying to get the combination (probability) of 2 numbers", "body": "<p>Since <code>int comb</code> is <code>int</code> you are returning int!</p>\n\n<p>It does not matter that you are suppose to return <code>unsigned long long int first</code>. The result of the devision is rounded to <code>int</code> value, precision is lost. </p>\n"}], "owner": {"reputation": 3, "user_id": 6306224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa6cc22fc1c58f519ea1f46c003c0ff?s=128&d=identicon&r=PG&f=1", "display_name": "Hanna Nassar", "link": "https://stackoverflow.com/users/6306224/hanna-nassar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 47803700, "answer_count": 1, "score": 0, "last_activity_date": 1513208460, "creation_date": 1513207763, "question_id": 47803668, "link": "https://stackoverflow.com/questions/47803668/im-trying-to-get-the-combination-probability-of-2-numbers", "title": "im trying to get the combination (probability) of 2 numbers", "body": "<pre><code>unsigned long long int first( int b , int c){\nint h=b;\n//int k;\nfor(int k=b-1;k&gt;c;k--){\n\n    b=b*k;\n    }\nint comb=b/factorial(h-c);\nreturn comb;\n   }\n</code></pre>\n\n<p>this function return right answers for some cases and wrong answer to others. can anyone help me please is there anything wrong with this function?!</p>\n"}, {"tags": ["c", "memory", "memory-management"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1513211766, "post_id": 47803633, "comment_id": 82569911, "body": "If you were in C89, and had not included <code>stdlib.h</code>. then <code>free((void *)node);</code> would be correct and <code>free(node);</code> incorrect .  But those days are behind us"}], "answers": [{"tags": [], "owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "is_accepted": true, "score": 1, "last_activity_date": 1513207780, "creation_date": 1513207780, "answer_id": 47803670, "question_id": 47803633, "link": "https://stackoverflow.com/questions/47803633/freeing-a-structure-containing-void/47803670#47803670", "title": "Freeing a structure containing void *", "body": "<p>The cast is useless in this context, c auto-promote any pointer to <code>void *</code> in a lot of context(not for stdarg for exemple):</p>\n\n<pre><code>free((void*)node);\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>free(node);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": false, "score": 1, "last_activity_date": 1513207849, "creation_date": 1513207849, "answer_id": 47803681, "question_id": 47803633, "link": "https://stackoverflow.com/questions/47803633/freeing-a-structure-containing-void/47803681#47803681", "title": "Freeing a structure containing void *", "body": "<p>You are quite correct that casting to <code>void*</code> is gratuitious. And as it doesn't clarify anything for fellow programmers either, it shouldn't be there.</p>\n\n<p>Naturally, that's the case for both examples.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6214276"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 47803670, "answer_count": 2, "score": 0, "last_activity_date": 1513207849, "creation_date": 1513207500, "last_edit_date": 1513207661, "question_id": 47803633, "link": "https://stackoverflow.com/questions/47803633/freeing-a-structure-containing-void", "title": "Freeing a structure containing void *", "body": "<p>I came across this code implementing a queue</p>\n\n<pre><code>typedef struct Node {\n    void        * data;\n    struct Node * next;\n} node_t;\n</code></pre>\n\n<p>the node is free'd in this way</p>\n\n<pre><code>static void freeNode(node_t *node) { free((void*)node); }\n</code></pre>\n\n<p>Why is the node casted to <code>void *</code>?\nShould't have been just <code>free(node)</code>?</p>\n\n<p>And since I'm working on another structure :</p>\n\n<pre><code>typedef struct TaskNode {\n  void (* fun)(void *);\n  void * arg;\n  struct Task * next;\n} task_t;\n</code></pre>\n\n<p>Should I cast the pointer to the malloc'd structure to <code>void *</code> too before freeing it?</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1513205559, "post_id": 47803283, "comment_id": 82568068, "body": "Welcome to Stack Overflow.  Please read the <a href=\"https://stackoverflow.com/tour\">About</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> pages soon.  You should describe the errors more carefully.  In the first program, you have problems because your <code>int *</code> doesn&#39;t point to anything (points to null), but then you try to use it.  You should also heed the warnings from your compiler; you shouldn&#39;t try running code while the compiler is giving you warnings."}, {"owner": {"reputation": 1619, "user_id": 3342206, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/92d5672ff3c806eb71d84d7298d5be43?s=128&d=identicon&r=PG&f=1", "display_name": "8bittree", "link": "https://stackoverflow.com/users/3342206/8bittree"}, "edited": false, "score": 1, "creation_date": 1513206244, "post_id": 47803283, "comment_id": 82568269, "body": "&quot;an error&quot; is not very useful information. Please <a href=\"https://stackoverflow.com/posts/47803283/edit\">edit</a> your question to say what the error actually is."}], "answers": [{"tags": [], "owner": {"reputation": 5219, "user_id": 1166774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2186f597c73ae03edf7912fa5ec93cc7?s=128&d=identicon&r=PG&f=1", "display_name": "LoztInSpace", "link": "https://stackoverflow.com/users/1166774/loztinspace"}, "is_accepted": false, "score": 1, "last_activity_date": 1513205701, "creation_date": 1513205701, "answer_id": 47803344, "question_id": 47803283, "link": "https://stackoverflow.com/questions/47803283/scanf-and-printf-10-numbers-in-array-only-with-intiger-pointers-cant-use-intig/47803344#47803344", "title": "scanf and printf 10 numbers in array only with INTIGER POINTERS //cant use intiger rather then A[]. +1 more", "body": "<p>Your variable <code>i</code> is not pointing to anything.  You should really do something like</p>\n\n<pre><code>int *i=A\n\nscanf(\"%d\",i);\n\n++i;\n</code></pre>\n\n<p>and test for <code>I&lt;&amp;A[10]</code></p>\n\n<p>But it's a crappy, contrived question.  If you need to accept 10 values, then just do it in a way that makes sense.</p>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 9096130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca22baee029a94fcea2fc43ac48ba42f?s=128&d=identicon&r=PG&f=1", "display_name": "erikci", "link": "https://stackoverflow.com/users/9096130/erikci"}, "edited": false, "score": 0, "creation_date": 1513207655, "post_id": 47803546, "comment_id": 82568730, "body": "seems like i mixed them all up :D they were 2 different questions, as i typed 2 codes they belonged to 2 different questions :D"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 95, "user_id": 9096130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca22baee029a94fcea2fc43ac48ba42f?s=128&d=identicon&r=PG&f=1", "display_name": "erikci", "link": "https://stackoverflow.com/users/9096130/erikci"}, "edited": false, "score": 0, "creation_date": 1513207743, "post_id": 47803546, "comment_id": 82568767, "body": "@Ege&#199;\u0131kr\u0131k&#231;\u0131 It is unimportant how many questions are there. It is important how many tasks are there. And I showed one of approaches how the task can be performed.:)"}, {"owner": {"reputation": 95, "user_id": 9096130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca22baee029a94fcea2fc43ac48ba42f?s=128&d=identicon&r=PG&f=1", "display_name": "erikci", "link": "https://stackoverflow.com/users/9096130/erikci"}, "edited": false, "score": 0, "creation_date": 1513208183, "post_id": 47803546, "comment_id": 82568900, "body": "in your code i saw that u used this line; count_interval( const int *first, const int *last, int lower, int upper ) which belongs to another task.  one task was to read and write 10 numbers in array w/0 using intigers but pointers.  another one was to write the following C function:  int count_interval( int A[], int *last, int lower, int upper ) which returns the number of elements of A which are larger than or equal to lower and smaller than or equal to upper (lower \u2264 A[i] \u2264 upper). The function does not receive the size of the array, instead it receives a pointer (last).."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 95, "user_id": 9096130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca22baee029a94fcea2fc43ac48ba42f?s=128&d=identicon&r=PG&f=1", "display_name": "erikci", "link": "https://stackoverflow.com/users/9096130/erikci"}, "edited": false, "score": 0, "creation_date": 1513208266, "post_id": 47803546, "comment_id": 82568928, "body": "@Ege&#199;\u0131kr\u0131k&#231;\u0131 It is one of your tasks to write the corresponding function and I showed in one demonstrative program how all the tasks can be performed. I was not going to write instead of you all your code.:) What is unclear with the function?"}, {"owner": {"reputation": 95, "user_id": 9096130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca22baee029a94fcea2fc43ac48ba42f?s=128&d=identicon&r=PG&f=1", "display_name": "erikci", "link": "https://stackoverflow.com/users/9096130/erikci"}, "edited": false, "score": 0, "creation_date": 1513208389, "post_id": 47803546, "comment_id": 82568966, "body": "okey i though you kinda mixed it up but yeah it wasnt my intent. it just confused me a little bit :D thank you by the way."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1513209870, "last_edit_date": 1513209870, "creation_date": 1513206920, "answer_id": 47803546, "question_id": 47803283, "link": "https://stackoverflow.com/questions/47803283/scanf-and-printf-10-numbers-in-array-only-with-intiger-pointers-cant-use-intig/47803546#47803546", "title": "scanf and printf 10 numbers in array only with INTIGER POINTERS //cant use intiger rather then A[]. +1 more", "body": "<p>Here you are.:)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define N   10\n\nvoid input_array( int *a, size_t n )\n{\n    if ( n )\n    {\n        scanf( \"%i\", a );\n        input_array( a + 1, n - 1 );\n    }\n}\n\nvoid print_array( const int *a, size_t n )\n{\n    if ( n )\n    {\n        printf( \"%i \", *a );\n        print_array( a + 1, n - 1 );\n    }\n}\n\nsize_t count_interval( const int *first, const int *last, int lower, int upper )\n{\n    return first == last \n        ? 0 \n        : ( lower &lt;= *first &amp;&amp; *first &lt;= upper ) \n          + count_interval( first + 1, last, lower, upper );  \n}\n\nint main(void) \n{\n    int a[N];\n\n    printf( \"please type your %zu numbers: \", ( size_t )N );\n\n    input_array( a, N );\n\n    putchar( '\\n' );\n    print_array( a, N );\n    putchar( '\\n' );\n\n    printf( \"%zu\\n\", count_interval( a, a + N, 3, 7 ) );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output might look like</p>\n\n<pre><code>please type your 10 numbers: 0 1 2 3 4 5 6 7 8 9\n\n0 1 2 3 4 5 6 7 8 9 \n5\n</code></pre>\n\n<p>Or the functions <code>input_array</code> and <code>print_array</code> can be defined using only pointers like</p>\n\n<pre><code>void input_array( int *first, int *last )\n{\n    if ( first != last )\n    {\n        scanf( \"%i\", first );\n        input_array( first + 1, last );\n    }\n}\n\nvoid print_array( const int *first, const int *last )\n{\n    if ( first != last )\n    {\n        printf( \"%i \", *first );\n        print_array( first + 1, last );\n    }\n}\n</code></pre>\n\n<p>In this case they should be called like for example</p>\n\n<pre><code>input_array( a, a + N );\n</code></pre>\n\n<p>and</p>\n\n<pre><code>print_array( a, a + N );\n</code></pre>\n\n<p>As for you code then apart from syntax errors like for example this</p>\n\n<pre><code>int a[10] = (50,10,5,23,25,5,15,80,22,66); \n           ^^^                         ^^^\n</code></pre>\n\n<p>already these statements </p>\n\n<pre><code>int *i;\n\nprintf(\"please type your 10 numbers\\n\");\n*i=0;\n</code></pre>\n\n<p>lead to undefined behavior because the variable <code>i</code> is not initialized and has an indeterminate value.</p>\n\n<p>Also it is unclear why you are using the magic number 11. </p>\n\n<p>And in any case you are using the subscript operator instead of pointers.</p>\n\n<p>In fact all what you need in the both assignments is the following loop</p>\n\n<pre><code>for ( int *first = A; first != A + 10; ++first )\n{\n    //...\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 9096130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca22baee029a94fcea2fc43ac48ba42f?s=128&d=identicon&r=PG&f=1", "display_name": "erikci", "link": "https://stackoverflow.com/users/9096130/erikci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1513209870, "creation_date": 1513205319, "last_edit_date": 1513209189, "question_id": 47803283, "link": "https://stackoverflow.com/questions/47803283/scanf-and-printf-10-numbers-in-array-only-with-intiger-pointers-cant-use-intig", "title": "scanf and printf 10 numbers in array only with INTIGER POINTERS //cant use intiger rather then A[]. +1 more", "body": "<p>I have this assignment:</p>\n\n<blockquote>\n  <p>Write a C program (main function) which first reads 10 integers from the user inside an array A[10] and then prints these numbers on one line. Apart from the array A[] you can use only integer pointers in your program. No other variables are allowed.</p>\n</blockquote>\n\n<p>My attempt is this:</p>\n\n<pre><code>int main()\n{\n    int A[10];\n    int *i;\n\n    printf(\"please type your 10 numbers\\n\");\n    *i=0;\n        while (*i&lt;11)\n    {\n        scanf(\"%d\",&amp;A[*i]);\n        *i=*i+1;\n    }\n    *i=0;\nwhile (*i&lt;11)\n{\nprintf(\"%d \",A[*i]);\n*i=*i+1;\n}\nreturn 0;\n\n}\n</code></pre>\n\n<p>But even compailer is not giving any error, exe is shutting itself. I hope someone will help me to fix it and also to understand my mistake. </p>\n\n<blockquote>\n  <p>I have another task that is to write the following C function:\n   int count_interval( int A[], int *last, int lower, int upper )\n  which returns the number of elements of A which are larger than or equal to <code>lower</code> and smaller than or equal to <code>upper</code> (<code>lower \u2264 A[i] \u2264 upper</code>). The function does not receive the size of the array, instead it receives a\n  pointer (<code>last</code>) to the last element of the array.\n  main function should print \n  The number of elements of A which are in the interval [10, 20],\n  The number of \u201c5\u201ds in the first half of A,\n  The number of elements in the second half of A which are larger than 50.</p>\n</blockquote>\n\n<p>This is what I did: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n//b\nint count_interval(int *a, int *last, int lower, int upper)\n{\n    int *ptr;\n    int *ilk=a;\n    int *son=last;\n    int k, count=0;\n\n    for(; ilk!=son ;son--)\n        if(*son&gt;=lower &amp;&amp; *son&lt;=upper)\n            count++;\n    if(*son&gt;=lower &amp;&amp; *son&lt;=upper)\n        count++;\n    return count;\n}\n\n//a\nint count_interval(int *a, int *last, int lower, int upper);\n\nint main()\n{\n    int SIZE;\n    int a[10] = (50,10,5,23,25,5,15,80,22,66); //getting error here\n    int k, n;\n    int numberoffive=0;\n    int numberoffifty=0;\n    SIZE=10\n\n    for(k=0; k&lt;SIZE ;k++)\n        for(k=0; k&lt;SIZE/2 ;k++)\n            printf(\"first half %d\\n\",a[k]);\n    printf(\"\\n\");\n    for(; k&lt;SIZE ;k++)\n        printf(\"second half %d\\n\",a[k]);\n\n    if(a[k] &lt; 20 &amp;&amp; a[k] &gt; 10)\n        printf(\"between 10-20\\n\",a[k]); // not so sure about here \n\n    for(k=0, n=5; n&gt;=0 ; n--,a[k++])\n        if( a[k]==5 )\n            numberoffive++;\n    printf(\"\\n5's in first half = %d \\n\",numberoffive);\n\n    for(k=5, n=5; n&gt;=0 ; n--,a[k++])\n        if( a[k]&gt;50 )\n            numberoffifty++;\n    printf(\"\\nlarger then 50 in second half = %d\\n\", numberoffifty);\n\n    printf(\"\\n Counter= %d\\n\",count_interval(a ,&amp;a[SIZE-1],10,20));\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "glibc"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 5, "creation_date": 1513205496, "post_id": 47803235, "comment_id": 82568049, "body": "From the Fine Manual: <code>The  mempcpy()  function  is  nearly  identical  to the memcpy(3) function.  It copies n bytes from the object beginning at src into the object pointed to by dest.  But instead of        returning the value of dest it returns a pointer to the byte following the last written byte.</code>"}, {"owner": {"reputation": 410, "user_id": 1612915, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/EpMS1.png?s=128&g=1", "display_name": "mattmc", "link": "https://stackoverflow.com/users/1612915/mattmc"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1513206098, "post_id": 47803235, "comment_id": 82568226, "body": "Why the down votes?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1513206534, "post_id": 47803235, "comment_id": 82568372, "body": "Probably because your question can be answered by a simple RTFM? BTW: the [str|mem][lp]xxx() stem from BSD and are/were intended to actually use these useful return values. (but maybe you were confused by the double leading underscore?)"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1513207396, "post_id": 47803235, "comment_id": 82568629, "body": "<code>man mempcpy</code> did it for me. For help on man: <code>man man</code>"}, {"owner": {"reputation": 410, "user_id": 1612915, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/EpMS1.png?s=128&g=1", "display_name": "mattmc", "link": "https://stackoverflow.com/users/1612915/mattmc"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1513207556, "post_id": 47803235, "comment_id": 82568689, "body": "I guess my C skills are not on par. I thought a function declared with a void type didn&#39;t return anything"}, {"owner": {"reputation": 410, "user_id": 1612915, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/EpMS1.png?s=128&g=1", "display_name": "mattmc", "link": "https://stackoverflow.com/users/1612915/mattmc"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1513207766, "post_id": 47803235, "comment_id": 82568780, "body": "Yeah I was overlooking the fact that it&#39;s a void pointer."}, {"owner": {"reputation": 269529, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "edited": false, "score": 1, "creation_date": 1513207869, "post_id": 47803235, "comment_id": 82568814, "body": "@mattmc you are also missing the point that <code>__mempcpy</code> != <code>__memcpy</code>."}, {"owner": {"reputation": 410, "user_id": 1612915, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/EpMS1.png?s=128&g=1", "display_name": "mattmc", "link": "https://stackoverflow.com/users/1612915/mattmc"}, "reply_to_user": {"reputation": 269529, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "edited": false, "score": 0, "creation_date": 1513207994, "post_id": 47803235, "comment_id": 82568840, "body": "Thanks @shepmaster. Once again you post with a one liner and don&#39;t contribute any information."}, {"owner": {"reputation": 269529, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "edited": false, "score": 2, "creation_date": 1513208112, "post_id": 47803235, "comment_id": 82568875, "body": "@mattmc I&#39;m open to some feedback on how I could have better pointed out that <code>mem</code> <b>p</b> <code>cpy</code> is a different function than <code>memcpy</code>. Your code is <code>memset (__mempcpy</code>, but you state &quot;memcpy doesn&#39;t actually return anything&quot;."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1513208122, "post_id": 47803235, "comment_id": 82568881, "body": "Note: the pointer being <code>void*</code> is completely irrelevant here."}, {"owner": {"reputation": 410, "user_id": 1612915, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/EpMS1.png?s=128&g=1", "display_name": "mattmc", "link": "https://stackoverflow.com/users/1612915/mattmc"}, "reply_to_user": {"reputation": 269529, "user_id": 155423, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/419218774d04a581476ea1887a0921e0?s=128&d=identicon&r=PG", "display_name": "Shepmaster", "link": "https://stackoverflow.com/users/155423/shepmaster"}, "edited": false, "score": 1, "creation_date": 1513208460, "post_id": 47803235, "comment_id": 82568983, "body": "You are right @shepmaster. Sorry. Just getting mad at all the down votes. That&#39;s exactly what I needed"}], "answers": [{"comments": [{"owner": {"reputation": 410, "user_id": 1612915, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/EpMS1.png?s=128&g=1", "display_name": "mattmc", "link": "https://stackoverflow.com/users/1612915/mattmc"}, "edited": false, "score": 0, "creation_date": 1513206018, "post_id": 47803379, "comment_id": 82568207, "body": "Thanks for your response. I&#39;m familiar with the libc crate, but I figured I would try to actually port a bit of C code to Rust instead of using C bindings. It was going well until this part."}, {"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "edited": false, "score": 0, "creation_date": 1513224197, "post_id": 47803379, "comment_id": 82572812, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/18248206\">From Review</a>"}, {"owner": {"reputation": 4594, "user_id": 1478356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/996ee463b8f6b17a738f2e23f7ecfe9f?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1478356/stefan"}, "reply_to_user": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "edited": false, "score": 0, "creation_date": 1513235395, "post_id": 47803379, "comment_id": 82576575, "body": "@RyanK I don&#39;t see what essential part should have been included. Copy all the type definitions and extern declarations? Sounds like a bad idea to me."}], "tags": [], "owner": {"reputation": 1983, "user_id": 939280, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/luAYh.jpg?s=128&g=1", "display_name": "Ka\u011fan Kayal", "link": "https://stackoverflow.com/users/939280/ka%c4%9fan-kayal"}, "is_accepted": false, "score": 0, "last_activity_date": 1513230291, "last_edit_date": 1513230291, "creation_date": 1513205864, "answer_id": 47803379, "question_id": 47803235, "link": "https://stackoverflow.com/questions/47803235/how-can-memset-be-called-with-memcpy-as-the-first-argument-if-memcpy-doesnt-act/47803379#47803379", "title": "How can memset be called with memcpy as the first argument if memcpy doesn&#39;t actually return anything?", "body": "<p>Maybe not an exact answer to your question, but, there is <code>libc</code> crate at <a href=\"https://crates.io/crates/libc\" rel=\"nofollow noreferrer\">crates.io</a>. I searched in the documnetation for <code>x86_64-unknown-linux-gnu</code> and it seems the <code>tcgetattr()</code> function is already <a href=\"https://doc.rust-lang.org/libc/x86_64-unknown-linux-gnu/libc/fn.tcgetattr.html\" rel=\"nofollow noreferrer\">implemented</a>. On that page you can also click on [src] and see how it has been implemented.</p>\n"}], "owner": {"reputation": 410, "user_id": 1612915, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/EpMS1.png?s=128&g=1", "display_name": "mattmc", "link": "https://stackoverflow.com/users/1612915/mattmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1513230291, "creation_date": 1513205115, "last_edit_date": 1513207822, "question_id": 47803235, "link": "https://stackoverflow.com/questions/47803235/how-can-memset-be-called-with-memcpy-as-the-first-argument-if-memcpy-doesnt-act", "title": "How can memset be called with memcpy as the first argument if memcpy doesn&#39;t actually return anything?", "body": "<p>I'm attempting to port some libc code to Rust. Specifically, the __tcgetattr() function <a href=\"https://code.woboq.org/userspace/glibc/sysdeps/unix/sysv/linux/tcgetattr.c.html#80\" rel=\"nofollow noreferrer\">found in this file</a>.</p>\n\n<p>There is only one section that I'm having a problem with.</p>\n\n<pre><code>if (sizeof (cc_t) == 1 || _POSIX_VDISABLE == 0\n    || (unsigned char) _POSIX_VDISABLE == (unsigned char) -1)\n  memset (__mempcpy (&amp;termios_p-&gt;c_cc[0], &amp;k_termios.c_cc[0],\n                     __KERNEL_NCCS * sizeof (cc_t)),\n          _POSIX_VDISABLE, (NCCS - __KERNEL_NCCS) * sizeof (cc_t));\nelse\n  {\n    memcpy (&amp;termios_p-&gt;c_cc[0], &amp;k_termios.c_cc[0],\n            __KERNEL_NCCS * sizeof (cc_t));\n\n    for (size_t cnt = __KERNEL_NCCS; cnt &lt; NCCS; ++cnt)\n      termios_p-&gt;c_cc[cnt] = _POSIX_VDISABLE;\n  }\n</code></pre>\n\n<p>I'm confused by what memset is doing in the first logic statement.</p>\n\n<pre><code>      memset (__mempcpy (&amp;termios_p-&gt;c_cc[0], &amp;k_termios.c_cc[0],\n                     __KERNEL_NCCS * sizeof (cc_t)),\n          _POSIX_VDISABLE, (NCCS - __KERNEL_NCCS) * sizeof (cc_t));\n</code></pre>\n\n<p>From what I remember, memcpy doesn't actually return anything. It updates the value passed as the first parameter. I can't find any information on __memcpy, but I'm assuming it's similar. If so, why is memcpy being passed as a parameter when it doesn't have a return value?</p>\n"}, {"tags": ["c", "arrays", "pointers", "linked-list", "segmentation-fault"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1513204636, "post_id": 47803135, "comment_id": 82567694, "body": "<code>wordHolder</code> is not null-terminated when either <code>strdup</code> or <code>strlen</code> is called."}, {"owner": {"reputation": 13, "user_id": 7165158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/884f9903f18efff01a92f05f4769b5a1?s=128&d=identicon&r=PG&f=1", "display_name": "Brian T Brennglass", "link": "https://stackoverflow.com/users/7165158/brian-t-brennglass"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1513204742, "post_id": 47803135, "comment_id": 82567744, "body": "I changed the declaration of wordHolder to:         \t    char wordHolder[1240] = {&#39;\\0&#39;};  It still failed"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1513204816, "post_id": 47803135, "comment_id": 82567788, "body": "We are not chasing moving goalposts here. Post your actual code and leave it as is."}, {"owner": {"reputation": 4893, "user_id": 194709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTCwx.png?s=128&g=1", "display_name": "Chris O", "link": "https://stackoverflow.com/users/194709/chris-o"}, "edited": false, "score": 0, "creation_date": 1513204820, "post_id": 47803135, "comment_id": 82567791, "body": "Fill the entire array with zeros, after declaration."}, {"owner": {"reputation": 13, "user_id": 7165158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/884f9903f18efff01a92f05f4769b5a1?s=128&d=identicon&r=PG&f=1", "display_name": "Brian T Brennglass", "link": "https://stackoverflow.com/users/7165158/brian-t-brennglass"}, "edited": false, "score": 0, "creation_date": 1513205248, "post_id": 47803135, "comment_id": 82567936, "body": "It workded. Thanks. However, it only prints out NULL:("}, {"owner": {"reputation": 66, "user_id": 9032857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4399dc80b1e694909b0177bfbd4e9db?s=128&d=identicon&r=PG&f=1", "display_name": "Ora", "link": "https://stackoverflow.com/users/9032857/ora"}, "edited": false, "score": 0, "creation_date": 1513267602, "post_id": 47803135, "comment_id": 82596873, "body": "where is count incremented?  Also, you need to update wordHolder before you update your new node"}], "owner": {"reputation": 13, "user_id": 7165158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/884f9903f18efff01a92f05f4769b5a1?s=128&d=identicon&r=PG&f=1", "display_name": "Brian T Brennglass", "link": "https://stackoverflow.com/users/7165158/brian-t-brennglass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513231170, "creation_date": 1513204476, "last_edit_date": 1513231170, "question_id": 47803135, "link": "https://stackoverflow.com/questions/47803135/segmentation-fault-when-accessing-strings-from-linked-list", "title": "Segmentation fault when accessing strings from linked list", "body": "<p>I am trying to write a program that counts how many times a word is used in a text document. To do this I created a function called wordList that creates a linked list with a node for each word. Unfortunately, whenever I try to read a word from the linked list with printf there is a segmentation fault. I believe this is because the linked list is not actually copying any of the words. I am wondering how I can resolve this issue. At the moment I do not know how to proceed. Thanks:)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\nstruct Node {\n        int timesUsed;\n        char* word;\n        struct Node* next;\n};\n\nstruct Node* wordList(FILE *fp, struct Node* head);\nstruct Node* createNode(struct Node* head, char* word);\nchar* title(char* file);//creates file name based on command line input\n\n\nint main(int argc, char** argv){\n    //Access file information---------------------------------------------\n    FILE *fp;\n    char* fileName = title(argv[1]);\n    fp = fopen(fileName, \"r\");\n\n    //Define Head node--------------------------------------------------------\n\n    struct Node* head = (struct Node*)malloc(sizeof(struct Node));\n\n    if (head == NULL){\n        printf(\"there is not enough memory on your device to continue\\n\");\n    }\n    //Access words--------------------------------------------------------\n\n    head = wordList(fp, head);\n    printf(\"%s\\n\",head-&gt;word);\n\n\n    free(head);\n    free(fileName);\n    return 0;\n}\n\n\n//Function that is causing problems==================================\nstruct Node* wordList(FILE *fp, struct Node* head){\n    char c;\n    char wordHolder[1240];//characters\n    int j = 0;\n    int count = 0;\n\n    do{\n    c = getc(fp);\n    printf(\"%c\\n\",c);\n    if(isalpha(c) || isdigit(c) || c == '\\''){\n        wordHolder[j] = c;\n        j++;\n    }\n    else{\n        if(count){\n            char* tempWord = strdup(wordHolder);\n            head-&gt;word = tempWord;\n            head-&gt;timesUsed = 1;\n            head-&gt;next = NULL;\n                count = 1;\n                j = 0;\n                for(i = 0; i&lt; strlen(wordHolder); i++){\n                    wordHolder[i] = '\\0';\n                }\n            }\n\n            else{\n                head = createNode(head, wordHolder);\n                j = 0;\n                for(i = 0; i&lt; strlen(wordHolder); i++){\n                    wordHolder[i] = '\\0';\n                }\n\n            }\n        }       \n    }\n    while(c != EOF);\n    return head;\n}\n\n//Creates a new node at end of list=====================================\nstruct Node* createNode(struct Node* head, char* word){\n    struct Node* temp = head;\n\n    while(temp != NULL){\n        temp = temp-&gt;next;\n    }\n\n    temp = (struct Node*)malloc(sizeof(struct Node));\n    temp-&gt;timesUsed = 1;\n    char* tempWord = strdup(word);\n    temp-&gt;word = tempWord;\n    temp-&gt;next = NULL;\n\n    return head;\n}\n\n\n//Creates fileName======================================\nchar* title(char* file){\n    char nameOfFile[500];\n    strcpy(nameOfFile, file);\n    strcat(nameOfFile, \".txt\");\n    char* temp;\n    temp = strdup(nameOfFile);\n\n    if(temp == NULL){\n        printf(\"Your computer has litte memory.\\n\");\n    }\n    return temp;\n}\n</code></pre>\n"}, {"tags": ["c", "process", "synchronization"], "comments": [{"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513204388, "post_id": 47803062, "comment_id": 82567611, "body": "You can do whatever you want between your two loops."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1513204393, "post_id": 47803062, "comment_id": 82567614, "body": "Right after the spawning loop?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1513204639, "post_id": 47803062, "comment_id": 82567696, "body": "After you&#39;ve forked 10 children, your main process can go about its own business, executing every 5 seconds.  You&#39;ll need to think about how (whether) you need to wait for children to die, or will the be reliable and not die unexpectedly."}, {"owner": {"reputation": 93, "user_id": 9044760, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1544801025597539/picture?type=large", "display_name": "Bryan Shtjefni", "link": "https://stackoverflow.com/users/9044760/bryan-shtjefni"}, "edited": false, "score": 0, "creation_date": 1513249026, "post_id": 47803062, "comment_id": 82584494, "body": "So in between the fork and the killing of the children the parent can do all his tasks without interfering with the child? That is just what I was looking for.. Thank you all!"}], "owner": {"reputation": 93, "user_id": 9044760, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1544801025597539/picture?type=large", "display_name": "Bryan Shtjefni", "link": "https://stackoverflow.com/users/9044760/bryan-shtjefni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513204106, "creation_date": 1513204106, "question_id": 47803062, "link": "https://stackoverflow.com/questions/47803062/c-parent-performing-simultaneously-with-his-n-children", "title": "C - parent performing simultaneously with his N children", "body": "<p>I am developing a project for an assignment and we must fork 10 children processes and let them to their specific tasks. Meanwhile the parent needs to do specific actions every 5 seconds simultaneously with the execution of his children. What is bothering me is that I know that the parent needs to wait for all his children to process before doing tasks but when I am forking multiple child through a for cycle the action that the parent makes are repeated for 10 times (as 10 is the number of forks I need to make). Here is my code: </p>\n\n<pre><code>for (int i = 0; i &lt; 10; ++i) {\n\n    switch (pids[i] = fork()) {\n\n        case -1:\n            fprintf(stderr,\"Error #%03d: %s\\n\", errno, strerror(errno));\n            exit(1);\n            break;\n\n        case 0:\n           /*\n            * child tasks\n            */              \n            exit(0);\n            break;\n\n        default:\n            break;\n    }\n}\n\nfor (int k = 0; k &lt; init_people; k++) {\n    waitpid(pids[k], &amp;returnStatus, 0);\n}\n</code></pre>\n\n<p>What I would like to know is if there is a way for the parent to do his task simultaneously with the execution of his children (not before or after they have completed their own execution) but outside of the cycle so that is not repeated 10 times. Thank you in advance for your time.</p>\n"}, {"tags": ["c", "embedded-linux"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1513202596, "post_id": 47802727, "comment_id": 82566957, "body": "Consider adding <code>memset(&amp;tr, 0, sizeof tr);</code> before writing the values."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1513202748, "post_id": 47802727, "comment_id": 82567012, "body": "<code>tr.tx_buf = (uint64)WriteBuffer;</code> This looks like an assignment to a (char) pointer. Why via a cast to an integer? Extra question: what are WriteBuffer and ReadBuffer?"}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1514554455, "post_id": 47802727, "comment_id": 83015940, "body": "It might be that your SPI host controller is using DMA with special alignment  requirement. Or even you might found a bug there."}], "owner": {"reputation": 21, "user_id": 9096072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4541df52d26a26a90e870cf9aae51a5?s=128&d=identicon&r=PG&f=1", "display_name": "T. Lanigan", "link": "https://stackoverflow.com/users/9096072/t-lanigan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1535111563, "creation_date": 1513202261, "last_edit_date": 1535111563, "question_id": 47802727, "link": "https://stackoverflow.com/questions/47802727/spi-ioctl-hangs-when-length-is-256", "title": "SPI ioctl hangs when length is 256", "body": "<p>Not sure if it's a C question or something with the driver.</p>\n\n<p>I'm having issues using the ioctl for SPI transfers.\nI'm on a yocto linux device using the spidev driver.</p>\n\n<p>I'm only having issues if the buffer length is 255, 256, or 257 bytes. The program hangs and cannot be killed, even with a 'kill -9' command. Any other length works fine and the transfer is successful.</p>\n\n<p>This is the call, pretty straightforward.</p>\n\n<pre><code>struct spi_ioc_transfer tr;\ntr.tx_buf = (uint64)WriteBuffer;\ntr.rx_buf = (uint64)readBuffer;\ntr.len = Count;\ntr.delay_usecs = 0;\ntr.speed_hz = 1000000;\ntr.bits_per_word = 8;\n\nioctl( _fileDescriptor, SPI_IOC_MESSAGE( 1 ), &amp;tr )\n</code></pre>\n\n<p>I can't understand why the length field would cause it to hang but any suggestions are appreciated.</p>\n"}, {"tags": ["c", "matrix"], "comments": [{"owner": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "edited": false, "score": 0, "creation_date": 1513202500, "post_id": 47802670, "comment_id": 82566913, "body": "Do you statically allocate M? Can you add that to the question?"}, {"owner": {"reputation": 21, "user_id": 6636125, "user_type": "registered", "profile_image": "https://graph.facebook.com/792939104110807/picture?type=large", "display_name": "Emanuel Camacho", "link": "https://stackoverflow.com/users/6636125/emanuel-camacho"}, "reply_to_user": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "edited": false, "score": 0, "creation_date": 1513202674, "post_id": 47802670, "comment_id": 82566985, "body": "Yes. It is statically allocated. @atru"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513203031, "post_id": 47802670, "comment_id": 82567116, "body": "<a href=\"https://en.wikipedia.org/wiki/Exponentiation_by_squaring\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Exponentiation_by_squaring</a>"}, {"owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "edited": false, "score": 0, "creation_date": 1513203557, "post_id": 47802670, "comment_id": 82567315, "body": "Maybe you are better of if you perform diagonalization A=MDM^T, as exp(A)=Mexp(D)M^T and for D=diag(x1, ..., xn), exp(D)=diag(exp(x1),...,exp(xn))."}, {"owner": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "edited": false, "score": 0, "creation_date": 1513203902, "post_id": 47802670, "comment_id": 82567449, "body": "Perhaps you&#39;re allocation is too small? I mean M[V1][V2] where either or both V1 and V2 become smaller than what you&#39;re requesting? Trivial, but it happens."}, {"owner": {"reputation": 21, "user_id": 6636125, "user_type": "registered", "profile_image": "https://graph.facebook.com/792939104110807/picture?type=large", "display_name": "Emanuel Camacho", "link": "https://stackoverflow.com/users/6636125/emanuel-camacho"}, "edited": false, "score": 0, "creation_date": 1513204029, "post_id": 47802670, "comment_id": 82567488, "body": "The allocation is enough. The problem is the overflow."}, {"owner": {"reputation": 21, "user_id": 6636125, "user_type": "registered", "profile_image": "https://graph.facebook.com/792939104110807/picture?type=large", "display_name": "Emanuel Camacho", "link": "https://stackoverflow.com/users/6636125/emanuel-camacho"}, "reply_to_user": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "edited": false, "score": 0, "creation_date": 1513204127, "post_id": 47802670, "comment_id": 82567520, "body": "@Jodocus What is the x1,x2,...,xn in the D diagonal?"}, {"owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "edited": false, "score": 0, "creation_date": 1513204201, "post_id": 47802670, "comment_id": 82567545, "body": "@EmanuelCamacho The eigenvalues, provided A is diagonalizable. If not, you have to determine Jordan normal form; the matrix exponential however has a similiar structure."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1513204508, "post_id": 47802670, "comment_id": 82567646, "body": "Please show an example of input, desired output, and actual output. &quot;produces wrong outputs&quot; is not a valid problem description."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1513204957, "post_id": 47802670, "comment_id": 82567841, "body": "Too much code missing from this post."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1513213342, "post_id": 47802670, "comment_id": 82570307, "body": "Show a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. What is the first value of <code>N</code> for which the code fails? What are the array dimensions? What are the initial array values? What results do you expect? What results do you get?"}, {"owner": {"reputation": 21, "user_id": 6636125, "user_type": "registered", "profile_image": "https://graph.facebook.com/792939104110807/picture?type=large", "display_name": "Emanuel Camacho", "link": "https://stackoverflow.com/users/6636125/emanuel-camacho"}, "edited": false, "score": 1, "creation_date": 1513356554, "post_id": 47802670, "comment_id": 82636896, "body": "I discovered the problem. To calculate the matrix exponential I&#39;m using a factorial function. The factorial returns, for some values of N, infinity."}], "owner": {"reputation": 21, "user_id": 6636125, "user_type": "registered", "profile_image": "https://graph.facebook.com/792939104110807/picture?type=large", "display_name": "Emanuel Camacho", "link": "https://stackoverflow.com/users/6636125/emanuel-camacho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513202622, "creation_date": 1513201966, "last_edit_date": 1513202622, "question_id": 47802670, "link": "https://stackoverflow.com/questions/47802670/matrix-exponential-multiplication-c-code", "title": "Matrix Exponential [Multiplication - C Code]", "body": "<p>I'm currently developing a function to calculate the <a href=\"https://en.wikipedia.org/wiki/Matrix_exponential\" rel=\"nofollow noreferrer\">matrix exponential</a>. For that, I need a function that multiplies a X matrix n times. The code below gives good results for small values of n, but when increasing this parameter, the code produces wrong outputs, probably due to the large numbers generated. Is there any solution to this, or another way to compute the matrix multiplication?</p>\n\n<p>EDIT:</p>\n\n<ul>\n<li>The Matrix M is statically allocated.</li>\n</ul>\n\n<p>Code:</p>\n\n<pre><code>void Multiply_Matrix_N_Times( double M[NL][NC], int L, int N )\n{\ndouble A[NL][NC];\ndouble A_AUX[NL][NC];\n\nint i, j;\n\nfor(i=0;i&lt;L;i++)\n{\n    for(j=0;j&lt;L;j++)\n    {\n        if(i==j)\n            A[i][j]=1;\n        else\n            A[i][j]=0;\n    }\n}\n\nfor(i=1;i&lt;=N;i++)\n{\n    Multiply_Matrices(A,M,A_AUX,L,L,L,L);\n    Copy_Matrix(A_AUX,A,L,L);\n}\n\n//printMatrix_REAL(A,L,L);\n//getchar();\n\nCopy_Matrix(A,M,L,L);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "delphi", "dll", "callback"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 3, "creation_date": 1513201351, "post_id": 47802397, "comment_id": 82566420, "body": "Which language, C or C++?  They are different languages.  For example, C++ has operator and function overloading which may result in name mangling."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1513203289, "post_id": 47802397, "comment_id": 82567205, "body": "The C functions look like cdecl"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4045223, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7xt7JoJ80yQ/AAAAAAAAAAI/AAAAAAAAAHY/P1YxKvH27kI/photo.jpg?sz=128", "display_name": "ErkanK", "link": "https://stackoverflow.com/users/4045223/erkank"}, "edited": false, "score": 0, "creation_date": 1513239514, "post_id": 47803451, "comment_id": 82578535, "body": "So which one I prefer  and How about it is usage? Sorry, I am confused. Thank you very much."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 75, "user_id": 4045223, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7xt7JoJ80yQ/AAAAAAAAAAI/AAAAAAAAAHY/P1YxKvH27kI/photo.jpg?sz=128", "display_name": "ErkanK", "link": "https://stackoverflow.com/users/4045223/erkank"}, "edited": false, "score": 0, "creation_date": 1513239915, "post_id": 47803451, "comment_id": 82578720, "body": "@ErkanK which one you prefer is up to you. Use whatever one works for your situation."}, {"owner": {"reputation": 75, "user_id": 4045223, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7xt7JoJ80yQ/AAAAAAAAAAI/AAAAAAAAAHY/P1YxKvH27kI/photo.jpg?sz=128", "display_name": "ErkanK", "link": "https://stackoverflow.com/users/4045223/erkank"}, "edited": false, "score": 0, "creation_date": 1513320395, "post_id": 47803451, "comment_id": 82616499, "body": "I tried your definations yesterday, but I stil couldn&#39;t solve my problem. First off all I tried second defination. I got &quot;Access Vioaltion&quot; error at myPaymentResultCallback function on begin always. So it didn&#39;t solve my problem. But I love this defination.:) The First defination is that always said me with debugger &quot;Variable required&quot;. So what is my fault about in this situation"}, {"owner": {"reputation": 75, "user_id": 4045223, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7xt7JoJ80yQ/AAAAAAAAAAI/AAAAAAAAAHY/P1YxKvH27kI/photo.jpg?sz=128", "display_name": "ErkanK", "link": "https://stackoverflow.com/users/4045223/erkank"}, "edited": false, "score": 0, "creation_date": 1513328715, "post_id": 47803451, "comment_id": 82620268, "body": "Sorrrryy. Execuse Me. It is my fault. Your second solution is correct for me. The problem is that &quot;cdecl&quot;. I forgot use it for myPaymentResultCallback function in my example. Thank you again"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1513240142, "last_edit_date": 1513240142, "creation_date": 1513206309, "answer_id": 47803451, "question_id": 47802397, "link": "https://stackoverflow.com/questions/47802397/how-to-convert-c-c-callback-functon-to-delphi/47803451#47803451", "title": "How to convert c/c++ callback functon to delphi", "body": "<p>Your Delphi translation has some errors in it.  Try this instead:</p>\n\n<pre><code>type\n  TPaymentResultCallback = procedure(AResult: Integer); cdecl;\n\nfunction ARPaymentItemCredit(HInst: THandle; const TerminalNo: PAnsiChar;\n  const Description: PAnsiChar; Amount: Double; CurrencyID: Integer;\n  ReceiptID: Integer; onPaymentResult: TPaymentResultCallback): Integer;\nvar\n  MyFunct: function(const TerminalNo: PAnsiChar; const Description: PAnsiChar;\n    Amount: Double; CurrencyID: Integer; ReceiptID: Integer;\n    onPaymentResult: TPaymentResultCallback): Integer; cdecl;\nbegin\n  @MyFunct := GetProcAddress(HInst, 'AR_payment_item_credit');\n  if Assigned(MyFunct) then\n    Result := MyFunct(TerminalNo, Description, Amount, CurrencyID, ReceiptID, onPaymentResult)\n  else\n    Result := 0;\nend;\n</code></pre>\n\n<p>The most important difference from your code is <code>TPaymentResultCallback</code> is not declared as <code>of object</code>.  You can't use a Delphi-style method pointer as a C-style function pointer, which means you can't use a non-static class method for your DLL callback, at least in this example.</p>\n\n<p>There is a simple workaround, though - store the desired method pointer in a global variable, and then use a private callback function to invoke it, eg:</p>\n\n<pre><code>type\n  TPaymentResultEvent = procedure(AResult: Integer) of object;\n\nvar\n  gOnPaymentResult: TPaymentResultEvent;\n\nprocedure myPaymentResultCallback(AResult: Integer); cdecl;\nbegin\n  if Assigned(gOnPaymentResult) then\n    gOnPaymentResult(AResult);\nend;\n\nfunction ARPaymentItemCredit(HInst: THandle; const TerminalNo: PAnsiChar;\n  const Description: PAnsiChar; Amount: Double; CurrencyID: Integer;\n  ReceiptID: Integer; onPaymentResult: TPaymentResultEvent): Integer;\ntype\n  TPaymentResultCallback = procedure(AResult: Integer); cdecl;\nvar\n  MyFunct: function(const TerminalNo: PAnsiChar; const Description: PAnsiChar;\n    Amount: Double; CurrencyID: Integer; ReceiptID: Integer;\n    onPaymentResult: TPaymentResultCallback): Integer; cdecl;\nbegin\n  @MyFunct := GetProcAddress(HInst, 'AR_payment_item_credit');\n  if Assigned(MyFunct) then\n  begin\n    gOnPaymentResult := onPaymentResult;\n    Result := MyFunct(TerminalNo, Description, Amount, CurrencyID, ReceiptID, @myPaymentResultCallback)\n  end\n  else\n    Result := 0;\nend;\n</code></pre>\n\n<p>Needless to say, this won't work if you need to have multiple classes calling <code>ARPaymentItemCredit()</code> at the same time, thus requiring the DLL to call different methods each time.</p>\n\n<p><em>IF</em> the DLL provides a way to associate a user-defined value with the callback (and your example appears to not have that option, unless there is a separate DLL function for that purpose), things get easier.  You can simply pass (a pointer to) the actual method pointer as that user-defined value, and then your private callback function can invoke it directly.  No global variable is needed, making it re-entrant for multiple events to run in parallel. But that is a big <em>IF</em>.</p>\n"}], "owner": {"reputation": 75, "user_id": 4045223, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7xt7JoJ80yQ/AAAAAAAAAAI/AAAAAAAAAHY/P1YxKvH27kI/photo.jpg?sz=128", "display_name": "ErkanK", "link": "https://stackoverflow.com/users/4045223/erkank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 47803451, "answer_count": 1, "score": 2, "last_activity_date": 1513328904, "creation_date": 1513200579, "last_edit_date": 1513328904, "question_id": 47802397, "link": "https://stackoverflow.com/questions/47802397/how-to-convert-c-c-callback-functon-to-delphi", "title": "How to convert c/c++ callback functon to delphi", "body": "<pre><code>typedef void (*onPaymentResultCallback) (int result);\n\nDLL_EXPORT int AR_payment_item_credit(const char *terminal_no, const char *description, double amount, enum currency_id cid, int receiptid,\n                onPaymentResultCallback cb);\n</code></pre>\n\n<p>I convert above definetions like this:</p>\n\n<pre><code>TonPaymentResultCallback = procedure(result:LongInt) of object;\n\nfunction AR_payment_item_credit(HInst:THandle; const TerminalNo:PAnsiChar; const Description:PAnsiChar; Amount:Double; CurrencyId:LongInt;\nRecepitID:LongInt; onPaymentResultCallback:tonPaymentResultCallback):LongInt;\nvar\n  MyFunct: function (const TerminalNo:PAnsiChar; const Description:PAnsiChar; Amount:Double; CurrencyId:LongInt;\n           RecepitID:LongInt; onPaymentResultCallback:tonPaymentResultCallback): LongInt; cdecl;\nbegin\n  Result := 0;\n\n  MyFunct:=GetProcAddress(HInst,'AR_payment_item_credit');\n  if Assigned(MyFunct) then\n    Result := MyFunct(TerminalNo, Description, Amount, CurrencyId, RecepitID,onPaymentResultCallback);\nend;\n</code></pre>\n\n<p>I know C/C++ dll function converting to Delphi, but callback is new for me. \nAre my definitions correct?</p>\n"}, {"tags": ["c", "visual-studio-2015", "compilation", "cl"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1513196472, "post_id": 47801462, "comment_id": 82564188, "body": "The VS has a load of project settings which you might want to mimic by specific <code>cl</code> parameters to get the exact same binary."}, {"owner": {"reputation": 3588, "user_id": 5462551, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/647be55cadd0e8edac86c55a337b264c?s=128&d=identicon&r=PG&f=1", "display_name": "noamgot", "link": "https://stackoverflow.com/users/5462551/noamgot"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1513196543, "post_id": 47801462, "comment_id": 82564227, "body": "How can I know those parameters? I would like the my command line <code>cl</code> compilation to behave like the VS does."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1513196712, "post_id": 47801462, "comment_id": 82564311, "body": "But it doesn&#39;t really matter, as having different results is pointing to some undefined behavior in your code, which should be fixed."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1513196911, "post_id": 47801462, "comment_id": 82564411, "body": "Try <code>char *mathString2 = &quot;64 &#47; 8 * 8 - 8 &#47; 8 &#47; 8 &#47; 8 * 8 * 8 * 8\\0&quot; &quot;1111&quot;;</code> to see that code is accessing out of bounds."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1513196912, "post_id": 47801462, "comment_id": 82564412, "body": "<code>if (mathString[j + 1] == &#39;\\0&#39;)</code> that could access outside the string since previous instruction increments <code>j</code> already. End your string with a space you could have this issue."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1513196982, "post_id": 47801462, "comment_id": 82564444, "body": "also you&#39;re incrementing <code>j</code> in the <code>for</code> loop and also <i>inside</i> the loop!!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1513197884, "post_id": 47801462, "comment_id": 82564878, "body": "&quot;I get different outputs for those programs&quot; is because code attempts to access beyond the two <code>&quot;64 &#47; 8 * 8 - 8 &#47; 8 &#47; 8 &#47; 8 * 8 * 8 * 8&quot;</code> <i>string literals</i> which have different data after them.  Re-write to only access within array bounds to remove the <i>undefined behavior</i>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1513198304, "post_id": 47801462, "comment_id": 82565075, "body": "&quot;what command should I give in order to get similar results?&quot; Catching UB is tricky.  Could use a string literal like <code>&quot;64 &#47; 8\\0+ 42\\0\\0\\0\\0&quot;</code> or arrays with random sentinels.  But UB is UB - sometimes it works, sometimes not."}, {"owner": {"reputation": 3588, "user_id": 5462551, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/647be55cadd0e8edac86c55a337b264c?s=128&d=identicon&r=PG&f=1", "display_name": "noamgot", "link": "https://stackoverflow.com/users/5462551/noamgot"}, "edited": false, "score": 0, "creation_date": 1513201331, "post_id": 47801462, "comment_id": 82566415, "body": "thanks for you comments. So you guys imply that it happens due to some code error? Still, I just can&#39;t get it - no matter whether the code is good or not (it&#39;s a student&#39;s code btw) - how come the results are different depending on where I compiled the code?"}], "answers": [{"comments": [{"owner": {"reputation": 3588, "user_id": 5462551, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/647be55cadd0e8edac86c55a337b264c?s=128&d=identicon&r=PG&f=1", "display_name": "noamgot", "link": "https://stackoverflow.com/users/5462551/noamgot"}, "edited": false, "score": 0, "creation_date": 1513201046, "post_id": 47801963, "comment_id": 82566312, "body": "<code>msbuild</code> cannot compile a single .c file directly. As far as I understand - it compiles VS project files (right?). If that&#39;s the case - it won&#39;t help me"}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1513198518, "creation_date": 1513198518, "answer_id": 47801963, "question_id": 47801462, "link": "https://stackoverflow.com/questions/47801462/compiling-in-visual-studio-vs-compiling-with-cl-in-the-command-line/47801963#47801963", "title": "compiling in Visual Studio vs. compiling with cl in the command line", "body": "<p>VS runs the same cl.exe compiler as you get from the command prompt, however building in VS will almost certainly pass far more command line arguments. </p>\n\n<p>Using \"msbuild\" from the command line would produce the same build sequence that VS would use.</p>\n"}], "owner": {"reputation": 3588, "user_id": 5462551, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/647be55cadd0e8edac86c55a337b264c?s=128&d=identicon&r=PG&f=1", "display_name": "noamgot", "link": "https://stackoverflow.com/users/5462551/noamgot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513198518, "creation_date": 1513196241, "question_id": 47801462, "link": "https://stackoverflow.com/questions/47801462/compiling-in-visual-studio-vs-compiling-with-cl-in-the-command-line", "title": "compiling in Visual Studio vs. compiling with cl in the command line", "body": "<p>I have a script for testing C programs in a university course. I compile the students' files using the Developer Command Prompt for VS2015 by simply running the command <code>cl file.c</code>. However, I found out that in some (pretty rare) cases, I get different outputs for those programs comparing to running them on VS2015 (we guide our students to check their programs in that IDE). <em>After some investigation I found that it happens when I include a header (.h) file</em> (see the code example below).</p>\n\n<p>Is <code>cl</code> actually the same compiler that VS2015 uses? if it is - then how come I get different results. If not - what command should I give in order to get similar results?</p>\n\n<p>Code example - a program that runs a functions that should evaluate a math-string. The evaluation is done from left-to-right, regardless of the ordinary math order precedence:</p>\n\n<h1>test_data.h</h1>\n\n<pre><code>#ifndef _TEST_DATA_H\n#define _TEST_DATA_H\n\nchar *mathString2 = \"64 / 8 * 8 - 8 / 8 / 8 / 8 * 8 * 8 * 8\";\n\n#endif /* _TEST_DATA_H */\n</code></pre>\n\n<h1>test.c</h1>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"test_data.h\"\n\n// Q1\ndouble string2uint(char str[])\n{\n    int i = 0;\n    double res = 0;\n    while (str[i] != '\\0') {\n        res = res * 10 + (str[i] - '0');\n        i++;\n    }\n    return res;\n}\n\nvoid calcMathString(char mathString[])\n{\n    int i, j = 0;\n    double e = 0;\n    char t = '+', str_n[101];\n    for (; mathString[j] != '\\0'; j++)\n    {\n        i = 0;\n        while (mathString[j] != '\\0') {\n            str_n[i] = mathString[j];\n            if (mathString[j] == ' ')\n            {\n                str_n[i] = '\\0';\n                i++;\n                j++;\n                break;\n            }\n            if (mathString[j + 1] == '\\0')\n            {\n                i++;\n                str_n[i] = '\\0';\n                j++;\n                break;\n            }\n            i++;\n            j++;\n        }\n        if (t == '+') {\n            e = e + string2uint(str_n);\n        }\n        if (t == '-') {\n            e = e - string2uint(str_n);\n        }\n        if (t == '*') {\n            e = e*string2uint(str_n);\n        }\n        if (t == '/') {\n            e = e / string2uint(str_n);\n        }\n        t = mathString[j];\n        j = j + 1;\n    }\n    printf(\"%s = %.3lf\\n\", mathString, e);\n}\n\nint main()\n{\n    char *mathString1 = \"64 / 8 * 8 - 8 / 8 / 8 / 8 * 8 * 8 * 8\";\n    calcMathString(mathString1);\n    calcMathString(mathString2);\n    return 0;\n}\n</code></pre>\n\n<p>note that <code>mathString1, mathString2</code> are identical.\nThe output I get compiling with <code>cl</code>:</p>\n\n<pre><code>64 / 8 * 8 - 8 / 8 / 8 / 8 * 8 * 8 * 8 = 56.000\n64 / 8 * 8 - 8 / 8 / 8 / 8 * 8 * 8 * 8 = 48.000\n</code></pre>\n\n<p>The output I get when running it in VS:</p>\n\n<pre><code>64 / 8 * 8 - 8 / 8 / 8 / 8 * 8 * 8 * 8 = 56.000\n64 / 8 * 8 - 8 / 8 / 8 / 8 * 8 * 8 * 8 = 56.000\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1513195833, "post_id": 47801350, "comment_id": 82563880, "body": "<code>struct Node NewMember;</code> =&gt; <code>struct Node *NewMember;</code> make that a pointer. then change all dots to <code>-&gt;</code> ... and buy a C book"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 3, "creation_date": 1513196330, "post_id": 47801350, "comment_id": 82564110, "body": "We have a <a href=\"https://stackoverflow.com/questions/562303\">list of good C books</a>...."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1513196424, "post_id": 47801350, "comment_id": 82564164, "body": "can we close this now? thanks"}, {"owner": {"reputation": 13, "user_id": 8983107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0358dd33684a90c8bad1b86c9f3d9bcd?s=128&d=identicon&r=PG&f=1", "display_name": "erans", "link": "https://stackoverflow.com/users/8983107/erans"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1513196458, "post_id": 47801350, "comment_id": 82564181, "body": "@Jean-Fran&#231;oisFabre Thanks. can you recommend on a C book ? especially one that focus pointers and know how to explain scopes, etc.. ? nvm just saw the answer of DevSoalr Thanks"}, {"owner": {"reputation": 4875, "user_id": 1144624, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c640c2471d507b73b93d5cb34eaebfed?s=128&d=identicon&r=PG", "display_name": "Kcvin", "link": "https://stackoverflow.com/users/1144624/kcvin"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1513196535, "post_id": 47801350, "comment_id": 82564223, "body": "Of course @Jean after the accepted answer, we&#39;re in it for the hats aren&#39;t we?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1513196547, "post_id": 47801350, "comment_id": 82564229, "body": "no, last book I read on C was a lame Turbo C book round 1991 :) but there are probably a lot of online tutorials around, and the list quoted above has some very good entries."}, {"owner": {"reputation": 4875, "user_id": 1144624, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c640c2471d507b73b93d5cb34eaebfed?s=128&d=identicon&r=PG", "display_name": "Kcvin", "link": "https://stackoverflow.com/users/1144624/kcvin"}, "edited": false, "score": 0, "creation_date": 1513196628, "post_id": 47801350, "comment_id": 82564271, "body": "@erans feel free to stop in <a href=\"https://chat.stackoverflow.com/rooms/54304/c\">C chat</a> to ask questions for clarifications on your readings."}, {"owner": {"reputation": 2064, "user_id": 2340064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a9fb497f40e2a2433e022fbbf50305?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim Makhun", "link": "https://stackoverflow.com/users/2340064/maxim-makhun"}, "edited": false, "score": 0, "creation_date": 1513197355, "post_id": 47801350, "comment_id": 82564634, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1675351/typedef-struct-vs-struct-definitions\">typedef struct vs struct definitions</a>"}, {"owner": {"reputation": 13, "user_id": 8983107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0358dd33684a90c8bad1b86c9f3d9bcd?s=128&d=identicon&r=PG&f=1", "display_name": "erans", "link": "https://stackoverflow.com/users/8983107/erans"}, "reply_to_user": {"reputation": 2064, "user_id": 2340064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a9fb497f40e2a2433e022fbbf50305?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim Makhun", "link": "https://stackoverflow.com/users/2340064/maxim-makhun"}, "edited": false, "score": 0, "creation_date": 1513198102, "post_id": 47801350, "comment_id": 82564988, "body": "@MaximMakhun This is not the same question."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1513196146, "post_id": 47801405, "comment_id": 82564030, "body": "that&#39;s not the only issue..."}, {"owner": {"reputation": 4875, "user_id": 1144624, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c640c2471d507b73b93d5cb34eaebfed?s=128&d=identicon&r=PG", "display_name": "Kcvin", "link": "https://stackoverflow.com/users/1144624/kcvin"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1513196260, "post_id": 47801405, "comment_id": 82564077, "body": "I didn&#39;t even read the second half of the function -_-"}, {"owner": {"reputation": 13, "user_id": 8983107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0358dd33684a90c8bad1b86c9f3d9bcd?s=128&d=identicon&r=PG&f=1", "display_name": "erans", "link": "https://stackoverflow.com/users/8983107/erans"}, "edited": false, "score": 0, "creation_date": 1513196354, "post_id": 47801405, "comment_id": 82564124, "body": "Thanks for the answer. If i return a pointer instead i can access all his fields normally when i&#39;m out of the function scope ?"}, {"owner": {"reputation": 4875, "user_id": 1144624, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c640c2471d507b73b93d5cb34eaebfed?s=128&d=identicon&r=PG", "display_name": "Kcvin", "link": "https://stackoverflow.com/users/1144624/kcvin"}, "edited": false, "score": 0, "creation_date": 1513196473, "post_id": 47801405, "comment_id": 82564190, "body": "Yes, but you have to remember to <code>free</code> pointers when you&#39;re done with them."}, {"owner": {"reputation": 13, "user_id": 8983107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0358dd33684a90c8bad1b86c9f3d9bcd?s=128&d=identicon&r=PG&f=1", "display_name": "erans", "link": "https://stackoverflow.com/users/8983107/erans"}, "edited": false, "score": 0, "creation_date": 1513196956, "post_id": 47801405, "comment_id": 82564435, "body": "Great thanks. now i&#39;m more confident in what im doing :) this basically answered my question here. the explanation that malloc returns a pointer was a great help."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1513197026, "post_id": 47801405, "comment_id": 82564472, "body": "Just in case you&#39;re learning C now with an eye on learning C++ later... <a href=\"https://www.youtube.com/watch?v=YnWhqhNdYyk&amp;t=428s\" rel=\"nofollow noreferrer\">Don&#39;t do that, learn C++ straight away.</a>"}, {"owner": {"reputation": 13, "user_id": 8983107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0358dd33684a90c8bad1b86c9f3d9bcd?s=128&d=identicon&r=PG&f=1", "display_name": "erans", "link": "https://stackoverflow.com/users/8983107/erans"}, "edited": false, "score": 0, "creation_date": 1513197323, "post_id": 47801405, "comment_id": 82564616, "body": "No.. I&#39;m learning C as part of my degree. I just need to get used to it after java :("}], "tags": [], "owner": {"reputation": 4875, "user_id": 1144624, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c640c2471d507b73b93d5cb34eaebfed?s=128&d=identicon&r=PG", "display_name": "Kcvin", "link": "https://stackoverflow.com/users/1144624/kcvin"}, "is_accepted": true, "score": 1, "last_activity_date": 1513197580, "last_edit_date": 1513197580, "creation_date": 1513195997, "answer_id": 47801405, "question_id": 47801350, "link": "https://stackoverflow.com/questions/47801350/how-to-properly-copy-a-struct-in-c/47801405#47801405", "title": "How to properly copy a struct in C", "body": "<p><code>malloc</code> returns a pointer to space in memory.  You are trying to assign it to a non-pointer type.  <code>NewMember</code> already has space allocated to it (in the scope of this function). To \"fix\" it, change the type of <code>NewMember</code>.</p>\n\n<p><code>struct Node * NewMember = malloc(sizeof(struct Node));</code></p>\n\n<p>Side note: you're going to want this function to return a pointer, or you should pass it two pointers to <code>struct Node</code>, where one parameter is <code>src</code> and one is <code>dest</code>, similar to the concept of <code>memcpy</code>.  I mention this because once <code>NewMember</code> leaves scope, accessing the returned value is undefined behavior.</p>\n\n<p>You will encounter issues with the latter part of the function as well--be sure to revise it and search how to properly copy things like strings in C.</p>\n"}, {"tags": [], "owner": {"reputation": 382, "user_id": 7384651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57bc46aa58fda6ed85134c550e1128ce?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza Mogni", "link": "https://stackoverflow.com/users/7384651/hamza-mogni"}, "is_accepted": false, "score": 0, "last_activity_date": 1513206965, "creation_date": 1513206965, "answer_id": 47803554, "question_id": 47801350, "link": "https://stackoverflow.com/questions/47801350/how-to-properly-copy-a-struct-in-c/47803554#47803554", "title": "How to properly copy a struct in C", "body": "<p>You should declare the newMember instance of your struct as a pointer, because the returning type of malloc() is of type void* .....then you should assign a pointer to a pointer.</p>\n\n<p>By the way you'll need to access the structure members by -> operator instead of the dot (e.g <code>NewMember-&gt;name = member.name;</code>)</p>\n\n<p>Also, i think you should consider passing a constant pointer to the function, it's better if we are talking limiting memory consumption.</p>\n\n<p>so the function prototype could become as : </p>\n\n<pre><code>struct Node Node_cp(struct Node* member);\n</code></pre>\n\n<p>And finally, you have to free the memory you have allocated dynamically using : <code>free(NewMember);</code></p>\n"}], "owner": {"reputation": 13, "user_id": 8983107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0358dd33684a90c8bad1b86c9f3d9bcd?s=128&d=identicon&r=PG&f=1", "display_name": "erans", "link": "https://stackoverflow.com/users/8983107/erans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "closed_date": 1513216978, "accepted_answer_id": 47801405, "answer_count": 2, "score": -4, "last_activity_date": 1513206965, "creation_date": 1513195742, "last_edit_date": 1513197560, "question_id": 47801350, "link": "https://stackoverflow.com/questions/47801350/how-to-properly-copy-a-struct-in-c", "closed_reason": "Not suitable for this site", "title": "How to properly copy a struct in C", "body": "<p>I have a struct element and I want to copy the element data (in all fields) to another element.</p>\n\n<p>So if this is the struct </p>\n\n<pre><code>struct Node{\n  char* name;\n  char type;\n  char* path;\n};\n</code></pre>\n\n<p>and this is my copy function : </p>\n\n<pre><code>struct Node Node_cp(struct Node member)\n{\n  struct Node NewMember;\n  NewMember=malloc(sizeof(struct Node))\n  //**Here i get error : Assigning to struct Node from incompatible type void* (why ?)**\n\n  NewMember.name=member.name;\n  NewMember.type=member.type;\n  NewMember.path=member.path;\n\n  return NewMember;\n}\n</code></pre>\n\n<p><strong>- My Questions :</strong></p>\n\n<ol>\n<li>why do i get this error on the malloc ?</li>\n<li>is this the right way to do it ? I'm going</li>\n<li><p>should i use malloc on <strong>newMember.path=malloc(sizeof(member.path))</strong>\nand in all other fields as well ?</p>\n\n<p>editing to explain why my question is different from using typedef in struct because the system think this is a duplicate question : Well as i understand in C this are totally different questions. I asked about copying an element and not on typedef :&lt;</p></li>\n</ol>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "loops", "for-loop", "while-loop"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1513193950, "post_id": 47800902, "comment_id": 82562907, "body": "Please, get a newer book. Ungainly means &quot;awkward&quot;. It is."}, {"owner": {"reputation": 4820, "user_id": 1309377, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/bYVAD.jpg?s=128&g=1", "display_name": "Andrew Lohr", "link": "https://stackoverflow.com/users/1309377/andrew-lohr"}, "edited": false, "score": 0, "creation_date": 1513194001, "post_id": 47800902, "comment_id": 82562931, "body": "Did you lookup what the word &quot;gainly&quot; means? &quot;awkward; clumsy&quot; its saying the for loop <code>for (i=0; i&lt;= MAXL\u0130NE -1 &amp;&amp; ((c = getchar())!= EOF) &amp;&amp; c != &#39;\\n&#39;;)</code> is very hard/awkward to read and to make it more readable"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1513194053, "post_id": 47800902, "comment_id": 82562961, "body": "The curly brackets aren&#39;t part of the <code>for</code> loop."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 4, "creation_date": 1513194232, "post_id": 47800902, "comment_id": 82563075, "body": "I&#39;m voting to close this question as off-topic because Stack Overflow is for questions about programming, not about vocabulary."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1513196113, "post_id": 47800902, "comment_id": 82564006, "body": "@AnttiHaapala It is a reasonable and good question for a beginner."}, {"owner": {"reputation": 21, "user_id": 7128579, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aGuM19Z8HGc/AAAAAAAAAAI/AAAAAAAAABE/ZK3oVpLE8Pc/photo.jpg?sz=128", "display_name": "O\u011fuz Kaan BULUT", "link": "https://stackoverflow.com/users/7128579/o%c4%9fuz-kaan-bulut"}, "edited": false, "score": 0, "creation_date": 1513198829, "post_id": 47800902, "comment_id": 82565328, "body": "Thanks for your attentions! (Vlad and Scott)"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7128579, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aGuM19Z8HGc/AAAAAAAAAAI/AAAAAAAAABE/ZK3oVpLE8Pc/photo.jpg?sz=128", "display_name": "O\u011fuz Kaan BULUT", "link": "https://stackoverflow.com/users/7128579/o%c4%9fuz-kaan-bulut"}, "edited": false, "score": 0, "creation_date": 1513199306, "post_id": 47801076, "comment_id": 82565548, "body": "Thanks for your attention! I compiled the original code in the book then typed same lines as an input but program did not printed any line as an answer (I use TDM - GCC 5.01 compiler suite)."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 21, "user_id": 7128579, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aGuM19Z8HGc/AAAAAAAAAAI/AAAAAAAAABE/ZK3oVpLE8Pc/photo.jpg?sz=128", "display_name": "O\u011fuz Kaan BULUT", "link": "https://stackoverflow.com/users/7128579/o%c4%9fuz-kaan-bulut"}, "edited": false, "score": 0, "creation_date": 1513202368, "post_id": 47801076, "comment_id": 82566858, "body": "@O\u011fuzKaanBULUT Your code contains many typos. For example what is s in this statement in the function s[i] = &#39;\\0&#39;;? Is not it line, is it? The function declaration does not have parameters, However you call it like while((len = getline(line, MAXLINE))).Also MAXLINE and MAXL\u0130NE as it is written in your code contains a different symbol."}, {"owner": {"reputation": 21, "user_id": 7128579, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aGuM19Z8HGc/AAAAAAAAAAI/AAAAAAAAABE/ZK3oVpLE8Pc/photo.jpg?sz=128", "display_name": "O\u011fuz Kaan BULUT", "link": "https://stackoverflow.com/users/7128579/o%c4%9fuz-kaan-bulut"}, "edited": false, "score": 0, "creation_date": 1513202983, "post_id": 47801076, "comment_id": 82567094, "body": "Yes, it was. I found also other typos and fixed them after posting here (initialized arrays with MAXLINE) but didn&#39;t work again."}, {"owner": {"reputation": 21, "user_id": 7128579, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aGuM19Z8HGc/AAAAAAAAAAI/AAAAAAAAABE/ZK3oVpLE8Pc/photo.jpg?sz=128", "display_name": "O\u011fuz Kaan BULUT", "link": "https://stackoverflow.com/users/7128579/o%c4%9fuz-kaan-bulut"}, "edited": false, "score": 0, "creation_date": 1513203318, "post_id": 47801076, "comment_id": 82567218, "body": "I restarted the machine then now it works...C seems so strange.."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 21, "user_id": 7128579, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aGuM19Z8HGc/AAAAAAAAAAI/AAAAAAAAABE/ZK3oVpLE8Pc/photo.jpg?sz=128", "display_name": "O\u011fuz Kaan BULUT", "link": "https://stackoverflow.com/users/7128579/o%c4%9fuz-kaan-bulut"}, "edited": false, "score": 0, "creation_date": 1513203613, "post_id": 47801076, "comment_id": 82567340, "body": "@O\u011fuzKaanBULUT  See my updated post."}, {"owner": {"reputation": 21, "user_id": 7128579, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aGuM19Z8HGc/AAAAAAAAAAI/AAAAAAAAABE/ZK3oVpLE8Pc/photo.jpg?sz=128", "display_name": "O\u011fuz Kaan BULUT", "link": "https://stackoverflow.com/users/7128579/o%c4%9fuz-kaan-bulut"}, "edited": false, "score": 0, "creation_date": 1513243930, "post_id": 47801076, "comment_id": 82581026, "body": "Your update is more well suited for a beginner, it does not force reader of the book to allocate his focus to copy function and extern calls. Thank you."}, {"owner": {"reputation": 21, "user_id": 7128579, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aGuM19Z8HGc/AAAAAAAAAAI/AAAAAAAAABE/ZK3oVpLE8Pc/photo.jpg?sz=128", "display_name": "O\u011fuz Kaan BULUT", "link": "https://stackoverflow.com/users/7128579/o%c4%9fuz-kaan-bulut"}, "edited": false, "score": 0, "creation_date": 1513244622, "post_id": 47801076, "comment_id": 82581484, "body": "Can i ask &#39;off-topic&#39; holders to remove their holds? It seems  no another question topic exists about this solution in entire site."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1513203521, "last_edit_date": 1513203521, "creation_date": 1513194583, "answer_id": 47801076, "question_id": 47800902, "link": "https://stackoverflow.com/questions/47800902/kr-first-edition-exercise-1-18-test-in-the-for-statement-is-ungainly/47801076#47801076", "title": "K&amp;R first edition, exercise 1.18 (test in the for statement is ungainly)", "body": "<p>As it follows from the comments it seems the for loop should be rewritten to make the code more readable.</p>\n\n<p>I can suggest the following solution substituting the for loop for a while loop.</p>\n\n<pre><code>getline() \n{\n    int c, i;\n    extern char line[];\n\n    i = 0;\n\n    while ( i &lt;= MAXLINE -1 &amp;&amp; ((c = getchar()) != EOF) &amp;&amp; c != '\\n' )\n    { \n        line[i++] = c;\n    }\n\n    if (c == '\\n')\n    {\n        line[i++] = c; \n    } \n\n    line[i] = '\\0';\n\n    return i;\n}\n</code></pre>\n\n<p>After rewriting the function I see a bug. The variable <code>c</code> must be initialized and the first sub-condition in the while loop also must be changed.</p>\n\n<p>So the function can look for example like</p>\n\n<pre><code>getline() \n{\n    int c, i;\n    extern char line[];\n\n    i = 0;\n    c = EOF;\n\n    while ( i &lt; MAXLINE - 1 &amp;&amp; ((c = getchar()) != EOF) &amp;&amp; c != '\\n' )\n    { \n        line[i++] = c;\n    }\n\n    if (c == '\\n')\n    {\n        line[i++] = c; \n    } \n\n    line[i] = '\\0';\n\n    return i;\n}\n</code></pre>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXLINE 10\n\nchar line[MAXLINE];\n\nint getline( void )\n{\n    int c, i;\n    extern char line[];\n\n    i = 0;\n    c = EOF;\n\n    while (i &lt; MAXLINE - 1 &amp;&amp; ((c = getchar()) != EOF) &amp;&amp; c != '\\n')\n    {\n        line[i++] = c;\n    }\n\n    if (c == '\\n')\n    {\n        line[i++] = c;\n    }\n\n    line[i] = '\\0';\n\n    return i;\n}\n\nint main( void )\n{\n    int max = 0;\n    int len;\n    char save[MAXLINE];\n\n    while ((len = getline()))\n        if (len &gt; max) {\n            max = len;\n            strcpy( save, line );\n        }\n    if (max &gt; 0)  printf(\"%s\", save);\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output (if to run as a console application in Windows) might look like</p>\n\n<pre><code>1\n123456789\n12345\n123\n1234567\n^Z\n123456789\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7128579, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aGuM19Z8HGc/AAAAAAAAAAI/AAAAAAAAABE/ZK3oVpLE8Pc/photo.jpg?sz=128", "display_name": "O\u011fuz Kaan BULUT", "link": "https://stackoverflow.com/users/7128579/o%c4%9fuz-kaan-bulut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "closed_date": 1513196180, "answer_count": 1, "score": 0, "last_activity_date": 1513263714, "creation_date": 1513193869, "last_edit_date": 1513263714, "question_id": 47800902, "link": "https://stackoverflow.com/questions/47800902/kr-first-edition-exercise-1-18-test-in-the-for-statement-is-ungainly", "closed_reason": "Not suitable for this site", "title": "K&amp;R first edition, exercise 1.18 (test in the for statement is ungainly)", "body": "<p>I could not had any conclusion about what the \"test in loop statement\" means in terms of programming. Is it about the tests in loop brackets or in curly brackets which are iterated by the loop ?</p>\n\n<p>Exercise 1.18 is here:</p>\n\n<pre><code>char line[];\nint max; \n\nmain() \n{\n    int len;\n    extern int max;\n    extern char save[];\n\n    max = 0;\n    while((len = getline(line, MAXLINE)))\n    if (len &gt; max){\n        max = len;\n        copy();\n    }\n    if (max &gt; 0)  printf(\"%s\",save);\n}\n\ngetline() \n{\n    int c,i;\n    extern char line[];\n\n    for (i=0; i&lt;= MAXL\u0130NE -1 &amp;&amp; ((c = getchar())!= EOF) &amp;&amp; c != '\\n';) \n        line[i++]=c;\n    if (c == '\\n')\n    {\n        line[i] = c; \n        ++i;\n    } \n    s[i] = '\\0';\n    return (i) ;\n}\n\ncopy()   \n{                          \n    int i;\n    extern char save[];\n    extern char line[];\n\n    int i = 0;\n    while( (save[i] = line[i] ) != '\\0') \n        ++i;\n}\n</code></pre>\n\n<blockquote>\n  <p>Exercise l-18. The test in the for statement of getline above is rather\n  ungainly. Rewrite the program to make it clearer, but retain the same\n  behavior at end of file or buffer overflow. Is this behavior the most reasonable?</p>\n</blockquote>\n"}, {"tags": ["c", "pointers", "struct", "linked-list"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1513191330, "post_id": 47800224, "comment_id": 82561612, "body": "The error message is not corresponding to the code. And paste it here, not as an image but as a text."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513191381, "post_id": 47800224, "comment_id": 82561637, "body": "Please post your output (error message) as text, and please post the error message you got from the code you posted (not from some other code)."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1513191569, "post_id": 47800224, "comment_id": 82561732, "body": "In this case, there&#39;s no need to pass a pointer-to-pointer."}, {"owner": {"reputation": 132, "user_id": 6257274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/458f5c571ce0898032447c610c014891?s=128&d=identicon&r=PG", "display_name": "Apoorve", "link": "https://stackoverflow.com/users/6257274/apoorve"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1513191617, "post_id": 47800224, "comment_id": 82561752, "body": "@EugeneSh. Sorry, I renamed the variables (for clarification) while asking. Added error message too."}, {"owner": {"reputation": 132, "user_id": 6257274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/458f5c571ce0898032447c610c014891?s=128&d=identicon&r=PG", "display_name": "Apoorve", "link": "https://stackoverflow.com/users/6257274/apoorve"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1513191801, "post_id": 47800224, "comment_id": 82561847, "body": "@JohnnyMopp - Yes but I forgot the context in which I wanted to ask this so I made it up :P"}], "answers": [{"tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1513191543, "creation_date": 1513191543, "answer_id": 47800318, "question_id": 47800224, "link": "https://stackoverflow.com/questions/47800224/c-when-a-pointer-to-a-pointer-to-a-struct-is-passed-in-a-function-why-cant/47800318#47800318", "title": "[C]: When a pointer to a pointer to a struct is passed in a function, why can&#39;t it change the elements of that struct?", "body": "<pre><code>*headRef-&gt;next\n</code></pre>\n\n<p>means</p>\n\n<pre><code>*(headRef-&gt;next)\n</code></pre>\n\n<p>but you want</p>\n\n<pre><code>(*headRef)-&gt;next\n</code></pre>\n"}], "owner": {"reputation": 132, "user_id": 6257274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/458f5c571ce0898032447c610c014891?s=128&d=identicon&r=PG", "display_name": "Apoorve", "link": "https://stackoverflow.com/users/6257274/apoorve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "closed_date": 1513191466, "accepted_answer_id": 47800318, "answer_count": 1, "score": -2, "last_activity_date": 1513191563, "creation_date": 1513191197, "last_edit_date": 1513191563, "question_id": 47800224, "link": "https://stackoverflow.com/questions/47800224/c-when-a-pointer-to-a-pointer-to-a-struct-is-passed-in-a-function-why-cant", "closed_reason": "Duplicate", "title": "[C]: When a pointer to a pointer to a struct is passed in a function, why can&#39;t it change the elements of that struct?", "body": "<pre><code>struct Node {\nint data;\nstruct Node *next;\n};\n\nvoid insertAfterHead(struct Node **a, int x) {\nstruct Node *newNode = (struct Node *)malloc(sizeof(struct Node));\nnewNode -&gt; data = x;\nnewNode -&gt; next = *a -&gt; next;\n*a -&gt; next = newNode;\n}\n\n\nint main() {\n    struct Node *head = NULL;\n    struct Node *second = NULL;\n    struct Node *third = NULL;\n\n    head = malloc(sizeof(struct Node));\n    second = malloc(sizeof(struct Node));\n    third = malloc(sizeof(struct Node));\n\n    head -&gt; data = 5;\n    head -&gt; next = second;\n\n    second -&gt; data = 10;\n    second -&gt; next = third;\n\n    third -&gt; data = 15;\n    third -&gt; next = NULL;\n\n    insertAfterHead(&amp;head, 10);\n\n    return 0;\n}\n</code></pre>\n\n<p>This is the error message I get on running the code:</p>\n\n<p>error: member reference base type 'struct Node *' is not a structure or union\n        newNode -> next = *a -> next;</p>\n\n<p>error: member reference base type 'struct Node *' is not a structure or union\n        *a -> next = newNode;</p>\n\n<p>Please be as descriptive as possible as I'm a beginner to C :)</p>\n"}, {"tags": ["c", "performance", "rendering", "sdl", "frame"], "comments": [{"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 0, "creation_date": 1513191825, "post_id": 47800009, "comment_id": 82561857, "body": "What&#39;s the value of <code>frametime</code>? Also, when using a hardware renderer you can be very confident that <code>SDL_RenderPresent()</code> is able to block until vertical sync \u2014 that is far and away the cleanest SDL way of yielding CPU time."}, {"owner": {"reputation": 41, "user_id": 8991375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9499566b92f6f301e51cc3f23073f1?s=128&d=identicon&r=PG&f=1", "display_name": "johnnie15", "link": "https://stackoverflow.com/users/8991375/johnnie15"}, "reply_to_user": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 0, "creation_date": 1513194368, "post_id": 47800009, "comment_id": 82563135, "body": "frametime is 1000/40. Which limits the framerate to 40fps on other computers. On comp1 no matter what framerate I set or even if I skip framelimiting, i&#39;m stuck at 20fps. I tried both with vsync on and off. I&#39;m not sure i need to yield more cpu time as the cpu is basically idling at 1,2% anyway?"}, {"owner": {"reputation": 41, "user_id": 8991375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9499566b92f6f301e51cc3f23073f1?s=128&d=identicon&r=PG&f=1", "display_name": "johnnie15", "link": "https://stackoverflow.com/users/8991375/johnnie15"}, "reply_to_user": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 0, "creation_date": 1513194497, "post_id": 47800009, "comment_id": 82563193, "body": "Can sdl_pollevent be slower on some computers than others?"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8991375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9499566b92f6f301e51cc3f23073f1?s=128&d=identicon&r=PG&f=1", "display_name": "johnnie15", "link": "https://stackoverflow.com/users/8991375/johnnie15"}, "edited": false, "score": 0, "creation_date": 1513231337, "post_id": 47802130, "comment_id": 82574884, "body": "Thanks, that&#39;s a key piece of insight I was missing! Would it also explain why comp1 is so much slower than comp2 while still only using 1.2 % cpu?"}, {"owner": {"reputation": 41, "user_id": 8991375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9499566b92f6f301e51cc3f23073f1?s=128&d=identicon&r=PG&f=1", "display_name": "johnnie15", "link": "https://stackoverflow.com/users/8991375/johnnie15"}, "edited": false, "score": 0, "creation_date": 1513232199, "post_id": 47802130, "comment_id": 82575187, "body": "I&#39;ve added the gametick logic, as I&#39;m only using the SDL_PollEvent() in the main loop to check if the game needs to quit or the window is manipulated. In Gametick I check keyboard values and move the game along according to that input. Could it be I&#39;m making a similar oversight in the use of SDL_PumpEvents() and SDL_GetKeyboardState() ?"}, {"owner": {"reputation": 41, "user_id": 8991375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9499566b92f6f301e51cc3f23073f1?s=128&d=identicon&r=PG&f=1", "display_name": "johnnie15", "link": "https://stackoverflow.com/users/8991375/johnnie15"}, "edited": false, "score": 0, "creation_date": 1513274906, "post_id": 47802130, "comment_id": 82601247, "body": "Made the updates but no speed increase :( Any other ideas?"}, {"owner": {"reputation": 41, "user_id": 8991375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9499566b92f6f301e51cc3f23073f1?s=128&d=identicon&r=PG&f=1", "display_name": "johnnie15", "link": "https://stackoverflow.com/users/8991375/johnnie15"}, "edited": false, "score": 0, "creation_date": 1513585690, "post_id": 47802130, "comment_id": 82693944, "body": "So it seems even if the gfx card supports the hw acc. and requested texture sizes, it may still render equally slow as the cpu bound sw renderer. Guess I should have considered that a possibility from the start. My solution was to complete all cpu bound processing in the tics, but then only call the actual render routines once every 3 tics. That got rid of my lag (at the expense of some sightly less smooth movements on the sprites."}], "tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": false, "score": 2, "last_activity_date": 1513199300, "creation_date": 1513199300, "answer_id": 47802130, "question_id": 47800009, "link": "https://stackoverflow.com/questions/47800009/simple-sdl-game-very-slow-while-cpu-at-1-2/47802130#47802130", "title": "Simple sdl game very slow while cpu at 1.2%", "body": "<pre><code>while (!quit)\n{\n    GameEngine_Tick(gameType-&gt;fps, false, 0);\n\n    if (SDL_PollEvent(&amp;event) != 0))\n    ^^ wat\n    {\n        // process event\n    }\n\n    GameEngine_Render();\n}\n</code></pre>\n\n<p>Right now you're only processing a single event each frame.  Used to be SDL could only buffer 128 events before dropping them, nowadays I think they're up to 64k.  So if, for example, you have a high-report-rate gaming mouse (500-1000 Hz sampling) your event queue will get backed up far faster than a regular mouse (125 Hz).  Same for any other event type SDL can generate; some systems will have different event generation rates than others.</p>\n\n<p>You want to process <em>every</em> event in the queue before rendering a frame:</p>\n\n<pre><code>while (!quit)\n{\n    GameEngine_Tick(gameType-&gt;fps, false, 0);\n\n    // NOTE: if -&gt; while\n    while( SDL_PollEvent(&amp;event) )\n    {\n        // process event\n    }\n\n    GameEngine_Render();\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8991375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9499566b92f6f301e51cc3f23073f1?s=128&d=identicon&r=PG&f=1", "display_name": "johnnie15", "link": "https://stackoverflow.com/users/8991375/johnnie15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 887, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513232022, "creation_date": 1513190321, "last_edit_date": 1513232022, "question_id": 47800009, "link": "https://stackoverflow.com/questions/47800009/simple-sdl-game-very-slow-while-cpu-at-1-2", "title": "Simple sdl game very slow while cpu at 1.2%", "body": "<p>I wrote a simple 2d tile based game and ran it on 2 computers. On comp1 it's very slow, on comp2 it's lightening fast. </p>\n\n<p>Comp1's cpu is a little slower, but it can play other sdl games (even inside emulaters) and simple 3d games, fast enough.</p>\n\n<p>So I ran the game on both computers using only cpu rendering: both ran at the same speed.\nThen I switched to gpu rendering and the 2nd computer went really fast (200+fps) but the first stayed at the same pace, around 20fps.</p>\n\n<p>So I assumed either the hw acceleration is not working on comp1 or the cpu is clogged with my calculations.</p>\n\n<p>I logged all the error handling and can confirm both computers support the hw acceleration and the texture sizes (i know this for a fact because the cpu bound version of the game has no flip and so the character always faces the same way ;)</p>\n\n<p>So then it has to be a slow cpu on the first computer, right? But when I check the cpu stats the game only takes 1,2% cpu, and overall load is around 2% cpu</p>\n\n<p>So the cpu is sitting mostly idle while my game crawls along :(</p>\n\n<p>The game is a few 1000 lines of code now, so here are some of the statements that I think pertain to this problem:</p>\n\n<p>Main game loop:</p>\n\n<pre><code>while (!quit)\n{\n\n    GameEngine_Tick(gameType-&gt;fps, false, 0);\n\n    if (SDL_PollEvent(&amp;event) != 0))\n    {\n        int windowID = event.window.windowID;\n\n        if (event.window.event == SDL_WINDOWEVENT_CLOSE &amp;&amp;\n            event.window.windowID == screens[0].windowID) quit = true;\n\n        switch (event.type)\n        {\n        case SDL_KEYDOWN:\n\n            if (event.key.keysym.sym == SDLK_LEFT)  { Key_Left(); }\n            if (event.key.keysym.sym == SDLK_RIGHT) { Key_Right();}\n            if (event.key.keysym.sym == SDLK_UP)    { Key_Up(); }\n            if (event.key.keysym.sym == SDLK_DOWN)  { Key_Down(); }\n            break;  // end key_down.\n        } // switch event type\n    }\n\n    GameEngine_Render();\n\n   }\n</code></pre>\n\n<p>Frame rate limiting in GameEngine_Tick:</p>\n\n<pre><code>void GameEngine_Tick(int fps, bool bIsRegTestStep, Uint8 TDir)\n{\nunsigned int frametime = 1000 / fps;\nunsigned int currentTime;\n\nconst Uint8* keystates = SDL_GetKeyboardState(NULL); // do not free.\n\nSDL_PumpEvents(); // upd keystates to get keyboard inputs.\n\n    // Get KB input - todo: later GetInputFromSelectedInputDevice (checks kb/xbox etc)\n    if (keystates[SDL_SCANCODE_LEFT])  GameLeft();\n    else if (keystates[SDL_SCANCODE_RIGHT]) GameRight();\n\nSprites_Tick();\n\n// set framerate by waiting if needed.\ncurrentTime = SDL_GetTicks();\nif (currentTime - prevTime &lt; (frametime))\n{\n    //Sleep the remaining frame time \n    if (fps &gt; 0) SDL_Delay((frametime)-(currentTime - prevTime)); /* fps-1 == MAX == no delay*/\n}\nprevTime = currentTime;\n\n}\n</code></pre>\n\n<p>create renderer:</p>\n\n<pre><code>ren = nullptr;\nif (bForceCPURender == false) ren = SDL_CreateRenderer(window, -1, SDL_RENDERER_ACCELERATED);// | SDL_RENDERER_PRESENTVSYNC);\nif (nullptr == ren)\n{\n    if (bForceCPURender == false)\n    {\n        Log(\"Info: SDL_CreateRenderer with SDL_RENDERER_ACCELERATED failed. Trying default.\");\n    }\n    bForceCPURender = true;\n\n    ren = SDL_CreateRenderer(window, -1, 0);\n    if (nullptr == ren)\n    {\n        Log(\"Info: SDL_CreateRenderer with default also failed.\");\n        SDLDestroy();\n        return -1;\n    }\n    else Logs(\"Info: success using default renderer.\");\n}\nelse Logs(\"Info: success, using SDL_CreateRenderer with SDL_RENDERER_ACCELERATED.\");\n</code></pre>\n\n<p>Creating textures or surfaces:</p>\n\n<pre><code>spriteMapTexture = SDL_CreateTexture(ren, SDL_PIXELFORMAT_RGBA8888, SDL_TEXTUREACCESS_TARGET,\n    x_pixPerCharInStageMap * roomWidthInChars  * gameRoomMatrix_w,\n    y_pixPerCharInStageMap * roomHeightInChars * gameRoomMatrix_h);\n\n// If GPU cannot handle size of stage map: try to do CPU preRendering. (gpu is texture, cpu is surface).\nif (NULL == spriteMapTexture || bForceCPUStageRenderAnyway == true)\n{\n        spriteMapSurface = GameEngine_CreateRGBSurface(x_pixPerCharInStageMap * roomWidthInChars  * gameRoomMatrix_w, y_pixPerCharInStageMap * roomHeightInChars * gameRoomMatrix_h);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1513188983, "post_id": 47799692, "comment_id": 82560492, "body": "Kindly show your research / debugging effort so far. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1513189031, "post_id": 47799692, "comment_id": 82560520, "body": "Read strings...."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 6, "creation_date": 1513189039, "post_id": 47799692, "comment_id": 82560526, "body": "There&#39;s a trick to seeing if a number is divisible by 3. You can do that without having to convert those numbers."}, {"owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "edited": false, "score": 0, "creation_date": 1513189050, "post_id": 47799692, "comment_id": 82560528, "body": "take input as a character array"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1513189051, "post_id": 47799692, "comment_id": 82560529, "body": "So you are to return &quot;true&quot; if the modulo 3 of the sum is 0?"}], "answers": [{"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 2, "last_activity_date": 1513194401, "last_edit_date": 1513194401, "creation_date": 1513189106, "answer_id": 47799736, "question_id": 47799692, "link": "https://stackoverflow.com/questions/47799692/need-to-write-a-program-that-receives-very-long-number-in-a-weird-format/47799736#47799736", "title": "need to write a program that receives very long number in a weird format", "body": "<p>Well I guess you are not getting the problem. Rather getting the input is easier but processing it is not.</p>\n\n<p>So no type would be big enough to accurately hold the value - these are large. Why not store it as string?</p>\n\n<p>You can store it as a char array and use <code>fgets</code> for that (this is only if you want to print the number otherwise not needed). You can use <code>getchar()</code> also and do the sum as shown in the proof here.</p>\n\n<p>After doing it, just do one thing - check each digit-char and then calculate it's sum mod 3. That way you will get the value of the result and keep it adding. (The resultant  mod sum tells you about the divisibility). That is what you want exactly.</p>\n\n<h3>What I meant is?</h3>\n\n<pre><code>  (A + B) mod 3 \n\n= (   A(n)A(n-1)A(n-2)...A(1)A(0)\n  +   B(m)B(m-1)B(m-2)...B(1)B(0) ) mod 3 \n\n= ( [ A(n) + A(n-1) + A(n-2) + ... + A(1) + A(0) ] mod 3\n  + [ B(m) + B(m-1) + B(m-2) + ... + B(1) + B(0) ] mod 3 ) mod 3\n</code></pre>\n\n<p>Rules:</p>\n\n<pre><code>if a\u2261b (mod m) and c\u2261d (mod m) then\n\na+c \u2261 b+d (mod m) and\n ac \u2261 bd (mod m)\n</code></pre>\n\n<h3>Example code</h3>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void){\n    int c,sum = 0;\n    while(isdigit(c = getchar()))\n        sum+=(c-'0'),sum%=3;\n    while(isdigit(c = getchar()))\n        sum+=(c-'0'),sum%=3;\n    printf(\"%s\\n\", sum?\"Non-divisible\":\"divisible\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 628, "user_id": 6535274, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Rgzpqsup3kw/AAAAAAAAAAI/AAAAAAAAFTc/1zfcQ02uyDc/photo.jpg?sz=128", "display_name": "Yaniv Shaked", "link": "https://stackoverflow.com/users/6535274/yaniv-shaked"}, "is_accepted": false, "score": 3, "last_activity_date": 1513189286, "creation_date": 1513189286, "answer_id": 47799772, "question_id": 47799692, "link": "https://stackoverflow.com/questions/47799692/need-to-write-a-program-that-receives-very-long-number-in-a-weird-format/47799772#47799772", "title": "need to write a program that receives very long number in a weird format", "body": "<p>The remainder of a number divided by 3 equals to the sum of its digits modulo 3.</p>\n\n<p>Once you calculate the remainders for the two numbers (not need to represent each number's value), sum those. If result modulo 3 is zero, the sum of the number is a multiplication of 3.</p>\n"}], "owner": {"reputation": 77, "user_id": 7707084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Oy9aq.jpg?s=128&g=1", "display_name": "C. Arnold", "link": "https://stackoverflow.com/users/7707084/c-arnold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1513191118, "answer_count": 2, "score": -6, "last_activity_date": 1551022408, "creation_date": 1513188933, "last_edit_date": 1551022408, "question_id": 47799692, "link": "https://stackoverflow.com/questions/47799692/need-to-write-a-program-that-receives-very-long-number-in-a-weird-format", "closed_reason": "Needs details or clarity", "title": "need to write a program that receives very long number in a weird format", "body": "<p>I need to write a program in C which receives: <strong>a+b=</strong> (<em>while a,b are 2 numbers that can be longer than int type or even long long type. Input example: 333333333333333333333333333+3333333333333333333333333=</em>) and the program needs to return if the sum %3==0;\nSo how do I do that?\nI mean, how do I receive such input using <code>scanf</code>?\nThe rest is not a problem.</p>\n"}, {"tags": ["c", "string", "algorithm", "split"], "comments": [{"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1513188227, "post_id": 47799489, "comment_id": 82560136, "body": "The input will be single space separated string?"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1513188291, "post_id": 47799489, "comment_id": 82560159, "body": "What is a word ? Why post image instead of good Unicode text ?"}, {"owner": {"reputation": 121, "user_id": 9063947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46705d505ef6e9abe8cea2e0365666ba?s=128&d=identicon&r=PG&f=1", "display_name": "lemonslayer", "link": "https://stackoverflow.com/users/9063947/lemonslayer"}, "reply_to_user": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1513188354, "post_id": 47799489, "comment_id": 82560182, "body": "@coderredoc The input will be a sentence with several words and the function is supposed to point to the word the user chooses (int words). Basically what I did was that for every single space occuring then the program knows another word has started. It&#39;s very simple but it does what it needs to do for now."}, {"owner": {"reputation": 4299, "user_id": 798346, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d7e5d155178f095778086f1cf84142ce?s=128&d=identicon&r=PG", "display_name": "Jim Rhodes", "link": "https://stackoverflow.com/users/798346/jim-rhodes"}, "edited": false, "score": 1, "creation_date": 1513188421, "post_id": 47799489, "comment_id": 82560222, "body": "Hint: Some of your loops need to exit when the end of string is reached."}, {"owner": {"reputation": 121, "user_id": 9063947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46705d505ef6e9abe8cea2e0365666ba?s=128&d=identicon&r=PG&f=1", "display_name": "lemonslayer", "link": "https://stackoverflow.com/users/9063947/lemonslayer"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513188436, "post_id": 47799489, "comment_id": 82560230, "body": "@Stargateur Sorry, I tried to add it however for some reason the text doesn&#39;t want to properly C+P, the text is from a PowerPoint presentation."}, {"owner": {"reputation": 121, "user_id": 9063947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46705d505ef6e9abe8cea2e0365666ba?s=128&d=identicon&r=PG&f=1", "display_name": "lemonslayer", "link": "https://stackoverflow.com/users/9063947/lemonslayer"}, "edited": false, "score": 0, "creation_date": 1513188723, "post_id": 47799489, "comment_id": 82560373, "body": "@ArunAS Well, the loop counts the amount of words in the string (i.e. how many single space occurs). It&#39;s very primitive but it works for what I need it to do. However what I was thinking with the loop was that the loop would continue counting until it reaches the amount of words that you wished to skip (int words). I might have been thinking wrong but writing i&lt;words there would make it read 6 characters (if words = 5) wouldn&#39;t it?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1513188897, "post_id": 47799489, "comment_id": 82560457, "body": "@lemonslayer when copying formatted text, I sometimes find it easier to first paste it into a plain text editor, then copy/paste from there, finally adding any formatting needed by the destination."}, {"owner": {"reputation": 121, "user_id": 9063947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46705d505ef6e9abe8cea2e0365666ba?s=128&d=identicon&r=PG&f=1", "display_name": "lemonslayer", "link": "https://stackoverflow.com/users/9063947/lemonslayer"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1513189279, "post_id": 47799489, "comment_id": 82560615, "body": "@WeatherVane Thank you! I&#39;ll think about this for future posts!"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1513189345, "post_id": 47799489, "comment_id": 82560645, "body": "@lemonslayer  The function printWord returns nothing. So a question arises what the function should do in this call printWord(&quot;I like to eat bunnies&quot;, 5);?"}, {"owner": {"reputation": 121, "user_id": 9063947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46705d505ef6e9abe8cea2e0365666ba?s=128&d=identicon&r=PG&f=1", "display_name": "lemonslayer", "link": "https://stackoverflow.com/users/9063947/lemonslayer"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1513189508, "post_id": 47799489, "comment_id": 82560729, "body": "@VladfromMoscow The function is printWord(char sentence[], int wordNumber). So calling printWord(&quot;I like to eat bunnies&quot;, 5); would set the string and the word number which you want to display. For example, setting wordNumber to 3 would display the 4th word of the string and print it out. A part of the assignment was not returning anything in the function and merely printing out the results."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1513189589, "post_id": 47799489, "comment_id": 82560768, "body": "@lemonslayer  One more what the function should do in this call printWord(&quot;I like to eat bunnies&quot;, 5);?"}, {"owner": {"reputation": 121, "user_id": 9063947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46705d505ef6e9abe8cea2e0365666ba?s=128&d=identicon&r=PG&f=1", "display_name": "lemonslayer", "link": "https://stackoverflow.com/users/9063947/lemonslayer"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1513189771, "post_id": 47799489, "comment_id": 82560832, "body": "@VladfromMoscow It should return a an error since the amount of words you want to skip (5) is higher or equal to the amount of words in the string. I.e. it should print out &quot;Error. Could not print the word.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 9063947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46705d505ef6e9abe8cea2e0365666ba?s=128&d=identicon&r=PG&f=1", "display_name": "lemonslayer", "link": "https://stackoverflow.com/users/9063947/lemonslayer"}, "edited": false, "score": 0, "creation_date": 1513189144, "post_id": 47799619, "comment_id": 82560567, "body": "Ah, the first correction was something I was thinking about because technically it wouldn&#39;t stop reading the last word and continue &quot;outside of the string&quot;. Regarding the last correction, what exactly happened when I wrote &gt;= instead of &gt; ? I&#39;m guessing that it would always be equal to eachother which is why it always returned NULL?"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 121, "user_id": 9063947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46705d505ef6e9abe8cea2e0365666ba?s=128&d=identicon&r=PG&f=1", "display_name": "lemonslayer", "link": "https://stackoverflow.com/users/9063947/lemonslayer"}, "edited": false, "score": 0, "creation_date": 1513191395, "post_id": 47799619, "comment_id": 82561642, "body": "@lemonslayer.: Yes"}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 1, "last_activity_date": 1513188592, "creation_date": 1513188592, "answer_id": 47799619, "question_id": 47799489, "link": "https://stackoverflow.com/questions/47799489/returning-null-value-from-a-function-to-a-pointer-in-c/47799619#47799619", "title": "Returning NULL value from a function to a pointer in C", "body": "<p>There are few bugs in your code. Corrections would be</p>\n\n<pre><code>for(i = 0; sentence[i] &amp;&amp; wordCount &lt; words; i++)\n</code></pre>\n\n<p>Another is </p>\n\n<pre><code>while (inputString[i] !=' ' &amp;&amp; inputString[i]!='\\0')\n</code></pre>\n\n<p>And the last</p>\n\n<pre><code>if (words &gt; wordCount)\n</code></pre>\n\n<p>Explanation for first one would be - you wont check past the end of the string. Otherwise you had undefined behavior. </p>\n\n<p>There maybe cases when you reach the end of the string but still won't get a space. To avoid that case you need to consider the <code>\\0</code> case too.</p>\n\n<p>If the <code>words &gt; wordCount</code> then only you should throw the error. If they are equal then it should print the value.</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 9063947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46705d505ef6e9abe8cea2e0365666ba?s=128&d=identicon&r=PG&f=1", "display_name": "lemonslayer", "link": "https://stackoverflow.com/users/9063947/lemonslayer"}, "edited": false, "score": 0, "creation_date": 1513189679, "post_id": 47799778, "comment_id": 82560793, "body": "Yes I realized the loop was acting weird since it didnt rly stop after the last word. I agree the wordCount should start at 1 but the assignment was very clear that it should start at 0. So I guess I&#39;ll have to fidn a solution to this some way."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 1, "last_activity_date": 1513189313, "creation_date": 1513189313, "answer_id": 47799778, "question_id": 47799489, "link": "https://stackoverflow.com/questions/47799489/returning-null-value-from-a-function-to-a-pointer-in-c/47799778#47799778", "title": "Returning NULL value from a function to a pointer in C", "body": "<p>This loop in <code>skipWords</code> is the problem. It'll traverse through the string and beyond because you're not checking for the end of the string.</p>\n\n<pre><code>for(i = 0; wordCount &lt; words; i++)\n{\n    if(sentence[i] == ' ')\n    {\n        wordCount++;\n    }\n}\n</code></pre>\n\n<p>Since the only way out of the loop is for it to find as many spaces as you've passed in as <code>words</code>, it will always return <code>NULL</code>.</p>\n\n<p>Arguably <code>wordCount</code> should also start at 1 since if there are no spaces in the string, you'll always have at least one word...unless the string is empty. </p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 9063947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46705d505ef6e9abe8cea2e0365666ba?s=128&d=identicon&r=PG&f=1", "display_name": "lemonslayer", "link": "https://stackoverflow.com/users/9063947/lemonslayer"}, "edited": false, "score": 0, "creation_date": 1513190331, "post_id": 47799892, "comment_id": 82561089, "body": "This is way too advanced for where I am in the course, however I will save this and look through it so I can better my coding! What does changing int to size_t do?"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 121, "user_id": 9063947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46705d505ef6e9abe8cea2e0365666ba?s=128&d=identicon&r=PG&f=1", "display_name": "lemonslayer", "link": "https://stackoverflow.com/users/9063947/lemonslayer"}, "edited": false, "score": 0, "creation_date": 1513190689, "post_id": 47799892, "comment_id": 82561291, "body": "@lemonslayer &quot;This is way too advanced&quot; =&gt; This is on purpose so you can&#39;t copy paste the code unless you understand it ;). &quot;size_t&quot; =&gt; <a href=\"https://stackoverflow.com/a/2550799/7076153\">stackoverflow.com/a/2550799/7076153</a>, <code>int</code> is a signed integer with few guarantee, does it make sense for you to write <code>printWord(&quot;I like to eat bunnies&quot;, -1);</code> ? Well one could say it would be on possible value depend on the behavior wanted, but acording to your exercice, your integer is not expected to be negative so use an unsigned type make sense. Plus <code>size_t</code> is capable of handle any index size what make it very useful."}], "tags": [], "owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "is_accepted": false, "score": 1, "last_activity_date": 1513207176, "last_edit_date": 1513207176, "creation_date": 1513189820, "answer_id": 47799892, "question_id": 47799489, "link": "https://stackoverflow.com/questions/47799489/returning-null-value-from-a-function-to-a-pointer-in-c/47799892#47799892", "title": "Returning NULL value from a function to a pointer in C", "body": "<p>Your algorithm in <code>skipWords()</code> is broken, I will implement your function by changing the algorithm and change <code>int</code> to <code>size_t</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stddef.h&gt;\n#include &lt;ctype.h&gt;\n\nint printFirstWord(char const *inputString);\nchar const *skipWords(char const *sentence, size_t words);\nint printWord(char const *sentence, size_t wordNumber);\n\nint main(void) {\n  printWord(\"I like to eat bunnies\", 0); // Prints I\n  printf(\"\\n\");\n  printWord(\"I like to eat bunnies\", 1); // Prints like\n  printf(\"\\n\");\n  printWord(\"I like to eat bunnies\", 2); // etc\n  printf(\"\\n\");\n  printWord(\"I like to eat bunnies\", 3);\n  printf(\"\\n\");\n  printWord(\"I like to eat bunnies\", 4);\n  printf(\"\\n\");\n  printWord(\"I like to eat bunnies\", 5); // This should return NULL\n  printf(\"\\n\");\n  printWord(\"I like to eat bunnies\", 6); // This should return NULL\n  printf(\"\\n\");\n}\n\nint printFirstWord(char const *inputString) {\n  int ret = 0;\n  while (isblank(*inputString)) {\n    inputString++;\n  }\n  while (!isblank(*inputString) &amp;&amp; *inputString) {\n    int tmp = printf(\"%c\", *inputString++);\n    if (tmp &lt; 0) {\n      return -1;\n    }\n    ret += tmp;\n  }\n  return ret;\n}\n\nchar const *skipWords(char const *inputString, size_t words) {\n  while (isblank(*inputString)) {\n    inputString++;\n  }\n  while (words &gt; 0) {\n    words--;\n    while (!isblank(*inputString)) {\n      if (!*inputString) {\n        return NULL;\n      }\n      inputString++;\n    }\n    while (isblank(*inputString)) {\n      inputString++;\n    }\n  }\n  return *inputString ? inputString : NULL;\n}\n\nint printWord(char const *sentence, size_t wordNumber) {\n  char const *sentencePointer = skipWords(sentence, wordNumber);\n  if (sentencePointer != NULL) {\n    return printFirstWord(sentencePointer);\n  } else {\n    fprintf(stderr, \"Error. Couldn't print the word.\\n\");\n    return -1;\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1513190602, "creation_date": 1513190602, "answer_id": 47800081, "question_id": 47799489, "link": "https://stackoverflow.com/questions/47799489/returning-null-value-from-a-function-to-a-pointer-in-c/47800081#47800081", "title": "Returning NULL value from a function to a pointer in C", "body": "<p>We beginners should help each other.:)</p>\n\n<p>Here you are</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nchar * skipWords( const char *s, size_t n )\n{\n    if ( n )\n    {\n        while ( isblank( ( unsigned char )*s ) ) ++s;\n\n        do\n        {\n            while ( *s &amp;&amp; !isblank( ( unsigned char )*s ) ) ++s;\n            while ( isblank( ( unsigned char )*s ) ) ++s;\n        } while ( *s &amp;&amp; --n );\n    }\n\n    return ( char * ) ( *s ? s : NULL );\n}\n\nvoid printFirstWord( const char *s )\n{\n    while ( isblank( ( unsigned char )*s ) ) ++s;\n    while ( *s &amp;&amp; !isblank( ( unsigned char )*s ) ) putchar( *s++ );\n}\n\nvoid printWord( const char *s, size_t n )\n{\n    const char *word = skipWords( s, n );\n\n    if ( word )\n    {\n        printFirstWord( word );\n    }\n    else\n    {\n        printf( \"%s\", \"Error. Could not print the word.\" );\n    }\n\n    putchar( '\\n' );\n}\n\nint main(void) \n{\n    printWord(\"I like to eat bunnies\", 0); //Prints I\n    printWord(\"I like to eat bunnies\", 1); //Prints like\n    printWord(\"I like to eat bunnies\", 2); //etc\n    printWord(\"I like to eat bunnies\", 3);\n    printWord(\"I like to eat bunnies\", 4);\n    printWord(\"I like to eat bunnies\", 5); //This should return NULL\n    printWord(\"I like to eat bunnies\", 6); \n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>I\nlike\nto\neat\nbunnies\nError. Could not print the word.\nError. Could not print the word.\n</code></pre>\n\n<p>As for your code then you usually do not check the terminating zero as for example</p>\n\n<pre><code>while (inputString[i] != ' ')\n{\n    printf(\"%c\", inputString[i]);\n    i++;\n}\n</code></pre>\n\n<p>and ignore cases when several spaces follow each other.</p>\n"}], "owner": {"reputation": 121, "user_id": 9063947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46705d505ef6e9abe8cea2e0365666ba?s=128&d=identicon&r=PG&f=1", "display_name": "lemonslayer", "link": "https://stackoverflow.com/users/9063947/lemonslayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 1, "accepted_answer_id": 47799619, "answer_count": 4, "score": 2, "last_activity_date": 1513207176, "creation_date": 1513187994, "last_edit_date": 1513191411, "question_id": 47799489, "link": "https://stackoverflow.com/questions/47799489/returning-null-value-from-a-function-to-a-pointer-in-c", "title": "Returning NULL value from a function to a pointer in C", "body": "<p>I have a school assignment where I am supposed to create three functions. The functions are printFirstWord(), skipWords() and printWord().</p>\n\n<p>Albeit not perfectly written, I have managed to make the printFirstWord function work and the other two functions mostly work fine.</p>\n\n<p>However, in skipWords() I am supposed to return a pointer value of NULL if the amount of words that you wish to skip is greater than the amount of words in the string you input. This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\n//Call the functions\nvoid printFirstWord(char inputString[]);\nchar* skipWords(char sentence[], int words);\nvoid printWord(char sentence[], int wordNumber);\n\nint main()\n{\n    printWord(\"I like to eat bunnies\", 0); //Prints I\n    printWord(\"I like to eat bunnies\", 1); //Prints like\n    printWord(\"I like to eat bunnies\", 2); //etc\n    printWord(\"I like to eat bunnies\", 3);\n    printWord(\"I like to eat bunnies\", 4);\n    printWord(\"I like to eat bunnies\", 5); //This should return NULL\n    printWord(\"I like to eat bunnies\", 6); //This should return NULL\n\n    return 0;\n}\n\n//Function that prints only the first word of a string\nvoid printFirstWord(char inputString[])\n{\n    int i = 0;\n\n    //Removes initial non-alpha characters, if any are present\n    while (!isalpha(inputString[i]))\n        i++;\n\n    //Checks if the next input is alphabetical or is the character '-'\n    while (inputString[i] != ' ')\n    {\n        printf(\"%c\", inputString[i]);\n        i++;\n    }\n\n}\n\nchar* skipWords(char sentence[], int words)\n{\n    int i = 0, wordCount = 0;\n\n    for(i = 0; wordCount &lt; words; i++)\n    {\n        if(sentence[i] == ' ')\n        {\n            wordCount++;\n        }\n    }\n\n    //Can't get this to work, not sure how to return NULL in a function\n    if (words &gt;= wordCount)\n        return NULL;\n    else\n        return &amp;sentence[i];\n}\n\nvoid printWord(char sentence[], int wordNumber)\n{\n    char *sentencePointer;\n    sentencePointer = skipWords(sentence, wordNumber);\n\n    if (sentencePointer != NULL)\n        printFirstWord(sentencePointer);\n    else if (sentencePointer == NULL)\n        printf(\"\\nError. Couldn't print the word.\\n\");\n}\n</code></pre>\n\n<p>Initially my problem was that the program constantly crashed but I added the last part of the printWord function and it stopped crashing. I expect this output:</p>\n\n<pre><code>Iliketoeatbunnies\n\nError. Couldn't print the word.\n\nError. Couldn't print the word.\n</code></pre>\n\n<p>This is the output I am receiving:</p>\n\n<pre><code>Error. Couldn't print the word.\n\nError. Couldn't print the word.\n\nError. Couldn't print the word.\n\nError. Couldn't print the word.\n\nError. Couldn't print the word.\n\nError. Couldn't print the word.\n</code></pre>\n\n<p>Pointers are my weak side and I feel like I have missed something crucial, I have been looking online and I haven't found any solution that fits me yet or atleast that I feel doesn't fit me.</p>\n\n<p><a href=\"https://i.stack.imgur.com/GUkzF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GUkzF.png\" alt=\"Assignment Description\"></a></p>\n"}, {"tags": ["c", "stm32", "freertos", "stm32f4"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1513188095, "post_id": 47798960, "comment_id": 82560077, "body": "Do you think posting the exception handler here will be more beneficial than posting the code generating the exception?"}, {"owner": {"reputation": 103, "user_id": 7236297, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-iYaRorBiCTI/AAAAAAAAAAI/AAAAAAAAAKI/aGONbYDRfC8/photo.jpg?sz=128", "display_name": "Matheus Stumpf", "link": "https://stackoverflow.com/users/7236297/matheus-stumpf"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1513189948, "post_id": 47798960, "comment_id": 82560910, "body": "I posted the handler to you know how the values (CFSR, pc, etc) are obtained, and maybe someone can indicate better alternative to get more details about the exception. If you read my question, each exception occurs in one different part of the code. The osSystickHandler, IncrementTick, etc, are default from FreeRTOS, i didnt touch it."}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 1, "creation_date": 1513201553, "post_id": 47798960, "comment_id": 82566513, "body": "If it is not stack overflow, then it could be a write through a stray pointer, or a buffer overflow, or something else. Impossible to say without seeing the code."}, {"owner": {"reputation": 103, "user_id": 7236297, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-iYaRorBiCTI/AAAAAAAAAAI/AAAAAAAAAKI/aGONbYDRfC8/photo.jpg?sz=128", "display_name": "Matheus Stumpf", "link": "https://stackoverflow.com/users/7236297/matheus-stumpf"}, "edited": false, "score": 0, "creation_date": 1513202370, "post_id": 47798960, "comment_id": 82566860, "body": "Only the Application code have more than 5000 lines..  :/   I&#39;m trying something here that may help.. if I unplug my DC motors (still PWM sent but no Encoder pulses), it takes much more time to crash (It has been 5 hours with no exception until now). Maybe something in context switching?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1513217421, "post_id": 47798960, "comment_id": 82571255, "body": "I afraid only you can find the source of the HF. It is not possible to debug complex code remotely without the access to your machine and hardware"}, {"owner": {"reputation": 103, "user_id": 7236297, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-iYaRorBiCTI/AAAAAAAAAAI/AAAAAAAAAKI/aGONbYDRfC8/photo.jpg?sz=128", "display_name": "Matheus Stumpf", "link": "https://stackoverflow.com/users/7236297/matheus-stumpf"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1513247072, "post_id": 47798960, "comment_id": 82583167, "body": "@PeterJ_01, can you point me something to do to find a connection between the HFs? Maybe some register that I&#39;m not watching, or some other HF Handler to get more information? Thanks!"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1513247300, "post_id": 47798960, "comment_id": 82583317, "body": "You need to find what has caused the HF and where.  As I wrote finding the problem cam be a painful difficult and boring process. I do it in my projects sometimes as well (probably as most of the uC coders :))."}, {"owner": {"reputation": 1084, "user_id": 3052687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2bc9457ad57919f5ab4abc0007323f1?s=128&d=identicon&r=PG&f=1", "display_name": "HelpingHand", "link": "https://stackoverflow.com/users/3052687/helpinghand"}, "edited": false, "score": 0, "creation_date": 1589541552, "post_id": 47798960, "comment_id": 109341745, "body": "As far as I see it, some of the 6 instances given in your report list are the same/equivalent: No. 1/4 and no. 5/6."}], "answers": [{"tags": [], "owner": {"reputation": 1084, "user_id": 3052687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2bc9457ad57919f5ab4abc0007323f1?s=128&d=identicon&r=PG&f=1", "display_name": "HelpingHand", "link": "https://stackoverflow.com/users/3052687/helpinghand"}, "is_accepted": false, "score": 0, "last_activity_date": 1589542814, "creation_date": 1589542814, "answer_id": 61818333, "question_id": 47798960, "link": "https://stackoverflow.com/questions/47798960/random-hardfaults-stm32f4-freertos/61818333#61818333", "title": "Random HardFaults - STM32F4 - FreeRTOS", "body": "<ol>\n<li><p><em>The question doesn't state it explicitly, but as I understand it, this thread is not about where the hard faults are coming from but if the shown testing idea was OK up to this point, and what else can be done to locate the error.</em></p></li>\n<li><p><em>The question is pretty old now, but this board is meant to help others that have the same problem, so let's read the Q&amp;AQ with general interest in such problems.</em></p></li>\n</ol>\n\n<hr>\n\n<p>In order to trace back the problem, the following strategies can help:</p>\n\n<ul>\n<li><p>If you can apply tracing hardware (because the HW target supports it and you have enough of the expensive equipment...), please use it: An off-chip ETM trace and a classical break point in your hard fault handler, and your search might be over 50 minutes later.</p>\n\n<p>I guess the conditions aren't fulfilled in the present case.\nStill, there are professional projects where designing another PCB and buying a good debug/trace adapter is cheaper than having some developers search for weeks.\nMaybe the STM32 eval boards with full JTAG/TPIU access are a partial solution for you...</p></li>\n<li><p>There are quite a few error models where the addresses the hard fault handler reports to you have nothing to do with the source of the error.\nStill, you might get some useful idea by checking (using the memory map) to which function or variable/buffer the addresses belong.\nModify the environment of the error by putting unused \"spacer\" buffers (one or few words may be enough) between the modules and re-run the test.\nIf you write some magic pattern into these unused regions, you can monitor them for corruption and use them as \"<a href=\"https://en.wikipedia.org/wiki/Buffer_overflow_protection#Canaries\" rel=\"nofollow noreferrer\">canaries</a>\" to detect in which context the error happens.</p></li>\n<li><p>If this doesn't help, deactivate different components of the software step by step and re-run and check when the hard faults vanish.\nIf not already before, you may need some automated endurance testing environment so that your efforts (and searching time) doesn't explode.</p></li>\n<li><p>As far as I know, all \n<a href=\"https://www.st.com/content/st_com/en/products/microcontrollers-microprocessors/stm32-32-bit-arm-cortex-mcus/stm32-high-performance-mcus/stm32f4-series.html#overview\" rel=\"nofollow noreferrer\">STM32F4</a>\nhave a memory-protection unit.\nCan you activate it?</p></li>\n</ul>\n"}], "owner": {"reputation": 103, "user_id": 7236297, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-iYaRorBiCTI/AAAAAAAAAAI/AAAAAAAAAKI/aGONbYDRfC8/photo.jpg?sz=128", "display_name": "Matheus Stumpf", "link": "https://stackoverflow.com/users/7236297/matheus-stumpf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 388, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1589542814, "creation_date": 1513185994, "last_edit_date": 1564835016, "question_id": 47798960, "link": "https://stackoverflow.com/questions/47798960/random-hardfaults-stm32f4-freertos", "title": "Random HardFaults - STM32F4 - FreeRTOS", "body": "<p>I have a board with STM32F4 running FreeRTOS (3 tasks on it), and i'm getting a HardFault every 15-50 min of use.</p>\n\n<p>My hardware:\n3 Encoders, 6 Analog In, 10 digital in and 3 PWM output for DC motors.</p>\n\n<p>At start, I thought was some StackOverflow, than I implemmented  <code>uxTaskGetStackHighWaterMark();</code> for each task and checked that it's not it.</p>\n\n<p>I then implemented some HardFault handlers:</p>\n\n<pre><code>   void HardFault_Handler(void)\n{\n    __asm volatile\n    (\n            \" tst lr, #4                                                \\n\"\n            \" ite eq                                                    \\n\"\n            \" mrseq r0, msp                                             \\n\"\n            \" mrsne r0, psp                                             \\n\"\n            \" ldr r1, [r0, #24]                                         \\n\"\n            \" ldr r2, handler2_address_const                            \\n\"\n            \" bx r2                                                     \\n\"\n            \" handler2_address_const: .word prvGetRegistersFromStack    \\n\"\n    );\n}\n\nvoid prvGetRegistersFromStack( uint32_t *pulFaultStackAddress )\n{\n    volatile uint32_t CFSRValue = SCB-&gt;CFSR;\n    volatile uint32_t HFSRValue = SCB-&gt;HFSR;\n    char stepError [100] = \"\";\n    if ((HFSRValue &amp; (1 &lt;&lt; 30)) != 0) {\n        CFSRValue &gt;&gt;= 16;\n        if((CFSRValue &amp; (1 &lt;&lt; 9)) != 0) strcpy(stepError,\" Divide by zero\");\n        if((CFSRValue &amp; (1 &lt;&lt; 8)) != 0) strcpy(stepError,\" Unaligned access\");\n        if((CFSRValue &amp; (1 &lt;&lt; 3)) != 0) strcpy(stepError,\" No coprocessor UsageFault\" );\n        if((CFSRValue &amp; (1 &lt;&lt; 2)) != 0) strcpy(stepError,\" Invalid PC load UsageFault\");\n        if((CFSRValue &amp; (1 &lt;&lt; 1)) != 0) strcpy(stepError,\" Invalid state\");\n        if((CFSRValue &amp; (1 &lt;&lt; 0)) != 0) strcpy(stepError,\" Undefined instruction\");\n    }\n\n    volatile uint32_t r0;\n    volatile uint32_t r1;\n    volatile uint32_t r2;\n    volatile uint32_t r3;\n    volatile uint32_t r12;\n    volatile uint32_t lr; /* Link register. */\n    volatile uint32_t pc; /* Program counter. */\n    volatile uint32_t psr;/* Program status register. */\n\n    r0 = pulFaultStackAddress[ 0 ];\n    r1 = pulFaultStackAddress[ 1 ];\n    r2 = pulFaultStackAddress[ 2 ];\n    r3 = pulFaultStackAddress[ 3 ];\n\n    r12 = pulFaultStackAddress[ 4 ];\n    lr = pulFaultStackAddress[ 5 ]; \n    pc = pulFaultStackAddress[ 6 ];\n    psr = pulFaultStackAddress[ 7 ];\n    GPIO_WriteLed(0,1);\n    for(int i=0;i&lt;=10;i++)\n    {\n        PWM_Change_DutyCycle(i,0);\n    }\n    for(;;);\n}\n</code></pre>\n\n<p>And from this implementation, i got those results (each one was a HardFault, sometimes the PC was 0), that appear to be very random (to me):</p>\n\n<pre><code>1- if((CFSRValue &amp; (1 &lt;&lt; 1)) != 0) strcpy(stepError,\" Invalid state\"); pc=0\n\n2- if((CFSRValue &amp; (1 &lt;&lt; 0)) != 0) strcpy(stepError,\" Undefined instruction\");\n    0800807d: ...IncrementTick+252   ldr     r3, [r7, #8]   -  pc=134250621 - lr=2779096485\n\n\n3-  if((CFSRValue &amp; (1 &lt;&lt; 8)) != 0) strcpy(stepError,\" Unaligned access\");\n    0800d63b: MX_ADC1_Init+290       ldr     r3, [pc, #240]  ; (0x800d72c &lt;MX_ADC1_Init+532&gt;)\n\n\n4-  if((CFSRValue &amp; (1 &lt;&lt; 1)) != 0) strcpy(stepError,\" Invalid state\");\n        addr 0\n\n5-080124c9: SysTick_Handler+8      bl      0x80072cc &lt;osSystickHandler&gt;\n\n\n6-  if((CFSRValue &amp; (1 &lt;&lt; 0)) != 0) strcpy(stepError,\" Undefined instruction\");\n    08012521: SysTick_Handler+8      bl      0x80072cc &lt;osSystickHandler&gt;\n</code></pre>\n\n<p>Regards,</p>\n"}, {"tags": ["c", "cplex"], "answers": [{"tags": [], "owner": {"reputation": 4187, "user_id": 1718477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iisrz.jpg?s=128&g=1", "display_name": "rkersh", "link": "https://stackoverflow.com/users/1718477/rkersh"}, "is_accepted": true, "score": 1, "last_activity_date": 1513206883, "creation_date": 1513206883, "answer_id": 47803542, "question_id": 47798920, "link": "https://stackoverflow.com/questions/47798920/cplex-c-api-retrieve-variables-type/47803542#47803542", "title": "CPLEX C API retrieve variables type", "body": "<p>Yes, you can use the <a href=\"https://www.ibm.com/support/knowledgecenter/SSSA5P_12.7.1/ilog.odms.cplex.help/refcallablelibrary/mipapi/getctype.html\" rel=\"nofollow noreferrer\">CPXgetctype</a> function. Here's the example given in the documentation link:</p>\n\n<pre><code> status = CPXgetctype (env, lp, ctype, 0, cur_numcols-1);\n</code></pre>\n\n<p>To get the number of columns use <a href=\"https://www.ibm.com/support/knowledgecenter/SSSA5P_12.7.1/ilog.odms.cplex.help/refcallablelibrary/cpxapi/getnumcols.html\" rel=\"nofollow noreferrer\">CPXgetnumcols</a>.</p>\n"}], "owner": {"reputation": 128, "user_id": 3560035, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rvtzn.jpg?s=128&g=1", "display_name": "acco93", "link": "https://stackoverflow.com/users/3560035/acco93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 47803542, "answer_count": 1, "score": 0, "last_activity_date": 1513206883, "creation_date": 1513185792, "question_id": 47798920, "link": "https://stackoverflow.com/questions/47798920/cplex-c-api-retrieve-variables-type", "title": "CPLEX C API retrieve variables type", "body": "<p>Is it possible (using the CPLEX C APIs) to retrieve the variables type (CPX_CONTINUOUS, CPX_BINARY, CPX_INTEGER, ...)  of a model not handled by me but directly built from an .mps file?</p>\n"}, {"tags": ["c", "case"], "comments": [{"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 1, "creation_date": 1513185422, "post_id": 47798828, "comment_id": 82558545, "body": "<code>toupper</code> .......for <code>char</code>s"}, {"owner": {"reputation": 9, "user_id": 9095151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cf93c4a8a9a80dfe96dacaa0e5c929b?s=128&d=identicon&r=PG&f=1", "display_name": "Mant Vant", "link": "https://stackoverflow.com/users/9095151/mant-vant"}, "reply_to_user": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1513185471, "post_id": 47798828, "comment_id": 82558584, "body": "Any library have to import? Or is it in String.h?"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1513185488, "post_id": 47798828, "comment_id": 82558597, "body": "<code>ctype.h</code>..it is the header"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1513185614, "post_id": 47798828, "comment_id": 82558678, "body": "But it only works on a single character - for a string you&#39;re going to have to write some code to transform the whole thing. See this recent question  <a href=\"https://stackoverflow.com/questions/47798222/how-would-you-convert-alpha-characters-to-n-string-to-uppercase-in-c\" title=\"how would you convert alpha characters to n string to uppercase in c\">stackoverflow.com/questions/47798222/&hellip;</a> for some ideas on how to do that."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513185638, "post_id": 47798828, "comment_id": 82558691, "body": "<a href=\"http://man7.org/linux/man-pages/man3/toupper.3.html\" rel=\"nofollow noreferrer\">RTFM</a>, ;)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1513185705, "post_id": 47798828, "comment_id": 82558728, "body": "I&#39;d close as a duplicate but the other doesn&#39;t have an answer"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1513185738, "post_id": 47798828, "comment_id": 82558750, "body": "@AnttiHaapala.: The other question? It has answer. (one posted by Chris)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 1, "creation_date": 1513185756, "post_id": 47798828, "comment_id": 82558766, "body": "@coderredoc well, upvoted :D"}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 3, "creation_date": 1513185738, "post_id": 47798898, "comment_id": 82558748, "body": "this doesn&#39;t <i>convert</i> the string. Anyway there is the <i>other</i> question as well."}, {"owner": {"reputation": 873, "user_id": 8549273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4221973c7c25441a563ef5b29ab81e01?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Watson", "link": "https://stackoverflow.com/users/8549273/andrew-watson"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1513185834, "post_id": 47798898, "comment_id": 82558828, "body": "This definitely convert to uppercase and lower case I&#39;ve checked it."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1513191261, "post_id": 47798898, "comment_id": 82561574, "body": "It does not. Try it; print the string before and after your code."}], "tags": [], "owner": {"reputation": 873, "user_id": 8549273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4221973c7c25441a563ef5b29ab81e01?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Watson", "link": "https://stackoverflow.com/users/8549273/andrew-watson"}, "is_accepted": false, "score": -3, "last_activity_date": 1513185699, "creation_date": 1513185699, "answer_id": 47798898, "question_id": 47798828, "link": "https://stackoverflow.com/questions/47798828/any-built-in-function-to-chanage-case-in-c/47798898#47798898", "title": "Any built-in function to chanage case in C?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint main () {\n   int i = 0;\n   char c;\n   char str[] = \"hello\";\n\n   while(str[i]) {\n      putchar (toupper(str[i]));\n\n      i++;\n   }\n     printf(\"\\n\");\n     i=0;\nwhile(str[i]) {\n      putchar (tolower(str[i]));\n\n      i++;\n   }\n\n   return(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9095151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cf93c4a8a9a80dfe96dacaa0e5c929b?s=128&d=identicon&r=PG&f=1", "display_name": "Mant Vant", "link": "https://stackoverflow.com/users/9095151/mant-vant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1513185782, "answer_count": 1, "score": -3, "last_activity_date": 1513185699, "creation_date": 1513185395, "last_edit_date": 1513185425, "question_id": 47798828, "link": "https://stackoverflow.com/questions/47798828/any-built-in-function-to-chanage-case-in-c", "closed_reason": "Duplicate", "title": "Any built-in function to chanage case in C?", "body": "<p>How can I change case in C without implementing function ? Is it possible?\ne.g hi==> HI</p>\n"}, {"tags": ["c", "sdl-2"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 5, "creation_date": 1513184984, "post_id": 47798544, "comment_id": 82558249, "body": "You should call <code>SDL_PollEvent</code> in a loop until it returns <code>false</code> to consume all of the events received in the last frame. The delay you&#39;re noticing is due to the accumulation of unprocessed events in the event queue."}, {"owner": {"reputation": 1220, "user_id": 5878272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14e96159153b67fab5222b7c5fa18c71?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik", "link": "https://stackoverflow.com/users/5878272/fredrik"}, "edited": false, "score": 0, "creation_date": 1513185360, "post_id": 47798544, "comment_id": 82558491, "body": "And you shold not sleep for 1000ms.."}, {"owner": {"reputation": 998, "user_id": 8993709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f79d970224ae145b6b546107f6b572?s=128&d=identicon&r=PG&f=1", "display_name": "papillon", "link": "https://stackoverflow.com/users/8993709/papillon"}, "reply_to_user": {"reputation": 1220, "user_id": 5878272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14e96159153b67fab5222b7c5fa18c71?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik", "link": "https://stackoverflow.com/users/5878272/fredrik"}, "edited": false, "score": 0, "creation_date": 1513185491, "post_id": 47798544, "comment_id": 82558602, "body": "@Fredrik why not?"}, {"owner": {"reputation": 998, "user_id": 8993709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f79d970224ae145b6b546107f6b572?s=128&d=identicon&r=PG&f=1", "display_name": "papillon", "link": "https://stackoverflow.com/users/8993709/papillon"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1513185529, "post_id": 47798544, "comment_id": 82558628, "body": "@Quentin it helps me understand what is going on. I still need to experiment it and play with it for a while but you solved my problem."}, {"owner": {"reputation": 1220, "user_id": 5878272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14e96159153b67fab5222b7c5fa18c71?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik", "link": "https://stackoverflow.com/users/5878272/fredrik"}, "edited": false, "score": 0, "creation_date": 1513204047, "post_id": 47798544, "comment_id": 82567495, "body": "When you are sleeping for 1s your whole window/game will freeze for that time."}, {"owner": {"reputation": 998, "user_id": 8993709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f79d970224ae145b6b546107f6b572?s=128&d=identicon&r=PG&f=1", "display_name": "papillon", "link": "https://stackoverflow.com/users/8993709/papillon"}, "edited": false, "score": 0, "creation_date": 1513244589, "post_id": 47798544, "comment_id": 82581458, "body": "yes I know that but thank you for telling me"}], "owner": {"reputation": 998, "user_id": 8993709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f79d970224ae145b6b546107f6b572?s=128&d=identicon&r=PG&f=1", "display_name": "papillon", "link": "https://stackoverflow.com/users/8993709/papillon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513185010, "creation_date": 1513184430, "last_edit_date": 1513185010, "question_id": 47798544, "link": "https://stackoverflow.com/questions/47798544/why-does-sdl2-have-some-extra-delay", "title": "Why does SDL2 have some extra delay?", "body": "<p>SDL2 seems to have a strange behaviour that I don't think SDL1.2 had, concerning event loops. When executing a program made with the following code, there is an extra delay that makes it really slow.</p>\n\n<pre><code>#include \"SDL.h\"\n\nint main(int argc, char *argv[])\n{\n    SDL_Event event;\n    SDL_Init(SDL_INIT_VIDEO);\n    SDL_Window *wind = SDL_CreateWindow(\"test\", 700, 100, 300, 300, 0);\n\n    while (1)\n    {\n        SDL_PollEvent(&amp;event);\n        if (event.type == SDL_QUIT || event.key.keysym.sym == SDLK_ESCAPE)\n            break;\n        SDL_Delay(1000);\n    }\n    SDL_Quit();\n    return 0;\n}\n</code></pre>\n\n<p>For example, when clicking on the button \"escape\", it takes up to 4-5 seconds before the program closes, whereas it should take less than 1 second, since the delay is fixed at 1000ms.</p>\n\n<p>When using a <code>printf</code> in the loop, I noticed that even though the loop is working, my input is not considered before a certain amount of time.</p>\n\n<p>Why is there such a delay?</p>\n"}, {"tags": ["c", "string", "toupper"], "comments": [{"owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "edited": false, "score": 1, "creation_date": 1513183577, "post_id": 47798222, "comment_id": 82557324, "body": "Pardon? Didn&#39;t understand. can you be a bit more specific about what you are asking?"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 3, "creation_date": 1513183670, "post_id": 47798222, "comment_id": 82557392, "body": "It isn&#39;t a good idea to give your function the same name as a library function."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 3, "creation_date": 1513183673, "post_id": 47798222, "comment_id": 82557394, "body": "Why do you have <code>s[50] = &quot;hello&quot;;</code> inside the function? That overrides whatever is being passed in to the function"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1513183722, "post_id": 47798222, "comment_id": 82557434, "body": "And also won&#39;t work as you&#39;re trying to assign a string to an element of the array which may or may not be out of bounds."}, {"owner": {"reputation": 41, "user_id": 8972255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36dafcc3181f98564056cf7aca0c2433?s=128&d=identicon&r=PG&f=1", "display_name": "dsb4591", "link": "https://stackoverflow.com/users/8972255/dsb4591"}, "reply_to_user": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "edited": false, "score": 1, "creation_date": 1513184467, "post_id": 47798222, "comment_id": 82557941, "body": "Well the original function was defined in  a different language, and I was trying to convert it to C. @ArunAS I see that I do neet to change the name, but I was trying to keep the same names as I was converting it. I did add an underscore to clarify the function."}], "answers": [{"comments": [{"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1513192559, "post_id": 47798606, "comment_id": 82562221, "body": "@chux.: Rgarding this idea..it was remined to me by Bob__ and then added it."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 2, "last_activity_date": 1513192498, "last_edit_date": 1513192498, "creation_date": 1513184624, "answer_id": 47798606, "question_id": 47798222, "link": "https://stackoverflow.com/questions/47798222/how-would-you-convert-alpha-characters-to-n-string-to-uppercase-in-c/47798606#47798606", "title": "How would you convert alpha characters to n string to uppercase in C?", "body": "<p>It seems that OP wants to convert a string to upper case. Now here somehow OP messed up the assignment part. The code can be boiled down to assigning <code>uppercase</code> characters to the string passed.</p>\n\n<p>But here, the code is doing something that compiler complains about. <code>invalid conversion from 'const char*' to 'char'</code>. Well we are trying to assign an <code>char*</code> to a <code>char</code> so it complained. The whole code can be simplified though with few thoughts. We will write a module that will convert a string to all uppercase. That's it. Then we will test it with \"hello\" or some string.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;ctype.h&gt;\n#include&lt;string.h&gt;\nvoid toupperString(char s[])\n{\n  size_t len = strlen(s), i = 0;\n\n  while(i &lt; len) \n   {\n    s[i] = toupper((unsigned char) s[i]);\n    i++;\n   }\n}\n\nint main(void) {\n  char s[100];\n  strcpy(s,\"hello\"); // char s[100]=\"hello\" also works;\n  toupperString(s);\n  printf(\"%s\\n\",s );\n  return 0;\n} \n</code></pre>\n\n<p>Use of your <code>putchar</code> was right. So this will work with added feature that it will now go on printing too. (You decide if it's feature - because simply the use will not be that useful other than printing it - always printing whatever is given to the <code>toupperString</code> is not a good idea).</p>\n\n<pre><code>void toupperString(char s[])\n{\n  size_t len = strlen(s), i = 0;\n\n  while(i &lt; len) \n   {\n    s[i] = toupper((unsigned char) putchar(s[i]));\n    i++;\n   }\n}\n</code></pre>\n\n<p>You have some suspicious use in the function also. For example the return value of it. Why returning the <code>\\0</code> character? Is it needed? If the answer is no then just make it <code>void</code> return type denoting you are not returning anything. Also as array decays into pointer the char array will be changed and you don't need to do anything to return it. As you are basically modifying the original array of characters.</p>\n\n<p>Well we can write it more concisely like this as </p>\n\n<pre><code>char* toupperString(char *s)\n{\n    char *p = s;\n    while( *s) \n    {\n        *s= toupper((unsigned char) *s);\n        ++s;\n    }\n    return p;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1513185790, "post_id": 47798702, "comment_id": 82558797, "body": "You have already said all what I&#39;d like to comment about OP&#39;s code, but may I suggest you to get rid of the call to <code>strlen</code>? I think it&#39;s useless: <a href=\"https://ideone.com/5IlRo9\" rel=\"nofollow noreferrer\">ideone.com/5IlRo9</a>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1513185924, "post_id": 47798702, "comment_id": 82558880, "body": "@Bob__ can&#39;t not use <code>strlen</code> since the function is returning the string."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1513185977, "post_id": 47798702, "comment_id": 82558910, "body": "@ChrisTurner.: Yikes sorry Chris...Misinterpeted"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1513186056, "post_id": 47798702, "comment_id": 82558946, "body": "@coderredoc your version of the function doesn&#39;t return <code>s</code> so could be implemented without <code>strlen</code> though"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 3, "creation_date": 1513186062, "post_id": 47798702, "comment_id": 82558955, "body": "<a href=\"https://ideone.com/cEmO1d\" rel=\"nofollow noreferrer\">ideone.com/cEmO1d</a>, plus in this state your code can invoke UB if strlen return &gt;  <code>INT_MAX</code>."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1513186091, "post_id": 47798702, "comment_id": 82558974, "body": "@ChrisTurner.:Exactly my point..thats why I am doing it. Taking time as I was intiially editing yours."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1513186194, "post_id": 47798702, "comment_id": 82559045, "body": "I can&#39;t say to understand your objection... Do you mind elaborate? Please note that I&#39;m not trying to force you to my point of view."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1513186333, "post_id": 47798702, "comment_id": 82559119, "body": "If you are using <code>strlen</code> then you can ofc avoid the <code>strlen</code> because strlen works when the char array is nulll  terminated"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1513186530, "post_id": 47798702, "comment_id": 82559226, "body": "@Bob__ I meant you can&#39;t avoid it using the design you supplied...obviously you can if you use another <code>char *</code> as per Stargateur&#39;s suggestion"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1513186595, "post_id": 47798702, "comment_id": 82559260, "body": "Using <code>strlen</code> isn&#39;t &quot;useless&quot; - it&#39;s just inefficient as you&#39;ll end up traversing the string twice. But the basic logic is still sound and it&#39;s what the OP provided."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513187148, "post_id": 47798702, "comment_id": 82559557, "body": "@Stargateur Sure, but I think they&#39;d be experiencing lots of other issues trying to deal with a 2GB+ string :)"}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 1, "last_activity_date": 1513184962, "creation_date": 1513184962, "answer_id": 47798702, "question_id": 47798222, "link": "https://stackoverflow.com/questions/47798222/how-would-you-convert-alpha-characters-to-n-string-to-uppercase-in-c/47798702#47798702", "title": "How would you convert alpha characters to n string to uppercase in C?", "body": "<p>Your current function has the basic premise of what you're trying to achieve already, but suffers from a number of problems.</p>\n\n<p>Firstly, calling it <code>toupper</code> is no doubt giving you headaches because you're implementing the function using the pre-existing <code>toupper</code> function. Your function needs to take a string and then return the modified string, but the existing <code>toupper</code> is for taking and return a single <code>char</code>. Notionally, since you're modifying the passed in string, you don't need to return anything, but it can't hurt to return it.</p>\n\n<p>Secondly you're calling <code>putchar</code> for no readily apparent reason. You can leave that out and if required, print the updated string in later parts of your code.</p>\n\n<p>Thirdly, you're returning <code>s[i]</code> which is just a <code>char</code> and given that <code>i</code> has been incremented the length of the string would be pointing at the terminating NUL character.</p>\n\n<p>You also have the spurious line <code>s[50] = \"hello\";</code> which is setting the 51st character of the passed in string to some value, which won't be any of the characters in \"hello\", but instead will be one of the bytes of the memory location of the string \"hello\". If you're attempting to declare <code>s</code> to be \"hello\", you should do that in the calling function which I've included as an example.</p>\n\n<pre><code>int main(void)\n{\n  char s[]=\"hello\";\n  make_string_upper(s);\n  printf(\"%s\\n\",s);\n}\n\nchar *make_string_upper(char *s)\n{\n  int i = 0;\n  int len = strlen(s);\n\n  while(i &lt; len) //converting to upper until the length is reached.\n   {\n    s[i] = toupper(s[i]);\n    i++;\n   }\n   return s;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8972255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36dafcc3181f98564056cf7aca0c2433?s=128&d=identicon&r=PG&f=1", "display_name": "dsb4591", "link": "https://stackoverflow.com/users/8972255/dsb4591"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "closed_date": 1513191305, "answer_count": 2, "score": -3, "last_activity_date": 1513192498, "creation_date": 1513183449, "question_id": 47798222, "link": "https://stackoverflow.com/questions/47798222/how-would-you-convert-alpha-characters-to-n-string-to-uppercase-in-c", "closed_reason": "Needs details or clarity", "title": "How would you convert alpha characters to n string to uppercase in C?", "body": "<p>This is what I have so far. I'm just trying to understand how to implement this function.</p>\n\n<pre><code>char toupper(char s[])\n{\n  s[50] = \"hello\";\n  int i = 0;\n  int len;\n  len = strlen(s);\n\n  while(i &lt; len) //converting to upper until the length is reached.\n   {\n    s[i] = putchar(toupper(s[i]));\n    i++;\n   }\n   return s[i];\n}\n</code></pre>\n"}, {"tags": ["c", "ftp", "libcurl", "passive-mode"], "comments": [{"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1513183636, "post_id": 47798157, "comment_id": 82557366, "body": "<code>dir</code> isn&#39;t an FTP command; <code>dir</code> is a command understood by your FTP <i>client</i>."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 1, "creation_date": 1513183767, "post_id": 47798157, "comment_id": 82557466, "body": "<a href=\"https://tools.ietf.org/html/rfc959\" rel=\"nofollow noreferrer\">tools.ietf.org/html/rfc959</a> read this RFC."}], "owner": {"reputation": 19, "user_id": 6013738, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6wbWptw0AWw/AAAAAAAAAAI/AAAAAAAAATE/PhhyA_3pd8g/photo.jpg?sz=128", "display_name": " idir", "link": "https://stackoverflow.com/users/6013738/idir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1513183793, "creation_date": 1513183236, "last_edit_date": 1592644375, "question_id": 47798157, "link": "https://stackoverflow.com/questions/47798157/command-dir-doesnt-work-with-libcurl-language-c", "title": "command &quot;dir&quot; doesn&#39;t work with libcurl language C", "body": "<p>I'm trying to send a &quot;DIR&quot; command on an ftp server with the fonction below:</p>\n<pre><code>void cpyFileInServeur(char *src, char *dest, char *filename, serveur server)\n{\n    CURL *curl;\n    CURLcode res;\n    struct curl_slist *header = NULL;\n    char *userpwd = (char *)malloc(sizeof(char) * 100);\n    sprintf(userpwd, &quot;%s:%s&quot;, server.user, server.passwd);\n    header = curl_slist_append(header, &quot;dir&quot;);\n    curl_global_init(CURL_GLOBAL_DEFAULT);\n    curl = curl_easy_init();\n    if (curl)\n    {\n        curl_easy_setopt(curl, CURLOPT_URL, server.url);\n        curl_easy_setopt(curl, CURLOPT_USERPWD, userpwd);\n        curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);\n        curl_easy_setopt(curl, CURLOPT_QUOTE, header);\n        res = curl_easy_perform(curl);\n        curl_easy_cleanup(curl);\n        if (res != CURLE_OK)\n        {\n            printf (&quot;Erreur === %d\\n&quot;, res);\n        }\n        else\n        {\n            printf (&quot;Success .... == %d\\n&quot;, res);\n        }\n    }\n    curl_global_cleanup();\n}\n</code></pre>\n<p>Error:</p>\n<blockquote>\n<p>500 DIR not understood</p>\n<p>QUOT command failed with 500</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/PdnqM.png\" rel=\"nofollow noreferrer\">result</a></p>\n<p>when I use the terminal, I get the same error.\nBut if I use the command &quot;pass&quot;, then it works</p>\n<p>image below</p>\n<p><a href=\"https://i.stack.imgur.com/XpuW7.png\" rel=\"nofollow noreferrer\">result</a></p>\n<p>Thanks for help.</p>\n"}, {"tags": ["c", "data-structures", "struct", "return"], "comments": [{"owner": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "edited": false, "score": 3, "creation_date": 1513183137, "post_id": 47798086, "comment_id": 82557017, "body": "Why would you want to do this? How would a consumer of you code declare a variable on the struct?"}, {"owner": {"reputation": 315, "user_id": 7762652, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/f7cac3a546a55e49ed85ed343290e606?s=128&d=identicon&r=PG&f=1", "display_name": "nice_remark", "link": "https://stackoverflow.com/users/7762652/nice-remark"}, "reply_to_user": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "edited": false, "score": 1, "creation_date": 1513183373, "post_id": 47798086, "comment_id": 82557192, "body": "Need to return the two arrays for future usage within the program."}, {"owner": {"reputation": 473, "user_id": 8089201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d09739a15b23d2add3bf24ffa13677b?s=128&d=identicon&r=PG&f=1", "display_name": "idontseethepoint", "link": "https://stackoverflow.com/users/8089201/idontseethepoint"}, "edited": false, "score": 1, "creation_date": 1513183495, "post_id": 47798086, "comment_id": 82557282, "body": "You could declare the struct outside the function, or pass pointers or refs as arguments so that the function can modify the data of the handle passed in"}, {"owner": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "edited": false, "score": 1, "creation_date": 1513183629, "post_id": 47798086, "comment_id": 82557362, "body": "Just declare the structure outside the function. It&#39;ll be easier, and it&#39;s what people expect."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1513187783, "post_id": 47798086, "comment_id": 82559910, "body": "Array indices start at 0, not 1."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1513187956, "post_id": 47798086, "comment_id": 82560002, "body": "You can return a value of structure type from a function, but the return type needs to be completely declared before the function declaration. Currently, your <code>struct memory_data</code> type is only completely declared within the function, so you cannot return it."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1513188168, "post_id": 47798086, "comment_id": 82560111, "body": "Anyways, if you want to return something from a function, don&#39;t use <code>void</code> as its return type in the declaration."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1513189365, "post_id": 47798086, "comment_id": 82560653, "body": "&quot;create a structure within a function, and then return that structure when the function exits?&quot; No"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "edited": false, "score": 0, "creation_date": 1513189686, "post_id": 47798086, "comment_id": 82560797, "body": "@Sean <a href=\"https://stackoverflow.com/questions/47798086/return-a-structure-that-was-created-within-a-function#comment82557362_47798086\">declare the structure outside the function</a> will not work at file scope as the members have variable size."}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1513189656, "post_id": 47799767, "comment_id": 82560784, "body": "Read the following: <a href=\"https://stackoverflow.com/questions/13645936/variably-modified-array-at-file-scope-in-c\" title=\"variably modified array at file scope in c\">stackoverflow.com/questions/13645936/&hellip;</a>. Anyway, i have edited the answer."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1513190078, "post_id": 47799767, "comment_id": 82560964, "body": "<code>*memData.phdr_addrs[phead_cnt][1]</code> is trying to dereference an <code>int</code>. Perhaps you meant <code>memData-&gt;phdr_addrs[phead_cnt][1]</code>. Also the indices should be 0 and 1, not 1 and 2 (this error is also in the original code)."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1513192105, "post_id": 47799767, "comment_id": 82561994, "body": "You probably missed a <code>typedef</code> in the first snippet."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1513192500, "post_id": 47799767, "comment_id": 82562188, "body": "@IanAbbott perhaps they meant <code>m-&gt;phdr_addrs[phead_cnt][1]</code>, given that <code>memData</code> <i>should</i> be the type of the argument <code>m</code>."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1513247162, "post_id": 47799767, "comment_id": 82583226, "body": "@Bob__ Yes, I was thinking memData was the pointer variable for some reason (probably end of day tiredness!)."}], "tags": [], "owner": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "is_accepted": false, "score": 0, "last_activity_date": 1513189742, "last_edit_date": 1513189742, "creation_date": 1513189272, "answer_id": 47799767, "question_id": 47798086, "link": "https://stackoverflow.com/questions/47798086/return-a-structure-that-was-created-within-a-function/47799767#47799767", "title": "Return a structure that was created within a function?", "body": "<p>First of all, in order to return a structure from you function you need to declare it outside of the functions scope, so other functions would be able to use it as well.</p>\n\n<pre><code>/* You can change this size if you wish */\n#define PHDR_ADDRESS_SIZE (0xffff)\nstruct memory_data {\n\n        int phdr_addrs[PHDR_ADDRESS_SIZE][2];\n        int section_bounds[PHDR_ADDRESS_SIZE][2];\n   } memData;\n\nstatic void section_to_segment_map(Elf *elf, GElf_Ehdr *ehdr)\n{\n/* Code... */\n}\n\nint main(void)\n{\n    memData m = {};\n}\n</code></pre>\n\n<p>In order to return a structure from your function, you have two main options.</p>\n\n<h2>Actually return the structre</h2>\n\n<p>You need to cahnge the return value of the function to be from the type \"memData\" instead of \"void\". Then, you can just return that value.\nFor example:</p>\n\n<pre><code>memData section_to_segment_map(Elf *elf, GElf_Ehdr *ehdr)\n{\n    memData m = {};\n    /* Code... */\n    return m;\n}\n</code></pre>\n\n<h2>Pass an out parameter to the function</h2>\n\n<p>Another option, which is more reccomended in my opinion is to pass an out parameter to the function, which is a pointer.</p>\n\n<p>You need to pass a pointer to memData, and the you can change it inside your function. For example:</p>\n\n<pre><code>void section_to_segment_map(Elf *elf, GElf_Ehdr *ehdr, memData* m)\n{\n    for(int phead_cnt = 0; phead_cnt &lt; ehdr-&gt;e_phnum; phead_cnt++) {\n        GElf_Phdr mem;\n        GElf_Phdr *phdr = gelf_getphdr(elf, phead_cnt, &amp;mem);\n\n        *memData.phdr_addrs[phead_cnt][1] = phdr-&gt;p_vaddr;\n        *memData.phdr_addrs[phead_cnt][2] = phdr-&gt;p_vaddr + phdr-&gt;p_memsz;\n    }\n    /* More of the code.... */\nreturn;\n}\n</code></pre>\n\n<p>In order to call the function from main, you should do the following:</p>\n\n<pre><code>int main(void)\n{\n    memData m = {};\n    /* Put your own arguments isntead of &lt;elf&gt;, &lt;edhr&gt; */\n    section_to_segment_map(&lt;elf&gt;, &lt;ehdr&gt;, &amp;m);\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1513190569, "creation_date": 1513190569, "answer_id": 47800069, "question_id": 47798086, "link": "https://stackoverflow.com/questions/47798086/return-a-structure-that-was-created-within-a-function/47800069#47800069", "title": "Return a structure that was created within a function?", "body": "<blockquote>\n  <p>Return a structure that was created within a function?<br>\n  is it possible to create a structure within a function, and then return that structure ..?</p>\n</blockquote>\n\n<p>No.  The return type must be defined before the function body.</p>\n\n<pre><code>// void section_to_segment_map(Elf *elf, GElf_Ehdr *ehdr) {\nstruct memory_data section_to_segment_map(Elf *elf, GElf_Ehdr *ehdr) {\n</code></pre>\n\n<p>Yet OP's <code>struct</code> has a variable size and so defining the <code>struct</code> ahead of time fails. </p>\n\n<pre><code>struct memory_data {\n    // fails  \"error: variably modified 'phdr_addrs' at file scope\"\n    int phdr_addrs[some_variable][2];  \n    ...\n} memData;\n</code></pre>\n\n<p>A fixed sized <code>struct</code> would work, yet may be inefficient if large.</p>\n\n<pre><code>#define MEMORY_DATA_N_MAX 10\nstruct memory_data {\n    int phdr_addrs[MEMORY_DATA_N_MAX][2];  \n    ...\n} memData;\n</code></pre>\n\n<hr>\n\n<p>Various dynamic options exist such as creating a <code>struct</code> that contains the size information and pointers to allocated space.  This obliges <code>section_to_segment_map()</code> to allocate memory and the caller to insure it is free'd.</p>\n\n<pre><code>struct memory_data {\n    size_t sz;\n    int (*phdr_addrs)[2];\n    int (*section_bounds)[2];\n} memData;\n</code></pre>\n\n<hr>\n"}], "owner": {"reputation": 315, "user_id": 7762652, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/f7cac3a546a55e49ed85ed343290e606?s=128&d=identicon&r=PG&f=1", "display_name": "nice_remark", "link": "https://stackoverflow.com/users/7762652/nice-remark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1513190569, "creation_date": 1513183001, "question_id": 47798086, "link": "https://stackoverflow.com/questions/47798086/return-a-structure-that-was-created-within-a-function", "title": "Return a structure that was created within a function?", "body": "<p>As stated in the question, is it possible to create a structure within a function, and then return that structure when the function exits? Since the structure is not created until the function is called, I don't know what to put in the prototype for the return value. Any advice/help would be great, thanks.</p>\n\n<pre><code>static void section_to_segment_map(Elf *elf, GElf_Ehdr *ehdr) {\n\n    struct memory_data {\n        int phdr_addrs[ehdr-&gt;e_phnum][2];\n        int section_bounds[ehdr-&gt;e_shnum][2];\n    } memData;\n\n    for(int phead_cnt = 0; phead_cnt &lt; ehdr-&gt;e_phnum; phead_cnt++) {\n        GElf_Phdr mem;\n        GElf_Phdr *phdr = gelf_getphdr(elf, phead_cnt, &amp;mem);\n\n        memData.phdr_addrs[phead_cnt][1] = phdr-&gt;p_vaddr;\n        memData.phdr_addrs[phead_cnt][2] = phdr-&gt;p_vaddr + phdr-&gt;p_memsz;\n\n    }\n    printf(\"Starting and Ending Address Values for Program Segments:\\n\");\n    for(int i = 0; i &lt; ehdr-&gt;e_phnum; i++)\n       printf(\"%x --&gt; %x\\n\", memData.phdr_addrs[i][1], memData.phdr_addrs[i][2]);\n\n    Elf_Scn *scn = NULL;\n    for(int shead_cnt = 0; shead_cnt &lt; ehdr-&gt;e_shnum; shead_cnt++) {\n        scn = elf_getscn(elf, shead_cnt);\n        GElf_Shdr shdr_mem;\n        GElf_Shdr *shdr = gelf_getshdr(scn, &amp;shdr_mem);\n\n        memData.section_bounds[shead_cnt][1] = shdr-&gt;sh_addr;\n        memData.section_bounds[shead_cnt][2] = shdr-&gt;sh_addr + shdr-&gt;sh_size;\n    }\n    printf(\"\\n\");\n    printf(\"Starting and Ending Addresses for Program Sections:\\n\");\n    for(int j = 0; j &lt; ehdr-&gt;e_shnum; j++) \n        printf(\"%x --&gt; %x\\n\", memData.section_bounds[j][1], memData.section_bounds[j][2]);\n\n    return memData;\n}\n</code></pre>\n"}, {"tags": ["c", "timer", "process"], "comments": [{"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 0, "creation_date": 1513182949, "post_id": 47797903, "comment_id": 82556866, "body": "use <code>alarm()</code> in parents, use <code>wait()</code> in parents to wait for child to finish"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 9044760, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1544801025597539/picture?type=large", "display_name": "Bryan Shtjefni", "link": "https://stackoverflow.com/users/9044760/bryan-shtjefni"}, "edited": false, "score": 0, "creation_date": 1513197069, "post_id": 47798365, "comment_id": 82564500, "body": "This is already helping me lots, but something I&#39;d like to ask you is how would i be able to do this for a number of time? I need to run a timer every 5 seconds for 3 times but when I try to put the function in a cycle it just does it once."}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "reply_to_user": {"reputation": 93, "user_id": 9044760, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1544801025597539/picture?type=large", "display_name": "Bryan Shtjefni", "link": "https://stackoverflow.com/users/9044760/bryan-shtjefni"}, "edited": false, "score": 0, "creation_date": 1513210914, "post_id": 47798365, "comment_id": 82569718, "body": "@BryanShtjefni you can set the multiple alarm for running timer every n seconds right ?"}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "reply_to_user": {"reputation": 93, "user_id": 9044760, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1544801025597539/picture?type=large", "display_name": "Bryan Shtjefni", "link": "https://stackoverflow.com/users/9044760/bryan-shtjefni"}, "edited": false, "score": 0, "creation_date": 1513210963, "post_id": 47798365, "comment_id": 82569727, "body": "@BryanShtjefni I edited my answer,check it. Is that you want or anything else."}], "tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": true, "score": 1, "last_activity_date": 1513210833, "last_edit_date": 1513210833, "creation_date": 1513183885, "answer_id": 47798365, "question_id": 47797903, "link": "https://stackoverflow.com/questions/47797903/run-a-task-for-n-second-in-c/47798365#47798365", "title": "Run a task for N second in C", "body": "<p>Try to read the man pages of <code>alarm()</code>. check the man page of <code>alarm</code> </p>\n\n<pre><code>  unsigned int alarm(unsigned int seconds);\n</code></pre>\n\n<p>What alarm returns ? <em>alarm()  returns the number of seconds remaining until any previously scheduled alarm was due to be delivered, or zero if there\n       was no previously scheduled alarm.</em></p>\n\n<p>you can set multiple <code>alarm()</code> for <code>N</code> seconds, but not all at a time.</p>\n\n<p>Here is the simple code to understand alarm().</p>\n\n<pre><code>#include&lt;signal.h&gt;\n#include&lt;stdio.h&gt;\nint al = 5;\nvoid my_isr(int n)\n{\n        static int count = 0;//count variable\n\n        if(n == 17) {\n                /** this child will execute if child completer before 5 seconds**/\n                int ret = wait(0);//releases child resources\n                printf(\"child %d completed \\n\",ret);\n        }\n\n        if(n == 14) {\n                printf(\"in sigalarm isr \\n\");\n                /** do task here **/\n                if(count&lt;3) {\n                        alarm(5);// after doing some task set another alarm\n                }\n                count++;\n        }\n}\nint main()\n{\n        if(fork()==0)\n        {\n                printf(\"child : pid = %d ppid  = %d\\n\",getpid(),getppid());\n                /** letting the child to run for 20 seconds **/\n                sleep(20);\n                printf(\"child exits after task over \\n\");\n                exit(0);\n        }\n        else\n        {\n                alarm(al);//setting 5 seconds timer for child to finish job\n\n                signal(SIGALRM,my_isr);\n                /** to avoid child to become zombie. when child completes parents will receive SIGCHLD signal, upon receving this parent needs to free the resources associated with it using wait */ \n                signal(SIGCHLD,my_isr);\n                while(1);//to keep main process alive for observation\n        }\n}\n</code></pre>\n\n<p>I hope it helps you.</p>\n"}], "owner": {"reputation": 93, "user_id": 9044760, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1544801025597539/picture?type=large", "display_name": "Bryan Shtjefni", "link": "https://stackoverflow.com/users/9044760/bryan-shtjefni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 47798365, "answer_count": 1, "score": 0, "last_activity_date": 1513210833, "creation_date": 1513182405, "question_id": 47797903, "link": "https://stackoverflow.com/questions/47797903/run-a-task-for-n-second-in-c", "title": "Run a task for N second in C", "body": "<p>I'm trying to complete an assignment for uni and I'm encountering an issue. I want to create something like a \"timer\" for my program. What I mean is that I want to run the program for 30 seconds, and after those have passed I want to print some stats before closing it. Since it is a process related project I would like this timer to be passed to the child processes as well if possible. Here is some pseudo-code of what I'm trying to accomplish.</p>\n\n<pre><code>/* Timer starts from here */\n    - forking childs\n    - child execute\n    - other actions\n/* Timer finishes here */\n\nPrinting statistics\nexit(0)\n</code></pre>\n\n<p>I tried reading up something on alarm, time and others but I wasn't able to find anything that could help me. Hope you can help me out and thanks in advance.</p>\n"}, {"tags": ["c", "algorithm", "gomoku"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1513181991, "post_id": 47797725, "comment_id": 82556205, "body": "Are you compiling with optimizations? Have you profiled your application and determined that loop to be problematic?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1513182357, "post_id": 47797725, "comment_id": 82556446, "body": "With your suggestion to &quot;search for best points only around the human&#39;s last choice&quot; you are introducing heuristics and so your game is no longer deterministic (or at least non-complete)."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1513182386, "post_id": 47797725, "comment_id": 82556469, "body": "Note that, given a large enough stack, chess is also a deterministic game."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1513183180, "post_id": 47797725, "comment_id": 82557050, "body": "min max is not very hard to do"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1513185123, "post_id": 47797725, "comment_id": 82558327, "body": "@PaulOgilvie  <a href=\"https://stackoverflow.com/questions/47797725/method-for-obtaining-speed-up-on-computer-decision-in-c#comment82556469_47797725\">Hmmm</a>, Given the <a href=\"https://en.wikipedia.org/wiki/Fifty-move_rule\" rel=\"nofollow noreferrer\">50 move rule</a>, 30 pieces to capture, 6*8*2 different pawn moves, then certainly the stack recursion depth needed by Chess to support looking moves ahead does not exceed maybe 7300 or so. ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 8978619, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9eed594d8e85591ca65a5eb928e20b03?s=128&d=identicon&r=PG&f=1", "display_name": "omfg", "link": "https://stackoverflow.com/users/8978619/omfg"}, "edited": false, "score": 0, "creation_date": 1513280895, "post_id": 47804066, "comment_id": 82604409, "body": "Is it possible to implement the algorithm with the current 1-dimension array?"}, {"owner": {"reputation": 9546, "user_id": 58866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6OsC0.jpg?s=128&g=1", "display_name": "Imran", "link": "https://stackoverflow.com/users/58866/imran"}, "reply_to_user": {"reputation": 45, "user_id": 8978619, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9eed594d8e85591ca65a5eb928e20b03?s=128&d=identicon&r=PG&f=1", "display_name": "omfg", "link": "https://stackoverflow.com/users/8978619/omfg"}, "edited": false, "score": 0, "creation_date": 1513281059, "post_id": 47804066, "comment_id": 82604476, "body": "Yes. Your tree search algorithm should not care about your board representation."}, {"owner": {"reputation": 45, "user_id": 8978619, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9eed594d8e85591ca65a5eb928e20b03?s=128&d=identicon&r=PG&f=1", "display_name": "omfg", "link": "https://stackoverflow.com/users/8978619/omfg"}, "edited": false, "score": 0, "creation_date": 1513794495, "post_id": 47804066, "comment_id": 82792164, "body": "I have last question. How is &#39;- 100&#39; calculated for the above dfs algorithm code? I&#39;ve expanded the board pos[9] to pos[16] to play on larger space. But the computer became rather foolish in its judgement after expanding. How would I calculate dfs_algorithm on 4*4 board(pos[16])?"}, {"owner": {"reputation": 9546, "user_id": 58866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6OsC0.jpg?s=128&g=1", "display_name": "Imran", "link": "https://stackoverflow.com/users/58866/imran"}, "reply_to_user": {"reputation": 45, "user_id": 8978619, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9eed594d8e85591ca65a5eb928e20b03?s=128&d=identicon&r=PG&f=1", "display_name": "omfg", "link": "https://stackoverflow.com/users/8978619/omfg"}, "edited": false, "score": 0, "creation_date": 1513795206, "post_id": 47804066, "comment_id": 82792494, "body": "-100 is a dummy initial value that will be overwritten the first time a real score is computed, since the condition <code>if (score &gt; best_score)</code> will be true"}], "tags": [], "owner": {"reputation": 9546, "user_id": 58866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6OsC0.jpg?s=128&g=1", "display_name": "Imran", "link": "https://stackoverflow.com/users/58866/imran"}, "is_accepted": false, "score": 0, "last_activity_date": 1513210536, "creation_date": 1513210536, "answer_id": 47804066, "question_id": 47797725, "link": "https://stackoverflow.com/questions/47797725/method-for-obtaining-speed-up-on-computer-decision-in-c/47804066#47804066", "title": "Method for obtaining speed up on computer decision in C", "body": "<p>You are trying to solve the entire game tree. On a 3x3 board there are 9! = 362880 nodes in the tree, which is small enough for your computer to handle, however on a 4x4 board there are 16! = 20922789888000 (20.9 trillion) nodes, which is too many to visit in a reasonable amount of time.</p>\n\n<p>Consider implementing a search algorithm that can return a reasonable estimate of the current position's score without solving the entire game tree. For GoMoku I recommend <a href=\"https://en.wikipedia.org/wiki/Monte_Carlo_tree_search\" rel=\"nofollow noreferrer\">Monte Carlo Tree Search</a>. It has been successfully applied to many games such as Go, and in its vanilla form it doesn't require you to write a <a href=\"https://en.wikipedia.org/wiki/Evaluation_function\" rel=\"nofollow noreferrer\">static evaluation function</a> as required for fixed depth min-max search and its variants such as alpha-beta.</p>\n"}], "owner": {"reputation": 45, "user_id": 8978619, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9eed594d8e85591ca65a5eb928e20b03?s=128&d=identicon&r=PG&f=1", "display_name": "omfg", "link": "https://stackoverflow.com/users/8978619/omfg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513210536, "creation_date": 1513181916, "last_edit_date": 1513181940, "question_id": 47797725, "link": "https://stackoverflow.com/questions/47797725/method-for-obtaining-speed-up-on-computer-decision-in-c", "title": "Method for obtaining speed up on computer decision in C", "body": "<p>I'm trying to figure out the algorithms to play Gomoku(5 by 5 version of tictactoe) with computers.\nIn this case, I found that the most commonly used algorithms are Min-max(or Alpha-beta) but these are too hard for me to handles.. So I decided to use following codes which are quite easy to understand but time consuming.\nIt shows how a computers make its reasonable choice.</p>\n\n<pre><code>//------------------------------------------------------------\n// computer_move() checks for all legal moves in the current  |\n// position. then for each of them it calls the dfs_search()  |\n// function to get the moves' score. And finally it returns   |\n// the move with the best score.                              |\n//------------------------------------------------------------\n\nint computer_move()  //\n{\n    int best_move;  // best move so far\n    int best_score = -100;  // best score so far \n    int score;  // current score\n    int i;\n\n    for (i = 0; i &lt; 16; ++i) { //\n        if (pos[i] == EMPTY) {  // if a legal move can be made \n            pos[i] = COMPUTER;  // mark the move\n            score = -dfs_search(HUMAN); // \n            pos[i] = EMPTY; // take back the move\n\n            if (score &gt; best_score) {\n                best_score = score;\n                best_move = i;\n            }\n        }\n    }\n\n    printf(\"Computer's move: %d\\n\", best_move);\n    return best_move;   // return the best move found\n}\n\n\n//------------------------------------------------------------\n// dfs_search() gets the side to move, find all legal moves   |\n// for him, and for each move, it recursively calls itself.   |\n// It returns a score for the position.                       |\n// This recursive function continues on each variation until  |\n// the game's end is found in that variation. Which means     |\n// that the variation continues until check_result() returns  |\n// a value other than CONTINUE.                                   |\n// Note that this can be done in tic-tac-toe, since it's a    |\n// deterministic game. For games like chess or checkers we    |\n// can't continue the variation until reaching the game's end |\n// so we have to cut the variation at some point.             |\n//------------------------------------------------------------\n\nint dfs_search(int player) // \n{\n    int best_score = -100;\n    int score;\n    int result;\n    int i;\n\n    result = check_result(player);\n    if (result != CONTINUE) return result;  // return the result\n\n    for (i = 0; i &lt; 16; ++i) {\n        if (pos[i] == EMPTY) {\n            pos[i] = player;\n            score = -dfs_search(CHANGE_PLAYER(player)); // \n            pos[i] = EMPTY;\n\n            if (score &gt; best_score)\n                best_score = score;\n        }\n    }\n\n    return best_score;  // return the best score\n}\n</code></pre>\n\n<p>For 3 by 3 matrix, it works pretty well. For 4 by 4, however, it takes too long to leave a next stone. Since the reason of long time consuming is the first three or four decisions, I thought that just making the computer to search for best points only around the human's last choice(point) would be a solution.\nAfter the first three or four decisions, above formal algorithm will work well for the few remaining points. How do you think about it? And give some advices to modify the current algorithm.</p>\n"}, {"tags": ["c", "arrays", "char", "uint8t", "stdint"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1513182112, "post_id": 47797635, "comment_id": 82556282, "body": "To me it seems nothing is wrong with neither. A char is defined as 8 bits (1 byte) for all platforms, just as <code>uint8_t</code>. The only difference/problem with un- or signed is the sign extension when casting or converting to int."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1513182266, "post_id": 47797635, "comment_id": 82556382, "body": "@PaulOgilvie - That (<code>char</code> is 8 bits) is not guaranteed.  Overwhelmingly common, yes, but not guaranteed."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1513182494, "post_id": 47797635, "comment_id": 82556541, "body": "If char is not guaranteed 8 bits (thanks @OliverCharlesworth) then char must be used where char is required and <code>uint8_t</code> where bytes are requried (the latter e.g. on a network interface, the former e.g. on character processing)."}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1513182512, "post_id": 47797635, "comment_id": 82556556, "body": "@OliverCharlesworth: But <code>char</code> is the &quot;smallest addressable unit&quot; and has at least 8 bits. So <i>if</i> there is a <code>uint8_t</code> then both have the same size. \u2013 (Btw, POSIX requires that CHAR_BIT == 8.)"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1513182714, "post_id": 47797635, "comment_id": 82556702, "body": "If  network code depends on<code>char</code>s signedness (or size, or padding) , it is bad code anyway. IMHO."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1513183136, "post_id": 47797635, "comment_id": 82557014, "body": "@wildplasser network protocols are defined in terms of octets; I think it is reasonable for code to depend on <code>char</code> being 8-bit"}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 0, "creation_date": 1513183139, "post_id": 47797635, "comment_id": 82557018, "body": "Consider looking at: <a href=\"https://stackoverflow.com/questions/9727465/will-a-char-always-always-always-have-8-bits\" title=\"will a char always always always have 8 bits\">stackoverflow.com/questions/9727465/&hellip;</a>"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1513183257, "post_id": 47797635, "comment_id": 82557097, "body": "@M.M : exactly. But the wording should be  : char being <i>at least</i> 8bits wide."}, {"owner": {"reputation": 2153, "user_id": 6330511, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/SEM44.jpg?s=128&g=1", "display_name": "gmolau", "link": "https://stackoverflow.com/users/6330511/gmolau"}, "edited": false, "score": 0, "creation_date": 1513183813, "post_id": 47797635, "comment_id": 82557494, "body": "Ok, so I guess I should be reading more comprehensive tutorials then:) Thanks everyone!"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1513188668, "post_id": 47797635, "comment_id": 82560350, "body": "<code>uint8_t</code> is an optional type. I don&#39;t think it can exist if <code>unsigned char</code> is not exactly 8 bits wide, because <code>unsigned char</code> is the smallest addressable unit, and both <code>uint8_t</code> (if it exists) and <code>unsigned char</code> have no padding bits."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1513183093, "post_id": 47797919, "comment_id": 82556982, "body": "<code>uint8_t</code> does have the theoretical problem that it might not be a typedef for a character type, and therefore cannot be used for aliasing other types ... I expect that to be fixed at some point in the future though"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1513182458, "creation_date": 1513182458, "answer_id": 47797919, "question_id": 47797635, "link": "https://stackoverflow.com/questions/47797635/c-is-there-something-wrong-with-declaring-byte-arrays-as-uint8-t/47797919#47797919", "title": "C: Is there something wrong with declaring byte arrays as uint8_t?", "body": "<p>Starting with the introduction of <a href=\"http://en.cppreference.com/w/c/types/integer\" rel=\"nofollow noreferrer\"><code>stdint.h</code></a> header in C99, there is no good reason to continue using <code>char</code> type to represent small numbers.</p>\n\n<p>In addition to documenting your intentions better, <code>uint8_t</code> gives you one more important advantage: it guarantees that the byte is going to be treated as unsigned. When you use <code>char</code> you cannot assume if it is signed or unsigned, because this behavior is implementation-defined.</p>\n\n<p>As far as inadvertent printing of the buffer goes, using <code>uint8_t</code> is not going to guarantee any protection, because on many platforms it's simply a <code>typedef</code> for <code>unsigned char</code>.</p>\n"}], "owner": {"reputation": 2153, "user_id": 6330511, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/SEM44.jpg?s=128&g=1", "display_name": "gmolau", "link": "https://stackoverflow.com/users/6330511/gmolau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "accepted_answer_id": 47797919, "answer_count": 1, "score": 4, "last_activity_date": 1513182458, "creation_date": 1513181668, "question_id": 47797635, "link": "https://stackoverflow.com/questions/47797635/c-is-there-something-wrong-with-declaring-byte-arrays-as-uint8-t", "title": "C: Is there something wrong with declaring byte arrays as uint8_t?", "body": "<p>I'm working on a small networking application that uses byte arrays. Traditionally these would be declared with something like <code>char buf[] = ...</code>.</p>\n\n<p>This seems to be how it is (still?) done in most tutorials, yet it has the problem that it may obscure what is actually happening, for example when you try to print such an array and forget that not every char is a visible character.</p>\n\n<p>Some people <a href=\"https://matt.sh/howto-c\" rel=\"nofollow noreferrer\">have suggested</a> that you should stop using <code>chars</code> altogether and instead use the modern <code>uint8_t</code>. I find that very appealing, mostly on the principle that explicit is better than implicit.</p>\n\n<p>So, is there something wrong with declaring these kinds of arrays as <code>uint8_t buf[] = ...</code>?</p>\n"}, {"tags": ["c", "arrays", "loops", "pointers", "while-loop"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 4, "creation_date": 1513181746, "post_id": 47797584, "comment_id": 82556059, "body": "What is <code>ptr</code>?."}, {"owner": {"reputation": 550, "user_id": 2598904, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bbd7852db77b5ca6da17e5eaafe720d5?s=128&d=identicon&r=PG", "display_name": "ilmirons", "link": "https://stackoverflow.com/users/2598904/ilmirons"}, "edited": false, "score": 1, "creation_date": 1513182006, "post_id": 47797584, "comment_id": 82556209, "body": "I can&#39;t see any ptr variable declared in your snippet. I guess what you need is going through the ptrAll allocating a cursor (something you move by incrementing it to scan data) of type pointer to (char) pointer, point it at begginning of array and then scan it."}, {"owner": {"reputation": 19, "user_id": 8707700, "user_type": "registered", "profile_image": "https://graph.facebook.com/299638100517588/picture?type=large", "display_name": "Matt", "link": "https://stackoverflow.com/users/8707700/matt"}, "edited": false, "score": 0, "creation_date": 1513182220, "post_id": 47797584, "comment_id": 82556349, "body": "Yes, my mistake here. The PTR mentioned in the question is from the Book. Eventually I try printing using the following code: printf(&quot;%s&quot;, *ptrall++);"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1513183052, "post_id": 47797584, "comment_id": 82556948, "body": "@Matt: <code>ptrall</code> in your example is an <i>array</i>, not a pointer to pointer. You cannot increment an array. Your question title mentions &quot;pointers to pointers&quot;, but so far there are no pointers to pointers in your posted code. So, what &quot;pointers to pointers&quot; are you talking about?"}, {"owner": {"reputation": 19, "user_id": 8707700, "user_type": "registered", "profile_image": "https://graph.facebook.com/299638100517588/picture?type=large", "display_name": "Matt", "link": "https://stackoverflow.com/users/8707700/matt"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1513183900, "post_id": 47797584, "comment_id": 82557568, "body": "@AnT You&#39;re right. I guess I was wrong to begin with. It&#39;s just that the book describes array of pointers as a pointer to pointer. I&#39;ve checked it again and it does promote incrementing array of pointers without declaring **."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1513184012, "post_id": 47797584, "comment_id": 82557647, "body": "@Matt: Is there any chance the &quot;array of pointers&quot; in the book was actually <i>a function parameter</i>?"}], "answers": [{"comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1513181918, "post_id": 47797650, "comment_id": 82556151, "body": "This doesn&#39;t address the apparent problem though (&quot;the lvalue mistake&quot;)."}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1513182115, "post_id": 47797650, "comment_id": 82556284, "body": "@OliverCharlesworth You&#39;re right.  He must not have declared <code>ptr</code> as a <code>char**</code> creating the lvalue mistake.  Odd that the title of the question is incrementing pointers to pointers."}, {"owner": {"reputation": 19, "user_id": 8707700, "user_type": "registered", "profile_image": "https://graph.facebook.com/299638100517588/picture?type=large", "display_name": "Matt", "link": "https://stackoverflow.com/users/8707700/matt"}, "edited": false, "score": 0, "creation_date": 1513182644, "post_id": 47797650, "comment_id": 82556649, "body": "Terminating  array of pointers doesn&#39;t help. The lvalue mistake is still there. What should I have declared it as?"}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "reply_to_user": {"reputation": 19, "user_id": 8707700, "user_type": "registered", "profile_image": "https://graph.facebook.com/299638100517588/picture?type=large", "display_name": "Matt", "link": "https://stackoverflow.com/users/8707700/matt"}, "edited": false, "score": 0, "creation_date": 1513182719, "post_id": 47797650, "comment_id": 82556705, "body": "@Matt, It needs to be a <code>char **</code> like in the above <code>for</code> loop"}], "tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 1, "last_activity_date": 1513181712, "creation_date": 1513181712, "answer_id": 47797650, "question_id": 47797584, "link": "https://stackoverflow.com/questions/47797584/incrementing-pointers-to-pointers-in-c/47797650#47797650", "title": "Incrementing pointers to pointers in C", "body": "<p>To use this you need to terminate your array of pointers;</p>\n\n<pre><code>char *ptrall[] = {ptr1, ptr2, ptr3, NULL};\n\nfor(char**ptr=ptrall;*ptr;) printf(\"%s\\n\",*ptr++);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1513183102, "last_edit_date": 1513183102, "creation_date": 1513182540, "answer_id": 47797948, "question_id": 47797584, "link": "https://stackoverflow.com/questions/47797584/incrementing-pointers-to-pointers-in-c/47797948#47797948", "title": "Incrementing pointers to pointers in C", "body": "<blockquote>\n  <p>Question: How do I print all of the arrays using, say, while?</p>\n</blockquote>\n\n<p>It depends on how the array <code>ptrall</code> is defined.</p>\n\n<p>If the array <code>ptrall</code> is defined like</p>\n\n<pre><code>char *ptrall[] = { ptr1, ptr2, ptr3, NULL };\n</code></pre>\n\n<p>then it can be outputted the following way using a while loop</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void )\n{\n    char str1[] = \"This \";\n    char str2[] = \"is \";\n    char str3[] = \"a cat.\";\n\n    char *ptr1 = str1;\n    char *ptr2 = str2;\n    char *ptr3 = str3;\n\n    char *ptrall[] = { ptr1, ptr2, ptr3, NULL };\n\n    char **ptr = ptrall;\n\n    while (*ptr) printf(\"%s\", *ptr++);\n    putchar('\\n');\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>This is a cat.\n</code></pre>\n\n<p>If the array <code>ptrall</code> is defined as in your question that is like</p>\n\n<pre><code>char *ptrall[] = { ptr1, ptr2, ptr3 };\n</code></pre>\n\n<p>then it can be outputted the following way using a while loop</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void )\n{\n    char str1[] = \"This \";\n    char str2[] = \"is \";\n    char str3[] = \"a cat.\";\n\n    char *ptr1 = str1;\n    char *ptr2 = str2;\n    char *ptr3 = str3;\n\n    char *ptrall[] = { ptr1, ptr2, ptr3 };\n\n    char **ptr = ptrall;\n\n    while (ptr != ptrall + sizeof( ptrall ) / sizeof( *ptrall ) ) printf(\"%s\", *ptr++);\n    putchar('\\n');\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is the same as shown above.</p>\n\n<p>As for the expression used in this call</p>\n\n<pre><code>printf(\"%s\", *ptrall++); \n</code></pre>\n\n<p>then array designators are non-modifiable lvalues. You may not apply preincrement and postincrement operators to an array designator.</p>\n"}], "owner": {"reputation": 19, "user_id": 8707700, "user_type": "registered", "profile_image": "https://graph.facebook.com/299638100517588/picture?type=large", "display_name": "Matt", "link": "https://stackoverflow.com/users/8707700/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "closed_date": 1513195843, "accepted_answer_id": 47797948, "answer_count": 2, "score": 1, "last_activity_date": 1513183125, "creation_date": 1513181496, "last_edit_date": 1513183125, "question_id": 47797584, "link": "https://stackoverflow.com/questions/47797584/incrementing-pointers-to-pointers-in-c", "closed_reason": "Not suitable for this site", "title": "Incrementing pointers to pointers in C", "body": "<p>I've been going through Kernighan and Ritchie book in C and got lost in pointers to pointers that point to char arrays.</p>\n\n<p>Let's take this sample code:</p>\n\n<pre><code>char str1[] = \"This \";\nchar str2[] = \"is \";\nchar str3[] = \"a cat.\";\n\nchar *ptr1 = str1;\nchar *ptr2 = str2;\nchar *ptr3 = str3;\n\nchar *ptrall[] = { ptr1, ptr2, ptr3 };\n</code></pre>\n\n<p>Question:\nHow do I print all of the arrays using, say, while?</p>\n\n<p>The book tells me (quote):</p>\n\n<blockquote>\n<pre><code>while (...){\n   printf(\"%s\\\", *ptr++);}\n</code></pre>\n</blockquote>\n\n<p>So, this <code>*ptr++</code> is supposed to increment pointers within <code>**ptr</code>. But When I try to build it in VS it says there's the \"lvalue\" mistake.</p>\n\n<p>What do I misunderstand here? How should I increment pointers stored in **?\nAm I limited to <code>printf(\"%s\", ptr[i++])</code> only?</p>\n"}, {"tags": ["c", "optional-parameters", "guile"], "comments": [{"owner": {"reputation": 31593, "user_id": 58082, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/61200477cf8983809ec152f484750204?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/58082/pierre"}, "edited": false, "score": 0, "creation_date": 1513201848, "post_id": 47797521, "comment_id": 82566645, "body": "UPDATE: cross-posted on  <a href=\"https://lists.gnu.org/mailman/listinfo/guile-user\" rel=\"nofollow noreferrer\">lists.gnu.org/mailman/listinfo/guile-user</a>"}], "answers": [{"tags": [], "owner": {"reputation": 31593, "user_id": 58082, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/61200477cf8983809ec152f484750204?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/58082/pierre"}, "is_accepted": true, "score": 1, "last_activity_date": 1513260552, "last_edit_date": 1513260552, "creation_date": 1513249732, "answer_id": 47811866, "question_id": 47797521, "link": "https://stackoverflow.com/questions/47797521/gnu-guile-function-registered-with-scm-c-define-gsubr-how-can-i-handle-an-opti/47811866#47811866", "title": "GNU guile: function registered with scm_c_define_gsubr: how can i handle an optional parameter?", "body": "<p>The question was answered on the guile-user mailing list: <a href=\"http://lists.gnu.org/archive/html/guile-user/2017-12/msg00045.html\" rel=\"nofollow noreferrer\">http://lists.gnu.org/archive/html/guile-user/2017-12/msg00045.html</a></p>\n\n<p>citing: Alex Vong</p>\n\n<p>From the Guile manual ``6.1 Overview of the Guile API'',</p>\n\n<blockquote>\n  <p>For some Scheme functions, some last arguments are optional; the\n  corresponding C function must always be invoked with all optional\n  arguments specified.  To get the effect as if an argument has not been\n  specified, pass \u2018SCM_UNDEFINED\u2019 as its value.  You can not do this for\n  an argument in the middle; when one argument is \u2018SCM_UNDEFINED\u2019 all the\n  ones following it must be \u2018SCM_UNDEFINED\u2019 as well.</p>\n</blockquote>\n\n<p>Therefore, we can check if opt_arg2 has the value SCM_UNDEFINED, to\ndecide if we have received an optional argument. The code is in the\nattachment:</p>\n\n<pre><code>#include &lt;libguile.h&gt;\n\nstatic SCM myfun(SCM arg1,SCM opt_arg2)\n{\n  if (scm_is_eq (opt_arg2, SCM_UNDEFINED))\n    scm_display(scm_from_utf8_string(\"Optional argument NOT received!\\n\"),\n                scm_current_output_port());\n  else\n    scm_display(scm_from_utf8_string(\"Optional argument received!\\n\"),\n                scm_current_output_port());\n  return SCM_BOOL_T;\n}\n\nvoid\ninit_myfun(void)\n{\n  scm_c_define_gsubr(\"myfun\", 1, 1, 0, myfun);\n}\n</code></pre>\n"}], "owner": {"reputation": 31593, "user_id": 58082, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/61200477cf8983809ec152f484750204?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/58082/pierre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 47811866, "answer_count": 1, "score": 1, "last_activity_date": 1513260552, "creation_date": 1513181312, "question_id": 47797521, "link": "https://stackoverflow.com/questions/47797521/gnu-guile-function-registered-with-scm-c-define-gsubr-how-can-i-handle-an-opti", "title": "GNU guile: function registered with scm_c_define_gsubr: how can i handle an optional parameter?", "body": "<p>I've defined a guile  C function:</p>\n\n<pre><code>static SCM myfun(SCM arg1,SCM opt_arg2)\n  {\n  return SCM_BOOL_T;\n  }\n</code></pre>\n\n<p>registered with </p>\n\n<pre><code>scm_c_define_gsubr (\"myfun\", 1, 1, 0, myfun);\n</code></pre>\n\n<p>there is one <strong>optional</strong> argument. How can I detect if <code>opt_arg2</code> has been used ?</p>\n\n<p>in</p>\n\n<pre><code>(myfun 1)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>(myfun 1 2)\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1513180893, "post_id": 47797341, "comment_id": 82555463, "body": "Please don&#39;t post pictures of text. Post the text."}], "answers": [{"tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 1, "last_activity_date": 1513181001, "creation_date": 1513181001, "answer_id": 47797409, "question_id": 47797341, "link": "https://stackoverflow.com/questions/47797341/c-linked-list-head-pointer-is-changing-data-value/47797409#47797409", "title": "C Linked List Head Pointer is changing data value", "body": "<p>I think you want <code>temp-&gt;string = strdup(s)</code> in <code>createNode(...)</code> instead of <code>temp-&gt;string = s</code></p>\n"}, {"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1513181566, "post_id": 47797411, "comment_id": 82555934, "body": "This is just one problem, the other problem is addressed by Paul Ogilvie&#39;s answer."}, {"owner": {"reputation": 13, "user_id": 9094493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e4b2a2bcbda22b0e299bf5a15909499?s=128&d=identicon&r=PG&f=1", "display_name": "D7777777", "link": "https://stackoverflow.com/users/9094493/d7777777"}, "edited": false, "score": 0, "creation_date": 1513183762, "post_id": 47797411, "comment_id": 82557463, "body": "This turned out to the main issue I was trying to solve, thanks for the help it works now!"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1513185295, "post_id": 47797411, "comment_id": 82558441, "body": "note - when you free the nodes from your list you must free these two fields too otherwise you will leak. BTW, if on linux learn to use valgrind as a way of finding and tracking down leaks"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": true, "score": 1, "last_activity_date": 1513181008, "creation_date": 1513181008, "answer_id": 47797411, "question_id": 47797341, "link": "https://stackoverflow.com/questions/47797341/c-linked-list-head-pointer-is-changing-data-value/47797411#47797411", "title": "C Linked List Head Pointer is changing data value", "body": "<p>you are just shuffling pointer to stack data around, you need to copy the actual strings</p>\n\n<pre><code> command = strdup(arguments[0]);\n\n    string = strdup(arguments[1]);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1513181546, "post_id": 47797540, "comment_id": 82555916, "body": "This is just one problem, the other problem is addressed by pm&#39;s answer."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1513181600, "post_id": 47797540, "comment_id": 82555961, "body": "@MichaelWalz, indeed, lots of problems."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1513181735, "post_id": 47797540, "comment_id": 82556053, "body": "Maybe there are even more problems, I didn&#39;t check in detail."}, {"owner": {"reputation": 13, "user_id": 9094493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e4b2a2bcbda22b0e299bf5a15909499?s=128&d=identicon&r=PG&f=1", "display_name": "D7777777", "link": "https://stackoverflow.com/users/9094493/d7777777"}, "edited": false, "score": 0, "creation_date": 1513183821, "post_id": 47797540, "comment_id": 82557500, "body": "This was an error that I had not updated before copying over"}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1513181566, "last_edit_date": 1513181566, "creation_date": 1513181351, "answer_id": 47797540, "question_id": 47797341, "link": "https://stackoverflow.com/questions/47797341/c-linked-list-head-pointer-is-changing-data-value/47797540#47797540", "title": "C Linked List Head Pointer is changing data value", "body": "<p>Your call to <code>getline</code> is wrong.</p>\n\n<blockquote>\n  <p>If <code>*lineptr</code> is set to NULL and <code>*n</code> is set 0 before the call, then\n         getline() will allocate a buffer for storing the line.  This buffer\n         should be freed by the user program. ... Alternatively, before calling <code>getline()</code>, <code>*lineptr</code> can contain a\n         pointer to a malloc(3)-allocated buffer <code>*n</code> bytes in size</p>\n</blockquote>\n\n<p>Since <code>*n</code> is 1000 and <code>input</code> is uninitialized (points nowhere), <code>getline</code> assumes there is a buffer of 1000 chars available...which isn't.</p>\n\n<p>Your call should be:</p>\n\n<pre><code>char *read_input(void)\n{\n    char* input= 0;\n    size_t bufsize = 0;\n    getline(&amp;input, &amp;bufsize, stdin);\n\n    return input;\n}\n</code></pre>\n\n<p>See the comments and other solutions for the other problems of your program.</p>\n"}], "owner": {"reputation": 13, "user_id": 9094493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e4b2a2bcbda22b0e299bf5a15909499?s=128&d=identicon&r=PG&f=1", "display_name": "D7777777", "link": "https://stackoverflow.com/users/9094493/d7777777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "closed_date": 1513196416, "accepted_answer_id": 47797411, "answer_count": 3, "score": 1, "last_activity_date": 1513181695, "creation_date": 1513180763, "last_edit_date": 1513181695, "question_id": 47797341, "link": "https://stackoverflow.com/questions/47797341/c-linked-list-head-pointer-is-changing-data-value", "closed_reason": "Not suitable for this site", "title": "C Linked List Head Pointer is changing data value", "body": "<p>I am writing a custom shell for class. I have the shell working but now I need to keep track of which commands are called by the user in a linked list, and then be able to print out these commands in a similar fashion to the <code>history()</code> command. The program seems to build the linked list fine however upon printing out with <code>history(list)</code> I begin to see errors.  After several commands are entered the command and string data values for the nodes begin to change. I have checked to make sure that the addresses the pointers are pointing to stay the same, but somehow the data values are being effected.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\nstruct Node{\n  char* command;\n  char* string;\n  struct Node *next;\n};\n\nstruct List{\n  struct Node* front;\n  struct Node* rear;\n};\n\n\nvoid shell_loop(void);\nchar *read_input(void);\nchar **split_input(char *input);\n\nstruct Node* createNode(char* command, char* string);\nstruct List* createList();\nstruct List* add_to_end(struct List *Q, char* command, char* string);\nvoid history(struct List* Q);\n\n\n\nconst int TOKEN_BUFSIZE = 64;\nconst char* DELIMITER = \" \\t\\r\\n\\a\";\n//#define EXIT_FAILURE\n\n\nint main(int argc, char **argv)\n{\n\n    shell_loop();\n}\n\n\nvoid shell_loop(void)\n{\nchar *input;\nchar **arguments;\nchar* command;\nchar* string;\n\n\nstruct List* list = createList();\n\n   for(int i =0; i &lt; 20; i++) \n   {\n\n    printf(\"User&gt; \");\n\n    input = read_input();\n\n    arguments = split_input(input);\n\n    command = arguments[0];\n\n    string = arguments[1];\n\n    list = add_to_end(list, command, string);\n\n    printf(\"\\n\");\n    history(list); \n    printf(\"\\n\");\n\n    free(input);\n    free(arguments);\n    }\n}\n\nchar *read_input(void)\n{\n    char* input;\n    size_t bufsize = 1000;\n    getline(&amp;input, &amp;bufsize, stdin);\n\n    return input;\n}\n\nchar **split_input(char *input)\n{\n    int size_of_buffer = TOKEN_BUFSIZE, position = 0;\n    char **tokens = malloc(size_of_buffer * sizeof(char*));\n    char *token;\n\n    if(!tokens)\n    {\n        fprintf(stderr, \"shell: allocation error\\n\");\n        exit(1); // fix later\n    }\n\n    token = strtok(input, DELIMITER);\n    while (token != NULL)\n    {\n        tokens[position] = token;\n        position ++;\n\n    if(position &gt;= size_of_buffer)\n    {\n        size_of_buffer += TOKEN_BUFSIZE;\n        tokens = realloc(tokens, size_of_buffer * sizeof(char*));\n\n        if(!tokens)\n        {\n            fprintf(stderr, \"shell: allocation error \\n\");\n            exit(EXIT_FAILURE); // fix later\n        }\n    }\n\n    token = strtok(NULL, DELIMITER);\n}\n\n    tokens[position] = NULL;\n    return tokens;\n}\n\n\nstruct Node* createNode(char* c, char* s)\n{\nstruct Node* temp = (struct Node*)malloc(sizeof(struct Node));\ntemp-&gt;command = c;\ntemp-&gt;string = s;\ntemp-&gt;next = NULL;\nreturn temp;\n}\n\nstruct List* createList()\n{\nstruct List* Q = (struct List*)malloc(sizeof(struct List));\nQ-&gt;front = NULL;\nQ-&gt;rear = NULL;\nreturn Q;\n}\n\nstruct List* add_to_end(struct List *Q, char* c, char* s)\n{\n   struct Node* temp = createNode(c, s);\n\n   if(Q-&gt;front == NULL)\n   {\n    Q-&gt;front = temp;\n    Q-&gt;rear = temp;\n    temp = NULL;\n    return Q;\n    }\n\n   Q-&gt;rear-&gt;next = temp;\n   Q-&gt;rear = temp;\n   temp = NULL;\n   return Q;\n}\n\n\nvoid history(struct List* Q)\n{\nstruct Node* current;\nif (Q-&gt;front == NULL)\n{\n    printf(\"Command List is empty!\\n\");\n    return;\n}\n\ncurrent = Q-&gt;front;\n\nwhile(current !=NULL)\n{\n    printf(\"Command: %s\\nString: %s\\n\", current-&gt;command, current-&gt;string);\n    current = current-&gt;next;\n}\n\n}\n</code></pre>\n\n<p>I have attached an output file of the history command to highlight how the first entered command eventually changes:</p>\n\n<p><a href=\"https://i.stack.imgur.com/B742k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B742k.png\" alt=\"output\"></a></p>\n"}, {"tags": ["c", "perl", "sha1", "pam"], "comments": [{"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1513192021, "post_id": 47797148, "comment_id": 82561951, "body": "Always use <code>use strict; use warnings qw( all );</code>!!! You clearly have some incorrectly-scoped variables."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513196983, "post_id": 47797148, "comment_id": 82564445, "body": "When saving a password verifier just using a hash function is not sufficient and just adding a salt does little to improve the security. Instead iterate over an HMAC with a random salt for about a 100ms duration and save the salt with the hash. Better yet use a function such as <code>PBKDF2</code>, <code>Rfc2898DeriveBytes</code>, <code>Argon2</code>, <code>password_hash</code>, <code>Bcrypt</code> or similar functions. The point is to make the attacker spend substantial of time finding passwords by brute force."}], "answers": [{"comments": [{"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513198093, "post_id": 47800756, "comment_id": 82564984, "body": "1) Salting prevents pre-building a dictionary. 2) Salting prevents dictionary attacks against multiple users at once (which is the usually way of using a dictionary attack). 3) Salting prevents two people having the same password from having the same encoded password. 4) In the way the password is used, HMAC only helps if you can find a collision for <code>sha1($plaintext_password)</code>, i.e. it only helps if sha1 is already broken. HMAC <a href=\"https://en.wikipedia.org/wiki/Hash-based_message_authentication_code#Design_principles\" rel=\"nofollow noreferrer\">prevents</a> other attacks that aren&#39;t relevant here."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513198487, "post_id": 47800756, "comment_id": 82565158, "body": "There are better options that <code>sha1</code>, but HMAC has nothing to do with that."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513202668, "post_id": 47800756, "comment_id": 82566982, "body": "See <a href=\"http://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-63b.pdf\" rel=\"nofollow noreferrer\">NIST Digital Identity Guidelines</a> June 2017. Look at the section about PBKDF2. Excerpts: &quot;Examples of suitable key derivation functions include Password-based Key Derivation Function 2 (PBKDF2&quot;, &quot;The key derivation function SHALL use an approved one-way function such as Keyed Hash Message Authentication Code (<b>HMAC</b>)&quot;, &quot;PBKDF2, the cost factor is an iteration count .... SHOULD be as large as verification server performance will allow, typically at least 10,000 iterations.&quot;"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513203259, "post_id": 47800756, "comment_id": 82567194, "body": "@zaph, Re &quot;<i>Using SHA1 with a salt is not secure and should not be used for a password verifier.</i>&quot;, I&#39;ve already conceded that, and that&#39;s different then what you originally said."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513203288, "post_id": 47800756, "comment_id": 82567203, "body": "@zaph, Re &quot;<i>Current attacks do not rely on pre-building a dictionary (that is so 80&#39;s) but rather fast hash methods such as SHA1 and dictionaries of common passwords.</i>&quot;, Well, which one is it. It doesn&#39;t or it does?"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513203385, "post_id": 47800756, "comment_id": 82567247, "body": "@zaph, Re &quot;<i>HMAC is just hashing with a salt in a manor that does not allow length extension.</i>&quot;, Like I said, not relevant here."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513203434, "post_id": 47800756, "comment_id": 82567266, "body": "&quot;dictionaries of common passwords&quot;, not password hashes:   <a href=\"https://github.com/danielmiessler/SecLists/tree/master/Passwords\" rel=\"nofollow noreferrer\">SecLists</a>."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513203508, "post_id": 47800756, "comment_id": 82567290, "body": "You created a chat, but then you ignore it? Not only that, but to post some imbicilic straw men?"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513203728, "post_id": 47800756, "comment_id": 82567381, "body": "@zaph, You&#39;re apologizing for the wrong thing; apologizing for following the rules makes no sense, and you&#39;re still posting outside the chat."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513203925, "post_id": 47800756, "comment_id": 82567454, "body": "@zaph, wut? You don&#39;t want to follow the site&#39;s rules? You&#39;d rather keep spamming that sha1 shouldn&#39;t be used? How nice."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513204045, "post_id": 47800756, "comment_id": 82567493, "body": "I&#39;ve already conceded that three times. Constructive criticism would be better. But hey, you&#39;ve already wasted all of my time and then some. That&#39;s far better!"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513204121, "post_id": 47800756, "comment_id": 82567518, "body": "Constructive criticism welcome. So far, you&#39;ve only said &quot;Using SHA1 with a salt is not secure and should not be used for a password verifier.&quot;. Not useful."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513204453, "post_id": 47800756, "comment_id": 82567633, "body": "@zaph, I promise to look into that. Right now, just going to add that as a one liner. I have no time left."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1513204971, "post_id": 47800756, "comment_id": 82567844, "body": "Great, I will delete most of my comments."}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1513204537, "last_edit_date": 1513204537, "creation_date": 1513193211, "answer_id": 47800756, "question_id": 47797148, "link": "https://stackoverflow.com/questions/47797148/c-function-to-password-match-salted-sha1/47800756#47800756", "title": "C function to password match salted sha1", "body": "<p>First of all, your existing code suffers from a serious security bug. The salt shouldn't be constant. A different, random salt should be used for each password.</p>\n\n<pre><code>use Math::Random::Secure::RNG qw( );  # Or some other cryptographic-safe number generator\n\nuse feature qw( state );\n\nsub generate_salt {\n    state $rng = Math::Random::Secure::RNG-&gt;new();\n    my $uint32 = $rng-&gt;irand();\n    return pack('N', $uint32);\n}\n\nsub hash_password {\n    my ($password, $salt) = @_;\n    return sha1($password . $salt);\n}\n\nsub encode_password {\n    my ($plaintext_password) = @_;\n    my $salt = generate_salt();\n    my $hashed_password = hash_password($plaintext_password, $salt);\n    return join('-',\n       encode_base64($salt, ''),\n       encode_base64($hashed_password, ''),\n    );\n}\n\nsub is_correct_password {\n   my ($plaintext_password, $encoded_password) = @_;\n   my ($salt_base64, $hashed_password_base64) = split(/-/, $encoded_password);\n   my $salt = decode_base64($salt_base64);\n   my $hashed_password = decode_base64($hashed_password_base64);\n\n   return hash_password($plaintext_password, $salt) eq $hashed_password;\n}\n</code></pre>\n\n<p>To change password:</p>\n\n<pre><code>my $plaintext_password = '...from user...';\nmy $encoded_password = encode_password($plaintext_password);\n</code></pre>\n\n<p>To check password:</p>\n\n<pre><code>my $plaintext_password = '...from user...';\nmy $encoded_password = '...from storage...';\nif (!is_correct_password($plaintext_password, $encoded_password)) {\n   die(\"Authentication error\\n\");\n}\n</code></pre>\n\n<p>This is still wrong, though. <code>sha1</code> is far too weak. <code>PBKDF2</code> with at least 10,000 iterations should be used instead.</p>\n"}], "owner": {"reputation": 1047, "user_id": 1191999, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8a5575da1a4d6205f568754e55294cfb?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/1191999/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1513204537, "creation_date": 1513180155, "question_id": 47797148, "link": "https://stackoverflow.com/questions/47797148/c-function-to-password-match-salted-sha1", "title": "C function to password match salted sha1", "body": "<p>I am using a perl function to generate passwords in sha1 with a salt. </p>\n\n<pre><code>sub  set_new_password{\n    my ($newpass)=@_;\n    $salt='4Ly5W7xx';\n    $pass= encode_base64(sha1($newpass.$salt).$salt);\n    return $pass;\n}\n</code></pre>\n\n<p>Now I have to verify this password in a C program. \nThere are sha1 verifiers like <a href=\"https://pastebin.com/CPC1vYAK\" rel=\"nofollow noreferrer\">https://pastebin.com/CPC1vYAK</a> but how do I verify passwords with a salt </p>\n\n<p>Is there some sample I can copy from </p>\n"}, {"tags": ["c", "activation-record"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1513179293, "post_id": 47796800, "comment_id": 82554450, "body": "<i>activation record</i> itself is implementation defined."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1513179294, "post_id": 47796800, "comment_id": 82554451, "body": "The language standard doesn&#39;t specify <i>any</i> of this - these are all implementation details."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1513179431, "post_id": 47796800, "comment_id": 82554532, "body": "If no more use is made of <code>j</code> within the <code>if</code> block, the compiler is free to optimize it away entirely. Including the <code>if</code> block itself."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1513179449, "post_id": 47796800, "comment_id": 82554544, "body": "I don&#39;t even know what is a <code>activation record</code>, never hear of it in my C trip. Hopefully, C is design to hide such detail to the user."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 2, "creation_date": 1513179528, "post_id": 47796800, "comment_id": 82554588, "body": "@Stargateur Haven&#39;t heard of this term as well, but a quick search shown that it&#39;s just a synonym to a stack frame..."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1513179577, "post_id": 47796800, "comment_id": 82554634, "body": "<i>&quot;Do not try and access <code>j</code>.   Instead only try to realise the Truth... There is no <code>j</code>.&quot;</i>  Because when <code>j</code> goes out of scope, it ceases to exist."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1513179651, "post_id": 47796800, "comment_id": 82554688, "body": "<i>&quot;I could not find much information regarding this in the C11 spec.&quot;</i> And there&#39;s a reason for that... because it&#39;s not for C to dictate how it&#39;s implemented. If you want to know how your implementation works, just  look at the code it generated."}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1513180028, "post_id": 47796800, "comment_id": 82554946, "body": "@DavidC.Rankin Ah, of course that would invalidate this question altogether :)."}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1513180074, "post_id": 47796800, "comment_id": 82554976, "body": "@AndrewHenle True. Just wanted to know what is happening though..."}], "answers": [{"tags": [], "owner": {"reputation": 509, "user_id": 8857328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a43855efb44db02b57d0f7253394882?s=128&d=identicon&r=PG&f=1", "display_name": "VladP", "link": "https://stackoverflow.com/users/8857328/vladp"}, "is_accepted": true, "score": 0, "last_activity_date": 1513180749, "creation_date": 1513180749, "answer_id": 47797338, "question_id": 47796800, "link": "https://stackoverflow.com/questions/47796800/a-block-scoped-variable-and-the-activation-record/47797338#47797338", "title": "A block scoped variable and the activation record", "body": "<p>Activation record is also called stack frame, if I am not mistaken. I believe that these are the answers:</p>\n\n<p>Q1. Will the variable j be placed in the activation record?</p>\n\n<p>A1:Yes, unless optimized out by compiler.</p>\n\n<p>Q2. Is this implementation defined (in other words, will some compiler generate code equivalent to j being declared outside and above the if` block)?</p>\n\n<p>A2:It is implementation defined. Depends on the compiler and settings of the compiler, but in most cases, j will be in activation record.</p>\n\n<p>Q3. Or, will j be simply allocated on the stack segment during execution if need be? But, in that case how will j go out of scope after the if block?</p>\n\n<p>A3: No, allocation in C is typically not dependent on the content of the local variable.</p>\n"}], "owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "closed_date": 1513245591, "accepted_answer_id": 47797338, "answer_count": 1, "score": 5, "last_activity_date": 1513180749, "creation_date": 1513179127, "last_edit_date": 1513180176, "question_id": 47796800, "link": "https://stackoverflow.com/questions/47796800/a-block-scoped-variable-and-the-activation-record", "closed_reason": "Needs more focus", "title": "A block scoped variable and the activation record", "body": "<p>I understand that local variables (along with other stuff) are placed in the <a href=\"https://en.wikipedia.org/wiki/Call_stack\" rel=\"nofollow noreferrer\">activation record</a>. And the activation record must exist before the function begins executing. Consider the function below:</p>\n\n<pre><code>void f(void)\n{\n    int i;\n    scanf(\"%d\", &amp;i);\n    if (i &gt; 10) {\n        int j = 22;\n        // do some operations on j here.\n    }\n    // more code below...\n}\n</code></pre>\n\n<p>Looking at this function, it seems that the the variable <code>j</code> might or might not exist depending entirely on the user's input at runtime. In this case, </p>\n\n<ol>\n<li>Will the variable <code>j</code> be placed in the activation record?</li>\n<li>Is this implementation defined (in other words, will some compiler generate code equivalent to <code>j</code> being declared outside and above the if` block)?</li>\n<li>Or, will <code>j</code> be simply allocated on the stack segment during execution  if need be? But, in that case how will <code>j</code> go out of scope after the <code>if</code> block?</li>\n</ol>\n\n<p>I could not find much information regarding this in the C11 spec. Thanks in advance.</p>\n"}, {"tags": ["c", "ruby", "linux", "gcc", "ffi"], "comments": [{"owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "edited": false, "score": 0, "creation_date": 1513193152, "post_id": 47796477, "comment_id": 82562511, "body": "I think I&#39;ve found the issue: the problem is in the <code>g++</code> line, not the <code>gcc</code> one. I&#39;ve update the answer."}], "answers": [{"comments": [{"owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 0, "creation_date": 1513179324, "post_id": 47796729, "comment_id": 82554473, "body": "That didn&#39;t help. Tried both: &quot;gcc -Wall -O2 -fPIC -ltiff -I/usr/lib/x86_64-linux-gnu -I/usr/include/x86_64-linux-gnu -c /&lt;path_to_source&gt;/main.c -o obj/Release/main.o&quot; and &quot;gcc -Wall -O2 -fPIC -L /usr/lib/x86_64-linux-gnu/libtiff.so -I/usr/lib/x86_64-linux-gnu -I/usr/include/x86_64-linux-gnu -c /&lt;path_to_source&gt;/main.c -o obj/Release/main.o&quot; Compiles fine but same error."}, {"owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 0, "creation_date": 1513180551, "post_id": 47796729, "comment_id": 82555263, "body": "Sorry, but that didn&#39;t work either. I tried it both ways, with and without the libtiff.so on the end of the directory: &quot;gcc -Wall -O2 -fPIC -ltiff -L /usr/lib/x86_64-linux-gnu/ -I/usr/lib/x86_64-linux-gnu -I/usr/include/x86_64-linux-gnu -c /&lt;path_to_source/main.c -o obj/Release/main.o&quot; and &quot;gcc -Wall -O2 -fPIC -ltiff -L /usr/lib/x86_64-linux-gnu/libtiff.so -I/usr/lib/x86_64-linux-gnu -I/usr/include/x86_64-linux-gnu -c /&lt;path_to_source&gt;/main.c -o obj/Release/main.o&quot;"}, {"owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 0, "creation_date": 1513180711, "post_id": 47796729, "comment_id": 82555345, "body": "from the same command line I&#39;m running the ruby script: echo $LIBRARY_PATH /usr/lib/x86_64-linux-gnu/... so yes it&#39;s in the path, but whether it is or isn&#39;t doesn&#39;t seem to make a difference."}, {"owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "reply_to_user": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 0, "creation_date": 1513181010, "post_id": 47796729, "comment_id": 82555562, "body": "@Andrew sorry, I actually meant <code>LD_LIBRARY_PATH</code>"}, {"owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "reply_to_user": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 0, "creation_date": 1513181416, "post_id": 47796729, "comment_id": 82555825, "body": "@Andrew you can check the library dependencies of <code>libtiffconverter.so</code> with <code>ldd libtiffconverter.so</code> and look whether they actually refer to an existing library."}, {"owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 0, "creation_date": 1513184973, "post_id": 47796729, "comment_id": 82558245, "body": "&quot;export  LD_LIBRARY_PATH=/usr/lib/x86_64-linux-gnu/&quot; didn&#39;t help. I&#39;ve updated the question above with the output of ldd."}, {"owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 1, "creation_date": 1513204341, "post_id": 47796729, "comment_id": 82567589, "body": "Your last update worked. -ltiff on the g++ line did the trick. I didn&#39;t need the -L option. Thank you so much!"}], "tags": [], "owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "is_accepted": true, "score": 1, "last_activity_date": 1513193411, "last_edit_date": 1513193411, "creation_date": 1513178893, "answer_id": 47796729, "question_id": 47796477, "link": "https://stackoverflow.com/questions/47796477/ruby-ffi-and-a-custom-c-library/47796729#47796729", "title": "Ruby, ffi, and a custom C library", "body": "<h3>The Problem</h3>\n\n<blockquote>\n  <p><code>/usr/bin/ruby: symbol lookup error: /&lt;path_to_lib&gt;/libtiffconverter.so: undefined symbol: TIFFOpen</code></p>\n</blockquote>\n\n<p>The function <code>TIFFOpen()</code> used by your <code>ConvertTIFF()</code> is not found. This function belongs to the <em>LibTIFF</em> library. You need to link your project against this library.</p>\n\n<h3>The Solution: Linking against LibTIFF</h3>\n\n<p>Add the option <code>-ltiff</code> to your <code>g++</code> line above, i.e.:</p>\n\n<pre><code>g++ -shared  obj/Release/main.o  -o bin/Release/libtiffconverter.so -s -ltiff\n</code></pre>\n\n<p>You can check whether your just generated <code>libtiffconverter.so</code> actually depends on the LibTIFF library (it should) this way:</p>\n\n<pre><code>ldd libtiffconverter.so | grep  libtiff\n</code></pre>\n\n<p>The following is an example output of the command above:</p>\n\n<pre><code>libtiff.so.5 =&gt; /usr/lib/x86_64-linux-gnu/libtiff.so.5 (0x00007fda361a8000)\n</code></pre>\n\n<hr>\n\n<p>You <em>may</em> also need to add the <code>-L</code> option to the <code>g++</code> line above followed by the directory where your <code>libtiff.so</code> is located. In order to obtain its location you can do the following:</p>\n\n<pre><code>find / -name 'libtiff*'\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 47796729, "answer_count": 1, "score": 1, "last_activity_date": 1513260146, "creation_date": 1513178197, "last_edit_date": 1513260146, "question_id": 47796477, "link": "https://stackoverflow.com/questions/47796477/ruby-ffi-and-a-custom-c-library", "title": "Ruby, ffi, and a custom C library", "body": "<p>I'm trying to create a custom C library I can call from Ruby using FFI. My library will wrap certain libtiff functions with my own code, and the resulting higher-level functions will be called from within Ruby via the FFI interface.</p>\n\n<p>I've got test code working in C, that compiles successfully to a .so file. I've got that same code plumbed into Ruby via FFI, and can successfully call simple functions from ruby code.</p>\n\n<p>However, when I include libtiff in my C library code and define a function that uses some of the libtiff routines, the ruby code throws errors similar to the following at runtime.</p>\n\n<pre><code>/usr/bin/ruby: symbol lookup error: /&lt;path_to_lib&gt;/libtiffconverter.so: undefined symbol: TIFFOpen\n</code></pre>\n\n<p>My guess is this has something to do with the way the compiler/linker is doing things. I'm very rusty with C... haven't touched it in 15+ years, and I'm not sure exactly what to do to resolve the problem. I'm using, the Code::Blocks IDE, and have my code in a dynamic library project. As long as I don't include libtiff, everything works as expected. Once I do... though the code compiles, I get symbol lookup errors for anything in libtiff.so.</p>\n\n<p>Here's my test library module code that generates the above error:</p>\n\n<pre><code>#include \"tiffio.h\"\n\nint AddInt(int i1, int i2)\n{\n    return i1 + i2;\n}\n\nvoid ConvertTIFF()\n{\n    TIFF* tif = TIFFOpen(\"test0.tiff\", \"r\");\n    if (tif) {\n        uint32 imagelength;\n        tdata_t buf;\n        uint32 row;\n\n        TIFFGetField(tif, TIFFTAG_IMAGELENGTH, &amp;imagelength);\n        buf = _TIFFmalloc(TIFFScanlineSize(tif));\n        for (row = 0; row &lt; imagelength; row++)\n            TIFFReadScanline(tif, buf, row, 0);\n        _TIFFfree(buf);\n        TIFFClose(tif);\n    }\n}\n</code></pre>\n\n<p>Here are the compiler commands</p>\n\n<pre><code>gcc -Wall -O2 -fPIC -I/usr/lib/x86_64-linux-gnu -I/usr/include/x86_64-linux-gnu -c /&lt;path_to_source&gt;/main.c -o obj/Release/main.o\ng++ -shared  obj/Release/main.o  -o bin/Release/libtiffconverter.so -s\n</code></pre>\n\n<p><code>AddInt()</code> called from ruby via FFI, works just fine. <code>ConvertTIFF()</code> does not. Any help is much appreciated.  </p>\n\n<p><strong>UPDATE 1:</strong></p>\n\n<p>Here's the ldd output of my custom library:</p>\n\n<pre><code>bridge:~/tmp/tmp$ ldd libtiffconverter.so\n    linux-vdso.so.1 =&gt;  (0x00007ffd20db8000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f4c9a84e000)\n    /lib64/ld-linux-x86-64.so.2 (0x000055a601577000)\n</code></pre>\n\n<p><strong>UPDATE 2:</strong></p>\n\n<p>Here's the ldd output now that things are working:</p>\n\n<pre><code>bridge:~/tmp/tmp$ ldd libtiffconverter.so \n    linux-vdso.so.1 =&gt;  (0x00007ffff4db7000)\n    libtiff.so.5 =&gt; /usr/lib/x86_64-linux-gnu/libtiff.so.5 (0x00007fabcbea4000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007fabcbacb000)\n    liblzma.so.5 =&gt; /lib/x86_64-linux-gnu/liblzma.so.5 (0x00007fabcb8a8000)\n    libjbig.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libjbig.so.0 (0x00007fabcb69a000)\n    libjpeg.so.8 =&gt; /usr/lib/x86_64-linux-gnu/libjpeg.so.8 (0x00007fabcb441000)\n    libz.so.1 =&gt; /lib/x86_64-linux-gnu/libz.so.1 (0x00007fabcb226000)\n    libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007fabcaf1d000)\n    /lib64/ld-linux-x86-64.so.2 (0x000056320a73f000)\n    libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fabcad19000)\n</code></pre>\n"}, {"tags": ["c", "arrays", "mergesort"], "comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1513177844, "post_id": 47795702, "comment_id": 82553468, "body": "Please post output as text. Only use images when necessary."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1513177868, "post_id": 47795702, "comment_id": 82553489, "body": "Welcome to stack overflow. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in this state we can&#39;t reproduce your problem. Please to not use image unless you can&#39;t do otherwise, here you can easily copy and paste your output instead of use an image of the output."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1513191300, "post_id": 47795702, "comment_id": 82561596, "body": "You are comparing pointers to elements of two arrays. Pointers can only be compared if they point to elements in the same array (or to the element that would be just past the end of the array). Also, you should be comparing <code>Bike</code>s not <code>Bike*</code>s."}], "owner": {"reputation": 17, "user_id": 9093743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/187ef5a0c2d529c005eab0b690c87633?s=128&d=identicon&r=PG&f=1", "display_name": "Nicooost", "link": "https://stackoverflow.com/users/9093743/nicooost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513180103, "creation_date": 1513176120, "last_edit_date": 1513177725, "question_id": 47795702, "link": "https://stackoverflow.com/questions/47795702/mergesort-algorithm-of-2-predefined-sorted-arrays-make-1-sorted-array-in-c", "title": "MergeSort algorithm of 2 predefined sorted arrays. Make 1 sorted array. In C", "body": "<p>I have a program in which 2 assorted arrays are filled with bicycles. Now I want to make 1 sorted array out of these 2 preset arrays. I could directly think of the Mergesort method, but I still know how to apply it if you enter something on the terminal itself. However, I do not know how to do it with 2 previously created arrays .. Maybe someone has an idea?</p>\n\n<p>The function should read this:</p>\n\n<pre><code>void merge_arrays(Bike* bikes1, int n1, Bike* bikes2, int n2, Bike* bout) { \n//merge funktion\n}\n</code></pre>\n\n<p>Bike* bikes1 is the first assorted array of bikes and bikes * bikes2 the second. In Bike * bout the sorted array should be output.</p>\n\n<p>In addition to information:</p>\n\n<p>In bike the following data are stored\nCoolness, Wheelsize, Gear, Price.</p>\n\n<p>Sorting is according to the first value, so coolness.</p>\n\n<p>THIS IS MY ACTUAL FUNCTION</p>\n\n<pre><code>void merge_arrays(Bike* bikes1, int n1, Bike* bikes2, int n2, Bike* bout) {\n    //void merge(int a[], int m, int b[], int n, int sorted[]) {\n int i, j, k;\n\n  j = k = 0;\n\n  for (i = 0; i &lt; n1 + n2;) {\n    if (j &lt; n1 &amp;&amp; k &lt; n2) {\n      if (bikes1 + j &lt; bikes2 + k ) {\n        bout [i] = bikes1 [j];\n        j++;\n      }\n      else {\n        bout [i] = bikes2 [k];\n        k++;\n      }\n      i++;\n    }\n    else if (j == n1) {\n      for (; i &lt; n1 + n2;) {\n        bout [i] = bikes2 [k];\n        k++;\n        i++;\n      }\n    }\n    else {\n      for (; i &lt; n1 + n2;) {\n        bout [i] = bikes1 [j];\n        j++;\n        i++;\n      }\n    }\n\n  }\n\n\n}\n</code></pre>\n\n<p>it returns the arrays but not sorted.. </p>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PeXUJ.png\" rel=\"nofollow noreferrer\">Output</a></p>\n"}, {"tags": ["c", "windows", "cmd", "static-libraries", "crypt"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7167146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b0d410e604a37c5aa177a1013d06456?s=128&d=identicon&r=PG&f=1", "display_name": "LukeO ", "link": "https://stackoverflow.com/users/7167146/lukeo"}, "edited": false, "score": 0, "creation_date": 1513179802, "post_id": 47796456, "comment_id": 82554782, "body": "Thanks for your reply. I started to add the link the other files that it requested, including the features.h file in the include folder. However now it comes up with an error that there is no such directory for the file &#39;libio/stdio.h&#39; however I cannot find such a file. I have included the paths for the individual &#39;stdio.h&#39; and &#39;libio.h&#39; files using /I but the problem still persists."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 23, "user_id": 7167146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b0d410e604a37c5aa177a1013d06456?s=128&d=identicon&r=PG&f=1", "display_name": "LukeO ", "link": "https://stackoverflow.com/users/7167146/lukeo"}, "edited": false, "score": 0, "creation_date": 1513180185, "post_id": 47796456, "comment_id": 82555050, "body": "check the documentation for you compiler / you may need to specify in environment variables where your standard include files (and libraries) are located."}], "tags": [], "owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "is_accepted": false, "score": 1, "last_activity_date": 1513178118, "creation_date": 1513178118, "answer_id": 47796456, "question_id": 47795455, "link": "https://stackoverflow.com/questions/47795455/adding-the-crypt-library-to-a-c-program-in-windows-10-cmd-prompt/47796456#47796456", "title": "Adding the crypt() library to a C program in Windows 10 cmd prompt", "body": "<p><code>cl DAnew.c /I C:\\test\\crypt;c:\\test\\include</code></p>\n\n<p>Your compiler knows where to find it's standard includes but does not know where your custom includes are located.  It must be informed about all of them.</p>\n\n<p>By the way, this is not <code>linking the crypt library</code>.  This is <code>setting the search path for custom include files</code>  You will have much the same effort when you attempt to <code>link with the crypt library</code>.  The above information should be enough to get you started on that path.</p>\n"}], "owner": {"reputation": 23, "user_id": 7167146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b0d410e604a37c5aa177a1013d06456?s=128&d=identicon&r=PG&f=1", "display_name": "LukeO ", "link": "https://stackoverflow.com/users/7167146/lukeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1513178118, "creation_date": 1513175432, "question_id": 47795455, "link": "https://stackoverflow.com/questions/47795455/adding-the-crypt-library-to-a-c-program-in-windows-10-cmd-prompt", "title": "Adding the crypt() library to a C program in Windows 10 cmd prompt", "body": "<p>I have written a C program 'hashed.c' which requires the use of the crypt() function to carry out the hashing of various words.</p>\n\n<p>I have downloaded the GNU C library from an online source (<a href=\"http://ftp.gnu.org/gnu/glibc/\" rel=\"nofollow noreferrer\">http://ftp.gnu.org/gnu/glibc/</a>) which contains the crypt library I need along with a number of other libraries. I have extracted all of the contents of the GNU C library to the same directory that my 'hashed.c' program is located in.</p>\n\n<p>This directory is located in <strong>C:\\test\\</strong>.</p>\n\n<p>In my program code I have included the header file</p>\n\n<blockquote>\n  <p><code>#include &lt;crypt.h&gt;</code>:</p>\n</blockquote>\n\n<p>However when I attempt to compile the program using </p>\n\n<blockquote>\n  <p>cl DAnew.c</p>\n</blockquote>\n\n<p>I receive an error message saying:</p>\n\n<blockquote>\n  <p>Cannot open include file 'crypt.h'. No such file or directory</p>\n</blockquote>\n\n<p>The crypt.h file is located in C:\\test\\crypt\\ and so I have changed the command line to:</p>\n\n<blockquote>\n  <p>cl DAnew.c /I C:\\test\\crypt</p>\n</blockquote>\n\n<p>to directly link the crypt.h file. However I now receive the error:</p>\n\n<blockquote>\n  <p>Cannot open include file '<strong>features.h</strong>'. No such file or directory.</p>\n</blockquote>\n\n<p>The 'features.h' file it is referencing is located within the same directory at:</p>\n\n<blockquote>\n  <p>C:\\test\\include\\features.h</p>\n</blockquote>\n\n<p>Would anyone be able to show me how to correctly link the crypt library (as well as the others libraries needed) to my C program please?</p>\n\n<p>I have downloaded the Visual C++ build tools and I am using the 'Visual C++ 2015 X86 Native Build Tools Command Prompt'.</p>\n\n<p>Many thanks for your help.</p>\n"}, {"tags": ["c", "pointers", "memory-corruption"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1513173109, "post_id": 47794591, "comment_id": 82550187, "body": "Where does <code>scope</code> point? Where does <code>scope-&gt;vars</code> point? Can you please create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> to show us."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1513173224, "post_id": 47794591, "comment_id": 82550257, "body": "GCC on linux has flags for detecting out of bounds access. Try those."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1513173227, "post_id": 47794591, "comment_id": 82550259, "body": "By the way, the output you show doesn&#39;t match the code. If the first output comes from line 549, then there&#39;s a comment on line 550, followed by the <code>malloc</code> call on line 551 (which the second line in the output claims it comes from). <i>Then</i> the second <code>printf</code> happens on line 552. We really need a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1513173264, "post_id": 47794591, "comment_id": 82550289, "body": "Oh and you should probably be using e.g. <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">Valgrind</a> to help you find memory problems."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1513173822, "post_id": 47794591, "comment_id": 82550654, "body": "Do you get <b>any</b> reports from Valgrind? Also try gcc sanitizers, esp. address and UB."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 5, "creation_date": 1513177257, "post_id": 47794591, "comment_id": 82553046, "body": "It&#39;s almost certainly not that &quot;<i>a pointer is overwritten while <code>malloc()</code> is run</i>&quot; but that either (<b>a</b>) a block of memory you are still trying to use (e.g. <code>scope-&gt;vars-&gt;tail</code>) has already been freed (or not properly allocated), or (<b>b</b>) something has written past the end of an allocated block and corrupted the internal structures used by <code>malloc()</code> etc."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1513178448, "post_id": 47794591, "comment_id": 82553897, "body": "This can only mean that any of the three elements of <code>scope-&gt;vars-&gt;tail</code> is invalid."}, {"owner": {"reputation": 603, "user_id": 5426649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e8dc32d97b1f0deb88bba090f58e46?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/5426649/olivier"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1513228594, "post_id": 47794591, "comment_id": 82573934, "body": "Thanks for the input. I will go on researching.  @Some programmer dude The gdb session was run without the comments and the printf&#39;s. Sorry for the confusion. While debugging, I will probably need to make a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>. Will post it if I succeed into making one."}, {"owner": {"reputation": 603, "user_id": 5426649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e8dc32d97b1f0deb88bba090f58e46?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/5426649/olivier"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513228608, "post_id": 47794591, "comment_id": 82573941, "body": "@n.m. valgrind reports some unfreed memory. I will look more into it and try the gcc sanitizers."}, {"owner": {"reputation": 603, "user_id": 5426649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e8dc32d97b1f0deb88bba090f58e46?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/5426649/olivier"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1513228624, "post_id": 47794591, "comment_id": 82573949, "body": "@TripeHound Thanks! These are possibilities I did not think about."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 1, "creation_date": 1513240167, "post_id": 47794591, "comment_id": 82578884, "body": "The problem with memory errors is they are almost <i>never</i> detected at the point of error; it&#39;s often much later when you&#39;re doing a completely unrelated <code>malloc()</code> or <code>free()</code> that the run-time notices things are not as they should be. A common source of confusion with memory problems is that adding <code>printf()</code>s to try and trace things keeps moving the point-of-crash \u2013 because <code>printf()</code> very often involves a memory allocation, so adding them changes when the problem is first noticed!"}, {"owner": {"reputation": 603, "user_id": 5426649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e8dc32d97b1f0deb88bba090f58e46?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/5426649/olivier"}, "edited": false, "score": 0, "creation_date": 1513241619, "post_id": 47794591, "comment_id": 82579685, "body": "Thanks. I will use valgrind to get rid of all my memory errors. Then I will see if the bug still happens!"}], "answers": [{"tags": [], "owner": {"reputation": 603, "user_id": 5426649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e8dc32d97b1f0deb88bba090f58e46?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/5426649/olivier"}, "is_accepted": true, "score": 1, "last_activity_date": 1513244241, "creation_date": 1513244241, "answer_id": 47810088, "question_id": 47794591, "link": "https://stackoverflow.com/questions/47794591/memory-corruption-after-running-malloc/47810088#47810088", "title": "Memory corruption after running malloc", "body": "<p>Thanks to everyone's comment, I found the issue.</p>\n\n<p><code>scope-&gt;vars</code> was not appropriately allocated (as some said).\nWhen using <code>valgrind</code>, I found the following message:</p>\n\n<pre><code>==23054== Invalid write of size 8\n==23054==    at 0x10A380: varlist_prepend (interpreter.c:277)\n==23054==    by 0x109548: main (yl.c:39)\n==23054==  Address 0x5572a98 is 0 bytes after a block of size 8 alloc'd\n==23054==    at 0x4C2FB0F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==23054==    by 0x10A304: varlist_prepend (interpreter.c:274)\n==23054==    by 0x109548: main (yl.c:39)\n==23054==\n</code></pre>\n\n<p>My code looked like this:</p>\n\n<pre><code>struct YL_VarList* vars = malloc(sizeof(vars));\n</code></pre>\n\n<p>As you can see, the <code>*</code> was missing.\nThis is the corrected version:</p>\n\n<pre><code>struct YL_VarList* vars = malloc(sizeof(*vars));\n</code></pre>\n\n<p><code>sizeof(vars)</code> would return the size of <code>struct YL_VarList*</code>, while I want to allocate the size of <code>struct YL_VarList</code>.</p>\n"}], "owner": {"reputation": 603, "user_id": 5426649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e8dc32d97b1f0deb88bba090f58e46?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/5426649/olivier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1487, "favorite_count": 0, "accepted_answer_id": 47810088, "answer_count": 1, "score": -1, "last_activity_date": 1513244241, "creation_date": 1513172902, "last_edit_date": 1513229482, "question_id": 47794591, "link": "https://stackoverflow.com/questions/47794591/memory-corruption-after-running-malloc", "title": "Memory corruption after running malloc", "body": "<p>I am writing a pet project (a sort of single-threaded Lisp-like language interpreter in C), and I came upon the following issue: a pointer is overwritten while <code>malloc()</code> is run. Showing all the code would be too long, but I can share it if necessary. I would like to have some insight regarding how the problem can be debugged.</p>\n\n<p>The bug happens during the subroutine that runs a user-defined function:</p>\n\n<pre><code>/* Determine the amount of arguments to the called function */\nint argc = ast_len(fn_args)\nprintf(\"%s:%d %p\\n\", __FILE__, __LINE__, (void*) scope-&gt;vars-&gt;tail);\n/* Allocate the memory to store the array of pointers to each of the arguments */\nstruct YL_Var** argv = malloc(sizeof(struct YL_Var*)*argc);\nprintf(\"%s:%d %p\\n\", __FILE__, __LINE__, (void*) scope-&gt;vars-&gt;tail);\n</code></pre>\n\n<p>You will get the following output:</p>\n\n<pre><code>interpreter.c:549 0x5558371c9480\ninterpreter.c:551 0x411\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>The pointer <code>scope-&gt;vars-&gt;tail</code> is overwritten during the call to <code>malloc()</code>!</p>\n\n<p>Using gdb and hardware break points clearly showed that the value was overwritten inside malloc.c.</p>\n\n<p><a href=\"https://i.stack.imgur.com/PusXT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PusXT.png\" alt=\"Assembly in GDB\"></a>\n<a href=\"https://i.stack.imgur.com/iMp4r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iMp4r.png\" alt=\"HW breakpoint in GDB\"></a></p>\n\n<p>As the pointer is overwritten, the program segfaults soon after, both within gdb and in normal run. However it does not segfault when run inside valgrind, it even ends successfully.\nSo here is my question. How would you start to debug this mess? I am asking for advice, and not for an answer.\nI am far from being a C expert :)</p>\n\n<p>I guess I am at fault and this is of course no bug in glibc-2.26 or gcc 7.2.0.</p>\n\n<ul>\n<li>I have no warnings on gcc with <code>-Wall -Wextra -Wpedantic</code></li>\n<li>valgrind shows some unfreed memory issue. Will fix them before doing anything else.</li>\n</ul>\n"}, {"tags": ["c", "malloc"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1513171645, "post_id": 47794084, "comment_id": 82549255, "body": "I assume this is some old code you found somewhere? It is <b><i>very</i></b> old, and uses the K&amp;R, pre-ANSI, variant for defining function arguments. As for the error, the <a href=\"http://en.cppreference.com/w/c/memory/malloc\" rel=\"nofollow noreferrer\"><code>malloc</code></a> function is declared in the <code>&lt;stdlib.h&gt;</code> header file. Code using <code>malloc</code> should include that header file and not declare it itself. Which is done (still in pre-ANSI way) in the <code>emalloc</code> function."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1513171763, "post_id": 47794084, "comment_id": 82549329, "body": "My advice for you: Throw this code away. Whatever it do I&#39;m certain there have been better alternatives developed the last 30 or so years."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1513172418, "post_id": 47794084, "comment_id": 82549753, "body": "Note that testing for succesful allocation is very poorly done here. It simply prints <code>out of memory</code> to console, but then continues like everything went fine, resulting in undefined behaviour."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 6649485, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10154029558157928/picture?type=large", "display_name": "Andreas Tosstorff", "link": "https://stackoverflow.com/users/6649485/andreas-tosstorff"}, "edited": false, "score": 0, "creation_date": 1513172253, "post_id": 47794177, "comment_id": 82549663, "body": "Thanks for your comments! Removing the char * emallo part gives me the following: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]    fprot = (int *) emalloc ((unsigned) ns * sizeof (int));"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 173, "user_id": 6649485, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10154029558157928/picture?type=large", "display_name": "Andreas Tosstorff", "link": "https://stackoverflow.com/users/6649485/andreas-tosstorff"}, "edited": false, "score": 0, "creation_date": 1513172613, "post_id": 47794177, "comment_id": 82549868, "body": "@AndreasTosstorff If you removed line <code>char * emallo</code>, you did it wrong. This answer refers to line <code>char *p, malloc();</code>."}, {"owner": {"reputation": 173, "user_id": 6649485, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10154029558157928/picture?type=large", "display_name": "Andreas Tosstorff", "link": "https://stackoverflow.com/users/6649485/andreas-tosstorff"}, "edited": false, "score": 0, "creation_date": 1513172851, "post_id": 47794177, "comment_id": 82550008, "body": "I removed this: <code>char * emalloc (n) unsigned n; {     char *p, malloc();      p = malloc(n);     if (p == NULL) \tprintf (&quot;out of memory\\n&quot;);     return p; } </code> and replaced emalloc with malloc in the fprot =... line . Does this make sense?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 173, "user_id": 6649485, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10154029558157928/picture?type=large", "display_name": "Andreas Tosstorff", "link": "https://stackoverflow.com/users/6649485/andreas-tosstorff"}, "edited": false, "score": 0, "creation_date": 1513172960, "post_id": 47794177, "comment_id": 82550077, "body": "@AndreasTosstorff I&#39;m talking about a single line, the line where it says <code>, malloc();</code> inside the function. If you remove the entire <code>emalloc()</code> function the code won&#39;t build. Also, try to build with ancient language spec in mind, if your compiler supports that."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1513172570, "last_edit_date": 1513172570, "creation_date": 1513171635, "answer_id": 47794177, "question_id": 47794084, "link": "https://stackoverflow.com/questions/47794084/error-conflicting-types-for-malloc/47794177#47794177", "title": "error: conflicting types for \u2018malloc\u2019", "body": "<p>That makes no sense.</p>\n\n<p>The code looks almost garbled, it should just be</p>\n\n<pre><code>void * const p = malloc(n);\n</code></pre>\n\n<p>no point in brokenly re-declaring <code>malloc()</code>. Note that <code>&lt;stdlib.h&gt;</code> is being included, so a proper prototype is already present.</p>\n\n<p>Also its return type in modern C should be the same as <code>malloc()</code>'s, i.e. <code>void *</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1513173804, "post_id": 47794623, "comment_id": 82550644, "body": "You can (at least you could in the past...) do it, and it&#39;s not weird.  It&#39;s merely old-style K&amp;R C code from the time before even ANSI C.  Unless you <i>really</i> understand what you&#39;re doing, do not go blindly changing K&amp;R-style C functions into current standard C.  You <i>will</i> break things badly."}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1513173931, "post_id": 47794623, "comment_id": 82550722, "body": "@AndrewHenle: True, I just checked that. But to be honest, I have never seen such a usage till date in a live project. Although, I do agree that I am too young to comment on that, 5 years in C development is dirt cheap experience."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1513174133, "post_id": 47794623, "comment_id": 82550881, "body": "<i>5 years in C development is dirt cheap experience.</i> No, 5 years is more than enough to learn where to look when you find things you don&#39;t understand, which is really the important part of experience with any programming language."}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1513174732, "post_id": 47794623, "comment_id": 82551259, "body": "@AndrewHenle: Again, I have to agree :-) Its just that I had never seen such a code and haven&#39;t tried a many codes from K&amp;R C book."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1513175046, "post_id": 47794623, "comment_id": 82551451, "body": "It&#39;s certainly ancient.  And it looks broken, too.  <code>char *p, malloc();</code> is really suspect as it seems to declare that <code>malloc()</code> returns <code>char</code>, which should break things.  I&#39;m guessing the compiler used on that code wasn&#39;t very thorough and didn&#39;t actually truncate the return from <code>malloc()</code> down to a <code>char</code>.  It seems that compiler just used whatever happened to be in the return value register without the proper type conversion the <code>char malloc()</code> prototype specifies."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1513175813, "post_id": 47794623, "comment_id": 82551985, "body": "Your rant regarding the <code>const</code> pointer is wrong and misleading. Please note the difference between <code>const void *</code> (pointer to const) and  <code>void * const</code> (constant pointer)."}], "tags": [], "owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "is_accepted": false, "score": 1, "last_activity_date": 1514783437, "last_edit_date": 1514783437, "creation_date": 1513173003, "answer_id": 47794623, "question_id": 47794084, "link": "https://stackoverflow.com/questions/47794084/error-conflicting-types-for-malloc/47794623#47794623", "title": "error: conflicting types for \u2018malloc\u2019", "body": "<p>This is absurd.</p>\n\n<pre><code>char *p, malloc();\n</code></pre>\n\n<p>You can not do this.</p>\n\n<p>Also,</p>\n\n<pre><code>char * emalloc (n)\nunsigned n;\n{\n\n    //some code\n</code></pre>\n\n<p>is valid, oldschool, and might appear weird to most of the younger bunch of programmers around.</p>\n\n<p><a href=\"https://linux.die.net/man/3/malloc\" rel=\"nofollow noreferrer\"><code>malloc</code></a> allocates requested bytes of memory (if available), and return a void pointer pointing to the address where it is allocated. </p>\n\n<p>This is the way it should be:</p>\n\n<pre><code>void* emalloc(unsigned int n)\n{\n    void *p = NULL;\n    p = malloc(n);\n\n    if(p == NULL)\n    {\n        printf(\"No memory\");\n        //Will return NULL anyway!!!    \n    }\n\n    return p;\n}\n</code></pre>\n\n<p>Additionally, before all these pointers are accessed, you'd have to check if there surely not NULL.</p>\n\n<pre><code>fprot = (int *) emalloc ((unsigned) ns * sizeof (int));\nrmap = (int *) emalloc ((unsigned) ns * sizeof (int));\nfmap = (int *) emalloc ((unsigned) ns * sizeof (int));\npKintr = (float *) emalloc ((unsigned) ns * sizeof (float));\nidar = (int *) emalloc ((unsigned) ns * sizeof (int));\ngr = (float *) emalloc ((unsigned) ns*ns * sizeof (float));\ncsr = (float *) emalloc ((unsigned) ns * sizeof (float));\n</code></pre>\n\n<p>Like,</p>\n\n<pre><code>fprot = (int *) emalloc ((unsigned) ns * sizeof (int));\nif(fproat == NULL)\n{\n    //Handle the error here!\n}\n</code></pre>\n\n<p>Plus,</p>\n\n<p>I see all the <code>free()</code> calls there, which should only be applied if <code>malloc()</code> didn't return NULL.</p>\n\n<p>But, now, do you see redundant code here? Why do you need an additional function call <code>emalloc()</code> if you are doing the lame thing as calling a <code>malloc()</code> and returning the pointer, you could do it here itself.</p>\n\n<pre><code>fprot = malloc ((unsigned) ns * sizeof (int)); //Don't cast the malloc!\nif(fproat == NULL)\n{\n    //Handle the error here!\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1513183512, "post_id": 47795268, "comment_id": 82557294, "body": "Would not replacing <code>rfixpro (ns, pH...</code> with <code>int rfixpro ( int ns, double pH, double beta, float pKint[],     int ida[], float g[], double cutoff, float cs[], float *tot)</code>?  Replace <code>float</code> objects with <code>double</code> ones - yet leave pointers to match"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1513186653, "post_id": 47795268, "comment_id": 82559302, "body": "@chux  For <code>rfixpro()</code>, yes, that should work.  But given the calls to functions such as <code>tc()</code> and <code>pfix()</code> in the posted code, I suspect that there are a lot of functions in the entire body of code the questioner is working on, all of them in K&amp;R form.  I&#39;d bet a large sum against all of those functions being convertible to standard-compliant form, having all calls done without a prototype, and not breaking anything."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1513189057, "post_id": 47795268, "comment_id": 82560532, "body": "Agree, My experience supports that it (prototyping) is doable - yet quite error prone."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 3, "last_activity_date": 1513186735, "last_edit_date": 1513186735, "creation_date": 1513174884, "answer_id": 47795268, "question_id": 47794084, "link": "https://stackoverflow.com/questions/47794084/error-conflicting-types-for-malloc/47795268#47795268", "title": "error: conflicting types for \u2018malloc\u2019", "body": "<p>It's just old-style K&amp;R C code.</p>\n\n<pre><code>char * emalloc (n)\nunsigned n;\n{\n    char *p, malloc();\n\n    p = malloc(n);\n    if (p == NULL)\n    printf (\"out of memory\\n\");\n    return p;\n}\n</code></pre>\n\n<p>Is just a wrapper around <code>malloc()</code>.  I <em>think</em> this</p>\n\n<pre><code>char *p, malloc();\n</code></pre>\n\n<p>is <em>supposed</em> to be a <code>malloc()</code> prototype along with <code>char *p</code>.  Although it seems to declare that <code>malloc()</code> returns a <code>char</code>, because</p>\n\n<pre><code>char *p, malloc();\n</code></pre>\n\n<p>is the equivalent of</p>\n\n<pre><code>char *p;\nchar malloc();\n</code></pre>\n\n<p>That's one really good reason to never define more than one variable per line.  You're not saving lines of code in a textbook.  And it looks like a bad mistake, which is why I just say that I think it's <em>supposed</em> to be a prototype for <code>malloc()</code> - it shouldn't have worked at all if it truncated a pointer down to a <code>char</code> as done on any hardware and C compiler I've ever used.</p>\n\n<p>And it's that <code>char malloc()</code> prototype that causes you to get the <code>error: conflicting types for \u2018malloc\u2019</code> error.</p>\n\n<p>Note that you can't simply go around and replace</p>\n\n<pre><code>int rfixpro (ns, pH, beta, pKint, ida, g, cutoff, cs, tot)\n     int ns;        /* Number of titratable sites           */\n     float pH;\n     float beta;        /* 1 / kT */\n     float pKint[]; /* Intrinsic pK of sites (input)        */\n     int ida[];         /* ida=1 for cation 2 for anion  (input)    */\n     float g[];     /* site - site interaction matrix (input)   */\n     float cutoff;       /* Cutoff value for fixing sites (input) */\n     float cs[];        /* degree of protonation of sites (output) */\n     float *tot;        /* total protonation (output) */\n{\n    ...\n</code></pre>\n\n<p>with</p>\n\n<pre><code>int rfixpro ( int ns, float pH, float beta, float pKint[],\n    int ida[], float g[], float cutoff, float cs[], float *tot)\n{\n</code></pre>\n\n<p>as that will break things unless you also supply every single call for that function with a proper declaration prior to its use.  I seem to remember a long description in one of Peter van der Linden's books for what havoc can come about from doing that.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1513183253, "post_id": 47797062, "comment_id": 82557094, "body": "1 of 2 answers to correctly explain the error message."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1513179920, "creation_date": 1513179920, "answer_id": 47797062, "question_id": 47794084, "link": "https://stackoverflow.com/questions/47794084/error-conflicting-types-for-malloc/47797062#47797062", "title": "error: conflicting types for \u2018malloc\u2019", "body": "<p>The problem is that this code is old, pre-standard \"K&amp;R C\" (K&amp;R 1st edition). You cannot compile it on standard compliant compiler.</p>\n\n<p>In the ancient days when dinosaurs walked the earth, malloc had the form <code>char* malloc ();</code>. This was before C was standardized and before void pointers were even invented.</p>\n\n<p>The sloppy line <code>char *p, malloc();</code> declares a character pointer <code>p</code>, and then it incorrectly declares malloc as <code>char malloc()</code>. This is likely a bug in the original code.</p>\n\n<p>Now when you show this code to a modern C compiler, with the standard declaration <code>void* malloc(size_t size);</code> in stdlib.h, you get conflicting types. Notably, ancient K&amp;R C didn't require a return type or a parameter list, it just \"made up\" some types if you didn't specify them explicitly.</p>\n\n<p>My recommendation is that you throw this source code in the garbage bin. It is ancient and contains absolutely nothing of value.</p>\n"}], "owner": {"reputation": 173, "user_id": 6649485, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10154029558157928/picture?type=large", "display_name": "Andreas Tosstorff", "link": "https://stackoverflow.com/users/6649485/andreas-tosstorff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2402, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1514783437, "creation_date": 1513171348, "question_id": 47794084, "link": "https://stackoverflow.com/questions/47794084/error-conflicting-types-for-malloc", "title": "error: conflicting types for \u2018malloc\u2019", "body": "<p>I am getting the following error and warning for a script:</p>\n\n<pre><code>rfixpro.c:7:14: error: conflicting types for \u2018malloc\u2019\n     char *p, malloc();\n              ^\nrfixpro.c:9:7: warning: assignment makes pointer from integer without a cast [enabled by default]\n     p = malloc(n);\n</code></pre>\n\n<p>This is part of a program I am trying to install by using make. I never used C++ befor so please excuse my ignorance. I tried to run the script without the 'include' lines, but this produces other warnings. I therefore also post the entire script.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar * emalloc (n)\nunsigned n;\n{\n    char *p, malloc();\n\n    p = malloc(n);\n    if (p == NULL)\n    printf (\"out of memory\\n\");\n    return p;\n}\n\n\nint rfixpro (ns, pH, beta, pKint, ida, g, cutoff, cs, tot)\n     int ns;        /* Number of titratable sites           */\n     float pH;\n     float beta;        /* 1 / kT */\n     float pKint[]; /* Intrinsic pK of sites (input)        */\n     int ida[];         /* ida=1 for cation 2 for anion  (input)    */\n     float g[];     /* site - site interaction matrix (input)   */\n     float cutoff;       /* Cutoff value for fixing sites (input) */\n     float cs[];        /* degree of protonation of sites (output) */\n     float *tot;        /* total protonation (output) */\n{\n  int nsr;  /* Number of sites in reduced set   */\n  int *fprot;   /* = 1 or 0 if fixed prot or deprot = -1 if unfixed  */\n  int *rmap;    /* rmap[i] = full set index of reduced set site i  */\n  int *fmap;    /* fmap[i] = reduced set index of full set site i  */\n        /* fmap[i] = -1 if i not in reduced set */\n  float *pKintr;    /* Intr. pKs for reduced set    */\n  int *idar;    /* Reduced form of ida  */\n  float *gr;    /* Reduced form of g    */\n  float *csr;   /* Reduced form of cs */\n  int i;\n\n  fprot = (int *) emalloc ((unsigned) ns * sizeof (int));\n  rmap = (int *) emalloc ((unsigned) ns * sizeof (int));\n  fmap = (int *) emalloc ((unsigned) ns * sizeof (int));\n  pKintr = (float *) emalloc ((unsigned) ns * sizeof (float));\n  idar = (int *) emalloc ((unsigned) ns * sizeof (int));\n  gr = (float *) emalloc ((unsigned) ns*ns * sizeof (float));\n  csr = (float *) emalloc ((unsigned) ns * sizeof (float));\n\n  pfix (ns, pH, beta, pKint, ida, g, cutoff,\n    &amp;nsr, fprot, rmap, fmap, pKintr, idar, gr);\n  tc (nsr, pKintr, idar, gr, pH, beta, csr);\n  *tot = 0.0;\n  for (i=0; i&lt;ns; ++i)\n    {\n      if (fmap[i] != -1)\n    cs[i] = csr[fmap[i]];\n      else \n    cs[i] = (float) fprot[i];\n      *tot += cs[i];\n    }\n\n  free ( (char *) fprot);\n  free ( (char *) rmap);\n  free ( (char *) fmap);\n  free ( (char *) pKintr);\n  free ( (char *) idar);\n  free ( (char *) gr);\n  free ( (char *) csr);\n\n  return (nsr);\n}\n</code></pre>\n"}, {"tags": ["c", "sorting", "merge", "linked-list"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 1, "creation_date": 1513171024, "post_id": 47793914, "comment_id": 82548836, "body": "Have you stepped through the code with a debugger?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1513172052, "post_id": 47793914, "comment_id": 82549532, "body": "<code>head = mergeLists(front, back);</code> in a function retuning void."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1513177147, "post_id": 47793914, "comment_id": 82552953, "body": "Why did you edit the question? It is even  <i>more</i> wrong now!"}, {"owner": {"reputation": 473, "user_id": 6515530, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HmvF7.jpg?s=128&g=1", "display_name": "Data", "link": "https://stackoverflow.com/users/6515530/data"}, "edited": false, "score": 0, "creation_date": 1513177748, "post_id": 47793914, "comment_id": 82553395, "body": "All the other code was fine, it just shows the offending code now. Cross referencing with the chosen answer, and modifying the code in the question accordingly produces the correct result."}], "answers": [{"tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 1, "last_activity_date": 1513173660, "last_edit_date": 1513173660, "creation_date": 1513171743, "answer_id": 47794208, "question_id": 47793914, "link": "https://stackoverflow.com/questions/47793914/nodes-lost-in-linked-list-merge-sort-implementation-in-c/47794208#47794208", "title": "Nodes lost in linked list merge sort implementation in C", "body": "<p>An easier (and probably more efficient, especially for large lists) method is to first convert the linked list to an array. Consider this code:</p>\n\n<pre><code>char ** arr;\nint size=getLinkedListSize(head);\narr = malloc(sizeof(*arr)*size);\nlinkedList2Array(head, arr);\nmergeSort(arr, size);\narray2LinkedList(arr, size, head);\n</code></pre>\n\n<p>Note that I'm using the type <code>char **</code>. The point (hehe) is to point at the data in the linked list. If the data there is more complex that simple chars or ints you avoid unnecessary copying of data. </p>\n\n<p>This is much easier to write, and even though it has some boilerplate it does not affect anything. The functions (which you have to write) <code>getLinkedListSize</code>, <code>linkedList2Array</code> and <code>array2LinkedList</code> can all have a complexity of O(n) while <code>mergeSort</code> will be O(n*log n) no matter what you do. Also, take into account that this method is MUCH more friendly to the cache.</p>\n\n<p>The only downside of this is that it requires a little more memory, but it is not by much. The array will be at maximum the same size as the list.</p>\n\n<p>The three functions I mentioned are trivial to write. Here are two of them:</p>\n\n<pre><code>int getLinkedListSize(Node * head)\n{\n    int ret=0;\n    while(head) {\n        ret++;\n        head=head-&gt;next;\n    }\n    return ret;\n}\n\nvoid linkedList2Array(Node * head, char ** arr)\n{\n    int index=0;\n    while(head) {\n        arr[index++]=&amp;head-&gt;data;\n        head=head-&gt;next;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 642, "user_id": 4610796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d51d71a6fba21336ea771c883c71582?s=128&d=identicon&r=PG&f=1", "display_name": "abdullah", "link": "https://stackoverflow.com/users/4610796/abdullah"}, "is_accepted": true, "score": 2, "last_activity_date": 1513174768, "last_edit_date": 1513174768, "creation_date": 1513173510, "answer_id": 47794802, "question_id": 47793914, "link": "https://stackoverflow.com/questions/47793914/nodes-lost-in-linked-list-merge-sort-implementation-in-c/47794802#47794802", "title": "Nodes lost in linked list merge sort implementation in C", "body": "<p>Your code is almost perfect. You are merging two lists and returning it to <code>head</code>. But you are not returning that exact <code>head</code> to previous <code>mergeSort</code> calls. </p>\n\n<pre><code>Node* mergeSort(Node *head) {\n\n    Node *front = NULL, *back = NULL, *fast, *slow;\n\n    if(head == NULL || head-&gt;next == NULL)\n        return head; // return head\n    ...\n\n    front = mergeSort(front); // save it to front\n    back = mergeSort(back); // save it to back\n\n    head = mergeLists(front, back); // save it to head\n    return head; // return head\n}\n</code></pre>\n\n<p>In your main function where you are calling <code>mergeSort</code>, use <code>head = mergeSort(head)</code>. The code should work now.</p>\n"}, {"comments": [{"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1541269548, "post_id": 47796391, "comment_id": 93161856, "body": "That code is O(n) on a sorted list, not O(n log n). On a reverse-sorted list, the recursion depth is O(n), and the complexity is O(n^2). This algorithm appears to share many of the benefits and shortcomings of a naive quick sort."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1541270122, "post_id": 47796391, "comment_id": 93161985, "body": "But it works great on almost-sorted lists... For the <i>reversed</i> case, the trick is to pushdown (in stead of append) the &quot;rest&quot; part, making it O(N) again, But that wont be a stable sort."}], "tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 0, "last_activity_date": 1513177973, "creation_date": 1513177973, "answer_id": 47796391, "question_id": 47793914, "link": "https://stackoverflow.com/questions/47793914/nodes-lost-in-linked-list-merge-sort-implementation-in-c/47796391#47796391", "title": "Nodes lost in linked list merge sort implementation in C", "body": "<p>The slow/fast method (Floyds algoritm) is not needed. It is also counter -effective: the sorting will <strong>always</strong> take N log(N) operations, even on a sorted list. </p>\n\n<p>You can take advantage of the existing order by <em>only</em> cutting out the out-of-order elements, and keeping the rest. Then (recursively) sort the unordered part, and merge the two parts.</p>\n\n<hr>\n\n<pre><code>struct list {\n        struct list *next;\n        char* data;\n        };\n\n#define COMPARE(a,b) strcmp((a),(b))\n\nstruct list *splitmerge(struct list *org)\n{\nstruct list *rest ,*this, **pp;\n\nif(!org|| !org-&gt;next) return org;\n\n        /* Split off out-of-order nodes*/\nrest = NULL;\nfor (this = org; this;  ){\n        struct list* next;\n        if(!this-&gt;next)break;\n\n        next = this-&gt;next;\n        if(COMPARE( this-&gt;data,  next-&gt;data) &lt;= 0) {\n                this= next;continue;\n                }\n                /* Cut next out of the chain */\n        this-&gt;next = next-&gt;next;\n        next-&gt;next = rest;\n        rest = next;\n        }\n\n        /* At this point, org is guaranteed to be sorted\n        ** rest is not.\n         */\n\n\n        /* Order the trash */\nrest = splitmerge(rest);\n\n\n        /* Merge with the trash */\nthis=NULL;\nfor(pp = &amp;this; org &amp;&amp; rest; pp = &amp;(*pp)-&gt;next ) {\n        if(COMPARE( org-&gt;data, rest-&gt;data) &lt;= 0) {\n                *pp = org; org=org-&gt;next;\n                }\n        else    {\n                *pp = rest; rest=rest-&gt;next;\n                }\n        }\n*pp = (org) ? org : rest;\n\nreturn this;\n}\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 6515530, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HmvF7.jpg?s=128&g=1", "display_name": "Data", "link": "https://stackoverflow.com/users/6515530/data"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 47794802, "answer_count": 3, "score": 1, "last_activity_date": 1513177973, "creation_date": 1513170788, "last_edit_date": 1513176868, "question_id": 47793914, "link": "https://stackoverflow.com/questions/47793914/nodes-lost-in-linked-list-merge-sort-implementation-in-c", "title": "Nodes lost in linked list merge sort implementation in C", "body": "<p>This implementation is used to order strings in ascending alphabetical order. I've included the functions responsible for the dividing of nodes. <code>head</code> is the head of the linked list.</p>\n\n<p>I believe the <code>mergeSort</code> function is working as intended to divide the list up. See the following ouput:</p>\n\n<pre><code>Head: lady apple stone red queen\nfast:\nslow: stone\nfront: lady apple stone\nback: red queen\n\nHead: lady apple stone\nfast:\nslow: apple\nfront: lady apple\nback: stone\n\nHead: lady apple\nfast: \nslow: lady\nfront: lady\nback: apple\n\nHead: red queen\nfast:\nslow: red\nfront: red\nback: queen\n</code></pre>\n\n<p>Which clearly shows the initial list, <code>lady apple stone red queen</code> being divided into individual nodes, all accounted for.</p>\n\n<p>The problems come when nodes are compared and merged into new lists. For example:\nInitially, <code>lady</code> is compared to <code>apple</code>. They're merged into the list: <code>apple, lady</code>. Then this list should be merged with stone. However, first, <code>lady</code> is compared with <code>stone</code>, instead of <code>apple</code> being compared to <code>stone</code>. This then generates the list: <code>lady, stone</code> (<code>apple</code> being left behind and not used in a comparison). What should happen, is that <code>apple</code> is compared to <code>stone</code>, then <code>lady</code> is compared to <code>stone</code>, and then the entries are sorted and merged accordingly into: <code>apple, lady, stone</code>.</p>\n\n<p>The actual final output is: <code>lady, red, stone</code>. Clearly, <code>apple</code> and <code>queen</code> have been lost somewhere. I'm not sure what the offending code is. </p>\n\n<pre><code>void mergeSort(Node *head) {\n\n    Node *front = NULL, *back = NULL, *fast, *slow;\n\n    if(head == NULL || head-&gt;next == NULL)\n        return;\n\n    ...\n\n    mergeSort(front);\n    mergeSort(back);\n\n    head = mergeLists(front, back);\n\n}\n</code></pre>\n"}, {"tags": ["c", "matlab", "api", "fft", "ifft"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 3, "creation_date": 1513170171, "post_id": 47793699, "comment_id": 82548267, "body": "Matlab&#39;s FFT is implemented on top of <a href=\"http://www.fftw.org/\" rel=\"nofollow noreferrer\">FFTW</a>.  So you&#39;re better off just using that directly."}, {"owner": {"reputation": 21, "user_id": 4615857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/065f86eda3b2f515bde3f5f2cd94a372?s=128&d=identicon&r=PG&f=1", "display_name": "Julia Fischer", "link": "https://stackoverflow.com/users/4615857/julia-fischer"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1513172909, "post_id": 47793699, "comment_id": 82550046, "body": "ok sounds fair  enough , I thought it would easier calling matlab than fftw"}], "answers": [{"tags": [], "owner": {"reputation": 102, "user_id": 3756747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AAePk.jpg?s=128&g=1", "display_name": "EddingtonsMonkey", "link": "https://stackoverflow.com/users/3756747/eddingtonsmonkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1514039289, "creation_date": 1514039289, "answer_id": 47953286, "question_id": 47793699, "link": "https://stackoverflow.com/questions/47793699/call-matlab-ifft-from-c/47953286#47953286", "title": "call matlab ifft from c", "body": "<p>You can generate C code from a script using the MATLAB Coder app. That should make the ifft callable. The ugliest way to do it would be to exec() matlab and re-ingest its output. Oliver's answer is certainly the cleanest and best route though. </p>\n"}, {"tags": [], "owner": {"reputation": 2378, "user_id": 1277239, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/42d3dede20a5ce60d6b89149cb0abc08?s=128&d=identicon&r=PG", "display_name": "Nick X Tsui", "link": "https://stackoverflow.com/users/1277239/nick-x-tsui"}, "is_accepted": false, "score": 0, "last_activity_date": 1515611472, "creation_date": 1515611472, "answer_id": 48194493, "question_id": 47793699, "link": "https://stackoverflow.com/questions/47793699/call-matlab-ifft-from-c/48194493#48194493", "title": "call matlab ifft from c", "body": "<p>The way to use a c/c++ based function for MATLAB to call is to build a mex file. Basic steps are :</p>\n\n<ol>\n<li><p>write a c/c++ script, say you ifft()</p></li>\n<li><p>build it (using visual studio for example) to generate a .mex (.mexw64 for 64-bit system) file.</p></li>\n<li><p>call your ifft() from your MATLAB code once you have your .mex file</p></li>\n</ol>\n\n<p>The interface between the MATLAB and c/c++ code should follow certain rules. Here is an example you can refer to:</p>\n\n<p><a href=\"https://www.mathworks.com/help/matlab/matlab_external/standalone-example.html\" rel=\"nofollow noreferrer\">https://www.mathworks.com/help/matlab/matlab_external/standalone-example.html</a></p>\n\n<p>Here is how to build the c/c++ script into a .mex file:\n<a href=\"https://www.mathworks.com/help/matlab/ref/mex.html\" rel=\"nofollow noreferrer\">https://www.mathworks.com/help/matlab/ref/mex.html</a></p>\n\n<p>The .mex file is pretty much like a library. After you build it, put it in the same folder as the MATLAB script, then you can run it.</p>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 21, "user_id": 4615857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/065f86eda3b2f515bde3f5f2cd94a372?s=128&d=identicon&r=PG&f=1", "display_name": "Julia Fischer", "link": "https://stackoverflow.com/users/4615857/julia-fischer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1515611472, "creation_date": 1513170105, "last_edit_date": 1513170502, "question_id": 47793699, "link": "https://stackoverflow.com/questions/47793699/call-matlab-ifft-from-c", "title": "call matlab ifft from c", "body": "<p>I have a short question: I would like to call the matlab fuction ifft from c code \uff08inverse fast fourier transform\uff09</p>\n\n<p>I was trying to understand the matlab api for c , but I could not  find any example on how to pass the arguments or how to call an internal fuction of matlab within c code</p>\n\n<p>any hint will be greatly appreciated ! </p>\n\n<p>Julia</p>\n"}, {"tags": ["c", "arrays", "algorithm", "pointers", "max"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1513168803, "post_id": 47793214, "comment_id": 82547339, "body": "What is <code>if(i[j] &gt; higest)</code> is never true? what are you returning then?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1513168843, "post_id": 47793214, "comment_id": 82547359, "body": "Also, note the compiler warnings!!!"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 3, "creation_date": 1513168884, "post_id": 47793214, "comment_id": 82547385, "body": "Your function returns an <code>int</code> whereas it should actually return <code>int*</code>. hat probably happens is that <code>int*</code> gets truncated into <code>int</code> and thus causing segfault."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1513169386, "post_id": 47793214, "comment_id": 82547719, "body": "@usr that&#39;s the thing!! A(ny) decent compiler should warn about the mismatch here, right?"}], "answers": [{"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1513170497, "post_id": 47793287, "comment_id": 82548482, "body": "@4386427 Good point, edited."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1513170490, "last_edit_date": 1513170490, "creation_date": 1513168823, "answer_id": 47793287, "question_id": 47793214, "link": "https://stackoverflow.com/questions/47793214/c-array-of-values-pointer-segmentation-fault/47793287#47793287", "title": "C array of values, pointer segmentation fault", "body": "<p>You have the wrong return type, make it:</p>\n\n<pre><code>int * getAddressToMax(int *i);\n</code></pre>\n\n<p>Also make sure it does in fact return a valid pointer. If the entire array is 0, it will return an uninitialized pointer which is a really bad idea. Make it:</p>\n\n<pre><code>int *pi = i;\n</code></pre>\n\n<p>to make it return a pointer to the first element, in that case.</p>\n\n<p>Also you commonly see:</p>\n\n<pre><code>int highest = i[0];\n</code></pre>\n\n<p>and then starting the loop from <code>1</code>, for cases like this. Passing the length of the array is also very common in real code, hardcoding that kind of knowledge inside what could be a generic function makes things harder to understand (and kills code re-use, of course).</p>\n"}, {"comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1513170209, "post_id": 47793493, "comment_id": 82548294, "body": "Fixed a small bug. <code>0</code> -&gt; <code>a[0]</code>"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1513170381, "post_id": 47793493, "comment_id": 82548412, "body": "@klutt You did not fixed a bug. You inserted a bug."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1513170429, "post_id": 47793493, "comment_id": 82548440, "body": "I realize that now. Misread your code. Sorry."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1513170734, "post_id": 47793493, "comment_id": 82548649, "body": "Dropping <code>const</code> like that is quite strange in my opinion. Better to return a <code>const</code> pointer, and have the caller cast it away (the caller knows that it&#39;s going to write, and also owns the array)."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513171070, "post_id": 47793493, "comment_id": 82548875, "body": "Or just remove const... because here that don&#39;t make any sense. cast that break const is... really a bad practice to teach."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1513171332, "post_id": 47793493, "comment_id": 82549052, "body": "@unwind Now you will know how such functions should be written in C.:) Also consider for example the standard C function strchr."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513171413, "post_id": 47793493, "comment_id": 82549109, "body": "@Stargateur It is a good function implementation that satisfies the C Standard convention about such functions.:)"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1513171523, "post_id": 47793493, "comment_id": 82549176, "body": "@VladfromMoscow I think that&#39;s very strange reasoning, and that <code>strchr()</code> looks like that for two reasons: history, and string literals. See <a href=\"https://stackoverflow.com/questions/34842263/how-come-c-standard-library-function-strchr-returns-pointer-to-non-const-when\">this answer</a>. I&#39;m certainly not willing to consider it a good design in general."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1513171848, "post_id": 47793493, "comment_id": 82549401, "body": "@unwind There is no function overloading in C. So it is a general approach to define functions such a way for constant and non-constant arrays. There is no need casting for a constant pointer and a non-constant pointer to accept the result. Otherwise your code will be overloaded with numerous castings that makes it difficult to read. So the implementation of the function I showed is the best implementation."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513171966, "post_id": 47793493, "comment_id": 82549472, "body": "@VladfromMoscow I never said it wasn&#39;t a &quot;good function implementation&quot; but clearly a broken design function. There no way this should be considerate as a good practice, standard C library is obviously not perfect and this one is a great example of bad practice (and stupidity). You want two behaviors ? Do two functions."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513172087, "post_id": 47793493, "comment_id": 82549552, "body": "@Stargateur Well you can make a proposal to the C Standard Committee to double almost all C string function declarations.:) By the way the function themselves have one and only one behavior. It is the client of the functions that have a choice.:)"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513172390, "post_id": 47793493, "comment_id": 82549735, "body": "@Stargateur And moreover it is a bad practice and as you said stupidity to write the same algorithm twice in two different places and having different names for the same algorithm.:)"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513173119, "post_id": 47793493, "comment_id": 82550193, "body": "@VladfromMoscow Let the caller of this function handle the cast would be mush more clean practice, but still prefer two function. This algorithm could be write in a macro that take a type <code>int *</code> or <code>int const *</code> and you will not write twice the same algorithm. I think committee are very aware of this problem but there don&#39;t want breaking change."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1513170354, "last_edit_date": 1513170354, "creation_date": 1513169473, "answer_id": 47793493, "question_id": 47793214, "link": "https://stackoverflow.com/questions/47793214/c-array-of-values-pointer-segmentation-fault/47793493#47793493", "title": "C array of values, pointer segmentation fault", "body": "<p>The function <code>getAdres</code> has the return type <code>int</code> instead of <code>int *</code>. </p>\n\n<pre><code>int getAdres(int *i)\n^^^\n</code></pre>\n\n<p>But in any case its implementation is bad. It uses magic number 5 and moreover an arbitrary array passed to the function can have for example only negative values.</p>\n\n<p>The function definition for example can look like</p>\n\n<pre><code>int * getMaxElement( const int *a, size_t n )\n{\n    size_t highest = 0;\n\n    for ( size_t i = 1; i &lt; n; i++ )\n    {\n        if ( a[highest] &lt; a[i] )\n        {\n            highest = i;\n        }\n    }\n\n    return ( int * )a + highest;\n}\n</code></pre>\n\n<p>And the function can be called like</p>\n\n<pre><code>int *pi = getMaxElement( i, sizeof( i ) / sizeof( *i ) );\n++*pi;\n\nprintf( \"%d\\n\", *pi );\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 2508729, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ed4b04b07bf0d3bb9d8f833018d5389d?s=128&d=identicon&r=PG", "display_name": "MickBoe1", "link": "https://stackoverflow.com/users/2508729/mickboe1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1513196387, "accepted_answer_id": 47793493, "answer_count": 2, "score": 2, "last_activity_date": 1513179783, "creation_date": 1513168631, "last_edit_date": 1513179783, "question_id": 47793214, "link": "https://stackoverflow.com/questions/47793214/c-array-of-values-pointer-segmentation-fault", "closed_reason": "Not suitable for this site", "title": "C array of values, pointer segmentation fault", "body": "<p>In my <code>main()</code> function I create an array, find the address of the highest value and increase the value at the address:</p>\n\n<pre><code>int main()\n{\n    int i[5] = {2,5,6,5,3};\n    int *pi = getAdres(i);\n    (*pi)++;\n\n    printf(\"%d\", i[2]);\n    return 0;\n}\n</code></pre>\n\n<p>The <code>getAdres()</code> function looks like:</p>\n\n<pre><code>int getAdres(int *i)\n{\n    int *pi;\n    int higest = 0;\n    for(int j = 0; j &lt; 5; j++)\n    {\n        if(i[j] &gt; higest)\n        {\n            pi = &amp;i[j];\n            higest = i[j];\n        }\n    }\n    return pi;\n} \n</code></pre>\n\n<p>Without making the get address part into a function it works but in the current format <code>(*pi)++;</code> is giving me a segmentation fault. \nWhat is going wrong?</p>\n"}, {"tags": ["c", "pc-lint"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1513169254, "post_id": 47792937, "comment_id": 82547632, "body": "The solution: never use the icky fall-through feature, it is almost certainly the wrong solution and a strong indication of bad program design."}, {"owner": {"reputation": 129, "user_id": 7584890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fcc36d6fa29939928104456dc44ec62?s=128&d=identicon&r=PG&f=1", "display_name": "vamshi", "link": "https://stackoverflow.com/users/7584890/vamshi"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1513172608, "post_id": 47792937, "comment_id": 82549866, "body": "Than how to suppress above info"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1513176247, "post_id": 47792937, "comment_id": 82552261, "body": "By writing proper code that doesn&#39;t fall through."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 7584890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fcc36d6fa29939928104456dc44ec62?s=128&d=identicon&r=PG&f=1", "display_name": "vamshi", "link": "https://stackoverflow.com/users/7584890/vamshi"}, "edited": false, "score": 0, "creation_date": 1513173895, "post_id": 47793088, "comment_id": 82550699, "body": "it works ,but as above in the comment is it usage of this is bad"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 1, "last_activity_date": 1513168210, "creation_date": 1513168210, "answer_id": 47793088, "question_id": 47792937, "link": "https://stackoverflow.com/questions/47792937/pc-lint-info-825-suppress-is-not-working-using-fallthrough-comment/47793088#47793088", "title": "PC Lint info 825 suppress is not working using fallthrough comment", "body": "<p>That's the wrong comment content. Try:</p>\n\n<pre><code>//lint -fallthrough\n</code></pre>\n\n<p>See <a href=\"http://www.gimpel.com/html/pub/msg.txt\" rel=\"nofollow noreferrer\">the huge text file</a> for details.</p>\n"}], "owner": {"reputation": 129, "user_id": 7584890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fcc36d6fa29939928104456dc44ec62?s=128&d=identicon&r=PG&f=1", "display_name": "vamshi", "link": "https://stackoverflow.com/users/7584890/vamshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 0, "accepted_answer_id": 47793088, "answer_count": 1, "score": -1, "last_activity_date": 1513168454, "creation_date": 1513167765, "last_edit_date": 1513168454, "question_id": 47792937, "link": "https://stackoverflow.com/questions/47792937/pc-lint-info-825-suppress-is-not-working-using-fallthrough-comment", "title": "PC Lint info 825 suppress is not working using fallthrough comment", "body": "<p>I have a code where am getting <code>PC Lint info 825</code>, even though I'm using <code>/* fallthrough */</code> comment. Tell me if any of my usage is wrong.</p>\n\n<p>Example code:</p>\n\n<pre><code>case 1:\n\ncase 2:\n\ncase 3:\n{\n    statement;\n}\n\n/* fallthrough */\n\ncase 4:\n{\nstatement 1;\nstatement 2;\nbreak;\n}\n\ndefault:\nbreak;\n</code></pre>\n"}, {"tags": ["c", "gcc", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1513167634, "post_id": 47792875, "comment_id": 82546644, "body": "<code>#if defined(foo) &amp;&amp; (foo &gt; 0)</code>"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1513168099, "post_id": 47792875, "comment_id": 82546938, "body": "@Lundin But can you wrap that into a macro? E.g. <code>#if ENABLED(foo)</code>? I failed. :-)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513168222, "post_id": 47792875, "comment_id": 82547003, "body": "Note that POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/utilities/c99.html\" rel=\"nofollow noreferrer\"><code>c99</code></a> stipulates: <i><code>-D  name[=value]</code> Define name as if by a C-language <code>#define</code> directive. If no <code>=value</code> is given, a value of 1 shall be used.</i>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1513168292, "post_id": 47792875, "comment_id": 82547049, "body": "@Lundin: should that <code>&gt;</code> be <code>!=</code>?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513168578, "post_id": 47792875, "comment_id": 82547230, "body": "You said &quot;is defined <i>or</i> non-zero&quot;; did you mean &quot;is defined <i>and</i> non-zero&quot;?   If it is non-zero, it is defined; only if it is undefined can it be treated as zero.  It could be defined as zero, but that doesn&#39;t matter with &#39;or&#39;, but obviously it does with &#39;and&#39;.  (In a preprocessor condition, if there are any unexpanded identifiers left after macro expansion, they&#39;re treated as zeroes.)"}, {"owner": {"reputation": 1, "user_id": 9093690, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zvHaP-d6pUM/AAAAAAAAAAI/AAAAAAAAAAc/mG_hrxpG7Ns/photo.jpg?sz=128", "display_name": "krnd", "link": "https://stackoverflow.com/users/9093690/krnd"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513169020, "post_id": 47792875, "comment_id": 82547478, "body": "@JonathanLeffler Ehm ok - It&#39;s <i>defined and non-zero</i> or <i>not defined or zero</i>."}, {"owner": {"reputation": 1, "user_id": 9093690, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zvHaP-d6pUM/AAAAAAAAAAI/AAAAAAAAAAc/mG_hrxpG7Ns/photo.jpg?sz=128", "display_name": "krnd", "link": "https://stackoverflow.com/users/9093690/krnd"}, "edited": false, "score": 0, "creation_date": 1513169440, "post_id": 47792875, "comment_id": 82547752, "body": "Ok, a few words on the setup (can&#39;t change it!). I am using the GNU arm embedded toolchain (<code>gnu-arm-none-eabi-</code>) and the GNU ISO C99 (<code>gnu99</code>)."}, {"owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "edited": false, "score": 0, "creation_date": 1513169941, "post_id": 47792875, "comment_id": 82548094, "body": "Well if different people define their flags differently, it might be time for you to define how your flags are supposed to be. If you require a flags definition as empty define, you can just compile-time hard fail if the defined symbol has any content. Same story the other way around - make the compiler enforce your defined style instead of accepting all kinds of definition."}, {"owner": {"reputation": 1, "user_id": 9093690, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zvHaP-d6pUM/AAAAAAAAAAI/AAAAAAAAAAc/mG_hrxpG7Ns/photo.jpg?sz=128", "display_name": "krnd", "link": "https://stackoverflow.com/users/9093690/krnd"}, "edited": false, "score": 0, "creation_date": 1513175964, "post_id": 47792875, "comment_id": 82552084, "body": "That&#39;s not working for me. It&#39;s a collection of student powered project with ~20 different students (one is me) every semester and I am writing the communication module to connect them."}, {"owner": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 0, "creation_date": 1513241932, "post_id": 47792875, "comment_id": 82579847, "body": "You can use a set of PASTE() macros (it takes a second macro to expand) ... or you can just use <code>#if foo</code> ... to accomplish the same effect."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9093690, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zvHaP-d6pUM/AAAAAAAAAAI/AAAAAAAAAAc/mG_hrxpG7Ns/photo.jpg?sz=128", "display_name": "krnd", "link": "https://stackoverflow.com/users/9093690/krnd"}, "edited": false, "score": 0, "creation_date": 1513176416, "post_id": 47794331, "comment_id": 82552403, "body": "^^ This is an insaneously smart preprocessor exploit :). It might solve my problem. - I really like the idea!"}], "tags": [], "owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "is_accepted": false, "score": 1, "last_activity_date": 1513238026, "last_edit_date": 1513238026, "creation_date": 1513172154, "answer_id": 47794331, "question_id": 47792875, "link": "https://stackoverflow.com/questions/47792875/generic-preprocessor-macro-enabled-check/47794331#47794331", "title": "Generic preprocessor macro enabled check", "body": "<p>Quoting some GCC docs: <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.0.2/cpp_4.html#SEC39\" rel=\"nofollow noreferrer\">If the defined operator appears as a result of a macro expansion, the C standard says the behavior is undefined. GNU cpp treats it as a genuine defined operator and evaluates it normally.</a></p>\n\n<p>Meaning, you can't generally hide the <code>defined</code> macro test within some nested macro expansion, unless you rely on compiler specific non-standard extensions.</p>\n\n<p>So, the best I could come up with involves a two-part test (<a href=\"https://stackoverflow.com/a/13262601/5265292\">https://stackoverflow.com/a/13262601/5265292</a> gave me the basic idea):</p>\n\n<pre><code>// if x is empty:            1 - -1 == 2\n// if x is zero:             1 - 0 - 1 == 0\n// if x is any other number: 1 - x - 1 == -x\n#define ENABLED(x) (1 - x -1 != 0)\n\n\n#if defined FLAG &amp;&amp; ENABLED(FLAG)\n// execute if FLAG is defined as not-zero\n#endif\n</code></pre>\n\n<p>Complete sample:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define TEST1\n#define TEST2 0\n#define TEST3 1\n// define TEST4 // not defined\n\n#define ENABLED(x) (1 - x -1 != 0)\n\nint main(void)\n{\n\n#if defined TEST1 &amp;&amp; ENABLED(TEST1)\n    printf(\"TEST1 is enabled!\\n\");\n#endif\n\n#if defined TEST2 &amp;&amp; ENABLED(TEST2)\n    printf(\"TEST2 is disabled!\\n\");\n#endif\n\n#if defined TEST3 &amp;&amp; ENABLED(TEST3)\n    printf(\"TEST3 is enabled!\\n\");\n#endif\n\n#if defined TEST4 &amp;&amp; ENABLED(TEST4)\n    printf(\"TEST4 is disabled!\\n\");\n#endif\n\n    return 0;\n}\n</code></pre>\n\n<p>As pointed out, you might be able to utilize the GNUCC specific macro extensions to have the <code>defined</code> test within the <code>ENABLED</code> test, but I don't have GCC and the time at hand to check this aspect and I prefer portable solutions.</p>\n"}, {"comments": [{"owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "edited": false, "score": 0, "creation_date": 1513181077, "post_id": 47796486, "comment_id": 82555610, "body": "Having an additional macro that is useable in C code statements (as opposed to preprocessor conditionals) is definitely a nice thing. Side Note: In Visual Studio, there is a bug (?) in the preprocessor. It will complain about an empty parameter to <code>Stringify</code> when using <code>DefinedBlank</code>. A hack fix would be to change the parameter list <code>#define Stringify(x, _) #x</code> and usage <code>(Stringify(x,)[0] == 0 || Stringify(x,)[0] == &#39;1&#39;)</code>."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 2, "last_activity_date": 1513178662, "last_edit_date": 1513178662, "creation_date": 1513178233, "answer_id": 47796486, "question_id": 47792875, "link": "https://stackoverflow.com/questions/47792875/generic-preprocessor-macro-enabled-check/47796486#47796486", "title": "Generic preprocessor macro enabled check", "body": "<p>You can stringify the macro name (if undefined) or the expansion (if defined) and then examine it. This program:</p>\n\n<pre><code>#define DefinedBlank\n#define DefinedZero     0\n#define DefinedOne      1\n\n#define Stringify(x)    #x\n#define Enabled(x)      (Stringify(x)[0] == 0 || Stringify(x)[0] == '1')\n\n#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    const char *String[] = { \"not \", \"\" };\n\n    printf(\"Undefined is %senabled.\\n\",    String[Enabled(Undefined)]);\n    printf(\"DefinedBlank is %senabled.\\n\", String[Enabled(DefinedBlank)]);\n    printf(\"DefinedZero is %senabled.\\n\",  String[Enabled(DefinedZero)]);\n    printf(\"DefinedOne is %senabled.\\n\",   String[Enabled(DefinedOne)]);\n}\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>Undefined is not enabled.\nDefinedBlank is enabled.\nDefinedZero is not enabled.\nDefinedOne is enabled.\n</code></pre>\n\n<p>Apple LLVM evaluates the conditions at compile time, so you could use <code>if Enabled(foo) { code\u2026 }</code>, and the <code>code\u2026</code> would not be included in the executable if <code>foo</code> were not enabled. (However, it must be syntactically and grammatically correct.)</p>\n\n<p>If you want more sophisticated distinctions than just undefined, blank, 0, or 1, then you can write an arbitrary routine to examine the string and return a result. Of course, the compiler is less likely to optimize that.</p>\n"}, {"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 0, "last_activity_date": 1513256619, "creation_date": 1513256619, "answer_id": 47814071, "question_id": 47792875, "link": "https://stackoverflow.com/questions/47792875/generic-preprocessor-macro-enabled-check/47814071#47814071", "title": "Generic preprocessor macro enabled check", "body": "<p>This provides a preprocessor test for the cases where a macro is undefined, defined but blank, defined to be \u201c0\u201d, or defined to be \u201c1\u201d. It does not distinguish other definitions for the macros (e.g., a macro defined to be \u201c2\u201d will be reported as not enabled):</p>\n\n<pre><code>#define EnabledTest     1\n#define EnabledTest0    0\n#define EnabledTest1    1\n#define EnabledPaste(x) EnabledTest ## x\n#define Enabled(x)      EnabledPaste(x)\n\n\n#define DefinedBlank\n#define DefinedZero     0\n#define DefinedOne      1\n\n\n#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    #if Enabled(Undefined)\n        printf(\"Undefined is enabled.\\n\");\n    #endif\n    #if Enabled(DefinedBlank)\n        printf(\"DefinedBlank is enabled.\\n\");\n    #endif\n    #if Enabled(DefinedZero)\n        printf(\"DefinedZero is enabled.\\n\");\n    #endif\n    #if Enabled(DefinedOne)\n        printf(\"DefinedOne is enabled.\\n\");\n    #endif\n}\n</code></pre>\n\n<p>the output is:</p>\n\n<pre><code>DefinedBlank is enabled.\nDefinedOne is enabled.\n</code></pre>\n\n<p>Additionally, we can combine it with <a href=\"https://stackoverflow.com/users/5265292/grek40\">grek40</a>\u2019s idea to generalize it to undefined, defined but blank, and defined to strings that evaluate simply in place of <code>x</code> in <code>1 - x - 1</code>:</p>\n\n<pre><code>#define EnabledTest     1\n#define EnabledPaste(x) EnabledTest ## x\n#define Enabled(x)      (EnabledPaste(x)) || (1 - x - 1)\n\n\n#define DefinedBlank\n#define DefinedZero     0\n#define DefinedOne      1\n\n\n#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    #if Enabled(Undefined)\n        printf(\"Undefined is enabled.\\n\");\n    #endif\n    #if Enabled(DefinedBlank)\n        printf(\"DefinedBlank is enabled.\\n\");\n    #endif\n    #if Enabled(DefinedZero)\n        printf(\"DefinedZero is enabled.\\n\");\n    #endif\n    #if Enabled(DefinedOne)\n        printf(\"DefinedOne is enabled.\\n\");\n    #endif\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9093690, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zvHaP-d6pUM/AAAAAAAAAAI/AAAAAAAAAAc/mG_hrxpG7Ns/photo.jpg?sz=128", "display_name": "krnd", "link": "https://stackoverflow.com/users/9093690/krnd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1513256619, "creation_date": 1513167495, "last_edit_date": 1513176571, "question_id": 47792875, "link": "https://stackoverflow.com/questions/47792875/generic-preprocessor-macro-enabled-check", "title": "Generic preprocessor macro enabled check", "body": "<p><strong>Is there a way to define a macro checking if another macro is <em>defined</em> and <em>non-zero</em> or respectively <em>not defined</em> or <em>defined as zero</em>?</strong></p>\n\n<p>I recently ran into the problem that different people define their macros in a different way if they are used as flags. While compiling some define their macro without a value (eg. <code>-DDEBUG</code>) and some set it to non-zero (eg. <code>-DDEBUG=1</code>).</p>\n\n<p>I actually found code similar to it: <code>(defined(macro ## _SET) &amp;&amp; (macro ## _SET))</code>. The solution for this to work is the concatenation <code>##</code> which prevents the macro expansion. Is there a way around it?</p>\n\n<p><strong>Environment</strong></p>\n\n<p>GNU Arm Embedded Toolchain (<code>arm-none-eabi-*</code>) with GNU ISO C99 (<code>std=gnu99</code>).</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1513166766, "post_id": 47792582, "comment_id": 82546108, "body": "So is the question why a C file is being included? The question is a bit hard to understand for me, I&#39;m afraid."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1513166808, "post_id": 47792582, "comment_id": 82546136, "body": "<code>h264_mc_template.c</code> must depend on <code>CHROMA_IDC</code> so it needs inclusion to generate the proper code."}, {"owner": {"reputation": 720, "user_id": 6073148, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6LMP5.jpg?s=128&g=1", "display_name": "Zahid Khan", "link": "https://stackoverflow.com/users/6073148/zahid-khan"}, "edited": false, "score": 0, "creation_date": 1513166867, "post_id": 47792582, "comment_id": 82546168, "body": "Do yew mean why a source file is included?"}, {"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1513167002, "post_id": 47792582, "comment_id": 82546252, "body": "C != C++. Tag only with the language that you&#39;re using, unless both are actually relevant."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 4, "last_activity_date": 1513166954, "creation_date": 1513166954, "answer_id": 47792673, "question_id": 47792582, "link": "https://stackoverflow.com/questions/47792582/why-might-need-include-a-source-file-that/47792673#47792673", "title": "Why might need include a source file that?", "body": "<p>the \"template\" suffix hints at the fact that the code depends on some preprocessor directives.</p>\n\n<p>I checked the <a href=\"https://www.ffmpeg.org/doxygen/2.3/h264__mc__template_8c_source.html\" rel=\"nofollow noreferrer\">source</a> and at the beginning there's</p>\n\n<pre><code>   #if   CHROMA_IDC == 1\n   #   define MCFUNC(n) FUNC(n ## _420)\n   #elif CHROMA_IDC == 2\n   #   define MCFUNC(n) FUNC(n ## _422)\n   #elif CHROMA_IDC == 3\n   #   define MCFUNC(n) FUNC(n ## _444)\n   #endif\n</code></pre>\n\n<p>note that you have <code>#define CHROMA_IDC 3</code> <em>before</em> including this file.</p>\n\n<p>This tells the preprocessor to use <code>define MCFUNC(n) FUNC(n ## _444)</code> in the included file.</p>\n\n<p>the source <em>could</em> have been left alone in the makefile but with a <code>-DCHROMA_IDC=3</code> directive, and in that case, the template cannot be reused for other source files because of multiple redefinition (the functions in this source file are <code>static</code> to avoid multiple redefinition if the template is instanciated more than once)</p>\n\n<p>Why using a template? probably for performance issues, to avoid a call chain and some tests to branch on the required behaviour. <code>ffmpeg</code> cannot afford to be slow on the encoding functions.</p>\n"}], "owner": {"reputation": 131, "user_id": 8213063, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-HrA-s6kE2mc/AAAAAAAAAAI/AAAAAAAAAEg/hMtqIWm9nN0/photo.jpg?sz=128", "display_name": "Alexandr Lukovnikov", "link": "https://stackoverflow.com/users/8213063/alexandr-lukovnikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 47792673, "answer_count": 1, "score": 2, "last_activity_date": 1513168597, "creation_date": 1513166677, "last_edit_date": 1513168597, "question_id": 47792582, "link": "https://stackoverflow.com/questions/47792582/why-might-need-include-a-source-file-that", "title": "Why might need include a source file that?", "body": "<p>I am to port <code>h264</code> codec in an embedded device. The ffmpeg source code uses the following construction:</p>\n\n<pre><code>#undef  CHROMA_IDC\n#define CHROMA_IDC 3\n#include \"h264_mc_template.c\"\n\nstatic av_noinline void FUNC(hl_decode_mb_444)(const H264Context *h, H264SliceContext *sl)\n{\n    ...\n}\n</code></pre>\n\n<p>Why do I need to include such a source file? Isn't that used only for the header?</p>\n"}, {"tags": ["c", "pointers", "linked-list", "queue", "singly-linked-list"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1513164509, "post_id": 47791817, "comment_id": 82544828, "body": "There is a bug somewhere in the code you didn&#39;t show. You need to show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. BTW: in C parameters are passed by value, so if you call <code>xyz = dequeue(somequeue);</code> then <code>somequeue</code> won&#39;t be modified. That may be your problem."}], "answers": [{"tags": [], "owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "is_accepted": false, "score": 2, "last_activity_date": 1513172484, "last_edit_date": 1513172484, "creation_date": 1513164634, "answer_id": 47791956, "question_id": 47791817, "link": "https://stackoverflow.com/questions/47791817/exception-thrown-when-using-dequeue-method-from-queue/47791956#47791956", "title": "Exception thrown when using dequeue method from queue", "body": "<pre><code> int dequeue(queue q)\n {\n   queue fi = q;\n</code></pre>\n\n<p>You pass <code>q</code> by value so even though you make <code>q</code> point to next element inside <code>dequeue()</code>, outside <code>dequeue()</code>, it is still pointing to freed memory and using <code>q</code> will crash.</p>\n\n<p>Pass a pointer to <code>q</code> to <code>dequeue</code></p>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 3552212, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4946f7546373fbb96bdfacc73855a1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3552212/matthew"}, "edited": false, "score": 0, "creation_date": 1513167016, "post_id": 47792059, "comment_id": 82546266, "body": "Yes, I can&#39;t believe I didn&#39;t remember that, thank you. Why is the first declaration of the struct invalid ?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 95, "user_id": 3552212, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4946f7546373fbb96bdfacc73855a1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3552212/matthew"}, "edited": false, "score": 0, "creation_date": 1513167070, "post_id": 47792059, "comment_id": 82546295, "body": "@Matthew It declares two different structures. The first one is unnamed and the second one is incomplete. The compiler should issue a diagnostic message at least for this statement q = q-&gt;next;"}, {"owner": {"reputation": 95, "user_id": 3552212, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4946f7546373fbb96bdfacc73855a1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3552212/matthew"}, "edited": false, "score": 0, "creation_date": 1513171610, "post_id": 47792059, "comment_id": 82549236, "body": "I understand, thank you !"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1513165023, "creation_date": 1513165023, "answer_id": 47792059, "question_id": 47791817, "link": "https://stackoverflow.com/questions/47791817/exception-thrown-when-using-dequeue-method-from-queue/47792059#47792059", "title": "Exception thrown when using dequeue method from queue", "body": "<p>For starters this declaration</p>\n\n<pre><code>typedef struct {\n   int value;\n   struct queue_item * next;\n} queue_item;\n</code></pre>\n\n<p>is invalid. </p>\n\n<p>It should look like</p>\n\n<pre><code>typedef struct queue_item {\n   int value;\n   struct queue_item * next;\n} queue_item;\n</code></pre>\n\n<p>The function <code>dequeue</code> deals with a copy of the original queue pointer because it is passed to the function by value.</p>\n\n<p>So this statement in the function</p>\n\n<pre><code>q = q-&gt;next;\n</code></pre>\n\n<p>does not change the original pointer.</p>\n\n<p>You should pass the pointer by reference. For example</p>\n\n<pre><code>int dequeue(queue *q)\n{\n    queue fi = *q;\n    int value = ( *q )-&gt;value;\n\n    *q = ( *q )-&gt;next;\n    free( fi );\n\n    return  value;\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 3552212, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4946f7546373fbb96bdfacc73855a1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3552212/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1513166953, "answer_count": 2, "score": 0, "last_activity_date": 1513172484, "creation_date": 1513164150, "last_edit_date": 1513165288, "question_id": 47791817, "link": "https://stackoverflow.com/questions/47791817/exception-thrown-when-using-dequeue-method-from-queue", "closed_reason": "Duplicate", "title": "Exception thrown when using dequeue method from queue", "body": "<p>I am trying to make my queue library and when I implement the dequeue method, an exception is throw \"0xC0000374: A heap has been corrupted (parameters: 0x77475910).\" This only gets thrown AFTER I already remove an item from the queue, the item is returned successfully however the first element is not removed, here is how I wrote the code :</p>\n\n<pre><code>typedef struct {\n   int value;\n   struct queue_item * next;\n} queue_item;\ntypedef queue_item * queue;\n</code></pre>\n\n<p>and this is the method:</p>\n\n<pre><code>int dequeue(queue q)\n{\n    queue fi = q;\n    int value = q-&gt;value;\n    fi = q;\n    q = q-&gt;next;\n    free(fi);\n    return  value;\n}\n</code></pre>\n"}, {"tags": ["c", "api", "google-translate"], "comments": [{"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1513164531, "post_id": 47791473, "comment_id": 82544851, "body": "You need to learn how to send an HTTP Request -- it&#39;s not <i>just</i> a matter of squirting a URL down a socket (though it doesn&#39;t need to be <i>much</i> more complicated). There seem to be several &quot;how to&quot;&#39;s for Java on SO, but not (obviously) one for C, but try <a href=\"https://www.tutorialspoint.com/http/http_requests.htm\" rel=\"nofollow noreferrer\">this Tutorialspoint page</a>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1513165805, "post_id": 47791473, "comment_id": 82545570, "body": "<code>system(&quot;ping translate.googleapis.com&quot;);</code> What is that supposed to do?  Trying to <code>ping</code> a server tells you <i>nothing</i> about whether you can successfully connect to port 80 for an HTTP request.  If the <code>ping</code> fails, you might still be able to connect, and if the <code>ping</code> works your connection to port 80 can still fail.  &quot;Try X to test Y&quot; is faulty logic, at best."}], "answers": [{"tags": [], "owner": {"reputation": 501, "user_id": 8608345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c11de40be6eb43ab765974668bf1a97?s=128&d=identicon&r=PG&f=1", "display_name": "NickJH", "link": "https://stackoverflow.com/users/8608345/nickjh"}, "is_accepted": true, "score": 1, "last_activity_date": 1513166344, "last_edit_date": 1513166344, "creation_date": 1513164841, "answer_id": 47792013, "question_id": 47791473, "link": "https://stackoverflow.com/questions/47791473/receiving-data-through-winsockets-in-c/47792013#47792013", "title": "Receiving data through winsockets in C", "body": "<p>Two problems. Firstly, you can't just send the URL by itself; you need to make an HTTP request. The best way to do this is often to use a third-party library like LibCURL, but for very simple cases you might prefer to do it by hand. At the very least you'd need a <code>GET</code> line, a <code>Host:</code> header and a blank line. See the HTTP RFC for how to format a request and parse the response.</p>\n\n<p>Secondly, if you want to use HTTPS, you can't just send plain text to a socket, there is also an encryption layer. Again, you will need a library. (On Linux I would use OpenSSL or libCURL, which also exist on Windows but there may be other choices there.) By the way, by default HTTP uses port 80 but HTTPS uses port 443.</p>\n"}], "owner": {"reputation": 13, "user_id": 9083085, "user_type": "registered", "profile_image": "https://graph.facebook.com/1215232341955047/picture?type=large", "display_name": "Nabid", "link": "https://stackoverflow.com/users/9083085/nabid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 47792013, "answer_count": 1, "score": 1, "last_activity_date": 1513168650, "creation_date": 1513163023, "last_edit_date": 1513163943, "question_id": 47791473, "link": "https://stackoverflow.com/questions/47791473/receiving-data-through-winsockets-in-c", "title": "Receiving data through winsockets in C", "body": "<p>I am trying to make a translator in C using Google's translator API.</p>\n\n<p>So far i've been able to create sockets, initialize them and connect them.\nI've sent the url that is supposed to be translating the text, but the reply size is zero bytes. The objective is to perhaps receive it as a text file or just a string.</p>\n\n<p>This is the code so far.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;winsock2.h&gt;\n#include \"count.c\"\n\n#pragma comment(lib,\"ws2_32.lib\") //Winsock Library\n\nint main(int argc , char *argv[])\n{\n    WSADATA wsa;\n    SOCKET s;\n    struct sockaddr_in server;\n    char *message , server_reply[2000];\n    int recv_size;\n\n    printf(\"\\nInitialising Winsock...\");\n    if (WSAStartup(MAKEWORD(2,2),&amp;wsa) != 0)\n    {\n        printf(\"Failed. Error Code : %d\",WSAGetLastError());\n        return 1;\n    }\n\n    printf(\"Initialised.\\n\");\n\n    // Create a socket\n    if((s = socket(AF_INET , SOCK_STREAM , 0 )) == INVALID_SOCKET)\n    {\n        printf(\"Could not create socket : %d\" , WSAGetLastError());\n    }\n\n    printf(\"Socket created.\\n\");\n\n    system(\"ping translate.googleapis.com\");\n\n    const char* ipadress;\n    printf(\"Enter IP adress of Hostname\\n\");\n\n    scanf(\"%s\",ipadress);\n\n    server.sin_addr.s_addr = inet_addr(ipadress);\n    server.sin_family = AF_INET;\n    server.sin_port = htons( 80 );\n\n    // Connect to remote server\n    if (connect(s , (struct sockaddr *)&amp;server , sizeof(server)) &lt; 0)\n    {\n        puts(\"connect error\");\n        return 1;\n    }\n\n    puts(\"Connected\");\n\n    // Send some data\n    message = \"https://translate.googleapis.com/translate_a/single?client=gtx&amp;sl=en&amp;tl=da&amp;dt=t&amp;q=Hello\";\n    if( send(s , message , strlen(message) , 0) &lt; 0)\n    {\n        puts(\"Send failed\");\n        return 1;\n    }\n    puts(\"Data Send\\n\");\n\n    // Receive a reply from the server\n    if((recv_size = recv(s , server_reply , 2000 , 0)) == SOCKET_ERROR)\n    {\n        puts(\"recv failed\");\n    }\n\n    puts(\"Reply received\\n\");\n\n    // Add a NULL terminating character to make it a proper string before printing\n    server_reply[recv_size] = '\\0';\n    printf(\"size: %d\\n\",recv_size);\n    puts(server_reply);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c", "arrays", "list"], "comments": [{"owner": {"reputation": 1110, "user_id": 6022016, "user_type": "registered", "profile_image": "https://graph.facebook.com/1736653953234514/picture?type=large", "display_name": "Sagun Shrestha", "link": "https://stackoverflow.com/users/6022016/sagun-shrestha"}, "edited": false, "score": 4, "creation_date": 1513163030, "post_id": 47791378, "comment_id": 82543860, "body": "C doesn&#39;t care about the index of array, you can declare an array of length 5 and access the 6th element. It will however return you a garbage value for the 6th element. Python is strict and will return an <code>IndexError</code>."}, {"owner": {"reputation": 878, "user_id": 7350453, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/eq40E.gif?s=128&g=1", "display_name": "BoRRis", "link": "https://stackoverflow.com/users/7350453/borris"}, "edited": false, "score": 0, "creation_date": 1513163064, "post_id": 47791378, "comment_id": 82543889, "body": "Yes.But why the futures values of <code>n</code> being unable to give output in python?"}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 4, "creation_date": 1513163101, "post_id": 47791378, "comment_id": 82543909, "body": "@BoRRis simply because the language doesn&#39;t let you"}, {"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1513163107, "post_id": 47791378, "comment_id": 82543914, "body": "It looks like you need to pick up a book on exception handling in python."}, {"owner": {"reputation": 878, "user_id": 7350453, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/eq40E.gif?s=128&g=1", "display_name": "BoRRis", "link": "https://stackoverflow.com/users/7350453/borris"}, "reply_to_user": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1513163175, "post_id": 47791378, "comment_id": 82543965, "body": "@Nick A this is what i want to know.Why and Whats happening behind the scene?In the memory level?"}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 3, "creation_date": 1513163290, "post_id": 47791378, "comment_id": 82544035, "body": "@BoRRis That&#39;s well outside the scope of this site, we&#39;re not here to explain how the underlying memory structures of C and Python work, I suggest you go and learn C and then read the Python source code"}, {"owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "edited": false, "score": 11, "creation_date": 1513163337, "post_id": 47791378, "comment_id": 82544062, "body": "Your C program is not &quot;correct&quot;: it invokes undefined behavior and could just as well crash on access to <code>arr[5]</code>, or do some even worse thing. You&#39;re not guaranteed to get any value, even a garbage one. In Python you are guaranteed to get an <code>IndexError</code> instead."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1513194440, "post_id": 47791378, "comment_id": 82563167, "body": "Why do you expect two different programming languages behave the same?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1110, "user_id": 6022016, "user_type": "registered", "profile_image": "https://graph.facebook.com/1736653953234514/picture?type=large", "display_name": "Sagun Shrestha", "link": "https://stackoverflow.com/users/6022016/sagun-shrestha"}, "edited": false, "score": 1, "creation_date": 1513194502, "post_id": 47791378, "comment_id": 82563198, "body": "@SagunShrestha: &quot;C doesn&#39;t care about the index of array, you can declare an array of length 5 and access the 6th element.&quot; - <b>definitively not!</b> There is no 6th element. If you invoke undefined behaviour, you loose any warranty the language gives."}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1513202507, "post_id": 47791378, "comment_id": 82566915, "body": "@Olaf, I think it&#39;s clear that they mean access where the 6th element <i>would</i> be, more like the &quot;6th&quot; element"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1513212835, "post_id": 47791378, "comment_id": 82570178, "body": "@NickA: That is not guaranteed. And modern ABIs don&#39;t necessarily store such small arrays in RAM at all and the compiler might do what it wants. There is nothing useful trying to define <b>undefined behaviour</b>! By definition the array has 5 elements and assuming anything beyond that is extremely dangerous speculation. On a sidenote: such assumptions are the reason C has such a bad reputation for &quot;crashing&quot;."}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1513212930, "post_id": 47791378, "comment_id": 82570201, "body": "@Olaf I&#39;m not disputing that ^^, I&#39;m merely suggesting what they were trying to comment"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1513213047, "post_id": 47791378, "comment_id": 82570228, "body": "@NickA: You missed the point of my comment. It was exactly to point out such assumptions are not just irrelevant, but very dangerous, expecially when stated to obvious beginners. (btw: there are <a href=\"https://www.youtube.com/watch?v=fQ9RqgcR24g\" rel=\"nofollow noreferrer\">only 5 elements</a>)"}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1513213201, "post_id": 47791378, "comment_id": 82570268, "body": "@Olaf I&#39;m not denying that, and I fully understood your comment, I repeat, I was merely suggesting what they were trying to comment, not agreeing with it"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1513256362, "post_id": 47791378, "comment_id": 82589254, "body": "On a sidenote: when iterating a list, use the ideomatic, <i>pythonic</i> way with the list-iterator, not the C-ish way with indexing. That will also avoid the exception."}], "answers": [{"comments": [{"owner": {"reputation": 878, "user_id": 7350453, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/eq40E.gif?s=128&g=1", "display_name": "BoRRis", "link": "https://stackoverflow.com/users/7350453/borris"}, "edited": false, "score": 0, "creation_date": 1513163930, "post_id": 47791671, "comment_id": 82544472, "body": "thnx for the positive response.So in python its something different."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1513194606, "post_id": 47791671, "comment_id": 82563252, "body": "And arry is <b>not</b> a pointer. Don&#39;t even start telling this wrong statement to beginners!"}, {"owner": {"reputation": 878, "user_id": 7350453, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/eq40E.gif?s=128&g=1", "display_name": "BoRRis", "link": "https://stackoverflow.com/users/7350453/borris"}, "edited": false, "score": 0, "creation_date": 1513237408, "post_id": 47791671, "comment_id": 82577576, "body": "The answer in incorredt."}, {"owner": {"reputation": 68674, "user_id": 41316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c31ca37c09ab42763f690e0d1355d7?s=128&d=identicon&r=PG", "display_name": "bruno desthuilliers", "link": "https://stackoverflow.com/users/41316/bruno-desthuilliers"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1513238641, "post_id": 47791671, "comment_id": 82578149, "body": "@Olaf yes that was an oversimplification indeed - I made it clearer and added a link to a more detailed explanation."}, {"owner": {"reputation": 68674, "user_id": 41316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c31ca37c09ab42763f690e0d1355d7?s=128&d=identicon&r=PG", "display_name": "bruno desthuilliers", "link": "https://stackoverflow.com/users/41316/bruno-desthuilliers"}, "reply_to_user": {"reputation": 878, "user_id": 7350453, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/eq40E.gif?s=128&g=1", "display_name": "BoRRis", "link": "https://stackoverflow.com/users/7350453/borris"}, "edited": false, "score": 1, "creation_date": 1513238720, "post_id": 47791671, "comment_id": 82578187, "body": "@BoRRis I&#39;m sorry but despite the oversimplification (corrected), the answer is still correct."}, {"owner": {"reputation": 878, "user_id": 7350453, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/eq40E.gif?s=128&g=1", "display_name": "BoRRis", "link": "https://stackoverflow.com/users/7350453/borris"}, "edited": false, "score": 0, "creation_date": 1513238826, "post_id": 47791671, "comment_id": 82578244, "body": "thnxx for that ."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1513255495, "post_id": 47791671, "comment_id": 82588634, "body": "I still can&#39;t agree. Get thew size of both. There are already too many people thinking wrong here. Just see the bunch of questions to get the size of an array passes to a function with <code>sizeof</code>. In addition, see my comments at the question. There is absolutely no use trying to reason about expecially this variant of UB. You would be surprised what a modern implementation might do here."}], "tags": [], "owner": {"reputation": 68674, "user_id": 41316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c31ca37c09ab42763f690e0d1355d7?s=128&d=identicon&r=PG", "display_name": "bruno desthuilliers", "link": "https://stackoverflow.com/users/41316/bruno-desthuilliers"}, "is_accepted": false, "score": 3, "last_activity_date": 1513238587, "last_edit_date": 1513238587, "creation_date": 1513163707, "answer_id": 47791671, "question_id": 47791378, "link": "https://stackoverflow.com/questions/47791378/lists-in-python-vs-arrays-in-c/47791671#47791671", "title": "Lists in Python vs Arrays in C", "body": "<p>In C, an \"array\" is mainly a pointer to a memory location (nb: this is an obvious simplification, <a href=\"https://stackoverflow.com/questions/4607128/in-c-are-arrays-pointers-or-used-as-pointers\">you can read this for more details</a>), and <code>arr[x]</code> will return N bytes from <code>address_of_arr + (N * x)</code> (where <code>N</code> is the size of the array data type). Like all memory access in C, there's <em>absolutely NO</em> check so you can read (and write) just any arbitrary memory location. </p>\n\n<p>Note that, as Daniel Pryden mentions in a comment, the behaviour you observe with your C example is called an \"undefined behaviour\", which means the result is not defined by the C langage specs, depends on the implementation (your C compiler, platform and whatnots), and could actually yield just <em>any</em> result (including a core dump, erasing your hard drive or launching a nuclear missile). Luckily the implementation you tested it with just returns garbage. Now if you really feel lucky, for a bit of fun try <em>writing</em> at this memory location and find out what happens ;)</p>\n\n<p>In Python, a <code>list</code> is an object which knows it's length and won't let you try to access items at indexes that don't exist. Where and how the effective list contents are stored in memory is handled by the implementation and is totally opaque to the Python code. </p>\n\n<p><em>Disclaimer : this answer is based on C implementations most commonly found on today's operating systems - the C language spec doesn't specify anything about how an array should be implemented (just how it's supposed to work) so an implementation could as well choose to store array datas on clay tablets disposed on a rubber band and move that rubber band by N positions left or right, in which case my answer would be totally irrelevant...</em> </p>\n"}], "owner": {"reputation": 878, "user_id": 7350453, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/eq40E.gif?s=128&g=1", "display_name": "BoRRis", "link": "https://stackoverflow.com/users/7350453/borris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "closed_date": 1513194924, "answer_count": 1, "score": -10, "last_activity_date": 1513238587, "creation_date": 1513162774, "last_edit_date": 1513163716, "question_id": 47791378, "link": "https://stackoverflow.com/questions/47791378/lists-in-python-vs-arrays-in-c", "closed_reason": "Needs more focus", "title": "Lists in Python vs Arrays in C", "body": "<p>While programming in python <strong>3.6</strong>, I came across with some problem in <code>list</code> :</p>\n\n<pre><code>l = [2,2,3,3,3]\n\nfor n in range(len(l)):\n   print(l[n+1])  #increasing value of n by 1\n</code></pre>\n\n<p>This code will obviously give an error :</p>\n\n<blockquote>\n  <p>IndexError: list index out of range</p>\n</blockquote>\n\n<p>But in case of <code>c</code> language :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main() {\nint i =0;\nint arr[5] = {1,2,3,4,5};\nfor(i = 0 ; i&lt;=4;i++){\n\n    printf(\"%d \" , arr[i+1]);\n}\nreturn(0);\n}\n</code></pre>\n\n<p>Gives the correct output(including garbage value):</p>\n\n<blockquote>\n  <p>2 3 4 5 32764 </p>\n</blockquote>\n\n<p>I wanted to know why are we not getting the value of elements of list in python by using the future values of <code>n</code> whereas in c it is just reverse?</p>\n"}, {"tags": ["c", "fork", "named-pipes"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1513162989, "post_id": 47791329, "comment_id": 82543824, "body": "You forget to check if <code>mkfifo</code> fails. And you should not open with the <code>O_CREAT</code> flag."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1513163092, "post_id": 47791329, "comment_id": 82543905, "body": "And a probable culprit of your problem (I <i>think</i>, since it&#39;s not very clear what your problem actually <i>is</i>): <code>read(t1, rcs, sizeof(rcs))</code>. You only read the size of the <i>pointer</i>, not the size of the structure. Use <code>sizeof *rcs</code> instead."}, {"owner": {"reputation": 15, "user_id": 9076581, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gDqfgwu31lc/AAAAAAAAAAI/AAAAAAAAAMg/qUsYA2dHE3U/photo.jpg?sz=128", "display_name": "Karl", "link": "https://stackoverflow.com/users/9076581/karl"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1513167090, "post_id": 47791329, "comment_id": 82546311, "body": "Oh yes I forgot to check mkfifo. I am sorry if I haven&#39;t said it clairly, but the main problem here, is about mkfifo which don&#39;t want to work. On both sides I can&#39;t write and read threw the two named pipes. After cheking if mkfifo fails, it does indeed. But I don&#39;t understand why, isn&#39;t that way you use mkfifo ? [edit : i&#39;ve uploaded the code]"}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "edited": false, "score": 0, "creation_date": 1572273337, "post_id": 47791329, "comment_id": 103498702, "body": "In each but the first run of the server the <code>mkfifo(fifoServeur, 0777)</code> fails because the FIFO <i>file exists</i> already."}], "owner": {"reputation": 15, "user_id": 9076581, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gDqfgwu31lc/AAAAAAAAAAI/AAAAAAAAAMg/qUsYA2dHE3U/photo.jpg?sz=128", "display_name": "Karl", "link": "https://stackoverflow.com/users/9076581/karl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513167001, "creation_date": 1513162641, "last_edit_date": 1513167001, "question_id": 47791329, "link": "https://stackoverflow.com/questions/47791329/server-answering-client-request-threw-pipes-and-tubes-c", "title": "Server answering client request threw pipes and tubes C", "body": "<ul>\n<li>Short version :</li>\n</ul>\n\n<p>I'm trying threw a request send by a client, awsering him back the result of the expression he wanted me to find. </p>\n\n<ul>\n<li>Longer version :</li>\n</ul>\n\n<p>For this, I am firstly using mkfifo to create two named tubes : one for the server and one for the client. The client will connect himself to server's named tube and write the request. The server will read and in using a fork will determinate the resultat of message->expression (threw bc). After this, he will connect himself to client's named tube (tube's name = pid of the client) and send back the result. Finally the client printf it.</p>\n\n<p>I have already asked how does work fork and bc, with all the redirection we should use. This does work when I'm not using mkfifo in the program (and create the named tube of the server and client before). I think I misunderstanding the correct use of open and mkfifo. I've tried to catch as much as possible errors, but that doesn't help me more. </p>\n\n<p>Here the code : -SERVER-</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#define BUFFER_SIZE 20\n\ntypedef struct requete_client_serveur {\n    pid_t client_pid;               //PID's clients\n    char expression[BUFFER_SIZE-1]; //expression\n}requete_client_serveur;\n\nint main(){\n\n    char resultat[5];\n    int t1;\n    int mk;\n\n\n    //create server's named pipe\n    char *fifoServeur = \"serveurfifo\";\n    printf(\"%s\\n\", fifoServeur);\n\n    if((mk = mkfifo(fifoServeur, 0777)) == -1 ){\n        fprintf(stderr, \"mkfifo's server failed \\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    printf(\"Hello\\n\");\n\n    //open server's named pipe\n    if ((t1 = open(fifoServeur, O_RDONLY)) == -1){\n        fprintf(stderr, \"open server's named pipe failed \\n\");\n        exit(EXIT_FAILURE);\n    }\n\n\n    //While there are clients\n    while(1){\n\n        //For read the client's request\n        requete_client_serveur* rcs = malloc(sizeof(requete_client_serveur));\n        requete_client_serveur* message = (requete_client_serveur*) rcs;\n\n        //Read the expression\n        int nbytes = read(t1, rcs, sizeof(*rcs));\n        if (nbytes &lt;= 0)\n            fprintf(stderr, \"read from child failed\\n\");\n            exit(EXIT_FAILURE);\n\n\n        printf(\"expression the client %d send : %s\\n\",getpid(),message-&gt;expression);\n\n\n        //creation two tubes\n        int pipe1[2];\n        int pipe2[2];\n        pipe(pipe1);\n        pipe(pipe2);\n\n        //fork\n        int resultat_fork = fork();\n        if (resultat_fork == -1)\n            exit(EXIT_FAILURE);\n\n\n        if(resultat_fork!=0){ \n            printf(\"I am the parent\\n\");\n\n            close(pipe1[0]);\n            close(pipe2[1]);\n            /* We don't need pipe1's input and pipe2's output */\n\n            if (write(pipe1[1],message-&gt;expression, strlen(message-&gt;expression)) != strlen(message-&gt;expression))\n                fprintf(stderr, \"write to child failed\\n\");\n                exit(EXIT_FAILURE);\n\n            //open client's tube\n            int t2;\n            char fifoClient[10];\n\n            sprintf(fifoClient,\"%u\", message-&gt;client_pid);\n\n            printf(\"%s\\n\", fifoClient);\n\n            if ((t2 = open(fifoClient, O_WRONLY)) == -1){\n                fprintf(stderr, \"open client's named pipe failed \\n\");\n                exit(EXIT_FAILURE);\n            }\n\n\n            /* Write the answer into the client's tube (here t2) */\n            if(write(t2, resultat, sizeof(resultat)) != sizeof(resultat))\n                    fprintf(stderr, \"write to client (t2) failed\\n\");\n                    exit(EXIT_FAILURE);\n\n\n\n            close(pipe1[1]);\n            close(pipe2[0]);\n            /* We don't need them anymore */\n\n\n\n        }else{\n            printf(\"I am the children\\n\");\n\n            close(pipe1[1]);\n            close(pipe2[0]);\n            /* We don't need pipe1's output and pipe2's input */\n\n            dup2(pipe1[0], 0);  \n            dup2(pipe2[1], 1);\n            /* Redirection input &amp; output */\n\n            close(pipe1[0]);\n            close(pipe2[1]);\n            /* More closes */\n\n            execlp(\"bc\", \"bc\", NULL);\n            fprintf(stderr, \"Failed to execute bc\\n\");\n            exit(EXIT_FAILURE);\n        }\n\n    }\n}\n</code></pre>\n\n<p>CLIENT :</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n\n\n#define BUFFER_SIZE 20\n\ntypedef struct requete_client_serveur {\n    pid_t client_pid;               //PID's clients\n    char expression[BUFFER_SIZE-1]; //expression\n}requete_client_serveur;\n\nint main(){\n\n    int t1,t2;\n    char resultat[5];\n\n    //open serveur's named tube\n    char *fifoServeur = \"serveurfifo\";\n\n    if((t1 = open(fifoServeur, O_WRONLY)) == -1){\n        fprintf(stderr, \"open server's named pipe failed \\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    //create client's named tube using his pid as descriptor\n    pid_t pid = getpid();\n    char fifoClient[10];\n    int mk;\n\n    sprintf(fifoClient,\"%u\", pid);\n    printf(\"%s\\n\", fifoClient);\n    if((mk = mkfifo(fifoClient, 0777)) == -1){\n        fprintf(stderr, \"open client's named pipe failed \\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    printf(\"%d\\n\",mk);  \n\n    printf(\"cc\\n\");\n\n    //Open it as a reader\n    if ((t2 = open(fifoClient, O_RDONLY)) == -1){\n        fprintf(stderr, \"open client's named pipe failed \\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    printf(\"cc\\n\");\n\n    //preparation request\n    void* bc = malloc(sizeof(requete_client_serveur));\n    requete_client_serveur* rcs = (requete_client_serveur*) bc;\n\n\n    //expression we want to compute\n    char *expression = \"5*5\\n\";\n\n    rcs-&gt;client_pid = pid;\n    strcpy(rcs-&gt;expression, (char *)expression);\n\n\n    //write the request to the server\n    if (write(t1, rcs, sizeof(rcs)) != sizeof(rcs))\n        fprintf(stderr, \"write to server from client (t1) failed\\n\");\n\n\n    //read the answer\n    int nbytes = read(t2, resultat, sizeof(resultat));\n    if (nbytes &lt;= 0)\n            fprintf(stderr, \"read result failed\\n\");\n            exit(EXIT_FAILURE);\n\n    //printf it\n    printf(\"resultat: %s\\n\", resultat);\n}\n</code></pre>\n\n<p>When starting the two process, I keep having nothing from the server and the client (no error or sometimes if I'm lucky). If you have any idea to help me work that system, I would be very grateful. I don't necessary need the answer, I really want to understand how does that work.\nThank you for reading (please forgive my grammatical mistakes, english isn't my main language).</p>\n"}, {"tags": ["c", "list", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 1757, "user_id": 7654934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80d8b0b086c4f454c7d441928fcf9631?s=128&d=identicon&r=PG&f=1", "display_name": "N. Ivanov", "link": "https://stackoverflow.com/users/7654934/n-ivanov"}, "edited": false, "score": 3, "creation_date": 1513161451, "post_id": 47790915, "comment_id": 82542820, "body": "PLEASE! format your code properly"}, {"owner": {"reputation": 581, "user_id": 5863848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3w85.jpg?s=128&g=1", "display_name": "NishanthSpShetty", "link": "https://stackoverflow.com/users/5863848/nishanthspshetty"}, "edited": false, "score": 0, "creation_date": 1513161499, "post_id": 47790915, "comment_id": 82542849, "body": "What is the issue ?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1513161550, "post_id": 47790915, "comment_id": 82542887, "body": "When asking a question, please actually ask a question."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1513161678, "post_id": 47790915, "comment_id": 82542978, "body": "Unrelated, but why did you put a en blank line between <i>all</i> lines of your program?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1513161811, "post_id": 47790915, "comment_id": 82543077, "body": "On this line  <code>last-&gt;next = first;</code> <code>first</code> has not yet been initialized. There are most likely more problems though."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1513162203, "post_id": 47790915, "comment_id": 82543316, "body": "BTW, you forgot to show us <code>the </code>cnode()` function."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1513163610, "post_id": 47790915, "comment_id": 82544247, "body": "@Michael Walz In general the more blank lines in code the higher qualification of the programmer."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1513162484, "creation_date": 1513162484, "answer_id": 47791291, "question_id": 47790915, "link": "https://stackoverflow.com/questions/47790915/find-function-in-linked-list-in-c-programming/47791291#47791291", "title": "find function in linked list in c programming", "body": "<p>According to the C Standard the function <code>main</code> without parameters shall be declared like</p>\n\n<pre><code>int main( void )\n</code></pre>\n\n<p>Secondly this declaration of the structure</p>\n\n<pre><code>struct node{\n\n    int data;\n\n    node *next;\n\n};\n</code></pre>\n\n<p>is not a valid C declaration.</p>\n\n<p>You should write</p>\n\n<pre><code>struct node{\n\n    int data;\n\n    struct node *next;\n\n};\n\ntypedef struct node node;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>typedef struct node{\n\n    int data;\n\n    struct node *next;\n\n} node;\n</code></pre>\n\n<p>You have to initialize at least node <code>first</code> with <code>NULL</code>. Otherwise the program will have undefined behavior.</p>\n\n<pre><code>node *first = NULL,*last;\n</code></pre>\n\n<p>The parameter <code>i</code> is not used within the function <code>find</code>. So it may be removed.</p>\n\n<pre><code>void find(node *first, int d);\n</code></pre>\n\n<p>The function definition can look at least like</p>\n\n<pre><code>void find( node *first, int d )\n{\n    int count = 0;\n\n    while ( first != NULL &amp;&amp; first-&gt;data != d )\n    {\n        first = first-&gt;next;\n        ++count;\n    }\n\n    if ( first != NULL )\n    {\n        printf(\"%d\",count);\n    }\n    else\n    {\n        printf(\"\\n NOT FOUND ! \");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8923788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b23d3aed4456e165afbf6d10793c9dc?s=128&d=identicon&r=PG&f=1", "display_name": "arina sbz", "link": "https://stackoverflow.com/users/8923788/arina-sbz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1513162859, "creation_date": 1513161370, "last_edit_date": 1513162859, "question_id": 47790915, "link": "https://stackoverflow.com/questions/47790915/find-function-in-linked-list-in-c-programming", "title": "find function in linked list in c programming", "body": "<p>I wanna write a program about linked list that gets a number and if the number was equal to the one of the nodes' data , gives the number of that node .\nlike the datas in 3 nodes are</p>\n\n<pre><code>123\n56\n78\n</code></pre>\n\n<p>and it gets a number like 56 and its equal to the second node's data so the output should be 2.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\n#include&lt;stdlib.h&gt;\n\nstruct node{\n\n    int data;\n\n    node *next;\n\n};\n\nnode* cnode();\n\nvoid find(node *first,int i,int d);\n\nint main()\n{\n\n    node *first,*last;\n\n    int n,i,x,d;\n\n    printf(\" How many nodes ?\\t\");\n\n    scanf(\"%d\",&amp;x);\n\n    for(i=1;i&lt;=x;i++){\n\n        last=cnode();\n\n        last-&gt;next=first;\n\n        first=last;\n\n    }\n\n    printf(\"\\n enter a particular data:\\t\");\n\n    scanf(\"%d\",&amp;d);\n\n    printf(\"\\n number of the particular node:\\t\");\n\n    find(first,i,d);\n\n}\n\nvoid find(node *first,int i,int d){\n\n    int count=0;\n\n    while (first != NULL)\n\n    {\n\n        if (first-&gt;data == d)\n\n           count++;\n\n        first = first-&gt;next;\n\n    }\n\n    if(count != 0){\n\n        printf(\"%d\",count);\n\n    }\n\n    if(count == 0){\n\n        printf(\"\\n NOT FOUND ! \");\n\n    }\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "process", "message-queue"], "comments": [{"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 1, "creation_date": 1513162844, "post_id": 47790773, "comment_id": 82543724, "body": "Might need to use IPC_RMID with msgctl when done with a queue id?  See <a href=\"http://man7.org/linux/man-pages/man2/msgctl.2.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man2/msgctl.2.html</a>"}, {"owner": {"reputation": 93, "user_id": 9044760, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1544801025597539/picture?type=large", "display_name": "Bryan Shtjefni", "link": "https://stackoverflow.com/users/9044760/bryan-shtjefni"}, "reply_to_user": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1513163522, "post_id": 47790773, "comment_id": 82544182, "body": "I tried removing the queues manually but still nothing, it is fine when I use a normal key tough, but when I read from an array it just doesnt work well"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1513169767, "post_id": 47790773, "comment_id": 82547990, "body": "the posted code does not compile!  it is missing a lot of necessary statements."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1513169938, "post_id": 47790773, "comment_id": 82548092, "body": "use <code>ftok()</code> to generate the keys, do not hard code them."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1513170072, "post_id": 47790773, "comment_id": 82548188, "body": "use <code>msgctl()</code> with <code>IPC_RMID</code> to remove any old instance of the message queue before creating a new message queue"}, {"owner": {"reputation": 93, "user_id": 9044760, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1544801025597539/picture?type=large", "display_name": "Bryan Shtjefni", "link": "https://stackoverflow.com/users/9044760/bryan-shtjefni"}, "edited": false, "score": 0, "creation_date": 1513170166, "post_id": 47790773, "comment_id": 82548264, "body": "What is the difference between hard coding a key and using ftok?"}], "owner": {"reputation": 93, "user_id": 9044760, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1544801025597539/picture?type=large", "display_name": "Bryan Shtjefni", "link": "https://stackoverflow.com/users/9044760/bryan-shtjefni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1513160945, "creation_date": 1513160945, "question_id": 47790773, "link": "https://stackoverflow.com/questions/47790773/message-queue-passing-old-values-c", "title": "Message queue passing old values C", "body": "<p>I am trying to develop a simple message queue in C but I am running towards some frustrating problems. I have a number of 10 processes that are divided in two groups of five. Each of the processes of this group must speak with only one of the processes of the other group, and to do that I have assigned different keys to the message queue creation (sorry if it is not the best idea but i'm new to C and trying to adapt). My main issue though is that when I run the code the first time if tells me that 'No such file or directory exists\" as a mq error. When I run it from this point on the server receives the message just fine, but it receives the 'old' messages, which are the ones that the client has sent the prior execution. I've been trying to look for what to change but haven't come up with anything. This is my code:</p>\n\n<p><strong>server.c</strong></p>\n\n<pre><code>int keys[] = {1111, 1112, 1113, 1114, 1115};\n\n\nint msqid;\nkey_t keymq1;\nstruct msgbuf rcvbuffer;\nkeymq1 = keys[indiceProcesso];\n\nif ((msqid = msgget(keymq1, 0666)) &lt; 0)\n    die(\"msgget()\");\n\n\nif (msgrcv(msqid, &amp;rcvbuffer, MAXSIZE, 1, 0) &lt; 0)\n    die(\"msgrcv\");\n\nprintf(\"Messaggio ricevuto da A con pid %d: %s\\n\",getpid(), rcvbuffer.mtext);\n</code></pre>\n\n<p><strong>client.c</strong></p>\n\n<pre><code>    int msqid1;\n    int msgflg = IPC_CREAT | 0666;\n    key_t keymq1;\n    struct msgbuf sbuf;\n    size_t buflen;\n    keymq1 = keys[indiceProcesso];\n    sbuf.mtype = 1;\n\n\n    if ((msqid1 = msgget(keymq1, msgflg )) &lt; 0)\n        die(\"msgget\");\n\n    sbuf.mtype = 1;\n\n\n    strcpy(sbuf.mtext,\"My message\");\n    buflen = strlen(sbuf.mtext) + 1 ;\n\n    if (msgsnd(msqid1, &amp;sbuf, buflen, IPC_NOWAIT) &lt; 0)\n    {\n        printf (\"%d, %ld, %s, %zu\\n\", msqid1, sbuf.mtype, sbuf.mtext, buflen);\n        die(\"msgsnd\");\n    }\n\n    else \n        printf(\"Message Sent\\n\");\n</code></pre>\n\n<p>Hope you can help me out and thank you for your time.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 5, "creation_date": 1513158538, "post_id": 47789915, "comment_id": 82540917, "body": "because the printf format is incorrect."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1513158547, "post_id": 47789915, "comment_id": 82540922, "body": "Because <code>%u</code> prints an <code>unsigned</code> and not an <code>unsigned long long</code>.  Use <code>%llu</code> instead."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1513158582, "post_id": 47789915, "comment_id": 82540946, "body": "debug your program you&#39;ll get a non-zero value. From memory: <code>%llu</code> should do it."}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1513159262, "post_id": 47789979, "comment_id": 82541360, "body": "You don&#39;t mind my edit? This is so I can upvote this helpful answer in clear conscience."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1513159409, "post_id": 47789979, "comment_id": 82541465, "body": "You have adequate disclaimers so this answer is upvote material."}], "tags": [], "owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1513159240, "last_edit_date": 1513159240, "creation_date": 1513158652, "answer_id": 47789979, "question_id": 47789915, "link": "https://stackoverflow.com/questions/47789915/when-size-is-64-bits-then-why-shifting-left-32-times-give-a-zero/47789979#47789979", "title": "When size is 64 bits then why shifting left 32 times give a zero", "body": "<p><code>n</code> may be 64 bits, but your <code>printf()</code> call only expects 32 bits. This is undefined behavior. What appears to be happening in this particular case is that the remaining bits are cut off, and only the apparently low order 32 bits are displayed. Other platforms/compilers/machines might do something entirely different.</p>\n\n<p>You can fix that by passing the correct integer type in the format string:</p>\n\n<pre><code>printf(\"%llu\",n);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1513159599, "post_id": 47790040, "comment_id": 82541575, "body": "&quot;zd&quot; doesn&#39;t work on Windows unless you enable built-in gcc printf."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1513159733, "post_id": 47790040, "comment_id": 82541662, "body": "Microsoft has its own implementation of <code>printf</code> (and it sucks). gcc relies on it unless you enable some compilation directive (use builtin printf that kind of crap)"}, {"owner": {"reputation": 29, "user_id": 9091699, "user_type": "registered", "profile_image": "https://graph.facebook.com/1167415376723825/picture?type=large", "display_name": "Muhammad Fuzail", "link": "https://stackoverflow.com/users/9091699/muhammad-fuzail"}, "edited": false, "score": 0, "creation_date": 1513159825, "post_id": 47790040, "comment_id": 82541706, "body": "keeping aside the issues of printf(). does the back end mathematics will effect the results ? Because I am using n as a 64bit number in my code."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 29, "user_id": 9091699, "user_type": "registered", "profile_image": "https://graph.facebook.com/1167415376723825/picture?type=large", "display_name": "Muhammad Fuzail", "link": "https://stackoverflow.com/users/9091699/muhammad-fuzail"}, "edited": false, "score": 0, "creation_date": 1513159936, "post_id": 47790040, "comment_id": 82541772, "body": "@MuhammadFuzail: I&#39;m not sure I understand what you mean. The only hazard with an ull type is a potential division by zero."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 4, "last_activity_date": 1513169561, "last_edit_date": 1513169561, "creation_date": 1513158795, "answer_id": 47790040, "question_id": 47789915, "link": "https://stackoverflow.com/questions/47789915/when-size-is-64-bits-then-why-shifting-left-32-times-give-a-zero/47790040#47790040", "title": "When size is 64 bits then why shifting left 32 times give a zero", "body": "<p>The program behaviour is undefined on two counts, and you're on thin ice on another point:</p>\n\n<ol>\n<li><p>Use <code>\"%zu\"</code> as the format specifier for the <code>sizeof</code> return type. Using <code>'%d'</code> wreaks havoc, particularly if you pass multiple arguments to <code>printf</code>.</p></li>\n<li><p><code>unsigned long long</code> is <em>at least</em> 64 bits. That doesn't matter in your case but don't assume it's <em>always</em> 64 bits. And the format specifier needs to be <code>%llu</code>.</p></li>\n</ol>\n\n<p>Reference: <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/c/io/fprintf</a></p>\n"}], "owner": {"reputation": 29, "user_id": 9091699, "user_type": "registered", "profile_image": "https://graph.facebook.com/1167415376723825/picture?type=large", "display_name": "Muhammad Fuzail", "link": "https://stackoverflow.com/users/9091699/muhammad-fuzail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1513169561, "creation_date": 1513158465, "question_id": 47789915, "link": "https://stackoverflow.com/questions/47789915/when-size-is-64-bits-then-why-shifting-left-32-times-give-a-zero", "title": "When size is 64 bits then why shifting left 32 times give a zero", "body": "<pre><code>unsigned long long n=123;\nprintf(\"size of n:%d\\n\",sizeof(n)); //output of this line is \"size of n:8\"\nn=n&lt;&lt;32;\nprintf(\"%u\",n); //output of this line is \"0\"\n</code></pre>\n\n<p>why output is 0 when the size is 64bits\noutput 0 is justified only if size is 32bits</p>\n"}, {"tags": ["c", "linux", "binary", "system"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1513158478, "post_id": 47789854, "comment_id": 82540879, "body": "when loaded, the code resides in read-only segments in most systems, but you can change the data by attaching a debugger to it and change data dynamically if you have the symbols"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1513158481, "post_id": 47789854, "comment_id": 82540882, "body": "Yeah, it&#39;s possible in principle. A debugger may attach to a process and if you pause it, even allow you to modify the process memory (including executable pages). It&#39;s not trivial to accomplish however."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1513161953, "post_id": 47789854, "comment_id": 82543145, "body": "@IporSircer.: Seems got the context wrong. but here also you ar ebasically changing the mode...from kernel to user. Well to the overall notion the answer contradicts thinking that Op wants to run the user level program without changing the mode (kernel vs user mode). I will delete the answer as it clearly not the intention of the author."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1513162230, "post_id": 47789854, "comment_id": 82543333, "body": "You can see in the tutorial you linked <i>If a debugger attaches itself to another program already loaded in memory, it requests special permission from the operating system to take control of the program for the purpose of debugging</i>. This is the idea I wanted to emphasize. But again if you use a debugger you are basically changing the code which is being debugged. And really nobody was thinking about changing a code which is being run on kernel mode(it&#39;s not possible). Neither the C language nor any compiler supports it. But yes I guess I missed the debugger."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1513170746, "post_id": 47789854, "comment_id": 82548659, "body": "Is your DOS game open source? Did you consider to use some open source game or game engine? Is you overall goal to play that game, or to make a better game? What are your programming skills?"}, {"owner": {"reputation": 29, "user_id": 9092993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa31f1530993bc222276f35a625a879?s=128&d=identicon&r=PG&f=1", "display_name": "MegaBastor", "link": "https://stackoverflow.com/users/9092993/megabastor"}, "edited": false, "score": 0, "creation_date": 1513173381, "post_id": 47789854, "comment_id": 82550372, "body": "Hi, thanks for all that replies. This DOS game is not open source but is abandonware and can be found here <a href=\"http://www.bestoldgames.net/eng/old-games/dangerous-dave.php\" rel=\"nofollow noreferrer\">bestoldgames.net/eng/old-games/dangerous-dave.php</a> It&#39;s the first game i&#39;ve played on my very first computer so is all about nostalgia and a good reason tu try hacking/modding no further application  I&#39;m software embedded system engineer and the more i know is about DSP and baremetal (without OS) application. I know basics about linux system but happy to learn ;)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1513190108, "post_id": 47789854, "comment_id": 82560974, "body": "Is your goal to rewrite <i>Dangerous Dave</i> as proper, open source, game for Linux, or is just to play that game on Linux? Your question should have additional motivation and context (so consider editing it once again, please)."}, {"owner": {"reputation": 29, "user_id": 9092993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa31f1530993bc222276f35a625a879?s=128&d=identicon&r=PG&f=1", "display_name": "MegaBastor", "link": "https://stackoverflow.com/users/9092993/megabastor"}, "edited": false, "score": 0, "creation_date": 1513240201, "post_id": 47789854, "comment_id": 82578905, "body": "No problem I will precise my goal !  If you go to this page <a href=\"http://www.shikadi.net/moddingwiki/Dangerous_Dave\" rel=\"nofollow noreferrer\">shikadi.net/moddingwiki/Dangerous_Dave</a>, you can see that at the offset 0x26e0a you have an array for each of 10 levels. Each level is a map of 10x100 tiles (each tiles is coded further in the code as 16x16 image but doesn&#39;t matter here). In the array of 1000 cell (10x100) you can set a value from 0 (void player can pass) to 52 to chose the tile you want to show in your map."}, {"owner": {"reputation": 29, "user_id": 9092993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa31f1530993bc222276f35a625a879?s=128&d=identicon&r=PG&f=1", "display_name": "MegaBastor", "link": "https://stackoverflow.com/users/9092993/megabastor"}, "edited": false, "score": 0, "creation_date": 1513240205, "post_id": 47789854, "comment_id": 82578907, "body": "If you edit the binary game file with hex editor you can change these values and launching the game with DOS BOX to see your game level modifications  - I don&#39;t want to rewrite the game - I&#39;m already able to launch it in linux through DOSBOX - I&#39;m just looking for a way to change the value of the array dynamically (by an external program in C, shell script, or hex editor,..) in order to modifying the map during I play just for fun"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1513241948, "post_id": 47789854, "comment_id": 82579856, "body": "Please don&#39;t add comments to your own question, but <b>edit your question</b> to improve it. If possible, show some <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> - otherwise your question is too broad."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1513242263, "post_id": 47789854, "comment_id": 82580064, "body": "Also tell us how much efforts are you willing to spend (you might need weeks of work, is it worthwhile just to play some old game; you need to decide!)"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 9092993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa31f1530993bc222276f35a625a879?s=128&d=identicon&r=PG&f=1", "display_name": "MegaBastor", "link": "https://stackoverflow.com/users/9092993/megabastor"}, "edited": false, "score": 0, "creation_date": 1513173690, "post_id": 47789983, "comment_id": 82550572, "body": "Thanks for all your links  I&#39;m software embedded system engineer and the more i know is about DSP and baremetal (without OS) application. I know basics about linux system but happy to learn ;)"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1513242873, "last_edit_date": 1513242873, "creation_date": 1513158662, "answer_id": 47789983, "question_id": 47789854, "link": "https://stackoverflow.com/questions/47789854/is-it-possible-to-modify-a-c-program-which-is-running/47789983#47789983", "title": "Is it possible to modify a C program which is running?", "body": "<blockquote>\n  <p>I was wondering if it is possible to modify a piece of C program (or other binary) while it is running ?</p>\n</blockquote>\n\n<p>Not in standard (and portable) <a href=\"https://en.wikipedia.org/wiki/C11_(C_standard_revision)\" rel=\"nofollow noreferrer\">C11</a>. Read the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">n1570</a> specification to check. Notice that most of the time in practice, it is not the C <a href=\"https://en.wikipedia.org/wiki/Source_code\" rel=\"nofollow noreferrer\">source</a> program (made of several <a href=\"https://en.wikipedia.org/wiki/Translation_unit_(programming)\" rel=\"nofollow noreferrer\">translation units</a>) which is running, but an <a href=\"https://en.wikipedia.org/wiki/Executable\" rel=\"nofollow noreferrer\">executable</a> result of some <a href=\"https://en.wikipedia.org/wiki/Compiler\" rel=\"nofollow noreferrer\">compiler</a> &amp; <a href=\"https://en.wikipedia.org/wiki/Linker_(computing)\" rel=\"nofollow noreferrer\">linker</a>.</p>\n\n<hr>\n\n<p>However, on Linux (e.g. Debian/Sid/x86-64) you could use some of the following tricks (often with function pointers):</p>\n\n<ul>\n<li><p>use <a href=\"https://en.wikipedia.org/wiki/Plug-in_(computing)\" rel=\"nofollow noreferrer\">plugins</a>, so design your program to accept them and define conventions about your plugins. A plugin is a shared object <a href=\"https://en.wikipedia.org/wiki/Executable_and_Linkable_Format\" rel=\"nofollow noreferrer\">ELF</a> file (some <code>*.so</code>) containing <a href=\"https://en.wikipedia.org/wiki/Position-independent_code\" rel=\"nofollow noreferrer\">position-independent code</a> (so it should be compiled with specific options). You'll use <a href=\"http://man7.org/linux/man-pages/man3/dlopen.3.html\" rel=\"nofollow noreferrer\">dlopen(3)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man3/dlsym.3.html\" rel=\"nofollow noreferrer\">dlsym(3)</a> to do the <a href=\"https://en.wikipedia.org/wiki/Dynamic_loading\" rel=\"nofollow noreferrer\">dynamic loading</a> of the plugin.</p></li>\n<li><p>use some <a href=\"https://en.wikipedia.org/wiki/Just-in-time_compilation\" rel=\"nofollow noreferrer\">JIT-compiling</a> library, like <a href=\"https://gcc.gnu.org/onlinedocs/jit/\" rel=\"nofollow noreferrer\">GCCJIT</a> or <a href=\"http://llvm.org/\" rel=\"nofollow noreferrer\">LLVM</a> or <a href=\"https://www.gnu.org/software/libjit/\" rel=\"nofollow noreferrer\">libjit</a> or <a href=\"https://github.com/asmjit/asmjit\" rel=\"nofollow noreferrer\">asmjit</a>.</p></li>\n<li><p>alter your <a href=\"https://en.wikipedia.org/wiki/Virtual_address_space\" rel=\"nofollow noreferrer\">virtual address space</a> (not recommended) manually, using <a href=\"http://man7.org/linux/man-pages/man2/mprotect.2.html\" rel=\"nofollow noreferrer\">mprotect(2)</a> and <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow noreferrer\">mmap(2)</a>; then you could overwrite something in a <a href=\"https://en.wikipedia.org/wiki/Code_segment\" rel=\"nofollow noreferrer\">code segment</a> (you really should not do that). This might be tricky (e.g. because of <a href=\"https://en.wikipedia.org/wiki/Address_space_layout_randomization\" rel=\"nofollow noreferrer\">ASLR</a>) and brittle.</p></li>\n<li><p>perhaps use debug related facilities, either with <a href=\"http://man7.org/linux/man-pages/man2/ptrace.2.html\" rel=\"nofollow noreferrer\">ptrace(2)</a> or by scripting or <a href=\"https://sourceware.org/gdb/onlinedocs/gdb/Extending-GDB.html\" rel=\"nofollow noreferrer\">extending</a> the <code>gdb</code> debugger.</p></li>\n</ul>\n\n<p>I suggest to play a bit with <code>/proc/</code> (see <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\">proc(5)</a>) and try at least to run in some terminal the following commands</p>\n\n<pre><code> cat /proc/self/maps\n cat /proc/$$/maps\n ls /proc/$$/fd/\n</code></pre>\n\n<p>(and read enough things to understand their outputs) to understand a bit more what a <a href=\"https://en.wikipedia.org/wiki/Process_(computing)\" rel=\"nofollow noreferrer\">process</a> \"is\".</p>\n\n<p>So overwriting your <a href=\"https://en.wikipedia.org/wiki/Code_segment\" rel=\"nofollow noreferrer\">text segment</a> (if you really need to do that) is possible, but perhaps more tricky than what you believe !</p>\n\n<p><sup>(do you mind working for several weeks or months simply to improve some old gaming experience?)</sup></p>\n\n<hr>\n\n<p>Read also about <a href=\"https://en.wikipedia.org/wiki/Homoiconicity\" rel=\"nofollow noreferrer\">homoiconic</a> programming languages (try Common Lisp with <a href=\"http://sbcl.org/\" rel=\"nofollow noreferrer\">SBCL</a>), about <a href=\"https://en.wikipedia.org/wiki/Dynamic_software_updating\" rel=\"nofollow noreferrer\">dynamic software updating</a>, about <a href=\"https://en.wikipedia.org/wiki/Persistence_(computer_science)\" rel=\"nofollow noreferrer\">persistence</a>, about <a href=\"https://en.wikipedia.org/wiki/Application_checkpointing\" rel=\"nofollow noreferrer\">application checkpointing</a>, and about <a href=\"https://en.wikipedia.org/wiki/Operating_system\" rel=\"nofollow noreferrer\">operating systems</a> (I recommend: <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/\" rel=\"nofollow noreferrer\"><em>Operating Systems: Three Easy Pieces</em></a> &amp; <a href=\"http://osdev.org/\" rel=\"nofollow noreferrer\">OsDev</a> wiki)</p>\n\n<hr>\n\n<blockquote>\n  <p>I work under Debian 64bit</p>\n</blockquote>\n\n<p>I suppose you have programming skills and do know C. Then you should read <a href=\"http://richard.esplins.org/static/downloads/linux_book.pdf\" rel=\"nofollow noreferrer\">ALP</a> or some newer Linux programming book (and of course look into <a href=\"http://man7.org/linux/man-pages/man2/intro.2.html\" rel=\"nofollow noreferrer\">intro(2)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man2/syscalls.2.html\" rel=\"nofollow noreferrer\">syscalls(2)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man3/intro.3.html\" rel=\"nofollow noreferrer\">intro(3)</a> and other man pages etc...)</p>\n\n<p>BTW, in your particular case, perhaps the \"OS\" is DOSBOX (acting as some virtual machine). You might use <a href=\"http://man7.org/linux/man-pages/man1/strace.1.html\" rel=\"nofollow noreferrer\">strace(1)</a> on DOSBOX (or on other commands or processes), or study its source code.</p>\n\n<hr>\n\n<p>You mention games in your question. If you want to code some, consider libraries like <a href=\"https://www.libsdl.org/\" rel=\"nofollow noreferrer\">SDL</a>, <a href=\"https://www.sfml-dev.org/\" rel=\"nofollow noreferrer\">SFML</a>, <a href=\"http://qt.io/\" rel=\"nofollow noreferrer\">Qt</a>, <a href=\"http://gtk.org/\" rel=\"nofollow noreferrer\">GTK+</a>, ....</p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 9092993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa31f1530993bc222276f35a625a879?s=128&d=identicon&r=PG&f=1", "display_name": "MegaBastor", "link": "https://stackoverflow.com/users/9092993/megabastor"}, "edited": false, "score": 1, "creation_date": 1513240592, "post_id": 47801443, "comment_id": 82579104, "body": "Can you be more specific or giving an example because all attempt I&#39;ve made that way have ended by a &quot;Segmentation Fault &quot; ^^"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1513242022, "post_id": 47801443, "comment_id": 82579899, "body": "In practice, see the third bullet of my answer. You probably need to use <code>mprotect</code> or <code>mmap</code>and you really should practically not try to change your code segment. And in the details it could be quite tricky and very brittle. So I don&#39;t recommend doing that."}, {"owner": {"reputation": 509, "user_id": 8857328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a43855efb44db02b57d0f7253394882?s=128&d=identicon&r=PG&f=1", "display_name": "VladP", "link": "https://stackoverflow.com/users/8857328/vladp"}, "edited": false, "score": 0, "creation_date": 1513266220, "post_id": 47801443, "comment_id": 82595967, "body": "I have found a smart and thorough description of it: <a href=\"https://shanetully.com/2013/12/writing-a-self-mutating-x86_64-c-program/\" rel=\"nofollow noreferrer\">shanetully.com/2013/12/writing-a-self-mutating-x86_64-c-prog&zwnj;&#8203;ram</a>"}], "tags": [], "owner": {"reputation": 509, "user_id": 8857328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a43855efb44db02b57d0f7253394882?s=128&d=identicon&r=PG&f=1", "display_name": "VladP", "link": "https://stackoverflow.com/users/8857328/vladp"}, "is_accepted": false, "score": 1, "last_activity_date": 1513196154, "creation_date": 1513196154, "answer_id": 47801443, "question_id": 47789854, "link": "https://stackoverflow.com/questions/47789854/is-it-possible-to-modify-a-c-program-which-is-running/47801443#47801443", "title": "Is it possible to modify a C program which is running?", "body": "<p>Yes you can modify piece of code while running in C. You got to have pointer to your program memory area, and compiled pieces of code that you want to change. Naturally this is considered to be a dangerous practice, with lot of restrictions, and with many possibilities for error. However, this was practice at olden times when the memory was precious.</p>\n"}], "owner": {"reputation": 29, "user_id": 9092993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa31f1530993bc222276f35a625a879?s=128&d=identicon&r=PG&f=1", "display_name": "MegaBastor", "link": "https://stackoverflow.com/users/9092993/megabastor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1513242873, "creation_date": 1513158252, "question_id": 47789854, "link": "https://stackoverflow.com/questions/47789854/is-it-possible-to-modify-a-c-program-which-is-running", "title": "Is it possible to modify a C program which is running?", "body": "<p>i was wondering if it is possible to modify a piece of C program (or other binary) while it is running ?</p>\n\n<p>I wrote this small C program :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nstatic uint32_t gcui32_val_A = 0xAABBCCDD;\n\nint main(int argc, char *argv[])  {\n\n    uint32_t ui32_val_B = 0;\n    uint32_t ui32_cpt = 0;\n\n    printf(\"\\n\\n Program SHOW\\n\\n\");\n\n    while(1) {\n\n        if(gcui32_val_A != ui32_val_B) {\n            printf(\"Value[%d] of A : %x\\n\",ui32_cpt,gcui32_val_A);\n            ui32_val_B = gcui32_val_A;\n            ui32_cpt++;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>With a Hex editor i'm able to find \"0xAABBCCDD\" and modify it when the program is stopped. The modification works when I relauch the program. Cool !</p>\n\n<p>I would like to do this when the program s running is it possible ?</p>\n\n<p>Here is a simple example to understand the phenomena and play a little with it but my true project is bigger.</p>\n\n<ul>\n<li>I have an old DOS game called Dangerous Dave.</li>\n<li>I'm able to modify the tiles by simply editing the binary (thanks to <a href=\"http://www.shikadi.net/moddingwiki/Dangerous_Dave\" rel=\"nofollow noreferrer\">http://www.shikadi.net/moddingwiki/Dangerous_Dave</a>)</li>\n<li>I developped a small editor that do this pretty well and had fun with it.</li>\n<li>I launch the DOS game by using DOSBOX, it works !</li>\n</ul>\n\n<p>I would like to do this dynamically when the game is running. Is it possible ?</p>\n\n<p>PS : I work under Debian 64bit</p>\n\n<p>regards</p>\n"}, {"tags": ["c++", "c", "dll", "fortran", "fortran-iso-c-binding"], "comments": [{"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1513159534, "post_id": 47789533, "comment_id": 82541534, "body": "You haven&#39;t a &quot;string array&quot; in Fortran.  You have an array of a derived type called <code>string</code>."}, {"owner": {"reputation": 171, "user_id": 8079802, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/292fddeceee3f7a6f3f9ef0b34dba44b?s=128&d=identicon&r=PG&f=1", "display_name": "techie", "link": "https://stackoverflow.com/users/8079802/techie"}, "reply_to_user": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1513160384, "post_id": 47789533, "comment_id": 82542089, "body": "@francescalus Is it achievable?? What will be the correct way to pass array??"}, {"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 1, "creation_date": 1513160724, "post_id": 47789533, "comment_id": 82542321, "body": "Have you seen <a href=\"https://stackoverflow.com/q/9686532/3157076\">this question</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 8079802, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/292fddeceee3f7a6f3f9ef0b34dba44b?s=128&d=identicon&r=PG&f=1", "display_name": "techie", "link": "https://stackoverflow.com/users/8079802/techie"}, "is_accepted": false, "score": 0, "last_activity_date": 1513167046, "last_edit_date": 1513167046, "creation_date": 1513163857, "answer_id": 47791724, "question_id": 47789533, "link": "https://stackoverflow.com/questions/47789533/passing-string-array-from-fortran-to-c-c-dll-and-get-array-with-changed-values/47791724#47791724", "title": "Passing string array from Fortran to C/C++ DLL and get array with changed values", "body": "<p>Finally made that working. Here is the solution.</p>\n\n<pre><code> program Call_CPP\n use iso_c_binding, only: c_associated, c_loc, c_ptr\n\n    INTERFACE\n       SUBROUTINE doubleijk_(stringPtrs) BIND(C,NAME='doubleijk_')\n        use iso_c_binding      \n        TYPE(C_PTR), DIMENSION(3) :: stringPtrs\n\n       END SUBROUTINE doubleijk_\n\n    END INTERFACE\n\n    TYPE(C_PTR), DIMENSION(3) :: stringPtr\n    CHARACTER(LEN=20), DIMENSION(3), TARGET :: stringArray\n       DO ns = 1, 3\n           stringArray(ns) = \"My String\"//char(0)\n           stringPtr(ns) = c_loc(stringArray(ns))\n       END DO\n\n    ! Body of Call_CPP\n\n    call doubleijk_(stringPtr) !Call C function\n\n     DO ns = 1, 3\n            print *, stringArray(ns) !print array after call-changed values\n     END DO\n\n    end program Call_CPP\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 8079802, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/292fddeceee3f7a6f3f9ef0b34dba44b?s=128&d=identicon&r=PG&f=1", "display_name": "techie", "link": "https://stackoverflow.com/users/8079802/techie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 445, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513167046, "creation_date": 1513157147, "last_edit_date": 1513159436, "question_id": 47789533, "link": "https://stackoverflow.com/questions/47789533/passing-string-array-from-fortran-to-c-c-dll-and-get-array-with-changed-values", "title": "Passing string array from Fortran to C/C++ DLL and get array with changed values", "body": "<p>I am creating a C/C++ DLL which accepts <code>char*[]</code> (String array), changes the value in array and return back.</p>\n\n<p>My C/C++ implementation:</p>\n\n<pre><code>int doubleijk_(char* data[]) // what should be the return type ???\n{\n   // code to change array elements\n\n   return 0;\n}\n</code></pre>\n\n<p>In Fortran (using ifort) I am calling the DLL's function like this:</p>\n\n<pre><code>module variables\n  type string\n    character(len=:), allocatable :: str\n  end type string\nend module variables\n\n\nprogram Call_CPP\n    use variables\n    type(string) :: array(3) \n    array = [string('xyza'), string('abcd'), string('mnopqrs')]\n\n    INTERFACE\n! How to write SUBROUTINE for array\n\n       SUBROUTINE doubleijk_(arr) BIND(C,NAME='doubleijk_')\n\n!???????WHAT SHOULD BE SUBROUTINE FOR ARRAY OF STRINGS????????\n\n       END SUBROUTINE doubleijk_\n\n    END INTERFACE\n\n    ! Body of Call_CPP\n\n    call doubleijk_(array)\n\n ! print values of array after call\n\n    end program Call_CPP\n</code></pre>\n\n<p>I am able to pass string, integer from Fortran and got changed value from C/C++. What I need is to pass string array from Fortran to C/C++ and get back the array with changed values.  How do I do this?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1513156701, "post_id": 47789381, "comment_id": 82539749, "body": "Please post the code here."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1513156810, "post_id": 47789381, "comment_id": 82539823, "body": "Well, as <b>text</b>."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1513156841, "post_id": 47789381, "comment_id": 82539847, "body": "Best would be if you can write the code over here instead of linking or posting image."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1513156857, "post_id": 47789381, "comment_id": 82539856, "body": "<i>Questions seeking debugging help (why isn&#39;t this code working?) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.</i>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1513157128, "post_id": 47789381, "comment_id": 82540045, "body": "...and the error message?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1513157144, "post_id": 47789381, "comment_id": 82540054, "body": "@coderredoc go ahead, undelete the answer now."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1513157226, "post_id": 47789381, "comment_id": 82540109, "body": "@SouravGhosh.: But I guess question will be deleted soon."}, {"owner": {"reputation": 31, "user_id": 8829883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7564fca702cd16d8c1fab5bc54f342dc?s=128&d=identicon&r=PG&f=1", "display_name": "Adria", "link": "https://stackoverflow.com/users/8829883/adria"}, "edited": false, "score": 1, "creation_date": 1513157276, "post_id": 47789381, "comment_id": 82540132, "body": "The error message is in the picture above the code..."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1513157307, "post_id": 47789381, "comment_id": 82540155, "body": "@coderredoc, well, there&#39;s that. that&#39;s why it&#39;s not a good idea to invest your effort in answering these questions. Just my two cents. :)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1513157338, "post_id": 47789381, "comment_id": 82540173, "body": "@Adria OK, and you think text in images are <i>searchable</i>?"}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 1, "creation_date": 1513157364, "post_id": 47789381, "comment_id": 82540191, "body": "Just rename the <code>mcd</code> function and call it. Functions in C have global namespace (unless declared <code>static</code> which makes then visible within the file). Using a variable with the same name as a function inside a function hides the function (with the same name as the variable). Hence, your compiler thinks <code>mcd</code> is the local <code>int</code> and complains that you are trying to use an <code>int</code> as a function."}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 2, "creation_date": 1513157422, "post_id": 47789381, "comment_id": 82540215, "body": "Come on... this is a new user asking a valid question... :) and already 7 downvotes..."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1513158405, "post_id": 47789381, "comment_id": 82540834, "body": "@Adria general hint for next time you ask a question: Never post pictures of text but post the text and get familiar with <a href=\"https://stackoverflow.com/help/formatting\">stackoverflow&#39;s mark down formatting</a>, it&#39;s not difficult."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1513176409, "post_id": 47789381, "comment_id": 82552393, "body": "Better than renaming the function: rename your <code>int mcd;</code> local variable to a name that doesn&#39;t shadow the <code>mcd()</code> function.  Some other hints: you&#39;ll want to normalise the signs <i>before</i> the MCD reduction; you can use unary <code>-</code> instead of multiplying by <code>-1</code>; there are more efficient implementations of <code>mcd()</code> - look up <b>Euclid&#39;s Algorithm</b>."}], "answers": [{"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 2, "last_activity_date": 1513156895, "last_edit_date": 1513156895, "creation_date": 1513156719, "answer_id": 47789409, "question_id": 47789381, "link": "https://stackoverflow.com/questions/47789381/error-when-calling-a-function-from-inside-another-function-in-c/47789409#47789409", "title": "Error when calling a function from inside another function in C", "body": "<p>You are redeclaring <code>mcd</code> as <code>int</code>. That is where the problem is. It is shadowing the globally declared function <code>mcd()</code>. Now when you call it you are basically trying to use an <code>int</code> variable in the form of function name. Compiler complains that.</p>\n"}], "owner": {"reputation": 31, "user_id": 8829883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7564fca702cd16d8c1fab5bc54f342dc?s=128&d=identicon&r=PG&f=1", "display_name": "Adria", "link": "https://stackoverflow.com/users/8829883/adria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1513187875, "creation_date": 1513156652, "last_edit_date": 1513175964, "question_id": 47789381, "link": "https://stackoverflow.com/questions/47789381/error-when-calling-a-function-from-inside-another-function-in-c", "title": "Error when calling a function from inside another function in C", "body": "<p>I have to create a function which simplifies fractions. It'd be great if I could call another function from inside the function, to find the GCD easily. </p>\n\n<p>My code is:</p>\n\n<pre><code>int mcd(int n1, int n2){\n    int mcd = 1;\n    for(int i = 2; i &lt;= n1 &amp;&amp; i &lt;= n2; ++i){\n        if(n1 % i == 0 &amp;&amp; n2 % i == 0){\n            mcd = i;\n        }\n    }\n    return mcd;\n}\n\nint reduir(fraccio* sol){\n    int a, b, mcd;\n    a = sol-&gt;num;\n    b = sol-&gt;den;\n    mcd = mcd(a, b);\n    sol-&gt;num = sol-&gt;num / mcd;\n    sol-&gt;den = sol-&gt;den / mcd;\n\n    if (sol-&gt;num &lt; 0) {\n        sol-&gt;signe = '-';\n        sol-&gt;num = sol-&gt;num * -1;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I get a compilation error on the line</p>\n\n<pre><code>    mcd = mcd(a, b);\n</code></pre>\n\n<blockquote>\n  <p>Called object type <code>int</code> is not a function or function pointer</p>\n</blockquote>\n\n<p>What did I do wrong, and how do I fix it?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1638, "user_id": 8224694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cL5ki.jpg?s=128&g=1", "display_name": "Rob Anthony", "link": "https://stackoverflow.com/users/8224694/rob-anthony"}, "edited": false, "score": 0, "creation_date": 1513155243, "post_id": 47788858, "comment_id": 82538925, "body": "Can you explain what you are trying to achieve and what happens with this code. It is not clear how to help you."}, {"owner": {"reputation": 3161, "user_id": 1513187, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3237cddbf003e1af3b51900c02ec005b?s=128&d=identicon&r=PG", "display_name": "Nikola Lukic", "link": "https://stackoverflow.com/users/1513187/nikola-lukic"}, "edited": false, "score": 0, "creation_date": 1513155456, "post_id": 47788858, "comment_id": 82539034, "body": "Use english in comment blocks."}, {"owner": {"reputation": 5, "user_id": 9010447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe15fc6c5da8c8e64db3cf22d28fc4b3?s=128&d=identicon&r=PG&f=1", "display_name": "\u6631\u6587\u7c73", "link": "https://stackoverflow.com/users/9010447/%e6%98%b1%e6%96%87%e7%b1%b3"}, "edited": false, "score": 0, "creation_date": 1513155731, "post_id": 47788858, "comment_id": 82539194, "body": "I want to use this string of code to connect n strings ( the stract function prototype is written by myself), and I think the n in the two for loops at the beginning should be n-1. But if it is changed to n-1, this string of code can only be entered and connected to n-1 strings."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 9010447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe15fc6c5da8c8e64db3cf22d28fc4b3?s=128&d=identicon&r=PG&f=1", "display_name": "\u6631\u6587\u7c73", "link": "https://stackoverflow.com/users/9010447/%e6%98%b1%e6%96%87%e7%b1%b3"}, "edited": false, "score": 0, "creation_date": 1513155413, "post_id": 47788883, "comment_id": 82539013, "body": "What I gave is a bunch of correct codes, which can connect n strings correctly. I share the same idea with you, but when I change n to n-1, I can only input and connect n-1 strings."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 5, "user_id": 9010447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe15fc6c5da8c8e64db3cf22d28fc4b3?s=128&d=identicon&r=PG&f=1", "display_name": "\u6631\u6587\u7c73", "link": "https://stackoverflow.com/users/9010447/%e6%98%b1%e6%96%87%e7%b1%b3"}, "edited": false, "score": 0, "creation_date": 1513155518, "post_id": 47788883, "comment_id": 82539075, "body": "@\u6631\u6587\u7c73.: The second loop&#39;s explanation is also given."}, {"owner": {"reputation": 5, "user_id": 9010447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe15fc6c5da8c8e64db3cf22d28fc4b3?s=128&d=identicon&r=PG&f=1", "display_name": "\u6631\u6587\u7c73", "link": "https://stackoverflow.com/users/9010447/%e6%98%b1%e6%96%87%e7%b1%b3"}, "edited": false, "score": 0, "creation_date": 1513156464, "post_id": 47788883, "comment_id": 82539619, "body": "But if I change n to n -1, I can only type in and connect to n -1 strings, so you can explain that."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 5, "user_id": 9010447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe15fc6c5da8c8e64db3cf22d28fc4b3?s=128&d=identicon&r=PG&f=1", "display_name": "\u6631\u6587\u7c73", "link": "https://stackoverflow.com/users/9010447/%e6%98%b1%e6%96%87%e7%b1%b3"}, "edited": false, "score": 0, "creation_date": 1513156501, "post_id": 47788883, "comment_id": 82539644, "body": "@\u6631\u6587\u7c73.: If you change to the loop shown then it&#39;s concatenating <code>n</code> string!!!...isn&#39;t it obvious?"}, {"owner": {"reputation": 5, "user_id": 9010447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe15fc6c5da8c8e64db3cf22d28fc4b3?s=128&d=identicon&r=PG&f=1", "display_name": "\u6631\u6587\u7c73", "link": "https://stackoverflow.com/users/9010447/%e6%98%b1%e6%96%87%e7%b1%b3"}, "edited": false, "score": 0, "creation_date": 1513157667, "post_id": 47788883, "comment_id": 82540353, "body": "I&#39;m just doing what you say, but only connecting n - 1 strings, is that an IDE problem?"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 5, "user_id": 9010447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe15fc6c5da8c8e64db3cf22d28fc4b3?s=128&d=identicon&r=PG&f=1", "display_name": "\u6631\u6587\u7c73", "link": "https://stackoverflow.com/users/9010447/%e6%98%b1%e6%96%87%e7%b1%b3"}, "edited": false, "score": 0, "creation_date": 1513158089, "post_id": 47788883, "comment_id": 82540603, "body": "@\u6631\u6587\u7c73.L But i tried just now..it gives me correct result."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 1, "last_activity_date": 1513156467, "last_edit_date": 1513156467, "creation_date": 1513155000, "answer_id": 47788883, "question_id": 47788858, "link": "https://stackoverflow.com/questions/47788858/a-string-of-codes-connected-to-multiple-strings-i-have-some-doubts-about-the-two/47788883#47788883", "title": "A string of codes connected to multiple strings.I have some doubts about the two dimensional array and the for loop. Thank you very much\uff01", "body": "<pre><code>for(i=0;i&lt;=n;i++)\n</code></pre>\n\n<p>Accessing array index out of bound when <code>i=n</code> - this is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>. So of course indexing should be from <code>n-1</code> to <code>0</code>( at max) or <code>0</code> to <code>n-1</code>.</p>\n\n<p>And also array indexing in C starts from <code>0</code>. So there are <code>n</code> elements that you are accessing, not <code>n-1</code>.</p>\n\n<p>So corrections would be</p>\n\n<pre><code>for(i=0;i&lt;=n-1;i++)\n</code></pre>\n\n<p>The thing is - you are reading in the <code>n</code> locations having index <code>0</code> to <code>n-1</code> on the array and then you concatenate them one by one and at last all concatenated strings will be in <code>words[0]</code>. You are printing it out.</p>\n\n<p>The second loop would be like</p>\n\n<pre><code>        for(i=n-1;i&gt;0;i--)\n        {\n             mystrcat(words[i-1],words[i]);\n        }\n</code></pre>\n\n<p>The idea is no matter what while accessing array indices don't access array index out bound. Here you can simply write it like this as shown in the second case. The thing is here we have ensured that all the indices used are from <code>{0,1,2,3...,n-1}</code>.</p>\n\n<p>First determine what you want to do, if you want to take <code>n</code> string and then try to concatenate them then yes you can. That's what is being done here. but a much cleaner way to do it would be that keep a different <code>result</code> string on which you will concatenate <code>n</code> strings. That will not overwrite or change the already inputted strings. </p>\n"}], "owner": {"reputation": 5, "user_id": 9010447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe15fc6c5da8c8e64db3cf22d28fc4b3?s=128&d=identicon&r=PG&f=1", "display_name": "\u6631\u6587\u7c73", "link": "https://stackoverflow.com/users/9010447/%e6%98%b1%e6%96%87%e7%b1%b3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 47788883, "answer_count": 1, "score": -1, "last_activity_date": 1513156467, "creation_date": 1513154915, "question_id": 47788858, "link": "https://stackoverflow.com/questions/47788858/a-string-of-codes-connected-to-multiple-strings-i-have-some-doubts-about-the-two", "title": "A string of codes connected to multiple strings.I have some doubts about the two dimensional array and the for loop. Thank you very much\uff01", "body": "<pre><code>/* link many strings*/\n#include&lt;stdio.h&gt;\nchar *mystrcat(char * strDest,  char * strSrc);\n\nint main(void)\n{\n    int n;\n    while(scanf(\"%d\",&amp;n))//\u8f93\u5165\u8981\u8fde\u63a5\u7684\u5b57\u7b26\u4e32\u4e2a\u6570\n    {\n        if(n==0) break;//\u8f93\u51650\u7ed3\u675f\n        else\n        {\n            char words[n][100];\n            int i=0;\n            int j;\n            for(i=0;i&lt;=n;i++)\n            {\n                while(fgets(words[i],100,stdin)!=NULL)\n                {\n                    j=0;\n                    while(words[i][j]!='\\n')\n                           j++;\n                    if(words[i][j]=='\\n') words[i][j]='\\0';break;\n                }\n            }//\u8f93\u5165\u5b57\u7b26\u4e32\n            for(i=n;i&gt;0;i--)\n            {\n                 mystrcat(words[i-1],words[i]);\n            }//\u8fde\u63a5\u8fd9\u51e0\u4e2a\u5b57\u7b26\u4e32\n            fputs(words[0],stdout);//\u8f93\u51fa\u5b57\u7b26\u4e32\n            printf(\"\\n\");\n        }\n    }\n    return 0;\n}\n//strcat\u51fd\u6570\u539f\u578b\nchar *mystrcat(char * strDest,char * strSrc)\n{\n  char *res=strDest;\n  while(*strDest)strDest++;\n  while(*strDest=*strSrc)\n  {\n    strDest++;\n    strSrc++;\n  }\n  return res;\n}\n</code></pre>\n\n<p>This is a string of correct code to connect multiple strings. But I think n should be n-1 in two for cycles. But if you change the n to n-1, you can only enter n-1 strings, one less than I think. Can you tell me where my idea is wrong?</p>\n"}, {"tags": ["c", "arrays", "function", "pointers", "recursion"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1513154484, "post_id": 47788671, "comment_id": 82538442, "body": "You have plenty of problems in your code. One of them is that there are execution paths in the <code>recur</code> function where you don&#39;t return anything."}, {"owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "edited": false, "score": 1, "creation_date": 1513154738, "post_id": 47788671, "comment_id": 82538613, "body": "Piece of Advice. First thing to do when you get segmentation fault is to Debug your code with a debugger, and if you don&#39;t have one or don&#39;t know how to use it, then print out the values of variables at different positions to know what changes are made and where the program stops"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1513154778, "post_id": 47788671, "comment_id": 82538633, "body": "Compile your code with all warnings &amp; debug info: <code>gcc -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>. Improve the code to get no warnings. Use the debugger <code>gdb</code>"}, {"owner": {"reputation": 15, "user_id": 7649882, "user_type": "registered", "profile_image": "https://graph.facebook.com/1277917465632302/picture?type=large", "display_name": "Quentin Oternaud", "link": "https://stackoverflow.com/users/7649882/quentin-oternaud"}, "edited": false, "score": 0, "creation_date": 1513156742, "post_id": 47788671, "comment_id": 82539781, "body": "Thx for all your advices , i&#39;ll keep that in mind"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7649882, "user_type": "registered", "profile_image": "https://graph.facebook.com/1277917465632302/picture?type=large", "display_name": "Quentin Oternaud", "link": "https://stackoverflow.com/users/7649882/quentin-oternaud"}, "edited": false, "score": 0, "creation_date": 1513154686, "post_id": 47788687, "comment_id": 82538588, "body": "Thank you, it was the problem , i&#39;ll mark it as answer in 8 min"}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 3, "last_activity_date": 1513154720, "last_edit_date": 1513154720, "creation_date": 1513154316, "answer_id": 47788687, "question_id": 47788671, "link": "https://stackoverflow.com/questions/47788671/segmentation-error-when-calling-a-function/47788687#47788687", "title": "Segmentation error when calling a function", "body": "<pre><code>printf(\"Argv[1] :  %s\\n\", max_l);\n</code></pre>\n\n<p>This is undefined behavior. You are giving wrong format specifier. That's why you get seg fault you are trying to print an <code>int</code> using <code>%s</code> format specifer. It looks for the <code>\\0</code> and then it doesn't. So it accesses some memory which it shouldn't resulting in UB. (And that resulted in segmentation error).</p>\n\n<p>It should be </p>\n\n<pre><code> printf(\"Argv[1] :  %d\\n\", max_l);\n</code></pre>\n\n<p>Also another major problem is not every control flow of this recursive function returns <code>int</code>. This is a pathway to bigger problem. In case the there is no return value when one is expected the behavior will be undefined.</p>\n"}], "owner": {"reputation": 15, "user_id": 7649882, "user_type": "registered", "profile_image": "https://graph.facebook.com/1277917465632302/picture?type=large", "display_name": "Quentin Oternaud", "link": "https://stackoverflow.com/users/7649882/quentin-oternaud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 47788687, "answer_count": 1, "score": -1, "last_activity_date": 1513178990, "creation_date": 1513154259, "last_edit_date": 1513178990, "question_id": 47788671, "link": "https://stackoverflow.com/questions/47788671/segmentation-error-when-calling-a-function", "title": "Segmentation error when calling a function", "body": "<p>I have this recursive function which creates all possible strings from a dictionary and encrypt them so that they can be compared with some saved hashes.</p>\n\n<p>Earlier, I had some predefined value for the max length of passwords but I tried to change it with <code>argv[1]</code>.\nBut when I execute my program, I get a <code>Segmentation Fault</code> with not explanation. </p>\n\n<p>By the way, all the includes are present as they should but I didn't put them in the post since it is somewhat bugged.</p>\n\n<pre><code>int recur(char * mot , char * tab,int l,int max_l)\n{\n\n// Because this was an exercice we had to do in class , i deleted this part \n// so some of my classmates dont copy/paste my code\n// if you are interested , contact me\n\nint main(int argc, char *argv[]) \n{\n    char letters[36] = {'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9'};\n    char s[10]=\"\";\n    s[9]='\\0';\n    int l=0;\n    int max_l;\n    sscanf (argv[1],\"%d\",&amp;max_l);\n    printf(\"max_l  :  %i\\n\",max_l);\n    printf(\"Debut !  \\n\");\n    recur(s,letters,l,max_l);\n}\n</code></pre>\n\n<p>Thanks for your time!</p>\n"}, {"tags": ["c++", "c", "c++11", "templates", "c-preprocessor"], "comments": [{"owner": {"reputation": 7698, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1513153660, "post_id": 47788501, "comment_id": 82538003, "body": "<i>&quot;Perhaps using recursive preprocessor macros?&quot;</i> There&#39;s a number of libraries offering helper macros to do such. E.g. the boost preprocessor lib."}], "answers": [{"comments": [{"owner": {"reputation": 1760, "user_id": 5800661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8eac4d914e032fe4f3af9853765abf24?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/5800661/fabio"}, "edited": false, "score": 0, "creation_date": 1513156620, "post_id": 47788693, "comment_id": 82539707, "body": "I like the idea, but I wonder if the dispatch table is regenerated at every call. I think I will try a slight variation, embedding the pointer vector in a struct, so that that I can then create a global instance of that struct and use that for dispatching."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 1760, "user_id": 5800661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8eac4d914e032fe4f3af9853765abf24?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/5800661/fabio"}, "edited": false, "score": 0, "creation_date": 1513157122, "post_id": 47788693, "comment_id": 82540037, "body": "You could make <code>dispatch</code> <code>constexpr</code> to avoid regeneration."}, {"owner": {"reputation": 1760, "user_id": 5800661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8eac4d914e032fe4f3af9853765abf24?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/5800661/fabio"}, "edited": false, "score": 0, "creation_date": 1513225477, "post_id": 47788693, "comment_id": 82573115, "body": "The assembler generated by VS2015 shows that even with <code>constexpr</code> the array is re-initialized at every call. The problem goes away using <code>static</code>."}, {"owner": {"reputation": 1760, "user_id": 5800661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8eac4d914e032fe4f3af9853765abf24?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/5800661/fabio"}, "edited": false, "score": 0, "creation_date": 1513352738, "post_id": 47788693, "comment_id": 82634697, "body": "Just posted a related question here: <a href=\"https://stackoverflow.com/questions/47835596/use-the-signature-of-a-generic-function-dependent-on-a-non-type-template-argumen\" title=\"use the signature of a generic function dependent on a non type template argumen\">stackoverflow.com/questions/47835596/&hellip;</a>"}], "tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": true, "score": 5, "last_activity_date": 1513158262, "last_edit_date": 1513158262, "creation_date": 1513154338, "answer_id": 47788693, "question_id": 47788501, "link": "https://stackoverflow.com/questions/47788501/bridging-templates-with-runtime-arguments/47788693#47788693", "title": "bridging templates with runtime arguments", "body": "<p>You could use templates internally to generate the necessary code.</p>\n\n<p>One way to do this is generate a dispatch table of 100 function pointers, then index it at runtime. <code>c_foo</code> will generate a compile-time sequence of indices and call a helper:</p>\n\n<pre><code>extern \"C\" void c_foo(int i) {    \n    c_foo_impl(std::make_integer_sequence&lt;int,100&gt;{}, i);\n}\n</code></pre>\n\n<p>This helper will generate the dispatch table and carry out the call:</p>\n\n<pre><code>template &lt;int... Is&gt;\nvoid c_foo_impl (std::integer_sequence&lt;int,Is...&gt;, int i) {\n    constexpr std::array&lt;void(*)(), sizeof...(Is)&gt; dispatch = { &amp;foo&lt;Is&gt;... };\n\n    //assert or some other error handling for i &gt; sizeof...(Is)\n    dispatch[i]();\n}\n</code></pre>\n\n<p>Then you can do the same for <code>zoo</code>:</p>\n\n<pre><code>extern \"C\" void c_zoo(int i, int v) {   \n    c_zoo_impl(std::make_integer_sequence&lt;int,100&gt;{}, i, v);\n}\n\ntemplate &lt;int... Is&gt;\nvoid c_zoo_impl (std::integer_sequence&lt;int,Is...&gt;, int i, int v) {\n    constexpr std::array&lt;void(*)(int), sizeof...(Is)&gt; dispatch = { &amp;zoo&lt;Is&gt;... };\n\n    //assert or some other error handling for i &gt; sizeof...(Is)\n    dispatch[i](v);\n}\n</code></pre>\n\n<p>If you find that you need this in a few places, you could abstract out some of the details, or use a library such as <a href=\"https://github.com/jacquelinekay/petra\" rel=\"nofollow noreferrer\">Petra</a>, which provides a <code>switch_table</code> to carry out this kind of mapping.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/a30814607651e96e\" rel=\"nofollow noreferrer\">Live demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "is_accepted": false, "score": 0, "last_activity_date": 1513178606, "creation_date": 1513178606, "answer_id": 47796626, "question_id": 47788501, "link": "https://stackoverflow.com/questions/47788501/bridging-templates-with-runtime-arguments/47796626#47796626", "title": "bridging templates with runtime arguments", "body": "<p>I guess the question is what is this template number? Is it something like an internal buffer size, or more like a command byte?\nOne presumes the average C++ program would only generate a certain few argument values.</p>\n\n<p>Perhaps the bast approach would be to enumerate some typical buffer sizes, or command names, and instantiate only those, so if the c code uses your enum as the parameter it will work, otherwise it (fails horribly) asserts.</p>\n\n<p>It will be an annoyance to add new entries if they are justified, but you could write a script for it.</p>\n\n<p>Another approach may be to generate mangled named stubs, i.e. generate a foo__1() foo__2() etc, perhaps using the boost extended preprocessor to help. Again the C programmer is then automatically restricted to the methods and ranges you have published at compile time. </p>\n"}], "owner": {"reputation": 1760, "user_id": 5800661, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8eac4d914e032fe4f3af9853765abf24?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/5800661/fabio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 47788693, "answer_count": 2, "score": 2, "last_activity_date": 1513178606, "creation_date": 1513153528, "question_id": 47788501, "link": "https://stackoverflow.com/questions/47788501/bridging-templates-with-runtime-arguments", "title": "bridging templates with runtime arguments", "body": "<p>I am dealing with a 3rd party C++ library which makes extensive use of templates. That makes it difficult to create a C API for it to use it from my framework.</p>\n\n<p>Abstracting the problem, suppose the library offers the function:</p>\n\n<pre><code>template &lt;int i&gt; void foo();\ntemplate &lt;int i&gt; void zoo(int v);\n</code></pre>\n\n<p>I want to create a C API with the function head:</p>\n\n<pre><code>extern \"C\" void c_foo(int i);\nextern \"C\" void c_zoo(int i, int v);\n</code></pre>\n\n<p>An obvious implementation could be:</p>\n\n<pre><code>void c_foo(int i)\n{\n     switch(i) {\n         case 1: foo&lt;1&gt;(); break;\n         case 2: foo&lt;2&gt;(); break;\n         case 3: foo&lt;3&gt;(); break;\n         default: break;\n     };\n};\n</code></pre>\n\n<p>and do the same also for <code>void zoo(int)</code>.</p>\n\n<p>This works fine if the range of possible values for <code>i</code> is small. If I want to handle all possible values of <code>i</code> in [1,100], then it becomes exceedingly ugly to write code in this way, as there is lot of repetition.</p>\n\n<p>Is there any more compact way to do that, i.e. writing less lines of codes? Perhaps using recursive preprocessor macros?</p>\n"}, {"tags": ["c", "pointers", "operators", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 7, "creation_date": 1513152801, "post_id": 47788268, "comment_id": 82537557, "body": "For any pointer (or array) <code>p</code> and index <code>i</code> the expression <code>p[i]</code> is exactly equal to <code>*(p + i)</code>. Pointer arithmetic is just a fancy way of indexing an &quot;array&quot;."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1513153336, "post_id": 47788268, "comment_id": 82537844, "body": "... or rather, <code>p[i]</code> is just fancy syntactic sugar for <code>*(p + i)</code> (as it is)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1513158118, "post_id": 47788268, "comment_id": 82540626, "body": "Simply write <code>iterator = &amp;ds[5];</code>."}, {"owner": {"reputation": 50669, "user_id": 1711796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6pRI7.png?s=128&g=1", "display_name": "Bernhard Barker", "link": "https://stackoverflow.com/users/1711796/bernhard-barker"}, "edited": false, "score": 2, "creation_date": 1513162329, "post_id": 47788268, "comment_id": 82543394, "body": "<code>x++</code> is essentially <code>x=x+1</code>, not <code>x=x+sizeof(something)</code>."}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "reply_to_user": {"reputation": 50669, "user_id": 1711796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6pRI7.png?s=128&g=1", "display_name": "Bernhard Barker", "link": "https://stackoverflow.com/users/1711796/bernhard-barker"}, "edited": false, "score": 0, "creation_date": 1513163939, "post_id": 47788268, "comment_id": 82544479, "body": "@Dukeling <code>x++</code> is indeed the same as <code>x = x + 1</code>, but it does have the effect though of advancing <code>x</code> by <code>sizeof *x</code> bytes if you examine the raw value of the pointer."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1513171014, "post_id": 47788268, "comment_id": 82548828, "body": "@Alnitak That is true, but it is equally true than <code>x += n</code> will advance x by <code>n* sizeof *x</code> bytes if you examine the raw value of the pointer."}], "answers": [{"comments": [{"owner": {"reputation": 674, "user_id": 3782128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KhCoZ.png?s=128&g=1", "display_name": "Rub&#233;n Pozo", "link": "https://stackoverflow.com/users/3782128/rub%c3%a9n-pozo"}, "edited": false, "score": 3, "creation_date": 1513153030, "post_id": 47788285, "comment_id": 82537670, "body": "In order to do my code works I modified with this line: <code>iterator = ds + 5</code>. Thanks!!!"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 674, "user_id": 3782128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KhCoZ.png?s=128&g=1", "display_name": "Rub&#233;n Pozo", "link": "https://stackoverflow.com/users/3782128/rub%c3%a9n-pozo"}, "edited": false, "score": 0, "creation_date": 1513153085, "post_id": 47788285, "comment_id": 82537707, "body": "@Rub&#233;nPozo Ah, right, let me also make that correct."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1513153404, "post_id": 47788285, "comment_id": 82537878, "body": "@Bathsheba And I get a view  from Mariana Trench to top of Mount Everest."}, {"owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1513153542, "post_id": 47788285, "comment_id": 82537941, "body": "I find that when answering what is clearly a basic question, merely quoting the standard isn&#39;t helping many people. Most people at this level of question need an explanation in plain English as well."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1513153635, "post_id": 47788285, "comment_id": 82537991, "body": "@Joe If you feel it&#39;s not helping, I encourage you to downvote. However, FYI, I just added a couple of line of explanation, if that helps."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 5, "creation_date": 1513153669, "post_id": 47788285, "comment_id": 82538008, "body": "@Joe, that&#39;s why a selection of answers is always useful on SO. Sourav Ghosh likes to use standard references which gives his answers a reference quality. I tend not to, mainly because I&#39;m essentially a charlatan who doesn&#39;t know the standard as well as I ought. Remember that SO is a Q &amp; A site, not a forum targetting helping individual users (although that does drop out as a corollary)."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 30, "last_activity_date": 1513188948, "last_edit_date": 1513188948, "creation_date": 1513152639, "answer_id": 47788285, "question_id": 47788268, "link": "https://stackoverflow.com/questions/47788268/how-can-i-move-to-a-pointer-position-directly-without-using-the-operator/47788285#47788285", "title": "How can I move to a pointer position directly without using the ++ operator?", "body": "<p>Well, pointer arithmetic honors the data type!!</p>\n\n<pre><code>iterator = ds + 5;\n</code></pre>\n\n<p>will get the job done.</p>\n\n<p>To elaborate, the above expression will produce a pointer by moving it 5 times, multiplied by the size of type for <code>ds</code>, in bytes. That's the same as <code>&amp;(ds[5])</code>.</p>\n\n<p>For sake of completeness, explaining why <code>iterator = ds + (sizeof(dummy_struct)*5);</code> is wrong, is, here, you're essentially trying to move the pointer to an element with index as <code>(sizeof(dummy_struct)*5</code> which is, well out of bounds. Note please, this invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"noreferrer\">undefined behavior</a>!! <sup>note below</sup></p>\n\n<p>Quoting <code>C11</code>, chapter \u00a76.5.6/P8</p>\n\n<blockquote>\n  <p>When an expression that has integer type is added to or subtracted from a pointer, the\n  result has the type of the pointer operand. If the pointer operand points to an element of\n  an array object, and the array is large enough, the result points to an element offset from\n  the original element such that the difference of the subscripts of the resulting and original\n  array elements equals the integer expression. In other words, if the expression <code>P</code> points to\n  the <code>i</code>-th element of an array object, the expressions <code>(P)+N</code> (equivalently, <code>N+(P)</code>) and\n  <code>(P)-N</code> (where <code>N</code> has the value <code>n</code>) point to, respectively, the <code>i+n</code>-th and <code>i\u2212n</code>-th elements of\n  the array object, provided they exist. [....]</p>\n</blockquote>\n\n<p>and then, regarding the undefined behavior mentioned above, </p>\n\n<blockquote>\n  <p>[....] If both the pointer\n  operand and the result point to elements of the same array object, or one past the last\n  element of the array object, the evaluation shall not produce an overflow; otherwise, the\n  behavior is undefined. If the result points one past the last element of the array object, it\n  shall not be used as the operand of a unary <code>*</code> operator that is evaluated.</p>\n</blockquote>\n\n<hr>\n\n<p>That being said, the <code>printf()</code> statement is also erroneous. You have two conversion specifiers, but supplied three arguments. It's not <em>harmful</em>, but useless/meaningless.</p>\n\n<p>Related, from chapter \u00a77.21.6.1/P2,</p>\n\n<blockquote>\n  <p>[...] If the format is exhausted while arguments remain, the excess arguments are\n  evaluated (as always) but are otherwise ignored. [...]</p>\n</blockquote>\n\n<p>Based on this case, you can directly use</p>\n\n<pre><code>printf(\"5th position %d:%s:\\n\",ds[5].id,ds[5].buffer);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1513153496, "post_id": 47788440, "comment_id": 82537918, "body": "&amp;ds[4] is equivalent to ds + 4. Note also that the compiler is not allowed to <i>dereference</i> <code>ds + 4</code> in the former expression"}], "tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1513154122, "last_edit_date": 1513154122, "creation_date": 1513153315, "answer_id": 47788440, "question_id": 47788268, "link": "https://stackoverflow.com/questions/47788268/how-can-i-move-to-a-pointer-position-directly-without-using-the-operator/47788440#47788440", "title": "How can I move to a pointer position directly without using the ++ operator?", "body": "<p>Seems that you are trying to make the <code>iterator</code> pointer pointing to <code>5th</code> element of <code>ds</code> array. But this statement will give you wrong result:</p>\n\n<pre><code>iterator = ds + (sizeof(dummy_struct)*5);\n</code></pre>\n\n<p>The result of <code>sizeof(dummy_struct)*5</code> will result in the total size of all the elements of structure <code>dummy_struct</code> multiplied by 5, which will get added to the address referenced by <code>ds</code> and assigned to <code>iterator</code>. So, the <code>iterator</code> may point to a memory location which your program does not own. You need to do:</p>\n\n<pre><code>iterator = ds + 5;\n</code></pre>\n\n<p>Or you can also do:</p>\n\n<pre><code>iterator = &amp;ds[5];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 8, "last_activity_date": 1513153764, "last_edit_date": 1513153764, "creation_date": 1513153347, "answer_id": 47788445, "question_id": 47788268, "link": "https://stackoverflow.com/questions/47788268/how-can-i-move-to-a-pointer-position-directly-without-using-the-operator/47788445#47788445", "title": "How can I move to a pointer position directly without using the ++ operator?", "body": "<p>The behaviour of </p>\n\n<pre><code>iterator = ds + (sizeof(dummy_struct) * 5);\n</code></pre>\n\n<p>is <em>undefined</em> if you set a pointer beyond one past the final element of the array. You are actually setting <code>iterator</code> to further elements in the array than you think, by a factor of <code>sizeof(dummy_struct)</code>! Don't do that.</p>\n\n<p>The language allows you to use the notation <code>iterator = ds + 5;</code>. This idiomatic <em>pointer arithmetic</em> adds <code>5</code> lots of <code>sizeof(dummy_struct)</code> to the address <code>iterator</code>. In other words the compiler does the <code>sizeof</code> adjustment for you. That's one reason why pointer arithmetic is so powerful.</p>\n\n<p>Finally note that <code>*(ds + 5)</code> is equivalent to <code>ds[5]</code>. I find the latter affords more clarity when working with arrays.</p>\n"}], "owner": {"reputation": 674, "user_id": 3782128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KhCoZ.png?s=128&g=1", "display_name": "Rub&#233;n Pozo", "link": "https://stackoverflow.com/users/3782128/rub%c3%a9n-pozo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6029, "favorite_count": 1, "accepted_answer_id": 47788285, "answer_count": 3, "score": 10, "last_activity_date": 1513190169, "creation_date": 1513152565, "last_edit_date": 1513190169, "question_id": 47788268, "link": "https://stackoverflow.com/questions/47788268/how-can-i-move-to-a-pointer-position-directly-without-using-the-operator", "title": "How can I move to a pointer position directly without using the ++ operator?", "body": "<p>I'm working with a pointer to a structure. I want to know if is possible move directly to a specific position without use <code>++</code> operator. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define ARRAY_SIZE 10\n\nstruct dummy{\n    int id;\n    char buffer[10];\n};\n\ntypedef struct dummy dummy_struct;\n\nint main()\n{\n    int i=0;\n    dummy_struct *ds = malloc(sizeof(dummy_struct)*ARRAY_SIZE);\n    dummy_struct *iterator = ds;\n\n    for(i=0;i&lt;ARRAY_SIZE;i++)\n    {\n        iterator-&gt;id = i;\n        sprintf(iterator-&gt;buffer,\"%d\",i);\n        iterator++;\n    }\n\n    iterator = ds;\n\n    for(i=0;i&lt;ARRAY_SIZE;i++)\n    {\n        printf(\"%d:%s:%p\\n\",iterator-&gt;id,iterator-&gt;buffer,iterator);\n        iterator++;\n    }\n\n    // I want to access directly to 5th position\n    iterator = ds + (sizeof(dummy_struct)*5);\n    printf(\"5th position %d:%s:%p\\n\",iterator-&gt;id,iterator-&gt;buffer,iterator);\n\n    return 0;\n}\n</code></pre>\n\n<p>This statement</p>\n\n<pre><code>iterator = ds + (sizeof(dummy_struct)*5);\n</code></pre>\n\n<p>is not working. I will appreciate any suggestion.</p>\n"}, {"tags": ["c", "sockets", "posix", "epoll"], "comments": [{"owner": {"reputation": 8597, "user_id": 1039481, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a10ec3de7bec751e1633eba0ef28d4cb?s=128&d=identicon&r=PG", "display_name": "Akhil Thayyil", "link": "https://stackoverflow.com/users/1039481/akhil-thayyil"}, "edited": false, "score": 1, "creation_date": 1513152654, "post_id": 47788263, "comment_id": 82537478, "body": "Yes, you need to set the socket to non_blocking mode and should do an accept once you get any read event eg : <a href=\"https://stackoverflow.com/questions/29729561/asynchronous-c-client-for-a-multiclient-c-server\" title=\"asynchronous c client for a multiclient c server\">stackoverflow.com/questions/29729561/&hellip;</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1513152990, "post_id": 47788263, "comment_id": 82537653, "body": "Non-blocking is not needed. Just poll for the listening socket to be <i>readable</i>."}], "answers": [{"tags": [], "owner": {"reputation": 8900, "user_id": 1925449, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/97c543aca1ac7bbcfb5279d0300c8330?s=128&d=identicon&r=PG", "display_name": "Nathaniel J. Smith", "link": "https://stackoverflow.com/users/1925449/nathaniel-j-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1513154027, "creation_date": 1513154027, "answer_id": 47788621, "question_id": 47788263, "link": "https://stackoverflow.com/questions/47788263/is-it-possible-to-do-epoll-on-accept-event/47788621#47788621", "title": "Is it possible to do epoll on accept event?", "body": "<p>Without knowing what this non-standard platform is it's impossible to know exactly what semantics they gave their epoll call. But on the standard epoll on Linux, a listening socket will be reported as \"readable\" when an incoming connection arrives, and then you can accept the connection by calling <code>accept</code>. If you leave the socket in blocking mode, and always check for readability using epoll's level-triggered mode before each call to <code>accept</code>, then this <em>should</em> work \u2013 the only risk is that if you somehow end up calling <code>accept</code> when no connection has arrived, then you'll get stuck. For example, this could happen if there are two processes sharing a listening socket, and they both try to <code>accept</code> the same connection. Or maybe it could happen if an incoming connection arrives, and then is closed again before you call <code>accept</code>. (Pretty sure in this case Linux still lets the <code>accept</code> succeed, but this kind of edge case is exactly where I'd be suspicious of a weird platform doing something weird.) You'd want to check these things.</p>\n\n<p>Non-blocking mode is much more reliable because in the worst case, <code>accept</code> just reports that there's nothing to accept. But if that's not available, then you might be able to get away with something like this...</p>\n"}, {"tags": [], "owner": {"reputation": 6819, "user_id": 140837, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e6470f08d90f2d62f514b5b71ca5ca3f?s=128&d=identicon&r=PG", "display_name": "amirouche", "link": "https://stackoverflow.com/users/140837/amirouche"}, "is_accepted": false, "score": 0, "last_activity_date": 1558901699, "creation_date": 1558901699, "answer_id": 56317046, "question_id": 47788263, "link": "https://stackoverflow.com/questions/47788263/is-it-possible-to-do-epoll-on-accept-event/56317046#56317046", "title": "Is it possible to do epoll on accept event?", "body": "<p>Since this answer is the first up in the results in duckduckgo. I will just chime in to say that under GNU/Linux 4.18.0-18-generic (Ubuntu 18.10).</p>\n\n<p>The asynchronously <code>accept</code> an incoming connection using one has to watch for <code>errno</code> value <code>EWOULDBLOCK</code> (11) and then add the socket to epoll <strong>read</strong> set.</p>\n\n<p>Here is a small shot of scheme code that achieves that:</p>\n\n<pre><code>(define (accept fd)\n  (let ((out (socket:%accept fd 0 0)))\n    (if (= out -1)\n        (let ((code (socket:errno)))\n          (if (= code EWOULDBLOCK)\n              (begin\n                (abort-to-prompt fd 'read)\n                (accept fd))\n              (error 'accept (socket:strerror code))))\n        out)))\n</code></pre>\n\n<p>In the above <code>(abort-to-prompt fd 'read)</code> will pause the coroutine and add <code>fd</code> to epoll read set, done as follow:</p>\n\n<pre><code>(epoll-ctl epoll EPOLL-CTL-ADD fd (make-epoll-event-in fd)))\n</code></pre>\n\n<p>When the coroutine is unpaused, the code proceed after the abort to call itself recursively (in tail-call position)</p>\n\n<p>In the code I am working in Scheme, it is a bit more involving since I rely on <code>call/cc</code> to avoid callbacks. The full code is at <a href=\"https://git.sr.ht/~amz3/chez-scheme-arew/tree/1656b24f3044f64a690fc07d44138e9071ff3d01/src/arew/untangle.scm#L16\" rel=\"nofollow noreferrer\">source hut</a>.</p>\n\n<p>That is all.</p>\n"}], "owner": {"reputation": 1059, "user_id": 1259152, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/OemYc.jpg?s=128&g=1", "display_name": "olegst", "link": "https://stackoverflow.com/users/1259152/olegst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1274, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1558901699, "creation_date": 1513152523, "last_edit_date": 1513152660, "question_id": 47788263, "link": "https://stackoverflow.com/questions/47788263/is-it-possible-to-do-epoll-on-accept-event", "title": "Is it possible to do epoll on accept event?", "body": "<p>Let's suppose I've created a listening socket:</p>\n\n<pre><code>sock = socket(...);\nbind(sock,...);\nlisten(sock, ...);\n</code></pre>\n\n<p>Is it possible to do epoll_wait on <em>sock</em> to wait for incoming connection? And how do I get client's socket fd after that?</p>\n\n<p>The thing is on the platform I'm writing for sockets cannot be non-blocking, but there is working epoll implementation with timeouts, and I need to accept connection and work with it in a single thread so that it doesn't hang if something goes wrong and connection doesn't come.</p>\n"}, {"tags": ["c", "arrays", "windows", "malloc", "realloc"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1513149369, "post_id": 47787453, "comment_id": 82535938, "body": "When you do <code>sizeof</code> on a pointer, you get the size of <i>the pointer</i>, not what it points to. Now think about the expression <code>sizeof(*valueArray) &#47; sizeof(int)</code> in the <code>memIntReallocation</code> function."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 1, "creation_date": 1513149678, "post_id": 47787453, "comment_id": 82536076, "body": "<code>readInput</code> doesn&#39;t return anything"}, {"owner": {"reputation": 165, "user_id": 9024493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c01c27b8c22bc65138332c32529ea633?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio Solorzano", "link": "https://stackoverflow.com/users/9024493/sergio-solorzano"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1513151354, "post_id": 47787453, "comment_id": 82536826, "body": "@Someprogrammerdude I\u2019ve edited the code. I calculate the number of elements for the int Array as I read the data from file and pass this value to realloc. Same problems outlined remain."}, {"owner": {"reputation": 165, "user_id": 9024493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c01c27b8c22bc65138332c32529ea633?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio Solorzano", "link": "https://stackoverflow.com/users/9024493/sergio-solorzano"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1513154293, "post_id": 47787453, "comment_id": 82538321, "body": "@&#212;rel thanks a bunch for pointing this, the intent is for readInput() to write the arrays and make these accessible to other functions. I&#39;ve edited above to void readInput() and updated the persistent erroneous result behaviour."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 9024493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c01c27b8c22bc65138332c32529ea633?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio Solorzano", "link": "https://stackoverflow.com/users/9024493/sergio-solorzano"}, "edited": false, "score": 0, "creation_date": 1513165455, "post_id": 47790776, "comment_id": 82545366, "body": "Thanks a a lot @Serge Ballesta, passing arraySize works, I&#39;ve modified the code above accordingly. Can I please clarify: (a) where you say comparing readValueArray[j] to 0 is of no use because I never initialized the allocated memory - why is that if the array was indeed successfully reallocated and I understand readValueArray does not need re-initializing, it&#39;s the existing array for the new size after realloc. (b) what is the difference between reallocating memory to the size of an array and changing the size of an array?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 165, "user_id": 9024493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c01c27b8c22bc65138332c32529ea633?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio Solorzano", "link": "https://stackoverflow.com/users/9024493/sergio-solorzano"}, "edited": false, "score": 0, "creation_date": 1513180756, "post_id": 47790776, "comment_id": 82555382, "body": "@SergioSolorzano a/ After malloc, the allocated memory contains unspecified data, not necessary 0; you must set zero it explicitely if you want to be able to identify cells that have never received a new value. b/ I cannot understand what your are asking. An array may have 2 sizes, the allocated one and the used one. You have to keep track of both and you can change the allocated one with <code>realloc</code> - but in fact, <code>realloc</code> <i>may</i> move the array at a different address."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 2, "last_activity_date": 1513160952, "creation_date": 1513160952, "answer_id": 47790776, "question_id": 47787453, "link": "https://stackoverflow.com/questions/47787453/read-int-and-char-array-from-file-then-resize-array/47790776#47790776", "title": "read int and char array from file, then resize array", "body": "<p>First of all, warnings are not to be ignored.</p>\n\n<blockquote>\n<pre><code> void main(char *argv) {\n        ...\n        argv = ...;\n</code></pre>\n</blockquote>\n\n<p>should have raised one (CLang even gives an error!) because it is not conformant C. It should be:</p>\n\n<pre><code>int main() {\n    ...\n    char *filename = ...;\n</code></pre>\n\n<p>Do not declare argv if you do not use it and avoid using <code>argv</code> for anything else than command line parameters.</p>\n\n<p>Next: <code>for (int j = 0; j &lt; charArray!=NULL; j++)</code> should also raise tons of warnings. You first compare <code>j</code> and <code>charArray</code> (already undefined behaviour). After seeing the result, <code>j &lt; charArray</code> happens to be true (value 1 in C) and you compare it to NULL which is a <code>void *</code>! <code>1 != 0</code> is always true and you get a never ending loop.</p>\n\n<p><code>for (int j = 0; j &lt; charSize || readValueArray[j] != NULL; j++)</code> should also raise warnings: <code>readValueArray[j]</code> is an <code>int</code> and <code>NULL</code> is a <code>void *</code>. In addition, it is no use testing <code>readValueArray[j]</code> to <code>0</code> because you have never initialized the allocated memory.</p>\n\n<p>Finally resize does not <em>remove garbage from the array</em> it reallocates the array with the asked size somewhere in memory, and if you access past the allocated memory you just invoke Undefined Behaviour. There is no way in C to know the size of an array, it is the programmer's job to care for it.</p>\n\n<p>So you have 2 possible ways here:</p>\n\n<ul>\n<li><p>either pass the actual size of the arrays as an (output) parameter of <code>readInput</code>:</p>\n\n<pre><code>void readInput(char *choiceArray, int *valueArray, FILE **inputFilePointer,\n    int *choiceArraySize, int *valueArraySize)\n</code></pre></li>\n<li><p>or use a special value (for example 0) as an end marker.</p></li>\n</ul>\n\n<p>And <em>please</em> pay attention to warnings!</p>\n"}, {"tags": [], "owner": {"reputation": 105, "user_id": 9054412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e48e9c9d95738c80ae47ceb93acc68f?s=128&d=identicon&r=PG&f=1", "display_name": "coddygeek", "link": "https://stackoverflow.com/users/9054412/coddygeek"}, "is_accepted": false, "score": 0, "last_activity_date": 1513333124, "last_edit_date": 1513333124, "creation_date": 1513331279, "answer_id": 47829644, "question_id": 47787453, "link": "https://stackoverflow.com/questions/47787453/read-int-and-char-array-from-file-then-resize-array/47829644#47829644", "title": "read int and char array from file, then resize array", "body": "<p>In the body of  <code>while (fgets(pbuffer, bufferSize, *inputFilePointer) != NULL)</code>\nyou used same variable <code>j</code> as array index for both <code>readCharArray</code> and <code>readValueArray</code> ,i think this will crate problem during assignment since it get incremented during each assignment some index values won't be used. use two variables separately for <code>readCharArray</code> and <code>readValueArray</code>.</p>\n"}], "owner": {"reputation": 165, "user_id": 9024493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c01c27b8c22bc65138332c32529ea633?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio Solorzano", "link": "https://stackoverflow.com/users/9024493/sergio-solorzano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 47790776, "answer_count": 2, "score": 0, "last_activity_date": 1513333124, "creation_date": 1513149206, "last_edit_date": 1513165517, "question_id": 47787453, "link": "https://stackoverflow.com/questions/47787453/read-int-and-char-array-from-file-then-resize-array", "title": "read int and char array from file, then resize array", "body": "<p>I am learning to manipulate arrays. I store element by element data read from file into char and int array in a function outside main() named readInput(). Data read:</p>\n\n<p>D  E  D  D  E  E E D E  E  E D E</p>\n\n<p>21 32 35 59 58       16 11     29</p>\n\n<p>I attempt to resize both arrays to exclude garbage in the arrays with realloc: My questions:</p>\n\n<ul>\n<li><p>When printing the char array in main(), it contains the right elements but prints garbage at the end of the array. I note it prints correctly at readInput(). What did I do wrong?</p></li>\n<li><p>At readInput() before and after realloc, and in main(), the elements read from file of the int array are correct except they are followed by garbage. What did I do wrong?</p></li>\n</ul>\n\n<p>Output:</p>\n\n<p>Print from readInput() - Char Array before realloc: D E D D E E E D E E E D E</p>\n\n<p>Print from readInput() - Int Array before realloc: 21 32 35 59 58 16 11 29 -8421\n50451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -8421504\n51 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451</p>\n\n<p>Print from readInput() - Char Array after realloc: D E D D E E E D E E E D E</p>\n\n<p>Print from readInput() - Int After after realloc:21 32 35 59 58 16 11 29 -336860\n19 -842150451 739749649 37763 4849560 4849264 -842150451 -842150451 -842150451 -\n842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842</p>\n\n<p>Print from main() - Char Array (after realloc): D E D D E E E D E E E D E   \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550\n\u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u00b2 \u00b2 \u00b2 \u00b2 \u00b3 \u00ce \u00a3 ` w \u00ba\n\u00c9 \u00b7 y   \u00c9 V t   \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u2550 \u00b2 \u00b2 \u00b2 \u00b2 and it goes on</p>\n\n<p>Print from main() - Int Array (after realloc): 21 32 35 59 58 16 11 29 -33686019 -842150451 874388096 31426 6946712 6946416 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 and it goes on</p>\n\n<p>Context of the program:\nThe read data is stored in a function outside main() named readInput(), char by char/int by int into a char and int arrays respectively that are declared and initially sized via malloc in main().</p>\n\n<p>After storing data in the arrays, I need to re-size the arrays to the size of the data read in the file.</p>\n\n<p>Finally, to verify the array is also accessible to main , write char by char and int by int the arrays both in main() and readInput().</p>\n\n<p>Thank you for your help.\nEdited corrected working code, thank you!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\n//prototypes\nvoid openFile(char *fileNames, FILE **inputFilePointer);\nvoid closeFile(FILE **inputFilePointer);\nvoid readInput(char *choiceArray, int *valueArray, int *charArraySize, int *intArraySize, FILE **inputFilePointer);\nvoid memCharReallocation(char **choiceArray, int requiredArraySize);//resize char array to what's actually required after reading the file\nvoid memIntReallocation(int **valueArray, int intSize);//resize int array to what's actually required after reading the file\n\nvoid main()\n{\n    char *charArray =NULL;\n    int *valueArray;\n    int inputSize;\n    int charInputSize = 0;//size of elements read from file\n    int intInputSize = 0;//size of elements read from file\n\n    //file read/write variables\n    FILE *iFilePointer;//file pointer\n    char *filename = \"inputFileTest.txt\";\n\n    //open and read Files\n    openFile(filename, &amp;iFilePointer);\n\n    //initial mem allocation to size char and int array\n    valueArray = (int*)malloc(sizeof(int) * 100);\n    if (valueArray == NULL)\n    {\n        printf(\"\\nCould not allocate memory, exiting.\\n\");\n        exit(1);\n    }\n\n    charArray = (char*)malloc(sizeof(char) * 100);\n    if (charArray == NULL)\n    {\n        printf(\"\\nCould not allocate memory, exiting.\\n\");\n        exit(1);\n    }\n    //read file and allocate to array\n    readInput(charArray, valueArray, &amp;charInputSize, &amp;intInputSize, &amp;iFilePointer);\n\n    //print char array: Test I can read it here too\n    printf(\"\\nPrint from main() - Char Array: \");\n    for (int j = 0; j&lt;charInputSize; j++)\n    {\n        printf(\"%c \", charArray[j]);\n    }\n    //Print int array\n    printf(\"\\nPrint from main() - Int Array: \");\n\n    for (int j = 0; j&lt;intInputSize; j++)\n    {\n        printf(\"%d \", valueArray[j]);\n    }\n}\n\n//read data from file\nvoid readInput(char *readCharArray, int *readValueArray, int *charArraySize, int *intArraySize, FILE **inputFilePointer)\n{\n    int i, j = 0;//loop variables\n    char *pbuffer = NULL;//buffer to read input file\n    int bufferSize = 200;//max initial size for buffer\n    char *token = NULL;////tonize\n    char ch = NULL;//convert string char to char\n    int readingChar = 0;//flag we are reading char from file\n\n    //alloc memory to pbuffer\n    pbuffer = (char*)malloc(sizeof(char)*bufferSize);\n    if (pbuffer == NULL)\n    {\n        printf(\"\\nCould not allocate memory, exiting.\\n\");\n        exit(1);\n    }\n\n    printf(\"Read Input From File: \\n\");\n    //store each element from file in struct variable\n    while (fgets(pbuffer, bufferSize, *inputFilePointer) != NULL)//read each line from file\n    {\n        j = 0;//reset array to subscript zero on each pass\n        //tokenize file data\n        for (token = strtok(pbuffer, \" \"); token != NULL; token = strtok(NULL, \" \"))\n        {\n            //char token\n            if (isalpha(token[0]))\n            {\n                ch = token[0];\n                readCharArray[j++] = ch;\n                readingChar = 1;//flag we are reading char from file to get length of array excl array garbage\n            }\n            //int token\n            else if (isdigit(token[0]))\n            {\n                readValueArray[j++] = atoi(token);\n                (*intArraySize)++;\n            }\n\n            else\n            {\n                printf(\"\\nCan't read file\\n\");\n                exit(1);\n            }\n        }\n        if (readingChar)\n        {\n            readCharArray[j] = '\\0';//remove excess cells on array\n            *charArraySize = strlen(readCharArray);//size of array\n            readingChar = 0;//end of reading char from file\n        }\n    }\n\n    //print char array: Test 1\n    printf(\"\\nPrint from readInput() - Char Array before realloc: \");\n    for (int j = 0; j &lt; *charArraySize; j++)\n    {\n        printf(\"%c \", readCharArray[j]);\n    }\n    //Print int array\n    printf(\"\\nPrint from readInput() - Int Array before realloc: \");\n    for (int j = 0; j &lt; *intArraySize; j++)\n    {\n        printf(\"%d \", readValueArray[j]);\n    }\n\n    memCharReallocation(&amp;readCharArray, charArraySize);\n    memIntReallocation(&amp;readValueArray, intArraySize);\n\n    printf(\"\\nPrint from readInput() - Char Array after realloc: \");\n    for (int j = 0; j &lt; *charArraySize; j++)\n    {\n        printf(\"%c \", readCharArray[j]);\n    }\n    printf(\"\\nPrint from readInput() - Int After after realloc:\");\n    for (int j = 0; j &lt; *intArraySize; j++)\n    {\n        printf(\"%d \", readValueArray[j]);\n    }\n}\n\nvoid memCharReallocation(char **charArray, int requiredArraySize)//resize int array to what's actually required after reading the file\n{\n    char *ptempArray = NULL;\n\n    ptempArray = (char*)realloc(*charArray, requiredArraySize * sizeof(char*));\n\n    if (ptempArray == NULL)\n    {\n        printf(\"Could not allocate memory, exiting\");\n        exit(1);\n    }\n    else\n        *charArray = ptempArray;\n\n    if (ptempArray != *charArray)\n        free(ptempArray);\n}\n\nvoid memIntReallocation(int **valueArray, int intSize)//resize int array to what's actually required after reading the file\n{\n    int *ptempArray = NULL;\n\n    ptempArray = (int*)realloc(*valueArray, intSize* sizeof(int*));\n\n    if (ptempArray == NULL)\n    {\n        printf(\"Could not allocate memory, exiting\");\n        exit(1);\n    }\n    else\n        *valueArray = ptempArray;\n\n    if (ptempArray != *valueArray)\n        free(ptempArray);\n}\n\nvoid openFile(char *fileNames, FILE **inputFilePointer)\n{\n    printf(\"\\n\\n\");\n    //open files and error mssg\n    if ((*inputFilePointer = fopen(fileNames, \"r\")) == NULL) {\n        printf(\"Can't open input file %s\\n\", fileNames[1]);\n        exit(1);\n    }\n}\n\nvoid closeFile(FILE **inputFilePointer)\n{\n    //close files\n    fclose(*inputFilePointer);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 154, "user_id": 4194533, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/1717134784/picture?type=large", "display_name": "KulaDamian", "link": "https://stackoverflow.com/users/4194533/kuladamian"}, "edited": false, "score": 2, "creation_date": 1513149267, "post_id": 47787406, "comment_id": 82535884, "body": "Could you maybe post your code where you are doing this?"}, {"owner": {"reputation": 1, "user_id": 9092466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee568de9a31e06e0f1a443ad326f1697?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Pham", "link": "https://stackoverflow.com/users/9092466/jason-pham"}, "reply_to_user": {"reputation": 154, "user_id": 4194533, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/1717134784/picture?type=large", "display_name": "KulaDamian", "link": "https://stackoverflow.com/users/4194533/kuladamian"}, "edited": false, "score": 0, "creation_date": 1513149779, "post_id": 47787406, "comment_id": 82536112, "body": "@KulaDamian - updated with the link to compiler"}, {"owner": {"reputation": 154, "user_id": 4194533, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/1717134784/picture?type=large", "display_name": "KulaDamian", "link": "https://stackoverflow.com/users/4194533/kuladamian"}, "edited": false, "score": 0, "creation_date": 1513149830, "post_id": 47787406, "comment_id": 82536125, "body": "Ok, tell me one thing, what are you trying to accomplish with this line: bufptr += strlen(destString)"}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 2, "creation_date": 1513149881, "post_id": 47787406, "comment_id": 82536144, "body": "<code>fwrite</code> is already implemented, so you might wanna change the title."}, {"owner": {"reputation": 1, "user_id": 9092466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee568de9a31e06e0f1a443ad326f1697?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Pham", "link": "https://stackoverflow.com/users/9092466/jason-pham"}, "reply_to_user": {"reputation": 154, "user_id": 4194533, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/1717134784/picture?type=large", "display_name": "KulaDamian", "link": "https://stackoverflow.com/users/4194533/kuladamian"}, "edited": false, "score": 0, "creation_date": 1513150229, "post_id": 47787406, "comment_id": 82536288, "body": "@KulaDamian - I am trying to move the base address of bufptr"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513150922, "post_id": 47787406, "comment_id": 82536584, "body": "Please do not post links to off-site material.  Post the material in the question.  One reason for this is that the external site may not continue to show the material for the next 5+ years. You need to explain the difference between the two files linked.  You also need to read about how to create an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>).  What you link to is not an MCVE."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513150979, "post_id": 47787406, "comment_id": 82536611, "body": "Also note that in C there is no reason to ever use the keyword <code>auto</code>.  Don&#39;t use it."}, {"owner": {"reputation": 1, "user_id": 9092466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee568de9a31e06e0f1a443ad326f1697?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Pham", "link": "https://stackoverflow.com/users/9092466/jason-pham"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513151025, "post_id": 47787406, "comment_id": 82536632, "body": "@JonathanLeffler - I write auto because my professor will mark me down if I don&#39;t. I would love to not write auto"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1513151081, "post_id": 47787406, "comment_id": 82536673, "body": "You should post your code instead of trying to describe it"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1513151123, "post_id": 47787406, "comment_id": 82536704, "body": "Don&#39;t write <code>auto</code> in the code you post on SO.  It will simply get you negative attention.  Plus it will yea-much harder to spot plagiarism, etc.  Also, your professor has weird (very, very weird) requirements.  I&#39;d be worried about the standard of teaching you are getting."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513151285, "post_id": 47787406, "comment_id": 82536795, "body": "Note that an MCVE will have vastly fewer comments.  Yes, it takes effort to create an MCVE.  But not providing an MCVE makes it hard for those who might be willing to help you to see the meat of the code for the noise.  Zero comments might be an exaggeration; label stuff like the file name and the class are definitely not OK on SO; they&#39;re pointless noise here, whatever the rules of the submitted code are."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513152147, "post_id": 47787406, "comment_id": 82537225, "body": "In the client code, the two lines <code>fseek(fptr, sizeof(bufptr), SEEK_SET);     if (0 == fread(bufptr, sizeof(bufptr), fileSize, fptr))</code> are very curious.  If you&#39;re on a 64-bit machine, you skip over the first 8 bytes of the file; on a 32-bit machine, the first 4 bytes.  Then you try to read 8 (or 4) times the size of the file in bytes, which is going to cause confusion at best.  Earlier, you have <code>if (-1 == send(server_socket, fname, BUFLEN, 0))</code>; why on earth are you sending the full buffer when the name is much shorter?  Why not use <code>strlen(fname)</code> or <code>strlen(fname+1)</code>?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513152221, "post_id": 47787406, "comment_id": 82537266, "body": "You might also sensibly send the length of the file name so that the server knows how much to read.  If you stick with sending the full length of the <code>fname</code> variable, the server must ignore everything after the null byte of the first BUFLEN bytes of data that it reads."}, {"owner": {"reputation": 1, "user_id": 9092466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee568de9a31e06e0f1a443ad326f1697?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Pham", "link": "https://stackoverflow.com/users/9092466/jason-pham"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513152592, "post_id": 47787406, "comment_id": 82537440, "body": "@JonathanLeffler - how would I go about to avoid skipping over the first couple of bytes?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513152633, "post_id": 47787406, "comment_id": 82537462, "body": "<code>fseek(fptr, 0, SEEK_SET)</code>.  In the server, after you&#39;ve collected the filename from that first block, you should be ignoring everything else.  It was garbage in the client that sent it; it isn&#39;t any better in the server.  Functions like <code>send()</code> send exactly what they&#39;re told to send; they don&#39;t stop at null bytes or anything."}, {"owner": {"reputation": 1, "user_id": 9092466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee568de9a31e06e0f1a443ad326f1697?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Pham", "link": "https://stackoverflow.com/users/9092466/jason-pham"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513153451, "post_id": 47787406, "comment_id": 82537900, "body": "@JonathanLeffler   But when I send it over and ignore the garbage I am missing a few lines from the beginning of file that was supposed to be sent over"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513154217, "post_id": 47787406, "comment_id": 82538275, "body": "Given that <code>bufptr</code> is uninitialized in <code>CopyFile()</code> in the server when you read the name, you&#39;re very (un)lucky that the program didn&#39;t simply crash."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9092466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee568de9a31e06e0f1a443ad326f1697?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Pham", "link": "https://stackoverflow.com/users/9092466/jason-pham"}, "edited": false, "score": 0, "creation_date": 1513150205, "post_id": 47787596, "comment_id": 82536280, "body": "I thought that bufptr += strlen(destString) already moves the base location to after the null"}, {"owner": {"reputation": 581, "user_id": 5863848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3w85.jpg?s=128&g=1", "display_name": "NishanthSpShetty", "link": "https://stackoverflow.com/users/5863848/nishanthspshetty"}, "reply_to_user": {"reputation": 1, "user_id": 9092466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee568de9a31e06e0f1a443ad326f1697?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Pham", "link": "https://stackoverflow.com/users/9092466/jason-pham"}, "edited": false, "score": 0, "creation_date": 1513150358, "post_id": 47787596, "comment_id": 82536347, "body": "No, it wont. You are asking <code>strcpy</code> to copy charcater at a location pointed by one pointer (as a source) to the location pointed by another(as a desination), there is no pointer updation happening."}, {"owner": {"reputation": 1, "user_id": 9092466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee568de9a31e06e0f1a443ad326f1697?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Pham", "link": "https://stackoverflow.com/users/9092466/jason-pham"}, "edited": false, "score": 0, "creation_date": 1513150976, "post_id": 47787596, "comment_id": 82536608, "body": "I made an edit and used a while loop instead to get the name of the file and update the value of bufptr but I am still getting an error when it writes it out"}, {"owner": {"reputation": 581, "user_id": 5863848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3w85.jpg?s=128&g=1", "display_name": "NishanthSpShetty", "link": "https://stackoverflow.com/users/5863848/nishanthspshetty"}, "reply_to_user": {"reputation": 1, "user_id": 9092466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee568de9a31e06e0f1a443ad326f1697?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Pham", "link": "https://stackoverflow.com/users/9092466/jason-pham"}, "edited": false, "score": 0, "creation_date": 1513151078, "post_id": 47787596, "comment_id": 82536669, "body": "Do not update the <code>bufptr</code>. Leave it as it is. You are moving the pointer to some junk, which is exactly what you seeing in the file it written to."}, {"owner": {"reputation": 1, "user_id": 9092466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee568de9a31e06e0f1a443ad326f1697?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Pham", "link": "https://stackoverflow.com/users/9092466/jason-pham"}, "edited": false, "score": 0, "creation_date": 1513151253, "post_id": 47787596, "comment_id": 82536778, "body": "would I still write fwrite(bufptr, 1, 512 - strlen(destString), fp) or would I write fwrite(bufptr, 1, 512, fp)"}, {"owner": {"reputation": 581, "user_id": 5863848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3w85.jpg?s=128&g=1", "display_name": "NishanthSpShetty", "link": "https://stackoverflow.com/users/5863848/nishanthspshetty"}, "reply_to_user": {"reputation": 1, "user_id": 9092466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee568de9a31e06e0f1a443ad326f1697?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Pham", "link": "https://stackoverflow.com/users/9092466/jason-pham"}, "edited": false, "score": 0, "creation_date": 1513156736, "post_id": 47787596, "comment_id": 82539774, "body": "<code>fwrite(bufptr, 1,strlen(bufptr), fp)</code> will do the job"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 1, "user_id": 9092466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee568de9a31e06e0f1a443ad326f1697?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Pham", "link": "https://stackoverflow.com/users/9092466/jason-pham"}, "edited": false, "score": 0, "creation_date": 1513159762, "post_id": 47787596, "comment_id": 82541673, "body": "@JasonPham Please do not edit qour code after you got answers. This makes it terribly hard to follow what is obsolete or not."}], "tags": [], "owner": {"reputation": 581, "user_id": 5863848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3w85.jpg?s=128&g=1", "display_name": "NishanthSpShetty", "link": "https://stackoverflow.com/users/5863848/nishanthspshetty"}, "is_accepted": false, "score": 2, "last_activity_date": 1513149885, "creation_date": 1513149885, "answer_id": 47787596, "question_id": 47787406, "link": "https://stackoverflow.com/questions/47787406/how-to-correctly-use-fwrite/47787596#47787596", "title": "How to correctly use fwrite?", "body": "<p><code>bufptr</code> is not pointing to the content of the buffer,Because of <code>bufptr += strlen(destString)</code> , Its pointing to the location next to the content. Update the value of <code>bufptr</code> to point to the content you actually want to write.</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 1, "last_activity_date": 1513154727, "creation_date": 1513154727, "answer_id": 47788804, "question_id": 47787406, "link": "https://stackoverflow.com/questions/47787406/how-to-correctly-use-fwrite/47788804#47788804", "title": "How to correctly use fwrite?", "body": "<p>There are two sets of problems in the code (some of them diagnosed in comments made to question).  First, you write a full length buffer even though it contains mostly junk, and then you try to interpret that as part of the file, but it isn't.  And second, you're playing with an uninitialized variable in the client file copy code \u2014 you're (un)lucky it didn't crash.</p>\n\n<p>This code works.</p>\n\n<h3><code>fcserver.c</code></h3>\n\n<pre><code>#include    &lt;stdio.h&gt;\n#include    &lt;stdlib.h&gt;\n#include    &lt;string.h&gt;\n#include    &lt;unistd.h&gt;\n#include    &lt;sys/types.h&gt;\n#include    &lt;netinet/in.h&gt;\n#include    &lt;sys/socket.h&gt;\n\n#define BUFLEN              512\n#define SERVER_PORT         50004\n\nvoid    CopyFile(int src_sock);\n\nint     main(void)\n{\n    socklen_t client_addr_size;\n    int client_socket;\n    int server_socket;\n    struct sockaddr_in server_address;\n\n    puts(\"Welcome to fcserver!\");\n    puts(\"Waiting to recieve file from client...\");\n\n    server_socket = socket(AF_INET, SOCK_STREAM, 0);\n\n    memset(&amp;server_address, 0, sizeof(server_address));\n    server_address.sin_family = AF_INET;\n    server_address.sin_addr.s_addr = htonl(INADDR_ANY);\n    server_address.sin_port = htons(SERVER_PORT);\n\n    if (bind(server_socket, (struct sockaddr *)&amp;server_address, sizeof(server_address)))\n    {\n        perror(\"server -- bind failed\");\n    }\n\n    if (listen(server_socket, 5))\n    {\n        perror(\"server -- bind failed\");\n    }\n\n    puts(\"server waiting...\");\n\n    client_addr_size = sizeof(server_address);\n    client_socket = accept(server_socket, (struct sockaddr *)&amp;server_address, &amp;client_addr_size);\n\n    CopyFile(client_socket);\n\n    close(client_socket);\n    close(server_socket);\n\n    return 0;\n}\n\nvoid     CopyFile(int src_sock)\n{\n    char buf[BUFLEN];\n    char fname[BUFLEN];\n    FILE *fptr;\n    int num_client_bytes;\n    unsigned long total_bytes = 0;\n\n    if (-1 == (num_client_bytes = recv(src_sock, fname, BUFLEN, 0)))\n    {\n        perror(\"server -- recv failed\");\n        exit(1);\n    }\n\n    printf(\"File name: [%s]\\n\", fname);\n    fptr = fopen(fname, \"w\");\n    if (fname == 0)\n    {\n        perror(fname);\n        exit(1);\n    }\n\n    while ((num_client_bytes = recv(src_sock, buf, BUFLEN, 0)) &gt; 0)\n    {\n        printf(\"read a total of %d bytes\\n\", num_client_bytes);\n        total_bytes += fwrite(buf, 1, num_client_bytes, fptr);\n    }\n\n    fclose(fptr);\n\n    printf(\"there were a total of %lu bytes written\\n\", total_bytes);\n}\n</code></pre>\n\n<p>That's 85 lines, instead of 170-odd lines.</p>\n\n<h3><code>fcclient.c</code></h3>\n\n<pre><code>#include    &lt;sys/types.h&gt;\n#include    &lt;sys/socket.h&gt;\n#include    &lt;stdio.h&gt;\n#include    &lt;stdlib.h&gt;\n#include    &lt;sys/un.h&gt;\n#include    &lt;unistd.h&gt;\n#include    &lt;string.h&gt;\n#include    &lt;netinet/in.h&gt;\n\n#define BUFLEN          256\n#define SERVER_PORT     50004\n\nint     main(void)\n{\n    int server_socket;\n    struct sockaddr_in server_address;\n    char fname[BUFLEN] = \"\";\n    char                *bufptr;\n    FILE                *fptr;\n    size_t fileSize;\n\n    puts(\"Welcome to fcclient!\");\n\n    printf(\"Please enter in the filename: \");\n    scanf(\"%s\", fname);\n\n    fptr = fopen(fname, \"r\");\n    if (fptr == NULL)\n    {\n        printf(\"Sorry there was an error trying to locate the file. Please exit and try again \\n\");\n        return 0;\n    }\n\n    fseek(fptr, 0, SEEK_END);\n    fileSize = ftell(fptr);\n    fseek(fptr, 0, SEEK_SET);\n\n    bufptr = malloc(sizeof(char) * fileSize);\n\n    server_socket = socket(AF_INET, SOCK_STREAM, 0);\n\n    memset(&amp;server_address, 0, sizeof(server_address));\n    server_address.sin_family = AF_INET;\n    server_address.sin_port = htons(SERVER_PORT);\n    server_address.sin_addr.s_addr = htonl(INADDR_LOOPBACK);\n    printf(\"Currently connecting to server... \\n\");\n\n    if (-1 == connect(server_socket, (struct sockaddr *)&amp;server_address, sizeof(server_address)))\n        perror(\"client -- connect failed\");\n\n    if (-1 == send(server_socket, fname, BUFLEN, 0))\n        perror(\"client -- send failed\");\n\n    fseek(fptr, 0, SEEK_SET);\n    if (fileSize != fread(bufptr, sizeof(char), fileSize, fptr))\n    {\n        printf(\"There was an error sorry. \\n\");\n        return 0;\n    }\n\n    if (-1 == send(server_socket, bufptr, fileSize, 0))\n        perror(\"client -- send failed\");\n\n    fclose(fptr);\n    close(server_socket);\n\n    return 0;\n}\n</code></pre>\n\n<p>That's 68 lines instead of 170-odd lines.</p>\n\n<h3>Testing</h3>\n\n<p>It is crucial to run the server in a different directory from the client, else you could get files truncated.  However, when I used a sub-directory <code>junk</code> containing a file <code>animals19.c</code> and ran the client in that directory, while the server ran in the parent directory, I got the output:</p>\n\n<p><strong>server window</strong></p>\n\n<pre><code>$ ./fcserver\nWelcome to fcserver!\nWaiting to recieve file from client...\nserver waiting...\nFile name: [animals19.c]\nread a total of 512 bytes\nread a total of 292 bytes\nthere were a total of 804 bytes written\n$\n</code></pre>\n\n<p><strong>client window</strong></p>\n\n<pre><code>$ ../fcclient\nWelcome to fcclient!\nPlease enter in the filename: animals19.c\nCurrently connecting to server... \n$ ls -l animals19.c ../animals19.c\n-rw-r--r--  1 jleffler  staff  804 Dec 13 00:42 ../animals19.c\n-rw-r--r--  1 jleffler  staff  804 Dec  3 21:54 animals19.c\n$ diff animals19.c ../animals19.c\n$\n</code></pre>\n\n<p>Oh, and at some point, you should note \"i before e except after c\" (so it is <code>receive</code> and not <code>recieve</code>).  You should also note that <code>perror()</code> prints an error; it does not exit.  Continuing after using <code>perror()</code> is usually wrong.</p>\n"}], "owner": {"reputation": 1, "user_id": 9092466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee568de9a31e06e0f1a443ad326f1697?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Pham", "link": "https://stackoverflow.com/users/9092466/jason-pham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "closed_date": 1513195019, "answer_count": 2, "score": -3, "last_activity_date": 1513154727, "creation_date": 1513149034, "last_edit_date": 1513151717, "question_id": 47787406, "link": "https://stackoverflow.com/questions/47787406/how-to-correctly-use-fwrite", "closed_reason": "Not suitable for this site", "title": "How to correctly use fwrite?", "body": "<p>So I have a char* called bufptr that is of size 512. Within the first couple of spots is the name of the file that I will be reading from and everything else after that is data.</p>\n\n<p>ex. <code>char* bufptr = {'f', 'o', 'o', '.', 'c', '\\0', ...}</code></p>\n\n<p>I did not initialize it like that but that is the general idea</p>\n\n<p>After this I store the name of the file into a different file using strcpy</p>\n\n<p>ex. </p>\n\n<pre><code>auto int i = 0;\nwhile(*bufptr != '\\0')\n{\n    fname[i++] = *bufptr;\n    bufptr++;\n}\nbufptr++;\n</code></pre>\n\n<p>After that, I open up the file </p>\n\n<p>What I am having problems with is the fwrite portion.</p>\n\n<p>I tried writing <code>fwrite(bufptr, 1, 512 - strlen(destString), fp)</code></p>\n\n<p>but instead of </p>\n\n<pre><code>// ============================================================================\n// File: fcclient.c (Fall 2017)\n// ============================================================================\n</code></pre>\n\n<p>I got <code>\u00fe================================================</code></p>\n\n<p>How would I correctly call fwrite so that I don't run into this issue or is it because I am not skipping over the null? Or does string have something before or after the null?</p>\n\n<p><strong>edit</strong>:\nI added a loop to check over bufptr and got this as the output</p>\n\n<pre><code>fcclient.c\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592id\u2592.N=\u2592C\u2592h\u2592\u2592\u2592.8\u2592\u2592l\u2592 \u2592 \u2592\u2592\u2592`\u2592 \u2592P\u2592\u2592\u2592H\u2592\n\u2592`\u2592djd\u2592\u2592dd\u2592\u2592@\u2592\n\u2592@\u2592(\u2592d\u2592p\u2592\u2592jd\u2592\u2592\u2592\u2592\u2592\u0411d\u2592=======================================================================\n// File: fcclient.c (Fall 2017)\n// ============================================================================\n// This program is a file transfer client. The user at the keyboard is pread a total of 1 bytes\n</code></pre>\n\n<p>this was the loop I used</p>\n\n<pre><code>auto int t = 0;\nfor(; t &lt; 512; t+=)\n   if(*(bufptr + t) != '\\0')\n     printf(\"%c\", *(bufptr + t));\n</code></pre>\n\n<p>Here is the server code</p>\n\n<pre><code>#include    &lt;stdio.h&gt;\n#include    &lt;stdlib.h&gt;\n#include    &lt;string.h&gt;\n#include    &lt;unistd.h&gt;\n#include    &lt;sys/types.h&gt;\n#include    &lt;netinet/in.h&gt;\n#include    &lt;sys/socket.h&gt;\n\n// prototypes\nint     CopyFile(int  src_sock);\n\n// defined constants\n#define BUFLEN              512\n#define SERVER_PORT         50004 \n#define TRUE                1\n#define FALSE               0\n\n// function prototypes\nint     CopyFile(int  src_sock);\n\n\n\n\nint     main(void)\n{\n    auto    char                buf[BUFLEN];       // local buffer\n    auto    socklen_t           client_addr_size;  // used for call to accept\n    auto    int                 client_socket;     // used for call to accept\n    auto    int                 server_socket;     // used for call to socket\n    auto    struct sockaddr_in  client_address;    // used for call to accept\n    auto    struct sockaddr_in  server_address;    // used for call to bind\n\n    // greet the user\n    puts(\"Welcome to fcserver!\");\n    puts(\"Waiting to recieve file from client...\");\n\n    // create a socket for the server\n    server_socket = socket(AF_INET, SOCK_STREAM, 0);\n\n    // prepare the socket address structure for the server\n    memset(&amp;server_address, 0, sizeof(server_address));\n    server_address.sin_family = AF_INET;\n    server_address.sin_addr.s_addr = htonl(INADDR_ANY);\n    server_address.sin_port = htons(SERVER_PORT);\n\n    // bind the server socket to an address, using the address structure\n    if(bind(server_socket, (struct sockaddr*) &amp;server_address, sizeof(server_address)))\n    {\n        perror(\"server -- bind failed\");\n    }\n\n    // put the server socket into a listening state\n    if(listen(server_socket, 5))\n    {   \n        perror(\"server -- bind failed\");\n    }\n\n    // let stdout know the server is waiting for a connection\n    puts(\"server waiting...\");\n\n    // wait for an actual client connection (this will block)\n    client_addr_size = sizeof(server_address);\n    client_socket = accept(server_socket, (struct sockaddr*) &amp;server_address, &amp;client_addr_size);\n\n\n    CopyFile(client_socket);\n\n    // close the client and server sockets\n    close(client_socket);\n    close(server_socket);\n\n    return 0;\n\n}  // end of \"main\"\n\n\n\n\n\nint     CopyFile(int  src_sock)\n{\n    auto    char                        buf[BUFLEN];\n    auto    char                        *bufptr;\n    auto    char                        fname[BUFLEN];\n    auto    FILE*                       fptr;\n    auto    int                         num_client_bytes;\n    auto    unsigned long               total_bytes = 0;\n\n\n\n    if(-1 == (num_client_bytes = recv(src_sock, bufptr, BUFLEN, 0)))\n        perror(\"server -- recv failed\");\n\n\n    strcpy(fname, bufptr);;\n    auto int t = 0;\n    for(; t&lt; num_client_bytes; t++)\n    {\n        if(*(bufptr + t) != '\\0')\n            printf(\"%c\", *(bufptr + t));\n    }\n\n\n    fptr = fopen(fname, \"w\");\n\n\n    auto  int i = strlen(fname) +1;\n    bufptr += i;\n    total_bytes = fwrite(bufptr, sizeof(bufptr), 1, fptr);\n    printf(\"read a total of %lu bytes \\n\", total_bytes);\n\n\n    // loop and read the rest of the file from the client\n    do  {\n\n        if(num_client_bytes == 0)\n            break;\n\n\n        printf(\"read a total of %d bytes \\n\", num_client_bytes);\n\n\n        total_bytes += fwrite(buf, 1, num_client_bytes, fptr);\n\n        } while (TRUE);\n\n\n\n    fclose(fptr);\n\n    printf(\"there were a total of %lu bytes written \\n\", total_bytes);\n\n    return TRUE;\n\n}  // end of \"CopyFile\"\n</code></pre>\n\n<p>Here is the client file</p>\n\n<pre><code>  // ============================================================================\n// File: fcclient.c (Fall 2017)\n// ============================================================================\n\n#include    &lt;sys/types.h&gt;\n#include    &lt;sys/socket.h&gt;\n#include    &lt;stdio.h&gt;\n#include    &lt;stdlib.h&gt;\n#include    &lt;sys/un.h&gt;\n#include    &lt;unistd.h&gt;\n#include    &lt;string.h&gt;\n#include    &lt;netinet/in.h&gt;\n\n#define BUFLEN          256\n#define SERVER_PORT     50004\n\n\nint     main(void)\n{\n    auto    char                buf[BUFLEN];       // general purpose buffer\n    auto    int                 server_socket;     // used for server socket\n    auto    struct sockaddr_in  server_address;    // used for server address\n    auto    char                fname[BUFLEN];     // used for filename\n    auto    char                *bufptr;           // used for heap block\n    auto    FILE                *fptr;             // used for input file\n    auto    int                 result;            // used to check return values\n    auto    long                fileSize;          // used to store file size\n\n    // greet the user\n    puts(\"Welcome to fcclient!\");\n\n    // get the filename from stdin\n    printf(\"Please enter in the filename: \");\n    scanf(\"%s\", fname);\n\n    // open the input file\n    fptr = fopen(fname, \"r\");\n    if(fptr == NULL)\n    {\n        printf(\"Sorry there was an error trying to locate the file. Please exit and try again \\n\");\n        return 0;\n    }\n\n    // get the size of the file\n    fseek(fptr, 0, SEEK_END);\n    fileSize = ftell(fptr);\n    fseek(fptr, 0, SEEK_SET);\n\n    // allocate a buffer to store the file in heap memory\n    bufptr = malloc(sizeof(char) * fileSize);\n\n    // create a socket to connect with the server\n    server_socket = socket(AF_INET, SOCK_STREAM, 0);\n\n    // setup a socket address structure to target the server\n    memset(&amp;server_address, 0, sizeof(server_address));\n    server_address.sin_family = AF_INET;\n    server_address.sin_port = htons(SERVER_PORT);\n    server_address.sin_addr.s_addr = htonl(INADDR_LOOPBACK);\n    printf(\"Currently connecting to server... \\n\");\n\n    // connect to the server\n    if(-1 == connect(server_socket, (struct sockaddr*) &amp;server_address, sizeof(server_address)))\n        perror(\"client -- connect failed\"); \n\n    // send the filename to the server (include the NULL!)\n    if(-1 == send(server_socket, fname, BUFLEN, 0))\n        perror(\"client -- send failed\");\n\n    // read the file into the allocated buffer\n    fseek(fptr, sizeof(bufptr),SEEK_SET); \n    if(0 == fread(bufptr, sizeof(bufptr), fileSize, fptr))\n    {\n        printf(\"There was an error sorry. \\n\");\n        return 0;\n    }\n\n    // send the data to the server\n    if(-1 == send(server_socket, bufptr, fileSize, 0))\n            perror(\"client -- send failed\");\n\n    // close the input file and the sockets\n    fclose(fptr);\n    close(server_socket);\n\n    return 0;\n\n}  // end of \"main\"\n</code></pre>\n"}, {"tags": ["c", "vivado-hls"], "answers": [{"tags": [], "owner": {"reputation": 4345, "user_id": 46192, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/76fb4d5b2112870b4bc4232ace7fc375?s=128&d=identicon&r=PG", "display_name": "haggai_e", "link": "https://stackoverflow.com/users/46192/haggai-e"}, "is_accepted": true, "score": 0, "last_activity_date": 1513234528, "creation_date": 1513234528, "answer_id": 47807525, "question_id": 47786233, "link": "https://stackoverflow.com/questions/47786233/vivado-hls-how-to-declare-total-width-of-the-variable-in-arbitrary-precision/47807525#47807525", "title": "VIVADO HLS: How to declare &quot;total width of the variable&quot; in Arbitrary Precision Types?", "body": "<p>The width of an arbitrary precision type refer to the number of bits in the variable, and it is orthogonal to storing precision types in an array.</p>\n\n<p>For instance, if you want 102 elements of 4 bits, you would use:</p>\n\n<pre><code>int4 array[102];\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 8815592, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S6RYWokGI9o/AAAAAAAAAAI/AAAAAAAAAm0/cgwd7C_-7Ls/photo.jpg?sz=128", "display_name": "4am", "link": "https://stackoverflow.com/users/8815592/4am"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 47807525, "answer_count": 1, "score": 0, "last_activity_date": 1513234528, "creation_date": 1513143552, "last_edit_date": 1513145363, "question_id": 47786233, "link": "https://stackoverflow.com/questions/47786233/vivado-hls-how-to-declare-total-width-of-the-variable-in-arbitrary-precision", "title": "VIVADO HLS: How to declare &quot;total width of the variable&quot; in Arbitrary Precision Types?", "body": "<p>I am working with XILINX VIVADO HLS in which I need to run C/C++ codes with \"Arbitrary Precision Types\". So, I have gone through the \"Arbitrary Precision Types\" topics in UG902 Xilinx guidebook.But I am not clear on the topic. I don't know how to initialize\"total width of the variable\". Can anyone explain me with examples?</p>\n\n<pre><code> int#W,\n uint#W\n</code></pre>\n\n<p>The number #W specifies the total width of the variable being declared.\nSuppose my array size is 102 (1D-array) or 102x204 (2d array). How u will declare \"total width of the variable\".  </p>\n"}, {"tags": ["c", "operating-system", "system", "freebsd"], "comments": [{"owner": {"reputation": 34412, "user_id": 4862445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ppXKM.jpg?s=128&g=1", "display_name": "Richard Smith", "link": "https://stackoverflow.com/users/4862445/richard-smith"}, "edited": false, "score": 0, "creation_date": 1513160532, "post_id": 47786198, "comment_id": 82542193, "body": "Just a guess, but <i>x</i> seems to be used as an abbreviation for <i>export</i> and separates the interface specification from the internal data structure - thus allowing the kernel to evolve whilst maintaining a consistent ABI."}, {"owner": {"reputation": 31, "user_id": 8943517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab1cf77f7928a05b02fafaf7e708f9b?s=128&d=identicon&r=PG&f=1", "display_name": "nalin kanoongo", "link": "https://stackoverflow.com/users/8943517/nalin-kanoongo"}, "reply_to_user": {"reputation": 34412, "user_id": 4862445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ppXKM.jpg?s=128&g=1", "display_name": "Richard Smith", "link": "https://stackoverflow.com/users/4862445/richard-smith"}, "edited": false, "score": 0, "creation_date": 1513163340, "post_id": 47786198, "comment_id": 82544063, "body": "@RichardSmith ABI ? and why do we need to saperate the internal specification from internal data structure? There are inbuilt ways to get the data for these structures from the kernel in a way that we can&#39;t change the values inside these structures. So why &#39;x&#39; ? We anyway do not interact with the original data structure . Its the kernel call that do it for us if we need any data . Right?"}, {"owner": {"reputation": 31, "user_id": 8943517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab1cf77f7928a05b02fafaf7e708f9b?s=128&d=identicon&r=PG&f=1", "display_name": "nalin kanoongo", "link": "https://stackoverflow.com/users/8943517/nalin-kanoongo"}, "reply_to_user": {"reputation": 34412, "user_id": 4862445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ppXKM.jpg?s=128&g=1", "display_name": "Richard Smith", "link": "https://stackoverflow.com/users/4862445/richard-smith"}, "edited": false, "score": 0, "creation_date": 1513163523, "post_id": 47786198, "comment_id": 82544184, "body": "@RichardSmith Also any idea where I can get the concrete answer. No-one seems to be replying on this thread."}, {"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "edited": false, "score": 0, "creation_date": 1513224136, "post_id": 47786198, "comment_id": 82572799, "body": "as it was noted x-structs are there so that in-kernel implementation can change in whatever way developers see fit <i>without</i> breaking userspace - userspace will still get the very same data in very same way. in order to find out how to use this stuff you can just inspect existing programs using it, like sockstat, fstat or procstat"}, {"owner": {"reputation": 31, "user_id": 8943517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab1cf77f7928a05b02fafaf7e708f9b?s=128&d=identicon&r=PG&f=1", "display_name": "nalin kanoongo", "link": "https://stackoverflow.com/users/8943517/nalin-kanoongo"}, "reply_to_user": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "edited": false, "score": 0, "creation_date": 1513255407, "post_id": 47786198, "comment_id": 82588575, "body": "@employeeofthemonth &quot;in-kernel implementation can change in whatever way developers see fit without breaking userspace&quot; Kindly elaborate on this. And plz post that as an answer"}], "owner": {"reputation": 31, "user_id": 8943517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab1cf77f7928a05b02fafaf7e708f9b?s=128&d=identicon&r=PG&f=1", "display_name": "nalin kanoongo", "link": "https://stackoverflow.com/users/8943517/nalin-kanoongo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513146641, "creation_date": 1513143358, "last_edit_date": 1513146641, "question_id": 47786198, "link": "https://stackoverflow.com/questions/47786198/what-is-the-need-of-the-xfile-variable", "title": "What is the need of the xfile variable", "body": "<p>I am new to system programming. I was going through the header file in <code>file.h</code> in FreeBSD as I needed it for some code. The thing I don't understand is what is the need of the <code>xfile</code> variable and what is the <code>xf_data</code> field. In the sockstat code they have used this xf_data field equating it to the socket (<code>struct socket *</code>). Moreover I have seen that there are several places where there is a 'x' prefixed data structure. I don't exactly understand the need of these 'x' prefixed variables. For example. in inpcb.h header file there is a inpcb data structure and a xinpcb data structure. Same with tcpcb and the socket data structures. </p>\n\n<ul>\n<li>file.h (why xfile?): <a href=\"https://github.com/freebsd/freebsd/blob/master/sys/sys/file.h\" rel=\"nofollow noreferrer\">https://github.com/freebsd/freebsd/blob/master/sys/sys/file.h</a></li>\n<li>in_pcb.h (why xinpcb?) : <a href=\"https://github.com/freebsd/freebsd/blob/master/sys/netinet/in_pcb.h\" rel=\"nofollow noreferrer\">https://github.com/freebsd/freebsd/blob/master/sys/netinet/in_pcb.h</a></li>\n<li>socketvar.h (why xsocket?): <a href=\"https://github.com/freebsd/freebsd/blob/master/sys/sys/socketvar.h\" rel=\"nofollow noreferrer\">https://github.com/freebsd/freebsd/blob/master/sys/sys/socketvar.h</a></li>\n<li>sockstat.c : <a href=\"https://searchcode.com/codesearch/view/456928/\" rel=\"nofollow noreferrer\">https://searchcode.com/codesearch/view/456928/</a> </li>\n</ul>\n\n<p>In sockstat.c line 673 they have equated <code>xf_data</code> in <code>xfiles</code> structure with the socket structure. Does this meant that both are the same thing? </p>\n"}, {"tags": ["c", "multidimensional-array", "dynamic-arrays", "realloc"], "comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 2, "creation_date": 1513142662, "post_id": 47786016, "comment_id": 82533163, "body": "You don&#39;t have a 2d array here. Why do you assume that <code>realloc()</code> has failed, when you don&#39;t check the value returned by <code>realloc()</code>? When you find yourself using 3 stars, consider rethinking the program design."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1513142826, "post_id": 47786016, "comment_id": 82533218, "body": "<a href=\"https://stackoverflow.com/questions/42094465/correctly-allocating-multi-dimensional-arrays\">You might want to read this</a>"}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1513143502, "creation_date": 1513143502, "answer_id": 47786218, "question_id": 47786016, "link": "https://stackoverflow.com/questions/47786016/best-way-to-realloc-a-2d-array-in-c/47786218#47786218", "title": "best way to realloc a 2d array in c?", "body": "<p>C don't have multidimensional arrays (only arrays of arrays, or arrays of pointers). So consider some <a href=\"https://stackoverflow.com/a/47235897/841108\">better approach</a>, where you'll have some abstract data type (e.g. for your matrix-like objects, which keep their dimension).</p>\n\n<p>Of course, you'll better <em>explicitly</em> initialize every cell when redimensioning your board.</p>\n\n<p>And don't forget to test failure of <code>malloc</code>, <code>calloc</code>, <code>realloc</code> </p>\n\n<p>Compile your code with all warnings and debug info (<code>gcc -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>) and <a href=\"https://sourceware.org/gdb/current/onlinedocs/gdb/\" rel=\"nofollow noreferrer\">use the debugger <code>gdb</code></a> and <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a>.</p>\n"}], "owner": {"reputation": 19, "user_id": 8333727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7997c54fed7c12b611da9d718d93b5bc?s=128&d=identicon&r=PG&f=1", "display_name": "GavinBarrett", "link": "https://stackoverflow.com/users/8333727/gavinbarrett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 750, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1513143502, "creation_date": 1513142424, "question_id": 47786016, "link": "https://stackoverflow.com/questions/47786016/best-way-to-realloc-a-2d-array-in-c", "title": "best way to realloc a 2d array in c?", "body": "<p>I have to implement a function for a project in one of my classes and I am having trouble with resizing the dimensions of a 2-D dynamic array, represented as a board of characters. If I resize a board of a size such as 10 X 10 to a smaller board such as 5 X 5, the resize seems to work properly and truncates the arrays accordingly. However, if I try to increase the size of the board I get strange results or segmentation faults, I'm assuming because realloc somehow failed. Any feedback at all would be helpful; I am trying my best to understand pointers and can't seem to wrap my head around how to accomplish this without memory errors. In the larger program that I am writing I have a function to free the allocated memory of the board, but here I am mainly concerned about the way I have implemented realloc.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar** constructBoard(int num_rows, int num_cols, char empty_space){\n//this function dynamically allocates a matrix of chars\n  char** board = (char**)malloc(num_rows * sizeof(char*));\n  for(int row = 0; row &lt; num_rows; ++row){\n    board[row] = (char*)malloc(num_cols * sizeof(char));\n    for(int col = 0; col &lt; num_cols; ++col){\n      board[row][col] = empty_space;\n    }\n  }\n  return board;\n}\n\nvoid displayBoard(char** board, const int num_rows, const int num_cols){\n//this function prints out the board\n  int rowNum = num_rows - 1;\n  for(int row = 0; row &lt; num_rows; ++row){\n    if(num_rows - row &lt;= 10) {\n      printf(\" \");\n      printf(\"%d \", rowNum);\n    }\n    else{\n      printf(\"%d \", rowNum);\n    }\n    rowNum = rowNum - 1;\n    for(int col = 0; col &lt; num_cols; ++col){\n      printf(\" %c\", board[row][col]);\n      printf(\" \");\n    }\n    printf(\"\\n\");\n  }\n  printf(\"  \");\n  for(int i = 0; i &lt; num_cols; ++i){\n    if(i == 0){\n      printf(\"  %d\", i);\n      printf(\" \");\n    }\n    else if(i &lt; 10) {\n      printf(\" %d\", i);\n      printf(\" \");\n    }\n    else{\n      printf(\"%d\", i);\n      printf(\" \");\n    }\n  }\n  printf(\"\\n\");\n}\n\nvoid resizeBoard(char*** board, int new_num_row, int new_num_col, int* num_rows, int* num_cols){\n//this function is supposed to resize the dimensions of the board without causing memory leaks\n  (*board) = realloc(*board, (new_num_row * sizeof(char*)));\n  for(int y = *num_rows; y &lt; new_num_row; ++y){\n    (**board)[y] = '*';\n  }\n  for(int x = 0; x &lt; new_num_row; ++x){\n    (*board)[x] = realloc((*board)[x], new_num_col * sizeof(char));\n  }\n\n  *num_rows = new_num_row;\n  *num_cols = new_num_col;\n}\n\n\nint main() {\n  char empty_space = '*';\n  int num_rows = 5;\n  int num_cols = 5;\n  char** board;\n  int new_num_row = 7;\n  int new_num_col = 7;\n  board = constructBoard(num_rows, num_cols, empty_space);\n  displayBoard(board, num_rows, num_cols);\n\n  resizeBoard(&amp;board, new_num_row, new_num_col, &amp;num_rows, &amp;num_cols);\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "input", "scanf"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 4, "creation_date": 1513132060, "post_id": 47784575, "comment_id": 82530602, "body": "Nothing is reading the <code>&quot;ms&quot;</code>.  <code>fscanf(infile, &quot;time: %i&quot;, &amp;time);</code> --&gt; <code>if (fscanf(infile, &quot; time: %d ms&quot;, &amp;time[i]) == 1) Success();</code>  or better yet, 1st use <code>fgets()</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 6, "creation_date": 1513132247, "post_id": 47784575, "comment_id": 82530641, "body": "Tip: when code is not reading input as expected, insure code checks the return value from <code>fscanf()</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1513134327, "post_id": 47784575, "comment_id": 82531147, "body": "You cause undefined behaviour by using the wrong format specifier and scanf argument (on every single line)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1513135143, "post_id": 47784575, "comment_id": 82531320, "body": "Read the lines with <code>fgets()</code>; scan the lines with <code>sscanf()</code>.  Get the types right (temperature is a <code>double</code>; use <code>%lf</code> to read that value).  Use the arrays properly: <code>&amp;time[i]</code>, <code>&amp;temperature[i]</code>, etc.  Spell things correctly \u2014 <code>value1</code> defined; <code>val1</code> referenced.  Skip dash lines by reading and ignoring lines that start with a dash.  Skip blank lines by reading and ignoring lines that only contain blanks (or nothing).  Watch out for <code>fgets()</code> including the newline \u2014 that mostly won&#39;t matter.  Check the result of each <code>sscanf()</code>.  Don&#39;t loop from 0 to 100 when the arrays are size 10.  Etc."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1513135504, "post_id": 47784575, "comment_id": 82531425, "body": "Have you learned about structures yet? I assume not.  If you have, this cries out for the use of a structure type (or an array of a structure type)."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1513135377, "post_id": 47784931, "comment_id": 82531389, "body": "Note <a href=\"https://stackoverflow.com/questions/19499060/\">Trailing white space in <code>scanf()</code> format strings</a>.  You&#39;d do better with a leading blank on the format strings; that would skip white space, including newlines."}], "tags": [], "owner": {"reputation": 642, "user_id": 4610796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d51d71a6fba21336ea771c883c71582?s=128&d=identicon&r=PG&f=1", "display_name": "abdullah", "link": "https://stackoverflow.com/users/4610796/abdullah"}, "is_accepted": true, "score": 0, "last_activity_date": 1513134577, "creation_date": 1513134577, "answer_id": 47784931, "question_id": 47784575, "link": "https://stackoverflow.com/questions/47784575/get-number-after-colon-in-c/47784931#47784931", "title": "Get number after colon in C", "body": "<p>Your code contains several errors. You have used different variable names in iteration. You used wrong specifiers. </p>\n\n<pre><code>for (int i = 0; i &lt; 2; i++) {\n    fscanf(infile, \"time: %d %*s\\n\", &amp;time[i]);\n    fscanf(infile, \"temperature: %lf %*s\\n\", &amp;temperature[i]);\n    fscanf(infile, \"lightvalue: %i\\n\", &amp;light[i]);\n    fscanf(infile, \"value1: %lf\\n\", &amp;val1[i]);\n    fscanf(infile, \"value2: %i\\n\", &amp;val2[i]);\n    fscanf(infile, \"value3: %i\\n\", &amp;val3[i]);\n    fscanf(infile, \"%*s\\n\"); // to skip the \"---------------\" line\n}\n</code></pre>\n\n<p>To skip rest of the line, you may use <code>%*s</code> which will match the unused string. </p>\n"}], "owner": {"reputation": 11, "user_id": 9091719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07b9b22223fda43468ef70805b5e822?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Xie", "link": "https://stackoverflow.com/users/9091719/bob-xie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 768, "favorite_count": 0, "accepted_answer_id": 47784931, "answer_count": 1, "score": 0, "last_activity_date": 1513135356, "creation_date": 1513131941, "last_edit_date": 1513134657, "question_id": 47784575, "link": "https://stackoverflow.com/questions/47784575/get-number-after-colon-in-c", "title": "Get number after colon in C", "body": "<p>I'm trying to read the numbers after a colon and store the value in a variable, but when I print it, it prints a random 6 digit number. I only need to store the value, not the 'ms' or 'degrees'.</p>\n\n<p>For example, the text file is similar to this, but repeats for 100 set of values:</p>\n\n<pre><code>time: 20 ms\ntemperature: 50.5 degrees\nlightvalue: 30\nvalue1: 0.59\nvalue2: 1\nvalue3: 0\n----------------------\n\ntime: 40 ms\ntemperature: 37 degrees\nlightvalue: 10\nvalue1: 1.57\nvalue2: 0\nvalue3: 1\n----------------------\n</code></pre>\n\n<p>I want to store each number in a separate variable.</p>\n\n<p>Here is part of my code:</p>\n\n<pre><code>int time[10];\ndouble temperature[10];\nint lightvalue[10];\ndouble value1[10];\nint value2[10];\nint value3[10];\n\n\nfor (int i = 0; i &lt; 100; i++) {\n    fscanf(infile, \"time: %i\", &amp;time);\n    fscanf(infile, \"temperature: %d\", &amp;temperature);\n    fscanf(infile, \"lightvalue: %i\", &amp;light);\n    fscanf(infile, \"value1: %d\", &amp;val1);\n    fscanf(infile, \"value2: %i\", &amp;val2);\n    fscanf(infile, \"value3: %i\", &amp;val3);\n    //how to skip the \"---------------\" line?\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "buffer-overflow"], "comments": [{"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 0, "creation_date": 1513129271, "post_id": 47784242, "comment_id": 82529901, "body": "This looks like homework! What is your actual question?"}, {"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "reply_to_user": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 0, "creation_date": 1513129426, "post_id": 47784242, "comment_id": 82529952, "body": "It is just an exercise, I am just wondering how I should go about actually doing this, mainly an answer with an explanation."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1513129934, "post_id": 47784242, "comment_id": 82530096, "body": "Can you demonstrate <i>any</i> effort at solving this yourself?"}, {"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 0, "creation_date": 1513129942, "post_id": 47784242, "comment_id": 82530099, "body": "Think about the memory layout and how you can use the the <code>scanf</code> to overflow <code>array</code> to accomplish the task. Review notes from the class."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1513131026, "post_id": 47784242, "comment_id": 82530392, "body": "It is highly unlikely that you can store an address in a char.  In general you do not need a buffer overflow to assign a value to a pointer; you just need an assignment."}, {"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513131235, "post_id": 47784242, "comment_id": 82530440, "body": "How would I go about doing an assignment William?"}, {"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513138474, "post_id": 47784242, "comment_id": 82532071, "body": "I really would like some step by step help with this problem."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1513152001, "post_id": 47784407, "comment_id": 82537158, "body": "&quot;...by decrementing the stack pointer&quot;  Except on those systems where it increments the stack pointer."}], "tags": [], "owner": {"reputation": 8402, "user_id": 4664415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfxj.jpg?s=128&g=1", "display_name": "mevets", "link": "https://stackoverflow.com/users/4664415/mevets"}, "is_accepted": false, "score": 1, "last_activity_date": 1513130371, "creation_date": 1513130371, "answer_id": 47784407, "question_id": 47784242, "link": "https://stackoverflow.com/questions/47784242/buffer-overflow-in-c-with-pointers/47784407#47784407", "title": "Buffer overflow in C with pointers", "body": "<p>Generally, the compiler allocates automatic variables by decrementing the stack pointer by the necessary amount, and remembering that a variable name  means \u201csp + N\u201d.   So each of your local variables {a, ptr, c, array, ...} will have corresponding offsets from the stack pointer, say {16,12,8,4,...}.</p>\n\n<p>So, your task involves figuring out how your compiler lays out the stack [ there are no rules ], then the next steps should be apparent.</p>\n"}, {"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1513151169, "post_id": 47787763, "comment_id": 82536728, "body": "By &quot;StackOverflow policy&quot; I refer to <a href=\"https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\" title=\"how do i ask and answer homework questions\">meta.stackoverflow.com/questions/334822/&hellip;</a> The &quot;policy&quot; being that an answerer can choose one of the two largely different ways of answering described there and something of a compromise. Which one I chose should be obvious. Let me know if you consider &quot;StackOverflow policy&quot; an inappropriate term to describe this."}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 0, "last_activity_date": 1513230685, "last_edit_date": 1513230685, "creation_date": 1513150606, "answer_id": 47787763, "question_id": 47784242, "link": "https://stackoverflow.com/questions/47784242/buffer-overflow-in-c-with-pointers/47787763#47787763", "title": "Buffer overflow in C with pointers", "body": "<p>Here is a step by step method, as requested, but without a full solution, as per StackOverflow policy for homework questions.</p>\n\n<ol>\n<li>Compile the program without changing anything and run it,<br>\nusing a short input like \"a\".</li>\n<li>Run the program with a short input again.</li>\n<li>See the pair of different addresses it gives as debug output each time, they must be identical across the two runs of the program.</li>\n<li>If they are different see the assignment comment \"You need to ...\"</li>\n<li>Do 1.-3. again. If the address are still not the same you are out of luck.</li>\n<li>Think why steps 1.-5. are necessary.<br>\nIf you do not know read your text book again carefully.</li>\n<li>Create a small text file in a way to be able to make the content non-printable characters.<br>\nIf you do not know how, see the assignment comment<br>\n\"with commands like ...\"</li>\n<li>The text file now should have a very specific length. Which length exactly you need to determine by looking at the output of addresses in the last run of the program. If you do not know how to determine the length from the value, read your text book again carefully and check the answer by mevets.</li>\n<li>The actual content of the first part of the text file is irrelevant, it just needs a certain small part of the total length. How long? See text book and code of the program.</li>\n<li>The cotent of the rest of the text file is special. It needs to be what you want written to the variable <code>ptr</code>. What content exactly needs to be derived from the output of the last run of the program. You will also need some knowledge on specific mechanisms of your CPU. This is probably easiest to find out by experiment. A few crashes of the program with wrong inputs will not hurt.</li>\n<li>Call the program in a way that it takes the text file as input.</li>\n<li><p>The output should be </p>\n\n<p>please enter:<br>\nptr is 0x????????<br>\naddr of array2[1] is ????????<br>\nWelcome to overflow!  </p></li>\n</ol>\n\n<p>Where the <code>?</code> are hexadecimal values specific to your environment,<br>\nthere is a little trick hidden here...</p>\n\n<ol start=\"13\">\n<li>Make a screenshot of all your commands and the output.</li>\n<li>Hand that in, with an explanation of<br>\nhow everything works,<br>\nwhat the trick is,<br>\nthe relevance of the variable <code>a</code> and<br>\nwhy you cannot directly overwrite <code>array[1]</code> with the input.</li>\n<li>Hope that your teacher knows neither StackOverflow<br>\nnor a good search engine...</li>\n<li>Next time pay attention and start working earlier.</li>\n</ol>\n\n<p>Picking up a valid comment by Lundin (questioning the direction of stack growth):<br>\nIn the case Lundin mentions (probably a rare case), step 8 changes. You have to determine the length not so much by looking at the address pair but by looking at the code of the program.<br>\nStep 10 changes, too. The content of the end of the text file is not what you want written to <code>ptr</code> but what you want written somewhere else, in what could by described as a more \"direct\" approach.<br>\nStep 14 becomes much easier.</p>\n"}], "owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1041, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1513230685, "creation_date": 1513129001, "last_edit_date": 1513129540, "question_id": 47784242, "link": "https://stackoverflow.com/questions/47784242/buffer-overflow-in-c-with-pointers", "title": "Buffer overflow in C with pointers", "body": "<p>I am completely lost with this. I know I have to use a buffer overflow in order to get char 'c' to be the pointer address of ptr, but I have no idea how.</p>\n\n<pre><code>/*\n* Task: Print out \"Wecome to overflow!\"\n* Setup: You need to first run the command below (Note, system will ask your sudo password after running it)\n*        echo 0 | sudo tee /proc/sys/kernel/randomize_va_space\n* Hint:\n*       You can compile this code on ubuntu using the following command \"gcc -fno-stack-protector -m32 -o hw hw.c\"; note that you will need to run command \"sudo apt-get install gcc-multilib\" and then enter 'Y' before compiling your code using the aforementioned command\n* Submission: a screenshot with commands like echo -e -n 'abcddd\\x11\\x1A' &gt; tmp\n*/\n\n#include &lt;stdio.h&gt;\n\nint main(){\n  int a = 10;\n  char *ptr;\n  char c = 'X';\n  char array[4];\n  char array2[] = {'X', 'Y', 'Z'};\n  ptr = &amp;c;\n  printf(\"please enter: \\n\");\n  scanf(\"%s\", array);\n\n   /* The following is just for the purpose of debugging */\n   printf(\"ptr is 0x%x \\n\", (unsigned int)ptr);\n  printf(\"addr of array2[1] is %p \\n\", &amp;array2[1]);\n\n  *ptr = '5';\n\n  if (array2[1] == '5') {\n    printf(\"Welcome to overflow!\\n\");\n  } else {\n    printf(\"This is normal output!\\n\");\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "static", "global-variables"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1513129776, "post_id": 47784217, "comment_id": 82530061, "body": "Global <code>static</code> variables (and functions) are local to the source file - they have internal linkage."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 2110337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0bca9eb0936c1b5b6ac54554ffdda8?s=128&d=identicon&r=PG", "display_name": "Sudhee", "link": "https://stackoverflow.com/users/2110337/sudhee"}, "is_accepted": false, "score": 1, "last_activity_date": 1513135573, "last_edit_date": 1513135573, "creation_date": 1513130384, "answer_id": 47784410, "question_id": 47784217, "link": "https://stackoverflow.com/questions/47784217/use-of-static-keyword-to-global-variable-in-c/47784410#47784410", "title": "Use of static keyword to global variable in c", "body": "<p>It means that variable has file scope. You cannot access that global variable (by name) from another file.</p>\n"}], "owner": {"reputation": 1, "user_id": 9008305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/816bf7b64b9decd7de6982526c8bac54?s=128&d=identicon&r=PG&f=1", "display_name": "vikrant waje", "link": "https://stackoverflow.com/users/9008305/vikrant-waje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1513135614, "answer_count": 1, "score": 0, "last_activity_date": 1513135573, "creation_date": 1513128794, "question_id": 47784217, "link": "https://stackoverflow.com/questions/47784217/use-of-static-keyword-to-global-variable-in-c", "closed_reason": "Duplicate", "title": "Use of static keyword to global variable in c", "body": "<p>If I apply static keyword to local variable, its value is maintained within function invocations. However, if I apply static keyword to global variable, will it be as good as declaring the variable as global? What I mean to say is does static keyword has any effect on global variables?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 9, "creation_date": 1513128334, "post_id": 47784163, "comment_id": 82529643, "body": "What do you think addition would give you?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1513128672, "post_id": 47784163, "comment_id": 82529728, "body": "<a href=\"https://stackoverflow.com/questions/25667580/addition-of-two-pointers-in-c-or-c-not-supported-why\" title=\"addition of two pointers in c or c not supported why\">stackoverflow.com/questions/25667580/&hellip;</a>"}, {"owner": {"reputation": 23772, "user_id": 1035008, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/afa583c070c82a0961be918141f953fe?s=128&d=identicon&r=PG", "display_name": "Yuchen", "link": "https://stackoverflow.com/users/1035008/yuchen"}, "edited": false, "score": 0, "creation_date": 1513128918, "post_id": 47784163, "comment_id": 82529798, "body": "if you absolutely need this, you can cast them to <code>int</code> and then do the addition. <code>(int)&amp;x[0] + (int)&amp;x[3]</code>. But agreed with iBug, I cannot see a situation where this would be useful."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1513132585, "post_id": 47784163, "comment_id": 82530715, "body": "Subtraction of pointers is only specified for pointers in (or 1 after) the same <i>valid</i> array.    <code>&amp;x[0] - &amp;x[3];</code> is not a valid subtraction.  As it gave the hoped for result is bad luck."}], "owner": {"reputation": 4110, "user_id": 3810748, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/H7MEA.png?s=128&g=1", "display_name": "AlanSTACK", "link": "https://stackoverflow.com/users/3810748/alanstack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "closed_date": 1513129743, "answer_count": 0, "score": 0, "last_activity_date": 1513131063, "creation_date": 1513128309, "last_edit_date": 1513131063, "question_id": 47784163, "link": "https://stackoverflow.com/questions/47784163/why-does-pointer-arithmetic-work-between-int-int-only-for-minus-and-not-plus", "closed_reason": "Duplicate", "title": "Why does pointer arithmetic work between int* &amp; int* only for minus and not plus?", "body": "<p>I can't seem to understand why I am getting this error. It seems bizarre to me that subtraction works just fine (producing -3) while addition gives me an error.</p>\n\n<p>Why is this the case?, Shouldn't addition return (0x00000001 + 0x00000002 = 0x00000003)?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int* x = NULL;\n    int* y = NULL;\n\n    // error: invalid operands to binary + (have \u2018int *\u2019 and \u2018int *\u2019)\n    int z = &amp;x[0] + &amp;x[3];\n\n    // but this works fine\n    int z = &amp;x[0] - &amp;x[3];\n\n    printf(\"0x%08x\\n\", x);\n    printf(\"0x%08x\\n\", &amp;x[0]);\n    printf(\"%d\", z);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "dll"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513126710, "post_id": 47783907, "comment_id": 82529281, "body": "<code>myCproj.h</code> uses <code>__declspec(dllexport)</code>. This is only correct when you <b>build</b> your library. This is incorrect when you <b>use</b> it. You need to conditionally define the <code>__declspec</code> attribute to either dllimport or dllexport depending on what you are building."}, {"owner": {"reputation": 27, "user_id": 7954745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec5ea7f38c1596e2e4b9dfce251f8be?s=128&d=identicon&r=PG&f=1", "display_name": "Curious engineer", "link": "https://stackoverflow.com/users/7954745/curious-engineer"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513126947, "post_id": 47783907, "comment_id": 82529335, "body": "@n.m but I am building my library...that is the header file for the C project not the C++ project."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1513128310, "post_id": 47783907, "comment_id": 82529633, "body": "This is a little confusing. In your question, you say, &quot;I then tell my C++ project in VS where to find <code>myCproj.lib</code> and <code>myCproj.h</code>&quot; which implies you were including <code>myCproj.h</code> in your C++ app. But you&#39;re saying that you are not doing that? And it does appear, from the code you show, that you are indeed using <code>__declspec(dllexport)</code> in your <code>extern</code> statement in C++. That&#39;s not the case either?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1513128409, "post_id": 47783907, "comment_id": 82529656, "body": "By the way, it would make more sense to write a DLL function to initialize the struct, rather than accessing it directly from your C++ app."}, {"owner": {"reputation": 27, "user_id": 7954745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec5ea7f38c1596e2e4b9dfce251f8be?s=128&d=identicon&r=PG&f=1", "display_name": "Curious engineer", "link": "https://stackoverflow.com/users/7954745/curious-engineer"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1513128945, "post_id": 47783907, "comment_id": 82529808, "body": "@lurker so I thought in order to use a DLL it is preferable to have the actual header used to make that DLL and that to access the library you need to include that header in your project. That&#39;s called implicit linking right? My understanding is that linking only the DLL would be explicitly linking it, but since I have both the .lib and the .h file, I might as well implicitly link it."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1513129404, "post_id": 47783907, "comment_id": 82529944, "body": "It&#39;s good to have a header file for defining the external function, but the declaration in the header file is for an &quot;export&quot; not an &quot;import&quot;, at least as you are showing it. Your C++ shows it declared as &quot;import&quot; but then you&#39;d have two different definitions in your C++ file if you are, indeed, including the header as well as shown."}, {"owner": {"reputation": 27, "user_id": 7954745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec5ea7f38c1596e2e4b9dfce251f8be?s=128&d=identicon&r=PG&f=1", "display_name": "Curious engineer", "link": "https://stackoverflow.com/users/7954745/curious-engineer"}, "edited": false, "score": 0, "creation_date": 1513129609, "post_id": 47783907, "comment_id": 82530008, "body": "OH I see what you mean. But it is defined as an export because it&#39;s used in compiling the DLL itself. Isn&#39;t it supposed to tell the C compiler that such and such function is intended to be exported? If I chage the header to say &quot;import&quot; instead, then no where in the entire C project will it tell the compiler that those functions are to be exported."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1513133549, "post_id": 47783907, "comment_id": 82530948, "body": "You wouldn&#39;t want the calling C++ file to have it declared as both an import and an export. Should just be import."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513145268, "post_id": 47783907, "comment_id": 82534172, "body": "The normal accepted way is to use the same header for both projects. Why do you need <code>#ifdef __cplusplus</code> in a header which is <i>noit</i> used in a C++ project?"}], "answers": [{"comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1513196215, "post_id": 47785239, "comment_id": 82564057, "body": "Where/how is <code>MYLIBRARY_API</code> defined? Also, from a naming standpoint, it&#39;s a little odd to have <code>MYLIBRARY_EXPORT</code> defined in some cases as <code>__declspec(dllimport)</code>. I&#39;d probably find a different suitable name."}, {"owner": {"reputation": 27, "user_id": 7954745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec5ea7f38c1596e2e4b9dfce251f8be?s=128&d=identicon&r=PG&f=1", "display_name": "Curious engineer", "link": "https://stackoverflow.com/users/7954745/curious-engineer"}, "edited": false, "score": 0, "creation_date": 1513206342, "post_id": 47785239, "comment_id": 82568309, "body": "That makes sense, thanks! But what is the naming convention for the symbol &quot;MYLIBRARY_API&quot;? Does it have to be the name of the header in all caps with &quot;_API&quot; appended? I&#39;ve seen other people use &quot;_EXPORTS&quot; as the suffix too."}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 1, "last_activity_date": 1513151700, "last_edit_date": 1513151700, "creation_date": 1513137404, "answer_id": 47785239, "question_id": 47783907, "link": "https://stackoverflow.com/questions/47783907/how-to-properly-create-a-dll-from-c-code-and-use-it-in-a-c-project/47785239#47785239", "title": "How to properly create a DLL from C code and use it in a C++ project", "body": "<p>It is preferable to use the same header for both the library and using code.\nAs mentioned, it is usually done by a conditional define, like the following:\nMyLibrary.h:</p>\n\n<pre><code>#if defined(MYLIBRARY_API)\n#define MYLIBRARY_EXPORTS __declspec(dllexport)\n#else\n#define MYLIBRARY_EXPORTS __declspec(dllimport)\n#endif\n\n#if defined(__cplusplus)\nextern \"C\" {\n#endif\n\nMYLIBRARY_API bool MyLibFunc();\n\n#if defined(__cplusplus)\n#endif\n</code></pre>\n\n<p>MyLibrary.c:</p>\n\n<pre><code>#include \"MyLibrary.h\"\n\nvoid MyLibFunc()\n{\n....\n}\n</code></pre>\n\n<p>App.cpp:</p>\n\n<pre><code>#include &lt;MyLibrary.h&gt;\n\nint main()\n{\nMyLibFunc();\n}\n</code></pre>\n\n<p>The symbol MYLIBRARY_API will be defined for the library project (usually as a /D on the compiler command line). And if you use visual studio that is pretty much exactly what you get when creating a dll project with exports.</p>\n"}], "owner": {"reputation": 27, "user_id": 7954745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec5ea7f38c1596e2e4b9dfce251f8be?s=128&d=identicon&r=PG&f=1", "display_name": "Curious engineer", "link": "https://stackoverflow.com/users/7954745/curious-engineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1513151700, "creation_date": 1513126120, "last_edit_date": 1513127135, "question_id": 47783907, "link": "https://stackoverflow.com/questions/47783907/how-to-properly-create-a-dll-from-c-code-and-use-it-in-a-c-project", "title": "How to properly create a DLL from C code and use it in a C++ project", "body": "<p>I have a set of functions written in C that I need to be able to call from another project written in C++. The C code is essentially some functions that do some calculations on a large data set. I didn't write them - all I want to do is allow my C++ project to be able to call those functions. My solution was to create a DLL for the C code and link it to my C++ project. </p>\n\n<p>In order to make the DLL, I structured myCproj.h (the header in the <strong>C project</strong>, not C++ project) like so:</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n\nstruct __declspec(dllexport) neededStruct {\n    int a;\n    //I need to be able to initialize this struct in my C++ project.\n}\n\n__declspec(dllexport) void neededFunc( struct neededStruct *input ) {}\n    //I need to be able to call this function from my C++ project and feed \n    //it my local instance of neededStruct.\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>The src file, myCproj.c, was not changed at all. The function definitions do not have <code>__declspec(dllexport)</code>in front of them, nor is <code>extern \"C\"</code> inserted anywhere. The code compiles without error and produces myCproj.dll and myCproj.lib.</p>\n\n<p>I then tell my C++ project in VS where to find myCproj.lib and myCproj.h accordingly and copy the DLL over to the directory where my C++ executable lives. To use the DLL, I gave myCPPproj.cpp the following addition:</p>\n\n<pre><code>#define DLLImport __declspec(dllimport)\n\nstruct DLLImport neededStruct input;\ninput.a = 0;\n\nextern \"C\" DLLImport void neededFunc( &amp;input );\n</code></pre>\n\n<p>However, I get error EO335 'linkage specification is not allowed' on that last line. What am I doing wrong?</p>\n"}, {"tags": ["c", "list", "unix"], "comments": [{"owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 1, "creation_date": 1513125783, "post_id": 47783845, "comment_id": 82529065, "body": "Have you tried to use a debugger to step through your code? If not, that&#39;s the first (and by far the most educational) thing you should try."}, {"owner": {"reputation": 37, "user_id": 9091498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/34547d6bbe468f30431177bd5e75365b?s=128&d=identicon&r=PG&f=1", "display_name": "user9091498", "link": "https://stackoverflow.com/users/9091498/user9091498"}, "reply_to_user": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 0, "creation_date": 1513126044, "post_id": 47783845, "comment_id": 82529135, "body": "yes i tried to debug, and i see that indeed enters in the if statement the first time, while head is null. The rest times enters in else block, but when i try to print the data of the node where the head points, doesnt give the data of the first node evry time, but the data of the current node. looks like all pointers are moving to the current node, including the head"}, {"owner": {"reputation": 1704, "user_id": 8445537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270b869206b49bd1e6d7c7009bc163b4?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolaus", "link": "https://stackoverflow.com/users/8445537/nikolaus"}, "edited": false, "score": 0, "creation_date": 1513126315, "post_id": 47783845, "comment_id": 82529202, "body": "In the else statement kill the first line. It doesn&#39;t make sense."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 9091498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/34547d6bbe468f30431177bd5e75365b?s=128&d=identicon&r=PG&f=1", "display_name": "user9091498", "link": "https://stackoverflow.com/users/9091498/user9091498"}, "edited": false, "score": 0, "creation_date": 1513126839, "post_id": 47783966, "comment_id": 82529310, "body": "Hi, thanks for your answer but i am afraid this doesn&#39;t solve the issue :( it is pretty much the same as i already have it there :("}, {"owner": {"reputation": 65, "user_id": 8852416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gs6RF.jpg?s=128&g=1", "display_name": "Daniel G", "link": "https://stackoverflow.com/users/8852416/daniel-g"}, "reply_to_user": {"reputation": 37, "user_id": 9091498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/34547d6bbe468f30431177bd5e75365b?s=128&d=identicon&r=PG&f=1", "display_name": "user9091498", "link": "https://stackoverflow.com/users/9091498/user9091498"}, "edited": false, "score": 0, "creation_date": 1513127216, "post_id": 47783966, "comment_id": 82529397, "body": "There is a difference between my version and yours, essentially the first line of yours, I understand how yours should work too, but I believe the version I posted should be easier to debug and it&#39;s clearer to understand in my opinion. Good luck with that anyway and please let me know when you find what&#39;s wrong!"}, {"owner": {"reputation": 65, "user_id": 8852416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gs6RF.jpg?s=128&g=1", "display_name": "Daniel G", "link": "https://stackoverflow.com/users/8852416/daniel-g"}, "reply_to_user": {"reputation": 37, "user_id": 9091498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/34547d6bbe468f30431177bd5e75365b?s=128&d=identicon&r=PG&f=1", "display_name": "user9091498", "link": "https://stackoverflow.com/users/9091498/user9091498"}, "edited": false, "score": 0, "creation_date": 1513127974, "post_id": 47783966, "comment_id": 82529553, "body": "Please try this new solution and let me know! :)"}], "tags": [], "owner": {"reputation": 65, "user_id": 8852416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gs6RF.jpg?s=128&g=1", "display_name": "Daniel G", "link": "https://stackoverflow.com/users/8852416/daniel-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1513127413, "last_edit_date": 1513127413, "creation_date": 1513126630, "answer_id": 47783966, "question_id": 47783845, "link": "https://stackoverflow.com/questions/47783845/not-properly-inserts-the-new-node-at-the-end-of-a-linked-llist/47783966#47783966", "title": "not properly inserts the new node at the end of a linked llist", "body": "<p>Since the head is the first node of the list, the problem I see is that you create the newNode properly at the beginning, and the if branch seems to work fine. However, the else branch is the one that seems to be causing the problem, it should look something like this:</p>\n\n<pre><code>if(head == NULL){\n    head = newNode;\n    head-&gt;next = NULL;\n    temp = head;\n} else {\n    temp-&gt;next = newNode;\n    newNode-&gt;next = NULL; //Since, as you said, the list is just reading from a file, the last element inserted will be the last of the list until a new one is read.\n    temp = newNode; \n}\n</code></pre>\n\n<p>Good luck, hope this helps!</p>\n\n<p>EDIT:\nTry to just enter a pointer to the newNode instead of just newNode, the problem you describe above seems to be that every element points to the last one, this could solve it:</p>\n\n<pre><code>if(head == NULL){\n    head = newNode;\n    head-&gt;next = NULL;\n    temp = head;\n} else {\n    temp-&gt;next = *newNode;\n    newNode-&gt;next = NULL;\n    temp = newNode; \n}\n</code></pre>\n\n<p>PS: In your version, it would be</p>\n\n<pre><code>temp-&gt;next=*newNode;\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 9091498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/34547d6bbe468f30431177bd5e75365b?s=128&d=identicon&r=PG&f=1", "display_name": "user9091498", "link": "https://stackoverflow.com/users/9091498/user9091498"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1513127413, "creation_date": 1513125661, "question_id": 47783845, "link": "https://stackoverflow.com/questions/47783845/not-properly-inserts-the-new-node-at-the-end-of-a-linked-llist", "title": "not properly inserts the new node at the end of a linked llist", "body": "<p>I am trying to create a linked list from data read from a file.\nThe following code is included in a while loop.\nSeems like the data are picked correctly but not inserted properly in the list, since when i try to print the data of the list using the head, i notice that the head seems to be moved on the next node every time. \nAny help here?</p>\n\n<pre><code>    newNode = (struct node *)malloc(sizeof(struct node *));\n    newNode -&gt;name=name;\n    newNode-&gt;number=no;\n\n    if(head == NULL){\n        head = newNode;\n        head-&gt;next=NULL;\n        temp=head;\n    }\n\n    else{\n        newNode-&gt;next = temp-&gt;next;\n        temp-&gt;next=newNode;\n        temp=newNode; \n    }\n</code></pre>\n"}, {"tags": ["c", "file", "loops"], "answers": [{"tags": [], "owner": {"reputation": 345, "user_id": 5521242, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/27f68aeed8003c7e365d709f9546fe16?s=128&d=identicon&r=PG&f=1", "display_name": "J. In", "link": "https://stackoverflow.com/users/5521242/j-in"}, "is_accepted": true, "score": 0, "last_activity_date": 1513126859, "creation_date": 1513126859, "answer_id": 47783994, "question_id": 47783655, "link": "https://stackoverflow.com/questions/47783655/writing-data-in-different-files-in-c/47783994#47783994", "title": "Writing data in different files in C", "body": "<p>My first advice is: If you don't need the <strong>filename</strong> variable in main, then move it to writeFile(). Less parameters moving around and makes your code cleaner.</p>\n\n<p>Your issue is inside the writeFile() function:</p>\n\n<pre><code>strcpy(filename, patient[i].name);\n</code></pre>\n\n<p>You never initialized your <strong>i</strong> variable. It's likely always getting initialized to 0 thus you're always writing to the first file you created. Try changing that line to this:</p>\n\n<pre><code>strcpy(filename, patient[noAgt-1].name);\n</code></pre>\n\n<p>And you should see the code working better. Still not the best solution in my opinion, since <strong>noAgt</strong> should probably not increment before writing the file. But it should get you going on cleaning up your code.</p>\n"}], "owner": {"reputation": 39, "user_id": 9091443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b7927fa21763e6771f92a630307a589?s=128&d=identicon&r=PG&f=1", "display_name": "Niku Nik", "link": "https://stackoverflow.com/users/9091443/niku-nik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 47783994, "answer_count": 1, "score": 0, "last_activity_date": 1513126859, "creation_date": 1513124212, "last_edit_date": 1513125269, "question_id": 47783655, "link": "https://stackoverflow.com/questions/47783655/writing-data-in-different-files-in-c", "title": "Writing data in different files in C", "body": "<p>I'm studying C at the moment and I'm not that good yet. I am trying to write a program where I want to enter some people's name and create at the same time a .txt file with their name. For example if I type \"Richard\" it will create the file Richard.txt. And inside the .txt file I want to write again their name.</p>\n\n<p>The only problem is that after I type the first name and create the first .txt file, entering a new name will not create a new .txt file. But instead it will put the second name in the first .txt file after the first name. </p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;conio.h&gt; \n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct personnel\n{\n char name[40]; \n};\n\nint addPatient(struct personnel patient[], int noAgt);\nvoid writeFile(struct personnel patient[], int noAgt, char filename[]);\nvoid emptyBuffer(void);\n\nint main()\n{\n    struct personnel patient[50];\n    int ch = 'X';\n    int noAgt = 0; \n    char filename[100];\n    while (ch != 'q')\n    {\n    printf(\"\\na)\\tEnter new patient\"\n    \"\\nb)\\tWrite file\"\n    \"\\nc)\\tExit program\"\n    \"\\n\\nSelect: \");\n    ch = getche(); \n    printf(\"\\n\\n\");\n    switch (ch)\n        {\n        case 'a' :\n        noAgt = addPatient(patient, noAgt);\n        break;\n        case 'b' :\n        writeFile(patient, noAgt, filename);\n        break;\n        case 'c' :\n        exit(0);\n        }\n    }\n}\n\nint addPatient(struct personnel patient[], int noAgt)\n{\n printf(\"\\nPatient %d.\\nEnter name: \", noAgt + 1); \n scanf(\"%39[^\\n]\", patient[noAgt].name);\n while(getchar() != '\\n') \n {\n    ;\n }\n return ++noAgt;\n}\n\nvoid writeFile(struct personnel patient[], int noAgt, char filename[])\n{\n    int i;\n    FILE *fptr;\n    struct personnel rec;\n    strcpy(filename, patient[i].name);\n    emptyBuffer();\n    strcat(filename, \".aow.txt\");\n    fptr = fopen(filename, \"w\");\n    for(i = 0; i &lt; noAgt; i++)\n    {\n        rec = patient[i];\n        fprintf(fptr, \"Name: %s \",  rec.name);\n    }\n    fclose(fptr);\n    printf(\"\\nFile of %d patients written.\\n\", noAgt);\n}\n\nvoid emptyBuffer(void) /* Empty keyboard buffer */\n{\n while(getchar() != '\\n')\n {\n     ;\n }\n}\n</code></pre>\n\n<p>\"int addPatient(struct personnel patient[], int noAgt)\" Is the bit where I enter the name of the person that goes in writeFile().</p>\n\n<p>\"void writeFile(struct personnel patient[], int noAgt, char filename[])\" Is the bit where I write the file.</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1513125427, "post_id": 47783604, "comment_id": 82528973, "body": "It&#39;s &quot;roughly&quot; 8?"}, {"owner": {"reputation": 10834, "user_id": 3156085, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b749799809f0e3d93d851d639afdbab9?s=128&d=identicon&r=PG&f=1", "display_name": "vmonteco", "link": "https://stackoverflow.com/users/3156085/vmonteco"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1513125553, "post_id": 47783604, "comment_id": 82529009, "body": "@KeithThompson Misunderstanding about the word&#39;s meaning from a non-native English speaker. I apologize, I corrected. Thank you for bringing this to my attention!"}, {"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1513125739, "post_id": 47783604, "comment_id": 82529054, "body": "@vmonteco I&#39;m not a native English speaker, either. But I can assure you that &quot;roughly&quot; means &quot;approximately&quot;, which is not a good word when you want to mean &quot;actually&quot; or &quot;finally&quot;."}, {"owner": {"reputation": 10834, "user_id": 3156085, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b749799809f0e3d93d851d639afdbab9?s=128&d=identicon&r=PG&f=1", "display_name": "vmonteco", "link": "https://stackoverflow.com/users/3156085/vmonteco"}, "reply_to_user": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1513125818, "post_id": 47783604, "comment_id": 82529079, "body": "@iBug Yes, that&#39;s precisely what you could call a misunderstanding I think. It can happen."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1513130022, "post_id": 47783604, "comment_id": 82530121, "body": "@vmonteco: You do much better in your second(?) language than I do in mine."}, {"owner": {"reputation": 10834, "user_id": 3156085, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b749799809f0e3d93d851d639afdbab9?s=128&d=identicon&r=PG&f=1", "display_name": "vmonteco", "link": "https://stackoverflow.com/users/3156085/vmonteco"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1513130077, "post_id": 47783604, "comment_id": 82530138, "body": "@KeithThompson Thank you! But sadly sometimes I still make mistakes. My bad again!"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1513130136, "post_id": 47783604, "comment_id": 82530159, "body": "@vmonteco: Please don&#39;t worry about it. One apology was more than sufficient."}], "tags": [], "owner": {"reputation": 10834, "user_id": 3156085, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b749799809f0e3d93d851d639afdbab9?s=128&d=identicon&r=PG&f=1", "display_name": "vmonteco", "link": "https://stackoverflow.com/users/3156085/vmonteco"}, "is_accepted": false, "score": 0, "last_activity_date": 1513125485, "last_edit_date": 1513125485, "creation_date": 1513123900, "answer_id": 47783604, "question_id": 47783580, "link": "https://stackoverflow.com/questions/47783580/c-defining-functions/47783604#47783604", "title": "C defining functions?", "body": "<p><a href=\"https://gcc.gnu.org/onlinedocs/cpp/Function-like-Macros.html#Function-like-Macros\" rel=\"nofollow noreferrer\">A macro</a> doesn't perform a mathematical operation but code replacement.</p>\n\n<p>So after preprocessing step, your code should look like this:</p>\n\n<pre><code> int main() {\n     int x = 3;\n     int y = 4;\n     int z = 0;\n     z = (x+1 * y+1);\n     printf(\u201c4*5 = %d \\n\u201d, z);\n  }\n</code></pre>\n\n<p>So z should be equal to <code>3 + 4 * 1 + 1</code>, that is 8.</p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 8038391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0065c28307f6d1b7757665b7d090e86?s=128&d=identicon&r=PG&f=1", "display_name": "rubberduck", "link": "https://stackoverflow.com/users/8038391/rubberduck"}, "edited": false, "score": 0, "creation_date": 1513124213, "post_id": 47783616, "comment_id": 82528644, "body": "So this can be seen as order of operations?"}, {"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "reply_to_user": {"reputation": 7, "user_id": 8038391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0065c28307f6d1b7757665b7d090e86?s=128&d=identicon&r=PG&f=1", "display_name": "rubberduck", "link": "https://stackoverflow.com/users/8038391/rubberduck"}, "edited": false, "score": 0, "creation_date": 1513124237, "post_id": 47783616, "comment_id": 82528652, "body": "@rubberduck Yes."}, {"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1513125061, "post_id": 47783616, "comment_id": 82528865, "body": "@KeithThompson Thanks... I was sleepy typing this answer..."}], "tags": [], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "is_accepted": true, "score": 3, "last_activity_date": 1513124926, "last_edit_date": 1513124926, "creation_date": 1513123965, "answer_id": 47783616, "question_id": 47783580, "link": "https://stackoverflow.com/questions/47783580/c-defining-functions/47783616#47783616", "title": "C defining functions?", "body": "<p><strong><a href=\"http://en.cppreference.com/w/c/preprocessor/replace#Function-like_macros\" rel=\"nofollow noreferrer\">Macros</a> aren't functions</strong></p>\n\n<p>After the first phase of compilation, preprocessing, the macro <strong>is expanded</strong>:</p>\n\n<pre><code>z = mul(x+1, y+1);\n// becomes\nz = (x+1 * y+1);\n</code></pre>\n\n<p>No doubt that <code>x + 1*y + 1 == 8</code>.</p>\n\n<p>A better way to define this macro is to <strong>parenthesize <code>x</code> and <code>y</code></strong>:</p>\n\n<pre><code>#define mul(x, y) ((x)*(y))\n</code></pre>\n\n<p>You can try it yourself: Compile this code with <code>gcc -E foo.c -o foo.i</code></p>\n\n<pre><code>#define mul(x, y) (x * y)\nint x = 3;\nint y = 4;\nint z = mul(x+1, y+1)\n</code></pre>\n\n<p>And see the content of <code>foo.i</code>.</p>\n"}], "owner": {"reputation": 7, "user_id": 8038391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0065c28307f6d1b7757665b7d090e86?s=128&d=identicon&r=PG&f=1", "display_name": "rubberduck", "link": "https://stackoverflow.com/users/8038391/rubberduck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "closed_date": 1513180963, "accepted_answer_id": 47783616, "answer_count": 2, "score": -4, "last_activity_date": 1513134645, "creation_date": 1513123730, "last_edit_date": 1513134645, "question_id": 47783580, "link": "https://stackoverflow.com/questions/47783580/c-defining-functions", "closed_reason": "Needs details or clarity", "title": "C defining functions?", "body": "<p>I am trying to understand why this program prints out 8.</p>\n\n<pre><code>#define mul(x,y) (x * y)\nint main() {\n    int x = 3;\n    int y = 4;\n    int z = 0;\n    z = mul(x+1, y+1);\n    printf(\u201c4*5 = %d \\n\u201d, z);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1513122185, "post_id": 47783319, "comment_id": 82528080, "body": "I suspect that it&#39;s an instruction  for the linker to place that variable in the correspondingly named executable section. The gcc equivalent would be the <code>section</code> attribute (<code>const uint32_t part_number __attribute__ ((section (&quot;.part_number&quot;)) = 701052;</code>)."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 2, "creation_date": 1513122198, "post_id": 47783319, "comment_id": 82528084, "body": "Not committing a full answer since I&#39;m not certain, but the &quot;.part_number&quot; tells me it&#39;s probably telling the linker which section to store the variable/value in"}, {"owner": {"reputation": 5417, "user_id": 7607970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3K8Ke.png?s=128&g=1", "display_name": "Psi", "link": "https://stackoverflow.com/users/7607970/psi"}, "edited": false, "score": 0, "creation_date": 1513122203, "post_id": 47783319, "comment_id": 82528086, "body": "Try out <a href=\"https://stackoverflow.com/questions/24114365/does-at-symbol-and-dollar-sign-has-any-special-meaning-in-c-or-c\">this answer</a>. The 3rd answer suggests that it&#39;s a non-standard compiler extension for specifying a physical address"}, {"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 0, "creation_date": 1513122247, "post_id": 47783319, "comment_id": 82528103, "body": "I agree with Matteo and Frank&#39;s comments."}, {"owner": {"reputation": 177, "user_id": 6346499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b306473ed6b4d8dd2fd7536e9778970a?s=128&d=identicon&r=PG&f=1", "display_name": "MidnightRover", "link": "https://stackoverflow.com/users/6346499/midnightrover"}, "edited": false, "score": 0, "creation_date": 1513181481, "post_id": 47783319, "comment_id": 82555882, "body": "Thanks everyone for your help!  Really appreciated."}], "answers": [{"tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 6, "last_activity_date": 1513122608, "creation_date": 1513122608, "answer_id": 47783430, "question_id": 47783319, "link": "https://stackoverflow.com/questions/47783319/use-of-symbol-in-c-programing/47783430#47783430", "title": "Use of @ symbol in c programing?", "body": "<p>From <a href=\"https://www.iar.com/support/tech-notes/compiler/linker-error-for-absolute-located-variable/\" rel=\"noreferrer\">this KB entry</a> it looks like it's syntax to instruct the linker to place the variable into a specific section.</p>\n\n<blockquote>\n  <p>If you instead place the object into a named segment:</p>\n\n<pre><code>__no_init struct setup located_configuration @ \"SETUP\";\n</code></pre>\n</blockquote>\n\n<p>The equivalent gcc syntax is through the <code>section</code> attribute.</p>\n\n<pre><code>const uint32_t part_number __attribute__ ((section (\".part_number\")) = 701052;\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 6346499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b306473ed6b4d8dd2fd7536e9778970a?s=128&d=identicon&r=PG&f=1", "display_name": "MidnightRover", "link": "https://stackoverflow.com/users/6346499/midnightrover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 47783430, "answer_count": 1, "score": 9, "last_activity_date": 1513122608, "creation_date": 1513121976, "question_id": 47783319, "link": "https://stackoverflow.com/questions/47783319/use-of-symbol-in-c-programing", "title": "Use of @ symbol in c programing?", "body": "<p>I'm working with some code that was originally written for IAR and converting it to compile using a GCC compiler.</p>\n\n<p>However I'm stuck with one particular line as I don't understand the syntax or what is going on.</p>\n\n<pre><code>__root const uint32_t part_number @ \".part_number\" = 701052;\n</code></pre>\n\n<p>The __root I've found out is so that the the variable is included in the final code even if there is nothing that actually references it.  const means that it won't change and is kept in the ROM instead of RAM.</p>\n\n<p>It is the @ \".part_number\" part that I don't follow.  The specific error I get is \"stray '@' in program\".</p>\n\n<p>I understand that @ isn't a part of standard C, but I haven't had any luck finding anything that explains this syntax I'm seeing.</p>\n\n<p>If anyone is able to explain it, I would really appreciate it.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "malloc", "strcpy", "nul"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 4, "creation_date": 1513121430, "post_id": 47783233, "comment_id": 82527883, "body": "Buffer overrun."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 8, "creation_date": 1513121806, "post_id": 47783233, "comment_id": 82527973, "body": "Repeat after me: &quot;Undefined behavior&quot; means &quot;undefined&quot;. It doesn&#39;t mean &quot;guaranteed to fail&quot;, &quot;will produce warnings&quot;, or anything else predictable. Just because it works, that doesn&#39;t mean there&#39;s nothing wrong."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 5, "creation_date": 1513121826, "post_id": 47783233, "comment_id": 82527982, "body": "you&#39;re invoking undefined behavior by overrunning your buffer. You&#39;re just getting lucky that &quot;every above appears to work properly&quot;. Really I should say _un_lucky, because you hope your program crashes when there are problems like this so you can fix them. Otherwise, they manifest at the most inopportune of times..."}, {"owner": {"reputation": 53, "user_id": 2300352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d8ee4399a6dee3a9451fd8e0705ec73?s=128&d=identicon&r=PG", "display_name": "Prism", "link": "https://stackoverflow.com/users/2300352/prism"}, "edited": false, "score": 0, "creation_date": 1513121835, "post_id": 47783233, "comment_id": 82527986, "body": "Oh I see. I guess I didn&#39;t understand malloc() well enough. So basically this works by chance, but there&#39;s also the possibility of overwriting other memory locations or segmentation faults?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1513122065, "post_id": 47783233, "comment_id": 82528051, "body": "you are overwriting memory you don&#39;t own when you overflow a buffer. Whether or not that memory is within your process space, or critical to continued functionality of the program, that&#39;s the &quot;who knows?&quot; part. In your case, <i>this time</i>, it wasn&#39;t critical. Maybe that will change in 5 min, or when you run it on your friend&#39;s machine, or on your other friend&#39;s machine with a different OS, or when you compile it with different compile options."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1513122114, "post_id": 47783233, "comment_id": 82528061, "body": "If you are using <code>gcc</code>, try adding <code>-fsanitize=address</code>."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1513122234, "post_id": 47783233, "comment_id": 82528098, "body": "<code>malloc</code> also isn&#39;t hamstrung into giving you <i>exactly</i> how many bytes you ask for. You asked for 5, maybe it gave you 16 instead. In fact I think some <code>malloc</code> implementations allocate more memory than you ask for for bookkeeping, but I don&#39;t know much about that. Bottomline, if you asked <code>malloc</code> for 5 bytes and it doesn&#39;t return NULL, then you can only depend on having 5 usable bytes."}, {"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 1, "creation_date": 1513122450, "post_id": 47783233, "comment_id": 82528169, "body": "<code>strcpy</code> does not know how large the buffer you allocated is and will overrun the buffer. You are only giving it a pointer. A <code>char*</code> pointer is a pointer to a single <code>char</code>. I suggest you look at <a href=\"https://linux.die.net/man/3/strncpy\" rel=\"nofollow noreferrer\"><code>strncpy</code></a>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1513124327, "post_id": 47783233, "comment_id": 82528677, "body": "@yano <code>malloc</code> implementations I&#39;ve examined return memory on either 8 or 16-byte addresses no matter how many bytes you request because the memory must be &quot;suitable for any purpose&quot;.  You are likely getting memory in 8- or 16-byte chunks internally to the implementation.  So  overrunning a 5-byte buffer by 2 bytes can &quot;work&quot; (and even if it &quot;works&quot;, it won&#39;t if someone changes upstream code and the buffer grows to 16 bytes and still gets overrun by two...)"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1513126887, "post_id": 47783233, "comment_id": 82529318, "body": "@AndrewHenle good info, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513159395, "post_id": 47783440, "comment_id": 82541452, "body": "Note that while <code>strncpy()</code> won&#39;t write beyond the limit specified, the downside is that the copied data isn&#39;t necessarily a string; it might have no null byte at the end."}], "tags": [], "owner": {"reputation": 88, "user_id": 6419266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6edd331e5b522861fc8f6e8c0dee997f?s=128&d=identicon&r=PG&f=1", "display_name": "MC-Squared", "link": "https://stackoverflow.com/users/6419266/mc-squared"}, "is_accepted": true, "score": 4, "last_activity_date": 1593744479, "last_edit_date": 1593744479, "creation_date": 1513122673, "answer_id": 47783440, "question_id": 47783233, "link": "https://stackoverflow.com/questions/47783233/malloc-and-strcpy-interactions/47783440#47783440", "title": "malloc and strcpy interactions", "body": "<p>Addressing your three points:</p>\n<ul>\n<li>String literals will always have an implicit null terminator.</li>\n</ul>\n<p>Correct.</p>\n<ul>\n<li>strcpy should copy over the null terminator onto myString, but there isn't enough allocated heap memory</li>\n</ul>\n<p><code>strcpy</code> has no way of knowing how large the destination buffer is, and will happily write past the end of it (overwritting whatever is after the buffer in memory. For information on this off-the-end-access look up 'buffer overrun' or 'buffer overflow'. These are common security weaknesses).\nFor a safer version, use <code>strncpy</code> which takes the length of the destination buffer as an argument so as not to write past the end of it.</p>\n<ul>\n<li>printf/strlen shouldn't work unless myString has a terminator</li>\n</ul>\n<p>The phrase 'shouldn't work' is a bit vague here. printf/strlen/etc will continue reading through memory until a null terminator is found, which could be immediately after the string or could be thousands of bytes away (in your case you have written the null terminator to the memory immediately after myString so printf/strlen/etc will stop there).</p>\n<p>Lastly:</p>\n<ul>\n<li>Is the above code an error waiting to happen?</li>\n</ul>\n<p>Yes. You are overwriting memory that has not been allocated which could cause any manor of problems depending on what happened to be overwritten.\nFrom the <code>strcpy</code> man page:</p>\n<blockquote>\n<p>If the destination string of a strcpy() is not large enough, then  <strong>anything  might  happen.</strong>   Overflowing  fixed-length  string  buffers is a favorite cracker technique for taking complete control of the  machine. Any  time  a  program  reads  or copies data into a buffer, the program first needs to check that there's enough space.  This may  be  unnecessary  if you can show that overflow is impossible, but be careful: programs can get changed over time, in ways that may make  the  impossible possible.</p>\n</blockquote>\n"}], "owner": {"reputation": 53, "user_id": 2300352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d8ee4399a6dee3a9451fd8e0705ec73?s=128&d=identicon&r=PG", "display_name": "Prism", "link": "https://stackoverflow.com/users/2300352/prism"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "accepted_answer_id": 47783440, "answer_count": 1, "score": 0, "last_activity_date": 1593744479, "creation_date": 1513121358, "question_id": 47783233, "link": "https://stackoverflow.com/questions/47783233/malloc-and-strcpy-interactions", "title": "malloc and strcpy interactions", "body": "<p>I've been testing out interactions between malloc() and various string functions in order to try to learn more about how pointers and memory work in C, but I'm a bit confused about the following interactions.</p>\n\n<pre><code>char *myString = malloc(5); // enough space for 5 characters (no '\\0')\nstrcpy(myString, \"Hello\"); // shouldn't work since there isn't enough heap memory\nprintf(%s, %zd\\n\", myString, strlen(myString)); // also shouldn't work without '\\0'\nfree(myString);\n</code></pre>\n\n<p>Everything above appears to work properly. I've tried using printf() for each character to see if the null terminator is present, but '\\0' appears to just print as a blank space anyways.</p>\n\n<p>My confusion lies in:</p>\n\n<ul>\n<li>String literals will always have an implicit null terminator. </li>\n<li>strcpy should copy over the null terminator onto myString, but there isn't enough allocated heap memory</li>\n<li>printf/strlen shouldn't work unless myString has a terminator</li>\n</ul>\n\n<p>Since myString apparently has a null terminator, where is it? Did it just get placed at a random memory location? Is the above code an error waiting to happen?</p>\n"}, {"tags": ["c", "module", "linker", "libtool"], "comments": [{"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1513119055, "post_id": 47782554, "comment_id": 82527046, "body": "@SoronelHaetir what result are you seeing that address this?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 2, "creation_date": 1513119491, "post_id": 47782554, "comment_id": 82527212, "body": "One is part of glibc and the other is part of libtool."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 4, "creation_date": 1513119507, "post_id": 47782554, "comment_id": 82527217, "body": "@EvanCarroll: the <code>libltdl</code> page you linked to in the question answers your question: <code>libltdl</code> provides a portable dynamic linking interface. On Linux, it is a wrapper around <code>libdl</code>. If you run <code>ldd &#47;usr&#47;lib&#47;x86_64-linux-gnu&#47;libltdl.so.7.3.1</code> you&#39;ll see it requires <code>libdl</code>."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1513119917, "post_id": 47782554, "comment_id": 82527385, "body": "If that&#39;s all it is, just pop that over and I&#39;ll pick that answer. My bad, I probably should have see the <code>libdl</code> in the ldd of <code>libltdl</code> and though &quot;wrapper&quot; but it didn&#39;t occur =( @NominalAnimal"}], "answers": [{"tags": [], "owner": {"reputation": 14789, "user_id": 425738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58622287beb9cbbd6a1faff38c1c6ab3?s=128&d=identicon&r=PG", "display_name": "ldav1s", "link": "https://stackoverflow.com/users/425738/ldav1s"}, "is_accepted": true, "score": 1, "last_activity_date": 1513211995, "last_edit_date": 1513211995, "creation_date": 1513174237, "answer_id": 47795044, "question_id": 47782554, "link": "https://stackoverflow.com/questions/47782554/what-is-the-difference-between-libdl-and-libltdl/47795044#47795044", "title": "What is the difference between libdl and libltdl?", "body": "<p>It's a feature of <code>libtool</code> to provide a <code>libdl</code> API (e.g. <code>dlopen</code>) for many different platforms that have the same or similar functionality (e.g. POSIX's <code>dlopen</code> etc., Windows's <code>LoadLibrary</code> etc.), and shared library emulation for platforms whose linkers don't support dynamic linking.</p>\n\n<p>I did some analysis on <code>libodbc.so.2</code> on my Linux box.  <code>nm -D</code> seems to show only <code>libltdl</code> symbols for <code>libodbc.so.2</code>, and <code>objdump -p</code> seems to have only <code>libltdl.so.7</code> in the <code>NEEDED</code> section, so <code>ldd</code> doesn't seem to be printing out entirely accurate info in this case (Your <code>grep</code> output appears similar to what I see).</p>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1187, "favorite_count": 0, "accepted_answer_id": 47795044, "answer_count": 1, "score": 0, "last_activity_date": 1513211995, "creation_date": 1513117502, "last_edit_date": 1513117850, "question_id": 47782554, "link": "https://stackoverflow.com/questions/47782554/what-is-the-difference-between-libdl-and-libltdl", "title": "What is the difference between libdl and libltdl?", "body": "<p>What is the difference between <code>libdl</code> and <a href=\"https://www.gnu.org/software/libtool/manual/html_node/Using-libltdl.html\" rel=\"nofollow noreferrer\"><code>libltdl</code></a>. I just noticed that <code>libodbc</code> links to both of them</p>\n\n<pre><code>ldd /usr/lib/x86_64-linux-gnu/libodbc.so.2 | grep -i dl\n    libltdl.so.7 =&gt; /usr/lib/x86_64-linux-gnu/libltdl.so.7 (0x00007f411b822000)\n    libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f411b01f000)\n</code></pre>\n\n<p>I know Perl links again <code>libdl</code>.</p>\n\n<pre><code>ldd /usr/bin/perl | grep -i dl\n    libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f55faa2e000)\n</code></pre>\n\n<p>I see two seperate shared objects on the system,</p>\n\n<pre><code>ls -lah /usr/lib/x86_64-linux-gnu/libltdl.so.7.3.1 /lib/x86_64-linux-gnu/libdl-2.26.so \n-rw-r--r-- 1 root root 39K Aug 20  2016 /usr/lib/x86_64-linux-gnu/libltdl.so.7.3.1\n-rw-r--r-- 1 root root 15K Oct 11 15:21 /lib/x86_64-linux-gnu/libdl-2.26.so\n</code></pre>\n\n<p>They both link to similar stuff too,</p>\n\n<pre><code>ldd /usr/lib/x86_64-linux-gnu/libltdl.so.7.3.1\n    linux-vdso.so.1 =&gt;  (0x00007ffc3e66b000)\n    libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007efcbad4c000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007efcba96c000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007efcbb15a000)\nldd /lib/x86_64-linux-gnu/libdl-2.26.so\n    linux-vdso.so.1 =&gt;  (0x00007ffe7889c000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007fbc9a14e000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007fbc9a732000)\n</code></pre>\n\n<p>What makes <code>libltdl</code> different?</p>\n"}, {"tags": ["c", "runtime", "compile-time"], "comments": [{"owner": {"reputation": 1922, "user_id": 8868108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNHxq.png?s=128&g=1", "display_name": "Green", "link": "https://stackoverflow.com/users/8868108/green"}, "edited": false, "score": 0, "creation_date": 1513117614, "post_id": 47782524, "comment_id": 82526408, "body": "this is way too general question. But in very general manner, yes of course everything is allocated somewhere, about your why, you better read in wiki or do a course\\degree, I don&#39;t know even where to begin"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1513118590, "post_id": 47782524, "comment_id": 82526839, "body": "&quot;Code&quot;, by its definition, <i>never</i> gets stored in a .data segment. Data segments are usually prevented against execution. Also, pure data may be stored in a .code segment \u2013 string literals, but also jump tables. The very code itself can also be data in itself. Think of a disassembler disassembling its own code."}], "answers": [{"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1513118284, "creation_date": 1513118284, "answer_id": 47782699, "question_id": 47782524, "link": "https://stackoverflow.com/questions/47782524/code-memory-and-data-memory/47782699#47782699", "title": "Code memory and data memory", "body": "<p>Most of .code comes from the binary image (as you might expect), the loader does make some changes before the program runs (writing the actual addresses of imported functions to an import table for example). On a system with hardware level memory control the pages that .code is loaded to will be marked read-only (and executable if the hardware gives that level of control).</p>\n\n<p>.data also comes from the program binary, but those pages are marked read-write and non-executable (except for .rodata which is read-only)</p>\n\n<p>.bss does not come from the binary, it simply gets allocated and initialized to 0 (this is the stack lives.</p>\n\n<p>After finishing the load the real program entry point runs (not main), this sets up the environment, runs initializers calls main runs destructors and any final tear-down code the platform needs.</p>\n"}], "owner": {"reputation": 1, "user_id": 9008305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/816bf7b64b9decd7de6982526c8bac54?s=128&d=identicon&r=PG&f=1", "display_name": "vikrant waje", "link": "https://stackoverflow.com/users/9008305/vikrant-waje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1513118284, "creation_date": 1513117397, "question_id": 47782524, "link": "https://stackoverflow.com/questions/47782524/code-memory-and-data-memory", "title": "Code memory and data memory", "body": "<p>When we write a particular code in C, that code gets allocated to either data memory or code memory. When are those memory initialised, at run time or compile time. Any possible explanation of why they are initialised that way?</p>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1513116472, "post_id": 47782307, "comment_id": 82525954, "body": "This is a vanilla C compilation error - it&#39;s unrelated to makefiles."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1513116473, "post_id": 47782307, "comment_id": 82525955, "body": "It has nothing to do with makefiles."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1513116485, "post_id": 47782307, "comment_id": 82525960, "body": "It&#39;s nothing to do with make."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1513116558, "post_id": 47782307, "comment_id": 82525986, "body": "How to suppress a warning? By fixing what it tells you."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1513116685, "post_id": 47782307, "comment_id": 82526049, "body": "&quot;what&#39;s the name of this warning?&quot; - what does that even mean? Do warnings have names now? Why do you care what its name is?"}, {"owner": {"reputation": 872, "user_id": 8077259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1wSe.jpg?s=128&g=1", "display_name": "caylee", "link": "https://stackoverflow.com/users/8077259/caylee"}, "edited": false, "score": 2, "creation_date": 1513116848, "post_id": 47782307, "comment_id": 82526115, "body": "The downvotes are quite hard, I think. It seems like the OP just wants to add the <code>-Wno-\u2026</code> flag to CFLAGS and doesn&#39;t know which one"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 872, "user_id": 8077259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1wSe.jpg?s=128&g=1", "display_name": "caylee", "link": "https://stackoverflow.com/users/8077259/caylee"}, "edited": false, "score": 0, "creation_date": 1513116901, "post_id": 47782307, "comment_id": 82526143, "body": "@xanoetux does that mean &quot;ignore warnings&quot;?"}, {"owner": {"reputation": 872, "user_id": 8077259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1wSe.jpg?s=128&g=1", "display_name": "caylee", "link": "https://stackoverflow.com/users/8077259/caylee"}, "edited": false, "score": 0, "creation_date": 1513116912, "post_id": 47782307, "comment_id": 82526146, "body": "Although this is not good style of course; but that was not the question"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 872, "user_id": 8077259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1wSe.jpg?s=128&g=1", "display_name": "caylee", "link": "https://stackoverflow.com/users/8077259/caylee"}, "edited": false, "score": 2, "creation_date": 1513116951, "post_id": 47782307, "comment_id": 82526160, "body": "@xanoetux just supressing compiler warnings is rarely the answer. You want to <i>fix</i> them."}, {"owner": {"reputation": 872, "user_id": 8077259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1wSe.jpg?s=128&g=1", "display_name": "caylee", "link": "https://stackoverflow.com/users/8077259/caylee"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1513117241, "post_id": 47782307, "comment_id": 82526282, "body": "@Jesper Juhl just supressing compiler warnings is not a good solution - nobody said so -, but the OP mentioned he isn&#39;t able to or at least doesn&#39;t want to change the code (and gave n code, making any diagnosis quite hard). And, by the way, I think there could be a <code>-Wno-all</code> flag, but I&#39;ve to check that."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 872, "user_id": 8077259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1wSe.jpg?s=128&g=1", "display_name": "caylee", "link": "https://stackoverflow.com/users/8077259/caylee"}, "edited": false, "score": 0, "creation_date": 1513117511, "post_id": 47782307, "comment_id": 82526370, "body": "@xanoetux If there <i>is</i> a &quot;-Wno-all&quot; flag or similar and anyone actually uses it, then they should not be allowed near a serious code-base and should go back to their basic programming books. Compiler warnings are there for a <i>reason</i>. They catch <i>errors</i>. You <i>should</i> enable as many of them as you can (and fix them). Ignoring them just labels you, right then and there, as a greenhorn or incompetent. Please stay away from any code <i>I&#39;m</i> responsible for."}, {"owner": {"reputation": 872, "user_id": 8077259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E1wSe.jpg?s=128&g=1", "display_name": "caylee", "link": "https://stackoverflow.com/users/8077259/caylee"}, "edited": false, "score": 1, "creation_date": 1513117769, "post_id": 47782307, "comment_id": 82526470, "body": "Just to clarify, my projects are all compiled with <code>-Wall -Wextra -Werror</code>, so I understand the importance of compiler warnings. But if the OP was questioned to, e.g., setup a completely silent make process, and has no coding experience or time, this is what to do."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1513118325, "post_id": 47782307, "comment_id": 82526735, "body": "@JesperJuhl in this case OP is not the author of the code. They just compile the code, and if the task is to compile someone else&#39;s code, ignoring warnings could be a feasible strategy."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1513118742, "post_id": 47782307, "comment_id": 82526907, "body": "@SergeyA I see what you are saying but I don&#39;t agree. Ignoring warnings and still incorporating the code into your project seems very questionable to me. I hope most people strive for higher standards (but I&#39;m probably wrong since there&#39;s so much crap &quot;out there&quot;)."}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "edited": false, "score": 2, "creation_date": 1513118839, "post_id": 47782307, "comment_id": 82526955, "body": "This is just a WAG, but the closest thing I can find in the gcc documentation is <code>-Wno-missing-declarations</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1513118900, "post_id": 47782307, "comment_id": 82526982, "body": "@JesperJuhl I used to compile a lot of open source code. Regretfully, many applications come with a hefty does of warnings. What was I to do? I didn&#39;t have resources to study the application and fix the warning. Instead, I had to use whatever I had."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1513119372, "post_id": 47782307, "comment_id": 82527171, "body": "@SergeyA we are probably in different situations. But in <i>my</i> case, I wouldn&#39;t use any code that caused trivial compiler warnings. And if someone told me I <i>had to</i> I would plain refuse until I had studied the code (and probably submitted a few fixes upstream) - doing anything less would be unprofessional. As for your &quot;What was I to do?&quot; Question; I&#39;d say &quot;just say no&quot;. Don&#39;t just accept crap - there&#39;s too much of that going on already."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1513120248, "post_id": 47782307, "comment_id": 82527504, "body": "@DOUGLAS O. MOEN - Excuse me, but if your codebase generated 25k warnings, then it was probably crap and you <i>should</i> have fixed those warnings instead of ignoring them. There probably were <i>real bugs</i> hiding there."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1513121070, "post_id": 47782307, "comment_id": 82527764, "body": "@JesperJuhl nobody told me to, it is just that I need this application and there was no prebuilt package. Fixing application wasn&#39;t an option, not using the application would mean my goals are not achieved. Needs must."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1513131445, "post_id": 47782307, "comment_id": 82530478, "body": "&#39;most&#39; provided code will compile with NO warnings.  if you get a warning like the one mentioned in the question, then most likely there is a missing header file."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1513116823, "post_id": 47782383, "comment_id": 82526102, "body": "The warning does not say it is undeclared."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1513117010, "post_id": 47782383, "comment_id": 82526182, "body": "@Weather Vane: Yes, it is actually does say that implicitly. Otherwise, there wouldn&#39;t be any warning."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1513117075, "post_id": 47782383, "comment_id": 82526208, "body": "@AnT if it was unknown the warning would say that <b>explicitly</b>? I took the warning to mean there is a conflict: but without the MCVE the answer is guesswork"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1513117137, "post_id": 47782383, "comment_id": 82526235, "body": "@Weather Vane: The warning basically says: &quot;You are declaring a <i>new</i> struct type with <i>prototype scope</i>. It won&#39;t be visible outside of that scope&quot;. If the struct type were already known at that point, the reference to it woudn&#39;t have been regarded as a new declaration."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1513118202, "post_id": 47782383, "comment_id": 82526685, "body": "@AnT a curious session: MSVC does not object to that function prototype, nor to a function definition which just has <code>return</code>, and not even when calling that function from <code>main</code> with <code>get_client_cred(0, NULL);</code> Is there a reason for that (apart from the vagaries of MSVC)?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1513118308, "post_id": 47782383, "comment_id": 82526726, "body": "@WeatherVane: The warning says, in effect, that <code>struct ucred</code> was not <i>previously</i> declared. Declaring <code>struct ucred *cred</code> as a parameter is perfectly legal whether <code>struct ucred</code> was previously declared or not. But if it wasn&#39;t previously declared, then it&#39;s pretty much useless, since it refers to a newly created incomplete type. (It might be nice if this where forbidden by the language, but it isn&#39;t. so a conforming compiler can&#39;t just reject it.)"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1513119649, "post_id": 47782383, "comment_id": 82527266, "body": "@Weather Vane: There&#39;s nothing to object here - your code is valid. However, <code>void foo(struct S *p) {} struct S* p = 0; int main() { foo(p); }</code> should trigger a diagnostic message, since these are two unrelated <code>struct S</code> types. MSVC does not complain, which is a bug in MSVC."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1513122419, "post_id": 47782383, "comment_id": 82528153, "body": "It would also be possible to put <code>struct ucred;</code> before the prototype, rather than moving the entire struct definition"}, {"owner": {"reputation": 19345, "user_id": 1055279, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/13ac92a723e01487c1e6052d2c318353?s=128&d=identicon&r=PG", "display_name": "realtebo", "link": "https://stackoverflow.com/users/1055279/realtebo"}, "edited": false, "score": 0, "creation_date": 1513145877, "post_id": 47782383, "comment_id": 82534454, "body": "Thanks, I know, but I ask how to supress it. If it&#39;s not possible, amen, but you&#39;ve not replied to my exact question."}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "reply_to_user": {"reputation": 19345, "user_id": 1055279, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/13ac92a723e01487c1e6052d2c318353?s=128&d=identicon&r=PG", "display_name": "realtebo", "link": "https://stackoverflow.com/users/1055279/realtebo"}, "edited": false, "score": 0, "creation_date": 1513177759, "post_id": 47782383, "comment_id": 82553402, "body": "@realtebo I understand you were only interested in suppression but just like you I wasn&#39;t able to find an exact gcc flag to suppress just this warning.   Did you try <code>-Wno-missing-declarations</code> at all?  The gcc documentation says &quot;No warnings are issued for global functions and variables without prior declaration.&quot;"}], "tags": [], "owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "is_accepted": false, "score": 2, "last_activity_date": 1513116774, "creation_date": 1513116774, "answer_id": 47782383, "question_id": 47782307, "link": "https://stackoverflow.com/questions/47782307/makefile-whats-the-name-of-this-warning/47782383#47782383", "title": "Makefile: what&#39;s the name of this warning?", "body": "<p>Move your struct declaration so that it comes before the function declarations. I know you don't want to edit the 3rd party source, but that is how you fix this warning.</p>\n"}, {"comments": [{"owner": {"reputation": 193, "user_id": 7927672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349c309560c1a72c588d75e757b651b7?s=128&d=identicon&r=PG&f=1", "display_name": "Ian4264 ", "link": "https://stackoverflow.com/users/7927672/ian4264"}, "edited": false, "score": 1, "creation_date": 1513118497, "post_id": 47782563, "comment_id": 82526798, "body": "Usually gcc gives the name of the warning unless you use the -fno-diagnostics-show-option (see <a href=\"https://gcc.gnu.org/onlinedocs/gcc-7.2.0/gcc/Diagnostic-Message-Formatting-Options.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc-7.2.0/gcc/&hellip;</a>) and I think you can enable th"}, {"owner": {"reputation": 193, "user_id": 7927672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349c309560c1a72c588d75e757b651b7?s=128&d=identicon&r=PG&f=1", "display_name": "Ian4264 ", "link": "https://stackoverflow.com/users/7927672/ian4264"}, "edited": false, "score": 0, "creation_date": 1513118668, "post_id": 47782563, "comment_id": 82526877, "body": "Whoops posted too soon - was just going to suggest using -fdiagnostics-show-option to re-enable them"}, {"owner": {"reputation": 19345, "user_id": 1055279, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/13ac92a723e01487c1e6052d2c318353?s=128&d=identicon&r=PG", "display_name": "realtebo", "link": "https://stackoverflow.com/users/1055279/realtebo"}, "edited": false, "score": 0, "creation_date": 1513145863, "post_id": 47782563, "comment_id": 82534450, "body": "Thanks, I know, but I ask how to supress it. If it&#39;s not possible, amen, but you&#39;ve not replied to my exact question."}, {"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1513184576, "post_id": 47782563, "comment_id": 82558004, "body": "If you do what I suggest, the warning message will no longer appear.  How is that not the same as suppressing it?"}, {"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1513185786, "post_id": 47782563, "comment_id": 82558794, "body": "Why does the answer to move the struct declaration to before the function declaration have two up votes, while my answer, which is basically the same suggestion, just more specific about how to do that, have one down vote?"}], "tags": [], "owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "is_accepted": false, "score": -1, "last_activity_date": 1513117581, "creation_date": 1513117581, "answer_id": 47782563, "question_id": 47782307, "link": "https://stackoverflow.com/questions/47782307/makefile-whats-the-name-of-this-warning/47782563#47782563", "title": "Makefile: what&#39;s the name of this warning?", "body": "<p>Add <code>-include ucred.h</code> to the GCC command line.</p>\n\n<p>Alternately, create a new .c source file with these contents:</p>\n\n<pre><code>#include \"ucred.h\"\n#include \"misc.c\" // &lt;- name of the original .c file you were compiling\n</code></pre>\n\n<p>And compile that instead of the original .c file.</p>\n"}, {"tags": [], "owner": {"reputation": 2991, "user_id": 3877787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPxhf.jpg?s=128&g=1", "display_name": "Zalman Stern", "link": "https://stackoverflow.com/users/3877787/zalman-stern"}, "is_accepted": true, "score": 0, "last_activity_date": 1513121384, "creation_date": 1513121384, "answer_id": 47783236, "question_id": 47782307, "link": "https://stackoverflow.com/questions/47782307/makefile-whats-the-name-of-this-warning/47783236#47783236", "title": "Makefile: what&#39;s the name of this warning?", "body": "<p>There does not appear to be a command line flag to suppress just this warning. (Going by the <a href=\"https://github.com/gcc-mirror/gcc/blob/master/gcc/c/c-decl.c#L7342\" rel=\"nofollow noreferrer\">gcc source code</a> which is passing 0 for the second argument to <code>warning_at</code>.) You can add <code>-w</code> to suppress all warnings. If the code is actually C++, which is unlikely but possible, using g++ instead of gcc might fix the issue. (I'd expect lots else to be wrong if the code was originally written as C++.)</p>\n"}], "owner": {"reputation": 19345, "user_id": 1055279, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/13ac92a723e01487c1e6052d2c318353?s=128&d=identicon&r=PG", "display_name": "realtebo", "link": "https://stackoverflow.com/users/1055279/realtebo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 47783236, "answer_count": 3, "score": -1, "last_activity_date": 1513145770, "creation_date": 1513116383, "last_edit_date": 1513145770, "question_id": 47782307, "link": "https://stackoverflow.com/questions/47782307/makefile-whats-the-name-of-this-warning", "title": "Makefile: what&#39;s the name of this warning?", "body": "<p>I'm compiling a 3rd party .c file.</p>\n\n<p>I've no intention to modify the source code. I'm not a .c programmer. And the code is not mine.</p>\n\n<blockquote>\n  <p>EDIT: This is the folder code I need to compile, for the precision, I need only magiskboot; it's a specific piece of a more large tool. The official makefile build all the tool with the\n  result that the specific executable I want has something 'wrong'. So\n  I'm just trying to build it standalone </p>\n  \n  <p><a href=\"https://github.com/topjohnwu/Magisk/tree/master/core/jni/magiskboot\" rel=\"nofollow noreferrer\">link to magiskboot specific directory on github</a></p>\n</blockquote>\n\n<p>I've this warning when compiling using gcc</p>\n\n<pre><code>../include/utils.h:89:37: warning: \u2018struct ucred\u2019 declared inside parameter list\nvoid get_client_cred(int fd, struct ucred *cred);\n</code></pre>\n\n<p>What's the name of this type of warning? And how to suppress it?</p>\n\n<p>I searched into <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html</a> but without founding the right flag</p>\n"}, {"tags": ["c", "arrays", "pointers", "malloc", "realloc"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 1, "creation_date": 1513116262, "post_id": 47782271, "comment_id": 82525862, "body": "<code>*files = realloc(files, amtFiles * sizeof *files);</code> What a mess!"}, {"owner": {"reputation": 1285, "user_id": 8955448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDG4Z.jpg?s=128&g=1", "display_name": "Galen", "link": "https://stackoverflow.com/users/8955448/galen"}, "edited": false, "score": 1, "creation_date": 1513116494, "post_id": 47782271, "comment_id": 82525964, "body": "Look at what you are reallocing and what you are assigning the return to. <code>*files</code> and <code>files</code> are not the same thing. It may help to draw a diagram."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1513118481, "post_id": 47782271, "comment_id": 82526792, "body": "Format improved but a <code>{</code> is still missing somewhere - or an extra <code>}</code> is coded.  Missing return value"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1513118600, "post_id": 47782271, "comment_id": 82526845, "body": "Wrong size in   <code>*files = realloc(files, amtFiles * sizeof *files);</code>  Unclear how to correct as coding goal is not apparent to me."}, {"owner": {"reputation": 21, "user_id": 7150539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549731b59dee1e56434b839ffd8356ba?s=128&d=identicon&r=PG&f=1", "display_name": "player3c", "link": "https://stackoverflow.com/users/7150539/player3c"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1513118899, "post_id": 47782271, "comment_id": 82526979, "body": "@chux may be missing one i just trimmed my code quickly to give an example, and my goal is to create the list in main but be able to realloc it as i need in parse.c. Its going to be a list of file names stored in main in the end but i never know how many files will be used"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1513119116, "post_id": 47782271, "comment_id": 82527071, "body": "Code <code>extern int parseArguments(int argc, char *argv[], char *files[]) ;</code> before   <code>main()</code> to get a compiler warning with <code>parseArguments( argc, argv,&amp;files);</code>.  Fully enable the compiler warnings.  Address the ones you can, post the ones you cannot.  It saves you and us time."}, {"owner": {"reputation": 21, "user_id": 7150539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549731b59dee1e56434b839ffd8356ba?s=128&d=identicon&r=PG&f=1", "display_name": "player3c", "link": "https://stackoverflow.com/users/7150539/player3c"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1513120599, "post_id": 47782271, "comment_id": 82527607, "body": "@John3136  I&#39;m new to c ,how would you suggest I do it?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1571679422, "post_id": 47782271, "comment_id": 103312993, "body": "Please <a href=\"https://stackoverflow.com/posts/47782271/edit\">edit</a> your question to show us what kind of debugging you&#39;ve done.  I expect you to have run your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> within Valgrind or a similar checker, and to have investigated with a debugger such as GDB, for example.  Ensure you&#39;ve enabled a full set of compiler warnings, too.  What did the tools tell you, and what information are they missing?  And read Eric Lippert&#39;s <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}], "answers": [{"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": -1, "last_activity_date": 1513116806, "creation_date": 1513116806, "answer_id": 47782391, "question_id": 47782271, "link": "https://stackoverflow.com/questions/47782271/reallocing-a-c-array-inside-extern-function/47782391#47782391", "title": "Reallocing a c array inside extern function", "body": "<hr>\n\n<p>In your main files is a char ** (and you pass its address so the parameter is actually a char ***) but parseArguments only takes a char*[].</p>\n\n<p>Add a prototype for In your main files is a char ** (and you pass its address so the parameter is actually a char ***) nut parseArguments only takes a char*[]. in main.c and the compiler would tell you about this. I suspect it is your main that is correct but I have not parsed through the code to make sure of that.</p>\n"}], "owner": {"reputation": 21, "user_id": 7150539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549731b59dee1e56434b839ffd8356ba?s=128&d=identicon&r=PG&f=1", "display_name": "player3c", "link": "https://stackoverflow.com/users/7150539/player3c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1513118438, "creation_date": 1513116160, "last_edit_date": 1513118438, "question_id": 47782271, "link": "https://stackoverflow.com/questions/47782271/reallocing-a-c-array-inside-extern-function", "title": "Reallocing a c array inside extern function", "body": "<p>Hi I'm trying to malloc a <code>char*</code> array in my <code>main()</code> then <code>realloc</code> in an extern function every time the parsing loop finds a file. All my code works except for the <code>malloc</code> and <code>realloc</code> of <code>char * files[]</code>.</p>\n\n<p>When I run the following code I receive this error</p>\n\n<pre><code>*** Error in `./Assignment2': double free or corruption (out): 0x00007ffcefe78e50 ***\n======= Backtrace: =========\n--Lots of memory locations listed--\nAborted (core dumped)\n</code></pre>\n\n<p>Main.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[]){\n  char **files = malloc(sizeof(char*));\n\n  /* parse the command line arguments */\n  parseArguments( argc, argv,&amp;files);\n}\n</code></pre>\n\n<p>parse.c</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include \"stddef.h\";\n#include &lt;stdlib.h&gt;\n#include &lt;argp.h&gt;\n\nchar* printUsage();\nextern int parseArguments(int argc, char *argv[], char *files[]) {\n  int i = 1;\n  int amtFiles = 0;\n  /** Loops through each item turning on and off switches*/\n  while (argc &gt; 1) { /* i moves left to right 0 is file name so start at 1*/\n\n      if (isFile(argv[i]) == 1) { /*if its a file */\n        *files = realloc(files, amtFiles * sizeof *files);\n        *files[amtFiles] = argv[i];\n        /*printf(\"%s\",*files[amtFiles]);*/\n        amtFiles++;\n      }\n\n    }\n    i++;/* increment argv[i] to next inputted char*/\n    argc--; /* decrement the total amount of arguments to go through */\n\n  }/*Loop ends */\n\n}\n</code></pre>\n\n<p>I'm assuming its a pointer error but having a hard time figuring it out as I'm new to C and pointers are still a little confusing. If you could also include a link or explanation it would be greatly appreciated.</p>\n"}, {"tags": ["c", "file-io", "io", "system-calls"], "comments": [{"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1513115312, "post_id": 47782049, "comment_id": 82525513, "body": "File I/O is typically buffered. Have you compared your approach to something &quot;more optimised&quot;? If not, read and  write  chunks (e.g. 1000 bytes) and compare the results."}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "edited": false, "score": 0, "creation_date": 1571655981, "post_id": 47782049, "comment_id": 103300847, "body": "Are you sure that <code>readIt()</code> is supposed to return the size of only the last read element?"}], "owner": {"reputation": 215, "user_id": 9090969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/elKMY.jpg?s=128&g=1", "display_name": "Nicryc", "link": "https://stackoverflow.com/users/9090969/nicryc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1513115024, "creation_date": 1513115024, "question_id": 47782049, "link": "https://stackoverflow.com/questions/47782049/minimise-read-and-write-system-calls-in-c", "title": "Minimise read and write system calls in C", "body": "<p>I'm a computer science student and I must do a practical in C on the Inputs/outputs of a file system. In fact I have to code the Inputs/outputs of a file system. I have to create functions : openIt, closeIt, readIt and writeIt.\nFor the moment I have that :</p>\n\n<pre><code>int readIt(void *p, unsigned int size, unsigned int nbelem, FILE *f) {\n  printf(\"Read of %d char \u2026 \\n\", nbelem);\n  if (f-&gt;mode != 'L'){\n    printf(\"ERROR : file not open in read mode. \\n\");\n    return -1;\n  }\n  int sizeRead = 0;\n  for (int i  = 0; i &lt; nbelem; i++){\n    if ((sizeRead = read(f-&gt;fd,p,size)) &lt; 0){\n      printf(\"ERROR : read impossible. \\n\");\n    }\n  }\n  return sizeRead;\n}\n</code></pre>\n\n<p>with this file structure : </p>\n\n<pre><code>#define MAX 10\n\nstruct _ES_FICHIER {\n  char mode ;\n  char buffer[MAX];\n  int index ;\n  int fd ;\n};\n</code></pre>\n\n<p>But in fact the purpose of this practical is to minimise read, write, open and close system calls. Yet I've done a loop so it's not really optimised, I have much too much read.</p>\n\n<p>My readIt and writeIt functions are used in a file test.c like that :</p>\n\n<pre><code>FILE *f1;\nFILE *f2;\nchar c;\n\nwhile (readIt (&amp;c, 1, 1, f1) == 1) {\n   writeIt (&amp;c, 1, 1, f2);\n}\n</code></pre>\n\n<p>In my file 1 and file 2, I only have strings like : \u00ab abcd \u00bb.</p>\n\n<p>I don't use the buffer of my file structure for the moment. It must contain the content of the file to read and a read() have to be used use only if need be. For example when the buffer is full or when the file has been entirely read.</p>\n\n<p>Basically : We put all the content of the file in the buffer -> We call read to store this buffer in p.</p>\n\n<p>But I don't understand how to get the contents of the file without a lot of read() calls. I'm really stuck at this precise point.</p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["c", "memory-management", "dynamic-memory-allocation", "static-memory-allocation"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1513114277, "post_id": 47781883, "comment_id": 82525096, "body": "What do you think? How would you define dynamic allocation?"}, {"owner": {"reputation": 583, "user_id": 9090981, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8edd1343a0d8e8997f6f62599b02e83?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Dogra", "link": "https://stackoverflow.com/users/9090981/ashish-dogra"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1513114365, "post_id": 47781883, "comment_id": 82525138, "body": "I think maybe dynamic memory allocation."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1513114605, "post_id": 47781883, "comment_id": 82525241, "body": "Well, although one can claim that it is dynamic, since the amount of the memory allocated is decided in the run-time, it is not a dynamic allocation in the strict C meaning, which has a distinction between static, automatic and dynamic allocation. This one is falling under &quot;automatic&quot;."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1513114739, "post_id": 47781883, "comment_id": 82525303, "body": "@EugeneSh. - To be pedantic, C distinguishes <i>storage durations</i> - static vs. automatic vs. allocated (vs. thread in C11)."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 1, "creation_date": 1513114889, "post_id": 47781883, "comment_id": 82525362, "body": "It&#39;s a good question -- dynamic allocation in C almost always refers to the <code>malloc</code>-family of functions and heap allocation, but this is definitely not static allocation, so it&#39;s not weird that you are confused with how to clasify it. So, yes, this falls under the third type, &quot;automatic allocation&quot;. In this case <code>a</code> is a variable-length automatic array. Note that the actual place where this array will be stored is implementation dependant, C does not deal with stacks and heaps."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1513114922, "post_id": 47781883, "comment_id": 82525374, "body": "And the distinction between &quot;allocation&quot; and &quot;storage duration&quot; is key here, in that it underscores that C is concerned with how the memory is <i>managed</i> -- its whole life cycle -- not just how and when it is obtained.  If one is concerned only with the latter part, then this is a matter of how you define your terms."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1513115117, "last_edit_date": 1513115117, "creation_date": 1513114526, "answer_id": 47781941, "question_id": 47781883, "link": "https://stackoverflow.com/questions/47781883/is-this-is-an-example-of-static-memory-allocation-or-dynamic-memory-allocation/47781941#47781941", "title": "Is this is an example of static memory allocation or dynamic memory allocation?", "body": "<p><code>int a[n]</code> is a variable length array with the automatic storage duration,</p>\n\n<p>Consider the following demonstrative program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) \n{\n    const size_t N = 10;\n\n    for ( size_t i = 1; i &lt;= N; i++ )\n    {\n        char s[i];\n\n        memset( s, '*', sizeof( s ) );\n\n        printf( \"%*.*s\\n\", ( int )i, ( int )i, s );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>*\n**\n***\n****\n*****\n******\n*******\n********\n*********\n**********\n</code></pre>\n\n<p>Each time when the control is passed to the body of the loop the generated by the compiler code creates a local array <code>s[n]</code> life-time of which ends at the end of the body of the loop.</p>\n"}, {"tags": [], "owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "is_accepted": true, "score": 13, "last_activity_date": 1513114941, "creation_date": 1513114941, "answer_id": 47782037, "question_id": 47781883, "link": "https://stackoverflow.com/questions/47781883/is-this-is-an-example-of-static-memory-allocation-or-dynamic-memory-allocation/47782037#47782037", "title": "Is this is an example of static memory allocation or dynamic memory allocation?", "body": "<p>The C standard does not talk about dynamic allocation (or static <em>allocation</em>, for that matter). But it does define storage <em>durations</em>: static, automatic, thread and allocated. Which dictates how long an object (a piece of data) lives (is usable).</p>\n\n<ul>\n<li><p><strong>Static</strong> in the sense of storage duration means the object is usable for the entire execution of the program. Variables at file scope ('global' variables), and local variables with <code>static</code> in their declaration, have static storage duration.</p></li>\n<li><p><strong>Automatic</strong> storage duration are your regular local variables, they live only for the duration of the block they are declared in (the function, or inside the curly braces of e.g. a <code>for</code> loop).</p></li>\n<li><p><strong>Allocated</strong> storage duration refers to memory obtained via <code>malloc</code> and friends. It is available from a (successful) call to <code>malloc</code>, until a corresponding call <code>free</code>. This is often referred to as dynamic memory allocation, as it is a way to obtain a block of memory with the size determined at run-time.</p></li>\n</ul>\n\n<p>Your variable <code>a</code> has automatic storage duration. However, it can be considered dynamic in the sense that its length is determined at run-time, rather than compile-time. Just like allocated storage duration has.</p>\n"}, {"tags": [], "owner": {"reputation": 125, "user_id": 8773110, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fe788561ab3e97548601a14433e7875?s=128&d=identicon&r=PG&f=1", "display_name": "Coderandhacker", "link": "https://stackoverflow.com/users/8773110/coderandhacker"}, "is_accepted": false, "score": 1, "last_activity_date": 1513477511, "creation_date": 1513477511, "answer_id": 47851695, "question_id": 47781883, "link": "https://stackoverflow.com/questions/47781883/is-this-is-an-example-of-static-memory-allocation-or-dynamic-memory-allocation/47851695#47851695", "title": "Is this is an example of static memory allocation or dynamic memory allocation?", "body": "<p>No it's comes under automatic allocation</p>\n"}], "owner": {"reputation": 583, "user_id": 9090981, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8edd1343a0d8e8997f6f62599b02e83?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Dogra", "link": "https://stackoverflow.com/users/9090981/ashish-dogra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2055, "favorite_count": 0, "accepted_answer_id": 47782037, "answer_count": 3, "score": 4, "last_activity_date": 1513555949, "creation_date": 1513114244, "last_edit_date": 1513555949, "question_id": 47781883, "link": "https://stackoverflow.com/questions/47781883/is-this-is-an-example-of-static-memory-allocation-or-dynamic-memory-allocation", "title": "Is this is an example of static memory allocation or dynamic memory allocation?", "body": "<p>I researched a lot of static and dynamic memory allocation but still, there is a confusion that:</p>\n\n<pre><code>int n, i, j;\nprintf(\"Please enter the number of elements you want to enter:\\t\");\nscanf(\"%d\", &amp;n);\nint a[n];\nfor (i = 0; i &lt; n; i++)\n{\n    printf(\"a[%d] : \", i + 1);\n    scanf(\"%d\", &amp;a[i]);\n}\n</code></pre>\n\n<p>Does <code>int a[n]</code> come under static or dynamic memory allocation?</p>\n"}, {"tags": ["c", "generics", "unions"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1513113801, "post_id": 47781740, "comment_id": 82524876, "body": "You&#39;ve got a <i>pointer</i> to the data. Use the generic pointer type: <code>void *</code>. And... you can always use <code>uint32_t</code> for every single one of these, it would just waste some memory :D"}, {"owner": {"reputation": 33, "user_id": 4671971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c37be1f9a40ad4549c7cede2c1aa24e?s=128&d=identicon&r=PG&f=1", "display_name": "itzseven7", "link": "https://stackoverflow.com/users/4671971/itzseven7"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1513114202, "post_id": 47781740, "comment_id": 82525059, "body": "Thanks for your quick answer! Yeah I tried the void * solution, but I still need a datatype to cast the data if I want to access a pixel at a given index. As you said I can also use an uint32_t, but I would like to use appropriate datatype according to pixel max value. Thanks again!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1513116839, "post_id": 47781740, "comment_id": 82526110, "body": "Concerning image formats:  The range of <code>width, height, depth</code> are often specified by the format.  I recommend to use <code>uintN_t</code> for these members too."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1513114936, "creation_date": 1513114936, "answer_id": 47782036, "question_id": 47781740, "link": "https://stackoverflow.com/questions/47781740/generic-datatype-in-c/47782036#47782036", "title": "Generic datatype in c", "body": "<p>You can use a <code>void *</code> for a generic pointer:</p>\n\n<pre><code>typedef struct img_t {\n    unsigned int width, height, depth;\n    size_t dsize;\n    void *data;\n} img_t;\n</code></pre>\n\n<p>Then use the <code>dsize</code> member to figure out how to cast it:</p>\n\n<pre><code>int value;\nswitch (my_img_t.dsize) {\ncase 8:\n    value = ((uint8_t *)my_img_t.data)[idx];\n    break;\ncase 16:\n    value = ((uint16_t *)my_img_t.data)[idx];\n    break;\ncase 32:\n    value = ((uint32_t *)my_img_t.data)[idx];\n    break;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1513115028, "creation_date": 1513115028, "answer_id": 47782050, "question_id": 47781740, "link": "https://stackoverflow.com/questions/47781740/generic-datatype-in-c/47782050#47782050", "title": "Generic datatype in c", "body": "<p>If done in C this is going to require at minimum different statements to handle the different sizes, as in:</p>\n\n<pre><code>void handle_img(void * ptr, unsigned size)\n{\nif(sizeof(uint8-_t)==sze)\n{...}\nelse if(sizeof(uint16_t)==size)\n{...}\nelse if(sizeof(uint32_t)==size)\n{}\n}\n</code></pre>\n\n<p>Depending on the exact manipulation it may make sense to break the individual handlers into separate functions. The point is that unlike C++ at some point you are going to have to write code for each branch individually.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1513116463, "creation_date": 1513116463, "answer_id": 47782326, "question_id": 47781740, "link": "https://stackoverflow.com/questions/47781740/generic-datatype-in-c/47782326#47782326", "title": "Generic datatype in c", "body": "<blockquote>\n  <p>Is there a way to define a generic \"unsigned int\" type that can handle values on 8-bits, 16-bits etc.. without creating a struct/function for each case ?</p>\n</blockquote>\n\n<p>No, not that would suit your purpose.  Every complete C data type has a specific representation, and you can read or write objects' values only if you have a complete type for them.  You certainly could define a union that can hold different-size integers:</p>\n\n<pre><code>union uint_any {\n    uint8_t  u8;\n    uint16_t u16;\n    uint32_t u32;\n};\n</code></pre>\n\n<p>... but objects of that type all have the same size, which is sufficient to accommodate the largest member.  Thus, a raster of, say, 16-bit pixels without any padding between does not match up with an array of <code>union uint_any</code>, at least not if you want to read all the pixels via the <code>u16</code> member.</p>\n\n<hr>\n\n<p>You <em>can</em> use a <code>void *</code> to point to your array, so as to avoid separate structures for each pixel size, and your functions can sort it out internally so that you need only one function for each purpose.  Additionally, if you have image manipulation functions complex enough to warrant it then you can probably benefit from reducing or eliminating code duplication by using macros.  Here's an example for a simpler case than probably warrants such treatment:</p>\n\n<pre><code>struct img {\n    unsigned int width, height, depth;\n    size_t dsize;\n    void *data;\n};\n\nuint32_t get_pixel(struct img *image, unsigned x, unsigned y) {\n    // Warning: evaluates its first argument twice:\n    #define GET_PIXEL(i,t,x,y) (((t*)((i)-&gt;data))[(x)*((i)-&gt;width)+(y)])\n    switch (img.dsize) {\n        case 8:\n            return GET_PIXEL(image, uint8_t, x, y);\n        case 16:\n            return GET_PIXEL(image, uint16_t, x, y);\n        case 32:\n            return GET_PIXEL(image, uint32_t, x, y);\n        default:\n            // handle error ...\n    }\n    #undef GET_PIXEL\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1513117621, "creation_date": 1513117621, "answer_id": 47782570, "question_id": 47781740, "link": "https://stackoverflow.com/questions/47781740/generic-datatype-in-c/47782570#47782570", "title": "Generic datatype in c", "body": "<blockquote>\n  <p>Is there a way to define a generic <em>unsigned int</em> type that can handle values on 8-bits, 16-bits etc.. without creating a struct/function for each case ?</p>\n</blockquote>\n\n<p>To avoid casting, consider a <code>union</code> of pointers.</p>\n\n<pre><code>typedef struct imgN_t {\n    unsigned int width, height, depth;\n    size_t dsize;\n    union {\n      uint32_t *u32;\n      uint16_t *u16;\n      uint8_t *u8;\n    } data;\n} imgN_t;\n</code></pre>\n\n<p>A generic function:</p>\n\n<pre><code>// return widest\nuint32_t img_get_pixel(imgN_t *i, unsigned x, unsigned y) {\n  switch (i-&gt;depth) {\n    case 8: return i-&gt;data.u8[y*i-&gt;width + x];\n    ...  // other sizes\n    case 32: return i-&gt;data.u32[y*i-&gt;width + x];\n  }\n}\n</code></pre>\n\n<p>Or explicit higher performance ones for each.</p>\n\n<pre><code>uint8_t img_get_pixel8(imgN_t *i, unsigned x, unsigned y) {\n  assert(i-&gt;depth == 8);\n  return i-&gt;data.u8[y*i-&gt;width + x];\n}\n\nuint16_t img_get_pixel16(imgN_t *i, unsigned x, unsigned y) {\n  assert(i-&gt;depth == 16);\n  return i-&gt;data.u16[y*i-&gt;width + x];\n}\n\nuint32_t img_get_pixel32(imgN_t *i, unsigned x, unsigned y) {\n  assert(i-&gt;depth == 32);\n  return i-&gt;data.u32[y*i-&gt;width + x];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2080, "user_id": 3593970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a400b1ae70b4b4f209e2c82ceeeedfe?s=128&d=identicon&r=PG&f=1", "display_name": "Zden\u011bk Jel&#237;nek", "link": "https://stackoverflow.com/users/3593970/zden%c4%9bk-jel%c3%adnek"}, "is_accepted": false, "score": 0, "last_activity_date": 1513119199, "creation_date": 1513119199, "answer_id": 47782886, "question_id": 47781740, "link": "https://stackoverflow.com/questions/47781740/generic-datatype-in-c/47782886#47782886", "title": "Generic datatype in c", "body": "<p>Depending on the size and security requirements of your project, you may also make use of C macros to generate the generic code.</p>\n\n<p>Bear in mind that this grows very ugly very fast, but it gives you type checks, e.g. assigning <code>1024</code> to <code>img8_t</code> gives you warning in compile-time, not only silent overflow in run-time. And you also implement everything once.</p>\n\n<p>Example implementation:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n\n// declarations\n\n#define UINT_T(SIZE) uint ## SIZE ## _t\n#define IMG_T(SIZE) img ## SIZE ## _t\n\n#define DECLARE_IMG(SIZE) \\\ntypedef struct IMG_T(SIZE) \\\n{ \\\n    unsigned int width, height, depth; \\\n    size_t dsize; \\\n    UINT_T(SIZE) *data; \\\n} IMG_T(SIZE); \\\n\\\nUINT_T(SIZE) img ## SIZE ## _get_pixel(IMG_T(SIZE) *img, size_t index) \\\n{ \\\n    return img-&gt;data[index]; \\\n} \\\n\\\nvoid img ## SIZE ## _set_pixel(IMG_T(SIZE) *img, size_t index, UINT_T(SIZE) value) \\\n{ \\\n    img-&gt;data[index] = value; \\\n}\n\nDECLARE_IMG(8)\nDECLARE_IMG(16)\n\n// usage\n\nint main(void)\n{\n    uint8_t data[1];\n    img8_t img8 = { .data = data };\n\n    img8_set_pixel(&amp;img8, 0, 1024U);\n\n    printf(\"%u\\n\", img8_get_pixel(&amp;img8, 0));\n\n    return 0;\n}\n</code></pre>\n\n<p>This doesn't give you exactly pleasant time during maintenance, but if you're writing very generic library code, it might be worth it.</p>\n\n<p>You could also create custom initialization function that would set the <code>dsize</code> to proper value (e.g. <code>UINT ## SIZE ##_MAX</code>).</p>\n"}], "owner": {"reputation": 33, "user_id": 4671971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c37be1f9a40ad4549c7cede2c1aa24e?s=128&d=identicon&r=PG&f=1", "display_name": "itzseven7", "link": "https://stackoverflow.com/users/4671971/itzseven7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "accepted_answer_id": 47782326, "answer_count": 5, "score": 1, "last_activity_date": 1514996373, "creation_date": 1513113666, "last_edit_date": 1514996373, "question_id": 47781740, "link": "https://stackoverflow.com/questions/47781740/generic-datatype-in-c", "title": "Generic datatype in c", "body": "<p>I'm working on a small image processing library in C.</p>\n\n<p>I want to represent an image as an array of pixels which can have different types : uint8_t (for pixels whose the max value does not exceed 255), uint16_t (same but with max value at 65535), uint32_t..</p>\n\n<p>I'm going with this for the moment :</p>\n\n<pre><code>typedef struct img8_t {\n    unsigned int width, height, depth;\n    size_t dsize;\n    uint8_t *data;\n}img8_t;\n\ntypedef struct img16_t {\n    unsigned int width, height, depth;\n    size_t dsize;\n   uint16_t *data;\n}img16_t;\n\ntypedef struct img32_t {\n    unsigned int width, height, depth;\n    size_t dsize;\n    uint32_t *data;\n}img32_t;\n</code></pre>\n\n<p><strong>dsize</strong> contains the size of the datatype for the pixels</p>\n\n<p>And I have the same number of function to allocate/deallocate and process these images.</p>\n\n<p>Is there a way to define a generic \"unsigned int\" type that can handle values on 8-bits, 16-bits etc.. without creating a struct/function for each case ?</p>\n\n<p>Should I use an union ?</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1513112566, "post_id": 47781328, "comment_id": 82524318, "body": "I conflicted between voting up for an interesting question and not voting up because, if your input is exotic, you should be writing your own parsing and not using <code>fscanf</code>. Nonetheless, I expect the answer is C 2011 5.2.4.1: \u201cThe implementation shall be able to translate and execute at least one program\u2026\u201d Your program is not that one."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1513112664, "post_id": 47781328, "comment_id": 82524377, "body": "I agree with your analysis of the standard.  It does not specify a bound on how large an <code>ncount</code> must be supported.  It does specify that the <code>ll</code> (and <code>z</code> and <code>t</code>) length specifiers can appear in an <code>n</code> directive, and of course you&#39;re right that that describes the size of the receiving variable, not the source count."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1513113086, "post_id": 47781328, "comment_id": 82524571, "body": "@EricPostpischil Use of <code>fscanf()</code> does not know prior to reading if the input is exotic.  The issue is not that the input is exotic, but that <code>&quot;%*s%n&quot;</code> is not resilient to exotic input.  For example, <code>&quot;%1000s%n&quot;</code> would work with exotic input - as long as <code>ncount</code> is at least 10 bit."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513113135, "post_id": 47781328, "comment_id": 82524594, "body": "This is exactly why I don&#39;t understand why the type expect by <code>%n</code> is not a <code>size_t</code>. I suppose legacy is the main reason."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1513113150, "post_id": 47781328, "comment_id": 82524600, "body": "The standard also specifies that the behavior is undefined (for all conversions) if the result of the conversion cannot be represented in the destination object.  Inasmuch as I don&#39;t see any other qualification on how large an <code>ncount</code> is accommodated, I&#39;m inclined to regard it as an implementation flaw if the reported count is bounded by limits smaller than the capacity of the destination object&#39;s type."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513181942, "post_id": 47781328, "comment_id": 82556168, "body": "@Stargateur Thanks for the edit that added a missing <code>include</code>.  Yet the cast of <code>long long</code> to <code>size_t</code> changed functionality with my 32-bit <code>size_t</code> as it truncated <code>4294967296</code>.  Code amended to not warn and work for sizes up to <code>LLONG_MAX</code>."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513182526, "post_id": 47781328, "comment_id": 82556568, "body": "@chux My bad, sorry. I didn&#39;t cast the good operand. I test with my 64 size_t ^^&#39;. (But that explain a little why in your system the result is -1, scanf must use a size_t type to hold count internally, that surprise me that your size_t is 32bit on a 64bit system. Windows != \u2665)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513182708, "post_id": 47781328, "comment_id": 82556696, "body": "@Stargateur What was your result with <code>testf(UINT_MAX + 1LL);</code>?  (Assuming <code>unsigned</code> is 32-bit)  BTW: I am now sure my compiler/library used a 32-bit <code>int</code> for <code>ncount</code>."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513183800, "post_id": 47781328, "comment_id": 82557484, "body": "@chux I get correct output (not -1 or garbage) with both codes (actuel code and my wrong edit) with my 64bit archlinux (<code>unsigned is 32bit</code>) <a href=\"https://pastebin.com/3Py5w5cr\" rel=\"nofollow noreferrer\">pastebin.com/3Py5w5cr</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513184340, "post_id": 47781328, "comment_id": 82557857, "body": "@Stargateur Thanx.  To a &quot;quality of implementation&quot;, your library is better than mine.  OTOH, it might be impractical for your platform to test its limit.  I&#39;ll assume it is good for at least about <code>INT64_MAX</code> - which should handle extreme code for perhaps 30-40 years given <a href=\"https://en.wikipedia.org/wiki/Moore%27s_law\" rel=\"nofollow noreferrer\">Moore&#39;s law</a>. ;-)"}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 5, "last_activity_date": 1513113770, "creation_date": 1513113770, "answer_id": 47781762, "question_id": 47781328, "link": "https://stackoverflow.com/questions/47781328/what-is-the-range-of-the-number-of-characters-read-in-fscanf/47781762#47781762", "title": "What is the range of the &quot;number of characters read&quot; in fscanf?", "body": "<blockquote>\n  <p>What is type or the minimal expected range of ncount?</p>\n</blockquote>\n\n<p>The standard does not specify any specific minimum.  It flatly says</p>\n\n<blockquote>\n  <p>The corresponding argument shall be a pointer to signed integer into which is to be written the number of characters read from the input stream so far by this call to the fscanf function.</p>\n</blockquote>\n\n<p>(<a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.21.6.2p12\" rel=\"noreferrer\">C2011, 7.21.6.2/12</a>)</p>\n\n<p>This leaves no room for a conforming implementation to store a different number in the destination variable, except inasmuch as the standard specifies for <em>all</em> conversions, including <code>%n</code>, that</p>\n\n<blockquote>\n  <p>if the result of the conversion cannot be represented in the [destination] object, the behavior is undefined.</p>\n</blockquote>\n\n<p>(<a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.21.6.2p10\" rel=\"noreferrer\">C2011 7.21.6.2/10</a>)</p>\n\n<blockquote>\n  <p>What happens, or should happen, when \"the number of characters read from the input stream\" is large? </p>\n</blockquote>\n\n<p>If the pointer corresponding to the <code>%n</code> directive is correctly typed for the directive's length specifier (or lack thereof), and if the true count of characters read up to that point by that <code>scanf()</code> call can be represented in an object of that type, then the true count should in fact be stored.  Otherwise, the behavior is undefined.</p>\n"}], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 47781762, "answer_count": 1, "score": 8, "last_activity_date": 1513181259, "creation_date": 1513111887, "last_edit_date": 1513181259, "question_id": 47781328, "link": "https://stackoverflow.com/questions/47781328/what-is-the-range-of-the-number-of-characters-read-in-fscanf", "title": "What is the range of the &quot;number of characters read&quot; in fscanf?", "body": "<p><code>fscanf()</code> specifies the <code>\"%n\"</code> directive as a means to write \"the number of characters read from the input stream so far by this call to the <code>fscanf</code> function\" C11dr \u00a77.21.6.2 12.  </p>\n\n<p>Let us call this number: <code>ncount</code>.</p>\n\n<hr>\n\n<p>The <code>\"%n\"</code> directive may be preceded by length modifiers <code>hh, h, l, ll, j</code> and others.  Examples:</p>\n\n<pre><code>FILE *stream = stdin;\nint n_i;\nfscanf(stream, \"%*s%n\", &amp;n_i);    // save as int\nsigned char n_hh;\nfscanf(stream, \"%*s%hhn\", &amp;n_hh); // save as signed char\nlong long n_ll;\nfscanf(stream, \"%*s%lln\", &amp;n_ll); // save as long long\n</code></pre>\n\n<blockquote>\n  <p>What is type or the minimal expected range of <code>ncount</code>?<br>\n  What happens, or should happen, when \"the number of characters read from the input stream\" is <em>large</em>?   </p>\n</blockquote>\n\n<p>My findings:<br>\nThe C spec appears quiet on the definition of the minimal range/type of <code>ncount</code>.  <code>ncount</code> is usually saved via <code>\"%n\"</code> which specifies an <code>int</code> <em>destination</em> though not an <code>int</code> <em>source</em>.   </p>\n\n<p>By experimentation, <code>ncount</code> appears to be treated like an <code>int</code> or <code>long</code> on my platform - no real surprise there.  (My <code>int/long/long long</code> are 4/4/8 bytes.) When saving <code>ncount</code> to a <code>long long</code>, the value saved does not exceed <code>INT_MAX/LONG_MAX</code>.  <code>ncount</code> could have been <code>unsigned</code> for twice the usable range when assigned to <code>long long</code>, yet, this is an extreme corner and perhaps not considered by implementors.</p>\n\n<p>My tests below showed no extended range of <code>ncount</code> past an <code>int</code> range, even when saved as a <code>long long</code>.</p>\n\n<p>My interest stemmed from using <code>\"%*[^\\n]%lln\"</code> to determine a (extreme) line length.</p>\n\n<hr>\n\n<p>Implementation notes:</p>\n\n<p>GNU C11 (GCC) version 6.4.0 (i686-pc-cygwin) compiled by GNU C version 6.4.0, GMP version 6.1.2, MPFR version 3.1.5-p10, MPC version 1.0.3, isl version 0.14 or 0.13</p>\n\n<p>glibc 2.26 released.</p>\n\n<p>Intel Xeon W3530, 64-bit OS (Windows 7)</p>\n\n<hr>\n\n<p>Test code</p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint print(FILE *stream, long long size, int ch) {\n  char buf[4096];\n  memset(buf, ch, sizeof buf);\n  while (size &gt; 0) {\n    size_t len = size &lt; (long long) sizeof buf ? (size_t) size : sizeof buf;\n    size_t y = fwrite(buf, 1, len, stream);\n    if (len != y) {\n      perror(\"printf\");\n      return 1;\n    }\n    size -= len;\n  }\n  return 0;\n}\n\nint scan(FILE *stream) {\n  rewind(stream);\n  long long n = -42;\n  int cnt = fscanf(stream, \"%*s%lln\", &amp;n);\n  printf(\"cnt:%d n:%lld \", cnt, n);\n  return cnt != 0;\n}\n\nint testf(long long n) {\n  printf(\"%10lld \", n);\n  FILE *f = fopen(\"x.txt\", \"w+b\");\n  if (f == NULL) {\n    perror(\"fopen\");\n    return 1;\n  }\n  if (print(f, n, 'x')) {\n    perror(\"print\");\n    fclose(f);\n    return 2;\n  }\n  if (scan(f)) {\n    perror(\"scan\");\n    fclose(f);\n    return 3;\n  }\n  fclose(f);\n  puts(\"OK\");\n  fflush(stdout);\n  return 0;\n}\n\nint main(void) {\n  printf(\"%d %ld %lld\\n\", INT_MAX, LONG_MAX, LLONG_MAX);\n  testf(1000);\n  testf(1000000);\n  testf(INT_MAX);\n  testf(INT_MAX + 1LL);\n  testf(UINT_MAX);\n  testf(UINT_MAX + 1LL);\n  testf(1);\n  return 0;\n}\n</code></pre>\n\n<p>Test output</p>\n\n<pre><code>2147483647 2147483647 9223372036854775807\n\nFile length      Reported bytes read\n      1000 cnt:0 n:1000 OK\n   1000000 cnt:0 n:1000000 OK\n2147483647 cnt:0 n:2147483647 OK\n2147483648 cnt:0 n:-2147483648 OK  // implies ncount is internally an `int/long`\n4294967295 cnt:0 n:-1 OK\n4294967296 cnt:0 n:-1088421888 OK  // This `n` value may not be consistent. -1 also seen\n         1 cnt:0 n:1 OK\n</code></pre>\n\n<p>[Edit]</p>\n\n<p>With some runs of <code>testf(UINT_MAX + 1LL);</code>, I received other inconsistent results like '4294967296 cnt:0 n:1239482368 OK'.  Hmmmm.</p>\n\n<p>Sample <code>fscanf()</code> <a href=\"http://web.mit.edu/freebsd/head/lib/libc/stdio/vfscanf.c\" rel=\"nofollow noreferrer\">support source code</a> uses an <code>int</code> for <code>ncount</code>.</p>\n"}, {"tags": ["c", "arduino"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1513113175, "post_id": 47781327, "comment_id": 82524606, "body": "how exactly should your result string (frame) look?"}, {"owner": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 0, "creation_date": 1513117526, "post_id": 47781327, "comment_id": 82526374, "body": "Why not send them as separate arguments?"}], "answers": [{"tags": [], "owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "is_accepted": true, "score": 0, "last_activity_date": 1513113047, "creation_date": 1513113047, "answer_id": 47781592, "question_id": 47781327, "link": "https://stackoverflow.com/questions/47781327/arduino-w5500-ethernet-get-frame/47781592#47781592", "title": "Arduino W5500 Ethernet GET frame", "body": "<p>The command you are looking for is <code>sprintf</code></p>\n\n<p><code>sprintf (str, \"%d_%d\", temp, humid);</code></p>\n"}], "owner": {"reputation": 63, "user_id": 8536457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fcbb3a3363416899d689f61619ceb2a5?s=128&d=identicon&r=PG&f=1", "display_name": "user46510", "link": "https://stackoverflow.com/users/8536457/user46510"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 47781592, "answer_count": 1, "score": -3, "last_activity_date": 1513113047, "creation_date": 1513111885, "question_id": 47781327, "link": "https://stackoverflow.com/questions/47781327/arduino-w5500-ethernet-get-frame", "title": "Arduino W5500 Ethernet GET frame", "body": "<p>I am working on a project to send the values \u200b\u200bof a temperature and humidity sensor to a server via a GET.</p>\n\n<p>The line in the library of W5500 is:\nclient.println (\"GET / search? q = arduino HTTP / 1.1\");</p>\n\n<p>So I change the / search? Q = arduino by the frame I have to send on my database.</p>\n\n<p>The problem is that I can not create my frame. In this frame I have two values \u200b\u200buint16_t (Temperature and humidity) and I need to separate them by a \"_\" to differentiate and parse the frame in my php.</p>\n\n<p>But that's how to change the \"GET / search? Q = arduino HTTP / 1.1\" by a variable, and how to build a frame with integers and a \"_\"?!</p>\n\n<p>I have already try strcpy, but strcpy work only with a char or string. </p>\n"}, {"tags": ["c", "post-increment"], "comments": [{"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 6, "creation_date": 1513109845, "post_id": 47780816, "comment_id": 82523031, "body": "Because <a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Short-circuit_evaluation</a>"}, {"owner": {"reputation": 199, "user_id": 6749197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c9b5634e9bde131e3f0e6de6cac5a65?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Gusai", "link": "https://stackoverflow.com/users/6749197/rahul-gusai"}, "reply_to_user": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1513110044, "post_id": 47780816, "comment_id": 82523115, "body": "According to me, the expression inside if should get value as zero making it false and j should be incremented after that. Correct me if I am wrong ?"}, {"owner": {"reputation": 954, "user_id": 1935009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/LmCmh.png?s=128&g=1", "display_name": "Yashas", "link": "https://stackoverflow.com/users/1935009/yashas"}, "edited": false, "score": 0, "creation_date": 1513110095, "post_id": 47780816, "comment_id": 82523132, "body": "This question has set off an answer race."}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1513110111, "post_id": 47780816, "comment_id": 82523137, "body": "@RahulGusai did you read the link?"}, {"owner": {"reputation": 199, "user_id": 6749197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c9b5634e9bde131e3f0e6de6cac5a65?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Gusai", "link": "https://stackoverflow.com/users/6749197/rahul-gusai"}, "reply_to_user": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1513111264, "post_id": 47780816, "comment_id": 82523707, "body": "@Ivan Yes, I did.So basically here precedence doesn&#39;t matter cause the first expression(left one) will be evaluated first."}], "answers": [{"tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 8, "last_activity_date": 1513109943, "last_edit_date": 1513109943, "creation_date": 1513109850, "answer_id": 47780864, "question_id": 47780816, "link": "https://stackoverflow.com/questions/47780816/post-increment-in-c/47780864#47780864", "title": "Post increment in c", "body": "<p>Since <code>i</code> is zero the second half of the <code>if</code> doesn't need to be evaluated so <code>j++</code> never occurs.</p>\n"}, {"comments": [{"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 3, "creation_date": 1513109898, "post_id": 47780867, "comment_id": 82523053, "body": "<code>j</code> doesn&#39;t get incremented at all."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1513109957, "post_id": 47780867, "comment_id": 82523077, "body": "@Ivan Good catch. Updated accordingly."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 954, "user_id": 1935009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/LmCmh.png?s=128&g=1", "display_name": "Yashas", "link": "https://stackoverflow.com/users/1935009/yashas"}, "edited": false, "score": 0, "creation_date": 1513110125, "post_id": 47780867, "comment_id": 82523140, "body": "@Yashas Rephrased and used a long-form version of code to better explain."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1513110293, "post_id": 47780867, "comment_id": 82523213, "body": "Not only does <code>j</code> not get incremented, <i>it doesn&#39;t even get checked</i>, contrary to your first paragraph."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1513110433, "post_id": 47780867, "comment_id": 82523283, "body": "@JohnBollinger I&#39;m tossing a bunch of verbiage here that wasn&#39;t quite clear enough."}, {"owner": {"reputation": 199, "user_id": 6749197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c9b5634e9bde131e3f0e6de6cac5a65?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Gusai", "link": "https://stackoverflow.com/users/6749197/rahul-gusai"}, "reply_to_user": {"reputation": 954, "user_id": 1935009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/LmCmh.png?s=128&g=1", "display_name": "Yashas", "link": "https://stackoverflow.com/users/1935009/yashas"}, "edited": false, "score": 0, "creation_date": 1513110809, "post_id": 47780867, "comment_id": 82523480, "body": "@Yashas So the precedence rule doesn&#39;t apply here according to which inside the parenthesis, right side of the &amp;&amp; should be evaluated first ?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 199, "user_id": 6749197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c9b5634e9bde131e3f0e6de6cac5a65?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Gusai", "link": "https://stackoverflow.com/users/6749197/rahul-gusai"}, "edited": false, "score": 0, "creation_date": 1513110852, "post_id": 47780867, "comment_id": 82523504, "body": "@RahulGusai It&#39;s left to right in most cases according to the usual <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precedence</a> rules."}, {"owner": {"reputation": 199, "user_id": 6749197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c9b5634e9bde131e3f0e6de6cac5a65?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Gusai", "link": "https://stackoverflow.com/users/6749197/rahul-gusai"}, "reply_to_user": {"reputation": 954, "user_id": 1935009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/LmCmh.png?s=128&g=1", "display_name": "Yashas", "link": "https://stackoverflow.com/users/1935009/yashas"}, "edited": false, "score": 0, "creation_date": 1513110954, "post_id": 47780867, "comment_id": 82523553, "body": "@Yashas No but precedence of postfix operator is higher than &amp;&amp;, right ?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 199, "user_id": 6749197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c9b5634e9bde131e3f0e6de6cac5a65?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Gusai", "link": "https://stackoverflow.com/users/6749197/rahul-gusai"}, "edited": false, "score": 0, "creation_date": 1513111190, "post_id": 47780867, "comment_id": 82523669, "body": "@RahulGusai Atomic operators like <code>++</code> and <code>!</code> usually are. Binary operators like <code>&amp;&amp;</code> are not obligated to execute on both sides, things like <code>j++</code> or function calls can be skipped. Postfix <code>++</code> is actually the highest precedence."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1513111310, "post_id": 47780867, "comment_id": 82523733, "body": "Post-increment changes the value of the operand before the next sequence point, not after the statement is executed."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 199, "user_id": 6749197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c9b5634e9bde131e3f0e6de6cac5a65?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Gusai", "link": "https://stackoverflow.com/users/6749197/rahul-gusai"}, "edited": false, "score": 1, "creation_date": 1513111746, "post_id": 47780867, "comment_id": 82523937, "body": "@RahulGusai: Precedence determines how the parts of an expression are grouped. It does not determine execution order. For many operators, like <code>+</code> and <code>*</code>, the compiler may evaluate either side first and may even do parts of one, then parts of the other, and so on. For <code>&amp;&amp;</code>, the compiler is required to evaluate the left side first (or at least not to let the right side have any final effect until the left side is done) and is required not to evaluate the right side if the left side is false. C has rules about sequence points that affect execution order."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1513110332, "last_edit_date": 1513110332, "creation_date": 1513109861, "answer_id": 47780867, "question_id": 47780816, "link": "https://stackoverflow.com/questions/47780816/post-increment-in-c/47780867#47780867", "title": "Post increment in c", "body": "<p>A <em>post</em>-increment, not surprisingly, will only happen <em>after</em> the statement and it will only happen <em>if</em> that part of the expression was evaluated.</p>\n\n<p>Don't forget that conditions on the right side of <code>&amp;&amp;</code> are only evaluated if the left side passes. The <code>j++</code> part of that statement never gets evaluated because <code>i</code> is <code>0</code>.</p>\n\n<p>What your code translates to is roughly:</p>\n\n<pre><code>if (i) { // Always 0, so the inner block is skipped.\n  if (j) {\n    j = j + 1;\n    // ...\n  }\n  else {\n    j = j + 1;\n  }\n}\n</code></pre>\n\n<p>If these sorts of operations are confusing, it's alright to steer away from them entirely. Even experienced programmers can get tripped up on them. When you presume too much and write code like <code>j + j++</code> you're going to end up in trouble.</p>\n"}, {"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 1, "last_activity_date": 1513110046, "creation_date": 1513110046, "answer_id": 47780901, "question_id": 47780816, "link": "https://stackoverflow.com/questions/47780816/post-increment-in-c/47780901#47780901", "title": "Post increment in c", "body": "<p>In the statement:</p>\n\n<pre><code>if(i&amp;&amp;j++)  \n</code></pre>\n\n<p>i has the value 0 so even if the j were pre-incremented it would not be evaluated. The &amp;&amp; and || operators short-circuit , that is they quit as soon as an answer is known,. I the case of &amp;&amp; that is the left side evaluating to zero, in the case of || it is the left side evaluating to non-zero.</p>\n"}, {"tags": [], "owner": {"reputation": 954, "user_id": 1935009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/LmCmh.png?s=128&g=1", "display_name": "Yashas", "link": "https://stackoverflow.com/users/1935009/yashas"}, "is_accepted": false, "score": 0, "last_activity_date": 1513110503, "last_edit_date": 1513110503, "creation_date": 1513110197, "answer_id": 47780935, "question_id": 47780816, "link": "https://stackoverflow.com/questions/47780816/post-increment-in-c/47780935#47780935", "title": "Post increment in c", "body": "<p>Expressions involving the logical AND operator can be rewritten as follows:</p>\n\n<pre><code>if(expr1 &amp;&amp; expr2 &amp;&amp; expr3 ...)\n</code></pre>\n\n<p>is functionally equivalent to</p>\n\n<pre><code>if(expr1)\n    if(expr2)\n        if(expr3)\n        .\n        .\n        .\n</code></pre>\n\n<p>If <code>expr1</code> fails, the remaining won't be evaluated.</p>\n\n<p>If <code>expr1</code> succeeds, <code>expr2</code> will be evaluated and if <code>expr2</code> fails, <code>expr3</code> won't be evaluated.</p>\n\n<p>In your case <code>i</code> is zero, hence <code>j++</code> won't be evaluated.</p>\n\n<hr>\n\n<p>Excerpt from <em>Section 6.5.13</em> C99 specifications</p>\n\n<blockquote>\n  <p>Unlike the bitwise binary &amp; operator, the &amp;&amp; operator guarantees left-to-right evaluation; there is a sequence point after\n  the evaluation of the first operand. If the first operand compares\n  equal to 0, the second operand is not evaluated.</p>\n</blockquote>\n"}], "owner": {"reputation": 199, "user_id": 6749197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c9b5634e9bde131e3f0e6de6cac5a65?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Gusai", "link": "https://stackoverflow.com/users/6749197/rahul-gusai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "closed_date": 1513113340, "answer_count": 4, "score": -2, "last_activity_date": 1513113479, "creation_date": 1513109673, "question_id": 47780816, "link": "https://stackoverflow.com/questions/47780816/post-increment-in-c", "closed_reason": "Duplicate", "title": "Post increment in c", "body": "<p>I am getting output as 0..0 in the below given program.Why does j doesn't get incremented while if condition is being checked?</p>\n\n<pre><code>int main(int argc, char const *argv[])\n{\n    int i=0,j=0;\n\n    if(i&amp;&amp;j++)  \n        printf(\"%d..%d\",i++,j);\n    printf(\"%d..%d\",i,j);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "tcl"], "answers": [{"tags": [], "owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "is_accepted": true, "score": 1, "last_activity_date": 1513111642, "creation_date": 1513111642, "answer_id": 47781273, "question_id": 47780726, "link": "https://stackoverflow.com/questions/47780726/using-c-and-tcl-error-when-getting-data-from-file-with-tcl-getvar2/47781273#47781273", "title": "using c and tcl , error when getting data from file with Tcl_GetVar2", "body": "<p>While the <code>Tcl_GetVar2</code> API function <em>does</em> return a <code>char *</code>, you need to remember that Tcl retains ownership of that pointer: it can and will deallocate it at a time of its choosing, possibly on the next API call you make. Also, you really ought to treat it as <code>const char *</code>; don't modify that string either (there are some historical reasons for us not making that <code>const</code>). If you want to keep it around, you need to copy it immediately and that will entail some work with buffer management, with there being many ways to achieve it.</p>\n\n<p>Or alternatively you might be able to use <code>Tcl_GetVar2Ex</code>, which returns a <code>Tcl_Obj *</code>, a Tcl native value reference. With those, you <em>can</em> keep them around (as long as you remember to <code>Tcl_IncrRefCount</code> them when you do so and <code>Tcl_DecrRefCount</code> them once you no longer need it) and you can then get the <code>char *</code> (though still not something you should modify) from that value reference at any time using <code>Tcl_GetString</code> or <code>Tcl_GetStringFromObj</code> (the latter also reports the number of bytes in the string).</p>\n\n<hr>\n\n<p>If you are really interested in parsing the value to mean some sort of string chosen from a small set \u2014 the sort of thing I'd expect when parsing an \u201corientation\u201d attribute of some kind \u2014 I strongly suggest looking at <code>Tcl_GetIndexFromObj</code>. That's explicitly designed for that sort of task, handling a great many aspects for you that are normally an annoying amount of fiddly work to get right for yourself.</p>\n"}], "owner": {"reputation": 31, "user_id": 9067290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05f611b4cde1b776d244485f3da63e9a?s=128&d=identicon&r=PG&f=1", "display_name": "Serge Conrad", "link": "https://stackoverflow.com/users/9067290/serge-conrad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 47781273, "answer_count": 1, "score": 1, "last_activity_date": 1513111707, "creation_date": 1513109267, "last_edit_date": 1513111707, "question_id": 47780726, "link": "https://stackoverflow.com/questions/47780726/using-c-and-tcl-error-when-getting-data-from-file-with-tcl-getvar2", "title": "using c and tcl , error when getting data from file with Tcl_GetVar2", "body": "<p>what is the best way of using Tcl_GetVar2 in c ?</p>\n\n<pre><code> axes   = (Axes*)   malloc(sizeof(Axes));\n  axes-&gt;Xorientation = Tcl_GetVar2(interp, \"axes\", \"XOrientation\", TCL_GLOBAL_ONLY);\n</code></pre>\n\n<p>with axes as the structure</p>\n\n<pre><code>typedef struct {\n    double XvaleurMin;\n    double XvaleurMax;\n    double XRatio;\n    char *Xorientation;\n    double YvaleurMin;\n    double YvaleurMax;\n    double YRatio;\n    char *Yorientation;\n  } Axes;\n</code></pre>\n\n<p>This is example is getting errors in execution when parsing a data file with missings data.</p>\n\n<p>for example Segmentation fault when doing</p>\n\n<pre><code>printf(\"axes-&gt;Yorientation %s\\n\",axes-&gt;Yorientation );\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1513109150, "post_id": 47780656, "comment_id": 82522678, "body": "The word you are looking for is <code>malloc</code>."}, {"owner": {"reputation": 13, "user_id": 8983107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0358dd33684a90c8bad1b86c9f3d9bcd?s=128&d=identicon&r=PG&f=1", "display_name": "erans", "link": "https://stackoverflow.com/users/8983107/erans"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1513109265, "post_id": 47780656, "comment_id": 82522736, "body": "I did Puser=malloc(sizeof(AddInfo(input))); or i&#39;m not sure where you mean"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1513109272, "post_id": 47780656, "comment_id": 82522738, "body": "<code>struct Info</code> is not the same as <code>struct info</code>."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1513109364, "post_id": 47780656, "comment_id": 82522792, "body": "@erans: That is related to <code>user1</code> how?"}, {"owner": {"reputation": 13, "user_id": 8983107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0358dd33684a90c8bad1b86c9f3d9bcd?s=128&d=identicon&r=PG&f=1", "display_name": "erans", "link": "https://stackoverflow.com/users/8983107/erans"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1513109433, "post_id": 47780656, "comment_id": 82522825, "body": "@ScottHunter you mean i have to do user1=malloc(sizeof(struct)) in the beginning of the function?"}, {"owner": {"reputation": 13, "user_id": 8983107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0358dd33684a90c8bad1b86c9f3d9bcd?s=128&d=identicon&r=PG&f=1", "display_name": "erans", "link": "https://stackoverflow.com/users/8983107/erans"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1513109478, "post_id": 47780656, "comment_id": 82522849, "body": "@dbush thanks i didn&#39;t see that :O"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1513109663, "post_id": 47780656, "comment_id": 82522948, "body": "Note that <code>sizeof(AddInfo(input))</code> is equivalent to <code>sizeof(struct Info *)</code> (that is, evaluating <code>sizeof</code> does not involve calling the function), and that the size of a pointer is completely independent of the size of the thing to which it points."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8983107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0358dd33684a90c8bad1b86c9f3d9bcd?s=128&d=identicon&r=PG&f=1", "display_name": "erans", "link": "https://stackoverflow.com/users/8983107/erans"}, "edited": false, "score": 0, "creation_date": 1513112007, "post_id": 47780848, "comment_id": 82524066, "body": "I understood what you wrote before the code. but i can&#39;t understand the code itself. I see another function of Adduser that initialize the name. anywhere i can read on pointers and local variables in functions ? Thanks for you help"}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 1, "last_activity_date": 1513113910, "last_edit_date": 1513113910, "creation_date": 1513109788, "answer_id": 47780848, "question_id": 47780656, "link": "https://stackoverflow.com/questions/47780656/c-pointer-to-a-structure-element/47780848#47780848", "title": "C: Pointer to a structure element", "body": "<p>Your function AddUser assigns all the data to a function-local variable then returns a pointer to that data, but as soon as the function returns that local is no longer valid, you need to allocate the new Info in AddUser rather than main and assign the data to that allocated instance and return that pointer.</p>\n\n<pre><code>typedef struct Info {\n    char * name;\n    ...\n} Info;\n\nInfo * AddUser(char const * name);\n\nint main()\n{\n    Info * pNewUser = AddUser(\"Bob\");\n    ...\n    free(pNewUser);\n    return 0;\n\n}\n\nInfo AddUser(char const * name)\n{\n    if(!name || !*name)\n        return NULL;\n\n    Info * pNew = malloc(sizeof(Info));\n    if(!pNew)\n        return NULL;\n\n    size_t len = strlen(name);\n    pNew-&gt;name = malloc(len+1);\n    if(!pNew-&gt;name)\n    {\n        free(pNew);\n        return NULL;\n    }\n\n    strcpy(pNew-&gt;name, name);\n    return pNew;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8983107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0358dd33684a90c8bad1b86c9f3d9bcd?s=128&d=identicon&r=PG&f=1", "display_name": "erans", "link": "https://stackoverflow.com/users/8983107/erans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 440, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1513113910, "creation_date": 1513108964, "last_edit_date": 1513109145, "question_id": 47780656, "link": "https://stackoverflow.com/questions/47780656/c-pointer-to-a-structure-element", "title": "C: Pointer to a structure element", "body": "<p>I tried to read on it from past questions and watch youtube videos but i don't get it.</p>\n\n<p>I have a program with struct called info. I created a function that adds element of the structure and return a pointer to it.\nthen i want to use the element fields through the pointer.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;getopt.h&gt;\n#include &lt;unistd.h&gt;\n\nstruct Info {\n    char* name;\n    char type;\n    char* path;\n};\n\nstruct Info* AddInfo(char* input);\nint main(void) {\n\n    char input[128];\n\n    fgets(input, sizeof(input), stdin);\n\n    struct info *Puser;\n    Puser=malloc(sizeof(AddInfo(input)));\n    &amp;Puser=AddInfo(input);\n    //here is my problem. \n    return 0;\n}\n\nstruct Info *AddInfo( char* input) {\n    struct Info user1;\n    struct info* Puser=0;\n    char *s;\n\n    //assign to name\n    for (int i = strlen(input) - 1; i &gt;= 0; i--) {\n        if (input[i] == '/') {\n\n            s = malloc(sizeof(input));\n            strncpy(s, input + i + 1, i);\n\n            user1.name = malloc(sizeof(s));\n            if (user1.name == NULL) {\n                fprintf(stderr, \"%s\\n\", \"Error in malloc\");\n            }\n\n            strcpy(user1.name, s);\n            user1.name[i] = '\\0';\n            free(s);\n            break;\n        }\n    }\n    //assign to type\n    if ((user1.type = malloc(sizeof(user1.type)) == NULL)) {\n        fprintf(stderr, \"%s\\n\", \"Error in malloc\");\n    }\n    if (input[strlen(input) - 1] == '/') {\n        user1.type = 'd';\n    } else {\n        user1.type = 'f';\n    }\n    //assign to path\n    user1.path = malloc(sizeof(input));\n\n    if (user1.path == NULL) {\n        fprintf(stderr, \"%s\\n\", \"Error in malloc\");\n    }\n    strcpy(user1.path, input);\n\n    // printf(\"%s \\n\", user1.path);\n    // printf(\"%s\\n\", user1.name);\n    // free(user1.name);\n\n    Puser= &amp;user1;\n\n    return Puser;\n}\n</code></pre>\n\n<p>How should i do that correctly ? how can i take user1 and access it through pointer outside the function ? </p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "arrays", "algorithm", "duplicates"], "comments": [{"owner": {"reputation": 954, "user_id": 1935009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/LmCmh.png?s=128&g=1", "display_name": "Yashas", "link": "https://stackoverflow.com/users/1935009/yashas"}, "edited": false, "score": 0, "creation_date": 1513108930, "post_id": 47780576, "comment_id": 82522557, "body": "You don&#39;t have to sort to do that. Go through each number and check if appeared before, if it did not, print it otherwise ignore and move on to the next number."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1513108948, "post_id": 47780576, "comment_id": 82522572, "body": "@Abdulrhman A. Al-mulhim  You may not change the value of the integer constant BUBBLE --;"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1513110663, "last_edit_date": 1513110663, "creation_date": 1513109546, "answer_id": 47780780, "question_id": 47780576, "link": "https://stackoverflow.com/questions/47780576/remove-duplicate-number-in-array-in-c/47780780#47780780", "title": "remove duplicate number in array in c", "body": "<p>You may not change integer constants. At the compile-time this code snippet</p>\n\n<pre><code> for (a = 0; i &lt; BUBBLE; a++) {\n          for (b = a + 1; j &lt; BUBBLE;) {\n             if (myArray[i] == myArray[i]) {\n                for (k = b; k &lt; BUBBLE; k++) {\n                    myArray[k] =  myArray[k + 1];\n                }\n                BUBBLE --;\n             } else\n                b++;\n          }\n       }\n</code></pre>\n\n<p>actually looks like</p>\n\n<pre><code> for (a = 0; i &lt; 5; a++) {\n          for (b = a + 1; j &lt; 5;) {\n             if (myArray[i] == myArray[i]) {\n                for (k = b; k &lt; 5; k++) {\n                    myArray[k] =  myArray[k + 1];\n                }\n                5--;\n                ^^^\n             } else\n                b++;\n          }\n       }\n</code></pre>\n\n<p>That is the compiler substitutes the name <code>BUBBLE</code> for the integer constant <code>5</code>.</p>\n\n<p>Moreover it is unclear where for example the variables <code>i</code> and <code>j</code> are initialized. And this condition in the if statement</p>\n\n<pre><code>if (myArray[i] == myArray[i]) {\n           ^^^           ^^^\n</code></pre>\n\n<p>does not make sense.</p>\n\n<p>You should declare a variable that will keep the actual number of elements in the array during deleting duplicates because you can not change the size of an already initialized array.</p>\n\n<p>\"Removing\" duplicates can look as it is shown in the demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define BUBBLE  5\n\nint main(void) \n{\n    int a[BUBBLE] = { 1, 2, 1, 3, 2 };\n\n    for ( size_t i = 0; i &lt; BUBBLE; i++ ) printf( \"%d \", a[i] );\n    putchar( '\\n' );\n\n    size_t n = 0;\n\n    for ( size_t i = 0; i &lt; BUBBLE; i++ )\n    {\n        size_t j = 0;\n\n        while ( j &lt; i &amp;&amp; a[j] != a[i] ) ++j;\n\n        if ( j == i )\n        {\n            if ( n != i ) a[n] = a[i];\n            ++n;\n        }\n    }\n\n    for ( size_t i = 0; i &lt; n; i++ ) printf( \"%d \", a[i] );\n    putchar( '\\n' );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>1 2 1 3 2 \n1 2 3 \n</code></pre>\n\n<p>The variable <code>n</code> keeps the actual number of elements of the array after removing duplicates.</p>\n"}], "owner": {"reputation": 27, "user_id": 6287421, "user_type": "registered", "profile_image": "https://graph.facebook.com/1127747983914112/picture?type=large", "display_name": "Abdulrhman A. Al-mulhim", "link": "https://stackoverflow.com/users/6287421/abdulrhman-a-al-mulhim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1513110780, "creation_date": 1513108603, "last_edit_date": 1513110780, "question_id": 47780576, "link": "https://stackoverflow.com/questions/47780576/remove-duplicate-number-in-array-in-c", "title": "remove duplicate number in array in c", "body": "<p><strong>I want my output print the array without any duplicate number</strong>     </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;time.h&gt;\n\n    #define BUBBLE 5\n    int main()\n    {\n        int myArray[BUBBLE];\n        int i, j ,a , b, k;\n        int temp = 0;\n        int num;\n        int cunt, size;\n        cunt=0;\n        float floatType;\n        int integerType;\n\n\n\n    srand(time(NULL));\n</code></pre>\n\n<blockquote>\n  <p>make the array randomlly</p>\n</blockquote>\n\n<pre><code>    //Fill Array Randomlly\n    for (i = 0; i &lt; BUBBLE; i ++)\n    {    \n           num = rand() % BUBBLE + 1;\n           myArray[i] = num;\n    }\n</code></pre>\n\n<blockquote>\n  <p>here my problem is not working\n  <em>in the program tell me</em><br>\n   <strong>Error value required as decrement operand</strong> </p>\n</blockquote>\n\n<pre><code> for (a = 0; i &lt; BUBBLE; a++) {\n          for (b = a + 1; j &lt; BUBBLE;) {\n             if (myArray[i] == myArray[i]) {\n                for (k = b; k &lt; BUBBLE; k++) {\n                    myArray[k] =  myArray[k + 1];\n                }\n                BUBBLE --;\n             } else\n                b++;\n          }\n       }\n</code></pre>\n\n<blockquote>\n  <p>Sort Array With Bobble Algorhim</p>\n  \n  <p>here my sort</p>\n</blockquote>\n\n<p>for(i = 0; i &lt; BUBBLE; i++)\n    {</p>\n\n<pre><code>    for (j = 0; j &lt; BUBBLE-1; j++)\n    {\n        if (myArray[j] &gt; myArray[j+1])\n        {\n            temp = myArray[j];\n            myArray[j] = myArray[j+1];\n            myArray[j+1] = temp;\n\n            cunt++;\n            }\n        }/*End inner for loop*/\n    }/*End outer for loop*/\n</code></pre>\n\n<blockquote>\n  <p>the output</p>\n</blockquote>\n\n<pre><code>    //Print Array After Sort\n    for (i = 0; i &lt; BUBBLE; i++)\n    {\n        printf(\"%d\\n\",myArray[i]);\n\n    }\n    // Count For How Many Swap\n         printf(\"the numbeer of pases is %d \\n\" ,cunt);\n          printf(\"Size of float: %ld bytes\\n\",sizeof(floatType));\n           printf(\"Size of int: %ld bytes\\n\",sizeof(integerType));\n    system(\"PAUSE\");    \n    return 0;\n}/*End of main*/\n</code></pre>\n"}, {"tags": ["c", "struct", "linked-list", "linux-kernel"], "comments": [{"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1513108242, "post_id": 47780477, "comment_id": 82522158, "body": "We&#39;ll need you to give a bit more of your code to help."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1513108674, "post_id": 47780477, "comment_id": 82522424, "body": "Did you include the <code>list.h</code> header?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1513109080, "post_id": 47780477, "comment_id": 82522642, "body": "The problem appears to be that no definition of <code>INIT_LIST_HEAD</code> is in scope at the point where you attempt to use it."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1513109458, "post_id": 47780477, "comment_id": 82522836, "body": "Dunno why you were downvoted.  HOWEVER, do not use Linux kernel headers except for kernel code.  They are not intended for supporting userspace programs."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1513109623, "post_id": 47780477, "comment_id": 82522935, "body": "&quot;sorry, I&#39;m not that familiar with C&quot;, so why do you try such strange thing, Kernel linux is not a library you can&#39;t use it like it was an library."}, {"owner": {"reputation": 1253, "user_id": 4733879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5iiSX.png?s=128&g=1", "display_name": "Filnor", "link": "https://stackoverflow.com/users/4733879/filnor"}, "edited": false, "score": 4, "creation_date": 1534313391, "post_id": 47780477, "comment_id": 90659823, "body": "Please do not vandalize your posts. If you believe your question is not useful or is no longer useful, it should be <i>deleted</i> instead of editing out all of the data that actually makes it a question. By posting on the Stack Exchange network, you&#39;ve granted a non-revocable right for SE to distribute that content (under the CC BY-SA 3.0 license). By SE policy, any vandalism will be reverted."}], "answers": [{"comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1513114495, "post_id": 47781583, "comment_id": 82525196, "body": "Actually, a macro can play one of different roles. <code>LIST_HEAD</code> is a <i>definition</i> macro - using it one may defines a variable of list type. <code>LIST_HEAD_INIT</code> is an <i>initialization</i> macro - it can be used as a right hand of variable&#39;s initialization statement. One may treat INIT_LIST_HEAD as <i>functional</i> macro - it performs some actions and doesn&#39;t return a value. So it can be used only as an executable code."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1513115037, "post_id": 47781583, "comment_id": 82525421, "body": "Exactly. The header you refer to defines a <i>functional</i> macro: it performs some actions, and doesn&#39;t return a value. Construction <code>do { ... } while(0)</code> is a commonly used for define such type of macros in Linux kernel. Note that <code>LIST_HEAD_INIT</code> macro definition uses <code>{a, b}</code> construction, which can be assigned to a structure variable with fields of appropriate type."}], "tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": false, "score": 0, "last_activity_date": 1513113016, "creation_date": 1513113016, "answer_id": 47781583, "question_id": 47780477, "link": "https://stackoverflow.com/questions/47780477/how-to-declare-a-struct-variable-with-a-linked-list-in-it/47781583#47781583", "title": "How to declare a struct variable with a linked list in it?", "body": "<p>As noted in the comments, at <em>global scope</em> (that is, outside of any function's body) executable code is fobidden; only declarations and definitions may be used here.</p>\n\n<p>For define <code>firstNode</code> global variable and <em>initialize</em> list in it use <code>LIST_HEAD_INIT</code> macro:</p>\n\n<pre><code>#include \"test.h\"\nstruct myNode firstNode =\n{\n    .list = LIST_HEAD_INIT(list);\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8606983"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 336, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1534313330, "creation_date": 1513108202, "last_edit_date": 1534313330, "question_id": 47780477, "link": "https://stackoverflow.com/questions/47780477/how-to-declare-a-struct-variable-with-a-linked-list-in-it", "title": "How to declare a struct variable with a linked list in it?", "body": "<p>In my <code>.h</code> file, I have:</p>\n\n<pre><code>#include &lt;linux/list.h&gt;\nstruct myNode\n{\n    struct list_head list;\n    int myID;\n    int myBadge;\n};\nextern struct myNode firstNode;\n</code></pre>\n\n<p>For define <em>firstNode</em> variable in the <code>.c</code> file I have tried this:</p>\n\n<pre><code>#include \"test.h\"\nINIT_LIST_HEAD(&amp;firstNode.list);\n</code></pre>\n\n<p>but when I compile, I get the error:</p>\n\n<pre><code>expected declaration specifiers '...' before '&amp;' token INIT_LIST_HEAD(&amp;firstNode.list);\n</code></pre>\n\n<p>I'm not too familiar with what the error actually means (sorry, I'm not that familiar with C), so I'm not sure why/what this means.</p>\n"}, {"tags": ["c++", "c", "function-pointers", "typedef"], "comments": [{"owner": {"reputation": 954, "user_id": 1935009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/LmCmh.png?s=128&g=1", "display_name": "Yashas", "link": "https://stackoverflow.com/users/1935009/yashas"}, "edited": false, "score": 0, "creation_date": 1513107895, "post_id": 47780330, "comment_id": 82521971, "body": "It is a function pointer and has nothing to do with a DLL."}, {"owner": {"reputation": 7698, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 1, "creation_date": 1513107904, "post_id": 47780330, "comment_id": 82521979, "body": "<i>&quot;What does this line mean?&quot;</i> It&#39;s a function pointer type alias definition for functions with the signature <code>void fn (const char*);</code>"}, {"owner": {"reputation": 1637, "user_id": 8464442, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tcepL.jpg?s=128&g=1", "display_name": "AAEM", "link": "https://stackoverflow.com/users/8464442/aaem"}, "edited": false, "score": 0, "creation_date": 1523956520, "post_id": 47780330, "comment_id": 86763587, "body": "how can i modify the question to correct its bad effect on the site and modify the bad voting??"}], "answers": [{"comments": [{"owner": {"reputation": 1637, "user_id": 8464442, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tcepL.jpg?s=128&g=1", "display_name": "AAEM", "link": "https://stackoverflow.com/users/8464442/aaem"}, "edited": false, "score": 0, "creation_date": 1513108981, "post_id": 47780413, "comment_id": 82522594, "body": "It is now clear, thank you"}, {"owner": {"reputation": 954, "user_id": 1935009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/LmCmh.png?s=128&g=1", "display_name": "Yashas", "link": "https://stackoverflow.com/users/1935009/yashas"}, "reply_to_user": {"reputation": 1637, "user_id": 8464442, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tcepL.jpg?s=128&g=1", "display_name": "AAEM", "link": "https://stackoverflow.com/users/8464442/aaem"}, "edited": false, "score": 0, "creation_date": 1513109174, "post_id": 47780413, "comment_id": 82522689, "body": "@Ahmed <a href=\"http://c-faq.com/decl/spiral.anderson.html\" rel=\"nofollow noreferrer\">Spiral Rule</a> might be of interest to you."}], "tags": [], "owner": {"reputation": 954, "user_id": 1935009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/LmCmh.png?s=128&g=1", "display_name": "Yashas", "link": "https://stackoverflow.com/users/1935009/yashas"}, "is_accepted": false, "score": 3, "last_activity_date": 1513109160, "last_edit_date": 1592644375, "creation_date": 1513107943, "answer_id": 47780413, "question_id": 47780330, "link": "https://stackoverflow.com/questions/47780330/typedef-void-print-type-const-char/47780413#47780413", "title": "typedef void (*print_type) (const char*);", "body": "<h1>What is it?</h1>\n<p><code>typedef void (*print_type) (const char*);</code></p>\n<p>The typedef tells the compiler that the data type <code>print_type</code> is a pointer to a function which accepts <code>const char*</code> as an argument and does not return a value.</p>\n<p>... and it has nothing to do with a DLL</p>\n<hr />\n<h2>Function Pointers</h2>\n<p>We declare a function as follows:</p>\n<p><code>ret-type identifier(parameters)</code></p>\n<p><code>int f(double x)</code></p>\n<p>Given that for something declared as <code>int a</code>, the pointer to it is declared as <code>int *a</code> (adding a * after the data type), it is natural for someone to come up with a way to declare a function pointer as follows:</p>\n<p><code>int *f(double);</code></p>\n<p>There's a catch here. That is actually a declaration of a function which accepts a <code>double</code> as an argument and returns a <code>int*</code>.</p>\n<p>We need to explicitly tell the compiler that it is not a function returning a pointer; rather it is a pointer to a function. We do this by placing brackets (parenthesis has higher precedence) around <code>*f</code>.</p>\n<p><code>int (*f)(double);</code></p>\n<p>Let's take another example:</p>\n<p><code>int* myfunc(int a[], char b);</code></p>\n<p>To declare an array of function pointers which point to a function with the above signature, we write:</p>\n<p><code>int* (*ptr[])(int[], char);</code></p>\n<p>There is a trick known as <a href=\"http://c-faq.com/decl/spiral.anderson.html\" rel=\"nofollow noreferrer\">Spiral Rule</a> which is quite useful in finding out what a complicated data type is.</p>\n<hr />\n<h2>Using typedef</h2>\n<p>Things can get pretty complicated with function pointers. To keep the code readable and neat, we prefer giving a single symbol type name to function pointer types using typedef.</p>\n<p><code>typedef int (*ptrFunc_t)(int, char);</code></p>\n<p>This allows you to declare a pointer to a function which accepts an <code>int</code> and a <code>char</code> as arguments and returns an <code>int</code> as follows:\n<code>ptrFunc_t myptr;</code></p>\n"}, {"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 1, "last_activity_date": 1513108080, "creation_date": 1513108080, "answer_id": 47780445, "question_id": 47780330, "link": "https://stackoverflow.com/questions/47780330/typedef-void-print-type-const-char/47780445#47780445", "title": "typedef void (*print_type) (const char*);", "body": "<p>It is creating a typedef of a pointer-to-function, the function takes a const char pointer argument and retusn nothing.</p>\n\n<p>Such typedefs are common in libraries that are meant for dynamic loading (that is with LoadLibrary etc), since you must load function pointers to the actual functions rather than being able to use the function name directly as you can with load-time linking.</p>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 3, "last_activity_date": 1513118582, "creation_date": 1513118582, "answer_id": 47782769, "question_id": 47780330, "link": "https://stackoverflow.com/questions/47780330/typedef-void-print-type-const-char/47782769#47782769", "title": "typedef void (*print_type) (const char*);", "body": "<p>This:</p>\n\n<pre><code>void foo(const char*);\n</code></pre>\n\n<p>declares <code>foo</code> as a function that takes a <code>const char*</code> argument and returns <code>void</code> (i.e., it doesn't return anything). (It would have to be defined somewhere for you to be able to call it.)</p>\n\n<p>This:</p>\n\n<pre><code>void (*bar)(const char*);\n</code></pre>\n\n<p>defines <code>bar</code> as a pointer object. It's a pointer to a function that has the same type as <code>foo</code>, above.</p>\n\n<p>By adding the <code>typedef</code> keyword, this:</p>\n\n<pre><code>typedef void (*print_type)(const char*);\n</code></pre>\n\n<p>defined <code>print_type</code>, not as an object of that pointer-to-function type, but as an alias for that pointer-to-function type.</p>\n"}], "owner": {"reputation": 1637, "user_id": 8464442, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tcepL.jpg?s=128&g=1", "display_name": "AAEM", "link": "https://stackoverflow.com/users/8464442/aaem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2150, "favorite_count": 0, "closed_date": 1513153508, "accepted_answer_id": 47782769, "answer_count": 3, "score": -1, "last_activity_date": 1575411691, "creation_date": 1513107627, "last_edit_date": 1575411691, "question_id": 47780330, "link": "https://stackoverflow.com/questions/47780330/typedef-void-print-type-const-char", "closed_reason": "Duplicate", "title": "typedef void (*print_type) (const char*);", "body": "<p>While exploring some code, I found the following in a header file:</p>\n\n<pre><code>typedef void (*print_type) (const char*);\n</code></pre>\n\n<p>What does this line mean? I know that <code>typedef</code> is used to make specific word (in our case <code>*print_type</code>) to represent a specific type (in our case <code>const char*</code>). </p>\n\n<p>But my question is why we have to use <code>void</code>?</p>\n"}, {"tags": ["c", "arm", "stm32", "stm32f4"], "comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1513107564, "post_id": 47780281, "comment_id": 82521788, "body": "<code>Is the #define statement</code> ... <code>define</code> is a directive(macro definition)  and not a statemant"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1513108075, "post_id": 47780281, "comment_id": 82522060, "body": "its doing what the code says.  the defines are creating (uint32_t)0x40020000; then GPI0A is a define of((GPIO_Typedef *)(uint32_t)0x400020000) with the right number of parens so that when you eventually use it.  pointing structures across compile domains is in general a really bad idea, but because so few or one compiler is used and its habits are known, this has become a habit.  Usually starts a flame war but it falls into implementation defined, not always works...all this is doing is a lazy way to create some defines that point at registers"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1513108164, "post_id": 47780281, "comment_id": 82522111, "body": "the uint32_t is creating a 4 bytes per spacing between say MODER and OTYPER.  the defines are setting the base address of 0x40020000 so moder is 0x40020000 and OTYPER 0x40020004 in this case from what you have shown us."}, {"owner": {"reputation": 535, "user_id": 8156000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b8ede127b33db648196bcf0addcc9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Taako", "link": "https://stackoverflow.com/users/8156000/taako"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1513108169, "post_id": 47780281, "comment_id": 82522119, "body": "@old_timer thanks! but how do we know where the member variables such as <code>MODER</code> and <code>ODR</code> are being correctly placed in the address we expect them to be? We are trusting them to be all next to each other and declared in the order we type them?"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1513108201, "post_id": 47780281, "comment_id": 82522135, "body": "compile and disassemble as you should always do when using structures across compile domains."}, {"owner": {"reputation": 535, "user_id": 8156000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b8ede127b33db648196bcf0addcc9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Taako", "link": "https://stackoverflow.com/users/8156000/taako"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1513108231, "post_id": 47780281, "comment_id": 82522150, "body": "@old_timer what do you mean &quot;structures across compile domains&quot; ?"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1513108244, "post_id": 47780281, "comment_id": 82522160, "body": "the other how you know is that this is likely from ST even in CMSIS, and they tested it on one/few compilers"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1513108386, "post_id": 47780281, "comment_id": 82522259, "body": "pointing a structure at memory, at data read from a file, at hardware are all different compile domains.  to safely use a structure you use the same compiler and pass the structure to other functions in that project or code. as soon as you use it across compile domains, pass it to a kernel driver, use it as a lazy way to parse data from a file, or in this case point at registers. It WILL bite you if you use it as a habit, it WILL require regular maintenance of the code.  this case is a lot safer in that it is using fixed sized, word sized elements through out and is not a  union with structs"}, {"owner": {"reputation": 535, "user_id": 8156000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b8ede127b33db648196bcf0addcc9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Taako", "link": "https://stackoverflow.com/users/8156000/taako"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1513108487, "post_id": 47780281, "comment_id": 82522314, "body": "@old_timer i am still having trouble understanding the concept of compile domains. Is there a place i can read more?"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1513108510, "post_id": 47780281, "comment_id": 82522325, "body": "when you use the same compiler (binary) with the same settings for one or more files in the same project the compiler chooses how to layout the struct, they implement the alignment and packing, so all code produced from the same compiler on the same machine same day same project same settings will produce the same layout/packing and &quot;just work&quot;, crossing to other compilers there is no reason to assume the same layout and packing and that it just works."}, {"owner": {"reputation": 535, "user_id": 8156000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b8ede127b33db648196bcf0addcc9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Taako", "link": "https://stackoverflow.com/users/8156000/taako"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1513108595, "post_id": 47780281, "comment_id": 82522376, "body": "@old_timer when would you cross over to another compiler? you mean like use <code>gcc</code> to compile to object files and then <code>clang</code> to link it?"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1513108653, "post_id": 47780281, "comment_id": 82522414, "body": "If I take an x86 compiler on my host computer and take some struct and compile code for it, the offsets into that struct where elements are and padding, etc are determined by that compiler, that is a compile domain the domain that that compiler controls.  if i take the same struct and build something for an arduino with even the same compiler or different (gcc for example) but a different target, avr instead of x86, there is no reason to assume that the offsets in the struct are the same and as a result if you move data between these two binaries these two programs and simply point the"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1513108788, "post_id": 47780281, "comment_id": 82522483, "body": "structure at it the elements dont come out right.  to take that further when I produce logic based on yet another compiler (vhdl, verilog, cadence, synopsys, etc) those offsets are defined relative to each other and if you point at those you are crossing a compile domain between the compiler that produced the logic and the compiler that produced the mcu binary (not that the logic used structs, but the mcu side is a lazy approach at saving on typing and or doing more typing actually, depends)."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1513108906, "post_id": 47780281, "comment_id": 82522541, "body": "structs like this are relatively safe, but when you get into bitfields then it all falls apart, likewise using a union with a struct with bitfields vs say a uint32_t.  very very bad, will bite you someday, generally a decade or two into your career when you change jobs, projects, or compilers or the world goes from 16 to 32 bit or 32 bit to 64 or 64 to 128.   stepping off the soapbox now."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1513109022, "post_id": 47780281, "comment_id": 82522622, "body": "the struct is just a list of words, the compiler implements them in order, being 32 bit words against that target relatively safe that they will stay aligned without padding esp with stdint although stdint does break the struct rules in the spec.  still relatively safe about as safe as you can be.  the defines are so they can modularize the building of addresses for whatever reason, bloat or sanity depends on the design and where these are used, these peripherals are re-used across this vendors chip families but at different base addresses."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1513109066, "post_id": 47780281, "comment_id": 82522636, "body": "so that sets up the hardcoded base address for this peripheral then C pointer magic to connect the two.  The best way to check though is build a small program even just an object and disassemble and see that it produced the right addresses for the registers in question"}, {"owner": {"reputation": 535, "user_id": 8156000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b8ede127b33db648196bcf0addcc9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Taako", "link": "https://stackoverflow.com/users/8156000/taako"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1513109143, "post_id": 47780281, "comment_id": 82522675, "body": "@old_timer thanks! that&#39;s very descriptive. But i still am having a hard time understanding why you would ever cross compile domains. do you have a real-life example i can read about?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1513159028, "post_id": 47780281, "comment_id": 82541217, "body": "@Taako same advise as in your another Topic. Learn the C language before asking such a questions a bit deeper. Buy a book. Study. Your questions just show that you are a very beginner."}, {"owner": {"reputation": 535, "user_id": 8156000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b8ede127b33db648196bcf0addcc9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Taako", "link": "https://stackoverflow.com/users/8156000/taako"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1513174478, "post_id": 47780281, "comment_id": 82551108, "body": "@PeterJ_01 what is wrong with asking questions? I couldn&#39;t find the answer to this from googling it so apparently it&#39;s not a very common question and i don&#39;t see any book that says that compilers are not allowed to re-order struct members in memory."}], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 8156000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b8ede127b33db648196bcf0addcc9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Taako", "link": "https://stackoverflow.com/users/8156000/taako"}, "edited": false, "score": 0, "creation_date": 1513112880, "post_id": 47781219, "comment_id": 82524481, "body": "so we do &quot;trust&quot; that when the compiler sees the declaration of <code>GPIO_TypeDef *</code> at address <code>GPIOA_BASE</code> it will initialize its member variables <code>MODER</code>, <code>ODR</code>, etc... sequentially and in the order they appear in the structure? And we also trust that because they are <code>uint32</code> that they align correctly to the registers in the reference manual?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 535, "user_id": 8156000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b8ede127b33db648196bcf0addcc9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Taako", "link": "https://stackoverflow.com/users/8156000/taako"}, "edited": false, "score": 0, "creation_date": 1513113019, "post_id": 47781219, "comment_id": 82524540, "body": "@Taako: Pretty much.  Any compiler that is suitable for embedded systems use on the ARM platform will behave in such fashion, and code which would rely upon the ability to access I/O registers cannot be expected to behave usefully on compilers that aren&#39;t suitable for such use."}, {"owner": {"reputation": 535, "user_id": 8156000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b8ede127b33db648196bcf0addcc9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Taako", "link": "https://stackoverflow.com/users/8156000/taako"}, "edited": false, "score": 0, "creation_date": 1513113322, "post_id": 47781219, "comment_id": 82524669, "body": "okay, i understand. thanks for the explanation. I guess i had a philosophical issue with the lack of address being explicitly spelled out in memory but i suppose it shouldn&#39;t really be an issue"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 535, "user_id": 8156000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b8ede127b33db648196bcf0addcc9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Taako", "link": "https://stackoverflow.com/users/8156000/taako"}, "edited": false, "score": 0, "creation_date": 1513114041, "post_id": 47781219, "comment_id": 82524978, "body": "@Taako: IMHO, the Standard should have long ago specified a syntax for placing objects at specific offsets within structures, but I think the fact that compilers were nearly 100% consistent in how they processed structure layouts in cases when all members would naturally be optimally aligned for their respective data types meant that the ordinary struct-member syntax was generally sufficient to fit the needs of even system-level programmers."}, {"owner": {"reputation": 535, "user_id": 8156000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b8ede127b33db648196bcf0addcc9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Taako", "link": "https://stackoverflow.com/users/8156000/taako"}, "edited": false, "score": 0, "creation_date": 1513114823, "post_id": 47781219, "comment_id": 82525336, "body": "is the a better way I should declare structs if they are more complex so that it is placed in memory where I want them to be? Is there a way to tell the structure what offset to use?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 535, "user_id": 8156000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b8ede127b33db648196bcf0addcc9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Taako", "link": "https://stackoverflow.com/users/8156000/taako"}, "edited": false, "score": 1, "creation_date": 1513115320, "post_id": 47781219, "comment_id": 82525521, "body": "@Taako: Really, the only things you can do are to ensure that the offset of each element would be consistent with its alignment requirements without needing any padding, and to check that using <code>sizeof</code> yields the expected value.  If you lay out the structure so as not to require any compiler-generated padding (include your own dummy fields if needed), there will only be one way a compiler could lay out the structure with the correct size.  If the size is correct, the structure&#39;s layout will be as well."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1513158618, "post_id": 47781219, "comment_id": 82540970, "body": "@supercat C language is a C language defined by the standard document. There is nothing like a family of languages. All existing languages have evolved over the time. The compiler is not allowed to reorder the struct members and Structure members are stored sequentially  in the order in which they are declared: the first member has the lowest memory address and the last member the highest. Your answer is unfortunately wrong."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 535, "user_id": 8156000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b8ede127b33db648196bcf0addcc9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Taako", "link": "https://stackoverflow.com/users/8156000/taako"}, "edited": false, "score": 0, "creation_date": 1513158913, "post_id": 47781219, "comment_id": 82541146, "body": "@Taako do not accept wrong answers (you did it in your both topics) as it may confuse the future readers. Comments are not indexed by google."}, {"owner": {"reputation": 535, "user_id": 8156000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b8ede127b33db648196bcf0addcc9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Taako", "link": "https://stackoverflow.com/users/8156000/taako"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1513174339, "post_id": 47781219, "comment_id": 82551006, "body": "@PeterJ_01 then please make a correct answer so i can mark yours correct if you believe the answer i selected was wrong. Do not simply complain about my selection of answer if you aren&#39;t going to help make progress towards a final correct solution. Also please reference an official C document that says that compilers must declare struct members in order they are written in C."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1513178998, "post_id": 47781219, "comment_id": 82554276, "body": "@PeterJ_01: Dennis Ritchie created a language he called C, which evolved into a family of useful dialects as described in #1 long before there was any thought of an &quot;official&quot; Standards document.  The Standards Committee wrote a document that could be usefully regarded as describing a <i>common core</i> for such languages.  The Committee could not have intended that document to fully describe a useful language for freestanding implementations unless they were all morons or believed that <code>while(1);</code> was the only useful behavior anyone should need [can you identify <i>anything</i> else..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1513179344, "post_id": 47781219, "comment_id": 82554479, "body": "...that a conforming freestanding implementation would be required to let programs do?]  Some people seem to think that any program which relies upon anything not mandated by the Standard is defective, but such an interpretation would imply that any freestanding program that performs any action whatsoever is defective.  Do you think that&#39;s what the authors of the Standard intended?"}], "tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": true, "score": 1, "last_activity_date": 1513111433, "creation_date": 1513111433, "answer_id": 47781219, "question_id": 47780281, "link": "https://stackoverflow.com/questions/47780281/when-does-gpio-peripheral-get-its-members-addresses-assigned/47781219#47781219", "title": "When does GPIO peripheral get its members addresses assigned?", "body": "<p>The name \"C\" is used to describe two things:</p>\n\n<ol>\n<li><p>A family of languages which map source code constructs onto target-machine constructs in a rather consistent fashion.  There's often no \"standard\" documenting how such mapping should be performed, and implementations for unusual target platforms will behave differently from those for more common ones, but compilers for similar platforms will generally behave similarly.</p></li>\n<li><p>A language which contains only the features mandated by the C11 Standard, and generally omits features which aren't implemented consistently on all platforms, even though C compilers for similar platforms would have processed them similarly.</p></li>\n</ol>\n\n<p>The code you cite above is designed for compilers that process a languages in the first family, which is adapted to the needs of ARM processors.  In that language, each item of a structure will be placed at the lowest offset which satisfies its alignment requirement.  Neither the C11 Standard, nor any of its predecessors, requires that compilers guarantee to lay out structures in such fashion, nor do any of them even any convenient way for those that sometimes do otherwise to indicate that fact.  From the point of view of the C11 Standard, structure elements may be arbitrarily placed subject subject to relatively few constraints.  I think the authors of C89 probably figured that compiler writers would lay things out sequentially, with or without a mandate, except on rare platforms where there might be a compelling reason to do otherwise, and thus saw no reason to demand that they behave as they were going to anyway.  Some people, however, seem to believe the lack of a mandate was meant to be an open invitation to arrange things arbitrarily, and any code that would rely upon a particular layout should be viewed as \"defective\".</p>\n"}], "owner": {"reputation": 535, "user_id": 8156000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b8ede127b33db648196bcf0addcc9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Taako", "link": "https://stackoverflow.com/users/8156000/taako"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "accepted_answer_id": 47781219, "answer_count": 1, "score": 0, "last_activity_date": 1513256776, "creation_date": 1513107435, "last_edit_date": 1513256776, "question_id": 47780281, "link": "https://stackoverflow.com/questions/47780281/when-does-gpio-peripheral-get-its-members-addresses-assigned", "title": "When does GPIO peripheral get its members addresses assigned?", "body": "<p>From <code>stm32f446xx.h</code> we have a definition of GPIO_TypeDef</p>\n\n<pre><code>typedef struct\n{\n  __IO uint32_t MODER;    /*!&lt; GPIO port mode register,               Address offset: 0x00      */\n  __IO uint32_t OTYPER;   /*!&lt; GPIO port output type register,        Address offset: 0x04      */\n  __IO uint32_t OSPEEDR;  /*!&lt; GPIO port output speed register,       Address offset: 0x08      */\n  __IO uint32_t PUPDR;    /*!&lt; GPIO port pull-up/pull-down register,  Address offset: 0x0C      */\n  __IO uint32_t IDR;      /*!&lt; GPIO port input data register,         Address offset: 0x10      */\n  __IO uint32_t ODR;      /*!&lt; GPIO port output data register,        Address offset: 0x14      */\n  __IO uint32_t BSRR;     /*!&lt; GPIO port bit set/reset register,      Address offset: 0x18      */\n  __IO uint32_t LCKR;     /*!&lt; GPIO port configuration lock register, Address offset: 0x1C      */\n  __IO uint32_t AFR[2];   /*!&lt; GPIO alternate function registers,     Address offset: 0x20-0x24 */\n} GPIO_TypeDef;\n</code></pre>\n\n<p>This is used to initialize some GPIO peripherals. Focusing on GPIOA:</p>\n\n<pre><code>#define PERIPH_BASE           ((uint32_t)0x40000000)\n#define AHB1PERIPH_BASE       (PERIPH_BASE + 0x00020000)\n#define GPIOA_BASE            (AHB1PERIPH_BASE + 0x0000)\n#define GPIOA               ((GPIO_TypeDef *) GPIOA_BASE)\n</code></pre>\n\n<p>So my questions are:</p>\n\n<ol>\n<li><p>Is the <code>#define</code> directive declaring and initializing the struct and putting it at address pointed to at `GPIOA_BASE? Or is the define statement just declaring the struct but not initializing its members?</p></li>\n<li><p>How do the members get their address placement correct without it being explicitly defined? How do we know that <code>GPIOA-&gt;MODER</code> leads to the same address as <code>GPIOA_BASE</code>? Likewise how do we know <code>GPIOA-&gt;ODR</code> leads to the address <code>GPIOA_BASE</code> + offset <code>0x014</code>? Is it simply because when we declare the struct and tell it that it's located at <code>GPIOA_BASE</code> with the <code>#define GPIOA               ((GPIO_TypeDef *) GPIOA_BASE)</code> command all it's member variables are declared and initialized in memory in the order they appear in the struct <code>GPIOA_TypeDef</code>? That would make sense since each takes 4 bytes but I am unsure if this is the case.</p></li>\n<li><p>If the member variables are not declared in the order they are listed in the struct then how do they get their memory addresses assigned?</p></li>\n</ol>\n"}, {"tags": ["c", "struct", "malloc"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1513107488, "post_id": 47780241, "comment_id": 82521754, "body": "<code>malloc</code> does not have to initialise the allocated memory, although a particular implementation may do (to prevent peeking into recycled memory). You must always initialise it yourself. If you want to guarantee that the allocated memory will be set to <code>0</code> then use <code>calloc</code>."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1513107573, "post_id": 47780241, "comment_id": 82521800, "body": "what do you mean &#39;the BASES are initialized&#39;, your code doesnt even allocate any BASES"}, {"owner": {"reputation": 487, "user_id": 8612119, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fQwjZ.jpg?s=128&g=1", "display_name": "MasterTextman", "link": "https://stackoverflow.com/users/8612119/mastertextman"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1513108049, "post_id": 47780241, "comment_id": 82522049, "body": "@WeatherVane That&#39;s my point. I don&#39;t want the allocated memory to be initialised, but for some reason on Windows it is being initialised."}, {"owner": {"reputation": 487, "user_id": 8612119, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fQwjZ.jpg?s=128&g=1", "display_name": "MasterTextman", "link": "https://stackoverflow.com/users/8612119/mastertextman"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1513108140, "post_id": 47780241, "comment_id": 82522097, "body": "@pm100 SPACE is an array of BASEs. hashmap is a struct of type SPACE *. When I say, initialized, I mean that the BASEs in hashmap are NOT NULL. On Linux, they are set to NULL, however on windows, they are not."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1513108156, "post_id": 47780241, "comment_id": 82522106, "body": "your <code>typedef</code>s are confusing me.. so <code>BASE</code> is a <code>struct base</code>, <code>SPACE</code> is a <code>BASE*</code>, so that means <code>SPACE*</code> is a <code>BASE**</code>? If <code>hashmap</code> is a <code>BASE**</code>, then you&#39;ll need to allocate memory for each <code>BASE*</code> before you can <code>hashmap[#]-&gt;</code> safely, where <code>#</code> is 0-2 if <code>length</code> is 3."}, {"owner": {"reputation": 487, "user_id": 8612119, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fQwjZ.jpg?s=128&g=1", "display_name": "MasterTextman", "link": "https://stackoverflow.com/users/8612119/mastertextman"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1513108361, "post_id": 47780241, "comment_id": 82522246, "body": "@yano Sorry for the confusion, it&#39;s because SPACE is meant to be an array of BASEs. And yes, I understand that, but I use code that uses stuff such as <code>if(hashmap[0])</code>. Basically my problem is that on Windows, hashmap[0] technically <code>exists</code>, but since there isn&#39;t memory allocated to it, <code>hashmap[0]-&gt;</code> still causes SIGSEGV.  By technically exists, I mean that it isn&#39;t explicitly NULL."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1513108615, "post_id": 47780241, "comment_id": 82522388, "body": "This has absolutely nothing to do with Linux or Windows. And no, they are not &quot;set to NULL&quot; on Linux, as you seem to believe. Your nulls are purely accidental."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1513108651, "post_id": 47780241, "comment_id": 82522413, "body": "If you have a double pointer, you have to go through 2 &quot;rounds&quot; of memory allocation. In the code you&#39;ve shown, you&#39;ve only done the first round. So if <code>length</code> is 3, then after what you&#39;ve shown, accessing <code>hashmap[0,1,2]</code> is valid, however, accessing <code>hashmap[0,1,2]-&gt;</code> is not valid since you haven&#39;t allocated memory for each <code>BASE*</code> yet. You must loop over <code>length</code> and do <code>hashmap[i] = malloc(sizeof BASE);</code> first."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1513108796, "post_id": 47780241, "comment_id": 82522487, "body": "ok so you have it backwards. Linux has initialized the pointers to null. Windows has not, it has left random values. As other point out malloc is not required to initialize the memory it returns (cf. calloc). Most platforms do not. Sometimes it depends on whether you are running DEBUG build or not. You code should <i>always</i> assume that the memory is not initialized"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1513108917, "post_id": 47780241, "comment_id": 82522548, "body": "@pm100 No, Linux did not initialize the pointers to NULL.  That just happened to be the value of the bytes returned.  The man page explicitly says the memory is not initialized.  Changing optimization settings could result in different values for the uninitialized bytes."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1513112518, "post_id": 47780241, "comment_id": 82524302, "body": "@dbush - i was wondering about that too. So in fact neither OS initialized, just different random values."}], "answers": [{"comments": [{"owner": {"reputation": 487, "user_id": 8612119, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fQwjZ.jpg?s=128&g=1", "display_name": "MasterTextman", "link": "https://stackoverflow.com/users/8612119/mastertextman"}, "edited": false, "score": 0, "creation_date": 1513108506, "post_id": 47780498, "comment_id": 82522323, "body": "I was wrong then... I thought that anything that wasn&#39;t <code>NULL</code> was initialised. Excuse me, I only just started learning C, but thank you. The problem is that I have a lot of code that has stuff such as <code>if(hashmap[0])</code>. When it isn&#39;t NULL, that returns as true, which is where my problem comes. But thank you."}, {"owner": {"reputation": 487, "user_id": 8612119, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fQwjZ.jpg?s=128&g=1", "display_name": "MasterTextman", "link": "https://stackoverflow.com/users/8612119/mastertextman"}, "edited": false, "score": 0, "creation_date": 1513109037, "post_id": 47780498, "comment_id": 82522629, "body": "Didn&#39;t know that it was Linux that sets the return value of malloc to NULL though, that&#39;s definitely helpful."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 487, "user_id": 8612119, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fQwjZ.jpg?s=128&g=1", "display_name": "MasterTextman", "link": "https://stackoverflow.com/users/8612119/mastertextman"}, "edited": false, "score": 2, "creation_date": 1513109161, "post_id": 47780498, "comment_id": 82522684, "body": "No, @txtman, it&#39;s not.  You cannot rely on that behavior on Linux, or anywhere else."}, {"owner": {"reputation": 487, "user_id": 8612119, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fQwjZ.jpg?s=128&g=1", "display_name": "MasterTextman", "link": "https://stackoverflow.com/users/8612119/mastertextman"}, "edited": false, "score": 0, "creation_date": 1513109229, "post_id": 47780498, "comment_id": 82522711, "body": "I know, I know. But our lecturer and my past (by past I mean a month ago) experience with C on Linux made me think that malloc returns NULL."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 487, "user_id": 8612119, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fQwjZ.jpg?s=128&g=1", "display_name": "MasterTextman", "link": "https://stackoverflow.com/users/8612119/mastertextman"}, "edited": false, "score": 3, "creation_date": 1513109815, "post_id": 47780498, "comment_id": 82523021, "body": "@txtman <code>malloc</code> returns NULL (that is, the function return value of <code>malloc</code>) if it fails to provide a memory chunk with the size you requested. You should absolutely check this every time you call <code>malloc</code> (or <code>calloc</code>). If <code>malloc</code> returns non-NULL, then it returns a valid pointer to a memory chunk with usable size that you have requested. However, <code>malloc</code> does nothing to the memory chunk itself."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1513108279, "creation_date": 1513108279, "answer_id": 47780498, "question_id": 47780241, "link": "https://stackoverflow.com/questions/47780241/linux-and-windows-initialise-structs-differently/47780498#47780498", "title": "Linux and Windows initialise structs differently", "body": "<blockquote>\n  <p>Let's say that length is 3. In Linux, when I check the debugger, I see\n  that:</p>\n\n<pre><code>hashmap[0] = NULL;\nhashmap[1] = NULL;\nhashmap[2] = NULL;\n</code></pre>\n  \n  <p>Because I did not initialise the BASEs, I only initialised the fact\n  that there is an array of them.</p>\n</blockquote>\n\n<p>No.  You get all of those being <code>NULL</code> because that happens to be what you get.  C does not specify the initial contents of the memory returned by <code>malloc()</code>, and if you performed that allocation under other circumstances then you might not get all NULLs.</p>\n\n<blockquote>\n  <p>However, in Windows, I see that all of\n  the BASES are initialised. Not only that, but all of the ITEMs within\n  the BASEs are initialised as well.</p>\n</blockquote>\n\n<p>They may have non-NULL values, but that's very different from being initialized.  The values are very likely to be wild pointers.  If they happen to point to accessible memory then you can interpret the data where they point as <code>ITEM</code>s, but again, that does not mean they are initialized, or that it is safe to access that memory.  You are delving into undefined behavior here.</p>\n\n<blockquote>\n  <p>However, if I, for example, immediately afterwards add this line:\n  hashmap[0]->first = NULL, I end up with a SIGSEGV error that I can't\n  find the cause of.</p>\n</blockquote>\n\n<p>We can't speak to the cause of your segmentation fault because you have not presented the code responsible, but having an array of pointers does not mean the pointer values within are valid.  If they are not, then dereferencing them produces undefined behavior, which often manifests as a segfault.  Note well that this does not depend on those pointers being <code>NULL</code>; it can attend accessing <em>any</em> pointer value that does not point to an object belonging to your program and having compatible type.</p>\n\n<blockquote>\n  <p>In Linux, this is because hashmap[0] is NULL, and\n  hence hashmap[0]->first can't even be accessed in the first place. But\n  on Windows, it clearly shows that hashmap[0] exists and has an\n  initialised first value.</p>\n</blockquote>\n\n<p>No, it doesn't.  Again, your debugger shows <code>hashmap[0]</code> having a <em>non-<code>NULL</code></em> value, which is not at all the same thing.</p>\n\n<p>It is your responsibility to avoid dereferencing invalid pointer values, which are by no means limited to <code>NULL</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1513108735, "post_id": 47780509, "comment_id": 82522451, "body": "The first parameter to <code>calloc</code> is the number of elements to allocate, and the second is the size of an element."}, {"owner": {"reputation": 487, "user_id": 8612119, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fQwjZ.jpg?s=128&g=1", "display_name": "MasterTextman", "link": "https://stackoverflow.com/users/8612119/mastertextman"}, "edited": false, "score": 0, "creation_date": 1513108752, "post_id": 47780509, "comment_id": 82522462, "body": "I&#39;m guessing that it&#39;s best for me to replace any malloc associated with a struct that has pointers in it with calloc then, the first parameter being 1."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 487, "user_id": 8612119, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fQwjZ.jpg?s=128&g=1", "display_name": "MasterTextman", "link": "https://stackoverflow.com/users/8612119/mastertextman"}, "edited": false, "score": 0, "creation_date": 1513108812, "post_id": 47780509, "comment_id": 82522493, "body": "@txtman If you only want to allocate one instance of the struct, then yes.  If you want to allocate an array, then the first parameter is the length of the array."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 487, "user_id": 8612119, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fQwjZ.jpg?s=128&g=1", "display_name": "MasterTextman", "link": "https://stackoverflow.com/users/8612119/mastertextman"}, "edited": false, "score": 0, "creation_date": 1513108846, "post_id": 47780509, "comment_id": 82522509, "body": "For what purpose, @txtman?  Your problem is not that the initial contents of the allocated memory are nonzero, it is that you fail to set the contents to appropriate values after allocation.  Perhaps you are also making an incorrect assumption that non-NULL pointer values are necessarily valid."}, {"owner": {"reputation": 487, "user_id": 8612119, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fQwjZ.jpg?s=128&g=1", "display_name": "MasterTextman", "link": "https://stackoverflow.com/users/8612119/mastertextman"}, "edited": false, "score": 0, "creation_date": 1513108981, "post_id": 47780509, "comment_id": 82522592, "body": "Nono, I understand that non-NULL doesn&#39;t necessarily mean valid now. It&#39;s just that I have many checks within my code that check whether a certain struct is set to NULL. For example if I do <code>SPACE *hey = malloc(something)</code> I have checks like <code>if(hey[0])</code>."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1513108308, "creation_date": 1513108308, "answer_id": 47780509, "question_id": 47780241, "link": "https://stackoverflow.com/questions/47780241/linux-and-windows-initialise-structs-differently/47780509#47780509", "title": "Linux and Windows initialise structs differently", "body": "<p>The values of bytes pointed to after a successfull call to <code>malloc</code> are uninitialized.  That means they can be set to any arbitrary value, including zero.  So just because the bytes are either zero or non-zero doesn't mean they are initialized.</p>\n\n<p>Section 7.22.3.4 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a> regarding <code>malloc</code> states:</p>\n\n<blockquote>\n  <p><em>1</em></p>\n\n<pre><code>#include &lt;stdlib.h&gt;\nvoid *malloc(size_t size);\n</code></pre>\n  \n  <p><em>2</em> The <code>malloc</code> function allocates space for an object whose size is specified by <code>size</code> <strong>and whose value is indeterminate</strong>.</p>\n</blockquote>\n\n<p>So there are no guarantees what the memory returned by <code>malloc</code> will contain.</p>\n\n<p>If on the other hand you use <code>calloc</code>, that function will initialize all allocated bytes to 0.</p>\n\n<pre><code>hashmap = calloc(length, sizeof(SPACE *));\n</code></pre>\n"}], "owner": {"reputation": 487, "user_id": 8612119, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fQwjZ.jpg?s=128&g=1", "display_name": "MasterTextman", "link": "https://stackoverflow.com/users/8612119/mastertextman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 47780509, "answer_count": 2, "score": -2, "last_activity_date": 1517660509, "creation_date": 1513107291, "last_edit_date": 1517660509, "question_id": 47780241, "link": "https://stackoverflow.com/questions/47780241/linux-and-windows-initialise-structs-differently", "title": "Linux and Windows initialise structs differently", "body": "<p>While switching from linux back to windows, I noticed that my code stopped working. Using the trusty debugger, I found that structs were being initialised differently.</p>\n\n<pre><code>typedef struct base{\n    struct item * first;\n}BASE;\n\ntypedef BASE *SPACE;\n\n...\n\nhashmap = malloc(sizeof(SPACE *) * length);\nhashSpaceSize = length;\n</code></pre>\n\n<p>Look at this code for example (hid extra code to keep it tidy, also ignore <em>struct item</em> it's not useful here). Let's say that length is 3. In Linux, when I check the debugger, I see that:</p>\n\n<pre><code>hashmap[0] = NULL;\nhashmap[1] = NULL;\nhashmap[2] = NULL;\n</code></pre>\n\n<p>Because I did not initialise the BASEs, I only initialised the fact that there is an array of them. However, in Windows, I see that all of the BASES are initialised. Not only that, but all of the ITEMs within the BASEs are initialised as well.</p>\n\n<p>However, if I, for example, immediately afterwards add this line:\n<code>hashmap[0]-&gt;first = NULL</code>, I end up with a <code>SIGSEGV</code> error that I can't find the cause of. In Linux, this is because <code>hashmap[0] is NULL</code>, and hence <code>hashmap[0]-&gt;first</code> can't even be accessed in the first place. But on Windows, it clearly shows that hashmap[0] exists and has an initialised <code>first</code> value.</p>\n\n<p>I don't know what is going on here, and I can't find anything regarding this bug. If more code is needed, everything is on my <a href=\"https://github.com/MasterTextman/c-tasks/blob/master/Task%202/hashmap.h\" rel=\"nofollow noreferrer\">github.</a> Linked to the actual file this code is in. But for now, I'm confused as to what's going on...</p>\n\n<p>UPDATE: Apparently I had some looking up to do. Didn't know that malloc returned an uninitialized pointer and not just NULL. That was set by Linux. Thanks though, learnt something new today.</p>\n"}, {"tags": ["c", "asynchronous", "io", "posix"], "comments": [{"owner": {"reputation": 166951, "user_id": 1707091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dJrV3.jpg?s=128&g=1", "display_name": "rgettman", "link": "https://stackoverflow.com/users/1707091/rgettman"}, "edited": false, "score": 1, "creation_date": 1513106388, "post_id": 47779943, "comment_id": 82521204, "body": "What do you mean by &quot;did not work&quot;?  Please specific about what went wrong."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513107031, "post_id": 47779943, "comment_id": 82521512, "body": "Basic debugging techniques suggest capturing and printing the vale returned by <code>aio_error()</code> so you know why your loop terminates.  It presumably does not return EINPROGRESS, but what does it return?  Maybe the I/O is complete?"}, {"owner": {"reputation": 18, "user_id": 7485480, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rTI3KPI3nLg/AAAAAAAAAAI/AAAAAAAAADo/DBXFJf4KmFE/photo.jpg?sz=128", "display_name": "Hasan H&#252;seyin Pay", "link": "https://stackoverflow.com/users/7485480/hasan-h%c3%bcseyin-pay"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513108214, "post_id": 47779943, "comment_id": 82522142, "body": "I used EINPROGRESS because I am trying to learn progress. If I/O is complete, obviously progress is %100 :) But this code returns different results every time when I run. @JonathanLeffler"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513108824, "post_id": 47779943, "comment_id": 82522499, "body": "You didn\u2019t check the call to <code>aio_read()</code> and you don\u2019t show how you initialize the structure, so you don\u2019t know whether your request is valid, and we have no way of knowing either.  Sometimes you can cut corners on error checking when the code is working, but as soon as things go wrong, you need the checking.  You need to create an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)."}, {"owner": {"reputation": 18, "user_id": 7485480, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rTI3KPI3nLg/AAAAAAAAAAI/AAAAAAAAADo/DBXFJf4KmFE/photo.jpg?sz=128", "display_name": "Hasan H&#252;seyin Pay", "link": "https://stackoverflow.com/users/7485480/hasan-h%c3%bcseyin-pay"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1513110293, "post_id": 47779943, "comment_id": 82523214, "body": "@JonathanLeffler I added MCVE but this is not related about my implementation. My question is related about POSIX Asynchronous IO APIs. Is there any way to get current cursor position or any different solution for displaying progress?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1513110627, "post_id": 47779943, "comment_id": 82523397, "body": "You\u2019re still not checking and saving and printing the results of the system calls.  If the file is a disk file, the write will complete immediately.  There\u2019ll be no time for it to be \u201cin progress\u201d.  To get some sort of \u201cin progress\u201d indication, you\u2019d need to do something like write to a pipe or FIFO and have nothing actively reading (but able to read) and send enough data (64 KiB?) to fill the buffer so the AIO is forced to wait to complete.  To avoid deadlock, the non-reading reader needs to be a separate process, probably; a separate thread might also work."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1513357941, "post_id": 47779943, "comment_id": 82637589, "body": "If you want to know the progress, then use a separate thread to handle the reads/writes in a nonblocking fashion; you only need one thread for any number of open descriptors. I&#39;m baffled as to why you would even want to try to shoehorn POSIX AIO into a synchronous use case (and your use case <i>is</i> synchronous by definition, because you <i>are</i> interested in its progress, and not just its completion/error status)."}], "answers": [{"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": true, "score": 0, "last_activity_date": 1513258979, "last_edit_date": 1513258979, "creation_date": 1513252348, "answer_id": 47812719, "question_id": 47779943, "link": "https://stackoverflow.com/questions/47779943/is-it-possible-to-display-progress-of-asynchronous-io/47812719#47812719", "title": "Is it possible to display progress of Asynchronous IO", "body": "<p>You have different results because each different execution has its own context of execution that may differe from others (Do you always follow the exact same path to go from your house to the bank? Even if yes, elapsed time to reach the bank always exactly the same? Same task at the end - you're in the bank, different executions). What your program tries to measure is not I/O completion but the number of time it tests for completion of some async-I/O.</p>\n\n<p>And no, there is no concept of percentage of completion of a given async-I/O.</p>\n"}], "owner": {"reputation": 18, "user_id": 7485480, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rTI3KPI3nLg/AAAAAAAAAAI/AAAAAAAAADo/DBXFJf4KmFE/photo.jpg?sz=128", "display_name": "Hasan H&#252;seyin Pay", "link": "https://stackoverflow.com/users/7485480/hasan-h%c3%bcseyin-pay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 47812719, "answer_count": 1, "score": 0, "last_activity_date": 1513258979, "creation_date": 1513105977, "last_edit_date": 1513110835, "question_id": 47779943, "link": "https://stackoverflow.com/questions/47779943/is-it-possible-to-display-progress-of-asynchronous-io", "title": "Is it possible to display progress of Asynchronous IO", "body": "<p>I am trying to implement file copy program with POSIX Asynchronous IO APIs in linux. </p>\n\n<p>I tried this:</p>\n\n<pre><code>main() {\n    char data[200];\n    int fd = open(\"data.txt\", O_RDONLY); // text file on the disk\n    struct aiocb aio;\n\n    aio.aio_fildes = fd;\n    aio.aio_buf = data;\n    aio.aio_nbytes = sizeof(data);\n    aio.aio_offset = 0;\n\n    memset(&amp;aio, 0, sizeof(struct aiocb));\n    aio_read(arg-&gt;aio_p);\n    int counter = 0;\n    while (aio_error(arg-&gt;aio_p) == EINPROGRESS) {\n          printf(\"counter: %d\\n\", counter++);\n    }\n\n    int ret = aio_return(&amp;aio);\n    printf(\"ret value %d \\n\",ret);\n\n    return 0;\n}\n</code></pre>\n\n<p>But counter giving different results every time when I run</p>\n\n<p>Is it possible to display progress of aio_read and aio_write functions?</p>\n"}, {"tags": ["c", "parallel-processing", "mpi", "openmpi"], "answers": [{"comments": [{"owner": {"reputation": 782, "user_id": 3593398, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/612e3aa8a371609b9bf4ac81651db20f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3593398/andrew"}, "edited": false, "score": 0, "creation_date": 1513126698, "post_id": 47780674, "comment_id": 82529278, "body": "Thanks! This is exactly what I needed."}], "tags": [], "owner": {"reputation": 4933, "user_id": 8217180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9621a549160f738b81303a4a008ddd50?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Ribizel", "link": "https://stackoverflow.com/users/8217180/tobias-ribizel"}, "is_accepted": true, "score": 3, "last_activity_date": 1513109919, "last_edit_date": 1513109919, "creation_date": 1513109035, "answer_id": 47780674, "question_id": 47779918, "link": "https://stackoverflow.com/questions/47779918/mpi-reduce-arrays-representing-decimal-values-c/47780674#47780674", "title": "MPI_Reduce arrays representing decimal values (C)", "body": "<p>The only issue your implementation has is that you don't propagate the carry between your digits:\nThe digits individually are summed up correctly, you just need to add a small postprocessing step</p>\n\n<p>Pseudocode (be careful as the last line writes out of bounds, in fact you might need to continue this loop until <code>carry == 0</code>):</p>\n\n<pre><code>for i = n ... 1\n    carry = digit[i] / 10      # compute the carry to the next digit\n    digit[i] %= 10             # only leave the least significant digit\n    if carry != 0\n        digit[i - 1] += carry  # add the carry to the next higher digit\n</code></pre>\n\n<p>In your case, you get </p>\n\n<pre><code>[4][9][10][8][12]           \n[4][9][10][9][2]\n[4][10][0][9][2]\n[5][0][0][9][2] -&gt; 5.0092\n</code></pre>\n\n<p>However, you need to allocate additional space in front of the most significant digit in case you decide to add something like 6.1582 and 7.4638</p>\n\n<p>Another possible approach would be to implement a custom MPI data type and <a href=\"http://www.mcs.anl.gov/research/projects/mpi/mpi-standard/mpi-report-1.1/node80.htm\" rel=\"nofollow noreferrer\">user-defined operation</a> to propagate the carry during reduction, however for this, you would probably need to make sure that there is enough space to contain the result before starting the reduction.</p>\n"}], "owner": {"reputation": 782, "user_id": 3593398, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/612e3aa8a371609b9bf4ac81651db20f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3593398/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 47780674, "answer_count": 1, "score": 0, "last_activity_date": 1513109919, "creation_date": 1513105868, "question_id": 47779918, "link": "https://stackoverflow.com/questions/47779918/mpi-reduce-arrays-representing-decimal-values-c", "title": "MPI_Reduce arrays representing decimal values (C)", "body": "<p>I have a sequential program that computes numeric values and stores the result in an array where each element represents a number \"place.\"</p>\n\n<p>For example, a computed result <code>[2,4,5,1,1,8,9,3,1]</code> represents a decimal value of <code>2.45118931</code></p>\n\n<p>The format is such that result[0] is the value to the left of the decimal and result[1-n] represents the tenths, hundredths, etc. places to the right of the decimal</p>\n\n<p>The computed result for each processor goes into digits, and is reduced into mpiResult:</p>\n\n<pre><code>        long unsigned int *digits;\n        long unsigned int *mpiResult;\n</code></pre>\n\n<p>Once each process has computed its portion, I want to find the combined value result.</p>\n\n<p>I've not been able to implement MPI_Reduce in a way that is getting me the results I want.</p>\n\n<p>The closest I've gotten so far:</p>\n\n<pre><code>MPI_Reduce(digits, mpiResult, d, MPI_UNSIGNED_LONG, MPI_SUM, MPI_COMM_WORLD);\n</code></pre>\n\n<p>As far as I understand how the reduction sum works with arrays, if I have two processes with the following values</p>\n\n<pre><code>[2][3][4][1][9] (2.3419)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>[2][6][6][7][3] (2.6673)\n</code></pre>\n\n<p>The result of a sum <em>should</em> be <code>5.0092</code></p>\n\n<p>But a reduction sum would give me the value:</p>\n\n<pre><code>[4][9][10][8][12] (4.910812)\n</code></pre>\n\n<p>because it sums each element across all processes.</p>\n\n<p>How can I use MPI_Reduce to get the result format I'm looking for? Or am I completely off base with this approach?</p>\n"}, {"tags": ["c++", "c", "bit-manipulation", "bitwise-operators"], "comments": [{"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 6, "creation_date": 1513105622, "post_id": 47779830, "comment_id": 82520841, "body": "If the result of <code>x &amp; (x - 1)</code> is 0 then <code>x</code> is a <i>power-of-two</i>. See #9 on <a href=\"http://www.exploringbinary.com/ten-ways-to-check-if-an-integer-is-a-power-of-two-in-c/\" rel=\"nofollow noreferrer\">this page</a>."}, {"owner": {"reputation": 197, "user_id": 8598843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd4e52fed49ae83d586498d4bd6e7603?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Soni", "link": "https://stackoverflow.com/users/8598843/piyush-soni"}, "edited": false, "score": 1, "creation_date": 1513106172, "post_id": 47779830, "comment_id": 82521099, "body": "If anyone knows where from i can learn such bithacks , Please share.Thanks."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1513106406, "post_id": 47779830, "comment_id": 82521211, "body": "<a href=\"https://graphics.stanford.edu/~seander/bithacks.html\" rel=\"nofollow noreferrer\">graphics.stanford.edu/~seander/bithacks.html</a>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1513119883, "post_id": 47779830, "comment_id": 82527376, "body": "If bit manipulation is something you enjoy, there is an excellent book called Hacker&#39;s Delight (2e) by Henry Warren that you will find to be delightful.  <a href=\"https://rads.stackoverflow.com/amzn/click/com/0321842685\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">amazon.com/dp/0321842685</a>"}], "answers": [{"comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1513107053, "post_id": 47779959, "comment_id": 82521530, "body": "This does assume <code>n</code> is an <code>unsigned</code> type.   It will also indicate zero is a power of 2."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1513108449, "post_id": 47779959, "comment_id": 82522297, "body": "@Peter: It seems to work for 2&#39;s complement and sign-magnitude. Thanks for pointing out 0."}, {"owner": {"reputation": 7401, "user_id": 687190, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TWeNK.jpg?s=128&g=1", "display_name": "\u0395 \u0413 \u0418 \u0406 \u0418 \u041e", "link": "https://stackoverflow.com/users/687190/%ce%95-%d0%93-%d0%98-%d0%86-%d0%98-%d0%9e"}, "edited": false, "score": 0, "creation_date": 1575451967, "post_id": 47779959, "comment_id": 104567759, "body": "This is what you call the &quot;Hamming weight&quot; problem :)"}], "tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 12, "last_activity_date": 1513107157, "last_edit_date": 1513107157, "creation_date": 1513106044, "answer_id": 47779959, "question_id": 47779830, "link": "https://stackoverflow.com/questions/47779830/what-does-bitwise-operation-nn-1-do/47779959#47779959", "title": "What does bitwise operation n&amp;(n-1) do?", "body": "<p>That equation zeroes out the least significant non-zero bit in <code>n</code>.</p>\n\n<p>If we assume 8 bits, then here is the back of the envelop explanation. Let <code>n</code> be 70.</p>\n\n<pre><code>n       = 01000110\nn-1     = 01000101\n          --------\nn&amp;(n-1) = 01000100\n</code></pre>\n\n<p>As a consequence, if the result is 0, it means there was only one bit set in <code>n</code> originally, which means it was a power of 2 (or it was 0 to being with).</p>\n\n<p>If applied iteratively in a loop until <code>n</code> becomes 0, the number of iterations counts the number of bits set in <code>n</code> originally. However, most processors will have a built-in operation to do this for you.</p>\n\n<hr>\n\n<p>If bit-hacks interest you generally, searching this site for \"bithacks\" generates many hits.</p>\n"}], "owner": {"reputation": 197, "user_id": 8598843, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd4e52fed49ae83d586498d4bd6e7603?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Soni", "link": "https://stackoverflow.com/users/8598843/piyush-soni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1916, "favorite_count": 1, "accepted_answer_id": 47779959, "answer_count": 1, "score": 5, "last_activity_date": 1513107485, "creation_date": 1513105493, "last_edit_date": 1513107485, "question_id": 47779830, "link": "https://stackoverflow.com/questions/47779830/what-does-bitwise-operation-nn-1-do", "title": "What does bitwise operation n&amp;(n-1) do?", "body": "<p>I was trying to understand some code, wherein I found the statement:</p>\n\n<pre><code>n=n&amp;(n-1);\n</code></pre>\n\n<p>What does this do?</p>\n"}, {"tags": ["c", "pointers", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1513104896, "post_id": 47779615, "comment_id": 82520457, "body": "Some fundamental misunderstandings in the <code>removeFirst()</code> function: first, the variable <code>string</code> is local to that function, so changing it in the function will have no effect on the one in <code>main()</code>. Second, you can&#39;t compare strings with <code>==</code>, that just compares pointers. Third, even if you fixed those things, <code>string</code> in main is assigned to a literal, and string literals are read-only, so you&#39;d likely segfault.\\"}], "answers": [{"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 1, "last_activity_date": 1513105139, "last_edit_date": 1513105139, "creation_date": 1513104799, "answer_id": 47779654, "question_id": 47779615, "link": "https://stackoverflow.com/questions/47779615/character-pointer-arithmetic-in-main-vs-in-other-functions/47779654#47779654", "title": "Character Pointer Arithmetic in Main vs In Other Functions", "body": "<p>You are changing to the local variable. C is pass by value. A <code>char*</code> with same value as that of <code>string</code> is there in the called function <code>removeFirst()</code>. You make changes to it and then you expect the changes made on the copy to be reflected in the original variable. That's not going to happen here. That's why you don't get the same result as before case.</p>\n\n<p><code>string == \"\"</code> comparing two addresses not the content as you may have expected. </p>\n\n<p>You can make changes like this</p>\n\n<pre><code>removeFirst(&amp;string);\n\nvoid removeFirst(char **string) {\n  if (*string == NULL)\n    exit(1);\n  (*string)++;\n}\n</code></pre>\n\n<p>Then in <code>main()</code></p>\n\n<p><code>printf(\"%s\\n\", string);</code> outputs <code>udolph</code>.</p>\n\n<p>In this is case you pass the address of the pointer variable. You are now changing to the original variable by accessing the memory contained in the called function's local variable <code>string</code>. That is what retain the changes in <code>main()</code>.</p>\n"}], "owner": {"reputation": 432, "user_id": 8402427, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6377f77c32066029c46eed228e1e71e4?s=128&d=identicon&r=PG&f=1", "display_name": "DrJessop", "link": "https://stackoverflow.com/users/8402427/drjessop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "closed_date": 1513104803, "answer_count": 1, "score": -1, "last_activity_date": 1513105139, "creation_date": 1513104654, "question_id": 47779615, "link": "https://stackoverflow.com/questions/47779615/character-pointer-arithmetic-in-main-vs-in-other-functions", "closed_reason": "Duplicate", "title": "Character Pointer Arithmetic in Main vs In Other Functions", "body": "<p>I am working on a practice problem that asks me to remove the first character in a string. Ex. char *string = \"Rudolph\", after calling removeFirst(string), string now equals \"udolph\".</p>\n\n<p>I noticed, if I do it all in my main, I get the output \"udolph\". Here is my code:</p>\n\n<pre><code>int main() {\n  char *string = \"Rudolph\";\n  printf(\"%s\\n\", string);\n  //removeFirst(string);\n  string++;\n  printf(\"%s\\n\", string);\n  return 0;\n}\n</code></pre>\n\n<p>However, if I were to call another function, my output is Rudolph. Here again is my code:</p>\n\n<pre><code>void removeFirst(char *string) {\n  if (string == \"\" | string == NULL)\n    return;\n  string++;\n}\n\nint main() {\n  char *string = \"Rudolph\";\n  printf(\"%s\\n\", string);\n  removeFirst(string);\n  //string++;\n  printf(\"%s\\n\", string);\n  return 0;\n}\n</code></pre>\n\n<p>Given that I'm working with pointers, I thought that the changes I make in removeFirst should also make it to main. Why doesn't it work that way?</p>\n"}, {"tags": ["c", "strlen", "unsigned-integer", "size-t"], "comments": [{"owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "edited": false, "score": 2, "creation_date": 1513104615, "post_id": 47779514, "comment_id": 82520302, "body": "Why don&#39;t you try printing the value of <code>strlen(x) - strlen(y)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 4, "last_activity_date": 1513104632, "creation_date": 1513104632, "answer_id": 47779610, "question_id": 47779514, "link": "https://stackoverflow.com/questions/47779514/explaination-for-the-code/47779610#47779610", "title": "Explaination for the code", "body": "<p>Because <code>size_t</code> is unsigned in <code>C</code>. So the comparison being negative yields a positive number. (sign extended bits of signed number yields a large value in unsigned case). Then that value is compared with <code>0</code> - being true it enters the first condition. Outputs 3.</p>\n\n<p>Even if you remove unsigned from <code>C</code> that result of the <code>strlen</code> substraction yields a positive number much larger than 0. That's why you always get 3.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1513105030, "last_edit_date": 1513105030, "creation_date": 1513104694, "answer_id": 47779624, "question_id": 47779514, "link": "https://stackoverflow.com/questions/47779514/explaination-for-the-code/47779624#47779624", "title": "Explaination for the code", "body": "<blockquote>\n  <p>After removing \"unsigned\" still i got the output as 3.</p>\n</blockquote>\n\n<p>It is unimportant whether the variable <code>c</code> is declared as unsigned or signed</p>\n\n<pre><code>unsigned int c=0;\n</code></pre>\n\n<p>The problem is that the standard function <code>strlen</code> returns an object of the type <code>size_t</code> that is by definition is unsigned type. </p>\n\n<pre><code>size_t strlen(const char *s);\n</code></pre>\n\n<p>So in this expression</p>\n\n<pre><code>strlen(x)-strlen(y)\n</code></pre>\n\n<p>the result is interpreted as unsigned integer value. As <code>strlen( x )</code> is less than <code>strlen( y )</code> then you will get a very big unsigned value or at least a non-zero positive value.</p>\n\n<p>Instead you could write</p>\n\n<pre><code> if( strlen(x) &gt; strlen(y) )\n     len=strlen(x);\n else\n    len=strlen(y);\n</code></pre>\n\n<p>And it would be more correctly to declare the variable len as having the type <code>size_t</code>.</p>\n\n<pre><code>size_t len;\n//...\nprintf(\"%zu\\n\",len);\n        ^^^\n</code></pre>\n"}], "owner": {"reputation": 436, "user_id": 6166414, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vMyUUXTVfxs/AAAAAAAAAAI/AAAAAAAAABs/zGrSvTypWqU/photo.jpg?sz=128", "display_name": "Surya Lohia.", "link": "https://stackoverflow.com/users/6166414/surya-lohia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1513104990, "accepted_answer_id": 47779610, "answer_count": 2, "score": 0, "last_activity_date": 1513105120, "creation_date": 1513104335, "last_edit_date": 1513105120, "question_id": 47779514, "link": "https://stackoverflow.com/questions/47779514/explaination-for-the-code", "closed_reason": "Duplicate", "title": "Explaination for the code", "body": "<p>The output for the code is 3? Please explain.According to me it should be \n5.After removing \"unsigned\" still i got the output as 3.</p>\n\n<pre><code> #include&lt;stdio.h&gt;\n #include&lt;string.h&gt;\n void main(){\n    unsigned int c=0;\n    int len;\n    char x[20]=\"abc\";\n    char y[20]=\"defgh\";\n     if((strlen(x)-strlen(y))&gt;c)\n         len=strlen(x);\n     else\n        len=strlen(y);\n    printf(\"%d\",len);\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "buffer", "overflow"], "comments": [{"owner": {"reputation": 4974, "user_id": 2587816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0ec5b10cbc8a9a5b707ea67ea60f84d?s=128&d=identicon&r=PG", "display_name": "Jiminion", "link": "https://stackoverflow.com/users/2587816/jiminion"}, "edited": false, "score": 0, "creation_date": 1513102080, "post_id": 47778828, "comment_id": 82518961, "body": "If a is supposed to be 11999, what is that in hex?  And what chars would form that?"}, {"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "reply_to_user": {"reputation": 4974, "user_id": 2587816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0ec5b10cbc8a9a5b707ea67ea60f84d?s=128&d=identicon&r=PG", "display_name": "Jiminion", "link": "https://stackoverflow.com/users/2587816/jiminion"}, "edited": false, "score": 0, "creation_date": 1513102412, "post_id": 47778828, "comment_id": 82519160, "body": "So I did a conversion and found 11999 in hex is 0x2EDF. So when crafting my payload I should do something like echo -e -n &#39;XXeXXXXXXXX\\0x2EDF&#39; &gt; payload?"}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1513102476, "post_id": 47778828, "comment_id": 82519187, "body": "11999 is hex 2EDF. So you had to change the upper byte by &#39;.&#39; but the lower one is a special character (eg. the german &#39;&#223;&#39; in CP-1252)"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1513103480, "post_id": 47778828, "comment_id": 82519712, "body": "The code has undefined behavior trying to write non-null terminated char array using <code>%s</code>"}, {"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513103503, "post_id": 47778828, "comment_id": 82519723, "body": "Ah so I now see that you split it up like so &#39;2E&#39; and then &#39;DF&#39; with 2E = &#39;.&#39; and DF = &#39;&#223;&#39;. But when I try inputting . and &#223; as the last 2 chars, a changes into 10470190."}, {"owner": {"reputation": 4974, "user_id": 2587816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0ec5b10cbc8a9a5b707ea67ea60f84d?s=128&d=identicon&r=PG", "display_name": "Jiminion", "link": "https://stackoverflow.com/users/2587816/jiminion"}, "edited": false, "score": 0, "creation_date": 1513103608, "post_id": 47778828, "comment_id": 82519778, "body": "How many chars in an int?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1513103933, "post_id": 47778828, "comment_id": 82519945, "body": "<code>char array2[] = {&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;};</code> Do you know what happens when you call <code>printf</code> here =&gt;&gt; <code>printf(&quot;array2 = %s\\n&quot;, array2);</code> ?"}, {"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513104033, "post_id": 47778828, "comment_id": 82520005, "body": "I&#39;m not sure. Is it 4 since a int can hold 32 bits and 1 char is 8  bits?"}, {"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513104337, "post_id": 47778828, "comment_id": 82520162, "body": "Doesn&#39;t it just display what array2 currently holds in its 6 spots?"}, {"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513105085, "post_id": 47778828, "comment_id": 82520549, "body": "I am still lost, I feel very close though!"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1513105728, "post_id": 47778828, "comment_id": 82520892, "body": "Add  <code>printf(&quot;&amp;a=%p, &amp;c=%p, array2=%p, array=%p\\n&quot;, &amp;a, &amp;c, array2, array);</code> to your output.  The variables are most likely not placed where you expect."}, {"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513107523, "post_id": 47778828, "comment_id": 82521773, "body": "I tried adding that and now I see what I believe to be the addresses of where the variables are held?"}, {"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513110553, "post_id": 47778828, "comment_id": 82523351, "body": "I am stuck,I am still unsure of how to overwrite &#39;a&#39; using only 1 char to make it 11999"}, {"owner": {"reputation": 4974, "user_id": 2587816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0ec5b10cbc8a9a5b707ea67ea60f84d?s=128&d=identicon&r=PG", "display_name": "Jiminion", "link": "https://stackoverflow.com/users/2587816/jiminion"}, "edited": false, "score": 0, "creation_date": 1513113825, "post_id": 47778828, "comment_id": 82524890, "body": "int = 4 chars, so 11999 = 00002EDF in hex."}, {"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513117917, "post_id": 47778828, "comment_id": 82526526, "body": "Alright so I am understanding a little better I think. There are 15 bytes in total (8 bits each). So the first 10 chars I enter fill up array 1 with XXeX, the next 6 I enter fill up array 2 with XXXXXX. The next char I enter will replace variable &#39;C&#39; with whatever I put in as the 11th char, which is an &#39;X&#39;. The next on the stack is int &#39;a&#39; which is 4 bytes or 4 chars. I need to fill it with 00002EDF, or in char form (null null . &#223;). How do I go about doing this?"}, {"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513127998, "post_id": 47778828, "comment_id": 82529557, "body": "At this point I would like the correct answer and an explanation as to why it is what is, thanks"}, {"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513130333, "post_id": 47778828, "comment_id": 82530197, "body": "Can anyone provide the input and an explanation as to why it is that input? I have been trying this for 16 hours now stuck on this last part."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513121100, "post_id": 47782787, "comment_id": 82527779, "body": "Hello, thank you for your explanation, but I am still struggling. I am really just at wits end. I need to replace the last 4 bytes of data (int a) with 0000DF2E. I cannot for the life of me figure it out. I have tried inputting almost everything."}, {"owner": {"reputation": 838, "user_id": 5391191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-U8c9fH2K_MQ/AAAAAAAAAAI/AAAAAAAAAEo/uSAxoPsAvvs/photo.jpg?sz=128", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/5391191/jacob-h"}, "reply_to_user": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513121371, "post_id": 47782787, "comment_id": 82527867, "body": "@KevinJones are you on a big endian system? You should first try modifying the code I supplied to do what you want."}, {"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513122488, "post_id": 47782787, "comment_id": 82528174, "body": "I am on little endian"}, {"owner": {"reputation": 838, "user_id": 5391191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-U8c9fH2K_MQ/AAAAAAAAAAI/AAAAAAAAAEo/uSAxoPsAvvs/photo.jpg?sz=128", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/5391191/jacob-h"}, "reply_to_user": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513123412, "post_id": 47782787, "comment_id": 82528425, "body": "You should be able to copy/paste my code into yours then, replacing the scanf. You need the number 2EDF0000 because you are on little endian."}, {"owner": {"reputation": 838, "user_id": 5391191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-U8c9fH2K_MQ/AAAAAAAAAAI/AAAAAAAAAEo/uSAxoPsAvvs/photo.jpg?sz=128", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/5391191/jacob-h"}, "reply_to_user": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513128130, "post_id": 47782787, "comment_id": 82529590, "body": "If you add `printf(&quot;a: %p, arr: %p\\n&quot;, &amp;a, array);&quot; which address is higher?"}, {"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513128557, "post_id": 47782787, "comment_id": 82529703, "body": "The following prints      a: 0xbf8e5b2c   arr:0xbf8e5b32 how can i tell which is higher?"}, {"owner": {"reputation": 838, "user_id": 5391191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-U8c9fH2K_MQ/AAAAAAAAAAI/AAAAAAAAAEo/uSAxoPsAvvs/photo.jpg?sz=128", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/5391191/jacob-h"}, "reply_to_user": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513128880, "post_id": 47782787, "comment_id": 82529790, "body": "Then you cannot use this attack on this code. Notice how a is before array on the stack, this means that when you write too much into array, it won&#39;t bleed into a like you expect, it will bleed into a different part of your stack, which is why you get the exception in the image above. You should look into how memory is laid out before trying choice like this"}, {"owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513129139, "post_id": 47782787, "comment_id": 82529856, "body": "As mentioned above, it does seem to be overflowing into a after the 12th character. For example if the 12th character is an &#39;B&#39; &#39;a&#39; then becomes 66 or the decimal equivalent of char &#39;B&#39;"}, {"owner": {"reputation": 838, "user_id": 5391191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-U8c9fH2K_MQ/AAAAAAAAAAI/AAAAAAAAAEo/uSAxoPsAvvs/photo.jpg?sz=128", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/5391191/jacob-h"}, "reply_to_user": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "edited": false, "score": 0, "creation_date": 1513173980, "post_id": 47782787, "comment_id": 82550762, "body": "@KevinJones ah, that was my bad. I assumed the system architecture, something I specifically warn about in my own post. I have updated my code and added a breakdown of the string to my answer."}], "tags": [], "owner": {"reputation": 838, "user_id": 5391191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-U8c9fH2K_MQ/AAAAAAAAAAI/AAAAAAAAAEo/uSAxoPsAvvs/photo.jpg?sz=128", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/5391191/jacob-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1513181381, "last_edit_date": 1513181381, "creation_date": 1513118648, "answer_id": 47782787, "question_id": 47778828, "link": "https://stackoverflow.com/questions/47778828/simple-buffer-overflow-in-c/47782787#47782787", "title": "Simple Buffer Overflow in C", "body": "<p>This is an interesting exercise. Because you are invoking undefined behavior, there isn't exactly one answer to your question, it has to be evaluated on a case-by-case basis. This attack may not even work on some machines.</p>\n\n<p>First, for this kind of test you should be using printf to see where the data is:</p>\n\n<pre><code>printf(\"a is at %p\\n\", &amp;a);\nprintf(\"array is at %p\\n\", array);\n...\n</code></pre>\n\n<p>This should give you an idea of how many bytes you need to offset. Next determine whether you are working on a little-endian or big-endian system. If you are working on little-endian then 11999 is 0xDF2E0000, if you are using big-endian it is backwards.</p>\n\n<p>So given your program on a little-endian system, assuming all data is in the correct order in memory for it to work, and the integer is 4 bytes, you need the string \"--\" + (0x99-0x34) + \"-...X..X\" + 0xDF2E0000</p>\n\n<p><strong>EDIT:</strong> The reason for this string is as follows:</p>\n\n<ul>\n<li>first 4 bytes: \"--e-\" fills in your input array</li>\n<li>Next 6 bytes: \"...X..X\" fills in array2 and c, with correct placement of X's</li>\n<li>Last 4 bytes: 0xDF2E0000 fills in your int (little endian) with 11999</li>\n</ul>\n\n<p>You can test this by adding:</p>\n\n<pre><code>#include &lt;string.h&gt;\nchar str[] = {16};\nsprintf(str, \"--%c-...X..X%c%c\\0\\0\", 0x99 - 0x34, 0xDF, 0x2E);\nmemcpy(array, str, 14);\nprintf(\"The string is: \\\"%s\\\"\", str);\n</code></pre>\n\n<p>In place of your scanf. Obviously you can figure out the characters associated with those values and paste them in, but this is the fastest way to get the correct data.</p>\n\n<p>Of course, this is subjective to change based on system, and the code I have above may not even work on your machine. This is still a very real thing, and a good demonstration of why you should always limit the number of characters you are reading and writing, as well as make sure you use proper ending characters.</p>\n\n<p>If I missed any assumptions/factors above I would appreciate if someone lets me know so I can add them.</p>\n"}], "owner": {"reputation": 3, "user_id": 9090172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e758bee301ea764ef6a6ba8d92cd4?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/9090172/kevin-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1031, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1513181381, "creation_date": 1513101548, "last_edit_date": 1513105092, "question_id": 47778828, "link": "https://stackoverflow.com/questions/47778828/simple-buffer-overflow-in-c", "title": "Simple Buffer Overflow in C", "body": "<p>So I am doing an excercise where I am attempting to get the following program to output Welcome to Overflow by changing the relevant variables using a buffer overflow. Here is the code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n  int a = 10;\n  char c = 'X';\n  char array2[] = {'A', 'B', 'C', 'D', 'E', 'F'};\n  char array[4];\n  printf(\"please enter: \\n\");\n  scanf(\"%s\", array);\n\n  printf(\"c = %c\\n\", c);\n  printf(\"a = %d\\n\", a);\n  printf(\"array = %s\\n\", array);\n  printf(\"array2 = %s\\n\", array2);\n  printf(\"array[2] = %x\\n\", *(array + 2));\n  printf(\"array2[3] = %x\\n\", array2[3]);\n\n\n  if (c == 'X' &amp;&amp; a == 11999 &amp;&amp; *(array + 2) == 0x99 - 0x34 &amp;&amp; array2[3] == 'X') {\n    printf(\"Welcome to overflow!\\n\");\n  } else {\n    printf(\"This is normal output!\\n\");\n  }\n}\n</code></pre>\n\n<p>What I need is for <code>c == 'X' &amp;&amp; a == 11999 &amp;&amp; *(array + 2) == 0x99 - 0x34 &amp;&amp; array2[3] == 'X'</code>.<br>\nSo I have gotten every variable to be what I want it to be except one.<br>\nBy inputting the following I am able to change them. I input <em>\"XXeXXXXXXXXB\"</em> This changes <code>array[2]</code> to be <em>65</em>, <code>array2[3]</code> to be <em>X</em>, <code>c</code> to <em>'X'</em> but the variable I cannot change is 'a'. By making the <em>12th</em> char of input <code>a</code> <em>B</em> it changes <code>a</code> to '66', which is the decimal equivalent of the char 'B'.   If I input a 13th char, variable <code>a</code> will then be changed to the decimal equivelent of the char * 257. Since <code>a</code> needs to be 11999 I am lost.<br>\nI tried dividing 11999 by 257 but it comes out to 46.6 so there is no char with that value, I even tried the char closest to 46.6 which were '.' and '/' but then <code>a</code> is too big or too small.</p>\n\n<p>What char or chars can I make the 12th and 13th input in order to change <code>a</code> into 11999? Also if you do not want to give me the flat out answer I would appreciate a point in the right direction.</p>\n"}, {"tags": ["c", "global-variables", "constants"], "comments": [{"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 1, "creation_date": 1513102456, "post_id": 47778746, "comment_id": 82519179, "body": "how about this: <code>strchr(c, &quot;diouxX&quot;) != 0</code>; also there is a set of standard functions in string.h, i.e. <code>isdigit</code> which you can use instead of is_sp_integer."}, {"owner": {"reputation": 156, "user_id": 8973816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dcb757ba9ad39d96bfdcb6cca431c35?s=128&d=identicon&r=PG&f=1", "display_name": "cbaillat", "link": "https://stackoverflow.com/users/8973816/cbaillat"}, "reply_to_user": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1513102546, "post_id": 47778746, "comment_id": 82519226, "body": "I cannot really use standard libraries apart from malloc, free, exit and write. But sure, I can code it and do that. Thanks for this idea."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1513106239, "post_id": 47778746, "comment_id": 82521122, "body": "@Serge Note concerning <code>strchr(c, &quot;diouxX&quot;) != 0</code>, that when <code>c==0</code>, <code>strchr(c, &quot;diouxX&quot;)</code> returns a non-NULL pointer.  Should not be a problem to prevent <code>c== 0</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1513106404, "post_id": 47778746, "comment_id": 82521209, "body": "@cbaillat <a href=\"https://stackoverflow.com/q/28947528/2410359\">How to check that two format strings are compatible?</a>  goes through many of the same things."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1513106695, "post_id": 47778746, "comment_id": 82521360, "body": "<code>const char  g_sp_integer[]</code> --&gt; <code>static const char  g_sp_integer[]</code>, now <code>g_sp_integer[]</code> only has file scope."}], "answers": [{"comments": [{"owner": {"reputation": 156, "user_id": 8973816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dcb757ba9ad39d96bfdcb6cca431c35?s=128&d=identicon&r=PG&f=1", "display_name": "cbaillat", "link": "https://stackoverflow.com/users/8973816/cbaillat"}, "edited": false, "score": 0, "creation_date": 1513103133, "post_id": 47779142, "comment_id": 82519524, "body": "It is only used there as for now but i I will probably need to do multiple checks, as I will need to parse the tags, etc. Thanks for the suggestion though, maybe I&#39;ll try to do it that way. Thanks!"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 156, "user_id": 8973816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dcb757ba9ad39d96bfdcb6cca431c35?s=128&d=identicon&r=PG&f=1", "display_name": "cbaillat", "link": "https://stackoverflow.com/users/8973816/cbaillat"}, "edited": false, "score": 0, "creation_date": 1513103206, "post_id": 47779142, "comment_id": 82519574, "body": "If you need to use it in multiple functions, define it at file scope with <code>static</code> and remove the <code>extern</code> declaration from the header, that way it&#39;s not visible in other source files."}, {"owner": {"reputation": 156, "user_id": 8973816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dcb757ba9ad39d96bfdcb6cca431c35?s=128&d=identicon&r=PG&f=1", "display_name": "cbaillat", "link": "https://stackoverflow.com/users/8973816/cbaillat"}, "edited": false, "score": 0, "creation_date": 1513241139, "post_id": 47779142, "comment_id": 82579423, "body": "Thanks,  I will do that!"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1513102952, "creation_date": 1513102952, "answer_id": 47779142, "question_id": 47778746, "link": "https://stackoverflow.com/questions/47778746/alternatives-to-my-global-variables-for-constant-arrays/47779142#47779142", "title": "Alternatives to my global variables for constant arrays?", "body": "<p><code>g_sp_integer</code> is only used inside the <code>is_sp_integer</code> function, so define it there:</p>\n\n<pre><code>static int32_t  is_sp_integer(char c)\n{\n    const char  g_sp_integer[] = {\n        'd',    //signed decimal int\n        'i',    //signed decimal int\n        'o',    //unsigned octal\n        'u',    //unsigned decimal int\n        'x',    //unsigned hex int\n        'X',    //unsigned hex int (uppercase)\n        '\\0'\n    };\n\n    uint32_t    i;\n\n    while (g_sp_integer[i] != '\\0')\n    {\n        if (g_sp_integer[i] == c)\n            return (i);\n        ++i;\n    }\n    return (FAILURE);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 156, "user_id": 8973816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dcb757ba9ad39d96bfdcb6cca431c35?s=128&d=identicon&r=PG&f=1", "display_name": "cbaillat", "link": "https://stackoverflow.com/users/8973816/cbaillat"}, "edited": false, "score": 0, "creation_date": 1513113849, "post_id": 47781616, "comment_id": 82524900, "body": "Cool idea ! I&#39;ll definitely try to implement that and check if it&#39;s a bit faster!"}], "tags": [], "owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "is_accepted": true, "score": 0, "last_activity_date": 1513113185, "creation_date": 1513113185, "answer_id": 47781616, "question_id": 47778746, "link": "https://stackoverflow.com/questions/47778746/alternatives-to-my-global-variables-for-constant-arrays/47781616#47781616", "title": "Alternatives to my global variables for constant arrays?", "body": "<p>Here is a bit different implementation utilizing pointers. I think that it is a bit more more efficient than with arrays.</p>\n\n<pre><code>const char  *g_sp_integer= \"diouxX\";\nstatic int32_t  is_sp_integer(char c)\n{\n    const char *p = g_sp_integer;\n    while (*p) {\n        if (*p == c)\n            return (p - g_sp_integer);\n        p++;\n    }\n    return (FAILURE);\n}\n</code></pre>\n"}], "owner": {"reputation": 156, "user_id": 8973816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dcb757ba9ad39d96bfdcb6cca431c35?s=128&d=identicon&r=PG&f=1", "display_name": "cbaillat", "link": "https://stackoverflow.com/users/8973816/cbaillat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "accepted_answer_id": 47781616, "answer_count": 2, "score": 0, "last_activity_date": 1513241675, "creation_date": 1513101286, "last_edit_date": 1513241675, "question_id": 47778746, "link": "https://stackoverflow.com/questions/47778746/alternatives-to-my-global-variables-for-constant-arrays", "title": "Alternatives to my global variables for constant arrays?", "body": "<p>I have a project of recreating printf in my school.</p>\n\n<p>I don't want to check the format specifiers for characters all the time in my code, as I find it messy, and ugly.</p>\n\n<p>As for now, I have found a way by creating some global constant array, and checking using those. But I don't like the idea of having so many global variables in my code as well.</p>\n\n<p>Is it one of those cases were global variables are ok? Or should I use another method to get what I want?</p>\n\n<p>Here is how I'm starting:</p>\n\n<h1>Global const array</h1>\n\n<pre><code>const char  g_sp_integer[] = {\n    'd',    //signed decimal int\n    'i',    //signed decimal int\n    'o',    //unsigned octal\n    'u',    //unsigned decimal int\n    'x',    //unsigned hex int\n    'X',    //unsigned hex int (uppercase)\n    '\\0'\n};\n</code></pre>\n\n<h1>My header</h1>\n\n<pre><code>#ifndef  FT_PRINTF_H\n# define  FT_PRINTF_H\n\n# include &lt;stdarg.h&gt;\n# include &lt;stdint.h&gt;\n# include &lt;stdlib.h&gt;\n\n# include \"libft.h\"\n\n# define SUCCESS (int32_t)0\n# define FAILURE (int32_t)-1\n\n/*\n** Those extern definitions are used to check the specifier flags\n*/\n\nextern const char   *g_sp_integer;\n\nint ft_printf(const char *format, ...);\n\n#endif\n</code></pre>\n\n<h1>And my printf function</h1>\n\n<pre><code>#include \"ft_printf.h\"\n\nstatic int32_t  is_sp_integer(char c)\n{\n    uint32_t    i;\n\n    while (g_sp_integer[i] != '\\0')\n    {\n        if (g_sp_integer[i] == c)\n            return (i);\n        ++i;\n    }\n    return (FAILURE);\n}\n\nint ft_printf(const char *format, ...)\n{\n    va_list ap;\n    char    *tmp;\n    int32_t sp_type;\n\n    tmp = format;\n    va_start(ap, format);\n    while (tmp != '\\0')\n    {\n        if (tmp != '%')\n        {\n            ft_putchar(tmp);\n            continue;\n        }\n        if ((sp_type = is_sp_integer(++tmp)) != FAILURE)\n            ;   //parse_flag(sp_type);\n        //continue checking the type of the specifier\n    }\n    va_end(ap);\n    return (SUCCESS);\n}\n</code></pre>\n\n<h2>What I want to avoid:</h2>\n\n<p>Those are just bare-bones prototype, but I would like to know if there is a proper way to make my function as clean as that. Which means, in my opinion, that I'd like to avoid doing the check like this, if possible:</p>\n\n<pre><code>if (c == 'd' || c == 'i')\n    //manage the integer flag\nelse if (c == 'o')\n    //manage the octal flag, etc.\n</code></pre>\n\n<p>If it not possible and the best way is the one I'd like to avoid, please, let me know!</p>\n\n<p>Thank you all for your patience, as finding good practices can sometimes be hard!</p>\n\n<h1>EDIT:</h1>\n\n<h2>Solution I used:</h2>\n\n<p>While the first solution has the global answer to what I should have done in this case (which is using a static variable in that file), I have ended doing what was suggested in the second answer, as it fits my needs, and avoid using static or global variables.</p>\n\n<p>Here is my function's code:</p>\n\n<pre><code>static int32_t is_sp_integer(char c) {\n  const char    *sp_integer;\n  const char    *sp_ptr;\n\n  sp_integer = \"dDioOuUxX\";\n  sp_ptr = sp_integer;\n  while (*sp_ptr != '\\0')\n  {\n    if (*sp_ptr == c)\n      return (sp_ptr - sp_integer);\n    ++sp_ptr;\n  }\n  return (FAILURE);\n}\n</code></pre>\n\n<p>Thanks to all of you!</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513101497, "post_id": 47778690, "comment_id": 82518671, "body": "No it is not correct and your compiler should have warned you aboit it. (If not, get a better compiler). Read the documentation and see what the two parameters of calloc mean."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1513101665, "post_id": 47778690, "comment_id": 82518754, "body": "In addition, <code>frutta[i]=(char *)calloc(n,sizeof(char))</code> is dubious. There&#39;s no natural link between the number of strings and the length of each string."}], "answers": [{"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 0, "last_activity_date": 1513102114, "last_edit_date": 1513102114, "creation_date": 1513101438, "answer_id": 47778795, "question_id": 47778690, "link": "https://stackoverflow.com/questions/47778690/assigning-memory-to-array-of-double-pointer-to-string/47778795#47778795", "title": "Assigning memory to array of double pointer to string?", "body": "<pre><code>//here is correct?\nfor (i=0;i&lt;n;i++)\n</code></pre>\n\n<p>Nope this is not. To make it right you have to allocate memory for <code>n</code> pointers. (You didn't do the first <code>calloc</code> successfully).</p>\n\n<pre><code>frutta=calloc(n,sizeof(char*))\n</code></pre>\n\n<p>Syntax was wrong earlier. You have got an warning/error.</p>\n\n<p>Make sure to compiler the programs with all the <code>-Wall</code> flag. And don't forget to check every warning you get. That will help you on these cases.</p>\n\n<hr>\n\n<p>From standard <strong><a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.22.3.2\" rel=\"nofollow noreferrer\">7.22.3.2</a></strong></p>\n\n<pre><code>void *calloc(size_t nmemb, size_t size);\n</code></pre>\n\n<blockquote>\n  <p>The <code>calloc</code> function allocates space for an <strong>array of nmemb objects,\n  each of whose size is size</strong>. The space is initialized to all bits zero</p>\n</blockquote>\n\n<p>Two more things:-</p>\n\n<ol>\n<li><p>Dont cast the return value of <code>calloc</code>.</p></li>\n<li><p>Check the return value of <code>calloc</code>.</p></li>\n<li><p>Free the allocated memory when you are done working with it.</p></li>\n</ol>\n\n<p>Yes! I have made one extra point. </p>\n"}, {"tags": [], "owner": {"reputation": 338, "user_id": 1551623, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb239eb5ba65bc077f952a41248347a3?s=128&d=identicon&r=PG", "display_name": "Nodarius", "link": "https://stackoverflow.com/users/1551623/nodarius"}, "is_accepted": false, "score": 0, "last_activity_date": 1513102049, "last_edit_date": 1513102049, "creation_date": 1513101470, "answer_id": 47778809, "question_id": 47778690, "link": "https://stackoverflow.com/questions/47778690/assigning-memory-to-array-of-double-pointer-to-string/47778809#47778809", "title": "Assigning memory to array of double pointer to string?", "body": "<pre><code>frutta=(char **)calloc(frutta,sizeof(char*));\n</code></pre>\n\n<p>It's not correct. Compiler warnings exist for a reason. <strong>calloc</strong> needs integer as a first argument, as described:</p>\n\n<blockquote>\n  <p>void *calloc(size_t nmemb, size_t size);</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1513101633, "creation_date": 1513101633, "answer_id": 47778853, "question_id": 47778690, "link": "https://stackoverflow.com/questions/47778690/assigning-memory-to-array-of-double-pointer-to-string/47778853#47778853", "title": "Assigning memory to array of double pointer to string?", "body": "<p>This is definitely not correct. The first parameter to <code>calloc</code> is the number of members and you're passing into it the pointer, which at this point won't have a defined value.</p>\n\n<pre><code>frutta=(char **)calloc(frutta,sizeof(char*));\n</code></pre>\n\n<p>Instead, you want to use <code>n</code> that you've just read in.</p>\n\n<pre><code>frutta=calloc(n,sizeof(char*));\n</code></pre>\n\n<p>Secondly, for the next level down, you probably want something a lot bigger than <code>n</code> if you're going to be storing actual strings in there. Your example of 4 would only give you space to store strings that are 3 characters long as you need to include space for the NUL terminating character.</p>\n\n<pre><code>frutta[i]=(char *)calloc(n,sizeof(char));\n</code></pre>\n\n<p>You also shouldn't cast the return value of <code>calloc</code> (or <code>malloc</code>) as it's not needed and can hide errors in your code.</p>\n"}], "owner": {"reputation": 13, "user_id": 9090125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bc72895148c02a97d5eb10b5e1444cb?s=128&d=identicon&r=PG&f=1", "display_name": "Tsuhirito", "link": "https://stackoverflow.com/users/9090125/tsuhirito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1513102114, "creation_date": 1513101121, "question_id": 47778690, "link": "https://stackoverflow.com/questions/47778690/assigning-memory-to-array-of-double-pointer-to-string", "title": "Assigning memory to array of double pointer to string?", "body": "<p>Sorry for my bad english but I have a question for you. I wrote a program with array of double pointer to string for save memory but i have a question. In  calloc for col name pointer is correct? With 'frutta' the program works. Thanks in advance for your help!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nvoid inserimento (char **, int);\nvoid output (char **, int);\nint main ()\n{\nchar **frutta;\nint n,i;\nprintf(\"Quanta frutta vuoi inserire?\\n\");\nscanf(\"%d\",&amp;n); //with this I write here number of elements \n//(with 4 for example I write 4 fruit names)\nfrutta=(char **)calloc(frutta,sizeof(char*));//calloc for col. Name pointer \n//here is correct?\nfor (i=0;i&lt;n;i++)\nfrutta[i]=(char *)calloc(n,sizeof(char));//calloc for row\ninserimento (frutta,n);\noutput (frutta,n);\nfor (i=0;i&lt;n;i++)\nfree(frutta[i]);\nfree(frutta);\n}\nvoid inserimento (char **frutta, int n)\n{\nint i;\nfor (i=0;i&lt;n;i++)\nscanf(\"%s\",frutta[i]);//here add name fruits\n}\nvoid output (char **frutta, int n)\n{\nint i;\nfor (i=0;i&lt;n;i++)\nprintf(\"%s\",frutta[i]);//here print name fruits\n}\n</code></pre>\n"}, {"tags": ["c", "xcode"], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1513101393, "post_id": 47778702, "comment_id": 82518616, "body": "@AbdirahmanMohamed no compiler warning like <i>&#39;==&#39;: operator has no effect; did you intend &#39;=&#39;?</i>"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1513101422, "post_id": 47778702, "comment_id": 82518638, "body": "@WeatherVane.: I guess OP didn&#39;t notice it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1513101494, "post_id": 47778702, "comment_id": 82518668, "body": "oops changed to a different warning - but still a warning."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1513101528, "post_id": 47778702, "comment_id": 82518685, "body": "@WeatherVane.: I meant in general..for this compiler throws an warning AFAIR."}, {"owner": {"reputation": 3, "user_id": 5663805, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QY0byzf3eTc/AAAAAAAAAAI/AAAAAAAAAHU/6eZ9QRVAteM/photo.jpg?sz=128", "display_name": "Abdirahman Mohamed", "link": "https://stackoverflow.com/users/5663805/abdirahman-mohamed"}, "edited": false, "score": 0, "creation_date": 1513101837, "post_id": 47778702, "comment_id": 82518848, "body": "@coderredoc Thanks for your response. I did the changes that you mentioned in your answer but the program is still not saving the inputs"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 3, "user_id": 5663805, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QY0byzf3eTc/AAAAAAAAAAI/AAAAAAAAAHU/6eZ9QRVAteM/photo.jpg?sz=128", "display_name": "Abdirahman Mohamed", "link": "https://stackoverflow.com/users/5663805/abdirahman-mohamed"}, "edited": false, "score": 0, "creation_date": 1513102084, "post_id": 47778702, "comment_id": 82518966, "body": "@AbdirahmanMohamed.: By the way you are writing to the same file from which you read. That is what you want?"}, {"owner": {"reputation": 3, "user_id": 5663805, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QY0byzf3eTc/AAAAAAAAAAI/AAAAAAAAAHU/6eZ9QRVAteM/photo.jpg?sz=128", "display_name": "Abdirahman Mohamed", "link": "https://stackoverflow.com/users/5663805/abdirahman-mohamed"}, "edited": false, "score": 0, "creation_date": 1513102518, "post_id": 47778702, "comment_id": 82519206, "body": "@coderredoc yes i want the program to read from the same file."}, {"owner": {"reputation": 3, "user_id": 5663805, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QY0byzf3eTc/AAAAAAAAAAI/AAAAAAAAAHU/6eZ9QRVAteM/photo.jpg?sz=128", "display_name": "Abdirahman Mohamed", "link": "https://stackoverflow.com/users/5663805/abdirahman-mohamed"}, "edited": false, "score": 0, "creation_date": 1513103237, "post_id": 47778702, "comment_id": 82519588, "body": "@coderredoc precisely. is that wrong? or is there a better way that i can save my input and read them when i run the program again?"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 3, "user_id": 5663805, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QY0byzf3eTc/AAAAAAAAAAI/AAAAAAAAAHU/6eZ9QRVAteM/photo.jpg?sz=128", "display_name": "Abdirahman Mohamed", "link": "https://stackoverflow.com/users/5663805/abdirahman-mohamed"}, "edited": false, "score": 1, "creation_date": 1513103325, "post_id": 47778702, "comment_id": 82519638, "body": "@AbdirahmanMohamed.: Bigger question is how do you check the file is not saved? I mean it&#39;s the same file as before. And you put it in the file the same way. So how you say that it failed?"}, {"owner": {"reputation": 3, "user_id": 5663805, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QY0byzf3eTc/AAAAAAAAAAI/AAAAAAAAAHU/6eZ9QRVAteM/photo.jpg?sz=128", "display_name": "Abdirahman Mohamed", "link": "https://stackoverflow.com/users/5663805/abdirahman-mohamed"}, "edited": false, "score": 0, "creation_date": 1513106838, "post_id": 47778702, "comment_id": 82521429, "body": "@coderredoc what i am trying to say is that when i reboot my program all the input are no longer there. so there must be something wrong with file functions. right?"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 3, "user_id": 5663805, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QY0byzf3eTc/AAAAAAAAAAI/AAAAAAAAAHU/6eZ9QRVAteM/photo.jpg?sz=128", "display_name": "Abdirahman Mohamed", "link": "https://stackoverflow.com/users/5663805/abdirahman-mohamed"}, "edited": false, "score": 0, "creation_date": 1513107083, "post_id": 47778702, "comment_id": 82521546, "body": "@AbdirahmanMohamed.: Well check one thing, write to a different file first and check how it works. You will get a better idea."}, {"owner": {"reputation": 3, "user_id": 5663805, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QY0byzf3eTc/AAAAAAAAAAI/AAAAAAAAAHU/6eZ9QRVAteM/photo.jpg?sz=128", "display_name": "Abdirahman Mohamed", "link": "https://stackoverflow.com/users/5663805/abdirahman-mohamed"}, "edited": false, "score": 0, "creation_date": 1513115775, "post_id": 47778702, "comment_id": 82525694, "body": "@coderredoc did u find any other mistake that would make the file i/o not work properly?"}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 3, "last_activity_date": 1513102268, "last_edit_date": 1513102268, "creation_date": 1513101154, "answer_id": 47778702, "question_id": 47778630, "link": "https://stackoverflow.com/questions/47778630/my-c-programmingworking/47778702#47778702", "title": "My C Programmingworking", "body": "<pre><code>fp==fopen(\"minFil.txt\",\"r\")\n</code></pre>\n\n<p>This is the bug.</p>\n\n<pre><code>fp=fopen(\"minFil.txt\",\"r\")\n</code></pre>\n\n<p>will be the correct way.</p>\n\n<p>You can do it simply like this</p>\n\n<pre><code>fp=fopen(\"minFil.txt\",\"r\");\nif( fp == NULL ){\n// error\n}\nelse{\n// do cool stuff\n}\n</code></pre>\n\n<p>This is much more readable. Less error prone.</p>\n\n<p>Also op is writing to the same file from which content was read. maybe the file where it is to be written is different.</p>\n"}], "owner": {"reputation": 3, "user_id": 5663805, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QY0byzf3eTc/AAAAAAAAAAI/AAAAAAAAAHU/6eZ9QRVAteM/photo.jpg?sz=128", "display_name": "Abdirahman Mohamed", "link": "https://stackoverflow.com/users/5663805/abdirahman-mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513436149, "creation_date": 1513100915, "last_edit_date": 1513436149, "question_id": 47778630, "link": "https://stackoverflow.com/questions/47778630/my-c-programmingworking", "title": "My C Programmingworking", "body": "<p>And the two functions are: </p>\n\n<pre><code>void readFromFile(char file[], int antal_varor, struct storagemanipulation \n*inventory)\n{\n</code></pre>\n"}, {"tags": ["c", "data-structures"], "comments": [{"owner": {"reputation": 5511, "user_id": 4516316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBirF.jpg?s=128&g=1", "display_name": "Arun A S", "link": "https://stackoverflow.com/users/4516316/arun-a-s"}, "edited": false, "score": 0, "creation_date": 1513100137, "post_id": 47778381, "comment_id": 82517943, "body": "look carefully. <code>head</code> is declared <code>NULL</code> at first, but later there is <code>*n=new</code>, which is assigning <code>head</code> the address to the first node"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1513100217, "post_id": 47778381, "comment_id": 82517993, "body": "Those aren&#39;t definitions - those are assignments."}, {"owner": {"reputation": 79, "user_id": 6771125, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b885b5d002b494cab61221663f4b5db?s=128&d=identicon&r=PG&f=1", "display_name": "cherrywrestler", "link": "https://stackoverflow.com/users/6771125/cherrywrestler"}, "edited": false, "score": 0, "creation_date": 1513100233, "post_id": 47778381, "comment_id": 82518000, "body": "i want to know why we are not using malloc in head assignment case"}, {"owner": {"reputation": 601, "user_id": 8150130, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1629543837056783/picture?type=large", "display_name": "Treyten Carey", "link": "https://stackoverflow.com/users/8150130/treyten-carey"}, "edited": false, "score": 0, "creation_date": 1513100315, "post_id": 47778381, "comment_id": 82518044, "body": "But you are using malloc in this case"}], "answers": [{"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 0, "last_activity_date": 1513100542, "last_edit_date": 1513100542, "creation_date": 1513100210, "answer_id": 47778435, "question_id": 47778381, "link": "https://stackoverflow.com/questions/47778381/why-we-are-defining-head-node-and-new-node-differently-in-linked-list/47778435#47778435", "title": "Why we are defining head node and new node differently in linked list", "body": "<pre><code>struct node* head = NULL;\n</code></pre>\n\n<p>Because <code>head</code> is there to simply keeping track of the <code>head</code> of the list nothing else. Now don't the new node does the same?</p>\n\n<p>yes it does. it keeps track of the memory that you allocate using <code>malloc</code> and then  you point it out with subsequent node's <code>next</code> attribute.</p>\n\n<p><code>head</code> is of same type as <code>newnode</code> and both are same functonally. but we put a different meaning to <code>head</code> in that - we are making it point to the <code>head</code> of th list rather than making it a local variable which we can throw away.</p>\n\n<h3>Then also why <code>head = NULL</code>?</h3>\n\n<p>Ah! that's because we always create a node and make it's next attribute to point to the current <code>head</code> and then we change head to make the new node part of our linked list.</p>\n\n<p>Initially the first node should be</p>\n\n<pre><code>+----+\n|  +------+\n+----+    |\n          V\n         NULL (Well to make this NULL we just make head = NULL initially)\n</code></pre>\n\n<h3>i want to know why we are not using malloc in head assignment case..</h3>\n\n<p>Because it's not needed - as simple as that. Why should we allocate an extra memory space and then assign it to <code>head</code> when the purpose of <code>head</code> is to just point to already allocated node. And when we add another extra node we add it to the <code>head</code> of the linked list and make it head. it's nothing other than pointing to the beginning of the list. That's it.</p>\n\n<hr>\n\n<p><code>new</code> is not a good variable name. Try some good one. Think a bit before naming a variable it will save you a lot of time in future.</p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 9057961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b1309d563bd60c4721c7016a1153df?s=128&d=identicon&r=PG", "display_name": "Shahrukh Shaikh", "link": "https://stackoverflow.com/users/9057961/shahrukh-shaikh"}, "is_accepted": false, "score": 0, "last_activity_date": 1513100999, "creation_date": 1513100999, "answer_id": 47778654, "question_id": 47778381, "link": "https://stackoverflow.com/questions/47778381/why-we-are-defining-head-node-and-new-node-differently-in-linked-list/47778654#47778654", "title": "Why we are defining head node and new node differently in linked list", "body": "<p>Because when you declare head it doesn't have anything to point to yet, it indicates the list is empty , as soon as data is added it can point to the first node in the list.</p>\n"}], "owner": {"reputation": 79, "user_id": 6771125, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b885b5d002b494cab61221663f4b5db?s=128&d=identicon&r=PG&f=1", "display_name": "cherrywrestler", "link": "https://stackoverflow.com/users/6771125/cherrywrestler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 47778435, "answer_count": 2, "score": 0, "last_activity_date": 1513100999, "creation_date": 1513099991, "question_id": 47778381, "link": "https://stackoverflow.com/questions/47778381/why-we-are-defining-head-node-and-new-node-differently-in-linked-list", "title": "Why we are defining head node and new node differently in linked list", "body": "<pre><code>struct node\n{\n    int data;\n    struct node *next;\n\n}; \n\n\n\n  void addstart (struct node **n, int new_data){\n        struct node *new = (struct node*)malloc(sizeof(struct node));\n        new-&gt;data=new_data;\n        new-&gt;next=*n;\n        *n= new;\n    }\n\n\nint main(){\n    struct node* head = NULL;\n    addstart(&amp;head,5); \n    return 0;\n}\n</code></pre>\n\n<p>i just want to know if head_node is also a new_node and both are same data type struct node then why we are defining it simply as </p>\n\n<pre><code>struct node* head = NULL;\n</code></pre>\n\n<p>and other nodes as:</p>\n\n<pre><code>struct node *new = (struct node*)malloc(sizeof(struct node));\n</code></pre>\n"}]