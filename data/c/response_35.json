[{"tags": ["c", "arrays", "struct", "rust"], "comments": [{"owner": {"reputation": 3932, "user_id": 233981, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/26b77ef1ab3e3df3df030435aea70568?s=128&d=identicon&r=PG", "display_name": "srking", "link": "https://stackoverflow.com/users/233981/srking"}, "edited": false, "score": 0, "creation_date": 1441844226, "post_id": 32490756, "comment_id": 52842601, "body": "possible duplicate of: <a href=\"http://stackoverflow.com/questions/31360993/what-is-the-proper-way-to-initialize-a-fixed-length-array\" title=\"what is the proper way to initialize a fixed length array\">stackoverflow.com/questions/31360993/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11705, "user_id": 2765603, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/WkhcQ.jpg?s=128&g=1", "display_name": "llogiq", "link": "https://stackoverflow.com/users/2765603/llogiq"}, "edited": false, "score": 0, "creation_date": 1441878750, "post_id": 32491644, "comment_id": 52856774, "body": "You should also note that it&#39;s customary to start type names in uppercase."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 11705, "user_id": 2765603, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/WkhcQ.jpg?s=128&g=1", "display_name": "llogiq", "link": "https://stackoverflow.com/users/2765603/llogiq"}, "edited": false, "score": 0, "creation_date": 1441888738, "post_id": 32491644, "comment_id": 52863508, "body": "@llogiq: I&#39;ll edit the code at least, the remark itself would be better as a comment on the question."}, {"owner": {"reputation": 6841, "user_id": 1190965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3e74ed8e572542a718df5f15ead40581?s=128&d=identicon&r=PG", "display_name": "nodakai", "link": "https://stackoverflow.com/users/1190965/nodakai"}, "reply_to_user": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1441889230, "post_id": 32491644, "comment_id": 52863826, "body": "@MatthieuM. rustc would have warned you if you were bothered to actually compile this code.  Also <code>const</code> item <code>str</code> should also be changed to <code>STR</code>, again according to rustc lint messages."}], "tags": [], "owner": {"reputation": 6841, "user_id": 1190965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3e74ed8e572542a718df5f15ead40581?s=128&d=identicon&r=PG", "display_name": "nodakai", "link": "https://stackoverflow.com/users/1190965/nodakai"}, "is_accepted": true, "score": 4, "last_activity_date": 1441888773, "last_edit_date": 1441888773, "creation_date": 1441848741, "answer_id": 32491644, "question_id": 32490756, "link": "https://stackoverflow.com/questions/32490756/use-c-like-array-of-struct-in-rust/32491644#32491644", "title": "Use C-Like Array of Struct in Rust", "body": "<p>Your attempt was almost correct except you need to write out struct constructor with the name (no shortcut in Rust)</p>\n\n<p>Note also that Rust has <code>const</code> in addition to <code>static</code>. (<code>const</code> in Rust is roughly equivalent to <code>const static</code> in C)</p>\n\n<p>Playpen: <a href=\"http://is.gd/tPRVq4\" rel=\"nofollow\">http://is.gd/tPRVq4</a></p>\n\n<pre class=\"lang-rust prettyprint-override\"><code>const v0: i8 = 0;\nconst v1: i8 = 1;\nconst v2: i8 = 2;\nconst v3: i8 = 3;\n\nstruct Arr {\n    v: i8,\n    s: &amp;'static str,\n}\n\nconst str: [Arr; 4] = [\n    Arr {\n        v: v0,\n        s:\"zero\",\n    },\n    Arr {\n        v: v1,\n        s:\"one\",\n    },\n    Arr {\n        v: v2,\n        s:\"two\",\n    },\n    Arr {\n        v: v3,\n        s:\"three\",\n    },\n];\n\nfn main() {\n    println!(\"{}\", str[2].v);\n}\n</code></pre>\n"}], "owner": {"reputation": 703, "user_id": 1088057, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae08e2025fe2c1ee696d86d0863e147c?s=128&d=identicon&r=PG", "display_name": "cyberboxster", "link": "https://stackoverflow.com/users/1088057/cyberboxster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2349, "favorite_count": 0, "accepted_answer_id": 32491644, "answer_count": 1, "score": 3, "last_activity_date": 1441888773, "creation_date": 1441841704, "last_edit_date": 1441851382, "question_id": 32490756, "link": "https://stackoverflow.com/questions/32490756/use-c-like-array-of-struct-in-rust", "title": "Use C-Like Array of Struct in Rust", "body": "<p>I need help converting the following C code to Rust.</p>\n\n<pre><code>#define v0   0x0\n#define v1   0x1\n#define v2   0x2\n#define v3   0x3\n\nstruct arr {\n    u_int v;\n    const char *s;\n};\n\nstatic const struct arr str[] = {\n    { v0, \"zero\"  },\n    { v1, \"one\"   },\n    { v2, \"two\"   },\n    { v3, \"three\" },\n    { 0, NULL     }\n};\n</code></pre>\n\n<p>I have the following Rust code already done, but I can't figure out the best way to create an array of structs like the C code does.</p>\n\n<pre><code>static v0: u8 = 0;\nstatic v1: u8 = 1;\nstatic v2: u8 = 2;\nstatic v3: u8 = 3;\n\nstruct arr {\n    v: u8,\n    s: &amp;'static str,\n}\n</code></pre>\n\n<p>I have tried the following code, but to no success:</p>\n\n<pre><code>static str: [arr; 4] = [\n    {\n        v: v0,\n        s:\"zero\",\n    },\n    {\n        v: v1,\n        s:\"one\",\n    },\n    {\n        v: v2,\n        s:\"two\",\n    },\n    {\n        v: v3,\n        s:\"three\",\n    },\n];\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "c99"], "comments": [{"owner": {"reputation": 9459, "user_id": 958051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KHi3g.png?s=128&g=1", "display_name": "Serdalis", "link": "https://stackoverflow.com/users/958051/serdalis"}, "edited": false, "score": 7, "creation_date": 1441840487, "post_id": 32490555, "comment_id": 52841716, "body": "did you mean to use <code>memset</code> instead?"}], "answers": [{"comments": [{"owner": {"reputation": 2969, "user_id": 3187995, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98df6434e724d62ad3c225a9bac5e0bf?s=128&d=identicon&r=PG&f=1", "display_name": "o.o", "link": "https://stackoverflow.com/users/3187995/o-o"}, "edited": false, "score": 0, "creation_date": 1441841155, "post_id": 32490604, "comment_id": 52841879, "body": "Thanks! I did get the implicit issue again. <code>&lt;string.h&gt;</code> fixed it."}], "tags": [], "owner": {"reputation": 7515, "user_id": 5249858, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/900942861bfbfdd27433e3ccbf7d6d0f?s=128&d=identicon&r=PG&f=1", "display_name": "3442", "link": "https://stackoverflow.com/users/5249858/3442"}, "is_accepted": true, "score": 1, "last_activity_date": 1441840802, "last_edit_date": 1441840802, "creation_date": 1441840715, "answer_id": 32490604, "question_id": 32490555, "link": "https://stackoverflow.com/questions/32490555/memtest-not-found-in-c/32490604#32490604", "title": "memtest not found in C", "body": "<p>First of all, there's no such thing as <code>memtest()</code> in standard C. You probably meant <a href=\"http://www.cplusplus.com/reference/cstring/memset/\" rel=\"nofollow\"><code>memset()</code></a>.</p>\n\n<p>If, after fixing that minor typo, you still have such <em>implicit declaration</em> issues, check if you're including <a href=\"http://www.cplusplus.com/reference/cstring/\" rel=\"nofollow\">&lt;string.h&gt;</a>, as that's were <code>memset()</code> and friends live in.</p>\n"}, {"comments": [{"owner": {"reputation": 2969, "user_id": 3187995, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98df6434e724d62ad3c225a9bac5e0bf?s=128&d=identicon&r=PG&f=1", "display_name": "o.o", "link": "https://stackoverflow.com/users/3187995/o-o"}, "edited": false, "score": 0, "creation_date": 1441841120, "post_id": 32490624, "comment_id": 52841865, "body": "Thanks, I did mess it up."}], "tags": [], "owner": {"reputation": 9459, "user_id": 958051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KHi3g.png?s=128&g=1", "display_name": "Serdalis", "link": "https://stackoverflow.com/users/958051/serdalis"}, "is_accepted": false, "score": 1, "last_activity_date": 1441840806, "creation_date": 1441840806, "answer_id": 32490624, "question_id": 32490555, "link": "https://stackoverflow.com/questions/32490555/memtest-not-found-in-c/32490624#32490624", "title": "memtest not found in C", "body": "<p>You may have confused the <a href=\"http://en.cppreference.com/w/cpp/string/byte/memset\" rel=\"nofollow\"><code>memset</code></a> function for a non-existent function called <code>memtest</code></p>\n\n<p>The compiler is complaining that there are no headers which define the <code>memtest</code> function and so it is assumed to be implicitly defined by being implemented in the same compilation module without a forward definition.</p>\n\n<p><a href=\"http://docs.oracle.com/cd/E19205-01/819-5265/bjazh/index.html\" rel=\"nofollow\">This Link</a> is some short documentation on the warning and change in C99.</p>\n\n<p>To get rid of such warnings, even for existant functions, the correct header needs to be included in the C file where you use the function. In the case of <code>memset</code> that is the <code>&lt;string.h&gt;</code> header.</p>\n"}], "owner": {"reputation": 2969, "user_id": 3187995, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98df6434e724d62ad3c225a9bac5e0bf?s=128&d=identicon&r=PG&f=1", "display_name": "o.o", "link": "https://stackoverflow.com/users/3187995/o-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1441840940, "accepted_answer_id": 32490604, "answer_count": 2, "score": 0, "last_activity_date": 1441840806, "creation_date": 1441840304, "question_id": 32490555, "link": "https://stackoverflow.com/questions/32490555/memtest-not-found-in-c", "closed_reason": "Not suitable for this site", "title": "memtest not found in C", "body": "<p>I'm trying to clear an array and thought I would use <code>memtest()</code>.</p>\n\n<p>I used it like this: <code>memtest(ptr-&gt;arr, 0, sizeof ptr-&gt;arr)</code>. ptr is a pointer to a struct and arr holds 100 elements.</p>\n\n<p>I get this error, however: </p>\n\n<pre><code>warning: implicit declaration of function 'memtest' is invalid in C99 [-Wimplicit-function-declaration]\n</code></pre>\n\n<p>Do I need to import some library? I've imported stdio.h, stdlib.h, and ctype.h.</p>\n"}, {"tags": ["c", "function"], "answers": [{"comments": [{"owner": {"reputation": 736, "user_id": 4552469, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/da5de294c7c44c9710a87c8761f3f736?s=128&d=identicon&r=PG&f=1", "display_name": "Jakob Meldgaard Kj&#230;r", "link": "https://stackoverflow.com/users/4552469/jakob-meldgaard-kj%c3%a6r"}, "edited": false, "score": 0, "creation_date": 1441840270, "post_id": 32490536, "comment_id": 52841651, "body": "That was quick! Thank you very much, I didn&#39;t notice that at all! I will mark your answer when I am able to in 10 minutes! Thank you! :)"}, {"owner": {"reputation": 7515, "user_id": 5249858, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/900942861bfbfdd27433e3ccbf7d6d0f?s=128&d=identicon&r=PG&f=1", "display_name": "3442", "link": "https://stackoverflow.com/users/5249858/3442"}, "reply_to_user": {"reputation": 736, "user_id": 4552469, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/da5de294c7c44c9710a87c8761f3f736?s=128&d=identicon&r=PG&f=1", "display_name": "Jakob Meldgaard Kj&#230;r", "link": "https://stackoverflow.com/users/4552469/jakob-meldgaard-kj%c3%a6r"}, "edited": false, "score": 1, "creation_date": 1441840347, "post_id": 32490536, "comment_id": 52841669, "body": "@Dradee: No problem! Comment here if you have any other related issue :)."}], "tags": [], "owner": {"reputation": 7515, "user_id": 5249858, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/900942861bfbfdd27433e3ccbf7d6d0f?s=128&d=identicon&r=PG&f=1", "display_name": "3442", "link": "https://stackoverflow.com/users/5249858/3442"}, "is_accepted": true, "score": 10, "last_activity_date": 1441840303, "last_edit_date": 1441840303, "creation_date": 1441840146, "answer_id": 32490536, "question_id": 32490521, "link": "https://stackoverflow.com/questions/32490521/wrong-string-when-passed-to-function/32490536#32490536", "title": "Wrong string when passed to function", "body": "<pre><code>selectMonth(input);\n</code></pre>\n\n<p>The expression's result is not being assigned to <code>month</code>... so:</p>\n\n<pre><code>month = selectMonth(input);\n</code></pre>\n\n<p>Shall help resolve your forementioned issues.</p>\n\n<p>Remember, C has <em>local scope variables</em>, so the <code>month</code> that you declare inside <code>selectMonth</code> is <strong>not</strong> the same <code>month</code> as the one declared in <code>main()</code>. Thus, the one in <code>main()</code> does never get any value other than zero, which it was initialized with.</p>\n"}], "owner": {"reputation": 736, "user_id": 4552469, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/da5de294c7c44c9710a87c8761f3f736?s=128&d=identicon&r=PG&f=1", "display_name": "Jakob Meldgaard Kj&#230;r", "link": "https://stackoverflow.com/users/4552469/jakob-meldgaard-kj%c3%a6r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 32490536, "answer_count": 1, "score": 3, "last_activity_date": 1441840303, "creation_date": 1441840057, "question_id": 32490521, "link": "https://stackoverflow.com/questions/32490521/wrong-string-when-passed-to-function", "title": "Wrong string when passed to function", "body": "<p>I've been trying the \"How many days in a given month\".</p>\n\n<p>My <code>main</code> looks like this:</p>\n\n<pre><code>int main(void) {\n    int numberOfDays, month = 0;\n    char* input = (char*) malloc(10);\n\n    printf(\"Please enter a month (\\\"1\\\", \\\"Jan\\\", \\\"January\\\", \\\"jan\\\" or \\\"january\\\" etc.):\\n&gt; \");\n    scanf(\" %s\", input);\n    selectMonth(input);\n\n    switch (month) {\n        case 1:\n            numberOfDays = 31;  break;\n        ...\n        default:\n            numberOfDays = 0;\n            printf(\"Invalid month.\\n\");\n    }\n...\n</code></pre>\n\n<p>And <code>selectMonth</code>:</p>\n\n<pre><code>int selectMonth(char* input) {\n    int month = 0;\n\n    if (!strcasecmp(input, \"jan\") || !strcasecmp(input, \"january\") || !strcasecmp(input, \"1\")) {\n        month = 1;\n    }\n    ...\n\n    return month;\n}\n</code></pre>\n\n<p>When I put the contents of <code>selectMonth</code> inside <code>main</code>, it works fine. But when I have a separate function for the else/ifs and return the month, the switch goes straight to the default case.\nWhy is that?</p>\n\n<p>I'd appreciate any help!</p>\n"}, {"tags": ["c", "xcode"], "comments": [{"owner": {"reputation": 3355, "user_id": 1575017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1DCum.png?s=128&g=1", "display_name": "rocky", "link": "https://stackoverflow.com/users/1575017/rocky"}, "edited": false, "score": 1, "creation_date": 1441840335, "post_id": 32490461, "comment_id": 52841667, "body": "right click it and select &#39;Show in Finder&#39; ?"}, {"owner": {"reputation": 18474, "user_id": 971141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33bad53cc72fd2873b4bd5b426fcc4c1?s=128&d=identicon&r=PG", "display_name": "David Ferenczy Rogo\u017ean", "link": "https://stackoverflow.com/users/971141/david-ferenczy-rogo%c5%bean"}, "edited": false, "score": 0, "creation_date": 1441844386, "post_id": 32490461, "comment_id": 52842640, "body": "I&#39;m just curious - why did you capitalize the word <i>wroted</i>? There is no such word in English, what did you mean by that?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5319041, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200947053356581/picture?type=large", "display_name": "Vinh Gia Duc Vu", "link": "https://stackoverflow.com/users/5319041/vinh-gia-duc-vu"}, "edited": false, "score": 0, "creation_date": 1441845868, "post_id": 32491132, "comment_id": 52842996, "body": "Sorry, first time using this website, i edit the post with code."}, {"owner": {"reputation": 7342, "user_id": 2891365, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/131e13d046177d22357db9b8f5c789fd?s=128&d=identicon&r=PG&f=1", "display_name": "user193130", "link": "https://stackoverflow.com/users/2891365/user193130"}, "reply_to_user": {"reputation": 1, "user_id": 5319041, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200947053356581/picture?type=large", "display_name": "Vinh Gia Duc Vu", "link": "https://stackoverflow.com/users/5319041/vinh-gia-duc-vu"}, "edited": false, "score": 0, "creation_date": 1441849169, "post_id": 32491132, "comment_id": 52843745, "body": "Yes, that&#39;s a relative path since it doesn&#39;t start with <code>&#47;</code>, so my guess should be correct. Most likely, the working directory will be somewhere in your home directory, <code>~</code>, but to be sure, try the command above while your program is running and it should give you the actual path."}], "tags": [], "owner": {"reputation": 7342, "user_id": 2891365, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/131e13d046177d22357db9b8f5c789fd?s=128&d=identicon&r=PG&f=1", "display_name": "user193130", "link": "https://stackoverflow.com/users/2891365/user193130"}, "is_accepted": false, "score": 0, "last_activity_date": 1441844616, "creation_date": 1441844616, "answer_id": 32491132, "question_id": 32490461, "link": "https://stackoverflow.com/questions/32490461/where-is-the-created-file-from-xcode-on-mac-get-stored/32491132#32491132", "title": "Where is the created File from Xcode on Mac get stored?", "body": "<p>Without posting your code, there's not much we can do but guess.</p>\n\n<p>My guess is... you specified a relative path for the file output in your program so it was based on your working directory.</p>\n\n<p>When your program is running, open a terminal and type</p>\n\n<pre><code>lsof -p &lt;PID&gt; | grep cwd\n</code></pre>\n\n<p>where <code>&lt;PID&gt;</code> would be the process id of your C program that's running.</p>\n\n<p>This would show you the current working directory and your output file's location should be based on this path.</p>\n"}], "owner": {"reputation": 1, "user_id": 5319041, "user_type": "registered", "profile_image": "https://graph.facebook.com/10200947053356581/picture?type=large", "display_name": "Vinh Gia Duc Vu", "link": "https://stackoverflow.com/users/5319041/vinh-gia-duc-vu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1441845800, "creation_date": 1441839657, "last_edit_date": 1441845800, "question_id": 32490461, "link": "https://stackoverflow.com/questions/32490461/where-is-the-created-file-from-xcode-on-mac-get-stored", "title": "Where is the created File from Xcode on Mac get stored?", "body": "<p>I am new to Xcode on MAC and I am using that for C coding. I WROTED a code that create a .dat, .docx file, it returned no error but I can't find the files I created. I know the code works because i tried on my Visual studio i have on my PC, and i found the files i created, where are they on MAC?.</p>\n\n<p>The file does not exist, this code should create the file. On pc, the file would appear in the default location where I installed my Visual Studio, but on Mac, i don't know where it is.</p>\n\n<pre><code>FILE *fin,*fout;\nfout = fopen(\"out.dat\", \"w\");\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 2, "creation_date": 1441837368, "post_id": 32490033, "comment_id": 52840743, "body": "Your <code>factors</code> function says it returns a pointer to <code>int</code>, but it doesn&#39;t return anything. Hint: compile with <code>-Wall</code>."}, {"owner": {"reputation": 849, "user_id": 2674572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ac98e0d627ba6399371ceea60fa7225?s=128&d=identicon&r=PG", "display_name": "or1426", "link": "https://stackoverflow.com/users/2674572/or1426"}, "edited": false, "score": 0, "creation_date": 1441837472, "post_id": 32490033, "comment_id": 52840775, "body": "For future reference valgrind is a massively useful tool for locating seg-faults. The usage is as simple as <code>valgrind .&#47;program</code> and (if the program was compiled with the <code>-g</code> flag) will tell you the exact line the program faulted on and give a stack trace. It also finds memory leaks which is helpful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441866258, "post_id": 32490033, "comment_id": 52848927, "body": "You could start by always compiling with all the warnings enabled.  then fix those warnings.  In this case, fixing the warnings will most likely also fix the problem"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 5137042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8a3e48e36ad81b669f4e6b92c1deedb6?s=128&d=identicon&r=PG&f=1", "display_name": "Ellis", "link": "https://stackoverflow.com/users/5137042/ellis"}, "edited": false, "score": 0, "creation_date": 1441838756, "post_id": 32490066, "comment_id": 52841223, "body": "Thanks, I don\u2019t know why I didn\u2019t see that! And gcc wasnt showing errors before, good to know."}], "tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": true, "score": 3, "last_activity_date": 1441837339, "creation_date": 1441837339, "answer_id": 32490066, "question_id": 32490033, "link": "https://stackoverflow.com/questions/32490033/segmentation-fault-in-c-due-to-pointer/32490066#32490066", "title": "Segmentation Fault in C due to pointer", "body": "<p>The <code>factors</code> function has no return statement. It's supposed to return a pointer but it doesn't return anything.</p>\n\n<p><strong>Side note:</strong> Enable your compiler's warnings (e.g., with <code>gcc -Wall -Wextra</code>). If they're already enabled don't ignore them!</p>\n"}, {"tags": [], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "is_accepted": false, "score": 1, "last_activity_date": 1441838069, "last_edit_date": 1441838069, "creation_date": 1441837762, "answer_id": 32490152, "question_id": 32490033, "link": "https://stackoverflow.com/questions/32490033/segmentation-fault-in-c-due-to-pointer/32490152#32490152", "title": "Segmentation Fault in C due to pointer", "body": "<p>Your function is declared as </p>\n\n<pre><code>int * factors(int num);\n</code></pre>\n\n<p>but it's definition doesn't return anything and yet you are using it's return value in assignment. This triggers <em>undefined behavior</em>. It will compile if compiled without rigorous warnings and the return value will most likely be whatever random value happened to be left in the return register (e.g. EAX on x86).</p>\n\n<hr>\n\n<p>C-99 Standard <strong>\u00a7</strong> 6.9.1/12 <em>Function definitions</em></p>\n\n<blockquote>\n  <p>If the } that terminates a function is reached, and the value of the\n  function call is used by the caller, the behavior is undefined.</p>\n</blockquote>\n"}], "owner": {"reputation": 95, "user_id": 5137042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8a3e48e36ad81b669f4e6b92c1deedb6?s=128&d=identicon&r=PG&f=1", "display_name": "Ellis", "link": "https://stackoverflow.com/users/5137042/ellis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 32490066, "answer_count": 2, "score": 0, "last_activity_date": 1441838069, "creation_date": 1441837181, "question_id": 32490033, "link": "https://stackoverflow.com/questions/32490033/segmentation-fault-in-c-due-to-pointer", "title": "Segmentation Fault in C due to pointer", "body": "<p>I have recently started coding in C, and am doing some stuff on project Euler. This is my code for challenge three so far. The only problem is when I run the compiled code it throws a segmentation fault. I think it may be due to a pointer I called, the suspect pointer is underneath my comment. I did some research into the subject but I cant seem to be able to fix the error. Any advice?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;math.h&gt;\n\nbool is_prime(int k);\nint * factors(int num);\n\nint main(){\n    int input;\n    while (true){\n        printf(\"Enter a number to get the prime factorization of: \");\n        scanf(\"%d\", &amp;input);\n        if (is_prime(input) == true){\n            printf(\"That number is already prime!\");\n\n        }else{\n            break;\n        }\n    }\n\n    //This is the pointer I think is causing the problem\n    int * var = factors(input);\n    int k;\n    for (k = 0; k &lt; 12; k++){\n        printf(\"%d\", var[k]);\n    }\n}\n\nbool is_prime(int k){\n    int i;\n    double half = ceil(k / 2);\n    for (i = 2; i &lt;= half; i++){\n        if (((int)(k) % i) == 0){\n            return false;\n            break;\n        }\n    }\n    return true;\n}\n\nint * factors(int num){\n    int xi;\n    static int array[1000];\n    int increment = 0;\n    for (xi = 1;xi &lt; ceil(num / 2); xi++){\n        if (num % xi == 0){\n            array[increment] = xi;\n            increment++;\n        }\n    }\n}     \n</code></pre>\n"}, {"tags": ["c++", "c", "macos", "compiler-errors"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1441837697, "post_id": 32490003, "comment_id": 52840851, "body": "Looking at <code>aacurses.c</code>, there is a choice between whether to include <code>&lt;curses&gt;</code> or <code>&lt;ncurses&gt;</code>, presumably due to a definition in <code>&quot;config.h&quot;</code>.  Perhaps the configure script picked up the wrong <i>curses</i>.  Check if <code>RENAMED_NCURSES</code> is defined in <code>config.h</code>, then comment it out or undefine it and try <code>make</code> again (without running <code>configure</code>)."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1441837927, "post_id": 32490003, "comment_id": 52840936, "body": "Alternatively, you could use <a href=\"http://brew.sh\" rel=\"nofollow noreferrer\">Homebrew</a> to install a pre-built aalib package.  Install homebrew, then invoke <code>brew install aalib</code>."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1441838123, "post_id": 32490003, "comment_id": 52841012, "body": "One other thing to try is not using <i>curses</i> at all: <code>.&#47;configure --with-curses-driver=no</code>.  I found that option in a very old thread, so there&#39;s no guarantee it&#39;s still there."}, {"owner": {"reputation": 11, "user_id": 5318964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264e45a9b3e45ef41d54c04fca8ba06?s=128&d=identicon&r=PG&f=1", "display_name": "Nosreme", "link": "https://stackoverflow.com/users/5318964/nosreme"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1441847538, "post_id": 32490003, "comment_id": 52843357, "body": "Hey thanks for your help.  I did manage to install it via Homebrew.  I wasn&#39;t aware that it was on Homebrew, so that&#39;s pretty awesome.  I have another question related to aview, I don&#39;t know if you have any experience with the program itself...  When I open a .pnm with aview several of the options say &quot;unsupported&quot; including half-bright (dim) mode, 8-bit Acsii mode, and control characters.  Is this an issue with my terminal?  Or the actual program itself?"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1441849998, "post_id": 32490003, "comment_id": 52843929, "body": "Actually, I have no experience with <i>aview</i> or <i>aalib</i>.  I was just helping with general troubleshooting.  It&#39;s probably a lack of ANSI support in your terminal, which I believe is detected by <i>ncurses</i>.  Try running it under <code>xterm</code>."}], "owner": {"reputation": 11, "user_id": 5318964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264e45a9b3e45ef41d54c04fca8ba06?s=128&d=identicon&r=PG&f=1", "display_name": "Nosreme", "link": "https://stackoverflow.com/users/5318964/nosreme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 380, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1441837033, "creation_date": 1441837033, "question_id": 32490003, "link": "https://stackoverflow.com/questions/32490003/trouble-compiling-aalib-on-mac-osx-yosemite", "title": "Trouble compiling aalib on Mac OSX Yosemite", "body": "<p>So I'm looking to compile aalib and aview on my Mac, both are used for converting images into acsii art.  </p>\n\n<p>aview requires that aalib is installed before it can be compiled</p>\n\n<p>At first when I was trying to compile aalib I was receiving an error telling me that malloc.h could not be found.  After some googling I figured I could just copy malloc.h and paste it into the src folder of aalib.  This seemed to solve that problem, but now when I run the following in the aalib directory (as instructed in the README):</p>\n\n<pre><code>./configure\nmake\nmake install\n</code></pre>\n\n<p>I get a new error </p>\n\n<pre><code>Making all in src\n/bin/sh ../libtool --mode=compile gcc -DHAVE_CONFIG_H -I. -I. -I.     \n-g -O2 -I/usr/include/ncurses  -c aacurses.c gcc -DHAVE_CONFIG_H -I. -\nI. -I. -g -O2 -I/usr/include/ncurses -c aacurses.c -o aacurses.o\naacurses.c:74:20: error: incomplete definition of type 'struct _win_st'\n*width = stdscr-&gt;_maxx + 1;\n         ~~~~~~^\n/usr/include/curses.h:322:16: note: forward declaration of 'struct \n_win_st'\ntypedef struct _win_st WINDOW;\n               ^\naacurses.c:75:21: error: incomplete definition of type 'struct _win_st'\n    *height = stdscr-&gt;_maxy + 1;\n              ~~~~~~^\n/usr/include/curses.h:322:16: note: forward declaration of 'struct \n_win_st'\ntypedef struct _win_st WINDOW;\n               ^\n2 errors generated.\nmake[1]: *** [aacurses.lo] Error 1\nmake: *** [all-recursive] Error 1\n</code></pre>\n\n<p>Honestly I'm in a bit over my head.  I'm not sure what this error means or if there is any way I can actually fix it.  Has anyone got aalib running on a mac?  Did you run into these same problems?</p>\n\n<p>Any help is greatly appreciated.</p>\n"}, {"tags": ["c", "linux", "sockets", "network-programming"], "comments": [{"owner": {"reputation": 212, "user_id": 3174381, "user_type": "registered", "accept_rate": 8, "profile_image": "https://graph.facebook.com/100001348086095/picture?type=large", "display_name": "shivam mitra", "link": "https://stackoverflow.com/users/3174381/shivam-mitra"}, "edited": false, "score": 0, "creation_date": 1441837941, "post_id": 32489957, "comment_id": 52840944, "body": "Read() and write() function in socket programming returns the number of bytes recieved and sent respectively. Just take the sum of these values."}, {"owner": {"reputation": 4408, "user_id": 154680, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1fe5646f7071126187fbda8c68c526f6?s=128&d=identicon&r=PG", "display_name": "russoue", "link": "https://stackoverflow.com/users/154680/russoue"}, "reply_to_user": {"reputation": 212, "user_id": 3174381, "user_type": "registered", "accept_rate": 8, "profile_image": "https://graph.facebook.com/100001348086095/picture?type=large", "display_name": "shivam mitra", "link": "https://stackoverflow.com/users/3174381/shivam-mitra"}, "edited": false, "score": 0, "creation_date": 1441838211, "post_id": 32489957, "comment_id": 52841033, "body": "@shivammitra, Aren&#39;t those the number of payload bytes?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1441838296, "post_id": 32489957, "comment_id": 52841066, "body": "I suspect it&#39;s not in there because it&#39;s not always possible to associate a byte to a single socket. What if you&#39;re connecting over a VPN, and packets for two different connections get encapsulated in a single VPN packet, and the VPN packet has some overhead?"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 1, "creation_date": 1441907755, "post_id": 32489957, "comment_id": 52876261, "body": "As far as I know, no. The statistics are maintained per device (see <code>&#47;proc&#47;net&#47;dev</code>) and per process (see <code>&#47;proc&#47;PID&#47;net&#47;dev</code>) in Linux, and they include the number of bytes in the payload and number of packets and so on. (The device-specific statistics at <code>&#47;sys&#47;class&#47;net&#47;*&#47;statistics&#47;*</code> are the same values, just one field per pseudofile.) In many cases (accelerated network cards) the kernel might never know the actual number of bytes/symbols sent/received on the wire anyway, so it&#39;d be messy/futile to even try to account it."}, {"owner": {"reputation": 1004, "user_id": 1640284, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8bf65827490e262e66ee09b81921c9df?s=128&d=identicon&r=PG", "display_name": "Ales Teska", "link": "https://stackoverflow.com/users/1640284/ales-teska"}, "edited": false, "score": 0, "creation_date": 1457059289, "post_id": 32489957, "comment_id": 59245150, "body": "See <a href=\"http://stackoverflow.com/questions/3337249/good-documentation-on-structure-tcp-info\" title=\"good documentation on structure tcp info\">stackoverflow.com/questions/3337249/&hellip;</a> There is everything you need to know how to collect statistics from the socket on Linux/BSD."}, {"owner": {"reputation": 672, "user_id": 630290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/320529429d32cf4ce5250511f1dc2ce1?s=128&d=identicon&r=PG", "display_name": "medve", "link": "https://stackoverflow.com/users/630290/medve"}, "edited": false, "score": 0, "creation_date": 1459091779, "post_id": 32489957, "comment_id": 60127537, "body": "<code>&#47;proc&#47;PID&#47;net&#47;dev</code> contains the same data as <code>&#47;proc&#47;net&#47;dev</code> (like a symbolic link), so it&#39;s not suitable for this task."}], "answers": [{"comments": [{"owner": {"reputation": 4408, "user_id": 154680, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1fe5646f7071126187fbda8c68c526f6?s=128&d=identicon&r=PG", "display_name": "russoue", "link": "https://stackoverflow.com/users/154680/russoue"}, "edited": false, "score": 0, "creation_date": 1441990209, "post_id": 32491416, "comment_id": 52914895, "body": "Will <code>l</code> contain the number of raw bytes of application bytes only?"}, {"owner": {"reputation": 77, "user_id": 1077396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb287e046295894ad364be3682ebe05?s=128&d=identicon&r=PG&f=1", "display_name": "vilanova", "link": "https://stackoverflow.com/users/1077396/vilanova"}, "reply_to_user": {"reputation": 4408, "user_id": 154680, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1fe5646f7071126187fbda8c68c526f6?s=128&d=identicon&r=PG", "display_name": "russoue", "link": "https://stackoverflow.com/users/154680/russoue"}, "edited": false, "score": 1, "creation_date": 1441999082, "post_id": 32491416, "comment_id": 52919455, "body": "yes, The FIONREAD ioctl returns the number of data bytes in all data messages queued"}], "tags": [], "owner": {"reputation": 77, "user_id": 1077396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb287e046295894ad364be3682ebe05?s=128&d=identicon&r=PG&f=1", "display_name": "vilanova", "link": "https://stackoverflow.com/users/1077396/vilanova"}, "is_accepted": false, "score": 0, "last_activity_date": 1441847072, "creation_date": 1441847072, "answer_id": 32491416, "question_id": 32489957, "link": "https://stackoverflow.com/questions/32489957/socket-level-statistics-in-linux-unix/32491416#32491416", "title": "Socket level statistics in Linux/Unix", "body": "<p>try  the following:</p>\n\n<pre><code>int l = 0;\nioctl(sock, FIONREAD, &amp;l);\nif (l &gt; 0)\n{\n  l = read(sock, buffer, l);\n}\n</code></pre>\n"}], "owner": {"reputation": 4408, "user_id": 154680, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1fe5646f7071126187fbda8c68c526f6?s=128&d=identicon&r=PG", "display_name": "russoue", "link": "https://stackoverflow.com/users/154680/russoue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1066, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1441847072, "creation_date": 1441836750, "question_id": 32489957, "link": "https://stackoverflow.com/questions/32489957/socket-level-statistics-in-linux-unix", "title": "Socket level statistics in Linux/Unix", "body": "<p>Is there a way to programmatically know the total number of raw bytes sent or received by a socket in Linux/Unix?</p>\n"}, {"tags": ["c", "linux", "segmentation-fault", "segment"], "answers": [{"tags": [], "owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "is_accepted": false, "score": 2, "last_activity_date": 1441837137, "creation_date": 1441837137, "answer_id": 32490026, "question_id": 32489948, "link": "https://stackoverflow.com/questions/32489948/how-do-you-find-the-bounds-of-your-program-memory-segmentation-from-the-system-i/32490026#32490026", "title": "How do you find the bounds of your program memory/segmentation from the system in C/Linux?", "body": "<p>You can use <a href=\"http://man7.org/linux/man-pages/man2/getrlimit.2.html\" rel=\"nofollow\"><code>getrlimit</code> and <code>setrlimit</code></a> in C on *NIX systems to get/set things like:</p>\n\n<ul>\n<li>Stack size</li>\n<li>Heap size</li>\n<li>Virtual address space</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 3, "last_activity_date": 1441908255, "last_edit_date": 1495541033, "creation_date": 1441908255, "answer_id": 32508814, "question_id": 32489948, "link": "https://stackoverflow.com/questions/32489948/how-do-you-find-the-bounds-of-your-program-memory-segmentation-from-the-system-i/32508814#32508814", "title": "How do you find the bounds of your program memory/segmentation from the system in C/Linux?", "body": "<p>Dogbert's <a href=\"https://stackoverflow.com/a/32490026/1475978\">answer</a> lets you find out and modify (if permitted) the process <em>limits</em>.</p>\n\n<p>If you want to know how a process uses its virtual address space -- that is, which addresses are used and for what purpose --, examine the <code>/proc/PID/maps</code> or <code>/proc/PID/smaps</code> pseudofiles. The format and fields are described in the <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\"><code>man 5 proc</code></a> man page.</p>\n\n<p>Remember that those are pseudofiles provided directly by the kernel (they look like files, but are generated by the kernel as needed), and therefore always use the C/POSIX locale (<code>LC_ALL=C LANG=C</code>). The existing format should not change, but new fields might be added.</p>\n"}], "owner": {"reputation": 790, "user_id": 1482105, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E6ZnP.jpg?s=128&g=1", "display_name": "timxor", "link": "https://stackoverflow.com/users/1482105/timxor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1441908255, "creation_date": 1441836701, "question_id": 32489948, "link": "https://stackoverflow.com/questions/32489948/how-do-you-find-the-bounds-of-your-program-memory-segmentation-from-the-system-i", "title": "How do you find the bounds of your program memory/segmentation from the system in C/Linux?", "body": "<p>How do you find the bounds of your program memory/segmentation from the system in C/Linux?</p>\n"}, {"tags": ["c", "linux", "pointers", "structure"], "comments": [{"owner": {"reputation": 2976, "user_id": 3799712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008f822869cbd75049cc3ab9d36d78ac?s=128&d=identicon&r=PG", "display_name": "ElmerCat", "link": "https://stackoverflow.com/users/3799712/elmercat"}, "edited": false, "score": 0, "creation_date": 1441837704, "post_id": 32489930, "comment_id": 52840859, "body": "What are you using to compile it? What is throwing the error? The compiler, or the compiled program?"}, {"owner": {"reputation": 1197, "user_id": 4025071, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/TZaTm.jpg?s=128&g=1", "display_name": "Jordan Davis", "link": "https://stackoverflow.com/users/4025071/jordan-davis"}, "reply_to_user": {"reputation": 2976, "user_id": 3799712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008f822869cbd75049cc3ab9d36d78ac?s=128&d=identicon&r=PG", "display_name": "ElmerCat", "link": "https://stackoverflow.com/users/3799712/elmercat"}, "edited": false, "score": 0, "creation_date": 1441838396, "post_id": 32489930, "comment_id": 52841101, "body": "@ElmerCat Thats the output when I run the program after it&#39;s compiled."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1441840570, "post_id": 32489930, "comment_id": 52841737, "body": "@JordanDavis: in future, describe things more accurately.  If you got a segmentation fault while compiling, it would be the compiler crashing, which might be quite exciting and would probably be a bug unless there were very unusual extenuating circumstances \u2014 compilers don&#39;t crash.  OTOH, users&#39; programs do crash quite routinely when they&#39;re run.  I&#39;ve updated the question so it reflects your actual problem."}], "answers": [{"comments": [{"owner": {"reputation": 1197, "user_id": 4025071, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/TZaTm.jpg?s=128&g=1", "display_name": "Jordan Davis", "link": "https://stackoverflow.com/users/4025071/jordan-davis"}, "edited": false, "score": 0, "creation_date": 1441838216, "post_id": 32489955, "comment_id": 52841036, "body": "Is it not being initializing it at the end of the <code>struct name</code> statement?"}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "reply_to_user": {"reputation": 1197, "user_id": 4025071, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/TZaTm.jpg?s=128&g=1", "display_name": "Jordan Davis", "link": "https://stackoverflow.com/users/4025071/jordan-davis"}, "edited": false, "score": 0, "creation_date": 1441838474, "post_id": 32489955, "comment_id": 52841133, "body": "@Jordan <code>person</code> pointer was never initialized or assigned, its value is unspecified."}, {"owner": {"reputation": 1197, "user_id": 4025071, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/TZaTm.jpg?s=128&g=1", "display_name": "Jordan Davis", "link": "https://stackoverflow.com/users/4025071/jordan-davis"}, "edited": false, "score": 0, "creation_date": 1441838648, "post_id": 32489955, "comment_id": 52841195, "body": "If it&#39;s not initialized... then how am I referencing it in my <code>strcpy()</code> statements..."}, {"owner": {"reputation": 1197, "user_id": 4025071, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/TZaTm.jpg?s=128&g=1", "display_name": "Jordan Davis", "link": "https://stackoverflow.com/users/4025071/jordan-davis"}, "edited": false, "score": 0, "creation_date": 1441838795, "post_id": 32489955, "comment_id": 52841239, "body": "The end of the <code>struct name</code> statement <code>} *person;</code> should be declaring and assigning the pointer variable to the <code>name</code> - structure.... here is a ref --&gt; <a href=\"http://www.tutorialspoint.com/cprogramming/c_structures.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/cprogramming/c_structures.htm</a>"}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "reply_to_user": {"reputation": 1197, "user_id": 4025071, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/TZaTm.jpg?s=128&g=1", "display_name": "Jordan Davis", "link": "https://stackoverflow.com/users/4025071/jordan-davis"}, "edited": false, "score": 1, "creation_date": 1441839028, "post_id": 32489955, "comment_id": 52841306, "body": "@JordanDavis Not at all, you are declaring <code>person</code> as an object of type <code>struct name *</code> (that is a pointer to <code>struct name</code>). <code>person</code> object was never initialized."}, {"owner": {"reputation": 1197, "user_id": 4025071, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/TZaTm.jpg?s=128&g=1", "display_name": "Jordan Davis", "link": "https://stackoverflow.com/users/4025071/jordan-davis"}, "edited": false, "score": 0, "creation_date": 1441839486, "post_id": 32489955, "comment_id": 52841443, "body": "Are you referring to &quot;object&quot; as a structure &quot;member&quot;?"}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "reply_to_user": {"reputation": 1197, "user_id": 4025071, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/TZaTm.jpg?s=128&g=1", "display_name": "Jordan Davis", "link": "https://stackoverflow.com/users/4025071/jordan-davis"}, "edited": false, "score": 0, "creation_date": 1441839558, "post_id": 32489955, "comment_id": 52841461, "body": "I&#39;m referring to the <code>person</code> variable."}, {"owner": {"reputation": 1197, "user_id": 4025071, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/TZaTm.jpg?s=128&g=1", "display_name": "Jordan Davis", "link": "https://stackoverflow.com/users/4025071/jordan-davis"}, "reply_to_user": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1441839577, "post_id": 32489955, "comment_id": 52841464, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/89202/discussion-between-jordan-davis-and-ouah\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": true, "score": 2, "last_activity_date": 1441836748, "creation_date": 1441836748, "answer_id": 32489955, "question_id": 32489930, "link": "https://stackoverflow.com/questions/32489930/printing-the-value-of-a-structure-pointer-variable-member/32489955#32489955", "title": "Printing the value of a structure pointer variable member", "body": "<p>Because <code>person</code> pointer has not been initialized. So there is no valid <code>struct name</code> object when you dereference the pointer.</p>\n\n<p>Either use malloc:</p>\n\n<pre><code>person = malloc(sizeof *person);\n</code></pre>\n\n<p>or just declare an object of type <code>struct name</code> instead of <code>struct name *</code> (and then don't forget to access your structure members with <code>.</code> operator instead of <code>-&gt;</code>).</p>\n"}], "owner": {"reputation": 1197, "user_id": 4025071, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/TZaTm.jpg?s=128&g=1", "display_name": "Jordan Davis", "link": "https://stackoverflow.com/users/4025071/jordan-davis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 32489955, "answer_count": 1, "score": 0, "last_activity_date": 1441843829, "creation_date": 1441836612, "last_edit_date": 1441843829, "question_id": 32489930, "link": "https://stackoverflow.com/questions/32489930/printing-the-value-of-a-structure-pointer-variable-member", "title": "Printing the value of a structure pointer variable member", "body": "<p>Why am I getting a \"segmentation fault\" error when I run this after compiling?</p>\n\n<p><a href=\"https://i.stack.imgur.com/vatPo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vatPo.png\" alt=\"enter image description here\"></a></p>\n\n<p>//CODE</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid main(){\n\n    struct name{\n        char first[20];\n        char last[20];\n    } *person;\n\n    strcpy(person-&gt;first, \"jordan\");\n    strcpy(person-&gt;last, \"davis\");\n\n    printf(\"firstname: %s\\n\", person-&gt;first);\n    printf(\"lastname: %s\\n\", person-&gt;last);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "cmake", "clion"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441837122, "post_id": 32489826, "comment_id": 52840660, "body": "You use <code>${CMAKE_SOURCE_DIR}&#47;bno055&#47;bno055.c</code> file for build <code>bno055</code> library, so you shouldn&#39;t use that file for build <code>imc-server</code> executable. Also, it is better to use library target name for link that executable: <code>target_link_libraries(imc-server bno055)</code>. As for external project <code>mraa</code>, you additionally need explicit target dependencies for correctly link with it: <code>add_dependencies(imc-server mraa)</code>."}, {"owner": {"reputation": 3208, "user_id": 1478191, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fa5cc5aa89d2edef8e3d07ac1142cfa2?s=128&d=identicon&r=PG", "display_name": "Noah Huppert", "link": "https://stackoverflow.com/users/1478191/noah-huppert"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441837787, "post_id": 32489826, "comment_id": 52840888, "body": "@Tsyvarev Ok, I just added the BNO055 files to the executable(So no lib or linking for bno055). However I am still getting undefined function errors. I also uncommented all the mraa code and I am getting undefined function errors for those functions as well. Is there something I am fundamentally missing here? <a href=\"https://github.com/Noah-Huppert/Inertial-Motion-Capture/tree/39a6196e48623c76323b92d37bf6e811c22f3ad5/imc-server\" rel=\"nofollow noreferrer\">Commit with changes =&gt; 39a6196</a>"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441875789, "post_id": 32489826, "comment_id": 52854726, "body": "Which source is being compiled, when you get error? Precise error message(at least, for one function) would be helpful."}, {"owner": {"reputation": 3208, "user_id": 1478191, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fa5cc5aa89d2edef8e3d07ac1142cfa2?s=128&d=identicon&r=PG", "display_name": "Noah Huppert", "link": "https://stackoverflow.com/users/1478191/noah-huppert"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441913652, "post_id": 32489826, "comment_id": 52879517, "body": "@Tsyvarev Indeed, Here is the end part of the CMake build log. <a href=\"http://pastebin.com/Av5p45eK\" rel=\"nofollow noreferrer\">Pastebin</a>"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441922852, "post_id": 32489826, "comment_id": 52883750, "body": "As build log shows, function (<code>mraa_i2c_address</code>) is defined in the <code>mraa</code> library, not in the <code>bno055</code> one. You need both link with that library (<code>target_link_libraries(imc-server libmraa.so</code>) and add dependency with <code>mraa</code> target (<code>add_dependencies(imc-server mraa)</code>)."}, {"owner": {"reputation": 3208, "user_id": 1478191, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fa5cc5aa89d2edef8e3d07ac1142cfa2?s=128&d=identicon&r=PG", "display_name": "Noah Huppert", "link": "https://stackoverflow.com/users/1478191/noah-huppert"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441925406, "post_id": 32489826, "comment_id": 52884556, "body": "@Tsyvarev Awesome! Now only the BNO055 functions are missing. Even though I include them in the executable build"}, {"owner": {"reputation": 3208, "user_id": 1478191, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fa5cc5aa89d2edef8e3d07ac1142cfa2?s=128&d=identicon&r=PG", "display_name": "Noah Huppert", "link": "https://stackoverflow.com/users/1478191/noah-huppert"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441974433, "post_id": 32489826, "comment_id": 52904569, "body": "@Tsyvarev The Undefined BNO055 errors where from an other issue. If you want, put your comments into an answer."}], "answers": [{"comments": [{"owner": {"reputation": 3208, "user_id": 1478191, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fa5cc5aa89d2edef8e3d07ac1142cfa2?s=128&d=identicon&r=PG", "display_name": "Noah Huppert", "link": "https://stackoverflow.com/users/1478191/noah-huppert"}, "edited": false, "score": 1, "creation_date": 1444067259, "post_id": 32926887, "comment_id": 53734276, "body": "The issue was that I had to wrap the bno055 include in a <code>extern &quot;C&quot; {}&quot;</code>"}, {"owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "edited": false, "score": 0, "creation_date": 1480348119, "post_id": 32926887, "comment_id": 68913191, "body": "maybe you could post your own answer, it would be more visible"}], "tags": [], "owner": {"reputation": 2193, "user_id": 1733955, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/BmbmP.png?s=128&g=1", "display_name": "Th. Thielemann", "link": "https://stackoverflow.com/users/1733955/th-thielemann"}, "is_accepted": false, "score": 0, "last_activity_date": 1443902250, "creation_date": 1443902250, "answer_id": 32926887, "question_id": 32489826, "link": "https://stackoverflow.com/questions/32489826/cmake-undefined-reference-to-function/32926887#32926887", "title": "CMake &quot;undefined reference to function&quot;", "body": "<p>Remove the header from your SOURCE_FILES.</p>\n\n<pre><code>set(SOURCE_FILES ${SOURCE_FILES}\n        # ${CMAKE_SOURCE_DIR}/bno055/bno055.h\n        ${CMAKE_SOURCE_DIR}/bno055/bno055.c)\n</code></pre>\n\n<p>CMake should find the required header by itself. Additional includes are found by <code>include_directories</code></p>\n"}, {"tags": [], "owner": {"reputation": 3208, "user_id": 1478191, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fa5cc5aa89d2edef8e3d07ac1142cfa2?s=128&d=identicon&r=PG", "display_name": "Noah Huppert", "link": "https://stackoverflow.com/users/1478191/noah-huppert"}, "is_accepted": true, "score": 9, "last_activity_date": 1494774622, "creation_date": 1494774622, "answer_id": 43965493, "question_id": 32489826, "link": "https://stackoverflow.com/questions/32489826/cmake-undefined-reference-to-function/43965493#43965493", "title": "CMake &quot;undefined reference to function&quot;", "body": "<p>The problem was that the BNO055 library was written in C, and my program was written in C++. </p>\n\n<p>I learned that to use a function defined in a C program, in a C++ program, you have to wrap the include of the C library in an <code>extern \"C\" {}</code> block like so:</p>\n\n<pre><code>extern \"C\" {\n    #include \"bno055.h\"\n}\n#include \"mraa.hpp\"\n\nstruct bno055_t bno055;\nmraa::I2c *i2c(0);\n\nint main() {\n    bno055_init(&amp;bno055);\n    i2c-&gt;address(0x29);\n}\n</code></pre>\n"}], "owner": {"reputation": 3208, "user_id": 1478191, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fa5cc5aa89d2edef8e3d07ac1142cfa2?s=128&d=identicon&r=PG", "display_name": "Noah Huppert", "link": "https://stackoverflow.com/users/1478191/noah-huppert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6100, "favorite_count": 1, "accepted_answer_id": 43965493, "answer_count": 2, "score": 7, "last_activity_date": 1494774622, "creation_date": 1441836069, "last_edit_date": 1441915202, "question_id": 32489826, "link": "https://stackoverflow.com/questions/32489826/cmake-undefined-reference-to-function", "title": "CMake &quot;undefined reference to function&quot;", "body": "<p>I am attempting to use CMake to link a library(<a href=\"https://github.com/BoschSensortec/BNO055_driver\" rel=\"noreferrer\">BNO055 Driver</a>). Since the BNO055 Driver doesn't use CMake and it hasn't been changed for about a year I decided to just download the source files and put them in my project. </p>\n\n<p>I then use CMake to create a library and link it.  </p>\n\n<p>The issue is that the link does not seem to be working. When I compile the project I get a <code>undefined reference to &lt;function&gt;</code> error, where <code>&lt;function&gt;</code> is a function defined by the BNO055 driver.</p>\n\n<p>Am I creating or linking the library incorrectly?<br>\nDo I need to do something else to define these functions?</p>\n\n<p>For the sake of not pasting in 200 lines of code, here is a simplified <code>main.cpp</code> that produces the same error as the real <code>main.cpp</code>. If you would like to see the real <code>main.cpp</code> follow the link bellow to the Github repo  </p>\n\n<pre><code>#include \"bno055.h\"\n#include \"mraa.hpp\"\n\nstruct bno055_t bno055;\nmraa::I2c *i2c(0);\n\nint main() {\n    bno055_init(&amp;bno055);\n    i2c-&gt;address(0x29);\n}\n</code></pre>\n\n<p><strong>CMakeLists.txt</strong>  </p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8.4)\nproject(imc-server)\n\n# CMake\n# -- Config\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11 -pthread\")\n\n# Global\n# -- Include\ninclude(ExternalProject)\n\n# BNO055\n# -- Include\ninclude_directories(${CMAKE_SOURCE_DIR}/bno055)\n\nset(SOURCE_FILES ${SOURCE_FILES}\n        ${CMAKE_SOURCE_DIR}/bno055/bno055.h\n        ${CMAKE_SOURCE_DIR}/bno055/bno055.c)\n\n# MRAA\n# -- Build\nexternalProject_add(mraa\n        GIT_REPOSITORY https://github.com/intel-iot-devkit/mraa.git\n        GIT_TAG        v0.7.5\n)\n\n# Compile\n# -- Source\nset(SOURCE_FILES ${SOURCE_FILES}\n        main.cpp)\n\n# -- Create\nadd_executable(imc-server ${SOURCE_FILES})\nadd_dependencies(imc-server mraa)\n</code></pre>\n\n<p><strong>Relevant Part of Build Log</strong>  </p>\n\n<pre><code>[ 90%] Linking CXX executable imc-server\nCMakeFiles/imc-server.dir/test.cpp.o: In function `main':\n/home/noah/Documents/Inertial-Motion-Capture/imc-server/test.cpp:8: undefined reference to `bno055_init(bno055_t*)'\nCMakeFiles/imc-server.dir/test.cpp.o: In function `mraa::I2c::address(unsigned char)':\n/usr/local/include/mraa/i2c.hpp:99: undefined reference to `mraa_i2c_address'\ncollect2: error: ld returned 1 exit status\nmake[2]: *** [imc-server] Error 1\nmake[1]: *** [CMakeFiles/imc-server.dir/all] Error 2\nmake: *** [all] Error 2\n</code></pre>\n\n<p><a href=\"https://github.com/Noah-Huppert/Inertial-Motion-Capture/tree/39a6196e48623c76323b92d37bf6e811c22f3ad5/imc-server\" rel=\"noreferrer\">Project Github</a>(<code>39a6196</code>)<br>\n<a href=\"http://pastebin.com/Av5p45eK\" rel=\"noreferrer\">Build Log</a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441836250, "post_id": 32489823, "comment_id": 52840334, "body": "You can assign to a variable, because a variable is a container. A function call just returns a value, it makes no sense to assign to it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1441836275, "post_id": 32489823, "comment_id": 52840342, "body": "it doesn&#39;t matter what type it is. It&#39;s like trying to do <code>a + b = 3</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1441836327, "post_id": 32489823, "comment_id": 52840368, "body": "Where do you expect that <code>NULL</code> to be put when you assign to the function?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1441836365, "post_id": 32489823, "comment_id": 52840381, "body": "<code>free(t-&gt;str); return t-&gt;str;</code> causes undefined behaviour. You may not use the value of a freed pointer"}, {"owner": {"reputation": 4446, "user_id": 696485, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4de94e14f977802057b0109d079d95a1?s=128&d=identicon&r=PG", "display_name": "Iskar Jarak", "link": "https://stackoverflow.com/users/696485/iskar-jarak"}, "edited": false, "score": 1, "creation_date": 1441836411, "post_id": 32489823, "comment_id": 52840402, "body": "You seem to have a fundamental misunderstanding about how C works. I suggest you read about <a href=\"http://eli.thegreenplace.net/2011/12/15/understanding-lvalues-and-rvalues-in-c-and-c\" rel=\"nofollow noreferrer\">rvalues and lvalues</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5318920"}, "edited": false, "score": 0, "creation_date": 1441836504, "post_id": 32489823, "comment_id": 52840441, "body": "I wanted the pointer s-&gt;str to point to NULL afterwards. So in this case I think I would have to return the address to the s-&gt;str pointer and then do *freeStrReturnPointer(t) = NULL;"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1441836550, "post_id": 32489823, "comment_id": 52840456, "body": "Also, fwiw making a type named <code>this</code> is a serious source of confusion."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1441838398, "post_id": 32489823, "comment_id": 52841104, "body": "Imagine you have <code>int f() {return 5;}</code> - then it&#39;s the same reason you can&#39;t do <code>f() = 6;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "edited": false, "score": 0, "creation_date": 1441836989, "post_id": 32489868, "comment_id": 52840619, "body": "If you ignore the return value you should prefix the function call with <code>(void)</code> so that the compiler doesn&#39;t get angry."}, {"owner": {"reputation": 22847, "user_id": 1290438, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b689dcfa3833cb016dfbc4cc82bb0eae?s=128&d=identicon&r=PG", "display_name": "zmo", "link": "https://stackoverflow.com/users/1290438/zmo"}, "edited": false, "score": 0, "creation_date": 1441909994, "post_id": 32489868, "comment_id": 52877474, "body": "even though I agree with most of your explanation, your <i>instead you should do</i> part is wrong. What you say there: <code>char * p = freeStrReturnPointer(t); p = NULL;</code>, here <code>p</code> is the rvalue that cannot have a lifetime extending beyond the expression. All you&#39;re doing by going explicit is to make the &quot;programmer mistake&quot; a construct that passes the error! Doing it using a <code>char**</code> is a way that will fix properly the issue, and obviously making it void and not <code>NULL</code>ing it is even better."}], "tags": [], "owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "is_accepted": false, "score": 4, "last_activity_date": 1441837790, "last_edit_date": 1441837790, "creation_date": 1441836284, "answer_id": 32489868, "question_id": 32489823, "link": "https://stackoverflow.com/questions/32489823/set-a-pointer-returned-by-a-function-to-some-address-c/32489868#32489868", "title": "Set a pointer returned by a function to some address C", "body": "<p>You can't do that because the expression <code>freeStrReturnPointer(t)</code> returns an r-value, which needs to be assigned to a variable in order for its lifetime to extend beyond the full expression that contains it. Assigning it to \"null\" literally has no visible side effects and is most likely a programmer mistake, so the language treats it as an error.</p>\n\n<p>Instead you should do</p>\n\n<pre><code>char * p = freeStrReturnPointer(t);\np = NULL;\n</code></pre>\n\n<p>Then, in both expressions <code>p</code> is the l-value, and <code>freeStrReturnPointer(t)</code> is the r-value in the first, and <code>NULL</code> is the r-value in the second.</p>\n\n<p>Alternatively, you could treat <code>freeStrReturnPointer(t)</code> as a void function and just ignore the result (since you don't use it anyways, there's no reason to set it to <code>NULL</code>):</p>\n\n<pre><code>(void) freeStrReturnPointer(t);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "is_accepted": false, "score": 0, "last_activity_date": 1441836394, "creation_date": 1441836394, "answer_id": 32489887, "question_id": 32489823, "link": "https://stackoverflow.com/questions/32489823/set-a-pointer-returned-by-a-function-to-some-address-c/32489887#32489887", "title": "Set a pointer returned by a function to some address C", "body": "<p><code>freeStrReturnPointer()</code> is returning a value (right value to be more precise). In your case it's a pointer but a value nonetheless. As the compiler is telling you, you are basically trying to alter the way the <code>=</code> operator is working. Assignment operator requires a variable of some sort on the left and a value (which can again be a variable) on the right. Your problem here is not restricted to pointers. Try using even basic types or an object and you will still get this error.</p>\n"}, {"tags": [], "owner": {"reputation": 1480, "user_id": 3242671, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z8eR8.jpg?s=128&g=1", "display_name": "blakelead", "link": "https://stackoverflow.com/users/3242671/blakelead"}, "is_accepted": false, "score": 0, "last_activity_date": 1441836575, "creation_date": 1441836575, "answer_id": 32489921, "question_id": 32489823, "link": "https://stackoverflow.com/questions/32489823/set-a-pointer-returned-by-a-function-to-some-address-c/32489921#32489921", "title": "Set a pointer returned by a function to some address C", "body": "<p>It seems that in the <code>freeStrReturnPointer(struct this * t)</code> what you do with <code>t-&gt;str</code> has no incidence on the variable that you created in main, and what you return is actually an rvalue (and you cannot assign something to an rvalue). I would use a pointer to pointer instead : <code>freeStrReturnPointer(struct this ** t)</code></p>\n"}, {"tags": [], "owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "is_accepted": false, "score": 2, "last_activity_date": 1441836899, "creation_date": 1441836899, "answer_id": 32489986, "question_id": 32489823, "link": "https://stackoverflow.com/questions/32489823/set-a-pointer-returned-by-a-function-to-some-address-c/32489986#32489986", "title": "Set a pointer returned by a function to some address C", "body": "<p>I think what you mean to do is return a pointer to the pointer, then dereference that and set the original pointer to <code>NULL</code>.</p>\n\n<p>so in your code I would write:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct this {\n    char* str;\n};\n\nchar** freeStrReturnStrPointer(struct this * t) {\n    free(t-&gt;str);\n    return &amp;t-&gt;str;\n};\n\nint main(){\n    struct this* t = malloc(sizeof(struct this));\n    t-&gt;str = malloc(sizeof(char)*10);\n    *freeStrReturnStrPointer(t) = NULL;\n    free(t);\n}\n</code></pre>\n\n<p>Which would set <code>str</code> to <code>NULL</code> after freeing it.</p>\n\n<p>currently you are just returning the actual pointer to <code>char</code>, not a pointer to the storage of the pointer to <code>char</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 22847, "user_id": 1290438, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b689dcfa3833cb016dfbc4cc82bb0eae?s=128&d=identicon&r=PG", "display_name": "zmo", "link": "https://stackoverflow.com/users/1290438/zmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1441837071, "creation_date": 1441837071, "answer_id": 32490010, "question_id": 32489823, "link": "https://stackoverflow.com/questions/32489823/set-a-pointer-returned-by-a-function-to-some-address-c/32490010#32490010", "title": "Set a pointer returned by a function to some address C", "body": "<p>Well, what you're trying to do is equivalent of the following:</p>\n\n<pre><code>char *p = freeStrReturnPointer(t); \np = NULL; \n</code></pre>\n\n<p>which will not reset <code>t-&gt;str</code>! Your <code>freeStrReturnPointer()</code> function is returning a <code>char*</code> value that points to a string. If you assign to it, then you overwrite where it points to, making it useless code.</p>\n\n<p>If you do:</p>\n\n<pre><code>char *p = freeStrReturnPointer(t); \nprintf(\"%p\\n\", t-&gt;str);\np = NULL; \nprintf(\"%p\\n\", t-&gt;str);\n</code></pre>\n\n<p>You'll get:</p>\n\n<pre><code>0x012345678901\n0x012345678901\n</code></pre>\n\n<p>as output.</p>\n\n<p>If you want to reset <code>t-&gt;str</code> you then need to use a double pointer:</p>\n\n<pre><code>char** freeStrReturnPointer(struct this * t) {\n    free(t-&gt;str);\n    return &amp;(t-&gt;str);\n};\n</code></pre>\n\n<p>and within main():</p>\n\n<pre><code>char **p = freeStrReturnPointer(t);\nprintf(\"%p\\n\", t-&gt;str);\n*p = NULL;\nprintf(\"%p\\n\", t-&gt;str);\n</code></pre>\n\n<p>which will then output something like:</p>\n\n<pre><code>0x012345678901\n0x0\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5318920"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1441837790, "creation_date": 1441836045, "question_id": 32489823, "link": "https://stackoverflow.com/questions/32489823/set-a-pointer-returned-by-a-function-to-some-address-c", "title": "Set a pointer returned by a function to some address C", "body": "<p>I was writing some C code and I got the following problem. Suppose we have this really simple program: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct this {\n    char* str;\n};\n\nchar* freeStrReturnPointer(struct this * t) {\n    free(t-&gt;str);\n    return t-&gt;str;\n};\n\nint main() {\n    // standard mallocing going on\n    struct this* t = malloc(sizeof(struct this));\n    t-&gt;str = malloc(sizeof(char)*10);\n    // here is the problematic part!\n    freeStrReturnPointer(t) = NULL;\n    // end of problematic part\n    free(t);\n    exit(0);\n}\n</code></pre>\n\n<p>Compilation gives the following problem:</p>\n\n<pre><code>test.c: In function \u2018main\u2019:\ntest.c:18:29: error: lvalue required as left operand of assignment\n     freeStrReturnPointer(t) = NULL;\n</code></pre>\n\n<p>My question is: If the function freeStrReturnPointer returns a pointer char*, why can I not set it to NULL? The following would definitely work:</p>\n\n<pre><code>char* p;\np = NULL;\n</code></pre>\n\n<p>What is the difference here? Why can I not assign a value to the returned pointer immediately?</p>\n\n<p>Caveat: I realize I can just set the pointer to null in the function, but that is not the point of the question.</p>\n"}, {"tags": ["c", "sockets", "udp", "communication"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1441836253, "post_id": 32489515, "comment_id": 52840335, "body": "To achieve <i>reliable packet-oriented bi-directional communication</i>, you can either A) add reliability to UDP, or B) add a packet layer to TCP. I&#39;ve always chosen B, since it&#39;s much much easier."}, {"owner": {"reputation": 1529, "user_id": 3884536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a012f11c32e66223b1a149e37ee4d839?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Jaritz", "link": "https://stackoverflow.com/users/3884536/stefan-jaritz"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1441838809, "post_id": 32489515, "comment_id": 52841243, "body": "@TCP: is there a tutorial describing that available?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1441839864, "post_id": 32489515, "comment_id": 52841549, "body": "You realize that <code>recvfrom()</code> gives you the source address? You don&#39;t need both peers running a server."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1441841048, "post_id": 32489515, "comment_id": 52841851, "body": "Tutorial -- On the transmit side, compose a packet with a two byte start code (0xAA 0x55), a two byte length (MSB first), the payload, and a two byte end code (0x33 0xCC). Send packet over TCP with <code>send</code>.  On the receive side, call <code>recv</code> as many times as necessary to get the first 4 bytes (verify the start code). Call <code>recv</code> as many times as necessary to get the rest of the packet (the payload and end code). Verify the end code. The purpose of the start/end codes is to help you during development/debugging. If your code is perfect, the start/end codes will never be wrong, TCP won&#39;t allow it."}, {"owner": {"reputation": 1529, "user_id": 3884536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a012f11c32e66223b1a149e37ee4d839?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Jaritz", "link": "https://stackoverflow.com/users/3884536/stefan-jaritz"}, "edited": false, "score": 0, "creation_date": 1441891682, "post_id": 32489515, "comment_id": 52865668, "body": "I modified my code to TCP. It works fine in the loopback. To test the code I have several scenarios: 1st - Win to Win on PC 2nd - Win to Ubuntu(a virtualBox) on PC 3d - Ubuntu(a virtualBox) on PC to RPi 4th - Win on PC to RPi It seems that there is a problem connecting to a server located outside of the OS. I changed the code listing above"}], "answers": [{"comments": [{"owner": {"reputation": 1529, "user_id": 3884536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a012f11c32e66223b1a149e37ee4d839?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Jaritz", "link": "https://stackoverflow.com/users/3884536/stefan-jaritz"}, "edited": false, "score": 0, "creation_date": 1441891505, "post_id": 32490341, "comment_id": 52865513, "body": "I took a look. I think for my simple problem your solution is a little oversized. But anyway it&#39;s looking quite well developed. Thanks so far. Now I am trying TCP sockets."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1441838791, "creation_date": 1441838791, "answer_id": 32490341, "question_id": 32489515, "link": "https://stackoverflow.com/questions/32489515/howto-setup-a-bidirectional-udp-connection-for-a-message-based-communication/32490341#32490341", "title": "howto: setup a bidirectional UDP connection for a message based communication", "body": "<p>If you need a UDP file transfer application, try <a href=\"http://uftp-multicast.sourceforge.net\" rel=\"nofollow\">UFTP</a>.  </p>\n\n<p>I wrote it primarily for multicast, but it works just as well with unicast.  Give it a try, and let me know how it goes.</p>\n"}, {"tags": [], "owner": {"reputation": 1529, "user_id": 3884536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a012f11c32e66223b1a149e37ee4d839?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Jaritz", "link": "https://stackoverflow.com/users/3884536/stefan-jaritz"}, "is_accepted": true, "score": 0, "last_activity_date": 1442243349, "creation_date": 1442243349, "answer_id": 32568188, "question_id": 32489515, "link": "https://stackoverflow.com/questions/32489515/howto-setup-a-bidirectional-udp-connection-for-a-message-based-communication/32568188#32568188", "title": "howto: setup a bidirectional UDP connection for a message based communication", "body": "<p>The TCP approach works fine. With the code below a full duplex connection with asynchronous RX TX works fine. Its tested in Linux and Windows:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\n#include &lt;errno.h&gt;\n\n// sockets\n#ifdef WIN32\n    #ifndef WINVER\n        // set min win version to Win XP\n        #define WINVER 0x0501\n    #endif\n    //use lib: ws2_32\n    #include &lt;winsock2.h&gt;\n    #include &lt;ws2tcpip.h&gt;\n#else\n\n    #include &lt;sys/types.h&gt;\n    #include &lt;sys/socket.h&gt;\n    #include &lt;netinet/in.h&gt;\n    #include &lt;netdb.h&gt;\n\n    #include &lt;sys/un.h&gt;\n    #include &lt;unistd.h&gt;\n    #include &lt;arpa/inet.h&gt;\n\n    #define ADDR_ANY    INADDR_ANY\n    #define SOCKET_ERROR    (-1)\n    #define INVALID_SOCKET (SOCKET)(~0)\n    #define closesocket(x) (close(x))\n\n    typedef int SOCKET;\n    typedef struct sockaddr_in SOCKADDR_IN;\n    typedef struct sockaddr SOCKADDR;\n\n#endif\n\n\ntypedef int (* TfkpTCPcallback) (uint8_t * pData, size_t amount);\n\n// size of the header\n#define dStjTCPSocketControlMsg (sizeof(uint_32))\n\n// start data msg struct\n// &lt;uint_32&gt; id = 's'\n// &lt;uint_32&gt; len\n\n// res struct\n// &lt;uint_32&gt; id = 'r'\n// &lt;uint_32&gt; error code (0 = no error)\n\nenum eStjTCPSocketControlMsgIDs {\n    eStjTCPSocketControlMsgID_start = 's',\n    eStjTCPSocketControlMsgID_packet = 'p',\n    eStjTCPSocketControlMsgID_result = 'r'\n};\n\nenum eStjTCPSocketControlMsgErrorIDs {\n    eStjTCPSocketControlMsgErrorID_noError = 0,\n    eStjTCPSocketControlMsgErrorID_otherError,\n    eStjTCPSocketControlMsgErrorID_socket,\n    eStjTCPSocketControlMsgErrorID_msgID,\n    eStjTCPSocketControlMsgErrorID_realloc,\n    eStjTCPSocketControlMsgErrorID_amount,\n    eStjTCPSocketControlMsgErrorID_wrongPacket,\n\n};\n\n//! type to control a udp socket based message communication\ntypedef struct SstjTCPSocketControl {\n    pthread_t           srvThr;\n\n    SOCKET              sCli;   //!&lt; socket for the input\n    SOCKET              sSrv;   //!&lt; socket for the output\n\n    struct sockaddr_in  sAddrCli; //!&lt; client address\n    int                 cliConnectedFlag; //!&lt; &lt;&gt;0 if the client is connected\n\n    uint8_t *           pMsgBuffer;\n    size_t              msgBufferSize;\n\n    sem_t               serverSign;\n    TfkpTCPcallback     rxCB;\n\n    int                 maxTXsize;\n} TstjTCPSocketControl;\n\n//! a global variable to control a udp message based communication\nTstjTCPSocketControl gTCPsocketControl = {\n    .srvThr = NULL,\n    .sCli = -1,\n    .sSrv = -1,\n    .cliConnectedFlag = 0,\n    .pMsgBuffer = NULL,\n    .msgBufferSize = 0,\n};\n\nstatic inline int _TCPcontrolRecvResult(SOCKET s) {\n    int r;\n    uint32_t contrlMsg[2];\n\n    // recv that the server is ready to transmit\n    r = recv(s , (char *)contrlMsg , sizeof(contrlMsg) , 0);\n    if(r &lt; 0) {\n        return eStjTCPSocketControlMsgErrorID_socket;\n    }\n    if (r != sizeof(contrlMsg)) {\n        return eStjTCPSocketControlMsgErrorID_amount;\n    }\n    if (contrlMsg[0] != eStjTCPSocketControlMsgID_result) {\n        return eStjTCPSocketControlMsgErrorID_msgID;\n    }\n\n    return contrlMsg[1];\n}\n\nstatic inline int _TCPcontrolSendResult(SOCKET s, uint32_t errorCode) {\n    uint32_t contrlMsg[2];\n    int r;\n\n    contrlMsg[0] = eStjTCPSocketControlMsgID_result;\n    contrlMsg[1] = errorCode;\n    r = send(s , (char *)contrlMsg , sizeof(contrlMsg) , 0);\n    if (r &lt; 0) return eStjTCPSocketControlMsgErrorID_socket;\n    return eStjTCPSocketControlMsgErrorID_noError;\n}\n\n//! sends a block of data\nint TCPcontrolSend(uint8_t * pD, size_t dataSize) {\n    int r;\n    uint32_t contrlMsg[2];\n    uint32_t p;\n    uint32_t packets;\n    uint8_t * pB;\n    size_t  am, amTotal;\n\n    // check if we have to connect\n    if (!gTCPsocketControl.cliConnectedFlag) {\n        if (connect(gTCPsocketControl.sCli , (struct sockaddr *)&amp;gTCPsocketControl.sAddrCli , sizeof(gTCPsocketControl.sAddrCli)) &lt; 0){\n            gTCPsocketControl.cliConnectedFlag = 0;\n            return -1;\n        } else {\n            gTCPsocketControl.cliConnectedFlag = 1;\n        }\n\n    }\n    //  ok we are connected - lets send the data\n    start:\n\n    contrlMsg[0] = eStjTCPSocketControlMsgID_start;\n    contrlMsg[1] = dataSize;\n    // send that we what to transmit some data\n    r = send(gTCPsocketControl.sCli , (char *)contrlMsg , sizeof(contrlMsg) , 0);\n    if(r &lt; 0) {\n        return -2;\n    }\n    // recv that the server is ready to transmit\n    r = _TCPcontrolRecvResult(gTCPsocketControl.sCli);\n    if (eStjTCPSocketControlMsgErrorID_socket == r) return -3;\n    if (eStjTCPSocketControlMsgErrorID_amount == r) goto start;\n\n    // ok let's send\n    packets = dataSize / gTCPsocketControl.maxTXsize;\n    if (dataSize % gTCPsocketControl.maxTXsize) packets++;\n    pB = pD;\n    amTotal = dataSize;\n\n    for (p = 0; p &lt; packets; p++) {\n        // send packet pre header\n        contrlMsg[0] = eStjTCPSocketControlMsgID_packet;\n        contrlMsg[1] = p;\n        r = send(gTCPsocketControl.sCli , (char *)contrlMsg , sizeof(contrlMsg) , 0);\n        if(r &lt; 0) {\n            return -4;\n        }\n        r = _TCPcontrolRecvResult(gTCPsocketControl.sCli);\n        if (eStjTCPSocketControlMsgErrorID_socket == r) return -5;\n        if (eStjTCPSocketControlMsgErrorID_amount == r) goto start;\n\n        am = (amTotal &gt; gTCPsocketControl.maxTXsize) ? gTCPsocketControl.maxTXsize : amTotal;\n\nsendPacket:\n        r = send(gTCPsocketControl.sCli ,(char *) pB ,am , 0);\n        if(r &lt; 0) {\n            return -5;\n        }\n\n        // get ack from the server\n        r = _TCPcontrolRecvResult(gTCPsocketControl.sCli);\n        if (eStjTCPSocketControlMsgErrorID_socket == r) return -3;\n        if (eStjTCPSocketControlMsgErrorID_amount == r) goto sendPacket;\n\n        pB += am;\n        amTotal -= am;\n    }\n    return r;\n}\n\n\n//! the message pump\nvoid * TCPcontrolMsgPump (void *pParams) {\n    int                 r;\n    uint32_t            contrlMsg[2];\n    struct sockaddr_in  cliAddr;\n    SOCKET              sCli;\n    uint32_t            dataSize;\n    socklen_t           cliAddrSize;\n    uint32_t            packets;\n    uint8_t *           pB;\n    size_t              am, amTotal;\n    uint32_t            p;\n\n\n    sem_post(&amp;gTCPsocketControl.serverSign);\n\n    //accept connection from an incoming client\n    cliAddrSize = sizeof(struct sockaddr_in);\n    sCli = accept(gTCPsocketControl.sSrv, (struct sockaddr *)&amp;cliAddr, (socklen_t*)&amp;cliAddrSize);\n    if (sCli &lt; 0) goto end;\n\n    // run the pump\n    for (;;) {\n        // ok we are connected\n        // read start message\n        r = recv(sCli , (char *)contrlMsg , sizeof(contrlMsg), 0);\n        if (r &lt; 0) goto end;\n        if (r != sizeof(contrlMsg)) {\n            _TCPcontrolSendResult(sCli, eStjTCPSocketControlMsgErrorID_amount);\n            continue;\n        }\n        if (contrlMsg[0] != eStjTCPSocketControlMsgID_start) {\n            _TCPcontrolSendResult(sCli, eStjTCPSocketControlMsgErrorID_msgID);\n            continue;\n        }\n\n        dataSize = contrlMsg[1];\n        // check if we have to realloc the rx buffer\n        if (gTCPsocketControl.msgBufferSize &lt; dataSize) {\n             uint8_t *pNB = realloc(gTCPsocketControl.pMsgBuffer, dataSize);\n             if (!pNB) {\n                 _TCPcontrolSendResult(sCli, eStjTCPSocketControlMsgErrorID_realloc);\n                 continue;\n             }\n             gTCPsocketControl.pMsgBuffer = pNB;\n             gTCPsocketControl.msgBufferSize = dataSize;\n        }\n\n        _TCPcontrolSendResult(sCli, eStjTCPSocketControlMsgErrorID_noError);\n\n        // recv data\n        packets = dataSize / gTCPsocketControl.maxTXsize;\n        if (dataSize % gTCPsocketControl.maxTXsize) packets++;\n        pB = gTCPsocketControl.pMsgBuffer;\n        amTotal = dataSize;\n\n        for (p = 0; p &lt; packets; p++) {\n            // receive packet header\n            r = recv(sCli , (char *)contrlMsg , sizeof(contrlMsg), 0);\n            if (r &lt; 0) goto end;\n            if (r != sizeof(contrlMsg)) {\n                _TCPcontrolSendResult(sCli, eStjTCPSocketControlMsgErrorID_amount);\n                continue;\n            }\n            if (contrlMsg[0] != eStjTCPSocketControlMsgID_packet) {\n                _TCPcontrolSendResult(sCli, eStjTCPSocketControlMsgErrorID_msgID);\n                continue;\n            }\n            if (contrlMsg[1] != p) {\n                _TCPcontrolSendResult(sCli, eStjTCPSocketControlMsgErrorID_wrongPacket);\n                continue;\n            }\n            _TCPcontrolSendResult(sCli, eStjTCPSocketControlMsgErrorID_noError);\n\n            am = (amTotal &gt; gTCPsocketControl.maxTXsize) ? gTCPsocketControl.maxTXsize : amTotal;\n\n            // ok the next message will contain the data\nrecvPacket:\n            r = recv(sCli , (char *)pB , am, 0);\n            if (r &lt; 0) goto end;\n            if (r != am) {\n                _TCPcontrolSendResult(sCli, eStjTCPSocketControlMsgErrorID_amount);\n                goto recvPacket;\n            }\n\n            _TCPcontrolSendResult(sCli, eStjTCPSocketControlMsgErrorID_noError);\n            pB += am;\n            amTotal -= am;\n        }\n\n        // handle message\n        gTCPsocketControl.rxCB(gTCPsocketControl.pMsgBuffer , dataSize);\n        continue;\n    }\nend:\n    sem_post(&amp;gTCPsocketControl.serverSign);\n    return (void *) -1;\n}\n\n//! init\nint TCPcontrolInit (\n        int             serverPort,     //!&lt; server tx port number - best over 1000\n        const char *    szClient,       //!&lt; \"family-PC\" or \"192.168.1.3\"\n        int             clientPort,     //!&lt; client tx port number\n        TfkpTCPcallback rxCB,           //!&lt; the rx data callback\n        size_t          rxBufferSize,   //!&lt; the size of the rx buffer\n        size_t          maxTCPdataSize  //!&lt; maximum size of a TCP datagram (400 Bytes seems a good size)\n    ) {\n#ifdef WIN32\n    // local data\n    WSADATA     wsaData;\n\n    // start sockets\n    if ((WSAStartup(MAKEWORD(2, 2), &amp;wsaData))) {\n        perror(\"WSAStartup failed!\");\n        return -1;\n    }\n#endif\n    char *              szIPserver;\n    char *              szIPclient;\n    struct hostent *    pHostDescr;\n    struct sockaddr_in  sAddr;\n\n    // -----------------\n    // get ip strings\n\n    // get ip of the server\n    pHostDescr = gethostbyname(\"localhost\");\n    // check if found a host\n    if (!pHostDescr) {\n        return -11;\n    }\n    szIPserver = inet_ntoa(*(struct in_addr*)*pHostDescr-&gt;h_addr_list);\n\n    // get ip of the client\n    if (strcmp(szClient, \"\")) {\n        pHostDescr = gethostbyname(szClient);\n    } else {\n        pHostDescr = gethostbyname(\"localhost\");\n    }\n    // check if found a host\n    if (!pHostDescr) {\n        return -12;\n    }\n    szIPclient = inet_ntoa(*(struct in_addr*)*pHostDescr-&gt;h_addr_list);\n\n\n    // -----------------\n    // try to create sockets\n\n    // try to create socket for the server\n    gTCPsocketControl.sSrv = socket(PF_INET , SOCK_STREAM, IPPROTO_TCP);\n    if (-1 == gTCPsocketControl.sSrv) return -21;\n    // try to create socket for the client\n    gTCPsocketControl.sCli = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (-1 == gTCPsocketControl.sCli) return -22;\n\n    // -----------------\n    // bind input to IP and port\n    memset(&amp;sAddr,0,sizeof(sAddr));\n    sAddr.sin_family = PF_INET;\n    sAddr.sin_addr.s_addr = INADDR_ANY;\n    sAddr.sin_port = htons( serverPort );\n\n    // bind server socket to address\n    if (bind(gTCPsocketControl.sSrv, (SOCKADDR *)&amp;sAddr, sizeof(SOCKADDR_IN))) {\n        return -31;\n    }\n    // and listen for incoming connections\n    if (listen(gTCPsocketControl.sSrv , 3)) {\n        return -32;\n    }\n\n    // -----------------\n    // connect output to IP and port\n    memset(&amp;gTCPsocketControl.sAddrCli,0,sizeof(sAddr));\n    gTCPsocketControl.sAddrCli.sin_family = PF_INET;\n    gTCPsocketControl.sAddrCli.sin_addr.s_addr = inet_addr(szIPclient);\n    gTCPsocketControl.sAddrCli.sin_port = htons( clientPort );\n\n    if (connect(gTCPsocketControl.sCli , (struct sockaddr *)&amp;gTCPsocketControl.sAddrCli , sizeof(gTCPsocketControl.sAddrCli)) &lt; 0){\n        gTCPsocketControl.cliConnectedFlag = 0;\n    } else {\n        gTCPsocketControl.cliConnectedFlag = 1;\n    }\n\n\n    // create sign semaphore\n    sem_init(&amp;gTCPsocketControl.serverSign, 0, 0);\n\n    // create buffers\n    gTCPsocketControl.pMsgBuffer = malloc(rxBufferSize);\n    if (!gTCPsocketControl.pMsgBuffer) {\n        return -32;\n    }\n    gTCPsocketControl.msgBufferSize = rxBufferSize;\n\n    // set callback\n    gTCPsocketControl.rxCB = rxCB;\n\n    gTCPsocketControl.maxTXsize = maxTCPdataSize;\n\n    // start rx thread\n    if(pthread_create(&amp;gTCPsocketControl.srvThr , NULL, TCPcontrolMsgPump, NULL)) {\n        return -40;\n    }\n    // wait till rx server is running\n    sem_wait(&amp;gTCPsocketControl.serverSign);\n\n    return 0;\n}\n\n//! closes the TCP server and client\nvoid TCPcontrolClose () {\n    closesocket (gTCPsocketControl.sSrv);\n    closesocket (gTCPsocketControl.sCli);\n\n    free(gTCPsocketControl.pMsgBuffer);\n\n    memset(&amp;gTCPsocketControl, 0, sizeof(TstjTCPSocketControl));\n\n#ifdef WIN32\n    WSACleanup();\n#endif\n}\n\n\n//! inits the TCP control via stdin inputs\nint TCPcontrolInitFromStdIn (\n        TfkpTCPcallback rxCB,           //!&lt; the rx data callback\n        size_t          rxBufferSize,   //!&lt; the size of the rx buffer\n        size_t          maxTCPdataSize  //!&lt; maximum size of a TCP datagram (400 Bytes seems a good size)\n    ) {\n    int srvPort;\n    int clientPort;\n    const size_t ipLen = 256;\n    char szIP[ipLen];\n    const size_t dummyStrLen = 100;\n    char szDummy[dummyStrLen];\n\n    int r;\n\n    printf(\"====| TCP client/server setup |====\\n\");\n    printf(\"server listen port: \");\n    fgets(szDummy, dummyStrLen, stdin);\n    szDummy[strcspn(szDummy, \"\\r\\n\")] = 0;\n    srvPort = atoi(szDummy);\n\n    printf(\"client send IP address or name: \");\n    fgets(szIP, 255, stdin);\n    szIP[strcspn(szIP, \"\\r\\n\")] = 0;\n\n    printf(\"client port: \");\n    fgets(szDummy, dummyStrLen, stdin);\n    szDummy[strcspn(szDummy, \"\\r\\n\")] = 0;\n    clientPort = atoi(szDummy);\n\n    r = TCPcontrolInit (\n            srvPort,        //!&lt; server port number - best over 1000\n            szIP,           //!&lt; \"family-PC\" or \"192.168.1.3\"\n            clientPort,     //!&lt; client port number\n            rxCB,           //!&lt; the rx data callback\n            rxBufferSize,   //!&lt; the size of the rx buffer\n            maxTCPdataSize  //!&lt; maximum size of a TCP datagram (400 Bytes seems a good size)\n        );\n\n    if (!r) {\n        printf(\"setup finished successfully!\\n\");\n        printf(\"===================================\\n\");\n    } else {\n        printf(\"setup error: %i \\n\", r);\n        printf(\"===================================\\n\");\n    }\n    return r;\n}\n\n// -----------------------------------------\n// test\n\nenum eStates {\n    eState_std = 0,\n    eState_stressTest = 1,\n    eState_multiTX = 2\n};\n\nint stateID = eState_std;\n#define  dSTsize (1024 * 1024)\nuint8_t STB[dSTsize];\n\n\nint rxCB (uint8_t * pData, size_t amount) {\n    size_t i;\n\n    switch (stateID) {\n        case eState_std:\n            pData[amount] = 0;\n            printf(\"rx: %s\\n\",pData);\n            break;\n        case eState_stressTest:\n            for (i = 0; i &lt; dSTsize; i++) {\n                if (pData[i] != (uint8_t)((size_t)i &amp; 0xFF)) {\n                    fprintf(stderr, \"stress test error at position %i\\n\",(int) i);\n                    fflush(stdout);\n                    return 0;\n                }\n            }\n            printf(\"rx: stress test successful\\n\");\n            break;\n        case eState_multiTX:\n            printf(\"rx %iBytes\\n\", (int)amount);\n            break;\n    }\n    fflush(stdout);\n    return 0;\n}\n\n\nint main(void) {\n    const size_t dummyStrLen = 1024;\n    char szDummy[dummyStrLen];\n    size_t i;\n    int r, am, j;\n\n    // pre init for the stress test\n    for (i = 0; i &lt; dSTsize; i++) {\n        STB[i] = (uint8_t)((size_t)i &amp; 0xFF);\n    }\n\n\n    printf(\"TCP demo\\n\");\n\n    if (TCPcontrolInitFromStdIn(rxCB, 4096, 500)) goto errorExit;\n\n\n    printf(\"commands:\\n s - send\\n t - tx stress test\\n a - activate/deactivate rx for stress test\\n m - multi tx test\\n h - help\\n e - exit\\n\");\n    for(;;) {\n        printf(\"command: \");\n        fgets(szDummy, dummyStrLen, stdin);\n        switch(tolower(szDummy[0])) {\n            case 's':\n                stateID = eState_std;\n                fgets(szDummy, dummyStrLen, stdin);\n                szDummy[strcspn(szDummy, \"\\r\\n\")] = 0;\n                r = TCPcontrolSend((uint8_t *)szDummy, strlen(szDummy)+1);\n                if(r) {\n                    fprintf(stderr,\"sending data failed with code %i(%s)\\n\", r, strerror(errno));\n                } else {\n                    printf(\"succeeded\\n\");\n                }\n                break;\n            case 't':\n                printf(\"sending packets...\\n\");\n                r = TCPcontrolSend(STB, dSTsize);\n\n                if (r) {\n                    fprintf(stderr,\"stress test sending data failed with code %i\\n\", r);\n                } else {\n                    printf(\"succeeded\\n\");\n                }\n                break;\n            case 'a':\n                stateID = eState_stressTest;\n                printf(\"stress test RX now active\\n\");\n                break;\n            case 'm':\n                stateID = eState_multiTX;\n                printf(\"amount of transmissions: \");\n                fgets(szDummy, dummyStrLen, stdin);\n                szDummy[strcspn(szDummy, \"\\r\\n\")] = 0;\n                am = atoi(szDummy);\n                for (j = 0; j &lt; am; j++) {\n                    printf(\"tm %i...\", j);\n                    sprintf(szDummy,\"tm %i\",j);\n                    r = TCPcontrolSend((uint8_t *)szDummy, strlen(szDummy)+1);\n                    if (!r) printf(\"successful\\n\");\n                        else printf(\"failed\\n\");\n                }\n                break;\n            case 'h':\n                printf(\"commands:\\n s - send\\n t - tx stress test\\n a - activate/deactivate rx for stress test\\n m - multi tx test\\n h - help\\n e - exit\\n\");\n                break;\n            case 'e':\n                goto stdExit;\n        }\n    }\n\n\nstdExit:\n\n    TCPcontrolClose ();\n    return EXIT_SUCCESS;\n\nerrorExit:\n\n    TCPcontrolClose ();\n    return EXIT_FAILURE;\n}\n</code></pre>\n\n<p>a note to the stress test and the initial connection. Under weak WLAN connections it could took some time.</p>\n"}], "owner": {"reputation": 1529, "user_id": 3884536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a012f11c32e66223b1a149e37ee4d839?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Jaritz", "link": "https://stackoverflow.com/users/3884536/stefan-jaritz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1899, "favorite_count": 0, "accepted_answer_id": 32568188, "answer_count": 2, "score": 0, "last_activity_date": 1449885716, "creation_date": 1441834402, "last_edit_date": 1449885716, "question_id": 32489515, "link": "https://stackoverflow.com/questions/32489515/howto-setup-a-bidirectional-udp-connection-for-a-message-based-communication", "title": "howto: setup a bidirectional UDP connection for a message based communication", "body": "<p>The problem I want to solve is to build a stable connection for exchanging data between a PC and my Raspberry Pi(RPi). They are connected via WLAN in a LAN by a router. </p>\n\n<p>I created a simple way, by defining on every device a client(c) and a server(s). I give in short the pseudo-code for that:</p>\n\n<pre><code>@init:\ns = createSocket\nc = createSocket\ns = bind to \"localhost\"\ncreate thread for message handling\n\n@message handling thread:\nmsg = recvfrom(s)\n\n@main:\ninit(serverPort=10001, clientIP=\"raspberryPi\", clientPort=10002)\nsendto(c, \"hello\")\n</code></pre>\n\n<p>The problem with UDP via WLAN is, that some messages can get lost.  So I decided to create a simple protocol for that data exchange. The idea is that the server acknowledges the reception of the data. The problem changes into that kind pseudo-code:</p>\n\n<pre><code>@init:\ns = createSocket\nc = createSocket\ns = bind to \"localhost\"\ncreate thread for message handling\n\n@message handling thread:\nmsg = recvfrom(s)\nsendto (c, \"ack\")\n\n@main:\nsendto(c, \"hello\")\nwait for 100ms for res = recvfrom(s)\nif res == timeout goto sendto\nif res &lt;&gt; 'ack' wrong message\n</code></pre>\n\n<p>I am running into a problem, that the sending and receiving process using both recvfrom(s). Also the easy loop back test by using the same port for client and server can not be done.</p>\n\n<p>Any ideas?</p>\n\n<p>Some not working c code follows:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\n#include &lt;errno.h&gt;\n\n// sockets\n#ifdef WIN32\n    #ifndef WINVER\n        // set min win version to Win XP\n        #define WINVER 0x0501\n    #endif\n    //use lib: ws2_32\n    #include &lt;winsock2.h&gt;\n    #include &lt;ws2tcpip.h&gt;\n#else\n\n    #include &lt;sys/types.h&gt;\n    #include &lt;sys/socket.h&gt;\n    #include &lt;netinet/in.h&gt;\n    #include &lt;netdb.h&gt;\n\n    #include &lt;sys/un.h&gt;\n    #include &lt;unistd.h&gt;\n    #include &lt;arpa/inet.h&gt;\n\n    #define ADDR_ANY    INADDR_ANY\n    #define SOCKET_ERROR    (-1)\n    #define INVALID_SOCKET (SOCKET)(~0)\n    #define closesocket(x) (close(x))\n\n    typedef int SOCKET;\n    typedef struct sockaddr_in SOCKADDR_IN;\n    typedef struct sockaddr SOCKADDR;\n\n#endif\n\n\ntypedef int (* TfkpTCPcallback) (uint8_t * pData, size_t amount);\n\n// size of the header\n#define dStjTCPSocketControlMsg (sizeof(uint_32))\n\n// start data msg struct\n// &lt;uint_32&gt; id = 's'\n// &lt;uint_32&gt; len\n\n// res struct\n// &lt;uint_32&gt; id = 'r'\n// &lt;uint_32&gt; error code (0 = no error)\n\nenum eStjTCPSocketControlMsgIDs {\n    eStjTCPSocketControlMsgID_start = 's',\n    eStjTCPSocketControlMsgID_result = 'r'\n};\n\nenum eStjTCPSocketControlMsgErrorIDs {\n    eStjTCPSocketControlMsgErrorID_noError = 0,\n    eStjTCPSocketControlMsgErrorID_otherError,\n    eStjTCPSocketControlMsgErrorID_socket,\n    eStjTCPSocketControlMsgErrorID_msgID,\n    eStjTCPSocketControlMsgErrorID_realloc,\n    eStjTCPSocketControlMsgErrorID_amount,\n\n};\n\n//! type to control a udp socket based message communication\ntypedef struct SstjTCPSocketControl {\n    pthread_t           srvThr;\n\n    SOCKET              sCli;   //!&lt; socket for the input\n    SOCKET              sSrv;   //!&lt; socket for the output\n\n    struct sockaddr_in  sAddrCli; //!&lt; client address\n    int                 cliConnectedFlag; //!&lt; &lt;&gt;0 if the client is connected\n\n    uint8_t *           pMsgBuffer;\n    size_t              msgBufferSize;\n\n    sem_t               serverSign;\n    TfkpTCPcallback     rxCB;\n} TstjTCPSocketControl;\n\n//! a global variable to control a udp message based communication\nTstjTCPSocketControl gTCPsocketControl = {\n    .srvThr = NULL,\n    .sCli = -1,\n    .sSrv = -1,\n    .cliConnectedFlag = 0,\n    .pMsgBuffer = NULL,\n    .msgBufferSize = 0,\n};\n\nint recvResult(SOCKET s) {\n    int r;\n    uint32_t contrlMsg[2];\n\n    // recv that the server is ready to transmit\n    r = recv(s , (char *)contrlMsg , sizeof(contrlMsg) , 0);\n    if(r &lt; 0) {\n        return eStjTCPSocketControlMsgErrorID_socket;\n    }\n    if (r != sizeof(contrlMsg)) {\n        return eStjTCPSocketControlMsgErrorID_amount;\n    }\n    if (contrlMsg[0] != eStjTCPSocketControlMsgID_result) {\n        return eStjTCPSocketControlMsgErrorID_msgID;\n    }\n\n    return contrlMsg[1];\n}\n\nint sendResult(SOCKET s, uint32_t errorCode) {\n    uint32_t contrlMsg[2];\n    int r;\n\n    contrlMsg[0] = eStjTCPSocketControlMsgID_result;\n    contrlMsg[1] = errorCode;\n    r = send(s , (char *)contrlMsg , sizeof(contrlMsg) , 0);\n    if (r &lt; 0) return eStjTCPSocketControlMsgErrorID_socket;\n    return eStjTCPSocketControlMsgErrorID_noError;\n}\n\n//! sends a block of data\nint TCPcontrolSend(uint8_t * pD, size_t dataSize) {\n    int r;\n    uint32_t contrlMsg[2];\n\n    // check if we have to connect\n    if (!gTCPsocketControl.cliConnectedFlag) {\n        if (connect(gTCPsocketControl.sCli , (struct sockaddr *)&amp;gTCPsocketControl.sAddrCli , sizeof(gTCPsocketControl.sAddrCli)) &lt; 0){\n            gTCPsocketControl.cliConnectedFlag = 0;\n            return -1;\n        } else {\n            gTCPsocketControl.cliConnectedFlag = 1;\n        }\n\n    }\n    //  ok we are connected - lets send the data\n    start:\n\n    contrlMsg[0] = eStjTCPSocketControlMsgID_start;\n    contrlMsg[1] = dataSize;\n    // send that we what to transmit some data\n    r = send(gTCPsocketControl.sCli , (char *)contrlMsg , sizeof(contrlMsg) , 0);\n    if(r &lt; 0) {\n        return -2;\n    }\n    // recv that the server is ready to transmit\n    r = recvResult(gTCPsocketControl.sCli);\n    if (eStjTCPSocketControlMsgErrorID_socket == r) return -3;\n    if (eStjTCPSocketControlMsgErrorID_amount == r) goto start;\n\n    // ok let's send\n    r = send(gTCPsocketControl.sCli , pD ,dataSize , 0);\n    if(r &lt; 0) {\n        return -2;\n    }\n    // get ack from the server\n    r = recvResult(gTCPsocketControl.sCli);\n    if (eStjTCPSocketControlMsgErrorID_socket == r) return -3;\n    if (eStjTCPSocketControlMsgErrorID_amount == r) goto start;\n    return r;\n}\n\n\n//! the message pump\nvoid * TCPcontrolMsgPump (void *pParams) {\n    int                 r;\n    uint32_t            contrlMsg[2];\n    struct sockaddr_in  cliAddr;\n    SOCKET              sCli;\n    uint32_t            dataSize;\n    socklen_t           cliAddrSize;\n\n    sem_post(&amp;gTCPsocketControl.serverSign);\n\n    //accept connection from an incoming client\n    cliAddrSize = sizeof(struct sockaddr_in);\n    sCli = accept(gTCPsocketControl.sSrv, (struct sockaddr *)&amp;cliAddr, (socklen_t*)&amp;cliAddrSize);\n    if (sCli &lt; 0) goto end;\n\n    // run the pump\n    for (;;) {\n        // ok we are connected\n        // read start message\n        r = recv(sCli , (char *)contrlMsg , sizeof(contrlMsg), 0);\n        if (r &lt; 0) goto end;\n        if (r != sizeof(contrlMsg)) {\n            sendResult(sCli, eStjTCPSocketControlMsgErrorID_amount);\n            continue;\n        }\n        if (contrlMsg[0] != eStjTCPSocketControlMsgID_start) {\n            sendResult(sCli, eStjTCPSocketControlMsgErrorID_msgID);\n            continue;\n        }\n\n        dataSize = contrlMsg[1];\n        // check if we have to realloc the rx buffer\n        if (gTCPsocketControl.msgBufferSize &lt; dataSize) {\n             uint8_t *pNB = realloc(gTCPsocketControl.pMsgBuffer, dataSize);\n             if (!pNB) {\n                 sendResult(sCli, eStjTCPSocketControlMsgErrorID_realloc);\n                 continue;\n             }\n             gTCPsocketControl.pMsgBuffer = pNB;\n             gTCPsocketControl.msgBufferSize = dataSize;\n        }\n\n        sendResult(sCli, eStjTCPSocketControlMsgErrorID_noError);\n\n        // recv data\n        r = recv(sCli , gTCPsocketControl.pMsgBuffer , gTCPsocketControl.msgBufferSize, 0);\n        if (r &lt; 0) goto end;\n        if (r != dataSize) {\n            sendResult(sCli, eStjTCPSocketControlMsgErrorID_amount);\n            continue;\n        }\n        sendResult(sCli, eStjTCPSocketControlMsgErrorID_noError);\n\n        // handle message\n        gTCPsocketControl.rxCB(gTCPsocketControl.pMsgBuffer , gTCPsocketControl.msgBufferSize);\n        continue;\n    }\nend:\n    sem_post(&amp;gTCPsocketControl.serverSign);\n    return (void *) -1;\n}\n\n//! init\nint TCPcontrolInit (\n        int             serverPort, //!&lt; server tx port number - best over 1000\n        const char *    szClient,       //!&lt; \"family-PC\" or \"192.168.1.3\"\n        int             clientPort, //!&lt; client tx port number\n        TfkpTCPcallback rxCB,           //!&lt; the rx data callback\n        long            timeOut,        //!&lt; the time out of the rx operation in ms\n        size_t          rxBufferSize,   //!&lt; the size of the rx buffer\n        size_t          maxTCPdataSize  //!&lt; maximum size of a TCP datagram (400 Bytes seems a good size)\n    ) {\n#ifdef WIN32\n    // local data\n    WSADATA     wsaData;\n\n    // start sockets\n    if ((WSAStartup(MAKEWORD(2, 2), &amp;wsaData))) {\n        perror(\"WSAStartup failed!\");\n        return -1;\n    }\n#endif\n    char *              szIPserver;\n    char *              szIPclient;\n    struct hostent *    pHostDescr;\n    struct sockaddr_in  sAddr;\n\n    //if (serverPort == clientPort) return -1;\n\n    // -----------------\n    // get ip strings\n\n    // get ip of the server\n    pHostDescr = gethostbyname(\"localhost\");\n    // check if found a host\n    if (!pHostDescr) {\n        return -11;\n    }\n    szIPserver = inet_ntoa(*(struct in_addr*)*pHostDescr-&gt;h_addr_list);\n\n    // get ip of the client\n    if (strcmp(szClient, \"\")) {\n        pHostDescr = gethostbyname(szClient);\n    } else {\n        pHostDescr = gethostbyname(\"localhost\");\n    }\n    // check if found a host\n    if (!pHostDescr) {\n        return -12;\n    }\n    szIPclient = inet_ntoa(*(struct in_addr*)*pHostDescr-&gt;h_addr_list);\n\n\n    // -----------------\n    // try to create sockets\n\n    // try to create socket for the server\n    gTCPsocketControl.sSrv = socket(PF_INET , SOCK_STREAM, IPPROTO_TCP);\n    if (-1 == gTCPsocketControl.sSrv) return -21;\n    // try to create socket for the client\n    gTCPsocketControl.sCli = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (-1 == gTCPsocketControl.sCli) return -22;\n\n    // -----------------\n    // bind input to IP and port\n    memset(&amp;sAddr,0,sizeof(sAddr));\n    sAddr.sin_family = PF_INET;\n    sAddr.sin_addr.s_addr = INADDR_ANY;\n    sAddr.sin_port = htons( serverPort );\n\n    // bind server socket to address\n    if (bind(gTCPsocketControl.sSrv, (SOCKADDR *)&amp;sAddr, sizeof(SOCKADDR_IN))) {\n        return -31;\n    }\n    // and listen for incoming connections\n    if (listen(gTCPsocketControl.sSrv , 3)) {\n        return -32;\n    }\n\n    // -----------------\n    // connect output to IP and port\n    memset(&amp;gTCPsocketControl.sAddrCli,0,sizeof(sAddr));\n    gTCPsocketControl.sAddrCli.sin_family = PF_INET;\n    gTCPsocketControl.sAddrCli.sin_addr.s_addr = inet_addr(szIPclient);\n    gTCPsocketControl.sAddrCli.sin_port = htons( clientPort );\n\n    if (connect(gTCPsocketControl.sCli , (struct sockaddr *)&amp;gTCPsocketControl.sAddrCli , sizeof(gTCPsocketControl.sAddrCli)) &lt; 0){\n        gTCPsocketControl.cliConnectedFlag = 0;\n    } else {\n        gTCPsocketControl.cliConnectedFlag = 1;\n    }\n\n\n    // create sign semaphore\n    sem_init(&amp;gTCPsocketControl.serverSign, 0, 0);\n\n    // create buffers\n    gTCPsocketControl.pMsgBuffer = malloc(rxBufferSize);\n    if (!gTCPsocketControl.pMsgBuffer) {\n        return -32;\n    }\n    gTCPsocketControl.msgBufferSize = rxBufferSize;\n\n    // set callback\n    gTCPsocketControl.rxCB = rxCB;\n\n    // start rx thread\n    if(pthread_create(&amp;gTCPsocketControl.srvThr , NULL, TCPcontrolMsgPump, NULL)) {\n        return -40;\n    }\n    // wait till rx server is running\n    sem_wait(&amp;gTCPsocketControl.serverSign);\n\n    return 0;\n}\n\n//! closes the TCP server and client\nvoid TCPcontrolClose () {\n    closesocket (gTCPsocketControl.sSrv);\n    closesocket (gTCPsocketControl.sCli);\n\n    free(gTCPsocketControl.pMsgBuffer);\n\n    memset(&amp;gTCPsocketControl, 0, sizeof(TstjTCPSocketControl));\n\n#ifdef WIN32\n    WSACleanup();\n#endif\n}\n\n// -----------------------------------------\n// test\n\nint stFlag = 0;\n#define  dSTsize (1024 * 1024)\nuint8_t STB[dSTsize];\n\n\nint rxCB (uint8_t * pData, size_t amount) {\n    if (!stFlag) {\n        pData[amount] = 0;\n        printf(\"rx: %s\\n\",pData);\n    } else {\n        size_t i;\n        for (i = 0; i &lt; dSTsize; i++) {\n            if (pData[i] != (uint8_t)((size_t)i &amp; 0xFF)) {\n                fprintf(stderr, \"stress test error at position %i\\n\",(int) i);\n                return 0;\n            }\n        }\n        printf(\"rx: stress test successful\\n\");\n    }\n    fflush(stdout);\n    return 0;\n}\n\n\nint main(void) {\n    int srvPort;\n    int clientPort;\n    const size_t ipLen = 256;\n    char szIP[ipLen];\n    const size_t dummyStrLen = 1024;\n    char szDummy[dummyStrLen];\n    size_t i;\n    int r;\n\n    // pre init for the stress test\n    for (i = 0; i &lt; dSTsize; i++) {\n        STB[i] = (uint8_t)((size_t)i &amp; 0xFF);\n    }\n\n\n    printf(\"TCP demo\\n\");\n\n    printf(\"enter server port: \");\n    fgets(szDummy, dummyStrLen, stdin);\n    szDummy[strcspn(szDummy, \"\\r\\n\")] = 0;\n    srvPort = atoi(szDummy);\n\n    printf(\"enter IP address of the other server: \");\n    fgets(szIP, 255, stdin);\n    szIP[strcspn(szIP, \"\\r\\n\")] = 0;\n\n    printf(\"enter client port: \");\n    fgets(szDummy, dummyStrLen, stdin);\n    szDummy[strcspn(szDummy, \"\\r\\n\")] = 0;\n    clientPort = atoi(szDummy);\n\n    if (TCPcontrolInit (\n            srvPort,    //!&lt; server port number - best over 1000\n            szIP,   //!&lt; \"family-PC\" or \"192.168.1.3\"\n            clientPort, //!&lt; client port number\n            rxCB,       //!&lt; the rx data callback\n            100,    //!&lt; the time out of the rx operation in ms\n            10,//!&lt; the size of the rx buffer\n            400 //!&lt; maximum size of a TCP datagram (400 Bytes seems a good size)\n        ) &lt; 0 ){\n        fprintf(stderr, \"TCP control setup failed!\");\n        goto errorExit;\n    }\n\n    printf(\"commands:\\n s - send\\n t - tx stress test\\n a - activate/deactivate rx for stress test\\n h - help\\n e - exit\\n\");\n    for(;;) {\n        printf(\"command: \");\n        fgets(szDummy, dummyStrLen, stdin);\n        switch(tolower(szDummy[0])) {\n            case 's':\n                fgets(szDummy, dummyStrLen, stdin);\n                szDummy[strcspn(szDummy, \"\\r\\n\")] = 0;\n                r = TCPcontrolSend((uint8_t *)szDummy, strlen(szDummy)+1);\n                if(r) {\n                    fprintf(stderr,\"sending data failed with code %i(%s)\\n\", r, strerror(errno));\n                }\n                break;\n            case 't':\n                r = TCPcontrolSend(STB, dSTsize);\n                if (r) {\n                    fprintf(stderr,\"stress test sending data failed with code %i\\n\", r);\n                }\n                break;\n            case 'a':\n                stFlag = (!stFlag) ? 1 : 0;\n                if (stFlag) {\n                    printf(\"stress test RX now active\\n\");\n                } else {\n                    printf(\"stress test RX deactivated\\n\");\n                }\n                break;\n            case 'h':\n                printf(\"commands:\\n s - send\\n t - tx stress test\\n a - activate/deactivate rx for stress test\\n h - help\\n e - exit\\n\");\n                break;\n            case 'e':\n                goto stdExit;\n        }\n    }\n\nstdExit:\n\n    TCPcontrolClose ();\n    return EXIT_SUCCESS;\n\nerrorExit:\n\n    TCPcontrolClose ();\n    return EXIT_FAILURE;\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading"], "answers": [{"tags": [], "owner": {"reputation": 15468, "user_id": 321772, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c03247f45c9f291391b894375c2709ca?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/321772/adam"}, "is_accepted": false, "score": 9, "last_activity_date": 1441832578, "last_edit_date": 1441832578, "creation_date": 1441831978, "answer_id": 32488978, "question_id": 32488950, "link": "https://stackoverflow.com/questions/32488950/is-there-a-void-operator-for-c/32488978#32488978", "title": "Is there a void operator() () for C?", "body": "<p>No, C does not feature operator overloading.</p>\n\n<p>The example you linked to is about C++ threads, not pthreads.</p>\n\n<p>In C the same task is done with function pointers:</p>\n\n<pre><code>void* run_func(void *ptr)\n{\n}\n\n...\npthread_t thread;\npthread_create(&amp;thread, NULL, run_func, NULL);\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 4766749, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/88f48133ca74de79377cc4ef88b15220?s=128&d=identicon&r=PG&f=1", "display_name": "corax", "link": "https://stackoverflow.com/users/4766749/corax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1441832578, "creation_date": 1441831872, "question_id": 32488950, "link": "https://stackoverflow.com/questions/32488950/is-there-a-void-operator-for-c", "title": "Is there a void operator() () for C?", "body": "<p>I was just looking as some thread code in C++ when I came upon the void operator () () function. I checked StackOverflow <a href=\"https://stackoverflow.com/questions/11857150/functionality-of-void-operator\">Functionality of void operator()()</a>    and this pretty much explains it. I am wondering if I could that in C for pthread_create().Thanks.</p>\n"}, {"tags": ["python", "c++", "c", "fann"], "answers": [{"tags": [], "owner": {"reputation": 2647, "user_id": 776515, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/IrXxz.png?s=128&g=1", "display_name": "Luis", "link": "https://stackoverflow.com/users/776515/luis"}, "is_accepted": false, "score": -1, "last_activity_date": 1466880699, "last_edit_date": 1466880699, "creation_date": 1464703385, "answer_id": 37547932, "question_id": 32488943, "link": "https://stackoverflow.com/questions/32488943/how-to-save-a-fann-to-string/37547932#37547932", "title": "How to save a FANN to string?", "body": "<p>Did you try <a href=\"http://leenissen.dk/fann/html/files/fann_io-h.html#fann_save\" rel=\"nofollow\">fann_save</a> ?</p>\n\n<h2>train.c</h2>\n\n<pre><code>fann_save( ann, \"./nets/trained.net\" );\n</code></pre>\n\n<p>It allows to save the network and then <a href=\"http://leenissen.dk/fann/html/files/fann_io-h.html#fann_create_from_file\" rel=\"nofollow\">load it again</a> in another program:</p>\n\n<h2>simulate.c</h2>\n\n<pre><code>ann = fann_create_from_file(\"./nets/trained.net\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 472, "user_id": 494762, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3dbf149c4e0d8bf513f5241a9c9a635d?s=128&d=identicon&r=PG", "display_name": "wi1", "link": "https://stackoverflow.com/users/494762/wi1"}, "is_accepted": false, "score": 0, "last_activity_date": 1513278923, "creation_date": 1513278923, "answer_id": 47820612, "question_id": 32488943, "link": "https://stackoverflow.com/questions/32488943/how-to-save-a-fann-to-string/47820612#47820612", "title": "How to save a FANN to string?", "body": "<p>If you look at the IO code in, <a href=\"https://github.com/libfann/fann/blob/master/src/fann_io.c\" rel=\"nofollow noreferrer\">https://github.com/libfann/fann/blob/master/src/fann_io.c</a> you can very easily create your own create_from_string function using how it reads the file as a template.</p>\n"}], "owner": {"reputation": 1204, "user_id": 1418164, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e5a3eb0187fc81a20d80f37a6126417b?s=128&d=identicon&r=PG", "display_name": "MrFox", "link": "https://stackoverflow.com/users/1418164/mrfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1531103891, "creation_date": 1441831821, "last_edit_date": 1531103891, "question_id": 32488943, "link": "https://stackoverflow.com/questions/32488943/how-to-save-a-fann-to-string", "title": "How to save a FANN to string?", "body": "<p>I want to use FANN by saving the configuration into a database, then load it during runs. All of the functions seem to be saving/loading networks into config files. But my application can't have temporary files.</p>\n\n<p>How can I save a training into a string / load a network from a string? I am using the Python bindings, but a C/C++ answer is also welcome.</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1441831813, "post_id": 32488866, "comment_id": 52838377, "body": "Which line is it getting the segmentation fault on? The debugger should tell you this."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441831885, "post_id": 32488866, "comment_id": 52838415, "body": "Segmentation faults generally occur when you use an uninitialized pointer or write outside the bounds of an array. Since you have no pointers (other than <code>fp</code>, which you use correctly), it must be the <code>word[]</code> array. Make sure you never access too far."}], "answers": [{"comments": [{"owner": {"reputation": 1480, "user_id": 3242671, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z8eR8.jpg?s=128&g=1", "display_name": "blakelead", "link": "https://stackoverflow.com/users/3242671/blakelead"}, "edited": false, "score": 1, "creation_date": 1441832936, "post_id": 32489110, "comment_id": 52838978, "body": "In the given example  <code>count</code> will not be negative but you are right for the general case."}], "tags": [], "owner": {"reputation": 1480, "user_id": 3242671, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z8eR8.jpg?s=128&g=1", "display_name": "blakelead", "link": "https://stackoverflow.com/users/3242671/blakelead"}, "is_accepted": false, "score": 0, "last_activity_date": 1441832518, "creation_date": 1441832518, "answer_id": 32489110, "question_id": 32488866, "link": "https://stackoverflow.com/questions/32488866/segmentation-fault-works-on-windows-but-not-unix/32489110#32489110", "title": "Segmentation Fault (works on Windows but not Unix)", "body": "<p>It seems that when <code>count</code> gets to 15,then <code>word[count]= ch;</code> writes out of the bound of <code>word</code></p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 4, "last_activity_date": 1441833440, "last_edit_date": 1495540685, "creation_date": 1441833083, "answer_id": 32489237, "question_id": 32488866, "link": "https://stackoverflow.com/questions/32488866/segmentation-fault-works-on-windows-but-not-unix/32489237#32489237", "title": "Segmentation Fault (works on Windows but not Unix)", "body": "<p>As well as the obvious upper limit, it seems that when <code>count</code> gets to <code>0</code>, it can go negative.</p>\n\n<pre><code>if(count == 0){\n    count-=1;\n}\n</code></pre>\n\n<p>This will cause a seg fault with this</p>\n\n<pre><code>word[count] = ch;\n</code></pre>\n\n<p>Additionally you are using the dreaded <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\"><code>feof</code></a></p>\n\n<pre><code>while(!feof(fp))\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>int ch;\nwhile((ch = fgetc(fp)) != EOF)\n</code></pre>\n\n<p>Note the <code>int</code> type. Don't use <code>char</code> (or <code>float</code>) types unless you have a specific reason to. Library functions use <code>int</code> for character input and output, not <code>char</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 122, "user_id": 5215544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/701302c64731284bda7726a924103ae6?s=128&d=identicon&r=PG", "display_name": "BaZZiliO", "link": "https://stackoverflow.com/users/5215544/bazzilio"}, "is_accepted": false, "score": 0, "last_activity_date": 1441833112, "creation_date": 1441833112, "answer_id": 32489242, "question_id": 32488866, "link": "https://stackoverflow.com/questions/32488866/segmentation-fault-works-on-windows-but-not-unix/32489242#32489242", "title": "Segmentation Fault (works on Windows but not Unix)", "body": "<p>I've just compile your file on my ubuntu 15.04, \ncreate lab1.dat file with your content and run it</p>\n\n<pre><code>vim a.c\nvim lab1.dat\ngcc a.c\n./a.out\n123456789101112131415p1data.dat\nMary 0123had 01a 0123456little 012344****,  0123its 012345678fleas\nas 012345white 012as 012344****,  0123And 012345678910everywhere 01234****    01234**** 012344****,  0123456789the\n</code></pre>\n\n<p>My <code>gcc -V</code> output is</p>\n\n<pre><code>$ gcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.9/lto-wrapper\nTarget: x86_64-linux-gnu\nConfigured with: ../src/configure -v --with-pkgversion='Ubuntu 4.9.2-10ubuntu13' --with-bugurl=file:///usr/share/doc/gcc-4.9/README.Bugs --enable-languages=c,c++,java,go,d,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.9 --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.9 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --disable-vtable-verify --enable-plugin --with-system-zlib --disable-browser-plugin --enable-java-awt=gtk --enable-gtk-cairo --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-4.9-amd64/jre --enable-java-home --with-jvm-root-dir=/usr/lib/jvm/java-1.5.0-gcj-4.9-amd64 --with-jvm-jar-dir=/usr/lib/jvm-exports/java-1.5.0-gcj-4.9-amd64 --with-arch-directory=amd64 --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --enable-objc-gc --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\nThread model: posix\ngcc version 4.9.2 (Ubuntu 4.9.2-10ubuntu13) \n</code></pre>\n\n<p>So, program successful fun without any problem.\nCould you please specify linux distribution, gcc -V output and recheck if you have problem with your code.</p>\n"}], "owner": {"reputation": 249, "user_id": 4592520, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c362fd37c32b17ea32a4bd4989f0bac6?s=128&d=identicon&r=PG&f=1", "display_name": "cmehmen", "link": "https://stackoverflow.com/users/4592520/cmehmen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1019, "favorite_count": 0, "accepted_answer_id": 32489237, "answer_count": 3, "score": -1, "last_activity_date": 1441833440, "creation_date": 1441831525, "last_edit_date": 1441831681, "question_id": 32488866, "link": "https://stackoverflow.com/questions/32488866/segmentation-fault-works-on-windows-but-not-unix", "title": "Segmentation Fault (works on Windows but not Unix)", "body": "<p>The following is a simple program that reads a .dat file that i included below. when i gcc compile from a windows command line everything works fine when i run the exe but when i run from a unix cmd line..... \".out\" i get a segmentation fault. Why is this the case</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(){\n\n    FILE *fp;\n    char ch;\n    char c;\n    char word[15];\n    int count = 0;\n    int a;\n    int boolean_comma = 0;\n\n    fp = fopen(\"lab1.dat\",\"r\");\n\n    if( fp == NULL) {\n        printf(\"ERROR\");\n    }else\n        while(!feof(fp)){\n\n            ch = fgetc(fp);\n            word[count] = ch;\n\n            /*printf(\"%c\",word[count]);*/\n\n            if(ch == ','){\n\n                count -= 1;\n                boolean_comma = 1;\n            }/*END IF*/\n\n            if(ch == ' '){\n                if(count == 0){\n                    count-=1;\n                }\n                if(count == 4 &amp;&amp; boolean_comma == 1){\n                    printf(\"****, \");\n                }\n\n                if(count == 4 &amp;&amp; boolean_comma == 0){\n\n                    printf(\"**** \");\n                }/*END IF*/\n\n                else{\n\n                    if(boolean_comma != 1){\n                        for(a = 0; a &lt; count; a++){\n\n                            c = word[a];            \n                            printf(\"%c\",c);\n\n                        }/*END FOR*/\n                    }\n                    boolean_comma = 0;\n                    printf(\" \"); \n                    count = 0;\n                }/*END ELSE*/\n\n                count = 0;\n                /*END IF*/}\n            else{\n                count++;\n            }/*END ELSE*/\n\n            printf(\"%i\",count);\n        }/*END WHILE*/\n\n    fclose(fp);\n\n    return 0;\n\n}//end main\n</code></pre>\n\n<p>FILE</p>\n\n<pre><code>p1data.dat\nMary had a little lamb, its fleas\nas white as snow, And everywhere that Mary went, the\nfleas were sure to go!\n</code></pre>\n"}, {"tags": ["c", "optimization", "ternary-operator"], "comments": [{"owner": {"reputation": 8208, "user_id": 1971598, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2dadb39a8fbedbdb2c473a162c251b2a?s=128&d=identicon&r=PG", "display_name": "Edgar Aroutiounian", "link": "https://stackoverflow.com/users/1971598/edgar-aroutiounian"}, "edited": false, "score": 1, "creation_date": 1441831553, "post_id": 32488851, "comment_id": 52838237, "body": "you want to make C Coding even more terse?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1441831636, "post_id": 32488851, "comment_id": 52838278, "body": "BTW - ternary operators are syntactic sugar"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1441831991, "post_id": 32488851, "comment_id": 52838462, "body": "IMHO, the original version is better than the ternaries. It makes the conditions you care about very clear. And it doesn&#39;t do the assignment at all if the variable is outside the two ranges."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1441832364, "post_id": 32488851, "comment_id": 52838656, "body": "one way of writing this would be to use the common <code>MAX</code> and <code>MIN</code> macros and write: <code>variable = MIN(max, variable); variable = MAX(-max, variable);</code>.  I agree that the original version is best though (make it a macro or inline function if you&#39;ll be using it often)"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1441832164, "creation_date": 1441832164, "answer_id": 32489017, "question_id": 32488851, "link": "https://stackoverflow.com/questions/32488851/shorthand-way-of-conditional-assignments/32489017#32489017", "title": "Shorthand Way of Conditional Assignments", "body": "<p>You can nest conditional operators:</p>\n\n<pre><code>variable = variable &gt; max ? max : (variable &lt; -max ? -max : variable);\n</code></pre>\n\n<p>IMHO this is almost unreadable, so I don't recommend it.</p>\n"}, {"comments": [{"owner": {"reputation": 2490, "user_id": 4967929, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fc9ad15bcbdaeb1aeed830f1ad21cc7a?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4967929/michael"}, "edited": false, "score": 0, "creation_date": 1441832571, "post_id": 32489062, "comment_id": 52838777, "body": "Thanks, this is what I was looking for"}, {"owner": {"reputation": 5746, "user_id": 583570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17472ad659a41e48c4574e01d2312807?s=128&d=identicon&r=PG", "display_name": "markgz", "link": "https://stackoverflow.com/users/583570/markgz"}, "reply_to_user": {"reputation": 2490, "user_id": 4967929, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fc9ad15bcbdaeb1aeed830f1ad21cc7a?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4967929/michael"}, "edited": false, "score": 0, "creation_date": 1441836078, "post_id": 32489062, "comment_id": 52840255, "body": "@Michael: Of course this will run <i>much</i> slower than the original code, which can be implemented using a comparison followed by a couple of conditional move instructions. It&#39;s always better to write readable code and trust the compiler to optimize it."}], "tags": [], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "is_accepted": true, "score": 1, "last_activity_date": 1441832642, "last_edit_date": 1441832642, "creation_date": 1441832322, "answer_id": 32489062, "question_id": 32488851, "link": "https://stackoverflow.com/questions/32488851/shorthand-way-of-conditional-assignments/32489062#32489062", "title": "Shorthand Way of Conditional Assignments", "body": "<p>You could probably use this construct:</p>\n\n<pre><code>if (abs(variable) &gt; max) {\n    variable = sgn(variable) * max;\n}\n</code></pre>\n\n<p>There is no <code>sgn(x)</code> function in standard C library, but it is easy enough to implement it using arithmetic operations:</p>\n\n<pre><code>#define sgn(x) (((x) &gt; 0) - ((x) &lt; 0))\n</code></pre>\n\n<p>Here is an working example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\n#define sgn(x) (((x) &gt; 0) - ((x) &lt; 0))\n\nint main(void)\n{\n    int variable = -100, max = 20;\n\n    if (abs(variable) &gt; max) {\n        variable = sgn(variable) * max;\n    }\n    printf(\"%d\\n\", variable);\n\n    return 0;\n}\n</code></pre>\n\n<p>Note, that it will not work for <code>INT_MIN</code> on systems, that use <a href=\"https://en.wikipedia.org/wiki/Two&#39;s_complement\" rel=\"nofollow\">two's complement</a> representation, because <code>-INT_MIN</code> cannot be represented as <code>int</code> (kudos for @M.M).</p>\n"}], "owner": {"reputation": 2490, "user_id": 4967929, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fc9ad15bcbdaeb1aeed830f1ad21cc7a?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4967929/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 32489062, "answer_count": 2, "score": -2, "last_activity_date": 1441834523, "creation_date": 1441831468, "last_edit_date": 1441834523, "question_id": 32488851, "link": "https://stackoverflow.com/questions/32488851/shorthand-way-of-conditional-assignments", "title": "Shorthand Way of Conditional Assignments", "body": "<p>Is there a shorthand way of writing equivalent code to:</p>\n\n<pre><code>if (variable &gt; max){\n    variable = max;\n}else if (variable &lt; -max){\n    variable = -max;\n}\n</code></pre>\n\n<p>I know I can use ternary operators to get code like this:</p>\n\n<pre><code>variable = variable &gt; max ? max : variable;\nvariable = variable &lt; -max ? -max : variable;\n</code></pre>\n\n<h2>Question:</h2>\n\n<p>But is there an even shorter version of this code? </p>\n\n<p>Note: Not nested ternary operators, either.</p>\n\n<p>P.S.: This isn't necessarily a language-specific question, but I'm writing my code in C so I'd like to have answers that can work in that language.</p>\n"}, {"tags": ["c", "bits"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1441830817, "post_id": 32488634, "comment_id": 52837903, "body": "isn&#39;t it like <code>%x</code> expects <code>unsigned int</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441830999, "post_id": 32488634, "comment_id": 52837980, "body": "Isn&#39;t the <i>upper</i> 32 bits lost?"}, {"owner": {"reputation": 98, "user_id": 5049880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/864768826945211/picture?type=large", "display_name": "hec", "link": "https://stackoverflow.com/users/5049880/hec"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441831107, "post_id": 32488634, "comment_id": 52838035, "body": "@Weather Vane yes, upper 32 bits are lost , for reasons i do not know"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441831129, "post_id": 32488634, "comment_id": 52838041, "body": "Better edit the question then."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1441831147, "post_id": 32488634, "comment_id": 52838044, "body": "Why not do something sensible, like <code>printf(&quot;%llx&quot;, num)</code>?"}, {"owner": {"reputation": 98, "user_id": 5049880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/864768826945211/picture?type=large", "display_name": "hec", "link": "https://stackoverflow.com/users/5049880/hec"}, "edited": false, "score": 0, "creation_date": 1441831576, "post_id": 32488634, "comment_id": 52838249, "body": "@user33866109 i need to store the bits in an int later in the program, so im testing with printf"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1441831662, "post_id": 32488634, "comment_id": 52838297, "body": "In that case, you should start a new thread and ask the real question, &quot;Given a 64-bit number on a machine with 32-bit <code>int</code>, how do I extract the upper 32 bits from the number and store them in the <code>int</code>?&quot;"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1441832071, "post_id": 32488634, "comment_id": 52838498, "body": "... or even show us why, when you have <code>s64</code>, you can&#39;t deal with that later. Is this an X-Y question? <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\" title=\"what is the xy problem\">meta.stackexchange.com/questions/66377/what-is-the-xy-proble&zwnj;&#8203;m</a>"}], "answers": [{"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": true, "score": 1, "last_activity_date": 1441830920, "creation_date": 1441830920, "answer_id": 32488701, "question_id": 32488634, "link": "https://stackoverflow.com/questions/32488634/retrieving-most-significant-32-bits-of-a-signed-long-long-in-c/32488701#32488701", "title": "retrieving most significant 32-bits of a signed long long in c", "body": "<pre><code>((&amp;num) + sizeof(int))\n</code></pre>\n\n<p>This does not move <code>&amp;num</code> pointer to 4 bytes (assuming <code>sizeof (int)</code> being 4), but to 4 <code>int</code>, i. e., 16 bytes. This does:</p>\n\n<pre><code>((unsigned char *) &amp;num + sizeof (int))\n</code></pre>\n\n<p>Note it is also undefined behavior when you dereference the object as it violates C aliasing rules. As it was also mentioned in the comments, <code>%x</code> requires an <code>unsigned int</code> but you pass an <code>int</code> arguments.</p>\n"}, {"comments": [{"owner": {"reputation": 98, "user_id": 5049880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/864768826945211/picture?type=large", "display_name": "hec", "link": "https://stackoverflow.com/users/5049880/hec"}, "edited": false, "score": 0, "creation_date": 1441831482, "post_id": 32488746, "comment_id": 52838205, "body": "i do know, but i need those bits stored in an int for some later use in my program, so I am testing with printf to make sure im using the right code"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441831654, "post_id": 32488746, "comment_id": 52838290, "body": "If you want to split a signed 64-bit int for later use, you&#39;ll be in trouble unless you use unsigned. Do you really need signed?"}, {"owner": {"reputation": 98, "user_id": 5049880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/864768826945211/picture?type=large", "display_name": "hec", "link": "https://stackoverflow.com/users/5049880/hec"}, "edited": false, "score": 0, "creation_date": 1441831673, "post_id": 32488746, "comment_id": 52838303, "body": "i didn&#39;t really specify the question but my original concern was how i was unable to reference those bits with a pointer,  EDIT: the 64-bit value is hardcoded right now, but it will later be a result of signed multiplication"}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 98, "user_id": 5049880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/864768826945211/picture?type=large", "display_name": "hec", "link": "https://stackoverflow.com/users/5049880/hec"}, "edited": false, "score": 0, "creation_date": 1441831790, "post_id": 32488746, "comment_id": 52838361, "body": "@hec you either have to cast the address to <code>char*</code> or to big enough integer to hold the pointer value and then add the offset in <b>bytes</b> like you did in the question."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441832355, "post_id": 32488746, "comment_id": 52838644, "body": "Right shifting a negative integer is <i>implementation defined</i>. And wiered pointer-arithmetic is never a good idea."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441832627, "post_id": 32488746, "comment_id": 52838814, "body": "@Olaf You are correct about shifting negative integers. Fixed. <i>wiered pointer-arithmetic</i> is indeed never a good idea but sometimes one has no other choice."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441832988, "post_id": 32488746, "comment_id": 52839017, "body": "@AlexLop.: (I meant weird, of course) If  it violates strict aliasing rules, it actually is <b>never</b> a good idea.."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1441873060, "post_id": 32488746, "comment_id": 52852950, "body": "So cast the negative integer to unsigned.  That\u2019s defined behavior."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1441874462, "post_id": 32488746, "comment_id": 52853811, "body": "Excuse me; on reading the edit, the question was asking how to do pointer arithmetic correctly, not how to extract only the 32 most-significant bits.  I was answering the wrong question.  Pardon."}], "tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": false, "score": -1, "last_activity_date": 1441832539, "last_edit_date": 1441832539, "creation_date": 1441831089, "answer_id": 32488746, "question_id": 32488634, "link": "https://stackoverflow.com/questions/32488634/retrieving-most-significant-32-bits-of-a-signed-long-long-in-c/32488746#32488746", "title": "retrieving most significant 32-bits of a signed long long in c", "body": "<p>When adding <code>1</code> to a pointer of type <code>T</code> the address is advanced by <code>sizeof(T)</code> and not by <code>1</code>.</p>\n\n<p>I believe this would work (if you are compiling it for 64bit):</p>\n\n<pre><code>printf(\"%x%x\", *(int* )((u64)(&amp;num) + sizeof(int) ) ,*(int* )(&amp;num));\n</code></pre>\n\n<p>But safer would be:</p>\n\n<pre><code>printf(\"%x%x\", (int)((u64)num &gt;&gt; 32) ,(int)num);\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I don't think that this is the case but in case you didn't know, <code>printf</code> supports also 64 bit values in the following format:</p>\n\n<pre><code>printf(\"%llx\", num);\n</code></pre>\n"}], "owner": {"reputation": 98, "user_id": 5049880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/864768826945211/picture?type=large", "display_name": "hec", "link": "https://stackoverflow.com/users/5049880/hec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 32488701, "answer_count": 2, "score": -2, "last_activity_date": 1442283709, "creation_date": 1441830676, "last_edit_date": 1442283709, "question_id": 32488634, "link": "https://stackoverflow.com/questions/32488634/retrieving-most-significant-32-bits-of-a-signed-long-long-in-c", "title": "retrieving most significant 32-bits of a signed long long in c", "body": "<p>For some reason the upper 32-bits are lost when referencing bits with a pointer</p>\n\n<p>Machine is little-endian.</p>\n\n<pre><code>s64 num = 0x12345678ABCDEF99;\nprintf(\"%x%x\", *(int* )((&amp;num) + sizeof(int) ) ,*(int* )(&amp;num));\n//i used *(int* )(&amp;num)to show that it works only with the first 32 bits\n</code></pre>\n\n<p>output : <code>0abcdef99</code></p>\n"}, {"tags": ["c++", "c", "osx-yosemite", "sigbus"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1441829762, "post_id": 32488353, "comment_id": 52837373, "body": "SIGBUS generally means that a pointer is not properly aligned for the size of value you&#39;re accessing through it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441829816, "post_id": 32488353, "comment_id": 52837393, "body": "Although that makes no sense when writing a single char, since there are no alignment requirements for <code>char</code>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1441830259, "post_id": 32488353, "comment_id": 52837610, "body": "The problem is the <code>const</code> keyword in <code>const char mem[4]</code>. You&#39;re declaring <code>mem</code> as read-only, and then trying to write to it."}, {"owner": {"reputation": 306, "user_id": 3508350, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e8b4d87030697e2b69d6bdcf6c681c0?s=128&d=identicon&r=PG", "display_name": "Joe Sewell", "link": "https://stackoverflow.com/users/3508350/joe-sewell"}, "edited": false, "score": 1, "creation_date": 1441830369, "post_id": 32488353, "comment_id": 52837666, "body": "Since you&#39;re writing to <code>mem</code>, which is declared <code>const char</code>, it&#39;s possible that the memory is not writable in this case, whereas it might be under the other platforms?"}, {"owner": {"reputation": 634, "user_id": 1735629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5aa21470f60d3d0e6b38584eeae179?s=128&d=identicon&r=PG", "display_name": "akosky", "link": "https://stackoverflow.com/users/1735629/akosky"}, "edited": false, "score": 0, "creation_date": 1441830752, "post_id": 32488353, "comment_id": 52837868, "body": "Thanks! This was indeed the problem. I was looking for issues with pointer alignment, but it didn&#39;t notice that the memory was declared as const. It&#39;s interesting that it didn&#39;t show up on other platforms."}], "owner": {"reputation": 634, "user_id": 1735629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5aa21470f60d3d0e6b38584eeae179?s=128&d=identicon&r=PG", "display_name": "akosky", "link": "https://stackoverflow.com/users/1735629/akosky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441829597, "creation_date": 1441829597, "question_id": 32488353, "link": "https://stackoverflow.com/questions/32488353/diagnosing-sigbus-error-on-os-x-yosemite", "title": "Diagnosing SIGBUS error on OS X Yosemite", "body": "<p>I'm attempting to convert some code to run on OS X and having problems with some of the low-level memory writing code (which works on Linux/Windows platforms).</p>\n\n<p>Specifically the method being called is:</p>\n\n<pre><code>void Dset_mem_write_i1B(void* ptr,int val) {\n  unsigned char* p=(unsigned char*)ptr;\n  *p=(val)&amp;0xFF;\n}\n</code></pre>\n\n<p>The relevant test code (GTest) is:</p>\n\n<pre><code>TEST(DsetMemIoTest, test_write) {\n  const char mem[4] = \"\";\n  void* vmem = (void*)mem;\n  int mem_read = 0;\n  int to_write = 0;\n\n  to_write = 'a';\n  Dset_mem_write_i1B(vmem, to_write);\n  mem_read = Dset_mem_read_i1B(vmem);\n  EXPECT_EQ('a', (char)mem_read);\n</code></pre>\n\n<p>When running in gdb (installed using homebrew) I'm getting:</p>\n\n<pre><code>Program received signal SIGBUS, Bus error.\n0x0000000100009213 in Dset_mem_write_i1B (ptr=0x100054c95 &lt;DsetMemIoTest_test_write_Test::TestBody()::mem&gt;, val=97) at ...\n78        *p=(val)&amp;0xFF;\n</code></pre>\n\n<p>I tried adding explicit casts which didn't seem to make a difference. </p>\n\n<p>I can't find any clue as to why this would fail on OS X. Any help on how to diagnose this would be appreciated.</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 6235, "user_id": 622060, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/59aeda6ad8dea5965841953391441d7d?s=128&d=identicon&r=PG", "display_name": "Per Johansson", "link": "https://stackoverflow.com/users/622060/per-johansson"}, "edited": false, "score": 0, "creation_date": 1441828351, "post_id": 32488017, "comment_id": 52836694, "body": "<code>ioctl</code> is not a C standard function. You&#39;ll have to at least tell us what OS you&#39;re using."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1441828492, "post_id": 32488017, "comment_id": 52836766, "body": "Did you try closing the file <i>first</i>?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1441828528, "post_id": 32488017, "comment_id": 52836793, "body": "Closing the file would destroy the descriptor."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1441828651, "post_id": 32488017, "comment_id": 52836858, "body": "@melpomene right, maybe open it read-only would work? ... I was just guessing (obviously same as Sourav) because it doesn&#39;t seem to make much sense having a writable handle to an immutable file."}, {"owner": {"reputation": 21, "user_id": 5318573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766e31bf328d28fbbd04468eb66ce069?s=128&d=identicon&r=PG&f=1", "display_name": "ShovelMan", "link": "https://stackoverflow.com/users/5318573/shovelman"}, "edited": false, "score": 0, "creation_date": 1441828693, "post_id": 32488017, "comment_id": 52836877, "body": "Putting it after fclose() results in &quot;ioctl(2) error: Bad file descriptor&quot; which is likely because the file descriptor is destroyed."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 1, "creation_date": 1441828743, "post_id": 32488017, "comment_id": 52836901, "body": "The code works as posted on my Debian system, as long as it is run as root and the filesystem the file is in supports the operation."}, {"owner": {"reputation": 21, "user_id": 5318573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766e31bf328d28fbbd04468eb66ce069?s=128&d=identicon&r=PG&f=1", "display_name": "ShovelMan", "link": "https://stackoverflow.com/users/5318573/shovelman"}, "edited": false, "score": 0, "creation_date": 1441828782, "post_id": 32488017, "comment_id": 52836925, "body": "It opens with w+ to create the file and input shovel into the open file descriptor."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1441828823, "post_id": 32488017, "comment_id": 52836948, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/32465756/setting-immutable-flag-using-ioctl-in-c\">Setting Immutable Flag using ioctl() in C</a>"}, {"owner": {"reputation": 21, "user_id": 5318573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766e31bf328d28fbbd04468eb66ce069?s=128&d=identicon&r=PG&f=1", "display_name": "ShovelMan", "link": "https://stackoverflow.com/users/5318573/shovelman"}, "edited": false, "score": 0, "creation_date": 1441829126, "post_id": 32488017, "comment_id": 52837093, "body": "At the time it was tested it on his server and I was giving feedback based on what he said over Skype. If you look at the answers I mention my server went offline. Today after a long sleep I awake to find my server back online where I test my script and find it doesn&#39;t work.  No longer have access to that account since a browser update and cookie deletion causing me to logout and me forgetting which Google account I logged in with."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1441829182, "post_id": 32488017, "comment_id": 52837122, "body": "If having the file open for writing interferes, then you could always use <code>freopen()</code> to replace the writable stream with a read-only one.  You would do that between the <code>fwrite()</code> and the <code>ioctl()</code>."}, {"owner": {"reputation": 21, "user_id": 5318573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766e31bf328d28fbbd04468eb66ce069?s=128&d=identicon&r=PG&f=1", "display_name": "ShovelMan", "link": "https://stackoverflow.com/users/5318573/shovelman"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1441829274, "post_id": 32488017, "comment_id": 52837165, "body": "I don&#39;t think that&#39;s the issue here @John Bollinger"}, {"owner": {"reputation": 21, "user_id": 5318573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766e31bf328d28fbbd04468eb66ce069?s=128&d=identicon&r=PG&f=1", "display_name": "ShovelMan", "link": "https://stackoverflow.com/users/5318573/shovelman"}, "edited": false, "score": 1, "creation_date": 1441829738, "post_id": 32488017, "comment_id": 52837364, "body": "I think the -1 is unnecessary and just prevents me from getting a clear answer to my problem. The issue of a duplicate thread is beyond my control as explained before."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1441829856, "post_id": 32488017, "comment_id": 52837413, "body": "Which file system and what mount options?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1441829899, "post_id": 32488017, "comment_id": 52837430, "body": "Any difference in <code>strace</code> between your program and <code>chattr +i</code>?"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1441830066, "post_id": 32488017, "comment_id": 52837523, "body": "Just to be sure, have you done <code>chattr -i shovel.txt</code> before running this? How about testing without <code>shovel.txt</code> at all (i.e., let this program create it)? (Like said above, the code works for me as posted.)"}, {"owner": {"reputation": 21, "user_id": 5318573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766e31bf328d28fbbd04468eb66ce069?s=128&d=identicon&r=PG&f=1", "display_name": "ShovelMan", "link": "https://stackoverflow.com/users/5318573/shovelman"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1441830070, "post_id": 32488017, "comment_id": 52837524, "body": "@BasileStarynkevitch  <code>-bash-3.2# cat &#47;proc&#47;mounts &#47;dev&#47;simfs &#47; simfs rw,relatime,usrquota,grpquota 0 0 proc &#47;proc proc rw,relatime 0 0 sysfs &#47;sys sysfs rw,relatime 0 0 none &#47;dev tmpfs rw,relatime,mode=755 0 0 none &#47;dev&#47;pts devpts rw,relatime,gid=5,mode=620,ptmxmode=000 0 0 none &#47;proc&#47;sys&#47;fs&#47;binfmt_misc binfmt_misc rw,relatime 0 0</code>"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 1, "creation_date": 1441830075, "post_id": 32488017, "comment_id": 52837526, "body": "Your program works for me. I do suggest you retrieve the current flags and then set the FS_IMMUTABLE_FL flag, though, rather than just clearing all other flags indiscriminately."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1441830131, "post_id": 32488017, "comment_id": 52837546, "body": "@ShovelMan I suggest putting all relevant information in the question instead of hiding it down in the comments."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1441830177, "post_id": 32488017, "comment_id": 52837572, "body": "@FilipeGon&#231;alves Not a duplicate. That one was reporting <code>Bad address</code>."}, {"owner": {"reputation": 21, "user_id": 5318573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766e31bf328d28fbbd04468eb66ce069?s=128&d=identicon&r=PG&f=1", "display_name": "ShovelMan", "link": "https://stackoverflow.com/users/5318573/shovelman"}, "reply_to_user": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1441830217, "post_id": 32488017, "comment_id": 52837590, "body": "@davmac Sorry, I&#39;m confused by your suggestion. Can you explain why that would make a difference?"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1441830295, "post_id": 32488017, "comment_id": 52837636, "body": "@ShovelMan Then you&#39;d know if the problem is due to not being able to set <code>+i</code>, instead of due to not being able to remove some other flag. Did you try my suggestion of running this without <code>shovel.txt</code> in existence, letting the program create it? This would also ensure no extra flags get in the way."}, {"owner": {"reputation": 21, "user_id": 5318573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766e31bf328d28fbbd04468eb66ce069?s=128&d=identicon&r=PG&f=1", "display_name": "ShovelMan", "link": "https://stackoverflow.com/users/5318573/shovelman"}, "reply_to_user": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1441830479, "post_id": 32488017, "comment_id": 52837717, "body": "@Arkku I have tested with the file being created beforehand and chmodding to 0777 and also tried without the file being created beforehand. The chattr +i command works as expected."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1441830615, "post_id": 32488017, "comment_id": 52837784, "body": "What&#39;s the output of <code>lsattr shovel.txt</code>?"}, {"owner": {"reputation": 21, "user_id": 5318573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766e31bf328d28fbbd04468eb66ce069?s=128&d=identicon&r=PG&f=1", "display_name": "ShovelMan", "link": "https://stackoverflow.com/users/5318573/shovelman"}, "reply_to_user": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1441830685, "post_id": 32488017, "comment_id": 52837824, "body": "@FilipeGon&#231;alves <code>-bash-3.2# lsattr shovel.txt ------------- shovel.txt</code>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5318573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766e31bf328d28fbbd04468eb66ce069?s=128&d=identicon&r=PG&f=1", "display_name": "ShovelMan", "link": "https://stackoverflow.com/users/5318573/shovelman"}, "edited": false, "score": 0, "creation_date": 1441831621, "post_id": 32488794, "comment_id": 52838273, "body": "If that&#39;s the case, why is it returning &quot;ioctl(2) error: Operation not supported&quot; when chattr +i works as expected?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 21, "user_id": 5318573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766e31bf328d28fbbd04468eb66ce069?s=128&d=identicon&r=PG&f=1", "display_name": "ShovelMan", "link": "https://stackoverflow.com/users/5318573/shovelman"}, "edited": false, "score": 0, "creation_date": 1441831850, "post_id": 32488794, "comment_id": 52838397, "body": "If <code>chattr</code> works and your program doesn&#39;t, when run against the same file by the same user, then it stands to reason the the difference in behavior arises from one of the code differences I enumerated.  I&#39;d estimate the file mode to be the most likely cause, but it could be that the FD being associated with a stream makes it incompatible with <code>ioctl()</code>."}, {"owner": {"reputation": 21, "user_id": 5318573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766e31bf328d28fbbd04468eb66ce069?s=128&d=identicon&r=PG&f=1", "display_name": "ShovelMan", "link": "https://stackoverflow.com/users/5318573/shovelman"}, "edited": false, "score": 0, "creation_date": 1441832100, "post_id": 32488794, "comment_id": 52838516, "body": "I&#39;ve tried all variants of *SETFLAGS and *IMMUTABLE_FLAG. They gave the same result &quot;ioctl(2) error: Operation not supported&quot;. If it was due to the FD wouldn&#39;t that mean it would have the same problem across all OS&#39;s? A few people have reported it working on Debian."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 21, "user_id": 5318573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766e31bf328d28fbbd04468eb66ce069?s=128&d=identicon&r=PG&f=1", "display_name": "ShovelMan", "link": "https://stackoverflow.com/users/5318573/shovelman"}, "edited": false, "score": 0, "creation_date": 1441833090, "post_id": 32488794, "comment_id": 52839066, "body": "e2fsprogs 1.42.12 -- from which the code I presented is drawn -- is the version provided by Debians jessie and squeeze.  It is the latest version available for CentOS 6.  I actually pulled the source from the Fedora 20 package.  CentOS 7 is actually slightly behind, at v1.42.9, but that&#39;s no different in this area.  They all use the same code.  It evidently works."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 21, "user_id": 5318573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766e31bf328d28fbbd04468eb66ce069?s=128&d=identicon&r=PG&f=1", "display_name": "ShovelMan", "link": "https://stackoverflow.com/users/5318573/shovelman"}, "edited": false, "score": 0, "creation_date": 1441833433, "post_id": 32488794, "comment_id": 52839229, "body": "You could consider getting the e2fsprogs source package and building it yourself, to verify that the version of <code>chattr</code> you build that way works the same as the ones installed on your systems.  That would rule out (or implicate) a problem with your toolchain or build environment."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 21, "user_id": 5318573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766e31bf328d28fbbd04468eb66ce069?s=128&d=identicon&r=PG&f=1", "display_name": "ShovelMan", "link": "https://stackoverflow.com/users/5318573/shovelman"}, "edited": false, "score": 0, "creation_date": 1441834104, "post_id": 32488794, "comment_id": 52839508, "body": "@ShovelMan it completely makes sense to try this exact sequence - open via <code>open</code> with <code>O_RDONLY</code> - etc - and see whether this makes a difference. Yes, your program worked for me as is, but then I have an ext4 filesystem and you have simfs. It&#39;s perfectly possible that they behave differently in this regard."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1441834381, "last_edit_date": 1441834381, "creation_date": 1441831254, "answer_id": 32488794, "question_id": 32488017, "link": "https://stackoverflow.com/questions/32488017/how-do-i-chattr-i-an-open-file-descriptor-in-c/32488794#32488794", "title": "How do I chattr +i an open file descriptor in C?", "body": "<p>The <code>chattr</code> command itself applies file attribute changes via a very similar call to the one presented in the question:</p>\n\n<pre><code>r = ioctl (fd, EXT2_IOC_SETFLAGS, &amp;f);\n</code></pre>\n\n<p>where <code>fd</code> is an open file descriptor of type <code>int</code> and <code>f</code> is a flag bitmask of type <code>int</code>.  Its behavior differs in the following ways:</p>\n\n<ul>\n<li>It obtains the value of the flag bit via the macro <code>EXT2_IMMUTABLE_FLAG</code>.  I'm uncertain whether that expands to the same value that <code>FS_IMMUTABLE_FLAG</code> does (though I would be surprised if it didn't).</li>\n<li>It opens the target file descriptor directly via <code>open()</code>, with open flags <code>O_RDONLY|O_NONBLOCK|O_LARGEFILE</code> (or without <code>O_LARGEFILE</code> if that's not defined).</li>\n<li>It closes the file descriptor afterward via <code>close()</code></li>\n</ul>\n\n<p>(Based on e2fsprogs-1.42.12, <code>misc/chattr.c</code> and <code>lib/e2p/fsetflags.c</code>.)</p>\n\n<p>That's drawn from a pretty recent version of e2fsprogs, yet the files involved do not appear to have changed in a very long time, so I'm pretty confident that the same source is applicable to your environment.  If the <code>chattr</code> program works for you, then that's the code by which it does so.  You should be able to do the same.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>One other difference between <code>chattr</code> and the code in the question:  <code>chattr +i</code> <em>merges</em> the immutable flag with any flags already assigned to the file, as obtained via ...</p>\n\n<pre><code>r = ioctl (fd, EXT2_IOC_GETFLAGS, &amp;f);\n</code></pre>\n\n<p>... and then sets the resulting flag set.  In case it matters, it performs this operation on a different file descriptor than the one on which it sets the flags, but one that it opens the same way.</p>\n\n<p>I guess it's possible that your code is inadvertently trying to clear a flag that the driver will not permit you to clear.</p>\n"}], "owner": {"reputation": 21, "user_id": 5318573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766e31bf328d28fbbd04468eb66ce069?s=128&d=identicon&r=PG&f=1", "display_name": "ShovelMan", "link": "https://stackoverflow.com/users/5318573/shovelman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 778, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1441834381, "creation_date": 1441828214, "last_edit_date": 1441830855, "question_id": 32488017, "link": "https://stackoverflow.com/questions/32488017/how-do-i-chattr-i-an-open-file-descriptor-in-c", "title": "How do I chattr +i an open file descriptor in C?", "body": "<p>I want to make a binary that does the equivalent to chattr +i (immutable file) in C. I have attempted with ioctl() and had no success with it. If possible I would like it to be done without the need to include any additional libraries that are not installed/defined in a standard installation.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/ioctl.h&gt;\n#include &lt;linux/fs.h&gt;\n\nint main()\n{\n    FILE *fp;\n    char shovel[16] = \"I have a shovel!\";\n    fp = fopen(\"shovel.txt\", \"w+\");\n    fwrite(shovel, sizeof(shovel[0]), sizeof(shovel)/sizeof(shovel[0]), fp);\n    int immutable = FS_IMMUTABLE_FL;\n    if(ioctl(fileno(fp), FS_IOC_SETFLAGS, &amp;immutable) &lt; 0)\n        perror(\"ioctl(2) error\");\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n\n<p>perror returns \"ioctl(2) error: Operation not supported\" when ran as root with global rwx on the file.</p>\n\n<p>I have tested that chattr +i works on the command line. The file becomes immutable as expected.</p>\n\n<p>Also the question marked as duplicate is my question on an account I no longer have access to. It's linked to one of many of my google accounts I created.</p>\n\n<p>The script was tested on a friends server last night after my vps went down for maintenance. The feedback I gave on that thread was based on feedback from the friend over skype. What you see above is the results of my own testing on my own server.</p>\n\n<p>Not a duplicate, the original was reporting \"Bad Address\"</p>\n\n<pre><code>-bash-3.2# cat /proc/mounts\n/dev/simfs / simfs rw,relatime,usrquota,grpquota 0 0\nproc /proc proc rw,relatime 0 0\nsysfs /sys sysfs rw,relatime 0 0\nnone /dev tmpfs rw,relatime,mode=755 0 0\nnone /dev/pts devpts rw,relatime,gid=5,mode=620,ptmxmode=000 0 0\nnone /proc/sys/fs/binfmt_misc binfmt_misc rw,relatime 0 0\n\n-bash-3.2# rm shovel.txt\n-bash-3.2# ./1\nioctl(2) error: Operation not supported\n-bash-3.2# lsattr shovel.txt\n------------- shovel.txt\n-bash-3.2#\n</code></pre>\n"}, {"tags": ["c", "eclipse", "debugging"], "comments": [{"owner": {"reputation": 2124, "user_id": 3871352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yb6Z4.jpg?s=128&g=1", "display_name": "Kiloreux", "link": "https://stackoverflow.com/users/3871352/kiloreux"}, "edited": false, "score": 0, "creation_date": 1441827021, "post_id": 32487657, "comment_id": 52836079, "body": "you probably need to ask one question at a time /"}], "answers": [{"tags": [], "owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "is_accepted": false, "score": 1, "last_activity_date": 1441828901, "creation_date": 1441828901, "answer_id": 32488188, "question_id": 32487657, "link": "https://stackoverflow.com/questions/32487657/eclipse-debugging-c/32488188#32488188", "title": "Eclipse Debugging C", "body": "<p>To get the source file malloc.c you need the source code for glibc.</p>\n\n<p>If you have to debug into glibc, odds are you do are a glibc developer.  In nearly every other case, you are better served by stepping over glibc.  When you set your breakpoint, I highly suggest that you <strong>step over</strong> the glibc calls.</p>\n\n<p>Glibc is generally implemented not by a lot of C code, but by a lot of machine specific code lightly wrapped in C APIs, and the machine specific code is different for every machine.</p>\n\n<p>Also, the debugger isn't having a problem, it is reporting that it doesn't have the source code for a library (glibc in this case) and is happy to keep debugging (but it can't show you a line number until it steps out of the glibc malloc call).</p>\n"}], "owner": {"reputation": 105, "user_id": 5231892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf45864de1f709223dce39f2a459bc6e?s=128&d=identicon&r=PG&f=1", "display_name": "Seb", "link": "https://stackoverflow.com/users/5231892/seb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441828901, "creation_date": 1441826678, "last_edit_date": 1495542575, "question_id": 32487657, "link": "https://stackoverflow.com/questions/32487657/eclipse-debugging-c", "title": "Eclipse Debugging C", "body": "<p>Environment:</p>\n\n<ul>\n<li>Eclipse IDE for C/C++ Developers Version: Mars Release (4.5.0)</li>\n<li>Ubuntu 14.04</li>\n</ul>\n\n<p>I have a problem with 'Debug mode' under Eclipse. I tried to debug a simple program as an experiment:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char* argv[])\n{\n    char *s = malloc(1);\n    free(s);\n    s = NULL;\n    return 0;\n}\n</code></pre>\n\n<p>The program is building correctly and is working without any Errors/Warnings but during debugging I am receiving following error:\n<a href=\"https://i.stack.imgur.com/MPjOE.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MPjOE.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I have searched my entire hard drive and file malloc.c is not present. </p>\n\n<p>The questions:</p>\n\n<ol>\n<li><p>If the file malloc.c can not be found, why the program can be build\nand is running correctly?</p></li>\n<li><p>Why the debugger has a problems with functions visible to the\ncompiler?</p></li>\n<li><p>Has anyone saw this issue in the past and knows the solution?</p></li>\n<li><p>What kind of programming environment with debug mode are you using\nother than Eclipse?</p></li>\n</ol>\n\n<p>I have found a couple similar topics, but without the general issue solution:</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/18752183/how-can-i-escape-from-no-source-available-errors-when-stepping-over-a-stdio-fu\">How can i Escape from &quot;no source available&quot; errors when stepping OVER a stdio function in eclipse (C language, using CDT)</a></li>\n<li><a href=\"https://stackoverflow.com/questions/26964364/gdb-on-eclipse-debug-mode-cant-find-stdlib-rand-c?rq=1\">GDB on eclipse debug mode can&#39;t find stdlib/rand.c</a></li>\n</ol>\n\n<p>Running commands:</p>\n\n<pre><code># apt-get install libc6-dbg\n# apt-get source libc6\n</code></pre>\n\n<p>Does not solve the problem.</p>\n"}, {"tags": ["c++", "c", "pthreads", "parameter-passing", "void-pointers"], "comments": [{"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1441826767, "post_id": 32487579, "comment_id": 52835947, "body": "You can trivially write a wrapper: <code>void* ThreadMethod (void*) { SomeMethod(); return NULL; }</code>"}, {"owner": {"reputation": 133667, "user_id": 44389, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/eed60bdfc964ec62cc48aa6020a03d7b?s=128&d=identicon&r=PG", "display_name": "Noldorin", "link": "https://stackoverflow.com/users/44389/noldorin"}, "edited": false, "score": 0, "creation_date": 1441827674, "post_id": 32487579, "comment_id": 52836386, "body": "Actually <code>void * foo()</code> is valid C, albeit deprecated, since it doesn&#39;t specify its parameter list."}], "answers": [{"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 5, "last_activity_date": 1441826946, "last_edit_date": 1441826946, "creation_date": 1441826580, "answer_id": 32487624, "question_id": 32487579, "link": "https://stackoverflow.com/questions/32487579/why-does-a-function-accept-a-void-pointer/32487624#32487624", "title": "Why does a function accept a void pointer?", "body": "<p>Because the <code>pthread_create</code> function takes an argument of type <code>void* (*)(void*)</code> which is a function taking a <code>void*</code> and  returning a <code>void*</code>, so to create a thread using <code>pthread_create</code> that's what you need to use.</p>\n\n<p>The <code>pthread_create</code> API takes that to allow you to pass data to the new thread and get data back again. If you don't want to pass anything in you still have to meet that interface, but just pass it NULL.</p>\n\n<p>Just because <em>you</em> don't want to pass any arguments to your new thread right now doesn't mean the API should be designed to only support your current use case. It's much better to have an API written in terms of a function taking <code>void*</code> (which can optionally be passed NULL) than to have an API in terms of a function taking no arguments and requiring users to come up with their own solutions for passing data to the new thread.</p>\n\n<p>In C++ you can use any type of function for the new thread and pass it whatever arguments you need to:</p>\n\n<pre><code>std::thread t(&amp;SomeMethod);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": false, "score": 3, "last_activity_date": 1441826588, "creation_date": 1441826588, "answer_id": 32487628, "question_id": 32487579, "link": "https://stackoverflow.com/questions/32487579/why-does-a-function-accept-a-void-pointer/32487628#32487628", "title": "Why does a function accept a void pointer?", "body": "<p>Because they wanted to write just the one function for creating threads - to take and return data.</p>\n\n<p>Otherwise they would have to write at least four possibilities.</p>\n\n<p>You are free you ignore the input parameter and the return value.</p>\n\n<p>Just a matter of simplicity</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1441827837, "last_edit_date": 1441827837, "creation_date": 1441826603, "answer_id": 32487636, "question_id": 32487579, "link": "https://stackoverflow.com/questions/32487579/why-does-a-function-accept-a-void-pointer/32487636#32487636", "title": "Why does a function accept a void pointer?", "body": "<p>As per the <a href=\"http://linux.die.net/man/3/pthread_create\" rel=\"nofollow\">man page</a> of <code>pthread_create()</code>, we can see, the signature of the function is</p>\n\n<pre><code> int pthread_create(pthread_t *thread, const pthread_attr_t *attr,\n               void *(*start_routine) (void *), void *arg);\n</code></pre>\n\n<p>where the third argument is of type</p>\n\n<pre><code>void *(*start_routine) (void *)\n</code></pre>\n\n<p>which means, it expects a pointer to a function with return type <code>void *</code> and accepting a <code>void *</code> argument. So, we need to define the thread function accordingly.</p>\n\n<p>That said, regarding the usage of <code>void</code> pointer for argument passing, quoting <code>C11</code>, chapter \u00a76.3.2.3</p>\n\n<blockquote>\n  <p>A pointer to <code>void</code> may be converted to or from a pointer to any object type. A pointer to any object type may be converted to a pointer to <code>void</code> and back again; the result shall compare equal to the original pointer.</p>\n</blockquote>\n\n<p>As we can see, the <code>void</code> pointer is used to pass <em>any</em> type of data to the thread function , provided, it is converted back to the actual type inside the function.</p>\n\n<p>Also, FWIW, do not try to deviate from the required signature of a function pointer, as the standard clearly mandates</p>\n\n<blockquote>\n  <p>[....] If a converted pointer is used to call a function whose type is not  compatible with the referenced type, the behavior is undefined. In case you don't want (need) to pass any valid argument value, you can always pass <code>NULL</code>.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 3, "last_activity_date": 1441826722, "creation_date": 1441826722, "answer_id": 32487668, "question_id": 32487579, "link": "https://stackoverflow.com/questions/32487579/why-does-a-function-accept-a-void-pointer/32487668#32487668", "title": "Why does a function accept a void pointer?", "body": "<p>Because quite often, we want to give the thread something to work on (or with, or off, or whatever). A very typical example is to pass in an instance of a class, so you can make calls to the class member functions.</p>\n\n<p>But it could be all sorts of other things - a struct, or a pointer to some simple data.</p>\n\n<p>Of course, using <code>std::thread</code> will hide most such things anyway, and you don't need to worry about it. I would strongly suggest using <code>std::thread</code> instead of <code>pthread</code> in general.</p>\n"}, {"tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": false, "score": 2, "last_activity_date": 1441826768, "creation_date": 1441826768, "answer_id": 32487682, "question_id": 32487579, "link": "https://stackoverflow.com/questions/32487579/why-does-a-function-accept-a-void-pointer/32487682#32487682", "title": "Why does a function accept a void pointer?", "body": "<p><code>void *SomeMethod(void* x)</code> is used as an entry point for the new thread.\nHow should you act if you want to pass to the new thread some data (struct, buffer, a regular integer, etc.)? Specially for this <em>entry point</em> method receives <code>void*</code> argument which can point to anything you want. Then inside the function body you can cast it back to the proper type and use it by the worker thread.</p>\n\n<p>In case your thread doesn't need any additional data you can pass <code>NULL</code> or <code>nullptr</code> (for C++11) to it.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1441827152, "last_edit_date": 1441827152, "creation_date": 1441826810, "answer_id": 32487696, "question_id": 32487579, "link": "https://stackoverflow.com/questions/32487579/why-does-a-function-accept-a-void-pointer/32487696#32487696", "title": "Why does a function accept a void pointer?", "body": "<p>No, the method signature you propose will not work as the start function for a pthreads thread.  If you  pass a pointer to such a function to <code>pthread_create()</code> then the compiler should warn.  If you run the resulting program then you invoke undefined behavior, because the pointer does not have the correct type.  As a practical matter, the pthreads library will try to pass an argument to to the start function, and will expect a return value from it; if you provide a pointer to a function that does not both consume an argument and return a value (both of appropriate type) then very likely the program will crash. </p>\n\n<p>As for <em>why</em> the start function is required to have the signature it does, a <code>void *</code> argument can be used to convey an actual argument of any type, including a composite type encompassing multiple distinct values, and similarly, a <code>void *</code> return type can be used to convey a return value of any type.  This is pretty much the most general function type possible.</p>\n"}], "owner": {"reputation": 2129, "user_id": 5208889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/45b68fcd5396fff95dc0c02e37efb276?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/5208889/ozgur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1892, "favorite_count": 0, "accepted_answer_id": 32487624, "answer_count": 6, "score": 1, "last_activity_date": 1538505261, "creation_date": 1441826405, "last_edit_date": 1538505261, "question_id": 32487579, "link": "https://stackoverflow.com/questions/32487579/why-does-a-function-accept-a-void-pointer", "title": "Why does a function accept a void pointer?", "body": "<p>I am trying to understand pthread.</p>\n\n<p>However It is required to create thread methods as follows:</p>\n\n<pre><code>void *SomeMethod(void* x)\n{\n    //Do Something\n}\n</code></pre>\n\n<p>Why is it necessary to create a function that accepts a <code>void</code> pointer? Can't we use pthread with a function like this?</p>\n\n<pre><code>void SomeMethod()\n{\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "debugging", "gdb"], "comments": [{"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 1, "creation_date": 1441825448, "post_id": 32487278, "comment_id": 52835312, "body": "Because 1) the disassembly-flavour is <i>not</i> saved across GDB invocations (<a href=\"http://stackoverflow.com/questions/2045509/how-to-save-settings-in-gdb?rq=1\">you need to set it in a <code>gdbinit</code> script run by GDB when it starts</a>) and 2) The correct name in GDB for the <code>eip</code> register is <code>pc</code> or <code>$pc</code>."}, {"owner": {"reputation": 215, "user_id": 3698624, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/2875386f2772c39fbfc6149282c86748?s=128&d=identicon&r=PG&f=1", "display_name": "user3698624", "link": "https://stackoverflow.com/users/3698624/user3698624"}, "reply_to_user": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 0, "creation_date": 1441825867, "post_id": 32487278, "comment_id": 52835505, "body": "@IwillnotexistIdonotexist I know, and I set the flavor by doing this. <code>patrick@localhost:~&#47;Dokumente&#47;Projekte$ cat ~&#47;.gdbinit </code>  <code>set disassembly-flavor intel </code>  And for root: <code>patrick@localhost:~&#47;Dokumente&#47;Projekte$ su</code>  <code>Passwort: </code>  <code>root@localhost:&#47;home&#47;patrick&#47;Dokumente&#47;Projekte# cat ~&#47;.gdbinit</code>  <code>set disassembly intel</code>"}], "answers": [{"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 2, "last_activity_date": 1441826113, "creation_date": 1441826113, "answer_id": 32487503, "question_id": 32487278, "link": "https://stackoverflow.com/questions/32487278/gdb-dis-flavor-set-to-intel-but-showing-att-style/32487503#32487503", "title": "GDB Dis-Flavor set to Intel, but showing AT&amp;T-style", "body": "<p>You are misunderstanding what disassembly flavour means. It means exactly that: what the disassembly looks like when you view machine code in a human-readable(ish) form. </p>\n\n<p>To print registers (or use registers in any other context), you need to use <code>$reg</code>, such as <code>$rip</code> or <code>$pc</code>, <code>$eax</code>, etc. </p>\n\n<p>If I disassemble one of my programs with at&amp;t syntax, gdb shows this:</p>\n\n<pre><code>   0x00000000007378f0 &lt;+0&gt;: push   %rbp\n   0x00000000007378f1 &lt;+1&gt;: mov    %rsp,%rbp\n   0x00000000007378f4 &lt;+4&gt;: sub    $0x20,%rsp\n   0x00000000007378f8 &lt;+8&gt;: movl   $0x0,-0x4(%rbp)\n   0x00000000007378ff &lt;+15&gt;:    mov    %edi,-0x8(%rbp)\n   0x0000000000737902 &lt;+18&gt;:    mov    %rsi,-0x10(%rbp)\n=&gt; 0x0000000000737906 &lt;+22&gt;:    mov    -0x10(%rbp),%rsi\n   0x000000000073790a &lt;+26&gt;:    mov    (%rsi),%rdi\n   0x000000000073790d &lt;+29&gt;:    callq  0x737950 &lt;FindLibPath(char const*)&gt;\n   0x0000000000737912 &lt;+34&gt;:    xor    %eax,%eax\n</code></pre>\n\n<p>Then do this:</p>\n\n<pre><code>(gdb) set disassembly-flavor intel \n(gdb) disass main\nDump of assembler code for function main(int, char**):\n   0x00000000007378f0 &lt;+0&gt;: push   rbp\n   0x00000000007378f1 &lt;+1&gt;: mov    rbp,rsp\n   0x00000000007378f4 &lt;+4&gt;: sub    rsp,0x20\n   0x00000000007378f8 &lt;+8&gt;: mov    DWORD PTR [rbp-0x4],0x0\n   0x00000000007378ff &lt;+15&gt;:    mov    DWORD PTR [rbp-0x8],edi\n   0x0000000000737902 &lt;+18&gt;:    mov    QWORD PTR [rbp-0x10],rsi\n=&gt; 0x0000000000737906 &lt;+22&gt;:    mov    rsi,QWORD PTR [rbp-0x10]\n   0x000000000073790a &lt;+26&gt;:    mov    rdi,QWORD PTR [rsi]\n   0x000000000073790d &lt;+29&gt;:    call   0x737950 &lt;FindLibPath(char const*)&gt;\n   0x0000000000737912 &lt;+34&gt;:    xor    eax,eax\n</code></pre>\n\n<p>and you can see the difference. But the names of registers and how you use registers on the gdb command-line isn't changing, you need a <code>$reg</code> in both cases.</p>\n"}], "owner": {"reputation": 215, "user_id": 3698624, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/2875386f2772c39fbfc6149282c86748?s=128&d=identicon&r=PG&f=1", "display_name": "user3698624", "link": "https://stackoverflow.com/users/3698624/user3698624"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 833, "favorite_count": 0, "accepted_answer_id": 32487503, "answer_count": 1, "score": 0, "last_activity_date": 1441826113, "creation_date": 1441825161, "last_edit_date": 1441825463, "question_id": 32487278, "link": "https://stackoverflow.com/questions/32487278/gdb-dis-flavor-set-to-intel-but-showing-att-style", "title": "GDB Dis-Flavor set to Intel, but showing AT&amp;T-style", "body": "<p>I've set the <code>disassembly-flavor</code> of the <strong>gdb-debugger</strong> to <code>Intel</code> (both: su &amp; normal user), but anyway it's still showing the assembly-code in <code>AT&amp;T</code> notation:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>patrick@localhost:~/Dokumente/Projekte$ gdb -q ./a.out\nReading symbols from ./a.out...done.\n(gdb) break main\nBreakpoint 1 at 0x40050e: file firstprog.c, line 5.\n(gdb) run\nStarting program: /home/patrick/Dokumente/Projekte/a.out \n\nBreakpoint 1, main () at firstprog.c:5\n5   for(i=0; i &lt; 10; i++)\n(gdb) show disassembly\nThe disassembly flavor is \"intel\".\n(gdb) info registers\nrax            0x400506 4195590\nrbx            0x0  0\nrcx            0x0  0\nrdx            0x7fffffffe2d8   140737488347864\nrsi            0x7fffffffe2c8   140737488347848\nrdi            0x1  1\nrbp            0x7fffffffe1e0   0x7fffffffe1e0\n(gdb) info register eip\nInvalid register `eip'\n</code></pre>\n\n<p>I <strong>did</strong> restart the computer. My OS is Kali Linux <strong>amd64</strong>.\nI have the following questions:</p>\n\n<ul>\n<li>Why is <strong>gdb</strong> still showing the <code>AT&amp;T</code> notation?</li>\n<li>Why is the register <code>EIP</code> (<strong>instruction pointer)</strong> shown as <em>invalid register</em>?</li>\n</ul>\n"}, {"tags": ["c", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5310921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9bea0a68e57bb5185b0a652439bb3c6?s=128&d=identicon&r=PG&f=1", "display_name": "L M", "link": "https://stackoverflow.com/users/5310921/l-m"}, "edited": false, "score": 0, "creation_date": 1441825225, "post_id": 32487232, "comment_id": 52835181, "body": "Oh! that makes sense.  THANK YOU"}, {"owner": {"reputation": 29, "user_id": 5310921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9bea0a68e57bb5185b0a652439bb3c6?s=128&d=identicon&r=PG&f=1", "display_name": "L M", "link": "https://stackoverflow.com/users/5310921/l-m"}, "edited": false, "score": 0, "creation_date": 1441825290, "post_id": 32487232, "comment_id": 52835220, "body": "Does sumElements(arr[j]) process the entire 20 columns ?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 29, "user_id": 5310921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9bea0a68e57bb5185b0a652439bb3c6?s=128&d=identicon&r=PG&f=1", "display_name": "L M", "link": "https://stackoverflow.com/users/5310921/l-m"}, "edited": false, "score": 1, "creation_date": 1441825290, "post_id": 32487232, "comment_id": 52835221, "body": "@LM Glad I could help.  Feel free to <a href=\"http://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 29, "user_id": 5310921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9bea0a68e57bb5185b0a652439bb3c6?s=128&d=identicon&r=PG&f=1", "display_name": "L M", "link": "https://stackoverflow.com/users/5310921/l-m"}, "edited": false, "score": 0, "creation_date": 1441825432, "post_id": 32487232, "comment_id": 52835298, "body": "@LM The function will receive an array which is the row in question, so it can process each of the 20 columns.  If the function doesn&#39;t know how many columns there are, you should pass that as a parameter as well."}, {"owner": {"reputation": 29, "user_id": 5310921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9bea0a68e57bb5185b0a652439bb3c6?s=128&d=identicon&r=PG&f=1", "display_name": "L M", "link": "https://stackoverflow.com/users/5310921/l-m"}, "edited": false, "score": 0, "creation_date": 1441825521, "post_id": 32487232, "comment_id": 52835348, "body": "Great! Appreciate your immediate support."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1441825024, "creation_date": 1441825024, "answer_id": 32487232, "question_id": 32487187, "link": "https://stackoverflow.com/questions/32487187/sending-the-pointer-of-each-row-of-a-matrix-to-a-function/32487232#32487232", "title": "Sending the pointer of each row of a matrix to a function", "body": "<p>The current row is not <code>*arr[j]</code>, but <code>arr[j]</code>.  The former is of type <code>int</code> while the latter is of type <code>int *</code>.  So <code>sumElements</code> should be passed a <code>int []</code> or <code>int *</code>, not a <code>int *[]</code>.</p>\n\n<p>So the function definition should be:</p>\n\n<pre><code>int sumElements(int arr[])\n</code></pre>\n\n<p>And you should call it like this:</p>\n\n<pre><code>sumElements(arr[j]);\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5310921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9bea0a68e57bb5185b0a652439bb3c6?s=128&d=identicon&r=PG&f=1", "display_name": "L M", "link": "https://stackoverflow.com/users/5310921/l-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1441825024, "creation_date": 1441824828, "question_id": 32487187, "link": "https://stackoverflow.com/questions/32487187/sending-the-pointer-of-each-row-of-a-matrix-to-a-function", "title": "Sending the pointer of each row of a matrix to a function", "body": "<p>I am learning memory allocation in C. I want to create a matrix of [10][20] using <code>malloc</code> such that each row is sent to a function to be processed. Is it enough to send only the pointer of each row? i.e. <code>*arr[0]</code>;</p>\n\n<p>The following is a chunk of my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint **arr; // Buffer\n\nint sumElements(int *arr[]){\n // do something\n}\n\n\nvoid main(){\n    int i,j;\n    arr = malloc(10 * sizeof(int *)); // Allocate # of rows for the matrix\n\n        for(i = 0; i &lt; 10; i++){\n            arr[j]= malloc(20 * sizeof(int)); // Allocate # of entries in each row\n            sumElements(*arr[j]); // send the current row to be processed by function\n        }\n\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "tcp", "udp", "bind"], "comments": [{"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1441820915, "post_id": 32486024, "comment_id": 52833055, "body": "Which <code>bind</code> do you have a problem with exactly? The child should inherit both the UDP and TCP listening sockets, and so it should not need to <code>bind</code> anything."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1441822391, "post_id": 32486024, "comment_id": 52833795, "body": "You are not having any problem with a TCP bind to a port because it is already used by a UDP socket. Please state your actual problem, and preferably show some code."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1441820827, "creation_date": 1441820827, "answer_id": 32486145, "question_id": 32486024, "link": "https://stackoverflow.com/questions/32486024/bind-address-already-used-c-udp-tcp/32486145#32486145", "title": "Bind address already used C udp/tcp", "body": "<p>UDP and TCP ports are in different spaces.  So you can have one socket bound to UDP/8888 and another bound to TCP/8888 with no problem.  If your child processes are trying to bind to the same TCP port, then you could have an issue.</p>\n"}, {"tags": [], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "is_accepted": false, "score": 1, "last_activity_date": 1441821318, "creation_date": 1441821318, "answer_id": 32486265, "question_id": 32486024, "link": "https://stackoverflow.com/questions/32486024/bind-address-already-used-c-udp-tcp/32486265#32486265", "title": "Bind address already used C udp/tcp", "body": "<p>Having open UDP and TCP sockets on the same port is fine. For example DNS works on UDP 53 and TCP 53 port. You should open sockets before fork, and then close in child what it doesn't need to use.</p>\n"}], "owner": {"reputation": 11, "user_id": 4965406, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/04f05646c7d204bd03fa91cd31659372?s=128&d=identicon&r=PG&f=1", "display_name": "hadolfo", "link": "https://stackoverflow.com/users/4965406/hadolfo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1441836008, "creation_date": 1441820406, "last_edit_date": 1441836008, "question_id": 32486024, "link": "https://stackoverflow.com/questions/32486024/bind-address-already-used-c-udp-tcp", "title": "Bind address already used C udp/tcp", "body": "<p>I am trying to build a server, in this server first I have to receive a UDP and then keep waiting for more UDP messages and when I receive this first UDP message I need to create a TCP connection and wait for clients.</p>\n\n<p>If I wait for the UDP message and I start with the TCP one, my server works perfectly, but I want to use fork, and with the father wait for more UDP messages and with the child start with the TCP part, but if I do this, I have a problem with the bind, because its already used by the UDP part... so.. is there a solution for this?\n<br>Is it possible to do what i want to?\n<br><br>I hope you to understand it.</p>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["c", "main"], "comments": [{"owner": {"reputation": 3980, "user_id": 3876196, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/yYJLo.png?s=128&g=1", "display_name": "AntoineB", "link": "https://stackoverflow.com/users/3876196/antoineb"}, "edited": false, "score": 1, "creation_date": 1441819956, "post_id": 32485865, "comment_id": 52832622, "body": "Why would it ? You&#39;re just calling a standard function, just like if you were calling printf or so."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1441820862, "post_id": 32485865, "comment_id": 52833036, "body": "C has no idea about processes. How would that be possible on a single-process OS like DOS?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441821839, "post_id": 32485865, "comment_id": 52833529, "body": "@Olaf funny thing is DOS <i>does</i> have a notion of processes, although only one of them runs at a time ... see e.g. <a href=\"http://www.ctyme.com/intr/rb-2682.htm\" rel=\"nofollow noreferrer\">Int 21/AH=26h</a>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441822836, "post_id": 32485865, "comment_id": 52834000, "body": "@FelixPalmen: Doesn&#39;t &quot;single-process OS&quot; exactly imply this? How else would a CLI start another program? (I did not program DOS, but TOS very which is very similar)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1441824124, "post_id": 32485865, "comment_id": 52834666, "body": "@Olaf, I was refering to the part &quot;How would that be possible ...&quot; -- it WOULD be possible even on DOS if C wanted to know about processes. Knowing about processes doesn&#39;t necessarily mean multitasking."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441824649, "post_id": 32485865, "comment_id": 52834942, "body": "@FelixPalmen: Again: that&#39;s why I wrote &quot;<b>single</b>-process&quot;. But I could well have mentioned bare-metal embedded, etc. One fundamental philosophy of C is not to require any run-time (not counting possible startup initialization which can/will be handled by the OS loader)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441824772, "post_id": 32485865, "comment_id": 52834994, "body": "@Olaf, just accept that <i>DOS</i> ist not the example to make your (otherwise valid) point."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 6, "last_activity_date": 1441820150, "creation_date": 1441820150, "answer_id": 32485963, "question_id": 32485865, "link": "https://stackoverflow.com/questions/32485865/does-calling-main-from-main-spawn-a-new-process/32485963#32485963", "title": "Does calling main from main spawn a new process?", "body": "<p>It does not create a new process.  It just calls a function in the same process.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint start=1;\n\nint main()\n{\n    if (start) {\n        printf(\"in first call to main, pid=%d\\n\",getpid());\n        start=0;\n        return main();\n    } else {\n        printf(\"in second call to main, pid=%d\\n\",getpid());\n        return 1;\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>in first call to main, pid=15482\nin second call to main, pid=15482\n</code></pre>\n\n<p>Process exits with status 1.</p>\n"}, {"tags": [], "owner": {"reputation": 789, "user_id": 1066393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6zNBn.jpg?s=128&g=1", "display_name": "ZaxLofful", "link": "https://stackoverflow.com/users/1066393/zaxlofful"}, "is_accepted": false, "score": 1, "last_activity_date": 1441820444, "creation_date": 1441820444, "answer_id": 32486033, "question_id": 32485865, "link": "https://stackoverflow.com/questions/32485865/does-calling-main-from-main-spawn-a-new-process/32486033#32486033", "title": "Does calling main from main spawn a new process?", "body": "<p>It will not create another process, but what it will do is nest main() within itself. There are some weird things that will happen. If you don't explicitly tell main that you are completely done it will keep running and the process will not terminate; because the original call to main has not completed. It is nested within itself when you call it.</p>\n\n<p>Great question. When I was first learning C I had this pop-up. I was using main at the end to rerun everything instead of just using a loop. My teacher said this is not a good practice.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1441907035, "post_id": 32486035, "comment_id": 52875844, "body": "Doing the <code>int pid1 = getpid(); printf(&quot;Main: %d\\n&quot;, pid1);</code> outside the <code>if()</code> would be stronger evidence.  As far as we know the 3rd time <code>main()</code> is called (1st by system, 2x by code), it has a differing pid."}], "tags": [], "owner": {"reputation": 982, "user_id": 4446102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002889957885/picture?type=large", "display_name": "Nagabhushan Baddi", "link": "https://stackoverflow.com/users/4446102/nagabhushan-baddi"}, "is_accepted": false, "score": -2, "last_activity_date": 1441904600, "last_edit_date": 1441904600, "creation_date": 1441820450, "answer_id": 32486035, "question_id": 32485865, "link": "https://stackoverflow.com/questions/32485865/does-calling-main-from-main-spawn-a-new-process/32486035#32486035", "title": "Does calling main from main spawn a new process?", "body": "<p>The main function is called in the same process and it can be checked by printing the value returned by getpid() as follows:</p>\n\n<pre><code>int main(){\n   static int i = 2;\n   if (i&gt;0){\n      int pid1 = getpid();\n      printf(\"Main: %d\\n\", pid1);\n      i--;\n      main();\n   }\n\n}\n</code></pre>\n\n<p>The output is </p>\n\n<pre><code>Main: 32323\nMain: 32323\n</code></pre>\n\n<p>which confirms that main is called in the same process as the first one is called by the system.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 1, "last_activity_date": 1441821012, "creation_date": 1441821012, "answer_id": 32486185, "question_id": 32485865, "link": "https://stackoverflow.com/questions/32485865/does-calling-main-from-main-spawn-a-new-process/32486185#32486185", "title": "Does calling main from main spawn a new process?", "body": "<blockquote>\n  <p>I have read that the value that main returns is returned by the process in which it is executed.</p>\n</blockquote>\n\n<p>This is because the C runtime will call <code>main()</code> and after it's execution do some operating-system-specific stuff to set the exit status to whatever <code>main()</code> returned. There is, however, nothing special about <code>main()</code>, it is just a normal function.</p>\n\n<p>This particularly means it is not the entry point of your program ... the real entry point is provided by the C runtime that is linked to your program and <code>main()</code> is called from there.</p>\n\n<p>As an example, see some code I recently wrote for an own runtime for DOS <code>.COM</code> executables:</p>\n\n<pre><code>__asm__ (\n        \"   .section    .comstartup             \\n\"\n        \"   .globl      __com__start            \\n\"\n\n        /* THIS is the real entry point, call a function to get some info\n         * about the console and then jump to a function getting command\n         * line arguments from DOS and calling main */\n\n        \"__com__start:                          \\n\"\n        \"   call        _getcinfo               \\n\"\n        \"   jmp         argstart                \\n\"\n        \"   .text                               \\n\");\n\nvoid __attribute__((__noreturn__)) exit(int status)\n{\n    /* this just calls the DOS function for exiting with exit status */\n    __asm__ volatile (\n            \"mov    $0x4c, %%ah     \\n\\t\"\n            \"int    $0x21           \\n\\t\"\n            :\n            : \"a\" (status)\n            );\n    __builtin_unreachable();\n}\n\nstatic void argstart(void)\n{\n    char *cmdline = (char *)0x81;\n    argc = 1;\n    argv[0] = progname();\n\n    {\n        /* some code to populate argv[] */\n        [....]\n    }\n\n    /* and this could be a quite typical line in any C runtime, just\n     * call exit() with whatever main() returns: */\n    exit(main(argc, argv));\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4642421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1441904600, "creation_date": 1441819786, "last_edit_date": 1441819964, "question_id": 32485865, "link": "https://stackoverflow.com/questions/32485865/does-calling-main-from-main-spawn-a-new-process", "title": "Does calling main from main spawn a new process?", "body": "<p>Does calling main from main spawn a new process for the called main or does it call main in the same process? </p>\n\n<p>I have read that the value that main returns is returned by the process in which it is executed.</p>\n"}, {"tags": ["c", "compilation", "generated-code", "compiler-options"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1441825414, "post_id": 32485737, "comment_id": 52835287, "body": "&quot;GCC doesn&#39;t have an argument to link files and then apply the preprocessing pass.&quot;  No, of course it doesn&#39;t.  Preprocessing happens (logically) before compilation, and linking happens after.  If you&#39;re ready to link, then the opportunity to preprocess is long past."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1441825645, "post_id": 32485737, "comment_id": 52835402, "body": "If <code>csmith</code> generates source code which contains conditional compilation directives hinging on whether the symbol <code>NO_PRINTF</code> is defined, then the time to define that symbol would normally be when you compile.  Alternatively, if you preprocess <code>csmith</code>-generated source with <code>gcc -E -DNO_PRINTF</code>, then the next step is to <i>compile</i> the pre-processed output."}, {"owner": {"reputation": 73, "user_id": 1422158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667a9ef08a9094760bd594c42585b32a?s=128&d=identicon&r=PG", "display_name": "jcnm", "link": "https://stackoverflow.com/users/1422158/jcnm"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1441877481, "post_id": 32485737, "comment_id": 52855918, "body": "Thank, I guess that I got the compilation steps. But, I was looking for a magic trick to link if possible and then apply the preprocessing step (or a mixing). As I said, &quot;gcc -E -DNO_PRINTF&quot; yields something which still contains printf despite the -DNO_PRINTF argument."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1441892149, "post_id": 32485737, "comment_id": 52866029, "body": "there is no magic trick.  For each contributing source file, you preprocess, THEN compile.  Once all the sources are compiled THEN you link.  Sometimes some or all of that can be wrapped up in only a small number of explicit commands, but the logical progression must always be consistent with that order."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1441892373, "post_id": 32485737, "comment_id": 52866202, "body": "As for the <code>NO_PRINTF</code> symbol, I see it in a few places in the csmith 2.2.0 sources, but I find no documentation of it whatever.  I certainly don&#39;t see the basis for your apparent belief that defining that symbol during compilation of generated sources should cause the generated program to avoid ever calling <code>printf()</code>."}, {"owner": {"reputation": 73, "user_id": 1422158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667a9ef08a9094760bd594c42585b32a?s=128&d=identicon&r=PG", "display_name": "jcnm", "link": "https://stackoverflow.com/users/1422158/jcnm"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1442219247, "post_id": 32485737, "comment_id": 52976218, "body": "My main problem come from csmith_minimal.h. There are a lot of NO_PRINTF usage here.  This function   <i>platform_main_end (uint64_t x, int flag) { //... #ifdef NO_PRINTF  //putchar #else  // printf  #endif   } #endif }</i>  Event with -DNO_PRINTF activated, the generated source code is   <i>platform_main_end (uint64_t x, int flag) {   if (!flag) {     printf (&quot;checksum = %llx\\n&quot;, x);   } }</i>   Anyways, thanks for your help with those information, I am trying alternatives solutions.  Beside, why my question is valuated -1 ?"}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1442310443, "post_id": 32485737, "comment_id": 53019451, "body": "Have you tried the option <code>--no-hash-value-printf</code>? Check the not-so-commonly-used flags by running <code>csmith</code> with the <code>-hh</code> option"}], "owner": {"reputation": 73, "user_id": 1422158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667a9ef08a9094760bd594c42585b32a?s=128&d=identicon&r=PG", "display_name": "jcnm", "link": "https://stackoverflow.com/users/1422158/jcnm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455455964, "creation_date": 1441819232, "last_edit_date": 1455455964, "question_id": 32485737, "link": "https://stackoverflow.com/questions/32485737/generate-csmith-programs-without-printf", "title": "Generate csmith programs without printf", "body": "<p>I'am trying to generate csmith programs without any printf inside.</p>\n\n<p>I tried to apply <strong>-E -DNO_PRINTF</strong> to a generated program but it seem as GCC doesn't have an argument to link files and then apply the preprocessing pass.</p>\n\n<p>So how to tell csmith to avoid printf in its generated programs?</p>\n"}, {"tags": ["c", "file", "newline", "msvcrt"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1441817721, "post_id": 32485291, "comment_id": 52831489, "body": "Can you examine the resulting file in a hex editor?"}, {"owner": {"reputation": 3462, "user_id": 654946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af6adb6ed10ca7bf9e6df666437520ba?s=128&d=identicon&r=PG", "display_name": "Kevin Richardson", "link": "https://stackoverflow.com/users/654946/kevin-richardson"}, "edited": false, "score": 0, "creation_date": 1441817948, "post_id": 32485291, "comment_id": 52831612, "body": "Can you show how <code>buffer</code> and <code>nbytes</code> are defined and assigned?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441818125, "post_id": 32485291, "comment_id": 52831710, "body": "Are you expecting the compressed output to be <i>smaller</i> than the input? it won&#39;t always be on small data samples."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1441818152, "post_id": 32485291, "comment_id": 52831728, "body": "Do you have an example of a good file you can compare your results against?"}, {"owner": {"reputation": 2766, "user_id": 1199019, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f2b20868e20d94f2a73c0e0908c38570?s=128&d=identicon&r=PG", "display_name": "Aneesh Narayanan", "link": "https://stackoverflow.com/users/1199019/aneesh-narayanan"}, "edited": false, "score": 0, "creation_date": 1441818417, "post_id": 32485291, "comment_id": 52831857, "body": "yes, I compared the resulting file. I am seeing some extra&#39; 0d &#39; in the output file."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441818791, "post_id": 32485291, "comment_id": 52832041, "body": "What happens when you redirect to <code>File.dat</code> instead of <code>File.txt</code>?"}, {"owner": {"reputation": 2766, "user_id": 1199019, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f2b20868e20d94f2a73c0e0908c38570?s=128&d=identicon&r=PG", "display_name": "Aneesh Narayanan", "link": "https://stackoverflow.com/users/1199019/aneesh-narayanan"}, "edited": false, "score": 0, "creation_date": 1441818905, "post_id": 32485291, "comment_id": 52832091, "body": "Still seeing the same behaviour even after using .dat"}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1441819078, "post_id": 32485291, "comment_id": 52832180, "body": "Can you make <code>fd</code> a parameter and try writing directly to a file?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1441819233, "post_id": 32485291, "comment_id": 52832258, "body": "How are you looking at the file?"}, {"owner": {"reputation": 2766, "user_id": 1199019, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f2b20868e20d94f2a73c0e0908c38570?s=128&d=identicon&r=PG", "display_name": "Aneesh Narayanan", "link": "https://stackoverflow.com/users/1199019/aneesh-narayanan"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1441819439, "post_id": 32485291, "comment_id": 52832357, "body": "@Jason : Sorry I didn&#39;t get you. Could you please say more detailed?"}, {"owner": {"reputation": 2766, "user_id": 1199019, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f2b20868e20d94f2a73c0e0908c38570?s=128&d=identicon&r=PG", "display_name": "Aneesh Narayanan", "link": "https://stackoverflow.com/users/1199019/aneesh-narayanan"}, "edited": false, "score": 0, "creation_date": 1441819510, "post_id": 32485291, "comment_id": 52832390, "body": "@ stark : I used notepad++ editor to see the contents and file size. Also using hex editor for comparison."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1441819796, "post_id": 32485291, "comment_id": 52832540, "body": "Can you modify your source to use <code>fd</code> as a parameter instead of always using <code>stdout</code> and include the results in your question?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441820135, "post_id": 32485291, "comment_id": 52832702, "body": "I notice you are using <code>_setmode</code> a MS Visual C++ function replacing <code>setmode</code> which is deprecated. Yet you are using the deprecated <code>fileno</code> and <code>write</code> instead of <code>_fileno</code> and <code>_write</code>. Does this affect things?"}, {"owner": {"reputation": 2766, "user_id": 1199019, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f2b20868e20d94f2a73c0e0908c38570?s=128&d=identicon&r=PG", "display_name": "Aneesh Narayanan", "link": "https://stackoverflow.com/users/1199019/aneesh-narayanan"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441820527, "post_id": 32485291, "comment_id": 52832883, "body": "@WeatherVane : Yes!!!! It works. That was the actual issue. Thanks a lot."}, {"owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 1, "creation_date": 1441821044, "post_id": 32485291, "comment_id": 52833116, "body": "Are you saying that you get a different result using <code>write</code> than <code>_write</code>? That sounds unlikely. In the library, the symbol for <code>write</code> is just an alias symbol for <code>_write</code>. There is literally no difference between them. The same is true for <code>fileno</code> and <code>_fileno</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 0, "creation_date": 1441821910, "post_id": 32485291, "comment_id": 52833567, "body": "@JamesMcNellis in that case, I must have caused OP to do something that got round some &quot;finger trouble&quot;."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 0, "creation_date": 1441823032, "post_id": 32485291, "comment_id": 52834121, "body": "@JamesMcNellis thank you for that. This is why askers should post MCVE. In my recent simple test of the code posted, everything works perfectly well. The <code>\\n</code> in the buffer is expanded, or not, depending on the presence of <code>_setmode(fd, O_BINARY);</code>."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1441834978, "post_id": 32485291, "comment_id": 52839831, "body": "This seemed odd to me as well, but I generally don&#39;t use WinAPI."}], "answers": [{"comments": [{"owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 0, "creation_date": 1441821135, "post_id": 32486079, "comment_id": 52833169, "body": "With the exception of the deprecation warning, there is no difference between calling <code>write</code> and calling <code>_write</code>.  In the library, the <code>write</code> symbol is just an alias for <code>_write</code>. The same is the case for <code>fileno</code> and <code>_fileno</code>."}, {"owner": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 0, "creation_date": 1441821260, "post_id": 32486079, "comment_id": 52833229, "body": "I expect that it didn&#39;t."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 326282, "user_id": 151292, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/AQNZx.jpg?s=128&g=1", "display_name": "James McNellis", "link": "https://stackoverflow.com/users/151292/james-mcnellis"}, "edited": false, "score": 0, "creation_date": 1441821381, "post_id": 32486079, "comment_id": 52833294, "body": "@JamesMcNellis why would OP say it did, when it didn&#39;t? I posted this as an answer in response to comments."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 1, "last_activity_date": 1441820594, "creation_date": 1441820594, "answer_id": 32486079, "question_id": 32485291, "link": "https://stackoverflow.com/questions/32485291/writing-to-file-from-stdout/32486079#32486079", "title": "Writing to file from stdout", "body": "<p>You are using <code>_setmode</code> a MS Visual C++ function replacing <code>setmode</code> which is deprecated. Yet you are using the deprecated <code>fileno</code> and <code>write</code>.</p>\n\n<p>Please use <code>_fileno</code> and <code>_write</code>.</p>\n"}], "owner": {"reputation": 2766, "user_id": 1199019, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f2b20868e20d94f2a73c0e0908c38570?s=128&d=identicon&r=PG", "display_name": "Aneesh Narayanan", "link": "https://stackoverflow.com/users/1199019/aneesh-narayanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 32486079, "answer_count": 1, "score": 1, "last_activity_date": 1441839107, "creation_date": 1441817601, "last_edit_date": 1441839107, "question_id": 32485291, "link": "https://stackoverflow.com/questions/32485291/writing-to-file-from-stdout", "title": "Writing to file from stdout", "body": "<p>I am creating an EXE, which is used with stdin and stdout streams.</p>\n\n<p>The output of my executable is writing some compressed data to the stdout stream.</p>\n\n<pre><code>  int fd = fileno(stdout);\n  _setmode(fd, O_BINARY);\n  n = write(fd, buffer, nbytes);\n</code></pre>\n\n<p>But when I am re-directing to those data which are written to stdout stream, to a file,(using <b> my_exe get_data > File.txt </b>), the data length in the file will be mismatching with original data.If I have a 100 character data, then in the file, I am seeing 106 chars data. I think some newline or carriage return is getting added to the file. I have set the stdout to binary stream. but while re-directing to file,  the same is happening. Is there any way to solve the issue.</p>\n"}, {"tags": ["c", "matlab", "mex", "sliding-window"], "comments": [{"owner": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1441816755, "post_id": 32484956, "comment_id": 52830960, "body": "I generally have Matlab chrash with mex files when I was doing wrong memory stuff. Check that you create <code>imagePad</code> properly."}, {"owner": {"reputation": 450, "user_id": 3726703, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/IzEdC.png?s=128&g=1", "display_name": "BugsFree", "link": "https://stackoverflow.com/users/3726703/bugsfree"}, "reply_to_user": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1441817280, "post_id": 32484956, "comment_id": 52831256, "body": "Thank you for your advice. How can I check that the memory is allocated correctly? I checked that the dimensions are correct and both <code>dim</code> and <code>dimPad</code> have the expected values. I don&#39;t use <code>imagePad</code> before calling the function, thus I don&#39;t understand how I can do something wrong with the memory."}, {"owner": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1441817569, "post_id": 32484956, "comment_id": 52831424, "body": "If <code>imagePad</code> is not big enough to store the padded array, then you have memory access error!"}, {"owner": {"reputation": 450, "user_id": 3726703, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/IzEdC.png?s=128&g=1", "display_name": "BugsFree", "link": "https://stackoverflow.com/users/3726703/bugsfree"}, "reply_to_user": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1441817922, "post_id": 32484956, "comment_id": 52831592, "body": "I checked and <code>ndim = 3</code> and is okay and <code>dimPad = [42 42 42]</code> also this is okay because the original image is <code>32x32x32</code> and the padding array is <code>5x5x5</code>."}, {"owner": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1441818023, "post_id": 32484956, "comment_id": 52831655, "body": "I dont know. Check datatypes of inputs and outputs. I have no idea what it could be else."}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 1, "creation_date": 1441818788, "post_id": 32484956, "comment_id": 52832036, "body": "I think there&#39;s something iffy with your <code>padding</code> string.  Try using <code>mxCreateString</code> instead of casting <code>padding</code> to a pointer to <code>mxArray</code> for the third argument of <code>inputPadFun</code>.  You also don&#39;t need to cast <code>pad</code>.  That&#39;s already a <code>mxArray</code> pointer, so just do <code>prhs[1]</code> or <code>I_PADSIZE</code>."}], "answers": [{"comments": [{"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 1, "creation_date": 1441829774, "post_id": 32487974, "comment_id": 52837378, "body": "Beautiful :D. So what I suspected about the casting is indeed correct."}, {"owner": {"reputation": 450, "user_id": 3726703, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/IzEdC.png?s=128&g=1", "display_name": "BugsFree", "link": "https://stackoverflow.com/users/3726703/bugsfree"}, "edited": false, "score": 0, "creation_date": 1441833463, "post_id": 32487974, "comment_id": 52839240, "body": "Thank you very much. Tomorrow I&#39;ll try your solution but surely it&#39;ll work and I&#39;ll accept it. Let me check if I understood correctly: if I have primitive types, I can&#39;t cast them to <code>mxArray *</code> to create an <code>mxArray *</code> but I need to use the specific function of matlab?"}, {"owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "reply_to_user": {"reputation": 450, "user_id": 3726703, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/IzEdC.png?s=128&g=1", "display_name": "BugsFree", "link": "https://stackoverflow.com/users/3726703/bugsfree"}, "edited": false, "score": 1, "creation_date": 1441834843, "post_id": 32487974, "comment_id": 52839774, "body": "@BugsFree Right.  You generally can&#39;t cast (in a meaningful way) between pointers, except for <code>void*</code>.  For example, casting a <code>double</code> to a <code>single</code> is fine, but casting a <code>double*</code> to a <code>single*</code> is meaningless."}, {"owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "reply_to_user": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 1, "creation_date": 1441867964, "post_id": 32487974, "comment_id": 52849811, "body": "@rayryeng yes indeed.  There&#39;s a lot of funky casting going on here.  :)"}], "tags": [], "owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "is_accepted": true, "score": 3, "last_activity_date": 1441828681, "last_edit_date": 1495539883, "creation_date": 1441828027, "answer_id": 32487974, "question_id": 32484956, "link": "https://stackoverflow.com/questions/32484956/matlab-mexcallmatlab-causes-crash/32487974#32487974", "title": "MATLAB mexCallMatlab causes crash", "body": "<p>There are several problematic casts.</p>\n\n<p>Since <code>pad</code> is a <code>double*</code>, you are doing a nonsensical cast here:</p>\n\n<pre><code>(mxArray *)(pad)\n</code></pre>\n\n<p>Similarly for <code>padding</code> which is a <code>const char[]</code>, you can't do</p>\n\n<pre><code>(mxArray *)(padding)\n</code></pre>\n\n<p>In the following line, <code>mxGetData</code> returns a <code>void*</code> to the buffer with underlying data of a <strong>primitive type</strong> (<code>double</code>, <code>single</code>, etc.), but you are casting it to an <code>mxArray*</code>:</p>\n\n<pre><code>(mxArray *) mxGetData(prhs[0]);\n</code></pre>\n\n<p>Remember that <code>mxArray</code> is opaque object type defined by MathWorks and you must use their functions to create these objects.  Also you can only handle pointers to them.</p>\n\n<p>There are other problems...</p>\n\n<hr>\n\n<p><strong>Code</strong></p>\n\n<p>Here's a C++ example of how you might change your code:</p>\n\n<pre><code>// padarray_BugsFree.cpp\n#include &lt;iostream&gt;\n#include \"mex.h\"\n#include \"matrix.h\"       \n\nvoid mexFunction(int nlhs,mxArray *plhs[], int nrhs, const mxArray *prhs[]) {\n  if(nrhs != 2)\n    mexErrMsgTxt(\"Wrong number of input arguments:\\n\\t\"\n            \"Iout = padarray_BugsFree(I,pad)\");\n  if(nlhs &gt; 1)\n    mexErrMsgTxt(\"Too many output arguments:\\n\\t\"\n            \"Iout = padarray_BugsFree(I,pad)\");\n\n  if(!(mxIsDouble(prhs[0]) &amp;&amp; mxIsDouble(prhs[1])))\n      mexErrMsgTxt(\"Inputs must be double\");\n\n  mwSize ndim = mxGetNumberOfDimensions(prhs[0]);\n  const mwSize *dim = mxGetDimensions(prhs[0]);\n\n  if (ndim != mxGetNumberOfElements(prhs[1]))\n      mexErrMsgTxt(\"pad must be equal to ndims(I)\");\n\n  const double *pad = mxGetPr(prhs[1]);\n  mwSize *dimPad = (mwSize *) mxCalloc(ndim, sizeof(mwSize));\n  for (int i=0; i&lt;ndim; ++i) {\n      dimPad[i] = dim[i] + 2*pad[i];\n  }\n\n  mxArray *imagePad = mxCreateNumericArray(ndim, dimPad, mxDOUBLE_CLASS, mxREAL);\n  mxFree(dimPad);\n\n  // Padding input matrix\n  mxArray *padding = mxCreateString(\"symmetric\");\n  mxArray *inputPadFun[3];\n  inputPadFun[0] = const_cast&lt;mxArray*&gt;(prhs[0]);\n  inputPadFun[1] = const_cast&lt;mxArray*&gt;(prhs[1]);\n  inputPadFun[2] = padding;\n  mexCallMATLAB(1, &amp;imagePad, 3, inputPadFun, \"padarray\");\n  mxDestroyArray(padding);\n\n  // do something with the padded image and generate output\n  plhs[0] = mxDuplicateArray(imagePad); // in place of useful operations\n  mxDestroyArray(imagePad);\n}\n</code></pre>\n\n<p><strong>Demo</strong></p>\n\n<pre><code>&gt;&gt; I = magic(3)\nI =\n     8     1     6\n     3     5     7\n     4     9     2\n&gt;&gt; pad = [2 2]\npad =\n     2     2\n&gt;&gt; padarray_BugsFree\nError using padarray_BugsFree\nWrong number of input arguments:\n    Iout = padarray_BugsFree(I,pad) \n&gt;&gt; Iout = padarray_BugsFree(I,pad)\nIout =\n     5     3     3     5     7     7     5\n     1     8     8     1     6     6     1\n     1     8     8     1     6     6     1\n     5     3     3     5     7     7     5\n     9     4     4     9     2     2     9\n     9     4     4     9     2     2     9\n     5     3     3     5     7     7     5\n</code></pre>\n\n<p><strong>Notes</strong></p>\n\n<p>Use the following posts as reference for how to use <code>mexCallMATLAB</code>:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/26620639/2778484\">https://stackoverflow.com/a/26620639/2778484</a></li>\n<li><a href=\"https://stackoverflow.com/a/32061007/2778484\">https://stackoverflow.com/a/32061007/2778484</a></li>\n</ul>\n\n<p>You could also build the RHS input array as follows:</p>\n\n<pre><code>mxArray *inputPadFun[] = {const_cast&lt;mxArray*&gt;(prhs[0]),\n                          const_cast&lt;mxArray*&gt;(prhs[1]), padding};\nmexCallMATLAB(1, &amp;imagePad, 3, inputPadFun, \"padarray\");\n</code></pre>\n"}], "owner": {"reputation": 450, "user_id": 3726703, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/IzEdC.png?s=128&g=1", "display_name": "BugsFree", "link": "https://stackoverflow.com/users/3726703/bugsfree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 32487974, "answer_count": 1, "score": 1, "last_activity_date": 1441828681, "creation_date": 1441816477, "question_id": 32484956, "link": "https://stackoverflow.com/questions/32484956/matlab-mexcallmatlab-causes-crash", "title": "MATLAB mexCallMatlab causes crash", "body": "<p>I'm trying to develop a function in mex. The aim of the function should be sliding a window onto a 3D image and apply some function inside the window. Currently I'm stuck because when the algorithm reaches the call at the <code>padarray</code> function, MATLAB crashes.</p>\n\n<p>So far I wrote these lines of code</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"mex.h\"\n#include \"matrix.h\"       \n\nusing namespace std;\n\nvoid mexFunction(int nlhs,mxArray *plhs[], int nrhs, const mxArray *prhs[]) {\n    #define O_IMAGE       plhs[0]\n    #define I_IMAGE       prhs[0]\n    #define I_PADSIZE     prhs[1]\n    #define I_FUN         prhs[2]\n    #define I_OPTION      prhs[3]\n\n  // Argument Checking:\n  if(nrhs &lt; 1 || nrhs &gt; 4) /* Check the number of arguments */\n    mexErrMsgTxt(\"Wrong number of input arguments.\");\n  else if(nlhs &gt; 1)\n    mexErrMsgTxt(\"Too many output arguments.\");\n\n  // Variable declarations\n  static const char padding[] = \"symmetric\";\n  const char *windowShape;\n  const mwSize *dim;\n  mwSize *dimPad;\n  mwSize ndim;\n  double *pad, *windowSize, *thetaStep, *phiStep;\n  mxArray *inputFun[4], *inputPadFun[3], *input_image, *imagePad, *output_image;\n\n  /*Get dimensions of input image*/\n  ndim = mxGetNumberOfDimensions(I_IMAGE);\n  dim = mxGetDimensions(I_IMAGE);\n\n  /* Create dimensions of padded image*/\n  dimPad = (mwSize *) mxCalloc(ndim, sizeof(mwSize));\n  dimPad = (mwSize *) memcpy((void *) dimPad,(void *) dim, ndim*sizeof(mwSize));\n  pad = mxGetPr(I_PADSIZE);\n  for (int i=0;i&lt;ndim;++i)\n  {\n      dimPad[i] += 2*pad[i];\n  }\n\n  /*Get pointer to the input image*/\n  input_image = (mxArray *) mxGetData(I_IMAGE);\n\n  /* Create output image*/\n  O_IMAGE = mxCreateNumericArray(ndim, dim, mxDOUBLE_CLASS, mxREAL);\n  output_image = (mxArray *) mxGetData(O_IMAGE);\n\n  /* Create padded image*/\n  imagePad = mxCreateNumericArray(ndim, dimPad, mxDOUBLE_CLASS, mxREAL);\n\n  // Padding input matrix\n  inputPadFun[0] = input_image;\n  inputPadFun[1] = (mxArray *)(pad);\n  inputPadFun[2] = (mxArray *)(padding);\n  mexCallMATLAB(1, &amp;imagePad, 3, inputPadFun, \"padarray\");\n\n  // Clean UP\n  mxFree(dimPad);\n  mxDestroyArray(imagePad);\n}\n</code></pre>\n\n<p>I checked the dimensions of the images in input and in output at <code>mexCallMATLAB</code> and they appear to be correct. I don't really understand what I'm doing wrong. Any help is greatly appreciated! </p>\n"}, {"tags": ["c", "struct", "bit-manipulation", "bit-fields"], "comments": [{"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1441816849, "post_id": 32484944, "comment_id": 52831017, "body": "<code>00100001, with the MSB in the first place and the LSB in the last place</code> i can&#39;t understand this sentence since your <code>first</code> and <code>last</code> is very ambiguous. could you explain your expectation more in details? btw, pay attention to you printing order, you print <code>a</code> first, which yields the first <code>1</code>. maybe you misunderstood."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1441816965, "post_id": 32484944, "comment_id": 52831081, "body": "btw, since your example is using <code>char</code> and 8 bit long bit field composition, it indeed has nothing to do with endian. in the struct, <code>a</code> represents the lowest bit, which is correct. again, probably you are having a misunderstanding to the printing."}, {"owner": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1441817465, "post_id": 32484944, "comment_id": 52831365, "body": "Well, with <code>first</code> and <code>last</code> I was referring to the bits shown in the output in a left-to-right reading order. I am well aware that e.g. <code>b-&gt;a</code> is printed first and outputs <code>1</code>. This was the very core of my question (and has already been anwered by @andrew-henle )."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "edited": false, "score": 0, "creation_date": 1441817558, "post_id": 32485099, "comment_id": 52831420, "body": "Thanks, perfect answer!"}, {"owner": {"reputation": 371, "user_id": 5030000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2dfb1d019283d360b169b9df998cbf5?s=128&d=identicon&r=PG&f=1", "display_name": "TeasingDart", "link": "https://stackoverflow.com/users/5030000/teasingdart"}, "edited": false, "score": 0, "creation_date": 1441818282, "post_id": 32485099, "comment_id": 52831786, "body": "While the order of bit-fields is not defined by the C standard, it is not random. The compiler will assign bits in a well-defined manner <i>for that compiler and architecture</i>. However, for best cross-platform compatibility it might be best to avoid bit fields altogether and use &quot;shift and mask&quot; macros instead."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": true, "score": 5, "last_activity_date": 1441816968, "creation_date": 1441816968, "answer_id": 32485099, "question_id": 32484944, "link": "https://stackoverflow.com/questions/32484944/bit-order-from-low-to-high-mapping-structs-with-bitfields-in-c/32485099#32485099", "title": "Bit order from low to high / Mapping structs with bitfields in C", "body": "<p>Per 6.7.2.1 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"noreferrer\">C standard</a>:</p>\n\n<blockquote>\n  <p>The order of allocation of bit-fields within a unit (high-order to\n  low-order or low-order to high-order) is implementation-defined.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "edited": false, "score": 0, "creation_date": 1441818118, "post_id": 32485196, "comment_id": 52831706, "body": "Thanks! Indeed, I did not find that post before I asked this question!"}], "tags": [], "owner": {"reputation": 3128, "user_id": 2899520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9d046c85ed155fb3e964d9dd4c43842a?s=128&d=identicon&r=PG&f=1", "display_name": "LearningC", "link": "https://stackoverflow.com/users/2899520/learningc"}, "is_accepted": false, "score": 0, "last_activity_date": 1441817270, "last_edit_date": 1495540688, "creation_date": 1441817270, "answer_id": 32485196, "question_id": 32484944, "link": "https://stackoverflow.com/questions/32484944/bit-order-from-low-to-high-mapping-structs-with-bitfields-in-c/32485196#32485196", "title": "Bit order from low to high / Mapping structs with bitfields in C", "body": "<p>The memory layout of bit fields is not defined so its compiler dependent. You can go through<a href=\"https://stackoverflow.com/questions/15136426/memory-layout-of-struct-having-bitfields\">enter link description here</a></p>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 5030000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2dfb1d019283d360b169b9df998cbf5?s=128&d=identicon&r=PG&f=1", "display_name": "TeasingDart", "link": "https://stackoverflow.com/users/5030000/teasingdart"}, "is_accepted": false, "score": 1, "last_activity_date": 1441817866, "creation_date": 1441817866, "answer_id": 32485372, "question_id": 32484944, "link": "https://stackoverflow.com/questions/32484944/bit-order-from-low-to-high-mapping-structs-with-bitfields-in-c/32485372#32485372", "title": "Bit order from low to high / Mapping structs with bitfields in C", "body": "<p>I believe your confusion is in the way you presented the result. You expected it to be printed with the LSB on the right like a normal number, but your code prints a string of bits starting with the LSB on the left and printing to the right.</p>\n\n<p>Your result shows bit <code>a</code> in the lowest (first, least significant) memory bit as expected.</p>\n"}], "owner": {"reputation": 85, "user_id": 2375789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a921be89e80d86af11fed29281c56106?s=128&d=identicon&r=PG", "display_name": "lima.sierra", "link": "https://stackoverflow.com/users/2375789/lima-sierra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 32485099, "answer_count": 3, "score": 1, "last_activity_date": 1441817866, "creation_date": 1441816417, "question_id": 32484944, "link": "https://stackoverflow.com/questions/32484944/bit-order-from-low-to-high-mapping-structs-with-bitfields-in-c", "title": "Bit order from low to high / Mapping structs with bitfields in C", "body": "<p>I was recently playing around with bit fields in C, and apparently, the bits are ordered from low to high, although Google does not support this thesis (e.g. <a href=\"https://en.wikipedia.org/wiki/Bit_numbering\" rel=\"nofollow\">Wikipedia</a>.)</p>\n\n<p>Take the following code (<a href=\"http://ideone.com/UwWfJM\" rel=\"nofollow\">http://ideone.com/UwWfJM</a>):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct bits {\n    unsigned char a : 1;\n    unsigned char b : 1;\n    unsigned char c : 1;\n    unsigned char d : 1;\n    unsigned char e : 1;\n    unsigned char f : 1;\n    unsigned char g : 1;\n    unsigned char h : 1;\n};\n\nint main(int argc, char **argv)\n{\n    unsigned char c = 33;\n    struct bits *b = (struct bits *) &amp;c;\n\n    printf(\"dec: %u\\n\", c);\n    printf(\"bits: %x\", b-&gt;a);\n    printf(\"%x\", b-&gt;b);\n    printf(\"%x\", b-&gt;c);\n    printf(\"%x\", b-&gt;d);\n    printf(\"%x\", b-&gt;e);\n    printf(\"%x\", b-&gt;f);\n    printf(\"%x\", b-&gt;g);\n    printf(\"%x\\n\", b-&gt;h);\n\n    return 0;\n}\n</code></pre>\n\n<p>The output is</p>\n\n<pre><code>dec: 33\nbits: 10000100\n</code></pre>\n\n<p>...although I had expected the bit ordering to be the other way around (i.e. <code>00100001</code>, with the MSB in the first place and the LSB in the last place).</p>\n\n<p>Can somebody explain this behaviour?<br>\nFurthermore, can I assume that the mapping will always be in this direction?</p>\n\n<p><em>Note:</em> I am <em>not</em> asking about endianness, which is about the <em>byte</em> order. The background of my question is that I tried to map a buffer to a struct. The buffer contained a UDP message, consisting of a \"bit mapping\" (i.e. \"bit at position <em>x</em> means this, bits at position <em>y</em> to <em>z</em> mean that, and so on).</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c", "gcc", "clang"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1441816572, "post_id": 32484819, "comment_id": 52830873, "body": "If gcc had a way I suspect you would find it in the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Standards.html#Standards\" rel=\"nofollow noreferrer\">Language Standards Supported by GCC</a> document."}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1441816598, "post_id": 32484819, "comment_id": 52830891, "body": "@KyleStrand I didn&#39;t mean to sound judgemental, but I simply can&#39;t really conceive of any situation in which this is necessary or even meaningful. Hence I doubt it is possible at all."}], "answers": [{"comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1441819185, "post_id": 32485029, "comment_id": 52832236, "body": "Interesting--I didn&#39;t realize that <code>make</code> would auto-define targets like this (i.e., I thought this would require explicitly specifying <code>foo</code> asa target)."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1441820024, "post_id": 32485029, "comment_id": 52832655, "body": "This doesn&#39;t really address the issue of updating the standard-version as it changes, though."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 1, "creation_date": 1441820274, "post_id": 32485029, "comment_id": 52832763, "body": "@kyle: that is true. When you upgrade your compiler, you need to upgrade the makefile. (I just use one makefile and a bunch of symlinks, to simplify upgrades.)"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 1, "last_activity_date": 1441817190, "last_edit_date": 1441817190, "creation_date": 1441816724, "answer_id": 32485029, "question_id": 32484819, "link": "https://stackoverflow.com/questions/32484819/are-there-any-moving-target-alias-values-for-gcc-or-clang-std-implying-u/32485029#32485029", "title": "Are there any &quot;moving target&quot; alias-values for GCC or Clang `-std=`, implying &quot;use the latest standard&quot;?", "body": "<p>There is no such option in any of the compilers you mention.</p>\n\n<p>However, it is easy enough to create a simple Makefile for a sandbox which includes appropriate settings. I use something like this:</p>\n\n<pre><code>CFLAGS = -Wall -std=c11 -D_XOPEN_SOURCE_=700\nCXXFLAGS = -Wall -std=c++14 -D_XOPEN_SOURCE_=700\n</code></pre>\n\n<p>The default build rules accomplish the rest of my needs, so there is no need to fill in the makefile with the names and dependencies of all the source files, providing that I'm always sandboxing a single-file executable.</p>\n\n<p>With that, I can just type <code>make foo</code> to compile either <code>foo.c</code> or <code>foo.cc</code>. (Or <code>make foo.o</code> if I don't want a link.) The feature test macro setting saves me having to remember to do that in my source files as well.</p>\n\n<p>And to compile with the non-default compiler: <code>make foo CXX=clang++</code>. That's still less typing than <code>clang++ -Wall -o foo foo.cc</code></p>\n\n<p>(Actually the one I use is a bit more sophisticated than that. It includes a suffix rule for <code>.S</code> and some variables to simplify setting optimization and debugging options. But the principle is the same.)</p>\n"}, {"comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 2, "creation_date": 1441821946, "post_id": 32486392, "comment_id": 52833587, "body": "It is indeed a &quot;moving target&quot;, but it&#39;s pretty far from what I want, I think; it appears that even in GCC 5.1, the default C++ dialect is <code>gnu++98</code>, which is...well, ancient <i>and</i> nonstandard."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1441872881, "post_id": 32486392, "comment_id": 52852829, "body": "@KyleStrand: I agree, it&#39;s also the only automatic moving target that I know of unfortunately (the situation is better for Clang than for gcc)."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1441890206, "post_id": 32486392, "comment_id": 52864526, "body": "@KyleStrand Interestingly it is for C code but not for C++. Currently default standard for C is <code>-std=gnu11</code> but for C++ it&#39;s <code>-std=gnu++98</code>"}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1441890562, "post_id": 32486392, "comment_id": 52864812, "body": "@user3528438: It might be because C++11 introduced reused a keyword (<code>auto</code>) and introduced several others (<code>decltype</code>, <code>nullptr</code>) so the chances of conflict were greater..."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1442343604, "post_id": 32486392, "comment_id": 53040872, "body": "I&#39;m not so sure the situation is better for Clang, which <i>also</i> uses the C++98 standard by default--albeit <a href=\"http://clang.llvm.org/cxx_status.html\" rel=\"nofollow noreferrer\">&quot;with many C++11 features accepted as extensions&quot;</a>. I&#39;m not entirely sure what that even means, honestly."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 2, "creation_date": 1456247656, "post_id": 32486392, "comment_id": 58854450, "body": "Looks like GCC 6 will use GNU-14 by default. That&#39;s an improvement! I guess!"}], "tags": [], "owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1441821773, "creation_date": 1441821773, "answer_id": 32486392, "question_id": 32484819, "link": "https://stackoverflow.com/questions/32484819/are-there-any-moving-target-alias-values-for-gcc-or-clang-std-implying-u/32486392#32486392", "title": "Are there any &quot;moving target&quot; alias-values for GCC or Clang `-std=`, implying &quot;use the latest standard&quot;?", "body": "<p>The most simple solution is to do nothing, or more specifically to avoid using <code>-std=</code>.</p>\n\n<p>The compilers themselves raise their default mode as releases pass, in general once their developer are confident with their implementation of the Standard version. This is close to your criteria:</p>\n\n<blockquote>\n  <p>The latest standard fully implemented by the compiler (e.g. C++11 for GCC 4.9, C++14 for GCC 5+)</p>\n</blockquote>\n\n<p>Although it also adds maturity.</p>\n"}], "owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 32485029, "answer_count": 2, "score": 1, "last_activity_date": 1441821773, "creation_date": 1441816004, "last_edit_date": 1441819017, "question_id": 32484819, "link": "https://stackoverflow.com/questions/32484819/are-there-any-moving-target-alias-values-for-gcc-or-clang-std-implying-u", "title": "Are there any &quot;moving target&quot; alias-values for GCC or Clang `-std=`, implying &quot;use the latest standard&quot;?", "body": "<p>I'd like to create shell aliases that will always use the \"latest\" version of the C/C++ standards supported by <code>gcc</code>/<code>g++</code>/<code>clang</code>/<code>clang++</code> (one alias for C, one alias for C++). I realize that this could have multiple interpretations:</p>\n\n<ul>\n<li>The latest GNU-extended standard</li>\n<li>The latest released standard (e.g. C++14)</li>\n<li>The latest unreleased standard (e.g. C++1z)</li>\n<li>The latest standard fully implemented by the compiler (e.g. C++11 for GCC 4.9, C++14 for GCC 5+)</li>\n<li>... possibly other options I haven't thought of</li>\n</ul>\n\n<p>....but for the purpose of these shell aliases, I don't care that much <em>which</em> \"moving\" value is used as long as I know which of the above rules is used to determine which standard-mode is used.</p>\n\n<p>Does either compiler include an argument-alias that tracks a moving \"latest standard\"? I don't see any mention of alias-options in the GCC docs (though my google-fu may simply be failing me); meanwhile, the Clang user manual mentions that \"The supported modes for C are [explicit std modes...] and various aliases for those modes\", but I don't see where the aliases themselves are documented.</p>\n"}, {"tags": ["c", "glibc"], "answers": [{"tags": [], "owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "is_accepted": true, "score": 2, "last_activity_date": 1441819359, "creation_date": 1441819359, "answer_id": 32485766, "question_id": 32484454, "link": "https://stackoverflow.com/questions/32484454/passing-gchar-by-reference-to-the-external-function-so-as-to-free-in-main-fun/32485766#32485766", "title": "passing gchar ** by reference to the external function so as to free in main function", "body": "<pre><code>int split_message_syslog_forwarder(char **msg_full,gchar **splitted_strings)\n</code></pre>\n\n<p>must be changed to </p>\n\n<pre><code>int split_message_syslog_forwarder(char **msg_full,gchar ***splitted_strings)\n</code></pre>\n\n<p>Compiler warns about this with <code>-Wall</code>:</p>\n\n<pre><code>xyz.c:5:5: note: expected 'gchar ** {aka char **}' but argument is of type 'gchar *** {aka char ***}'\n int split_message_syslog_forwarder(char **msg_full,gchar **splitted_strings)\n</code></pre>\n"}], "owner": {"reputation": 1063, "user_id": 1692695, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/af5651f50e6a56272619b0b4cf5e027c?s=128&d=identicon&r=PG", "display_name": "Laxmi Kadariya", "link": "https://stackoverflow.com/users/1692695/laxmi-kadariya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 32485766, "answer_count": 1, "score": 0, "last_activity_date": 1441819359, "creation_date": 1441814905, "last_edit_date": 1441816049, "question_id": 32484454, "link": "https://stackoverflow.com/questions/32484454/passing-gchar-by-reference-to-the-external-function-so-as-to-free-in-main-fun", "title": "passing gchar ** by reference to the external function so as to free in main function", "body": "<p>I am using <code>g_strsplit</code> to split the msg with <code>\\n</code> delimiter and created a function to break the string. The function breaks the msg and return to calling function thus I am not able to free the splitted string pointer in the called function. Thus tried to pass by reference the <code>gchar</code>. However I am getting segmentation fault.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;glib.h&gt;\n\nint split_message_syslog_forwarder(char **msg_full,gchar **splitted_strings)\n{\n    int msg_length = -1;\n    *splitted_strings = g_strsplit(*msg_full, \"\\n\", 2);\n    if (*splitted_strings != NULL)\n    {\n        sscanf(*splitted_strings[0], \"%d\", &amp;msg_length);\n        if(msg_length&lt;0)\n        {\n            *msg_full =  *splitted_strings[1];\n        }\n    }  \n    return msg_length;\n}\n\nint main()\n{\n    int msg_length = -1;\n    char *msg_full = \"12\\nwhat is this\";\n    gchar **splitted_strings;\n    int ret = split_message_syslog_forwarder(&amp;msg_full,&amp;splitted_strings);\n    printf(\"spilitted msg = %d\",ret);\n    printf(\"spilitted msg 2= %s\",msg_full);\n    return 0;\n}\n</code></pre>\n\n<p>How can I pass the reference of <code>gchar **splitted_string</code> in glib?</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1441814030, "post_id": 32483960, "comment_id": 52829177, "body": "Use <code>strace</code> to find out."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1441814051, "post_id": 32483960, "comment_id": 52829195, "body": "The code you show doesn&#39;t suffice. Show us some more, if possible the whole server and client code."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1441814713, "post_id": 32483960, "comment_id": 52829668, "body": "How are the buffers defined? How do you print what had been received?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1441814802, "post_id": 32483960, "comment_id": 52829730, "body": "Also: You are aware that <code>read()</code>, if called on a socket, might very well read less than it was told too?"}, {"owner": {"reputation": 775, "user_id": 4650806, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/797558543615184/picture?type=large", "display_name": "BEPP", "link": "https://stackoverflow.com/users/4650806/bepp"}, "edited": false, "score": 0, "creation_date": 1441814946, "post_id": 32483960, "comment_id": 52829844, "body": "<b>&quot;client connects to the server at faster rate then the server writes to the socket at same rate.But the client is not able to read the data written on the socket and remains stuck up on the read().&quot;</b> are you sure  connect and write don&#39;t have any delay from server side? you given any delay to invoke the client program in your script ?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1441814956, "post_id": 32483960, "comment_id": 52829853, "body": "Does the client handle errors issued when calling <code>connect()</code>?"}, {"owner": {"reputation": 610, "user_id": 1273923, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1b228f50ab7d6a792f1ba24ebd11be33?s=128&d=identicon&r=PG", "display_name": "RKum", "link": "https://stackoverflow.com/users/1273923/rkum"}, "edited": false, "score": 0, "creation_date": 1441822455, "post_id": 32483960, "comment_id": 52833828, "body": "adding the source code for more clarity. Naveen I have not added any delay in script."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1441822866, "post_id": 32483960, "comment_id": 52834017, "body": "What does your error function do ? Just print an error message, or force an exit ?"}, {"owner": {"reputation": 610, "user_id": 1273923, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1b228f50ab7d6a792f1ba24ebd11be33?s=128&d=identicon&r=PG", "display_name": "RKum", "link": "https://stackoverflow.com/users/1273923/rkum"}, "edited": false, "score": 0, "creation_date": 1441823447, "post_id": 32483960, "comment_id": 52834340, "body": "It does both.    perror(msg);     exit(0);  But I have not encountered any error."}], "owner": {"reputation": 610, "user_id": 1273923, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1b228f50ab7d6a792f1ba24ebd11be33?s=128&d=identicon&r=PG", "display_name": "RKum", "link": "https://stackoverflow.com/users/1273923/rkum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 609, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1441822357, "creation_date": 1441813414, "last_edit_date": 1441822357, "question_id": 32483960, "link": "https://stackoverflow.com/questions/32483960/c-linux-sockets-server-client-synchronization-issue", "title": "C Linux Sockets( Server Client Synchronization issue )", "body": "<p>I have written a sample socket program in C on Linux.\nThe server is single process server.\nThe program is simple where the server is running and the client connects to the server waiting on accept() call.\nWhen the server accepts the client request it sends some string to the client using write call.</p>\n\n<p>Server Code:</p>\n\n<pre><code>#define MAXHOSTNAME 256\n#define MAX_CONN 10\n\nvoid single_process_server(unsigned int portNumber)\n{\n    int listenSockFd, acceptSockFd, portNo;\n    socklen_t clilen;\n    char buffer[256] = \"Connected\";\n    struct sockaddr_in srvInfo;\n    int n;\n\n    char sysHost[MAXHOSTNAME+1];  // Hostname of this computer we are running on\n\n    if((listenSockFd = socket(AF_INET, SOCK_STREAM, 0)) &lt; 0)\n    {\n        close(listenSockFd);\n        error(\"ERROR opening socket\");\n    }\n\n    bzero((char *) &amp;srvInfo, sizeof(srvInfo));\n    portNo = portNumber;\n    srvInfo.sin_family = AF_INET;\n\n    srvInfo.sin_addr.s_addr = htonl(INADDR_ANY);\n    srvInfo.sin_port = htons(portNo);\n\n    if (bind(listenSockFd, (struct sockaddr *) &amp;srvInfo, sizeof(srvInfo)) &lt; 0)\n    {\n        close(listenSockFd);\n        error(\"ERROR on binding\");\n    }\n\n    listen(listenSockFd,5);\n\n    while(1)\n    {\n        clilen = sizeof(srvInfo);\n        if((acceptSockFd = accept(listenSockFd, (struct sockaddr *) &amp;srvInfo, &amp;clilen)) &lt; 0)\n        {\n            error(\"ERROR on accept\");\n        }\n\n        if((n = write(acceptSockFd,buffer,255)) &lt; 0)\n        {\n            error(\"ERROR writing to socket\");\n        }\n        close(acceptSockFd);\n    }\n\n    close(listenSockFd);\n}\n\n\nint main(int argc, char* argv[])\n{\n    unsigned int portNo= 0;\n\n    portNo = 444;\n    single_process_server(portNo);\n\n    return(0);\n}\n</code></pre>\n\n<p>The client receives the string using read call.</p>\n\n<p>Client Code:</p>\n\n<pre><code>void simple_internet_client(char hostip[], unsigned int portNo)\n{\n    int sockFd, portno, n;\n    struct sockaddr_in srvInfo;\n    struct hostent *server;\n\n    char buffer[256];\n\n    portno = portNo;\n\n    if((sockFd = socket(AF_INET, SOCK_STREAM, 0)) &lt; 0)\n    {\n        error(\"ERROR opening socket\");\n    }\n\n    if((server = gethostbyname(hostip)) == NULL)\n    {\n        fprintf(stderr,\"ERROR, no such host\\n\");\n        exit(0);\n    }\n\n    bzero((char *) &amp;srvInfo, sizeof(srvInfo));\n    srvInfo.sin_family = AF_INET;\n    bcopy((char *)server-&gt;h_addr, (char *)&amp;srvInfo.sin_addr.s_addr, server-&gt;h_length);\n    srvInfo.sin_port = htons(portno);\n\n    if(connect(sockFd,(struct sockaddr *) &amp;srvInfo,sizeof(srvInfo)) &lt; 0)\n        error(\"ERROR connecting\");\n\n    {\n    bzero(buffer,256);\n    if((n = read(sockFd,buffer,255)) &lt; 0)\n        error(\"ERROR reading from socket\");\n\n    printf(\"Socket read = %s\\n\", buffer);\n    }\n\n    close(sockFd);\n}\n\nmain(int argc, char* argv[])\n{\n    char hostip[50] = {0};\n    unsigned int portNo= 444;\n\n    printf(\"B. Provide the host name  or IP:\\n\");\n    scanf(\"%s\",&amp;hostip);\n\n    simple_internet_client(hostip, portNo);\n\n    return(0);\n}\n</code></pre>\n\n<p>When I run the client(./clientdemo) at some intervals then the client receives whatever string the server sends.</p>\n\n<p>But when I run the client multiple times through some script then the client remains stuck up at read() call and does not receive what the server has sent.</p>\n\n<p>Simply speaking when the client connects to the server at faster rate then the server writes to the socket at same rate.But the client is not able to read the data written on the socket and remains stuck up on the read() call.</p>\n\n<p>What may be the cause of this and why client is not able to read data from socket at same rate as server writes to it?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 3, "creation_date": 1441812844, "post_id": 32483746, "comment_id": 52828315, "body": "<code>fflush(stdin)</code> has undefined behaviour, doesn&#39;t it?"}, {"owner": {"reputation": 4827, "user_id": 2372604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dba658108aa453906cfe0e229a8a18d?s=128&d=identicon&r=PG", "display_name": "ilent2", "link": "https://stackoverflow.com/users/2372604/ilent2"}, "edited": false, "score": 2, "creation_date": 1441812957, "post_id": 32483746, "comment_id": 52828395, "body": "Consider tagging this question with C instead of C++, as far as I can tell this is a C program not a C++ program?"}, {"owner": {"reputation": 3, "user_id": 5294073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e389b0e1141dad4ea84435cb173732e6?s=128&d=identicon&r=PG&f=1", "display_name": "P. Dave", "link": "https://stackoverflow.com/users/5294073/p-dave"}, "edited": false, "score": 0, "creation_date": 1441813098, "post_id": 32483746, "comment_id": 52828484, "body": "my bad, sorry...then fflush(stdin) should be an undefined behaviour ?"}, {"owner": {"reputation": 14973, "user_id": 348312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5afc074aa3078afdbd1cd7485ac726e?s=128&d=identicon&r=PG&f=1", "display_name": "jim mcnamara", "link": "https://stackoverflow.com/users/348312/jim-mcnamara"}, "edited": false, "score": 0, "creation_date": 1441813408, "post_id": 32483746, "comment_id": 52828702, "body": "Don&#39;t call read() and write() - use stdc library calls fgets(), printf().  The problem is that  you have clear the &quot;s&quot; variable - set all 50 bytes to 0x0.  The read &amp; write functions ignore the ascii 0 at the end of a C string and just plow on ahead all the way to 50 bytes of garbage."}, {"owner": {"reputation": 3, "user_id": 5294073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e389b0e1141dad4ea84435cb173732e6?s=128&d=identicon&r=PG&f=1", "display_name": "P. Dave", "link": "https://stackoverflow.com/users/5294073/p-dave"}, "edited": false, "score": 0, "creation_date": 1441813510, "post_id": 32483746, "comment_id": 52828784, "body": "This should solve my problem?"}, {"owner": {"reputation": 14973, "user_id": 348312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5afc074aa3078afdbd1cd7485ac726e?s=128&d=identicon&r=PG&f=1", "display_name": "jim mcnamara", "link": "https://stackoverflow.com/users/348312/jim-mcnamara"}, "edited": false, "score": 0, "creation_date": 1441813610, "post_id": 32483746, "comment_id": 52828857, "body": "Yeah - either memset the s variable to all 0x0, inside the loop or use stdc calls.  stdc is a better choice for this"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1441814332, "post_id": 32483746, "comment_id": 52829403, "body": "Don&#39;t mix Unix-style IO with stdio for the same stream. Nothing good can possibly result."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1441814450, "post_id": 32483746, "comment_id": 52829497, "body": "Side note: <code>sizeof(char)</code> is always one"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1441815583, "post_id": 32483746, "comment_id": 52830294, "body": "Do not edit your question to remove it when you have an answer. What if someone in the future has a similar issue?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1441815795, "post_id": 32483746, "comment_id": 52830430, "body": "Odd why nothing happens when I pressed the &#39;rollback&#39; link on revision 5 of this post...."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1441814100, "creation_date": 1441814100, "answer_id": 32484199, "question_id": 32483746, "link": "https://stackoverflow.com/questions/32483746/clear-buffer-stdin/32484199#32484199", "title": "Clear buffer stdin", "body": "<p>Problems that I see:</p>\n\n<ol>\n<li><p>You are passing the wrong argument to <code>write</code>. Instead of </p>\n\n<pre><code>write(STDERR_FILENO, s, MAX_SIZE); \n</code></pre>\n\n<p>it should be</p>\n\n<pre><code>write(STDERR_FILENO, s, r); // Write the number of characters that were read\n                            // not MAX_SIZE\n</code></pre></li>\n<li><p>The strategy to skip till the end of the line is not well thought out. You have:</p>\n\n<pre><code>int r = read(STDIN_FILENO, s, MAX_SIZE);\nif(r==-1) printf(\"error\");\nelse{\n    write(STDERR_FILENO, s, MAX_SIZE);\n}\nwhile(getchar()!='\\n');\n</code></pre>\n\n<p>First of all, <code>read</code> will not stop reading when it encounters a newline. It will read up to <code>MAX_SIZE</code> characters. It will gobble up as many newlines as it can in the process. What you need to do is use <code>fgets()</code> instead.</p>\n\n<pre><code>char* cp = fgets(s, MAX_SIZE, stdin);\nif ( cp == NULL )\n{\n   // If fgets fails, you probably reached the end of the file.\n   break;\n}\n\nfprintf(stderr, \"%s\", s);\n</code></pre></li>\n<li><p>The line</p>\n\n<pre><code>while(strcmp(s,\"end\\n\")!=0);\n</code></pre>\n\n<p>will lead to undefined behavior if you use <code>read</code> to read the data from a file since <code>read</code> does not automatically add a terminating null character to <code>s</code>. Using <code>fgets</code> avoids that problem.</p></li>\n</ol>\n\n<p>Also, since you know the size of the array at compile time, you can use:</p>\n\n<pre><code>char s[MAX_SIZE];\n</code></pre>\n\n<p>instead of using <code>malloc</code> to allocate memory at run time.</p>\n"}, {"comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1441815708, "post_id": 32484521, "comment_id": 52830367, "body": "The c++ tag has been removed. Better remove your answer."}], "tags": [], "owner": {"reputation": 6841, "user_id": 1190965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3e74ed8e572542a718df5f15ead40581?s=128&d=identicon&r=PG", "display_name": "nodakai", "link": "https://stackoverflow.com/users/1190965/nodakai"}, "is_accepted": false, "score": 0, "last_activity_date": 1441815121, "creation_date": 1441815121, "answer_id": 32484521, "question_id": 32483746, "link": "https://stackoverflow.com/questions/32483746/clear-buffer-stdin/32484521#32484521", "title": "Clear buffer stdin", "body": "<p>FYI, an equivalent C++ program</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main() {\n    for (std::string line; std::getline(std::cin, line); ) {\n        if (line == \"end\")\n            break;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5294073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e389b0e1141dad4ea84435cb173732e6?s=128&d=identicon&r=PG&f=1", "display_name": "P. Dave", "link": "https://stackoverflow.com/users/5294073/p-dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 32484199, "answer_count": 2, "score": 0, "last_activity_date": 1441815591, "creation_date": 1441812804, "last_edit_date": 1441815591, "question_id": 32483746, "link": "https://stackoverflow.com/questions/32483746/clear-buffer-stdin", "title": "Clear buffer stdin", "body": "<p>Hello Stackoverflow community, I have a problem with this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\n#define MAX_SIZE 50\n\n\nint main()\n{\n    char *s = malloc(sizeof(char)*MAX_SIZE);\n    do{\n        int r = read(STDIN_FILENO, s, MAX_SIZE);\n        if(r==-1) printf(\"error\");\n        else{\n            write(STDERR_FILENO, s, MAX_SIZE);\n        }\n        while(getchar()!='\\n');\n    } while(strcmp(s,\"end\\n\")!=0);\n    free(s);\n    return 0;\n}\n</code></pre>\n\n<p>The problem is that it produces me a wrong output, stdin doesn't results \"clean\" at each iteration of the 'do while'. I know that on windows i must use <code>fflush(stdin)</code> but watching on internet i saw that this function is not portable for linux. i use linux, and always watching on internet i saw that many people say the solution is <code>while(getchar()!='\\n);</code> instead of <code>fflush(stdin)</code>, but the problem is not resolved... Can you explain me why?</p>\n"}, {"tags": ["c", "include", "header-files"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441813026, "post_id": 32483621, "comment_id": 52828440, "body": "What do you mean with &quot;function declaration file&quot;?"}, {"owner": {"reputation": 1234, "user_id": 4847264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b6735add4b9df1cc3bf77c455125332?s=128&d=identicon&r=PG", "display_name": "Adam Bak", "link": "https://stackoverflow.com/users/4847264/adam-bak"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441813202, "post_id": 32483621, "comment_id": 52828552, "body": "I was not sure if I was using the term correctly. I was referring to &quot;encrypt.c&quot; as the function declaration file."}, {"owner": {"reputation": 1234, "user_id": 4847264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b6735add4b9df1cc3bf77c455125332?s=128&d=identicon&r=PG", "display_name": "Adam Bak", "link": "https://stackoverflow.com/users/4847264/adam-bak"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441814248, "post_id": 32483621, "comment_id": 52829341, "body": "I agree, this was a little unclear, I went ahead and deleted the use of &quot;function declaration file&quot;."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1441820446, "post_id": 32483621, "comment_id": 52832843, "body": "This is called the <i>implementation file</i>. It <i>defines</i> the function <i>declared</i> in the <i>header file</i>."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 4, "last_activity_date": 1441813243, "creation_date": 1441813243, "answer_id": 32483890, "question_id": 32483621, "link": "https://stackoverflow.com/questions/32483621/c-header-directive-needed-in-function-declaration-file/32483890#32483890", "title": "C header directive needed in function declaration file?", "body": "<p>In your particular case, it is <em>not</em> necessary for <code>encrypt.c</code> to include <code>encrypt.h</code>, but it is conventional for it to do so.</p>\n\n<p>The normal purpose of header files is to provide a common location for declarations that can be shared among multiple source files.  This avoids inconsistent declarations in different parts of the program, and when changes need to be made, it may reduce the number of files that need to be updated.</p>\n\n<p><code>encrypt.c</code> does not need to include <code>encrypt.h</code> because the latter contains only a declaration of function <code>encrypt()</code>, and <code>encrypt.c</code> already has one in the form of a <em>definition</em> of that function.  It is nevertheless useful, because it allows the compiler to verify that the declaration in <code>encrypt.h</code> is consistent with the definition in <code>encrypt.c</code>.</p>\n\n<p>If <code>encrypt.c</code> defined more functions, and <code>encrypt.h</code> provided declarations for all of them, then it could also serve in <code>encrypt.c</code> to ensure that declarations of all functions therein were visible to all functions therein, thus overcoming any dependency on the relative order of the actual definitions.</p>\n"}, {"tags": [], "owner": {"reputation": 1786, "user_id": 422005, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/12c2e55edb5c5fa6905829dab6dca8fb?s=128&d=identicon&r=PG", "display_name": "user422005", "link": "https://stackoverflow.com/users/422005/user422005"}, "is_accepted": false, "score": 0, "last_activity_date": 1441830958, "creation_date": 1441830958, "answer_id": 32488712, "question_id": 32483621, "link": "https://stackoverflow.com/questions/32483621/c-header-directive-needed-in-function-declaration-file/32488712#32488712", "title": "C header directive needed in function declaration file?", "body": "<p>Side note:</p>\n\n<p>The moment you add a new source file <code>fancy_encrypt.c</code> which calls the <code>encrypt()</code> function you must have a <em>compile guard</em> in the <code>encrypt.h</code>file:</p>\n\n<pre><code>#ifndef ENCRYPT_H\n#define ENCRYPT.H\n\nvoid encrypt(char * message);\n\n#endif\n</code></pre>\n\n<p>Otherwise you will get a compiler error due to multiple declarations of <code>encrypt()</code>.</p>\n"}], "owner": {"reputation": 1234, "user_id": 4847264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b6735add4b9df1cc3bf77c455125332?s=128&d=identicon&r=PG", "display_name": "Adam Bak", "link": "https://stackoverflow.com/users/4847264/adam-bak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "accepted_answer_id": 32483890, "answer_count": 2, "score": 3, "last_activity_date": 1441830958, "creation_date": 1441812454, "last_edit_date": 1441814143, "question_id": 32483621, "link": "https://stackoverflow.com/questions/32483621/c-header-directive-needed-in-function-declaration-file", "title": "C header directive needed in function declaration file?", "body": "<p>I am in the process of exploring the C programming language and have started to learn about header files. </p>\n\n<p>I am working with three different files in my program. One header file and two source files:</p>\n\n<p><strong>encrypt.h</strong></p>\n\n<pre><code>void encrypt(char *message);\n</code></pre>\n\n<p><strong>encrypt.c</strong></p>\n\n<pre><code>#include \"encrypt.h\"\n\nvoid encrypt(char *message)\n{    \n    while(*message)\n    {\n        *message = *message ^ 31;\n        message++;\n    }   \n}\n</code></pre>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"encrypt.h\"\n\nint main() \n{\n    char myMessage[] = \"Hello\";\n\n    printf(\"Regular message: %s\\n\", myMessage);\n    encrypt(myMessage);\n    printf(\"Encrypted message: %s\\n\", myMessage);        \n\n    return 0;\n}\n</code></pre>\n\n<p>The first line in the encrypt.c file is the #include statement:</p>\n\n<pre><code>#include \"encrypt.h\"\n</code></pre>\n\n<p>My question is why is this line necessary inside of this file. I was reading how the #include directive has a copy/paste functionality and inside of the main.c file I can see how this approach would support forward declaration for the encrypt function; however, inside of the encrypt.c file, it would seem that forward declaration of the function is not necessary, and was wondering what was the purpose of using the include directive in this situation? </p>\n\n<p>I apologize if this question has been asked elsewhere and will mark as duplicate as required. Thank you for the clarification.</p>\n"}, {"tags": ["c++", "c", "windows", "winapi"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 4, "creation_date": 1441811668, "post_id": 32483291, "comment_id": 52827493, "body": "GetThreadUILanguage(), probably."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 3, "creation_date": 1441811773, "post_id": 32483291, "comment_id": 52827572, "body": "Considering that no Microsoft program, not even Windows itself, manages to correctly identify which language the user has chosen (I always get an annoying mixture of Norwegian and English), and considering that they, maybe for that reason, tie a lot of functionality to the incorrectly identified chosen language, I recommend making <b>your own scheme</b>, not relying on Windows&#39; settings  --  because you can&#39;t do a better job than Microsoft about that, and what they do sucks. Once they even had the MFC class wizard functionality tied to that. It&#39;s incredible, and very sad."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1441811793, "post_id": 32483291, "comment_id": 52827585, "body": "<a href=\"https://msdn.microsoft.com/it-it/library/windows/desktop/Dd318123(v=VS.85).aspx\" rel=\"nofollow noreferrer\">GetSystemDefaultUILanguage</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 3, "creation_date": 1441812424, "post_id": 32483291, "comment_id": 52828037, "body": "There is no such thing as <i>the</i> language, selected by a user. There&#39;s a default GUI language, an input language, regional settings for date and currency formatting, etc. What are you looking for?"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1441816141, "post_id": 32483291, "comment_id": 52830636, "body": "see also <a href=\"http://stackoverflow.com/a/30229657/4603670\">stackoverflow.com/a/30229657/4603670</a>"}], "owner": {"reputation": 245, "user_id": 4555670, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b5dc55a1c06c2816060f034afe52460c?s=128&d=identicon&r=PG&f=1", "display_name": "hakeris1010", "link": "https://stackoverflow.com/users/4555670/hakeris1010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2162, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1441811442, "creation_date": 1441811442, "question_id": 32483291, "link": "https://stackoverflow.com/questions/32483291/get-current-windows-language", "title": "Get current Windows language", "body": "<p>I want to get the name of the language selected by user now, not the default language.</p>\n\n<p>However, this code:</p>\n\n<pre><code>TCHAR loc[80];\nGetLocaleInfoA(LOCALE_USER_DEFAULT, LOCALE_SENGLANGUAGE, loc, 80*sizeof(TCHAR));\n</code></pre>\n\n<p>returns only default language. </p>\n\n<p>I have searched what first parameter should i use to get current lang, but failed to find it.</p>\n"}, {"tags": ["c", "debugging"], "comments": [{"owner": {"reputation": 14380, "user_id": 2102532, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fe51636ca4d4799fe8600414a3bc891b?s=128&d=identicon&r=PG", "display_name": "meskobalazs", "link": "https://stackoverflow.com/users/2102532/meskobalazs"}, "edited": false, "score": 0, "creation_date": 1441809444, "post_id": 32482430, "comment_id": 52825800, "body": "Where is that <i>6</i> coming from?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "edited": false, "score": 0, "creation_date": 1441810237, "post_id": 32482430, "comment_id": 52826448, "body": "@tom Why would that matter in the slightest? It doesn&#39;t even matter which debugger they are using. All CPUs work pretty much in the same way when it comes to breakpoints. Some OS might have some fluff API in between the debugger and the CPU, but that&#39;s rather irrelevant."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1441810405, "post_id": 32482430, "comment_id": 52826586, "body": "<a href=\"http://stackoverflow.com/q/216819/995714\">How does a debugger work?</a>"}, {"owner": {"reputation": 109, "user_id": 1871670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2128d9a8782e6ab7121bfe9b5493e681?s=128&d=identicon&r=PG", "display_name": "VRU", "link": "https://stackoverflow.com/users/1871670/vru"}, "edited": false, "score": 0, "creation_date": 1441878727, "post_id": 32482430, "comment_id": 52856759, "body": "Hi Geeks! .. yeah I guess I can elaborate my question in much better way, putting User interface in one part and concern about the debugging process and breakpoint operation separated but it should not be wrong as all are related. I will try to update my question."}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 1871670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2128d9a8782e6ab7121bfe9b5493e681?s=128&d=identicon&r=PG", "display_name": "VRU", "link": "https://stackoverflow.com/users/1871670/vru"}, "edited": false, "score": 0, "creation_date": 1441878536, "post_id": 32482577, "comment_id": 52856635, "body": "Hi nneonneo, thanks for your response. I am actually having a lot of doubts on debugging and breakpoint is one among that, my main concern is on software breakpoint... what exactly happens when program counter reaches breakpoint how the process handling happens. Can you elaborate more about on this?"}], "tags": [], "owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "is_accepted": false, "score": 14, "last_activity_date": 1441810152, "last_edit_date": 1441810152, "creation_date": 1441809557, "answer_id": 32482577, "question_id": 32482430, "link": "https://stackoverflow.com/questions/32482430/how-does-break-point-work/32482577#32482577", "title": "How does break point work?", "body": "<p>There are usually two different kinds of breakpoint that a debugger can set: software breakpoints and hardware breakpoints.</p>\n\n<p>A software breakpoint consists of replacing the instruction at the target address with a \"break\" instruction (e.g. <code>int 3</code> on x86) and waiting for the CPU to execute it. When that instruction is hit, the CPU raises an exception and transfers control to the debugger. The upside is that you can define as many breakpoints as you want, but the downside is that this requires modifying the program in memory (which may not be possible for programs in read-only memory, or may cause the program to behave differently if it reads its own program memory).</p>\n\n<p>The other kind, a hardware breakpoint, consists of setting a special <em>debug register</em> in the CPU to ask it to break when it hits a specified address. The CPU will automatically raise an exception when the program counter reaches that address. The upside is that no software modification is needed, but the downside is that this relies on a limited resource (debug registers) of which there may not be many. For example, x86 processors typically only have 4 debug address registers, so you can only set 4 hardware breakpoints at a time.</p>\n\n<p>Debuggers typically pick a strategy depending on available resources (e.g. hardware breakpoints for the first 4 breakpoints and software breakpoints thereafter), although many can also be configured to force one particular type of breakpoint. For example, the popular debugger GDB has the <code>hbreak</code> command to explicitly create hardware breakpoints.</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1441809862, "creation_date": 1441809862, "answer_id": 32482691, "question_id": 32482430, "link": "https://stackoverflow.com/questions/32482430/how-does-break-point-work/32482691#32482691", "title": "How does break point work?", "body": "<p>It depends upon the processor and the operating system. On Linux, a debugger is using the <a href=\"http://man7.org/linux/man-pages/man2/ptrace.2.html\" rel=\"nofollow\">ptrace(2)</a> system call, which the kernel executes with the help of some hardware features of the processors.</p>\n"}], "owner": {"reputation": 109, "user_id": 1871670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2128d9a8782e6ab7121bfe9b5493e681?s=128&d=identicon&r=PG", "display_name": "VRU", "link": "https://stackoverflow.com/users/1871670/vru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 1, "closed_date": 1441830253, "answer_count": 2, "score": 2, "last_activity_date": 1441810152, "creation_date": 1441809159, "question_id": 32482430, "link": "https://stackoverflow.com/questions/32482430/how-does-break-point-work", "closed_reason": "Needs more focus", "title": "How does break point work?", "body": "<p>In genral I know about usage of break point, but would like to know how exactly does it work? how it can interrupt the executing code? how it provides user interface(break point) on executable code and why it normally allows only 6 break points.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "memory", "memory-management"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1441809666, "post_id": 32482419, "comment_id": 52826000, "body": "You are passing <code>ar</code> by value. So the <code>ar</code> in <code>main</code> is different then the <code>ar</code> in <code>load_data</code>. Read <a href=\"http://stackoverflow.com/questions/24052243/why-cant-we-pass-the-pointer-by-reference-in-c\">this</a>."}, {"owner": {"reputation": 2734, "user_id": 2794152, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hxpEu.png?s=128&g=1", "display_name": "an offer can&#39;t refuse", "link": "https://stackoverflow.com/users/2794152/an-offer-cant-refuse"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1441809812, "post_id": 32482419, "comment_id": 52826129, "body": "@JohnnyMopp I thought this is very similar to an array. For array I am passing it by address... Thanks, I am going to fix it."}], "answers": [{"comments": [{"owner": {"reputation": 2734, "user_id": 2794152, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hxpEu.png?s=128&g=1", "display_name": "an offer can&#39;t refuse", "link": "https://stackoverflow.com/users/2794152/an-offer-cant-refuse"}, "edited": false, "score": 0, "creation_date": 1441811152, "post_id": 32482961, "comment_id": 52827165, "body": "Thanks for your answer! works great!"}], "tags": [], "owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "is_accepted": true, "score": 0, "last_activity_date": 1441810586, "creation_date": 1441810586, "answer_id": 32482961, "question_id": 32482419, "link": "https://stackoverflow.com/questions/32482419/why-cant-i-access-to-the-located-memory/32482961#32482961", "title": "Why can&#39;t I access to the located memory?", "body": "<p>see the program listing below - I have modified your code so that you send the pointer to the pointer ar... this works perfectly now. @Johnny Mopp's comment is perfect.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; \nlong int load_data(double ** ar);\n\nint main(void)\n{\n    long int n,i;\n    double * ar; \n    FILE * fp; \n    double number;\n\n    n=load_data(&amp;ar);\n\n    fp = fopen(\"data-copy.txt\",\"w\");\n    //!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n    for(i=0; i&lt;n; i++)\n        fprintf(fp,\"%lf\\n\", ar[i]); //problem here! I can't access!\n    //!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n    fclose(fp);\n\n    printf(\"The number of elements in the file is:%ld\\n\",n);\n}\n\nlong int load_data(double ** ar) \n{\n   FILE * fp; \n   double temp;\n   long int n=0,i;\n\n   fp = fopen(\"zdata.txt\",\"r\");\n   while(fscanf(fp,\"%lf\",&amp;temp)==1)\n       n++;\n   fclose(fp);\n   //load memory\n   *ar = (double*)malloc(sizeof(double)*n);\n\n   fp = fopen(\"zdata.txt\",\"r\");\n   for(i=0; i&lt;n; i++)\n   {\n       fscanf(fp,\"%lf\",*ar+i);\n   //    printf(\"%lf\\n\",ar[i]);//This print well!\n   }\n   fclose(fp);\n\n   return n;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": false, "score": 1, "last_activity_date": 1441810614, "creation_date": 1441810614, "answer_id": 32482976, "question_id": 32482419, "link": "https://stackoverflow.com/questions/32482419/why-cant-i-access-to-the-located-memory/32482976#32482976", "title": "Why can&#39;t I access to the located memory?", "body": "<p>All function arguments in C are pass by value.  </p>\n\n<p>Your <code>main</code> function <em>copies</em> the value of <code>ar</code> (a garbage value) to wherever the compiler puts function arguments (usually in specified registers or on the stack).</p>\n\n<p>In the function <code>load_data</code> the copy of <code>ar</code> is changed to a pointer to a block of memory <em>but the original <code>ar</code> in <code>main</code> is unchanged</em> and is still garbage.</p>\n\n<p>When you exit the function, you throw away the copy of <code>ar</code> (leaking the malloc block).  Then you try to dereference the original <code>ar</code> which is still garbage.</p>\n"}], "owner": {"reputation": 2734, "user_id": 2794152, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hxpEu.png?s=128&g=1", "display_name": "an offer can&#39;t refuse", "link": "https://stackoverflow.com/users/2794152/an-offer-cant-refuse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1441810893, "accepted_answer_id": 32482961, "answer_count": 2, "score": -1, "last_activity_date": 1441810614, "creation_date": 1441809131, "question_id": 32482419, "link": "https://stackoverflow.com/questions/32482419/why-cant-i-access-to-the-located-memory", "closed_reason": "Duplicate", "title": "Why can&#39;t I access to the located memory?", "body": "<p>The program read a data from a file to an array, <code>load_data</code> loads the data to the array <code>ar</code>. However why do I get a <code>Segmentation fault (core dumped)</code> when I access that array in the <code>main</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; \nlong int load_data(double * ar);\n\nint main(void)\n{\n    long int n,i;\n    double * ar; \n    FILE * fp; \n    double number;\n\n    n=load_data(ar);\n\n    fp = fopen(\"data-copy.txt\",\"w\");\n    //!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n    for(i=0; i&lt;n; i++)\n        fprintf(fp,\"%lf\\n\", ar[i]); //problem here! I can't access!\n    //!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n    fclose(fp);\n\n    printf(\"The number of elements in the file is:%ld\\n\",n);\n}\n\nlong int load_data(double * ar) \n{\n   FILE * fp; \n   double temp;\n   long int n=0,i;\n\n   fp = fopen(\"data.txt\",\"r\");\n   while(fscanf(fp,\"%lf\",&amp;temp)==1)\n       n++;\n   fclose(fp);\n   //load memory\n   ar = (double*)malloc(sizeof(double)*n);\n\n   fp = fopen(\"data.txt\",\"r\");\n   for(i=0; i&lt;n; i++)\n   {\n       fscanf(fp,\"%lf\",ar+i);\n   //    printf(\"%lf\\n\",ar[i]);//This print well!\n   }\n   fclose(fp);\n\n   return n;\n}\n</code></pre>\n"}, {"tags": ["ios", "c", "bluetooth-lowenergy", "bluez", "gatt"], "owner": {"reputation": 661, "user_id": 1919173, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/47c54768b7c9a5c85f1bf3370c48740e?s=128&d=identicon&r=PG", "display_name": "ArthurLambert", "link": "https://stackoverflow.com/users/1919173/arthurlambert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 252, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1441807911, "creation_date": 1441807911, "question_id": 32481923, "link": "https://stackoverflow.com/questions/32481923/subscribe-notification-characteristics-linux-ios", "title": "subscribe notification characteristics linux/ios", "body": "<p>I am trying to write a simple Gatt <code>peripheral</code> on linux device. I am currently able to see my service thanks to btgatt-client binary. I can read/write characteristics, enable notification, etc... I am using API from src/shared/gatt-db.h from <code>bluez5</code>, inspiration comes from tools/btgatt-server.c</p>\n\n<p>However I am not able to make it work with my ios application without success. The subscription to notification failed. This ios application is able to work with a CC2541 bluetooth device so this is not an issue in ios side.</p>\n\n<p>To enable the notification subscription I put some changes on the property value in the creation of the characteristics function like this :</p>\n\n<pre><code>gatt_db_service_add_characteristic(service, &amp;uuid,\nBT_ATT_PERM_READ | BT_ATT_PERM_WRITE,\nBT_GATT_CHRC_PROP_READ | BT_GATT_CHRC_PROP_NOTIFY\nsignal_live_read_cb,\nsignal_live_write_cb,\nserver);\n</code></pre>\n\n<p>Do I forget to call some specific code to make it work correctly ?</p>\n"}, {"tags": ["c", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 144, "user_id": 1451746, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52d5a111c495f51a9ce513e52bcabc9d?s=128&d=identicon&r=PG", "display_name": "Eltges", "link": "https://stackoverflow.com/users/1451746/eltges"}, "edited": false, "score": 1, "creation_date": 1441807787, "post_id": 32481726, "comment_id": 52824436, "body": "Thanks I&#39;ll have a look at it."}], "tags": [], "owner": {"reputation": 426, "user_id": 769943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3319b1e3fffd4ca96f9b628523a91405?s=128&d=identicon&r=PG", "display_name": "fsaintjacques", "link": "https://stackoverflow.com/users/769943/fsaintjacques"}, "is_accepted": false, "score": 2, "last_activity_date": 1441807435, "creation_date": 1441807435, "answer_id": 32481726, "question_id": 32481607, "link": "https://stackoverflow.com/questions/32481607/is-there-a-tool-to-generate-makefiles-and-resolve-the-dependencies/32481726#32481726", "title": "Is there a tool to generate makefiles and resolve the dependencies?", "body": "<p>Cmake will do partly what you're asking for. You can always start with a strong project template.</p>\n\n<p>I suggest you take a look at <em>c-template</em>.</p>\n\n<p><a href=\"http://c-template.readthedocs.org/en/latest/\" rel=\"nofollow\">http://c-template.readthedocs.org/en/latest/</a></p>\n\n<p><a href=\"https://github.com/redjack/c-template\" rel=\"nofollow\">https://github.com/redjack/c-template</a></p>\n"}, {"comments": [{"owner": {"reputation": 144, "user_id": 1451746, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52d5a111c495f51a9ce513e52bcabc9d?s=128&d=identicon&r=PG", "display_name": "Eltges", "link": "https://stackoverflow.com/users/1451746/eltges"}, "edited": false, "score": 1, "creation_date": 1441880422, "post_id": 32482114, "comment_id": 52857905, "body": "Thanks, this really does what I needed"}], "tags": [], "owner": {"reputation": 2566, "user_id": 2940881, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lz0ZZ.png?s=128&g=1", "display_name": "Frank-Rene Sch&#228;fer", "link": "https://stackoverflow.com/users/2940881/frank-rene-sch%c3%a4fer"}, "is_accepted": true, "score": 2, "last_activity_date": 1441808376, "creation_date": 1441808376, "answer_id": 32482114, "question_id": 32481607, "link": "https://stackoverflow.com/questions/32481607/is-there-a-tool-to-generate-makefiles-and-resolve-the-dependencies/32482114#32482114", "title": "Is there a tool to generate makefiles and resolve the dependencies?", "body": "<p>There is the free tool HWUT, a unit test tool which does the job! <a href=\"http://hwut.sourceforge.net\" rel=\"nofollow\">HWUT at Sourceforge</a></p>\n\n<p>HWUT does it out of the motivation to facilitate the setup of unit tests. You might install 'ctags' (hwut will use it automatically). Otherwise, HWUT analyses the code using a compiler's object file output (which is notoriously slow).</p>\n\n<p>Once, you have hwut installed you call it simply with </p>\n\n<pre><code>&gt; hwut sos your.c --root some/root/dir another/root/dir --args -DMyCompilerArg -DAnother Arg --\n</code></pre>\n\n<p>It will start searching for include files, source files, object files, and libraries in \"some/root/dir\" and \"another/root/dir\". Starting from \"your.c\" file it will search for all required references and headers and generate a nicely formatted Makefile. If the project is still too large, you might specify sets of root directories to search for sources, includes, and libraries separately. </p>\n\n<ul>\n<li>--root-sources  ... for root directories where to search for sources</li>\n<li>--root-includes  ... from where to search for include headers</li>\n<li>--root-libraries ... where to search libraries</li>\n<li>--root-objects ... where to search for objects</li>\n</ul>\n\n<p>BTW: There is a 'sols' (safe our laze souls) mode which directly generates test files for all functions in a module, i.e.</p>\n\n<blockquote>\n  <p>hwut sols \"module-to-test.c\" </p>\n</blockquote>\n\n<p>will not only generate a Makefile but a battery of test files that serve as a starting point for writing tests.</p>\n"}, {"comments": [{"owner": {"reputation": 144, "user_id": 1451746, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52d5a111c495f51a9ce513e52bcabc9d?s=128&d=identicon&r=PG", "display_name": "Eltges", "link": "https://stackoverflow.com/users/1451746/eltges"}, "edited": false, "score": 1, "creation_date": 1441870016, "post_id": 32482472, "comment_id": 52851006, "body": "That is not the case, but this is still an interesting option to know. Thanks"}], "tags": [], "owner": {"reputation": 8543, "user_id": 5008284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AvSMy.jpg?s=128&g=1", "display_name": "meuh", "link": "https://stackoverflow.com/users/5008284/meuh"}, "is_accepted": false, "score": 2, "last_activity_date": 1441809283, "creation_date": 1441809283, "answer_id": 32482472, "question_id": 32481607, "link": "https://stackoverflow.com/questions/32481607/is-there-a-tool-to-generate-makefiles-and-resolve-the-dependencies/32482472#32482472", "title": "Is there a tool to generate makefiles and resolve the dependencies?", "body": "<p>Note, if you already have a <code>gcc</code> compile line with the appropriate include paths you can have the compiler auto-generate a list of\ndependencies for the included <code>.h</code> files.  See the <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.9.3/gcc/Preprocessor-Options.html#Preprocessor-Options\" rel=\"nofollow\">-MM option</a>.</p>\n"}], "owner": {"reputation": 144, "user_id": 1451746, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52d5a111c495f51a9ce513e52bcabc9d?s=128&d=identicon&r=PG", "display_name": "Eltges", "link": "https://stackoverflow.com/users/1451746/eltges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 2, "closed_date": 1443089338, "accepted_answer_id": 32482114, "answer_count": 3, "score": 1, "last_activity_date": 1441809283, "creation_date": 1441807163, "question_id": 32481607, "link": "https://stackoverflow.com/questions/32481607/is-there-a-tool-to-generate-makefiles-and-resolve-the-dependencies", "closed_reason": "Not suitable for this site", "title": "Is there a tool to generate makefiles and resolve the dependencies?", "body": "<p>I have a large source tree and somewhere inside I have a file with a main function and I want to generate a makefile without resolving all dependencies (include directories and necessary c files) manually. So the tool would need to search starting from the main folder and going up and down the file tree to find the included files that are \"closest\" to the main file.</p>\n"}, {"tags": ["c", "char", "int", "mean"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441806678, "post_id": 32481317, "comment_id": 52823599, "body": "<code>unsigned char</code> would be the correct type in the first place. If you need to convert this to a more structured type, you have to de-serialize properly."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1441806722, "post_id": 32481317, "comment_id": 52823634, "body": "Note: Do not cast the result of <code>malloc</code> &amp; friends in C!"}, {"owner": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 1, "creation_date": 1441807125, "post_id": 32481317, "comment_id": 52823943, "body": "You are reading 4 <code>byte</code> pixels into a single <code>int</code> pixel."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1441811562, "post_id": 32481317, "comment_id": 52827418, "body": "Your code does not read <a href=\"http://netpbm.sourceforge.net/doc/ppm.html\" rel=\"nofollow noreferrer\">PPM format</a> correctly.  In particular, PPM represents each pixel with either 3 bytes or 6 bytes, as indicated by the header field you are reading into variable <code>BYTES2</code>.  I don&#39;t know any system on which an <code>int</code> is either of those widths.  Moreover, reading the pixels as type <code>int</code> sets you up for byte-order issues.  You need a richer data type to represent PPM internally, and smarter code to read and process it.  Why not peruse (or use) NetPBM&#39;s own code?  It&#39;s open source."}, {"owner": {"reputation": 1, "user_id": 5314495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06rKU.jpg?s=128&g=1", "display_name": "matrdias", "link": "https://stackoverflow.com/users/5314495/matrdias"}, "reply_to_user": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 0, "creation_date": 1441831444, "post_id": 32481317, "comment_id": 52838190, "body": "@gre_gor yeah. I haven&#39;t realized that. But how could I assign 1 byte pixel per int pixel? Thanks!"}], "owner": {"reputation": 1, "user_id": 5314495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06rKU.jpg?s=128&g=1", "display_name": "matrdias", "link": "https://stackoverflow.com/users/5314495/matrdias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441806402, "creation_date": 1441806402, "question_id": 32481317, "link": "https://stackoverflow.com/questions/32481317/working-with-ppm-image-as-an-int-img", "title": "Working with PPM image as an int *img", "body": "<p>I've been trying to implement the MSF using a grayscale PPM image and a template. I need to declare the image as \"*int\" img instead of unsigned char <em>img. But when I compute the zero-mean center at the template, I get values that doesn't make any sense. I tried unsigned char</em> and it gives the right pixel values before the zero-mean center and wrong after because 'unsigned char' does't have enough 'space' and doesn't accept negative values but at least it's consistent values. I know it's a silly mistake but I'm stuck on it. Could anyone help me on how could I implement it using int*? Thanks</p>\n\n<p>Below is part of my code and both results</p>\n\n<pre><code>FILE *fpt1, *fpt2, *fpt3;\nint *img, *gt, *int;\nchar    header[320], header2[320];\nint COLS, ROWS, BYTES, COLS2, ROWS2, BYTES2, i, len;\nint r , c, count, sum;\n\n   /*Read template*/\nfpt2 = fopen(\"parenthood_e_template.ppm\", \"r\");\nif (fpt2 == NULL){\n    printf(\"Unable to open template of parenthood.ppm for reading\\n\");\n    exit(0);\n}\nfscanf(fpt2,\"%s %d %d %d\\n\", header2, &amp;COLS2, &amp;ROWS2, &amp;BYTES2);\nif (strcmp(header2, \"P5\") != 0 || BYTES2 != 255){\n    printf(\"Not a template for parenthood.ppm\\n\");\n    exit(0);\n}\n\n    /*Allocate memory for template*/\ntemp = (int*) calloc (COLS2*ROWS2, sizeof(int));\n\n    /* Copy template into memory*/\nheader2[0] = fgetc(fpt2);\nfread(temp,1,COLS2*ROWS2,fpt2);\nfclose(fpt2);\n\n              /* Matched Spatial-Filter */\n    /* zero-mean the template*/\nsum=0;\ncount=0;\nfor (r=0; r&lt;ROWS2; r++) {\n    for (c=0; c&lt;COLS2; c++) {\n        sum += temp[r*COLS2+c];\n        printf(\"temp[%d]= %d\\n\", count, temp[r*COLS2+c]);\n        count += 1;\n    }\n}\n\nsum = sum/126;\n</code></pre>\n\n<p>The result for char*</p>\n\n<pre><code>    temp[0]= 199\n    temp[1]= 196\n    temp[2]= 199\n    temp[3]= 198\n    temp[4]= 198\n    temp[5]= 199\n    temp[6]= 199\n    temp[7]= 202\n    temp[8]= 197\n    temp[9]= 196\n    temp[10]= 195\n    temp[11]= 198\n    temp[12]= 200\n    temp[13]= 197\n    temp[14]= 199\n    temp[15]= 199\n    temp[16]= 198\n    temp[17]= 195\n    temp[18]= 196\n    temp[19]= 196\n    temp[20]= 199\n    temp[21]= 197\n    temp[22]= 198\n    temp[23]= 196\n    temp[24]= 196\n    temp[25]= 193\n    temp[26]= 194\n    temp[27]= 195\n    temp[28]= 193\n    temp[29]= 155\n    temp[30]= 133\n    temp[31]= 150\n    temp[32]= 187\n    temp[33]= 196\n    temp[34]= 196\n    temp[35]= 195\n    temp[36]= 192\n    temp[37]= 109\n    temp[38]= 69\n    temp[39]= 105\n    temp[40]= 88\n    temp[41]= 78\n    temp[42]= 184\n    temp[43]= 194\n    temp[44]= 193\n    temp[45]= 145\n    temp[46]= 74\n    temp[47]= 177\n    temp[48]= 189\n    temp[49]= 186\n    temp[50]= 100\n    temp[51]= 105\n    temp[52]= 191\n    temp[53]= 191\n    temp[54]= 72\n    temp[55]= 139\n    temp[56]= 191\n    temp[57]= 192\n    temp[58]= 188\n    temp[59]= 168\n    temp[60]= 46\n    temp[61]= 183\n    temp[62]= 186\n    temp[63]= 43\n    temp[64]= 89\n    temp[65]= 110\n    temp[66]= 114\n    temp[67]= 114\n    temp[68]= 107\n    temp[69]= 37\n    temp[70]= 176\n    temp[71]= 191\n    temp[72]= 43\n    temp[73]= 126\n    temp[74]= 133\n    temp[75]= 133\n    temp[76]= 137\n    temp[77]= 129\n    temp[78]= 132\n    temp[79]= 187\n    temp[80]= 191\n    temp[81]= 52\n    temp[82]= 167\n    temp[83]= 188\n    temp[84]= 192\n    temp[85]= 195\n    temp[86]= 195\n    temp[87]= 195\n    temp[88]= 191\n    temp[89]= 189\n    temp[90]= 94\n    temp[91]= 108\n    temp[92]= 189\n    temp[93]= 193\n    temp[94]= 192\n    temp[95]= 191\n    temp[96]= 192\n    temp[97]= 192\n    temp[98]= 193\n    temp[99]= 173\n    temp[100]= 49\n    temp[101]= 141\n    temp[102]= 175\n    temp[103]= 177\n    temp[104]= 108\n    temp[105]= 125\n    temp[106]= 195\n    temp[107]= 199\n    temp[108]= 197\n    temp[109]= 163\n    temp[110]= 90\n    temp[111]= 70\n    temp[112]= 75\n    temp[113]= 109\n    temp[114]= 180\n    temp[115]= 191\n    temp[116]= 194\n    temp[117]= 197\n    temp[118]= 193\n    temp[119]= 192\n    temp[120]= 185\n    temp[121]= 188\n    temp[122]= 195\n    temp[123]= 196\n    temp[124]= 195\n    temp[125]= 0\n    C= 9  R= 14\n    temp = 35   mean=161\n</code></pre>\n\n<p>And the result for int*</p>\n\n<pre><code>    temp[0]= -959986489\n    temp[1]= -892876858\n    temp[2]= -960248635\n    temp[3]= -943209016\n    temp[4]= -993737786\n    temp[5]= -993606201\n    temp[6]= -1010646588\n    temp[7]= -1769628735\n    temp[8]= -1010514757\n    temp[9]= 1766157760\n    temp[10]= -1028108712\n    temp[11]= -1320513087\n    temp[12]= 1768209085\n    temp[13]= -1958166593\n    temp[14]= -1464024897\n    temp[15]= 733656878\n    temp[16]= 1920101977\n    temp[17]= -1078975125\n    temp[18]= -2054848981\n    temp[19]= -1148943991\n    temp[20]= -1129892673\n    temp[21]= -1010580544\n    temp[22]= 1818148287\n    temp[23]= -1077886531\n    temp[24]= -1379811136\n    temp[25]= -1313895119\n    temp[26]= -943489684\n    temp[27]= 1180345285\n    temp[28]= -1078694581\n    temp[29]= -1061042750\n    temp[30]= -993805127\n    temp[31]= 195\n    temp[32]= 0\n    temp[33]= 0\n    temp[34]= 0\n    temp[35]= 0\n    temp[36]= 0\n    temp[37]= 0\n    temp[38]= 0\n    temp[39]= 0\n    temp[40]= 0\n    temp[41]= 0\n    temp[42]= 0\n    temp[43]= 0\n    temp[44]= 0\n    temp[45]= 0\n    temp[46]= 0\n    temp[47]= 0\n    temp[48]= 0\n    temp[49]= 0\n    temp[50]= 0\n    temp[51]= 0\n    temp[52]= 0\n    temp[53]= 0\n    temp[54]= 0\n    temp[55]= 0\n    temp[56]= 0\n    temp[57]= 0\n    temp[58]= 0\n    temp[59]= 0\n    temp[60]= 0\n    temp[61]= 0\n    temp[62]= 0\n    temp[63]= 0\n    temp[64]= 0\n    temp[65]= 0\n    temp[66]= 0\n    temp[67]= 0\n    temp[68]= 0\n    temp[69]= 0\n    temp[70]= 0\n    temp[71]= 0\n    temp[72]= 0\n    temp[73]= 0\n    temp[74]= 0\n    temp[75]= 0\n    temp[76]= 0\n    temp[77]= 0\n    temp[78]= 0\n    temp[79]= 0\n    temp[80]= 0\n    temp[81]= 0\n    temp[82]= 0\n    temp[83]= 0\n    temp[84]= 0\n    temp[85]= 0\n    temp[86]= 0\n    temp[87]= 0\n    temp[88]= 0\n    temp[89]= 0\n    temp[90]= 0\n    temp[91]= 0\n    temp[92]= 0\n    temp[93]= 0\n    temp[94]= 0\n    temp[95]= 0\n    temp[96]= 0\n    temp[97]= 0\n    temp[98]= 0\n    temp[99]= 0\n    temp[100]= 0\n    temp[101]= 0\n    temp[102]= 0\n    temp[103]= 0\n    temp[104]= 0\n    temp[105]= 0\n    temp[106]= 0\n    temp[107]= 0\n    temp[108]= 0\n    temp[109]= 0\n    temp[110]= 0\n    temp[111]= 0\n    temp[112]= 0\n    temp[113]= 0\n    temp[114]= 0\n    temp[115]= 0\n    temp[116]= 0\n    temp[117]= 0\n    temp[118]= 0\n    temp[119]= 0\n    temp[120]= 0\n    temp[121]= 0\n    temp[122]= 0\n    temp[123]= 0\n    temp[124]= 0\n    temp[125]= 0\n    C= 9  R= 14\n    temp = -8605725   mean=8605725\n</code></pre>\n"}, {"tags": ["c", "gdb", "clion"], "comments": [{"owner": {"reputation": 265, "user_id": 5189611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90118b528bb42112129608ff59f39320?s=128&d=identicon&r=PG&f=1", "display_name": "Tony54", "link": "https://stackoverflow.com/users/5189611/tony54"}, "reply_to_user": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1441806327, "post_id": 32480896, "comment_id": 52823358, "body": "no, it&#39;s not a duplicate. It doesn&#39;t answer my question. The answer given was to use &quot;stepi&quot;. i&#39;ve noted in my question that i&#39;ve tried that and it doesn&#39;t work."}, {"owner": {"reputation": 426, "user_id": 769943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3319b1e3fffd4ca96f9b628523a91405?s=128&d=identicon&r=PG", "display_name": "fsaintjacques", "link": "https://stackoverflow.com/users/769943/fsaintjacques"}, "edited": false, "score": 0, "creation_date": 1441806618, "post_id": 32480896, "comment_id": 52823556, "body": "printf is part of the standard library, your compilation flags will not affect already compiled libraries. Does gdb complain about missing symbols at startup?"}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1441806844, "post_id": 32480896, "comment_id": 52823735, "body": "Try to install libc debug symbols. This can be done by yum or apt-get, depending on your distribution."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 2, "creation_date": 1441807037, "post_id": 32480896, "comment_id": 52823873, "body": "Why do you want to step into <code>printf(3)</code>? Just so you know, having a crash with a stacktrace ending inside <code>printf(3)</code> does not mean it&#39;s a libc bug. It&#39;s probably your code."}, {"owner": {"reputation": 265, "user_id": 5189611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90118b528bb42112129608ff59f39320?s=128&d=identicon&r=PG&f=1", "display_name": "Tony54", "link": "https://stackoverflow.com/users/5189611/tony54"}, "reply_to_user": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1441807419, "post_id": 32480896, "comment_id": 52824151, "body": "@FilipeGon&#231;alves it&#39;s not my code"}], "owner": {"reputation": 265, "user_id": 5189611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90118b528bb42112129608ff59f39320?s=128&d=identicon&r=PG&f=1", "display_name": "Tony54", "link": "https://stackoverflow.com/users/5189611/tony54"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 658, "favorite_count": 0, "closed_date": 1441825335, "answer_count": 0, "score": 0, "last_activity_date": 1441807405, "creation_date": 1441805233, "last_edit_date": 1441807405, "question_id": 32480896, "link": "https://stackoverflow.com/questions/32480896/cant-step-into-printf-function-with-gdb", "closed_reason": "Duplicate", "title": "Can&#39;t step into printf function with gdb", "body": "<p>I can't step into a <code>printf</code> function with gdb. I'm using CLion, everytime I hit \"step into\", \"step over\" or \"force step into\", the same line returns, eventually exiting the program.</p>\n\n<p>I have compiled the program with minimal optimisations:</p>\n\n<pre><code>CC=gcc\nCFLAGS=-Wall -ggdb -O0 -g3\nOBJECTS=main.c\n\npermute: $(OBJECTS)\n    $(CC) $(CFLAGS) $(OBJECTS) -o permute\n\nclean:\n    rm $(OBJECTS) permute\n</code></pre>\n\n<p>I've also used <code>stepi</code> on the console. What is the problem?</p>\n\n<p>EDIT:</p>\n\n<p>I get the following messages when starting gdb:</p>\n\n<pre><code>&gt;&gt;&gt;&gt;&gt;Function \"__cxa_throw\" not defined.\nwarning: Could not open OSO archive file \"/BinaryCache/corecrypto/corecrypto-233.1.2~26/Symbols/BuiltProducts/libcorecrypto_static.a\"\nwarning: `/BinaryCache/coreTLS/coreTLS-35.20.2~10/Objects/coretls.build/coretls.build/Objects-normal/x86_64/system_coretls_vers.o': can't open to read symbols: No such file or directory.\nwarning: Could not open OSO archive file \"/BinaryCache/coreTLS/coreTLS-35.20.2~10/Symbols/BuiltProducts/libcoretls_ciphersuites.a\"\nwarning: Could not open OSO archive file \"/BinaryCache/coreTLS/coreTLS-35.20.2~10/Symbols/BuiltProducts/libcoretls_handshake.a\"\nwarning: Could not open OSO archive file \"/BinaryCache/coreTLS/coreTLS-35.20.2~10/Symbols/BuiltProducts/libcoretls_record.a\"\nwarning: Could not open OSO archive file \"/BinaryCache/coreTLS/coreTLS-35.20.2~10/Symbols/BuiltProducts/libcoretls_stream_parser.a\"\n</code></pre>\n\n<p>Full code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\n/* Function to swap values at two pointers */\nvoid swap (char *x, char *y)\n{\n    char temp;\n    temp = *x;\n    *x = *y;\n    *y = temp;\n}\n\n/* Function to print permutations of string\n    This function takes three parameters:\n    1. String\n    2. Starting index of the string\n    3. Ending index of the string. */\nvoid permute(char *a, int i, int n)\n{\n    int j;\n    if (i == n)\n        printf(\"%s\\n\", a);\n    else\n    {\n        for (j = i; j &lt;= n; j++)\n        {\n            swap((a+i), (a+j));\n            permute(a, i+1, n);\n            swap((a+i), (a+j)); //backtrack\n        }\n    }\n}\n\n/* Driver program to test above functions */\nint main()\n{\n    char a[] = \"ABC\";\n    permute(a, 0, 2);\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "double-pointer"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1441803495, "post_id": 32480072, "comment_id": 52821243, "body": "A pointer is a pointer is a pointer. It doesn&#39;t matter what it points to, it&#39;s still a pointer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 4, "creation_date": 1441803543, "post_id": 32480072, "comment_id": 52821279, "body": "Do not cast the result of <code>malloc</code> and friends in C!"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1441803560, "post_id": 32480072, "comment_id": 52821292, "body": "Also, remember that you can use array indexing syntax with pointers too, and that <code>*(arr + i)</code> is equivalent to <code>arr[i]</code>, which often is more intuitive (and a little less to write)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441804401, "post_id": 32480072, "comment_id": 52821904, "body": "What do you mena by &quot;re-use&quot;? You dereference it, but you can also assign a new value. You seem to missed some basic concepts - no offence! May I recommend to read a C book? Pointers are used in (almost) every non-trivial C program, so you really have to understand them well. Every good book treats this subject en detail."}, {"owner": {"reputation": 734, "user_id": 3235081, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/iSyXb.png?s=128&g=1", "display_name": "Shady Programmer", "link": "https://stackoverflow.com/users/3235081/shady-programmer"}, "edited": false, "score": 0, "creation_date": 1441809917, "post_id": 32480072, "comment_id": 52826214, "body": "Olaf - It so happens that I&#39;m actually reading &quot;C Programming : A modern approach 2nd Edition&quot; by K.N. King right now so thank you for your concern about my basics ... I&#39;m also aware how important pointers are so thank you for that too. My confusion has risen by array notation and pointer arithmetic equivalent to it. I&#39;m trying to find every possible scenario where one equals another because currently it&#39;s a big chaos in my head. Other than that I&#39;m okay with most of the basics :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1441811235, "post_id": 32480072, "comment_id": 52827221, "body": "You shouldn&#39;t allocate pointer-to-pointer lookup tables like these anyway. If that book told you to do so, you may have to consider burning it with fire. Instead, allocate a real 2D array in adjacent memory. <code>int (*arr)[row][col] = malloc(sizeof int[row][col]);</code>."}, {"owner": {"reputation": 734, "user_id": 3235081, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/iSyXb.png?s=128&g=1", "display_name": "Shady Programmer", "link": "https://stackoverflow.com/users/3235081/shady-programmer"}, "edited": false, "score": 0, "creation_date": 1441811604, "post_id": 32480072, "comment_id": 52827444, "body": "Lundin - The code above wasn&#39;t an example in the book, it was my own experimenation combined with some research on stackoverflow. I wanted to create a 2D array with variable length of columns, I don&#39;t see why that method is a bad idea ? Also in relation to the line of code you wrote, I don&#39;t think the sizeof operator is going to work for 2D array properly ?"}], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 2, "last_activity_date": 1441807440, "last_edit_date": 1441807440, "creation_date": 1441803381, "answer_id": 32480161, "question_id": 32480072, "link": "https://stackoverflow.com/questions/32480072/the-same-variable-shared-between-double-pointer-and-single-pointer/32480161#32480161", "title": "The same variable shared between double pointer and single pointer", "body": "<p>Inside the <code>for</code> loop, you are <em>not</em> using <code>arr</code> as a <strong>pointer-to-an-int</strong>; you are using <code>*(arr+i)</code> as a <strong>pointer-to-an-int</strong>, which is consistent with dereferencing <code>arr</code>, which is a <strong>pointer-to-a-pointer-to-an-int</strong>.</p>\n"}, {"comments": [{"owner": {"reputation": 734, "user_id": 3235081, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/iSyXb.png?s=128&g=1", "display_name": "Shady Programmer", "link": "https://stackoverflow.com/users/3235081/shady-programmer"}, "edited": false, "score": 0, "creation_date": 1441808852, "post_id": 32481072, "comment_id": 52825278, "body": "Okay, I see my confusion now, I thought that after declaring and defining an int **arr then later on in the code I can only de-refference it to **arr, not, *arr. Thank you, upvote."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1441805746, "creation_date": 1441805746, "answer_id": 32481072, "question_id": 32480072, "link": "https://stackoverflow.com/questions/32480072/the-same-variable-shared-between-double-pointer-and-single-pointer/32481072#32481072", "title": "The same variable shared between double pointer and single pointer", "body": "<p>You are not \"reusing\" <code>arr</code> as both a pointer to pointer and as a pointer.  <code>arr</code> has type <code>int **</code>, but then you do some pointer arithmetic and dereference the pointer with <code>*(arr + i)</code>, and that expression has type <code>int *</code>.</p>\n\n<p>Also, as mentioned by Joachim in the comments, <code>*(arr + i)</code> is equivalent to <code>arr[i]</code>.  Using this notation makes it more clear exactly what you're doing.</p>\n"}], "owner": {"reputation": 734, "user_id": 3235081, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/iSyXb.png?s=128&g=1", "display_name": "Shady Programmer", "link": "https://stackoverflow.com/users/3235081/shady-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 32481072, "answer_count": 2, "score": -2, "last_activity_date": 1449597368, "creation_date": 1441803170, "last_edit_date": 1449597368, "question_id": 32480072, "link": "https://stackoverflow.com/questions/32480072/the-same-variable-shared-between-double-pointer-and-single-pointer", "title": "The same variable shared between double pointer and single pointer", "body": "<p>Good evening,\nquick question regarding the following code:</p>\n\n<pre><code>// Start of main\nint i,j;\nint row,col;\n\nprintf(\"Enter the values for row and col:\\n\");\nscanf(\"%d%d\",&amp;row,&amp;col);\nint **arr=(int**)malloc(row*(sizeof(int*)));\n\nfor(i=0; i&lt;row; i++)\n{\n *(arr+i) = (int*)malloc(sizeof(int)*col);\n}\n\n// .. code after this snippet\n</code></pre>\n\n<p>Why am I able to use the variable <code>arr</code> as a pointer to a pointer and then re-use it as a pointer inside the for loop ?? Why do I not have to create two seperate variables ?</p>\n"}, {"tags": ["c", "linux-kernel"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1441801713, "post_id": 32479404, "comment_id": 52819826, "body": "Are you sure that you can call this function from user space, passing a user space allocated buffer?"}, {"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 0, "creation_date": 1441801778, "post_id": 32479404, "comment_id": 52819870, "body": "Have you registered <code>sbull_transfer()</code> as the read file operation when registering the device with fops?"}, {"owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1441811639, "post_id": 32479404, "comment_id": 52827467, "body": "@Jens Gustedt the question you reference is about the rationale behind the copy_to/from_user - this question here is about why copy_to/from_user hasn&#39;t been used - it is totally different"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "edited": false, "score": 0, "creation_date": 1441812405, "post_id": 32479404, "comment_id": 52828022, "body": "@tinky_winky I think Jens is correct.  This is the same question and I think the accepted answer is the answer to this question at all."}, {"owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1441812733, "post_id": 32479404, "comment_id": 52828248, "body": "@JeremyP I can&#39;t agree with that. In my opinion it is clear that OP is thinking that copy_from/to_user has been omitted. He doesn&#39;t ask why copy_to_user exist as he probably knows this (or thinks that he knows). The reference question is about &quot;Why is that we should use copy_to_user instead of memcpy()&quot;. It is totally different. OP knows why we should and he asks why we don&#39;t."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "edited": false, "score": 1, "creation_date": 1441812954, "post_id": 32479404, "comment_id": 52828394, "body": "@tinky_winky On reflection, I think you are correct."}], "answers": [{"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1441801998, "post_id": 32479617, "comment_id": 52820062, "body": "Could you elaborate your answer, please?"}, {"owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "edited": false, "score": 0, "creation_date": 1441838249, "post_id": 32479617, "comment_id": 52841055, "body": "you are welcome, tinky-winky is very glad that helped"}], "tags": [], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "is_accepted": true, "score": 2, "last_activity_date": 1441819683, "last_edit_date": 1592644375, "creation_date": 1441801823, "answer_id": 32479617, "question_id": 32479404, "link": "https://stackoverflow.com/questions/32479404/memcpy-instead-of-copy-to-user/32479617#32479617", "title": "memcpy instead of copy_to_user", "body": "<p>The sbull driver can implement the actual data transfer with a simple memcpy call because data is already in memory, after all.</p>\n<p>Function</p>\n<pre><code>static void sbull_request(request_queue_t *q)\n{\n    struct request *req;\n\n    while ((req = elv_next_request(q)) != NULL) {\n        struct sbull_dev *dev = req-&gt;rq_disk-&gt;private_data;\n        if (! blk_fs_request(req)) {\n            printk (KERN_NOTICE &quot;Skip non-fs request\\n&quot;);\n            end_request(req, 0);\n            continue;\n        }\n        sbull_transfer(dev, req-&gt;sector, req-&gt;current_nr_sectors,\n                req-&gt;buffer, rq_data_dir(req));\n        end_request(req, 1);\n    }\n}\n</code></pre>\n<p>calls <code>elv_next_request</code> before data is passed to <code>sbull_transfer</code>. Request function takes care about copying data to/from user space. The <em>buffer</em> contained in returned <code>request</code> struct is described in book as:</p>\n<blockquote>\n<p>char *buffer;</p>\n<p>A pointer to the buffer to or from which the data should\nbe transferred. <strong>This pointer is a kernel virtual address</strong> and can be\ndereferenced directly by the driver if need be.</p>\n</blockquote>\n"}], "owner": {"reputation": 91, "user_id": 5236241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ee52825f41469ade135bd9a0bc2fdb66?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5236241/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 963, "favorite_count": 0, "closed_date": 1441806364, "accepted_answer_id": 32479617, "answer_count": 1, "score": 0, "last_activity_date": 1441824928, "creation_date": 1441801157, "last_edit_date": 1441824928, "question_id": 32479404, "link": "https://stackoverflow.com/questions/32479404/memcpy-instead-of-copy-to-user", "closed_reason": "Duplicate", "title": "memcpy instead of copy_to_user", "body": "<p>Let consider following code. For someone who read Linux Device Driver the context will be clear.</p>\n\n<p>In short, \nsbull is a driver which acts a disk device and the sbull_transfer function aims to transfer block of data from/to disk/user_space.</p>\n\n<p>And everything is clear expect one thing.\nI don't understand why we can just simply use memcpy function. After all, we copy from user space so why it is possible? Usually, I noticed, that we should use copy_from_user()/copy_to_user(). </p>\n\n<p>I don't understand why we needn't to use them. Please explain.</p>\n\n<pre><code>static void sbull_transfer(struct sbull_dev *dev, unsigned long sector,\n        unsigned long nsect, char *buffer, int write)\n{\n    unsigned long offset = sector*KERNEL_SECTOR_SIZE;\n    unsigned long nbytes = nsect*KERNEL_SECTOR_SIZE;\n\n    if ((offset + nbytes) &gt; dev-&gt;size) {\n        printk (KERN_NOTICE \"Beyond-end write (%ld %ld)\\n\", offset, nbytes);\n        return;\n    }\n    if (write)\n        memcpy(dev-&gt;data + offset, buffer, nbytes);\n    else\n        memcpy(buffer, dev-&gt;data + offset, nbytes);\n}\n</code></pre>\n"}, {"tags": ["c", "client", "mosquitto", "broker"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5246934, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e8bc59ac4b40fe535dc693c0e0a37f5?s=128&d=identicon&r=PG&f=1", "display_name": "prem", "link": "https://stackoverflow.com/users/5246934/prem"}, "edited": false, "score": 0, "creation_date": 1441806457, "post_id": 32480323, "comment_id": 52823446, "body": "I used all the callback functions(log_callback,connect_callback,publish_callback with mosquitto_loop()),  but for some reason, the program is only entering into the log_callback function and exiting the program without ever entering into connect_callback and publish_callback. If there was some error in publishing or connecting to the broker i think it would have shown in the err variable that I have used in the program. Am I doing something else wrong here?"}, {"owner": {"reputation": 9633, "user_id": 429431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76ee7eb6c9044a977de255270ea1125c?s=128&d=identicon&r=PG", "display_name": "ralight", "link": "https://stackoverflow.com/users/429431/ralight"}, "reply_to_user": {"reputation": 51, "user_id": 5246934, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e8bc59ac4b40fe535dc693c0e0a37f5?s=128&d=identicon&r=PG&f=1", "display_name": "prem", "link": "https://stackoverflow.com/users/5246934/prem"}, "edited": false, "score": 0, "creation_date": 1441811439, "post_id": 32480323, "comment_id": 52827341, "body": "You must use one of mosquitto_loop*(), otherwise you can&#39;t be sure of the data actually being sent. I&#39;ve added an example."}, {"owner": {"reputation": 51, "user_id": 5246934, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e8bc59ac4b40fe535dc693c0e0a37f5?s=128&d=identicon&r=PG&f=1", "display_name": "prem", "link": "https://stackoverflow.com/users/5246934/prem"}, "edited": false, "score": 0, "creation_date": 1441871446, "post_id": 32480323, "comment_id": 52851934, "body": "I played around both your and mine code, looks like both our codes fail to work, if mosquitto_loop_forever() is replaced by mosquitto_loop(), I searched a lot to know the difference between them but did not find anything understandable..can u please tell me what exactly is happening in both the cases"}, {"owner": {"reputation": 9633, "user_id": 429431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76ee7eb6c9044a977de255270ea1125c?s=128&d=identicon&r=PG", "display_name": "ralight", "link": "https://stackoverflow.com/users/429431/ralight"}, "reply_to_user": {"reputation": 51, "user_id": 5246934, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e8bc59ac4b40fe535dc693c0e0a37f5?s=128&d=identicon&r=PG&f=1", "display_name": "prem", "link": "https://stackoverflow.com/users/5246934/prem"}, "edited": false, "score": 0, "creation_date": 1441963421, "post_id": 32480323, "comment_id": 52897622, "body": "mosquitto_loop _forever() keeps on calling mosquitto_loop(). If you only call mosquitto_loop() once, there is no guarantee that all data will have been sent over the network."}, {"owner": {"reputation": 9633, "user_id": 429431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76ee7eb6c9044a977de255270ea1125c?s=128&d=identicon&r=PG", "display_name": "ralight", "link": "https://stackoverflow.com/users/429431/ralight"}, "reply_to_user": {"reputation": 51, "user_id": 5246934, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e8bc59ac4b40fe535dc693c0e0a37f5?s=128&d=identicon&r=PG&f=1", "display_name": "prem", "link": "https://stackoverflow.com/users/5246934/prem"}, "edited": false, "score": 0, "creation_date": 1441963569, "post_id": 32480323, "comment_id": 52897717, "body": "If the code I gave doesn&#39;t work for qos 0 then there&#39;s nothing I can do. In that case, on_publish() is called once the PUBLISH packet has been passed to the OS for sending. All the places I&#39;ve seen that means the same as the packet being sent. If that isn&#39;t the case on your OS, I don&#39;t know what to suggest."}, {"owner": {"reputation": 51, "user_id": 5246934, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e8bc59ac4b40fe535dc693c0e0a37f5?s=128&d=identicon&r=PG&f=1", "display_name": "prem", "link": "https://stackoverflow.com/users/5246934/prem"}, "edited": false, "score": 0, "creation_date": 1442467281, "post_id": 32480323, "comment_id": 53096171, "body": "Oh okay, anyways can you explain me the flow of the program that you have written above. I mean in what order are the functions called and if this program is multithreaded or not. P.S. thank you so much for the help so far."}], "tags": [], "owner": {"reputation": 9633, "user_id": 429431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76ee7eb6c9044a977de255270ea1125c?s=128&d=identicon&r=PG", "display_name": "ralight", "link": "https://stackoverflow.com/users/429431/ralight"}, "is_accepted": false, "score": 1, "last_activity_date": 1441811407, "last_edit_date": 1441811407, "creation_date": 1441803791, "answer_id": 32480323, "question_id": 32479261, "link": "https://stackoverflow.com/questions/32479261/c-program-using-mosquitto-client-library-not-working/32480323#32480323", "title": "C program using mosquitto client library not working", "body": "<p>You should look at the <code>mosquitto_loop*()</code> function, you need to use one of these to ensure that network traffic is processed. <code>mosquitto_publish()</code> is entirely asynchronous and does not guarantee delivery when it returns. If you want to be sure the message has been delivered, use the <code>on_publish</code> callback.</p>\n\n<p>I would suggest something like this:</p>\n\n<pre><code>void on_publish(struct mosquitto *mosq, void *userdata, int mid)\n{\n    mosquitto_disconnect(mosq);\n}\n\nint main(int argc, char *argv[])\n{\n    struct mosquitto *mosq;\n\n    mosq = mosquitto_new(\"id\", true, NULL);\n    mosquitto_publish_callback_set(mosq, on_publish);\n\n    mosquitto_connect(mosq, \"example.net\", 1883);\n    mosquitto_publish(mosq, NULL, \"topic, 11, \"hello world\", 0, false);\n    mosquitto_loop_forever(mosq, -1, 1);  // this calls mosquitto_loop() in a loop, it will exit once the client disconnects cleanly\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5246934, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e8bc59ac4b40fe535dc693c0e0a37f5?s=128&d=identicon&r=PG&f=1", "display_name": "prem", "link": "https://stackoverflow.com/users/5246934/prem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8545, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1441865315, "creation_date": 1441800758, "last_edit_date": 1441865315, "question_id": 32479261, "link": "https://stackoverflow.com/questions/32479261/c-program-using-mosquitto-client-library-not-working", "title": "C program using mosquitto client library not working", "body": "<p>Can anyone please tell me why the below code is not working?</p>\n\n<pre><code>#include&lt;mosquitto.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main() {\n    char id[4] = \"4567\";\n    char *host = \"localhost\";\n    int port = 61613;\n    int keepalive = 60;\n    const char *msg1 = \"{ \\\"data\\\":\\\"Hello\\\" }\";\n    bool clean_session = false;\n    const char *top = \"data/test/abc\";\n    struct mosquitto *mosq = NULL;\n\n    mosquitto_lib_init();\n\n    mosq = mosquitto_new(id,clean_session,NULL);\n    if(!mosq){\n        printf(\"Not Created\");\n        return 1;\n    }\n    mosquitto_username_pw_set(mosq,\"admin\",\"password\");\n\n    printf(\"%s\\n\",mosquitto_strerror(mosquitto_connect(mosq,host,port,keepalive)));\n\n    int err = mosquitto_publish(mosq,NULL,\"admin\",strlen(msg1),msg1,1,true);\n    printf(\"Error number: %d\",err);\n    printf(\"\\nerr description=%s\\n\", mosquitto_strerror(err));  \n\n\n    mosquitto_destroy(mosq);\n    mosquitto_lib_cleanup();\n    return 0;\n}\n</code></pre>\n\n<p>I am using apollo broker, I compiled the code and its working without any errors but the published message is not reaching the broker</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1441798171, "post_id": 32478314, "comment_id": 52817345, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a Minimal, Complete, and Verifiable example."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1441808574, "post_id": 32478314, "comment_id": 52825060, "body": "Per the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C 2011 standard</a>, section 6.7.9, an array of <code>char</code> may be initialized with a string literal or a brace-enclosed list of initializers.  A conditional expression is neither one of those things."}], "answers": [{"comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 1, "creation_date": 1441798563, "post_id": 32478438, "comment_id": 52817590, "body": "Yes, thats correct, but shouldn&#39;t <code>char s[] = ( (i == 2)? &quot;botton&quot;:&quot;bottle&quot; );</code> work"}, {"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "reply_to_user": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1441798642, "post_id": 32478438, "comment_id": 52817642, "body": "@haris that has the same issue"}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 1, "creation_date": 1441798741, "post_id": 32478438, "comment_id": 52817695, "body": "But i checked, <code>char* s = ( (i == 2)? &quot;botton&quot;:&quot;bottle&quot; );</code> is working."}, {"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 4, "creation_date": 1441799266, "post_id": 32478438, "comment_id": 52818102, "body": "An array is not a pointer, though they may behave similarly in certain respects."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1441799355, "post_id": 32478438, "comment_id": 52818170, "body": "Doesn&#39;t <code>(i == 2)? &quot;botton&quot;:&quot;bottle&quot;;</code> evaluate to a string literal?"}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1441799645, "post_id": 32478438, "comment_id": 52818390, "body": "@CoolGuy, thats what. So it should also work with <code>char s[]</code>"}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441799768, "post_id": 32478438, "comment_id": 52818473, "body": "@Olaf i am using gcc"}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1441799840, "post_id": 32478438, "comment_id": 52818517, "body": "Clang gives the error <code>crazy.c:7:10: error: array initializer must be an initializer list or string literal</code>. won&#39;t the right side of that expression give a string literal."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1441799916, "post_id": 32478438, "comment_id": 52818573, "body": "@haris: please read my answer."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 3, "creation_date": 1441800021, "post_id": 32478438, "comment_id": 52818658, "body": "@CoolGuy No, it evaluates to a <code>const char*</code>. Nothing evaluates <i>to</i> a literal; a literal is a textual - literal - representation for a value.  Similarly, <code>(i == 2) ? 34 : 56;</code> doesn&#39;t evaluate to an integer literal, but to an <code>int</code> (whose value is either 34 or 56)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1441800107, "post_id": 32478438, "comment_id": 52818721, "body": "@molbdnilo: No, it evaluates to a <code>const char *</code>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441800144, "post_id": 32478438, "comment_id": 52818748, "body": "@Olaf I&#39;m stuck in &quot;old&quot; C ;-)"}, {"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 0, "creation_date": 1441800505, "post_id": 32478438, "comment_id": 52818997, "body": "When the variable <code>s[]</code> is initialized, the initialization value must be known at compile-time. The equality test <code>(i == 2)</code> occurs at run-time, thus it cannot generate a valid initializer."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1441800608, "post_id": 32478438, "comment_id": 52819078, "body": "@molbdnilo,@Alex, Thanks. I got it. I think you should add that into your answer."}], "tags": [], "owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "is_accepted": true, "score": 4, "last_activity_date": 1441802129, "last_edit_date": 1441802129, "creation_date": 1441798425, "answer_id": 32478438, "question_id": 32478314, "link": "https://stackoverflow.com/questions/32478314/invalid-initializer-error/32478438#32478438", "title": "&quot;Invalid initializer&quot; error", "body": "<p>Compiling with <code>-Wall</code> shows the error:</p>\n\n<pre><code>$ gcc -Wall test.c\ntest.c:5:10: error: array initializer must be an initializer list or string literal\n    char s[100] = (i == 2)? \"botton\":\"bottle\";\n         ^\n1 error generated.\n</code></pre>\n\n<p>However, you can initialize with <code>strcpy()</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    int i = 2;\n    char s[100] = {0};\n    strcpy(s, (i == 2) ? \"botton\" : \"bottle\");\n    printf(\"%c\\n\", s[0]);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>When the variable <code>s[]</code> is initialized, the initialization value must be known at compile-time. The equality test <code>(i == 2)</code> occurs at run-time, thus it cannot generate a valid initializer. </p>\n\n<p>You can, however, use <code>char *s</code>, because you can change the value of a pointer at run-time:</p>\n\n<pre><code>char *s = (i == 2) ? \"botton\" : \"bottle\";\n</code></pre>\n\n<p>You cannot, however, use <code>static char *s</code> with this initializer, because it is not a constant at compile-time.</p>\n"}, {"comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1441800146, "post_id": 32478959, "comment_id": 52818750, "body": "Should this work then <code>char s[] = ( (2 == 2)? &quot;botton&quot;:&quot;bottle&quot; );</code>??"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1441800401, "post_id": 32478959, "comment_id": 52818920, "body": "@haris: I think so (cannot test right now). C11 seems to allow variable initializers for <code>auto</code>."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1441800829, "post_id": 32478959, "comment_id": 52819211, "body": "The initializer for an array cannot be an arbitrary expression, constant or not. It must be a list of initializers or a string literal (for a char array). C11 does not change this."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1441800972, "post_id": 32478959, "comment_id": 52819303, "body": "@interjay: Already edited. Just took some time to lookup in the standard. Please remove the DV."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 0, "last_activity_date": 1441805621, "last_edit_date": 1441805621, "creation_date": 1441799859, "answer_id": 32478959, "question_id": 32478314, "link": "https://stackoverflow.com/questions/32478314/invalid-initializer-error/32478959#32478959", "title": "&quot;Invalid initializer&quot; error", "body": "<p>The initializers for an array must be constant initializer-list. <code>s</code> being a <code>char</code>-array <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.9p14\" rel=\"nofollow\">requires</a> a string-literal or a constant array-initializer.</p>\n\n<p>gcc has an extension, allowing auto-variables to be initialized with non-constant expressions, so it might work for gcc. Other compilers (e.g. clang) might(!) also allow this. Either way, you need to have extensions enabled.</p>\n\n<p>This is true for all ISO-C versions (links are for C11).</p>\n\n<p>You <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.9p11\" rel=\"nofollow\">can</a>, however, use <code>char *s</code> (<code>const char *</code> if you only use string-literals). This allows to use a normal expression, including non-constant.</p>\n"}], "owner": {"reputation": 41, "user_id": 4902617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55866aae9ed08226571c28029da6a6c?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/4902617/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7353, "favorite_count": 0, "closed_date": 1441800470, "accepted_answer_id": 32478438, "answer_count": 2, "score": -1, "last_activity_date": 1441807230, "creation_date": 1441798076, "last_edit_date": 1441807230, "question_id": 32478314, "link": "https://stackoverflow.com/questions/32478314/invalid-initializer-error", "closed_reason": "Not suitable for this site", "title": "&quot;Invalid initializer&quot; error", "body": "<p>Why doesn't this compile? I get:</p>\n\n<blockquote>\n  <p>[Error] invalid initializer</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    int i = 2;\n    char s[100] = (i == 2)? \"botton\":\"bottle\";\n    printf (\"%c\", s[0]);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 7, "creation_date": 1441796666, "post_id": 32477810, "comment_id": 52816298, "body": "You made the extremely serious mistake of not checking the return values of your I/O functions (<code>scanf</code>, <code>printf</code>). You won&#39;t get anywhere in programming if you don&#39;t check return values."}, {"owner": {"reputation": 59, "user_id": 5316723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de331f2b5144a5000efc5624eda674a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5316723/daniel"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1441895953, "post_id": 32477810, "comment_id": 52869070, "body": "Sorry I&#39;m not sure what you mean... What return value didn&#39;t I check? How should I improve it?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1441897438, "post_id": 32477810, "comment_id": 52870131, "body": "Read the manual for <code>scanf</code>. See what it returns, and what assumptions you can make on its effects given its return values."}, {"owner": {"reputation": 59, "user_id": 5316723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de331f2b5144a5000efc5624eda674a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5316723/daniel"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1441901074, "post_id": 32477810, "comment_id": 52872511, "body": "Got it. Its working now thanks"}], "answers": [{"comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1441798855, "post_id": 32477877, "comment_id": 52817787, "body": "The change to <code>scanf(&quot;%f&quot;, &amp;num1);</code> is not required. Both the <code>scanf</code> do the same thing regardless of the space."}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 2, "last_activity_date": 1441796745, "creation_date": 1441796745, "answer_id": 32477877, "question_id": 32477810, "link": "https://stackoverflow.com/questions/32477810/do-while-loops-in-c/32477877#32477877", "title": "Do While Loops in C", "body": "<pre><code>scanf(\" %f\", &amp;num1);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>scanf(\"%f\", &amp;num1);\n</code></pre>\n\n<p>and check the return value of <code>scanf()</code></p>\n\n<pre><code>if(scanf(\"%f\", &amp;num1) != 1)\n{\n  printf(\"scanf failed\\n\");\n}\n</code></pre>\n\n<p>When you enter <code>N</code> or <code>\\n</code> you should be able to exit the loop after this</p>\n"}, {"comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1441799019, "post_id": 32477927, "comment_id": 52817909, "body": "Remove <code>choice  != &#39;\\n&#39;</code> as it will never be true."}], "tags": [], "owner": {"reputation": 2718, "user_id": 4934077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e5DyJ.png?s=128&g=1", "display_name": "Mario Zannone", "link": "https://stackoverflow.com/users/4934077/mario-zannone"}, "is_accepted": false, "score": 4, "last_activity_date": 1441796889, "creation_date": 1441796889, "answer_id": 32477927, "question_id": 32477810, "link": "https://stackoverflow.com/questions/32477810/do-while-loops-in-c/32477927#32477927", "title": "Do While Loops in C", "body": "<p>It will stop running if you type <strong>N</strong> (<code>'N'</code>) or <strong>Enter</strong> (<code>'\\n'</code>). If you want to stop it typing a lowercase <strong>n</strong> (<code>'n'</code>) too, you should write:</p>\n\n<pre><code>while (choice != 'N' &amp;&amp; choice != 'n' &amp;&amp; choice  != '\\n');\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 445, "user_id": 3541556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3ed40683f468a504fb1ff3c881095e9?s=128&d=identicon&r=PG&f=1", "display_name": "suren", "link": "https://stackoverflow.com/users/3541556/suren"}, "edited": false, "score": 1, "creation_date": 1441803028, "post_id": 32479963, "comment_id": 52820861, "body": "why -1 is given for the answer?please at stackoverflow.com give me the reason when you putting -1 on my reply"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1469948207, "post_id": 32479963, "comment_id": 64742577, "body": "Not my down-vote, but it might well be that you&#39;ve not said anything very different from what the other two answers give, but you submitted your answer an hour and a half after the other two.  You also haven&#39;t given a very detailed explanation of the changes you made.  The indentation is a bit erratic too."}], "tags": [], "owner": {"reputation": 445, "user_id": 3541556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3ed40683f468a504fb1ff3c881095e9?s=128&d=identicon&r=PG&f=1", "display_name": "suren", "link": "https://stackoverflow.com/users/3541556/suren"}, "is_accepted": false, "score": -1, "last_activity_date": 1483048956, "last_edit_date": 1483048956, "creation_date": 1441802847, "answer_id": 32479963, "question_id": 32477810, "link": "https://stackoverflow.com/questions/32477810/do-while-loops-in-c/32479963#32479963", "title": "Do While Loops in C", "body": "<p>The mistake you had made that is about <code>scanf</code> statement. The running code for your program is below:</p>\n\n<pre><code>       #include &lt;stdio.h&gt;\n       int main() {\n       float num1, num2, result;\n       char choice;\n       do {\n           num1 = num2 = result = 0;\n           printf(\"first number?\\n\");\n           scanf(\"%f\", &amp;num1);\n           printf(\"second number?\\n\");\n           scanf(\"%f\", &amp;num2);\n           result = num1*num2;\n           printf(\"ans = %.0f\\n\", result);\n           printf(\"do you want to enter another pair of numbers?  (Y/N)\\n\");\n           scanf(\"%c\", &amp;choice);\n           } while (choice != 'N' &amp;&amp; choice  != 'n');\n           return 0;\n           }\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 5316723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de331f2b5144a5000efc5624eda674a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5316723/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1483048956, "creation_date": 1441796567, "last_edit_date": 1469948470, "question_id": 32477810, "link": "https://stackoverflow.com/questions/32477810/do-while-loops-in-c", "title": "Do While Loops in C", "body": "<p>I know this is a probably a very simple question but I've asked a few experienced people and they can't figure it out and they don't know why. It's just a simple do while loop that's actually straight out of a book \"Absolute Beginner's Guide to C\". When it runs and you type <code>n</code> for entering more numbers, it keeps running. How do you get it to exit the loop? I'm using XCode on a Mac and it's using C.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\nfloat num1, num2, result;\nchar choice;\ndo {\n    num1 = num2 = result = 0;\n    printf(\"first number?\\n\");\n    scanf(\" %f\", &amp;num1);\n    printf(\"second number?\\n\");\n    scanf(\" %f\", &amp;num2);\n    result = num1*num2;\n    printf(\"ans = %.0f\\n\", result);\n    printf(\"do you want to enter another pair of numbers? (Y/N)\\n\");\n    scanf(\" %c\", &amp;choice);\n\n} while (choice != 'N' &amp;&amp; choice  != '\\n');\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1441796679, "post_id": 32477786, "comment_id": 52816303, "body": "Welcome to stackoverflow.com. Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. You might also want to learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 2, "creation_date": 1441797060, "post_id": 32477786, "comment_id": 52816571, "body": "@Uday: Yes, but that&#39;s a built-in string function, which OP doesn&#39;t want to use."}, {"owner": {"reputation": 4220, "user_id": 1353930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eb10a7255a6d7fa4a4068d05c53ac0fa?s=128&d=identicon&r=PG", "display_name": "Daniel Alder", "link": "https://stackoverflow.com/users/1353930/daniel-alder"}, "edited": false, "score": 0, "creation_date": 1441797588, "post_id": 32477786, "comment_id": 52816941, "body": "The filename and function names are identical to what was asked and answered in <a href=\"http://stackoverflow.com/questions/6921105/get-file-name-from-a-path-string-in-c-sharp\" title=\"get file name from a path string in c sharp\">stackoverflow.com/questions/6921105/&hellip;</a>. Did you start with this question? Please note that you are speaking about C (not C#) which doesn&#39;t have a <code>GetFileName()</code> function nor a <code>string</code> class..."}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1441799844, "post_id": 32478116, "comment_id": 52818521, "body": "This <code>&#39;\\&#39;</code> should be <code>&#39;\\\\&#39;</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1441800845, "post_id": 32478116, "comment_id": 52819223, "body": "I&#39;d say using <code>strlen()</code> us not allowed."}], "tags": [], "owner": {"reputation": 4544, "user_id": 4226457, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PTjuI.png?s=128&g=1", "display_name": "dimlucas", "link": "https://stackoverflow.com/users/4226457/dimlucas"}, "is_accepted": false, "score": 0, "last_activity_date": 1441797428, "creation_date": 1441797428, "answer_id": 32478116, "question_id": 32477786, "link": "https://stackoverflow.com/questions/32477786/get-file-name-from-a-path-string-implementation-in-c/32478116#32478116", "title": "Get file name from a path string implementation in C", "body": "<p>Starting at the end of the path you can copy characters from the path to another string until you find the '\\' character. So after the while loop the <code>reverseFileName</code> string will be <code>'txt.olleH'</code>. The for loop reverses the <code>'txt.olleH'</code> to <code>'Hello.txt'</code></p>\n\n<pre><code>char* GetFileName(char[] path)\n{\n      char *reverseFileName = malloc(100*sizeof(char));\n      int len = strlen(path);\n      int i=len-1;\n      int j=0;\n      while( (path[i] != '\\') &amp;&amp; (i&gt;=0) )\n      {\n        reverseFileName[j] = fileName[i];\n        i--;\n        j++;\n      }\n      reverseFileName[j+1]='\\0';\n      int reverseLength = strlen(reverseFileName)\n      char *fileName = malloc( (reverseLength+1)*sizeof(char) );\n      j=0;\n      for(i=reverseLength-1; i&gt;=0; i++)\n      {\n        fileName[j] = reverseFileName[i];\n        j++;\n      }\n      free(reverseFileName);\n      return fileName;\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1441800900, "post_id": 32478153, "comment_id": 52819258, "body": "I&#39;d implement to versions, one for windows one for unix."}, {"owner": {"reputation": 19, "user_id": 5316728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bde0e2607d5cf9feb849e67e87cfc24?s=128&d=identicon&r=PG&f=1", "display_name": "Avishi", "link": "https://stackoverflow.com/users/5316728/avishi"}, "edited": false, "score": 0, "creation_date": 1441802070, "post_id": 32478153, "comment_id": 52820123, "body": "with above code value of  retVal is coming &quot;: Program Files hello.txt&quot; but output required only filename means &quot;hello.txt&quot;"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 1, "creation_date": 1441802813, "post_id": 32478153, "comment_id": 52820685, "body": "Did you put the string in your code? Remember that you need to escape <code>\\ </code>.  The string will be <code>char path[] = &quot;C:\\\\Program Files\\\\hello.txt&quot;</code> in a C program."}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 2, "last_activity_date": 1441800028, "last_edit_date": 1441800028, "creation_date": 1441797563, "answer_id": 32478153, "question_id": 32477786, "link": "https://stackoverflow.com/questions/32477786/get-file-name-from-a-path-string-implementation-in-c/32478153#32478153", "title": "Get file name from a path string implementation in C", "body": "<p>Loop through the string looking for the last separator. If <code>/</code>, <code>\\</code> and <code>:</code> are valid path separators (Windows):</p>\n\n<pre><code>char *getFileName(char *path) {\n    char *retVal = path, p;\n    for (p = path; *p; p++) {\n        if (*p == '/' || *p == '\\\\' || *p == ':') {\n            retVal = p;\n        }\n    }\n    return retVal;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1441800898, "post_id": 32478632, "comment_id": 52819256, "body": "@KlasLindb&#228;ck True. I&#39;ll fix it. Thanks."}], "tags": [], "owner": {"reputation": 2762, "user_id": 1928852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emKlb.png?s=128&g=1", "display_name": "Enzo Ferber", "link": "https://stackoverflow.com/users/1928852/enzo-ferber"}, "is_accepted": false, "score": 2, "last_activity_date": 1441800960, "last_edit_date": 1495535194, "creation_date": 1441798965, "answer_id": 32478632, "question_id": 32477786, "link": "https://stackoverflow.com/questions/32477786/get-file-name-from-a-path-string-implementation-in-c/32478632#32478632", "title": "Get file name from a path string implementation in C", "body": "<p>Without using built-in string functions, I assume you can't use <code>strlen</code> or <code>strdup</code>. The simplest way you can achieve that is:</p>\n\n<pre><code>char *fname(char *path)\n{\n    char *aux = path;\n\n    /* Go to end of string, so you don't need strlen */\n    while (*path++) ;\n\n    /* Find the last occurence of \\ */\n    while (*path-- != '\\\\' &amp;&amp; path != aux) ;\n\n    /* It must ignore the \\ */\n    return (aux == path) ? path : path + 2;\n}\n</code></pre>\n\n<p><br>\n<hr> \n<br>\n<strong>EDIT:</strong> Thanks to <a href=\"https://stackoverflow.com/users/646887/klas-lindb%C3%A4ck\">Klas Lindb\u00e4ck</a> for pointing out that the original function had no boundary check and would fail in case the provided <code>path</code> had no occurrence of <code>\\\\</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 5316728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bde0e2607d5cf9feb849e67e87cfc24?s=128&d=identicon&r=PG&f=1", "display_name": "Avishi", "link": "https://stackoverflow.com/users/5316728/avishi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1548, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1441800960, "creation_date": 1441796527, "question_id": 32477786, "link": "https://stackoverflow.com/questions/32477786/get-file-name-from-a-path-string-implementation-in-c", "title": "Get file name from a path string implementation in C", "body": "<p>Can any one please tell me how to implement GetFileName() function in C without using string inbuilt function of C. For example\nC:\\Program Files\\hello.txt</p>\n\n<p>output : hello.txt</p>\n"}, {"tags": ["c", "maze", "recursive-backtracking"], "comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 1, "creation_date": 1441796295, "post_id": 32477653, "comment_id": 52816073, "body": "Run your code through a debugger, you should find the error."}, {"owner": {"reputation": 4248, "user_id": 443878, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/YiNTB.jpg?s=128&g=1", "display_name": "OopsUser", "link": "https://stackoverflow.com/users/443878/oopsuser"}, "edited": false, "score": 0, "creation_date": 1441796434, "post_id": 32477653, "comment_id": 52816140, "body": "Try to run it with a small maze of 3 X 3, does it work ? Try to debug it. What line crushes ?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1441796748, "post_id": 32477653, "comment_id": 52816360, "body": "<code>if(v&gt;=0||v&lt;30||h&gt;=0||h&lt;30||myMap[v][h]!=&#39;.&#39;||myVisited[v][h]&zwnj;&#8203;==&#39;*&#39;)return true;</code> You are confusing and and or here."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1441798022, "post_id": 32477653, "comment_id": 52817237, "body": "You are using the parameter <code>v</code> as a loop variable and later treat it as input again, when it might hold an index beyond the end of the board. Recipe for disaster."}, {"owner": {"reputation": 11, "user_id": 5263204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a33a91a38ba8a1e9ac0a7a799905dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor ", "link": "https://stackoverflow.com/users/5263204/taylor"}, "edited": false, "score": 0, "creation_date": 1441798129, "post_id": 32477653, "comment_id": 52817312, "body": "I have fixed isSafe as Itay suggest but, the map print out only starting point and nothing else. Does something wrong with my find_path????"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5263204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a33a91a38ba8a1e9ac0a7a799905dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor ", "link": "https://stackoverflow.com/users/5263204/taylor"}, "edited": false, "score": 0, "creation_date": 1441798071, "post_id": 32478081, "comment_id": 52817272, "body": "thank, It has no more segmentation error but the map only print the starting point , nothing else.Does something wrong with my find_path function"}, {"owner": {"reputation": 532, "user_id": 1835951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b6a1bc568a2e7da75c55447b84f897f?s=128&d=identicon&r=PG", "display_name": "NiBZ", "link": "https://stackoverflow.com/users/1835951/nibz"}, "edited": false, "score": 1, "creation_date": 1441804161, "post_id": 32478081, "comment_id": 52821716, "body": "In this case, the <code>myMap[v][h]</code> and <code>myVisited[v][h]</code> will always be evaluated, even when <code>v</code> or <code>h</code> is out of range. A one liner (<code>bool ret_val = (v&gt;=0) &amp;&amp; (v&lt;30) ... &amp;&amp; (myVisited[v][h] == &#39;*&#39;);</code>) will stop evaluation at the first false condition."}, {"owner": {"reputation": 11, "user_id": 5263204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a33a91a38ba8a1e9ac0a7a799905dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor ", "link": "https://stackoverflow.com/users/5263204/taylor"}, "edited": false, "score": 0, "creation_date": 1441807062, "post_id": 32478081, "comment_id": 52823896, "body": "Do you know anything wrong with my find_path function?? it seemed not working????"}, {"owner": {"reputation": 904, "user_id": 4004688, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1002512873/picture?type=large", "display_name": "Itay Sela", "link": "https://stackoverflow.com/users/4004688/itay-sela"}, "edited": false, "score": 0, "creation_date": 1441808048, "post_id": 32478081, "comment_id": 52824629, "body": "i think you ment it to be <code>myVisited[ v ][ h ] != &#39;*&#39;</code>"}], "tags": [], "owner": {"reputation": 904, "user_id": 4004688, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1002512873/picture?type=large", "display_name": "Itay Sela", "link": "https://stackoverflow.com/users/4004688/itay-sela"}, "is_accepted": false, "score": 0, "last_activity_date": 1441808020, "last_edit_date": 1441808020, "creation_date": 1441797345, "answer_id": 32478081, "question_id": 32477653, "link": "https://stackoverflow.com/questions/32477653/backtracking-maze-solver-in-c/32478081#32478081", "title": "Backtracking maze solver in C", "body": "<p>try using this</p>\n\n<pre><code>bool isSafe( char myMap[ 30 ][ 30 ], char myVisited[ 30 ][ 30 ], int v,int h ) {\n    bool ret_val = true;\n\n    ret_val = ( v &gt;= 0 ) &amp;&amp; ( v &lt; 30 ) &amp;&amp; ( h &gt;= 0 ) &amp;&amp; ( h &gt; 30 ) &amp;&amp; ( myMap[ v ][ h ] != '.' ) &amp;&amp; ( myVisited[ v ][ h ] != '*' );\n\n    return ret_val;\n</code></pre>\n\n<p>}</p>\n\n<p>EDITED: thanks @NiBZ - it seems a bit more messy but it won't cause seg faults now</p>\n"}], "owner": {"reputation": 11, "user_id": 5263204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a33a91a38ba8a1e9ac0a7a799905dfb?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor ", "link": "https://stackoverflow.com/users/5263204/taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1022, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1441808020, "creation_date": 1441796158, "last_edit_date": 1441796293, "question_id": 32477653, "link": "https://stackoverflow.com/questions/32477653/backtracking-maze-solver-in-c", "title": "Backtracking maze solver in C", "body": "<p>I am writing the find path solution for maze [30][30]\nI used backtracking in path find function; \nHere is pseudo code:</p>\n\n<p><code>bool find_path(myMap,myVisited,myPath,v,h)</code></p>\n\n<ol>\n<li>find starting point <code>[v,h]</code> then run <code>find_path</code> function for that point</li>\n<li>mark the room as visited</li>\n<li>terminate condition 1: if <code>h=29</code>, mark on path then return true</li>\n<li>recursion part: search for 8 neighbors: west,northwest,north,northeast,east,southeast, south,southwest.\ncheck if the room is accessible, then call find_path function, if it return true, mark on find path.</li>\n<li>terminate condition 2: return false.</li>\n</ol>\n\n<p>When I run it, it always give segmentation fault. I had tried different method but all give same errors? \nthe output should be like this image:\n<a href=\"http://postimg.org/image/cd8unwet5/\" rel=\"nofollow\">http://postimg.org/image/cd8unwet5/</a>\nhere is my code:</p>\n\n<pre><code>// myMap ='.' is a block on map\n//myVisited ='*' room visited\nbool isSafe(char myMap[30][30], char myVisited[30][30], int v,int h){\nif(v&gt;=0||v&lt;30||h&gt;=0||h&lt;30||myMap[v][h]!='.'||myVisited[v][h]=='*')return true;\n    return false;}\n\n//3 map\n//myMap contain the maze\n//myVisited use to mark room visited\n//myPath is final path.\nbool find_path(char myMap[30][30],char myVisited[30][30],char myPath[30][30], int v,int h){\n//giving h=-1 and v=-1 , find starting point.\n    if(h==-1&amp;&amp;v==-1){\n        h=h+1;\n        for (v=0;v&lt;30;v++){\n        if(myMap[v][h]!='.'&amp;&amp; h==0) {find_path(myMap,myVisited,myPath,v,h);}\n        }\n\n    }\n\n    myVisited[v][h]='*';    //mark room as visited.\n    if(h==29){              //stop when column is 29 and mark on path\n        myPath[v][h]='*';\n        return true;}\n\n    if(isSafe(myMap,myVisited,v,h-1)==true){                //if room is okie to access\n        if(find_path(myMap,myVisited,myPath,v,h-1)==true){  // there is way out \n        myPath[v][h]='*';           //mark on myPath\n        }\n    }\n    //.......same code for other room\n\n    if(isSafe(myMap,myVisited,v,h+1)==true){                //if room is okie to access\n        if(find_path(myMap,myVisited,myPath,v,h+1)==true){  // there is way out \n        myPath[v][h]='*';           //mark on myPath\n        }\n    }   \n    if(isSafe(myMap,myVisited,v-1,h)==true){                //if room is okie to access\n        if(find_path(myMap,myVisited,myPath,v-1,h)==true){  // there is way out \n        myPath[v][h]='*';           //mark on myPath\n        }\n    }\n    if(isSafe(myMap,myVisited,v+1,h)==true){                //if room is okie to access\n        if(find_path(myMap,myVisited,myPath,v+1,h)==true){  // there is way out \n        myPath[v][h]='*';           //mark on myPath\n        }\n    }\n    if(isSafe(myMap,myVisited,v+1,h-1)==true){              //if room is okie to access\n        if(find_path(myMap,myVisited,myPath,v,h-1)==true){  // there is way out \n        myPath[v][h]='*';           //mark on myPath\n        }\n    }\n        if(isSafe(myMap,myVisited,v-1,h-1)==true){              //if room is okie to access\n        if(find_path(myMap,myVisited,myPath,v-1,h-1)==true){    // there is way out \n        myPath[v][h]='*';           //mark on myPath\n        }\n    }\n            if(isSafe(myMap,myVisited,v-1,h+1)==true){              //if room is okie to access\n        if(find_path(myMap,myVisited,myPath,v-1,h+1)==true){    // there is way out \n        myPath[v][h]='*';           //mark on myPath\n        }\n    }\n    myVisited[v][h]='.';\n        return false;//back track \nreturn false;}\n</code></pre>\n"}, {"tags": ["c", "linux", "kernel", "dma", "userspace"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441795676, "post_id": 32477090, "comment_id": 52815665, "body": "Why not just update the buffer address for the screen-refresh? Copying is nonsense and DMA will likely not be the solution! Just calculate the transferrate you need - be it DMA or CPU. Btw: you cannot use DMA from user-space. If you think for 5sec, you should find out the reason why."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1441802134, "post_id": 32477090, "comment_id": 52820178, "body": "It seems like you are copying data from a double buffer to frame buffer, rather  than double buffering the frame buffer?"}, {"owner": {"reputation": 55, "user_id": 3567227, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9feede3a46f54935b9f60022238bb79f?s=128&d=identicon&r=PG&f=1", "display_name": "thecoder", "link": "https://stackoverflow.com/users/3567227/thecoder"}, "edited": false, "score": 1, "creation_date": 1441802438, "post_id": 32477090, "comment_id": 52820392, "body": "Olaf, thanks for the reply, but there is no need to be condescending. Obviously i have thought about it for more than 5sec, otherwise i wouldn&#39;t be asking here. The framebuffer device doesn&#39;t have the ability to double-buffer (using the FBIOPAN_DISPLAY IOCTL is not possible) so i have to allocate it on the heap. Unless there is another way?"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 3567227, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9feede3a46f54935b9f60022238bb79f?s=128&d=identicon&r=PG&f=1", "display_name": "thecoder", "link": "https://stackoverflow.com/users/3567227/thecoder"}, "edited": false, "score": 1, "creation_date": 1441826561, "post_id": 32486812, "comment_id": 52835849, "body": "Its a Freescale iMX28 which uses the MXS framebuffer driver. Using FBIOPUT_VSCREENINFO to extend the virtual framebuffer to twice the LCD height returns true, but then re-reading FBIOGET_VSCREENINFO shows the virtual area as being back to the orignal LCD height. Using FBIOPAN_DISPLAY always returns an error. So it appears the Kernel MXS FB driver is buggy or incomplete."}], "tags": [], "owner": {"reputation": 924, "user_id": 2873201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZTyhS.jpg?s=128&g=1", "display_name": "sqr163", "link": "https://stackoverflow.com/users/2873201/sqr163"}, "is_accepted": false, "score": 0, "last_activity_date": 1441823458, "creation_date": 1441823458, "answer_id": 32486812, "question_id": 32477090, "link": "https://stackoverflow.com/questions/32477090/linux-userspace-dma-access-for-memory-memory-copy/32486812#32486812", "title": "Linux userspace DMA access (for memory-memory copy)", "body": "<p>The proper way of what you are doing is not to copy memory at all, but just use your embedded display controller feature to read next frame from another mem buffer.</p>\n\n<p>Ensure you SoC has/doesn't have this feature. I'm 80% sure it has.</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1441865453, "creation_date": 1441865453, "answer_id": 32494384, "question_id": 32477090, "link": "https://stackoverflow.com/questions/32477090/linux-userspace-dma-access-for-memory-memory-copy/32494384#32494384", "title": "Linux userspace DMA access (for memory-memory copy)", "body": "<p>this information, from: <a href=\"http://pandorawiki.org/Kernel_interface\" rel=\"nofollow\">http://pandorawiki.org/Kernel_interface</a></p>\n\n<p>may be helpful></p>\n\n<p>framebuffer interface</p>\n\n<p>Framebuffers can be accessed Linux fbdev interface:</p>\n\n<p>fbdev = open(\"/dev/fb0\", O_RDWR);\nbuffer = mmap(0, 800*480*2, PROT_READ | PROT_WRITE, MAP_SHARED, fbdev, 0);</p>\n\n<p>(this is basic example, no error checks)</p>\n\n<p>the returned pointer can be used to draw on the screen.</p>\n\n<p>Be sure to #include  to get access to the FB device ioctl interface, and  for access to ioctl itself.\ndouble buffering</p>\n\n<p>This can be achieved using FBIOPAN_DISPLAY ioctl system call. For this you need to mmap framebuffer of double size</p>\n\n<p>buffer1 = mmap(0, 800*480*2 * 2, PROT_WRITE, MAP_SHARED, fbdev, 0);\nbuffer2 = (char *)mem + 800*480*2;</p>\n\n<p>Then to display buffer2 you would call:</p>\n\n<p>struct fb_var_screeninfo fbvar;\nioctl(fbdev, FBIOGET_VSCREENINFO, &amp;fbvar);\nfbvar.yoffset = 480;\nioctl(fbdev, FBIOPAN_DISPLAY, &amp;fbvar);</p>\n\n<p>going back to buffer1 would be repeating above with fbvar.yoffset = 0. Tripple or quad buffering can be implemented using the same technique. </p>\n"}], "owner": {"reputation": 55, "user_id": 3567227, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9feede3a46f54935b9f60022238bb79f?s=128&d=identicon&r=PG&f=1", "display_name": "thecoder", "link": "https://stackoverflow.com/users/3567227/thecoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1459, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1441865453, "creation_date": 1441794441, "last_edit_date": 1441794715, "question_id": 32477090, "link": "https://stackoverflow.com/questions/32477090/linux-userspace-dma-access-for-memory-memory-copy", "title": "Linux userspace DMA access (for memory-memory copy)", "body": "<p>My embedded ARM device has a 800x480 16 bit Linux framebuffer LCD which needs to be double-buffered manually.\nAt the moment I'm just using <code>memcpy()</code> to write the double buffer to the framebuffer which is awfully slow. A <code>while(1){memcpy(lfb,dbuf)}</code> loop maxes out the CPU at 100% and updates at approx 40 FPS.</p>\n\n<p>The ARM device I'm using, and the Linux kernel does support DMA memory-memory copy, but I'm having trouble working out how I can access this in a userspace program.</p>\n\n<p>It seems <code>linux/dmaengine.h</code> and <code>dma_async_memcpy_buf_to_buf()</code> is what I need to use, but it appears these are only available from within the kernel?</p>\n"}, {"tags": ["c", "function", "pointers", "memory-leaks", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 1110, "user_id": 831128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2c698fdd2222ecccc49d2cc35c8607c?s=128&d=identicon&r=PG", "display_name": "Isa A", "link": "https://stackoverflow.com/users/831128/isa-a"}, "edited": false, "score": 0, "creation_date": 1441794365, "post_id": 32476967, "comment_id": 52814788, "body": "as long as there is no call to <code>free()</code>, the allocated memory will not be freed. Until the end of process&#39;s execution."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1441795565, "post_id": 32476967, "comment_id": 52815581, "body": "You can&#39;t do <i>anything</i> after returning a value. The code is unreachable and will never be executed."}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1441795567, "post_id": 32476967, "comment_id": 52815583, "body": "you can as long as you have a reference to the memory ( or simply pointer to allocated block ), Oh by the way did you just mean free statement after return ? or is it a free after returning from a function ? quite a few answers/comments are based on former rather than later."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5188486, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/52cb6ac1c775c3ae568aa29cec168945?s=128&d=identicon&r=PG&f=1", "display_name": "Kiran C K", "link": "https://stackoverflow.com/users/5188486/kiran-c-k"}, "edited": false, "score": 0, "creation_date": 1441794985, "post_id": 32477222, "comment_id": 52815190, "body": "What should i do to free memory here?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 61, "user_id": 5188486, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/52cb6ac1c775c3ae568aa29cec168945?s=128&d=identicon&r=PG&f=1", "display_name": "Kiran C K", "link": "https://stackoverflow.com/users/5188486/kiran-c-k"}, "edited": false, "score": 1, "creation_date": 1441796526, "post_id": 32477222, "comment_id": 52816197, "body": "@KiranCK Write a separate function with the purpose of cleaning up the mess. It is better however to leave the allocation to the caller. Or better still, don&#39;t use dynamic allocation at all, as there is absolutely no need for it in the code you posted."}], "tags": [], "owner": {"reputation": 1110, "user_id": 831128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2c698fdd2222ecccc49d2cc35c8607c?s=128&d=identicon&r=PG", "display_name": "Isa A", "link": "https://stackoverflow.com/users/831128/isa-a"}, "is_accepted": false, "score": 2, "last_activity_date": 1441795949, "last_edit_date": 1441795949, "creation_date": 1441794877, "answer_id": 32477222, "question_id": 32476967, "link": "https://stackoverflow.com/questions/32476967/can-we-use-free-after-returning-a-value-in-functions/32477222#32477222", "title": "Can we use free () after returning a value in functions?", "body": "<p>You can't do this</p>\n\n<pre><code>char *chrdate(struct weather *wdt, int loop)\n{\n   char *stdate = (char*)calloc(11,sizeof(char));\n   sprintf(stdate, \"%d/%d/%d\", (wdt+loop)-&gt;day,(wdt+loop)-&gt;month,(wdt+loop)-&gt;year);\n   return stdate; // your function execution end here\n   free(stdate); // the execution won't reach here\n}\n</code></pre>\n\n<p><code>chrdate</code> returns a pointer to memory you have allocated and assigned it to </p>\n\n<pre><code>(pinfo+loop)-&gt;date = chrdate(pinfo, loop);\n</code></pre>\n\n<p>You don't want to <code>free()</code> it since you will use it next.</p>\n\n<pre><code>for (loop = 0; loop&lt;4; loop++)\n{\n  printf(\"%s\\n\",info[loop].date); // still use it here\n}\n</code></pre>\n\n<p>Instead, you should call <code>free((pinfo+loop)-&gt;date)</code> when you have finished using that memory. </p>\n"}], "owner": {"reputation": 61, "user_id": 5188486, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/52cb6ac1c775c3ae568aa29cec168945?s=128&d=identicon&r=PG&f=1", "display_name": "Kiran C K", "link": "https://stackoverflow.com/users/5188486/kiran-c-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441796233, "creation_date": 1441794064, "last_edit_date": 1441794672, "question_id": 32476967, "link": "https://stackoverflow.com/questions/32476967/can-we-use-free-after-returning-a-value-in-functions", "title": "Can we use free () after returning a value in functions?", "body": "<p>In a function that returns char,  memory has to be allocated dynamically. But can we free the memory using free () after returning a value back to the calling function?</p>\n\n<p>//Program to print today's and last 3 days weather data in a structure</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct weather\n{\n     char *date;\n     int month;\n     int day;\n     int year;\n     unsigned int h_temp;\n     unsigned int l_temp;\n     int max_wind_speed;\n     int preciption;\n     char notes [80];\n};\n\nchar *chrdate(struct weather *wdt, int loop)\n{\n    char *stdate = (char*)calloc(11,sizeof(char));\n    sprintf(stdate, \"%d/%d/%d\", (wdt+loop)-&gt;day,(wdt+loop)-&gt;month,(wdt+loop)-&gt;year);\n    return stdate;\n    free(stdate);\n}\n\nvoid prev_date(int loop, struct weather *pdate)\n{\n    int lmonth =  (pdate+(loop-1))-&gt;month-1; //assigning previous day's month to local variable\n\n    if ( ((pdate+(loop-1))-&gt;day == 1) &amp;&amp; ((pdate+(loop-1))-&gt;month == 1) )\n    {\n        (pdate+loop)-&gt;year = (pdate+(loop-1))-&gt;year-1 ;\n\n        (pdate+loop)-&gt;month = 12;\n\n        (pdate+loop)-&gt;day = 31;\n    }\n    else if (((pdate+(loop-1))-&gt;day == 1) &amp;&amp; ((pdate+(loop-1))-&gt;month != 1))\n    {\n        (pdate+loop)-&gt;year = (pdate+(loop-1))-&gt;year ;\n        (pdate+loop)-&gt;month = (pdate+(loop-1))-&gt;month-1 ;\n\n        //assigned month as per struct tm\n        if ( (lmonth == 4) || (lmonth == 6) || (lmonth == 9) || (lmonth == 11) )\n        {\n            (pdate+(loop))-&gt;day = 30; //assigning 30 days for respective months\n        }\n        //checking for leap year and assigning days for february\n        else if (lmonth == 2)\n        {\n            if ((pdate+(loop-1))-&gt;year % 4 == 0)\n            {\n                (pdate+(loop))-&gt;day = 29;\n            }\n            else\n            {\n                (pdate+(loop))-&gt;day = 28;\n            }\n        }\n        //assigning days for rest of the months\n        else\n        {\n        (pdate+(loop))-&gt;day = 31;\n        }\n    }\n    else if (   (pdate+(loop-1))-&gt;day != 1)\n    {\n        (pdate+loop)-&gt;year = (pdate+(loop-1))-&gt;year ;\n        (pdate+loop)-&gt;month = (pdate+(loop-1))-&gt;month;\n        (pdate+loop)-&gt;day = (pdate+(loop-1))-&gt;day-1;\n    }\n}\n\nvoid collect_data (struct weather *pinfo)\n{\n     int loop;\n     char yes_no[2];\n\n     time_t curtime; //declaring time variable\n\n     //storing current system time in the time variable\n     time(&amp;curtime);\n\n     //storing current time to time structure\n     struct tm * wdate = localtime (&amp;curtime);\n\n\n     for (loop=0;loop&lt;4;loop++)\n     {\n            if (loop == 0)\n            {\n                (pinfo+loop)-&gt;day = wdate-&gt;tm_mday;\n                (pinfo+loop)-&gt;month = wdate-&gt;tm_mon+1;\n                (pinfo+loop)-&gt;year = wdate-&gt;tm_year+1900;               ;\n            }\n            else\n            {\n            prev_date(loop,pinfo);\n            }\n\n            (pinfo+loop)-&gt;date = chrdate(pinfo, loop);\n\n            if (loop == 0)\n            {\n                printf(\"Today's weather details\\n\");\n                printf(\"-----------------------\\n\");\n            }\n            else\n            {\n                printf(\"\\n\\nEnter weather data for %s\\n\",(pinfo+loop)-&gt;date);\n                printf(\"------------------------------------\");\n            }\n\n          printf(\"\\nEnter the high temperature of the day:\");\n          scanf(\"\\n%d\",&amp;(pinfo+loop)-&gt;h_temp);\n          printf(\"\\nEnter the low temperature of the day:\");\n          scanf(\"\\n%d\",&amp;(pinfo+loop)-&gt;l_temp);\n          printf(\"\\nEnter the maximum wind speed of the day:\");\n          scanf(\"\\n%d\",&amp;(pinfo+loop)-&gt;max_wind_speed);\n          printf(\"\\nEnter the perciption of the day:\");\n          scanf(\"\\n%d\",&amp;(pinfo+loop)-&gt;preciption);\n          printf(\"\\nDo you have any notes about the weather of the day (y/n):\");\n          scanf(\"\\n%[^\\n]s\",yes_no);\n\n          if (strcmp(yes_no,\"y\")==0)\n          {\n                printf(\"\\nNotes (Max Characters to be used is 80 incl. spaces):\\n\");\n                scanf(\"\\n%79[^\\n]s\",(pinfo+loop)-&gt;notes);\n          }\n          else\n          {\n            printf(\"Notes are blank. Processing save...\");\n          }\n     }\n}\n\nint main ()\n{\n     struct weather info [4];\n     int loop;\n     collect_data(info);\n\n     for (loop = 0; loop&lt;4; loop++)\n     {\n     printf(\"%s\\n\",info[loop].date);\n     }\n\n     return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 41370, "user_id": 252591, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/06407bae4ac071e63df00ec6e34ed5ac?s=128&d=identicon&r=PG", "display_name": "Crozin", "link": "https://stackoverflow.com/users/252591/crozin"}, "edited": false, "score": 6, "creation_date": 1441794292, "post_id": 32476921, "comment_id": 52814751, "body": "The use of indicies outside the array&#39;s boundaries is <a href=\"https://www.google.pl/webhp?sourceid=chrome-instant&amp;ion=1&amp;espv=2&amp;ie=UTF-8#q=c%20undefined%20behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a>. You cannot except any IDE do anything."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1441794409, "post_id": 32476921, "comment_id": 52814813, "body": "What is the compiler of codeblocs?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441795958, "post_id": 32476921, "comment_id": 52815843, "body": "Think about the implications of <b>undefined</b> <i>behaviour</i>."}], "answers": [{"tags": [], "owner": {"reputation": 1476, "user_id": 538994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06ab054203c7f091fb770b8fdc75b953?s=128&d=identicon&r=PG", "display_name": "dpi", "link": "https://stackoverflow.com/users/538994/dpi"}, "is_accepted": true, "score": 0, "last_activity_date": 1441805792, "creation_date": 1441805792, "answer_id": 32481095, "question_id": 32476921, "link": "https://stackoverflow.com/questions/32476921/array-out-of-the-index-boundaries/32481095#32481095", "title": "Array: out of the index/boundaries", "body": "<p>Codeblocks, like most IDEs, does not contain a compiler and won't generate warnings like this by itself. Instead it calls a command-line compiler like gcc, and displays to you the errors and warnings the compiler returns.</p>\n\n<p>You should check what compiler is called, with what compiler options, in Codeblocks/project settings.</p>\n\n<p>gcc should generate an <em>\"array subscript is above array bounds\"</em> warning for your code, but only with the <code>-Wall</code> and <code>-O2</code> options (or equivalent).</p>\n\n<p>Optimization (<code>-O2</code>) is often not enabled for debugging, which could be an explanation why you don't get the warning <em>while debugging</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "is_accepted": false, "score": 0, "last_activity_date": 1441806178, "creation_date": 1441806178, "answer_id": 32481241, "question_id": 32476921, "link": "https://stackoverflow.com/questions/32476921/array-out-of-the-index-boundaries/32481241#32481241", "title": "Array: out of the index/boundaries", "body": "<blockquote>\n  <p>When you access an array index, C and C++ don't do bound checking. The values you get when you read are just what happens to exist on the <em>stack</em> at this particular place. They are completely undefined.</p>\n</blockquote>\n\n<p>The difference between the two compilers is possibly due to the fact that one of those is a newer version including some array bound checking.</p>\n"}], "owner": {"reputation": 35, "user_id": 5239583, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DZ5br5QZYkg/AAAAAAAAAAI/AAAAAAAAAGE/MeIzBrY7foI/photo.jpg?sz=128", "display_name": "Astro", "link": "https://stackoverflow.com/users/5239583/astro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "closed_date": 1441806508, "accepted_answer_id": 32481095, "answer_count": 2, "score": -2, "last_activity_date": 1441808839, "creation_date": 1441793912, "last_edit_date": 1441808839, "question_id": 32476921, "link": "https://stackoverflow.com/questions/32476921/array-out-of-the-index-boundaries", "closed_reason": "Duplicate", "title": "Array: out of the index/boundaries", "body": "<p>In the following code, I've assigned values to an array elements which are out of the array boundaries, In <em>Linux</em> environment in the <em>CLI</em> the code give me the error message: <code>array index 5 is past the end of the array which contains 5 elements</code>. </p>\n\n<p>But while debugging on <em>IDE</em> codeblocks -compiler cannot find this bug- so is there any explanation?</p>\n\n<pre><code>#include &lt;stdio.h&gt; \nint main ()\n{\n   int array[5],i;\n   for (i=0; i&lt;5; i++) {\n      array[i] = i+1; \n   }\n   array[5] = 666;\n\n   for (i=0; i&lt;5; i++) {\n      printf(\"array[%d]=%d\\n\", i, array[i]);\n   } \n   printf(\"array[5]=%d\\n\", array[5]);\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "edited": false, "score": 0, "creation_date": 1441794247, "post_id": 32476844, "comment_id": 52814725, "body": "struct Node <i>newNode = (struct Node</i>)malloc(sizeof(struct Node)); - please please don&#39;t cast the result of malloc,"}, {"owner": {"reputation": 47, "user_id": 4098633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88478a62eb7f6997ab8feccbee705ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Howard", "link": "https://stackoverflow.com/users/4098633/blake-howard"}, "reply_to_user": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "edited": false, "score": 0, "creation_date": 1441794551, "post_id": 32476844, "comment_id": 52814901, "body": "@TomTanner, Hmm that bit was added due to my professor doing it that way. I can remove it, but can I ask why?"}, {"owner": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "edited": false, "score": 0, "creation_date": 1441794873, "post_id": 32476844, "comment_id": 52815114, "body": "See here <a href=\"http://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc\" title=\"specifically whats dangerous about casting the result of malloc\">stackoverflow.com/questions/1565496/&hellip;</a> - it&#39;s unnecessary and can cause strange runtime errors. And it makes the code harder to read"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 4098633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88478a62eb7f6997ab8feccbee705ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Howard", "link": "https://stackoverflow.com/users/4098633/blake-howard"}, "edited": false, "score": 0, "creation_date": 1441795255, "post_id": 32477160, "comment_id": 52815361, "body": "Thanks for the clean up of cons_node, and the advice. And yep you were right. I need to sleep, haha. Thank you."}, {"owner": {"reputation": 47, "user_id": 4098633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88478a62eb7f6997ab8feccbee705ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Howard", "link": "https://stackoverflow.com/users/4098633/blake-howard"}, "edited": false, "score": 0, "creation_date": 1441796463, "post_id": 32477160, "comment_id": 52816158, "body": "If it&#39;s not too much trouble, could you throw out a guess as to why vorpal_func is seg faulting as well?"}, {"owner": {"reputation": 902, "user_id": 2930834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3fb0c80b48851aebbf884acf364a795?s=128&d=identicon&r=PG&f=1", "display_name": "Nakul", "link": "https://stackoverflow.com/users/2930834/nakul"}, "reply_to_user": {"reputation": 47, "user_id": 4098633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88478a62eb7f6997ab8feccbee705ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Howard", "link": "https://stackoverflow.com/users/4098633/blake-howard"}, "edited": false, "score": 0, "creation_date": 1441798566, "post_id": 32477160, "comment_id": 52817592, "body": "@BlakeHoward it is good not to pass your head pointer directly to function. It those function modifies the head you won&#39;t get the starting of the linked list. Instead take head value in temp variable and pass those."}, {"owner": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "reply_to_user": {"reputation": 47, "user_id": 4098633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88478a62eb7f6997ab8feccbee705ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Howard", "link": "https://stackoverflow.com/users/4098633/blake-howard"}, "edited": false, "score": 0, "creation_date": 1441810223, "post_id": 32477160, "comment_id": 52826437, "body": "@BlakeHoward not sure where / how it&#39;s being called, I can only presume it&#39;s being passed a bad pointer"}], "tags": [], "owner": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "is_accepted": true, "score": 2, "last_activity_date": 1441795101, "last_edit_date": 1441795101, "creation_date": 1441794679, "answer_id": 32477160, "question_id": 32476844, "link": "https://stackoverflow.com/questions/32476844/segfault-while-printing-linked-list-after-stack-clear/32477160#32477160", "title": "Segfault while printing linked list after stack clear", "body": "<p>You don't clear your head after calling clear_stack, so when you add your next node, the next pointer is set to something that points into memory that has been freed. Or you could pass a pointer to head to clear_stack if you preferred.</p>\n\n<pre><code>void clear_stack(struct Node **head)\n{\n    while (*head != NULL) \n    {\n        Node *current = *head;\n        *head = current-&gt;next;\n        free(current);\n    }\n}\n</code></pre>\n\n<p>In passing, cons_node could be written like this</p>\n\n<pre><code>void cons_node(struct Node **head, int num)\n{\n    struct Node *newNode = malloc(sizeof(struct Node));\n    newNode-&gt;val = num;\n    newNode-&gt;next = *head;\n    *head = newNode;\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 4098633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88478a62eb7f6997ab8feccbee705ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Howard", "link": "https://stackoverflow.com/users/4098633/blake-howard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 32477160, "answer_count": 1, "score": 0, "last_activity_date": 1441796552, "creation_date": 1441793751, "last_edit_date": 1441796552, "question_id": 32476844, "link": "https://stackoverflow.com/questions/32476844/segfault-while-printing-linked-list-after-stack-clear", "title": "Segfault while printing linked list after stack clear", "body": "<p>To be more specific, this code is supposed to be a lesser clone of the Unix function dc. The linked list seems to be working fine. If I attempt to use c to clear the memory, add more numbers, then print again with f I get a segfault. It seems to be printing what should be the Null Node in the linked list. </p>\n\n<pre><code>Interaction:\n$ ./test\n1 2 3\nf\n3\n2\n1\nc\n4 5\nf\n5\n4\n0\nSegmentation Fault\n</code></pre>\n\n<p>Here's the code itself: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct Node{\n  int val;\n  struct Node *next;\n};\n\nvoid cons_node(struct Node **head, int num)\n{\n  struct Node *newNode = malloc(sizeof(struct Node));\n  newNode-&gt;val = num;\n  newNode-&gt;next = NULL;\n  if (*head == NULL){\n    *head = newNode;\n  }\n  else {\n    newNode-&gt;next = *head;\n    *head = newNode;\n  }\n}\n</code></pre>\n\n<p>I'm assuming the problem lies here in the display func:</p>\n\n<pre><code>void display_list(struct Node *head)\n{\n  struct Node *current = head;\n  while(current != NULL)\n    {\n      printf(\"%d\\n\", current-&gt;val);\n      current = current-&gt;next;}\n\n}\n\nvoid print_top(struct Node *head)\n{\n  printf(\"%d\\n\", head-&gt;val);\n}\n</code></pre>\n\n<p>or here in the clear func:</p>\n\n<pre><code>void clear_stack(struct Node *head)\n{\n  struct Node *current;\n  while ((current = head)!= NULL) {\n    head = head-&gt;next;\n    free(current);\n  }\n}\n\nvoid vorpal_func(struct Node *head)\n{ \n  struct Node *current;\n  current = head;\n  free(current);\n}\nint main(){\n\n  int input;\n  int first = 1;\n  char quit = 'n';\n  char inputchar = ' ';\n\n  struct Node *head = NULL;\n\n  while (quit == 'n'){\n\n    if (scanf(\"%d\", &amp;input) == 1){\n      cons_node(&amp;head, input);\n      first = 0;\n    }\n\n    else{\n      inputchar = getchar();\n\n      if(first == 1)\n    printf(\"List is empty\\n\");\n\n      else{\n    switch (inputchar){\n    case 'q':\n      quit = 'y';\n      break;\n    case 'E':\n      quit = 'y';\n      break;\n    case 'f':\n      display_list(head);\n      break;\n    case 'p':\n      print_top(head);\n      break;\n    case 'c':\n      clear_stack(head);\n      first = 1;\n      break;\n    case 't':\n      vorpal_func(head);\n      break;\n    }\n      }\n    }\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>I've been attempting to figure out the problem for a few hours now. Any tips?</p>\n"}, {"tags": ["c", "embedded"], "comments": [{"owner": {"reputation": 182, "user_id": 5184415, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203025935607711/picture?type=large", "display_name": "venki", "link": "https://stackoverflow.com/users/5184415/venki"}, "edited": false, "score": 0, "creation_date": 1441791102, "post_id": 32475804, "comment_id": 52812545, "body": "why you include <code>if</code> block inside <code>switch</code>?"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 182, "user_id": 5184415, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203025935607711/picture?type=large", "display_name": "venki", "link": "https://stackoverflow.com/users/5184415/venki"}, "edited": false, "score": 0, "creation_date": 1441791218, "post_id": 32475804, "comment_id": 52812624, "body": "@venki to prevent, as I said in the OP, the cases getting invoked in case the state is present in which the sync isnt ensured."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1441793403, "post_id": 32475804, "comment_id": 52814166, "body": "Did you know the <code>if</code> block never executes?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1441793429, "post_id": 32475804, "comment_id": 52814179, "body": "This code makes no sense to me."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 1, "creation_date": 1441793589, "post_id": 32475804, "comment_id": 52814284, "body": "I noticed it after Santosh pointed me on... I&#39;m fixing the snippet, 1 moment."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1441794138, "post_id": 32475804, "comment_id": 52814655, "body": "Since there is no benefit of this in any way (since it isn&#39;t even working as expected... don&#39;t know how I came across the idea it could) I decided to capsulate now each case with that if. What will blow up the code but At least won&#39;t create any confusion+ do ing the job aswell."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1441796433, "post_id": 32475804, "comment_id": 52816138, "body": "Do not compare with <code>bool</code> constants! That is hard to read. Instead use the value directly as condition (here, you have to negate): <code>if ( !RunIndexSyncedWithADCensured )</code>"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441796513, "post_id": 32475804, "comment_id": 52816187, "body": "@Olaf: whats wrong with it given the stdbool.h is included?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441796552, "post_id": 32475804, "comment_id": 52816210, "body": "I did not write not to use <code>bool</code>! Read my proposed version out loud (reading the <code>!</code> as &quot;not&quot;)."}], "answers": [{"tags": [], "owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "is_accepted": true, "score": 4, "last_activity_date": 1441800131, "last_edit_date": 1441800131, "creation_date": 1441792340, "answer_id": 32476367, "question_id": 32475804, "link": "https://stackoverflow.com/questions/32475804/is-there-any-better-implementation-for-this-switch-case-construct/32476367#32476367", "title": "Is there any better implementation for this switch case construct?", "body": "<p>Firstly, the <code>if()</code> inside <code>switch()</code> will never be executed.<br>\nConsider the below code snippet:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int i = 2;\n\n    switch(i) {\n        if (i == 2) {\n            printf(\"I M HERE\\n\");\n        }\n        case 1:\n            printf(\"1\\n\");\n        break;\n        case 2:\n            printf(\"2\\n\");\n        break;\n        default:\n            printf(\"default\\n\");\n        break;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>For your code: you expect the string <strong><code>I M HERE</code></strong> to be printed. But that is not the case. <br>\nThe output for the above code snippet is:</p>\n\n<pre><code>2\n</code></pre>\n\n<p><strong><code>No statements before case/default(switch constructs): is executed inside switch</code></strong></p>\n\n<p>Now to answer for </p>\n\n<blockquote>\n  <p>I don't want to get any of the cases get invoked. But I still need to acces and increment the argument of the switch<br></p>\n</blockquote>\n\n<p>Just move the <code>if()</code> outside to the switch().</p>\n\n<pre><code>if (RunIndexSyncedWithADCensured) {\n    switch (RunIndex++) {\n        case 0:\n            Case0RelatedData = SomeOperationsForCase0(RawData);\n            break;\n            /* Other cases here */\n        default:\n           RunIndex = 0;\n           break;\n    }\n} else\n    RunIndex++;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 1, "creation_date": 1441799635, "post_id": 32478550, "comment_id": 52818381, "body": "In the first statement, it first reads and stores the value of RunIndex in runIndex, and then it increments. So you do not need to -1. I don&#39;t see any problems in terms of efficiency in any of the code snippets here."}], "tags": [], "owner": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "is_accepted": false, "score": 1, "last_activity_date": 1441798732, "creation_date": 1441798732, "answer_id": 32478550, "question_id": 32475804, "link": "https://stackoverflow.com/questions/32475804/is-there-any-better-implementation-for-this-switch-case-construct/32478550#32478550", "title": "Is there any better implementation for this switch case construct?", "body": "<p>Why not save the value first and then increment it and use the saved value in the switch? By the way this also includes two accesses, first to read the value from RunIndex and the second to increment it.</p>\n\n<pre><code>int runIndex = (RunIndex++);\nif (RunIndexSyncedWithADCensured )\n{\n    switch (runIndex)/*RunIndex may only be accessed one time per execution\n    of this construct and has to be incremented in the same step. thats given.*/\n    {\n        case 0:\n            Case0RelatedData = SomeOperationsForCase0(RawData);\n            break;\n        case 1:\n            Case1RelatedData = SomeOperationsForCase1(RawData);\n            break;\n        case 2:\n           Case2RelatedData = SomeOperationsForCase2(RawData);\n           break;\n        default:\n           RunIndex = 0;\n           break;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1441808490, "post_id": 32481823, "comment_id": 52824995, "body": "But in this code you are reading multiple times from RunIndex and are working with it, aren&#39;t you? It looks prety readable, thats nice. But I guess thoose function calls would decrease the performance isntead of the switch case variant, wouldn&#39;t they?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1441809169, "post_id": 32481823, "comment_id": 52825567, "body": "@Zaibis This code is equivalent to your original code, save for the if statement fix. As I said, the optimizer will likely turn your switch into something like the above, especially if the switch is large."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 1, "creation_date": 1441809286, "post_id": 32481823, "comment_id": 52825662, "body": "@Zaibis As usual when performance comes up, it is useless to discuss it without a very specific system in mind. You should write readable code, period. If you do consider performance, you have to consider how much time the integer comparisons take in relation to how much time a function call takes, and then you also have to consider how much the code above improved branch prediction. Also, the compiler might be able to do inlining somehow, although they usually aren&#39;t when it comes to function pointers."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1441809897, "post_id": 32481823, "comment_id": 52826200, "body": "I absolutley aggree about readable code and the inlining/function pointer stuff. But I don&#39;t aggre that the code is the same. In your snippet I see RunIndex&#39;s value getting accessed/read at least 2 times if there is no sync and 3 times when it is synced. this would be fatal for my system since the controller is going to start the next conversion as soon as the RunIndex is read. So your code would just discard and desync a lot of conversions. (Remember I&#39;m talking about an embedded system, not about an OS application)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1441810434, "post_id": 32481823, "comment_id": 52826609, "body": "@Zaibis You should have made it clear it is a volatile variable then. You&#39;d have to read it into a temporary variable. Anyway, that&#39;s another issue entirely: how to properly use hardware registers in embedded systems. I&#39;ll update with an example."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1441810584, "last_edit_date": 1441810584, "creation_date": 1441807647, "answer_id": 32481823, "question_id": 32475804, "link": "https://stackoverflow.com/questions/32475804/is-there-any-better-implementation-for-this-switch-case-construct/32481823#32481823", "title": "Is there any better implementation for this switch case construct?", "body": "<p>Since you are using adjacent index numbers, you could make an array of function pointers to replace the switch. That's what the optimizer will turn the switch into anyhow. So instead of your obscure switch, you get this:</p>\n\n<pre><code>if (RunIndexSyncedWithADCensured)\n{\n  SomeOperationsForCase[RunIndex](RawData);\n}\n\nRunIndex++;\nif (RunIndex &gt; MAX)\n{\n  RunIndex = 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Completely unrelated to the switch statement design: in case <code>RunIndex</code> is a sensitive volatile variable such as some hardware register, then you shouldn't use it directly in any form of computations. Make a copy of it:</p>\n\n<pre><code>volatile int RunIndex; \n...\n\nint index = RunIndex; // read from RunIndex\n\nif (RunIndexSyncedWithADCensured)\n{\n  SomeOperationsForCase[index](RawData);\n}\n\nindex++;\nif (index &gt; MAX)\n{\n  index  = 0;\n}\n\nRunIndex = index; // write to RunIndex\n</code></pre>\n\n<p>This is standard practice for all such volatile variables.</p>\n"}], "owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 32476367, "answer_count": 3, "score": 1, "last_activity_date": 1441810584, "creation_date": 1441790765, "last_edit_date": 1441792048, "question_id": 32475804, "link": "https://stackoverflow.com/questions/32475804/is-there-any-better-implementation-for-this-switch-case-construct", "title": "Is there any better implementation for this switch case construct?", "body": "<p>I'm working on an embedded system where a register hast to be accessed and after that to be incremented to achieve the result I'm looking for, since the machine is notifying and configured to react on my access and changing or not changing the flag. So the <code>switch</code>'s argument has to be kept as it is, since it would otherwise change the behaving of the embedded system.</p>\n\n<p>But there may occur a situation where I don't want to get any of the cases get invoked. But I still need to acces and increment the argument of the <code>switch</code>.</p>\n\n<p>(More indepth I'm converting a sequence of analog values to digital values conversions step by step. The index is used to stay synchronized with the current conversion and relating it with the corresponding case to handle the figure correct. There may occur a state in which the index desynchronisizes to the current conversion so the sequence of conversions must be run through without any of the cases getting invoked (to prevent setting wrong data) untill the sequence is finished and the resynchroinisation can get performed)</p>\n\n<p>The way I'm currently doing this is this:</p>\n\n<pre><code>switch (RunIndex++)/*RunIndex may only be accessed one time per execution\nof this construct and has to be incremented in the same step. thats given.*/\n{\n   if (RunIndexSyncedWithADCensured == false)\n   {\n     break;\n   }\n   case 0:\n     Case0RelatedData = SomeOperationsForCase0(RawData);\n     break;\n   case 1:\n     Case1RelatedData = SomeOperationsForCase1(RawData);\n     break;\n   case 2:\n     Case2RelatedData = SomeOperationsForCase2(RawData);\n     break;\n   default:\n     RunIndex = 0;\n     break;\n}\n</code></pre>\n\n<p>This construct does the job but it looks like it is a bit controversial and I don't feel well by considering about committing this into productinal code.</p>\n\n<p>So is there a better looking way to achieve the same, without the need of additional variables or assignements?</p>\n\n<p><strong>note:</strong></p>\n\n<p>Also it may be relevant, that this is in the first part of a interupt function consisting of 2 parts.\nThe first part handles what has to happen <code>if()</code> a conversion is finished. The second part, what has additional to be done <code>if()</code> this conversion also ended the sequence. So it is no option to simply return from the function without getting into the second part. and there is currently no loop structure where an <code>if(...)break;</code> may break out. (What is also the reason why I'm putting the if inside the switch scope, as it is at least by standard a valid way to break out.)</p>\n"}, {"tags": ["c", "operator-precedence", "post-increment"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 4, "creation_date": 1441790286, "post_id": 32475598, "comment_id": 52811962, "body": "Working and not working code are the same,..."}, {"owner": {"reputation": 3, "user_id": 5295837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a6cb44091fc34ecf942f5e9debdac7a?s=128&d=identicon&r=PG&f=1", "display_name": "igal", "link": "https://stackoverflow.com/users/5295837/igal"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1441790370, "post_id": 32475598, "comment_id": 52812019, "body": "Thanks ive fixed the post"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1441790718, "post_id": 32475598, "comment_id": 52812270, "body": "<a href=\"http://stackoverflow.com/questions/8250684/operator-precedence-in-c-with-pointers\">THIS</a> could explain you something."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1441790762, "post_id": 32475598, "comment_id": 52812308, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/484462/difference-between-i-and-i-in-a-loop\">Difference between i++ and ++i in a loop?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1441792433, "post_id": 32475895, "comment_id": 52813503, "body": "That is bad code - human cognitive limits restrict the number of things a human mind can track at any one time to about 5 to 7 things.  All those operators stuffed into two lines makes for nasty bugs that are all but impossible to figure out.  See <a href=\"https://en.wikipedia.org/wiki/The_Magical_Number_Seven,_Plus_or_Minus_Two\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}, {"owner": {"reputation": 812, "user_id": 1939603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95133f43356efeac439619cff2fc5312?s=128&d=identicon&r=PG", "display_name": "Manuel Miranda", "link": "https://stackoverflow.com/users/1939603/manuel-miranda"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1441792555, "post_id": 32475895, "comment_id": 52813602, "body": "I agree with you, but it&#39;s the structure that the OP requested and it&#39;s not my job here to guess why or why not he does need it like this."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1441792986, "post_id": 32475895, "comment_id": 52813883, "body": "The inner parentheses are redundant."}, {"owner": {"reputation": 3, "user_id": 5295837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a6cb44091fc34ecf942f5e9debdac7a?s=128&d=identicon&r=PG&f=1", "display_name": "igal", "link": "https://stackoverflow.com/users/5295837/igal"}, "edited": false, "score": 0, "creation_date": 1441793932, "post_id": 32475895, "comment_id": 52814512, "body": "@ManuelMiranda Thanks a lot Manuel, i&#39;ve confused my self and didn&#39;t pay attention to this little detail, thanks."}], "tags": [], "owner": {"reputation": 812, "user_id": 1939603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95133f43356efeac439619cff2fc5312?s=128&d=identicon&r=PG", "display_name": "Manuel Miranda", "link": "https://stackoverflow.com/users/1939603/manuel-miranda"}, "is_accepted": true, "score": 2, "last_activity_date": 1441791508, "last_edit_date": 1441791508, "creation_date": 1441791003, "answer_id": 32475895, "question_id": 32475598, "link": "https://stackoverflow.com/questions/32475598/c-pointer-manipulation-in-switch-statement/32475895#32475895", "title": "C Pointer manipulation in switch statement", "body": "<p>Using the postincrement on a given variable in any expression causes the variable to increment <strong>after</strong> the expression has been evaluated. </p>\n\n<p>As stated by your first, working code, where you increment <code>argv</code> value <strong>before</strong> getting it's referenced value in the switch, you want the variable to be incremented <strong>before</strong> your expression is evaluated, so you need to use the preincrement:</p>\n\n<pre><code>while (--argc &gt; 0) \n        switch (**(++argv)) \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1441793026, "post_id": 32476571, "comment_id": 52813917, "body": "Remove redundant inner parentheses for even more succinct code."}, {"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1441793436, "post_id": 32476571, "comment_id": 52814185, "body": "@EOF removing the parentheses would indeed delete some clutter, but then it would be harder to understand in which order the operators are evaluated. I think all in all it would be <i>less</i> readable."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1441793609, "post_id": 32476571, "comment_id": 52814298, "body": "The OP probably wouldn&#39;t have asked the question if he didn&#39;t want shorter code. I feel he should get his wish (however questionable it may be)."}], "tags": [], "owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1441793284, "last_edit_date": 1441793284, "creation_date": 1441792967, "answer_id": 32476571, "question_id": 32475598, "link": "https://stackoverflow.com/questions/32475598/c-pointer-manipulation-in-switch-statement/32476571#32476571", "title": "C Pointer manipulation in switch statement", "body": "<p>I think you are being confused by the parentheses. Parentheses affect the order of evaluation, but you are using post increment, which is applied at the end, no matter what order the operators are evaluated.</p>\n\n<p>In your first snippet the order is clear: <strong>first</strong> you increase argv, <strong>then</strong> you dereference it. That is, you dereference the \"next\" element, not the current one.</p>\n\n<p>In your second snippet you want to achieve the same result, and you are playing with parentheses. This is not the solution. Parentheses affect the order in which the 2 operators (<code>++</code> and <code>**</code>) are <em>evaluated</em>, but this doesn't mean the effects are applied in that order.</p>\n\n<p>For example: if you wrote</p>\n\n<pre><code>switch ((**argv)++)\n</code></pre>\n\n<p>the compiler would apply <code>**</code> first, dereferencing it, giving you the content, and then it would apply <code>++</code> on it (obviously <code>argv</code> must be a data type which can be increased or there will be an error, but it doesn't matter here). Instead, if you write, as you did,</p>\n\n<pre><code>switch (**(argv++))\n</code></pre>\n\n<p>the increment (<code>++</code>) is applied first, and then the indirection (<code>**</code>). But here is the trick: <strong>post increment is still post increment</strong>. Applying the post increment here means: take the <em>current</em> value, and when everything is finished remember to increase it. So <code>argv</code> is used as it is, without increasing it (yet), and sent to <code>**</code>, which will give the <em>current</em> value (not the next one!). Then, after <code>switch</code> has read the current element, argv is increased (post-increment), so that if your <code>case</code>s printed <code>**argv</code> you would notice it's the \"next\" value.</p>\n\n<p>A solution is using pre-increment:</p>\n\n<pre><code>switch (**(++argv))\n</code></pre>\n\n<p>but if you ask me, <strong>the real solution is to avoid these headaches entirely and write the code in 2 separate lines</strong>, so that it's immediately obvious what happens. As you did in your first snippet. This is the most readable style, and therefore should be the preferred choice. Then you can forget about everything: order of evaluation, parentheses, pre- vs post-increment, associativity.</p>\n"}], "owner": {"reputation": 3, "user_id": 5295837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a6cb44091fc34ecf942f5e9debdac7a?s=128&d=identicon&r=PG&f=1", "display_name": "igal", "link": "https://stackoverflow.com/users/5295837/igal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 32475895, "answer_count": 2, "score": -5, "last_activity_date": 1441795070, "creation_date": 1441790141, "last_edit_date": 1441795070, "question_id": 32475598, "link": "https://stackoverflow.com/questions/32475598/c-pointer-manipulation-in-switch-statement", "title": "C Pointer manipulation in switch statement", "body": "<p>Hi folks i tried to program a simple switch statement and stuck uppon this problem.\nI cant figure out why this code works correctly, i guess it is because the precedence of the operators ** and ++.\nIf this is the case ill be happy if someone can write an example how should i use value-at * and inc/dec operator in a statement like below. </p>\n\n<p>Thanks in advance,</p>\n\n<pre><code>while (--argc &gt; 0) \n        argv++;\n        switch (**argv) \n</code></pre>\n\n<p>and this code dont</p>\n\n<pre><code>while (--argc &gt; 0) \n        switch (**(argv++)) \n</code></pre>\n\n<p>Full code:</p>\n\n<pre><code>while (--argc &gt; 0) {\n        switch (**(argv++)) {\n        case '\\0':\n            panic(\"empty command line argument\");\n            break;\n        case '0':\n        case '1':\n        case '2':\n        case '3':\n        case '4':\n        case '5':\n        case '6':\n        case '7':\n        case '8':\n        case '9':\n            push (atof(*argv));\n            break;\n        case '+':\n            push(pop() + pop());\n            break;\n        case '-':\n            op2 = pop();\n            push(pop() - op2);\n            break;\n        case '*':\n            push(pop() * pop());\n            break;\n        case '/':\n            op2 = pop();\n            push(pop() / op2);\n            break;\n        default:\n            panic(\"unknown command\");\n            break;\n        }\n    }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1441789926, "post_id": 32475478, "comment_id": 52811709, "body": "To begin with, change <code>char[5]=&#39;\\0&#39;</code> to <code>dest[4]=&#39;\\0&#39;</code>. Then, when calling <code>strtol</code>, I suppose you meant to pass <code>dest</code> (what is <code>str</code>?)."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1441790524, "post_id": 32475478, "comment_id": 52812140, "body": "Is <code>1234</code> <i>hex</i> data (in which case your <code>strtol()</code> should work fine), or <i>binary</i> data representing a four-byte <code>int</code>?"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1441790620, "post_id": 32475478, "comment_id": 52812211, "body": "@DevSolar: How can <code>&quot;1234&quot;</code> be binary data representing a four-byte <code>int</code>???"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1441790642, "post_id": 32475478, "comment_id": 52812225, "body": "No idea, his question doesn&#39;t make sense otherwise."}, {"owner": {"reputation": 182, "user_id": 5184415, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203025935607711/picture?type=large", "display_name": "venki", "link": "https://stackoverflow.com/users/5184415/venki"}, "edited": false, "score": 0, "creation_date": 1441790676, "post_id": 32475478, "comment_id": 52812241, "body": "<code>char dest[5]=&#39;\\0&#39;; </code> why you declared again <code>dest[]</code> and assigning <code>\\0</code> to 5th index?"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1441790701, "post_id": 32475478, "comment_id": 52812257, "body": "@DevSolar: I think OP simply can&#39;t find a way to make his/her code work as they want it to, that&#39;s all."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441811506, "post_id": 32475478, "comment_id": 52827387, "body": "Please clarify: Should code 1) read up to 4 hexadecimal characters as a C string and convert to an <code>int</code> or 2) read 4 bytes packed as a 4-byte <code>int</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1441793084, "post_id": 32476182, "comment_id": 52813963, "body": "This answer is 50% fixing unrelated (?) bugs and 50% crystal ball divination. Next time, please provide a <a href=\"http://stackoverflow.com/help/mcve\">minimal, complete, verifiable example</a>."}], "tags": [], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "is_accepted": false, "score": 1, "last_activity_date": 1441805145, "last_edit_date": 1441805145, "creation_date": 1441791848, "answer_id": 32476182, "question_id": 32475478, "link": "https://stackoverflow.com/questions/32475478/extracting-the-4-byte-of-char-from-char-string-and-convert-the-first-4-byte-to-i/32476182#32476182", "title": "extracting the 4 byte of char from char string and convert the first 4 byte to integer in c", "body": "<pre><code> char *x = \"1234 is a test\";\n</code></pre>\n\n<p>Depending on whether you can <strong>rely</strong> on the fifth character not being a hex digit, you might skip the copying, and aim <code>strtol()</code> at <code>x</code> directly. It will stop parsing at the first character that is not a valid digit in the base you selected.</p>\n\n<p>If you cannot rely on that, your copying code needs some cleaning up: <code>char dest[5]</code> declares an array with <em>five</em> elements, indices <strong>0</strong> through <strong>4</strong>, so <code>dest[5] = '\\0';</code> would be setting a non-existent <strong>sixth</strong> element to zero, resulting in undefined behaviour. The digits will reside in <code>dest[0]</code> through <code>dest[3]</code> after copying, so it is really <code>dest[4]</code> that you would want to zero.</p>\n\n<p>And drop the <code>char</code> in <code>char dest[4] = '\\0';</code>, otherwise you are redeclaring <code>dest</code>...</p>\n\n<pre><code>char dest[5];\nstrncpy( dest, x, 4 );\ndest[4] = '\\0';\n</code></pre>\n\n<p>Somewhat more elegant would be:</p>\n\n<pre><code>char dest[5] = { 0 }; // actually sets *all* elements to zero\nmemcpy( dest, x, 4 );\n</code></pre>\n\n<blockquote>\n  <p>i have tried using strtol(dest, &amp;ptr,16 );</p>\n</blockquote>\n\n<p>That should have worked, really. You did not show the code; from your comments that <code>strtol()</code> \"finds the numerical values and seperates\", I assume you were confused a bit and looked at <code>ptr</code> for the result. That is just a pointer at where <code>strtol()</code> stopped parsing. The <em>result</em> is <em>returned</em> by <code>strtol()</code>:</p>\n\n<pre><code>char * ptr;\nint i = strtol( dest, &amp;ptr, 16 );\n</code></pre>\n\n<p>If you are not interested in the end pointer, you can just pass <code>NULL</code>:</p>\n\n<pre><code>int i = strtol( dest, NULL, 16 );\n</code></pre>\n\n<hr>\n\n<p>If, indeed, the first 4 bytes are <em>not</em> hex digits at all, but the <em>binary</em> representation of an <code>int</code> (which your last paragraph edited in later <em>seems</em> to imply), the way to go about it would be a <code>union</code>.</p>\n\n<pre><code>union\n{\n    int ival;\n    char cval[4];\n} convert;\n\nmemcpy( &amp;convert.cval, x, 4 );\n\nint i = convert.ival;\n</code></pre>\n\n<p>This is, of course, assuming that <code>sizeof( int ) == 4</code> and that receiver has the same byte order (endianness) as the sender.. If not, you're in trouble, <code>unions</code> are tricky that way.</p>\n"}, {"comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1441805418, "post_id": 32478654, "comment_id": 52822650, "body": "Why would we want to reimplement (part of) the standard function the OP is already using in a non-portable way?"}], "tags": [], "owner": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "is_accepted": false, "score": -1, "last_activity_date": 1441799442, "last_edit_date": 1441799442, "creation_date": 1441799033, "answer_id": 32478654, "question_id": 32475478, "link": "https://stackoverflow.com/questions/32475478/extracting-the-4-byte-of-char-from-char-string-and-convert-the-first-4-byte-to-i/32478654#32478654", "title": "extracting the 4 byte of char from char string and convert the first 4 byte to integer in c", "body": "<p>Assuming first byte is the most significant byte:</p>\n\n<pre><code>int convert_char(char c) {\n    if (c &gt;= '0' &amp;&amp; c &lt;= '9') {\n        return c - '0';\n    }\n    else if (c &gt;= 'A' &amp;&amp; c &lt;= 'F') {\n        return (10 + c - 'A');\n    }\n    else  if (c &gt;= 'a' &amp;&amp; c &lt;= 'f') {\n        return (10 + c - 'a');\n    }\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>char *x = \"1234 is a test\";\nint y = 0;\ny = convert_char(x[0]) * 16 * 16 * 16 + convert_char(x[1]) * 16 * 16 + convert_char(x[2]) * 16 + convert_char(x[3]);\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 3545251, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/79c1629a7ad9ae8b953efce28418c3af?s=128&d=identicon&r=PG&f=1", "display_name": "user3545251", "link": "https://stackoverflow.com/users/3545251/user3545251"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1441805145, "creation_date": 1441789838, "last_edit_date": 1441804087, "question_id": 32475478, "link": "https://stackoverflow.com/questions/32475478/extracting-the-4-byte-of-char-from-char-string-and-convert-the-first-4-byte-to-i", "title": "extracting the 4 byte of char from char string and convert the first 4 byte to integer in c", "body": "<p>I have a string such as <code>char *x = \"1234 is a test\";</code> where the first 4 chars are hex digits that I need to extract as an integer.</p>\n\n<p>My approach is to extract the first 4 chars:</p>\n\n<pre><code>char dest[5];\nstrncpy(dest, x,4);\nchar dest[5]='\\0';\n</code></pre>\n\n<p>How can I convert this 4-char string to <code>int</code>?</p>\n\n<p>I have tried using <code>strtol(dest, &amp;ptr,16 );</code>, but <code>strtol</code> finds and converts numerical values.</p>\n\n<p>It appears that the string is obtained from network; thus without using <code>strtol</code>, I suppose to use hex to decimal conversion.  I need to first pack 4 chars into an <code>int</code> type and use this.</p>\n\n<p>How can I coalesce these 4 char to <code>int</code>?</p>\n"}, {"tags": ["c++", "c", "winapi"], "comments": [{"owner": {"reputation": 1430, "user_id": 1794089, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/H7xpF.jpg?s=128&g=1", "display_name": "eraxillan", "link": "https://stackoverflow.com/users/1794089/eraxillan"}, "edited": false, "score": 0, "creation_date": 1441789252, "post_id": 32474826, "comment_id": 52811266, "body": "You can just focus yours window first :)"}, {"owner": {"reputation": 9, "user_id": 5312397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6b413260bb27d892fda2e6045b5bc9e?s=128&d=identicon&r=PG&f=1", "display_name": "ishero", "link": "https://stackoverflow.com/users/5312397/ishero"}, "reply_to_user": {"reputation": 1430, "user_id": 1794089, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/H7xpF.jpg?s=128&g=1", "display_name": "eraxillan", "link": "https://stackoverflow.com/users/1794089/eraxillan"}, "edited": false, "score": 0, "creation_date": 1441790650, "post_id": 32474826, "comment_id": 52812232, "body": "I did so but couldn&#39;t get the result."}, {"owner": {"reputation": 9, "user_id": 5312397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6b413260bb27d892fda2e6045b5bc9e?s=128&d=identicon&r=PG&f=1", "display_name": "ishero", "link": "https://stackoverflow.com/users/5312397/ishero"}, "reply_to_user": {"reputation": 1430, "user_id": 1794089, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/H7xpF.jpg?s=128&g=1", "display_name": "eraxillan", "link": "https://stackoverflow.com/users/1794089/eraxillan"}, "edited": false, "score": 0, "creation_date": 1441790745, "post_id": 32474826, "comment_id": 52812289, "body": "SetWindowPos(hwnd, HWND_TOPMOST, 300, 300, 500, 350, SWP_SHOWWINDOW | SWP_NOMOVE | SWP_NOSIZE);SetForegroundWindow(hwnd); \t\t\t\t\t//SetActiveWindow(hwnd); \t\t\t\t\t//EnableWindow(hwnd, TRUE); \t\t\t\t\tSetFocus(hwnd);"}, {"owner": {"reputation": 1430, "user_id": 1794089, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/H7xpF.jpg?s=128&g=1", "display_name": "eraxillan", "link": "https://stackoverflow.com/users/1794089/eraxillan"}, "edited": false, "score": 0, "creation_date": 1441792359, "post_id": 32474826, "comment_id": 52813442, "body": "Please add this code to your original post. It&#39;s strange, i think SetFocus + GetPixel should do the job. Looks like we need to go deeper..."}, {"owner": {"reputation": 9, "user_id": 5312397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6b413260bb27d892fda2e6045b5bc9e?s=128&d=identicon&r=PG&f=1", "display_name": "ishero", "link": "https://stackoverflow.com/users/5312397/ishero"}, "reply_to_user": {"reputation": 1430, "user_id": 1794089, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/H7xpF.jpg?s=128&g=1", "display_name": "eraxillan", "link": "https://stackoverflow.com/users/1794089/eraxillan"}, "edited": false, "score": 0, "creation_date": 1441794220, "post_id": 32474826, "comment_id": 52814708, "body": "VOID GetDisplay(HWND&amp; hwnd, RECT&amp; area, COLORREF (*display)[1000]) { \t\tHDC hdc=GetDC(hwnd); \t\tfor(INT x=area.left;x&lt;=area.right;x++) { \t\t\tfor(int y=area.top;y&lt;=area.bottom;y++) { \t\t\t\tdisplay[x][y]=GetPixel(hdc, x, y); \t\t\t} \t\t} \t\tReleaseDC(hwnd, hdc); \t}   \t...  \tSetWindowPos(hwnd, HWND_TOPMOST, 300, 300, 500, 350, SWP_SHOWWINDOW | SWP_NOMOVE | SWP_NOSIZE); \tSetForegroundWindow(hwnd); \tSetActiveWindow(hwnd); \t//EnableWindow(hwnd, TRUE); \tSetFocus(hwnd); \t  \tGetDisplay(hwnd, within_wall, display);//trouble"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5312397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6b413260bb27d892fda2e6045b5bc9e?s=128&d=identicon&r=PG&f=1", "display_name": "ishero", "link": "https://stackoverflow.com/users/5312397/ishero"}, "edited": false, "score": 0, "creation_date": 1441951136, "post_id": 32477373, "comment_id": 52891124, "body": "PrintWindow is output the result of screen pixel.  I wanna read the result of screen pixel into variables or hdc or array.  I made the screen pixels  read into the memory device context and the result pixel color of memory dc into array.  But the result of array is black each elements"}], "tags": [], "owner": {"reputation": 33588, "user_id": 402169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2ec8fa642572c1d90a0dadf374811e4d?s=128&d=identicon&r=PG", "display_name": "tenfour", "link": "https://stackoverflow.com/users/402169/tenfour"}, "is_accepted": false, "score": 0, "last_activity_date": 1441795354, "creation_date": 1441795354, "answer_id": 32477373, "question_id": 32474826, "link": "https://stackoverflow.com/questions/32474826/how-can-i-get-the-pixel-of-the-covered-window/32477373#32477373", "title": "How can I get the pixel of the covered window?", "body": "<p>There's no 100% way to do it, as windows are not required to, and generally don't, draw obscured areas. You will not be able to make the desktop a foreground window of course. And focus has no effect on visibility, as someone has mentioned <code>SetFocus</code>. That would be ineffective.</p>\n\n<p>I have seen proposals to use <code>WM_PRINT</code> to access obscured pixels. Again this is not guaranteed, but the desktop window is pretty specific so if you get that to work, I guess it'll be somewhat reliable.</p>\n\n<p>For more on this, see: <a href=\"https://msdn.microsoft.com/en-us/library/dd162869(VS.85).aspx\" rel=\"nofollow\"><code>PrintWindow</code></a>.</p>\n\n<p>For what it's worth, <code>GetPixel</code> is extremely slow. You'll probably notice a performance problem in your code. You'll get much better performance by using methods like <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd144879%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>GetDIBits</code></a>.</p>\n"}], "owner": {"reputation": 9, "user_id": 5312397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6b413260bb27d892fda2e6045b5bc9e?s=128&d=identicon&r=PG&f=1", "display_name": "ishero", "link": "https://stackoverflow.com/users/5312397/ishero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 398, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1441795354, "creation_date": 1441787994, "last_edit_date": 1441794584, "question_id": 32474826, "link": "https://stackoverflow.com/questions/32474826/how-can-i-get-the-pixel-of-the-covered-window", "title": "How can I get the pixel of the covered window?", "body": "<p>I am using Visual Studio 2008 on Windows XP and studying C++. <br>\nI am curious about the getting pixel from desktop.<br>\nCan I get the screen pixel with <code>GetPixel</code> function in the case that the window is covered with another window?  In the status of my window being covered, I was trying to call the <code>GetPixel</code>:</p>\n\n<pre><code>GetPixel(hdc, x, y);\n</code></pre>\n\n<p>But this call dosen't retrieve the pixel of the original window but the covering window or other color one.  </p>\n\n<p>How can I get the pixel of the covered window?</p>\n\n<p>I add my code as the following ...</p>\n\n<pre><code>VOID GetDisplay(HWND&amp; hwnd, RECT&amp; area, COLORREF (*display)[1000]) {\n    HDC hdc=GetDC(hwnd);\n    for(INT x=area.left;x&lt;=area.right;x++) {\n        for(int y=area.top;y&lt;=area.bottom;y++) {\n            display[x][y]=GetPixel(hdc, x, y);\n        }\n    }\n    ReleaseDC(hwnd, hdc);\n}\n\n\n...\n\nSetWindowPos(hwnd, HWND_TOPMOST, 300, 300, 500, 350, SWP_SHOWWINDOW | SWP_NOMOVE | SWP_NOSIZE);\nSetForegroundWindow(hwnd);\nSetActiveWindow(hwnd);\n//EnableWindow(hwnd, TRUE);\nSetFocus(hwnd);\n\n\nGetDisplay(hwnd, within_wall, display);//trouble\n</code></pre>\n\n<p>The problem is causing on the GetPixel in GetDisplay.  GetPixel is returning the pixel color of the covering window.</p>\n"}, {"tags": ["c", "doxygen", "enumeration"], "answers": [{"tags": [], "owner": {"reputation": 119, "user_id": 5289220, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lFkB5DxLkl4/AAAAAAAAAAI/AAAAAAAAABQ/TTLB2D-zF98/photo.jpg?sz=128", "display_name": "Sukces Elektroniki", "link": "https://stackoverflow.com/users/5289220/sukces-elektroniki"}, "is_accepted": true, "score": 3, "last_activity_date": 1441787730, "creation_date": 1441787730, "answer_id": 32474738, "question_id": 32474580, "link": "https://stackoverflow.com/questions/32474580/doxygen-enum-table-is-generated-wrong/32474738#32474738", "title": "Doxygen enum table is generated wrong", "body": "<p>This is because you use type of comment that documents next member. Try</p>\n\n<pre><code>  RES_FREQ__0_5_HZ         =  8,   /*!&lt; 0.5   Hz -    2  s */\n</code></pre>\n\n<p>or</p>\n\n<pre><code>  RES_FREQ__0_5_HZ         =  8,    //!&lt; 0.5   Hz -    2  s\n</code></pre>\n\n<p>instead.</p>\n"}], "owner": {"reputation": 1775, "user_id": 500774, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/cfb3f903bf2055a665180244b7865f53?s=128&d=identicon&r=PG", "display_name": "fpdragon", "link": "https://stackoverflow.com/users/500774/fpdragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 32474738, "answer_count": 1, "score": 1, "last_activity_date": 1441787730, "creation_date": 1441787229, "question_id": 32474580, "link": "https://stackoverflow.com/questions/32474580/doxygen-enum-table-is-generated-wrong", "title": "Doxygen enum table is generated wrong", "body": "<p>I'm using Doxygen 1.8.10 with default generated Doxyfile to document a C sourcecode.</p>\n\n<p>The problem is that some enum tables are generated wrong. Here an example:</p>\n\n<pre><code>/*!Enum documentation\n */\ntypedef enum tagMODULE__E_SomeFreq\n{\n    RES_FREQ__0_001HZ        =  0,   /*!0.001 Hz - 1000  s */\n    RES_FREQ__0_002HZ        =  1,   /*!0.002 Hz -  500  s */\n    RES_FREQ__0_005HZ        =  2,   /*!0.005 Hz -  200  s */\n    RES_FREQ__0_01HZ         =  3,   /*!0.01  Hz -  100  s */\n    RES_FREQ__0_02HZ         =  4,   /*!0.02  Hz -   50  s */\n    RES_FREQ__0_05HZ         =  5,   /*!0.05  Hz -   20  s */\n    RES_FREQ__0_1_HZ         =  6,   /*!0.1   Hz -   10  s */\n    RES_FREQ__0_2_HZ         =  7,   /*!0.2   Hz -    5  s */\n    RES_FREQ__0_5_HZ         =  8,   /*!0.5   Hz -    2  s */\n    RES_FREQ__1_HZ           =  9,   /*!1     Hz -    1  s */\n    RES_FREQ__2_HZ           = 10,   /*!2     Hz -  0.5  s */\n    RES_FREQ__5_HZ           = 11,   /*!5     Hz -  0.2  s */\n    RES_FREQ__10_HZ          = 12,   /*!10    Hz -  0.1  s */\n    RES_FREQ__25_HZ          = 13,   /*!25    Hz -  0.04 s */\n    RES_FREQ__50_HZ          = 14,   /*!50    Hz -  0.02 s */\n    RES_FREQ__MAX                    /*!Always the last member of the enum */\n} MODULE__E_SomeFreq;\n</code></pre>\n\n<p>This code will be shown in doxygen as: (formatation is lost on copy paste)</p>\n\n<p>Resource distribution frequency to be selected. Note: corresponding distribution period must be a multiple of ME period </p>\n\n<p>Enumerator</p>\n\n<p>RES_FREQ__0_002HZ<br>\n0.001 Hz - 1000 s </p>\n\n<p>RES_FREQ__0_005HZ<br>\n0.002 Hz - 500 s </p>\n\n<p>RES_FREQ__0_01HZ<br>\n0.005 Hz - 200 s </p>\n\n<p>RES_FREQ__0_02HZ<br>\n0.01 Hz - 100 s </p>\n\n<p>RES_FREQ__0_05HZ<br>\n0.02 Hz - 50 s </p>\n\n<p>RES_FREQ__0_1_HZ<br>\n0.05 Hz - 20 s </p>\n\n<p>RES_FREQ__0_2_HZ<br>\n0.1 Hz - 10 s </p>\n\n<p>RES_FREQ__0_5_HZ<br>\n0.2 Hz - 5 s </p>\n\n<p>RES_FREQ__1_HZ<br>\n0.5 Hz - 2 s </p>\n\n<p>RES_FREQ__2_HZ<br>\n1 Hz - 1 s </p>\n\n<p>RES_FREQ__5_HZ<br>\n2 Hz - 0.5 s </p>\n\n<p>RES_FREQ__10_HZ<br>\n5 Hz - 0.2 s </p>\n\n<p>RES_FREQ__25_HZ<br>\n10 Hz - 0.1 s </p>\n\n<p>RES_FREQ__50_HZ<br>\n25 Hz - 0.04 s </p>\n\n<p>RES_FREQ__MAX<br>\n50 Hz - 0.02 s\nAlways the last member of the enum </p>\n\n<p>I guess you can see it, that the comment values are taken for the NEXT line value instead of the value left to it.</p>\n\n<p>The second thing is that the real physical values are not shown. (0 to 14)</p>\n\n<p>Hope you can help.</p>\n"}, {"tags": ["c", "arrays", "pass-by-reference"], "comments": [{"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 1, "creation_date": 1441787074, "post_id": 32474476, "comment_id": 52809873, "body": "Given that <code>(void*) a = &amp;someArray[x];</code> is not valid I doubt you see that that often."}, {"owner": {"reputation": 39, "user_id": 5316102, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2yYWnm0MO1I/AAAAAAAAAAI/AAAAAAAAAAA/YwKmPLi52lI/photo.jpg?sz=128", "display_name": "Randolf", "link": "https://stackoverflow.com/users/5316102/randolf"}, "reply_to_user": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1441787539, "post_id": 32474476, "comment_id": 52810159, "body": "right, sorry, I was trying to be figurative. What I meant is  void *a; int someArray[10]; a = &amp;someArray[x];  or  someFunction(&amp;someArray[x])"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 4, "creation_date": 1441787693, "post_id": 32474476, "comment_id": 52810244, "body": "Post a real (not figurative) example that demonstrates the problem. The parentheses won&#39;t make a difference."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 2, "creation_date": 1441787878, "post_id": 32474476, "comment_id": 52810370, "body": "Interestingly enough, gcc up to 3.x had a <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.4.6/gcc/Lvalues.html\" rel=\"nofollow noreferrer\"><i>generalized lvalues</i></a> extension. The above would be interpreted as <code>(void *)(a = &amp;someArray[x])</code>. No longer supported by gcc 4 and above, fortunately. And yes, <code>[]</code> has higher preference than <code>&amp;</code>. If the compiler does it differently, the compiler is broken."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1441790424, "post_id": 32474476, "comment_id": 52812061, "body": "Please show what you directly observe (i.e. here&#39;s a self-contained program, here&#39;s its output on platform A, here&#39;s its output on platform B)."}, {"owner": {"reputation": 39, "user_id": 5316102, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2yYWnm0MO1I/AAAAAAAAAAI/AAAAAAAAAAA/YwKmPLi52lI/photo.jpg?sz=128", "display_name": "Randolf", "link": "https://stackoverflow.com/users/5316102/randolf"}, "edited": false, "score": 0, "creation_date": 1441790850, "post_id": 32474476, "comment_id": 52812374, "body": "Will do but wait a bit - need to get to a computer with the Code Composer Studio license and it&#39;s in use at the moment. The non-standard behavior was observed with Code Composer Studio on the OMAP DSP platform. The CCS manual doesn&#39;t specify the precedence of the subscript operator. Maybe it&#39;s really just a non-standard compiler. We also have a feeling that the behavior could be related to the memory alignment. I will post the results. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 924, "user_id": 2873201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZTyhS.jpg?s=128&g=1", "display_name": "sqr163", "link": "https://stackoverflow.com/users/2873201/sqr163"}, "is_accepted": false, "score": 0, "last_activity_date": 1441789090, "creation_date": 1441789090, "answer_id": 32475207, "question_id": 32474476, "link": "https://stackoverflow.com/questions/32474476/c-is-array-element-referencing-compiler-implementation-specific/32475207#32475207", "title": "C: Is array element referencing compiler implementation specific?", "body": "<p>There are no issues with this code:</p>\n\n<pre><code>int someArray[10];\nvoid *a = &amp;someArray[x];\n</code></pre>\n\n<p>Proper compiler will increment pointer basing on sizeof(someArray[0]).</p>\n\n<p>Probably, you should ask not about 'how to write portable code', but <em>how to write code which will work properly even when compiled with a wild compiler</em>...</p>\n"}], "owner": {"reputation": 39, "user_id": 5316102, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2yYWnm0MO1I/AAAAAAAAAAI/AAAAAAAAAAA/YwKmPLi52lI/photo.jpg?sz=128", "display_name": "Randolf", "link": "https://stackoverflow.com/users/5316102/randolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1441789090, "creation_date": 1441786892, "question_id": 32474476, "link": "https://stackoverflow.com/questions/32474476/c-is-array-element-referencing-compiler-implementation-specific", "title": "C: Is array element referencing compiler implementation specific?", "body": "<p>Often I see the following syntax being used for C array element referencing:</p>\n\n<pre><code>int someArray[10];\n(void*) a = &amp;someArray[x];\n</code></pre>\n\n<p>this seems to increment the address by sizeof(int) with some compilers (e.g. mingw) and by sizeof(void*) with others (texas instruments).</p>\n\n<p>Changing it to <code>(void*) a = &amp;(someArray[x])</code> seems fixing this.</p>\n\n<p>Where's the catch?\nIs the precedence of \"&amp;\" and \"[x]\" undefined by the standard?\nWhat's the best practice for portable code?</p>\n\n<p>Thanks!\nRandolf</p>\n"}, {"tags": ["c", "pipe", "popen", "intel-edison"], "answers": [{"tags": [], "owner": {"reputation": 17446, "user_id": 311635, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0d4907cea9d97688aa7a5e722d742f71?s=128&d=identicon&r=PG", "display_name": "Rudi", "link": "https://stackoverflow.com/users/311635/rudi"}, "is_accepted": false, "score": 1, "last_activity_date": 1441786343, "creation_date": 1441786343, "answer_id": 32474311, "question_id": 32474138, "link": "https://stackoverflow.com/questions/32474138/how-to-write-and-read-at-the-same-file-using-popen-in-c/32474311#32474311", "title": "How to write and read at the same file using &quot;popen&quot; in C", "body": "<p>Unfortunately, you can use <code>popen()</code> in one direction only. To get a bidirectional communication, you need to create two anonymous pipes with <code>pipe()</code> for stdin and stdout and assign them to the file handles 0 and 1 with <code>dup2()</code>.</p>\n\n<p>See <a href=\"http://tldp.org/LDP/lpg/node11.html\" rel=\"nofollow\">http://tldp.org/LDP/lpg/node11.html</a> for more details.</p>\n"}, {"comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1441794154, "post_id": 32474361, "comment_id": 52814660, "body": "What&#39;s printf/fgets got to do with buffering?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1441804693, "post_id": 32474361, "comment_id": 52822131, "body": "Nor can you use <code>fread&#47;fwrite</code> on file descriptors.  Those calls operate on a pointer to a <code>FILE</code> structure.  Use simple <code>read&#47;write</code> calls on a file descriptor."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 2, "last_activity_date": 1441808121, "last_edit_date": 1495540928, "creation_date": 1441786485, "answer_id": 32474361, "question_id": 32474138, "link": "https://stackoverflow.com/questions/32474138/how-to-write-and-read-at-the-same-file-using-popen-in-c/32474361#32474361", "title": "How to write and read at the same file using &quot;popen&quot; in C", "body": "<p>You cannot do this with <code>popen</code>, but can build a program using <code>fork</code>, <code>exec</code> and <code>pipe</code>.  The last opens two file descriptors, which are related: the parent's connection to a pipe, and the child's connection.  To make a two-way connection to a child process, you must use <em>two</em> calls to <code>pipe</code>.</p>\n\n<p>The file-descriptors opened by <code>pipe</code> are not <em>buffered</em>, so you would use <code>read</code> and <code>write</code> to communicate with the child (rather than <code>fgets</code> and <code>fprintf</code>).</p>\n\n<p>For examples and discussion, see</p>\n\n<ul>\n<li><a href=\"https://unix.stackexchange.com/questions/70534/does-one-end-of-a-pipe-have-both-read-and-write-fd\">Does one end of a pipe have both read and write fd?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/14863308/read-write-through-a-pipe-in-c\">Read / Write through a pipe in C</a></li>\n<li><a href=\"http://web.mst.edu/~ercal/284/PipeExamples/Examples.html\" rel=\"nofollow noreferrer\">UNIX pipe() : Example Programs </a></li>\n<li><a href=\"http://linux.die.net/man/7/pipe\" rel=\"nofollow noreferrer\">pipe(7) - Linux man page</a></li>\n<li><a href=\"http://tldp.org/LDP/lpg/node11.html\" rel=\"nofollow noreferrer\">6.2.2 Creating Pipes in C</a></li>\n</ul>\n"}], "owner": {"reputation": 90, "user_id": 1819606, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d5bfb35ecf7e08829eba61933e7effb8?s=128&d=identicon&r=PG", "display_name": "&#214;zg&#252;r Devrim Arikan", "link": "https://stackoverflow.com/users/1819606/%c3%96zg%c3%bcr-devrim-arikan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1918, "favorite_count": 0, "accepted_answer_id": 32474361, "answer_count": 2, "score": 1, "last_activity_date": 1516391976, "creation_date": 1441785815, "last_edit_date": 1516391976, "question_id": 32474138, "link": "https://stackoverflow.com/questions/32474138/how-to-write-and-read-at-the-same-file-using-popen-in-c", "title": "How to write and read at the same file using &quot;popen&quot; in C", "body": "<p>I'm using Intel Edison and SensorTag. In order to get temperature data via BLE, there are a bunch of commands. When I define popen as:</p>\n\n<pre><code>popen(command,\"w\"); \n</code></pre>\n\n<p>code works fine most of the times. (Crashes other times due to delay issues I assume as I don't control the responses.)</p>\n\n<p>However, when I want to control the command/console responses (such as step into next line when bluetooth connection is established and if not try to connect again etc.), I cannot read the responses. My \"data\" variable is not changed. </p>\n\n<p>I also tried other modes of \"popen\" but they give run-time errors.</p>\n\n<p>Here is the code I'm using:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint endsWith (char* base, char* str) {\n    int blen = strlen(base);\n    int slen = strlen(str);\n    return (blen &gt;= slen) &amp;&amp; (0 == strcmp(base + blen - slen, str));\n}\n\nFILE* get_popen(char* command, int close, int block) {\n    FILE *pf;\n    char data[512];\n\n    // Setup our pipe for reading and execute our command.\n    pf = popen(command,\"w\");\n\n    // Error handling\n\n    if (block == 1) {\n\n        // Get the data from the process execution\n        char* result;\n        do {\n            result=fgets(data, 512 , stderr);\n            if (result != NULL) {\n                  printf(\"Data is [%s]\\n\", data);\n            }\n        } while (result != NULL);\n\n        // the data is now in 'data'\n    }\n    if (close != 0) {\n        if (pclose(pf) != 0)\n            fprintf(stderr,\" Error: Failed to close command stream \\n\");\n    }\n\n    return pf;\n}\n\nFILE* command_cont_exe(FILE* pf, char* command, int close, int block) {\n    char data[512];\n\n    // Error handling\n    if (pf == NULL) {\n        // print error\n        return NULL;\n    }\n\n    fwrite(command, 1, strlen(command), pf);\n    fwrite(\"\\r\\n\", 1, 2, pf);\n\n    if (block == 1) {\n\n        // Get the data from the process execution\n        char* result;\n        do {\n            result=fgets(data, 512 , stderr);\n            if (result != NULL) {\n                  printf(\"Data is [%s]\\n\", data);\n            }\n        } while (result != NULL);//\n    }\n    // the data is now in 'data'\n\n    if (close != 0) {\n            if (pclose(pf) != 0)\n                fprintf(stderr,\" Error: Failed to close command stream \\n\");\n    }\n\n    return pf;\n}\n\n\nint main()\n{\n    char command[50];\n\n    sprintf(command, \"rfkill unblock bluetooth\");\n    get_popen(command, 1, 0);\n    printf(\"Working...(rfkill)\\n\");\n    sleep(2);\n\n    sprintf(command, \"bluetoothctl 2&gt;&amp;1\");\n    FILE* pf = get_popen(command, 0, 1);\n    printf(\"Working...(BT CTRL)\\n\");\n    sleep(3);\n\n    sprintf(command, \"agent KeyboardDisplay\");\n    command_cont_exe(pf, command, 0, 1);\n    printf(\"Working...(Agent)\\n\");\n    sleep(3);\n    //Main continues...\n</code></pre>\n"}, {"tags": ["c", "swift", "pointers"], "comments": [{"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1441787583, "post_id": 32473950, "comment_id": 52810181, "body": "A similar problem (with computed properties instead of subscripting) is discussed here: <a href=\"http://stackoverflow.com/questions/31232190/swift-2-0-inout-function-parameters-and-computed-properties\" title=\"swift 2 0 inout function parameters and computed properties\">stackoverflow.com/questions/31232190/&hellip;</a>. I assume that the same reasoning is valid here, and your code should work as expected."}, {"owner": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "reply_to_user": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1441787706, "post_id": 32473950, "comment_id": 52810253, "body": "@MartinR The concept is valid, but I don&#39;t think it&#39;s safe to assume that the passed-in pointer can be used to access any values in the array besides the one it points to."}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "reply_to_user": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "edited": false, "score": 0, "creation_date": 1441789010, "post_id": 32473950, "comment_id": 52811104, "body": "@jtbandes: You are right. I had misread the question."}], "answers": [{"comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 2, "creation_date": 1441786519, "post_id": 32474281, "comment_id": 52809549, "body": "Last time I checked, array indexing works with pass-by-inout in the following manner. The compiler retrieves the element from the indexed collection into a temporary object using the indexing getter. The address of the temporary object is then passed to the callee. After the callee returns, the indexing setter is invoked on the collection with the \u2013 now potentially modified \u2013 temporary."}, {"owner": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1441786632, "post_id": 32474281, "comment_id": 52809622, "body": "Yes, that sounds like what I&#39;ve seen as well. This also means <code>didSet</code>s (and I guess <code>set</code>s) will be called whether or not the callee modifies the value. Pointer arithmetic on <code>&amp;buf[0]</code> did seem to work in a simple test, but I don&#39;t think it&#39;s guaranteed to work in every case (probably undefined behavior)."}, {"owner": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1441786845, "post_id": 32474281, "comment_id": 52809731, "body": "<a href=\"https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/BuildingCocoaApps/InteractingWithCAPIs.html\" rel=\"nofollow noreferrer\">This page</a> also has some helpful info."}, {"owner": {"reputation": 7768, "user_id": 1618592, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ad57bfdca1515bea454f32c8b7f9d46a?s=128&d=identicon&r=PG", "display_name": "Ephemera", "link": "https://stackoverflow.com/users/1618592/ephemera"}, "edited": false, "score": 0, "creation_date": 1441790839, "post_id": 32474281, "comment_id": 52812369, "body": "If I am to use the <code>baseAddress</code> of the pointer accessible from <code>withUnsafeMutableBufferPointer</code>, I assume I will then need to invoke <code>advancedBy:</code> in order to advance the pointer to the correct index... While I understand it completely, the incompleteness of the documentation can be quite a hurdle sometimes!"}, {"owner": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "reply_to_user": {"reputation": 7768, "user_id": 1618592, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ad57bfdca1515bea454f32c8b7f9d46a?s=128&d=identicon&r=PG", "display_name": "Ephemera", "link": "https://stackoverflow.com/users/1618592/ephemera"}, "edited": false, "score": 0, "creation_date": 1441814473, "post_id": 32474281, "comment_id": 52829518, "body": "@Ephemera you can simply use the + operator (it works on UnsafePointer in Swift)."}], "tags": [], "owner": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "is_accepted": true, "score": 2, "last_activity_date": 1442463534, "last_edit_date": 1442463534, "creation_date": 1441786249, "answer_id": 32474281, "question_id": 32473950, "link": "https://stackoverflow.com/questions/32473950/does-array-element-dereferencing-and-addressing-bufferindex-work-in-swift/32474281#32474281", "title": "Does array element dereferencing and addressing - &amp;buffer[index] - work in Swift?", "body": "<p>I would recommend being careful with <code>&amp;buffer[Int(index)]</code>. It's unclear what it's guaranteed to do from the docs. Certainly, it can be used to modify a single element of the array, but I don't think you should rely on pointer arithmetic with this pointer (so you shouldn't pass it into a function like that).</p>\n\n<p>What you can/should use, however, is <a href=\"https://developer.apple.com/library/ios/documentation/Swift/Reference/Swift_Array_Structure/index.html#//apple_ref/swift/structm/Array/s:FSa30withUnsafeMutableBufferPointeru__rFRGSaq__FzFzRGVSs26UnsafeMutableBufferPointerq__qd__qd__\" rel=\"nofollow\"><code>withUnsafeMutableBufferPointer()</code> (apparently missing from docs currently)</a> (or the non-mutable version). This guarantees to call the provided closure with an UnsafeMutableBufferPointer to contiguous storage that you can use to read from and write to the array. You'll probably want to use its <code>baseAddress</code>.</p>\n\n<p>(Also note that Swift has a <a href=\"https://developer.apple.com/library/prerelease/ios/documentation/Swift/Reference/Swift_ContiguousArray_Structure/index.html\" rel=\"nofollow\">ContiguousArray</a> in addition to Array, whose storage is guaranteed to be contiguous, so you might see slightly better performance than Array since you know you'll ask it for a contiguous buffer anyway. But don't make too many assumptions about performance here \u2014 it's not very well documented! I doubt you'd need to use ContiguousArray in practice.)</p>\n"}, {"tags": [], "owner": {"reputation": 48811, "user_id": 3804019, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/jcHxX.png?s=128&g=1", "display_name": "rintaro", "link": "https://stackoverflow.com/users/3804019/rintaro"}, "is_accepted": false, "score": 1, "last_activity_date": 1441791466, "last_edit_date": 1495539868, "creation_date": 1441791466, "answer_id": 32476068, "question_id": 32473950, "link": "https://stackoverflow.com/questions/32473950/does-array-element-dereferencing-and-addressing-bufferindex-work-in-swift/32476068#32476068", "title": "Does array element dereferencing and addressing - &amp;buffer[index] - work in Swift?", "body": "<p>You could:</p>\n\n<pre><code>read(s, &amp;buffer + Int(index), toRead)\n</code></pre>\n\n<p>I think, <code>&amp;buffer[Int(index)]</code> is not safe, as discussed in <a href=\"https://stackoverflow.com/a/26418461/3804019\">this QA</a></p>\n"}], "owner": {"reputation": 7768, "user_id": 1618592, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ad57bfdca1515bea454f32c8b7f9d46a?s=128&d=identicon&r=PG", "display_name": "Ephemera", "link": "https://stackoverflow.com/users/1618592/ephemera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 32474281, "answer_count": 2, "score": 3, "last_activity_date": 1442463534, "creation_date": 1441785293, "question_id": 32473950, "link": "https://stackoverflow.com/questions/32473950/does-array-element-dereferencing-and-addressing-bufferindex-work-in-swift", "title": "Does array element dereferencing and addressing - &amp;buffer[index] - work in Swift?", "body": "<p>I am writing a Swift application for which I need to use C functions for some network buffering from sockets. Swift imports these functions via a bridging header and they require a buffer pointer parameter.</p>\n\n<p>The two functions are effectively:</p>\n\n<pre><code>read(Socket s, void *buf, int num);\nwrite(Socket s, const void *buf, int num);\n</code></pre>\n\n<p>The Swift compiler indicates that it these functions require an <code>UnsafePointer&lt;Void&gt;</code>. I have some <code>[UInt8]</code> types that hold my writeable data and accept my readable data. The Swift compiler does not complain with what I have written, however I believe the following code is not doing what I would expect it to in C syntax.</p>\n\n<p>This is my read loop:</p>\n\n<pre><code>var index: Int32 = 0    \nwhile index &lt; length {\n    var toRead = length - index\n    if toRead &gt; bufferSize {\n        toRead = bufferSize\n    }\n\n    // Read into my buffer ([Int8]), starting at element `hasRead`\n    let justRead: Int32 = read(s, &amp;buffer[Int(index)], toRead)\n    index += justRead\n}\n</code></pre>\n\n<p>And my write loop:</p>\n\n<pre><code>var index: Int32 = 0\nwhile index &lt; length {\n    var toWrite: Int32 = length - index\n    if toWrite &gt; bufferSize {\n        toWrite = bufferSize\n    }\n\n    // Write from my buffer ([Int8]), starting at element `index`\n    let wrote = write(s, &amp;buffer[Int(index)], toWrite)\n    index += wrote\n}\n</code></pre>\n\n<p>My question is: Is <code>&amp;buffer[Int(index)]</code> the correct way to pass a (mutable) array in this situation? (I.e. is it doing what I would expect C to do with that syntax - taking the address of the index'th element of array bytes). And if not, how do I appropriately pass my <code>[UInt8]</code> to the bridged C function?</p>\n"}, {"tags": ["c", "arrays", "string", "arduino", "initialization"], "comments": [{"owner": {"reputation": 47450, "user_id": 4574, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iqUR6.jpg?s=128&g=1", "display_name": "Konamiman", "link": "https://stackoverflow.com/users/4574/konamiman"}, "edited": false, "score": 1, "creation_date": 1441784004, "post_id": 32473459, "comment_id": 52808005, "body": "Which language is this?"}, {"owner": {"reputation": 11, "user_id": 5315912, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-W8zms2f1xVs/AAAAAAAAAAI/AAAAAAAAAHU/g5SY-b_uJFM/photo.jpg?sz=128", "display_name": "bikash das", "link": "https://stackoverflow.com/users/5315912/bikash-das"}, "reply_to_user": {"reputation": 47450, "user_id": 4574, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iqUR6.jpg?s=128&g=1", "display_name": "Konamiman", "link": "https://stackoverflow.com/users/4574/konamiman"}, "edited": false, "score": 0, "creation_date": 1441784747, "post_id": 32473459, "comment_id": 52808458, "body": "@Konamiman,The code is for Arduino Sketch which is written in C/C++,we can use C/C++ function in Arduino sketch.The String function is used in Arduino IDE.Sorry for not making it clear in the question"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5315912, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-W8zms2f1xVs/AAAAAAAAAAI/AAAAAAAAAHU/g5SY-b_uJFM/photo.jpg?sz=128", "display_name": "bikash das", "link": "https://stackoverflow.com/users/5315912/bikash-das"}, "edited": false, "score": 0, "creation_date": 1441885499, "post_id": 32475499, "comment_id": 52861293, "body": "Thanks for the compiler suggestion :)"}], "tags": [], "owner": {"reputation": 422, "user_id": 4840776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e4846ee49c10e24257150ff8accda638?s=128&d=identicon&r=PG&f=1", "display_name": "koldewb", "link": "https://stackoverflow.com/users/4840776/koldewb"}, "is_accepted": false, "score": 0, "last_activity_date": 1441790285, "last_edit_date": 1441790285, "creation_date": 1441789878, "answer_id": 32475499, "question_id": 32473459, "link": "https://stackoverflow.com/questions/32473459/evaluating-a-string-which-is-stored-in-a-variable-and-assigning-to-an-array/32475499#32475499", "title": "Evaluating a String which is stored in a variable and assigning to an array", "body": "<p>Since its Ardruino I guess it's using a c compiler.\nGuessing you use C89, In C89 the size of an array needs to be constant at compile time, so what you are trying is just not supported.</p>\n\n<p>When using your string to define the array the compiler notices it as a variable, not a constant.</p>\n\n<pre><code>String string = \"abcdef\";\nchar x[] = string; // string = variable, even if it doesn't change.\n</code></pre>\n\n<p>Variable length arrays are supported in C99, so you could compile it with the C99 compiler instead to prevent the error. </p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5315912, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-W8zms2f1xVs/AAAAAAAAAAI/AAAAAAAAAHU/g5SY-b_uJFM/photo.jpg?sz=128", "display_name": "bikash das", "link": "https://stackoverflow.com/users/5315912/bikash-das"}, "edited": false, "score": 0, "creation_date": 1441885434, "post_id": 32475538, "comment_id": 52861249, "body": "Yes i came to the same conclusion after banging my head for couple of hours.So what i did was to change the string literal to char array using a predefined function called toCharArray()."}], "tags": [], "owner": {"reputation": 47450, "user_id": 4574, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iqUR6.jpg?s=128&g=1", "display_name": "Konamiman", "link": "https://stackoverflow.com/users/4574/konamiman"}, "is_accepted": false, "score": 0, "last_activity_date": 1441789969, "creation_date": 1441789969, "answer_id": 32475538, "question_id": 32473459, "link": "https://stackoverflow.com/questions/32473459/evaluating-a-string-which-is-stored-in-a-variable-and-assigning-to-an-array/32475538#32475538", "title": "Evaluating a String which is stored in a variable and assigning to an array", "body": "<p>In plain C strings are not entities on its own, they are just arrays of <code>char</code> with a <code>null</code> at the end. So your first line is just syntactic sugar equivalent to:</p>\n\n<pre><code>char x[] = {'a','b','c','d','e','f','\\0'};\n</code></pre>\n\n<p><code>String</code> on the other hand seems to be a C++ class available in your environment, which happens to be initializable with a literal string as well. Instances of this class can <strong>not</strong> be assigned directly to a char array, hence the error (perhaps there is a conversion function somewhere?)</p>\n"}], "owner": {"reputation": 11, "user_id": 5315912, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-W8zms2f1xVs/AAAAAAAAAAI/AAAAAAAAAHU/g5SY-b_uJFM/photo.jpg?sz=128", "display_name": "bikash das", "link": "https://stackoverflow.com/users/5315912/bikash-das"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1446545547, "creation_date": 1441783894, "last_edit_date": 1441789675, "question_id": 32473459, "link": "https://stackoverflow.com/questions/32473459/evaluating-a-string-which-is-stored-in-a-variable-and-assigning-to-an-array", "title": "Evaluating a String which is stored in a variable and assigning to an array", "body": "<p>Consider this case </p>\n\n<pre><code>char x[] = \"abcdef\";\n</code></pre>\n\n<p>this does not throw any errors.</p>\n\n<p>Now consider second case,</p>\n\n<pre><code>String string = \"abcdef\";\nchar x[] = string;\n</code></pre>\n\n<p>the second condition throws an error \"array must be initialized with a braced-enclosed initializer\".\nI dont understand this error. Why can't I assign a string variable to an array.</p>\n"}, {"tags": ["android", "c", "linux", "native", "middleware"], "answers": [{"tags": [], "owner": {"reputation": 4167, "user_id": 746285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f6d3ba931210a956e0f9fb7d783e299?s=128&d=identicon&r=PG", "display_name": "bluefalcon", "link": "https://stackoverflow.com/users/746285/bluefalcon"}, "is_accepted": false, "score": 0, "last_activity_date": 1441787472, "creation_date": 1441787472, "answer_id": 32474652, "question_id": 32473445, "link": "https://stackoverflow.com/questions/32473445/android-middleware-c-program-unable-to-create-directory-read-only-file-system/32474652#32474652", "title": "Android middleware c program : Unable to create directory, read-only file system", "body": "<p>Nope, that is not the correct approach. </p>\n\n<p>The end user devices system folder will be in read only. Running the mount command via system will leave the device in a very vulnerable state and I am not sure if android would allow you to run <code>mount</code> command.</p>\n\n<p>The correct approach would -</p>\n\n<ul>\n<li>Declare external storage write permission [<code>WRITE_EXTERNAL_STORAGE</code>] in your app. So users will be aware that this app will write to device storage.</li>\n<li>Or use internal storage, but the correct path needs to be queried from app and sent to native. See <a href=\"http://developer.android.com/training/basics/data-storage/files.html\" rel=\"nofollow\">Saving Files</a> from Android documentation.</li>\n<li>Create a new folder in external directory with a name which clearly identifies that it is from your app, so users will know what that folder is for when they view files and folders from other apps</li>\n<li>You should write all your files and folders into the folder you created in the previous folder.</li>\n</ul>\n"}], "owner": {"reputation": 6795, "user_id": 1460665, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/o8b6s.jpg?s=128&g=1", "display_name": "Insane Coder", "link": "https://stackoverflow.com/users/1460665/insane-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441787472, "creation_date": 1441783840, "question_id": 32473445, "link": "https://stackoverflow.com/questions/32473445/android-middleware-c-program-unable-to-create-directory-read-only-file-system", "title": "Android middleware c program : Unable to create directory, read-only file system", "body": "<p>In my middleware application, i need to create several directories and files during the execution, but its not able to do so due to permission errors.</p>\n\n<p>I created a simple program to replicate the scenario: </p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n    struct stat st = {0};\n\n    if (stat(\"/mnt/demo_folder\", &amp;st) == -1) {\n        mkdir(\"/mnt/demo_folder\", 0700);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>and when I run it, I get <code>unable to create directory /mnt/demo_folder : Read-only file system</code>.</p>\n\n<p>One way to solve this is below.</p>\n\n<p>Manually, i can run <code>mount -o remount ,rw /</code> once on the device and my application never have permission problems in the future. But since i do not have access to end-user devices, i can execute this command using <code>system()</code> in the application itself at the beginning. But will that be the proper way? Can anyone point out the best practice in such scenario.</p>\n"}, {"tags": ["c", "openmp", "pixel", "blur", "pseudocode"], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 4822725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9781f202daafb754a59ba973edc0d7de?s=128&d=identicon&r=PG&f=1", "display_name": "beniekg", "link": "https://stackoverflow.com/users/4822725/beniekg"}, "is_accepted": true, "score": 1, "last_activity_date": 1442159314, "creation_date": 1442159314, "answer_id": 32551495, "question_id": 32473418, "link": "https://stackoverflow.com/questions/32473418/radial-blur-using-openmp/32551495#32551495", "title": "&quot;radial blur&quot; using OpenMP", "body": "<p>Can you check the following link?\n<a href=\"http://www.drdobbs.com/architecture-and-design/faster-image-processing-with-openmp/184405586\" rel=\"nofollow\">http://www.drdobbs.com/architecture-and-design/faster-image-processing-with-openmp/184405586</a></p>\n"}], "owner": {"reputation": 939, "user_id": 3303031, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61cfc20deca6f5c4bed49fcf295ee31c?s=128&d=identicon&r=PG&f=1", "display_name": "elenaa", "link": "https://stackoverflow.com/users/3303031/elenaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 32551495, "answer_count": 1, "score": 1, "last_activity_date": 1442159314, "creation_date": 1441783761, "last_edit_date": 1441816300, "question_id": 32473418, "link": "https://stackoverflow.com/questions/32473418/radial-blur-using-openmp", "title": "&quot;radial blur&quot; using OpenMP", "body": "<p>I am trying to find a pseudocode for implementing the \"radial blur\" using C and OpenMP. \"Radial blur\" is an operation, in which each pixel is replaced by the average of neighboring pixels. For example for a 3x3 pixel image the centered image's value is given by: </p>\n\n<p><code>X4=(X1+X3+X5+X7)/4;</code> </p>\n\n<p>and the value of any other is given by: </p>\n\n<p><code>X0=(X1+X3)2;</code></p>\n\n<p>I am searching for a 9x9 implementation with 3 processors. Any kind of help would be amazing. Thank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "edited": false, "score": 1, "creation_date": 1441782776, "post_id": 32473061, "comment_id": 52807319, "body": "Please indent your code. Also please reread your text. It is a bit confusing."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 2, "creation_date": 1441782779, "post_id": 32473061, "comment_id": 52807322, "body": "It&#39;s <b>undefined behaviour</b> to pass incorrect arguments (format mismatch). Pay attention to your compiler warnings."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1441782822, "post_id": 32473061, "comment_id": 52807348, "body": "Undefined behavior is undefined behavior, you simply can&#39;t rely in the behavior being consistent."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1441782898, "post_id": 32473061, "comment_id": 52807390, "body": "As for the question in your title, see e.g. <a href=\"http://en.cppreference.com/w/c/language/conversion\" rel=\"nofollow noreferrer\">this conversions reference</a>."}, {"owner": {"reputation": 616, "user_id": 2935383, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aae0191e6b8f199cbe0cd3c29b506944?s=128&d=identicon&r=PG&f=1", "display_name": "raiserle", "link": "https://stackoverflow.com/users/2935383/raiserle"}, "edited": false, "score": 0, "creation_date": 1441783109, "post_id": 32473061, "comment_id": 52807488, "body": "you don&#39;t get the address of your char[]: char (value= G) != char* (address = 0x00000000)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1441783439, "post_id": 32473061, "comment_id": 52807669, "body": "&quot;<i>giving segmentation fault that clearly means that this 8 bit value must have been expanded to a 32 bit value</i>&quot; Why?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 2, "creation_date": 1441783516, "post_id": 32473061, "comment_id": 52807721, "body": "Narrow types such as <code>char</code> always get converted to <code>int</code> when passed in a function with <code>...</code> parameter list. This conversion is done <i>by value</i>, that is the arbitrary <code>char</code> value that your compiler made from the pointer, will be interpreted as <code>int</code>. If <code>char</code> is signed, this means that your <code>int</code> may be negative. This now completely random value is interpreted by <code>printf</code> as the address of a string, so the program crashes."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441866035, "post_id": 32473061, "comment_id": 52848816, "body": "the posted code causes the compiler to raise several warnings.  When compiling, always enable all the warnings, then fix the warnings."}], "answers": [{"comments": [{"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 1, "creation_date": 1441789591, "post_id": 32473645, "comment_id": 52811502, "body": "Good explanation of what is happening. Note that printing an <code>int</code> using <code>%p</code> is UB. It works anyway in most compilers where pointers and <code>int</code> are the same size."}], "tags": [], "owner": {"reputation": 599, "user_id": 5250757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U9h4q.png?s=128&g=1", "display_name": "4rzael", "link": "https://stackoverflow.com/users/5250757/4rzael"}, "is_accepted": false, "score": 1, "last_activity_date": 1441784395, "creation_date": 1441784395, "answer_id": 32473645, "question_id": 32473061, "link": "https://stackoverflow.com/questions/32473061/how-does-a-character-gets-promoted-to-an-int-when-it-is-passed-to-printf-functio/32473645#32473645", "title": "How does a character gets promoted to an int when it is passed to printf function?", "body": "<p>I'm not sure to understand your question.</p>\n\n<p>I tried this code (a little bit modified) :</p>\n\n<pre><code>char getstr()\n{\n    static char s[]=\"GATE2016\";\n    printf(\"in getstr : %p\\n\", s);\n    return s;\n}\n\nint main()\n{\n    printf(\"in main : %p\\n\",getstr());\n    return 0;\n}\n</code></pre>\n\n<p>And I get</p>\n\n<pre><code>in getstr : 0x601040\nin main : 0x40\n</code></pre>\n\n<p>We can see here that only one byte is passed by getstr, as expected.</p>\n\n<p>Anyway, many printf implementations use <a href=\"http://linux.die.net/man/3/va_arg\" rel=\"nofollow\">va_args</a>, and va_args convert every <code>char</code> or <code>short</code> into an <code>int</code>. That's how you end up with a 32bit variable.</p>\n"}, {"tags": [], "owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "is_accepted": false, "score": -2, "last_activity_date": 1441786905, "creation_date": 1441786905, "answer_id": 32474481, "question_id": 32473061, "link": "https://stackoverflow.com/questions/32473061/how-does-a-character-gets-promoted-to-an-int-when-it-is-passed-to-printf-functio/32474481#32474481", "title": "How does a character gets promoted to an int when it is passed to printf function?", "body": "<p>It isn't being promoted at all.  Assuming that you're programming for a desktop computer, <code>printf</code> uses the stack in a clever way to allow you to pass a variable number of arguments.</p>\n\n<p>The first parameter to <code>printf</code> is the format string.  This contains a run-time specification of the type and number of all of the other parameters.  Since parameters are passed by pushing 'them' onto the stack, the code can work out where each parameter is in memory based on the stack address of the format string.</p>\n\n<p>In your code, you use the <code>%s</code> format specifier to tell <code>printf</code> that you have placed a pointer to an array of contiguous characters, terminated by a <code>\\0</code> null character in the next position on the stack.  What you have actually placed on the stack is a single byte (<code>char</code>).  So, <code>printf</code> will read a number of bytes from the stack, including the one you placed there, that are sufficient for it to interpret as a pointer.  However, that pointer will be effectively random, since it is not a real memory address.  <code>printf</code> then attempts to read characters from that memory and the segmentation fault occurs because the memory either doesn't physically exist or is not accessible to your process.</p>\n\n<p>The cause of this is probably that the <code>getstr</code> function is incorrect: it is defined as returning a single <code>char</code>, but it actually returns the least significant byte of the address of the <code>s</code> array.  You probably should define the return value as a <code>char*</code>:</p>\n\n<pre><code>char* getstr()\n{\n    static char s[]=\"GATE2016\";\n    return s;\n}\n</code></pre>\n\n<p>Doing this will make the parameter passed to <code>printf</code> the correct type (a pointer to a string) and it should work as expected.</p>\n"}], "owner": {"reputation": 41, "user_id": 5080828, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/153a554c1c7b71f0300cd703606e4f8c?s=128&d=identicon&r=PG&f=1", "display_name": "radhika", "link": "https://stackoverflow.com/users/5080828/radhika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1441786905, "creation_date": 1441782670, "last_edit_date": 1441784142, "question_id": 32473061, "link": "https://stackoverflow.com/questions/32473061/how-does-a-character-gets-promoted-to-an-int-when-it-is-passed-to-printf-functio", "title": "How does a character gets promoted to an int when it is passed to printf function?", "body": "<pre><code>char getstr()\n{\n    static char s[]=\"GATE2016\";\n    return s;\n}\n\nint main()\n{\n    printf(\"%s\",getstr());\n    return 0;\n}\n</code></pre>\n\n<p>Although I know I am returning an address using a character return type , and the return type must be <code>char* getstr ();</code> </p>\n\n<p>But still if I do like this only then I am getting null on gcc compiler and segmentation fault on another compiler so that means the 32-bit address value in getstr function would have been converted to a char value of 8 bits so then when I am printing that value with %s , it should be an undefined behaviour than why is it giving segmentation fault that clearly means that this 8 bit value must have been expanded to a 32 bit value , so how did this implicit conversion take place ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441782782, "post_id": 32473032, "comment_id": 52807325, "body": "The string &quot;131249&quot; you input is interpreted as a single integer. (sscanf should return 1.) Try &quot;13 12 4 9&quot;. The values of y, z and c are what happens to be in the memory there. (Although, admittedly, I cannot explain the value 177.)"}, {"owner": {"reputation": 2499, "user_id": 5208760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L6VNv.jpg?s=128&g=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/5208760/mateusz"}, "edited": false, "score": 2, "creation_date": 1441783004, "post_id": 32473032, "comment_id": 52807431, "body": "If you write &quot;131249&quot; how can you expect 13 12 4 9? Why not 131 2 4 9 or 1 3 12 49?"}, {"owner": {"reputation": 17, "user_id": 5270890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/925bf58e437d8e28927540fb1615bd3f?s=128&d=identicon&r=PG&f=1", "display_name": "athirah", "link": "https://stackoverflow.com/users/5270890/athirah"}, "edited": false, "score": 0, "creation_date": 1441783103, "post_id": 32473032, "comment_id": 52807482, "body": "PeterSchneider and Mateusz Kwa\u015bniak , yes it worked with spacing, but the input is forced to &quot;131249&quot;"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1441784184, "post_id": 32473032, "comment_id": 52808119, "body": "This question doesn&#39;t make any sense, you have to provide more context. What is the number representing, why do you expect to parse it in a certain way, where is the code doing that, what will you do with the result etc."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5270890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/925bf58e437d8e28927540fb1615bd3f?s=128&d=identicon&r=PG&f=1", "display_name": "athirah", "link": "https://stackoverflow.com/users/5270890/athirah"}, "edited": false, "score": 0, "creation_date": 1441789270, "post_id": 32473244, "comment_id": 52811277, "body": "what happen if the input comes from hexadecimal ?  for example 0A ... 1F .. 12 .."}, {"owner": {"reputation": 3017, "user_id": 949297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/S2ohb.jpg?s=128&g=1", "display_name": "Nicolas Riousset", "link": "https://stackoverflow.com/users/949297/nicolas-riousset"}, "reply_to_user": {"reputation": 17, "user_id": 5270890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/925bf58e437d8e28927540fb1615bd3f?s=128&d=identicon&r=PG&f=1", "display_name": "athirah", "link": "https://stackoverflow.com/users/5270890/athirah"}, "edited": false, "score": 0, "creation_date": 1441790350, "post_id": 32473244, "comment_id": 52812012, "body": "To read hexadecimal values, you should use %x instead of %d. The length attribute should also work (i.e: %2x)"}, {"owner": {"reputation": 17, "user_id": 5270890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/925bf58e437d8e28927540fb1615bd3f?s=128&d=identicon&r=PG&f=1", "display_name": "athirah", "link": "https://stackoverflow.com/users/5270890/athirah"}, "edited": false, "score": 0, "creation_date": 1441847238, "post_id": 32473244, "comment_id": 52843296, "body": "if i have the value <code>0x33D</code> how to print separately ? like this , <code>0x03</code>  <code>0x3D</code>"}, {"owner": {"reputation": 3017, "user_id": 949297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/S2ohb.jpg?s=128&g=1", "display_name": "Nicolas Riousset", "link": "https://stackoverflow.com/users/949297/nicolas-riousset"}, "reply_to_user": {"reputation": 17, "user_id": 5270890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/925bf58e437d8e28927540fb1615bd3f?s=128&d=identicon&r=PG&f=1", "display_name": "athirah", "link": "https://stackoverflow.com/users/5270890/athirah"}, "edited": false, "score": 0, "creation_date": 1441869436, "post_id": 32473244, "comment_id": 52850630, "body": "No, you can keep your value as 0x33D, and use something like sscanf(msg, &quot;0x%2x%1x&quot;, &amp;num[0], &amp;num[1]);"}], "tags": [], "owner": {"reputation": 3017, "user_id": 949297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/S2ohb.jpg?s=128&g=1", "display_name": "Nicolas Riousset", "link": "https://stackoverflow.com/users/949297/nicolas-riousset"}, "is_accepted": true, "score": 2, "last_activity_date": 1441783205, "creation_date": 1441783205, "answer_id": 32473244, "question_id": 32473032, "link": "https://stackoverflow.com/questions/32473032/how-to-extract-integer-from-character/32473244#32473244", "title": "How to Extract integer from character", "body": "<p>If your values length is fixed, you may want to specify the lenght of each value you're trying to capture. Ex : </p>\n\n<p><code>sscanf(msg, \"%2d%2d%1d%1d%\", &amp;num[0], &amp;num[1], &amp;num[2], &amp;num[3]);</code></p>\n"}, {"comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1441785058, "post_id": 32473424, "comment_id": 52808647, "body": "if <code>sizeof(int)==2</code>, 131249 will be stored as 177 (<code>131249 &amp; 0xFFFF == 177</code>)."}], "tags": [], "owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "is_accepted": false, "score": 0, "last_activity_date": 1441783777, "creation_date": 1441783777, "answer_id": 32473424, "question_id": 32473032, "link": "https://stackoverflow.com/questions/32473032/how-to-extract-integer-from-character/32473424#32473424", "title": "How to Extract integer from character", "body": "<p>It's hard to believe that if you did a printf of x that you'd see 177.  It should be 131249 based on your code.  Try Nicolas' suggestion.  You might also want to initialize your num array, i.e.</p>\n\n<p>int num[10] = {0};</p>\n"}], "owner": {"reputation": 17, "user_id": 5270890, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/925bf58e437d8e28927540fb1615bd3f?s=128&d=identicon&r=PG&f=1", "display_name": "athirah", "link": "https://stackoverflow.com/users/5270890/athirah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 32473244, "answer_count": 2, "score": -3, "last_activity_date": 1441783777, "creation_date": 1441782563, "question_id": 32473032, "link": "https://stackoverflow.com/questions/32473032/how-to-extract-integer-from-character", "title": "How to Extract integer from character", "body": "<p>I have this code:</p>\n\n<pre><code>            int num[10]   ;            \n            sscanf(msg, \"%d%d%d%d%\", &amp;num[0], &amp;num[1], &amp;num[2], &amp;num[3]); \n            int x = num[0]; // integer\n            int y = num[1]; // integer\n            int z = num[2]; // integer\n            int c = num[3]; // integer\n</code></pre>\n\n<p>I got problem from the above code, when I write '131249', so the result is:</p>\n\n<pre><code>x = 177 \ny = -8755\nz = -21206\nc = -246\n</code></pre>\n\n<p>but the expected value should </p>\n\n<pre><code>x = 13 \ny = 12\nz = 4\nc = 9\n</code></pre>\n\n<p>How to have the expected value, is there any wrong in my code ?</p>\n"}, {"tags": ["c", "rational-number", "rhapsody"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1441784652, "post_id": 32472962, "comment_id": 52808396, "body": "#define does not define a new type. The question is not clear for me. Could you please elaborate it?"}, {"owner": {"reputation": 130, "user_id": 1520424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e649cabf6c678dd1c15ca36b3d6726f?s=128&d=identicon&r=PG&f=1", "display_name": "Isyola", "link": "https://stackoverflow.com/users/1520424/isyola"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1441785032, "post_id": 32472962, "comment_id": 52808621, "body": "from C point of view you are totally correct. but this is the only way I can think of making #define in Rhapsody (work around). I just want to make some pre-build configurations in Rhapsody and don&#39;t know how."}], "answers": [{"tags": [], "owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "is_accepted": true, "score": 2, "last_activity_date": 1441788946, "last_edit_date": 1441788946, "creation_date": 1441787888, "answer_id": 32474787, "question_id": 32472962, "link": "https://stackoverflow.com/questions/32472962/adding-tag-to-the-type-declaration/32474787#32474787", "title": "Adding Tag to the type declaration", "body": "<p>Unfortunately, the tag value is not evaluated in the declaration field. Here is a workaround:</p>\n\n<p>Let's say the name of the tag is \"<strong>repeat_time</strong>\":</p>\n\n<p><a href=\"https://i.stack.imgur.com/Yw8Dj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yw8Dj.png\" alt=\"enter image description here\"></a></p>\n\n<p>Do not use the tag in the declaration field:</p>\n\n<p><a href=\"https://i.stack.imgur.com/BXpuY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BXpuY.png\" alt=\"enter image description here\"></a></p>\n\n<p>Instead, add it to the <code>CPP_CG::Type::SpecificationEpilog</code> property,\n(note the space before the tag name):</p>\n\n<p><a href=\"https://i.stack.imgur.com/17DiJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/17DiJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note 1:\nConsider using a variable instead of a type, see the following picture for details:</p>\n\n<p><a href=\"https://i.stack.imgur.com/UKeto.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UKeto.png\" alt=\"enter image description here\"></a></p>\n\n<p>Generated code:</p>\n\n<pre><code>//#[ type CANSM_MODEREQ_REPEAT_TIME\n#define CANSM_MODEREQ_REPEAT_TIME 100\n//#]\n\n//## attribute CANSM_MODERSP_REPEAT_TIME\n#define CANSM_MODERSP_REPEAT_TIME 200\n</code></pre>\n\n<p>Note 2: Consider using a stereotype to overload the properties.</p>\n"}], "owner": {"reputation": 130, "user_id": 1520424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e649cabf6c678dd1c15ca36b3d6726f?s=128&d=identicon&r=PG&f=1", "display_name": "Isyola", "link": "https://stackoverflow.com/users/1520424/isyola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 1, "accepted_answer_id": 32474787, "answer_count": 1, "score": 1, "last_activity_date": 1441788946, "creation_date": 1441782333, "question_id": 32472962, "link": "https://stackoverflow.com/questions/32472962/adding-tag-to-the-type-declaration", "title": "Adding Tag to the type declaration", "body": "<p>I need to add a tag value in the Type declaration as shown here:</p>\n\n<p><a href=\"https://i.stack.imgur.com/tC2V8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tC2V8.png\" alt=\"enter image description here\"></a></p>\n\n<p>The problem is that I keep getting the Tag name instead of the Tag value in the generated code. as follows.</p>\n\n<p><a href=\"https://i.stack.imgur.com/vImbQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vImbQ.png\" alt=\"enter image description here\"></a></p>\n\n<h2>any clues?</h2>\n\n<p>My original need was to make some #define lines and I was trying to make a stereotype for this</p>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "edited": false, "score": 5, "creation_date": 1441782396, "post_id": 32472949, "comment_id": 52807082, "body": "What compiler do you use? Can you show us an example of this usage?"}, {"owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "edited": false, "score": 1, "creation_date": 1441782486, "post_id": 32472949, "comment_id": 52807132, "body": "Literally the text <code>.global</code> appears in the C source file?"}, {"owner": {"reputation": 307, "user_id": 4719370, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-iDseq2jkKdg/AAAAAAAAAAI/AAAAAAAAAG0/ZVSeTZHzh18/photo.jpg?sz=128", "display_name": "Anuj Priyadarshi", "link": "https://stackoverflow.com/users/4719370/anuj-priyadarshi"}, "edited": false, "score": 0, "creation_date": 1441782587, "post_id": 32472949, "comment_id": 52807201, "body": "&quot;.global _vsf_getps;&quot; this how it is used, I use an in house compiler, which does not support this construct, so need to ignore this while compilation, without changing the actula code"}, {"owner": {"reputation": 307, "user_id": 4719370, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-iDseq2jkKdg/AAAAAAAAAAI/AAAAAAAAAG0/ZVSeTZHzh18/photo.jpg?sz=128", "display_name": "Anuj Priyadarshi", "link": "https://stackoverflow.com/users/4719370/anuj-priyadarshi"}, "edited": false, "score": 0, "creation_date": 1441782644, "post_id": 32472949, "comment_id": 52807233, "body": "yes &quot;.global&quot; appear in .c files"}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "edited": false, "score": 0, "creation_date": 1441784799, "post_id": 32472949, "comment_id": 52808479, "body": "Why can&#39;t you change the code?"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1441785690, "post_id": 32472949, "comment_id": 52809033, "body": "You&#39;ll probably need to wrap them in <code>#ifdef...#endif</code> constructs.  Alternatively, you <i>might</i> be able to globally replace <code>.global</code> with, say, <code>GLOBAL</code> and then conditionally <code>#define GLOBAL &#47;&#47;nothing</code> or <code>#define GLOBAL .global</code> depending on the compiler... depends on whether the older compiler looks for the <code>.global</code> lines before or after pre-processing."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1441788585, "post_id": 32472949, "comment_id": 52810817, "body": "It smells like a section in your linker script. You must understand what .global does in you in-house compiler. If you add this info, probably someone can give you an answer."}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 0, "last_activity_date": 1441818217, "last_edit_date": 1441818217, "creation_date": 1441817909, "answer_id": 32485388, "question_id": 32472949, "link": "https://stackoverflow.com/questions/32472949/macro-definition-for-global/32485388#32485388", "title": "Macro definition for &quot;.global&quot;", "body": "<p>You are almost certainly going to end up writing your own preprocessing script; it shouldn't be too difficult, if your source files are reasonably controlled. If you don't use the <code>.global</code> construct in string literals or comments, for example, it would be sufficient to do something like:</p>\n\n<pre><code>sed  's/.global [_[:alpha:]][_[:alnum:]]*;//g'\n</code></pre>\n\n<p>(perhaps with a bit more attention to detail about whitespace).</p>\n\n<hr>\n\n<p>You cannot manufacture a comment with a macro. (You also cannot define a macro whose name starts with a <code>.</code>, although I suppose there could be a compiler which accepts that as an extension.)</p>\n\n<p>Comments are replaced with whitespace in phase 3 of the translation process. Preprocessor directives are not examined until phase 4, by which time all the comments have disappeared.</p>\n\n<p>So there is no difference between</p>\n\n<pre><code>#define COMMENT //comment\n#define COMMENT\n</code></pre>\n\n<hr>\n\n<p>Standards reference: &sect;5.1.1.2/1:</p>\n\n<ol start=\"3\">\n<li><p>The source file is decomposed into preprocessing tokens7) and sequences of white-space characters (including comments). A source file shall not end in a partial preprocessing token or in a partial comment. Each comment is replaced by one space character.&hellip;</p></li>\n<li><p>Preprocessing directives are executed, macro invocations are expanded, and <code>_Pragma</code> unary operator expressions are executed.&hellip;</p></li>\n</ol>\n"}], "owner": {"reputation": 307, "user_id": 4719370, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-iDseq2jkKdg/AAAAAAAAAAI/AAAAAAAAAG0/ZVSeTZHzh18/photo.jpg?sz=128", "display_name": "Anuj Priyadarshi", "link": "https://stackoverflow.com/users/4719370/anuj-priyadarshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441818217, "creation_date": 1441782289, "last_edit_date": 1441784527, "question_id": 32472949, "link": "https://stackoverflow.com/questions/32472949/macro-definition-for-global", "title": "Macro definition for &quot;.global&quot;", "body": "<p>I have a \"c\" program that uses \".global\" assembly language code. My compiler does not allow this, i need to ignore the same, i tried the following:</p>\n\n<pre><code>#define .global //global\n</code></pre>\n\n<p>But this gives a compiler error. Is there any other option that I can use. The compilation error is:</p>\n\n<p>\"expected an identifier\"</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "edited": false, "score": 1, "creation_date": 1441782377, "post_id": 32472767, "comment_id": 52807070, "body": "Please spend some time on indenting / separating your code properly. It will make answering your questions easier."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 2, "creation_date": 1441782404, "post_id": 32472767, "comment_id": 52807087, "body": "After copying, <code>pt1</code> points to <code>ch1[5]</code> which has the value <code>\\0</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1441785030, "post_id": 32472767, "comment_id": 52808620, "body": "OT: <code>main()</code> returns <code>int</code> not <code>void</code>."}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1441788469, "post_id": 32472767, "comment_id": 52810749, "body": "add pt1 = ch ; after *pt1 = &#39;\\0&#39;; replace for-loop with printf(&quot;%s&quot;, ch1 );"}, {"owner": {"reputation": 701, "user_id": 3983756, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/966fffbafc3c218b194488772be93d6c?s=128&d=identicon&r=PG", "display_name": "ThunderWiring", "link": "https://stackoverflow.com/users/3983756/thunderwiring"}, "edited": false, "score": 0, "creation_date": 1441791004, "post_id": 32472767, "comment_id": 52812477, "body": "what do you mean &quot;garbage value&quot;? i ran your code(after minor modifications) on gcc c99 and it basically didn&#39;t print anything(well, printed the &#39;/0&#39; char AKA ascci 0)"}], "answers": [{"tags": [], "owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "is_accepted": false, "score": 3, "last_activity_date": 1441784987, "last_edit_date": 1441784987, "creation_date": 1441782951, "answer_id": 32473159, "question_id": 32472767, "link": "https://stackoverflow.com/questions/32472767/i-am-trying-to-copy-a-string-in-c-using-pointers/32473159#32473159", "title": "i am trying to copy a string in c using pointers", "body": "<p>Looks to me like you just need to reset <code>pt1</code>.  After your copy loop, it's pointing to the end of the string in the <code>ch1</code> array.  </p>\n\n<p>So, after the line: </p>\n\n<pre><code>*pt1='\\0';\n</code></pre>\n\n<p><code>pt1</code> is pointing to the end of the string in <code>ch1</code>.  So, to print it out, you need to reset it back to <code>ch1</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 1585958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jkgfd.png?s=128&g=1", "display_name": "Maciej Bielski", "link": "https://stackoverflow.com/users/1585958/maciej-bielski"}, "is_accepted": false, "score": 1, "last_activity_date": 1441785817, "last_edit_date": 1441785817, "creation_date": 1441785516, "answer_id": 32474042, "question_id": 32472767, "link": "https://stackoverflow.com/questions/32472767/i-am-trying-to-copy-a-string-in-c-using-pointers/32474042#32474042", "title": "i am trying to copy a string in c using pointers", "body": "<p>There is a typo in your code:</p>\n\n<pre><code>char *pt0 =ch;\n</code></pre>\n\n<p>should perhaps be:</p>\n\n<pre><code>char *pt0 =ch0;\n</code></pre>\n\n<p>Your compiler should notice that but maybe it would be better to correct it here also for consistency. Apart from this the bruceg's answer is right.</p>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 4374228, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-zfPXtRPNgfg/AAAAAAAAAAI/AAAAAAAAABk/mmK2w_fFfIE/photo.jpg?sz=128", "display_name": "GShaik", "link": "https://stackoverflow.com/users/4374228/gshaik"}, "is_accepted": false, "score": 0, "last_activity_date": 1441800179, "creation_date": 1441800179, "answer_id": 32479078, "question_id": 32472767, "link": "https://stackoverflow.com/questions/32472767/i-am-trying-to-copy-a-string-in-c-using-pointers/32479078#32479078", "title": "i am trying to copy a string in c using pointers", "body": "<p>In your code, you are incrementing the pointer <strong>ptr1</strong> and then atlast your assigning value <strong>\"NULL\"</strong>. So no longer the <strong>ptr1</strong> holds the <strong>ch1</strong>  string.</p>\n\n<p>For better understanding, you can print the addresses of both <strong>ch1</strong> and <strong>ptr1</strong>. You will understand much better</p>\n"}], "owner": {"reputation": 25, "user_id": 3323376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e8Nqd.jpg?s=128&g=1", "display_name": "rambo", "link": "https://stackoverflow.com/users/3323376/rambo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1441800179, "creation_date": 1441781694, "last_edit_date": 1441788040, "question_id": 32472767, "link": "https://stackoverflow.com/questions/32472767/i-am-trying-to-copy-a-string-in-c-using-pointers", "title": "i am trying to copy a string in c using pointers", "body": "<pre><code>char ch0[10] = \"hello\";\nchar ch1[10];\n\nvoid main(){\n    clrscr();\n    char *pt0 = ch0;\n    char *pt1 = ch1;\n    puts(pt0);\n\n    while(*pt0 != '\\0')\n    {\n        *pt1++ = *pt0++;\n    }\n    *pt1 = '\\0';\n\n    printf(\"value of ch1 =\");\n    for(int i = 0; i &lt; sizeof(ch1); i++){\n        printf(\"%c\",ch1[i]); // prints value correctly\n    }\n\n    putchar('\\n');\n    printf(\"pointer pt1 value = %c\",*pt1); // gives garbage value\n    getch();\n}\n</code></pre>\n\n<p>Pointer <code>pt1</code> value is not accessible however the <code>ch1</code> is pointing to the correct value.</p>\n\n<p>How to access pt1?</p>\n\n<p>I am not good in pointers can any only explain me the working scenario</p>\n\n<pre><code>output:\nhello\nvalue of ch1 =hello\npointer pt1 value= \\\\garbage value\n</code></pre>\n"}, {"tags": ["c", "apache", "apache2"], "comments": [{"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1441791970, "post_id": 32472563, "comment_id": 52813166, "body": "Short answer is you have to register your handler by calling ap_hook_handler()... but there are things your handler must do.  Give this a read for some guidance: <a href=\"http://httpd.apache.org/docs/trunk/developer/modguide.html\" rel=\"nofollow noreferrer\">httpd.apache.org/docs/trunk/developer/modguide.html</a>"}, {"owner": {"reputation": 101, "user_id": 3052368, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0f018a947c8dc646fa13dd720cd8613f?s=128&d=identicon&r=PG&f=1", "display_name": "TheNobleSix", "link": "https://stackoverflow.com/users/3052368/thenoblesix"}, "reply_to_user": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1441874571, "post_id": 32472563, "comment_id": 52853888, "body": "The problem is the declaration inside httpd.conf or apache2.conf with AddHandler or SetHandler. I really don&#39;t understand how to use it..."}, {"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1441913715, "post_id": 32472563, "comment_id": 52879545, "body": "Man  page for AddHandler <a href=\"http://httpd.apache.org/docs/2.4/mod/mod_mime.html#addhandler\" rel=\"nofollow noreferrer\">httpd.apache.org/docs/2.4/mod/mod_mime.html#addhandler</a>     Man page for SetHandler <a href=\"http://httpd.apache.org/docs/2.4/mod/core.html#sethandler\" rel=\"nofollow noreferrer\">httpd.apache.org/docs/2.4/mod/core.html#sethandler</a>"}], "owner": {"reputation": 101, "user_id": 3052368, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0f018a947c8dc646fa13dd720cd8613f?s=128&d=identicon&r=PG&f=1", "display_name": "TheNobleSix", "link": "https://stackoverflow.com/users/3052368/thenoblesix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441780937, "creation_date": 1441780937, "question_id": 32472563, "link": "https://stackoverflow.com/questions/32472563/how-to-set-a-new-handler-in-apache2", "title": "How to set a new handler in Apache2", "body": "<p>I made a module for Apache that serves every type of GET and HEAD requests. I compiled and enabled it with apxs. The Apache Service restart correctly and everything is fine. How can I put it inside the chain of a service request? I have to disable other modules in order to use my own?</p>\n\n<p>Thank you very much!</p>\n"}, {"tags": ["c++", "c", "flex-lexer", "lex"], "comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1441783274, "post_id": 32472543, "comment_id": 52807567, "body": "Are you sure you want to do this with flex / bison, and not <a href=\"http://www.boost.org/doc/libs/release/libs/spirit/doc/html/index.html\" rel=\"nofollow noreferrer\">Boost.Spirit</a>?"}, {"owner": {"reputation": 577, "user_id": 3380371, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/jDvDf.gif?s=128&g=1", "display_name": "PalashV", "link": "https://stackoverflow.com/users/3380371/palashv"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1441783378, "post_id": 32472543, "comment_id": 52807636, "body": "@DevSolar Yes. It&#39;s an academic course project, must use flex/bison."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1441784925, "post_id": 32472543, "comment_id": 52808556, "body": "Yes, academic inertia cannot be helped sometimes. ;-)"}], "answers": [{"tags": [], "owner": {"reputation": 7267, "user_id": 1051621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JAEvg.jpg?s=128&g=1", "display_name": "Mark Shevchenko", "link": "https://stackoverflow.com/users/1051621/mark-shevchenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1511120631, "last_edit_date": 1511120631, "creation_date": 1441783174, "answer_id": 32473230, "question_id": 32472543, "link": "https://stackoverflow.com/questions/32472543/is-it-possible-to-use-two-or-more-different-yylex-functions-in-same-c-c-prog/32473230#32473230", "title": "Is it possible to use two or more different yylex() functions in same C/C++ program?", "body": "<p><code>flex</code> has a <a href=\"http://westes.github.io/flex/manual/Code_002dLevel-And-API-Options.html\" rel=\"nofollow noreferrer\">similar parameter</a>:</p>\n\n<blockquote>\n  <p>\u2018-PPREFIX, --prefix=PREFIX, %option prefix=\"PREFIX\"\u2019changes the\n  default \u2018yy\u2019 prefix used by flex for all globally-visible variable and\n  function names to instead be \u2018PREFIX\u2019. For example, \u2018--prefix=foo\u2019\n  changes the name of yytext to footext. It also changes the name of the\n  default output file from lex.yy.c to lex.foo.c.</p>\n</blockquote>\n\n<p>So you can rename the second function and its variables.\nUnfortunately POSIX lex has not such parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 3, "last_activity_date": 1511120473, "last_edit_date": 1511120473, "creation_date": 1441783253, "answer_id": 32473263, "question_id": 32472543, "link": "https://stackoverflow.com/questions/32472543/is-it-possible-to-use-two-or-more-different-yylex-functions-in-same-c-c-prog/32473263#32473263", "title": "Is it possible to use two or more different yylex() functions in same C/C++ program?", "body": "<p>You can use the <a href=\"http://westes.github.io/flex/manual/Code_002dLevel-And-API-Options.html#index-prefix\" rel=\"nofollow noreferrer\">%prefix</a> declaration to change the <code>yy</code> in <code>yylex</code> (and a variety of other global names) to something different, which allows you to have multiple scanners in the same project. You will probably also want to use the <code>-o</code> option to set the name of the generated file; otherwise, the build procedure gets ugly.</p>\n\n<p>But they will be completely separate scanners, each with their own input stream. That might not be what you want.</p>\n\n<p>If you want a scanner whose lexical definitions can be changed to another set, you need to use <a href=\"http://westes.github.io/flex/manual/Start-Conditions.html\" rel=\"nofollow noreferrer\">start conditions</a>. That will let you change scanner behaviour in different contexts, and has the advantage that you can share common lexical features.</p>\n"}], "owner": {"reputation": 577, "user_id": 3380371, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/jDvDf.gif?s=128&g=1", "display_name": "PalashV", "link": "https://stackoverflow.com/users/3380371/palashv"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "closed_date": 1441812577, "answer_count": 2, "score": 0, "last_activity_date": 1511120631, "creation_date": 1441780868, "last_edit_date": 1441782353, "question_id": 32472543, "link": "https://stackoverflow.com/questions/32472543/is-it-possible-to-use-two-or-more-different-yylex-functions-in-same-c-c-prog", "closed_reason": "Duplicate", "title": "Is it possible to use two or more different yylex() functions in same C/C++ program?", "body": "<p>I'm making a lexical analyzer for C language, a less-powered version.</p>\n\n<p>I want to process different kinds of regular expressions at different times for example, for the first time the input character stream from the source program and then the second time, an intermediate representation form of the program generated after first processing.</p>\n\n<p>So is it possible to create 2 or more <code>yylex()</code> functions using FLEX and use it in a same C/C++ program, the lexical analyzer?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 1, "creation_date": 1441780647, "post_id": 32472461, "comment_id": 52806122, "body": "Your <code>buffer</code> pointers don&#39;t point to anything."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 2, "creation_date": 1441780658, "post_id": 32472461, "comment_id": 52806129, "body": "It doesn&#39;t work, it might just look that way. You have to allocate space for the word you intend to read. And preferrably tell scanf how much space there is. In C++, it is much better to use a <code>std::string</code> and <code>cin &gt;&gt; word</code>, which handles the storage automatically."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1441780680, "post_id": 32472461, "comment_id": 52806141, "body": "You don&#39;t allocate memory for your <code>char*</code> pointers."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1441780783, "post_id": 32472461, "comment_id": 52806197, "body": "A note of caution: Using the <code>sizeof(array) &#47; sizeof(array[0])</code> trick only works as long as you have the proper array. If the array has decayed to a pointer (like when passing the array to a function accepting a pointer argument) then the trick will not work anymore."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1441780882, "post_id": 32472461, "comment_id": 52806249, "body": "And also, the C-style cast <code>(const char*)</code> tells the compiler &quot;Just shut up and do it, I know what I&#39;m doing!&quot;. Not good, if that is not all true."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1441780883, "post_id": 32472461, "comment_id": 52806250, "body": "By the way, why have you tagged the question C++? There&#39;s no C++ code in the question? And if you used C++ you would (or should) have used <code>std::string</code> and <code>std::cin</code> and wouldn&#39;t have to worry about unallocated pointers."}, {"owner": {"reputation": 389, "user_id": 4565156, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/211b792595232a2ec14dc3562e7fefec?s=128&d=identicon&r=PG&f=1", "display_name": "Rhurac", "link": "https://stackoverflow.com/users/4565156/rhurac"}, "edited": false, "score": 0, "creation_date": 1441781528, "post_id": 32472461, "comment_id": 52806598, "body": "Sorry about the C++ tag that was an oversight. Thanks for the quick comments. Just a few clarifications: (1) for allocating memory to the char* pointers do is malloc() the function I am looking for? (2) casting (const char*) is the only work-around I have found, what is the proper way? I know of useful functions in C++ to do this, but I haven&#39;t found a good way in C. Thanks a million!"}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 1, "last_activity_date": 1441781489, "creation_date": 1441781489, "answer_id": 32472711, "question_id": 32472461, "link": "https://stackoverflow.com/questions/32472461/using-scanf-on-char/32472711#32472711", "title": "Using scanf() on *char[]", "body": "<p>A string in C is <em>an array of characters</em>. A pointer is <em>not</em> an array of characters.</p>\n\n<p>Buffer is an array of 3 pointers. You haven't allocated memory to hold the strings anywhere. And the pointers aren't initialized, so they point at garbage locations. </p>\n\n<p>You have to make the pointers point at allocated memory, or alternatively declare an array of arrays (2D array), such as for example <code>char buffer [3][50]</code>, where 3 is the number of strings and 50 is the maximum string length, including null termination.</p>\n\n<p><a href=\"http://c-faq.com/aryptr/index.html\" rel=\"nofollow\">http://c-faq.com/aryptr/index.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441813803, "post_id": 32473013, "comment_id": 52828997, "body": "Better to limit width of scan to not overflow buffer as with <code>scanf(&quot;%99s&quot;, buffer[i])</code>"}, {"owner": {"reputation": 1054, "user_id": 2629902, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/jIgtw.png?s=128&g=1", "display_name": "Coffee&#39;d Up Hacker", "link": "https://stackoverflow.com/users/2629902/coffeed-up-hacker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441820634, "post_id": 32473013, "comment_id": 52832937, "body": "@chux Yes, though to assume any size is already flawed logic. It would be better to use the <code>%m</code> or <code>%a</code> format specifiers, or create a <code>char *</code> within the first loop for each <code>scanf</code> to store the result in, then calculate the size from that to set the size of <code>buffer[i]</code> accordingly."}], "tags": [], "owner": {"reputation": 1054, "user_id": 2629902, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/jIgtw.png?s=128&g=1", "display_name": "Coffee&#39;d Up Hacker", "link": "https://stackoverflow.com/users/2629902/coffeed-up-hacker"}, "is_accepted": false, "score": 0, "last_activity_date": 1441782500, "creation_date": 1441782500, "answer_id": 32473013, "question_id": 32472461, "link": "https://stackoverflow.com/questions/32472461/using-scanf-on-char/32473013#32473013", "title": "Using scanf() on *char[]", "body": "<p>In your code <code>buffer</code> has a maximum size of 3 characters, not three strings. You are also doing a lot of things that are unnecessary, like calculating the loop length from the buffer size, casting the would-be buffer strings to <code>const char *</code>, and printing the strings right after getting them.</p>\n\n<p>This code is better...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint\nmain (void)\n{\n    int i;\n    int len = 3;\n    const char buffer[len][100];\n\n    // Get the strings\n    for (i = 0; i &lt; len; i++)\n    {\n        printf(\"Enter word: \");\n        scanf(\"%s\", buffer[i]);\n    }\n\n    // Print the strings\n    for (i = 0; i &lt; len; i++)\n    {\n        printf(\"%s\\n\", buffer[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 389, "user_id": 4565156, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/211b792595232a2ec14dc3562e7fefec?s=128&d=identicon&r=PG&f=1", "display_name": "Rhurac", "link": "https://stackoverflow.com/users/4565156/rhurac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1581, "favorite_count": 0, "accepted_answer_id": 32472711, "answer_count": 2, "score": -3, "last_activity_date": 1441782500, "creation_date": 1441780540, "last_edit_date": 1441781031, "question_id": 32472461, "link": "https://stackoverflow.com/questions/32472461/using-scanf-on-char", "title": "Using scanf() on *char[]", "body": "<p>I am trying to ask the user for three strings, store them into an array of strings, and then print them. The following code compiles fine, but does not print anything. I cannot find out why it is not working, any help would be much appreciated:</p>\n\n<pre><code>char *buffer[3];\nint i;\nint len = sizeof(buffer)/sizeof(char*);\nfor (i=0; i&lt;len; i++)\n{\n    printf(\"Enter word: \");\n    scanf(\"%s\", buffer[i]);\n    printf(\"%s\", (const char*)buffer[i]); \n}\n</code></pre>\n\n<p>What further confuses me is that I stripped off one \"tier\" of pointers and it works fine (i.e. remove a * from buffer: char buffer[3], scanf(\"%s\", buffer), printf(\"%s\", (const char*)buffer)). So as long as I am adding a \"tier\" evenly across the board I figured that would keep things groovy but fails. Is it something to do with initialization of buffer? Many thanks</p>\n"}, {"tags": ["c", "linked-list"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 4098633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88478a62eb7f6997ab8feccbee705ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Howard", "link": "https://stackoverflow.com/users/4098633/blake-howard"}, "edited": false, "score": 0, "creation_date": 1441782593, "post_id": 32472510, "comment_id": 52807203, "body": "Thank you for all the help. I understand what you&#39;re saying in your section &quot;Few other things  I saw in your code&quot;   I&#39;m not really sure how to go about implementing that new structure, would it replace where I declare *llist at the beginning?"}, {"owner": {"reputation": 1355, "user_id": 4042839, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e94de72c1c5c1f6889cbc9ce8e36b1de?s=128&d=identicon&r=PG&f=1", "display_name": "Ghazanfar", "link": "https://stackoverflow.com/users/4042839/ghazanfar"}, "reply_to_user": {"reputation": 47, "user_id": 4098633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88478a62eb7f6997ab8feccbee705ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Howard", "link": "https://stackoverflow.com/users/4098633/blake-howard"}, "edited": false, "score": 0, "creation_date": 1441782851, "post_id": 32472510, "comment_id": 52807363, "body": "@BlakeHoward It was a pleasure helping you. It will not replace the <code>cell</code> structure. It will replace what the client will access. The client should not know about the existence of the <code>cell</code> structure."}, {"owner": {"reputation": 1355, "user_id": 4042839, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e94de72c1c5c1f6889cbc9ce8e36b1de?s=128&d=identicon&r=PG&f=1", "display_name": "Ghazanfar", "link": "https://stackoverflow.com/users/4042839/ghazanfar"}, "reply_to_user": {"reputation": 47, "user_id": 4098633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88478a62eb7f6997ab8feccbee705ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Howard", "link": "https://stackoverflow.com/users/4098633/blake-howard"}, "edited": false, "score": 0, "creation_date": 1441783117, "post_id": 32472510, "comment_id": 52807493, "body": "@BlakeHoward Create <code>LinkedList</code> structure as shown above. So, main will create an instance of that structure and not of <code>cell</code>. Now all your <code>add</code>, <code>delete</code> and <code>display</code> functions will accept this <code>LinkedList</code> structure and not the <code>cell</code>."}, {"owner": {"reputation": 1355, "user_id": 4042839, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e94de72c1c5c1f6889cbc9ce8e36b1de?s=128&d=identicon&r=PG&f=1", "display_name": "Ghazanfar", "link": "https://stackoverflow.com/users/4042839/ghazanfar"}, "reply_to_user": {"reputation": 47, "user_id": 4098633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88478a62eb7f6997ab8feccbee705ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Howard", "link": "https://stackoverflow.com/users/4098633/blake-howard"}, "edited": false, "score": 0, "creation_date": 1441783359, "post_id": 32472510, "comment_id": 52807618, "body": "@BlakeHoward I added an example to show you how the functions will change."}, {"owner": {"reputation": 47, "user_id": 4098633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88478a62eb7f6997ab8feccbee705ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Howard", "link": "https://stackoverflow.com/users/4098633/blake-howard"}, "edited": false, "score": 0, "creation_date": 1441787699, "post_id": 32472510, "comment_id": 52810250, "body": "Hey! I have the code working, and it looks much cleaner and functions well with all your suggestions. Thank you again!"}], "tags": [], "owner": {"reputation": 1355, "user_id": 4042839, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e94de72c1c5c1f6889cbc9ce8e36b1de?s=128&d=identicon&r=PG&f=1", "display_name": "Ghazanfar", "link": "https://stackoverflow.com/users/4042839/ghazanfar"}, "is_accepted": true, "score": 3, "last_activity_date": 1441783317, "last_edit_date": 1441783317, "creation_date": 1441780741, "answer_id": 32472510, "question_id": 32472415, "link": "https://stackoverflow.com/questions/32472415/appending-node-to-linked-list/32472510#32472510", "title": "Appending node to linked list", "body": "<p>Look at this part of your code,</p>\n\n<pre><code>void append_node(struct CELL *llist, int num) {\n  struct CELL *temp;\n  temp = (struct CELL *)malloc(sizeof(struct CELL));\n  temp-&gt;val = num;\n  temp-&gt;next = llist;\n  llist = temp;   // Line1\n}\n</code></pre>\n\n<p>Notice Line1 : When you change <code>llist</code> to point to the new node you are changing the local copy of <code>llist</code> while <code>llist</code> in main continues to retain its old value.</p>\n\n<h3>How do I correct this ?</h3>\n\n<p>This is a flaw in your design of the linked list. The client program(main) should not access the <code>CELL</code> structure at all. You should have another structure which represents the linked list and has a pointer to the first cell.</p>\n\n<p>Something like this,</p>\n\n<pre><code>struct LinkedList {\n  struct CELL *head;\n};\n</code></pre>\n\n<p>Your <code>main</code> should be using this structure and not <code>CELL</code>.</p>\n\n<hr>\n\n<p>Few other thing I saw in your code,</p>\n\n<p>1) <code>display_list</code> function will fail if <code>NULL</code> is passed to it. It could be better done like this,</p>\n\n<pre><code>void display_list(struct CELL *llist)\n{\n  while(llist != NULL) {\n    printf(\"%d\\n\", llist-&gt;val);\n    llist = llist-&gt;next;\n  }\n}\n</code></pre>\n\n<p>2) See this line at the end of your <code>main</code>,</p>\n\n<pre><code>free(llist);\n</code></pre>\n\n<p>You are freeing ONLY the first cell in the linked list. You have not freed the other cells which were added to the list. This will cause a <a href=\"http://www.geeksforgeeks.org/what-is-memory-leak-how-can-we-avoid/\" rel=\"nofollow\">Memory leak</a> in your program.</p>\n\n<p>How do I solve this ? Freeing the linked list should not be done by the client(main) code. You should provide another function which will recursively free all the allocated cells. Again, this is much easier if you follow the above suggested design with a structure representing the linked list.</p>\n\n<hr>\n\n<p>Edit : Added an example on request in the comments section.</p>\n\n<p>Your display will look something like this if you change your design to what I have suggested,</p>\n\n<pre><code>void display_list(struct LinkedList *llist)\n{\n  struct CELL * head = llist-&gt;head;\n  while(head != NULL) {\n    printf(\"%d\\n\", head-&gt;val);\n    head = head-&gt;next;\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 4098633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88478a62eb7f6997ab8feccbee705ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Howard", "link": "https://stackoverflow.com/users/4098633/blake-howard"}, "edited": false, "score": 0, "creation_date": 1441784839, "post_id": 32473419, "comment_id": 52808498, "body": "Thanks for your addition! With the quick corrects you suggested, the display function just returns a random 8 digit number....."}, {"owner": {"reputation": 902, "user_id": 2930834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3fb0c80b48851aebbf884acf364a795?s=128&d=identicon&r=PG&f=1", "display_name": "Nakul", "link": "https://stackoverflow.com/users/2930834/nakul"}, "reply_to_user": {"reputation": 47, "user_id": 4098633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88478a62eb7f6997ab8feccbee705ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Howard", "link": "https://stackoverflow.com/users/4098633/blake-howard"}, "edited": false, "score": 0, "creation_date": 1441785263, "post_id": 32473419, "comment_id": 52808775, "body": "i have just checked. its showing me correct o/p I have used display function from the Mr.Mohammad Ghazanfar answer"}, {"owner": {"reputation": 47, "user_id": 4098633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88478a62eb7f6997ab8feccbee705ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Howard", "link": "https://stackoverflow.com/users/4098633/blake-howard"}, "edited": false, "score": 0, "creation_date": 1441787657, "post_id": 32473419, "comment_id": 52810229, "body": "it&#39;s all good I&#39;ve redone the code like suggested above, and its much shorter, clearer, and working well! Thank you all."}], "tags": [], "owner": {"reputation": 902, "user_id": 2930834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3fb0c80b48851aebbf884acf364a795?s=128&d=identicon&r=PG&f=1", "display_name": "Nakul", "link": "https://stackoverflow.com/users/2930834/nakul"}, "is_accepted": false, "score": 1, "last_activity_date": 1441783766, "creation_date": 1441783766, "answer_id": 32473419, "question_id": 32472415, "link": "https://stackoverflow.com/questions/32472415/appending-node-to-linked-list/32473419#32473419", "title": "Appending node to linked list", "body": "<p>@Mohammad Ghazanfar points are true and one should take care of those points.\nOn the other hand you can change the following functions to make your code working.</p>\n\n<p>changing function signature of <code>void append_node(struct CELL *llist, int num);</code> to \n<code>void append_node(struct CELL **llist, int num);</code>\nand the function defination is as follows</p>\n\n<pre><code>void append_node(struct CELL **llist, int num) {\n  /* while(llist-&gt;next != NULL)\n     llist = llist-&gt;next;\n  llist-&gt;next = (struct CELL *)malloc(sizeof(struct CELL));\n  llist-&gt;next-&gt;val = num;\n  llist-&gt;next-&gt;next = NULL;*/\n\n  struct CELL *temp;\n  temp = (struct CELL *)malloc(sizeof(struct CELL));\n  temp-&gt;val = num;\n  temp-&gt;next = (*llist);\n  (*llist) = temp;\n  return;\n}\n</code></pre>\n\n<p>and replacing the call of <code>append_node(llist, input);</code> as <code>append_node(&amp;llist, input);</code></p>\n\n<p>Note :- I have just made your code working. This might not be the perfect solution. You should consider points mentioned by @Mohammad Ghazanfar.</p>\n\n<p>Hope this helps :)</p>\n"}], "owner": {"reputation": 47, "user_id": 4098633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88478a62eb7f6997ab8feccbee705ae9?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Howard", "link": "https://stackoverflow.com/users/4098633/blake-howard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 32472510, "answer_count": 2, "score": 3, "last_activity_date": 1441783766, "creation_date": 1441780381, "question_id": 32472415, "link": "https://stackoverflow.com/questions/32472415/appending-node-to-linked-list", "title": "Appending node to linked list", "body": "<p>So This code was working fine when I was inserting the node towards the NULL cell. I tried implementing this to send the cells to the beginning, but since then the display_list function only shows the last cell. I've been trying to figure it out for a while. Suggestions?</p>\n\n<p>I will add that this is supposed to be a function that mimics dc in Linux.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct CELL {\n  int val;\n  struct CELL *next;\n};\n\nvoid append_node(struct CELL *llist, int num);\nvoid display_list(struct CELL *llist);\n</code></pre>\n\n<p>The main seems to be fine</p>\n\n<pre><code>int main(void)\n{\n\n  int num = 0;\n  int first = 0;\n  int input = 0;\n  char quit = 'n';\n  char inputchar = ' ';\n\n  struct CELL *llist;\n\n  llist = (struct CELL *)malloc(sizeof(struct CELL));\n  llist-&gt;next = NULL;\n\n  while (quit == 'n'){\n\n    if (scanf(\"%d\", &amp;input) == 1){\n\n      if ( first == 1 )\n        append_node(llist, input);\n\n\n      if ( first == 0){\n        llist-&gt;val = input;\n        first = 1;\n      }\n    }\n\n    else{\n      inputchar = getchar();\n\n      if (llist-&gt;next == NULL &amp;&amp; first == 0)\n        printf(\"List is empty.\\n\");\n\n      if (inputchar == 'f')\n        display_list(llist);\n\n      if (inputchar == 'q')\n        quit = 'y';\n      else if (llist-&gt;next != NULL){\n        switch (inputchar){\n\n        case 'q':\n        quit = 'y';\n        break;\n    }\n      }\n    }\n\n\n  }\n  free(llist);\n  return 0;\n}\n</code></pre>\n\n<p>The commented out code was working well! This was until I discovered I was supposed to be adding the cells to the other end, which I'm having difficulty figuring out. What am I missing here?</p>\n\n<pre><code>void append_node(struct CELL *llist, int num) {\n  /* while(llist-&gt;next != NULL)\n     llist = llist-&gt;next;\n  llist-&gt;next = (struct CELL *)malloc(sizeof(struct CELL));\n  llist-&gt;next-&gt;val = num;\n  llist-&gt;next-&gt;next = NULL;*/\n\n  struct CELL *temp;\n  temp = (struct CELL *)malloc(sizeof(struct CELL));\n  temp-&gt;val = num;\n  temp-&gt;next = llist;\n  llist = temp;\n}\n\nvoid display_list(struct CELL *llist)\n{\n  while(llist-&gt;next != NULL) {\n    printf(\"%d\\n\", llist-&gt;val);\n    llist = llist-&gt;next;\n  }\n  printf(\"%d\\n\", llist-&gt;val);\n}\n</code></pre>\n\n<p>I will admit that I have difficulty knowing when I should use pointers, and I suspect that I may be missing one somewhere. Any help would be appreciated.</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1441780539, "post_id": 32472376, "comment_id": 52806072, "body": "It is up to the implementation to decide whether you can do what you want.  If the implementation inlines (for sake of argument) <code>strlen()</code>, you won&#39;t be able to substitute your code for that because there isn&#39;t a function call to replace.  You may or may not be able to deal with actual function calls \u2014 it depends.  The implementation is under no obligation to cooperate."}, {"owner": {"reputation": 3601, "user_id": 390785, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/635df493ae4dbd67aad6009c0b77675b?s=128&d=identicon&r=PG", "display_name": "sureshvv", "link": "https://stackoverflow.com/users/390785/sureshvv"}, "edited": false, "score": 0, "creation_date": 1441780589, "post_id": 32472376, "comment_id": 52806091, "body": "What you are asking for is very dangerous and if it were possible can cause a lot of havoc and chaos. You can read up on shared libraries and static linking."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1441780590, "post_id": 32472376, "comment_id": 52806093, "body": "It&#39;s certainly possible to override functions in dynamically linked libraries. How to do it depends on the operating system though. Also, some standard C function calls can be replaced by the compiler to highly optimized internal versions, either statically linked into the executable (and such functions can&#39;t be overridden) or they have weird names that can be hard to figure out."}, {"owner": {"reputation": 1255, "user_id": 1861447, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d61fb7b17b58891bf414b9d53e7bbb0d?s=128&d=identicon&r=PG", "display_name": "Austin", "link": "https://stackoverflow.com/users/1861447/austin"}, "edited": false, "score": 0, "creation_date": 1441781027, "post_id": 32472376, "comment_id": 52806328, "body": "Sometime back I was using purifier memory leak tool. When I start my program (already attached to purifier), I think in place of malloc or free function call, purifier calls its own functions (I am not very sure, I hope so). That way probably it determines memory leak details. If I am correct in above assumption, probably a way exists to overload a function in C at run time. But I am not getting the way to do it."}, {"owner": {"reputation": 1255, "user_id": 1861447, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d61fb7b17b58891bf414b9d53e7bbb0d?s=128&d=identicon&r=PG", "display_name": "Austin", "link": "https://stackoverflow.com/users/1861447/austin"}, "edited": false, "score": 0, "creation_date": 1441781154, "post_id": 32472376, "comment_id": 52806401, "body": "Its linux, updated my question."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1441781494, "post_id": 32472376, "comment_id": 52806578, "body": "Some standard library functions, such as <code>strlen</code> and <code>strcpy</code>, are typically inlined by the compiler in optimized builds, so you can&#39;t reliably override these without recompiling, because there&#39;s no function call. Is your question about these functions you mention, or were those given just as an example?"}, {"owner": {"reputation": 1255, "user_id": 1861447, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d61fb7b17b58891bf414b9d53e7bbb0d?s=128&d=identicon&r=PG", "display_name": "Austin", "link": "https://stackoverflow.com/users/1861447/austin"}, "edited": false, "score": 0, "creation_date": 1441781670, "post_id": 32472376, "comment_id": 52806680, "body": "It is just a generic example. Lets assume that the library is not built in optimized mode."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1441783997, "post_id": 32472376, "comment_id": 52807998, "body": "Best option is probably to set some custom path, so that the compiler/linker does not go off to look at the standard library at all, but at your own library. That might require that you rewrite the whole of string.h though... Possibly you could use the GCC open source implementation and modify it. What is the reason you need to rewrite those functions in the first place?"}], "answers": [{"comments": [{"owner": {"reputation": 1255, "user_id": 1861447, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d61fb7b17b58891bf414b9d53e7bbb0d?s=128&d=identicon&r=PG", "display_name": "Austin", "link": "https://stackoverflow.com/users/1861447/austin"}, "edited": false, "score": 0, "creation_date": 1441791312, "post_id": 32473845, "comment_id": 52812701, "body": "Interesting, will try and revert back"}, {"owner": {"reputation": 1255, "user_id": 1861447, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d61fb7b17b58891bf414b9d53e7bbb0d?s=128&d=identicon&r=PG", "display_name": "Austin", "link": "https://stackoverflow.com/users/1861447/austin"}, "edited": false, "score": 0, "creation_date": 1441850032, "post_id": 32473845, "comment_id": 52843938, "body": "This worked for me. Thanks."}, {"owner": {"reputation": 1255, "user_id": 1861447, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d61fb7b17b58891bf414b9d53e7bbb0d?s=128&d=identicon&r=PG", "display_name": "Austin", "link": "https://stackoverflow.com/users/1861447/austin"}, "edited": false, "score": 1, "creation_date": 1441850120, "post_id": 32473845, "comment_id": 52843957, "body": "And I had to have #define _GNU_SOURCE as first line in source to avoid RTLD_NEXT not found error."}], "tags": [], "owner": {"reputation": 8543, "user_id": 5008284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AvSMy.jpg?s=128&g=1", "display_name": "meuh", "link": "https://stackoverflow.com/users/5008284/meuh"}, "is_accepted": true, "score": 6, "last_activity_date": 1441784956, "creation_date": 1441784956, "answer_id": 32473845, "question_id": 32472376, "link": "https://stackoverflow.com/questions/32472376/in-c-language-how-to-call-my-function-instead-of-system-library-function/32473845#32473845", "title": "In C language, how to call my function instead of system library function", "body": "<p>Your malloc needs to call the real malloc. Use <code>dlsym(3)</code> to find the symbol.\nRTLD_NEXT finds the next such reference.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;dlfcn.h&gt;\nvoid *malloc(size_t size)\n{\n  static void * (*func)();\n\n  if(!func)\n     func = (void *(*)()) dlsym(RTLD_NEXT, \"malloc\");\n  printf(\"malloc(%d) is called\\n\", size);\n  return(func(size));\n}\n</code></pre>\n"}], "owner": {"reputation": 1255, "user_id": 1861447, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d61fb7b17b58891bf414b9d53e7bbb0d?s=128&d=identicon&r=PG", "display_name": "Austin", "link": "https://stackoverflow.com/users/1861447/austin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 894, "favorite_count": 1, "closed_date": 1441815061, "accepted_answer_id": 32473845, "answer_count": 1, "score": 1, "last_activity_date": 1441784956, "creation_date": 1441780237, "last_edit_date": 1441783954, "question_id": 32472376, "link": "https://stackoverflow.com/questions/32472376/in-c-language-how-to-call-my-function-instead-of-system-library-function", "closed_reason": "Duplicate", "title": "In C language, how to call my function instead of system library function", "body": "<p><strong><em>Platform - Linux</em></strong></p>\n\n<p>I have a typical requirement, where I need to give higher priority to my function then system provided function.</p>\n\n<p>Lets say I have a third party library or executable. It calls many system functions such strcpy or strlen etc. I can not modify the executable/library as I do not have access to code.</p>\n\n<p>Now I have implemented my own strlen or strcpy functions. When the third party library or executable is executing it should call my functions instead of system library functions. </p>\n\n<p>Is it possible. If yes, can somebody guide me how to do this.</p>\n\n<p><strong>LD_PRELOAD trial result</strong></p>\n\n<p>As per suggestion here, I tried with LD_PRELOAD. I tried to override malloc function.</p>\n\n<pre><code>    #include &lt;string.h&gt;\n\n    void *malloc(int size)\n    {\n        void *ptr = NULL;\n        printf(\"Inside my malloc function\\n\");\n        ptr = malloc(size);\n        return ptr;\n    }\n</code></pre>\n\n<p>I put the above code in a c file and built mem.so file and executed below command.</p>\n\n<blockquote>\n  <p>export LD_PRELOAD=./mem.so</p>\n</blockquote>\n\n<p>So now I have overwritten malloc function.</p>\n\n<p>If execute <strong>ls</strong> or <strong>clear</strong> command I get below result, which is logical.</p>\n\n<pre><code>Inside my malloc function\nInside my malloc function\nInside my malloc function\nInside my malloc function\nInside my malloc function\n</code></pre>\n\n<p>It looks my overloaded malloc function is invoked recursively. Only one time call I need. How can I achieve that.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1441777691, "post_id": 32471749, "comment_id": 52804918, "body": "Arrays of characters and <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\"><code>snprintf</code></a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1441779819, "post_id": 32471749, "comment_id": 52805757, "body": "Any reason why you are using float numbers for this? They are inaccurate and possibly slow, and best avoided unless you are doing advanced math. There is no reason why you can&#39;t use int here.  Example: <code>for(int par=1; par&lt;1001; par++)  printf(&quot;%d.%d\\n&quot;, par&#47;10, par%10);</code>"}, {"owner": {"reputation": 2734, "user_id": 2794152, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hxpEu.png?s=128&g=1", "display_name": "an offer can&#39;t refuse", "link": "https://stackoverflow.com/users/2794152/an-offer-cant-refuse"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1441779928, "post_id": 32471749, "comment_id": 52805800, "body": "@Lundin Yes, I am doing numerical calculation, par is truly a float-point number."}], "answers": [{"tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": true, "score": 2, "last_activity_date": 1441778185, "creation_date": 1441778185, "answer_id": 32471882, "question_id": 32471749, "link": "https://stackoverflow.com/questions/32471749/automatically-output-a-bunch-of-files-named-after-a-parameter/32471882#32471882", "title": "automatically output a bunch of files, named after a parameter", "body": "<p>One thing, you are initializing a string constant which are read only. You cannot change it the way you want.</p>\n\n<p>For your requirements, you need a <code>char</code> array, and use <code>sprintf()</code></p>\n\n<pre><code>char str[20];\n\nsprintf(str, \"par-%2.1f.txt\", par);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2734, "user_id": 2794152, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hxpEu.png?s=128&g=1", "display_name": "an offer can&#39;t refuse", "link": "https://stackoverflow.com/users/2794152/an-offer-cant-refuse"}, "edited": false, "score": 0, "creation_date": 1441779089, "post_id": 32472001, "comment_id": 52805454, "body": "I&#39;ve give you a vote up. Your answer also works great! thanks!"}], "tags": [], "owner": {"reputation": 422, "user_id": 4840776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e4846ee49c10e24257150ff8accda638?s=128&d=identicon&r=PG&f=1", "display_name": "koldewb", "link": "https://stackoverflow.com/users/4840776/koldewb"}, "is_accepted": false, "score": 3, "last_activity_date": 1441779155, "last_edit_date": 1441779155, "creation_date": 1441778774, "answer_id": 32472001, "question_id": 32471749, "link": "https://stackoverflow.com/questions/32471749/automatically-output-a-bunch-of-files-named-after-a-parameter/32472001#32472001", "title": "automatically output a bunch of files, named after a parameter", "body": "<p>This should work.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n  FILE * fp; \n  double par;\n  char filename[128];\n\n  for(par=0.1; par&lt;1.001; par+=0.1)\n  {   \n    snprintf(filename, sizeof filename, \"par-%2.1f.txt\", par);\n    // not 100% sure how the float will get parsed in.\n    fp = fopen(filename, \"w\");//I want a changing filename here!!\n    fprintf(fp, \"In this file, par is %lf\", par);\n    fclose(fp);\n  }   \n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2734, "user_id": 2794152, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hxpEu.png?s=128&g=1", "display_name": "an offer can&#39;t refuse", "link": "https://stackoverflow.com/users/2794152/an-offer-cant-refuse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 32471882, "answer_count": 2, "score": 0, "last_activity_date": 1441779155, "creation_date": 1441777566, "question_id": 32471749, "link": "https://stackoverflow.com/questions/32471749/automatically-output-a-bunch-of-files-named-after-a-parameter", "title": "automatically output a bunch of files, named after a parameter", "body": "<p>Here is the situation. I have a parameter named <code>par</code> for example. In the program it ranges from 0.1 to 1.</p>\n\n<pre><code>for(par=0.1; par&lt;1.001;par+=0.1)\n</code></pre>\n\n<p>I want to print out 10 separate files, the name should be named as <code>par-0.1.txt</code>, <code>par-0.2.txt</code>...</p>\n\n<p>In each file, they have their output corresponding to the value of par, say:</p>\n\n<pre><code>fprintf(fp,\"The par in this file is %lf\", par);\n</code></pre>\n\n<p>How can I do this automatically? i.e name the files corresponding to the value of a changing parameter.</p>\n\n<p>For your convenience, I put the program need to modify.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    FILE * fp; \n    double par;\n    const char * filename= \"par-0.1.txt\";\n\n    for(par=0.1; par&lt;1.001; par+=0.1)\n    {   \n        fp = fopen(filename, \"w\");//I want a changing filename here!!\n        fprintf(fp, \"In this file, par is %lf\", par);\n        fclose(fp);\n    }   \n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "image-processing", "geometry", "sdl", "pixel"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1441798745, "post_id": 32471151, "comment_id": 52817697, "body": "<code>for (x = 0; x &lt; height; x++)</code> and <code>for (y = 0; y &lt; width; y++)</code> \u2013 for clarity, you could swap the <code>x</code> and <code>y</code> variable names. (Your further functions <code>get_pixel32</code> seem to suggest the same.) Note that you are reading &#39;out of range&#39; for <code>x+1,2</code> and <code>y+1,2</code>. I&#39;d suggest using <code>for (x = 1; x &lt; width-1; x++)</code> and the same for y, and <code>p1 = get_pixel32(tmp, x-1, y-1);</code> and so on."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3687701, "user_type": "registered", "profile_image": "https://graph.facebook.com/815312453/picture?type=large", "display_name": "Maximus", "link": "https://stackoverflow.com/users/3687701/maximus"}, "edited": false, "score": 1, "creation_date": 1441809399, "post_id": 32475903, "comment_id": 52825753, "body": "Thanks Roger! Managed to do it :)"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 1, "creation_date": 1441874998, "post_id": 32475903, "comment_id": 52854176, "body": "Micro-optimizations: no need for a square root, <code>Dx&#178; + Dy&#178; \u2265 R&#178;</code> will do. And working in integer coordinates, keep <code>\u03b4=Dx&#178;+Dy&#178;-R&#178;</code> updated with <code>\u03b4&#39;=\u03b4+2.Dx+1; Dx&#39;=Dx+1</code> when you increment <code>x</code>."}, {"owner": {"reputation": 24611, "user_id": 2065121, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c92f2d7b7f3af9e4e0c7a5cb1289982b?s=128&d=identicon&r=PG", "display_name": "Roger Rowland", "link": "https://stackoverflow.com/users/2065121/roger-rowland"}, "reply_to_user": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1441876209, "post_id": 32475903, "comment_id": 52854997, "body": "@YvesDaoust Yes, good point. Micro-optimisations should really be a habit, just went for clarity on the original answer so your comment welcome."}], "tags": [], "owner": {"reputation": 24611, "user_id": 2065121, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c92f2d7b7f3af9e4e0c7a5cb1289982b?s=128&d=identicon&r=PG", "display_name": "Roger Rowland", "link": "https://stackoverflow.com/users/2065121/roger-rowland"}, "is_accepted": true, "score": 2, "last_activity_date": 1441791019, "creation_date": 1441791019, "answer_id": 32475903, "question_id": 32471151, "link": "https://stackoverflow.com/questions/32471151/focusing-of-an-image/32475903#32475903", "title": "Focusing Of An Image", "body": "<p>If I understand correctly, within your nested loop, You have an (x,y) coordinate, and you want to determine whether or not this is inside some circle of radius, say <code>fRadius</code>, from a centre point, say <code>(nCX, nCY)</code>.</p>\n\n<p>If so, you need to determine how far the (x,y) pixel is from the centre. So first subtract the centre point from your (x,y) to get the vector from the centre to your point:</p>\n\n<pre><code>float fDX = (float)(x - nCX);\nfloat fDY = (float)(y - nCY);\n</code></pre>\n\n<p>Now find the length of that vector:</p>\n\n<pre><code>float fLen = sqrt((fDX * fDX) + (fDY * fDY));\n</code></pre>\n\n<p>Then, your condition for blurring is just:</p>\n\n<pre><code>if (fLen &gt;= fRadius) \n{\n    // ... blur at this pixel\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3687701, "user_type": "registered", "profile_image": "https://graph.facebook.com/815312453/picture?type=large", "display_name": "Maximus", "link": "https://stackoverflow.com/users/3687701/maximus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 32475903, "answer_count": 1, "score": 2, "last_activity_date": 1441887675, "creation_date": 1441774403, "last_edit_date": 1441887675, "question_id": 32471151, "link": "https://stackoverflow.com/questions/32471151/focusing-of-an-image", "title": "Focusing Of An Image", "body": "<p>I need to do some image processing to blur the entire image except the central 30% of that image. I've done the blurring and central focusing part. But the current focusing area is a rectangle which I dont think it is the best possible output since majority of the image processing tools use a circle instead.\n  But how can I achieve that? I tried finding the mid point coordinate of the image by using width / 2 and height / 2. And to find the coordinate of the rest of pixel that will be the circumference of the circle by using newX = centralX + radius * cos D, newY = centralY + radius * sin D, with D being the degree / angle.  </p>\n\n<pre><code>SDL_Surface *centralFocus(SDL_Surface * surface)\n{\nSDL_Surface *tmp = surface;\n\nint width = tmp-&gt;w;\nint height = tmp-&gt;h;\nint x, y, radius;\nint circumferenceCoordinate[8][2], midpoint[2];\nfloat avg_r = 0, avg_g = 0, avg_b = 0;\n\nUint32 cur_pixel;\n\n//Initializing Array, Radius &amp; Midpoint, 0 = X-axis, 1 = Y-axis\n\nmidpoint[0] = width / 2;\nmidpoint[1] = height / 2;\n\nradius = sqrt((width * height * 0.3) / 3.142);\n\nfor (int i = 0; i &lt; 8; i++){\n    for (int j = 0; j &lt; 2; j++){\n        circumferenceCoordinate[i][j] = 0;\n    }\n}\n\nif (SDL_MUSTLOCK(tmp))\n    SDL_LockSurface(tmp);\n\nfor (x = 0; x &lt; height; x++) {\n    for (y = 0; y &lt; width; y++){\n        if ((x &lt; midpoint[1] - radius || x &gt; midpoint[1] + radius) || (y &lt; midpoint[0] - radius || y &gt; midpoint[0] + radius))\n        {\n            //Extracting 9 Pixels\n\n            Uint32 p1 = get_pixel32(tmp, y, x);\n            Uint32 p2 = get_pixel32(tmp, y, x + 1);\n            Uint32 p3 = get_pixel32(tmp, y, x + 2);\n\n            Uint32 p4 = get_pixel32(tmp, y + 1, x);\n            Uint32 p5 = get_pixel32(tmp, y + 1, x + 1);\n            Uint32 p6 = get_pixel32(tmp, y + 1, x + 2);\n\n            Uint32 p7 = get_pixel32(tmp, y + 2, x);\n            Uint32 p8 = get_pixel32(tmp, y + 2, x + 1);\n            Uint32 p9 = get_pixel32(tmp, y + 2, x + 2);\n\n            //Calculating Average For Each Channel\n\n            calculateAvg(avg_r, avg_g, avg_b, p1, p2, p3, p4, p5, p6, p7, p8, p9);\n\n            //Converting RGB Into Pixel\n\n            cur_pixel = SDL_MapRGB(tmp-&gt;format, (Uint8)avg_r, (Uint8)avg_g, (Uint8)avg_b);\n\n            //Placing Average Pixel Value\n\n            put_pixel32(tmp, y, x, cur_pixel);\n        }\n    }\n}\n\nif (SDL_MUSTLOCK(tmp))\n    SDL_UnlockSurface(tmp);\n\nreturn tmp;\n}\n</code></pre>\n"}, {"tags": ["c", "dbg"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1441774616, "post_id": 32471148, "comment_id": 52803901, "body": "Compile with all warnings &amp; debug info (<code>gcc -Wall -Wextra -g</code> if using <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>. Use the debugger (<code>gdb</code>) and set <i>watchpoints</i> (with the <code>watch</code> command of <code>gdb</code>)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1441774781, "post_id": 32471148, "comment_id": 52803960, "body": "You probably should read a lot more about C programming and understand what is <a href=\"https://en.wikipedia.org/wiki/Pointer_aliasing\" rel=\"nofollow noreferrer\">pointer aliasing</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2868, "user_id": 1534664, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0UWAP.jpg?s=128&g=1", "display_name": "user1534664", "link": "https://stackoverflow.com/users/1534664/user1534664"}, "edited": false, "score": 0, "creation_date": 1441775332, "post_id": 32471234, "comment_id": 52804113, "body": "So what should it be instead? Should I even be assigning the null terminator?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 2868, "user_id": 1534664, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0UWAP.jpg?s=128&g=1", "display_name": "user1534664", "link": "https://stackoverflow.com/users/1534664/user1534664"}, "edited": false, "score": 1, "creation_date": 1441775436, "post_id": 32471234, "comment_id": 52804144, "body": "If you want a string then of course you must NUL terminate. Just make your string buffers 33 instead of 32 bytes."}], "tags": [], "owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "is_accepted": true, "score": 4, "last_activity_date": 1441774873, "creation_date": 1441774873, "answer_id": 32471234, "question_id": 32471148, "link": "https://stackoverflow.com/questions/32471148/value-of-string-magically-changes-after-function-is-used-on-a-different-string/32471234#32471234", "title": "Value of string magically changes after function is used on a different string", "body": "<p><code>string[32] = '\\0';</code></p>\n\n<p>That overflows your input buffer. And I think you'll find that your <code>string1</code> is immediately after <code>string2</code> in memory. So overflowing <code>string2</code> by 1 byte will run into <code>string1</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 2, "last_activity_date": 1441774941, "creation_date": 1441774941, "answer_id": 32471248, "question_id": 32471148, "link": "https://stackoverflow.com/questions/32471148/value-of-string-magically-changes-after-function-is-used-on-a-different-string/32471248#32471248", "title": "Value of string magically changes after function is used on a different string", "body": "<p>You're trying to store a 32-bit binary number in 32 bytes; you forgot to allocate an extra byte for the null terminator.  When the null is written after <code>string2</code>, it clobbers the start of <code>string1</code>.</p>\n\n<p>Undefined behaviour (writing beyond the end of an array) leads to undefined results.</p>\n"}], "owner": {"reputation": 2868, "user_id": 1534664, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0UWAP.jpg?s=128&g=1", "display_name": "user1534664", "link": "https://stackoverflow.com/users/1534664/user1534664"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 32471234, "answer_count": 2, "score": -2, "last_activity_date": 1441775071, "creation_date": 1441774383, "last_edit_date": 1441775071, "question_id": 32471148, "link": "https://stackoverflow.com/questions/32471148/value-of-string-magically-changes-after-function-is-used-on-a-different-string", "title": "Value of string magically changes after function is used on a different string", "body": "<p><a href=\"https://i.stack.imgur.com/PT4BH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PT4BH.png\" alt=\"enter image description here\"></a></p>\n\n<p>As shown in this dbg debug log, <code>string1 = '0' &lt;repeats 28 times&gt;, \"1000\"</code> is printed after the intToBinary(num1, string1) function call. But then on the next instruction intToBinary(num2, string2) is called. As you can see <strong>different</strong> parameters are passed to the intToBinary function. How come the variable <code>string1</code> is affected by the second time the function is called using <strong>different</strong> variables? In the log it says the first character changes from 0 to <code>\\</code> (or <code>\\0</code>?). </p>\n\n<p>Here's the pastebin of the function in case necessary. <a href=\"http://pastebin.com/EsQNMjej\" rel=\"nofollow noreferrer\">http://pastebin.com/EsQNMjej</a></p>\n\n<pre><code>void intToBinary(int num, char* string)\n{\n    string[32] = '\\0';\n    int i,j;\n    int temp = num;\n\n    // is num negative?\n    int isNegative = num &lt; 0 ? 1 : 0;\n\n    //negate all bits and add 1 (two complements)\n    if(isNegative)\n    {\n        temp = -1 * temp; //absolute value\n\n        //In order to get the negative number in\n        // 2's complement you can either negate and\n        // increment, or decrement by 1 and negate.\n        //In this function, temp gets negated after\n        //the conversion to string\n        --temp;\n    }\n\n    //Write binary of positive num to string\n    for(i = 0, j = 31; i &lt; 32; i++,j--)\n    {\n        if(pow(2,j) &lt;= temp)\n        {\n           //Temp is decreased when the bit is 1\n           temp = temp - pow(2, j);\n           string[i] = '1';\n        }\n        else\n        {\n            //Nothing happens to temp when the bit is 0\n            string[i] = '0';\n        }\n    }\n\n    if(isNegative)\n    {\n        for(i = 0; i &lt; 32; i++)\n        {\n            //negate bits\n            string[i] = string[i] == '1' ? '0' : '1';\n        }\n    }\n}\n</code></pre>\n\n<p>I just don't get what's going on here. I tried switching the order of the two function calls, so it got changed to the following </p>\n\n<pre><code>intToBinary(num2, string2);\nintToBinary(num1, string1);\n</code></pre>\n\n<p>And magically, the first byte stays <code>'0'</code>, which is what I want. But now I just want to know why this changed in the first place... </p>\n"}, {"tags": ["c", "udp", "winsock", "winsock2"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441862785, "post_id": 32471004, "comment_id": 52847460, "body": "this is the syntax for the setsockopt() function: <code>int setsockopt(int sockfd, int level, int optname,                       const void *optval, socklen_t optlen); </code> which is not what is being passed as the 5th parameter to setsockopt"}], "answers": [{"comments": [{"owner": {"reputation": 879, "user_id": 5295185, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-nTewOraPS5Q/AAAAAAAAAAI/AAAAAAAAAAA/Ef1u0gQxeNc/photo.jpg?sz=128", "display_name": "Kautham Krishna", "link": "https://stackoverflow.com/users/5295185/kautham-krishna"}, "edited": false, "score": 0, "creation_date": 1441777375, "post_id": 32471539, "comment_id": 52804805, "body": "please refer the answer of this post <a href=\"http://stackoverflow.com/questions/32433403/winsock-auto-find-server-using-udp-broadcast-by-client\" title=\"winsock auto find server using udp broadcast by client\">stackoverflow.com/questions/32433403/&hellip;</a> . I wrote this answer after checking and successfully executing the codes in visual studios 2012. Also according to WSAGetLastError() documentation it can be called even if the WSAStartup() fails. Also on the client side i tried both SOCKET_ERROR and INVALID_SOCKET. On both case socket creation is a success. But thanks for giving me the idea about bind."}, {"owner": {"reputation": 879, "user_id": 5295185, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-nTewOraPS5Q/AAAAAAAAAAI/AAAAAAAAAAA/Ef1u0gQxeNc/photo.jpg?sz=128", "display_name": "Kautham Krishna", "link": "https://stackoverflow.com/users/5295185/kautham-krishna"}, "edited": false, "score": 0, "creation_date": 1441777807, "post_id": 32471539, "comment_id": 52804953, "body": "I just now tried binding. Since i am running both the programs in the same computer it returns error in binding. Could you think of any other way to do it?????"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 879, "user_id": 5295185, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-nTewOraPS5Q/AAAAAAAAAAI/AAAAAAAAAAA/Ef1u0gQxeNc/photo.jpg?sz=128", "display_name": "Kautham Krishna", "link": "https://stackoverflow.com/users/5295185/kautham-krishna"}, "edited": false, "score": 0, "creation_date": 1441777986, "post_id": 32471539, "comment_id": 52805017, "body": "In the answer you linked to, the client is calling <code>sendto()</code> before calling <code>recvfrom()</code>, so it is performing an implicit <code>bind()</code>.  Your code is not doing that, so you need an explicit <code>bind()</code>. But you cannot bind the client and server to the same <code>INADDR_ANY:8888</code> port when they are running on the same machine. Change the server to broadcast on a different port, and change the client to bind to that port for receiving."}, {"owner": {"reputation": 879, "user_id": 5295185, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-nTewOraPS5Q/AAAAAAAAAAI/AAAAAAAAAAA/Ef1u0gQxeNc/photo.jpg?sz=128", "display_name": "Kautham Krishna", "link": "https://stackoverflow.com/users/5295185/kautham-krishna"}, "edited": false, "score": 0, "creation_date": 1441778877, "post_id": 32471539, "comment_id": 52805366, "body": "I done editing my code. Now the client runs without any error.But the client is not receiving the servers broadcast. The recvfrom() command is just waiting.I tried using only hum alone or just addr alone,but still the result is same."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 879, "user_id": 5295185, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-nTewOraPS5Q/AAAAAAAAAAI/AAAAAAAAAAA/Ef1u0gQxeNc/photo.jpg?sz=128", "display_name": "Kautham Krishna", "link": "https://stackoverflow.com/users/5295185/kautham-krishna"}, "edited": false, "score": 0, "creation_date": 1441802128, "post_id": 32471539, "comment_id": 52820175, "body": "@KauthamKrishna Are you still sending to <code>INADDR_BROADCAST</code>?  If so, you need to change that to the broadcast address of the subnet you&#39;re sending on."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 3, "last_activity_date": 1441778418, "last_edit_date": 1441778418, "creation_date": 1441776508, "answer_id": 32471539, "question_id": 32471004, "link": "https://stackoverflow.com/questions/32471004/udp-client-not-receiving-udp-server-message/32471539#32471539", "title": "UDP client not receiving UDP server message", "body": "<p>If you read the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740120.aspx\" rel=\"nofollow\"><code>recvfrom()</code> documentation</a>, it tells you <em>exactly</em> why you are getting the error in your client code:</p>\n\n<blockquote>\n  <p>Parameters<br/></p>\n  \n  <p>s [in]<br/>\n  A descriptor identifying a <strong>bound</strong> socket.</p>\n  \n  <p>...</p>\n  \n  <p>WSAEINVAL<br/> \n  <strong>The socket has not been bound with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms737550.aspx\" rel=\"nofollow\">bind</a></strong>, or an unknown flag was specified, or MSG_OOB was specified for a socket with SO_OOBINLINE enabled, or (for byte stream-style sockets only) len was zero or negative.</p>\n</blockquote>\n\n<p>You are not calling <code>bind()</code> on the socket before calling <code>recvfrom()</code>.  More importantly, you cannot <code>bind()</code> the client and server to the same IP/port when they are running on the same machine.  Change the port that you broadcast to, and then have the client bind to that port.</p>\n\n<p>Also, the last two parameters of <code>recvfrom()</code> provide you with the IP/Port of the datagram sender.  They are not for specifying the network adapter to read datagrams on.  You do not need to use <code>getpeername()</code> in this situation.</p>\n\n<p>There are some other issues with your code:</p>\n\n<p>On the client side, <code>socket()</code> returns <code>INVALID_SOCKET</code> on failure, not <code>SOCKET_ERROR</code>.</p>\n\n<p>On the server side, you really should not be using <code>INADDR_BROADCAST</code>.  You should <code>bind()</code> the server socket to a specific network adapter and then <code>sendto()</code> its particular subnet broadcast IP, which you can calculate using <code>GetAdaptersInfo()</code> or <code>GetAdaptersAddresses()</code>.</p>\n\n<p>And on both sides, you cannot use <code>WSAGetLastError()</code> if <code>WSAStartup()</code> fails, that is why <code>WSAStartup()</code> returns the error code directly.  And you are not closing the sockets before calling <code>WSACleanup()</code>;</p>\n\n<p>Try this:</p>\n\n<p>SERVER CODE:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;stdio.h&gt;\n#include &lt;WinSock2.h&gt;\n#pragma comment (lib,\"ws2_32.lib\")\n\nDWORD WINAPI UDPCONN(LPVOID x)\n{\n    SOCKET s = (SOCKET)x;\n    char bro[200] = \"I am SERVER\";\n    struct sockaddr_in hum;\n\n    memset(&amp;hum, 0, sizeof(addr));\n    hum.sin_family = AF_INET;\n    hum.sin_addr.s_addr = INADDR_BROADCAST; // TODO: replace with subnet broadcast IP\n    hum.sin_port = htons(8887);\n\n    while (1)\n    {\n        if (sendto(s, bro, sizeof(bro), 0, (struct sockaddr *)&amp;hum, sizeof(hum)) == SOCKET_ERROR)\n        {\n            printf(\"\\nBroadcast failed ERROR CODE : %d\\n\", WSAGetLastError());\n            return 1;\n        }\n    }\n\n    return 0;\n }\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    SOCKET s;\n    struct sockaddr_in hum;\n    int err, opt=1;\n\n    //Initializing winsock2\n    WSADATA wsa;\n    err = WSAStartup(MAKEWORD(2,2), &amp;wsa);\n    if (err != 0)\n    {\n        printf(\"\\nWinsock Not initialized ERROR CODE : %d\\n\", err);\n        return 1;\n    }\n\n    //UDP Socket Creation\n    s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);\n    if (s == INVALID_SOCKET)\n    {\n        printf(\"\\nUDP Socket not created ERROR CODE : %d\\n\", WSAGetLastError());\n        WSACleanup();\n        return 1;\n    }\n\n    //socket defenition\n    memset(&amp;hum, 0, sizeof(hum));\n    hum.sin_family = AF_INET;\n    hum.sin_addr.s_addr = INADDR_ANY; // TODO: replace with a specific NIC IP\n    hum.sin_port = htons(8888);\n\n    //Broadcast permission\n    if (setsockopt(s, SOL_SOCKET, SO_BROADCAST, (char *)&amp;opt, sizeof(opt)) == SOCKET_ERROR)\n    {\n        printf(\"\\nBroadcast permissions failed ERROR CODE : %d\\n\", WSAGetLastError());\n        closesocket(s);\n        WSACleanup();\n        return 1;\n    }\n\n    //UDP SOCKET Binding \n    if (bind(s, (sockaddr *)&amp;hum, sizeof(hum)) == SOCKET_ERROR)\n    {\n        printf(\"\\nUDP socket binding failed ERROR CODE : %d\\n\", WSAGetLastError());\n        closesocket(s);\n        WSACleanup();\n        return 1;\n    }\n\n    //UDP connection thread\n    DWORD th;\n    HANDLE hThread = CreateThread(NULL,0, UDPCONN, s, 0, &amp;th);\n    if (!hThread)\n    {\n        printf(\"\\nUDP thread failed ERROR CODE : %u\\n\", GetLastError());\n        closesocket(s);\n        WSACleanup();\n        return 1;\n    }\n\n    // do other things, wait for thread to terminate ...\n\n    DWORD exitCode = 0;\n    GetExitCodeThread(hThread, &amp;exitCode);\n    CloseHandle(hThread);\n\n    closesocket(s);\n    WSACleanup();\n\n    return exitCode;\n}\n</code></pre>\n\n<p>CLIENT CODE :</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;stdio.h&gt;\n#include &lt;WinSock2.h&gt;\n#pragma comment(lib,\"ws2_32.lib\")\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    //UDP Data\n    int addrlen, msglen;\n    char message[300];\n    int err, opt=1;\n    SOCKET s;\n    struct sockaddr_in hum, addr;\n\n    //Initializing winsock\n    WSADATA wsa;\n    err = WSAStartup(MAKEWORD(2,2), &amp;wsa);\n    if (err != 0)\n    {\n        printf(\"\\nFailed Initializing Winsock EROR CODE : %d\\n\", err);\n        return 1;\n    }\n\n    //UDP Socket creation\n    s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);\n    if (s == INVALID_SOCKET)\n    {\n        printf(\"\\nUDP socket creation failed ERROR CODE : %d\\n\", WSAGetLastError());\n        closesocket(s);\n        WSACleanup();\n        return 1;\n    }\n\n    //UDP Broadcast permissions\n    if (setsockopt(s, SOL_SOCKET, SO_BROADCAST, (char *)&amp;opt, sizeof(opt)) == SOCKET_ERROR)\n    {\n        printf(\"\\nERROR in broadcasting ERROR CODE : %d \\n\", WSAGetLastError());\n        closesocket(s);\n        WSACleanup();\n        return 1;\n    }\n\n    //UDP socket definition\n    memset(&amp;hum, 0, sizeof(addr));\n    hum.sin_family = AF_INET;\n    hum.sin_addr.s_addr = INADDR_ANY;\n    hum.sin_port = htons(8887);\n\n    //UDP SOCKET Binding \n    if (bind(s, (sockaddr *)&amp;hum, sizeof(hum)) == SOCKET_ERROR)\n    {\n        printf(\"\\nUDP socket binding failed ERROR CODE : %d\\n\", WSAGetLastError());\n        closesocket(s);\n        WSACleanup();\n        return 1;\n    }\n\n    //UDP Receiving broadcasted data\n    addrlen = sizeof(addr);\n    msglen = recvfrom(s, message, sizeof(message), 0, (struct sockaddr *)&amp;addr, &amp;addrlen);\n    if (msglen == SOCKET_ERROR)\n    {\n        printf(\"\\nUDP Broadcast not received ERROR CODE : %d\\n\", WSAGetLastError());\n        closesocket(s);\n        WSACleanup();\n        return 1;\n    }\n\n    printf(\"\\nGot server broadcast\\n\");\n    printf(\"\\nServer ip: %s, port: %hu\\n\", inet_ntoa(addr.sin_addr), ntohs(addr.sin_port));\n    printf(\"\\nMessage: %.*s\\n\", msglen, message);\n\n    ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441863446, "post_id": 32493198, "comment_id": 52847728, "body": "compile and link before commenting.  Difficult to do since so much of the code is specific to visual studio and windows.   In any case, when compiling, always enable all the warnings.   Then, amongst other things, would have seen the compiler raise at least two warnings for the client: 1) unused parameter: argc 2) unused parameter: argv[].  Similar considerations for the server code.  then we notice that the server code is missing several lines on the end of the main function.   So, 1) the code does not cleanly compile and 2) the server code is missing some lines."}, {"owner": {"reputation": 879, "user_id": 5295185, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-nTewOraPS5Q/AAAAAAAAAAI/AAAAAAAAAAA/Ef1u0gQxeNc/photo.jpg?sz=128", "display_name": "Kautham Krishna", "link": "https://stackoverflow.com/users/5295185/kautham-krishna"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441867170, "post_id": 32493198, "comment_id": 52849420, "body": "yes the code is missing.It is just one part of my big program as i mentioned earlier. Do you want me to to write everything for you? I presented this program just to tell others that there is another way to do that program and by giving this code i gave them the logic to write the code. And about argc and argv i never used them in the whole program too.That&#39;s why i mentioned vs2012. I am not kidding around here to present an unworthy answer.Check even my question was in the same way.So before commenting keep in mind that stackoverflow is for helping coders.not to spoon feed them."}], "tags": [], "owner": {"reputation": 879, "user_id": 5295185, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-nTewOraPS5Q/AAAAAAAAAAI/AAAAAAAAAAA/Ef1u0gQxeNc/photo.jpg?sz=128", "display_name": "Kautham Krishna", "link": "https://stackoverflow.com/users/5295185/kautham-krishna"}, "is_accepted": true, "score": -1, "last_activity_date": 1441859839, "last_edit_date": 1441859839, "creation_date": 1441859457, "answer_id": 32493198, "question_id": 32471004, "link": "https://stackoverflow.com/questions/32471004/udp-client-not-receiving-udp-server-message/32493198#32493198", "title": "UDP client not receiving UDP server message", "body": "<p>Whatever method i tried sending a broadcast from server and receiving the broadcast from client is not working efficiently.</p>\n\n<p>Instead i done the reverse i.e send a broadcast from client to search for the server is working perfectly.</p>\n\n<p>Here is my modified code.</p>\n\n<p>SERVER CODE:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include&lt;stdio.h&gt;\n#include&lt;WinSock2.h&gt;\n#pragma comment (lib,\"ws2_32.lib\")\n\nDWORD WINAPI UDPCONN(LPVOID x)\n{\n\nSOCKET s=(SOCKET)x;\nstruct sockaddr_in server;\nint len;\nchar buf[500]=(\"I am server\");\n\nchar message[500];\nlen=sizeof(server);\n\nint opt=1;\n\nif((s=socket(AF_INET,SOCK_DGRAM,IPPROTO_UDP))==INVALID_SOCKET)\n{\n    printf(\"\\nSocket creation failed. ERROR CODE : %d\\n\",WSAGetLastError());\n    WSACleanup();\n    ExitThread(NULL);\n}\n\nserver.sin_family=AF_INET;\nserver.sin_addr.s_addr=INADDR_ANY;\nserver.sin_port=htons(8888);\n\nif(setsockopt(s,SOL_SOCKET,SO_BROADCAST,(char *)&amp;opt,sizeof(opt))&lt;0)\n{\n    printf(\"\\nSetting broadcast failed : %d\\n\",WSAGetLastError());\n    WSACleanup();\n    ExitThread(NULL);\n}\nif((bind(s,(sockaddr *)&amp;server,sizeof(server)))==SOCKET_ERROR)\n{\n    printf(\"\\nBind failed. ERROR CODE : %d\\n\",WSAGetLastError());\n    WSACleanup();\n    ExitThread(NULL);\n}\n\nwhile(1)\n{\n\n    fflush(stdout);\n     memset(message,'\\0', 500);\n    //try to receive some data, this is a blocking call\n    if (recvfrom(s, message, 500, 0, (struct sockaddr *) &amp;server,&amp;len) == SOCKET_ERROR)\n    {\n        printf(\"recvfrom() failed with error code : %d\" , WSAGetLastError());\n        ExitThread(NULL);\n    }\n\n    if(sendto(s,buf,sizeof(buf),0,(struct sockaddr *)&amp;server,sizeof(server))==SOCKET_ERROR)\n    {\n        printf(\"\\nIP Broadcast failed ERROR code : %d\\n\",WSAGetLastError());\n        WSACleanup();\n        ExitThread(NULL);\n    }\n }\n\n}\nint _tmain(int argc, _TCHAR* argv[])\n{\nSOCKET s;\n//struct sockaddr_in hum;\nint opt=1;\n//Initializing winsock2\nWSADATA wsa;\nif((WSAStartup(MAKEWORD(2,2),&amp;wsa))!=0)\n{\n    printf(\"\\nWinsock Not initialized ERROR CODE : %d\\n\",WSAGetLastError());\n    return 1;\n}\ns=socket(AF_INET,SOCK_DGRAM,IPPROTO_UDP);\n\n//UDP connection thread\nDWORD th;\nCreateThread(NULL,0,UDPCONN,(LPVOID)s,0,&amp;th);\nclosesocket(s);\n</code></pre>\n\n<p>CLIENT CODE :</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;stdio.h&gt;\n#include &lt;WinSock2.h&gt;\n#pragma comment(lib,\"ws2_32.lib\")\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n//UDP Data\nint slen;\nchar message[600];\nchar buf[300]=(\"Hai server\");\nint opt=1;\nSOCKET s;\nstruct sockaddr_in sent;\n\n//TCP Connection data\nSOCKET t;\nstruct sockaddr_in server;\nchar messag[300],server_reply[300];\nint recv_size;\n\n\n//Initializing winsock\nWSADATA wsa;\nif((WSAStartup(MAKEWORD(2,2),&amp;wsa))!=0)\n{\n    printf(\"\\nFailed Initializing Winsock EROR CODE : %d\\n\",WSAGetLastError());\n    return 1;\n}\n\n//UDP Socket creation\nif((s=socket(AF_INET,SOCK_DGRAM,IPPROTO_UDP))== INVALID_SOCKET)\n{\n    printf(\"\\nUDP socket creation failed ERROR CODE :%d\\n\",WSAGetLastError());\n    WSACleanup();\n    return 1;\n}\n\n//UDP Broadcast permissions\nif((setsockopt(s,SOL_SOCKET,SO_BROADCAST,(char *)&amp;opt,sizeof(opt)))&lt;0)\n    {\n        printf(\"\\nERROR in broadcasting ERROR CODE : %d \\n\",WSAGetLastError());\n        WSACleanup();\n        return 1;\n    }\n\n//UDP socket definition\nsent.sin_family=AF_INET;\nsent.sin_addr.s_addr=INADDR_BROADCAST;\nsent.sin_port=htons(8888);\n\nif (sendto(s, buf, sizeof(buf) , 0 , (struct sockaddr *) &amp;sent,sizeof(sent)) == SOCKET_ERROR)\n    {\n        printf(\"sendto() failed with error code : %d\" , WSAGetLastError());\n        exit(EXIT_FAILURE);\n    }\n\n//UDP Receiving broadcasted data\nslen=sizeof(sent);\nfflush(stdout);\nmemset(message,'\\0',300);\nif((recvfrom(s,message,sizeof(message),0,(struct sockaddr *)&amp;sent,&amp;slen))&lt;0)\n{\n    printf(\"\\nUDP Broadcast not received ERROR CODE : %d\\n\",WSAGetLastError());\n    WSACleanup();\n    return 1;\n}\nputs(\"\\nGot server broadcast\\n\");\nputs(\"\\nTracing server ip\\n\");\ngetpeername(s,(sockaddr *)&amp;sent,&amp;slen);\nclosesocket(s);\n</code></pre>\n\n<p>Both the codes here works perfectly fine in visual studios 2012.\nAlso this is just one part of my whole big program. But still this part works perfectly fine independently.</p>\n\n<p>So please make sure you compiled and run the program before posting negative comments.</p>\n"}], "owner": {"reputation": 879, "user_id": 5295185, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-nTewOraPS5Q/AAAAAAAAAAI/AAAAAAAAAAA/Ef1u0gQxeNc/photo.jpg?sz=128", "display_name": "Kautham Krishna", "link": "https://stackoverflow.com/users/5295185/kautham-krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4068, "favorite_count": 1, "accepted_answer_id": 32493198, "answer_count": 2, "score": 1, "last_activity_date": 1441859839, "creation_date": 1441773541, "last_edit_date": 1441776549, "question_id": 32471004, "link": "https://stackoverflow.com/questions/32471004/udp-client-not-receiving-udp-server-message", "title": "UDP client not receiving UDP server message", "body": "<p>Hai friends I am a newbie learning winsock2. the following is my udp server and client programs.</p>\n\n<p>I this program the client does not know the ip address of the server but knows only the port. But the server broadcasts a message all over the network.</p>\n\n<p>when the client gets the message it traces back the ip of the server and connects to it. </p>\n\n<p>Both my server and client show no error while compiling. </p>\n\n<p>But while Executing the client's recvfrom() statement shows error\nthe following are the part of my code.</p>\n\n<p>SERVER CODE:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include&lt;stdio.h&gt;\n#include&lt;WinSock2.h&gt;\n#pragma comment (lib,\"ws2_32.lib\")\n\nDWORD WINAPI UDPCONN(LPVOID x)\n{\n    SOCKET s=(SOCKET)x;\n    char bro[200]=\"I am SERVER\";\n    struct sockaddr_in hum;\n    hum.sin_family=AF_INET;\n    hum.sin_addr.s_addr=INADDR_BROADCAST;\n    hum.sin_port=htons(8888);\n    while (1)\n    {\n        if(sendto(s,bro,sizeof(bro),0,(struct sockaddr *)&amp;hum,sizeof(hum))==SOCKET_ERROR)\n        {\n            printf(\"\\nBroadcast failed ERROR CODE : %d\\n\",WSAGetLastError());\n            exit(1);\n        }\n    }\n }\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    SOCKET s;\n    struct sockaddr_in hum;\n    int opt=1;\n\n    //Initializing winsock2\n    WSADATA wsa;\n    if((WSAStartup(MAKEWORD(2,2),&amp;wsa))!=0)\n    {\n        printf(\"\\nWinsock Not initialized ERROR CODE : %d\\n\",WSAGetLastError());\n        return 1;\n    }\n\n    //UDP Socket Creation\n    if((s=socket(AF_INET,SOCK_DGRAM,IPPROTO_UDP))==INVALID_SOCKET)\n    {\n        printf(\"\\nUDP Socket not created ERROR CODE : %d\\n\",WSAGetLastError());\n        WSACleanup();\n        return 1;\n    }\n\n    //socket defenition\n    hum.sin_family=AF_INET;\n    hum.sin_addr.s_addr=INADDR_ANY;\n    hum.sin_port=htons(8888);\n\n    //Broadcast permission\n    if((setsockopt(s,SOL_SOCKET,SO_BROADCAST,(char *)&amp;opt,sizeof(opt)))&lt;0)\n    {\n        printf(\"\\nBroadcast permissions failed ERROR CODE : %d\\n\",WSAGetLastError());\n        WSACleanup();\n        return 1;\n    }\n\n    //UDP SOCKET Binding \n    if((bind(s,(sockaddr *)&amp;hum,sizeof(hum)))==SOCKET_ERROR)\n    {\n        printf(\"\\nUDP socket binding failed ERROR CODE :%d\\n\",WSAGetLastError());\n        WSACleanup();\n        return 1;\n    }\n\n    //UDP connection thread\n    DWORD th;\n    CreateThread(NULL,0,UDPCONN,(LPVOID)s,0,&amp;th);\n</code></pre>\n\n<p>CLIENT CODE :</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;stdio.h&gt;\n#include &lt;WinSock2.h&gt;\n#pragma comment(lib,\"ws2_32.lib\")\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    //UDP Data\n    int slen;\n    char message[300];\n    int opt=1;\n    SOCKET s;\n    struct sockaddr_in sent;\n\n    //Initializing winsock\n    WSADATA wsa;\n    if((WSAStartup(MAKEWORD(2,2),&amp;wsa))!=0)\n    {\n        printf(\"\\nFailed Initializing Winsock EROR CODE : %d\\n\",WSAGetLastError());\n        return 1;\n    }\n\n    //UDP Socket creation\n    if((s=socket(AF_INET,SOCK_DGRAM,IPPROTO_UDP))== SOCKET_ERROR)\n    {\n        printf(\"\\nUDP socket creation failed ERROR CODE :%d\\n\",WSAGetLastError());\n        WSACleanup();\n        return 1;\n    }\n\n    //UDP Broadcast permissions\n    if((setsockopt(s,SOL_SOCKET,SO_BROADCAST,(char *)&amp;opt,sizeof(opt)))&lt;0)\n    {\n        printf(\"\\nERROR in broadcasting ERROR CODE : %d \\n\",WSAGetLastError());\n        WSACleanup();\n        return 1;\n    }\n\n    //UDP socket definition\n    sent.sin_family=AF_INET;\n    sent.sin_addr.s_addr=INADDR_ANY;\n    sent.sin_port=htons(8888);\n\n    //UDP Receiving broadcasted data\n    slen=sizeof(sent);\n    //fflush(stdout);\n    memset(message,'\\0',300);\n    if((recvfrom(s,message,sizeof(message),0,(struct sockaddr *)&amp;sent,&amp;slen))&lt;0)\n    {\n        printf(\"\\nUDP Broadcast not received ERROR CODE : %d\\n\",WSAGetLastError());\n        WSACleanup();\n        return 1;\n    }\n    puts(\"\\nGot server broadcast\\n\");\n    puts(\"\\nTracing server ip\\n\");\n    getpeername(s,(sockaddr *)&amp;sent,&amp;slen);\n\n    ...\n}\n</code></pre>\n\n<p>Here my client throw an error </p>\n\n<pre><code>UDP Broadcast not received ERROR CODE : 10022\n</code></pre>\n\n<p>Description of the error code 10022 : Invalid argument.</p>\n\n<p>Some invalid argument was supplied (for example, specifying an invalid level to the setsockopt function). In some instances, it also refers to the current state of the socket\u2014for instance, calling accept on a socket that is not listening.</p>\n\n<p>According to the error description one of the arguments in the <code>recvfrom()</code> function is invalid. But i could not find out the invalid argument .</p>\n\n<p>Please help me clear the error.</p>\n"}, {"tags": ["c", "linux", "x86", "linux-device-driver", "acpi"], "owner": {"reputation": 954, "user_id": 5275810, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d31b4edfdb153437e0d3daa54e33ffc7?s=128&d=identicon&r=PG&f=1", "display_name": "anikhan", "link": "https://stackoverflow.com/users/5275810/anikhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1441774676, "creation_date": 1441770701, "last_edit_date": 1441774676, "question_id": 32470619, "link": "https://stackoverflow.com/questions/32470619/how-acpi-tables-are-sent-to-linux-from-seabios", "title": "How ACPI Tables are sent to linux from SeaBIOS", "body": "<p>I am working on linux device drivers on intel atom rangeley board. We can use DTS and ACPI for providing platform device information. </p>\n\n<p>I am currently using ACPI Tables, want to understand how ACPI tables are transferred to linux through SeaBIOS.</p>\n\n<p>Correct me if i am thinking wrong, Thanks in advance .</p>\n"}, {"tags": ["c", "linux", "android-ndk", "libpcap"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5315167, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-m62wRSlxogk/AAAAAAAAAAI/AAAAAAAACeQ/Iooa4Kf_0BQ/photo.jpg?sz=128", "display_name": "muscle nerd", "link": "https://stackoverflow.com/users/5315167/muscle-nerd"}, "is_accepted": true, "score": 0, "last_activity_date": 1445214878, "creation_date": 1445214878, "answer_id": 33204895, "question_id": 32470174, "link": "https://stackoverflow.com/questions/32470174/ndk-build-make-no-rule-to-make-target-error-with-libpcap/33204895#33204895", "title": "NDK-BUILD: make: *** No rule to make target Error with Libpcap", "body": "<p>Figured this out... the cause of the error was my main Android.mk file was building an executable and my JNI code didn't have any main() function.</p>\n"}], "owner": {"reputation": 1, "user_id": 5315167, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-m62wRSlxogk/AAAAAAAAAAI/AAAAAAAACeQ/Iooa4Kf_0BQ/photo.jpg?sz=128", "display_name": "muscle nerd", "link": "https://stackoverflow.com/users/5315167/muscle-nerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 33204895, "answer_count": 1, "score": 0, "last_activity_date": 1445214878, "creation_date": 1441766938, "question_id": 32470174, "link": "https://stackoverflow.com/questions/32470174/ndk-build-make-no-rule-to-make-target-error-with-libpcap", "title": "NDK-BUILD: make: *** No rule to make target Error with Libpcap", "body": "<p>When I run the ndk-build on my project, I get the following error: </p>\n\n<blockquote>\n<pre><code>&gt; Android NDK: WARNING: APP_PLATFORM android-21 is larger than\n&gt; android:minSdkVersion 15 in ./AndroidManifest.xml     [arm64-v8a]\n&gt; Compile        : pcap &lt;= pcap-linux.c jni/libpcap/pcap-linux.c:118:0:\n&gt; warning: \"_GNU_SOURCE\" redefined  #define _GNU_SOURCE  ^\n&gt; &lt;command-line&gt;:0:0: note: this is the location of the previous\n&gt; definition [arm64-v8a] Compile        : pcap &lt;= pcap-usb-linux.c\n&gt; [arm64-v8a] Compile        : pcap &lt;= pcap-can-linux.c make: *** No\n&gt; rule to make target `jni/libpcap/pcap-netfilter-linux-android.c',\n&gt; needed by\n&gt; `obj/local/arm64-v8a/objs/pcap/pcap-netfilter-linux-android.o'.  Stop.\n</code></pre>\n</blockquote>\n\n<p>This is my Android.mk file for the libpcap </p>\n\n<pre><code>LOCAL_PATH:= $(call my-dir)\ninclude $(CLEAR_VARS)\n\nlibpcap_PSRC = pcap-linux.c pcap-usb-linux.c  pcap-can-linux.c pcap-netfilter-linux-android.c pcap-netfilter-linux.c\nlibpcap_FSRC = fad-gifc.c\nlibpcap_CSRC = pcap.c inet.c gencode.c optimize.c nametoaddr.c etherent.c savefile.c sf-pcap.c sf-pcap-ng.c pcap-common.c bpf_image.c bpf_dump.c\nlibpcap_GENSRC = scanner.c grammar.c bpf_filter.c version.c\n\nlibpcap_SRC = $(libpcap_PSRC) $(libpcap_FSRC) $(libpcap_CSRC) $(libpcap_GENSRC)\n\nLOCAL_SRC_FILES:= $(libpcap_SRC)\n\nLOCAL_CFLAGS:=-O2 -g -DHAVE_CONFIG_H -D_U_=\"__attribute__((unused))\" -Dlinux -D__GLIBC__ -D_GNU_SOURCE\n\nLOCAL_EXPORT_C_INCLUDE_DIRS:= $(LOCAL_PATH)\n\nLOCAL_MODULE:= libpcap\n\ninclude $(BUILD_STATIC_LIBRARY)\n</code></pre>\n\n<p>Looking at few other questions that was previous asked, I have removed any unnecessary spaces from the makefile and I have made sure to best of my knowledge that there is no error in the makefile either. </p>\n\n<p>I am not sure what else is causing the issue. I am very new to NDK and in fact this is very basic hello world application that I am building to more about NDK and incorporating LIBPCAP in the project. </p>\n\n<p>I am using libpcap version 1.5.2, NDK Version: r10e-rc4 (64 bit)</p>\n\n<p>Help is appreciated. </p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1441766398, "post_id": 32470025, "comment_id": 52801962, "body": "It&#39;s not clear what you don&#39;t understand. Everything inside the <code>[]</code> is basic integer arithmetic used to calculate an array index. So are you saying you don&#39;t understand integer operations? Or you don&#39;t understand <b>why</b> the code is doing that. If it is the latter we cannot help you with just the code you have shown. Because the answer to that depends on how <code>data</code> is allocated and used in the rest of the program."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1441766630, "post_id": 32470025, "comment_id": 52802013, "body": "It&#39;s a two-dimensional array implemented using one-dimensional array. The expression <code>* (mx. + x)</code> calculates for the position of the row while <code>m.y + y</code> calculates for the column in that row. Had it been a two-dimensional array, it would be something like <code>m.data[m.x + x][m.y + y]</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 1, "creation_date": 1441768453, "post_id": 32470025, "comment_id": 52802384, "body": "@alvits array and pointer are not the same.  You can use the same syntax to access each, but they are different"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 1, "creation_date": 1441785392, "post_id": 32470025, "comment_id": 52808857, "body": "@alvits: <code>m.data + m.original_size * (m.x + x) + m.y + y).</code> should be <code>*(m.data + m.original_size * (m.x + x) + m.y + y))</code> to evaluate to the same as <code>m.data[m.original_size * (m.x + x) + m.y + y]</code> evaluates to."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 3788992, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1049716077/picture?type=large", "display_name": "David Hang", "link": "https://stackoverflow.com/users/3788992/david-hang"}, "edited": false, "score": 0, "creation_date": 1441767963, "post_id": 32470090, "comment_id": 52802287, "body": "in other words, are you saying the m.x and m.y is the starting point? so m.x+x iterator to x? I&#39;m kind of confuse on (m.original_size*)."}, {"owner": {"reputation": 1143, "user_id": 3858885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95a19704d80920c1f9e628c0d6463abe?s=128&d=identicon&r=PG", "display_name": "michaelrccurtis", "link": "https://stackoverflow.com/users/3858885/michaelrccurtis"}, "reply_to_user": {"reputation": 97, "user_id": 3788992, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1049716077/picture?type=large", "display_name": "David Hang", "link": "https://stackoverflow.com/users/3788992/david-hang"}, "edited": false, "score": 0, "creation_date": 1441768105, "post_id": 32470090, "comment_id": 52802321, "body": "<code>m.original_size</code> is the width of the original matrix. Rather than be stored in 2D, the matrix is stored row by row in 1D. Hence, to find the element at (x,y) the corresponding array element would be <code>m.data[x*m.original_width + y]</code>."}, {"owner": {"reputation": 1143, "user_id": 3858885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95a19704d80920c1f9e628c0d6463abe?s=128&d=identicon&r=PG", "display_name": "michaelrccurtis", "link": "https://stackoverflow.com/users/3858885/michaelrccurtis"}, "reply_to_user": {"reputation": 97, "user_id": 3788992, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1049716077/picture?type=large", "display_name": "David Hang", "link": "https://stackoverflow.com/users/3788992/david-hang"}, "edited": false, "score": 0, "creation_date": 1441768235, "post_id": 32470090, "comment_id": 52802339, "body": "This function only differs slightly because it is interested in a smaller sub matrix (as stated above). Why that is the case is not clear from the code you have posted, but presumably it is useful for whatever algorithm this is being used in."}], "tags": [], "owner": {"reputation": 1143, "user_id": 3858885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95a19704d80920c1f9e628c0d6463abe?s=128&d=identicon&r=PG", "display_name": "michaelrccurtis", "link": "https://stackoverflow.com/users/3858885/michaelrccurtis"}, "is_accepted": true, "score": 1, "last_activity_date": 1441766303, "creation_date": 1441766303, "answer_id": 32470090, "question_id": 32470025, "link": "https://stackoverflow.com/questions/32470025/how-to-understand-pointer-to-an-array-with-a-syntax/32470090#32470090", "title": "how to understand pointer to an array with a syntax", "body": "<p>The structure is designed to represent a matrix (which is stored in <code>*data</code>) and a sub matrix, which is defined as starting at the m.x-th row and the m.y-th column. Hence, the <code>get()</code> function is really to access data in sub matrix, and the x &amp; y indices are transformed to their positions in the original full matrix.</p>\n"}], "owner": {"reputation": 97, "user_id": 3788992, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1049716077/picture?type=large", "display_name": "David Hang", "link": "https://stackoverflow.com/users/3788992/david-hang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 32470090, "answer_count": 1, "score": -1, "last_activity_date": 1441766303, "creation_date": 1441765816, "question_id": 32470025, "link": "https://stackoverflow.com/questions/32470025/how-to-understand-pointer-to-an-array-with-a-syntax", "title": "how to understand pointer to an array with a syntax", "body": "<pre><code>//A structure to describe a matrix.\ntypedef struct matrix{\n  int x, y, size, original_size, *data;\n};\n//Function to index matrices. \nint get(matrix m, int x, int y)\n{\n  return m.data[m.original_size * (m.x + x) + m.y + y];\n}\n</code></pre>\n\n<p>I'm attempting to understand the line m.original_size * (m.x + x) + m.y + y in this C code. I need more elaboration on this line, m.data[m.original_size * (m.x + x) + m.y + y]. </p>\n\n<p>My attempt: Data is a pointer, which points to the address of array m.data. But then I get confuse trying to understand the rest of the statement. Especially * (m.x + x) + m.y + y. </p>\n"}, {"tags": ["c++", "c", "pointers", "matrix", "notation"], "comments": [{"owner": {"reputation": 70, "user_id": 2232009, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/U8WRO.jpg?s=128&g=1", "display_name": "Mohiuddin Sohel", "link": "https://stackoverflow.com/users/2232009/mohiuddin-sohel"}, "edited": false, "score": 0, "creation_date": 1441771941, "post_id": 32469985, "comment_id": 52803198, "body": "You can always use pointer notation instead of array notation. For instance, myArray[1] is equivalent to  *(myArray +1), myArray[0][1] is equivalent to *(*(myArray + 0) + 1)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441775257, "post_id": 32469985, "comment_id": 52804096, "body": "Arrays aren&#39;t pointers, but they Cheat and go with one dimensional array. access will be <code>*(myArray+(row*numColumns+column))</code>. Simplifies the book-keeping. and makes reading in the matrix stupidly easy."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441775406, "post_id": 32469985, "comment_id": 52804134, "body": "Oh and by the way, once you strip off the homework assignment parts and get down to the pointers and arrays issue, this is pretty much a  duplicate of <a href=\"http://stackoverflow.com/questions/1641957/is-array-name-a-pointer-in-c\" title=\"is array name a pointer in c\">stackoverflow.com/questions/1641957/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5283155"}, "is_accepted": false, "score": 0, "last_activity_date": 1441766318, "creation_date": 1441766318, "answer_id": 32470092, "question_id": 32469985, "link": "https://stackoverflow.com/questions/32469985/reading-data-from-a-matrix-using-pointer-notation/32470092#32470092", "title": "Reading data from a matrix using pointer notation", "body": "<p>You should try to allocate the matrix dynamically. Here's a sample code on how to do that.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    int row, col;\n    // Get the matrix dimension ...\n\n    int **matrix = (int**) malloc(sizeof(int*) * row);\n    for (int i = 0; i &lt; row; i++) {\n        matrix[i] = (int*) malloc(sizeof(int) * col);\n    }\n\n    // Do something with the matrix ...\n    // You could still access the matrix with array notation\n\n    for (int i = 0; i &lt; row; i++) {\n        free(matrix[i]);\n    }\n    free(matrix);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5315130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d47af0eb0ea60213c3b3a316fa076ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jsosa6", "link": "https://stackoverflow.com/users/5315130/jsosa6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1441768202, "creation_date": 1441765358, "last_edit_date": 1441768202, "question_id": 32469985, "link": "https://stackoverflow.com/questions/32469985/reading-data-from-a-matrix-using-pointer-notation", "title": "Reading data from a matrix using pointer notation", "body": "<p>A program I am trying to create must ask for a user input to the size of a <strong>matrix</strong>, and then read in data from a file to put into said matrix. The only issue is that the information can only be input with pointers and can only use pointer arithmetic. The complete specifications are as follows:</p>\n\n<ol>\n<li>Read in dimensions of a matrix</li>\n<li>Prompt for a filename and read in the data from that file into the matrix</li>\n<li>Utilize an array of structures, where a single structure holds the mean, median, and standard deviation for a column in the matrix.  </li>\n<li>All of your code should access the memory locations via pointers and pointer arithmetic.</li>\n</ol>\n\n<p>I was wondering if there is any way to call for the data within the matrix without using array notation (e.g. myArray[0][1])? I have always known to use that notation and have no understanding of how else to seperate the given data without that notation. Any help would be greatly appreciated.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441765459, "post_id": 32469939, "comment_id": 52801739, "body": "this site expects you to post code not some untested guess."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441765670, "post_id": 32469939, "comment_id": 52801791, "body": "BTW: each possible value needs to be checked separately.  so a statement like: <code>if( 1 != type &amp;&amp; 2 != type )</code>  assuming that type is a numeric.  if type is a char, then <code>if( &#39;1&#39; != type &amp;&amp; &#39;2&#39; != type )</code>   Note: &#39;type&#39; is kind of a iffy variable name suggest using something more akin to the context of the problem being solved.  For instance if the problem were about automobiles, then the name might be: &#39;carType&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 2264, "user_id": 3113920, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JXqY0.png?s=128&g=1", "display_name": "domdomcodecode", "link": "https://stackoverflow.com/users/3113920/domdomcodecode"}, "is_accepted": false, "score": 3, "last_activity_date": 1441766153, "last_edit_date": 1441766153, "creation_date": 1441765519, "answer_id": 32470001, "question_id": 32469939, "link": "https://stackoverflow.com/questions/32469939/if-statement-with-or-in-c/32470001#32470001", "title": "If statement with or in C", "body": "<p>Even though you'd verbally express it as \"not 1 or 2\", programatically you'd use an <code>and</code> instead because it's only if neither values match up that you'd display your error prompt.</p>\n\n<pre><code>if (type != 1 &amp;&amp; type != 2){\n    printf (\"Enter numbers 1 or 2\");\n}\n</code></pre>\n\n<p>Using an <code>or</code> would cause issues. If you entered a <code>2</code>, the first statement is true and the if statement result would trigger.</p>\n\n<p>Note: I am not factoring in what data type the <code>type</code> variable is.</p>\n"}], "owner": {"reputation": 1, "user_id": 5315138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85994116a113dcdd4cff57c1123ce938?s=128&d=identicon&r=PG&f=1", "display_name": "J Orr", "link": "https://stackoverflow.com/users/5315138/j-orr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": -9, "last_activity_date": 1441767165, "creation_date": 1441765072, "last_edit_date": 1441767165, "question_id": 32469939, "link": "https://stackoverflow.com/questions/32469939/if-statement-with-or-in-c", "title": "If statement with or in C", "body": "<p>I am trying to make an if statement that would create an error message if the user does not input the values of 1 or 2. I imagine it would look something like</p>\n\n<pre><code>if (type != 1 or 2) {\n    printf (\"Enter numbers 1 or 2\");\n}\n</code></pre>\n\n<p>I know the or part in between the 1 and the 2 of the if statement wont work but what will? Thanks!</p>\n\n<p>Btw: this is written in C. </p>\n"}, {"tags": ["python", "c", "eclipse"], "comments": [{"owner": {"reputation": 117024, "user_id": 200291, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/399cacf55045372a29f1f844d12ee777?s=128&d=identicon&r=PG", "display_name": "icktoofay", "link": "https://stackoverflow.com/users/200291/icktoofay"}, "edited": false, "score": 0, "creation_date": 1441761812, "post_id": 32469376, "comment_id": 52800868, "body": "It\u2019s true that <code>object.h</code> doesn\u2019t include <code>pyport.h</code>, but I arbitrarily picked a Python source file and it includes <code>Python.h</code>, which includes both <code>pyport.h</code> and <code>object.h</code>, so as long as you\u2019re including <code>Python.h</code> rather than individual header files, you should be OK."}, {"owner": {"reputation": 857, "user_id": 2586121, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8daacc4dea8d817aa536fff39189a528?s=128&d=identicon&r=PG", "display_name": "Al Berger", "link": "https://stackoverflow.com/users/2586121/al-berger"}, "reply_to_user": {"reputation": 117024, "user_id": 200291, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/399cacf55045372a29f1f844d12ee777?s=128&d=identicon&r=PG", "display_name": "icktoofay", "link": "https://stackoverflow.com/users/200291/icktoofay"}, "edited": false, "score": 0, "creation_date": 1441763996, "post_id": 32469376, "comment_id": 52801407, "body": "Unfortunately including <code>Python.h</code> doesn&#39;t correct errors. However, I edited the post with some additional info."}, {"owner": {"reputation": 117024, "user_id": 200291, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/399cacf55045372a29f1f844d12ee777?s=128&d=identicon&r=PG", "display_name": "icktoofay", "link": "https://stackoverflow.com/users/200291/icktoofay"}, "edited": false, "score": 0, "creation_date": 1441765389, "post_id": 32469376, "comment_id": 52801721, "body": "If Eclipse is complaining that a macro uses things that aren\u2019t defined, Eclipse is in the wrong, since macros are expanded at their <i>use site</i>, <b>not</b> their definition site."}, {"owner": {"reputation": 857, "user_id": 2586121, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8daacc4dea8d817aa536fff39189a528?s=128&d=identicon&r=PG", "display_name": "Al Berger", "link": "https://stackoverflow.com/users/2586121/al-berger"}, "reply_to_user": {"reputation": 117024, "user_id": 200291, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/399cacf55045372a29f1f844d12ee777?s=128&d=identicon&r=PG", "display_name": "icktoofay", "link": "https://stackoverflow.com/users/200291/icktoofay"}, "edited": false, "score": 0, "creation_date": 1441766121, "post_id": 32469376, "comment_id": 52801898, "body": "Eclipse says that &#39;attempt to use symbol failed&#39;. Why it&#39;s failed - isn&#39;t clear. I asked in the hope that someone works with Python on Eclipse and knows what configuration should be done."}], "owner": {"reputation": 857, "user_id": 2586121, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8daacc4dea8d817aa536fff39189a528?s=128&d=identicon&r=PG", "display_name": "Al Berger", "link": "https://stackoverflow.com/users/2586121/al-berger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1441763872, "creation_date": 1441760483, "last_edit_date": 1441763872, "question_id": 32469376, "link": "https://stackoverflow.com/questions/32469376/configuring-source-code-of-python-on-eclipse", "title": "Configuring source code of Python on Eclipse", "body": "<p>I wonder does someone work with source code of Python on Eclipse/Linux? I have imported it as a makefile project, it builds OK, but error parsers cannot correctly parse some definitions and produce plenty of semantic errors like this:</p>\n\n<pre><code>Field 'Py_DECREF(argtuple)' could not be resolved   \n</code></pre>\n\n<p>I checked that field (it is a macro in <code>Include/object.h</code>) and it seems the error is because the macro uses a struct that is not yet defined (it is defined in <code>pyport.h</code> which is not included in <code>object.h</code>). I created the following project:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"/mnt/proj/c/Python-3.4.3/Include/pyport.h\"\n#include \"/mnt/proj/c/Python-3.4.3/Include/object.h\"\n\nint main(void) {\n    PyObject po;\n    Py_DECREF(&amp;po);\n    return 0;\n}\n</code></pre>\n\n<p>It compiles OK and error parsers parse it OK. I removed two last includes and added those two files to <code>Project/Properties/Preprocessor Include Paths/CDT User Setting Entries</code>. Error parsers parse it OK (without those two headers added, Py_DECREF produces \"not resolved\" error). I tried to do the same in the Python project (I have added to CDT User Setting Entries <code>pyport.h</code> and <code>object.h</code> headers), but that's not corrected errors. </p>\n\n<p>What configuration settings must be created in order to get rid of those semantic errors?</p>\n\n<p><strong>EDIT 1:</strong></p>\n\n<p>The parser log is filled with entries like this:</p>\n\n<pre><code>Attempt to use symbol failed: tp_dealloc in file /mnt/proj/c/Python-3.4.3/Python/bltinmodule.c:416\nAttempt to use symbol failed: ob_type in file /mnt/proj/c/Python-3.4.3/Python/bltinmodule.c:417\nAttempt to use symbol failed: tp_free in file /mnt/proj/c/Python-3.4.3/Python/bltinmodule.c:417\nAttempt to use symbol failed: ob_type in file /mnt/proj/c/Python-3.4.3/Python/bltinmodule.c:436\nAttempt to use symbol failed: tp_iternext in file /mnt/proj/c/Python-3.4.3/Python/bltinmodule.c:436\nAttempt to use symbol failed: ob_refcnt in file /mnt/proj/c/Python-3.4.3/Python/bltinmodule.c:449\n</code></pre>\n\n<p>Those symbols are related to <code>_typeobject</code> structure defined in <code>object.h</code>.  The definition of that structure uses <code>PyObject_VAR_HEAD</code> macro, defined in the same file as follows:</p>\n\n<pre><code>#define PyObject_VAR_HEAD      PyVarObject ob_base;\n</code></pre>\n\n<p>But <code>PyVarObject</code> structure is defined several lines AFTER the <code>PyObject_VAR_HEAD</code>. Couldn't it cause those errors?</p>\n"}, {"tags": ["c", "arrays", "pointers", "pointer-to-pointer"], "comments": [{"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1441760203, "post_id": 32469307, "comment_id": 52800514, "body": "Does this example help? <a href=\"https://stackoverflow.com/questions/32392837/how-to-point-on-2d-3d-space-on-a-pre-allocated-memory/32392951#32392951\" title=\"how to point on 2d 3d space on a pre allocated memory\">stackoverflow.com/questions/32392837/&hellip;</a>"}, {"owner": {"reputation": 370, "user_id": 2292637, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a8047a82626ec73b8a2bfcee12cd3e22?s=128&d=identicon&r=PG", "display_name": "Lucas Piske", "link": "https://stackoverflow.com/users/2292637/lucas-piske"}, "edited": false, "score": 1, "creation_date": 1441760613, "post_id": 32469307, "comment_id": 52800612, "body": "Why are you using realloc on this line? <code>newMem = realloc(resultado, ((sizeof(int)*n)+(posicoes*sizeof(int)*n)));</code> You didn&#39;t even allocate<code>resultado</code> before this line."}, {"owner": {"reputation": 55, "user_id": 5128946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/552d260742615ec2769c5dfa3fb4031b?s=128&d=identicon&r=PG&f=1", "display_name": "Troianos77", "link": "https://stackoverflow.com/users/5128946/troianos77"}, "edited": false, "score": 1, "creation_date": 1441760742, "post_id": 32469307, "comment_id": 52800640, "body": "If I&#39;m not mistaken realloc, allocs memory space, almost like malloc if the first parameter was not allocated before"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 2, "creation_date": 1441761457, "post_id": 32469307, "comment_id": 52800793, "body": "That&#39;s correct, @Troianos77 but for <code>realloc</code> to behave that way, the pointer must be NULL to begin with.  You never initialise <code>resultado</code> to NULL."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1441761603, "post_id": 32469307, "comment_id": 52800821, "body": "The other problem is that you are allocating a single block of memory and then using it as if it is a 2D array.  It&#39;s not.  It&#39;s an array of pointers.  You must initialise those pointers -- either to point at locations inside the memory block you allocated, or to point at some other part of memory."}, {"owner": {"reputation": 55, "user_id": 5128946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/552d260742615ec2769c5dfa3fb4031b?s=128&d=identicon&r=PG&f=1", "display_name": "Troianos77", "link": "https://stackoverflow.com/users/5128946/troianos77"}, "edited": false, "score": 0, "creation_date": 1441763537, "post_id": 32469307, "comment_id": 52801285, "body": "How am i supposed to point those blocks to something then give a value to each space in the memory? I thought that by doing this:  if(newMem)           {//or here                 resultado = newMem;             }             int i = 0;           for(i; i&lt;n;i++)           {//or here but don&#39;t know where               resultado[posicoes][i] = mat[i];           }           posicoes++; I was first initalizing then inserting a value in each space that these pointers are pointing to."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1441763818, "post_id": 32469307, "comment_id": 52801373, "body": "in helps immensely with the clarity/readability and understandability of the code when meaningful variable (and parameter) names are used.  As it it, I read through the code the first time and still did not know the meaning/usage of &#39;n&#39;, &#39;k&#39;, &#39;p&#39;  and was still slightly doubtful about the parameter &#39;ar&#39;."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441764125, "post_id": 32469307, "comment_id": 52801440, "body": "this code block: `      if(newMem)           {//or here                 resultado = newMem;             } ` has the problem that what should be checked is if realloc() failed and handling a failure (call perror() handle cleanup, call exit())  otherwise, set resultado = newMem; and continue the program.   The current code continues even if the call to realloc() fails"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441764324, "post_id": 32469307, "comment_id": 52801498, "body": "Your realloc calculation makes no sense, and you never initialize any pointers in the <code>resultado</code> array. To do <code>resultado[posicoes][i]</code>, you must make <code>resultado[posicoes]</code> point somewhere first."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441764415, "post_id": 32469307, "comment_id": 52801521, "body": "the pointer <code>int **resultado</code> is on the stack and contains total trash.  so passing it to realloc( resultado, ...) will corrupt the heap and can lead to a seg fault event.   strongly suggest initializing &#39;resultado&#39; via:  <code>int **resultado = NULL;</code>  passing a NULL pointer to realloc() is not a problem."}, {"owner": {"reputation": 55, "user_id": 5128946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/552d260742615ec2769c5dfa3fb4031b?s=128&d=identicon&r=PG&f=1", "display_name": "Troianos77", "link": "https://stackoverflow.com/users/5128946/troianos77"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441765036, "post_id": 32469307, "comment_id": 52801655, "body": "@M.M if i am not mistaken the 2 parameter must be the memory size that your pointer has+what you want, i always want n<i>int, and it always has posicoes</i>int*n bytes, and how am i supposed to make resultado[posicoes] point to something, than make each i for resultado[posicoes] point to something. user3629249 already fixed that, i forgot to write it here, sorry"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441765073, "post_id": 32469307, "comment_id": 52801662, "body": "@Troianos77 look up some examples of how to allocate an array of pointers. You will need a loop that makes several allocation calls, one for each row."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1441765087, "post_id": 32469307, "comment_id": 52801665, "body": "the overall handling of &#39;resultado&#39; is not correct.   It should be: resulttadp = malloc( x<i>sizeof(int) );  if resuldado is NULL, handle error and exit   otherwise, for( int i=0; i&lt;x; i++ ) { resuldado[i] = malloc( y</i>sizeof(int) ); if ( NULL == resultado[i] ) { // then handle error, free all current memory allocations and exit } this could be modified to make use of the <code>posicoes</code> variable, but then it would have to be initialized to 1 rather than 0"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441765168, "post_id": 32469307, "comment_id": 52801679, "body": "By the way, it is much easier to make a dynamic matrix without using an array of pointers"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1441765314, "post_id": 32469307, "comment_id": 52801706, "body": "continue:  And resultado needs to be expanded on each loop interation (use realloc) and a new array needs to be pointed to by resultado[posicoes] = malloc( x*sizeof( int ) with the same checking for a failure of the call to realloc and the call to malloc"}, {"owner": {"reputation": 55, "user_id": 5128946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/552d260742615ec2769c5dfa3fb4031b?s=128&d=identicon&r=PG&f=1", "display_name": "Troianos77", "link": "https://stackoverflow.com/users/5128946/troianos77"}, "edited": false, "score": 0, "creation_date": 1441838483, "post_id": 32469307, "comment_id": 52841136, "body": "ok thanks, i&#39;ve really forgot that you needed to allocate memory to each pointer from the pointer&#39;s pointer"}], "owner": {"reputation": 55, "user_id": 5128946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/552d260742615ec2769c5dfa3fb4031b?s=128&d=identicon&r=PG&f=1", "display_name": "Troianos77", "link": "https://stackoverflow.com/users/5128946/troianos77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1441838535, "creation_date": 1441759806, "last_edit_date": 1441838535, "question_id": 32469307, "link": "https://stackoverflow.com/questions/32469307/using-pointer-to-pointer-to-make-a-dynamic-matrix-of-integers", "title": "Using pointer to pointer to make a dynamic matrix of integers", "body": "<p>I'm trying to make a dynamic matrix that is based on an integer pointer to pointer, this variable is allocated dynamically, but I'm having a little trouble using it, I don't know if I am using it wrong or something, but the outcome is not as expected. Is it something wrong that I'm doing or am I not thinking this through?</p>\n\n<pre><code>void pkn(int n, int k)\n{\n   int chec = checagemInicial(n,k);\n   if(chec == 1)\n   {\n       return;\n   }\n\n   int mat[n];\n   int **resultado = NULL, **newMem;\n   int posicoes = 0;\n   initiateArray(mat, n);//initialize the matrix with one's\n\n\n   while(functionthatchecksthings1(mat, n, k) == 0)//this 2 function works no need to worry\n   {\n       if(functionthatchecksthings2(mat, n , k))\n       {//i think the problem might be or here\n          newMem = realloc(resultado, ((sizeof(int)*n)+(posicoes*sizeof(int)*n)));\n          if(newMem)\n          {//or here\n                resultado = newMem;  \n          } \n\n          int i = 0;\n          for(i; i&lt;n;i++)\n          {//or here but don't know where\n              resultado[posicoes][i] = mat[i];\n          }\n          posicoes++;\n       }\n\n       somaArray(mat, k, n-1);\n   }\n   //or in the very least case i'm printing it wrong\n   printaArray(resultado, n, posicoes);\n\n   system(\"pause\");\n\n   free_matrix(posicoes, resultado);    \n}\n</code></pre>\n\n<p>This one is the function that prints the pointer, it might be wrong here too, but I seriously don't know.</p>\n\n<pre><code>void printaArray(int **ar, int n, int p)\n{\n    int i = 0, j;\n    for(i; i &lt; p; i++)\n    {\n        j = 0;\n        for(j; j &lt; n; j++)\n        {\n            printf(\"%d \",(ar[i][j]));\n        }\n        printf(\"\\n\");\n    }\n\n    printf(\"%d\\n\", p);\n}\n</code></pre>\n\n<p>I would like to thank everyone and I'm sorry if I haven't made myself clear, or if I've said something wrong/misspelled anything</p>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1441760253, "post_id": 32469222, "comment_id": 52800529, "body": "If you require an integer value then why do you scan a <code>float</code> from the input?  Also either <code>floorf(x) == x</code> <i>or</i> <code>ceilf(x) == x</code> is sufficient; you don&#39;t need both."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1441760885, "post_id": 32469222, "comment_id": 52800674, "body": "<i>&quot;I used a printf statement to check if the floor(x) value was correct, it kept showing different answers, e.g. &quot;-2.000000&quot; when input was 5.2.&quot;</i> You need to show the exact code that exhibits that behavior, because nothing in the code you posted would do that. My best guess is that your real code has a buffer overrun bug, or other undefined behavior."}, {"owner": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 0, "creation_date": 1441761491, "post_id": 32469222, "comment_id": 52800801, "body": "are you giving the exact same input to both programs?   <code>scanf(&quot;%f&quot;,&amp;myfloat)</code> of &quot;5&quot; may actually read in 5.0000000000000001, and &quot;4&quot; may be exactly 4.0.    it all depends on the implementation of scanf()."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441762069, "post_id": 32469222, "comment_id": 52800916, "body": "FYI A simple test to see if a <code>float</code> is a whole number or not: <code>float dummy; if (modff(x, &amp;dummy) == 0.0) puts(&quot;x is a whole number&quot;);</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441762292, "post_id": 32469222, "comment_id": 52800970, "body": "Are you always putting function <code>int intchecker(float x)</code> before <code>main()</code>?  Always including <code>#include &lt;math.h&gt;</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1441762648, "post_id": 32469222, "comment_id": 52801067, "body": "Code interestingly uses <code>ceilf(float)</code> and <code>floor(double)</code>, yet not <code>floorf(float)</code>.  I suspect <code>FLT_EVAL_METHOD</code> is 1 or 2 and the <code>main()</code> code was optimized to <code>double</code>.  Does the difference occur if you code with <code>floorf()</code>?  What is <code>printf(&quot;%d\\n&quot;, FLT_EVAL_METHOD);</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5155482"}, "edited": false, "score": 0, "creation_date": 1441762734, "post_id": 32469222, "comment_id": 52801093, "body": "Int intchecker(float x) is located in a file separate from main.c."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1441762807, "post_id": 32469222, "comment_id": 52801111, "body": "So does <code>main.c</code> have a prototype of <code>int intchecker(float x);</code>?  If not, then that is likely the issue."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441764988, "post_id": 32469222, "comment_id": 52801646, "body": "A better approach to this problem would be to read a string (either with <code>scanf</code> or <code>fgets</code>) and see if there is a <code>.</code> in the string.  Then you can use <code>strtof</code> to convert the string to float if required."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441765376, "post_id": 32469222, "comment_id": 52801716, "body": "@M.M Looking for a <code>&#39;.&#39;</code> is a good start but does get fooled with <code>&quot;1.0&quot;</code> and <code>&quot;5e-1&quot;</code>."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 0, "creation_date": 1441772147, "post_id": 32469222, "comment_id": 52803249, "body": "@RussSchultz: floating point isn&#39;t as evil as that.  Every integer from -2^54 to 2^54 has an exact representation as an IEEE double-precision float.  Similarly for <code>float</code>, +/- 2^24 in 23-bit-mantissa IEEE single float.  See some guys blog for just one example: <a href=\"http://cottonvibes.blogspot.ca/2010/08/32bit-floats-integer-accuracy-and.html\" rel=\"nofollow noreferrer\">cottonvibes.blogspot.ca/2010/08/&hellip;</a>.  Where people run into trouble is with decimal fractions that don&#39;t have an exact representation as a binary-fraction."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5155482"}, "edited": false, "score": 0, "creation_date": 1441763924, "post_id": 32469716, "comment_id": 52801392, "body": "Thanks for the answer. The code works perfectly fine now after adding the prototype. I am not that familiar with functions and hence assumed that separate files would be read first automatically without any need for declaration. It seems like that was the error after all."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441764248, "post_id": 32469716, "comment_id": 52801479, "body": "The header <code>.h</code>, containing <code>int intchecker(float x);</code> is commonly included in the <code>.c</code> implementation and all usage <code>.c</code> files.  The <code>.h</code> also contains defines, typdefs, global variable declarations.  All sorts of things that by themselves do not generate any code.   Like <code>&lt;math.h&gt;</code>, you will find lots of these things but no implementations.   Good luck on the journey."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1441764845, "post_id": 32469716, "comment_id": 52801623, "body": "@JaimeAlcaraz you should have received a compiler warning at least - pay attention to those messages!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5155482"}, "edited": false, "score": 0, "creation_date": 1441884405, "post_id": 32469716, "comment_id": 52860466, "body": "Does it mean that if the prototype is not included, the code in the function is not read at all?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441885446, "post_id": 32469716, "comment_id": 52861259, "body": "@JaimeAlcaraz  the code in the function is not &quot;read&quot; by <code>main.c</code>.  All <code>main.c</code> &quot;reads&quot; is in <code>main.c</code> and the various included files like <code>stdio.h</code> and <code>separate.h</code>.  All <code>separate.c</code> &quot;reads&quot; is in <code>separate.c</code> and its various included files like <code>math.h</code> and <code>separate.h</code>.  These 2 compilations (which could have occurs days apart) are then linked together as a final step."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1441763300, "creation_date": 1441763300, "answer_id": 32469716, "question_id": 32469222, "link": "https://stackoverflow.com/questions/32469222/c-checking-if-input-float-is-purely-integer-or-float/32469716#32469716", "title": "C-Checking if input (float) is purely integer or float", "body": "<p>Assuming a missing function declaration:</p>\n\n<p><code>main.c</code> is missing the prototype for <code>int intchecker(float x)</code> so <code>main.c</code> assumes the old-school prototype of <code>int intchecker(int x)</code> and the code exhibits undefined behavior.  Anything could happen.</p>\n\n<p>Add prototype in <code>main.c</code> or put it in separate.h and include that header file here and in separate.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdbool.h&gt;\n\nint intchecker(float x);\n\nint main(void) {\n   ...\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5155482"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 773, "favorite_count": 0, "accepted_answer_id": 32469716, "answer_count": 1, "score": 3, "last_activity_date": 1441763300, "creation_date": 1441759091, "last_edit_date": 1441762806, "question_id": 32469222, "link": "https://stackoverflow.com/questions/32469222/c-checking-if-input-float-is-purely-integer-or-float", "title": "C-Checking if input (float) is purely integer or float", "body": "<p>I want to check if the user input is purely integer or a float. I attempted to do this by using <code>floor</code> and <code>ceilf</code>and comparing the values to the original x value in a function. However, this seems to be a tad bit problematic as the function keeps returning 0 instead of 1 for certain numbers like 5.5, when <code>floor(5.5)!=5.5</code> and <code>ceilf(5.5)!=5.5</code>. This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdbool.h&gt;\nint intchecker(float x)//in a separate file\n{\n\n    if (floor(x)==x &amp;&amp; ceilf(x)==x)\n    {\n        //printf(\"%f\",floor(x));\n        return 0;\n    }\n    else {\n                return 1;\n    }\n\n}\nint main()\n{\n    char line[] = \" +----+----+----+----+----+----+----+----+----+----+---+\";\n    char numbers[] = \" 0    5    10   15   20   25   30   35   40   45   50\";\n    float balls,slots;\n    int slot[9];\n\n    printf(\"==========================================================\\nGalton Box Simulation Machine\\n==========================================================\\n\");\n    printf(\"Enter the number of balls [5-100]: \");\n    scanf(\"%f\",&amp; balls);\n    if (balls&gt;100 || balls&lt;5){\n        printf(\"/nInput is not within the range. Please try again.\");\n    }\n\n    else if (intchecker(balls)==1){\n        printf(\"/nInput is not an integer. Please try again.\");\n    }\n    else {\n            printf(\"    This is an integer.\");\n            //some more code here\n    }\n\n}\n</code></pre>\n\n<p>I tried placing just the intchecker code in another project, which seems to work fine without any bugs, unlike in the previous project, where when I used a <code>printf</code> statement to check if the <code>floor(x)</code> value was correct, it kept showing different answers, e.g. \"-2.000000\" when input was 5.2. This is my code for the second project:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include&lt;math.h&gt;\nint main()\n{\n    float  x;\n    scanf(\"%f\",&amp;x);\n\n    if (floor(x)==x &amp;&amp; ceilf(x)==x){\n        printf(\"Integer\");\n        return 0;\n    }\n    else {\n        printf(\"Non-Integer\");\n        return 1;\n    }\n\n\n}\n</code></pre>\n\n<p>How is it possible that the second code works perfectly when the first code does not? Is something wrong with my way of writing/calling the function?(I am relatively new to functions-only 2 weeks of exposure so far)</p>\n\n<p>I searched online and have seen many answers to check if input is integer or float, even on stackoverflow.com itself, but my wish is not to find out other ways to check if input is integer or float (for if I wished to do that, I could just google it, and there are many such questions on stackoverflow.com as well), but to comprehend <strong>why</strong> my first code does not work, for, as far as I know, it ought to work well without any of the bugs it is currently facing.</p>\n\n<p>Any help is greatly appreciated!:)</p>\n"}, {"tags": ["c", "while-loop"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1441759246, "post_id": 32469182, "comment_id": 52800312, "body": "Please initialise <code>x</code> before you test it (and enable compiler warnings)."}, {"owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "edited": false, "score": 2, "creation_date": 1441759380, "post_id": 32469182, "comment_id": 52800346, "body": "First, the condition of your while loop is using the variable x before it has been assigned a value. Use the return value of <code>scanf</code> if you want to check whether it has successfully read an integer"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 5314005, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5c6932b540cb00304682cfd8c7dc2550?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Keith", "link": "https://stackoverflow.com/users/5314005/sam-keith"}, "edited": false, "score": 0, "creation_date": 1441759293, "post_id": 32469227, "comment_id": 52800327, "body": "Thanks for the response, the code is working fine as long as I&#39;m entering integer value but goes in infinite loop when I enter something else and hence in while(x&gt;0) i need some expression that&#39;ll check if it&#39;s integer value and I need to add the code to exit if entered value isn&#39;t integer."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 3, "last_activity_date": 1441759360, "last_edit_date": 1441759360, "creation_date": 1441759142, "answer_id": 32469227, "question_id": 32469182, "link": "https://stackoverflow.com/questions/32469182/while-loop-for-only-accepting-integer-value-and-exiting-on-any-other-input/32469227#32469227", "title": "While loop for only accepting integer value and exiting on any other input", "body": "<p>The reason your code does not work is that sometimes <code>scanf</code> does not read anything, so it does not modify <code>x</code>.</p>\n\n<p>You know that <code>scanf</code> read something by checking its return value. It returns the number of \"scanned\" items. In this case, the number must be <code>1</code>.</p>\n\n<p>When <code>scanf</code> returns <code>0</code> instead, you should read and discard the data in the buffer. You do it by supplying <code>%*[^\\n]</code> format specifier, which means \"read and discard input up to <code>'\\n'</code>  character. The complete snippet that reads an <code>int</code> until success looks like this:</p>\n\n<pre><code>while (scanf(\"%d\", &amp;x) != 1) {\n    printf(\"Please enter a valid number:\");\n    scanf(\"%*[^\\n]\");\n}\n</code></pre>\n\n<p><strong>Note:</strong> It goes without saying that you should fix your syntax error with the missing semicolon <code>;</code> on the line that computes <code>y</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441811863, "post_id": 32480160, "comment_id": 52827629, "body": "Code would be clearer, less error prone  (and correct) with <code>if(!(str1[i]&gt;=&#39;0&#39;&amp;&amp;str1[i]&lt;=&#39;9&#39;))</code>.  <code>str1[i]&lt;=56</code> is certainly incorrect."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441812082, "post_id": 32480160, "comment_id": 52827803, "body": "1) <code>int x; ... while(x&gt;0)</code> replicates OP&#39;s failure to initialize <code>x</code>. 2) <code>char str1[5]; ...scanf(&quot;%s&quot;,str1);</code> does not properly limit input to 4 characters."}], "tags": [], "owner": {"reputation": 786, "user_id": 5022365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec8cb396d26f840b7b772382d8e3ff70?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Patel", "link": "https://stackoverflow.com/users/5022365/sagar-patel"}, "is_accepted": false, "score": -1, "last_activity_date": 1441803379, "creation_date": 1441803379, "answer_id": 32480160, "question_id": 32469182, "link": "https://stackoverflow.com/questions/32469182/while-loop-for-only-accepting-integer-value-and-exiting-on-any-other-input/32480160#32480160", "title": "While loop for only accepting integer value and exiting on any other input", "body": "<ul>\n<li><p>You can use below code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n int x;\n double y;\n char str1[5];\nint num1,i;\nbool yes = true;\n  while(x&gt;0) \n  {\n      printf(\"Enter the temperature in Fahrenheit:\");\n      scanf(\"%s\",str1);\n      for(i=0;str1[i]!='\\0';i++)\n      if(!(str1[i]&gt;=48&amp;&amp;str1[i]&lt;=56))\n      {\n         printf(\"The value is invalid \\n\");\n         yes = false;\n      }\n      num1 = atoi(str1);\n\n      if(yes == true)\n      {\n        printf(\"This Number is %d\\n\",num1);\n        y=((num1-32)/1.8);\n        printf(\"%f\\n\",y);\n       }\n   }\n}\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 97, "user_id": 5314005, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5c6932b540cb00304682cfd8c7dc2550?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Keith", "link": "https://stackoverflow.com/users/5314005/sam-keith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1924, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1441803379, "creation_date": 1441758685, "last_edit_date": 1441758902, "question_id": 32469182, "link": "https://stackoverflow.com/questions/32469182/while-loop-for-only-accepting-integer-value-and-exiting-on-any-other-input", "title": "While loop for only accepting integer value and exiting on any other input", "body": "<p>I'm running this program in C to convert Fahrenheit to Celsius and need to accept only integer value from the user.</p>\n\n<p>Please tell me how I can modify this?</p>\n\n<pre><code>int main() {\n    int x;\n    double y;\n    while(x&gt;0) {\n        printf(\"Enter the temperature in Fahrenheit:\");\n        scanf(\"%d\", &amp;x);\n        y=((x-32)/1.8)\n        printf(\"%f\\n\",y);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "linked-list"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1441755739, "post_id": 32468789, "comment_id": 52799517, "body": "<code>ptr-&gt;val = val;</code>. That means that all your nodes are pointing to the same <code>data</code> that was declared in <code>main</code>. You need to allocate new memory and copy into the node. Not just point to the passed in buffer."}, {"owner": {"reputation": 77, "user_id": 1349972, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8d42131b737d27b9a326c135b423b43?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Kelly", "link": "https://stackoverflow.com/users/1349972/kevin-kelly"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1441809144, "post_id": 32468789, "comment_id": 52825541, "body": "Thanks for the tip @AlanAu, and for your detailed answer below!"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 5314890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78af50ac44e9c1ac33562fbd99b9cf85?s=128&d=identicon&r=PG&f=1", "display_name": "Edgar Isajanyan", "link": "https://stackoverflow.com/users/5314890/edgar-isajanyan"}, "is_accepted": false, "score": 4, "last_activity_date": 1441756472, "creation_date": 1441756472, "answer_id": 32468934, "question_id": 32468789, "link": "https://stackoverflow.com/questions/32468789/adding-array-nodes-to-linked-list/32468934#32468934", "title": "Adding array nodes to linked list", "body": "<p>All of your <code>array_deck</code>'s -> val is pointing to the <strong>same memory address</strong> - to local variable <code>data</code> in main. You're overwriting it N times thats it why its printing last values inserted.</p>\n\n<p>To solve problem you should <strong>copy</strong> the <code>data</code> array into new and assign to <code>ptr-&gt;val</code> the new allocated array address.</p>\n\n<pre><code>struct array_deck *add_to_list(uint8_t *data, bool add_to_end)\n{\n    ...\n\n    struct array_deck *ptr = (struct array_deck*)malloc(sizeof(struct array_deck));\n    if(NULL == ptr)\n        return NULL;\n\n    ptr-&gt;val = malloc(16*sizeof(uint8_t));\n    memcpy(ptr-&gt;val, data, 16*sizeof(uint8_t));\n    ptr-&gt;next = NULL;\n\n    ...\n}\n</code></pre>\n\n<p>P.S. it would be nice to <strong>remove</strong> create_list function and do all logic of assigning to head in add_to_list.</p>\n"}, {"tags": [], "owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "is_accepted": true, "score": 1, "last_activity_date": 1441756630, "creation_date": 1441756630, "answer_id": 32468948, "question_id": 32468789, "link": "https://stackoverflow.com/questions/32468789/adding-array-nodes-to-linked-list/32468948#32468948", "title": "Adding array nodes to linked list", "body": "<p>In <code>create_list</code> and <code>add_to_list</code> the node data is not being copied correctly. The shown code just stores a pointer to the passed in data instead of making a copy of the data. So the result is that all the nodes end up pointing to the same <code>data</code> defined in <code>main</code> and thus result in the same values when printed out.</p>\n\n<p>There are a number of ways to fix this. Some more elegant than others but all requiring the data to be copied. </p>\n\n<p>The simplest is to assume fixed size data and declare the node struct with static memory for the data. Like so:</p>\n\n<pre><code>#define DATA_BYTES 16\nstruct array_deck\n{\n    uint8_t val[DATA_BYTES];\n    struct array_deck *next;\n};\n</code></pre>\n\n<p>And then replace the pointer assignments in the list functions with data copies. For example:</p>\n\n<pre><code>memcpy(ptr-&gt;val, val, sizeof(ptr-&gt;val));\n</code></pre>\n\n<p>A more flexible/elegant solution would be to explicitly store the size of the data in the node itself so that you could have variable sized data. And then use dynamic memory allocate (<code>malloc</code> and friends) to get memory for the node <code>val</code>.</p>\n"}], "owner": {"reputation": 77, "user_id": 1349972, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8d42131b737d27b9a326c135b423b43?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Kelly", "link": "https://stackoverflow.com/users/1349972/kevin-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 32468948, "answer_count": 2, "score": 2, "last_activity_date": 1441756630, "creation_date": 1441755279, "question_id": 32468789, "link": "https://stackoverflow.com/questions/32468789/adding-array-nodes-to-linked-list", "title": "Adding array nodes to linked list", "body": "<p>I have to build a linked list with each node being an 16 byte array. Using code that works with single uint8_t values, I slightly modified it to accept the 16 bytes. However, whenever I print the list, all nodes are the last node added. What am I doing wrong?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;stdbool.h&gt;\n#include&lt;math.h&gt;\n\nstruct array_deck\n{\n    uint8_t *val;\n    struct array_deck *next;\n};\n\nstruct array_deck *head = NULL;\nstruct array_deck *curr = NULL;\n\nint sizeOfSet;\n\nstruct array_deck *create_list(uint8_t *val)\n{\n    struct array_deck *ptr = (struct array_deck*)malloc(sizeof(struct array_deck));\n\n    if(NULL == ptr)\n        return NULL;\n\n    ptr-&gt;val = val;\n    ptr-&gt;next = NULL;\n\n    head = curr = ptr;\n    return ptr;\n}\n\nvoid print_list(void)\n{\n    struct array_deck *ptr = head;\n\n    while(ptr != NULL)\n    {\n        printf(\"\\n\");\n        printf(\"actually added = \");\n        for (int i = 0; i &lt; 16; i++) {\n            uint8_t blah = ptr-&gt;val[i];\n            printf(\"[%2i] \",blah);\n        }\n        ptr = ptr-&gt;next;\n    }\n\n        printf(\"\\n\");\n    return;\n}\n\nstruct array_deck *add_to_list(uint8_t *data, bool add_to_end)\n{\n    printf(\"array to be added = \");\n    for (int i = 0; i &lt; 16; i++) {\n        printf(\"[%2X] \",data[i]);\n    }\n\n    if(NULL == head)\n        return (create_list(data));\n\n    struct array_deck *ptr = (struct array_deck*)malloc(sizeof(struct array_deck));\n    if(NULL == ptr)\n        return NULL;\n\n    ptr-&gt;val = data;\n    ptr-&gt;next = NULL;\n\n    if(add_to_end)\n    {\n        curr-&gt;next = ptr;\n        curr = ptr;\n    }\n    else\n    {\n        ptr-&gt;next = head;\n        head = ptr;\n    }\n\n    return ptr;\n}\n\nint main(void)\n{\n    printf (\"# of arrays  &gt;&gt; \");\n    scanf (\"%d\", &amp;sizeOfSet);\n\n    uint8_t data[16];\n\n    for(int i = 1; i&lt;=sizeOfSet; i++){\n        for (int j = 0; j &lt; 16; j++) {\n            data[j] = i;\n        }\n        printf(\"\\n\");\n        add_to_list(data,true);\n    }\n\n    print_list();\n\n    return 0;\n}\n</code></pre>\n\n<p>sample run that builds a linked list with 3 nodes:</p>\n\n<pre><code># of arrays  &gt;&gt; 3\n\narray to be added = [ 1] [ 1] [ 1] [ 1] [ 1] [ 1] [ 1] [ 1] [ 1] [ 1] [ 1] [ 1] [ 1] [ 1] [ 1] [ 1] \narray to be added = [ 2] [ 2] [ 2] [ 2] [ 2] [ 2] [ 2] [ 2] [ 2] [ 2] [ 2] [ 2] [ 2] [ 2] [ 2] [ 2] \narray to be added = [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] \nactually added = [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] \nactually added = [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] \nactually added = [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] [ 3] \nProgram ended with exit code: 0\n</code></pre>\n"}, {"tags": ["c", "gcc", "sdl", "sdl-image"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441755888, "post_id": 32468761, "comment_id": 52799553, "body": "Funny, your &quot;script&quot; looks exactly like C source code. Or do you mean the command hidden in your text?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1441760134, "post_id": 32468761, "comment_id": 52800501, "body": "I doubt that you actually want to link gcc with some unrelated library.   However, if you want to link your application with the library and want to know how to tell gcc to do that:  (this is for after all the source files cleanly compile)  `gcc &lt;options like -g&gt; &lt;list of object files&gt; -o &lt;executable file name&gt; -L&lt;path to library&gt; -l (lower case &#39;L&#39;) short library name.    Note: a short library name would be when the full library name is &#39;libmath.so&#39; then the short library name would be &#39;math&#39;  to get short library name:. drop the leading &#39;lib&#39; and everything from &#39;.&#39; onward"}, {"owner": {"reputation": 107, "user_id": 5224557, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33dbf6e205ad1b8a1f9130950d5d11be?s=128&d=identicon&r=PG&f=1", "display_name": "Rubberduccky", "link": "https://stackoverflow.com/users/5224557/rubberduccky"}, "edited": false, "score": 0, "creation_date": 1441763878, "post_id": 32468761, "comment_id": 52801384, "body": "Thank you for the quick responses. To Olaf: I am talking about the command hidden in my text. That command is in a script file. I just find it easier to execute this file once instead of typing it all out on the command line."}, {"owner": {"reputation": 107, "user_id": 5224557, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33dbf6e205ad1b8a1f9130950d5d11be?s=128&d=identicon&r=PG&f=1", "display_name": "Rubberduccky", "link": "https://stackoverflow.com/users/5224557/rubberduccky"}, "edited": false, "score": 0, "creation_date": 1441763962, "post_id": 32468761, "comment_id": 52801399, "body": "To user3629249: I try the following command: &quot;gcc test.c -o a.out -L /Library/Frameworks -l SDL2&quot; and &quot;gcc test.c -o a.out -L /Library/Frameworks -l SDL2.framework&quot; and does not work. Maybe I am doing this wrong? Thank you for the quick response."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1441820287, "post_id": 32468761, "comment_id": 52832775, "body": "Why are you explicitly adding a framework header directory to the list of includes?"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 5224557, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33dbf6e205ad1b8a1f9130950d5d11be?s=128&d=identicon&r=PG&f=1", "display_name": "Rubberduccky", "link": "https://stackoverflow.com/users/5224557/rubberduccky"}, "edited": false, "score": 0, "creation_date": 1441925650, "post_id": 32485256, "comment_id": 52884628, "body": "Thanks for the quick reply. For the -L option would my command be &quot;gcc -L/Library -l/Library/Frameworks/SDL2.framework/Headers -lSDL2 test.c -o a.out&quot;? I tried both of these commands with &lt;SDL.h&gt; and &quot;SDL.h&quot;. Now I can&#39;t get gcc to compile with just the SDL include. I think I need to specify my headers with the &quot;-H&quot; option and the frameworks with the &quot;-F&quot; option as well as passing &quot;-framework SDL2&quot; to gcc. Unless I am using the -L and -l options wrong. I am not sure if this is important or not but I am programming on a Mac."}, {"owner": {"reputation": 1480, "user_id": 3242671, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z8eR8.jpg?s=128&g=1", "display_name": "blakelead", "link": "https://stackoverflow.com/users/3242671/blakelead"}, "reply_to_user": {"reputation": 107, "user_id": 5224557, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33dbf6e205ad1b8a1f9130950d5d11be?s=128&d=identicon&r=PG&f=1", "display_name": "Rubberduccky", "link": "https://stackoverflow.com/users/5224557/rubberduccky"}, "edited": false, "score": 1, "creation_date": 1441929073, "post_id": 32485256, "comment_id": 52885552, "body": "I&#39;m sorry I assumed you were working on Linux.On a Mac you have to put SDL2main.m and SDL2main.h in your project directory and do something like <code>gcc -I&#47;Library&#47;Frameworks&#47;SDL2.framework&#47;Headers test.c -o test SDL2main.m -framework SDL2</code>. And of course the same thing goes for SDL2_image."}, {"owner": {"reputation": 107, "user_id": 5224557, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33dbf6e205ad1b8a1f9130950d5d11be?s=128&d=identicon&r=PG&f=1", "display_name": "Rubberduccky", "link": "https://stackoverflow.com/users/5224557/rubberduccky"}, "edited": false, "score": 0, "creation_date": 1441931839, "post_id": 32485256, "comment_id": 52886226, "body": "Thank you for responding. I tried your suggestion and I am confused because I can&#39;t find a SDL2main.m. The only files I see are header files such as SDL.h and SDL_main.h. Am I not looking in the right directories? I found these files under the framework found in /Library/Frameworks/SDL2.framework/Headers. I was messing around with the options and found a certain combination that got me a little further but now there&#39;s a different error. The combination I tried is:"}, {"owner": {"reputation": 107, "user_id": 5224557, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33dbf6e205ad1b8a1f9130950d5d11be?s=128&d=identicon&r=PG&f=1", "display_name": "Rubberduccky", "link": "https://stackoverflow.com/users/5224557/rubberduccky"}, "edited": false, "score": 1, "creation_date": 1441931970, "post_id": 32485256, "comment_id": 52886255, "body": "&quot;gcc -I/Library/Frameworks/SDL2.framework/Headers -I/Library/Frameworks/SDL_image.framework/Headers -F/Library/Frameworks -framework SDL2 -framework SDL_image test.c -o test&quot;. Now I get an error saying: &quot;In file included from test.c:2: /Library/Frameworks/SDL_image.framework/Headers/SDL_image.h:&zwnj;&#8203;27:10: fatal error:        &#39;SDL/SDL.h&#39; file not found #include &lt;SDL/SDL.h&gt;&quot;                                                                                                             This error is generated from the file SDL_image.h. When I removed the SDL in every line that said &quot;SDL/blah.h&quot;"}, {"owner": {"reputation": 107, "user_id": 5224557, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33dbf6e205ad1b8a1f9130950d5d11be?s=128&d=identicon&r=PG&f=1", "display_name": "Rubberduccky", "link": "https://stackoverflow.com/users/5224557/rubberduccky"}, "edited": false, "score": 0, "creation_date": 1441932083, "post_id": 32485256, "comment_id": 52886280, "body": "the compiler compiles the files but now when I run the resulting executable I get a weird error: &quot;dyld: Library not loaded: @rpath/SDL.framework/Versions/A/SDL   Referenced from: /Library/Frameworks/SDL_image.framework/Versions/A/SDL_image   Reason: image not found&quot;. Any ideas?"}, {"owner": {"reputation": 1480, "user_id": 3242671, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z8eR8.jpg?s=128&g=1", "display_name": "blakelead", "link": "https://stackoverflow.com/users/3242671/blakelead"}, "reply_to_user": {"reputation": 107, "user_id": 5224557, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33dbf6e205ad1b8a1f9130950d5d11be?s=128&d=identicon&r=PG&f=1", "display_name": "Rubberduccky", "link": "https://stackoverflow.com/users/5224557/rubberduccky"}, "edited": false, "score": 0, "creation_date": 1441932104, "post_id": 32485256, "comment_id": 52886286, "body": "When using SDL2 you should also use SDL2_image, not SDL_image. I think you are mixing SDL libs with SDL2 libs."}, {"owner": {"reputation": 107, "user_id": 5224557, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33dbf6e205ad1b8a1f9130950d5d11be?s=128&d=identicon&r=PG&f=1", "display_name": "Rubberduccky", "link": "https://stackoverflow.com/users/5224557/rubberduccky"}, "edited": false, "score": 0, "creation_date": 1441932368, "post_id": 32485256, "comment_id": 52886335, "body": "Thank you so much! As it turns out I was using SDL_image libraries instead of SDL2_image libraries."}, {"owner": {"reputation": 1480, "user_id": 3242671, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z8eR8.jpg?s=128&g=1", "display_name": "blakelead", "link": "https://stackoverflow.com/users/3242671/blakelead"}, "reply_to_user": {"reputation": 107, "user_id": 5224557, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33dbf6e205ad1b8a1f9130950d5d11be?s=128&d=identicon&r=PG&f=1", "display_name": "Rubberduccky", "link": "https://stackoverflow.com/users/5224557/rubberduccky"}, "edited": false, "score": 0, "creation_date": 1441932438, "post_id": 32485256, "comment_id": 52886353, "body": "Ok then I hope fixing that will resolve your issues!"}], "tags": [], "owner": {"reputation": 1480, "user_id": 3242671, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z8eR8.jpg?s=128&g=1", "display_name": "blakelead", "link": "https://stackoverflow.com/users/3242671/blakelead"}, "is_accepted": true, "score": 0, "last_activity_date": 1441817477, "creation_date": 1441817477, "answer_id": 32485256, "question_id": 32468761, "link": "https://stackoverflow.com/questions/32468761/how-can-i-link-with-gcc-and-sdl-image-library/32485256#32485256", "title": "How can I link with gcc and SDL_image library?", "body": "<p>You could do:</p>\n\n<blockquote>\n  <p>gcc -L/libs/path -I/headers/path -lSDL2 -lSDL2_image</p>\n</blockquote>\n\n<p>In this case, use <code>#include \"...\"</code> for your SDL2 headers inclusion.</p>\n\n<p>If you installed SDL2 with a package manager, the previous command is reduced to:</p>\n\n<blockquote>\n  <p>gcc -lSDL2 -lSDL2_image</p>\n</blockquote>\n\n<p>since the path of SDL2 directory is then known to the compiler.\nIn that case you should use <code>#include &lt;...&gt;</code>.</p>\n\n<p>You should consider writing a Makefile for your project. It would become easier to compile as your project grows.</p>\n"}], "owner": {"reputation": 107, "user_id": 5224557, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33dbf6e205ad1b8a1f9130950d5d11be?s=128&d=identicon&r=PG&f=1", "display_name": "Rubberduccky", "link": "https://stackoverflow.com/users/5224557/rubberduccky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3809, "favorite_count": 0, "accepted_answer_id": 32485256, "answer_count": 1, "score": 4, "last_activity_date": 1441906300, "creation_date": 1441754975, "last_edit_date": 1441906300, "question_id": 32468761, "link": "https://stackoverflow.com/questions/32468761/how-can-i-link-with-gcc-and-sdl-image-library", "title": "How can I link with gcc and SDL_image library?", "body": "<p>I have the following script:</p>\n\n<pre><code>gcc -I /Library/Frameworks/SDL2.framework/Headers \\\n    -F /Library/Frameworks/ -framework SDL2 test.c\n</code></pre>\n\n<p>that successfully compiles the following source code:</p>\n\n<pre><code>#include &lt;SDL.h&gt;\n//#include \"SDL_image.h\"\n\nint init();\nint loadMedia();\nvoid close();\n\nSDL_Window* gWindow = NULL;\nSDL_Surface* gScreenSurface = NULL;\nSDL_Surface* gHelloWorld = NULL;\n\nint init()\n{\n    int success = 1;\n\n    if(SDL_Init(SDL_INIT_VIDEO) &lt; 0)\n    {\n        printf(\"SDL could not initialize! SDL_Error: %s\\n\", SDL_GetError());\n    }\n}\n\nint main(int argc, char* args[])\n{\n    return 0;\n}\n</code></pre>\n\n<p>My question is how do I compile this with the added library SDL_image? Would it be something like this?</p>\n\n<pre><code>gcc -I /Library/Frameworks/SDL2.framework/Headers \\\n    -I /Library/Frameworks/SDL_image.framework/Headers \\\n    -F /Library/Frameworks/ -framework SDL2 test.c\n</code></pre>\n\n<p>When I try this I get the following error: </p>\n\n<pre><code>In file included from test.c:2:\n/Library/Frameworks/SDL_image.framework/Headers/SDL_image.h:27:10:      fatal error: \n      'SDL/SDL.h' file not found \n`#include &lt;SDL/SDL.h&gt;`\n</code></pre>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1441755177, "post_id": 32468675, "comment_id": 52799377, "body": "Since <code>x</code> starts at <code>0</code>, the first <code>if</code> fires every time, returning <code>1</code>, and the rest of the code is never reached."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441756770, "post_id": 32468675, "comment_id": 52799751, "body": "Even if you add the increment, you will eventually invoke <i>undefined behaviour</i> (crap, the question was closed just before I could complete my answer)."}], "answers": [{"comments": [{"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "edited": false, "score": 0, "creation_date": 1441754669, "post_id": 32468693, "comment_id": 52799246, "body": "Hopefully there is a compiler warning in the compile output..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441756805, "post_id": 32468693, "comment_id": 52799760, "body": "The increments will eventually invoke UB! Look at the type of <code>x</code>"}], "tags": [], "owner": {"reputation": 5671, "user_id": 1473751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DIVCL.jpg?s=128&g=1", "display_name": "Zong", "link": "https://stackoverflow.com/users/1473751/zong"}, "is_accepted": false, "score": 1, "last_activity_date": 1441754524, "creation_date": 1441754524, "answer_id": 32468693, "question_id": 32468675, "link": "https://stackoverflow.com/questions/32468675/function-that-returns-1-or-0/32468693#32468693", "title": "Function that returns 1 or 0", "body": "<p>You have <code>x++</code> after <code>return</code>ing, so the increment never occurs. </p>\n"}, {"comments": [{"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1441754846, "post_id": 32468704, "comment_id": 52799285, "body": "You can replace all of that <code>if&#47;else</code> code with <code>x = 1 - x;</code> or an XOR"}, {"owner": {"reputation": 9459, "user_id": 958051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KHi3g.png?s=128&g=1", "display_name": "Serdalis", "link": "https://stackoverflow.com/users/958051/serdalis"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1441754925, "post_id": 32468704, "comment_id": 52799307, "body": "@Blastfurnace I could but that would be less readable and reduce the granularity when debugging. For experienced programmers that would be fine but with newer programmers the more granular the program is the better, just so they can debug easier."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1441755330, "post_id": 32468704, "comment_id": 52799430, "body": "I think <code>return x = !x;</code> is pretty clear."}, {"owner": {"reputation": 9459, "user_id": 958051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KHi3g.png?s=128&g=1", "display_name": "Serdalis", "link": "https://stackoverflow.com/users/958051/serdalis"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1441755585, "post_id": 32468704, "comment_id": 52799482, "body": "@LeeDanielCrocker untill they do <code>return x == !x</code> because they aren&#39;t used to having assignments on the same line as returns... But that&#39;s beside the point. I agree is clear and does look nice but I went for simple just to teach some good practices."}], "tags": [], "owner": {"reputation": 9459, "user_id": 958051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KHi3g.png?s=128&g=1", "display_name": "Serdalis", "link": "https://stackoverflow.com/users/958051/serdalis"}, "is_accepted": false, "score": 0, "last_activity_date": 1441754598, "creation_date": 1441754598, "answer_id": 32468704, "question_id": 32468675, "link": "https://stackoverflow.com/questions/32468675/function-that-returns-1-or-0/32468704#32468704", "title": "Function that returns 1 or 0", "body": "<p>When a function returns nothing after the return will be executed.</p>\n\n<p>Currently to the run-time your function looks like:</p>\n\n<pre><code>int alternator(void) {\n\n    static int x = 0;\n\n    if(x == 0) {\n        return 1;\n    }\n}\n</code></pre>\n\n<p>because that is all that will ever be executed.</p>\n\n<p>What you need to do is change the value of <code>x</code> each time the function is run and then return that value.</p>\n\n<p>A simple <code>if</code> statement which detects whether the value of <code>x</code> is <code>1</code> or <code>0</code> would be sufficient.</p>\n\n<p>It is also a good idea to usually only have one return statement at the end of the function and manipulate the return value within the function. This make the code more readable and easier to follow.</p>\n\n<p>A reasonable attempt would look like:</p>\n\n<pre><code>int alternator(void) {\n\n    static int x = 0;\n\n    if(x == 0) \n    {\n        x = 1;\n    }\n    else\n    {\n        x = 0;\n    }\n    return x;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441756854, "post_id": 32468706, "comment_id": 52799770, "body": "The increments will eventually invoke UB! Look at the type of <code>x</code>"}], "tags": [], "owner": {"reputation": 3277, "user_id": 2027272, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/HgKEm.jpg?s=128&g=1", "display_name": "rupesh jain", "link": "https://stackoverflow.com/users/2027272/rupesh-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1441754605, "creation_date": 1441754605, "answer_id": 32468706, "question_id": 32468675, "link": "https://stackoverflow.com/questions/32468675/function-that-returns-1-or-0/32468706#32468706", "title": "Function that returns 1 or 0", "body": "<p>The code highlighted below is unreachable code:</p>\n\n<p>else if (x % 2 == 0) {\n        return 1;\n        <strong>x++;</strong>\n    }\n    else {\n        return 0;\n        <strong>x++;</strong>\n    }</p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441755805, "post_id": 32468738, "comment_id": 52799539, "body": "Or if you don&#39;t fancy bit-twiddling, there&#39;s <code>return x = (x + 1) &amp; 1;</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441755899, "post_id": 32468738, "comment_id": 52799558, "body": "Or if you <i>still</i> think that&#39;s bit-twiddling, there&#39;s <code>return x = (x + 1) % 2;</code>"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 1, "creation_date": 1441756211, "post_id": 32468738, "comment_id": 52799638, "body": "No bit-twiddling <code>return x = &quot;\\1&quot;[x];</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1441756329, "post_id": 32468738, "comment_id": 52799668, "body": "@Blastfurnace nice one."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1441754831, "creation_date": 1441754831, "answer_id": 32468738, "question_id": 32468675, "link": "https://stackoverflow.com/questions/32468675/function-that-returns-1-or-0/32468738#32468738", "title": "Function that returns 1 or 0", "body": "<p>Like this:</p>\n\n<pre><code>int alternator(void) {\n    static int x = 0;\n    return x ^= 1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 3, "creation_date": 1441755263, "post_id": 32468751, "comment_id": 52799410, "body": "Or if you don&#39;t fancy bit-twiddling, there&#39;s <code>return x = !x;</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441756263, "post_id": 32468751, "comment_id": 52799654, "body": "&quot;... since there is no upper limit on values&quot; What do you mean? It only uses values <code>0</code> and <code>1</code> anyway."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1441756594, "post_id": 32468751, "comment_id": 52799722, "body": "@Olaf I think dawg is referring to the <code>x++</code> in the question (though never executed)."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1441757072, "post_id": 32468751, "comment_id": 52799814, "body": "The OP&#39;s solution has <code>x++</code> which will eventually overflow the signed int. Gracefully maybe, depending on the platform, but one should do that only with forethought. Signed int overflow is, technically, <a href=\"https://en.wikipedia.org/wiki/Integer_overflow\" rel=\"nofollow noreferrer\">undefined behavior.</a>"}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 3, "last_activity_date": 1441757373, "last_edit_date": 1441757373, "creation_date": 1441754914, "answer_id": 32468751, "question_id": 32468675, "link": "https://stackoverflow.com/questions/32468675/function-that-returns-1-or-0/32468751#32468751", "title": "Function that returns 1 or 0", "body": "<p>I prefer <code>xor</code> for this since there is no upper limit on the number if times you can call <code>alternator</code>:</p>\n\n<pre><code>int alternator(void) {\n    static int x = 0;  // set to 1 if you want 0 as first value...\n    return x ^= 1;\n}\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n    for(int i=0; i&lt;10; i++){\n        printf(\"%d   %d\\n\", i, alternator());\n    }\n\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>0   1\n1   0\n2   1\n3   0\n4   1\n5   0\n6   1\n7   0\n8   1\n9   0\n</code></pre>\n\n<hr>\n\n<p>As pointed out in the comments, you can also do:</p>\n\n<pre><code>int alternator(void) {\n    static int x = 0;\n    return x = !x;\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5001398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e796af140ba613c55e640414785973?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/5001398/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1812, "favorite_count": 0, "closed_date": 1441756643, "answer_count": 5, "score": -1, "last_activity_date": 1441757373, "creation_date": 1441754416, "last_edit_date": 1441754456, "question_id": 32468675, "link": "https://stackoverflow.com/questions/32468675/function-that-returns-1-or-0", "closed_reason": "Not suitable for this site", "title": "Function that returns 1 or 0", "body": "<p>My prompt is the following:</p>\n\n<p>Write the definition of a function named  alternator that receives no parameters  and returns 1 the first time it is invoked, returns 0 the next time it is invoked, then 1, 0 and so on, alternating between  1/0 on successive invocations.</p>\n\n<p>my attempt is:</p>\n\n<pre><code>int alternator(void) {\n\n    static int x = 0;\n\n    if(x == 0) {\n        return 1;\n    }\n\n    else if (x % 2 == 0) {\n        return 1;\n        x++;\n    }\n    else {\n        return 0;\n        x++;\n    }\n\n}\n</code></pre>\n\n<p>Where did I go wrong?</p>\n"}, {"tags": ["c", "algorithm", "data-structures", "binary-search-tree"], "comments": [{"owner": {"reputation": 1301, "user_id": 3339818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVVg1.jpg?s=128&g=1", "display_name": "surajs1n", "link": "https://stackoverflow.com/users/3339818/surajs1n"}, "edited": false, "score": 0, "creation_date": 1441782885, "post_id": 32468544, "comment_id": 52807384, "body": "Can you please show us the declaration of your BST tree ? And do mention which side are you storing lower values and which side the upper values with respect to a node"}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1441797863, "post_id": 32468544, "comment_id": 52817125, "body": "How can h1 and  h2 both be height of tree."}, {"owner": {"reputation": 43, "user_id": 4742622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beec7eb33ea00ebef4eb081b99e1404d?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/4742622/alessandro"}, "edited": false, "score": 0, "creation_date": 1441799716, "post_id": 32468544, "comment_id": 52818440, "body": "h1 and h2 are the range that I want for example I want to find the successor of node k which is a depth between h1=0 e h2=3"}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1441889857, "post_id": 32468544, "comment_id": 52864281, "body": "I don&#39;t see how you&#39;ll be able to do this if all you have is a node and no way to find the node&#39;s parent."}, {"owner": {"reputation": 43, "user_id": 4742622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beec7eb33ea00ebef4eb081b99e1404d?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/4742622/alessandro"}, "edited": false, "score": 0, "creation_date": 1442950302, "post_id": 32468544, "comment_id": 53293138, "body": "in the discent to right,  I  update the successor to the parent node in the variable Y"}], "owner": {"reputation": 43, "user_id": 4742622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beec7eb33ea00ebef4eb081b99e1404d?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/4742622/alessandro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 514, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1441838488, "creation_date": 1441753421, "last_edit_date": 1441838488, "question_id": 32468544, "link": "https://stackoverflow.com/questions/32468544/binary-search-tree-successor", "title": "Binary search tree successor", "body": "<p>How can I change the following function to let me return the <strong>successor of an integer k</strong> to a level between <strong>h1</strong> and <strong>h2</strong>? h1 and h2 are ranges for example h1 = 0 and h2=3, I want the successor of k who is at depths between 0 and 3</p>\n\n<pre><code>//BST declaration\nstruct node\n{\n   int key;\n   struct node *left;//pointer to left\n   struct node *right;// pointer to right\n};\n\nstruct node *successor(struct node *T, int k, int h1, int h2)\n{\n   struct node *z = T;\n   struct node *y = NULL;//successor candidate\n   if(T!=NULL)\n   {\n      while(z!=NULL &amp;&amp; z-&gt;key!=NULL)\n      {\n        if(k &gt; z-&gt;key)\n            z = z-&gt;right;//If k is greater than the root then I move to the right\n        else if(k &lt; z-&gt;key)\n        {\n            y = z;//updates the successor of his father\n            z = z-&gt;left;//If k is less than the root then I move to the left\n        }\n       }\n      if(z!=NULL &amp;&amp; z-&gt;right!=NULL)\n            y = bstMinimum(z-&gt;right);\n   }\n   return y;\n }\n\n//find the minimum of the right tree\nstruct node *bstMinimum(struct node *A)\n{\n   while(A!=NULL &amp;&amp; A-&gt;left!=NULL)\n   {\n     A=A-&gt;left; \n   }\n  return A;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "macos", "gcc"], "comments": [{"owner": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 0, "creation_date": 1441753521, "post_id": 32468480, "comment_id": 52798917, "body": "Something looks wrong there - <code>strnlen()</code> should be part of the standard C library, and I believe <code>_strnlen</code> is the linker symobl name for that function.  That&#39;s one thing to check - is the symbol name in the library using 0, 1, or 2 underscores before it?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1441753540, "post_id": 32468480, "comment_id": 52798919, "body": "The source code refers to <code>strnlen</code>, not <code>_strnlen</code>. <code>strnlen</code> is defined by POSIX. Does <code>man strnlen</code> tell you anything? If so, it should tell you what compile-time options you need to specify to enable it."}, {"owner": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 1, "creation_date": 1441753611, "post_id": 32468480, "comment_id": 52798942, "body": "Hmm, aren&#39;t <code>-arch i386</code> and <code>-arch ppc</code> mutually exclusive?"}, {"owner": {"reputation": 2169, "user_id": 748777, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/78d34a7508c8d2fd3f337beb41966a08?s=128&d=identicon&r=PG", "display_name": "C.O.", "link": "https://stackoverflow.com/users/748777/c-o"}, "reply_to_user": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 2, "creation_date": 1441753751, "post_id": 32468480, "comment_id": 52798984, "body": "@ash nope this builds a universal binary that runs from 10.4 through 10.11"}, {"owner": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 0, "creation_date": 1441753974, "post_id": 32468480, "comment_id": 52799048, "body": "@C.O. very interesting."}, {"owner": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 0, "creation_date": 1441754083, "post_id": 32468480, "comment_id": 52799089, "body": "Try <code>gcc -v -o dcraw -O4 -Wall -force_cpusubtype_ALL -mmacosx-version-min=10.4 -arch i386 -arch ppc dcraw.c -lm -DNODEPS</code> to find the exact library paths being linked, and then check the symobls of those libs. <code>nm &lt;lib&gt; | grep strnlen</code> should help."}, {"owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "edited": false, "score": 2, "creation_date": 1441754284, "post_id": 32468480, "comment_id": 52799144, "body": "It&#39;s not availab in 10.4, only since 10.7. See <code>size_t   strnlen(const char *, size_t) __OSX_AVAILABLE_STARTING(__MAC_10_7, __IPHONE_4_3);</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 0, "creation_date": 1441754374, "post_id": 32468480, "comment_id": 52799171, "body": "@ash <code>strnlen()</code> is not in a C11 draft of Apr 2011"}, {"owner": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441754763, "post_id": 32468480, "comment_id": 52799270, "body": "@chux - ok.  Thank you."}, {"owner": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 0, "creation_date": 1441755136, "post_id": 32468480, "comment_id": 52799366, "body": "@C.O. if the strnlen function just isn&#39;t available with the version of the compiler, then HelloWorld&#39;s answer is likely the best solution.  Using the <code>gcc -v</code> and <code>nm</code> commands should get you close to an answer there.  Compiling a small sample program is a good way to determine if the compiler can find the function at all."}, {"owner": {"reputation": 2169, "user_id": 748777, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/78d34a7508c8d2fd3f337beb41966a08?s=128&d=identicon&r=PG", "display_name": "C.O.", "link": "https://stackoverflow.com/users/748777/c-o"}, "reply_to_user": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 0, "creation_date": 1441755511, "post_id": 32468480, "comment_id": 52799469, "body": "@ash It really is not available on 10.6 and on 10.7 all the PPC stuff has been removed by Apple so I can&#39;t use that. Where do I best put HelloWorld&#39;s answer?"}, {"owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "edited": false, "score": 0, "creation_date": 1441755632, "post_id": 32468480, "comment_id": 52799492, "body": "I would put it in the file you want to compile <code>dcraw.c</code>. If there are more of them create a header file and place it there."}, {"owner": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 0, "creation_date": 1441755893, "post_id": 32468480, "comment_id": 52799554, "body": "If this is third-party code, I would put that answer into a library and add <code>-l&lt;libname&gt;</code> to the gcc compilation line.  Unless it&#39;s opensource and you can (a) contribute the solution, and (b) find <code>#ifdef</code> constructs to properly detect when the function needs to be included.  If this is your own app, I would either just put it in an existing source file, or (my preference) in a new source file added to the project."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441760999, "post_id": 32468480, "comment_id": 52800692, "body": "suggest, at the command line: <code>man strnlen</code>  If an appropriate man page is displayed, then the problem is in how your compiling the source code.   I will assume that in your source code you have the statement: <code>#include &lt;string.h&gt;</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441761367, "post_id": 32468480, "comment_id": 52800775, "body": "there is no way the binaries for the two different CPUs will run on either machine because the machine code ops/etc are completely different.  However, library&#39;s for a specific machine will run on that specific machine and a source file can be compiled (most of the time) on the machine it is to run on."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441761575, "post_id": 32468480, "comment_id": 52800814, "body": "per this link: &lt;<a href=\"https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man3/strnlen.3.html\" rel=\"nofollow noreferrer\">developer.apple.com/library/mac/documentation/Darwin/Refere&zwnj;&#8203;nce/&hellip;</a>&gt;  the function strnlen() is available,  It may be necessary to have <code>-D_POSIX_C_SOURCE = 200809L</code>  as a compiler parameter or a #define _POSIX_C_SOURCE 20089L statement before the #include statements"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441761788, "post_id": 32468480, "comment_id": 52800863, "body": "your compile statement has two different &#39;arch&#39; parameters.  <code>-arch i386 -arch ppc</code>  the gcc compiler will only pay attention to one of those parameters, probably the second &#39;arch&#39; parameter (or issue a warning/error message)"}, {"owner": {"reputation": 2169, "user_id": 748777, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/78d34a7508c8d2fd3f337beb41966a08?s=128&d=identicon&r=PG", "display_name": "C.O.", "link": "https://stackoverflow.com/users/748777/c-o"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1442094375, "post_id": 32468480, "comment_id": 52944955, "body": "@user3629249 as discussed in the comments above the two &#39;arch&#39; parameters are valid and result in a univeral binary build that has both the Power PC and the Intel executable and runs on OS X 10.4 PPC through 10.11 Intel. We&#39;ve been using that for years and it&#39;s well tested..."}], "answers": [{"comments": [{"owner": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 0, "creation_date": 1441753563, "post_id": 32468556, "comment_id": 52798931, "body": "<code>strlen()</code> is not a safe replacement if the buffer may not be null terminated."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1441753618, "post_id": 32468556, "comment_id": 52798945, "body": "It&#39;s not just a GNU extension; it&#39;s <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/strnlen.html\" rel=\"nofollow noreferrer\">specified by POSIX</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441755069, "post_id": 32468556, "comment_id": 52799351, "body": "Minor: remove extra <code>;</code> in <code>size_t maxlen);</code>"}, {"owner": {"reputation": 2169, "user_id": 748777, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/78d34a7508c8d2fd3f337beb41966a08?s=128&d=identicon&r=PG", "display_name": "C.O.", "link": "https://stackoverflow.com/users/748777/c-o"}, "edited": false, "score": 0, "creation_date": 1441755768, "post_id": 32468556, "comment_id": 52799528, "body": "@HelloWorld Thanks a lot."}, {"owner": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 0, "creation_date": 1441756245, "post_id": 32468556, "comment_id": 52799649, "body": "BTW - this only works when <code>sizeof char == 1</code>, correct?  I suspect that&#39;s perfectly adequate for the Op&#39;s question."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1441761099, "post_id": 32468556, "comment_id": 52800715, "body": "my understanding is that sizeof(char) is specifically defined as 1 in the c standard"}, {"owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "edited": false, "score": 1, "creation_date": 1441761690, "post_id": 32468556, "comment_id": 52800841, "body": "Yes, sizeof(char) is always 1 (see &#167;6.5.3.4 C++ <code>When (the sizeof operator is) applied to an operand that has type char, unsigned char, or signed char, (or a qualified version thereof) the result is 1.</code>). In C and C++ a char is a byte but a byte is implementation-defined (in C++ see &#167;1.7/1, in C99 see &#167;3.6). The width of a char is defined in <code>CHAR_BIT</code> which is 8 in most cases. The only requirement is that it is at <b>least</b> large enough to contain a member of the basic execution character set. But sizeof still returns 1."}, {"owner": {"reputation": 166, "user_id": 1471119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15ee0d0b65c09c7b3f66542d71bd292b?s=128&d=identicon&r=PG&f=1", "display_name": "Craig Barnes", "link": "https://stackoverflow.com/users/1471119/craig-barnes"}, "edited": false, "score": 0, "creation_date": 1537317162, "post_id": 32468556, "comment_id": 91737416, "body": "@seb-mtl it <i>was</i> a GNU extension. It can no longer be called an &quot;extension&quot; now that it&#39;s part of the spec."}, {"owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "reply_to_user": {"reputation": 166, "user_id": 1471119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15ee0d0b65c09c7b3f66542d71bd292b?s=128&d=identicon&r=PG&f=1", "display_name": "Craig Barnes", "link": "https://stackoverflow.com/users/1471119/craig-barnes"}, "edited": false, "score": 0, "creation_date": 1537371076, "post_id": 32468556, "comment_id": 91762530, "body": "@Craig: Do you have a link?"}, {"owner": {"reputation": 166, "user_id": 1471119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15ee0d0b65c09c7b3f66542d71bd292b?s=128&d=identicon&r=PG&f=1", "display_name": "Craig Barnes", "link": "https://stackoverflow.com/users/1471119/craig-barnes"}, "edited": false, "score": 0, "creation_date": 1537384013, "post_id": 32468556, "comment_id": 91768993, "body": "<a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/strnlen.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/9699919799/functions/strnlen.h&zwnj;&#8203;tml</a>   <a href=\"https://linux.die.net/man/3/strnlen\" rel=\"nofollow noreferrer\">linux.die.net/man/3/strnlen</a>"}], "tags": [], "owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "is_accepted": true, "score": 8, "last_activity_date": 1441755866, "last_edit_date": 1441755866, "creation_date": 1441753518, "answer_id": 32468556, "question_id": 32468480, "link": "https://stackoverflow.com/questions/32468480/strnlen-does-not-exist-in-gcc-4-2-1-on-mac-os-x-10-6-8-how-to-define-it/32468556#32468556", "title": "strnlen does not exist in gcc-4.2.1 on Mac OS X 10.6.8 - how to define it?", "body": "<p><a href=\"https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man3/strnlen.3.html\" rel=\"nofollow\">strnlen</a> is a GNU extension and also specified in POSIX (IEEE Std 1003.1-2008). If <code>strnlen</code> is not available (it is since 10.7) use the following replacement.</p>\n\n<pre><code>// Use this if strnlen is missing.\nsize_t strnlen(const char *str, size_t max)\n{\n    const char *end = memchr (str, 0, max);\n    return end ? (size_t)(end - str) : max;\n}\n</code></pre>\n"}], "owner": {"reputation": 2169, "user_id": 748777, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/78d34a7508c8d2fd3f337beb41966a08?s=128&d=identicon&r=PG", "display_name": "C.O.", "link": "https://stackoverflow.com/users/748777/c-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 976, "favorite_count": 0, "accepted_answer_id": 32468556, "answer_count": 1, "score": 5, "last_activity_date": 1441757088, "creation_date": 1441752817, "last_edit_date": 1441757088, "question_id": 32468480, "link": "https://stackoverflow.com/questions/32468480/strnlen-does-not-exist-in-gcc-4-2-1-on-mac-os-x-10-6-8-how-to-define-it", "title": "strnlen does not exist in gcc-4.2.1 on Mac OS X 10.6.8 - how to define it?", "body": "<p>I'm building a cross platform OS X version of the latest <a href=\"https://www.cybercom.net/~dcoffin/dcraw/dcraw.c\" rel=\"nofollow\">dcraw.c</a> I'm doing this on OS X 10.6.8 to have the PPC compatibility. Now my problem is that strnlen seems to get used in the latest version of the program and it does not exist on 10.6.8 and gcc gives me messages like this:</p>\n\n<pre><code>Undefined symbols for architecture i386:\n  \"_strnlen\", referenced from:\n...\nUndefined symbols for architecture ppc:\n  \"_strnlen\", referenced from:\n...\n</code></pre>\n\n<p>So, I'd like to just define strnlen but don't quite know how.</p>\n\n<p><strong>Q:</strong> Can anyone please provide a working definition of strnlen to use in dcraw.c?</p>\n\n<p>My gcc compilation command is this btw:</p>\n\n<pre><code>gcc -o dcraw -O4 -Wall -force_cpusubtype_ALL -mmacosx-version-min=10.4 -arch i386 -arch ppc dcraw.c -lm -DNODEPS\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "reply_to_user": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 1, "creation_date": 1441752550, "post_id": 32468396, "comment_id": 52798668, "body": "@AdrianoRepetti, The NULL says to pick up where the last <code>strtok()</code> call left off.  That&#39;s a very bizarre behavior by today&#39;s standards, but there you have it."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 6, "creation_date": 1441752555, "post_id": 32468396, "comment_id": 52798670, "body": "<code>memcpy(subline, ++p, strlen(p)+1);</code> is a <i>horrible</i> idea. There is no sequence-point between evaluations of arguments for a function."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 1, "creation_date": 1441752751, "post_id": 32468396, "comment_id": 52798722, "body": "Just a suggestion:  I would replace <code>if ( strncmp( p, &quot;-&quot;, 1) == 0 )</code> with <code>if ( *p == &#39;-&#39; )</code>.  It is a change from a string comparison to a character comparison.  Take care with the single and double quotes.  And as my answer suggests, do check p before using it."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1441753986, "post_id": 32468396, "comment_id": 52799053, "body": "<code>p = strtok (NULL, &quot; ,&quot;);</code> move to loop-end"}, {"owner": {"reputation": 543, "user_id": 2898827, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/866e61a70ba70afe9fc44e9278710d31?s=128&d=identicon&r=PG&f=1", "display_name": "John Snow", "link": "https://stackoverflow.com/users/2898827/john-snow"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1441754282, "post_id": 32468396, "comment_id": 52799142, "body": "@EOF I know it&#39;s a horrible idea, but I couldnt figure out other way to do the same, would be nice if you could share some better idea ;)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1441754408, "post_id": 32468396, "comment_id": 52799184, "body": "&quot;... I couldnt figure out other way to do the same ...&quot; What &quot;same&quot;? Invoking <i>undefined behaviour</i>?"}], "answers": [{"comments": [{"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "reply_to_user": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 0, "creation_date": 1441752857, "post_id": 32468428, "comment_id": 52798745, "body": "@ash, Thanks for the edit.  That does help paint the whole picture."}, {"owner": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 0, "creation_date": 1441752937, "post_id": 32468428, "comment_id": 52798764, "body": "You&#39;re welcome.  I also agree with the comment the NULL to strtok is add (or just outdated), but how old is that thing?  :).  Not a function I would recommend to most devs these days!"}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "reply_to_user": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 0, "creation_date": 1441753081, "post_id": 32468428, "comment_id": 52798807, "body": "It&#39;s like recommending some ancient tool to someone who fixes up antique cars.  (Probably) like you, I&#39;d recommend starting fresh with new stuff."}], "tags": [], "owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "is_accepted": true, "score": 2, "last_activity_date": 1441752780, "last_edit_date": 1441752780, "creation_date": 1441752416, "answer_id": 32468428, "question_id": 32468396, "link": "https://stackoverflow.com/questions/32468396/c-segmentation-fault-when-spitting-a-string/32468428#32468428", "title": "C Segmentation fault when spitting a string", "body": "<p>When <code>p</code> becomes null, you still pass it to <code>strcncmp()</code>.  Don't do that -- add another check instead.</p>\n\n<p>NULL is returned by <code>strtok</code> when there are no more matches, which the code detects in the while-loop, but before the loop logic will catch it, the <code>strncmp()</code> method is called with the NULL pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441763439, "post_id": 32469670, "comment_id": 52801259, "body": "I wonder why the &#39;,&#39; in the strtok second parameter as there is no &#39;,&#39; to search for in the input string."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1441762910, "creation_date": 1441762910, "answer_id": 32469670, "question_id": 32468396, "link": "https://stackoverflow.com/questions/32468396/c-segmentation-fault-when-spitting-a-string/32469670#32469670", "title": "C Segmentation fault when spitting a string", "body": "<p>this is the main error:</p>\n\n<p>the function strtok() is being called a second time, before the first string pointer has been processed</p>\n\n<p>this line:</p>\n\n<pre><code>memcpy(subline, ++p, strlen(p)+1);\n</code></pre>\n\n<p>(remembering that 'p' is a pointer to the first character of the string, and pre-increment of that pointer inside the memcpy() function is a very bad idea due to certain 'side effects'.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n// wrap numerics in parens to avoid certain 'text replacement' errors\n#define MAX_CHAR (9999)\n\nint main ( void )\n{\n\n  char line[] =\"this is my -string\";\n  char *p;\n  char subline[MAX_CHAR] = {'\\0'};  // assure the string will be properly terminated\n\n\n  printf (\"Split string in tokens:\\n\");\n\n  p = strtok (line,\" \"); // p now points to first token (or contains NULL\n\n  while (p)   // will continue to loop while p not equal to NULL, where NULL is the same as 'false'\n  {\n      printf (\"%s\\n\", p);\n\n      // don't need all this power function call\n      // if ((strncmp(p, \"-\", 1) == 0))\n      if( '-' == p[0] )\n      {\n          p++; // step past the '-'\n          memcpy(subline, p, strlen(p)); // remember, subline is init. to all '\\0'\n          printf (\"subline: %s\\n\", subline);\n      }\n\n      p = strtok (NULL, \" ,\"); // p now points to next token (or contains NULL)\n  } // end while\n\n  printf (\"\\nData:\\n\");\n  printf (\"subline is: %s\\n\", subline);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 543, "user_id": 2898827, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/866e61a70ba70afe9fc44e9278710d31?s=128&d=identicon&r=PG&f=1", "display_name": "John Snow", "link": "https://stackoverflow.com/users/2898827/john-snow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 32468428, "answer_count": 2, "score": -1, "last_activity_date": 1441762910, "creation_date": 1441752155, "question_id": 32468396, "link": "https://stackoverflow.com/questions/32468396/c-segmentation-fault-when-spitting-a-string", "title": "C Segmentation fault when spitting a string", "body": "<p>First of all sorry if I this is a basic (or stupid) question, I am coming from Python and I am quite new in C (still studying it). </p>\n\n<p>I have a short script to split a string into sub-strings,\nfor example: \"this is my -string\" into \"this\",\"is\",\"my\",\"-string\". </p>\n\n<p>After that I want to select the substring that starts with the char: '-', and save in a variable calls \"subline\":</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX_CHAR 9999\n\nint main ()\n{\n\n  char line[] =\"this is my -string\";\n  char *p;\n  char subline[MAX_CHAR];\n\n\n  printf (\"Split string in tokens:\\n\");\n\n  p = strtok (line,\" \");\n\n  while (p != NULL)\n  {\n    printf (\"%s\\n\", p);\n    p = strtok (NULL, \" ,\");\n\n    if ((strncmp(p, \"-\", 1) == 0)){ \n      memcpy(subline, ++p, strlen(p)+1);\n      printf (\"subline: %s\\n\", subline);\n\n    }\n\n\n  }\n  printf (\"\\nData:\\n\");\n  printf (\"subline is: %s\\n\", subline);\n  return 0;\n}\n</code></pre>\n\n<p>Everything runs fine inside the while loop, where I can even print the variable \"subline\", but outside the while loop I get a segmentation fault, here is the output:</p>\n\n<pre><code>root@debian:/home/user/Desktop/splits# ./split\nSplit string in tokens:\nthis\nis\nmy\nsubline: string\nstring\nSegmentation fault\n</code></pre>\n\n<p>I tried to figure out and solved it using malloc(sizeof(*subline)); but always the same segmentation fault outside the while loop. </p>\n\n<p>Anyone has any idea? </p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1441749300, "post_id": 32467839, "comment_id": 52797656, "body": "Please post the code as formatted text instead of a screenshot. And the exact error with line number."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1441749409, "post_id": 32467839, "comment_id": 52797708, "body": "As an aside, should you have <code>spaces != 0</code> in the second <code>for</code> statement? Or even (as a precaution from the calculation) <code>spaces &gt; 0</code> ?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1441750451, "post_id": 32467839, "comment_id": 52798060, "body": "<code>int all_rows;int space;</code> --&gt; <code>int rows;int spaces;</code> as typo"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1441750803, "post_id": 32467839, "comment_id": 52798174, "body": "And <code>int hash</code> --&gt; <code>int hashes</code> too. Anything wrong with <code>height</code>?"}, {"owner": {"reputation": 15, "user_id": 4580687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c2bf663be54ccbebc12141f670cc9d?s=128&d=identicon&r=PG&f=1", "display_name": "vslateart", "link": "https://stackoverflow.com/users/4580687/vslateart"}, "edited": false, "score": 0, "creation_date": 1441815291, "post_id": 32467839, "comment_id": 52830104, "body": "Sorry for the screenshot, had to be quick. The suggestions worked out, but my pyramid is upside down so just trying to work that out now."}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 4, "last_activity_date": 1441749766, "creation_date": 1441749766, "answer_id": 32467985, "question_id": 32467839, "link": "https://stackoverflow.com/questions/32467839/mario-c-coding-issue/32467985#32467985", "title": "Mario.c coding issue", "body": "<p>Here is your problem</p>\n\n<pre><code>int main(void);\n</code></pre>\n\n<p>Please remove the final <code>;</code> since you are declaring a function prototype, not a function implementation. So, the following statements are out of context, because they are not within the body of any function.</p>\n"}], "owner": {"reputation": 15, "user_id": 4580687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c2bf663be54ccbebc12141f670cc9d?s=128&d=identicon&r=PG&f=1", "display_name": "vslateart", "link": "https://stackoverflow.com/users/4580687/vslateart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "closed_date": 1441760330, "answer_count": 1, "score": -9, "last_activity_date": 1469945807, "creation_date": 1441749162, "last_edit_date": 1469945807, "question_id": 32467839, "link": "https://stackoverflow.com/questions/32467839/mario-c-coding-issue", "closed_reason": "Not suitable for this site", "title": "Mario.c coding issue", "body": "<p>I'm having some trouble with my code and I'm not sure as to what the error message is trying to tell me is wrong with what I have. (Please see image) </p>\n\n<p>Any suggestions?</p>\n\n<p>Btw, it says error: expected identifier '(' in the terminal window as well.  </p>\n\n<p><a href=\"https://i.stack.imgur.com/0npFn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0npFn.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["java", "c", "interprocess"], "comments": [{"owner": {"reputation": 21895, "user_id": 3895960, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/C7YtN.jpg?s=128&g=1", "display_name": "Dici", "link": "https://stackoverflow.com/users/3895960/dici"}, "edited": false, "score": 0, "creation_date": 1441749194, "post_id": 32467759, "comment_id": 52797623, "body": "It is not clear to me. How many JVMs at a time ? Why do you say &quot;twice&quot; and then mention 3 ? And finally, why don&#39;t you try whatever you want to achieve and see the result ?"}, {"owner": {"reputation": 21895, "user_id": 3895960, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/C7YtN.jpg?s=128&g=1", "display_name": "Dici", "link": "https://stackoverflow.com/users/3895960/dici"}, "edited": false, "score": 0, "creation_date": 1441749353, "post_id": 32467759, "comment_id": 52797684, "body": "Oh, are you concerned that the standard output/input would not support multiple programs sharing information on it at the same time ?"}, {"owner": {"reputation": 11, "user_id": 3394875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d04cb7cd6b0277ed20b08b3db490bf14?s=128&d=identicon&r=PG&f=1", "display_name": "user3394875", "link": "https://stackoverflow.com/users/3394875/user3394875"}, "reply_to_user": {"reputation": 21895, "user_id": 3895960, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/C7YtN.jpg?s=128&g=1", "display_name": "Dici", "link": "https://stackoverflow.com/users/3895960/dici"}, "edited": false, "score": 0, "creation_date": 1441749428, "post_id": 32467759, "comment_id": 52797714, "body": "The first JVM execs two more so there&#39;s 3. I tried it and one stdout delivers whereas the others do not."}, {"owner": {"reputation": 21895, "user_id": 3895960, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/C7YtN.jpg?s=128&g=1", "display_name": "Dici", "link": "https://stackoverflow.com/users/3895960/dici"}, "edited": false, "score": 0, "creation_date": 1441749463, "post_id": 32467759, "comment_id": 52797731, "body": "Why don&#39;t you just write to temporary files ?"}, {"owner": {"reputation": 12675, "user_id": 636009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IIQJV.jpg?s=128&g=1", "display_name": "David Conrad", "link": "https://stackoverflow.com/users/636009/david-conrad"}, "edited": false, "score": 0, "creation_date": 1441749484, "post_id": 32467759, "comment_id": 52797739, "body": "Yes, each process has its own stdin and stdout (and stderr), but without code it is difficult to say what the problem might be."}, {"owner": {"reputation": 11, "user_id": 3394875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d04cb7cd6b0277ed20b08b3db490bf14?s=128&d=identicon&r=PG&f=1", "display_name": "user3394875", "link": "https://stackoverflow.com/users/3394875/user3394875"}, "edited": false, "score": 0, "creation_date": 1441749815, "post_id": 32467759, "comment_id": 52797873, "body": "Can&#39;t use files because a read does not remove data. These processes are in an embedded Linux sys that runs 24/7"}, {"owner": {"reputation": 21895, "user_id": 3895960, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/C7YtN.jpg?s=128&g=1", "display_name": "Dici", "link": "https://stackoverflow.com/users/3895960/dici"}, "edited": false, "score": 0, "creation_date": 1441749997, "post_id": 32467759, "comment_id": 52797927, "body": "A temp file can be wiped after it has been used. That&#39;s the point of a temporary file actually"}, {"owner": {"reputation": 11, "user_id": 3394875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d04cb7cd6b0277ed20b08b3db490bf14?s=128&d=identicon&r=PG&f=1", "display_name": "user3394875", "link": "https://stackoverflow.com/users/3394875/user3394875"}, "edited": false, "score": 0, "creation_date": 1441750264, "post_id": 32467759, "comment_id": 52798010, "body": "There&#39;s no time to wipe out anything in a real-time system - you could lose data if you do."}, {"owner": {"reputation": 11, "user_id": 3394875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d04cb7cd6b0277ed20b08b3db490bf14?s=128&d=identicon&r=PG&f=1", "display_name": "user3394875", "link": "https://stackoverflow.com/users/3394875/user3394875"}, "edited": false, "score": 0, "creation_date": 1441750354, "post_id": 32467759, "comment_id": 52798037, "body": "Thanks David, this now tells me I can actually proceed to messy debugging details."}, {"owner": {"reputation": 1389, "user_id": 3477201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FyDrM.png?s=128&g=1", "display_name": "rsutormin", "link": "https://stackoverflow.com/users/3477201/rsutormin"}, "edited": false, "score": 0, "creation_date": 1441753160, "post_id": 32467759, "comment_id": 52798822, "body": "Make sure you don&#39;t have deadlock situation like described here: <a href=\"http://stackoverflow.com/questions/3054531/correct-usage-of-processbuilder\" title=\"correct usage of processbuilder\">stackoverflow.com/questions/3054531/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 3394875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d04cb7cd6b0277ed20b08b3db490bf14?s=128&d=identicon&r=PG&f=1", "display_name": "user3394875", "link": "https://stackoverflow.com/users/3394875/user3394875"}, "edited": false, "score": 0, "creation_date": 1441753709, "post_id": 32467759, "comment_id": 52798972, "body": "In this case the architecture is the problem: each C program accesses the same hardware registers concurrently and that is the end-problem. Need some kind of Linux shareable semaphore I guess."}], "owner": {"reputation": 11, "user_id": 3394875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d04cb7cd6b0277ed20b08b3db490bf14?s=128&d=identicon&r=PG&f=1", "display_name": "user3394875", "link": "https://stackoverflow.com/users/3394875/user3394875"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1442096694, "creation_date": 1441748728, "last_edit_date": 1442096694, "question_id": 32467759, "link": "https://stackoverflow.com/questions/32467759/multiple-java-images-of-same-program-exec-same-c-program-each-to-read-its-stdout", "title": "Multiple Java images of same program exec same C program each to read its stdout", "body": "<p>Java program A execs itself twice, each of the 3 images exec the same C program with different args; the C programs send data back via <code>stdout</code> (e.g. <code>fprintf(stdout,...)</code>) to its Java peer which uses <code>getInputStream()</code> to open a reader for it.</p>\n\n<p>This works well if A runs by itself, but with 3 copies of A simultaneously, only one program delivers data - the rest get freeze.</p>\n\n<p>I assumed each C program has its own copy of <code>stdout</code>. Is that wrong?</p>\n\n<p>I just want to make sure this architecture is correct, because it will tell me what to debug - each A is also a socket server to other Java clients.</p>\n"}, {"tags": ["c", "memory-management", "printf"], "comments": [{"owner": {"reputation": 79, "user_id": 5036902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d9d2e396f2c0305847a489652ceaea?s=128&d=identicon&r=PG&f=1", "display_name": "zyrkiem64", "link": "https://stackoverflow.com/users/5036902/zyrkiem64"}, "edited": false, "score": 2, "creation_date": 1441749248, "post_id": 32467671, "comment_id": 52797642, "body": "Sorry about that, I didn&#39;t know about CodeReview website, shall I move my post ?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1441749316, "post_id": 32467671, "comment_id": 52797662, "body": "C doesn&#39;t have function overloading."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1441749487, "post_id": 32467671, "comment_id": 52797743, "body": "With respect to your first question, if you don&#39;t want the intermediate variable, just write <code>my_put_double(va_arg(args, double));</code>. <code>va_arg(...)</code> is an ordinary expression; you aren&#39;t required to use it in an assignment statement. In general, you might want to consider using a <code>switch</code> statement rather than the long chain of <code>if...else if...</code>. The switch is more readable and sometimes faster."}, {"owner": {"reputation": 79, "user_id": 5036902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d9d2e396f2c0305847a489652ceaea?s=128&d=identicon&r=PG&f=1", "display_name": "zyrkiem64", "link": "https://stackoverflow.com/users/5036902/zyrkiem64"}, "edited": false, "score": 0, "creation_date": 1441750096, "post_id": 32467671, "comment_id": 52797951, "body": "I would like to know what is the more  efficient to do, for memory and speed. And in which cases, intermediate variable or functional programming should be used to get best results."}, {"owner": {"reputation": 12040, "user_id": 510036, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b7c510641e6526d19abc93e866e75ac8?s=128&d=identicon&r=PG", "display_name": "Qix - MONICA WAS MISTREATED", "link": "https://stackoverflow.com/users/510036/qix-monica-was-mistreated"}, "edited": false, "score": 0, "creation_date": 1441750364, "post_id": 32467671, "comment_id": 52798040, "body": "CodeReview is probably the best place for this."}, {"owner": {"reputation": 2801, "user_id": 3500191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6kwij.jpg?s=128&g=1", "display_name": "Ethan Bierlein", "link": "https://stackoverflow.com/users/3500191/ethan-bierlein"}, "edited": false, "score": 4, "creation_date": 1441750477, "post_id": 32467671, "comment_id": 52798074, "body": "Please note, if this is migrated to Code Review, the title should reflect on the purpose of the code, e.g <i>&quot;A custom printf implementation&quot;</i>."}, {"owner": {"reputation": 12398, "user_id": 1310566, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5qiMO.jpg?s=128&g=1", "display_name": "Simon Forsberg", "link": "https://stackoverflow.com/users/1310566/simon-forsberg"}, "reply_to_user": {"reputation": 12040, "user_id": 510036, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b7c510641e6526d19abc93e866e75ac8?s=128&d=identicon&r=PG", "display_name": "Qix - MONICA WAS MISTREATED", "link": "https://stackoverflow.com/users/510036/qix-monica-was-mistreated"}, "edited": false, "score": 1, "creation_date": 1441750535, "post_id": 32467671, "comment_id": 52798090, "body": "@Qix with 5 upvotes, no downvotes and no close votes, it seems like it can fit on Stack Overflow too."}, {"owner": {"reputation": 7651, "user_id": 2960823, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/otSfG.jpg?s=128&g=1", "display_name": "kuroi neko", "link": "https://stackoverflow.com/users/2960823/kuroi-neko"}, "edited": false, "score": 0, "creation_date": 1441750981, "post_id": 32467671, "comment_id": 52798220, "body": "I can&#39;t see the point in optimizing printf for speed. You will spend ages in characters I/O anyway, so your gains will be neglectible even if you rewrite your code in assembly language. Optimizing for space might make sense on a very constrained architecture, let&#39;s say a 8/16 bits microcontroller with a few Kb of RAM &amp; ROM."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441752123, "post_id": 32467671, "comment_id": 52798563, "body": "Aside: your <code>printf</code> returns <code>0</code> but the standard library function returns the number of characters printed, or a negative value if an error occurs."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441754520, "post_id": 32467671, "comment_id": 52799210, "body": "Pet peeve - in the <code>if(format[i] != &#39;%&#39;){</code>, if you put <code>continue;</code> then you can avoid an extra level of indent. Also this has nothing to do with performance, write the most readable code."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441754599, "post_id": 32467671, "comment_id": 52799229, "body": "How does <code>my_strcat</code> work? If it mallocs space, you forgot to free it."}, {"owner": {"reputation": 12040, "user_id": 510036, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b7c510641e6526d19abc93e866e75ac8?s=128&d=identicon&r=PG", "display_name": "Qix - MONICA WAS MISTREATED", "link": "https://stackoverflow.com/users/510036/qix-monica-was-mistreated"}, "reply_to_user": {"reputation": 12398, "user_id": 1310566, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5qiMO.jpg?s=128&g=1", "display_name": "Simon Forsberg", "link": "https://stackoverflow.com/users/1310566/simon-forsberg"}, "edited": false, "score": 1, "creation_date": 1441756589, "post_id": 32467671, "comment_id": 52799720, "body": "@SimonForsberg it&#39;s not off topic here. It&#39;s probably <i>more</i> on-topic over at CR."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441766761, "post_id": 32467671, "comment_id": 52802032, "body": "Note: 1) should use <code>unsigned</code>, not <code>int</code> in <code>if(format[i+1] == &#39;o&#39;) { numberValue = va_arg(args, int);</code>  2) <code>char charValue;</code> --&gt; <code>unsigned char charValue;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441752299, "post_id": 32468384, "comment_id": 52798610, "body": "I was going to comment that the quickest operations should be processed first, but that is what OP has done mostly. The notable exception being <code>%c</code>."}, {"owner": {"reputation": 7651, "user_id": 2960823, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/otSfG.jpg?s=128&g=1", "display_name": "kuroi neko", "link": "https://stackoverflow.com/users/2960823/kuroi-neko"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441752524, "post_id": 32468384, "comment_id": 52798663, "body": "This will be neglectible anyway. A switch will most probably be implemented as a table lookup jump, or whatever structure the compiler deems more efficient. Compared with the rest of the processing, this will gain nothing."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441752763, "post_id": 32468384, "comment_id": 52798723, "body": "Not my downvote, but you seem to contradict yourself by saying that the processing method will gain little."}, {"owner": {"reputation": 7651, "user_id": 2960823, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/otSfG.jpg?s=128&g=1", "display_name": "kuroi neko", "link": "https://stackoverflow.com/users/2960823/kuroi-neko"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441752926, "post_id": 32468384, "comment_id": 52798759, "body": "Little time, yes. The only thing arguably worth gaining here is size: stack size, by avoiding another level of function call and code size by writing as few output functions as possible."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441753426, "post_id": 32468384, "comment_id": 52798886, "body": "But it&#39;s not recursive. Only one output function is called. the alternative will be one gigantic function very hard to follow."}, {"owner": {"reputation": 7651, "user_id": 2960823, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/otSfG.jpg?s=128&g=1", "display_name": "kuroi neko", "link": "https://stackoverflow.com/users/2960823/kuroi-neko"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441753618, "post_id": 32468384, "comment_id": 52798944, "body": "No. Just make your functions inline and the compiler will generate this big huge function for you. Readable source, efficient code. Of course you have no guarantee the compiler will actually inline them. Still if they are simple enough there are good chances it will."}], "tags": [], "owner": {"reputation": 7651, "user_id": 2960823, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/otSfG.jpg?s=128&g=1", "display_name": "kuroi neko", "link": "https://stackoverflow.com/users/2960823/kuroi-neko"}, "is_accepted": false, "score": 0, "last_activity_date": 1441753213, "last_edit_date": 1441753213, "creation_date": 1441752057, "answer_id": 32468384, "question_id": 32467671, "link": "https://stackoverflow.com/questions/32467671/good-manners-for-c-programming/32468384#32468384", "title": "Good manners for C programming", "body": "<p>Optimizing printf for speed makes little sense, since the dominant execution time will be character I/O. Even a lightning fast format processing will not spare you the time needed to send your characters on their way.</p>\n\n<p>The only thing arguably worth gaining here is size: stack size by avoiding another level of function call and code size by writing as few output functions as possible.</p>\n\n<p>First thing to do to optimize your code is to turn your tests into a switch. Chances are the compiler will implement it as a table jump, which is more efficient than a bunch of tests. You can put the \"most likely\" formats first, but unless you can read the user's mind, it's rather hard to predict if he/she will rather display integers or floats or chars.</p>\n\n<p>Passing variable number of parameters is the most expensive operation, so delegating the vararg processing to each atomic formatting function would only produce bulkier and slower code.</p>\n\n<p>Instead, you would be better off writing your output code as inline functions and hope the compiler expands them to spare you another level of function call.</p>\n\n<p>For the various possible argument sizes, the way to go is to cast all values into the biggest possible size (32 or 64 bits integers, floats or doubles depending on what you want to support) and have a limited number of functions do the display (signed integer / unsigned integer / double for instance).<br>\nThus you will reduce both source and executable code size. </p>\n"}], "owner": {"reputation": 79, "user_id": 5036902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d9d2e396f2c0305847a489652ceaea?s=128&d=identicon&r=PG&f=1", "display_name": "zyrkiem64", "link": "https://stackoverflow.com/users/5036902/zyrkiem64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 1, "closed_date": 1441756615, "answer_count": 1, "score": 5, "last_activity_date": 1441753213, "creation_date": 1441748364, "last_edit_date": 1441749136, "question_id": 32467671, "link": "https://stackoverflow.com/questions/32467671/good-manners-for-c-programming", "closed_reason": "Opinion-based", "title": "Good manners for C programming", "body": "<p>I am currently programming my own implementation of <code>printf</code>, here is the code:</p>\n\n<pre><code>int my_printf(const char *format, ...)\n{\n        //Declare variable ou prog fonctionnel????\n        va_list args;\n        int numberValue;\n        unsigned int unsignedNumberValue;\n        double doubleValue;\n        char* stringValue;\n        char charValue;\n        va_start(args, format);\n        for(int i = 0; format[i]; i++){\n                //This case is the most called case, so we test it first to get the\n                //best perfs\n                if(format[i] != '%'){\n                        my_put_char(format[i]);\n                }else{\n                        if(format[i+1] == 'd' || format[i+1] == 'i'){\n                                numberValue = va_arg(args, int);\n                                my_put_nbr(numberValue);\n                        }else if(format[i+1] == 'u'){\n                                unsignedNumberValue = va_arg(args, unsigned int);\n                                my_put_nbr_unsigned(unsignedNumberValue);\n                        }else if(format[i+1] == 'o'){\n                                numberValue = va_arg(args, int);\n                                my_put_nbr_base(numberValue, 2); \n                        }else if(format[i+1] == 'c'){\n                                //char parameters are passed as integer as va_args\n                                charValue = va_arg(args, int);\n                                my_put_char(charValue);\n                        }else if(format[i+1] == 's'){\n                                stringValue = va_arg(args, char*);\n                                my_puts(stringValue);\n                        }else if(format[i+1] == 'f'){\n                                doubleValue = va_arg(args, double);\n                                my_put_double(doubleValue);\n                        }else if(format[i+1] == '%'){\n                                my_put_char('%');\n                        }else{\n                                //error option not handled\n                                char* error = my_strcat(\"\\nThe option you provided is not a valid option: %\", &amp;format[i + 1], 1); \n                                write(2, error, sizeof(char) * my_strlen(error));\n                        }\n                        i++;    \n                }\n        }\n        va_end(args);\n        return 0;\n}\n</code></pre>\n\n<p>I would like to know two things about my code:</p>\n\n<ul>\n<li>I wonder if i should code <strong>\"function way\" programming</strong> such as don't use variable and put <code>va_args</code> called directly in the <code>my_put</code> function. But doing this, it will allocate and free every loop instead of one declaration (allocation) who may not be used and one free at the end of the function. In big process I suppose it is better to store the returning value into a variable then recall \"function way\" the function. (for <code>strlen</code> on very big text for example)</li>\n<li>I would also like to know how to deal with functions that can be called with different types such as <code>my_put_nbr</code> in my code, can't I overload them? It seems that it must have  different name.</li>\n</ul>\n"}, {"tags": ["c", "memory"], "comments": [{"owner": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 0, "creation_date": 1441748605, "post_id": 32467669, "comment_id": 52797419, "body": "no protection. It is in fact Undefined behaviour, so be ware of the fire breathing dragons and trolls with wooden clubs."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1441748730, "post_id": 32467669, "comment_id": 52797458, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/5341646/pointer-arithmetic-in-c-and-array-bounds\">Pointer arithmetic in c and array bounds</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1441748757, "post_id": 32467669, "comment_id": 52797472, "body": "Undefined behavior.  However, if you run on Windows, you may trip the &quot;0xC0000005 access violation error&quot;, but again, it isn&#39;t a certainty."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1441748776, "post_id": 32467669, "comment_id": 52797480, "body": "Yes we have no memory protection. The same is true in C++, although it is a different language - please do not tag C questions as C++. (There are advantages to this lack of protection - better performance for valid programs.)"}, {"owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "edited": false, "score": 1, "creation_date": 1441748791, "post_id": 32467669, "comment_id": 52797485, "body": "<code>int *ptrA = &amp;a;</code> is wrong because <code>a</code> is already a pointer to the first element. What you want is <code>int* ptrA = a;</code> or <code>int** ptrA = &amp;a;</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "edited": false, "score": 0, "creation_date": 1441748829, "post_id": 32467669, "comment_id": 52797499, "body": "@HelloWorld how come?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1441749073, "post_id": 32467669, "comment_id": 52797574, "body": "@AlanStokes, yes.  I think I misunderstood HelloWorld&#39;s point.  The OP&#39;s code is not type-correct, as he said, and I deleted my previous comment.  Nevertheless, that&#39;s not what the question is about."}, {"owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1441749412, "post_id": 32467669, "comment_id": 52797710, "body": "@JohnBollinger: That&#39;s why it&#39;s just a comment :)"}, {"owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1441750871, "post_id": 32467669, "comment_id": 52798193, "body": "@SouravGhosh: The names for these topics are <code>pointer arithmetic</code> and <code>array-to-pointer conversion</code>. See <code>&#167;4.3</code> in c++ standard. When <code>int a[2]</code> is given, <code>a</code> is an array of ints. When you write <code>int* tmp = a</code> then <code>a</code> can be converted to a pointer that points to the first element of the array. If you write <code>&amp;a</code> you still get the address of the array because of the mentioned paragraph but compilers like msvc don&#39;t compile this and they will tell you that <code>int(*)[2]</code> cannot be converted to <code>int*</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "edited": false, "score": 0, "creation_date": 1441751052, "post_id": 32467669, "comment_id": 52798243, "body": "@HelloWorld right. I kind of missed that a is an array already.  My bad."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441753351, "post_id": 32467669, "comment_id": 52798867, "body": "&quot;Can a process edit any memory space&quot; - this is controlled by the operating system. In MS-DOS, a process could indeed edit any memory space."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "edited": false, "score": 0, "creation_date": 1441757329, "post_id": 32467669, "comment_id": 52799878, "body": "@HelloWorld Clang and GCC have no issue with <code>int* p = &amp;a</code>, and their interpretation generally matches the semantics I expect (<code>a</code> and <code>&amp;a</code> are equivalent).  Is it wrong, or just interpreted differently in MSVC (e.g. convert to pointer first)?"}, {"owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "edited": false, "score": 0, "creation_date": 1441758216, "post_id": 32467669, "comment_id": 52800071, "body": "Keep in mind, that the initial question asked for C++. gcc/clang raise a warning if compiled in <a href=\"http://goo.gl/Rt6YHC\" rel=\"nofollow noreferrer\">C</a> and the corresponding warning option is set. gcc/clang raise an error in <a href=\"http://goo.gl/B3fOy5\" rel=\"nofollow noreferrer\">C++</a> by default. The <a href=\"http://c-faq.com/aryptr/ptrtoarray.html\" rel=\"nofollow noreferrer\">C FAQ 6.13</a> also covers this issue. <code>How do I declare a pointer to an array?</code> <code>Usually, you don&#39;t want to. When people speak casually of a pointer to an array, they usually mean a pointer to its first element.</code>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1441764394, "post_id": 32467669, "comment_id": 52801518, "body": "@M.M, you are right that whether a <i>process</i> can edit any memory space is determined by the OS.  If the question were whether a C program can do so, however, then the answer is that C does not define any way for a program to modify memory other than that of objects belonging to the program."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "edited": false, "score": 0, "creation_date": 1441766691, "post_id": 32467669, "comment_id": 52802021, "body": "@HelloWorld Clang (3.6) and GCC (4.9.2) apparently treat <code>&amp;a</code> as a valid pointer with an address of the first element, but still treat it as an invalid typed pointer value."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1441753400, "post_id": 32467741, "comment_id": 52798875, "body": "Attempting to form a pointer to unallocated space also causes UB, even if not dereferenced, <a href=\"http://stackoverflow.com/questions/5341646/pointer-arithmetic-in-c-and-array-bounds\">see here</a>"}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": true, "score": 3, "last_activity_date": 1441748658, "creation_date": 1441748658, "answer_id": 32467741, "question_id": 32467669, "link": "https://stackoverflow.com/questions/32467669/memory-protection-in-c/32467741#32467741", "title": "Memory protection in C", "body": "<p><em>Memory protection</em> doesn't mean what you think it means: It's measures to stop a process from accessing memory it shouldn't access. However, processes of course can access their own memory, which C/C++ and a lot of other languages let you do. </p>\n\n<blockquote>\n  <p>Here pointer to unallocated memory has read/write access. </p>\n</blockquote>\n\n<p>dereferencing a pointer into unallocated is what we call a bug in your software :) However, it's totally OK that your compiler lets you do that. C/C++ <em>don't have your back</em>, if you want to juggle with pointers, by all means, do. You will provoke undefined behaviour or segmentation faults, if the addresses you try to access are not mapped in your process' memory (that's <em>memory protection</em> at work), but these languages let you do that.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1441748778, "creation_date": 1441748778, "answer_id": 32467768, "question_id": 32467669, "link": "https://stackoverflow.com/questions/32467669/memory-protection-in-c/32467768#32467768", "title": "Memory protection in C", "body": "<p>No, there is no built-in memory protection in C, but using a pointer to access memory outside the object to which it points -- as your code does -- invokes undefined behavior.  \"Undefined behavior\" does not mean that the program must fail or emit any particular diagnostic.  Those are permissible results, but if they were required then that would be <em>defined</em> behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1441754175, "post_id": 32468574, "comment_id": 52799115, "body": "C++ and especially C <i>are</i> general enough to be implemented on pretty much any hardware, but they have specific and relatively strict rules on the permissible ways to use pointers.  Those specifically preclude even computing a pointer to random memory, much less dereferencing one.  What they do not do is inherently prevent you from attempting to do so anyway, or define what the result will be if you do."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1441754498, "post_id": 32468574, "comment_id": 52799203, "body": "It&#39;s <i>UB</i>, but it isn&#39;t forbidden by the language.  It strictly doesn&#39;t preclude things like <i>FAM</i>s.  However, it&#39;s also why you should generally turn warnings into errors using <code>-Werror</code> or the relevant setting for your compiler."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1441755705, "post_id": 32468574, "comment_id": 52799508, "body": "@JohnBollinger Can you explain where my answer is factually incorrect?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1441759261, "post_id": 32468574, "comment_id": 52800318, "body": "Your primary thesis is that &quot;The C/C++ standards don&#39;t have any requirements for dereferencing addresses,&quot; but this is false.  C and C++ define the behavior for specific dereferences, and specify that all others exhibit undefined behavior.  You also say &quot;as far as the language is concerned, it is perfectly valid to access a variable through an offset of a pointer to another variable or any memory reference in general,&quot; but this is patently false.  What you describe is <i>not</i> valid in any sense that is useful to someone trying to write C code."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1441761625, "post_id": 32468574, "comment_id": 52800828, "body": "@JohnBollinger In the context of <i>memory protection</i>, <i>requirement for dereferncing</i> should be interpreted as regarding <i>invalid memory access</i>, which is a term that specifically is not defined in either language.  This is one of the reasons to better describe what your errors are to the compiler (e.g. your <code>-W</code>s or equivalents). The standards mark a lot of the behavior as undefined, which I clearly mention.  However, not all bounds or even <i>UB</i> can identified statically, which is why runtime checks are <i>necessary</i> to sanitize all potential errors (e.g. <code>valgrind</code>)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1441764039, "post_id": 32468574, "comment_id": 52801414, "body": "Whether you can present an interpretation of your answer that renders it an accurate statement is not much relevant.  As written, your answer is more likely to mislead people who don&#39;t already know the answer than it is to help them.  Factual correctness -- which I do not stipulate -- is not the standard here."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1441765641, "post_id": 32468574, "comment_id": 52801784, "body": "@JohnBollinger I disagree.  I think the answer is more complex than the other answers suggest."}], "tags": [], "owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "is_accepted": false, "score": -1, "last_activity_date": 1441754969, "last_edit_date": 1441754969, "creation_date": 1441753650, "answer_id": 32468574, "question_id": 32467669, "link": "https://stackoverflow.com/questions/32467669/memory-protection-in-c/32468574#32468574", "title": "Memory protection in C", "body": "<p>The C/C++ standards don't have any requirements for dereferencing addresses.  They provide access to raw memory so are general enough to be valid on bare metal, virtual memory systems, etc...  So, as far as the language is concerned, it is perfectly valid to access a variable through an offset of a pointer to another variable or any memory reference in general.  It is undefined behavior though, so the actual behavior generally depends on the runtime and/or operating system and/or hardware.</p>\n\n<p>This compiler is free to add bounds checks to all memory references though.  However, the general benefit of C/C++ is raw access to memory.  Runtime bounds checking is generally too expensive to be practical for production use, but it is often used in debugging to find these types of errors.  For a good example of runtime bounds checking, see <a href=\"http://valgrind.org/\" rel=\"nofollow\"><code>valgrind</code></a> or <a href=\"http://clang.llvm.org/docs/AddressSanitizer.html\" rel=\"nofollow\"><code>clang</code></a> address sanitizer.</p>\n\n<p>Most compilers will provide basic static bounds check warnings though.  You can (<em>should</em>) generally turn them into errors using a switch like <code>-Werror</code>.  There are also various static analyzers that will identify potential and verifiable out of bounds accesses.</p>\n"}], "owner": {"reputation": 107, "user_id": 4023911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "newbie", "link": "https://stackoverflow.com/users/4023911/newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2150, "favorite_count": 0, "accepted_answer_id": 32467741, "answer_count": 3, "score": 1, "last_activity_date": 1441754969, "creation_date": 1441748354, "last_edit_date": 1441749472, "question_id": 32467669, "link": "https://stackoverflow.com/questions/32467669/memory-protection-in-c", "title": "Memory protection in C", "body": "<p>Is there no memory protection in C ?\nCan a process edit any memory space ?\nhow does C determines a memory is allocated is it stored somewhere ?\nFor instance :</p>\n\n<pre><code>int a[2] = {2,3};\nint *ptrA = &amp;a;\n\nint b = 10;\nint *ptrB = &amp;b;\n\nprintf(\"%d \",*(ptrA+1009));\n*(ptrA+1009) = 10;\nprintf(\"%d \\n\",*(ptrA+1009));\n\nprintf(\"%d \",*(ptrB+1009));\n*(ptrB+1009) = 10;\nprintf(\"%d\\n\",*(ptrB+1009));\n</code></pre>\n\n<p>Here pointer to unallocated memory has read/write access. Snippet complies and runs with a warning.\nIs it undefined behaviour/machine dependent ?</p>\n"}, {"tags": ["c++", "c", "macos", "logging", "asl"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1441747987, "post_id": 32467561, "comment_id": 52797170, "body": "Poor title, question alike!"}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441748310, "post_id": 32467561, "comment_id": 52797302, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 thanks for the feedback. I revised the title and the message. hopefully the new phrasing is more comprehensive."}], "answers": [{"comments": [{"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 0, "creation_date": 1441794085, "post_id": 32474315, "comment_id": 52814623, "body": "If you&#39;re using C++11, you can take advantage of <code>__thread</code> and just do: <code>__thread aslclient client;</code>"}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "reply_to_user": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 0, "creation_date": 1441794375, "post_id": 32474315, "comment_id": 52814794, "body": "@Petesh, perhaps you can give me some usage reference cause i haven&#39;t found anything useful on the web. thanks a lot !"}, {"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 1, "creation_date": 1441795022, "post_id": 32474315, "comment_id": 52815215, "body": "What it does is automatically make the value thread local - you don&#39;t need to involve any of the pthread_getspecific or pthread_setspecific code; simply just <code>asl_open</code> at the start, and <code>asl_close</code> at the end of the thread. The C++11 standard says just use <code>thread_local</code>; however I&#39;ve not had it work properly on OSX, while <code>__thread</code> works without issue as long as you&#39;re using the clang provided <code>libc++</code> (which is the default c++ standard library for the last few releases)"}], "tags": [], "owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "is_accepted": false, "score": 0, "last_activity_date": 1441786347, "creation_date": 1441786347, "answer_id": 32474315, "question_id": 32467561, "link": "https://stackoverflow.com/questions/32467561/logging-with-asl-layout-on-mac-os-x-multi-threaded-project/32474315#32474315", "title": "Logging with asl layout on mac OS-X multi-threaded project", "body": "<p>Ok, so the best solution I've found out so far is by creating a global variable asl client that is thread-specific.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;asl.h&gt;\n#define NUMTHREADS 4\n\npthread_key_t glob_var_key;\n\nvoid print_func() //take global var and use it as the aslclient per thread\n{ \n    asl_log(*((aslclient*) pthread_getspecific(glob_var_key)),NULL,ASL_LEVEL_NOTICE, \"blablabla\");\n}\n\nvoid* thread_func(void *arg)\n{\n    aslclient *p = malloc(sizeof(aslclient));\n    // added tid to message format to distinguish between messages \n    uint64_t tid;\n    pthread_threadid_np(NULL, &amp;tid);\n    char tid_str[20];\n    sprintf(tid_str, \"%llu\", tid);\n\n    *p = asl_open(tid_str,\"Facility\",ASL_OPT_STDERR);\n    pthread_setspecific(glob_var_key, p);\n    print_func();\n\n    sleep(1); // enable ctx switch\n\n    print_func();\n\n    pthread_setspecific(glob_var_key, NULL);\n    free(p);\n    pthread_exit(NULL);\n}\n\n\nint main(void)\n{\n    pthread_t threads[NUMTHREADS];\n    int i;\n\n    pthread_key_create(&amp;glob_var_key,NULL);\n    for (i=0; i &lt; NUMTHREADS; i++)\n        pthread_create(&amp;threads[i],NULL,thread_func,NULL);\n\n    for (i=0; i &lt; NUMTHREADS; i++)\n        pthread_join(threads[i], NULL);\n}\n</code></pre>\n"}], "owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1441786347, "creation_date": 1441747851, "last_edit_date": 1441783176, "question_id": 32467561, "link": "https://stackoverflow.com/questions/32467561/logging-with-asl-layout-on-mac-os-x-multi-threaded-project", "title": "Logging with asl layout on mac OS-X multi-threaded project", "body": "<p>I'd like to convert all my log messages in my multi-threaded project, to use Apple System Log facility (or asl). </p>\n\n<p>according to the following asl manual - <a href=\"https://developer.apple.com/library/ios/documentation/System/Conceptual/ManPages_iPhoneOS/man3/asl_get.3.html\" rel=\"nofollow\">https://developer.apple.com/library/ios/documentation/System/Conceptual/ManPages_iPhoneOS/man3/asl_get.3.html</a></p>\n\n<blockquote>\n  <p>When logging from multiple threads, each thread must open a separate client handle using asl_open.  </p>\n</blockquote>\n\n<p>For that reason, I've defined asl client per thread to be used in all my log commands. However, in facing some major difficulties in binding asl client to each asl_log command.  </p>\n\n<pre><code>1. what if some of my asl log commands reside in a code that is common for\n   more than one thread - which asl client should i decide use on such message.\n\n2. Even on thread unique code, one should be consistent in choosing the same\n   asl_client on all log functions on a single thread code scope (this is\n   not always easy to find in complex projects.). \n</code></pre>\n\n<p>Is there any easier way to adopt my project logging messages to use asl ? </p>\n\n<p>I'd think about something like binding asl client to thread,</p>\n\n<p>thanks </p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 415, "user_id": 5253609, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6dfc8d6ed11081e4f0c9fa869db9eee?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias", "link": "https://stackoverflow.com/users/5253609/mathias"}, "edited": false, "score": 0, "creation_date": 1441747908, "post_id": 32467476, "comment_id": 52797139, "body": "Cheers, that did the job! Probably should have left this one till morning lol."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "reply_to_user": {"reputation": 415, "user_id": 5253609, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6dfc8d6ed11081e4f0c9fa869db9eee?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias", "link": "https://stackoverflow.com/users/5253609/mathias"}, "edited": false, "score": 1, "creation_date": 1443009577, "post_id": 32467476, "comment_id": 53318536, "body": "@Matthew2015 Whenever designing an algorithm for a linked list, consider at least four special cases: lists with zero to three items. An empty list (zero items) is an obvious special case, three is the smallest &#39;quite normal&#39; case for most of algorithms (it has a head node, a tail  node and at least one node which has both a &#39;prev&#39; and a &#39;next&#39; node)."}, {"owner": {"reputation": 415, "user_id": 5253609, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6dfc8d6ed11081e4f0c9fa869db9eee?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias", "link": "https://stackoverflow.com/users/5253609/mathias"}, "edited": false, "score": 0, "creation_date": 1443011354, "post_id": 32467476, "comment_id": 53319774, "body": "Thanks@CiaPan. I&#39;ll bare this in mind in the future... I will be looking at that bubble sort of linked lists with strings soon so I&#39;ll let you know how it goes!"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 4, "last_activity_date": 1441747428, "creation_date": 1441747428, "answer_id": 32467476, "question_id": 32467414, "link": "https://stackoverflow.com/questions/32467414/function-to-reverse-order-of-linked-list-last-node-does-not-link-to-rest-of-l/32467476#32467476", "title": "Function to reverse order of linked list... last node does not link to rest of list", "body": "<pre><code>while (cur-&gt;next != NULL)\n</code></pre>\n\n<p>This stops when <code>cur</code> is at the last element (<code>next</code> is <code>NULL</code>); i.e. you don't process the last node.</p>\n\n<p>Changing it to</p>\n\n<pre><code>while (cur != NULL)\n</code></pre>\n\n<p>and returning <code>head</code> should fix it.</p>\n"}], "owner": {"reputation": 415, "user_id": 5253609, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6dfc8d6ed11081e4f0c9fa869db9eee?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias", "link": "https://stackoverflow.com/users/5253609/mathias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 32467476, "answer_count": 1, "score": 1, "last_activity_date": 1441747590, "creation_date": 1441747148, "last_edit_date": 1441747221, "question_id": 32467414, "link": "https://stackoverflow.com/questions/32467414/function-to-reverse-order-of-linked-list-last-node-does-not-link-to-rest-of-l", "title": "Function to reverse order of linked list... last node does not link to rest of list", "body": "<p>I have the following node structure in C:</p>\n\n<pre><code>#define SIZE 5 \n\ntypedef struct node\n{\n    int n;\n    struct node* next;\n}node;\n\nnode* head = NULL; \n\nvoid implement(int n); // create linked list \nint length(void); // returns length of list \nnode* reverse(void); // reverses order of list\n</code></pre>\n\n<p>The list is implemented as follows:</p>\n\n<pre><code>void implement (int n)\n{\n\n    for (int i = 0; i &lt; n; i++)\n    {\n        node* new_node = malloc(sizeof(node));\n\n        if(new_node == NULL)\n        {\n            printf(\"out of memory!\\n\");\n            return;\n        }\n\n        new_node-&gt;n = i; \n        new_node-&gt;next = head;\n        head = new_node;  \n\n    }\n}\n</code></pre>\n\n<p>Which when printed to the terminal gives:</p>\n\n<p>4 3 2 1 0</p>\n\n<p>The head pointer is set to node 4. </p>\n\n<p>I have written the following function to reverse the list as follows:</p>\n\n<pre><code>node* reverse(void)\n{  \n\n    node* cur = head;\n    node* next = NULL; \n    head = NULL;\n\n    while (cur-&gt;next != NULL)\n    {\n        next = cur-&gt;next; \n        cur-&gt;next = head;   \n        head = cur; \n        cur = next;    \n    }   \n\n\n\n    return cur; \n}\n</code></pre>\n\n<p>However, returning cur only gives:</p>\n\n<p>0 </p>\n\n<p>Returning head provides:</p>\n\n<p>1 2 3 4</p>\n\n<p>So it is quite clear that the list is being reversed, but for some reason the last node (0) is not being linked to the remaining nodes. I am probably missing something obvious here, but can anyone give me any pointers? (no pun intended!)</p>\n\n<p>Cheers        </p>\n"}, {"tags": ["c", "linux-kernel"], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1441748086, "post_id": 32467385, "comment_id": 52797203, "body": "Note also, however, that the referenced answer <i>is</i> a little off.  The <code>SA_RESTART</code> flag accepted by <code>sigaction()</code> is not directly relevant to <code>signal()</code>.  POSIX specifies that when a signal handler set via <code>signal()</code> returns (in the relevant case) &quot;the program shall resume execution at the point it was interrupted&quot;.  That&#39;s similar, but not identical, to the behavior required when the <code>SA_RESTART</code> flag is specified to <code>sigaction()</code>.  In practice, however, I don&#39;t know whether implementations actually treat the two differently."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1441747022, "creation_date": 1441747022, "answer_id": 32467385, "question_id": 32467310, "link": "https://stackoverflow.com/questions/32467310/slow-system-call-and-signals/32467385#32467385", "title": "Slow system call and signals", "body": "<p>The OP was expecting the <code>read</code> call to return an error code because it was interrupted by a signal.  In the case of the <code>read</code> system call, the OS automatically restarts this system call in the event of a signal, so no error was returned.</p>\n"}], "owner": {"reputation": 91, "user_id": 5236241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ee52825f41469ade135bd9a0bc2fdb66?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5236241/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 957, "favorite_count": 0, "accepted_answer_id": 32467385, "answer_count": 1, "score": 0, "last_activity_date": 1441747022, "creation_date": 1441746713, "last_edit_date": 1495542575, "question_id": 32467310, "link": "https://stackoverflow.com/questions/32467310/slow-system-call-and-signals", "title": "Slow system call and signals", "body": "<p>I have read this subject:\n<a href=\"https://stackoverflow.com/questions/6226305/relationship-slow-system-call-with-signal\">Relationship slow system call with signal</a></p>\n\n<p>and everything isn't clear for me. Especially I don't understand this part of answer because I don't see a problem with included source code.\nPlease explain me.\nThanks in advance.</p>\n\n<blockquote>\n  <p>Anyway, back to the question. If you're wondering why the read doesn't\n  fail with EINTR the answer is SA_RESTART. On most Unix systems a few\n  system calls are automatically restarted in the event of a signal.</p>\n</blockquote>\n"}, {"tags": ["c", "loops", "do-while", "truthiness"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1441745187, "post_id": 32466942, "comment_id": 52795872, "body": "emmmm. where is the loop?"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1441745215, "post_id": 32466942, "comment_id": 52795882, "body": "There&#39;s no do-while loop in the code you posted."}, {"owner": {"reputation": 115, "user_id": 4589140, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/365776543606774/picture?type=large", "display_name": "Nathaniel Lindsey", "link": "https://stackoverflow.com/users/4589140/nathaniel-lindsey"}, "edited": false, "score": 0, "creation_date": 1441745289, "post_id": 32466942, "comment_id": 52795931, "body": "Sorry, took me a moment to see/fix that."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1441746973, "post_id": 32466942, "comment_id": 52796729, "body": "this line: <code>if((anotherCalculation != &#39;Y&#39;||&#39;y&#39;))</code> is completely unnecessary and will NOT produce the desired result.   It is unnecessary because the &#39;while()&#39; statement already checked that.  it will not work as desired because only one condition can be checked at a time in C, suggest: <code>if((anotherCalculation != &#39;Y&#39; &amp;&amp; anotherCalculation != &#39;y&#39;))</code>  however, as I stated this &#39;if&#39; statement is totally not needed"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441747070, "post_id": 32466942, "comment_id": 52796772, "body": "always check the returned value from a call to scanf() to assure the operation was successful, otherwise the &#39;while()&#39; statement would be looking at what ever uninitalized trash is already in the anotherCalculation variable.  Similar considerations for the timeSignature variable.  Also when using the &#39;%s&#39; format specifier, always put a length modifier so the user cannot overrun the input buffer (resulting in undefined behaviour and can lead to a seg fault event.)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1441747210, "post_id": 32466942, "comment_id": 52796841, "body": "The calculation for bar time in seconds <code>barLength = BPM &#47; beatsPerBar</code> is incorrect (inverted). It should be <code>barLength = beatsPerBar * 60.0 &#47; BPM</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441747659, "post_id": 32466942, "comment_id": 52797039, "body": "this line: <code>}while((anotherCalculation = &#39;Y&#39;||&#39;y&#39;));</code> will not work,  the while parameter is actually: <code>anotherCalculation = &#39;Y&#39; (which sets anotherCalculation to &#39;Y&#39; rather than compares it) || &#39;y&#39;    (since this while() is &#39;true&#39; if any of the parameter expressions are true (the &#39;||&#39;) and &#39;Y&#39; is not a 0 value and &#39;y&#39; is not a 0 value, it will always evaluate to true.  Suggest: </code>}while((&#39;Y&#39; == anotherCalculation ||&#39;y&#39; == anotherCalculation));`  Note: always put the literal on the left in a comparison so the &#39;single =&#39; error will be caught by the compiler instead of having to perform debuging"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441748587, "post_id": 32466942, "comment_id": 52797414, "body": "this line: <code>scanf(&quot;%s&quot;,timeSignature);</code> will fail on the second time through the loop. (always check the returned value to catch this failure) because %s stops inputting when encountering any white space and there will be the white space (newline) as the first character in the input stream due to the user entering the &#39;Y&#39; or &#39;y&#39; char."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441749045, "post_id": 32466942, "comment_id": 52797567, "body": "@user3629249 that is incorrect: <code>%s</code> discards leading whitespace too."}], "answers": [{"tags": [], "owner": {"reputation": 27354, "user_id": 948550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YWVjs.jpg?s=128&g=1", "display_name": "Reut Sharabani", "link": "https://stackoverflow.com/users/948550/reut-sharabani"}, "is_accepted": false, "score": 4, "last_activity_date": 1441745343, "creation_date": 1441745343, "answer_id": 32466996, "question_id": 32466942, "link": "https://stackoverflow.com/questions/32466942/do-while-loop-not-observing-truth-assignment-c/32466996#32466996", "title": "Do-while loop not observing truth assignment (C)", "body": "<p>Change this:</p>\n\n<pre><code>while (anotherCalculation = 'Y'||'y')\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>while(anotherCalculation == 'Y'|| anotherCalculation == 'y')\n</code></pre>\n\n<p>Otherwise you're doing:</p>\n\n<pre><code>while (anotherCalculation = ('Y'||'y'))\n</code></pre>\n\n<p>Note I also changed the assignment <code>=</code> to comparison <code>==</code>.</p>\n\n<p>Same goes for your <code>if</code> later:</p>\n\n<pre><code>if (anotherCalculation != 'Y'||'y')\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>if (anotherCalculation != 'Y'|| anotherCalculation != 'y')\n</code></pre>\n\n<p>The <code>if</code> is redundant by the way, you've already left the <code>while</code> loop, so the user does not want any more calculations.</p>\n"}, {"tags": [], "owner": {"reputation": 9459, "user_id": 958051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KHi3g.png?s=128&g=1", "display_name": "Serdalis", "link": "https://stackoverflow.com/users/958051/serdalis"}, "is_accepted": false, "score": 2, "last_activity_date": 1441745825, "last_edit_date": 1441745825, "creation_date": 1441745414, "answer_id": 32467010, "question_id": 32466942, "link": "https://stackoverflow.com/questions/32466942/do-while-loop-not-observing-truth-assignment-c/32467010#32467010", "title": "Do-while loop not observing truth assignment (C)", "body": "<p>Your problem is with the following line of code:</p>\n\n<pre><code>while((anotherCalculation = 'Y'||'y'));\n</code></pre>\n\n<p>Your first problem is that you are assigning to the variable <code>anotherCalculation</code> and then testing that value. This is because in C the <code>=</code> (assignment) operators can be used in test statements and the value that was set will be returned into the statement basically making your test statement the following:</p>\n\n<pre><code>while('Y'||'y');\n</code></pre>\n\n<p>Also there is a fault in the logic within your test statement even after substituting the <code>=</code> for <code>==</code>,<br>\nWhat you are actually doing there is the same as:</p>\n\n<p><code>TRUE</code> if <code>anotherCalculation == 'Y'</code> or if <code>'y'</code>.<br>\nSince <code>'y'</code> actually has a value and <code>FALSE</code> is <code>0</code> in standard C, your loop will continuously run because it will always have a <code>TRUE</code> value.</p>\n\n<p>To fix all errors, what that line actually needs to be is:</p>\n\n<pre><code>while(anotherCalculation == 'Y'|| anotherCalculation == 'y');\n</code></pre>\n\n<p>Finally, if you want to make this code more readable and avoid double testing, you can convert the input to uppercase and test that:</p>\n\n<pre><code>while(toupper(anotherCalculation) == 'Y');\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "is_accepted": false, "score": 2, "last_activity_date": 1441746117, "last_edit_date": 1495542121, "creation_date": 1441745419, "answer_id": 32467012, "question_id": 32466942, "link": "https://stackoverflow.com/questions/32466942/do-while-loop-not-observing-truth-assignment-c/32467012#32467012", "title": "Do-while loop not observing truth assignment (C)", "body": "<p>First, you're using a mathematical notation for your logical checks that makes no sense in C, and you're using the assignment <code>=</code> operator instead of the \"test for equivalence\" <code>==</code> operator.</p>\n\n<pre><code>}while((anotherCalculation = 'Y'||'y'));\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>}while((anotherCalculation == 'Y'|| anotherCalculation == 'y'));\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/2693776/removing-trailing-newline-character-from-fgets-input\">Second, save yourself some hassle down the road, and use <code>fgets()</code> to get a line of a text, and parse it</a>. </p>\n\n<p>Finally, read into things like \"trailing newlines\" with <code>scanf()</code> and <code>fgets()</code>. <a href=\"https://stackoverflow.com/questions/11805414/why-does-scanf-not-wait-for-user-input-after-it-fails-one-time\">The <code>scanf()</code> function, for example, won't \"eat up\" the newline at the end of your input, and you'll get unexpected behavior. This very question appears on SO once per month at least.</a></p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1441745425, "creation_date": 1441745425, "answer_id": 32467013, "question_id": 32466942, "link": "https://stackoverflow.com/questions/32466942/do-while-loop-not-observing-truth-assignment-c/32467013#32467013", "title": "Do-while loop not observing truth assignment (C)", "body": "<p>This is not doing what you expect:</p>\n\n<pre><code>}while((anotherCalculation = 'Y'||'y'));\n</code></pre>\n\n<p>Nor is this:</p>\n\n<pre><code>if((anotherCalculation != 'Y'||'y'))\n</code></pre>\n\n<p>You should be doing this:</p>\n\n<pre><code>}while((anotherCalculation == 'Y') || (anotherCalculation =='y'));\n</code></pre>\n\n<p>And this:</p>\n\n<pre><code>if((anotherCalculation != 'Y') &amp;&amp; (anotherCalculation !='y'))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 614, "user_id": 2500758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d0f8bf3b68cadb2378161842bcba4af?s=128&d=identicon&r=PG", "display_name": "neoaggelos", "link": "https://stackoverflow.com/users/2500758/neoaggelos"}, "is_accepted": false, "score": 0, "last_activity_date": 1441745438, "creation_date": 1441745438, "answer_id": 32467017, "question_id": 32466942, "link": "https://stackoverflow.com/questions/32466942/do-while-loop-not-observing-truth-assignment-c/32467017#32467017", "title": "Do-while loop not observing truth assignment (C)", "body": "<p>TLDR; Change your condition to</p>\n\n<pre><code>while( anotherCalculation == 'Y' || anotherCalculation == 'y' );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1441747809, "post_id": 32467039, "comment_id": 52797093, "body": "the &#39;toupper()&#39; will work fine, however; for what ever reason the OP wanted to compare against both characters"}], "tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 3, "last_activity_date": 1441745550, "creation_date": 1441745550, "answer_id": 32467039, "question_id": 32466942, "link": "https://stackoverflow.com/questions/32466942/do-while-loop-not-observing-truth-assignment-c/32467039#32467039", "title": "Do-while loop not observing truth assignment (C)", "body": "<p>Convert your value to an upper-case letter before doing the comparison:</p>\n\n<pre><code>while(toupper(anotherCalculation) == 'Y');\n</code></pre>\n\n<p>That will accept either a lower-case or upper-case <code>'Y'</code>, and keep your code simple and straightforward.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 2, "last_activity_date": 1441746826, "creation_date": 1441746826, "answer_id": 32467338, "question_id": 32466942, "link": "https://stackoverflow.com/questions/32466942/do-while-loop-not-observing-truth-assignment-c/32467338#32467338", "title": "Do-while loop not observing truth assignment (C)", "body": "<p>Logical operators don't work like that. <code>x == a || b</code> doesn't evaluate as \"<code>x</code> is equal to one of <code>a</code> or <code>b</code>\"; instead, it evalutes as \"<code>x</code> is equal to the result of the Boolean expression (<code>a</code> OR <code>b</code>)\".  If you want to compare <code>x</code> against different values, you must write it as</p>\n\n<pre><code>x == a || x == b \n</code></pre>\n\n<p>But you have another problem, you've used the assignment operator <code>=</code> where you meant to use the comparison operator <code>==</code><sup>1</sup>:</p>\n\n<pre><code>while((anotherCalculation = 'Y'||'y'))\n                          ^\n                          |\n                        ooops\n</code></pre>\n\n<p>You're performing a logical-OR of two non-zero values, which evaluates to 1 (true), and <em>assigning the result</em> to <code>anotherCalculation</code>.  The result of the expression is the value of <code>anotherCalculation</code> after the assignment (1), so you've <em>effectively</em> written</p>\n\n<pre><code>while( true )\n</code></pre>\n\n<p>You need to use the <code>==</code> operator for equality comparison, and you must do an explicit comparison on each side of the <code>||</code> operator:</p>\n\n<pre><code>while ( anotherCalculation == 'Y' || anotherCalculation == 'y' )\n</code></pre>\n\n<p>You can clean this up a bit by converting your input to a specific case before doing a comparison, getting rid of the need for the <code>||</code> operator altogether:</p>\n\n<pre><code>while ( tolower( anotherCalculation ) == 'y' )\n</code></pre>\n\n<p>or</p>\n\n<pre><code>while ( toupper( anotherCalculation) == 'Y' )\n</code></pre>\n\n<p><hr>\n<sup>1. <em>A bright young coder named Lee<br>\nwished to loop while <code>i</code> was 3<br>\nWhen writing the <code>=</code><br>\nHe forgot its sequel<br>\nAnd thus looped infinitely</em></sup></p>\n"}], "owner": {"reputation": 115, "user_id": 4589140, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/365776543606774/picture?type=large", "display_name": "Nathaniel Lindsey", "link": "https://stackoverflow.com/users/4589140/nathaniel-lindsey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "closed_date": 1441749341, "answer_count": 7, "score": 0, "last_activity_date": 1441750225, "creation_date": 1441745113, "last_edit_date": 1441745249, "question_id": 32466942, "link": "https://stackoverflow.com/questions/32466942/do-while-loop-not-observing-truth-assignment-c", "closed_reason": "Not suitable for this site", "title": "Do-while loop not observing truth assignment (C)", "body": "<p>My C project is a Windows console app that takes the time signature and BPM from a user's musical project and returns the length of a bar in seconds.<br>\nI am trying to use a do-while loop to add a \"continue/exit?\" prompt at the end of each successful calculation \nHere is the source code for that function. It performs one calculation based on user input, then terminates.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    char timeSignature[6];\n    float BPM;\n    float beatsPerBar;\n    float barLength;\n\n    printf(\"Enter the working time signature of your project:\");\n    scanf(\"%s\",timeSignature);\n\n    beatsPerBar = timeSignature[0]-'0';\n\n    printf(\"Enter the beats per minute:\");\n    scanf(\"%f\", &amp;BPM);\n\n    barLength = BPM / beatsPerBar;\n\n    printf(\"%f\\n\", barLength);\n    return 0;\n}\n</code></pre>\n\n<p>After each successful calculation, I want to prompt the user to choose \"y\" to return to the initial input prompt or \"n\" to end the program and exit the command prompt.\nThis later update includes a do-while loop that is intended to add the feature. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n\n    do{\n\n        char timeSignature[6];\n        char anotherCalculation;\n        float BPM;\n        float beatsPerBar;\n        float barLength;\n\n        printf(\"Enter the working time signature of your project:\");\n        scanf(\"%s\",timeSignature);\n\n        beatsPerBar = timeSignature[0]-'0';\n        /*\n         * Subtracts the integer value of the '0' character (48) from the integer value\n         * of the character represented by the char variable timeSignature[0] to return\n         * an integer value equal to the number character itself.\n         */\n\n        printf(\"Enter the beats per minute:\");\n        scanf(\"%f\", &amp;BPM);\n\n        barLength = BPM / beatsPerBar;\n\n        printf(\"%f\\n\", barLength);\n\n        Sleep(3);\n\n        printf(\"Would you like to do another calculation? (Y/N)\");\n        scanf(\" %c\", &amp;anotherCalculation);\n\n    }while((anotherCalculation = 'Y'||'y'));\n\n    if((anotherCalculation != 'Y'||'y'))\n        {\n        printf(\"Goodbye!\");\n        return 0;\n        }\n\n    return 0;\n}\n</code></pre>\n\n<p>When I compile, there are no errors, but when I run it, the program loops after ANY input.  Why is the code ignoring my truth assignment?  What can I do to fix this?</p>\n"}]