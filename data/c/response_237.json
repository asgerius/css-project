[{"tags": ["c", "arrays", "windows", "function", "malloc"], "comments": [{"owner": {"reputation": 259, "user_id": 4526054, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N5Ub5.jpg?s=128&g=1", "display_name": "brhans", "link": "https://stackoverflow.com/users/4526054/brhans"}, "edited": false, "score": 4, "creation_date": 1564005794, "post_id": 57191788, "comment_id": 100893121, "body": "Could you describe, in words, what you expect <code>char *filesList[0][254]</code> to give you?"}, {"owner": {"reputation": 53, "user_id": 2497871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58604d0b8223c77afc1b63649a9f3b1d?s=128&d=identicon&r=PG", "display_name": "Hakan", "link": "https://stackoverflow.com/users/2497871/hakan"}, "reply_to_user": {"reputation": 259, "user_id": 4526054, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N5Ub5.jpg?s=128&g=1", "display_name": "brhans", "link": "https://stackoverflow.com/users/4526054/brhans"}, "edited": false, "score": 0, "creation_date": 1564006178, "post_id": 57191788, "comment_id": 100893220, "body": "At that moment, nothing. Later on, that changes. Considered reading the code further down..? @brhans also.. I get error when debugging the code whenever I fill in nothing, since the array size will be defined with the function."}, {"owner": {"reputation": 53, "user_id": 2497871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58604d0b8223c77afc1b63649a9f3b1d?s=128&d=identicon&r=PG", "display_name": "Hakan", "link": "https://stackoverflow.com/users/2497871/hakan"}, "reply_to_user": {"reputation": 426, "user_id": 11753371, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TzP6pGj-mhc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfatPEOhXByRpmq1h85P_wfdRxrIw/photo.jpg?sz=128", "display_name": "deon cagadoes", "link": "https://stackoverflow.com/users/11753371/deon-cagadoes"}, "edited": false, "score": 0, "creation_date": 1564006371, "post_id": 57191788, "comment_id": 100893278, "body": "@deoncagadoes I did debug it, didn&#39;t see anything weird."}, {"owner": {"reputation": 53, "user_id": 2497871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58604d0b8223c77afc1b63649a9f3b1d?s=128&d=identicon&r=PG", "display_name": "Hakan", "link": "https://stackoverflow.com/users/2497871/hakan"}, "reply_to_user": {"reputation": 426, "user_id": 11753371, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TzP6pGj-mhc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfatPEOhXByRpmq1h85P_wfdRxrIw/photo.jpg?sz=128", "display_name": "deon cagadoes", "link": "https://stackoverflow.com/users/11753371/deon-cagadoes"}, "edited": false, "score": 0, "creation_date": 1564006653, "post_id": 57191788, "comment_id": 100893356, "body": "@deoncagadoes <code>i</code> is used for the loops, <code>l</code> is used for length, that&#39;s the same all the time which is: 254."}, {"owner": {"reputation": 426, "user_id": 11753371, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TzP6pGj-mhc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfatPEOhXByRpmq1h85P_wfdRxrIw/photo.jpg?sz=128", "display_name": "deon cagadoes", "link": "https://stackoverflow.com/users/11753371/deon-cagadoes"}, "edited": false, "score": 0, "creation_date": 1564006983, "post_id": 57191788, "comment_id": 100893444, "body": "Output from prints please."}, {"owner": {"reputation": 53, "user_id": 2497871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58604d0b8223c77afc1b63649a9f3b1d?s=128&d=identicon&r=PG", "display_name": "Hakan", "link": "https://stackoverflow.com/users/2497871/hakan"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1564007570, "post_id": 57191788, "comment_id": 100893608, "body": "@user3121023 tried it, not working.."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564007799, "post_id": 57191788, "comment_id": 100893671, "body": "Definitely needed, though one would have to add a check to make sure <code>i</code> doesn&#39;t exceed <code>253</code>."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1564007863, "post_id": 57191788, "comment_id": 100893682, "body": "Why are you using <code>100</code> instead of the correct amount?!?!?"}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1564008193, "post_id": 57191788, "comment_id": 100893748, "body": "Check the return value of <code>opendir</code>"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1564011747, "post_id": 57191788, "comment_id": 100894389, "body": "We don&#39;t have to read the code &quot;further down&quot;...<code>char *filesList[0][254]</code> cannot possibly be meaningful. I&#39;m surprised the compiler didn&#39;t complain (or maybe it did and you have warnings off?) You are declaring a global array of 0 things. There is no memory there to put things, and no way to allocate additional memory for other things. <code>fileList[x]...</code> will just write to random memory."}, {"owner": {"reputation": 259, "user_id": 4526054, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N5Ub5.jpg?s=128&g=1", "display_name": "brhans", "link": "https://stackoverflow.com/users/4526054/brhans"}, "edited": false, "score": 0, "creation_date": 1564018224, "post_id": 57191788, "comment_id": 100895482, "body": "I;m not asking what&#39;s in it. I&#39;m asking you what you think that statement declares."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 2497871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58604d0b8223c77afc1b63649a9f3b1d?s=128&d=identicon&r=PG", "display_name": "Hakan", "link": "https://stackoverflow.com/users/2497871/hakan"}, "edited": false, "score": 0, "creation_date": 1564009324, "post_id": 57192222, "comment_id": 100893976, "body": "Thanks a lot !! you&#39;re the best"}], "tags": [], "owner": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "is_accepted": true, "score": 2, "last_activity_date": 1564008711, "creation_date": 1564008711, "answer_id": 57192222, "question_id": 57191788, "link": "https://stackoverflow.com/questions/57191788/c-function-isnt-updating-global-array-using-strcpy-malloc/57192222#57192222", "title": "C: Function isn&#39;t updating global array (using strcpy / malloc)", "body": "<p>Use <code>char *fileList[254]</code> to declare an array of 254 pointers.<br>\nuse loops <code>for(n = 0; n &lt; i;n++){</code>  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;dirent.h&gt;\n\nvoid list_files();\n\nchar *filesList[254];\nint i = 0, n = 0, l = 254;\nchar directory[] = {\"./\"};\n\nint main()\n{\n    list_files();\n}\n\nvoid list_files()\n{\n    DIR *d;\n    struct dirent *dir;\n    d = opendir(directory);\n    //Put file names into the array\n    while((dir = readdir(d)) != NULL) {\n        if ( ( i &lt; 254) &amp;&amp; ! ( strcmp(dir-&gt;d_name, \".\") == 0 || strcmp(dir-&gt;d_name, \"..\") == 0))\n        {\n            filesList[i] = malloc( strlen ( dir-&gt;d_name) + 1); // allocate memory\n            strcpy(filesList[i], dir-&gt;d_name); // put file names in to array\n            i++; // do +1 to read each single array line\n        }\n    }\n    for(n = 0; n &lt; i;n++){\n        printf(\"%s\\n\", filesList[n]);\n    }\n    for(n = 0; n &lt; i;n++){\n        free ( filesList[n]);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 0, "last_activity_date": 1564009185, "creation_date": 1564009185, "answer_id": 57192275, "question_id": 57191788, "link": "https://stackoverflow.com/questions/57191788/c-function-isnt-updating-global-array-using-strcpy-malloc/57192275#57192275", "title": "C: Function isn&#39;t updating global array (using strcpy / malloc)", "body": "<p>In addition to the other problems noted, you never reset <code>i</code> in this code:</p>\n\n<pre><code>while((dir = readdir(d)) != NULL) {\n    if (strcmp(dir-&gt;d_name, \".\") != 0 &amp;&amp; strcmp(dir-&gt;d_name, \"..\") != 0)\n    {\n        filesList[i][l] = (char*) malloc(sizeof(char) * 100); // allocate memory\n        strcpy(filesList[i][l], dir-&gt;d_name); // put file names in to array\n        i++; // do +1 to read each single array line\n    }\n}\nrewinddir(d);\nprintf(\"%s\",n);\nfor(i;i&lt;n;i++){  \n    printf(\"%s/n\", filesList[i][l]);\n}\n</code></pre>\n\n<p>When you reach </p>\n\n<pre><code>for(i;i&lt;n;i++){  \n</code></pre>\n\n<p><code>i</code> is likely equal to <code>n</code>.  I say \"likely\" because your code doesn't account for the possibility that the number of entries in the directory can change between your two <code>readdir()</code> loops.</p>\n\n<p>A quick fix for this is to simply set <code>i</code> to zero at the start of the <code>for</code> loop:</p>\n\n<pre><code>for(i=0;i&lt;n;i++){  \n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 2497871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58604d0b8223c77afc1b63649a9f3b1d?s=128&d=identicon&r=PG", "display_name": "Hakan", "link": "https://stackoverflow.com/users/2497871/hakan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 57192222, "answer_count": 2, "score": 2, "last_activity_date": 1564147035, "creation_date": 1564005619, "last_edit_date": 1564147035, "question_id": 57191788, "link": "https://stackoverflow.com/questions/57191788/c-function-isnt-updating-global-array-using-strcpy-malloc", "title": "C: Function isn&#39;t updating global array (using strcpy / malloc)", "body": "<p>Trying to get the files names from a directory in Windows. Doing this by an function called list_files. The function is not doing anything for some reason (or it looks like it), cause whenever I print the array, it is empty. </p>\n\n<p>I have tested this code before and it was working fine. I kept coding (this is a longer code originally) I noticed that it returned 0 (nothing) whenever I had to use the array later on</p>\n\n<pre><code>void list_files();\n\nchar *filesList[0][254];\nint i = 0, n = 0, l = 254;\nchar directory[] = {\"C:/Users/test/Downloads/test/\"};\n\nint main()\n{\n    list_files();\n}\n\nvoid list_files()\n{\n    DIR *d;\n    struct dirent *dir;\n    d = opendir(directory);\n    //Determine the number of files\n    while((dir = readdir(d)) != NULL) {\n        if (strcmp(dir-&gt;d_name, \".\") != 0 &amp;&amp; strcmp(dir-&gt;d_name, \"..\") != 0)\n            n++; // determine, count array size based on files\n    }\n    rewinddir(d);\n    //Put file names into the array\n    while((dir = readdir(d)) != NULL) {\n        if (strcmp(dir-&gt;d_name, \".\") != 0 &amp;&amp; strcmp(dir-&gt;d_name, \"..\") != 0)\n        {\n            filesList[i][l] = (char*) malloc(sizeof(char) * 100); // allocate memory\n            strcpy(filesList[i][l], dir-&gt;d_name); // put file names in to array\n            i++; // do +1 to read each single array line\n        }\n    }\n    rewinddir(d);\n    printf(\"%s\",n);\n    for(i;i&lt;n;i++){\n        printf(\"%s/n\", filesList[i][l]);\n    }\n}\n</code></pre>\n\n<p>What I expect to see (or get) is an array filled in with filenames within a directory. in my case, the directory contains 3 files. The program isn't made for big files with x00 files. So when I print the array:</p>\n\n<p>Hello.txt, bye.txt, bye.exe</p>\n"}, {"tags": ["c", "pointers", "printf"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564005339, "post_id": 57191711, "comment_id": 100893003, "body": "Do you mean &quot;How do I trim off the leading 0 values in a pointer represented as a hex string?&quot; Tip: Use <code>sprintf</code> and trim away!"}, {"owner": {"reputation": 65, "user_id": 11821338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35c8ebd7cfc2dcad1f13f4f837003e5c?s=128&d=identicon&r=PG&f=1", "display_name": "Jr795", "link": "https://stackoverflow.com/users/11821338/jr795"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564005443, "post_id": 57191711, "comment_id": 100893024, "body": "I guess so. As printf uses formatting I was wondering if there was a certain format specifier that did it, hence the wording."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1564005511, "post_id": 57191711, "comment_id": 100893038, "body": "I think it&#39;s going to put leading 0 values in there for you, they&#39;re not optional like on <code>%d</code> and such. Maybe <code>sprintf</code>, then use that buffer offset to the first non-zero value."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1564012533, "post_id": 57191711, "comment_id": 100894527, "body": "Strictly, you should coerce <code>xAddress</code> into a <code>void *</code> before using it with <code>printf()</code> and <code>%p</code>.  In this context, you could simply use <code>void *xAddress = &amp;x;</code> with no explicit cast needed.  In many contexts, you&#39;d need to use <code>(void *)xAddress</code> in the argument list to <code>printf()</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1564012743, "post_id": 57191711, "comment_id": 100894571, "body": "Note that some systems would print the hex address with a <code>0x</code> or <code>0X</code> prefix \u2014 the <code>%p</code> conversion specification is allowed to do that, but it is also allowed to omit them (as on your system).  If you want portable behaviour, you&#39;ll probably convert to <code>uintptr_t</code> and then format with that and <code>PRIXPTR</code> or <code>PRIxPTR</code>, etc.  Note that in theory, there might not be a type <code>uintptr_t</code> (an unsigned integer type that can hold any valid pointer to an object \u2014 pointers to functions have separate rules). In practice, I&#39;ve not heard of a system where it is unavailable."}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1564005999, "post_id": 57191759, "comment_id": 100893169, "body": "The behavior of using <code>%x</code> with a pointer is not defined by the C standard, per C 2018 7.21.6.1 9: \u201c\u2026 If any argument is not the correct type for the corresponding conversion specification, the behavior is undefined.\u201d"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1564006258, "post_id": 57191759, "comment_id": 100893249, "body": "@EricPostpischil It would be possible after converting it to uintptr_t, however"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1564020024, "post_id": 57191759, "comment_id": 100895753, "body": "@Ctx but the conversion itself is implementation defined, so there is no saying what would be printed."}], "tags": [], "owner": {"reputation": 532, "user_id": 1040898, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f20f3bf129b1f3c7496be8850fa1bd?s=128&d=identicon&r=PG", "display_name": "Jesse J", "link": "https://stackoverflow.com/users/1040898/jesse-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1564012416, "last_edit_date": 1564012416, "creation_date": 1564005390, "answer_id": 57191759, "question_id": 57191711, "link": "https://stackoverflow.com/questions/57191711/how-do-you-use-printf-to-format-pointer-values-as-0x0000/57191759#57191759", "title": "How do you use printf to format pointer values as 0x0000...?", "body": "<pre><code>printf(\"Address of x: 0x%x\\n\", xAddress);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1564006005, "post_id": 57191765, "comment_id": 100893171, "body": "The behavior of using <code>%x</code> with a pointer is not defined by the C standard, per C 2018 7.21.6.1 9: \u201c\u2026 If any argument is not the correct type for the corresponding conversion specification, the behavior is undefined.\u201d"}], "tags": [], "owner": {"reputation": 367, "user_id": 10930163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a82a32b93373e472ee666e96b00d1b5?s=128&d=identicon&r=PG&f=1", "display_name": "anonmess", "link": "https://stackoverflow.com/users/10930163/anonmess"}, "is_accepted": false, "score": 0, "last_activity_date": 1564005428, "creation_date": 1564005428, "answer_id": 57191765, "question_id": 57191711, "link": "https://stackoverflow.com/questions/57191711/how-do-you-use-printf-to-format-pointer-values-as-0x0000/57191765#57191765", "title": "How do you use printf to format pointer values as 0x0000...?", "body": "<p>To <code>printf</code> as hex output, you have to add the <code>0x</code> prefix yourself:</p>\n\n<p><code>printf(\"0x%08x\\n\", xAddress);</code></p>\n\n<p>This will print <code>xAddress</code>, prefixed with <code>0x</code>, and then filled with leading <code>0</code> and the address for 8 digits. If you know you want exactly 6 digits, and you don't want the leading <code>0</code>, you can use <code>0x%6x</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "is_accepted": true, "score": 2, "last_activity_date": 1564005732, "creation_date": 1564005732, "answer_id": 57191812, "question_id": 57191711, "link": "https://stackoverflow.com/questions/57191711/how-do-you-use-printf-to-format-pointer-values-as-0x0000/57191812#57191812", "title": "How do you use printf to format pointer values as 0x0000...?", "body": "<p>When run in <a href=\"https://repl.it/repls/CrimsonSpiffyViruses\" rel=\"nofollow noreferrer\">this editor,</a> it looks like the program <em>is</em> printing your pointer in hex format. <code>%p</code> is also the convention for printing pointers. That being said, if you want to format your printing to be in the 0x format, you'd likely be interested in <a href=\"https://stackoverflow.com/q/14733761/7431860\">this answer,</a> which gives some tips on how to print in hex format. </p>\n\n<p>Maybe cast the pointer's address to a <code>(void *)</code> first? Could be causing implementation-specific issues if your pointer type is <code>(int *)</code></p>\n\n<p><code>printf(\"Address of x: %p\\n\", (void *)xAddress);</code></p>\n"}, {"tags": [], "owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "is_accepted": false, "score": 5, "last_activity_date": 1564006263, "creation_date": 1564006263, "answer_id": 57191901, "question_id": 57191711, "link": "https://stackoverflow.com/questions/57191711/how-do-you-use-printf-to-format-pointer-values-as-0x0000/57191901#57191901", "title": "How do you use printf to format pointer values as 0x0000...?", "body": "<p>Try using the <code>uintptr_t</code> type:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;inttypes.h&gt;\n#include &lt;stdint.h&gt;\n\nint main() {\n    int x = 4;\n    int *xAddress = &amp;x;\n\n    printf(\"Address of x: 0x%\" PRIXPTR \"\\n\", (uintptr_t) xAddress);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1564018726, "post_id": 57191908, "comment_id": 100895546, "body": "Suggest <code>&quot;0x%&quot; PRIXPTR</code> to print <code>0x0</code> when the pointer is a zero, else only <code>0</code> is printed with <code>&quot;%#&quot; PRIXPTR</code>"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1564018826, "post_id": 57191908, "comment_id": 100895566, "body": "@chux: If <code>(uintptr_t) &amp;a</code> is zero, you have got bigger problems than whether \u201c0X\u201d is printed with it. :-) But updated."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 5, "last_activity_date": 1564018762, "last_edit_date": 1564018762, "creation_date": 1564006325, "answer_id": 57191908, "question_id": 57191711, "link": "https://stackoverflow.com/questions/57191711/how-do-you-use-printf-to-format-pointer-values-as-0x0000/57191908#57191908", "title": "How do you use printf to format pointer values as 0x0000...?", "body": "<p>The C standard does not define the format used by the <code>%p</code> specifier; it is left to each implementation to define. To control the formatting of an address, you can convert it to the <code>uintptr_t</code> type and print that. To do this, include the <code>&lt;inttypes.h&gt;</code> and <code>&lt;stdint.h&gt;</code> headers, in addition to the <code>&lt;stdio.h&gt;</code> header. Then convert the pointer to <code>uintptr_t</code> with a cast and use the <code>PRIxPTR</code> or <code>PRIXPTR</code> macros (for lowercase or uppercase, respectively).</p>\n\n<pre><code>#include &lt;inttypes.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n\n\nint main(void)\n{\n    int a;\n    printf(\"0X%\" PRIXPTR \"\\n\", (uintptr_t) &amp;a);\n}\n</code></pre>\n\n<p>This will print the pointer using a hexadecimal format. Whether that hexadecimal value corresponds to a hardware memory address is not guaranteed by the C standard, although the conversion from a pointer to an integer is intended to be unsurprising to a person familiar with the architecture.</p>\n"}, {"tags": [], "owner": {"reputation": 195, "user_id": 9927425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-th4EvU1tNNA/AAAAAAAAAAI/AAAAAAAAAec/_5nsC1ycISs/photo.jpg?sz=128", "display_name": "ismail ak\u0131n &#231;elik", "link": "https://stackoverflow.com/users/9927425/ismail-ak%c4%b1n-%c3%a7elik"}, "is_accepted": false, "score": 0, "last_activity_date": 1564968562, "creation_date": 1564968562, "answer_id": 57351314, "question_id": 57191711, "link": "https://stackoverflow.com/questions/57191711/how-do-you-use-printf-to-format-pointer-values-as-0x0000/57351314#57351314", "title": "How do you use printf to format pointer values as 0x0000...?", "body": "<p>printf(\"0x%016llx\", (void* __ptr64)xAddress);   //visualstudio</p>\n"}], "owner": {"reputation": 65, "user_id": 11821338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35c8ebd7cfc2dcad1f13f4f837003e5c?s=128&d=identicon&r=PG&f=1", "display_name": "Jr795", "link": "https://stackoverflow.com/users/11821338/jr795"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 925, "favorite_count": 0, "accepted_answer_id": 57191812, "answer_count": 6, "score": 1, "last_activity_date": 1564968562, "creation_date": 1564005085, "question_id": 57191711, "link": "https://stackoverflow.com/questions/57191711/how-do-you-use-printf-to-format-pointer-values-as-0x0000", "title": "How do you use printf to format pointer values as 0x0000...?", "body": "<p>When I use <code>printf</code> to print pointer values, they display in the format:\n<code>000000000066FE14</code>. I would like them to display in the <code>0x</code> format, such as: <code>0x66FE14</code>.</p>\n\n<p>This is the simple test program I wrote to print pointer values:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int x = 4;\n    int *xAddress = &amp;x;\n\n    printf(\"Address of x: %p\\n\", xAddress);\n    return 0;\n}\n</code></pre>\n\n<p>This produces the output:</p>\n\n<pre><code>Address of x: 000000000066FE14\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1564005213, "post_id": 57191698, "comment_id": 100892970, "body": "<code>malloc</code> reserves some memory for you and gives you permission to use it. You used memory outside the reserved space without permission. No software is watching to make sure you obey the rules. Sometimes you get away with it. Sometimes, when you write outside the reserved space, you damage something and your program breaks. (There is some software that checks some memory access\u2014the operating system sets some limits on memory access. Within those limits, nothing is checking.)"}, {"owner": {"reputation": 367, "user_id": 10930163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a82a32b93373e472ee666e96b00d1b5?s=128&d=identicon&r=PG&f=1", "display_name": "anonmess", "link": "https://stackoverflow.com/users/10930163/anonmess"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1564005533, "post_id": 57191698, "comment_id": 100893044, "body": "@EricPostpischil thanks, deleting my comment"}, {"owner": {"reputation": 21, "user_id": 11832574, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HzIQ198PU6g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYDJiJ-GbTQR6aWChakLjaxTmAiQ/photo.jpg?sz=128", "display_name": "Amin abd", "link": "https://stackoverflow.com/users/11832574/amin-abd"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1564006614, "post_id": 57191698, "comment_id": 100893346, "body": "thanks @EricPostpischil"}], "owner": {"reputation": 21, "user_id": 11832574, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HzIQ198PU6g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYDJiJ-GbTQR6aWChakLjaxTmAiQ/photo.jpg?sz=128", "display_name": "Amin abd", "link": "https://stackoverflow.com/users/11832574/amin-abd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1564005333, "answer_count": 0, "score": 0, "last_activity_date": 1564017097, "creation_date": 1564004994, "last_edit_date": 1564017097, "question_id": 57191698, "link": "https://stackoverflow.com/questions/57191698/question-about-move-forward-to-a-memory-location", "closed_reason": "Duplicate", "title": "Question about move forward to a memory location", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main() {\n    int *ptr=(int *)malloc(sizeof(*ptr));\n    if(ptr!=NULL) {\n        *(ptr+2)=30;\n    }\n    printf(\"%d\\n\",*(ptr+2));\n    printf(\"%d\\n\",(ptr+2));\n    printf(\"%d\\n\",ptr);\n    return 0;\n}\n</code></pre>\n\n<p>In this code i allocated 4 bytes , Why print 30 knowing that i only allocated 4 bytes and not 8 bytes ,And why did not he send me an error warming me that i did not allocate 4 additional bytes.</p>\n"}, {"tags": ["c", "command-line-arguments", "main"], "comments": [{"owner": {"reputation": 5170, "user_id": 1410246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfce8c2aa420b800bb7595ac5fbc986d?s=128&d=identicon&r=PG", "display_name": "EylM", "link": "https://stackoverflow.com/users/1410246/eylm"}, "edited": false, "score": 0, "creation_date": 1564004791, "post_id": 57191634, "comment_id": 100892847, "body": "Are you passing it via the command line ? Can you post the command line arguments ?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1564004926, "post_id": 57191634, "comment_id": 100892886, "body": "Debug 101: The file open fails, so the first thing to do is <code>printf</code> the file name on the line before the <code>open</code> to see what file is failing."}], "answers": [{"tags": [], "owner": {"reputation": 1290, "user_id": 3939292, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u04yP.jpg?s=128&g=1", "display_name": "Gutblender", "link": "https://stackoverflow.com/users/3939292/gutblender"}, "is_accepted": false, "score": 3, "last_activity_date": 1564007094, "last_edit_date": 1564007094, "creation_date": 1564005928, "answer_id": 57191848, "question_id": 57191634, "link": "https://stackoverflow.com/questions/57191634/getting-a-core-segmentation-fault-when-trying-to-read-a-file-from-argv/57191848#57191848", "title": "Getting a core segmentation fault when trying to read a file from argv[]", "body": "<p>Oops! I believe the line</p>\n\n<pre><code>thefile=fopen(\"argv[x]\",\"r\");\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>thefile=fopen(argv[x],\"r\");\n</code></pre>\n\n<p>This is because <code>\"argv[x]\"</code> is not code, it's a string. What's that? Is that a path to a file? It's not compiled as code. It doesn't refer to one of the arguments in <code>argv</code>.</p>\n\n<p>You might also want your log message to use that filename. Notice the <code>argv[x]</code>:</p>\n\n<pre><code>fprintf(stderr, \"%s cannot open file '%s'\\n\", argv[0], argv[x]);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11832927"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1564011751, "answer_count": 1, "score": 0, "last_activity_date": 1564009687, "creation_date": 1564004540, "last_edit_date": 1564009687, "question_id": 57191634, "link": "https://stackoverflow.com/questions/57191634/getting-a-core-segmentation-fault-when-trying-to-read-a-file-from-argv", "closed_reason": "Not suitable for this site", "title": "Getting a core segmentation fault when trying to read a file from argv[]", "body": "<p>I have been getting a core segmentation fault when trying to read a file from argv[]. I have created the file and I am very sure that I am trying to access the correct memory address. However, when trying to open the file I receive the core dump. </p>\n\n<p>Here is the relavent code- </p>\n\n<pre><code>  for (int x=1;x&lt;argc;x++){\n  int buffsize=2056;\n  char buff[buffsize];\n  FILE* thefile;\n  thefile=fopen(\"argv[x]\",\"r\");\n  if (thefile == NULL) {\n    fprintf(stderr, \"%s cannot open file '%s'\\n\", argv[0], argv[1]);\n    return 2;\n  }\n</code></pre>\n\n<p>The command line argument I am passing in is</p>\n\n<p><code>./words testfile.txt</code></p>\n\n<p>with ./words being the compiled code. </p>\n\n<p>I actually found the solution, it seems to be the quotes in argv in the fopen, why is this?</p>\n"}, {"tags": ["c", "arrays", "malloc"], "comments": [{"owner": {"reputation": 367, "user_id": 10930163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a82a32b93373e472ee666e96b00d1b5?s=128&d=identicon&r=PG&f=1", "display_name": "anonmess", "link": "https://stackoverflow.com/users/10930163/anonmess"}, "edited": false, "score": 4, "creation_date": 1564005085, "post_id": 57191626, "comment_id": 100892931, "body": "There are quite a few issues with this code, it won&#39;t compile without warnings on gcc 8.2.0 for me. I&#39;d suggest compiling with <code>-Wall</code> and try to fix the warnings first."}, {"owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "edited": false, "score": 0, "creation_date": 1564005250, "post_id": 57191626, "comment_id": 100892986, "body": "It works fine for me, so long as you change <code>char array[] = &quot;yeah&quot;;</code> to <code>char* array = &quot;yeah&quot;;</code>."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1564006142, "post_id": 57191626, "comment_id": 100893210, "body": "An array and a pointer may have the same value, but one is a constant value and other is a variable at some memory location. The difference between <code>int *a; a = malloc(...)</code> and <code>int a[] = ...</code> is the same as the difference between <code>int x= 5</code> and <code>5</code>."}, {"owner": {"reputation": 63, "user_id": 10046800, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fLgJJWX1i3w/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oymQMgcerVXVIHxM2144loFwrm1Q/mo/photo.jpg?sz=128", "display_name": "adoprix", "link": "https://stackoverflow.com/users/10046800/adoprix"}, "edited": false, "score": 0, "creation_date": 1564006167, "post_id": 57191626, "comment_id": 100893219, "body": "anonmess yeah, I don&#39;t understand these error, and as a noob, I don&#39;t compile with the console, only atom on code::blocks ^^&#39;"}, {"owner": {"reputation": 63, "user_id": 10046800, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fLgJJWX1i3w/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oymQMgcerVXVIHxM2144loFwrm1Q/mo/photo.jpg?sz=128", "display_name": "adoprix", "link": "https://stackoverflow.com/users/10046800/adoprix"}, "edited": false, "score": 0, "creation_date": 1564006255, "post_id": 57191626, "comment_id": 100893247, "body": "Lee Daniel Crocker  so, do you know why I need to malloc in main so my code works ?"}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1564009415, "post_id": 57191626, "comment_id": 100893990, "body": "Your &quot;working&quot; code has a memory leak. Function <code>foo</code> overwrites <code>main</code>&#39;s <code>array</code> pointer with a new value obtained from <code>malloc</code>. The old value was obtained by an earlier call to <code>malloc</code> and is now unreachable storage. <code>foo(&amp;array)</code> says: &quot;here is the address of my non-<code>const</code> pointer: you may overwrite it, if you like&quot;, and <code>foo</code> does exactly that, without freeing it."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10046800, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fLgJJWX1i3w/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oymQMgcerVXVIHxM2144loFwrm1Q/mo/photo.jpg?sz=128", "display_name": "adoprix", "link": "https://stackoverflow.com/users/10046800/adoprix"}, "edited": false, "score": 0, "creation_date": 1564005832, "post_id": 57191751, "comment_id": 100893129, "body": "Thanks, but it doesn&#39;t explain why the code still doesn&#39;t work when I do a malloc in foo() but not in main. Is there a difference ? I tried with only one malloc in foo and array declared &quot;normally&quot; in main, and it doesn&#39;t work. Anyway, thanks for the quick answer !"}, {"owner": {"reputation": 1290, "user_id": 3939292, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u04yP.jpg?s=128&g=1", "display_name": "Gutblender", "link": "https://stackoverflow.com/users/3939292/gutblender"}, "reply_to_user": {"reputation": 63, "user_id": 10046800, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fLgJJWX1i3w/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oymQMgcerVXVIHxM2144loFwrm1Q/mo/photo.jpg?sz=128", "display_name": "adoprix", "link": "https://stackoverflow.com/users/10046800/adoprix"}, "edited": false, "score": 0, "creation_date": 1564006787, "post_id": 57191751, "comment_id": 100893390, "body": "I was going to comment back, but there is much more helpful explanation I could offer than a comment could allow. So I edited with updates. Hope that helps!"}], "tags": [], "owner": {"reputation": 1290, "user_id": 3939292, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u04yP.jpg?s=128&g=1", "display_name": "Gutblender", "link": "https://stackoverflow.com/users/3939292/gutblender"}, "is_accepted": true, "score": 2, "last_activity_date": 1564006758, "last_edit_date": 1564006758, "creation_date": 1564005317, "answer_id": 57191751, "question_id": 57191626, "link": "https://stackoverflow.com/questions/57191626/difference-between-creating-an-array-normally-and-with-malloc/57191751#57191751", "title": "difference between creating an array &quot;normally&quot; and with malloc", "body": "<h1>The Array Way</h1>\n\n<p><strong>First thing you should note: The code: <code>char array[] = \"yeah\";</code> will work.</strong><br>\n<em>Note: if you do this, you do not call <code>free(array)</code> because it is not a pointer to dynamically-allocated memory, and does not need to be dynamically returned to the heap. It exists on the stack. Read on...</em></p>\n\n<p>But the function <code>foo()</code> here is the problem. When <code>foo()</code> is called, the string <code>truc</code> (which also could be declared <code>char truc[] = \"then\";</code>) exists in a stack frame, which is a section of program memory, which only exists until <code>foo()</code> returns. If you change <code>array</code> to point to memory within that stack frame, what happens when that function returns? That stack frame becomes undefined, and you're left pointing at junk memory.</p>\n\n<p>If you want to change the contents of the string in <code>array</code>, you could ensure the buffer is long enough, and <code>foo()</code> could <code>strcpy(array, \"then\")</code> into it. So, you're not changing the pointer itself, just the memory it points to. This isn't what I'd call good software design, but for the sake of an example, it would work for you. Like this:</p>\n\n<pre><code>void foo(char * ptr)\n{\n    strcpy(ptr, \"then\");\n}\n</code></pre>\n\n<hr>\n\n<h1>So why doesn't it work without <code>malloc()</code> in <code>main()</code>?</h1>\n\n<p>When you <em>don't</em> <code>malloc()</code> in <code>main()</code>, <code>array</code> represents, as it suggests, an array. The identifier is not itself a pointer, it is an array; however, it <em>decays to a pointer</em>, or if you will, acts like one. That's why you could pass it off as one, if you wanted, like if you passed it to <code>foo()</code>. Now, if you reference the <em>address of</em> <code>array</code>, like <code>&amp;array</code>, <code>(char*)array</code>, <code>&amp;array</code>, <code>&amp;array[0]</code> are all the same - pointers to the beginning of <code>array</code>. Your <code>foo()</code> is actually writing a <em>memory address</em> to the memory of <code>array</code>, in this case.</p>\n\n<p>What does this do? Well, the technical answer is undefined behavior. But I would guess that it's writing a 32-bit integer (a memory address) to a chunk of memory that used to represent 4 8-bit characters in a string. So now you've corrupted exactly four characters. And, if <code>foo()</code> is using <code>malloc()</code> as you show, also introduced a memory leak. </p>\n\n<p>The neat part of this is that your string is exactly four characters, so this shouldn't corrupt the null terminator <code>'\\0'</code> at the end of the string. Let me guess, you see exactly four junk characters?</p>\n"}], "owner": {"reputation": 63, "user_id": 10046800, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fLgJJWX1i3w/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oymQMgcerVXVIHxM2144loFwrm1Q/mo/photo.jpg?sz=128", "display_name": "adoprix", "link": "https://stackoverflow.com/users/10046800/adoprix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 57191751, "answer_count": 1, "score": 4, "last_activity_date": 1564057444, "creation_date": 1564004492, "last_edit_date": 1564057444, "question_id": 57191626, "link": "https://stackoverflow.com/questions/57191626/difference-between-creating-an-array-normally-and-with-malloc", "title": "difference between creating an array &quot;normally&quot; and with malloc", "body": "<p>I was messing with C pointers to pointers in functions to learn. I created a string array, and wanted to change it in the function <code>foo</code> with a pointer to pointer. I then print it, just to see.</p>\n\n<p>Problem is: if I create it \"normally\": <code>char array[] = \"yeah\"</code>, the code doesn't work and I see a bunch of weird characters on the console. But, If I create it with a <code>malloc</code>, it works. I really want to understand the difference.</p>\n\n<p>This works:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid foo(char **ptr);\n\nint main(int argc, char *argv[]) {\n    char *array = malloc(sizeof(\"yeah\"));  //I need to malloc here, or it doesn't work. Why ?\n    strcpy(array, \"yeah\");\n\n    printf(\"array before : %s \\n\", array);\n\n    char *ptr = array;\n    char **pt = &amp;ptr;\n\n    foo(&amp;array);\n\n    printf(\"array after : %s \\n\", array);\n\n    free(array);\n}\n\nvoid foo(char **ptr) {\n    char *truc = malloc(sizeof(char) * 20);  //I need to malloc here, else it doesn't work. Why ?\n    strcpy(truc, \"then\");\n\n    *ptr = truc;\n}\n</code></pre>\n\n<p>but this doesn't, it prints nasty characters on the console: </p>\n\n<pre><code>void foo(char **ptr);\n\nint main(int argc, char *argv[]) {\n    char array[] = \"yeah\"; //created \"normally\"\n\n    printf(\"array before : %s \\n\", array);\n\n    char *ptr = array;\n    char **pt = &amp;ptr;\n\n    foo(&amp;array);\n\n    printf(\"array after : %s \\n\", array);\n\n    free(array);\n}\n\nvoid foo(char **ptr) {\n    char truc = \"then\";\n\n    *ptr = truc;\n}\n</code></pre>\n\n<p>What is the difference between:</p>\n\n<pre><code>char array[] = \"yeah\";\n</code></pre>\n\n<p>and  </p>\n\n<pre><code>char *array = malloc(sizeof(\"yeah\");\nstrcpy(array, \"yeah\");\n</code></pre>\n"}, {"tags": ["c", "linux-kernel", "arm", "cpu-cache"], "comments": [{"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 1, "creation_date": 1564060007, "post_id": 57191062, "comment_id": 100912903, "body": "The stack (sys sp I am guessing) is special in Linux as it has a thread_info which gives the kernel access to process information.   Note: <b>The minimum time to complete these CP15 and CP14 operations is 60 cycles. However, the timing of these instructions varies highly. It can take hundreds of cycles, depending on the operation and on the current processor activity.</b>  You don&#39;t have any DSB type stuff.  So actual flushing may take place as you try to return from the code."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 1, "creation_date": 1564060534, "post_id": 57191062, "comment_id": 100913212, "body": "Linux is a an <i>open source</i> project at least partially to allow people to learn.  You can look at <a href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm/mm/cache-v7.S?h=v5.3-rc1#n329\" rel=\"nofollow noreferrer\">cache-v7.S</a> and see there is errata for Cortex-A8 devices as well as much more to it.  Note, there is <a href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm/include/asm/cacheflush.h?h=v5.3-rc1\" rel=\"nofollow noreferrer\">an interface</a> to use these routines."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 1, "creation_date": 1564061194, "post_id": 57191062, "comment_id": 100913626, "body": "The code in cache-v7.S is using to PoU as opposed to PoC (cr7, cr11 vs cr6); so both L1/L2.  I think you can make the L1/L2/memory inconsistent if you don&#39;t use the proper instructions (and sequencing).  The L2 has completely different mechanism to flush afair.  I think it is memory mapped I/O.  Things will work &#39;fine&#39; with a variable as it won&#39;t corrupt program execution.  You are making a variation on a &#39;stack overflow&#39;; corrupting stack via inconsistent cache.  Also you don&#39;t take care of branch prediction in your snippet above."}], "answers": [{"tags": [], "owner": {"reputation": 559, "user_id": 3576334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fjRbx.jpg?s=128&g=1", "display_name": "alireza sadeghpour", "link": "https://stackoverflow.com/users/3576334/alireza-sadeghpour"}, "is_accepted": true, "score": 2, "last_activity_date": 1601824528, "last_edit_date": 1601824528, "creation_date": 1564135311, "answer_id": 57217686, "question_id": 57191062, "link": "https://stackoverflow.com/questions/57191062/why-armv7-a-crashes-when-flushing-the-stack-pointer-from-the-cache/57217686#57217686", "title": "Why ARMv7-A crashes when flushing the stack pointer from the cache", "body": "<p>Thanks to artless noise, actually ARM cortex-a8 has 3 types of command for cache manipulation based on Modified Virtual address:</p>\n<pre><code>Invalidate (C6, 1) (just invalidate the cache line)\nClean (C10, 1) (Update memory if the cache line is dirty)\nClean &amp; Invalidate (C14, 1) (Update memory then invalidate cache line)\n</code></pre>\n<p>and as you can see in the question I used Invalidate instruction and it caused that memory to have invalid data for the stack. but after using Clean&amp;Invalidate instruction the problem was solved. so the final code is as below:</p>\n<pre><code>cpy r3, sp\nmcr p15, 0x0, r3, cr7, cr14, 0x1\nDSB SY\n</code></pre>\n"}], "owner": {"reputation": 559, "user_id": 3576334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fjRbx.jpg?s=128&g=1", "display_name": "alireza sadeghpour", "link": "https://stackoverflow.com/users/3576334/alireza-sadeghpour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 57217686, "answer_count": 1, "score": 2, "last_activity_date": 1601824528, "creation_date": 1564001506, "last_edit_date": 1601824488, "question_id": 57191062, "link": "https://stackoverflow.com/questions/57191062/why-armv7-a-crashes-when-flushing-the-stack-pointer-from-the-cache", "title": "Why ARMv7-A crashes when flushing the stack pointer from the cache", "body": "<p>I am trying to evict the memory address in which the stack pointer is pointing to it in an ARM Cortex-A8 processor. I am trying to do that with the below code:</p>\n<pre><code>cpy r3, sp\nmcr p15, 0x0, r3, cr7, cr6, 0x1\n</code></pre>\n<p>I have run the above code in a loadable kernel module. after running the above code in the kernel,  OS crashes and needs a restart. but the above instructions work fine for flushing a variable from the cache.</p>\n<p>Can anyone give me any advice to solve the problem?</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1564002841, "post_id": 57190785, "comment_id": 100892262, "body": "Still odd that OP is getting  6356716,6356716 6356716...,He should be getting something like  6356716,6356720 6356724..."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1564003317, "post_id": 57190785, "comment_id": 100892420, "body": "@LeeDanielCrocker Yeah. I was wondering. Admittedly I assume that OP was not very precise with reporting the actual output. Ryan Ben, could you comment?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1564003341, "post_id": 57190785, "comment_id": 100892431, "body": "They could be getting the first four bytes of an eight-byte pointer, hence no change over the length of the table. Except not with the macOS ABI, which I think is similar in this regard to others in common use on Intel systems."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1564003433, "post_id": 57190785, "comment_id": 100892458, "body": "@EricPostpischil Yeah, on my search for an explanation something like that crossed my mind, too. Not as precisely and thoroughly thought through though. Thanks for elaborating."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1564003724, "post_id": 57190785, "comment_id": 100892540, "body": "Yes, it&#39;s perfect English and the four &quot;ough&quot;s are pronounced in three different ways (or even four in some dialects)."}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 0, "last_activity_date": 1564000166, "creation_date": 1564000166, "answer_id": 57190785, "question_id": 57190684, "link": "https://stackoverflow.com/questions/57190684/inputting-elements-from-a-variable-being-incremented-by-a-loop-and-outputting-th/57190785#57190785", "title": "inputting elements from a variable being incremented by a loop and outputting the elements using loop", "body": "<p>Remove the <code>&amp;</code>. It is not needed for printf, only for scanf.<br>\nI guess that is what confused you.</p>\n"}, {"tags": [], "owner": {"reputation": 75, "user_id": 11832637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0719175f6fc0b9fea5562c111e48b05a?s=128&d=identicon&r=PG&f=1", "display_name": "emirhan422", "link": "https://stackoverflow.com/users/11832637/emirhan422"}, "is_accepted": false, "score": -1, "last_activity_date": 1564009592, "creation_date": 1564009592, "answer_id": 57192324, "question_id": 57190684, "link": "https://stackoverflow.com/questions/57190684/inputting-elements-from-a-variable-being-incremented-by-a-loop-and-outputting-th/57192324#57192324", "title": "inputting elements from a variable being incremented by a loop and outputting the elements using loop", "body": "<p>Normally the function scanf needs the &amp; marker so as to reach that adress and add a value but the function printf just prints a given string so it doesn't have anything to do with adresses and while printing you don't need &amp; because as default you are printing out the variable not the adress of it </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11826955"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564009592, "creation_date": 1563999619, "question_id": 57190684, "link": "https://stackoverflow.com/questions/57190684/inputting-elements-from-a-variable-being-incremented-by-a-loop-and-outputting-th", "title": "inputting elements from a variable being incremented by a loop and outputting the elements using loop", "body": "<p>trying to add elements into an array using a loop and then output the array using a loop. On inputting elements I have a variable that starts on 30 and 3 is added every time the loop occurs, the value of the variable is then stored to the pointed array,of which the pointer moves with the loop.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n///global variables\nint table[100];\n\nint main()\n{\n    fill_array();\n    array_output();\n\n}\n\nvoid fill_array(){\n    int value;\n    value = 30 ;\n    for (int i=0;i&lt;100;i++){\n        value = value + 3 ;\n        table[i] = value;\n    }\n}\n\nvoid array_output(){\n    for (int i=0;i&lt;100;i++){\n        printf(\"%d\\n\",&amp;table[i]);\n    }\n}\n</code></pre>\n\n<p>expecting 33,36,39.... but getting 6356716,6356716 6356716...</p>\n"}, {"tags": ["c++", "c", "cmake", "project-structure"], "answers": [{"comments": [{"owner": {"reputation": 247, "user_id": 8310085, "user_type": "registered", "profile_image": "https://graph.facebook.com/1789907944358222/picture?type=large", "display_name": "Alex Erling", "link": "https://stackoverflow.com/users/8310085/alex-erling"}, "edited": false, "score": 0, "creation_date": 1564007636, "post_id": 57190750, "comment_id": 100893630, "body": "In the cmakelist.txt for Project_1 , I tried adding the Comm Library for Project_1A, but I when I added communications.h into the project_1a.c, it was saying I couldn&#39;t find the file. Am I missing something? Also, what is the reason for including the PUBLIC? Thanks!"}, {"owner": {"reputation": 247, "user_id": 8310085, "user_type": "registered", "profile_image": "https://graph.facebook.com/1789907944358222/picture?type=large", "display_name": "Alex Erling", "link": "https://stackoverflow.com/users/8310085/alex-erling"}, "edited": false, "score": 0, "creation_date": 1564011426, "post_id": 57190750, "comment_id": 100894328, "body": "Also, say I have one more library (utility) that is used in the other libraries. How do I go about including them in the other libraries?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 247, "user_id": 8310085, "user_type": "registered", "profile_image": "https://graph.facebook.com/1789907944358222/picture?type=large", "display_name": "Alex Erling", "link": "https://stackoverflow.com/users/8310085/alex-erling"}, "edited": false, "score": 0, "creation_date": 1564029664, "post_id": 57190750, "comment_id": 100897527, "body": "@AlexErling if you have include directories required tu use a particular library, you have to add it as an interface include directory. Let me edit"}, {"owner": {"reputation": 247, "user_id": 8310085, "user_type": "registered", "profile_image": "https://graph.facebook.com/1789907944358222/picture?type=large", "display_name": "Alex Erling", "link": "https://stackoverflow.com/users/8310085/alex-erling"}, "edited": false, "score": 0, "creation_date": 1564034087, "post_id": 57190750, "comment_id": 100898951, "body": "Okay, thanks for info. Last question being, which Cmakes do I do the target include in? In my example, is it ~/src/Cmakelist.txt, or whichever cmake will be used by the library? And I assume I need to do that for each library I add?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 247, "user_id": 8310085, "user_type": "registered", "profile_image": "https://graph.facebook.com/1789907944358222/picture?type=large", "display_name": "Alex Erling", "link": "https://stackoverflow.com/users/8310085/alex-erling"}, "edited": false, "score": 0, "creation_date": 1564063255, "post_id": 57190750, "comment_id": 100914888, "body": "@AlexErling you can add a pure interface library that has the include dir: <code>add_library(common INTERFACE)</code> and add the include directory <code>target_include_directory(common INTERFACE your&#47;include&#47;dir)</code>"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 247, "user_id": 8310085, "user_type": "registered", "profile_image": "https://graph.facebook.com/1789907944358222/picture?type=large", "display_name": "Alex Erling", "link": "https://stackoverflow.com/users/8310085/alex-erling"}, "edited": false, "score": 0, "creation_date": 1564064959, "post_id": 57190750, "comment_id": 100915880, "body": "@AlexErling I added an example of this in the last example"}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 0, "last_activity_date": 1564064930, "last_edit_date": 1564064930, "creation_date": 1564000022, "answer_id": 57190750, "question_id": 57190546, "link": "https://stackoverflow.com/questions/57190546/cmake-project-structure-how-do-i-properly-merge-libraries-together-and-include/57190750#57190750", "title": "CMake Project Structure: How do I properly merge libraries together and include them in multiple executables", "body": "<p>You almost got it: you can link your executables with the libraries defined in other directories. There is no problem with that.</p>\n\n<pre><code>add_executable(Project_1A Project_1a.c)\nadd_executable(Project_1B Project_1B.c)\n\ntarget_link_library(Project_1A PUBLIC Full_Library)\n</code></pre>\n\n<p>However, I would suggest you link only to the parts of the library you are using directly:</p>\n\n<pre><code>add_executable(Project_1A Project_1a.c)\nadd_executable(Project_1B Project_1B.c)\n\n# Project_1A only use crypto directly in it's code\ntarget_link_library(Project_1A PUBLIC Crypto_Lib) \n\n# Project_1B use comm and error directly in it's code\ntarget_link_library(Project_1B PUBLIC Comm_Lib Error_Lib) \n</code></pre>\n\n<p>Then instead of using the <code>include_directories</code> function, use the <code>target_include_directories</code>. There's an option to add the include directory as a usage requirement. That requirement will be propagated to other libraries which use this one:</p>\n\n<pre><code>target_include_directories(Comm_Lib INTERFACE ${CMAKE_CURRENT_SOURCE_DIR})\n</code></pre>\n\n<p>With that line above, anyone who links to <code>Comm_Lib</code> will have the communication library directory as include path.</p>\n\n<p>If you really and to aggregate the three library together, <code>Full_Library</code> can be defined like this:</p>\n\n<pre><code>add_library(Full_Library INTERFACE)\n\ntarget_link_libraries(Full_Library INTERFACE Comm_Lib Crypto_Lib Error_Lib)\ntarget_include_directories(Full_Library INTERFACE common/include/dir)\n</code></pre>\n"}], "owner": {"reputation": 247, "user_id": 8310085, "user_type": "registered", "profile_image": "https://graph.facebook.com/1789907944358222/picture?type=large", "display_name": "Alex Erling", "link": "https://stackoverflow.com/users/8310085/alex-erling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "accepted_answer_id": 57190750, "answer_count": 1, "score": 0, "last_activity_date": 1564064930, "creation_date": 1563998947, "last_edit_date": 1564007919, "question_id": 57190546, "link": "https://stackoverflow.com/questions/57190546/cmake-project-structure-how-do-i-properly-merge-libraries-together-and-include", "title": "CMake Project Structure: How do I properly merge libraries together and include them in multiple executables", "body": "<p>I am building a C Project and I'm currently a little lost on how to properly link in the libraries.</p>\n\n<p>To summarize: I will have 3 projects that will have multiple executables. The projects will be using code from a library that will have multiple directories (sub-libraries). I have all the includes for the project in an includes directory. And I also will have a testing directory for the src and the lib as well.</p>\n\n<p>How do I link in a library thats in a separate directory?</p>\n\n<p>Is there a way to I can merge all these libraries into one main library, so I only have to link a single library?</p>\n\n<p><strong>The structure looks like this:</strong></p>\n\n<pre><code>Project:\n   |-- bin   \n   |-- build   \n   |-- src     \n   |   |-- Project 1   \n   |   |      |-- Project1a.c\n   |   |      |-- Project1b.c\n   |   |      |-- cmakelists.txt\n   |   |-- Project 2\n   |   |      |--Project2.c\n   |   |-- Project 3\n   |   |      |--Project3.c\n   |   |-- cmakelists.txt\n   |\n   |-- lib \n   |    |--Crypto_Lib\n   |    |      |-- Crypto.c\n   |    |      |-- cmakelists.txt\n   |    |--Communications_Lib\n   |    |      |-- Communications.c\n   |    |      |-- cmakelists.txt\n   |    |--Error_Lib\n   |    |      |-- Error.c\n   |    |      |-- cmakelists.txt\n   |    |--cmakelists.txt\n   |\n   |-- include\n   |    |--src\n   |    |   |-- Project 1\n   |    |   |     |-- Project1a.h\n   |    |   |     |-- Project1b.h\n   |    |   |-- Project 2\n   |    |   |     |-- Project2.h\n   |    |   |-- Project 3\n   |    |         |-- Project3.h    \n   |    |--lib\n   |    |  |--Hash \n   |    |  |    |-- Crypto.h\n   |    |  |--Communications\n   |    |  |    |-- Communications.h\n   |    |  |--Error\n   |    |  |    |-- Error.h\n   |\n   |-- test\n   |    |--src (etc...)\n   |    |--lib (etc...)\n   |    |--cmakelists.txt\n   |\n   |--cmakelists.txt\n</code></pre>\n\n<p><strong>CMAKES I currently have:</strong></p>\n\n<p>~/CMakeLists.txt</p>\n\n<pre><code>    add_subdirectory(lib)\n    add_subdirectory(src)\n    add_subdirectory(test)\n</code></pre>\n\n<p>~/lib/CMakeLists.txt</p>\n\n<pre><code>    #To access the header file\n    include_directories(${CMAKE_SOURCE_DIR}/includes/lib)   \n\n    add_subdirectory(communications)\n    add_subdirectory(crypto)\n    add_subdirectory(error)\n</code></pre>\n\n<p>~/src/CMakeLists.txt</p>\n\n<pre><code>    #To access the header file\n    include_directories(${CMAKE_SOURCE_DIR}/includes/src)   \n\n    add_subdirectory(project_one)\n    add_subdirectory(project_two)\n    add_subdirectory(project_three)\n</code></pre>\n\n<p>~/lib/communications/CMakeLists.txt</p>\n\n<pre><code>    add_library(Comm_Lib STATIC communications.c)\n</code></pre>\n\n<p>~/lib/ crypto /CMakeLists.txt</p>\n\n<pre><code>    add_library(Crypto _Lib STATIC crypto.c)\n</code></pre>\n\n<p>~/lib/error/CMakeLists.txt</p>\n\n<pre><code>    add_library(Error_Lib STATIC error.c)\n</code></pre>\n\n<p>~/src/project_one/CMakeLists.txt</p>\n\n<pre><code>    add_executable(Project_1A Project_1a.c)\n    add_executable(Project_1B Project_1B.c)\n\n    #target_link_library(Project_1A Full_Library) Would like to be able to join all libraries together\n</code></pre>\n\n<p>~/src/project_two/CMakeLists.txt</p>\n\n<pre><code>    add_executable(Project_Three Project_two.c)\n</code></pre>\n\n<p>~/src/project_one/CMakeLists.txt</p>\n\n<pre><code>    add_executable(Project_Three Project_three.c)\n</code></pre>\n\n<p>~/test/CMakeLists.txt</p>\n\n<pre><code>    add_subdirectory(lib_test)\n    add_subdirectory(src_test)  \n\n    **Haven\u2019t gotten any deeper in the test CMakeLists.txt\n</code></pre>\n\n<p>I know I haven't used link_libraries yet, I'm just trying to figure out the best way to go about this. </p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["c", "angle", "radians"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 3, "creation_date": 1563997569, "post_id": 57190188, "comment_id": 100890279, "body": "Fuel is equally consumed by rotating in both directions. Count roation similar to angle, but upwards in both cases."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1563997814, "post_id": 57190188, "comment_id": 100890376, "body": "You know each <code>SHIP_ROTATION_PER_STEP</code> is <code>PI&#47;20</code>. So each step is 9-degrees. So on each 7th rotation the ship will have rotated through 1-radian (either forward/backwards/or a combination of both)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1563997961, "post_id": 57190188, "comment_id": 100890436, "body": "You better calculate how much of the fuel is consumed by <code>SHIP_ROTATION_PER_STEP</code>."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1563998370, "post_id": 57190188, "comment_id": 100890607, "body": "Most likely, you should track the ship\u2019s angle and the ship\u2019s remaining fuel separately. When the ship turns a twentieth of a radian, increase or decrease the angle by a twentieth of a radian and decrease the remaining fuel by a twentieth of a unit of fuel. Also, do not be surprised when the sum of floating-point numbers differs from the sum you would get by using real numbers\u2014there will be small rounding errors, and the fuel will not drop to zero exactly but may drop to something like \u2212.00001 or +.00001 units of fuel, and the angle may have similar deviations."}, {"owner": {"reputation": 99, "user_id": 7899374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed37c877025bc8a7d9573832ad8a276?s=128&d=identicon&r=PG&f=1", "display_name": "Renzo", "link": "https://stackoverflow.com/users/7899374/renzo"}, "edited": false, "score": 0, "creation_date": 1564007333, "post_id": 57190188, "comment_id": 100893535, "body": "Thanks to everyone!"}], "answers": [{"comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 1, "creation_date": 1564001396, "post_id": 57190698, "comment_id": 100891758, "body": "I would have written something like <code>total_angle += fabs (old_angle - angle)</code>."}, {"owner": {"reputation": 99, "user_id": 7899374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed37c877025bc8a7d9573832ad8a276?s=128&d=identicon&r=PG&f=1", "display_name": "Renzo", "link": "https://stackoverflow.com/users/7899374/renzo"}, "edited": false, "score": 0, "creation_date": 1564007307, "post_id": 57190698, "comment_id": 100893527, "body": "Perfect, i did it with the idea of both. @Kaz I tried it out of your way, but it didn&#39;t work out properly. I used the &quot;old_angle&quot; that Mathieu says. Thank you all for the comments"}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "reply_to_user": {"reputation": 99, "user_id": 7899374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed37c877025bc8a7d9573832ad8a276?s=128&d=identicon&r=PG&f=1", "display_name": "Renzo", "link": "https://stackoverflow.com/users/7899374/renzo"}, "edited": false, "score": 0, "creation_date": 1564011204, "post_id": 57190698, "comment_id": 100894286, "body": "@ArturoAguilarLopez Right; <code>angle</code> in my pseudocode refers not to the current position but the update delta; that corresponds to <code>new_angle - old_angle</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1564012892, "post_id": 57190698, "comment_id": 100894594, "body": "UV yet <code>total_angle</code> sounds mis-named given <a href=\"https://stackoverflow.com/questions/57190188/how-to-detect-a-rotated-radian#comment100890279_57190188\">@Yunnosch</a>.  Perhaps <code>total_rotations</code>?"}], "tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": true, "score": 1, "last_activity_date": 1564005691, "last_edit_date": 1564005691, "creation_date": 1563999722, "answer_id": 57190698, "question_id": 57190188, "link": "https://stackoverflow.com/questions/57190188/how-to-detect-a-rotated-radian/57190698#57190698", "title": "How to detect a rotated radian?", "body": "<p>Keep an accumulator <code>total_angle</code>. Whenever the ship rotates in either direction, add the absolute value of the rotation. Assuming your rotations are in the floating-point <code>double</code> type that means this:</p>\n\n<pre><code>total_angle += fabs(angle); /* angle is the increment in angle */\n</code></pre>\n\n<p>Let's assume that <code>angle</code> and <code>total_angle</code> are simply measuring radians directly and not some scaled integer version or whatever. In that case, whenever <code>total_angle</code> reaches or exceeds <code>1.0</code>, we subtract a unit of fuel. At the same time, we subtract <code>1.0</code> from the accumulator:</p>\n\n<pre><code>if (total_angle &gt;= 1.0) {\n    fuel--;\n    total_angle -= 1.0;\n}\n</code></pre>\n\n<p>We're assuming that a single rotation is no greater than one radian, otherwise we'd have to make this a while loop.</p>\n"}], "owner": {"reputation": 99, "user_id": 7899374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed37c877025bc8a7d9573832ad8a276?s=128&d=identicon&r=PG&f=1", "display_name": "Renzo", "link": "https://stackoverflow.com/users/7899374/renzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 57190698, "answer_count": 1, "score": 0, "last_activity_date": 1564005691, "creation_date": 1563997285, "last_edit_date": 1564000425, "question_id": 57190188, "link": "https://stackoverflow.com/questions/57190188/how-to-detect-a-rotated-radian", "title": "How to detect a rotated radian?", "body": "<p>I'm doing <code>LunarLander</code> in <code>C</code>. \nMy ship rotates between <code>PI/2</code> and <code>-PI/2</code>. And rotation per step is <code>PI/ 20</code>. I need a way to detect when my ship rotated 1 radian. So, when 1 radian rotates, the fuel decreases me by 1 unit.</p>\n\n<p>What I thought is to first pass my angle to degrees and then see if the angle is greater than 57, because 1 radian is 57 degrees.\nBut I couldn't write it in my program because the idea is incomplete.\nWhile this is just something I thought, I think the solution comes from that side, compare with those 57 degree</p>\n\n<pre><code>while(1)\n//code\n    case SDLK_RIGHT:\n        angle += SHIP_ROTATION_PER_STEP;\n        if(angle &gt; (PI/2)){\n            angle = (PI/2);\n            break;\n        }\n        break;\n    case SDLK_LEFT:\n        angle -= SHIP_ROTATION_PER_STEP;\n        if(angle &lt; -(PI/2)){\n            angle = -(PI/2);\n            break;\n        }\n        break;  \n//code\n//during the while\n</code></pre>\n\n<p>I need an idea to compare if all that moved my ship was 1 radian. If the sum of the rotations per step were greater than 1 radian. But I can't think how</p>\n"}, {"tags": ["c++", "c", "linux"], "comments": [{"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1563996816, "post_id": 57190054, "comment_id": 100889979, "body": "I&#39;d be interested to hear how it is possible to open a file by more than one handle / process?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1563996875, "post_id": 57190054, "comment_id": 100890002, "body": "@nada You just call <code>open</code> on it."}, {"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1563996939, "post_id": 57190054, "comment_id": 100890036, "body": "Didn&#39;t know this was possible :O"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1563996991, "post_id": 57190054, "comment_id": 100890052, "body": "A single process can open the same file multiple times; multiple processes can open the same file too.  A process can duplicate a file descriptor easily.  Processes fork, which duplicates the file descriptors, and may or may not close the file after forking.  There isn&#39;t an easy way to get the number you&#39;re looking for.  It isn&#39;t even particularly clear what number you <i>are</i> looking for.  It might be the number of open file descriptors, or the number of open file descriptions (that&#39;s different) or the number of processes with at least one open file descriptor, or description, or \u2026"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 6, "creation_date": 1563997058, "post_id": 57190054, "comment_id": 100890076, "body": "If you don&#39;t need it programmatically just use <code>lsof</code>."}, {"owner": {"reputation": 10828, "user_id": 1394729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9Ri8.jpg?s=128&g=1", "display_name": "tink", "link": "https://stackoverflow.com/users/1394729/tink"}, "edited": false, "score": 1, "creation_date": 1563998316, "post_id": 57190054, "comment_id": 100890586, "body": "Or <code>fuser</code> if <code>lsof</code> seems like overkill ..."}, {"owner": {"reputation": 2017, "user_id": 6861219, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/141586299631822/picture?type=large", "display_name": "Ziqi Liu", "link": "https://stackoverflow.com/users/6861219/ziqi-liu"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1563998481, "post_id": 57190054, "comment_id": 100890659, "body": "@JonathanLeffler We can assume no <code>fork</code> and one process will open only one time. Actually I just want to use a file to keep track of a group of processes who is still alive, so every process will open that file when it start."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1563998679, "post_id": 57190054, "comment_id": 100890750, "body": "Candidate originals <a href=\"https://stackoverflow.com/questions/22803498/how-can-i-see-how-many-times-i-have-used-fopen-on-a-file\">here</a> and <a href=\"https://stackoverflow.com/questions/24546155/determine-how-many-times-file-is-mapped-into-memory\">here</a>. Of course, the information is stale immediately upon acquisition, as other processes can open or close a file at any moment."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1564002639, "post_id": 57190054, "comment_id": 100892192, "body": "You are going to need to use some Linux API (if one exists).  Both the C and C++ (separate languages), don&#39;t have standard functionality to query file attributes."}, {"owner": {"reputation": 1118, "user_id": 8074683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e8Ik8.jpg?s=128&g=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/8074683/anton"}, "edited": false, "score": 1, "creation_date": 1564050297, "post_id": 57190054, "comment_id": 100907480, "body": "File status is not intended for IPC (Inter-Process Communication). And IPC is what you need. See <a href=\"https://stackoverflow.com/a/404622/8074683\">stackoverflow.com/a/404622/8074683</a>."}, {"owner": {"reputation": 120, "user_id": 4715389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d10f6d07d137a6b5c5074ebbf137318?s=128&d=identicon&r=PG", "display_name": "Alex Wang", "link": "https://stackoverflow.com/users/4715389/alex-wang"}, "edited": false, "score": 0, "creation_date": 1566216607, "post_id": 57190054, "comment_id": 101574571, "body": "May I ask what is your purpose for accessing it?"}], "owner": {"reputation": 2017, "user_id": 6861219, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/141586299631822/picture?type=large", "display_name": "Ziqi Liu", "link": "https://stackoverflow.com/users/6861219/ziqi-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563996704, "creation_date": 1563996704, "question_id": 57190054, "link": "https://stackoverflow.com/questions/57190054/can-i-know-how-many-processes-are-opening-a-same-file-in-c-c", "title": "Can I know how many processes are opening a same file in C/C++?", "body": "<p>Is there a 'reference count' on a file that maintains how many processes are opening a file in C/C++? Or is there any alternative approach to do so? I've looked at <code>fstat</code> but it seems that it doesn't provide such information.</p>\n"}, {"tags": ["c", "pointers", "unary-operator"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 1, "creation_date": 1563995063, "post_id": 57189642, "comment_id": 100889183, "body": "Pointers to variables aren&#39;t created, they just exist as a consequence of the way the language is. In practice, they&#39;re an address of those variables, that will likely be generated by adding some compile-time-known offset to the base or stack pointer, with the address being generated at run-time."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1563995207, "post_id": 57189642, "comment_id": 100889241, "body": "The <code>&amp;</code> operator creates pointers, just like the <code>+</code> operator adds numbers, and the unary <code>-</code> operator negates numbers.  So if I call <code>f(&amp;a, b+c, -d)</code>, the <code>&amp;</code>, <code>+</code>, and <code>-</code> operators all do their work at more or less the same time, as the arguments to the function call are being prepared."}, {"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1563995271, "post_id": 57189642, "comment_id": 100889263, "body": "@SteveSummit The <code>&amp;</code> operator <i>creates</i> pointers?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1563995544, "post_id": 57189642, "comment_id": 100889386, "body": "@CinCout: Certainly, as much as the <code>*</code> operator creates the product <code>20</code> in <code>4*5</code>. In either case, <code>4*5</code> or <code>&amp;a</code>, the result is merely a value (a number, letter, address, or other element of a set of things of some kind) not an object (a region of storage whose contents can represent values), but that value is produced as a result of the operator."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1563995760, "post_id": 57189642, "comment_id": 100889499, "body": "@CinCout Or &quot;generates&quot; pointers.  That&#39;s the way I tend to thing about it, anyway, in a higher-level way.  Now, it&#39;s true, depending on what <code>a</code> and <code>b</code> are, their address are what their addresses are, and (as other comments have pointed out) there may be no real work to &quot;create&quot; them.  (If <code>a</code> has static duration, for example, <code>f(&amp;a)</code> basically just passes a constant to <code>f</code>, albeit a link-time constant.)  But given that <code>a</code> and <code>b</code> are local variables, the compiler is going to have to emit actual code to add their offsets to the current stack/frame pointer before passing them to <code>swap()</code>."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1563995967, "post_id": 57189642, "comment_id": 100889600, "body": "&quot;To generate a pointer&quot; means &quot;to cause a pointer to come into existence&quot;, and so does &quot;to create a pointer&quot;. I personally use &quot;evaluates to&quot; when talking about operators, but &quot;produces&quot; and &quot;returns&quot; and also used. You may have a preference of verb, but all of these are synonymous, so this quibbling doesn&#39;t achieve anything."}], "answers": [{"comments": [{"owner": {"reputation": 2032, "user_id": 5199418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLvUH.jpg?s=128&g=1", "display_name": "h0r53", "link": "https://stackoverflow.com/users/5199418/h0r53"}, "edited": false, "score": 0, "creation_date": 1563996212, "post_id": 57189676, "comment_id": 100889707, "body": "In terms of C this is accurate. But at a lower level the pointers existed all along, not the types they reference. Instead of creating new variables to serve as pointers for the &amp; operation results, it simply uses the pointers that were made available when the stackframe was created."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 2032, "user_id": 5199418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLvUH.jpg?s=128&g=1", "display_name": "h0r53", "link": "https://stackoverflow.com/users/5199418/h0r53"}, "edited": false, "score": 0, "creation_date": 1563996313, "post_id": 57189676, "comment_id": 100889753, "body": "@CaitLANJenner You are wrong. The compiler cares about the &amp; operator and generates the  corresponding object code."}, {"owner": {"reputation": 2032, "user_id": 5199418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLvUH.jpg?s=128&g=1", "display_name": "h0r53", "link": "https://stackoverflow.com/users/5199418/h0r53"}, "edited": false, "score": 0, "creation_date": 1563996391, "post_id": 57189676, "comment_id": 100889790, "body": "I didn&#39;t imply that it didn&#39;t. Perhaps that was worded poorly. Yes in this case the compiler uses the load effective address (lea) instruction instead of the move (mov) instruction. This certainly has an impact, but with regards to the OP&#39;s question it does not &quot;create&quot; a pointer. The pointer exists and the variable doesn&#39;t, so to speak."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 2032, "user_id": 5199418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLvUH.jpg?s=128&g=1", "display_name": "h0r53", "link": "https://stackoverflow.com/users/5199418/h0r53"}, "edited": false, "score": 0, "creation_date": 1563996971, "post_id": 57189676, "comment_id": 100890048, "body": "@CaitLANJenner: I do not see any model or level\u2014whether the C abstract computer model or the instructions in an actual computer or other\u2014in which the pointer necessarily exists prior to evaluation of the <code>&amp;</code> operator. Suppose the stack pointer is currently 2400, and <code>a</code> is located 12 bytes above that. Just before the <code>&amp;</code> is evaluated by executing an <code>lea</code> instruction, there might be no place in the computer where the value 2412 exists\u2014no register, memory, or other bits containing 2412. After the <code>lea</code> executes, 2412 is in a register. The <code>lea</code> instruction creates this pointer."}, {"owner": {"reputation": 2032, "user_id": 5199418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLvUH.jpg?s=128&g=1", "display_name": "h0r53", "link": "https://stackoverflow.com/users/5199418/h0r53"}, "edited": false, "score": 0, "creation_date": 1563997243, "post_id": 57189676, "comment_id": 100890150, "body": "&quot;Suppose the stack pointer is current 2400, and <code>a</code> is located 12 bytes above that...&quot; - Then all references to <code>a</code> technically dereference <code>a</code> at 2400+12. This dereference requires the original pointer. I think the confusion here is we are talking about two different things. To access any data, we need to know where they reside. A direct access to <code>a</code> in one way or another uses a pointer to where it is stored, perhaps indirectly."}, {"owner": {"reputation": 2032, "user_id": 5199418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLvUH.jpg?s=128&g=1", "display_name": "h0r53", "link": "https://stackoverflow.com/users/5199418/h0r53"}, "edited": false, "score": 0, "creation_date": 1563997771, "post_id": 57189676, "comment_id": 100890358, "body": "I see what you are saying though. I&#39;m talking about where the data is stored. You are talking about where a reference to that storage location is created. I think this answer addresses the OP&#39;s question sufficiently."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1563995152, "creation_date": 1563995152, "answer_id": 57189676, "question_id": 57189642, "link": "https://stackoverflow.com/questions/57189642/when-is-the-pointer-x-created-in-functionx/57189676#57189676", "title": "When is the pointer &amp;x created in function(&amp;x)?", "body": "<p>The pointers to <code>a</code> and <code>b</code> are created as results of evaluation of argument expressions in the function call</p>\n\n<pre><code>swap(&amp;a, &amp;b);\n     ^^  ^^\n</code></pre>\n\n<p>From the C Standard (6.5.3.2 Address and indirection operators)</p>\n\n<blockquote>\n  <p>3 The unary &amp; operator yields the address of its operand.</p>\n</blockquote>\n\n<p>Thus the expressions <code>&amp;a</code> and <code>&amp;b</code> have the type <code>int *</code> and yield the addresses of the variables <code>a</code> and <code>b</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1563995859, "post_id": 57189693, "comment_id": 100889547, "body": "not entirely true, a variable that does not have its address taken need not have an address! It is even so that the address-of operator might be the very reason for the variable having an address at <i>all</i>."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1563998205, "post_id": 57189693, "comment_id": 100890536, "body": "@AnttiHaapala: In the model used by the C standard, every object has an address. In an actual implementation, an object does not need to be implemented using storage and hence need not have an address. If a person is writing about the semantics as defined by the C standard, it is a correct statement to say that <code>a</code> and <code>b</code> have memory reserved for them and have addresses; this statement is entirely true."}, {"owner": {"reputation": 3224, "user_id": 1852723, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1311bb0d8cdbac11997aa8598913302?s=128&d=identicon&r=PG&f=1", "display_name": "Drunix", "link": "https://stackoverflow.com/users/1852723/drunix"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1564121560, "post_id": 57189693, "comment_id": 100933275, "body": "@Eric Postpischil That\u2018s not 100% correct. Menbers of bitfields don\u2018t have adresses. But I guess that is mainly an issue when developing HW drivers."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 3224, "user_id": 1852723, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1311bb0d8cdbac11997aa8598913302?s=128&d=identicon&r=PG&f=1", "display_name": "Drunix", "link": "https://stackoverflow.com/users/1852723/drunix"}, "edited": false, "score": 1, "creation_date": 1564136575, "post_id": 57189693, "comment_id": 100940436, "body": "@Drunix: Fine, but the objects under discussion are not bit-fields."}], "tags": [], "owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "is_accepted": false, "score": 2, "last_activity_date": 1563995208, "creation_date": 1563995208, "answer_id": 57189693, "question_id": 57189642, "link": "https://stackoverflow.com/questions/57189642/when-is-the-pointer-x-created-in-functionx/57189693#57189693", "title": "When is the pointer &amp;x created in function(&amp;x)?", "body": "<p>When you say that <code>a</code> and <code>b</code> are created, this essentially means that a chunk of memory is assigned to these variables, which is then initialized with the respective values. Those memory chunks have an address. The pointers in <code>swap()</code> are nothing but the addresses in memory where <code>a</code> and <code>b</code> are stored.</p>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1563997073, "post_id": 57189799, "comment_id": 100890083, "body": "All good info, but I think the jest of the question was for the function parameters. In that sense, the reference to the address would be created by use of the <i>address of</i> operator <code>&amp;</code> when used in the call to <code>swap(&amp;a, &amp;b);</code> passing to <code>swap</code> the addresses where <code>a</code> and <code>b</code> are located in memory. Good explanation on where and how those addresses come to be."}, {"owner": {"reputation": 2032, "user_id": 5199418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLvUH.jpg?s=128&g=1", "display_name": "h0r53", "link": "https://stackoverflow.com/users/5199418/h0r53"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1563997609, "post_id": 57189799, "comment_id": 100890299, "body": "Sure, I think that explanation is sufficient to answer the OP&#39;s question. Here I attempt to provide some lower level details to help clarify what is actually happening. I interpreted the question as, &quot;Are pointers to the variables created after the <code>&amp;</code> operation. Technically, no. But if the question is about C syntax and behavior, then the explanation you provided works well."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1563998444, "post_id": 57189799, "comment_id": 100890639, "body": "You make a really good point that few think about, that even the declaration of a variable with an immediate value, such as <code>int a = 3;</code> is really nothing more than the creation of a label to the memory location where the value is stored. That is the benefit understanding assembly brings."}], "tags": [], "owner": {"reputation": 2032, "user_id": 5199418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nLvUH.jpg?s=128&g=1", "display_name": "h0r53", "link": "https://stackoverflow.com/users/5199418/h0r53"}, "is_accepted": false, "score": 1, "last_activity_date": 1563996015, "last_edit_date": 1563996015, "creation_date": 1563995677, "answer_id": 57189799, "question_id": 57189642, "link": "https://stackoverflow.com/questions/57189642/when-is-the-pointer-x-created-in-functionx/57189799#57189799", "title": "When is the pointer &amp;x created in function(&amp;x)?", "body": "<p>All variables are stored at addresses in memory. Therefore, there exists a pointer for each variable you declare, even if you do not declare them as pointers. To understand what is actually happening it helps to know the basics of assembly language. The following is the relevant part of your code compiled in x86_64 and viewed via <code>objdump</code>.</p>\n\n<pre><code>6ee:    c7 45 f0 03 00 00 00    mov    DWORD PTR [rbp-0x10],0x3\n6f5:    c7 45 f4 05 00 00 00    mov    DWORD PTR [rbp-0xc],0x5\n6fc:    48 8d 55 f4             lea    rdx,[rbp-0xc]\n700:    48 8d 45 f0             lea    rax,[rbp-0x10]\n704:    48 89 d6                mov    rsi,rdx\n707:    48 89 c7                mov    rdi,rax\n70a:    e8 9b ff ff ff          call   6aa &lt;swap&gt;\n</code></pre>\n\n<p>At lines 0x6ee and 0x6f5 your variables are initialized. Notice that in this case they are actually stored on the stackframe at rbp-0x10 and rbp-0xc respectively. On the following two lines, the addresses of these variables are stored into registers rdx and rax, respectively, then moved into the appropriate registers (rsi and rdi) so that they can be passed the the swap function.</p>\n\n<p>To summarize, C is written at a higher level than the machine architecture that actually executes your code. In machine languages, variables are stored at locations in memory, which are accessible through pointers in the form of offsets to registers, memory sections, etc. In the example above you can see that the data 3 and 5 were \"stored in pointer locations\" the entire time.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10988119"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1563996015, "creation_date": 1563994999, "last_edit_date": 1563995476, "question_id": 57189642, "link": "https://stackoverflow.com/questions/57189642/when-is-the-pointer-x-created-in-functionx", "title": "When is the pointer &amp;x created in function(&amp;x)?", "body": "<p>When are the pointers to <code>a</code> and <code>b</code> created?\nIn the code below, I only declared/initiated <code>a</code> and <code>b</code>.\nBut the function <code>swap</code> treats them with <code>&amp;a</code> and <code>&amp;b</code> which are pointers.</p>\n\n<p>My question is, \nAre the pointers to a and b created at the same time with <code>int a</code> and <code>int b</code>?</p>\n\n<p>Or are they created when <code>swap</code> function was called with arguments <code>&amp;a</code> and <code>&amp;b</code>?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid swap(int *a, int *b)\n{\n    int temp;\n    temp = *a;\n    *a = *b;\n    *b = temp;\n}\n\nint main()\n{\n    int a = 3;\n    int b = 5;\n    swap(&amp;a, &amp;b);\n    printf(\"%d %d\", a, b);\n}\n</code></pre>\n"}, {"tags": ["c", "increment"], "comments": [{"owner": {"reputation": 259, "user_id": 4526054, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N5Ub5.jpg?s=128&g=1", "display_name": "brhans", "link": "https://stackoverflow.com/users/4526054/brhans"}, "edited": false, "score": 2, "creation_date": 1563994414, "post_id": 57189502, "comment_id": 100888972, "body": "But <code>6, 5</code> is the expected result ..."}, {"owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 0, "creation_date": 1563995227, "post_id": 57189502, "comment_id": 100889252, "body": "Welcome to StackOverflow! Please remember to mark one of the answers below as &quot;accepted&quot; if it answers your question. Good luck with your code!"}], "answers": [{"tags": [], "owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "is_accepted": false, "score": 4, "last_activity_date": 1563996169, "last_edit_date": 1563996169, "creation_date": 1563994428, "answer_id": 57189524, "question_id": 57189502, "link": "https://stackoverflow.com/questions/57189502/increment-operator-not-showing-expected-result/57189524#57189524", "title": "Increment operator not showing expected result", "body": "<p>You're using the post-increment operator.</p>\n\n<p>The line:</p>\n\n<pre><code>int y = x++;\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>int y = x;\nx += 1;\n</code></pre>\n\n<p>The increment of <code>x</code> occurs after the value of <code>x</code> is copied to <code>y</code>.</p>\n\n<p>The pre-increment operator is probably what you're looking for, which would be used like:</p>\n\n<pre><code>int y = ++x;\n</code></pre>\n\n<p>This is equivalent to:</p>\n\n<pre><code>int y;\nx += 1;\ny = x;\n</code></pre>\n\n<p>which appears to be what you expect.</p>\n"}, {"tags": [], "owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "is_accepted": false, "score": 3, "last_activity_date": 1563994458, "creation_date": 1563994458, "answer_id": 57189527, "question_id": 57189502, "link": "https://stackoverflow.com/questions/57189502/increment-operator-not-showing-expected-result/57189527#57189527", "title": "Increment operator not showing expected result", "body": "<p>The <code>++</code> operator behaves differently depending where it is. </p>\n\n<p><code>y = x++;</code> will get the value of x and then increment it. (Post-increment)</p>\n\n<p><code>y = ++x;</code> will increment x first, and then give that new value to y.  (Pre-increment)</p>\n\n<p>You're probably looking for pre-increment.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1563994555, "creation_date": 1563994555, "answer_id": 57189546, "question_id": 57189502, "link": "https://stackoverflow.com/questions/57189502/increment-operator-not-showing-expected-result/57189546#57189546", "title": "Increment operator not showing expected result", "body": "<p>You are using the postincrement operator.  It evaluates to the value of the variable <strong>before</strong> it is incremented, which is why <code>y</code> contains 5.</p>\n\n<p>For your case you want the preincrement operator.</p>\n\n<pre><code>y = ++x:\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11832174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e110b27fc733319fa0d57dd2a8ed3db5?s=128&d=identicon&r=PG&f=1", "display_name": "RATNAKAR MISHRA", "link": "https://stackoverflow.com/users/11832174/ratnakar-mishra"}, "is_accepted": false, "score": 0, "last_activity_date": 1563999930, "last_edit_date": 1563999930, "creation_date": 1563994660, "answer_id": 57189567, "question_id": 57189502, "link": "https://stackoverflow.com/questions/57189502/increment-operator-not-showing-expected-result/57189567#57189567", "title": "Increment operator not showing expected result", "body": "<p>You have used the post-increment operator (i.e <code>x++</code>) and assigned it to <code>y</code>, so <code>y</code> will be 6 and <code>x</code> will be 5.</p>\n\n<p>For your expected output, use the pre-increment operator, like so:</p>\n\n<pre><code>int main() {\n    int x = 5;\n    int y = ++x;\n    printf(\"%d, %d\", x, y);\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 11771151, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KZgHpnOJq6I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3req4B6hLEgoczcfGUWjKOPpo8uFZg/photo.jpg?sz=128", "display_name": "vidhi raghav", "link": "https://stackoverflow.com/users/11771151/vidhi-raghav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1563999930, "creation_date": 1563994299, "last_edit_date": 1563994972, "question_id": 57189502, "link": "https://stackoverflow.com/questions/57189502/increment-operator-not-showing-expected-result", "title": "Increment operator not showing expected result", "body": "<p>I am not getting the result I expected.</p>\n\n<pre><code>void main(){\n    int x = 5;\n    int y = x++;\n    printf(\"%d, %d\", x, y);\n}\n</code></pre>\n\n<p>I am getting <code>6, 5</code> as output, but I expected <code>6, 6</code>.</p>\n"}, {"tags": ["c", "gtk", "ubuntu-16.04", "ubuntu-18.04", "gtkprogressbar"], "comments": [{"owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "edited": false, "score": 1, "creation_date": 1564075503, "post_id": 57189419, "comment_id": 100921116, "body": "You are probably affected by <a href=\"https://discourse.gnome.org/t/gtkprogressbar-not-getting-updated/638/20\" rel=\"nofollow noreferrer\">discourse.gnome.org/t/gtkprogressbar-not-getting-updated/638&zwnj;&#8203;/20</a>"}], "answers": [{"tags": [], "owner": {"reputation": 357, "user_id": 6317692, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/08fc3b47488367878c7d9ad65d9a1687?s=128&d=identicon&r=PG&f=1", "display_name": "Leigh K", "link": "https://stackoverflow.com/users/6317692/leigh-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1565035854, "creation_date": 1565035854, "answer_id": 57365479, "question_id": 57189419, "link": "https://stackoverflow.com/questions/57189419/gtkprogressbar-pulsing-broken-in-ubuntu-18-04/57365479#57365479", "title": "GtkProgressBar pulsing broken in Ubuntu 18.04?", "body": "<p>It appears that this is indeed a bug in GTK and was patched in GTK version 3.24.9 and above:</p>\n\n<p><a href=\"https://gitlab.gnome.org/GNOME/gtk/issues/1612#note_573451\" rel=\"nofollow noreferrer\">https://gitlab.gnome.org/GNOME/gtk/issues/1612#note_573451</a></p>\n\n<p>You cannot currently dist-upgrade higher than 3.22.30, which means you will have to compile from source for now if you want the patch.</p>\n"}], "owner": {"reputation": 357, "user_id": 6317692, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/08fc3b47488367878c7d9ad65d9a1687?s=128&d=identicon&r=PG&f=1", "display_name": "Leigh K", "link": "https://stackoverflow.com/users/6317692/leigh-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577846856, "creation_date": 1563993956, "last_edit_date": 1577846856, "question_id": 57189419, "link": "https://stackoverflow.com/questions/57189419/gtkprogressbar-pulsing-broken-in-ubuntu-18-04", "title": "GtkProgressBar pulsing broken in Ubuntu 18.04?", "body": "<p>I have a GTK application that depends on pulsing a GtkProgressBar to notify the user that the program is running. This action works perfectly on Ubuntu 16.04 (GTK version 3.20.8) but I am noticing that pulsing does not work correctly - and quickly fails altogether - on Ubuntu 18.04 (GTK version 3.22.30). I am thinking that this is a bug in GTK itself, but I can't seem to find any information anywhere, and if it is indeed a bug, it seems like a big one. I was hoping to get some clarification from the community. The minimal example C code is as follows:</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n#include &lt;gdk/gdk.h&gt;\n#include &lt;glib.h&gt;\n#include &lt;glib/gprintf.h&gt;\n\nGtkBuilder* builder;\ngboolean CONTINUE_PULSING = TRUE;\nguint pulsing;                      // The ID returned by g_timeout_add\n\ngboolean pulse_progress_bar(__attribute__((unused)) gpointer user_data)\n{\n  GtkProgressBar * pbar = GTK_PROGRESS_BAR(gtk_builder_get_object(builder, \"pbar\"));\n  gtk_progress_bar_set_pulse_step(GTK_PROGRESS_BAR(pbar), 0.1); // Sets the fraction of total progress bar length to move\n  gtk_progress_bar_pulse(GTK_PROGRESS_BAR(pbar));\n\n  return CONTINUE_PULSING;\n}\n\nvoid run_press_event(__attribute__((unused)) GtkWidget * widget, __attribute__((unused)) GdkEventButton * event, __attribute__((unused)) gpointer user_data)\n{\n  // Start the progress bar going\n  GtkProgressBar * pbar = GTK_PROGRESS_BAR(gtk_builder_get_object(builder, \"pbar\"));\n\n  // g_timeout_add will call pulse_progress_bar every 100ms (to keep it moving)\n  pulsing = g_timeout_add(100, pulse_progress_bar, GTK_PROGRESS_BAR(pbar));\n}\n\nvoid stop_press_event(__attribute__((unused)) GtkWidget * widget, __attribute__((unused)) GdkEventButton * event)\n{\n  // Stop the progress bar going\n  g_source_remove(pulsing);\n}\n\nvoid main_window_destroy(__attribute__((unused)) GtkWidget *widget, __attribute__((unused)) gpointer data)\n{\n  gtk_main_quit ();\n}\n\nint main(int argc, char *argv[])\n{\n  GtkWidget * window ;\n  GError * err = NULL ;\n\n  gtk_init(&amp;argc, &amp;argv);\n\n  builder = gtk_builder_new();\n\n  gtk_builder_add_from_file(builder, \"pulse.glade\", &amp;err);\n\n  if (err != NULL)\n  {\n    fprintf(stderr, \"Unable to read glade file: %s\\n\", err -&gt; message);\n    g_error_free(err);\n\n    return 1;\n  }\n\n  window = GTK_WIDGET(gtk_builder_get_object(builder, \"window_main\"));\n\n  gtk_builder_connect_signals(builder, builder);\n\n  gtk_widget_show_all(window);\n\n  gtk_main();\n\n  return 0;\n}\n</code></pre>\n\n<p>And the glade file XML definition to be read into GtkBuilder is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!-- Generated with glade 3.20.0 --&gt;\n&lt;interface&gt;\n  &lt;requires lib=\"gtk+\" version=\"3.20\"/&gt;\n  &lt;object class=\"GtkWindow\" id=\"window_main\"&gt;\n    &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n    &lt;property name=\"window_position\"&gt;center-always&lt;/property&gt;\n    &lt;signal name=\"destroy\" handler=\"main_window_destroy\" swapped=\"no\"/&gt;\n    &lt;child&gt;\n      &lt;object class=\"GtkBox\"&gt;\n        &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n        &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n        &lt;property name=\"orientation\"&gt;vertical&lt;/property&gt;\n        &lt;child&gt;\n          &lt;object class=\"GtkProgressBar\" id=\"pbar\"&gt;\n            &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n            &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n            &lt;property name=\"fraction\"&gt;0.10000000000000001&lt;/property&gt;\n          &lt;/object&gt;\n          &lt;packing&gt;\n            &lt;property name=\"expand\"&gt;False&lt;/property&gt;\n            &lt;property name=\"fill\"&gt;True&lt;/property&gt;\n            &lt;property name=\"position\"&gt;0&lt;/property&gt;\n          &lt;/packing&gt;\n        &lt;/child&gt;\n        &lt;child&gt;\n          &lt;object class=\"GtkButton\" id=\"run_button\"&gt;\n            &lt;property name=\"label\" translatable=\"yes\"&gt;RUN&lt;/property&gt;\n            &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n            &lt;property name=\"can_focus\"&gt;True&lt;/property&gt;\n            &lt;property name=\"receives_default\"&gt;True&lt;/property&gt;\n            &lt;signal name=\"clicked\" handler=\"run_press_event\" swapped=\"no\"/&gt;\n          &lt;/object&gt;\n          &lt;packing&gt;\n            &lt;property name=\"expand\"&gt;False&lt;/property&gt;\n            &lt;property name=\"fill\"&gt;True&lt;/property&gt;\n            &lt;property name=\"position\"&gt;1&lt;/property&gt;\n          &lt;/packing&gt;\n        &lt;/child&gt;\n        &lt;child&gt;\n          &lt;object class=\"GtkButton\" id=\"stop_button\"&gt;\n            &lt;property name=\"label\" translatable=\"yes\"&gt;STOP&lt;/property&gt;\n            &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n            &lt;property name=\"can_focus\"&gt;True&lt;/property&gt;\n            &lt;property name=\"receives_default\"&gt;True&lt;/property&gt;\n            &lt;signal name=\"clicked\" handler=\"stop_press_event\" swapped=\"no\"/&gt;\n          &lt;/object&gt;\n          &lt;packing&gt;\n            &lt;property name=\"expand\"&gt;False&lt;/property&gt;\n            &lt;property name=\"fill\"&gt;True&lt;/property&gt;\n            &lt;property name=\"position\"&gt;2&lt;/property&gt;\n          &lt;/packing&gt;\n        &lt;/child&gt;\n      &lt;/object&gt;\n    &lt;/child&gt;\n  &lt;/object&gt;\n&lt;/interface&gt;\n</code></pre>\n\n<p>Name the C file \"pbar.c\" and the glade file \"pulse.glade\", then compile using:</p>\n\n<pre><code>gcc -Wall -Wextra -o pbar pbar.c $(pkg-config gtk+-3.0 --cflags --libs) -rdynamic -lm\n</code></pre>\n\n<p>If you are on Ubuntu 16.04 you will notice that the pulse on the progress bar is consistent and does not decay by removing the source ID (i.e. hitting the stop button), but on Ubuntu 18.04 the progress bar starts off fine, but as soon as the source ID is removed, and the pulsing is started again, the pulsing becomes choppy and starts to decay, to the point that several combinations of RUN/STOP cause the progress bar to fail to pulse at all. I cannot determine the cause of this, and it's a big problem for porting my GTK application over to Ubuntu 18.04. Any help would be appreciated. Thanks!</p>\n"}, {"tags": ["c", "linux", "multiprocessing", "shared-memory"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1563991778, "post_id": 57188832, "comment_id": 100887838, "body": "How do you know which is the last exit node?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1563991867, "post_id": 57188832, "comment_id": 100887882, "body": "Typically, what you want to know is which node is the first to start. That node should clean up any messes that were left behind, and then create a new shared memory segment."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1563993591, "post_id": 57188832, "comment_id": 100888646, "body": "You can get the behavior you describe: After creating and mapping a shared memory object, use <code>shm_unlink</code> to disassociate it from the name. It will continue existing until the last reference is closed, such as when the last process with it mapped unmaps it."}, {"owner": {"reputation": 2017, "user_id": 6861219, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/141586299631822/picture?type=large", "display_name": "Ziqi Liu", "link": "https://stackoverflow.com/users/6861219/ziqi-liu"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1563994582, "post_id": 57188832, "comment_id": 100889031, "body": "@user3386109 maybe through a file lock or something.... since I can know how much processes are opening a file and even when a process crash the reference count on that file will decrease."}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 5, "last_activity_date": 1563999432, "last_edit_date": 1563999432, "creation_date": 1563992495, "answer_id": 57189070, "question_id": 57188832, "link": "https://stackoverflow.com/questions/57188832/what-happen-if-fail-to-delete-a-shared-memory-segment/57189070#57189070", "title": "what happen if fail to delete a shared memory segment", "body": "<p>The Posix standard requires that (emphasis added):</p>\n\n<blockquote>\n  <p>When a shared memory object is created, the state of the shared memory object, including all data associated with the shared memory object, <strong>persists until the shared memory object is unlinked</strong> and all other references are gone. It is unspecified whether the name and shared memory object state remain valid after a system reboot.</p>\n</blockquote>\n\n<p>In other words, shared memory objects are basically like temporary files; they are intended to be persistent, at least for the duration of a session. All the processes using a particular named shared memory object could crash, and you could still fire up a new process and recover the contents of the shared memory object.</p>\n\n<p>Since Linux attempts to be consistent with the Posix standard, it implements shared memory objects in the same way, which means that they hang around (until a reboot) unless cleaned up manually.</p>\n\n<p>A shared memory object which is no longer in use by any active process is not exactly a memory leak, since it will rapidly get swapped out if there is memory pressure (and swapping is enabled). However, it's a good idea to periodically clean up your shared memory objects yourself. There are a variety of strategies for doing so, depending on the precise nature of your application.</p>\n\n<p>A simple (but by no means universal) solution is to unlink the shared memory object as soon as you know that no new processes will need to open it. Unlinking the object effectively removes its name so that it is no longer possible to <code>shm_open</code> it, but the unlinked object persists as long as some process has an open reference to it. (The OS does keep a reference count; however, the name counts as a reference so as long as the name exists, the object does, too.) This same strategy is also often used by applications which create temporary files.</p>\n"}], "owner": {"reputation": 2017, "user_id": 6861219, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/141586299631822/picture?type=large", "display_name": "Ziqi Liu", "link": "https://stackoverflow.com/users/6861219/ziqi-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 820, "favorite_count": 0, "accepted_answer_id": 57189070, "answer_count": 1, "score": 2, "last_activity_date": 1563999432, "creation_date": 1563991391, "question_id": 57188832, "link": "https://stackoverflow.com/questions/57188832/what-happen-if-fail-to-delete-a-shared-memory-segment", "title": "what happen if fail to delete a shared memory segment", "body": "<p>According to my observation, if I terminate my process without removing the shared memory segment, that shared memory segment will just stay there, in <code>/dev/shm/xxxx</code>, even no other processes are using it.  <strong>Does it mean a memory leak ?</strong>(and after I restart my machine it will disappear) Why doesn't linux provide a mechanism to maintain a reference count on shared memory and then the system can delete it when no process is using it.</p>\n\n<p>Since process might crash, or I just failed to catch some exceptions....anyway there is a large chance that I fail to remove that shared memory segment when process terminated abnormally.</p>\n\n<p>My use case: I'm running several working processes who share the same memory segment for communication. And there is no master node to coordinate things. The strategy is the last exit node will close the shared memory segment.</p>\n\n<p>By the way I'm using <code>boost::interprocess</code> instead of sytem level <code>shm_open</code> but I think their behavior should be the same.</p>\n"}, {"tags": ["c", "arrays", "max", "insertion-sort"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1563991318, "post_id": 57188743, "comment_id": 100887604, "body": "Can the maximum numbers have the same values (that is are duplicates allowed) or shall all three  maximum numbers have different values?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1563991323, "post_id": 57188743, "comment_id": 100887606, "body": "Build an array of the largest values in all arrays, sort it descending, take the top 3. If you need to keep the day info, then create an array of struct holding date and highest, sort descending by highest and take first 3."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1563991369, "post_id": 57188743, "comment_id": 100887629, "body": "Finding the highest numbers in multiple arrays is no different than finding the highest numbers in a single array. So start by writing code to find the three highest numbers in a single array."}, {"owner": {"reputation": 9, "user_id": 11832035, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dfho4CJaJ_o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-_UhmEXQXGAFVTjPGUrgE2lUwDQ/photo.jpg?sz=128", "display_name": "muhamad rifqi", "link": "https://stackoverflow.com/users/11832035/muhamad-rifqi"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1563991536, "post_id": 57188743, "comment_id": 100887713, "body": "how do i sort all the largest numbers from multiple arrays into one and displaying the top 3? @DavidC.Rankin"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1563991901, "post_id": 57188743, "comment_id": 100887898, "body": "@DavidC.Rankin Not going to work... All 3 largest elements might be very well in a single array. One needs to &quot;flatten&quot; the arrays into a one and then perform a simple scanning for 3 largest elements."}, {"owner": {"reputation": 1267, "user_id": 7521600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a118ea176c1fb59d35087439ef34edc8?s=128&d=identicon&r=PG&f=1", "display_name": "Yuvraj Jaiswal", "link": "https://stackoverflow.com/users/7521600/yuvraj-jaiswal"}, "edited": false, "score": 1, "creation_date": 1563992080, "post_id": 57188743, "comment_id": 100887981, "body": "Can you please add here what all have you tried? Some reproducible piece of code would be a good starter place."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1563992557, "post_id": 57188743, "comment_id": 100888184, "body": "You don&#39;t need to sort anything. One simple way is to make three passes of the data. The first finds the highest value. The second finds the highest value that is less than the first. Similar the third. If you count duplicate occurrences of those highest values you can then report either way as suggested by Vlad. Having done that you can make it more efficient by making a single pass of the data."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1563992864, "post_id": 57188743, "comment_id": 100888340, "body": "@EugeneSh.good catch, I was under the impression he wanted the highest from 3 separate arrays... In that case you know the total number of elements, create an array to hold all elements and then sort that in descending order (using <code>qsort</code>) and then take the top 3 -- same comment regarding the struct applies, if needed."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1563993481, "post_id": 57189224, "comment_id": 100888606, "body": "I like that approach too <code>:)</code>"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1563993515, "post_id": 57189224, "comment_id": 100888619, "body": "@DavidC.Rankin Glad to see you.:)"}, {"owner": {"reputation": 9, "user_id": 11832035, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dfho4CJaJ_o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-_UhmEXQXGAFVTjPGUrgE2lUwDQ/photo.jpg?sz=128", "display_name": "muhamad rifqi", "link": "https://stackoverflow.com/users/11832035/muhamad-rifqi"}, "edited": false, "score": 0, "creation_date": 1564151459, "post_id": 57189224, "comment_id": 100948569, "body": "can do in C programming?"}, {"owner": {"reputation": 9, "user_id": 11832035, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dfho4CJaJ_o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-_UhmEXQXGAFVTjPGUrgE2lUwDQ/photo.jpg?sz=128", "display_name": "muhamad rifqi", "link": "https://stackoverflow.com/users/11832035/muhamad-rifqi"}, "edited": false, "score": 0, "creation_date": 1564155245, "post_id": 57189224, "comment_id": 100950703, "body": "@VladfromMoscow got it Thanks!"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1563993465, "last_edit_date": 1563993465, "creation_date": 1563993134, "answer_id": 57189224, "question_id": 57188743, "link": "https://stackoverflow.com/questions/57188743/need-to-display-top-3-highest-number-in-multiple-arrays/57189224#57189224", "title": "Need to display top 3 highest number in multiple arrays", "body": "<p>We, beginners, should help each other.:)</p>\n\n<p>A simple way to do the task is to declare an array of the arrays.</p>\n\n<p>Also to declare an array for the three largest elements. And then to use the insertion sort to include a current largest element to the array of the largest elements.</p>\n\n<p>Here is a demonstrative program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    double feb10[] = { 25.0, 24.8, 24.8, 24.7, 25.1, 25.4, 25.1, 25.1, 25.0, 24.5, 24.3, 24.1 };\n    double feb11[] = { 23.8, 23.3, 22.9, 22.8, 22.9, 23.3, 23.1, 23.7, 23.0, 22.6, 22.9, 22.8 };\n    double feb12[] = { 22.8, 22.6, 22.8, 22.8, 24.2, 25.3, 24.8, 24.2, 24.2, 24.1, 24.7, 24.8 };\n    double feb13[] = { 24.9, 25.0, 24.9, 25.1, 25.4, 25.7, 25.9, 25.4, 25.1, 24.9, 25.2, 25.0 };\n    double feb14[] = { 25.0, 24.7, 24.6, 24.5, 25.3, 25.1, 25.2, 25.1, 24.9, 24.1, 24.1, 24.2 };\n\n    double * a[] = { feb10, feb11, feb12, feb13, feb14 };\n    const size_t M = sizeof( a ) / sizeof( *a );\n    const size_t N = sizeof( feb10 ) / sizeof( *feb10 );\n\n    enum { LARGEST_SIZE = 3 };  \n    double max_values[LARGEST_SIZE] = { a[0][0] };\n    size_t filled = 1;\n\n    for ( size_t i = 0; i &lt; M; i++ )\n    {\n        for ( size_t j = 0; j &lt; N; j++ )\n        {\n            size_t pos = 0;\n            while ( pos &lt; filled &amp;&amp; !( max_values[pos] &lt; a[i][j] ) ) ++pos;\n\n            if ( pos == filled )\n            {\n                // If the array of largest elements is not filled then\n                // just append the array with the current largest element. \n                if ( filled != LARGEST_SIZE )\n                {\n                    max_values[filled++]  = a[i][j];\n                }                   \n            }\n            else\n            {\n                // Here is used the insertion sort\n                for ( size_t k = LARGEST_SIZE; --k != pos; ) max_values[k] = max_values[k-1];\n                max_values[pos] = a[i][j];\n            }\n        }\n    }\n\n    for ( size_t i = 0; i &lt; LARGEST_SIZE; i++ ) printf( \"%.1f \", max_values[i] );\n    putchar( '\\n' );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>25.9 25.7 25.4\n</code></pre>\n\n<p>It seems you was expecting this result.:)</p>\n"}], "owner": {"reputation": 9, "user_id": 11832035, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dfho4CJaJ_o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-_UhmEXQXGAFVTjPGUrgE2lUwDQ/photo.jpg?sz=128", "display_name": "muhamad rifqi", "link": "https://stackoverflow.com/users/11832035/muhamad-rifqi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1563993465, "creation_date": 1563991025, "last_edit_date": 1563993272, "question_id": 57188743, "link": "https://stackoverflow.com/questions/57188743/need-to-display-top-3-highest-number-in-multiple-arrays", "title": "Need to display top 3 highest number in multiple arrays", "body": "<p>Don't know how to find the top 3 highest number and how to display only the top 3 highest number</p>\n\n<pre><code>float feb10[] = { 25.0, 24.8, 24.8, 24.7, 25.1, 25.4, 25.1, 25.1, 25.0, 24.5, 24.3, 24.1 };\n\nfloat feb11[] = { 23.8, 23.3, 22.9, 22.8, 22.9, 23.3, 23.1, 23.7, 23.0, 22.6, 22.9, 22.8 };\n\nfloat feb12[] = { 22.8, 22.6, 22.8, 22.8, 24.2, 25.3, 24.8, 24.2, 24.2, 24.1, 24.7, 24.8 };\n\nfloat feb13[] = { 24.9, 25.0, 24.9, 25.1, 25.4, 25.7, 25.9, 25.4, 25.1, 24.9, 25.2, 25.0 };\n\nfloat feb14[] = { 25.0, 24.7, 24.6, 24.5, 25.3, 25.1, 25.2, 25.1, 24.9, 24.1, 24.1, 24.2 };\n</code></pre>\n\n<p>Results should be</p>\n\n<pre><code>1st highest is 25.9\n\n2nd highest is 25.7\n\njoint 3rd highest is 25.4\n</code></pre>\n"}, {"tags": ["c", "arrays", "loops", "for-loop", "memory-management"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1563987269, "post_id": 57187844, "comment_id": 100885805, "body": "Your code could really benefit from meaningful variable names."}, {"owner": {"reputation": 165, "user_id": 11661915, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mNm4t10kwmM/AAAAAAAAAAI/AAAAAAAAAN8/hbNESEzPzeg/photo.jpg?sz=128", "display_name": "Aru Viser", "link": "https://stackoverflow.com/users/11661915/aru-viser"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1563987370, "post_id": 57187844, "comment_id": 100885842, "body": "ah yes. i will update them in a minute."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1563987648, "post_id": 57187844, "comment_id": 100885945, "body": "How does that code compile when you have undefined variables like <code>count</code> in it?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1563987649, "post_id": 57187844, "comment_id": 100885947, "body": "@Aru Viser What the code is supposed to do?"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1563987730, "post_id": 57187844, "comment_id": 100885974, "body": "@ChrisTurner OP is renaming their variables... in progress . ."}, {"owner": {"reputation": 165, "user_id": 11661915, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mNm4t10kwmM/AAAAAAAAAAI/AAAAAAAAAN8/hbNESEzPzeg/photo.jpg?sz=128", "display_name": "Aru Viser", "link": "https://stackoverflow.com/users/11661915/aru-viser"}, "reply_to_user": {"reputation": 1196, "user_id": 5333936, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/tuYyF.png?s=128&g=1", "display_name": "Blobonat", "link": "https://stackoverflow.com/users/5333936/blobonat"}, "edited": false, "score": 1, "creation_date": 1563987737, "post_id": 57187844, "comment_id": 100885979, "body": "@Blobonat, that won&#39;t do."}, {"owner": {"reputation": 165, "user_id": 11661915, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mNm4t10kwmM/AAAAAAAAAAI/AAAAAAAAAN8/hbNESEzPzeg/photo.jpg?sz=128", "display_name": "Aru Viser", "link": "https://stackoverflow.com/users/11661915/aru-viser"}, "edited": false, "score": 0, "creation_date": 1563987818, "post_id": 57187844, "comment_id": 100886009, "body": "ah sorry. i didn&#39;t do the edits properly."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1563987930, "post_id": 57187844, "comment_id": 100886060, "body": "Sorry, but your code is not close to a solution to the problem. The input starts with two numbers, the number of arrays <i>n</i> and the number of queries <i>q</i>. So first you have to read those. (I see you are making edits and appear to be using <code>index</code> for <i>n</i> and <code>query</code> for <i>q</i>. You might do better either to stick to the names in the problem or to use more descriptive names like <code>NumberOfArrays</code> instead of <code>index</code>.) Then the input has <i>n</i> lines, each with some number of values. So your program needs to read each of those lines\u2026"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1563987960, "post_id": 57187844, "comment_id": 100886071, "body": "So your program needs to be able to process lines with varying numbers of values in them."}, {"owner": {"reputation": 165, "user_id": 11661915, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mNm4t10kwmM/AAAAAAAAAAI/AAAAAAAAAN8/hbNESEzPzeg/photo.jpg?sz=128", "display_name": "Aru Viser", "link": "https://stackoverflow.com/users/11661915/aru-viser"}, "edited": false, "score": 0, "creation_date": 1563987972, "post_id": 57187844, "comment_id": 100886080, "body": "the edits are done. sorry for the inconveniences"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1563988113, "post_id": 57187844, "comment_id": 100886142, "body": "That initial work of reading the values would be inside one loop that iterates <i>n</i> times, once for each line. <b>After</b> that loop is done, you need a <b>separate</b> loop to read and process the queries. Your current program has code to handle the queries inside the main loop. That cannot work. So, you need to redesign your program considerably. To start with, just forget about the queries. Write code to read the values and store them and then, after they are all read, print them out in order. Once that is working, add code to handle the queries."}, {"owner": {"reputation": 153, "user_id": 7804906, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0Jslg_nlhBc/AAAAAAAAAAI/AAAAAAAAAG4/XAhCEA7Avl8/photo.jpg?sz=128", "display_name": "ToninGuy3n", "link": "https://stackoverflow.com/users/7804906/toninguy3n"}, "edited": false, "score": 0, "creation_date": 1563988215, "post_id": 57187844, "comment_id": 100886193, "body": "Been a while since I&#39;ve done C, but shouldn&#39;t you use malloc to allocate memory for the array if a value cannot be provided before compilation?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1563988416, "post_id": 57187844, "comment_id": 100886297, "body": "Note that, in order to keep the values you are storing, you must dynamically allocate memory using <code>malloc</code>. That should be done once for each line. For each line, after you read its <i>k</i>, allocate space for <i>k</i> values, then store the values in that space. Additionally, you will need to record those allocates spaces. To do that, after you read the <i>n</i> at the beginning of the program, allocate space for <i>n</i> pointers to values. Then, as you get space for each line, record the address of the space in that array you allocate at the beginning."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 153, "user_id": 7804906, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0Jslg_nlhBc/AAAAAAAAAAI/AAAAAAAAAG4/XAhCEA7Avl8/photo.jpg?sz=128", "display_name": "ToninGuy3n", "link": "https://stackoverflow.com/users/7804906/toninguy3n"}, "edited": false, "score": 2, "creation_date": 1563991046, "post_id": 57187844, "comment_id": 100887484, "body": "@ToninGuy3n I feel empathy for you. <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">Variable Length Array became legal with C99</a>."}, {"owner": {"reputation": 153, "user_id": 7804906, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0Jslg_nlhBc/AAAAAAAAAAI/AAAAAAAAAG4/XAhCEA7Avl8/photo.jpg?sz=128", "display_name": "ToninGuy3n", "link": "https://stackoverflow.com/users/7804906/toninguy3n"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1564021938, "post_id": 57187844, "comment_id": 100896065, "body": "@gsamaras Interesting. Just did a quick look up on it, and it&#39;s apparently not compatible on certain compilers. Another interesting read on how the <a href=\"https://www.phoronix.com/scan.php?page=news_item&amp;px=Linux-Kills-The-VLA\" rel=\"nofollow noreferrer\">Linux Kernel removes uses of VLAs</a>"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 153, "user_id": 7804906, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0Jslg_nlhBc/AAAAAAAAAAI/AAAAAAAAAG4/XAhCEA7Avl8/photo.jpg?sz=128", "display_name": "ToninGuy3n", "link": "https://stackoverflow.com/users/7804906/toninguy3n"}, "edited": false, "score": 0, "creation_date": 1564071297, "post_id": 57187844, "comment_id": 100919325, "body": "Worth sharing link @ToninGuy3n, but if it&#39;s Standard C99, it&#39;s Standard . . ;)"}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 7804906, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0Jslg_nlhBc/AAAAAAAAAAI/AAAAAAAAAG4/XAhCEA7Avl8/photo.jpg?sz=128", "display_name": "ToninGuy3n", "link": "https://stackoverflow.com/users/7804906/toninguy3n"}, "edited": false, "score": 1, "creation_date": 1563988325, "post_id": 57188057, "comment_id": 100886243, "body": "OP isn&#39;t asking for code solution. They&#39;re asking for an explanation on what they did wrong."}, {"owner": {"reputation": 289, "user_id": 9108344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-shxPr-h8zN4/AAAAAAAAAAI/AAAAAAAAACs/xr9Ipc08J_k/photo.jpg?sz=128", "display_name": "Midnight Exigent", "link": "https://stackoverflow.com/users/9108344/midnight-exigent"}, "reply_to_user": {"reputation": 153, "user_id": 7804906, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0Jslg_nlhBc/AAAAAAAAAAI/AAAAAAAAAG4/XAhCEA7Avl8/photo.jpg?sz=128", "display_name": "ToninGuy3n", "link": "https://stackoverflow.com/users/7804906/toninguy3n"}, "edited": false, "score": 0, "creation_date": 1563990420, "post_id": 57188057, "comment_id": 100887203, "body": "I did not give the solution, as what he did wrong was explained by someone else, this is supposed to be a hint on how to solve the problem."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1563991141, "post_id": 57188057, "comment_id": 100887522, "body": "Hi @WalidJabari probably by other you mean me! :) I updated my answer with a fix BTW.. I understand your intention for your hint, but notice that <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">Variable Length Array became legal with C99</a>."}, {"owner": {"reputation": 289, "user_id": 9108344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-shxPr-h8zN4/AAAAAAAAAAI/AAAAAAAAACs/xr9Ipc08J_k/photo.jpg?sz=128", "display_name": "Midnight Exigent", "link": "https://stackoverflow.com/users/9108344/midnight-exigent"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1563992167, "post_id": 57188057, "comment_id": 100888020, "body": "Hi @gsamaras indeed, I just read your updated answer. Although VLA are legal, some compilers (like MSVC) will not allow something like <code>int n = 5; int arr[n];</code> I personally prefer to stay away from VLA"}], "tags": [], "owner": {"reputation": 289, "user_id": 9108344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-shxPr-h8zN4/AAAAAAAAAAI/AAAAAAAAACs/xr9Ipc08J_k/photo.jpg?sz=128", "display_name": "Midnight Exigent", "link": "https://stackoverflow.com/users/9108344/midnight-exigent"}, "is_accepted": false, "score": 1, "last_activity_date": 1563994087, "last_edit_date": 1563994087, "creation_date": 1563988141, "answer_id": 57188057, "question_id": 57187844, "link": "https://stackoverflow.com/questions/57187844/variable-sized-array-in-c/57188057#57188057", "title": "Variable sized array in C", "body": "<p>Hint : Variable sized arrays need to be dynamically allocated, here's how to it in C</p>\n\n<pre><code>int rows; \nscanf(\"%d\",&amp;rows);\n\n//2D array \nint**A = malloc(sizeof(int*)*rows); //allocate number of rows\n\n//for each row allocate number of colums \nfor(int i = 0; i &lt; rows; i++)\n{\n   int cols;\n   scanf(\"%d\",&amp;cols);\n   A[i] = malloc(sizeof(int)*cols);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 4, "last_activity_date": 1563993140, "last_edit_date": 1563993140, "creation_date": 1563988201, "answer_id": 57188073, "question_id": 57187844, "link": "https://stackoverflow.com/questions/57187844/variable-sized-array-in-c/57188073#57188073", "title": "Variable sized array in C", "body": "<h2><sub>Disclaimer</sub></h2>\n\n<p><sub>I didn't even click the link, so I do not know if the solution is correct, but assuming that you got the logic right..\n</sub></p>\n\n<h2>The problem</h2>\n\n<p>is that you populate in stages a <strong>local to the body of the for loop 2D array</strong>, which at the end of your processing, you expect to have it accessible (I mean the complete matrix, populated from every single iteration of the for loop).</p>\n\n<p>Instead, you get only the <em>last's iteration declared array</em>, that's why you get only the <code>A[1][3]</code> element right, and not the <code>A[0][1]</code>, since the 2nd row is populated in the last (2nd iteration), while the 1st row is populated in the first iteration (of the firstly declared <code>A</code>), which goes <strong>out of scope</strong> as soon as the first iteration terminates.</p>\n\n<h2>The fix</h2>\n\n<p>So, what you need to fix this is to dynamically allocate memory for your matrix, and every time a new dimension for the columns is inputed, resize it with <a href=\"http://www.cplusplus.com/reference/cstdlib/realloc/\" rel=\"nofollow noreferrer\"><code>realloc()</code></a>.</p>\n\n<p>I believe that the explanation I have in <a href=\"https://gsamaras.wordpress.com/code/2d-dynamic-array-c/\" rel=\"nofollow noreferrer\">2D dynamic array (C)</a> will help you, since what you want is the number of rows fixed, and the number of columns adjustable on every iteration.</p>\n\n<p>Below is an illustration based on the link I shared above, which visualizes what exactly is your matrix (a 1D array of pointers), and shows how the code below manipulates it:</p>\n\n<p><a href=\"https://i.stack.imgur.com/f6kjv.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f6kjv.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Full code example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int index,query;\n    int count1 = 0;\n    scanf(\"%d%d\",&amp;index,&amp;query);\n\n    // An array of `index` (e.g. 2) pointers to integers\n    int *A[index];\n    // Initialize all the pointers to NULL\n    for(int k = 0; k &lt; index; ++k)\n      A[k] = NULL;\n\n    for(int i=0;i&lt;index;i++)\n    {\n        int b;\n        scanf(\"%d\",&amp;b);\n\n        // Replaced your 'int A[index][b];' with the following:\n        // Every time a new number of columns (that's 'b') is read,\n        // we need to adjust the numbers of columns our matrix ('A') has.\n        // That means, that for every pointer (row), we need to re-allocate\n        // the number of columns it points to, which is basically a 1D array, of dimension 'b'\n        for(int k = 0; k &lt; index; ++k)\n          A[k] = realloc(A[k], b * sizeof(int) );\n\n        for(int j=0;j&lt;b;j++)\n        {\n            scanf(\"%d\",&amp;A[i][j]);\n        }\n        count1 ++;\n        if(count1&lt;index)\n        {\n            continue;\n        }\n        int count2=0;\n        while(count2&lt;query)\n        {\n            int d,e;\n            scanf(\"%d%d\",&amp;d,&amp;e);\n            printf(\"%d\\n\",A[d][e]);\n            count2++;\n        }\n    }\n\n    // Free the dynamically allocated memory\n    for(int k = 0; k &lt; index; ++k)\n          free(A[k]);\n    return 0;\n}\n</code></pre>\n\n<p>Output (for the input provided):</p>\n\n<pre><code>5\n9\n</code></pre>\n\n<p>Pro-tip: The typical methodology of calling <code>realloc()</code> is to use a specific pointer for the reallocation, test that pointer and, if everything worked out ok, change the old pointer, as explained in <a href=\"https://stackoverflow.com/questions/3850749/does-realloc-overwrite-old-contents\">Does realloc overwrite old contents?</a>, which I didn't do in that post for the sake of being \"laconic\".</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1563989334, "last_edit_date": 1563989334, "creation_date": 1563988999, "answer_id": 57188262, "question_id": 57187844, "link": "https://stackoverflow.com/questions/57187844/variable-sized-array-in-c/57188262#57188262", "title": "Variable sized array in C", "body": "<p>The C VLA is not suitable here. It seems you need to allocate memory dynamically. The only VLA that can be used is an array of pointers to other arrays. All other arrays should be allocated dynamically. </p>\n\n<p>Something like the following.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main( void ) \n{\n    size_t number_of_arrays;\n    size_t number_of_queries;\n\n    scanf( \"%zu%zu\", &amp;number_of_arrays, &amp;number_of_queries );\n\n    int **a = malloc( number_of_arrays * sizeof( int * ) );\n\n    for ( size_t i = 0; i &lt; number_of_arrays; i++ )\n    {\n        size_t size;\n        scanf( \"%zu\", &amp;size );\n\n        a[i] = malloc( size * sizeof( int ) );\n\n        for ( size_t j = 0; j &lt; size; j++ ) scanf( \"%d\", &amp;a[i][j] );\n    }\n\n    for ( size_t i = 0; i &lt; number_of_queries; i++ )\n    {\n        size_t array_index;\n        size_t element_index;\n\n        scanf( \"%zu%zu\", &amp;array_index, &amp;element_index );\n\n        printf( \"%d\\n\", a[array_index][element_index] );\n    }\n\n    for ( size_t i = 0; i &lt; number_of_arrays; i++ ) free( a[i] );\n    free( a );                                                         \n}\n</code></pre>\n\n<p>If to input</p>\n\n<pre><code>2 2\n3 1 5 4\n5 1 2 8 9 3\n0 1\n1 3\n</code></pre>\n\n<p>then the program output will be</p>\n\n<pre><code>5\n9\n</code></pre>\n\n<p>As for your code then it is invalid. For example the variable <code>b</code> is not initialized so the declaration of the array has undefined behavior.</p>\n\n<pre><code>int b;\nscanf(\"%d\",&amp;b);\nint A[index][b];\n            ^^^\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 11661915, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mNm4t10kwmM/AAAAAAAAAAI/AAAAAAAAAN8/hbNESEzPzeg/photo.jpg?sz=128", "display_name": "Aru Viser", "link": "https://stackoverflow.com/users/11661915/aru-viser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 57188073, "answer_count": 3, "score": 0, "last_activity_date": 1564071249, "creation_date": 1563987163, "last_edit_date": 1564071249, "question_id": 57187844, "link": "https://stackoverflow.com/questions/57187844/variable-sized-array-in-c", "title": "Variable sized array in C", "body": "<p>For some reason, the first output my program is giving, is garbage value, while the second output is correct.</p>\n\n<p>This is a problem from <a href=\"https://www.hackerrank.com/challenges/variable-sized-arrays/\" rel=\"nofollow noreferrer\">HackerRank</a>.</p>\n\n<p>I know this question has already been asked by someone else. I just want to know what the problem is in my code. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int index,query;\n    int count1 = 0;\n    scanf(\"%d%d\",&amp;index,&amp;query);\n    for(int i=0;i&lt;index;i++)\n    {\n        int b;\n        scanf(\"%d\",&amp;b);\n        int A[index][b];\n        for(int j=0;j&lt;b;j++)\n        {\n            scanf(\"%d\",&amp;A[i][j]);\n        }\n        count1++;\n        if(count1&lt;index)\n        {\n            continue;\n        }\n        int count2=0;\n        while(count2&lt;query)\n        {\n            int d,e;\n            scanf(\"%d%d\",&amp;d,&amp;e);\n            printf(\"%d\\n\",A[d][e]);\n            count2++;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>If the input is:</p>\n\n<blockquote>\n  <p>2 2<br>\n  3 1 5 4<br>\n  5 1 2 8 9 3<br>\n  0 1<br>\n  1 3  </p>\n</blockquote>\n\n<p>Then the output should be:</p>\n\n<blockquote>\n  <p>5<br>\n  9</p>\n</blockquote>\n\n<p>But instead, my output is:</p>\n\n<blockquote>\n  <p>garbage<br>\n  9</p>\n</blockquote>\n"}, {"tags": ["python", "c", "windows", "dll", "ctypes"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 3, "creation_date": 1563990087, "post_id": 57187566, "comment_id": 100887055, "body": "It&#39;s an architecture mismatch problem. Either you have <i>32bit</i> <i>Python</i> trying to load a <i>64bit</i> <i>.dll</i>, or the other way around: <i>64bit</i> <i>Python</i> trying to load a <i>32bit</i> <i>.dll</i>."}, {"owner": {"reputation": 4755, "user_id": 8430155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655d1d5c6571635c65c90670361700cf?s=128&d=identicon&r=PG&f=1", "display_name": "Harshal Parekh", "link": "https://stackoverflow.com/users/8430155/harshal-parekh"}, "edited": false, "score": 1, "creation_date": 1563991715, "post_id": 57187566, "comment_id": 100887809, "body": "Please include your code in the post. Refer here: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a> and edit your post."}, {"owner": {"reputation": 69, "user_id": 11831570, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kcZNc903EUc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc3MXUV1up3WxtagjVKfQ-MZBwOtg/photo.jpg?sz=128", "display_name": "Fr&#233;d&#233;ric Girard", "link": "https://stackoverflow.com/users/11831570/fr%c3%a9d%c3%a9ric-girard"}, "edited": false, "score": 0, "creation_date": 1564065990, "post_id": 57187566, "comment_id": 100916530, "body": "Yeah, it was a 32-bit dll."}, {"owner": {"reputation": 29876, "user_id": 476716, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4e325890903afc8269eb2c1aa57587b3?s=128&d=identicon&r=PG", "display_name": "OrangeDog", "link": "https://stackoverflow.com/users/476716/orangedog"}, "edited": false, "score": 1, "creation_date": 1564671443, "post_id": 57187566, "comment_id": 101115903, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/19849077/error-loading-dll-in-python-not-a-valid-win32-application\">Error loading DLL in python, not a valid win32 application</a>"}], "answers": [{"comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 2, "creation_date": 1578836093, "post_id": 57297745, "comment_id": 105561144, "body": "@Fr&#233;d&#233;ricGirard: Did this answer your question? If yes, please accept the answer, so that others are able to acknowledge it as well  (<a href=\"https://stackoverflow.com/help/someone-answers\">&#91;SO&#93;: What should I do when someone answers my question?</a>). If not, let me know how can it be improved, so it does answer it."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1603395141, "post_id": 57297745, "comment_id": 114032217, "body": "This is about as authoritative as it gets. Excellent explanation."}], "tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": false, "score": 15, "last_activity_date": 1609328947, "last_edit_date": 1609328947, "creation_date": 1564601511, "answer_id": 57297745, "question_id": 57187566, "link": "https://stackoverflow.com/questions/57187566/python-ctypes-loading-dll-throws-oserror-winerror-193-1-is-not-a-valid-win/57297745#57297745", "title": "Python Ctypes - loading dll throws OSError: [WinError 193] %1 is not a valid Win32 application", "body": "<p>Mentioning <a href=\"https://docs.python.org/library/ctypes.html#module-ctypes\" rel=\"nofollow noreferrer\">[Python.Docs]: ctypes - A foreign function library for Python</a> (although this doesn't have very much to do with it) just in case.</p>\n<p>The underlying error is <em><strong>ERROR_BAD_EXE_FORMAT</strong></em> (<em>193</em>, <em>0xC1</em>). Check it in <a href=\"https://docs.microsoft.com/en-us/windows/win32/debug/system-error-codes--0-499-\" rel=\"nofollow noreferrer\">[MS.Docs]: System Error Codes (0-499)</a>. It's a <strong>general <em>Win</em> error</strong> (not related to <em>Python</em>). In the current case (related to <em>Python</em>), the exception is a (<em>Python</em>) wrapper over it.</p>\n<h2>1. The error</h2>\n<p>The error message is confusing (especially because of <em><strong>%1</strong></em> placeholder). For more details on that, check <a href=\"https://stackoverflow.com/questions/43615129/why-is-1-rarely-substituted-in-1-is-not-a-valid-win32-application\">[SO]: Why is %1 rarely substituted in \u201c%1 is not a valid Win32 application.\u201d</a>.</p>\n<p>This error occurs when <em>Win</em> tries to load what it thinks it's an executable (<em>PE</em>) image (<em>.exe</em>, <em>.dll</em>, ...), but it actually isn't. There's a variety of situations when this is encountered (<em>Google</em>ing the error, would yield lots of results).</p>\n<p>There are a bunch of possible reasons for this to happen when the image is loaded from a file (existing and readable, otherwise the error would differ - <strong>look at one of the bullets at the answer end</strong>):</p>\n<ul>\n<li>Was downloaded and the download is incomplete</li>\n<li>Is corrupt because of filesystem problem</li>\n<li>Was mistakenly overwritten</li>\n<li>Many many more</li>\n</ul>\n<p>2 main usecases lead to this error:</p>\n<ol>\n<li>Attempting to run a file which is not an <em>.exe</em> (<a href=\"https://stackoverflow.com/questions/25651990/oserror-winerror-193-1-is-not-a-valid-win32-application\">[SO]: OSError: [WinError 193] %1 is not a valid Win32 application</a>)</li>\n<li>Trying to load a <em>.dll</em> in a process (running <em>.exe</em>). <strong>This is the one that I'm going to focus on</strong></li>\n</ol>\n<p>Below, it's an example of a dummy executable attempting to load a <em>.dll</em>.</p>\n<p><em>code0.c</em>:</p>\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;Windows.h&gt;\n\n\nint main() {\n    DWORD gle = 0;\n    HMODULE hMod = LoadLibraryA(&quot;.\\\\dll0.dll&quot;);\n    if (hMod == NULL) {\n        gle = GetLastError();\n        printf(&quot;LoadLibrary failed: %d (0x%08X)\\n&quot;, gle, gle);\n    } else {\n        FreeLibrary(hMod);\n    }\n    return gle;\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n<ul>\n<li><strong>Note</strong>: I'll be reusing this <em>cmd</em> console, even if the copy / paste snippets will be scattered across the answer. <br>As a side note, I don't know why this snippet is messed up (as opposed to others), the best (not perfect) workaround I found is to split it in 3</li>\n</ul>\n<blockquote>\n<pre class=\"lang-bat prettyprint-override\"><code>[cfati@CFATI-5510-0:e:\\Work\\Dev\\StackOverflow\\q057187566]&gt; sopr.bat\n*** Set shorter prompt to better fit when pasted in StackOverflow (or other) pages ***\n\n[prompt]&gt; &quot;c:\\Install\\pc032\\Microsoft\\VisualStudioCommunity\\2017\\VC\\Auxiliary\\Build\\vcvarsall.bat&quot; x64\n</code></pre>\n</blockquote>\n<blockquote>\n<pre class=\"lang-bat prettyprint-override\"><code>**********************************************************************\n** Visual Studio 2017 Developer Command Prompt v15.9.22\n** Copyright (c) 2017 Microsoft Corporation\n**********************************************************************\n[vcvarsall.bat] Environment initialized for: 'x64'\n</code></pre>\n</blockquote>\n<blockquote>\n<pre class=\"lang-bat prettyprint-override\"><code>[prompt]&gt; dir /b\ncode0.c\ndll0.c\nscript0.py\n\n[prompt]&gt; cl /nologo code0.c  /link /NOLOGO /OUT:code0_064.exe\ncode0.c\n\n[prompt]&gt; :: Creating an invalid dll\n[prompt]&gt; echo garbage&gt; dll0.dll\n\n[prompt]&gt; dir /b\ncode0.c\ncode0.obj\ncode0_064.exe\ndll0.c\ndll0.dll\nscript0.py\n\n[prompt]&gt; code0_064.exe\nLoadLibrary failed: 193 (0x000000C1)\n</code></pre>\n</blockquote>\n<p>As seen, I created a file <em>dll0.dll</em> containing the text &quot;<em>garbage</em>&quot;, so it's a <em>.dll</em> file with invalid contents.</p>\n<p>The most common case for this error, is an architecture mismatch:</p>\n<ul>\n<li><strong><em>64bit</em> process attempting to load a <em>32bit</em> <em>.dll</em></strong></li>\n<li><strong><em>32bit</em> process attempting to load a <em>64bit</em> <em>.dll</em></strong></li>\n</ul>\n<p>In any of the above 2 cases, even if the <em>.dll</em> contains a valid image (for a different architecture), it's still invalid from the current process <em>PoV</em>. For things to run <em>OK</em>, <strong>the 2 involved <em>CPU</em> architectures must match</strong> <sup><em><strong>(1)</strong></em></sup>.</p>\n<h2>2. <em>Python</em> context</h2>\n<p><em>CTypes</em> does the same thing when loading a <em>.dll</em>: it calls <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibraryw\" rel=\"nofollow noreferrer\">[MS.Docs]: LoadLibraryW function</a> on the <em>.dll</em> name. <br>So this is the exact same case for the <em>Python</em> process where <em>CTypes</em> tries to load the <em>.dll</em> in.</p>\n<p><em>script0.py</em>:</p>\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python3\n\nimport sys\nimport os\nimport ctypes\n\n\nDLL_BASE_NAME = &quot;dll0&quot;\n\n\ndef main(args):\n    dll_name = os.path.join(os.path.abspath(os.path.dirname(__file__)), (args[0] if args else DLL_BASE_NAME) + &quot;.dll&quot;)\n    print(&quot;Attempting to load: [{0:s}]&quot;.format(dll_name))\n    dll0 = ctypes.CDLL(dll_name)\n    func0 = dll0.dll0Func0\n    func0.restype = ctypes.c_int\n\n    res = func0()\n    print(&quot;{0:s} returned {1:d}&quot;.format(func0.__name__, res))\n\n\nif __name__ == &quot;__main__&quot;:\n    print(&quot;Python {0:s} {1:d}bit on {2:s}\\n&quot;.format(&quot; &quot;.join(item.strip() for item in sys.version.split(&quot;\\n&quot;)), 64 if sys.maxsize &gt; 0x100000000 else 32, sys.platform))\n    main(sys.argv[1:])\n    print(&quot;\\nDone.&quot;)\n</code></pre>\n<p><strong>Output</strong>:</p>\n<blockquote>\n<pre class=\"lang-bat prettyprint-override\"><code>[prompt]&gt; :: dll0.dll still contains garbage\n[prompt]&gt;\n[prompt]&gt; &quot;e:\\Work\\Dev\\VEnvs\\py_pc064_03.07.03_test0\\Scripts\\python.exe&quot; script0.py\nPython 3.7.3 (v3.7.3:ef4ec6ed12, Mar 25 2019, 22:22:05) [MSC v.1916 64 bit (AMD64)] 64bit on win32\n\nAttempting to load: [e:\\Work\\Dev\\StackOverflow\\q057187566\\dll0.dll]\nTraceback (most recent call last):\n  File &quot;script0.py&quot;, line 24, in &lt;module&gt;\n    main(sys.argv[1:])\n  File &quot;script0.py&quot;, line 14, in main\n    dll0 = ctypes.CDLL(dll_name)\n  File &quot;c:\\install\\pc064\\python\\python\\03.07.03\\Lib\\ctypes\\__init__.py&quot;, line 356, in __init__\n    self._handle = _dlopen(self._name, mode)\nOSError: [WinError 193] %1 is not a valid Win32 application\n</code></pre>\n</blockquote>\n<p>Here's an example for <em><strong>#1</strong></em> <sup>(from above)</sup>, which attempts all 4 combinations.</p>\n<p><em>dll0.c</em>:</p>\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;inttypes.h&gt;\n\n#if defined(_WIN32)\n#  define DLL0_EXPORT_API __declspec(dllexport)\n#else\n#  define DLL0_EXPORT_API\n#endif\n\n\nDLL0_EXPORT_API size_t dll0Func0() {\n    return sizeof(void*);\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<blockquote>\n<pre class=\"lang-bat prettyprint-override\"><code>[prompt]&gt; :: Still building for 64bit from previous vcvarsall call\n[prompt]&gt;\n[prompt]&gt; cl /nologo /DDLL dll0.c  /link /NOLOGO /DLL /OUT:dll0_064.dll\ndll0.c\n   Creating library dll0_064.lib and object dll0_064.exp\n\n[prompt]&gt;\n[prompt]&gt; &quot;c:\\Install\\pc032\\Microsoft\\VisualStudioCommunity\\2017\\VC\\Auxiliary\\Build\\vcvarsall.bat&quot; x86\n**********************************************************************\n** Visual Studio 2017 Developer Command Prompt v15.9.22\n** Copyright (c) 2017 Microsoft Corporation\n**********************************************************************\n[vcvarsall.bat] Environment initialized for: 'x86'\n\n[prompt]&gt; cl /nologo /DDLL dll0.c  /link /NOLOGO /DLL /OUT:dll0_032.dll\ndll0.c\n   Creating library dll0_032.lib and object dll0_032.exp\n\n[prompt]&gt; dir /b *.dll\ndll0.dll\ndll0_032.dll\ndll0_064.dll\n\n[prompt]&gt;\n[prompt]&gt; :: Python 64bit\n[prompt]&gt; &quot;e:\\Work\\Dev\\VEnvs\\py_pc064_03.07.03_test0\\Scripts\\python.exe&quot; script0.py dll0_064\nPython 3.7.3 (v3.7.3:ef4ec6ed12, Mar 25 2019, 22:22:05) [MSC v.1916 64 bit (AMD64)] 64bit on win32\n\nAttempting to load: [e:\\Work\\Dev\\StackOverflow\\q057187566\\dll0_064.dll]\ndll0Func0 returned 8\n\nDone.\n\n[prompt]&gt; &quot;e:\\Work\\Dev\\VEnvs\\py_pc064_03.07.03_test0\\Scripts\\python.exe&quot; script0.py dll0_032\nPython 3.7.3 (v3.7.3:ef4ec6ed12, Mar 25 2019, 22:22:05) [MSC v.1916 64 bit (AMD64)] 64bit on win32\n\nAttempting to load: [e:\\Work\\Dev\\StackOverflow\\q057187566\\dll0_032.dll]\nTraceback (most recent call last):\n  File &quot;script0.py&quot;, line 24, in &lt;module&gt;\n    main(sys.argv[1:])\n  File &quot;script0.py&quot;, line 14, in main\n    dll0 = ctypes.CDLL(dll_name)\n  File &quot;c:\\install\\pc064\\python\\python\\03.07.03\\Lib\\ctypes\\__init__.py&quot;, line 356, in __init__\n    self._handle = _dlopen(self._name, mode)\nOSError: [WinError 193] %1 is not a valid Win32 application\n\n[prompt]&gt;\n[prompt]&gt; :: Python 32bit\n[prompt]&gt; &quot;e:\\Work\\Dev\\VEnvs\\py_pc032_03.07.03_test0\\Scripts\\python.exe&quot; script0.py dll0_032\nPython 3.7.3 (v3.7.3:ef4ec6ed12, Mar 25 2019, 21:26:53) [MSC v.1916 32 bit (Intel)] 32bit on win32\n\nAttempting to load: [e:\\Work\\Dev\\StackOverflow\\q057187566\\dll0_032.dll]\ndll0Func0 returned 4\n\nDone.\n\n[prompt]&gt; &quot;e:\\Work\\Dev\\VEnvs\\py_pc032_03.07.03_test0\\Scripts\\python.exe&quot; script0.py dll0_064\nPython 3.7.3 (v3.7.3:ef4ec6ed12, Mar 25 2019, 21:26:53) [MSC v.1916 32 bit (Intel)] 32bit on win32\n\nAttempting to load: [e:\\Work\\Dev\\StackOverflow\\q057187566\\dll0_064.dll]\nTraceback (most recent call last):\n  File &quot;script0.py&quot;, line 24, in &lt;module&gt;\n    main(sys.argv[1:])\n  File &quot;script0.py&quot;, line 14, in main\n    dll0 = ctypes.CDLL(dll_name)\n  File &quot;c:\\install\\pc032\\python\\python\\03.07.03\\Lib\\ctypes\\__init__.py&quot;, line 356, in __init__\n    self._handle = _dlopen(self._name, mode)\nOSError: [WinError 193] %1 is not a valid Win32 application\n</code></pre>\n</blockquote>\n<h2>3. Bonus</h2>\n<p>In the above examples, the <em>.dll</em> was loaded &quot;on demand&quot; by explicitly calling <em>LoadLibrary</em> (or <em>LoadLibraryEx</em>). <br>The other case is when a <em>.exe</em> or <em>.dll</em> depends on (was linked against) another <em>.dll</em>, and loads it automatically when itself is being loaded (although I'm almost certain that <em>LoadLibrary</em> - or maybe a lower level function - is automatically called under the hood on the dependent <em>.dll</em>). <br>In the example below, <em>dll0*.dll</em> depends on <em>dll1*.dll</em>. Only exemplifying for <em>32bit</em> (as this is the current build environment set by previous operation).</p>\n<p><em>dll1.h</em>:</p>\n<pre class=\"lang-c prettyprint-override\"><code>#if defined(_WIN32)\n#  if defined(DLL1_EXPORTS)\n#    define DLL1_EXPORT_API __declspec(dllexport)\n#  else\n#    define DLL1_EXPORT_API __declspec(dllimport)\n#  endif\n#else\n#  define DLL1_EXPORT_API\n#endif\n\n\nDLL1_EXPORT_API void dll1Func0();\n</code></pre>\n<p><em>dll1.c</em>:</p>\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#define DLL1_EXPORTS\n#include &quot;dll1.h&quot;\n\n\nvoid dll1Func0() {\n    printf(&quot;In [%s]\\n&quot;, __FUNCTION__);\n}\n</code></pre>\n<p><em>dll0.c</em> (modified):</p>\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;inttypes.h&gt;\n\n#if defined(_WIN32)\n#  define DLL0_EXPORT_API __declspec(dllexport)\n#else\n#  define DLL0_EXPORT_API\n#endif\n\n#include &quot;dll1.h&quot;\n\n\nDLL0_EXPORT_API size_t dll0Func0() {\n    dll1Func0();\n    return sizeof(void*);\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<blockquote>\n<pre class=\"lang-bat prettyprint-override\"><code>[prompt]&gt; :: Still building for 32bit from previous vcvarsall call\n[prompt]&gt;\n[prompt]&gt; cl /nologo /DDLL dll1.c  /link /NOLOGO /DLL /OUT:dll1_032.dll\ndll1.c\n   Creating library dll1_032.lib and object dll1_032.exp\n\n[prompt]&gt; cl /nologo /DDLL dll0.c  /link /NOLOGO /DLL /OUT:dll0_032.dll\ndll0.c\n   Creating library dll0_032.lib and object dll0_032.exp\ndll0.obj : error LNK2019: unresolved external symbol __imp__dll1Func0 referenced in function _dll0Func0\ndll0_032.dll : fatal error LNK1120: 1 unresolved externals\n\n[prompt]&gt;\n[prompt]&gt; cl /nologo /DDLL dll0.c  /link /NOLOGO /DLL /OUT:dll0_032.dll dll1_032.lib\ndll0.c\n   Creating library dll0_032.lib and object dll0_032.exp\n\n[prompt]&gt;\n[prompt]&gt; &quot;e:\\Work\\Dev\\VEnvs\\py_pc032_03.07.03_test0\\Scripts\\python.exe&quot; script0.py dll0_032\nPython 3.7.3 (v3.7.3:ef4ec6ed12, Mar 25 2019, 21:26:53) [MSC v.1916 32 bit (Intel)] 32bit on win32\n\nAttempting to load: [e:\\Work\\Dev\\StackOverflow\\q057187566\\dll0_032.dll]\nIn [dll1Func0]\ndll0Func0 returned 4\n\nDone.\n\n[prompt]&gt; :: Messing up dll1_032.dll\n[prompt]&gt; echo garbage&gt; dll1_032.dll\n\n[prompt]&gt; &quot;e:\\Work\\Dev\\VEnvs\\py_pc032_03.07.03_test0\\Scripts\\python.exe&quot; script0.py dll0_032\nPython 3.7.3 (v3.7.3:ef4ec6ed12, Mar 25 2019, 21:26:53) [MSC v.1916 32 bit (Intel)] 32bit on win32\n\nAttempting to load: [e:\\Work\\Dev\\StackOverflow\\q057187566\\dll0_032.dll]\nTraceback (most recent call last):\n  File &quot;script0.py&quot;, line 24, in &lt;module&gt;\n    main(sys.argv[1:])\n  File &quot;script0.py&quot;, line 14, in main\n    dll0 = ctypes.CDLL(dll_name)\n  File &quot;c:\\install\\pc032\\python\\python\\03.07.03\\Lib\\ctypes\\__init__.py&quot;, line 356, in __init__\n    self._handle = _dlopen(self._name, mode)\nOSError: [WinError 193] %1 is not a valid Win32 application\n</code></pre>\n</blockquote>\n<p><strong>Stating the obvious</strong>: Same error would occur if instead of writing garbage data into <em>dll1_032.dll</em>, I would have build it for <em>64bit</em>, but I chose this variant as it's shorter.</p>\n<h2>4. Conclusions</h2>\n<p>Everything that I'll state in each of the next bullets, also applies to the ones that follow it.</p>\n<ul>\n<li>In the examples above, the error occurred when the corruption was in the very <em>.dll</em> being loaded, or in one of its direct dependents (level 1 of indirection). It's not hard to figure out that applying the same principle multiple times, the behavior wouldn't change, so it's valid for any level of indirection. <br>Imagine a <em>.dll</em> that depends on several other <em>.dll</em>s, and each of those depends in turn on several others, and so on ... . That is called a <strong>dependency tree</strong>. So no matter <strong>where in the tree this error will occur, it will be propagated up to the root node</strong> (which is the <em>.dll</em>)</li>\n<li>The dependency tree propagation applies to other errors as well. Another one that it's <strong>widely encountered</strong> is <em><strong>ERROR_MOD_NOT_FOUND</strong></em> (<em>126</em>, <em>0x7E</em>). It means that the <em>.dll</em> with the specified name (<strong>restating: or any other <em>.dll</em> that it (recursively) depends on</strong>) was not found. <br>As a side note, in order to check a <em>.dll</em> (or <em>.exe</em>) dependencies, use <a href=\"https://www.dependencywalker.com\" rel=\"nofollow noreferrer\">Dependency Walker</a> (newer <a href=\"https://github.com/lucasg/Dependencies\" rel=\"nofollow noreferrer\">[GitHub]: lucasg/Dependencies</a>) or <em>dumpbin</em> (part of <em>VStudio</em> installation), or as a matter of fact, any tool that is capable of getting <em>PE</em> dependency information</li>\n<li>Everything discussed also applies:\n<ul>\n<li>If the <em>.dll</em> is an extension module (<em>.pyd</em>) that is being imported</li>\n<li>If the <em>.dll</em> is being loaded as a result of another module being imported</li>\n</ul>\n</li>\n<li>Everything discussed also applies to <em>Nix</em> systems, the errors (and corresponding messages), obviously differ</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1276, "user_id": 14549468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff04ec6327962cf034d5323d89f51a6?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj D Bhat", "link": "https://stackoverflow.com/users/14549468/manoj-d-bhat"}, "is_accepted": false, "score": 1, "last_activity_date": 1616499723, "creation_date": 1616499723, "answer_id": 66762441, "question_id": 57187566, "link": "https://stackoverflow.com/questions/57187566/python-ctypes-loading-dll-throws-oserror-winerror-193-1-is-not-a-valid-win/66762441#66762441", "title": "Python Ctypes - loading dll throws OSError: [WinError 193] %1 is not a valid Win32 application", "body": "<p>As @CristiFati stated this is occuring because</p>\n<p>1)64bit process attempting to load a 32bit .dll</p>\n<p>2)32bit process attempting to load a 64bit .dll</p>\n<p>Solution:</p>\n<p>--&gt; I also encountered the same problem and noticed that my gcc compiler was producing 32-bit compiled files instead of 64-bit.So I changed the compiler which produces 64-bit files.</p>\n<p>--&gt; you can check your  compiled file(.exe) is 64 or 32 bit by  --&gt;right click --&gt; properties--&gt; compatablity --&gt;check the compatibilty mode option--&gt;select the dropdown if you see windows xp in the list then your compiler is producing 32-bit files if you dont see windows xp then your compiler is producing 64-bit files.</p>\n"}], "owner": {"reputation": 69, "user_id": 11831570, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kcZNc903EUc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc3MXUV1up3WxtagjVKfQ-MZBwOtg/photo.jpg?sz=128", "display_name": "Fr&#233;d&#233;ric Girard", "link": "https://stackoverflow.com/users/11831570/fr%c3%a9d%c3%a9ric-girard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11840, "favorite_count": 2, "answer_count": 2, "score": 5, "last_activity_date": 1616499723, "creation_date": 1563985934, "last_edit_date": 1569536033, "question_id": 57187566, "link": "https://stackoverflow.com/questions/57187566/python-ctypes-loading-dll-throws-oserror-winerror-193-1-is-not-a-valid-win", "title": "Python Ctypes - loading dll throws OSError: [WinError 193] %1 is not a valid Win32 application", "body": "<p>I have tried to run an exemple of a python code that gets a function from a library  using ctypes. The exemple can be found <a href=\"https://github.com/dvida/py-ctypes-multidimensional-arrays\" rel=\"noreferrer\">here</a>. I followed the instruction and beside one minor modification, I have used the exact same code. I have been trying to run this on Windows 10 (64-bit), python 3.7 (64-bit) but got this error message:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/gifr9302/PycharmProjects/testpytoc/myfunc.py\", line 128, in &lt;module&gt;\n    libmyfunc = npct.load_library('myfunc.dll', os.path.dirname(os.path.abspath(__file__)))\n  File \"C:\\Users\\gifr9302\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\numpy\\ctypeslib.py\", line 152, in load_library\n    return ctypes.cdll[libpath]\n  File \"C:\\Users\\gifr9302\\AppData\\Local\\Programs\\Python\\Python37\\lib\\ctypes\\__init__.py\", line 431, in __getitem__\n    return getattr(self, name)\n  File \"C:\\Users\\gifr9302\\AppData\\Local\\Programs\\Python\\Python37\\lib\\ctypes\\__init__.py\", line 426, in __getattr__\n    dll = self._dlltype(name)\n  File \"C:\\Users\\gifr9302\\AppData\\Local\\Programs\\Python\\Python37\\lib\\ctypes\\__init__.py\", line 356, in __init__\n    self._handle = _dlopen(self._name, mode)\nOSError: [WinError 193] %1 n\u2019est pas une application Win32 valide\n</code></pre>\n\n<p>translated:</p>\n\n<p><code><strong>OSError: [WinError 193] %1 is not a valid Win32 application</strong></code></p>\n\n<p>I have tried to create a dll instead of a so file and still got the same error. It would seem it tries to run a 32-bit application on a 64-bit system but I'm not sure why. Can anyone help?</p>\n"}, {"tags": ["c", "function", "pointers", "int"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1563986174, "post_id": 57187508, "comment_id": 100885243, "body": "The function return value and hence the argument passed must be of type <code>FILE *</code>. Also please see <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is <code>while ( !feof (file) )</code> always wrong?</a> You are also using <code>!feof(*p_file);</code> as a loop condition. Have a look at <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/feof?view=vs-2017\" rel=\"nofollow noreferrer\"><code>feof</code> man page</a> to see what it does. Also enable all compiler warnings and see what they tell you."}], "answers": [{"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 1, "last_activity_date": 1563986369, "creation_date": 1563986369, "answer_id": 57187666, "question_id": 57187508, "link": "https://stackoverflow.com/questions/57187508/getting-invalid-type-argument-of-have-int-while-trying-to-use-a-txt-f/57187666#57187666", "title": "Getting &quot;invalid type argument of &#39;-&gt;&#39; (have &#39;int&#39;)&quot; while trying to use a txt file in functions", "body": "<p>You've got the wrong return type on this function</p>\n\n<pre><code>char openIt(void)\n{\n    FILE * p_file = fopen(\"alice-ch1.txt\", \"r\");\n    return p_file;\n}\n</code></pre>\n\n<p><code>p_file</code> is a pointer to <code>FILE</code> (<code>FILE *</code>) so that should be the data type used as the return value as well.</p>\n\n<p>And then you're passing the return value from that function to <code>countIt</code>...but that doesn't take a <code>FILE *</code> as it's only parameter either. Which is what the various functions that operate on files (ie <code>fgetc</code>) are expecting. This is where the specific error your question refers to comes from as you're de-referencing <code>p_file</code> so it is no longer a pointer.</p>\n\n<p>I would be very surprised if your compiler didn't throw up a load of errors and warnings with such code.</p>\n\n<p>You should change the function definitions to be as follows.</p>\n\n<pre><code>FILE *openIt(void)\n\nint countIt(FILE *p_file)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11831506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AmJFmGkfIGQ/AAAAAAAAAAI/AAAAAAAAAGI/z-8xCE2GlME/photo.jpg?sz=128", "display_name": "Sjoerd", "link": "https://stackoverflow.com/users/11831506/sjoerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1563986369, "creation_date": 1563985691, "question_id": 57187508, "link": "https://stackoverflow.com/questions/57187508/getting-invalid-type-argument-of-have-int-while-trying-to-use-a-txt-f", "title": "Getting &quot;invalid type argument of &#39;-&gt;&#39; (have &#39;int&#39;)&quot; while trying to use a txt file in functions", "body": "<p>I have to get the code I made for opening a txt file and counting the words in functions but am having problems with properly moving text file around (I'm pretty sure).</p>\n\n<p>I've tried googling on how to return a file in c, obviously this error and I had some errors after trial and error about invalid type argument of unary. I'm not good with programming but before I switch to a different electrical engineering path I have to finish some programming assignments for signoff and this one in particular I have an aweful lot of trouble with.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar openIt();\nint countIt(char (*p_file));\n\nint main()\n{\n    int wordCount = countIt(openIt());\n}\n\nchar openIt(void)\n{\n    FILE * p_file = fopen(\"alice-ch1.txt\", \"r\");\n    return p_file;\n}\n\nint countIt(char (*p_file))\n{\n    int wordcount = 0;\n    int i = 0;\n\n    if (p_file == NULL)\n    {\n        printf(\"File cannot be opened!\\n\");\n    }\n    else\n    {\n        char tempChar;\n        char chapter[16383];\n        int i;\n        int wordcount = 0;\n        int filed = fgetc(p_file);\n        while (!feof(*p_file))   //this is where the error occurs\n        {\n            for(i = 0; !feof(*p_file); i++)\n            {\n                tempChar = getc(p_file);\n                chapter[i] = tempChar;\n\n                if(chapter[i] == ' ' || chapter[i] == '\\n')\n                {\n                    if((chapter[i-1] != ' ' || chapter[i-2] != ' ') &amp;&amp; chapter[i-1] != '*' &amp;&amp; chapter[i-1] != '\\n')\n                    {\n                        wordcount++;   // ((chapter[i-1] &lt;= 'A' &amp;&amp; chapter[i-1] &gt;= 'Z') || (chapter[i-1] &lt;= 'a' &amp;&amp; chapter[i-1] &gt;= 'z'))\n                    }\n                }\n            }\n\n        }\n        fclose(p_file);\n    }\n}\n</code></pre>\n\n<p>I expect it to the count the words in a given text file but am getting the error message from the title</p>\n"}, {"tags": ["c", "linux", "terminal"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1563986189, "post_id": 57187345, "comment_id": 100885252, "body": "Do you actually mean a Linux console, or some other terminal emulator within an X session?  They have different capabilities!"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1563986993, "post_id": 57187345, "comment_id": 100885687, "body": "Your code would need to take over the displaying of the input"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1563990443, "post_id": 57187345, "comment_id": 100887209, "body": "You really need to read the characters in raw mode, then restore what was lost, and then allow editing of it (backspace, etc). It all gets very messy, which is why it generally doesn&#39;t work that way.."}], "answers": [{"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1563987296, "creation_date": 1563987296, "answer_id": 57187878, "question_id": 57187345, "link": "https://stackoverflow.com/questions/57187345/how-to-print-without-loosing-current-input-in-linux-terminal/57187878#57187878", "title": "How to print without loosing current input in linux terminal?", "body": "<p>The <code>terminfo</code> man page says:</p>\n\n<blockquote>\n  <p>If the terminal can open a new blank line before the line where the\n  cursor is, this should be given as <code>il1</code>; this is done only from the\n  first position of a line.  The cursor must then    appear on the newly\n  blank line.  If the terminal can delete the line which the cursor is\n  on, then this should be given as <code>dl1</code>; this is done only from the first\n  position on  the  line    to be deleted.  Versions of <code>il1</code> and <code>dl1</code>\n  which take a single parameter and insert or delete that many lines can\n  be given as <code>il</code> and <code>dl</code>.</p>\n</blockquote>\n\n<p>Demo:</p>\n\n<pre><code>echo \"foo bar\"; sleep .5; echo \"`tput cuu1``tput il1`baz`tput ll`\"; sleep 1\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11611907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d6ca75d2f5a96ff648c37195e360bd?s=128&d=identicon&r=PG&f=1", "display_name": "Dreamable", "link": "https://stackoverflow.com/users/11611907/dreamable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563987296, "creation_date": 1563985128, "last_edit_date": 1563985464, "question_id": 57187345, "link": "https://stackoverflow.com/questions/57187345/how-to-print-without-loosing-current-input-in-linux-terminal", "title": "How to print without loosing current input in linux terminal?", "body": "<p>So lets say we have a c program that runs in a linux terminal that continuously needs to print information. Buy also at the same time you have to be able to input text. The program has a prompt that says  <code>program&gt;</code> so every time that the program prints something its enoguth with just add before a carriage return <code>\\r</code> and then print again <code>program&gt;</code> for avoiding the printed info to be obfuscated with the prev prompt e.g <code>program&gt;Printed information 1</code> .</p>\n\n<pre><code>printed information 1\nprinted information 2 \nprogram&gt;my input\n</code></pre>\n\n<p>But if you are writing while some information is printed the current input would be covered by the printed info.</p>\n\n<pre><code>printed information 1\nprinted information 2 \nprinted information 3 //program&gt;my input has been covered\nprogram&gt;\n</code></pre>\n\n<p>For the case I tried to make use of VT100 codes for moving the cursor like this</p>\n\n<pre><code>//saving cursor position and move the cursor two lines up\nprintf(\"\\033[s\\033[2A\");\n//go all the wey left and then insert a new line\nprintf(\"\\r\\n\");\n\nlog_(logger, \"some information 3\");\n//restore cursor position\nprintf(\"\\033[u\");\n</code></pre>\n\n<p>the expected behavior is this:</p>\n\n<pre><code>printed information 1\nprinted information 2\nprinted information 3 \nprogram&gt;my input\n</code></pre>\n\n<p>but the new line isn't inserted but just covers the prev printed info.</p>\n\n<pre><code>printed information 1\nprinted information 3 //printed information 2 has been covered\nprogram&gt;my input\n</code></pre>\n\n<p>is there any way to print information to the linux terminal without messing up the current input?</p>\n"}, {"tags": ["c#", "c"], "comments": [{"owner": {"reputation": 700, "user_id": 5351370, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DIXlPTT7PX0/AAAAAAAAAAI/AAAAAAAAAEg/YKyBJlcyYv4/photo.jpg?sz=128", "display_name": "Biesi Grr", "link": "https://stackoverflow.com/users/5351370/biesi-grr"}, "edited": false, "score": 2, "creation_date": 1563984079, "post_id": 57187049, "comment_id": 100884181, "body": "You can use an <code>IntPtr</code> <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.intptr?view=netframework-4.8\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/dotnet/api/&hellip;</a>"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1563984588, "post_id": 57187049, "comment_id": 100884448, "body": "<code>struct second_struct</code> has syntax errors. <code>char[64] parameter8;</code> should be <code>char parameter8[64];</code> (similarly for <code>parameter9</code>)."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1563985569, "post_id": 57187049, "comment_id": 100884948, "body": "Presumably <code>parameter6</code> is a pointer to a &quot;callback&quot; handler function? If the callback function is to be implemented as a C# function, you will need to change <code>parameter6</code> to a <b>delegate</b>, something like <code>public delegate int parameter6(int, IntPtr);</code>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1564066654, "post_id": 57187049, "comment_id": 100916895, "body": "<code>unsigned long</code> in C is not the same as <code>ulong</code> in C#"}], "answers": [{"tags": [], "owner": {"reputation": 700, "user_id": 5351370, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DIXlPTT7PX0/AAAAAAAAAAI/AAAAAAAAAEg/YKyBJlcyYv4/photo.jpg?sz=128", "display_name": "Biesi Grr", "link": "https://stackoverflow.com/users/5351370/biesi-grr"}, "is_accepted": false, "score": 0, "last_activity_date": 1564074724, "creation_date": 1564074724, "answer_id": 57207097, "question_id": 57187049, "link": "https://stackoverflow.com/questions/57187049/how-to-convert-c-struct-with-void-to-c/57207097#57207097", "title": "how to convert c struct with void* to c#", "body": "<p>Assuming your <code>char</code> arrays are null terminated strings you can do it the following way</p>\n\n<pre><code>public delegate int parameter6(int volcnt, System.IntPtr vod);\n\n[StructLayout(LayoutKind.Sequential)]\npublic struct csharp_firstSturct\n{\n\n    [MarshalAs(UnmanagedType.LPStr)]\n    public string parameter1;\n    public int    parameter2;\n    public ulong  parameter3;\n    public ushort parameter4;\n    public System.IntPtr  parameter5;\n    public parameter6 m_parameter6;\n\n    [MarshalAs(UnmanagedType.Struct)]\n    public second_struct parameter7;\n}\n\n[StructLayout(LayoutKind.Sequential)]\npublic struct second_struct\n{\n    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 64)]\n    public string parameter8;\n\n    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 256)]\n    public string parameter9;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9854709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0600617c416d1cf64db35da642c64c83?s=128&d=identicon&r=PG&f=1", "display_name": "S.Vincent", "link": "https://stackoverflow.com/users/9854709/s-vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564074724, "creation_date": 1563984054, "last_edit_date": 1564066520, "question_id": 57187049, "link": "https://stackoverflow.com/questions/57187049/how-to-convert-c-struct-with-void-to-c", "title": "how to convert c struct with void* to c#", "body": "<p>I'm write a plugin with c# . the program with c# will use a dll which writes by c ,so I have to call c function in my c# program ,but unfortunately the c function's parameter is a struct and it is so complex that I never find any\n help information about how to convert it to c# parameter.</p>\n\n<p>the struct has an embedded function and void* parameter ,I didn't find anyway to convert them to c#.</p>\n\n<p>the struct is mostly like this</p>\n\n<pre><code>struct first_struct{\n    char*           parameter1;\n    int             parameter2;\n    unsigned long   parameter3;\n    unsigned short  parameter4;\n    void*           parameter5;\n    int             (*parameter6)(int,void *);\n    second_struct   parameter7;\n};\n\nstruct second_struct{\n    char          parameter8[64] ;\n    char         parameter9[256];\n};\n</code></pre>\n\n<p>I want change this c struct to c# struct but I have no idea how to do it</p>\n\n<hr>\n\n<p>thanks @Biesi Grr  and @Ian Abbott \u2018s help it sames that I can change the c struct to c# like that.</p>\n\n<pre><code>public delegate int parameter6(int volcnt, System.IntPtr vod);\n[StructLayout(LayoutKind.Sequential)]\n public struct csharp_firstSturct\n {\n\n     [MarshalAs(UnmanagedType.LPStr)] \n     public string parameter1;\n     public int    parameter2;\n     public ulong  parameter3;\n     public ushort parameter4;  \n     public System.IntPtr  parameter5;\n     public parameter6 m_parameter6;\n}\n\n</code></pre>\n\n<p>but I still has no idea about how to convert parameter7 from C to C#,what should I do to convert parameter7 form c to c#.</p>\n"}, {"tags": ["c", "c-strings", "strtok"], "comments": [{"owner": {"reputation": 1026, "user_id": 11801537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F6aGv.jpg?s=128&g=1", "display_name": "Suhas Parameshwara", "link": "https://stackoverflow.com/users/11801537/suhas-parameshwara"}, "edited": false, "score": 0, "creation_date": 1563982998, "post_id": 57186657, "comment_id": 100883616, "body": "can you also mention the expected output in the question?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 3, "creation_date": 1563983063, "post_id": 57186657, "comment_id": 100883658, "body": "<code>strtok</code> probably isn&#39;t the right tool for this job."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1563983189, "post_id": 57186657, "comment_id": 100883726, "body": "If I were you, I would either (a) read lines terminated with <code>\\r\\n</code> or (b) read lines terminated with <code>\\n</code>, and strip the resulting <code>\\r</code> at the end of each line.  (And there&#39;s no good way in C to do (a), so I&#39;d probably do (b).) Assuming you&#39;ve stripped both \\r` and \\n` from the buffer you&#39;re reading lines into, a blank line is then the empty string, which you can check for by testing <code>buf[0] == &#39;\\0&#39;</code>."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1563983369, "post_id": 57186657, "comment_id": 100883828, "body": "(And when I say &quot;read lines&quot;, I&#39;m anticipating the eventual, more realistic version of your HTTP fetcher, when you&#39;re actually reading from a socket, not simulating input with that constant array <code>get</code>.)"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1563984334, "post_id": 57186657, "comment_id": 100884310, "body": "The other issue with <code>strtok</code> is that it&#39;s specifically designed to collapse multiple adjacent instances of your delimiter, i.e. it can&#39;t return empty &quot;tokens&quot;, i.e. in your case it will never return an empty line for you to detect.  There&#39;s an &quot;improved&quot; version of <code>strtok</code> called <code>strsep</code> that is able to handle empty fields if desired, although if you use it, I think you&#39;re going to have to use a single <code>\\n</code> as your delimiter, and then use some other technique to get rid of the <code>\\r</code>&#39;s.  See <a href=\"https://stackoverflow.com/questions/2377760\">strtok() and empty fields</a>."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 4, "last_activity_date": 1563983320, "creation_date": 1563983320, "answer_id": 57186820, "question_id": 57186657, "link": "https://stackoverflow.com/questions/57186657/how-to-detect-empty-line-with-strtok/57186820#57186820", "title": "How to detect empty line with strtok", "body": "<p><code>strtok</code> delimiter argument is not a sequence of chars. It is the list of the possible chars that delimit your tokens.</p>\n\n<p>So passing repeated chars in the delimiter string has not the desired effect.</p>\n\n<p>To convince yourself, replace the delimiter by <code>GMT</code>, you'll see that your header is now <code>H</code>, because <code>strtok</code> tokenized from <code>T</code>, as it is in delimiter list.</p>\n\n<p>An alternative (dirty/no error checking) would be to locate the delimiter with <code>strstr</code>, put zero there, and print both strings</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main ()\n{\n\n    char get[1024] = \"HTTP/1.1 200 OK\\r\\nDate: Tue, 23 Jul 2019 22:52:44 GMT\\r\\nServer: Apache/2.4.7 (Ubuntu)\\r\\nLast-Modified: Wed, 18 Aug 2004 23:07:08 GMT\\r\\nETag: \\\"164-3e1f5b9a57f00\\\"\\r\\nAccept-Ranges: bytes\\r\\nContent-Length: 356\\r\\nVary: Accept-Encoding\\r\\nContent-Type: text/html\\r\\n\\r\\n&lt;html&gt;&lt;head&gt;&lt;title&gt;Temporary Page&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;center&gt;&lt;h1&gt;New Account Temporary Page&lt;/h1&gt;Welcome to yet another new account at Hurricane Electric.&lt;p&gt;&lt;h2&gt;Come Back Soon!&lt;/h2&gt;The New Account Owner Will Be Putting Something Interesting Here!&lt;/center&gt;&lt;hr&gt;Space Provided By &lt;a href=\\\"http://www.he.net\\\"&gt;Hurricane Electric&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;\";\n\n    const char *delim = \"\\r\\n\\r\\n\";\n\n    char *html;\n\n    html = strstr(get, delim);  // should test for NULL ...\n    html[0] = '\\0';\n    printf(\"Header:\\n\\n%s\\n\\n\", get);\n    printf(\"HTML:\\n\\n%s\\n\\n\", html+strlen(delim));\n\n    return 1;\n\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Header:\n\nHTTP/1.1 200 OK\nDate: Tue, 23 Jul 2019 22:52:44 GMT\nServer: Apache/2.4.7 (Ubuntu)\nLast-Modified: Wed, 18 Aug 2004 23:07:08 GMT\nETag: \"164-3e1f5b9a57f00\"\nAccept-Ranges: bytes\nContent-Length: 356\nVary: Accept-Encoding\nContent-Type: text/html\n\nHTML:\n\n&lt;html&gt;&lt;head&gt;&lt;title&gt;Temporary Page&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;center&gt;&lt;h1&gt;New Account Temporary Page&lt;/h1&gt;Welcome to yet another new account at Hurricane Electric.&lt;p&gt;&lt;h2&gt;Come Back Soon!&lt;/h2&gt;The New Account Owner Will Be Putting Something Interesting Here!&lt;/center&gt;&lt;hr&gt;Space Provided By &lt;a href=\"http://www.he.net\"&gt;Hurricane Electric&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 9536877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMfB6.jpg?s=128&g=1", "display_name": "James Read", "link": "https://stackoverflow.com/users/9536877/james-read"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 57186820, "answer_count": 1, "score": 2, "last_activity_date": 1563985299, "creation_date": 1563982809, "last_edit_date": 1563985299, "question_id": 57186657, "link": "https://stackoverflow.com/questions/57186657/how-to-detect-empty-line-with-strtok", "title": "How to detect empty line with strtok", "body": "<p>I'm trying to separate a header from a footer separated by an empty line i.e. with the string  \"\\r\\n\\r\\n\".</p>\n\n<p>I have tried using <code>strtok</code> with separator <code>\"\\r\\n\\r\\n\"</code> as the following code snippet shows.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n    char get[1024] = \"HTTP/1.1 200 OK\\r\\nDate: Tue, 23 Jul 2019 22:52:44 GMT\\r\\n\"\n                     \"Server: Apache/2.4.7 (Ubuntu)\\r\\n\"\n                     \"Last-Modified: Wed, 18 Aug 2004 23:07:08 GMT\\r\\n\"\n                     \"ETag: \\\"164-3e1f5b9a57f00\\\"\\r\\n\"\n                     \"Accept-Ranges: bytes\\r\\n\"\n                     \"Content-Length: 356\\r\\n\"\n                     \"Vary: Accept-Encoding\\r\\n\"\n                     \"Content-Type: text/html\\r\\n\"\n                     \"\\r\\n\"\n                     \"&lt;html&gt;&lt;head&gt;&lt;title&gt;Temporary Page&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;center&gt;&lt;h1&gt;New Account Temporary Page&lt;/h1&gt;Welcome to yet another new account at Hurricane Electric.&lt;p&gt;&lt;h2&gt;Come Back Soon!&lt;/h2&gt;The New Account Owner Will Be Putting Something Interesting Here!&lt;/center&gt;&lt;hr&gt;Space Provided By &lt;a href=\\\"http://www.he.net\\\"&gt;Hurricane Electric&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;\";\n\n    char *html;\n\n    html = strtok(get, \"\\r\\n\\r\\n\");\n    printf(\"Header:\\n\\n%s\\n\\n\", html);\n    html = strtok(NULL, \"\\r\\n\\r\\n\");\n    printf(\"HTML:\\n\\n%s\\n\\n\", html);\n\n    return 1;\n}\n</code></pre>\n\n<p>I expect the output to be the header printed out and then the HTML footer.</p>\n\n<p>But ouptut is:</p>\n\n<pre><code>Header:\n\nHTTP/1.1 200 OK\n\nHTML:\n\nDate: Tue, 23 Jul 2019 22:52:44 GMT\n</code></pre>\n\n<p>It seems that <code>strtok</code> is separating using <code>\"\\r\\n\"</code> rather than <code>\"\\r\\n\\r\\n\"</code>. How can I fix this strange behaviour?</p>\n"}, {"tags": ["c", "linux", "sockets", "linux-kernel", "timestamp"], "answers": [{"comments": [{"owner": {"reputation": 351, "user_id": 9279164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c77489561985bcde6095f03a8876243?s=128&d=identicon&r=PG&f=1", "display_name": "es483", "link": "https://stackoverflow.com/users/9279164/es483"}, "edited": false, "score": 1, "creation_date": 1564049096, "post_id": 57194297, "comment_id": 100906788, "body": "Thank you for your reply! I tried forcing some alignment, but, unfortunately, that did not solve the problem, as the situation remained unchanged. Is the alignment needed also for receiving CSMG data (where the buffer should be allocated, but it is actually filled and managed by <code>recvmsg()</code>, as in my case), other than for sending it (as in the example you reported)? Even if I try to oversize my buffers, the result, when the issue occurs, is the same: <code>mhdr.msg_controllen</code> is <code>0</code> and I cannot extract any ancillary data."}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 0, "last_activity_date": 1564029036, "last_edit_date": 1564029036, "creation_date": 1564028623, "answer_id": 57194297, "question_id": 57186620, "link": "https://stackoverflow.com/questions/57186620/in-which-cases-can-msg-controllen-be-0-when-accessing-ancillary-data-after-send/57194297#57194297", "title": "In which cases can msg_controllen be 0, when accessing ancillary data after sending/receiving a packet from a Linux socket?", "body": "<p>It's likely that your control message buffer is undersized, since it's not aligned and the part below the first alignment boundary will be unusable. I'm not sure what the right idiomatic way to setup the buffer is (probably using <code>malloc</code> is the only way to avoid code that, strictly speaking, is UB due to alignment and effective-type/\"aliasing\" violations), but adding <code>_Alignof(max_align_t)</code> (or <code>sizeof(max_align_t)</code>) to the buffer size is probably one solution. I'd like to know what the accepted \"right\" way to do this is, though.</p>\n\n<p>The <a href=\"http://man7.org/linux/man-pages/man3/cmsg.3.html\" rel=\"nofollow noreferrer\"><code>cmsg(3)</code> man page</a> seems to recommend a union for alignment:</p>\n\n<blockquote>\n<pre><code>      union {         /* Ancillary data buffer, wrapped in a union\n                         in order to ensure it is suitably aligned */\n          char buf[CMSG_SPACE(sizeof(myfds))];\n          struct cmsghdr align;\n      } u;\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 351, "user_id": 9279164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c77489561985bcde6095f03a8876243?s=128&d=identicon&r=PG&f=1", "display_name": "es483", "link": "https://stackoverflow.com/users/9279164/es483"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 272, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1564029036, "creation_date": 1563982687, "question_id": 57186620, "link": "https://stackoverflow.com/questions/57186620/in-which-cases-can-msg-controllen-be-0-when-accessing-ancillary-data-after-send", "title": "In which cases can msg_controllen be 0, when accessing ancillary data after sending/receiving a packet from a Linux socket?", "body": "<p>I am working on a quite complex C program, designed to run under Linux, which is relying a lot on ancillary data coming from sockets.</p>\n\n<p>I am actually experiencing a strange behaviour, which seem to occur, by the way, on my program only (other sample codes, like <a href=\"https://stackoverflow.com/questions/57164125/how-do-i-programmatically-check-if-transmit-timestamps-are-supported-by-a-given\">this one</a>, are working properly).\nI'm using ancillary data by defining:</p>\n\n<pre><code>struct msghdr mhdr;\nstruct iovec iov;\nstruct cmsghdr *cmsg = NULL;\nstruct sockaddr_ll addrll;\nsocklen_t addrllLen=sizeof(addrll);\nunsigned char packet[PACKET_SIZE_MAX];\nchar ctrlBuf[CMSG_SPACE(sizeof(struct scm_timestamping))]; // For example, in order to retrieve timestamps\n</code></pre>\n\n<p>Then, by setting:</p>\n\n<pre><code>    memset(&amp;mhdr,0,sizeof(mhdr));\n\n    iov.iov_base=packet;\n    iov.iov_len=sizeof(packet);\n\n    mhdr.msg_name=&amp;(addrll); // This is a raw socket\n    mhdr.msg_namelen=addrllLen; // This is a raw socket\n\n    mhdr.msg_control=ctrlBuf;\n    mhdr.msg_controllen=sizeof(ctrlBuf);\n\n    mhdr.msg_iov=&amp;iov;\n    mhdr.msg_iovlen=1;\n\n    mhdr.msg_flags=0;\n</code></pre>\n\n<p>I then send and receive data using <code>sendto()</code> and <code>recvmsg()</code>, after setting some socket options to retrieve useful ancillary data (such as software or hardware timestamps, by setting <code>SO_TIMESTAMPING</code>). I was able to verify that these options are actually supported by the sockets I am opening.</p>\n\n<p>The issue sometimes comes up when I try to extract the ancillary data, using a code like the following one, which is, for instance, extracting a <code>struct scm_timestamping</code> with transmit/receive timestamps:</p>\n\n<pre><code>for(cmsg=CMSG_FIRSTHDR(&amp;mhdr);cmsg!=NULL;cmsg=CMSG_NXTHDR(&amp;mhdr, cmsg)) {\n    if(cmsg-&gt;cmsg_level==SOL_SOCKET &amp;&amp; cmsg-&gt;cmsg_type==SO_TIMESTAMPING) {\n        hw_ts=*((struct scm_timestamping *)CMSG_DATA(cmsg));\n    }\n}\n</code></pre>\n\n<p>Sometimes, <code>CMSG_FIRSTHDR(&amp;mhdr)</code> returns a null pointer and the returned <code>mhdr.msg_controllen</code> is <code>0</code>, in such a way that I cannot extract any timestamp.\nOther times, on the same PC and using the same NIC, everything is perfectly fine.</p>\n\n<p>So, my question is: in which cases can the returned <code>mhdr.msg_controllen</code> be <code>0</code>, in general? Can this be due to a problem in the definition of the <code>struct msghdr</code>? Or is this due to some sort of kernel problem?</p>\n"}, {"tags": ["c", "arrays", "string", "reverse", "swap"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 3, "creation_date": 1563982705, "post_id": 57186568, "comment_id": 100883451, "body": "What parts do you understand?"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 1, "creation_date": 1563982859, "post_id": 57186568, "comment_id": 100883542, "body": "If you really want to understand it you could use paper and pencil to &quot;play computer&quot; and step through the code, keeping track of variables and their values."}, {"owner": {"reputation": 23, "user_id": 11730854, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b8jRv49oZ7M/AAAAAAAAAAI/AAAAAAAAEVg/ISA37Esa5BU/photo.jpg?sz=128", "display_name": "Prachi Rajesh Jansari", "link": "https://stackoverflow.com/users/11730854/prachi-rajesh-jansari"}, "edited": false, "score": 0, "creation_date": 1563983064, "post_id": 57186568, "comment_id": 100883660, "body": "I am trying to understand why do we need the variable length.Also i did try to use paper and pen to get an idea, but i am not able to get the loop or the variable length"}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1563983269, "post_id": 57186568, "comment_id": 100883767, "body": "How would you swap e.g. first and last if you didn&#39;t know where the last one was?"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1563983271, "post_id": 57186568, "comment_id": 100883770, "body": "The parameter <code>char *pStr</code> is just a pointer, it doesn&#39;t tell you how long the string is. The length must be computed in your function."}, {"owner": {"reputation": 23, "user_id": 11730854, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b8jRv49oZ7M/AAAAAAAAAAI/AAAAAAAAEVg/ISA37Esa5BU/photo.jpg?sz=128", "display_name": "Prachi Rajesh Jansari", "link": "https://stackoverflow.com/users/11730854/prachi-rajesh-jansari"}, "edited": false, "score": 0, "creation_date": 1563983456, "post_id": 57186568, "comment_id": 100883871, "body": "i would be creating another array to then put the last element of string first"}, {"owner": {"reputation": 1084, "user_id": 2186074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rMRz.png?s=128&g=1", "display_name": "Jona", "link": "https://stackoverflow.com/users/2186074/jona"}, "edited": false, "score": 0, "creation_date": 1563983594, "post_id": 57186568, "comment_id": 100883934, "body": "It&#39;s more efficient here, at each position until the middle of the string, it swap the nth and the length-nth character. It only has to buffer one character instead of creating a temporary buffer the length of the string."}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1563996311, "post_id": 57186933, "comment_id": 100889751, "body": "are you sure that this is not a duplicate though"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1563996366, "post_id": 57186933, "comment_id": 100889784, "body": "@AnttiHaapala Maybe it is a duplicate question. I am just trying to answer any question."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1563996563, "post_id": 57186933, "comment_id": 100889861, "body": "Interesting, let&#39;s see how long you can do it :D"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1563985500, "last_edit_date": 1563985500, "creation_date": 1563983716, "answer_id": 57186933, "question_id": 57186568, "link": "https://stackoverflow.com/questions/57186568/i-need-help-understanding-the-code-for-reversing-a-string/57186933#57186933", "title": "I need help understanding the code for reversing a string", "body": "<p>Strings in C are sequences of characters terminated with a zero character <code>'\\0'</code>.</p>\n\n<p>So this loop </p>\n\n<pre><code>while(pStr[i]!='\\0')\n{\n    length++;\n    i++;\n}\n</code></pre>\n\n<p>calculates the length of the string that is how many characters there are in the string before the zero character. Instead of the loop you could use standard C function <code>strlen</code> declared in header <code>&lt;string.h&gt;</code>.</p>\n\n<p>This loop</p>\n\n<pre><code>for (int i = 0; i &lt; length / 2; i++) {\n    char temp = pStr[length - i - 1] ;\n    pStr[length - i - 1] = pStr[i];\n    pStr[i] = temp;\n}\n</code></pre>\n\n<p>swaps character from the first half of the string with characters of the second half of the string. That is the first character is swapped with the last character, the second character is swapped with the before last character and so on until the middle of the string.</p>\n\n<p>The function has several drawbacks. It could be written (without using standard C functions) the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar * ReverseString( char *pStr )\n{\n    size_t n = 0;\n\n    // Calculates the number of characters in the string \n    // excluding the zero character.\n    // SO the variable n will contain the number of characters in the string. \n    while ( pStr[n] != '\\0' ) ++n;\n\n    // Swaps characters from the first half of the string with \n    // the characters of the second half of the string.\n    // So the loop has only n / 2 iterations. \n    for ( size_t i = 0; i &lt; n / 2; i++ ) \n    {\n        char c = pStr[n - i - 1] ;\n        pStr[n - i - 1] = pStr[i];\n        pStr[i] = c;\n    }\n\n    return pStr;\n}\n\nint main( void ) \n{\n    char s[] = \"Prachi Rajesh Jansari\";\n\n    puts( s );\n    puts( ReverseString( s ) );\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>Prachi Rajesh Jansari\nirasnaJ hsejaR ihcarP\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11730854, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b8jRv49oZ7M/AAAAAAAAAAI/AAAAAAAAEVg/ISA37Esa5BU/photo.jpg?sz=128", "display_name": "Prachi Rajesh Jansari", "link": "https://stackoverflow.com/users/11730854/prachi-rajesh-jansari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1563985500, "creation_date": 1563982519, "last_edit_date": 1563983879, "question_id": 57186568, "link": "https://stackoverflow.com/questions/57186568/i-need-help-understanding-the-code-for-reversing-a-string", "title": "I need help understanding the code for reversing a string", "body": "<p>I need help understanding a function for reversing the array of string.</p>\n\n<p>I have been looking through a few codes, and just trying to understand it. It is a function using a pointer.</p>\n\n<pre><code>void ReverseString(char *pStr){\n    int length = 0;\n    int i = 0;\n\n    while(pStr[i]!='\\0')\n    {\n        length++;\n        i++;\n    }\n\n    for (int i = 0; i &lt; length / 2; i++) {\n        char temp = pStr[length - i - 1] ;\n        pStr[length - i - 1] = pStr[i];\n        pStr[i] = temp;\n    }\n}\n</code></pre>\n\n<p>I am expecting it to reverse a string; I have a <code>main</code> function that uses it.</p>\n"}, {"tags": ["c", "split", "scanf", "c-strings"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 1, "creation_date": 1563981470, "post_id": 57186177, "comment_id": 100882766, "body": "look at strtok function"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1563981543, "post_id": 57186177, "comment_id": 100882800, "body": "The proper solution is to use <code>strtod</code> making use of <code>endptr</code> parameter to step through the string retrieving doubles as you go. There are probably 50 examples on this site. You can also use <code>strtok</code> to tokenize the string, see <a href=\"https://stackoverflow.com/questions/47536394/how-to-extract-numbers-from-string-and-save-them-into-its-own-buffer/47543933?r=SearchResults&amp;s=4|26.8547#47543933\">How to extract numbers from string and save them into its own buffer?</a>."}, {"owner": {"reputation": 1549, "user_id": 8549281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jykz4.jpg?s=128&g=1", "display_name": "GOVIND DIXIT", "link": "https://stackoverflow.com/users/8549281/govind-dixit"}, "edited": false, "score": 0, "creation_date": 1563981632, "post_id": 57186177, "comment_id": 100882849, "body": "can you add your input and expected output?"}], "answers": [{"comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 3, "creation_date": 1563982016, "post_id": 57186379, "comment_id": 100883069, "body": "The question is about C as seen by the tags"}], "tags": [], "owner": {"reputation": 1, "user_id": 9931118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/woNaJ.jpg?s=128&g=1", "display_name": "Aviii04", "link": "https://stackoverflow.com/users/9931118/aviii04"}, "is_accepted": false, "score": -3, "last_activity_date": 1563981861, "creation_date": 1563981861, "answer_id": 57186379, "question_id": 57186177, "link": "https://stackoverflow.com/questions/57186177/reading-an-array-of-numbers-from-a-string/57186379#57186379", "title": "Reading an array of numbers from a string", "body": "<p>You can use split function of String Class.\nLets say your string is presents in 's'. Then you can do something like this -> <code>String[] str=s.split('\\\\s');</code> this will break string based on whitespaces and generate arrays of String.Now you have to convert this into double value so you can iterate through String array and convert into doble and store it in separate array like this-></p>\n\n<pre><code>for(String st: str)\n{\n  var=Double.parseDouble(st);\n}\n</code></pre>\n\n<p><strong>'var'</strong> could be array or variable where you want to store it.\nHope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1563982594, "last_edit_date": 1563982594, "creation_date": 1563982152, "answer_id": 57186450, "question_id": 57186177, "link": "https://stackoverflow.com/questions/57186177/reading-an-array-of-numbers-from-a-string/57186450#57186450", "title": "Reading an array of numbers from a string", "body": "<p>You can use for example the following approach.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void ) \n{\n    const char *s = \" 123.321 456.654 789.987\";\n    enum { N = 10 };\n    double a[N] = { 0.0 };\n\n    int pos = 0;\n    size_t n = 0;\n    while ( n &lt; N &amp;&amp; sscanf( s += pos, \"%lf%n\", a + n, &amp;pos ) == 1 ) n++;\n\n    for ( size_t i = 0; i &lt; n; i++ ) printf( \"%.3f \", a[i] );\n    putchar( '\\n' );\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>123.321 456.654 789.987\n</code></pre>\n\n<p>Or you can introduce an intermediate pointer of the type <code>const char *</code> if you need to keep the original address of the string in the variable <code>s</code>.</p>\n\n<p>For example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void ) \n{\n    const char *s = \" 123.321 456.654 789.987\";\n    enum { N = 10 };\n    double a[N] = { 0.0 };\n\n    int pos = 0;\n    size_t n = 0;\n    const char *p = s;\n    while ( n &lt; N &amp;&amp; sscanf( p += pos, \"%lf%n\", a + n, &amp;pos ) == 1 ) n++;\n\n    for ( size_t i = 0; i &lt; n; i++ ) printf( \"%.3f \", a[i] );\n    putchar( '\\n' );\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11720244, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J2WMJFXLr-0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd363vgYR5dpKqUSfdoeKKAe2A9mw/photo.jpg?sz=128", "display_name": "Aviv Schwarz", "link": "https://stackoverflow.com/users/11720244/aviv-schwarz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 57186450, "answer_count": 2, "score": 1, "last_activity_date": 1563986460, "creation_date": 1563981240, "last_edit_date": 1563986460, "question_id": 57186177, "link": "https://stackoverflow.com/questions/57186177/reading-an-array-of-numbers-from-a-string", "title": "Reading an array of numbers from a string", "body": "<p>I have a string which contains hundreds of double values separated by spaces, and I need to read them into an array.</p>\n\n<p>Obviously, using <code>sscanf(\"%lf %lf .... \",array[0], array[1],...)</code> is not a sane option. I could save this string to a file and use <code>fscanf</code> since the \"head\" moves forward when reading from a file. I want to know if there another way to do this.</p>\n"}, {"tags": ["c", "operating-system", "virtual-memory", "pintos"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1563981201, "post_id": 57186091, "comment_id": 100882632, "body": "It does two lookups. First it does &lt;userspace addr&gt; -&gt; &lt;physical addr&gt;, then it does &lt;physical addr&gt; -&gt; &lt;kernel addr&gt;. It gives you a kernel-space address that accesses the same location as a given user-space address."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1563981369, "post_id": 57186091, "comment_id": 100882719, "body": "A clue is in &quot;or a null pointer if UADDR is unmapped.&quot; Physical addresses can&#39;t be accessed directly."}, {"owner": {"reputation": 140, "user_id": 11031025, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G0E69dIUmZc/AAAAAAAAAAI/AAAAAAAAAI0/x45Z7IK0ZAY/photo.jpg?sz=128", "display_name": "Tony Lucas", "link": "https://stackoverflow.com/users/11031025/tony-lucas"}, "reply_to_user": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1563981727, "post_id": 57186091, "comment_id": 100882914, "body": "@ThomasJager thanks, then what is this function used for?"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1563982293, "post_id": 57186091, "comment_id": 100883209, "body": "@TonyLucas Presumably to let kernel-level code do something to a given piece of user-space memory."}], "answers": [{"comments": [{"owner": {"reputation": 140, "user_id": 11031025, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G0E69dIUmZc/AAAAAAAAAAI/AAAAAAAAAI0/x45Z7IK0ZAY/photo.jpg?sz=128", "display_name": "Tony Lucas", "link": "https://stackoverflow.com/users/11031025/tony-lucas"}, "edited": false, "score": 0, "creation_date": 1563982770, "post_id": 57186552, "comment_id": 100883489, "body": "thanks for your answer. I think this function is used to <b>As part of a system call, the kernel must often access memory through pointers provided by a user program. The kernel must be very careful about doing so, because the user can pass a null pointer, a pointer to unmapped virtual memory, or a pointer to kernel virtual address space (above PHYS BASE).</b> so I guess, I can use this function to check if this user virtual address is unmapped and if it points to a kernel virtual address(this is not good, because user programs are not able to make changes to kernel memory)."}, {"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "reply_to_user": {"reputation": 140, "user_id": 11031025, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G0E69dIUmZc/AAAAAAAAAAI/AAAAAAAAAI0/x45Z7IK0ZAY/photo.jpg?sz=128", "display_name": "Tony Lucas", "link": "https://stackoverflow.com/users/11031025/tony-lucas"}, "edited": false, "score": 0, "creation_date": 1563982893, "post_id": 57186552, "comment_id": 100883558, "body": "@TonyLucas yes, that&#39;s probably one of the uses. Checking if a user page is valid before touching it is crucial to the correct functioning of the kernel."}], "tags": [], "owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "is_accepted": true, "score": 1, "last_activity_date": 1563983059, "last_edit_date": 1563983059, "creation_date": 1563982464, "answer_id": 57186552, "question_id": 57186091, "link": "https://stackoverflow.com/questions/57186091/understanding-the-relation-between-user-kernel-and-physical-addresses-in-pagedi/57186552#57186552", "title": "Understanding the relation between user, kernel and physical addresses in pagedir_get_page()", "body": "<p>There are three kinds of addresses that the comment is talking about:</p>\n\n<ol>\n<li>Physical address: this is the <strong>real</strong> address, I.E. the real exact position in the physical memory of your computer. </li>\n<li>Kernel <em>virtual</em> address: this is the virtual address at which the kernel sees that physical address.</li>\n<li>User <em>virtual</em> address: this is the virtual address at which the user space program sees that physical address.</li>\n</ol>\n\n<p>So, with a simple ASCII art, this is the situation:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> User space    \n  program 1         Kernel            RAM\n+-----------+    +-----------+    +-----------+\n| 0xAAAA000 |    | 0x1212000 |    | 0xA7EF000 |\n| 0xBBBB000 |    | 0x4398000 |    | 0x0001000 |\n| 0xCCCC000 |&lt;---| 0x87FF000 |&lt;---| 0x1234000 |\n+-----------+    | ...       |    | ...       |\n                 | ...       |    | ...       |\n User space      | ...       |    | ...       |\n  program 2      | ...       |    | ...       |\n+-----------+    | ...       |    | ...       |\n| 0xDDDD000 |    | 0x7FF8000 |    | 0x3FFF000 |\n| 0xEEEE000 |    | 0xABCD000 |    | 0x2010000 |\n| 0xFFFF000 |&lt;---| 0x98AE000 |&lt;---| 0xA89A000 |\n+-----------+    +-----------+    +-----------+\n</code></pre>\n\n<p>That function, given a valid <em>user space virtual address</em>, makes a lookup and retrieves the associated <em>kernel space virtual address</em>. This lookup can be done since both of them point to the same <em>physical address</em>, and there's a one-to-one correspondence between those. The lookup is done through the <a href=\"https://en.wikipedia.org/wiki/Page_table\" rel=\"nofollow noreferrer\">Kernel Page Table</a>, which is probably what those two calls to <code>lookup_page(...)</code> and <code>pte_get_page(...)</code> do.</p>\n"}], "owner": {"reputation": 140, "user_id": 11031025, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G0E69dIUmZc/AAAAAAAAAAI/AAAAAAAAAI0/x45Z7IK0ZAY/photo.jpg?sz=128", "display_name": "Tony Lucas", "link": "https://stackoverflow.com/users/11031025/tony-lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 57186552, "answer_count": 1, "score": 2, "last_activity_date": 1563986423, "creation_date": 1563980970, "last_edit_date": 1563986423, "question_id": 57186091, "link": "https://stackoverflow.com/questions/57186091/understanding-the-relation-between-user-kernel-and-physical-addresses-in-pagedi", "title": "Understanding the relation between user, kernel and physical addresses in pagedir_get_page()", "body": "<p>I am confused about the following comment:</p>\n\n<pre><code>/* Looks up the physical address that corresponds to user virtual\naddress UADDR in PD.  Returns the kernel virtual address\ncorresponding to that physical address, or a null pointer if\nUADDR is unmapped. */\n</code></pre>\n\n<p>I understand the first sentence which is to find the actual physical address, however, I don't understand why the <strong>kernel</strong> virtual address correspond to that address is returned. In short, since uaddr is a <strong>user</strong> virtual address, then why is it related to <strong>kernel</strong> virtual address?</p>\n\n<pre><code>void *\npagedir_get_page (uint32_t *pd, const void *uaddr)\n{\n  uint32_t *pte;\n\n  ASSERT (is_user_vaddr (uaddr));\n\n  pte = lookup_page (pd, uaddr, false);\n  if (pte != NULL &amp;&amp; (*pte &amp; PTE_P) != 0)\n    return pte_get_page (*pte) + pg_ofs (uaddr);\n  else\n    return NULL;\n}\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "gcc", "linker", "embedded", "linker-scripts"], "comments": [{"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 0, "creation_date": 1563983622, "post_id": 57185792, "comment_id": 100883950, "body": "<code>What are the exact implications of defining a section in the linker script instead of don&#39;t do it?</code> That if you don&#39;t you&#39;re leaving that decision up to the linker..."}], "answers": [{"tags": [], "owner": {"reputation": 38430, "user_id": 429063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd38783123814dee889d28c991e56fb?s=128&d=identicon&r=PG", "display_name": "Chris Stratton", "link": "https://stackoverflow.com/users/429063/chris-stratton"}, "is_accepted": true, "score": 2, "last_activity_date": 1563998207, "last_edit_date": 1563998207, "creation_date": 1563983990, "answer_id": 57187020, "question_id": 57185792, "link": "https://stackoverflow.com/questions/57185792/wrong-virtual-memory-address-if-section-is-not-defined-in-the-linker-script/57187020#57187020", "title": "Wrong Virtual Memory Address if section is not defined in the linker script", "body": "<p>First, you appear to be using something like an ARM part (maybe an STM32?) where flash is at 0x08000000 and RAM is at 0x20000000.</p>\n\n<p>In your first case, what you have effectively (if perhaps unintentionally) specified is the fairly usual storage of initialized data in RAM, and the C startup routine should be copying the initialization for it from flash to RAM for use.  If you are not seeing it in RAM, likely there's either a problem with the copy routine (missing from custom start files?) or else you are looking with the debugger before that has run.</p>\n\n<p>Unless you setup your linker script otherwise, you may find that this is how <em>all</em> initialized global data (such as that defined in source files) in your program is handled.</p>\n\n<p>In the second case, you are specifying data which is accessed directly from flash.</p>\n\n<p>Note that things like the Cortex-M processors have quasi-Harvard data paths optimized for <em>data</em> access to RAM (and code access to flash), while doing data access to flash is supported it can incur arbitration overhead.  Of course many parts also have limited RAM, so copying initialized but constant data to RAM may use resources better saved for things which actually need to be modified at runtime.</p>\n\n<p>Finally to address a specific nitpick:</p>\n\n<blockquote>\n  <p>When I run the binary, effectively the address of the symbol pub_key_start is 0x20000674, but that address is not accessible. The actual data is in 0x08039e04.</p>\n</blockquote>\n\n<p>That is incorrect - address 0x20000674 is <em>accessible</em> (ie, trying to do so does not cause a fault), it merely does not (yet) contain the data you expect it to.  That would be distinct from trying to access an address which is actually not <em>accessible</em> (such as many cases of de-referencing a pointer that was never remotely valid and points where nothing exists) which will typically fault.</p>\n"}], "owner": {"reputation": 1817, "user_id": 4030665, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/4030665/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 1, "accepted_answer_id": 57187020, "answer_count": 1, "score": 1, "last_activity_date": 1563998207, "creation_date": 1563980065, "question_id": 57185792, "link": "https://stackoverflow.com/questions/57185792/wrong-virtual-memory-address-if-section-is-not-defined-in-the-linker-script", "title": "Wrong Virtual Memory Address if section is not defined in the linker script", "body": "<p>I want to insert an array of bytes in a binary, but in a particular section, so I can update this section later using <code>objcopy</code>.</p>\n\n<h2>Step 1 - Failure</h2>\n\n<p>If I declare the array by doing <code>volatile const __attribute__((section(\".pub_key\"))) uint8_t pub_key_start[10] = \"10 characters\"</code> when I <code>objdump</code> the generated <code>elf</code> file I can see the following: </p>\n\n<pre><code>Sections:\nIdx Name          Size      VMA       LMA       File off  Algn\n...\n6 .pub_key      00000018  20000674  08039e04  00040674  2**2\n...\n</code></pre>\n\n<p>Notice that VMA and LMA are different. When I run the binary, effectively the address of the symbol <code>pub_key_start</code> is <code>0x20000674</code>, but that address is not accessible. The actual data is in <code>0x08039e04</code>.</p>\n\n<h2>Step 2 - Success</h2>\n\n<p>However, if I define a section in the linker script such as:</p>\n\n<pre><code>.pub_key :\n  {\n    . = ALIGN(4);\n\n    _pub_key_sec_start = .;\n    *(.pub_key)\n    *(.pub_key*)\n    _pub_key_sec_end = .;\n\n    . = ALIGN(4);\n  } &gt;SOME_REGION\n</code></pre>\n\n<p>after building and using egain <code>objdump</code> with the <code>elf</code> file, I obtain:</p>\n\n<pre><code>Sections:\nIdx Name          Size      VMA       LMA       File off  Algn\n...\n  6 .pub_key      00000018  08039e04  08039e04  00049e04  2**2\n...\n</code></pre>\n\n<p>Notice that, now, VMA and LMA are the same. </p>\n\n<p>If now I debug with <code>gdb</code>, I can confirm that the address of the symbol <code>pub_key_start</code> is <code>0x08039e04</code>, and I can access the array as usual (<code>pub_key_start[n]</code>).</p>\n\n<p><strong>Why does this happen?</strong></p>\n\n<p><strong>What are the exact implications of defining a section in the linker script instead of don't do it?</strong></p>\n"}, {"tags": ["c", "vhdl", "xilinx", "xilinx-ise", "spartan"], "comments": [{"owner": {"reputation": 1590, "user_id": 3796272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zqSzP.jpg?s=128&g=1", "display_name": "Kampi", "link": "https://stackoverflow.com/users/3796272/kampi"}, "edited": false, "score": 0, "creation_date": 1563979457, "post_id": 57185487, "comment_id": 100881624, "body": "Why you don&#180;t use Xilinx <a href=\"https://www.xilinx.com/products/design-tools/vivado/integration/esl-design.html\" rel=\"nofollow noreferrer\">HLS</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 726, "user_id": 11583672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nmhaz.jpg?s=128&g=1", "display_name": "Giampietro Seu", "link": "https://stackoverflow.com/users/11583672/giampietro-seu"}, "is_accepted": true, "score": 0, "last_activity_date": 1563979757, "creation_date": 1563979757, "answer_id": 57185693, "question_id": 57185487, "link": "https://stackoverflow.com/questions/57185487/how-to-move-the-numerical-calculation-part-from-vhdl-code-to-c-can-run-it-on-nex/57185693#57185693", "title": "How to move the numerical calculation part from VHDL code to C can run it on NEXY3 Spartan 6 board", "body": "<p>You have to add a soft processor to your project using EDK and synthesize the new project. Then you can write the software code to run on the soft processor using SDK (Software Development Kit).</p>\n"}], "owner": {"reputation": 3, "user_id": 10778384, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fMTphKp5vos/AAAAAAAAAAI/AAAAAAAAABI/F7Tj9PjQba0/photo.jpg?sz=128", "display_name": "Harvey Wang", "link": "https://stackoverflow.com/users/10778384/harvey-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 57185693, "answer_count": 1, "score": -1, "last_activity_date": 1563979757, "creation_date": 1563979104, "question_id": 57185487, "link": "https://stackoverflow.com/questions/57185487/how-to-move-the-numerical-calculation-part-from-vhdl-code-to-c-can-run-it-on-nex", "title": "How to move the numerical calculation part from VHDL code to C can run it on NEXY3 Spartan 6 board", "body": "<p>I am currently working on a project which requires to use a embedded soft core. I wrote a pong game using VHDL (ISE) and synthesised it onto the FPGA, the next step is going to shift the numerical calculation part to soft core which means i need to rewirte this code in C. However, ISE can not achieve this function, what design suite (software) i can use? Can EDK work? </p>\n"}, {"tags": ["python", "c", "class", "cython"], "comments": [{"owner": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "edited": false, "score": 1, "creation_date": 1563980485, "post_id": 57185219, "comment_id": 100882212, "body": "Did you define a <code>@staticmethod</code> function for your <code>WrapperClass</code> called <code>from_ptr</code>?"}, {"owner": {"reputation": 633, "user_id": 7482208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28673a77dc1376a5de583d08e8bace26?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Mishalkin", "link": "https://stackoverflow.com/users/7482208/ivan-mishalkin"}, "reply_to_user": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "edited": false, "score": 0, "creation_date": 1564044114, "post_id": 57185219, "comment_id": 100903987, "body": "@CodeSurgeon, Yes. Changes in method are minimal. Literaly I added only one assignment, in doc example terms it looks like <code>wrapper.new_var = _ptr.b</code> and of course I added <code>cdef int * new_var</code> at the beginning of the class"}, {"owner": {"reputation": 633, "user_id": 7482208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28673a77dc1376a5de583d08e8bace26?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Mishalkin", "link": "https://stackoverflow.com/users/7482208/ivan-mishalkin"}, "reply_to_user": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "edited": false, "score": 0, "creation_date": 1564051095, "post_id": 57185219, "comment_id": 100907946, "body": "@DavidW, as an expert in cython, can you, please point me out the mistake?"}, {"owner": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "edited": false, "score": 2, "creation_date": 1564060309, "post_id": 57185219, "comment_id": 100913081, "body": "In your not working example on github, when you use a .pxd (header) file, all cdef and cpdef functions need to be listed there as well (without the implementation/function body). That way, these functions are accessible when you cimport the class into other .pyx modules. That is why your main.pyx can&#39;t find the WrapperClass&#39;s from_ptr function."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1564060569, "post_id": 57185219, "comment_id": 100913232, "body": "@IvanMishalkin - the comma after my name meant I didn&#39;t get notified (might be useful to know this...). CodeSurgeon is right though (and should probably write this up as an answer)"}, {"owner": {"reputation": 633, "user_id": 7482208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28673a77dc1376a5de583d08e8bace26?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Mishalkin", "link": "https://stackoverflow.com/users/7482208/ivan-mishalkin"}, "reply_to_user": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "edited": false, "score": 0, "creation_date": 1564069179, "post_id": 57185219, "comment_id": 100918264, "body": "@CodeSurgeon thanks a lot, if you post your comment I&#39;ll mark it as answer. I also edited my git repo, so now everything works fine <a href=\"https://github.com/iamishalkin/cython_class_issue/tree/master/not%20working(fixed)\" rel=\"nofollow noreferrer\">git</a>"}, {"owner": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "edited": false, "score": 0, "creation_date": 1564069390, "post_id": 57185219, "comment_id": 100918389, "body": "Alright, I have posted it as an answer now. Glad to see it works."}], "answers": [{"tags": [], "owner": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "is_accepted": true, "score": 1, "last_activity_date": 1564069359, "creation_date": 1564069359, "answer_id": 57205811, "question_id": 57185219, "link": "https://stackoverflow.com/questions/57185219/error-when-passing-pointer-to-imported-extension-type-method-while-having-no-pro/57205811#57205811", "title": "Error when passing pointer to imported Extension type method while having no problem with the same class without import", "body": "<p>In your not working example on github, when you use a <code>.pxd</code> (header) file, all <code>cdef</code> and <code>cpdef</code> functions need to be listed there as well (without the implementation/function body). That way, these functions are accessible when you <code>cimport</code> the class into other <code>.pyx</code> modules. That is why your <code>main.pyx</code> can't find the <code>WrapperClass</code>'s <code>from_ptr</code> function.</p>\n"}], "owner": {"reputation": 633, "user_id": 7482208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28673a77dc1376a5de583d08e8bace26?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Mishalkin", "link": "https://stackoverflow.com/users/7482208/ivan-mishalkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 57205811, "answer_count": 1, "score": 0, "last_activity_date": 1564070138, "creation_date": 1563978237, "last_edit_date": 1564070138, "question_id": 57185219, "link": "https://stackoverflow.com/questions/57185219/error-when-passing-pointer-to-imported-extension-type-method-while-having-no-pro", "title": "Error when passing pointer to imported Extension type method while having no problem with the same class without import", "body": "<p><strong>IMPORTANT UPDATE</strong>: reproducible example <a href=\"https://github.com/iamishalkin/cython_class_issue\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>I have code similar to one in <a href=\"https://cython.readthedocs.io/en/latest/src/userguide/extension_types.html#instantiation-from-existing-c-c-pointers\" rel=\"nofollow noreferrer\">documentation</a>, so that the class is created from pointer. It works perfectly, when both class definition and class instance creation are in the same file.</p>\n\n<p>main.pyx:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>cdef some_type * ptr_to_wrapped_type = &lt;some_type *&gt;malloc(sizeof(some_type))\n\n#next part from documentation\ncdef class WrapperClass:\n    \"\"\"A wrapper class for a C/C++ data structure\"\"\"\n    cdef my_c_struct *_ptr\n    cdef bint ptr_owner\n\n    @staticmethod\n    cdef WrapperClass from_ptr(my_c_struct *_ptr, bint owner=False):\n        \"\"\"Factory function to create WrapperClass objects from\n        given my_c_struct pointer.\n        Setting ``owner`` flag to ``True`` causes\n        the extension type to ``free`` the structure pointed to by ``_ptr``\n        when the wrapper object is deallocated.\"\"\"\n        # Call to __new__ bypasses __init__ constructor\n        cdef WrapperClass wrapper = WrapperClass.__new__(WrapperClass)\n        wrapper._ptr = _ptr\n        wrapper.ptr_owner = owner\n        return wrapper\n...\n\ndata = WrapperClass.from_ptr(ptr_to_wrapped_type, owner=True)\n</code></pre>\n\n<p>What I want is to move class definition into separate file and import it in main. This is also described in <a href=\"https://cython.readthedocs.io/en/latest/src/userguide/sharing_declarations.html#sharing-extension-types\" rel=\"nofollow noreferrer\">docs</a> and that's what I have:</p>\n\n<p>wrapper.pxd:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># Example C struct\nctypedef struct my_c_struct:\n    int a\n    int b\n\ncdef class WrapperClass:\n    \"\"\"A wrapper class for a C/C++ data structure\"\"\"\n    cdef my_c_struct *_ptr\n    cdef bint ptr_owner\n</code></pre>\n\n<p>wrapper.pyx(class definition from <a href=\"https://cython.readthedocs.io/en/latest/src/userguide/extension_types.html#instantiation-from-existing-c-c-pointers\" rel=\"nofollow noreferrer\">docs</a>):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from libc.stdlib cimport malloc, free\n\ncdef class WrapperClass:\n    \"\"\"A wrapper class for a C/C++ data structure\"\"\"\n    cdef my_c_struct *_ptr\n    cdef bint ptr_owner\n\n    def __cinit__(self):\n        self.ptr_owner = False\n\n    def __dealloc__(self):\n        # De-allocate if not null and flag is set\n        if self._ptr is not NULL and self.ptr_owner is True:\n            free(self._ptr)\n            self._ptr = NULL\n\n    @staticmethod\n    cdef WrapperClass from_ptr(my_c_struct *_ptr, bint owner):\n        \"\"\"Factory function to create WrapperClass objects from\n        given my_c_struct pointer.\n        Setting ``owner`` flag to ``True`` causes\n        the extension type to ``free`` the structure pointed to by ``_ptr``\n        when the wrapper object is deallocated.\"\"\"\n        # Call to __new__ bypasses __init__ constructor\n        cdef WrapperClass wrapper = WrapperClass.__new__(WrapperClass)\n        wrapper._ptr = _ptr\n        wrapper.ptr_owner = owner\n        return wrapper\n...\n</code></pre>\n\n<p>And finally in main.pyx:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>cdef some_type * ptr_to_wrapped_type = &lt;some_type *&gt;malloc(sizeof(some_type))\n\nfrom wrapper cimport WrapperClass\n\ndata = WrapperClass.from_ptr(ptr_to_wrapped_type, owner=True)\n</code></pre>\n\n<p>Unfortunately, at compilation I get an Error: </p>\n\n<pre><code>data = WrapperClass.from_ptr(ptr_to_wrapped_type, owner=True)\n                            ^\n------------------------------------------------------------\n\nCannot convert 'some_type *' to Python object\n</code></pre>\n\n<p>What is wrong?</p>\n"}, {"tags": ["c", "embedded", "stm32", "firmware", "cmsis"], "answers": [{"tags": [], "owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "is_accepted": false, "score": 2, "last_activity_date": 1563979141, "last_edit_date": 1563979141, "creation_date": 1563978527, "answer_id": 57185312, "question_id": 57185147, "link": "https://stackoverflow.com/questions/57185147/understanding-the-execution-of-command-simd32pin-in-embedded-c/57185312#57185312", "title": "Understanding the execution of command *__SIMD32(pIn)++ in embedded C", "body": "<p>It's just some preprocessor magic,  <code>*__SIMD32(pIn)++</code>, with the definitions you show after the preprocessor becomes <code>*(*(int32_t **) &amp; (pIn))++</code>. This gives you a 32 bit read of <code>pIn</code>, and then increments <code>pIn</code> by 32 bits. See <a href=\"https://books.google.co.uk/books?id=9YxqAAAAQBAJ&amp;lpg=PA685&amp;ots=Ub84ObfEhG&amp;dq=__SIMD32%20cmsis&amp;pg=PA685#v=onepage&amp;q&amp;f=false\" rel=\"nofollow noreferrer\">here</a> for more detail.</p>\n"}], "owner": {"reputation": 1, "user_id": 11830888, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ywkT3dq1wg4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcafQHXPWQRWE8isKXL-gSyctqOcdg/mo/photo.jpg?sz=128", "display_name": "Alok Y", "link": "https://stackoverflow.com/users/11830888/alok-y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564082081, "creation_date": 1563978049, "last_edit_date": 1564082081, "question_id": 57185147, "link": "https://stackoverflow.com/questions/57185147/understanding-the-execution-of-command-simd32pin-in-embedded-c", "title": "Understanding the execution of command *__SIMD32(pIn)++ in embedded C", "body": "<pre><code>    int8_t scratchbuffer[27000];\n\n    *pV = scratchbuffer;\n    *pSRC=pV;\n    *pIn=pSRC;\n</code></pre>\n\n<p>I need to understand solving of *__SIMD32(pIn)++</p>\n\n<p>The definitions are mentioned below.</p>\n\n<pre><code>    #define __SIMD32_TYPE int32_t\n    #define __SIMD32(addr)        (*(__SIMD32_TYPE **) &amp; (addr))\n</code></pre>\n\n<p>Step by step, how do we reach to the output, and what would be the output ?</p>\n\n<p>I tried searching internet for explanations, but couldn't find any. </p>\n"}, {"tags": ["c", "struct", "initialization"], "comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 6, "creation_date": 1563976774, "post_id": 57184642, "comment_id": 100879891, "body": "The last one works. You just forgot the <code>=</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3783, "user_id": 2428235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sj48p.jpg?s=128&g=1", "display_name": "Roman Hocke", "link": "https://stackoverflow.com/users/2428235/roman-hocke"}, "is_accepted": false, "score": 1, "last_activity_date": 1563976972, "creation_date": 1563976972, "answer_id": 57184808, "question_id": 57184642, "link": "https://stackoverflow.com/questions/57184642/c-initialize-struct-with-constant-sub-struct/57184808#57184808", "title": "C: Initialize struct with constant sub-struct", "body": "<p>This works for me (maybe You're just missing <code>=</code> in initialization):</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\ntypedef struct {\n  int n;\n} example_type;\n\nstruct {\n  int some_variables;\n  // ...\n  const example_type t1;\n  const example_type t2;\n  // ...\n} single_instance = {0, {1}, {2}};\n\nint main() {\n\n    printf(\"%d %d %d\\n\", single_instance.some_variables, single_instance.t1.n, single_instance.t2.n);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": true, "score": 3, "last_activity_date": 1563980082, "last_edit_date": 1563980082, "creation_date": 1563977238, "answer_id": 57184900, "question_id": 57184642, "link": "https://stackoverflow.com/questions/57184642/c-initialize-struct-with-constant-sub-struct/57184900#57184900", "title": "C: Initialize struct with constant sub-struct", "body": "<p>You can use <em>designated initializers</em> to explicitly initialize the members you are interested in. The remaining members will then be implicitly initialized to 0.</p>\n\n<pre><code>struct {\n  int some_variables;\n  // ...\n  const example_type t1;\n  const example_type t2;\n  // ...\n} single_instance = {.t1 = {1}, .t2 = {2}};\n</code></pre>\n"}], "owner": {"reputation": 348, "user_id": 10997590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ef5dc430c2faa25b7f95b983171ad9?s=128&d=identicon&r=PG&f=1", "display_name": "Danish", "link": "https://stackoverflow.com/users/10997590/danish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 57184900, "answer_count": 2, "score": 0, "last_activity_date": 1563980082, "creation_date": 1563976517, "question_id": 57184642, "link": "https://stackoverflow.com/questions/57184642/c-initialize-struct-with-constant-sub-struct", "title": "C: Initialize struct with constant sub-struct", "body": "<p>I have a single instantiation of a struct called <code>single_instance</code>. This instance contains constants objects of type <code>struct example_type</code>.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>typedef struct {\n  int n;\n} example_type;\n\nstruct {\n  int some_variables;\n  // ...\n  const example_type t1;\n  const example_type t2;\n  // ...\n} single_instance;\n</code></pre>\n\n<p>Let's say that I want to init <code>single_instance.t1</code> to <code>{1}</code> and <code>single_instance.t2</code> to <code>{2}</code>. </p>\n\n<p><strong>What is the most elegant way to do so?</strong></p>\n\n<p>Inline initialization is not possible: </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct {\n  int some_variables;\n  // ...\n  const example_type t1 = {1};\n  const example_type t2 = {2};\n  // ...\n} single_instance;\n</code></pre>\n\n<p>This doesn't work too:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct {\n  int some_variables;\n  // ...\n  const example_type t1;\n  const example_type t2;\n  // ...\n} single_instance {0, {0}, {1}};\n</code></pre>\n\n<p>I have read multiple other threads related to this topic, however it seems that they all refer to initialize structs with \"a name\".  In this case I want just one instantiation of <code>single_instance</code>, as such the type should not have a name.</p>\n"}, {"tags": ["c", "function", "gcc", "arm"], "comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 3, "creation_date": 1563978110, "post_id": 57184557, "comment_id": 100880732, "body": "Those cannot be equivalent instruction sequences; one has a call to a function (<code>__gnu_mcount_nc</code>) that the other does not. If they were compiled from the same code, that suggests the differences are due to conditional inclusion or other preprocessor effects, or possibly compile-time optimizations that depend on expressions that use preprocessor symbols. You should provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, including the source code that was compiled, the name and version of the compiler, the exact compiler command lines used (with all switches), and the assembly output from the compiler (rather than disassembly)."}], "answers": [{"tags": [], "owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "is_accepted": true, "score": 7, "last_activity_date": 1563979690, "last_edit_date": 1563979690, "creation_date": 1563978717, "answer_id": 57185379, "question_id": 57184557, "link": "https://stackoverflow.com/questions/57184557/why-gcc-produce-different-assembly-result-for-user-and-kernel-level-code/57185379#57185379", "title": "Why gcc produce different assembly result for user and kernel level code", "body": "<p>You have compiled the code with wildly different options.  The first is ARM (32bit only) and the 2nd is Thumb2 (mixed 16/32bit); see hex opcodes at the side.  Thumb2 used the first 8 registers in a compact way (16bit encodings) so the call interface is different.  Ie, fp is r7 versus r12.  This is why you are seeing different call sequences for the same code.</p>\n\n<p>Also, the first has profiling enabled (why __gnu_mcount_nc is inserted).  </p>\n\n<p>It really has nothing to do with 'kernel' versus 'user' code.  It is possible to compile user code with similar option as the kernel uses.  There are many gcc command line options which affect the 'call interface' (search AAPCS for more information and the gcc ARM options help).</p>\n\n<p>Related: <a href=\"https://stackoverflow.com/questions/15752188/arm-link-register-and-frame-pointer\">ARM Link and frame pointer</a></p>\n"}], "owner": {"reputation": 559, "user_id": 3576334, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fjRbx.jpg?s=128&g=1", "display_name": "alireza sadeghpour", "link": "https://stackoverflow.com/users/3576334/alireza-sadeghpour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 57185379, "answer_count": 1, "score": 0, "last_activity_date": 1563979690, "creation_date": 1563976271, "last_edit_date": 1563976508, "question_id": 57184557, "link": "https://stackoverflow.com/questions/57184557/why-gcc-produce-different-assembly-result-for-user-and-kernel-level-code", "title": "Why gcc produce different assembly result for user and kernel level code", "body": "<p>I am trying to learn function call grammar in arm architecture and i compiled same code for user mode app and loadable kernel module. in attached picture you can see disassembly result for same function in two different mode. i am curious about reason of this difference.<a href=\"https://i.stack.imgur.com/ocPGY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ocPGY.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "cross-compiling", "sdl-2"], "comments": [{"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 2, "creation_date": 1563978325, "post_id": 57184191, "comment_id": 100880865, "body": "<code>char**</code> and <code>char const **</code> are different types. Write your <code>main</code> exactly as <code>int main(int argc, char *argv[])</code> (or <code>char **argv</code> as these types are equivalent here). It is answered in <a href=\"https://wiki.libsdl.org/FAQWindows#I_get_.22Undefined_reference_to_.27SDL_main.27.22_...\" rel=\"nofollow noreferrer\">SDL windows FAQ</a>"}, {"owner": {"reputation": 83, "user_id": 11717823, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dwk_9YLjRH0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtWwU4pHVgEnWgd1knpBd1K8oROw/photo.jpg?sz=128", "display_name": "Andr&#233; P&#225;scoa", "link": "https://stackoverflow.com/users/11717823/andr%c3%a9-p%c3%a1scoa"}, "reply_to_user": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1563983861, "post_id": 57184191, "comment_id": 100884077, "body": "Okay Thank you so much!,new errors, linker errors arrived, but I&#39;ll search those up and create a new thread if necessary Thank you!(Btw I&#39;m new in stack overflow how do I close a thread?)"}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 1, "creation_date": 1563985545, "post_id": 57184191, "comment_id": 100884935, "body": "As there is no answer here you write one and accept it. I&#39;d argue lazyfoo tutorials are not good for C as it silently makes some C++ assumptions."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1564000302, "post_id": 57184191, "comment_id": 100891355, "body": "On MinGW you need <code>-lmingw32 -lSDL2main -lSDL2</code> rather than just <code>-lSDL2</code>."}, {"owner": {"reputation": 83, "user_id": 11717823, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dwk_9YLjRH0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtWwU4pHVgEnWgd1knpBd1K8oROw/photo.jpg?sz=128", "display_name": "Andr&#233; P&#225;scoa", "link": "https://stackoverflow.com/users/11717823/andr%c3%a9-p%c3%a1scoa"}, "edited": false, "score": 0, "creation_date": 1564002702, "post_id": 57184191, "comment_id": 100892216, "body": "Thank you HolyBlackCat! had a bit time off and was great to have my problem resolved when I got back."}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 11717823, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dwk_9YLjRH0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtWwU4pHVgEnWgd1knpBd1K8oROw/photo.jpg?sz=128", "display_name": "Andr&#233; P&#225;scoa", "link": "https://stackoverflow.com/users/11717823/andr%c3%a9-p%c3%a1scoa"}, "is_accepted": true, "score": 0, "last_activity_date": 1564003115, "creation_date": 1564003115, "answer_id": 57191391, "question_id": 57184191, "link": "https://stackoverflow.com/questions/57184191/cant-create-executable-for-running-sdl-game-in-windowserror-previous-declarat/57191391#57191391", "title": "Can&#39;t create executable for running SDL game in windows(error: previous declaration of SDL_main was ...)", "body": "<p>Okay so, as <a href=\"https://stackoverflow.com/users/744720/keltar\">keltar</a> mencioned it looks like the problem was that in my program, <pre><code>int main(int argc, char const *argv[])</code> </pre> the argv array was constant which as stated in <a href=\"https://wiki.libsdl.org/FAQWindows#I_get_.22Undefined_reference_to_.27SDL_main.27.22_...\" rel=\"nofollow noreferrer\">here</a> it won't work.\nSo the correct code would be:</p>\n\n<pre>\n\n    int main(int argc, char *argv[])\n\n</pre>\n"}], "owner": {"reputation": 83, "user_id": 11717823, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dwk_9YLjRH0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtWwU4pHVgEnWgd1knpBd1K8oROw/photo.jpg?sz=128", "display_name": "Andr&#233; P&#225;scoa", "link": "https://stackoverflow.com/users/11717823/andr%c3%a9-p%c3%a1scoa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 658, "favorite_count": 0, "accepted_answer_id": 57191391, "answer_count": 1, "score": 1, "last_activity_date": 1564003115, "creation_date": 1563975205, "last_edit_date": 1563975510, "question_id": 57184191, "link": "https://stackoverflow.com/questions/57184191/cant-create-executable-for-running-sdl-game-in-windowserror-previous-declarat", "title": "Can&#39;t create executable for running SDL game in windows(error: previous declaration of SDL_main was ...)", "body": "<p>I've created a game with SDL2 library in ubuntu with the atom editor, and for compiling created a makefile with this code:</p>\n\n<pre>game: main.c LoadGame.c Events.c CreateTex.c CollisionDetection.c Render.c gameStatus.c\n    gcc main.c LoadGame.c Events.c CreateTex.c CollisionDetection.c Render.c gameStatus.c -w -lSDL2 -lSDL2_image -lSDL2_mixer -lSDL2_ttf -o game -lm -I.\n\n</pre>\n\n<p>And now I want to create an .exe so I created this makefile:</p>\n\n<pre>\ngame: main.c LoadGame.c Events.c CreateTex.c CollisionDetection.c Render.c gameStatus.c\n    i686-w64-mingw32-gcc main.c LoadGame.c Events.c CreateTex.c CollisionDetection.c Render.c gameStatus.c -w -lSDL2 -lSDL2_image -lSDL2_mixer -lSDL2_ttf -o game.exe -lm -I.\n\n</pre>\n\n<p>but it gives this error:</p>\n\n<pre>\n\n    In file included from /usr/i686-w64-mingw32/include/SDL2/SDL.h:32:0,\n                     from main.c:2:\n    main.c:8:5: error: conflicting types for \u2018SDL_main\u2019\n     int main(int argc, char const *argv[]){\n         ^\n    /usr/i686-w64-mingw32/include/SDL2/SDL_main.h:117:39: note: previous declaration of \u2018SDL_main\u2019 was here\n     tern C_LINKAGE SDLMAIN_DECLSPEC int SDL_main(int argc, char *argv[]);\n                                         ^~~~~~~~\n    makefile:5: recipe for target 'game' failed\n    make: *** [game] Error 1\n\n\n</pre>\n\n<p>So I'd like some help so I can create a single .exe file from my sourcecode to run it in windows,while </p>\n"}, {"tags": ["python", "c", "integration", "ctypes", "gsl"], "answers": [{"tags": [], "owner": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "is_accepted": false, "score": 0, "last_activity_date": 1563975168, "creation_date": 1563975168, "answer_id": 57184180, "question_id": 57183935, "link": "https://stackoverflow.com/questions/57183935/how-to-handle-error-in-integration-in-gsl/57184180#57184180", "title": "How to handle error in integration in GSL", "body": "<p>All you need to do is to set your own error handler via </p>\n\n<p><a href=\"https://www.gnu.org/software/gsl/doc/html/err.html#c.gsl_set_error_handler\" rel=\"nofollow noreferrer\">https://www.gnu.org/software/gsl/doc/html/err.html#c.gsl_set_error_handler</a></p>\n\n<p>See e.g. <a href=\"https://stackoverflow.com/questions/33484591/callbacks-with-ctypes-how-to-call-a-python-function-from-c\">Callbacks with ctypes (How to call a python function from C)</a> how to declare an appropriate callback and pass it.</p>\n\n<p>The default handler aborts (as lined out in the documentation link above), but it's your prerogative to not do that of course :)</p>\n"}, {"tags": [], "owner": {"reputation": 408, "user_id": 11762199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SPIzL.jpg?s=128&g=1", "display_name": "mhrsalehi", "link": "https://stackoverflow.com/users/11762199/mhrsalehi"}, "is_accepted": true, "score": 1, "last_activity_date": 1563976765, "creation_date": 1563976765, "answer_id": 57184736, "question_id": 57183935, "link": "https://stackoverflow.com/questions/57183935/how-to-handle-error-in-integration-in-gsl/57184736#57184736", "title": "How to handle error in integration in GSL", "body": "<p>from GCC GSL : </p>\n\n<blockquote>\n  <p>Error Handlers</p>\n  \n  <p>The default behavior of the GSL error handler is to print a short\n  message and call abort(). When this default is in use programs will\n  stop with a core-dump whenever a library routine reports an error.\n  This is intended as a fail-safe default for programs which do not\n  check the return status of library routines (we don\u2019t encourage you to\n  write programs this way).</p>\n</blockquote>\n\n<p>you can call <code>gsl_set_error_handler_off()</code> to disable defualt error handeler (This function turns off the error handler by defining an error handler which does nothing).</p>\n\n<p>I think the following will do the job</p>\n\n<pre><code>gsl_set_error_handler_off()\ngsl_integration_workspace *w = gsl_integration_workspace_alloc(200);\ndouble result, err;\n\ngsl_function F;\nF.function = &amp;integral;\nF.params = &amp;params;\n\nint status = gsl_integration_qags(&amp;F, z, 1, 1e-6, 1e-6, 200, w, &amp;result, &amp;err);\nif(status == GSL_EDIVERGE){\nstatus = gsl_integration_qags(&amp;F, z, 1, 1e-10, 1e-10, 200, w, &amp;result, &amp;err);\n\n/*handle other errors here...*/\n}\ngsl_integration_workspace_free(w);\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 11740409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WyuvQ.jpg?s=128&g=1", "display_name": "Drade", "link": "https://stackoverflow.com/users/11740409/drade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 887, "favorite_count": 0, "accepted_answer_id": 57184736, "answer_count": 2, "score": 1, "last_activity_date": 1563976765, "creation_date": 1563974352, "last_edit_date": 1563974908, "question_id": 57183935, "link": "https://stackoverflow.com/questions/57183935/how-to-handle-error-in-integration-in-gsl", "title": "How to handle error in integration in GSL", "body": "<p>I am writing a python code that needs to calculate a lot of integrals really fast, so instead of using <code>scipy.integrate</code> using a <code>c</code> function, I am using <code>ctypes</code> to calculate all of my integrals in <code>c</code>.</p>\n\n<p>I am importing the c function with this code:</p>\n\n<pre><code>ctypes.CDLL('/usr/lib/i386-linux-gnu/libgslcblas.so', mode=ctypes.RTLD_GLOBAL)\nctypes.CDLL('/usr/lib/i386-linux-gnu/libgsl.so', mode=ctypes.RTLD_GLOBAL)\nlib = ctypes.CDLL('/home/aurelien/Desktop/Project/within_opt_model_1/integral_test.so')\n</code></pre>\n\n<p>In c, I am calculating the integral using:</p>\n\n<pre><code>gsl_integration_workspace *w = gsl_integration_workspace_alloc(200);\ndouble result, err;\n\ngsl_function F;\nF.function = &amp;integral;\nF.params = &amp;params;\n\ngsl_integration_qags(&amp;F, z, 1, 1e-6, 1e-6, 200, w, &amp;result, &amp;err);\ngsl_integration_workspace_free(w);\n</code></pre>\n\n<p>The problem is that sometimes (~5% of the time), since my integral is slowly convergent, it will kill my program and print:</p>\n\n<pre><code>gsl: qags.c:563: ERROR: interval is divergent, or slowly convergent\nDefault GSL error handler invoked\nAborted (core dumped)\n</code></pre>\n\n<p>This problem does not occur if I put <code>1e-10</code> instead of <code>1e-6</code>, but it makes the integral calculation go a lot slower.</p>\n\n<p>I would like a way to do something like a <code>try, catch</code> so that most of the time it uses <code>1e-6</code> and goes fast, and when it fails it uses <code>1e-10</code>.</p>\n\n<p>I have tried doing:</p>\n\n<pre><code>int status = gsl_integration_qags(&amp;F, z, 1, 1e-6, 1e-6, 200, w, &amp;result, &amp;err);\nprintf(\"%i\\n\", status);\n</code></pre>\n\n<p>But this only prints 0, since the error aborts before returning any value.</p>\n\n<p>My guess is that I need create my own error handler method, but I don't know how to do that.</p>\n\n<p>Thank you very much!\n(I can show you more code if that's helpful, I tried to keep everything concise).</p>\n"}, {"tags": ["c", "qemu", "sparc"], "answers": [{"comments": [{"owner": {"reputation": 394, "user_id": 4257376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HCX0O.jpg?s=128&g=1", "display_name": "Onofog", "link": "https://stackoverflow.com/users/4257376/onofog"}, "edited": false, "score": 0, "creation_date": 1564161381, "post_id": 57201684, "comment_id": 100953375, "body": "Thanks for the response.  At the moment performance is not as important as proof of concept, but I will adapt these to use romd MemoryRegions in the future.  The evaluation board has its MRAM banks off-chip, and they are accessed directly by the bootloader code.  That said, assuming I get the addressing correct, will I be able to simply jump into that code by setting the pc, npc?"}, {"owner": {"reputation": 5487, "user_id": 4499941, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wb0uIu6LiPk/AAAAAAAAAAI/AAAAAAAAABI/HOVGfYywvPE/photo.jpg?sz=128", "display_name": "Peter Maydell", "link": "https://stackoverflow.com/users/4499941/peter-maydell"}, "reply_to_user": {"reputation": 394, "user_id": 4257376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HCX0O.jpg?s=128&g=1", "display_name": "Onofog", "link": "https://stackoverflow.com/users/4257376/onofog"}, "edited": false, "score": 0, "creation_date": 1564161867, "post_id": 57201684, "comment_id": 100953543, "body": "Yes, the guest code should be able to just jump into the MRAM the same as it would any other area of memory."}], "tags": [], "owner": {"reputation": 5487, "user_id": 4499941, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wb0uIu6LiPk/AAAAAAAAAAI/AAAAAAAAABI/HOVGfYywvPE/photo.jpg?sz=128", "display_name": "Peter Maydell", "link": "https://stackoverflow.com/users/4499941/peter-maydell"}, "is_accepted": false, "score": 2, "last_activity_date": 1564056672, "creation_date": 1564056672, "answer_id": 57201684, "question_id": 57183915, "link": "https://stackoverflow.com/questions/57183915/what-is-the-canonical-way-to-execute-code-directly-from-a-qemu-device/57201684#57201684", "title": "What is the canonical way to execute code directly from a QEMU device?", "body": "<p>Older versions of QEMU were simply unable to handle execution from anything other than RAM or ROM, and attempting to do so would give a \"qemu: fatal: Trying to execute code outside RAM or ROM\" error. QEMU 3.1 and later fixed this limitation, and now can execute code from anywhere -- though execution from a device will be much much slower than executing from RAM.</p>\n\n<p>You mention that you \"modeled the MRAM as a device with a MemoryRegion, along with the appropriate read and write operations to expose a heap-allocated array\". This sounds like it is probably the wrong approach -- it will work but be very slow. If the MRAM appears to the guest as being like RAM, then model it as RAM (ie with a RAM MemoryRegion). If it's like RAM for reading but writes need to do something other than just-write-to-the-memory (or need to do that some of the time), then model it using a \"romd\" region, the same way the existing pflash devices do. Nonetheless, modelling it as a device with pure read and write functions should work, it'll just be horribly slow.</p>\n\n<p>The assertion you've run into is the one that says \"you can't put a memory region into two things at once\" -- the 'subregion' you've passed in is already being used somewhere else, but you've tried to put it into a second container. If you have a MemoryRegion that you need to have appear in two places in the physical memory map, then you need to: create the MemoryRegion; create an alias MemoryRegion that aliases the real one; map the actual MemoryRegion into one place; map the alias into the other. There are plenty of examples of this in existing board models in QEMU.</p>\n\n<p>More generally, you need to figure out what the evaluation board hardware actually is, and then model that. If the eval board has the MRAM visible at multiple physical addresses, then yes, use an alias MR. If it doesn't, then the problem is somewhere else and you need to figure out what's actually happening, not try to bodge around it with aliases that don't exist on the real hardware. QEMU's debug logging (various -d suboptions, plus -D file to log to a file) can be useful for checking what the emulated CPU is really doing in this early bootup phase -- but watch out as the logs can be quite large and they are sometimes tricky to interpret unless you know a little about QEMU internals.</p>\n"}], "owner": {"reputation": 394, "user_id": 4257376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HCX0O.jpg?s=128&g=1", "display_name": "Onofog", "link": "https://stackoverflow.com/users/4257376/onofog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1564056672, "creation_date": 1563974290, "question_id": 57183915, "link": "https://stackoverflow.com/questions/57183915/what-is-the-canonical-way-to-execute-code-directly-from-a-qemu-device", "title": "What is the canonical way to execute code directly from a QEMU device?", "body": "<p>I'm modeling a particular evaluation board, which has a leon3 processor and several banks of MRAM mapped to specific addresses.  My goal is to start qemu-system-sparc using my bootloader ELF, and then jump to the base address of a MRAM bank to begin executing bare-metal programs therein.  To this end, I have been able to successfully run my bootloader and jump to the first instruction, but QEMU immediately stops and exits without reporting any error/trap.  I can also run the bare-metal programs in isolation by passing them in ELF format as a kernel to qemu-system-sparc.</p>\n\n<p><strong>Short version: Is there a canonical way to set up a device such that code can be executed from it directly?  What steps do I need to take when compiling that code to allow it to execute correctly?</strong></p>\n\n<p>I modeled the MRAM as a device with a MemoryRegion, along with the appropriate read and write operations to expose a heap-allocated array with my program.  In my board code (modified version of qemu/hw/sparc/leon3.c), writes to the MRAM address are mapped to the MemoryRegion of the device.  Using printfs, I am reporting reads and writes in the style of the unimplemented device (qemu/hw/misc/unimp.c), and I have verified that I am reading and writing to the device correctly.</p>\n\n<p>Unfortunately, this did not work with respect to running the code on the device.  I can see the read immediately after the bootloader jumps to the base address of my device, but the instruction read doesn't actually do anything.  The bootloader uses a void function pointer, which is tied to the address of the MRAM device to induce a jump.</p>\n\n<p>Another approach I tried is creating an alias to my device starting from address 0;  I thought perhaps that my binary has all its addresses set relative to zero, so by mapping writes from addresses [0, MRAM_SIZE) as an alias to my device base address, the code will end up reading the corresponding instructions in the device MemoryRegion.</p>\n\n<p>This approach failed an assert in memory.c:</p>\n\n<pre><code>static void memory_region_add_subregion_common(MemoryRegion *mr,\n                                               hwaddr offsset,\n                                               MemoryRegion *subregion)\n{\n    assert(!subregion-&gt;container);\n    subregion-&gt;container = mr;\n    subregion-&gt;addr = offset;\n    memory_region_update_container_subregions(subregion);\n}\n</code></pre>\n\n<p>What do I need to do to coerce QEMU to execute the code in my MRAM device?  Do I need to produce a binary with absolute addresses?</p>\n"}, {"tags": ["c", "sockets", "udp", "netcat"], "comments": [{"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1563975639, "post_id": 57183826, "comment_id": 100879129, "body": "Works for me if the server can actually bind to the port (i.e. don&#39;t ignore errors) and <code>localhost</code> is <code>127.0.0.1</code> and not <code>::1</code>."}, {"owner": {"reputation": 776, "user_id": 10187988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b241724a6266b0419c754aec2ed261?s=128&d=identicon&r=PG&f=1", "display_name": "Maicake", "link": "https://stackoverflow.com/users/10187988/maicake"}, "reply_to_user": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1563975769, "post_id": 57183826, "comment_id": 100879210, "body": "What is the res value in your case?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1563979571, "post_id": 57183826, "comment_id": 100881686, "body": "<i>bind(fd, (struct sockaddr *)&amp;src, sizeof(src));</i>?!?!  There&#39;s a reason why library functions such as <code>bind()</code> actually return a value that indicates success or failure..."}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1563980322, "post_id": 57183826, "comment_id": 100882120, "body": "@Maicake: <i>&quot;What is the res value in your case?&quot;</i> - the number of bytes I&#39;ve send using <code>nc -u</code> - as expected."}], "answers": [{"comments": [{"owner": {"reputation": 776, "user_id": 10187988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b241724a6266b0419c754aec2ed261?s=128&d=identicon&r=PG&f=1", "display_name": "Maicake", "link": "https://stackoverflow.com/users/10187988/maicake"}, "edited": false, "score": 0, "creation_date": 1563974390, "post_id": 57183857, "comment_id": 100878448, "body": "Thanks, but it still keep hanging at the recvfrom call. I&#39;ve tried to use 1025 and also to run it using sudo."}, {"owner": {"reputation": 7495, "user_id": 11527076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqgpS.png?s=128&g=1", "display_name": "prog-fh", "link": "https://stackoverflow.com/users/11527076/prog-fh"}, "reply_to_user": {"reputation": 776, "user_id": 10187988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b241724a6266b0419c754aec2ed261?s=128&d=identicon&r=PG&f=1", "display_name": "Maicake", "link": "https://stackoverflow.com/users/10187988/maicake"}, "edited": false, "score": 0, "creation_date": 1563974655, "post_id": 57183857, "comment_id": 100878604, "body": "@Maicake If you use, from another terminal, <code>netstat -panu</code> while your program is running, do you see it bound to the port you chose?"}, {"owner": {"reputation": 776, "user_id": 10187988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b241724a6266b0419c754aec2ed261?s=128&d=identicon&r=PG&f=1", "display_name": "Maicake", "link": "https://stackoverflow.com/users/10187988/maicake"}, "edited": false, "score": 0, "creation_date": 1563974949, "post_id": 57183857, "comment_id": 100878761, "body": "yes, anyway there is a strange behaviour. If you try nc -u localhost 1025  it doesn&#39;t receive the packet. If you try nc -u -v localhost 1025 it works. But really I can&#39;t understand why since -v is just to have verbose nc output"}, {"owner": {"reputation": 776, "user_id": 10187988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b241724a6266b0419c754aec2ed261?s=128&d=identicon&r=PG&f=1", "display_name": "Maicake", "link": "https://stackoverflow.com/users/10187988/maicake"}, "edited": false, "score": 0, "creation_date": 1563975268, "post_id": 57183857, "comment_id": 100878928, "body": "Anyway res is 1 so I don&#39;t think it works correctly."}, {"owner": {"reputation": 7495, "user_id": 11527076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqgpS.png?s=128&g=1", "display_name": "prog-fh", "link": "https://stackoverflow.com/users/11527076/prog-fh"}, "reply_to_user": {"reputation": 776, "user_id": 10187988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b241724a6266b0419c754aec2ed261?s=128&d=identicon&r=PG&f=1", "display_name": "Maicake", "link": "https://stackoverflow.com/users/10187988/maicake"}, "edited": false, "score": 0, "creation_date": 1563975663, "post_id": 57183857, "comment_id": 100879144, "body": "@Maicake when <code>res</code> is <code>1</code> what do you enter on the <code>nc</code> side?"}, {"owner": {"reputation": 7495, "user_id": 11527076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqgpS.png?s=128&g=1", "display_name": "prog-fh", "link": "https://stackoverflow.com/users/11527076/prog-fh"}, "reply_to_user": {"reputation": 776, "user_id": 10187988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b241724a6266b0419c754aec2ed261?s=128&d=identicon&r=PG&f=1", "display_name": "Maicake", "link": "https://stackoverflow.com/users/10187988/maicake"}, "edited": false, "score": 0, "creation_date": 1563975827, "post_id": 57183857, "comment_id": 100879250, "body": "@Maicake yes, but once <code>nc -u localhost 1025</code> is running, do you actually provide more than 1 character <code>&#39;\\n&#39;</code> in its standard input? When I test your program (with 1025) <code>res</code> matches exactly the length of the input in <code>nc</code>."}, {"owner": {"reputation": 776, "user_id": 10187988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b241724a6266b0419c754aec2ed261?s=128&d=identicon&r=PG&f=1", "display_name": "Maicake", "link": "https://stackoverflow.com/users/10187988/maicake"}, "edited": false, "score": 0, "creation_date": 1563977399, "post_id": 57183857, "comment_id": 100880307, "body": "damn. I wasn&#39;t providing more characters and with nc -u -v  it was receiving also just the \\n  but no with nc -u . Thanks"}], "tags": [], "owner": {"reputation": 7495, "user_id": 11527076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqgpS.png?s=128&g=1", "display_name": "prog-fh", "link": "https://stackoverflow.com/users/11527076/prog-fh"}, "is_accepted": false, "score": 5, "last_activity_date": 1563974112, "creation_date": 1563974112, "answer_id": 57183857, "question_id": 57183826, "link": "https://stackoverflow.com/questions/57183826/why-udp-socket-doesnt-receive-udp-traffic-from-nc-u-host-port/57183857#57183857", "title": "Why UDP socket doesn&#39;t receive udp traffic from nc -u host port?", "body": "<p>port 90 is less than 1024 so a process requires privileges in order to bind a socket to it.</p>\n\n<p>You have two options:</p>\n\n<ol>\n<li>choose a port above 1024</li>\n<li>run your program with privileges (sudo...)</li>\n</ol>\n\n<p>One should consider testing the result of <code>bind()</code> (as any other system call in general) to easily detect such situations.</p>\n"}, {"tags": [], "owner": {"reputation": 776, "user_id": 10187988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b241724a6266b0419c754aec2ed261?s=128&d=identicon&r=PG&f=1", "display_name": "Maicake", "link": "https://stackoverflow.com/users/10187988/maicake"}, "is_accepted": true, "score": 0, "last_activity_date": 1564393827, "creation_date": 1564393827, "answer_id": 57251242, "question_id": 57183826, "link": "https://stackoverflow.com/questions/57183826/why-udp-socket-doesnt-receive-udp-traffic-from-nc-u-host-port/57251242#57251242", "title": "Why UDP socket doesn&#39;t receive udp traffic from nc -u host port?", "body": "<p>I wasn't providing enough data through <code>nc</code>.\nI was facing two situation:</p>\n\n<pre><code>nc -u localhost 1025\n</code></pre>\n\n<p>The program was hanging....obviously because I didn't pass nothing except from <code>'\\n'</code> which wasn't received by the socket.</p>\n\n<pre><code>nc -u -v localhost 1025\n</code></pre>\n\n<p>I was still passing just <code>'\\n'</code> but in this case the socket was receiving it.</p>\n\n<p>Writing a bunch of characters worked in both cases.</p>\n"}], "owner": {"reputation": 776, "user_id": 10187988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b241724a6266b0419c754aec2ed261?s=128&d=identicon&r=PG&f=1", "display_name": "Maicake", "link": "https://stackoverflow.com/users/10187988/maicake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 57251242, "answer_count": 2, "score": 0, "last_activity_date": 1564393827, "creation_date": 1563973979, "last_edit_date": 1563980014, "question_id": 57183826, "link": "https://stackoverflow.com/questions/57183826/why-udp-socket-doesnt-receive-udp-traffic-from-nc-u-host-port", "title": "Why UDP socket doesn&#39;t receive udp traffic from nc -u host port?", "body": "<pre><code> int main(int argc, char *argv[])\n {\n     struct sockaddr_in src = { .sin_family=AF_INET, .sin_addr.s_addr=INADDR_ANY, .sin_port=htons(90) };\n\n     int fd = socket(AF_INET, SOCK_DGRAM, IPPROTO_IP);\n\n     bind(fd, (struct sockaddr *)&amp;src, sizeof(src));\n\n     char buf[1024];\n     ssize_t res = recvfrom(fd, buf, sizeof(buf), 0, NULL, 0);\n     printf(\"res=%zi\\n\", res);\n\n     return 0;\n }\n</code></pre>\n\n<p>After compiling and execute this program. On another terminal I execute</p>\n\n<pre><code>nc -u localhost 90\n</code></pre>\n\n<p>to test if I'm actually receiving some udp traffic from \"any interface\" as I would expect since I've used INADDR_ANY. But the programs just hangs. What am I missing?</p>\n"}, {"tags": ["c", "language-features"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1563974140, "post_id": 57183799, "comment_id": 100878307, "body": "It looks like a marker that is used by a pre-processor."}], "answers": [{"tags": [], "owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "is_accepted": true, "score": 4, "last_activity_date": 1563974112, "creation_date": 1563974112, "answer_id": 57183856, "question_id": 57183799, "link": "https://stackoverflow.com/questions/57183799/how-do-i-call-at-symbol-quotation-in-c/57183856#57183856", "title": "How do I call \u201c@\u201d at-symbol quotation in C?", "body": "<p>From \"BUILD.txt\" of the project:</p>\n\n<blockquote>\n  <ul>\n  <li>Most *.c source files are preprocessed using a program called\n  \"translate\".  The sources to translate are found in src/translate.c.\n  A header comment in src/translate.c explains in detail what it does.</li>\n  </ul>\n</blockquote>\n\n<p>More information can be found directly in the <a href=\"https://fossil-scm.org/home/artifact/331bea4cfc50a1cf\" rel=\"nofollow noreferrer\">referenced file</a>, but it seems to be used to better handle CGI capabilities in C, particularly in generating HTML.</p>\n\n<p>The synopsis provided in that \"src/translate.c\" is as follows:</p>\n\n<blockquote>\n  <p>** Input lines that begin with the \"@\" character are translated into<br>\n  ** either cgi_printf() statements or string literals and the<br>\n  ** translated code is written on standard output.<br>\n  **<br>\n  ** The problem this program is attempt to solve is as follows:  When<br>\n  ** writing CGI programs in C, we typically want to output a lot of HTML<br>\n  ** text to standard output.  In pure C code, this involves doing a<br>\n  ** printf() with a big string containing all that text.  But we have<br>\n  ** to insert special codes (ex: \\n and \\\") for many common characters,<br>\n  ** which interferes with the readability of the HTML.<br>\n  **<br>\n  ** This tool allows us to put raw HTML, without the special codes, in<br>\n  ** the middle of a C program.  This program then translates the text<br>\n  ** into standard C by inserting all necessary backslashes and other<br>\n  ** punctuation.  </p>\n</blockquote>\n"}], "owner": {"reputation": 339, "user_id": 5426136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/978cda97d686968be805ee5e78236722?s=128&d=identicon&r=PG&f=1", "display_name": "Zomagk", "link": "https://stackoverflow.com/users/5426136/zomagk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 57183856, "answer_count": 1, "score": 2, "last_activity_date": 1563974112, "creation_date": 1563973902, "question_id": 57183799, "link": "https://stackoverflow.com/questions/57183799/how-do-i-call-at-symbol-quotation-in-c", "title": "How do I call \u201c@\u201d at-symbol quotation in C?", "body": "<p>Having seen Fossil's code [ <a href=\"https://fossil-scm.org/home/annotate?filename=src/schema.c&amp;checkin=b03652382a327740\" rel=\"nofollow noreferrer\">https://fossil-scm.org/home/annotate?filename=src/schema.c&amp;checkin=b03652382a327740</a>  L27.. ]:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>    /*\n    ** The database schema for the ~/.fossil configuration database.\n    */\n    const char zConfigSchema[] =\n    @ -- This file contains the schema for the database that is kept in the\n    @ -- ~/.fossil file and that stores information about the users setup.\n    @ --\n    @ CREATE TABLE global_config(\n    @   name TEXT PRIMARY KEY,\n    @   value TEXT\n    @ );\n    @\n    @ -- Identifier for this file type.\n    @ -- The integer is the same as 'FSLG'.\n    @ PRAGMA application_id=252006675;\n    ;\n</code></pre>\n\n<p>I'm wondering what is <code>@...</code> syntax is for. I have never seen it before, and I do not know how to call it to search the web for it. \"string literal extensions in C\" and various rephrasing of that yield no result.</p>\n\n<p><em>Please consider leaving this question be, despite its triviality, for the purpose of better discoverability. Thanks.</em></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1563973556, "post_id": 57183546, "comment_id": 100877964, "body": "You can not safely call functions such as <code>printf()</code> or <code>sleep()</code> from within a signal handler.  Doing so results in undefined behavior. You can only safely call async-signal-safe functions in a signal handler."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563974696, "post_id": 57183546, "comment_id": 100878625, "body": "@AndrewHenle <code>sleep</code> is async-signal-safe (in POSIX.1-2008, anyway, I know it was implemented with <code>alarm</code> and <code>pause</code> in days of yore and wouldn&#39;t have been).  You&#39;re right about <code>printf</code>, although &quot;you can&#39;t&quot; is too strong (see my answer)."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1563976536, "post_id": 57183546, "comment_id": 100879725, "body": "@zwol Interesting, that.  The <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/functions/sleep.html\" rel=\"nofollow noreferrer\">POSIX specification for <code>sleep()</code> states</a>: &quot;In single-threaded programs, sleep() may make use of SIGALRM.&quot;  How that can be async-signal-safe escapes me.  <a href=\"http://man7.org/linux/man-pages/man3/sleep.3.html\" rel=\"nofollow noreferrer\">Linux <code>sleep()</code></a> is also listed as <code>MT-Unsafe sig:SIGCHLD&#47;linux </code>, despite it being <a href=\"http://man7.org/linux/man-pages/man7/signal-safety.7.html\" rel=\"nofollow noreferrer\">listed as async-signal-safe.</a>  That seems relevant to this question."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563976799, "post_id": 57183546, "comment_id": 100879907, "body": "(cont) And <a href=\"https://stackoverflow.com/questions/41379544/async-signal-safety-of-fork\">Linux isn&#39;t exactly very strict in its adherence to POSIX async-signal-safety requirements</a>."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563977543, "post_id": 57183546, "comment_id": 100880384, "body": "@AndrewHenle <code>sleep</code> is required to be async-signal-safe in POSIX itself: see the table of &quot;functions that shall be async-signal-safe&quot; in the <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html\" rel=\"nofollow noreferrer\">Signal Concepts</a> page of the standard.  (Surprisingly, <code>nanosleep</code> is not in this list, probably because it was optional before the -2008 rev.)  I think the license for <code>sleep</code> to make use of SIGALRM in single-threaded programs is indeed incompatible with the requirement for it to be AS-safe, and this is a defect in the standard. I might file a DR."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563977705, "post_id": 57183546, "comment_id": 100880479, "body": "@AndrewHenle I have not close-read the Linux manpages and cannot speak to what they do or do not say, but I can tell you that GNU libc&#39;s <code>sleep</code> and <code>nanosleep</code>, as implemented on Linux, are indeed AS-safe.  (<code>sleep</code> just converts its argument and calls <code>nanosleep</code>, and <code>nanosleep</code> is a system call.)"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1563977861, "post_id": 57183546, "comment_id": 100880577, "body": "@zwol <i>sleep is required to be async-signal-safe in POSIX itself</i>  My two points were that Linux ignored that same requirement as it applies to <code>fork()</code> so invoking POSIX to establish what a likely Linux system <i>should</i> do doesn&#39;t have a good track record, and that <code>sleep()</code> is listed as <code>MT-unsafe</code> with regard to <code>SIGCHLD</code> which seems extremely applicable to this question."}, {"owner": {"reputation": 48, "user_id": 11830407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f24b0a4ddcc65e9fc1226ea2bfe78c3?s=128&d=identicon&r=PG&f=1", "display_name": "leonzai", "link": "https://stackoverflow.com/users/11830407/leonzai"}, "edited": false, "score": 0, "creation_date": 1564019468, "post_id": 57183546, "comment_id": 100895659, "body": "@AndreHenle Thank u very very much. <b>I have changed <code>printf</code> to <code>write</code> and  remove <code>sleep</code>. But I still get only one SIGCHLD.</b> In the CSAPP book, it shows me:  I will receive two signals(the third one has been discarded),one from running, the other from pending . Can you tell me why I get one signal,not two?"}, {"owner": {"reputation": 48, "user_id": 11830407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f24b0a4ddcc65e9fc1226ea2bfe78c3?s=128&d=identicon&r=PG&f=1", "display_name": "leonzai", "link": "https://stackoverflow.com/users/11830407/leonzai"}, "edited": false, "score": 0, "creation_date": 1564098820, "post_id": 57183546, "comment_id": 100928956, "body": "When I change the server, I get two <code>Handler reaped child xxxx</code>. I am confuesed."}], "answers": [{"comments": [{"owner": {"reputation": 48, "user_id": 11830407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f24b0a4ddcc65e9fc1226ea2bfe78c3?s=128&d=identicon&r=PG&f=1", "display_name": "leonzai", "link": "https://stackoverflow.com/users/11830407/leonzai"}, "edited": false, "score": 0, "creation_date": 1564019425, "post_id": 57183924, "comment_id": 100895652, "body": "Thank u very very much. I need some time to digest what you teach. <b>I have changed <code>printf</code> to <code>write</code> and  remove <code>sleep</code>. But I still get only one SIGCHLD.</b> In the CSAPP book, it shows me:  I will receive two signals(the third one has been discarded),one from running, the other from pending . Can you tell me why I get one signal,not two?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 48, "user_id": 11830407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f24b0a4ddcc65e9fc1226ea2bfe78c3?s=128&d=identicon&r=PG&f=1", "display_name": "leonzai", "link": "https://stackoverflow.com/users/11830407/leonzai"}, "edited": false, "score": 0, "creation_date": 1564060961, "post_id": 57183924, "comment_id": 100913476, "body": "The only thing you can be sure of is that you will get <i>at least one</i> signal.  If your book says you will get some specific number, it is wrong."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 3, "last_activity_date": 1563974318, "creation_date": 1563974318, "answer_id": 57183924, "question_id": 57183546, "link": "https://stackoverflow.com/questions/57183546/i-have-a-question-about-c-with-send-a-signal/57183924#57183924", "title": "I have a question about c with send a signal", "body": "<p>The operating system is allowed to deliver only one <code>SIGCHLD</code> signal to tell you that several child processes have exited.  That means you need to loop calling <code>waitpid</code> inside the signal handler, something like this:</p>\n\n<pre><code>void sigchld_handler(int unused)\n{\n    pid_t pid;\n    int status;\n    for (;;) {\n        pid = waitpid(-1, &amp;status, WNOHANG);\n        if (pid == -1) {\n            if (errno != ECHILD)\n                printf(\"waitpid failure: %s\\n\", strerror(errno);\n            return;\n        }\n        printf(\"child %d exit status %d\\n\", (int)pid, status);\n    }\n}\n</code></pre>\n\n<p>You need to use <code>WNOHANG</code> so that <code>waitpid</code> will fail and set <code>errno</code> to <code>ECHILD</code> when there are no more processes to wait for, instead of blocking (possibly forever).</p>\n\n<p>Also, in order to make it safe to call <code>printf</code> from inside the signal handler, you need to use <code>sigprocmask</code> and <code>sigsuspend</code> in your main function, so that the signal can only be delivered when normal execution is blocked on <code>sigsuspend</code>.  Also also, never use <code>signal</code>, only <code>sigaction</code>; the specification of <code>signal</code> doesn't cover several important details that <em>will</em> bite you.</p>\n\n<pre><code>int main(void)\n{\n   sigset_t sigchld_set;\n   sigemptyset(&amp;sigchld_set);\n   sigaddset(&amp;sigchild_set, SIGCHLD);\n\n   sigset_t unblock_sigchld_set;\n   if (sigprocmask(SIG_BLOCK, &amp;sigchld_set, &amp;unblock_sigchld_set)) {\n       perror(\"sigprocmask\");\n       return 1;\n   }\n   sigdelset(SIGCHLD, &amp;unblock_sigchld_set);\n\n   struct sigaction sa;\n   sigfillset(&amp;sa.sa_mask);\n   sa.sa_handler = sigchld_handler;\n   sa.sa_flags = SA_RESTART;\n   if (sigaction(SIGCHLD, &amp;sa, 0)) {\n       perror(\"sigaction\");\n       return 1;\n   }\n\n   /* fork loop goes here */\n\n   for (;;)\n       sigsuspend(&amp;unblock_sigchld_set);\n\n   return 0;\n}\n</code></pre>\n\n<p>Making <code>main</code> exit when all child processes have been waited for is left as an exercise.  (Hint: you need C11 <a href=\"https://en.cppreference.com/w/c/atomic\" rel=\"nofollow noreferrer\">atomic types</a>.)</p>\n"}], "owner": {"reputation": 48, "user_id": 11830407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f24b0a4ddcc65e9fc1226ea2bfe78c3?s=128&d=identicon&r=PG&f=1", "display_name": "leonzai", "link": "https://stackoverflow.com/users/11830407/leonzai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 57183924, "answer_count": 1, "score": 1, "last_activity_date": 1563974983, "creation_date": 1563973092, "last_edit_date": 1563974983, "question_id": 57183546, "link": "https://stackoverflow.com/questions/57183546/i-have-a-question-about-c-with-send-a-signal", "title": "I have a question about c with send a signal", "body": "<h1>this is my code</h1>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;sys/wait.h&gt;\n#include&lt;signal.h&gt;\n#include&lt;unistd.h&gt;\n\nvoid handler1(int sig) {\n    int pid;\n    if ((pid = waitpid(-1, NULL, 0)) &lt; 0)\n        printf(\"waitpid error\");\n    printf(\"Handler reaped child %d\\n\", pid);\n    sleep(1);\n}\n\nint main() {\n    int i, n;\n\n    if (signal(SIGCHLD, handler1) == SIG_ERR) {\n        printf(\"signal error\\n\");\n    }\n\n    for (i = 0; i &lt; 3; ++i) {\n        if (fork() == 0) {\n            printf(\"Hello from child %d\\n\", getpid());\n            exit(0);\n        }\n    }\n//    sleep(1);\n    printf(\"Father love you!\\n\");\n    while (1);\n    exit(0);\n}\n</code></pre>\n\n<p>When I run it, it shows this :</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>Father love you!\nHello from child 7843\nHello from child 7844\nHello from child 7842\nHandler reaped child 7842\n</code></pre>\n\n<p>But I think it should be </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>Father love you!\nHello from child 7843\nHello from child 7844\nHello from child 7842\nHandler reaped child 7842\nHandler reaped child 7843      \n</code></pre>\n\n<p>There a repetition of <code>Handler reaped child xx</code>.</p>\n\n<p>If I uncomment <code>sleep(1);</code>, it will show what i want :</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>Hello from child 7858\nHandler reaped child 7858\nHello from child 7859\nHello from child 7860\nHandler reaped child 7859\nFather love you!\n\n</code></pre>\n\n<p>I dont know why the first one has only one Handler reaped child.\nPlease help me, thank you in advence.</p>\n"}, {"tags": ["java", "c", "jna"], "comments": [{"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1563975594, "post_id": 57183314, "comment_id": 100879109, "body": "This is an error inside the C  call_function1, i.e. native null pointer exception (access to uninitialized pointer)"}, {"owner": {"reputation": 1, "user_id": 11830141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/022bb3d87a9628df14c48e4691c75723?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/11830141/julien"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1563976309, "post_id": 57183314, "comment_id": 100879583, "body": "I don&#39;t think the error came from the libraries itself cause I can execute them one at time without any problem. The problem came only when I call one after the other."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1563984326, "post_id": 57183314, "comment_id": 100884303, "body": "Check the crash dump <code>[lib1.so+0x5440]  nullAssignment+0xfc</code> nullAssignment on  of  lib1.so base address + 0x5440"}, {"owner": {"reputation": 1, "user_id": 11830141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/022bb3d87a9628df14c48e4691c75723?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/11830141/julien"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1564040434, "post_id": 57183314, "comment_id": 100901873, "body": "I finally found the problem. In fact, it  came from the nullAssignement function. In both of the libraries it exist a function named like it but they are not some same, they have different inputs. When call_function2() was suppose to call nullAssignement from its library, <code>lib2.so</code>, in reality it called nullAssignement function from <code>lib1.so</code> and so that lead to segmentation fault. To solve the problem I changed the name of nullAssignement in <code>lib2.so</code> and it is now working well. Thank you for your help."}], "owner": {"reputation": 1, "user_id": 11830141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/022bb3d87a9628df14c48e4691c75723?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/11830141/julien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563974467, "creation_date": 1563972401, "last_edit_date": 1563974467, "question_id": 57183314, "link": "https://stackoverflow.com/questions/57183314/it-is-possible-to-load-c-librairies-using-jna-java-native-access", "title": "It is possible to load C-librairies using JNA (Java Native Access)", "body": "<p>I've problem loading multiple <em>C-librairies</em> using java with <em>JNA</em> (Java Native Access). When I try to load two libraries it doesn't work. So my question is: is it's possible to use multiple libraries with <em>JNA</em> and if so, how to do it?</p>\n\n<p>I'll explain here my problem in more details. I've two different C-librairies, <code>lib1.so</code> and <code>lib2.so</code>, and I want to use both of them in my Java program. Here is what I did for the moment :</p>\n\n<p>Here is how I load the libraries:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    //Import\n     public interface Lib1 extends Library {\n        Lib1 INSTANCE = (Lib1) Native.loadLibrary(\"lib1.so\", Lib1.class);\n        void call_function1();\n     }\n\n    //Import\n     public interface Lib2 extends Library {\n        Lib2 INSTANCE = (Lib2) Native.loadLibrary(\"lib2.so\", Lib2.class);\n        void call_function2();\n     }\n</code></pre>\n\n<p>Here is my main function :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>     public class App{\n        public static void main( String[] args ){\n            System.setProperty(\"jna.library.path\", \"ClibFolder\"); \n            Lib1.INSTANCE.call_function1();   //This instruction works\n            Lib2.INSTANCE.call_function2();   //This instruction failed\n        }\n     }\n</code></pre>\n\n<p>Here is the error I have :</p>\n\n<pre><code>#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00007f5688ce4440, pid=49318, tid=0x00007f56a1615700\n#\n# JRE version: Java(TM) SE Runtime Environment (8.0_162-b12) (build 1.8.0_162-b12)\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (25.162-b12 mixed mode linux-amd64 compressed oops)\n# Problematic frame:\n# C  [lib1.so+0x5440]  nullAssignment+0xfc\n</code></pre>\n\n<p>When I execute the instruction calling the second library, the program get an error with the first library. So I suppose that only the first library is loaded, and when it call the second library, in fact it call the first library. That would explain the segmentation fault and the error from the first library. Moreover each library works when I use only one of them, so I don't think they are the cause of the problem.</p>\n\n<p>I really don't know what to do and I would appreciate some help.</p>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["c", "language-lawyer", "void", "expression-evaluation", "lvalue-to-rvalue"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1563970843, "post_id": 57182645, "comment_id": 100876285, "body": "Hmm, even the <code>(void)a</code> is in grey area. 6.3.2.2: <i>&quot;If an expression of any other type is evaluated as a void expression, its value or designator is  <b>discarded</b>. (A void expression is evaluated for its side effects.)&quot;</i>"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 3, "creation_date": 1563971075, "post_id": 57182645, "comment_id": 100876422, "body": "The abstract machine would evaluate the expression before discarding the result."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1563971579, "post_id": 57182645, "comment_id": 100876760, "body": "Have a look at this: <code>https:&#47;&#47;www.godbolt.org&#47;z&#47;4tHKGg</code> : actually the expression is evaluated partially, that is the <code>f</code> function is called three times, but the division and the addition in the expression are not evaluated (because the result is ignored). But IMO a compiler could generate the code for the division and the addition and then ignore the result."}, {"owner": {"reputation": 8560, "user_id": 1633665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b603faf464ae55fcdd7dc2fb3b7ac063?s=128&d=identicon&r=PG", "display_name": "Virgile", "link": "https://stackoverflow.com/users/1633665/virgile"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1563971581, "post_id": 57182645, "comment_id": 100876761, "body": "@IanAbbott A conforming implementation can perform the evaluation, but 5.1.2.3&#167;4 leaves some freedom: &quot;An actual implementation need not evaluate part of an expression if it can deduce that its value is not used and that no needed side effects are produced&quot;."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 4, "creation_date": 1563971834, "post_id": 57182645, "comment_id": 100876925, "body": "The answer to the question in the first sentence, \u201cCan undefined behaviors occurring during the evaluation of void expressions be ignored as if the evaluation itself never took place?\u201d, is undoubtedly yes. The C standard imposes no requirements on undefined behavior, so ignoring the undefined behavior is a conforming action by a C implementation. I do not think that is the intent of this Stack Overflow question, though\u2014I think anol seeks to ask whether the user of the implementation may rely on the undefined behavior having no effect; is the C implementation <b>required</b> to ignore it.\u2026"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1563971920, "post_id": 57182645, "comment_id": 100876980, "body": "@Virgule An actual implementation <i>could</i> evaluate the unneeded parts of the expression as per the abstract machine, so if it&#39;s undefined behavior for the actual machine, it&#39;s undefined behavior full stop."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1563971943, "post_id": 57182645, "comment_id": 100876992, "body": "\u2026 If so, then you might wish to edit the first sentence."}, {"owner": {"reputation": 6600, "user_id": 1173674, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/364e5d67e6deec7330fdd25dc205e945?s=128&d=identicon&r=PG", "display_name": "anol", "link": "https://stackoverflow.com/users/1173674/anol"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1563972090, "post_id": 57182645, "comment_id": 100877088, "body": "@EricPostpischil : indeed, thanks for the remark, I changed it. If the formulation is still not right, please fix it to correspond to what you understood in your comment (which is what I meant)."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1563972349, "post_id": 57182645, "comment_id": 100877268, "body": "UB can have side effects that are undefined :-)"}, {"owner": {"reputation": 8560, "user_id": 1633665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b603faf464ae55fcdd7dc2fb3b7ac063?s=128&d=identicon&r=PG", "display_name": "Virgile", "link": "https://stackoverflow.com/users/1633665/virgile"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1563973179, "post_id": 57182645, "comment_id": 100877750, "body": "@IanAbbott yes, as long as you&#39;re talking about <i>the</i> abstract machine (as opposed to an implementation thereof), you&#39;re right, evaluation will occur. I somehow misread your original comment, sorry."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1563973744, "post_id": 57182645, "comment_id": 100878089, "body": "@Virgule Actually, I had a typo/braino in my previous comment; When I wrote &quot;so if it&#39;s undefined for the actual machine, it&#39;s undefined behavior full stop&quot;, I meant the abstract machine not the actual machine."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 5, "last_activity_date": 1563972159, "creation_date": 1563972159, "answer_id": 57183231, "question_id": 57182645, "link": "https://stackoverflow.com/questions/57182645/undefined-behavior-inside-void-expressions/57183231#57183231", "title": "Undefined behavior inside void expressions", "body": "<blockquote>\n  <p>This is related to the common idiom used to prevent compilers from\n  warning about unused variables:</p>\n\n<pre><code>void f() {\n  int a;\n  (void)a;\n}\n</code></pre>\n</blockquote>\n\n<p>Yes and no.  I'd argue that that idiom turns an unused variable into a used one -- it appears in an expression -- with the cast to <code>void</code> serving to prevent compilers from complaining about the result of that expression going unused.  But in the technical, language-lawyer sense, that particular expression of the idiom produces UB because the sub-expression <code>a</code> is subject to lvalue conversion when <code>a</code>'s value is indeterminate.  You've already quoted the relevant text of the standard.</p>\n\n<blockquote>\n  <p>But what if we have undefined behavior, such as:</p>\n\n<pre><code>void f() {\n  int a;\n  (void)(1/0);\n}\n</code></pre>\n  \n  <p>Can I safely claim that this program contains no undefined behavior?</p>\n</blockquote>\n\n<p>No.</p>\n\n<blockquote>\n  <p>The standard says that \"its value or designator is discarded\", but the\n  \"expression (...) is evaluated (...)\", so the evaluation does seem to\n  take place.</p>\n</blockquote>\n\n<p>Yes, just as the expression <code>a</code> in your earlier example is also evaluated, also producing UB.  UB arises from evaluation of the inner sub-expression.  The conversion to type <code>void</code> is a separable consideration, exactly as a conversion to any other type would be.</p>\n\n<blockquote>\n  <p>GCC/Clang do report the undefined behavior, since it is obvious in\n  this case, but in a more subtle example they don't:</p>\n</blockquote>\n\n<p>Compiler behavior cannot be taken as indicative here.  C does not require compilers to diagnose most undefined behaviors, not even those that could, in principle, be detected at compile time.  Indeed, it is important to recognize that UB arising from incorrect code happens first and foremost <em>at compile time</em>, though of course it follows that if an executable is produced then it exhibits UB, too.</p>\n\n<blockquote>\n  <p>Pushing the argument to its extreme, wouldn't the simple evaluation of\n  <code>(void)a</code> in my first example (where <code>a</code> is uninitialized) systematically\n  trigger undefined behavior?</p>\n</blockquote>\n\n<p>Yes, as I already remarked.  But that does not mean that programs containing such constructions are obligated to <em>mis</em>behave.  As a quality-of-implementation matter, I think it reasonable to hope that the expression statement <code>(void)a;</code> will be accepted by the compiler and will have no corresponding runtime behavior at all.  But I cannot rely on the language standard to back me up on that.</p>\n\n<blockquote>\n  <p>This annex does lead to the interpretation that a <code>void</code> expression\n  containing undefined behavior during its evaluation is not actually\n  evaluated, but since it's just an annex, I'm not sure of its\n  argumentative weight.</p>\n</blockquote>\n\n<p>The plain wording of the normative text of the standard is quite sufficient here.  The annex is not normative, but if there is any question about how the normative text is meant to be interpreted, then informative sections of the standard, such as Annex J, are one of the sources taken into account in sorting that out (but they are still only informative).</p>\n"}], "owner": {"reputation": 6600, "user_id": 1173674, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/364e5d67e6deec7330fdd25dc205e945?s=128&d=identicon&r=PG", "display_name": "anol", "link": "https://stackoverflow.com/users/1173674/anol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 1, "accepted_answer_id": 57183231, "answer_count": 1, "score": 7, "last_activity_date": 1589205342, "creation_date": 1563970320, "last_edit_date": 1589205342, "question_id": 57182645, "link": "https://stackoverflow.com/questions/57182645/undefined-behavior-inside-void-expressions", "title": "Undefined behavior inside void expressions", "body": "<p>Is a C implementation required to ignore undefined behaviors occurring during the evaluation of void expressions as if the evaluation itself never took place?</p>\n\n<p>Considering C11, 6.3.2.2 \u00a71:</p>\n\n<blockquote>\n  <p>If an expression of any other type is evaluated as a void expression, its value or designator is discarded. (A void expression is evaluated for its side effects.)</p>\n</blockquote>\n\n<p>This is related to the common idiom used to prevent compilers from warning about unused variables:</p>\n\n<pre><code>void f() {\n  int a;\n  (void)a;\n}\n</code></pre>\n\n<p>But what if we have undefined behavior, such as:</p>\n\n<pre><code>void f() {\n  int a;\n  (void)(1/0);\n}\n</code></pre>\n\n<p>Can I safely claim that this program contains no undefined behavior? The standard says that \"its value or designator is discarded\", but the \"expression (...) is evaluated (...)\", so the evaluation does seem to take place.</p>\n\n<p>GCC/Clang do report the undefined behavior, since it is obvious in this case, but in a more subtle example they don't:</p>\n\n<pre><code>int main() {\n  int a = 1;\n  int b = 0;\n  (void)(a/b);\n  return 0;\n}\n</code></pre>\n\n<p>Even with <code>-O0</code>, neither GCC nor Clang evaluate <code>1/0</code>. But that also happens even without the cast to void, so it's not representative.</p>\n\n<p>Pushing the argument to its extreme, wouldn't the simple evaluation of <code>(void)a</code> in my first example (where <code>a</code> is uninitialized) systematically trigger undefined behavior?</p>\n\n<p>ISO C11 6.3.2.1 \u00a72 does mention that:</p>\n\n<blockquote>\n  <p>If the lvalue designates an object of automatic storage duration that could have been declared with the register storage class (never had its address taken), and that object is uninitialized (not declared with an initializer and no assignment to it has been performed prior to use), the behavior is undefined.</p>\n</blockquote>\n\n<p>However, in the Annex J.2 Undefined behavior, the phrasing is slightly different:</p>\n\n<blockquote>\n  <p>The behavior is undefined in the following circumstances:</p>\n  \n  <p>(...)</p>\n  \n  <p>An lvalue designating an object of automatic storage duration that could have been declared with the register storage class is used <strong>in a context that requires the value of the designated object</strong>, but the object is uninitialized. (6.3.2.1).</p>\n</blockquote>\n\n<p>This annex does lead to the interpretation that a <code>void</code> expression containing undefined behavior during its evaluation is not actually evaluated, but since it's just an annex, I'm not sure of its argumentative weight.</p>\n"}, {"tags": ["c++", "c", "cmake", "linker"], "comments": [{"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 0, "creation_date": 1563970608, "post_id": 57182475, "comment_id": 100876168, "body": "Have a look at this <a href=\"https://stackoverflow.com/questions/6581357/linking-to-stdc-with-cmake-and-gcc-4-1-2\">post</a>. You can set the <code>CC</code> and <code>CXX</code> variables. Or you can edit your CMake file(s) to manually add the libstdc++ library from the older compiler using <code>target_link_libraries</code>."}, {"owner": {"reputation": 1818, "user_id": 4021251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808129eeb69813286f32266f535b2a34?s=128&d=identicon&r=PG&f=1", "display_name": "nega", "link": "https://stackoverflow.com/users/4021251/nega"}, "edited": false, "score": 0, "creation_date": 1564070882, "post_id": 57182475, "comment_id": 100919110, "body": "Can you provide more details about your build system?"}, {"owner": {"reputation": 1818, "user_id": 4021251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808129eeb69813286f32266f535b2a34?s=128&d=identicon&r=PG&f=1", "display_name": "nega", "link": "https://stackoverflow.com/users/4021251/nega"}, "edited": false, "score": 0, "creation_date": 1564071221, "post_id": 57182475, "comment_id": 100919287, "body": "Also, have you tried adding <code>-static-libstdc++</code> to your CXX_FLAGS or CMAKE_CXX_FLAGS?"}, {"owner": {"reputation": 361, "user_id": 10143160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/341e49d07417456d665c509bc994448b?s=128&d=identicon&r=PG&f=1", "display_name": "HFinch", "link": "https://stackoverflow.com/users/10143160/hfinch"}, "reply_to_user": {"reputation": 1818, "user_id": 4021251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808129eeb69813286f32266f535b2a34?s=128&d=identicon&r=PG&f=1", "display_name": "nega", "link": "https://stackoverflow.com/users/4021251/nega"}, "edited": false, "score": 0, "creation_date": 1564135787, "post_id": 57182475, "comment_id": 100940005, "body": "@nega yes I did try to add <code>-static-libstdc++</code> to my cxx flags but this has no effect. What do you want to know abut the build system ? primarily standard gcc 4.1.2"}, {"owner": {"reputation": 1818, "user_id": 4021251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808129eeb69813286f32266f535b2a34?s=128&d=identicon&r=PG&f=1", "display_name": "nega", "link": "https://stackoverflow.com/users/4021251/nega"}, "edited": false, "score": 0, "creation_date": 1564196430, "post_id": 57182475, "comment_id": 100961542, "body": "OS? Linux? if so, what distro? how are the compilers installed? do you have <code>root</code>?"}, {"owner": {"reputation": 1818, "user_id": 4021251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808129eeb69813286f32266f535b2a34?s=128&d=identicon&r=PG&f=1", "display_name": "nega", "link": "https://stackoverflow.com/users/4021251/nega"}, "edited": false, "score": 0, "creation_date": 1564196479, "post_id": 57182475, "comment_id": 100961552, "body": "have you tried building your cmake with <code>-static-libstdc++</code> and then wiping your gcc_4.8.3 chain?"}, {"owner": {"reputation": 361, "user_id": 10143160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/341e49d07417456d665c509bc994448b?s=128&d=identicon&r=PG&f=1", "display_name": "HFinch", "link": "https://stackoverflow.com/users/10143160/hfinch"}, "edited": false, "score": 0, "creation_date": 1564382128, "post_id": 57182475, "comment_id": 100996744, "body": "RHEL 5, compilers are preinstalled and no i do not have permanent root access. When i build cmake i followed the instructions given by <a href=\"https://gitlab.kitware.com/cmake/cmake/tree/v3.13.4\" rel=\"nofollow noreferrer\">gitlab.kitware.com/cmake/cmake/tree/v3.13.4</a> i am not sure if i have the possibility to use <code>-static-libstdc++</code>"}], "owner": {"reputation": 361, "user_id": 10143160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/341e49d07417456d665c509bc994448b?s=128&d=identicon&r=PG&f=1", "display_name": "HFinch", "link": "https://stackoverflow.com/users/10143160/hfinch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563972479, "creation_date": 1563969815, "last_edit_date": 1563972479, "question_id": 57182475, "link": "https://stackoverflow.com/questions/57182475/custom-build-cmake-using-standard-library-also-for-project-with-lower-gcc-versio", "title": "Custom build cmake using standard library also for project with lower gcc version", "body": "<p>I have a custom build cmake v3.10.0 which was compiled with a <code>gcc_4.8.3</code>. I am using this custom build cmake to compile a cmake project that must use <code>gcc _4.1.2</code> because of legacy code. </p>\n\n<p>Executing cmake promted me with an error because it needs to use the <code>libstdc++-IFX.so.6</code> provided by <code>gcc_4.8.3</code> which I fixed by adding the path to the correct library in my <code>LD_LIBRARY_PATH</code> before the path to the libraries provided by <code>gcc_4.1.2</code>.</p>\n\n<p>Compiling my project and linking an executable (which is done by c++) results in the linker taking the <code>gcc_4.8.3</code> stdlibs over the <code>gcc_4.1.2</code> libs. Is there any way to tell cmake to not use the libraries it needs for himself for my cmake project preferably without touching <code>LD_LIBRARY_PATH</code>?</p>\n\n<p><strong>Edits:</strong></p>\n\n<p>@squareskittles comment: I did read and try everything this post suggest but without any changes. The <code>libstdc++-IFX.so.6</code> is still taken from <code>gcc_4.8.3</code></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 426, "user_id": 11753371, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TzP6pGj-mhc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfatPEOhXByRpmq1h85P_wfdRxrIw/photo.jpg?sz=128", "display_name": "deon cagadoes", "link": "https://stackoverflow.com/users/11753371/deon-cagadoes"}, "edited": false, "score": 2, "creation_date": 1563968550, "post_id": 57182031, "comment_id": 100875035, "body": "What are you trying to do ? And where is the line when crash ? If doesn&#39;t crash, from where you get the message ?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563968601, "post_id": 57182031, "comment_id": 100875070, "body": "Possibly unrelated to your problem, you have a fatal flaw in the <code>readline</code> function where you could use negative indexes in the string array. And a couple of fatal flaws where you don&#39;t check what <code>readline</code> return."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1563969593, "post_id": 57182031, "comment_id": 100875573, "body": "Does the question (I can&#39;t read the link) really ask for this output from <code>printf(&quot;\\nNumber of downhill = %d \\n&quot;, dwnhl);</code>? That seems unusual. Don&#39;t forget there is a robot checking the output which must exactly match what the question states the output shall be."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1563969987, "post_id": 57182031, "comment_id": 100875794, "body": "@WeatherVane notice that OP only wrote the code in the <code>countingValleys</code> function. All other code is given by hackerrank"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1563972693, "post_id": 57182031, "comment_id": 100877471, "body": "Adding to my previous comment, if the robot is execting a single line of output then your message starts with an empty line."}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 8557287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab86d3c08d3d33c2a5f3d2cb5abbd12a?s=128&d=identicon&r=PG", "display_name": "aryan", "link": "https://stackoverflow.com/users/8557287/aryan"}, "edited": false, "score": 0, "creation_date": 1563973742, "post_id": 57182408, "comment_id": 100878087, "body": "Problem solved. I don&#39;t know what was the problem really. But I reset the code and typed again, and it worked. Maybe I was missing something. BTW thanks all for your responses."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 0, "last_activity_date": 1563971013, "last_edit_date": 1563971013, "creation_date": 1563969620, "answer_id": 57182408, "question_id": 57182031, "link": "https://stackoverflow.com/questions/57182031/why-am-i-getting-this-message-in-hackerrank-no-response-on-stdout-i-dont/57182408#57182408", "title": "Why am I getting this message in hackerrank &quot;~ no response on stdout ~&quot;? I don&#39;t know what I am missing&gt;", "body": "<p>One problem is the way you handle <code>frmsurface</code></p>\n\n<p>The first time you enter the loop <code>frmsurface</code> is set to true. If the events are <code>UUDD</code>, your code will still count a \"valley\" because you don't clear <code>frmsurface</code> when you go up.</p>\n\n<p>Instead of </p>\n\n<pre><code>       if(level==0)               \n       {                        \n         frmsurface=true;     \n       }\n</code></pre>\n\n<p>you could try:</p>\n\n<pre><code>       frmsurface = (level == 0);\n</code></pre>\n\n<p>but I don't really understand why you want the boolean. Just test for <code>level == 0</code> instead. Something like:</p>\n\n<pre><code>       if(s[i]=='D')  \n       {\n           if(level==0)\n           {\n               dwnhl++;\n           }\n           level--;\n       }\n       else if (s[i]=='U') \n       {\n               level++;\n       }\n</code></pre>\n\n<p>Also I wonder if this line:</p>\n\n<pre><code>printf(\"\\nNumber of downhill = %d \\n\", dwnhl);\n</code></pre>\n\n<p>must be removed.</p>\n\n<p>Notice that</p>\n\n<pre><code>   int k=strlen(s);\n   for(int i=0;i&lt;k;i++)\n</code></pre>\n\n<p>could probably just be</p>\n\n<pre><code>   for(int i=0;i&lt;n;i++)\n                 ^\n</code></pre>\n\n<p>as <code>n</code> is passed to the function</p>\n"}], "owner": {"reputation": 131, "user_id": 8557287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab86d3c08d3d33c2a5f3d2cb5abbd12a?s=128&d=identicon&r=PG", "display_name": "aryan", "link": "https://stackoverflow.com/users/8557287/aryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 57182408, "answer_count": 1, "score": 1, "last_activity_date": 1563971013, "creation_date": 1563968287, "last_edit_date": 1563970044, "question_id": 57182031, "link": "https://stackoverflow.com/questions/57182031/why-am-i-getting-this-message-in-hackerrank-no-response-on-stdout-i-dont", "title": "Why am I getting this message in hackerrank &quot;~ no response on stdout ~&quot;? I don&#39;t know what I am missing&gt;", "body": "<p>Why am I getting this message in hackerrank \"~ no response on stdout ~\"? I don't know what I am missing?\nI am bit frustrated right now because I have no clue about what to do.\nSo I was left with only choice to post this query on Stackoverflow.</p>\n\n<p>Here is <a href=\"https://www.hackerrank.com/challenges/counting-valleys/problem?h_l=interview&amp;playlist_slugs%5B%5D=interview-preparation-kit&amp;playlist_slugs%5B%5D=warmup\" rel=\"nofollow noreferrer\">the link to the problem</a></p>\n\n<p>Here is my complete code:</p>\n\n<pre><code>char* readline();\n// Complete the countingValleys function below.\nint countingValleys(int n, char* s) \n{\n  int dwnhl = 0, level = 0;\n  bool frmsurface = true;\n  int k = strlen(s);\n  for (int i = 0; i &lt; k; i++) \n  {\n    if (level == 0) \n    {\n      frmsurface = true;\n    }\n\n    if (s[i] == 'D') \n    {\n      level--;\n      if ((level &lt; 0) &amp;&amp; (frmsurface == true)) \n      {\n        dwnhl++;\n        frmsurface = false;\n        //printf(\"went downhill %d \",i);\n      }\n    } \n    else if (s[i] == 'U') \n    { //printf(\"went uphill %d \",i);\n      level++;\n    }\n    // printf(\"\\nhello - %c\",s[i]);\n  }\n\n  printf(\"\\nNumber of downhill = %d \\n\", dwnhl);\n  return (dwnhl);\n}\n\nint main() \n{\n  FILE* fptr = fopen(getenv(\"OUTPUT_PATH\"), \"w\");\n\n  char* n_endptr;\n  char* n_str = readline();\n  int n = strtol(n_str, &amp;n_endptr, 10);\n\n  if (n_endptr == n_str || *n_endptr != '\\0') \n  {\n    exit(EXIT_FAILURE);\n  }\n\n  char* s = readline();\n\n  int result = countingValleys(n, s);\n\n  printf(\"%d\\n\", result);\n\n  return 0;\n}\n\nchar* readline() \n{\n  size_t alloc_length = 1024;\n  size_t data_length = 0;\n  char* data = malloc(alloc_length);\n\n  while (true) \n  {\n    char* cursor = data + data_length;\n    char* line = fgets(cursor, alloc_length - data_length, stdin);\n\n    if (!line) \n    {\n      break;\n    }\n\n    data_length += strlen(cursor);\n\n    if (data_length &lt; alloc_length - 1 || data[data_length - 1] == '\\n') \n    {\n      break;\n    }\n\n    size_t new_length = alloc_length &lt;&lt; 1;\n    data = realloc(data, new_length);\n\n    if (!data) \n    {\n      break;\n    }\n\n    alloc_length = new_length;\n  }\n\n  if (data[data_length - 1] == '\\n') \n  {\n    data[data_length - 1] = '\\0';\n  }\n\n  data = realloc(data, data_length);\n\n  return data;\n}\n</code></pre>\n"}, {"tags": ["c", "profiling", "gprof"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1563969484, "post_id": 57181935, "comment_id": 100875520, "body": "you could try to do <i>nothing</i> in one of the methods and retry. see if the timings are the same."}, {"owner": {"reputation": 6534, "user_id": 1202172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8587094fc4666bee5d5852f163e6f86b?s=128&d=identicon&r=PG", "display_name": "Danijel", "link": "https://stackoverflow.com/users/1202172/danijel"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1563970355, "post_id": 57181935, "comment_id": 100876013, "body": "Tried it and no, timings are not the same anymore."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7299013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df61f42dae1baa20bcb55d34ffdc7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Semborg Ovenstein", "link": "https://stackoverflow.com/users/7299013/semborg-ovenstein"}, "is_accepted": false, "score": 0, "last_activity_date": 1563971473, "last_edit_date": 1563971473, "creation_date": 1563971164, "answer_id": 57182913, "question_id": 57181935, "link": "https://stackoverflow.com/questions/57181935/profiling-the-same-c-function-called-with-different-arguments/57182913#57182913", "title": "Profiling the same C function called with different arguments", "body": "<p>I never use gprof for profiling. As far as I remember, there was some controversy on whether it should be used for that purpose (I think it was designed with other goals in mind).</p>\n\n<p>However, if you are interested in measuring cycles, you could use:</p>\n\n<pre><code>clock_t start = clock();\n\ng_apply_mono  ( &amp;g_mono  , in_mono   );\n\nfprintf(stdout, \"Clocks elapsed: %d\\n\", (int) (clock() - start));\n</code></pre>\n\n<p>Remember to include  in your headers. Also, if you are interested in measuring time you can just divide the number of clocks by the number of clocks in a second, i.e. CLOCKS_PER_SEC.</p>\n"}], "owner": {"reputation": 6534, "user_id": 1202172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8587094fc4666bee5d5852f163e6f86b?s=128&d=identicon&r=PG", "display_name": "Danijel", "link": "https://stackoverflow.com/users/1202172/danijel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563971473, "creation_date": 1563967970, "last_edit_date": 1563968744, "question_id": 57181935, "link": "https://stackoverflow.com/questions/57181935/profiling-the-same-c-function-called-with-different-arguments", "title": "Profiling the same C function called with different arguments", "body": "<p>Some confusion using a profiler while working on a fixed-point DSP code. </p>\n\n<p>When I run <code>gprof</code> on the following code: </p>\n\n<pre><code>main()\n{\n    ...\n    g_apply(  &amp;g_mono, in_mono  );\n    g_apply(  &amp;g_stereo, in_stereo  );\n    ...\n}\n</code></pre>\n\n<p>I get (self cycles, children cycles, function name): </p>\n\n<pre><code>16943.80, 4760.06 g_apply \n</code></pre>\n\n<p>But I wanted to see separate cycles for mono and stereo, so I did this:</p>\n\n<pre><code>void g_apply_mono(g* g_mono, in* in_mono)\n{\n    g_apply( g_mono, in_mono );\n}\nvoid g_apply_stereo(g* g_stereo, in* in_stereo)\n{\n    g_apply( g_stereo, in_stereo );\n}    \nmain()\n{\n    ...\n    g_apply_mono  ( &amp;g_mono  , in_mono   );\n    g_apply_stereo( &amp;g_stereo, in_stereo );\n    ...\n}\n</code></pre>\n\n<p>However, profiler gives exactly the same cycles for both <code>g_apply_mono()</code> and <code>g_apply_stereo()</code>! </p>\n\n<pre><code>12.03 10851.93 g616_apply_mono\n12.03 10851.93 g616_apply_stereo\n</code></pre>\n\n<p>What did I do wrong? Is there something that confuses the profiler?</p>\n\n<p>Stereo is clearly much slower than mono, i.e. needs much more cycles. </p>\n\n<p>The outputs in both above cases are the same, so the code is OK. </p>\n"}, {"tags": ["c", "bash", "fork", "code-injection"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1563967775, "post_id": 57181870, "comment_id": 100874586, "body": "Don&#39;t use <code>system()</code> at all. Directly call <code>execve()</code> yourself."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563967882, "post_id": 57181870, "comment_id": 100874648, "body": "<a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.22.4.8\" rel=\"nofollow noreferrer\"><code>system()</code> takes a single <code>const char *</code> argument.</a>  And <b>only</b> a single <code>const char *</code> argument."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1563967941, "post_id": 57181870, "comment_id": 100874684, "body": "BTW, it&#39;s not good practice to name executables with extensions, and scripts on UNIX <i>are</i> executable when they have a valid shebang. What if you want to rewrite <code>sctcipt.sh</code> in a language other than shell? You&#39;d need to either rewrite every program that invokes it, or keep the original now-misleading name."}, {"owner": {"reputation": 367, "user_id": 849877, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/694b44de441c49ef07fe0b31b20dfd40?s=128&d=identicon&r=PG", "display_name": "mox", "link": "https://stackoverflow.com/users/849877/mox"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563968295, "post_id": 57181870, "comment_id": 100874881, "body": "Thank @AndrewHenle, I corrected the example code."}, {"owner": {"reputation": 367, "user_id": 849877, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/694b44de441c49ef07fe0b31b20dfd40?s=128&d=identicon&r=PG", "display_name": "mox", "link": "https://stackoverflow.com/users/849877/mox"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1563968314, "post_id": 57181870, "comment_id": 100874892, "body": "Thank @CharlesDuffy, indeed I usually do not put extension in executable file names. In this case I indicated the .sh to clarify that the executable is a shell script and not a binary ELF or something other, I suppose that in general calling from .c an executable script or a binary can be different."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563968436, "post_id": 57181870, "comment_id": 100874971, "body": "Of course, that means the code as posted is now subject to the the caller doing something like <code>export IFS=&#47;</code> in the parent shell and using privilege escalation to get a root shell.  The answer you got this code from is worse than wrong."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1563968489, "post_id": 57181870, "comment_id": 100874998, "body": "@mox, nope -- the OS-level interface is intentionally identical; an executable is an executable, whether it&#39;s an ELF binary under-the-hood, or a script with a shebang."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563968869, "post_id": 57181870, "comment_id": 100875209, "body": "@AndrewHenle, ...if the caller can set arbitrary environment variables, it&#39;s game-over regardless; they could just set <code>LD_LIBRARY_PATH</code> if they so chose. For an attack to be meaningful, the attacker needs to be in a place where they&#39;re trying to escalate their privileges, move laterally, or otherwise <i>get something they don&#39;t already have</i>. If they can set any environment variable they choose, I&#39;d argue that they already have control over this box."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1563969044, "post_id": 57181870, "comment_id": 100875292, "body": "@CharlesDuffy Setuid programs ignore <code>LD_LIBRARY_PATH</code>.  Along with <code>LD_PRELOAD</code> and other such environment variables."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563969145, "post_id": 57181870, "comment_id": 100875348, "body": "@AndrewHenle, I know that, of course -- but has it been specified that this <i>is</i> a setuid program? Perhaps the attack vector is data from a web form, and the program is still running with the server&#39;s privileges."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563969354, "post_id": 57181870, "comment_id": 100875451, "body": "The purpose of the linked question is to run a setuid process.  The posted code includes <code>envp = 0; &#47;* blocks IFS attack on non-bash shells *&#47;</code> which is only relevant for setuid processes. And the title asks for a &quot;secure way...&quot; Given all that, I&#39;d say it&#39;s unsafe to assume that this question is <i>not</i> about setuid processes."}, {"owner": {"reputation": 367, "user_id": 849877, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/694b44de441c49ef07fe0b31b20dfd40?s=128&d=identicon&r=PG", "display_name": "mox", "link": "https://stackoverflow.com/users/849877/mox"}, "edited": false, "score": 0, "creation_date": 1563969524, "post_id": 57181870, "comment_id": 100875542, "body": "Actually I need a setuid process, but I think that is useful to have a solution that do not relay on that, or at least to know that it is valid only in this context. Especially if somebody would like to use the solution in a non setuid context."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1563969534, "post_id": 57181870, "comment_id": 100875544, "body": "<i>nod</i>. If we&#39;re going to be properly, professionally paranoid, we&#39;d want to unset <i>all</i> all-caps environment variables (as that&#39;s the namespace reserved by POSIX for variables that can modify shell or system behavior), and have the script reestablish known/safe/audited values for <code>PATH</code> and/or other ones it actually needs."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1563969591, "post_id": 57181870, "comment_id": 100875572, "body": "...that said, I still hold that the answer as-given is <b>not</b> in any way directly prone to IFS attacks. <code>IFS</code> controls how unquoted expansion results are interpreted; it doesn&#39;t change the shell&#39;s parsing of constants, or of quoted expansions."}], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 849877, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/694b44de441c49ef07fe0b31b20dfd40?s=128&d=identicon&r=PG", "display_name": "mox", "link": "https://stackoverflow.com/users/849877/mox"}, "edited": false, "score": 0, "creation_date": 1563968472, "post_id": 57182001, "comment_id": 100874989, "body": "This solution is safe against code-injection in <code>argv[1]</code>?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 367, "user_id": 849877, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/694b44de441c49ef07fe0b31b20dfd40?s=128&d=identicon&r=PG", "display_name": "mox", "link": "https://stackoverflow.com/users/849877/mox"}, "edited": false, "score": 1, "creation_date": 1563968529, "post_id": 57182001, "comment_id": 100875025, "body": "@mox, entirely, yes. In the <code>execl</code> case, there&#39;s no child shell started at all, so there&#39;s no shell to inject code into. In the environment case, there&#39;s a shell invoked, but the content is treated as data, not code."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 367, "user_id": 849877, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/694b44de441c49ef07fe0b31b20dfd40?s=128&d=identicon&r=PG", "display_name": "mox", "link": "https://stackoverflow.com/users/849877/mox"}, "edited": false, "score": 1, "creation_date": 1563968654, "post_id": 57182001, "comment_id": 100875105, "body": "@mox, ....now, to be clear -- this is safe against code injection <i>as long as <code>sctcipt.sh</code> is itself safely written</i>. Correct calling convention doesn&#39;t help if what you&#39;re invoking is itself unsafe."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1563968983, "post_id": 57182001, "comment_id": 100875268, "body": "Your second option is subject to an <code>IFS</code> attack.  <code>IFS=&#47;</code> in the parent process environment will cause <code>system()</code> to run the command <code>path to ...</code>, where the <code>path</code> command is found using the caller&#39;s <code>PATH</code> environment variable and then run with the <code>to ...</code> as arguments."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563969231, "post_id": 57182001, "comment_id": 100875393, "body": "@AndrewHenle, ...if I were doing <code>setenv(&quot;progName&quot;, &quot;&#47;path&#47;to&#47;sctipt.sh&quot;)</code>, and calling <code>system(&quot;$progName \\&quot;$myArg\\&quot;&quot;)</code>, <b>then</b> I&#39;d be subject to an IFS attack (even <code>system(&quot;\\&quot;$progName\\&quot; \\&quot;$myArg\\&quot;&quot;)</code> is safe). Because the program name is a constant, it never gets string-split. And even non-constant values are only string-split when the expansion is unquoted."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563969974, "post_id": 57182001, "comment_id": 100875788, "body": "@CharlesDuffy I&#39;m pretty sure that interpretation of <code>IFS</code> is very recent, only since POSIX 7.  Any legacy <code>sh</code> is quite likely to split the initial command also.  <a href=\"https://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_05_03\" rel=\"nofollow noreferrer\">POSIX 6</a> states (bolding mine): &quot;Implementations <b>may</b> ignore the value of IFS in the environment at the time the shell is invoked, treating IFS as if it were not set.&quot;"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563970040, "post_id": 57182001, "comment_id": 100875834, "body": "@AndrewHenle, whether the shell ignores IFS or not is completely irrelevant, if it&#39;s only used in string-splitting unquoted expansion results. I&#39;m quite certain that&#39;s been the case at least since the original 1991 POSIX sh spec."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563970290, "post_id": 57182001, "comment_id": 100875977, "body": "@CharlesDuffy The wording on variables was definitely added in POSIX 7:  <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_05_03\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/9699919799/utilities/&hellip;</a>  Given the POSIX 6 wording, I suspect <code>IFS</code> effects were not that tightly specified in earlier versions of POSIX. I know I&#39;ve demonstrated <code>IFS</code> attacks well after 1991."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1563970353, "post_id": 57182001, "comment_id": 100876012, "body": "I&#39;m certain you&#39;ve been able to demonstrate them; the <code>foo=&#47;bin&#47;foo; $foo arg1 arg2 ...</code> idiom, which introduces that vulnerability, is unfortunately very common. I&#39;m just not using it here."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563970447, "post_id": 57182001, "comment_id": 100876074, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/196923/discussion-between-charles-duffy-and-andrew-henle\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "is_accepted": true, "score": 0, "last_activity_date": 1563969984, "last_edit_date": 1563969984, "creation_date": 1563968187, "answer_id": 57182001, "question_id": 57181870, "link": "https://stackoverflow.com/questions/57181870/secure-way-to-run-shell-script-with-arguments-from-c-working-example/57182001#57182001", "title": "Secure way to run shell script with arguments from C, working example", "body": "<h3>First Choice: Don't Use <code>system()</code> At All</h3>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n\nmain(int argc, char **argv) {\n    int retval;\n    execl(\"/path/to/sctcipt.sh\", \"/path/to/sctcipt.sh\", argv[1], NULL);\n    _exit(1); /* if we got here, the fork() failed */\n}\n</code></pre>\n\n<p>Because all we're doing is wrapping another program, we can just pass direct control off to it with an <code>execv</code>-family syscall; there's no need to even <code>fork()</code> first.</p>\n\n<hr>\n\n<h3>Second Choice: Export Your Variables Through The Environment</h3>\n\n<p>Here, the code passed to <code>system()</code> is a constant you've audited yourself; replacements are performed only after the shell is started, <em>by</em> the shell, after it's already finished with the syntax-parsing phase.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n\nmain(int argc, char **argv) {\n    int retval;\n    /* avoid environment-based attacks against our shell: ENV, BASH_ENV, etc */\n    clearenv(); /* maybe fork first to scope this operation? */\n    /* Export the data we want the child to see to the environment */\n    if(setenv(\"myArg\", argv[1], 1) != 0) {\n        perror(\"Unable to export argument as environment variable\");\n        _exit(1);\n    };\n    retval = system(\"/path/to/cstipt.sh \\\"$myArg\\\"\");\n    unsetenv(\"myArg\"); /* take it back out for housekeeping */\n    return retval;\n}\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 849877, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/694b44de441c49ef07fe0b31b20dfd40?s=128&d=identicon&r=PG", "display_name": "mox", "link": "https://stackoverflow.com/users/849877/mox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 631, "favorite_count": 1, "accepted_answer_id": 57182001, "answer_count": 1, "score": 0, "last_activity_date": 1563969984, "creation_date": 1563967694, "last_edit_date": 1563968056, "question_id": 57181870, "link": "https://stackoverflow.com/questions/57181870/secure-way-to-run-shell-script-with-arguments-from-c-working-example", "title": "Secure way to run shell script with arguments from C, working example", "body": "<p>I would like a minimal working c code, that execute a shell script, passing the first argument of the c executable to the shell script in a secure way.</p>\n\n<p>There are many questions on stakcexchange about running a shell script form inside a C executable. Many of them suggest to use the <code>system</code> call.</p>\n\n<p>Actually I'm using this solution:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\nmain( int argc, char ** argv, char ** envp )\n{\n\n    char *command;\n    int size = asprintf(&amp;command, \"/path/to/script.sh %s\", argv[1]);\n\n    envp = 0; /* blocks IFS attack on non-bash shells */\n    system( command );\n    //perror( argv[0] );\n    return errno;\n}\n</code></pre>\n\n<p>derived from <a href=\"https://stackoverflow.com/questions/21663217/how-to-enable-suidperl-in-debian-wheezy\">How to enable suidperl in Debian wheezy?</a>.</p>\n\n<p>I know that this solution is subject to code-injection. A possible solution is described \"in principle\" in the @basile-starynkevitch answer to <a href=\"https://stackoverflow.com/questions/44576041/how-do-you-execute-a-bash-script-with-system-when-there-are-spaces-in-the-fi\">this question</a></p>\n\n<p>How can I modify the above example .c code in order to sanitize the <code>argv[1]</code> or in general to call in a secure way the shell script with arguments?</p>\n"}, {"tags": ["c", "codeblocks", "scientific-notation"], "comments": [{"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 2, "creation_date": 1563968526, "post_id": 57181847, "comment_id": 100875023, "body": "It is not clear what you are asking. Please <a href=\"https://stackoverflow.com/posts/57181847/edit\">edit</a> your question to show your code (copy &amp; paste as text), the input, the actual output and the expected output."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1563968823, "post_id": 57181847, "comment_id": 100875187, "body": "Please show your code. What are you talking about? <code>scanf</code>? Please read this: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and this: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1563968859, "post_id": 57181847, "comment_id": 100875205, "body": "Please don&#39;t answer in a comment. Re-read my first comment and <a href=\"https://stackoverflow.com/posts/57181847/edit\">edit</a> your question as requested."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1563968964, "post_id": 57181847, "comment_id": 100875254, "body": "Probably you are using <code>float</code> or <code>double</code> values. You might want to use <code>int</code> or similar."}, {"owner": {"reputation": 13, "user_id": 11829884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12edce10dfe1b7f73fb1351766db8abf?s=128&d=identicon&r=PG&f=1", "display_name": "A2Z", "link": "https://stackoverflow.com/users/11829884/a2z"}, "edited": false, "score": 0, "creation_date": 1563969154, "post_id": 57181847, "comment_id": 100875353, "body": "Yes i am using float is that any way to turn off this !"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1563973433, "post_id": 57181847, "comment_id": 100877898, "body": "Do you need to use floating point numbers? (e.g. <code>2.5+6</code>) Please <a href=\"https://stackoverflow.com/posts/57181847/edit\">edit</a> your question to add all this information. <b>Don&#39;t answer in comments.</b> All relevant information must be in the question."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1563976529, "post_id": 57182493, "comment_id": 100879719, "body": "<code>&quot;%f&quot;</code> also accept exponential notation such as <code>0x1.23p5</code>.  Suggest a check that also includes <code>&quot;Pp&quot;</code>."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 0, "last_activity_date": 1563976943, "last_edit_date": 1563976943, "creation_date": 1563969854, "answer_id": 57182493, "question_id": 57181847, "link": "https://stackoverflow.com/questions/57181847/how-can-i-turn-off-exponenntial-notation-in-c/57182493#57182493", "title": "How can I turn off Exponenntial Notation in C?", "body": "<p>You cannot do this directly, there is no standard format specifier for the <code>scanf</code> function family that rejects scientific notation (such as <code>1e3</code>) for <code>float</code>or <code>double</code> and there is no directy way to \"turn off\" the <code>scanf</code>s accepting of numbers in scientific notation.</p>\n\n<p>What you can do is read the input as string. Then you check if the string contains 'E' or 'e' and reject if that's the case.</p>\n\n<p>This naive approach should give you an idea what you could do:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n  float x = 0;\n\n  do\n  {\n    char buffer[100];\n    scanf(\"%s\", buffer);\n\n    if (strchr(buffer, 'E') != NULL || strchr(buffer, 'e') != NULL)\n    {\n      printf(\"Rejected\\n\");\n    }\n    else\n    {\n      sscanf(buffer, \"%f\", &amp;x);\n      break;\n    }\n  } while (1);\n  //...\n}\n</code></pre>\n\n<p>Instead of checking explicitely for the presence of <code>E</code> and <code>e</code>, you could also check for the presence of any non digit and non decimal point character, IOW reject if the buffer contains any of characters not included in <code>[0123456789.]</code></p>\n\n<p>Of course you should eventually put this functionality into a function.</p>\n"}], "owner": {"reputation": 13, "user_id": 11829884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12edce10dfe1b7f73fb1351766db8abf?s=128&d=identicon&r=PG&f=1", "display_name": "A2Z", "link": "https://stackoverflow.com/users/11829884/a2z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 57182493, "answer_count": 1, "score": -1, "last_activity_date": 1563976943, "creation_date": 1563967635, "last_edit_date": 1563976769, "question_id": 57181847, "link": "https://stackoverflow.com/questions/57181847/how-can-i-turn-off-exponenntial-notation-in-c", "title": "How can I turn off Exponenntial Notation in C?", "body": "<pre><code>please enter num1 , op , num2\n2e2+6\nresult= 206.000000\n\nProcess returned 0 (0x0)   execution time : 8.657 s\nPress any key to continue.\n</code></pre>\n\n<p>(How to use) ... any way to turn off this !</p>\n"}, {"tags": ["c", "string", "char", "max", "string-comparison"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1563966224, "post_id": 57181235, "comment_id": 100873771, "body": "<code>I would still want to output the characters on both strings that are the same.</code>--&gt;what about this input? <code>A: abcdgh and B: dcbaefgh</code> should it output <code>abcdh</code>?"}, {"owner": {"reputation": 5, "user_id": 8527580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c8adf84f3acf4f1194602ab1ff4f45?s=128&d=identicon&r=PG&f=1", "display_name": "Saldi", "link": "https://stackoverflow.com/users/8527580/saldi"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1563966371, "post_id": 57181235, "comment_id": 100873846, "body": "output should be gh"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1563966690, "post_id": 57181235, "comment_id": 100874024, "body": "How can you please explain?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1563967433, "post_id": 57181235, "comment_id": 100874399, "body": "You are comparing uninitialized strings. And what is <code>Null</code>?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1563969063, "post_id": 57181235, "comment_id": 100875303, "body": "What output do you want for <code>ABCDEFG</code> and <code>XBXXDEFY</code>? <code>BDEF</code>? I think the your specification is not complete."}], "answers": [{"tags": [], "owner": {"reputation": 85, "user_id": 11829389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8141548b8e13a29d15f6632a81449a?s=128&d=identicon&r=PG&f=1", "display_name": "LucasFab", "link": "https://stackoverflow.com/users/11829389/lucasfab"}, "is_accepted": false, "score": -2, "last_activity_date": 1563967033, "creation_date": 1563967033, "answer_id": 57181654, "question_id": 57181235, "link": "https://stackoverflow.com/questions/57181235/how-do-i-compare-each-character-in-two-different-strings/57181654#57181654", "title": "How do I compare each character in two different strings?", "body": "<p>The end of a string in C is a '\\0' a not NULL, NULL is for a pointer which means you can use it on a string ( a char * like stra ) but not on a character ( like stra[i] ). Finally for printf you should use : printf(\"%s\\n\", strc);</p>\n"}, {"tags": [], "owner": {"reputation": 88, "user_id": 8298187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58edbca22d7457c11f0f22234e2de57e?s=128&d=identicon&r=PG&f=1", "display_name": "Bassrelic", "link": "https://stackoverflow.com/users/8298187/bassrelic"}, "is_accepted": false, "score": -1, "last_activity_date": 1563969412, "last_edit_date": 1563969412, "creation_date": 1563967209, "answer_id": 57181710, "question_id": 57181235, "link": "https://stackoverflow.com/questions/57181235/how-do-i-compare-each-character-in-two-different-strings/57181710#57181710", "title": "How do I compare each character in two different strings?", "body": "<p>Your approach does only extract the same letters if they are at the same position in both strings. (I'm not quite sure if this is what you intended)\nIf you compare \"Hello test\" and \"eHello test\" your approach would not find similar characters in these strings. So you may have to think about another approach.</p>\n\n<p>~~ EDIT ~~</p>\n\n<p>Strings are terminated using the \\0 (null character):</p>\n\n<blockquote>\n  <ol start=\"5\">\n  <li>Environment</li>\n  </ol>\n  \n  <p>5.2 Environmental considerations</p>\n  \n  <p>5.2.1 Character sets </p>\n  \n  <p>2.</p>\n  \n  <p>In a character constant or string literal, members of the execution\n  character set shall be represented by corresponding members of the\n  source character set or by escape sequences consisting of the\n  backslash \\ followed by one or more characters. A byte with all bits\n  set to 0, called the null character, shall exist in the basic\n  execution character set; it is used to terminate a character string.</p>\n</blockquote>\n\n<p>Also:</p>\n\n<blockquote>\n  <ol start=\"7\">\n  <li>Library</li>\n  </ol>\n  \n  <p>7.1 Introduction</p>\n  \n  <p>7.1.1 Definitions of terms </p>\n  \n  <p>1 Astring is a contiguous sequence of characters terminated by and including the first null character. [...]</p>\n</blockquote>\n\n<p>Source: </p>\n\n<ul>\n<li><a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1548.pdf#page=40\" rel=\"nofollow noreferrer\">ISO/IEC 9899:201x p.40</a> </li>\n<li><a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1548.pdf#page=197\" rel=\"nofollow noreferrer\">ISO/IEC 9899:201x p.197</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 249, "user_id": 11763101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e19848c6c0f710f10a380a1e5aa89ee4?s=128&d=identicon&r=PG&f=1", "display_name": "hissroth", "link": "https://stackoverflow.com/users/11763101/hissroth"}, "is_accepted": false, "score": 0, "last_activity_date": 1563967667, "creation_date": 1563967667, "answer_id": 57181860, "question_id": 57181235, "link": "https://stackoverflow.com/questions/57181235/how-do-i-compare-each-character-in-two-different-strings/57181860#57181860", "title": "How do I compare each character in two different strings?", "body": "<p>The end of a string is  '\\0' and not NULL, then your printf should be printf(\"%s\\n\", strc) overwise you will get an error while compiling. \nIf you want to check if a character is in a sentence then you should check your first letter, compare it to all the letter of the second string, if it's in it, stock it somewhere, then you go to the second letter of your first string and you do it for all the letter of your first string. Because in this code you post, it's not what you are looking for.</p>\n"}, {"tags": [], "owner": {"reputation": 310, "user_id": 11768199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c1e17bd560ec7b4be9c08c0fe22873?s=128&d=identicon&r=PG&f=1", "display_name": "SebCollard", "link": "https://stackoverflow.com/users/11768199/sebcollard"}, "is_accepted": false, "score": 0, "last_activity_date": 1563967912, "creation_date": 1563967912, "answer_id": 57181927, "question_id": 57181235, "link": "https://stackoverflow.com/questions/57181235/how-do-i-compare-each-character-in-two-different-strings/57181927#57181927", "title": "How do I compare each character in two different strings?", "body": "<p>in C the end character of the string is <code>\\0</code>, Null is use for check if a pointer is initialized. You should use printf like this : <code>printf(\"%s\\n\", strc);</code>, '%s' is use to print a string.</p>\n"}, {"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1563970051, "post_id": 57182364, "comment_id": 100875845, "body": "I&#39;m not sure if he wants that. For me his specification is incomplete and/or unclear. Upvoted anyway."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1563970300, "post_id": 57182364, "comment_id": 100875984, "body": "@Jabberwocky In my opinion I have understood the assignment correctly.:)"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1563970541, "post_id": 57182364, "comment_id": 100876129, "body": "@Jabberwocky Another approach is to return the maximum common substring allocated dynamically. But in the assignment there is written that the substring should be only outputted.:)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1563970584, "last_edit_date": 1563970584, "creation_date": 1563969524, "answer_id": 57182364, "question_id": 57181235, "link": "https://stackoverflow.com/questions/57181235/how-do-i-compare-each-character-in-two-different-strings/57182364#57182364", "title": "How do I compare each character in two different strings?", "body": "<p>We, beginners, should help each other.</p>\n\n<p>The assignment is not simple as it seems.</p>\n\n<p>Here you are.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid max_common_substring( const char *s1, const char *s2 )\n{\n    size_t max_common_length = 0;\n    const char *max_start    = NULL;\n\n    for ( ; *s1; ++s1 )\n    {\n        const char *p = strchr( s2, *s1 );\n        if ( p != NULL )\n        {\n            size_t common_length = 0;\n            for ( const char *q = s1; *q &amp;&amp; *p &amp;&amp; *q == *p; ++q, ++p )\n            {\n                ++common_length;                    \n            }\n\n            if ( max_common_length &lt; common_length )\n            {\n                    max_common_length = common_length;\n                    max_start = s1;\n            }\n        }\n    }        \n\n    if ( max_start != NULL )\n    {\n        printf( \"%*.*s\\n\", ( int )max_common_length, ( int )max_common_length, max_start );\n    }        \n}\n\nint main( void )\n{\n    const char *s1 = \"Hello\";\n    const char *s2 = \"HelloWorld\";\n\n    max_common_substring( s1, s2 );\n\n    s1 = \"Howdy\";\n    s2 = \"Blowdy\";\n\n    max_common_substring( s1, s2 );\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>Hello\nowdy\n</code></pre>\n\n<p>You could optimize the loop </p>\n\n<pre><code>for ( ; *s1; ++s1 )\n</code></pre>\n\n<p>by stopping the loop when non processed characters left in the string <code>s1</code> are already less than the current calculated value of <code>max_common_length</code>.</p>\n\n<p>As for your code in the question then it is evident that it does not make sense.:)</p>\n"}], "owner": {"reputation": 5, "user_id": 8527580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c8adf84f3acf4f1194602ab1ff4f45?s=128&d=identicon&r=PG&f=1", "display_name": "Saldi", "link": "https://stackoverflow.com/users/8527580/saldi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 5, "score": -3, "last_activity_date": 1563970584, "creation_date": 1563965623, "last_edit_date": 1563969871, "question_id": 57181235, "link": "https://stackoverflow.com/questions/57181235/how-do-i-compare-each-character-in-two-different-strings", "title": "How do I compare each character in two different strings?", "body": "<p>The thing that I want to do is to compare 2 strings with each other, character by character. </p>\n\n<p>Example 1:</p>\n\n<p>String A: Hello<br>\nString B: HelloWorld</p>\n\n<p>Output: Hello</p>\n\n<p>Example 2:</p>\n\n<p>String A: Howdy<br>\nString B: Blowdy</p>\n\n<p>Output: owdy</p>\n\n<p>In the example above, even though String A has more characters than String B or vice versa, and they are both different, I would still want to output the characters on both strings that are the same. I would also want the program to stop comparing, once one of the strings that is being compared with has reached null.</p>\n\n<p>I've come up with a few lines of codes that could probably do this, but I'm not too sure if I'm heading towards the right direction.</p>\n\n<pre><code>int main(){\n  char stra[100];\n  char strb[100];\n  char strc[100];\n\n  for(int i = 0; stra[i] != Null &amp;&amp; strb[i] != Null; i++){\n    if(stra[i] == strb[i]){\n        strc[i] = stra[i];\n    }\n  }\n\n  if (strc != NULL){\n    printf(strc);\n  }else{\n    printf(\"both words do not match\");\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "function", "pointers", "struct"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1563965583, "post_id": 57181087, "comment_id": 100873406, "body": "Welcome to SO. Not related to your problem but you really should not call <code>GetTemperatur</code> that many times. Store the return value into a variable and use ths value for all of your <code>if</code> statements. Otherwise it could happen that the result changes between calls. And it comsumes more time"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1563965736, "post_id": 57181087, "comment_id": 100873483, "body": "If you do not have access to the other files because they are part of other peoples assignment, you can create empty stub versions of those functions that return some more or less random values."}], "answers": [{"tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": false, "score": 0, "last_activity_date": 1563965662, "creation_date": 1563965662, "answer_id": 57181248, "question_id": 57181087, "link": "https://stackoverflow.com/questions/57181087/how-can-i-store-values-into-a-multi-parameter-struct-and-pass-typedef-struct-to/57181248#57181248", "title": "How can I store values into a multi-parameter struct and pass typedef struct to a function?", "body": "<blockquote>\n  <p>I'm afraid that the code I wrote will pass the address of the stored\n  values instead of the current value. I'm desperate for some help.</p>\n</blockquote>\n\n<p>Whatever you wrote as below is perfectly fine </p>\n\n<pre><code>if(GetTemperature() &lt;= -20)\n{\n    dtErrorMessage low;\n    low.errorCode=ERROR_CODE_UNDER_TEMP;\n    low.temperature=GetTemperature();\n    SendErrorReport(&amp;low);\n}\n</code></pre>\n\n<p>since <code>SendErrorReport</code> takes <code>dtErrorMessage*</code> as parameter.</p>\n\n<pre><code>extern void SendErrorReport(dtErrorMessage* errorMsg);\n</code></pre>\n\n<hr>\n\n<p>But there are things you need to consider such as,</p>\n\n<ol>\n<li><p><code>SendErrorReport</code> should not be asynchronous call, otherwise you will have undefined behavior as <code>dtErrorMessage low;</code> will go out of scope and will be vanished.</p></li>\n<li><p><code>SendErrorReport</code> should not try to free the memory for <code>dtErrorMessage* errorMsg</code> inside its definition.</p></li>\n</ol>\n\n<p>These details you should get as part of API Specification.</p>\n"}, {"comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1563968118, "post_id": 57181462, "comment_id": 100874784, "body": "Most important improvement should be to avoid multiple function calls. The result in each block can vary from the result in the conditions."}, {"owner": {"reputation": 1, "user_id": 9760417, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210620555741111/picture?type=large", "display_name": "Tocsek", "link": "https://stackoverflow.com/users/9760417/tocsek"}, "edited": false, "score": 0, "creation_date": 1563968797, "post_id": 57181462, "comment_id": 100875177, "body": "I&#39;ve taken your advice and rewrote it, thanks for poiting it out :)"}, {"owner": {"reputation": 33, "user_id": 11768464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/761c9ed1ee58ae3d378b80a54e0a8411?s=128&d=identicon&r=PG&f=1", "display_name": "ElvisIsAlive", "link": "https://stackoverflow.com/users/11768464/elvisisalive"}, "edited": false, "score": 0, "creation_date": 1563976563, "post_id": 57181462, "comment_id": 100879741, "body": "Not sure (that&#39;s why I removed it) but what do you guys think about defining the <code>errMsg</code> only once before the <code>if(GetTemperature() &lt;= -20)</code>and then use it for both cases? This would cause an avoidable variable definition in case you dont exceed the limits but reduces code size."}], "tags": [], "owner": {"reputation": 33, "user_id": 11768464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/761c9ed1ee58ae3d378b80a54e0a8411?s=128&d=identicon&r=PG&f=1", "display_name": "ElvisIsAlive", "link": "https://stackoverflow.com/users/11768464/elvisisalive"}, "is_accepted": false, "score": 0, "last_activity_date": 1563966364, "creation_date": 1563966364, "answer_id": 57181462, "question_id": 57181087, "link": "https://stackoverflow.com/questions/57181087/how-can-i-store-values-into-a-multi-parameter-struct-and-pass-typedef-struct-to/57181462#57181462", "title": "How can I store values into a multi-parameter struct and pass typedef struct to a function?", "body": "<p>Well, undefined means not implemented. Due to, like you said, you don't have the source files which define the extern functions, that makes sense. I dont see anything wrong with your code but I suggest using an else for the second condition:</p>\n\n<pre><code>if(GetTemperature() &lt;= -20)\n{\n    dtErrorMessage errMsg;\n    errMsg.errorCode=ERROR_CODE_UNDER_TEMP;\n    errMsg.temperature=GetTemperature();\n    SendErrorReport(&amp;errMsg);\n}\nelse if(GetTemperature() &gt;= 160)\n{\n    dtErrorMessage errMsg;\n    errMsg.errorCode=ERROR_CODE_OVER_TEMP;\n    errMsg.temperature=GetTemperature();\n    SendErrorReport(&amp;errMsg);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9760417, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210620555741111/picture?type=large", "display_name": "Tocsek", "link": "https://stackoverflow.com/users/9760417/tocsek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563966364, "creation_date": 1563965160, "question_id": 57181087, "link": "https://stackoverflow.com/questions/57181087/how-can-i-store-values-into-a-multi-parameter-struct-and-pass-typedef-struct-to", "title": "How can I store values into a multi-parameter struct and pass typedef struct to a function?", "body": "<p>New wannabe programmer here. I'm currently working on my homework and I encountered with some problems.</p>\n\n<p>The task is the following:</p>\n\n<p>FanControl function shall turn on the fan if the temperature is over the limit and it shall turn off the fan when the temperature is below the limit.</p>\n\n<p>1.1. Hysteresis shall be applied on the switching limits symmetrically.</p>\n\n<p>1.2. The hysteresis and the default limit shall be configurable on compile time.</p>\n\n<p>1.2.1.The default limit shall be 25\u00b0C and the default hysteresis value shall be 2\u00b0C.</p>\n\n<p>1.3. The temperature shall be acquired by reading the GetTemperature() function.</p>\n\n<p>1.4. The fan shall be turned on by calling SetState() function with the argument FAN_ON and it\nshall be turned off by calling it with FAN_OFF argument.</p>\n\n<ol start=\"2\">\n<li>In case of the input temperature goes beyond its valid limits (-20\u00b0C..+160\u00b0C) then the\ncomponent shall report an error.</li>\n</ol>\n\n<p>2.1. The error report shall be sent out by SendErrorReport() function. The reason of the report\nshall be stored into the errorCode field and the temperature value into the temperature\nfield.</p>\n\n<p>2.1.1.In case of over temperature the errorCode shall be set to ERROR_CODE_OVER_TEMP.</p>\n\n<p>2.1.2.In case of under temperature the errorCode shall be set to\nERROR_CODE_UNDER_TEMP.</p>\n\n<p>My problem is with the second part of the task. I having difficulties to store the values to the fields in the struct and I also cannot seem to pass the struct into the fields that required, maybe that I am lacking some syntax knowledge.</p>\n\n<p>Since the school haven't provided me the other files the compiler require I cannot debug my code.\nI've tried the following way, but I'm afraid that won't work.</p>\n\n<pre><code>#ifndef COMPONENTTEST\n\n\ntypedef unsigned char boolean;\ntypedef unsigned char uint8;\ntypedef unsigned short uint16;\ntypedef unsigned int uint32;\ntypedef float float32;\n\ntypedef struct\n{\n    uint32 errorCode;\n    float32 temperature;\n} dtErrorMessage;\n\ntypedef enum\n{\n    FAN_OFF,\n    FAN_ON\n} dtFanState;\n\n#define ERROR_CODE_OVER_TEMP ((uint32)1u)\n#define ERROR_CODE_UNDER_TEMP ((uint32)2u)\n\nextern float32 GetTemperature(void);\nextern void SetState(dtFanState fanState);\nextern void SendErrorReport(dtErrorMessage* errorMsg);\n\n#endif /* !COMPONENTTEST */\n\n/* Please add your own additions here! */\n\nvoid FanControl(void)\n{\nuint16 tempLimit=25;\nuint16 hystLimit=tempLimit-2;\n\n\nif(GetTemperature() &lt;= hystLimit)\n{\n    SetState(FAN_OFF);\n}\n\nif(GetTemperature() &gt;= tempLimit)\n{\n    SetState(FAN_ON);\n}\n\n// From this part I am not sure about!\n\nif(GetTemperature() &lt;= -20)\n{\n    dtErrorMessage low;\n    low.errorCode=ERROR_CODE_UNDER_TEMP;\n    low.temperature=GetTemperature();\n    SendErrorReport(&amp;low);\n}\n\nif(GetTemperature() &gt;= 160)\n{\n    dtErrorMessage high;\n    high.errorCode=ERROR_CODE_OVER_TEMP;\n    high.temperature=GetTemperature();\n    SendErrorReport(&amp;high);\n    }\n}\n</code></pre>\n\n<p>I am continually getting the \"undefined reference to 'GetTemperature' and 'SendErrorReport'\" but I think it is because of the missing files. I'm afraid that the code I wrote will pass the address of the stored values instead of the current value. I'm desperate for some help.</p>\n"}, {"tags": ["c", "makefile", "compilation", "size"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563963711, "post_id": 57180489, "comment_id": 100872276, "body": "Are the files that get included the same?  You can just preprocess the code using <code>-E</code> and compare the output.  You&#39;ll want to change the <code>-o ...</code> option, too."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563964162, "post_id": 57180489, "comment_id": 100872558, "body": "OT:  What is <code>_LARGE_THREADS</code>?  I can&#39;t find any reference to that, so it appeas to be something created for your code.  That&#39;s <a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.1.3\" rel=\"nofollow noreferrer\">a reserved identifier per <b>7.1.3 Reserved identifiers</b></a>:  &quot;All identifiers that begin with an underscore and either an uppercase letter or another underscore are always reserved for any use.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 1115, "user_id": 10856970, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q3mai-ypFws/AAAAAAAAAAI/AAAAAAAAAIg/GUzS4DSGL-o/photo.jpg?sz=128", "display_name": "Shivendra Pratap Kushwaha", "link": "https://stackoverflow.com/users/10856970/shivendra-pratap-kushwaha"}, "edited": false, "score": 0, "creation_date": 1563964253, "post_id": 57180600, "comment_id": 100872636, "body": "Yes it was because of -g flag. I removed the -g flag. And the size is same now."}], "tags": [], "owner": {"reputation": 94, "user_id": 7785133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69c2854fd772e8a1e3245f61b2dd1776?s=128&d=identicon&r=PG&f=1", "display_name": "BeWaterMyFriend", "link": "https://stackoverflow.com/users/7785133/bewatermyfriend"}, "is_accepted": true, "score": 5, "last_activity_date": 1563963576, "creation_date": 1563963576, "answer_id": 57180600, "question_id": 57180489, "link": "https://stackoverflow.com/questions/57180489/compilation-of-same-c-program-from-different-directory-generates-object-code-of/57180600#57180600", "title": "compilation of same c program from different directory generates object code of different size", "body": "<p>You're compiling with -g option, which adds debug Information to the object file. These might contain path Information of the source files, so different paths lead to different symbols and a different total file size.</p>\n"}, {"comments": [{"owner": {"reputation": 1115, "user_id": 10856970, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q3mai-ypFws/AAAAAAAAAAI/AAAAAAAAAIg/GUzS4DSGL-o/photo.jpg?sz=128", "display_name": "Shivendra Pratap Kushwaha", "link": "https://stackoverflow.com/users/10856970/shivendra-pratap-kushwaha"}, "edited": false, "score": 0, "creation_date": 1563964261, "post_id": 57180643, "comment_id": 100872642, "body": "Yes it was because of -g flag. I removed the -g flag. And the size is same now."}], "tags": [], "owner": {"reputation": 249, "user_id": 11763101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e19848c6c0f710f10a380a1e5aa89ee4?s=128&d=identicon&r=PG&f=1", "display_name": "hissroth", "link": "https://stackoverflow.com/users/11763101/hissroth"}, "is_accepted": false, "score": 0, "last_activity_date": 1563963735, "creation_date": 1563963735, "answer_id": 57180643, "question_id": 57180489, "link": "https://stackoverflow.com/questions/57180489/compilation-of-same-c-program-from-different-directory-generates-object-code-of/57180643#57180643", "title": "compilation of same c program from different directory generates object code of different size", "body": "<p>I think it's because of the -g. </p>\n"}], "owner": {"reputation": 1115, "user_id": 10856970, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q3mai-ypFws/AAAAAAAAAAI/AAAAAAAAAIg/GUzS4DSGL-o/photo.jpg?sz=128", "display_name": "Shivendra Pratap Kushwaha", "link": "https://stackoverflow.com/users/10856970/shivendra-pratap-kushwaha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 57180600, "answer_count": 2, "score": 4, "last_activity_date": 1563963735, "creation_date": 1563963186, "question_id": 57180489, "link": "https://stackoverflow.com/questions/57180489/compilation-of-same-c-program-from-different-directory-generates-object-code-of", "title": "compilation of same c program from different directory generates object code of different size", "body": "<p>I have a c program kept at different directories 'source1/abc.c' and 'source2/abc.c'. I want to generate the object code in 'object1/abc.o' and 'object2/abc.o'. Both abc.c program in source1 and source2 directory are same. But after compilation both the objects( i.e. abc.o ) of object1 and object2 are of different size. I am taking same flag for compilation.</p>\n\n<p>I tries compiling the code from some other directory, other than object1 and object2 and the size after compilation are same.</p>\n\n<pre><code>cc -c source1/abc.c -DLINUX -D_LARGE_THREADS -D_THREAD_SAFE -D_REENTRANT -pthread -D_GNU_SOURCE -g -fPIC -O3  -lpthread  -lm  -lrt  -o object1/abc.o\ncc -c source2/abc.c -DLINUX -D_LARGE_THREADS -D_THREAD_SAFE -D_REENTRANT -pthread -D_GNU_SOURCE -g -fPIC -O3  -lpthread  -lm  -lrt  -o object2/abc.o\n</code></pre>\n\n<p>The size of abc.o should be equal or does it depend on the directories from which it is running?\nWhat are the dependencies while compilation of c program?</p>\n"}, {"tags": ["c++", "c", "opencv", "camera-calibration"], "comments": [{"owner": {"reputation": 406, "user_id": 8806969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a397c6039334c3579a59073d340ceb8a?s=128&d=identicon&r=PG&f=1", "display_name": "IcedLance", "link": "https://stackoverflow.com/users/8806969/icedlance"}, "edited": false, "score": 0, "creation_date": 1563963758, "post_id": 57180013, "comment_id": 100872306, "body": "I see you do calculate camera distortion(although only 4 coefficients) from a set of images but do you undistort the image (and points) before finding the warp matrix? Also depending on image quality detected corners may be a little off, besides it only finds imner corners (where squares touch), see if the 4 corners you use to find transformation are correct."}, {"owner": {"reputation": 5191, "user_id": 1138160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/76ba5bd954a4f842d93c7eaba0b39227?s=128&d=identicon&r=PG", "display_name": "Elmi", "link": "https://stackoverflow.com/users/1138160/elmi"}, "reply_to_user": {"reputation": 406, "user_id": 8806969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a397c6039334c3579a59073d340ceb8a?s=128&d=identicon&r=PG&f=1", "display_name": "IcedLance", "link": "https://stackoverflow.com/users/8806969/icedlance"}, "edited": false, "score": 0, "creation_date": 1564038599, "post_id": 57180013, "comment_id": 100900925, "body": "@IcedLance not sure what you mean with undistorting the image - what function would be used for this?"}, {"owner": {"reputation": 406, "user_id": 8806969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a397c6039334c3579a59073d340ceb8a?s=128&d=identicon&r=PG&f=1", "display_name": "IcedLance", "link": "https://stackoverflow.com/users/8806969/icedlance"}, "edited": false, "score": 0, "creation_date": 1564046879, "post_id": 57180013, "comment_id": 100905526, "body": "<code>undistort()</code> the exact call might difer from version to version (like it does with <code>cv::calibrateCamera</code> ) but heres a link to docs. <a href=\"https://docs.opencv.org/2.4/modules/imgproc/doc/geometric_transformations.html#undistort\" rel=\"nofollow noreferrer\">docs.opencv.org/2.4/modules/imgproc/doc/&hellip;</a>"}, {"owner": {"reputation": 5191, "user_id": 1138160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/76ba5bd954a4f842d93c7eaba0b39227?s=128&d=identicon&r=PG", "display_name": "Elmi", "link": "https://stackoverflow.com/users/1138160/elmi"}, "reply_to_user": {"reputation": 406, "user_id": 8806969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a397c6039334c3579a59073d340ceb8a?s=128&d=identicon&r=PG&f=1", "display_name": "IcedLance", "link": "https://stackoverflow.com/users/8806969/icedlance"}, "edited": false, "score": 0, "creation_date": 1564124345, "post_id": 57180013, "comment_id": 100934378, "body": "@IcedLance sorry, I have simplified the code a bit too much: initUndistortRectifyMap() is used during correction of the image - I updated my original post"}, {"owner": {"reputation": 406, "user_id": 8806969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a397c6039334c3579a59073d340ceb8a?s=128&d=identicon&r=PG&f=1", "display_name": "IcedLance", "link": "https://stackoverflow.com/users/8806969/icedlance"}, "edited": false, "score": 1, "creation_date": 1564127729, "post_id": 57180013, "comment_id": 100935886, "body": "Just to make sure: after applying camera distortion correction you either need to find corners again or apply corrections to old corner points ( one way is <code>cv:undistortPoints</code> not sure how to do it with rectify maps), otherwise you calculate perspective transform as if it was still distorted but apply to undistorted image. Also using rectify maps is a bit too heavy of an approach if you only have one camera. undistort does a good enough job in simple cases so maybe look into using it unless you have reasons to stick with rectify maps."}, {"owner": {"reputation": 5191, "user_id": 1138160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/76ba5bd954a4f842d93c7eaba0b39227?s=128&d=identicon&r=PG", "display_name": "Elmi", "link": "https://stackoverflow.com/users/1138160/elmi"}, "reply_to_user": {"reputation": 406, "user_id": 8806969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a397c6039334c3579a59073d340ceb8a?s=128&d=identicon&r=PG&f=1", "display_name": "IcedLance", "link": "https://stackoverflow.com/users/8806969/icedlance"}, "edited": false, "score": 0, "creation_date": 1566200492, "post_id": 57180013, "comment_id": 101566908, "body": "@IcedLance great, dropping the rectify-stuff and using warpPerspective() only does the job, now it looks quite perfect!!!"}], "owner": {"reputation": 5191, "user_id": 1138160, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/76ba5bd954a4f842d93c7eaba0b39227?s=128&d=identicon&r=PG", "display_name": "Elmi", "link": "https://stackoverflow.com/users/1138160/elmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564124295, "creation_date": 1563961719, "last_edit_date": 1564124295, "question_id": 57180013, "link": "https://stackoverflow.com/questions/57180013/inaccurate-camera-calibration", "title": "Inaccurate camera calibration", "body": "<p>I'm performing a camera application using OpenCV and the checkerboard-method. This is my input image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/l5OPt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l5OPt.png\" alt=\"Input checkerboard before calibration\"></a></p>\n\n<p>This is the result after calibration:</p>\n\n<p><a href=\"https://i.stack.imgur.com/sE9a8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sE9a8.png\" alt=\"Calibrated image\"></a></p>\n\n<p>I added a red rectangle to visualise what is wrong: the spatial distortion is corrected but not very accurate, the result now has some other, non-linear distortions resulting in some non-parallel borders of the squares. The dots and crosshairs shown in the image are not used during calibration and the black-to-white fade in background does not have any influence, when I remove it, the result is the same.</p>\n\n<p>What could be the reason for this?</p>\n\n<p>This is how the correction is calculated at the moment (simplified pseudocode without any error checks and with some non-relevant parts missing). First calculation of the correction based on the checkerboard:</p>\n\n<pre><code>CvSize board_sz = cvSize( board_w, board_h );\n//Allocate storage for the parameters according to total number of corners and number of snapshots\nCvMat* image_points      = cvCreateMat(n_boards*board_total,2,CV_32FC1);\nCvMat* object_points     = cvCreateMat(n_boards*board_total,3,CV_32FC1);\nCvMat* point_counts      = cvCreateMat(n_boards,1,CV_32SC1);\nCvMat* intrinsic_matrix  = cvCreateMat(3,3,CV_32FC1);\nCvMat* distortion_coeffs = cvCreateMat(4,1,CV_32FC1);\n\nCvPoint2D32f* corners = new CvPoint2D32f[ board_total ];\n\n//Find chessboard corners:\ncvFindChessboardCorners(gray_image, board_sz, corners,corner_count,CV_CALIB_CB_ADAPTIVE_THRESH|CV_CALIB_CB_FILTER_QUADS|CV_CALIB_CB_NORMALIZE_IMAGE );\n  if (*corner_count!=board_total) cvFindChessboardCorners(gray_image, board_sz, corners,corner_count,CV_CALIB_CB_ADAPTIVE_THRESH|CV_CALIB_CB_NORMALIZE_IMAGE);\n\ncvFindCornerSubPix(gray_image,corners, *corner_count, cvSize(11,11), cvSize(-1,-1), cvTermCriteria(CV_TERMCRIT_EPS+CV_TERMCRIT_ITER, 30, 0.1 ));\n\n// Initialize the intrinsic matrix with both the two focal lengths in a ratio of 1.0\nCV_MAT_ELEM(*intrinsic_matrix,float,0,0)=1.0f;   CV_MAT_ELEM(*intrinsic_matrix,float,0,1)=0.0f;   CV_MAT_ELEM(*intrinsic_matrix,float,0,2)=0.0f;\nCV_MAT_ELEM(*intrinsic_matrix,float,1,0)=0.0f;   CV_MAT_ELEM(*intrinsic_matrix,float,1,1)=1.0f;   CV_MAT_ELEM(*intrinsic_matrix,float,1,2)=0.0f;\nCV_MAT_ELEM(*intrinsic_matrix,float,2,0)=0.0f;   CV_MAT_ELEM(*intrinsic_matrix,float,2,1)=0.0f;   CV_MAT_ELEM(*intrinsic_matrix,float,2,2)=0.0f;\n\nCV_MAT_ELEM(*intrinsic_matrix,float,0,0)=1.0; // fx\nCV_MAT_ELEM(*intrinsic_matrix,float,1,1)=(1.0*calib_data-&gt;height)/calib_data-&gt;width; // fy\ncvCalibrateCamera2(object_points, image_points, point_counts, cvGetSize(gray_image),\n                     intrinsic_matrix, distortion_coeffs,\n                     NULL,NULL,\n                     CV_CALIB_FIX_ASPECT_RATIO);\n\ncornerPoints=(struct camera_calib_point*)malloc(*corner_count*sizeof(struct camera_calib_point));\n// calculate spatial correction matrix\n{\n   cv::Point2f src_vertices[4],dst_vertices[4];\n   float       minx=1000000.0,miny=1000000.0,maxx=-1000000.0,maxy=-1000000.0;\n   double      d;\n   cv::Mat     warpMatrix;\n\n   src_vertices[0]=corners[0];\n   src_vertices[1]=corners[board_w-1];\n   src_vertices[2]=corners[board_w*board_h-board_w];\n   src_vertices[3]=corners[board_w*board_h-1];\n   for (i=0; i&lt;4; i++)\n   {\n      if (src_vertices[i].x&lt;minx) minx=src_vertices[i].x;\n      if (src_vertices[i].x&gt;maxx) maxx=src_vertices[i].x;\n      if (src_vertices[i].y&lt;miny) miny=src_vertices[i].y;\n      if (src_vertices[i].y&gt;maxy) maxy=src_vertices[i].y;\n   }\n   dst_vertices[0].x=minx; dst_vertices[0].y=maxy;\n   dst_vertices[1].x=maxx; dst_vertices[1].y=maxy;\n   dst_vertices[2].x=minx; dst_vertices[2].y=miny;\n   dst_vertices[3].x=maxx; dst_vertices[3].y=miny;\n   warpMatrix=getPerspectiveTransform(src_vertices, dst_vertices);\n}\n// end of calculate spatial correction matrix\n</code></pre>\n\n<p>Then correction data are applied to an image this way:</p>\n\n<pre><code>/* Edit: missing part added */\ncv::Size imageSize(handle-&gt;width,handle-&gt;height);\n\ncv::initUndistortRectifyMap(handle-&gt;intrinsic, handle-&gt;distortion,cv::Mat(),\n                            cv::getOptimalNewCameraMatrix(handle-&gt;intrinsic, handle-&gt;distortion,imageSize,1,imageSize,0),\n                            imageSize, CV_16SC2,*handle-&gt;mapx,*handle-&gt;mapy);\n/* End of edit: missing part added */\n\n\ncv::remap(cv::cvarrToMat(sImage),dImage,*handle-&gt;mapx,*handle-&gt;mapy,cv::INTER_LINEAR);\ncv::warpPerspective(dImage, dImage2,*handle-&gt;warpMtx,dImage.size(),cv::INTER_LINEAR,cv::BORDER_CONSTANT);\n</code></pre>\n\n<p>So...anybody an idea what could go wrong here?</p>\n"}, {"tags": ["c", "memory-management", "dynamic-memory-allocation", "allocation"], "comments": [{"owner": {"reputation": 59, "user_id": 1737973, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/EmWsq.png?s=128&g=1", "display_name": "1737973", "link": "https://stackoverflow.com/users/1737973/1737973"}, "edited": false, "score": 2, "creation_date": 1563961327, "post_id": 57179851, "comment_id": 100870887, "body": "I&#39;m sorry, why have you replaced the C tag for the C++ tag?"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 2, "creation_date": 1563961353, "post_id": 57179851, "comment_id": 100870906, "body": "Presumably because copy constructors aren&#39;t there in C."}, {"owner": {"reputation": 59, "user_id": 1737973, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/EmWsq.png?s=128&g=1", "display_name": "1737973", "link": "https://stackoverflow.com/users/1737973/1737973"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1563961443, "post_id": 57179851, "comment_id": 100870953, "body": "I&#39;m writing about deep and shallow copy constructors in a same class. Please tell me how that duality exists in C++!"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 3, "creation_date": 1563961492, "post_id": 57179851, "comment_id": 100870979, "body": "Please tell me how copy constructors are in C :)"}, {"owner": {"reputation": 59, "user_id": 1737973, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/EmWsq.png?s=128&g=1", "display_name": "1737973", "link": "https://stackoverflow.com/users/1737973/1737973"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1563961611, "post_id": 57179851, "comment_id": 100871035, "body": "<code>struct list * list_copy_constructor(const struct list * input) REQUIRE_RETURNED_VALUE_CAPTURE;</code> is a copy constructor! ._."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 3, "creation_date": 1563961650, "post_id": 57179851, "comment_id": 100871056, "body": "@L.F. - C++ makes heavy use of the term, but it doesn&#39;t <i>own</i> it. A custom ADT in C can have an <code>ADT_clone</code> function, that&#39;s a copy constructor right there. It creates a new object from an existing one."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1563961768, "post_id": 57179851, "comment_id": 100871129, "body": "@StoryTeller and OP Oops, sorry for incorrectly assuming that you are referring to C++ terminology ..."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1563961927, "post_id": 57179851, "comment_id": 100871222, "body": "@uprego - You may wish to add some code examples. It should prevent confusion with the C++ use of the term."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 2, "creation_date": 1563961975, "post_id": 57179851, "comment_id": 100871258, "body": "Tracking ownership is a reasonable approach for this, so you&#39;re not doing something &quot;wrong&quot;. You will however also need to track lifetime. Either one of the 2 lists owns the nodes, and the other list&#39;s lifetime is constrained by the first list&#39;s lifetime. Or neither of the 2 lists owns the nodes, and both lists&#39; lifetimes are constrained by some other object that owns the nodes."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1563963916, "post_id": 57179851, "comment_id": 100872397, "body": "It doesn&#39;t matter which list owns the elements. &quot;and then one of the lists (the list owning the elements), can be destroyed with the destructor&quot; No. It doesn&#39;t matter which list &quot;owns&quot; the elements. It only matters which list is destroyed first. The list that is destroyed first needs to be destroyed by shallow destructor. The other list (the first list or the copy) need to free the elements."}, {"owner": {"reputation": 59, "user_id": 1737973, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/EmWsq.png?s=128&g=1", "display_name": "1737973", "link": "https://stackoverflow.com/users/1737973/1737973"}, "edited": false, "score": 0, "creation_date": 1563964706, "post_id": 57179851, "comment_id": 100872886, "body": "StoryTeller: edited, thanks. Sander De Dycker: understood, thanks. Gerhardh: understood, edited, thanks."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1600877249, "post_id": 57179851, "comment_id": 113229193, "body": "@1737973 choose the answer. Give guys the bounty"}, {"owner": {"reputation": 483, "user_id": 7208967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14b5042326d29e031e894c5631cc5184?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfram", "link": "https://stackoverflow.com/users/7208967/wolfram"}, "edited": false, "score": 0, "creation_date": 1601080442, "post_id": 57179851, "comment_id": 113302617, "body": "Are you sure that C is a suitable language for what you are doing? Copy constructors and destructors are OOP concepts, and OOP doesn&#39;t have native support in C and needs to be emulated with boilerplate."}, {"owner": {"reputation": 6218, "user_id": 821497, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/956003d5607ba6be2dd3f37427980e2c?s=128&d=identicon&r=PG", "display_name": "ciamej", "link": "https://stackoverflow.com/users/821497/ciamej"}, "edited": false, "score": 0, "creation_date": 1601386645, "post_id": 57179851, "comment_id": 113387354, "body": "I&#39;d say it&#39;s more natural for containers, such as lists, not to own its elements, and thus shallow copy constructor and destructor should suffice."}], "answers": [{"comments": [{"owner": {"reputation": 8402, "user_id": 4664415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfxj.jpg?s=128&g=1", "display_name": "mevets", "link": "https://stackoverflow.com/users/4664415/mevets"}, "edited": false, "score": 1, "creation_date": 1600990312, "post_id": 57180159, "comment_id": 113271935, "body": "Quote of the day <code>The concept of deep or shallow exists only in the mind of the programmer, and in C++ it is very arbitrary.</code>"}], "tags": [], "owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "is_accepted": false, "score": 2, "last_activity_date": 1600904671, "last_edit_date": 1600904671, "creation_date": 1563962188, "answer_id": 57180159, "question_id": 57179851, "link": "https://stackoverflow.com/questions/57179851/shallow-and-deep-destructors/57180159#57180159", "title": "Shallow and deep destructors?", "body": "<p>The concept of deep or shallow exists only in the mind of the programmer, and in C++ it is very arbitrary. By default raw pointer members are not deep destroyed when an object is destroyed, which you might call shallow, but you can write extra code in your object destructor to destroy deeply. On the other hand any members that have destructors get their destructors called, which you might call deep, and there is no way to avoid that. Exactly the same mechanism applies for the default copy and assignment, so is equally impossible to say an object is wholly deep or shallow copied or destroyed at a glance.</p>\n<p>So the distinction is not really a property of object destructors, but their members.</p>\n<p>Of course, now the question is about C again, but still mentions smart pointers. In C you have to decide what philosophy you want to implement, as there is no concept of destruction. If you follow a C++-like philosophy of having destruction functions for each type of member, and having them deep-call.</p>\n<p>Having said that there are a number of strategies you might consider that would potentially produce a leaner model:</p>\n<p>If /all/ the members of a particular container are owned or /all/ not owned, then a simple flag in the container for whether to destroy /all/ children is an adequate model.</p>\n<p>If /all/ the objects are shared with another container, or this might be the last/only such container for a particular set of content, you could keep a circular list of sharing containers. When the destructor realises it is the last container it could destroy /all/ the content. On the other hand, you could simply implement this model with a shared_ptr to the one container instance, and when the last pointer is released then the container is destroyed.</p>\n<p>If individual items in the container may be shared in arbitrary ways, then make it a container of shared_ptr to each item of content. This is the most robust model, but may have costs in terms of memory usage. Ultimately, somewhere there needs to be a reference count (though circular lists of referees are also good, it is much harder to mutex across threads) In C++ shared_ptr this is implemented using a stub, but in your own C objects, this is probably a counter member in the child object.</p>\n"}, {"tags": [], "owner": {"reputation": 412, "user_id": 2394602, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Id1e2.png?s=128&g=1", "display_name": "One Man Monkey Squad", "link": "https://stackoverflow.com/users/2394602/one-man-monkey-squad"}, "is_accepted": false, "score": 0, "last_activity_date": 1563962739, "creation_date": 1563962739, "answer_id": 57180342, "question_id": 57179851, "link": "https://stackoverflow.com/questions/57179851/shallow-and-deep-destructors/57180342#57180342", "title": "Shallow and deep destructors?", "body": "<blockquote>\n  <p>But, the problem is, I don't recognize shallow destructor as a term in bibliography, so I thought I might be doing something wrong. Am I doing something wrong?</p>\n</blockquote>\n\n<p>The point of the destructor (or in C just <em>myobject_destroy(myobject</em>)*) is to clean up the resources the instance holds (memory, os handles, ...). Whether you need a \"shallow destructor\" or a \"deep destructor\" depends on the way you decided to implement your object, as long as it does its job to cleanup stuff.</p>\n\n<p>If you are using modern C++ stack allocation and smart pointers are your friend, because they manage memory by themselves.</p>\n"}, {"tags": [], "owner": {"reputation": 483, "user_id": 7208967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14b5042326d29e031e894c5631cc5184?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfram", "link": "https://stackoverflow.com/users/7208967/wolfram"}, "is_accepted": false, "score": 1, "last_activity_date": 1601080275, "creation_date": 1601080275, "answer_id": 64072780, "question_id": 57179851, "link": "https://stackoverflow.com/questions/57179851/shallow-and-deep-destructors/64072780#64072780", "title": "Shallow and deep destructors?", "body": "<p>If you want to have lists with shared elements be correctly destructed, you cannot simply use &quot;shallow destructors&quot;. Destructing them all with shallow destructors results in elements still residing in memory and being leaked. It also doesn't look good to mark one of the lists having a deep destructor while others having shallow ones. If you first destroy the list with deep destructor, others will have dangling pointers which you can accidentally access. So it looks like shallow destructor is not a well-recognized term simply because it is not of a great use. You just have destructors: functions that destroy the stuff that you objects conceptually own.</p>\n<p>Now, for the particular task of sharing elements in lists and destroying everything in time shared pointers seem to be a reasonable solution. A shared pointer is conceptually a pointer to a struct consisting of two elements: an actual object (list element) and reference counter. Copying the shared pointer increases the counter; destroying the shared pointer decreases the counter and destructs the struct with object &amp; counter if the counter fell to 0. In this scenario, each list own its copies of shared pointers, but the list elements themselves are owned by shared pointers rather than a list. Due to the shared pointer destruction semantics there is no trouble with destroying all the shared pointer copies that the list owns (the destructor doesn't deallocate memory unless there are no references left), so there is no need for distinguishing &quot;shallow&quot; and &quot;deep&quot; destructors, as shared pointers will take care of deleting themselves in time automatically.</p>\n"}, {"tags": [], "owner": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "is_accepted": false, "score": 1, "last_activity_date": 1601386056, "last_edit_date": 1601386056, "creation_date": 1601293951, "answer_id": 64101656, "question_id": 57179851, "link": "https://stackoverflow.com/questions/57179851/shallow-and-deep-destructors/64101656#64101656", "title": "Shallow and deep destructors?", "body": "<p>As you already suspected, your design is weird. Think about it: if you are going to &quot;shallow copy&quot; a list, why not just take a pointer of it? &quot;Shallow copy&quot; has no use outside of a classroom, where it is only useful to explain what a &quot;deep copy&quot; is.</p>\n<p>You either want multiple users to have independent lists, that can be used and destroy independently of the each other, or you want one user to &quot;own&quot; the list, and the others just point to that list. Your idea of &quot;shallow copy&quot; has no advantage over a simple pointer, but is much more complex to handle.</p>\n<p>What is actually useful is having multiple &quot;lists&quot; but with shared data, where each user has its own &quot;shared copy&quot; of the list that can be used and destroyed independently, but points to the same data, and will only really be deallocated when the last user has destroyed it. This is a very common pattern usually handled by an algorithm called <a href=\"https://en.wikipedia.org/wiki/Reference_counting\" rel=\"nofollow noreferrer\">reference counting</a>, and is implemented by many libraries and languages, like Python, glib, and even in C++ as the smart pointer <code>std::shared_ptr</code>.</p>\n<p>If you are using C, you may want to add support to reference counting to your <code>struct list</code>, and it is not very difficult: just add a field <code>unsigned reference_count;</code> and set it to 1 when it is allocated. Decrement when destroyed, but only really deallocate if <code>reference_count == 0</code>, in which case there are no more users and you must do a &quot;deep deallocation&quot;. You would still have only one destructor function, but two copy constructors:</p>\n<pre><code>/**  Performs shared copy.\n *\n * Actually, just increments reference_count and returns the same pointer.\n */\nstruct list * list_shared_copy_constructor(struct list * input)\nREQUIRE_RETURNED_VALUE_CAPTURE;\n\n/**  Performs deep copy.\n *\n * reference_count for the new copy is set to 1.\n */\nstruct list * list_deep_copy_constructor(const struct list * input)\nREQUIRE_RETURNED_VALUE_CAPTURE;\n\n/**  Performs destruction. */\nvoid list_shallow_destructor(struct list * input);\n</code></pre>\n<p>If you are actually using C++, as you hinted in your question, then simply use <code>std::shared_ptr</code>.</p>\n"}], "owner": {"reputation": 59, "user_id": 1737973, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/EmWsq.png?s=128&g=1", "display_name": "1737973", "link": "https://stackoverflow.com/users/1737973/1737973"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 1, "answer_count": 4, "score": 2, "last_activity_date": 1601386056, "creation_date": 1563961223, "last_edit_date": 1563964569, "question_id": 57179851, "link": "https://stackoverflow.com/questions/57179851/shallow-and-deep-destructors", "title": "Shallow and deep destructors?", "body": "<p>Imagine a list \"a\", and there's a copy constructor for lists which performs deep copying. If \"b\" is a list deep copied from \"a\", then both can be destroyed using simple destructors. This destructor should use <em>deep</em> destruction.</p>\n\n<pre><code>typedef struct list { void * first; struct list * next } list;\n\nstruct list * list_copy_constructor(const struct list * input)\nREQUIRE_RETURNED_VALUE_CAPTURE;\n\nvoid list_destructor(struct list * input);\n</code></pre>\n\n<p>Now imagine that you rename the copy constructor for lists as a deep copy constructor for lists, and add another shallow copy constructor for lists.</p>\n\n<pre><code>/**  Performs shallow copy. */\nstruct list * list_shallow_copy_constructor(const struct list * input)\nREQUIRE_RETURNED_VALUE_CAPTURE;\n\n/**  Performs deep copy. */\nstruct list * list_deep_copy_constructor(const struct list * input)\nREQUIRE_RETURNED_VALUE_CAPTURE;\n\n/**  Be warned performs deep destruction. */\nvoid list_destructor(struct list * input);\n</code></pre>\n\n<p>The destructor, which performs a deep destruction, can be used paired with the deep copy constructor calls.</p>\n\n<p>Once you used the shallow copy constructor for lists, you would need to know which of both lists <strong>own</strong> the elements, and then one of the lists (the list owning the elements), can be destroyed with the destructor, but for the list that doesn't own the elements, I would need to destroy it using a <em>shallow destructor</em> I would need to create, before destroying the list owning the elements.</p>\n\n<pre><code>/**  Performs shallow copy. */\nstruct list * list_shallow_copy_constructor(const struct list * input)\nREQUIRE_RETURNED_VALUE_CAPTURE;\n\n/**  Performs deep copy. */\nstruct list * list_deep_copy_constructor(const struct list * input)\nREQUIRE_RETURNED_VALUE_CAPTURE;\n\n/**  Performs shallow destruction. */\nvoid list_shallow_destructor(struct list * input);\n\n/**  Performs deep destruction. */\nvoid list_deep_destructor(struct list * input);\n</code></pre>\n\n<p>But, the problem is, I don't recognize <em>shallow destructor</em> as a term in bibliography, so I thought I might be doing something wrong. <strong>Am I doing something wrong?</strong> E.g. should I be using smart pointers already instead of deep and shallow destructors?</p>\n"}, {"tags": ["c", "eclipse", "avr", "avrdude"], "comments": [{"owner": {"reputation": 359, "user_id": 10921202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b82ab7ba81a3429f0302bc241c16be57?s=128&d=identicon&r=PG&f=1", "display_name": "dunajski", "link": "https://stackoverflow.com/users/10921202/dunajski"}, "edited": false, "score": 0, "creation_date": 1564036490, "post_id": 57179685, "comment_id": 100899945, "body": "Did you install AVRDUDE?"}, {"owner": {"reputation": 37, "user_id": 9818500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c42dafee1cc1384fe1ff9dccabb98464?s=128&d=identicon&r=PG&f=1", "display_name": "ubik", "link": "https://stackoverflow.com/users/9818500/ubik"}, "reply_to_user": {"reputation": 359, "user_id": 10921202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b82ab7ba81a3429f0302bc241c16be57?s=128&d=identicon&r=PG&f=1", "display_name": "dunajski", "link": "https://stackoverflow.com/users/10921202/dunajski"}, "edited": false, "score": 0, "creation_date": 1564134701, "post_id": 57179685, "comment_id": 100939385, "body": "@dunajski: Yes, I installed from Macports. Avrdude is in /usr/local/bin/. But I don&#39;t know how to set the correct path. The AVR Plugin for Eclipse looks at /opt/local/var/macports/sources/rsync.macports.org/macports/&zwnj;&#8203;release/tarballs/por&zwnj;&#8203;ts/cross/avrdude, but there is no avrdude."}, {"owner": {"reputation": 359, "user_id": 10921202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b82ab7ba81a3429f0302bc241c16be57?s=128&d=identicon&r=PG&f=1", "display_name": "dunajski", "link": "https://stackoverflow.com/users/10921202/dunajski"}, "edited": false, "score": 0, "creation_date": 1564150723, "post_id": 57179685, "comment_id": 100948078, "body": "What you got on table in Window-&gt;Preferences-&gt;AVR-&gt;Paths?"}], "owner": {"reputation": 37, "user_id": 9818500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c42dafee1cc1384fe1ff9dccabb98464?s=128&d=identicon&r=PG&f=1", "display_name": "ubik", "link": "https://stackoverflow.com/users/9818500/ubik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563960698, "creation_date": 1563960698, "question_id": 57179685, "link": "https://stackoverflow.com/questions/57179685/avrdude-executable-can-not-be-found-check-in-the-avr-preferences-if-the-path-to", "title": "AVRDude executable can not be found. Check in the AVR Preferences if the path to AVRDude is correct", "body": "<p>Helo,</p>\n\n<p>I've installed AVR Plugin for Eclipse C/C++ from here <a href=\"http://avr-eclipse.sourceforge.net/wiki/index.php/Plugin_Download\" rel=\"nofollow noreferrer\">http://avr-eclipse.sourceforge.net/wiki/index.php/Plugin_Download</a> .</p>\n\n<p>My problem is, that when I right click on my project and then \"Properties -> AVR -> AVRDude -> New...\", the following message occurs:</p>\n\n<p>AVRDude executable can not be found.</p>\n\n<p>Check in the AVR Preferences if the path to AVRDude is correct.</p>\n\n<p>Reason:\nCannot run AVRDude executable. Please check the AVR path preferences.</p>\n\n<p>Cannot run AVRDude executable. Please check the AVR path preferences.\nCannot run program \"/opt/local/var/macports/sources/rsync.macports.org/macports/release/tarballs/ports/cross/avrdude\": error=13, Permission denied</p>\n\n<p>Normally, there is an option, where you can set the path (AVR -> Path). See the screenshot, there is no option to do this.</p>\n\n<p>I'm using Mac OS Mojave.</p>\n\n<p><a href=\"https://imgur.com/53DVuVW\" rel=\"nofollow noreferrer\">https://imgur.com/53DVuVW</a></p>\n"}, {"tags": ["c", "fopen"], "comments": [{"owner": {"reputation": 9554, "user_id": 3306465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MAduK.png?s=128&g=1", "display_name": "Igal S.", "link": "https://stackoverflow.com/users/3306465/igal-s"}, "edited": false, "score": 0, "creation_date": 1563959198, "post_id": 57179079, "comment_id": 100869770, "body": "You code snippet is not complete. What is fopen((&quot;%s&quot;...)?"}, {"owner": {"reputation": 3, "user_id": 11239115, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o2OP78DqnDE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9kFrbzoqdIb0lZgLxiOKXgsMGtQ/mo/photo.jpg?sz=128", "display_name": "Raphael Wirnsberger", "link": "https://stackoverflow.com/users/11239115/raphael-wirnsberger"}, "reply_to_user": {"reputation": 9554, "user_id": 3306465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MAduK.png?s=128&g=1", "display_name": "Igal S.", "link": "https://stackoverflow.com/users/3306465/igal-s"}, "edited": false, "score": 0, "creation_date": 1563959329, "post_id": 57179079, "comment_id": 100869840, "body": "I found that somewhere on the internet while I was searching how I can pass a variable to fopen()."}, {"owner": {"reputation": 1605, "user_id": 11723965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ygAu.jpg?s=128&g=1", "display_name": "nivpeled", "link": "https://stackoverflow.com/users/11723965/nivpeled"}, "edited": false, "score": 3, "creation_date": 1563959812, "post_id": 57179079, "comment_id": 100870070, "body": "why don&#39;t you variable = fopen(file, &quot;r&quot;); ?"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 1, "creation_date": 1563960161, "post_id": 57179079, "comment_id": 100870263, "body": "You will probably also want to remove the newline character left in by the <a href=\"https://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a> call."}, {"owner": {"reputation": 3, "user_id": 11239115, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o2OP78DqnDE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9kFrbzoqdIb0lZgLxiOKXgsMGtQ/mo/photo.jpg?sz=128", "display_name": "Raphael Wirnsberger", "link": "https://stackoverflow.com/users/11239115/raphael-wirnsberger"}, "edited": false, "score": 0, "creation_date": 1563960289, "post_id": 57179079, "comment_id": 100870335, "body": "because variable = fopen(file, &quot;r&quot;); didn&#39;t work for me."}, {"owner": {"reputation": 155, "user_id": 9528285, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uTWYg8bub5I/AAAAAAAAAAI/AAAAAAAAAgo/5un8WClXZB8/photo.jpg?sz=128", "display_name": "Diego Chinellato", "link": "https://stackoverflow.com/users/9528285/diego-chinellato"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1563960460, "post_id": 57179079, "comment_id": 100870418, "body": "I tried with variable = fopen(file, &quot;r&quot;) and it worked on my pc. Probably as @SanderDeDycker pointed out you need to remove the newline character."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1563960596, "post_id": 57179079, "comment_id": 100870499, "body": "After <code>variable = fopen(file, &quot;r&quot;);</code> add something like <code>if(variable == NULL) { perror(&quot;fopen&quot;); fprintf(stderr, &quot;file = \\&quot;%s\\&quot;\\n&quot;, file); }</code> to see what is wrong. (probably trailing newline)"}, {"owner": {"reputation": 3, "user_id": 11239115, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o2OP78DqnDE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9kFrbzoqdIb0lZgLxiOKXgsMGtQ/mo/photo.jpg?sz=128", "display_name": "Raphael Wirnsberger", "link": "https://stackoverflow.com/users/11239115/raphael-wirnsberger"}, "edited": false, "score": 0, "creation_date": 1563960597, "post_id": 57179079, "comment_id": 100870500, "body": "in the textfile where the paths are stored?"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1563960720, "post_id": 57179079, "comment_id": 100870554, "body": "see <a href=\"https://stackoverflow.com/q/2693776/10622916\">stackoverflow.com/q/2693776/10622916</a>"}, {"owner": {"reputation": 3, "user_id": 11239115, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o2OP78DqnDE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9kFrbzoqdIb0lZgLxiOKXgsMGtQ/mo/photo.jpg?sz=128", "display_name": "Raphael Wirnsberger", "link": "https://stackoverflow.com/users/11239115/raphael-wirnsberger"}, "edited": false, "score": 0, "creation_date": 1563960857, "post_id": 57179079, "comment_id": 100870630, "body": "I tested it and if I have only one line in my paths file, it works. But how can I do it with more than one? Separate them by &quot;;&quot; would be an option but.."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11239115, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o2OP78DqnDE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9kFrbzoqdIb0lZgLxiOKXgsMGtQ/mo/photo.jpg?sz=128", "display_name": "Raphael Wirnsberger", "link": "https://stackoverflow.com/users/11239115/raphael-wirnsberger"}, "edited": false, "score": 0, "creation_date": 1563961663, "post_id": 57179892, "comment_id": 100871066, "body": "thanks for your reply. I solved it already. I used a for loop and checked the char[] if there is anywhere a &quot;\\n&quot; and replaced it with &quot;\\0&quot;."}, {"owner": {"reputation": 155, "user_id": 9528285, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uTWYg8bub5I/AAAAAAAAAAI/AAAAAAAAAgo/5un8WClXZB8/photo.jpg?sz=128", "display_name": "Diego Chinellato", "link": "https://stackoverflow.com/users/9528285/diego-chinellato"}, "reply_to_user": {"reputation": 3, "user_id": 11239115, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o2OP78DqnDE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9kFrbzoqdIb0lZgLxiOKXgsMGtQ/mo/photo.jpg?sz=128", "display_name": "Raphael Wirnsberger", "link": "https://stackoverflow.com/users/11239115/raphael-wirnsberger"}, "edited": false, "score": 1, "creation_date": 1563962014, "post_id": 57179892, "comment_id": 100871285, "body": "That&#39;s roughly the same solution. Consider marking this as the accepted answer if it solves your problem."}], "tags": [], "owner": {"reputation": 155, "user_id": 9528285, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uTWYg8bub5I/AAAAAAAAAAI/AAAAAAAAAgo/5un8WClXZB8/photo.jpg?sz=128", "display_name": "Diego Chinellato", "link": "https://stackoverflow.com/users/9528285/diego-chinellato"}, "is_accepted": true, "score": 1, "last_activity_date": 1563961366, "creation_date": 1563961366, "answer_id": 57179892, "question_id": 57179079, "link": "https://stackoverflow.com/questions/57179079/fopen-with-path-stored-in-variable/57179892#57179892", "title": "fopen with path stored in variable", "body": "<p>There are two problems in your code. The first is this line</p>\n\n<pre><code>variable = fopen((\"%s\", file), \"r\");\n</code></pre>\n\n<p>I don't know where you found this notation, but fopen requires two parameters. From man: <code>FILE *fopen(const char *pathname, const char *mode)</code>. Basically two string, one for the path and the other for the opening mode So the correct call to fopen would be:</p>\n\n<pre><code>variable = fopen(file, \"r\");\n</code></pre>\n\n<p>Also, fgets stores any newline read into the buffer. Simply remove this newline before opening the file:</p>\n\n<pre><code>char *newline = strchr(Name, '\\n');\nif (newline)\n    /*if a newline is found, we remove it*/\n    *pos = '\\0';\nelse\n    /*error: input too long for buffer */\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11239115, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-o2OP78DqnDE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9kFrbzoqdIb0lZgLxiOKXgsMGtQ/mo/photo.jpg?sz=128", "display_name": "Raphael Wirnsberger", "link": "https://stackoverflow.com/users/11239115/raphael-wirnsberger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 57179892, "answer_count": 1, "score": -1, "last_activity_date": 1563961366, "creation_date": 1563958883, "question_id": 57179079, "link": "https://stackoverflow.com/questions/57179079/fopen-with-path-stored-in-variable", "title": "fopen with path stored in variable", "body": "<p>I have saved paths in a text file and would like to read them out. With these paths I want to read new text files, but if I call fopen () with a variable, the program only crashes.\nThe paths I save are absolute.\nI have already tried to read the files without variables, which also worked.</p>\n\n<pre><code>FILE *fp;\nFILE *variable;\nchar file[256];\n\nfp = fopen(\"C:\\\\Example\\\\Example.txt\",\"r\");\n\nif(fp != NULL)\n{\n    while(fgets(file, 256, fp) != NULL)\n    {\n         variable = fopen((\"%s\", file), \"r\");\n         // another while loop which reads out the content of the variablefile \n         fclose(variable);\n    }\n    fclose(fp);\n}\n</code></pre>\n"}, {"tags": ["c", "stack"], "comments": [{"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1563958605, "post_id": 57178942, "comment_id": 100869449, "body": "You&#39;ll have to call <code>push</code> for every element."}, {"owner": {"reputation": 473, "user_id": 11502610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf986a3bd7cf5ca22ae39a8fbabfe0b?s=128&d=identicon&r=PG&f=1", "display_name": "DrosvarG", "link": "https://stackoverflow.com/users/11502610/drosvarg"}, "edited": false, "score": 0, "creation_date": 1563958653, "post_id": 57178942, "comment_id": 100869472, "body": "You&#39;re using scanf only once in your main... How do you get your second input ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10727001"}, "edited": false, "score": 0, "creation_date": 1563958786, "post_id": 57178942, "comment_id": 100869540, "body": "Yes. Thnku for your answer. I looped scanf and push function. thnku for suggesting.   for(int i=0; i&lt;CAPACITY ; i++){         scanf(&quot;%d&quot;, &amp;element);         push(element);              }"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1563959131, "post_id": 57178942, "comment_id": 100869734, "body": "Please post the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal Reproducible Example</a> that shows the problem, instead of correcting the code in comment. Post the <i>exact</i> code with copy/paste, not &quot;something like&quot; it. As posted, it looks as though you run the code twice and expect the stack to still hold a value from the first run."}], "answers": [{"tags": [], "owner": {"reputation": 2695, "user_id": 11175375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbefa83cbfe6c423d6a0569dac0c2c14?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/11175375/adam"}, "is_accepted": true, "score": 0, "last_activity_date": 1563966995, "last_edit_date": 1563966995, "creation_date": 1563966607, "answer_id": 57181524, "question_id": 57178942, "link": "https://stackoverflow.com/questions/57178942/inserting-element-in-stack/57181524#57181524", "title": "INSERTING ELEMENT IN STACK", "body": "<p>I suggest return <code>1</code> if you can push, and <code>0</code> if you can't <strong>(stack full)</strong></p>\n\n<pre><code>int push(int element) {\n    if(isfull()){\n        printf(\"STACK IS FULL\\n\");\n\n        return 0; // Stack is full\n    }\n    else\n    {\n        top++;\n        stack[top] = element;\n        printf(\"DONE\\n\");\n\n        return 1;// stack is not full \n    }\n}\n</code></pre>\n\n<ul>\n<li>In <code>main()</code> function ask user to enter a number until stack is full</li>\n<li>The loop stops when push returns <code>0</code>, that is <strong>stack is full</strong></li>\n</ul>\n\n<pre><code>int main(){\n    // loop starts here\n    // Enter a number first before checking if stack is full \n\n    do\n    {scanf(\"%d\", &amp;element);}\n\n    while(push(element));// Stop if stack is full  \n                        //otherwise push element inside the Stack\n\n\n    for(int i=0;i&lt;CAPACITY;i++){\n        printf(\"\\n%d\\n\", stack[i]);\n    }\n\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10727001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "accepted_answer_id": 57181524, "answer_count": 1, "score": 0, "last_activity_date": 1563966995, "creation_date": 1563958431, "question_id": 57178942, "link": "https://stackoverflow.com/questions/57178942/inserting-element-in-stack", "title": "INSERTING ELEMENT IN STACK", "body": "<p>I am learning data structure. Now I came to point where I using C for inserting an element in the stack. This code of mine is working good. But the problem is if I want to push the next number. It gets inserted in [i] value of stack.But when i want to insert new element, instead of getting [i+1] location it overwrites [i]  value. When i call this function again only then it inserts the next value to stack[i+1].</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define CAPACITY 5\n\nint element;\nint top = -1;\nint stack[CAPACITY];\nint isfull() {\n    if(top==CAPACITY-1){\n        return 1;\n    }\n    else{\n        return 0;\n    }\n\n}\n\nint push(int element) {\n    if(isfull()){\n        printf(\"STACK IS FULL\");\n    }\n    else\n    {\n        top++;\n        stack[top] = element;\n        printf(\"DONE \");\n    }\n}\nint main(){\n    scanf(\"%d\", &amp;element);\n    push(element);\n\n    for(int i=0;i&lt;CAPACITY;i++){\n        printf(\"\\n%d\\n\", stack[i]);\n    }\n}\n\n\n</code></pre>\n\n<p>On first input</p>\n\n<pre><code>DONE \n41\n\n0\n\n0\n\n0\n\n0\n\n</code></pre>\n\n<p>On giving next input 32</p>\n\n<pre><code>DONE \n32\n\n0\n\n0\n\n0\n\n0\n\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 1, "creation_date": 1563956426, "post_id": 57178328, "comment_id": 100868254, "body": "Warning itself is clear! <code>&quot;\\n&quot;</code> is <code>char *</code> where as <code>&#39;\\n&#39;</code> is <code>char</code>."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1563956483, "post_id": 57178328, "comment_id": 100868289, "body": "In C, single quotes and double quotes serve a <i>different</i> purpose. The former denotes a character while the latter denotes a string."}], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 812912, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732c48dee9ac15216258118fb8c0a764?s=128&d=identicon&r=PG", "display_name": "Ivaylo Strandjev", "link": "https://stackoverflow.com/users/812912/ivaylo-strandjev"}, "is_accepted": false, "score": 3, "last_activity_date": 1563956636, "creation_date": 1563956636, "answer_id": 57178406, "question_id": 57178328, "link": "https://stackoverflow.com/questions/57178328/when-replacing-value-in-a-string-array-i-get-an-array-when-using-but-not-wit/57178406#57178406", "title": "When replacing value in a string array I get an array when using &quot; &quot; but not with &#39; &#39;", "body": "<p>In <code>c</code> the difference between single and double quotes has semantic meaning. Single quote indicates a char value and double quotes indicates string literal. The warning you get is indicative of this. </p>\n"}, {"tags": [], "owner": {"reputation": 1002, "user_id": 6234311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1289265201119732/picture?type=large", "display_name": "Reda Drissi", "link": "https://stackoverflow.com/users/6234311/reda-drissi"}, "is_accepted": false, "score": 7, "last_activity_date": 1563956688, "creation_date": 1563956688, "answer_id": 57178424, "question_id": 57178328, "link": "https://stackoverflow.com/questions/57178328/when-replacing-value-in-a-string-array-i-get-an-array-when-using-but-not-wit/57178424#57178424", "title": "When replacing value in a string array I get an array when using &quot; &quot; but not with &#39; &#39;", "body": "<p>Unlike python, in C <code>''</code> and <code>\"\"</code> are not interchangeable. C considers single quotes <code>''</code> as a single character, while double quotes <code>\"\"</code> are for strings of characters, your variable input is probably either a <code>char*</code> or <code>char[xx]</code> so each element is a single character, so a single quote <code>''</code> is what you should use.</p>\n"}, {"tags": [], "owner": {"reputation": 249, "user_id": 11763101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e19848c6c0f710f10a380a1e5aa89ee4?s=128&d=identicon&r=PG&f=1", "display_name": "hissroth", "link": "https://stackoverflow.com/users/11763101/hissroth"}, "is_accepted": false, "score": 0, "last_activity_date": 1563961423, "creation_date": 1563961423, "answer_id": 57179916, "question_id": 57178328, "link": "https://stackoverflow.com/questions/57178328/when-replacing-value-in-a-string-array-i-get-an-array-when-using-but-not-wit/57179916#57179916", "title": "When replacing value in a string array I get an array when using &quot; &quot; but not with &#39; &#39;", "body": "<p>Single are use for char and double quotes are for string. </p>\n"}], "owner": {"reputation": 7, "user_id": 11778727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c309fefc94ec3d17c3a171f5a4cc3d01?s=128&d=identicon&r=PG&f=1", "display_name": "meowththatsright", "link": "https://stackoverflow.com/users/11778727/meowththatsright"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 3, "score": -5, "last_activity_date": 1563961423, "creation_date": 1563956357, "last_edit_date": 1563956531, "question_id": 57178328, "link": "https://stackoverflow.com/questions/57178328/when-replacing-value-in-a-string-array-i-get-an-array-when-using-but-not-wit", "title": "When replacing value in a string array I get an array when using &quot; &quot; but not with &#39; &#39;", "body": "<p>In my code I am trying to replace a value in a string. </p>\n\n<p>When I do the replacement with double quotes</p>\n\n<pre><code>input[n]=\"\\n\";\n</code></pre>\n\n<p>I get a </p>\n\n<pre><code>warning: assignment makes integer from pointer without a cast [enabled by default]\n         input[n]=\"\\n\";\n                 ^\n</code></pre>\n\n<p>However if I use single quotes</p>\n\n<pre><code>input[n]='\\n'\n</code></pre>\n\n<p>it works.</p>\n"}, {"tags": ["c", "ip", "gateway", "ioctl"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 3932973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c24f3e39fbd0dfb09904e42bb717090?s=128&d=identicon&r=PG&f=1", "display_name": "Pichner", "link": "https://stackoverflow.com/users/3932973/pichner"}, "edited": false, "score": 0, "creation_date": 1563958444, "post_id": 57178446, "comment_id": 100869353, "body": "I appreciate the response and I have read all the man pages. But if u run this code - even with rt_metric=0 it just adds a default getaway instead of replacing it."}], "tags": [], "owner": {"reputation": 11, "user_id": 11823164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/16U0y.jpg?s=128&g=1", "display_name": "Madfish", "link": "https://stackoverflow.com/users/11823164/madfish"}, "is_accepted": false, "score": 0, "last_activity_date": 1563956736, "creation_date": 1563956736, "answer_id": 57178446, "question_id": 57178084, "link": "https://stackoverflow.com/questions/57178084/how-to-change-default-gateway-vie-c/57178446#57178446", "title": "How to Change default gateway vie C", "body": "<p>Here is a piece of code to define the default gateway</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;net/route.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/ioctl.h&gt;\n\nint main(char** args) {\n  int sockfd;\n  struct rtentry route;\n  struct sockaddr_in *addr;\n  int err = 0;\n\n  // create the socket\n if((sockfd = socket(AF_INET, SOCK_DGRAM, 0)))&lt;0){\nperror(\"socket\");\nexit(1);\n}\n\n  memset(&amp;route, 0, sizeof(route));\n  addr = (struct sockaddr_in*) &amp;route.rt_gateway;\n  addr-&gt;sin_family = AF_INET;\n  addr-&gt;sin_addr.s_addr = inet_addr(\"192.168.2.1\");\n  addr = (struct sockaddr_in*) &amp;route.rt_dst;\n  addr-&gt;sin_family = AF_INET;\n  addr-&gt;sin_addr.s_addr = INADDR_ANY;\n  addr = (struct sockaddr_in*) &amp;route.rt_genmask;\n  addr-&gt;sin_family = AF_INET;\n  addr-&gt;sin_addr.s_addr = INADDR_ANY;\n  // You need to add the interface name to the request\n  route.rt_flags = RTF_UP | RTF_GATEWAY;\n  route.rt_metric = 0;\n  if ((err = ioctl(sockfd, SIOCADDRT, &amp;route)) != 0) {\n    perror(\"SIOCADDRT failed\");\n    exit(1);\n  }\n}\n</code></pre>\n\n<p>It uses only simple IOCTL concepts. If you have problems with these notions I advise you to take a look at the link below :\n<a href=\"http://man7.org/linux/man-pages/man7/ip.7.html\" rel=\"nofollow noreferrer\">IOCTL Man Page</a></p>\n"}], "owner": {"reputation": 5, "user_id": 3932973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c24f3e39fbd0dfb09904e42bb717090?s=128&d=identicon&r=PG&f=1", "display_name": "Pichner", "link": "https://stackoverflow.com/users/3932973/pichner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563956736, "creation_date": 1563955435, "question_id": 57178084, "link": "https://stackoverflow.com/questions/57178084/how-to-change-default-gateway-vie-c", "title": "How to Change default gateway vie C", "body": "<p>I am trying to write a program in C that will change the default gateway.</p>\n\n<p>I have run the following code: <a href=\"https://stackoverflow.com/questions/22733967/linux-how-to-set-default-route-from-c\">Linux : how to set default route from C?</a> \nThe code presented here is not working as i would imagine.\nIt adds a default gateway with a high metric number next to it.\nI read about the metric numbers but this is clearly not my goal.\nI would like to swap the current default address with one of my own.</p>\n\n<p>If you add some code, an explanation near it would also be much appreciated since it's the first time working with ioctl. Not that familiar with how it work's or why so many things needed to be added to define it.</p>\n\n<p>P.S. please avoid any responses that require me to open files or string manipulations.\nThank you in advance</p>\n"}, {"tags": ["c", "macos"], "comments": [{"owner": {"reputation": 263, "user_id": 2889247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5387213c353ee169984a8c5e0e743ec5?s=128&d=identicon&r=PG&f=1", "display_name": "WoffOVkee", "link": "https://stackoverflow.com/users/2889247/woffovkee"}, "edited": false, "score": 0, "creation_date": 1564551223, "post_id": 57178005, "comment_id": 101062866, "body": "this could be a same error - <a href=\"https://stackoverflow.com/questions/57076587/nssoftlinking-the-function-slsissuppressedbyscreentime-cant-be-found-in-the\" title=\"nssoftlinking the function slsissuppressedbyscreentime cant be found in the\">stackoverflow.com/questions/57076587/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10675929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/779a46605b681c1ece2370e99ec47f10?s=128&d=identicon&r=PG&f=1", "display_name": "Damien Mercier", "link": "https://stackoverflow.com/users/10675929/damien-mercier"}, "is_accepted": false, "score": 0, "last_activity_date": 1564757452, "creation_date": 1564757452, "answer_id": 57328873, "question_id": 57178005, "link": "https://stackoverflow.com/questions/57178005/slsissuppressedbyscreentime-cant-be-found-in-the-null-framework/57328873#57328873", "title": "&#39;SLSIsSuppressedByScreenTime&#39; can&#39;t be found in the (null) framework", "body": "<p>error fixed, i update macos catalina today and the message \"'SLSIsSuppressedByScreenTime' can't be found in the (null) framework\" is over. \nthen, for the error \"We got a keyboard without any keys (1)</p>\n\n<p>We got a keyboard without any keys (1)\"\ngo to SETTINGS > SAFETY > MONITORING and select your IDE.</p>\n"}], "owner": {"reputation": 11, "user_id": 10675929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/779a46605b681c1ece2370e99ec47f10?s=128&d=identicon&r=PG&f=1", "display_name": "Damien Mercier", "link": "https://stackoverflow.com/users/10675929/damien-mercier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564757452, "creation_date": 1563955208, "last_edit_date": 1563959870, "question_id": 57178005, "link": "https://stackoverflow.com/questions/57178005/slsissuppressedbyscreentime-cant-be-found-in-the-null-framework", "title": "&#39;SLSIsSuppressedByScreenTime&#39; can&#39;t be found in the (null) framework", "body": "<p>I am using the CSFML and with the new catalina update I have this message :</p>\n\n<pre><code>2019-07-23 21:04:48.394 my_rpg[1383:98957] NSSoftLinking - The function 'SLSIsSuppressedByScreenTime' can't be found in the (null) framework.\n\nWe got a keyboard without any keys (1)\n\nWe got a keyboard without any keys (1)\n\n</code></pre>\n\n<p>I don't know why but I think it is the new catalina update.</p>\n\n<p>Can anyone help me ?</p>\n\n<p>Thanks !</p>\n"}, {"tags": ["c", "embedded-linux"], "comments": [{"owner": {"reputation": 421, "user_id": 11521482, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QIrZ4uBKGpc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfy52SQZZoz_RBLxJ0jRvF-_uNwbQ/mo/photo.jpg?sz=128", "display_name": "Mathias Schmid", "link": "https://stackoverflow.com/users/11521482/mathias-schmid"}, "edited": false, "score": 0, "creation_date": 1563982461, "post_id": 57177800, "comment_id": 100883300, "body": "Do you see additional clock cycles after the slave put the data byte on the lines or just additional clock cycles for complete read command ? Is there opcode and address information for read command defined which is setup by master before slave puts data on lines ? From my experience with SPI Flash Memory and EEPROM slave devices read command consists of opcode and address setup by master and data setup by slave."}, {"owner": {"reputation": 1, "user_id": 11566938, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OYI-JOUgTmw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfv_YwWUKYP8z4B1ZFTqCSJcg_xSQ/mo/photo.jpg?sz=128", "display_name": "panguluri sivaparvathi", "link": "https://stackoverflow.com/users/11566938/panguluri-sivaparvathi"}, "reply_to_user": {"reputation": 421, "user_id": 11521482, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QIrZ4uBKGpc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfy52SQZZoz_RBLxJ0jRvF-_uNwbQ/mo/photo.jpg?sz=128", "display_name": "Mathias Schmid", "link": "https://stackoverflow.com/users/11521482/mathias-schmid"}, "edited": false, "score": 0, "creation_date": 1564048754, "post_id": 57177800, "comment_id": 100906602, "body": "I can see additional clocks whenever I set the dataenable bit in the register nothing but whenever I am trying to receive  the data from the slave .For Opcode and Address information alone the no of cycles that are occurring as expected on 4 lines.Yes there is an opcode and address information ."}], "owner": {"reputation": 1, "user_id": 11566938, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OYI-JOUgTmw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfv_YwWUKYP8z4B1ZFTqCSJcg_xSQ/mo/photo.jpg?sz=128", "display_name": "panguluri sivaparvathi", "link": "https://stackoverflow.com/users/11566938/panguluri-sivaparvathi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563954491, "creation_date": 1563954491, "question_id": 57177800, "link": "https://stackoverflow.com/questions/57177800/unpredictable-behaviour-of-the-qspi-clocks-while-accessing-qspi-read", "title": "Unpredictable behaviour of the QSPI clocks while accessing QSPI read", "body": "<p>I'm trying to read the data from the slave using QSPI as an interface.When I verified with the clock cycles that are being occurred I can see there more clock cycles than I expected i.e., for example I want to read the data of 1 byte using four lines the no.of clock cycles will be 2 cycles but I was seeing around 16 clock cycles.\nWhat could be the reason of this extra clock cycles addition and how to overcome this issue</p>\n\n<p>Note: The slave device is FPGA in my case i.e., QSPI acts as interface in between the sama5d27 processor and FPGA</p>\n"}, {"tags": ["c++", "c", "elf", "brainfuck"], "comments": [{"owner": {"reputation": 5818, "user_id": 978558, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d023acf70b927cb813b48631195e346e?s=128&d=identicon&r=PG", "display_name": "fredrik", "link": "https://stackoverflow.com/users/978558/fredrik"}, "edited": false, "score": 0, "creation_date": 1563957901, "post_id": 57177764, "comment_id": 100869043, "body": "If you want to write an elf binary that&#39;s always the same, just embed it in your program and write that embedded resource to file."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1563959598, "post_id": 57177764, "comment_id": 100869979, "body": "So you want to write an ELF executable. What research have you done into the ELF format? Have you looked at any documentation, or ELF libraries, or at the ELF sections in existing executables, or ... done any research?"}], "answers": [{"tags": [], "owner": {"reputation": 1102, "user_id": 5088796, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/19f4fd38736f571b96696b615af97266?s=128&d=identicon&r=PG&f=1", "display_name": "Yanick Salzmann", "link": "https://stackoverflow.com/users/5088796/yanick-salzmann"}, "is_accepted": true, "score": 1, "last_activity_date": 1563959084, "creation_date": 1563959084, "answer_id": 57179140, "question_id": 57177764, "link": "https://stackoverflow.com/questions/57177764/making-an-executable-by-running-an-executable/57179140#57179140", "title": "Making an executable by running an executable", "body": "<p>Your initial message was about creating a an executable from a brainfuck code, so this is what this answer focuses on. Your current question is way too broad.</p>\n\n<p>As you have linked in one of your previous posts there is already an implementation that does this here: <a href=\"https://github.com/skeeto/bf-x86/blob/master/bf-x86.c\" rel=\"nofollow noreferrer\">https://github.com/skeeto/bf-x86/blob/master/bf-x86.c</a></p>\n\n<p>It basically does 3 steps:</p>\n\n<p>1) Parse the BF code into a intermediate representation (which is here <a href=\"https://github.com/skeeto/bf-x86/blob/master/bf-x86.c#L55\" rel=\"nofollow noreferrer\">https://github.com/skeeto/bf-x86/blob/master/bf-x86.c#L55</a>)</p>\n\n<p>2) Compile this intermediate representation into machine code (which can be found here <a href=\"https://github.com/skeeto/bf-x86/blob/master/bf-x86.c#L496\" rel=\"nofollow noreferrer\">https://github.com/skeeto/bf-x86/blob/master/bf-x86.c#L496</a>)</p>\n\n<p>3) Compose the ELF binary according to the specification. The example program does this here. <a href=\"https://github.com/skeeto/bf-x86/blob/master/bf-x86.c#L622\" rel=\"nofollow noreferrer\">https://github.com/skeeto/bf-x86/blob/master/bf-x86.c#L622</a> .</p>\n\n<p>Steps 1 and 2 are up to you to find a good implementation, for step 3 the simplest way is to write the ELF header and program header in such a way, that it only has the programs machine code as content and point the entrypoint of the program to the machine code generated in step 2.</p>\n\n<p>The full specification for the ELF format can be found here: <a href=\"https://refspecs.linuxfoundation.org/elf/elf.pdf\" rel=\"nofollow noreferrer\">https://refspecs.linuxfoundation.org/elf/elf.pdf</a></p>\n"}, {"tags": [], "owner": {"reputation": 659, "user_id": 3775615, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d2986c3db72e19a9ca9f88b86f23e42a?s=128&d=identicon&r=PG&f=1", "display_name": "TSG", "link": "https://stackoverflow.com/users/3775615/tsg"}, "is_accepted": false, "score": 1, "last_activity_date": 1563961772, "creation_date": 1563961772, "answer_id": 57180035, "question_id": 57177764, "link": "https://stackoverflow.com/questions/57177764/making-an-executable-by-running-an-executable/57180035#57180035", "title": "Making an executable by running an executable", "body": "<p>@Yanick's answer contains enough information about the ELF format and how to create an elf executable.</p>\n\n<p>However, it seems to me that your question is about how to open/create an executable file. There is a function called <code>chmod/fchmod</code> which might help you.</p>\n\n<p>The following text is taken from the man-page for <code>chmod</code> (run <code>man 2 chmod</code> to see this page):</p>\n\n<pre><code>   #include &lt;sys/stat.h&gt;\n   int chmod(const char *pathname, mode_t mode);\n   int fchmod(int fd, mode_t mode);\n\n   The new file mode is specified in mode, which is a bit mask created by ORing together zero or  more  of  the\n   following:\n\n   S_ISUID  (04000)  set-user-ID (set process effective user ID on execve(2))\n\n   S_ISGID  (02000)  set-group-ID (set process effective group ID on execve(2); mandatory locking, as described\n                     in fcntl(2); take a new file's group from parent directory, as described in  chown(2)  and\n                     mkdir(2))\n\n   S_ISVTX  (01000)  sticky bit (restricted deletion flag, as described in unlink(2))\n\n   S_IRUSR  (00400)  read by owner\n\n   S_IWUSR  (00200)  write by owner\n\n   S_IXUSR  (00100)  execute/search  by  owner (\"search\" applies for directories, and means that entries within\n                     the directory can be accessed)\n\n   S_IRGRP  (00040)  read by group\n\n   S_IWGRP  (00020)  write by group\n\n   S_IXGRP  (00010)  execute/search by group\n\n   S_IROTH  (00004)  read by others\n\n   S_IWOTH  (00002)  write by others\n\n   S_IXOTH  (00001)  execute/search by others\n</code></pre>\n\n<p>In your case, running <code>chmod(\"foo.out\", S_IRUSR | S_IXUSR)</code> should give you(the owner) the permission to read and execute foo.out. Assuming that you have written <code>foo.out</code> to be a proper elf file, this will make it executable.</p>\n"}], "owner": {"reputation": 3085, "user_id": 7309666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be91537cdd23587efcab0afbe2ed0023?s=128&d=identicon&r=PG&f=1", "display_name": "coder3101", "link": "https://stackoverflow.com/users/7309666/coder3101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 57179140, "answer_count": 2, "score": 0, "last_activity_date": 1563961772, "creation_date": 1563954370, "last_edit_date": 1563957622, "question_id": 57177764, "link": "https://stackoverflow.com/questions/57177764/making-an-executable-by-running-an-executable", "title": "Making an executable by running an executable", "body": "<p><s>I wanted to write a brainfuck compiler, but when I went to write one I was stuck at this problem</s></p>\n\n<p><s>I want to create an ELF executable (using C/C++) that reads a brainfuck code from a file and generates an executable. Just like GCC/clang</s></p>\n\n<p><s>I can read and parse the code, but I don't know how to write an executable that can run on the same system (say x86)?</s></p>\n\n<p><s>I want this behavior:</s>\n<s>\n    my_bf_compiler ./source.bf -o bin.out\n    ./bin.out</p>\n\n<p></s>\nEDIT: <strong>I do not want to know how to write a compiler. Read this, compiler part was just for context as to where I will use it</strong></p>\n\n<p>I want to create a binary executable (say maker.out) which when ran creates a executable file (say foo.out). For simplicity let's keep <code>foo.out</code> very simple, when executed it returns 7; So, this is what is expected:</p>\n\n<pre><code>./maker.out # Creates the foo.out executable\n./foo.out &amp;&amp; echo $ # Runs the executable and prints return value, in this case 7;\n</code></pre>\n\n<p>So how do I write maker.cpp?</p>\n"}, {"tags": ["c", "floating-point", "printf"], "comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1563948461, "post_id": 57176184, "comment_id": 100864485, "body": "Since both operands of <code>9&#47;5</code> are integers, the result of the division is also an integer (1).  The <code>%f</code> conversion specifier expects a <code>float</code> or <code>double</code> operand."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1563954089, "post_id": 57176184, "comment_id": 100867077, "body": "The duplicate is the first google search result for <code>printf(&quot;%f&quot;, 9&#47;5);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1563953777, "post_id": 57176253, "comment_id": 100866915, "body": "lol, the question was a value-exact duplicate :D"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 8, "last_activity_date": 1563949066, "last_edit_date": 1563949066, "creation_date": 1563948323, "answer_id": 57176253, "question_id": 57176184, "link": "https://stackoverflow.com/questions/57176184/anomaly-in-printf-function/57176253#57176253", "title": "Anomaly in printf() function", "body": "<p><code>9/5</code> is an integer and it's value is 1.</p>\n\n<p><code>printf(\"%f\", 9/5);</code> is undefined behaviour because <code>%f</code> expects a <code>double</code> but you provide an <code>int</code>.</p>\n\n<p>Try <code>printf(\"%f\", 9.0/5);</code> and the output will be what you expect.</p>\n\n<p>More generally spoken: if the format specifiers of <code>printf</code> don't match the arguments, the behaviour is undefined; in most cases you get unexpected output.</p>\n"}], "owner": {"reputation": 37, "user_id": 9598333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edeae859d1e18205cd6f6ee1d1895e7d?s=128&d=identicon&r=PG&f=1", "display_name": "Anurag", "link": "https://stackoverflow.com/users/9598333/anurag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "closed_date": 1563953632, "answer_count": 1, "score": -2, "last_activity_date": 1563954442, "creation_date": 1563948016, "question_id": 57176184, "link": "https://stackoverflow.com/questions/57176184/anomaly-in-printf-function", "closed_reason": "Duplicate", "title": "Anomaly in printf() function", "body": "<p>I am seeing anomalous behavior in print function while dealing with int and float numbers.</p>\n\n<pre><code>float y = 9/5;\nprintf(\"%f\", y);\n\nprintf(\"%f\", 9/5);\n</code></pre>\n\n<p>First print statement outputs 1.000000 which is acceptable while other outputs 0.000000.\nWhy outputs are different in both cases?</p>\n"}, {"tags": ["c", "struct"], "answers": [{"comments": [{"owner": {"reputation": 142, "user_id": 3724321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/074N6.jpg?s=128&g=1", "display_name": "Jinan Dangor", "link": "https://stackoverflow.com/users/3724321/jinan-dangor"}, "edited": false, "score": 0, "creation_date": 1563948701, "post_id": 57176171, "comment_id": 100864575, "body": "When you say &#39;define&#39; the array, I presume you mean &#39;declare&#39; (or are those the same in this case)?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 142, "user_id": 3724321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/074N6.jpg?s=128&g=1", "display_name": "Jinan Dangor", "link": "https://stackoverflow.com/users/3724321/jinan-dangor"}, "edited": false, "score": 2, "creation_date": 1563949833, "post_id": 57176171, "comment_id": 100865000, "body": "@JinanDangor There&#39;s a difference between <i>declare</i> and <i>define</i>. When you <i>declare</i> a variable you tell the compiler the variable exists somewhere. When you <i>define</i> a variable you tell the compiler &quot;here&#39;s the variable, give it some memory&quot;. For local variables the declaration and definition usually is happening at the same place."}, {"owner": {"reputation": 198, "user_id": 9526419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "SRK", "link": "https://stackoverflow.com/users/9526419/srk"}, "edited": false, "score": 0, "creation_date": 1563960393, "post_id": 57176171, "comment_id": 100870382, "body": "Here are you typecasting by the (Car) expression?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 198, "user_id": 9526419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "SRK", "link": "https://stackoverflow.com/users/9526419/srk"}, "edited": false, "score": 0, "creation_date": 1563960823, "post_id": 57176171, "comment_id": 100870617, "body": "@SRK No it&#39;s a compound literal. Please see the linked reference for more details."}, {"owner": {"reputation": 198, "user_id": 9526419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "SRK", "link": "https://stackoverflow.com/users/9526419/srk"}, "edited": false, "score": 0, "creation_date": 1563961599, "post_id": 57176171, "comment_id": 100871029, "body": "I guess compound literal is available in C and C++ as well."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 198, "user_id": 9526419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "SRK", "link": "https://stackoverflow.com/users/9526419/srk"}, "edited": false, "score": 0, "creation_date": 1563963428, "post_id": 57176171, "comment_id": 100872098, "body": "@SRK No, it&#39;s C only, not C++."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1563947939, "creation_date": 1563947939, "answer_id": 57176171, "question_id": 57176126, "link": "https://stackoverflow.com/questions/57176126/initialising-a-struct-inside-an-array/57176171#57176171", "title": "Initialising a struct inside an array", "body": "<p>The problem is that you attempt to <em>initialize</em> the element in the array, which is only possible when you <em>define</em> the array.</p>\n\n<p>Initialization is only possible with definition.</p>\n\n<p>You can however use <a href=\"https://en.cppreference.com/w/c/language/compound_literal\" rel=\"nofollow noreferrer\"><em>compound literals</em></a> to create a temporary structure object that is then copied into the array element:</p>\n\n<pre><code>all_cars[0] = (Car) {.wheels = 4,\n                     .cylinders = 8,\n                     .maxSpeed = 120,\n                     .canOffroad = 0};\n</code></pre>\n"}], "owner": {"reputation": 142, "user_id": 3724321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/074N6.jpg?s=128&g=1", "display_name": "Jinan Dangor", "link": "https://stackoverflow.com/users/3724321/jinan-dangor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 1, "accepted_answer_id": 57176171, "answer_count": 1, "score": 0, "last_activity_date": 1563947939, "creation_date": 1563947724, "question_id": 57176126, "link": "https://stackoverflow.com/questions/57176126/initialising-a-struct-inside-an-array", "title": "Initialising a struct inside an array", "body": "<p>Recently, I attempted the following, as a shorthand for initialising a new structure and making it the first element of an array:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAX_CARS 100\n\ntypedef struct car {\n    int wheels;\n    int cylinders;\n    int maxSpeed;\n    int canOffroad;\n} Car;\n\nint main(void) {\n    Car all_cars[MAX_CARS];\n    // This is nice, I would like to do something equivalent to this\n    all_cars[0] = {.wheels = 4,\n                   .cylinders = 8,\n                   .maxSpeed = 120,\n                   .canOffroad = 0};\n\n    return 0;\n}\n</code></pre>\n\n<p>This, however, throws a compiler error, saying that it expects an expression before the '{'.</p>\n\n<p>Now, at first I thought I might have mis-remembered initialising structs, but this works:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAX_CARS 100\n\ntypedef struct car {\n    int wheels;\n    int cylinders;\n    int maxSpeed;\n    int canOffroad;\n} Car;\n\nint main(void) {\n    Car all_cars[MAX_CARS];\n    // This is ok, but introduces a (potentially) unnecessary variable\n    Car new_car = {.wheels = 4,\n                   .cylinders = 8,\n                   .maxSpeed = 120,\n                   .canOffroad = 0};\n    all_cars[0] = new_car;\n\n    return 0;\n}\n</code></pre>\n\n<p>So the problem is clearly in initialising this structure as an element of an array instead of as a variable.</p>\n\n<p>Is there syntax which allows for initialising structs like this, or am I stuck initialising a new struct variable every time I want to add one to an array?</p>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 698, "user_id": 10996625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kA2VT.jpg?s=128&g=1", "display_name": "sinaraheneba", "link": "https://stackoverflow.com/users/10996625/sinaraheneba"}, "edited": false, "score": 1, "creation_date": 1563946888, "post_id": 57175965, "comment_id": 100863869, "body": "Welcome to Stack Overflow. Check out the guide on <a href=\"https://stackoverflow.com/help/how-to-ask\">asking questions</a> -- specifically, be sure to include what the errors you are getting say, and what you expect to happen instead. Also, be careful with those <code>;</code>s"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1563946927, "post_id": 57175965, "comment_id": 100863886, "body": "No, it&#39;s not because you have curly braces, if because of the <i>lack</i> of curly braces (you need more!). Please save yourself a lot of time by getting a beginners book about C."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1563946950, "post_id": 57175965, "comment_id": 100863895, "body": "Go back to the very first lesson in your text book, the one which presents a HelloWorld program. Use that as a foundation for your own experiments."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1563947157, "post_id": 57175965, "comment_id": 100863976, "body": "C is not a scripting language like python or perl, where you can have free-standing code. In C, every piece of executable code must be placed inside a function. Entry point of a programme is the <code>main</code> function, i. e. it is <i>this</i> function that will be called at very first when you start your programme."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1563947278, "post_id": 57175965, "comment_id": 100864022, "body": "Additionally: Have a close look at <code>if((x &lt; y);</code>, the trailing semicolon will terminate the statement, so you&#39;ll do nothing on the if and execute the subsequent code <i>un</i>conditionally (i. e. always)."}], "answers": [{"tags": [], "owner": {"reputation": 249, "user_id": 11763101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e19848c6c0f710f10a380a1e5aa89ee4?s=128&d=identicon&r=PG&f=1", "display_name": "hissroth", "link": "https://stackoverflow.com/users/11763101/hissroth"}, "is_accepted": false, "score": 1, "last_activity_date": 1563950565, "creation_date": 1563950565, "answer_id": 57176759, "question_id": 57175965, "link": "https://stackoverflow.com/questions/57175965/why-are-there-errors-in-this-code-is-it-because-of-the-curly-braces/57176759#57176759", "title": "Why are there errors in this code? Is it because of the curly braces?", "body": "<p>You forgot to put bracket when you define the main, with the \";\" it's mean it's the end of the line of function so your main doesn't contain anything at the moment. Same for your <code>if</code> statement. Your code should look like this </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    int \"enter name variable here\" = \"enter value here\";\n\n    if (\"enter condition here\") {\n        \"things to do then\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11828243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3aeb36952e253b9b796d03fff50a0cf?s=128&d=identicon&r=PG&f=1", "display_name": "redautumnleaves", "link": "https://stackoverflow.com/users/11828243/redautumnleaves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1563950565, "creation_date": 1563946734, "question_id": 57175965, "link": "https://stackoverflow.com/questions/57175965/why-are-there-errors-in-this-code-is-it-because-of-the-curly-braces", "title": "Why are there errors in this code? Is it because of the curly braces?", "body": "<p>I'm very new to programming. I am trying to write code but I keep getting errors. Would someone be able to tell me why there are errors in the code below?</p>\n\n<p>Sorry if this is a stupid question, I am very new to programming.</p>\n\n<pre><code>#include &lt;cs50.h&gt;\n#include &lt;stdio.h&gt;\n\n\nint main(void);\n\nint x = get_int (\"x: \");\nint y = get_int(\"y: \");\n\nif (x &lt; y);\n{\nprintf(\"x is less than y\\n\");\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1563946792, "post_id": 57175939, "comment_id": 100863841, "body": "What does <code>if(a[i]==&#39;&#39;)</code> mean to you?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1563946796, "post_id": 57175939, "comment_id": 100863843, "body": "What do you want <code>&#39;&#39;</code> to do or represent?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1563946853, "post_id": 57175939, "comment_id": 100863859, "body": "In contrast to empty string literal (<code>&quot;&quot;</code>), character literals <i>always</i> need to contain a character (exactly one). Replace <code>&#39;&#39;</code> with <code>&#39; &#39;</code>..."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1563947236, "post_id": 57175939, "comment_id": 100864004, "body": "@Aconcagua Why did you decide to make that a comment instead of an answer?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1563947410, "post_id": 57175939, "comment_id": 100864062, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/31878625/empty-character-constant\">Empty Character Constant</a>  (maybe that&#39;s why...)"}, {"owner": {"reputation": 11, "user_id": 10017681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c19dd1d4bb55b3a8b9165ab6f30a3c83?s=128&d=identicon&r=PG&f=1", "display_name": "CodeTom", "link": "https://stackoverflow.com/users/10017681/codetom"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1563949007, "post_id": 57175939, "comment_id": 100864687, "body": "@Ry-    if(a[i]==&#39; &#39;) means spaces between words . If I could count the spaces between the words of the string then possibly the count of words will be equal to 1 more than the count."}, {"owner": {"reputation": 11, "user_id": 10017681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c19dd1d4bb55b3a8b9165ab6f30a3c83?s=128&d=identicon&r=PG&f=1", "display_name": "CodeTom", "link": "https://stackoverflow.com/users/10017681/codetom"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1563949478, "post_id": 57175939, "comment_id": 100864855, "body": "@Aconcagua Thank you so much . I got the output now."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1563954057, "post_id": 57175939, "comment_id": 100867054, "body": "@Aconcagua: note that although it is normal to use a single character in an integer character constant, the standard explicitly says (C11 <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.4.4.4p2\" rel=\"nofollow noreferrer\">&#167;6.4.4 &#182;2 Character constants</a>: <i>An integer character constant is a sequence of one or more multibyte characters enclosed in single-quotes\u2026</i> . Granted, multiple characters in a character constant have an implementation-defined value and are generally not very useful, but don&#39;t overstate your case."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10017681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c19dd1d4bb55b3a8b9165ab6f30a3c83?s=128&d=identicon&r=PG&f=1", "display_name": "CodeTom", "link": "https://stackoverflow.com/users/10017681/codetom"}, "edited": false, "score": 0, "creation_date": 1563951934, "post_id": 57176699, "comment_id": 100866020, "body": "ok..the ascii of space is serving the purpose. Thanks. Just that the &quot;gets&quot; won&#39;t work since it has become obsolete and is dangerous to use. Also the code will have a compile time error since &#39;a&#39; (in a[i]==32) is undefined. pls change it to &quot;str&quot;. Thanks again"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1563953824, "post_id": 57176699, "comment_id": 100866946, "body": "No; please do not suggest the use of 32 in place of <code>&#39; &#39;</code> (where there&#39;s a simple space between the two quotes)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1563954292, "post_id": 57176699, "comment_id": 100867178, "body": "<code>&#39; &#39;</code> vs. <code>32</code>: Use the former, if you encode characters for your local system (as in given case), you&#39;ll stay portable this way. Use the latter, if you need to enforce ASCII (compatible) output (e. g. to a file or socket), even if local encoding might differ. Better in the latter case, then, would be using some function like <code>toascii(&#39; &#39;)</code> or <code>toascii(&quot;someString&quot;)</code>, if it exists on such system..."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1563954453, "post_id": 57176699, "comment_id": 100867282, "body": "Note that most people would regard a string like <code>&quot; one\u00a0\u00a0or \u00a0more\u00a0\u00a0words &quot;</code> as containing 4 words, even though there are 8 blanks in the string (one at the start, two between each word, and another at the end).  And that&#39;s before we deal with tabs, newlines, etc.  Your algorithm is a bit too simplistic."}], "tags": [], "owner": {"reputation": 41, "user_id": 11814215, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0OslUhIscIk/AAAAAAAAAAI/AAAAAAAAEMo/WW117ICPoNI/photo.jpg?sz=128", "display_name": "Bhakti Raman Das", "link": "https://stackoverflow.com/users/11814215/bhakti-raman-das"}, "is_accepted": false, "score": 1, "last_activity_date": 1563954295, "last_edit_date": 1563954295, "creation_date": 1563950355, "answer_id": 57176699, "question_id": 57175939, "link": "https://stackoverflow.com/questions/57175939/count-no-of-words-in-a-string-in-c-programming-i-am-getting-empty-character-c/57176699#57176699", "title": "Count no. of words in a string in C programming ( I am getting empty character constant error)", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n    char str[50];\n\n    int i, numberOfWords=0;\n\n    gets(str);\n\n    for(i=0; str[i]!='\\0'; i++) {\n        if(str[i] == 32) //ascii code of space is 32\n            numberOfWords++;\n    }\n    printf(\"number of words = %d\\n\", numberOfWords + 1);\n    //adding 1 to numberOfWords because if there are two words, there will be 2-1=1 space between them. eg= \"Hello World\"\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 1, "last_activity_date": 1563954603, "last_edit_date": 1563954603, "creation_date": 1563953933, "answer_id": 57177643, "question_id": 57175939, "link": "https://stackoverflow.com/questions/57175939/count-no-of-words-in-a-string-in-c-programming-i-am-getting-empty-character-c/57177643#57177643", "title": "Count no. of words in a string in C programming ( I am getting empty character constant error)", "body": "<p>In contrast to empty string literal (<code>\"\"</code>), character literals always need to contain a character (exactly one)<sup>*</sup>. Replace <code>''</code> with <code>' '</code> and you code should compile at least.</p>\n\n<p>However, the code as is will count the number of spaces. What will happen if a string contains more than one subsequent space? Additionally, you might want to consider tabs as well? And how would you want to interpret punctuation marks? Part of words or separator? And what about numbers?</p>\n\n<p>Depending on how you answer all these questions, you might need to vary the condition in code below. In any case, I propose a stateful iteration over your input:</p>\n\n<pre><code>int isSeparator = 1; // so you will count the first word occuring, too, even if starting\n                     // at first character of the string\nfor(char const* s = str; *s; ++s)\n{\n    if(isalnum((unsigned char)*s)) // requires &lt;ctype.h&gt; header; modify condition\n                                   // appropriately if you want different\n                                   // characters to count as word parts\n    {\n        wordCount += isSeparator;\n        isSeparator = 0;\n    }\n    else\n    {\n        isSeparator = 1;\n    }\n}\n</code></pre>\n\n<p><sub><sup>*</sup>Actually, the standard <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.4.4.4p2\" rel=\"nofollow noreferrer\">does</a> allow multi-byte characters, so to be precise, we'd need to state <em>'at least one character'</em>, but these multi-byte characters have implementation defined meaning and usually aren't useful anyway, so for practical reasons, we might stay with the technically less correct <em>'exactly one character'</em>...</sub></p>\n"}], "owner": {"reputation": 11, "user_id": 10017681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c19dd1d4bb55b3a8b9165ab6f30a3c83?s=128&d=identicon&r=PG&f=1", "display_name": "CodeTom", "link": "https://stackoverflow.com/users/10017681/codetom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1563954603, "creation_date": 1563946644, "last_edit_date": 1563946746, "question_id": 57175939, "link": "https://stackoverflow.com/questions/57175939/count-no-of-words-in-a-string-in-c-programming-i-am-getting-empty-character-c", "title": "Count no. of words in a string in C programming ( I am getting empty character constant error)", "body": "<p>My code was to count no of words in the string.\nBut (a[i]=='') is showing empty character constant error</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n    char a[20];\n\n    int i,c1=0,c2=0;\n\n    scanf(\"%[^\\n]\",a);\n\n    for(i=0;a[i]!='\\0';i++)\n    {\n        c1++;\n\n        if(a[i]=='')\n\n        c2++;\n    }\n    printf(\"%d\\n\",c1);\n\n    printf(\"%d\",c2+1);\n\n    return 0;\n}\n</code></pre>\n\n<p>For input - tom is here</p>\n\n<p>I expect the output to be -11\n                           3</p>\n\n<p>Compilation error- In function 'main':</p>\n\n<p>prog.c:10:15: error: empty character constant\n      if(a[i]=='')\n               ^</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 2, "creation_date": 1563944765, "post_id": 57175585, "comment_id": 100863244, "body": "The arguments you pass to <code>scanf</code> must be pointers.  <a href=\"http://c-faq.com/stdio/scanf1a.html\" rel=\"nofollow noreferrer\">c-faq.com/stdio/scanf1a.html</a>"}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 1, "creation_date": 1563944830, "post_id": 57175585, "comment_id": 100863262, "body": "While scanning strings we don&#39;t use <code>&amp;</code> because <code>word</code> also means <code>&amp;word[0]</code> or <code>&amp;word</code>, i.e. start address of the char array"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1563946026, "post_id": 57175585, "comment_id": 100863596, "body": "Possible duplicate <a href=\"https://stackoverflow.com/questions/1461432/what-is-array-decaying\" title=\"what is array decaying\">stackoverflow.com/questions/1461432/what-is-array-decaying</a>"}], "answers": [{"tags": [], "owner": {"reputation": 545, "user_id": 6024604, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/TkOtR.jpg?s=128&g=1", "display_name": "rohit prakash", "link": "https://stackoverflow.com/users/6024604/rohit-prakash"}, "is_accepted": false, "score": 0, "last_activity_date": 1566575167, "last_edit_date": 1566575167, "creation_date": 1563944890, "answer_id": 57175613, "question_id": 57175585, "link": "https://stackoverflow.com/questions/57175585/why-does-scanf-require-when-scanning-integers-but-not-when-scanning-string/57175613#57175613", "title": "Why does scanf require &amp; when scanning integers but not when scanning string?", "body": "<p><strong>The name of an array represent the address of array in c.</strong>\n<br> In C string is array of characters so it by default giving address of string<br>In case of int we use &amp; for address of variable </p>\n\n<p>follow this link <a href=\"http://www.c4learn.com/c-programming/mcq/array-name-is-base-address/\" rel=\"nofollow noreferrer\">http://www.c4learn.com/c-programming/mcq/array-name-is-base-address/</a></p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 11628900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tdFOPjTPPpk/AAAAAAAAAAI/AAAAAAAAIv4/6CP60IuWgVI/photo.jpg?sz=128", "display_name": "sai krishna", "link": "https://stackoverflow.com/users/11628900/sai-krishna"}, "is_accepted": false, "score": 1, "last_activity_date": 1563946131, "creation_date": 1563946131, "answer_id": 57175834, "question_id": 57175585, "link": "https://stackoverflow.com/questions/57175585/why-does-scanf-require-when-scanning-integers-but-not-when-scanning-string/57175834#57175834", "title": "Why does scanf require &amp; when scanning integers but not when scanning string?", "body": "<p><code>&amp;</code> is used to get the address of the variable. C does not have a string type, String is just an array of characters and an array variable stores the address of the first index location.\n    By default the variable itself points to the base address and therefore to access base address of string, there is no need of adding an extra <code>&amp;</code></p>\n\n<p>source : geeksforgeeks</p>\n"}, {"tags": [], "owner": {"reputation": 2695, "user_id": 11175375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbefa83cbfe6c423d6a0569dac0c2c14?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/11175375/adam"}, "is_accepted": false, "score": 1, "last_activity_date": 1563946520, "last_edit_date": 1563946520, "creation_date": 1563946163, "answer_id": 57175838, "question_id": 57175585, "link": "https://stackoverflow.com/questions/57175585/why-does-scanf-require-when-scanning-integers-but-not-when-scanning-string/57175838#57175838", "title": "Why does scanf require &amp; when scanning integers but not when scanning string?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    char word[256];\n\n    printf(\"%p \\n\", word);\n    // 0x7ffeefbff450\n\n    printf(\"%p \\n\", &amp;word[0]);\n    // 0x7ffeefbff450\n\n    // Wrong\n    printf(\"%p \\n\", &amp;(&amp;word[0]));\n    // Meaningless to ask the address of an address\n\n    return 0;\n}\n</code></pre>\n\n<p>For a given array </p>\n\n<pre><code>char word[256]\n</code></pre>\n\n<p>The name <code>word</code> is equivalent to the address of the <strong>first element</strong> in the array </p>\n\n<blockquote>\n  <p>First element in array word is <code>word[0]</code>, its address is <code>&amp;word[0]</code></p>\n</blockquote>\n\n<pre><code>word == &amp;word[0] ----&gt; &amp;word == &amp;(&amp;word[0])----&gt; Undefined \n</code></pre>\n\n<blockquote>\n  <p><code>&amp;</code> is applied only to <strong>variable name</strong>, <strong><em>not to variable address</em></strong></p>\n</blockquote>\n\n<pre><code>int number;\nscanf(\"%d\",&amp;number);\n</code></pre>\n\n<p><code>number</code> is not an array, so <code>number</code> is the name of a variable not an address</p>\n\n<p>To get the address of the variable <code>number</code>, do <code>&amp;number</code></p>\n\n<blockquote>\n  <p>will <code>&amp;(&amp;number)</code> make sense to you?</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 11814215, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0OslUhIscIk/AAAAAAAAAAI/AAAAAAAAEMo/WW117ICPoNI/photo.jpg?sz=128", "display_name": "Bhakti Raman Das", "link": "https://stackoverflow.com/users/11814215/bhakti-raman-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1563951164, "creation_date": 1563951164, "answer_id": 57176887, "question_id": 57175585, "link": "https://stackoverflow.com/questions/57175585/why-does-scanf-require-when-scanning-integers-but-not-when-scanning-string/57176887#57176887", "title": "Why does scanf require &amp; when scanning integers but not when scanning string?", "body": "<p>because when we take input in an integer 'a', it is the name of the pocket generated and its address is something else. we need to point to that address where the input value should be stored.</p>\n\n<pre><code>&amp; is the address operator in C, which tells the compiler to change the \nreal value of this variable, stored at this address in the memory.\n</code></pre>\n\n<p>but in case of string / array of character, it already pointing to the first location.</p>\n\n<p>so, you can get the value of its any pocket, it will add \n(size of its datatype * pocket id)\nlike- str[4] we want to access then it will go to access to address of str + 1*4\nand it will give 5th character of the string.</p>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 11676729, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8yrX-V0vL6c/AAAAAAAAAAI/AAAAAAAAAA0/1jjl9FkM2eA/photo.jpg?sz=128", "display_name": "Samuel Schwienbacher", "link": "https://stackoverflow.com/users/11676729/samuel-schwienbacher"}, "is_accepted": false, "score": 0, "last_activity_date": 1563952312, "creation_date": 1563952312, "answer_id": 57177176, "question_id": 57175585, "link": "https://stackoverflow.com/questions/57175585/why-does-scanf-require-when-scanning-integers-but-not-when-scanning-string/57177176#57177176", "title": "Why does scanf require &amp; when scanning integers but not when scanning string?", "body": "<p>A String in C is basically a pointer to the first Entry of the char-Array, so by giving the function the string, you are already giving it a pointer wich it needs, if you do &amp;String your trying to give it a pointer to the pointer to the Beginning of the String.</p>\n"}], "owner": {"reputation": 7, "user_id": 11778727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c309fefc94ec3d17c3a171f5a4cc3d01?s=128&d=identicon&r=PG&f=1", "display_name": "meowththatsright", "link": "https://stackoverflow.com/users/11778727/meowththatsright"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "answer_count": 5, "score": -1, "last_activity_date": 1566575167, "creation_date": 1563944647, "last_edit_date": 1563944761, "question_id": 57175585, "link": "https://stackoverflow.com/questions/57175585/why-does-scanf-require-when-scanning-integers-but-not-when-scanning-string", "title": "Why does scanf require &amp; when scanning integers but not when scanning string?", "body": "<p>When I use scanf for getting an integer I have to use the address operator <code>&amp;</code></p>\n\n<pre><code>int number;\nscanf(\"%d\",&amp;number);\n</code></pre>\n\n<p>However this does not work with scanning strings.</p>\n\n<pre><code>char word[256];\nscanf(\"%s\",word);\n</code></pre>\n\n<p>has to be used. It does not work when I use the &amp; operator. Why is this.</p>\n"}, {"tags": ["c", "linux"], "owner": {"reputation": 25, "user_id": 4485613, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-5b9d5dXeu44/AAAAAAAAAAI/AAAAAAAAAYI/gWrI-fLL3co/photo.jpg?sz=128", "display_name": "vikas shinde", "link": "https://stackoverflow.com/users/4485613/vikas-shinde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563943364, "creation_date": 1563943364, "question_id": 57175402, "link": "https://stackoverflow.com/questions/57175402/multiple-thread-signal-handling", "title": "multiple thread signal handling", "body": "<p>I have above code for debugging what happens when we do signal masking for different threads. What i see in this code is that the first thread being masked for USR2 gets the whole process terminated.</p>\n\n<p>It will be great if some on help me why this happens and how can we handle different signals in different threads using pthread_sigmask.</p>\n\n<p>I tried to create a thread from main function with some signal masks and then created a new thread from the current thread with removing some signal masks. Even i tried adding extra signal mask for new thread still the program terminates.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;errno.h&gt;\n\n/* Simple error handling functions */\n\n#define handle_error_en(en, msg) \\\ndo { errno = en; perror(msg); exit(EXIT_FAILURE); } while (0)\n\nstatic void *\nsig_thread_1(void *arg)\n{\n    sigset_t *set = arg;\n    int s, sig;\nprintf(\"%p created\\n\",pthread_self() );\n        printf(\"after new set %s SIGUSR1\\n\",sigismember(set,SIGUSR1)==0?\"is not\":\"is\" );\n        printf(\"after new set %s SIGUSR2\\n\",sigismember(set,SIGUSR2)==0?\"is not\":\"is\" );\n        printf(\"after new set %s SIGRTMIN\\n\",sigismember(set,SIGRTMIN)==0?\"is not\":\"is\" );\n        printf(\"after new set %s SIGQUIT\\n\",sigismember(set,SIGQUIT)==0?\"is not\":\"is\" );\n\n    for (;;) {\n        s = sigwait(set, &amp;sig);\n        if (s != 0)\n            handle_error_en(s, \"sigwait\");\n        printf(\"Signal handling %lu thread got signal %d\\n\",pthread_self(), sig);\n    }\n}\n\nstatic void *\nsig_thread(void *arg)\n{\n    sigset_t *set = arg;\n    int s, sig;\n        sigset_t set1=*set;\n        pthread_t thread1;\n    //  sigemptyset(&amp;set1);\n        sigdelset(&amp;set1, SIGQUIT);\n        sigdelset(&amp;set1, SIGUSR1);\n        printf(\"%p created\\n\",pthread_self() );\n                printf(\"after old set %s SIGUSR1\\n\",sigismember(set,SIGUSR1)==0?\"is not\":\"is\" );\n        printf(\"after old set %s SIGUSR2\\n\",sigismember(set,SIGUSR2)==0?\"is not\":\"is\" );\n        printf(\"after old set %s SIGRTMIN\\n\",sigismember(set,SIGRTMIN)==0?\"is not\":\"is\" );\n        printf(\"after old set %s SIGQUIT\\n\",sigismember(set,SIGQUIT)==0?\"is not\":\"is\" );\n        s = pthread_sigmask(SIG_UNBLOCK, &amp;set1, NULL);\n        if (s != 0)\n            handle_error_en(s, \"pthread_sigmask\");\n\n        s = pthread_create(&amp;thread1, NULL, &amp;sig_thread_1, (void *) &amp;set1);\n        if (s != 0)\n            handle_error_en(s, \"pthread_create fail\");\n\n\n        printf(\"after old set1 %s SIGUSR1\\n\",sigismember(&amp;set1,SIGUSR1)==0?\"is not\":\"is\" );\n        printf(\"after old set1 %s SIGUSR2\\n\",sigismember(&amp;set1,SIGUSR2)==0?\"is not\":\"is\" );\n        printf(\"after old set1 %s SIGRTMIN\\n\",sigismember(&amp;set1,SIGRTMIN)==0?\"is not\":\"is\" );\n        printf(\"after old set1 %s SIGQUIT\\n\",sigismember(&amp;set1,SIGQUIT)==0?\"is not\":\"is\" );\n    //  return;\n    for (;;) {\n                printf(\"after old set %s SIGUSR1\\n\",sigismember(set,SIGUSR1)==0?\"is not\":\"is\" );\n        printf(\"after old set %s SIGUSR2\\n\",sigismember(set,SIGUSR2)==0?\"is not\":\"is\" );\n        printf(\"after old set %s SIGRTMIN\\n\",sigismember(set,SIGRTMIN)==0?\"is not\":\"is\" );\n        printf(\"after old set %s SIGQUIT\\n\",sigismember(set,SIGQUIT)==0?\"is not\":\"is\" );\n        s = sigwait(set, &amp;sig);\n        if (s != 0)\n            handle_error_en(s, \"sigwait\");\n        printf(\"Signal handling %lu thread got signal %d\\n\",pthread_self(), sig);\n    }\n}\n\nint\nmain(int argc, char *argv[])\n{\n    pthread_t thread;\n    pthread_t thread1;\n    sigset_t set;\n    int s;\n\n   /* Block SIGQUIT and SIGUSR1; other threads created by main()\n       will inherit a copy of the signal mask. */\n\n    sigemptyset(&amp;set);\n    sigaddset(&amp;set, SIGQUIT);\n    sigaddset(&amp;set, SIGUSR1);\n    sigaddset(&amp;set, SIGUSR2);\n    sigaddset(&amp;set, SIGRTMIN);\n    s = pthread_sigmask(SIG_BLOCK, &amp;set, NULL);\n    if (s != 0)\n        handle_error_en(s, \"pthread_sigmask\");\n    s = pthread_create(&amp;thread, NULL, &amp;sig_thread, (void *) &amp;set);\n    if (s != 0)\n        handle_error_en(s, \"pthread_create fail\");\n\n   /* Main thread carries on to create other threads and/or do\n       other work */\n\n   pause();            /* Dummy pause so we can test program */\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "pthreads", "pthread-join"], "answers": [{"tags": [], "owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "is_accepted": true, "score": 3, "last_activity_date": 1563946049, "last_edit_date": 1563946049, "creation_date": 1563944173, "answer_id": 57175523, "question_id": 57175365, "link": "https://stackoverflow.com/questions/57175365/what-is-the-purpose-of-argument-in-pthread-exit/57175523#57175523", "title": "What is the Purpose of argument in pthread_exit?", "body": "<p><code>pthread_exit()</code> takes the pointer value you pass it and arranges for the pointer value to be returned into the <code>void *</code> variable whose address is passed to <code>pthread_join()</code>.</p>\n\n<p>In your case, this means that the value passed to <code>pthread_exit()</code> will end up in the <code>status</code> variable in <code>main()</code>.  You never print the contents of <code>status</code> - all you do is test it against <code>NULL</code> in the <code>if ()</code> condition.  The value you are printing is the value stored in <code>result</code>, which is not modified by the <code>pthread_exit()</code> or <code>pthread_join()</code>, so of course it will always be the same.</p>\n\n<p>In your <code>my_thread()</code> function, the pointer <code>result</code> is always going to be the address of the <code>result</code> variable in <code>main()</code>, so these are the cases you will see:</p>\n\n<pre><code>pthread_exit(result);      // Exit 1\n</code></pre>\n\n<p>In <code>main()</code>, <code>status</code> will end up equal to <code>(void *)&amp;result</code>, which is necessarily non-NULL, so the test succeeds.  It then prints the value of <code>result</code>, which was set to <code>42</code> by the first line of <code>my_thread()</code>.</p>\n\n<pre><code>pthread_exit((void *)10);  // Exit 2\n</code></pre>\n\n<p>In <code>main()</code>, <code>status</code> will end up equal to <code>(void *)10</code>.  On any common implementation of C, this value will compare unequal to <code>NULL</code>, so the test succeeds.  It then prints the value of <code>result</code>, which was set to <code>42</code> by the first line of <code>my_thread()</code>.</p>\n\n<pre><code>pthread_exit(0);           // Exit 3\n</code></pre>\n\n<p>In <code>main()</code>, <code>status</code> will end up equal to <code>(void *)0</code>.  This necessarily compares equal to <code>NULL</code>, so the test fails.  It then prints \"thread failed\".</p>\n\n<p>If you print the value of the <code>status</code> pointer with:</p>\n\n<pre><code>printf(\"status = %p\\n\", status);\n</code></pre>\n\n<p>before the <code>if()</code>, you will be able to see how the value passed to <code>pthread_exit()</code> is returned.</p>\n"}], "owner": {"reputation": 105, "user_id": 7669976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8963eca25315a334113dafbbe50f53c?s=128&d=identicon&r=PG&f=1", "display_name": "Cliff", "link": "https://stackoverflow.com/users/7669976/cliff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 822, "favorite_count": 0, "accepted_answer_id": 57175523, "answer_count": 1, "score": -1, "last_activity_date": 1563946049, "creation_date": 1563943148, "last_edit_date": 1563944032, "question_id": 57175365, "link": "https://stackoverflow.com/questions/57175365/what-is-the-purpose-of-argument-in-pthread-exit", "title": "What is the Purpose of argument in pthread_exit?", "body": "<p>basically, I am trying to understand the real purpose of pthread_exit.\n  As you can see, there are multiple pthread_exit code I have tried. \n    And Following are the result i observe :</p>\n\n<pre><code>- Exit 1: 42\n- Exit 2: 42\n- Exit 3: thread failed\n- Exit 4: error\n- Exit 5: 42\n- Without a pthread_exit statement: 42\n</code></pre>\n\n<p>Anyways the value passed(10) to pthread_exit is ignored(Exit 2) and prints the value which we modified via the pointer(42). \nSo what is the real purpose of argument of pthread_exit here? confusing.</p>\n\n<pre><code>int a;\nvoid *myThread(void *result)\n{\n       int a = 5;\n        *((int*)result) = 42;\n        pthread_exit(result);      // Exit 1\n      //pthread_exit((void *)10);  // Exit 2\n      //pthread_exit(0);           // Exit 3\n      //pthread_exit();            // Exit 4\n      //pthread_exit((void *)&amp;a);  // Exit 5\n}\nint main()\n{\n   pthread_t tid;\n   void *status = 0;\n   int result;\n\n   pthread_create(&amp;tid, NULL, myThread, &amp;result);\n   pthread_join(tid, &amp;status);\n\n   if (status != 0 ) {\n       printf(\"%d\\n\",result);\n   } else {\n       printf(\"thread failed\\n\");\n   }\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm", "data-structures"], "comments": [{"owner": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "edited": false, "score": 2, "creation_date": 1563942822, "post_id": 57175298, "comment_id": 100862718, "body": "Don&#39;t tag it c++."}, {"owner": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "edited": false, "score": 0, "creation_date": 1563943407, "post_id": 57175298, "comment_id": 100862861, "body": "@Abhineet Without a language tag, I assume you&#39;re looking for pseudocode? (i.e. your question is language agnostic?) I thought the [c] tag was appropriate."}, {"owner": {"reputation": 65, "user_id": 11640471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JI9pxtV88Yc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHWPqV03kI8j3XeEMsVYUWJmwE3A/mo/photo.jpg?sz=128", "display_name": "ABHINEET SINGH", "link": "https://stackoverflow.com/users/11640471/abhineet-singh"}, "edited": false, "score": 0, "creation_date": 1563943713, "post_id": 57175298, "comment_id": 100862930, "body": "yes, just the pseudocode will do."}, {"owner": {"reputation": 65, "user_id": 11640471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JI9pxtV88Yc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHWPqV03kI8j3XeEMsVYUWJmwE3A/mo/photo.jpg?sz=128", "display_name": "ABHINEET SINGH", "link": "https://stackoverflow.com/users/11640471/abhineet-singh"}, "edited": false, "score": 0, "creation_date": 1563943791, "post_id": 57175298, "comment_id": 100862953, "body": "actually, i tagged it c,c++ but someone suggested to not tag it c++, so i removed"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1563986664, "post_id": 57175298, "comment_id": 100885497, "body": "How did you get 10^10?  If you concatenate two strings of size 10^5, then you have a string of 2*(10^5), or 200000."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 11640471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JI9pxtV88Yc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHWPqV03kI8j3XeEMsVYUWJmwE3A/mo/photo.jpg?sz=128", "display_name": "ABHINEET SINGH", "link": "https://stackoverflow.com/users/11640471/abhineet-singh"}, "edited": false, "score": 0, "creation_date": 1563944027, "post_id": 57175461, "comment_id": 100863011, "body": "actually the problem was to find all the rotations of the string where the left half of the string had more number of vowels than the right. eg if the string was &quot;abcd&quot;, the expected output would be 2 as abcd and dabc are the two strings. and length of the input string is always even"}, {"owner": {"reputation": 192, "user_id": 2244399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8903eeeaf5be9e569b669b01aff1d0b6?s=128&d=identicon&r=PG", "display_name": "Aisultan", "link": "https://stackoverflow.com/users/2244399/aisultan"}, "reply_to_user": {"reputation": 65, "user_id": 11640471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JI9pxtV88Yc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHWPqV03kI8j3XeEMsVYUWJmwE3A/mo/photo.jpg?sz=128", "display_name": "ABHINEET SINGH", "link": "https://stackoverflow.com/users/11640471/abhineet-singh"}, "edited": false, "score": 0, "creation_date": 1563944183, "post_id": 57175461, "comment_id": 100863063, "body": "It means that the problem is to find out the number of rotations in a numeric string, where the number of even numbers on the first half is greater than on the second?"}, {"owner": {"reputation": 65, "user_id": 11640471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JI9pxtV88Yc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHWPqV03kI8j3XeEMsVYUWJmwE3A/mo/photo.jpg?sz=128", "display_name": "ABHINEET SINGH", "link": "https://stackoverflow.com/users/11640471/abhineet-singh"}, "edited": false, "score": 0, "creation_date": 1563944340, "post_id": 57175461, "comment_id": 100863116, "body": "yes, can be even numbers for numeric strings or number of vowels for alphabetical strings, anything will do"}, {"owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "reply_to_user": {"reputation": 65, "user_id": 11640471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JI9pxtV88Yc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHWPqV03kI8j3XeEMsVYUWJmwE3A/mo/photo.jpg?sz=128", "display_name": "ABHINEET SINGH", "link": "https://stackoverflow.com/users/11640471/abhineet-singh"}, "edited": false, "score": 0, "creation_date": 1563948842, "post_id": 57175461, "comment_id": 100864634, "body": "@ABHINEET SINGH It is worth to ask about actual problem to avoid <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>. (Showing own approach and thoughts is nice)"}], "tags": [], "owner": {"reputation": 192, "user_id": 2244399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8903eeeaf5be9e569b669b01aff1d0b6?s=128&d=identicon&r=PG", "display_name": "Aisultan", "link": "https://stackoverflow.com/users/2244399/aisultan"}, "is_accepted": false, "score": 2, "last_activity_date": 1563943803, "creation_date": 1563943803, "answer_id": 57175461, "question_id": 57175298, "link": "https://stackoverflow.com/questions/57175298/want-to-print-all-the-rotations-of-a-string/57175461#57175461", "title": "want to print all the rotations of a string", "body": "<p>You can do it, even without concatenation. But why do you need it? It will be better if you provide an actual problem source.</p>\n\n<pre><code>void printRotatedString(char str[]) { \n    int n = strlen(str); \n\n    for (int i = 0; i &lt; n; i++) {\n        for (int j = 0; j &lt; n; j++) \n            printf(\"%c\", str[(i + j) % n]); \n        printf(\"\\n\"); \n    }\n} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 11640471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JI9pxtV88Yc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHWPqV03kI8j3XeEMsVYUWJmwE3A/mo/photo.jpg?sz=128", "display_name": "ABHINEET SINGH", "link": "https://stackoverflow.com/users/11640471/abhineet-singh"}, "edited": false, "score": 0, "creation_date": 1563946124, "post_id": 57175775, "comment_id": 100863632, "body": "can you explain it for string &#39;1235&#39; in brief, just the logic part"}, {"owner": {"reputation": 192, "user_id": 2244399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8903eeeaf5be9e569b669b01aff1d0b6?s=128&d=identicon&r=PG", "display_name": "Aisultan", "link": "https://stackoverflow.com/users/2244399/aisultan"}, "reply_to_user": {"reputation": 65, "user_id": 11640471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JI9pxtV88Yc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHWPqV03kI8j3XeEMsVYUWJmwE3A/mo/photo.jpg?sz=128", "display_name": "ABHINEET SINGH", "link": "https://stackoverflow.com/users/11640471/abhineet-singh"}, "edited": false, "score": 0, "creation_date": 1563946534, "post_id": 57175775, "comment_id": 100863761, "body": "Let&#39;s take string &#39;1235&#39;, Here we can see that we have only one even number. Let&#39;s calculate c array which would be: 0 1 1 1 for &#39;1235&#39; string. For &#39;12351235&#39; it would be: 0 1 1 1 1 2 2 2. If we will take every substring of our concatenated string, it would be on of rotations of our original string, isn&#39;t it? Having array c, we can find out number of evens in substring for O(1), just substracting from end the beginning."}, {"owner": {"reputation": 192, "user_id": 2244399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8903eeeaf5be9e569b669b01aff1d0b6?s=128&d=identicon&r=PG", "display_name": "Aisultan", "link": "https://stackoverflow.com/users/2244399/aisultan"}, "reply_to_user": {"reputation": 65, "user_id": 11640471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JI9pxtV88Yc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHWPqV03kI8j3XeEMsVYUWJmwE3A/mo/photo.jpg?sz=128", "display_name": "ABHINEET SINGH", "link": "https://stackoverflow.com/users/11640471/abhineet-singh"}, "edited": false, "score": 0, "creation_date": 1563946801, "post_id": 57175775, "comment_id": 100863846, "body": "Basically, prefix sums are used for finding sum in subarray. f.e. we have an array with elements: <code>[1, 3, 4, 5]</code>, prefix sum would be <code>[1, 4, 8, 13]</code>. To get sum of inteval [2, 3] we can subtract c[1] from c[3], it means that we have <code>c[3] = a[1] + a[2] + a[3]</code>, and  c[1] which is equal to a[1]. <code>c[3] - c[1] = (a[1] + a[2] + a[3]) - (a[1]) =a[2] + a[3]</code> which is our sum in interval [2, 3]"}, {"owner": {"reputation": 65, "user_id": 11640471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JI9pxtV88Yc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHWPqV03kI8j3XeEMsVYUWJmwE3A/mo/photo.jpg?sz=128", "display_name": "ABHINEET SINGH", "link": "https://stackoverflow.com/users/11640471/abhineet-singh"}, "edited": false, "score": 0, "creation_date": 1563947254, "post_id": 57175775, "comment_id": 100864013, "body": "but bro, it will give answer as 6 for &#39;246333&#39;. when the answer should be 3. 246333,463332,324633, plz check once"}, {"owner": {"reputation": 192, "user_id": 2244399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8903eeeaf5be9e569b669b01aff1d0b6?s=128&d=identicon&r=PG", "display_name": "Aisultan", "link": "https://stackoverflow.com/users/2244399/aisultan"}, "reply_to_user": {"reputation": 65, "user_id": 11640471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JI9pxtV88Yc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHWPqV03kI8j3XeEMsVYUWJmwE3A/mo/photo.jpg?sz=128", "display_name": "ABHINEET SINGH", "link": "https://stackoverflow.com/users/11640471/abhineet-singh"}, "edited": false, "score": 0, "creation_date": 1563947473, "post_id": 57175775, "comment_id": 100864086, "body": "sorry, my bad, just change the sign <code>&lt;</code> to <code>&gt;</code>. I have updated the code."}, {"owner": {"reputation": 65, "user_id": 11640471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JI9pxtV88Yc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHWPqV03kI8j3XeEMsVYUWJmwE3A/mo/photo.jpg?sz=128", "display_name": "ABHINEET SINGH", "link": "https://stackoverflow.com/users/11640471/abhineet-singh"}, "edited": false, "score": 0, "creation_date": 1563947766, "post_id": 57175775, "comment_id": 100864209, "body": "and what if the input size is 10^5, will it work 10^10 array"}, {"owner": {"reputation": 192, "user_id": 2244399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8903eeeaf5be9e569b669b01aff1d0b6?s=128&d=identicon&r=PG", "display_name": "Aisultan", "link": "https://stackoverflow.com/users/2244399/aisultan"}, "reply_to_user": {"reputation": 65, "user_id": 11640471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JI9pxtV88Yc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHWPqV03kI8j3XeEMsVYUWJmwE3A/mo/photo.jpg?sz=128", "display_name": "ABHINEET SINGH", "link": "https://stackoverflow.com/users/11640471/abhineet-singh"}, "edited": false, "score": 0, "creation_date": 1563947949, "post_id": 57175775, "comment_id": 100864276, "body": "Nope, it will work in linear time - <code>O(N)</code>. We are just looping from 1 to <code>N + N</code>."}], "tags": [], "owner": {"reputation": 192, "user_id": 2244399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8903eeeaf5be9e569b669b01aff1d0b6?s=128&d=identicon&r=PG", "display_name": "Aisultan", "link": "https://stackoverflow.com/users/2244399/aisultan"}, "is_accepted": true, "score": 0, "last_activity_date": 1563947437, "last_edit_date": 1563947437, "creation_date": 1563945840, "answer_id": 57175775, "question_id": 57175298, "link": "https://stackoverflow.com/questions/57175298/want-to-print-all-the-rotations-of-a-string/57175775#57175775", "title": "want to print all the rotations of a string", "body": "<p>We can come up with another solution using prefix sums. Let's calculate array c where c[i] = the number of letters in our string which are even(or another boolean function) from the beginning. We can calculate it easily if we know <code>c[i - 1]</code>, <code>c[i]</code> would be <code>c[i - 1] + 1</code> if i-th letter is even, <code>c[i] = c[i - 1]</code> otherwise.</p>\n\n<p>So let's use the same idea, let's concatenate our string on its own. And then try to check every substring length of our input string. Having prefix sums, we can easily check if the left-hand side has more even elements than the right-hand side.</p>\n\n<p>Here is the solution code:</p>\n\n<pre><code>int c[100500];\n\nint isEven(char c) {\n    return c % 2 == 0;\n}\n\nint solve(char str[]) { \n    int n = strlen(str);\n\n    char temp[2*n + 1]; \n    strcpy(temp, str); \n    strcat(temp, str); \n\n    for (int i = 0; i &lt; n + n; i++) {\n        c[i + 1] = c[i] + isEven(temp[i]);\n    }\n\n    int counter = 0;\n\n    for (int i = 1; i + n &lt;= n + n; ++i) {\n        int l = i, r = i + n - 1;\n        int mid = i + n / 2;\n        int leftSide = c[mid - 1] - c[l - 1];\n        int rightSide = c[r] - c[mid - 1];\n\n        if (leftSide &gt; rightSide) {\n            ++counter;\n        }\n    }\n\n    return counter;\n} \n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 11640471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JI9pxtV88Yc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHWPqV03kI8j3XeEMsVYUWJmwE3A/mo/photo.jpg?sz=128", "display_name": "ABHINEET SINGH", "link": "https://stackoverflow.com/users/11640471/abhineet-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 57175775, "answer_count": 2, "score": 0, "last_activity_date": 1563960090, "creation_date": 1563942709, "last_edit_date": 1563960090, "question_id": 57175298, "link": "https://stackoverflow.com/questions/57175298/want-to-print-all-the-rotations-of-a-string", "title": "want to print all the rotations of a string", "body": "<p>i want to rotate the string one place at a time and print all the rotations\nInput : S = \"abc\" \nOutput : abc\n         bca\n         cab</p>\n\n<p>im trying to concatenate the string and then printing it, but the problem is input string can be of size 10^5 so my array would require to be of 10^10 size.\nbut im unable to declare that size array, so i wanted a to know if there is a better way to do it</p>\n\n<pre><code>void printRotatedString(char str[]) \n{ \n    int n = strlen(str); \n\n    // Concatenate str with itself \n    char temp[2*n + 1]; \n    strcpy(temp, str); \n    strcat(temp, str); \n\n    // Print all substrings of size n. \n\n    for (int i = 0; i &lt; n; i++) \n    { \n        for (int j=0; j != n; j++) \n            printf(\"%c\",temp[i + j]); \n        printf(\"\\n\"); \n    } \n} \n</code></pre>\n\n<p>i expect it to work even for 10^5 sized strings</p>\n"}, {"tags": ["c", "pointers", "getline", "readlines"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1563940082, "post_id": 57174653, "comment_id": 100862150, "body": "The book teaches programming. It shows there how a rudimentary string allocation function could be written. Not everything makes sense by itself"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10988119"}, "edited": false, "score": 0, "creation_date": 1563944918, "post_id": 57175108, "comment_id": 100863276, "body": "You were right. I tried it and line is always the same address... so this is why we have pointers. :)"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1563941262, "creation_date": 1563941262, "answer_id": 57175108, "question_id": 57174653, "link": "https://stackoverflow.com/questions/57174653/why-does-readlines-function-use-alloc/57175108#57175108", "title": "Why does readlines function use alloc?", "body": "<blockquote>\n  <p>So I don't understand the purpose of using alloc function here.</p>\n</blockquote>\n\n<p>If you're going to read more than one line, you're going to need more than one buffer to put those lines into. It makes sense to allocate buffers that are precisely the right size once the size is known rather than allocate a large number of large buffers.</p>\n\n<blockquote>\n  <p>It seems like readlines will work just fine without using alloc and strcpy line into p.</p>\n</blockquote>\n\n<p>That can't work. Until we do something like <code>p=alloc(len)</code>, <code>p</code> doesn't point to any buffer we can copy the line into. So how will we get the line there?</p>\n\n<blockquote>\n  <p>It could be just likneptr[nlines++]=line; What is the purpose of using alloc?</p>\n</blockquote>\n\n<p>That would do no good. That would set every entry in <code>likneptr[nlines++]</code> to the same value, the address of <code>line</code>. Each line would overwrite the previous line. We need a <em>new</em> buffer for each line to go in that doesn't overwrite the buffer the previous line was held in. That requires more than one buffer.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10988119"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563941262, "creation_date": 1563937537, "last_edit_date": 1563941025, "question_id": 57174653, "link": "https://stackoverflow.com/questions/57174653/why-does-readlines-function-use-alloc", "title": "Why does readlines function use alloc?", "body": "<p>This code is from K&amp;R C Programming page 109.\ngetline function is already limited by MAXLEN.\nSo it is obvious line returned by getline has limited size.\nBut the program puts line in the static storage allocator 'alloc' and fills it up with each lines until 10000 buffer is full.\nBut then, main() also has MAXLINES that readlines can return defined as 5000 (in the book). So I don't understand the purpose of using alloc function here.\nIt seems like readlines will work just fine without using alloc and strcpy line into p. It could be just <code>likneptr[nlines++]=line;</code>\nWhat is the purpose of using alloc?</p>\n\n<pre><code>int readlines(char *lineptr[], int MAXLINE)\n{\n    int len, nlines;\n    char line[MAXLEN];\n    char *p;\n    nlines = 0;\n\n    while((len=getline(line,MAXLEN))&gt;0)\n        if ((nlines &gt; MAXLINE)||(p=alloc(len))==NULL)\n            return -1;      \n        else {\n            line[len - 1] = '\\0';\n            strcpy(p, line);\n            lineptr[nlines++] = p;\n        }\n    return nlines;\n}\n\n#define ALLOCSIZE 10000\nstatic char allocbuf[ALLOCSIZE];\nstatic char *allocp = allocbuf;\n\nchar *alloc(int n)\n{\n    if (allocbuf + ALLOCSIZE - allocp &gt;= n) {\n        allocp += n;\n        return allocp - n;\n    }\n    else return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "cairo", "pixman"], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 4677917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea37ed56d2c80b91890d64568e7943d?s=128&d=identicon&r=PG", "display_name": "AntumDeluge", "link": "https://stackoverflow.com/users/4677917/antumdeluge"}, "is_accepted": true, "score": 1, "last_activity_date": 1563949191, "creation_date": 1563949191, "answer_id": 57176425, "question_id": 57174399, "link": "https://stackoverflow.com/questions/57174399/static-libpixman-1-a-linking-errors-on-windows/57176425#57176425", "title": "Static libpixman-1.a Linking Errors on Windows", "body": "<p>Building pixman library with MMX, SSE2, &amp; SSSE3 optimizations disabled fixes the problem &amp; allows me to build static only cairo library:</p>\n\n<pre><code>meson --buildtype plain -Ddefault_library=static -Dgtk=disabled -Dmmx=disabled -Dsse2=disabled \\\n    -Dssse3=disabled ../pixman-0.38.4\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 4677917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea37ed56d2c80b91890d64568e7943d?s=128&d=identicon&r=PG", "display_name": "AntumDeluge", "link": "https://stackoverflow.com/users/4677917/antumdeluge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 57176425, "answer_count": 1, "score": 0, "last_activity_date": 1563949191, "creation_date": 1563935118, "last_edit_date": 1563938754, "question_id": 57174399, "link": "https://stackoverflow.com/questions/57174399/static-libpixman-1-a-linking-errors-on-windows", "title": "Static libpixman-1.a Linking Errors on Windows", "body": "<p>I am trying to build a static <a href=\"https://www.cairographics.org/\" rel=\"nofollow noreferrer\">Cairo library</a> on Windows under <a href=\"https://www.msys2.org/\" rel=\"nofollow noreferrer\">MSYS2/MinGW-w64</a> &amp; am having trouble linking to <code>libpixman-1.a</code> static library. The linker errors are as follows:</p>\n\n<pre><code>...\nlibtool: link: ranlib .libs/libcairoboilerplate.a\nC:/Development/MSYS2/mingw32/lib/libpixman-1.a(pixman-x86.c.obj):(.text+0x204): undefined reference to `_pixman_implementation_create_mmx'\nC:/Development/MSYS2/mingw32/lib/libpixman-1.a(pixman-x86.c.obj):(.text+0x213): undefined reference to `_pixman_implementation_create_sse2'\nC:/Development/MSYS2/mingw32/lib/libpixman-1.a(pixman-x86.c.obj):(.text+0x1b8): undefined reference to `_pixman_implementation_create_ssse3'\n</code></pre>\n\n<p>The issue appears to be directly related to the <code>libpixman-1.a</code> library itself. I've searched the web but have not found any issues concerning the undefined references mentioned above. I have sent messages to <a href=\"https://lists.cairographics.org/cgi-bin/mailman/listinfo/cairo\" rel=\"nofollow noreferrer\">Cairo</a> &amp; <a href=\"https://lists.freedesktop.org/mailman/listinfo/pixman\" rel=\"nofollow noreferrer\">Pixman</a> mailing lists, as the two projects appear to be related. I have also contacted the Cairo project on <a href=\"https://webchat.freenode.net/?channels=#cairo\" rel=\"nofollow noreferrer\">their IRC channel</a>. I am currently still waiting on responses. I have also sent an issue report to the MSYS2 project.</p>\n\n<p>The following is the configuration command that I used for building the static <code>libpixman-1.a</code> library (which uses the <a href=\"https://mesonbuild.com/\" rel=\"nofollow noreferrer\">Meson Build system</a> of which I am not very familiar):</p>\n\n<pre><code>meson --buildtype plain -Ddefault_library=static -Dgtk=disabled ../pixman-0.38.4\n</code></pre>\n\n<p>MSYS2 uses a port of <a href=\"https://wiki.archlinux.org/index.php/Arch_Build_System\" rel=\"nofollow noreferrer\">Arch Linux's build system</a> for its package management. The original build configuration &amp; patches for the pixman library can be <a href=\"https://github.com/msys2/MINGW-packages/blob/b80713152cedea8f421b4428c973b9f584734f63/mingw-w64-pixman\" rel=\"nofollow noreferrer\">found here</a>.</p>\n\n<p>Next is the configuration that I am trying to use for building a static cairo library:</p>\n\n<pre><code>CFLAGS+=\" -Wno-implicit-function-declaration\"\n../cairo-1.16.0/configure --prefix=/mingw32 \\\n    --build=x86_64-pc-mingw32 --host=x86_64-pc-mingw32 --enable-win32 --enable-win32-font \\\n    --enable-png --enable-shared=no --enable-static --enable-gobject --enable-tee \\\n    --disable-xlib --disable-xcb --enable-fc --enable-ft --disable-silent-rules \\\n    LIBS=\"-lharfbuzz -lbz2\" ac_cv_prog_GS=${MINGW_PREFIX}/bin/gsc\n</code></pre>\n\n<p>The original build configuration &amp; patches for the cairo library can be <a href=\"https://github.com/msys2/MINGW-packages/blob/b80713152cedea8f421b4428c973b9f584734f63/mingw-w64-cairo\" rel=\"nofollow noreferrer\">found here</a>.</p>\n\n<p>Originally I was also getting undefined references for <a href=\"https://www.freedesktop.org/wiki/Software/HarfBuzz/\" rel=\"nofollow noreferrer\">harfbuzz</a> &amp; <a href=\"http://www.bzip.org/\" rel=\"nofollow noreferrer\">bzip2</a> libraries. But adding explicit links to them (<code>LIBS=\"-lharfbuzz -lbz2\"</code>) solved those issues. Since the linker is already trying to link to <code>libpixman-1.a</code> library, including it in the <code>LIBS</code> variable does not change anything.  And because there is no shared pixman library on my system, using an explicit static link (<code>-l:libpixman-1.a</code>) doesn't help either. I believe I attempted that already, but will try again, just in case.</p>\n\n<p><strong>Edit:</strong> I found the options <code>-Dmmx=disabled -Dsse2=disabled -Dssse3=disabled</code> for building the pixman library &amp; going to try rebuilding. Perhaps those options are only available in the shared version of the library?</p>\n"}, {"tags": ["c", "stm32", "eeprom"], "answers": [{"tags": [], "owner": {"reputation": 6873, "user_id": 5131711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z5oP7.png?s=128&g=1", "display_name": "followed Monica to Codidact", "link": "https://stackoverflow.com/users/5131711/followed-monica-to-codidact"}, "is_accepted": false, "score": 2, "last_activity_date": 1563958612, "creation_date": 1563958612, "answer_id": 57178995, "question_id": 57174245, "link": "https://stackoverflow.com/questions/57174245/how-to-write-and-read-an-i2c-eeprom-using-stm32f100-board/57178995#57178995", "title": "How to write and read an I2C eeprom using stm32f100 board", "body": "<p>This is no init code, but a part of the system-specific code for a software-only (a.k.a. bit-banging) I<sup>2</sup>C driver.</p>\n\n<p>in addition to this, you have to</p>\n\n<ul>\n<li>enable the GPIOB peripheral clock in <code>RCC-&gt;APB2ENR</code></li>\n<li>put both pins in <em>open-drain, general purpose output</em> mode in <code>GPIOB-&gt;CRL</code></li>\n<li>have a <a href=\"https://stackoverflow.com/questions/42246125/how-to-get-time-intervals-on-stm32/42246704#42246704\">delay function</a> for 1/2 of the I<sup>2</sup>C clock cycle time, i.e. if it should be running at 100 kHz, a single cycle takes 10 \u03bcs, you'd need a delay of 5 \u03bcs.</li>\n</ul>\n\n<p>Then it's possible to use <a href=\"https://en.wikipedia.org/wiki/I%C2%B2C#Example_of_bit-banging_the_I%C2%B2C_master_protocol\" rel=\"nofollow noreferrer\">general I<sup>2</sup>C code</a> to communicate with the EEPROM. The communication protocol is described in detail in the <a href=\"https://www.onsemi.com/pub/Collateral/CAT24C512-D.PDF\" rel=\"nofollow noreferrer\">EEPROM datasheet</a>.</p>\n\n<p>It is also possible to use the built in I<sup>2</sup>C peripheral of the STM32F1, but it'd be quite challenging as the first task on this platform for a beginner. Nevertheless, if you'd like to do it, you can <em>study</em> the relevant HAL source code to see how it is done there.</p>\n"}], "owner": {"reputation": 13, "user_id": 9746409, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212249888457544/picture?type=large", "display_name": "Simone Del Gobbo", "link": "https://stackoverflow.com/users/9746409/simone-del-gobbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563958612, "creation_date": 1563933683, "question_id": 57174245, "link": "https://stackoverflow.com/questions/57174245/how-to-write-and-read-an-i2c-eeprom-using-stm32f100-board", "title": "How to write and read an I2C eeprom using stm32f100 board", "body": "<p>I' m working in team on a project using stm32 f100 series board. I should use an external I2C eeprom to storage some data, the eeprom is the following: CAT24C512WI-GT3 and I also have the init code for this I2C eeprom:</p>\n\n<pre><code>void io_ee_scl(char s)\n{\n    if(s)\n        GPIOB-&gt;BSRR=GPIO_PIN_6;\n    else\n        GPIOB-&gt;BRR=GPIO_PIN_6;\n}\n\nvoid io_ee_sda(char s)\n{\n    if(s)\n        GPIOB-&gt;BSRR=GPIO_PIN_7;\n    else\n        GPIOB-&gt;BRR=GPIO_PIN_7;\n\n}\n\nvoid io_ee_wp(char s)\n{\n    if(s)\n        GPIOB-&gt;BSRR=GPIO_PIN_5;\n    else\n        GPIOB-&gt;BRR=GPIO_PIN_5;\n}\nchar read_eeprom()  //read eeprom function\n{\n    return ( (GPIOB-&gt;IDR&amp;GPIO_PIN_7) ? 1 : 0 );\n}\n</code></pre>\n\n<p>On internet the most guide talk about HAL library but as you can see my colleague doesn't use the HAL library and considering I am new in stm32 I don't know how to read and write data on the eeprom.\nSome suggestions?</p>\n"}, {"tags": ["c", "cmake", "qnx"], "comments": [{"owner": {"reputation": 1, "user_id": 11827375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115ad5a137723a76597cba6c91524bad?s=128&d=identicon&r=PG&f=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/11827375/sunny"}, "edited": false, "score": 0, "creation_date": 1563931026, "post_id": 57173995, "comment_id": 100860655, "body": "I have referred  [link] &quot;<a href=\"https://github.com/mapbox/mapbox-gl-native/blob/master/platform/qt/qnx.cmake\" rel=\"nofollow noreferrer\">github.com/mapbox/mapbox-gl-native/blob/master/platform/qt/&zwnj;&#8203;&hellip;</a>&quot; to use qnx.cmake"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1563955921, "post_id": 57173995, "comment_id": 100868016, "body": "CMake tries the exact compiler you set in your toolchain (<code>CMAKE_C_COMPILER</code> variable). If this setting is wrong, then fix your toolchain. You may add <code>message(&quot;C compiler: ${CMAKE_C_COMPILER}&quot;)</code> into your toolchain for verify that you use the correct path."}, {"owner": {"reputation": 1, "user_id": 11827375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115ad5a137723a76597cba6c91524bad?s=128&d=identicon&r=PG&f=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/11827375/sunny"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1564015791, "post_id": 57173995, "comment_id": 100895052, "body": "@Tsyvarev thanks for the reply.I added &quot;message(&quot;C compiler: ${CMAKE_C_COMPILER}&quot;)&quot; into my QNX.cmake then i came to know that compiler path in the tool chain was wrong and the path which i got from  message() is &quot;C compiler: home/mobis/qnx700/host/linux/x86_64/usr/bin/ntox86_64-gcc&quot; After setting the above path also still  i am getting the same error with new path ERROR: <b>--The C compiler identification is unknown CMake Error at CMakeLists.txt:7 (project) The CMAKE_C_COMPILER  home/mobis/qnx700/host/linux/x86_64/usr/bin/ntox86_64-gcc  is not a full path and was not found in the PATH</b>"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1564040650, "post_id": 57173995, "comment_id": 100901986, "body": "Did you forgot the first <code>&#47;</code> character in the path?"}, {"owner": {"reputation": 1, "user_id": 11827375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115ad5a137723a76597cba6c91524bad?s=128&d=identicon&r=PG&f=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/11827375/sunny"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1564101959, "post_id": 57173995, "comment_id": 100929425, "body": "@Tsyvarev shame on me.yes had missed / now it is working.Thank you for the sopport."}], "owner": {"reputation": 1, "user_id": 11827375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115ad5a137723a76597cba6c91524bad?s=128&d=identicon&r=PG&f=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/11827375/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 662, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563955767, "creation_date": 1563930871, "last_edit_date": 1563955767, "question_id": 57173995, "link": "https://stackoverflow.com/questions/57173995/using-qnx-cmake-shows-error-cmake-c-compiler-is-not-a-full-path-to-an-existing", "title": "Using qnx.cmake shows error &quot;CMAKE_C_COMPILER is not a full path to an existing compiler tool.&quot;", "body": "<p>I am using CMake with QNX Momentics. For that I executed the command</p>\n\n<pre><code>cmake -DCMAKE_TOOLCHAIN_FILE=/my-path/qnx.cmake\n</code></pre>\n\n<p>on terminal which shown me the below mentioned error:</p>\n\n<pre><code>ERROR:-\n\"-- The C compiler identification is unknown\nCMake Error at CMakeLists.txt:7 (project):\n  The CMAKE_C_COMPILER:\n    /home/mobis/MTCI/Test/host/linux/x86_64/usr/bin/ntox86_64-gcc\n  is not a full path to an existing compiler tool.\n  Tell CMake where to find the compiler by setting either the environment\n  variable \"CC\" or the CMake cache entry CMAKE_C_COMPILER to the full path to\n  the compiler, or to the compiler name if it is in the PATH.\"\n</code></pre>\n\n<ol>\n<li><p>I have checked for <code>ntox86_64-gcc</code> compiler in my local pc and it is present at <code>/hom/Test/host/linux/x86_64/usr/bin</code> location.</p></li>\n<li><p>I have tried to build by giving compiler path at command line with CMake but it shows same error.</p></li>\n<li><p>Tried below solution even after that same error:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/45140273/cmake-c-compiler-is-not-a-full-path-to-an-existing-compiler-tool\">CMAKE_C_COMPILER is not a full path to an existing compiler tool</a></p>\n\n<pre><code>export CC=/usr/bin/gcc\nexport CXX=/usr/bin/g++\n</code></pre></li>\n</ol>\n\n<p>Please find below my <strong>qnx.cmake</strong>:</p>\n\n<pre><code>set(CMAKE_SYSTEM_NAME QNX)\nset(CMAKE_HOST_SYSTEM_NAME QNX)\nset(CMAKE_SYSTEM_VERSION 7.0.0)\nset(arch ntox86_64)\nset(QNX_PROCESSOR x86_64)\nSET( TOOLCHAIN QNX )\n\n#Check environment variables\nif (\"$ENV{QNX_HOST}\" STREQUAL \"\")\n    message(FATAL_ERROR \"QNX_HOST environment variable not set\")\nendif()\n\nif (\"$ENV{QNX_TARGET}\" STREQUAL \"\")\n    message(FATAL_ERROR \"QNX_TARGET environment variable not set\")\nendif()\n\nset(QNX_HOST \"$ENV{QNX_HOST}\")\nset(QNX_TARGET \"$ENV{QNX_TARGET}\")\nset(CMAKE_C_COMPILER \"${QNX_HOST}/usr/bin/${arch}-gcc\")\nset(CMAKE_CXX_COMPILER \"${QNX_HOST}/usr/bin/nto${QCC_NTOARCH}-g++\")\n\n\nset(CMAKE_C_FLAGS_DEBUG \"-g\")\nset(CMAKE_C_FLAGS_MINSIZEREL \"-Os -DNDEBUG\")\nset(CMAKE_C_FLAGS_RELEASE \"-O3 -DNDEBUG\")\nset(CMAKE_C_FLAGS_RELWITHDEBINFO \"-O2 -g\")\nset(CMAKE_CXX_FLAGS_DEBUG \"-g -D_DEBUG\")\nset(CMAKE_CXX_FLAGS_MINSIZEREL \"-Os -DNDEBUG\")\nset(CMAKE_CXX_FLAGS_RELEASE \"-O3 -DNDEBUG\")\nset(CMAKE_CXX_FLAGS_RELWITHDEBINFO \"-O2 -g\")\n\nset(CMAKE_FIND_ROOT_PATH \"${QNX_TARGET}\")\nset(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)\nset(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)\nset(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)\n</code></pre>\n\n<p>Please find below my <strong>CMakeLists.txt</strong>:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.14.2)\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11\")\nset(CMAKE_BUILD_TYPE Release)\nproject(Test VERSION 1.0     DESCRIPTION \"CoreLSP FOlder structure     project\"   LANGUAGES C)\nset(SRCS \n   main.c\n   printing.c\n   ) \nadd_executable(Test ${SRCS})\n</code></pre>\n\n<p>Expected:</p>\n\n<ul>\n<li>The project should be built successfully and makefile should be produced so that I could import project into QNX Momentics IDE (Linux based Host OS).</li>\n</ul>\n"}, {"tags": ["c", "while-loop"], "comments": [{"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "edited": false, "score": 0, "creation_date": 1563926292, "post_id": 57173552, "comment_id": 100859988, "body": "you can have an if statement after you ask for the employee number that checks <code>if empno == -999</code> if it is <code>break</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1563926413, "post_id": 57173552, "comment_id": 100860004, "body": "<code>if (scanf(&quot;%d&quot;,&amp;empno) != 1) { fputs (&quot;error: invalid input - empno\\n&quot;, stderr); return 1 }</code> - always validate EVERY user-input. Then <code>if (empno == -999) break;</code> to exit immediately."}, {"owner": {"reputation": 1, "user_id": 11319869, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ggxpGbODWFE/AAAAAAAAAAI/AAAAAAAACEk/Ire5jWGgOB4/photo.jpg?sz=128", "display_name": "Ajini Sahejana", "link": "https://stackoverflow.com/users/11319869/ajini-sahejana"}, "reply_to_user": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "edited": false, "score": 0, "creation_date": 1563954913, "post_id": 57173552, "comment_id": 100867506, "body": "@Tyger Thank you for your reply, I tried that before but I&#39;ll try again."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1563955820, "post_id": 57173552, "comment_id": 100867950, "body": "regarding: <code>hours*150.00;</code>  This is the base pay.  regarding:  <code>(hours-40)*200</code>  This is the overtime pay.   You should keep them separate.   Note: the base pay of 40*150 is 6000, which already exceeds the 4000 cutoff point"}, {"owner": {"reputation": 1, "user_id": 11319869, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ggxpGbODWFE/AAAAAAAAAAI/AAAAAAAACEk/Ire5jWGgOB4/photo.jpg?sz=128", "display_name": "Ajini Sahejana", "link": "https://stackoverflow.com/users/11319869/ajini-sahejana"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1563956440, "post_id": 57173552, "comment_id": 100868264, "body": "ohh didn&#39;t see that coming, thanks @user3629249"}, {"owner": {"reputation": 1, "user_id": 11319869, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ggxpGbODWFE/AAAAAAAAAAI/AAAAAAAACEk/Ire5jWGgOB4/photo.jpg?sz=128", "display_name": "Ajini Sahejana", "link": "https://stackoverflow.com/users/11319869/ajini-sahejana"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1563957245, "post_id": 57173552, "comment_id": 100868710, "body": "@user3629249 This was the question.  It seems like both are overtime payments, isn&#39;t it?  The user should input \u2013999 as employee number to end the program, and the normal Over Time Rate is Rs.150 per hour and Rs. 200 per hour for hours in excess of 40."}], "answers": [{"tags": [], "owner": {"reputation": 1178, "user_id": 1406668, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/T4b1f.jpg?s=128&g=1", "display_name": "Dave M.", "link": "https://stackoverflow.com/users/1406668/dave-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1563926541, "creation_date": 1563926541, "answer_id": 57173601, "question_id": 57173552, "link": "https://stackoverflow.com/questions/57173552/how-to-stop-a-c-while-loop-at-once-when-we-keyboard-input-without-going-on-to-th/57173601#57173601", "title": "How to stop a C while loop at once when we keyboard input without going on to the next step?", "body": "<p>There is no statement after:</p>\n\n<pre><code>    printf(\"Enter the Employee No: \");\n    scanf(\"%d\",&amp;empno);\n</code></pre>\n\n<p>and before:</p>\n\n<pre><code>    printf(\"Enter the No of Hours: \");\n    scanf(\"%f\",&amp;hours);\n</code></pre>\n\n<p>that would cause your program to stop after you enter <code>-999</code>.  The <code>while</code> loop check happens once when you start (before you enter the first employee number) but it doesn't happen again until after you do all the data entry, calculation and printing.</p>\n"}], "owner": {"reputation": 1, "user_id": 11319869, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ggxpGbODWFE/AAAAAAAAAAI/AAAAAAAACEk/Ire5jWGgOB4/photo.jpg?sz=128", "display_name": "Ajini Sahejana", "link": "https://stackoverflow.com/users/11319869/ajini-sahejana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563926541, "creation_date": 1563925995, "question_id": 57173552, "link": "https://stackoverflow.com/questions/57173552/how-to-stop-a-c-while-loop-at-once-when-we-keyboard-input-without-going-on-to-th", "title": "How to stop a C while loop at once when we keyboard input without going on to the next step?", "body": "<p>After I run this program, it has to stop when I input -999. But it stops even after the execution of -999. What have I done wrong here?</p>\n\n<p>This was the question for the code. </p>\n\n<p>Input employee number, and hours worked by employees, and to display the following:\nEmployee number, Over Time Payment, and the percentage of employees whose Over Time Payment exceeding the Rs. 4000/-.\nThe user should input \u2013999 as employee number to end the program, and the normal Over Time      Rate is Rs.150 per hour and Rs. 200 per hour for hours in excess of 40.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    int empno=0,tot;\n    float hours, otp, prcn;\n    while(empno!=-999){\n        printf(\"Enter the Employee No: \");\n        scanf(\"%d\",&amp;empno);\n        printf(\"Enter the No of Hours: \");\n        scanf(\"%f\",&amp;hours);\n        if(hours&lt;40){\n            otp=hours*150.00;\n        }\n        else\n            otp=((hours-40)*200)+(hours*150.00);\n        if(otp&gt;4000){\n            prcn+=1;\n            tot+=1;\n        }\n        else\n            tot+=1;\n\n    printf(\"\\nEmployee No: %d\\n\",empno);\n    printf(\"Over Time Payment: %.2f\\n\",otp);\n    printf(\"Percentage of Employees whose OTP exceeding the Rs. 4000/-: %.2f%%\\n\\n\",(prcn/tot)*100);\n    }\n}\n</code></pre>\n\n<p>I expect it to stop when I enter -999 without going on.</p>\n"}, {"tags": ["c", "pointers", "casting", "function-pointers", "dereference"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1563926594, "post_id": 57173541, "comment_id": 100860040, "body": "I would search for &quot;... and that&#39;s how I failed my code review...&quot; :)"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1563931592, "post_id": 57173541, "comment_id": 100860737, "body": "It\u2019s not part of the cast. It\u2019s a separate dereference. Have you seen <code>*ptr = 5;</code>? Like that."}], "answers": [{"comments": [{"owner": {"reputation": 4071, "user_id": 2354735, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Q33GM.jpg?s=128&g=1", "display_name": "Jet Blue", "link": "https://stackoverflow.com/users/2354735/jet-blue"}, "edited": false, "score": 0, "creation_date": 1563932713, "post_id": 57174081, "comment_id": 100860912, "body": "&quot;PS: This code really made me laugh. As did Retired Ninja&#39;s comment.&quot; Not sure I understand the humor or @retired-ninja&#39;s remark...Is it because the code snippets do not seem to be doing anything useful, or is it my confusion with the pointer syntax... If it&#39;s the former, the code snippets are little chunks from a much bigger program (<a href=\"https://github.com/mit-pdos/xv6-public/blob/master/main.c\" rel=\"nofollow noreferrer\">one</a>, <a href=\"https://github.com/mit-pdos/xv6-public/blob/master/usertests.c\" rel=\"nofollow noreferrer\">two</a>). If it&#39;s the latter, I am more familiar with higher level languages that hide away pointers..."}, {"owner": {"reputation": 684, "user_id": 11783922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c20b355b5cdb9f5172eaed75c5e31a4?s=128&d=identicon&r=PG&f=1", "display_name": "fifoforlifo", "link": "https://stackoverflow.com/users/11783922/fifoforlifo"}, "reply_to_user": {"reputation": 4071, "user_id": 2354735, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Q33GM.jpg?s=128&g=1", "display_name": "Jet Blue", "link": "https://stackoverflow.com/users/2354735/jet-blue"}, "edited": false, "score": 0, "creation_date": 1563932801, "post_id": 57174081, "comment_id": 100860921, "body": "The code snippets were doing things in a very roundabout fashion, and they are not typesafe.  Most people would create a struct Node { Node* pNext; }; to define a linked list.  (FWIW not poking fun at you -- I don&#39;t blame anyone for being puzzled at this code; I was too)"}, {"owner": {"reputation": 4071, "user_id": 2354735, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Q33GM.jpg?s=128&g=1", "display_name": "Jet Blue", "link": "https://stackoverflow.com/users/2354735/jet-blue"}, "edited": false, "score": 0, "creation_date": 1563935247, "post_id": 57174081, "comment_id": 100861321, "body": "Ah I see. I didn&#39;t understand the syntax/grammar, let alone what the logic was trying to do. The logic could have been finding a solution to world peace and I wouldn&#39;t have a clue =)"}, {"owner": {"reputation": 4071, "user_id": 2354735, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Q33GM.jpg?s=128&g=1", "display_name": "Jet Blue", "link": "https://stackoverflow.com/users/2354735/jet-blue"}, "edited": false, "score": 1, "creation_date": 1563938672, "post_id": 57174081, "comment_id": 100861888, "body": "Could the snippets have equivalently been written as <code>*(   ( char** ) m2   )</code> and <code>*(   ( void ( ** ) ( void ) ) ( code - 8 )   )</code>? Where the outer parenthesis helps to visually separate the casting from the dereferencing <code>*( (cast)x )</code>... Or does the added outer parenthesis change the meaning/logic? Using a temporary variable as you do is much more readable, but curious if an additional set of parenthesis as shown can be used to slightly improve legibility."}, {"owner": {"reputation": 4071, "user_id": 2354735, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Q33GM.jpg?s=128&g=1", "display_name": "Jet Blue", "link": "https://stackoverflow.com/users/2354735/jet-blue"}, "edited": false, "score": 1, "creation_date": 1563939865, "post_id": 57174081, "comment_id": 100862108, "body": "Also, I assume the ultimate address would be different if it was <code>(cast)code - 4</code> vs <code>(cast)(code - 4)</code> because of pointer arithmetic...Is this correct? In the former case it would be <code>-(4*(sizeof(cast_type)))</code>, and the latter case just plain old <code>-4</code>?"}, {"owner": {"reputation": 684, "user_id": 11783922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c20b355b5cdb9f5172eaed75c5e31a4?s=128&d=identicon&r=PG&f=1", "display_name": "fifoforlifo", "link": "https://stackoverflow.com/users/11783922/fifoforlifo"}, "reply_to_user": {"reputation": 4071, "user_id": 2354735, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Q33GM.jpg?s=128&g=1", "display_name": "Jet Blue", "link": "https://stackoverflow.com/users/2354735/jet-blue"}, "edited": false, "score": 0, "creation_date": 1563952480, "post_id": 57174081, "comment_id": 100866295, "body": "The additional outer parentheses you wrote as in <code>*( ( char** ) m2 )</code> are certainly valid and do not change the logic.  I have worked in codebases where <code>*( _thing_ )</code> was the coding standard =)"}, {"owner": {"reputation": 684, "user_id": 11783922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c20b355b5cdb9f5172eaed75c5e31a4?s=128&d=identicon&r=PG&f=1", "display_name": "fifoforlifo", "link": "https://stackoverflow.com/users/11783922/fifoforlifo"}, "reply_to_user": {"reputation": 4071, "user_id": 2354735, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Q33GM.jpg?s=128&g=1", "display_name": "Jet Blue", "link": "https://stackoverflow.com/users/2354735/jet-blue"}, "edited": false, "score": 0, "creation_date": 1563952622, "post_id": 57174081, "comment_id": 100866352, "body": "Also totally correct on the <code>(cast)code - 4</code> versus <code>(cast)(code - 4)</code> due to pointer arithmetic."}], "tags": [], "owner": {"reputation": 684, "user_id": 11783922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c20b355b5cdb9f5172eaed75c5e31a4?s=128&d=identicon&r=PG&f=1", "display_name": "fifoforlifo", "link": "https://stackoverflow.com/users/11783922/fifoforlifo"}, "is_accepted": true, "score": 3, "last_activity_date": 1563933743, "last_edit_date": 1563933743, "creation_date": 1563931766, "answer_id": 57174081, "question_id": 57173541, "link": "https://stackoverflow.com/questions/57173541/what-type-of-cast-does-char-achieve/57174081#57174081", "title": "What type of cast does *( char** ) achieve?", "body": "<h2><code>mem_test</code></h2>\n\n<p>Let's dissect this step-by-step.  To make it easy, assume we're on a 64-bit architecture where pointers are 8 bytes in size.</p>\n\n<ul>\n<li><code>m2 = malloc( 10001 )</code> assigns <code>m2</code> to a freshly allocated block of memory.</li>\n<li><code>(char **) m2</code> says \"let's pretend the first 8 bytes of memory at address <code>m2</code> is a <code>char*</code>, and point at <strong>that</strong> -- resulting in a <code>char**</code>\"</li>\n<li><code>*(char **) m2</code> dereferences the above, resulting in an l-value to a <code>char*</code> (in C speak).  Remember l-values are writable.\n\n<ul>\n<li>in C++, it would result in a reference to a <code>char*</code>, i.e. <code>char*&amp;</code></li>\n</ul></li>\n<li><code>*(char **) m2 = m1;</code> writes the value of <code>m1</code> into the l-value created above.</li>\n</ul>\n\n<p>Another way to write that code would be:</p>\n\n<pre><code>char* pCurrentBuffer;\nchar* pPreviousBuffer;\n\npPreviousBuffer = NULL;\nwhile ( ( pCurrentBuffer = malloc( 10001 ) ) != NULL )\n{\n    char** ppPreviousBuffer = (char**)pCurrentBuffer;\n    *ppPreviousBuffer = pPreviousBuffer;\n\n    pPreviousBuffer = pCurrentBuffer;\n}\n</code></pre>\n\n<p>Surprise(!), in the end, it creates a linked list.  (technically it's a reversed linked-list because they are all previous pointers instead of next pointers, but I am joking)</p>\n\n<h2><code>mpenter</code></h2>\n\n<p>This is casting the 8 bytes at address <code>code - 8</code> to a pointer-to-function-pointer, so that it can assign the address of function <code>mpenter</code> into that location.</p>\n\n<ul>\n<li><code>void (*)(void)</code> is a pointer to a function that takes no parameters and returns <code>void</code>.</li>\n<li>By extension, <code>void (**)(void)</code> is a pointer to a function-pointer of the above type.</li>\n<li>Dereferencing that yields an l-value to a function-pointer.\n\n<ul>\n<li>In C++ it would create a reference to a function-pointer, if that's easier to reason about.</li>\n</ul></li>\n<li>Assigning it writes the address of <code>mpenter</code> into that l-value (i.e. the 8 bytes of memory at address <code>code - 8</code>)</li>\n</ul>\n\n<p>It's unusual to take a negative offset from a pointer, but if <code>code</code> is pointing into the middle of a struct of some kind, it may be legitimate (in some loose sense of the word).</p>\n"}], "owner": {"reputation": 4071, "user_id": 2354735, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Q33GM.jpg?s=128&g=1", "display_name": "Jet Blue", "link": "https://stackoverflow.com/users/2354735/jet-blue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 57174081, "answer_count": 1, "score": 0, "last_activity_date": 1564018446, "creation_date": 1563925861, "last_edit_date": 1564018446, "question_id": 57173541, "link": "https://stackoverflow.com/questions/57173541/what-type-of-cast-does-char-achieve", "title": "What type of cast does *( char** ) achieve?", "body": "<p>What type of cast does <code>*( char** )</code> accomplish?<br>\nIt seems to create a pointer to a pointer (\"double pointer\") with the <code>**</code>. But the <code>*</code> outside the parentheses confuses me... Below is the cast in context:</p>\n\n<pre><code>void mem_test ( void )\n{\n    void* m1;\n    void* m2;\n\n    ...\n\n    m1 = 0;\n\n    while ( ( m2 = malloc( 10001 ) ) != 0 )\n    {\n        *( char** ) m2 = m1;  // what does this cast mean?\n\n        m1 = m2;\n    }\n\n    ...\n}\n</code></pre>\n\n<p>Another confusing variant of it appears in the following snippet. What does the cast accomplish in this scenario, and is it different from the one above?</p>\n\n<pre><code>void mpenter ( void );  // a function with no parameters and no return value\n\n...\n\nuchar* code;\n\n...\n\n*( void ( ** ) ( void ) ) ( code - 8 ) = mpenter;  // what does this cast mean?\n</code></pre>\n\n<hr>\n\n<p>What is the proper name for this type of cast? I.e. what should I be searching for to learn more about it?</p>\n"}, {"tags": ["c", "printf"], "answers": [{"tags": [], "owner": {"reputation": 3515, "user_id": 3574628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W5BJ2.jpg?s=128&g=1", "display_name": "luther", "link": "https://stackoverflow.com/users/3574628/luther"}, "is_accepted": false, "score": 1, "last_activity_date": 1563977240, "last_edit_date": 1563977240, "creation_date": 1563919644, "answer_id": 57172830, "question_id": 57172617, "link": "https://stackoverflow.com/questions/57172617/what-are-the-proper-rules-for-printf-conversions/57172830#57172830", "title": "What are the proper rules for printf conversions?", "body": "<p>Based on the documentation that you quote, the <code>0</code> in the format is ignored, meaning it has no effect on whether there are zeros in the output. Then, you provide a precision of <code>.6</code> with an integer format, which means the result must show 6 or more digits. The zeros you see are needed to fill up that minimum number of digits.</p>\n\n<p>If the format did not include <code>-</code> or <code>.6</code>, the <code>05</code> would mean that the entire number would take up at least than 5 characters, padded by zeros, so the output would be <code>+0133</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 3, "last_activity_date": 1563920602, "last_edit_date": 1563920602, "creation_date": 1563919983, "answer_id": 57172878, "question_id": 57172617, "link": "https://stackoverflow.com/questions/57172617/what-are-the-proper-rules-for-printf-conversions/57172878#57172878", "title": "What are the proper rules for printf conversions?", "body": "<p>You have a mess. The <code>0</code> is ignored, try it:</p>\n\n<pre><code>printf(\"%-+5.6d\", 133);\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>+000133\n</code></pre>\n\n<p>The problem you have is there are multiple overriding flags specified. You correct cite that a <code>-</code> (left justified) overrides the <code>0</code>. The sign flag <code>+</code> provides a space for either <code>+/-</code> before the string on all occasions.</p>\n\n<p>The next conflict is <code>5.6</code>. You specify a <em>field-width</em> modifier of <code>5</code>, but then specify the <em>precision</em> as <code>6</code>. For <code>d, i, o, u, x, and X</code> conversions the <em>precision</em> specifies the number of <strong>digits that will appear</strong>. (see <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.21.6.1\" rel=\"nofollow noreferrer\">C11 Standard -7.21.6.1 The fprintf function</a>) So while not specifically stated, the <em>precision</em> being greater than the <em>field-width</em> effectively overrides the field width resulting in <code>6-digits</code> in addition to the <code>+</code> sign being printed for <code>133</code>.</p>\n\n<p>So the crux of the issue is <strong>\"Why if <code>-</code> overrides the <code>0</code> flag are <code>0s</code> still printed?\"</strong> Here there are some technical hairs to be split. Since you have specified <code>-</code> (left justified) and both a <em>field-width</em> and <em>precision</em>, the <code>0</code> is ignored but you have stated that 6-digits shall be printed and the result will be left-justified. So you get <code>0s</code> based on the <code>precision</code> and then total number of digits is left-justified with explicit <code>+/-</code> being provided for the sign.</p>\n\n<p>Remove the precision and you will see the effect of <code>-</code> overriding <code>0</code>:</p>\n\n<pre><code>printf(\"%-+05.d\", 133);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>+133\n</code></pre>\n\n<p>(there is an empty <code></code> following the final <code>3</code> to make a total field-width of <code>5</code>)</p>\n\n<p>(<strong>note:</strong> -- can you rely on this being completely portable? -- probably not, there is likely a bit of implementation defined leeway left in the standard for flag sequence interpretation that may result in a slightly different ordering of flags with some compilers)</p>\n"}], "owner": {"reputation": 123, "user_id": 5484869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b001494cb07305e8300566b90afcdb4d?s=128&d=identicon&r=PG&f=1", "display_name": "Thunderpurtz", "link": "https://stackoverflow.com/users/5484869/thunderpurtz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563977240, "creation_date": 1563918307, "question_id": 57172617, "link": "https://stackoverflow.com/questions/57172617/what-are-the-proper-rules-for-printf-conversions", "title": "What are the proper rules for printf conversions?", "body": "<p>I have this function call for printf:</p>\n\n<pre><code>printf(\"%-+05.6d\", 133);\n</code></pre>\n\n<p>With this output:</p>\n\n<pre><code>+000133\n</code></pre>\n\n<p>I'm having trouble with the rules of how the printf flags interact with each other since it seems they are given conflicting rules.</p>\n\n<p>According to the <a href=\"https://linux.die.net/man/3/printf\" rel=\"nofollow noreferrer\">man</a>(man 3 printf):</p>\n\n<pre><code>0\n\nThe value should be zero padded. For d, i, o, u, x, X, a, A, e, E, f, F, g, and G conversions, the converted value is padded on the left with zeros rather than blanks. If the 0 and - flags both appear, the 0 flag is ignored. If a precision is given with a numeric conversion (d, i, o, u, x, and X), the 0 flag is ignored. For other conversions, the behavior is undefined.\n</code></pre>\n\n<p>So according to this, the 0 flag should be ignored since there is both a '-' flag and a precision specified, yet it is still printing 0's. </p>\n\n<p>According to the man for diouxX conversions:</p>\n\n<pre><code>The precision, if any, gives the minimum number of digits that must appear; if the converted value requires fewer digits, it is padded on the left with zeros.\n</code></pre>\n\n<p>So with both of these rules, it would seem that specific diouxX conversion rule applies here since 0's are still being printed, but then why does the man say the 0's get ignored?</p>\n\n<p>Since precision is applied here, shouldn't the '0' flag be ignored and padded with spaces instead?</p>\n"}, {"tags": ["c", "raytracing"], "comments": [{"owner": {"reputation": 855, "user_id": 5031773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5d4348dc80c48f65608a4c20d9fc90b?s=128&d=identicon&r=PG&f=1", "display_name": "Checkmate", "link": "https://stackoverflow.com/users/5031773/checkmate"}, "edited": false, "score": 0, "creation_date": 1563919097, "post_id": 57172595, "comment_id": 100858518, "body": "It sounds like you have face culling enabled (a standard optimization for rendering images).  What rendering libraries are you using, if any?"}, {"owner": {"reputation": 21, "user_id": 10367442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95b8c9c95df1ee164fbe9b384e7e37da?s=128&d=identicon&r=PG", "display_name": "Aime", "link": "https://stackoverflow.com/users/10367442/aime"}, "reply_to_user": {"reputation": 855, "user_id": 5031773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5d4348dc80c48f65608a4c20d9fc90b?s=128&d=identicon&r=PG&f=1", "display_name": "Checkmate", "link": "https://stackoverflow.com/users/5031773/checkmate"}, "edited": false, "score": 0, "creation_date": 1563919774, "post_id": 57172595, "comment_id": 100858673, "body": "I&#39;m using SFML. ( more precisely -&gt; CSFML). The program not use any GPU acceleration, all done with math, in C. To put it simply: 2 for cycle goes through the screen X-Y, and find if there is intersection with an object, then the color isdetermined by the material-light-angle and ambientCofficient shadows etc.."}, {"owner": {"reputation": 21, "user_id": 10367442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95b8c9c95df1ee164fbe9b384e7e37da?s=128&d=identicon&r=PG", "display_name": "Aime", "link": "https://stackoverflow.com/users/10367442/aime"}, "reply_to_user": {"reputation": 855, "user_id": 5031773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5d4348dc80c48f65608a4c20d9fc90b?s=128&d=identicon&r=PG&f=1", "display_name": "Checkmate", "link": "https://stackoverflow.com/users/5031773/checkmate"}, "edited": false, "score": 0, "creation_date": 1563920582, "post_id": 57172595, "comment_id": 100858877, "body": "Otherwise, it seems that if I reverse the order of the points, the visibility will also be reversed. If I swap the coordinates of a triangle (VectorA3 VectorB3 VectorC3) (VectorB3 VectorA3 VectorC3) it will look the same but it will be visible from the back, not from the front. It has to do with the intersection code."}, {"owner": {"reputation": 855, "user_id": 5031773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5d4348dc80c48f65608a4c20d9fc90b?s=128&d=identicon&r=PG&f=1", "display_name": "Checkmate", "link": "https://stackoverflow.com/users/5031773/checkmate"}, "edited": false, "score": 0, "creation_date": 1563920901, "post_id": 57172595, "comment_id": 100858953, "body": "For what it&#39;s worth, the behavior you&#39;re describing sounds like what you want when rendering a triangle (it&#39;s pretty unusual to render both sides of a triangle).  If you want to disable this, I think getting rid of the statement <code>u &lt; 0.0</code> in the second if statement will do so.  I&#39;m using <a href=\"https://en.wikipedia.org/wiki/Back-face_culling\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Back-face_culling</a> for reference."}, {"owner": {"reputation": 855, "user_id": 5031773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5d4348dc80c48f65608a4c20d9fc90b?s=128&d=identicon&r=PG&f=1", "display_name": "Checkmate", "link": "https://stackoverflow.com/users/5031773/checkmate"}, "edited": false, "score": 0, "creation_date": 1563921292, "post_id": 57172595, "comment_id": 100859052, "body": "As a correction, you might also have to get rid of <code>v &lt; 0.0</code>.  Sorry for not being more certain; I&#39;m not super comfortable with the vector math here."}, {"owner": {"reputation": 21, "user_id": 10367442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95b8c9c95df1ee164fbe9b384e7e37da?s=128&d=identicon&r=PG", "display_name": "Aime", "link": "https://stackoverflow.com/users/10367442/aime"}, "reply_to_user": {"reputation": 855, "user_id": 5031773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5d4348dc80c48f65608a4c20d9fc90b?s=128&d=identicon&r=PG&f=1", "display_name": "Checkmate", "link": "https://stackoverflow.com/users/5031773/checkmate"}, "edited": false, "score": 0, "creation_date": 1563921378, "post_id": 57172595, "comment_id": 100859072, "body": "I&#39;ve tried it but it doesn&#39;t work out. In fact, it has a very nasty end result, distorting the entire triangle."}, {"owner": {"reputation": 855, "user_id": 5031773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5d4348dc80c48f65608a4c20d9fc90b?s=128&d=identicon&r=PG&f=1", "display_name": "Checkmate", "link": "https://stackoverflow.com/users/5031773/checkmate"}, "edited": false, "score": 0, "creation_date": 1563922527, "post_id": 57172595, "comment_id": 100859301, "body": "Yeah, it looks like this back-culling check is built into the algorithm you&#39;re using.  I don&#39;t have time to work out the correction myself, but that&#39;s the approach I think will work.  Sorry about that; hope someone else can help!"}, {"owner": {"reputation": 21, "user_id": 10367442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95b8c9c95df1ee164fbe9b384e7e37da?s=128&d=identicon&r=PG", "display_name": "Aime", "link": "https://stackoverflow.com/users/10367442/aime"}, "reply_to_user": {"reputation": 855, "user_id": 5031773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5d4348dc80c48f65608a4c20d9fc90b?s=128&d=identicon&r=PG&f=1", "display_name": "Checkmate", "link": "https://stackoverflow.com/users/5031773/checkmate"}, "edited": false, "score": 0, "creation_date": 1563923030, "post_id": 57172595, "comment_id": 100859401, "body": "Thanks! Yeah, i think so too, this is more than just delete a statement. This is my first-ever raytracer program, so I&#39;m just experimenting."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10367442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95b8c9c95df1ee164fbe9b384e7e37da?s=128&d=identicon&r=PG", "display_name": "Aime", "link": "https://stackoverflow.com/users/10367442/aime"}, "edited": false, "score": 0, "creation_date": 1563924484, "post_id": 57173346, "comment_id": 100859666, "body": "Results the same. Even if i completely remove that if statement, the problem remains."}], "tags": [], "owner": {"reputation": 423, "user_id": 10061517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580d535573ae83994a7e00dc4234ca15?s=128&d=identicon&r=PG", "display_name": "Witek902", "link": "https://stackoverflow.com/users/10061517/witek902"}, "is_accepted": false, "score": 0, "last_activity_date": 1563924095, "creation_date": 1563924095, "answer_id": 57173346, "question_id": 57172595, "link": "https://stackoverflow.com/questions/57172595/raytracing-ray-triangles-intersection-3d-back-face-culling-problem/57173346#57173346", "title": "Raytracing: Ray/Triangles intersection 3D (back-face culling problem)", "body": "<p>Change\n<code>if (det &lt; EPSILON)</code>\nto:\n<code>if (fabs(det) &lt; EPSILON)</code></p>\n"}], "owner": {"reputation": 21, "user_id": 10367442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95b8c9c95df1ee164fbe9b384e7e37da?s=128&d=identicon&r=PG", "display_name": "Aime", "link": "https://stackoverflow.com/users/10367442/aime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1564852118, "creation_date": 1563918153, "last_edit_date": 1564852118, "question_id": 57172595, "link": "https://stackoverflow.com/questions/57172595/raytracing-ray-triangles-intersection-3d-back-face-culling-problem", "title": "Raytracing: Ray/Triangles intersection 3D (back-face culling problem)", "body": "<p>I'm developing a raytracer engine in C. So far, things works right, but when I move the camera around a 3D object like a Triangle, it disappears when the camera goes to the another \"180 degree range\" regardless of X or Y. </p>\n\n<p>Everything works properly while I'm \"facing\" (front of) the triangle. But when I go around with the camera, like walking in a circle around the object, as I get behind, it no longer draws it, unless I go back.</p>\n\n<p>Intersection Code: </p>\n\n<pre><code>static int ray_checkTriangleIntersection(Ray *ray, Triangle *t, double *distance) {\n    Vector3 pvec, tvec, qvec;\n    VEC3_CROSS(pvec, ray-&gt;direction, t-&gt;edges[0]);\n    double det = VEC3_DOT(t-&gt;edges[1], pvec);\n    if (det &lt; EPSILON) {\n        return 0;\n    }\n    VEC3_SUB(tvec, ray-&gt;origin, t-&gt;a);\n    double u = VEC3_DOT(tvec, pvec);\n    if (u &lt; 0.0 || u &gt; det) {\n        return 0;\n    }\n    VEC3_CROSS(qvec, tvec, t-&gt;edges[1]);\n    double v = VEC3_DOT(ray-&gt;direction, qvec);\n    if (v &lt; 0.0 || u + v &gt; det) {\n        return 0;\n    }\n    double d = VEC3_DOT(t-&gt;edges[0], qvec);\n    double inv_det = 1.0 / det;\n    d *= inv_det;\n\n    *distance = d;\n    return 1;\n}\n</code></pre>\n\n<p>I don't quite understand why this is happening, I think the order of the 3 points doesn't matter.</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "raspberry-pi3", "header-files"], "comments": [{"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 2, "creation_date": 1563919069, "post_id": 57172111, "comment_id": 100858510, "body": "Reboot your machine and choose new kernel in the boot loader. It seems you updated kernel without rebooting. Possible variants: distribution wrongly provided updates, update has been broken."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1563975997, "post_id": 57172111, "comment_id": 100879354, "body": "Debian/Raspbian&#39;s APT doesn&#39;t usually <i>automatically</i> remove packages related to the <i>running</i> kernel, although that doesn&#39;t prevent them being marked as obsolete packages. The mechanics of this are that the packages get listed in an <code>APT::NeverAutoRemove</code> section in the &quot;/etc/apt/apt.conf.d/01autoremove-kernels&quot; file, which is updated by the kernel postinstall script &quot;/etc/kernel/postinst.d/apt-auto-removal&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 5927837, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Nq4I8_1swdY/AAAAAAAAAAI/AAAAAAAAG-k/oEX5O-zS_Wg/photo.jpg?sz=128", "display_name": "Michael Ansolis", "link": "https://stackoverflow.com/users/5927837/michael-ansolis"}, "is_accepted": false, "score": 2, "last_activity_date": 1563918909, "creation_date": 1563918909, "answer_id": 57172711, "question_id": 57172111, "link": "https://stackoverflow.com/questions/57172111/unable-to-get-the-right-linux-kernel-headers-to-build-a-kernel-module/57172711#57172711", "title": "Unable to get the right Linux kernel headers to build a kernel module", "body": "<p>Turns out, all I had to do was to reboot my Raspberry Pi after updating the OS.  Now it's at 4.19.58, and all the headers match the OS version and everything compiles just fine.</p>\n"}], "owner": {"reputation": 71, "user_id": 5927837, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Nq4I8_1swdY/AAAAAAAAAAI/AAAAAAAAG-k/oEX5O-zS_Wg/photo.jpg?sz=128", "display_name": "Michael Ansolis", "link": "https://stackoverflow.com/users/5927837/michael-ansolis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4884, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1563918909, "creation_date": 1563915524, "last_edit_date": 1563918264, "question_id": 57172111, "link": "https://stackoverflow.com/questions/57172111/unable-to-get-the-right-linux-kernel-headers-to-build-a-kernel-module", "title": "Unable to get the right Linux kernel headers to build a kernel module", "body": "<p>I am trying to build a sample Linux kernel module using the following command in my makefile on my Raspberry Pi 3B+ running the latest Raspbian Buster OS updated with sudo apt-get dist-upgrade:</p>\n\n<pre><code>make -C /lib/modules/$(shell uname -r)/build/ M=$(PWD) modules\n</code></pre>\n\n<p>I get the following output:</p>\n\n<pre><code>make -C /lib/modules/4.19.57-v7+/build/ M=/home/pi/isr_test modules\nmake[1]: *** /lib/modules/4.19.57-v7+/build/: No such file or directory.  Stop.\nmake: *** [Makefile:4: all] Error 2\n</code></pre>\n\n<p>I tried installing linux headers using this command:</p>\n\n<pre><code>sudo apt-get install linux-headers-$(uname -r)\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nE: Unable to locate package linux-headers-4.19.57-v7\nE: Couldn't find any package by glob 'linux-headers-4.19.57-v7'\nE: Couldn't find any package by regex 'linux-headers-4.19.57-v7'\n</code></pre>\n\n<p>I tried looking for Linux headers using this command, and it looks like they are installed:</p>\n\n<pre><code>dpkg -l | grep kernel-headers\nii  raspberrypi-kernel-headers            1.20190718-1                          armhf        Header files for the Raspberry Pi Linux kernel\n</code></pre>\n\n<p>I tried looking in the /lib/modules directory:</p>\n\n<pre><code>ls /lib/modules\n4.19.58+  4.19.58-v7+  4.19.58-v7l+\n</code></pre>\n\n<p>See how there's no 4.19.57 there?</p>\n\n<p>Also, under /usr/src, all I have is these directories:</p>\n\n<pre><code>ls /usr/src\nlinux-headers-4.19.58+  linux-headers-4.19.58-v7+  linux-headers-4.19.58-v7l+  sense-hat\n</code></pre>\n\n<p>Again, nothing for 4.19.57.</p>\n\n<p>For the current OS, here's what I get when I run uname -r:</p>\n\n<pre><code>uname -r\n4.19.57-v7+\n</code></pre>\n\n<p>When I change my makefile to point to the 4.19.58-v7+ instead of 4.19.57-v7+, I get my module to build with no issues.</p>\n\n<p>I'm expecting to see folders with 4.19.57 in their names, but all I get is 4.19.58 (see the folders above).  How can I get the Linux header files that match my Linux kernel version?  Or does it not matter?</p>\n"}, {"tags": ["c++", "c", "compiler-optimization"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 6, "creation_date": 1563915435, "post_id": 57172034, "comment_id": 100857440, "body": "C++ compiler can optimise C++ programs. A C compiler cannot, because it cannot compile C++ programs at all."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 1, "creation_date": 1563915710, "post_id": 57172034, "comment_id": 100857531, "body": "Templates enable for easier inlining. i.e. <code>std::sort</code> is very likely to outperform <code>qsort</code> due to <code>qsort</code> taking a hard-to-optimise function pointer. I can&#39;t really think of anything else though. Plus yeah, what eerorika said."}, {"owner": {"reputation": 39, "user_id": 11826900, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202931909253299/picture?type=large", "display_name": "Dacoda Strack", "link": "https://stackoverflow.com/users/11826900/dacoda-strack"}, "edited": false, "score": 0, "creation_date": 1563915858, "post_id": 57172034, "comment_id": 100857585, "body": "Ah yes! <code>qsort</code> vs <code>std::sort</code> I think was one of these prime examples because of the function pointer. I think any casts to <code>void *</code> likewise destroy optimizations?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1563915924, "post_id": 57172034, "comment_id": 100857607, "body": "C++ <code>std::sort</code> versus C <code>qsort</code> is often brought up."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1563915956, "post_id": 57172034, "comment_id": 100857618, "body": "If you just consider the C intersection of C++, then I suspect the optimizations available are the same.  (Assuming the same vendor&#39;s compiler for both C and C++.)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1563916031, "post_id": 57172034, "comment_id": 100857632, "body": "@Eljay I would say there is no <i>C subset</i> of C++. One might think about &quot;intersection&quot;."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 3, "creation_date": 1563916085, "post_id": 57172034, "comment_id": 100857648, "body": "@Eljay But remember that there be dragons in that subset. There exist code that is both valid C and valid C++, yet have different semantics. The &quot;C subset&quot; of C++ is not as simple as it may seem."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1563916086, "post_id": 57172034, "comment_id": 100857650, "body": "@EugeneSh. \u2022 fair enough.  Corrected!"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1563926644, "post_id": 57172034, "comment_id": 100860047, "body": "rvalue references and move semantics come to mind. But they won&#39;t affect a C program."}], "owner": {"reputation": 39, "user_id": 11826900, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202931909253299/picture?type=large", "display_name": "Dacoda Strack", "link": "https://stackoverflow.com/users/11826900/dacoda-strack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "closed_date": 1563917083, "answer_count": 0, "score": 3, "last_activity_date": 1563916090, "creation_date": 1563915157, "last_edit_date": 1563916090, "question_id": 57172034, "link": "https://stackoverflow.com/questions/57172034/what-optimizations-can-a-c-compiler-perform-that-a-c-compiler-cannot", "closed_reason": "Needs more focus", "title": "What optimizations can a C++ compiler perform that a C compiler cannot?", "body": "<p>I've somehow implanted in my head the idea that a C++ compiler can perform certain optimizations that a C compiler cannot. I (think I) remember hearing this in a conference talk, perhaps regarding the use of C++ in embedded programming. </p>\n\n<p>If I recall correctly, I think these optimizations had to do with the idea that you can qualify the use of pointers (and other means of indirection, like references) with more information at compile-time. </p>\n\n<p>For instance, \"const\" is an example of such a compile-time human-supplied tag available both C and C++. Is there similar information that only C++ has? </p>\n\n<p>Some things that spring to mind are the different types of iterators and their requirements, but I'm not sure if that allows for C++ to make some optimizations.</p>\n\n<p>EDIT: I think the talk I had in mind was <a href=\"https://www.youtube.com/watch?v=D7Sd8A6_fYU\" rel=\"nofollow noreferrer\">Dan Saks's cppcon 2016 presentation</a>, but I realize now that (from what I understand) he mainly mentions how C++'s type system allows for better compile-time type-checking. </p>\n\n<p>I think some of the examples I would enjoy hearing more about are things closer to how C++'s <code>std::sort</code> can be optimized more readily than C's <code>qsort</code> (thanks to multiple commenters). Explanations to when this sort of scenario occurs would be greatly appreciated. </p>\n"}, {"tags": ["c", "sockets", "client-server"], "comments": [{"owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "edited": false, "score": 0, "creation_date": 1563916058, "post_id": 57172004, "comment_id": 100857641, "body": "Why do you need a while loop in the client file when you call exit() and abort in the loop?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1563916074, "post_id": 57172004, "comment_id": 100857645, "body": "You malloc a buffer for the sockaddr, but you don&#39;t put anything there, so strlen() is undefined, looking at rendom bytes. Even if you had put something there, it&#39;s a structure, not a string, so why do you think strlen() will be useful for anything? The sockaddr structure is supposed to be filled in by you with an address."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1563916207, "post_id": 57172004, "comment_id": 100857689, "body": "Aside: The <code>lenght</code> typo is really irritating."}], "answers": [{"comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1563916192, "post_id": 57172236, "comment_id": 100857686, "body": "That&#39;s why the error. He also needs to actually put something in the sockaddr structure."}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": true, "score": 0, "last_activity_date": 1563916903, "last_edit_date": 1563916903, "creation_date": 1563916072, "answer_id": 57172236, "question_id": 57172004, "link": "https://stackoverflow.com/questions/57172004/connect-function-in-c-invalid-argument/57172236#57172236", "title": "Connect() function in C, invalid argument", "body": "<p>This is how you define sa, as a pointer to struct sockaddr.</p>\n\n<pre><code>struct sockaddr* sa;\n</code></pre>\n\n<p>Here you take the address of the variable <code>sa</code> and cast it to the type of sa.</p>\n\n<pre><code>(struct sockaddr*)&amp;sa\n</code></pre>\n\n<p>The result is a pointer to pointer to struct sockaddr, which gets brute force cast to pointer to struct sockaddr.</p>\n\n<p>Type-casting is a trap and you got caught in it.</p>\n\n<p>To solve, I recommend using a tutorial on sockets.<br>\nI think that when comparing your client and the example client in this tutorial especially the pointer level issue you have created becomes nicely visible:<br>\n<a href=\"https://www.cs.rpi.edu/~moorthy/Courses/os98/Pgms/socket.html\" rel=\"nofollow noreferrer\">https://www.cs.rpi.edu/~moorthy/Courses/os98/Pgms/socket.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1563930648, "creation_date": 1563930648, "answer_id": 57173973, "question_id": 57172004, "link": "https://stackoverflow.com/questions/57172004/connect-function-in-c-invalid-argument/57173973#57173973", "title": "Connect() function in C, invalid argument", "body": "<p>Your server and client are both misusing the <code>sockaddr...</code> structures. The error on the server side doesn't affect anything because it is not actually using the faulty <code>sockaddr</code> it allocates, it just leaks.  But your client is completely misusing the <code>sockaddr</code> that is passed to <code>connect()</code>, which is why <code>connect()</code> fails.</p>\n\n<p>Try this instead:</p>\n\n<p>server</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;unistd.h&gt; \n#include &lt;stdio.h&gt; \n#include &lt;sys/socket.h&gt; \n#include &lt;stdlib.h&gt; \n#include &lt;netinet/in.h&gt; \n#include &lt;string.h&gt;\n#include &lt;sys/un.h&gt; \n#include &lt;sys/socket.h&gt;\n#include \"thpool.h\"\n#include \"functions.h\"\n\n#define N 7\n#define SERVER_PATH \"/tmp/server\"\n\nint main(void){\n    unlink(SERVER_PATH);\n\n    struct sockaddr_un stru;\n    int sock_serv, new_sock;\n    ssize_t bufflen;\n    char buff[N];\n\n    if((sock_serv = socket(AF_UNIX, SOCK_STREAM, 0)) &lt; 0){\n        printf(\"socket creation error\");\n        exit(-1);\n    }\n\n    bzero(&amp;stru, sizeof(stru));\n    stru.sun_family = AF_UNIX;\n    strncpy (stru.sun_path, SERVER_PATH, sizeof(stru.sun_path));\n\n    if((bind(sock_serv, (struct sockaddr*) &amp;stru, sizeof(stru))) &lt; 0){\n        perror(\"bind error\");\n        exit(EXIT_FAILURE); \n    }\n\n    if(listen(sock_serv, SOMAXCONN) &lt; 0){\n        perror(\"listen error\");\n        exit(EXIT_FAILURE); \n    }\n\n    if((new_sock = accept(sock_serv, NULL, 0)) &lt; 0){\n        perror(\"accept error\");\n        exit(EXIT_FAILURE); \n    }\n\n    bufflen = read(new_sock, buff, N);\n    if (bufflen &lt; 0) {\n        perror(\"read error\");\n    }\n    else if (bufflen == 0) {\n        printf(\"Client disconnected\\n\");\n    }\n    else {\n        printf(\"Server got: %.*s\\n\", (int) bufflen, buff);\n    }\n\n    close(new_sock);\n    close(sock_serv);\n\n    unlink(SERVER_PATH);\n    return 0;\n}\n</code></pre>\n\n<p>client</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;unistd.h&gt; \n#include &lt;stdio.h&gt; \n#include &lt;sys/socket.h&gt; \n#include &lt;stdlib.h&gt; \n#include &lt;netinet/in.h&gt; \n#include &lt;string.h&gt;\n#include &lt;sys/un.h&gt; \n#include &lt;sys/socket.h&gt;\n#include &lt;errno.h&gt;\n#include \"thpool.h\"\n#include \"functions.h\"\n\n#define SERVER_PATH \"/tmp/server\"\nconst char *msg = \"Hello!\";\n\nint main(void){\n\n    int sock_cl;\n    struct sockaddr_un sa;\n    ssize_t sent;\n\n    if((sock_cl = socket(AF_UNIX, SOCK_STREAM, 0)) &lt; 0){\n        perror(\"socket creation error\");\n        exit(EXIT_FAILURE); \n    }\n\n    bzero(&amp;s, sizeof(sa));\n    sa.sa_family = AF_UNIX;\n    strncpy (sa.sa_data, SERVER_PATH, sizeof(sa.sa_data));\n\n    if (connect(sock_cl, (struct sockaddr*) &amp;sa, (socklen_t) sizeof(sa)) &lt; 0) {\n        perror(\"connect error\");\n        exit(EXIT_FAILURE);             \n    }\n\n    sent = write(sock_cl, msg, strlen(msg)+1);\n    if (sent &lt; 0) {\n        perror(\"write error\");\n    }\n    else {\n        printf(\"Message sent: %.*s\\n\", (int) sent, msg);\n    }\n\n    close(sock_cl);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7515377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9da86c5b5dd3758730e093b6d5be7453?s=128&d=identicon&r=PG&f=1", "display_name": "Michelangelo", "link": "https://stackoverflow.com/users/7515377/michelangelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 57172236, "answer_count": 2, "score": -1, "last_activity_date": 1563930648, "creation_date": 1563915031, "question_id": 57172004, "link": "https://stackoverflow.com/questions/57172004/connect-function-in-c-invalid-argument", "title": "Connect() function in C, invalid argument", "body": "<p>I'm coding a client/server, the client simply sends a message to the server that he will print the message. </p>\n\n<p>To do this I used sockets and localhost. Here is the code:</p>\n\n<p>server:</p>\n\n<pre><code>    #include &lt;unistd.h&gt; \n    #include &lt;stdio.h&gt; \n    #include &lt;sys/socket.h&gt; \n    #include &lt;stdlib.h&gt; \n    #include &lt;netinet/in.h&gt; \n    #include &lt;string.h&gt;\n    #include &lt;sys/un.h&gt; \n    #include &lt;sys/socket.h&gt;\n    #include\"thpool.h\"\n    #include\"functions.h\"\n    #define N 7\n    #define SERVER_PATH \"/tmp/server\"\n\n    int main(void){\n        unlink(SERVER_PATH);\n        struct sockaddr_un stru;\n        int sock_serv, new_sock;\n        int opt = 1;\n        struct sockaddr* cliaddr;\n        char buff[N];\n\n        cliaddr = malloc(sizeof(struct sockaddr));\n        socklen_t addrlen = strlen((char* )cliaddr);\n\n        if((sock_serv = socket(AF_UNIX, SOCK_STREAM, 0)) &lt; 0){\n            printf(\"socket creation error\");\n            exit(-1);\n        }\n\n        bzero(&amp;stru, sizeof(struct sockaddr_in)); \n\n        stru.sun_family = AF_UNIX ;\n        strncpy (stru.sun_path, SERVER_PATH, sizeof(stru.sun_path));\n\n        if((bind(sock_serv, (struct sockaddr*) &amp;stru , sizeof(struct sockaddr_un ))) &lt; 0){\n            perror(\"bind failed\"); \n            exit(EXIT_FAILURE); \n        }\n\n        if(listen(sock_serv, SOMAXCONN) &lt; 0){\n            perror(\"listen error\\n\");\n            exit(EXIT_FAILURE); \n        }\n\n        if((new_sock = accept(sock_serv, NULL, 0)) &lt; 0){\n            perror(\"accept error\\n\");\n            exit(EXIT_FAILURE); \n        }\n\n        read(new_sock , buff, N) ;\n        printf(\"Server got: %s\\n\" , buff);\n\n        close(sock_serv);\n        close(new_sock);\n\n        unlink(SERVER_PATH);\n        return 0;\n    }\n</code></pre>\n\n<p>and here is the client:</p>\n\n<pre><code>#include &lt;unistd.h&gt; \n#include &lt;stdio.h&gt; \n#include &lt;sys/socket.h&gt; \n#include &lt;stdlib.h&gt; \n#include &lt;netinet/in.h&gt; \n#include &lt;string.h&gt;\n#include &lt;sys/un.h&gt; \n#include &lt;sys/socket.h&gt;\n#include&lt;errno.h&gt;\n#include\"thpool.h\"\n#include\"functions.h\"\n#define SERVER_PATH \"/tmp/server\"\n\nint  main(void){\n\n    int sock_cl;\n\n    struct sockaddr* sa;\n    socklen_t sa_lenght;\n    sa = malloc(sizeof(struct sockaddr));\n    sa_lenght = strlen((char* )sa);\n\n    if((sock_cl = socket(AF_UNIX, SOCK_STREAM, 0)) &lt; 0){\n        perror(\"socket creation error\");\n        exit(EXIT_FAILURE); \n    }\n\n    sa-&gt;sa_family = AF_UNIX ;\n    strncpy (sa-&gt;sa_data, SERVER_PATH, sizeof(sa-&gt;sa_data));\n\n    while (connect(sock_cl , (struct sockaddr*)&amp;sa , (socklen_t)sa_lenght) == -1) {\n        perror(\"connection to the server failed\");\n        exit(EXIT_FAILURE);             \n    }\n\n    write (sock_cl, \"Hello!\", 7);\n    printf(\"message sended\\n\");\n    close(sock_cl);\n\n    return 0;\n}\n</code></pre>\n\n<p>I have a problem with the connect() function, the error is \"invalid argument\". Note that I first executed the server and then the client, so is not that the problem.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1563912893, "post_id": 57171440, "comment_id": 100856374, "body": "They got <code>gold</code> correct. They should have done the same thing with <code>numbers</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1563912940, "post_id": 57171440, "comment_id": 100856398, "body": "It is somewhat implementation-specific what is considered compile time constant and what is not."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1563913017, "post_id": 57171440, "comment_id": 100856433, "body": "@user3386109 The got <code>&amp;gold</code> correct, not <code>gold</code>.. Which is strange enough as it is link-time constant..."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1563913275, "post_id": 57171440, "comment_id": 100856569, "body": "@EugeneSh. I was referring to the variable called <code>gold</code>, and its usage throughout the program. The variable called <code>numbers</code> should follow the same usage pattern."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1563913311, "post_id": 57171440, "comment_id": 100856589, "body": "You can work around this with <code>safe s = { { &amp;gold, &quot;6502&quot; }, &quot;RAMACON250&quot; };</code>."}, {"owner": {"reputation": 5376, "user_id": 2662028, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3ffd689c4943e26ae0d0de538a2a37ea?s=128&d=identicon&r=PG", "display_name": "ryanpcmcquen", "link": "https://stackoverflow.com/users/2662028/ryanpcmcquen"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1563915625, "post_id": 57171440, "comment_id": 100857501, "body": "@EricPostpischil, is there no way to pass the <code>numbers</code> struct?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1563941553, "post_id": 57171440, "comment_id": 100862426, "body": "No; there&#39;s no way to use a copy of the <code>numbers</code> structure because that is no longer a compile time constant.  Its address is a compile time constant; its value is not, and the initializer that&#39;s being complained about is trying to make a copy of the value of the structure.  Adding <code>const</code> somewhere won&#39;t help; the expression isn&#39;t a constant within the terms of the C standard.  C++ has different rules; it is a different language, of course."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 9955239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lpwk0.jpg?s=128&g=1", "display_name": "LetAptimus", "link": "https://stackoverflow.com/users/9955239/letaptimus"}, "is_accepted": false, "score": 0, "last_activity_date": 1563944079, "creation_date": 1563944079, "answer_id": 57175505, "question_id": 57171440, "link": "https://stackoverflow.com/questions/57171440/head-first-c-safe-cracker-error-initializer-element-is-not-a-compile-time-con/57175505#57175505", "title": "Head First C Safe Cracker - error: initializer element is not a compile-time constant", "body": "<p>The way you are initializing the structures is not proper. That syntax is used to initialize array in C.\nHere is the modified version of your code with proper structure initialization.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\ntypedef struct {\n    const char* description;\n    float value;\n} swag;\n\ntypedef struct {\n    swag* swag;\n    const char* sequence;\n} combination;\n\ntypedef struct {\n    combination numbers;\n    const char* make;\n} safe;\n\nswag gold;\ncombination numbers;\nsafe s;\n\nint main()\n{\n  gold.description = \"GOLD!\";\n  gold.value = 10000.0;\n  numbers.swag = &amp;gold;\n  numbers.sequence = \"6502\";\n  s.numbers = numbers;\n  s.make = \"RAMACON250\";\n    printf(\"Contents = %s\\n\", s.numbers.swag-&gt;description);\n}\n</code></pre>\n\n<p>This is working but this is not a good method for assignment of pointer variables. You need to use strcpy for <code>char *</code> and <code>malloc</code> for general structure pointers.</p>\n"}], "owner": {"reputation": 5376, "user_id": 2662028, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3ffd689c4943e26ae0d0de538a2a37ea?s=128&d=identicon&r=PG", "display_name": "ryanpcmcquen", "link": "https://stackoverflow.com/users/2662028/ryanpcmcquen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563944079, "creation_date": 1563912335, "question_id": 57171440, "link": "https://stackoverflow.com/questions/57171440/head-first-c-safe-cracker-error-initializer-element-is-not-a-compile-time-con", "title": "Head First C Safe Cracker - error: initializer element is not a compile-time constant", "body": "<p>I have the following code which is directly from Head First C Chapter 5, and I get an error using Clang 7 and GCC 6:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct {\n    const char* description;\n    float value;\n} swag;\n\ntypedef struct {\n    swag* swag;\n    const char* sequence;\n} combination;\n\ntypedef struct {\n    combination numbers;\n    const char* make;\n} safe;\n\nswag gold = {\n    \"GOLD!\",\n    1000000.0\n};\n\ncombination numbers = {\n    &amp;gold,\n    \"6502\"\n};\n\nsafe s = {\n    numbers,\n    \"RAMACON250\"\n};\n\nint main()\n{\n    printf(\"Contents = %s\\n\", s.numbers.swag-&gt;description);\n}\n</code></pre>\n\n<p>Here's the error:</p>\n\n<pre><code>&gt; clang-7 -pthread -lm -o main main.c\nmain.c:29:5: error: initializer element is not a compile-time\n      constant\n    numbers,\n    ^~~~~~~\n1 error generated.\n</code></pre>\n\n<p>I've found many similar Stack Overflow questions but none of them seem to be quite the same code scenario. Here's a REPL of the code:</p>\n\n<p><a href=\"https://repl.it/repls/TechnologicalCarelessPatterns\" rel=\"nofollow noreferrer\">https://repl.it/repls/TechnologicalCarelessPatterns</a></p>\n"}, {"tags": ["c", "libc", "osdev"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1563911982, "post_id": 57171355, "comment_id": 100856018, "body": "Do you know what is the difference between <code>memcpy</code> and <code>memmove</code> ?"}, {"owner": {"reputation": 1474, "user_id": 3659011, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8aLi8.jpg?s=128&g=1", "display_name": "Adam Zahran", "link": "https://stackoverflow.com/users/3659011/adam-zahran"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1563912194, "post_id": 57171355, "comment_id": 100856100, "body": "No I do not know the difference. But I&#39;m reading about it now that you&#39;ve pointed that out."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1563912222, "post_id": 57171355, "comment_id": 100856110, "body": "So it is handling that difference :)"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 3, "creation_date": 1563912234, "post_id": 57171355, "comment_id": 100856116, "body": "Imagine what would happen if the source and destination regions overlap..."}, {"owner": {"reputation": 1474, "user_id": 3659011, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8aLi8.jpg?s=128&g=1", "display_name": "Adam Zahran", "link": "https://stackoverflow.com/users/3659011/adam-zahran"}, "edited": false, "score": 0, "creation_date": 1563912850, "post_id": 57171355, "comment_id": 100856353, "body": "Understood. Thank you very much :D"}], "owner": {"reputation": 1474, "user_id": 3659011, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8aLi8.jpg?s=128&g=1", "display_name": "Adam Zahran", "link": "https://stackoverflow.com/users/3659011/adam-zahran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "closed_date": 1563939680, "answer_count": 0, "score": 0, "last_activity_date": 1563911941, "creation_date": 1563911941, "question_id": 57171355, "link": "https://stackoverflow.com/questions/57171355/memmove-in-osdev-meaty-skeleton-why-does-it-have-these-if-else-statements", "closed_reason": "Duplicate", "title": "memmove in osdev meaty-skeleton: why does it have these if/else statements?", "body": "<p>In the <a href=\"https://wiki.osdev.org/Meaty_Skeleton\" rel=\"nofollow noreferrer\">os-dev meaty skeleton tutorial</a> this is the implementation of <code>memmove</code>:</p>\n\n<pre><code>#include &lt;string.h&gt;\n\n\nvoid* memmove(void* dstptr, const void* srcptr, size_t size) {\n    unsigned char* dst = (unsigned char*) dstptr;\n    const unsigned char* src = (const unsigned char*) srcptr;\n    if (dst &lt; src) {\n        for (size_t i = 0; i &lt; size; i++)\n            dst[i] = src[i];\n    } else {\n        for (size_t i = size; i != 0; i--)\n            dst[i-1] = src[i-1];\n    }\n    return dstptr;\n}\n</code></pre>\n\n<p>They check whether the <code>dst</code> pointer is less than <code>src</code>, if so they just move the memory.\nIf not they move the memory in reverse order. But why?</p>\n\n<p>Does that handle some edge case?</p>\n"}, {"tags": ["c", "windows", "windows-subsystem-for-linux"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1563910403, "post_id": 57170990, "comment_id": 100855362, "body": "Your program tries to read past end-of-file. That doesn&#39;t strike me as a good idea. Apparently Windows agrees and just keeps returning end-of-file on the following reads."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1563913267, "post_id": 57170990, "comment_id": 100856562, "body": "OT: regarding: <code>buf[strlen(buf) - 1] = &#39;\\0&#39;; &#47;&#47; chomp &#39;\\n&#39;</code>  This is not a reliable method of removing a trailing newline.  A MUCH better method is: <code>buf[ strcspn( buf, &quot;\\n&quot; ) ] = &#39;\\0&#39;;</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1563913412, "post_id": 57170990, "comment_id": 100856632, "body": "OT: regarding: static int Fork() {`   It is a very poor programming practice to name functions the same a C library functions (even though the capitalization isn&#39;t exactly the same.)   This can be very confusing to the human reader"}, {"owner": {"reputation": 967, "user_id": 5294619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afe990a13c278488b9e2268e226f082a?s=128&d=identicon&r=PG&f=1", "display_name": "ddbug", "link": "https://stackoverflow.com/users/5294619/ddbug"}, "edited": false, "score": 1, "creation_date": 1563913811, "post_id": 57170990, "comment_id": 100856807, "body": "You likely expected read() interrupted by ctrl/D to return -1 instead of 0. This seems to be system-dependent behavior. I have a real Ubuntu which returns 0 as well.  Even if read() would return -1, following code is suspicious. What if strlen(buf) == 0? What then <code>buf[strlen(buf) -1]</code> will do?"}, {"owner": {"reputation": 967, "user_id": 5294619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afe990a13c278488b9e2268e226f082a?s=128&d=identicon&r=PG&f=1", "display_name": "ddbug", "link": "https://stackoverflow.com/users/5294619/ddbug"}, "edited": false, "score": 0, "creation_date": 1563914291, "post_id": 57170990, "comment_id": 100857017, "body": "WSL v2 (already available in preview) has a real Linux kernel, so all system calls should behave perfectly. Try that if in doubt."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1563917882, "post_id": 57170990, "comment_id": 100858197, "body": "For me, adding <code>tcflush(STDIN_FILENO, TCIFLUSH)</code> (i.e. discard data received but not read) before calling <code>read</code> solves the problem in WSL. <code>read</code> is expected to return 0 if Ctrl+D is typed at the start of a line of input, but I don&#39;t know whether it&#39;s specified what the terminal should do for a subsequent read. I did an strace on a Python session that uses GNU Readline and observed it sending <code>TCGETS</code> and <code>TCSETSW</code> IOCTLs before calling <code>read</code>, so I figured I&#39;d try a simple flush, and it worked."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1563944407, "post_id": 57170990, "comment_id": 100863135, "body": "I think I&#39;ve already told you this in another Q, but is the stdin of your program really a tty when running it in WSL? what would a <code>printf(&quot;%d\\n&quot;, isatty(0))</code> at the beginning print? Control-D only has meaning when typed in a tty, it cannot be passed through a pipe; you can reproduce the same behavior on Linux by running your program as <code>cat | .&#47;your_prog</code>."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1563944950, "post_id": 57170990, "comment_id": 100863284, "body": "Also, you should get rid of that <code>fflush(NULL)</code>. You should not mix buffered and unbuffered i/o."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1563951242, "post_id": 57170990, "comment_id": 100865658, "body": "@mosvy, yes, a console input file is a tty in WSL. A Linux shell environment would be broken beyond usefulness otherwise. Also, as I said in my previous comment, <code>tcflush(STDIN_FILENO, TCIFLUSH)</code> fixes the problem for me. I&#39;m waiting for the OP and others to confirm that it works for them as well, and for someone more familiar with the specified behavior of Unix terminals to confirm whether this is allowed behavior in general, albeit unusual, or whether requiring a flush is an outright bug in WSL."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1563952807, "post_id": 57170990, "comment_id": 100866452, "body": "@eryksun there should be no need for <code>TCIFLUSH</code> -- that really looks like a bug in WSL. The ioctls issued by readline are a redherring -- readline is setting the tty in raw mode, it doesn&#39;t depend on the canonical/cooked mode of the tty driver to handle Control-D."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1563954063, "post_id": 57170990, "comment_id": 100867059, "body": "@mosvy, changing the mode with <code>TCSETSW</code> is clearly resetting something that makes it work. For example, in Python I can end a readline-based <code>input()</code> with an empty Ctrl+D. It raises the expected <code>EOFError</code>, and I can continue to read from stdin. But without readline it shows the same misbehavior. For example, a simple <code>while 1: sys.stdin.read(1)</code> is broken after entering Ctrl+D."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1563954871, "post_id": 57170990, "comment_id": 100867488, "body": "@eryksun as I told you, readline works completely different than the tty canonical mode (it interprets itself the ^D). A simpler testcase for this bug should be <code>sh -c &#39;while cat; do echo DONE; done&#39;</code> -- that should print <code>DONE</code> each time you press ^D <i>at the beginning of the line</i>, and re-run the <code>cat</code>. How ^D/VEOF should work in canonical mode is specified <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap11.html#tag_11_01_09\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1563955250, "post_id": 57170990, "comment_id": 100867664, "body": "@mosvy, I&#39;m not concerned about readline working in raw mode. That&#39;s unrelated to my point, which is only that after the mode gets reset by readline, I can use stdin normally again, e.g. <code>sys.stdin.read(1)</code> will work. So it&#39;s changing something in the console state that fixes the problem with <code>read()</code> subsequent to an empty Ctrl+D. Your test with the <code>cat</code> loop also demonstrates the problem."}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1563956307, "post_id": 57170990, "comment_id": 100868197, "body": "@eryksun the standard spec link I gave you says &quot; If ICANON is set, the EOF character shall be discarded when processed.&quot;. If WSL fails to do that, the EOF character would have to be discarded by hand with <code>TCIFLUSH</code>. Changing the tty mode back &amp; forth with <code>TCSET*</code> may also cause that as a side-effect. But neither of these should be necessary (and it&#39;s not, on any Unix system)."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "edited": false, "score": 0, "creation_date": 1563956443, "post_id": 57170990, "comment_id": 100868265, "body": "@mosvy, great, I think that aptly describes what&#39;s happening here."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563960293, "post_id": 57170990, "comment_id": 100870337, "body": "<code>read(STDIN_FILENO, buf, MAX)</code> can cause undefined behavior if it reads <code>MAX</code> bytes and doesn&#39;t leave the final <code>&#39;\\0&#39;</code> terminating <code>char</code> value since later code assumes <code>buf</code> contains a properly-terminated string."}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1563948649, "last_edit_date": 1563948649, "creation_date": 1563914173, "answer_id": 57171827, "question_id": 57170990, "link": "https://stackoverflow.com/questions/57170990/issue-with-ctrld-on-windows-subsystem-for-linux/57171827#57171827", "title": "Issue with CTRL+D on Windows Subsystem for Linux", "body": "<p>Different OSs use different keystrokes for EOF.</p>\n"}, {"tags": [], "owner": {"reputation": 967, "user_id": 5294619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afe990a13c278488b9e2268e226f082a?s=128&d=identicon&r=PG&f=1", "display_name": "ddbug", "link": "https://stackoverflow.com/users/5294619/ddbug"}, "is_accepted": false, "score": 0, "last_activity_date": 1563915056, "creation_date": 1563915056, "answer_id": 57172011, "question_id": 57170990, "link": "https://stackoverflow.com/questions/57170990/issue-with-ctrld-on-windows-subsystem-for-linux/57172011#57172011", "title": "Issue with CTRL+D on Windows Subsystem for Linux", "body": "<p>Documentation on read() (Linux manpages v 3.54) does not specify that end of file (ctrl/D) causes read to return anything besides of 0. On the contrary, it says that return value zero indicates end of file. So you're relying upon undefined behavior. \nSomehow on your Linux ctrl/D causes error, thus read() returns -1. Your program in this case exits the loop. Or, ctrl/D is read literally, then read() returns 1.</p>\n"}], "owner": {"reputation": 83, "user_id": 11010869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e15421a384cb3301964a495ae844fce?s=128&d=identicon&r=PG&f=1", "display_name": "goodknight", "link": "https://stackoverflow.com/users/11010869/goodknight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 306, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1563948649, "creation_date": 1563910207, "last_edit_date": 1563915749, "question_id": 57170990, "link": "https://stackoverflow.com/questions/57170990/issue-with-ctrld-on-windows-subsystem-for-linux", "title": "Issue with CTRL+D on Windows Subsystem for Linux", "body": "<p>I was working on an assignment using Windows Subsystem for Linux. Below is the C Code that was used to write a mini-shell for this assignment. \nI ran into an interesting issue using WSL. On line 35, you can see that I call the read function to read in the buffer and it does a check for null. When pressing <kbd>Ctrl</kbd>+<kbd>D</kbd>, while using WSL, it will go into the if statement and prints the print message on line 36 infinitely and does not stop until I used <kbd>Ctrl</kbd>+<kbd>C</kbd> to exit. When running this program on a Linux machine, it behaves appropriately and prints once, and brings us to the top of the loop.<br>\nAny ideas as to what this bug could be?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types\n#include &lt;unistd.h&gt;\n#include &lt;error.h&gt;\n\nchar prompt[] = \"$ \";\n\nstatic int\nFork()\n{\n  pid_t pid;\n\n  if ((pid = fork()) &lt; 0)\n    error(EXIT_FAILURE, errno, \"fork error\");\n    return(pid);\n}\n\nint    \nmain(void)\n{\n  long MAX = sysconf(_SC_LINE_MAX);\n  char buf[MAX];\n  pid_t pid;\n  int status, n;\n\n  do {\n    write(STDOUT_FILENO, prompt, strlen(prompt));\n    fflush(NULL);\n    memset(buf, 0, MAX);\n    if((n = read(STDIN_FILENO, buf, MAX)) == 0) {\n      printf(\"use exit to exit shell\\n\");\n      continue;\n    }\n    buf[strlen(buf) - 1] = '\\0'; // chomp '\\n'\n\n    if (strncmp(buf, \"exit\", MAX) == 0) { // match\n      break;\n    }\n    pid = Fork();\n    if (pid == 0) {  // child\n      execlp(buf, buf, (char *)NULL);\n      error(EXIT_FAILURE, errno, \"exec failure\");\n    }\n    // parent\n    if ((pid = waitpid(pid, &amp;status, 0)) &lt; 0)\n      error(EXIT_FAILURE, errno, \"waitpid error\");\n  } while(1);\n  exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>The program is in C but there are no options available to insert C Code snippets.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1563909843, "post_id": 57170891, "comment_id": 100855110, "body": "How does the output relate to the contents of the array?  It&#39;s not clear what you&#39;re trying to do."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1563909946, "post_id": 57170891, "comment_id": 100855154, "body": "<code>(&amp;a)[1]-a</code> this construct should definitely not be there."}, {"owner": {"reputation": 13, "user_id": 11826319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hEpFFJ6kKxE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfo6_mmzM1mZ4oB1yMoGHPCULzbMA/photo.jpg?sz=128", "display_name": "The Fawcett", "link": "https://stackoverflow.com/users/11826319/the-fawcett"}, "edited": false, "score": 0, "creation_date": 1563910007, "post_id": 57170891, "comment_id": 100855178, "body": "i need the program to print the index number of the array and what is stored in the array for that index in a vertical column for each with index and value above"}, {"owner": {"reputation": 13, "user_id": 11826319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hEpFFJ6kKxE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfo6_mmzM1mZ4oB1yMoGHPCULzbMA/photo.jpg?sz=128", "display_name": "The Fawcett", "link": "https://stackoverflow.com/users/11826319/the-fawcett"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1563910191, "post_id": 57170891, "comment_id": 100855263, "body": "@dbush i have edited the question now to show"}, {"owner": {"reputation": 13, "user_id": 11826319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hEpFFJ6kKxE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfo6_mmzM1mZ4oB1yMoGHPCULzbMA/photo.jpg?sz=128", "display_name": "The Fawcett", "link": "https://stackoverflow.com/users/11826319/the-fawcett"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1563910233, "post_id": 57170891, "comment_id": 100855281, "body": "@EugeneSh. i have edited the question now to show what i need"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1563910251, "post_id": 57170891, "comment_id": 100855290, "body": "So how exactly the code presented is supposed to achieve that? It looks totally random to me."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1563910273, "post_id": 57170891, "comment_id": 100855300, "body": "Have you tried printing the index and the value on a single line each time through the loop?"}, {"owner": {"reputation": 13, "user_id": 11826319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hEpFFJ6kKxE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfo6_mmzM1mZ4oB1yMoGHPCULzbMA/photo.jpg?sz=128", "display_name": "The Fawcett", "link": "https://stackoverflow.com/users/11826319/the-fawcett"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1563910442, "post_id": 57170891, "comment_id": 100855376, "body": "@dbush i dont know how to do that"}, {"owner": {"reputation": 13, "user_id": 11826319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hEpFFJ6kKxE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfo6_mmzM1mZ4oB1yMoGHPCULzbMA/photo.jpg?sz=128", "display_name": "The Fawcett", "link": "https://stackoverflow.com/users/11826319/the-fawcett"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1563910464, "post_id": 57170891, "comment_id": 100855384, "body": "@EugeneSh. when the code is compiled and ran it prints the array in a line"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1563910527, "post_id": 57170891, "comment_id": 100855416, "body": "You&#39;re already printing the value.  Just print the index first, then print a newline after the value."}, {"owner": {"reputation": 13, "user_id": 11826319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hEpFFJ6kKxE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfo6_mmzM1mZ4oB1yMoGHPCULzbMA/photo.jpg?sz=128", "display_name": "The Fawcett", "link": "https://stackoverflow.com/users/11826319/the-fawcett"}, "edited": false, "score": 0, "creation_date": 1563910625, "post_id": 57170891, "comment_id": 100855458, "body": "Okay then how do i print them vertically"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1563910749, "post_id": 57170891, "comment_id": 100855497, "body": "You can&#39;t print &quot;veritically&quot;.  You print a line at a time. Don&#39;t overthink it."}, {"owner": {"reputation": 13, "user_id": 11826319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hEpFFJ6kKxE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfo6_mmzM1mZ4oB1yMoGHPCULzbMA/photo.jpg?sz=128", "display_name": "The Fawcett", "link": "https://stackoverflow.com/users/11826319/the-fawcett"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1563910821, "post_id": 57170891, "comment_id": 100855523, "body": "@dbush okay i think i get you now"}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1563922130, "post_id": 57170891, "comment_id": 100859233, "body": "I think this should be closed as being as trivial as possible. Any text book on C will answer this!"}], "answers": [{"comments": [{"owner": {"reputation": 722, "user_id": 8049790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3927a57c023479b1d1edad79125dbf4e?s=128&d=identicon&r=PG&f=1", "display_name": "ejderuby", "link": "https://stackoverflow.com/users/8049790/ejderuby"}, "edited": false, "score": 0, "creation_date": 1563910940, "post_id": 57171118, "comment_id": 100855578, "body": "You beat me to an answer by 9 seconds."}], "tags": [], "owner": {"reputation": 2437, "user_id": 3861775, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/Ij1Eg.jpg?s=128&g=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/3861775/samuel"}, "is_accepted": true, "score": 1, "last_activity_date": 1563911025, "last_edit_date": 1563911025, "creation_date": 1563910824, "answer_id": 57171118, "question_id": 57170891, "link": "https://stackoverflow.com/questions/57170891/write-a-program-that-uses-a-for-loop-to-iterate-through-this-array-displaying-t/57171118#57171118", "title": "Write a program that uses a for-loop to iterate through this array, displaying the values stored at every index", "body": "<p>Here is a simple approach how you could do it:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int n = 10;\n    int a[] = {2, 4, 6, 8, 10, 12, 14, 16, 18, 20};  // 10 elements\n\n    printf(\"Index\\tValue\\n\");\n\n    for(int i=0; i&lt;n; i++){\n        printf(\"%d\\t%d\\n\", i, a[i]);\n    }\n\n    printf(\"\\n\\n\");\n    printf(\"Press any key to continue . . .\\n\");  \n    getchar();  \n\n    return 0;    \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 722, "user_id": 8049790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3927a57c023479b1d1edad79125dbf4e?s=128&d=identicon&r=PG&f=1", "display_name": "ejderuby", "link": "https://stackoverflow.com/users/8049790/ejderuby"}, "is_accepted": false, "score": 2, "last_activity_date": 1563911489, "last_edit_date": 1563911489, "creation_date": 1563910833, "answer_id": 57171122, "question_id": 57170891, "link": "https://stackoverflow.com/questions/57170891/write-a-program-that-uses-a-for-loop-to-iterate-through-this-array-displaying-t/57171122#57171122", "title": "Write a program that uses a for-loop to iterate through this array, displaying the values stored at every index", "body": "<p><code>(&amp;a)[1]-a</code> is not good syntax or what you want to do here. I believe this would get the address of <code>a</code>, add 1, and subtract the address of <code>a</code>, so you would end up with a value of 1. This will make your <code>for</code> loop run only once. You want it to run as many times as there are values in your array so that it prints each value in it.</p>\n\n<p>Make a global constant of the length of the array, and use that. I used <code>LEN</code>.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\n#define LEN 10\n\nint main()\n{\n    int a[LEN] = {2, 4, 6, 8, 10, 12, 14, 16, 18, 20};  // 10 elements\n    int i;\n\n    // Header\n    printf(\"Index\\tValue\");\n\n    for(i = 0; i &lt; LEN; i++)\n        printf(\"%d\\t%d\\n\", i, a[i]); // `\\n` newline to print next values on next line\n\n    printf(\"\\n\\n\");\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11826319, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hEpFFJ6kKxE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfo6_mmzM1mZ4oB1yMoGHPCULzbMA/photo.jpg?sz=128", "display_name": "The Fawcett", "link": "https://stackoverflow.com/users/11826319/the-fawcett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 57171118, "answer_count": 2, "score": 1, "last_activity_date": 1563911489, "creation_date": 1563909724, "last_edit_date": 1563911430, "question_id": 57170891, "link": "https://stackoverflow.com/questions/57170891/write-a-program-that-uses-a-for-loop-to-iterate-through-this-array-displaying-t", "title": "Write a program that uses a for-loop to iterate through this array, displaying the values stored at every index", "body": "<p>I have written a small program that holds an array of 10 numbers, I wish for the output of the program to look like this:</p>\n\n<p><PRE>\nIndex  Value\n0      2\n1      4\n2      6\n3      8\n4      10\n5      12\n6      14\n7      16\n8      18\n9      20\n</PRE></p>\n\n<p>However I do not know how to make my code do that. This is my code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int a[10] = {2, 4, 6, 8, 10, 12, 14, 16, 18, 20};  // 10 elements\n    int i;\n\n    for(i=0; i&lt;(&amp;a)[1]-a; i++)\n        printf(\"%d \", a[i]);\n\n    printf(\"\\n\\n\");\n\n    return 0;    \n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "unix", "tcp", "client-server"], "comments": [{"owner": {"reputation": 716, "user_id": 9969356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pD3m-C36B4I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1D7oWVmGPi3Wfxj7hc5UPIpNj5sA/mo/photo.jpg?sz=128", "display_name": "Zachary Oldham", "link": "https://stackoverflow.com/users/9969356/zachary-oldham"}, "edited": false, "score": 1, "creation_date": 1563908615, "post_id": 57170615, "comment_id": 100854614, "body": "Could you add the code on the client side?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1563909137, "post_id": 57170615, "comment_id": 100854805, "body": "Why do you <i>WANT</i> to receive a <code>SIGPIPE</code> signal?  Most socket devs DON&#39;T want <code>SIGPIPE</code> to happen as it terminates their apps if unhandled. Disabling <code>SIGPIPE</code> via <code>setsockopt(..., SOL_SOCKET, SO_NOSIGPIPE, ...)</code> or <code>recv(..., MSG_NOSIGNAL)</code>/<code>send(..., MSG_NOSIGNAL)</code> is typically preferred, then you can simply handle the <code>write()</code>/<code>send()</code> failure directly."}, {"owner": {"reputation": 61, "user_id": 11121537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd462db1921900266a96519037dcad1d?s=128&d=identicon&r=PG&f=1", "display_name": "ABC", "link": "https://stackoverflow.com/users/11121537/abc"}, "edited": false, "score": 0, "creation_date": 1563909933, "post_id": 57170615, "comment_id": 100855147, "body": "I simply want to understand why I don&#39;t receive it. Furthermore it is convenient to me because if the server has closed the socket, the client does not know it so when the client writes using write () the client receives a SIGPIPE and closes."}, {"owner": {"reputation": 61, "user_id": 11121537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd462db1921900266a96519037dcad1d?s=128&d=identicon&r=PG&f=1", "display_name": "ABC", "link": "https://stackoverflow.com/users/11121537/abc"}, "edited": false, "score": 0, "creation_date": 1563910129, "post_id": 57170615, "comment_id": 100855237, "body": "At this point it would be nice to understand when and who receives a SIGPIPE in the socket area.  Also when the server closes the socket channel following a setsockop () set to TIMEOUT how do I notify the client of the socket closure? This timeout can occur at any point in the code and therefore I cannot agree with the client of this closure. This is why I needed a SIGPIPE."}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1563910550, "post_id": 57170615, "comment_id": 100855425, "body": "@AAA: it would be really helpful to have your code in order to understand your problem. See also <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">How to create a Minimal, Reproducible Example</a>."}, {"owner": {"reputation": 61, "user_id": 11121537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd462db1921900266a96519037dcad1d?s=128&d=identicon&r=PG&f=1", "display_name": "ABC", "link": "https://stackoverflow.com/users/11121537/abc"}, "edited": false, "score": 0, "creation_date": 1563911163, "post_id": 57170615, "comment_id": 100855678, "body": "Code is too long, I&#39;m sorry. An answer to the last message I wrote in the comments would be perfect. Excuse me if I don&#39;t put the code."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1563912450, "post_id": 57170615, "comment_id": 100856203, "body": "I have closed your question as a duplicate of one I had answered before. Also, there  seem to be related questions with answers listed (on my browser, they appear toward the bottom of the related list in the RHS column). They all seem to provide an answer to your question. If you feel your question is actually distinct, then you will need to edit your question with the distinguishing information, and ask for it to be reopened."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1563931018, "post_id": 57170615, "comment_id": 100860653, "body": "@AAA &quot;<i>when the server closes the socket channel following a setsockop () set to TIMEOUT</i>&quot; - What <code>TIMEOUT</code> are you referring to exactly? I assume you mean <code>SO_RCVTIMEO</code>/<code>SO_SNDTIMEO</code>? If an operation times out and you want to close the socket, then just close the socket. &quot;<i>how do I notify the client of the socket closure?</i>&quot; - if you close the socket <i>properly</i> and <i>gracefully</i>, the client will get a return value of 0 on any subsequent read operation. The client can detect that condition and close its socket. &quot;<i>This is why I needed a SIGPIPE</i>&quot; - I see no need to use <code>SIGPIPE</code> here."}, {"owner": {"reputation": 61, "user_id": 11121537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd462db1921900266a96519037dcad1d?s=128&d=identicon&r=PG&f=1", "display_name": "ABC", "link": "https://stackoverflow.com/users/11121537/abc"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1564091631, "post_id": 57170615, "comment_id": 100927442, "body": "@RemyLebeau Yes, I was talking about SO_RCVTIMEO. When this time is over on server, setsockop closes automatically the socket or not?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1564093499, "post_id": 57170615, "comment_id": 100927900, "body": "@AAA no, it does not. You have to <code>close()</code> the socket yourself"}, {"owner": {"reputation": 61, "user_id": 11121537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd462db1921900266a96519037dcad1d?s=128&d=identicon&r=PG&f=1", "display_name": "ABC", "link": "https://stackoverflow.com/users/11121537/abc"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1564150345, "post_id": 57170615, "comment_id": 100947847, "body": "@RemyLebeau Perfect thanks. So if I need to close socket when N seconds are passed during a read(or recv): I need to check return value of function read(), if it&#39;s 0 with errno = SPECIFIC ERROR I can close(). if it isn&#39;t 0 but is lower than value I expected I can close(). But if I don&#39;t have a situation where I already know the size of the message that I will have to receive, how do I do it? Thanks, you are helping me a lot!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1564157503, "post_id": 57170615, "comment_id": 100951747, "body": "@ABC if a timeout occurs, you don&#39;t know the state of the socket or the messaging, so the only sane thing to do is close the socket (unless you are writing a proxy). TCP is a byte stream, it has no concept of message boundaries. That is for the messaging protocol to dictate. You have to follow the protocol to know where one message ends and the next begins. Don&#39;t rely on read timeouts for that. What is your actual situation? What protocol are your client and server using to format their messages back and forth? Please <a href=\"https://stackoverflow.com/posts/57170615/edit\">edit</a> your question to add that information, and a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your code"}, {"owner": {"reputation": 61, "user_id": 11121537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd462db1921900266a96519037dcad1d?s=128&d=identicon&r=PG&f=1", "display_name": "ABC", "link": "https://stackoverflow.com/users/11121537/abc"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1565122336, "post_id": 57170615, "comment_id": 101250985, "body": "@RemyLebeau what can be useful &quot;setsockop () set to TIMEOUT&quot; then? A practical example could clarify my ideas. The code is too long not worth publishing. Thanks in advance!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1565124202, "post_id": 57170615, "comment_id": 101251606, "body": "@ABC read timeouts are still useful, even though you shouldn&#39;t use them to detect message boundaries. For instance, you could <code>select()</code>/<code>epoll()</code> or equivalent to detect the beginning of a new message, and then use <code>SO_RCVTIMEO</code> to make sure that <code>read()</code>/<code>recv()</code> aborts with an error if it takes too long to read all of the bytes of the complete message (network congestion, etc). &quot;<i>The code is too long not worth publishing</i>&quot; - that is why I asked for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that shows the same kind of logic you are trying to implement in your real code."}], "owner": {"reputation": 61, "user_id": 11121537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd462db1921900266a96519037dcad1d?s=128&d=identicon&r=PG&f=1", "display_name": "ABC", "link": "https://stackoverflow.com/users/11121537/abc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1563911827, "answer_count": 0, "score": 0, "last_activity_date": 1563908387, "creation_date": 1563908387, "question_id": 57170615, "link": "https://stackoverflow.com/questions/57170615/the-sigpipe-signal-is-not-received", "closed_reason": "Duplicate", "title": "The SIGPIPE signal is not received", "body": "<p>I have a client and a server that communicate with TCP sockets streams.</p>\n\n<p>The server accepts a connection from the client. Immediately afterwards, to test, I close the connection with the <code>close()</code> system call and in the client I write, with <code>write()</code>, exactly after the aforementioned <code>close()</code>. </p>\n\n<p>From what I understand the client should receive a <strong>SIGPIPE</strong> in the client which I can then manage or not. My problem is that <strong>I don't receive this signal</strong> but a particular thing happens, I enter the string with fgets I save the string in a buffer and I send the string with some write () and the program doesn't stop, the program remains so until when in the server I don't press CTRL + C. When I send SIGINT to the server, the client executes the following lines. Why don't I receive SIGPIPE and why do I have this behavior?\nThanks!</p>\n"}, {"tags": ["python", "c"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1563905207, "post_id": 57169894, "comment_id": 100853180, "body": "&quot;What does it refer to?&quot; -- what does this mean?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1563905231, "post_id": 57169894, "comment_id": 100853191, "body": "Have you tried  <code>print</code> ?"}, {"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 1, "creation_date": 1563905342, "post_id": 57169894, "comment_id": 100853248, "body": "<a href=\"https://pyformat.info/\" rel=\"nofollow noreferrer\">pyformat.info</a>"}, {"owner": {"reputation": 67, "user_id": 8127119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40b41500c45c2989149cc4c6217b992a?s=128&d=identicon&r=PG&f=1", "display_name": "Sthln", "link": "https://stackoverflow.com/users/8127119/sthln"}, "edited": false, "score": 0, "creation_date": 1563905375, "post_id": 57169894, "comment_id": 100853269, "body": "What is the function of <code>printf</code> in the code?"}, {"owner": {"reputation": 3038, "user_id": 1383932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PTWBS.png?s=128&g=1", "display_name": "fiveelements", "link": "https://stackoverflow.com/users/1383932/fiveelements"}, "edited": false, "score": 0, "creation_date": 1563905483, "post_id": 57169894, "comment_id": 100853324, "body": "It prints formatted output. The equivalent in python is print()"}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1563905502, "post_id": 57169894, "comment_id": 100853331, "body": "It prints out the data for a given iteration. Set kprint to the iteration number you want to display."}, {"owner": {"reputation": 63648, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1563906071, "post_id": 57169894, "comment_id": 100853560, "body": "as an aside, using numpy for this doesn&#39;t make any sense, at least not in the way you are using it."}], "answers": [{"tags": [], "owner": {"reputation": 780, "user_id": 1034677, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/537e6333a0f3383d3e99a4d75c827e7e?s=128&d=identicon&r=PG", "display_name": "tim", "link": "https://stackoverflow.com/users/1034677/tim"}, "is_accepted": true, "score": 2, "last_activity_date": 1563905464, "creation_date": 1563905464, "answer_id": 57169979, "question_id": 57169894, "link": "https://stackoverflow.com/questions/57169894/recoding-from-c-to-python/57169979#57169979", "title": "Recoding from C to Python", "body": "<p>Just <code>print()</code> in Python with <code>.format</code>.</p>\n\n<p>For example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>x, y = 1, 2\n\nprint(\"x = {0}, y = {1}\".format(x, y))\n</code></pre>\n\n<p><a href=\"https://docs.python.org/3/library/string.html#format-string-syntax\" rel=\"nofollow noreferrer\">Here's the doc</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11826250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d11e36821ae729d443baeca3180f02c1?s=128&d=identicon&r=PG&f=1", "display_name": "joep", "link": "https://stackoverflow.com/users/11826250/joep"}, "is_accepted": false, "score": 0, "last_activity_date": 1563907330, "last_edit_date": 1563907330, "creation_date": 1563905671, "answer_id": 57170023, "question_id": 57169894, "link": "https://stackoverflow.com/questions/57169894/recoding-from-c-to-python/57170023#57170023", "title": "Recoding from C to Python", "body": "<p>it just <code>print()</code> (see a small program below)</p>\n\n<pre><code>squares = []\nfor x in range(14):\n squares.append(x**2)\n\nsquares\n\nsquares2 = [x**2 for x in range(100)]\n\nprint (squares2) \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1563939878, "post_id": 57170319, "comment_id": 100862110, "body": "The last sentence is incorrect. Format strings do <b>absolutely not</b> support &quot;consider number as a float&quot; - they&#39;re formatting instructions <i>for</i> a float."}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 2, "last_activity_date": 1563908432, "last_edit_date": 1563908432, "creation_date": 1563907085, "answer_id": 57170319, "question_id": 57169894, "link": "https://stackoverflow.com/questions/57169894/recoding-from-c-to-python/57170319#57170319", "title": "Recoding from C to Python", "body": "<p>To print similar to C's printf, the following is an example:</p>\n\n<pre><code>f = 3.25645\ng = 3.14159265358979\n\nfor fl in (f,g):\n    print(f'{fl:.2f}')\n\n\n3.26\n3.14\n</code></pre>\n\n<p>The first <code>f</code> in the <code>print</code> is the <code>format</code> specifier. The <code>f</code> in the braces says to consider the number as a float.</p>\n"}], "owner": {"reputation": 67, "user_id": 8127119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40b41500c45c2989149cc4c6217b992a?s=128&d=identicon&r=PG&f=1", "display_name": "Sthln", "link": "https://stackoverflow.com/users/8127119/sthln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 57169979, "answer_count": 3, "score": 0, "last_activity_date": 1563908432, "creation_date": 1563905084, "last_edit_date": 1563905226, "question_id": 57169894, "link": "https://stackoverflow.com/questions/57169894/recoding-from-c-to-python", "title": "Recoding from C to Python", "body": "<p>I'm pretty much a layman in C and I'm learning Python. I need to write the routine described below (in C) for Python:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nmain()\n{\n    float   hold[26], hnew[26];\n    float   dt, dx;\n    float   t, s;\n    float   ho;\n    float   time;\n    float   f1, d2h;\n\n    int i;\n    int nx, nlx;\n    int n, nend;\n    int kount, kprint;\n\n\n    dt  = 5.0;\n    dx  = 10.0;\n    t   = 0.02;\n    s   = 0.002;\n    nx  = 11;\n    nlx = nx-1;\n\n\n    ho = 16.0;\n    for( i = 1;  i &lt;= nx;  i++ )\n    {\n        hold[i] = ho;\n        hnew[i] = ho;\n    }\n\n    hold[nx] = 11.0;\n\n    printf(\"\\t\\t\\t\\thead\\t\\t\\t\\t      time\\n\\n\");\n    kount  = 1;\n    kprint = 2;\n\n    time = dt;\n    nend = 100;\n\n\n    for( n = 1;  n &lt;= nend;  n++ )\n    {\n            /* update solution */\n\n        for( i = 2;  i &lt;= nlx;  i++ )\n        {\n            f1 = dt*t/s;\n            d2h = ( hold[i+1] - 2.0*hold[i] + hold[i-1])/(dx*dx);\n            hnew[i] = hold[i] + (f1*d2h);\n        }\n\n        for( i = 1;  i &lt;= nlx;  i++ )\n        {\n            hold[i] = hnew[i];\n        }\n\n\n        if( kount == kprint )\n        {\n            for( i = 1;  i &lt;= nx;  i++ )\n            {\n                printf(\" %.2f\",hold[i]);\n            }\n            printf(\"   %6.2f\\n\",time);\n            kount = 0;\n        }\n\n        time  = time + dt;\n        kount = kount + 1;\n    }\n}\n</code></pre>\n\n<p>This is my attempt at Python:</p>\n\n<pre><code>import numpy as np\ndt = 5.0\ndx = 10.0\nt = 0.02\ns = 0.002\nnx = 11\nnlx = nx - 1\nho = 16.0\n\nhold = np.zeros(nx+1)\nhnew = np.zeros(nx+1)\n\nfor i in range(nx):\n    hold[i] = ho\n    hnew[i] = ho\n\nhold[nx] = 11.0\n</code></pre>\n\n<p>However, I can't get over this because I don't know the Python correspondent of the <code>printf</code> function. What would be the correct form of this function in Python? What does it reffer to?</p>\n"}, {"tags": ["c++", "c", "struct"], "comments": [{"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 7, "creation_date": 1563905870, "post_id": 57169856, "comment_id": 100853473, "body": "This question can be investigated with a two-line program: <code>#include &lt;netinet&#47;in.h&gt;</code> followed by a definition that either includes <code>struct</code> or doesn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1563906213, "post_id": 57170059, "comment_id": 100853635, "body": "Stated broadly, this is incorrect. Sometimes, you are required to do that."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1563906793, "post_id": 57170059, "comment_id": 100853866, "body": "@SergeyA Ok. Yes, I know. But this was not a language-lawyer question so I didn&#39;t want to dig into the details of when there may be a function with the same name as a struct (like <code>stat</code>) and other situations where the keyword is needed. In <i>general</i> it is not needed in C++. The devil is in the details and yes, I agree there <i>are</i> details."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 2, "last_activity_date": 1563907201, "last_edit_date": 1563907201, "creation_date": 1563905841, "answer_id": 57170059, "question_id": 57169856, "link": "https://stackoverflow.com/questions/57169856/is-it-required-to-place-struct-in-front-of-a-struct-instance-in-c-when-you-u/57170059#57170059", "title": "Is it required to place &quot;struct&quot; in front of a struct instance in c++ when you use c header files?", "body": "<p>\"Is it required to place \"struct\" in front of a struct instance in c++\" - In <em>general</em>; No, That's a C'ism. Exceptions do exist though.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1563913996, "post_id": 57170713, "comment_id": 100856878, "body": "&quot;it is recognized as a C++ source by your system if the file ends with .cpp extension&quot; - That is <i>very</i> system and compiler dependant and <i>definitely not</i> universally true. Try AiX, VMS, Novell NetWare, DOS and their respective system compilers on for size. Just as an example"}], "tags": [], "owner": {"reputation": 1378, "user_id": 6370924, "user_type": "registered", "profile_image": "https://graph.facebook.com/1728062080744924/picture?type=large", "display_name": "Meraj al Maksud", "link": "https://stackoverflow.com/users/6370924/meraj-al-maksud"}, "is_accepted": true, "score": 1, "last_activity_date": 1565188221, "last_edit_date": 1565188221, "creation_date": 1563908856, "answer_id": 57170713, "question_id": 57169856, "link": "https://stackoverflow.com/questions/57169856/is-it-required-to-place-struct-in-front-of-a-struct-instance-in-c-when-you-u/57170713#57170713", "title": "Is it required to place &quot;struct&quot; in front of a struct instance in c++ when you use c header files?", "body": "<p>Even if you use all the <code>C</code> stuff (headers) in your program, at the end of the day it is recognized as a <code>C++</code> source by your system if the file ends with <code>.cpp</code> extension. So, if you don't need to put <strong>struct</strong> in front of every <code>struct</code> instance as long as your source file is a <code>C++</code> source file, it shouldn't show any compilation error.</p>\n\n<p>That implies NO as the answer to your question.</p>\n\n<p>Edit: As @JesperJuhl pointed out, this is not always true. Exceptions happen on AiX, VMS, Novell NetWare, DOS system. In that case, you'll need to use <code>struct</code> keyword before every instance.</p>\n"}], "owner": {"reputation": 49, "user_id": 11825978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4cee9b91526b6d091a9b3f8a479d5e0?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/11825978/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 57170713, "answer_count": 2, "score": 3, "last_activity_date": 1570475473, "creation_date": 1563904966, "last_edit_date": 1570475473, "question_id": 57169856, "link": "https://stackoverflow.com/questions/57169856/is-it-required-to-place-struct-in-front-of-a-struct-instance-in-c-when-you-u", "title": "Is it required to place &quot;struct&quot; in front of a struct instance in c++ when you use c header files?", "body": "<p>I am learning how to do socket programming, and I tried to recreate the functionality of a c program:\n<a href=\"https://beej.us/guide/bgnet/examples/showip.c\" rel=\"nofollow noreferrer\">https://beej.us/guide/bgnet/examples/showip.c</a> </p>\n\n<p>In <code>c++</code> (because I prefer c++ and its the language I intend to implement with) and it uses the headers:</p>\n\n<pre><code>stdio.h \nstring.h\nsys/types.h\nsys/socket.h\nnetdb.h\narpa/inet.h\nnetinet/in.h\n</code></pre>\n\n<p>I replaced <code>stdio.h</code> with <code>iostream</code> and <code>string.h</code> with <code>cstring</code> in my code.</p>\n\n<p>I essentially typed line by line the code in his program, reading docs as I went to try and understand each function and struct. I know that in c++ it is not required (as in c) to precede instances of a struct with the <strong><code>struct</code></strong> keyword, so anywhere there was a reference to a struct in his code I just omitted it.</p>\n\n<p>In compilation, all of the structs in netinet/in.h were undefined! After some time of troubleshooting and various errors, I just downloaded his program source and made sure it wasn't an issue with my standard library (Cygwin is iffy?) Worked like a charm, but I still wanted c++. </p>\n\n<p>I changed all <code>stdio</code> stuff to <code>iostream</code> and compiled it with <code>g++</code> instead of <code>gcc</code> and it still worked! The only thing that was different was having <strong><code>struct</code></strong> in front of addrinfo and the other structs. </p>\n\n<p><em>Is it required to place <strong><code>struct</code></strong> in front of a struct instance in c++ when you use c header files?</em></p>\n"}, {"tags": ["c", "linux", "gcc"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9943195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ac775b79c7a6269ca37e3d046f2578?s=128&d=identicon&r=PG&f=1", "display_name": "tfortmann", "link": "https://stackoverflow.com/users/9943195/tfortmann"}, "edited": false, "score": 0, "creation_date": 1563903836, "post_id": 57169095, "comment_id": 100852568, "body": "I read all of that in the man page.  I understand they are different formats, but what does that mean if/when I need to run gdb to debug a problem or look at a core file?  Do I lose functionality or is it just two different ways of including the same debugging information?  I&#39;m also assuming there is no difference in the generated executable code with the same -o0 optimization option."}, {"owner": {"reputation": 308, "user_id": 3927579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79c6744b7d14faaaa0cf636601f0aeb5?s=128&d=identicon&r=PG", "display_name": "tbejos", "link": "https://stackoverflow.com/users/3927579/tbejos"}, "reply_to_user": {"reputation": 21, "user_id": 9943195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ac775b79c7a6269ca37e3d046f2578?s=128&d=identicon&r=PG&f=1", "display_name": "tfortmann", "link": "https://stackoverflow.com/users/9943195/tfortmann"}, "edited": false, "score": 0, "creation_date": 1563904626, "post_id": 57169095, "comment_id": 100852929, "body": "@tfortmann from a quick test I did the executable code was the same, but the <code>-g3 -gdwarf-2</code> had some extra labels&#39;s that <code>-ggdb3</code> did not have (.LCFIx where x is a number) but the data following those labels was the same. The only other thing I noticed is some debug data had different values consistently (for example every <code>.uleb128 0x19</code> in <code>-ggdb3</code> was matched by a <code>.uleb128 0xc</code> in <code>-g3 -gdwarf-2</code>) but <code>-g3 -gdwarf-2</code> seems more verbose overall."}, {"owner": {"reputation": 21, "user_id": 9943195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ac775b79c7a6269ca37e3d046f2578?s=128&d=identicon&r=PG&f=1", "display_name": "tfortmann", "link": "https://stackoverflow.com/users/9943195/tfortmann"}, "edited": false, "score": 0, "creation_date": 1563911996, "post_id": 57169095, "comment_id": 100856028, "body": "Thank you.  This really helps."}], "tags": [], "owner": {"reputation": 308, "user_id": 3927579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79c6744b7d14faaaa0cf636601f0aeb5?s=128&d=identicon&r=PG", "display_name": "tbejos", "link": "https://stackoverflow.com/users/3927579/tbejos"}, "is_accepted": false, "score": 3, "last_activity_date": 1563901589, "creation_date": 1563901589, "answer_id": 57169095, "question_id": 57169007, "link": "https://stackoverflow.com/questions/57169007/is-there-a-negative-impact-changing-our-gcc-debug-build-options-from-ggdb3-to/57169095#57169095", "title": "Is there a negative impact changing our gcc debug build options from -ggdb3 to -g3 -gdwarf-2?", "body": "<p>From a brief read of the man page <code>-ggdb3</code> will</p>\n\n<blockquote>\n  <p>use the most expressive format available ( DWARF 2, stabs, or the native format if neither of those are supported), including GDB extensions if at all possible.</p>\n</blockquote>\n\n<p>whereas <code>-g3 -gdwarf-2</code> will </p>\n\n<blockquote>\n  <p>Produce debugging information in DWARF format (if that is supported). \n  This is the format used by DBX on IRIX 6. The value of version may be either 2 or 3; \n  the default version is 3.</p>\n  \n  <p>Note that with DWARF version 2 some ports require, and will always use,\n  some non-conflicting DWARF 3 extensions in the unwind tables.</p>\n</blockquote>\n\n<p>So it seems like <code>-ggdb3</code> may produce non DWARF 2 debugging info in certain cases and the <code>-g3 -gdwarf-2</code> will ensure that DWARF 2 is used.</p>\n\n<p><strong>EDIT:</strong> The <code>-g3</code> is needed because <code>-gdwarf-x</code> does not support appending the debug level to it where as <code>-ggdb</code> does support appending a debug level.</p>\n"}], "owner": {"reputation": 21, "user_id": 9943195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ac775b79c7a6269ca37e3d046f2578?s=128&d=identicon&r=PG&f=1", "display_name": "tfortmann", "link": "https://stackoverflow.com/users/9943195/tfortmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1563901589, "creation_date": 1563901134, "question_id": 57169007, "link": "https://stackoverflow.com/questions/57169007/is-there-a-negative-impact-changing-our-gcc-debug-build-options-from-ggdb3-to", "title": "Is there a negative impact changing our gcc debug build options from -ggdb3 to -g3 -gdwarf-2?", "body": "<p>Our security team has a new code scanner that requires the gcc -g3 -gdwarf-2 build options.  We normally use -ggdb3.  Before I change our default build, I want to make sure this does not negatively impact the debug information or generated executable code.  From the documentation it is hard to tell the difference.  Does anyone have any insight on the differences between these two options?  I'm building on a CentOS 7 distribution with gcc 4.8.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 3, "creation_date": 1563899589, "post_id": 57168545, "comment_id": 100850704, "body": "&quot;I should get an error but I did not why?&quot; Why?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1563900194, "post_id": 57168545, "comment_id": 100850981, "body": "MSVC gives <code>error C2078: too many initializers</code>."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 5, "creation_date": 1563900446, "post_id": 57168545, "comment_id": 100851100, "body": "It&#39;s not a good idea to hide array and pointer types inside typedefs for this very reason: it makes the code hard to read and reason about."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1563900715, "post_id": 57168545, "comment_id": 100851214, "body": "A <code>typedef</code> on an <i>array of one, which is not really an array</i> is super odd."}, {"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 1, "creation_date": 1563903493, "post_id": 57168545, "comment_id": 100852419, "body": "This is weird code. Is it really defining an array of 5 arrays of 1 int? Is that even legal? The size of that should indeed be 20, if the structure is at all valid!"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 10328700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47fd56882fce65669e29897f7761765f?s=128&d=identicon&r=PG&f=1", "display_name": "KSoni", "link": "https://stackoverflow.com/users/10328700/ksoni"}, "is_accepted": false, "score": 1, "last_activity_date": 1563927127, "creation_date": 1563927127, "answer_id": 57173654, "question_id": 57168545, "link": "https://stackoverflow.com/questions/57168545/why-i-did-not-get-any-error-between-these-lines-typedef-int-floa1-floa-a/57173654#57173654", "title": "Why I did not get any error? between these lines--- typedef int floa[1]; floa a[5]={5,6,1,2,6,8};", "body": "<h2>crux is here:  typedef int floa[1]</h2>\n\n<pre><code>#include &lt;stdio.h&gt;                                                                                      \nint main()                                                                                              \n{                                                                                                           \n    typedef int floa[3];                                                                                \n    floa a[4]={5,6,1,2};                                                                                \n\n    printf(\"the value is %u value:%d %d %d %d %d %d %d %d\",sizeof(a), a[0][0], a[0][1], a[0][2], a[0][3], a[1][0], a[1][1], a[1][2], a[1][3]);\n    return 0;                                                                                           \n} \n</code></pre>\n\n<p>Run above code and you will understand ur code. above code gives size = 48, so basically your typedef is creating \"m x n\" matrix effect.</p>\n\n<p>But as Lee Daniel Crocker mentioned, it is not good idea to hide the array within typedef.</p>\n"}], "owner": {"reputation": 11, "user_id": 11825890, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vNmu-bZAceo/AAAAAAAAAAI/AAAAAAAAAPY/CW8XQftTULI/photo.jpg?sz=128", "display_name": "Sounak Mondal", "link": "https://stackoverflow.com/users/11825890/sounak-mondal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1563927127, "creation_date": 1563899279, "question_id": 57168545, "link": "https://stackoverflow.com/questions/57168545/why-i-did-not-get-any-error-between-these-lines-typedef-int-floa1-floa-a", "title": "Why I did not get any error? between these lines--- typedef int floa[1]; floa a[5]={5,6,1,2,6,8};", "body": "<p>please explain the logic behind the code/..</p>\n\n<p>I do in codeblock. i got answer 20. why? please explain.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\nint main()\n{\n    typedef int floa[1];\n    floa a[5]={5,6,1,2,6,8};\n\n    printf(\"the value is %u\",sizeof(a));\n    return 0;\n}\n</code></pre>\n\n<p>I should get an error but I did not why?</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1563899798, "post_id": 57168484, "comment_id": 100850795, "body": "See <a href=\"https://askubuntu.com/q/44542/108339\">askubuntu.com/q/44542/108339</a> for an explanation of <code>umask</code>"}, {"owner": {"reputation": 291, "user_id": 10940200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bcf26897b6b11474aca7b13c0b53ce1?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/10940200/j-doe"}, "reply_to_user": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1563900151, "post_id": 57168484, "comment_id": 100850962, "body": "@OlafDietsche my friend run the 4-12 program which modify the file attr,I delete the foo and bar,run ./umask again,it runs as expected."}], "answers": [{"tags": [], "owner": {"reputation": 291, "user_id": 10940200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bcf26897b6b11474aca7b13c0b53ce1?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/10940200/j-doe"}, "is_accepted": true, "score": 0, "last_activity_date": 1563900054, "creation_date": 1563900054, "answer_id": 57168747, "question_id": 57168484, "link": "https://stackoverflow.com/questions/57168484/apue-code-chapter-4-umask-c-runs-abnormal/57168747#57168747", "title": "apue code chapter 4 umask.c runs abnormal", "body": "<p>It's embarrassed for me,I make a mistake.\nMy friend and I share the same virtual machine,he read the book faster than me.He runs 4-12 program,which the code like the following:</p>\n\n<pre><code>#include \"apue.h\"\n\nint\nmain(void)\n{\n    struct stat     statbuf;\n\n    /* turn on set-group-ID and turn off group-execute */\n\n    if (stat(\"foo\", &amp;statbuf) &lt; 0)\n        err_sys(\"stat error for foo\");\n    if (chmod(\"foo\", (statbuf.st_mode &amp; ~S_IXGRP) | S_ISGID) &lt; 0)\n        err_sys(\"chmod error for foo\");\n\n    /* set absolute mode to \"rw-r--r--\" */\n\n    if (chmod(\"bar\", S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH) &lt; 0)\n        err_sys(\"chmod error for bar\");\n\n    exit(0);\n}\n</code></pre>\n\n<p>As for this problem ,I delete the foo and bar,and run ./umask,then everything run well.</p>\n"}], "owner": {"reputation": 291, "user_id": 10940200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bcf26897b6b11474aca7b13c0b53ce1?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/10940200/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 57168747, "answer_count": 1, "score": 0, "last_activity_date": 1563900054, "creation_date": 1563899049, "question_id": 57168484, "link": "https://stackoverflow.com/questions/57168484/apue-code-chapter-4-umask-c-runs-abnormal", "title": "apue code chapter 4 umask.c runs abnormal", "body": "<p>I run ./umask as the following step:</p>\n\n<pre><code>[root filedir]#\n[root filedir]#ls\naccess    bar    cdpwd.c    changemod.c  devrdev.c  filetype.c  ftw8    Makefile  mycd.c  umask.c  unlink.c  zap.c\naccess.c  cdpwd  changemod  devrdev      filetype   foo         ftw8.c  mycd      umask   unlink   zap\n[root filedir]#./umask\n[root filedir]#ll foo bar\n-rw-r--r--. 1 root root 0 7\u6708  23 11:56 bar\n-rw-rw-rw-. 1 root root 0 7\u6708  23 11:56 foo\n</code></pre>\n\n<p>Here is the code umask.c</p>\n\n<pre><code>#include \"apue.h\"\n#include &lt;fcntl.h&gt;\n\n#define RWRWRW (S_IRUSR|S_IWUSR|S_IRGRP|S_IWGRP|S_IROTH|S_IWOTH)\n\nint\nmain(void)\n{\n    umask(0);\n    if (creat(\"foo\", RWRWRW) &lt; 0)\n        err_sys(\"creat error for foo\");\n    umask(S_IRGRP | S_IWGRP | S_IROTH | S_IWOTH);\n    if (creat(\"bar\", RWRWRW) &lt; 0)\n        err_sys(\"creat error for bar\");\n    exit(0);\n}\n</code></pre>\n\n<p>as the code above,umask(S_IRGRP | S_IWGRP | S_IROTH | S_IWOTH),why does bar has read access for group and other?</p>\n\n<p>system info :</p>\n\n<pre><code>[root filedir]#umask\n0022\n[root filedir]#cat /etc/redhat-release\nCentOS Linux release 7.6.1810 (Core)\n[root filedir]#gcc\ngcc 4.8.5\n\nLinux MiWiFi-R1CL-srv 3.10.0-957.21.3.el7.x86_64 #1 SMP Tue Jun 18 16:35:19 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n"}, {"tags": ["c", "dynamic-memory-allocation", "static-analysis", "frama-c", "memory-access"], "comments": [{"owner": {"reputation": 6600, "user_id": 1173674, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/364e5d67e6deec7330fdd25dc205e945?s=128&d=identicon&r=PG", "display_name": "anol", "link": "https://stackoverflow.com/users/1173674/anol"}, "edited": false, "score": 0, "creation_date": 1563901292, "post_id": 57168439, "comment_id": 100851452, "body": "I&#39;ll have to recheck it later, but I&#39;m afraid you need a relational invariant between the value of <code>n</code> used in the call to <code>malloc</code> and the loop. Without a way to keep that invariant, Eva cannot infer that the size used to allocate the dynamic array is the same as the loop bound. There are currently some weak relational domains in Eva, but I&#39;m afraid they are not able to maintain that information."}], "answers": [{"comments": [{"owner": {"reputation": 24266, "user_id": 946226, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5823d09208b1e4b63bbfcd189492032c?s=128&d=identicon&r=PG", "display_name": "Joachim Breitner", "link": "https://stackoverflow.com/users/946226/joachim-breitner"}, "edited": false, "score": 0, "creation_date": 1563961648, "post_id": 57178643, "comment_id": 100871055, "body": "Thanks, that unblocks me. I can run on lengths 1..10,100, which is a decent start."}], "tags": [], "owner": {"reputation": 8560, "user_id": 1633665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b603faf464ae55fcdd7dc2fb3b7ac063?s=128&d=identicon&r=PG", "display_name": "Virgile", "link": "https://stackoverflow.com/users/1633665/virgile"}, "is_accepted": false, "score": 1, "last_activity_date": 1563957395, "creation_date": 1563957395, "answer_id": 57178643, "question_id": 57168439, "link": "https://stackoverflow.com/questions/57168439/dynamic-array-with-frama-c-and-eva/57178643#57178643", "title": "Dynamic array with Frama-C and Eva", "body": "<p>As mentioned in anol's comment, none of the abstract domains available within Eva is capable of keeping track of the relation between <code>n</code> and the length of the memory block returned by <code>malloc</code>. Hence, for all practical purposes, it will not be possible to get rid of the warning in such circumstances for a real-life analysis. Generally speaking, it is important to prepare an initial state which leads to precise bounds for the buffer that are manipulated throughout the program (while the content can stay much more abstract).</p>\n\n<p>That said, <strong>for smaller experiments</strong>, and if you don't mind wasting (quite a lot of) CPU cycles, it is possible to cheat a little bit, by basically instructing Eva to consider each possible length separately. This is done by a few annotations and command-line options (Frama-C 19.0 Potassium only)</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdint.h&gt;\n#include &lt;stddef.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"__fc_builtin.h\"\n\nextern char *foo(char *, char *);\n\nint main() {\n  int n = Frama_C_interval(0, 255);\n  //@ split n;\n  uint8_t *test = malloc(n);\n  if (test != NULL) {\n    //@ loop unroll n;\n    for (int i=0; i&lt;n; i++) {\n      Frama_C_show_each_test(n, i, test);\n      test[i]=Frama_C_interval(0, 255);\n    }\n    char* beg, *end;\n    beg = &amp;test[0];\n    end = &amp;test[0] + n;\n    foo(beg, end);\n  }\n}\n</code></pre>\n\n<p>Launch Frama-C with</p>\n\n<pre><code>  frama-c -eva file.c \\\n          -eva-precision 7 \\\n          -eva-split-limit 256 \\\n          -eva-builtin malloc:Frama_C_malloc_fresh\n</code></pre>\n\n<p>In the code, <code>//@ split n</code> indicates that Eva should consider separately each possible value of <code>n</code> at this point. It goes along with the <code>-eva-split-limit 256</code> (by default, Eva won't split if the expression can have more than 100 values). <code>//@ loop unroll n</code> ask to unroll the loop <code>n</code> times instead of merging results for all steps.</p>\n\n<p>For the other command-line options, <code>-eva-precision 7</code> sets the various parameters controlling Eva precision to sensible values. It goes from <code>0</code> (less precise than default) up to <code>11</code> (maximal precision - don't try it on anything more than a dozen of lines). <code>-eva-builtin malloc:Frama_C_malloc_fresh</code> instructs Eva to create a fresh base address for any call to <code>malloc</code> it encounters. Otherwise, you'd get a single base for all lengths, defeating the purpose of splitting on <code>n</code> in the first place.</p>\n"}], "owner": {"reputation": 24266, "user_id": 946226, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5823d09208b1e4b63bbfcd189492032c?s=128&d=identicon&r=PG", "display_name": "Joachim Breitner", "link": "https://stackoverflow.com/users/946226/joachim-breitner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563957395, "creation_date": 1563898872, "question_id": 57168439, "link": "https://stackoverflow.com/questions/57168439/dynamic-array-with-frama-c-and-eva", "title": "Dynamic array with Frama-C and Eva", "body": "<p>In <a href=\"https://stackoverflow.com/a/57116260/946226\">https://stackoverflow.com/a/57116260/946226</a> I learned how to verify that a function <code>foo</code> that operates on a buffer (given by a begin and end pointer) really only reads form it, but creating a representative <code>main</code> function that calls it:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stddef.h&gt;\n\n#define N 100\nchar test[N];\n\nextern char *foo(char *, char *);\n\nint main() {\n  char* beg, *end;\n  beg = &amp;test[0];\n  end = &amp;test[0] + N;\n  foo(beg, end);\n}\n</code></pre>\n\n<p>but this does not catch bugs that only appear when the buffer is very short.</p>\n\n<p>I tried the following:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stddef.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"__fc_builtin.h\"\n\nextern char *foo(char *, char *);\n\nint main() {\n  int n = Frama_C_interval(0, 255);\n  uint8_t *test = malloc(n);\n  if (test != NULL) {\n    for (int i=0; i&lt;n; i++) test[i]=Frama_C_interval(0, 255);\n\n    char* beg, *end;\n    beg = &amp;test[0];\n    end = &amp;test[0] + n;\n    foo(beg, end);\n  }\n}\n</code></pre>\n\n<p>But that does not work:</p>\n\n<pre><code>[eva:alarm] frama-main.c:14: Warning: \n  out of bounds write. assert \\valid(test + i);\n</code></pre>\n\n<p>Can I make it work?</p>\n"}, {"tags": ["c", "floating-point", "ieee-754"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1563899830, "post_id": 57168435, "comment_id": 100850812, "body": "OT: My preference would be to use the ubiquitous text format and not invent another one, which needs thorough documentation and understanding by users. A <code>float</code> can be stored textually in about 10 bytes and can be read by humans too."}, {"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1563900383, "post_id": 57168435, "comment_id": 100851061, "body": "I need to communicate it over a stream which can accept 20 bytes in a message. I can&#39;t use text format."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1563901213, "post_id": 57168435, "comment_id": 100851418, "body": "The first two lines are ranging the (absolute) <code>float</code> value as <code>1.0 \u2264 fnorm &lt; 2.0</code> with an adjustment to the exponent. From there on is the &quot;new&quot; representation under rules that every single user will have to learn and I&#39;ll pass on that, but presumably <code>1.0</code> is subtracted so that the significand can be in the range  <code>0.0 \u2264 fnorm &lt; 1.0</code> It&#39;s going to be hardly any quicker than converting to text, when the 20 byte message size is adequate."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1563901988, "post_id": 57168435, "comment_id": 100851736, "body": "The code in the question was not written merely for extracting the significand from a <code>float</code> or <code>double</code>. It was written to convert a floating-point value to a type with a narrower significand. The <code>+ 0.5f</code> rounds the value (with ties toward infinity). When merely extracting a significand, there would be nothing to round."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1563902183, "post_id": 57168435, "comment_id": 100851815, "body": "In any case, the first two lines are intended to adjust the scale of the number so it is in the half-open interval [1, 2). Once it is known to be in that interval, multiplying by 2**<code>significandbits</code> and converting to an integer produces a copy of the significand bits. Subtracting 1 prior to that multiplication removes the leading 1 bit that is implicit in the significands of normal numbers. That code is not suitable for handling subnormal numbers. Also, the loop is unnecessary; C provides the <code>frexp</code> function for extracting the fraction (significand) and exponent of a floating-point number."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1563902295, "post_id": 57168435, "comment_id": 100851863, "body": "Most commonly a <code>float</code> is 32-bits in C implementations. Why do you want to store it in a <code>uint64_t</code>? Do you want to store a <code>double</code> in a <code>uint64_t</code> or <code>float</code> in a <code>uint32_t</code>? Would it suffice to support big endian and little endian or must you support any memory layout of a <code>float</code> even with some mixed-order storage of its bits?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 2, "creation_date": 1563902323, "post_id": 57168435, "comment_id": 100851869, "body": "IEEE-754 is already completely specified to the bit level. Just choose an endiannes for the transmission and make sure each end converts if needed."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1563903368, "post_id": 57168435, "comment_id": 100852373, "body": "It&#39;s certainly going to be less work if you use a common standard, otherwise you&#39;ll force <i>every</i> user to convert your home-brew format; not just those systems that use a different format."}, {"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "edited": false, "score": 0, "creation_date": 1563904203, "post_id": 57168435, "comment_id": 100852730, "body": "Just making sure <code>fnorm</code> lies between <code>0.0</code> and <code>1.0</code> (in decimal), making it to convert to form <code>1.xxxxxx...</code> in binary?"}, {"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1563904341, "post_id": 57168435, "comment_id": 100852794, "body": "I am considering to use <code>frexp</code> in my implementation. @EricPostpischil"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1563904469, "post_id": 57168435, "comment_id": 100852847, "body": "The whole thing is a thoroughly bad idea. All you are doing is creating <i>more</i> complication by inventing another format. Those who inherit your code will sigh and and mutter &quot;Oh, the abhiarora format&quot;."}, {"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1563904784, "post_id": 57168435, "comment_id": 100852986, "body": "@WeatherVane I am just trying to understand that code. The code above tries to pack the code in <code>IEEE 754 format</code>. I am not trying to invent something of my own. I am having only 20 bytes message size and it will have another parameters as well (like <code>int</code>, <code>char</code>). I have already a microcontroller platform which accepts the data in binary messages. I need to write a <code>Desktop</code> application which can communicate with these microcontroller units using my own libraries and I have to use IEEE 754 only to send float across the network."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1563904940, "post_id": 57168435, "comment_id": 100853055, "body": "@abhiarora: If you have a number in an IEEE-754 format, such as in a <code>float</code> or <code>double</code> where your implementation uses IEEE-754 for those types, then the easiest way to prepare it for network transmission is to read its bytes using an <code>unsigned char *</code>, and the only issue is what order to send the bytes in. You should not write code to manipulate the number mathematically in order to encode it into a format for transmission\u2014that is already done for you by the C <code>float</code> or <code>double</code> type."}, {"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "edited": false, "score": 0, "creation_date": 1563905042, "post_id": 57168435, "comment_id": 100853102, "body": "You are right but what if the code has to be used in a platform which doesn&#39;t use IEEE754 and it doesn&#39;t use Binary32 format?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1563905082, "post_id": 57168435, "comment_id": 100853122, "body": "@abhiarora: If you do not have a number in an IEEE-754 format, then code somewhat like the above can be used to transform the number into parts that you could use construct an IEEE-754 format, which you would then send over the network. (But it is unlikely your C implementation is not using an IEEE-754 format for <code>float</code> and <code>double</code>. Or, if you are writing for great portability, so you do not know the formats of the target C implementation and must accommodate any C floating-point type generally, then you have considerably more work to do.)"}, {"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "edited": false, "score": 0, "creation_date": 1563905299, "post_id": 57168435, "comment_id": 100853222, "body": "Because the code can be used in another weird microcontroller to communicate with the modules. So, the problem is those system may be using some other implementation and they need a library support to communicate with those modules. I hope you understand my situation I am in."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1563905316, "post_id": 57168435, "comment_id": 100853233, "body": "To supporting floating-point types in any C implementation, including those that do not use IEEE-754, you should refer to the characteristics of C floating types in C 2018 5.2.4.2.2. Each floating-point type has a sign, a base/radix <i>b</i>, an exponent, a precision <i>p</i>, and <i>p</i> digits in the base. So you need a format that can accommodate a bit for the sign, an positive integer for the base (which can theoretically be any size), an integer for the exponent (which can range between implementation-dependent values), an integer for the precision, and an arbitrary number <i>p</i> of base-<i>b</i> digits."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1563905565, "post_id": 57168435, "comment_id": 100853355, "body": "So writing code to convert <i>any</i> C-conforming floating-point type to a single format (like IEEE-754 binary32) for transmission involves a considerable amount of code\u2014it would need to perform conversions from one base to another, possibly for very large or small numbers, requiring thousands of digits. You really do not want that. Most likely, the solution you want uses the preprocessor to test values defined in <code>&lt;float.h&gt;</code> to ensure an IEEE-754 format is being used and then proceeds to send the bytes of a <code>float</code> or <code>double</code> without any transformation needed, just adjustments for byte order."}, {"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "edited": false, "score": 0, "creation_date": 1563905793, "post_id": 57168435, "comment_id": 100853441, "body": "Sure. I think you are right. I will code that way."}, {"owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "edited": false, "score": 0, "creation_date": 1563911895, "post_id": 57168435, "comment_id": 100855975, "body": "@abhiarora: Don&#39;t forget the best way is to avoid/forbid the use of floating point in the first place. It&#39;s almost never needed and almost always annoying, and some microcontrollers don&#39;t support floating point (and need to emulate it in software, which is slow). Typical you can just use integers with an implied scale everywhere instead (e.g. rather than have &quot;floating point height of person in meters&quot; use &quot;integer height of person in millimeters&quot; or ....), and avoid a lot of problems (caused by the &quot;precision depends on magnitude&quot; nature of floating point) and avoid a lot of buggy bloat."}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1563902943, "post_id": 57169259, "comment_id": 100852162, "body": "The significand does not always have the form \u201c1.xxxxxx\u2026\u201d It has a leading 1 for normal numbers and a leading 0 for subnormal numbers. Code to serialize and deserialize floating-point data must take this into account. (\u201cSignificand\u201d is the preferred term for the fraction portion of a floating-point representation. \u201cMantissa\u201d is an old term for the fraction part of a logarithm.)"}, {"owner": {"reputation": 7495, "user_id": 11527076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqgpS.png?s=128&g=1", "display_name": "prog-fh", "link": "https://stackoverflow.com/users/11527076/prog-fh"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1563903410, "post_id": 57169259, "comment_id": 100852392, "body": "@EricPostpischil yes, thanks, and since I don&#39;t know the exact motivation behind this, may be should I delete... I&#39;m afraid this answer is more confusing than helpful. Depends on what was the real point of the question; I guess it was about the -1.0 but, out of this context I am not sure the answer is useful."}, {"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "edited": false, "score": 0, "creation_date": 1563904807, "post_id": 57169259, "comment_id": 100852999, "body": "Just making sure fnorm lies between 0.0 and 1.0 (in decimal), making it to convert to form 1.xxxxxx... in binary?"}], "tags": [], "owner": {"reputation": 7495, "user_id": 11527076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqgpS.png?s=128&g=1", "display_name": "prog-fh", "link": "https://stackoverflow.com/users/11527076/prog-fh"}, "is_accepted": false, "score": 1, "last_activity_date": 1563908850, "last_edit_date": 1563908850, "creation_date": 1563902290, "answer_id": 57169259, "question_id": 57168435, "link": "https://stackoverflow.com/questions/57168435/normalization-part-of-a-code-of-packing-a-float-ieee-754-into-uint64-t/57169259#57169259", "title": "Normalization part of a code of Packing a Float (IEEE-754) into uint64_t", "body": "<p>The <code>while</code> loops adjust the exponent in order to place the first binary 1 of <code>fnorm</code> just before the dot (in base 2).<br>\nSo at most <code>fnorm</code> is 1.1111111... in base 2, which is almost 2.0 in base 10.<br>\nAt least <code>fnorm</code> is 1.000000... in base 2, which is 1.0 in base 10.<br></p>\n\n<p>In IEEE754, the significand of a normalised number (not subnormal) has the form 1.xxxxxx... (base 2), which conforms to the previous loops.<br>\nThe first bit, before the dot, is always 1 that's why <strong>it is not necessary to memorize it</strong>.<br>\n(may be this last remark is the main point of your question)</p>\n\n<p>After normalisation, your algorithm substracts 1.0, which leads to 0.xxxxx... as you saw.<br>\nSubstracting 1.0 does not lose any information as long as we remember this substraction is systematic.<br>\nMultiplying this float value (strictly less than 1.0, but not negative) by the integer <code>1LL&lt;&lt;significandbits</code> gives a float which is strictly less than this big integer.<br>\nThus, converting it into an integer will give a value that does not overflow the significant bits.<br>\n(I guess the <code>0.5</code> increment helps rounding the last bit)</p>\n\n<p>This integer contains all the significant bits that were originally in the significand of the floating point value.<br>\nKnowing it, the shift, and the sign makes possible the reconstitution of the original floating point value.</p>\n\n<p>But, as suggested in the comments, since IEEE754 bit pattern is well defined, all of this may not be necessary.</p>\n"}], "owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563908850, "creation_date": 1563898861, "last_edit_date": 1563904502, "question_id": 57168435, "link": "https://stackoverflow.com/questions/57168435/normalization-part-of-a-code-of-packing-a-float-ieee-754-into-uint64-t", "title": "Normalization part of a code of Packing a Float (IEEE-754) into uint64_t", "body": "<p>I have been researching about portable way to store a <code>float</code> in a binary format (in uint64_t), so that it can be shared over network to various microcontroller. It should be independent of float's <code>memory layout</code> and <code>endianness</code> of the system.</p>\n\n<p>I came across this <a href=\"https://stackoverflow.com/a/4733588/5735010\">answer</a>. However, I am unable to understand few lines in the code which are shown below:</p>\n\n<pre><code>while(fnorm &gt;= 2.0) { fnorm /= 2.0; shift++; }\nwhile(fnorm &lt; 1.0) { fnorm *= 2.0; shift--; }\nfnorm = fnorm - 1.0;\n\n// calculate the binary form (non-float) of the significand data\nsignificand = fnorm * ((1LL&lt;&lt;significandbits) + 0.5f);\n</code></pre>\n\n<p>I am aware that the code above tries to normalize the <code>significand</code>. The first line in the above code fragment is trying to get the <code>exponent</code> of the float. I am not sure why second, third and fourth line are necessary. I am able to understand that second and third line of code tries to make <code>fnorm</code> variable lie between <code>0.0</code> and <code>1.0</code> but why it is necesarry? Does having fnorm (in decimal format) between <code>0.0</code> and <code>1.0</code> makes sure it's binary representation will be <code>1.xxxxxx...</code> .</p>\n\n<p>Please help me understanding what each step is trying to achieve what and how it achieves that? I want to understand how it changes bit-pattern of the float variable to get normalized significant (left-most bit set to <code>1</code>).</p>\n"}, {"tags": ["c", "timer", "microcontroller", "atmel", "atmega16"], "answers": [{"tags": [], "owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "is_accepted": false, "score": 1, "last_activity_date": 1563949948, "creation_date": 1563949948, "answer_id": 57176613, "question_id": 57167638, "link": "https://stackoverflow.com/questions/57167638/how-do-i-implement-a-timer-which-turn-a-signal-on-and-off-pwg-every-few-second/57176613#57176613", "title": "How do I implement a timer which turn a signal on and off (PWG) every few seconds on an Atmega324a microcontroller?", "body": "<p>First of all: StackOverflow is a site to ask questions around source code, it is not a service delivering solutions. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a>, it will help you to get satisfactory answers.</p>\n\n<p>But nevermind, because you're new:</p>\n\n<p>For example, you can implement a timer for a pulse width generator in these steps:</p>\n\n<ol>\n<li>Learn to read data sheets. Nobody can relieve you of this burden.</li>\n<li>Learn how to use output pins.</li>\n<li>Write some tests to make sure you understand output pins.</li>\n<li>Select a timer to measure the clock cycles. Apparently you did that already.</li>\n<li>Learn to use this timer. Some timers can generate PWM (pulse width modulated) signals in hardware. However, the output pin is likely to be in a fixed location and the range of possible periods may not meet your requirements.</li>\n<li>Write some tests to make sure you understand timers and interrupts.</li>\n<li>If the required pulse period is too long for the timer, you can add an extra variable to scale down, for example.</li>\n<li>Implement the rest of it.</li>\n</ol>\n\n<blockquote>\n  <p>Also, What does the ISR function do?</p>\n</blockquote>\n\n<p>This function is called \"magically\" by hardware when the conditions for the interrupt are met. In the case shown, <code>tmp107_command()</code> and <code>toggle(LED1)</code> are called only every <code>TMP107_POLL_PERIOD</code> times.</p>\n\n<blockquote>\n  <p>Is it possible for me to enable both timers at the same time?</p>\n</blockquote>\n\n<p>Sure.</p>\n"}], "owner": {"reputation": 9, "user_id": 11825588, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LcJlz5v11y8/AAAAAAAAAAI/AAAAAAAAW3I/NjBa6o2tgOs/photo.jpg?sz=128", "display_name": "Bardia Shahrestani", "link": "https://stackoverflow.com/users/11825588/bardia-shahrestani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563949948, "creation_date": 1563895975, "question_id": 57167638, "link": "https://stackoverflow.com/questions/57167638/how-do-i-implement-a-timer-which-turn-a-signal-on-and-off-pwg-every-few-second", "title": "How do I implement a timer which turn a signal on and off (PWG) every few seconds on an Atmega324a microcontroller?", "body": "<p>I'm programming an Atmega324a Microcontroller and I'm trying to implement a timer (in this case Timer1) which supposed to make a second led connected to my board blink.\nI also need to know how to identify the pin the led is attached to \nI've found the data sheet:\n<a href=\"http://ww1.microchip.com/downloads/en/DeviceDoc/ATmega164A_PA-324A_PA-644A_PA-1284_P_Data-Sheet-40002070A.pdf\" rel=\"nofollow noreferrer\">http://ww1.microchip.com/downloads/en/DeviceDoc/ATmega164A_PA-324A_PA-644A_PA-1284_P_Data-Sheet-40002070A.pdf</a>\nbut the details are too technical for me to understand and I don't know where to start looking and most importantly, get to the result, which is the code itself. </p>\n\n<p>Also, What does the ISR function do?</p>\n\n<p>Down below is the current Init_timer function for Timer 0. Is it possible for me to enable both timers at the same time?</p>\n\n<pre><code>static void init_timer(void)\n{\n    // Configure Timer0 for CTC mode, 64x prescaler for 1 ms interval\n    TCCR0A = _BV(WGM01);\n    TCCR0B = _BV(CS01) | _BV(CS00);\n    OCR0A = 124;\n    TIMSK0 = _BV(OCIE0A);\n}\n\nint main(void){\n    MCUSR = 0;\n    wdt_disable();\n\n    init_pins();        // Reset all pins to default state\n    init_timer();       // Initialize 1 msec timer interrupt\n\n    configure_as_output(LOAD_ON);\n    configure_as_output(LED1);\n    configure_as_output(LED2);\n\n    sei();\n        .\n        .\n        .\n}\n\nISR(TIMER0_COMPA_vect)\n{\n    static uint16_t ms_count = 0;\n\n    ms_count++;             // milliseconds counter\n\n    if (ms_count == TMP107_POLL_PERIOD)\n    {\n        tmp107_command();   // send command to temperature sensor\n        toggle(LED1);       // blink status led\n\n        ms_count = 0;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "matlab", "mex"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1563895379, "post_id": 57167153, "comment_id": 100848500, "body": "The message doesn&#39;t seem to come from the compiler itself but either from the linker (meaning: a library is missing) or from the loader (meaning: a dll is missing)."}, {"owner": {"reputation": 43, "user_id": 11786986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a60a0d04ba1201b33854b73e1bfbf61?s=128&d=identicon&r=PG&f=1", "display_name": "Thyldor", "link": "https://stackoverflow.com/users/11786986/thyldor"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1563896567, "post_id": 57167153, "comment_id": 100849220, "body": "@PaulOgilvie It&#39;s a matlab error when I call ``` mex fileName.c ```, but again, the weird part is that both the older function and the example c file that uses the same function both work."}, {"owner": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1563896603, "post_id": 57167153, "comment_id": 100849240, "body": "It seems to be related to 32/64 bits somehow, but  I haven&#39;t found a solution."}, {"owner": {"reputation": 43, "user_id": 11786986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a60a0d04ba1201b33854b73e1bfbf61?s=128&d=identicon&r=PG&f=1", "display_name": "Thyldor", "link": "https://stackoverflow.com/users/11786986/thyldor"}, "reply_to_user": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1563896727, "post_id": 57167153, "comment_id": 100849305, "body": "@AnderBiguri I&#39;ve just tried it using &quot;mex -R2018a fileName.c&quot; and that compiled without an error. I&#39;m just testing it now to see if it actually works as well. It might have to do with the matlab interleaved API"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 11786986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a60a0d04ba1201b33854b73e1bfbf61?s=128&d=identicon&r=PG&f=1", "display_name": "Thyldor", "link": "https://stackoverflow.com/users/11786986/thyldor"}, "is_accepted": true, "score": 2, "last_activity_date": 1563897958, "creation_date": 1563897958, "answer_id": 57168198, "question_id": 57167153, "link": "https://stackoverflow.com/questions/57167153/issues-with-a-mex-mxgetdoubles-function-when-compiling/57168198#57168198", "title": "Issues with a mex mxGetDoubles() function when compiling", "body": "<p>Turns out, the fix was kind of easy, instead of calling <code>mex fileName.c</code> , I had to use <code>mex -R2018a fileName.c</code>. </p>\n\n<p>But this doens't answer why <code>mex explore.c</code> works even though it uses the same function, so if anyone knows why, I'd be really interested. I'm assuming it has something to do with the interleaved complex API, but could be anything tbh.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 12396329, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/217a7eaa289501bbefd7e7d71121b24b?s=128&d=identicon&r=PG", "display_name": "mpre", "link": "https://stackoverflow.com/users/12396329/mpre"}, "is_accepted": false, "score": 3, "last_activity_date": 1574152617, "last_edit_date": 1574152617, "creation_date": 1574152349, "answer_id": 58929657, "question_id": 57167153, "link": "https://stackoverflow.com/questions/57167153/issues-with-a-mex-mxgetdoubles-function-when-compiling/58929657#58929657", "title": "Issues with a mex mxGetDoubles() function when compiling", "body": "<p>Because in explore.c there is the test, line 686:</p>\n\n<pre><code> #if MX_HAS_INTERLEAVED_COMPLEX\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 2738240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b92b0cb3007907f5b201ddc10d0cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias Luh", "link": "https://stackoverflow.com/users/2738240/matthias-luh"}, "is_accepted": false, "score": 2, "last_activity_date": 1581673740, "last_edit_date": 1581673740, "creation_date": 1581672784, "answer_id": 60223548, "question_id": 57167153, "link": "https://stackoverflow.com/questions/57167153/issues-with-a-mex-mxgetdoubles-function-when-compiling/60223548#60223548", "title": "Issues with a mex mxGetDoubles() function when compiling", "body": "<p>To clarify the answers (assuming you only use real, double variables):</p>\n\n<ol>\n<li><p>Either use</p>\n\n<pre><code>vertices = mxGetDoubles(prhs[1]);\n</code></pre>\n\n<p>with the command</p>\n\n<pre><code>mex -R2018a my_system_function.c\n</code></pre>\n\n<p>(as you proposed)</p></li>\n<li><p>Or you can also use</p>\n\n<pre><code>#if MX_HAS_INTERLEAVED_COMPLEX\n    vertices = mxGetDoubles(prhs[1]);\n#else\n    vertices = mxGetPr(prhs[1]); // pointer to real part\n#endif\n</code></pre>\n\n<p>with the command</p>\n\n<pre><code>mex my_system_function.c\n</code></pre>\n\n<p>(as mpre hinted - see code in \"C:\\Program Files\\MATLAB\\R2019b\\extern\\examples\\mex\\explore.c\").</p></li>\n</ol>\n\n<p>In my case, I used it do retrieve the function parameters in the update function:</p>\n\n<pre><code>static void mdlUpdate(SimStruct *S, int_T tid)\n{\n    const real_T   *u    = (const real_T*) ssGetInputPortSignal(S,0);\n    real_T         *x    = ssGetRealDiscStates(S);\n    const mxArray  *p_mx = (const mxArray *) ssGetSFcnParam(S, 0);\n\n#if MX_HAS_INTERLEAVED_COMPLEX\n    const mxDouble *p    = mxGetDoubles(p_mx);\n#else\n    const double   *p    = mxGetPr(p_mx); // pointer to real part\n#endif\n\n   //...\n\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 11786986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a60a0d04ba1201b33854b73e1bfbf61?s=128&d=identicon&r=PG&f=1", "display_name": "Thyldor", "link": "https://stackoverflow.com/users/11786986/thyldor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 870, "favorite_count": 0, "accepted_answer_id": 57168198, "answer_count": 3, "score": 2, "last_activity_date": 1581673740, "creation_date": 1563894403, "last_edit_date": 1574174646, "question_id": 57167153, "link": "https://stackoverflow.com/questions/57167153/issues-with-a-mex-mxgetdoubles-function-when-compiling", "title": "Issues with a mex mxGetDoubles() function when compiling", "body": "<p>Whenever I try to compile my very simple testing mex function, I get an error</p>\n\n<blockquote>\n  <p>\"undefined reference to `mxGetDoubles'<br>\n  collect2.exe: error: ld returned 1 exit status</p>\n</blockquote>\n\n<p>I'm using Matlab R2019a, mingw-w64 6.3.0. The example c file they give (explore.c) compiles just fine and also uses <code>mxGetDoubles()</code>. </p>\n\n<p>I've tried using <code>mxGetPr()</code> and even though they say they don't recommend it and that it shouldn't work after matlab R2018a in the documentation, that works just fine.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"mex.h\"\n#include \"matrix.h\"\n\n\n\nvoid mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[]){\n    mxDouble *vertices;\n\n\n    vertices = mxGetDoubles(prhs[1]);//mxGetPr(prhs[1]);\n\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "winapi", "exit-code"], "comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 2, "creation_date": 1563894822, "post_id": 57166997, "comment_id": 100848207, "body": "Unlike Unix, Windows doesn&#39;t reserve part of the 32-bit status code to store the reason for an abnormal termination. We may assume that an application won&#39;t intentionally exit with a system <code>NTSTATUS</code> error code (0xC0000000-0xCFFFFFFF), but it could, or it could be externally terminated via <code>TerminateProcess</code> with such a code even thought it&#39;s not due to a crash (unhandled exception). We can&#39;t know because <code>TerminateProcess</code> is always how a process ultimately terminates, even via <code>ExitProcess</code>."}, {"owner": {"reputation": 6531, "user_id": 507028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/150b5324471a76f6f2fa9dd2380ad611?s=128&d=identicon&r=PG", "display_name": "Neitsa", "link": "https://stackoverflow.com/users/507028/neitsa"}, "edited": false, "score": 1, "creation_date": 1563895512, "post_id": 57166997, "comment_id": 100848585, "body": "You could also add the process to a job object (<b>if it&#39;s not already in a job</b>), add a completion port to the job, and check if the completion port receives a <code>JOB_OBJECT_MSG_ABNORMAL_EXIT_PROCESS</code> in which case it indicates the process has crashed (see the <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/winnt/ns-winnt-_jobobject_associate_completion_port\" rel=\"nofollow noreferrer\"><code>JOBOBJECT_ASSOCIATE_COMPLETION_PORT structure</code></a> for more information)."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 6531, "user_id": 507028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/150b5324471a76f6f2fa9dd2380ad611?s=128&d=identicon&r=PG", "display_name": "Neitsa", "link": "https://stackoverflow.com/users/507028/neitsa"}, "edited": false, "score": 1, "creation_date": 1563896230, "post_id": 57166997, "comment_id": 100849026, "body": "@Neitsa, the Job object message is for a possible abnormal exit such as <code>STATUS_STACK_OVERFLOW</code> or <code>STATUS_CONTROL_C_EXIT</code>. Nothing stops a process from using <code>ExitProcess(STATUS_CONTROL_C_EXIT)</code> (in fact it&#39;s what the console <code>CtrlRoutine</code> does), but at least with your suggestion (i.e. <code>JOB_OBJECT_MSG_ABNORMAL_EXIT_PROCESS</code>), <i>categorizing</i> abnormal exit codes is left up to the system."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1563908592, "post_id": 57166997, "comment_id": 100854605, "body": "On a side note, you can&#39;t use an <code>int</code> for the <code>exit_code</code> because <code>GetExitCodeProcess()</code> expects a <code>DWORD</code> (<code>unsigned long</code>) instead."}, {"owner": {"reputation": 51, "user_id": 11786996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07668e3bf3534a4aa33dd7c85b9ce358?s=128&d=identicon&r=PG&f=1", "display_name": "Kanor", "link": "https://stackoverflow.com/users/11786996/kanor"}, "edited": false, "score": 0, "creation_date": 1563985361, "post_id": 57166997, "comment_id": 100884834, "body": "To me, if a user terminates as an <code>NSTATUS</code> error code, they want it to be treated like an error. So unhandled exception values are usually 0xC0000000-0xCFFFFFFF? Is there documentation for that?"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1563997878, "post_id": 57166997, "comment_id": 100890411, "body": "NT uses <code>NTSTATUS</code> codes within the kernel, for system-call results, and the runtime library and loader in ntdll.dll. Normally these status codes do not leak to the Windows API. They get mapped to 16-bit Windows error codes via <code>RtlNtStatusToDosError</code>. If we see them, it&#39;s almost always as exception codes, which will be system error codes. The upper 4-bit nibble is thus 0xC (<code>STATUS_SEVERITY_ERROR</code>, with the [C]ustomer and N bits as 0). There&#39;s a well-known set of status codes for unhandled exceptions defined in winnt.h, and corresponding <code>EXCEPTION_*</code> macros are defined in minwinbase.h."}], "answers": [{"comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 2, "creation_date": 1563895957, "post_id": 57167420, "comment_id": 100848836, "body": "A crucial point is that <code>ExitThread</code>, if it&#39;s the last thread, will call <code>TerminateProcess(GetCurrentProcess(), retval)</code>. To the kernel, there is no difference here compared to the abnormal exit that calls <code>TerminateProcess(GetCurrentProcess(), exceptcode)</code>. <code>ExitProcess</code> is similar, except it uses two <code>TerminateProcess</code> calls, the first of which terminates all other threads."}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1563900732, "post_id": 57167420, "comment_id": 100851223, "body": "@eryksun I think ExitThread calls ExitProcess, not TerminateProcess?"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1563902592, "post_id": 57167420, "comment_id": 100851992, "body": "I meant only that ultimately, if it&#39;s the last thread in the process, <code>ExitThread</code> (i.e. <code>RtlExitUserThread</code>) will call <code>TerminateProcess</code> (well, <code>NtTerminateProcess</code>) -- the key point being that it&#39;s ultimately indistinguishable from the <code>TerminateProcess</code> call due to an unhandled exception. But yes, it does so via <code>ExitProcess</code> (i.e. <code>RtlExitUserProcess</code>) in order to cleanly shut the process down (via <code>LdrShutdownProcess</code>). In this case, the fact that <code>ExitProcess</code> terminates all other threads is a non-issue, since it&#39;s the last thread anyway."}], "tags": [], "owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "is_accepted": false, "score": 1, "last_activity_date": 1563895240, "creation_date": 1563895240, "answer_id": 57167420, "question_id": 57166997, "link": "https://stackoverflow.com/questions/57166997/how-do-i-know-if-im-getting-an-actual-exit-code-from-getexitcodeprocess/57167420#57167420", "title": "How do I know if I&#39;m getting an actual EXIT CODE from GetExitCodeProcess?", "body": "<p>I don't think you can tell from outside the process unless you debug it.</p>\n\n<p>Ignoring threads, conceptually you can think of it something like this:</p>\n\n<pre><code>MainThread(EXE*exe)\n{\n  __try\n  {\n    NTDLL_LoadDlls(exe);\n    int retval = exe-&gt;WinMain();\n    ExitThread(retval); // Exits the process if there is only one thread\n  }\n  __catch(...)\n  {\n    int exceptcode = getexceptioncode();\n    WER_ReportCrash(exe, exceptcode);\n    TerminateProcess(GetCurrentProcess(), exceptcode);\n  }\n}\n</code></pre>\n\n<p>0 usually means success and 1 means generic failure, anything else is probably a problem. Low codes (&lt;=255) could have meaning but they are program specific. >= 0xC0000000 is probably a crash.</p>\n"}], "owner": {"reputation": 51, "user_id": 11786996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07668e3bf3534a4aa33dd7c85b9ce358?s=128&d=identicon&r=PG&f=1", "display_name": "Kanor", "link": "https://stackoverflow.com/users/11786996/kanor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1563895240, "creation_date": 1563893911, "question_id": 57166997, "link": "https://stackoverflow.com/questions/57166997/how-do-i-know-if-im-getting-an-actual-exit-code-from-getexitcodeprocess", "title": "How do I know if I&#39;m getting an actual EXIT CODE from GetExitCodeProcess?", "body": "<p>I am making a program that checks an existing process and returns its exit code... <strong>IF</strong> it's an exit code. If the program errored out, it returns a -1.</p>\n\n<p>My code right now looks like:</p>\n\n<pre><code>HANDLE hProcess = OpenProcess( SYNCHRONIZE | PROCESS_QUERY_INFORMATION, FALSE, pid );\nif(!hProcess) {\n    switch (GetLastError()) {\n       //Handle errors and such\n    }\n} else {\n    WaitForSingleObject(hProcess, INFINITE);\n    int exit_code;\n    GetExitCodeProcess(hProcess, &amp;exit_code);\n    return exit_code;\n}\n</code></pre>\n\n<p>But, as the <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-getexitcodeprocess\" rel=\"nofollow noreferrer\">documentation</a> says, GetExitCodeProcess can return the exit code OR THE EXCEPTION VALUE. I don't want the exception value! If the process errors out I want to return -1!</p>\n\n<p>Is there any way to tell the difference? Is there an easy way to tell that the process crashed?</p>\n"}, {"tags": ["c", "function", "pointers", "boolean", "definition"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1563893597, "post_id": 57166868, "comment_id": 100847424, "body": "This is pretty much a wrapper for <code>malloc</code>."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 2, "creation_date": 1563893697, "post_id": 57166868, "comment_id": 100847489, "body": "The type of <code>outPtr</code> seems wrong, shouldn&#39;t it be <code>uint8_t **outPtr</code>?"}, {"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 2, "creation_date": 1563893711, "post_id": 57166868, "comment_id": 100847498, "body": "The signature for your function should be <code>bool allocate10Bytes(uint8_t ** outPtr);</code>. It should be a pointer to a pointer."}, {"owner": {"reputation": 55, "user_id": 11805904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8834f05aa1f68a547de143892722e8?s=128&d=identicon&r=PG&f=1", "display_name": "phongisntreal", "link": "https://stackoverflow.com/users/11805904/phongisntreal"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1563894049, "post_id": 57166868, "comment_id": 100847751, "body": "@Ctx About the prototype, this is what I got from my mentor, and he said under no curcumstance, I do not have the right to change it."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1563894112, "post_id": 57166868, "comment_id": 100847793, "body": "Does your mentor also provide some hint how the allocated memory might be accessed outside that function?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1563894125, "post_id": 57166868, "comment_id": 100847800, "body": "Then this function will be a useless function to leak memory..."}, {"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1563894142, "post_id": 57166868, "comment_id": 100847811, "body": "@phongisntreal We can&#39;t help if the question doesn&#39;t match the prototype."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1563894201, "post_id": 57166868, "comment_id": 100847852, "body": "What does &quot;The function must be a boolean one, and return boolean as well.&quot; ? What does &quot;be a boolean one&quot; mean other than returning boolean?"}, {"owner": {"reputation": 55, "user_id": 11805904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8834f05aa1f68a547de143892722e8?s=128&d=identicon&r=PG&f=1", "display_name": "phongisntreal", "link": "https://stackoverflow.com/users/11805904/phongisntreal"}, "edited": false, "score": 0, "creation_date": 1563894365, "post_id": 57166868, "comment_id": 100847945, "body": "I will email to my mentor for futher infos. And now assume that the prototype are ... ** outPtr, how can i solve this? Thanks!"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1563894467, "post_id": 57166868, "comment_id": 100848005, "body": "<i>About the prototype, this is what I got from my mentor, and he said under no curcumstance, I do not have the right to change it.</i>  Assuming there&#39;s no mistake, your &quot;mentor&quot; is not qualified to be a mentor in C if he thinks that  the prototype he provided can work."}, {"owner": {"reputation": 55, "user_id": 11805904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8834f05aa1f68a547de143892722e8?s=128&d=identicon&r=PG&f=1", "display_name": "phongisntreal", "link": "https://stackoverflow.com/users/11805904/phongisntreal"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1563894482, "post_id": 57166868, "comment_id": 100848017, "body": "@Gerhardh As the prototype says, i need to make a bool function, and the returning values must be true or false, based on the pointer has been allocated or not. And he said he just need the function, not the entire program."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1563895028, "post_id": 57166868, "comment_id": 100848306, "body": "The easiest to understand thing that <code>allocate10Bytes</code> should do is something like: <code>*outPtr = malloc(10);</code> <code>return (*outPtr != NULL);</code>. A minimalist approach (which would make your mentor suspicious) is <code>return *outPtr = malloc(10);</code>"}, {"owner": {"reputation": 910, "user_id": 6422591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/wIpwn.jpg?s=128&g=1", "display_name": "manish ma", "link": "https://stackoverflow.com/users/6422591/manish-ma"}, "edited": false, "score": 0, "creation_date": 1563895800, "post_id": 57166868, "comment_id": 100848743, "body": "if you must use this signature you can redefine the type of uint8_t to be a pointer to unsigned char.  <code>typedef unsigned char* uint8_t;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 11805904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8834f05aa1f68a547de143892722e8?s=128&d=identicon&r=PG&f=1", "display_name": "phongisntreal", "link": "https://stackoverflow.com/users/11805904/phongisntreal"}, "edited": false, "score": 0, "creation_date": 1563897786, "post_id": 57167996, "comment_id": 100849894, "body": "Thank you for the answer, but I have problem testing this program. I&#39;m currently using DevC++ (as my mentor required) and the problem said: [Error] invalid conversion from &#39;void*&#39; to &#39;uint8_t* {aka unsigned char*}&#39; [-fpermissive] in the line *outPtr = malloc( N * sizeof( uint8_t ) );. Could you tell me more about it?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 55, "user_id": 11805904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8834f05aa1f68a547de143892722e8?s=128&d=identicon&r=PG&f=1", "display_name": "phongisntreal", "link": "https://stackoverflow.com/users/11805904/phongisntreal"}, "edited": false, "score": 0, "creation_date": 1563897862, "post_id": 57167996, "comment_id": 100849930, "body": "@phongisntreal I know nothing about what code you are running. I answered your question. If you have some problems with your code then ask a new question."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 55, "user_id": 11805904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8834f05aa1f68a547de143892722e8?s=128&d=identicon&r=PG&f=1", "display_name": "phongisntreal", "link": "https://stackoverflow.com/users/11805904/phongisntreal"}, "edited": false, "score": 1, "creation_date": 1563897878, "post_id": 57167996, "comment_id": 100849940, "body": "@phongisntreal: That is a C++ error message. You are compiling this code using a C++ compiler, but you tagged the question C. Which language do you want to use?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 55, "user_id": 11805904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8834f05aa1f68a547de143892722e8?s=128&d=identicon&r=PG&f=1", "display_name": "phongisntreal", "link": "https://stackoverflow.com/users/11805904/phongisntreal"}, "edited": false, "score": 0, "creation_date": 1563897966, "post_id": 57167996, "comment_id": 100849973, "body": "@phongisntreal You can write the call of malloc the following way *outPtr = ( uint8_t * )malloc( N * ( sizeof( uint8_t ) ); In this case the program will compile using a C++ compiler."}, {"owner": {"reputation": 55, "user_id": 11805904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8834f05aa1f68a547de143892722e8?s=128&d=identicon&r=PG&f=1", "display_name": "phongisntreal", "link": "https://stackoverflow.com/users/11805904/phongisntreal"}, "edited": false, "score": 0, "creation_date": 1563898046, "post_id": 57167996, "comment_id": 100850005, "body": "I need it in C and I will try it with gcc build in complier. Sorry for my immature programming skill :("}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 55, "user_id": 11805904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8834f05aa1f68a547de143892722e8?s=128&d=identicon&r=PG&f=1", "display_name": "phongisntreal", "link": "https://stackoverflow.com/users/11805904/phongisntreal"}, "edited": false, "score": 0, "creation_date": 1563898239, "post_id": 57167996, "comment_id": 100850095, "body": "@phongisntreal As a C program it is valid and should compile. If the error you referenced to appears then it means that you are compiling the program as a C++ program."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 55, "user_id": 11805904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8834f05aa1f68a547de143892722e8?s=128&d=identicon&r=PG&f=1", "display_name": "phongisntreal", "link": "https://stackoverflow.com/users/11805904/phongisntreal"}, "edited": false, "score": 0, "creation_date": 1563898445, "post_id": 57167996, "comment_id": 100850180, "body": "@phongisntreal You can use the online compiler at www.ideone.com selecting the language tag as C99."}, {"owner": {"reputation": 55, "user_id": 11805904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8834f05aa1f68a547de143892722e8?s=128&d=identicon&r=PG&f=1", "display_name": "phongisntreal", "link": "https://stackoverflow.com/users/11805904/phongisntreal"}, "edited": false, "score": 0, "creation_date": 1563899191, "post_id": 57167996, "comment_id": 100850535, "body": "@VladfromMoscow Really appriciate what you did here. I will dig into this and improve my programming skill."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1563898156, "last_edit_date": 1563898156, "creation_date": 1563897223, "answer_id": 57167996, "question_id": 57166868, "link": "https://stackoverflow.com/questions/57166868/how-to-create-a-function-that-alloccate-10-bytes-to-a-pointer-then-check-whethe/57167996#57167996", "title": "How to create a function that alloccate 10 bytes to a pointer, then check whether pointer has been allocated yet, return boolean?", "body": "<p>It seems you mean something like the following</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdint.h&gt;\n\nbool allocate10Bytes( uint8_t **outPtr )\n{\n    const size_t N = 10;\n\n    *outPtr = malloc( N * sizeof( uint8_t ) );\n\n    return *outPtr != NULL;\n}\n\nint main(void) \n{\n    uint8_t *p;\n\n    bool success = allocate10Bytes( &amp;p );\n\n    if ( success ) free( p );\n\n    return 0;\n}\n</code></pre>\n\n<p>This function prototype in your question</p>\n\n<pre><code>bool allocate10Bytes(uint8_t * outPtr);\n</code></pre>\n\n<p>is invalid. To be an out parameter the pointer must be declared as <code>uint8_t **outPtr</code>. That is an argument (some pointer) shall be passed by reference through a pointer to the pointer.</p>\n\n<p><strong>Note</strong>: If you are trying to compile the program as a C++ program then at least rewrite this statement </p>\n\n<pre><code>*outPtr = malloc( N * sizeof( uint8_t ) );\n</code></pre>\n\n<p>like</p>\n\n<pre><code>*outPtr = ( uint8_t * )malloc( N * sizeof( uint8_t ) );\n</code></pre>\n\n<p>and remove the header <code>&lt;stdbool.h&gt;</code></p>\n"}], "owner": {"reputation": 55, "user_id": 11805904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8834f05aa1f68a547de143892722e8?s=128&d=identicon&r=PG&f=1", "display_name": "phongisntreal", "link": "https://stackoverflow.com/users/11805904/phongisntreal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "closed_date": 1563913048, "accepted_answer_id": 57167996, "answer_count": 1, "score": -1, "last_activity_date": 1563898156, "creation_date": 1563893542, "last_edit_date": 1563897299, "question_id": 57166868, "link": "https://stackoverflow.com/questions/57166868/how-to-create-a-function-that-alloccate-10-bytes-to-a-pointer-then-check-whethe", "closed_reason": "Needs more focus", "title": "How to create a function that alloccate 10 bytes to a pointer, then check whether pointer has been allocated yet, return boolean?", "body": "<p>sorry for my bad English. I'm learning C programming from the root at the moment, and I have a homework.</p>\n\n<p>The problem says: Create a function that allocate 10 bytes dynamically to a pointer, then check whether pointer has been allocated? The function must be a boolean one, and return boolean as well.</p>\n\n<p>Function prototype: bool allocate10Bytes(uint8_t * outPtr);</p>\n\n<p>Please help me on this. Thanks alot!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1563892474, "post_id": 57166448, "comment_id": 100846759, "body": "What&#39;s wrong with just using <b>getchar</b> and <b>putchar</b> in a loop until you see <code>f</code>, <code>F</code> or newline?"}, {"owner": {"reputation": 2034, "user_id": 4688321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5b21d8c934125839996c5eac897fc1?s=128&d=identicon&r=PG&f=1", "display_name": "kiner_shah", "link": "https://stackoverflow.com/users/4688321/kiner-shah"}, "edited": false, "score": 1, "creation_date": 1563892784, "post_id": 57166448, "comment_id": 100846937, "body": "Where in the code are you printing the output?"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1563893684, "post_id": 57166448, "comment_id": 100847480, "body": "Comparing <code>i!=&#39;\\n&#39;</code> is certainly wrong when you use <code>i</code> as an array index for <code>str[i]</code> You could compare <code>str[i]</code> with <code>&#39;\\n&#39;</code> after reading it and before incrementing <code>i</code>. The combination of <code>scanf(&quot;%c&quot;,...)</code> with <code>getchar()</code> is wrong when you want to read a line of input. This might be useful only if you want to input a single character followed by ENTER. I suggest to add comments what you think the code should do."}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1563895013, "creation_date": 1563895013, "answer_id": 57167363, "question_id": 57166448, "link": "https://stackoverflow.com/questions/57166448/how-to-input-entire-sentence-and-print-it-until-certain-character/57167363#57167363", "title": "How to input entire sentence and print it until certain character?", "body": "<p>You probably want something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n  int nbOfTests;               // use a self explaining name rather than \"T\"\n  char str[1001];\n\n  scanf(\"%d\", &amp;nbOfTests);\n  getchar();   // absorb \\n\n\n  for (int t = 1; t &lt;= nbOfTests; t++) {\n    for (i = 0; ; i++) {\n      str[i] = getchar();     // no scanf needed, just use `getchar`directly\n      if (str[i] == '\\n')\n        break;                // Enter = &gt; end the loop\n    }\n\n    for (int i = 0; ; i++) {  // declare i here\n      if (str[i] == 'f' || str[i] == 'F' || str[i] == '\\n')\n        break;                // f F or Enter =&gt; end the loop\n      else\n        printf(\"%c\", str[i]);\n    }\n\n    printf(\"\\n\");             // makes it more readable for the user\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Disclaimer: this code is still pretty poor, but close to the original code, for example it would be better and simpler to use <code>fgets</code> to read a line of text.</p>\n"}], "owner": {"reputation": 11, "user_id": 11825285, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dTnTjxzBcy0/AAAAAAAAAAI/AAAAAAAAAAc/pArD6_geu20/photo.jpg?sz=128", "display_name": "Mio", "link": "https://stackoverflow.com/users/11825285/mio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1563895013, "creation_date": 1563892216, "last_edit_date": 1563893337, "question_id": 57166448, "link": "https://stackoverflow.com/questions/57166448/how-to-input-entire-sentence-and-print-it-until-certain-character", "title": "How to input entire sentence and print it until certain character?", "body": "<p>How to input a sentence and print it until a certain character?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\n    int T;//testcase\n    char str[1001];\n    int i;\n\n    scanf(\"%d\",&amp;T);\n    getchar();\n    for(int t=1; t&lt;=T; t++){\n        for(i=0; i!='\\n';i++){\n            scanf(\"%c\",str[i]);\n            getchar();\n        }\n\n        for(i=0; i!='\\n'; i++){\n            if(str[i]=='f' || str[i]=='F'){\n                break;\n            }else{\n            printf(\"%c\",str[i]);\n        }\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The input is alphanumeric sentence.\nThe output will be the sentence if there is no 'f' or 'F'.\nThe output will be the sentence until the 'f' or 'F'.</p>\n\n<p><strong>Example:</strong></p>\n\n<blockquote>\n  <p>input: Hello world<br>\n  output: Hello world</p>\n  \n  <p>input: Chocolate Truffle<br>\n  output: Chocolate Tru</p>\n</blockquote>\n"}, {"tags": ["c", "gcc", "clang", "mingw", "llvm"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1563892339, "post_id": 57166340, "comment_id": 100846686, "body": "Interesting, I didn&#39;t even know Clang could target windows :d"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1563896763, "post_id": 57166340, "comment_id": 100849326, "body": "A different environment, but I couldn&#39;t reproduce the problem in an MSYS2 Mingw-w64 Win64 build environment."}, {"owner": {"reputation": 795, "user_id": 4247399, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-yHFEFxCoWoQ/AAAAAAAAAAI/AAAAAAAABI0/z_18ppeZSVw/photo.jpg?sz=128", "display_name": "effbiae", "link": "https://stackoverflow.com/users/4247399/effbiae"}, "edited": false, "score": 0, "creation_date": 1563933638, "post_id": 57166340, "comment_id": 100861057, "body": "lib\\clang\\8.0.0\\include\\float.h:45 is including a ming header file x86_64-w64-mingw32\\include\\float.h.  what is line 45 of lib\\clang\\8.0.0\\include\\float.h?"}, {"owner": {"reputation": 315, "user_id": 377167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7cae7bc7d41b66233c3a1eb1d77ee78?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Wagstaff", "link": "https://stackoverflow.com/users/377167/harry-wagstaff"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1563961800, "post_id": 57166340, "comment_id": 100871151, "body": "@IanAbbott This seems to work for a C example, but clang++ doesn&#39;t seem to recognize the msys gcc include paths so no C++ headers are found."}, {"owner": {"reputation": 315, "user_id": 377167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7cae7bc7d41b66233c3a1eb1d77ee78?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Wagstaff", "link": "https://stackoverflow.com/users/377167/harry-wagstaff"}, "reply_to_user": {"reputation": 795, "user_id": 4247399, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-yHFEFxCoWoQ/AAAAAAAAAAI/AAAAAAAABI0/z_18ppeZSVw/photo.jpg?sz=128", "display_name": "effbiae", "link": "https://stackoverflow.com/users/4247399/effbiae"}, "edited": false, "score": 1, "creation_date": 1563961903, "post_id": 57166340, "comment_id": 100871208, "body": "@effbiae #include_next &lt;float.h&gt;"}, {"owner": {"reputation": 424, "user_id": 3645337, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/oqgRS.jpg?s=128&g=1", "display_name": "Vlad Faust", "link": "https://stackoverflow.com/users/3645337/vlad-faust"}, "edited": false, "score": 0, "creation_date": 1564497997, "post_id": 57166340, "comment_id": 101046784, "body": "Doesn&#39;t work neither with <code>clang.exe</code> nor <code>clang++.exe</code>. I use <code>mingw-w64</code> as well. <code>In file included from C:\\LLVM\\Prebuilt\\lib\\clang\\8.0.0\\include\\float.h:45:</code>, <code>C:\\Program Files\\mingw-w64\\mingw64\\x86_64-w64-mingw32\\include\\float.h:2&zwnj;&#8203;8:15: fatal error: &#39;float.h&#39; file not found</code>, <code>#include_next &lt;float.h&gt;</code>"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1564760747, "post_id": 57166340, "comment_id": 101149584, "body": "Are you using MSYS, or MSYS2? (Or something else?)"}, {"owner": {"reputation": 424, "user_id": 3645337, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/oqgRS.jpg?s=128&g=1", "display_name": "Vlad Faust", "link": "https://stackoverflow.com/users/3645337/vlad-faust"}, "edited": false, "score": 0, "creation_date": 1564994278, "post_id": 57166340, "comment_id": 101197046, "body": "Sorry for delay. If the MSYS question was directed to me, then the answer is I use neither. It&#39;s just &quot;MingW-W64-builds&quot; from the official site, downloads section; and then the online installer."}, {"owner": {"reputation": 3587, "user_id": 4915707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ubv91.jpg?s=128&g=1", "display_name": "Alexander Ushakov", "link": "https://stackoverflow.com/users/4915707/alexander-ushakov"}, "edited": false, "score": 0, "creation_date": 1564997302, "post_id": 57166340, "comment_id": 101198504, "body": "@HarryWagstaff Have you tried to add <code>-std=c99</code> parameter for clang call? &quot;float.h&quot; is C99 feature and may not be available for previous standards"}, {"owner": {"reputation": 424, "user_id": 3645337, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/oqgRS.jpg?s=128&g=1", "display_name": "Vlad Faust", "link": "https://stackoverflow.com/users/3645337/vlad-faust"}, "reply_to_user": {"reputation": 3587, "user_id": 4915707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ubv91.jpg?s=128&g=1", "display_name": "Alexander Ushakov", "link": "https://stackoverflow.com/users/4915707/alexander-ushakov"}, "edited": false, "score": 0, "creation_date": 1565001399, "post_id": 57166340, "comment_id": 101200591, "body": "@AlexanderUshakov neither <code>c99</code> nor <code>gnu17</code> helps"}, {"owner": {"reputation": 149, "user_id": 11879567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9kpYXrsQ2ts/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rerrqhAfs_BhmFbiwXAic28kiI_8g/photo.jpg?sz=128", "display_name": "dawlane", "link": "https://stackoverflow.com/users/11879567/dawlane"}, "edited": false, "score": 0, "creation_date": 1565241738, "post_id": 57166340, "comment_id": 101292300, "body": "@HarryWagstaff. I had to try to solve this problem with a project I was working on. At the moment the only two solutions are either to use MSYS2 with the latest MinGW-w64 or build MinGW-w64 from source. It could be quite a while before there is any official release. Check out my answer as I&#39;ve had to edit it as I&#39;ve found out more details."}], "answers": [{"comments": [{"owner": {"reputation": 529, "user_id": 11877195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ed77976acc203f50e7699ba07061865?s=128&d=identicon&r=PG&f=1", "display_name": "Sahsahae", "link": "https://stackoverflow.com/users/11877195/sahsahae"}, "edited": false, "score": 1, "creation_date": 1564922229, "post_id": 57344103, "comment_id": 101180998, "body": "This is just as bad of a solution as patching a compiler to do something else for a specific problem..."}, {"owner": {"reputation": 149, "user_id": 11879567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9kpYXrsQ2ts/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rerrqhAfs_BhmFbiwXAic28kiI_8g/photo.jpg?sz=128", "display_name": "dawlane", "link": "https://stackoverflow.com/users/11879567/dawlane"}, "reply_to_user": {"reputation": 529, "user_id": 11877195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ed77976acc203f50e7699ba07061865?s=128&d=identicon&r=PG&f=1", "display_name": "Sahsahae", "link": "https://stackoverflow.com/users/11877195/sahsahae"}, "edited": false, "score": 1, "creation_date": 1564928003, "post_id": 57344103, "comment_id": 101182300, "body": "It&#39;s not the best solution, but unfortunately it&#39;s a question of which MinGW-w64 release is being used. The latest MinGW sources show the patch to line 27 in MinGW&#39;s float.h. While the current MinGW-w64 binary downloads do not have this patch."}, {"owner": {"reputation": 424, "user_id": 3645337, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/oqgRS.jpg?s=128&g=1", "display_name": "Vlad Faust", "link": "https://stackoverflow.com/users/3645337/vlad-faust"}, "edited": false, "score": 0, "creation_date": 1564994177, "post_id": 57344103, "comment_id": 101196999, "body": "Thanks for your effort, @dawlane! Unfortunately, building from source is not an option I can rely on. I hope this question would make MinGW maintainers to update the mainstream version ASAP."}, {"owner": {"reputation": 149, "user_id": 11879567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9kpYXrsQ2ts/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rerrqhAfs_BhmFbiwXAic28kiI_8g/photo.jpg?sz=128", "display_name": "dawlane", "link": "https://stackoverflow.com/users/11879567/dawlane"}, "reply_to_user": {"reputation": 424, "user_id": 3645337, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/oqgRS.jpg?s=128&g=1", "display_name": "Vlad Faust", "link": "https://stackoverflow.com/users/3645337/vlad-faust"}, "edited": false, "score": 0, "creation_date": 1565074107, "post_id": 57344103, "comment_id": 101225868, "body": "@VladFaust: With the above -lgcc_seh issue. The reason why you are more than likely seeing this would be down to the default exception of the above binaries. See <a href=\"https://stackoverflow.com/a/17968530/11879567\">stackoverflow.com/a/17968530/11879567</a> on how to check. One of the reasons of why I wouldn&#39;t rely on third party downloads."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1565082002, "post_id": 57344103, "comment_id": 101229762, "body": "Suggesting to use MSYS2 based MinGW-w64 is a good suggestion if you don&#39;t have specific requirements w.r.t. toolchain versions and just want something that works as best it can."}], "tags": [], "owner": {"reputation": 149, "user_id": 11879567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9kpYXrsQ2ts/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rerrqhAfs_BhmFbiwXAic28kiI_8g/photo.jpg?sz=128", "display_name": "dawlane", "link": "https://stackoverflow.com/users/11879567/dawlane"}, "is_accepted": false, "score": 2, "last_activity_date": 1565242068, "last_edit_date": 1565242068, "creation_date": 1564897025, "answer_id": 57344103, "question_id": 57166340, "link": "https://stackoverflow.com/questions/57166340/how-do-i-compile-code-using-clang-with-the-mingw-c-c-library-particular-issu/57344103#57344103", "title": "How do I compile code using Clang with the MinGW C/C++ Library? (Particular issue with float.h)", "body": "<p>I think that it would be advisable to pass this issue on to one of the clang developers.</p>\n\n<p>Comparing the previous release 7.1.0's float.h to the one in 8.0.0 shows only a few differences. The first one I myself would be asking about, is why they change to the header guard from __FLOAT_H to __CLANG_FLOAT_H.</p>\n\n<p>Have a play around changing the 8.0.0 header guard and see what happens.</p>\n\n<p>Edit: Did a bit more searching. The MinGW-w64 developers know of this change since August 2018. Add or adapt the patch from <a href=\"https://sourceforge.net/p/mingw-w64/mailman/message/36386405/\" rel=\"nofollow noreferrer\">https://sourceforge.net/p/mingw-w64/mailman/message/36386405/</a> to your MinGW install may sort it out.</p>\n\n<p>Edit 2: Something that I have not used for a while is my MSYS2 install of MinGW. It shows g++.exe (Rev1, Built by MSYS2 project) 8.2.1 20181214. This has the applied patch to line 27 of float.h.</p>\n\n<p><code>#if !defined(_FLOAT_H___) &amp;&amp; !defined(__FLOAT_H) &amp;&amp; !defined(__CLANG_FLOAT_H)</code></p>\n\n<p>While the source forge download of MinGW-w64 8.1.0 has it shown as\n<code>#if !defined(_FLOAT_H___) &amp;&amp; !defined(__FLOAT_H)</code></p>\n\n<p>Note: I'm also sure that MSYS2 uses a rolling release update, but I would have to check on that. It's not something that I use on a regular basis.</p>\n\n<p>Edit3: MSYS2 looks like it's a rolling release. Latest versionis 9.1.0.</p>\n\n<p>My opinion unless you need a stand alone MinGW, then go with MSYS2 with the latest updates. Just trying to patch one of the old versions may work, but there could be other issues that my show themselves. If you do need a stand alone version, then I think that the only option would be to build MinGW-w64 directly from source.</p>\n\n<p>NOTE: I would have added comments to the above discussion, but being new I'm not allowed yet.</p>\n\n<p>EDIT 4:\nNOTE: The third party multilib toolchains are more than likely built with sjlj exceptions as default. See <a href=\"https://stackoverflow.com/a/17968530/11879567\">https://stackoverflow.com/a/17968530/11879567</a> on how to check.</p>\n\n<p>Edit 5:\nHopefully this is the last edit I will be making.\nChecking out the MinGW-w64 forums to see if anyone had asked when the next official release was due. I came across someone who did ask about when 8.2 was to be released. I got the impression that you could be in for a very long wait for any new MinGW-w64 release.\n<a href=\"https://sourceforge.net/p/mingw-w64/discussion/723797/thread/ea9a5b00fb/\" rel=\"nofollow noreferrer\">https://sourceforge.net/p/mingw-w64/discussion/723797/thread/ea9a5b00fb/</a></p>\n\n<p>SIDE NOTE:\nAs I have found out when dealing with Clang, you are always going to have one issue or another with it, either with MinGW or Visual Studio.</p>\n"}, {"comments": [{"owner": {"reputation": 315, "user_id": 377167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7cae7bc7d41b66233c3a1eb1d77ee78?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Wagstaff", "link": "https://stackoverflow.com/users/377167/harry-wagstaff"}, "edited": false, "score": 0, "creation_date": 1564993247, "post_id": 57349016, "comment_id": 101196632, "body": "Using this release I receive a linker error (cannot find -lgcc_eh). I assume that this is libgcc with SEH support - I&#39;ve tried recompiling with -fno-exceptions but that also produces the error."}, {"owner": {"reputation": 424, "user_id": 3645337, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/oqgRS.jpg?s=128&g=1", "display_name": "Vlad Faust", "link": "https://stackoverflow.com/users/3645337/vlad-faust"}, "edited": false, "score": 0, "creation_date": 1564994079, "post_id": 57349016, "comment_id": 101196977, "body": "Any chance it got merged into the &quot;online&quot; installer? I&#39;m confused that I can&#39;t select neither exception handling nor threading model. Also that &quot;ada&quot; thing..."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "reply_to_user": {"reputation": 424, "user_id": 3645337, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/oqgRS.jpg?s=128&g=1", "display_name": "Vlad Faust", "link": "https://stackoverflow.com/users/3645337/vlad-faust"}, "edited": false, "score": 0, "creation_date": 1565011826, "post_id": 57349016, "comment_id": 101206179, "body": "@VladFaust Ada&#39;s just another language that GCC supports. However, it requires an Ada compiler to build itself. I personally don&#39;t use it because the whole concept is less than ideal. I don&#39;t think the online installer has been updated in more than a year."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "reply_to_user": {"reputation": 315, "user_id": 377167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7cae7bc7d41b66233c3a1eb1d77ee78?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Wagstaff", "link": "https://stackoverflow.com/users/377167/harry-wagstaff"}, "edited": false, "score": 0, "creation_date": 1565012070, "post_id": 57349016, "comment_id": 101206344, "body": "@HarryWagstaff Usually, that&#39;s the default on i686... not x86_64."}, {"owner": {"reputation": 424, "user_id": 3645337, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/oqgRS.jpg?s=128&g=1", "display_name": "Vlad Faust", "link": "https://stackoverflow.com/users/3645337/vlad-faust"}, "edited": false, "score": 0, "creation_date": 1565022530, "post_id": 57349016, "comment_id": 101211688, "body": "@JL2210 I also get the <code>cannot find -lgcc_eh</code> error. I&#39;m on x86-64"}], "tags": [], "owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "is_accepted": false, "score": 5, "last_activity_date": 1566947816, "last_edit_date": 1566947816, "creation_date": 1564941388, "answer_id": 57349016, "question_id": 57166340, "link": "https://stackoverflow.com/questions/57166340/how-do-i-compile-code-using-clang-with-the-mingw-c-c-library-particular-issu/57349016#57349016", "title": "How do I compile code using Clang with the MinGW C/C++ Library? (Particular issue with float.h)", "body": "<p>The older binary releases of MinGW-w64 have an incompatibility with Clang 8.0+'s <code>float.h</code>. To fix this, copy <a href=\"https://github.com/mirror/mingw-w64/raw/82b169c5734a6198d3b4c51a48f82e7b7104f143/mingw-w64-headers/crt/float.h\" rel=\"nofollow noreferrer\">this specific revision of float.h</a> into the correct location and use it.</p>\n"}], "owner": {"reputation": 315, "user_id": 377167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7cae7bc7d41b66233c3a1eb1d77ee78?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Wagstaff", "link": "https://stackoverflow.com/users/377167/harry-wagstaff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2638, "favorite_count": 1, "answer_count": 2, "score": 16, "last_activity_date": 1566947816, "creation_date": 1563891892, "question_id": 57166340, "link": "https://stackoverflow.com/questions/57166340/how-do-i-compile-code-using-clang-with-the-mingw-c-c-library-particular-issu", "title": "How do I compile code using Clang with the MinGW C/C++ Library? (Particular issue with float.h)", "body": "<p>I have a simple program which I can successfully compile with clang, using MinGW's C/C++ Library:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(int argc, char **argv) { printf(\"Hello world!\\n\"); return 0; }\n</code></pre>\n\n<p>I am able to compile this with mingw-gcc successfully:</p>\n\n<pre><code> $ gcc test.c -o test\n $ ./test\n Hello world!\n</code></pre>\n\n<p>I am also able to compile it successfully using clang+mingw:</p>\n\n<pre><code> $ clang test.c -o test -target\n $ ./test\n Hello world!\n</code></pre>\n\n<p>However, if I make a small change to my program (include float.h), it continues to compile with gcc but no longer compiles with clang:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;float.h&gt;\nint main(int argc, char **argv) { printf(\"Hello world!\\n\"); return 0; }\n</code></pre>\n\n<pre><code> $ gcc test.c -o test\n $ ./test\n Hello world!\n\n $ clang test.c -o test -target x86_64-pc-windows-gnu\n In file included from test.c:2:\n In file included from C:\\llvm\\built\\lib\\clang\\8.0.0\\include\\float.h:45:\n C:\\mingw64-8.1.0\\x86_64-w64-mingw32\\include\\float.h:28:15: fatal error: 'float.h' file not found\n #include_next &lt;float.h&gt;\n               ^~~~~~~~~\n 1 error generated.\n</code></pre>\n\n<p>Is there some configuration issue with clang or some missing command line argument? Googling around a bit, it appears that the order of paths when including float.h is important, but this is all supposed to be handled internally by the clang driver. </p>\n"}, {"tags": ["c++", "c", "winapi", "window", "gdi"], "comments": [{"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 2, "creation_date": 1563892169, "post_id": 57166241, "comment_id": 100846578, "body": "Please provide a code which doesn&#39;t work, provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "edited": false, "score": 1, "creation_date": 1563948615, "post_id": 57166241, "comment_id": 100864543, "body": "@jdekeij Try to use <code>SetLayout(hDC, LAYOUT_RTL)</code>\uff0cthis seem work in window xp, refer <a href=\"https://social.msdn.microsoft.com/Forums/sqlserver/en-US/1079e63f-8e24-472c-8c1c-a49f8b982d07/setlayoutlayoutrtl-does-not-work-properly-on-windows-7?forum=windowssdk\" rel=\"nofollow noreferrer\">this</a> for more details."}, {"owner": {"reputation": 200, "user_id": 241217, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ffef452bf616227789726d322b2c7176?s=128&d=identicon&r=PG", "display_name": "jdekeij", "link": "https://stackoverflow.com/users/241217/jdekeij"}, "edited": false, "score": 0, "creation_date": 1564070745, "post_id": 57166241, "comment_id": 100919050, "body": "Thanks a lot, this SetLayout(hdc, LAYOUT_RTL)  is where I was looking for."}], "owner": {"reputation": 200, "user_id": 241217, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/ffef452bf616227789726d322b2c7176?s=128&d=identicon&r=PG", "display_name": "jdekeij", "link": "https://stackoverflow.com/users/241217/jdekeij"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564070621, "creation_date": 1563891560, "last_edit_date": 1564070621, "question_id": 57166241, "link": "https://stackoverflow.com/questions/57166241/printing-in-right-to-left", "title": "Printing in right to left", "body": "<p>In our product we support right to left. For this we apply the <code>WS_EX_LAYOUTRTL</code> to the windows we create when needed. The <code>Win32</code> api <code>CreateWindowEx()</code> is used for creating windows. Hence every control created as a child window moves to the right and the vertical scrollbar goes from the right side of the window to the left side of the window. Also all painting in the HDC of the window is moved to the right. Windows takes care of this because of the class definition of the Window. Great!</p>\n\n<p>However when we print we just write our text in a <code>HDC</code> and all works fine. However on Hebrew systems we still get Left to right output on the printer. As if the 0,0 is still in the upper left corner of the page. We use the standard PrintDlg() function which returns the HDC of the selected printer and here we do the simple drawtext() on the page. Exactly the same as we do in the Window we created. Hence the WM_PAINT message code is now called for printing and this works fine, however not for RTL.</p>\n\n<p>Question:\nHow can I create a device context for the printer which mirrors the layout like the <code>WS_EX_LAYOUTRTL</code> does for screen output?</p>\n"}, {"tags": ["c", "arrays", "loops", "for-loop", "max"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1563891163, "post_id": 57166064, "comment_id": 100845939, "body": "This statement largest = Central; does not make sense. Remove it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1563891387, "post_id": 57166064, "comment_id": 100846064, "body": "Apart from that, the code finds the largest value <code>153</code> (there isn&#39;t a <code>180</code> value). The <code>break;</code> should be removed too."}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 0, "creation_date": 1563891420, "post_id": 57166064, "comment_id": 100846085, "body": "Am I the only one wondering what &quot;PSI&quot; means?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 2, "creation_date": 1563891455, "post_id": 57166064, "comment_id": 100846113, "body": "@DanielKamilKozar It is not important.:)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1563891936, "post_id": 57166064, "comment_id": 100846432, "body": "<i>I am not able to display the region</i>. Add another variable <code>int region</code>, and every time you set <code>largest</code> also set that variable to <code>0</code>, <code>1</code> etc so you know which region had the largest PSI."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1563892075, "post_id": 57166365, "comment_id": 100846514, "body": "You changed the initialisation of <code>largest</code> but not the loop starting value, which should be <code>for(i = 0; ...)</code> . Also it should be initialised <code>largest = INT_MIN;</code> so as not to make any presumptions about the data."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1563892264, "post_id": 57166365, "comment_id": 100846637, "body": "<code>largest = -1;</code> This will fail if the arrays contain negative values.Also: If you want to improve code, combine alle the <code>for</code> loop to one loop."}, {"owner": {"reputation": 11, "user_id": 11823164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/16U0y.jpg?s=128&g=1", "display_name": "Madfish", "link": "https://stackoverflow.com/users/11823164/madfish"}, "edited": false, "score": 0, "creation_date": 1563892435, "post_id": 57166365, "comment_id": 100846739, "body": "I&#39;m just solving his problem to display the region, I&#39;m not improving his code, it wasn&#39;t my goal."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1563892489, "post_id": 57166365, "comment_id": 100846766, "body": "Yeah but you <i>changed the code</i> so now it doesn&#39;t work when <code>Central[0]</code> is the largest."}, {"owner": {"reputation": 11, "user_id": 11823164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/16U0y.jpg?s=128&g=1", "display_name": "Madfish", "link": "https://stackoverflow.com/users/11823164/madfish"}, "edited": false, "score": 0, "creation_date": 1563892668, "post_id": 57166365, "comment_id": 100846867, "body": "Oh ! I forgot to change the start value of the first loop"}, {"owner": {"reputation": 722, "user_id": 8049790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3927a57c023479b1d1edad79125dbf4e?s=128&d=identicon&r=PG&f=1", "display_name": "ejderuby", "link": "https://stackoverflow.com/users/8049790/ejderuby"}, "edited": false, "score": 1, "creation_date": 1563892940, "post_id": 57166365, "comment_id": 100847030, "body": "If <code>Central[0]</code> largest, it won&#39;t assign <code>Central</code> to <code>region</code>."}], "tags": [], "owner": {"reputation": 11, "user_id": 11823164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/16U0y.jpg?s=128&g=1", "display_name": "Madfish", "link": "https://stackoverflow.com/users/11823164/madfish"}, "is_accepted": false, "score": 0, "last_activity_date": 1563892746, "last_edit_date": 1563892746, "creation_date": 1563891950, "answer_id": 57166365, "question_id": 57166064, "link": "https://stackoverflow.com/questions/57166064/i-am-unable-to-display-my-corresponding-region-for-the-largest-psi-value/57166365#57166365", "title": "I am unable to display my corresponding region for the largest PSI value", "body": "<ol>\n<li>You assign an array to an int : <code>largest = Central;</code></li>\n<li>You need to create a variable containing the name of the region and update it each time the PSI is larger. All you have to do is print it at the end. Which give us : </li>\n</ol>\n\n<pre class=\"lang-c prettyprint-override\"><code>    #include &lt;stdio.h&gt;\n\n    int i, largest;\n    char *region = NULL;\n\n    int Time[] = { 600,700,800,900,1000,1100,1200,1300,1400,1500,1600,1700,1800 };\n    int Central[] = { 89,88,87,143,139,79,144,85,83,90,89,88,76 };\n    int East[] = { 80,79,78,77,76,80,90,89,88,110,109,143,136 };\n    int North[] = { 147,144,141,139,137,132,109,110,109,80,77,132,108 };\n    int South[] = { 90,89,88,139,136,132,102,105,109,110,109,80,77 };\n    int West[] = { 141,137,153,147,143,83,90,89,141,138,134,130,127 };\n\n\n    largest = Central[0];\n    for (i = 1; i &lt; 13; i++) {\n        if (largest &lt; Central[i]) {\n            largest = Central[i];\n            region = \"Central\";\n        }\n    }\n    for (i = 0; i &lt; 13; i++) {\n        if (largest &lt; East[i]) {\n            largest = East[i];\n            region = \"East\";\n        }\n    }\n    for (i = 0; i &lt; 13; i++) {\n        if (largest &lt; North[i]) {\n            largest = North[i];\n            region = \"North\";\n        }\n    }\n    for (i = 0; i &lt; 13; i++) {\n        if (largest &lt; South[i]) {\n            largest = South[i];\n            region = \"South\";\n        }\n    }\n    for (i = 0; i &lt; 13; i++) {\n        if (largest &lt; West[i]) {\n            largest = West[i];\n            region = \"West\";\n        }\n    }\n    printf(\" Highest PSI value amongst all is %d in %s\\n\\n\\n\", largest, region);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1563893929, "post_id": 57166578, "comment_id": 100847647, "body": "<code>largest = 0;</code> There is no statement that excludes negative values from the array. Using <code>largest = 0;</code> was actually correct. But <code>region</code> also needs proper initialization."}, {"owner": {"reputation": 722, "user_id": 8049790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3927a57c023479b1d1edad79125dbf4e?s=128&d=identicon&r=PG&f=1", "display_name": "ejderuby", "link": "https://stackoverflow.com/users/8049790/ejderuby"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1563894949, "post_id": 57166578, "comment_id": 100848271, "body": "I believe I fixed it."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1563895148, "post_id": 57166578, "comment_id": 100848379, "body": "No, you still assign <code>0</code> as start value. There is no need to allocate memory for <code>region</code>. Just assign string literals."}], "tags": [], "owner": {"reputation": 722, "user_id": 8049790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3927a57c023479b1d1edad79125dbf4e?s=128&d=identicon&r=PG&f=1", "display_name": "ejderuby", "link": "https://stackoverflow.com/users/8049790/ejderuby"}, "is_accepted": false, "score": 0, "last_activity_date": 1563895701, "last_edit_date": 1563895701, "creation_date": 1563892594, "answer_id": 57166578, "question_id": 57166064, "link": "https://stackoverflow.com/questions/57166064/i-am-unable-to-display-my-corresponding-region-for-the-largest-psi-value/57166578#57166578", "title": "I am unable to display my corresponding region for the largest PSI value", "body": "<p>To find largest region's name, create another variable to store which region has the largest value and assign it inside each <code>if</code> statement.</p>\n\n<p>Also, I've combined your <code>for</code> loops to make your code clearer.</p>\n\n<pre><code>int i, largest;\nchar region[strlen(\"Central\") + 1];\n\nint Time[] = { 600,700,800,900,1000,1100,1200,1300,1400,1500,1600,1700,1800 };\nint Central[] = { 89,88,87,143,139,79,144,85,83,90,89,88,76 };\nint East[] = { 80,79,78,77,76,80,90,89,88,110,109,143,136 };\nint North[] = { 147,144,141,139,137,132,109,110,109,80,77,132,108 };\nint South[] = { 90,89,88,139,136,132,102,105,109,110,109,80,77 };\nint West[] = { 141,137,153,147,143,83,90,89,141,138,134,130,127 };\n\nlargest = Central[0]; \n\n// Combine the for loops to make your code more clear\nfor (i = 0; i &lt; 13; i++) \n{\n    if (largest &lt; Central[i]){\n        largest = Central[i];\n        region = \"Central\";\n    }\n    if (largest &lt; East[i]){\n        largest = East[i];\n        region = \"East\";\n    }\n    if (largest &lt; North[i]){\n        largest = North[i];\n        region = \"North\";\n    }\n    if (largest &lt; South[i]){\n        largest = South[i];\n        region = \"South\";\n    }\n    if (largest &lt; West[i]){\n        largest = West[i];\n        region = \"West\";\n    }\n}\n\n// Display results\nprintf(\"PSI value is %d and correspondent region is %s.\", largest, region);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1563894298, "last_edit_date": 1563894298, "creation_date": 1563893402, "answer_id": 57166822, "question_id": 57166064, "link": "https://stackoverflow.com/questions/57166064/i-am-unable-to-display-my-corresponding-region-for-the-largest-psi-value/57166822#57166822", "title": "I am unable to display my corresponding region for the largest PSI value", "body": "<p>This statement in your code snippet</p>\n\n<pre><code>largest = Central;\n</code></pre>\n\n<p>is redundant and does not make sense (it tries convert a pointer to int).</p>\n\n<p>It seems what you mean is something like the following.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    enum { N = 13 };        \n    int Central[N] = { 89,88,87,143,139,79,144,85,83,90,89,88,76 };\n    int East[N]    = { 80,79,78,77,76,80,90,89,88,110,109,143,136 };\n    int North[N]   = { 147,144,141,139,137,132,109,110,109,80,77,132,108 };\n    int South[N]   = { 90,89,88,139,136,132,102,105,109,110,109,80,77 };\n    int West[N]    = { 141,137,153,147,143,83,90,89,141,138,134,130,127 };\n\n    const int *regions[] = { Central, East, North, South, West };\n\n    const char *region_name[] = { \"Central\", \"East\", \"North\", \"South\", \"West\" };\n\n    int largest_PSI = regions[0][0];\n    const char *target_region_name = region_name[0];\n\n    for ( size_t i = 0; i &lt; sizeof( regions ) / sizeof( *regions ); i++ )\n    {\n        int region_largest_PSI = regions[i][0];\n        for ( size_t j = 1; j &lt; N; j++ )\n        {\n            if ( region_largest_PSI &lt; regions[i][j] )\n            {\n                region_largest_PSI = regions[i][j];\n            }\n        }\n\n        if ( largest_PSI &lt; region_largest_PSI )\n        {\n            largest_PSI = region_largest_PSI;               \n            target_region_name = region_name[i];\n        }\n    }\n\n    printf( \"Highest PSI value amongst all is %d in region %s.\\n\\n\\n\", largest_PSI, target_region_name );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>Highest PSI value amongst all is 153 in region West.\n</code></pre>\n\n<p>To simplify the code you could write a separate function that searches the maximum element. For example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint * max_element( const int a[], size_t N )\n{\n    const int *max = a;\n\n    for ( size_t i = 1; i &lt; N; i++ )\n    {\n        if ( *max &lt; *( a + i ) ) max = a + i; \n    }\n\n    return ( int * )max;\n}\n\nint main(void) \n{\n    enum { N = 13 };        \n    int Central[N] = { 89,88,87,143,139,79,144,85,83,90,89,88,76 };\n    int East[N]    = { 80,79,78,77,76,80,90,89,88,110,109,143,136 };\n    int North[N]   = { 147,144,141,139,137,132,109,110,109,80,77,132,108 };\n    int South[N]   = { 90,89,88,139,136,132,102,105,109,110,109,80,77 };\n    int West[N]    = { 141,137,153,147,143,83,90,89,141,138,134,130,127 };\n\n    const int * regions[] = { Central, East, North, South, West };\n\n    const char *region_name[] = { \"Central\", \"East\", \"North\", \"South\", \"West\" };\n\n    int largest_PSI = regions[0][0];\n    const char *target_region_name = region_name[0];\n\n    for ( size_t i = 0; i &lt; sizeof( regions ) / sizeof( *regions ); i++ )\n    {\n        int *region_largest_PSI = max_element( regions[i], N );\n\n        if ( largest_PSI &lt; *region_largest_PSI )\n        {\n            largest_PSI = *region_largest_PSI;              \n            target_region_name = region_name[i];\n        }\n    }\n\n    printf( \"Highest PSI value amongst all is %d in region %s.\\n\\n\\n\", largest_PSI, target_region_name );\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11685460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0e54df27d79aaf83473eb087ee25df?s=128&d=identicon&r=PG&f=1", "display_name": "Abolute unit", "link": "https://stackoverflow.com/users/11685460/abolute-unit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1563895701, "creation_date": 1563890996, "last_edit_date": 1563893839, "question_id": 57166064, "link": "https://stackoverflow.com/questions/57166064/i-am-unable-to-display-my-corresponding-region-for-the-largest-psi-value", "title": "I am unable to display my corresponding region for the largest PSI value", "body": "<p>I am unable to display my corresponding region among all regions for the highest PSI reading.</p>\n\n<p>I have tried many other various methods, but I could not display my corresponding region (Central, East, North, South, West....) for that highest PSI value.</p>\n\n<p>I have declared the PSI values in the arrays for each region.</p>\n\n<pre><code>int i, largest;\n\nint Time[] = { 600,700,800,900,1000,1100,1200,1300,1400,1500,1600,1700,1800 };\nint Central[] = { 89,88,87,143,139,79,144,85,83,90,89,88,76 };\nint East[] = { 80,79,78,77,76,80,90,89,88,110,109,143,136 };\nint North[] = { 147,144,141,139,137,132,109,110,109,80,77,132,108 };\nint South[] = { 90,89,88,139,136,132,102,105,109,110,109,80,77 };\nint West[] = { 141,137,153,147,143,83,90,89,141,138,134,130,127 };\n\nlargest = Central[0];\nfor (i = 1; i &lt; 13; i++)\n{\n    if (largest &lt; Central[i])\n        largest = Central[i];\n}\nlargest = Central;\n\nfor (i = 0; i &lt; 13; i++)\n{\n    if (largest &lt; East[i])\n        largest = East[i];\n}\nfor (i = 0; i &lt; 13; i++)\n{\n    if (largest &lt; North[i])\n        largest = North[i];\n}\nfor (i = 0; i &lt; 13; i++)\n{\n    if (largest &lt; South[i])\n        largest = South[i];\n}\nfor (i = 0; i &lt; 13; i++)\n{\n    if (largest &lt; West[i])\n        largest = West[i];\n}\nprintf(\" Highest PSI value amongst all is %d\\n\\n\\n\", largest); \nbreak;\n</code></pre>\n\n<p>I am able to display my largest PSI value, but I am not able to display the region for that highest PSI value.</p>\n\n<p>For example, if my largest PSI in the arrays was 180 that is in Central, it will display PSI value is 180 and correspondent region is Central.</p>\n\n<p>If my largest PSI in the arrays was 180 that is in West, it will display PSI value is 180 and correspondent region is West.</p>\n"}, {"tags": ["c", "linux", "memory"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1563890681, "post_id": 57165945, "comment_id": 100845635, "body": "The memory is <i>virtual</i>. Even though you see ~1TB allocated it doesn&#39;t mean that <i>all</i> of this space is available all-together."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1563890707, "post_id": 57165945, "comment_id": 100845645, "body": "Yeah, I know it is <i>virtual</i> :)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1563890750, "post_id": 57165945, "comment_id": 100845674, "body": "So what is the problem? It can allocate page here and there, and the space does not have to be contiguous."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1563890785, "post_id": 57165945, "comment_id": 100845696, "body": "The question is how is this virtual memory adresses chosen and by who."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1563890826, "post_id": 57165945, "comment_id": 100845721, "body": "<code>cat &#47;proc&#47;self&#47;maps</code> might give you a hint. You will probably notice slight differences in the addresses each time you perform this command, this is due to ASLR. But the vincity is usually always the same"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1563890882, "post_id": 57165945, "comment_id": 100845759, "body": "@Ctx, good hint, thanks"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1563890930, "post_id": 57165945, "comment_id": 100845784, "body": "The value from <code>ulimit -s</code> has units of kilobytes, so the stack size is limited to 8 MiB."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1563891002, "post_id": 57165945, "comment_id": 100845835, "body": "Usually it is recommended to include few (or many) guard pages between the stack and other memory to prevent/easily detect stack overflows. Do you have ASLR enabled?"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1563891075, "post_id": 57165945, "comment_id": 100845886, "body": "@EugeneSh. It seems you discovered that I am running on WSL :)"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1563891436, "post_id": 57165945, "comment_id": 100846099, "body": "@JonathanLeffler If you say &quot;MiB&quot;, you also have to say &quot;kibibytes&quot;, as ugly as it may read and sound ;)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1563891640, "post_id": 57165945, "comment_id": 100846235, "body": "@Ctx \u2014 I plead guilty to inconsistency; mitigating circumstances include severe under-caffeination. I should have used KiB to avoid writing out kibibytes (and the auto-correcting spelling-mangler had a field day with kibibytes!)."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1563891831, "post_id": 57165945, "comment_id": 100846367, "body": "@Ctx I am also wondering if it is better to use <code>octet</code> instead of <code>byte</code>. It iseems the term <code>byte</code> is ambiguous :("}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1563891986, "post_id": 57165945, "comment_id": 100846463, "body": "@nowox no, it is not ambiguous, it is just something else than an octet (or lets say, an octet is a <i>special case</i> of a byte). A byte is the smallest unit, which has an own memory address. An octet is a byte consisting of 8 bits."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1563892115, "post_id": 57165945, "comment_id": 100846543, "body": "@EricPostpischil my mistake!"}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1563907100, "post_id": 57165945, "comment_id": 100853975, "body": "@EricPostpischil 1. Allocation of arguments is done by <code>exec</code>, not a startup code, and 2. <code>a</code> is global, and is likely in <code>bss</code>, not on stack."}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1563890577, "creation_date": 1563890577, "question_id": 57165945, "link": "https://stackoverflow.com/questions/57165945/how-is-the-process-memory-allocated-on-linux", "title": "How is the process memory allocated on Linux?", "body": "<p>When I build this program: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint a = 0;\n\nint main(int argc, char** argv)\n{\n    printf(\"a = %p\\n\", &amp;a);\n    printf(\"argv = %p\\n\", argv);\n}\n</code></pre>\n\n<p>I can see</p>\n\n<pre><code>a = 0x7f123ec0101c\nargv = 0x7ffff0a27618\n</code></pre>\n\n<p>Knowing the arguments are located on the top of the stack, the variables juste after the code segment, I can conclude that the allocated memory for this program is <code>&amp;argv - &amp;a</code> which is <code>(argv - a) / 1024 / 1024 / 1024 = 950 GiB</code> which seems not realistic. </p>\n\n<p>I also know that the stack size is 8 KiB: </p>\n\n<pre><code>$ ulimit -s\n8192\n</code></pre>\n\n<p>I guess the operating system would do a memory mapping between virtual addresses and real memory adresses using the MMU, but in this case why is the base memory something like <code>0x7f123ec0101c</code> and not <code>0x0000000000</code> and how is the top memory address chosen?</p>\n"}, {"tags": ["c", "filter", "raspberry-pi", "quaternions", "mpu"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1563888957, "post_id": 57165347, "comment_id": 100844527, "body": "You don&#39;t seem to actually calculate the quaternion values anywhere."}, {"owner": {"reputation": 69, "user_id": 8424708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uFYYH.jpg?s=128&g=1", "display_name": "goose", "link": "https://stackoverflow.com/users/8424708/goose"}, "reply_to_user": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1563889766, "post_id": 57165347, "comment_id": 100845057, "body": "Why? updateIMU() calculate my quaternions, it&#39;s update global variables: q0, q1, q2, q3. m_roll, m_picth and m_yaw also global variables, which update computeAngles()"}, {"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1563889918, "post_id": 57165347, "comment_id": 100845153, "body": "You don&#39;t show enough code to do anything useful, please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Also, using global variables like this is generally considered to be bad practice."}, {"owner": {"reputation": 69, "user_id": 8424708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uFYYH.jpg?s=128&g=1", "display_name": "goose", "link": "https://stackoverflow.com/users/8424708/goose"}, "reply_to_user": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1563890606, "post_id": 57165347, "comment_id": 100845598, "body": "I pointed out above what I use library. Header file is huge, i can&#39;t paste here. You can see them following the link: <a href=\"https://github.com/arduino-libraries/MadgwickAHRS&amp;ved=2ahUKEwiGrpOakcvjAhWOlIsKHXsQD_EQFjAAegQIBRAB&amp;usg=AOvVaw3198y6BzSifkJqTH8BGy8M\" rel=\"nofollow noreferrer\">github.com/arduino-libraries/&hellip;</a>"}, {"owner": {"reputation": 69, "user_id": 8424708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uFYYH.jpg?s=128&g=1", "display_name": "goose", "link": "https://stackoverflow.com/users/8424708/goose"}, "reply_to_user": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1563890729, "post_id": 57165347, "comment_id": 100845663, "body": "updateIMU() and computeAngles () taking from MadgwickAHRS library, i didn&#39;t change this functions"}], "owner": {"reputation": 69, "user_id": 8424708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uFYYH.jpg?s=128&g=1", "display_name": "goose", "link": "https://stackoverflow.com/users/8424708/goose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 285, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563888728, "creation_date": 1563888728, "question_id": 57165347, "link": "https://stackoverflow.com/questions/57165347/quaternion-to-degrees-mpu9250", "title": "Quaternion to degrees MPU9250", "body": "<p>I use the library <a href=\"https://www.google.com/url?sa=t&amp;source=web&amp;rct=j&amp;url=https://github.com/arduino-libraries/MadgwickAHRS&amp;ved=2ahUKEwiGrpOakcvjAhWOlIsKHXsQD_EQFjAAegQIBRAB&amp;usg=AOvVaw3198y6BzSifkJqTH8BGy8M\" rel=\"nofollow noreferrer\">https://www.google.com/url?sa=t&amp;source=web&amp;rct=j&amp;url=https://github.com/arduino-libraries/MadgwickAHRS&amp;ved=2ahUKEwiGrpOakcvjAhWOlIsKHXsQD_EQFjAAegQIBRAB&amp;usg=AOvVaw3198y6BzSifkJqTH8BGy8M</a>  I get the data from mpu9250, the Raspberry Pi platform.  But one quaternion is almost equal to just 1, is this normal?  I use updateIMU (where only the accelerometer and the gyroscope are used), then I call the function to translate the quaternions into the corners of the Eiler.  But m_pitch, m_roll, m_yaw are very small, I also tried to multiply these values \u200b\u200bby 180 / 3.14, but the values \u200b\u200bwere still very small.  How to fix this problem and get a normal angle from 0 to 360?</p>\n\n<p>gyro in degrees per seconds, and accelerometer in range 2G</p>\n\n<pre><code>madgwick_init();\n//begin(50);\n\nwhile(1){\n\n    gyro_get_raw(calibrate_raw, &amp;gx, &amp;gy, &amp;gz);\n    accel_get_axis(calibrate_range, &amp;ax, &amp;ay, &amp;az);\n\n    updateIMU((float)gx, (float)gy, (float)gz, (float)ax, (float)ay, (float)az);\n\n    printf(\"accel: x = %d\\n\", ax);\n    printf(\"accel: y = %d\\n\", ay);\n    printf(\"accel: z = %d\\n\\n\", az);\n\n    printf(\"gyro: x = %d\\n\", gx);\n    printf(\"gyro: y = %d\\n\", gy);\n    printf(\"gyro: z = %d\\n\\n\", gz);\n\n    printf(\"q0 = %f\\n\", q0);\n    printf(\"q1 = %f\\n\", q1);\n    printf(\"q2 = %f\\n\", q2);\n    printf(\"q3 = %f\\n\", q3);\n\n    // get_euler_angles(&amp;q0, &amp;q1, &amp;q2, &amp;q3);\n    computeAngles();\n\n    printf(\"roll: %f\\n\", m_roll);\n    printf(\"pitch: %f\\n\", m_pitch);\n    printf(\"yaw: %f\\n\", m_yaw);\n\n    // printf(\"deg: x = %f\\n\", gyro_trapezoid_integration(GYRO_INTEGRATION_X, 1));\n    // printf(\"deg: y = %f\\n\", gyro_trapezoid_integration(GYRO_INTEGRATION_Y, 1));\n    // printf(\"deg: z = %f\\n\\n\", gyro_trapezoid_integration(GYRO_INTEGRATION_Z, 1));\n\n\n\n    //printf(\"x = %d\\n\", gyro_get_x_raw());\n    //printf(\"(double)x = %f\\n\", gyro_get_x_calib_raw(0.00875));\n    //printf(\"rpm: %d\\n\", 1500);\n    //set_speed_motor(4, 1500);\n\n    delay(250);\n    system(\"clear\");\n}\n</code></pre>\n"}, {"tags": ["c", "timer", "arduino", "microcontroller"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 3, "creation_date": 1563888455, "post_id": 57165240, "comment_id": 100844194, "body": "Why do you have any reason to think that one is intrinsically better than the other? One requires less configuration and allows for continuous counting. The other allows you to be specific with the time period."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1563888533, "post_id": 57165240, "comment_id": 100844246, "body": "These functions are performed in hardware, so the cpu is not used in both cases. Hence, there is no performance difference for the running program"}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1563950533, "post_id": 57165240, "comment_id": 100865317, "body": "What do you mean by &quot;efficient&quot;? You can optimize the electrical power, code size, maintainability of the source code, or the hardware you need, or ... By the way, please do not comment on the obvious - it&#39;s going to be wrong earlier than you might expect. Write self-explanatory source code instead."}], "owner": {"reputation": 1, "user_id": 6025737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46f8dc0dcf0ec4c2856cb6a282840574?s=128&d=identicon&r=PG&f=1", "display_name": "user6025737", "link": "https://stackoverflow.com/users/6025737/user6025737"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563888408, "creation_date": 1563888408, "question_id": 57165240, "link": "https://stackoverflow.com/questions/57165240/is-output-compare-timer-or-overflow-timer-more-efficient", "title": "Is output compare timer or overflow timer more efficient", "body": "<p>I am using an arduino leonardo (ATmega32u4) to check if the value of a (analog) pressure sensor is above a certain threshold. I am using timer4 of the ATmega32u4 and mad a overflow timer as well as an output compare timer. The functionality and efficiency of both timers seem to be the same but I suppose one of them should be better. Does anyone know which one should be more efficient in this case?</p>\n\n<pre><code>Below the timer functions.\n\nvoid setupOvfTimer4() {\n\n    //clear timer4 registers\n    OCR4C = 0;\n\n    TCCR4A = 0;\n    TCCR4B = 0;\n    TCCR4C = 0;\n    TCCR4D = 0;\n    TCCR4E = 0;\n\n    TCNT4 = 0; //clear timer4 count register\n    TIMSK4 |= (1&lt;&lt;TOIE4);\n    TCCR4B |= (1 &lt;&lt; CS42 ) | (1&lt;&lt;CS41) | (1&lt;&lt;CS40); //sets prescaler to 64\n    OCR4C = 249; //with prescaler /64 and 16 MHz clock this triggers every ms. (this is TOP).\n\n}\n\nvoid setupOcrTimer4() {\n    TCCR4A = 0;                                      //Clear timer 4 register A\n    TCCR4B = 0;                                      //Clear timer 4 register B\n    TCNT4 = 0;                                       //Clear timer 4 counter register\n    OCR4A = 249;                                     //Set timer 4 output register A to timer4Frequency (Hz)\n    TCCR4B |= (1 &lt;&lt; CS41);                           //Set timer 4 to compare mode (CTC)\n    TCCR4B |= (1 &lt;&lt; CS40);\n    TCCR4B |= (1 &lt;&lt; CS42);                           //Set no prescaler (16E6MHz / 1000Hz = 16e3 &lt; 65535)    \n    TIMSK4 |= (1 &lt;&lt; OCIE4A);                         //Enable ISR immediately\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets", "linux-kernel", "timestamp"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563884796, "post_id": 57164125, "comment_id": 100842085, "body": "Note that <a href=\"https://stackoverflow.com/questions/1453876/why-does-strncpy-not-null-terminate\"><code>strncpy()</code> does not guarantee a properly-terminated string</a>."}, {"owner": {"reputation": 351, "user_id": 9279164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c77489561985bcde6095f03a8876243?s=128&d=identicon&r=PG&f=1", "display_name": "es483", "link": "https://stackoverflow.com/users/9279164/es483"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563886113, "post_id": 57164125, "comment_id": 100842845, "body": "Yes, thank you! I was actually not putting a lot of attention on <code>strncpy</code>/<code>strcpy</code> calls, as this is only a sample code, but this is definitely something to fix in the code, mainly for the call without <code>IFNAMSIZ</code>, which should already take into account the maximum size of an interface name plus the terminating zero byte."}], "answers": [{"tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": true, "score": 2, "last_activity_date": 1563888717, "last_edit_date": 1563888717, "creation_date": 1563888362, "answer_id": 57165224, "question_id": 57164125, "link": "https://stackoverflow.com/questions/57164125/how-do-i-programmatically-check-if-transmit-timestamps-are-supported-by-a-given/57165224#57165224", "title": "How do I programmatically check if transmit timestamps are supported by a given NIC, under Linux?", "body": "<p>You should use the same interface that <code>ethtool</code> uses. There is a specific ioctl called <code>SIOCETHTOOL</code>, that retrieves the information about timestamping capabilities from driver level. This is a short example (error handling etc. is missing for the sake of brevity):</p>\n\n<pre><code>// Specify the ethtool parameter family (timestamping)\nstruct ethtool_ts_info tsi = {.cmd = ETHTOOL_GET_TS_INFO};\n\n// Specify interface to use (eth1 in this example) and pass data buffer\nstruct ifreq ifr = {.ifr_name = \"eth1\", .ifr_data = (void*)&amp;tsi};\n\n// Create a socket for the ioctl command\nint fd = socket(AF_INET, SOCK_DGRAM, 0);\n\n// Perform the ioctl\nioctl(fd, SIOCETHTOOL, &amp;ifr);\n\n// and analyze the results\nif (tsi.so_timestamping &amp; SOF_TIMESTAMPING_TX_HARDWARE)\n    printf(\"%s supports hardware tx timestamps\\n\", ifr.ifr_name);\nif (tsi.so_timestamping &amp; SOF_TIMESTAMPING_TX_SOFTWARE)\n    printf(\"%s supports software tx timestamps\\n\", ifr.ifr_name);\n</code></pre>\n\n<p>Same for RX timestamps. This way you should be able find out if timestamps are supported or not.</p>\n"}], "owner": {"reputation": 351, "user_id": 9279164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c77489561985bcde6095f03a8876243?s=128&d=identicon&r=PG&f=1", "display_name": "es483", "link": "https://stackoverflow.com/users/9279164/es483"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1258, "favorite_count": 0, "accepted_answer_id": 57165224, "answer_count": 1, "score": 2, "last_activity_date": 1563981389, "creation_date": 1563884523, "last_edit_date": 1563981389, "question_id": 57164125, "link": "https://stackoverflow.com/questions/57164125/how-do-i-programmatically-check-if-transmit-timestamps-are-supported-by-a-given", "title": "How do I programmatically check if transmit timestamps are supported by a given NIC, under Linux?", "body": "<p>I am trying to find a way to programmatically check, under Linux and using C, if software transmit timestamps (<code>SOF_TIMESTAMPING_TX_SOFTWARE</code>) are supported by a given NIC, in order to revert to other kinds of timestamps (or disable them completely) if they are not supported.</p>\n\n<p>In particular, my goal would be to check if they are supported like it can be done for hardware timestamps, when calling <code>ioctl(SIOCSHWTSTAMP)</code> and checking its return value (the updated documentation can be found <a href=\"https://www.kernel.org/doc/Documentation/networking/timestamping.txt\" rel=\"nofollow noreferrer\">here</a>).</p>\n\n<p><code>ethtool -T &lt;interface name&gt;</code> is already providing this information, but I do not think it could be a good idea to call <code>system()</code> or <code>popen()</code>, as <code>ethtool</code> may not be installed on the system and I definitely do not want to put it as a prerequisite to run my program.</p>\n\n<p>When experimenting a bit, I used an adaptation of the code coming from <a href=\"https://stackoverflow.com/questions/11731445/timestamp-outgoing-packets\">this question</a>:</p>\n\n<pre><code>#include &lt;arpa/inet.h&gt;\n#include &lt;linux/net_tstamp.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;linux/errqueue.h&gt;\n#include &lt;sys/ioctl.h&gt;\n#include &lt;linux/sockios.h&gt;\n#include &lt;net/if.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;time.h&gt;\n#include &lt;poll.h&gt;\n#include &lt;linux/if.h&gt;\n\n#define RAW_SOCKET 0 // Set to 0 to use an UDP socket, set to 1 to use raw socket\n#define NUM_TESTS 2\n\n#if RAW_SOCKET\n#include &lt;linux/if_packet.h&gt;\n#include &lt;net/ethernet.h&gt;\n#endif\n\nvoid die(char* s)\n{\n    perror(s);\n    exit(1);\n}\n\n// Wait for data to be available on the socket error queue, as detailed in https://www.kernel.org/doc/Documentation/networking/timestamping.txt\nint pollErrqueueWait(int sock,uint64_t timeout_ms) {\n    struct pollfd errqueueMon;\n    int poll_retval;\n\n    errqueueMon.fd=sock;\n    errqueueMon.revents=0;\n    errqueueMon.events=0;\n\n    while((poll_retval=poll(&amp;errqueueMon,1,timeout_ms))&gt;0 &amp;&amp; errqueueMon.revents!=POLLERR);\n\n    return poll_retval;\n}\n\nint run_test(int argc, char* argv[], int hw_stamps, int sock, void *si_server_ptr)\n{\n    #if RAW_SOCKET\n        struct sockaddr_ll si_server=*(struct sockaddr_ll *) si_server_ptr;\n    #else\n        struct sockaddr_in si_server=*(struct sockaddr_in *) si_server_ptr;\n    #endif\n    fprintf(stdout,\"Test started.\\n\");\n\n    int flags;\n    if(hw_stamps) {\n        struct ifreq hwtstamp;\n        struct hwtstamp_config hwconfig;\n\n        // Set hardware timestamping\n        memset(&amp;hwtstamp,0,sizeof(hwtstamp));\n        memset(&amp;hwconfig,0,sizeof(hwconfig));\n\n        // Set ifr_name and ifr_data (see: man7.org/linux/man-pages/man7/netdevice.7.html)\n        strncpy(hwtstamp.ifr_name,argv[1],sizeof(hwtstamp.ifr_name));\n        hwtstamp.ifr_data=(void *)&amp;hwconfig;\n\n        hwconfig.tx_type=HWTSTAMP_TX_ON;\n        hwconfig.rx_filter=HWTSTAMP_FILTER_ALL;\n\n        // Issue request to the driver\n        if (ioctl(sock,SIOCSHWTSTAMP,&amp;hwtstamp)&lt;0) {\n            die(\"ioctl()\");\n        }\n\n        flags=SOF_TIMESTAMPING_RX_HARDWARE | SOF_TIMESTAMPING_TX_HARDWARE | SOF_TIMESTAMPING_RAW_HARDWARE;\n    } else {\n       flags=SOF_TIMESTAMPING_SOFTWARE | SOF_TIMESTAMPING_TX_SOFTWARE;\n    }\n\n    if(setsockopt(sock,SOL_SOCKET,SO_TIMESTAMPING,&amp;flags,sizeof(flags))&lt;0) {\n        die(\"setsockopt()\");\n    }\n\n    const int buffer_len = 256;\n    char buffer[buffer_len];\n\n    // Send 10 packets\n    const int n_packets = 10;\n    for (int i = 0; i &lt; n_packets; ++i) {\n        sprintf(buffer, \"Packet %d\", i);\n        if (sendto(sock, buffer, buffer_len, 0, (struct sockaddr*) &amp;si_server, sizeof(si_server)) &lt; 0) {\n            die(\"sendto()\");\n        }\n\n        fprintf(stdout,\"Sent packet number %d/%d\\n\",i,n_packets);\n        fflush(stdout);\n\n        // Obtain the sent packet timestamp.\n        char data[256];\n        struct msghdr msg;\n        struct iovec entry;\n        char ctrlBuf[CMSG_SPACE(sizeof(struct scm_timestamping))];\n\n        memset(&amp;msg, 0, sizeof(msg));\n        msg.msg_iov = &amp;entry;\n        msg.msg_iovlen = 1;\n        entry.iov_base = data;\n        entry.iov_len = sizeof(data);\n        msg.msg_name = NULL;\n        msg.msg_namelen = 0;\n        msg.msg_control = &amp;ctrlBuf;\n        msg.msg_controllen = sizeof(ctrlBuf);\n        // Wait for data to be available on the error queue\n        pollErrqueueWait(sock,-1); // -1 = no timeout is set\n        if (recvmsg(sock, &amp;msg, MSG_ERRQUEUE) &lt; 0) {\n            die(\"recvmsg()\");\n        }\n\n        // Extract and print ancillary data (SW or HW tx timestamps)\n        struct cmsghdr *cmsg = NULL;\n        struct scm_timestamping hw_ts;\n\n        for(cmsg=CMSG_FIRSTHDR(&amp;msg);cmsg!=NULL;cmsg=CMSG_NXTHDR(&amp;msg, cmsg)) {\n            if(cmsg-&gt;cmsg_level==SOL_SOCKET &amp;&amp; cmsg-&gt;cmsg_type==SO_TIMESTAMPING) {\n                hw_ts=*((struct scm_timestamping *)CMSG_DATA(cmsg));\n                fprintf(stdout,\"HW: %lu s, %lu ns\\n\",hw_ts.ts[2].tv_sec,hw_ts.ts[2].tv_nsec);\n                fprintf(stdout,\"ts[1] - ???: %lu s, %lu ns\\n\",hw_ts.ts[1].tv_sec,hw_ts.ts[1].tv_nsec);\n                fprintf(stdout,\"SW: %lu s, %lu ns\\n\",hw_ts.ts[0].tv_sec,hw_ts.ts[0].tv_nsec);\n            }\n        }\n\n        // Wait 1s before sending next packet\n        sleep(1);\n    }\n    return 0;\n}\n\nint main(int argc, char* argv[]) {\n    int sock;\n    char* destination_ip = \"192.168.1.211\";\n    int destination_port = 1234;\n    struct in_addr sourceIP;\n\n    fprintf(stdout,\"Program started.\\n\");\n\n    if(argc!=2) {\n        fprintf(stderr,\"Error. You should specify the interface name.\\n\");\n        exit(1);\n    }\n\n    // Create socket\n    #if RAW_SOCKET\n        if ((sock = socket(AF_PACKET,SOCK_RAW,htons(ETH_P_ALL))) &lt; 0) {\n            die(\"RAW socket()\");\n        }\n    #else\n        if ((sock = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) &lt; 0) {\n            die(\"UDP socket()\");\n        }\n    #endif\n\n    struct ifreq ifindexreq;\n    #if RAW_SOCKET\n        struct sockaddr_ll si_server;\n        int ifindex=-1;\n\n        // Get interface index\n        strncpy(ifindexreq.ifr_name,argv[1],IFNAMSIZ);\n        if(ioctl(sock,SIOCGIFINDEX,&amp;ifindexreq)!=-1) {\n                ifindex=ifindexreq.ifr_ifindex;\n        } else {\n            die(\"SIOCGIFINDEX ioctl()\");\n        }\n\n        memset(&amp;si_server, 0, sizeof(si_server));\n        si_server.sll_ifindex=ifindex;\n        si_server.sll_family=AF_PACKET;\n        si_server.sll_protocol=htons(ETH_P_ALL);\n    #else\n        struct sockaddr_in si_server;\n\n        // Get source IP address\n        strncpy(ifindexreq.ifr_name,argv[1],IFNAMSIZ);\n        ifindexreq.ifr_addr.sa_family = AF_INET;\n        if(ioctl(sock,SIOCGIFADDR,&amp;ifindexreq)!=-1) {\n            sourceIP=((struct sockaddr_in*)&amp;ifindexreq.ifr_addr)-&gt;sin_addr;\n        } else {\n            die(\"SIOCGIFADDR ioctl()\");\n        }\n\n        bzero(&amp;si_server,sizeof(si_server));\n        si_server.sin_family = AF_INET;\n        si_server.sin_port = htons(destination_port);\n        si_server.sin_addr.s_addr = sourceIP.s_addr;\n        fprintf(stdout,\"source IP: %s\\n\",inet_ntoa(sourceIP));\n    #endif\n\n    // bind() to interface\n    if(bind(sock,(struct sockaddr *) &amp;si_server,sizeof(si_server))&lt;0) {\n        die(\"bind()\");\n    }\n\n    #if !RAW_SOCKET\n        // Set destination IP (re-using si_server)\n        if (inet_aton(destination_ip, &amp;si_server.sin_addr) == 0) {\n            die(\"inet_aton()\");\n        }\n    #endif\n\n    for(int i=0;i&lt;NUM_TESTS;i++) {\n        fprintf(stdout,\"Iteration: %d - HW_STAMPS? %d\\n\",i,i%2);\n        run_test(argc,argv,i%2,sock,(void *)&amp;si_server);\n    }\n\n    close(sock);\n\n    return 0;\n}\n</code></pre>\n\n<p>This code will send out 10 packets requesting software transmit timestamps, then it will try to send other 10 packets, but requesting hardware transmit timestamps, and so on.</p>\n\n<p>It takes as argument the interface name over which the packets should be sent.\nI noticed that, when transmit hardware/software timestamps are supported, everything is working as expected, according to the <a href=\"https://www.kernel.org/doc/Documentation/networking/timestamping.txt\" rel=\"nofollow noreferrer\">kernel timestamping documentation</a>, as in the <code>enp0s31f6</code> (ethernet) interface case:</p>\n\n<pre><code>$ sudo ./test enp0s31f6\nProgram started.\nsource IP: 192.168.1.210\nIteration: 0 - HW_STAMPS? 0\nTest started.\nSent packet number 0/10\nHW: 0 s, 0 ns\nts[1] - ???: 0 s, 0 ns\nSW: 1563878575 s, 690256891 ns\nSent packet number 1/10\nHW: 0 s, 0 ns\nts[1] - ???: 0 s, 0 ns\nSW: 1563878576 s, 690468816 ns\nSent packet number 2/10\nHW: 0 s, 0 ns\nts[1] - ???: 0 s, 0 ns\nSW: 1563878577 s, 691003245 ns\nSent packet number 3/10\nHW: 0 s, 0 ns\nts[1] - ???: 0 s, 0 ns\nSW: 1563878578 s, 691365791 ns\nSent packet number 4/10\nHW: 0 s, 0 ns\nts[1] - ???: 0 s, 0 ns\nSW: 1563878579 s, 691940147 ns\nSent packet number 5/10\nHW: 0 s, 0 ns\nts[1] - ???: 0 s, 0 ns\nSW: 1563878580 s, 692198712 ns\nSent packet number 6/10\nHW: 0 s, 0 ns\nts[1] - ???: 0 s, 0 ns\nSW: 1563878581 s, 692543005 ns\nSent packet number 7/10\nHW: 0 s, 0 ns\nts[1] - ???: 0 s, 0 ns\nSW: 1563878582 s, 692856348 ns\nSent packet number 8/10\nHW: 0 s, 0 ns\nts[1] - ???: 0 s, 0 ns\nSW: 1563878583 s, 693098097 ns\nSent packet number 9/10\nHW: 0 s, 0 ns\nts[1] - ???: 0 s, 0 ns\nSW: 1563878584 s, 693612477 ns\nIteration: 1 - HW_STAMPS? 1\nTest started.\nSent packet number 0/10\nHW: 1563878585 s, 717541747 ns\nts[1] - ???: 0 s, 0 ns\nSW: 0 s, 0 ns\nSent packet number 1/10\nHW: 1563878586 s, 718023872 ns\nts[1] - ???: 0 s, 0 ns\nSW: 0 s, 0 ns\nSent packet number 2/10\nHW: 1563878587 s, 718505122 ns\nts[1] - ???: 0 s, 0 ns\nSW: 0 s, 0 ns\nSent packet number 3/10\nHW: 1563878588 s, 719091997 ns\nts[1] - ???: 0 s, 0 ns\nSW: 0 s, 0 ns\nSent packet number 4/10\nHW: 1563878589 s, 719689747 ns\nts[1] - ???: 0 s, 0 ns\nSW: 0 s, 0 ns\nSent packet number 5/10\nHW: 1563878590 s, 720231247 ns\nts[1] - ???: 0 s, 0 ns\nSW: 0 s, 0 ns\nSent packet number 6/10\nHW: 1563878591 s, 720462747 ns\nts[1] - ???: 0 s, 0 ns\nSW: 0 s, 0 ns\nSent packet number 7/10\nHW: 1563878592 s, 721012872 ns\nts[1] - ???: 0 s, 0 ns\nSW: 0 s, 0 ns\nSent packet number 8/10\nHW: 1563878593 s, 721272372 ns\nts[1] - ???: 0 s, 0 ns\nSW: 0 s, 0 ns\nSent packet number 9/10\nHW: 1563878594 s, 721588497 ns\nts[1] - ???: 0 s, 0 ns\nSW: 0 s, 0 ns\n</code></pre>\n\n<p>Instead, if I try to launch the sample program over a wireless interface, not supporting any kind of transmit timestamp, as reported by <code>ethtool</code>:</p>\n\n<pre><code>$ ethtool -T wlp1s0\nTime stamping parameters for wlp1s0:\nCapabilities:\n    software-receive      (SOF_TIMESTAMPING_RX_SOFTWARE)\n    software-system-clock (SOF_TIMESTAMPING_SOFTWARE)\nPTP Hardware Clock: none\nHardware Transmit Timestamp Modes: none\nHardware Receive Filter Modes: none\n</code></pre>\n\n<p>For what concerns software transmit timestamps, I never get any message looped back to the error queue, causing an indefinite wait if <code>-1</code> is specified as <code>poll</code> timeout, or an <code>EAGAIN</code> error if a timeout is specified (and it expires, when it is set, all the times):</p>\n\n<pre><code>sudo ./test wlp1s0\nProgram started.\nsource IP: 172.22.116.105\nIteration: 0 - HW_STAMPS? 0\nTest started.\nSent packet number 0/10\n.....&lt;stops here&gt;.....\n</code></pre>\n\n<p>The result is the same both when using UDP sockets and when using raw sockets (by setting <code>#define RAW_SOCKET</code> to <code>1</code> or to <code>0</code>).</p>\n\n<p>In order to avoid waiting for a looped back message which will never come (or to wait for a timeout expiration), is there a way in which I can programmatically check if <code>SOF_TIMESTAMPING_TX_SOFTWARE</code> is supported over a given interface and eventually disable the whole mechanism in my program, before trying to retrieve transmit timestamps which cannot be retrieved?</p>\n\n<p>Thank you very much in advance.</p>\n"}]