[{"tags": ["c", "multidimensional-array"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1487203247, "post_id": 42262374, "comment_id": 71682277, "body": "<code>&amp;mat + index</code> is undefined behavior unless <code>index == 0</code> or <code>index == 1</code>.  <code>*(&amp;mat + index)</code> is undefined behavior unless <code>index == 0</code>. <code>printf(&quot;%p\\n&quot;, *(&amp;mat + index));</code> is undefined always."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487203552, "post_id": 42262374, "comment_id": 71682372, "body": "use <code>printf(&quot;%d\\n&quot;, *((int *)&amp;mat + index));</code> to get the intended behaviour"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1487204223, "last_edit_date": 1487204223, "creation_date": 1487203559, "answer_id": 42262439, "question_id": 42262374, "link": "https://stackoverflow.com/questions/42262374/printing-values-of-array-using-pointers-in-c/42262439#42262439", "title": "Printing values of array using pointers in C", "body": "<p>It seems you mean the following</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define N   3\n\nint main(void) \n{\n    int mat[N][N] = { { 1, 2, 3 }, { 4, 5, 6 }, { 7, 8, 9 } };\n\n    for ( int i = 0; i &lt; N * N; i++ )\n    {\n        printf( \"%d \",  *( *( mat + i / N ) + i % N ) );\n        if ( ( i + 1 ) % N == 0 ) printf( \"\\n\" );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The output is</p>\n\n<pre><code>1 2 3 \n4 5 6 \n7 8 9 \n</code></pre>\n\n<p>Another approach is to reinterpret the two-dimensional array as a one dimensional array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define N   3\n\nint main(void) \n{\n    int mat[N][N] = { { 1, 2, 3 }, { 4, 5, 6 }, { 7, 8, 9 } };\n\n    for ( int i = 0; i &lt; N * N; i++ )\n    {\n        printf( \"%d \",  *( ( int * )mat + i ) );\n        if ( ( i + 1 ) % N == 0 ) printf( \"\\n\" );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>If you need that all the integers would be outputted in one line then just remove the if statement.</p>\n"}], "owner": {"reputation": 1250, "user_id": 5679985, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/146c3943e20149fbc04a050430f9c99f?s=128&d=identicon&r=PG&f=1", "display_name": "Human Cyborg Relations", "link": "https://stackoverflow.com/users/5679985/human-cyborg-relations"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 538, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1487208145, "creation_date": 1487203103, "last_edit_date": 1487203674, "question_id": 42262374, "link": "https://stackoverflow.com/questions/42262374/printing-values-of-array-using-pointers-in-c", "title": "Printing values of array using pointers in C", "body": "<p>Pretty basic question. The trick is that the array is defined as a 2D array.</p>\n\n<pre><code>int main(){\n    int mat[3][3] = {1, 2, 3, 4, 5, 6, 7, 8, 9};\n    int index;\n    for (index = 0; index &lt; 9; index++){\n        // only change code below this line\n        // print the value at this index using pointer arithmetic\n\n        //below is my code\n        printf(\"%p\\n\", *(&amp;mat + index));\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I'm new to pointers. From what I understand, the '&amp;' pointer points to the address, and the * pointer points to the value in that address, right? </p>\n\n<p>The output should be the integers 1-9 on a separate line</p>\n"}, {"tags": ["c++", "c", "linux", "multithreading"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1487202853, "post_id": 42262301, "comment_id": 71682142, "body": "Use a <code>sem_t</code> located in shared memory?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1487205541, "post_id": 42262301, "comment_id": 71682949, "body": "Use a robust mutex in shared memory."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1487256499, "post_id": 42262301, "comment_id": 71710536, "body": "So... are you coding in C or C++?"}, {"owner": {"reputation": 105, "user_id": 3000600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/51d15cc7ff169622ef22cfa44a78c9f2?s=128&d=identicon&r=PG", "display_name": "lordofire", "link": "https://stackoverflow.com/users/3000600/lordofire"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1487367778, "post_id": 42262301, "comment_id": 71770728, "body": "@EOF Yup, that&#39;s something I thought about as well, just wonder if this is the best practice to handle this kind of situation"}, {"owner": {"reputation": 105, "user_id": 3000600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/51d15cc7ff169622ef22cfa44a78c9f2?s=128&d=identicon&r=PG", "display_name": "lordofire", "link": "https://stackoverflow.com/users/3000600/lordofire"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1487367907, "post_id": 42262301, "comment_id": 71770801, "body": "@RustyX I&#39;m comfortable in both. I believe C++ libs like boost is still wrapping some Linux C API to do the job, so essentially C would be better."}], "owner": {"reputation": 105, "user_id": 3000600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/51d15cc7ff169622ef22cfa44a78c9f2?s=128&d=identicon&r=PG", "display_name": "lordofire", "link": "https://stackoverflow.com/users/3000600/lordofire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487202689, "creation_date": 1487202689, "question_id": 42262301, "link": "https://stackoverflow.com/questions/42262301/linux-c-synchronization-method-both-inter-and-intra-process", "title": "linux c++ synchronization method both inter and intra process", "body": "<p>The question is brought up when I developing a registry system (c/c++, 2.6.32-642.6.2.el6.x86_64 #1 SMP) used to bookmark information for each database, which requires locking for both inter and intra process. Normally, <a href=\"https://linux.die.net/man/3/lockf\" rel=\"nofollow noreferrer\">lockf()</a>, <a href=\"https://linux.die.net/man/2/flock\" rel=\"nofollow noreferrer\">flock()</a>, <a href=\"https://linux.die.net/man/2/fcntl\" rel=\"nofollow noreferrer\">fcntl()</a> are obvious candidates for the inter process locking, but then I find out that they do not work as expected for intra-process locking(multi threads in same process). </p>\n\n<p>I tested it using the following program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;fcntl.h&gt;    /* For O_RDWR */\n#include &lt;unistd.h&gt;   /* For open(), creat() */\n#include &lt;errno.h&gt;\n\nint counter = 0;\n\nvoid* counterThread(void* ptr)\n{\n    int lockfd = 0;\n    int tmpCounter = 0;\n\n    lockfd = open(\"/tmp/lockfile.txt\", O_CREAT|O_WRONLY, 0666);\n    if(lockfd == -1)\n    {\n        printf(\"lockfile could not be created, errno:%d\\n\", errno);\n        return NULL;\n    }\n\n    if(lockf(lockfd, F_LOCK, 0) == -1)\n    {\n        printf(\"lockfile could not be locked, errno:%d\\n\", errno);\n        return NULL;\n    }\n\n    counter++;\n    tmpCounter = counter;\n\n    if(lockf(lockfd, F_ULOCK, 0) == -1)\n    {\n        printf(\"lockfile could not be unlocked, errno:%d\\n\", errno);\n        return NULL;\n    }\n    close(lockfd);\n\n    printf(\"counter is %d, lockfile is %d\\n\", tmpCounter, lockfd);\n}\n\nint main()\n{\n    int threadNum = 30000;\n    pthread_t threads[30000];\n    int i = 0;\n    int rv = 0;\n    for(; i &lt; threadNum; i++)\n    {\n        rv = pthread_create( &amp;threads[i], NULL, &amp;counterThread, NULL);\n        if(rv != 0)\n        {\n            printf(\"failed to create pthread %d\\n\", i);\n            return -1;\n        }\n    }\n    for(i = 0; i &lt; threadNum; i++)\n        pthread_join(threads[i], NULL);\n\n    return 0;\n}\n</code></pre>\n\n<p>The output would be:</p>\n\n<pre><code>counter is 1, lockfile is 4\ncounter is 2, lockfile is 3\ncounter is 3, lockfile is 5\ncounter is 4, lockfile is 6\ncounter is 7, lockfile is 4\n...\ncounter is 29994, lockfile is 3\ncounter is 29995, lockfile is 3\ncounter is 29996, lockfile is 3\ncounter is 29997, lockfile is 3\ncounter is 29998, lockfile is 3\n</code></pre>\n\n<p>The output sequence is random and sometimes missing some numbers inside, meaning there is definitely a race condition happening. I think the reason is probably that fd opened for the same file in the same process is somehow optimized to be reused. Because all these locking mechanism is implemented in granularity of fd, the locking does not work in this case.</p>\n\n<p>Given the background, I would like to ask the following question:</p>\n\n<ol>\n<li>Is there any means I could force open to return different fd for different threads to same process to make the locking works?</li>\n<li><p>Is there any good practice or convenient API in Linux to do both inter and intra process locking? What I could think of is the following means to implement it(not verified yet), but I would like to know some easier ways:</p>\n\n<p>(1) Implement mutex and semaphore to serialize the access to all these lockfile APIs for the critical resources</p>\n\n<p>(2) shm_open a shared memory, mmap it in different processes and add semaphore/mutex inside to lock the critical resources</p></li>\n</ol>\n\n<p>Thanks in advance:)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487202697, "post_id": 42262292, "comment_id": 71682099, "body": "<code>double x,y,z;</code> have <i>undefined</i> values. So what happens next, is also undefined."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1487202731, "post_id": 42262292, "comment_id": 71682106, "body": "Uninitialized variables cause undefined behavior. Don&#39;t use variables without initializing them first. This is basic. Re-read your lessons on variables and initialization."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1487202757, "post_id": 42262292, "comment_id": 71682112, "body": "Undefined behavior for not passing a corresponding argument for a <code>&quot;%&quot;</code> conversion in <code>scanf()</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487202869, "post_id": 42262292, "comment_id": 71682150, "body": "The variables <code>t</code> and <code>s</code> are not being given a rule for <i>future</i> behaviour: they are (attempted to be) evaluated immediately. So you need to move those two lines down, past where you enter the data - which as EOF noticed, is where the segfault is caused."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1487203289, "post_id": 42262292, "comment_id": 71682293, "body": "<code>scanf(&quot;%f, x&quot;);</code>  --&gt;  <code>scanf(&quot;%lf&quot;, &amp;x);</code>   modern compilers will warn about this"}, {"owner": {"reputation": 5, "user_id": 7525894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd834ce5554628d065736cea8a33d21?s=128&d=identicon&r=PG&f=1", "display_name": "Stendhal", "link": "https://stackoverflow.com/users/7525894/stendhal"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1487204092, "post_id": 42262292, "comment_id": 71682514, "body": "@KenWhite Oh duh, that was stupid of me to miss that they weren&#39;t initialized.  Thanks for pointing that out."}, {"owner": {"reputation": 5, "user_id": 7525894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd834ce5554628d065736cea8a33d21?s=128&d=identicon&r=PG&f=1", "display_name": "Stendhal", "link": "https://stackoverflow.com/users/7525894/stendhal"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487204314, "post_id": 42262292, "comment_id": 71682581, "body": "@M.M Yeah, as KenWhite and other pointed out above, I declared but didn&#39;t initialize any of the values that I had.  When they pointed that out I fixed that error.  But thanks for writing it out, I would have initially written out (&quot;%f&quot;, &amp;x); instead of (&quot;%lf&quot;, &amp;x);  so thanks for that.  Saved me a headache down the line."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487204508, "post_id": 42262292, "comment_id": 71682637, "body": "You also had the quote mark in the wrong place"}], "answers": [{"tags": [], "owner": {"reputation": 652, "user_id": 4080489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QJ9sc.jpg?s=128&g=1", "display_name": "Aniruddh Dikhit", "link": "https://stackoverflow.com/users/4080489/aniruddh-dikhit"}, "is_accepted": true, "score": 0, "last_activity_date": 1487296818, "creation_date": 1487296818, "answer_id": 42288102, "question_id": 42262292, "link": "https://stackoverflow.com/questions/42262292/trouble-understanding-why-i-get-segmentation-fault-core-dumped-in-my-code/42288102#42288102", "title": "Trouble understanding why I get Segmentation fault (core dumped) in my code", "body": "<p>You are segfaulting because of the scanf's have both the type and variable in double quotes so there is nothing to read into. Additionally the \"%f\" should be changed to \"%lf\" for double.</p>\n\n<pre><code>scanf(\"%f, x\");\n</code></pre>\n\n<p>This should have been</p>\n\n<pre><code>scanf(\"%lf\", &amp;x);\n</code></pre>\n\n<p>Also move the t and s computational statements after you have read value for z.</p>\n\n<pre><code>..\nprintf(\"Component z:  \");\nscanf(\"%lf\", &amp;z);\n\ndouble t = (x*x + y*y + z*z);\ndouble s = sqrt(t);\n\nprintf(\"Magnitude:  %lf\" , s);\n..\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7525894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd834ce5554628d065736cea8a33d21?s=128&d=identicon&r=PG&f=1", "display_name": "Stendhal", "link": "https://stackoverflow.com/users/7525894/stendhal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 42288102, "answer_count": 1, "score": 0, "last_activity_date": 1487296818, "creation_date": 1487202633, "question_id": 42262292, "link": "https://stackoverflow.com/questions/42262292/trouble-understanding-why-i-get-segmentation-fault-core-dumped-in-my-code", "title": "Trouble understanding why I get Segmentation fault (core dumped) in my code", "body": "<p>This seems to be a relatively common question, but other posts aren't pointing me in the right direction on what to do.  I have a hard time seeing how this code doesn't work.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main(){\n\ndouble x,y,z;\ndouble t = (x*x + y*y + z*z);\ndouble s = sqrt(t);\n\nprintf(\"Component x:  \");\nscanf(\"%f, x\");\n\nprintf(\"Component y:  \");\nscanf(\"%f, y\");\n\nprintf(\"Component z:  \");\nscanf(\"%f, z\");\n\nprintf(\"Magnitude:  %f, s\");\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "algorithm"], "comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 3, "creation_date": 1487202426, "post_id": 42262239, "comment_id": 71682016, "body": "<code>N = (n + b - 1) &#47; b;</code> maybe?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487202608, "post_id": 42262239, "comment_id": 71682071, "body": "See <a href=\"https://stackoverflow.com/questions/2422712/\">C rounding integer division (instead of truncating)</a>"}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1487202683, "post_id": 42262239, "comment_id": 71682096, "body": "See Jonathan Leffler&#39;s rounding up answer in the linked question."}, {"owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "edited": false, "score": 0, "creation_date": 1487234051, "post_id": 42262239, "comment_id": 71693635, "body": "Aha... hmmmm... I ams dealing with an embedded system design here. No floating point unit. Truncation is ok. That is why I was adding 1."}, {"owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "edited": false, "score": 0, "creation_date": 1487234157, "post_id": 42262239, "comment_id": 71693691, "body": "All numbers are unsigned"}], "owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1487202657, "answer_count": 0, "score": 1, "last_activity_date": 1487202295, "creation_date": 1487202295, "question_id": 42262239, "link": "https://stackoverflow.com/questions/42262239/is-there-a-more-compact-way-of-calculating-the-number-of-transactions-required", "closed_reason": "Duplicate", "title": "Is there a more compact way of calculating the number of transactions required?", "body": "<p>I need to calculate how many transactions are required to transmit n bytes. I can only read b bytes from the external hardware in a single transaction. The number of transactions is N. This pseudo-code seems sufficient:</p>\n\n<pre><code>If n=0 then\n  N=0 // 0 transactions needed as no data has to be transferred IN or OUT\nelse\n  if n%b then\n    N=n/b+1 // n is not wholly divisible by b, thus the (last) Nth transaction shall transfer less than b bytes\n  else\n    N=n/b // all N transactions shall transfer exactly b bytes\n  end if\nend if\n</code></pre>\n\n<p>My question is simply, is there a more compact way to do this? I am checking using modulus operator that n%b is nonzero since if I have to transfer 3 bytes and the buffer is 8 bytes, then 3/8 shall be 0 in int but the +1 shall take care of it giving 1 transaction.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487202018, "post_id": 42262060, "comment_id": 71681891, "body": "Numbers are less likely to go out of range if you can find a progressive algorithm which multiplies and divides a previous term, instead of trying to shoot the moon with a factorial function. Or, which builds an array by addition only of two previous array terms."}], "answers": [{"comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1487201648, "post_id": 42262094, "comment_id": 71681764, "body": "32-bit <code>int</code> will only be able to hold results up to 12!."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487201887, "post_id": 42262094, "comment_id": 71681852, "body": "At least use <code>uint64_t</code>"}], "tags": [], "owner": {"reputation": 867, "user_id": 5922657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xnlXa.jpg?s=128&g=1", "display_name": "Neo X", "link": "https://stackoverflow.com/users/5922657/neo-x"}, "is_accepted": false, "score": 0, "last_activity_date": 1487201413, "last_edit_date": 1495542302, "creation_date": 1487201413, "answer_id": 42262094, "question_id": 42262060, "link": "https://stackoverflow.com/questions/42262060/pascals-triangle-program-not-working/42262094#42262094", "title": "Pascal&#39;s Triangle program not working", "body": "<p>In <code>double fact(int num)</code>, the variable <code>result</code> should be explicitly initialized. Also, I would suggest you to define both the return value of the function and variable <code>result</code> to <code>int</code> type.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/11962457/why-is-using-an-uninitialized-variable-undefined-behavior-in-c\">(Why) is using an uninitialized variable undefined behavior?</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 265, "user_id": 4364145, "user_type": "registered", "profile_image": "https://graph.facebook.com/581592270/picture?type=large", "display_name": "Jorge Del Conde", "link": "https://stackoverflow.com/users/4364145/jorge-del-conde"}, "is_accepted": false, "score": 0, "last_activity_date": 1487202188, "creation_date": 1487202188, "answer_id": 42262222, "question_id": 42262060, "link": "https://stackoverflow.com/questions/42262060/pascals-triangle-program-not-working/42262222#42262222", "title": "Pascal&#39;s Triangle program not working", "body": "<p>At a glance, there seems to be several issues.</p>\n\n<p>First:</p>\n\n<pre><code>double fact(int num)\n{\n    double result;\n    int i;\n    for(i = 1; i &lt;= num; ++i)\n    {\n    result = result * i;\n    }\n    return result;\n}\n</code></pre>\n\n<p>result is not initialized to anything. Maybe you need to initialize it to 1?</p>\n\n<pre><code>for(i = 0; i &lt;= (row_index + 1); i++)\n{\n    output2 = fact(i);\n    output3 = row_index - i;\n    output4 = fact(output3);\n    output5 = output1 / (output2 * output4);\n}\n</code></pre>\n\n<p>the first time around, i == 0; which means output2 at best will be 0 (assuming its automatically initialized to 0).  If output2 == 0, output5 might be undefined.  I say might because of double-precision numbers it may actually not be exactly 0.</p>\n"}], "owner": {"reputation": 23, "user_id": 7571797, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GrXt431hUNM/AAAAAAAAAAI/AAAAAAAAIa8/g-J0gz8OBuk/photo.jpg?sz=128", "display_name": "Spencer Hecht", "link": "https://stackoverflow.com/users/7571797/spencer-hecht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487202188, "creation_date": 1487201271, "question_id": 42262060, "link": "https://stackoverflow.com/questions/42262060/pascals-triangle-program-not-working", "title": "Pascal&#39;s Triangle program not working", "body": "<p>I'm very new to C, although I've done a decent amount of Java before. I'm making a basic Pascal's Triangle program and I've been looking at it for an hour trying to get it working. All the logic seems correct to me but I'll probably die before I realize what's wrong. Here's the program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\ndouble fact(int num);\n\nint main()\n{\n    int row_index = 0;\n    printf(\"Enter the row index : \");\n    scanf(\"%d\",&amp;row_index);\n    printf(\"\\n\");\n    int i;\n    double output1 = 0;\n    double output2 = 0;\n    double output3 = 0;\n    double output4 = 0;\n    double output5 = 0;\n    int output6 = 0;\n    for(i = 0; i &lt;= (row_index + 1); i++)\n    {\n        output1 = fact(row_index);\n        output2 = fact(i);\n        output3 = row_index - i;\n        output4 = fact(output3);\n        output5 = output1 / (output2 * output4);\n        output6 = (int)(output5);\n        printf(\"%i \",output6);\n    }\n    return 0;\n}\n\ndouble fact(int num)\n{\n    double result;\n    int i;\n    for(i = 1; i &lt;= num; ++i)\n        {\n            result = result * i;\n        }\n    return result;\n}\n</code></pre>\n\n<p>The compiler is giving me no errors, and each every time I input a number it gives this as output:</p>\n\n<pre><code>Enter the row index : 6\n\n-2147483648 -2147483648 -2147483648 -2147483648 -2147483648 -2147483648 -2147483648 -2147483648\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 9, "creation_date": 1487200537, "post_id": 42261899, "comment_id": 71681374, "body": "Because that&#39;s what the language says."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1487200624, "post_id": 42261899, "comment_id": 71681405, "body": "<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.1.8p1\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.3.1.8p1</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1487200731, "post_id": 42261899, "comment_id": 71681443, "body": "Aside to the <code>a-b</code> issue:  <code>4294967295</code> is likely not an <code>int</code>, nor <code>unsigned</code>, but a <code>long</code> or <code>long long</code> and gets converted to an <code>unsigned</code>."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1487200800, "post_id": 42261899, "comment_id": 71681474, "body": "BTW: <code>a-b;</code> :statement has no effect: can be optimised out."}, {"owner": {"reputation": 720, "user_id": 5443389, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fb697aaeb92f932a587d6e8d74510580?s=128&d=identicon&r=PG", "display_name": "MaximPro", "link": "https://stackoverflow.com/users/5443389/maximpro"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487200897, "post_id": 42261899, "comment_id": 71681502, "body": "@Chux why 4294967295 is not unsigned?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487201055, "post_id": 42261899, "comment_id": 71681571, "body": "@chux The question is not answered because the question is about why this rule was adopted in the Standard."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1487201198, "post_id": 42261899, "comment_id": 71681623, "body": "@jenesaisquoi 4294967295 is UINT_MX in his system."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1487201201, "post_id": 42261899, "comment_id": 71681625, "body": "@MaximPro: 4294967295 is a decimal constant, and the types of decimal constants are the smallest of <code>int</code>, <code>long int</code> and <code>long long int</code> that will hold the value (C11 &#167;6.4.4.1 Integer constants, &#182;5).  If the value was written 0xFFFFFFFF, then it would probably be an <code>unsigned int</code> (assuming 32-bit <code>int</code> type)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1487201396, "post_id": 42261899, "comment_id": 71681690, "body": "@MaximPro if you have 32-bit <code>int</code> the value <code>4294967295</code> <i>cannot</i> be converted to <code>int</code> because it is outside of its range."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1487201422, "post_id": 42261899, "comment_id": 71681697, "body": "@immibis And he asks why did the standard adopt this rule instead of converting to the signed type?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487201607, "post_id": 42261899, "comment_id": 71681752, "body": "@WeatherVane Strictly speaking INT_MIN is also outside the range of non-negative numbers.:)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1487201702, "post_id": 42261899, "comment_id": 71681782, "body": "@VladfromMoscow: But there&#39;s no useful answer other than &#39;K&amp;R 1st Edition said so&#39;, and it was implemented because it seemed sensible to do it that way when the <code>unsigned</code> qualifier was added to C, somewhere in the early to mid 70s."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1487201751, "post_id": 42261899, "comment_id": 71681797, "body": "@VladfromMoscow which is why <code>limits.h</code> has <code>#define INT_MIN (-2147483647 - 1)</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487202102, "post_id": 42261899, "comment_id": 71681918, "body": "@MaximPro Are you asking what the conversion rule is with mixed <code>unsigned</code> and. <code>int</code>?  Or are you asking why the standard specified that <code>unsigned</code> should be used instead of <code>int</code> in mixed code?"}, {"owner": {"reputation": 720, "user_id": 5443389, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fb697aaeb92f932a587d6e8d74510580?s=128&d=identicon&r=PG", "display_name": "MaximPro", "link": "https://stackoverflow.com/users/5443389/maximpro"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487202247, "post_id": 42261899, "comment_id": 71681957, "body": "@Chux second :)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487203655, "post_id": 42261899, "comment_id": 71682396, "body": "@JonathanLeffler that&#39;s if C11 is in use - many people still use compilers defaulting to C89 mode, or even non-standard mode."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487203933, "post_id": 42261899, "comment_id": 71682463, "body": "@M.M: That&#39;s the standard I quoted from.  C99 effectively (if not literally) says the same, and in the same section number.  C89 doesn&#39;t mention <code>long long</code>, of course (and the section number is different \u2014 &#167;6.1.3.2): <i>The type of an integer constant is the first of the corresponding list in which its value can be represented. Unsuffixed decimal <code>int</code>, <code>long int</code>, <code>unsigned long int</code>: \u2026</i>  It&#39;s interesting that the &#39;unsigned&#39; alternative is lost in the C99 and C11 standards."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487204547, "post_id": 42261899, "comment_id": 71682653, "body": "@MaximPro Guess: At the time (1970s), there were 3 flavors of <code>signed int</code> in common usage: 2&#39;complement, 1&#39;s complement, sign-magnitude. Conversion <code>unsigned</code> to <code>int</code> is not easy to specify in a way that all 3 should behave in a common way that is easy for various platforms to implement. So <code>unsigned</code> to <code>int</code> conversion is implementation-defined  Conversion the other way is well defined and it goes to the one and only representation (aside from width) <b>and does not favor</b> one representation.  Converting to <code>unsigned</code> with mixed <code>int&#47;unsigned</code>, code uses well defined neutral representation"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487243892, "post_id": 42261899, "comment_id": 71700818, "body": "Conversion is not the same as casting. Don&#39;t use unrelated tags."}], "owner": {"reputation": 720, "user_id": 5443389, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fb697aaeb92f932a587d6e8d74510580?s=128&d=identicon&r=PG", "display_name": "MaximPro", "link": "https://stackoverflow.com/users/5443389/maximpro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "closed_date": 1487221851, "answer_count": 0, "score": 2, "last_activity_date": 1487243754, "creation_date": 1487200454, "last_edit_date": 1487243754, "question_id": 42261899, "link": "https://stackoverflow.com/questions/42261899/why-signed-int-convert-to-unsigned-int", "closed_reason": "Duplicate", "title": "Why signed int convert to unsigned int", "body": "<p>Can you explain this moment? Why unsigned int doesn't convert to signed int.</p>\n\n<pre><code>signed int a = 100;\nunsigned int b = 4294967295;\na-b; /// Why 'a' will be convert to unsigned? Explain pls\n</code></pre>\n"}, {"tags": ["c", "pointers", "memory-address"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1487200469, "post_id": 42261875, "comment_id": 71681349, "body": "The <code>*</code> only applies to the variable right after it, not all the variables on the line."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487200495, "post_id": 42261875, "comment_id": 71681359, "body": "Because it is not <code>int* salary</code> etc, but <code>int *salary</code> etc. The <code>*</code> qualifies the variable, not the type."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 7021861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be3f3faf9416a24e79a4175663f5e3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Shoaib Ahmed", "link": "https://stackoverflow.com/users/7021861/shoaib-ahmed"}, "edited": false, "score": 0, "creation_date": 1487200705, "post_id": 42261918, "comment_id": 71681434, "body": "I know the value of ids[0] which is 2000, but not ids[1]"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 75, "user_id": 7021861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be3f3faf9416a24e79a4175663f5e3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Shoaib Ahmed", "link": "https://stackoverflow.com/users/7021861/shoaib-ahmed"}, "edited": false, "score": 0, "creation_date": 1487200926, "post_id": 42261918, "comment_id": 71681516, "body": "@ShoaibAhmed no, <code>ids[0]</code> is 100. Look at the array <code>int ids[3] = {100,200,300};</code> which defines <code>ids[0]</code> as 100, <code>ids[1]</code> as 200, <code>ids[2]</code> as 300."}, {"owner": {"reputation": 75, "user_id": 7021861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be3f3faf9416a24e79a4175663f5e3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Shoaib Ahmed", "link": "https://stackoverflow.com/users/7021861/shoaib-ahmed"}, "edited": false, "score": 0, "creation_date": 1487201043, "post_id": 42261918, "comment_id": 71681562, "body": "oh my bad, i miss read that part. Thank you for pointing that out."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 2, "last_activity_date": 1487200522, "creation_date": 1487200522, "answer_id": 42261918, "question_id": 42261875, "link": "https://stackoverflow.com/questions/42261875/understanding-memory-addresses-and-pointers-in-c/42261918#42261918", "title": "Understanding memory addresses and pointers in C", "body": "<blockquote>\n  <p>why is there an asterisk at the beginning of salary3 if an asterisk was already used in the beginning of the line?</p>\n</blockquote>\n\n<p>The asterisk means the next variable is a pointer. It's the same as:</p>\n\n<pre><code>int *salary;\nint salary1;\nint salary2;\nint *salary3;\n</code></pre>\n\n<p>but on one line.</p>\n\n<blockquote>\n  <p>how are we supposed to determine the value of salary1 when we don't know the value of ids[1]?</p>\n</blockquote>\n\n<p>But you do know the value of ids[1]. It's 200.</p>\n"}, {"tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 1, "last_activity_date": 1487205704, "creation_date": 1487205704, "answer_id": 42262794, "question_id": 42261875, "link": "https://stackoverflow.com/questions/42261875/understanding-memory-addresses-and-pointers-in-c/42262794#42262794", "title": "Understanding memory addresses and pointers in C", "body": "<p>Firstly, C declaration syntax is a bit confusing</p>\n\n<pre><code>int *x, y;\n</code></pre>\n\n<p>Means x is a pointer to an int, y is an int. That's such a source of confusion that virtually every style guide forbids it.</p>\n\n<p>This</p>\n\n<pre><code>  int ids[3] = {100,200,300};\n</code></pre>\n\n<p>declares an array. ids[0] = 100, ids[1] = 200, ids[2] = 300. It's only really possible to match subscripts to array contents by eye when arrays are small. So this isn't a normal use of arrays. Either you have large read-only tables in global memory, or you create an array at runtime and fill it. However there shouldn't be an issue is ids[1] holding 200, that's how C array syntax works.</p>\n"}], "owner": {"reputation": 75, "user_id": 7021861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be3f3faf9416a24e79a4175663f5e3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Shoaib Ahmed", "link": "https://stackoverflow.com/users/7021861/shoaib-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1487205704, "creation_date": 1487200335, "last_edit_date": 1487200538, "question_id": 42261875, "link": "https://stackoverflow.com/questions/42261875/understanding-memory-addresses-and-pointers-in-c", "title": "Understanding memory addresses and pointers in C", "body": "<p>I received the following question on one of my practice problemswhere it says to determine what is printed by this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\n    int ids[3] = {100,200,300};\n    int *salary, salary1, salary2, *salary3;\n    salary1 = ids[0] * ids[1];\n    salary = &amp;ids[1] ;\n    salary2 = *(ids+1)* *(ids+2);\n    salary3 = ids+2;\n    printf(\"*salary = %d\\nsalary1 = %d\\n\", *salary, salary1);\n    printf(\"salary2 = %d\\nsalary3 = %p\\n\", salary2, salary3);\n}\n</code></pre>\n\n<p>I am a bit confused about this code. Firstly, in line 4:</p>\n\n<pre><code>    int *salary, salary1, salary2, *salary3;\n</code></pre>\n\n<p>Why is there an asterisk at the beginning of <code>salary3</code> if an asterisk was already used in the beginning of  the line?</p>\n\n<p>Secondly when it says:</p>\n\n<pre><code>    salary1 = ids[0] * ids[1];\n</code></pre>\n\n<p>how are we supposed to determine the value of <code>salary1</code> when we don't know the value of <code>ids[1]</code>?</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487200322, "post_id": 42261812, "comment_id": 71681307, "body": "Try defining it twice in the <i>same</i> file. You will be surprised. <a href=\"http://en.cppreference.com/w/c/language/extern\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/language/extern</a>"}, {"owner": {"reputation": 2417, "user_id": 2503164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/68d57915f8c4a877fe42a67251d1420a?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2503164/mike"}, "edited": false, "score": 0, "creation_date": 1487200351, "post_id": 42261812, "comment_id": 71681316, "body": "The duplication wouldn&#39;t show up until the linker and since nothing references an <i>external</i> instance of &#39;a&#39; then the duplicate definitions go unnoticed and ignored."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487201879, "post_id": 42261812, "comment_id": 71681850, "body": "This was asked earlier this week by someone else (<a href=\"https://stackoverflow.com/questions/42215669/\">Why is there no error in this program?</a>).  That was closed as a duplicate of <a href=\"https://stackoverflow.com/questions/1490693/\">Tentative definitions in C99 and linking</a>. It has been addressed in <a href=\"https://stackoverflow.com/questions/1433204/\">How do I use <code>extern</code> to share variables between source files in C?</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487202633, "post_id": 42261812, "comment_id": 71682079, "body": "In case it&#39;s not clear from the duplicate: in C and C++, the code is undefined behaviour with no diagnostic required.  In some C compilers (but not C++ compilers) there is a compiler extension to link the two <code>a</code> together."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 5, "last_activity_date": 1487242707, "last_edit_date": 1487242707, "creation_date": 1487200416, "answer_id": 42261889, "question_id": 42261812, "link": "https://stackoverflow.com/questions/42261812/gcc-no-warning-or-error-when-declaring-a-global-variable-multiple-times/42261889#42261889", "title": "GCC no warning or error when declaring a global variable multiple times", "body": "<blockquote>\n  <p>When compiled with <code>g++ a.c b.c -Wall -O0</code> it produces a linking error, as expected. However, when invoking <code>gcc a.c b.c -Wall -O0</code> it produces no warning and no error!</p>\n</blockquote>\n\n<p>In your code <code>a</code> has <em>tentative definition</em> (which becomes a <em>full</em> definition at the end of the current translation unit) which is valid in C. However, there's another such tentative definition which becomes a full definition in <code>b.c</code> from another translation unit - both of which provide an external definition for <code>a</code> in your program. In other words, <code>a.c</code> and <code>b.c</code> are fine on their own but isn't valid when they are combined either compiling together (either directly you do or by compiling them into separate modules and then making an executable by linking them). This is <em>undefined behaviour</em>:</p>\n\n<p><a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.9p5\" rel=\"nofollow noreferrer\">C11, 6.9/5</a>:</p>\n\n<blockquote>\n  <p>An external definition is an external declaration that is also a definition of a function (other than an inline definition) or an object. If an identifier declared with external linkage is used in an expression (other than as part of the operand of a sizeof or _Alignof operator whose result is an integer constant), somewhere in the entire program there shall be exactly one external definition for the identifier; otherwise, there shall be no more than one.161</p>\n</blockquote>\n\n<p>However this is often supported as an extension by gcc. That's why when you invoke <code>gcc</code> it compiles fine as C code. Strictly (standard-wise), this is invalid code in C.</p>\n\n<p>When you invoke <code>g++</code> to compile it as C++ code, it'd fails because C++ has no tentative definitions. It's not valid in C++. Hence, <code>g++</code> errors out. See <a href=\"http://en.cppreference.com/w/cpp/language/definition\" rel=\"nofollow noreferrer\">One Definition Rule</a> in C++.</p>\n"}], "owner": {"reputation": 289, "user_id": 765269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b4362ee0647d3fce783e64105587070b?s=128&d=identicon&r=PG", "display_name": "user765269", "link": "https://stackoverflow.com/users/765269/user765269"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 796, "favorite_count": 1, "closed_date": 1487202298, "accepted_answer_id": 42261889, "answer_count": 1, "score": 5, "last_activity_date": 1487242707, "creation_date": 1487200004, "question_id": 42261812, "link": "https://stackoverflow.com/questions/42261812/gcc-no-warning-or-error-when-declaring-a-global-variable-multiple-times", "closed_reason": "Duplicate", "title": "GCC no warning or error when declaring a global variable multiple times", "body": "<p>Suppose the following code:</p>\n\n<p>a.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint a;\nint func();\n\nint main(int argc, char **argv) {\na = 7;\nint a2 = func();\nprintf(\"a is %d, a2 is %d\\n\", a, a2);\nreturn 0;\n}\n</code></pre>\n\n<p>and b.c:</p>\n\n<pre><code>int a;\n\nint func()\n{\na = 9;\nreturn a;\n}\n</code></pre>\n\n<p>When compiled with <code>g++ a.c b.c -Wall -O0</code> it produces a linking error, as expected. However, when invoking <code>gcc a.c b.c -Wall -O0</code> it produces no warning and no error!</p>\n\n<p>The output is <code>a is 9, a2 is 9</code> by the way.</p>\n\n<p>gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.4)</p>\n\n<p>Why does GCC allow this? \nI was surprised by this behaviour. If you initialize the variables at declaration, then linking will also fail with GCC.</p>\n"}, {"tags": ["c", "node.js", "performance", "memory", "allocation"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1487200282, "post_id": 42261684, "comment_id": 71681295, "body": "Add code in both cases to fill the buffer with zeroes and watch what happens."}, {"owner": {"reputation": 31, "user_id": 5674289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rXz1L.jpg?s=128&g=1", "display_name": "HermannSW", "link": "https://stackoverflow.com/users/5674289/hermannsw"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1487200877, "post_id": 42261684, "comment_id": 71681494, "body": "The use case I am after is O(1) time check of edge existence in a graph by using an uninitialized 2d array -- initialization would take O(N^2) runtime for N vertices. So why the difference of Buffer.allocUnsafe() and malloc() runtimes? Should do the same thing ..."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1487201017, "post_id": 42261684, "comment_id": 71681552, "body": "One just reserves space in an accounting system. The other actually allocates and maps pages of memory."}, {"owner": {"reputation": 31, "user_id": 5674289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rXz1L.jpg?s=128&g=1", "display_name": "HermannSW", "link": "https://stackoverflow.com/users/5674289/hermannsw"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1487201446, "post_id": 42261684, "comment_id": 71681704, "body": "From the nodejs.org link above: &quot;The underlying memory for Buffer instances created in this way is not initialized. &quot; Shouldn&#39;t that do exactly what malloc() does, just reserve space?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1487228946, "post_id": 42261684, "comment_id": 71690783, "body": "They mean that it&#39;s not guaranteed to be initialized, not that it&#39;s guaranteed to be uninitialized. For example, you might get a buffer that was previously used for some other purpose and still contains the data from before."}, {"owner": {"reputation": 31, "user_id": 5674289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rXz1L.jpg?s=128&g=1", "display_name": "HermannSW", "link": "https://stackoverflow.com/users/5674289/hermannsw"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1487236434, "post_id": 42261684, "comment_id": 71695195, "body": "Thanks, so Buffer.allocUnsafe() can only be quick if reusing a previously allocated buffer. I did &quot;vi /usr/local/bin/node&quot; (vi cabn handle binary files) and searched for Buffer.allocUnsafe()."}, {"owner": {"reputation": 31, "user_id": 5674289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rXz1L.jpg?s=128&g=1", "display_name": "HermannSW", "link": "https://stackoverflow.com/users/5674289/hermannsw"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1487236848, "post_id": 42261684, "comment_id": 71695494, "body": "It calls <code>allocate(size)</code>, and that calls <code>createBuffer(size)</code> in case no buffer can be reused. That does basically <code>new Uint8Array(size)</code> which by <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array\" rel=\"nofollow noreferrer\">link</a> creates &quot;an array of 8-bit unsigned integers. The contents are initialized to 0.&quot; And that explains linear runtime seen for <code>Buffer.allocUnsafe()</code>"}], "owner": {"reputation": 31, "user_id": 5674289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rXz1L.jpg?s=128&g=1", "display_name": "HermannSW", "link": "https://stackoverflow.com/users/5674289/hermannsw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 525, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487199445, "creation_date": 1487199445, "question_id": 42261684, "link": "https://stackoverflow.com/questions/42261684/why-is-node-js-buffer-allocunsafe-3-orders-of-magnitude-slower-than-c-malloc", "title": "Why is node.js Buffer.allocUnsafe() 3 orders of magnitude slower than C malloc()?", "body": "<p>C (compiled with -O6) takes 16us or 4us for allocation of 2GB of memory:</p>\n\n<pre><code>\ud83d\udcbb ./2d\n115\n16\n\ud83d\udcbb ./2d\n31\n4\n\ud83d\udcbb cat 2d.c\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main() {\n  struct timeval tm0,tm1,tm2,tm3;\n  unsigned short *A,*B;\n\n  gettimeofday(&amp;tm0, NULL); A = malloc(2); gettimeofday(&amp;tm1, NULL);\n  gettimeofday(&amp;tm2, NULL); B = malloc(2000000000); gettimeofday(&amp;tm3, NULL);\n\n  printf(\"%ld\\n\", 1000000 * (tm1.tv_sec - tm0.tv_sec) + (tm1.tv_usec - tm0.tv_usec) );\n  printf(\"%ld\\n\", 1000000 * (tm3.tv_sec - tm2.tv_sec) + (tm3.tv_usec - tm2.tv_usec) );\n}\n\ud83d\udcbb  \n</code></pre>\n\n<p>node.js does need 3ms for unsafe allocation of 2GB of memory:</p>\n\n<pre><code>\ud83d\udcbb node\n&gt; t0=process.hrtime(); var A=new Buffer.allocUnsafe(1); t1=process.hrtime(); \n[ 11473, 848540243 ]\n&gt; t2=process.hrtime(); var B=new Buffer.allocUnsafe(2000000000); t3=process.hrtime(); \n[ 11473, 860724500 ]\n&gt; \n&gt; ((t1[1]-t0[1])/1000000000.0+(t1[0]-t0[0]))+\" \"+\n... ((t3[1]-t2[1])/1000000000.0+(t3[0]-t2[0]));\n'0.00004601 0.003662583'\n&gt; t0=process.hrtime(); var A=new Buffer.allocUnsafe(1); t1=process.hrtime(); \n[ 11477, 352424752 ]\n&gt; t2=process.hrtime(); var B=new Buffer.allocUnsafe(2000000000); t3=process.hrtime(); \n[ 11477, 357416910 ]\n&gt; \n&gt; ((t1[1]-t0[1])/1000000000.0+(t1[0]-t0[0]))+\" \"+\n... ((t3[1]-t2[1])/1000000000.0+(t3[0]-t2[0]));\n'0.000017987 0.002890688'\n&gt; \n</code></pre>\n\n<p>Shouldn't  Buffer.allocUnsafe()  runtime be similar to  malloc()?\n<a href=\"https://nodejs.org/api/buffer.html#buffer_class_method_buffer_allocunsafe_size\" rel=\"nofollow noreferrer\">https://nodejs.org/api/buffer.html#buffer_class_method_buffer_allocunsafe_size</a></p>\n\n<p>Hermann. </p>\n"}, {"tags": ["c", "multithreading", "sockets"], "comments": [{"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 0, "creation_date": 1487199248, "post_id": 42261096, "comment_id": 71680913, "body": "<code>free(recvmessage); recvmessage = NULL;</code> is pointless, remove the second statement."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1487200948, "post_id": 42261096, "comment_id": 71681528, "body": "Well that&#39;s because you only read 8 bytes at a time (<code>sizeof(recvmessage)</code> is 8) and you print a newline after each group of 8 bytes you read."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7571551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e4ac43df30983592f2a0e05eccb664a?s=128&d=identicon&r=PG&f=1", "display_name": "Josey", "link": "https://stackoverflow.com/users/7571551/josey"}, "edited": false, "score": 0, "creation_date": 1487197885, "post_id": 42261206, "comment_id": 71680350, "body": "Okay! Thank you very much! I will try creating such a record marking using \\0"}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 9, "user_id": 7571551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e4ac43df30983592f2a0e05eccb664a?s=128&d=identicon&r=PG&f=1", "display_name": "Josey", "link": "https://stackoverflow.com/users/7571551/josey"}, "edited": false, "score": 0, "creation_date": 1487199267, "post_id": 42261206, "comment_id": 71680924, "body": "@Josey consider accepting this answer if it helped you the most."}], "tags": [], "owner": {"reputation": 33559, "user_id": 55637, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b560fe3e379ac179ad303fac1a6c420b?s=128&d=identicon&r=PG", "display_name": "Jeffrey Hantin", "link": "https://stackoverflow.com/users/55637/jeffrey-hantin"}, "is_accepted": false, "score": 3, "last_activity_date": 1487197306, "creation_date": 1487197306, "answer_id": 42261206, "question_id": 42261096, "link": "https://stackoverflow.com/questions/42261096/unexpected-multithreaded-server-reaction-c/42261206#42261206", "title": "unexpected multithreaded server reaction - C", "body": "<p>This really has nothing to do with multithreading, and everything to do with the nature of <code>SOCK_STREAM</code> sockets.</p>\n\n<p>Stream sockets are, as the name suggests, a stream of bytes; they do not preserve message boundaries such that what is sent with one call to <code>send</code> is received with one call to <code>recv</code>.  A single <code>send</code> may be broken up across multiple <code>recv</code> calls, or multiple <code>send</code> calls may be coalesced into a single <code>recv</code>, or both.  They do guarantee order, in that the bytes will be received in the same order they are sent.</p>\n\n<p>You'll need to implement your own record marking, perhaps by inserting <code>\\0</code> characters to delimit words, or by using length prefixes.</p>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 7571551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e4ac43df30983592f2a0e05eccb664a?s=128&d=identicon&r=PG&f=1", "display_name": "Josey", "link": "https://stackoverflow.com/users/7571551/josey"}, "edited": false, "score": 0, "creation_date": 1487199384, "post_id": 42261533, "comment_id": 71680977, "body": "Thank you too! Really helpful!"}], "tags": [], "owner": {"reputation": 11, "user_id": 6915220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51ec19a0f8dbb91378bf2152843c0ab?s=128&d=identicon&r=PG&f=1", "display_name": "Shepherd B", "link": "https://stackoverflow.com/users/6915220/shepherd-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1487198734, "creation_date": 1487198734, "answer_id": 42261533, "question_id": 42261096, "link": "https://stackoverflow.com/questions/42261096/unexpected-multithreaded-server-reaction-c/42261533#42261533", "title": "unexpected multithreaded server reaction - C", "body": "<p>This is normal behavior. When you use <code>send</code> you don't know how many bytes will be sent. It may happen that all the words , characters are sent.However there are ways to solve this problem. One way is to write a simple header to the string you send , which contains the length of the string you are sending . So you know when the string is ending . For example you can use a thread to look continuously for messages and because the header contains the length of the string you know when to print a \\n.The behavior of the <code>send</code> cannot be altered , because it is the Kernel , that is doing this .</p>\n"}, {"tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 0, "last_activity_date": 1487200996, "creation_date": 1487200996, "answer_id": 42262004, "question_id": 42261096, "link": "https://stackoverflow.com/questions/42261096/unexpected-multithreaded-server-reaction-c/42262004#42262004", "title": "unexpected multithreaded server reaction - C", "body": "<p>In addition to what the other answers say already:</p>\n\n<p>Your code specifically asks to read 8 bytes at a time. <code>recvmessage</code> is a pointer, and pointers are 8 bytes on your system, so <code>sizeof(recvmessage)</code> is 8.</p>\n"}], "owner": {"reputation": 9, "user_id": 7571551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e4ac43df30983592f2a0e05eccb664a?s=128&d=identicon&r=PG&f=1", "display_name": "Josey", "link": "https://stackoverflow.com/users/7571551/josey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1487200996, "creation_date": 1487196815, "question_id": 42261096, "link": "https://stackoverflow.com/questions/42261096/unexpected-multithreaded-server-reaction-c", "title": "unexpected multithreaded server reaction - C", "body": "<p>I'm working on a multithreaded server/client. The problem I have is that the server handling sometimes looks a little bit various. The message, which is send back is always correct, but the message the server prints out is a little bit weird. If it is a short word like \"hello\" everything works. If it is a long word or there are spaces in the string like \"Binominalkoeffizient\" the out-printed serversided message is: </p>\n\n<pre><code>Binomina\nlkoeffiz\nient\nfiz\n</code></pre>\n\n<p>Any idea where my mistake is?</p>\n\n<p>PS: The server reaction is the same when I use telnet!</p>\n\n<p><strong>Server-Main:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;pthread.h&gt;\n\n#include \"server.h\"\n\nint main(int argc, const char * argv[]) {\n\n    int sock;\n    struct sockaddr_in server;\n\n    sock = socket(AF_INET, SOCK_STREAM, 0);\n    socketStatusCheck(sock);\n\n    puts(\"[*] Starting Server ...\");\n    puts(\"[*] Initialize Server ...\");\n    initializeServer(&amp;server, 8888);\n    bindServerToAddress(sock, server);\n\n    puts(\"[*] Waiting for incomming connections ... \");\n    puts(\"\");\n    listen(sock, 3);\n\n    connectionSwitch(sock);\n\n    close(sock);\n\n    return 0;\n\n}\n</code></pre>\n\n<p><strong>Server-File</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;pthread.h&gt;\n\n#include \"server.h\"\n\n\nvoid socketStatusCheck(int sock) {\n    if (sock == -1) {\n        perror(\"Error creating the socket: \");\n        exit(0);\n    }\n}\n\nvoid initializeServer(struct sockaddr_in *server, int port) {\n    server-&gt;sin_family = AF_INET;\n    server-&gt;sin_addr.s_addr = INADDR_ANY;\n    server-&gt;sin_port = htons(port);\n}\n\nvoid bindServerToAddress(int sock, struct sockaddr_in server) {\n    if (bind(sock, (struct sockaddr*) &amp;server, sizeof(server)) &lt; 0) {\n        perror(\"Error binding port: \");\n    }\n}\n\nvoid connectionSwitch(int sock) {\n\n    int nsock, lenbuf;\n    struct sockaddr_in client;\n    pthread_t pid = NULL;\n\n    lenbuf = sizeof(struct sockaddr_in);\n    while ((nsock = accept(sock, (struct sockaddr*) &amp;client, (socklen_t*) &amp;lenbuf))) {\n        puts(\"Client connected!\");\n        if (pthread_create(&amp;pid, NULL, connectionHandler, (void*) &amp;nsock))\n            perror(\"Error creating thread: \");\n    }\n    if (nsock &lt; 0) {\n        perror(\"Error accepting incomming client: \");\n    }\n\n    pthread_exit(pid);\n\n}\n\nvoid *connectionHandler(void *sockptr) {\n\n    int sock = *(int*) sockptr;\n    long isConnected;\n    char *smessage, *recvmessage;\n\n    smessage = \"Hello! I am the server you just connected! \\n\";\n    write(sock, smessage, strlen(smessage));\n\n    recvmessage = malloc(5000 * sizeof(char)); // while ((isConnected = recv(sock, recvmessage, sizeof(recvmessage), 0)) &gt; 0)\n    while ((isConnected = recv(sock, recvmessage, sizeof(recvmessage), 0)) &gt; 0) {\n        //write(sock, recvmessage, sizeof(recvmessage));\n        send(sock, recvmessage, sizeof(recvmessage), 0);\n        puts(recvmessage);\n    }\n\n    if (isConnected == 0) {\n        perror(\"Client disconnected: \");\n        fflush(stdout);\n    }\n\n    free(recvmessage); recvmessage = NULL;\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "multithreading"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 3, "creation_date": 1487196812, "post_id": 42261015, "comment_id": 71679793, "body": "In what way does it break exactly? Does it only break after a timeout?"}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1487198936, "post_id": 42261015, "comment_id": 71680790, "body": "To synchronize the use of some resource, wether its logical or physical resource, there are other synchronization methods."}, {"owner": {"reputation": 51, "user_id": 7571487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded362d0093640ade610930564db6d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Marco.Venturini", "link": "https://stackoverflow.com/users/7571487/marco-venturini"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1487241499, "post_id": 42261015, "comment_id": 71699081, "body": "@David, edited the question, the lock is acquired by multiple processes."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1487241590, "post_id": 42261015, "comment_id": 71699151, "body": "Any chance you could give us enough code to replicate the problem? The particular failure mode you&#39;re claiming seems impossible."}, {"owner": {"reputation": 51, "user_id": 7571487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded362d0093640ade610930564db6d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Marco.Venturini", "link": "https://stackoverflow.com/users/7571487/marco-venturini"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1487241850, "post_id": 42261015, "comment_id": 71699327, "body": "@David Yes, i will try to write an example"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 7571487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded362d0093640ade610930564db6d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Marco.Venturini", "link": "https://stackoverflow.com/users/7571487/marco-venturini"}, "is_accepted": false, "score": 2, "last_activity_date": 1487267204, "creation_date": 1487267204, "answer_id": 42281187, "question_id": 42261015, "link": "https://stackoverflow.com/questions/42261015/how-to-create-a-file-lock-with-timeout-under-linux/42281187#42281187", "title": "How to create a file Lock with timeout under linux", "body": "<p>It appears that the mistake was in another part of the code, the lock is working as expected.</p>\n\n<p>I share the code I'm using in case it can be helpful to somebody else.</p>\n\n<p>Those are the locking functions:</p>\n\n<pre><code>/* ----------------------------------------------------------------------- *\n *  Code derived by the flock.c in the \"util-linux\" ubuntu package \n *  by  Peter Anvin \n * ----------------------------------------------------------------------- */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/file.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;signal.h&gt;\n\n//************************************************************\nstatic sig_atomic_t timeout_expired = 0;\n//************************************************************\n\nstatic void timeout_handler(int sig)\n{\n  (void)sig;\n\n  timeout_expired = 1;\n}\n\n\n//************************************************************\nint acquireLock(char *lockFile, int msTimeout) \n{\n    struct itimerval timeout, old_timer;\n    struct sigaction sa, old_sa;\n    int err;\n    int sTimeout = msTimeout/1000;\n    memset(&amp;timeout, 0, sizeof timeout);\n\n    timeout.it_value.tv_sec = sTimeout;\n    timeout.it_value.tv_usec = ((msTimeout-(sTimeout*1000))*1000);\n\n    memset(&amp;sa, 0, sizeof sa);\n\n    sa.sa_handler = timeout_handler;\n    sa.sa_flags   = SA_RESETHAND;\n    sigaction(SIGALRM, &amp;sa, &amp;old_sa);\n    setitimer(ITIMER_REAL, &amp;timeout, &amp;old_timer);\n\n\n    int lockFd;\n    int cntTimeout = 0;\n\n    if ((lockFd = open(lockFile, O_CREAT | O_RDWR, S_IRWXU | S_IRWXG | S_IRWXO))  &lt; 0)\n        return -1;\n\n    while (flock(lockFd, LOCK_EX))\n    {\n        switch( (err = errno) ) {\n            case EINTR:         /* Signal received */\n                if ( timeout_expired )\n                    setitimer(ITIMER_REAL, &amp;old_timer, NULL); /* Cancel itimer */\n                    sigaction(SIGALRM, &amp;old_sa, NULL); /* Cancel signal handler */\n                    return -1;      /* -w option set and failed to lock */\n                continue;           /* otherwise try again */\n            default:            /* Other errors */\n                return -1;  \n        }\n    }   \n\n    setitimer(ITIMER_REAL, &amp;old_timer, NULL); /* Cancel itimer */\n    sigaction(SIGALRM, &amp;old_sa, NULL); /* Cancel signal handler */\n\n    return lockFd;\n}\n//***************************************************************\nvoid releaseLock (int lockFd) \n{\n    flock(lockFd, LOCK_UN);\n    close(lockFd);\n}\n//************************************************************\n</code></pre>\n\n<p>... and those can be tried by reading and writing a FIFO</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include \"lock.h\"\n\n#define LOCKED 1\n\nvoid main(int argc, char **argv)\n\n{\n    const char *filename;\n    const char *fifo_name;\n    const char *message;\n    int lockfd, fifoHandle;\n    filename = argv[1];\n    fifo_name = argv[2];\n    message = argv[3];\n    char bufin[1024];\n    char bufout[1024];\n    struct stat st;\n    int bufsize = strlen(message)+1;\n    int sleeptime = 0;\n    int j = 0;\n\n    if (stat(fifo_name, &amp;st) != 0)\n        mkfifo(fifo_name, 0666);\n\n    while (1){\n\n    if (LOCKED)\n        lockfd=acquireLock(filename, 15000);\n\n    if (lockfd==-1)\n        printf(\"timeout expired \\n\");\n\n    fifoHandle= open(fifo_name, O_RDWR);\n    strcpy(bufin, message);\n    bufin[bufsize-1] = 0x0;\n    write(fifoHandle, bufin, sizeof(char)*bufsize);\n    sleeptime = rand() % 100000;\n    usleep(sleeptime);\n    read(fifoHandle, &amp;bufout, sizeof(char)*(bufsize+1));\n    printf(\"%s - %d \\n\", bufout, j);\n    j= j+1;\n    if (LOCKED)\n        releaseLock(lockfd);\n\n    sleeptime = rand() % 10000;\n\n    }\n\n    unlink(fifo_name);\n\n\n    return;\n\n}\n</code></pre>\n\n<p>by sending in two terminals</p>\n\n<p>./locktestFIFO ./lck ./fifo messageA\n./locktestFIFO ./lck ./fifo messageB</p>\n\n<p>if LOCKED is not set to 1 the messages will mix up, otherwise the two threads will take and release the resource correctly.</p>\n"}], "owner": {"reputation": 51, "user_id": 7571487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded362d0093640ade610930564db6d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Marco.Venturini", "link": "https://stackoverflow.com/users/7571487/marco-venturini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1003, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487267204, "creation_date": 1487196500, "last_edit_date": 1487241430, "question_id": 42261015, "link": "https://stackoverflow.com/questions/42261015/how-to-create-a-file-lock-with-timeout-under-linux", "title": "How to create a file Lock with timeout under linux", "body": "<p>I'm trying to lock some critical resources that are accessed by multiple applications under linux.</p>\n\n<p>All the applications will call the acquireLock function on the same file when entering the critical section, and the releaseLock when leaving.\nIf the lock is not acquired for more than timeot the caller will go ahead doing something else.</p>\n\n<p>The code below works whit slow processes, but under stress <s>the lock is easily broken</s> the lock is acquired by multiple processes, so I guess I'm stumbling in a race condition somewhere.</p>\n\n<p>Can somebody point me out why it's not working and what would be the correct implementation?</p>\n\n<p>Thanks a lot!</p>\n\n<p>MV </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/file.h&gt;\n\n//************************************************************\n#define CYCLETIME 1000\n//************************************************************\n\n//************************************************************\nint acquireLock(char *lockFile, int msTimeout) \n{\n\n    int lockFd;\n    int cntTimeout = 0;\n\n    if ((lockFd = open(lockFile, O_CREAT | O_RDWR, S_IRWXU | S_IRWXG | S_IRWXO))  &lt; 0)\n        return -1;\n\n    while (flock(lockFd, LOCK_EX | LOCK_NB) &lt; 0){\n        usleep(CYCLETIME);\n        cntTimeout++;\n    if(cntTimeout &gt;= msTimeout){\n        return -1;\n        }\n    }\n\n    return lockFd;\n}\n//*************************************************************\nvoid releaseLock (int lockFd) \n{\n    flock(lockFd, LOCK_UN);\n    close(lockFd);\n}\n//************************************************************\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 4, "creation_date": 1487195372, "post_id": 42260702, "comment_id": 71679086, "body": "two questions -- do arrays start with 1 or 0? And what happens when x = 5 in your for statement?"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487195376, "post_id": 42260702, "comment_id": 71679091, "body": "Obviously, you can&#39;t use <code>strlen</code>. What have you tried? What problem are you having?"}, {"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 8, "creation_date": 1487195428, "post_id": 42260702, "comment_id": 71679115, "body": "@ikegami - he is showing us exactly what he tried and all you have to do is read it to know the problem(s) he is having."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487195858, "post_id": 42260702, "comment_id": 71679330, "body": "Arrays in C are <code>0</code> based. So please change the loop to <code>for (x = 0; x &lt; 1000; ++x)</code>"}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "reply_to_user": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 0, "creation_date": 1487195928, "post_id": 42260702, "comment_id": 71679359, "body": "@Hogan, this code -- one big issue. Everything is just wrong. Let&#39;s start from 1) are strings NULL-terminated or not? 2) <code>strlen()</code> needs an complementary call to <code>strspn()</code> (IIRC) to count whitespaces; 3) who on the Earth told that characters are one byte? 4) rest problems in the current comments / answers; 5) not found (yet) issues."}, {"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 1, "creation_date": 1487196319, "post_id": 42260702, "comment_id": 71679562, "body": "@0andriy - string constants are null terminated so I don&#39;t know what you mean by point one.  If he starts at zero and checks for null then I believe the only problem is counting the spaces."}, {"owner": {"reputation": 402, "user_id": 4084636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1E6K5.jpg?s=128&g=1", "display_name": "Adrian M.", "link": "https://stackoverflow.com/users/4084636/adrian-m"}, "edited": false, "score": 0, "creation_date": 1487196443, "post_id": 42260702, "comment_id": 71679628, "body": "Could you use pointer arithmetic, where you find the first and last memory locations of the initialized indices of the array, convert from hex to decimal, and subtract?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 402, "user_id": 4084636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1E6K5.jpg?s=128&g=1", "display_name": "Adrian M.", "link": "https://stackoverflow.com/users/4084636/adrian-m"}, "edited": false, "score": 2, "creation_date": 1487197333, "post_id": 42260702, "comment_id": 71680082, "body": "@AdrianM. No, because the string literal locations are not necessarily in any logical sequence, so you cannot get the total length by computing from the pointer values. And that would not deal with not-to-be-counted spaces anyway."}], "answers": [{"comments": [{"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 2, "creation_date": 1487196605, "post_id": 42260987, "comment_id": 71679699, "body": "He doesn&#39;t want to count spaces in his answer."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1487197233, "post_id": 42260987, "comment_id": 71680029, "body": "@TonyTannous There, I fixed it. I was too busy fixing everything else to notice the original question."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "edited": false, "score": 0, "creation_date": 1487197863, "post_id": 42260987, "comment_id": 71680339, "body": "@Hogan: explain me why <code>x &lt; sizeof(myArray)&#47;sizeof(myArray[0])</code> is wrong? it works and other answers just do the same..."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1487198164, "post_id": 42260987, "comment_id": 71680469, "body": "@Jean-Fran&#231;oisFabre I&#39;m not a fan of <code>x &lt; sizeof(myArray)&#47;sizeof(myArray[0])</code> myself because it&#39;s of limited utility and new C coders will try to use it on heap memory and get confused. I&#39;d rather techniques that work no matter how the array was allocated. But it isn&#39;t silly. You covered the issue of unnecessarily allocating 1000 places, that&#39;s good. As for the downvoting, I got downvoted and it helped me realize I&#39;d missed something. And then I fixed mine. &#175;_(\u30c4)_/&#175;"}, {"owner": {"reputation": 63634, "user_id": 215752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/face3276756bf64319a7d1df0d194d5c?s=128&d=identicon&r=PG", "display_name": "Hogan", "link": "https://stackoverflow.com/users/215752/hogan"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487263631, "post_id": 42260987, "comment_id": 71716393, "body": "@Jean-Fran&#231;oisFabre -- I&#39;ve no idea where my comment went, I guess it was deleted by a moderator?  Strange.  I may have been harsh in my wording, I wanted to express something similar to Schwern so I will try an be clearer.  I believe Occam&#39;s Razor applies here -- complex pointer arithmetic is less clear and harder to maintain than other options available.   When I said &quot;silly&quot; I meant more obtuse and complex than it needed to be."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487263713, "post_id": 42260987, "comment_id": 71716470, "body": "yeah my comments were deleted too. Don&#39;t worry, I didn&#39;t flag your comment!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3402040"}, "edited": false, "score": 0, "creation_date": 1489549193, "post_id": 42260987, "comment_id": 72715346, "body": "I try use &quot;strlen&quot; and &quot;sizeof&quot; from my char *variable[] and I get from my strlen 3 positions of 5 and size of get 20 from 5.... What I&#39;m wrong ?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1489549379, "post_id": 42260987, "comment_id": 72715382, "body": "@delive Sorry, there&#39;s not enough detail for me to answer. If you post it as a question referencing this answer maybe you&#39;ll get help."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3402040"}, "edited": false, "score": 0, "creation_date": 1489593289, "post_id": 42260987, "comment_id": 72741715, "body": "is a little code For example : \t*ingredients[5] = {&quot;raw&quot;, &quot;salt&quot;, &quot;rennet&quot;, &quot;e&quot;, &quot;milk enzymes&quot;}; I get  3 with strlen(ingredients)"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1489603125, "post_id": 42260987, "comment_id": 72747940, "body": "@delive <code>strlen(ingredients)</code> is nonsense, you&#39;re asking for the string length of an array of strings, and should have given you a bunch of compiler warnings. Again, there isn&#39;t enough detail here. Ask this as its own question."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 4, "last_activity_date": 1487197557, "last_edit_date": 1487197557, "creation_date": 1487196396, "answer_id": 42260987, "question_id": 42260702, "link": "https://stackoverflow.com/questions/42260702/count-number-of-characters-in-array-of-strings-in-c/42260987#42260987", "title": "Count number of characters in array of strings in C", "body": "<p>This code has a bunch of warnings. Unfortunately most C compilers do not issue warnings by default. Using <code>-Wall</code> turns on the most common warnings, though inexplicably not all of them.</p>\n\n<p>That'll at least let you know that you're using <code>printf</code> incorrectly.</p>\n\n<pre><code>test.c:13:12: warning: incompatible integer to pointer conversion passing 'int' to parameter of type\n      'const char *' [-Wint-conversion]\n    printf(count);\n           ^~~~~\n</code></pre>\n\n<p><code>printf</code> takes a format string which tells it the type of the thing its turning into a string.</p>\n\n<pre><code>printf(\"%d\\n\", count);\n</code></pre>\n\n<hr>\n\n<p>The next problem is this for loop.</p>\n\n<pre><code>for (x = 1; x &lt;= 1000; ++x) {\n</code></pre>\n\n<p>That counts from 1 to 1000. But arrays in C start at 0. For a 1000 element array, you want to go from 0 to 999 else you'll miss the first element and then walk off the end of the array.</p>\n\n<pre><code>for (x = 0; x &lt; 1000; ++x) {\n</code></pre>\n\n<hr>\n\n<p>While <code>myArray</code> has been allocated memory on the stack, and its first few elements have been set to constant strings, everything after that will be NULL (if it were allocated with <code>malloc</code> they would be filled with garbage). Since you're iterating over all the elements you're passing null pointers to <code>strlen</code> which is causing a segfault. You have to stop at the first null. Putting a null pointer at the end of an array of pointers is a good way to know when to stop.</p>\n\n<p>Finally, since <code>myArray</code> is full of pointers to constant strings, you should declare it a list of pointers to <code>const char</code>. That will quiet this warning that's telling you you might be trying to modify constant strings.</p>\n\n<pre><code>test.c:5:28: warning: initializing 'char *' with an expression of type 'const char [5]' discards\n      qualifiers [-Wincompatible-pointer-types-discards-qualifiers]\n    char *myArray[1000] = {\"Oh! \", \"Hello \", \"world.\", NULL};\n</code></pre>\n\n<p>Putting it all together...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n    const char *myArray[1000] = {\"Oh! \", \"Hello \", \"world.\"};\n\n    int count = 0, x;\n\n    for (x = 0; myArray[x] != NULL; ++x) {\n        count += strlen(myArray[x]);\n    }\n\n    printf(\"%d\\n\", count);\n}\n</code></pre>\n\n<hr>\n\n<p>Now that we've got the basic loop working, we can replace <code>strlen</code> with something that's going to count the characters while skipping whitespace.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/C_character_classification\" rel=\"nofollow noreferrer\"><code>ctype.h</code></a> has a bunch of functions for finding out what <em>type</em> a <em>c</em>haracter is. We can use <code>isspace</code> to tell if a character is whitespace. But we're going to have to write our own function to loop through the string and examine all the characters.</p>\n\n<p>There's a bunch of ways to loop through a string. We could get the length and iterate.</p>\n\n<pre><code>size_t len = strlen(string);\nfor( int i = 0; i &lt; len; i++ ) {\n    ...\n}\n</code></pre>\n\n<p>But C doesn't store the length of a string. <code>strlen</code> has to do its own loop through the string until it sees a null byte, so really the above is looping through the string twice. We can do better and iterate through looking for the null byte ourselves.</p>\n\n<p>Again, we could use a normal for loop and loop until we see a null byte.</p>\n\n<pre><code>for( int i = 0; string[i] != '\\0'; i++ ) {\n    ...\n}\n</code></pre>\n\n<p>But we don't even need <code>i</code>. Instead, we can increment <code>string</code> directly, changing where the start of the string is, and always look at <code>string[0]</code>.</p>\n\n<pre><code>int count_chars_without_spaces( const char *string ) {\n    int count = 0;\n\n    for( ; string[0] != '\\0'; string++ ) {\n        if( !isspace(string[0]) ) {\n            count++;\n        }\n    }\n\n    return count;\n}\n</code></pre>\n\n<p>That's ok because <code>string</code> is a variable local to that particular function. We can change it without changing the string.</p>\n\n<p>So plug that in instead of <code>strlen</code> and you're good!</p>\n"}, {"comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1487197803, "post_id": 42261066, "comment_id": 71680313, "body": "&quot;<i>[size_t is] the type that can hold the largest object</i>&quot; That would be big enough for the length of one string, but it&#39;s storing the total size of many strings; <code>size_t</code> isn&#39;t necessarily big enough. Still preferable to <code>int</code>."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1487197947, "post_id": 42261066, "comment_id": 71680374, "body": "@Schwern <code>size_t</code> may not be to hold size of many strings. But I don&#39;t see how that&#39;s a justification to use <code>int</code>. At least, <code>size_t</code> avoids integer overflow and probably can hold larger values than <code>int</code>."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1487198753, "post_id": 42261066, "comment_id": 71680718, "body": "Yes, I agree it&#39;s better than <code>int</code> and is probably so enormous that code could never reach it. But <code>size_t</code> can still overflow. <code>size_t size = SIZE_MAX; printf(&quot;%zu\\n&quot;, size+1);</code> is 0. It&#39;s not a practical problem, more about the perils using a type to add together numbers of the same type."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1487198855, "post_id": 42261066, "comment_id": 71680757, "body": "@Schwern That&#39;s not true. <code>size_t</code> can never overflow (just like all other unsigned integers). When <code>size_t</code> wraps around, it&#39;s at least incorrect result; whereas, when an <code>int</code> overflows, it&#39;s <i>undefined behaviour</i> which is certainly worse."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 6, "last_activity_date": 1487196718, "creation_date": 1487196718, "answer_id": 42261066, "question_id": 42260702, "link": "https://stackoverflow.com/questions/42260702/count-number-of-characters-in-array-of-strings-in-c/42261066#42261066", "title": "Count number of characters in array of strings in C", "body": "<p>Yuu can use standard functions from <code>ctype.h</code> to identify the character class. For example, using <code>issspace()</code> you can find if a character is a whitespace and if so, you can ignore it.</p>\n\n<p>You are looping over indexes from 1 to 1000. Indexing in C starts from 0 and goes upto N-1. Besides, your contains only 3 pointers; rest are just NULL (implicitly zero initialized).</p>\n\n<p>Another problem is you are printing <code>count</code> without a format specifier. <code>count</code> being <code>int</code>, you would need to use <code>%d</code> as format specifier. However, you can use <code>size_t</code> as that's the type string functions return and the type that can hold the largest object.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(void)\n{\n\nchar *myArray[] = {\"Oh! \", \"Hello \", \"world.\"};\n\nsize_t count = 0, x, y;\n\nfor (x = 0; x &lt; sizeof(myArray)/sizeof(myArray[0]); x++) {\n    for (y = 0; myArray[x][y]; y++) {\n        count += (isspace((unsigned char)myArray[x][y]) == 0);\n    }\n}\n\nprintf(\"Total chars: %zu\\n\", count);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 5221220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5023802af0614d7267d14be67e9d3323?s=128&d=identicon&r=PG", "display_name": "Cam Pedersen", "link": "https://stackoverflow.com/users/5221220/cam-pedersen"}, "is_accepted": false, "score": 3, "last_activity_date": 1487198512, "last_edit_date": 1487198512, "creation_date": 1487198257, "answer_id": 42261420, "question_id": 42260702, "link": "https://stackoverflow.com/questions/42260702/count-number-of-characters-in-array-of-strings-in-c/42261420#42261420", "title": "Count number of characters in array of strings in C", "body": "<p>There are a few problems with this question, most of which are addressed by Schwern's answer. I'll address some more things though, including the point in the original question about not counting spaces:</p>\n\n<ol>\n<li><p>To reiterate, C arrays are 0-indexed.</p></li>\n<li><p>You probably want an unbounded loop, so that you can add more elements to your array without changing the code (and the number <code>1000</code> convolutes the solution). At this point, the maximum value of <code>x</code> becomes <code>sizeof(myArray) / sizeof(myArray[0])</code>, the number of elements. You would also let the compiler decide what size to make the array by dropping the <code>1000</code> from <code>myArray</code>'s definition: <code>char *myArray[] = {\"Oh! \", \"Hello \", \"world.\"};</code></p></li>\n<li><p>The top level loop counts the string length of the full string, but you only want non-space characters. There are many ways to do this, but the most straightforward way is to just count the non-space characters in a nested loop.</p></li>\n</ol>\n\n<p>Given these things, the following code obtains the desired output:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main() {\n  char *myArray[] = {\"Oh! \", \"Hello \", \"world.\"};\n  int count = 0;\n  int arrayLength = sizeof(myArray) / sizeof(myArray[0]);\n\n  for (int x = 0; x &lt; arrayLength; x++) {\n    int stringLength = strlen(myArray[x]);\n\n    for (int y = 0; y &lt; stringLength; y++) {\n      char currentCharacter = myArray[x][y];\n\n      if (currentCharacter != ' ') {\n        count++;\n      }\n    }\n  }\n\n  printf(\"%d\\n\", count);\n}\n</code></pre>\n\n<p>Compile it:</p>\n\n<pre><code>gcc test.c -o test\n</code></pre>\n\n<p>then run it:</p>\n\n<pre><code>./test\n</code></pre>\n\n<p>and it should output:</p>\n\n<pre><code>14\n</code></pre>\n\n<p>Given the <code>arrayLength</code> calculation, we can now add a word to <code>myArray</code> and see that the output changes with expectation:</p>\n\n<pre><code>char *myArray[] = {\"Oh! \", \"Hello \", \"world.\", \"  test     \"};\n</code></pre>\n\n<p>Because there are only 4 non-space characters (<code>test</code>), this should output:</p>\n\n<pre><code>18\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 402, "user_id": 4084636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1E6K5.jpg?s=128&g=1", "display_name": "Adrian M.", "link": "https://stackoverflow.com/users/4084636/adrian-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1487207619, "last_edit_date": 1487207619, "creation_date": 1487207087, "answer_id": 42263008, "question_id": 42260702, "link": "https://stackoverflow.com/questions/42260702/count-number-of-characters-in-array-of-strings-in-c/42263008#42263008", "title": "Count number of characters in array of strings in C", "body": "<p>A barebones version, for a mildly low-level illustration:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n\nchar * stringArray[200] = {\"O  n e \", \" Two  \", \"Thre e  \", \"Four    \", \" F i ve    !\"};\nint i, j, chars; \ni = j = chars = 0;\n\nwhile(stringArray[i] != '\\0'){\n    char temp = stringArray[i][j];\n    switch(temp){\n        case ' ':\n            j++;\n            break;\n        case '\\0':\n            i++; \n            j=0;\n            break;\n        default:\n            j++;\n            chars++;\n            break;           \n    }    \n}\n\nprintf(\"%d\\n\", chars);\n//o/p == 20\n\nreturn 0;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1656, "user_id": 5227265, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ff2d3bcd5d065abfae154960effe8a2?s=128&d=identicon&r=PG&f=1", "display_name": "hardanger", "link": "https://stackoverflow.com/users/5227265/hardanger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3898, "favorite_count": 0, "accepted_answer_id": 42260987, "answer_count": 4, "score": 1, "last_activity_date": 1487207619, "creation_date": 1487195279, "question_id": 42260702, "link": "https://stackoverflow.com/questions/42260702/count-number-of-characters-in-array-of-strings-in-c", "title": "Count number of characters in array of strings in C", "body": "<p>I am trying to count the number of total characters, excluding spaces, in (what I believe) is a pointer to an array of strings, called myArray.</p>\n\n<p>I am struggling to work out what is wrong. Any help would be much appreciated!</p>\n\n<pre><code>char *myArray[1000] = {\"Oh! \", \"Hello \", \"world.\"};\n\nint count = 0, x;\n\nfor (x = 1; x &lt;= 1000; ++x) {\n    count += strlen(myArray[x]);\n}\n\nprintf(count);\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>14\n</code></pre>\n"}, {"tags": ["c", "string", "pointers", "struct"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1487195459, "post_id": 42260674, "comment_id": 71679129, "body": "Off topic: is this magically resizing <code>struct</code> trick kosher in modern Standard C?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1487195575, "post_id": 42260674, "comment_id": 71679178, "body": "@user4581301 Modern C should use a flexible array member -- <code>char data[];</code>, not <code>char data[1];</code>, otherwise it&#39;s legit (manipulating the sized strings via char* to the flexible array member is a little fishy, though -- not very type safe)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1487195597, "post_id": 42260674, "comment_id": 71679193, "body": "No, @user4581301, nor was it ever kosher under any previous standard, though in fact it usually <i>works</i>.  These days, the standard has direct support for this sort of thing via <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.2.1p18\" rel=\"nofollow noreferrer\">flexible array members</a>."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1487195629, "post_id": 42260674, "comment_id": 71679206, "body": "Is self a pointer to the String struct, or is self the char data pointer? I think you may be confusing the two."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1487195690, "post_id": 42260674, "comment_id": 71679232, "body": "Don&#39;t mess about with muddled pointer manipulation. You get a pointer from <code>malloc</code> and you pass that exact same pointer to <code>free</code>. Don&#39;t risk any other tosh. Although trying to create a variable sized <code>struct</code> is another issue..."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1487195864, "post_id": 42260674, "comment_id": 71679332, "body": "I looked at some old code using a similar ... whatever this is, and it fits what Weather Vane just said. You free what you malloc. This code is risky."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1487196001, "post_id": 42260674, "comment_id": 71679395, "body": "Thanks folks. I remember having to do this back in the &#39;90s, and figured that by now it was either grandfathered or formalized with rules to make it safe or at least predictable."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1487196498, "post_id": 42260674, "comment_id": 71679651, "body": "It would be better to replace <code>3*sizeof(uint32_t)</code> with <code>offsetof(String, data)</code>."}, {"owner": {"reputation": 3425, "user_id": 1235495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CflFh.png?s=128&g=1", "display_name": "qwr", "link": "https://stackoverflow.com/users/1235495/qwr"}, "edited": false, "score": 0, "creation_date": 1487196760, "post_id": 42260674, "comment_id": 71679764, "body": "well you already assert it. If your assert works and you want change it to if try the same with if."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1487197313, "post_id": 42260674, "comment_id": 71680073, "body": "@user4581301 It invokes undefined behaviour at least since C99 (likely since C90 already) if the array is accessed beyond its boundaries."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1487197425, "post_id": 42260674, "comment_id": 71680127, "body": "@PSkocik: An array of fixed length is not the same as a FAM and the compiler is allowed to expect the array not to accessed beyond its boundaries. IOW: accessing a fixed-width array (or a VLA) beyond its boundaries invokes undefined behaviour. For a FAM, the compiler is aware it does not know the boundaries, thus the access is safe here."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1487197689, "post_id": 42260674, "comment_id": 71680255, "body": "... provided that access does not overrun the memory actually allocated to the object."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1487197707, "post_id": 42260674, "comment_id": 71680267, "body": "No this is not safe and you assume things not guaranteed. Not sure what use this has anyway, if you have a function which takes such a <code>struct</code>, you can already pass the <code>struct</code> explicitly, not this hackish construct. If it is not aware, it cannot rely the <code>char *</code> points into such an object. Another aspect comes into mind: maintainability and readability of the code. None is given with that and your code is likely to be messed up - including yourself after some months/years."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1487197802, "post_id": 42260674, "comment_id": 71680312, "body": "@JohnBollinger: Sure. I just wrote what the compiler can assume. Of course the programmer has to know the current boundaries. That&#39;s what I assume is the <code>capacity</code> member for (which should be <code>size_t</code> along with <code>length</code>, btw.)."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1487195763, "post_id": 42260759, "comment_id": 71679274, "body": "In particular, given that <code>self</code> is a <code>char *</code>, the <code>if</code> statement compares <i>a <code>char</code></i> to <code>SIGNATURE</code>.  That appear to not be what he intends."}, {"owner": {"reputation": 183, "user_id": 5942352, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hAE49MRiIWE/AAAAAAAAAAI/AAAAAAAADk0/IkJbHZ9erog/photo.jpg?sz=128", "display_name": "Aslak Berby", "link": "https://stackoverflow.com/users/5942352/aslak-berby"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1487196197, "post_id": 42260759, "comment_id": 71679489, "body": "Yes. And as we don&#39;t know how <code>SIGNATURE</code> is defined it impossible to say why not. He could however do this: <code>if(*((unit32_t*)(self - 3*sizeof(uint32_t))) == SIGNATURE)</code> Should also work."}], "tags": [], "owner": {"reputation": 183, "user_id": 5942352, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hAE49MRiIWE/AAAAAAAAAAI/AAAAAAAADk0/IkJbHZ9erog/photo.jpg?sz=128", "display_name": "Aslak Berby", "link": "https://stackoverflow.com/users/5942352/aslak-berby"}, "is_accepted": false, "score": 1, "last_activity_date": 1487195491, "creation_date": 1487195491, "answer_id": 42260759, "question_id": 42260674, "link": "https://stackoverflow.com/questions/42260674/c-pointer-arithmetic-with-struct/42260759#42260759", "title": "C pointer arithmetic with struct", "body": "<p>Well, your if is not equal to the macro. If you should type it out it shall be something like this:</p>\n\n<pre><code>if(((String*)(self - 3*sizeof(uint32_t)))-&gt;check) == SIGNATURE) ...\n</code></pre>\n\n<p>You need to typecast the pointer you create, then use the attribute you are looking for.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1487197320, "creation_date": 1487197320, "answer_id": 42261210, "question_id": 42260674, "link": "https://stackoverflow.com/questions/42260674/c-pointer-arithmetic-with-struct/42261210#42261210", "title": "C pointer arithmetic with struct", "body": "<p>As @AslakBerby already observed, the expression in your assertion, which I am assuming <em>does</em> work, is not equivalent to the condition expression in your commented-out <code>if</code> statement.  In particular, since <code>self</code> is a <code>char *</code>, the expression <code>*(self - sizeof(uint32_t) * 3)</code> has type <code>char</code>, whereas the expression <code>STRING(self)-&gt;check</code> has type <code>uint32_t</code>.  Supposing that evaluating the latter has defined behavior at all, the former yields only the first byte of the latter, in system-specific storage order.</p>\n\n<p>Overall, though, to the extent that this general scheme works at all, it is brittle and unsafe:</p>\n\n<ul>\n<li>It makes assumptions about the representation of type <code>struct String</code> that implementations are not required to satisfy;</li>\n<li>It routinely overruns array bounds, thus invoking undefined behavior;</li>\n<li>It affords no mechanism for representing in-place substrings;</li>\n<li>It provides enough interoperation with the standard library's string functions to give users an expectation for greater interoperability than it actually provides.</li>\n</ul>\n\n<p>Recommendations:</p>\n\n<ul>\n<li>Rely on <code>offsetof()</code> for computations of relative location within a struct.  It's both safer and clearer.</li>\n<li>Don't even try for direct interoperability with plain <code>char</code> array strings -- handle these objects as what they actually are.  After all, the  point of such an exercise is usually not so much the data structure itself, but rather the improved functions that go with it, such as an O(1) version of <code>strlen()</code>.  There's no need to go out of your way to accommodate these objects' use with the standard library's functions.</li>\n<li>Consider using a pointer to the data instead of embedding the data directly in the object.  This would certainly do a better job of accommodating resizing, and it could support in-place substrings too.</li>\n<li>If you do embed the data directly in the object, then use a flexible array member to do so.</li>\n</ul>\n"}], "owner": {"reputation": 13, "user_id": 6898594, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205846346151289/picture?type=large", "display_name": "Samson Chris Hong", "link": "https://stackoverflow.com/users/6898594/samson-chris-hong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 42261210, "answer_count": 2, "score": -1, "last_activity_date": 1487197320, "creation_date": 1487195157, "last_edit_date": 1487195309, "question_id": 42260674, "link": "https://stackoverflow.com/questions/42260674/c-pointer-arithmetic-with-struct", "title": "C pointer arithmetic with struct", "body": "<p>I am currently writing a new String struct in C as below and practicing pointer arithmetic.</p>\n\n<pre><code>struct String {\n    uint32_t check;\n    uint32_t capacity;\n    uint32_t length;\n    char data[1];\n\n} String;\n</code></pre>\n\n<p>and I was a bit confused at this part of the code</p>\n\n<pre><code>define STRING(s) ((String*)(s - 3*sizeof(uint32_t)))\n\nvoid utstrfree(char* self) {\n\n//    if(*(self - sizeof(uint32_t) * 3) == SIGNATURE) WHY DOES THIS NOT &gt;WORK?\n\n    assert((STRING(self)-&gt;check) == SIGNATURE);     //check if it's a &gt;utstring\n\n    free(self-sizeof(uint32_t) * 3);    //properly free the malloc and alternative could have been free(STRING(self))\n\n}\n</code></pre>\n\n<p>I understand how my STRING macro works and it works properly but I am not quite sure why my if statement doesn't work. Can anyone explain this to me?</p>\n"}, {"tags": ["c", "mouseevent", "mousewheel", "scrollwheel"], "comments": [{"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1487196762, "post_id": 42260239, "comment_id": 71679768, "body": "Do we have anything like <i>libinput</i>? One example is a library for X which does all that. You may look into its sources."}, {"owner": {"reputation": 96, "user_id": 6721147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-XNvuT0flI0E/AAAAAAAAAAI/AAAAAAAADM4/3PIVDRo-PJc/photo.jpg?sz=128", "display_name": "Casey Williams", "link": "https://stackoverflow.com/users/6721147/casey-williams"}, "edited": false, "score": 0, "creation_date": 1487202165, "post_id": 42260239, "comment_id": 71681931, "body": "Have you thought about using SDL2 for mouse input?"}, {"owner": {"reputation": 51, "user_id": 6367862, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-cZrfR6tyOAI/AAAAAAAAAAI/AAAAAAAAABo/gGj7CQco464/photo.jpg?sz=128", "display_name": "Kenneth Goveas", "link": "https://stackoverflow.com/users/6367862/kenneth-goveas"}, "edited": false, "score": 0, "creation_date": 1487274095, "post_id": 42260239, "comment_id": 71722906, "body": "I recently found out that what I was looking for is how to use the input subsystem to get mouse events. My problem is solved. Thank you for your help anyway."}], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 6721147, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-XNvuT0flI0E/AAAAAAAAAAI/AAAAAAAADM4/3PIVDRo-PJc/photo.jpg?sz=128", "display_name": "Casey Williams", "link": "https://stackoverflow.com/users/6721147/casey-williams"}, "is_accepted": false, "score": 0, "last_activity_date": 1487203199, "creation_date": 1487203199, "answer_id": 42262382, "question_id": 42260239, "link": "https://stackoverflow.com/questions/42260239/how-to-get-mouse-scroll-wheel-event-in-c/42262382#42262382", "title": "How to get mouse scroll wheel event in c", "body": "<p>An alternative would be to use SDL2.</p>\n\n<p>I've managed to mash together an example of reading mouse inputs with SDL, so take what you like from it.</p>\n\n<pre><code>#include &lt;SDL2/SDL.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdbool.h&gt;\n\n\nchar* itoa(int i, char b[]){\n    char const digit[] = \"0123456789\";\n    char* p = b;\n    if(i&lt;0){\n        *p++ = '-';\n        i *= -1;\n    }\n    int shifter = i;\n    do{ //Move to where representation ends\n        ++p;\n        shifter = shifter/10;\n    }while(shifter);\n    *p = '\\0';\n    do{ //Move back, inserting digits as u go\n        *--p = digit[i%10];\n        i = i/10;\n    }while(i);\n    return b;\n}\n\nint main()\n{\n    //initialize the window\n    bool quit = false;\n    SDL_Init(SDL_INIT_VIDEO);\n    SDL_Window* window = SDL_CreateWindow(\"Mouse Events\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, 640, 480, 0);\n    SDL_Renderer* renderer = SDL_CreateRenderer(window, -1, 0);\n\n    // the event that will occur when a mouse event happens\n    SDL_Event event;\n    while(!quit)\n    {\n\n        while (SDL_PollEvent(&amp;event)) //returns one is there is a pending event (if an event happens)\n        {\n            switch(event.type)\n            {\n                case SDL_QUIT: //if the window is exited\n                    quit = true;\n                    break;\n\n                case SDL_MOUSEBUTTONDOWN:\n                    switch (event.button.button)\n                    {\n                        case SDL_BUTTON_LEFT:\n                            SDL_ShowSimpleMessageBox(0, \"Click\", \"Left button was pressed!\", window);\n                            break;\n                        case SDL_BUTTON_RIGHT:\n                            SDL_ShowSimpleMessageBox(0, \"Click\", \"Right button was pressed!\", window);\n                            break;\n                    }\n                    break;\n                case SDL_MOUSEWHEEL:\n                    if(event.wheel.y == -1) //negative means the scroll wheel has gone away from the user\n                    {\n                        SDL_ShowSimpleMessageBox(0, \"Wheel Event\", \"You rolled away from yourself!\", window);\n                    } else if (event.wheel.y == 1) //vice-versa\n                    {\n                        SDL_ShowSimpleMessageBox(0, \"Wheel Event\", \"You rolled towards yourself!\", window);\n                    }\n\n            }\n\n        }\n\n        //do some SDL cleanup\n        SDL_Rect dstrect = { 288, 208, 64, 64 };\n\n        SDL_RenderClear(renderer);\n        SDL_RenderPresent(renderer);\n    }\n\n}\n</code></pre>\n\n<p>The <code>event.wheel</code> type can be found here: <a href=\"https://wiki.libsdl.org/SDL_MouseWheelEvent\" rel=\"nofollow noreferrer\">https://wiki.libsdl.org/SDL_MouseWheelEvent</a></p>\n\n<p>Hope this is of some use to you!</p>\n\n<p>If you don't want to use SDL2, it may be worth have a look in the source of the library to see what it's doing. </p>\n"}], "owner": {"reputation": 51, "user_id": 6367862, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-cZrfR6tyOAI/AAAAAAAAAAI/AAAAAAAAABo/gGj7CQco464/photo.jpg?sz=128", "display_name": "Kenneth Goveas", "link": "https://stackoverflow.com/users/6367862/kenneth-goveas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1213, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487203199, "creation_date": 1487193463, "question_id": 42260239, "link": "https://stackoverflow.com/questions/42260239/how-to-get-mouse-scroll-wheel-event-in-c", "title": "How to get mouse scroll wheel event in c", "body": "<p>I am trying to read mouse events from the <strong>/dev/input/mice</strong> file. I am able to parse the 3 byte mouse input for getting the three button states and the increments in X and Y coordinates. However, the mouse input when I scroll up is identical to that when I scroll down. How do I distinguish a scroll up event from a scroll down event? Are there any <strong>ioctls</strong> that can do any required configuration so that I get different inputs from the mouse on these two events?</p>\n\n<p>The following is a simple program to see the input from a mouse when a mouse event occurs. Scroll up and scroll down events cause the same output to be printed by this program (namely, 8 0 0).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;errno.h&gt;\n\nint main(void) {\n\n    int mouse_fd = open(\"/dev/input/mice\", O_RDONLY | O_NONBLOCK);\n    signed char input[4];\n    ssize_t rd_cnt;\n\n    if(mouse_fd &lt; 0)\n    {\n        perror(\"Could not open /dev/input/mice\");\n        exit(EXIT_FAILURE);\n    }\n\n    while(true)\n    {\n        errno = 0;\n        rd_cnt = read(mouse_fd, input, 4);\n        if(rd_cnt &lt;= 0 &amp;&amp; errno != EAGAIN)\n        {\n            perror(\"Mouse read error:\");\n            exit(EXIT_FAILURE);\n        }\n        else\n        {\n            for(int i = 0; i &lt; rd_cnt; i++)\n            {\n                printf(\"%d\", input[i]);\n                if(i == rd_cnt - 1)\n                {\n                    printf(\"\\n\");\n                }\n                else\n                {\n                    printf(\"\\t\");\n                }\n            }\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "memory", "resources", "posix"], "comments": [{"owner": {"reputation": 3946, "user_id": 1703536, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d781a145ffbdecc059bfe29a3ce9fb1e?s=128&d=identicon&r=PG", "display_name": "Jeff Loughlin", "link": "https://stackoverflow.com/users/1703536/jeff-loughlin"}, "edited": false, "score": 4, "creation_date": 1487193567, "post_id": 42260106, "comment_id": 71678169, "body": "Assuming the memory leak occurs in the &quot;Calculates some data&quot; phase, I&#39;m wondering if it would make more sense to just refactor that portion into a separate program and fork out to execute that in a separate memory space.  That way you can at least isolate the offending code and make it easier to replace it in the future, rather than just masking the problem by having the program restart itself when it runs low on memory.  That&#39;s just a thought - without seeing the code, I can&#39;t say whether or not it&#39;s a viable option for you."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1487193617, "post_id": 42260106, "comment_id": 71678206, "body": "as a workaround; why not exit each time a computation is done and re-launch the program each time?"}, {"owner": {"reputation": 687, "user_id": 2209270, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d9518f25a4c39c0d6d509acb4fbdf413?s=128&d=identicon&r=PG", "display_name": "Arandur", "link": "https://stackoverflow.com/users/2209270/arandur"}, "edited": false, "score": 0, "creation_date": 1487195071, "post_id": 42260106, "comment_id": 71678914, "body": "Jean, at the extreme end that is viable. I&#39;m wondering if it&#39;s possible to cut down on the overhead by only restarting when strictly necessary."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1487195151, "post_id": 42260106, "comment_id": 71678950, "body": "Or relaunch after servicing some other fixed, conservatively chosen number of requests."}, {"owner": {"reputation": 687, "user_id": 2209270, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d9518f25a4c39c0d6d509acb4fbdf413?s=128&d=identicon&r=PG", "display_name": "Arandur", "link": "https://stackoverflow.com/users/2209270/arandur"}, "edited": false, "score": 0, "creation_date": 1487195210, "post_id": 42260106, "comment_id": 71678985, "body": "Jeff: Not only is that a brilliant idea, it completely gets rid of the need to measure memory usage! The parent can handle messages and monitor the state of its child, passing information through low-level IPC and restarting the child on SIGCHILD. Make it an answer and I&#39;ll accept it!"}, {"owner": {"reputation": 687, "user_id": 2209270, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d9518f25a4c39c0d6d509acb4fbdf413?s=128&d=identicon&r=PG", "display_name": "Arandur", "link": "https://stackoverflow.com/users/2209270/arandur"}, "edited": false, "score": 0, "creation_date": 1487195282, "post_id": 42260106, "comment_id": 71679037, "body": "John, I did consider that, but unfortunately the rate of memory leak depends on the contents of the messages, too, not just the number of messages."}], "answers": [{"tags": [], "owner": {"reputation": 5408, "user_id": 1793220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Onk4P.jpg?s=128&g=1", "display_name": "Hisham H M", "link": "https://stackoverflow.com/users/1793220/hisham-h-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1487223265, "creation_date": 1487223265, "answer_id": 42265761, "question_id": 42260106, "link": "https://stackoverflow.com/questions/42260106/mitigating-memory-leaks-by-forking/42265761#42265761", "title": "Mitigating memory leaks by forking", "body": "<p>If you make the program itself restart or fork the \"Calculates some data\" section to a separate process, in any case you'll need to check for the memory consumption. Since you're on Linux, an easy way to check this is to get the pid number of the process of interest, and read the contents of the file <code>/proc/$PID/statm</code>. The second number is the size of the resident set. </p>\n\n<p>Reading these proc files are the way tools like top and htop get the data about processes. Reading a ~30-byte in-memory file periodically to check the memory leak doesn't sound too inefficient. </p>\n\n<p>If the leak is regular and you want to make it a bit more sophisticated, you could even keep track of the rate of growth and adjust your rate of checks accordingly.</p>\n"}, {"tags": [], "owner": {"reputation": 3946, "user_id": 1703536, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d781a145ffbdecc059bfe29a3ce9fb1e?s=128&d=identicon&r=PG", "display_name": "Jeff Loughlin", "link": "https://stackoverflow.com/users/1703536/jeff-loughlin"}, "is_accepted": true, "score": 1, "last_activity_date": 1491855410, "last_edit_date": 1491855410, "creation_date": 1487338816, "answer_id": 42299441, "question_id": 42260106, "link": "https://stackoverflow.com/questions/42260106/mitigating-memory-leaks-by-forking/42299441#42299441", "title": "Mitigating memory leaks by forking", "body": "<p>Assuming the memory leak occurs in the \"Calculates some data\" phase, I think it might make more sense to just refactor that portion into a separate program and fork out to execute that in its own process. That way you can at least isolate the offending code and make it easier to replace it in the future, rather than just masking the problem by having the program restart itself when it runs low on memory.</p>\n\n<p>The \"Calculates some data\" part can either be a long-running process that waits for requests from the main program and restarts itself when necessary, or (even simpler) it could be a one-and-done program that just takes its data in <code>*argv</code> and sends its results to <code>stdout</code>.  Then your main loop can just fork out and exec it every time through, and read the results when they come back.  I would go with the simpler option if possible, but that will of course depend on what your needs are.</p>\n"}], "owner": {"reputation": 687, "user_id": 2209270, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d9518f25a4c39c0d6d509acb4fbdf413?s=128&d=identicon&r=PG", "display_name": "Arandur", "link": "https://stackoverflow.com/users/2209270/arandur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 42299441, "answer_count": 2, "score": 3, "last_activity_date": 1491855410, "creation_date": 1487193002, "question_id": 42260106, "link": "https://stackoverflow.com/questions/42260106/mitigating-memory-leaks-by-forking", "title": "Mitigating memory leaks by forking", "body": "<p>This is a really ugly question. </p>\n\n<p>I have a C++ program which does the following in a loop:</p>\n\n<ul>\n<li>Waits for a JMS message </li>\n<li>Calculates some data</li>\n<li>Sends a JMS message in response</li>\n</ul>\n\n<p>My program (let's call it \"Bob\") has a rather severe memory leak. The memory leak is located in a shared library that someone else wrote, which I must use, but the source code to which I do not have access. </p>\n\n<p>This memory leak causes Bob to crash during the \"calculates some data\" phase of the loop. This is a problem, because another program is awaiting Bob's response, and will be very upset if it does not receive one. </p>\n\n<p>Due to various restrictions (yes, this is an X/Y problem, I told you it was ugly), I have determined that my only viable strategy is to modify Bob so that it does the following in its loop:</p>\n\n<ul>\n<li>Waits for a JMS message </li>\n<li>Calculates some data </li>\n<li>Sends a JMS message in response </li>\n<li>Checks to see whether it's in danger of using \"too much\" memory</li>\n<li>If so, forks and execs another copy of itself, and gracefully exits</li>\n</ul>\n\n<p>My question is as follows:</p>\n\n<p>What is the best (reliable but not too inefficient) way to detect whether we're using \"too much\" memory? My current thought is to compare <code>getrlimit(RLIMIT_AS) rlim_cur</code> to <code>getrusage(RUSAGE_SELF) ru_maxrss</code>; is that correct? If not, what's a better way? Bob runs in a Linux VM on various host machines, all with different amounts of memory. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 1, "creation_date": 1487191934, "post_id": 42259786, "comment_id": 71677260, "body": "You can use the string concatenation function, <code>strcat</code>. Something like: <code>fp = fopen(strcat(name, &quot;.html&quot;), &quot;w&quot;);</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1487191978, "post_id": 42259786, "comment_id": 71677276, "body": "There&#39;s no need for braces around the string."}, {"owner": {"reputation": 21, "user_id": 6410901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac6f50bbaf281ce41c8e45701f08bbb?s=128&d=identicon&r=PG&f=1", "display_name": "G&#225;bor Micsk&#243;", "link": "https://stackoverflow.com/users/6410901/g%c3%a1bor-micsk%c3%b3"}, "edited": false, "score": 0, "creation_date": 1487192622, "post_id": 42259786, "comment_id": 71677638, "body": "Thank you Anton, it works."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1487194845, "post_id": 42260401, "comment_id": 71678790, "body": "Although it will open the wrong file if the buffer is too small, which could be a security issue"}], "tags": [], "owner": {"reputation": 89221, "user_id": 10320, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pijgr.jpg?s=128&g=1", "display_name": "dreamlax", "link": "https://stackoverflow.com/users/10320/dreamlax"}, "is_accepted": false, "score": 5, "last_activity_date": 1487194097, "creation_date": 1487194097, "answer_id": 42260401, "question_id": 42259786, "link": "https://stackoverflow.com/questions/42259786/how-to-use-a-variable-in-a-quotation-in-c/42260401#42260401", "title": "How to use a variable in a quotation in C", "body": "<p>As an alternative to <code>strcat</code>, you can use <a href=\"http://pubs.opengroup.org/onlinepubs/7908799/xsh/fprintf.html\"><code>snprintf</code></a>:</p>\n\n<pre><code>char buffer[100];\nchar name[25] = \"JohnShepard\";\n\nint i = snprintf(buffer, sizeof buffer, \"%s.html\", name);\n// \"i\" should now contain the length of string in \"buffer\"\n\nFILE *fp = fopen(buffer, \"w\");\n// ... etc ...\n</code></pre>\n\n<p>This method is safer than <code>strcat</code> because it requires you to provide the size of the output buffer. If there isn't enough room, then you won't end up overrunning the buffer (which is dangerous). Also, it doesn't modify the original string, but whether that is important or not is up to you.</p>\n"}], "owner": {"reputation": 21, "user_id": 6410901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac6f50bbaf281ce41c8e45701f08bbb?s=128&d=identicon&r=PG&f=1", "display_name": "G&#225;bor Micsk&#243;", "link": "https://stackoverflow.com/users/6410901/g%c3%a1bor-micsk%c3%b3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487194097, "creation_date": 1487191875, "question_id": 42259786, "link": "https://stackoverflow.com/questions/42259786/how-to-use-a-variable-in-a-quotation-in-c", "title": "How to use a variable in a quotation in C", "body": "<p>I really have no idea how to Google search on this specific topic, so I hope one of you guys can help me out here.</p>\n\n<p>Basically I've got this code:</p>\n\n<pre><code>fp = fopen(\"ELSO.html\", \"w\");\n</code></pre>\n\n<p>I also got a variable with a name: </p>\n\n<pre><code>char name[25] = {\"JohnShepard\"};\n</code></pre>\n\n<p>What I want is to call fopen so that the name would be JohnShepard.html (i.e the content of the variable). Is such thing even possible?</p>\n"}, {"tags": ["c", "visual-studio", "gtk"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1487191915, "post_id": 42259747, "comment_id": 71677248, "body": "See <a href=\"http://stackoverflow.com/questions/15906580/how-to-configure-gtk-on-visual-studio-2010\" title=\"how to configure gtk on visual studio 2010\">stackoverflow.com/questions/15906580/&hellip;</a>"}, {"owner": {"reputation": 98, "user_id": 7281655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5510a228269edc8504cfbcee3bafd4a1?s=128&d=identicon&r=PG&f=1", "display_name": "a boy wants to code", "link": "https://stackoverflow.com/users/7281655/a-boy-wants-to-code"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1488037383, "post_id": 42259747, "comment_id": 72058630, "body": "It worked @CraigEstey thanks for your help."}], "answers": [{"tags": [], "owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "is_accepted": true, "score": 3, "last_activity_date": 1487246199, "creation_date": 1487246199, "answer_id": 42273278, "question_id": 42259747, "link": "https://stackoverflow.com/questions/42259747/c-gtk-with-microsoft-visual-studio-ide-is-that-possible/42273278#42273278", "title": "C &amp; GTK with microsoft visual studio IDE, is that possible?", "body": "<p>This is a job for your build system. You should try a build system that generates project files for your IDE. For example, CMake, or even better, the meson build system, which is getting some attention on the GNOME and GTK community. Meson is easy to install: it only depends on python 3 and ninja (a faster replacement for <code>make</code>).</p>\n\n<p>First,  create a file named <code>meson.build</code></p>\n\n<pre><code>project('gtk test', 'c')\ngtk_dep = dependency('gtk+-3.0')\nexecutable('myapp', 'myapp.c',\n  dependencies : gtk_dep)\n</code></pre>\n\n<p>Then put your application code in <code>myapp.c</code></p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n\nint\nmain (int argc, char **argv)\n{\n        GtkWidget *window;\n\n        gtk_init (&amp;argc, &amp;argv);\n\n        window = gtk_window_new (GTK_WINDOW_TOPLEVEL);\n        gtk_window_set_title (GTK_WINDOW (window), \"Hello world !\");\n        g_signal_connect (G_OBJECT (window), \"destroy\", gtk_main_quit, NULL);\n\n        gtk_widget_show_all (window);\n        gtk_main ();\n\n        return 0;\n}\n</code></pre>\n\n<p>Finally, run meson in your Visual Studio environment to detect it. For that, follow the instructions at:\n<a href=\"https://github.com/mesonbuild/meson/wiki/Using-with-Visual-Studio\" rel=\"nofollow noreferrer\">https://github.com/mesonbuild/meson/wiki/Using-with-Visual-Studio</a></p>\n\n<p>I never tried to use meson on Windows, but I'm pretty confident this should work. Feedback about the experience is welcome :)</p>\n\n<p>Here are additional links to the meson documentation:</p>\n\n<ul>\n<li><a href=\"http://mesonbuild.com/samples.html\" rel=\"nofollow noreferrer\">http://mesonbuild.com/samples.html</a></li>\n<li><a href=\"https://github.com/mesonbuild/meson/wiki\" rel=\"nofollow noreferrer\">https://github.com/mesonbuild/meson/wiki</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1943, "user_id": 1391824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20b30c131f358c299e7b5c89870c3761?s=128&d=identicon&r=PG", "display_name": "TingPing", "link": "https://stackoverflow.com/users/1391824/tingping"}, "is_accepted": false, "score": 0, "last_activity_date": 1487271398, "creation_date": 1487271398, "answer_id": 42282406, "question_id": 42259747, "link": "https://stackoverflow.com/questions/42259747/c-gtk-with-microsoft-visual-studio-ide-is-that-possible/42282406#42282406", "title": "C &amp; GTK with microsoft visual studio IDE, is that possible?", "body": "<p>Check out the <a href=\"https://github.com/wingtk/gtk-win32\" rel=\"nofollow noreferrer\">wingtk</a> project to build the Gtk stack against msvc. From there you can just make a project file.</p>\n"}], "owner": {"reputation": 98, "user_id": 7281655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5510a228269edc8504cfbcee3bafd4a1?s=128&d=identicon&r=PG&f=1", "display_name": "a boy wants to code", "link": "https://stackoverflow.com/users/7281655/a-boy-wants-to-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1182, "favorite_count": 0, "accepted_answer_id": 42273278, "answer_count": 2, "score": 1, "last_activity_date": 1487271398, "creation_date": 1487191718, "question_id": 42259747, "link": "https://stackoverflow.com/questions/42259747/c-gtk-with-microsoft-visual-studio-ide-is-that-possible", "title": "C &amp; GTK with microsoft visual studio IDE, is that possible?", "body": "<p>I started working in <em>GTK</em> with <em>C</em> and I'm very familiar with Microsoft Visual Studio.\nI use for compiling <em>codeblocks</em> or <em>devC++</em> and even manual <em>gcc</em> command. But I wonder if the is a possibility to integrate <em>GTK</em> to the <em>VS IDE</em> because I know it's possible for <em>C</em>. I tried a lot but unfortunately with no success.</p>\n\n<p>Thanks</p>\n\n<p>PS: I have now VS 2017 RC but i can go back to VS Community 2015.</p>\n"}, {"tags": ["c", "realloc", "dma"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487190987, "post_id": 42259507, "comment_id": 71676744, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1487190998, "post_id": 42259507, "comment_id": 71676754, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1487191185, "post_id": 42259507, "comment_id": 71676886, "body": "You can reduce your <code>choice</code> compares by using <code>toupper()</code> or <code>tolower()</code>,  example: <code>toupper(choice) == &#39;Y&#39;)</code>."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1487191303, "post_id": 42259507, "comment_id": 71676944, "body": "<code>free(src)</code> - you try to free the array <code>string</code> here. Also, <code>*dest=(char*)realloc(NULL,sizeof(*src));</code> - this allocates space for 1 <code>char</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487191519, "post_id": 42259507, "comment_id": 71677043, "body": "You went to all the trouble to find the new length (but forgot the terminator) and then fell on your sword with <code>*dest=(char*)realloc(NULL,sizeof(*src));</code> which will allocate <b>1 byte</b>. Also, pass the pointer variable itself, perhaps with a value of <code>NULL</code> if you have not yet allocated any memory."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 7571229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/NjsQZ.jpg?s=128&g=1", "display_name": "Stefano Feltre", "link": "https://stackoverflow.com/users/7571229/stefano-feltre"}, "edited": false, "score": 0, "creation_date": 1487193262, "post_id": 42259577, "comment_id": 71677992, "body": "I did what you said...But still it gave me the same error"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1487194816, "post_id": 42259577, "comment_id": 71678780, "body": "By assigning the return value of <code>realloc()</code> directly to the pointer to the memory being reallocated, you risk losing a pointer to the data, and gaining a memory leak. If <code>realloc()</code> fails, a null pointer is returned. You should store the return value in a temporary pointer and then check to be certain that the allocation was successful."}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 5, "last_activity_date": 1487196765, "last_edit_date": 1487196765, "creation_date": 1487191147, "answer_id": 42259577, "question_id": 42259507, "link": "https://stackoverflow.com/questions/42259507/segmentation-fault-caused-by-realloc/42259577#42259577", "title": "Segmentation Fault caused by realloc?", "body": "<p>There are at least 5 issues with your code:</p>\n\n<p>1) You should <code>free</code> only what you allocated yourself on the heap. Don't <code>free(src)</code> because what you pass in <code>src</code> points to stack memory (<code>char string[51];</code> is freed automatically).</p>\n\n<p>2) you probably meant to reallocate <code>dest</code>, and 3) you meant to allocate memory the size of <code>length3</code> (+1 null-terminator).</p>\n\n<pre><code>    *dest=(char*)realloc(*dest, length3 + 1);\n</code></pre>\n\n<p>4) <code>strlen(*dest)</code> will crash when <code>*dest</code> is NULL initially.</p>\n\n<pre><code>    int length2=(*dest)?strlen(*dest):0;\n</code></pre>\n\n<p>5) I don't think your for-loop is correct. It won't concatenate the strings, your offset calculation is off. </p>\n"}, {"comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1487194025, "post_id": 42260341, "comment_id": 71678384, "body": "@Stefano Feltre See the demonstrative program in my answer."}, {"owner": {"reputation": 71, "user_id": 7571229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/NjsQZ.jpg?s=128&g=1", "display_name": "Stefano Feltre", "link": "https://stackoverflow.com/users/7571229/stefano-feltre"}, "edited": false, "score": 0, "creation_date": 1487271261, "post_id": 42260341, "comment_id": 71721254, "body": "Mmmh...Wouldn&#39;t be possible to make it without using macro? Moreover, for this exercise i need to keep the function as:  int cat(char **dest, char *src)  I can&#39;t modify this. And i don&#39;t really understand why you need the variable *tmp...can&#39;t we directly use the variable *dest for the realloc? Thx"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 71, "user_id": 7571229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/NjsQZ.jpg?s=128&g=1", "display_name": "Stefano Feltre", "link": "https://stackoverflow.com/users/7571229/stefano-feltre"}, "edited": false, "score": 0, "creation_date": 1487272525, "post_id": 42260341, "comment_id": 71721988, "body": "@StefanoFeltre  The macro introduces name instead of a magic number 50. It is always better to used named constants instead of magic numbers. If your compiler supports variable length arrays then you can substitute it for a constant variable. For example const size_t N = 50; You shall declare the second parameter with the qualifier const. It is contract between the function and the client that uses the function that the parameter will not be changed within the function. The variable tmp is needed because realloc can return NULL. In this case the value of dest will be lost."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 71, "user_id": 7571229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/NjsQZ.jpg?s=128&g=1", "display_name": "Stefano Feltre", "link": "https://stackoverflow.com/users/7571229/stefano-feltre"}, "edited": false, "score": 0, "creation_date": 1487272570, "post_id": 42260341, "comment_id": 71722014, "body": "@StefanoFeltre See also the comment of  David Bowling to the previous post."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1487195088, "last_edit_date": 1487195088, "creation_date": 1487193905, "answer_id": 42260341, "question_id": 42259507, "link": "https://stackoverflow.com/questions/42259507/segmentation-fault-caused-by-realloc/42260341#42260341", "title": "Segmentation Fault caused by realloc?", "body": "<p>The initial value of the pointer <code>output</code> is NULL. However inside the function there is no check that the pointer is equal to NULL. So applying the function <code>strlen</code> to the pointer results in undefined behavior.</p>\n\n<p>Also you need to reserve one more character for the terminating zero.</p>\n\n<p>The memory is not reallocated correctly in the function. Moreover <code>sizeof( *src )</code> is equal to one byte.</p>\n\n<p>This statement</p>\n\n<pre><code>  if(i&lt;=length1)\n    (*dest)[i]=(*dest)[i];\n</code></pre>\n\n<p>does not make great sense. The reallocated memory provided that it was reallocated correctly already contains the original string.</p>\n\n<p>You shall not free the pointer <code>src</code> because it does not point to a dynamically allocated memory.</p>\n\n<p>The function can look the following way as it is shown in the demonstrative program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint cat( char **dest, const char *src )\n{\n    size_t n = strlen( src ) + ( *dest == NULL ? 0 : strlen( *dest ) );\n\n    char *tmp = realloc( *dest, n + 1 );\n    int success = tmp != NULL;\n\n    if ( success )\n    {\n        if ( *dest == NULL ) *tmp = '\\0';\n        *dest = tmp;\n\n        while ( *tmp ) ++tmp;\n\n        while ( ( *tmp++ = *src++ ) );\n    }       \n\n    return success;\n}   \n\n#define N   50\n\nint main(void) \n{\n    char *output = NULL;\n    char choice = 'n';\n\n    do\n    {\n        char string[N];\n\n\n        printf( \"Please enter a string [&lt;%d chars]: \", N );\n        fgets( string, sizeof( string ),stdin );\n\n        string[strcspn( string, \"\\n\" )] = '\\0';\n\n        if ( cat( &amp;output, string ) )\n        {\n            printf( \"\\nThe string now contains:\\n\\\"%s\\\"\\n\\n\", output );\n        }           \n        else\n        {\n            printf( \"error: memory (re-)allocation failed!\\n\\n\" );\n            return 1; /* exit with error */ \n        }\n\n        printf( \"Continue? (y/n) - \" );\n        fgets( string, 3, stdin ); /* read input from keyboard - leave a safety buffer to account for read newline */\n        choice = string[0]; /* use the first character from the previous read as the choice */\n    } while ( choice == 'y' || choice == 'Y' );\n\n    free( output );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output might look like</p>\n\n<pre><code>Please enter a string [&lt;50 chars]: Hi Stefano Feltre\n\nThe string now contains:\n\"Hi Stefano Feltre\"\n\nContinue? (y/n) - y\nPlease enter a string [&lt;50 chars]: \n\nThe string now contains:\n\"Hi Stefano Feltre \"\n\nContinue? (y/n) - y\nPlease enter a string [&lt;50 chars]: Let's learn C\n\nThe string now contains:\n\"Hi Stefano Feltre Let's learn C\"\n\nContinue? (y/n) - n\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7571229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/NjsQZ.jpg?s=128&g=1", "display_name": "Stefano Feltre", "link": "https://stackoverflow.com/users/7571229/stefano-feltre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1411, "favorite_count": 0, "accepted_answer_id": 42259577, "answer_count": 2, "score": 1, "last_activity_date": 1487196765, "creation_date": 1487190932, "last_edit_date": 1487191248, "question_id": 42259507, "link": "https://stackoverflow.com/questions/42259507/segmentation-fault-caused-by-realloc", "title": "Segmentation Fault caused by realloc?", "body": "<p>Hei, I was trying to solve this school exercise..</p>\n\n<p>Write a program that keeps reading in character strings and concatenates them (adds them to a single character string). the concatenation should take place in a function that returns 1 if successful or 0 if it fails. for memory allocation use only realloc!</p>\n\n<p>I don't receive any error while debugging the program, but when I try to run the program, after I insert the string the only thing that appears is \"Segmentation Fault\", what could it be? This is the code:</p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint cat(char **, char *);\n\nint main(void)\n{\n  char string[51];\n  char *output=NULL;\n  char choice;\n  do\n  {\n    printf(\"Please enter a string [&lt;50 chars]: \");\n    fgets(string,50,stdin);\n    if(string[strlen(string)-1]=='\\n') /* if newline was read as well */\n      string[strlen(string)-1]=0;      /* discard it */\n    if(cat(&amp;output,string))\n      printf(\"\\n\\nThe string now contains:\\n%s\\n\",output);\n    else\n    {\n      printf(\"error: memory (re-)allocation failed!\\n\\n\");\n      return 1; /* exit with error */ \n    }\n    printf(\"Continue? (y/n) - \");\n    fgets(string,3,stdin); /* read input from keyboard - leave a safety buffer to account for read newline */\n    choice=string[0]; /* use the first character from the previous read as the choice */\n  } while(choice=='y' || choice=='Y');\n\n  free(output);\n  return 0;\n}\n\nint cat(char **dest, char *src)\n{\n\n  int i;\n  int length1=strlen(src);\n  int length2=strlen(*dest);\n  int length3=length1+length2;\n  *dest=(char*)realloc(NULL,sizeof(*src));\n  printf(\"%p\", *dest);\n  if(*dest==NULL) return 0; /* if allocation failed */\n  for(i=0;i&lt;=length3;i++)\n  {\n      if(i&lt;=length1)\n        (*dest)[i]=(*dest)[i];\n      else\n        (*dest)[i]=(src)[i];\n  }\n  free(src);\n  return 1;\n}\n</code></pre>\n"}, {"tags": ["c", "bit-manipulation"], "comments": [{"owner": {"reputation": 1104, "user_id": 6296060, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZ37JUkP1Pw/AAAAAAAAAAI/AAAAAAAAAYw/Fp6BfZuv7Ho/photo.jpg?sz=128", "display_name": "greedy52", "link": "https://stackoverflow.com/users/6296060/greedy52"}, "edited": false, "score": 0, "creation_date": 1487190890, "post_id": 42259429, "comment_id": 71676685, "body": "The code pasted here didn&#39;t even compile for me. Two errors and two warnings. After fixing those, I got 01234567."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487190960, "post_id": 42259429, "comment_id": 71676726, "body": "Decimal <code>17512807</code> will be hexadecimal <code>010B3967</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487191772, "post_id": 42259429, "comment_id": 71677181, "body": "Your code can invoke undefined behaviour. <code>int</code> is not guaranteed to hold 32 bits. If you need a fixed bit-width, use fixed idth types. Oh, and it is in general better to use unsigned integer when shifting. signed integers can invoke undefined behaviour for certain values (not necessarily true for this example, just keep that in mind!)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487192234, "post_id": 42259429, "comment_id": 71677428, "body": "@Olaf I had not noticed that <code>int value = 17512807u;</code> does not change <code>int value</code> to <code>unsigned</code> type."}], "answers": [{"tags": [], "owner": {"reputation": 1104, "user_id": 6296060, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZ37JUkP1Pw/AAAAAAAAAAI/AAAAAAAAAYw/Fp6BfZuv7Ho/photo.jpg?sz=128", "display_name": "greedy52", "link": "https://stackoverflow.com/users/6296060/greedy52"}, "is_accepted": false, "score": 1, "last_activity_date": 1487191003, "creation_date": 1487191003, "answer_id": 42259536, "question_id": 42259429, "link": "https://stackoverflow.com/questions/42259429/updating-fields-of-bits-incorrectly/42259536#42259536", "title": "Updating fields of bits incorrectly", "body": "<pre><code>int mask = ((1 &lt;&lt; (L - R + 1)) - 1) &lt;&lt; R;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1487195984, "last_edit_date": 1487195984, "creation_date": 1487195668, "answer_id": 42260795, "question_id": 42259429, "link": "https://stackoverflow.com/questions/42259429/updating-fields-of-bits-incorrectly/42260795#42260795", "title": "Updating fields of bits incorrectly", "body": "<p>Your expressions to compute <code>mask</code> are incorrect. You changed the parentheses in the second expression but both are incorrect, and do not even compile:</p>\n\n<pre><code>int mask = ((1 &lt;&lt; (L - R + 1) - 1) &lt;&lt; R;\n...\nmask = ((1 &lt;&lt; (L - R + 1) - 1 &lt;&lt; R);\n</code></pre>\n\n<p>should be written:</p>\n\n<pre><code>mask = ((1UL &lt;&lt; (L - R + 1)) - 1) &lt;&lt; R;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "is_accepted": false, "score": 0, "last_activity_date": 1487268890, "creation_date": 1487268890, "answer_id": 42281678, "question_id": 42259429, "link": "https://stackoverflow.com/questions/42259429/updating-fields-of-bits-incorrectly/42281678#42281678", "title": "Updating fields of bits incorrectly", "body": "<p>Looks like what you are asked to do is use the bit fields. For example, given the type</p>\n\n<pre><code>struct bits{\n    int a:5;\n    unsigned short b:3;\n    unsigned char c:2;\n    bool d:1;\n};\n</code></pre>\n\n<p>The above <code>struct</code> will have 4 members, each of specific bit length.</p>\n\n<p>If you <code>union</code> that struct with an <code>int</code> you get a \"dual-view\" of the bits. As a list of fields <em>or</em> as a single integer:</p>\n\n<pre><code>union U{\n    struct bits fields;\n    int i;\n};\n</code></pre>\n\n<p>Now the code like</p>\n\n<pre><code>U u;\nu.i = 0;\nu.fields.b = true;\n</code></pre>\n\n<p>becomes valid and gives you access to either the whole number or individual bit fields.</p>\n"}], "owner": {"reputation": 1250, "user_id": 5679985, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/146c3943e20149fbc04a050430f9c99f?s=128&d=identicon&r=PG&f=1", "display_name": "Human Cyborg Relations", "link": "https://stackoverflow.com/users/5679985/human-cyborg-relations"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1487268890, "creation_date": 1487190635, "last_edit_date": 1487199908, "question_id": 42259429, "link": "https://stackoverflow.com/questions/42259429/updating-fields-of-bits-incorrectly", "title": "Updating fields of bits incorrectly", "body": "<p>I'm trying to solve a question. It says,</p>\n\n<blockquote>\n  <p>Initialize a new variable to the value 17512807u.</p>\n  \n  <p>Assume we number the bits as usual from 0 as least significant (on the\n  right) to 31 (most significant, on the left). Update bits 18 through\n  21 with the integer value 8 and bits 10 through 14 with value 17\n  (decimal). Print the resulting value as an eight digit hexadecimal\n  number to show all of the digits.</p>\n</blockquote>\n\n<p>Here's the code I came up with:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    int value = 17512807u;\n    int L = 21; // starting left position\n    int R = 18; // starting right position\n\n    int mask = (1 &lt;&lt; (L - R + 1) - 1) &lt;&lt; R; \n    int newField = (8 &lt;&lt; R) &amp; mask; // integer value 8, shifting to right\n    int newValue = value &amp; (~mask); // remove range of bits\n    value = newField | newValue; // update range of bits\n\n    L = 14;\n    R = 10;\n\n    mask = (1 &lt;&lt; (L - R + 1) - 1) &lt;&lt; R;\n    newField = (17 &lt;&lt; R) &amp; mask;\n    newValue = value &amp; (~mask);\n    value = newField | newValue;\n\n    printf(\"%08x\\n\", value);\n}\n</code></pre>\n\n<p>The answer I get is 012b7d67</p>\n\n<p>However, I am told this is the incorrect answer. I do not know what the correct answer is.</p>\n"}, {"tags": ["c", "data-structures"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1487190481, "post_id": 42259350, "comment_id": 71676476, "body": "Because the data item address you&#39;re loading in your queue for every item pushed is that of the <i>same</i> automatic variable in <code>main()</code>, namely <code>intgr</code>. Debug your program and walk your queue chain, you&#39;ll see all the data pointers point to the <b>same</b> address. Related, this makes no sense at all: <code>intgr = (int*)malloc(sizeof(int));</code>. if that doesn&#39;t flag a compiler warning, nothing will. It is (a) wrong, and (b) a memory leak, since you obliterate the allocation address the moment you perform your <code>scanf</code>."}, {"owner": {"reputation": 89, "user_id": 6308167, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eHdVl.jpg?s=128&g=1", "display_name": "TheXales", "link": "https://stackoverflow.com/users/6308167/thexales"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1487190516, "post_id": 42259350, "comment_id": 71676492, "body": "I am getting this warning when I compile: ` warning: assignment makes integer from pointer without a cast [-Wint-conversion] intgr = (int*)malloc(sizeof(int));` but I get the same result even if I remove this line out of my code."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487190541, "post_id": 42259350, "comment_id": 71676506, "body": "<code>int intgr;</code> is not a pointer. It is integer storage, hence the warning."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1487190541, "post_id": 42259350, "comment_id": 71676507, "body": "See second part of my comment."}, {"owner": {"reputation": 89, "user_id": 6308167, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eHdVl.jpg?s=128&g=1", "display_name": "TheXales", "link": "https://stackoverflow.com/users/6308167/thexales"}, "edited": false, "score": 0, "creation_date": 1487191126, "post_id": 42259350, "comment_id": 71676844, "body": "Thanks, I see how its always pointing back to that same address. I thought malloc would re-allocate a different memory address every time the loop runs. It was just a guess... I&#39;m new to this stuff."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 6308167, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eHdVl.jpg?s=128&g=1", "display_name": "TheXales", "link": "https://stackoverflow.com/users/6308167/thexales"}, "edited": false, "score": 0, "creation_date": 1487191969, "post_id": 42259578, "comment_id": 71677272, "body": "what do you mean by &#39;leaked memory&#39;?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 89, "user_id": 6308167, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eHdVl.jpg?s=128&g=1", "display_name": "TheXales", "link": "https://stackoverflow.com/users/6308167/thexales"}, "edited": false, "score": 0, "creation_date": 1487192138, "post_id": 42259578, "comment_id": 71677372, "body": "@TheXales It means you were effectively throwing away the prior result of <code>malloc</code> when you overwrite <code>intgr</code> with the integer you read from <code>scanf</code>. Once that address is gone, there is no way to recover it, therefore no way to <code>free</code> it, therefore it is indeed &quot;leaked&quot;. The code I posted does not do that, and further, actually cleans up the dynamic allocations it produced."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1487192341, "post_id": 42259578, "comment_id": 71677484, "body": "free should be inside the <code>if</code>"}, {"owner": {"reputation": 89, "user_id": 6308167, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eHdVl.jpg?s=128&g=1", "display_name": "TheXales", "link": "https://stackoverflow.com/users/6308167/thexales"}, "edited": false, "score": 0, "creation_date": 1487192366, "post_id": 42259578, "comment_id": 71677495, "body": "@WhozCraig Thanks!"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1487192410, "post_id": 42259578, "comment_id": 71677515, "body": "@stark it doesn&#39;t matter. its a no-op if <code>vptr</code> is NULL. Either location works."}], "tags": [], "owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "is_accepted": true, "score": 0, "last_activity_date": 1487191149, "creation_date": 1487191149, "answer_id": 42259578, "question_id": 42259350, "link": "https://stackoverflow.com/questions/42259350/why-do-i-get-the-same-number-every-time-i-dequeue-my-queue/42259578#42259578", "title": "Why do I get the same number every time I dequeue my queue?", "body": "<p>Your setup for your data pointer is not correct. This is completely wrong:</p>\n\n<pre><code>intgr = (int*)malloc(sizeof(int));\n</code></pre>\n\n<p>Not only should that flag a giant warning due to improper conversion, there is no guarantee it will even work. Further, the value in <code>intgr</code> is later overwritten with:</p>\n\n<pre><code>scanf(\"%d\", &amp;intgr);\n</code></pre>\n\n<p>so you leaked memory anyway, even if by some chance <code>int</code> on your platform is large enough to hold <code>void*</code>.</p>\n\n<p>What you want to do is this:</p>\n\n<pre><code>int main(void)\n{\n    int sum = 0;\n    QUEUE* queue = createQueue();\n\n    printf(\"Enter 5 integers to calc sum and average:\\n\\n\");\n\n    for(int i = 0; i &lt; 5; i++)\n    {\n        int value;\n        printf(\"Enter a number:\");\n        scanf(\"%d\", &amp;value);\n\n        int *dataPtr = malloc(sizeof *dataPtr);\n        *dataPtr = value;\n        enqueue(queue, dataPtr);\n    }\n\n    for(int i = 0; i &lt; 5; i++)\n    {\n        void *vptr = NULL;\n        dequeue(queue, &amp;vptr);\n        if (vptr)\n        {\n            int *dataPtr = vptr;\n            printf(\"%d\", *dataPtr);\n            sum += *dataPtr;\n        }\n        free(vptr);\n    }\n\n    printf(\"Sum: %d\\n\", sum);\n    printf(\"Avg: %d\\n\", sum/5);\n\n    return 0;\n}\n</code></pre>\n\n<p>And obviously, there should be a LOT more error checking, cleanup, etc. but I'm leaving that to you.</p>\n\n<p>You have another issue, which is covered in a multitude of questions already. <code>void*</code> is the typeless generic pointer type in C. <code>void**</code> is <em>not</em> some pointer-to-pointer generic. The latter is a very specific type (a pointer to a pointer-to-void). As such, your cast is improper. It has been addressed in the code above, and you should look at it closely.</p>\n"}], "owner": {"reputation": 89, "user_id": 6308167, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eHdVl.jpg?s=128&g=1", "display_name": "TheXales", "link": "https://stackoverflow.com/users/6308167/thexales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 42259578, "answer_count": 1, "score": 0, "last_activity_date": 1487191149, "creation_date": 1487190362, "question_id": 42259350, "link": "https://stackoverflow.com/questions/42259350/why-do-i-get-the-same-number-every-time-i-dequeue-my-queue", "title": "Why do I get the same number every time I dequeue my queue?", "body": "<p>I'm supposed to enqueue some integers into a queue and then calculate the sum and average... </p>\n\n<p>I believe I am enqueueing my data in correctly, but when I dequeue I seem to get the last integer I enqueued.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include \"queue.h\"\n\nint main(void)\n{\n  int intgr;\n  int avg = 0;\n  int sum = 0;\n  int* dataPtr;\n  QUEUE* queue;\n  queue = createQueue();\n\n  printf(\"Enter 5 integers to calc sum and average:\\n\\n\");\n\n  for(int i = 0; i &lt; 5; i++)\n  {\n    intgr = (int*)malloc(sizeof(int));\n    printf(\"Enter a number:\");\n    scanf(\"%d\", &amp;intgr);\n    dataPtr = &amp;intgr;\n    enqueue(queue, dataPtr);\n  }\n\n  for(int i = 0; i &lt; 5; i++)\n  {\n    dequeue(queue, (void*)&amp;dataPtr);\n    printf(\"%d\", *dataPtr);\n    sum += *dataPtr;\n  }\n\n  printf(\"Sum: %d\\n\", sum);\n  printf(\"Avg: %d\\n\", sum/5);\n\n  return 0;\n}\n</code></pre>\n\n<p>My dequeue operation:</p>\n\n<pre><code>bool dequeue(QUEUE* queue, void** itemPtr)\n{\n  //Local Definitions\n  QUEUE_NODE* deleteLoc;\n\n  //Statements\n  if(!queue-&gt;count)\n    return false;\n\n  *itemPtr = queue-&gt;front-&gt;dataPtr;\n  deleteLoc = queue-&gt;front;\n  if(queue-&gt;count == 1 )\n    // Delete only item in queue\n    queue-&gt;rear = queue-&gt;front = NULL;\n  else\n    queue-&gt;front = queue-&gt;front-&gt;next;\n  (queue-&gt;count)--;\n  free(deleteLoc);\n\n  return true;\n} // dequeue\n</code></pre>\n"}, {"tags": ["c", "arrays", "initialization"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1487190669, "post_id": 42259349, "comment_id": 71676564, "body": "Or maybe because this sequence is used in another part of the program, anyway, IMHO this is bad style."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487190971, "post_id": 42259349, "comment_id": 71676735, "body": "None is a good way. Typically headers should not have object definitions, only declarations. Sometimes a different extension is used for such like <code>.inc</code>, but the best way would be to compile the data object in a seperate unit and use an external declaration wherever you use. Unless you have to use the <code>static</code> storge specifier, the effect will be the same."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1487191163, "post_id": 42259349, "comment_id": 71676866, "body": "It is a perfectly cromulent way of doing it in situations when the initializers are externally-generated (as is apparently the case in your example)."}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1487191265, "post_id": 42259349, "comment_id": 71676924, "body": "These initializers can be generated by a tool like <code>xxd</code> (however, <code>xxd -i</code> produces both initializers and array declaration named after input file)."}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 1, "creation_date": 1487191296, "post_id": 42259349, "comment_id": 71676941, "body": "They shouldn&#39;t have called it xxxx.h, as it&#39;s not a c header file. it&#39;s more a csv file (<a href=\"https://en.wikipedia.org/wiki/Comma-separated_values\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Comma-separated_values</a>)..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1487191591, "post_id": 42259349, "comment_id": 71677082, "body": "@AnT: Why not generate a full source code you can compile seperately? It is not much effort to add the two additional lines. Such half-baked snippets is bad style."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1487193600, "post_id": 42259349, "comment_id": 71678188, "body": "@Olaf : Many reasons. For example, it would require using a language-aware generator instead of a language-agnostic one (which just produces a CSV). That would introduce a completely unnecessary coupling between the tools. Very bad idea."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1487196201, "post_id": 42259349, "comment_id": 71679490, "body": "@AnT: After all, it would require to know how the language seperates fields and formats the text (that would e.g. be different for Python). And there is no problem to generate multiple files - especially from a Python program. CSV is not correct, btw, as that has one row per line and no trailing commas as a table requires. Also OP states the file contains comments already, which are even more language-specific."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487199357, "post_id": 42259349, "comment_id": 71680962, "body": "Hmmm. The generation and use of  &quot;modbusDefs40000.h&quot; is working and to satisfy a coding style paradigm, OP is about to change another program&#39;s output and this code&#39;s source code.  Good luck!  See <a href=\"https://thenexttobestblogever.wordpress.com/2009/11/07/problem-solving-flowchart-2/\" rel=\"nofollow noreferrer\">Don&#39;t mess with it</a>"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 2579721, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6af0ea280dc2ff85538179dd27b501c6?s=128&d=identicon&r=PG", "display_name": "user2579721", "link": "https://stackoverflow.com/users/2579721/user2579721"}, "edited": false, "score": 1, "creation_date": 1487193478, "post_id": 42259540, "comment_id": 71678121, "body": "Thanks everyone for commenting.  dasblinkenlight, I shall make a .c file as you suggest. jh"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 3, "last_activity_date": 1487191007, "creation_date": 1487191007, "answer_id": 42259540, "question_id": 42259349, "link": "https://stackoverflow.com/questions/42259349/c-unusual-array-initialization/42259540#42259540", "title": "C - Unusual array initialization", "body": "<p>This is not an idiom, it's just a trick that gets the job done using the rules of C preprocessor. Essentially, the authors relied on the fact that C preprocessor works as if the content of the file were literally embedded at the point of inclusion. The result is messy, but it accomplishes the task of initializing the array.</p>\n\n<p>Since C headers are expected to have a certain structure, naming the file <code>modbusDefs40000.h</code> is misleading. Using a different extension, e.g. <code>modbusDefs40000.data</code> or something to the same effect, would give readers more clarity as to the purpose of the file.</p>\n\n<p>If you are looking for a way to refactor this for better clarity, consider making a header with a forward declaration of the array, i.e.</p>\n\n<pre><code>// modbusDefs40000.h\nextern uint32_t defsMB40000[REG40000_SIZE];\n</code></pre>\n\n<p>and changing Python script to generate a complete declaration around the data portion of the initializer (i.e. two fixed lines - <code>uint32_t defsMB40000[REG40000_SIZE] = {</code> at the top and <code>};</code> at the bottom. Call generated file <code>modbusDefs40000.c</code>, and use it along with other C files in your project.</p>\n"}], "owner": {"reputation": 69, "user_id": 2579721, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6af0ea280dc2ff85538179dd27b501c6?s=128&d=identicon&r=PG", "display_name": "user2579721", "link": "https://stackoverflow.com/users/2579721/user2579721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1487191007, "creation_date": 1487190360, "question_id": 42259349, "link": "https://stackoverflow.com/questions/42259349/c-unusual-array-initialization", "title": "C - Unusual array initialization", "body": "<p>I am working on some legacy C code that has this unusual array initialization:</p>\n\n<pre><code>uint32_t defsMB40000[REG40000_SIZE] = \n{\n #include \"modbusDefs40000.h\"\n}; \n</code></pre>\n\n<p>The header file is a list of comma separated numbers and comments. I have never seen this construct before but it does seem to work correctly. Would it not be better to have inside the header:</p>\n\n<pre><code>uint32_t defsMB40000[REG40000_SIZE] = \n{\n   0,\n   0xFF,\n   ...\n}; \n</code></pre>\n\n<p>and then</p>\n\n<pre><code> #include \"modbusDefs40000.h\"\n</code></pre>\n\n<p>in the .c file?</p>\n\n<p>I suspect the reason it even exists is that the header file is created by a python script. I would appreciate your comments on this idiom and if you have seen the likes of it.</p>\n\n<p>Thanks,</p>\n\n<p>jh</p>\n"}, {"tags": ["c", "recursion", "time-complexity", "big-o"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5993282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34734a98b8ca9c419003b1df8c237a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Moon", "link": "https://stackoverflow.com/users/5993282/moon"}, "edited": false, "score": 0, "creation_date": 1487190597, "post_id": 42259267, "comment_id": 71676533, "body": "Thank you. Needed that confirmation."}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "reply_to_user": {"reputation": 23, "user_id": 5993282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34734a98b8ca9c419003b1df8c237a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Moon", "link": "https://stackoverflow.com/users/5993282/moon"}, "edited": false, "score": 0, "creation_date": 1487190638, "post_id": 42259267, "comment_id": 71676551, "body": "@Moon my pleasure."}, {"owner": {"reputation": 17608, "user_id": 3650362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fqdi1.jpg?s=128&g=1", "display_name": "trentcl", "link": "https://stackoverflow.com/users/3650362/trentcl"}, "edited": false, "score": 1, "creation_date": 1487195192, "post_id": 42259267, "comment_id": 71678971, "body": "You can show this analytically. Let <code>f(n)</code> be the number of operations in an entire call to <code>findT</code>, and observe that <code>f(n) = k*n^2 + f(n - 1)</code> for some constant <code>k</code>; then it becomes more obvious why <code>f(n)</code> is <code>O(n^3)</code>"}], "tags": [], "owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "is_accepted": true, "score": 2, "last_activity_date": 1487190081, "creation_date": 1487190081, "answer_id": 42259267, "question_id": 42259203, "link": "https://stackoverflow.com/questions/42259203/big-o-of-recursion/42259267#42259267", "title": "Big-O of recursion", "body": "<p>Each time the function is called you do <code>O(n^2)</code> operations. You call your function n times.\nSo total complexity is: <code>O(n^3)</code></p>\n"}], "owner": {"reputation": 23, "user_id": 5993282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34734a98b8ca9c419003b1df8c237a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Moon", "link": "https://stackoverflow.com/users/5993282/moon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 42259267, "answer_count": 1, "score": 2, "last_activity_date": 1487193922, "creation_date": 1487189892, "last_edit_date": 1487193922, "question_id": 42259203, "link": "https://stackoverflow.com/questions/42259203/big-o-of-recursion", "title": "Big-O of recursion", "body": "<p>I have seen many questions of Big-O, but I couldn't quite figure out this one.</p>\n\n<p>I was practicing some interview questions and I bumped into one where I have to find if a Pythagorean Triplet exists in an integer array.\nI figured out there is a easy O(n^3) way to to solve it, but I wanted to find a faster way.</p>\n\n<p>My question is, is the code below O(n^2) or O(n^3)?\nI am confused because even though I only have 2 loops, I need to go through n times of n^2 in my worst case, which would be O(n^3).</p>\n\n<pre><code>public boolean findTriple(int[] array) {\nreturn findT(0, array);\n}\n\npublic boolean findT(int start, array) {\nif(start == array.length-1) {\n    return false;\n}\nint first = array[start];\nfor(int i = 0; i &lt; array.length; i++) {\n    for(int j = i+1; j &lt; array.length; j++) {\n        if(first*first == array[i]*array[i] + array[j]*array[j] ||\n           array[i]*array[i] == array[j]*array[j] + first*first ||\n           array[j]*array[j] == first*first + array[i]*array[i]) {\n            return true;\n        }\n    }\n}\nreturn findT(start+1, array);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 3, "creation_date": 1487189417, "post_id": 42259010, "comment_id": 71675909, "body": "Try changing <code>A[i] = inputLine;</code> to <code>A[i] = strdup(inputLine);</code>. Assigning <code>inputLine</code> to <code>A[i]</code> just duplicates the pointer, not the string. Also, <code>while(!feof(file))</code> is <a href=\"http://stackoverflow.com/q/5431941/1679849\">usually wrong</a>."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1487189702, "post_id": 42259010, "comment_id": 71676065, "body": "Not that it particularly matters here, but a call to <code>free(A[i])</code> would be a good idea after  finishing with these strings."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4926102, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tLacnuKCWbY/AAAAAAAAAAI/AAAAAAAACK0/qr0VNnutZk4/photo.jpg?sz=128", "display_name": "Chris M", "link": "https://stackoverflow.com/users/4926102/chris-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1487258355, "creation_date": 1487258355, "answer_id": 42277934, "question_id": 42259010, "link": "https://stackoverflow.com/questions/42259010/assign-words-in-a-file-to-an-array-in-c/42277934#42277934", "title": "Assign words in a file to an array in C", "body": "<p>What your are copying into each element of your array is actually the address of the string pointed to by inputLine. Each iteration of the loop changes the string pointed to and all your array elements point to the same string.</p>\n\n<p>You need to create a copy of the string by allocating memory space to hold it (malloc) and then copying it letter by letter into the new location (strcpy) ...</p>\n\n<p>[edit] You also probably want to remove the whitespace from the string <em>before</em> copying it ;) [/edit]</p>\n\n<pre><code>#include &lt;stdlib.h&gt;                                                                                                                                                                 \n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nconst char * readInputFile(char inputUrl[]) {\n    char inputLine[200];\n    char inputBuffer[200];\n    char * A[1000];\n    int i = 0;\n\n    FILE *file = fopen(inputUrl, \"r\");\n    if(!file) {\n        printf(\"Error: cannot open input file.\");\n        return NULL;\n    }\n\n    while(!feof(file)) {\n        fscanf(file,\"%[^ \\n\\t\\r]\",inputLine); // Get input text\n        A[i] = malloc(strlen(inputLine)+1);\n        strcpy(A[i], inputLine);\n        fscanf(file,\"%[ \\n\\t\\r]\",inputBuffer); // Remove any white space\n        printf(\"%s\\n\", A[i]);\n        i++;\n    }   \n    printf(\"This output should be the first word, not the last: %s\\n\", A[0]    );\n    fclose(file);\n\n}\n\nint main() {\n    readInputFile(\"input.txt\");\n\n    return(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 1656, "user_id": 5227265, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ff2d3bcd5d065abfae154960effe8a2?s=128&d=identicon&r=PG&f=1", "display_name": "hardanger", "link": "https://stackoverflow.com/users/5227265/hardanger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487258355, "creation_date": 1487189205, "question_id": 42259010, "link": "https://stackoverflow.com/questions/42259010/assign-words-in-a-file-to-an-array-in-c", "title": "Assign words in a file to an array in C", "body": "<p>I want the program to read from an input file input.txt, identify each word, and save each word as a string in an array, named A.</p>\n\n<p>I have tried following the other suggestions to no avail, my current code can print out each word in an array, but seems to save the word to every item in an array, instead of just one.</p>\n\n<p>Any help would be much appreciated.</p>\n\n<p>Sample input file:</p>\n\n<pre><code>Well this is a nice day.\n</code></pre>\n\n<p>Current output:</p>\n\n<pre><code>Well\nthis\nis\na\nnice\nday.\nThis output should be the first word, not the last: day.\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nconst char * readInputFile(char inputUrl[]) {\n    char inputLine[200];\n    char inputBuffer[200];\n    const char * A[1000];\n    int i = 0;\n\n    FILE *file = fopen(inputUrl, \"r\");\n    if(!file) {\n        printf(\"Error: cannot open input file.\");\n        return NULL;\n    }\n\n    while(!feof(file)) {\n        fscanf(file,\"%[^ \\n\\t\\r]\",inputLine); // Get input text\n        A[i] = inputLine;\n        fscanf(file,\"%[ \\n\\t\\r]\",inputBuffer); // Remove any white space\n        printf(\"%s\\n\", A[i]);\n        i++;\n    }\n    printf(\"This output should be the first word, not the last: %s\\n\", A[0]);\n    fclose(file);\n\n}\n\nint main() {\n    readInputFile(\"input.txt\");\n\n\n    return(0);\n}\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1487188918, "post_id": 42258909, "comment_id": 71675606, "body": "A type&#39;s definition must be available prior to its use. You either use a header, or you copy paste the definition of the struct. There is no way to share types between translation units."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 1, "creation_date": 1487188943, "post_id": 42258909, "comment_id": 71675624, "body": "You&#39;ll have to create APIs in <code>f.c</code> that create and modify this structure. You pass a <code>void *</code> back to caller so it can&#39;t access its fields."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 3, "creation_date": 1487189016, "post_id": 42258909, "comment_id": 71675674, "body": "Define <i>accessible by other people</i>."}], "answers": [{"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 4, "last_activity_date": 1487189215, "creation_date": 1487189215, "answer_id": 42259014, "question_id": 42258909, "link": "https://stackoverflow.com/questions/42258909/make-struct-not-in-header-accessible-by-other-files/42259014#42259014", "title": "Make struct not in header accessible by other files", "body": "<p>You can add to your header file a forward declaration to the type and it can be treated as an opaque (incomplete) type.</p>\n\n<pre><code>struct s;\n</code></pre>\n\n<p>Other people can now refer to <code>struct s *</code>, but they cannot use a <code>struct s</code>, since the type is incomplete to them.</p>\n\n<p>If you provide APIs, they can call the APIs to create, modify, and destroy instances of <code>struct s</code>.</p>\n\n<pre><code>enum struct_s_field {\n    S_FIELD_NAME,\n    S_FIELD_VALUE,\n    /* ... */\n};\n\nstruct s * make_s ();\nvoid unmake_s(struct s *);\nvoid update_s(struct s *, enum struct_s_field, ...);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 4985, "user_id": 2005038, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/hGCjO.png?s=128&g=1", "display_name": "marco-a", "link": "https://stackoverflow.com/users/2005038/marco-a"}, "edited": false, "score": 2, "creation_date": 1487190581, "post_id": 42259038, "comment_id": 71676525, "body": "@d3l <code>void*</code> are a hole in the type system. Any object pointer in C converts to and from <code>void*</code> implicitly without the need for casts of any sort. Why make such a hole when you can use pointers to declared but not defined structs as in @jxh&#39;s answer?"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1487211719, "post_id": 42259038, "comment_id": 71684595, "body": "Why return <code>void *</code> when it could return <code>struct s*</code> and avoid the cast?"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1487259545, "post_id": 42259038, "comment_id": 71712911, "body": "@PSkocik Good explanation. I&#39;ll leave this here for future reference."}], "tags": [], "owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "is_accepted": false, "score": 1, "last_activity_date": 1487189810, "last_edit_date": 1487189810, "creation_date": 1487189310, "answer_id": 42259038, "question_id": 42258909, "link": "https://stackoverflow.com/questions/42258909/make-struct-not-in-header-accessible-by-other-files/42259038#42259038", "title": "Make struct not in header accessible by other files", "body": "<p>One way to do this is to create APIs in <code>f.c</code> that initialize, read, and write <code>struct s</code> structures. To hide the contents of this structure from the caller, you return a <code>void *</code> back to the caller that it uses in subsequent calls to <code>f.c</code> APIs.</p>\n\n<p>For example:</p>\n\n<pre><code>void *pS;\n\npS = sInit();\n\nvoid *sInit(void)\n{\n    return malloc(sizeof(struct s));\n}\n</code></pre>\n"}], "owner": {"reputation": 499, "user_id": 2499255, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4e7eadea443aa4826cbd8bff34168551?s=128&d=identicon&r=PG", "display_name": "domoremath", "link": "https://stackoverflow.com/users/2499255/domoremath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1487211129, "creation_date": 1487188795, "last_edit_date": 1487211129, "question_id": 42258909, "link": "https://stackoverflow.com/questions/42258909/make-struct-not-in-header-accessible-by-other-files", "title": "Make struct not in header accessible by other files", "body": "<p>In the C language, suppose I define <code>struct s</code>, inside a file <code>f.c</code>. I don't want this <code>struct</code> to be accessible by other people so I don't put it in <code>f.h</code>. In my project, I have many other files including <code>g.c</code> that wants to access the <code>struct s</code> in <code>f.c</code>.</p>\n\n<p>Is there a way to make this possible? I am thinking that <code>s</code> would have to be a global <code>extern</code> variable declared in <code>g.h</code>. They would link during compilation. I am not sure if this is possible or the correct/best way to go about doing something like this.</p>\n"}, {"tags": ["c", "swap", "void-pointers"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1487188581, "post_id": 42258810, "comment_id": 71675407, "body": "why not try with <code>void swap(struct swapNum *a, struct swapNum *b, int size)</code>?"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1487188632, "post_id": 42258810, "comment_id": 71675437, "body": "why don&#39;t you print out what <code>sizeof(*a)</code> is, so you can see what the compiler thinks the size of a dereferenced void pointer is."}, {"owner": {"reputation": 157, "user_id": 7072729, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9be68688b8d69616340b5958278fd359?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/7072729/vivek"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1487188723, "post_id": 42258810, "comment_id": 71675505, "body": "@yano If I use     void swap(struct swapNum *a,struct swapNum *b, int size) then this function will never be able to swap two integers."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1487188829, "post_id": 42258810, "comment_id": 71675553, "body": "Since you are getting compilation errors, you should post them."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1487188957, "post_id": 42258810, "comment_id": 71675632, "body": "Also, shouldn&#39;t <code>swap(&amp;x,&amp;x,sizeof(b));</code> really be: <code>swap(&amp;x,&amp;x,sizeof(int));</code>?"}, {"owner": {"reputation": 157, "user_id": 7072729, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9be68688b8d69616340b5958278fd359?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/7072729/vivek"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1487189184, "post_id": 42258810, "comment_id": 71675772, "body": "@jxh I posted errors"}, {"owner": {"reputation": 157, "user_id": 7072729, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9be68688b8d69616340b5958278fd359?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/7072729/vivek"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1487189388, "post_id": 42258810, "comment_id": 71675889, "body": "@bruceg sizeof(b) or sizeof(int) both are going to be same."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1487189409, "post_id": 42258810, "comment_id": 71675901, "body": "Your errors don&#39;t really match to code you have posted."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1487189411, "post_id": 42258810, "comment_id": 71675905, "body": "<a href=\"http://ideone.com/apFhMy\" rel=\"nofollow noreferrer\">fix code</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1487189484, "post_id": 42258810, "comment_id": 71675942, "body": "The <code>sizeof</code> is evaluated at compile time. The compiler will have no idea what the size of the target of a <code>void*</code>  pointer will be at run time. Why don&#39;t you just provide 2 functions? Even better, a swap operation for a <code>struct</code> or <code>int</code> is trivial, and can be done inline without any function."}, {"owner": {"reputation": 157, "user_id": 7072729, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9be68688b8d69616340b5958278fd359?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/7072729/vivek"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1487189748, "post_id": 42258810, "comment_id": 71676085, "body": "@jxh Sorry, Edited the error part."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487189896, "post_id": 42258810, "comment_id": 71676176, "body": "... you do not even need <code>memcpy</code> to copy a <code>struct</code>. You just equate it, as you do with <code>int</code> (but cannot do with strings)."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1487190028, "post_id": 42258810, "comment_id": 71676248, "body": "Can you focus on one of the compilation errors, and try to fix it yourself? If you don&#39;t understand what the error means, try posting a new question about the error, what you thought it meant, and how you tried to correct it."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1487190670, "post_id": 42258810, "comment_id": 71676565, "body": "I think the broad problem here is you&#39;re trying to write a one-size-fits-all function. If you want to swap structs, write a function that does that. If you want to swap ints, write a function that does that. A function should do one thing and do it well. If you&#39;ve got a bunch of different data types you want to swap and don&#39;t want a unique swap function for each one, perhaps c++ with its inheritance and polymorphism is a better language choice. <code>void*</code> should generally be avoided. Besides, just because the size of something equals <code>sizeof(int)</code> doesn&#39;t mean it is an <code>int</code>, for example."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1487193698, "post_id": 42258810, "comment_id": 71678229, "body": "@vivek in main the size of b is a char[10] which is most likely 10.  So, unless you are on a system with 10 byte integers, I don&#39;t think that b and int are the same size."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 7072729, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9be68688b8d69616340b5958278fd359?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/7072729/vivek"}, "edited": false, "score": 0, "creation_date": 1487190158, "post_id": 42259049, "comment_id": 71676327, "body": "I changed it, but I am still getting errors.     prog.c:16:9: error: incompatible type for argument 1 of &#39;memcpy&#39;              memcpy(temp,a,sizeof(a));              ^     prog.c:18:9: error: incompatible type for argument 2 of &#39;memcpy&#39;              memcpy(b,temp,sizeof(temp));              ^     prog.c:23:9: warning: dereferencing &#39;void *&#39; pointer              *temp = *a;              ^     prog.c:23:17: warning: dereferencing &#39;void *&#39; pointer          *temp = *a;                  ^     prog.c:23:9: error: invalid use of void expression              *temp = *a;              ^"}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 0, "last_activity_date": 1487189996, "last_edit_date": 1487189996, "creation_date": 1487189359, "answer_id": 42259049, "question_id": 42258810, "link": "https://stackoverflow.com/questions/42258810/swap-two-structure-and-two-int-using-void-pointers-in-function-parameter/42259049#42259049", "title": "Swap two structure and two int using void pointers in function parameter", "body": "<p>There are two problems:</p>\n\n<pre><code>struct swapNum *A= malloc(sizeof(struct swapNum));\nstruct swapNum *B = malloc(sizeof(struc swapNum));\nA-&gt;sal = 23;\nA-&gt;c = a;\n\nB-&gt;sal = 64;\nB-&gt;c = b;\n\nswap(&amp;A,&amp;B,sizeof(A));\n</code></pre>\n\n<p><code>sizeof(A)</code> returns the size of a pointer, you need <code>sizeof(*A)</code> in order to get the correct size of the object.</p>\n\n<p>And you don't want the address of <code>&amp;A</code> and <code>&amp;B</code> because they are already pointers, change to</p>\n\n<pre><code>swap(A,B,sizeof(*A));\n</code></pre>\n\n<p>The second problem is in the <code>swap</code> function:</p>\n\n<pre><code>void swap(void *a,void *b, int size)\n{\n    if(size == sizeof(*a))\n    { ...\n</code></pre>\n\n<p>Compile with warnings:</p>\n\n<pre><code>warning: invalid application of \u2018sizeof\u2019 to a void type\n</code></pre>\n\n<p>As suggested by @BLUEPIXY in comments, use a temporary:</p>\n\n<pre><code>void swap(void *a,void *b, size_t size)\n{\n    void *temp = malloc(size);\n\n    if (temp) {\n        memcpy(temp, a, size);\n        memcpy(a, b, size);\n        memcpy(b, temp, size);\n        free(temp);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 0, "last_activity_date": 1487280633, "last_edit_date": 1487280633, "creation_date": 1487194797, "answer_id": 42260587, "question_id": 42258810, "link": "https://stackoverflow.com/questions/42258810/swap-two-structure-and-two-int-using-void-pointers-in-function-parameter/42260587#42260587", "title": "Swap two structure and two int using void pointers in function parameter", "body": "<p>Here is a way to implement a generic swap function that doesn't require <code>malloc</code> for your temporary:</p>\n\n<pre><code>void swap_by_bytes (void *a, void *b, size_t sz) {\n    char tmp;\n    char *ap = a;\n    char *bp = b;\n    while (sz--) {\n        tmp = *ap;\n        *ap++ = *bp;\n        *bp++ = tmp;\n    }\n}\n</code></pre>\n\n<p>While byte by byte works fine, you might be able to improve things by copying word for word.</p>\n\n<pre><code>void swap_by_words (void *a, void *b, size_t sz) {\n    unsigned tmp;\n    char *ap = a;\n    char *bp = b;\n    while (sz &gt;= sizeof(tmp)) {\n        memcpy(&amp;tmp, ap, sizeof(tmp));\n        memmove(ap, bp, sizeof(tmp));\n        memcpy(bp, &amp;tmp, sizeof(tmp));\n        ap += sizeof(tmp);\n        bp += sizeof(tmp);\n        sz -= sizeof(tmp);\n    }\n    if (sz &gt; 0) swap_by_bytes(ap, bp, sz);\n}\n</code></pre>\n\n<p>If the size is not a multiple of the word size, the remainder is swapped by bytes. Notice the use of <code>memmove</code> just in case <code>a</code> and <code>b</code> overlap.</p>\n\n<p>Finally, you can use VLA if your platform supports it. However, C.2011 has made VLA an optional feature, so you have to test for its availability.</p>\n\n<pre><code>void swap (void *a, void *b, size_t sz) {\n#ifdef __STDC_NO_VLA__\n    swap_by_words(a, b, sz);\n#else\n    char tmp[sz];\n    memcpy(tmp, a, sz);\n    memmove(a, b, sz);\n    memcpy(b, tmp, sz);\n#endif\n}\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 7072729, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9be68688b8d69616340b5958278fd359?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/7072729/vivek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 831, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1487280633, "creation_date": 1487188449, "last_edit_date": 1487189708, "question_id": 42258810, "link": "https://stackoverflow.com/questions/42258810/swap-two-structure-and-two-int-using-void-pointers-in-function-parameter", "title": "Swap two structure and two int using void pointers in function parameter", "body": "<p>In the below code, I am using a single swap function to swap two types of data. But I am getting lots of error.</p>\n\n<p>Can anyone help me that where I am doing wrong?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n</code></pre>\n\n<p>//Structure definition which I am trying to swap.</p>\n\n<pre><code>struct swapNum\n{\n    int sal;\n    char *c;\n};\n</code></pre>\n\n<p>//The swap function which I am using to swap with void function parameters.</p>\n\n<pre><code>void swap(void *a,void *b, int size)\n{\n    if(size == sizeof(*a))\n    {\n        struct swapNum temp;\n        memcpy(temp,a,sizeof(*a));\n        memcpy(a,b,sizeof(*b));\n        memcpy(b,temp,sizeof(*temp));\n    }\n    if(size == sizeof(int))\n    {\n        int *temp;\n        *temp = *a;\n        *a = *b;\n        *b = *a;\n    }\n}\n</code></pre>\n\n<p>The main driver part of program.</p>\n\n<pre><code>int main(void) {\n    char a[10] = \"vivek\";\n    char b[10] = \"mishra\";\n    struct swapNum *A= malloc(sizeof(struct swapNum));\n    struct swapNum *B = malloc(sizeof(struc swapNum));\n    A-&gt;sal = 23;\n    A-&gt;c = a;\n\n    B-&gt;sal = 64;\n    B-&gt;c = b;\n\n    swap(&amp;A,&amp;B,sizeof(A));\n\n    int x=10,y=20;\n    swap(&amp;x,&amp;x,sizeof(b));\n    printf(\"After swapping x : %d y: %d\",x,y);\n\n    return 0;\n}\n</code></pre>\n\n<p>The errors which I am getting.</p>\n\n<pre><code>prog.c: In function 'swap':\nprog.c:16:9: error: incompatible type for argument 1 of 'memcpy'\n         memcpy(temp,a,sizeof(*a));\n         ^\nIn file included from prog.c:2:0:\n/usr/include/string.h:46:14: note: expected 'void * __restrict__' but     argument is of type 'struct swapNum'\n extern void *memcpy (void *__restrict __dest, const void *__restrict __src,\n              ^\nprog.c:18:30: error: invalid type argument of unary '*' (have 'struct     swapNum')\n         memcpy(b,temp,sizeof(*temp));\n                              ^\nprog.c:18:9: error: incompatible type for argument 2 of 'memcpy'\n         memcpy(b,temp,sizeof(*temp));\n         ^\nIn file included from prog.c:2:0:\n/usr/include/string.h:46:14: note: expected 'const void * __restrict__' but     argument is of type 'struct swapNum'\n extern void *memcpy (void *__restrict __dest, const void *__restrict __src,\n              ^\nprog.c:23:9: warning: dereferencing 'void *' pointer\n         *temp = *a;\n         ^\nprog.c:23:17: warning: dereferencing 'void *' pointer\n         *temp = *a;\n                 ^\nprog.c:23:9: error: invalid use of void expression\n         *temp = *a;\n         ^\nprog.c:24:9: warning: dereferencing 'void *' pointer\n         *a = *b;\n         ^\nprog.c:24:14: warning: dereferencing 'void *' pointer\n         *a = *b;\n              ^\nprog.c:2\n4:9: error: invalid use of void expression\n     *a = *b;\n         ^\nprog.c:25:9: warning: dereferencing 'void *' pointer\n     *b = *a;\n     ^\nprog.c:25:14: warning: dereferencing 'void *' pointer\n         *b = *a;\n              ^\nprog.c:25:9: error: invalid use of void expression\n         *b = *a;\n         ^\nprog.c: In function 'main':\nprog.c:33:36: error: 'struc' undeclared (first use in this function)\n  struct swapNum *B = malloc(sizeof(struc swapNum));\n                                    ^\nprog.c:33:36: note: each undeclared identifier is reported only once for     each function it appears in\nprog.c:33:42: error: expected ')' before 'swapNum'\n  struct swapNum *B = malloc(sizeof(struc swapNum));\n                                          ^\n</code></pre>\n"}, {"tags": ["c", "linux", "sysv-ipc"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1487187917, "post_id": 42258485, "comment_id": 71675029, "body": "I don&#39;t actually <i>know</i> this, and the POSIX spec doesn&#39;t appear to say either way, but the way I would <i>expect</i> this to work is that <code>shmctl(..., IPC_RMID, ...)</code> on a shared memory segment has <i>no effect whatsoever</i> on any processes that have it attached.  The segment should remain allocated and accessible to those processes, until they all exit or detach it.  If I&#39;m right, the answer to your question is &quot;It doesn&#39;t matter, you can do the operations in either order and the overall effect will be the same.&quot;"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1487188052, "post_id": 42258485, "comment_id": 71675113, "body": "(Note that <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/shm_unlink.html\" rel=\"nofollow noreferrer\">shm_unlink</a> is explicitly specified to behave the way I said I would expect <code>shmctl(..., IPC_RMID, ...)</code> to behave -- which demonstrates both that that&#39;s the normal thing for Unix system interfaces, and that it might <i>not</i> be how SysV IPC, which has always been a bit weird, behaves.)"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1487188233, "post_id": 42258485, "comment_id": 71675212, "body": "arguable duplicate: <a href=\"https://stackoverflow.com/questions/13939349/cleanly-destroy-a-system-v-shared-memory-segment?rq=1\" title=\"cleanly destroy a system v shared memory segment\">stackoverflow.com/questions/13939349/&hellip;</a> (but the answers cite the Linux manpages rather than POSIX, so I don&#39;t think we have an answer for portable code yet.)"}], "answers": [{"tags": [], "owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "is_accepted": false, "score": 1, "last_activity_date": 1487189493, "last_edit_date": 1487189493, "creation_date": 1487188441, "answer_id": 42258807, "question_id": 42258485, "link": "https://stackoverflow.com/questions/42258485/detaching-from-shared-memory-before-removing-it/42258807#42258807", "title": "Detaching from shared memory before removing it", "body": "<p>The behavior of <code>shmctl(,... IPC_RMID, ...)</code> is not explicitly defined by <a href=\"http://pubs.opengroup.org/onlinepubs/7908799/xsh/shmctl.html\" rel=\"nofollow noreferrer\">SingleUnix</a>:</p>\n\n<blockquote>\n  <p>Remove the shared memory identifier specified by <code>shmid</code> from the system and destroy the shared memory segment and <code>shmid_ds</code> data structure associated with it.</p>\n</blockquote>\n\n<p>One could argue, that <code>IPC_RMID</code> should invalidate all references to a shared memory segment immediately. In practice, the removal is delayed until the last  process detaches by most implementations, which is more in line with the typical semantics one would expect e.g. from a FIFO. The name is removed, but the real kernel object only goes away once all references are released.</p>\n\n<p>On Linux, destruction is lazy, the segment will only be destroyed once the <a href=\"https://linux.die.net/man/2/shmctl\" rel=\"nofollow noreferrer\">last process detaches</a>:</p>\n\n<blockquote>\n  <p>The segment will only actually be destroyed after the last process detaches it (i.e., when the shm_nattch member of the associated structure shmid_ds is zero).</p>\n</blockquote>\n\n<p>The same behavior is present on <a href=\"https://www.freebsd.org/cgi/man.cgi?query=shmctl&amp;sektion=2&amp;manpath=FreeBSD%207.2-RELEASE\" rel=\"nofollow noreferrer\">FreeBSD</a>:</p>\n\n<blockquote>\n  <p>The removal will not take effect until all processes having attached the segment have exited.</p>\n</blockquote>\n\n<p>Solaris has it <a href=\"http://docs.oracle.com/cd/E26505_01/html/816-5167/shmctl-2.html\" rel=\"nofollow noreferrer\">similarly</a>, but explained backwards:</p>\n\n<blockquote>\n  <p>If the segment is not attached to any process when <code>IPC_RMID</code> is invoked, it will be destroyed immediately.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1487189261, "post_id": 42258917, "comment_id": 71675820, "body": "The behavior of <code>IPC_RMID</code> is directly analogous to the behavior of <code>unlink(2)</code>. If you do: <code>fd = open(file,...); unlink(file);</code>, <code>fd</code> will be accessible to the process, but <code>file</code> will be removed. The inode will remain until the process closes <code>fd</code>. If another process opens <code>file</code>, it will get a <i>different</i> inode. (i.e.) shm segments are intended to mimic files in this regard. That is, both inodes and shmseg&#39;s have refcounts, and when they are created, the refcount is 1"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1487189564, "post_id": 42258917, "comment_id": 71675993, "body": "@CraigEstey: That&#39;s a good analogy \u2014 it&#39;s also why I&#39;m moderately confident that other systems will behave similarly.  I haven&#39;t gone around and checked a bunch of systems, and I&#39;m not sure that other systems will necessarily change the key to 0 as it did on macOS, so I&#39;m being cautious in what I&#39;m claiming."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1487191015, "post_id": 42258917, "comment_id": 71676764, "body": "I&#39;m pretty sure the macOS behavior is semi-universal. When you do <code>unlink</code>, the directory entry is removed, the inode refcount is decremented, but the open descriptor(s) keep the inode refcount <code>&gt;0</code>. With <code>close(fd)</code>, the inode refcount is decremented. Here, the inode is a &quot;place holder&quot;. The only way to do equiv. behavior for a shmseg (because it only has an &quot;inode&quot; and no dir entry) is to change the key to <code>IPC_PRIVATE</code> (i.e. 0) to get the &quot;place holder&quot; behavior. This allows 2nd process to create a fresh segment with same key immediately, but 1st process(es) continue to use the old copy."}, {"owner": {"reputation": 3981, "user_id": 1021959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PaP06.png?s=128&g=1", "display_name": "Bernard", "link": "https://stackoverflow.com/users/1021959/bernard"}, "edited": false, "score": 0, "creation_date": 1537849413, "post_id": 42258917, "comment_id": 91921764, "body": "You claim that <code>IPC_PRIVATE</code> segments are always automatically deleted.  The manpage for <a href=\"http://man7.org/linux/man-pages/man2/shmget.2.html\" rel=\"nofollow noreferrer\"><code>shmget()</code></a> does not seem to mention this.  Do you have a reference to substantiate your claim?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 3981, "user_id": 1021959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PaP06.png?s=128&g=1", "display_name": "Bernard", "link": "https://stackoverflow.com/users/1021959/bernard"}, "edited": false, "score": 0, "creation_date": 1537850690, "post_id": 42258917, "comment_id": 91922137, "body": "@Bernard \u2014 when the last process with a reference to a specific IPC_PRIVATE shared memory segment exits, the system will clean it up as there\u2019s no way for another process to get access to it. The regular, non-private segments can be attached to again. The system won\u2019t waste resources on what cannot be used."}, {"owner": {"reputation": 3981, "user_id": 1021959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PaP06.png?s=128&g=1", "display_name": "Bernard", "link": "https://stackoverflow.com/users/1021959/bernard"}, "edited": false, "score": 0, "creation_date": 1537852545, "post_id": 42258917, "comment_id": 91922646, "body": "@JonathanLeffler It makes sense not to waste resources storing something that is no longer referenceable.  However, it doesn&#39;t really guarantee that it&#39;s what happens in practice.  Also various examples floating on the Internet do explicitly delete the shared memory created with <code>IPC_PRIVATE</code>, e.g. <a href=\"https://stackoverflow.com/a/36244366/1021959\">this one</a> which is the first example I can find now.  Perhaps I can only get an answer for the particular OS I&#39;m using by looking into the kernel."}, {"owner": {"reputation": 3944, "user_id": 2732969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01822efaf66e4b81d6f947cba7e0613a?s=128&d=identicon&r=PG", "display_name": "Anon", "link": "https://stackoverflow.com/users/2732969/anon"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1560153098, "post_id": 42258917, "comment_id": 99629122, "body": "@CraigEstey some OSes (such as Linux but not macOS) allow you to attach to a removed segment so long as there is a process attached keeping it alive (see <a href=\"https://stackoverflow.com/a/42479369/2732969\">stackoverflow.com/a/42479369/2732969</a> ) so there are OS specific corner cases where the semantics don&#39;t match those that you described for a file..."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1487188844, "last_edit_date": 1495541819, "creation_date": 1487188844, "answer_id": 42258917, "question_id": 42258485, "link": "https://stackoverflow.com/questions/42258485/detaching-from-shared-memory-before-removing-it/42258917#42258917", "title": "Detaching from shared memory before removing it", "body": "<p>The manual entry for <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/shmctl.html\" rel=\"nofollow noreferrer\"><code>shmctl()</code></a> doesn't say anything about 'at most one process using it' or 'no processes attached to it'.  However, the system can't completely disrupt already running processes that are attached to the shared memory segment.</p>\n\n<p>You only need the <code>shmid</code> (shared memory segment ID) returned by <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/shmget.html\" rel=\"nofollow noreferrer\"><code>shmget()</code></a>; you don't need the shared memory to be attached (so you could already have run <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/shmdt.html\" rel=\"nofollow noreferrer\"><code>shmdt()</code></a>).</p>\n\n<p>Testing on a Mac (macOS Sierra 10.12.3, GCC 6.3.0) with code derived from a previous question (<a href=\"https://stackoverflow.com/questions/29691159\">Making a shared data structure in C</a>), I added an option <code>-t time</code> to make the process sleep for a specifiable period.  Then I created a shared memory segment and left the process holding it open.  I used <code>ipcs -m</code> to see that the segment existed. Then I deleted the segment; it was successful.  Rechecking with <code>ipcs -m</code>, the segment had changed from shared to <code>IPC_PRIVATE</code>.  When the sleeping process completed, the shared memory segment was automatically deleted (as private segments always are).</p>\n\n<pre><code>$  shm-master -f shm-master -s 1024 -x -t 120 &amp;\n[1] 14392\n$ ID: 0, File: shm-master\nKey: 0x00041BF7\nShmID: 1441795\nShared memory allocated at 0x10F2B4000\nSleeping for 120 seconds\n\n$ ipcs -m\nIPC status from &lt;running system&gt; as of Wed Feb 15 11:56:37 PST 2017\nT     ID     KEY        MODE       OWNER    GROUP\nShared Memory:\nm  65536 0x00fedc64 --rw-rw-rw-     root    wheel\nm  65537 0x0052e2c1 --rw------- postgres   daemon\nm  65538 0x52042973 --rw-------     root    wheel\nm 1441795 0x00041bf7 --rw------- jleffler    staff\n\n$ shm-master -f shm-master -s 1024 -d\nID: 0, File: shm-master\nKey: 0x00041BF7\nShmID: 1441795\nShared memory removed\n$ ipcs -m\nIPC status from &lt;running system&gt; as of Wed Feb 15 11:56:47 PST 2017\nT     ID     KEY        MODE       OWNER    GROUP\nShared Memory:\nm  65536 0x00fedc64 --rw-rw-rw-     root    wheel\nm  65537 0x0052e2c1 --rw------- postgres   daemon\nm  65538 0x52042973 --rw-------     root    wheel\nm 1441795 0x00000000 --rw------- jleffler    staff\n\n$ sleep 120; ipcs -m\nDetached from shared memory\n[1]+  Done                    shm-master -f shm-master -s 1024 -x -t 120\nIPC status from &lt;running system&gt; as of Wed Feb 15 11:58:57 PST 2017\nT     ID     KEY        MODE       OWNER    GROUP\nShared Memory:\nm  65536 0x00fedc64 --rw-rw-rw-     root    wheel\nm  65537 0x0052e2c1 --rw------- postgres   daemon\nm  65538 0x52042973 --rw-------     root    wheel\n\n$\n</code></pre>\n\n<p>Whether this is what happens on other systems, I'm not sure, but it looks like plausible behaviour.  Something similar is likely to occur.</p>\n\n<p>Incidentally, running one process to create the segment and a second to just attach to it, both running in sleep mode, didn't really change the observed results.  The shared memory segment key changed to 0, the processes were unaffected, and the segment was deleted after both had completed.</p>\n"}], "owner": {"reputation": 49, "user_id": 7570987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee46aa779970f77f3d1077c88974572a?s=128&d=identicon&r=PG&f=1", "display_name": "Raz Moshe", "link": "https://stackoverflow.com/users/7570987/raz-moshe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2143, "favorite_count": 0, "accepted_answer_id": 42258917, "answer_count": 2, "score": 3, "last_activity_date": 1487189493, "creation_date": 1487187223, "last_edit_date": 1487187942, "question_id": 42258485, "link": "https://stackoverflow.com/questions/42258485/detaching-from-shared-memory-before-removing-it", "title": "Detaching from shared memory before removing it", "body": "<p>When I have several processes going on using a shared memory, and I detach all of them but one.</p>\n\n<ol>\n<li>Does it make sense to detach the last process before removing the shared memory with <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/shmctl.html\" rel=\"nofollow noreferrer\"><code>shmctl()</code></a> (with that process)?</li>\n<li>If it doesn't make sense, is it <strong>possible</strong> to remove the shared memory after detaching from it?</li>\n</ol>\n"}, {"tags": ["c", "ubuntu", "cross-compiling", "openwrt"], "comments": [{"owner": {"reputation": 739, "user_id": 7453308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fab68a8d04cc8d75b37d3ae6e31dc13?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7453308/alex"}, "edited": false, "score": 0, "creation_date": 1487187992, "post_id": 42258235, "comment_id": 71675069, "body": "Maybe the other compiler doesn&#39;t have &quot;openssl/conf.h&quot; in his search directory."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1487188523, "post_id": 42258235, "comment_id": 71675367, "body": "You have to &quot;install&quot; OpenSSL into your cross-compilation toolchain. For hints, see <a href=\"http://stackoverflow.com/questions/11841919/cross-compile-openssh-for-arm\" title=\"cross compile openssh for arm\">stackoverflow.com/questions/11841919/&hellip;</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1487190653, "post_id": 42258235, "comment_id": 71676557, "body": "Why not use the build toolchain OpenWRT provides? That will download/compile/build all required tools, libs, etc your target needs. And read the build instructions for your device on their website."}, {"owner": {"reputation": 37, "user_id": 7476469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d419211216b9ada6365e6818a31f48f3?s=128&d=identicon&r=PG&f=1", "display_name": "Amed", "link": "https://stackoverflow.com/users/7476469/amed"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487191432, "post_id": 42258235, "comment_id": 71677000, "body": "@Olaf can you explain with details please ?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487192111, "post_id": 42258235, "comment_id": 71677357, "body": "What was unclear? Surprisngly OpenWRT has a website and a Wiki with documentation. It might not be easy, but I can tell first-hand it works."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1487196317, "post_id": 42258235, "comment_id": 71679561, "body": "Another hint: <a href=\"https://forum.openwrt.org/viewtopic.php?pid=148259#p148259\" rel=\"nofollow noreferrer\">forum.openwrt.org/viewtopic.php?pid=148259#p148259</a>"}], "owner": {"reputation": 37, "user_id": 7476469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d419211216b9ada6365e6818a31f48f3?s=128&d=identicon&r=PG&f=1", "display_name": "Amed", "link": "https://stackoverflow.com/users/7476469/amed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507382359, "creation_date": 1487186298, "last_edit_date": 1507382359, "question_id": 42258235, "link": "https://stackoverflow.com/questions/42258235/fatal-error-including-header-for-cross-compilation", "title": "fatal error including header for cross-compilation", "body": "<p>I'm using ubuntu and I'm trying to cross-compile a C program for OpenWrt distribution.\nI tried to compile the code on ubuntu using <code>gcc</code> and it's working correctly.\nBut when I tried to compile it using <code>mips-openwrt-linux-gcc</code> I get errors about headers (<code>fatal error: openssl/conf.h: No such file or directory</code>).</p>\n\n<p>Main C file is main.c , I used to compile it using <code>gcc main.c -lssl -lcrypto -o exec</code> on ubuntu , now for cross-compilation I'm using <code>mips-openwrt-linux-gcc main.c -lssl -lcrypto -o exec</code> and this causes the problem I just mentioned.</p>\n\n<p>Should I include headers in the toolchain directory? If yes how to do it for openwrt target?</p>\n"}, {"tags": ["c", "makefile", "static"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1487183846, "post_id": 42257463, "comment_id": 71672732, "body": "You need to add -L option to set the directory where your library is to be found. The linker won&#39;t look for libraries specified with -l in the current directory. If all your build happens in one directory, <code>-L.</code> should work fine."}], "answers": [{"comments": [{"owner": {"reputation": 262, "user_id": 5916457, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eeae0a149f32d093e9cd77fa6cd4a340?s=128&d=identicon&r=PG&f=1", "display_name": "FreeStyle4", "link": "https://stackoverflow.com/users/5916457/freestyle4"}, "edited": false, "score": 0, "creation_date": 1487184752, "post_id": 42257698, "comment_id": 71673320, "body": "I am trying to avoid calling it with libmyLibrary.a I have to call it with the -l flag"}], "tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 1, "last_activity_date": 1487184755, "last_edit_date": 1487184755, "creation_date": 1487184407, "answer_id": 42257698, "question_id": 42257463, "link": "https://stackoverflow.com/questions/42257463/linking-static-library-with-l-flag/42257698#42257698", "title": "Linking static library with -l flag", "body": "<p>To link purely statically library, use -static, Like</p>\n\n<pre><code>gcc -static main.c libmyLibrary.a\n</code></pre>\n\n<p>And run executable file <code>./a.out</code>  GCC Linux.</p>\n"}, {"comments": [{"owner": {"reputation": 262, "user_id": 5916457, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eeae0a149f32d093e9cd77fa6cd4a340?s=128&d=identicon&r=PG&f=1", "display_name": "FreeStyle4", "link": "https://stackoverflow.com/users/5916457/freestyle4"}, "edited": false, "score": 0, "creation_date": 1487199666, "post_id": 42259433, "comment_id": 71681089, "body": "Thank you! I was trying to use -L but it wasn&#39;t working until I added the period after it"}], "tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": true, "score": 4, "last_activity_date": 1487190646, "creation_date": 1487190646, "answer_id": 42259433, "question_id": 42257463, "link": "https://stackoverflow.com/questions/42257463/linking-static-library-with-l-flag/42259433#42259433", "title": "Linking static library with -l flag", "body": "<p>Here is a rudimentary, unrealistic makefile that will make the static library <code>libmyLibary</code>\nbefore it makes the program <code>main</code>, which it will link with the static library\nusing the <code>-L</code> (library search-path) and <code>-l</code> (library) options.</p>\n\n<p><strong>Makefile</strong></p>\n\n<pre><code>.PHONY: all clean\n\nall: libmyLibrary.a main\n\nmain: main.o | libmyLibrary.a\n    $(CC) -o main main.o -L. -lmyLibrary\n\nlibmyLibrary.a: myLibrary.o\n    $(AR) rcs libmyLibrary.a myLibrary.o\n\nclean:\n    rm -f *.o libmyLibrary.a main\n</code></pre>\n\n<p>which runs like:</p>\n\n<pre><code>$ make\ncc    -c -o myLibrary.o myLibrary.c\nar rcs libmyLibrary.a myLibrary.o\ncc    -c -o main.o main.c\ncc -o main main.o -L. -lmyLibrary\n</code></pre>\n\n<p>As I think you know, it's unrealistic to make both a library and a program\nthat links with it in the same makefile, since the point of a library is\nthat you don't need to keep remaking it to link it with many programs. You'd really have\na makefile for <code>libmyLibrary.a</code> and other makefiles for programs that\nuse it.</p>\n\n<p>This is how the gcc linkage options <code>-L</code> and <code>-l</code> work:</p>\n\n<pre><code>-L/path/to/search\n</code></pre>\n\n<p>tells the linker to look for any libraries that you specify with the <code>-l</code> option in <code>/path/to/search</code>,\nbefore it looks for them in its default search directories. The current directory, <code>.</code>,\nisn't one of the linker's default search directories. So if you want it to\nfind a library specified with the <code>-l</code> option in the current directory, then you need to\nspecify <code>-L.</code></p>\n\n<pre><code>-lfoo\n</code></pre>\n\n<p>tells the linker to search for either a dynamic library, <code>libfoo.so</code>, or a static\nlibrary, <code>libfoo.a</code>, first in your <code>-L</code> directories, if any, in the order you've\nspecified them, and then in its default search directories. It stops searching\nas soon as if finds either <code>libfoo.so</code> or <code>libfoo.a</code> in one of the search directories.\nIf it finds <em>both</em> of them in the same directory, then by default it will link <code>libfoo.so</code> with\nyour program and not link <code>libfoo.a</code>.</p>\n"}], "owner": {"reputation": 262, "user_id": 5916457, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eeae0a149f32d093e9cd77fa6cd4a340?s=128&d=identicon&r=PG&f=1", "display_name": "FreeStyle4", "link": "https://stackoverflow.com/users/5916457/freestyle4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4839, "favorite_count": 2, "accepted_answer_id": 42259433, "answer_count": 2, "score": 1, "last_activity_date": 1487190646, "creation_date": 1487183692, "question_id": 42257463, "link": "https://stackoverflow.com/questions/42257463/linking-static-library-with-l-flag", "title": "Linking static library with -l flag", "body": "<p>How can I have my makefile compile with the -l flag?</p>\n\n<p>I have a makefile that looks like</p>\n\n<pre><code>myLibrary:\n    gcc -c myLibrary.c -o myLibrary.o\n    ar cr libmyLibrary.a myLibrary.o\n</code></pre>\n\n<p>and then I compile my main program with</p>\n\n<pre><code>main:\n    gcc -g -c -o main.o main.c\n    gcc main.o -o main libmyLibrary.a\n</code></pre>\n\n<p>The above makefile works, but if I want to replace </p>\n\n<pre><code>libmyLibrary.a\n</code></pre>\n\n<p>with <code>-lmyLibrary</code> I get an error. Shouldn't both be working the same?</p>\n"}, {"tags": ["c", "loops", "fgets"], "comments": [{"owner": {"reputation": 568, "user_id": 2591870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MM73n.jpg?s=128&g=1", "display_name": "James Davis", "link": "https://stackoverflow.com/users/2591870/james-davis"}, "edited": false, "score": 0, "creation_date": 1487183751, "post_id": 42257456, "comment_id": 71672684, "body": "Please fix the formatting of your question. Note the #include&#39;s left out of your code."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 5, "creation_date": 1487183809, "post_id": 42257456, "comment_id": 71672711, "body": "Because the first <code>scanf</code> leaves a <code>newline</code> in the input buffer for <code>fgets</code> to read - don&#39;t mix your methods! Input to <code>t</code> with <code>fgets</code> and <code>sscanf</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487183893, "post_id": 42257456, "comment_id": 71672765, "body": "&quot;gets doesn&#39;t take any value in the first iteration of the loop&quot; --&gt; Yes it did.  <code>fgets()</code> &quot;took&quot; the <code>&#39;\\n&#39;</code> from the previous line."}, {"owner": {"reputation": 159, "user_id": 7322824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aCujf.png?s=128&g=1", "display_name": "Jack Rus", "link": "https://stackoverflow.com/users/7322824/jack-rus"}, "edited": false, "score": 0, "creation_date": 1487184007, "post_id": 42257456, "comment_id": 71672835, "body": "Now I see. Thank you. so there are 2 issues."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 3, "creation_date": 1487184020, "post_id": 42257456, "comment_id": 71672846, "body": "Why are you increasing <code>t</code> instead of <code>j</code> in the for loop?, it seems an infinite loop"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487184149, "post_id": 42257456, "comment_id": 71672934, "body": "...and of course <code>j &lt;= t;</code> will give <code>t + 1</code> loops."}, {"owner": {"reputation": 907, "user_id": 5617152, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g-d8oZWjJps/AAAAAAAAAAI/AAAAAAAAAEQ/d6WL36JzvLs/photo.jpg?sz=128", "display_name": "Dave S", "link": "https://stackoverflow.com/users/5617152/dave-s"}, "edited": false, "score": 0, "creation_date": 1487185698, "post_id": 42257456, "comment_id": 71673858, "body": "I&#39;m not sure what your goal is here:  If my input is 5 hello  scanf will read the 5 and assign it to t.  then the first iteration of the loop fgets will pull hello\\n from the stdin, and printf will print &quot;hello\\n&quot;, any subsequent iteration will hang on fgets as the input is now empty."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1487185889, "post_id": 42257456, "comment_id": 71673954, "body": "@DaveS-- No, the subsequent calls to <code>fgets()</code> will work just fine."}], "answers": [{"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1487187223, "post_id": 42257887, "comment_id": 71674662, "body": "A white-space at the end of the format string will continue matching white-space characters until a non-white-space character is encountered, causing the input to hang."}], "tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": -2, "last_activity_date": 1487185012, "creation_date": 1487185012, "answer_id": 42257887, "question_id": 42257456, "link": "https://stackoverflow.com/questions/42257456/fgets-doesnt-work-in-the-loop/42257887#42257887", "title": "Fgets - doesn&#39;t work in the loop", "body": "<p>scanf() is reading the digits the uder entered, and leaving his trailing spaces and newline in the buffer. fgets() then reads these and so appears to read an empty string on the first iteration. </p>\n\n<p>To fix add a whitespace character after the %i. Whitespace matches whitespace with scanf. </p>\n"}, {"tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": false, "score": 1, "last_activity_date": 1487186715, "last_edit_date": 1487186715, "creation_date": 1487186413, "answer_id": 42258265, "question_id": 42257456, "link": "https://stackoverflow.com/questions/42257456/fgets-doesnt-work-in-the-loop/42258265#42258265", "title": "Fgets - doesn&#39;t work in the loop", "body": "<p>The easiest way to fix your problem is to use <code>fgets()</code> and <code>sscanf()</code> to read the initial number. Also, it appears that your loop has a couple of errors. You probably meant <code>j &lt; t</code> instead of <code>j &lt;= t</code>, so that the loop executes <code>t</code> times. Also, you almost certainly meant to increment <code>j</code> instead of <code>t</code>, which would lead to an infinite loop.</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) \n{\n    int t;\n    char buffer[100];\n    fgets(buffer, 100, stdin);\n    sscanf(buffer, \"%i\", &amp;t);\n\n    char ways[100];\n    for (int j = 0; j &lt; t; j++)\n    {\n        fgets (ways, 100, stdin);\n        printf(\"Ways = %s\\n\", ways);\n    }\n\n    return 0; \n }\n</code></pre>\n\n<p>Note that it is generally a bad idea to add a white-space character to the end of a format string, as this causes <code>scanf()</code> to continue trying to read input until a non-white-space character is encountered, blocking the input.</p>\n"}], "owner": {"reputation": 159, "user_id": 7322824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aCujf.png?s=128&g=1", "display_name": "Jack Rus", "link": "https://stackoverflow.com/users/7322824/jack-rus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1373, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487187892, "creation_date": 1487183671, "last_edit_date": 1487183772, "question_id": 42257456, "link": "https://stackoverflow.com/questions/42257456/fgets-doesnt-work-in-the-loop", "title": "Fgets - doesn&#39;t work in the loop", "body": "<p>The problem is that fgets doesn't take any value in the first iteration of the loop. Just simply skips it. As I see it. I get there is some basic mistake in my code, but I don't see it. Fgets starts taking values only on 2d iteration. </p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) \n{\n    int t;\n    scanf(\"%i\", &amp;t);\n\n    char ways[100];\n    for (int j = 0; j &lt;= t; t++)\n    {\n        fgets (ways, 100, stdin);\n        printf(\"Ways = %s\\n\", ways);\n    }\n\n    return 0; \n }`\n</code></pre>\n"}, {"tags": ["c", "regex", "linux", "fork"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487183771, "post_id": 42257407, "comment_id": 71672690, "body": "There are scripting languages suited much better for such a task (literally taking like 5 lines of code). why C?"}, {"owner": {"reputation": 11, "user_id": 7570708, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gFJU5rv_gJo/AAAAAAAAAAI/AAAAAAAAAKo/Sa8GG16qLOw/photo.jpg?sz=128", "display_name": "Ryan Kaakaty", "link": "https://stackoverflow.com/users/7570708/ryan-kaakaty"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1487183989, "post_id": 42257407, "comment_id": 71672821, "body": "My professor wants us to practice doing it in C @EugeneSh."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1487188581, "post_id": 42257407, "comment_id": 71675406, "body": "Since SO is not a coding service, you must demonstrate your effort first."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7579800, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/3d925997c540b29d39cd7bdcc4dcecfe?s=128&d=identicon&r=PG", "display_name": "dd22", "link": "https://stackoverflow.com/users/7579800/dd22"}, "is_accepted": false, "score": 0, "last_activity_date": 1487322741, "last_edit_date": 1495542306, "creation_date": 1487322741, "answer_id": 42293791, "question_id": 42257407, "link": "https://stackoverflow.com/questions/42257407/extracting-and-displaying-data-from-text-file-in-c/42293791#42293791", "title": "Extracting and Displaying data from text file in C", "body": "<p>You may use curl to download the file from the web.</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/27092844/how-to-download-a-file-from-a-url-in-c-as-a-browser-would\">How to download a file from a URL in C, as a browser would?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/19404616/c-program-for-downloading-files-with-curl\">C program for downloading files with curl</a></li>\n</ul>\n\n<p>Then you can iterate and parse the data to extract the regex pattern of either url, email or phone.</p>\n\n<p>Try to come out with some code yourself and if there is any problem, post what you did, snippet of the code that failed, and explain your own thoughts on why do you think it failed.</p>\n"}], "owner": {"reputation": 11, "user_id": 7570708, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gFJU5rv_gJo/AAAAAAAAAAI/AAAAAAAAAKo/Sa8GG16qLOw/photo.jpg?sz=128", "display_name": "Ryan Kaakaty", "link": "https://stackoverflow.com/users/7570708/ryan-kaakaty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1487322741, "creation_date": 1487183499, "last_edit_date": 1487188510, "question_id": 42257407, "link": "https://stackoverflow.com/questions/42257407/extracting-and-displaying-data-from-text-file-in-c", "title": "Extracting and Displaying data from text file in C", "body": "<p>I am trying to write a C program that takes in two arguments, either [-url | -phone | -email] and a text file that the user will download from a website. </p>\n\n<p>After the user inputs the flag and the name of the text file, the program is supposed to extract and display the contents based on the regular expression I have developed.</p>\n\n<p>For example, for URL the regex is \n<code>/^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$/</code></p>\n\n<p>I am having a hard time figuring out how I can implement such a task. Do I need to use fork()? How exactly can I read the data from the text file and display back results based on the regex?</p>\n\n<p>Here is the example OUTPUT</p>\n\n<pre><code>$ gcc \u2013o minor1 minor1.c  \n$ ./minor1  \nUsage:  \n./minor1 [-url | -email | -phone] input_file  \n</code></pre>\n\n<p>URL CASE SCENARIO:  </p>\n\n<pre><code>$./minor1 -url index.html  \nhttps://www.web.edu/  \n...  \nhttp://webpreview.web.edu/  \n...  \nhttpL//policy.web.edu/  \n</code></pre>\n\n<p><strong>Based on the flag and the input file, this is what it is supposed to return</strong></p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1487183326, "post_id": 42257307, "comment_id": 71672398, "body": "You are returning an <code>int</code>  but your function wants to return a pointer to <code>int</code>, also, what is <code>p</code>?"}, {"owner": {"reputation": 31, "user_id": 7514897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211903792013862/picture?type=large", "display_name": "Diego Fabiano", "link": "https://stackoverflow.com/users/7514897/diego-fabiano"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1487183370, "post_id": 42257307, "comment_id": 71672427, "body": "Sorry is just that is a longer code, but p is declared as int *p;"}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 0, "creation_date": 1487183418, "post_id": 42257307, "comment_id": 71672455, "body": "You should <a href=\"//prohackr112.tk/pcf\" rel=\"nofollow noreferrer\">properly format your code</a>. Using proper formatting attracts people to your question and encourages them to help you."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1487183428, "post_id": 42257307, "comment_id": 71672465, "body": "Then, don&#39;t dereference <code>p_min</code>, just use <code>return p_min;</code> instead of <code>return *p_min;</code>"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1487183650, "post_id": 42257307, "comment_id": 71672618, "body": "<code>*p[1] &lt; *p[0]</code> should be <code>*(p+1) &lt; *p</code> or <code>p[1] &lt; p[0]</code>"}, {"owner": {"reputation": 31, "user_id": 7514897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211903792013862/picture?type=large", "display_name": "Diego Fabiano", "link": "https://stackoverflow.com/users/7514897/diego-fabiano"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487183744, "post_id": 42257307, "comment_id": 71672682, "body": "Why is this? I thought *p[1] &lt; *p[0] will examine the values inside of that pointer? or is it the other way around&gt; @ikegami"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487183744, "post_id": 42257307, "comment_id": 71672683, "body": "Because <code>p[0]</code> is equivalent to <code>*p</code>, the <code>int</code> pointer to by <code>p</code>"}, {"owner": {"reputation": 31, "user_id": 7514897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211903792013862/picture?type=large", "display_name": "Diego Fabiano", "link": "https://stackoverflow.com/users/7514897/diego-fabiano"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487184199, "post_id": 42257307, "comment_id": 71672966, "body": "I still get the same warning, how am I supposed to cast the return? @ikegami"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487184672, "post_id": 42257307, "comment_id": 71673273, "body": "<code>for (p = &amp;a[0]; p &lt; &amp;a[N]; p++)</code> is also likely wrong.  <code>a[N]</code> beyond array?.  Post how this function is called."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1487313496, "post_id": 42257307, "comment_id": 71737724, "body": "Sorry, where is <code>p</code> declared? How is it declared? what&#39;s the exact compiler error, what line does it reference? Can you post a complete, verifiable, minimum, and reproducible example?"}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1487184513, "post_id": 42257651, "comment_id": 71673176, "body": "<code>int a[]</code> is perfectly equivalent to <code>int *a</code> as a function parameter, no copy of the array involved. Also, I&#39;m not sure <code>int (*a)[]</code> is valid, IIRC that should be <code>int (*a)[*]</code>."}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1487184566, "post_id": 42257651, "comment_id": 71673206, "body": "JFYI: <code>int a[]</code> is <a href=\"http://stackoverflow.com/a/1641963/223424\">basically the same thing</a> as <code>int * a</code>, just a different syntax for access."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1487184613, "post_id": 42257651, "comment_id": 71673234, "body": "@9000 Where did I say he should use <code>int *a</code> instead of <code>int a[]</code>? I stated that if he wanted to modify the array he should use <code>int (*a)[]</code>."}, {"owner": {"reputation": 31, "user_id": 7514897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211903792013862/picture?type=large", "display_name": "Diego Fabiano", "link": "https://stackoverflow.com/users/7514897/diego-fabiano"}, "edited": false, "score": 0, "creation_date": 1487184709, "post_id": 42257651, "comment_id": 71673296, "body": "Thank you! this is what I was looking for. p is declared as int *p; in the whole program, I edited that earlier. Sorry I am having confusions because I wasn&#39;t taught any of what you mentioned, but I really appreciate your input. It will help me improve. @MDXF"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1487184713, "post_id": 42257651, "comment_id": 71673299, "body": "@MDXF fair enough, I&#39;ll trust you that it&#39;s no compiler extension. But the point stands that you do not need a pointer to an array to modify the array&#39;s elements -- the array implicitly decays to a pointer already."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1487184759, "post_id": 42257651, "comment_id": 71673325, "body": "@Quentin If you want to modify the local copy, absolutely, <code>int *a</code> is fine. But if you&#39;re actually looking to modify another function&#39;s array, <code>int (*a)[]</code> or something of the sort is necessary."}, {"owner": {"reputation": 31, "user_id": 7514897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211903792013862/picture?type=large", "display_name": "Diego Fabiano", "link": "https://stackoverflow.com/users/7514897/diego-fabiano"}, "edited": false, "score": 0, "creation_date": 1487184791, "post_id": 42257651, "comment_id": 71673352, "body": "I do not want to modify the array the whole thing of the function is just to find the smallest number in the array. @MDXF"}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 31, "user_id": 7514897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211903792013862/picture?type=large", "display_name": "Diego Fabiano", "link": "https://stackoverflow.com/users/7514897/diego-fabiano"}, "edited": false, "score": 0, "creation_date": 1487184871, "post_id": 42257651, "comment_id": 71673392, "body": "@DiegoFabiano The way you were accessing the array in the function made it seem like you wanted a pointer-to-array, and it&#39;s mainly just a helpful tip for the future, in case it ever needs to goes down that road."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1487185025, "post_id": 42257651, "comment_id": 71673487, "body": "Re <i>Just a warning, if you want to modify the array, find_smallest(int a[], int N) will not do</i>, You need something like find_smallest(int (<i>a)[], int N);, which you would then access like (*a)[some_index].</i>&quot;, That&#39;s not true (<code>void foo(int a[]) {     a[0] = 345; }  int main() {    int a[] = {123};    foo(a);    printf(&quot;%d\\n&quot;, a[0]);    return 0; }</code>) and it&#39;s totally irrelevant to the question at hand."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487185078, "post_id": 42257651, "comment_id": 71673521, "body": "Re &quot;<i>Why do you need to use &amp;a[0] instead of just a[0]</i>&quot;, Because they wants a pointer to the first element of the array."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487185272, "post_id": 42257651, "comment_id": 71673621, "body": "@ikegami <b>Re comment #2</b> No, they don&#39;t want that, but that&#39;s what they&#39;re doing anyway, because they think that&#39;s what they want. <b>Re comment #1</b> It&#39;s not totally irrelevant, it&#39;s good advice for pointer manipulation. All right, so some of the time it works to simply pass <code>int a[]</code>, but it&#39;s safer to use the method I stated. <b>Re downvote</b> If you downvoted my answer because a) you answered too or b) you didn&#39;t like <i>one</i> of my points, sure, be a douchebag, but I can do the same to you, since your 5th point is &#39;totally irrelevant&#39;."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487185936, "post_id": 42257651, "comment_id": 71673986, "body": "Re &quot;<i>No, they don&#39;t want that, but that&#39;s what they&#39;re doing anyway</i>&quot;, No so. Your recommended <code>p = a[0];</code> is a type error. It&#39;s needs to be <code>p = &amp;a[0]</code> (as the OP had), or just <code>p = a;</code>. This is about the only thing in the OP&#39;s code that was correct! /// Re &quot;<i>it&#39;s good advice for pointer manipulation</i>&quot;, That doesn&#39;t contradict what I said. /// I downvoted your answer because of the bad information therein. As always, I&#39;ll retract the vote once the issues are addressed. The only douche is you for downvoting an answers because its author pointed out serious problems with yours."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487198987, "post_id": 42257651, "comment_id": 71680807, "body": "@ikegami I never suggested that they use <code>p = a[0]</code>, I suggested that they only access <code>a[0]</code> since there&#39;s no need to access <code>&amp;a[0]</code>, which may have strange behavior anyway. /// I downvoted your answer because of the useless/unnecessary information within. /// &quot;serious&quot; problems? The only &quot;serious problems&quot; with this answer are the comments from you under it."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487203407, "post_id": 42257651, "comment_id": 71682334, "body": "There&#39;s no way in which <code>a[0]</code> can be used to access the elements of <code>a</code>. <code>p=&amp;a[0]</code>, <code>p=a</code> and <code>a[i]</code> are all fine. But not <code>a[0]</code>. // you also still have that nonsense about needing <code>find_smallest(int (*a)[], int N)</code> to change the array. Run the program I posted in the earlier content to prove your statement wrong"}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1487267230, "post_id": 42257651, "comment_id": 71718875, "body": "@ikegami <a href=\"http://chat.stackoverflow.com/rooms/135817/discussion-between-md-xf-and-ikegami\">chat</a>."}], "tags": [], "owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "is_accepted": true, "score": -4, "last_activity_date": 1487184275, "creation_date": 1487184275, "answer_id": 42257651, "question_id": 42257307, "link": "https://stackoverflow.com/questions/42257307/how-to-use-pointers-properly-in-c/42257651#42257651", "title": "How to use pointers properly in C?", "body": "<p>There are lots of problems (and places to improve on) this code. It's very confusing, so I'm not entirely sure what you're trying to do, but I'll point out some places you should start.</p>\n\n<ul>\n<li>Just a warning, if you want to modify the array, <code>find_smallest(int a[], int N)</code> will not do*, You need something like <code>find_smallest(int (*a)[], int N);</code>, which you would then access like <code>(*a)[some_index]</code>.</li>\n<li>Your function says it's returning a <code>int *</code>, but the two <code>return</code>s I see have <code>int</code> values.</li>\n<li>Where is <code>p</code> declared?</li>\n<li>Why do you need to use <code>&amp;a[0]</code> instead of just <code>a[0]</code>, if all you're doing is finding the smallest value in the array?</li>\n<li>You keep trying to access <code>*a[some_index]</code>. It looks like you meant to pass it as I stated. Accessing it as <code>*a[some_index]</code> will result in all kinds of errors, you'll need to write something like <code>(*a)[some_index]</code>. That's how C recognizes pointers.</li>\n<li>If either way you're returning <code>*p_min</code>, you shouldn't put the <code>return</code>s in the if-statements, as it'll just slow down the compiler and waste space.</li>\n</ul>\n\n<p><sup>* If you pass it like <code>int a[]</code>, the function will only have a local copy of the variable, and will not be able to modify it. This'll result in a lot of confusing errors, so if you want to develop your function into anything bigger, this is something to consider.</sup></p>\n"}, {"tags": [], "owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "is_accepted": false, "score": 3, "last_activity_date": 1487184444, "creation_date": 1487184444, "answer_id": 42257711, "question_id": 42257307, "link": "https://stackoverflow.com/questions/42257307/how-to-use-pointers-properly-in-c/42257711#42257711", "title": "How to use pointers properly in C?", "body": "<p>Not really sure what you're doing with the comparison logic. The most straightforward approach is to start with the first element, then check the rest sequentially, keeping the index of the smaller one. My code would be something like this:</p>\n\n<pre><code>int *find_smallest(int a[], int N)\n{\n    /* Make sure the input is valid */\n    if (a &amp;&amp; N &gt; 0)\n    {\n        int i, N_min = 0;\n        /* Check the rest of the elements */\n        for (i = 1; i &lt; N; i++)\n        {\n            /* If this one is lower, save the index */\n            if (a[i] &lt; a[N_min])\n                N_min = i;\n        }\n        /* Return pointer to minimum */\n        return a + N_min;\n    }\n    /* Return NULL to indicate an error */\n    return NULL;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1487185324, "last_edit_date": 1487185324, "creation_date": 1487184580, "answer_id": 42257756, "question_id": 42257307, "link": "https://stackoverflow.com/questions/42257307/how-to-use-pointers-properly-in-c/42257756#42257756", "title": "How to use pointers properly in C?", "body": "<ul>\n<li><code>*p[1] &lt; *p[0]</code> should be <code>*(p+1) &lt; *p</code> or <code>p[1] &lt; p[0]</code>.</li>\n<li>The return type should be <code>int</code>.</li>\n<li>You unconditionally return after one pass of the loop.</li>\n<li>You never declared <code>p</code>.</li>\n<li>Note that <code>&amp;a[i]</code> can be written <code>a+i</code>.</li>\n<li>You should be comparing <code>p[0]</code> (aka <code>*p</code>) and <code>*p_min</code>, not <code>p[0]</code> and <code>p[1]</code>.</li>\n<li><code>p[1]</code> might even be beyond the end of the array!</li>\n<li>You don't initialize <code>p_min</code>.</li>\n<li>There's no reason to have <code>int* p_min;</code> instead of <code>int min;</code>.</li>\n</ul>\n\n<p>Fixed:</p>\n\n<pre><code>int find_smallest(int a[], int N) {\n    int min = a[0];  // Assumes a[] will have at least one element.\n    for (int* p=a; p&lt;a+N; ++p) {\n        if (*p &lt; min) min = *p;\n    } \n\n    return min;\n}\n</code></pre>\n\n<p>Or just:</p>\n\n<pre><code>int find_smallest(int a[], int N) {\n    int min = a[0];  // Assumes a[] will have at least one element.\n    for (int* p=a; N--; ++p) {\n        if (*p &lt; min) min = *p;\n    } \n\n    return min;\n}\n</code></pre>\n\n<p>Alternatively, one could use an index instead of a pointer.</p>\n\n<pre><code>int find_smallest(int a[], int N) {\n    int min = a[0];  // Assumes a[] will have at least one element.\n    for (int i=0; i&lt;N; ++i) {\n        if (a[i] &lt; min) min = a[i];\n    } \n\n    return min;\n}\n</code></pre>\n\n<p>Or just:</p>\n\n<pre><code>int find_smallest(int a[], int N) {\n    int min = a[0];  // Assumes a[] will have at least one element.\n    for (int i=N; i--; ) {\n        if (a[i] &lt; min) min = a[i];\n    } \n\n    return min;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7514897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211903792013862/picture?type=large", "display_name": "Diego Fabiano", "link": "https://stackoverflow.com/users/7514897/diego-fabiano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 42257651, "answer_count": 3, "score": 0, "last_activity_date": 1487185324, "creation_date": 1487183199, "last_edit_date": 1487183510, "question_id": 42257307, "link": "https://stackoverflow.com/questions/42257307/how-to-use-pointers-properly-in-c", "title": "How to use pointers properly in C?", "body": "<p>I have this code that is supposed to find the smallest integer in an array. I am learning how to use pointers in C, and my code will not compile, but I do not know why. Rather than just the answer, I'd like to know why I am doing wrong or how is my thought process wrong.</p>\n\n<p>I thought that <code>*p_min</code> will return the value inside the address.</p>\n\n<p>The errors I get:</p>\n\n<pre><code>error: invalid type argument of \u2018unary *\u2019 (have \u2018int\u2019)\n\nWarning: return makes pointer from integer without a cast\n</code></pre>\n\n<p>p is declared outside the function as int *p;</p>\n\n<p>Code:</p>\n\n<pre><code>int *find_smallest(int a[], int N)\n{\n    int *p_min;\n\n    for (p = &amp;a[0]; p &lt; &amp;a[N]; p++)\n    {\n        if (*p[1] &lt; *p[0]) {\n            p_min = &amp;p[1];\n            return *p_min;\n        } else {\n            p_min = &amp;p[0];\n            return *p_min;\n        }\n    } \n}\n</code></pre>\n"}, {"tags": ["c", "stdio"], "comments": [{"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1487183313, "post_id": 42257306, "comment_id": 71672390, "body": "<a href=\"https://stackoverflow.com/questions/7898215/how-to-clear-input-buffer-in-c\" title=\"how to clear input buffer in c\">stackoverflow.com/questions/7898215/&hellip;</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 1, "creation_date": 1487183552, "post_id": 42257306, "comment_id": 71672538, "body": "@AntonH I don&#39;t think that is a duplicate: almost the <i>opposite</i> problem. Here the input is blocked by a letter that will not go away until you find way of clearing the input. One easy way to get round it is to read the input with <code>fgets</code> and apply <code>sscanf</code> to that string. If the scan fails, you just input another string."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 2, "creation_date": 1487183573, "post_id": 42257306, "comment_id": 71672549, "body": "Many duplicates of this question exist. When you enter letters and <code>scanf()</code> expects a number, the letters are left in the input stream. You must clear the input stream. Do not use <code>fflush(stdin)</code>, as some will recommend; the Standard explicitly says that this leads to undefined behavior, though some implementations, notably MS, define this behavior."}], "owner": {"reputation": 1161, "user_id": 2997204, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/68d34e644c8c4b7d7613a39ae4db065f?s=128&d=identicon&r=PG&f=1", "display_name": "user2997204", "link": "https://stackoverflow.com/users/2997204/user2997204"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "closed_date": 1487183715, "answer_count": 0, "score": 0, "last_activity_date": 1487183197, "creation_date": 1487183197, "question_id": 42257306, "link": "https://stackoverflow.com/questions/42257306/program-does-not-wait-for-input-from-scanf", "closed_reason": "Duplicate", "title": "Program does not wait for input from scanf", "body": "<p>If I enter a number, everything runs fine.\nBut when I enter a letter it keeps spamming \"enter a number\".\nIt does not ask for input again. How can I fix this problem?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n    int number = 0;\n\n    int status = 0;\n    do{\n        printf(\"enter a number\\n\");\n        status = scanf(\"%d\", &amp;number);\n    } while (status != 1);\n\n    printf(\"you chose number %d\", number);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "comparison", "compiler-optimization", "disassembly"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487183463, "post_id": 42257128, "comment_id": 71672489, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a Minimal, Complete, and Verifiable example."}], "answers": [{"comments": [{"owner": {"reputation": 850, "user_id": 3393524, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/114a62c4bb97c83106056189bdf9ef4a?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Yanakiev", "link": "https://stackoverflow.com/users/3393524/vladimir-yanakiev"}, "edited": false, "score": 0, "creation_date": 1487184038, "post_id": 42257418, "comment_id": 71672857, "body": "My question is not the logic. It is for flags. I thought that &quot;addi&quot;  will set some flags, But &quot;cmp&quot; will change them again. And I though that flags from &quot;addi&quot; will be lost."}, {"owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "reply_to_user": {"reputation": 850, "user_id": 3393524, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/114a62c4bb97c83106056189bdf9ef4a?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Yanakiev", "link": "https://stackoverflow.com/users/3393524/vladimir-yanakiev"}, "edited": false, "score": 0, "creation_date": 1487185191, "post_id": 42257418, "comment_id": 71673584, "body": "They are lost, but you only need the results from <code>cmp</code>."}], "tags": [], "owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "is_accepted": true, "score": 1, "last_activity_date": 1487183526, "creation_date": 1487183526, "answer_id": 42257418, "question_id": 42257128, "link": "https://stackoverflow.com/questions/42257128/check-if-value-is-in-diapason-disassembly/42257418#42257418", "title": "Check if value is in diapason disassembly", "body": "<p>It is transforming the check as follows:</p>\n\n<pre><code>  x &gt;= 2 &amp;&amp; x &lt;= 5\n= (x - 2) &gt;= (2 - 2) &amp;&amp; (x - 2) &lt;= (5 - 2)\n= (x - 2) &gt;= 0 &amp;&amp; (x - 2) &lt;= 3\n</code></pre>\n\n<p>The code compares <code>r1</code>, which is <code>x - 2</code>, to <code>3</code> and \"branches if not higher\" meaning <code>r1</code> in <code>0, 1, 2, or 3</code> (or <code>x</code> in <code>2, 3, 4, or 5</code>) will branch to set <code>y = 1</code>.</p>\n"}], "owner": {"reputation": 850, "user_id": 3393524, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/114a62c4bb97c83106056189bdf9ef4a?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Yanakiev", "link": "https://stackoverflow.com/users/3393524/vladimir-yanakiev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 42257418, "answer_count": 1, "score": 0, "last_activity_date": 1487278177, "creation_date": 1487182560, "last_edit_date": 1487278177, "question_id": 42257128, "link": "https://stackoverflow.com/questions/42257128/check-if-value-is-in-diapason-disassembly", "title": "Check if value is in diapason disassembly", "body": "<p>I am using RH850 controler and compiler greenHills in C language. In range check like this:</p>\n\n<pre><code>if ((x&gt;=2) &amp;&amp; (x&lt;=5))\n    y=1\n</code></pre>\n\n<p>It is compiled with Osize option. When it is compiled it seemed like this:</p>\n\n<pre><code>zxb r7\naddi -2,r7,r1\ncmp 3,r1\nbnh .L1295\n</code></pre>\n\n<p><code>.L1295</code> is the label of <code>y=1</code> (This <code>y=1</code> is used for other changes, on some other conditions too). Both instructions affected same flags.</p>\n\n<p>The check <code>(x&gt;=2)</code> is realized with this code: <code>addi -2,r7,r1</code>. But flag result of this instruction, will be cleaned by next one and there is incorrect. At least I think so. </p>\n\n<p>Obviously I am wrong. Can someone explain this disassembler fragment?</p>\n"}, {"tags": ["c", "parallel-processing", "pthreads"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1487183299, "post_id": 42257101, "comment_id": 71672376, "body": "It doesn&#39;t explain the hang, but do note that it is not safe to unconditionally choose the elements of the main diagonal as divisors.  These can be zero (even for non-singular systems), and / or have extreme values that make your approach numerically unstable."}, {"owner": {"reputation": 11, "user_id": 7391812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98eca716617b0b5f0035520fa6750f01?s=128&d=identicon&r=PG", "display_name": "Joshua Arnold", "link": "https://stackoverflow.com/users/7391812/joshua-arnold"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1487183680, "post_id": 42257101, "comment_id": 71672637, "body": "Right, I was going to tackle that problem post hang issue. Thank you for your response."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7391812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98eca716617b0b5f0035520fa6750f01?s=128&d=identicon&r=PG", "display_name": "Joshua Arnold", "link": "https://stackoverflow.com/users/7391812/joshua-arnold"}, "edited": false, "score": 0, "creation_date": 1487189248, "post_id": 42258276, "comment_id": 71675810, "body": "Thank you for your help. This made perfect sense and solved my issue. I better understand cond_vars as well."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1487194095, "last_edit_date": 1487194095, "creation_date": 1487186434, "answer_id": 42258276, "question_id": 42257101, "link": "https://stackoverflow.com/questions/42257101/pthreads-c-program-hangs-at-execution/42258276#42258276", "title": "pthreads C program hangs at execution", "body": "<p>You have a race condition (at least one), and your code does not use its condition variables correctly.  You can probably fix the former by fixing the latter.  Also, I suspect that you intend <code>gauss()</code>'s local variable <code>thread_count</code> to be shared, but variables with no linkage are not shared.</p>\n\n<p>First, the race condition.  Consider the main thread: it starts the three other threads, and then locks the mutex and waits for condition variable <code>condM</code> to be signaled.  But suppose the threads all manage to signal <code>condM</code> before the main thread starts waiting?  Condition variable operations are immediate -- any signals to <code>condM</code> that occur before <code>main()</code> is waiting on it are lost.</p>\n\n<p>Now let's shift gears to talk about condition variables.  As <a href=\"https://linux.die.net/man/3/pthread_cond_wait\" rel=\"nofollow noreferrer\">the Linux manual for <code>pthread_cond_wait()</code></a> puts it:</p>\n\n<blockquote>\n  <p>When using condition variables there is always a Boolean predicate involving shared variables associated with each condition wait that is true if the thread should proceed. Spurious wakeups from the <code>pthread_cond_timedwait()</code> or <code>pthread_cond_wait()</code> functions may occur. Since the return from <code>pthread_cond_timedwait()</code> or <code>pthread_cond_wait()</code> does not imply anything about the value of this predicate, the predicate should be re-evaluated upon such return.</p>\n</blockquote>\n\n<p>In other words, condition variables are used to suspend thread operations pending a given condition becoming true.  In abstract terms, that condition is always \"it's ok for this thread to proceed\", but that's realized in context-specific terms.  Most importantly, the fact that a thread wakes from its wait never inherently communicates that the condition is true; it merely indicates that the newly-woken thread should <em>check</em> whether the condition is true.  Generally, the thread should also check before waiting for the first time, as the condition may <em>already</em> be true.</p>\n\n<p>In pseudocode, that looks like this:</p>\n\n<p>Thread 1:</p>\n\n<pre><code>lock mutex;\nloop\n    if is_ok_to_proceed then exit loop;\n    wait on condition variable;\nend loop\n// ... maybe do mutex-protected work ...\nunlock mutex\n</code></pre>\n\n<p>Thread 2:</p>\n\n<pre><code>lock mutex\n    // ... maybe do mutex-protected work ...\n    is_ok_to_proceed = true;\n    signal condition variable;\nunlock mutex\n</code></pre>\n\n<p>Generally speaking, there is also (mutex-protected) code somewhere else that make the CV predicate false, so that sometimes the threads indeed do execute their waits.</p>\n\n<p>Now consider how that applies to the race condition in <code>main()</code>.  How does <code>main()</code> know whether to wait on <code>condM()</code>?  There needs to be a shared variable somewhere that answers that for it, and its wait must be conditioned on the value of that variable.  Any thread that means to allow the main thread to proceed must both set the appropriate value for the variable and signal <code>condM</code>.  The main thread itself should set the variable, too, as needed, to indicate that it is <em>not</em> ready, at that time, to proceed.</p>\n\n<p>Of course, your other CV usage suffers from the same kind of problem, too.</p>\n"}], "owner": {"reputation": 11, "user_id": 7391812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98eca716617b0b5f0035520fa6750f01?s=128&d=identicon&r=PG", "display_name": "Joshua Arnold", "link": "https://stackoverflow.com/users/7391812/joshua-arnold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 501, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487194095, "creation_date": 1487182480, "question_id": 42257101, "link": "https://stackoverflow.com/questions/42257101/pthreads-c-program-hangs-at-execution", "title": "pthreads C program hangs at execution", "body": "<p>I'm writing a program that performs gaussian elimination given an A and B matrix. I first grab divisor and multipliers, create pthreads which execute in gauss function which perform their operations on a single 'column'. Then I call main which generates new divisor and multipliers and passes back for another round of operations by the same threads. Using condition pthread vars to accomplish this. </p>\n\n<p>The code hangs until I create a breakpoint which it then proceeds and finishes. Not sure what's holding it up. Could use some help. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n\n//Need one mutex variable and two condition variables (one c var for\n//communicating between threads, and one c var for communicating with main).\npthread_mutex_t mut = PTHREAD_MUTEX_INITIALIZER;\npthread_cond_t cond = PTHREAD_COND_INITIALIZER;\npthread_cond_t condM = PTHREAD_COND_INITIALIZER;\nfloat arr[3][4] = {{2,-3,1, -22},{7,9,-3, 14},{6,7,2,91}};\nfloat mults[3];\nfloat divisor;\nint num_items = 3;\n\nvoid* gauss(void *mine)\n{\n    int thread_count=0;\n    int x = *((int *)mine);\n\n    for(int i=0;i&lt;num_items;i++)\n    {\n        /*do something*/\n        arr[i][x] = arr[i][x] / divisor;\n\n        for(int k=0;k&lt;num_items;k++){\n            if(k!=i)\n                arr[k][x] -= mults[k] * arr[i][x];\n        }\n\n        /*lock || wait || signal*/\n        pthread_mutex_lock(&amp;mut);\n        thread_count++;\n        if(thread_count &lt; num_items)\n            pthread_cond_wait(&amp;cond,&amp;mut);\n        else\n        {\n            pthread_cond_signal(&amp;condM);\n            pthread_cond_wait(&amp;cond,&amp;mut);\n            thread_count = 0;\n        }\n        pthread_mutex_unlock(&amp;mut);\n    }\n\n    return NULL;\n}\n\nint main(int argc, const char * argv[]) {\n\n    int i, j;\n    pthread_t threadr[num_items+1];     /*thread id array */\n    int is[num_items+1];\n    printf(\"Test\");\n\n//    /*input num items*/\n//    printf(\"input the number of items \");\n//    scanf(\"%d\",&amp;num_items);\n//    \n//    /*input A array*/\n//    printf(\"input A array\\n\");\n//    for(i=0;i&lt;num_items;i++)\n//        for(j=0;j&lt;num_items;j++)\n//            scanf(\"%f\",&amp;arr[i][j]);\n//    \n//    /*input B array*/\n//    printf(\"input B array\\n\");\n//    for(i=0;i&lt;num_items;i++)\n//        scanf(\"%f\",&amp;arr[i][num_items]);\n\n    /*grab first divisor &amp; multipliers*/\n    divisor = arr[0][0];\n    for(i=0;i&lt;num_items;i++)\n    {\n        mults[i] = arr[i][0];\n    }\n\n    for(i=0;i&lt;num_items+1;i++)\n    {\n        is[i]=i;\n        if(pthread_create(&amp;threadr[i],NULL,gauss,(void *)&amp;is[i]) != 0)\n            perror(\"Pthread_create fails\");\n    }\n\n    for(i=1;i&lt;num_items;i++)\n    {\n\n        pthread_mutex_lock(&amp;mut);\n        pthread_cond_wait(&amp;condM,&amp;mut);\n\n        divisor = arr[i][i];\n        for(j=0;j&lt;num_items;j++)\n        {\n\n            mults[j] = 1;\n            if(j != i)\n                mults[j] = arr[j][i];\n        }\n        pthread_cond_broadcast(&amp;cond);\n        pthread_mutex_unlock(&amp;mut);\n    }\n\n    printf(\"The X values are:\\n\");\n    for(i=0;i&lt;num_items; i++) {\n        printf(\"%0.3f \\n\", arr[i][num_items]);\n    }\n\n    /*wait for all threads*/\n    for(i=0;i&lt;num_items+1; i++)\n        if (pthread_join(threadr[i],NULL) != 0)\n            perror(\"Pthread_join fails\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "printf", "extra"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 4, "creation_date": 1487182430, "post_id": 42257068, "comment_id": 71671891, "body": "Add <code>buffer[i] = &#39;\\0&#39;;</code> after the <code>while</code> loop to terminate the string."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487182681, "post_id": 42257068, "comment_id": 71672017, "body": "Also, <code>char  buffer[rest];</code> --&gt; <code>char  buffer[rest+1];</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487182763, "post_id": 42257068, "comment_id": 71672080, "body": "BTW: why <code>-1</code> in <code>size = ftell(fd)-1 ;</code>?"}], "owner": {"reputation": 467, "user_id": 7570636, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9139861a6db83a790e8c069331d9bf9?s=128&d=identicon&r=PG&f=1", "display_name": "AwesomeGuy", "link": "https://stackoverflow.com/users/7570636/awesomeguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487182338, "creation_date": 1487182338, "question_id": 42257068, "link": "https://stackoverflow.com/questions/42257068/c-fprintf-adds-extra-string", "title": "c fprintf adds extra string", "body": "<p>I'm trying to make a program that adds the string I want in the position I want in a file. When running the program it must be called like this:\n<strong>./addString file_name position text</strong></p>\n\n<p>for example if I have a file that contains 123456789 and I add \"hello\" in position 3 the new file's content is 123hello456789 (position starts counting from 0). The problem comes when I try to add the new string in positions 0 and 9. It adds it correctly but at the end it also adds an extra string like ^G or ^Y\u00cd6 and I don't know why.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nmain (int argc, char * argv[]){\n    if(argc == 4){\n\n            FILE *fd;\n            long size, rest;\n            char c;\n\n            fd = fopen(argv[1], \"r+\");\n\n            fseek(fd, 0, SEEK_END);\n            size = ftell(fd)-1 ;\n\n            rest = size - atoi(argv[2]);\n\n            char  buffer[rest];\n            fseek(fd, atoi(argv[2]), SEEK_SET);\n\n            int i = 0;\n            while(i &lt; rest){\n                    c=fgetc(fd);\n                    buffer[i] = c;\n                    i++;\n\n            }\n            fseek(fd, atoi(argv[2]), SEEK_SET);\n\n            fprintf(fd, \"%s\", argv[3]);\n            fprintf(fd, \"%s\", buffer);\n\n            fclose( fd );\n\n     }\n\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets", "udp", "recvfrom"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1487330599, "post_id": 42256478, "comment_id": 71748095, "body": "Yes. You can send zero-length datagrams with UDP."}, {"owner": {"reputation": 41, "user_id": 7434748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e69ece0657ee993d0ec496a62f81cb0?s=128&d=identicon&r=PG&f=1", "display_name": "user7434748", "link": "https://stackoverflow.com/users/7434748/user7434748"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1487369080, "post_id": 42256478, "comment_id": 71771365, "body": "@EJP How? <code>recvfrom()</code> never blocks on zero-lengths, and attempting to send empty package using for example <code>cat &#47;dev&#47;null | nc -u 127.0.0.1 1234</code> with <code>recvfrom()</code> in busy waiting does nothing."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1487452227, "post_id": 42256478, "comment_id": 71794619, "body": "With <code>send()</code>, or <code>sendto()</code>, supplying a zero length parameter. <code>recvfrom()</code> will block until a datagram is received or an error occurs."}, {"owner": {"reputation": 41, "user_id": 7434748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e69ece0657ee993d0ec496a62f81cb0?s=128&d=identicon&r=PG&f=1", "display_name": "user7434748", "link": "https://stackoverflow.com/users/7434748/user7434748"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1487583582, "post_id": 42256478, "comment_id": 71833905, "body": "@EJP <code>recvfrom()</code> in my case never blocks and always returns zero."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1487335546, "last_edit_date": 1487335546, "creation_date": 1487335013, "answer_id": 42298166, "question_id": 42256478, "link": "https://stackoverflow.com/questions/42256478/receiving-empty-payload-with-recvfrom-when-using-sock-dgram/42298166#42298166", "title": "Receiving empty payload with recvfrom when using SOCK_DGRAM?", "body": "<p>0-sized datagrams are perfectly valid from socket API perspective and at least protocols IP, UDP, UNIX: one can send and receive them.</p>\n"}], "owner": {"reputation": 41, "user_id": 7434748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e69ece0657ee993d0ec496a62f81cb0?s=128&d=identicon&r=PG&f=1", "display_name": "user7434748", "link": "https://stackoverflow.com/users/7434748/user7434748"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 319, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487335546, "creation_date": 1487180417, "last_edit_date": 1487184470, "question_id": 42256478, "link": "https://stackoverflow.com/questions/42256478/receiving-empty-payload-with-recvfrom-when-using-sock-dgram", "title": "Receiving empty payload with recvfrom when using SOCK_DGRAM?", "body": "<p>Is it possible to receive any empty payload with <a href=\"https://linux.die.net/man/2/recvfrom\" rel=\"nofollow noreferrer\"><code>recvfrom()</code></a> with <code>SOCK_DGRAM</code> based socket? The server is only interested in the client header to send it back a message (i.e. single message, send only protocol).</p>\n"}, {"tags": ["c", "list", "pointers", "linked-list", "reverse"], "comments": [{"owner": {"reputation": 32098, "user_id": 124319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVhrR.jpg?s=128&g=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/124319/coredump"}, "edited": false, "score": 0, "creation_date": 1487181873, "post_id": 42256344, "comment_id": 71671537, "body": "When you describe a problem, you cannot just say &quot;it does not work&quot;; it is better if you are more precise: here is what I did, the expected output is X but I have Y (alternatively: there is a crash with error message Z). Maybe the actual bug lies in the way you test your function."}, {"owner": {"reputation": 32098, "user_id": 124319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVhrR.jpg?s=128&g=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/124319/coredump"}, "edited": false, "score": 0, "creation_date": 1487182001, "post_id": 42256344, "comment_id": 71671609, "body": "See also <code>last = last-&gt;prev</code>: would it make sense to have <code>last = tmp</code> instead?"}, {"owner": {"reputation": 30, "user_id": 7570211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593cf60debeb732430c083724a12ef06?s=128&d=identicon&r=PG", "display_name": "RUsl", "link": "https://stackoverflow.com/users/7570211/rusl"}, "reply_to_user": {"reputation": 32098, "user_id": 124319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVhrR.jpg?s=128&g=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/124319/coredump"}, "edited": false, "score": 0, "creation_date": 1487182707, "post_id": 42256344, "comment_id": 71672036, "body": "@coredump sorry if I can&#39;t be more specific but this function is used as a module in a program and I can&#39;t control the rest of the program. Anyway I get no errors or crash, but the task of the functions is to invert the direction of the snake by reversing all elements and changing the head of the list.  last-&gt;prev has the address of last-&gt;next cause we switched them.  tmp has last-&gt;prev. So they are different"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487183305, "post_id": 42256344, "comment_id": 71672381, "body": "You should make an exception where <code>next</code> or <code>prev</code> are the end markers, and set <code>head</code> and <code>tail</code>. But can you side-step the problem by setting a flag to tell you in which direction the list is to be parsed? Head to tail, or tail to head. To reverse direction, you would invert the flag. Job done."}], "answers": [{"comments": [{"owner": {"reputation": 30, "user_id": 7570211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593cf60debeb732430c083724a12ef06?s=128&d=identicon&r=PG", "display_name": "RUsl", "link": "https://stackoverflow.com/users/7570211/rusl"}, "edited": false, "score": 0, "creation_date": 1487182418, "post_id": 42256845, "comment_id": 71671878, "body": "I tried but he doesn&#39;t work.  Teorically in the last line of the while loop last-&gt;prev has the address of last-&gt;next, so it&#39;s right to use last-&gt;prev to move to next element of the list"}], "tags": [], "owner": {"reputation": 52, "user_id": 7524986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/281f326aa6b6a02e2281c56acc660393?s=128&d=identicon&r=PG&f=1", "display_name": "Rick de Gier", "link": "https://stackoverflow.com/users/7524986/rick-de-gier"}, "is_accepted": false, "score": 0, "last_activity_date": 1487181633, "creation_date": 1487181633, "answer_id": 42256845, "question_id": 42256344, "link": "https://stackoverflow.com/questions/42256344/reverse-double-linked-list/42256845#42256845", "title": "Reverse double linked list", "body": "<p>I am not sure but I think that the last line of code in your while loop is wrong. As I understand the last variable is the tail of the snake. That means that last->next = null. In the second line of code in your while you make the previous of last null and in the last line of code in the while the last becomes 0. I think that changing your last line of code in the while loop will change this.</p>\n\n<pre><code>last = last-&gt;next\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 30, "user_id": 7570211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593cf60debeb732430c083724a12ef06?s=128&d=identicon&r=PG", "display_name": "RUsl", "link": "https://stackoverflow.com/users/7570211/rusl"}, "edited": false, "score": 0, "creation_date": 1487183640, "post_id": 42257260, "comment_id": 71672608, "body": "Thank you for the answer but nothing to do, the snake still gets stuck in the game when i call this function. Then i think something is wrong.  For a little debug these are the address of the elements: Before the loop  *s = 16595408  *s-&gt;next = 16595360  *s-&gt;prev =  0  After the *s = newHead  *s =  16595408  *s-&gt;next = 0  *s-&gt;prev = 1659536"}], "tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 0, "last_activity_date": 1487183021, "creation_date": 1487183021, "answer_id": 42257260, "question_id": 42256344, "link": "https://stackoverflow.com/questions/42256344/reverse-double-linked-list/42257260#42257260", "title": "Reverse double linked list", "body": "<p>You're never setting the new head of the list since tmp is always NULL after the while loop.  Try this;</p>\n\n<pre><code>void snake_reverse(struct snake **s) {\n  struct snake *last, *newHead, *tmp = NULL;\n\n  last = *s;\n\n  while (last !=  NULL)\n  {\n     tmp = last-&gt;prev;\n     if (tmp!=NULL)\n       newHead = tmp;\n     last-&gt;prev = last-&gt;next;\n     last-&gt;next = tmp;\n     last = last-&gt;prev;\n  }\n\n  *s = newHead;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 30, "user_id": 7570211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593cf60debeb732430c083724a12ef06?s=128&d=identicon&r=PG", "display_name": "RUsl", "link": "https://stackoverflow.com/users/7570211/rusl"}, "edited": false, "score": 0, "creation_date": 1487184230, "post_id": 42257451, "comment_id": 71672989, "body": "Thanks, this really reverse the elements ( i checked the address of the elements and they are reversed) but the snake in the game still gets stuck when it calls this function. So i think it&#39;s not my fault and the problem is in another function"}, {"owner": {"reputation": 30, "user_id": 7570211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593cf60debeb732430c083724a12ef06?s=128&d=identicon&r=PG", "display_name": "RUsl", "link": "https://stackoverflow.com/users/7570211/rusl"}, "edited": false, "score": 0, "creation_date": 1487185859, "post_id": 42257451, "comment_id": 71673932, "body": "The problem was in another module of the program, not made by me.  Anyway this seems the best solution and worked"}], "tags": [], "owner": {"reputation": 17700, "user_id": 50902, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19d468858e7d32da4a5bb6e49394fd52?s=128&d=identicon&r=PG", "display_name": "kmkaplan", "link": "https://stackoverflow.com/users/50902/kmkaplan"}, "is_accepted": true, "score": 1, "last_activity_date": 1487183649, "creation_date": 1487183649, "answer_id": 42257451, "question_id": 42256344, "link": "https://stackoverflow.com/questions/42256344/reverse-double-linked-list/42257451#42257451", "title": "Reverse double linked list", "body": "<p>You have to set <code>*s</code> to the new head of the list. That is the old tail of the list, the last element you process.</p>\n\n<pre><code>void snake_reverse(struct snake **s) {\n    struct snake *last, *tmp = NULL;\n    last = *s;\n    while (last !=  NULL) {\n        *s = last\n        tmp = last-&gt;prev;\n        last-&gt;prev = last-&gt;next;\n        last-&gt;next = tmp;\n        last = last-&gt;prev;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 30, "user_id": 7570211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593cf60debeb732430c083724a12ef06?s=128&d=identicon&r=PG", "display_name": "RUsl", "link": "https://stackoverflow.com/users/7570211/rusl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 42257451, "answer_count": 3, "score": 0, "last_activity_date": 1487185793, "creation_date": 1487179928, "last_edit_date": 1487185793, "question_id": 42256344, "link": "https://stackoverflow.com/questions/42256344/reverse-double-linked-list", "title": "Reverse double linked list", "body": "<p>I have to write a function to reverse a double linked list, so that the tail becomes the head.</p>\n\n<p>For example, the elements before:\n{(1,1), (1,2), (2,2), (2,3)}</p>\n\n<p>after:\n   {(2,3), (2,2), (1,2), (1,1)}</p>\n\n<p>Here's the structure:</p>\n\n<pre><code>  struct snake {\n    unsigned int i;\n    unsigned int j;\n    struct snake *next;\n    struct snake *prev;\n  };\n</code></pre>\n\n<p>This is the function prototipe I must use:</p>\n\n<pre><code>void snake_reverse(struct snake **s);\n</code></pre>\n\n<p>I tried something like this and several other attempts</p>\n\n<pre><code>void snake_reverse(struct snake **s) {\nstruct snake *last, *tmp = NULL;\n\nlast = *s;\n\nwhile (last !=  NULL)\n {\n   tmp = last-&gt;prev;\n   last-&gt;prev = last-&gt;next;\n   last-&gt;next = tmp;\n   last = last-&gt;prev;\n }\n\n if(tmp != NULL )\n    *s = tmp-&gt;prev;\n}\n</code></pre>\n\n<p>Also tried this:</p>\n\n<pre><code>while (last !=  NULL)\n {\n   tmp = last-&gt;next;\n   last-&gt;next = last-&gt;prev;\n   last-&gt;prev = tmp;\n   last = tmp;\n }\n\n if(tmp != NULL )\n    *s = tmp;\n</code></pre>\n\n<p>but he doesn't work. I'm almost sure I'm not wrong.\nThe first ->prev of the list is NULL, the last ->next of the list is NULL.</p>\n\n<p>I get no errors or crash, but the task of the function is to invert the direction of the snake by reversing all elements and changing the head of the list.\nCan you say what's wrong here?</p>\n\n<p>EDIT: The problem was in another module of the program not made by me.</p>\n\n<p>Anyway the best solution is that of kmkaplan. Thanks everybody</p>\n"}, {"tags": ["c", "greedy", "cs50"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1487179677, "post_id": 42256121, "comment_id": 71670142, "body": "<code>quantity &gt; 25</code> --&gt; <code>quantity &gt;= 25</code>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1487179685, "post_id": 42256121, "comment_id": 71670149, "body": "What output do you get for 0.25?"}, {"owner": {"reputation": 30, "user_id": 7360321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XMJWs.jpg?s=128&g=1", "display_name": "Togeri", "link": "https://stackoverflow.com/users/7360321/togeri"}, "edited": false, "score": 0, "creation_date": 1487184559, "post_id": 42256121, "comment_id": 71673202, "body": "1! Right now solved! Thank you very much!"}], "answers": [{"comments": [{"owner": {"reputation": 30, "user_id": 7360321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XMJWs.jpg?s=128&g=1", "display_name": "Togeri", "link": "https://stackoverflow.com/users/7360321/togeri"}, "edited": false, "score": 1, "creation_date": 1487182921, "post_id": 42256458, "comment_id": 71672173, "body": "Oh, I see!!!! Thank you so much @YePhIcK!!   I understand where the problem is. Very gently explained! I really appreciate it!"}], "tags": [], "owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "is_accepted": true, "score": 1, "last_activity_date": 1487180327, "creation_date": 1487180327, "answer_id": 42256458, "question_id": 42256121, "link": "https://stackoverflow.com/questions/42256121/cs50-pset1-greedy-challenge/42256458#42256458", "title": "CS50 pset1 Greedy Challenge", "body": "<p>The problem is in your very first comparison that reads <code>(quantity &gt; 25)</code>. When you have a grand sum of $23 you expect <code>23 * 4 = 92 coins</code>.</p>\n\n<p>However, when you have subtracted 91 of those quarters you end up with <code>(quantity == 25)</code> and the check fails (since the <code>quantity</code> is no longer <strong>strictly bigger</strong> than <code>25</code> but is equal to it), pushing you through into 2 dimes and then into the last nickel, making it a displayed 94 coins.</p>\n\n<p>The fix is (you should have guessed it by now) to replace that check with <code>(quantity &gt;= 25)</code></p>\n"}], "owner": {"reputation": 30, "user_id": 7360321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XMJWs.jpg?s=128&g=1", "display_name": "Togeri", "link": "https://stackoverflow.com/users/7360321/togeri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7488, "favorite_count": 1, "accepted_answer_id": 42256458, "answer_count": 1, "score": 0, "last_activity_date": 1522718254, "creation_date": 1487179206, "question_id": 42256121, "link": "https://stackoverflow.com/questions/42256121/cs50-pset1-greedy-challenge", "title": "CS50 pset1 Greedy Challenge", "body": "<p>I'm a bit ashamed for asking this silly question here, but the fact is, I've tried everything and I still can't see where the error is. </p>\n\n<p>I'm 101% noob as regards programming, and I've enrolled in CS50. I'm trying to get the best out of it, so I'm taking the less comfortable challenges always so as to try and learn the most. </p>\n\n<p>I've finished my code for the Greedy Challenge in CS50's pset1. I've squished my mind in order to get it as good, clean and simple as my humble knowledge allows me to, but I keep getting prompted just one error every time I check my code. </p>\n\n<p>Hereby I attach both, the code check and my wirtten code:</p>\n\n<p>Checked code by CS50 terminal script:</p>\n\n<p><code>:) greedy.c exists\n :) greedy.c compiles\n :) input of 0.41 yields output of 4\n :) input of 0.01 yields output of 1\n :) input of 0.15 yields output of 2\n :) input of 1.6 yields output of 7\n :( input of 23 yields output of 92\n    \\ expected output, but not \"94\\n\"\n :) input of 4.2 yields output of 18\n :) rejects a negative input like -.1\n :) rejects a non-numeric input of \"foo\"\n :) rejects a non-numeric input of \"\"</code></p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;math.h&gt;\n\nfloat change;\n\nint coins = 0;\nint quantity;\n\nint main (void)\n{\ndo \n{\n    printf(\"O hai! How much change is owed?\\n\");\n    change = get_float();\n}\nwhile (change &lt; 0);\n\n\n\n//converting float change (dollars) into integer change (cents)\n\n quantity = round(change * 100.00);\n\n\n\nwhile (quantity &gt; 25) //This runs as long as quantity left is bigger than a quarter coin\n{\n    quantity -= 25;\n    coins++;\n}\nwhile (quantity &gt;= 10) //This runs as long as quantity left is bigger than a dime coin\n{\n    quantity -= 10;\n    coins++;\n}\nwhile (quantity &gt;= 5) //This runs as long as quantity left is bigger than a nickel coin\n{\n    quantity -= 5;\n    coins++;\n    }\nwhile (quantity &gt;= 1) //This runs as long as quantity left is bigger than 0\n{\n    quantity -= 1;\n    coins++;\n}\n\n\nprintf(\"%i\\n\", coins);\n}`\n</code></pre>\n\n<p><strong>Disclaimer</strong>: I want to point out that I'm perfectly aware of Harvard's Code of Honesty. I'm not trying to get an easy solution for a problem and just get rid of this challenge. </p>\n\n<p>I'm hoping for someone to take his or her own time and write down an explanation that enlightens me and helps me understand the <strong>whys</strong> of my code failure. \nI don't seek any answer, and you don't have to point it out if you don't feel like so.\nI'm just an inexperienced beginner student in CS who's willing to read all your answers and finally gets to understand why something that's supposed to work isn't working at all.</p>\n\n<p>Thank you very much for your patience and time! </p>\n"}, {"tags": ["c", "process", "parent-child", "semaphore"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 7501319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3b4fc4a95e3e19d4068d33fb9df369?s=128&d=identicon&r=PG&f=1", "display_name": "Mario Vassilev", "link": "https://stackoverflow.com/users/7501319/mario-vassilev"}, "edited": false, "score": 0, "creation_date": 1487180049, "post_id": 42256079, "comment_id": 71670397, "body": "So what you are saying is add a sem_post(sem) after the parrent process ?"}, {"owner": {"reputation": 17, "user_id": 7501319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3b4fc4a95e3e19d4068d33fb9df369?s=128&d=identicon&r=PG&f=1", "display_name": "Mario Vassilev", "link": "https://stackoverflow.com/users/7501319/mario-vassilev"}, "edited": false, "score": 0, "creation_date": 1487183263, "post_id": 42256079, "comment_id": 71672356, "body": "Something very bizarre occurred. I added a sem_post(sem) at the end of the parent and it worked once, then after that it went back to the wrong print where is ignoring wait and post."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 17, "user_id": 7501319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3b4fc4a95e3e19d4068d33fb9df369?s=128&d=identicon&r=PG&f=1", "display_name": "Mario Vassilev", "link": "https://stackoverflow.com/users/7501319/mario-vassilev"}, "edited": false, "score": 0, "creation_date": 1487191511, "post_id": 42256079, "comment_id": 71677038, "body": "You&#39;re not checking the return value of <code>sem_open</code>, do that first - and the <code>sem_open</code> call that I&#39;ve found has 4 arguments (linux man)"}, {"owner": {"reputation": 17, "user_id": 7501319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3b4fc4a95e3e19d4068d33fb9df369?s=128&d=identicon&r=PG&f=1", "display_name": "Mario Vassilev", "link": "https://stackoverflow.com/users/7501319/mario-vassilev"}, "edited": false, "score": 0, "creation_date": 1487198854, "post_id": 42256079, "comment_id": 71680755, "body": "This is how I am trying to check for the return value:  <code>sem_unlink(mySem); sem_t * sem; sem = sem_open(&quot;mySem&quot;, 0_CREAT, S_IRUSR | S_IWUSR,3); if(sem == SEM_FAILED){ perror(&quot;sem_open&quot;); exit(EXIT_FAILURE); }</code>  it still doesn&#39;t work though."}], "tags": [], "owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "is_accepted": false, "score": 0, "last_activity_date": 1487179080, "creation_date": 1487179080, "answer_id": 42256079, "question_id": 42255970, "link": "https://stackoverflow.com/questions/42255970/semaphore-not-working-properly/42256079#42256079", "title": "Semaphore not working properly", "body": "<p>in the parent : you create a semaphore, print a message and then wait for the semaphore.<br>\nin the child : you create a semaphore, print 2 messages, close the semaphone and exit.<br>\nnow the parent can return from the wait.</p>\n\n<p>See <a href=\"http://man7.org/linux/man-pages/man3/sem_wait.3.html\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man3/sem_wait.3.html</a> for a trivial example</p>\n"}], "owner": {"reputation": 17, "user_id": 7501319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3b4fc4a95e3e19d4068d33fb9df369?s=128&d=identicon&r=PG&f=1", "display_name": "Mario Vassilev", "link": "https://stackoverflow.com/users/7501319/mario-vassilev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 817, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487179080, "creation_date": 1487178792, "question_id": 42255970, "link": "https://stackoverflow.com/questions/42255970/semaphore-not-working-properly", "title": "Semaphore not working properly", "body": "<p>I am working on an assignment where we need to use semaphores in order to make the second print of the parent process wait until child executes first. It is first time using semaphores and I certainly understood how they work, however I think I have a problem with the initialising of sem_open(). </p>\n\n<p>By following this:</p>\n\n<pre><code>sem_t *sem_open(const char *name, int oflag);\n</code></pre>\n\n<p>I have created this:</p>\n\n<pre><code>sem_t *sem = sem_open(\"MYSEM\", O_CREAT , 2);\n</code></pre>\n\n<p>However, when executing my sem_wait are ignored.This is my whole program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;semaphore.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n\n\n/* void ChildProcess(void)  ChildProcess prototype */\n/* void ParentProcess(void)  ParentProcess prototype */\n\nint main(int argc, char ** argv){\n\nint pid;\npid = fork();\n\nsem_t *sem = sem_open(\"MYSEM\", O_CREAT , 2);\n\nif (pid&lt;0)\n{\n    printf(\"Cannot create a child process\");\n    exit(EXIT_FAILURE);\n}\nelse if (pid==0)\n{\n    printf(\"I am the child process. \\n\");\n    printf(\"The child process is done. \\n\");\n    sem_post(sem);\n    exit(EXIT_SUCCESS);\n}\n    else\n{\n    printf(\"I am the parent process. \\n\");\n    sem_wait(sem);\n    printf(\"The parent process is done. \\n\");\n}\nsem_destroy(sem);\nexit (EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>and what is printing is:</p>\n\n<pre><code>I am the parent process. \nThe parent process is done. \nI am the child process. \nThe child process is done.\n</code></pre>\n\n<p>and what should print is this:</p>\n\n<pre><code>I am the parent process.\nI am the child process. \nThe child process is done.\nThe parent process is done. \n</code></pre>\n"}, {"tags": ["c", "operator-precedence"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1487177883, "post_id": 42255570, "comment_id": 71668859, "body": "<a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">Yes, and then some</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 6, "creation_date": 1487177926, "post_id": 42255570, "comment_id": 71668891, "body": "<code>*</code>, <code>&#47;</code>, <code>%</code> are of equal precedence.  Evaluate left to right"}, {"owner": {"reputation": 45, "user_id": 7429954, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-7W6_18sCbOI/AAAAAAAAAAI/AAAAAAAAACc/dGUE4t2xQio/photo.jpg?sz=128", "display_name": "AkShay Mahajan", "link": "https://stackoverflow.com/users/7429954/akshay-mahajan"}, "edited": false, "score": 0, "creation_date": 1487178008, "post_id": 42255570, "comment_id": 71668959, "body": "What about BODMAS rule?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1487178273, "post_id": 42255570, "comment_id": 71669150, "body": "What about it? BODMAS doesn&#39;t imply that division has a different precedence than multiplication (yes, I am aware of all of these facebook holywars and it is pissing me off)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1487178310, "post_id": 42255570, "comment_id": 71669186, "body": "@StoryTeller &quot;Yes&quot; is a wrong answer (to the second question).."}, {"owner": {"reputation": 1036, "user_id": 4990460, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/mNQ16.png?s=128&g=1", "display_name": "A user", "link": "https://stackoverflow.com/users/4990460/a-user"}, "edited": false, "score": 0, "creation_date": 1487178909, "post_id": 42255570, "comment_id": 71669598, "body": "@AkShayMahajan This link might help you. Its more about C++  and you can find an answer for C too. <a href=\"http://stackoverflow.com/questions/4017954/expression-evaluation-in-c-c-doesnt-follow-bodmas-rule\" title=\"expression evaluation in c c doesnt follow bodmas rule\">stackoverflow.com/questions/4017954/&hellip;</a>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487181121, "post_id": 42255570, "comment_id": 71671089, "body": "@EugeneSh. Good thing I answered the first then."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487184315, "post_id": 42256340, "comment_id": 71673045, "body": "Note: <code>%</code> is better called the <i>remainder</i> operator as <i>modulus</i>, which has various math definitions concerning negative operands, is not defined in C.  Informative answer about BODMAS."}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 5, "last_activity_date": 1487189232, "last_edit_date": 1487189232, "creation_date": 1487179912, "answer_id": 42256340, "question_id": 42255570, "link": "https://stackoverflow.com/questions/42255570/multiplication-vs-division-in-c/42256340#42256340", "title": "Multiplication vs Division in C", "body": "<p>Multiplication, division, and remainder have the same precedence, and associate left-to-right.</p>\n\n<p>For example, <code>x * y / z</code> is the same as <code>(x * y) / z</code> and<br>\n<code>x / y * z</code> is the same as <code>(x / y) * z</code>.</p>\n\n<p>Whether this matches the BODMAS rule seems to be a matter of some controversy, but that's a question about the meaning of BODMAS, not about the semantics of C. The linked <a href=\"https://en.wikipedia.org/wiki/Order_of_operations#Mnemonics\" rel=\"nofollow noreferrer\">Wikipedia article</a> says that \"multiplication and division are of equal precedence\", which is consistent with C (except that it doesn't mention C's remainder operator <strong><code>%</code></strong>).</p>\n\n<p>The <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a> (the link is to the N1570 draft of C11) doesn't directly define \"operator precedence\". Instead, it defines the hierarchical syntax of expressions. For example, the syntax for a <em>multiplicative-expression</em> (defined in section 6.5.5) is:</p>\n\n<blockquote>\n  <p><em>multiplicative-expression</em>:<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>cast-expression</em><br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>multiplicative-expression</em> <strong><code>*</code></strong> <em>cast-expression</em><br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>multiplicative-expression</em> <strong><code>/</code></strong> <em>cast-expression</em><br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>multiplicative-expression</em> <strong><code>%</code></strong> <em>cast-expression</em></p>\n</blockquote>\n\n<p>A <em>cast-expression</em> (6.5.4) may or may not include a cast operator; it's any expression that can appear as a term in a <em>multiplicative-expression</em>.</p>\n"}], "owner": {"reputation": 45, "user_id": 7429954, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-7W6_18sCbOI/AAAAAAAAAAI/AAAAAAAAACc/dGUE4t2xQio/photo.jpg?sz=128", "display_name": "AkShay Mahajan", "link": "https://stackoverflow.com/users/7429954/akshay-mahajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487189232, "creation_date": 1487177785, "last_edit_date": 1487179447, "question_id": 42255570, "link": "https://stackoverflow.com/questions/42255570/multiplication-vs-division-in-c", "title": "Multiplication vs Division in C", "body": "<p>Does C follow <a href=\"https://en.wikipedia.org/wiki/Order_of_operations#Mnemonics\" rel=\"nofollow noreferrer\">BODMAS rule</a>? I am confused with multiplication and division. </p>\n\n<p>Does multiplication has higher precedence over division or it is other way round?</p>\n"}, {"tags": ["c", "gcc", "memory-alignment"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1487177868, "post_id": 42255481, "comment_id": 71668844, "body": "<code>... for space optimization,</code> To start with: don&#39;t use bool. And put the bool&amp;char fields at adjacent positions, so that they will only need alignment just once."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487178136, "post_id": 42255481, "comment_id": 71669044, "body": "I assume this is for an embedded system, or you really would not have to save just a few bytes, even if you create millions of the structures. As for your problem, do the <code>other_struct</code> <i>have</i> to follow directly after the packed structure? Why not put it at a nicely aligned address after the packed structure? Then the padding will be the empty space between the two structures."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487178191, "post_id": 42255481, "comment_id": 71669086, "body": "Oh and another thing, you probably put the <code>other_structure</code> at <code>0x200B</code> right? Otherwise you have an overlap."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487178348, "post_id": 42255481, "comment_id": 71669219, "body": "Add a pad bye manually?"}, {"owner": {"reputation": 1336, "user_id": 968772, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rQIIp.jpg?s=128&g=1", "display_name": "joetde", "link": "https://stackoverflow.com/users/968772/joetde"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487185286, "post_id": 42255481, "comment_id": 71673636, "body": "@Someprogrammerdude yes it&#39;s for an embedded system, and yes you&#39;re right, it 0x200B. other_struct has to follow the other structure (basically header/payload). Also, I don&#39;t want to put the burden on the writer to align the structures."}, {"owner": {"reputation": 739, "user_id": 7453308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fab68a8d04cc8d75b37d3ae6e31dc13?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7453308/alex"}, "edited": false, "score": 0, "creation_date": 1487190353, "post_id": 42255481, "comment_id": 71676421, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2554229/memory-alignment-within-gcc-structs\">memory alignment within gcc structs</a>"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487195134, "post_id": 42260509, "comment_id": 71678940, "body": "You should replace <code>3</code> with <code>sizeof(int) - 1</code>  (or whatever the source of 3 is)"}, {"owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487195438, "post_id": 42260509, "comment_id": 71679119, "body": "Yes - 3 is sizeof(int)-1. int could be replaced there with other types too - but the question was about 4 byte alignment."}], "tags": [], "owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "is_accepted": false, "score": 1, "last_activity_date": 1487194479, "creation_date": 1487194479, "answer_id": 42260509, "question_id": 42255481, "link": "https://stackoverflow.com/questions/42255481/aligning-at-the-end-of-a-packed-struct/42260509#42260509", "title": "Aligning at the end of a packed struct", "body": "<p>What about this trick</p>\n\n<pre><code>union __attribute__ ((packed)) struct_union\n{\n    struct my_packed_struct data;\n    int pad[(sizeof(my_packed_struct)+3)/sizeof(int)];\n} struct_union;\n</code></pre>\n\n<p>and use struct_union instead of my_packed_struct directly?</p>\n\n<p>Why it will work?</p>\n\n<ol>\n<li>union is packed so it will not be extra padded</li>\n<li>pad will always be multiple of 4 (because of int)</li>\n<li>sizeof calculation will make sure it is big enough to hold whole my_packed_struct</li>\n</ol>\n"}], "owner": {"reputation": 1336, "user_id": 968772, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rQIIp.jpg?s=128&g=1", "display_name": "joetde", "link": "https://stackoverflow.com/users/968772/joetde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1487196983, "creation_date": 1487177605, "last_edit_date": 1495541363, "question_id": 42255481, "link": "https://stackoverflow.com/questions/42255481/aligning-at-the-end-of-a-packed-struct", "title": "Aligning at the end of a packed struct", "body": "<p>Is there anyway to make gcc pad only at the end of a packed structure?</p>\n\n<p>I am using a packed structure for space optimization, but also use that struct to compute memory offsets (storing multiple structs in a buffer). Therefore if the total size of my struct is not aligned (not a multiple of 4 let's say), if I try to access the following struct in my buffer I will get a SIGBUS.</p>\n\n<p>E.g.</p>\n\n<pre><code>sizeof(my_packed_struct) == 11\nsizeof(other_struct) == 12\n</code></pre>\n\n<p>If I put a my_packed_struct at address 0x2000, I would also put other_struct at 0x200B (+11 bytes).</p>\n\n<p>So if I want to access the other_struct, e.g. (other_struct*)0x200B, I would get a SIGBUS.</p>\n\n<p>So I'm curious if there's a way to make GCC pad the structure to avoid this problem.</p>\n\n<p>Here is the definition:</p>\n\n<pre><code>typedef struct __attribute__ ((packed)) my_packed_struct {\n    uint8_t att1;\n    bool att2;\n    uint32_t att3;\n    uint32_t att4;\n    bool att5;\n} my_packed_struct;\n</code></pre>\n\n<p>I could just add an attribute like</p>\n\n<pre><code>typedef struct __attribute__ ((packed)) my_packed_struct {\n    uint8_t att1;\n    bool att2;\n    uint32_t att3;\n    uint32_t att4;\n    bool att5;\n    uint8_t pad;\n} my_packed_struct;\n</code></pre>\n\n<p>To make sure to match to size 12, but I'm looking for a solution where I wouldn't have to compute the size and pad manually (e.g. if I have to add another attribute in the future).</p>\n\n<p>I had a look at <a href=\"https://stackoverflow.com/questions/2554229/memory-alignment-within-gcc-structs\">memory alignment within gcc structs</a>, I do store the struct in a buffer internally, but I still need to expose a struct for convenience and client use.</p>\n"}, {"tags": ["c", "video", "ffmpeg", "mp4"], "comments": [{"owner": {"reputation": 27067, "user_id": 210785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a561cd4d29738e18d9e565a6265d86ac?s=128&d=identicon&r=PG", "display_name": "szatmary", "link": "https://stackoverflow.com/users/210785/szatmary"}, "edited": false, "score": 0, "creation_date": 1487217044, "post_id": 42255377, "comment_id": 71686129, "body": "Google &#39;ffmpeg dranger&#39;"}, {"owner": {"reputation": 620, "user_id": 6180077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJGsl.jpg?s=128&g=1", "display_name": "Abdullah Farweez", "link": "https://stackoverflow.com/users/6180077/abdullah-farweez"}, "edited": false, "score": 0, "creation_date": 1499322893, "post_id": 42255377, "comment_id": 76858483, "body": "visit here to create mp4 video using c++ <a href=\"https://stackoverflow.com/a/43464269/6180077\">stackoverflow.com/a/43464269/6180077</a>"}, {"owner": {"reputation": 422, "user_id": 613253, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/wnDxZ.png?s=128&g=1", "display_name": "Mockarutan", "link": "https://stackoverflow.com/users/613253/mockarutan"}, "edited": false, "score": 0, "creation_date": 1516289603, "post_id": 42255377, "comment_id": 83635101, "body": "I&#39;m trying to do something similar, did you find any answer?"}], "owner": {"reputation": 3179, "user_id": 1774679, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a33ac21cad99e52af9e64da8a0ce21eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jerikc XIONG", "link": "https://stackoverflow.com/users/1774679/jerikc-xiong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 471, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1487177344, "creation_date": 1487177344, "last_edit_date": 1495535379, "question_id": 42255377, "link": "https://stackoverflow.com/questions/42255377/how-to-concatenate-two-mp4-files-using-ffmpeg-c-code", "title": "How to concatenate two mp4 files using ffmpeg C code?", "body": "<p>I found many links about concatenating multiple mp4 files using ffmpeg command on shell environment. Such as:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/7333232/concatenate-two-mp4-files-using-ffmpeg\">Concatenate two mp4 files using ffmpeg</a></p>\n\n<p>But I didn't find any information about using C code. There are some code snippet, but it seems not working.</p>\n\n<pre><code>static int setargs(char *args, char **argv)\n{\n    int count = 0;\n\n    while (isspace(*args)) ++args;\n    while (*args) {\n        if (argv) argv[count] = args;\n        while (*args &amp;&amp; !isspace(*args)) ++args;\n        if (argv &amp;&amp; *args) *args++ = '\\0';\n        while (isspace(*args)) ++args;\n        count++;\n    }\n    return count;\n}\n\nchar **parsedargs(char *args, int *argc)\n{\n    char **argv = NULL;\n    int    argn = 0;\n\n    if (args &amp;&amp; *args\n        &amp;&amp; (args = strdup(args))\n        &amp;&amp; (argn = setargs(args,NULL))\n        &amp;&amp; (argv = malloc((argn+1) * sizeof(char *)))) {\n          *argv++ = args;\n          argn = setargs(args,argv);\n    }\n\n    if (args &amp;&amp; !argv) free(args);\n\n    *argc = argn;\n    return argv;\n}\n\nvoid freeparsedargs(char **argv)\n{\n    if (argv) {\n        free(argv[-1]);\n        free(argv-1);\n    }\n}\n\nint main()\n{\n    char **argv;\n    char *cmd;\n    int argc;\n\n    cmd = \"ffmpeg -i infile outfile\";\n    argv = parsedargs(cmd,&amp;argc);\n    ffmpeg(argc, argv);\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/2401764/can-ffmpeg-be-used-as-a-library-instead-of-a-standalone-program\">Can FFmpeg be used as a library, instead of a standalone program?</a></p>\n\n<p>How to do it by using ffmpeg C code ?</p>\n"}, {"tags": ["c", "struct", "malloc", "realloc"], "comments": [{"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 1, "creation_date": 1487177360, "post_id": 42255354, "comment_id": 71668439, "body": "First note: don&#39;t cast malloc return value. Second note: calling a variable <code>new</code> is not recommended. Where is <code>name</code> declared ? <code>strcpy(new-&gt;name, name);</code>"}, {"owner": {"reputation": 1088, "user_id": 3594299, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/RzXq5.png?s=128&g=1", "display_name": "Giedrius", "link": "https://stackoverflow.com/users/3594299/giedrius"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1487177399, "post_id": 42255354, "comment_id": 71668476, "body": "Will change that, I was just following notes from my Uni lectures"}, {"owner": {"reputation": 7990, "user_id": 4806357, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/KlW5A.jpg?s=128&g=1", "display_name": "Jarvis", "link": "https://stackoverflow.com/users/4806357/jarvis"}, "edited": false, "score": 0, "creation_date": 1487177542, "post_id": 42255354, "comment_id": 71668585, "body": "Can you give some input and exact line where you are getting the error using <code>gdb</code> ?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1487177583, "post_id": 42255354, "comment_id": 71668608, "body": "<code>sizeof(struct StationContainer) + 1000000</code> makes no sense in <code>malloc()</code>/<code>realloc()</code> as you want the amount of memory allocated to be multiple sizes of <code>struct StationContainer</code> - did you mean to write <code>sizeof(struct StationContainer) * 1000000</code>"}, {"owner": {"reputation": 1088, "user_id": 3594299, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/RzXq5.png?s=128&g=1", "display_name": "Giedrius", "link": "https://stackoverflow.com/users/3594299/giedrius"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1487177723, "post_id": 42255354, "comment_id": 71668714, "body": "@ChrisTurner no, + 1000000 is just for debugging, showing that when I allocate memory in the first place it works, but when I try to reallocate it doesn&#39;t work. In the first place yes, it will be <code>sizeof(struct(Station)) * numberOfStations</code>"}, {"owner": {"reputation": 1088, "user_id": 3594299, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/RzXq5.png?s=128&g=1", "display_name": "Giedrius", "link": "https://stackoverflow.com/users/3594299/giedrius"}, "reply_to_user": {"reputation": 7990, "user_id": 4806357, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/KlW5A.jpg?s=128&g=1", "display_name": "Jarvis", "link": "https://stackoverflow.com/users/4806357/jarvis"}, "edited": false, "score": 0, "creation_date": 1487177766, "post_id": 42255354, "comment_id": 71668751, "body": "@Jarvis sorry I am new to this and not familiar with how to use gdb. And the cut down version code I have provided will show the crash without any input"}, {"owner": {"reputation": 7990, "user_id": 4806357, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/KlW5A.jpg?s=128&g=1", "display_name": "Jarvis", "link": "https://stackoverflow.com/users/4806357/jarvis"}, "edited": false, "score": 0, "creation_date": 1487177852, "post_id": 42255354, "comment_id": 71668825, "body": "It doesn&#39;t when I manually allocate memory to <code>name</code> like this : <code>char *name = malloc(100);</code> @Giedrius"}], "answers": [{"comments": [{"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1487177997, "post_id": 42255499, "comment_id": 71668949, "body": "Yes he did allocate. He&#39;s pointing to <code>new</code> with that pointer."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1487178082, "post_id": 42255499, "comment_id": 71669005, "body": "Eh? <code>name</code> is not declared. <code>new-&gt;name</code> has memory"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 1, "creation_date": 1487178155, "post_id": 42255499, "comment_id": 71669061, "body": "@Tony <code>container-&gt;stations</code> isn&#39;t defined though so you can&#39;t access any elements of it"}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1487178211, "post_id": 42255499, "comment_id": 71669101, "body": "I meant he allocated memory for <code>StationContainer</code>. For <code>Station</code> he indeed didn&#39;t. I&#39;ve pointed it out in comments."}, {"owner": {"reputation": 1088, "user_id": 3594299, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/RzXq5.png?s=128&g=1", "display_name": "Giedrius", "link": "https://stackoverflow.com/users/3594299/giedrius"}, "edited": false, "score": 0, "creation_date": 1487191263, "post_id": 42255499, "comment_id": 71676923, "body": "In my edited code the <code>container-&gt;stations</code> works fine, I can write and read at least 1 station from there. It&#39;s the <code>container-&gt;numberOfStations</code> that gets wildly big and therefore program runs out of memory."}], "tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": false, "score": 2, "last_activity_date": 1487178151, "last_edit_date": 1487178151, "creation_date": 1487177646, "answer_id": 42255499, "question_id": 42255354, "link": "https://stackoverflow.com/questions/42255354/c-dynamic-array-in-a-struct-crash-after-reallocation/42255499#42255499", "title": "C - dynamic array in a struct - crash after reallocation", "body": "<p>Well - look at </p>\n\n<pre><code>struct StationContainer {\n    int numberOfStations;\n    struct Station *stations[];\n};\n</code></pre>\n\n<p>So <code>stations</code> is pointer</p>\n\n<p>So <code>makeContainer</code> just gives it enough space for a pointer etc. You have not even allocated the memory for the pointer to have information nor initialised <code>numberOfStations</code>. It is just an uninitialised pointer</p>\n\n<p>PS: Does this compile</p>\n\n<pre><code>   strcpy(new-&gt;name, name);\n</code></pre>\n\n<p>Cannot find the declaration for <code>name</code></p>\n"}, {"comments": [{"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1487177852, "post_id": 42255553, "comment_id": 71668827, "body": "Good eyes. didn&#39;t notice you&#39;ve answered. :) deleted mine."}, {"owner": {"reputation": 1088, "user_id": 3594299, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/RzXq5.png?s=128&g=1", "display_name": "Giedrius", "link": "https://stackoverflow.com/users/3594299/giedrius"}, "edited": false, "score": 0, "creation_date": 1487177853, "post_id": 42255553, "comment_id": 71668828, "body": "Good spot, I accidentally deleted that when cut down the code for this preview. I will edit it now to show how it is."}, {"owner": {"reputation": 1088, "user_id": 3594299, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/RzXq5.png?s=128&g=1", "display_name": "Giedrius", "link": "https://stackoverflow.com/users/3594299/giedrius"}, "edited": false, "score": 0, "creation_date": 1487181153, "post_id": 42255553, "comment_id": 71671111, "body": "I have made another edit showing exactly how I get my error. It happens when I try to increment my <code>container-&gt;numberOfStations</code> by one. I have added a link to full code a <code>codepad.org</code> as well. Thanks a lot for your help!"}], "tags": [], "owner": {"reputation": 163, "user_id": 4535570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6857fb38dcddb8bba682dd542b4a91c?s=128&d=identicon&r=PG", "display_name": "Daniel Bungert", "link": "https://stackoverflow.com/users/4535570/daniel-bungert"}, "is_accepted": false, "score": 4, "last_activity_date": 1487178404, "last_edit_date": 1487178404, "creation_date": 1487177745, "answer_id": 42255553, "question_id": 42255354, "link": "https://stackoverflow.com/questions/42255354/c-dynamic-array-in-a-struct-crash-after-reallocation/42255553#42255553", "title": "C - dynamic array in a struct - crash after reallocation", "body": "<p>In the original version posted, <code>container-&gt;numberOfStations</code> was uninitialized.<br>\nIn makeContainer you might consider using <code>calloc()</code> or <code>memset()</code> to initialize your container to zero - it works nicely when you add new items to the struct and they still should be initialized to zero.</p>\n\n<p>In the current version I can spot no error, and neither can <code>valgrind</code>.  I took the liberty of declaring a <code>name</code> within the constraints of the 100 char limit.</p>\n"}], "owner": {"reputation": 1088, "user_id": 3594299, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/RzXq5.png?s=128&g=1", "display_name": "Giedrius", "link": "https://stackoverflow.com/users/3594299/giedrius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487181114, "creation_date": 1487177283, "last_edit_date": 1487181114, "question_id": 42255354, "link": "https://stackoverflow.com/questions/42255354/c-dynamic-array-in-a-struct-crash-after-reallocation", "title": "C - dynamic array in a struct - crash after reallocation", "body": "<p>I am new to C and trying to have a dynamic array inside a struct, to which I need to add a dynamic number of items.</p>\n\n<p>If I use <code>malloc</code> with a big number (like +100000) when initialising the container, the program works fine.</p>\n\n<p>However, if I just allocate <code>sizeof(struct ...)</code> memory, and then try to reallocate using <code>realloc</code>, the program crashes when I try to add new item to the array. Even if I add +1000000 size when reallocating, it still crashes, while the same size works if I use it when allocating in the first place.</p>\n\n<p>Cut down code to display my problem:</p>\n\n<pre><code>struct Station {\n    char name[100];\n};\n\nstruct StationContainer {\n    int numberOfStations;\n    struct Station *stations[];\n};\n\nstruct StationContainer *makeContainer() {\n    struct StationContainer *new;\n    // If I add +1000000 in size here, the program works fine\n    new = (struct StationContainer *) malloc(sizeof(struct StationContainer));\n\n    if (new == NULL) {\n        fprintf(stderr, \"makeContainer: out of memory\\n\");\n        exit(1);\n    }\n\n    new-&gt;numberOfStations = 0;\n\n    return new;\n}\n\nint main(int argc, int argv[]) {\n\n    // Initialize the container\n    struct StationContainer *container;\n    container = makeContainer();\n\n    // Add new station to container\n    struct Station *new;\n    new = (struct Station *) malloc(sizeof(struct Station));\n\n    if (new == NULL) {\n        fprintf(stderr, \"makeStation: out of memory\\n\");\n        exit(1);\n    }\n\n    strcpy(new-&gt;name, name);\n\n    // Add to the container\n    // Even if I add +1000000 here, it still crashes below when I add new item\n    container = (struct StationContainer *) realloc(container, sizeof(struct StationContainer) + 1000000);\n\n    if (container == NULL) {\n        fprintf(stderr, \"makeStation: container out of memory\\n\");\n        exit(1);\n    }\n\n    container-&gt;stations[container-&gt;numberOfStations] = new;\n    container-&gt;numberOfStations++;\n\n\n}\n</code></pre>\n\n<p><strong>EDIT1:</strong>\nThe problem in my cut down version was spotted, however, once I returned to full version, I was still getting the error. I got the <code>container out of memory</code>. That was because my <code>container-&gt;numberOfStations</code> was wildly big after first increment for some reason.</p>\n\n<p>My full code at:\n<a href=\"http://codepad.org/eV8EhJpN\" rel=\"nofollow noreferrer\">codepad</a></p>\n\n<p>The <code>adjacencies.txt</code> file contents:</p>\n\n<pre><code>Baker Street, Bond Street, Regent's Park\nBond Street, Marble Arch, Baker Street, Oxford Circus, Green Park\nMarble Arch, Bond Street\nGreen Park, Bond Street, Oxford Circus, Piccadilly Circus\nRegent's Park, Baker Street, Oxford Circus\nOxford Circus, Bond Street, Regent's Park, Warren Street, Tottenham Court Road, Piccadilly Circus\nPiccadilly Circus, Green Park, Oxford Circus, Leicester Square, Charing Cross\nWarren Street, Oxford Circus, Goodge Street\nGoodge Street, Warren Street, Tottenham Court Road\nTottenham Court Road, Oxford Circus, Goodge Street, Holborn, Leicester Square\nLeicester Square, Piccadilly Circus, Tottenham Court Road, Covent Garden, Charing Cross\nCharing Cross, Piccadilly Circus, Leicester Square\nCovent Garden, Leicester Square, Holborn\nHolborn, Tottenham Court Road, Chancery Lane\nChancery Lane, Holborn\n</code></pre>\n\n<p>When I make the stations, if I leave <code>container-&gt;numberOfStations</code> unchanged, there is no problem. However, when I at least increment it once, combined with the <code>realloc</code>, it changes to huge numbers. Example output:</p>\n\n<pre><code>Number of stations: 0\n!Station name:[Baker Street]\nNumber of stations: 1\n!Station name:[Bond Street]\nNumber of stations: 4067560\nmakeStation: container out of memory\n</code></pre>\n\n<p>I feel like there is a small error somewhere that makes my numberOfStation change wildly even though it's supposed to increment just by one?</p>\n"}, {"tags": ["c", "webserver"], "comments": [{"owner": {"reputation": 1998, "user_id": 1551685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4db3932926e0d73a94e94db75649454a?s=128&d=identicon&r=PG", "display_name": "Steve Smith", "link": "https://stackoverflow.com/users/1551685/steve-smith"}, "edited": false, "score": 0, "creation_date": 1487174870, "post_id": 42254370, "comment_id": 71666561, "body": "Have you tried anything yourself?"}, {"owner": {"reputation": 1, "user_id": 7569997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d521576724ec4d7c1ba4afd76f30bcde?s=128&d=identicon&r=PG&f=1", "display_name": "vern0", "link": "https://stackoverflow.com/users/7569997/vern0"}, "reply_to_user": {"reputation": 1998, "user_id": 1551685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4db3932926e0d73a94e94db75649454a?s=128&d=identicon&r=PG", "display_name": "Steve Smith", "link": "https://stackoverflow.com/users/1551685/steve-smith"}, "edited": false, "score": 0, "creation_date": 1487174939, "post_id": 42254370, "comment_id": 71666615, "body": "I do not know anything about C. I only know how to compile it for now. I found this on the web."}, {"owner": {"reputation": 1, "user_id": 7569997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d521576724ec4d7c1ba4afd76f30bcde?s=128&d=identicon&r=PG&f=1", "display_name": "vern0", "link": "https://stackoverflow.com/users/7569997/vern0"}, "reply_to_user": {"reputation": 1998, "user_id": 1551685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4db3932926e0d73a94e94db75649454a?s=128&d=identicon&r=PG", "display_name": "Steve Smith", "link": "https://stackoverflow.com/users/1551685/steve-smith"}, "edited": false, "score": 0, "creation_date": 1487175117, "post_id": 42254370, "comment_id": 71666756, "body": "I know the whatever the code is.. it has to go under.. <b>printf(&quot;got connection\\n&quot;);</b> but I know NOTHING about C."}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1487175158, "post_id": 42254370, "comment_id": 71666789, "body": "Then either learn C, or find an existing utility/piece of code to do what you want."}, {"owner": {"reputation": 1, "user_id": 7569997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d521576724ec4d7c1ba4afd76f30bcde?s=128&d=identicon&r=PG&f=1", "display_name": "vern0", "link": "https://stackoverflow.com/users/7569997/vern0"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1487175240, "post_id": 42254370, "comment_id": 71666853, "body": "@Mat, The only way I can learn C is if this program printed out the raw data for me. Then I could go researching on how to sort out the raw data ( parse URI from it.. etc.. )"}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 3, "creation_date": 1487175355, "post_id": 42254370, "comment_id": 71666944, "body": "&quot;The only way I can learn C is if this program printed out the raw data for me.&quot; - sorry that makes no sense at all. If you want to update this program yourself to make it do other stuff, you need to learn C first. This site is not a code factory, nor a tutorial service. There are tons of resource available online &amp; offline about C for you to learn it."}, {"owner": {"reputation": 1, "user_id": 7569997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d521576724ec4d7c1ba4afd76f30bcde?s=128&d=identicon&r=PG&f=1", "display_name": "vern0", "link": "https://stackoverflow.com/users/7569997/vern0"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1487175644, "post_id": 42254370, "comment_id": 71667165, "body": "@Mat, For me to have reasons to devote my time to learn something.. that something first has to provide evidence that it CAN be useful to me. Once I see it print the raw data.. I will have reasons to believe it CAN be useful to me."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487180666, "post_id": 42254370, "comment_id": 71670786, "body": "@vern0: So you bother us an take <b>our</b> time instead to solve your problem. Aparently you already have an example which shows that learning C is useful: to fix that snippet you found somewhere! If you want other&#39;s to do your job: hire a freelancer!"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7569997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d521576724ec4d7c1ba4afd76f30bcde?s=128&d=identicon&r=PG&f=1", "display_name": "vern0", "link": "https://stackoverflow.com/users/7569997/vern0"}, "edited": false, "score": 0, "creation_date": 1487175413, "post_id": 42254573, "comment_id": 71666990, "body": "How can that be put inside of a <b>printf(&quot;\\n&quot;);</b> ?"}, {"owner": {"reputation": 180, "user_id": 6783419, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95940e3fbaddb4e63194493d209f469b?s=128&d=identicon&r=PG&f=1", "display_name": "Lazcano", "link": "https://stackoverflow.com/users/6783419/lazcano"}, "reply_to_user": {"reputation": 1, "user_id": 7569997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d521576724ec4d7c1ba4afd76f30bcde?s=128&d=identicon&r=PG&f=1", "display_name": "vern0", "link": "https://stackoverflow.com/users/7569997/vern0"}, "edited": false, "score": 0, "creation_date": 1487175530, "post_id": 42254573, "comment_id": 71667072, "body": "How do you mean that exactly?"}, {"owner": {"reputation": 1, "user_id": 7569997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d521576724ec4d7c1ba4afd76f30bcde?s=128&d=identicon&r=PG&f=1", "display_name": "vern0", "link": "https://stackoverflow.com/users/7569997/vern0"}, "edited": false, "score": 0, "creation_date": 1487175745, "post_id": 42254573, "comment_id": 71667242, "body": "Suppose I never learned anything about C.. All I know is PHP and so on.. how can I make it &quot;<b>print_r()</b>&quot; that stuff ? the raw data.."}, {"owner": {"reputation": 1, "user_id": 7569997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d521576724ec4d7c1ba4afd76f30bcde?s=128&d=identicon&r=PG&f=1", "display_name": "vern0", "link": "https://stackoverflow.com/users/7569997/vern0"}, "edited": false, "score": 0, "creation_date": 1487175897, "post_id": 42254573, "comment_id": 71667365, "body": "c.c: In function \u2018main\u2019: c.c:41:54: error: \u2018client_addr\u2019 undeclared (first use in this function)      printf(&quot;[%s] - Connected to server\\n&quot;, inet_ntoa(client_addr.sin_addr));                                                       ^ c.c:41:54: note: each undeclared identifier is reported only once for each function it appears in"}, {"owner": {"reputation": 180, "user_id": 6783419, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95940e3fbaddb4e63194493d209f469b?s=128&d=identicon&r=PG&f=1", "display_name": "Lazcano", "link": "https://stackoverflow.com/users/6783419/lazcano"}, "reply_to_user": {"reputation": 1, "user_id": 7569997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d521576724ec4d7c1ba4afd76f30bcde?s=128&d=identicon&r=PG&f=1", "display_name": "vern0", "link": "https://stackoverflow.com/users/7569997/vern0"}, "edited": false, "score": 1, "creation_date": 1487175971, "post_id": 42254573, "comment_id": 71667424, "body": "Change client_addr to cli_addr. Better learn C first before writing a server."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1, "user_id": 7569997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d521576724ec4d7c1ba4afd76f30bcde?s=128&d=identicon&r=PG&f=1", "display_name": "vern0", "link": "https://stackoverflow.com/users/7569997/vern0"}, "edited": false, "score": 1, "creation_date": 1487177076, "post_id": 42254573, "comment_id": 71668237, "body": "@vern0: We are neither a coding nor a tutoring service. If you want to modify C code, <b>learn the language</b>."}, {"owner": {"reputation": 1, "user_id": 7569997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d521576724ec4d7c1ba4afd76f30bcde?s=128&d=identicon&r=PG&f=1", "display_name": "vern0", "link": "https://stackoverflow.com/users/7569997/vern0"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487177170, "post_id": 42254573, "comment_id": 71668303, "body": "@Olaf, what are you guys ?"}], "tags": [], "owner": {"reputation": 180, "user_id": 6783419, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95940e3fbaddb4e63194493d209f469b?s=128&d=identicon&r=PG&f=1", "display_name": "Lazcano", "link": "https://stackoverflow.com/users/6783419/lazcano"}, "is_accepted": true, "score": -1, "last_activity_date": 1487175944, "last_edit_date": 1487175944, "creation_date": 1487175252, "answer_id": 42254573, "question_id": 42254370, "link": "https://stackoverflow.com/questions/42254370/c-web-server-print-incoming-data/42254573#42254573", "title": "C Web Server - Print incoming data?", "body": "<p>You can receive the client information by using <code>inet_ntoa</code>.</p>\n\n<p>Just use <code>inet_ntoa(cli_addr.sin_addr)</code>. The incoming raw data you could easily catch with <code>recv</code>, but then you've to set the Sockets to Non-Blocking. Any information (url, user agent) will be saved into the recv buffer.</p>\n\n<p>Usage of <code>printf(\"[%s] - Connected to server\\n\", inet_ntoa(cli_addr.sin_addr));</code> will print the IP Addr.</p>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 1, "user_id": 7569997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d521576724ec4d7c1ba4afd76f30bcde?s=128&d=identicon&r=PG&f=1", "display_name": "vern0", "link": "https://stackoverflow.com/users/7569997/vern0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 42254573, "answer_count": 1, "score": -4, "last_activity_date": 1487175944, "creation_date": 1487174679, "question_id": 42254370, "link": "https://stackoverflow.com/questions/42254370/c-web-server-print-incoming-data", "title": "C Web Server - Print incoming data?", "body": "<p>This C Web Server will print out</p>\n\n<pre><code> got connection\n</code></pre>\n\n<p>via terminal.. for each serve to the web.</p>\n\n<p>But I would like it to also print out all of the incoming raw data.</p>\n\n<p>such as URL, CLIENT IP.. whatever it has received basically. <br>\n( no sortment necessary. just raw data )</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt; \n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;err.h&gt;\n\nchar response[] = \"HTTP/1.1 200 OK\\r\\n\"\n\"Content-Type: text/html; charset=UTF-8\\r\\n\\r\\n\"\n\"test\\r\\n\";\n\nint main()\n{\n  int one = 1, client_fd;\n  struct sockaddr_in svr_addr, cli_addr;\n  socklen_t sin_len = sizeof(cli_addr);\n\n  int sock = socket(AF_INET, SOCK_STREAM, 0);\n  if (sock &lt; 0)\n    err(1, \"can't open socket\");\n\n  setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, &amp;one, sizeof(int));\n\n  int port = 81;\n  svr_addr.sin_family = AF_INET;\n  svr_addr.sin_addr.s_addr = INADDR_ANY;\n  svr_addr.sin_port = htons(port);\n\n  if (bind(sock, (struct sockaddr *) &amp;svr_addr, sizeof(svr_addr)) == -1) {\n    close(sock);\n    err(1, \"Can't bind\");\n  }\n\n  listen(sock, 5);\n  while (1) {\n    client_fd = accept(sock, (struct sockaddr *) &amp;cli_addr, &amp;sin_len);\n    printf(\"got connection\\n\");\n\n    if (client_fd == -1) {\n      perror(\"Can't accept\");\n      continue;\n    }\n\n    write(client_fd, response, sizeof(response) - 1); /*-1:'\\0'*/\n    close(client_fd);\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "random"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 7, "creation_date": 1487174128, "post_id": 42254047, "comment_id": 71665914, "body": "Don&#39;t put semicolons before your loop bodies."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1487174278, "post_id": 42254047, "comment_id": 71666061, "body": "Just in case the other comment isn&#39;t clear enough, you have <code>for (i=0; i&lt; DIMA; i++);{</code> and the semicolon between <code>)</code> and <code>{</code> is wrong \u2014 it is the empty body for the loop and the statement block is executed once after the loop completes."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1487174428, "post_id": 42254047, "comment_id": 71666194, "body": "And note the error becomes obvious if you defer declaration of variables until you need them. If you declare <code>i</code> in the loop, it&#39;s not in scope when the stray semicolons are present and the compiler emits an error."}, {"owner": {"reputation": 37, "user_id": 7145436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bkUTz.jpg?s=128&g=1", "display_name": "Massimo", "link": "https://stackoverflow.com/users/7145436/massimo"}, "edited": false, "score": 0, "creation_date": 1487176282, "post_id": 42254047, "comment_id": 71667664, "body": "Thank you very much to all for your super quick reply and sorry if my question is off-topic."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 7145436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bkUTz.jpg?s=128&g=1", "display_name": "Massimo", "link": "https://stackoverflow.com/users/7145436/massimo"}, "edited": false, "score": 1, "creation_date": 1487176233, "post_id": 42254175, "comment_id": 71667627, "body": "thank you very much to all for your super quick reply and sorry if my question is off of topics."}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 3, "last_activity_date": 1487174231, "creation_date": 1487174231, "answer_id": 42254175, "question_id": 42254047, "link": "https://stackoverflow.com/questions/42254047/generating-random-numbers-with-c-language/42254175#42254175", "title": "generating random numbers with C language", "body": "<p>Change </p>\n\n<pre><code>for (i=0; i&lt; DIMA; i++);{\n</code></pre>\n\n<p>to</p>\n\n<pre><code>for (i=0; i&lt; DIMA; i++) {\n</code></pre>\n\n<p>Note the extra semicolon <code>;</code> before <code>{</code>, same for the second loop.</p>\n"}], "owner": {"reputation": 37, "user_id": 7145436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bkUTz.jpg?s=128&g=1", "display_name": "Massimo", "link": "https://stackoverflow.com/users/7145436/massimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1487174200, "answer_count": 1, "score": -1, "last_activity_date": 1487174231, "creation_date": 1487173936, "question_id": 42254047, "link": "https://stackoverflow.com/questions/42254047/generating-random-numbers-with-c-language", "closed_reason": "Not suitable for this site", "title": "generating random numbers with C language", "body": "<p>I am trying to printf a bounce of natural numbers (from 0 up to 10) using srand but when I run the code, it generate numbers with 7 digit.\nHow is it possible? Can anybody tell me where I am doing wrong?</p>\n\n<pre><code>enter code here\n\n#include &lt;stdio.h&gt;    \n#include &lt;stdlib.h&gt;    \n#include &lt;time.h&gt;    \n\n#define DIMA 10\n#define DIMB 2\n\nint main()\n{\n    int A[DIMA], B[DIMB], i, j, flag;\n    srand (time(NULL));\n\n    for (i=0; i&lt; DIMA; i++);{\n        A[i]=rand() % 11;\n    }\n\n    for (i=0; i&lt; DIMB; i++);{\n        B[i]=rand() % 11;\n    }\n\n    for (i=0; i&lt;DIMA; i++){\n        printf(\"%d \", A[i]);\n    }\n\n    printf(\"\\n\\n\");\n    for (i=0; i&lt;DIMB; i++){\n        printf(\"%d \", B[i]);\n    }\n return 0;\n}\n</code></pre>\n\n<p>Thanks for support.</p>\n"}, {"tags": ["c", "file", "input", "error-handling", "io"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1487173583, "post_id": 42253847, "comment_id": 71665487, "body": "Your conditions must take care of number and new line, for example"}, {"owner": {"reputation": 89, "user_id": 6915599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10206955695960115/picture?type=large", "display_name": "Karl", "link": "https://stackoverflow.com/users/6915599/karl"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1487173731, "post_id": 42253847, "comment_id": 71665605, "body": "By errors I mean, if I type 5 in Number, but I only have 2 SportNames."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1487173738, "post_id": 42253847, "comment_id": 71665610, "body": "Is the data in the file <i>line based</i>? Then a good start is to read line by line, and parsing each line separately."}, {"owner": {"reputation": 89, "user_id": 6915599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10206955695960115/picture?type=large", "display_name": "Karl", "link": "https://stackoverflow.com/users/6915599/karl"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1487174007, "post_id": 42253847, "comment_id": 71665815, "body": "@LPs How to check for new line in fscanf? Is it even possible? @ Some programmer dude And if I should go the line by line way, how can I use sscanf to read the strings I want? I don&#39;t have fixed amount of strings"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1487174051, "post_id": 42253847, "comment_id": 71665847, "body": "If you want the validation to be based on lines of data, then using <code>fscanf()</code> directly is wrong \u2014 it doesn&#39;t care about where newlines occur.  It is simply the wrong tool for line-based processing where there may be errors.  You need to read lines with <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fgets.html\" rel=\"nofollow noreferrer\"><code>fgets()</code></a> (or perhaps POSIX&#39;s <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html\" rel=\"nofollow noreferrer\"><code>getline()</code></a>) and then perhaps parse the result with <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/sscanf.html\" rel=\"nofollow noreferrer\"><code>sscanf()</code></a>."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1487174386, "post_id": 42253847, "comment_id": 71666162, "body": "@KarlJoonasVolke You can have a look at the <code>%[</code> format specifier to read lines. Something like: <code>char line[1000];  if(fscanf(fData, &quot;%[^\\n]%*c&quot;, line) != 1) { &#47;* fscanf failed or EOF *&#47; }</code> and then <code>sscanf</code> the line"}, {"owner": {"reputation": 89, "user_id": 6915599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10206955695960115/picture?type=large", "display_name": "Karl", "link": "https://stackoverflow.com/users/6915599/karl"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487174918, "post_id": 42253847, "comment_id": 71666597, "body": "@JonathanLeffler Any idea how should I use sscanf when I dont know how many strings it should read? <i>Name HouseNr City Country</i> is always there, but after <i>number</i>, it depends on the <i>number</i> how many strings it reads"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1487175514, "post_id": 42253847, "comment_id": 71667064, "body": "See <a href=\"http://stackoverflow.com/questions/3975236/how-to-use-sscanf-in-loops\">How to use <code>sscanf()</code> in loops?</a>  Use <code>%n</code> to identify where the number of sports ends, then use the technique in that question to read the sports in turn."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 6915599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10206955695960115/picture?type=large", "display_name": "Karl", "link": "https://stackoverflow.com/users/6915599/karl"}, "edited": false, "score": 0, "creation_date": 1487177505, "post_id": 42254917, "comment_id": 71668559, "body": "That is amazing, thank you! I now know how to use sscanf&#39;s power."}], "tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": true, "score": 2, "last_activity_date": 1487176156, "last_edit_date": 1495539934, "creation_date": 1487176156, "answer_id": 42254917, "question_id": 42253847, "link": "https://stackoverflow.com/questions/42253847/c-checking-for-errors-in-file/42254917#42254917", "title": "C - Checking for errors in file", "body": "<p>As <a href=\"https://stackoverflow.com/users/440558/some-programmer-dude\">@SomeProgrammerDude</a> <a href=\"https://stackoverflow.com/questions/42253847/c-checking-for-errors-in-file#comment71665610_42253847\">mentioned in the comments</a>, it is much better to read the file line by line and parse each line accordingly.</p>\n\n<p>You can use the <code>%[</code> format specifier to read lines from the file. This can be achieved by using <code>%[^\\n]</code> which tells <code>*scanf</code> to scan everything until a <code>\\n</code> (or EOF, whichever comes first). Of course, it <em>doesn't</em> scan in the <code>\\n</code> and as <code>%[^\\n]</code> will <em>fail if the first character to be read is a <code>\\n</code></em>, you'll have to get rid of the newline after each line. This can be achieved by using a <code>%*c</code> right after the <code>%[^\\n]</code>. It tells <code>*scanf</code> to read and discard a character.</p>\n\n<p>Now that you've read the line, its time to parse it. The <code>sscanf</code> function along with the help of the <code>%n</code> format specifier can be used for this.</p>\n\n<pre><code>char line[1000];\nint i = 0;\nwhile(fscanf(fData, \"%[^\\n]%*c\", line) == 1)\n{\n    int offset;\n    if(sscanf(line, \"%s %s %s %s %d%n\", (person + i)-&gt;name,\n    (person + i)-&gt;adr.houseNr, (person + i)-&gt;adr.city, (huvi + i)-&gt;adr.country,\n    &amp;(sport + i)-&gt;sportCount, &amp;offset) != 5)\n    {\n        fprintf(stderr, \"Invalid line '%s'\\n\", line);\n        i++;\n        continue; /* Move on to next line */\n    }\n    bool valid = true;\n    for(int j = 0; j &lt; (sport + i)-&gt;sportCount; j++)\n        if(sscanf(line + offset, \"%s%n\", (person + i)-&gt;sportName[j], &amp;offset) != 1)\n        {\n            valid = false;\n            break;\n        }\n    char dummy[100];\n    if(sscanf(line + offset, \"%s\", dummy) == 1)\n        valid = false;\n\n    if(valid)\n        printf(\"Good input for line '%s'\\n\", line);\n    else\n        fprintf(stderr, \"Invalid number of items in '%s'\\n\", line);\n    i++;\n}\n</code></pre>\n\n<p><sup><sub>Untested Code \u2191</sub></sup></p>\n"}], "owner": {"reputation": 89, "user_id": 6915599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10206955695960115/picture?type=large", "display_name": "Karl", "link": "https://stackoverflow.com/users/6915599/karl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 42254917, "answer_count": 1, "score": 1, "last_activity_date": 1487176156, "creation_date": 1487173413, "last_edit_date": 1592644375, "question_id": 42253847, "link": "https://stackoverflow.com/questions/42253847/c-checking-for-errors-in-file", "title": "C - Checking for errors in file", "body": "<p>I'm trying to get some ideas how to check for errors or mistypes in my data file.\nThe errors are made by me, intentionally.</p>\n<blockquote>\n<p>My file looks like this</p>\n<p><strong>Name HouseNr City Country number</strong>(how many sports) <strong>Sport1 Sport2 SportN</strong></p>\n<p>Carl Lincoln42 Houston USA 2 Basketball Football</p>\n</blockquote>\n<pre><code>while(fscanf(fData, &quot;%s %s %s %s %d&quot;, (person + i)-&gt;name,\n    (person + i)-&gt;adr.houseNr, (person + i)-&gt;adr.city, (huvi + i)-&gt;adr.country,\n    &amp;(sport + i)-&gt;sportCount) == 5)\n{\n    for (j = 0; j &lt; (person + i)-&gt;sportCount; j++)\n    {\n        fscanf(fData, &quot;%s&quot;, (person + i)-&gt;sportName[j]);\n    }\n    i++;\n}\n</code></pre>\n<p>Now what I don't grasp is, how should I check for errors in that file.</p>\n<p>Let's assume that <code>number</code>'s value is higher than that of the <code>SportN</code>.</p>\n<p>This would mean that it scans other person's details as <em>SportName</em></p>\n<p>How should I tackle this? Change some code (please, some suggestions) or change the way I store my data?</p>\n"}, {"tags": ["c", "arrays", "file", "parsing"], "comments": [{"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 4, "creation_date": 1487173263, "post_id": 42253733, "comment_id": 71665238, "body": "There&#39;s a <code>\\n</code> at each line which your putting in your array as well."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1487173328, "post_id": 42253733, "comment_id": 71665283, "body": "Check the return value of <code>fopen()</code>, <code>fscanf()</code>..."}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1487174571, "post_id": 42253733, "comment_id": 71666314, "body": "You can skip the <code>\\n</code> using <code>fseek</code> at the end of the execution of the inner loop."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7569805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74f259fc228b0f2f4eae7fbaddc50f4?s=128&d=identicon&r=PG&f=1", "display_name": "erefeofkeo", "link": "https://stackoverflow.com/users/7569805/erefeofkeo"}, "edited": false, "score": 0, "creation_date": 1487173439, "post_id": 42253796, "comment_id": 71665375, "body": "So using strtok() on the array right after the scanf to remove the newline character, yields the same output."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 13, "user_id": 7569805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74f259fc228b0f2f4eae7fbaddc50f4?s=128&d=identicon&r=PG&f=1", "display_name": "erefeofkeo", "link": "https://stackoverflow.com/users/7569805/erefeofkeo"}, "edited": false, "score": 0, "creation_date": 1487173481, "post_id": 42253796, "comment_id": 71665407, "body": "@erefeofkeo - <code>strtok</code> is a sledgehammer. This is a job for a screw-driver"}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 6, "last_activity_date": 1487173551, "last_edit_date": 1487173551, "creation_date": 1487173277, "answer_id": 42253796, "question_id": 42253733, "link": "https://stackoverflow.com/questions/42253733/reading-in-a-text-file-into-a-2d-array-in-c/42253796#42253796", "title": "Reading in a text file into a 2D array in C", "body": "<p>Newline character, as the name implies, are characters also. You should have found it suspicious that your output preserves newlines.</p>\n\n<p>There are in fact 13 characters in each line of the file (assuming a unix system). The twelve printable ones, and a newline.</p>\n\n<p>So for i = 1...7 the first character in each \"row\" is a newline.</p>\n\n<p>Fortunately, <code>scanf</code> can be instructed to skip whitespace characters when awaiting a character input. Simply add a space in the beginning of the format specifier string:</p>\n\n<pre><code>fscanf(fp, \" %c\", &amp;points[i][j]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "is_accepted": false, "score": 3, "last_activity_date": 1487174371, "last_edit_date": 1487174371, "creation_date": 1487173347, "answer_id": 42253821, "question_id": 42253733, "link": "https://stackoverflow.com/questions/42253733/reading-in-a-text-file-into-a-2d-array-in-c/42253821#42253821", "title": "Reading in a text file into a 2D array in C", "body": "<p><strong>Note:</strong> you are missing 7 chars which is the number of <code>\\n</code> put in your array. </p>\n\n<pre><code>abcdefghjikl \\n\n123456789abc \\n\naerereghjikl \\n\n123456789abc \\n\nabc43434dfdf \\n \n12erere789ab \\n \nabcdefghjikl \\n\n12345\n</code></pre>\n\n<p>There's a <code>\\n</code> at the end of each line. Which is not visible to you but is being stored in array.</p>\n\n<p>You can simply skip this by telling the file pointer position to skip 1 char.</p>\n\n<pre><code>for(i=0; i&lt;8; i++) {\n    for(j=0; j&lt;12; j++) {\n        fscanf(fp,\"%c\",&amp;points[i][j]);\n    }\n    fseek( fp, 1, SEEK_CUR );\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>abcdefghjikl\n123456789ab\naerereghjik\n123456789ab\nabc43434dfd\n12erere789a\nabcdefghjik\n12345fdfd89\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 0, "last_activity_date": 1487174515, "last_edit_date": 1487174515, "creation_date": 1487174177, "answer_id": 42254152, "question_id": 42253733, "link": "https://stackoverflow.com/questions/42253733/reading-in-a-text-file-into-a-2d-array-in-c/42254152#42254152", "title": "Reading in a text file into a 2D array in C", "body": "<p>You should check if return pointer of <code>fp</code>, to ensure the file was opened correctly. Somethin like this is what you need to do:</p>\n\n<pre><code>FILE * fp;\nfp = fopen(\"test.txt\",\"r\");\nif (fp == NULL) {\n    /* handle exit */\n</code></pre>\n\n<p>As for you error concerning the last line of the file, you need to change this segement:</p>\n\n<pre><code>for(i=0; i&lt;8; i++) {\n    for(j=0; j&lt;12; j++) {\n        fscanf(fp,\"%c\",&amp;points[i][j]);\n    }\n}\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>for(i=0; i&lt;8; i++) {\n    for(j=0; j&lt;12; j++) {\n        if (fscanf(fp,\"%c \",&amp;points[i][j]) != 1) {\n            fprintf(stderr, \"Non character found.\\n\");\n            return 1;\n        }\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>Which skips any number of trailing white space from <code>fscanf()</code>. <code>fscanf()</code> will leave a newline character in the input buffer, and gets carried over on the next <code>fscanf()</code> call. Its also safe to check that <code>1</code> character was read. </p>\n"}], "owner": {"reputation": 13, "user_id": 7569805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74f259fc228b0f2f4eae7fbaddc50f4?s=128&d=identicon&r=PG&f=1", "display_name": "erefeofkeo", "link": "https://stackoverflow.com/users/7569805/erefeofkeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4957, "favorite_count": 0, "accepted_answer_id": 42253796, "answer_count": 3, "score": 0, "last_activity_date": 1487174515, "creation_date": 1487173114, "question_id": 42253733, "link": "https://stackoverflow.com/questions/42253733/reading-in-a-text-file-into-a-2d-array-in-c", "title": "Reading in a text file into a 2D array in C", "body": "<p>I have a text file of size 8 by 12 (8 rows, 12 columns) (x,y)</p>\n\n<pre><code>abcdefghjikl\n123456789abc\naerereghjikl\n123456789abc\nabc43434dfdf\n12erere789ab\nabcdefghjikl\n12345fdfd89a\n</code></pre>\n\n<p>I'm trying to read each individual character into a 2d array, where the first dimension is the rows, and the second is the columns. </p>\n\n<p>This is what I've tried:</p>\n\n<pre><code>int main(void) {\n    FILE * fp;\n    fp = fopen(\"test.txt\",\"r\");\n\n    char points[8][12];\n    int i,j;\n\n    for(i=0; i&lt;8; i++) {\n        for(j=0; j&lt;12; j++) {\n            fscanf(fp,\"%c\",&amp;points[i][j]);\n        }\n    }\n\n    for(i=0; i&lt;8; i++) {\n        for(j=0; j&lt;12; j++) {\n            printf(\"%c\",points[i][j]);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>However my output seems to work correctly, up untill the last line of the file. </p>\n\n<pre><code>abcdefghjikl\n123456789abc\naerereghjikl\n123456789abc\nabc43434dfdf\n12erere789ab\nabcdefghjikl\n12345\n</code></pre>\n\n<p>Where the last line doesn't fully work. I've tried increasing the array dimensions of the row, which makes the last line appear, but adds garbage values to my output. Any help would be much appreciated.</p>\n"}, {"tags": ["c", "arrays", "struct", "qsort"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1487173634, "post_id": 42253724, "comment_id": 71665523, "body": "The compare function is supposed to return a negative, zero or positive value.  Yours only returns zero or one.  If it is called as <code>compare(a, b)</code> and returns a negative number, it must return a positive number when called as <code>compare(b, a)</code> \u2014 your does not.  This is a basic requirement of all compare functions for <code>qsort()</code>.  Additionally, your function is for comparing structures via pointers to structures (when sorting an array of structures). You&#39;re actually sorting an array of <i>pointers to structures</i>; you need a different function that expects to be passed a pointer to a pointer."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 2, "creation_date": 1487173710, "post_id": 42253724, "comment_id": 71665577, "body": "Your compare function has some issues... it&#39;s supposed to return a negative/zero/positive for less/equal/greater, but because of the <code>!</code> can only return 1 or 0... and the arguments would be pointers to the elements in the array that are being compared, which themselves are pointers to the structs (in your setup)... so they should be pointers to pointers, though you treat them as though they point to the structs directly."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487177338, "post_id": 42254217, "comment_id": 71668423, "body": "Detail: You may want a re-write to avoid overflow with system and user time addition. A simply solution when <code>unsigned long long</code> is wider, would extend the integer math as in <code>(0ull + p1-&gt;system_time + p1-&gt;user_time) &gt; (0ull + p2-&gt;user_time + p2-&gt;system_time)</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487178602, "post_id": 42254217, "comment_id": 71669397, "body": "@chux: there aren&#39;t that many programs around that will exceed 68 CPU years of execution time."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487182367, "post_id": 42254217, "comment_id": 71671838, "body": "@JonathanLeffler True not a great concern, but when it is a concern, it can be costly.  Apparently successful  code gets used  for every expanding applications.  A <a href=\"https://en.wikipedia.org/wiki/Ariane_5#Notable_launches\" rel=\"nofollow noreferrer\">EUR 630 million mistake</a> was caused by an undetected math overflow because the code assumed &quot;physically limited or that there was a large margin of error&quot;."}], "tags": [], "owner": {"reputation": 123, "user_id": 4289519, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ebc88346814308701f4c72eb4fbf1135?s=128&d=identicon&r=PG&f=1", "display_name": "drov", "link": "https://stackoverflow.com/users/4289519/drov"}, "is_accepted": false, "score": 0, "last_activity_date": 1487254018, "last_edit_date": 1487254018, "creation_date": 1487174339, "answer_id": 42254217, "question_id": 42253724, "link": "https://stackoverflow.com/questions/42253724/qsort-with-array-of-struct-changes-the-content-of-the-struct/42254217#42254217", "title": "Qsort with array of struct changes the content of the struct", "body": "<p>Thanks to Dmitri : </p>\n\n<blockquote>\n  <p>the arguments would be pointers to the elements in the array that are being compared, which themselves are pointers to the structs (in your setup)... so they should be pointers to pointers, though you treat them as though they point to the structs directly.</p>\n</blockquote>\n\n<p>The problem was in the \"compare\" function : </p>\n\n<pre><code>static int compare(const void * a, const void * b)\n{\n    const struct proc *p1 = *(struct proc **)a;\n    const struct proc *p2 = *(struct proc **)b;\n    // 0ull to prevent int overflow\n    if ((0ull + p1-&gt;system_time + p1-&gt;user_time) &gt; (0ull + p2-&gt;user_time + p2-&gt;system_time))\n        return -1;\n    else if ((0ull + p1-&gt;system_time + p1-&gt;user_time) == (0ull + p2-&gt;user_time + p2-&gt;system_time))\n        return 0;\n    else\n        return 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 4289519, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ebc88346814308701f4c72eb4fbf1135?s=128&d=identicon&r=PG&f=1", "display_name": "drov", "link": "https://stackoverflow.com/users/4289519/drov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 396, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487254018, "creation_date": 1487173096, "last_edit_date": 1495542302, "question_id": 42253724, "link": "https://stackoverflow.com/questions/42253724/qsort-with-array-of-struct-changes-the-content-of-the-struct", "title": "Qsort with array of struct changes the content of the struct", "body": "<p>I'm writing a small code to test qsort on an array that is not completely filled.</p>\n\n<p>But whenever I run it, the data is completely erased for some random int.</p>\n\n<p>I don't understand why, I looked at <a href=\"https://stackoverflow.com/questions/34828650/qsort-with-array-of-structs\">this question</a> and their code ran fine but I don't get why mine won't.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include &lt;time.h&gt;\n\nstruct proc {\n    long unsigned int user_time;\n    long unsigned int system_time;\n    char *name;\n    int pid;\n};\n\n\nstatic int compare(const void * a, const void * b)\n{\n  const struct proc *p1 = a;\n  const struct proc *p2 = b;\n\n  if ((p1-&gt;system_time + p1-&gt;user_time) &gt; (p2-&gt;user_time + p2-&gt;system_time))\n    return -1;\n  else if ((p1-&gt;system_time + p1-&gt;user_time) == (p2-&gt;user_time + p2-&gt;system_time))\n    return 0;\n  else\n    return 1;\n}\n\nint main()\n{\n    int used_size = 0;\n    srand ( time(NULL) );\n    struct proc **processes = malloc(sizeof(struct proc*) * 20 + 1);\n    for (int i = 0; i &lt; 20; i++) {\n        processes[i] = malloc(sizeof(struct proc));\n        processes[i]-&gt;user_time = 0;\n        processes[i]-&gt;system_time = 0;\n        processes[i]-&gt;name = NULL;\n        processes[i]-&gt;pid = -1;\n    }\n\n    for (int i = 0; i &lt; 14; i++)\n    {\n        processes[i]-&gt;user_time = rand()%10;\n        processes[i]-&gt;system_time = 0;\n        processes[i]-&gt;pid = i*2;\n        used_size++;\n    }\n\n    for (int i = 0; i &lt; used_size;i++)\n    {\n        printf(\"%d %lu \\n\",i,processes[i]-&gt;user_time);\n    }\n\n    printf(\"\\n\\n\\n\");\n    qsort(processes, used_size, sizeof(struct proc *), compare);\n\n    for (int i = 0; i &lt; used_size;i++)\n    {\n        printf(\"%d %d \\n\",i,processes[i]);\n    }\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "multiplication", "arithmetic-expressions"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 7, "creation_date": 1487172005, "post_id": 42253315, "comment_id": 71664234, "body": "We get the integer promoted to a float, and the result a float as well. Any decent tutorial should cover that."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1487172009, "post_id": 42253315, "comment_id": 71664240, "body": "Read data types promotion rule."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 4, "creation_date": 1487172347, "post_id": 42253315, "comment_id": 71664520, "body": "If you have a specific problem, show your code and we can show you how to do it better,"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1487172457, "post_id": 42253315, "comment_id": 71664613, "body": "take alook at page 52 - 6.3.1.8 Usual arithmetic conversions of <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">Standard C</a>"}, {"owner": {"reputation": 385, "user_id": 4965642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ed6921390414c649b9c1073f5e64f115?s=128&d=identicon&r=PG&f=1", "display_name": "Carles", "link": "https://stackoverflow.com/users/4965642/carles"}, "edited": false, "score": 0, "creation_date": 1487172554, "post_id": 42253315, "comment_id": 71664682, "body": "The behaviour can change depending on the compiler and settings, so to be sure that everything works as expected, I would suggest you to perform a cast int auxint = 12; float auxfloat = (float)auxint;"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 31255, "user_id": 28494, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/c14ME.gif?s=128&g=1", "display_name": "qrdl", "link": "https://stackoverflow.com/users/28494/qrdl"}, "edited": false, "score": 0, "creation_date": 1487175018, "post_id": 42253315, "comment_id": 71666682, "body": "@qrdl Well, the floating point format, as well as the integer size, may vary between compilers. The implicit type promotion rules remain the same but the value of the result may differ."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487175160, "post_id": 42253315, "comment_id": 71666792, "body": "Anyway, to get anything meaningful out of this question as a beginner, you should probably give a specific code case. I would probably not recommend beginners to ponder the details of the various implicit type promotion rules in C, as they are quite obscure."}, {"owner": {"reputation": 31255, "user_id": 28494, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/c14ME.gif?s=128&g=1", "display_name": "qrdl", "link": "https://stackoverflow.com/users/28494/qrdl"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487182002, "post_id": 42253315, "comment_id": 71671610, "body": "@Lundin FP format and integer size may vary between compilers and platforms, no doubt about it, but integer promotion rules are well-defined in C standard."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 8, "last_activity_date": 1487172522, "last_edit_date": 1487172522, "creation_date": 1487172028, "answer_id": 42253339, "question_id": 42253315, "link": "https://stackoverflow.com/questions/42253315/integer-float-in-c/42253339#42253339", "title": "Integer * float = ? in C", "body": "<blockquote>\n  <p><em>What do we get when we multiply float with integer?</em></p>\n</blockquote>\n\n<p><strong>TL;DR</strong> We get a floating point result.</p>\n\n<p>To elaborate, for arithmetic operations, if both the operands are of different ranks, according to the arithmetic conversion rules, the operand with <em>lower rank</em> is promoted to <em>higher rank</em> and then the operation is performed. In your case, the integer is promoted to floating type and the result of the operation if of floating type.</p>\n\n<p>Quoting the relevant parts from <code>C11</code>, chapter \u00a76.3.1.8, <em>Usual arithmetic conversions</em></p>\n\n<blockquote>\n  <p>Many operators that expect operands of arithmetic type cause conversions and yield result\n  types in a similar way. The purpose is to determine a common real type for the operands\n  and result. For the specified operands, each operand is converted, without change of type\n  domain, to a type whose corresponding real type is the common real type. Unless\n  explicitly stated otherwise, the common real type is also the corresponding real type of\n  the result, whose type domain is the type domain of the operands if they are the same,\n  and complex otherwise. This pattern is called the usual arithmetic conversions:</p>\n</blockquote>\n\n<p>and, for this specific case,</p>\n\n<blockquote>\n  <ul>\n  <li>Otherwise, if the corresponding real type of either operand is <code>float</code>, the other\n  operand is converted, without change of type domain, to a type whose\n  corresponding real type is <code>float</code></li>\n  </ul>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 187, "user_id": 2531895, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a670a77b618ba2eb9eff9e2162720632?s=128&d=identicon&r=PG", "display_name": "yuanjianpeng", "link": "https://stackoverflow.com/users/2531895/yuanjianpeng"}, "is_accepted": false, "score": 0, "last_activity_date": 1487173662, "creation_date": 1487173662, "answer_id": 42253935, "question_id": 42253315, "link": "https://stackoverflow.com/questions/42253315/integer-float-in-c/42253935#42253935", "title": "Integer * float = ? in C", "body": "<p>It's float, but you should pay attention to precision loss, overflow and underflow. recommend read </p>\n\n<blockquote>\n  <p>IEEE Std. 754-1985. IEEE standard for binary floating-point arithmetic</p>\n</blockquote>\n\n<p>and also</p>\n\n<blockquote>\n  <p>D. Goldberg. What every computer scientist should know about\n  floating-point arithmetic [J]. ACM Computing Surveys (CSUR), 1991,\n  23(1): 5-48.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7440588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/veyQG.jpg?s=128&g=1", "display_name": "Marcio Lantmann Carleto", "link": "https://stackoverflow.com/users/7440588/marcio-lantmann-carleto"}, "is_accepted": false, "score": 0, "last_activity_date": 1487180840, "creation_date": 1487180840, "answer_id": 42256614, "question_id": 42253315, "link": "https://stackoverflow.com/questions/42253315/integer-float-in-c/42256614#42256614", "title": "Integer * float = ? in C", "body": "<p>In cases like that I allways cast the minor type (integer) and do the rest of the operation. The result and the operands will be all floating type.</p>\n"}], "owner": {"reputation": 425, "user_id": 7569701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fec61dc90a5d10a82fe2c2c3d798b76?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/7569701/mohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2501, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1487180840, "creation_date": 1487171938, "last_edit_date": 1487172639, "question_id": 42253315, "link": "https://stackoverflow.com/questions/42253315/integer-float-in-c", "title": "Integer * float = ? in C", "body": "<p>What do we get when we multiply float with integer in C? Please explain. I am confused because when I have issues with this when i do Celsius to Fahrenheit conversion and also in many other conversions.</p>\n"}, {"tags": ["python", "c", "scrypt"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487171472, "post_id": 42253073, "comment_id": 71663778, "body": "Why not encode it as ASCII? Is there a chance the password will contain any non-ascii characters?"}, {"owner": {"reputation": 458, "user_id": 1189679, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f5c03606a9842d8d6a89f57593f67992?s=128&d=identicon&r=PG", "display_name": "01BTC10", "link": "https://stackoverflow.com/users/1189679/01btc10"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487171564, "post_id": 42253073, "comment_id": 71663848, "body": "I think the python software must support unicode so this is why it is not ascii."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487171612, "post_id": 42253073, "comment_id": 71663894, "body": "Since it is a password, you may restrict it to be ascii-only.."}, {"owner": {"reputation": 458, "user_id": 1189679, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f5c03606a9842d8d6a89f57593f67992?s=128&d=identicon&r=PG", "display_name": "01BTC10", "link": "https://stackoverflow.com/users/1189679/01btc10"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487171672, "post_id": 42253073, "comment_id": 71663945, "body": "I am converting a python script to C and the problem is that if I use ascii then it doesn&#39;t work since it give a different key."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487171852, "post_id": 42253073, "comment_id": 71664094, "body": "Well.. on Linux you can use <a href=\"https://linux.die.net/man/3/iconv\" rel=\"nofollow noreferrer\"><code>iconv</code></a> and friends to convert between encodings."}, {"owner": {"reputation": 458, "user_id": 1189679, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f5c03606a9842d8d6a89f57593f67992?s=128&d=identicon&r=PG", "display_name": "01BTC10", "link": "https://stackoverflow.com/users/1189679/01btc10"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487172211, "post_id": 42253073, "comment_id": 71664403, "body": "Thanks I am reading the docs."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1487175364, "post_id": 42253073, "comment_id": 71666953, "body": "Why <code>utf_16_be</code> and not UTF-8?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1487175372, "post_id": 42253073, "comment_id": 71666959, "body": "@zaph I have never encountered services allowing passwords outside of ASCII range... Not saying there are none though."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1487175480, "post_id": 42253073, "comment_id": 71667031, "body": "Do you think the Chinese use ASCII for passwords or that they do not use passwords? ASCII died a decade or more ago."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1487175630, "post_id": 42253073, "comment_id": 71667152, "body": "@zaph I don&#39;t know about Chinese, but I were living in two countries using a non-Latin based alphabets. And yes, the password on their websites are still using ASCII passwords (if you don&#39;t like the ASCII term, it is saying &quot;English letters, numbers and special characters such as @#$). Simply because you can type these thing on <i>any</i> keyboard."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1487175741, "post_id": 42253073, "comment_id": 71667235, "body": "NIST recommendation (<a href=\"https://pages.nist.gov/800-63-3/\" rel=\"nofollow noreferrer\">Special Publication 800-63-3: Digital Authentication Guidelines</a>): &quot;Applications must allow all printable ASCII characters, including spaces, and <b>should accept all UNICODE characters</b>, too, including emoji!&quot;"}, {"owner": {"reputation": 458, "user_id": 1189679, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f5c03606a9842d8d6a89f57593f67992?s=128&d=identicon&r=PG", "display_name": "01BTC10", "link": "https://stackoverflow.com/users/1189679/01btc10"}, "edited": false, "score": 0, "creation_date": 1487176744, "post_id": 42253073, "comment_id": 71667978, "body": "I understand my problem now... The original sofware is in Java and I think it encode string in UTF-16 big endian format. Now I need to figure out how to do the conversion in C so I get the same output."}, {"owner": {"reputation": 458, "user_id": 1189679, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f5c03606a9842d8d6a89f57593f67992?s=128&d=identicon&r=PG", "display_name": "01BTC10", "link": "https://stackoverflow.com/users/1189679/01btc10"}, "edited": false, "score": 0, "creation_date": 1487177905, "post_id": 42253073, "comment_id": 71668874, "body": "If I use the UTF-16 variable then it works: const uint8_t password[] = {0x00, 0x74, 0x00, 0x65, 0x00, 0x73, 0x00,                               0x74, 0x00, 0x31, 0x00, 0x32, 0x00, 0x33};"}, {"owner": {"reputation": 458, "user_id": 1189679, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f5c03606a9842d8d6a89f57593f67992?s=128&d=identicon&r=PG", "display_name": "01BTC10", "link": "https://stackoverflow.com/users/1189679/01btc10"}, "edited": false, "score": 0, "creation_date": 1487182384, "post_id": 42253073, "comment_id": 71671849, "body": "I just posted a solution if any of you want to review it. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 458, "user_id": 1189679, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f5c03606a9842d8d6a89f57593f67992?s=128&d=identicon&r=PG", "display_name": "01BTC10", "link": "https://stackoverflow.com/users/1189679/01btc10"}, "is_accepted": true, "score": 0, "last_activity_date": 1487200117, "last_edit_date": 1495539971, "creation_date": 1487182310, "answer_id": 42257060, "question_id": 42253073, "link": "https://stackoverflow.com/questions/42253073/converting-c-uint8-t-to-python-utf-16-be/42257060#42257060", "title": "Converting C uint8_t to python utf_16_be", "body": "<p>I found a solution inspired from: <a href=\"https://stackoverflow.com/questions/15449469/create-utf-16-string-from-char\">Create UTF-16 string from char*</a></p>\n\n<pre><code> size_t uint8_t_UTF_16(uint8_t *input, uint8_t *output, size_t inlen) {\n  size_t outlen = 0.0;\n\n  for (size_t i = 0; i &lt; inlen; i++) {\n    if (isascii(input[i])) {\n      output[i] = 0;\n      output[i + 1] = input[i / 2];\n      i++;\n      outlen += 2;\n    } else {\n      output[i] = input[i];\n      outlen += 0.5;\n    }\n  }\n\n  return outlen;\n}\n</code></pre>\n\n<p>It does work but I'm not sure that this solution is safe. </p>\n"}], "owner": {"reputation": 458, "user_id": 1189679, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f5c03606a9842d8d6a89f57593f67992?s=128&d=identicon&r=PG", "display_name": "01BTC10", "link": "https://stackoverflow.com/users/1189679/01btc10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 0, "accepted_answer_id": 42257060, "answer_count": 1, "score": 0, "last_activity_date": 1487200117, "creation_date": 1487171313, "last_edit_date": 1487177002, "question_id": 42253073, "link": "https://stackoverflow.com/questions/42253073/converting-c-uint8-t-to-python-utf-16-be", "title": "Converting C uint8_t to python utf_16_be", "body": "<p>I am trying to port a python script that use scrypt to generate a password.</p>\n\n<pre><code>import pylibscrypt\nscrypt = pylibscrypt.scrypt\n\npassword = 'test123'.encode(\"utf_16_be\", \"replace\")\nsalt = '384eaed91035763e'.decode('hex')\n\nkey = scrypt(password, salt, 16384, 8, 1, 32)\nprint (key.encode('hex'))\n</code></pre>\n\n<p>Result should be: 9f2117416c7b2de9419a81c4625a28e40c16ac92aaa3000bb2c35844b3839eb1</p>\n\n<p>In C, I use libsodium crypto_pwhash_scryptsalsa208sha256_ll() function.</p>\n\n<p>If I try to pass the password from that variable:</p>\n\n<pre><code>const uint8_t password[] = \"test123\"; \n</code></pre>\n\n<p>I am not getting the same key. I tried to remove \".encode(\"utf_16_be\", \"replace\")\" from the python script and then I get the same result. </p>\n\n<p>So how can I convert my C variable to be the same as the python variable?</p>\n\n<p>EDIT: The original software is in Java and seems to encode strings as UTF-16 big endian. Now I need to encode a C string to the same format.</p>\n"}, {"tags": ["c++", "c", "graphics", "2d", "sdl"], "comments": [{"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 1, "creation_date": 1487180085, "post_id": 42252972, "comment_id": 71670426, "body": "Would you delete that Google Drive link please, and move the output into the question? Since the question is reliant on that link, we do not want to risk the data being deleted, since that would mean we would have to delete the question. Remember that questions here are intended for posterity, not just for the original poster."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 1, "creation_date": 1487180152, "post_id": 42252972, "comment_id": 71670459, "body": "Please also read: <a href=\"http://meta.stackoverflow.com/q/326569/472495\">Under what circumstances may I add \u201curgent\u201d or other similar phrases to my question, in order to obtain faster answers?</a>."}], "answers": [{"comments": [{"owner": {"reputation": 52, "user_id": 7363838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EuVVC.jpg?s=128&g=1", "display_name": "Samagra Singh Tomar", "link": "https://stackoverflow.com/users/7363838/samagra-singh-tomar"}, "edited": false, "score": 0, "creation_date": 1487179198, "post_id": 42254962, "comment_id": 71669821, "body": "Can you please elaborate with an example?"}, {"owner": {"reputation": 52, "user_id": 7363838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EuVVC.jpg?s=128&g=1", "display_name": "Samagra Singh Tomar", "link": "https://stackoverflow.com/users/7363838/samagra-singh-tomar"}, "edited": false, "score": 0, "creation_date": 1487179216, "post_id": 42254962, "comment_id": 71669828, "body": "I know that would be tedious but please"}, {"owner": {"reputation": 52, "user_id": 7363838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EuVVC.jpg?s=128&g=1", "display_name": "Samagra Singh Tomar", "link": "https://stackoverflow.com/users/7363838/samagra-singh-tomar"}, "edited": false, "score": 0, "creation_date": 1487211118, "post_id": 42254962, "comment_id": 71684434, "body": "I finally got hang of what you wanted to say buddy. Thanks a lot. Project is on!!! Anyways, for other users, put <code>if(!(SDL_PollEvent(&amp;event))continue;</code> in while loop  in the beginning  &amp; see wonders. Remove the normal &#39;SDL_PollEvent(&amp;event)`. Thanks again."}], "tags": [], "owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "is_accepted": true, "score": 1, "last_activity_date": 1487176247, "creation_date": 1487176247, "answer_id": 42254962, "question_id": 42252972, "link": "https://stackoverflow.com/questions/42252972/sdl-mousebuttonevent-is-behaving-like-sdl-mousemotion/42254962#42254962", "title": "SDL_MouseButtonEvent is behaving like SDL_MouseMotion", "body": "<p><a href=\"https://wiki.libsdl.org/SDL_PollEvent\" rel=\"nofollow noreferrer\">SDL_PollEvent</a> doesn't block until event happens but instead returns 1 if it written event data into given structure, or 0 otherwise. You're ignoring this value and reading data from event anyway; noone said this event data is valid, especially first time, since it wasn't even initialised.</p>\n\n<p>Check return value and only use event if SDL said event is indeed happened. You can also use <code>SDL_WaitEvent</code>, which blocks until event happens.</p>\n"}], "owner": {"reputation": 52, "user_id": 7363838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EuVVC.jpg?s=128&g=1", "display_name": "Samagra Singh Tomar", "link": "https://stackoverflow.com/users/7363838/samagra-singh-tomar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 42254962, "answer_count": 1, "score": -2, "last_activity_date": 1487179915, "creation_date": 1487171036, "last_edit_date": 1487179915, "question_id": 42252972, "link": "https://stackoverflow.com/questions/42252972/sdl-mousebuttonevent-is-behaving-like-sdl-mousemotion", "title": "SDL_MouseButtonEvent is behaving like SDL_MouseMotion", "body": "<p>I coded an application but got erroneous outputs from SDL. To specify my problem, I have developed a simple code to count the number of clicks from mouse. I am using CodeBlocks with GCC compiler on Windows.</p>\n\n<p>The code goes as follows : </p>\n\n<pre><code>#include \"SDL.h\"\n#include &lt;stdio.h&gt;\n\nint main ( int argc , char *args[] )\n{\n    SDL_Window *window = NULL ;\n    SDL_Renderer *render = NULL ;\n    SDL_Event event ;\n    int counter = 0 ;\n\n    SDL_Init ( SDL_INIT_EVERYTHING ) ;\n\n    window = SDL_CreateWindow ( \"\" , 0 , 0 , 400 , 400 , SDL_WINDOW_BORDERLESS ) ;\n    render = SDL_CreateRenderer ( window , -1 , SDL_RENDERER_ACCELERATED ) ;\n\n    // Putting white color over window\n    SDL_SetRenderDrawColor ( render , 255 , 255 , 255 , 255 ) ;\n    SDL_RenderClear ( render ) ;\n    SDL_RenderPresent ( render ) ;\n\n    counter = 0 ; //Reinitializing counter to 0\n\n    //Starting Input\n    while ( 3 )\n    {\n         SDL_PollEvent ( &amp;event ) ;\n         if ( event.type == SDL_MOUSEBUTTONUP )\n         {\n               counter++ ;\n         }\n         else if ( event.type == SDL_KEYUP )\n         {\n               if ( event.key.keysym.sym == SDLK_ESCAPE )\n               {\n                     break ;\n               }\n         }\n    }\n\n    // Actual Clicks = 2\n    printf(\"CLicks = %d\" , counter );\n\n    return 0 ;\n}\n</code></pre>\n\n<p>The Output Always Is Fairly Huge &amp; Erroneous. The sample output is posted at</p>\n\n<p><a href=\"https://drive.google.com/open?id=0B2krxxnuHys0UzB3Q1d3MzJEVVU\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=0B2krxxnuHys0UzB3Q1d3MzJEVVU</a></p>\n"}, {"tags": ["c", "cvi"], "comments": [{"owner": {"reputation": 385, "user_id": 4965642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ed6921390414c649b9c1073f5e64f115?s=128&d=identicon&r=PG&f=1", "display_name": "Carles", "link": "https://stackoverflow.com/users/4965642/carles"}, "edited": false, "score": 2, "creation_date": 1487170908, "post_id": 42252773, "comment_id": 71663310, "body": "Were you able to convert it to grayscale manually or are you using any kind of function? If you are doing it manually, you can just set a threshold for the gray level, so below that threshold all values will be 0 and upper that threshold all the values will be 255, or 1 if you are storing that into a matrix"}, {"owner": {"reputation": 385, "user_id": 4965642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ed6921390414c649b9c1073f5e64f115?s=128&d=identicon&r=PG&f=1", "display_name": "Carles", "link": "https://stackoverflow.com/users/4965642/carles"}, "edited": false, "score": 0, "creation_date": 1487170987, "post_id": 42252773, "comment_id": 71663375, "body": "Anyway I would suggest you to have a look to opencv or any other Image processing library (there are simplers) since CVI uses some sort of extended ANSI C"}], "owner": {"reputation": 1, "user_id": 7569528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a91aaed78880af94bd9885710f822a?s=128&d=identicon&r=PG&f=1", "display_name": "Moran", "link": "https://stackoverflow.com/users/7569528/moran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 252, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487170539, "creation_date": 1487170539, "question_id": 42252773, "link": "https://stackoverflow.com/questions/42252773/labwindows-cvi-image-processing", "title": "LabWindows/CVI - Image processing", "body": "<p>I am trying to convert an image from RGB to black and white image (0 or 1). At first I have converted it to grayscale but now i'm stuck (the idea was to finde the middle which I did using matlabe and now I need to normalize evrything..).\nMaybe someone knows how to do it?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1487169890, "post_id": 42252467, "comment_id": 71662543, "body": "<i>&quot;Everything I use&quot;</i> - Is also everything you didn&#39;t mention."}, {"owner": {"reputation": 639, "user_id": 1671661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc8db94e53e65d244d49d87e506907a6?s=128&d=identicon&r=PG", "display_name": "KonstantinL", "link": "https://stackoverflow.com/users/1671661/konstantinl"}, "edited": false, "score": 1, "creation_date": 1487170536, "post_id": 42252467, "comment_id": 71663049, "body": "Actually, you should have no problem to feed this: const StructType* structArray[100];"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487184037, "post_id": 42252467, "comment_id": 71672856, "body": "C does not support constant arguments. These are still variable arguments."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487184056, "post_id": 42252467, "comment_id": 71672870, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a Minimal, Complete, and Verifiable example."}], "answers": [{"comments": [{"owner": {"reputation": 226, "user_id": 5455480, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JPFqqeOxF14/AAAAAAAAAAI/AAAAAAAAAGk/QOFrBHa4oK0/photo.jpg?sz=128", "display_name": "Brian Parry", "link": "https://stackoverflow.com/users/5455480/brian-parry"}, "edited": false, "score": 0, "creation_date": 1487171280, "post_id": 42252699, "comment_id": 71663625, "body": "This will definitely work although, I think you&#39;ll want an initializer to assign the values in your <code>orig</code> array."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 226, "user_id": 5455480, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JPFqqeOxF14/AAAAAAAAAAI/AAAAAAAAAGk/QOFrBHa4oK0/photo.jpg?sz=128", "display_name": "Brian Parry", "link": "https://stackoverflow.com/users/5455480/brian-parry"}, "edited": false, "score": 0, "creation_date": 1487171369, "post_id": 42252699, "comment_id": 71663693, "body": "@BrianParry - Why not. Although seeing as we know nothing about the structure, it&#39;s not too meaningful anyway. I kept it out for brevity, now back in."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1487171371, "last_edit_date": 1487171371, "creation_date": 1487170376, "answer_id": 42252699, "question_id": 42252467, "link": "https://stackoverflow.com/questions/42252467/const-pointer-to-const/42252699#42252699", "title": "Const pointer to const", "body": "<p>The first parameter of the function is a pointer to a (possibly first of several) const pointer(s) to const <code>StructType</code>. So a possible valid argument for <code>a</code> can be constructed as follows:</p>\n\n<pre><code>struct StructType const   orig[3] = { {} ,{} , {} };\nstruct StructType const * a[] = {\n    orig, orig + 1, orig + 2\n};\n\nPerformFusionCycle(a, /* Other arguments */);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1487170854, "post_id": 42252817, "comment_id": 71663266, "body": "What if <code>aa</code> is not <code>const</code>. Can you cast it to <code>const * const</code>? For example, <code>PerformFusionCycle((const * const)aa &#47;* rest *&#47; );</code>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1487171066, "post_id": 42252817, "comment_id": 71663435, "body": "@FiddlingBits - <code>aa</code> isn&#39;t const here either, it just holds const pointers to const :)"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1487171176, "post_id": 42252817, "comment_id": 71663533, "body": "@StoryTeller It is, isn&#39;t it? <code>StructType const * const aa[2] = { 0, 0 };</code>. Most likely, <code>PerformFusionCycle</code> is defining arguments as <code>const</code> because it doesn&#39;t modify them. The restriction shouldn&#39;t be on the caller."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1487171292, "post_id": 42252817, "comment_id": 71663635, "body": "@FiddlingBits - <i>&quot; It is, isn&#39;t it?&quot;</i> The elements of the array are const, not the array. I know it sound weird, but the <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.3p9\" rel=\"nofollow noreferrer\">standard says so</a>"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1487171419, "post_id": 42252817, "comment_id": 71663733, "body": "@StoryTeller Okay, I think I got you. You&#39;re saying the <code>const * const</code> has a redundant <code>const</code>. <code>aa</code> is <code>const</code> because it&#39;s an array (i.e. <code>aa++</code> is illegal.)."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1487171564, "post_id": 42252817, "comment_id": 71663849, "body": "@FiddlingBits - That&#39;s not what I said. But it&#39;s immaterial, I was simply nitpicking at a possible meaning of your comment. No matter."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1487171608, "post_id": 42252817, "comment_id": 71663892, "body": "@StoryTeller Sorry, I was mixing up yours and <code>KonstantinL</code>&#39;s comments."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1487172255, "post_id": 42252817, "comment_id": 71664454, "body": "Not quite: the first parameter is read as a <i>pointer to</i> <code>const</code> pointer to <code>const StructType</code>.  Context matters here -- function parameters are <i>never</i> arrays, and function parameter declarations of forms that in other contexts would declare arrays instead declare pointers.  But the corresponding actual argument can be the pointer obtained from decay of an array value."}], "tags": [], "owner": {"reputation": 149, "user_id": 7563260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d557f4efb03b8c22c7b0cc6b560c94?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/7563260/john-smith"}, "is_accepted": false, "score": 2, "last_activity_date": 1487171117, "last_edit_date": 1487171117, "creation_date": 1487170651, "answer_id": 42252817, "question_id": 42252467, "link": "https://stackoverflow.com/questions/42252467/const-pointer-to-const/42252817#42252817", "title": "Const pointer to const", "body": "<p>First; the parameter is read as an\n<code>array of const pointers to const StructType</code>.</p>\n\n<p><a href=\"http://cdecl.org/\" rel=\"nofollow noreferrer\">http://cdecl.org/</a> is a nice place for parsing the rather terse\nc/c++ declaration syntax.</p>\n\n<p>The following would work:</p>\n\n<pre><code>StructType const * aa[2] = { 0, 0 };\nPerformFusionCycle( aa /* rest */ );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1487170778, "post_id": 42252842, "comment_id": 71663210, "body": "<code>Making variables passed by value const is not meaningful. It is a local copy anyway, so who cares if it is modified by the function?</code> very wrong. It makes perfect sense to declare unmodifiable local variable and value-passed arguments as const."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1487170807, "post_id": 42252842, "comment_id": 71663236, "body": "@StoryTeller, I almost always explain the reasons for downvoting. So see above."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1487170903, "post_id": 42252842, "comment_id": 71663308, "body": "@SergeyA - It&#39;s better SO netiquette to comment and cast your vote in the same small epoch. Leads to less confusion anyway."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1487171085, "post_id": 42252842, "comment_id": 71663455, "body": "@SergeyA I&#39;ve had this debate so many times before and never heard any sound rationale from the const-spammers. Of course you don&#39;t either, you just say &quot;it makes perfect sense because I say so&quot;. So I take it that everytime you declare a plain pointer anywhere in your program, you declare it as <code>auto signed int* const ptr</code> rather than <code>int* ptr</code>? If not, your coding style is inconsistent."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1487171857, "post_id": 42252842, "comment_id": 71664100, "body": "I completely agree that the prototype goes way overboard with <code>const</code>ness. With respect to parameter <code>a</code>, however, it is plausible that the function wants to accept a (<code>const</code>ness-irrelevant) pointer to a series of one or more <code>const</code> pointers to <code>const</code> data."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1487172688, "post_id": 42252842, "comment_id": 71664789, "body": "@JohnBollinger The problem which such function interfaces is that you can&#39;t use them generically. Suppose that you have an array of pointers to const data. But the function expects an array of const pointers to data. Then you can&#39;t use the function without casting to <code>const type* const</code>, which looks quite weird and is hard to understand."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487172937, "post_id": 42252842, "comment_id": 71664975, "body": "That being said, there are actually valid uses of <code>type * const</code> function interfaces, and that is the very special case of embedded systems that need to store pointers in true NVM. Functions using such pointers from flash need to have <code>type* const</code> parameters, because &quot;casting away&quot; qualifiers in C is not well-defined behavior. But that valid argument is never raised in these debates, the const-spammers always mention subjective, muddled style concerns as the reason."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1487172962, "post_id": 42252842, "comment_id": 71664995, "body": "@Lundin, what do you mean? Yes, I always declare unmodifiable variables <code>const</code>. Helps me to catch nasty errors. If I had my way, <b>all</b> variables would be const by default, with explicit <code>mutable</code> for mutables."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1487173291, "post_id": 42252842, "comment_id": 71665258, "body": "@SergeyA I&#39;d hate to maintain that code and would probably resign from the maintenance job upon reading your first line of code: <code>const int main (const int argc, const char * const argv[])</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1487173777, "post_id": 42252842, "comment_id": 71665638, "body": "@Lundin, nope, because <code>const int</code> as a return value is not right anyways, and the second argument violates standard for <code>main</code> prototype. So you won&#39;t find code like this in my program."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1487175096, "post_id": 42252842, "comment_id": 71666737, "body": "@Lundin, the reason the function might intentionally be declared to accept a series of <code>const</code> pointers to <code>const</code> data is that that&#39;s what is actually expected.  In other words, to avoid having to cast <i>away</i> <code>const</code>ness of the pointers in the actual argument.  Neither with nor without the intermediate level of <code>const</code>ness can the function be used generically in the sense you mean."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1487170711, "creation_date": 1487170711, "answer_id": 42252842, "question_id": 42252467, "link": "https://stackoverflow.com/questions/42252467/const-pointer-to-const/42252842#42252842", "title": "Const pointer to const", "body": "<p>Const-correctness with pointer-to-pointers is very confusing in general. However, this function has gone out of hand. It has gone past const-correctness, which is good programming practice, into abusing the <code>const</code> keyword for little or no reason.</p>\n\n<pre><code>StructType const* const a[]\n</code></pre>\n\n<p>Here you probably just want to make sure that the function cannot modify the pointer-to-pointed-at data. Nothing else makes sense in a function prototype. The array syntax is not helpful either, because it will get adjusted to a pointer anyhow. Replace all of this with <code>const StructType** a</code>.</p>\n\n<pre><code>const float32 c,\n</code></pre>\n\n<p>Making variables passed by value <code>const</code> is not meaningful. It is a local copy anyway, so who cares if it is modified by the function? Typically this only serves to confuse the programmer. And in my experience, such code is often a pretty certain indication that the original programmer was confused.</p>\n\n<p>Similarly <code>StructType3 * const d</code> is not meaningful either. The pointer itself is passed by value, who cares if the function modifies the local copy?</p>\n\n<p>A call for sanity with const-correctness preserved would look like this:</p>\n\n<pre><code>void PerformFusionCycle( const StructType** a,\n                         const StructType2* b,\n                         float32 c,\n                         StructType3* d,\n                         StructType3* e)\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 3305253, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/E4xRg.jpg?s=128&g=1", "display_name": "El Puerco Total", "link": "https://stackoverflow.com/users/3305253/el-puerco-total"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1487229828, "creation_date": 1487169788, "last_edit_date": 1487229828, "question_id": 42252467, "link": "https://stackoverflow.com/questions/42252467/const-pointer-to-const", "title": "Const pointer to const", "body": "<p>I have the following function prototype:</p>\n\n<pre><code>void PerformFusionCycle( StructType const* const a[],\n                         StructType2 const* const b,\n                         const float32 c,\n                         StructType3 * const d,\n                         StructType3 * const e)\n</code></pre>\n\n<p>I want to feed the function with values but I don't understand how to declare and give values to the first parameter. If I declare a variable exactly as the parameter needs to be, I cannot modify it's values, \"not a modifiable lvalue\" error appears. If I declare a variable so I can modify it's values, then I gen \"incompatible types at argument #1\" compiler error. How should I do this ?</p>\n\n<p>Thanks !</p>\n"}, {"tags": ["c", "gcc", "c-preprocessor"], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1487169760, "post_id": 42252205, "comment_id": 71662438, "body": "Your diagnosis certainly seems correct, but the conclusion &quot;you can&#39;t&quot; must rely on some unstated assumptions about what kinds of solutions should be considered."}, {"owner": {"reputation": 13, "user_id": 4841272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7386541ae10c6c08046ce54265bd5d65?s=128&d=identicon&r=PG&f=1", "display_name": "ruxob", "link": "https://stackoverflow.com/users/4841272/ruxob"}, "edited": false, "score": 0, "creation_date": 1487169826, "post_id": 42252205, "comment_id": 71662492, "body": "thanks you for your feed back. Do you have any advice for resolve my problem ?"}, {"owner": {"reputation": 81656, "user_id": 8446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8f9c683775bfbe76ed4855a19b73dc81?s=128&d=identicon&r=PG", "display_name": "Roger Lipscombe", "link": "https://stackoverflow.com/users/8446/roger-lipscombe"}, "edited": false, "score": 0, "creation_date": 1487170234, "post_id": 42252205, "comment_id": 71662823, "body": "My assumption was that the OP didn&#39;t want to change the scenario of multiple .c files each including the same .h file. If OP is prepared to change that (as in your answer), then things change. However, I get the feeling that OP was looking for some kind of preprocessor magic. If so: &quot;you can&#39;t&quot;."}], "tags": [], "owner": {"reputation": 81656, "user_id": 8446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8f9c683775bfbe76ed4855a19b73dc81?s=128&d=identicon&r=PG", "display_name": "Roger Lipscombe", "link": "https://stackoverflow.com/users/8446/roger-lipscombe"}, "is_accepted": false, "score": 3, "last_activity_date": 1487169139, "creation_date": 1487169139, "answer_id": 42252205, "question_id": 42252112, "link": "https://stackoverflow.com/questions/42252112/how-to-avoid-multiple-warning-from-gcc-when-i-use-pre-processing-warning-in-a/42252205#42252205", "title": "How to avoid multiple warning from gcc when I use pre-processing #warning in a .h", "body": "<p>You can't. Logically, each <code>.c</code> file is compiled independently of the others. This implies that you can't issue a warning from the header file included in one, and have it suppressed in the others.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1487169557, "creation_date": 1487169557, "answer_id": 42252364, "question_id": 42252112, "link": "https://stackoverflow.com/questions/42252112/how-to-avoid-multiple-warning-from-gcc-when-i-use-pre-processing-warning-in-a/42252364#42252364", "title": "How to avoid multiple warning from gcc when I use pre-processing #warning in a .h", "body": "<p>Given that your header has a proper multiple-inclusion guard, it must be that your multiple warnings arise from compilation of multiple translation units (roughly, from separate C source files).  Each translation unit is compiled independently, so the multiple warnings are to be expected.</p>\n\n<p>You could potentially reduce the number of warnings to one by combining all your sources into a single translation unit, but I don't particularly recommend this.</p>\n\n<p>There are other possibilities related to the structure of your code, such as using macros and additional preprocessor conditionals to designate a specific translation unit -- maybe the one containing <code>main()</code> -- as the one for which the warning is emitted.  Approaches such as this are brittle, however, and I do not recommend them either.</p>\n\n<p>Your best options are probably to either live with the multiple warnings or suppress them altogether.</p>\n"}], "owner": {"reputation": 13, "user_id": 4841272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7386541ae10c6c08046ce54265bd5d65?s=128&d=identicon&r=PG&f=1", "display_name": "ruxob", "link": "https://stackoverflow.com/users/4841272/ruxob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487174288, "creation_date": 1487168910, "last_edit_date": 1487174288, "question_id": 42252112, "link": "https://stackoverflow.com/questions/42252112/how-to-avoid-multiple-warning-from-gcc-when-i-use-pre-processing-warning-in-a", "title": "How to avoid multiple warning from gcc when I use pre-processing #warning in a .h", "body": "<p>I hope you are well.\nI have a file version.h include in 5 files.c. \nWhen I compile I have 5 warnings: </p>\n\n<blockquote>\n  <p>version.h:10:2: warning:-- SUB_VERSION2<br>\n      version.h:10:2: warning:-- SUB_VERSION2<br>\n      version.h:10:2: warning:-- SUB_VERSION2<br>\n      version.h:10:2: warning:-- SUB_VERSION2<br>\n      version.h:10:2: warning:-- SUB_VERSION2</p>\n</blockquote>\n\n<p>and I want to have only one warning. I have looking on some website for a while and I find nothing about this problem. How to avoid this problem?</p>\n\n<p>Here is my .h and my .c is random:</p>\n\n<pre><code>#ifndef _VERSION_H\n#define _VERSION_H\n\n#define SUB_VERSION 1\n#define SUB_VERSION SUB_VERSION2\n\n#if (SUB_VERSION == SUB_VERSION2)\n   #ifndef WARNING_SUB_VERSION\n     #define WARNING_SUB_VERSION\n     #warning -- SUB_VERSION2\n   #endif\n\n#endif\n  #endif\n    #endif\n</code></pre>\n"}, {"tags": ["c", "multithreading", "synchronization"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1487169101, "post_id": 42252035, "comment_id": 71661942, "body": "Conceptually it may be similar. But in effect it won&#39;t be a busy wait loop, simply because that&#39;s a huge waste of CPU cycles that can be doing something useful. The waiting threads will not be scheduled for execution at all until the lock is released, and then one of them will be chosen by some strategy."}], "answers": [{"tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 2, "last_activity_date": 1487169789, "creation_date": 1487169789, "answer_id": 42252468, "question_id": 42252035, "link": "https://stackoverflow.com/questions/42252035/c-multithreading-what-is-the-advantage-of-a-read-lock-pthread-rwlock-rdlock-i/42252468#42252468", "title": "C multithreading: What is the advantage of a Read Lock (pthread_rwlock_rdlock) if all threads can access it simultaneously?", "body": "<p>When you read a protected resource you don't want it to change while you read it.</p>\n\n<p>A read locks blocks write locks!</p>\n\n<p>That means that while you have a read lock, someone trying to get a write lock will have to wait until you, and anyone else who has a read lock, are finished reading. Since reading doesn't change the resource it is OK that several readers read concurrently.</p>\n\n<p>Note that the definition of a reading operation in this context is any operation that doesn't change the state of the protected resource. So for the purposes of read/write locks, if the protected resource is a stream (like <code>stdin</code> or a socket), reading from it will change its state and should require a write lock.</p>\n"}, {"tags": [], "owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "is_accepted": false, "score": 3, "last_activity_date": 1487169807, "creation_date": 1487169807, "answer_id": 42252475, "question_id": 42252035, "link": "https://stackoverflow.com/questions/42252035/c-multithreading-what-is-the-advantage-of-a-read-lock-pthread-rwlock-rdlock-i/42252475#42252475", "title": "C multithreading: What is the advantage of a Read Lock (pthread_rwlock_rdlock) if all threads can access it simultaneously?", "body": "<p>The purpose of a read lock, is to block writers.</p>\n\n<ul>\n<li>A <strong>reader</strong> can get a lock if there are <strong>no write locks</strong>.</li>\n<li>A <strong>writer</strong> can get a lock if there are <strong>no locks at all</strong>.</li>\n</ul>\n\n<p>Neither has a trivial implementation, the one\nyou suggested for <br> example have a race-condition, \nand would sometimes fail.</p>\n"}], "owner": {"reputation": 562, "user_id": 4920521, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da5bf694a8abd194543f2c2f5f0b4d35?s=128&d=identicon&r=PG", "display_name": "Mano-Wii", "link": "https://stackoverflow.com/users/4920521/mano-wii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1487172363, "creation_date": 1487168727, "last_edit_date": 1487172363, "question_id": 42252035, "link": "https://stackoverflow.com/questions/42252035/c-multithreading-what-is-the-advantage-of-a-read-lock-pthread-rwlock-rdlock-i", "title": "C multithreading: What is the advantage of a Read Lock (pthread_rwlock_rdlock) if all threads can access it simultaneously?", "body": "<p>I'm noob on this thread issue :\\</p>\n\n<p>I imagine that Write Lock behaves like a <code>while</code> that waits for the confirmation of a global variable. Like:</p>\n\n<pre><code>/* pthread_rwlock_wrlock */\n\n    while (is_blocked) {\n        /* waiting */\n    }\n    is_blocked = true;\n\n    (writing code...)\n\n/* pthread_rwlock_unlock */\n    is_blocked = false;\n</code></pre>\n\n<p>Is that correct? And how Read Lock works? If it is shared, why use?</p>\n\n<p><strong>information:</strong></p>\n\n<p>pthread_rwlock_rdlock() \u2013 get a shared read lock</p>\n\n<p>pthread_rwlock_wrlock() \u2013 get an exclusive write lock</p>\n"}, {"tags": ["c", "bash", "output", "fork", "parents"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1487168874, "post_id": 42251937, "comment_id": 71661749, "body": "if you add a <code>\\n</code> to the prompt line, does it work as expected?"}], "answers": [{"comments": [{"owner": {"reputation": 9227, "user_id": 2277815, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b02dba4479ba90129bd366dac7858959?s=128&d=identicon&r=PG", "display_name": "Hannu", "link": "https://stackoverflow.com/users/2277815/hannu"}, "edited": false, "score": 0, "creation_date": 1487170260, "post_id": 42252305, "comment_id": 71662848, "body": "This btw works identically to issuing  ls -al &amp; command at your shell prompt. It leaves you as well with an &quot;empty&quot; line as the new shell prompt appears somewhere in between, usually before any command output."}, {"owner": {"reputation": 124, "user_id": 6764854, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-7qldIMLvddw/AAAAAAAAAAI/AAAAAAAAADg/ty9jotc0CVw/photo.jpg?sz=128", "display_name": "Kurt Anderson", "link": "https://stackoverflow.com/users/6764854/kurt-anderson"}, "edited": false, "score": 1, "creation_date": 1487172769, "post_id": 42252305, "comment_id": 71664854, "body": "Thanks I see what you mean! The osh&gt; is appearing earlier, not because it doesn&#39;t work, but because it does work. My expectation of how it&#39;s supposed to work was just off. Thanks so much!"}], "tags": [], "owner": {"reputation": 9227, "user_id": 2277815, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b02dba4479ba90129bd366dac7858959?s=128&d=identicon&r=PG", "display_name": "Hannu", "link": "https://stackoverflow.com/users/2277815/hannu"}, "is_accepted": true, "score": 3, "last_activity_date": 1487169740, "last_edit_date": 1487169740, "creation_date": 1487169398, "answer_id": 42252305, "question_id": 42251937, "link": "https://stackoverflow.com/questions/42251937/process-hangs-in-parent-process-in-c/42252305#42252305", "title": "Process Hangs in Parent Process in C", "body": "<p>Your code actually works fine.  The only problem is, you spit out the prompt \"too quickly\", and the new prompt appears before the command output. See a test output here:</p>\n\n<pre><code>osh&gt; ls -al &amp;\nosh&gt; total 1944    --- LOOK HERE\ndrwxrwxrwt 15 root root       4096 Feb 15 14:34 .\ndrwxr-xr-x 24 root root       4096 Feb  3 02:13 ..\ndrwx------  2 test test       4096 Feb 15 09:30 .com.google.Chrome.5raKDW\ndrwx------  2 test test       4096 Feb 15 13:35 .com.google.Chrome.ueibHT\ndrwx------  2 test test       4096 Feb 14 12:15 .com.google.Chrome.ypZmNA\n</code></pre>\n\n<p>See the \"LOOK HERE\" line. The new prompt is there, but ls command output appears later.  Your application is responsive to new commands, even though the prompt is displayed before command output. You can verify all this by using a command that does not produce any output, for example</p>\n\n<pre><code>osh&gt; sleep 10 &amp;\n</code></pre>\n\n<p>Hannu</p>\n"}], "owner": {"reputation": 124, "user_id": 6764854, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-7qldIMLvddw/AAAAAAAAAAI/AAAAAAAAADg/ty9jotc0CVw/photo.jpg?sz=128", "display_name": "Kurt Anderson", "link": "https://stackoverflow.com/users/6764854/kurt-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "accepted_answer_id": 42252305, "answer_count": 1, "score": 1, "last_activity_date": 1487169740, "creation_date": 1487168489, "question_id": 42251937, "link": "https://stackoverflow.com/questions/42251937/process-hangs-in-parent-process-in-c", "title": "Process Hangs in Parent Process in C", "body": "<p>I have a program that seems to be hanging in the parent process. It's a mock bash program that accepts commands like bash, and then operates them. The code is below. (Note this is simplified code without error checking so it would be more easily readable. Assume its all properly nested inside main function)</p>\n\n<pre><code>#define MAX_LINE 80\n\nchar *args[MAX_LINE/2 + 1];\nwhile(should_run){\n    char *inputLine = malloc(MAX_LINE);\n    runConcurrently = 0; /*Resets the run in background to be line specific */\n\n    fprintf(stdout, \"osh&gt; \"); /*Command prompt austhetic */\n    fflush(stdout);\n\n   /*User Input */\n   fgets(inputLine, MAX_LINE, stdin); \n\n   /*Reads into Args array */\n   char *token = strtok(inputLine, \" \\n\");\n    int spot = 0;\n    while (token){\n        args[spot] = token;\n        token = strtok(NULL, \" \\n\");\n        spot++;\n    }\n    args[spot] = NULL;\n\n    /* checks for &amp; and changes flag */   \n    if (strcmp(args[spot-1], \"&amp;\") == 0){\n            runConcurrently = 1;\n            args[spot-1] = NULL;\n    }\n\n\n    /* Child-Parent Fork Process */\n    pid_t pid; \n    pid = fork(); /*Creates the fork */\n    if (pid == 0){\n        int run = execvp(args[0], args);\n        if (run &lt; 0){\n            fprintf(stdout, \"Commands Failed, check syntax!\\n\");\n            exit(1);\n        }\n    }\n    else if (pid &gt; 0) {\n        if (!runConcurrently){\n            wait(NULL);\n        }\n    }\n    else {\n        fprintf(stderr, \"Fork Failed \\n\");\n        return 1;\n    }\n}\n</code></pre>\n\n<p>The problem here has to do with when I use an '&amp;' and activate the run concurrently flag. This makes it so the parent no longer has to wait, however when I do this I lose some functionality. </p>\n\n<p>Expected output: </p>\n\n<pre><code>osh&gt; ls-a &amp;\n//Outputs a list of all in current directory\nosh&gt; \n</code></pre>\n\n<p>So I want it to run them concurently, but give control of the terminal back to me. But instead I get this. </p>\n\n<p>Actual Result: </p>\n\n<pre><code>osh&gt; ls -a &amp;\n//Outputs a list of all in current directory\n     &lt;---- Starts a new line without the osh&gt;. And stays like this indefinitely\n</code></pre>\n\n<p>And if I type something into this blank area the result is: </p>\n\n<pre><code>osh&gt; ls -a &amp;\n//Outputs a list of all in current directory\nls -a \n//Outputs a list of all in current directory\nosh&gt; osh&gt; //I get two osh&gt;'s this time. \n</code></pre>\n\n<p>This is my first time working with split processes and fork(). Am I missing something here? When I run it concurrently should I be choosing processes or something like that? Any help is welcome, thanks! </p>\n"}, {"tags": ["c", "arrays", "tcp", "server", "glimpse"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1487169702, "post_id": 42251916, "comment_id": 71662385, "body": "Is <code>bufer</code> simply a <code>HeartbeatPackage</code> that was cast to a <code>char*</code>? What&#39;s its origin?"}, {"owner": {"reputation": 13, "user_id": 7564361, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210133408786090/picture?type=large", "display_name": "O\u011fuzhan Avc\u0131", "link": "https://stackoverflow.com/users/7564361/o%c4%9fuzhan-avc%c4%b1"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1487174046, "post_id": 42251916, "comment_id": 71665843, "body": "Buffer comes from my server \t` char buffer[1024] ` its stores my input comes from client.(hope i think right)"}], "owner": {"reputation": 13, "user_id": 7564361, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210133408786090/picture?type=large", "display_name": "O\u011fuzhan Avc\u0131", "link": "https://stackoverflow.com/users/7564361/o%c4%9fuzhan-avc%c4%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487413897, "creation_date": 1487168422, "last_edit_date": 1487413897, "question_id": 42251916, "link": "https://stackoverflow.com/questions/42251916/how-to-use-some-part-of-array-in-glimpse-structure-c-language", "title": "How to use some part of array in Glimpse Structure c language", "body": "<p>Basically, my question is how can I use some part of an array? For example, first byte equal to <code>structure.code</code> then other four byte equal <code>structure.timestamps</code> etc. I'm new, thanks for understands. \nMy function:</p>\n\n<pre><code>void GlimpseStructures(char buffer[])\n{\n    int i = 0;\n    HeartbeatPackage a;\n    a.to_little_endian();\n\n    a.code = buffer[0];\n    for (i = 1; i &lt; 5; i++) \n    {\n        a.timestamp += buffer[i];\n    }\n\n    for (i = 5; i &lt; 9; i++) \n    {\n        buffer[i] += a.nanosecond_elapsed;\n        printf(\"nanosecond:%d/n\", a.nanosecond_elapsed);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pdcurses", "roguelike"], "comments": [{"owner": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "edited": false, "score": 1, "creation_date": 1487167951, "post_id": 42251576, "comment_id": 71661110, "body": "Where <i>exactly</i> does it crash ? Please, use a debugger and tell us which line causes segfault."}, {"owner": {"reputation": 1, "user_id": 7569270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee93aeacf7b6ac0df24e940fd49765?s=128&d=identicon&r=PG&f=1", "display_name": "Will Reid", "link": "https://stackoverflow.com/users/7569270/will-reid"}, "reply_to_user": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "edited": false, "score": 0, "creation_date": 1487168537, "post_id": 42251576, "comment_id": 71661504, "body": "Unhandled exception at 0x00221CD5 in Game.exe: 0xC0000005: Access violation reading location 0xBEE161B4. (The message from Visual Studios) The line is ;bool pass = tileArray[mapArray[y][x]].passable; (in the function isPassable) However, when I change pass to equal TRUE, the breakpoint moves to ;mvprintw(y, x ,tileArray[mapArray[cam.y + y][cam.x + x]].tile); (in the drawScreenMap function). Thanks for taking a look at it!"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1487168922, "post_id": 42251576, "comment_id": 71661784, "body": "Just a guesss: You may be using bad indexes into the array. I suggest you create two functions: <code>int getMapValue(int x, int y);</code> and <code>bool setMapValue(int x, int y, int value);</code>. Use these functions whenever accessing the <code>mapArray</code>. You can then add code to ensure your indexes are in range. If they aren&#39;t then print an error."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1487170187, "post_id": 42251576, "comment_id": 71662780, "body": "Welcome to Stack Overflow! Please <a href=\"https://stackoverflow.com/posts/42251576/edit\">edit</a> your code to reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem.  Your current code includes much that is peripheral to your problem - a minimal sample normally looks similar to a good unit test: only performing one task, with input values specified for reproducibility."}, {"owner": {"reputation": 1, "user_id": 7569270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee93aeacf7b6ac0df24e940fd49765?s=128&d=identicon&r=PG&f=1", "display_name": "Will Reid", "link": "https://stackoverflow.com/users/7569270/will-reid"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1487171336, "post_id": 42251576, "comment_id": 71663659, "body": "@Johnny Mopp I did as you suggested, and the breakpoint moved to ;mapValue = mapArray[y][x]; in the function getMapValue. Is there a problem in how I get the value from the array? Thanks"}, {"owner": {"reputation": 1, "user_id": 7569270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee93aeacf7b6ac0df24e940fd49765?s=128&d=identicon&r=PG&f=1", "display_name": "Will Reid", "link": "https://stackoverflow.com/users/7569270/will-reid"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1487171470, "post_id": 42251576, "comment_id": 71663775, "body": "@Toby Speight I will try change it tomorrow (as its already quite late in Hong Kong). My code does look pretty messy XD"}], "answers": [{"tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1487432551, "creation_date": 1487432551, "answer_id": 42317213, "question_id": 42251576, "link": "https://stackoverflow.com/questions/42251576/pdcurses-in-c-keeps-showing-access-violation-read-location/42317213#42317213", "title": "PDCurses in C (Keeps showing &quot;Access violation read location&quot;)", "body": "<p>The problem is that the variable <code>cam</code> used in <code>isPassable</code> was not initialized.</p>\n\n<p>I used valgrind (on Linux) to see this:</p>\n\n<pre><code>==11010== 1 errors in context 1 of 7:\n==11010== Invalid read of size 8\n==11010==    at 0x400B72: drawScreenMap (foo.c:151)\n==11010==    by 0x40091E: main (foo.c:77)\n==11010==  Address 0x58e8c2a0 is not stack'd, malloc'd or (recently) free'd\n==11010==\n==11010==\n==11010== 7 errors in context 2 of 7:\n==11010== Conditional jump or move depends on uninitialised value(s)\n==11010==    at 0x40100E: isPassable (foo.c:203)\n==11010==    by 0x400A46: handleInput (foo.c:124)\n==11010==    by 0x400928: main (foo.c:79)\n==11010==  Uninitialised value was created by a heap allocation\n==11010==    at 0x4C28BED: malloc (vg_replace_malloc.c:263)\n==11010==    by 0x400974: actorSetup (foo.c:97)\n==11010==    by 0x4008F9: main (foo.c:69)\n</code></pre>\n\n<p>Also, turning on compiler warnings showed a few problems (Visual Studio has compiler warnings...).</p>\n"}], "owner": {"reputation": 1, "user_id": 7569270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ee93aeacf7b6ac0df24e940fd49765?s=128&d=identicon&r=PG&f=1", "display_name": "Will Reid", "link": "https://stackoverflow.com/users/7569270/will-reid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487432551, "creation_date": 1487167544, "last_edit_date": 1487237035, "question_id": 42251576, "link": "https://stackoverflow.com/questions/42251576/pdcurses-in-c-keeps-showing-access-violation-read-location", "title": "PDCurses in C (Keeps showing &quot;Access violation read location&quot;)", "body": "<p>I just started a new project (a roguelike) yesterday. It's my first, and I keep running into the same error. After trying to implement a scrolling map, I ran the program, but whenever I pressed a key Visual Studio would show a message box saying that there was an access violation reading location.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include \"curses.h\"\n#include &lt;stdlib.h&gt;\n\n#define MAX_HEIGHT 16\n#define MAX_WIDTH 21\n\ntypedef struct tile\n{\n    char *tile;\n    bool passable;\n}tile;\n\ntypedef struct player\n{\n    int xpos;\n    int ypos;\n    int dx;\n    int dy;\n}player;\n\ntile tileArray[] = {\n    {\".\",TRUE},\n    {\"#\",FALSE},\n    {\"+\",FALSE},\n    {\"/\",TRUE}\n};\n\nint mapArray[15][21] = {\n    { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },\n    { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },\n    { 0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0 },\n    { 0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0 },\n    { 0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0 },\n    { 0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0 },\n    { 0,0,1,1,1,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0 },\n    { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },\n    { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },\n    { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },\n    { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },\n    { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },\n    { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },\n    { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },\n    { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 }\n\n};\n\ntypedef struct camPos\n{\n    int y;\n    int x;\n}camPos;\n\nvoid initSetup();\nplayer *actorSetup();\nvoid refreshScreenMap();\nvoid handleInput();\nvoid drawScreenMap();\nvoid interactionOpen();\nbool isPassable(int y, int x);\nvoid startupScreen();\n\nplayer *user;\ncamPos cam;\n\nint main()\n{\n    initSetup();\n\n    user = actorSetup();\n    cam.y = 2;\n    cam.x = 2;\n\n    startupScreen();\n\n    while (TRUE) \n    {\n        drawScreenMap();\n        refreshScreenMap();\n        handleInput();\n        clear();\n    }\n    endwin();\n    return 0;\n}\n\nvoid initSetup()\n{\n    initscr();\n    noecho();\n    raw();\n    keypad(stdscr,TRUE);\n}\n\nplayer *actorSetup()\n{\n    player *newactor;\n    newactor = malloc(sizeof(player));\n    newactor-&gt;xpos = 10;\n    newactor-&gt;ypos = 10;\n    return newactor;\n}\n\nvoid handleInput()\n{\n    char button = getch();\n    switch (button)\n    {\n        case 's':\n            user-&gt;dy++;\n            break;\n        case 'w':\n            user-&gt;dy--;\n            break;\n        case 'a':\n            user-&gt;dx--;\n            break;\n        case 'd':\n            user-&gt;dx++;\n            break;\n        case 'o':\n            interactionOpen(user);\n            break;\n    }\n    if (isPassable(user-&gt;ypos + user-&gt;dy, user-&gt;xpos + user-&gt;dx))\n    {\n        user-&gt;ypos += user-&gt;dy;\n        user-&gt;xpos += user-&gt;dx;\n    }\n    else\n    {\n        user-&gt;dx = 0;\n        user-&gt;dy = 0;\n    }\n}\n\nvoid refreshScreenMap()\n{\n    mvprintw(6, 8, \"@\");\n    cam.x += user-&gt;dx;\n    cam.y += user-&gt;dy;\n}\n\nvoid drawScreenMap()\n{\n    for (int y = 1; y &lt; 12; y++)\n    {\n        move(y,1);\n        for (int x = 1; x &lt; 16; x++)\n        { \n            mvprintw(y, x, tileArray[mapArray[cam.y + y][cam.x + x]].tile);\n        }\n    }\n}\n\nvoid interactionOpen()\n{\n    if (mapArray[user-&gt;ypos + 1][user-&gt;xpos] == 2)\n    {\n        mapArray[user-&gt;ypos + 1][user-&gt;xpos] = 3;\n    }\n    else if (mapArray[user-&gt;ypos - 1][user-&gt;xpos] == 2)\n    {\n        mapArray[user-&gt;ypos - 1][user-&gt;xpos] = 3;\n    }\n    else if (mapArray[user-&gt;ypos][user-&gt;xpos + 1] == 2)\n    {\n        mapArray[user-&gt;ypos][user-&gt;xpos + 1] = 3;\n    }\n    else if (mapArray[user-&gt;ypos][user-&gt;xpos - 1] == 2)\n    {\n        mapArray[user-&gt;ypos][user-&gt;xpos - 1] = 3;\n    }\n    else if (mapArray[user-&gt;ypos + 1][user-&gt;xpos] == 3)\n    {\n        mapArray[user-&gt;ypos + 1][user-&gt;xpos] = 2;\n    }\n    else if (mapArray[user-&gt;ypos - 1][user-&gt;xpos] == 3)\n    {\n        mapArray[user-&gt;ypos - 1][user-&gt;xpos] = 2;\n    }\n    else if (mapArray[user-&gt;ypos][user-&gt;xpos + 1] == 3)\n    {\n        mapArray[user-&gt;ypos][user-&gt;xpos + 1] = 2;\n    }\n    else if (mapArray[user-&gt;ypos][user-&gt;xpos - 1] == 3)\n    {\n        mapArray[user-&gt;ypos][user-&gt;xpos - 1] = 2;\n    }\n}\n\nbool isPassable(int y, int x)\n{\n    bool pass = tileArray[mapArray[y][x]].passable;\n    if (pass == FALSE)\n    {\n        return FALSE;\n    }\n    else if (y &lt; cam.y || y &gt;= (cam.y + 11))\n    {\n        return FALSE;\n    }\n    else if (x &lt; cam.x || x &gt;= (cam.x + 15))\n    {\n        return FALSE;\n    }\n    else\n    {\n        return TRUE;\n    }\n}\n\nvoid startupScreen()\n{\n    mvprintw(10, 20, \"________\");\n    mvprintw(11, 20, \"\\\\______ \\\\  __ __  ____    ____   ____  ____   ____  \");\n    mvprintw(12, 20, \" |    |  \\\\|  |  \\\\/    \\\\  / ___\\\\_/ __ \\\\/  _ \\\\ /    \\\\ \");\n    mvprintw(13, 20, \" |    `   \\\\  |  /   |  \\\\/ /_/  &gt;  ___(  &lt;_&gt; )   |  \\\\ \");\n    mvprintw(14, 20, \"/_______  /____/|___|  /\\\\___  / \\\\___  &gt;____/|___|  / \");\n    mvprintw(15, 20, \"        \\\\/           \\\\//_____/      \\\\/           \\\\/\");\n    mvprintw(16, 20, \"Made by Will Reid\");\n    mvprintw(17, 20, \"Press any key to start...\");\n    getch();\n    clear();\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "memory", "stdio"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1487167565, "post_id": 42251528, "comment_id": 71660830, "body": "Please note that <code>sizeof(char)</code> is 1 always."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1487167573, "post_id": 42251528, "comment_id": 71660838, "body": "just saw that: <code>sizeof(char *)</code> it should be"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1487167660, "post_id": 42251528, "comment_id": 71660908, "body": "<code>fread(&amp;z, 1, 4, f)</code>? Why do you assume that <code>z</code> is four bytes?  You also implicitly assume that your data file comes from a machine with the same endianness as the one you&#39;re processing on."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1487168048, "post_id": 42251528, "comment_id": 71661169, "body": "This code has other fundamental problems apart from the mentioned bugs. See <a href=\"http://stackoverflow.com/questions/42094465/correctly-allocating-multi-dimensional-arrays\">Correctly allocating multi-dimensional arrays</a>."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1487167712, "post_id": 42251588, "comment_id": 71660943, "body": "To the OP: @M41Npain and please check that <code>malloc()</code> did not return <code>NULL</code>. It might be too much for this code, but it&#39;s a habit that you MUST develop"}, {"owner": {"reputation": 268, "user_id": 5830611, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Xv99J.jpg?s=128&g=1", "display_name": "Amarildo", "link": "https://stackoverflow.com/users/5830611/amarildo"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1487168083, "post_id": 42251588, "comment_id": 71661196, "body": "@IharobAlAsimi cplusplus.com say <i>If the function failed to allocate the requested block of memory, a null pointer is returned.</i> what it is referring?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 268, "user_id": 5830611, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Xv99J.jpg?s=128&g=1", "display_name": "Amarildo", "link": "https://stackoverflow.com/users/5830611/amarildo"}, "edited": false, "score": 1, "creation_date": 1487168224, "post_id": 42251588, "comment_id": 71661297, "body": "@M41Npain In C <code>NULL</code> is the standard symbol for a null pointer. If, in your case, <code>stringhe</code> is equal to <code>NULL</code> after the first call to <code>malloc</code>, then the allocation failed and you should not continue using the pointer."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 4, "last_activity_date": 1487167593, "creation_date": 1487167593, "answer_id": 42251588, "question_id": 42251528, "link": "https://stackoverflow.com/questions/42251528/deallocation-of-memory-in-arrays/42251588#42251588", "title": "Deallocation of memory in arrays", "body": "<p>Your initial call to <code>malloc</code> is wrong. You allocate space for <code>x</code> <em>characters</em>, not for pointers to <code>char</code>.</p>\n\n<p>Your second call inside the loop is wrong to, as you don't allocate space for the terminator.</p>\n\n<p>Lastly, and unrelated to the problems you ask about, but if the <code>fread</code> calls inside the loop fails, you will have memory leaks.</p>\n"}, {"comments": [{"owner": {"reputation": 268, "user_id": 5830611, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Xv99J.jpg?s=128&g=1", "display_name": "Amarildo", "link": "https://stackoverflow.com/users/5830611/amarildo"}, "edited": false, "score": 0, "creation_date": 1487168849, "post_id": 42251925, "comment_id": 71661727, "body": "I did not add +1 in <code>stringhe[i] = malloc((z)* sizeof(char));</code> because after the malloc i see with the the debugger, that the malloc function always allocates more space that is necessary, in fact then I added <code>stringhe[i][z]= 0;</code> to cut the rest"}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "reply_to_user": {"reputation": 268, "user_id": 5830611, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Xv99J.jpg?s=128&g=1", "display_name": "Amarildo", "link": "https://stackoverflow.com/users/5830611/amarildo"}, "edited": false, "score": 1, "creation_date": 1487169041, "post_id": 42251925, "comment_id": 71661884, "body": "@M41Npain When allocating <code>char*</code> pointers, it is always safe to add that extra +1 when using <code>malloc()</code>. It may work now, but in the future, if you don&#39;t do this, and <code>malloc()</code> does not allocate enough space for the <code>\\0</code>, then you will be accessing beyond the bounds of what was allocated."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "reply_to_user": {"reputation": 268, "user_id": 5830611, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Xv99J.jpg?s=128&g=1", "display_name": "Amarildo", "link": "https://stackoverflow.com/users/5830611/amarildo"}, "edited": false, "score": 1, "creation_date": 1487169191, "post_id": 42251925, "comment_id": 71662003, "body": "@M41Npain When dealing with heap allocation, its better to be safe then sorry. I&#39;m glad I could help :)."}], "tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 1, "last_activity_date": 1487168449, "creation_date": 1487168449, "answer_id": 42251925, "question_id": 42251528, "link": "https://stackoverflow.com/questions/42251528/deallocation-of-memory-in-arrays/42251925#42251925", "title": "Deallocation of memory in arrays", "body": "<p>There are some problems with your code:</p>\n\n<ul>\n<li><p>This line:</p>\n\n<pre><code>char **stringhe = malloc((x) * sizeof(char));\n</code></pre>\n\n<p>Needs to be:</p>\n\n<pre><code>char **stringhe = malloc((x) * sizeof(char*)); /* or sizeof *stringhe */\n</code></pre>\n\n<p>As you need to allocate <code>x</code> <code>char*</code> pointers for <code>stringhe</code>. </p></li>\n<li><p>Inside your first for loop, you are not adding <code>+1</code> for null-terminator. It needs to be instead:</p>\n\n<pre><code>stringhe[i] = malloc(z+1); /* sizeof(char) = 1 */\n</code></pre></li>\n<li><p>You need to check return of <code>malloc()</code>. It can return <code>NULL</code> if unsuccessful. You can do this by simply checking <code>if (ptr == NULL)</code>, then exit the program. It would unsafe to allow a failed <code>malloc()</code> to continue in the program. </p></li>\n<li><p><code>for (int i = 0; i &lt; t; i++)</code> is comparing an <code>int</code> with <code>size_t</code>. This should be <code>for (size_t i = 0; i &lt; t; i++)</code> instead. </p></li>\n</ul>\n"}], "owner": {"reputation": 268, "user_id": 5830611, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Xv99J.jpg?s=128&g=1", "display_name": "Amarildo", "link": "https://stackoverflow.com/users/5830611/amarildo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "accepted_answer_id": 42251588, "answer_count": 2, "score": 0, "last_activity_date": 1487168449, "creation_date": 1487167421, "question_id": 42251528, "link": "https://stackoverflow.com/questions/42251528/deallocation-of-memory-in-arrays", "title": "Deallocation of memory in arrays", "body": "<p>I've done a program that opens the file (read binary), and saves all the words(in the file) in an array of char (allocated dynamically in base of the length of the word).<br>\nThis is the code:</p>\n\n<pre><code>char **leggi_stringhe(const char *filename, size_t *size) {\n    FILE *f = fopen(filename, \"rb\");\n    if (f == NULL) {\n        *size = 0;\n        return NULL;\n    }\n\n    int x;\n\n    if (fread(&amp;x, 1, 4, f) != 4) {\n        *size = 0;\n        return NULL;\n    }\n\n    char **stringhe = malloc((x) * sizeof(char));\n\n    for (int i = 0; i &lt; x; i++) {\n        int z = 0;\n        if (fread(&amp;z, 1, 4, f) != 4) {\n            *size = 0;\n            return NULL;\n        }\n\n        stringhe[i] = malloc((z)* sizeof(char));\n        if (fread(stringhe[i], 1, z, f) != z) {\n            *size = 0;\n            return NULL;\n        }\n        stringhe[i][z] = 0;\n    }\n    *size = x;\n    fclose(f);\n    return stringhe;\n}\n\nint main(void) {\n    size_t t;\n    char **a = leggi_stringhe(\"file1.bin\", &amp;t);\n\n    for (int i = 0; i &lt; t; i++)\n        free(a[i]);\n    free(a);;\n}\n</code></pre>\n\n<p>The program works, but i have problems with memory deallocation.\nAfter calling of <strong>leggi_stringhe</strong> function, the variable <strong>a</strong> contains:</p>\n\n<pre><code>a[0] = \"first\"\na[1] = \"second\"\na[2] = \"third\"\n</code></pre>\n\n<p>but when i'm trying to deallocate the whole <strong>a</strong> variable as i wrote, the debugger stops with a warning.<br>\nI was inspired by this question for writing my code <a href=\"https://stackoverflow.com/questions/4641476/using-dynamic-memory-allocation-for-arrays\">Using Dynamic Memory allocation for arrays</a>, but do not understand why I get this error when i try to deallocate. </p>\n"}, {"tags": ["c", "pthreads"], "comments": [{"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 3, "creation_date": 1487166703, "post_id": 42251168, "comment_id": 71660171, "body": "If you want to do actions sequentially, why use threads at all? Threads are for things done in parallel."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1487166731, "post_id": 42251168, "comment_id": 71660204, "body": "You set parent to sleep while child is running so...."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 1, "creation_date": 1487166995, "post_id": 42251168, "comment_id": 71660410, "body": "@DarkFalcon It smell like school assignment"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1487167006, "post_id": 42251168, "comment_id": 71660419, "body": "You can use a condition variable that the child waits on until the parent signals... Even a timed wait... <code>pthread.h</code> is full of useful synchronization primitives, you just have to browse through it..."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1487179141, "post_id": 42251168, "comment_id": 71669779, "body": "You can <code>wait()</code> for your children, but not for your parent.  You&#39;ll need some other form of synchronization.  A pipe can be useful for this.  Worst case, poll until your parent&#39;s pid disappears or changes its start time (indicating that it&#39;s been recycled)."}], "answers": [{"tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 1, "last_activity_date": 1487169978, "creation_date": 1487169978, "answer_id": 42252554, "question_id": 42251168, "link": "https://stackoverflow.com/questions/42251168/how-to-execute-parent-befor-child-thread-pthreads-in-c/42252554#42252554", "title": "how to execute parent befor child thread - pthreads in c", "body": "<p>The simplest way to exclude concurrent execution is a lock. Have the \"parent\" (original thread) take a lock before calling <code>pthread_create</code>, and only unlock it when it's ready for the \"child\" (new thread) to to run. The \"child\" should take the lock before doing anything; it can then unlock it immediately if it wants, or keep it to control access to shared state.</p>\n"}], "owner": {"reputation": 735, "user_id": 4838284, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/31f9133efa4665383038a34262e8b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4838284/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1326, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487169978, "creation_date": 1487166454, "last_edit_date": 1487166525, "question_id": 42251168, "link": "https://stackoverflow.com/questions/42251168/how-to-execute-parent-befor-child-thread-pthreads-in-c", "title": "how to execute parent befor child thread - pthreads in c", "body": "<p>I want to make it so that parent process executes before the child thread does. I'm not sure where I'm going wrong to get the order my program is outputting. </p>\n\n<pre><code>int status = 0;\n\nvoid *print_child(void *arg)\n{\n\n    while (status == 0)\n    {\n        printf(\"Signal hasn't changed..\\n\");\n        sleep(1);\n\n    }\n    printf(\"The child has started...\\n\");\n    printf(\"The child is done! \\n \");\n}\n\nint main()\n{\n    pthread_t child;\n    pthread_create(&amp;child, NULL, &amp;print_child, NULL);\n\n    sleep(2);\n    printf(\"The parent has started...\\n\");\n    printf(\"The parent is done! \\n\");\n\n    status++;\n\n    if (pthread_join(child, NULL))\n    {\n        printf(\"ERROR\");\n        exit(1);\n    }\n}\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>signal has changed\nsignal has changed\nparent has started\nparent is done\nchild has started\nchild is done\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 852, "user_id": 1917004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e12a0abb82fac3b2293597967a7ec90d?s=128&d=identicon&r=PG", "display_name": "ctrl-shift-esc", "link": "https://stackoverflow.com/users/1917004/ctrl-shift-esc"}, "edited": false, "score": 1, "creation_date": 1487165139, "post_id": 42250641, "comment_id": 71659081, "body": "Please format the question better and read <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 10, "creation_date": 1487165182, "post_id": 42250641, "comment_id": 71659112, "body": "Note that <a href=\"http://en.cppreference.com/w/c/io/fgetc\" rel=\"nofollow noreferrer\">the <code>fgetc</code> function</a> returns an <code>int</code>. This is important to make your comparison to <code>EOF</code> work reliably."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1487165232, "post_id": 42250641, "comment_id": 71659155, "body": "You are using <code>setbuf()</code> for <code>stdout</code> which is buffered, why do you think that would affect the input?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1487165874, "post_id": 42250641, "comment_id": 71659612, "body": "To clarify my previous comment, I mean that it will not make characters print instantly which is what you apparently want. To achieve such behavior you should work directly with the serial interface for your terminal."}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1487166187, "post_id": 42250641, "comment_id": 71659836, "body": "Actually, the problem is on the input side and is out of your program. It is a property of the terminal (and OS) that the input is available to your program only after having typed the whole line. If you are under Linux, try to type ^D (Control-D) after each character to send it to your program char by char."}, {"owner": {"reputation": 45, "user_id": 7039525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fe5c73b7ff2393db0729a46e2e2425e?s=128&d=identicon&r=PG&f=1", "display_name": "fang xing", "link": "https://stackoverflow.com/users/7039525/fang-xing"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487167054, "post_id": 42250641, "comment_id": 71660456, "body": "@Someprogrammerdude Thank you for pointing out my mistake"}, {"owner": {"reputation": 45, "user_id": 7039525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fe5c73b7ff2393db0729a46e2e2425e?s=128&d=identicon&r=PG&f=1", "display_name": "fang xing", "link": "https://stackoverflow.com/users/7039525/fang-xing"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1487167191, "post_id": 42250641, "comment_id": 71660558, "body": "@IharobAlAsimi I tried to enter the buffer and the output buffer is closed"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 7039525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fe5c73b7ff2393db0729a46e2e2425e?s=128&d=identicon&r=PG&f=1", "display_name": "fang xing", "link": "https://stackoverflow.com/users/7039525/fang-xing"}, "edited": false, "score": 0, "creation_date": 1487167569, "post_id": 42251204, "comment_id": 71660835, "body": "I understand what you mean, this is the cause of the OS, not the cause of the program"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 45, "user_id": 7039525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fe5c73b7ff2393db0729a46e2e2425e?s=128&d=identicon&r=PG&f=1", "display_name": "fang xing", "link": "https://stackoverflow.com/users/7039525/fang-xing"}, "edited": false, "score": 0, "creation_date": 1487174196, "post_id": 42251204, "comment_id": 71665980, "body": "@fangxing: Yes."}], "tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": true, "score": 3, "last_activity_date": 1487166545, "creation_date": 1487166545, "answer_id": 42251204, "question_id": 42250641, "link": "https://stackoverflow.com/questions/42250641/trouble-to-help-me-a-little-c-program/42251204#42251204", "title": "Trouble to help me a little C program", "body": "<p>By default, terminals are in <em>canonical mode</em>, where the input is passed to the program only when a line delimiter (newline, end of input at the start of a line, and so on) is typed.</p>\n\n<p>The way to manipulate the terminal -- for example, to get keypresses immediately when they occur -- varies between operating systems. The Curses libraries (<a href=\"https://github.com/Bill-Gray/PDCurses\" rel=\"nofollow noreferrer\">PDCurses</a> for Windows, ncurses for just about all others) hide the differences under a single interface, so you might wish to look into that.</p>\n"}], "owner": {"reputation": 45, "user_id": 7039525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fe5c73b7ff2393db0729a46e2e2425e?s=128&d=identicon&r=PG&f=1", "display_name": "fang xing", "link": "https://stackoverflow.com/users/7039525/fang-xing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 42251204, "answer_count": 1, "score": -1, "last_activity_date": 1487179596, "creation_date": 1487165054, "last_edit_date": 1487179596, "question_id": 42250641, "link": "https://stackoverflow.com/questions/42250641/trouble-to-help-me-a-little-c-program", "title": "Trouble to help me a little C program", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    char ch;\n    setbuf(stdout, NULL);\n    while ( (ch = fgetc(stdin) ) != '\\n' &amp;&amp; ch != EOF){\n        fputc(ch, stdout);\n        fflush(stdout);\n    };\n    return 0;\n}\n</code></pre>\n\n<p>Why I see is not a character to enter a character on the console, but in the press the Enter key together after all the output, the key is that I close the output buffer and refresh the output buffer.</p>\n"}, {"tags": ["c", "embedded", "kaa", "esp32"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1487163548, "post_id": 42250055, "comment_id": 71658019, "body": "<i>has somebody experience?</i> is this your question?"}, {"owner": {"reputation": 2620, "user_id": 944017, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/1fBsW.png?s=128&g=1", "display_name": "yakobom", "link": "https://stackoverflow.com/users/944017/yakobom"}, "edited": false, "score": 0, "creation_date": 1487163695, "post_id": 42250055, "comment_id": 71658109, "body": "Welcome to StackOverflow. Please take a look here in order to see how to ask a good question: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1487164242, "post_id": 42250055, "comment_id": 71658472, "body": "Moreover, porting an SDK is quite strange...."}, {"owner": {"reputation": 109, "user_id": 7142312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rU7mJ.jpg?s=128&g=1", "display_name": "Y. Verzun", "link": "https://stackoverflow.com/users/7142312/y-verzun"}, "edited": false, "score": 0, "creation_date": 1487167125, "post_id": 42250055, "comment_id": 71660509, "body": "Please, add &quot;kaa&quot; tag to such a questions."}], "answers": [{"tags": [], "owner": {"reputation": 109, "user_id": 7142312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rU7mJ.jpg?s=128&g=1", "display_name": "Y. Verzun", "link": "https://stackoverflow.com/users/7142312/y-verzun"}, "is_accepted": false, "score": 2, "last_activity_date": 1487167061, "creation_date": 1487167061, "answer_id": 42251383, "question_id": 42250055, "link": "https://stackoverflow.com/questions/42250055/porting-esp8266-sdk-to-esp32/42251383#42251383", "title": "Porting ESP8266 SDK to ESP32", "body": "<p>Currently there is no full description how to port the Kaa C SDK on a specific platform, but we are working on this item. Thus I am going to describe general steps here.</p>\n\n<p>Kaa C SDK doesn't need any OS. \nTo use the Kaa C SDK on a specific platform, you must implement the following routines:</p>\n\n<p>Mandatory:<br>\nDynamic allocation.<br>\nNetwork <a href=\"https://github.com/kaaproject/kaa/blob/master/client/client-multi/client-c/src/kaa/platform/ext_tcp_utils.h\" rel=\"nofollow noreferrer\">communication</a>.<br>\nTime routine.<br>\nPublic key <a href=\"https://github.com/kaaproject/kaa/blob/master/client/client-multi/client-c/src/kaa/platform/ext_key_utils.h\" rel=\"nofollow noreferrer\">generation</a> (it may be some hard-coded key, see the ESP8266 <a href=\"https://github.com/kaaproject/kaa/blob/master/client/client-multi/client-c/listfiles/platform/esp8266/CMakeLists.txt#L49\" rel=\"nofollow noreferrer\">demo</a>).<br>\nSHA-1 <a href=\"https://github.com/kaaproject/kaa/blob/master/client/client-multi/client-c/src/kaa/platform/ext_sha.h\" rel=\"nofollow noreferrer\">calculation</a> (you may use a <a href=\"https://github.com/kaaproject/kaa/blob/master/client/client-multi/client-c/src/kaa/platform-impl/common/sha.c\" rel=\"nofollow noreferrer\">default</a> implementation). </p>\n\n<p>Optional (it means you can provide empty implementation):<br>\nFile system interaction (<a href=\"https://github.com/kaaproject/kaa/blob/master/client/client-multi/client-c/src/kaa/platform/ext_configuration_persistence.h\" rel=\"nofollow noreferrer\">one</a>, <a href=\"https://github.com/kaaproject/kaa/blob/master/client/client-multi/client-c/src/kaa/platform/ext_status.h\" rel=\"nofollow noreferrer\">two</a>).<br>\nDebug <a href=\"https://github.com/kaaproject/kaa/blob/master/client/client-multi/client-c/src/kaa/platform/ext_system_logger.h\" rel=\"nofollow noreferrer\">logging</a>.  </p>\n\n<p>This <a href=\"http://docs.kaaproject.org/display/KAA/Linux#Linux-CendpointSDK\" rel=\"nofollow noreferrer\">page</a> describes configuration parameters for building the Kaa C SDK on various platforms.<br>\nHere are instructions how to develop applications based on the Kaa C SDK on TI <a href=\"http://docs.kaaproject.org/display/KAA/Texas+Instruments+CC3200\" rel=\"nofollow noreferrer\">\u0421\u042132XX</a> and <a href=\"http://docs.kaaproject.org/display/KAA/ESP8266\" rel=\"nofollow noreferrer\">ESP8266</a> platforms.<br>\nAlso, you can find <a href=\"https://github.com/kaaproject/sample-apps/\" rel=\"nofollow noreferrer\">here</a> the source code of demo applications for these platforms.  </p>\n\n<p>Second - if you are using a protocol which is not yet officially supported, you can implement a <a href=\"http://docs.kaaproject.org/display/KAA/Creating+custom+transport\" rel=\"nofollow noreferrer\">custom transport</a>.</p>\n\n<p>The alternative option is when you integrate the Kaa SDK into a gateway (we call it \"actor gateway\"). The actor gateway instantiates an endpoint actor per each physical device. The actor handles communication with the actual device and presents itself to the cloud as a virtual representation of the sensor, etc. </p>\n\n<p>The actor gateway can be effectively used when you can\u2019t install the Kaa SDK on your device or you need to use some sophisticated protocol for device-server connectivity.</p>\n"}], "owner": {"reputation": 9, "user_id": 7568871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e25184ea6c4ae9f7491b0a08fbd12978?s=128&d=identicon&r=PG&f=1", "display_name": "Andy R.", "link": "https://stackoverflow.com/users/7568871/andy-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "closed_date": 1487182887, "answer_count": 1, "score": 0, "last_activity_date": 1507362564, "creation_date": 1487163425, "last_edit_date": 1507362564, "question_id": 42250055, "link": "https://stackoverflow.com/questions/42250055/porting-esp8266-sdk-to-esp32", "closed_reason": "Needs details or clarity", "title": "Porting ESP8266 SDK to ESP32", "body": "<p>Does anyone have experience with porting the kaa-client SDK, which supports only ESP8266, to the newer ESP32?</p>\n\n<p>I have started with adapting the TCP APIs.</p>\n"}, {"tags": ["c", "compiler-errors", "switch-statement"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 7, "creation_date": 1487161222, "post_id": 42249209, "comment_id": 71656399, "body": "<code>Switch(choise)</code> --&gt;&gt; <code>switch(choise)</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1487161331, "post_id": 42249209, "comment_id": 71656477, "body": "One of the points of creating a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>, besides getting the minimal program that exhibits your problem, is as a way to find errors like these yourself."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1487161352, "post_id": 42249209, "comment_id": 71656497, "body": "<code>gets(s);</code> --&gt; <code>scanf(&quot;%d %d %d %d %d&quot;, s, s + 1, s + 2, s + 3, s + 4);</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1487161431, "post_id": 42249209, "comment_id": 71656567, "body": "<code>avg=a[0]+a[1]+a[2]&#47;3;</code> --&gt; <code>avg=(a[0]+a[1]+a[2])&#47;3;</code>"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1487161484, "post_id": 42249209, "comment_id": 71656601, "body": "@Tan_007  You forgot to enter a value into the variable choise.:)"}, {"owner": {"reputation": 368, "user_id": 7568566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f0e00f677cd8cb3ad4536e88279dfa7?s=128&d=identicon&r=PG&f=1", "display_name": "Tan-007", "link": "https://stackoverflow.com/users/7568566/tan-007"}, "edited": false, "score": 0, "creation_date": 1549810785, "post_id": 42249209, "comment_id": 96028127, "body": "Beginning was hard. ;)"}], "answers": [{"comments": [{"owner": {"reputation": 368, "user_id": 7568566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f0e00f677cd8cb3ad4536e88279dfa7?s=128&d=identicon&r=PG&f=1", "display_name": "Tan-007", "link": "https://stackoverflow.com/users/7568566/tan-007"}, "edited": false, "score": 0, "creation_date": 1487161357, "post_id": 42249263, "comment_id": 71656504, "body": "oh god...thank you sir..solved the mistake...was trying since last two hours..thank you.."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 7, "last_activity_date": 1487161232, "creation_date": 1487161232, "answer_id": 42249263, "question_id": 42249209, "link": "https://stackoverflow.com/questions/42249209/expected-before-token-error-in-function-switch-in-c/42249263#42249263", "title": "expected &quot;;&quot; before &quot;{&quot; token error in function switch in c", "body": "<p>The keyword is <code>switch</code>, not <code>Switch</code>. You confused your compiler into thinking you are calling a function, and as such missing a statement terminator after the line, like so:</p>\n\n<pre><code>Switch(choice);\n</code></pre>\n"}], "owner": {"reputation": 368, "user_id": 7568566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f0e00f677cd8cb3ad4536e88279dfa7?s=128&d=identicon&r=PG&f=1", "display_name": "Tan-007", "link": "https://stackoverflow.com/users/7568566/tan-007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1249, "favorite_count": 0, "closed_date": 1487162760, "accepted_answer_id": 42249263, "answer_count": 1, "score": -2, "last_activity_date": 1487162350, "creation_date": 1487161110, "last_edit_date": 1487162350, "question_id": 42249209, "link": "https://stackoverflow.com/questions/42249209/expected-before-token-error-in-function-switch-in-c", "closed_reason": "Not suitable for this site", "title": "expected &quot;;&quot; before &quot;{&quot; token error in function switch in c", "body": "<p>I am learning the C language as my very first language. I am using the gcc code blocks compiler. I was trying to use the <code>switch-case</code> statements after watching a video. I am getting an error that the <code>;</code> was expected before <code>{</code> statement token. I tried but could not find any mistake. Can anyone please help me out with this?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\nint main()\n{\n    int b,sum,avg,multi,choise,s[5],a[3];\n    printf(\"Please select any option\\n\");\n    printf(\"1. I want addition of numbers.\\n\");\n    printf(\"2. I want to take average of numbers.\\n\");\n    printf(\" 3. I want the multiplication table of a number.\\n\");\n    printf(\"4. Exit\\n\");\n\n    Switch(choise)\n    {\n        case 1:\n            printf(\"You have selected the 1st option,\\n\");\n            printf(\"Please enter any 5 numbers you want to add.\\n\");\n            gets(s);\n            sum=s[0]+s[1]+s[2]+s[3]+s[4];\n            printf(\"The sum of the numbers you entered is %d\",sum);\n            break;\n        case 2:\n            printf(\"You have selected the 2nd option,\\n\");\n            printf(\"Enter any 3 numbers to take average of them.\\n\");\n            gets(a);\n            avg=a[0]+a[1]+a[2]/3;\n            printf(\"The average of the three numbers you entered is %d\",avg);\n            break;\n        case 3:\n            printf(\"You have selected the 3rd option,\\n\");\n            printf(\"Please enter the number you want the  multiplication table of,\\n\");\n            scanf(\"%d\",&amp;multi);\n            for(b=1;b&lt;=10;b++)\n            {\n            printf(\"%d * %d = %d\\n\",multi,b,multi*b);\n            }\n            break;\n        default:\n            printf(\"invalid input.\\n\");\n            break;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "answers": [{"tags": [], "owner": {"reputation": 22, "user_id": 7562819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c26f8285274fa52041073003b9e766?s=128&d=identicon&r=PG&f=1", "display_name": "shubham kz", "link": "https://stackoverflow.com/users/7562819/shubham-kz"}, "is_accepted": true, "score": 0, "last_activity_date": 1487351169, "last_edit_date": 1487351169, "creation_date": 1487159845, "answer_id": 42248750, "question_id": 42248553, "link": "https://stackoverflow.com/questions/42248553/about-the-two-dimension-array-address-what-does-this-statement-mean/42248750#42248750", "title": "About the Two-dimension array address. What does this statement mean\uff1f", "body": "<p>This is an example I found on Google</p>\n\n<pre><code>int a=9;\nint *b = &amp;a;\nprintf(\"%p\\n\",b);\n</code></pre>\n\n<p>On a Win32 system, the following result will be printed:</p>\n\n<blockquote>\n  <p>0018FF20</p>\n</blockquote>\n\n<p>So as you can see that the specifier <code>p</code> is used to get the address where the pointer is currently pointing.</p>\n\n<pre><code>As a result *(a+i)+j would give you the address where the pointer is pointing in a 2-D array\nAs a result *(a+0)+0 would give you the 1st row and 1st column address\n*(a+0)+1 would give you the 1st row and 2nd column address\n*(a+1)+0 would give you the 2nd row and 1st column address.\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7560705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2955382ec6fe3807b17bcf0bd53f733a?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.F", "link": "https://stackoverflow.com/users/7560705/mr-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 42248750, "answer_count": 1, "score": -1, "last_activity_date": 1495727042, "creation_date": 1487159307, "last_edit_date": 1495727042, "question_id": 42248553, "link": "https://stackoverflow.com/questions/42248553/about-the-two-dimension-array-address-what-does-this-statement-mean", "title": "About the Two-dimension array address. What does this statement mean\uff1f", "body": "<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n  int a[2][3] = {3,5,4,7,9,0};\n  int i, j;\n  for (i=0; i&lt;2; i++)\n  {\n    for (j=0; j&lt;3; j++)\n    printf(\u201c%p\\n\u201d, *(a+i) +j); // Statment 1\n  }\n}\n</code></pre>\n\n<p>As you can see\uff0cwhy does the marked statement means it was an address point to the Two-dimension <code>array[a]</code>? Doesn't it means that is an value of the <code>array[a]</code>? I don't understand if the asterisk means it got value from the (a+i)?</p>\n"}, {"tags": ["c", "signals"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1487156842, "post_id": 42247445, "comment_id": 71653464, "body": "My <a href=\"https://en.wikipedia.org/wiki/Magic_8-Ball\" rel=\"nofollow noreferrer\">Magic 8 Ball</a> says &quot;Reply Hazy, Try Again&quot;.  Please post <a href=\"http://stackoverflow.com/help/mcve\">a Minimal, Complete, and Verifiable Example</a> - preferably with actual code."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1487158069, "post_id": 42247445, "comment_id": 71654347, "body": "Seems much easier andessential racy to simply use a second queue for high-priority messages."}, {"owner": {"reputation": 89, "user_id": 3053087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/48b7fd06cc2026da7e27bd72a3a16a3c?s=128&d=identicon&r=PG&f=1", "display_name": "user3053087", "link": "https://stackoverflow.com/users/3053087/user3053087"}, "edited": false, "score": 0, "creation_date": 1487160063, "post_id": 42247445, "comment_id": 71655664, "body": "agreed, but I&#39;m limited by the client in the scope of changes that I can make."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1487162059, "post_id": 42247445, "comment_id": 71657013, "body": "Also, SysV IPC message queues already support prioritizing messages.  Why not just have a thread blocking on high-priority messages, and let another thread handle lower-priority ones?  I strongly suspect your signal-handling code is way too complex and likely calls non-async-signal-safe functions - note that <code>msgrcv()</code> and other SysV IPC functions are not async-signal-safe and should never be called from a signal handler."}, {"owner": {"reputation": 89, "user_id": 3053087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/48b7fd06cc2026da7e27bd72a3a16a3c?s=128&d=identicon&r=PG&f=1", "display_name": "user3053087", "link": "https://stackoverflow.com/users/3053087/user3053087"}, "edited": false, "score": 0, "creation_date": 1487202894, "post_id": 42247445, "comment_id": 71682158, "body": "The signal receipt of the flash preemption is ONLY enable during message sending (basically write system calls) - not during the IPC msgrcv calls."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 3053087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/48b7fd06cc2026da7e27bd72a3a16a3c?s=128&d=identicon&r=PG&f=1", "display_name": "user3053087", "link": "https://stackoverflow.com/users/3053087/user3053087"}, "edited": false, "score": 0, "creation_date": 1487160118, "post_id": 42248019, "comment_id": 71655702, "body": "yes, in an upcoming version the signal handling calls are all made using POSIX compliant calls using sigaction."}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 2, "last_activity_date": 1487157921, "creation_date": 1487157921, "answer_id": 42248019, "question_id": 42247445, "link": "https://stackoverflow.com/questions/42247445/c-signal-usage-and-process-using-ipc-message-queues/42248019#42248019", "title": "C Signal usage and process using IPC message queues", "body": "<p>You should use sigaction for that:</p>\n\n<pre><code>struct sigaction act;\nmemset(&amp;act, 0, sizeof(act);\nact.sa_handler = sighandler_func;\nsigaction(SIGUSR2, &amp;act, NULL);\n</code></pre>\n\n<p>This way, the signal handler is automatically called with the signal blocked, which caused the event (in your case SIGUSR2). If now a <code>SIGUSR2</code> arrives during the execution of the handler, it is blocked until the signal handler returns. Then, (when the signal is unblocked), the signal handler is called immediately again.</p>\n\n<p>However, you will have to handle the case, that multiple <code>SIGUSR2</code> arrive during one execution of the signal handler properly, since it will be called only <em>once</em> after return of the handler then.</p>\n"}], "owner": {"reputation": 89, "user_id": 3053087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/48b7fd06cc2026da7e27bd72a3a16a3c?s=128&d=identicon&r=PG&f=1", "display_name": "user3053087", "link": "https://stackoverflow.com/users/3053087/user3053087"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1487157921, "creation_date": 1487156368, "question_id": 42247445, "link": "https://stackoverflow.com/questions/42247445/c-signal-usage-and-process-using-ipc-message-queues", "title": "C Signal usage and process using IPC message queues", "body": "<p>I have a program that uses a signal (SIGUSR2) for setup a catch handler function to process high priority incoming messages.</p>\n\n<p>The program receives incoming messages off an IPC message queue using msgrcv() in its main loop.  When the sender of messages to the IPC message queue wants to notify the program that a high priority one is incoming, it sends SIGUSR2 to the process to have it stop processing any current message that may be being processed.</p>\n\n<p>In the signal catch handler function I first upon entry do:</p>\n\n<p>signal(SIGUSR2, SIG_IGN);</p>\n\n<p>to ignore any new signals for preemption to occur.</p>\n\n<p>then the code processes the preemption request where it stores the currently being processed message back into the queue, housekeeping, etc.  and then just before returning from the signal handler function it does:</p>\n\n<p>signal(SIGUSR2, sighandler_func);</p>\n\n<p>Question:  If another flash processing signal is received just a nanosecond after\n           the above signal call is issued, will the process re-dispatch to the\n           signal handler function again?  ie: if the code in the main loop where\n           it does the sighold(SIGUSR2) and sigrelse(SIGUSR2) to stop / start the\n           receipt of the preemption signal take precedence or is it just the \n           above signal call that re-energizes the signal handler?</p>\n"}, {"tags": ["c", "shell", "process", "execve"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1487155993, "post_id": 42247255, "comment_id": 71652846, "body": "Present your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. We have no idea what your input is or where the target is on your system! Are <code>args[0]</code>, <code>args</code> and <code>env</code> what you expected them to be? #debugging"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 3, "creation_date": 1487156298, "post_id": 42247255, "comment_id": 71653071, "body": "<i>No such file or directory.</i>...... quite clear.....wrong path to file?"}, {"owner": {"reputation": 91, "user_id": 7568035, "user_type": "registered", "profile_image": "https://graph.facebook.com/1317027101677122/picture?type=large", "display_name": "Brandon Busby", "link": "https://stackoverflow.com/users/7568035/brandon-busby"}, "edited": false, "score": 0, "creation_date": 1487156543, "post_id": 42247255, "comment_id": 71653252, "body": "That does make sense, but shouldn&#39;t the env (environment variable) parameter to the execve() function contain the path of ls in its PATH variable?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 2, "creation_date": 1487156595, "post_id": 42247255, "comment_id": 71653288, "body": "You might try to use <code>execvpe()</code> to use the PATH environment variable"}, {"owner": {"reputation": 91, "user_id": 7568035, "user_type": "registered", "profile_image": "https://graph.facebook.com/1317027101677122/picture?type=large", "display_name": "Brandon Busby", "link": "https://stackoverflow.com/users/7568035/brandon-busby"}, "edited": false, "score": 0, "creation_date": 1487156716, "post_id": 42247255, "comment_id": 71653381, "body": "Well, that was a simple fix.  Thanks!"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1487158129, "post_id": 42247255, "comment_id": 71654391, "body": "One more thing (since you emphasize, that the <code>env</code>-parameter contains the path-variable): This value will <i>not</i> be used by <code>execvpe()</code> and friends, but the value of the <i>current</i> environment of the process."}], "owner": {"reputation": 91, "user_id": 7568035, "user_type": "registered", "profile_image": "https://graph.facebook.com/1317027101677122/picture?type=large", "display_name": "Brandon Busby", "link": "https://stackoverflow.com/users/7568035/brandon-busby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 813, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487156400, "creation_date": 1487155905, "last_edit_date": 1487156400, "question_id": 42247255, "link": "https://stackoverflow.com/questions/42247255/how-can-a-program-be-executed-using-execve", "title": "How can a program be executed using execve()?", "body": "<p>I'm trying to perform a simple test using the exec() function by emulating a Linux shell.  The test program should take in commands in the following form: cmd arg1 arg2 ... where cmd is the command and arg1, arg2, ... are the command line arguments.  The exec() function will then call the program specified by cmd.</p>\n\n<p>What I have tried is:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n\nchar line[128];\nchar *args[30];\n\nint main(int argc, char *argv[], char *env[])\n{\n        // Read command and arguments with fmt: cmd arg1 arg2 ...\n        line[strcspn(fgets(line, 128, stdin), \"\\r\\n\")] = 0;\n\n        // Tokenize command for input to exec();\n        int i = 0;\n        args[i] = (char *)strtok(line, \" \");\n        while(args[++i] = (char *)strtok(NULL, \" \"));\n\n        if(fork())\n        { // Parent\n                int *status;\n                wait(status);\n                printf(\"Child exit status: %d\\n\", *status);\n                return 0;\n        }\n\n        // Child\n        int execRV = execve(args[0], args, env);\n        printf(\"execve return value: %d\\n\", execRV);\n        perror(NULL);\n\n        return 0;\n}\n</code></pre>\n\n<p>When the above program is run, execve() returns the error value -1 and the output from perror() is: No such file or directory.</p>\n\n<p>Running the program on the command line:</p>\n\n<pre><code>gcc -m32 [programName].c\na.out\nls\nexecve return value: -1\nNo such file or directory\nChild exit status: 0\n</code></pre>\n\n<p>The main parameters argc and argv should not matter for this example.  The env parameter, however, is the Linux environment variable, which contains the PATH variable.</p>\n"}, {"tags": ["c", "linux", "virtualization", "qemu", "vfio"], "comments": [{"owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "edited": false, "score": 0, "creation_date": 1488335734, "post_id": 42247093, "comment_id": 72181087, "body": "<a href=\"https://github.com/lattera/glibc/blob/master/sysdeps/posix/pread.c\" rel=\"nofollow noreferrer\">pread</a> includes (1) seek to the beginning of the file to get the current offset (and saving it as old_offset), (2) a seek to the request offset, (3) read, (4) finally seek back to the original offset (old_offset). Apparently, what you see is that at least one of these seeks is illegal. I wonder if this works <code>pread(fd,buf,nbytes,SEEK_CUR)</code> or what is the value of current offset from <code>long int ftell (FILE *stream)</code>"}, {"owner": {"reputation": 6957, "user_id": 147805, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a7f61061e9e54a67cc5cea2c5b428459?s=128&d=identicon&r=PG", "display_name": "Codeguard", "link": "https://stackoverflow.com/users/147805/codeguard"}, "edited": false, "score": 0, "creation_date": 1488484452, "post_id": 42247093, "comment_id": 72263362, "body": "Please post your QEMU commandline as well (especially the part where you config vfio devices)"}, {"owner": {"reputation": 145, "user_id": 2938173, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/kUuUf.jpg?s=128&g=1", "display_name": "igalvez", "link": "https://stackoverflow.com/users/2938173/igalvez"}, "edited": false, "score": 0, "creation_date": 1488544884, "post_id": 42247093, "comment_id": 72290818, "body": "This is the qemu command I am using: qemu-system-x86_64 -enable-kvm -m 1024 -device vfio-pci,host=01:00.0 -drive file=/disk0/vdisk.qcow2,id=disk,format=qcow2. This works fine in ubuntu"}], "answers": [{"tags": [], "owner": {"reputation": 145, "user_id": 2938173, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/kUuUf.jpg?s=128&g=1", "display_name": "igalvez", "link": "https://stackoverflow.com/users/2938173/igalvez"}, "is_accepted": true, "score": 2, "last_activity_date": 1503702334, "creation_date": 1503702334, "answer_id": 45890405, "question_id": 42247093, "link": "https://stackoverflow.com/questions/42247093/cant-use-pread-on-a-file-descriptor-for-a-vfio-pci-device/45890405#45890405", "title": "Can&#39;t use pread on a file descriptor for a vfio pci device", "body": "<p>I found what was the issue and have been meaning to post it here for a while for anyone who might hit this wall. It turns out the pread and pwrite functions of the uClibc version 0.9.33 are broken, resulting in those functions failing to work on offsets bigger than 4G. The patches from the link below fixed the problem for me: \n<a href=\"http://uclibc.10924.n7.nabble.com/backport-pread-pwrite-fix-for-0-9-33-branch-td11921.html\" rel=\"nofollow noreferrer\">http://uclibc.10924.n7.nabble.com/backport-pread-pwrite-fix-for-0-9-33-branch-td11921.html</a> </p>\n"}], "owner": {"reputation": 145, "user_id": 2938173, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/kUuUf.jpg?s=128&g=1", "display_name": "igalvez", "link": "https://stackoverflow.com/users/2938173/igalvez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 45890405, "answer_count": 1, "score": 7, "last_activity_date": 1503702334, "creation_date": 1487155435, "last_edit_date": 1488544749, "question_id": 42247093, "link": "https://stackoverflow.com/questions/42247093/cant-use-pread-on-a-file-descriptor-for-a-vfio-pci-device", "title": "Can&#39;t use pread on a file descriptor for a vfio pci device", "body": "<p>So I'm working with qemu kvm for a while and now I need to passthrough PCI devices. I did all required procedures to make this work: enabled iommu, modprobed vfio module, binded device to vfio and checked that vfio group was indeed created, etc...\nBut when I start qemu with any pci devices I get the error message:</p>\n\n<blockquote>\n  <p>vfio: Failed to read device config space</p>\n</blockquote>\n\n<p>I dig into qemu's code to see what the issue might be and found out that the issue occurs on a pread to the device. This happens even when the offset is 0, and doing a normal read on the file descriptor works without problems, as I changed the code to test it. \nChecking errno for the reason of pread failure gives me an '<strong>Illegal seek</strong>' error message.</p>\n\n<p>I wrote some code to see if this was happening outside of the qemu context(thought it might be something in qemu's code that was interfering with the device), and had the same issue. I also tried to read a normal file with pread and that works perfectly... Here is the code I wrote to test it, I broke it down a bit to be able to point out the more relevant parts:</p>\n\n<pre><code>#define BUF_SIZE 4096\n\nint main(){     \n    char buf[BUF_SIZE], buf1[BUF_SIZE], buf2[BUF_SIZE];         \n    int ret,group_fd, fd, fd2;  \n    size_t nbytes = 4096;   \n    ssize_t bytes_read;     \n    int iommu1, iommu2;\n\n    int container, group, device, i;\n    struct vfio_group_status group_status = { .argsz = sizeof(group_status) };\n    struct vfio_iommu_type1_info iommu_info = { .argsz = sizeof(iommu_info) };\n    struct vfio_iommu_type1_dma_map dma_map = { .argsz = sizeof(dma_map) };\n    struct vfio_device_info device_info = { .argsz = sizeof(device_info) };    \n    container = open(\"/dev/vfio/vfio\",O_RDWR);        \n\n    if(ioctl(container,VFIO_GET_API_VERSION)!=VFIO_API_VERSION){\n        printf(\"Unknown api version: %m\\n\");    \n    }   \n    group_fd = open(\"/dev/vfio/22\",O_RDWR);     printf(\"Group fd = %d\\n\", group_fd);\n    ioctl(group_fd, VFIO_GROUP_GET_STATUS, &amp;group_status);\n    if (!(group_status.flags &amp; VFIO_GROUP_FLAGS_VIABLE)){\n        printf(\"Group not viable\\n\");\n        return 1;\n    }   \n    ret = ioctl(group_fd, VFIO_GROUP_SET_CONTAINER,&amp;container);     \n    ret = ioctl(container,VFIO_SET_IOMMU,VFIO_TYPE1_IOMMU);         \n    ioctl(container, VFIO_IOMMU_GET_INFO, &amp;iommu_info);         \n\n    /* Allocate some space and setup a DMA mapping */            \n    dma_map.vaddr = (unsigned long int) mmap(0, 1024 * 1024, PROT_READ | PROT_WRITE,MAP_PRIVATE | MAP_ANONYMOUS, 0, 0);\n    dma_map.size = 1024 * 1024;\n    dma_map.iova = 0; /* 1MB starting at 0x0 from device view */\n    dma_map.flags = VFIO_DMA_MAP_FLAG_READ | VFIO_DMA_MAP_FLAG_WRITE;\n\n    ioctl(container, VFIO_IOMMU_MAP_DMA, &amp;dma_map);         \n    printf(\"\\n\\nGETTING DEVICE FD\\n\");      \n    fd = ioctl(group_fd,VFIO_GROUP_GET_DEVICE_FD,\"0000:08:00.0\");\n\n\n    printf(\"Fd = %d\\n\",fd);     \n    printf(\"VFIO_GROUP_GET_DEV_ID = %lu\\n\",VFIO_GROUP_GET_DEVICE_FD);   \n</code></pre>\n\n<p><strong>This read works fine, gives me a ret code of nbytes</strong> </p>\n\n<pre><code>    ret = read(fd,buf,nbytes);  \n    if(ret&lt;1){      \n       printf(\"ERROR: %m \\n\");  \n    }\n</code></pre>\n\n<p><strong>This pread fails with ret code -1 and errno 'Illegal seek'</strong></p>\n\n<pre><code>    ret = pread(fd,buf,nbytes,0);\n\n    if(ret&lt;0){      \n       printf(\"ERROR: %m \\n\");  \n    }   \n</code></pre>\n\n<p><strong>Here I try read and pread on a common file in sysfs to see if pread fails, and on both read and pread work just fine in this case:</strong>    </p>\n\n<pre><code>    printf(\"TESTING PREAD ON A COMMON FILE\\n\");     \n\n    fd2 = open(\"/sys/bus/pci/devices/0000:08:00.0/device\",O_RDONLY);       \n    ret = read(fd2,buf1,nbytes);    \n    if(ret&lt;0){\n        printf(\"ERROR: %m\\n\");  \n    }   \n    printf(\"Result from read: ret = %d, content = %s\\n\",ret,buf1);  \n    ret = pread(fd2,buf2,nbytes,2);     \n    if(ret&lt;0){\n        printf(\"ERROR: %m\\n\");  #\n    }   \n    printf(\"Result from pread: ret = %d, content = %s\\n\",ret,buf2);         \n    close(fd2);\n    getchar();\n    close(fd);\n    close(container);   \n    close(group_fd);    \n    return 0; \n}\n</code></pre>\n\n<p>I'm using a generic linux kernel v4.7.8 compiled with uClibc for an embedded system.... Anyone have any ideas of why this might be happening? I'm clueless right now!! T.T </p>\n\n<p>UPDATE:\nI installed ubuntu 16.04 (kernel v4.4.0) on the same machine and repeated the steps and pci passthrough works fine and the pread on my test code also works perfectly. So I'm not sure what is going wrong with the custom generic kernel.</p>\n\n<p>As per arash suggestion, I tried <strong>pread(fd,buf,nbytes,SEEK_CUR)</strong> and it gave me the same 'illegal seek' error. The offset I get from ftell is <strong>0xffffffff</strong> both in ubuntu and in the generic kernel.</p>\n"}, {"tags": ["c", "linux", "eclipse", "eclipse-cdt"], "comments": [{"owner": {"reputation": 3961, "user_id": 2337243, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccc4abd3234bfab082413d35cae7b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Souad", "link": "https://stackoverflow.com/users/2337243/souad"}, "edited": false, "score": 0, "creation_date": 1487154780, "post_id": 42246769, "comment_id": 71651954, "body": "what do you mean by files? what type of files? and a project in eclipse can obviosly have many c files. Did you try to do it and it didn&#39;t work?"}, {"owner": {"reputation": 11, "user_id": 7397780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c84666fff21576607220ab42c6b333ae?s=128&d=identicon&r=PG&f=1", "display_name": "user123", "link": "https://stackoverflow.com/users/7397780/user123"}, "reply_to_user": {"reputation": 3961, "user_id": 2337243, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccc4abd3234bfab082413d35cae7b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Souad", "link": "https://stackoverflow.com/users/2337243/souad"}, "edited": false, "score": 0, "creation_date": 1487154990, "post_id": 42246769, "comment_id": 71652123, "body": "file in the sense , a c program..i tried and i am able to create only one file under a project name"}, {"owner": {"reputation": 3961, "user_id": 2337243, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccc4abd3234bfab082413d35cae7b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Souad", "link": "https://stackoverflow.com/users/2337243/souad"}, "edited": false, "score": 0, "creation_date": 1487155050, "post_id": 42246769, "comment_id": 71652164, "body": "Are you creating them under <code>projectName&#47;src</code> folder?"}, {"owner": {"reputation": 11, "user_id": 7397780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c84666fff21576607220ab42c6b333ae?s=128&d=identicon&r=PG&f=1", "display_name": "user123", "link": "https://stackoverflow.com/users/7397780/user123"}, "reply_to_user": {"reputation": 3961, "user_id": 2337243, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccc4abd3234bfab082413d35cae7b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Souad", "link": "https://stackoverflow.com/users/2337243/souad"}, "edited": false, "score": 0, "creation_date": 1487155245, "post_id": 42246769, "comment_id": 71652321, "body": "hmm.......yes.."}, {"owner": {"reputation": 3961, "user_id": 2337243, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccc4abd3234bfab082413d35cae7b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Souad", "link": "https://stackoverflow.com/users/2337243/souad"}, "edited": false, "score": 1, "creation_date": 1487155402, "post_id": 42246769, "comment_id": 71652432, "body": "does this <a href=\"http://stackoverflow.com/questions/2424795/building-multiple-binaries-within-one-eclipse-project\">question</a> help ?"}, {"owner": {"reputation": 11, "user_id": 7397780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c84666fff21576607220ab42c6b333ae?s=128&d=identicon&r=PG&f=1", "display_name": "user123", "link": "https://stackoverflow.com/users/7397780/user123"}, "reply_to_user": {"reputation": 3961, "user_id": 2337243, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccc4abd3234bfab082413d35cae7b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Souad", "link": "https://stackoverflow.com/users/2337243/souad"}, "edited": false, "score": 0, "creation_date": 1487155499, "post_id": 42246769, "comment_id": 71652501, "body": "i am not clear whether i can create or not..if yes then i wil try"}, {"owner": {"reputation": 11, "user_id": 7397780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c84666fff21576607220ab42c6b333ae?s=128&d=identicon&r=PG&f=1", "display_name": "user123", "link": "https://stackoverflow.com/users/7397780/user123"}, "reply_to_user": {"reputation": 3961, "user_id": 2337243, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccc4abd3234bfab082413d35cae7b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Souad", "link": "https://stackoverflow.com/users/2337243/souad"}, "edited": false, "score": 0, "creation_date": 1487155600, "post_id": 42246769, "comment_id": 71652567, "body": "i tried creating two files but it is showing some error messages"}, {"owner": {"reputation": 3961, "user_id": 2337243, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eccc4abd3234bfab082413d35cae7b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Souad", "link": "https://stackoverflow.com/users/2337243/souad"}, "edited": false, "score": 0, "creation_date": 1487155706, "post_id": 42246769, "comment_id": 71652650, "body": "Kindly put the error messages in the question with any helpful code."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1487155750, "post_id": 42246769, "comment_id": 71652682, "body": "Let&#39;s clear up the terminology. A program is a single <b>executable</b>. The executable may be built from multiple <b>source</b> files. Are you asking how to have several different executables configured in a project, or how to add source files?"}, {"owner": {"reputation": 11, "user_id": 7397780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c84666fff21576607220ab42c6b333ae?s=128&d=identicon&r=PG&f=1", "display_name": "user123", "link": "https://stackoverflow.com/users/7397780/user123"}, "edited": false, "score": 0, "creation_date": 1487158238, "post_id": 42246769, "comment_id": 71654472, "body": "how to have several different executables configured in a project"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1487159961, "post_id": 42246769, "comment_id": 71655593, "body": "I edited your question to better reflect what you are actually asking. You can rollback the changes if it&#39;s wrong in any way."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 2, "creation_date": 1488042651, "post_id": 42246769, "comment_id": 72060467, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2424795/building-multiple-binaries-within-one-eclipse-project\">Building multiple binaries within one Eclipse project</a>"}], "owner": {"reputation": 11, "user_id": 7397780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c84666fff21576607220ab42c6b333ae?s=128&d=identicon&r=PG&f=1", "display_name": "user123", "link": "https://stackoverflow.com/users/7397780/user123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488042620, "creation_date": 1487154592, "last_edit_date": 1488042620, "question_id": 42246769, "link": "https://stackoverflow.com/questions/42246769/creation-and-configuration-of-multiple-executables-under-one-project-in-eclipse", "title": "Creation and configuration of multiple executables under one project in eclipse", "body": "<p>Is it possible to create multiple executable files under one project in eclipse?</p>\n\n<p>How do I run each individual executable?</p>\n"}, {"tags": ["c", "function", "c-strings", "inverse"], "comments": [{"owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "edited": false, "score": 1, "creation_date": 1487152212, "post_id": 42245721, "comment_id": 71649884, "body": "Could you please explain a little bit more your problem? In function <code>main</code>, you do not change <code>str</code> at all so in <code>reverse</code> you work with the original <code>str</code>."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 2, "creation_date": 1487152214, "post_id": 42245721, "comment_id": 71649885, "body": "Could you give an example input and the output that you expect? I don&#39;t really understand what you try to accomplish."}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 1, "creation_date": 1487152274, "post_id": 42245721, "comment_id": 71649936, "body": "<i><code>excludes non-prime positions and then reserve the output</code></i> -- What do you mean by <i>non-prime positions</i>? Possibly a typo for: <i>re<b>v</b>er<b>s</b>e the output</i>?"}, {"owner": {"reputation": 88, "user_id": 3802290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483027591c4f0400f53de05ac295db48?s=128&d=identicon&r=PG&f=1", "display_name": "wmc", "link": "https://stackoverflow.com/users/3802290/wmc"}, "edited": false, "score": 1, "creation_date": 1487152299, "post_id": 42245721, "comment_id": 71649955, "body": "You changed the original in the function reverse. If you want to reuse the original. You should make a copy of that first and send that to the second function. Not really a C problem, but more &quot;common sense&quot;."}, {"owner": {"reputation": 55, "user_id": 7155996, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b03ce8b33a8e9823095059632da2566?s=128&d=identicon&r=PG&f=1", "display_name": "I just want to learn.", "link": "https://stackoverflow.com/users/7155996/i-just-want-to-learn"}, "edited": false, "score": 0, "creation_date": 1487152913, "post_id": 42245721, "comment_id": 71650451, "body": "Hi Kamil,  say I inputted 123456 the first function would output 235 (As these are primes) and then reserve this. Likewise it does this with text, so hello would be elo and then ole when reversed."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1487153356, "post_id": 42245721, "comment_id": 71650791, "body": "how are elo the primes in hello???? But can I assume that the &quot;prime-filter&quot; works as intended and the problem is <code>reverse</code>? Or is it the other way around?"}, {"owner": {"reputation": 55, "user_id": 7155996, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b03ce8b33a8e9823095059632da2566?s=128&d=identicon&r=PG&f=1", "display_name": "I just want to learn.", "link": "https://stackoverflow.com/users/7155996/i-just-want-to-learn"}, "edited": false, "score": 0, "creation_date": 1487153564, "post_id": 42245721, "comment_id": 71650966, "body": "As in the prime positions, hello 12345 so where e is 2 would usually be which is prime where the first l is 3 would usually be which is also prime and where o is would usually be 5 which is itself prime. These functions work separately except I want the second function (reverse function) to take the output from my first function and reverse it instead of reversing the initial input. Thanks."}, {"owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "edited": false, "score": 0, "creation_date": 1487153699, "post_id": 42245721, "comment_id": 71651100, "body": "Explain a little more, str is never changed in main. I think you need to create a new array that will receive the characters that have non-prime position from original str. Beside that the way you check for prime numbers is wrong. Explain so that we can answer your question !"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1487153704, "post_id": 42245721, "comment_id": 71651103, "body": "Okay your problem is not the reverse but the &quot;filter&quot;."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1487153804, "post_id": 42245721, "comment_id": 71651180, "body": "So the input must be able to take numbered sequences and words?"}, {"owner": {"reputation": 55, "user_id": 7155996, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b03ce8b33a8e9823095059632da2566?s=128&d=identicon&r=PG&f=1", "display_name": "I just want to learn.", "link": "https://stackoverflow.com/users/7155996/i-just-want-to-learn"}, "edited": false, "score": 0, "creation_date": 1487154012, "post_id": 42245721, "comment_id": 71651335, "body": "Thanks Kami, I see what you mean. And yes RoadRunner."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1487155662, "post_id": 42245721, "comment_id": 71652613, "body": "@Ijustwanttolearn. Tip: Use <code>@</code> before a username if you want to notify them"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 7155996, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b03ce8b33a8e9823095059632da2566?s=128&d=identicon&r=PG&f=1", "display_name": "I just want to learn.", "link": "https://stackoverflow.com/users/7155996/i-just-want-to-learn"}, "edited": false, "score": 1, "creation_date": 1487153747, "post_id": 42246331, "comment_id": 71651140, "body": "That is exactly what I&#39;m doing yes, but struggling with how to pass the input. I know it&#39;s likely something so silly I&#39;m doing wrong too."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 55, "user_id": 7155996, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b03ce8b33a8e9823095059632da2566?s=128&d=identicon&r=PG&f=1", "display_name": "I just want to learn.", "link": "https://stackoverflow.com/users/7155996/i-just-want-to-learn"}, "edited": false, "score": 2, "creation_date": 1487153800, "post_id": 42246331, "comment_id": 71651175, "body": "@Ijustwanttolearn. as he said you do the filter and print it but you never save it into an array. Just create a new array and feed the filtered characters into it, THEN pass the NEW array to <code>reverse</code>."}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1487154221, "post_id": 42246331, "comment_id": 71651469, "body": "Good analysis. But honestly: do you see any sense behind it?"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 1, "creation_date": 1487154398, "post_id": 42246331, "comment_id": 71651622, "body": "@wolf just exercise? It could be worse."}, {"owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "edited": false, "score": 2, "creation_date": 1487154930, "post_id": 42246331, "comment_id": 71652082, "body": "OP&#39;s username is &quot;I just want to learn&quot;, so this was obviously a learning assignment. Why not help then? ;-)"}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1487157451, "post_id": 42246331, "comment_id": 71653921, "body": "@YePhIcK concerning <i><code>allocate a new string</code></i>: couldn&#39;t this be also <i>declare/introduce another string variable</i>? Dynamic allocation would be new to this exercise, and there&#39;s no need to add that trap right now."}, {"owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "edited": false, "score": 0, "creation_date": 1487157681, "post_id": 42246331, "comment_id": 71654077, "body": "Sorry, I was not aware of the limitations. Let me update the answer"}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 1, "creation_date": 1487157937, "post_id": 42246331, "comment_id": 71654254, "body": "I think it&#39;s much better now. I don&#39;t know if those limitations really exist, but I prefer to fix problems in the simplest way possible."}], "tags": [], "owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "is_accepted": true, "score": 5, "last_activity_date": 1487157754, "last_edit_date": 1487157754, "creation_date": 1487153496, "answer_id": 42246331, "question_id": 42245721, "link": "https://stackoverflow.com/questions/42245721/how-to-pass-output-from-one-function-to-another-in-c/42246331#42246331", "title": "How to pass output from one function to another in C?", "body": "<p>Here is what your code does (as it is written right now):</p>\n\n<ol>\n<li>Input a string from console</li>\n<li>Print out every character that is in a \"prime position\" (2, 3, 5, 7, etc) <strong>without modifying the string</strong></li>\n<li>Reverse the <strong>original, unmodified</strong> string</li>\n<li>print out the reversed string</li>\n</ol>\n\n<p>It sounds to me that what you are looking for is the following:<br>\nWhen you \"exclude characters from a string\" you create a <em>new string</em> that you populate with the characters from the input string that are in non-prime positions. Than you use that modified string as a parameter into the <code>reverse()</code> function.</p>\n\n<p>I have no doubt that if you understand the above paragraph you'd have no problem fixing your code.</p>\n\n<p>Here are the steps to achieve what you need:</p>\n\n<ol>\n<li>input string into <code>str</code> (as you currently do)</li>\n<li>introduce a <strong>new string</strong> <code>str2</code> of the same size <code>50</code> as the original string</li>\n<li>in your loop copy every character from <code>str</code> into <code>str2</code> that is not in a \"prime position\"</li>\n<li>call <code>reverse()</code> providing it the <code>str2</code> as a parameter, not the (current) <code>str</code></li>\n</ol>\n"}], "owner": {"reputation": 55, "user_id": 7155996, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b03ce8b33a8e9823095059632da2566?s=128&d=identicon&r=PG&f=1", "display_name": "I just want to learn.", "link": "https://stackoverflow.com/users/7155996/i-just-want-to-learn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 713, "favorite_count": 0, "accepted_answer_id": 42246331, "answer_count": 1, "score": 1, "last_activity_date": 1487176064, "creation_date": 1487151828, "last_edit_date": 1487176064, "question_id": 42245721, "link": "https://stackoverflow.com/questions/42245721/how-to-pass-output-from-one-function-to-another-in-c", "title": "How to pass output from one function to another in C?", "body": "<p>my program has two separate functions it excludes non-prime positions and then reserve the output from this. Except the issue I'm having is that at present it is not working how I want it to in the sense that the first function excludes the non prime places and then the second function uses the original input and reserves that instead of the output from function one. I'm new to C so please go easy on me.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid reverse(char[], long, long);\nint main()\n{\n    char str[50];\n    int i, j, k, cnt = 0;\n    long size;\n\n    printf(\"Enter: \");\n    scanf(\"%s\", str);\n\n    size = strlen(str);\n    reverse(str, 0, size - 1);\n    printf(str);\n    return 0;\n}\n\nvoid reverse(char str[], long index, long size)\n{\n    char temp;\n    temp = str[index];\n    str[index] = str[size - index];\n    str[size - index] = temp;\n    if (index == size / 2)\n    {\n        return;\n    }\n    reverse(str, index + 1, size);\n}\n</code></pre>\n\n<p>Sorry for being so vague, a sample output from an input of <code>1234567</code> would be <code>2357</code> then this output reversed into <code>7532</code>.</p>\n"}, {"tags": ["c", "memory-management", "malloc", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 5432, "user_id": 1701600, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/kPn4H.png?s=128&g=1", "display_name": "Boern", "link": "https://stackoverflow.com/users/1701600/boern"}, "edited": false, "score": 0, "creation_date": 1487151436, "post_id": 42245524, "comment_id": 71649315, "body": "are you on a embedded hardware? If so, behaviour is not predictable, see <a href=\"http://stackoverflow.com/questions/22422733/malloc-behaviour-on-an-embedded-system\" title=\"malloc behaviour on an embedded system\">stackoverflow.com/questions/22422733/&hellip;</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 7, "creation_date": 1487151478, "post_id": 42245524, "comment_id": 71649350, "body": "First thing, your code is wrong. You did not check for the success of <code>malloc()</code>, so you&#39;re not achieving what you want. <i>&quot;how much memory is really being allocated in this example?&quot;</i> --&gt; probably none."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1487151954, "post_id": 42245524, "comment_id": 71649696, "body": "Your code does not what you want. You should allocate memory chunks of say 1Mb in a loop, until <code>malloc</code>returns <code>NULL</code>. Now you know (more or less) how much memory you can allocate on your system."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1487152318, "post_id": 42245524, "comment_id": 71649972, "body": "@MichaelWalz True, but that involes &quot;hit and trial&quot;, in&#39;nit?"}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 2, "creation_date": 1487153114, "post_id": 42245524, "comment_id": 71650600, "body": "Also, you need to be aware that some modern operating systems <i>overcommit</i>, that is, they (seem to) allocate more memory than is available, as physical memory and swap space. For example, my Ubuntu system has 32 GB physical memory and just 4 GB swap space, so it can&#39;t possible have more than 36 GB of &quot;actual virtual&quot; memory, but malloc happily allocated 131071 GB (yes, 131 <i>thousand</i> gigabytes), and the program was then killed by the system when it had filled 10 of these gigabytes."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1487153216, "post_id": 42245524, "comment_id": 71650679, "body": "@SouravGhosh yes, but it&#39;s probably what the OP originally intended to do."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1487159934, "post_id": 42245524, "comment_id": 71655580, "body": "XY problem. Why do you want to know? Even if there was a function to get the current memory available (physical? virtual?), it could already be wrong before that function returns to your code on a multiprocessing system."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1487160039, "post_id": 42245524, "comment_id": 71655642, "body": "Sidenote: <code>1</code> is not a prime number."}], "answers": [{"comments": [{"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 1, "creation_date": 1487152478, "post_id": 42245771, "comment_id": 71650090, "body": "Also using <code>int limit = 2147483647;</code>. This can be replaced by <code>INT_MAX</code> from <code>limits.h</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1487152618, "post_id": 42245771, "comment_id": 71650197, "body": "@RoadRunner but that&#39;s not related to this problem in hand, right? these are different limits and this particular value is of no interest here, as I see it."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1487152984, "post_id": 42245771, "comment_id": 71650508, "body": "I agree, just something the OP can consider I guess. Just thought I&#39;d mention it since you are dot pointing issues in the OP&#39;s code."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1487153067, "post_id": 42245771, "comment_id": 71650572, "body": "@RoadRunner Just to be clear, I did not mean to contradict you, i&#39;m just clarifying that even after that change, the code would not make much sense, either. Appended my answer. :)"}, {"owner": {"reputation": 53, "user_id": 7567813, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rvEsPPPT3yM/AAAAAAAAAAI/AAAAAAAABG8/2k1aVT7B4J8/photo.jpg?sz=128", "display_name": "Azam Ali", "link": "https://stackoverflow.com/users/7567813/azam-ali"}, "reply_to_user": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1487156005, "post_id": 42245771, "comment_id": 71652859, "body": "@RoadRunner but this code is working when i set limit less than 1500000."}, {"owner": {"reputation": 53, "user_id": 7567813, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rvEsPPPT3yM/AAAAAAAAAAI/AAAAAAAABG8/2k1aVT7B4J8/photo.jpg?sz=128", "display_name": "Azam Ali", "link": "https://stackoverflow.com/users/7567813/azam-ali"}, "edited": false, "score": 0, "creation_date": 1487159340, "post_id": 42245771, "comment_id": 71655177, "body": "yes you are right i have checked that malloc returned NULL pointer so please let me know how could i solve this problem as i need memory of 2147483647*4 bytes"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 53, "user_id": 7567813, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rvEsPPPT3yM/AAAAAAAAAAI/AAAAAAAABG8/2k1aVT7B4J8/photo.jpg?sz=128", "display_name": "Azam Ali", "link": "https://stackoverflow.com/users/7567813/azam-ali"}, "edited": false, "score": 0, "creation_date": 1487160132, "post_id": 42245771, "comment_id": 71655709, "body": "@AzamAli thing is, if you already know the size of the allocation, wh you want to use <code>malloc()</code>, at all? Create an array and use compile time memory. In general, runtime memories are allocated from a scarce pool (i.e, heap) so they do not enjoy the privilege of allocating in huge amount, per se ."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1487160241, "post_id": 42245771, "comment_id": 71655769, "body": "@RoadRunner: <code>INT_MAX</code> yields an <code>int</code>, not a <code>size_t</code> as <code>malloc</code> expects. It is also not guaranteed the max. available memory, nor the same as <code>SIZE_MAX</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487160378, "post_id": 42245771, "comment_id": 71655860, "body": "@SouravGhosh: A statically allocated array of that size with a non-zero initialiser likely results in a <b>very</b> big executable. And if dynamic allocation fails for that size, most likely static will fail as well. Typically dynamic memory is very well meant for allocations as large as static. But the actual size depends on the platform. Maybe OP uses a 32 bit platform or has not enough virtual memory (although that would not necessarily result in <code>malloc</code> failing)."}, {"owner": {"reputation": 53, "user_id": 7567813, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rvEsPPPT3yM/AAAAAAAAAAI/AAAAAAAABG8/2k1aVT7B4J8/photo.jpg?sz=128", "display_name": "Azam Ali", "link": "https://stackoverflow.com/users/7567813/azam-ali"}, "edited": false, "score": 0, "creation_date": 1487160597, "post_id": 42245771, "comment_id": 71656010, "body": "@SouravGhosh i will take size from the user but first i want to see that is code is working for this max range if it will fix then i will move forward."}, {"owner": {"reputation": 53, "user_id": 7567813, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rvEsPPPT3yM/AAAAAAAAAAI/AAAAAAAABG8/2k1aVT7B4J8/photo.jpg?sz=128", "display_name": "Azam Ali", "link": "https://stackoverflow.com/users/7567813/azam-ali"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487160650, "post_id": 42245771, "comment_id": 71656039, "body": "@Olaf i have tried static array but it also fails so what should i do next?"}, {"owner": {"reputation": 53, "user_id": 7567813, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rvEsPPPT3yM/AAAAAAAAAAI/AAAAAAAABG8/2k1aVT7B4J8/photo.jpg?sz=128", "display_name": "Azam Ali", "link": "https://stackoverflow.com/users/7567813/azam-ali"}, "edited": false, "score": 0, "creation_date": 1487160725, "post_id": 42245771, "comment_id": 71656087, "body": "@SouravGhosh i&#39;m using win 10 64bit"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487162780, "post_id": 42245771, "comment_id": 71657527, "body": "@Olaf Right indeed. Frankly speaking, if I need to use an array of that size, I&#39;ll probably first try to refactor my algorithm / approach. Any practicable code might not need that big array, in, well, 95% of the cases, so to speak."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 53, "user_id": 7567813, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rvEsPPPT3yM/AAAAAAAAAAI/AAAAAAAABG8/2k1aVT7B4J8/photo.jpg?sz=128", "display_name": "Azam Ali", "link": "https://stackoverflow.com/users/7567813/azam-ali"}, "edited": false, "score": 0, "creation_date": 1487163037, "post_id": 42245771, "comment_id": 71657698, "body": "@AzamAli: I&#39;m not a clairvoyant. Maybe you try a better OS, more memory, etc?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487163168, "post_id": 42245771, "comment_id": 71657779, "body": "@SouravGhosh: I&#39;d say a beginner indeed should reconsider the implementation, mmaping a file might be the better way. But if there was no need for such large array, there were no computers with 1TiB RAM. Even on normal notebooks, 64GiB RAM is no problem at all. After all, 2GiB*4 is just 8GiB - That&#39;s what mid-range graphics cards easily have."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487169505, "post_id": 42245771, "comment_id": 71662238, "body": "@Olaf Very nice spot. I guess I learnt something new today :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1487157175, "last_edit_date": 1487157175, "creation_date": 1487151943, "answer_id": 42245771, "question_id": 42245524, "link": "https://stackoverflow.com/questions/42245524/how-to-find-the-maximum-limit-of-memory-allocation-in-c/42245771#42245771", "title": "how to find the maximum limit of Memory Allocation in c", "body": "<p>You code is wrong for so many reasons like</p>\n\n<ul>\n<li>You're <em>assuming</em> the max size (for the platform / environment) which is least likely to be true, less being portable.</li>\n<li><p>You're <em>assuming</em> that <code>malloc()</code> offers <strong><em>partial allocation (up to the available memory)</em></strong> which is again, wrong.</p>\n\n<p>Quoting the <code>C11</code> standard, chapter \u00a77.22.3.4, (<em>emphasis mine</em>)</p>\n\n<blockquote>\n  <p>The <code>malloc</code> function returns <strong>either a null pointer or a pointer to the allocated space.</strong></p>\n</blockquote>\n\n<p>So, it's <strong>either</strong> complete success (with the exact amount of requested memory allocated) or complete failure (return of null pointer), there's no <em>trade-off</em> like partial success with available memory or whatever which you might have assumed. </p></li>\n<li><p>You're not checking for <code>malloc()</code> success, resulting probable null-pointer dereference.</p></li>\n<li>You have no means to actually check for the success/ failure of allocation</li>\n</ul>\n\n<p>I believe, you're in need of <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/setrlimit.html\" rel=\"nofollow noreferrer\"><code>getrlimit()</code></a> and family to achieve your purpose. Particular point of interest would be <code>RLIMIT_DATA</code> as the <code>resource</code> value.</p>\n\n<p>That said,</p>\n\n<blockquote>\n  <p><em>1. \"I have allocated the maximum int size in this example\"</em></p>\n</blockquote>\n\n<p>This does not seem to be connected with the limits for <code>malloc()</code> and family, anyways.</p>\n\n<blockquote>\n  <p><em>2. \"But the program crashes\"</em></p>\n</blockquote>\n\n<p>That is most probably the result of <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>. In your code, you directly dereference the returned pointer, without success check for <code>malloc()</code>. It is likely that <code>malloc()</code> has failed and returned a <code>NULL</code>, dereferencing that causes the UB.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487176543, "post_id": 42245944, "comment_id": 71667823, "body": "What use would any value returned of such a function have on an OS where before the function even returns another process could allocate just that amount of memory? And typically one has no choice how much memory is required. If that is for buffers: leave that to the OS and libc. They most times know better anyway. (it might be different for very special software, but that would not be written by a beginner anyway)"}, {"owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487179389, "post_id": 42245944, "comment_id": 71669955, "body": "The <code>GlobalMemoryStatusEx()</code> returns (in <code>ullAvailVirtual</code>) the amount of memory available to the <b>user process</b>. That memory would not be trumped by other user-mode applications as they are isolated <b>and</b> don&#39;t eat into each other&#39;s memory space. See my comment about Windos 7 in the answer above (towards the end)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487181990, "post_id": 42245944, "comment_id": 71671605, "body": "That would imply that it is not guaranteed to be allocatable <b>under all circumstances</b>. Unless Windows was the first true clairvoyant OS. Without that my comment still applies. (the prefix &quot;Global&quot; for a <b>user</b> process limit is quite missleading, btw.) It is not about memory spaces (would be indeed strange if two processes have the same memory space - shared memory excluded). But maybe that is some DOS-extender think with &quot;real-time memory double&quot; as widely spread in the late 80ies/early 90ies.  But those were just snake-oil."}, {"owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487182284, "post_id": 42245944, "comment_id": 71671782, "body": "Nothing is ever guaranteed (except death and taxes), that is why programs dedicate a bigger part of their code to error handling"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487182703, "post_id": 42245944, "comment_id": 71672035, "body": "You missed the point: if the value from that function has no relevance for practical use, why query it at all? After all, OP very likely has an XY-problem."}, {"owner": {"reputation": 5432, "user_id": 1701600, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/kPn4H.png?s=128&g=1", "display_name": "Boern", "link": "https://stackoverflow.com/users/1701600/boern"}, "edited": false, "score": 0, "creation_date": 1493126902, "post_id": 42245944, "comment_id": 74272950, "body": "<code>malloc()</code> does clearly <b>NOT</b> always return a NULL pointer when it fails, see <a href=\"http://stackoverflow.com/questions/22422733/malloc-behaviour-on-an-embedded-system\" title=\"malloc behaviour on an embedded system\">stackoverflow.com/questions/22422733/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "is_accepted": true, "score": 8, "last_activity_date": 1487152432, "creation_date": 1487152432, "answer_id": 42245944, "question_id": 42245524, "link": "https://stackoverflow.com/questions/42245524/how-to-find-the-maximum-limit-of-memory-allocation-in-c/42245944#42245944", "title": "how to find the maximum limit of Memory Allocation in c", "body": "<p><code>malloc()</code> is allowed to fail, in which case it returns a NULL-pointer <strong>without allocating any memory</strong>. It is always an <strong>all-or-nothing</strong> allocation. It either succeeds and allocates a full chunk of memory of the requested size, or it fails, returning a NULL-pointer without allocating a single byte.</p>\n\n<p>As for knowing how much memory is available - that really depends on the environment: what OS are you running this in, is that a 16-, 32-, 64-bit memory architecture?</p>\n\n<p>For instance, if you are running on Windows 10 you can use the <code>GlobalMemoryStatusEx()</code> facility (refer to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366589(v=vs.85).aspx\" rel=\"noreferrer\">MSDN:GlobalMemoryStatusEx()</a> for details).</p>\n\n<p>Linux, OTOH, provides a neat <code>sysconf()</code> way of retreiving similar information. Refer to <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/sysconf.html\" rel=\"noreferrer\">this page</a> for more details.</p>\n\n<p>Even if your OS is 64-bit that wouldn't necessarily mean that your <em>application</em> can access more than a certain limit. For instance Windows 7 64-bit will only let you address up to 8GB of memory in your application code even though the full virtual memory space is 16TB.</p>\n"}, {"comments": [{"owner": {"reputation": 931, "user_id": 6830757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxb9.jpg?s=128&g=1", "display_name": "Shivam Sharma", "link": "https://stackoverflow.com/users/6830757/shivam-sharma"}, "reply_to_user": {"reputation": 53, "user_id": 7567813, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rvEsPPPT3yM/AAAAAAAAAAI/AAAAAAAABG8/2k1aVT7B4J8/photo.jpg?sz=128", "display_name": "Azam Ali", "link": "https://stackoverflow.com/users/7567813/azam-ali"}, "edited": false, "score": 0, "creation_date": 1487160613, "post_id": 42248319, "comment_id": 71656020, "body": "Mension nt Bhaijan ;) If it is really helpful  @AzamAli then you may upvote the ans if you really want to ,so that it might be helpful for others as like you. :)"}], "tags": [], "owner": {"reputation": 931, "user_id": 6830757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxb9.jpg?s=128&g=1", "display_name": "Shivam Sharma", "link": "https://stackoverflow.com/users/6830757/shivam-sharma"}, "is_accepted": false, "score": -1, "last_activity_date": 1487159474, "last_edit_date": 1487159474, "creation_date": 1487158701, "answer_id": 42248319, "question_id": 42245524, "link": "https://stackoverflow.com/questions/42245524/how-to-find-the-maximum-limit-of-memory-allocation-in-c/42248319#42248319", "title": "how to find the maximum limit of Memory Allocation in c", "body": "<p>There are so many iteration perform by loop,you design that is the main causes of your program crash or loop dead infinity.</p>\n\n<p>Answer to what you expect to know is very <strong>complex</strong> because of some key notes---->></p>\n\n<p><strong>1.</strong> It depends on the platform that the program is working on like\nwindows, linux or mac. <strong>I THINK that the amount of memory is not limited\nby anything, but physical memory.</strong> </p>\n\n<p><strong>Fact-></strong> Although physical memory is Might be extended by Virtual memory, Not all platforms has feature of 'virtual memory'.\n C has no concept of virtual memory.\nMalloc allocates contiguous memory (meaning side by side or together in ram).<br>\n                                               So, it depends on the way platform handles the request.  It depends upon the C implementation.</p>\n\n<p><strong>2.</strong> The largest number (in bytes) representable by standard type 'size_t' (declared by ). This value can and does vary among implementations. Note that this value isn't necessarily as large as the host(<strong>i.e. end user</strong>) platform's available memory.</p>\n\n<p><strong>QUES.</strong> Is there any limitation on that? Where am I supposed to get\nthis kind of information?</p>\n\n<p><strong>Ans</strong>. Malloc's argument is a size_t and the range of that type is [0,SIZE_MAX], so the maximum you can <em>request</em> is SIZE_MAX, which value <strong>varies from implementation to implementation</strong> and is defined in . </p>\n\n<p><strong>Note:-</strong> Whether a request for SIZE_MAX bytes will succeed depends on factors outside of the scope of this group.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 7567813, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rvEsPPPT3yM/AAAAAAAAAAI/AAAAAAAABG8/2k1aVT7B4J8/photo.jpg?sz=128", "display_name": "Azam Ali", "link": "https://stackoverflow.com/users/7567813/azam-ali"}, "edited": false, "score": 0, "creation_date": 1487188455, "post_id": 42255748, "comment_id": 71675331, "body": "i have checked that malloc has returned NULL you are right so please let me know what should i do to allocate large block if malloc is very poor for this"}], "tags": [], "owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "is_accepted": false, "score": 0, "last_activity_date": 1487178157, "creation_date": 1487178157, "answer_id": 42255748, "question_id": 42245524, "link": "https://stackoverflow.com/questions/42245524/how-to-find-the-maximum-limit-of-memory-allocation-in-c/42255748#42255748", "title": "how to find the maximum limit of Memory Allocation in c", "body": "<p>The maximum amount of memory you can allocate is controlled by several factors and can change over time.</p>\n\n<p>These include:\n1. Hardware limits\n2. OS Limits\n3. System Parameters\n4. Process Quotas\n5. Page file space</p>\n\n<p>In addition, malloc is a very poor way to allocate large blocks of memory. </p>\n\n<p>Your program crashes because malloc is returning null and you are using that return value without checking.</p>\n"}], "owner": {"reputation": 53, "user_id": 7567813, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rvEsPPPT3yM/AAAAAAAAAAI/AAAAAAAABG8/2k1aVT7B4J8/photo.jpg?sz=128", "display_name": "Azam Ali", "link": "https://stackoverflow.com/users/7567813/azam-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4164, "favorite_count": 0, "accepted_answer_id": 42245944, "answer_count": 4, "score": 5, "last_activity_date": 1487178157, "creation_date": 1487151316, "last_edit_date": 1487152290, "question_id": 42245524, "link": "https://stackoverflow.com/questions/42245524/how-to-find-the-maximum-limit-of-memory-allocation-in-c", "title": "how to find the maximum limit of Memory Allocation in c", "body": "<p>I want to determine what is the maximum limit of memory I can allocate in my computer. This is the code that I have written for this task:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    int j;\n    int *primes;\n    int i ;\n\n    int limit = 2147483647;\n\n    primes = malloc(sizeof(int) * limit);\n    for (i = 0; i &lt; limit; i++)\n    {\n        primes[i] = 1;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>How can I determine how much memory can be allocated without hit and trial? I have allocated the maximum int size in this example. But the program crashes.\nHow much memory is really being allocated in this example?</p>\n"}, {"tags": ["c", "memory-management", "mmap"], "comments": [{"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1487147915, "post_id": 42244294, "comment_id": 71646927, "body": "What is the page way of mapping file?"}, {"owner": {"reputation": 603, "user_id": 3291639, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/777fc86473207d1010f34448d8aa7014?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu Sourav", "link": "https://stackoverflow.com/users/3291639/himanshu-sourav"}, "reply_to_user": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1487149944, "post_id": 42244294, "comment_id": 71648257, "body": "@Marian added in question."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 2, "creation_date": 1487151208, "post_id": 42244294, "comment_id": 71649152, "body": "To me this <code>mapping of the program in binary mode directly; without page reference</code> is very unclear."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 2, "creation_date": 1487153680, "post_id": 42244294, "comment_id": 71651081, "body": "In &quot;the old times&quot; (32-bit), segmentation could be used as an alternative for (or together with) paging to create file mappings (this was not supported by linux mmap() however). This was even at byte granularity. But x86_64 dropped the support for this largely."}], "answers": [{"tags": [], "owner": {"reputation": 471, "user_id": 5592711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Ctul.jpg?s=128&g=1", "display_name": "A. Monti", "link": "https://stackoverflow.com/users/5592711/a-monti"}, "is_accepted": false, "score": 1, "last_activity_date": 1487154388, "creation_date": 1487154388, "answer_id": 42246676, "question_id": 42244294, "link": "https://stackoverflow.com/questions/42244294/mmap-of-files-can-be-done-in-any-other-way-except-page-level-mapping/42246676#42246676", "title": "mmap of files can be done in any other way except page level mapping?", "body": "<p>Paging is (at least on modern OSes and architectures) <strong>the</strong> mechanism through with physical memory is managed.</p>\n\n<p>I suggest you to <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/vm-paging.pdf\" rel=\"nofollow noreferrer\">read more</a> on this subject, but basically the physical memory (addressed using <em>physical</em> addresses) is accessed from the kernel and user space using <em>virtual</em> addresses.</p>\n\n<p>The mapping between <em>physical</em> and <em>virtual</em> addresses is usually done in hardware using the <a href=\"https://en.wikipedia.org/wiki/Memory_management_unit\" rel=\"nofollow noreferrer\" title=\"Memory Management Unit\">MMU</a>, and is organized using <em>pages</em>. Using this concept, a memory page defines a mapping between a range of physical and virtual addresses.</p>\n\n<p>The OS also adds several layers above the low-level page management, <code>mmap</code> being a user interface to the paging system that allows you to manipulate pages.\nParticularly, it allows you to map a memory page (remember, a range of virtual addresses) to something else than physical memory, for example a file stored on your hard disk drive.</p>\n\n<p>In conclusion, the <strong>only</strong> way you can use memory is through this paging system, so to answer your question it does not make any sense to access something (being a file, physical memory or anything else) \"in any other way than the page way\".</p>\n"}, {"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": true, "score": 3, "last_activity_date": 1487154400, "creation_date": 1487154400, "answer_id": 42246684, "question_id": 42244294, "link": "https://stackoverflow.com/questions/42244294/mmap-of-files-can-be-done-in-any-other-way-except-page-level-mapping/42246684#42246684", "title": "mmap of files can be done in any other way except page level mapping?", "body": "<p>All memory maps involve page level mapping, if we use the Wikipedia definition of <a href=\"https://en.wikipedia.org/wiki/Page_(computer_memory)\" rel=\"nofollow noreferrer\">page</a>:</p>\n\n<blockquote>\n  <p>A page, memory page, or virtual page is a fixed-length contiguous block of virtual memory, described by a single entry in the page table. It is the smallest unit of data for memory management in a virtual memory operating system.</p>\n</blockquote>\n\n<p>As described in the <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow noreferrer\"><code>man 2 mmap</code></a> man page, </p>\n\n<blockquote>\n  <p>mmap() creates a new mapping in the virtual address space of the calling process.</p>\n</blockquote>\n\n<p>The mapping is defined by entries in the page table.</p>\n\n<p>So, essentially, <code>mmap()</code> is a tool for managing virtual memory in the page level.</p>\n\n<hr>\n\n<p>The interviewer was probably trying to find out whether you understood the difference between low-level I/O (<code>read()</code>, <code>write()</code>) and file-backed memory mapping behaviour.</p>\n\n<p>If you open a file using the <code>O_DIRECT</code> flag, the kernel tries to transfer the data directly to the userspace buffers, bypassing the page cache. </p>\n\n<p>Because of how memory maps work, having the backing file <code>open()</code>ed with or without the <code>O_DIRECT</code> flag has no effect on the memory map.</p>\n\n<p>(The <code>MAP_SHARED</code>/<code>MAP_PRIVATE</code> flag has an effect whether the memory used for the accessed parts of the mapping stay in the page <em>cache</em> or not. Typically, the Linux kernel uses a copy-on-write approach: the pages stay read-only in the page cache until the first write access. At that point, private mappings get copied to new pages (or evicted), and the shared mapping is marked read-write. It is a bit complicated, but it is quite efficient. However, all of this too relies on virtual memory paging.)</p>\n\n<p>It is even possible to construct a memory mapping with no backing at all (a <code>PROT_NONE</code> mapping). Any access to the mapping causes the kernel to generate a <code>SIGBUS</code> signal (to the thread attempting the access), which can be caught by the process. The signal handler can decode and skip the instruction, thus emulating memory accesses. It can even read one or more bytes from the file using <code>O_DIRECT</code>. Again, the mapping is based on virtual memory, and thus pages; there is just no RAM used for the mapping, and instead all accesses are emulated. This is rarely used, because it is unimaginably slow.</p>\n"}], "owner": {"reputation": 603, "user_id": 3291639, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/777fc86473207d1010f34448d8aa7014?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu Sourav", "link": "https://stackoverflow.com/users/3291639/himanshu-sourav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 716, "favorite_count": 0, "accepted_answer_id": 42246684, "answer_count": 2, "score": 0, "last_activity_date": 1487154400, "creation_date": 1487147765, "last_edit_date": 1487149914, "question_id": 42244294, "link": "https://stackoverflow.com/questions/42244294/mmap-of-files-can-be-done-in-any-other-way-except-page-level-mapping", "title": "mmap of files can be done in any other way except page level mapping?", "body": "<p>recently during one of interviews, I was asked if mmap can do mapping of the program in binary mode directly; without page reference.</p>\n\n<p>I think that is not possible, as it </p>\n\n<blockquote>\n  <p>allows an application to map a file into memory, meaning that there is\n  a one-to-one correspondence between a memory address and a word in the\n  file. The programmer can then access the file directly through memory,\n  identically to any other chunk of memory-resident data\u2014it is even\n  possible to allow writes to the memory region to transparently map\n  back to the file on disk</p>\n</blockquote>\n\n<p>accessing a file without paging being involved sounds wrong.</p>\n\n<p>still I want to know if there is any way mmap can map file in memory in any other way than the page way.</p>\n\n<pre><code>=====\nthe page way\n=====\n</code></pre>\n\n<blockquote>\n  <p>The\u00a0page\u00a0is the smallest unit of memory that can have distinct\n  permissions and behavior. Consequently, the page is the building block\n  of memory mappings, which in turn are the building blocks of the\n  process address space. The\u00a0mmap( )\u00a0system call operates on pages. Both\n  the\u00a0addr\u00a0and\u00a0offsetparameters must be aligned on a page-sized\n  boundary. That is, they must be integer multiples of the page size.</p>\n  \n  <p>Mappings are, therefore, integer multiples of pages. If\n  the\u00a0len\u00a0parameter provided by the caller is not aligned on a page\n  boundary\u2014perhaps because the underlying file's size is not a multiple\n  of the page size\u2014the mapping is rounded up to the next full page</p>\n</blockquote>\n"}, {"tags": ["c", "realloc"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1487148096, "post_id": 42244288, "comment_id": 71647053, "body": "You cannot programmatically check how much memory is allocated for something in C, at least, there aren&#39;t any standard functions that can do it. You (the programmer) must keep track of it and must make sure all allocated memory has been properly deallocated using <code>free</code>"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1487148188, "post_id": 42244288, "comment_id": 71647111, "body": "<code>sizeof</code> is a <b>compile-time</b> operator. You cannot use it in order to retrieve a <b>runtime</b> piece of information (which in your example, is the size of the allocated memory block returned by <code>malloc</code> and <code>realloc</code>)."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1487148244, "post_id": 42244288, "comment_id": 71647156, "body": "Also, 1) <code>void main()</code> \u2192 <code>int main(void)</code> 2) Remove casts from <code>malloc</code> and <code>realloc</code> 3) Use <code>%zu</code> instead of <code>%d</code> because <code>sizeof</code> returns <code>size_t</code>, not <code>int</code> 4) Check if <code>malloc</code> and <code>realloc</code> were successful by looking at their return values."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1487148315, "post_id": 42244288, "comment_id": 71647198, "body": "@barakmanos In that case, what about <code>sizeof(VLA)</code>, sir? Sorry if i&#39;m missing something very basic."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1487148638, "post_id": 42244288, "comment_id": 71647397, "body": "@SouravGhosh: If I were to guess, then I&#39;d say that any compiler supporting VLA must be replacing the non-compilable expression <code>sizeof(arr[n])</code> with the compilable expression <code>sizeof(*arr)*n</code>, which can be evaluated during runtime."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1487148730, "post_id": 42244288, "comment_id": 71647442, "body": "@barakmanos - <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.3.4p2\" rel=\"nofollow noreferrer\">There&#39;s no need to guess, we have a standard draft publicly available</a>. &quot;Evaluated&quot; in that paragraph means exactly what you guessed at."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1487148795, "post_id": 42244288, "comment_id": 71647476, "body": "<code>ptr=(int *)realloc(ptr,20*sizeof(int));</code> is dangerous. What happens if this returns <code>NULL</code>? You&#39;ll lose access to original pointer. Better to use <code>void *temp = realloc(ptr,.......); if (temp != NULL) { ptr = temp;} else { &#47;* handle error *&#47; }</code>."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1487148841, "post_id": 42244288, "comment_id": 71647512, "body": "@StoryTeller: Guess I should start implementing compilers then :)"}], "answers": [{"comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1487148387, "post_id": 42244319, "comment_id": 71647251, "body": "I&#39;d use &#39;compilation&#39; instead of &#39;translation&#39;, and I would add that <code>malloc</code>/<code>realloc</code> &quot;do their thing&quot; during runtime, in order to emphasize and distinguish between the two cases. Although OP&#39;s technical misunderstanding is about the usage of <code>sizeof</code>, I think that the real insight that he or she is missing, is the difference between compile-time and runtime."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1487148582, "post_id": 42244319, "comment_id": 71647369, "body": "@barakmanos - Translation is the term used by the standard, and I try to adhere to that. The other point is indeed good, thanks."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1487148566, "last_edit_date": 1487148566, "creation_date": 1487147848, "answer_id": 42244319, "question_id": 42244288, "link": "https://stackoverflow.com/questions/42244288/i-am-unable-to-reallocate-memory-to-integer-using-realloc-in-c/42244319#42244319", "title": "i am unable to reallocate memory to integer using realloc in c", "body": "<p><code>sizeof(ptr)</code> determines the size of a single integer pointer. <code>sizeof</code> is an operator that is applied statically during translation (except for variable length arrays, but it's not the case here). The static type of <code>ptr</code> is <code>int*</code>, so you get <code>sizeof(int*)</code> printed.</p>\n\n<p><code>sizeof(ptr)</code> will never be <code>sizeof(int[10])</code> because arrays are not pointers, despite many tutorials erroneously teaching they are.</p>\n\n<p>The good news however, is that if <code>malloc</code>/<code>realloc</code> return any address other than NULL, you do indeed have <code>ptr</code> point to memory that can contain 10/20 integers. So you just need to keep track of the allocated size.</p>\n\n<p>Note however, that <code>malloc</code> and its kin do memory allocation during the run-time of your program, in opposition to <code>sizeof</code> that (for the most part, VLA's again) returns a result way before your program is even run.</p>\n"}], "owner": {"reputation": 21, "user_id": 6732062, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mNcTsW8MGeA/AAAAAAAAAAI/AAAAAAAAFB4/TiWZLFa5bj4/photo.jpg?sz=128", "display_name": "Vatsal Chauhan", "link": "https://stackoverflow.com/users/6732062/vatsal-chauhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "closed_date": 1487148208, "accepted_answer_id": 42244319, "answer_count": 1, "score": 0, "last_activity_date": 1487148566, "creation_date": 1487147741, "question_id": 42244288, "link": "https://stackoverflow.com/questions/42244288/i-am-unable-to-reallocate-memory-to-integer-using-realloc-in-c", "closed_reason": "Duplicate", "title": "i am unable to reallocate memory to integer using realloc in c", "body": "<p>I am trying to re-allocate 20 bytes to an integer that already occupies 10 bytes using this code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nvoid main()\n{\n        int *ptr;\n        ptr=(int *)malloc(10*sizeof(int));\n        printf(\"size before re-allocation : %d bytes\",sizeof(ptr));\n\n        ptr=(int *)realloc(ptr,20*sizeof(int));\n        printf(\"size after re-allocation : %d bytes\",sizeof(ptr));\n        free(ptr);\n}\n</code></pre>\n\n<p>but the output is showing 8 bytes before realloc and after realloc too.\nwhat am i doing wrong?</p>\n"}, {"tags": ["c", "windows", "service", "proxy", "wininet"], "answers": [{"comments": [{"owner": {"reputation": 2039, "user_id": 837515, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/58b4d4cbe8c9ae5011ad3ded31bcfdd8?s=128&d=identicon&r=PG", "display_name": "cbinder", "link": "https://stackoverflow.com/users/837515/cbinder"}, "edited": false, "score": 0, "creation_date": 1487564045, "post_id": 42253292, "comment_id": 71825231, "body": "What will be the behavior of service when impersonate API is called with no user logged on to system yet?"}, {"owner": {"reputation": 335, "user_id": 4145294, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ko8MP.jpg?s=128&g=1", "display_name": "Willy K.", "link": "https://stackoverflow.com/users/4145294/willy-k"}, "reply_to_user": {"reputation": 2039, "user_id": 837515, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/58b4d4cbe8c9ae5011ad3ded31bcfdd8?s=128&d=identicon&r=PG", "display_name": "cbinder", "link": "https://stackoverflow.com/users/837515/cbinder"}, "edited": false, "score": 0, "creation_date": 1487852823, "post_id": 42253292, "comment_id": 71976708, "body": "getInteractiveSessinoId() in the code above will return with an invalid id (returns -2) which should be handled properly. Otherwise attachToSession() will fail in WTSQueryUserToken() will return with error which is handled in the function.  In short words: It is up to to ensure that you have an interactive session. Attaching to session 0 (where services are running) does not make sense since you are already running in that session."}], "tags": [], "owner": {"reputation": 335, "user_id": 4145294, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ko8MP.jpg?s=128&g=1", "display_name": "Willy K.", "link": "https://stackoverflow.com/users/4145294/willy-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1487171881, "creation_date": 1487171881, "answer_id": 42253292, "question_id": 42244124, "link": "https://stackoverflow.com/questions/42244124/how-to-retrieve-system-proxy-settings-in-win-7-for-windows-service-in-c/42253292#42253292", "title": "How to retrieve system proxy settings in Win 7 for windows service in C", "body": "<p>I had similar situation with running a program in the context of the current user.</p>\n\n<p>First of all - somewhere in a global scope - define following variables:</p>\n\n<pre><code> HANDLE hUsrToken;\n HANDLE hDupToken;\n int sessionId;\n</code></pre>\n\n<p>You need to get the session Id of the current user:</p>\n\n<pre><code>int getInteractiveSessinoId()\n{\n    PWTS_SESSION_INFO pSessInfo;\n    ulong count;                    // Number of current user sessions\n    int result = -1;\n\n    if (!WTSEnumerateSessions(WTS_CURRENT_SERVER, 0, 1, &amp;pSessInfo, &amp;count))\n    {\n        printf(\"Getting session information failed with error %d\\n\", &lt;&lt; GetLastError());\n        WTSFreeMemory(pSessInfo);\n        return -2;\n    }\n\n    for (ulong loop = 0; loop &lt; count; loop++)\n    {\n        if (pSessInfo[loop].State == WTSActive)\n        {\n            printf(\"Session %d is currently active\\n\", pSessInfo[loop].SessionId);\n            result = pSessInfo[loop].SessionId;\n            break;\n        }\n    }\n\n    WTSFreeMemory(pSessInfo);\n    return result;\n}\n</code></pre>\n\n<p>Next you need to impersonate the current user (I called it \"attach to the session\"):</p>\n\n<pre><code>bool attachToSession(int sessionId)\n{\n    // We need to duplicate the token of the session's user\n    if (!WTSQueryUserToken(sessionId, &amp;hUsrToken))\n    {\n        pritnf(\"Query the user token failed with error %d\\n\", GetLastError());\n        return false;\n    }\n\n    if (!DuplicateTokenEx(hUsrToken, TOKEN_ALL_ACCESS, NULL, SecurityImpersonation, TokenImpersonation , &amp;hDupToken))\n    {\n        printf(\"Duplicating a token failed with error %d\\n\", GetLastError());\n        return false;\n    }\n\n    if (!ImpersonateLoggedOnUser(hDupToken))\n    {\n        printf(\"Impersonating the user failed with error %d\\n\", GetLastError();\n        return false;\n    }\n\n    return true;\n}\n</code></pre>\n\n<p>Now do whatever you want to do want to do within the current user's context, when done, revert (or \"detach\") from the user's context:</p>\n\n<pre><code>bool detachFromSession()\n{\n    if (!RevertToSelf())\n    {\n        printf(\"Reverting the token failed with error %d\\n\", GetLastError());\n        return false;\n    }\n\n    (void)CloseHandle(hDupToken);\n    (void)CloseHandle(hUsrToken);\n\n    return true;\n}\n</code></pre>\n\n<p>I'm not sure if it is good idea to apply the token to the current (service) thread. I think it is a better idea to create a new thread which executes whatever you want to do in the user's context and apply the impersonated token to it. So your code part may look like this:</p>\n\n<pre><code>HANDLE hUsrToken;\nHANDLE hDupToken;\nHANDLE hThread;\nint sessionId;\nDWORD threadId;\n\nDWORD WINAPI MyThreadFunction(LPVOID lpParam)\n{\n    // WinHttpGetIEProxyConfigForCurrentUser(...\n}\n\nsessionId = getInterActiveSessionId();\n\nif (attachToSession(int sessionId) == false)\n{\n    // Error handling\n    return;\n}\n\nhThread = CreateThread(NULL,                   // default security attributes\n                       0,                      // use default stack size                       \n                       MyThreadFunction,       // thread function name\n                       NULL,                   // argument to thread function \n                       CREATE_SUSPENDED,       // Delay execution\n                       &amp;threadId);\n\nif (SetThreadToken(hThread, hDupToken) == false)\n{\n    // Error handling\n    return;\n}\n\nResumeThread(hThread);\n</code></pre>\n\n<p>I cannot garantee that this will resolve your problem, but I hope it does. Good luck!</p>\n"}], "owner": {"reputation": 2039, "user_id": 837515, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/58b4d4cbe8c9ae5011ad3ded31bcfdd8?s=128&d=identicon&r=PG", "display_name": "cbinder", "link": "https://stackoverflow.com/users/837515/cbinder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 42253292, "answer_count": 1, "score": 0, "last_activity_date": 1487171881, "creation_date": 1487147256, "question_id": 42244124, "link": "https://stackoverflow.com/questions/42244124/how-to-retrieve-system-proxy-settings-in-win-7-for-windows-service-in-c", "title": "How to retrieve system proxy settings in Win 7 for windows service in C", "body": "<p>I am writing an application that will run as a service and will pick system proxy settings for communication with the outside world .I tried  <code>WinHttpGetIEProxyConfigForCurrentUser</code> but it fails to retrieve proxy settings for current user which is obvious since service is running under the domain of Local System. To realize the same I have to made the user to logon to the service which I don't want application user to do. I read about <code>SERVICE_USER_OWN_PROCESS</code> parameter which can be passed to CreateService() but neither I found its declaration in WinNT.h nor I am sure if it will work. Development of application is stuck because of this issue. Can anybody please help.</p>\n"}, {"tags": ["c", "command-prompt"], "comments": [{"owner": {"reputation": 7361, "user_id": 579895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf1b4bf925a10e6387c4960c979ca535?s=128&d=identicon&r=PG", "display_name": "Pikoh", "link": "https://stackoverflow.com/users/579895/pikoh"}, "edited": false, "score": 0, "creation_date": 1487145789, "post_id": 42243687, "comment_id": 71645760, "body": "Why the c# tag?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1487145868, "post_id": 42243687, "comment_id": 71645805, "body": "This is the perfect time to learn how to use a debugger. With a debugger you can step through the code line by line while monitoring variables and their values."}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1487145948, "post_id": 42243687, "comment_id": 71645849, "body": "&quot;set a balance and get it to stay until its changed&quot; does this make sense to anyone from this planet?"}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1487146029, "post_id": 42243687, "comment_id": 71645893, "body": "<code>case 0:  exit;</code> so, this compiles?"}, {"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 0, "creation_date": 1487146083, "post_id": 42243687, "comment_id": 71645923, "body": "2 things. You reset <code>Balance</code> every time the loop iterates to 2500. The functions <code>Deposit</code> and <code>Withdraw</code> which modify <code>Balance</code> do so on a copy. They have <code>Balance</code> passed by value. If you want to modify it in these functions you need to pass a pointer to <code>Balance</code>"}, {"owner": {"reputation": 1, "user_id": 7567329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94dda53772fb322752feccc4c7567709?s=128&d=identicon&r=PG&f=1", "display_name": "Sailor Moon", "link": "https://stackoverflow.com/users/7567329/sailor-moon"}, "reply_to_user": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 0, "creation_date": 1487146240, "post_id": 42243687, "comment_id": 71646000, "body": "@Colin__s would you have any idea how I would be able to do this?"}, {"owner": {"reputation": 1, "user_id": 7567329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94dda53772fb322752feccc4c7567709?s=128&d=identicon&r=PG&f=1", "display_name": "Sailor Moon", "link": "https://stackoverflow.com/users/7567329/sailor-moon"}, "reply_to_user": {"reputation": 7361, "user_id": 579895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf1b4bf925a10e6387c4960c979ca535?s=128&d=identicon&r=PG", "display_name": "Pikoh", "link": "https://stackoverflow.com/users/579895/pikoh"}, "edited": false, "score": 0, "creation_date": 1487146267, "post_id": 42243687, "comment_id": 71646015, "body": "@Pikoh I didn&#39;t know what to label it under and I need all the help I can get."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1487146374, "post_id": 42243687, "comment_id": 71646069, "body": "@MikeNakis why wouldn&#39;t it compile. It shouldn&#39;t compile without warnings if warnings are enabled, though."}, {"owner": {"reputation": 1, "user_id": 7567329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94dda53772fb322752feccc4c7567709?s=128&d=identicon&r=PG&f=1", "display_name": "Sailor Moon", "link": "https://stackoverflow.com/users/7567329/sailor-moon"}, "reply_to_user": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1487146470, "post_id": 42243687, "comment_id": 71646132, "body": "@MikeNakis it compiles like I said I can&#39;t set a starting balance and modify it in withdraw and deposit and save it."}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1487148291, "post_id": 42243687, "comment_id": 71647180, "body": "@AnttiHaapala oh, right. I forgot.  Don&#39;t you love C.  And don&#39;t you love professors who send their students to write code as sheep to the slaughterhouse without first teaching them the concept of warnings."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7567329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94dda53772fb322752feccc4c7567709?s=128&d=identicon&r=PG&f=1", "display_name": "Sailor Moon", "link": "https://stackoverflow.com/users/7567329/sailor-moon"}, "edited": false, "score": 0, "creation_date": 1487182216, "post_id": 42245323, "comment_id": 71671734, "body": "OMG THANK YOU SO MUCH you really helped me out a lot."}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": true, "score": 0, "last_activity_date": 1487150756, "last_edit_date": 1495540394, "creation_date": 1487150756, "answer_id": 42245323, "question_id": 42243687, "link": "https://stackoverflow.com/questions/42243687/setting-a-balance-for-my-c-atm/42245323#42245323", "title": "Setting A Balance For My C ATM", "body": "<p>First: Enable compiler warnings. If you use <code>gcc</code>, add <code>-Wall</code> to the command line. If you use an IDE the option to turn on warnings should be in the compiler settings.</p>\n\n<p>When you compile with warnings you will find that you have some problems with your use of <code>printf</code> and  <code>scanf</code>. Fix those!</p>\n\n<p>Next you have the problem with <code>Balance</code> in <code>main</code> not getting updated. C uses call by value which means that the changes you make to a function argument are not visible in the calling function. To work around that you could declare the balance parameters as pointers and pass the address of <code>Balance</code>. Or you could return the new <code>Balance</code>, just like you do in your code. The only thing you forgot is to store the new value to <code>Balance</code> in <code>main</code>.</p>\n\n<p>Changed line in <code>main</code>:</p>\n\n<pre><code>Balance = process(Choice, Balance);\n</code></pre>\n\n<p>Changed <code>process</code>:</p>\n\n<pre><code>double process(int Choice, int Balance)\n{\n    // Declarations\n\n    // Statements\n    switch (Choice)\n        {\n            case 1: Balance = withdraw(Choice, Balance); // Changed line\n                break;\n            case 2: Balance = deposit(Choice, Balance); // Changed line\n                break;\n            case 3: Balance = VBalance(Choice, Balance); // Changed line\n                break;\n            case 0:  exit;\n                break;\n            deafult: printf(\"Sorry Option Not Offered\");\n\n    } // switch\n\n    return Balance;  // Changed line\n}\n</code></pre>\n\n<p>Third: <code>Balance</code> is declared an <code>int</code>, but you sometimes use <code>double</code>. You should choose one type and stick to it. Due to the <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">nature of floating point numbers</a> it is actually recommended that an <a href=\"https://stackoverflow.com/questions/32212213/how-to-represent-currency-or-money-in-c\">integral type is used for money</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 7567329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94dda53772fb322752feccc4c7567709?s=128&d=identicon&r=PG&f=1", "display_name": "Sailor Moon", "link": "https://stackoverflow.com/users/7567329/sailor-moon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 42245323, "answer_count": 1, "score": -1, "last_activity_date": 1487150756, "creation_date": 1487145688, "last_edit_date": 1487145897, "question_id": 42243687, "link": "https://stackoverflow.com/questions/42243687/setting-a-balance-for-my-c-atm", "title": "Setting A Balance For My C ATM", "body": "<p>Hey guys I am constructing an ATM Program, and I have everything ok</p>\n\n<p>I have the menu it pulls up you can select an option and it runs the function HOWEVER, I cannot for the life of me </p>\n\n<p>set a balance and \nget it to stay until its changed \nand I need it to save once it has changed in one of the two options (deposit, withdrawl) since this is a post test loop it will keep going until exit is selected and every time I need this to update the balance.</p>\n\n<p>Here is my C Code for it, if anyone could help that would be amazing.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n// Function Declarations\n\n    int getChoice ();\n    double withdraw (int Choice, int Balance);\n    double deposit (int Choice, int Balance);\n    int VBalance (int Choice, int Balance);\n    double process (int Choice, int Balance);\n\n\n\nint main (void)\n{\n// Local Declarations\n\n    int Choice;\n    int Balance;\n\n\n// Statements\n\ndo\n{\n    Balance = 2500.00;\n    Choice = getChoice ();\n    process (Choice, Balance);\n}\nwhile (Choice != 0);\n\n\nreturn 0;\n\n\n\n\n\n} // Main\n\n/*============================process=*/\n\ndouble process (int Choice, int Balance)\n{\n// Declarations\n\n\n// Statements\n    switch(Choice)\n        {\n            case 1: withdraw (Choice, Balance);\n                break;\n            case 2: deposit (Choice, Balance);\n                break;\n            case 3: VBalance (Choice, Balance);\n                break;\n            case 0:  exit;\n                break;\n            deafult: printf(\"Sorry Option Not Offered\");\n\n} // switch\n\nreturn 0;\n}\n\n\n/*============================getChoice=*/\n\nint getChoice (void)\n{\n// Local Declarations\n    char Choice;\n\n// Statements\n\n    printf(\"\\n\\n**********************************\");\n    printf(\"\\n             MENU             \");\n    printf(\"\\n\\t1.Withdrawl Money          \");\n    printf(\"\\n\\t2.Deposit Money           \");\n    printf(\"\\n\\t3.View Balance            \");\n    printf(\"\\n\\t0.Exit                    \");\n    printf(\"\\n**********************************\");\n    printf(\"\\nPlease Type Your Choice Using 0-3\");\n    printf(\"\\nThen Hit Enter: \");\n    scanf(\"%d\", &amp;Choice);\n\nreturn Choice;\n\n} //getchoice\n\n\n/*============================withdraw=*/\n\n\ndouble withdraw (int Choice, int Balance)\n{\n// Local Declarations\n    double amount;\n\n\n// Statements\n    printf(\"Funds:%d\", &amp;Balance);\n    printf(\"\\nPlease Enter How Much You Would Like To Withdraw: \");\n    scanf(\"%f\", &amp;amount);\n    Balance = Balance - amount;\n\nreturn Balance;\n\n}  //withdraw\n\n\n/*============================Deposit=*/\n\ndouble deposit (int Choice, int Balance)\n{\n// Local Declarations\n    double amount;\n\n// Statements\n    printf(\"Funds:%d\", &amp;Balance);\n    printf(\"\\nPlease Enter How Much You Would Like To Deposit: \");\n    scanf(\"%f\", &amp;amount);\n    Balance = Balance + amount;\n\nreturn Balance;\n\n} //Deposit\n\n\n/*============================VBalance=*/\n\nint VBalance (int Choice, int Balance)\n{\n// Statements\n    printf(\"\\nYour Current Funds:%d\", &amp;Balance); \n    printf(\"\\nThank Your For Viewing\");\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "random", "srand"], "comments": [{"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 2, "creation_date": 1487145171, "post_id": 42243397, "comment_id": 71645419, "body": "You shouldn&#39;t force a new seed every use. You should use <code>srand</code> at application start, not every time. BTW, you should really consider using <code>&lt;random&gt;</code> instead of old-school <code>rand</code>."}, {"owner": {"reputation": 502, "user_id": 1215921, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/944e07660564476159469f4ef9f86b85?s=128&d=identicon&r=PG", "display_name": "flotto", "link": "https://stackoverflow.com/users/1215921/flotto"}, "edited": false, "score": 1, "creation_date": 1487145312, "post_id": 42243397, "comment_id": 71645492, "body": "try init the random numbers one time at the beginning of your main function"}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1487145226, "creation_date": 1487145226, "answer_id": 42243526, "question_id": 42243397, "link": "https://stackoverflow.com/questions/42243397/rand-return-the-same-number/42243526#42243526", "title": "rand() return the same number", "body": "<p>Repeatedly calling <code>srand</code> ruins the statistical properties of the generator.</p>\n\n<p>Call it no more than once.</p>\n\n<p>(The observed behaviour is caused by <code>time(NULL)</code> returning the same value in every iteration of the loop.)</p>\n"}, {"tags": [], "owner": {"reputation": 1607, "user_id": 1068165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b28f9e838ea9db914cd65de2c1a1a938?s=128&d=identicon&r=PG", "display_name": "Mindaugas", "link": "https://stackoverflow.com/users/1068165/mindaugas"}, "is_accepted": true, "score": 4, "last_activity_date": 1487145585, "last_edit_date": 1487145585, "creation_date": 1487145235, "answer_id": 42243529, "question_id": 42243397, "link": "https://stackoverflow.com/questions/42243397/rand-return-the-same-number/42243529#42243529", "title": "rand() return the same number", "body": "<p>It is because you are reseeding it every time, and as your program probably runs very quickly, your seed value (time()) is the same for each call as it's smallest increment is 1 second.</p>\n\n<p>Try moving <code>srand()</code> into <code>main()</code> instead and call it once</p>\n"}], "owner": {"reputation": 303, "user_id": 5932654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-PH8ebgHgNpo/AAAAAAAAAAI/AAAAAAAAABk/BlOg1kLwlAk/photo.jpg?sz=128", "display_name": "Mohamed Ali Benmansour", "link": "https://stackoverflow.com/users/5932654/mohamed-ali-benmansour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 0, "closed_date": 1487145808, "accepted_answer_id": 42243529, "answer_count": 2, "score": 2, "last_activity_date": 1487145585, "creation_date": 1487144861, "last_edit_date": 1487145058, "question_id": 42243397, "link": "https://stackoverflow.com/questions/42243397/rand-return-the-same-number", "closed_reason": "Duplicate", "title": "rand() return the same number", "body": "<p>I am making a simple example in C with rand() but the function always return the same number despite i am using srand().</p>\n\n<p>This is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint generate(int min, int max)\n{\n    srand(time(NULL));\n    return rand() % (max - min + 1) + min;\n}\n\nint main()\n{\n    int i;\n    for (i = 0; i &lt; 10; i++)\n    {\n\n        printf(\"Number random %d = %d\\n\", i, generate(1, 100));\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Execution : </p>\n\n<blockquote>\n  <p>Number random 0 = 40 Number random 1 = 40 Number random 2 = 40 Number\n  random 3 = 40 Number random 4 = 40 Number random 5 = 40 Number random\n  6 = 40 Number random 7 = 40 Number random 8 = 40 Number random 9 = 40</p>\n</blockquote>\n"}, {"tags": ["c", "linux-kernel", "kernel-module", "printk"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1487151914, "post_id": 42243185, "comment_id": 71649667, "body": "@CL. Yes, my bad."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1487198259, "post_id": 42243185, "comment_id": 71680501, "body": "All those are equivalent except debug one."}], "answers": [{"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1487147082, "post_id": 42243429, "comment_id": 71646428, "body": "Actually <code>#define pr_info(fmt, ...)  eprintf(0, verbose, pr_fmt(fmt), ##__VA_ARGS__)</code>"}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1487198309, "post_id": 42243429, "comment_id": 71680528, "body": "Exception is <code>pr_debug()</code> vs. <code>printk(KERN_DEBUG)</code> and all derivatives."}], "tags": [], "owner": {"reputation": 441, "user_id": 6776860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6e7ab81e61389cca67d10c5c779777?s=128&d=identicon&r=PG&f=1", "display_name": "barcelona_delpy", "link": "https://stackoverflow.com/users/6776860/barcelona-delpy"}, "is_accepted": true, "score": 23, "last_activity_date": 1487151504, "last_edit_date": 1487151504, "creation_date": 1487144953, "answer_id": 42243429, "question_id": 42243185, "link": "https://stackoverflow.com/questions/42243185/difference-between-printk-and-pr-info/42243429#42243429", "title": "Difference between printk and pr_info", "body": "<p>The <a href=\"http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/include/linux/printk.h#n283\" rel=\"noreferrer\">kernel's printk.h</a> has:</p>\n\n<pre><code>#define pr_info(fmt,arg...) \\\n    printk(KERN_INFO fmt,##arg)\n</code></pre>\n\n<p>Just like the name, pr_info is printk with the KERN_INFO priority.</p>\n"}, {"tags": [], "owner": {"reputation": 1516, "user_id": 693291, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7e2191b14920239c5505db32bdaf476a?s=128&d=identicon&r=PG", "display_name": "jdknight", "link": "https://stackoverflow.com/users/693291/jdknight"}, "is_accepted": false, "score": 10, "last_activity_date": 1520483385, "creation_date": 1520483385, "answer_id": 49165448, "question_id": 42243185, "link": "https://stackoverflow.com/questions/42243185/difference-between-printk-and-pr-info/49165448#49165448", "title": "Difference between printk and pr_info", "body": "<p>When looking specifically at <code>pr_info</code>, the definition will in turn use <code>printk(KERN_INFO ...</code> (as mentioned in barcelona_delpy's <a href=\"https://stackoverflow.com/questions/42243185/difference-between-printk-and-pr-info/42243429#42243429\">answer</a>); however, the answer's source snippet appears to exclude the format wrapper <code>pr_fmt(fmt)</code> (as mentioned by LPs <a href=\"https://stackoverflow.com/questions/42243185/difference-between-printk-and-pr-info#comment71646428_42243429\">comment</a>).</p>\n\n<hr>\n\n<p><strong>The difference</strong> to why you may use <code>pr_info</code> over <code>printk(KERN_INFO ...</code> is the custom formatting you can set. If you wish to prefix your messages in your module with <code>printk</code>, a method is to explicitly add your prefix on each line:</p>\n\n<pre><code>printk(KERN_INFO \"mymodule: hello there\\n\");\n// outputs \"mymodule: hello there\"\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>printk(KERN_INFO KBUILD_MODNAME \" hello there\\n\");\n// outputs \"mymodule: hello there\"\n</code></pre>\n\n<p>However, if you use <code>pr_info</code> (and other <code>pr_*</code> functions), you can re-define the format and simply use <code>pr_info</code> without additional work:</p>\n\n<pre><code>... (includes)\n#ifdef pr_fmt\n#undef pr_fmt\n#endif\n#define pr_fmt(fmt) KBUILD_MODNAME \": \" fmt\n\n...\n{\n    ...\n    pr_err(\"hello there\\n\");\n    // outputs \"mymodule: hello there\" (assuming module is named 'mymodule')\n    ...\n}\n...\n</code></pre>\n\n<p>See also:</p>\n\n<ul>\n<li><a href=\"https://www.kernel.org/doc/html/latest/process/coding-style.html#printing-kernel-messages\" rel=\"noreferrer\">Kernel.org | Printing kernel messages</a></li>\n<li><a href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/include/linux/printk.h#n284\" rel=\"noreferrer\">printk implementation</a></li>\n<li><a href=\"https://lwn.net/Articles/487437/\" rel=\"noreferrer\">lwn.net | The perils of pr_info()</a></li>\n</ul>\n"}], "owner": {"reputation": 7990, "user_id": 4806357, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/KlW5A.jpg?s=128&g=1", "display_name": "Jarvis", "link": "https://stackoverflow.com/users/4806357/jarvis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15201, "favorite_count": 5, "accepted_answer_id": 42243429, "answer_count": 2, "score": 25, "last_activity_date": 1520483385, "creation_date": 1487144040, "question_id": 42243185, "link": "https://stackoverflow.com/questions/42243185/difference-between-printk-and-pr-info", "title": "Difference between printk and pr_info", "body": "<p>What's the exact difference between <code>printk</code> and <code>pr_info</code> functions ? And under what conditions, should I choose one over the another ?</p>\n"}, {"tags": ["c", "primitive-types"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1487143571, "post_id": 42242619, "comment_id": 71644588, "body": "Succinctly \u2014 No, not in standard C."}, {"owner": {"reputation": 1245, "user_id": 986696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7faEG.jpg?s=128&g=1", "display_name": "Alex Jansen", "link": "https://stackoverflow.com/users/986696/alex-jansen"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487147679, "post_id": 42242619, "comment_id": 71646760, "body": "I&#39;m assuming I&#39;m being downvoted here because the question is very basic?  I&#39;d even agree!  Nevertheless, I was curious, and now we know.  You can all put on your wizard hats and grumble back to the tops of your towers now.  ;)"}], "answers": [{"comments": [{"owner": {"reputation": 1245, "user_id": 986696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7faEG.jpg?s=128&g=1", "display_name": "Alex Jansen", "link": "https://stackoverflow.com/users/986696/alex-jansen"}, "edited": false, "score": 0, "creation_date": 1487143413, "post_id": 42242696, "comment_id": 71644507, "body": "Ironically, the project I&#39;m working on used to be a full-fledged Qt application in C++.  I started over from scratch in C after I found myself too entrenched in the Qt/C++ features and running into their constraints.  That may have been an overreaction."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 1245, "user_id": 986696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7faEG.jpg?s=128&g=1", "display_name": "Alex Jansen", "link": "https://stackoverflow.com/users/986696/alex-jansen"}, "edited": false, "score": 1, "creation_date": 1487143745, "post_id": 42242696, "comment_id": 71644675, "body": "@AlexJohnson I use Qt primarily for their GUIs. Other than that, I depend on boost and others. So, for your case, you can use Boost::any. It has a very peaceful license, too ;) (unlike Qt). Actually if you google &quot;variant type for C&quot; you&#39;ll find many other libraries."}, {"owner": {"reputation": 1245, "user_id": 986696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7faEG.jpg?s=128&g=1", "display_name": "Alex Jansen", "link": "https://stackoverflow.com/users/986696/alex-jansen"}, "edited": false, "score": 0, "creation_date": 1487147738, "post_id": 42242696, "comment_id": 71646799, "body": "relevant:  <a href=\"http://stackoverflow.com/questions/2734808/variant-datatype-library-for-c\" title=\"variant datatype library for c\">stackoverflow.com/questions/2734808/&hellip;</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487152646, "post_id": 42242696, "comment_id": 71650226, "body": "These aren&#39;t an option in C though."}], "tags": [], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "is_accepted": false, "score": 0, "last_activity_date": 1487142357, "creation_date": 1487142357, "answer_id": 42242696, "question_id": 42242619, "link": "https://stackoverflow.com/questions/42242619/is-there-a-standard-c-header-file-which-assigns-a-numeric-value-to-all-of-the-pr/42242696#42242696", "title": "Is there a standard C header file which assigns a numeric value to all of the primitive types?", "body": "<p>This is called in C++ a variant type. There are many libraries that do this for you, such as:</p>\n\n<ol>\n<li><a href=\"https://doc-snapshots.qt.io/qt5-5.8/qvariant.html\" rel=\"nofollow noreferrer\">QVariant</a> from Qt</li>\n<li><a href=\"http://www.boost.org/doc/libs/1_56_0/doc/html/any.html\" rel=\"nofollow noreferrer\">Boost any</a></li>\n</ol>\n\n<p>But remember that there's a price to pay when using such a library. Things are not most efficient when you use variants, but some times it's necessary, such as when you use OPC/UA protocols.</p>\n"}, {"comments": [{"owner": {"reputation": 1245, "user_id": 986696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7faEG.jpg?s=128&g=1", "display_name": "Alex Jansen", "link": "https://stackoverflow.com/users/986696/alex-jansen"}, "edited": false, "score": 0, "creation_date": 1487287127, "post_id": 42245994, "comment_id": 71729624, "body": "It turns out that utilizing function pointers instead of a switch was a much cleaner solution in my case.  Thank you for the inspiration!"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1487327515, "post_id": 42245994, "comment_id": 71746131, "body": "@Groo A switch with cases that are adjacent numbers most often get internally optimized to an array of function pointers. In either case, that part is hidden behind an abstraction layer. any form of polymorphism does end up as some manner of function pointer table. I&#39;m not following how this would turn the code less maintainable though, nor do I understand where you get <code>something[2]</code> from. Also, overall this solution should lead to less branches which improves performance, even with the function call overhead in mind."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1487414115, "post_id": 42245994, "comment_id": 71781915, "body": "@Lundin: never mind, I didn&#39;t read the answer well enough the first time."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 4, "last_activity_date": 1487152576, "creation_date": 1487152576, "answer_id": 42245994, "question_id": 42242619, "link": "https://stackoverflow.com/questions/42242619/is-there-a-standard-c-header-file-which-assigns-a-numeric-value-to-all-of-the-pr/42245994#42245994", "title": "Is there a standard C header file which assigns a numeric value to all of the primitive types?", "body": "<p>There are no such standard constants, no. There's a lot of things in C that you'd think would be standardized, but aren't.</p>\n\n<hr>\n\n<p>As a side note, you could take the first steps towards a bit more modern C programming by using the C11 <code>_Generic</code> keyword and implementing polymorphism behavior instead of using run-time checking of such enums. In fact, you can get rid of the enum entirely:</p>\n\n<pre><code>// variant.h / variant.c\n#include &lt;stdio.h&gt;\n\ntypedef void print_func_t (const void* data);\n\ntypedef struct\n{\n  void* data;\n  print_func_t* print;\n} variant_t;\n\n\nvoid print_char  (const void* data) { printf(\"%c\",  *(const char*)  data); }\nvoid print_short (const void* data) { printf(\"%hd\", *(const short*) data); }\nvoid print_int   (const void* data) { printf(\"%d\",  *(const int*)   data); }\n\nvoid print (const variant_t* var)\n{\n  var-&gt;print(var-&gt;data);\n}\n\n#define variant_init(var) { \\\n  .data = &amp;var, \\\n  .print = _Generic((var), char: print_char, short: print_short, int: print_int) \\\n}\n</code></pre>\n\n<p>Caller:</p>\n\n<pre><code>int main() \n{\n  char c = 'A';\n  short s = 3;\n  int i = 5;\n\n  variant_t var[3] =\n  {\n    variant_init(c),\n    variant_init(s),\n    variant_init(i)\n  };\n\n  for(size_t i=0; i&lt;3; i++)\n  {\n    print(&amp;var[i]);\n    printf(\" \");\n  }\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1245, "user_id": 986696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7faEG.jpg?s=128&g=1", "display_name": "Alex Jansen", "link": "https://stackoverflow.com/users/986696/alex-jansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 42245994, "answer_count": 2, "score": 2, "last_activity_date": 1487152576, "creation_date": 1487142110, "question_id": 42242619, "link": "https://stackoverflow.com/questions/42242619/is-there-a-standard-c-header-file-which-assigns-a-numeric-value-to-all-of-the-pr", "title": "Is there a standard C header file which assigns a numeric value to all of the primitive types?", "body": "<p>I have some code which performs differently depending on the underlying data type.  EG:</p>\n\n<pre><code>void *some_data = obtain_data();\nint data_type = obtain_data_type();\nswitch(data_type)\n{\n   case CHAR:\n      handle_char(some_data);\n      break;\n   case SHORT:\n      handle_short(some_data);\n      break;\n   case INT:\n      handle_int(some_data);\n      break;\n   // etc...\n}\n</code></pre>\n\n<p>In order for this to work I need an enum or constant which assigns a numeric value to CHAR, SHORT, INT, etc.  EG:</p>\n\n<pre><code>enum POD_TYPES\n{\n   CHAR = 1,\n   SHORT = 2,\n   INT = 3\n   // etc.\n}\n</code></pre>\n\n<p>\"Rolling my own\" is trivial here, but it seems like there ought to be a more established way of accomplishing this.  Is there a standard (or at least commonly available) header file which I can include that already has these values defined somewhere?  I'm not seeing anything listed in the library headers at <a href=\"http://en.cppreference.com/w/c/header\" rel=\"nofollow noreferrer\">cppreference</a>.  inttypes.h seems to come close, but upon further examination those types are all macros used for casting or determining system-specific min/max values for integers.</p>\n"}, {"tags": ["c", "multithreading", "pthreads", "context-switch"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1487145714, "post_id": 42242586, "comment_id": 71645703, "body": "Unless you only have a single CPU core, the threads may not need to be context switched <i>at all</i> in this case."}, {"owner": {"reputation": 657, "user_id": 6732642, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5e1f2f507154f6956f86e3881cc92560?s=128&d=identicon&r=PG", "display_name": "JJTO", "link": "https://stackoverflow.com/users/6732642/jjto"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1487145755, "post_id": 42242586, "comment_id": 71645743, "body": "I&#39;m using a single core machine"}, {"owner": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "edited": false, "score": 0, "creation_date": 1487146900, "post_id": 42242586, "comment_id": 71646343, "body": "And then there is the fact that there are other processes/threads demanding cpu time. Context switch is the loading/unloading of state variables etc., and i don&#39;t think you can measure it, you might even suffer from the observer effect :) The OS is responsible from context switch, and in user space you don&#39;t have control over it, it all happens while your process is sleeping."}, {"owner": {"reputation": 657, "user_id": 6732642, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5e1f2f507154f6956f86e3881cc92560?s=128&d=identicon&r=PG", "display_name": "JJTO", "link": "https://stackoverflow.com/users/6732642/jjto"}, "reply_to_user": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "edited": false, "score": 0, "creation_date": 1487183511, "post_id": 42242586, "comment_id": 71672518, "body": "@selcuk Cihan: I don&#39;t think that&#39;s necessarily true. There are other SO posts regarding this topic:<a href=\"http://stackoverflow.com/questions/304752/how-to-estimate-the-thread-context-switching-overhead?rq=1\" title=\"how to estimate the thread context switching overhead\">stackoverflow.com/questions/304752/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "is_accepted": false, "score": 0, "last_activity_date": 1491579548, "creation_date": 1491579548, "answer_id": 43282119, "question_id": 42242586, "link": "https://stackoverflow.com/questions/42242586/is-this-a-correct-solution-to-measure-thread-context-switch-overhead/43282119#43282119", "title": "Is this a correct solution to measure thread context switch overhead?", "body": "<p>You say:</p>\n\n<blockquote>\n  <p>I'm assuming the pthread_cond_wait(&amp;cond, &amp;mutex) wait time is approximately equal to 2 x thread context switch time. </p>\n</blockquote>\n\n<p>This is not a valid assumption. Once the mutex is released, this notifies the kernel, which then has to wake the other thread. It may not choose to do that immediately for example if there are other threads waiting to run. The mutex - as its name suggests - guarantees when things will <strong>not</strong> happen. It makes no guarantees about when they will.</p>\n\n<p>You can't expect to reliably measure context switches from within a process, and certainly not using a Posix API because there is none which promises to do that.</p>\n\n<ul>\n<li><p>On Linux you can <em>count</em> context switches for a process or thread using <code>/proc/[pid]/status</code>.</p></li>\n<li><p>On Windows this information is available from the Performance Monitor API.</p></li>\n</ul>\n\n<p>Whether either of these will get you towards your goal I don't know. I suspect what you really want to know is how much using a multithreaded system affects performance, but that'll require you to measure the performance of the application as a whole.</p>\n"}], "owner": {"reputation": 657, "user_id": 6732642, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5e1f2f507154f6956f86e3881cc92560?s=128&d=identicon&r=PG", "display_name": "JJTO", "link": "https://stackoverflow.com/users/6732642/jjto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 474, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491579548, "creation_date": 1487141976, "question_id": 42242586, "link": "https://stackoverflow.com/questions/42242586/is-this-a-correct-solution-to-measure-thread-context-switch-overhead", "title": "Is this a correct solution to measure thread context switch overhead?", "body": "<p>I'm trying to measure thread switch overhead time.\nI have two threads, a shared variable, a mutex lock, and two condition variables. Two threads will switch back and forth to write either a 1 or a 0 to the shared variable. </p>\n\n<p>I'm assuming the pthread_cond_wait(&amp;cond, &amp;mutex) wait time is approximately equal to 2 x thread context switch time. Since if a thread1 has to wait for a condition variable it has to give up the mutex lock to the thread2-><strong>thread2 context switch</strong>-> thread2 performs its task and signals the condition variable to wake up the first thread\n-><strong>context switch back to thread1</strong>->thread1 reacquires the lock.</p>\n\n<p>Is my assumption correct?</p>\n\n<p>My code is below:</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;wait.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/resource.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;ctype.h&gt;\n#include&lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;time.h&gt;\n#include &lt;pthread.h&gt;\n\n\nint var = 0;\n\nint setToZero = 1;\n\nint count = 5000;\n\npthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;\n\npthread_cond_t isZero = PTHREAD_COND_INITIALIZER;\n\npthread_cond_t isOne = PTHREAD_COND_INITIALIZER;\n\n\nstruct timespec firstStart; \n\nunsigned long long timespecDiff(struct timespec *timeA_p, struct timespec *timeB_p)\n{\n  return ((timeA_p-&gt;tv_sec * 1000000000) + timeA_p-&gt;tv_nsec) - \n           ((timeB_p-&gt;tv_sec * 1000000000) + timeB_p-&gt;tv_nsec);\n}\n\nvoid* thread1(void* param)\n{ \n\n  int rc;\n  struct timespec previousStart;\n  struct timespec start; //start timestamp\n  struct timespec stop; //stop timestamp\n  unsigned long long result;\n  int idx = 0;\n  int measurements[count];\n   clock_gettime(CLOCK_MONOTONIC, &amp;stop);\n\n   result = timespecDiff(&amp;stop,&amp;firstStart);\n\n   printf(\"first context-switch time:%llu\\n\", result);\n\n  clock_gettime(CLOCK_MONOTONIC, &amp;previousStart);\n\n  while(count &gt; 0){\n\n  //acquire lock\n  rc = pthread_mutex_lock(&amp;mutex);\n\n  clock_gettime(CLOCK_MONOTONIC,&amp;start);\n\n  while(setToZero){\n    pthread_cond_wait(&amp;isOne,&amp;mutex); // use condition variables so the threads don't busy wait inside local cache\n  }\n\n  clock_gettime(CLOCK_MONOTONIC,&amp;stop);\n\n\n   var = 0;\n\n   count--;\n\n   setToZero = 1;\n\n   //printf(\"in thread1\\n\");\n\n   pthread_cond_signal(&amp;isZero);\n    //end of critical section\n   rc = pthread_mutex_unlock(&amp;mutex); //release lock\n\n    result = timespecDiff(&amp;stop,&amp;start);\n\n    measurements[idx] = result;\n\n    idx++;\n }\n\n result = 0;\n\n int i = 0;\nwhile(i &lt; idx)\n {\n   result += measurements[i++];\n }\n\n result = result /(2*idx);\n\n printf(\"thread1 result: %llu\\n\",result);\n}\n\n\nvoid* thread2(void* param)\n{\n  int rc;\n  struct timespec previousStart;\n  struct timespec start; //start timestamp\n  struct timespec stop; //stop timestamp\n  unsigned long long result;\n  int idx = 0;\n  int measurements[count];\n\n  while(count &gt; 0){\n\n  //acquire lock\n  rc = pthread_mutex_lock(&amp;mutex);\n\n  clock_gettime(CLOCK_MONOTONIC,&amp;start);\n\n  while(!setToZero){\n    pthread_cond_wait(&amp;isZero,&amp;mutex);\n  }\n\n  clock_gettime(CLOCK_MONOTONIC,&amp;stop);\n\n   var = 1;\n\n   count--;\n\n   setToZero = 0;\n\n   //printf(\"in thread2\\n\");\n\n   pthread_cond_signal(&amp;isOne);\n    //end of critical section\n   rc = pthread_mutex_unlock(&amp;mutex); //release lock\n\n   result = timespecDiff(&amp;stop,&amp;start);\n\n   measurements[idx] = result;\n\n   idx++;\n  }\n\n result = 0;\n\n int i = 0;\nwhile(i &lt; idx)\n {\n   result += measurements[i++];\n }\n\n result = result /(2*idx);\n\n printf(\"thread2 result: %llu\\n\",result);\n}\n\nint main(){\n  pthread_t threads[2];\n\n  pthread_attr_t attr;\n\n  pthread_attr_init(&amp;attr);\n\n  clock_gettime(CLOCK_MONOTONIC,&amp;firstStart);\n\n  pthread_create(&amp;threads[0],&amp;attr,thread1,NULL);\n\n  pthread_create(&amp;threads[1],&amp;attr,thread2,NULL);\n\n  printf(\"waiting...\\n\");\n\n  pthread_join(threads[0],NULL);\n\n  pthread_join(threads[1],NULL);\n\n  pthread_cond_destroy(&amp;isOne);\n\n  pthread_cond_destroy(&amp;isZero);\n\n}\n</code></pre>\n\n<p>I get the following times:</p>\n\n<pre><code>first context-switch time:144240\nthread1 result: 3660\nthread2 result: 3770\n</code></pre>\n"}, {"tags": ["objective-c", "c", "ffmpeg", "encode"], "comments": [{"owner": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "edited": false, "score": 0, "creation_date": 1487140647, "post_id": 42242140, "comment_id": 71643072, "body": "Do you call <code>fclose</code>? You need to properly close the file after you are done with writing to it."}, {"owner": {"reputation": 63, "user_id": 913987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648ca787d5bc2fdec80dba50e3c9296c?s=128&d=identicon&r=PG", "display_name": "deshu", "link": "https://stackoverflow.com/users/913987/deshu"}, "reply_to_user": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "edited": false, "score": 0, "creation_date": 1487140929, "post_id": 42242140, "comment_id": 71643200, "body": "yeah @Sel&#231;ukCihan,m adding"}], "owner": {"reputation": 63, "user_id": 913987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648ca787d5bc2fdec80dba50e3c9296c?s=128&d=identicon&r=PG", "display_name": "deshu", "link": "https://stackoverflow.com/users/913987/deshu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 261, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487140174, "creation_date": 1487140174, "question_id": 42242140, "link": "https://stackoverflow.com/questions/42242140/encode-wav-file-using-ffmpeg-in-objective-c-or-c", "title": "encode .wav file using ffmpeg in objective c or c", "body": "<p>I have to encode .wav file and write it into same file,or other file using </p>\n\n<p>ffmpeg library,here is my code for encoding</p>\n\n<pre><code>-(void)audioencode:(const char *)fileName\n{\n\n    AVFrame *frame;\n    AVPacket pkt;\n    int i, j, k, ret, got_output;\n    int buffer_size;\n    FILE *f;\n    uint16_t *samples;\n\n    const char *format_name = \"wav\", \n\n\nconst char *file_url = \"/Users/xxxx/Downloads/simple-drum-beat.wav\";\n\n    avcodec_register_all();\n\n    av_register_all();\n\n    AVOutputFormat *format = NULL;\n\n    for (AVOutputFormat *formatIter = av_oformat_next(NULL); formatIter != NULL; formatIter = av_oformat_next(formatIter) \n{\n        int hasEncoder = NULL != avcodec_find_encoder(formatIter-&gt;audio_codec);\n        if (0 == strcmp(format_name, formatIter-&gt;name)) {\n            format = formatIter;\n            break;\n        }\n    }\n\n\n    AVCodec *codec = avcodec_find_encoder(format-&gt;audio_codec);\n\n    NSLog(@\"tet test tststs\");\n\n    AVCodecContext *c;\n\n        c = avcodec_alloc_context3(codec);\n\n        if (!c) {\n            fprintf(stderr, \"Could not allocate audio codec context\\n\");\n            exit(1);\n        }\n\n        c-&gt;sample_fmt = AV_SAMPLE_FMT_S16;\n        if (!check_sample_fmt(codec, c-&gt;sample_fmt)) {\n            fprintf(stderr, \"Encoder does not support sample format %s\",\n                    av_get_sample_fmt_name(c-&gt;sample_fmt));\n            exit(1);\n        }\n    c-&gt;bit_rate = 64000;//705600;\n   c-&gt;sample_rate    = select_sample_rate(codec);\n    c-&gt;channel_layout = select_channel_layout(codec);\n    c-&gt;channels       = av_get_channel_layout_nb_channels(c-&gt;channel_layout);\n    c-&gt;frame_size = av_get_audio_frame_duration(c, 16);\n\n    int bits_per_sample = av_get_bits_per_sample(c-&gt;codec_id);\n\n\n    int frameSize   = av_get_audio_frame_duration(c,16);\n\n        /* open it */\n        if (avcodec_open2(c, codec, NULL) &lt; 0) {\n            fprintf(stderr, \"Could not open codec\\n\");\n            exit(1);\n        }\n\n        f = fopen(fileName, \"wb\");\n        if (!f) {\n            fprintf(stderr, \"Could not open %s\\n\", fileName);\n            exit(1);\n        }\n\n        /* frame containing input raw audio */\n        frame = av_frame_alloc();\n        if (!frame) {\n            fprintf(stderr, \"Could not allocate audio frame\\n\");\n            exit(1);\n        }\n\n        frame-&gt;nb_samples     = frameSize/*c-&gt;frame_size*/;\n        frame-&gt;format         = c-&gt;sample_fmt;\n        frame-&gt;channel_layout = c-&gt;channel_layout;\n\n        buffer_size = av_samples_get_buffer_size(NULL, c-&gt;channels,frameSize /*c-&gt;frame_size*/,\n                                                 c-&gt;sample_fmt, 0);\n        samples = av_malloc(buffer_size);\n        if (!samples) {\n            fprintf(stderr, \"Could not allocate %d bytes for samples buffer\\n\",\n                    buffer_size);\n            exit(1);\n        }\n\n        /* setup the data pointers in the AVFrame */\n        ret = avcodec_fill_audio_frame(frame, c-&gt;channels, c-&gt;sample_fmt,\n                                       (const uint8_t*)samples, buffer_size, 0);\n        if (ret &lt; 0) {\n            fprintf(stderr, \"Could not setup audio frame\\n\");\n            exit(1);\n        }\n\n    float t, tincr;\n        /* encode a single tone sound */\n        t = 0;\n        tincr = 2 * M_PI * 440.0 / c-&gt;sample_rate;\n        for(i=0;i&lt;800;i++) {\n            av_init_packet(&amp;pkt);\n            pkt.data = NULL; // packet data will be allocated by the encoder\n            pkt.size = 0;\n\n            for (j = 0; j &lt; frameSize/*c-&gt;frame_size*/; j++) {\n                samples[2*j] = (int)(sin(t) * 10000);\n\n                for (k = 1; k &lt; c-&gt;channels; k++)\n                    samples[2*j + k] = samples[2*j];\n                t += tincr;\n            }\n            /* encode the samples */\n            ret = avcodec_encode_audio2(c, &amp;pkt, frame, &amp;got_output);\n            if (ret &lt; 0) {\n                fprintf(stderr, \"Error encoding audio frame\\n\");\n                exit(1);\n            }\n            if (got_output) {\n                fwrite(pkt.data, 1, pkt.size, f);\n                av_free_packet(&amp;pkt);\n            }\n        }\n}\n</code></pre>\n\n<p>but after encoded file size is zero,\nPlease suggest what m doing wrong,any help will be appreciate, thanks in advance</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 2, "creation_date": 1487140500, "post_id": 42241797, "comment_id": 71643002, "body": "1) There should be two questions instead of one: the first one is &quot;why <code>fopen()</code> returns <code>NULL</code>?&quot;, the second is &quot;do I correcly deal with the file&#39;s data?&quot;. The first one would have an obvious answer: <code>fopen()</code> is defined to return <code>NULL</code> on error, and then you&#39;re supposed to check the <code>errno</code> value, which you didn&#39;t. You might want to learn about <code>perror()</code> and <code>strerror()</code>. If on a POSIX system, read then <code>errno(3)</code> manual page. Answering the second one would require knowledge of the file&#39;s format, so you should include an excerpt from it in your question."}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1487140641, "post_id": 42241797, "comment_id": 71643067, "body": "All in all, questions of the form &quot;is doing XXX is a correct approach at solving YYY?&quot; are unfit for the StackOverflow format -- try <a href=\"https://programmers.stackexchange.com\">programmers.stackexchange.com</a> for informal discussions / code reviews."}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1487140787, "post_id": 42241797, "comment_id": 71643138, "body": "I would hence vote to close the question in its current form as I think it&#39;s impossible to edit it to match the SO&#39;s guidelines. Please consider asking two separate questions instead -- as I suggested."}, {"owner": {"reputation": 2051, "user_id": 3626537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1499840559/picture?type=large", "display_name": "Phrancis", "link": "https://stackoverflow.com/users/3626537/phrancis"}, "reply_to_user": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 2, "creation_date": 1487140961, "post_id": 42241797, "comment_id": 71643219, "body": "@kostix Programmers (now known as Software Engineering) is for high level, generally non-code questions. That said, the OP said they are having specific issues with the code,but hinted some version of the code may work. If the question can be rephrased to focus on the &quot;working&quot; part, it may be on-topic for <a href=\"http://codereview.stackexchange.com/help/on-topic\">Code Review</a> granted the on-topic guidelines are followed."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1487147843, "post_id": 42241797, "comment_id": 71646879, "body": "What does the text file look like? It would help to see if you are reading it right."}, {"owner": {"reputation": 21, "user_id": 7566757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ac34a0f6eedcc2cab3b2256cd83849?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/7566757/will"}, "edited": false, "score": 0, "creation_date": 1487193615, "post_id": 42241797, "comment_id": 71678202, "body": "Point taken. Thanks. Next time I will post separate questions to ensure no overlapping between the two."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7566757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ac34a0f6eedcc2cab3b2256cd83849?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/7566757/will"}, "edited": false, "score": 0, "creation_date": 1487194203, "post_id": 42242378, "comment_id": 71678471, "body": "Point taken. Thanks for your input. I tried to open the read only file using command line argument as part of my lab. I did rewrite the code but now I run into another problem. However, that is for another time. Thanks."}], "tags": [], "owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "is_accepted": false, "score": 1, "last_activity_date": 1487141130, "creation_date": 1487141130, "answer_id": 42242378, "question_id": 42241797, "link": "https://stackoverflow.com/questions/42241797/read-a-textfile-txt-of-random-numbers-from-the-command-line-argument-and-find-th/42242378#42242378", "title": "Read a textfile.txt of random numbers from the command line argument and find the sum", "body": "<p>You're also:</p>\n\n<ul>\n<li>passing <code>pFile</code> which was opened as read only, and trying to write to it</li>\n<li>using <code>sum</code>, <code>sumsq</code>, and <code>count</code> without initializing them</li>\n<li>probably making a mistake with <code>sumsq += (sum * sum);</code></li>\n</ul>\n\n<p>It's better to take advantage of inherent <code>stdin</code> and <code>stdout</code> file pointers, then you can do stuff like:</p>\n\n<pre><code>stats &lt; input_file &gt; output_file\n</code></pre>\n\n<p>Where <code>stats</code> is your program. If you're using Linux, you can chain your program to <code>tee</code> and do exactly what you're trying to do (i.e. output to console and file) but with no extra code.</p>\n\n<p>How I would write it:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include \"statistics.h\"\n\nvoid printStats(const int count, const double mean, const double ssdev);\n\nint main() {\n    int count = 0;\n    double numVal, sum = 0.0, sumsq = 0.0;\n    double calculatedMean, calculatedStdDev;\n\n    while (scanf(\"%lf\", &amp;numVal)) {\n        sum += numVal;\n        sumsq += numVal * numVal;\n        count++;\n    }\n\n    calculatedMean = mean(sum, count);\n    calculatedStdDev = ssdev(sum, sumsq, count);\n    printStats(count, calculatedMean, calculatedStdDev);\n\n    return EXIT_SUCCESS;\n}\n\nvoid printStats(const int count, const double mean, const double ssdev) {\n    printf(\"%d Values, Mean = %lf, Sample Standard Deviation = %lf\\n\",\n        count, mean, ssdev);\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7566757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ac34a0f6eedcc2cab3b2256cd83849?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/7566757/will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487141130, "creation_date": 1487138556, "last_edit_date": 1487138803, "question_id": 42241797, "link": "https://stackoverflow.com/questions/42241797/read-a-textfile-txt-of-random-numbers-from-the-command-line-argument-and-find-th", "title": "Read a textfile.txt of random numbers from the command line argument and find the sum", "body": "<p>hope some experts can help me. It's my first time posting on Stack so please be patient with me. Thanks.\nHere are a list of my problems:</p>\n\n<ol>\n<li>Tried to open a text file from argv[1] but the program showed NULL</li>\n<li>Tried to use fgetc to read in one character at a time. When hit \"white_space\", put ('2.2') in a buff, add a '\\0', then use sscanf to turn it into a double type. Not sure if this approach is right.</li>\n</ol>\n\n<p>Here is my code:</p>\n\n<pre><code>/*\n * This program computes simple statistics from a file of ASCII numbers\n */\n\n/* \n * File:   statsMain.c\n * Author: William Vu T Nguyen\n * ID: C0436847\n * Created on February 6, 2017, 12:10 PM\n */\n\n#include \"statistics.h\"\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nvoid printStats(FILE *dest, const int count, const double mean,\n        const double ssdev);\n\n// main program\n\nint main(int argc, char** argv) {\n    FILE *pFile;\n    int count;\n    int x;\n    char buff[100] = {0};\n    char *pBuff = buff;\n    double numVal;\n    double sum;\n    double sumsq;\n    double calculatedMean;\n    double calculatedStdDev;\n\n    if (argc != 2) {\n        fprintf(stderr, \"usage: %s dataFileName\\n\", argv[0]);\n        exit(EXIT_FAILURE);\n    } else {\n        if ((pFile = fopen(argv[1], \"r\")) == NULL) {\n            fprintf(stderr, \"Unable to open input file \\\"%s\\\"\\n\", argv[1]);\n            exit(EXIT_FAILURE);\n        } else {\n            while ((x = fgetc(pFile)) != EOF) {\n                *pBuff = x;\n                sscanf(pBuff, \"%lf\", &amp;numVal);\n                sum += numVal;\n                sumsq += (sum * sum);\n                count++;\n                pBuff++;                \n            }           \n\n            calculatedMean = mean(sum, count);\n            calculatedStdDev = ssdev(sum, sumsq, count);\n            printStats(pFile, count, calculatedMean, calculatedStdDev);\n        }\n        fclose(pFile);\n    }\n\n    return (EXIT_SUCCESS);\n}\n\nvoid printStats(FILE *dest, const int count, const double mean,\n        const double ssdev) {\n    char str[100] = {0};\n\n    sprintf(str, \"%d Values, Mean = %lf, Sample Standard Deviation = %lf\"\n            , count, mean, ssdev); //deal with buffer\n    puts(str);\n    fprintf(dest, \"%s\", str);\n}\n</code></pre>\n\n<p>If my code shows that I'm a novice in C then please be patient as I'm still in my learning stage. I love programming, circuit design, and microcontroller. Did horribly in school when learning those subjects but I never let it be a determined factor of my life. Thanks.</p>\n"}, {"tags": ["c", "bitmap", "string-conversion"], "comments": [{"owner": {"reputation": 675, "user_id": 2094911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab143598424cc6e4ec05b797c12a531?s=128&d=identicon&r=PG", "display_name": "Matso", "link": "https://stackoverflow.com/users/2094911/matso"}, "edited": false, "score": 0, "creation_date": 1487136839, "post_id": 42241118, "comment_id": 71641474, "body": "Why did You define the function to return <code>char *</code>, while what You are actually returning is <code>unsigned int</code>?"}, {"owner": {"reputation": 11, "user_id": 5966466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847fbfedce08c9922c4c9c202ae82143?s=128&d=identicon&r=PG&f=1", "display_name": "MMR-bayarea-US", "link": "https://stackoverflow.com/users/5966466/mmr-bayarea-us"}, "reply_to_user": {"reputation": 675, "user_id": 2094911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab143598424cc6e4ec05b797c12a531?s=128&d=identicon&r=PG", "display_name": "Matso", "link": "https://stackoverflow.com/users/2094911/matso"}, "edited": false, "score": 0, "creation_date": 1487137381, "post_id": 42241118, "comment_id": 71641692, "body": "Matso, identify numbers of bits set, their positions and the deriving strings from them. pasted code which i tried."}], "answers": [{"tags": [], "owner": {"reputation": 907, "user_id": 5617152, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g-d8oZWjJps/AAAAAAAAAAI/AAAAAAAAAEQ/d6WL36JzvLs/photo.jpg?sz=128", "display_name": "Dave S", "link": "https://stackoverflow.com/users/5617152/dave-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1487142781, "last_edit_date": 1487142781, "creation_date": 1487137441, "answer_id": 42241537, "question_id": 42241118, "link": "https://stackoverflow.com/questions/42241118/identify-bits-set-in-bitmap-and-print-them-in-string/42241537#42241537", "title": "identify bits set in bitmap and print them in string", "body": "<p>Without writing the actual code, here is the description of a simple algorithm based on a 64 element lookup table of strings.  0 = ZERO, 1 = ONE, 2 = TWO ... 63 = SIXTY THREE. This table will be a 64 element array of strings. For C, you could make a static 2D array using char[256] to hold your strings (or optimize by using the value of the largest string + 1), or you could make a dynamic using malloc in a For Loop)</p>\n\n<p>You then define your output string.</p>\n\n<p>You then write a For Loop, iterating through all the bits using a bit mask (using left shift) if the Bit is set you can concatenate your output string (using strcat) with a space and the contents of your lookup table for that bit position. </p>\n\n<p>Here is a brief code snippet on how you will do the concatenation: (Make sure you output string has enough memory in the outputstring variable to hold the largest string.  If you want to be more sophisticated and optimize mem usage, you could use malloc and realloc, but you have to deal with freeing the memory when it is no longer needed.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main ()\n{\n  char str[80];\n  strcpy (str,\"these \");\n  strcat (str,\"strings \");\n  strcat (str,\"are \");\n  strcat (str,\"concatenated.\");\n  puts (str);\n  return 0;\n</code></pre>\n\n<p>}</p>\n\n<p>In your case, bit 3 will be encountered as the first set bit and the output string will then contain \"THREE\", then on the next iteration bit 4 will be detected as set and the output will be appended as \"THREE FOUR\".</p>\n\n<p>Note: Because this appears to be an academic problem I would like to point out that there exists here the classical case of complexity vs space trade off. My description above was minimum complexity at the expense of space. Meaning, you will have 64 strings with redundancy in many of these strings. For example: TWENTY TWO, THIRTY TWO, FOURTY TWO, FIFTY TWO, and SIXTY TWO, all contain the string \"TWO\".  Space could be optimized by using half the strings:  ZERO, ONE, through NINETEEN, then TWENTY, THIRTY, FORTY, FIFTY, SIXTY.  However, your indexing logic will be more complicated for bits greater than TWENTY.  for bit 21 you will need to concatenate TWENTY and ONE.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7532774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/789d209460459307a73ef96f725b10f2?s=128&d=identicon&r=PG", "display_name": "PigBoop", "link": "https://stackoverflow.com/users/7532774/pigboop"}, "is_accepted": false, "score": 0, "last_activity_date": 1487138366, "creation_date": 1487138366, "answer_id": 42241743, "question_id": 42241118, "link": "https://stackoverflow.com/questions/42241118/identify-bits-set-in-bitmap-and-print-them-in-string/42241743#42241743", "title": "identify bits set in bitmap and print them in string", "body": "<p>You could brute force it by having a lookup table which has a word representation for each bit you're interested in.</p>\n\n<pre><code>char* bit_to_word[10] = { \"ONE\",\"TWO\",\"THREE\",\"FOUR\",\"FIVE\",\"SIX\",\"SEVEN\",\"EIGHT\",\"NINE\",\"TEN\" }; // and so forth...\n</code></pre>\n\n<p>Then in your function check every bit and if it is set, concatenate the corresponding word from your bit_to_word array. You can safely do this by using the <a href=\"http://en.cppreference.com/w/c/string/byte/strcat\" rel=\"nofollow noreferrer\">strcat_s</a> function.</p>\n\n<pre><code>strcat_s(number_string, BUF_SIZE, bit_to_word[i]);\n</code></pre>\n\n<p>One gotcha. After the first word you will want to add a space as well so you might want to keep track of that. </p>\n\n<p>This code checks the first 10 bits of the number and prints out THREE FOUR for the test case. Be aware though that it doesn't do any memory cleanup.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;    \n\n#define BUF_SIZE 2048\n\nchar* bit_to_word[10] = { \"ONE\",\"TWO\",\"THREE\",\"FOUR\",\"FIVE\",\"SIX\",\"SEVEN\",\"EIGHT\",\"NINE\",\"TEN\" };\n\nchar* unsigned_int_to_string(unsigned long int n)\n{   \n    char* number_string = (char*)malloc(BUF_SIZE);\n    memset(number_string, 0, BUF_SIZE);\n\n    int first_word = 1;\n    unsigned long int tester = 1;\n    int err;\n    for (unsigned long int i = 0; i &lt; 10; i++)\n    {\n        if (tester &amp; n)\n        {\n            if (!first_word)\n            {\n                strcat_s(number_string, BUF_SIZE, \" \");\n            }\n            err = strcat_s(number_string, BUF_SIZE, bit_to_word[i]);\n            if (err)\n            {\n                printf(\"Something went wrong...\\n\");\n            }\n            first_word = 0;\n        }\n        tester &lt;&lt;= 1;\n    }\n\n    return number_string;\n}\n\nint main(int argc, char** argv)\n{\n    char* res = unsigned_int_to_string(0b1100);\n    printf(\"%s\\n\", res);\n} \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5966466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847fbfedce08c9922c4c9c202ae82143?s=128&d=identicon&r=PG&f=1", "display_name": "MMR-bayarea-US", "link": "https://stackoverflow.com/users/5966466/mmr-bayarea-us"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 951, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487142781, "creation_date": 1487135162, "last_edit_date": 1487137255, "question_id": 42241118, "link": "https://stackoverflow.com/questions/42241118/identify-bits-set-in-bitmap-and-print-them-in-string", "title": "identify bits set in bitmap and print them in string", "body": "<p>given a  unsigned 64 bit integer.\nwhich has multiple bits set in it.\nwant to process the bitmap and identify the position and return the string according to the position where bit is it.\nexample: unsigned integer is 12. means 1100 which implies third bit and fourth bit are set. this should print THREE FOUR \nfunction takes unsigned int and returns string.\nI looked some pieces of code and i don't see this as a dup of some other question.</p>\n\n<pre><code>char* unsigned_int_to_string(unsigned long int n)\n{\n    unsigned int count = 0;\n    while(n)\n    {\n        int i, iter;\n        count += n &amp; 1;\n        n &gt;&gt;= 1;\n     }\n\n    /*** Need help to fill this block ***/\n    /** should return string THREE FOUR***/\n}\n\n\n#include &lt;stdio.h&gt;\nint main()\n{\n    unsigned long int i = 12;\n    printf(\"%s\", unsigned_int_to_sring(i));\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "segmentation-fault"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1487133961, "post_id": 42240868, "comment_id": 71640608, "body": "That system call has pretty much nothing to do with it."}, {"owner": {"reputation": 522, "user_id": 2079418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5f71ffcff2882c688d067a128c31c0?s=128&d=identicon&r=PG", "display_name": "avatli", "link": "https://stackoverflow.com/users/2079418/avatli"}, "edited": false, "score": 0, "creation_date": 1487136291, "post_id": 42240868, "comment_id": 71641299, "body": "Memory protection is a part of modern processor architectures. An attempt to access unowned memory results in a &quot;hardware fault&quot;, OS just handles the &quot;hardware fault&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7566515, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fdAkey9Ldx4/AAAAAAAAAAI/AAAAAAAAAHY/0E1NBocbKB0/photo.jpg?sz=128", "display_name": "Piyush Arora", "link": "https://stackoverflow.com/users/7566515/piyush-arora"}, "edited": false, "score": 0, "creation_date": 1487180168, "post_id": 42241099, "comment_id": 71670465, "body": "So how does it really checks the access of that evaluated address, I mean is there any other system call that is involved?? I heard that SIGSEGV gets thrown  from MMU itself but what happens behind the scenes?"}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 11, "user_id": 7566515, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fdAkey9Ldx4/AAAAAAAAAAI/AAAAAAAAAHY/0E1NBocbKB0/photo.jpg?sz=128", "display_name": "Piyush Arora", "link": "https://stackoverflow.com/users/7566515/piyush-arora"}, "edited": false, "score": 0, "creation_date": 1487203665, "post_id": 42241099, "comment_id": 71682401, "body": "@PiyushArora That&#39;s handled by the CPU; it raises an exception on a bad memory access, and the kernel translates that to a signal. System calls don&#39;t come into the picture at all."}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 1, "last_activity_date": 1487135038, "creation_date": 1487135038, "answer_id": 42241099, "question_id": 42240868, "link": "https://stackoverflow.com/questions/42240868/how-sigsegv-fault-works-if-i-try-to-print-value-of-an-address-not-in-user-space/42241099#42241099", "title": "How SIGSEGV fault works if i try to print value of an address not in user space", "body": "<blockquote>\n  <p>Now, i want to know how write system call internally checks the access of memory based on the pointer provided, and how SIGSEGV gets handled from write system call.</p>\n</blockquote>\n\n<p>It doesn't.</p>\n\n<p>The bad memory access is happening in your <code>main</code> function, in the code fragment:</p>\n\n<pre><code>*(&amp;a+i)\n</code></pre>\n\n<p>This code is evaluated before <code>printf</code> is called at all, and long before it ends up calling <code>write</code>.</p>\n\n<p>If <code>write</code> is passed an invalid pointer, it will return the error <code>EFAULT</code> -- it will not crash! <code>SIGSEGV</code> is only generated when code running within your process performs a bad memory access.</p>\n"}], "owner": {"reputation": 11, "user_id": 7566515, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fdAkey9Ldx4/AAAAAAAAAAI/AAAAAAAAAHY/0E1NBocbKB0/photo.jpg?sz=128", "display_name": "Piyush Arora", "link": "https://stackoverflow.com/users/7566515/piyush-arora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487135038, "creation_date": 1487133609, "last_edit_date": 1487133651, "question_id": 42240868, "link": "https://stackoverflow.com/questions/42240868/how-sigsegv-fault-works-if-i-try-to-print-value-of-an-address-not-in-user-space", "title": "How SIGSEGV fault works if i try to print value of an address not in user space", "body": "<p>I was reading about the memory management implementation in linux. Got to know about memory segmentation so was trying to know about how memory is protected. I created a program to create a segmentation fault as below </p>\n\n<pre><code>void main()\n{\n    int a=10;\n    for(int i=0;i&lt;5000;i++)\n    {\n        printf(\"value is - %d\",*(&amp;a+i));\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>that gives output as below using strace</p>\n\n<pre><code>write(1, \"value is - 1937059584\\n\", 22value is - 1937059584\n) = 22\nwrite(1, \"value is - 1768042354\\n\", 22value is - 1768042354\n) = 22\nwrite(1, \"value is - 1701326702\\n\", 22value is - 1701326702\n) = 22\nwrite(1, \"value is - 7302252\\n\", 19value is - 7302252\n)    = 19\nwrite(1, \"value is - 0\\n\", 13value is - 0\n)          = 13\nwrite(1, \"value is - 0\\n\", 13value is - 0\n)          = 13\n--- SIGSEGV {si_signo=SIGSEGV, si_code=SEGV_MAPERR,       si_addr=0x7ffec6ddd000} ---\n+++ killed by SIGSEGV +++\nSegmentation fault\n</code></pre>\n\n<p>Now, i want to know how write system call internally checks the access of memory based on the pointer provided, and how SIGSEGV gets handled from write system call.</p>\n"}, {"tags": ["c", "wifi", "broadcast", "raw-sockets"], "answers": [{"tags": [], "owner": {"reputation": 145537, "user_id": 362536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/da5816365344305a614343a4065a2786?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/362536/brad"}, "is_accepted": true, "score": 0, "last_activity_date": 1487215697, "creation_date": 1487215697, "answer_id": 42264308, "question_id": 42240866, "link": "https://stackoverflow.com/questions/42240866/socket-program-for-sending-broadcast-a-packet-over-wifi-radio-to-a-device-in-its/42264308#42264308", "title": "Socket program for sending broadcast a packet over wifi radio to a device in its range", "body": "<blockquote>\n  <p>As my knowledge, this work can be done if I send a ethernet frame to the dest Mac address ff:ff:ff:ff:ff:ff.</p>\n</blockquote>\n\n<p>Nope, that's not how this works.</p>\n\n<p>Joining an SSID is analogous to plugging in an Ethernet adapter to a physical Ethernet network.  If you're not plugged into a network on a regular wired Ethernet adapter, you can't send packets to devices on that network.  With WiFi adapters, until you join the SSID, you can't communicate with other devices on that network.</p>\n\n<p>The lower layers of WiFi are typically inaccessible to your application.  There are some WiFi adapters available for debugging that allow you to listen and transmit arbitrary 802.11a/b/g/n frames, for things like beacons, probes, and others.  None of these management frames are intended to carry traffic.</p>\n\n<p>If you want to send data between a couple devices that haven't been set up to communicate with each other, you should have them join an ad-hoc SSID.  Then, broadcast traffic on the network as usual.</p>\n"}], "owner": {"reputation": 3, "user_id": 7294638, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kHGzzWHybHk/AAAAAAAAAAI/AAAAAAAAADY/BiG-43C1Cxo/photo.jpg?sz=128", "display_name": "H&#242;a L&#234; Vi\u1ec7t", "link": "https://stackoverflow.com/users/7294638/h%c3%b2a-l%c3%aa-vi%e1%bb%87t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 852, "favorite_count": 0, "accepted_answer_id": 42264308, "answer_count": 1, "score": 0, "last_activity_date": 1487215697, "creation_date": 1487133585, "question_id": 42240866, "link": "https://stackoverflow.com/questions/42240866/socket-program-for-sending-broadcast-a-packet-over-wifi-radio-to-a-device-in-its", "title": "Socket program for sending broadcast a packet over wifi radio to a device in its range", "body": "<p>I want to run a program for sending my own packet to the environment over wifi radio. As my knowledge, this work can be done if I send a ethernet frame to the dest Mac address ff:ff:ff:ff:ff:ff. So i opened a raw socket and constructed the ethernet header following code.</p>\n\n<pre><code>/* Open RAW socket to send on */\n    if ((sockfd = socket(AF_PACKET, SOCK_RAW, IPPROTO_RAW)) == -1) {\n        perror(\"socket\");\n    }\n\n    /* Get the index of the interface to send on */\n    memset(&amp;if_idx, 0, sizeof(struct ifreq));\n    strncpy(if_idx.ifr_name, ifName, IFNAMSIZ-1);\n    if (ioctl(sockfd, SIOCGIFINDEX, &amp;if_idx) &lt; 0)\n        perror(\"SIOCGIFINDEX\");\n    /* Get the MAC address of the interface to send on */\n    memset(&amp;if_mac, 0, sizeof(struct ifreq));\n    strncpy(if_mac.ifr_name, ifName, IFNAMSIZ-1);\n    if (ioctl(sockfd, SIOCGIFHWADDR, &amp;if_mac) &lt; 0)\n        perror(\"SIOCGIFHWADDR\");\n\n    /* Construct the Ethernet header */\n    memset(sendbuf, 0, BUF_SIZ);\n    /* Ethernet header */\n    eh-&gt;ether_shost[0] = ((uint8_t *)&amp;if_mac.ifr_hwaddr.sa_data)[0];\n    eh-&gt;ether_shost[1] = ((uint8_t *)&amp;if_mac.ifr_hwaddr.sa_data)[1];\n    eh-&gt;ether_shost[2] = ((uint8_t *)&amp;if_mac.ifr_hwaddr.sa_data)[2];\n    eh-&gt;ether_shost[3] = ((uint8_t *)&amp;if_mac.ifr_hwaddr.sa_data)[3];\n    eh-&gt;ether_shost[4] = ((uint8_t *)&amp;if_mac.ifr_hwaddr.sa_data)[4];\n    eh-&gt;ether_shost[5] = ((uint8_t *)&amp;if_mac.ifr_hwaddr.sa_data)[5];\n    eh-&gt;ether_dhost[0] = 0xff;\n    eh-&gt;ether_dhost[1] = 0xff;\n    eh-&gt;ether_dhost[2] = 0xff;\n    eh-&gt;ether_dhost[3] = 0xff;\n    eh-&gt;ether_dhost[4] = 0xff;\n    eh-&gt;ether_dhost[5] = 0xff;\n    /* Ethertype field */\n    eh-&gt;ether_type = htons(ETH_P_BATMAN);\n    tx_len += sizeof(struct ether_header);\n\n    /* Packet data */\n    sendbuf[tx_len++] = 0xaa;\n    sendbuf[tx_len++] = 0xaa;\n    sendbuf[tx_len++] = 0xaa;\n    sendbuf[tx_len++] = 0xaa;\n    sendbuf[tx_len++] = 0xaa;\n    sendbuf[tx_len++] = 0xaa;\n    sendbuf[tx_len++] = 0xaa;\n    sendbuf[tx_len++] = 0xaa;\n    sendbuf[tx_len++] = 0xaa;\n    sendbuf[tx_len++] = 0xaa;\n    sendbuf[tx_len++] = 0xaa;\n    sendbuf[tx_len++] = 0xaa;\n</code></pre>\n\n<p>I tested this program on an router run in AP mode, but the problem is I could only receive this packet when i access in it WLAN SSID. My question is how i can receive this packet when i am in this router transmission range without connect to it ssid. Any help would be appreciated.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1487132701, "post_id": 42240729, "comment_id": 71640301, "body": "What standard? C or C++ and which version of either?"}, {"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1487132726, "post_id": 42240729, "comment_id": 71640306, "body": "It is C but same rules or ?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1487132791, "post_id": 42240729, "comment_id": 71640326, "body": "If you are asking about specific sections and paragraphs of some document, you better specify what document you are talking about."}, {"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1487132820, "post_id": 42240729, "comment_id": 71640332, "body": "it is from C99 standard."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487138730, "post_id": 42240729, "comment_id": 71642276, "body": "The C99 standard is old; it has been superseded by the C11 standard for 5 years now."}, {"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1487176793, "post_id": 42240729, "comment_id": 71668017, "body": "Maybe but I need to know the previous standards and then it will be easy to know the new rules or features in C11"}], "answers": [{"comments": [{"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1487190037, "post_id": 42241802, "comment_id": 71676254, "body": "For <code>double i; char s; i=i+s;</code> there is no integer promotion for <code>s</code> right ?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 1, "creation_date": 1487190339, "post_id": 42241802, "comment_id": 71676414, "body": "@Sabrina: The second case in 6.3.1.8p1 is &quot;Otherwise, if the corresponding real type of either operand is double, the other operand is converted, without change of type domain, to a type whose corresponding real type is double.&quot; That applies, so <code>s</code> is converted to a <code>double</code>. To do the conversion, we need to use 6.3.1.4p2, &quot;When a value of integer type is converted to a real floating type, if the value being converted can be represented exactly in the new type, it is unchanged.&quot; That applies in this case. No integer promotion anywhere in that procedure."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 1, "creation_date": 1487190647, "post_id": 42241802, "comment_id": 71676555, "body": "Technically, I suppose, it is possible that a <code>char</code> would not fit into a <code>double</code> without losing accuracy, but that would require very wide <code>char</code>s and very narrow <code>double</code>s. I doubt whether such an architecture exists, but you never know."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1487190726, "post_id": 42241802, "comment_id": 71676607, "body": "Also, I think my comment above illustrates the difference between the &quot;what conversion&quot; and &quot;how to convert&quot; questions, which was the original point of the answer."}, {"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1487192266, "post_id": 42241802, "comment_id": 71677449, "body": "Last question please: for conversion from unsigned integer to signed integer with greater rank is it sign extended ?"}, {"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1487194188, "post_id": 42241802, "comment_id": 71678463, "body": "and if there is no <code>char a,c,b; c=a+b;</code> here also there is no integer promotion as there is no int or unsigned int."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1487201299, "post_id": 42241802, "comment_id": 71681655, "body": "When an unsigned value is converted to a signed type of greater rank, the value is the unchanged, the same as the conversion from char to double noted above. How that is implemented at the hardware level is not specified by 6.3.1; in the case of integers we can deduce that any extra bits are set to 0, but that&#39;s an implementation detail. If <code>a</code> and <code>b</code> are <code>char</code> then <code>a+b</code> causes integer promotion of both arguments; the result of the addition will be <code>int</code>, and converting the result back to a <code>char</code> could overflow unless <code>char</code> is an unsigned type. So <code>char c = a + b;</code> is not advised."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1487201570, "post_id": 42241802, "comment_id": 71681742, "body": "@sabrina, as before the precise details may vary with unorthodox architectures. In particular, if <code>char</code> is an unsigned type which is as wide as an <code>int</code> then the integer promotion in <code>a+b</code> will convert both operands to <code>unsigned int</code> (which presumably does not change the underlying representation) and the type of the addition will be therefore also be <code>unsigned int</code>, thus avoiding the risk of overflow. But that architecture is uncommon."}, {"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1487206489, "post_id": 42241802, "comment_id": 71683237, "body": "but there is no presence for int or unsigned int in the expression why there is integer promotion for result."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1487206770, "post_id": 42241802, "comment_id": 71683322, "body": "@sabrina, because the standard says so, in 6.3.1.8. First it checks if an operand is a floating point type. If not, it applies the integer promotions to both operands, and then proceeds with the rest of the algorithm."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1487207515, "post_id": 42241802, "comment_id": 71683541, "body": "@sabrina, it&#39;s the third &quot;otherwise&quot; in that clause, if you haven&#39;t found it yet."}, {"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1487212122, "post_id": 42241802, "comment_id": 71684710, "body": "<code>The following</code> <b><code>may be used in an expression</code></b> <code>wherever an</code> <b><code>int or unsigned int may be used:</code></b> feel like there is ambiguity here."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1487213042, "post_id": 42241802, "comment_id": 71684973, "body": "@sabrina: perhaps it would help if you explain a specific example where the standatd, <i>read as a whole</i> appears to describe two different behaviours. Because I think that the prescribed behaviour is clear in every case. The clause you are quoting is not sufficient <i>by itself</i> but it is accompanied by the rest of the standard."}, {"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1487215641, "post_id": 42241802, "comment_id": 71685681, "body": "Thank you for your time @rici !"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 2, "last_activity_date": 1487139200, "last_edit_date": 1487139200, "creation_date": 1487138587, "answer_id": 42241802, "question_id": 42240729, "link": "https://stackoverflow.com/questions/42240729/casting-and-integer-conversion-confusion/42241802#42241802", "title": "casting and integer conversion confusion", "body": "<p>There are a number of circumstances under which a C compiler will insert code to convert one datatype to another. These include <em>explicit conversions</em> performed by the cast operator, and a variety of implicit conversions. Both of these conversion contexts are covered by &sect;6.3.1:</p>\n\n<blockquote>\n  <ol>\n  <li>Several operators convert operand values from one type to another automatically. This subclause specifies the result required from such an <em>implicit conversion</em>, as well as those that result from a cast operation (an <em>explicit conversion</em>).</li>\n  </ol>\n</blockquote>\n\n<p>&sect;6.3.1.3 explains how the conversions are performed, without specifying <em>when</em> the conversions are performed. The same procedure is used both for explicit and implicit conversions; to perform a conversion, it is only needed to know the original type and the desired type. </p>\n\n<p>&sect;6.3.1.8 explains how the destination type is selected in some common contexts, without specifying the algorithm for the conversion. So the two clauses are entirely complementary. One describes how a conversion is done, and the other describes which conversion is done.</p>\n\n<p>&sect;6.3.1.8 applies to certain arithmetic operators whose operands must be of the same type. (As noted, this clause doesn't apply to <em>all</em> arithmetic operators and you have to read the description of each individual operator to see the exceptions.) It should be noted that the algorithm to select the target types for both operands only results in \"widening\" conversions. The target type is always as wide as or wider than the original type. It is possible that a signed integer will be converted to an unsigned integer of the same width, but an unsigned type is only converted to a signed type when the signed type is wide enough to represent all values of the unsigned type.</p>\n\n<p>The implementation of signed to unsigned conversions is precisely defined without implementation-defined behaviour in &sect;6.3.1.3p2;. Thus, paragraph &sect;6.3.1.3p3 will never apply to the conversions required by &sect;6.3.1.8. This is also true of the <em>integer promotions</em> defined in &sect;6.3.1.1p2, which can be triggered by the algorithm described in &sect;6.3.1.8.</p>\n\n<p>In other contexts in which automatic or explicit conversion takes place, narrowing conversions may be requested; if the target of a narrowing conversion is signed, &sect;6.3.1.3p3 may apply.</p>\n"}], "owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 42241802, "answer_count": 1, "score": 0, "last_activity_date": 1487139200, "creation_date": 1487132601, "last_edit_date": 1487136199, "question_id": 42240729, "link": "https://stackoverflow.com/questions/42240729/casting-and-integer-conversion-confusion", "title": "casting and integer conversion confusion", "body": "<p>I feel like <strong>6.3.1.3</strong>  of standard is already included in <strong>6.3.1.8</strong> </p>\n\n<p>but reading:</p>\n\n<blockquote>\n  <p>Otherwise, the new type is signed and the value cannot be represented\n  in it; either the result is implementation-defined or an\n  implementation-defined signal is raised.</p>\n</blockquote>\n\n<p>It is not mentioned this case there. So is 6.3.1.3 for <em>integer promotions</em> only and when there is casting what is the order of conversion. Is it promotion and then casting or casting then promotions or only casting .</p>\n"}, {"tags": ["c", "swift", "interop"], "comments": [{"owner": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "edited": false, "score": 0, "creation_date": 1487134135, "post_id": 42240617, "comment_id": 71640652, "body": "Good question, but can&#39;t you just call <code>free()</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 4371, "user_id": 5196056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e60f19699f947713c612d70b80524a?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoli P", "link": "https://stackoverflow.com/users/5196056/anatoli-p"}, "is_accepted": true, "score": 2, "last_activity_date": 1487262654, "last_edit_date": 1487262654, "creation_date": 1487218667, "answer_id": 42264854, "question_id": 42240617, "link": "https://stackoverflow.com/questions/42240617/swift-interoperability-of-unsafemutablepointer-deallocatecapacity-with-free/42264854#42264854", "title": "Swift: Interoperability of UnsafeMutablePointer.deallocate(capacity:) with free()", "body": "<p>Documentation is unclear about this, but testing suggests interoperability.  </p>\n\n<p>Using <code>malloc()</code> in C, then calling <code>deallocate()</code> in Swift and trying to <code>free()</code> the pointer in C (or vice versa) will result in a run-time error, yet the code will run fine if only one of <code>deallocate()</code> or <code>free()</code> is used, but not both.</p>\n\n<p>Similarly, allocating a structure in Swift, then using <code>deallocate()</code> in Swift and <code>free()</code> in C (or the other way around) will also result in a run-time error.</p>\n\n<p>It is also OK to use <code>free()</code> in Swift as suggested by @jtbandes.  In fact, this approach might be safer than calling <code>deallocate()</code>.</p>\n\n<p>As for documentation, see <a href=\"https://developer.apple.com/reference/swift/unsafemutablepointer\" rel=\"nofollow noreferrer\">https://developer.apple.com/reference/swift/unsafemutablepointer</a>.</p>\n\n<p>Also, you can dig through the <code>UnsafeMutablePointer</code>'s source code here: <a href=\"https://github.com/apple/swift/blob/master/stdlib/public/core/UnsafePointer.swift.gyb\" rel=\"nofollow noreferrer\">https://github.com/apple/swift/blob/master/stdlib/public/core/UnsafePointer.swift.gyb</a></p>\n\n<p>I haven't had time to figure out the implementation yet.</p>\n"}], "owner": {"reputation": 2735, "user_id": 96205, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b54a8ddbdd15dd6523c35df7a7c15118?s=128&d=identicon&r=PG", "display_name": "Johannes Bittner", "link": "https://stackoverflow.com/users/96205/johannes-bittner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 1, "accepted_answer_id": 42264854, "answer_count": 1, "score": 3, "last_activity_date": 1487262654, "creation_date": 1487132001, "question_id": 42240617, "link": "https://stackoverflow.com/questions/42240617/swift-interoperability-of-unsafemutablepointer-deallocatecapacity-with-free", "title": "Swift: Interoperability of UnsafeMutablePointer.deallocate(capacity:) with free()", "body": "<p>Can I use <code>UnsafeMutablePointer.deallocate(capacity:)</code> with a pointer whose memory has previously been allocated using <code>malloc</code>? I.e., does <code>deallocate</code> behave like <code>free</code>? </p>\n\n<p>One scenario where this happens is when calling C functions from Swift which allocate memory using <code>malloc</code> and expect the caller to <code>free()</code> that memory later. An example is the <code>LIBMTP_Detect_Raw_Devices</code> function (<a href=\"https://github.com/libmtp/libmtp/blob/master/examples/files.c\" rel=\"nofollow noreferrer\">see here for an example use</a>). The function expects that the caller frees the memory (<code>rawdevices</code>) allocated inside the function. </p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7490959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6106c45681af956193321103f7bb702b?s=128&d=identicon&r=PG&f=1", "display_name": "Hello World", "link": "https://stackoverflow.com/users/7490959/hello-world"}, "edited": false, "score": 0, "creation_date": 1487132217, "post_id": 42240629, "comment_id": 71640171, "body": "If I have a huge list of integers in a file and I have to read them, declaring variable for each one of them will be too long. So for such situations, how should I approach the problem?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 5, "user_id": 7490959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6106c45681af956193321103f7bb702b?s=128&d=identicon&r=PG&f=1", "display_name": "Hello World", "link": "https://stackoverflow.com/users/7490959/hello-world"}, "edited": false, "score": 0, "creation_date": 1487132271, "post_id": 42240629, "comment_id": 71640189, "body": "You need to declare only one variable."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 2, "last_activity_date": 1487132032, "creation_date": 1487132032, "answer_id": 42240629, "question_id": 42240595, "link": "https://stackoverflow.com/questions/42240595/other-way-to-scan-values-in-a-txt-file-apart-using-arrays/42240629#42240629", "title": "Other way to scan values in a .txt file apart using arrays?", "body": "<p>For your particular case you do not need array as you are just printing these values after read. You can use a variable to read integers from the file   </p>\n\n<pre><code>FILE *fp;\nint a;\nint x;\nfp = fopen(\"testdata4\", \"r\");\nfor (int i = 0; i &lt; 5; i++)\n{\n    fscanf(fp, \"%d\", &amp;a);\n    printf(\"%d\\n\", a);\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7490959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6106c45681af956193321103f7bb702b?s=128&d=identicon&r=PG&f=1", "display_name": "Hello World", "link": "https://stackoverflow.com/users/7490959/hello-world"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487132032, "creation_date": 1487131821, "question_id": 42240595, "link": "https://stackoverflow.com/questions/42240595/other-way-to-scan-values-in-a-txt-file-apart-using-arrays", "title": "Other way to scan values in a .txt file apart using arrays?", "body": "<p>Im new to C and am currently writing a code where I have to scan a list of random integers from a .txt file, but without the usage of arrays. This is the code I used for writing the program with the help of an array to read 5 random integers from the .txt file.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n\n    int main(int argc, char const *argv[])\n {\n    FILE *fp;\n    int a[5];\n    int i = 0;\n    int x;\n\n    fp = fopen(\"testdata4\", \"r\");\n    for (int i = 0; i &lt; 5; i++)\n  {\n    fscanf(fp, \"%d\", &amp;a[i]);\n    printf(\"%d\\n\", a[i]);\n}\nfclose(fp);\n\nreturn 0;\n}\n</code></pre>\n\n<p>How should I write the code so that it reads a .txt file without an array and reads the integers from the file to the output?</p>\n"}, {"tags": ["objective-c", "c"], "comments": [{"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 0, "creation_date": 1487129673, "post_id": 42240230, "comment_id": 71639481, "body": "Flagging to close as primarily opinion-based."}, {"owner": {"reputation": 1890, "user_id": 568503, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zkHKx.png?s=128&g=1", "display_name": "Flatlyn", "link": "https://stackoverflow.com/users/568503/flatlyn"}, "reply_to_user": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 0, "creation_date": 1487129950, "post_id": 42240230, "comment_id": 71639550, "body": "@MDXF I don&#39;t think the question in itself is opinion based, however it may lead to opinion based answers. I&#39;ve edited the question to style it more towards fact based, technical answers rather than opinion."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 1890, "user_id": 568503, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zkHKx.png?s=128&g=1", "display_name": "Flatlyn", "link": "https://stackoverflow.com/users/568503/flatlyn"}, "edited": false, "score": 0, "creation_date": 1487129984, "post_id": 42240230, "comment_id": 71639556, "body": "@JamesKrawczyk If a question begins with &quot;Why do some developers&quot;, it&#39;s clearly opinion-based."}, {"owner": {"reputation": 1890, "user_id": 568503, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zkHKx.png?s=128&g=1", "display_name": "Flatlyn", "link": "https://stackoverflow.com/users/568503/flatlyn"}, "reply_to_user": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 0, "creation_date": 1487130165, "post_id": 42240230, "comment_id": 71639589, "body": "@MDXF Right, which is why I edited the question to ask for a non-opinion based answer. The question itself isn&#39;t inherently bad for StackOverflow, it was just worded poorly. It&#39;s perfectly fine to ask a question here that the answer may be &quot;There is no technical reason, it&#39;s personal style.&quot;. What isn&#39;t okay is explaining that personal style as an answer."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 1890, "user_id": 568503, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zkHKx.png?s=128&g=1", "display_name": "Flatlyn", "link": "https://stackoverflow.com/users/568503/flatlyn"}, "edited": false, "score": 0, "creation_date": 1487130580, "post_id": 42240230, "comment_id": 71639699, "body": "@JamesKrawczyk If the answer <i>could be</i> an explanation of personal style, the question is off-topic. And as your edit hasn&#39;t yet been approved, I wouldn&#39;t speak so soon..."}, {"owner": {"reputation": 3218, "user_id": 297201, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/N63k0.jpg?s=128&g=1", "display_name": "David van Dugteren", "link": "https://stackoverflow.com/users/297201/david-van-dugteren"}, "edited": false, "score": 1, "creation_date": 1487133989, "post_id": 42240230, "comment_id": 71640616, "body": "Oh wow! That&#39;s a shame, I&#39;m sure its valuable knowledge. Don&#39;t recall SO being so rigid."}, {"owner": {"reputation": 21971, "user_id": 169394, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb61781f55bda1790e6216a2dee08b11?s=128&d=identicon&r=PG", "display_name": "Itai Ferber", "link": "https://stackoverflow.com/users/169394/itai-ferber"}, "edited": false, "score": 0, "creation_date": 1487171859, "post_id": 42240230, "comment_id": 71664102, "body": "Flagged to reopen. I think there are purely technical answers to this question that are totally valid. Compatibility, speed (in some rare cases), obfuscation in output binary, lack of participation in the runtime (for some amount of security), etc."}], "answers": [{"tags": [], "owner": {"reputation": 21971, "user_id": 169394, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb61781f55bda1790e6216a2dee08b11?s=128&d=identicon&r=PG", "display_name": "Itai Ferber", "link": "https://stackoverflow.com/users/169394/itai-ferber"}, "is_accepted": true, "score": 4, "last_activity_date": 1487190627, "creation_date": 1487190627, "answer_id": 42259427, "question_id": 42240230, "link": "https://stackoverflow.com/questions/42240230/is-there-a-technical-reason-why-devs-use-a-c-function-in-objective-c/42259427#42259427", "title": "Is there a technical reason why devs use a C function in Objective-C", "body": "<p>There are a few technical reasons for writing C-style code in an Objective-C project:</p>\n\n<ol>\n<li>As you mention, <strong>compatibility</strong>: if the code in question is not Objective-C-specific, factoring it out into a C function allows it to be used in C projects as well (and C++ projects, as long as it is valid C++). For shared libraries, this is useful.</li>\n<li><p>Occasionally, <strong>speed</strong>: the compiler can introspect into some C functions and <a href=\"https://en.wikipedia.org/wiki/Inline_expansion\" rel=\"nofollow noreferrer\">inline</a> them, allowing for enhanced optimization of the code. Objective-C method calls, on the other hand, <em>cannot</em> be inlined (they are completely dynamic \u2014 methods can be overridden and replaced at runtime, so it is not valid to replace an Objective-C method call with a static dispatch at compile time), and so incur the overhead of an <code>objc_msgSend</code> on every call.</p>\n\n<p>In the vast majority of cases, converting an Objective-C method to a C function will <strong><em>not</em></strong> net a substantial speed increase (so don't go replacing method calls with C functions unless it makes sense for the code), but occasionally, in tight loops where a function call may be inlined and vectorized, you could potentially see a speed benefit.</p></li>\n<li><p>In some applications, the <strong>obfuscation</strong> may help. When an Objective-C application is compiled, all class names and selector names are compiled into the app binary itself. You can see the results of this by running <code>/usr/bin/strings</code> on a binary \u2014 all method names will be present.</p>\n\n<p>C function names, however, are stripped from the app binary as long as you don't leave the debug info flag on (<code>-g</code>, off for release builds), and are this not present in the binary.</p>\n\n<p>Depending on what you are doing and may want to protect against, this may make it harder for someone to inspect your app binary to look for things to exploit, and allows more intricate obfuscation of the code. Potentially useful for <em>somewhat</em> protecting things like serial number validation and the like, but keep in mind that unless your app is <a href=\"https://en.wikipedia.org/wiki/Code_signing\" rel=\"nofollow noreferrer\">code signed</a>, anyone who gets a hold of the binary may modify it to do whatever they want. (This might just make it more difficult.)</p></li>\n<li><p>Along the same vein, C functions are not present in the <strong>runtime</strong>, making them much more difficult to call dynamically (potentially in a malicious way). Because of the dynamism of Objective-C, all classes, methods, instance variables, etc. can be looked up, introspected, and modified at runtime. For most apps, this is not a concern, but if you have an application with a plugin architecture, this is something to be aware of \u2014 depending on how you load plugins or bundles into your process, code you don't own may have access to your entire application at runtime.</p>\n\n<p>Depending on what you're doing, this may expose data that you don't want to have exposed. C functions, on the other hand, are not exposed in this way, and it would take a bit more work to call into those. Certainly not impossible (I mean, you're loading remote code into your app), but a bit more difficult. This is more <strong>security by obscurity</strong> than actual security (as opposed to, say, running the plugin in its own process, separated from yours).</p></li>\n</ol>\n\n<p>In all, for the vast majority of apps, there is no benefit to writing C-style code beyond stylistic reasons. Familiarity and code style can go a long way, but the majority of the apps won't see an appreciable benefit to writing C-style code. The \"security\" benefits are more of a nuisance to someone determined to break your app than anything else, and any speed improvements are likely dwarfed by things like disk access and network calls.</p>\n"}], "owner": {"reputation": 3218, "user_id": 297201, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/N63k0.jpg?s=128&g=1", "display_name": "David van Dugteren", "link": "https://stackoverflow.com/users/297201/david-van-dugteren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 42259427, "answer_count": 1, "score": -1, "last_activity_date": 1487190627, "creation_date": 1487129640, "last_edit_date": 1487131419, "question_id": 42240230, "link": "https://stackoverflow.com/questions/42240230/is-there-a-technical-reason-why-devs-use-a-c-function-in-objective-c", "title": "Is there a technical reason why devs use a C function in Objective-C", "body": "<p>Is there a technical reason why some developers use C style function calls, commonly for utility type functions.</p>\n\n<p>Is it to be compilable on non objective-c type situations, or is there some other advantage such as speed?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1146, "user_id": 7417866, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c2b75cf7191f8764247fd346303190c?s=128&d=identicon&r=PG&f=1", "display_name": "user7417866", "link": "https://stackoverflow.com/users/7417866/user7417866"}, "edited": false, "score": 0, "creation_date": 1487128891, "post_id": 42240063, "comment_id": 71639279, "body": "And whats the error??"}, {"owner": {"reputation": 110, "user_id": 7566205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850ce312ab7ab03ea88068ef1a362014?s=128&d=identicon&r=PG&f=1", "display_name": "Sami", "link": "https://stackoverflow.com/users/7566205/sami"}, "reply_to_user": {"reputation": 1146, "user_id": 7417866, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1c2b75cf7191f8764247fd346303190c?s=128&d=identicon&r=PG&f=1", "display_name": "user7417866", "link": "https://stackoverflow.com/users/7417866/user7417866"}, "edited": false, "score": 0, "creation_date": 1487128953, "post_id": 42240063, "comment_id": 71639289, "body": "Any number I enter it displays &quot;Invalid entry, please enter a number between 3 and 10, inclusive:&quot; this line"}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 0, "creation_date": 1487129171, "post_id": 42240063, "comment_id": 71639348, "body": "You should <a href=\"http://prohackr112.tk/r/proper-c-formatting\" rel=\"nofollow noreferrer\">properly format your code</a>. Using proper formatting attracts people to your question and encourages them to help you."}], "answers": [{"comments": [{"owner": {"reputation": 110, "user_id": 7566205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850ce312ab7ab03ea88068ef1a362014?s=128&d=identicon&r=PG&f=1", "display_name": "Sami", "link": "https://stackoverflow.com/users/7566205/sami"}, "edited": false, "score": 0, "creation_date": 1487131213, "post_id": 42240310, "comment_id": 71639872, "body": "Thank You so much for your reply and help. and I understood your point there. this is what I am trying to do:  &quot;1- If the user does not enter a value in the correct range, print the following error message: Invalid entry, please enter a number between 3 and 10, inclusive: Keep doing this until a valid number is input by the user.  2-Using a for loop, prompt the user to enter the high and low temperature until data is entered for the required number of days, store the values entered in matching arrays:"}, {"owner": {"reputation": 17393, "user_id": 402022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36WSK.png?s=128&g=1", "display_name": "Theraot", "link": "https://stackoverflow.com/users/402022/theraot"}, "reply_to_user": {"reputation": 110, "user_id": 7566205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850ce312ab7ab03ea88068ef1a362014?s=128&d=identicon&r=PG&f=1", "display_name": "Sami", "link": "https://stackoverflow.com/users/7566205/sami"}, "edited": false, "score": 0, "creation_date": 1487131997, "post_id": 42240310, "comment_id": 71640101, "body": "@J.Dope I have extended the answer to show how to output a message on invalid input. You already know how to nest loops, you&#39;ll figure it out."}, {"owner": {"reputation": 110, "user_id": 7566205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850ce312ab7ab03ea88068ef1a362014?s=128&d=identicon&r=PG&f=1", "display_name": "Sami", "link": "https://stackoverflow.com/users/7566205/sami"}, "edited": false, "score": 0, "creation_date": 1487184311, "post_id": 42240310, "comment_id": 71673043, "body": "Thanks a lot I really appreciate @Theraot"}], "tags": [], "owner": {"reputation": 17393, "user_id": 402022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36WSK.png?s=128&g=1", "display_name": "Theraot", "link": "https://stackoverflow.com/users/402022/theraot"}, "is_accepted": true, "score": 2, "last_activity_date": 1487131918, "last_edit_date": 1487131918, "creation_date": 1487130230, "answer_id": 42240310, "question_id": 42240063, "link": "https://stackoverflow.com/questions/42240063/need-some-help-for-this-c-code/42240310#42240310", "title": "Need some help for this C code", "body": "<p>This is what happens (read in the comments):</p>\n\n<pre><code>// THE CODE STARTS SHOWING THIS:\nprintf(\"\\nPlease enter the number of days between 3 and 10, inclusive:\\n\");\n\n// ...declarations...\n\n// THEN THIS IS A DO ... WHILE, IT WILL RUN THE FIRST TIME WITHOUT CHEKING\n// YOU HAVEN'T TAKEN USER INPUT YET\nfor (i = 0; i &lt; days; i++) {\n    // ON THE FIRST ITERATION i = 0\n    do\n    {\n        // YOU HAVEN'T TAKEN USER INPUT YET\n        // REMBEMBER THAT i = 0, SO i &lt; 3 IS true\n        if (i &lt; 3 || i &gt; 10) {\n          // IT WILL SHOW THIS, BUT YOU HAVEN'T TAKEN USER INPUT YET\n          printf(\"Invalid entry, please enter a number between 3 and 10, inclusive:\");\n        }\n        // ... NOW YOU TAKE USER INPUT ...\n    } while (i &lt; 3 || i &gt; 10);\n}\n</code></pre>\n\n<hr>\n\n<p>I want to point out that the for loop you have will go from 0 to 3, but your <code>low</code> array only has 3 items since you declare it <code>int low[3]</code>, these items are <code>low[0]</code>, <code>low[1]</code> and <code>low[2]</code>. That means that the line <code>scanf(\"%d\", &amp;low[i]);</code> will point beyond the <code>low</code> array when <code>i</code> is greater than 2.</p>\n\n<hr>\n\n<p>I'm unsure what you want, yet, here is some code to control the range of a variable:</p>\n\n<pre><code>int var;\n\ndo\n{\n    printf(\"\\nEnter a value between 5 and 12:\");\n    scanf(\"%d\", &amp;var);\n} while (var &lt; 5 || var &gt; 12);\n</code></pre>\n\n<p><a href=\"https://repl.it/Fjzd/0\" rel=\"nofollow noreferrer\">Run Online</a></p>\n\n<p>Here is a variant to show a message only when the input is incorrect:</p>\n\n<pre><code>int var;\n\nfor(;;)\n{\n    printf(\"\\nEnter a value between 5 and 12:\");\n    scanf(\"%d\", &amp;var);\n    if (var &lt; 5 || var &gt; 12)\n    {\n        printf(\"\\nInvalid Input\\n\");\n    }\n    else\n    {\n        break;\n    }\n}\n</code></pre>\n\n<p><a href=\"https://repl.it/Fjzd/1\" rel=\"nofollow noreferrer\">Run Online</a></p>\n\n<p>I'd suggest to go line by line to understand how the code above works. In particular <code>for(;;)</code> will breate an infinite loop, the code will only leave it when it reaches <code>break;</code>. Note: you may also use <code>continue;</code> to skip to the next iteration of the loop, this is not used in the code above, but may come handy.</p>\n"}], "owner": {"reputation": 110, "user_id": 7566205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850ce312ab7ab03ea88068ef1a362014?s=128&d=identicon&r=PG&f=1", "display_name": "Sami", "link": "https://stackoverflow.com/users/7566205/sami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 42240310, "answer_count": 1, "score": -2, "last_activity_date": 1487131918, "creation_date": 1487128628, "last_edit_date": 1487129283, "question_id": 42240063, "link": "https://stackoverflow.com/questions/42240063/need-some-help-for-this-c-code", "title": "Need some help for this C code", "body": "<p>I have even entered value even between 3 to 10 but same error. Need some help!</p>\n\n<pre><code>int main() {\n    printf(\"\\nPlease enter the number of days between 3 and 10, inclusive:\\n\");\n\n    int high[10] = { 0 };\n    int low[3] = { 0 };\n\n    int i = 0;\n    int days = 4;\n\n    for (i = 0; i &lt; days; i++) {\n\n        do\n        {\n            if (i &lt; 3 || i &gt; 10) {\n              printf(\"Invalid entry, please enter a number between 3 and 10, inclusive:\");\n            }\n            printf(\" \\nDay %d - High: \", i + 1);\n            scanf(\"%d\", &amp;high[i]);\n            printf(\"Day %d - Low: \", i + 1);\n            scanf(\"%d\", &amp;low[i]);\n       } while (i &lt; 3 || i &gt; 10);\n    }\n</code></pre>\n\n<p><strong>Output Should be like this:</strong></p>\n\n<p>(Part A)</p>\n\n<ul>\n<li>Day 1 - High: <strong>6</strong></li>\n<li>Day 1 - Low: <strong>-2</strong></li>\n<li>Day 2 - High: <strong>8</strong></li>\n<li>Day 2 - Low: <strong>-1</strong></li>\n<li>Day 3 - High: <strong>7</strong></li>\n<li>Day 3 - Low: <strong>-3</strong></li>\n<li>Day 4 - High: <strong>9</strong></li>\n<li>Day 4 - Low: <strong>-4</strong></li>\n</ul>\n\n<p><strong>Other part of output:</strong>\n(Part B)</p>\n\n<p>Enter a number between 1 and 4 to see the average temperature for the entered number of days, enter a negative number to exit: 5</p>\n\n<p>Invalid entry, please enter a number between 1 and 4, inclusive: 3</p>\n\n<p>The average temperature up to day 3 is: 2.50</p>\n\n<p>Enter a number between 1 and 4 to see the average temperature for the entered number of days, enter a negative number to exit: 2</p>\n\n<p>The average temperature up to day 2 is: 2.75</p>\n\n<p>Enter a number between 1 and 4 to see the average temperature for the entered number of days, enter a negative number to exit: -1</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 41, "user_id": 7324750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fn1xP.jpg?s=128&g=1", "display_name": "Dao Zhou", "link": "https://stackoverflow.com/users/7324750/dao-zhou"}, "edited": false, "score": 0, "creation_date": 1487128491, "post_id": 42240046, "comment_id": 71639165, "body": "Why one line command has to write in two lines?"}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "edited": false, "score": 0, "creation_date": 1487128642, "post_id": 42240046, "comment_id": 71639215, "body": "This is not valid C or C++. How can we answer about code that is not code? And please don&#39;t add to your question using comments. If you need to add to your question, just edit the question."}, {"owner": {"reputation": 2841, "user_id": 1384352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e2611319a9386b31b758e869f9f59af?s=128&d=identicon&r=PG", "display_name": "Scovetta", "link": "https://stackoverflow.com/users/1384352/scovetta"}, "edited": false, "score": 3, "creation_date": 1487128655, "post_id": 42240046, "comment_id": 71639219, "body": "I&#39;ve always considered this to just be a style thing. It definitely doesn&#39;t make a difference technically."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 5, "creation_date": 1487128680, "post_id": 42240046, "comment_id": 71639224, "body": "This is author&#39;s preference. Newline is among whitespace characters, so anywhere a space can go a newline can go as well (except string literals, where newline needs to be followed by `` at the end of the line)."}, {"owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "edited": false, "score": 0, "creation_date": 1487129913, "post_id": 42240046, "comment_id": 71639541, "body": "Please only pick one language: either C or C++ in your case. Don&#39;t spam tags."}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1487140733, "post_id": 42240046, "comment_id": 71643109, "body": "I suppose that the author is using this formatting convention to make function definition and usage distinct at lexical level. Using this style you can find the definition of <code>MakeEmpty</code> in a large project with  <code>grep &quot;^MakeEmpty&quot; *.c</code>. If you do not follow any code formatting convention it may be more difficult."}], "answers": [{"tags": [], "owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "is_accepted": false, "score": 5, "last_activity_date": 1487164297, "last_edit_date": 1487164297, "creation_date": 1487129452, "answer_id": 42240195, "question_id": 42240046, "link": "https://stackoverflow.com/questions/42240046/why-do-some-functions-name-in-c-write-in-two-lines/42240195#42240195", "title": "Why do some functions name in c write in two lines?", "body": "<p>This is just a matter of styling preference; the command here is the same regardless of whether you write:</p>\n\n<pre><code>List\nMakeEmpty(List L)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>List MakeEmpty(List L)\n</code></pre>\n\n<p>It really doesn't make a difference besides changing the readability of the code. The author of the book you mentioned may find adding some whitespace more readable compared to the conventional method you compared it to.</p>\n\n<p>One way you can differentiate between whitespace and a real compiling difference is the semicolon. Wherever there is a semicolon, the line terminates. In your case, if there was:</p>\n\n<pre><code>List; // Notice semicolon here\nMakeEmpty(List L)\n</code></pre>\n\n<p>Then this would have changed the code (the syntax is wrong here as it changes the original meaning of the code, but I just wanted to make my point with this example).</p>\n\n<p>Adding whitespace makes the code more readable to the programmer; it adds to the style, especially if it is being presented to a larger audience. The amount of whitespace preferred varies from person to person.</p>\n\n<hr>\n\n<p>I tried to make the simplest example possible here: the main() function. See the 2 ways I wrote it:</p>\n\n<p><strong>Method 1:</strong></p>\n\n<pre><code>int // Return type of function on different line from function name and arguments for function declaration\nmain(void)\n{\n    cout &lt;&lt; \"hello\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Method 2:</strong></p>\n\n<pre><code>int main(void) // Return type of function on same line as function name and arguments for function declaration\n{\n    cout &lt;&lt; \"hello\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Just like your function declaration, here, the return value data type's position is changed between the 2 samples of code. However, the output is the same: It outputs hello followed by an endline.</p>\n\n<p>Hope this helps. If I've made a mistake anywhere, or you have further questions, ask me in the comments box.</p>\n"}], "owner": {"reputation": 41, "user_id": 7324750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fn1xP.jpg?s=128&g=1", "display_name": "Dao Zhou", "link": "https://stackoverflow.com/users/7324750/dao-zhou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "closed_date": 1487147523, "answer_count": 1, "score": -5, "last_activity_date": 1488463330, "creation_date": 1487128456, "last_edit_date": 1488463330, "question_id": 42240046, "link": "https://stackoverflow.com/questions/42240046/why-do-some-functions-name-in-c-write-in-two-lines", "closed_reason": "Opinion-based", "title": "Why do some functions name in c write in two lines?", "body": "<p>Why does <code>List MakeEmpty(List L)</code> have to be written  in a form like:</p>\n\n<pre><code>List\nMakeEmpty(List L)\n</code></pre>\n\n<p>in Mark Allens Book?</p>\n"}, {"tags": ["c", "server", "client", "output", "shared-memory"], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 5845655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/530ec3e592ac6ca89a76f9ce3b2bf6a2?s=128&d=identicon&r=PG&f=1", "display_name": "Prat", "link": "https://stackoverflow.com/users/5845655/prat"}, "is_accepted": true, "score": 0, "last_activity_date": 1487132184, "creation_date": 1487132184, "answer_id": 42240653, "question_id": 42239948, "link": "https://stackoverflow.com/questions/42239948/unexpected-output-in-shared-memory-program/42240653#42240653", "title": "Unexpected Output In Shared Memory Program", "body": "<p>I have tried your programm on one of the opensuse 42.1 box running with gcc version</p>\n\n<p>gcc version 4.8.5 (SUSE Linux) and following is the output. your programm is fine and giving the output as expected. Follow the below details.</p>\n\n<pre><code>/WorkDir/checks/stackover&gt; gcc -Wall -Wextra -O2 -o unx_sh_server  unx_sh_server.c \nunx_sh_server.c: In function \u2018main\u2019:\nunx_sh_server.c:12:14: warning: unused parameter \u2018argc\u2019 [-Wunused-parameter]\n int main(int argc, char *argv[])\n          ^\nunx_sh_server.c:12:26: warning: unused parameter \u2018argv\u2019 [-Wunused-parameter]\n int main(int argc, char *argv[])\n                      ^\n/WorkDir/checks/stackover&gt; gcc -Wall -Wextra -O2 -o unx_sh_client unx_sh_client.c \nunx_sh_client.c: In function \u2018main\u2019:\nunx_sh_client.c:11:14: warning: unused parameter \u2018argc\u2019 [-Wunused-parameter]\n int main(int argc, char *argv[])\n          ^\nunx_sh_client.c:11:26: warning: unused parameter \u2018argv\u2019 [-Wunused-parameter]\n int main(int argc, char *argv[])\n\n/WorkDir/checks/stackover&gt; ls -rlt\ntotal 40\n-rw-r--r-- 1 progra users   761 Feb 15 09:29 unx_sh_server.c\n-rw-r--r-- 1 progra users   643 Feb 15 09:29 unx_sh_client.c\n-rwxr-xr-x 1 progra users 12768 Feb 15 09:30 unx_sh_server\n-rwxr-xr-x 1 progra users 12664 Feb 15 09:30 unx_sh_client\n/WorkDir/checks/stackover&gt; ./unx_sh_server &amp;\n[1] 12180\n/WorkDir/checks/stackover&gt; \n/WorkDir/checks/stackover&gt; \n/WorkDir/checks/stackover&gt; ./unx_sh_client \nHello World\n/WorkDir/checks/stackover&gt; fg\nbash: fg: job has terminated`enter code here`\n[1]+  Done                    ./unx_sh_server\n/WorkDir/checks/stackover&gt; \n</code></pre>\n\n<p>Please check the way you run the client and server.</p>\n"}], "owner": {"reputation": 157, "user_id": 4470882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3501075bd1e90c58ba62bf219141f71?s=128&d=identicon&r=PG&f=1", "display_name": "Pig_Mug", "link": "https://stackoverflow.com/users/4470882/pig-mug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 42240653, "answer_count": 1, "score": 0, "last_activity_date": 1487132184, "creation_date": 1487127769, "question_id": 42239948, "link": "https://stackoverflow.com/questions/42239948/unexpected-output-in-shared-memory-program", "title": "Unexpected Output In Shared Memory Program", "body": "<p>I have a server that creates some shared memory space and puts \"hello world\" in it &amp; a client that is supposed to look at that shared memory space and print out \"hello world\" to the console accordingly; however, instead I'm just getting a \"*\" character &amp; the server isn't terminating as it is supposed to. Below is the code, any insight as to how I can fix this is appreciated.</p>\n\n<p>server.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;sys/shm.h&gt;\n\n\n#define SHSIZE 100\n\nint main(int argc, char *argv[])\n{\n    int shmid;\n    key_t key;\n    char *shm;\n    char *s;\n\n    key = 9876;\n\n    shmid = shmget(key, SHSIZE, IPC_CREAT | 0666);\n    if (shmid &lt; 0)\n    {\n            perror(\"shmget\");\n            exit(1);\n    }\n\n    shm = shmat(shmid, NULL, 0);\n\n    if (shm == (char *) -1)\n    {\n            perror(\"shmat\");\n            exit(1);\n    }\n\n    memcpy(shm, \"Hello World\", 11);\n\n    s = shm;\n    s += 11;\n\n    *s = 0;\n\n    while (*shm != '*')\n    {\n            sleep(1);\n    }\n\n    shmdt (shm); // detach\n    shmctl (shmid, IPC_RMID, 0); //deallocate\n    return 0;\n}\n</code></pre>\n\n<p>client.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;sys/shm.h&gt;\n\n\n#define SHSIZE 100\n\nint main(int argc, char *argv[])\n{\n    int shmid;\n    key_t key;\n    char *shm;\n    char *s;\n\n    key = 9876;\n\n    shmid = shmget(key, SHSIZE, IPC_CREAT | 0666);\n    if (shmid &lt; 0)\n    {\n            perror(\"shmget\");\n            exit(1);\n    }\n\n    shm = shmat(shmid, NULL, 0);\n\n    if (shm == (char *) -1)\n    {\n            perror(\"shmat\");\n            exit(1);\n    }\n\n    for (s = shm; *s != 0; s++)\n    {\n            printf(\"%c\", *s);\n    }\n\n    printf(\"\\n\");\n\n    *shm = '*';\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "gdb"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487129677, "post_id": 42239906, "comment_id": 71639482, "body": "Why <code>char c = SCHAR_MAX;</code> instead of <code>char c = CHAR_MAX;</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487130037, "post_id": 42239906, "comment_id": 71639563, "body": "<code>exists(pos, len, j)</code> searches <code>pos[]</code> for length of <code>len</code>, yet not all elements are assigned  yet."}, {"owner": {"reputation": 3, "user_id": 7566175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e12ffda06fa864cce800f4e8aea4eda3?s=128&d=identicon&r=PG&f=1", "display_name": "Sharam Kahn", "link": "https://stackoverflow.com/users/7566175/sharam-kahn"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487130496, "post_id": 42239906, "comment_id": 71639678, "body": "That&#39;s it! I created another variable <code>int k = 0;</code> to track the iteration within the two for-loops and is incremented every time the position is stored into <code>pos*</code>. The program works as intended, though is there any explanation why I wasn&#39;t able to find this problem with the debugger?"}, {"owner": {"reputation": 3, "user_id": 7566175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e12ffda06fa864cce800f4e8aea4eda3?s=128&d=identicon&r=PG&f=1", "display_name": "Sharam Kahn", "link": "https://stackoverflow.com/users/7566175/sharam-kahn"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487130672, "post_id": 42239906, "comment_id": 71639721, "body": "Also, you tell me! SCHAR_MAX vs. CHAR_MAX (vs. UCHAR_MAX). As I said, I&#39;m just starting out. The upper range that CHAR_MAX covers is not needed and I don&#39;t see a problem. (Granted, I don&#39;t think I&#39;ll use/encounter negative sign chars in my code, but I&#39;m not specifically coding with unsisigned chars in mind either.) Correct me if this thinking is wrong."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487133402, "post_id": 42239906, "comment_id": 71640479, "body": "&quot;The upper range that CHAR_MAX covers is not needed&quot; --&gt; how did you determine that?  By assuming code is using ASCII?  By assuming <code>SCHAR_MAX,  CHAR_MAX</code> have particular values?  The <i>reason</i> for these defines are to reduce assumptions. In your case, &quot;upper range that <code>CHAR_MAX</code> covers is not needed&quot; is likely false as <code>&quot;JACUZZI&quot;</code> is likely in the <i>upper quartile</i> of <code>char</code> on your compiler."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7566175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e12ffda06fa864cce800f4e8aea4eda3?s=128&d=identicon&r=PG&f=1", "display_name": "Sharam Kahn", "link": "https://stackoverflow.com/users/7566175/sharam-kahn"}, "edited": false, "score": 0, "creation_date": 1487132070, "post_id": 42240561, "comment_id": 71640135, "body": "This explains the difference in behaviour. Thanks! I still have much to learn: I didn&#39;t even think of <code>malloc</code> not initializing memory block for me."}], "tags": [], "owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "is_accepted": true, "score": 0, "last_activity_date": 1487131639, "creation_date": 1487131639, "answer_id": 42240561, "question_id": 42239906, "link": "https://stackoverflow.com/questions/42239906/c-alphabetical-order-of-chars-different-output-when-run-vs-debugged/42240561#42240561", "title": "c - alphabetical order of chars: different output when run vs. debugged?", "body": "<p>The issue here, as you've discovered within the depths of your comments, is that your program was using uninitialised values.</p>\n\n<p>Your debugger would probably have zeroed your <code>malloc</code>'d memory, where-as when you compile for release/production that zeroing would be optimised away.</p>\n\n<p>Another potential solution, aside from keeping track of the number of <em>assignments</em> you made and using that in place of <code>len</code> in <code>exists(pos, len, j)</code>, would have been to explicitly zero <code>pos</code> directly after allocation (e.g. <code>memset(pos, '\\0', sizeof *pos * len)</code>), or use <code>calloc</code> as this performs the zeroing for you.</p>\n"}], "owner": {"reputation": 3, "user_id": 7566175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e12ffda06fa864cce800f4e8aea4eda3?s=128&d=identicon&r=PG&f=1", "display_name": "Sharam Kahn", "link": "https://stackoverflow.com/users/7566175/sharam-kahn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 42240561, "answer_count": 1, "score": 0, "last_activity_date": 1487131639, "creation_date": 1487127491, "question_id": 42239906, "link": "https://stackoverflow.com/questions/42239906/c-alphabetical-order-of-chars-different-output-when-run-vs-debugged", "title": "c - alphabetical order of chars: different output when run vs. debugged?", "body": "<p>Here's my problem: the following compilable code produces different results when simply run vs. debugged. I use NetBeans IDE 8.0.2 with gdb debugger on Windows 10 with Cygwin tools.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;limits.h&gt;\n\nint exists(int* arr, int len, int i) {\n    for (int j = 0; j &lt; len; j++) {\n        if (arr[j] == i) {\n            return 1;\n        }\n    }\n\n    return 0;\n}\n\nint* alpha_order(char* source, int len) {\n    int* pos = malloc(sizeof(int) * len);\n\n    char c = SCHAR_MAX;\n    int cpos = 0;\n\n    for (int i = 0; i &lt; len; i++) {\n        for (int j = 0; j &lt; len; j++) {\n            if ((c &gt; *source) &amp;&amp; (exists(pos, len, j) != 1)) {\n                c = *source;\n                cpos = j;\n            }\n\n            source++;\n        }\n\n        source -= len;\n        c = SCHAR_MAX;\n\n        pos[i] = cpos;\n    }\n\n    return pos;\n}\n\nint main(void) {\n\n    char* str = \"JACUZZI\";\n    int len = strlen(str);\n\n    int* pos = alpha_order(str, len);\n\n    printf(\"[%s]\\n\", str);\n\n    for (int i = 0; i &lt; len; i++) {\n        printf(\"[%c] : %d\\n\", str[pos[i]], (i + 1));\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>What I'm expecting here is the following result, which I'm successfully able to obtain every time I debug the project (with a breakpoint e.g. on the line <code>pos[i] = cpos;</code>):</p>\n\n<pre><code>[JACUZZI]\n[A] : 1\n[C] : 2\n[I] : 3\n[J] : 4\n[U] : 5\n[Z] : 6\n[Z] : 7\n</code></pre>\n\n<p>However, when I just run the project, this is the erroneous output that I get:</p>\n\n<pre><code>[JACUZZI]\n[A] : 1\n[C] : 2\n[I] : 3\n[U] : 4\n[Z] : 5\n[Z] : 6\n[Z] : 7\n</code></pre>\n\n<p>I suspect there is an issue with memory management in my code. This is my first time trying out C and I'm more familiar with Java (which has garbage collection). So I'm having a very hard time realizing what the problem is, especially considering that debugging the project results in exactly what I want on every step.</p>\n\n<p>The algorithm I wrote iterates over a string (<code>char*</code> array) to find the minimum value and stores the position into an <code>int*</code> array. The <code>int*</code> array is also used to check for positions that have already been taken into account. This is done over and over until a position for every character in the string is stored in the <code>int*</code> array.</p>\n\n<p>The final output is the alphabetical order of the characters in the given string. I believe the time-complexity is O(n^3) and I realize that there may be more efficient ways to get the same result, however I want to point out I'm still getting used to C in general. Baby steps.</p>\n\n<p>Solving this problem is useful as I approach multi-dimensional arrays (and pointers) in C. I prefer learning by coding, however I also have a book at hand. E.g. this algorithm can be applied in the implementation of a columnar transposition encoder/decoder. So if you can point out bad coding practices in my code, let me know. That said, I strongly value answers that help me find the issue that seems to escape the debugger and I'm at a point where I just don't know what to try next.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "bit-manipulation"], "comments": [{"owner": {"reputation": 867, "user_id": 5922657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xnlXa.jpg?s=128&g=1", "display_name": "Neo X", "link": "https://stackoverflow.com/users/5922657/neo-x"}, "edited": false, "score": 1, "creation_date": 1487128914, "post_id": 42239860, "comment_id": 71639283, "body": "There might be something wrong with the <code>totalWidth</code>, since it&#39;s not initialized to zero for every entry of for the loop. Could you explain what the variables <code>totalWidth</code>, <code>R</code>, <code>L</code> mean by an example? Also, ging an example of expected output for sample <code>value</code> and <code>width</code> would be helpful."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487224128, "post_id": 42239860, "comment_id": 71688486, "body": "Why <code>31</code>? Certainly you are making an assumption about <code>int</code>.  If you want a 32-bit integer, use type <code>int32_t</code>."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487224258, "post_id": 42240371, "comment_id": 71688548, "body": "&quot;make the mask to be unsigned integer&quot; --&gt; then use <code>unsigned</code> math as in <code>mask = (1u &lt;&lt; (L - R + 1) - 1) &lt;&lt; totalWidth;</code>  (Notice the <code>u</code>)"}], "tags": [], "owner": {"reputation": 198, "user_id": 5712155, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a100a8dd3e163684cd18fac9bebb708?s=128&d=identicon&r=PG&f=1", "display_name": "Lionishy", "link": "https://stackoverflow.com/users/5712155/lionishy"}, "is_accepted": false, "score": 1, "last_activity_date": 1487130501, "creation_date": 1487130501, "answer_id": 42240371, "question_id": 42239860, "link": "https://stackoverflow.com/questions/42239860/printing-bit-fields-from-integer/42240371#42240371", "title": "Printing bit fields from integer", "body": "<p>The problem in extracting the bits originates in types mismatch.\nHow are you expecting to extract, say, 28th bit from an unsigned integer multiplying to the 8-bit char?</p>\n\n<p>So, first of all <strong>make the mask to be unsigned integer</strong>.\nNext, I believe you need to shift your mask to <strong>the 31-totalWidth</strong>, not totalWidth in  <code>mask = (1 &lt;&lt; (L - R + 1) - 1) &lt;&lt; totalWidth;</code>. As you wrote: \"2 left most\".</p>\n"}, {"tags": [], "owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "is_accepted": true, "score": 2, "last_activity_date": 1487134031, "creation_date": 1487134031, "answer_id": 42240939, "question_id": 42239860, "link": "https://stackoverflow.com/questions/42239860/printing-bit-fields-from-integer/42240939#42240939", "title": "Printing bit fields from integer", "body": "<p>You solution is an overkill, using left shift, right shift and masking. You can simplify it.</p>\n\n<p>By using left shift and right shift only.</p>\n\n<pre><code>void printAnswer(int width[]){\n    unsigned int value = 0xCAFEBABE, masked;\n    int totalWidth = 0;\n\n    for (int i = 0; i &lt; 10; i++){\n        masked = value &lt;&lt; totalWidth; //get rid of the unwanted left bits\n        totalWidth += width[i];\n        masked &gt;&gt;= (32 - width[i]); //move the needed bits to the right\n        printf(\"%u \", masked);\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>Now, let's see the output.</p>\n\n<pre><code>6 5 7 7 5 7 5 3 3 2\n</code></pre>\n"}], "owner": {"reputation": 1250, "user_id": 5679985, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/146c3943e20149fbc04a050430f9c99f?s=128&d=identicon&r=PG&f=1", "display_name": "Human Cyborg Relations", "link": "https://stackoverflow.com/users/5679985/human-cyborg-relations"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1272, "favorite_count": 0, "accepted_answer_id": 42240939, "answer_count": 2, "score": 0, "last_activity_date": 1487134031, "creation_date": 1487127170, "question_id": 42239860, "link": "https://stackoverflow.com/questions/42239860/printing-bit-fields-from-integer", "title": "Printing bit fields from integer", "body": "<p>I'm supposed to extract 10 fields of given widths from a 32-bit integer.</p>\n\n<p>For example, if the given width is 2, then I need to extract the 2 left-most bits of the integer and print their integer value.</p>\n\n<p>Here is the code I have right now,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid printAnswer(int width[]);\n\nint main(){\n    int width[10] = {3, 4, 4, 3, 3, 4, 4, 3, 2, 2};\n    printAnswer(width);\n}\n\nvoid printAnswer(int width[]){\n    unsigned int value = 0xCAFEBABE;\n    char mask;\n    int totalWidth = 0;\n    int L; // left\n    int R; // right\n\n    for (int i = 0; i &lt; 10; i++){\n        L = 31 - totalWidth; // left end of width\n        R = L - width[i]; // right end of width\n        totalWidth = totalWidth + width[i];\n\n        // creating a mask to capture bits in range\n        mask = (1 &lt;&lt; (L - R + 1) - 1) &lt;&lt; totalWidth;\n\n        printf(\"%d \", (value &amp; mask) &gt;&gt; totalWidth);\n\n    }\n\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>The output I'm getting right now is, 0000000004, which makes no sense to me at all.</p>\n"}, {"tags": ["c", "input", "struct", "segmentation-fault", "malloc"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 1, "creation_date": 1487127471, "post_id": 42239857, "comment_id": 71638896, "body": "Run your program under a debugger."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 3, "creation_date": 1487127510, "post_id": 42239857, "comment_id": 71638904, "body": "You only initialized the fields of <code>aPtr[0]</code>, but you\u2019re trying to use the fields of 10 of them."}, {"owner": {"reputation": 907, "user_id": 4561908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b818103f77149ade01b9c9b0f49a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Gab", "link": "https://stackoverflow.com/users/4561908/gab"}, "edited": false, "score": 0, "creation_date": 1487127512, "post_id": 42239857, "comment_id": 71638905, "body": "Look up how to use pointers."}, {"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 1, "creation_date": 1487128018, "post_id": 42239857, "comment_id": 71639043, "body": "I&#39;d suggest declaring char firstName[50] rather than char *firstName. Just dynamically allocate a new struct Student each time you need one, but don&#39;t do it for the various struct members. And keep track of all the students you allocate, in an array or linked list. Finally, free the entire list before you exit main."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 1, "creation_date": 1487129521, "post_id": 42239857, "comment_id": 71639436, "body": "You should look into <a href=\"http://prohackr112.tk/r/proper-c-formatting\" rel=\"nofollow noreferrer\">proper C formatting</a>. Or learn how to <a href=\"//prohackr112.tk/r/proper-c-obfuscation\" rel=\"nofollow noreferrer\">thoroughly obfuscate your code</a>."}, {"owner": {"reputation": 29, "user_id": 7484656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d852a62081493d44d67578cccee4d91?s=128&d=identicon&r=PG&f=1", "display_name": "JsmileyJ", "link": "https://stackoverflow.com/users/7484656/jsmileyj"}, "edited": false, "score": 0, "creation_date": 1487129760, "post_id": 42239857, "comment_id": 71639499, "body": "My formatting on the original code is fine, I just don&#39;t really know how to use stack overflow so it kinda messed everything up."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 1, "creation_date": 1487129847, "post_id": 42239857, "comment_id": 71639525, "body": "@JsmileyJ Well, if you plan to use it, you might want to figure it out. <a href=\"https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet\" rel=\"nofollow noreferrer\">github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet</a>"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1487156828, "post_id": 42239857, "comment_id": 71653459, "body": "When investigating something like this, it really helps to work with a completely stripped-down version of your code - a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  Instead of allocating 10 <code>student</code>s, just try to populate a single one, with just one or two of its fields.  Build up from there until your error appears and then solve it.  That eliminates all the working parts from suspicion."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1487157476, "post_id": 42239857, "comment_id": 71653938, "body": "the expression <code>sizeof(char)</code> is defined in the C standard as 1.  multiplying anything by 1 has no effect.  Suggest removing that expression from the parameter to <code>malloc()</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1487157782, "post_id": 42239857, "comment_id": 71654141, "body": "regarding this kind of statement: <code>aPtr-&gt;firstName = malloc(sizeof(char)*50);</code>.   the <code>aPtr</code> points to an array of struct student, so individual fields of one instance of the struct should be accessed via: <code>aPtr[i]-&gt;firstName</code>   Although, I strongly suggest replacing those pointer fields within the struct with something like: <code>char firstName[50];</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1487157955, "post_id": 42239857, "comment_id": 71654267, "body": "when calling any of the <code>scanf()</code> family of functions: 1) always check the returned value (not the parameter value) to assure the operation was successful.  2) when using the <code>%s</code> format specifier, always include a MAX CHARACTERS modifier that is one less than the length of the input field so the user cannot overrun the input field.  Such overrun results in undefined behavior and can lead to a seg fault event."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1487158211, "post_id": 42239857, "comment_id": 71654449, "body": "only the first instance of the field <code>record count</code> is being used.  Strongly suggest removing that field from the <code>struct student</code>."}], "answers": [{"tags": [], "owner": {"reputation": 508, "user_id": 7424456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18a7caf43d710ebaa55527a221bbd211?s=128&d=identicon&r=PG&f=1", "display_name": "Bidisha Pyne", "link": "https://stackoverflow.com/users/7424456/bidisha-pyne"}, "is_accepted": false, "score": 0, "last_activity_date": 1487156060, "creation_date": 1487156060, "answer_id": 42247311, "question_id": 42239857, "link": "https://stackoverflow.com/questions/42239857/segmentation-fault-after-user-input/42247311#42247311", "title": "Segmentation fault after user input", "body": "<p>Use gdb debugger to debug your code, you can find it yourself. \nIn case you are new to debugging, follow this link to learn more about it. <a href=\"https://www.tutorialspoint.com/gnu_debugger/index.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/gnu_debugger/index.htm</a></p>\n\n<p>In this code, I think you are using the pointer incorrectly in this line:</p>\n\n<pre><code>aPtr + i)-&gt;firstName[0] == '.'\n</code></pre>\n\n<p>rectify it, look up for the proper use of pointers.</p>\n\n<p>Note: you can make your code more easy by using char firstname[50], lastname[50],.....etc. With use of it, you can get rid of segmentation fault very easily.</p>\n\n<p>Hope it helps! Thank You.</p>\n"}], "owner": {"reputation": 29, "user_id": 7484656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d852a62081493d44d67578cccee4d91?s=128&d=identicon&r=PG&f=1", "display_name": "JsmileyJ", "link": "https://stackoverflow.com/users/7484656/jsmileyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 426, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1487156686, "creation_date": 1487127142, "last_edit_date": 1487156686, "question_id": 42239857, "link": "https://stackoverflow.com/questions/42239857/segmentation-fault-after-user-input", "title": "Segmentation fault after user input", "body": "<p>Below I have included my full code to a program I am working on. It should allow the user to enter input into the program until they enter a '.' in the first name input. I am getting segmentation faults after going through input once, and once I go to enter input into the struct a second time it faults me. I am also supposed to dynamically allocate the struct so that the user can enter in input as many times as they want, but to test I set it to 10 to see if the program would work.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct student {\n    int recordCount;\n    char *firstName;\n    char *lastName;\n    char *id;\n    char *email;\n};\n\nint main()\n{\n    struct student *aPtr;\n\n    aPtr = malloc(sizeof(struct student)*10);\n    //aPtr = (struct student*) malloc(10 * sizeof(struct student));\n    aPtr-&gt;firstName = malloc(sizeof(char)*50);\n    aPtr-&gt;lastName = malloc(sizeof(char)*50);\n    aPtr-&gt;id = malloc(sizeof(char)*10);\n    aPtr-&gt;email = malloc(sizeof(char)*50);\n\n    int i;\n    for (i = 0; i &lt; 10; ++i) {\n        printf(\"First Name: \");\n        scanf(\"%s\", (aPtr + i)-&gt;firstName);\n        if ((aPtr + i)-&gt;firstName[0] == '.') {\n            break;\n        }\n\n        printf(\"Last Name: \");\n        scanf(\"%s\", (aPtr + i)-&gt;lastName);\n\n        printf(\"ID#: \");\n        scanf(\"%s\", (aPtr + i)-&gt;id);\n\n        printf(\"Email: \");\n        scanf(\"%s\", (aPtr + i)-&gt;email);\n\n\n        printf(\"\\n\");\n        aPtr-&gt;recordCount++;\n    }\n\n    for (i = 0; i &lt; aPtr-&gt;recordCount; ++i) {\n        printf(\"%s, %s, %s, %s\",(aPtr + i)-&gt;id, (aPtr + i)-&gt;firstName, (aPtr + i)-&gt;lastName, (aPtr + i)-&gt;email);\n        printf(\"\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "bitmap", "bit", "fread"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1487127146, "post_id": 42239832, "comment_id": 71638812, "body": "<code>fread(&amp;i,bitSize,1,fp);</code> That writes to a <b>local</b> variable <code>i</code>. You need to declare the function to accept <code>int *</code> and pass in <code>&amp;my_int_var</code>."}, {"owner": {"reputation": 11, "user_id": 7020095, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/022b244bab81d95a0242082a793a4e8e?s=128&d=identicon&r=PG&f=1", "display_name": "Master Maq", "link": "https://stackoverflow.com/users/7020095/master-maq"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1487128008, "post_id": 42239832, "comment_id": 71639038, "body": "I tried that but I get errors for different field types being passed"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1487128205, "post_id": 42239832, "comment_id": 71639088, "body": "Your types are not all <code>int</code>. So you need different functions to do the read for different lengths or do some casting or have the function accept the type length, etc. Anyway, that is a different problem to your original issue. But the original issue is clear (I hope) - you are not modifying the caller&#39;s variable but a local function variable."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1487128470, "post_id": 42239832, "comment_id": 71639158, "body": "<code>fread(&amp;i,bitSize,1,fp);</code> No, not like that. <code>fread(i,bitSize,1,fp);</code> because <code>i</code> is already a pointer."}], "owner": {"reputation": 11, "user_id": 7020095, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/022b244bab81d95a0242082a793a4e8e?s=128&d=identicon&r=PG&f=1", "display_name": "Master Maq", "link": "https://stackoverflow.com/users/7020095/master-maq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487128892, "creation_date": 1487126939, "last_edit_date": 1487128892, "question_id": 42239832, "link": "https://stackoverflow.com/questions/42239832/reading-bitmap-header-information-and-printing-it", "title": "Reading BitMap header Information and Printing It", "body": "<p>I have 2 c files and 1 header file. I am trying to read any bmp file and print out its information. But I keep getting very large numbers for each of the field variables and I do not know why. Any help would be appreciated thanks.</p>\n\n<p>BMPread.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"BMPreadfns.h\"\n\nint main( int argc, char *argv[] )\n{\n    //declare file read pointer\n    FILE *file;\n\n    //declare fileout read pointer\n    //FILE *fileout; //declare file printed file pointer\n\n    // open file 1 of argument counter and return 0 upon error\n    if (!(file = fopen(argv[1], \"rb\")))return 0;\n\n    short BMPid_mark;\n    long BMPfile_len;\n    short BMPreserved;\n    long OffBits;\n    long biSize;\n    long biWidth;\n    long biHeight;\n    short biPlanes;\n    short biBitCount;\n    long biCompression;\n    long biSizeImage;\n    long biXPelsPerMeter;\n    long biYPelsPerMeter;\n    long biClrUsed;\n    long biClrImportant;\n    get_headervalue(&amp;BMPid_mark,2,file);\n    get_headervalue(&amp;BMPfile_len,4,file);\n    get_headervalue(&amp;BMPreserved,2,file);\n    get_headervalue(&amp;OffBits,4,file);\n    get_headervalue(&amp;biSize,4,file);\n    get_headervalue(&amp;biWidth,4,file);\n    get_headervalue(&amp;biHeight,4,file);\n    get_headervalue(&amp;biPlanes,2,file);\n    get_headervalue(&amp;biBitCount,2,file);\n    get_headervalue(&amp;biCompression,4,file);\n    get_headervalue(&amp;biSizeImage,4,file);\n    get_headervalue(&amp;biXPelsPerMeter,4,file);\n    get_headervalue(&amp;biYPelsPerMeter,4,file);\n    get_headervalue(&amp;biClrUsed,4,file);\n    get_headervalue(&amp;biClrImportant,4,file);\n\n\n    printf(\"\\nType:%hd\\n\", BMPid_mark);\n    printf(\"Size:%ld\\n\", BMPfile_len);\n    printf(\"OffBits:%ld\\n\",OffBits);\n    printf(\"biSize:%ld\\n\",biSize);\n    printf(\"Width:%ld\\n\", biWidth);\n    printf(\"Height:%ld\\n\", biHeight);\n    printf(\"biPlanes:%hd\\n\", biPlanes);\n    printf(\"biBitCount:%hd\\n\", biBitCount);\n    printf(\"biCompression:%ld\\n\", biCompression);\n    printf(\"biSizeImage:%ld\\n\", biSizeImage);\n    printf(\"biXPelsPerMeter:%ld\\n\", biXPelsPerMeter);\n    printf(\"biYPelsPerMeter:%ld\\n\", biYPelsPerMeter);\n    printf(\"biClrUsed:%ld\\n\", biClrUsed);\n    printf(\"biClrImportant:%ld\\n\\n\", biClrImportant);\n\n\n    fclose(file);\n\n    return 0;\n}\n</code></pre>\n\n<p>BMPreadfns.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"BMPreadfns.h\"\n\nint get_headervalue(int *i,int bitSize, FILE *fp)\n{\n    fread(i,bitSize,1,fp);\n}\n</code></pre>\n\n<p>BMPreadfns.h</p>\n\n<pre><code>#ifndef BMPREAD_BMPREADFNS_H\n#define BMPREAD_BMPREADFNS_H\nint get_headervalue(int *i,int bitSize, FILE *fp);\n#endif //BMPREAD_BMPREADFNS_H\n</code></pre>\n"}, {"tags": ["c", "enums", "embedded", "usb"], "comments": [{"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1487159794, "post_id": 42239744, "comment_id": 71655484, "body": "The crappy issue with C (compared to, say, C++) is that <a href=\"http://stackoverflow.com/a/4713514/69809\">enums are not really anything more than constants</a>. Meaning that no C compiler (that I am aware of) will even slightly complain if you pass a wrong enum value to a function expecting an enum of a different type. So the code will be slightly more &quot;self-documenting&quot; (i.e. you can quickly find the list of intended parameters for a function), but nothing will prevent you from using unintended parameters."}, {"owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1487160911, "post_id": 42239744, "comment_id": 71656193, "body": "Can&#39;t I declare a variable of enum type (including as function parameter) so it does not accept values from another enum?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 1, "creation_date": 1487163475, "post_id": 42239744, "comment_id": 71657974, "body": "@Groo Easily solved. In case type safety matters, then instead of <code>void func (something x)</code> which isn&#39;t type safe, you should write <code>void func (something* x)</code>. Now if you try to pass a <code>something_else*</code> to this function, you should get a compiler error. C doesn&#39;t have much in the way of type safety for primitive data types, but more so when it comes to pointers."}, {"owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "edited": false, "score": 0, "creation_date": 1487163916, "post_id": 42239744, "comment_id": 71658255, "body": "Are you saying that enum is not type safe and gets treated like any other integer bit pointer to enum types are type safe?"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1487166931, "post_id": 42239744, "comment_id": 71660369, "body": "@quantum231: you will usually get warnings when you try passing wider integer types (or when you mismatch signed/unsigned types). But you will not even get an informational message when you pass a wrong enum type, or assign a different enum type to a variable (provided that the file extension is .c, of course; C++ will complain)."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487167043, "post_id": 42239744, "comment_id": 71660446, "body": "@Lundin: I just tried that in MSVC compiler, and it didn&#39;t complain. I.e. defined <code>void test(enum ENUM_A *ctrl) { }</code>, and then called <code>test((enum ENUM_B*)&amp;stuff);</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1487167610, "post_id": 42239744, "comment_id": 71660862, "body": "@Groo You can&#39;t use MSVC, you have to use a standard conforming C compiler. For example gcc or clang. Gives error/warning: &quot;passing argument 1 of &#39;foo&#39; from incompatible pointer type. note: expected &#39;enum a *&#39; but argument is of type &#39;enum b *&#39; &quot;"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487168310, "post_id": 42239744, "comment_id": 71661351, "body": "@Lundin: that&#39;s a good point, thanks."}, {"owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "edited": false, "score": 0, "creation_date": 1487172410, "post_id": 42239744, "comment_id": 71664568, "body": "See <a href=\"http://www.embedded.com/electronics-blogs/programming-pointers/4023858/Symbolic-Constants\" rel=\"nofollow noreferrer\"><i>Symbolic Constants</i></a> and other articles by Dan Saks on this subject."}], "answers": [{"comments": [{"owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "edited": false, "score": 0, "creation_date": 1487127228, "post_id": 42239809, "comment_id": 71638835, "body": "there are many other registers, here I have only put the control and status registers. Do enums implicitly convert to integer types so one can do logical operations on them?"}, {"owner": {"reputation": 708, "user_id": 6540292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dfac93d8c8c2c645ca2d70f2328e260?s=128&d=identicon&r=PG&f=1", "display_name": "Ray Fischer", "link": "https://stackoverflow.com/users/6540292/ray-fischer"}, "reply_to_user": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "edited": false, "score": 0, "creation_date": 1487127940, "post_id": 42239809, "comment_id": 71639018, "body": "In C enum constants are int values so no conversion is needed."}], "tags": [], "owner": {"reputation": 708, "user_id": 6540292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dfac93d8c8c2c645ca2d70f2328e260?s=128&d=identicon&r=PG&f=1", "display_name": "Ray Fischer", "link": "https://stackoverflow.com/users/6540292/ray-fischer"}, "is_accepted": false, "score": 2, "last_activity_date": 1487126771, "creation_date": 1487126771, "answer_id": 42239809, "question_id": 42239744, "link": "https://stackoverflow.com/questions/42239744/why-are-these-constants-declared-in-different-ways/42239809#42239809", "title": "Why are these constants declared in different ways?", "body": "<p>This is a pretty standard coding convention and you'll see it many times in your career.</p>\n\n<p>Using an enum is a way of associating a bunch of flags so that you can tell that they belong together.  From the code it is clear which are control flags and which are status flags because it says so in the enum label. Some languages even enforce the flag type so that only control flags can be used with control parameters and ditto with status flags.  C# does that, I don't think that C does, C++ might.</p>\n\n<p>And more readable code is a good thing because it means fewer bugs and less maintenance overhead</p>\n"}, {"comments": [{"owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "edited": false, "score": 0, "creation_date": 1487161263, "post_id": 42244683, "comment_id": 71656425, "body": "Signed or unsigned matters with shift outstrips operators &lt;&lt; and &gt;&gt;. However, they should not matter with other operators like &amp;, |, ~ e.t c. Am I missing something here?"}, {"owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "edited": false, "score": 0, "creation_date": 1487161325, "post_id": 42244683, "comment_id": 71656475, "body": "Only rarely do I see #define constant having U or L at end. Why not just declare a constant using the cost word that is type safe?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "edited": false, "score": 0, "creation_date": 1487162879, "post_id": 42244683, "comment_id": 71657601, "body": "@quantum231 It matters as soon as you risk overwriting the sign bit, which all bitwise operators can potentially do. <code>const</code> variables are fine too and can be used instead of <code>#define</code> in most places."}, {"owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "edited": false, "score": 0, "creation_date": 1487163819, "post_id": 42244683, "comment_id": 71658185, "body": "I understand fully what you mean. If I do a shift of this value to put it into a bigger int, it shall extend the sign in case of the right shift and sign bit must not get corrupted. But... here is the thing. The control and status bytes do not represent a numerical quantity, they are bit fields. The actual per bit value matters. Thus, shifting would not cause any corruption as such. I still agree that I must use unsigned integers here. Therefore, in any case I assume that since no numerical quantity is represented, rather discrete binary states by each bit, binary operations shouldn&#39;t matter"}, {"owner": {"reputation": 708, "user_id": 6540292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dfac93d8c8c2c645ca2d70f2328e260?s=128&d=identicon&r=PG&f=1", "display_name": "Ray Fischer", "link": "https://stackoverflow.com/users/6540292/ray-fischer"}, "edited": false, "score": 0, "creation_date": 1487201283, "post_id": 42244683, "comment_id": 71681652, "body": "Shifting flags and using negation instead of not are programming errors.  The signed/unsigned issue is a red herring when it comes to control and status flags because you should never be shifting them and you should never use negation"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1487148974, "creation_date": 1487148974, "answer_id": 42244683, "question_id": 42239744, "link": "https://stackoverflow.com/questions/42239744/why-are-these-constants-declared-in-different-ways/42244683#42244683", "title": "Why are these constants declared in different ways?", "body": "<p>There is no obvious difference in this case. You can either use enumeration constants or defines, there's no obvious right or wrong in this specific case.</p>\n\n<p>Overall though, enumeration constants are dangerous for hardware-related programming, since they are required to always be of type <code>int</code>, which is always signed. You should avoid signed operands when doing things like bitwise arithmetic.</p>\n\n<p>The same problem exists with your defined integer constant such as <code>0xee</code> - they are also of signed <code>int</code> type. But with defines you have the option to suffix the integer constants, for example <code>0xeeu</code>. Now you get <code>unsigned int</code> which is much more convenient and safe.</p>\n\n<p>Some examples of where signed <code>int</code> constants would cause bugs:</p>\n\n<ul>\n<li><code>if(~TD_CTRL_ARM &gt; 0)</code> Bug, the operand has turned negative.</li>\n<li><code>TD_STATUS_STALL &lt;&lt; 24</code> Bug, assuming 32 bit int. The code shifts data into the sign bits of an <code>int</code>, invoking undefined behavior.</li>\n<li><code>~TD_CTRL_ARM &gt;&gt; n</code> Bug, you may end up with either arithmetic shifts or logical shifts. Code is non-portable and may behave in unexpected ways.</li>\n<li><code>uint8_t data; ... if((~TD_CTRL_ARM &amp; data) &gt; 0)</code>. Bug, the signed left operand means that the implicitly promoted <code>data</code> will remain a signed type. The result may turn out negative even though the right operand was explicitly declared as <code>unsigned</code>. If the left operand had been <code>unsigned int</code>, the right operand would have become unsigned too and the code would have worked as expected.</li>\n</ul>\n\n<p>And so on.</p>\n\n<hr>\n\n<p>Advise/good practice:</p>\n\n<ul>\n<li>Only use signed types in embedded systems if they are explicitly needed for math etc.</li>\n<li>Never use <code>enum</code> for any form of bit representations or bitwise operations.</li>\n<li>Always suffix integer constants with <code>U</code>/<code>u</code>.</li>\n<li>Be explicit about type size and signedness: use <code>stdint.h</code> whenever possible.</li>\n<li>Be very careful whenever using small integer types in expressions. <code>unsigned char</code>, <code>bool</code>, <code>unsigned short</code>, <code>uint8_t</code> etc. They might get a change in signedness because of integer promotion.</li>\n<li>Actually learn and understand how implicit type promotions work in C. A frightening amount of C programmers don't know this. All C programmers should know how <em>integer promotions</em>, <em>the usual arithmetic conversions</em> (balancing) and type conversion during assignment work. If you don't know about these, you <em>will</em> write subtle and often severe bugs, repeatedly.</li>\n<li>Adopt a professional coding standard which is a safe subset of C, such as MISRA-C, and use static code analysis. Then you'll get all of the above for free.</li>\n</ul>\n"}], "owner": {"reputation": 1897, "user_id": 854183, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c1503cf70823c67b54c197559cc08c63?s=128&d=identicon&r=PG", "display_name": "quantum231", "link": "https://stackoverflow.com/users/854183/quantum231"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1487217153, "creation_date": 1487126124, "question_id": 42239744, "link": "https://stackoverflow.com/questions/42239744/why-are-these-constants-declared-in-different-ways", "title": "Why are these constants declared in different ways?", "body": "<p>Here is the code that is declaring a lot of constants:</p>\n\n<pre><code>#define TD_DATA_PID               0  /* control pipe state for td_sie_done */\n#define TD_STATUS_PID             2  /* control pipe state for td_sie_done */\n#define TD_DONE_PID               4  /* control pipe state for td_sie_done */\n#define TD_DELETE_PID           0xee /* pipe command for td_sie_done */\n#define TD_SETUP_PID            0xd  /* also used for control pipe state for tf_sie_done */\n#define TD_IN_PID               0x9\n#define TD_OUT_PID              0x1\n#define TD_SOF_PID              0x5\n#define TD_PREAMBLE_PID         0xc\n#define TD_NAK_PID              0xa\n#define TD_STALL_PID            0xe\n#define TD_DATA0_PID            0x3\n#define TD_DATA1_PID            0xb\n\n#define TD_NORMAL_TIMEOUT         0\n#define TD_LONG_TIMEOUT           1\n\nenum TD_CTRL_BITS\n{\n    TD_CTRL_ARM         = 0x01,\n    TD_CTRL_ISOCH       = 0x10,\n    TD_CTRL_SYNC_SOF    = 0x20,\n    TD_CTRL_DTOGGLE     = 0x40,\n    TD_CTRL_PREAMBLE    = 0x80\n};\n\n\nenum TD_STATUS_BITS\n{\n    TD_STATUS_ACK       = 0x01,\n    TD_STATUS_ERROR     = 0x02,\n    TD_STATUS_TIMEOUT   = 0x04,\n    TD_STATUS_SEQ       = 0x08,\n    TD_STATUS_SETUP     = 0x10,\n    TD_STATUS_OVERFLOW  = 0x20,\n    TD_STATUS_NAK       = 0x40,\n    TD_STATUS_STALL     = 0x80\n};\n</code></pre>\n\n<p>This code is for a USB OTG controller, low level embedded systems stuff and thus uses C rather than C++.</p>\n\n<p>All the #define valus are used to assign value to a single one byte variable. The variable is packet ID, thus all the #define constants end with _PID. That is clear.</p>\n\n<p>However, the part of enums is not clear. </p>\n\n<p>Basically, there is a single byte long register that contains TD_CONTROL_BITS and may want to read/write it. Each bit effects behaviour of the hardware. The values given to each constant inside the enum is the bit that corresponds to that function e.g ARM bit is bit 0 and isochronous transfer bit is bit 2 e.t.c. This register is read and also written to.</p>\n\n<p>Similar applies to TD_STATUS_BITS also. Each bit in the byte long status register provides independant information about the status of transfer. Thus, the constants TD_STATUS_ACK, TD_STATUS_ERROR e.t.c can be used as bit masks to read the status register. This register is only read back as it is updated by external hardware and only a value of 0 is written to reset it.</p>\n\n<p>Now my question is, why not use #define constants for everything? What benefit does enum bring in this case? Also, in case of TD_CTRL_BITS we may want to logically OR bits together e.g TD_CTRL_ARM | TD_CTRL_DTOGGLE. I do not think that enums allow that.</p>\n"}, {"tags": ["c", "ncurses", "curses"], "comments": [{"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 7, "creation_date": 1487126810, "post_id": 42239726, "comment_id": 71638714, "body": "If it&#39;s a macro you can see how it works by reading the include file that it is defined in."}, {"owner": {"reputation": 517, "user_id": 219355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0e5c3547561a5db7e51f53a188fca5e?s=128&d=identicon&r=PG", "display_name": "debuti", "link": "https://stackoverflow.com/users/219355/debuti"}, "edited": false, "score": 0, "creation_date": 1529502573, "post_id": 42239726, "comment_id": 88897258, "body": "Has to be a macro since the parameters row and col are output data and there is no ptr indicator there"}], "answers": [{"tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": true, "score": 4, "last_activity_date": 1487130899, "creation_date": 1487130899, "answer_id": 42240436, "question_id": 42239726, "link": "https://stackoverflow.com/questions/42239726/how-does-getmaxyx-work-from-curses/42240436#42240436", "title": "How does getmaxyx work? (from curses)", "body": "<p>Reading the <code>ncurses.h</code> header file reveals that <code>getmaxyx</code> is indeed a macro:</p>\n\n<pre><code>#define getmaxyx(win,y,x)       (y = getmaxy(win), x = getmaxx(win))\n</code></pre>\n\n<p>Further investigation shows that <code>getmaxy</code> and <code>getmaxx</code> are also macros:</p>\n\n<pre><code>#define getmaxx(win)            ((win) ? ((win)-&gt;_maxx + 1) : ERR)\n#define getmaxy(win)            ((win) ? ((win)-&gt;_maxy + 1) : ERR)\n</code></pre>\n\n<p>Now, the argument <code>win</code> is a pointer to <code>WINDOW</code>. In fact, <code>WINDOW</code> is a typedef of <code>struct _win_st</code>. Perusal of this struct reveals the fields:</p>\n\n<pre><code>NCURSES_SIZE_T _maxy, _maxx; /* maximums of x and y, NOT window size */\n</code></pre>\n\n<p>So, when a new window is created, it is associated with a <code>WINDOW</code> structure that contains information about the window. In particular, the maximum x and y coordinates of the window are stored in the fields <code>_maxx</code> and <code>_maxy</code>. These fields are accessed by the macro <code>getmaxyx()</code> to provide the window dimensions.</p>\n"}], "owner": {"reputation": 193, "user_id": 6606270, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-usgivvoQ9v0/AAAAAAAAAAI/AAAAAAAADAw/7h5HCZuxWMo/photo.jpg?sz=128", "display_name": "Kevin Del Castillo Ramirez", "link": "https://stackoverflow.com/users/6606270/kevin-del-castillo-ramirez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5605, "favorite_count": 0, "accepted_answer_id": 42240436, "answer_count": 1, "score": 4, "last_activity_date": 1526456381, "creation_date": 1487126017, "last_edit_date": 1526456381, "question_id": 42239726, "link": "https://stackoverflow.com/questions/42239726/how-does-getmaxyx-work-from-curses", "title": "How does getmaxyx work? (from curses)", "body": "<p>I'm confused on how the \"function\" <code>getmaxyx</code> works... because I know it's actually a macro. But how does this macro work?</p>\n\n<p>Code example:</p>\n\n<pre><code>#include &lt;ncurses.h&gt;\n\nint main() {\n  int col, row;\n  initscr();\n  getmaxyx(stdscr,row,col);\n  endwin();\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "dynamic", "segmentation-fault", "static-libraries"], "comments": [{"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 0, "creation_date": 1487125259, "post_id": 42239537, "comment_id": 71638369, "body": "No, we can&#39;t know what&#39;s wrong without seeing the code. Post a minimal example that demonstrates the problem."}, {"owner": {"reputation": 262, "user_id": 5916457, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eeae0a149f32d093e9cd77fa6cd4a340?s=128&d=identicon&r=PG&f=1", "display_name": "FreeStyle4", "link": "https://stackoverflow.com/users/5916457/freestyle4"}, "reply_to_user": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 0, "creation_date": 1487125338, "post_id": 42239537, "comment_id": 71638392, "body": "@PaulGriffiths Ill edit in the code now"}, {"owner": {"reputation": 262, "user_id": 5916457, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eeae0a149f32d093e9cd77fa6cd4a340?s=128&d=identicon&r=PG&f=1", "display_name": "FreeStyle4", "link": "https://stackoverflow.com/users/5916457/freestyle4"}, "reply_to_user": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 0, "creation_date": 1487125718, "post_id": 42239537, "comment_id": 71638478, "body": "Edited the post @PaulGriffiths"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1487125931, "post_id": 42239537, "comment_id": 71638532, "body": "Use a debugger and/or add debug print messages. Stack Overflow isn&#39;t a free debugging service."}, {"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 1, "creation_date": 1487125938, "post_id": 42239537, "comment_id": 71638534, "body": "You need to show something we can actually compile, a full example with nothing in it except enough to cause your problem."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1487126179, "post_id": 42239537, "comment_id": 71638598, "body": "I suspect <code>sizeof(building)</code> is returning <code>sizeof a pointer</code> instead of the array size if <code>building</code> is no longer declared in the same scope of where <code>sizeof</code> is being called. (but that is just <i>reading tea leaves</i> without seeing a <a href=\"http://stackoverflow.com/help/mcve\"><b>MCVE</b></a>)"}, {"owner": {"reputation": 652, "user_id": 4080489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QJ9sc.jpg?s=128&g=1", "display_name": "Aniruddh Dikhit", "link": "https://stackoverflow.com/users/4080489/aniruddh-dikhit"}, "edited": false, "score": 0, "creation_date": 1487126695, "post_id": 42239537, "comment_id": 71638696, "body": "what are you passing to sizeof pointer or an array? that might make a difference. If you can provide the type of parameters as they are declared as well as what data is contained in the files that&#39;ll help. The other thing can be in certain situations when tempFP is null so will be fp and as a result the checks can lead to errors where you do if (tempFP == null)  { fprintf( fp....) }"}, {"owner": {"reputation": 262, "user_id": 5916457, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eeae0a149f32d093e9cd77fa6cd4a340?s=128&d=identicon&r=PG&f=1", "display_name": "FreeStyle4", "link": "https://stackoverflow.com/users/5916457/freestyle4"}, "edited": false, "score": 0, "creation_date": 1487126939, "post_id": 42239537, "comment_id": 71638761, "body": "building is declared as char building[256]. All the code that isn&#39;t shown is getting user input and storing it into a char * name."}, {"owner": {"reputation": 262, "user_id": 5916457, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eeae0a149f32d093e9cd77fa6cd4a340?s=128&d=identicon&r=PG&f=1", "display_name": "FreeStyle4", "link": "https://stackoverflow.com/users/5916457/freestyle4"}, "reply_to_user": {"reputation": 652, "user_id": 4080489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QJ9sc.jpg?s=128&g=1", "display_name": "Aniruddh Dikhit", "link": "https://stackoverflow.com/users/4080489/aniruddh-dikhit"}, "edited": false, "score": 0, "creation_date": 1487127141, "post_id": 42239537, "comment_id": 71638810, "body": "All the code shown above is the working code, it doesn&#39;t work if I send name and building as parameters to a function called AddEntry(char * name, char* building) and put all the code below taking out the newline in the AddEntry function @AniruddhDikhit"}, {"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 0, "creation_date": 1487127247, "post_id": 42239537, "comment_id": 71638837, "body": "We can&#39;t help you unless you produce code to reproduce the problem, so voting to close."}], "owner": {"reputation": 262, "user_id": 5916457, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/eeae0a149f32d093e9cd77fa6cd4a340?s=128&d=identicon&r=PG&f=1", "display_name": "FreeStyle4", "link": "https://stackoverflow.com/users/5916457/freestyle4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487125656, "creation_date": 1487124628, "last_edit_date": 1487125656, "question_id": 42239537, "link": "https://stackoverflow.com/questions/42239537/sending-static-array-in-c-catching-with-pointer", "title": "Sending static array in c, catching with pointer", "body": "<p>I am having trouble with my static library I created. Before I moved my main code to the library, everything was working, but when I added the library I segfault and can't figure out why exactly.</p>\n\n<p>I have a function called <code>addEntry(char * name, char * buildings);</code></p>\n\n<p>When I call the function in my main c file, I call it with</p>\n\n<pre><code>addEntry(name,building)\n</code></pre>\n\n<p>I declared name as <code>char *name</code>, and malloced accordingly</p>\n\n<p>However, I declared building as a static array <code>char building[256]</code></p>\n\n<p>Before I started moving everything to my static library, everything was working but now I am getting a segfault.</p>\n\n<p>Does anybody know what is wrong?</p>\n\n<p>Edit: Here's the code</p>\n\n<pre><code>    printf(\"list building: \");\n\n    while (fgets(building,sizeof(building),stdin) != NULL)\n    {\n        if (building[strlen(building)-1] == '\\n')\n        {\n            building[strlen(building)-1] = '\\0';\n            break;\n        }\n    }\n\n    //Everything below I am trying to move into my function addEntry,\n    //where everything stays the same, but I have to use the parameters\n    //i stated above\n\n\n    ptr = strtok(building,\",\");\n\n    while (ptr != NULL)\n    {\n\n        strcpy(temp,ptr);\n        strcat(temp,\"buildingUsers\");\n        tempFP = fopen(temp,\"r\");\n        fp = fopen(temp,\"a\");\n\n        if (tempFP == NULL)\n        {\n            fprintf(fp,\"%s\",name);\n        } else {\n\n            tempREAD = fopen(temp,\"r\");\n\n            while (fgets(readBuffer,sizeof(readBuffer),tempREAD) != NULL)\n            {\n                if (strstr(readBuffer,name) != NULL)\n                {\n                    foundCounter++;\n                }\n            }\n\n            if (foundCounter == 0)\n            {\n                fprintf(fp,\"\\n%s\",name);\n            } else {\n                ;\n            }\n        }\n\n        ptr = strtok(NULL,\",\");\n        strcpy(temp,\"\");\n\n        fclose(fp);\n        fclose(tempFP);\n        fclose(tempREAD);\n    }\n</code></pre>\n"}, {"tags": ["c++", "c", "debugging", "gdb"], "answers": [{"tags": [], "owner": {"reputation": 708, "user_id": 6540292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dfac93d8c8c2c645ca2d70f2328e260?s=128&d=identicon&r=PG&f=1", "display_name": "Ray Fischer", "link": "https://stackoverflow.com/users/6540292/ray-fischer"}, "is_accepted": false, "score": 0, "last_activity_date": 1487126415, "creation_date": 1487126415, "answer_id": 42239776, "question_id": 42239411, "link": "https://stackoverflow.com/questions/42239411/gdb-examine-command-confusion-with-address/42239776#42239776", "title": "GDB examine command confusion with address", "body": "<p>When you ask any low-level debugger to display values from memory startingat a given address it will get some number of bytes from successive locations and display them. (Each address refers to a particular byte in memory)</p>\n\n<p>In your first problem you're asking it to display ten bytes and it displays each byte as a two-digit hexadecimal value, eight bytes per line, and the address goes from 0x4005a5 to (0x4005a55 + 8) or 0x4005ad </p>\n\n<p>Then you ask to display ten half words, eight half words per line, and because each half word is two bytes, the address goes from 0x4005a5 to (0x4005b5 + 16) or 0x4005b5 </p>\n\n<p>Your second problem is a little more complicated.  Remember that when you ask it to display the contents of memory starting at a location it just fetches your four words STARTING at that location.  When you pick one higher address then you're mostly getting the same memory values, just shifted by one.</p>\n\n<p>So why do the values in the words seem to be shifting around in the wrong direction?  That has to do with the fact that you're asking for words and x86 CPUs fetch words in a somewhat unintuitive order, from least significant byte to most.</p>\n\n<p>This should help:\n<a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Endianness</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7561048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d92fb6e958b942c6a61b02bb21b8f0?s=128&d=identicon&r=PG&f=1", "display_name": "V -TT", "link": "https://stackoverflow.com/users/7561048/v-tt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487126415, "creation_date": 1487123611, "question_id": 42239411, "link": "https://stackoverflow.com/questions/42239411/gdb-examine-command-confusion-with-address", "title": "GDB examine command confusion with address", "body": "<p>I know it might be and obvious question, but I've decided to learn a little bit of low level programming. I began with c and the gdb.</p>\n\n<p>First problem: </p>\n\n<pre><code>`(gdb) x/10xb $rip\n0x4005a5 &lt;main+4&gt;:  0xb9    0x04    0x00    0x00    0x00    0xba    0x03    0x00\n0x4005ad &lt;main+12&gt;: 0x00    0x00\n(gdb) x/10xh $rip\n0x4005a5 &lt;main+4&gt;:  0x04b9  0x0000  0xba00  0x0003  0x0000  0x02be  0x0000  0xbf00\n0x4005b5 &lt;main+20&gt;: 0x0001  0x0000\n(gdb) x/10xw $rip\n0x4005a5 &lt;main+4&gt;:  0x000004b9  0x0003ba00  0x02be0000  0xbf000000\n0x4005b5 &lt;main+20&gt;: 0x00000001  0xffff9fe8  0x0000b8ff  0xc35d0000\n`\n</code></pre>\n\n<p>Question: Why when I use unit size b the next address is 0x4005ad but when I use h or w the next address is 0x4005b5?</p>\n\n<p>Second problem:</p>\n\n<pre><code>`(gdb) x/4xw $rip + 0\n0x4005a5 &lt;main+4&gt;:  0x000004b9  0x0003ba00  0x02be0000  0xbf000000 \n(gdb) x/4xw $rip + 1\n0x4005a6 &lt;main+5&gt;:  0x00000004  0x000003ba  0x0002be00  0x01bf0000\n(gdb) x/4xw $rip + 2\n0x4005a7 &lt;main+6&gt;:  0xBA000000  0x00000003  0x000002be  0x0001bf00\n(gdb) x/4xw $rip + 3\n0x4005a8 &lt;main+7&gt;:  0x03BA0000  0xbe000000  0x00000002  0x000001bf\n(gdb) x/4xw $rip + 4\n0x4005a9 &lt;main+8&gt;:  0x0003BA00  0x02be0000  0xbf000000  0x00000001\n(gdb) x/4xw $rip + 5\n0x4005aa &lt;main+9&gt;:  0x000003BA  0x0002be00  0x01bf0000  0xe8000000\n(gdb) x/4xw $rip + 6\n0x4005ab &lt;main+10&gt;: 0x00000003  0x000002be  0x0001bf00  0x9fe80000\n(gdb) x/4xw $rip + 7\n0x4005ac &lt;main+11&gt;: 0xBE000000  0x00000002  0x000001bf  0xff9fe800\n(gdb) x/4xw $rip + 8\n0x4005ad &lt;main+12&gt;: 0x02BE0000  0xbf000000  0x00000001  0xffff9fe8`\n</code></pre>\n\n<p>Question: Why the same value is repeated(Capital letters) for example: in the first column but move to the right, like from $rip + 2 to $rip + 5 where BA is first at the beginning, then at the middle and finally at the end?</p>\n"}, {"tags": ["c", "bit-manipulation"], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1487124560, "post_id": 42239358, "comment_id": 71638216, "body": "An equivalent way would be <code>(c &gt;&gt; i) &amp; 1</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1487125142, "post_id": 42239358, "comment_id": 71638349, "body": "You are also better served using <code>putchar</code> to output a single <i>character</i> rather than calling the variadic function <code>printf</code>."}, {"owner": {"reputation": 3642, "user_id": 3371101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eeb77c0b3ce0a8041fa92a4fcd5af850?s=128&d=identicon&r=PG&f=1", "display_name": "codingEnthusiast", "link": "https://stackoverflow.com/users/3371101/codingenthusiast"}, "edited": false, "score": 0, "creation_date": 1487128438, "post_id": 42239358, "comment_id": 71639147, "body": "Noted and implemented. Thanks for the comments."}], "tags": [], "owner": {"reputation": 3642, "user_id": 3371101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eeb77c0b3ce0a8041fa92a4fcd5af850?s=128&d=identicon&r=PG&f=1", "display_name": "codingEnthusiast", "link": "https://stackoverflow.com/users/3371101/codingenthusiast"}, "is_accepted": true, "score": 1, "last_activity_date": 1487128429, "last_edit_date": 1487128429, "creation_date": 1487123125, "answer_id": 42239358, "question_id": 42239280, "link": "https://stackoverflow.com/questions/42239280/extract-bits-of-character-in-c-using-limited-bitwise-operators/42239358#42239358", "title": "Extract bits of character in C using limited bitwise operators", "body": "<p>Apply a mask and isolate one bit at a time:</p>\n\n<pre><code>int i;\nchar c = 181;\nfor (i = 7; i &gt;= 0; i--)\n{\n    putchar((c &gt;&gt; i) &amp; 1 ? '1' : '0');\n}\nputchar('\\n');\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487127114, "post_id": 42239547, "comment_id": 71638801, "body": "Could avoid the need for the special case of <code>if (!v) ...</code> by using a <code>do { } while (sz);</code> loop."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487127387, "post_id": 42239547, "comment_id": 71638868, "body": "Yes, and I haven&#39;t dumped to assembly to check what difference that would make (if any) on code generation. I&#39;ll check and if significant, drop a comment."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 3, "last_activity_date": 1487124750, "creation_date": 1487124750, "answer_id": 42239547, "question_id": 42239280, "link": "https://stackoverflow.com/questions/42239280/extract-bits-of-character-in-c-using-limited-bitwise-operators/42239547#42239547", "title": "Extract bits of character in C using limited bitwise operators", "body": "<p>There are as many different ways to approach this as you want to explore. Do you want to pad the output? Do you want to include separators? (e.g. <code>1111-0110</code>)? Do you want to limit the output to X number of bits? And on and on.</p>\n\n<p>The most basic approach is the one you are asking about, but when implementing a solution, why <em>hard-code</em> limitations of <code>8-bits</code> when you can write a simple generic routine to handle any <code>unsigned</code> type (up to what you specify as the parameter). Also, when <em>bit-twiddling</em>, it is recommended to use <em>exact size types</em> (e.g. <code>uint8_t</code>, ... <code>uint64_t</code>) so there is no chance of platform differences. (exact types are defined in <code>stdint.h</code>) The corresponding conversion macros for the exact width types are provided in <code>inttypes.h</code>. </p>\n\n<p>Putting the pieces together, you could write your print of the <em>unpadded binary representation</em> of any type value up to <code>uint64_t</code> something like the following:</p>\n\n<pre><code>/** unpadded binary representation of 'v'. */\nvoid binprn (const uint64_t v)\n{\n    if (!v)  { putchar ('0'); return; };        /* handle v = 0 simply */\n\n    size_t sz = sizeof v * CHAR_BIT;            /* set the number of bits */\n    uint64_t rem = 0;                           /* value holding remaining bits */\n\n    while (sz--)                                /* for each bit */\n        if ((rem = v &gt;&gt; sz))                    /* if bits remain */\n            putchar ((rem &amp; 1) ? '1' : '0');    /* output the bit */\n}\n</code></pre>\n\n<p>Putting it together with a short example for <code>c = 181</code>, you could do something like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;     /* for CHAR_BIT */\n#include &lt;stdint.h&gt;     /* for exact size type ints */\n#include &lt;inttypes.h&gt;   /* conversion macros for exact size types */\n\n/** unpadded binary representation of 'v'. */\nvoid binprn (const uint64_t v)\n{\n    if (!v)  { putchar ('0'); return; };        /* handle v = 0 simply */\n\n    size_t sz = sizeof v * CHAR_BIT;            /* set the number of bits */\n    uint64_t rem = 0;                           /* value holding remaining bits */\n\n    while (sz--)                                /* for each bit */\n        if ((rem = v &gt;&gt; sz))                    /* if bits remain */\n            putchar ((rem &amp; 1) ? '1' : '0');    /* output the bit */\n}\n\nint main (void) {\n\n    uint8_t c = 181;\n\n    printf (\"The bits in unsigned char c = '%\" PRIu8 \"' are:\\n\\n  \", c);\n    binprn (c);\n    putchar ('\\n'); /* tidy up */\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/cbits\nThe bits in unsigned char c = '181' are:\n\n  10110101\n</code></pre>\n\n<p>Look over all the answers, and let me know if you have any questions.</p>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1487127829, "post_id": 42239928, "comment_id": 71638992, "body": "And I like the array indexing of a string in <code>putchar</code> -- slick."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1487127956, "post_id": 42239928, "comment_id": 71639024, "body": "@DavidC.Rankin Could have use <code>putchar(&#39;0&#39; + (x&amp;1));</code> makes more sense but OP imposed a bitwise operator limit.  Hmmm, is <code>[]</code> cheating?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1487128256, "post_id": 42239928, "comment_id": 71639107, "body": "Call it &quot;creativity&quot; instead of &quot;cheating&quot; <code>:)</code>"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1487127628, "creation_date": 1487127628, "answer_id": 42239928, "question_id": 42239280, "link": "https://stackoverflow.com/questions/42239280/extract-bits-of-character-in-c-using-limited-bitwise-operators/42239928#42239928", "title": "Extract bits of character in C using limited bitwise operators", "body": "<p>A <em>simple</em> solution that does not involve magic numbers like <code>8</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid print_out_the_bits(unsigned char x) {\n  if (x &gt; 1) print_out_the_bits(x &gt;&gt; 1);  // print most significant bits first\n  putchar(\"01\"[x &amp; 1]);\n}\n\nint main() {\n  unsigned char c = 181;\n  print_out_the_bits(c);\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>10110101\n</code></pre>\n"}], "owner": {"reputation": 1250, "user_id": 5679985, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/146c3943e20149fbc04a050430f9c99f?s=128&d=identicon&r=PG&f=1", "display_name": "Human Cyborg Relations", "link": "https://stackoverflow.com/users/5679985/human-cyborg-relations"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 946, "favorite_count": 0, "closed_date": 1487137116, "accepted_answer_id": 42239358, "answer_count": 3, "score": 0, "last_activity_date": 1487128429, "creation_date": 1487122482, "question_id": 42239280, "link": "https://stackoverflow.com/questions/42239280/extract-bits-of-character-in-c-using-limited-bitwise-operators", "closed_reason": "Duplicate", "title": "Extract bits of character in C using limited bitwise operators", "body": "<p>Assume that I can only use the bitwise operators &lt;&lt;, >>, &amp;</p>\n\n<p>I have the following,</p>\n\n<pre><code>unsigned char c = 181;\n</code></pre>\n\n<p>I want to print out the bits in this char from most significant bit to least significant bit. How do I go about doing it?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1487123211, "post_id": 42239264, "comment_id": 71637903, "body": "Where&#39;s the segfault being thrown?"}, {"owner": {"reputation": 19, "user_id": 7565987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U8lhbyQqrVk/AAAAAAAAAAI/AAAAAAAAACE/G05KwtMrO_M/photo.jpg?sz=128", "display_name": "Sean Kennedy", "link": "https://stackoverflow.com/users/7565987/sean-kennedy"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1487123587, "post_id": 42239264, "comment_id": 71637978, "body": "Any time I try to input a number &gt; 6579000. Such as 6580000. I get a Segmentation fault (core dumped) output."}, {"owner": {"reputation": 683, "user_id": 3385907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5269c30229193b14d8e5e2ebbee3847?s=128&d=identicon&r=PG&f=1", "display_name": "Irisshpunk", "link": "https://stackoverflow.com/users/3385907/irisshpunk"}, "edited": false, "score": 0, "creation_date": 1487123663, "post_id": 42239264, "comment_id": 71637992, "body": "But which line of code is causing the segfault? Have you tried attaching with a debugger?"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1487123752, "post_id": 42239264, "comment_id": 71638016, "body": "@SeanKennedy But where? If it doesn&#39;t give you a stack trace saying where the error is happening, you&#39;ll need to debug. I&#39;m guessing you&#39;re going off the end of an array somewhere, but you&#39;re doing so many array accesses all over the place, without running it its difficult to say."}, {"owner": {"reputation": 19, "user_id": 7565987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U8lhbyQqrVk/AAAAAAAAAAI/AAAAAAAAACE/G05KwtMrO_M/photo.jpg?sz=128", "display_name": "Sean Kennedy", "link": "https://stackoverflow.com/users/7565987/sean-kennedy"}, "edited": false, "score": 0, "creation_date": 1487124074, "post_id": 42239264, "comment_id": 71638089, "body": "running it through ddd with a value of 8000000 points to a problem with line 52 &#39;storePrimes[count++] = i&#39;"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1487124487, "post_id": 42239264, "comment_id": 71638200, "body": "what&#39;s the value of <code>primes</code>? is it possible you are accessing beyond the end of the <code>storePrimes</code> array?"}, {"owner": {"reputation": 2819, "user_id": 455434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7e7d1e0f6224677c0f478dc7eba639d?s=128&d=identicon&r=PG", "display_name": "Jahaja", "link": "https://stackoverflow.com/users/455434/jahaja"}, "edited": false, "score": 0, "creation_date": 1487124834, "post_id": 42239264, "comment_id": 71638283, "body": "Stack overflow? ~6.5m bools + the primes could perhaps end up above 8mb"}], "answers": [{"tags": [], "owner": {"reputation": 652, "user_id": 4080489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QJ9sc.jpg?s=128&g=1", "display_name": "Aniruddh Dikhit", "link": "https://stackoverflow.com/users/4080489/aniruddh-dikhit"}, "is_accepted": false, "score": 0, "last_activity_date": 1487125338, "creation_date": 1487125338, "answer_id": 42239632, "question_id": 42239264, "link": "https://stackoverflow.com/questions/42239264/seg-faults-from-goldbach-conjecture-in-c/42239632#42239632", "title": "Seg faults from Goldbach Conjecture in C", "body": "<p>Most likely you are running into stack limit which usually is set to 8192k. You can find this by running </p>\n\n<pre><code># ulimit -s\n8192\n</code></pre>\n\n<p>You can either set this by specifying </p>\n\n<pre><code># ulimit -s unlimited \n</code></pre>\n\n<p>and if you are running this on Mac you can set this to the max allowed on Mac (64 Mb) by running </p>\n\n<pre><code># ulimit -a hard\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 7565987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U8lhbyQqrVk/AAAAAAAAAAI/AAAAAAAAACE/G05KwtMrO_M/photo.jpg?sz=128", "display_name": "Sean Kennedy", "link": "https://stackoverflow.com/users/7565987/sean-kennedy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487125338, "creation_date": 1487122414, "question_id": 42239264, "link": "https://stackoverflow.com/questions/42239264/seg-faults-from-goldbach-conjecture-in-c", "title": "Seg faults from Goldbach Conjecture in C", "body": "<p>My program works for the most part, but any time I try to check a number > 6,576,900 I get a segmentation fault.</p>\n\n<p>The weirdest part is that it actually runs past that point if started earlier, I just can't get it to start past that point.</p>\n\n<p>Any tips on where the issue may lie, and ways I can correct it?</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#define TRUE 1\n#define FALSE 0\n\nvoid goldbach(int);\n\nint main(void) {\n    int n;\n\n    printf(\"Enter a number to start testing the goldbach conjecture: \");\n    scanf(\"%i\", &amp;n);\n\n    goldbach(n);\n\n    return 0;\n}\n\nvoid goldbach(int n) {\n    _Bool goldbachCheck = TRUE;\n\n    //keep running as long as n can be expressed as the sum of two primes\n    while(goldbachCheck == TRUE) {\n        _Bool isPrime[n];\n\n        for(int i = 2; i &lt; n; i++) {\n            isPrime[i] = TRUE;\n        }\n\n        //Sieve of Erastosthenes method for calculating all primes &lt; n\n        for (int i = 2; i*i &lt; n; i++) {\n            if (isPrime[i]) {\n                for (int j = i; i*j &lt; n; j++) {\n                    isPrime[i*j] = FALSE;\n                }\n            }\n        }\n\n        //counts number of primes found\n        int primes = 0;\n        for (int i = 2; i &lt; n; i++) {\n            if (isPrime[i]) {\n                primes++;\n            }\n        }\n\n\n//store primes in an array\n        int storePrimes[primes];\n        int count = 0;\n        for (int i = 3; i &lt; n; i++) {\n            if (isPrime[i]) {\n                storePrimes[count++] = i;\n            }\n        }\n\n        //Checks if n can be expressed as the sum of two primes\n        int start = 0;\n        int end = count -1;\n\n        while (start &lt;= end){\n            if (storePrimes[start] + storePrimes[end] == n) {\n                break;\n            }\n            else if (storePrimes[start] + storePrimes[end] &lt; n){\n                start++;\n            }\n            else {\n                end--;\n            }\n        }\n\n        if (storePrimes[start] + storePrimes[end] == n) {\n            printf(\"%i = %i + %i\\n\", n, storePrimes[start], storePrimes[end]);\n        }\n        else {\n            printf(\"%i can not be expressed as the sum of two odd primes.\\n\", n);\n            goldbachCheck = FALSE;\n        }\n        //Moves on to next even integer\n        n+=2;\n    }\n}\n</code></pre>\n"}]