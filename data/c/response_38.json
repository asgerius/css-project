[{"tags": ["c", "freebsd", "dvd", "cd-rom"], "comments": [{"owner": {"reputation": 18935, "user_id": 19405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72b55a41a43ea0493fc64641a1ed295?s=128&d=identicon&r=PG", "display_name": "nobody", "link": "https://stackoverflow.com/users/19405/nobody"}, "edited": false, "score": 1, "creation_date": 1443661832, "post_id": 32877342, "comment_id": 53586893, "body": "Looks like you&#39;re reading one byte at a time. You might need to read a whole sector/block."}, {"owner": {"reputation": 2797, "user_id": 668445, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78545c73f086c800f7e8f787c67b48b2?s=128&d=identicon&r=PG", "display_name": "Bill Evans at Mariposa", "link": "https://stackoverflow.com/users/668445/bill-evans-at-mariposa"}, "reply_to_user": {"reputation": 18935, "user_id": 19405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72b55a41a43ea0493fc64641a1ed295?s=128&d=identicon&r=PG", "display_name": "nobody", "link": "https://stackoverflow.com/users/19405/nobody"}, "edited": false, "score": 0, "creation_date": 1443673140, "post_id": 32877342, "comment_id": 53589448, "body": "@Andrew: Thanks, you put me on the right track."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1443681421, "post_id": 32877342, "comment_id": 53592283, "body": "(No need to add &quot;SOLVED&quot; to a title. If your own answer works, you are free (and even encouraged!) to mark it as the &#39;accepted&#39; answer.)"}, {"owner": {"reputation": 2797, "user_id": 668445, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78545c73f086c800f7e8f787c67b48b2?s=128&d=identicon&r=PG", "display_name": "Bill Evans at Mariposa", "link": "https://stackoverflow.com/users/668445/bill-evans-at-mariposa"}, "edited": false, "score": 0, "creation_date": 1443703807, "post_id": 32877342, "comment_id": 53605808, "body": "Will do, but it tells me to come back tomorrow to do that. I guess if Friday is special for Muslims, Saturday for Jews, and Sunday for Christians, is Thursday a day of rest for stackoverflovians? :)"}], "answers": [{"tags": [], "owner": {"reputation": 2797, "user_id": 668445, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78545c73f086c800f7e8f787c67b48b2?s=128&d=identicon&r=PG", "display_name": "Bill Evans at Mariposa", "link": "https://stackoverflow.com/users/668445/bill-evans-at-mariposa"}, "is_accepted": true, "score": 3, "last_activity_date": 1443672916, "creation_date": 1443672916, "answer_id": 32879352, "question_id": 32877342, "link": "https://stackoverflow.com/questions/32877342/random-seek-on-cd-rom-drive/32879352#32879352", "title": "Random seek on CD-ROM drive", "body": "<p>It turns out that I was making two errors: trying to read a byte at a time, and lseek()ing to byte 1. fstat() on the device shows st_blksize of 4096.</p>\n\n<p>Seeking to 4096 and reading 4096 bytes works.</p>\n\n<p>Seeking to 2048 and reading 2048 bytes works.</p>\n\n<p>Seeking to 2048 and reading 1024 bytes gives EINVAL on the read().</p>\n\n<p>Seeking to 1024 and reading 2048 bytes gives EINVAL on the read().</p>\n"}], "owner": {"reputation": 2797, "user_id": 668445, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/78545c73f086c800f7e8f787c67b48b2?s=128&d=identicon&r=PG", "display_name": "Bill Evans at Mariposa", "link": "https://stackoverflow.com/users/668445/bill-evans-at-mariposa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 32879352, "answer_count": 1, "score": 2, "last_activity_date": 1443681360, "creation_date": 1443656908, "last_edit_date": 1443681360, "question_id": 32877342, "link": "https://stackoverflow.com/questions/32877342/random-seek-on-cd-rom-drive", "title": "Random seek on CD-ROM drive", "body": "<p>This works on Linux, but not (as I would like) on FreeBSD:</p>\n\n<p>I wish to exercise my CD-ROM drive, to keep the dust off the lens. On Linux I run (as root) a C program I wrote which seeks back and forth, reading a single block each time as it goes. On FreeBSD this program doesn't get too far. I can open the device and seek to (say) block 1. But when I try to read the block, I get error 22 (EINVAL). It fails on the first read, at block 1, whether or not the device is mounted (-t cd9660). How do I proceed?</p>\n\n<p>Full program is <a href=\"http://pastebin.com/VjFgiysP\" rel=\"nofollow\">here</a>.  The relevant snippet:</p>\n\n<pre><code>  lo_fd=Open(ar_argv[1],\n             O_RDONLY,\n             0\n            );\n\n  lo_high_bit=1;\n\n  while(lo_high_bit&gt;0)\n  {\n    if(lseek(lo_fd,\n             lo_high_bit,\n             SEEK_SET\n            )\n       ==\n       (off_t)-1\n      )\n    {\n      lo_high_bit&gt;&gt;=1;\n\n      break;\n    }\n\n    if(read(lo_fd,\n            lo_buffer,\n            1\n           )\n       !=\n       1\n      )\n    {\n      lo_high_bit&gt;&gt;=1;\n\n      break;\n    }\n\n    lo_high_bit&lt;&lt;=1;\n  }\n</code></pre>\n"}, {"tags": ["c", "pointers", "segmentation-fault"], "answers": [{"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": true, "score": 1, "last_activity_date": 1443665639, "last_edit_date": 1443665639, "creation_date": 1443655753, "answer_id": 32877153, "question_id": 32877057, "link": "https://stackoverflow.com/questions/32877057/segmentation-fault-with-pointers-in-sorted-lists-in-c/32877153#32877153", "title": "Segmentation Fault With Pointers In Sorted Lists In C", "body": "<p>Is Node a node or a pointer to node? If Node is a structure, then the code should be:</p>\n\n<pre><code>Node * pt = NULL;\nNode * prev = NULL;\n</code></pre>\n\n<p>Although if this fix works, I don't understand why the compiler didn't produce an error or warning.</p>\n\n<p>The example code doesn't show how Node, SortedListPtr, SortedListIterator, or SortedListIteratorPtr are defined.</p>\n\n<p>I didn't check to see if there are other issues.</p>\n"}, {"comments": [{"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1443665600, "post_id": 32877236, "comment_id": 53587718, "body": "As long as li-&gt;start != NULL, the for loop should be ok."}], "tags": [], "owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "is_accepted": false, "score": 0, "last_activity_date": 1443656210, "creation_date": 1443656210, "answer_id": 32877236, "question_id": 32877057, "link": "https://stackoverflow.com/questions/32877057/segmentation-fault-with-pointers-in-sorted-lists-in-c/32877236#32877236", "title": "Segmentation Fault With Pointers In Sorted Lists In C", "body": "<p>The line <code>pt = NULL</code> seems the culprit.</p>\n\n<p>Look in the for loop code:</p>\n\n<blockquote>\n  <p>for(pt = li->start; pt!=NULL; <strong>pt = pt->next</strong> ) //problem line of code</p>\n</blockquote>\n"}], "owner": {"reputation": 177, "user_id": 5331027, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/493bf67007ad10083a086980d1345432?s=128&d=identicon&r=PG&f=1", "display_name": "Chad", "link": "https://stackoverflow.com/users/5331027/chad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 32877153, "answer_count": 2, "score": 0, "last_activity_date": 1443665639, "creation_date": 1443655172, "last_edit_date": 1443656044, "question_id": 32877057, "link": "https://stackoverflow.com/questions/32877057/segmentation-fault-with-pointers-in-sorted-lists-in-c", "title": "Segmentation Fault With Pointers In Sorted Lists In C", "body": "<p>I have a function here that destroys an iterator acting on a sorted list. </p>\n\n<pre><code>void SortedListDestroyTheIterator (SortedListIteratorPtr iter) \n{\n    Node pt = NULL;\n    Node prev = NULL;\n    SortedListIteratorPtr walk;\n\n    walk = malloc(sizeof(struct SortedListIterator)+1);\n    SortedListPtr li = iter-&gt;list;\n\n    for(pt = li-&gt;start; pt!=NULL; pt = pt-&gt;next) //problem line of code\n    {\n        walk = pt-&gt;info;\n        //delete\n        if(walk==iter){\n            if(prev==NULL){\n                li-&gt;start = li-&gt;start-&gt;next;\n            }\n            else\n            {\n                prev-&gt;next = pt-&gt;next;\n            }\n        }\n        prev = pt;\n    }\n    free(iter);\n}\n</code></pre>\n\n<p>I have figured out that a segmentation fault occurs with this assignment statement: <code>pt = li-&gt;start</code>. Now this line of code is creating a node that points to the starting node of the list. If I type in <code>li-&gt;start</code> it works, but once I add the assignment <code>pt=li-&gt;start</code> I get a segmentation fault. I do not understand why or how to fix this. </p>\n"}, {"tags": ["c", "memory", "exec", "argv"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1443653889, "post_id": 32876705, "comment_id": 53585049, "body": "If you could explain to me why you use global variables ..."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1443654516, "post_id": 32876705, "comment_id": 53585225, "body": "I&#39;ve edited your question. Your reference to a &quot;C shell&quot; could be confusing; it commonly refers to the existing <code>csh</code> shell."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1443659075, "post_id": 32876705, "comment_id": 53586335, "body": "Use prototypes! And don&#39;t cast the result of <code>malloc</code> &amp; friends in C!"}, {"owner": {"reputation": 41, "user_id": 4644822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6ae8b99e489918340f9bca2ab91bb13?s=128&d=identicon&r=PG&f=1", "display_name": "Chuckles", "link": "https://stackoverflow.com/users/4644822/chuckles"}, "edited": false, "score": 0, "creation_date": 1443660024, "post_id": 32876705, "comment_id": 53586523, "body": "I removed the global variables as per your recommendation, and Thanks Keith, I was not aware of that!"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4644822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6ae8b99e489918340f9bca2ab91bb13?s=128&d=identicon&r=PG&f=1", "display_name": "Chuckles", "link": "https://stackoverflow.com/users/4644822/chuckles"}, "edited": false, "score": 0, "creation_date": 1443660176, "post_id": 32876775, "comment_id": 53586557, "body": "Thank you for such a clear explanation!  I was entirely overlooking argument as the problem."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 3, "last_activity_date": 1443653571, "last_edit_date": 1443653571, "creation_date": 1443653255, "answer_id": 32876775, "question_id": 32876705, "link": "https://stackoverflow.com/questions/32876705/handling-arguments-in-a-custom-shell/32876775#32876775", "title": "Handling arguments in a custom shell", "body": "<p>You need to indicate the end of the <code>argv</code> array with an element that contains a null pointer. The commented-out line:</p>\n\n<pre><code>argv[j] = \"\\0\";\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>argv[j] = NULL;\n</code></pre>\n\n<p>You also need to put a null terminator at the end of the <code>argument</code> string. You're getting <code>l</code> when you do the <code>echo</code> because <code>argument</code> still contains the previous command line. So the first line sets <code>argument</code> to:</p>\n\n<pre><code>ls -l\n</code></pre>\n\n<p>Then you overwrite the first 4 characters with <code>echo</code>, so it becomes:</p>\n\n<pre><code>echol\n</code></pre>\n\n<p>So the full function would be:</p>\n\n<pre><code>void getcommand(char* argument, char** argv){  //Parser for the command\n    int i=0,j=0;\n    char c;\n    char* token;\n    while((c = getchar()) != '\\n' ){ //gets char and checks for end of line\n        argument[i] = c;\n        i++;\n    }\n    argument[i] = '\\0';\n    token = strtok(argument, \" ,.\");  //tokenize the command\n    while (token != NULL){ \n        argv[j] = token;   //pass command to array of arguments\n        token = strtok(NULL, \" ,.\");\n        j++;\n    }\n    argv[j] = NULL;\n}\n</code></pre>\n\n<p>You could also use <code>fgets()</code> to read a line of input, instead of calling <code>getchar()</code> yourself.</p>\n\n<p>You should also check for the input being larger than the size of <code>argument</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 3, "last_activity_date": 1443653385, "creation_date": 1443653385, "answer_id": 32876791, "question_id": 32876705, "link": "https://stackoverflow.com/questions/32876705/handling-arguments-in-a-custom-shell/32876791#32876791", "title": "Handling arguments in a custom shell", "body": "<p>After the loop that reads an input line, you need to terminate the line with a NUL character. </p>\n\n<pre><code>while((c = getchar()) != '\\n' ){ //gets char and checks for end of line\n    argument[i] = c;\n    i++;\n}\nargument[i] = '\\0';  // &lt;&lt;---- terminate the input line\n</code></pre>\n\n<p>You also need to do what @Barmar said, but that's a different issue than the one that you describe in the question.</p>\n"}], "owner": {"reputation": 41, "user_id": 4644822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6ae8b99e489918340f9bca2ab91bb13?s=128&d=identicon&r=PG&f=1", "display_name": "Chuckles", "link": "https://stackoverflow.com/users/4644822/chuckles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "accepted_answer_id": 32876775, "answer_count": 2, "score": 0, "last_activity_date": 1443654493, "creation_date": 1443652846, "last_edit_date": 1443654493, "question_id": 32876705, "link": "https://stackoverflow.com/questions/32876705/handling-arguments-in-a-custom-shell", "title": "Handling arguments in a custom shell", "body": "<p>I am currently working on a shell, implemented in C, for class that I hope to build upon over time and have run into a problem with executing my arguments. My program uses <code>getchar()</code> to parse entries into the array of arguments and then executes the arguments using <code>execvp()</code>. The issue I have is in repeated entry of arguments any subsequent shorter arguments are concatenated with characters left in memory somewhere.  Example below.  And I am required to use <code>getchar</code>, which rules out alternate methods of getting the arguments.</p>\n\n<pre><code>//Global Variables    \nchar argument[64];  \nchar **argv;\n\nint main(int argc, char** argv) {\n    mainloop();                      //Loop that calls the commands\n    return (EXIT_SUCCESS);\n}\n\nvoid prompt(){                       //Modular prompt\n    printf (\"?:\");\n}\n\nvoid mainloop(){                    //Loop that calls the functions\n    while(1){\n        prompt();\n        argv = (char**)malloc(sizeof(char*)*64);  //allocate memory for argv\n        getcommand(argument, argv);\n        if((strcmp(argv[0],\"exit\" )) == 0){  //check for exit\n            return 0;\n        }\n        executecommand();\n        printcommand();\n        //clearcommand();\n        //printcommand();\n    }\n}\n\nvoid getcommand(char* argument, char** argv){  //Parser for the command\n    int i=0,j=0;\n    char c;\n    char* token;\n    while((c = getchar()) != '\\n' ){ //gets char and checks for end of line\n        argument[i] = c;\n        i++;\n    }\n    token = strtok(argument, \" ,.\");  //tokenize the command\n    while (token != NULL){ \n        argv[j] = token;   //pass command to array of arguments\n        token = strtok(NULL, \" ,.\");\n        j++;\n    }\n    //argv[j] = \"\\0\";\n}\n\nvoid executecommand(){  //Function to call fork and execute with errors\n    pid_t childpid = fork();\n    int returnStatus;\n    if(childpid == -1){                           //Fail to Fork\n        printf(\"failed to fork\");\n        exit(1);\n    }\n    else if(childpid == 0){                      //Child process\n        if (execvp(*argv, argv) &lt; 0){\n            printf(\"error executing\\n\");\n            exit(1);\n        }\n        else{                                   //Execute successful\n            printf(\"executed\");\n        }\n    }\n    int c=(int)waitpid(childpid, &amp;returnStatus, 0);\n    if (returnStatus == 0)  // Verify child process terminated without error.  \n        {\n            printf(\"The child process terminated normally. \\n\");   \n        }\n\n    if (returnStatus == 1)      \n        {\n            printf(\"The child process terminated with an error!.\\n\");    \n        }\n    //realloc(argv,64);\n}\n\nvoid printcommand(){  //Test function to print arguments\n    int i = 0;\n    while(argv[i] != NULL){\n        printf(\"Argv%d: %s \\n\",i, argv[i] );\n        i++;\n    }\n}\n\n/*void clearcommand(){     //Function to clear up the memory, does not work\n  int i=0;\n  argv[0] = \"       \\0\";\n  argv[1] = \"       \\0\";\n\n  }*/\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>?: ls -l\n//functions as intended\n\n?:echo\n//argument returns as echol\n</code></pre>\n\n<p>This is the case for any entry which is shorter than a previous entry. I do not understand why exec is reading the argument continuing after a <code>'\\0'</code> and i am sure that I am making a memory error here. Help would be very much appreciated, I have been stuck on this one for a couple of days now.</p>\n"}, {"tags": ["c", "linux", "multithreading", "pthreads", "semaphore"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1443653468, "post_id": 32876663, "comment_id": 53584921, "body": "Please describe what the actual problem is. That is, how the program is not behaving as expected. And ideally should provide an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1443654578, "post_id": 32876663, "comment_id": 53585241, "body": "Thank you. I&#39;m guessing you have been staring at this for a long time so understand the output well. But to help others it would be good to highlight what is wrong with the actual output. Is it just the traversal time? Is it the order of traversal? etc. I&#39;m sure people could work it out by reading through your code carefully. But the easier you make it to understand the more likely you will get an answer."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1443654702, "post_id": 32876663, "comment_id": 53585270, "body": "Don&#39;t you need a sempahore for each room rather than a <code>VisitorCount</code>."}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 4539113, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-Z6jMTzSI5iE/AAAAAAAAAAI/AAAAAAAAAGI/0Y6fTsDZCwk/photo.jpg?sz=128", "display_name": "Smreks", "link": "https://stackoverflow.com/users/4539113/smreks"}, "edited": false, "score": 0, "creation_date": 1443659313, "post_id": 32877562, "comment_id": 53586389, "body": "oh haha so basically replace VisitorCount[] with array of semaphores?"}, {"owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "reply_to_user": {"reputation": 307, "user_id": 4539113, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-Z6jMTzSI5iE/AAAAAAAAAAI/AAAAAAAAAGI/0Y6fTsDZCwk/photo.jpg?sz=128", "display_name": "Smreks", "link": "https://stackoverflow.com/users/4539113/smreks"}, "edited": false, "score": 0, "creation_date": 1443662731, "post_id": 32877562, "comment_id": 53587103, "body": "Pretty much.  But when entering the room you want to wait on the semaphore <i>before</i> getting the current time, since you haven&#39;t actually entered the room until the semaphore returns (when leaving the room you still post the semaphore after getting the time though).  And you&#39;ll need to run a loop to initialise those semaphores before starting the rats."}], "tags": [], "owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "is_accepted": true, "score": 1, "last_activity_date": 1443658442, "creation_date": 1443658442, "answer_id": 32877562, "question_id": 32876663, "link": "https://stackoverflow.com/questions/32876663/c-linux-pthreads-and-semaphore/32877562#32877562", "title": "C - Linux - Pthreads and Semaphore", "body": "<p>You can't have each thread re-initialise the same two shared semaphores simultaneously.  The semaphores all need to be initialised up-front, before your rats start running.</p>\n\n<p>The easiest way to solve this will be to have one semaphore for each room, initialised to the capacity of that room (store the sempahore in the <code>roomArray</code> element for that room).  Then, just have the rat wait on the semaphore when it enters the room, and post the semaphore when it exits the room.</p>\n"}], "owner": {"reputation": 307, "user_id": 4539113, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-Z6jMTzSI5iE/AAAAAAAAAAI/AAAAAAAAAGI/0Y6fTsDZCwk/photo.jpg?sz=128", "display_name": "Smreks", "link": "https://stackoverflow.com/users/4539113/smreks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 847, "favorite_count": 0, "accepted_answer_id": 32877562, "answer_count": 1, "score": 0, "last_activity_date": 1443658442, "creation_date": 1443652625, "last_edit_date": 1443654352, "question_id": 32876663, "link": "https://stackoverflow.com/questions/32876663/c-linux-pthreads-and-semaphore", "title": "C - Linux - Pthreads and Semaphore", "body": "<p>I am having trouble trying to implement semaphores with pthreads. The scenario that I am trying to program are rats in a maze. Where rats are threads and the maze consists of rooms connected to each other. The rats have to traverse through each room with each room having a different capacity and wait time before a rat can move on. I was able to implement it with a while loop and let the threads sit and spin while waiting for a spot to free up but I need to achieve the objective with semaphores. Here's what I have:</p>\n\n<pre><code>sem_t psem, csem;\n\nvoid EnterRoom(int iRat, int iRoom) {\n\n    time_t currentTime;\n\n    currentTime = time(NULL);\n\n    RoomVB[iRoom][iRat].tEntry = currentTime - startTime;\n    RoomVB[iRoom][iRat].iRat = iRat;\n    VisitorCount[iRoom]++;\n    sleep(roomArray[iRoom].delay);\n}\n\nvoid LeaveRoom(int iRat, int iRoom) {\n\n    time_t currentTime;\n\n    currentTime = time(NULL);\n\n    VisitorCount[iRoom]--;\n    RoomVB[iRoom][iRat].tDep = currentTime - startTime;\n}\n\nvoid *rat(void *ratID) {\n\n    if (sem_init(&amp;csem, 0, 0) &lt; 0) {\n        perror(\"sem_init\");\n        exit(1);\n    }\n\n    int id;\n\n    id = (int)ratID;\n\n    int i;\n\n    for (i = 0; i &lt; numOfRooms; i++) {\n\n    /*while (VisitorCount[i] &gt;= roomArray[i].capacity) {\n\n    }*/\n\n    if (sem_init(&amp;psem, 0, roomArray[i].capacity) &lt; 0) {\n        perror(\"sem_init\");\n        exit(1);\n        }\n\n\n    sem_wait(&amp;psem);\n    EnterRoom(id, i);\n    sem_post(&amp;csem);\n\n    sem_wait(&amp;csem);\n    LeaveRoom(id, i);\n    sem_post(&amp;psem);\n\n    }\n\n    return NULL;\n\n}\n</code></pre>\n\n<p>As you can see I commented out the while loop. I had to incorporate additional information like the time it it takes for a rat to travel through rooms in a 2D array.</p>\n\n<p>Error result:</p>\n\n<pre><code>Rat 0 completed maze in 5 seconds.\nRat 1 completed maze in 5 seconds.\nRat 2 completed maze in 5 seconds.\nRoom 0 [3 1]: 0 0 1; 1 0 1; 2 0 1; \nRoom 1 [2 2]: 0 1 3; 1 1 3; 2 1 3; \nRoom 2 [1 2]: 0 3 5; 1 3 5; 2 3 5; \nTotal traversal time: 15 seconds, compared to ideal time: 15 seconds.\n</code></pre>\n\n<p>Correct result (achieved with loop):</p>\n\n<pre><code>Rat 0 completed maze in 7 seconds.\nRat 1 completed maze in 5 seconds.\nRat 2 completed maze in 9 seconds.\nRoom 0 [3 1]: 0 0 1; 1 0 1; 2 0 1; \nRoom 1 [2 2]: 0 1 3; 1 1 3; 2 3 5; \nRoom 2 [1 2]: 0 5 7; 1 3 5; 2 7 9; \nTotal traversal time: 21 seconds, compared to ideal time: 15 seconds.\n</code></pre>\n\n<p>I assume I need two semaphores with the producer semaphore being initially set to n - which is the capacity of each room. Any ideas how I fix it so it works as it should?</p>\n"}, {"tags": ["c", "global"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1443652697, "post_id": 32876661, "comment_id": 53584679, "body": "You need to post your code so we can see what you&#39;re doing wrong."}, {"owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 1, "creation_date": 1443652792, "post_id": 32876661, "comment_id": 53584705, "body": "It would be great if you could enclose a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3186023"}, "edited": false, "score": 0, "creation_date": 1443653136, "post_id": 32876661, "comment_id": 53584797, "body": "I have read that - and other sources. Some sources suggest I could achieve this using header files and that&#39;s what I&#39;m trying to do."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3186023"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443653158, "post_id": 32876661, "comment_id": 53584808, "body": "@Barmar I have done so now."}, {"owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 0, "creation_date": 1443653180, "post_id": 32876661, "comment_id": 53584815, "body": "Important question - how are you compiling/linking it? Makefile?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3186023"}, "reply_to_user": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 0, "creation_date": 1443653225, "post_id": 32876661, "comment_id": 53584818, "body": "@t0mm13b Yes. I will also edit my makefile into the OP."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1443653497, "post_id": 32876661, "comment_id": 53584934, "body": "` main: a.o b.o     gcc  $(CFLAGS) -o main $^ `"}, {"owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 0, "creation_date": 1443653797, "post_id": 32876661, "comment_id": 53585024, "body": "<code>gcc -E</code> should give you a clue on how the C compiler pre-processes the output. What version is the compiler? I have tried it here with gcc 4.9 and do not get the error."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3186023"}, "reply_to_user": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 0, "creation_date": 1443656542, "post_id": 32876661, "comment_id": 53585739, "body": "@t0mm13b Strange! Also 4.9. It says (in my b.c class) that i has not been declared when I do i = 10;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3186023"}, "reply_to_user": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 0, "creation_date": 1443657729, "post_id": 32876661, "comment_id": 53586038, "body": "@t0mm13b I am ever so confused. Make a new directory, copied and pasted all the files, ran the makefile and it compiled in the new directory with 0 errors. Still doesn&#39;t run in the old directory. What the hell is up with that...?"}], "answers": [{"comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1443653784, "post_id": 32876823, "comment_id": 53585021, "body": "Can you please clarify how this answers the quesiton? OP claims that <code>extern int i</code> is already present in the included header but still getting compilation error."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3186023"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1443655352, "post_id": 32876823, "comment_id": 53585427, "body": "Yeah, what @AlanAu said."}, {"owner": {"reputation": 414, "user_id": 4880090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9731995440b63d4cbf69257df481c87?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kolokowsky", "link": "https://stackoverflow.com/users/4880090/steve-kolokowsky"}, "edited": false, "score": 0, "creation_date": 1443656260, "post_id": 32876823, "comment_id": 53585667, "body": "He added an edit &quot;Edit: it works if I define extern int i; on top of my b.c file&quot;"}], "tags": [], "owner": {"reputation": 414, "user_id": 4880090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9731995440b63d4cbf69257df481c87?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kolokowsky", "link": "https://stackoverflow.com/users/4880090/steve-kolokowsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1443653704, "last_edit_date": 1443653704, "creation_date": 1443653537, "answer_id": 32876823, "question_id": 32876661, "link": "https://stackoverflow.com/questions/32876661/cannot-access-global-variable-in-one-c-file-from-another-c-file/32876823#32876823", "title": "Cannot access global variable in one .c file from another .c file", "body": "<p>Go ahead and include the header with the ext in both files.  Put the definition and initialization in the file that owns the variable.  This is okay:</p>\n\n<pre><code>extern int aaa;\nint aaa = 1;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3186023"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 813, "favorite_count": 0, "closed_date": 1443653800, "answer_count": 1, "score": 0, "last_activity_date": 1443657320, "creation_date": 1443652599, "last_edit_date": 1443657320, "question_id": 32876661, "link": "https://stackoverflow.com/questions/32876661/cannot-access-global-variable-in-one-c-file-from-another-c-file", "closed_reason": "Duplicate", "title": "Cannot access global variable in one .c file from another .c file", "body": "<p>To set the scene here - I have 2 .c files, call it <code>a.c</code> and <code>b.c</code>.</p>\n\n<p>I then have 2 header files for each .c file, <code>a.h</code> (which has all function prototypes, and all global variables declared as <code>extern type name;</code>), and <code>b.h</code> which has only function prototypes of <code>b.c</code> as <code>b.c</code> contains no global variables.</p>\n\n<p>I want to access <code>a.c</code>'s global variables in <code>b.c</code>, so I have added a statement <code>#include \"a.h\"</code> in <code>b.c</code>. </p>\n\n<p>Only problem is, I still can't access <code>a.c</code>'s global variables in <code>b.c</code>, for example if I want to print. I have a global variable <code>int i;</code> in <code>a.c</code>, and if I do:</p>\n\n<p><code>i = 5;</code>\n<code>printf(\"%d\", i);</code> in <code>b.c</code>, I get an error saying that variable i has not been declared. What am I doing wrong?</p>\n\n<p>The code:</p>\n\n<p>a.c:</p>\n\n<pre><code>#include \"b.h\"\n\nint i;\n\nint main() {\n    executeMethod();\n    return 0;\n}\n</code></pre>\n\n<p>b.c:</p>\n\n<pre><code>#include \"a.h\"\nvoid executeMethod() {\n    i = 10;\n    printf(\"%d\", i);\n</code></pre>\n\n<p>a.h:</p>\n\n<pre><code>int main();\nextern int i;\n</code></pre>\n\n<p>b.h:</p>\n\n<pre><code>void executeMethod();\n</code></pre>\n\n<p>makefile:</p>\n\n<p>CFLAGS=-Wall -g</p>\n\n<pre><code>all: main\n\nmain: a.c b.c a.h b.h\n    gcc  $(CFLAGS) -o main a.c b.c a.h b.h\n\nclean:\n    rm -f main\n</code></pre>\n\n<p>Have also tried without the makefile:\n    gcc -o main a.c b.c a.h b.h</p>\n\n<p>Thanks.</p>\n\n<p>Edit: it works if I define <code>extern int i;</code> on top of my <code>b.c</code> file, but say I have 60 variables, I would rather have them in a header.h file and just <code>#include \"header.h\"</code> rather than writing 50 extern statements.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 6, "creation_date": 1443652471, "post_id": 32876626, "comment_id": 53584619, "body": "Since accessing uninitialized data results in undefined behavior, any result is possible."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1443652901, "post_id": 32876688, "comment_id": 53584732, "body": "That explains why it prints values more than 1, but why doesn&#39;t the <code>assert</code> ever fire?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1443653052, "post_id": 32876688, "comment_id": 53584773, "body": "@Barmar it is optimized out by the compiler, as a valid <code>bool</code> should not contain something else than <code>0</code> or <code>1</code>. Optimizations are allowed to consider that undefined behaviour never occurs."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 2, "last_activity_date": 1443653201, "last_edit_date": 1443653201, "creation_date": 1443652770, "answer_id": 32876688, "question_id": 32876626, "link": "https://stackoverflow.com/questions/32876626/why-does-printing-an-uninitialized-bool-array-as-integers-produce-values-besides/32876688#32876688", "title": "Why does printing an uninitialized bool array as integers produce values besides 0 and 1?", "body": "<p>Because it doesn't make sense to restrict boolean read operations to clamp the actual value to either 0 or 1. </p>\n\n<p>The value of an undefined variable can be anything that fits within the variable's size. A <code>bool</code> usually occupies a single byte (because that's the smallest addressable unit), and on systems with 8-bit bytes it means a <code>bool</code> can store 256 different values. That's why the numbers you're seeing range from 0 to 255. </p>\n\n<p>The implementation is free to assume that you will not invoke UB, that's why you're seeing values besides 0 and 1. In code without UB, all <code>bool</code>s would convert to either 0 or 1.</p>\n"}, {"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 2, "last_activity_date": 1443652900, "creation_date": 1443652900, "answer_id": 32876715, "question_id": 32876626, "link": "https://stackoverflow.com/questions/32876626/why-does-printing-an-uninitialized-bool-array-as-integers-produce-values-besides/32876715#32876715", "title": "Why does printing an uninitialized bool array as integers produce values besides 0 and 1?", "body": "<p>A <code>bool</code> (<code>_Bool</code>) object can only hold values <code>0</code> or <code>1</code>. In your case your program invokes undefined behavior as you are accessing uninitialized memory returned by <code>malloc</code> which has indeterminate value.</p>\n\n<p>A strictly conforming program will only evaluate <code>_Bool</code> objects to <code>0</code> or <code>1</code>.</p>\n"}], "owner": {"reputation": 1154, "user_id": 259795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AMwyI.png?s=128&g=1", "display_name": "Tyler Streeter", "link": "https://stackoverflow.com/users/259795/tyler-streeter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "closed_date": 1443652915, "accepted_answer_id": 32876688, "answer_count": 2, "score": -2, "last_activity_date": 1443696479, "creation_date": 1443652396, "last_edit_date": 1495541653, "question_id": 32876626, "link": "https://stackoverflow.com/questions/32876626/why-does-printing-an-uninitialized-bool-array-as-integers-produce-values-besides", "closed_reason": "Duplicate", "title": "Why does printing an uninitialized bool array as integers produce values besides 0 and 1?", "body": "<p>(Also see <a href=\"https://stackoverflow.com/questions/7804804/mystery-with-bool-data-type\">Mystery with bool data type</a> for a similar question with relevant answers.)</p>\n\n<hr>\n\n<p>While debugging a program, I noticed strange output when printing an uninitialized bool array as integers. Consider this C program:</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    int n = 30;\n    bool* bools = malloc(n * sizeof(bool)); // Uninitialized memory.\n    for (int i=0; i&lt;n; ++i)\n    {\n        int x = bools[i];\n        assert(x == 0 || x == 1);\n        printf(\"%d \", x);\n    }\n    printf(\"\\n\");\n    free(bools);\n}\n</code></pre>\n\n<p>Due to the uninitialized bool array, the output varies with each run based on previous memory contents, of course. My understanding is that casting a bool to an int should always produce either 0 or 1 (see the assertion above, which always passes); however, I frequently see output like this:</p>\n\n<pre><code>0 0 0 0 0 0 0 144 0 0 0 0 0 0 0 144 16 0 92 113 255 127 0 0 160 41 222 134 255 127\n</code></pre>\n\n<p>Can someone explain how this program can print anything besides 0s and 1s?</p>\n\n<p><strong>Update:</strong> The short answer is that casting an <em>uninitialized</em> bool to int can produce values besides 0 and 1. (In my case, bools are stored as bytes, so their uninitialized values can be anything in [0..255].) Also, the assert line above seems to be optimized out, which made this problem more difficult to debug.</p>\n\n<hr>\n\n<p>To provide a little more context: I was originally writing a function to count the number of set bits in a bool array, e.g.:</p>\n\n<pre><code>int popcount(const bool* v, int n)\n{\n    int c=0;\n    for (int i=0; i&lt;n; ++i) c += v[i];\n    return c;\n}\n</code></pre>\n\n<p>I noticed that sometimes this would return a result <strong>greater</strong> than n, which seemed impossible. The problem was that the bool array was uninitialized. Zeroing the array fixed the problem, but it still doesn't make sense to me how casting a bool to an int could produce something besides 0 or 1.</p>\n"}, {"tags": ["c", "sockets", "windows-7", "cygwin", "windows-xp"], "comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1443652894, "post_id": 32876609, "comment_id": 53584729, "body": "Is the client running on the same machine, or on the network?  If the client is on the network, did you remember to configure the firewall?"}, {"owner": {"reputation": 53, "user_id": 3888786, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1606784347/picture?type=large", "display_name": "Vikram Raghu", "link": "https://stackoverflow.com/users/3888786/vikram-raghu"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1443733651, "post_id": 32876609, "comment_id": 53623058, "body": "Sorry it took me a while to respond. I was pulled away yesterday for other work. I tried disabling the firewall today. Same issue."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1443737534, "post_id": 32876609, "comment_id": 53624429, "body": "I see you&#39;re only binding to only the first address/protocol you find; perhaps you&#39;re binding to IPv6 when the client is expecting IPv4, or perhaps you&#39;re binding to the wrong address, e.g., 127.0.0.1 or one of the tunnel adapters?  You can use <code>netstat -a -n -b</code> to check the binding, or add the appropriate diagnostics to your code."}, {"owner": {"reputation": 53, "user_id": 3888786, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1606784347/picture?type=large", "display_name": "Vikram Raghu", "link": "https://stackoverflow.com/users/3888786/vikram-raghu"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1444079118, "post_id": 32876609, "comment_id": 53740683, "body": "You were absolutely correct. Netstat did reveal the problem. I don&#39;t know why I was using the AF_UNSPEC family. I just changed it to AF_INET and it worked. Apparently Windows 7 gives preference to ipv6 over ipv4. Thanks a bunch. If you make an answer out of this I will mark it as accepted."}], "answers": [{"tags": [], "owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "is_accepted": true, "score": 0, "last_activity_date": 1444087891, "creation_date": 1444087891, "answer_id": 32959488, "question_id": 32876609, "link": "https://stackoverflow.com/questions/32876609/socket-programming-code-executes-on-xp-but-fails-on-windows-7/32959488#32959488", "title": "Socket programming code Executes on XP but fails on Windows 7", "body": "<p>If you're going to search for addresses to bind to, e.g., via getaddrinfo, you typically need to bind to all the addresses you find.  Otherwise, on machines with multiple adapters, your service will only be available on a single adapter chosen at random; and even if there is only a single adapter, you may bind to the wrong protocol (as in this case).</p>\n\n<p>I believe the usual approach is to instead bind to the \"any\" address, 0.0.0.0 in IPv4, as described in the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms737550(v=vs.85).aspx\" rel=\"nofollow\">documentation for bind</a>:</p>\n\n<blockquote>\n  <p>If an application does not care what local address is assigned, specify the constant value INADDR_ANY for an IPv4 local address or the constant value in6addr_any for an IPv6 local address in the sa_data member of the name parameter. </p>\n</blockquote>\n"}], "owner": {"reputation": 53, "user_id": 3888786, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1606784347/picture?type=large", "display_name": "Vikram Raghu", "link": "https://stackoverflow.com/users/3888786/vikram-raghu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 1, "accepted_answer_id": 32959488, "answer_count": 1, "score": 0, "last_activity_date": 1444087891, "creation_date": 1443652207, "question_id": 32876609, "link": "https://stackoverflow.com/questions/32876609/socket-programming-code-executes-on-xp-but-fails-on-windows-7", "title": "Socket programming code Executes on XP but fails on Windows 7", "body": "<p>First let me give you the objective of the code.\nIt is a udpserver and is supposed to provide statistics on the number of packets received and time taken etc etc. The client code is part of the company's embedded code and cannot be shared. Below is the code.</p>\n\n<pre><code>/*\n** listener.c -- a datagram sockets \"server\" demo\n*/\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;sys/select.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;time.h&gt;\n#include &lt;math.h&gt;\n#include \"windows.h\"\n\n#define MYPORT \"4950\"   // Default port number users will be connecting to\n\n#define MAXBUFLEN 1497 \n\n#define TIMEOUT_PERIOD_IN_SEC  5  /* Time out after the last packet reception */\n\n//#define DEBUG_ENABLE\n\n// get sockaddr, IPv4 or IPv6:\nvoid *get_in_addr(struct sockaddr *sa)\n{\n    if (sa-&gt;sa_family == AF_INET) {\n        return &amp;(((struct sockaddr_in*)sa)-&gt;sin_addr);\n    }\n\n    return &amp;(((struct sockaddr_in6*)sa)-&gt;sin6_addr);\n}\n\n\nint main(int argc, char *argv[]) \n{\n    int sockfd;\n    struct addrinfo hints, *servinfo, *p;\n    int rv;\n    int numbytes=0;\n    struct sockaddr_storage their_addr;\n    char buf[MAXBUFLEN];\n    socklen_t addr_len;\n    char s[INET6_ADDRSTRLEN];\n    int flag=1;\n    struct timeval tv;\n    fd_set rfds;\n    int retval;\n    long long  length = 0;\n    double   totalTxBits=0;\n    double   dataRate=0;\n\n        FILETIME   sysTime;\n        long long  startTime=0;\n        long long  endTime=0;\n        long long  timeDurationInMicSec;\n    long total_no_of_packets=0;\n    long expected_length=0;\n        char portNum[8];\n        int i;\n\n       switch(argc)\n       {\n       case 2:\n               {\n                   strncpy(portNum, argv[1],8);\n\n                   if((0==strcmp(portNum,\"-h\")) || (0==strcmp(portNum,\"h\")))\n                   {\n                       printf(\"\\r\\nUsage: \\r\\n\\t udpserver.exe [&lt;port num&gt;] [&lt;expected length(bytes)&gt;]\\r\\n\");\n                       printf(\"\\r\\nNote: All parameters are optional\\r\\n\");\n                       printf(\"\\r\\nExample: \\r\\n\\t i) udpserver.exe \\r\\n\");\n                       printf(\"\\n\\t ii) udpserver.exe 8000 \\r\\n\");\n                       printf(\"\\n\\t iii) udpserver.exe 8000 100000\\r\\n\");\n                       printf(\"\\n\\t iv) udpserver.exe 8000 100000 1400\\r\\n\");\n\n                       return 1;\n                   }\n\n                   // Make sure that argument contains nothing but digits\n                   for (i = 0; i &lt; strlen(portNum); i++)\n                   {\n                       if (!isdigit(portNum[i]))\n                       {\n                           printf(\"\\r\\n Invalid port number \\r\\n\");\n                           printf(\"\\r\\nUsage: \\r\\n\\t udpserver.exe [&lt;port num&gt;] [&lt;expected length&gt;]\\r\\n\");\n                            return 1;\n                       }\n                   }\n\n               }\n           break;\n\n       case 3:\n            {\n               strncpy(portNum, argv[1],8);\n\n               /* Make sure that argument contains nothing but digits */\n               for (i = 0; i &lt; strlen(portNum); i++)\n               {\n                   if (!isdigit(portNum[i]))\n                   {\n                       printf(\"\\r\\n Invalid port number \\r\\n\");\n                       return 1;\n                   }\n               }\n\n               printf(\"\\r\\nExpected length                 :%d \\r\\n\",atoi(argv[2]));\n               expected_length = atoi(argv[2]);\n            }\n        break;\n\n           case 4:\n            {\n               strncpy(portNum, argv[1],8);\n\n                /* Make sure that argument contains nothing but digits */\n               for (i = 0; i &lt; strlen(portNum); i++)\n               {\n                   if (!isdigit(portNum[i]))\n                   {\n                       printf(\"\\r\\n Invalid port number \\r\\n\");\n                       return 1;\n                   }\n               }\n\n\n               expected_length = atoi(argv[2]);\n               expected_length  = expected_length * atoi(argv[3]);\n               printf(\"\\r\\nExpected length                 :%d (%d x %d)\\r\\n\",expected_length,atoi(argv[2]),atoi(argv[3]));\n           }\n       break;\n\n       default:\n       {   \n           strcpy(portNum, MYPORT);\n               expected_length=0;\n       }\n       break;\n       }\n\n       printf(\"\\r\\nWaiting on port number          :%s \\r\\n\",portNum);\n\n       tv.tv_sec = TIMEOUT_PERIOD_IN_SEC; /* Time out after the last packet reception */\n       tv.tv_usec = 0;\n\n       memset(&amp;hints, 0, sizeof hints);\n       hints.ai_family = AF_UNSPEC; // set to AF_INET to force IPv4\n       hints.ai_socktype = SOCK_DGRAM;\n       hints.ai_flags = AI_PASSIVE; // use my IP\n\n       if ((rv = getaddrinfo(NULL, portNum, &amp;hints, &amp;servinfo)) != 0) {\n           fprintf(stderr, \"getaddrinfo: %s\\n\", gai_strerror(rv));\n       return 1;\n       }\n\n    // loop through all the results and bind to the first we can\n    for(p = servinfo; p != NULL; p = p-&gt;ai_next) {\n        if ((sockfd = socket(p-&gt;ai_family, p-&gt;ai_socktype,\n                p-&gt;ai_protocol)) == -1) {\n            perror(\"listener: socket\");\n            continue;\n        }\n\n        if (bind(sockfd, p-&gt;ai_addr, p-&gt;ai_addrlen) == -1) {\n            close(sockfd);\n            perror(\"listener: bind\");\n            continue;\n        }\n\n        break;\n    }\n\n    if (p == NULL) {\n        fprintf(stderr, \"listener: failed to bind socket\\n\");\n        return 2;\n    }\n\n    freeaddrinfo(servinfo);\n\n    total_no_of_packets=0;\n\n    while(flag)\n    {\n\n#ifdef DEBUG_ENABLE\n        printf(\"listener: waiting to recvfrom...\\n\");\n#endif /* DEBUG_ENABLE */\n\n        addr_len = sizeof their_addr;\n\n        if ((numbytes = recvfrom(sockfd, buf, MAXBUFLEN-1 , 0,\n            (struct sockaddr *)&amp;their_addr, &amp;addr_len)) == -1)\n        {\n            perror(\"recvfrom\");\n            exit(1);\n        }\n\n        total_no_of_packets++;\n\n#ifdef DEBUG_ENABLE\n        printf(\"listener: got packet from %s\\n\",\n        inet_ntop(their_addr.ss_family,\n        get_in_addr((struct sockaddr *)&amp;their_addr),\n        s, sizeof s));\n#endif /* DEBUG_ENABLE */\n\n        if (0==length)\n        {\n            GetSystemTimeAsFileTime(&amp;sysTime);\n            startTime = sysTime.dwHighDateTime;\n            startTime =  (startTime&lt;&lt;32) | sysTime.dwLowDateTime; /* number of 100-nanosecond intervals  */\n\n        }\n\n#ifdef DEBUG_ENABLE\n        printf(\"listener: packet is %d bytes long\\n\", numbytes);\n#endif /* DEBUG_ENABLE */\n        length+=numbytes;\n\n        #if 0\n        GetSystemTimeAsFileTime(&amp;sysTime);\n        endTime =sysTime.dwHighDateTime;\n        endTime =  (endTime&lt;&lt;32) | sysTime.dwLowDateTime; /* number of 100-nanosecond intervals  */\n        #endif\n\n        buf[numbytes] = '\\0';\n\n#ifdef DEBUG_ENABLE     \n        printf(\"listener: packet contains \\\"%s\\\"\\n\", buf);\n#endif /* DEBUG_ENABLE */\n\n        FD_ZERO(&amp;rfds);\n        FD_SET(sockfd, &amp;rfds);\n        retval = select(sockfd+1, &amp;rfds, NULL, NULL, &amp;tv);\n\n        if (retval == 0)\n        {   \n            GetSystemTimeAsFileTime(&amp;sysTime);\n                    endTime =sysTime.dwHighDateTime;\n            endTime =  (endTime&lt;&lt;32) | sysTime.dwLowDateTime; /* number of 100-nanosecond intervals  */\n                    timeDurationInMicSec  =(endTime - startTime) / (long long)10;\n\n                     /* Subtract the last time-out value  */\n                   if(timeDurationInMicSec)\n                   {\n                       timeDurationInMicSec -= ((long long)(TIMEOUT_PERIOD_IN_SEC *1000*1000));\n                   }\n\n                   printf(\"\\r\\n$Time taken                     :%ld micro sec\\r\\n\",timeDurationInMicSec);\n\n                   /* Convert to bits */\n                   totalTxBits = length*8;\n\n                   if(timeDurationInMicSec)\n                   {\n                       dataRate = (totalTxBits*1000*1000)/timeDurationInMicSec;\n                   }\n\n                   if(dataRate)\n                   {\n                       printf(\"$Number of packets recieved     :%lld\\r\\n\",(total_no_of_packets));\n                       printf(\"$Total number of bytes recieved :%lld\\r\\n\",(length));\n\n                       printf(\"\\r\\n$DataRate                       :%f bits per sec\\n\",dataRate);\n                       printf(\"\\r\\n$DataRate                       :%f kbps (kilo bits per sec)\\n\",(dataRate/1024));\n\n                       printf(\"\\r\\nNet throughput                  :%f mbps (mega bits per sec)\\n\",(dataRate/(1024*1024)));\n\n                       if(0 != expected_length)\n                       {\n                           if(expected_length &gt;= length)\n                           {\n                               printf(\"\\r\\nData loss                       :%lld bytes ( %f percentage)\",(expected_length - length), ((float)((expected_length - length)*100))/(float)expected_length);\n                           }\n                       }\n\n                   }\n                   else\n                   {\n                       printf(\"$Error: Unable to calculate throughput.\");\n                   }\n\n            break;\n        }\n\n    }\n\n    close(sockfd);\n    return 0;\n}\n</code></pre>\n\n<p>Now for the running environment.</p>\n\n<p>I ran the above code on Windows XP after compiling it using Cygwin to generate a .exe file. It works perfectly well there.\nHowever when I compiled it on a windows 7 machine (again using cygwin (setup_X86.exe file btw) it compiles perfectly well but while executing it debug shows that it only reaches the debug log </p>\n\n<pre><code>\"printf(\"listener: waiting to recvfrom...\\n\");\n</code></pre>\n\n<p>on line 191.</p>\n\n<p>I tried running the executable using XP SP3 compatibility and Administrator Privileges. I've tried to look online but I found no solution. Does anyone know if I've made a mistake during compilation? I did a simple </p>\n\n<pre><code>gcc -o udpserver.exe udpserver.c\n</code></pre>\n\n<p>and it was successful. Please let me know what I can do to further narrow down the problem. I'm still fairly new to socket programming and programming in genenral.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "qsort"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1443651625, "post_id": 32876471, "comment_id": 53584393, "body": "<a href=\"http://linux.die.net/man/3/qsort\" rel=\"nofollow noreferrer\">linux.die.net/man/3/qsort</a>"}, {"owner": {"reputation": 3331, "user_id": 2581593, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NtHku.jpg?s=128&g=1", "display_name": "zubergu", "link": "https://stackoverflow.com/users/2581593/zubergu"}, "edited": false, "score": 1, "creation_date": 1443651982, "post_id": 32876471, "comment_id": 53584482, "body": "Programming Pearls as language introductory book? Weird."}], "answers": [{"tags": [], "owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "is_accepted": true, "score": 4, "last_activity_date": 1443651744, "creation_date": 1443651744, "answer_id": 32876540, "question_id": 32876471, "link": "https://stackoverflow.com/questions/32876471/warning-when-trying-to-run-anagramjohn-bentley-programming-pearls-c/32876540#32876540", "title": "Warning when trying to run Anagram(John Bentley-Programming Pearls)-C", "body": "<p>The <a href=\"http://linux.die.net/man/3/qsort\" rel=\"nofollow\"><code>qsort()</code></a> function takes a comparison function as a fourth argument, with the following signature:</p>\n\n<pre><code>int (*compar)(const void *, const void *)\n</code></pre>\n\n<p>Therefore, to avoid compiler warnings, you have to modify you <code>charcomp()</code> function in the following way, to fit that signature:</p>\n\n<pre><code>int charcomp(const void *x, const void *y) { return *(char *)x - *(char *)y; }\n</code></pre>\n\n<p>Your <code>charcomp</code> function just takes two <code>char*</code> pointers to and compares first their first characters.</p>\n"}], "owner": {"reputation": 127, "user_id": 4710567, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fa91181bf7acbd63b71e68eea3fae570?s=128&d=identicon&r=PG&f=1", "display_name": "avcJav", "link": "https://stackoverflow.com/users/4710567/avcjav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "accepted_answer_id": 32876540, "answer_count": 1, "score": 1, "last_activity_date": 1443651938, "creation_date": 1443651317, "last_edit_date": 1443651938, "question_id": 32876471, "link": "https://stackoverflow.com/questions/32876471/warning-when-trying-to-run-anagramjohn-bentley-programming-pearls-c", "title": "Warning when trying to run Anagram(John Bentley-Programming Pearls)-C", "body": "<p>completely new to C. just trying to get the hang of linux and C programming by getting John Bentley's Anagram (column 2 I believe)program to run. Pretty sure ive copied this code verbatim(had to add headers, etc) but im receiving a warning, which when compiled and run with my squash.c program gives an undesired output. ill admit, i dont even know how this charcomp function behaves, or what it even does. (some enlightenment there would also be nice).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint charcomp(char *x, char *y) {return *x - *y;}\n\n#define WORD_MAX 100\nint main(void)\n{\n        char word[WORD_MAX], sig[WORD_MAX];\n        while (scanf(\"%s\", word) != EOF) {\n                strcpy(sig, word);\n                qsort(sig, strlen(sig), sizeof(char), charcomp);\n                printf(\"%s %s\\n\", sig, word);\n        }\n        return 0;\n}\n</code></pre>\n\n<p>Here's the warning.</p>\n\n<pre><code>sign.c:13:41: warning: incompatible pointer types passing 'int (char *, char *)'\n      to parameter of type '__compar_fn_t' (aka 'int (*)(const void *, const\n      void *)') [-Wincompatible-pointer-types]\n                qsort(sig, strlen(sig), sizeof(char), charcomp);\n                                                      ^~~~~~~~\n/usr/include/stdlib.h:766:20: note: passing argument to parameter '__compar'\n      here\n                   __compar_fn_t __compar) __nonnull ((1, 4));\n                                 ^\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 3207, "user_id": 4453678, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b1f2ad378f4eccf0df09d80d2f305e96?s=128&d=identicon&r=PG", "display_name": "Matthias Wimmer", "link": "https://stackoverflow.com/users/4453678/matthias-wimmer"}, "is_accepted": false, "score": 0, "last_activity_date": 1443648336, "creation_date": 1443648336, "answer_id": 32875894, "question_id": 32875828, "link": "https://stackoverflow.com/questions/32875828/i-have-to-free-rootvalue-but-how-do-i-do-that-before-returning-it/32875894#32875894", "title": "I have to &quot;free&quot; rootValue, but how do I do that before returning it?", "body": "<p>You can't return anything you freed. (Well you can do it, but it won't work.)</p>\n\n<p>State in your function contract, that the caller has to free the returned value after usage.</p>\n"}], "owner": {"reputation": 11, "user_id": 2964875, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ezLzE.png?s=128&g=1", "display_name": "cjmeyer96", "link": "https://stackoverflow.com/users/2964875/cjmeyer96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443648336, "creation_date": 1443647999, "question_id": 32875828, "link": "https://stackoverflow.com/questions/32875828/i-have-to-free-rootvalue-but-how-do-i-do-that-before-returning-it", "title": "I have to &quot;free&quot; rootValue, but how do I do that before returning it?", "body": "<pre><code>JSON_Value* createJSONObject()\n{\n    JSON_Value *rootValue = json_value_init_object();\n    JSON_Object *rootObject = json_value_get_object(rootValue);\n    return rootValue;\n}\n</code></pre>\n\n<p>I can't just return rootValue, because I need to use </p>\n\n<pre><code>json_value_free(rootValue);\n</code></pre>\n\n<p>otherwise the memory will stay open. How do I do this?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1443648058, "post_id": 32875822, "comment_id": 53583000, "body": "<code>for(j;</code> doesn&#39;t do anything. You can remove the <code>j</code> (I bet <code>-Wall</code> would have told you about this)."}, {"owner": {"reputation": 53, "user_id": 4864169, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d87b72a7aca2def696cfd6601711d06?s=128&d=identicon&r=PG&f=1", "display_name": "CrossNox", "link": "https://stackoverflow.com/users/4864169/crossnox"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1443648299, "post_id": 32875822, "comment_id": 53583086, "body": "Thanks for pointing that out!"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1443648900, "post_id": 32875822, "comment_id": 53583351, "body": "What does the <code>j+=n==d</code> part do in the for loop? If <code>+=</code> occurs first, then the equality test seems pointless. If <code>n==d</code> evaluates first then surely this is adding either <code>true</code> or <code>false</code> - is that adding <code>1</code> or <code>0</code>?"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1443649133, "post_id": 32875822, "comment_id": 53583433, "body": "@melpomene Why not put the <code>int j = 1</code> in that part of the for loop?"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1443649146, "post_id": 32875822, "comment_id": 53583437, "body": "Also why <code>n%d&lt;1</code> not <code>n%d==0</code>?"}, {"owner": {"reputation": 53, "user_id": 4864169, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d87b72a7aca2def696cfd6601711d06?s=128&d=identicon&r=PG&f=1", "display_name": "CrossNox", "link": "https://stackoverflow.com/users/4864169/crossnox"}, "edited": false, "score": 0, "creation_date": 1443649153, "post_id": 32875822, "comment_id": 53583443, "body": "Exactly, it adds 1 when that expression is true or 0 otherwise. So that it counts how many prime numbers it has found so far."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1443649200, "post_id": 32875822, "comment_id": 53583457, "body": "@user3728501 That makes the code longer."}, {"owner": {"reputation": 53, "user_id": 4864169, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d87b72a7aca2def696cfd6601711d06?s=128&d=identicon&r=PG&f=1", "display_name": "CrossNox", "link": "https://stackoverflow.com/users/4864169/crossnox"}, "reply_to_user": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1443649214, "post_id": 32875822, "comment_id": 53583463, "body": "@user3728501 not using int j=1 inside the loop to save characters, writing it shorter, same goes for your second question (only 1 char saved there)"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1443649261, "post_id": 32875822, "comment_id": 53583485, "body": "Oh right, I didn&#39;t realize the point was to minimize character usage. Seems like an odd question to ask on here."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1443649543, "post_id": 32875822, "comment_id": 53583615, "body": "@CrossNox is this also why you make use of the comma operator rather than using {} braces and semicolons to separate statements?"}, {"owner": {"reputation": 53, "user_id": 4864169, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d87b72a7aca2def696cfd6601711d06?s=128&d=identicon&r=PG&f=1", "display_name": "CrossNox", "link": "https://stackoverflow.com/users/4864169/crossnox"}, "reply_to_user": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1443650644, "post_id": 32875822, "comment_id": 53584061, "body": "@user3728501 Inside the ?: i didn&#39;t use semicolons because it&#39;s an expression that is evaluated, that&#39;s why the comma. Actually i never thought of using braces. But still, yes, it saves some chars with the comma."}, {"owner": {"reputation": 1002, "user_id": 4905637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5ce2af8214323986fb6f7568482e48?s=128&d=identicon&r=PG&f=1", "display_name": "Dleep", "link": "https://stackoverflow.com/users/4905637/dleep"}, "edited": false, "score": 0, "creation_date": 1443651750, "post_id": 32875822, "comment_id": 53584426, "body": "@CrossNox so there&#39;s no way to invert the tertiary operator without going back to 75 chars or more. BTW you can avoid using j since it does nothing but break the loop if it reaches i, so you can just decrease i instead. Try: <code>int h(int i){int n=2,d=2;for(;i-=n==d;)n%d&lt;1?n++,d=2:d++;return n;}&#47;&#47;67 chars</code>."}, {"owner": {"reputation": 53, "user_id": 4864169, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d87b72a7aca2def696cfd6601711d06?s=128&d=identicon&r=PG&f=1", "display_name": "CrossNox", "link": "https://stackoverflow.com/users/4864169/crossnox"}, "reply_to_user": {"reputation": 1002, "user_id": 4905637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5ce2af8214323986fb6f7568482e48?s=128&d=identicon&r=PG&f=1", "display_name": "Dleep", "link": "https://stackoverflow.com/users/4905637/dleep"}, "edited": false, "score": 0, "creation_date": 1443652395, "post_id": 32875822, "comment_id": 53584601, "body": "@Emisor that one works as well. The j thing had already been pointed out, but putting the decreasing in the second for parameter is genius... actually, i had no idea that could be done (rather never would have figured it out)"}], "answers": [{"tags": [], "owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "is_accepted": false, "score": 2, "last_activity_date": 1443648609, "last_edit_date": 1443648609, "creation_date": 1443648171, "answer_id": 32875863, "question_id": 32875822, "link": "https://stackoverflow.com/questions/32875822/c-operator-expression-equivalency/32875863#32875863", "title": "C: &quot;?:&quot; operator expression equivalency", "body": "<p>The ternary <code>?:</code> operator has <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow\">higher precedence</a> than the comma.  Thus,</p>\n\n<pre><code>n%d?d++:n++,d=2\n</code></pre>\n\n<p>gets parsed as:</p>\n\n<pre><code>(n % d ? d++ : n++), d = 2\n</code></pre>\n\n<p>which is not what you want.</p>\n\n<p>The reason it works in your first example is because there the comma is <em>between</em> the <code>?</code> and the <code>:</code>, which act as paired delimiters just like parentheses, curly braces and square brackets do.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 4864169, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d87b72a7aca2def696cfd6601711d06?s=128&d=identicon&r=PG&f=1", "display_name": "CrossNox", "link": "https://stackoverflow.com/users/4864169/crossnox"}, "edited": false, "score": 0, "creation_date": 1443648513, "post_id": 32875873, "comment_id": 53583182, "body": "So if i were to put it between brackets it would work?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443648709, "post_id": 32875873, "comment_id": 53583260, "body": "Add that to the answer"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1443648785, "last_edit_date": 1443648785, "creation_date": 1443648222, "answer_id": 32875873, "question_id": 32875822, "link": "https://stackoverflow.com/questions/32875822/c-operator-expression-equivalency/32875873#32875873", "title": "C: &quot;?:&quot; operator expression equivalency", "body": "<p>It's an issue of operator precedence. <code>?:</code> has higher precedence than <code>,</code>, so</p>\n\n<pre><code>A , B ? C : D , E\n</code></pre>\n\n<p>parses as</p>\n\n<pre><code>A , (B ? C : D) , E\n</code></pre>\n\n<p>However, this doesn't apply to the middle part of <code>?:</code> which works like it's surrounded by parens (because in a sense <code>?</code> ... <code>:</code> is a bracketing construct):</p>\n\n<pre><code>A ? B , C : D\n</code></pre>\n\n<p>parses as</p>\n\n<pre><code>A ? (B , C) : D\n</code></pre>\n\n<p>because that's the only thing it can do without being a syntax error.</p>\n\n<hr>\n\n<p>You can fix this by adding explicit parens:</p>\n\n<pre><code>n%d?d++:(n++,d=2);\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4864169, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d87b72a7aca2def696cfd6601711d06?s=128&d=identicon&r=PG&f=1", "display_name": "CrossNox", "link": "https://stackoverflow.com/users/4864169/crossnox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "accepted_answer_id": 32875873, "answer_count": 2, "score": 1, "last_activity_date": 1443648785, "creation_date": 1443647974, "question_id": 32875822, "link": "https://stackoverflow.com/questions/32875822/c-operator-expression-equivalency", "title": "C: &quot;?:&quot; operator expression equivalency", "body": "<p>A few days ago i wrote a function that'd receive an int n greater than 0 and return the nth prime number. I wondered how much shorter that could be wrote and i came up with this:</p>\n\n<pre><code>int f(int i){int n=2,d=2,j=1;for(j;j&lt;i;j+=n==d)n%d&lt;1?n++,d=2:d++;return n;}\n</code></pre>\n\n<p>Then i saw the n%d&lt;1 in the for and thought why not change it with just n%d and invert the order of the \"?:\" operator expressions, like this:</p>\n\n<pre><code>int g(int i){int n=2,d=2,j=1;for(j;j&lt;i;j+=n==d)n%d?d++:n++,d=2;return n;}\n</code></pre>\n\n<p>But it just doesn't work, it gets stuck in an infinite loop. The d=2 never actually happens, i think. Can anyone point me out why not or what to read to figure it out?</p>\n\n<p>If it's of any help, i'm running Ubuntu and compiling with gcc -std=c99 only.</p>\n"}, {"tags": ["c", "gcc", "compilation", "printf"], "answers": [{"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 2, "last_activity_date": 1443647632, "creation_date": 1443647632, "answer_id": 32875742, "question_id": 32875729, "link": "https://stackoverflow.com/questions/32875729/why-does-an-infinite-loop-block-a-printf-statement-earlier-in-my-c-program/32875742#32875742", "title": "Why does an infinite loop block a printf statement earlier in my C program?", "body": "<p>Add <code>fflush(stdout);</code> after your <code>printf</code> statement. <code>stdout</code> is usually line-buffered by default.</p>\n"}, {"tags": [], "owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": true, "score": 3, "last_activity_date": 1443647698, "creation_date": 1443647698, "answer_id": 32875760, "question_id": 32875729, "link": "https://stackoverflow.com/questions/32875729/why-does-an-infinite-loop-block-a-printf-statement-earlier-in-my-c-program/32875760#32875760", "title": "Why does an infinite loop block a printf statement earlier in my C program?", "body": "<p>It needs to flush the buffer.  Usually console output doesn't flush until it receives a <code>'\\n'</code>.</p>\n\n<p>There's a little-used function for this, <code>fflush()</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char const *argv[])\n{\n    printf(\"Done\");\n    fflush(stdout);\n    while (1) {}\n    return 0;\n}\n</code></pre>\n\n<p>That should print for you.</p>\n"}, {"tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": false, "score": 3, "last_activity_date": 1443647745, "creation_date": 1443647745, "answer_id": 32875775, "question_id": 32875729, "link": "https://stackoverflow.com/questions/32875729/why-does-an-infinite-loop-block-a-printf-statement-earlier-in-my-c-program/32875775#32875775", "title": "Why does an infinite loop block a printf statement earlier in my C program?", "body": "<p>stdout is buffered. It won't print until its flushed (e.g., but hitting a newline character). </p>\n\n<p>You could just add a <code>'\\n'</code> to your <code>printf</code> call:</p>\n\n<pre><code>printf(\"Done\\n\");\n</code></pre>\n\n<p>Or disable its buffing by calling </p>\n\n<pre><code>setbuf(stdout, NULL);\n</code></pre>\n"}], "owner": {"reputation": 1833, "user_id": 1064565, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/78fccb87609688340853e58676c0a7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Jamie", "link": "https://stackoverflow.com/users/1064565/jamie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "closed_date": 1443647875, "accepted_answer_id": 32875760, "answer_count": 3, "score": -1, "last_activity_date": 1443647778, "creation_date": 1443647576, "last_edit_date": 1443647778, "question_id": 32875729, "link": "https://stackoverflow.com/questions/32875729/why-does-an-infinite-loop-block-a-printf-statement-earlier-in-my-c-program", "closed_reason": "Duplicate", "title": "Why does an infinite loop block a printf statement earlier in my C program?", "body": "<p>This C program prints <code>Done</code>, then enters an infinite loop.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char const *argv[])\n{\n    printf(\"Done\");\n    while (1) {}\n    return 0;\n}\n</code></pre>\n\n<p>But when I run it, this code does <em>not</em> print <code>Done</code>. Why is that?</p>\n"}, {"tags": ["c", "memory", "segmentation-fault", "void-pointers", "coredump"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1443647242, "post_id": 32875500, "comment_id": 53582642, "body": "<code>list-&gt;head-&gt;next = newObj;</code> if(list-&gt;head == NULL) ==&gt; <code>NULL-&gt;next = newObj;</code>. also <code>list-&gt;head</code> isn&#39;t initialize."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1443647976, "post_id": 32875500, "comment_id": 53582966, "body": "Pro-tip: in your first year(s) of C, don&#39;t use typedef. It would only confuse you."}, {"owner": {"reputation": 2969, "user_id": 3187995, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98df6434e724d62ad3c225a9bac5e0bf?s=128&d=identicon&r=PG&f=1", "display_name": "o.o", "link": "https://stackoverflow.com/users/3187995/o-o"}, "edited": false, "score": 0, "creation_date": 1443648354, "post_id": 32875500, "comment_id": 53583108, "body": "Thanks, I forgot initialize head. Added that in but still no luck. I also have to use typedef, assignment has typedef in it. My code I posted is not part of it but it&#39;s similar."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1443648597, "post_id": 32875500, "comment_id": 53583217, "body": "in the struct Node definition: <code>void *next;</code> is bad practice, it will suppress type checking, and thus strong typing. (you could, for instance do <code>struct Node *p= malloc(sizeof *p) ; p-&gt;next = &quot;Hello, world\\n&quot;;</code> , without any warning or error from the compiler."}, {"owner": {"reputation": 1230, "user_id": 3426593, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/957db22f4278d5267298392460bc6bbf?s=128&d=identicon&r=PG", "display_name": "tpdietz", "link": "https://stackoverflow.com/users/3426593/tpdietz"}, "edited": false, "score": 0, "creation_date": 1443648696, "post_id": 32875500, "comment_id": 53583255, "body": "You never initialize the list head.  You need to before you try and access it."}], "answers": [{"tags": [], "owner": {"reputation": 129, "user_id": 5386223, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153613209708618/picture?type=large", "display_name": "Aram Antonyan", "link": "https://stackoverflow.com/users/5386223/aram-antonyan"}, "is_accepted": false, "score": 1, "last_activity_date": 1443647433, "creation_date": 1443647433, "answer_id": 32875704, "question_id": 32875500, "link": "https://stackoverflow.com/questions/32875500/c-segmentation-fault-core-dumped-linked-list/32875704#32875704", "title": "C Segmentation Fault (core dumped) Linked List", "body": "<p>You check if <code>list-&gt;head</code> is NULL and then do some operations with that. Change that to <code>if(list-&gt;head != NULL)\n{\n...\n}</code></p>\n"}, {"comments": [{"owner": {"reputation": 2969, "user_id": 3187995, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98df6434e724d62ad3c225a9bac5e0bf?s=128&d=identicon&r=PG&f=1", "display_name": "o.o", "link": "https://stackoverflow.com/users/3187995/o-o"}, "edited": false, "score": 0, "creation_date": 1443648047, "post_id": 32875772, "comment_id": 53582994, "body": "Are you saying I should use <code>memset()</code> after <code>mallo()</code>? In Java, when you make a singly-linked list, you have a self referential node. For example, <code>public class Node { Node link; int value; }</code>. This is why I did <code>newObj-&gt;next = (NodePtr) newObj-&gt;next</code>. I wanted next to be self referential like in Java. Also you&#39;re right, I was trying to do list-&gt;head-&gt;next == NULL. How would I make it self referential like in Java?"}, {"owner": {"reputation": 11, "user_id": 5394988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3000bfa399feaacf7b046806acbf9aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Teunis Peters", "link": "https://stackoverflow.com/users/5394988/teunis-peters"}, "reply_to_user": {"reputation": 2969, "user_id": 3187995, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98df6434e724d62ad3c225a9bac5e0bf?s=128&d=identicon&r=PG&f=1", "display_name": "o.o", "link": "https://stackoverflow.com/users/3187995/o-o"}, "edited": false, "score": 1, "creation_date": 1443648611, "post_id": 32875772, "comment_id": 53583223, "body": "memset works.  On most platforms NULL=0.  (that&#39;s a gotcha too, but not usually terribly important).    Self reference is newObj-&gt;next = newObj;    But why self referenced?   Does that mean for (listIter=list-&gt;head;  listiter!=listiter-&gt;next; listiter = listiter-&gt;next) is the style of iteration you want?  (where listiter is a NodePtr)"}, {"owner": {"reputation": 2969, "user_id": 3187995, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98df6434e724d62ad3c225a9bac5e0bf?s=128&d=identicon&r=PG&f=1", "display_name": "o.o", "link": "https://stackoverflow.com/users/3187995/o-o"}, "edited": false, "score": 0, "creation_date": 1443649341, "post_id": 32875772, "comment_id": 53583523, "body": "For self reference I mean I want <code>void *next</code> to be <code>NodePtr next</code>. However, I can&#39;t write that in the Node struct, so I tried to do it outside."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 2969, "user_id": 3187995, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98df6434e724d62ad3c225a9bac5e0bf?s=128&d=identicon&r=PG&f=1", "display_name": "o.o", "link": "https://stackoverflow.com/users/3187995/o-o"}, "edited": false, "score": 1, "creation_date": 1443650438, "post_id": 32875772, "comment_id": 53583985, "body": "@Maru : there are three ways to avoid that: 1) <code>struct Node *next;</code> 2) a typedef on an incomplete type 0) don&#39;t use typedef (see my 1st comment)"}, {"owner": {"reputation": 2969, "user_id": 3187995, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98df6434e724d62ad3c225a9bac5e0bf?s=128&d=identicon&r=PG&f=1", "display_name": "o.o", "link": "https://stackoverflow.com/users/3187995/o-o"}, "edited": false, "score": 0, "creation_date": 1443651078, "post_id": 32875772, "comment_id": 53584209, "body": "Thanks! Learned something new. Although, I still need to use typedef outside of the struct because my professor wants us to use it."}, {"owner": {"reputation": 11, "user_id": 5394988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3000bfa399feaacf7b046806acbf9aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Teunis Peters", "link": "https://stackoverflow.com/users/5394988/teunis-peters"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1443651325, "post_id": 32875772, "comment_id": 53584289, "body": "<code>typedef struct Node* NodePtr; struct Node {         NodePtr next;         void *val; };</code> Should work - that&#39;d be (2) typedef on an incomplete type as per @wildplasser"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 2969, "user_id": 3187995, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98df6434e724d62ad3c225a9bac5e0bf?s=128&d=identicon&r=PG&f=1", "display_name": "o.o", "link": "https://stackoverflow.com/users/3187995/o-o"}, "edited": false, "score": 0, "creation_date": 1443653437, "post_id": 32875772, "comment_id": 53584906, "body": "@Maru : find another professor. Or ignore his advice after you finished school..."}], "tags": [], "owner": {"reputation": 11, "user_id": 5394988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3000bfa399feaacf7b046806acbf9aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Teunis Peters", "link": "https://stackoverflow.com/users/5394988/teunis-peters"}, "is_accepted": false, "score": 1, "last_activity_date": 1443647735, "creation_date": 1443647735, "answer_id": 32875772, "question_id": 32875500, "link": "https://stackoverflow.com/questions/32875500/c-segmentation-fault-core-dumped-linked-list/32875772#32875772", "title": "C Segmentation Fault (core dumped) Linked List", "body": "<p>At a thought, malloc does not guarantee allocated memory is empty.  It's good practice to set all values where they matter after allocation.\nlist->head is probably not null</p>\n\n<p>also :  newObj->next = (NodePtr) newObj->next;\ndoesn't set to a rational value, it sets to whatever memory was set - were you intending newObj->next = (NodePtr) newObj;  ?</p>\n\n<p>list->head should not be referenced if null.  list->head->next will only be valid if it's not null.</p>\n\n<p>if you actually want to build a list,</p>\n\n<pre><code>newObj-&gt;val = obj;\nif (list-&gt;head == NULL) { newObj-&gt;next = list-&gt;head; }\nlist-&gt;head = newObj;\n</code></pre>\n\n<p>either that or travel down list->head->next chain until next is null, and set that to be newObj->next.  If that way then it's possibly a good idea, newObj->next should be set to NULL and not itself.</p>\n\n<p>Might want to figure out how your list will behave - is it circular?  does it grow from the head (list->head) or tail (last ->next) ?    Do you spot the tail when listObject->next == NULL or when listObject->next == listObject ?</p>\n"}, {"comments": [{"owner": {"reputation": 2969, "user_id": 3187995, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98df6434e724d62ad3c225a9bac5e0bf?s=128&d=identicon&r=PG&f=1", "display_name": "o.o", "link": "https://stackoverflow.com/users/3187995/o-o"}, "edited": false, "score": 0, "creation_date": 1443651037, "post_id": 32875774, "comment_id": 53584196, "body": "Thanks, this worked and I finally understand everyone else too."}], "tags": [], "owner": {"reputation": 44, "user_id": 4221376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fBAs9.jpg?s=128&g=1", "display_name": "Bryan S.", "link": "https://stackoverflow.com/users/4221376/bryan-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1443649110, "last_edit_date": 1443649110, "creation_date": 1443647741, "answer_id": 32875774, "question_id": 32875500, "link": "https://stackoverflow.com/questions/32875500/c-segmentation-fault-core-dumped-linked-list/32875774#32875774", "title": "C Segmentation Fault (core dumped) Linked List", "body": "<p>Just put this together, runs fine.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n\nstruct Node {\n        void *next;\n        void *val;\n};\ntypedef struct Node* NodePtr;\n\nstruct List {\n    NodePtr head;\n};\ntypedef struct List* ListPtr;\n\nListPtr CreateList() {\n    ListPtr ptr = malloc(sizeof(struct List));\n    return ptr;\n}\n\nvoid Insert(ListPtr list, void *obj) {\n        // create and initialize new node\n    NodePtr newObj = malloc(sizeof(struct Node));\n    newObj-&gt;val = obj;\n    newObj-&gt;next = NULL;\n\n    //Point to beginning of list\n    NodePtr curr = list-&gt;head;\n    // Add node to the list\n    if(curr == NULL) // if no head node, make newObj the head node\n    {\n        list-&gt;head = newObj;\n    }\n    else{ // otherwise traverse the list until you find the last node (the one that points to a null as the next)\n        while(1) {\n                if(curr-&gt;next != NULL) {\n                        curr = curr -&gt; next;\n                } else {\n                        curr-&gt;next = newObj;\n                }\n                list-&gt;head = newObj;\n                newObj-&gt;val = obj;\n                list-&gt;head-&gt;next = newObj;\n                newObj-&gt;next = NULL;\n        }\n    }\n}\nint main() {\n    int x = 2;\n    int *p = &amp;x;\n\n    ListPtr thing = CreateList();\n\n    Insert(thing, p);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 1, "last_activity_date": 1443658802, "creation_date": 1443658802, "answer_id": 32877623, "question_id": 32875500, "link": "https://stackoverflow.com/questions/32875500/c-segmentation-fault-core-dumped-linked-list/32877623#32877623", "title": "C Segmentation Fault (core dumped) Linked List", "body": "<p>I realize that this answer is mostly stylistic. But I do think that (bad) style and (bad) habits are an (important) part of (bad) programming. Summing it up ...</p>\n\n<hr>\n\n<ul>\n<li>(in most cases) typedefs are not needed; they just introduce an alias for something that already existed.</li>\n<li>[rule of seven] human readers have a limited amount of identifiers (\"names\") that they can keep track of. This could be 7. Minimising the number of distinct words makes reading easier.</li>\n<li>also, the reader has to remember that xPtr and xNode are <em>related</em> (typeof *xPtr === typeof xNode)</li>\n<li>when reading source code, keywords and special character tokens (such as operators) don't <em>count</em> as an identifier, since you do not have to remember them. (Syntax-highligting helps, too)</li>\n<li>if there is only one way of expressing your program, there is no possibility for errors like <code>iPtr *p; p = (qPtr) malloc (sizeof xNode);</code></li>\n<li>creating yet another struct (+typedefs for it), just to accomodate a <em>root</em> pointer will clobber up your mental namespace even more.</li>\n</ul>\n\n<p>Now a rework of the (intended) code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct node {\n    struct node *next;\n    void *payload;\n    };\n\nstruct node *root=NULL;\n\nvoid initialize() { /* nothing .... */ }\n\nint insert(struct node **pp, void *pv) {\n   struct node *p;\n\n   p = malloc(sizeof *p);\n   if (!p) { /* handle error */ return -1; }\n\n   p-&gt;payload = pv;\n   p-&gt;next = *pp;\n   *pp = p;\n   return 1; /* inserted one element */\n }\n\nint main(void)\n{\nint i;\n\ni=666;\n\n /* note: this function call will pass a pointer to a local variable `i`\n ** to the insert() function, which will remember it.\n ** This is generally a bad idea, to say the least.\n */\ninsert( &amp;root, &amp;i);\n\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2969, "user_id": 3187995, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98df6434e724d62ad3c225a9bac5e0bf?s=128&d=identicon&r=PG&f=1", "display_name": "o.o", "link": "https://stackoverflow.com/users/3187995/o-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "accepted_answer_id": 32875774, "answer_count": 4, "score": 0, "last_activity_date": 1443658802, "creation_date": 1443646719, "question_id": 32875500, "link": "https://stackoverflow.com/questions/32875500/c-segmentation-fault-core-dumped-linked-list", "title": "C Segmentation Fault (core dumped) Linked List", "body": "<p>I keep getting <code>Segmentation Fault (core dumped)</code> run time error and I can't figure out why.</p>\n\n<p>My code:</p>\n\n<pre><code>struct Node\n{\n    void *next;\n    void *val;\n};\ntypedef struct Node* NodePtr;\n\nstruct List\n{\n    NodePtr head;\n};\ntypedef struct List* ListPtr;\n\nListPtr create()\n{\n    ListPtr ptr = malloc(sizeof(struct List));\n\n    return ptr;\n}\n\nint insert(ListPtr list, void *obj)\n{\n    NodePtr newObj = malloc(sizeof(struct Node));\n\n    //Cast next as a self referencing Node\n    newObj-&gt;next = (NodePtr) newObj-&gt;next;\n\n    //Point to beginning of list\n    NodePtr current = list-&gt;head;\n\n    if(list-&gt;head == NULL)\n    {\n        newObj-&gt;val = obj;\n        list-&gt;head-&gt;next = newObj;\n        newObj-&gt;next = NULL;\n\n        return 1;\n    }\n\n    return 0;\n}\n\nint main(int argc, char *argv[])\n{\n    int x = 2;\n    int *p = &amp;x;\n\n    ListPtr thing = create();\n\n    insert(thing, p);\n\n    return 0;\n}\n</code></pre>\n\n<p>The error is here:  <code>list-&gt;head-&gt;next = newObj</code> after some debugging. I thought I had to allocate memory for list->head->next, but when I added the code in for that it still gave me the same error. Am I casting it wrong or not allocating memory correctly? Any help would be appreciated, thanks!</p>\n"}, {"tags": ["c", "sockets", "server", "client", "client-server"], "comments": [{"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "edited": false, "score": 0, "creation_date": 1443649798, "post_id": 32875439, "comment_id": 53583724, "body": "What do you mean &quot;frames&quot;? Ethernet frames? TCP packets? What about variable for IP? Do you want to know how to enter that IP from console?"}, {"owner": {"reputation": 307, "user_id": 4309944, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/581455538/picture?type=large", "display_name": "Zok", "link": "https://stackoverflow.com/users/4309944/zok"}, "reply_to_user": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "edited": false, "score": 0, "creation_date": 1443650500, "post_id": 32875439, "comment_id": 53584009, "body": "Well when I send a message from Client to server it prints on the console  Sending the message 127.0.0.1:58482 : Transmission of frame 0 (31 bytes) 127.0.0.1:58482 : Activation of timeout 1000ms 127.0.0.1:58482 : Received. And on the Server side it shows  127.0.0.1:58482 : Received the transmission of frame 0 (4 bytes) 127.0.0.1:58482 : Acquittement of transmission frame 0 127.0.0.1:58482 : Accepted Received of command:TEST. I think we can show these info by using the send() and receive functions?  And yeah I scan the Port using and integer by scanf , then I want to use another variable for IP"}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 4309944, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/581455538/picture?type=large", "display_name": "Zok", "link": "https://stackoverflow.com/users/4309944/zok"}, "edited": false, "score": 0, "creation_date": 1443661172, "post_id": 32876922, "comment_id": 53586777, "body": "Thank you so much for the informations you provided , you really helped me.  the IP works now and tomorrow I will read the posts and try to do the same :) and if I face any problems I will post here"}], "tags": [], "owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "is_accepted": true, "score": 0, "last_activity_date": 1443654254, "last_edit_date": 1495541034, "creation_date": 1443654254, "answer_id": 32876922, "question_id": 32875439, "link": "https://stackoverflow.com/questions/32875439/how-to-enter-an-ip-address-manually-in-socket-programming-and-how-to-print-trace/32876922#32876922", "title": "How to enter an IP address manually in Socket Programming and how to print traces?", "body": "<p>It is simpler part with variable for IP. You can use char array with fixed size 16 to avoid dynamic memory allocation, since 16 bytes is enough to store string with valid IPv4 address (for example \"255.255.255.255\" - 3 dots + 12 digits + 1 null symbol terminating string).</p>\n\n<p>The code for reading IP:</p>\n\n<pre><code>char ip[16];\nscanf(\"%15s\", ip);\n/* if needed it is possible to write some function for validation of\n * enetered string to check that it is valid IP address string: 4 decimal\n * numbers in range 0...255 separated by dots */\n/* ... */\nservaddr.sin_addr.s_addr = inet_addr(ip);\n</code></pre>\n\n<p>The string <code>\"%15s\"</code> in <code>scanf</code> means that we want to read a null terminated string <code>s</code> and its lenght should be maximum 15 characters (+1 for null is not counted in that number).</p>\n\n<p>Regarding frames at first I though that you want to capture separate packets. However, now it looks that you want just reguaral client-server communation using TCP sockets with some prints about activities.</p>\n\n<p>Let's consider client as an example. You already have connected state. The next you should prepare data buffer to send. Before sending you can print \"Transmission of frame...\".</p>\n\n<p>Then you should prepare for timeout. That is here <a href=\"https://stackoverflow.com/questions/4181784/how-to-set-socket-timeout-in-c-when-making-multiple-connections\">How to set socket timeout in C when making multiple connections?</a> (the answer <a href=\"https://stackoverflow.com/a/4182564/4023446\">https://stackoverflow.com/a/4182564/4023446</a>). You can print \"Activation of timeout 1000ms\".</p>\n\n<p>Data sending <code>send()</code>. This function returns number of sent bytes. So, if that number is equal with number of data that you was sending it is possible to print \"Sent\".</p>\n\n<p>Similarly it is possible to describe read operations on server by phrases according to stages: connected, reading (also possible with timeout), received: \"TEST\".</p>\n"}], "owner": {"reputation": 307, "user_id": 4309944, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/581455538/picture?type=large", "display_name": "Zok", "link": "https://stackoverflow.com/users/4309944/zok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3165, "favorite_count": 0, "accepted_answer_id": 32876922, "answer_count": 1, "score": 0, "last_activity_date": 1443830989, "creation_date": 1443646459, "question_id": 32875439, "link": "https://stackoverflow.com/questions/32875439/how-to-enter-an-ip-address-manually-in-socket-programming-and-how-to-print-trace", "title": "How to enter an IP address manually in Socket Programming and how to print traces?", "body": "<p>I am working on a project where I have to do a program Client/Server where I have to test the connection , send/receive files and list all the files saved on the server.</p>\n\n<p>I am on the first step , and I am asked to enter manually the port number and the IP address and I am blocked on the IP address declaration..</p>\n\n<p>There is my code </p>\n\n<pre><code>void connection(){  \n    int port;\n    int sockfd,connfd;\n    struct sockaddr_in servaddr,cli;\n    sockfd=socket(AF_INET,SOCK_STREAM,0);\nif(sockfd==-1)\n{\n    printf(\"socket creation failed...\\n\");\n    exit(0);\n}\nelse\n    printf(\"Socket successfully created..\\n\");\n    printf(\"Enter Port Number \\n\");\n    scanf(\"%d\",&amp;port);\n    bzero(&amp;servaddr,sizeof(servaddr));\n    servaddr.sin_family=AF_INET;\n    servaddr.sin_addr.s_addr=inet_addr(\"127.0.0.1\");\n    servaddr.sin_port=htons(port);\nif(connect(sockfd,(SA *)&amp;servaddr,sizeof(servaddr))!=0)\n{\n    printf(\"connection with the server failed...\\n\");\n    printf(\"Program Closed\\n\");\n    exit(0);\n}\nelse\n    printf(\"connected to the server..\\n\");\n    printf(\"listening from Server\\n\");\n    func(sockfd);\n    close(sockfd);}\n</code></pre>\n\n<p>Now If I want to declare a variable and put my IP \"127.0.0.1\" in it and use it in this line <code>servaddr.sin_addr.s_addr=inet_addr</code> ?</p>\n\n<p>And after establishing the connection to the server, I am able to send and receieve messages , but I want to show the traces (Frames) with their size in bytes etc.\nAny idea?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c", "malloc", "realloc"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1443646440, "post_id": 32875342, "comment_id": 53582275, "body": "And what was the output of <code>printf(&quot;Size is now %lu\\n&quot;, size);</code> and other <code>printf()</code>?"}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 1, "creation_date": 1443646550, "post_id": 32875342, "comment_id": 53582330, "body": "With <code>m</code> and <code>a</code> being (unsigned) integers, <code>m &#47; a</code> is always &#39;floored&#39; (technically truncated, but with them always positive it&#39;s equivalent to flooring), so using <code>floor</code> and the cast aren&#39;t necessary. Also: no need to <a href=\"http://stackoverflow.com/a/605858/249237\">cast the result of <code>malloc</code></a> or <code>realloc</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443646862, "post_id": 32875342, "comment_id": 53582477, "body": "<code>q</code>, as <code>#define q    (unsigned long) floor(m &#47; a)</code> is scary.  Although not used in posted code, I would use <code>#define q   ((unsigned long) floor(m &#47; a))</code> to prevent unexpected precedence rule effects."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1443646953, "post_id": 32875342, "comment_id": 53582517, "body": "When reallocating, you need a pointer to pointer. (multipliers is a pointer) The initialise function does this correct. Since you already have a global pointer, it is maybe better <i>not</i> to pass (a pointer to) it as a argument to the resize function?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1443647203, "post_id": 32875342, "comment_id": 53582624, "body": "@wildplasser Nice. <code>multipliers</code> in <code>add(x, multipliers);</code> is not updated."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1443647404, "post_id": 32875342, "comment_id": 53582704, "body": "BTW: The argument shadows the global name, too. Just removing the argument from the function &quot;signature&quot; would possibly make things work."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1443648190, "post_id": 32875342, "comment_id": 53583050, "body": "i guess you want to have <code>elements</code> and <code>size</code> and the array inside of a <code>struct</code>. otherwise it doesn&#39;t make sense to just pass the array around while having its related data to be global."}], "answers": [{"tags": [], "owner": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "is_accepted": false, "score": 4, "last_activity_date": 1443647655, "creation_date": 1443647655, "answer_id": 32875748, "question_id": 32875342, "link": "https://stackoverflow.com/questions/32875342/realloc-initially-works-then-returns-null-after-several-repetitions/32875748#32875748", "title": "Realloc initially works, then returns null after several repetitions", "body": "<p>Here's the problematic part of your code:</p>\n\n<blockquote>\n<pre><code>void add(unsigned long element, unsigned long *multipliers) {\n        n_vector = realloc(multipliers, sizeof(unsigned long) * size);\n        multipliers = n_vector;\n}\n</code></pre>\n</blockquote>\n\n<p>On entry, <code>multipliers</code> is a pointer to a buffer allocated by <code>malloc</code>. You call <code>realloc</code>, which returns the new address of the buffer. The new address may or may not be equal to the old one. You then set the <strong>local</strong> variable <code>multipliers</code> to the new address. But that's a local variable. When the function returns, the new address is not stored anywhere. The caller of this function (the <code>compute</code> function) is still using the old address.</p>\n\n<p>After the first call to <code>realloc</code> that changes the address, you might initially not notice anything, because the old address still has the old content; but when you write past the old end, you're potentially overwriting data structures used by the memory management system. At the point where you call <code>realloc</code> again, the parameter that you pass to it is the address of the old buffer, which, at this point, no longer points to a buffer that <code>malloc</code>/<code>realloc</code> are managing. At this point, all hell breaks loose.</p>\n\n<p>Solution: <code>add</code> needs to return the new address to its caller. Either make it return it (you can since it's currently returning nothing), or pass the <code>multipliers</code> pointer to it as a reference rather than a value \u2014\u00a0in other words, in C, make the argument a pointer to a pointer. Here are the main relevant lines in the second approach:</p>\n\n<pre><code>void add(unsigned long element, unsigned long **multipliers) {\n    \u2026\n    n_vector = realloc(*multipliers, sizeof(unsigned long) * size);\n    if (n_vector == NULL) {\n        \u2026 // error handling\n    } else {\n        *multipliers = n_vector;\n    }\n}\n\nvoid compute() {\n     \u2026\n     add(x, &amp;multipliers);\n     \u2026\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5310195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caf9030cbdd48deb92a8a25874537e64?s=128&d=identicon&r=PG&f=1", "display_name": "Klin", "link": "https://stackoverflow.com/users/5310195/klin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443647655, "creation_date": 1443646023, "question_id": 32875342, "link": "https://stackoverflow.com/questions/32875342/realloc-initially-works-then-returns-null-after-several-repetitions", "title": "Realloc initially works, then returns null after several repetitions", "body": "<p>Realloc initially works for array sizes 200 and 400, but then unexpectedly returns null at size 800 for reasons I cannot parse.</p>\n\n<p>Unsigned long ints in use because of that massive m value and are very much necessary. Probably.</p>\n\n<p>I'm embarrassingly bad at C.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n/* Macros */\n#define m    4294967161\n#define a    2\n#define r    (m % a)\n#define q    (unsigned long) floor(m / a)\n\n/* Method stubs */\n[snip]\n\n/* Initial array settings */\nunsigned long elements = 0;   // Number of elements in the array.\nunsigned long size = 100;     // Dynamically allocated size of the array.\n\n/* Evaluates g(x) = ax mod m with no values &gt; m - 1 */\nunsigned long g(unsigned long x) {\n    [snip]\n}\n\nunsigned long compute() {\n    unsigned long i = 1;\n    unsigned long x = a;\n    unsigned long j = 0;\n    unsigned long *multipliers = 0;\n    initialize(&amp;multipliers);\n\n    while (x != 1) {\n        if (((m % x) &lt; (m / x)) &amp;&amp; (gcd(i, m - 1) == 1)) {\n            add(x, multipliers);\n            j++;\n        }\n        i++;\n        x = g(x);\n    }\n}\n\n/* Initialize array. */\nvoid initialize(unsigned long **multipliers) {\n    *multipliers = (unsigned long *)malloc(sizeof(unsigned long) * size);\n}\n\n/* Add element to an array. */\nvoid add(unsigned long element, unsigned long *multipliers) {\n    if (elements &gt;= size) {\n        printf(\"Inside elements &gt;= size check.\\n\");\n        size = size * 2;\n        printf(\"Size is now %lu\\n\", size);\n        unsigned long *n_vector = NULL;\n        n_vector = (unsigned long *)realloc(multipliers, sizeof(unsigned long) * size);\n        printf(\"Reallocated.\\n\");\n\n        if (n_vector != NULL) {\n            printf(\"Copying n_vector to multipliers.\\n\");\n            multipliers = n_vector;\n        }\n        else\n            printf(\"n_vector is null.\\n\");\n    }\n    multipliers[elements++] = element;\n    return;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "macos", "webkit", "gtk"], "comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1443671114, "post_id": 32875266, "comment_id": 53588961, "body": "There are two different versions of WebKitGTK, confusingly called WebKitGTK (which I&#39;ll call WebKit1 here) and WebKit2GTK. They are both maintained (as far as I know), and have subtle but important differences. The function <code>webkit_uri_request_new()</code> is only in WebKit2GTK, but you&#39;re using WebKit1. There are two things you can do: either switch your code to WebKit1 or find a WebKit2GTK. Here are the documentation entry points for <a href=\"http://webkitgtk.org/reference/webkitgtk/stable/\" rel=\"nofollow noreferrer\">WebKit1</a> and <a href=\"http://webkitgtk.org/reference/webkit2gtk/stable/\" rel=\"nofollow noreferrer\">WebKit2GTK</a>."}, {"owner": {"reputation": 1943, "user_id": 1391824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20b30c131f358c299e7b5c89870c3761?s=128&d=identicon&r=PG", "display_name": "TingPing", "link": "https://stackoverflow.com/users/1391824/tingping"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 1, "creation_date": 1443704068, "post_id": 32875266, "comment_id": 53605971, "body": "@andlabs do note that WebKit2GTK does not support OSX yet."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 4761506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/987726e7d342c04caca1a12a3cfd5ea1?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Boucher", "link": "https://stackoverflow.com/users/4761506/olivier-boucher"}, "is_accepted": true, "score": 0, "last_activity_date": 1443726324, "creation_date": 1443726324, "answer_id": 32895001, "question_id": 32875266, "link": "https://stackoverflow.com/questions/32875266/c-c-clang-linking-error-on-mac-osx-webkitgtk/32895001#32895001", "title": "c/c++ clang linking error on Mac OSX - webkitgtk", "body": "<p>The problem is that I was using<br>\n<code>pkg_check_modules(WEBKIT REQUIRED webkitgtk-3.0)</code><br>\ninstead of<br>\n<code>pkg_check_modules(WEBKIT REQUIRED webkit2gtk-3.0)</code>  </p>\n"}], "owner": {"reputation": 36, "user_id": 4761506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/987726e7d342c04caca1a12a3cfd5ea1?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Boucher", "link": "https://stackoverflow.com/users/4761506/olivier-boucher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "accepted_answer_id": 32895001, "answer_count": 1, "score": 0, "last_activity_date": 1443726324, "creation_date": 1443645758, "question_id": 32875266, "link": "https://stackoverflow.com/questions/32875266/c-c-clang-linking-error-on-mac-osx-webkitgtk", "title": "c/c++ clang linking error on Mac OSX - webkitgtk", "body": "<p>I am trying to use GTK3 and WebKitGTK. I am successful at running the following code :</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n#include &lt;webkit2/webkit2.h&gt;\n#include &lt;JavaScriptCore/JavaScript.h&gt;\n\nusing namespace std;\n\nstatic void destroyWindowCb(GtkWidget* widget, GtkWidget* window);\nstatic gboolean closeWebViewCb(WebKitWebView* webView, GtkWidget* window);\n\nint main(int argc, char* argv[])\n{\n// Initialize GTK+\ngtk_init(&amp;argc, &amp;argv);\n\n// Create an 800x600 window that will contain the browser instance\nGtkWidget *main_window = gtk_window_new(GTK_WINDOW_TOPLEVEL);\ngtk_window_set_default_size(GTK_WINDOW(main_window), 800, 600);\n\n// Create a browser instance\nWebKitWebView *webView = WEBKIT_WEB_VIEW(webkit_web_view_new());\n\n// Put the browser area into the main window\ngtk_container_add(GTK_CONTAINER(main_window), GTK_WIDGET(webView));\n\n// Set up callbacks so that if either the main window or the browser instance is\n// closed, the program will exit\ng_signal_connect(main_window, \"destroy\", G_CALLBACK(destroyWindowCb), NULL);\ng_signal_connect(webView, \"close\", G_CALLBACK(closeWebViewCb), main_window);\n\n// Load a web page into the browser instance\nwebkit_web_view_load_uri(webView, \"http://www.webkitgtk.org/\");\n\n// Make sure that when the browser area becomes visible, it will get mouse\n// and keyboard events\ngtk_widget_grab_focus(GTK_WIDGET(webView));\n\n// Make sure the main window and all its contents are visible\ngtk_widget_show_all(main_window);\n\n// Run the main GTK+ event loop\ngtk_main();\n\nreturn 0;\n}\n\n\nstatic void\ndestroyWindowCb(GtkWidget* widget, GtkWidget* window)\n{\n    gtk_main_quit();\n}\n\nstatic gboolean\ncloseWebViewCb(WebKitWebView* webView, GtkWidget* window)\n{\n    gtk_widget_destroy(window);\n    return TRUE;\n}\n</code></pre>\n\n<p>And the following cmake list : </p>\n\n<pre><code>cmake_minimum_required(VERSION 3.3)\nproject(HttpsMock)\n\n# Use the package PkgConfig to detect GTK+ headers/library files\nfind_package(PkgConfig REQUIRED)\n\npkg_check_modules(GTK3 REQUIRED gtk+-3.0)\npkg_check_modules(WEBKIT REQUIRED webkitgtk-3.0)\n\n# Setup CMake to use GTK+, tell the compiler where to look for headers\ninclude_directories(${GTK3_INCLUDE_DIRS})\ninclude_directories(${WEBKIT_INCLUDE_DIRS})\n\n# and to the linker where to look for libraries\nlink_directories(${GTK3_LIBRARY_DIRS})\nlink_directories(${WEBKIT_LIBRARY_DIRS})\n\n# Add other flags to the compiler\nadd_definitions(${GTK3_CFLAGS_OTHER})\nadd_definitions(${WEBKIT_CFLAGS_OTHER})\n\n# Flags and source\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11 -v\")\n\nset(SOURCE_FILES main.cpp)\n\nadd_executable(HttpsMock ${SOURCE_FILES})\n# Linking\ntarget_link_libraries(HttpsMock ${GTK3_LIBRARIES})\ntarget_link_libraries(HttpsMock ${WEBKIT_LIBRARIES})\n</code></pre>\n\n<p>But as soon as I try to use another method like :</p>\n\n<pre><code>WebKitURIRequest *request = webkit_uri_request_new(\"http://www.webkitgtk.org/\");\n</code></pre>\n\n<p>The program doesn't want to link anymore. It's really weird. Here's a sample of the error :</p>\n\n<pre><code>[100%] Linking CXX executable HttpsMock\nApple LLVM version 7.0.0 (clang-700.0.72)\nTarget: x86_64-apple-darwin14.5.0\nThread model: posix\n \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ld\" -demangle -dynamic -arch x86_64 -macosx_version_min 10.10.0 -syslibroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk -o HttpsMock -L/opt/local/lib -search_paths_first -headerpad_max_install_names CMakeFiles/HttpsMock.dir/main.cpp.o -lwebkitgtk-3.0 -lgtk-3 -lgdk-3 -lpangocairo-1.0 -lpangoft2-1.0 -lpango-1.0 -lm -lfontconfig -lfreetype -latk-1.0 -lcairo-gobject -lcairo -lgdk_pixbuf-2.0 -lsoup-2.4 -lgio-2.0 -lgobject-2.0 -ljavascriptcoregtk-3.0 -lglib-2.0 -lintl -rpath /opt/local/lib -lc++ -lSystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/7.0.0/lib/darwin/libclang_rt.osx.a\nUndefined symbols for architecture x86_64:\n  \"_webkit_uri_request_new\", referenced from:\n      _main in main.cpp.o\nld: symbol(s) not found for architecture x86_64\n</code></pre>\n\n<p>I really have no clue of what is going on. Could someone please enlighten me?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 0, "creation_date": 1443645412, "post_id": 32875079, "comment_id": 53581750, "body": "1) You can&#39;t instance variables inside for cycle <code>for (int i = 0;...</code> 2) The <code>% 26</code> seems to be the problem there, you should debug that ;) 3) I assume you&#39;re implementing your own crypto just for pleasure/didacting purposes, you should never ever ever ever ever ever (one more time) ever design your own crypto for real enviroments. Is really bad idea, your crypto could be broken really easy or don&#39;t work properly and cause lose of data (maybe really important data)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443646017, "post_id": 32875079, "comment_id": 53582057, "body": "The <code>if (islower(text[x]) &amp;&amp; ((text[x] + (keyword[i % num_letters]) - &#39;a&#39;) &lt;= &#39;z&#39;))</code> and next <code>else if()</code> appear wrong."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 0, "creation_date": 1443649108, "post_id": 32875079, "comment_id": 53583419, "body": "@Mr.E What&#39;s wrong with that variable declaration?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443655301, "post_id": 32875079, "comment_id": 53585411, "body": "What does &quot;my keeps incrementing&quot; mean?"}, {"owner": {"reputation": 1, "user_id": 5393958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbb2ff601d9beb190164729243a4b7e?s=128&d=identicon&r=PG&f=1", "display_name": "PLT", "link": "https://stackoverflow.com/users/5393958/plt"}, "reply_to_user": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 0, "creation_date": 1443706527, "post_id": 32875079, "comment_id": 53607670, "body": "incrementing means that my i goes +1. I don&#39;t think there is a problem with the if, it encrypts the way it should except that it counts the punctuation and the space character.  @Mr.E, can you be more precise about what you think the problem is with the modulo 26? I used modulo 26 to make sure I don&#39;t get a value that is not an alphabetic ASCII character."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5393958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbb2ff601d9beb190164729243a4b7e?s=128&d=identicon&r=PG&f=1", "display_name": "PLT", "link": "https://stackoverflow.com/users/5393958/plt"}, "edited": false, "score": 0, "creation_date": 1443708658, "post_id": 32875390, "comment_id": 53609065, "body": "Thanks Bryan! I used the &#171;simple&#187; way by decrementing i in my else statement. Good idea!"}], "tags": [], "owner": {"reputation": 44, "user_id": 4221376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fBAs9.jpg?s=128&g=1", "display_name": "Bryan S.", "link": "https://stackoverflow.com/users/4221376/bryan-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1443646242, "creation_date": 1443646242, "answer_id": 32875390, "question_id": 32875079, "link": "https://stackoverflow.com/questions/32875079/how-to-avoid-counting-the-non-alphanumeric-characters/32875390#32875390", "title": "How to avoid counting the non-alphanumeric characters", "body": "<p>This may be a weird way to solve it, but I think a simple solution would be, in your else statement, decrement your i value. The problem is that regardless of whether you are entering the if/else statement, both will finish and return top, where you are incrementing it as if nothing changed. A more readable solution would be to take the control of your i variable away from the for loop itself and only increment i right before/after you print the char</p>\n"}], "owner": {"reputation": 1, "user_id": 5393958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbb2ff601d9beb190164729243a4b7e?s=128&d=identicon&r=PG&f=1", "display_name": "PLT", "link": "https://stackoverflow.com/users/5393958/plt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1443646242, "creation_date": 1443645078, "question_id": 32875079, "link": "https://stackoverflow.com/questions/32875079/how-to-avoid-counting-the-non-alphanumeric-characters", "title": "How to avoid counting the non-alphanumeric characters", "body": "<p>I am making a crypting program for CS50x and I have a small problem. I am trying to crypt some text using a vigenere cipher(cipher that uses a word as key). The problem I have is that, whenever I have a space or a non-alphabetic character, my  keeps incrementing. As per the spec, it shouldn't... Therefore, some characters are getting  using the wrong key... Any idea how I can solve this problem? </p>\n\n<p>Here is a small part of my code to help you understand the problem. </p>\n\n<pre><code>for(int x=0, i = 0 , textlen = strlen(text); x &lt; textlen; x++ , i++ ) \n    if (isalpha(text[x]))\n    {\n\n        if (islower(keyword[i % num_letters]))\n        {\n            if (islower(text[x]) &amp;&amp; ((text[x] + (keyword[i % num_letters]) - 'a') &lt;= 'z'))\n            {\n                text[x]= (text[x] + (keyword[i % num_letters]) - 'a' ); \n            }\n\n            else if (islower(text[x]) &amp;&amp; ((text[x] + (keyword[i % num_letters]) - 'a') &gt; 'z' ))\n            {\n                text[x]= ('a'+ ((((text[x]) - 'a') + ((keyword[i % num_letters]) - 'a' )) % 26));\n\n            }\n        }\n    printf(\"%c\", text[x]);\n    }\n    else \n\n// Print the non-alpha char as they are \n    {\n        printf(\"%c\", text[x]);\n\n    }\n</code></pre>\n\n<p>I hope this piece of code help you to understand. This is just a fragment from the code but it should be enough to understand the problem and perhaps suggest a solution. </p>\n\n<p>Thanks! </p>\n"}, {"tags": ["c++", "c", "opengl"], "comments": [{"owner": {"reputation": 724, "user_id": 2540607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8f40627c8c656db70d39b2fb244f865?s=128&d=identicon&r=PG", "display_name": "wendelbsilva", "link": "https://stackoverflow.com/users/2540607/wendelbsilva"}, "edited": false, "score": 0, "creation_date": 1443644705, "post_id": 32874915, "comment_id": 53581414, "body": "You can use <a href=\"https://open.gl/depthstencils\" rel=\"nofollow noreferrer\">stencil buffer</a>."}, {"owner": {"reputation": 18064, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1443647017, "post_id": 32874915, "comment_id": 53582542, "body": "Or you can limit the drawable area using <code>glViewport</code>. But be aware that you will also have to adjust the projection matrix."}, {"owner": {"reputation": 1, "user_id": 5394832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddc37cfb05d83505a288eb2c37a0b428?s=128&d=identicon&r=PG&f=1", "display_name": "christoph", "link": "https://stackoverflow.com/users/5394832/christoph"}, "edited": false, "score": 0, "creation_date": 1443946200, "post_id": 32874915, "comment_id": 53688476, "body": "ok, thanks a lot  what would the best way to handle windows self made creation, where i need to move inside in x and y the point of view ?"}], "answers": [{"tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": false, "score": 1, "last_activity_date": 1443648297, "creation_date": 1443648297, "answer_id": 32875889, "question_id": 32874915, "link": "https://stackoverflow.com/questions/32874915/opengl-how-to-clip-a-2d-area-to-avoid-text-with-glutbitmap-to-be-printed-out-of/32875889#32875889", "title": "OpenGL: how to clip a 2D area to avoid text with GlutBitmap to be printed out of this area?", "body": "<p><a href=\"https://www.opengl.org/sdk/docs/man/html/glScissor.xhtml\" rel=\"nofollow\"><code>glScissor()</code></a> + <code>glEnable(GL_SCISSOR_TEST)</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5394832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddc37cfb05d83505a288eb2c37a0b428?s=128&d=identicon&r=PG&f=1", "display_name": "christoph", "link": "https://stackoverflow.com/users/5394832/christoph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443659504, "creation_date": 1443644472, "last_edit_date": 1443659504, "question_id": 32874915, "link": "https://stackoverflow.com/questions/32874915/opengl-how-to-clip-a-2d-area-to-avoid-text-with-glutbitmap-to-be-printed-out-of", "title": "OpenGL: how to clip a 2D area to avoid text with GlutBitmap to be printed out of this area?", "body": "<p>How can I define in my app some areas where text can be printed, without overflowing out of them?</p>\n\n<pre><code>int printText(char *myChar, int color, double x, double y, double z)\n{\n    call_color(color);\n    int end_of_char=strlen(myChar);\n    glRasterPos3d(x,y,-1);\n    for(int i=0;i&lt;end_of_char;i++)\n    {\n        glutBitmapCharacter(GLUT_BITMAP_8_BY_13,myChar[i]);\n    }\n    return(0);\n}\n</code></pre>\n\n<p>sample:</p>\n\n<pre><code>void window_function()\n{\n    // printing things before on all screen\n    // define clipping aera\n    char tem[64];\n    sprintf(tem,\"mouse x: %.4f mouse y: %.4f\",mouse_ox,mouse_oy);\n    printText(tem,COL_LIGHT_GREY,x+0.005,y-0.085,1.0);\n    //re opening the clipping aera to the complete screen\n    //printing other stuff    \n}\n</code></pre>\n"}, {"tags": ["c", "floating-point"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1443644798, "post_id": 32874891, "comment_id": 53581456, "body": "The question is not very clear. Please show some typical inputs, how they are obtained, and the required output in each case. And the code (&quot;I have extracted...&quot;)"}, {"owner": {"reputation": 103, "user_id": 2425459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94cec0b47bad57fd3cdb82d12562554b?s=128&d=identicon&r=PG", "display_name": "Lukas Valatka", "link": "https://stackoverflow.com/users/2425459/lukas-valatka"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1443646458, "post_id": 32874891, "comment_id": 53582285, "body": "At the moment, I have two 32 bit memory words, long type numbers, one is 1 (because of the sign is negative) and the other one is 10 in binary. I also have char array with character &#39;5&#39; as the first and only one element. It is the fraction of the number provided (it could be &#39;05&#39;, &#39;00001257852&#39; and etc.). I just need to convert it to bits."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1443646487, "post_id": 32874891, "comment_id": 53582302, "body": "... in the question, not as waffle please."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 2425459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94cec0b47bad57fd3cdb82d12562554b?s=128&d=identicon&r=PG", "display_name": "Lukas Valatka", "link": "https://stackoverflow.com/users/2425459/lukas-valatka"}, "edited": false, "score": 0, "creation_date": 1443647135, "post_id": 32875221, "comment_id": 53582595, "body": "Thank you so much! I will try to implement the solution right away, splendid!"}], "tags": [], "owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": false, "score": 5, "last_activity_date": 1443646612, "last_edit_date": 1443646612, "creation_date": 1443645573, "answer_id": 32875221, "question_id": 32874891, "link": "https://stackoverflow.com/questions/32874891/convert-fraction-part-to-binary/32875221#32875221", "title": "Convert Fraction Part to Binary", "body": "<p>You basically have the right idea.  Just double the decimal part and the carry becomes the number.  Let's try converting <code>.7</code> to binary as an example (<code>.5</code> is too simple)</p>\n\n<pre><code>NUMBER REMAINDER CARRY\n    .7       ---     .\n   1.4        .4     1\n    .8        .8     0\n   1.6        .6     1\n   1.2        .2     1\n    .4        .4     0\n    .8        .8     0\n   1.6        .6     1\n   1.2        .2     1\n&amp;ct.\n</code></pre>\n\n<p>So <code>.7</code> in binary is <code>.101100110...</code>.  <code>10.7</code> would just be <code>1010.101100110...</code></p>\n\n<p>You can stop converting to binary once the remainder becomes <code>0</code>, or once the total representation becomes 24 bits long due to the limits of IEEE float precision.</p>\n\n<p>Note that the decimal itself is purely decorative, you aren't using floating point here.</p>\n\n<pre><code>NUMBER     %10    /10\n     7     ---      .\n    14       4      1\n     8       8      0\n    16       6      1\n    12       2      1\n     4       4      0\n     8       8      0\n    16       6      1\n    12       2      1\n&amp;ct.\n</code></pre>\n\n<p>In the case of <code>.07</code> you would represent the remainder and carry by <code>%100</code> and <code>/100</code> respectively.  In the case of <code>.007</code> you would use <code>%1000</code> and <code>/1000</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 2425459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94cec0b47bad57fd3cdb82d12562554b?s=128&d=identicon&r=PG", "display_name": "Lukas Valatka", "link": "https://stackoverflow.com/users/2425459/lukas-valatka"}, "edited": false, "score": 0, "creation_date": 1443647750, "post_id": 32875703, "comment_id": 53582853, "body": "Thanks, sadly, some universities professors just lack common sense. The idea of mine, which was suggested by a guy from my university who has already dealt with the task, to translate the integer and fractional parts separately (that&#39;s what I&#39;m up to). I&#39;ll put &#39;em into 32bit memory words (sign word, exponent word, mantissa word), shift if needed and add to a register. Then I&#39;ll print out everything somehow."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 103, "user_id": 2425459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94cec0b47bad57fd3cdb82d12562554b?s=128&d=identicon&r=PG", "display_name": "Lukas Valatka", "link": "https://stackoverflow.com/users/2425459/lukas-valatka"}, "edited": false, "score": 0, "creation_date": 1443648456, "post_id": 32875703, "comment_id": 53583152, "body": "Well, do be aware that 32 bits may not be enough.  You may need as few as zero, or as many as 53 (for, again, IEEE binary double precision) to represent the portion of the number&#39;s magnitude that has greater than unit precision.  Do also pay attention to correctly rounding the result for numbers that are not exactly representable."}, {"owner": {"reputation": 103, "user_id": 2425459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94cec0b47bad57fd3cdb82d12562554b?s=128&d=identicon&r=PG", "display_name": "Lukas Valatka", "link": "https://stackoverflow.com/users/2425459/lukas-valatka"}, "edited": false, "score": 0, "creation_date": 1443649240, "post_id": 32875703, "comment_id": 53583473, "body": "I understand, but I do not really care about rounding and etc. I just need to add as many digits to 23 bit mantissa (it&#39;s not actually a memory word, more of a part of a word) till it&#39;s full."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 103, "user_id": 2425459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94cec0b47bad57fd3cdb82d12562554b?s=128&d=identicon&r=PG", "display_name": "Lukas Valatka", "link": "https://stackoverflow.com/users/2425459/lukas-valatka"}, "edited": false, "score": 0, "creation_date": 1443652156, "post_id": 32875703, "comment_id": 53584535, "body": "@LukasValatka, I have replaced the bulk of my previous answer with one that is aimed at parsing text, instead of analyzing existing floating-point representations.  You need something along these lines to properly handle all possible inputs, including, for example, those greater than a 32-bit integer can represent."}, {"owner": {"reputation": 3231, "user_id": 100914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cecc94d6c01933540c51422aaa9e2a35?s=128&d=identicon&r=PG", "display_name": "Rick Regan", "link": "https://stackoverflow.com/users/100914/rick-regan"}, "edited": false, "score": 1, "creation_date": 1443822244, "post_id": 32875703, "comment_id": 53660508, "body": "And if you need more details I&#39;ve written about the algorithm at <a href=\"http://www.exploringbinary.com/correct-decimal-to-floating-point-using-big-integers/\" rel=\"nofollow noreferrer\">exploringbinary.com/&hellip;</a>"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1443704516, "last_edit_date": 1443704516, "creation_date": 1443647426, "answer_id": 32875703, "question_id": 32874891, "link": "https://stackoverflow.com/questions/32874891/convert-fraction-part-to-binary/32875703#32875703", "title": "Convert Fraction Part to Binary", "body": "<p>In an IEEE-754 sense, there is no well-defined meaning for the fractional part of a floating-point number outside the context of the overall number.  The bits that distinguish the value <code>10.5</code> from the value <code>10.0</code> are a smaller subset of the overall representation than are the bits that distinguish the value <code>0.0</code> from the value <code>0.5</code>.  When one talks about the \"fraction\" part of an IEEE-754 numeric representation, one normally is talking about all bits of the mantissa; for IEEE 754 single-precision binary format that's 24 bits, including one implied bit, regardless of the magnitude of the number.</p>\n\n<p><strong>UPDATE / REVISION:</strong></p>\n\n<p>Based on updates clarifying the question, I have replaced the bulk of my previous answer, which addressed the problem of programmatically extracting the bits of a <code>float</code> or <code>double</code>, as opposed to converting a decimal-format <em>text</em> representation to the bits of an IEEE-754 format representation.  Parsing text is a tricky problem, as I also said in the original version of this answer.</p>\n\n<p>I do nevertheless reiterate that I think it a mistake to separate the mantissa into separate pieces.  It offers no particular advantage that I can see, but it introduces the problem of properly recombining the pieces later.</p>\n\n<p>Here's a workable approach to the overall problem:</p>\n\n<ol>\n<li><p>Determine the sign of the input number based on the presence or absence of a negative sign.</p></li>\n<li><p>Form a bignum representation of the absolute value of the input number.  For example, a base-1,000,000,000 representation, stored in an array of <code>uint32_t</code>.  As long as the base is a power of 10, it is straightforward to parse your decimal-format input number into such a representation, and no rounding error is introduced by doing so.</p></li>\n<li><p>Scale the bignum representation by the appropriate power of two to obtain a scaled value between 2<sup>23</sup> and 2<sup>24</sup> - 1.  This can be done with only integer arithmetic.  Do note that it may be possible that you'll have to scale <em>down</em> instead of up.  Either way, this scaling can be performed via integer arithmetic alone.  Remember which power of two (<code>s</code>) was used as the scale factor (i.e. the base-2 logarithm of the scale factor, not so much the scale factor itself; this can come easily out of the algorithm with no computation of transcendental functions required).</p></li>\n<li><p>Round to unit precision.</p></li>\n</ol>\n\n<p>You then have the sign bit from step 1, the bits of the mantissa / significand as the remaining significant bits of the bignum (remember that the most-significant one is implicit, not explicit, in the final IEEE format), and the exponent as <code>23 - s</code>.</p>\n\n<p>Note, too, that that approach can be extended very naturally to scientific notation.</p>\n"}], "owner": {"reputation": 103, "user_id": 2425459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94cec0b47bad57fd3cdb82d12562554b?s=128&d=identicon&r=PG", "display_name": "Lukas Valatka", "link": "https://stackoverflow.com/users/2425459/lukas-valatka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1198, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1444334999, "creation_date": 1443644374, "last_edit_date": 1444334999, "question_id": 32874891, "link": "https://stackoverflow.com/questions/32874891/convert-fraction-part-to-binary", "title": "Convert Fraction Part to Binary", "body": "<p>I have a fraction part of a float number (5 of -10.5, for instance). It is a character since I extracted it from the input. How can I convert that character into a binary fraction part of that float number? (I am building a float input -> HEX output in 32bit IEEE784, I have already extracted binary representations of the sign, exponent and integer part of mantissa.)</p>\n\n<p>I have been thinking about implement the algorithm of multiplying the fraction by two and taking the remainder, then repeating till it fill the mantissa, but I am not allowed to use any floating point operations in an assignment.</p>\n\n<p>Examples:\nUser inputs -10.5. The program needs to take the fraction of the number (which is 5) and convert it to binary format (which is 1 (.1))</p>\n\n<p>EDIT: I am limited by 16 bit register size thus I need a solution to operate on numbers > 2^16-1.</p>\n"}, {"tags": ["c", "arrays", "string"], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 6, "last_activity_date": 1443642348, "last_edit_date": 1443642348, "creation_date": 1443642048, "answer_id": 32874315, "question_id": 32874262, "link": "https://stackoverflow.com/questions/32874262/can-you-find-the-length-of-a-string-from-an-array-of-pointers-to-strings/32874315#32874315", "title": "Can you find the length of a string from an array of pointers to strings?", "body": "<p>No, this is undefined behavior.</p>\n\n<p>You are allowed to subtract pointers only when they are pointing to memory from the same contiguous memory block. In your example <code>pStrings[1]</code> and <code>pStrings[0]</code> are not pointing to a contiguous block of memory, so the result of <code>pStrings[1] - pStrings[0]</code> is undefined.</p>\n\n<blockquote>\n  <p>6.5.6.9: When two pointers are subtracted, both shall point to elements of the same array object, or one past the last element of the array object; the result is the difference of the subscripts of the two array elements.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 446, "user_id": 4699114, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c923110bd052844fe8983a7eeb522d8?s=128&d=identicon&r=PG&f=1", "display_name": "Mike32ab", "link": "https://stackoverflow.com/users/4699114/mike32ab"}, "edited": false, "score": 0, "creation_date": 1443642270, "post_id": 32874317, "comment_id": 53580280, "body": "Is there a way to make the strings be allocated next to each other in memory?"}, {"owner": {"reputation": 129197, "user_id": 464988, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2b7216361772f42fefdb90cbc8bd7855?s=128&d=identicon&r=PG", "display_name": "MByD", "link": "https://stackoverflow.com/users/464988/mbyd"}, "reply_to_user": {"reputation": 446, "user_id": 4699114, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c923110bd052844fe8983a7eeb522d8?s=128&d=identicon&r=PG&f=1", "display_name": "Mike32ab", "link": "https://stackoverflow.com/users/4699114/mike32ab"}, "edited": false, "score": 1, "creation_date": 1443642367, "post_id": 32874317, "comment_id": 53580338, "body": "Yes, define them in an array, however, this will not help you calculating the string&#39;s length."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 446, "user_id": 4699114, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c923110bd052844fe8983a7eeb522d8?s=128&d=identicon&r=PG&f=1", "display_name": "Mike32ab", "link": "https://stackoverflow.com/users/4699114/mike32ab"}, "edited": false, "score": 1, "creation_date": 1443644035, "post_id": 32874317, "comment_id": 53581088, "body": "@Rm32a You could define <code>char myStringData[] = &quot;First string\\0Hello\\0Afternoon\\0Ab&quot;; char *pStrings[4] = {myStringData, myStringData+13, myStringData+19, myStringData+29}</code> or something like that. (But why would you?)"}], "tags": [], "owner": {"reputation": 129197, "user_id": 464988, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2b7216361772f42fefdb90cbc8bd7855?s=128&d=identicon&r=PG", "display_name": "MByD", "link": "https://stackoverflow.com/users/464988/mbyd"}, "is_accepted": true, "score": 3, "last_activity_date": 1443642055, "creation_date": 1443642055, "answer_id": 32874317, "question_id": 32874262, "link": "https://stackoverflow.com/questions/32874262/can-you-find-the-length-of-a-string-from-an-array-of-pointers-to-strings/32874317#32874317", "title": "Can you find the length of a string from an array of pointers to strings?", "body": "<p>No. There is no guarantee that the strings will be located next to each other in the memory.</p>\n"}, {"tags": [], "owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "is_accepted": false, "score": 1, "last_activity_date": 1443646293, "creation_date": 1443646293, "answer_id": 32875401, "question_id": 32874262, "link": "https://stackoverflow.com/questions/32874262/can-you-find-the-length-of-a-string-from-an-array-of-pointers-to-strings/32875401#32875401", "title": "Can you find the length of a string from an array of pointers to strings?", "body": "<p>Here's an example that shows what @dasblinkenlight and @MByD were saying.</p>\n\n<pre><code>char*s1 = \"Hello\";\nchar *pStrings[4] = {\n    \"First string\",\n    \"Hello\",\n    \"Afternoon\",\n    \"Ab\"\n};\n</code></pre>\n\n<p>In the above code, the compiler may (and probably will) point s1 and pStrings[1] to the same location, which may be nowhere near where pStrings[0] points. So even if the subtraction were legal (it is not), your method would not work.</p>\n"}], "owner": {"reputation": 446, "user_id": 4699114, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c923110bd052844fe8983a7eeb522d8?s=128&d=identicon&r=PG&f=1", "display_name": "Mike32ab", "link": "https://stackoverflow.com/users/4699114/mike32ab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 32874317, "answer_count": 3, "score": 0, "last_activity_date": 1443683381, "creation_date": 1443641832, "last_edit_date": 1443683381, "question_id": 32874262, "link": "https://stackoverflow.com/questions/32874262/can-you-find-the-length-of-a-string-from-an-array-of-pointers-to-strings", "title": "Can you find the length of a string from an array of pointers to strings?", "body": "<p>Can you find the length of a string by doing subtraction on an array of pointers to strings?\nFor example if I have the code below</p>\n\n<pre><code>char *pStrings[4] = {\n    \"First string\",\n    \"Hello\",\n    \"Afternoon\",\n    \"Ab\"\n};\n\nint firstStrLen = pStrings[1] - pStrings[0] - 1; //Will I get the length of the first string by doing this?\n</code></pre>\n\n<p>Will <code>firstStrLen</code> be the length of the first string?</p>\n"}, {"tags": ["c", "multithreading"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1443642658, "post_id": 32874163, "comment_id": 53580468, "body": "You are passing locally scoped variables and to threads which use them after they go out of scope."}, {"owner": {"reputation": 2259, "user_id": 4043524, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb1191cbbf1d65ca644b292bce6840b8?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Chahar", "link": "https://stackoverflow.com/users/4043524/amit-chahar"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1443643441, "post_id": 32874163, "comment_id": 53580800, "body": "I have declared arguments array outside the for loop, so now it will not go out of scope. But still I am getting the same error."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1443643677, "post_id": 32874163, "comment_id": 53580911, "body": "The local variables in a thread are out of scope after the thread exits."}, {"owner": {"reputation": 2259, "user_id": 4043524, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb1191cbbf1d65ca644b292bce6840b8?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Chahar", "link": "https://stackoverflow.com/users/4043524/amit-chahar"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1443644151, "post_id": 32874163, "comment_id": 53581162, "body": "I am not able to understand where exactly I am doing mistake. Can you please elaborate where I am accessing the local variables after thread exits. I am using join to finish all the child threads before the parent thread exits."}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "edited": false, "score": 2, "creation_date": 1443659321, "post_id": 32874163, "comment_id": 53586393, "body": "No high end pro coding shop would let you get away with code so badly formatted and crunched up and hard to read. All the good places have coding standards for a good reason - maintainability and to ease peer code reviews. Hard enough to study code that&#39;s readable. Just because C lets you get away with murder formatting-wise doesn&#39;t mean it&#39;s wise to do it.  I submitted an edit to make it easier to read your code.  When everything looks like a dense pack of crunched together mess it&#39;s harder to find bugs. And consistency in formatting is also important. Don&#39;t format one way then another."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1443659371, "post_id": 32874163, "comment_id": 53586399, "body": "Hint: use unsigned types for sizes and bitmasks. and use <code>(1u &lt;&lt;n)</code> for bitmask literals."}, {"owner": {"reputation": 12011, "user_id": 641451, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/IcOuq.jpg?s=128&g=1", "display_name": "mgarciaisaia", "link": "https://stackoverflow.com/users/641451/mgarciaisaia"}, "edited": false, "score": 0, "creation_date": 1443659457, "post_id": 32874163, "comment_id": 53586419, "body": "You can use <code>valgrind</code> to get more information about why the <code>SIGSEGV</code> happened."}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "edited": false, "score": 0, "creation_date": 1443659692, "post_id": 32874163, "comment_id": 53586454, "body": "You can use use  indent to clean up code for presentation.  I highly recommend getting used to writting clean easy to read code.  You will catch a lot of bugs more easily that way. Bugs hide in all that slop and crunch because they&#39;re harder to visually distinguish.  <a href=\"https://www.gnu.org/software/indent/manual/indent.html\" rel=\"nofollow noreferrer\">gnu.org/software/indent/manual/indent.html</a>"}, {"owner": {"reputation": 64429, "user_id": 1188513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wNdZG.jpg?s=128&g=1", "display_name": "Mathieu Guindon", "link": "https://stackoverflow.com/users/1188513/mathieu-guindon"}, "reply_to_user": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "edited": false, "score": 0, "creation_date": 1443660113, "post_id": 32874163, "comment_id": 53586539, "body": "@nerdistcolony man, where&#39;s your <a href=\"https://codereview.stackexchange.com\">Code Review</a> profile? ;-)"}, {"owner": {"reputation": 10702, "user_id": 2079103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XlVYy.png?s=128&g=1", "display_name": "clearlight", "link": "https://stackoverflow.com/users/2079103/clearlight"}, "reply_to_user": {"reputation": 64429, "user_id": 1188513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wNdZG.jpg?s=128&g=1", "display_name": "Mathieu Guindon", "link": "https://stackoverflow.com/users/1188513/mathieu-guindon"}, "edited": false, "score": 0, "creation_date": 1443660460, "post_id": 32874163, "comment_id": 53586628, "body": "@Mat&#39;sMug I already have no time for this stuff :-) But sometimes I can&#39;t really get into even studying the problem at hand because people post such a mess."}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 5232583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d17cdf476892e3bded0c91012d12503e?s=128&d=identicon&r=PG&f=1", "display_name": "kaishu", "link": "https://stackoverflow.com/users/5232583/kaishu"}, "is_accepted": false, "score": 0, "last_activity_date": 1444121574, "creation_date": 1444121574, "answer_id": 32965643, "question_id": 32874163, "link": "https://stackoverflow.com/questions/32874163/segmentation-fault-while-using-pthread-library/32965643#32965643", "title": "segmentation fault while using pthread library", "body": "<p>You are creating threads in compare function, and you pass compare as thread function, that's chaos. You maybe exceed available number of threads.</p>\n"}], "owner": {"reputation": 2259, "user_id": 4043524, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb1191cbbf1d65ca644b292bce6840b8?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Chahar", "link": "https://stackoverflow.com/users/4043524/amit-chahar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 837, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444121574, "creation_date": 1443641347, "last_edit_date": 1443659557, "question_id": 32874163, "link": "https://stackoverflow.com/questions/32874163/segmentation-fault-while-using-pthread-library", "title": "segmentation fault while using pthread library", "body": "<p>I am a newbie to threading and i am trying to change the sequential program of travelling salesman problem (dynamic programming) to parallel program using threading in c. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\n#define size 10 //maximum 10 cities\n#define min(a,b) (a &gt; b ? b : a)\n#define sizePOW  1024    // 2^10\n\n//Space complexity: O(n * 2^n)\n//Time complexity: O(n^2 * 2^n)\n\nint n; npow;\nint g[size][sizePOW];\nint p[size][sizePOW];\nint adj[size][size];\n\nint compute(int start, int set) {\n    int masked, mask, temp, i;\n    int result = INT_MAX; //result stores the minimum \n\n    if (g[start][set] != -1) //memoization DP top-down,check for repeated subproblem\n        return g[start][set];\n\n    for (i = 0; i &lt; n; i++) {   //npow-1 because we always exclude \"home\" vertex from our set\n            mask = (npow - 1) - (1 &lt;&lt; i);  //remove ith vertex from this set\n            masked = set &amp; mask;\n            if (masked != set) { //in case same set is generated(because ith vertex was not present in the set hence we get the same set on removal) eg 12&amp;13=12\n                temp = adj[start][i] + compute(i, masked); //compute the removed set\n                if (temp &lt; result)\n                    result = temp, \n                    p[start][set] = i; //removing ith vertex gave us minimum\n            }\n        }\n        return g[start][set] = result; //return minimum\n}\nvoid getpath(int start, int set) {\n    if (p[start][set] == -1) \n       return; //reached null set\n\n    int x = p[start][set];\n    int mask = (npow - 1) - (1 &lt;&lt; x);\n    int masked = set &amp; mask; //remove p from set\n    printf(\"%d \", x);\n    getpath(x, masked);\n}\nvoid TSP() {    \n    int i, j;\n    //g(i,S) is length of shortest path starting at i visiting all vertices in S and ending at 1\n    for (i = 0; i &lt; n; i++)\n        for (j = 0; j &lt; npow; j++) \n                g[i][j] = p[i][j] = -1; \n    for (i = 0; i &lt; n; i++)\n         g[i][0] = adj[i][0]; //g(i,nullset)= direct edge between (i,1)\n\n    int result = compute(0, npow - 2);//npow-2 to exclude our \"home\" vertex\n    printf(\"Tour cost:%d\\n\", result);\n    printf(\"Tour path:\\n0 \");\n    getpath(0, npow - 2);\n    printf(\"0\\n\");\n}\n\nint main(void) {\n    int i, j;\n    printf(\"Enter number of cities\\n\");\n    scanf(\"%d\",&amp;n);\n    npow=(int)pow(2, n);//bit number required to represent all possible sets\n    printf(\"Enter the adjacency matrix\\n\");\n    for(i = 0; i &lt; n; i++)\n       for(j = 0; j &lt; n; j++)\n          scanf(\"%d\", &amp;adj[i][j]);\n    TSP();\n    return 0;\n}\n</code></pre>\n\n<p>This is the sequential program from <a href=\"http://ideone.com/tYdrK8\" rel=\"nofollow\">ideone code</a>.\nHere is my parallel code for this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;unistd.h&gt;\n#include&lt;limits.h&gt;\n\n#define size 10 //maximum 10 cities\n#define min(a,b) a &gt; b ? b:a\n#define sizePOW 1024 // 2^10\n\nstruct threadargs {\n    int a, b;\n    int *c;\n};\n//Space complexity: O(n * 2^n)\n//Time complexity: O(n^2 * 2^n)\n\nint n, npow;\nint g[size][sizePOW];\nint p[size][sizePOW];\nint adj[size][size];\n\nvoid printMatrix() {\n    int i, j;\n    for (i = 0; i &lt; 4; i++) {\n        for (j = 0; j &lt; 16; j++) {\n            printf(\"%d \",g[i][j]);\n\n        printf(\"\\n\");\n    }\n    printf(\"\\n\\n\");\n}\n\nvoid *compute(void *args) { \n    int masked, mask, i, start, set; \n    int result = INT_MAX; //result stores the minimum \n    struct threadargs *recvargs = (struct threadargs *) args;\n    start = recvargs-&gt;a;\n    set = recvargs-&gt;b;\n    int *retval = recvargs-&gt;c;\n\n    if (g[start][set] != -1) { //memoization DP top-down,check for repeated subproblem\n        *retval += g[start][set];\n        return;\n    }\n\n    printMatrix();\n    //sleep(1);\n    int temp[n];\n\n    for (i = 0; i &lt; n; i++)\n        temp[i] = INT_MAX;\n\n    pthread_t threads[n];\n    struct threadargs arguments[n];\n    int running_thread_count = 0;\n\n    for (i = 0; i &lt; n; i++) \n       threads[i] == -1;\n\n    for (i = 0; i &lt; n; i++) {   //npow-1 because we always exclude \"home\" vertex from our set\n            mask= (npow - 1) - (1 &lt;&lt; i); //remove ith vertex from this set\n            masked = set &amp; mask;\n            //printf(\"hello world\");\n            if (masked != set)//in case same set is generated(because ith vertex was not present in the set hence we get the same set on removal) eg 12&amp;13=12\n            {   \n                temp[i] = adj[start][i];\n                arguments[i].a = i;\n                arguments[i].b = masked;\n                arguments[i].c = &amp;temp[i];\n                pthread_create(&amp;threads[i], NULL, compute, (void *)&amp;arguments[i] );\n                running_thread_count++;\n\n            }\n        }\n\n        for (i = 0; i &lt; n; i++) {\n            if (pthread_kill(threads[i], 0) != ESRCH)\n                pthread_join(threads[i], NULL);\n        }\n\n        int ith = 0;\n        result = temp[0];\n        for (i = 1; i &lt; n; i++) {\n            if(temp[i] &lt; result) {\n                result = temp[i];\n                ith = i;\n            }\n        }\n        p[start][set] = ith;\n        if (result != INT_MAX)\n            g[start][set] = result; //return minimum\n        *retval += g[start][set];\n}\n\nvoid getpath(int start,int set)\n{\n    if (p[start][set] == -1)\n       return; //reached null set\n    int x = p[start][set];\n    int mask= (npow - 1) - (1 &lt;&lt; x);\n    int masked = set &amp; mask;//remove p from set\n    printf(\"%d \",x);\n    getpath(x, masked);\n}\nvoid TSP()\n{   int i, j;\n    //g(i,S) is length of shortest path starting at i visiting all vertices in S and ending at 1\n    for(i=0; i &lt; n; i++)\n        for( j = 0; j &lt; npow; j++) \n                g[i][j] = p[i][j] = -1; \n    for (i = 0; i &lt; n; i++)\n        g[i][0] = adj[i][0]; //g(i,nullset)= direct edge between (i,1)\n\n    int result;\n    struct threadargs arguments;\n    arguments.a = 0;\n    arguments.b = npow-2;\n    arguments.c = &amp;result;\n    compute((void *) &amp;arguments);//npow-2 to exclude our \"home\" vertex\n    printf(\"Tour cost:%d\\n\",result);\n    printf(\"Tour path:\\n0 \");\n    getpath(0,npow-2);\n    printf(\"0\\n\");\n}\nint main(void) {\n    int i, j;\n    printf(\"Enter number of cities\\n\");\n    scanf(\"%d\", &amp;n);\n    npow=(int)pow(2, n);//bit number required to represent all possible sets\n    printf(\"Enter the adjacency matrix\\n\");\n    for (i = 0; i &lt; n; i++)\n       for (j = 0; j &lt; n; j++)\n            scanf(\"%d\", &amp;adj[i][j]);\n    TSP();\n    return 0;\n}\n</code></pre>\n\n<p>But I am getting segmentation fault while trying to execute this code. Following is the output of the gdb </p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n0x00007ffff78bf63e in pthread_join (threadid=4196128, \n    thread_return=0x0) at pthread_join.c:85\n85  pthread_join.c: No such file or directory.\n(gdb) backtrace\n#0  0x00007ffff78bf63e in pthread_join (threadid=4196128, \n    thread_return=0x0) at pthread_join.c:85\n#1  0x0000000000400b36 in compute (args=0x7fffffffde90) at tsp3.c:69\n#2  0x0000000000400db2 in TSP () at tsp3.c:107\n#3  0x0000000000400ec8 in main () at tsp3.c:120\n(gdb) \n</code></pre>\n\n<p>I know this will not give any noticeable performance gain but I want to try this. Thanks in advance.</p>\n\n<p>**edit : **\nI have rectified the errors but now I am facing new errors.I am getting correct answer when program runs but if I delete the line `printMatrix()\n, I get segmentation fault. The gdb log is as follows</p>\n\n<pre><code>(gdb) backtrace\n#0  __pthread_kill (threadid=0, signo=0)\n    at ../nptl/sysdeps/unix/sysv/linux/pthread_kill.c:42\n#1  0x0000000000400c85 in compute (args=0x7ffff74eede0) at tsp3.c:79\n#2  0x00007ffff78be182 in start_thread (arg=0x7ffff64ed700)\n    at pthread_create.c:312\n#3  0x00007ffff75eaefd in clone ()\n    at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n(gdb) \n</code></pre>\n\n<p>why is this happening. Please explain. Thanks in advance.</p>\n"}, {"tags": ["c++", "c", "c++11"], "comments": [{"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 5, "creation_date": 1443641364, "post_id": 32874142, "comment_id": 53579868, "body": "<i>And that was quiet true until the appearance of C++x0, C++11</i> No, C89 is not a subset of C++98."}, {"owner": {"reputation": 5456, "user_id": 99456, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Mjq7j.jpg?s=128&g=1", "display_name": "yannis", "link": "https://stackoverflow.com/users/99456/yannis"}, "edited": false, "score": 0, "creation_date": 1443951745, "post_id": 32874142, "comment_id": 53689951, "body": "This has been <a href=\"http://programmers.stackexchange.com/q/298665/25936\">migrated to Programmers</a>. I had to clear the actual migration history (which deleted the automated migration link) to deal with some technical nonsense (migrations getting locked upon rejection, etc)."}], "answers": [{"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 4, "last_activity_date": 1443643951, "last_edit_date": 1495535219, "creation_date": 1443641551, "answer_id": 32874209, "question_id": 32874142, "link": "https://stackoverflow.com/questions/32874142/should-i-stop-using-the-term-c-c/32874209#32874209", "title": "Should I stop using the term C/C++?", "body": "<blockquote>\n  <p>I was always told that C is a subset of C++ or C++ is C with classes. And that was quiet true until the appearance of C++x0, C++11 (or the modern C++ 11/14/17 in general).</p>\n</blockquote>\n\n<p>C has never been a subset of C++. For example C89 is not a subset of C++98. </p>\n\n<p>A few examples:</p>\n\n<ul>\n<li>the C89 <em>identifier-list form</em> for function parameter declaration is not supported in C++</li>\n<li>C89 and C++98 have different types for the characters constants</li>\n<li>C89 and C++98 have different types for string literals</li>\n<li>logical operators yield different types in C89 and C++98 (<code>int</code> vs <code>bool</code>)</li>\n</ul>\n\n<blockquote>\n  <ol>\n  <li>Should I stop using the term C/C++?</li>\n  </ol>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>If the answer to #1 is yes, how would I call a program that use a mix of C and C++?</li>\n  </ol>\n</blockquote>\n\n<p>A program is either C or C++ (if even some very basic program can compiled with either a C or a C++ compiler). What compiler are you using to compile it? It should answer your question. Harbison &amp; Steele coined the term <a href=\"https://stackoverflow.com/questions/9694776/what-is-clean-c-and-how-does-it-differ-from-standard-c\"><em>Clean C</em></a> to designate a common subset of C and C++ but I think it was a bad idea. </p>\n\n<p><strong>EDIT</strong>: However I admit that technically you can link C and C++ objects files in a single program but OTH there are many languages that are allowed to be mixed in a single program for example Java and C++. I think using the term C/C++ program only adds to the confusion that it is written in a single language called C/C++.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>Given that both of them are 'different' languages is it likely that at some point C++ compilers stop supporting code written in the C language (since modern c++ is diverging from the C mentality for basic stuff like pointers, dynamic memory handling, etc)</li>\n  </ol>\n</blockquote>\n\n<p>There are many features (example: variable length array, flexible array member, <code>_Generic</code>, ...) of C99 or C11 that are not supported by any C++ version.</p>\n"}, {"tags": [], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "is_accepted": true, "score": 4, "last_activity_date": 1443644233, "last_edit_date": 1443644233, "creation_date": 1443641577, "answer_id": 32874214, "question_id": 32874142, "link": "https://stackoverflow.com/questions/32874142/should-i-stop-using-the-term-c-c/32874214#32874214", "title": "Should I stop using the term C/C++?", "body": "<p>C was never a subset of C++. The most obvious example of this is <code>int new;</code>.  This has been true since C89 and C++98, and the languages have only grown further from each other as new standards have come out.</p>\n\n<blockquote>\n  <p>Should I stop using the term C/C++</p>\n</blockquote>\n\n<p>Yes</p>\n\n<blockquote>\n  <p>If the answer to #1 is yes, how would I call a program that use a mix of C and C++?</p>\n</blockquote>\n\n<p>A source file is written in one language or the other.  A program can consist of code from multiple languages working together, or an executable produced by linking different compiled objects.  You would say the program was written in C and C++, \"C/C++\" is not a language.</p>\n\n<blockquote>\n  <p>Given that both of them are 'different' languages is it likely that at some point C++ compilers stop supporting code written in the C language</p>\n</blockquote>\n\n<p>3) They never did. <code>int *a = malloc(10);</code>. <a href=\"http://ideone.com/2G9xT1\" rel=\"nofollow\">C</a> and <a href=\"http://ideone.com/zWSPTF#view_cmperr_content\" rel=\"nofollow\">C++</a> have long since diverged.  click the links or see below for a file that is fine with C89 and up, but isn't valid under any C++ standard.</p>\n\n<p>4) afaik no, the working groups are aware of each other but the standards make the decisions that are best for themselves.</p>\n\n<pre><code>/* A bunch of code that compiles and runs under C89 but fails under any C++ */\n\n/* type aliases and struct names occupy separate namespaces in C, not in C++ */\nstruct S { int i; };\ntypedef int S;\n\n\nstruct Outer { struct Inner { int i; } in; };\n/* struct Inner will be Outer::Inner in C++ due to name scope */\nstruct Inner inner;\n\n\n/* default return type of int in C, C++ functions need explicit return types */\ng() {\n    return 0;\n}\n\n\n/* C sees this as two declarations of the same integer,\n * C++ sees it as redefinition */\nint n;\nint n;\n\n\n/* K&amp;R style argument type declarations */\nvoid h(i) int i; { }\n\n\n/* struct type declaration in return type */\nstruct S2{int a;} j(void) { struct S2 s = {1}; return s; }\n\n\n/* struct type declaration in argument, stupid and useless, but valid */\n/*void dumb(struct S3{int a;} s) { } */\n\n\n/* enum/int assignment */\nenum E{A, B};\nenum E e = 1;\n\n\nvoid k() {\n    goto label; /* C allows jumping past an initialization */\n    {\n        int x = 0;\nlabel:\n        x = 1;\n    }\n}\n\n\n/* () in declaration means unspecified number of arguments in C, the definition\n * can take any number of arguments,\n * but means the same as (void) in C++  (definition below main) */\nvoid f();\n\nint main(void) {\n    f(1); /* doesn't match declaration in C++ */\n    {\n        /* new is a keyword in C++ */\n        int new = 0;\n    }\n\n    /* no stdio.h include results in implicit definiton in C.  However,\n     * as long as a matching function is found at link-time, it's fine.\n     * C++ requires a declaration for all called functions */\n    puts(\"C is not C++\");\n    {\n        int *ip;\n        void *vp = 0;\n        ip = vp; /* cast required in C++, not in C */\n    }\n    return 0;\n}\n\n/* matches declaration in C, not in C++ */\nvoid f(int i) { }\n</code></pre>\n\n<p>I always feel it's worth mentioning that C <em>is</em> a subset of Objective-C.</p>\n"}, {"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 2, "last_activity_date": 1443646420, "creation_date": 1443646420, "answer_id": 32875433, "question_id": 32874142, "link": "https://stackoverflow.com/questions/32874142/should-i-stop-using-the-term-c-c/32875433#32875433", "title": "Should I stop using the term C/C++?", "body": "<blockquote>\n  <p>In general the SO users ask the person who is asking the question to choose a language: C or C++. Why?</p>\n</blockquote>\n\n<p>There are many subtle differences between C and C++. For example, in C++, a <code>const</code> variable at global scope has internal linkage unless declared <code>extern</code>, but in C it has external linkage unless declared <code>static</code>. By saying \"C/C++\", the OP is asserting knowledge that the answer to their question is the same in both C and C++, when it very well might not be. <strong>This needlessly makes things harder for would-be answerers.</strong></p>\n\n<ul>\n<li><p>Sometimes we can spot that the code isn't valid in one language or the other (for example, implicit conversions from <code>void*</code> to pointer to object are not valid in C++). This is annoying. Why are you saying \"C/C++\" when you have a piece of code that's valid in C but not C++? Did you intend C, or is this just an error in code intended to be C++? </p></li>\n<li><p>Sometimes the answer will be different depending on the language (for example, variable-length arrays exist in C99 but not in C++). If we don't know what language you're talking about, either we have to guess, or write an answer for both when only one will actually be useful, because <em>you know which language you're actually using; you're just not telling us!</em></p></li>\n<li><p>Sometimes the answer really is the same for both languages, but it's hard to be sure. For example, I think C and C++ have the same integer conversion rules, but in order to be really, really sure, I have to read both standards carefully. Again, this makes me do twice as much work as necessary when you probably only care about one of the languages.</p></li>\n</ul>\n\n<p>Anyway, to answer your other questions:</p>\n\n<ol>\n<li><p>Yes.</p></li>\n<li><p>If you are linking together C and C++ code, it is acceptable to use both tags, but please specify which language each file is in.</p></li>\n<li><p>There are breaking changes sometimes, but they're rare and typically limited in impact (otherwise they don't get approved). For example, <code>auto</code> in C++11.</p></li>\n<li><p>I don't think they directly collaborate, but they pay attention to developments in the other language and try to avoid introducing changes that would make compatibility more difficult.</p></li>\n</ol>\n\n<p>And if you really do want to know about both languages, that's fine, and you can say that in your question. When you say \"C/C++\", I'm really not sure what you mean, and it really looks like you're making an assumption about the two languages.</p>\n"}], "owner": {"reputation": 13712, "user_id": 1313233, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/hBeXC.png?s=128&g=1", "display_name": "rkachach", "link": "https://stackoverflow.com/users/1313233/rkachach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "closed_date": 1443647966, "accepted_answer_id": 32874214, "answer_count": 3, "score": 0, "last_activity_date": 1443647881, "creation_date": 1443641277, "last_edit_date": 1443647881, "question_id": 32874142, "link": "https://stackoverflow.com/questions/32874142/should-i-stop-using-the-term-c-c", "closed_reason": "Not suitable for this site", "title": "Should I stop using the term C/C++?", "body": "<p>I understand C and C++ are different languages but when I was learning C++ I was always told that <strong>C is a subset of C++</strong> or C++ is C with classes. And that was quiet true until the appearance of C++x0, C++11 (or the modern C++ 11/14/17 in general). In fact (specially when working on embedded systems) it's very likely to find code written in C++ but with a lot of parts written entirely in pure C language. Here I have several questions:</p>\n\n<ol>\n<li>Should I stop using the term C/C++? </li>\n<li>If the answer to #1 is yes, how would I call a program that use a mix of C and C++?</li>\n<li>Given that both of them are 'different' languages is it likely that at some point C++ compilers stop supporting code written in the C language (since modern c++ is diverging from the C mentality for basic stuff like pointers, dynamic memory handling, etc)</li>\n<li>Is there right now any collaboration between the people who makes the standards of C/C++ to keep the compatibility</li>\n<li>If #4 is yes, such collaboration could end up in the near future with the appearance of the <em>modern c++</em> (11/14/17)</li>\n</ol>\n\n<p>I know that there already similar questions, but I'm sure that a lot of people share these doubts so I'm very interested to get good answers specially for the points that have to do with the C++ tendency in the near future.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1443639951, "post_id": 32873750, "comment_id": 53579231, "body": "malloc doesn&#39;t care WHAT you&#39;re going to use the memory for. it just needs to know how big of a block you want. calculate how much total ram your array will occupy, and ask malloc for that much. initializing can also be easy. e.g. <code>memset(array, 0, total_bytes_in_array)</code>"}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1443640493, "post_id": 32873750, "comment_id": 53579457, "body": "I have added a solution, which allocates everything contiguously and afterwards establishes row-pointers recursively. The data as well as the row-pointers are cleaned up using a <code>multi_free</code> function. I have versions where data is aligned also and where <code>unique_ptr</code>&#39;s are used"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1443640536, "post_id": 32873750, "comment_id": 53579476, "body": "Don&#39;t cast <code>malloc</code> in C."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1443640827, "post_id": 32873750, "comment_id": 53579610, "body": "Does it have to be a malloc-allocated array? Perhaps you can use a normal array: <b>int array[3][3][3];</b>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1443642147, "post_id": 32873750, "comment_id": 53580226, "body": "<b>There is no 3D array here!</b> A pointer is not an array (or vice versa)."}], "answers": [{"tags": [], "owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "is_accepted": false, "score": 0, "last_activity_date": 1443640967, "last_edit_date": 1443640967, "creation_date": 1443640385, "answer_id": 32873918, "question_id": 32873750, "link": "https://stackoverflow.com/questions/32873750/how-to-initialize-a-3d-contiguous-array-in-c/32873918#32873918", "title": "How to initialize a 3D contiguous array in C", "body": "<p>I am using some pretty neat methods for allocating multi-dimensional arrays with row pointers. The functions <code>multi_malloc</code> and <code>multi_free</code> can be used for arrays with arbitrary dimensions and arbitrary types and they work on basically all platforms and from C and C++</p>\n\n<p>You can allocate, e.g. a 3-dimensional array with row-pointers recursively. E.g. a 10x20x30 dimensional array</p>\n\n<pre><code>float*** data = (float***) multi_malloc(sizeof(float),3, 10,20,20);\n</code></pre>\n\n<p>access elements like</p>\n\n<pre><code>data[2][3][4] = 2.0;\n</code></pre>\n\n<p>and free everything like (data as well as row pointers)</p>\n\n<pre><code>multi_free(data,3);\n</code></pre>\n\n<p>The header, which I think should be part of C is</p>\n\n<pre><code>#pragma once\n\n#include &lt;stdlib.h&gt;\n#include &lt;stddef.h&gt;\n#include &lt;stdarg.h&gt;\n#include &lt;string.h&gt;\n\n#if (defined(_MSC_VER) &amp;&amp; defined(_WIN32))\n// Note when used inside a namespace, the static is superfluous\n# define STATIC_INLINE_BEGIN static inline //__forceinline\n# define STATIC_INLINE_END\n#elif (defined(__GNUC__))\n# define STATIC_INLINE_BEGIN static inline\n# if defined(__CYGWIN__)\n#  define STATIC_INLINE_END\n# else\n#  define STATIC_INLINE_END __attribute__ ((always_inline))\n# endif\n#endif\n\nSTATIC_INLINE_BEGIN void* multi_malloc(size_t s, size_t d, ...) STATIC_INLINE_END;\n\nSTATIC_INLINE_BEGIN void multi_free(void *r, size_t d) STATIC_INLINE_END;\n\n/** \n * Allocate multi-dimensional array and establish row pointers\n * \n * @param s size of each element\n * @param d number of dimension\n * \n * @return \n */\nSTATIC_INLINE_BEGIN void* multi_malloc(size_t s, size_t d, ...) {\n\n  char* tree;\n\n  va_list ap;             /* varargs list traverser */\n  size_t max,             /* size of array to be declared */\n    *q;                   /* pointer to dimension list */\n  char **r,               /* pointer to beginning of the array of the\n                           * pointers for a dimension */\n    **s1, *t;             /* base pointer to beginning of first array */\n  size_t i, j;            /* loop counters */\n  size_t *d1;             /* dimension list */\n\n  va_start(ap,d);\n  d1 = (size_t *) malloc(d*sizeof(size_t));\n\n  for(i=0;i&lt;d;i++)\n    d1[i] = va_arg(ap,size_t);\n\n  r = &amp;tree;\n  q = d1;                 /* first dimension */\n\n  if (d==1) {\n    max = *q;\n    free(d1);\n    return malloc(max*d);\n  }\n\n  max = 1;\n  for (i = 0; i &lt; d - 1; i++, q++) {      /* for each of the dimensions\n                                           * but the last */\n    max *= (*q);\n    r[0]=(char *)malloc(max * sizeof(char **));\n    r = (char **) r[0];     /* step through to beginning of next\n                             * dimension array */\n  }\n  max *= s * (size_t) (*q);        /* grab actual array memory */\n  r[0] = (char *)malloc(max * sizeof(char));\n\n  /*\n   * r is now set to point to the beginning of each array so that we can\n   * use it to scan down each array rather than having to go across and\n   * then down\n   */\n  r = (char **) tree;     /* back to the beginning of list of arrays */\n  q = d1;                 /* back to the first dimension */\n  max = 1;\n  for (i = 0; i &lt; d - 2; i++, q++) {    /* we deal with the last\n                                         * array of pointers later on */\n    max *= (*q);                        /* number of elements in this dimension */\n    for (j=1, s1=r+1, t=r[0]; j&lt;max; j++) { /* scans down array for\n                                             * first and subsequent\n                                             * elements */\n\n      /*  modify each of the pointers so that it points to\n       * the correct position (sub-array) of the next\n       * dimension array. s1 is the current position in the\n       * current array. t is the current position in the\n       * next array. t is incremented before s1 is, but it\n       * starts off one behind. *(q+1) is the dimension of\n       * the next array. */\n\n      *s1 = (t += sizeof (char **) * *(q + 1));\n      s1++;\n    }\n    r = (char **) r[0];     /* step through to begining of next\n                             * dimension array */\n  }\n  max *= (*q);              /* max is total number of elements in the\n                             * last pointer array */\n\n  /* same as previous loop, but different size factor */\n  for (j = 1, s1 = r + 1, t = r[0]; j &lt; max; j++)\n    *s1++ = (t += s * *(q + 1));\n\n  va_end(ap);\n  free(d1);\n\n  return((void *)tree);              /* return base pointer */\n}\n\n/** \n * Free multi-dimensional array and corresponding row pointers\n * \n * @param r data\n * @param d number of dimensions\n */\nSTATIC_INLINE_BEGIN void multi_free(void *r, size_t d) {\n\n  void **p;\n  void *next=NULL;\n  size_t i;\n\n  for (p = (void **)r, i = 0; i &lt; d; p = (void **) next,i++)\n    if (p != NULL) {\n      next = *p;\n      free(p);\n      p = NULL;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1443640822, "post_id": 32873957, "comment_id": 53579608, "body": "It is incorrect to cast the output of malloc in C.  That is only a C++ requirement, but not C."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1443641227, "post_id": 32873957, "comment_id": 53579800, "body": "Would you go with <i>bad form</i>?  Either way, its not a good idea.  In C, it can lead to wrong assumptions about the pointer, or object returned."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1443641475, "post_id": 32873957, "comment_id": 53579935, "body": "OP said he is not a C programmer, I&#39;m not sure it will be very helpful for him to explain what is wrong with casting. There is no wrong assumptions with casting just a potential problem if <code>stdlib.h</code> not included. It is a long debate either."}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": true, "score": 1, "last_activity_date": 1443640570, "creation_date": 1443640570, "answer_id": 32873957, "question_id": 32873750, "link": "https://stackoverflow.com/questions/32873750/how-to-initialize-a-3d-contiguous-array-in-c/32873957#32873957", "title": "How to initialize a 3D contiguous array in C", "body": "<pre><code>int*** x = (int***)malloc(3*sizeof(int***));\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>int*** x = (int***)malloc(3*sizeof(int**));\n</code></pre>\n\n<p>Now initialization can be :</p>\n\n<pre><code>  for(i = 0; i &lt; 3; i++)\n  {\n    x[i] = y + 3*i;\n    for(j = 0; j &lt; 3; j++)\n    {\n      x[i][j] = array + i*3*3 + j*3;\n    }\n  }\n</code></pre>\n\n<p>So that <code>x[0]</code> points to the first element of <code>y</code>, <code>x[1]</code> to the fourth, etc.\nAnd <code>x[0][0]</code>=<code>y[0]</code> to the first of <code>array</code>, <code>x[0][1]</code>=<code>y[1]</code> to the fourth of <code>array</code>, etc.</p>\n"}, {"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443705602, "post_id": 32874279, "comment_id": 53607014, "body": "@chux - Ummm - yeah, it was a mess.  Thanks.   I re-worked it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443709872, "post_id": 32874279, "comment_id": 53609948, "body": "<code>calloc(p, sizeof(int *));</code> --&gt; <code>calloc(p, sizeof(int **));</code> (add *) or better <code>calloc(p, sizeof *arr);</code> which is less likely to get the type wrong."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443715521, "post_id": 32874279, "comment_id": 53613729, "body": "<code>sizeof (arr)==sizeof(*arr)==sizeof(**arr)</code> certainly is true in your implementation.  Yet, per spec, pointers of different types may differ in size.  Different sized pointers is not uncommon between pointers to data, constant data, and functions."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443715578, "post_id": 32874279, "comment_id": 53613754, "body": "@chux - I edited to take the sizeof a pointer, using <code>arr</code> as the pointer.  I understand this is good to avoid type errors  (in this case using <code>int ***arr;</code>).  However, because sizeof (arr)==sizeof(*arr)==sizeof(**arr), I do not understand why you suggested sizeof(*arr)? (i.e., all of them are  a sizeof a pointer, including sizeof(arr) in thes case ).  Stated more succinctly, sizeof pointer to any type is still just the size of a pointer.  Each will be different between different addressing architecture  (eg 32 or 64 bit) but within same addressing, pointers to all types are same value."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443715635, "post_id": 32874279, "comment_id": 53613794, "body": "Sorry to comment again, bbut code should be <code>arr = calloc(p, sizeof *arr);</code>, <code>arr[x] = calloc(c ,sizeof *(arr[x]))</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443715738, "post_id": 32874279, "comment_id": 53613851, "body": "&quot;sizeof pointer to any type is still just the size of a pointer&quot; is not per C spec.  Suggest posting it as a SO question if not convinced."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443715978, "post_id": 32874279, "comment_id": 53613994, "body": "@chux - Please explain.   when will the sizeof macro   return a different value for sizeof int **, or int *** or int **a[]?.  I don&#39;t think (with the exception of going to a different addressing architecture) that it ever will.  Please explain why I am incorrect.  (I am not trying to be obstinate, just trying to understand your reasoning)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443716160, "post_id": 32874279, "comment_id": 53614099, "body": "<a href=\"http://stackoverflow.com/questions/1241205/are-all-data-pointers-the-same-size-in-one-platform-for-all-data-types\" title=\"are all data pointers the same size in one platform for all data types\">stackoverflow.com/questions/1241205/&hellip;</a>"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443717285, "post_id": 32874279, "comment_id": 53614730, "body": "@chux - very good link.  Thank you, I was operating under a wrong assumption."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 0, "last_activity_date": 1443714995, "last_edit_date": 1443714995, "creation_date": 1443641904, "answer_id": 32874279, "question_id": 32873750, "link": "https://stackoverflow.com/questions/32873750/how-to-initialize-a-3d-contiguous-array-in-c/32874279#32874279", "title": "How to initialize a 3D contiguous array in C", "body": "<p>Although I think a normal array, created on the stack would be best:</p>\n\n<pre><code>int array[3][3][3];//can avoid a lot of free() calls later on\n</code></pre>\n\n<p>Here is a way to create a 3D array dynamically:<br>\n(I use calloc here instead of malloc as it creates initialized memory space)  </p>\n\n<pre><code>int *** Create3D(int p, int c, int r) \n{\n    int ***arr;\n    int    x,y;\n\n    arr = calloc(p, sizeof(arr)); //memory for int\n    for(x = 0; x &lt; p; x++)\n    {\n        arr[x] = calloc(c ,sizeof(arr)); //memory for pointers\n        for(y = 0; y &lt; c; y++)\n        {\n            arr[x][y] = calloc(r, sizeof(int));\n        }\n    }\n    return arr;\n}\n</code></pre>\n\n<p><strong><em>Usage</em></strong> could be:</p>\n\n<pre><code>int ***array = Create3D(3,3,3);\nfor(i=0;i&lt;3;i++)\n        for(j=0;j&lt;3;j++)\n                for(k=0;k&lt;3;k++)\n                    array[i][j][k] = (i+1)*(j+1)*(k+1);\n</code></pre>\n\n<p>Note that the return of [c][m][re]alloc() is not cast in this example.  Although not strictly forbidden in C, it is not recommended.  (this is not the case in C++, where it <em>is</em> required)<br>\n<strong><em>Keep in mind</em></strong>, everything allocated, must be freed.  Notice freeing is done in reverse order of allocating:</p>\n\n<pre><code>void free3D(int ***arr, int p, int c)\n{\n    int i,j;\n    for(i=0;i&lt;p;i++)\n    {\n        for(j=0;j&lt;c;j++)\n        {\n            if(arr[i][j]) free(arr[i][j]);\n        }\n        if(arr[i]) free(arr[i]);\n    }\n    if(arr) free(arr);\n}\n</code></pre>\n\n<p><strong><em>Usage</em></strong> could be:</p>\n\n<pre><code>free3D(array,3,3);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1443645494, "post_id": 32874288, "comment_id": 53581794, "body": "Note: <code>sizeof(int) * N * N * N * </code> has an advantage over <code>N * N * N * sizeof(int)</code>: <code>int</code> multiplication could overflow, but possible not <code>(size_t)</code> multiplication."}], "tags": [], "owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "is_accepted": false, "score": 0, "last_activity_date": 1443643098, "last_edit_date": 1443643098, "creation_date": 1443641965, "answer_id": 32874288, "question_id": 32873750, "link": "https://stackoverflow.com/questions/32873750/how-to-initialize-a-3d-contiguous-array-in-c/32874288#32874288", "title": "How to initialize a 3D contiguous array in C", "body": "<p>You can allocate memory for buffer of items where each item is a two dimensional array. So it is effectively is a three dimensional array:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define N 3\n\nint main()\n{\n    int (*array)[N][N] = malloc(N * N * N * sizeof(int));\n\n    /* set 0 to all values */\n    memset(array, 0, N * N * N * sizeof(int));\n\n    /* use as 3D array */\n    array[0][0][0] = 1;\n    array[1][1][1] = 2;\n    array[2][2][2] = 3;\n\n    int i;\n    /* print array as contiguous buffer */\n    for (i = 0; i &lt; N * N * N; ++i)\n        printf(\"i: %d\\n\", ((int*) array)[i]);\n\n    free(array);\n\n    return 0;\n}\n</code></pre>\n\n<p>So, in memory the <code>array</code> is placed as regular <code>int array[N][N][N]</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443645756, "post_id": 32874289, "comment_id": 53581918, "body": "<code>T *arr = malloc( sizeof *arr * d0 * d1 * d2 );</code>  nicely done!"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443646030, "post_id": 32874289, "comment_id": 53582066, "body": "@chux - I wish I could say it was being smart, but that would be a lie.  I just got into the habit of putting the <code>sizeof</code> expression first, without thinking about overflow issues.  It just scanned better to me."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443646250, "post_id": 32874289, "comment_id": 53582173, "body": "I used to put the <code>sizeof()</code> last for <code>malloc()</code> as to resemble <code>calloc(count, size)</code> signature, but realized later the advantage of using <code>sizeof()</code> first.  This will rise in importance with wider machines that have <code>size_t</code> &gt; 32 bits, yet keep <code>int</code> 32-bit."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1443642283, "last_edit_date": 1443642283, "creation_date": 1443641968, "answer_id": 32874289, "question_id": 32873750, "link": "https://stackoverflow.com/questions/32873750/how-to-initialize-a-3d-contiguous-array-in-c/32874289#32874289", "title": "How to initialize a 3D contiguous array in C", "body": "<p>To allocate a <em>contiguous</em> 3D array, you only need to do the following (assumes all dimensions are known at compile time):</p>\n\n<pre><code>#define D0 ...\n#define D1 ...\n#define D2 ...\n...\nT (*arr)[D1][D2] = malloc( sizeof *arr * D0 ); // for any type T\n...\narr[i][j][k] = some_value();\n...\n</code></pre>\n\n<p><code>arr</code> is declared as a pointer to a <code>D1</code>x<code>D2</code> array.  We then allocate enough space for <code>D0</code> such arrays (<code>sizeof *arr == sizeof (T [D1][D2])</code>).  </p>\n\n<p>With this method, all of the memory for the array is allocated contiguously. Also, you only need one call to <code>free</code> to deallocate the whole thing.  </p>\n\n<p>If your dimensions are not known until runtime <em>and</em> you're using a C99 compiler or a C2011 compiler that supports variable-length arrays, you're still in luck:</p>\n\n<pre><code>size_t d0, d1, d2;\n...\nT (*arr)[d1][d2] = malloc( sizeof *arr * d0 );\n</code></pre>\n\n<p>The main issue is how to pass this as an argument to a function.  Assuming that <code>D1</code> and <code>D2</code> are known at compile time, if you decide to pass it as</p>\n\n<pre><code>foo( arr, D0 );\n</code></pre>\n\n<p>then the prototype for <code>foo</code> will need to be</p>\n\n<pre><code>void foo( T (*aptr)[D1][D2], size_t n ) \n{\n  ...\n  aptr[i][j][k] = ...;\n}\n</code></pre>\n\n<p>and it will only be useful for <em><code>n</code></em> x <code>D1</code> x <code>D2</code>-sized arrays.  </p>\n\n<p>If you go the VLA route, you'll need to declare the dimensions and pass values for them as well:</p>\n\n<pre><code>void foo( size_t d0, size_t d1, size_t d2, T (*aptr)[d1][d2] ) // d1 and d2 *must* be \n                                                               // declared before aptr\n{\n  ...\n  arr[i][j][k] = some_value();\n}\n\nvoid bar( void )\n{\n  size_t d0, d1, d2;\n  ...\n  T (*arr)[d1][d2] = malloc( sizeof *arr * d0 );\n  ...\n  foo( d0, d1, d2, arr );\n  ...\n}\n</code></pre>\n\n<p>If you don't have a compiler that supports VLAs, but you still want to allocate this memory contiguously, then you'll have to go the old-fashioned route - allocate it as a 1D array and compute your offsets manually:</p>\n\n<pre><code>T *arr = malloc( sizeof *arr * d0 * d1 * d2 );\n...\narr[i * d0 * d1 + j * d1 + k] = some_value(); \n</code></pre>\n"}], "owner": {"reputation": 1466, "user_id": 3165938, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/68c81dc662aabe3ea508d9132d7f7074?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/3165938/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 794, "favorite_count": 1, "accepted_answer_id": 32873957, "answer_count": 5, "score": 0, "last_activity_date": 1443714995, "creation_date": 1443639778, "question_id": 32873750, "link": "https://stackoverflow.com/questions/32873750/how-to-initialize-a-3d-contiguous-array-in-c", "title": "How to initialize a 3D contiguous array in C", "body": "<p>I know how to do a potentioal non-contiguous array in the following way:</p>\n\n<pre><code>int main () {\n  int ***array = (int***)malloc(3*sizeof(int**));\n  int i, j;\n\n  for (i = 0; i &lt; 3; i++) {\n    // Assign to array[i], not *array[i] (that would dereference an uninitialized pointer)\n    array[i] = (int**)malloc(3*sizeof(int*));\n    for (j = 0; j &lt; 3; j++) {\n      array[i][j] = (int*)malloc(3*sizeof(int));\n    }\n  }\n\n  array[1][2][1] = 10;\n\n  return 0;\n}\n</code></pre>\n\n<p>with the code above, the array[0][j] blocks can be not contiguous. To get contiguous, I feel that we need to malloc in this way</p>\n\n<pre><code>int* array = (int*)malloc(3*3*3*sizeof(int));\nint** y = (int**)malloc(3*3*sizeof(int**));\nint*** x = (int***)malloc(3*sizeof(int***));\n\n  for(i = 0; i &lt; 3; i++)\n    {\n      vals = vals + i*m*n;\n      x[i] = &amp;vals;\n      for(j = 0; j &lt; 3; j++)\n    {\n    x[i][j] = vals + j * n;\n    }\n    }\n</code></pre>\n\n<p>However, I got troulbe with address assignment. I am not a c programmer, can anyone correct my fault? Thanks in advance...</p>\n"}, {"tags": ["c", "arrays", "variables", "variable-assignment"], "comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1443639905, "post_id": 32873744, "comment_id": 53579209, "body": "<b>char inputString1[11];</b> vs <b>int* convertTwosComp(char *inputStringIn, int *inputIntIn);</b>  do you see the difference ?"}, {"owner": {"reputation": 38, "user_id": 4552502, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/96737bd77b9da76ae4cdb9bba0a41961?s=128&d=identicon&r=PG&f=1", "display_name": "Thorx99", "link": "https://stackoverflow.com/users/4552502/thorx99"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1443640074, "post_id": 32873744, "comment_id": 53579283, "body": "honestly I&#39;m a bit lost but I think you are saying that I&#39;m returning a pointer and not an array...maybe?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1443640099, "post_id": 32873744, "comment_id": 53579297, "body": "<code>void *memcpy(void *dest, const void *src, size_t count);</code>"}, {"owner": {"reputation": 38, "user_id": 4552502, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/96737bd77b9da76ae4cdb9bba0a41961?s=128&d=identicon&r=PG&f=1", "display_name": "Thorx99", "link": "https://stackoverflow.com/users/4552502/thorx99"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1443640304, "post_id": 32873744, "comment_id": 53579377, "body": "@WeatherVane any chance you could elaborate I&#39;m not familiar with that function."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1443640347, "post_id": 32873744, "comment_id": 53579401, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/dswaw1wk.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/dswaw1wk.aspx</a> In this case <code>count</code> is the number of <b>bytes</b> to be copied, nothing to do with data size as used with pointer arithmetic."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1443640672, "post_id": 32873744, "comment_id": 53579549, "body": "... although I&#39;m not sure you really mean one array to be <b>equal</b> to another if they are of different types."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1443640690, "post_id": 32873744, "comment_id": 53579556, "body": "C does not permit assigning to whole arrays.  You can assign to variables of pointer type (which sometimes point to arrays), or you can can copy <i>elements</i> from one array to another.  As it is currently declared in your code, however, variable <code>inputInt1</code> is not itself a modifiable lvalue."}, {"owner": {"reputation": 38, "user_id": 4552502, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/96737bd77b9da76ae4cdb9bba0a41961?s=128&d=identicon&r=PG&f=1", "display_name": "Thorx99", "link": "https://stackoverflow.com/users/4552502/thorx99"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1443640711, "post_id": 32873744, "comment_id": 53579566, "body": "void *memcpy(*inputInt1,*convertTwosComp(inputString1, inputInt1), 10);  would this be the way to use that function. @WeatherVane"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1443640862, "post_id": 32873744, "comment_id": 53579628, "body": "On the other hand, you might not need to assign at all.  If, as in your code, you pass an array as a function argument, then the called function can modify the array (elements) directly.  You might not need anything more."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1443640879, "post_id": 32873744, "comment_id": 53579636, "body": "Having looked at your code a bit closer, and its different data types, it&#39;s not really clear what array you want to &quot;equal&quot; which other. And no, that&#39;s not the way to use that function. The answer from @Michi shows the straight forward way to copy one array to another array (provided the target has enough elements)."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1443641456, "post_id": 32873744, "comment_id": 53579926, "body": "You&#39;re not trying to assign one array to another; you&#39;re trying to assign a pointer to an array."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1443642281, "post_id": 32873744, "comment_id": 53580289, "body": "C does not support <b>methods</b>, but only <b>functions</b>"}], "answers": [{"tags": [], "owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "is_accepted": false, "score": 1, "last_activity_date": 1443640816, "creation_date": 1443640816, "answer_id": 32874024, "question_id": 32873744, "link": "https://stackoverflow.com/questions/32873744/how-to-make-an-array-equal-another-array-in-c/32874024#32874024", "title": "How to make an Array equal another array in C", "body": "<p>This is what you probably need:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void){\n    char array1[] = \"Michi\";\n    size_t len = strlen(array1);\n    char *array2 = malloc(len+1);\n\n    memcpy(array2, array1, len+1);\n\n    printf(\"Array2 = %s\\n\",array2);\n    free(array2);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>Array2 = Michi</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 199, "user_id": 4566544, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/edd9bc0301f0373846888a570f1484d6?s=128&d=identicon&r=PG", "display_name": "Thomas E", "link": "https://stackoverflow.com/users/4566544/thomas-e"}, "is_accepted": false, "score": 1, "last_activity_date": 1443642922, "creation_date": 1443642922, "answer_id": 32874526, "question_id": 32873744, "link": "https://stackoverflow.com/questions/32873744/how-to-make-an-array-equal-another-array-in-c/32874526#32874526", "title": "How to make an Array equal another array in C", "body": "<p>You can always use a for loop to copy a string, in case you do not want to use memcpy.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    char one[30];\n    char two[30];\n    while(fgets(one,sizeof(one),stdin))\n    {\n        int len = strlen(one);\n        for(int i = 0; i &lt; (len + 1); i++)\n        {\n            two[i] = one[i];\n        }\n        printf(\"%s\", two);\n        break;\n    }\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}], "owner": {"reputation": 38, "user_id": 4552502, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/96737bd77b9da76ae4cdb9bba0a41961?s=128&d=identicon&r=PG&f=1", "display_name": "Thorx99", "link": "https://stackoverflow.com/users/4552502/thorx99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8662, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443642922, "creation_date": 1443639767, "question_id": 32873744, "link": "https://stackoverflow.com/questions/32873744/how-to-make-an-array-equal-another-array-in-c", "title": "How to make an Array equal another array in C", "body": "<p>I am having trouble making an array equal another array in c.\nin the main method it will not let me assign inputInt1 to the returned value of converTwosComp.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint validChecker(char *input_StringIn);\nint* convertTwosComp(char *inputStringIn, int *inputIntIn);\nint main(void) {\n    char inputString1[11];\n    char inputString2[11];\n    int inputInt1[11];\n    int inputInt2[11];\n\n    printf(\" is \");\n    inputInt1 = convertTwosComp(inputString1, inputInt1);\n    for(i = 0; inputString1[i]; i++){\n        printf(\"%d\", inputInt1[i]);\n    }\n\n\n    int * convertTwosComp(char *inputStringIn, int *inputIntIn){\n    int digit;\n    int i;\n\n    if((inputStringIn[0] == '+') ||(inputStringIn[0]) == '0'){\n        inputStringIn[0] = 0;\n    }\n    if(inputStringIn[0] == '-'){\n        inputStringIn[0] = 1;\n    }\n    for(i = 0; inputStringIn[i]; i++){\n        digit = inputStringIn[i] - '0';\n        inputStringIn[i] = digit;\n    }\n\n    for(i = 0; inputIntIn[i]; i++){\n        if(inputIntIn[i] == 0){\n            inputIntIn[i] = 1;\n        }\n        if(inputIntIn[i] == 1){\n            inputIntIn[i] = 0;\n        }\n    }\n    return inputIntIn;\n\n\n\n}\n</code></pre>\n\n<p>in the main method it will not let me assign inputInt1 to the returned value of converTwosComp.</p>\n"}, {"tags": ["c", "lua"], "comments": [{"owner": {"reputation": 6292, "user_id": 1483676, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/h2IgH.jpg?s=128&g=1", "display_name": "cubuspl42", "link": "https://stackoverflow.com/users/1483676/cubuspl42"}, "edited": false, "score": 1, "creation_date": 1443639479, "post_id": 32873597, "comment_id": 53579010, "body": "Could you consider editing it to <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>?"}, {"owner": {"reputation": 1281, "user_id": 402390, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bf0b81f0e833bbfbe809a254e72a2171?s=128&d=identicon&r=PG", "display_name": "Doddy", "link": "https://stackoverflow.com/users/402390/doddy"}, "reply_to_user": {"reputation": 6292, "user_id": 1483676, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/h2IgH.jpg?s=128&g=1", "display_name": "cubuspl42", "link": "https://stackoverflow.com/users/1483676/cubuspl42"}, "edited": false, "score": 0, "creation_date": 1443639806, "post_id": 32873597, "comment_id": 53579159, "body": "@cubuspl42 Apologies, I&#39;m modifying the question to include only the issue at hand."}], "answers": [{"comments": [{"owner": {"reputation": 1281, "user_id": 402390, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bf0b81f0e833bbfbe809a254e72a2171?s=128&d=identicon&r=PG", "display_name": "Doddy", "link": "https://stackoverflow.com/users/402390/doddy"}, "edited": false, "score": 0, "creation_date": 1443640447, "post_id": 32873900, "comment_id": 53579436, "body": "Thanks for your answer. Can you help me with why there&#39;s a function on the stack after the <code>luaL_loadfile()</code>?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 1281, "user_id": 402390, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bf0b81f0e833bbfbe809a254e72a2171?s=128&d=identicon&r=PG", "display_name": "Doddy", "link": "https://stackoverflow.com/users/402390/doddy"}, "edited": false, "score": 2, "creation_date": 1443642200, "post_id": 32873900, "comment_id": 53580242, "body": "@Doddy: Because that&#39;s how it&#39;s defined to work. <code>luaL_loadfile</code> is equivalent to <code>luaL_loadfilex</code> with mode equal to <code>NULL</code>. <code>luaL_loadfilex</code> returns the same results as <code>lua_load</code>. <code>lua_load</code> &quot;pushes the compiled chunk as a Lua function on top of the stack&quot; (or pushes an error message). Start at <a href=\"http://www.lua.org/manual/5.3/manual.html#luaL_loadfile\" rel=\"nofollow noreferrer\">lua.org/manual/5.3/manual.html#luaL_loadfile</a> and follow the links."}], "tags": [], "owner": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "is_accepted": true, "score": 3, "last_activity_date": 1443640721, "last_edit_date": 1443640721, "creation_date": 1443640310, "answer_id": 32873900, "question_id": 32873597, "link": "https://stackoverflow.com/questions/32873597/get-lua-string-from-c/32873900#32873900", "title": "Get Lua string from C", "body": "<p><code>luaL_loadfile</code> loads a Lua script but does not execute it and so does not define the global <code>program</code>. Use <code>luaL_dofile</code> instead.</p>\n\n<p><code>luaL_loadfile</code> compiles a Lua script and leaves the code as a Lua function on the stack.</p>\n\n<p><code>luaL_dofile</code> calls <code>luaL_loadfile</code> and then calls that function.</p>\n\n<p>See the manual entries for <a href=\"http://www.lua.org/manual/5.3/manual.html#luaL_loadfile\" rel=\"nofollow\">luaL_loadfile</a> and <a href=\"http://www.lua.org/manual/5.3/manual.html#luaL_dofile\" rel=\"nofollow\">luaL_dofile</a>.</p>\n"}], "owner": {"reputation": 1281, "user_id": 402390, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bf0b81f0e833bbfbe809a254e72a2171?s=128&d=identicon&r=PG", "display_name": "Doddy", "link": "https://stackoverflow.com/users/402390/doddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "accepted_answer_id": 32873900, "answer_count": 1, "score": 1, "last_activity_date": 1443640721, "creation_date": 1443639206, "last_edit_date": 1443640375, "question_id": 32873597, "link": "https://stackoverflow.com/questions/32873597/get-lua-string-from-c", "title": "Get Lua string from C", "body": "<p>I'm trying to learn Lua and how to interface to and from C with it. My first attempt follows but has been simplified to include only the issue I'm seeing.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;linux/limits.h&gt; /* For PATH_MAX */\n#include &lt;unistd.h&gt;\n#include &lt;getopt.h&gt;\n#include &lt;lua.h&gt;\n#include &lt;lualib.h&gt;\n#include &lt;lauxlib.h&gt;\n\n#define EXITF exit(EXIT_FAILURE)\n\nlua_State* lua;\n\nvoid stackDump(lua_State* lua)\n{\n    int i, t;\n    int top = lua_gettop(lua);\n\n    for (i = 1; i &lt;= top; i++)\n    {\n        t = lua_type(lua, i);\n\n        switch (t)\n        {\n            case LUA_TSTRING:\n                printf(\"\\\"%s\\\"\", lua_tostring(lua, i));\n                break;\n\n            case LUA_TBOOLEAN:\n                printf(lua_toboolean(lua, i) ? \"true\" : \"false\");\n\n            case LUA_TNUMBER:\n                printf(\"%g\", lua_tonumber(lua, i));\n                break;\n\n            default:\n                printf(\"%s\", lua_typename(lua, t));\n                break;\n        }\n\n        if (i &lt; top)\n           printf(\", \");\n    }\n\n    printf(\"\\n\");\n}\n\nint main(int argc, char** argv)\n{\n    int opt;\n    char cfgFile[PATH_MAX];\n    cfgFile[0] = 0;\n\n    lua = luaL_newstate();\n    luaL_openlibs(lua);\n\n    stackDump(lua);\n\n    while ((opt = getopt(argc, argv, \"c:\")) != -1)\n    {\n        switch (opt)\n        {\n            case 'c':\n                strncpy(cfgFile, optarg, PATH_MAX);\n                cfgFile[PATH_MAX - 1] = 0;\n                break;\n        }\n    }\n\n    if (cfgFile[0] == 0)\n    {\n        fprintf(stderr, \"No cfg file specified\\n\");\n        return EXIT_FAILURE;\n    }\n\n    printf(\"cfgFile = \\\"%s\\\"\\n\", cfgFile);\n\n    if (luaL_loadfile(lua, cfgFile) != LUA_OK)\n    {\n        fprintf(stderr, \"%s\\n\", lua_tostring(lua, -1));\n        lua_pop(lua, 1);\n        lua_close(lua);\n        return EXIT_FAILURE;\n    }\n\n    stackDump(lua);\n\n    lua_getglobal(lua, \"program\");\n\n    stackDump(lua);\n\n    if (lua_isstring(lua, -1) == 0)\n    {\n        fprintf(stderr, \"`program` should be a string\\n\");\n        lua_close(lua);\n        return EXIT_FAILURE;\n    }\n\n    char execArg0[256];\n\n    strncpy(execArg0, lua_tostring(lua, -1), 256);\n    lua_pop(lua, 1);\n\n    lua_close(lua);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Lua script:</p>\n\n<pre><code>#!/usr/bin/env lua\n\nprogram = \"echo\"\n</code></pre>\n\n<p>What I'm seeing when running this is:</p>\n\n<pre><code>$ ./wrapper2 -c wrapper2.lua\n\ncfgFile = \"wrapper2.lua\"\nfunction\nfunction, nil\n`program` should be a string\n</code></pre>\n\n<p>Note that the empty line is intentional; <code>stackDump()</code> tells us that the stack is empty at that point. It seems that the call to <code>lua_getglobal(lua, \"program\")</code> is pushing <code>nil</code> on the stack instead of the string <code>\"echo\"</code>. Please could you help me work out why I'm seeing this?</p>\n\n<p>As a side question: why is there a function pushed on the stack (presumably by <code>luaL_loadfile()</code>)? I don't remember reading that functions are pushed on the stack automatically.</p>\n"}, {"tags": ["c", "csv", "strcmp"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1443637528, "post_id": 32873162, "comment_id": 53577951, "body": "<code>fgets(data, sizeof(data), f) != 0</code> -&gt; <code>fgets(data, sizeof(data), f) != NULL</code>"}, {"owner": {"reputation": 9, "user_id": 5394407, "user_type": "registered", "profile_image": "https://graph.facebook.com/1096339970383717/picture?type=large", "display_name": "Luis Guerrero Severino", "link": "https://stackoverflow.com/users/5394407/luis-guerrero-severino"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1443637812, "post_id": 32873162, "comment_id": 53578103, "body": "thank you, although it also works with 0"}, {"owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 1, "creation_date": 1443637855, "post_id": 32873162, "comment_id": 53578132, "body": "To what exactly do you want to compare the first line of the file? And what do you mean by first line? The header line or the first data line? And what should be the result of your comparison?"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1443638615, "post_id": 32873162, "comment_id": 53578531, "body": "Yes, because in your case <code>NULL</code> is defined as <code>0</code> or <code>(void *)0</code>, but you can not rely on this in all implementations, why are you (f)opening a fixed path after requesting a path?"}, {"owner": {"reputation": 9, "user_id": 5394407, "user_type": "registered", "profile_image": "https://graph.facebook.com/1096339970383717/picture?type=large", "display_name": "Luis Guerrero Severino", "link": "https://stackoverflow.com/users/5394407/luis-guerrero-severino"}, "reply_to_user": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1443638656, "post_id": 32873162, "comment_id": 53578555, "body": "@honk 13 If &quot;Date&quot;, &quot;Time&quot;, &quot;Volt&quot; &quot;Amp&quot;  &quot;Wirkfaktor&quot; is not in the first line of the file is the file incorrectly. If the file contains &quot;Date&quot;, &quot;Time&quot;, &quot;Volt&quot; &quot;Amp&quot;  &quot;Wirkfaktor&quot; in the first line, the file is correct"}, {"owner": {"reputation": 9, "user_id": 5394407, "user_type": "registered", "profile_image": "https://graph.facebook.com/1096339970383717/picture?type=large", "display_name": "Luis Guerrero Severino", "link": "https://stackoverflow.com/users/5394407/luis-guerrero-severino"}, "edited": false, "score": 0, "creation_date": 1443638956, "post_id": 32873162, "comment_id": 53578731, "body": "@ Alter Mann I tried to open the file automatically, but I decided for the manual version."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1443640377, "post_id": 32873162, "comment_id": 53579415, "body": "Note: you should not be calling <code>setvbuf</code>, unless you have a very good reason to do so. This code has absolutely no reason to call <code>setvbuf</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1443641215, "post_id": 32873162, "comment_id": 53579791, "body": "@Alter Mann Code <i>can</i> rely on this in all implementations.  All null pointers including <code>NULL</code>, compare equally equate to <code>0</code>."}, {"owner": {"reputation": 9, "user_id": 5394407, "user_type": "registered", "profile_image": "https://graph.facebook.com/1096339970383717/picture?type=large", "display_name": "Luis Guerrero Severino", "link": "https://stackoverflow.com/users/5394407/luis-guerrero-severino"}, "edited": false, "score": 0, "creation_date": 1443645333, "post_id": 32873162, "comment_id": 53581723, "body": "Thanks for the help so far guys, but I do not know how I can recognize from the csv file if I have a tap or spacebar."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1443720923, "post_id": 32873162, "comment_id": 53616459, "body": "<code>sscanf</code> will work with tabs or spaces."}], "answers": [{"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 0, "last_activity_date": 1443639468, "creation_date": 1443639468, "answer_id": 32873665, "question_id": 32873162, "link": "https://stackoverflow.com/questions/32873162/how-to-use-strcmp-to-compar-names-in-a-csv-data/32873665#32873665", "title": "How to use strcmp to compar names in a csv Data", "body": "<p>To verify that the first line of the file is correct, first extract the five strings using <code>sscanf</code>, and then compare the strings with the expected strings, using <code>strcmp</code>.</p>\n\n<pre><code>int good = 1;\n\nchar heading[5][20];\nif ( sscanf( data, \"%19s%19s%19s%19s%19s\", heading[0], heading[1], heading[2], heading[3], heading[4] ) != 5 )\n    good = 0;\n\nif ( good )\n{\n    char *expected[5] = { \"\\\"Date\\\"\", \"\\\"Time\\\"\", \"\\\"Volt\\\"\", \"\\\"Amp\\\"\", \"\\\"Wirkfaktor\\\"\" };\n    for ( i = 0; i &lt; 5; i++ )\n        if ( strcmp( expected[i], heading[i] ) != 0 )\n            good = 0;\n}\n\nif ( !good )\n{\n    printf( \"Heading line is incorrect\\n\" );\n    exit( 1 );\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1443640058, "post_id": 32873736, "comment_id": 53579275, "body": "Regarding your second point: Please be careful. I guess the file is tab-separated, because it is a csv file, but doesn&#39;t contain commas.   Therefore comparison would be needed to be done against: <code>&quot;\\&quot;Date\\&quot;\\t\\&quot;Time\\&quot;\\t\\&quot;Volt\\&quot;\\t\\&quot;Amp\\&quot;\\t\\&quot;Wirkfaktor\\&quot;&quot;</code>."}, {"owner": {"reputation": 44, "user_id": 4221376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fBAs9.jpg?s=128&g=1", "display_name": "Bryan S.", "link": "https://stackoverflow.com/users/4221376/bryan-s"}, "reply_to_user": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1443640347, "post_id": 32873736, "comment_id": 53579402, "body": "Thanks, I added an update to reflect the tab separated string"}, {"owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1443640786, "post_id": 32873736, "comment_id": 53579592, "body": "Ok, maybe you should also add that you now assume a tab-separated file. By the way, are you sure your code is correct? There is a missing <code>}</code> in the third line and I think that you have to call <code>strtok</code> several times until you processed all tokens. Now you seem to only compare the first string (<code>&quot;Date&quot;</code>) of the file to the <code>check</code> array. As <code>result</code> isn&#39;t changed in the loop, it seems to be an infinite loop..."}, {"owner": {"reputation": 44, "user_id": 4221376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fBAs9.jpg?s=128&g=1", "display_name": "Bryan S.", "link": "https://stackoverflow.com/users/4221376/bryan-s"}, "reply_to_user": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1443646857, "post_id": 32873736, "comment_id": 53582473, "body": "ugh, thanks for saving me again. Added missing closing bracket, and linked in the updated strtok in the while, which fixes the infinite loop and compares the rest."}], "tags": [], "owner": {"reputation": 44, "user_id": 4221376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fBAs9.jpg?s=128&g=1", "display_name": "Bryan S.", "link": "https://stackoverflow.com/users/4221376/bryan-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1443646649, "last_edit_date": 1443646649, "creation_date": 1443639736, "answer_id": 32873736, "question_id": 32873162, "link": "https://stackoverflow.com/questions/32873162/how-to-use-strcmp-to-compar-names-in-a-csv-data/32873736#32873736", "title": "How to use strcmp to compar names in a csv Data", "body": "<ol>\n<li>If you are simply trying to see if it contains those 5 strings, perhaps consider using <code>strtok</code> to split the first line into tokens, and then compare those tokens to the strings you want it to contain using <code>strcmp</code>. The code for this is listed below.</li>\n<li>If you are trying to get that specific string, than your string to compare the first line to would be <code>\"\\\"Date\\\"\\t\\\"Time\\\"\\t\\\"Volt\\\"\\t\\\"Amp\\\"\\t\\\"Wirkfaktor\\\"\"</code> assuming that the first line is tab separated.</li>\n</ol>\n\n\n\n<pre><code>char* result = NULL;\nchar delims[] = {'\"', ' '}; // split on spaces and double quotes\nchar check[] = {\"Date\",\"Time\",\"Volt\",\"Amp\",\"Wirkfaktor\"};\nresult = (char*)strtok( data, delims );\nint i = 0;\nwhile(result != NULL) {\n    if(strcmp(result,check[i]) {\n        printf(\"File Invalid\\n\");\n        exit(0);\n    }\n    result = (char*)strtok( NULL, delims);\n    i++;\n}\n// If we get here than the file was good.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7107, "user_id": 2675154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81fd07359983790419b7ecf5a1098e6c?s=128&d=identicon&r=PG&f=1", "display_name": "honk", "link": "https://stackoverflow.com/users/2675154/honk"}, "edited": false, "score": 0, "creation_date": 1443641187, "post_id": 32874071, "comment_id": 53579780, "body": "If you take a look at the comment on the question, you will see that the OP is talking about the header line in the file and not about the first data line."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1443641372, "post_id": 32874071, "comment_id": 53579878, "body": "Also read the comments below the answer from BryanS. It&#39;s likely that the lines contain tab characters, so the comparison you propose won&#39;t work."}, {"owner": {"reputation": 21, "user_id": 5387606, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/73252a21a48d05ff7394a90636724ffb?s=128&d=identicon&r=PG", "display_name": "Christophe", "link": "https://stackoverflow.com/users/5387606/christophe"}, "edited": false, "score": 0, "creation_date": 1443641981, "post_id": 32874071, "comment_id": 53580150, "body": "to user3386109.  Yes no really take a good look but why dont you want that the comparaison dont work ? please.  Try the code it run right ... thanks. Tab is just a possible separator for scanf"}], "tags": [], "owner": {"reputation": 21, "user_id": 5387606, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/73252a21a48d05ff7394a90636724ffb?s=128&d=identicon&r=PG", "display_name": "Christophe", "link": "https://stackoverflow.com/users/5387606/christophe"}, "is_accepted": false, "score": 0, "last_activity_date": 1443640970, "creation_date": 1443640970, "answer_id": 32874071, "question_id": 32873162, "link": "https://stackoverflow.com/questions/32873162/how-to-use-strcmp-to-compar-names-in-a-csv-data/32874071#32874071", "title": "How to use strcmp to compar names in a csv Data", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nFILE *f;\nchar file_name[255];\nchar data[127];\n\nchar dataRef[]=\"26.10.13    08:00:00    237.802 1160.7682   0.7461853792\";\n\nmain() \n{\n    setvbuf(stdout, NULL, _IONBF, 0);\n    setvbuf(stderr, NULL, _IONBF, 0);\n\n\n\n    f = fopen(\"datei.csv\",\"r\");\n    if(f == NULL){\n        printf(\"Could not open %s\\n\" ,file_name);\n        exit(0);\n    }\n\n    while( fgets(data, sizeof(data), f) != 0 )\n    {\n    fputs(data, stdout);\n    if (strncmp(dataRef,data,56)==0)\n    {\n    printf(\" Here's the tip's between the file chain and the stack reference chain ....\");\n    fputs(data, stdout);\n    fputs(dataRef, stdout);\n    printf(\"\\n\");\n    }}}\n</code></pre>\n\n<p>Note: In the new code i have deplaced the auto declarations out of the main corps, cause of my vc6 compilo who are in disgrace with this in-main  declarations.\nI wrote a short solution with ,i suppose, your imagination. It doesn't matter you can certainly unterstand the use of strcmp or strncmp who's the same function with the formating property. See you later.</p>\n"}], "owner": {"reputation": 9, "user_id": 5394407, "user_type": "registered", "profile_image": "https://graph.facebook.com/1096339970383717/picture?type=large", "display_name": "Luis Guerrero Severino", "link": "https://stackoverflow.com/users/5394407/luis-guerrero-severino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1443725079, "creation_date": 1443637440, "last_edit_date": 1443725079, "question_id": 32873162, "link": "https://stackoverflow.com/questions/32873162/how-to-use-strcmp-to-compar-names-in-a-csv-data", "title": "How to use strcmp to compar names in a csv Data", "body": "<p>i want to open a csv file and compare the contents of the first row.\nI have the code to open the file already written, i only do not know how I can compare the first line with strcmp from the open file.</p>\n\n<p>To open the file</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n   int main(void) {\n         setvbuf(stdout, NULL, _IONBF, 0);\n         setvbuf(stderr, NULL, _IONBF, 0);\n\n          FILE *f;\n          char file_name[255];\n          char data[127];\n\n          printf(\"Which file you want to open : \");\n          scanf(\"%s\",file_name);\n\n          f = fopen(\"C:\\\\projekt\\\\datei.csv\",\"r\");\n          if(f == NULL){\n              printf(\"Could not open %s\\n\" ,file_name);\n              exit(0);\n          }\n\nwhile( fgets(data, sizeof(data), f) != 0 )\n    fputs(data, stdout);\n\n    return 0;\n</code></pre>\n\n<p>}</p>\n\n<p>Whats in the File </p>\n\n<pre><code>\"Date\"  \"Time\"  \"Volt\"  \"Amp\"   \"Wirkfaktor\"\n26.10.13    08:00:00    237.802 1160.7682   0.7461853792\n26.10.13    08:00:01    237.658 1168.92273  0.7203561543\n26.10.13    08:00:02    237.815 1158.57273  0.7344799394\n26.10.13    08:00:03    237.566 1174.5682   0.6960312563\n26.10.13    08:00:04    238.063 1151.67273  0.80126914\n\n\n\n  #include &lt;stdio.h&gt;\n  #include &lt;stdlib.h&gt;\n  #include &lt;string.h&gt;\n\n\n int main(void) {\n setvbuf(stdout, NULL, _IONBF, 0);\n setvbuf(stderr, NULL, _IONBF, 0);\n\nFILE *f;\nchar file_name[255];\nchar data[127];\n\nprintf(\"Which file you want to open : \");\nscanf(\"%s\",file_name);\n\nf = fopen(\"C:\\\\projekt\\\\datei.csv\",\"r\");\nif(f == NULL){\n    printf(\"Could not open %s\\n\" ,file_name);\n    exit(0);\n}\n\n while( fgets(data, sizeof(data), f) != NULL ){\n      //fputs(data, stdout);\n\n}\n\nint good = 1;\nint i;\n\nchar heading[5][20];\nif ( sscanf( data, \"%19s%19s%19s%19s%19s\", heading[0], heading[1], heading[2], heading[3], heading[4] ) != 5 )\n{\n    good = 0;\n}\n\nif ( good )\n{\n\n    char *expected[5] = { \"\\\"Date\\\"t\\\"Time\\\"t\\\"Volt\\\"t\\\"Amp\\\"t\\\"Wirkfaktor\\\"\" };\n    for ( i = 0; i &lt; 5; i++ )\n        if ( strcmp( expected[i], heading[i] ) != 0 )\n            good = 0;\n}\n\nif ( !good )\n{\n    printf( \"Heading line is incorrect\\n\" );\n    exit( 0 );\n}\n\n\n return 0;\n\n\n}   \n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "kernel-module"], "comments": [{"owner": {"reputation": 3561, "user_id": 1149797, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/cVBtb.png?s=128&g=1", "display_name": "Alex Hoppus", "link": "https://stackoverflow.com/users/1149797/alex-hoppus"}, "edited": false, "score": 0, "creation_date": 1443642281, "post_id": 32873095, "comment_id": 53580288, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2995347/how-can-i-find-the-size-of-a-elf-file-image-with-header-information\">How can I find the size of a ELF file/image with Header information?</a>"}, {"owner": {"reputation": 139, "user_id": 1836789, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a3981837e97f213ea3882fbcf620dcd5?s=128&d=identicon&r=PG", "display_name": "omer12433", "link": "https://stackoverflow.com/users/1836789/omer12433"}, "reply_to_user": {"reputation": 3561, "user_id": 1149797, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/cVBtb.png?s=128&g=1", "display_name": "Alex Hoppus", "link": "https://stackoverflow.com/users/1149797/alex-hoppus"}, "edited": false, "score": 0, "creation_date": 1443642745, "post_id": 32873095, "comment_id": 53580507, "body": "@AlexHoppus that might be but i ask similar question but under the constraints that kernel programming impose such as i can&#39;t use any system calls"}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1443643370, "post_id": 32873095, "comment_id": 53580764, "body": "I&#39;ve only dabbled at kernel programming, but this raises a lot red flags to me. Are you actually reading the <code>&#47;proc</code> filesystem? That&#39;s strange. Copying arbitrary user data into kernel memory sounds dangerous. It could be a LOT of data, could be a resource limit pain point; it introduces large amounts of random code into kernel space; copying could involve huge amounts of page faults and disk I/O -- how would that work if you&#39;re in the middle of servicing a system call? What if there are I/O errors? You could hang in kernel mode, leaving an unkillable process."}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1443643433, "post_id": 32873095, "comment_id": 53580796, "body": "You might be better advised to use memory mapping rather than straight copying data. But then, any sort of file I/O is highly frowned upon in kernel mode. Highly. What are you doing anyways?"}, {"owner": {"reputation": 139, "user_id": 1836789, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a3981837e97f213ea3882fbcf620dcd5?s=128&d=identicon&r=PG", "display_name": "omer12433", "link": "https://stackoverflow.com/users/1836789/omer12433"}, "reply_to_user": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1443643948, "post_id": 32873095, "comment_id": 53581044, "body": "@JohnKugelman i know using file i/o in the kernel is frowned upon i am just doing a little excercise because i am new in the field of kernel progarmming ,i am copying the elf file from /proc/pid/exe of the process that called the module and store it in page size buffers and execute that elf from kernel space"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1443644665, "post_id": 32873095, "comment_id": 53581398, "body": "&quot;execute that elf from kernel space&quot;. How do you expect to execute user code from within kernel space? Or do you mean you are trying to start a user process that executes a binary? If it is the latter, you may just want to inspect the existing Linux kernel code that does exactly this already. You&#39;ll learn exactly what needs to be done including parsing the ELF headers. See <a href=\"http://stackoverflow.com/questions/8352535/how-does-kernel-get-an-executable-binary-file-running-under-linux\">here</a> to get started."}, {"owner": {"reputation": 139, "user_id": 1836789, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a3981837e97f213ea3882fbcf620dcd5?s=128&d=identicon&r=PG", "display_name": "omer12433", "link": "https://stackoverflow.com/users/1836789/omer12433"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1443645021, "post_id": 32873095, "comment_id": 53581577, "body": "@AlanAu i actually mean the former,at least it is the ultimate goal of the exercise after i read the elf i wanted to find the address of a certain function(using the function table) and i guess call it using inline asm,but whether it is possible or not it yet to be seen until i can&#39;t solve the problem i asked here"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1443646018, "post_id": 32873095, "comment_id": 53582058, "body": "Good luck with that. There&#39;s more to executing code than just getting the instructions (e.g. you probably need to do relocation). For your specific problem again, just look at existing kernel code which <a href=\"http://lxr.free-electrons.com/source/fs/exec.c#L1478\" rel=\"nofollow noreferrer\">loads an exec file</a> and then <a href=\"http://lxr.free-electrons.com/source/fs/binfmt_elf.c#L664\" rel=\"nofollow noreferrer\">processes the elf binary</a>"}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1443704631, "post_id": 32873095, "comment_id": 53606365, "body": "no. executing user code in kernel mode is not feasible, even printing hello world. a user program establishes a ram environment for the program to be executed. if you run those code in kernel mode, your ram will be mash potato."}, {"owner": {"reputation": 139, "user_id": 1836789, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a3981837e97f213ea3882fbcf620dcd5?s=128&d=identicon&r=PG", "display_name": "omer12433", "link": "https://stackoverflow.com/users/1836789/omer12433"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1443711635, "post_id": 32873095, "comment_id": 53611262, "body": "@HuStmpHrrr can you be more specific why is isn&#39;t feasible given that i have the asm instructions from the elf? i try to do this because of an assignment i got"}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 1, "creation_date": 1443720779, "post_id": 32873095, "comment_id": 53616377, "body": "@omer12433 for example, kernel space can&#39;t do(or is not very good at) floating point calculation, and i don&#39;t think there is rt loader that will load any shared objects etc. too many reasons. i don&#39;t think it&#39;s gonna work. i guess your homework really means to write a loader or something. otherwise it just make poor sense. unless your program is pure cpu integer computation, then you may dig out that part only and give a shot. but there is no hope to execute the whole elf in general. for details, you need to know elf, loader, linker and some os."}, {"owner": {"reputation": 139, "user_id": 1836789, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a3981837e97f213ea3882fbcf620dcd5?s=128&d=identicon&r=PG", "display_name": "omer12433", "link": "https://stackoverflow.com/users/1836789/omer12433"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1443722755, "post_id": 32873095, "comment_id": 53617445, "body": "@HuStmpHrrr ok i will ask the instructor what he meant specifically but can you help me how can i calculate the size of the elf file i try to copy?"}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1443728369, "post_id": 32873095, "comment_id": 53620366, "body": "@omer12433 honestly i don&#39;t know. i don&#39;t even know how to operate on files in kernel, since, as people said, it&#39;s frowned. in terms of elf, you can get as much as info you want as long as you decode the file. check the link above Alan Au provided."}], "owner": {"reputation": 139, "user_id": 1836789, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a3981837e97f213ea3882fbcf620dcd5?s=128&d=identicon&r=PG", "display_name": "omer12433", "link": "https://stackoverflow.com/users/1836789/omer12433"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 597, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1443644254, "creation_date": 1443637187, "last_edit_date": 1443644254, "question_id": 32873095, "link": "https://stackoverflow.com/questions/32873095/calculate-elf-file-size-from-memory-when-programming-in-kernel-mode", "title": "calculate elf file size from memory when programming in kernel mode?", "body": "<p>I am trying to program a kernel module that copy the elf of the process that called the module using ioctl to a buffer in the module.</p>\n\n<p>So far i managed to get the location of the elf in the memory by using /proc/pid/exe  but i need the size of the file in order to copy it to kernel space.</p>\n\n<p>I also have access to the elf header of the mentioned file but i could figure a way to calculate the size using the information from the header.</p>\n\n<p>Since i can't use functions like stat is there a way to calculate the mentioned file size when programming in kernel space?</p>\n\n<p>The unique part of my question that i need to calculate it under the constraints that kernel programming impose such is the inability to use system calls such as stat </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 129, "user_id": 4979549, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31d1f783198d039f29c3f240e2706218?s=128&d=identicon&r=PG&f=1", "display_name": "Arc", "link": "https://stackoverflow.com/users/4979549/arc"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443637287, "post_id": 32872923, "comment_id": 53577830, "body": "Just calculate with long double and compare result to calculate forward error?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443637802, "post_id": 32872923, "comment_id": 53578094, "body": "As long as <code>long double</code> is of wider precision, this should provide a reasonable answer.  Should you want the <i>exact</i> answer (which may be impossible) or other analysis, check the <a href=\"http://math.stackexchange.com\">math.stackexchange.com</a>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1443637857, "post_id": 32872923, "comment_id": 53578133, "body": "Computing (as opposed to estimating) these errors depends on somehow being able to compute the exact answer.  If you could do that, then you wouldn&#39;t be wondering about errors in the first place."}, {"owner": {"reputation": 129, "user_id": 4979549, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31d1f783198d039f29c3f240e2706218?s=128&d=identicon&r=PG&f=1", "display_name": "Arc", "link": "https://stackoverflow.com/users/4979549/arc"}, "edited": false, "score": 0, "creation_date": 1443638223, "post_id": 32872923, "comment_id": 53578304, "body": "The point of the exercise is to determine the error with double point precision and therefore (hopefully) show that the error is relatively negligible in general purpose programming.  Thank you for the suggestions, I&#39;ll continue trying to estimate error using long doubles as a comparison."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1443650480, "post_id": 32872923, "comment_id": 53584003, "body": "BTW Nice name &quot;Arc&quot; for a post about <code>cos()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1443641692, "post_id": 32873361, "comment_id": 53580038, "body": "How closely should these forward error functions match for say <code>func(x) { return (pow (x, 2.0) - x)&#47;(2 * x + 1); }</code> with <code>0 &lt; x &lt; 100</code> ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1443644143, "post_id": 32873361, "comment_id": 53581156, "body": "@David C. Rankin A max forward error (using OP&#39;s def) is about 9e-15 for your <code>func()</code>.  For OP&#39;s <code>func()</code> it is far worse as <code>1&#47;cosl(x);</code> may approach infinity."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1443650185, "post_id": 32873361, "comment_id": 53583885, "body": "Use values below, near and above <code>odd_integer*M_PI&#47;2</code> to see larger errors."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1443639374, "last_edit_date": 1443639374, "creation_date": 1443638299, "answer_id": 32873361, "question_id": 32872923, "link": "https://stackoverflow.com/questions/32872923/calculating-forward-error-of-a-function-in-c/32873361#32873361", "title": "Calculating forward error of a function in c", "body": "<p>Sample forward difference using extended precision.</p>\n\n<p>Use <code>volatile</code> to prevent <code>double</code> code from using extended precision calculations.</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;float.h&gt;\n#include &lt;math.h&gt;\n\nlong double func_test_forward(volatile double x) {\n  #ifdef LDBL_DIG\n    assert(LDBL_DIG &gt; DBL_DIG);\n  #endif\n  volatile double y = func(x);\n  long double ly = powl(x, 2.0)/cosl(x);\n  return y - ly;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1443650892, "last_edit_date": 1443650892, "creation_date": 1443649726, "answer_id": 32876181, "question_id": 32872923, "link": "https://stackoverflow.com/questions/32872923/calculating-forward-error-of-a-function-in-c/32876181#32876181", "title": "Calculating forward error of a function in c", "body": "<p><code>func()</code> is a problematic function.  Ignore the <code>pow(x,2.0)</code> part as that is well behaved.  The rest of the function is <code>1/cos(x)</code> or <a href=\"https://en.wikipedia.org/wiki/Trigonometric_functions#Reciprocal_functions\" rel=\"nofollow noreferrer\"><code>secant(x)</code></a>  with poles every odd multiple of \u03c0/2.</p>\n\n<p><a href=\"https://i.stack.imgur.com/PMXVA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PMXVA.png\" alt=\"enter image description here\"></a></p>\n\n<p>Assuming a <em>good</em> <code>cos(x)</code>, that function will never return 0.0.  (Mathematically, only <code>cosine(odd*\u03c0/2)</code> returns 0.0 and no <code>double</code> is <em>exactly</em> an odd multiple of <code>\u03c0/2</code> - all finite <code>double</code> are rational, \u03c0 is not.)  But <code>1/cos(x)</code> will have extreme values for values near <code>odd*\u03c0/2</code>, but even so, <code>cos()</code> will have small relative error.  In theory: +/-1 <a href=\"https://en.wikipedia.org/wiki/Unit_in_the_last_place\" rel=\"nofollow noreferrer\">ULP</a>.</p>\n\n<p>Along with the <code>pow()</code> and the division - each contributing 0.5 ULP, a good math library with an non-overflowed result: total no more than 2 ULP error.  Overflow can obviously occur with values of <code>x &gt; sqrt(DBL_MAX)</code>.</p>\n\n<p>Now assuming a <em>not so good</em> <code>cos(x)</code>, slect values near <code>odd*\u03c0/2</code> may simply return <code>0.0</code> and a secant of  <code>INF</code>, so the forward error is infinity.</p>\n\n<p><a href=\"http://www.csee.umbc.edu/~phatak/645/supl/Ng-ArgReduction.pdf\" rel=\"nofollow noreferrer\">Argument reduction for huge arguments: Good to the last bit</a> gets into how good trig functions are calcaulated</p>\n"}], "owner": {"reputation": 129, "user_id": 4979549, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31d1f783198d039f29c3f240e2706218?s=128&d=identicon&r=PG&f=1", "display_name": "Arc", "link": "https://stackoverflow.com/users/4979549/arc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443650892, "creation_date": 1443636524, "last_edit_date": 1443637117, "question_id": 32872923, "link": "https://stackoverflow.com/questions/32872923/calculating-forward-error-of-a-function-in-c", "title": "Calculating forward error of a function in c", "body": "<p>I'd like to understand how to calculate the forward, and backward error of a function using the C double (64bit) type.</p>\n\n<p>For example, how would I identify the forward error of the following function:</p>\n\n<pre><code>double func(double x){\n    return (pow(x,2.0)/cos(x));\n}\n</code></pre>\n\n<p>If the relative error is known to be = 10^-15.</p>\n\n<p>I know that the forward error is the difference in value between the exact answer f(x), and the computed answer ^f(x).\nAnd the backward error is the difference in value between the value ^x, used to compute ^f(x), and the true value of x that would give the calculated value from ^f(x).</p>\n\n<p>The problem I have is that I have no idea how to calculate these errors in practice.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "linux", "kernel", "interrupt", "c11"], "comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 1, "creation_date": 1443636876, "post_id": 32872908, "comment_id": 53577603, "body": "This seems to be a kernel module. Have you read about <a href=\"http://www.tldp.org/LDP/lkmpg/2.6/html/x181.html\" rel=\"nofollow noreferrer\">compiling kernel modules</a>?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1443636955, "post_id": 32872908, "comment_id": 53577647, "body": "Have you done through chapter 2 in the tutorial you link to, so you know you have a proper environment for compiling a kernel module ? Do that and show us the output when you use the supplied makefile if it doesn&#39;t work."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1443637093, "post_id": 32872908, "comment_id": 53577723, "body": "Sou should add to you make file something like this <b>make -C /lib/modules/$(KVERSION)/build M=$(PWD) modules</b>"}, {"owner": {"reputation": 98, "user_id": 3043419, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/886a7e9e1baf0bab0740473b95751cd8?s=128&d=identicon&r=PG&f=1", "display_name": "timon_the_destroyer", "link": "https://stackoverflow.com/users/3043419/timon-the-destroyer"}, "edited": false, "score": 0, "creation_date": 1443637093, "post_id": 32872908, "comment_id": 53577722, "body": "Oh thank you both, I haven&#39;t checked that no!"}], "answers": [{"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 0, "last_activity_date": 1443637727, "last_edit_date": 1443637727, "creation_date": 1443637299, "answer_id": 32873121, "question_id": 32872908, "link": "https://stackoverflow.com/questions/32872908/how-to-include-linux-module-h-in-my-source-file/32873121#32873121", "title": "How to include linux/module.h in my source file?", "body": "<p>You probably want to compile kernel source code first, or check if the below path exists</p>\n\n<pre><code>/lib/modules/kernel-version/build\n</code></pre>\n\n<p>Or more precisely</p>\n\n<pre><code>/lib/modules/`uname -r`/build\n</code></pre>\n\n<p>Or </p>\n\n<pre><code>path to your kernel build\n</code></pre>\n\n<p>This is generally the path where your kernel build tree is present.</p>\n\n<p>Needless to say normal gcc based compilation wont work here.</p>\n\n<p><a href=\"http://www.linuxchix.org/content/courses/kernel_hacking/lesson8\" rel=\"nofollow\">This should get you started</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9815309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dCHiG.jpg?s=128&g=1", "display_name": "Awhb", "link": "https://stackoverflow.com/users/9815309/awhb"}, "is_accepted": false, "score": -1, "last_activity_date": 1589744077, "last_edit_date": 1589744077, "creation_date": 1589638926, "answer_id": 61838272, "question_id": 32872908, "link": "https://stackoverflow.com/questions/32872908/how-to-include-linux-module-h-in-my-source-file/61838272#61838272", "title": "How to include linux/module.h in my source file?", "body": "<p>Some of these files are shipped with any linux distro in :  </p>\n\n<pre><code>/usr/include/linux/\n</code></pre>\n\n<p>but if you haven't linux installed in your machine see linux source tree in github repo :      </p>\n\n<pre><code>https://github.com/torvalds/linux/tree/master/include/linux\n</code></pre>\n"}], "owner": {"reputation": 98, "user_id": 3043419, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/886a7e9e1baf0bab0740473b95751cd8?s=128&d=identicon&r=PG&f=1", "display_name": "timon_the_destroyer", "link": "https://stackoverflow.com/users/3043419/timon-the-destroyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1321, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1589744077, "creation_date": 1443636459, "question_id": 32872908, "link": "https://stackoverflow.com/questions/32872908/how-to-include-linux-module-h-in-my-source-file", "title": "How to include linux/module.h in my source file?", "body": "<p>I have looked at other similar questions around stackoverflow, but it doesn't seem to work for me. I am trying to compile a code sample, and it needs these header files:</p>\n\n<pre><code>linux/module.h\nlinux/modversion.h\nlinux/sched.h\nlinux/tqueue.h\n</code></pre>\n\n<p>But I keep getting errors saying that those files can't be found. I know I should add them to the kernel, but can you please guide me through the process and tell me how to get this done. Thanks in advance for any help. \nThe code sample can be found <a href=\"http://www.tldp.org/LDP/lkmpg/2.4/html/x1210.html\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": ["c", "file", "xv6"], "answers": [{"comments": [{"owner": {"reputation": 16775, "user_id": 442945, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TovHM.png?s=128&g=1", "display_name": "Nathaniel Ford", "link": "https://stackoverflow.com/users/442945/nathaniel-ford"}, "edited": false, "score": 0, "creation_date": 1451334960, "post_id": 34499999, "comment_id": 56742246, "body": "You should add additional explanation describing how this addresses the original problem."}], "tags": [], "owner": {"reputation": 154, "user_id": 3487266, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/6eae9bb67c759417d44e953baa2b9c06?s=128&d=identicon&r=PG&f=1", "display_name": "Siavash", "link": "https://stackoverflow.com/users/3487266/siavash"}, "is_accepted": false, "score": 1, "last_activity_date": 1451334943, "last_edit_date": 1451334943, "creation_date": 1451333218, "answer_id": 34499999, "question_id": 32872767, "link": "https://stackoverflow.com/questions/32872767/how-to-create-files-in-the-xv6/34499999#34499999", "title": "How to create files in the xv6?", "body": "<p>In user mode you do it like this:</p>\n\n<pre><code>#include \"types.h\"\n#include \"user.h\"\n#include \"fcntl.h\"\n\n#define N 100\n\nstruct test {\n    char name;\n    int number;\n};\n\nvoid\nsave(void)\n{\n    int fd;\n    struct test t;\n    t.name = 's';\n    t.number = 1;\n\n    fd = open(\"backup\", O_CREATE | O_RDWR);\n    if(fd &gt;= 0) {\n        printf(1, \"ok: create backup file succeed\\n\");\n    } else {\n        printf(1, \"error: create backup file failed\\n\");\n        exit();\n    }\n\n    int size = sizeof(t);\n    if(write(fd, &amp;t, size) != size){\n        printf(1, \"error: write to backup file failed\\n\");\n        exit();\n    }\n    printf(1, \"write ok\\n\");\n    close(fd);\n}\n\nvoid\nload(void)\n{\n    int fd;\n    struct test t;\n\n    fd = open(\"backup\", O_RDONLY);\n    if(fd &gt;= 0) {\n        printf(1, \"ok: read backup file succeed\\n\");\n    } else {\n        printf(1, \"error: read backup file failed\\n\");\n        exit();\n    }\n\n    int size = sizeof(t);\n    if(read(fd, &amp;t, size) != size){\n        printf(1, \"error: read from backup file failed\\n\");\n        exit();\n    }\n    printf(1, \"file contents name %c and number %d\", t.name, t.number);\n    printf(1, \"read ok\\n\");\n    close(fd);\n}\n\nint\nmain(void)\n{\n    save();\n    load();\n\n    exit();\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5394358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccbff6732a71ddda0b3c7890b7da50de?s=128&d=identicon&r=PG&f=1", "display_name": "Borinzinha", "link": "https://stackoverflow.com/users/5394358/borinzinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6520, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1600162568, "creation_date": 1443635944, "last_edit_date": 1600162568, "question_id": 32872767, "link": "https://stackoverflow.com/questions/32872767/how-to-create-files-in-the-xv6", "title": "How to create files in the xv6?", "body": "<p>I need save data generated during the run in files for later analysis.</p>\n<p>xv6 implement this primitive form and I have no idea how it works...</p>\n<p>Is there an easy way to do this?</p>\n"}, {"tags": ["c", "unix"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1443635615, "post_id": 32872602, "comment_id": 53576971, "body": "Why not provide a logging wrapper that sums up the total bytes written? This looks like a requirement to your software and it&#39;s straight-forward to provide it yourself instead of relying on the OS to do so ... (start with <code>fseek()&#47;ftell()</code>, then just add and compare ... this should be cross-platform)"}, {"owner": {"reputation": 3034, "user_id": 1103956, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ffc86d67cb7545ecc15b598701b76871?s=128&d=identicon&r=PG", "display_name": "Invictus", "link": "https://stackoverflow.com/users/1103956/invictus"}, "edited": false, "score": 0, "creation_date": 1443635781, "post_id": 32872602, "comment_id": 53577058, "body": "In that case how does write takes care of it , if that is taken care by myself ? Matter fact in that case i can find size of file sing stat and see if its less than my limit i write it. But How does write takes care of it is my point"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1443635905, "post_id": 32872602, "comment_id": 53577114, "body": "it returns the number of bytes written, so you can check whether the total size was reached. If you want a <i>hard</i> limit, make use of the <code>count</code> parameter of <code>write()</code>. Btw, if you use <code>ftell()</code> to get the file size instead of <code>stat()</code>, you&#39;ll be platform independent..."}, {"owner": {"reputation": 3034, "user_id": 1103956, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ffc86d67cb7545ecc15b598701b76871?s=128&d=identicon&r=PG", "display_name": "Invictus", "link": "https://stackoverflow.com/users/1103956/invictus"}, "edited": false, "score": 0, "creation_date": 1443636108, "post_id": 32872602, "comment_id": 53577204, "body": "But these would be overhead write , adding number of bytes written every-time , if i am writing say 20bytes per time and limit is 20GB , this unnecessarily with add lot of time those 20bytes to reach up-to 20 GB. Thanks for ftell() thing btw"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1443636248, "post_id": 32872602, "comment_id": 53577273, "body": "an addition is really nothing to consider performance-wise if talking about IO and syscalls. That&#39;s <i>magnitudes</i> more expensive. On the other hand, relying on the OS (and its configuration) for your application to behave as intended is something I&#39;d consider bad architecture. But that&#39;s just an opinion :)"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1443636288, "post_id": 32872602, "comment_id": 53577293, "body": "@Invictus: are you seriously considering &quot;overhead&quot; adding two integers compared to <i>performing a syscall</i>? Even just trapping in kernel is three orders of magnitude slower..."}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1443636315, "post_id": 32872602, "comment_id": 53577308, "body": "<code>ftell()</code> is a very low impact operation:  Quite a bit less than writing.  And adding numbers and doing a comparison is several orders of magnitude less than <code>ftell()</code>."}, {"owner": {"reputation": 3034, "user_id": 1103956, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ffc86d67cb7545ecc15b598701b76871?s=128&d=identicon&r=PG", "display_name": "Invictus", "link": "https://stackoverflow.com/users/1103956/invictus"}, "edited": false, "score": 0, "creation_date": 1443636660, "post_id": 32872602, "comment_id": 53577482, "body": "@Felix what do you sugeest using a ftell() or using GNU resource usage function as mentioned in one of the answer ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1443636745, "post_id": 32872602, "comment_id": 53577537, "body": "@Invictus without knowing the exact design and purpose of your application, I&#39;d suggest to go and write your own logging wrapper with (possibly configurable) size limit. If this is just some private <i>hack</i>, using OS limits might be a bit less work ..."}, {"owner": {"reputation": 3034, "user_id": 1103956, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ffc86d67cb7545ecc15b598701b76871?s=128&d=identicon&r=PG", "display_name": "Invictus", "link": "https://stackoverflow.com/users/1103956/invictus"}, "edited": false, "score": 0, "creation_date": 1443636844, "post_id": 32872602, "comment_id": 53577589, "body": "Thanks , i am looking for the most reliable way to do and not any hack as i would use this in my application."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1443636952, "post_id": 32872602, "comment_id": 53577644, "body": "Well it all depends on your requirements. If you want to go a little &quot;fancier&quot;, you could design a logging interface and provide an implementation for unix plattforms that uses <code>syslog</code> as its backend ... (where logrotate is typically configured)"}], "answers": [{"comments": [{"owner": {"reputation": 3034, "user_id": 1103956, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ffc86d67cb7545ecc15b598701b76871?s=128&d=identicon&r=PG", "display_name": "Invictus", "link": "https://stackoverflow.com/users/1103956/invictus"}, "edited": false, "score": 0, "creation_date": 1443637418, "post_id": 32872703, "comment_id": 53577889, "body": "Thanks for your suggestion."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1443637913, "post_id": 32872703, "comment_id": 53578158, "body": "Definitely the correct answer to how the question was asked."}], "tags": [], "owner": {"reputation": 9460, "user_id": 1885193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Vsd6.png?s=128&g=1", "display_name": "Gangadhar", "link": "https://stackoverflow.com/users/1885193/gangadhar"}, "is_accepted": false, "score": 2, "last_activity_date": 1443636000, "last_edit_date": 1443636000, "creation_date": 1443635617, "answer_id": 32872703, "question_id": 32872602, "link": "https://stackoverflow.com/questions/32872602/how-to-assign-a-soft-limit-to-a-file-size-in-code/32872703#32872703", "title": "How to assign a soft limit to a file size in code", "body": "<p>You can use gnu resource usage functions to set and get the per process limits.\n<a href=\"https://ftp.gnu.org/old-gnu/Manuals/glibc-2.2.3/html_chapter/libc_22.html\" rel=\"nofollow\">Gnu resource usage functions</a>\nOn the other hand you can do log rotation based on size. If the log size exceeds more than certain limit then create a tar file of old log and start writing new log.</p>\n"}], "owner": {"reputation": 3034, "user_id": 1103956, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ffc86d67cb7545ecc15b598701b76871?s=128&d=identicon&r=PG", "display_name": "Invictus", "link": "https://stackoverflow.com/users/1103956/invictus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1443636242, "creation_date": 1443635269, "question_id": 32872602, "link": "https://stackoverflow.com/questions/32872602/how-to-assign-a-soft-limit-to-a-file-size-in-code", "title": "How to assign a soft limit to a file size in code", "body": "<p>I was looking over the Unix man page of write . <a href=\"http://linux.die.net/man/3/write\" rel=\"nofollow\">http://linux.die.net/man/3/write</a></p>\n\n<p>In my application i will log errors, warning and process related minor information, which are written in a log file. What i want is if the file size becomes greater than 1GB , then the process should no more be able to write into that logfile . I see the man page tells about this can be achieved and write fails .</p>\n\n<p><code>If a write() requests that more bytes be written than there is room for (for example, the process' file size limit or the physical end of a medium), only as many bytes as there is room for shall be written.</code> </p>\n\n<p>Does this requires ulimit related changes ? I do not want to apply at server level but just process level for my application , so it unnecessary do not fill the disk size completely. Any suggestion what should i do here ? I believe solution will equally apply for C++.</p>\n"}, {"tags": ["c", "assembly", "binary"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1443635143, "post_id": 32872510, "comment_id": 53576745, "body": "What have you done yourself? SO is no &quot;do my homework&quot; site."}, {"owner": {"reputation": 103, "user_id": 2425459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94cec0b47bad57fd3cdb82d12562554b?s=128&d=identicon&r=PG", "display_name": "Lukas Valatka", "link": "https://stackoverflow.com/users/2425459/lukas-valatka"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1443635276, "post_id": 32872510, "comment_id": 53576803, "body": "Sorry for not providing any information. I am basically stuck with an idea to convert separately 5 and 4 (via mapping 5 and 4 to their ascii equivalents). Yet the idea would not work for sure.  I have an idea to convert char &#39;5&#39; to int 5 by right shifting the byte by 4. Same with 4. Then multiply 5 by 10 and add 4, and then use division by two algorithm to find remainder and compose the binary number"}, {"owner": {"reputation": 11262, "user_id": 3580294, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GODPL.jpg?s=128&g=1", "display_name": "awksp", "link": "https://stackoverflow.com/users/3580294/awksp"}, "edited": false, "score": 2, "creation_date": 1443635535, "post_id": 32872510, "comment_id": 53576935, "body": "If you&#39;re not sure whether your idea would work, why not try it out?"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 2425459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94cec0b47bad57fd3cdb82d12562554b?s=128&d=identicon&r=PG", "display_name": "Lukas Valatka", "link": "https://stackoverflow.com/users/2425459/lukas-valatka"}, "edited": false, "score": 0, "creation_date": 1443636329, "post_id": 32872752, "comment_id": 53577317, "body": "Thank you, sir! That&#39;s a neat algorithm! Correct if I am wrong, but ascii numbers only differ by first four bits?   I will surely use gcc option to translate the code into assembler instruction because the main project has to be in assembler. I just wanted to implement the logic in C so it would be easier to complete the program :)!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 103, "user_id": 2425459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94cec0b47bad57fd3cdb82d12562554b?s=128&d=identicon&r=PG", "display_name": "Lukas Valatka", "link": "https://stackoverflow.com/users/2425459/lukas-valatka"}, "edited": false, "score": 2, "creation_date": 1443636720, "post_id": 32872752, "comment_id": 53577513, "body": "@Lukas Valatka There is nothing ASCII` about this answer.  It works independent of the <code>char</code> encoding."}, {"owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "edited": false, "score": 2, "creation_date": 1443636815, "post_id": 32872752, "comment_id": 53577575, "body": "Yes, in ASCII, UTF, EBCDIC and other coding systems the digits are contiguous and differ by the lowest nybble."}], "tags": [], "owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "is_accepted": true, "score": 1, "last_activity_date": 1443636233, "last_edit_date": 1443636233, "creation_date": 1443635863, "answer_id": 32872752, "question_id": 32872510, "link": "https://stackoverflow.com/questions/32872510/converting-char-integer-representations-to-binary/32872752#32872752", "title": "Converting char integer representations to binary", "body": "<p>In C:</p>\n\n<pre><code>int asciToInteger(char *c)\n{\n    int result = 0;\n    while (*c)\n    {\n        result *= 10;\n        result += (*c - '0');\n        c++;\n    }\n    return result;\n}\n</code></pre>\n\n<p>Assumes input is valid.</p>\n\n<p>You can get a head start on the assembly language version by compiling with certain switches which will output as ... assembly language! For example in GNU C: <code>gcc -S -c ascii2int.c</code>.</p>\n"}], "owner": {"reputation": 103, "user_id": 2425459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94cec0b47bad57fd3cdb82d12562554b?s=128&d=identicon&r=PG", "display_name": "Lukas Valatka", "link": "https://stackoverflow.com/users/2425459/lukas-valatka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "closed_date": 1443650350, "accepted_answer_id": 32872752, "answer_count": 1, "score": -1, "last_activity_date": 1443641696, "creation_date": 1443634929, "last_edit_date": 1443641696, "question_id": 32872510, "link": "https://stackoverflow.com/questions/32872510/converting-char-integer-representations-to-binary", "closed_reason": "Not suitable for this site", "title": "Converting char integer representations to binary", "body": "<p>I have a char array composed of elements 5 3. The array is used to represent number 53. What should be the approach to convert this number of three chars to its binary equivalent? I am implementing this in C, later on it will need to be rewritten in assembly. The solution I seek should be purely low stuff work without any helper libraries.</p>\n\n<p>I am basically stuck with an idea to convert separately 5 and 4 (via mapping 5 and 4 to their ascii equivalents). Yet the idea would not work for sure. I have another idea to convert char '5' to int 5 by right shifting the byte by 4. Same with 4. Then multiply 5 by 10 and add 4, and then use division by two algorithm to find remainder and compose the binary number.</p>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "edited": false, "score": 0, "creation_date": 1443633814, "post_id": 32871968, "comment_id": 53575995, "body": "This is a REALLY good time to buckle down and learn a debugger."}], "answers": [{"tags": [], "owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": false, "score": 2, "last_activity_date": 1443633098, "creation_date": 1443633098, "answer_id": 32871994, "question_id": 32871968, "link": "https://stackoverflow.com/questions/32871968/solve-quadratic-learning-functions-program-doesnt-return-values/32871994#32871994", "title": "Solve quadratic; learning functions; program doesn&#39;t return values", "body": "<pre><code>if (scanf (\"%f %f %f\", &amp;a, &amp;b, &amp;c) == 1)\n</code></pre>\n\n<p><code>scanf</code> returns the number of arguments succesfully scanned.  In this case, you want it to be 3, not 1.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1443633441, "creation_date": 1443633441, "answer_id": 32872093, "question_id": 32871968, "link": "https://stackoverflow.com/questions/32871968/solve-quadratic-learning-functions-program-doesnt-return-values/32872093#32872093", "title": "Solve quadratic; learning functions; program doesn&#39;t return values", "body": "<p>The line</p>\n\n<pre><code>return x1, x2;\n</code></pre>\n\n<p>does not return two values. That line is equivalent to:</p>\n\n<pre><code>x1;  // Nothing happens.\nreturn x2;\n</code></pre>\n\n<p>If you want to be able to return two values, create a <code>struct</code> and return an instance of the <code>struct</code>.</p>\n\n<pre><code>typedef struct pair { float x1; float x2;} pair;\n\n// Change the return type of solve_quadratic \npair solve_quadratic (float a, float b, float c);\n</code></pre>\n\n<p>When you are ready to return from <code>solve_quadratic</code>, use:</p>\n\n<pre><code>pair p;\np.x1 = x1;\np.x2 = x2;\nreturn p;\n</code></pre>\n\n<p>And change where you use it:</p>\n\n<pre><code>// if (scanf (\"%f %f %f\", &amp;a, &amp;b, &amp;c) == 1)\n//                                      ^^^ That is not correct.\nif (scanf (\"%f %f %f\", &amp;a, &amp;b, &amp;c) == 3)\n{\n    pair p = solve_quadratic(a,b,c);\n    printf(\"Square roots of this quadratic are: %f %f \\n\", p.x1. p.x2);\n}\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 4824993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/RBt6B.jpg?s=128&g=1", "display_name": "Ducol", "link": "https://stackoverflow.com/users/4824993/ducol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443634333, "creation_date": 1443633006, "last_edit_date": 1443634333, "question_id": 32871968, "link": "https://stackoverflow.com/questions/32871968/solve-quadratic-learning-functions-program-doesnt-return-values", "title": "Solve quadratic; learning functions; program doesn&#39;t return values", "body": "<p>Please, take a look at the program I wrote as part of the assignment after chapter 7 Programming in C. The program should return roots of a quadratic based on values of constants typed in by the user. The program should be very simple; I am at the beginner's level.\nAlthough the compiler does compile the program, the only output I get is the prompting message. But after I enter three values, nothing happens, the program ends, and I am back at my Terminal. \nI have edited the program. And now if I enter some values that make discriminant less than 0, I get </p>\n\n<pre><code>Please, enter three constants of the quadratic:   \n1 2 3\nRoots are imaginary\nSquare roots of this quadratic are:\n</code></pre>\n\n<p>Thus the main function statement still appears. </p>\n\n<p>If I enter other values, I get </p>\n\n<pre><code>Please, enter three constants of the quadratic:   \n1 8 2\n-0.256970 and -7.743030Square roots of this quadratic are:\n</code></pre>\n\n<p>Do you see this formatting? Why does this happen?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nfloat abs_value (float x);\nfloat approx_sqrt (float x);\nfloat solve_quadratic (float a, float b, float c);\n\n// The main function prompts the user for 3 constant values to fill a quadratic\n// ax^2 + bx + c\nint main(void)\n{\n    float a, b, c;\n\n    printf(\"Please, enter three constants of the quadratic:   \\n\");\n\n    if (scanf (\"%f %f %f\", &amp;a, &amp;b, &amp;c) == 3)\n        printf(\"Square roots of this quadratic are:  \\n\", solve_quadratic(a,b,c));\n\n    return 0;\n}\n\n// Function to take an absolute value of x that is used further in square root function\nfloat abs_value (float x)\n{\n    if (x &lt; 0)\n        x = - x;\n    return x;\n}\n\n// Function to compute an approximate square root - Newton Raphson method\nfloat approx_sqrt (float x)\n{\n    float guess = 1;\n\n    while (abs_value (pow(guess,2) / x) &gt; 1.001 || abs_value (pow(guess,2) / x) &lt; 0.999)\n          guess = (x / guess + guess) / 2.0;\n\n    return guess;\n}\n\n// Function to find roots of a quadratic\nfloat solve_quadratic (float a, float b, float c)\n{\n    float x1, x2;\n    float discriminant = pow(b,2) - 4 * a * c;\n\n    if (discriminant &lt; 0)\n    {\n        printf(\"Roots are imaginary\\n\");\n        return -1;\n    }\n    else\n    {\n        x1 = (-b + approx_sqrt(discriminant)) / (2 * a);\n        x2 = (-b - approx_sqrt(discriminant)) / (2 * a);\n    }\n\n    return x1, x2;\n}\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["c", "quickfix", "fix-protocol"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1443633123, "post_id": 32871922, "comment_id": 53575632, "body": "Welcome to Stack Overflow. Please read the <a href=\"https://stackoverflow.com/tour\">About</a> page soon if you&#39;ve not already done so.  Please do show us an MCVE (<a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable Example?</a>).  Without that, all we can say is &quot;you did it wrong&quot; and &quot;you need to change something&quot;, but we can&#39;t even begin to guess what you did wrong and how it needs to be fixed."}], "answers": [{"tags": [], "owner": {"reputation": 2269, "user_id": 1964277, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/c265a472116036f7ea9d7e609fb35c13?s=128&d=identicon&r=PG", "display_name": "rupweb", "link": "https://stackoverflow.com/users/1964277/rupweb"}, "is_accepted": false, "score": 0, "last_activity_date": 1443713605, "creation_date": 1443713605, "answer_id": 32891498, "question_id": 32871922, "link": "https://stackoverflow.com/questions/32871922/quickfix-does-not-replay-to-my-message/32891498#32891498", "title": "Quickfix does not replay to my message", "body": "<p>How do you know your QF client establishes the connection with the exchange? Have you looked in your log directory for the response to the logon message?</p>\n\n<p>What does your config file say?</p>\n"}], "owner": {"reputation": 1, "user_id": 13309329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b648abf25168273ac46288621e79497?s=128&d=identicon&r=PG&f=1", "display_name": "user13309329", "link": "https://stackoverflow.com/users/13309329/user13309329"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443713605, "creation_date": 1443632854, "last_edit_date": 1443633450, "question_id": 32871922, "link": "https://stackoverflow.com/questions/32871922/quickfix-does-not-replay-to-my-message", "title": "Quickfix does not replay to my message", "body": "<p>I have a simple exchange simulator that uses <a href=\"http://www.quickfixengine.org/\" rel=\"nofollow\">Quickfix</a>. In my test I have a client that establishes a connection with the exchange and send it a FIX message to log on. But for some reason the exchange doesn't acknowledge the message. My client then retransmits the message, but it is ignored again.</p>\n\n<p>Any idea what I do wrong?</p>\n"}, {"tags": ["c", "pointers", "segmentation-fault", "free", "memcpy"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1443631646, "post_id": 32871511, "comment_id": 53574854, "body": "Do not cast the result of <code>malloc</code> &amp; friends in C. (Note that you are already inconsistenly casting/not casting in your code). And <b>always</b> check the result of functions which might encounter an error: <code>malloc</code> might return a <i>null pointer</i>!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1443631733, "post_id": 32871511, "comment_id": 53574899, "body": "Use <code>strncpy</code> to copy strings! And do not use magic numbers! And use normal assignment to copy a <code>struct</code>. <code>memcpy</code> inhibits type-checking."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1443631917, "post_id": 32871511, "comment_id": 53575020, "body": "At which line is there a segmentation fault? This is very important and very easy to diagnose, so you should do it in order to get good answers."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1443631582, "creation_date": 1443631582, "answer_id": 32871562, "question_id": 32871511, "link": "https://stackoverflow.com/questions/32871511/how-do-i-copy-a-structure/32871562#32871562", "title": "How do I copy a structure?", "body": "<p>Don't forget to copy over the null-terminators on your string literals:</p>\n\n<p>You need to use <code>\"Little Simon\", 13</code> instead etc.: <code>\"Little Simon\"</code> is not as little as you think. It occupies 13 bytes, not 12.</p>\n\n<p>Else your <code>fprintf</code> will overrun past your string, with disastrous results: a segmentation fault being one possibility.</p>\n"}, {"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1443632201, "post_id": 32871635, "comment_id": 53575169, "body": "<code>strdup()</code> is a lot clearer and less error-prone than <code>malloc()</code> followed by <code>memcpy()</code> with magic numbers."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1443632289, "post_id": 32871635, "comment_id": 53575208, "body": "@AndrewHenle  It  clearly is , I just mentions cause of segmentation fault ."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1443632377, "post_id": 32871635, "comment_id": 53575251, "body": "@AndrewHenle, true, but <code>strdup</code> is not standard."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1443632421, "post_id": 32871635, "comment_id": 53575269, "body": "@AndrewHenle If using fixed size then why not declare array as I mentioned . No need of <code>malloc</code>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1443632980, "post_id": 32871635, "comment_id": 53575566, "body": "@AlterMann, <code>strdup()</code> is part of the IEEE Std 1003.1, 2004 Edition standard:  <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/strdup.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/009695399/functions/strdup.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1443633099, "post_id": 32871635, "comment_id": 53575615, "body": "@AndrewHenle  Its POSFIX not part of ISO C standard and  portability issues are also there."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1443633274, "post_id": 32871635, "comment_id": 53575713, "body": "@Andrew, POSIX is  a standard operating system interface, but not THE standard."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 1, "last_activity_date": 1443632387, "last_edit_date": 1443632387, "creation_date": 1443631854, "answer_id": 32871635, "question_id": 32871511, "link": "https://stackoverflow.com/questions/32871511/how-do-i-copy-a-structure/32871635#32871635", "title": "How do I copy a structure?", "body": "<p><code>memcpy</code> do not add null terminator. So either add <code>'\\0'</code> after <code>memcpy</code> manually or increase number of byte in <code>memcpy</code> . </p>\n\n<p>Do this - </p>\n\n<pre><code>memcpy(book-&gt;title, \"We're Going on a Bear Hunt\", 26); // or use strncpy so it will add null terminator          \nmemcpy(book-&gt;author, \"Michael Rosen\", 14);                                   \nmemcpy(book-&gt;publisher, \"Little Simon\", 13);                              \n</code></pre>\n\n<p>And because your <code>book-&gt;title</code> is not null terminated , therefore , <code>fprintf</code> with specifier <code>%s</code> gives seg fault.</p>\n\n<p>And if you use fixed memory in <code>malloc</code>(i.e <code>100</code>) , why use it ? Declare  them as arrays -</p>\n\n<pre><code>book-&gt;title = (char *)malloc(100);          // in struct declare title as char title[100]             \nbook-&gt;author = (char *)malloc(100);         // similar with rest.     \nbook-&gt;publisher = (char *)malloc(100);              \n</code></pre>\n\n<p>Then you won't have take tension to <code>free</code> it.</p>\n\n<p><em>Note</em> - If you use <code>malloc</code> then as also mentioned in comment , please don't cast result of <code>malloc</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": false, "score": 2, "last_activity_date": 1443632545, "last_edit_date": 1443632545, "creation_date": 1443632029, "answer_id": 32871684, "question_id": 32871511, "link": "https://stackoverflow.com/questions/32871511/how-do-i-copy-a-structure/32871684#32871684", "title": "How do I copy a structure?", "body": "<p>I see multiple errors here:</p>\n\n<ul>\n<li><code>free(book)</code> frees the dynamically allocated <code>struct book</code> but not its dynamically allocated fields (<code>book-&gt;title</code> and such things must be freed too)</li>\n<li>you are calling <code>memcpy</code> to <code>book-&gt;author</code> and other <code>char*</code> fields but these fields haven't been dynamically allocated, maybe you wanted to do <code>book-&gt;title = strdup(\"literal\")</code>,</li>\n<li><code>memcpy(book1, book, sizeof *book1)</code> has at least two errors: first you hare coping <code>sizeof *book1 bytes</code>, which is the size of a pointer, not the whole struct. Then you are copying fields which doesn't contain primitive types but pointers which would then share ownership between two books, you should copy each single dynamically allocated field.</li>\n</ul>\n\n<p>Just to give some code to start with:</p>\n\n<pre><code>void free_book(struct book* b) {\n  free(b-&gt;title);\n  free(b-&gt;author);\n  ...\n  free(b);\n}\n\nstruct* book dupe_book(struct book* source) {\n  struct book* dest = malloc(sizeof(struct book));\n  dest-&gt;price = source-&gt;price;\n  dest-&gt;author = strdup(source-&gt;author);\n  ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "is_accepted": false, "score": 0, "last_activity_date": 1443700408, "last_edit_date": 1443700408, "creation_date": 1443632460, "answer_id": 32871813, "question_id": 32871511, "link": "https://stackoverflow.com/questions/32871511/how-do-i-copy-a-structure/32871813#32871813", "title": "How do I copy a structure?", "body": "<p>In your case the structure <code>struct childrensBook</code> contains pointers to strings. If your want deep copy of that object you need also copy internal strings.</p>\n\n<p>However, since you are using constant lengths for all string fields it is possible to use all string elements as <code>char</code> arrays. In that case the entire content will be stored in one piece of memory:</p>\n\n<pre><code>struct childrensBook {\n    char title[100];\n    char author[100];\n    char publisher[100];\n    int copyright;\n    int price;\n}\n\n/* the structure content may be written as follows */\nstrcpy(book-&gt;title, \"We're Going on a Bear Hunt\");\n\n/* structure copy by direct assignment */\n*book1 = *book;\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 3831362, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/7479fba86a8df20addacfb9b62fee147?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Kraemer", "link": "https://stackoverflow.com/users/3831362/joseph-kraemer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1443700408, "creation_date": 1443631422, "last_edit_date": 1443632741, "question_id": 32871511, "link": "https://stackoverflow.com/questions/32871511/how-do-i-copy-a-structure", "title": "How do I copy a structure?", "body": "<p>I have a problem where I have to copy a structure and add it to new memory then free the old memory. Then I have to increment to create space for new memory and add again. I thought I had the logic correct but I keep getting a segmentation fault. I can't figure out where I am going wrong.</p>\n\n<p>Here is a copy of my structure:</p>\n\n<pre><code>struct childrensBook *book = (struct childrensBook *) malloc(sizeof(struct childrensBook));     //Structure of book #1\n\nbook-&gt;title = (char *)malloc(100);                  //allows memmory of 100 characters                                                  \nbook-&gt;author = (char *)malloc(100);             //allows memmory of 100 characters  \nbook-&gt;publisher = (char *)malloc(100);              //allows memmory of 100 characters  \nbook-&gt;copyright = 0;\nbook-&gt;price = 0;\n</code></pre>\n\n<p>Here is a copy of my add function:</p>\n\n<pre><code>int addRecord() \n{\n    int headptr = 0;\n    struct childrensBook *book = malloc(sizeof(struct   childrensBook));            //get book structure\n    struct childrensBook *book1 = malloc(sizeof(struct childrensBook));         //create structure book1\n    memcpy(book-&gt;title, \"We're Going on a Bear Hunt\", 26);                      //populate fields of book \n    memcpy(book-&gt;author, \"Michael Rosen\", 13);                                  //populate fields of book \n    memcpy(book-&gt;publisher, \"Little Simon\", 12);                                //populate fields of book \n    book-&gt;copyright = 1989;                                                 //populate fields of book \n    book-&gt;price = 7.99;                                                     //populate fields of book \n    memcpy(book1, book, sizeof *book1);                     //copy fields of book to book 1\n    free(book);\n}\n</code></pre>\n\n<p>And here is my call to function:</p>\n\n<pre><code>else if(x==4)\n{\n    addRecord();\n    fprintf(stderr, \"You have added the record: %s\\n\", book-&gt;title);\n    free(book);\n    moveptr++;   //here to incrememnt for new space. This is a globaal variable\n}\n</code></pre>\n"}, {"tags": ["c", "operating-system", "kernel", "driver", "device"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1443631210, "post_id": 32871349, "comment_id": 53574603, "body": "It is impossible and a contraction in terms. See <a href=\"http://osdev.org/\" rel=\"nofollow noreferrer\">osdev.org</a> and maybe <a href=\"https://www.gnu.org/software/hurd/hurd.html\" rel=\"nofollow noreferrer\">GNU hurd</a>."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1443631560, "post_id": 32871349, "comment_id": 53574797, "body": "BTW, Linux is free software, and almost all the drivers are free software too"}, {"owner": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1443631600, "post_id": 32871349, "comment_id": 53574818, "body": "but there is no manual explaining how to use the linux hardware devices an for some other operating system"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1443631678, "post_id": 32871349, "comment_id": 53574874, "body": "You might glance into <a href=\"http://www.cs.utah.edu/flux/oskit/\" rel=\"nofollow noreferrer\">cs.utah.edu/flux/oskit</a> (which is an abandoned project)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1443631958, "post_id": 32871349, "comment_id": 53575042, "body": "If you do not want to write low-level code, you really should forget about writing an OS and stick with HTML, etc. It is nonsense to start an OS with this attitude."}, {"owner": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "edited": false, "score": 0, "creation_date": 1443632108, "post_id": 32871349, "comment_id": 53575123, "body": "actually I can read and write assembly well but I want to be specific about certain modules of the operating system (which the drivers are not part of)"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1443681418, "post_id": 32871349, "comment_id": 53592280, "body": "If you want to test scheduling algorithms and such, just take the Linux kernel or some other, working kernel and write a new scheduler for that. Modify existing code, instead of starting from scratch. A different approach would be to run the Linux kernel and some &quot;virtual machine&quot; on top, providing &quot;hardware&quot; in some idealised consistent specification to the guest kernel, which would then only need to deal with that specification."}], "answers": [{"comments": [{"owner": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "edited": false, "score": 0, "creation_date": 1443631562, "post_id": 32871489, "comment_id": 53574799, "body": "as you said <code>hardware and software resources</code>  I want some readily available hardware manager that can help me building process manager and testing new scheduling algorithms and testing say loaders and all that stuff (with out worrying about hardware)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1443631605, "post_id": 32871489, "comment_id": 53574824, "body": "Again, you are inconsistent. A kernel scheduler is dealing or related to the hardware (e.g. interrupts, caches)."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1443631629, "post_id": 32871489, "comment_id": 53574839, "body": "Re &quot;I want some readily available hardware manage&quot;, Again, the OS is that hardware manager. Why do say you want to write an OS if you want to use someone else&#39;s OS?"}, {"owner": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "edited": false, "score": 0, "creation_date": 1443631742, "post_id": 32871489, "comment_id": 53574908, "body": "yes the hardware of the processor which is well documented but not 3rd party hardware (xyz mouse and xyz monitor and xyz keyboard which I should figure out how to drive)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1443631847, "post_id": 32871489, "comment_id": 53574976, "body": "XYZ mouse &amp; keyboard are USB these days. And monitors are HDMI. Both are well documented protocols."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1443631852, "post_id": 32871489, "comment_id": 53574979, "body": "You don&#39;t need to support specific peripherals. Your OS could support drivers."}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1443631353, "creation_date": 1443631353, "answer_id": 32871489, "question_id": 32871349, "link": "https://stackoverflow.com/questions/32871349/how-can-i-write-operating-system-without-going-deep-into-device-drivers/32871489#32871489", "title": "how can I write operating system without going deep into device drivers", "body": "<p>From Wikipedia,</p>\n\n<blockquote>\n  <p>An operating system (OS) is system software that manages computer hardware and software resources and provides common services for computer programs. </p>\n</blockquote>\n\n<p>The whole point of the OS is to provide an interface to the hardware, so no, you can't escape dealing with the hardware if you are writing an OS.</p>\n"}, {"comments": [{"owner": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "edited": false, "score": 0, "creation_date": 1443634619, "post_id": 32871700, "comment_id": 53576442, "body": "<code>E.g. if you would take a NetBSD distribution and keep mostly its device drivers, keep the boot system and cut the kernel to some minimum</code> I liked this, ofcourse I wont hurry and I will take my time understanding NETBSD but the question is &#39;is there docs or references for such thing&#39; or some guide in case I got stuck other than long googling"}, {"owner": {"reputation": 4815, "user_id": 2579220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j2xmH.jpg?s=128&g=1", "display_name": "mvw", "link": "https://stackoverflow.com/users/2579220/mvw"}, "reply_to_user": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "edited": false, "score": 0, "creation_date": 1443635155, "post_id": 32871700, "comment_id": 53576750, "body": "You might check a copy of MINIX and the operating system book from Tanenbaum and Woodhull that describes it. See <a href=\"https://en.wikipedia.org/wiki/MINIX\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/MINIX</a>"}, {"owner": {"reputation": 4815, "user_id": 2579220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j2xmH.jpg?s=128&g=1", "display_name": "mvw", "link": "https://stackoverflow.com/users/2579220/mvw"}, "reply_to_user": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "edited": false, "score": 1, "creation_date": 1443635381, "post_id": 32871700, "comment_id": 53576854, "body": "&quot;The Design and Implementation of the FreeBSD Operating System&quot; by McKusick and Neville-Neil is a recent book on the FreeBSD kernel."}], "tags": [], "owner": {"reputation": 4815, "user_id": 2579220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j2xmH.jpg?s=128&g=1", "display_name": "mvw", "link": "https://stackoverflow.com/users/2579220/mvw"}, "is_accepted": true, "score": 2, "last_activity_date": 1443633378, "last_edit_date": 1443633378, "creation_date": 1443632074, "answer_id": 32871700, "question_id": 32871349, "link": "https://stackoverflow.com/questions/32871349/how-can-i-write-operating-system-without-going-deep-into-device-drivers/32871700#32871700", "title": "how can I write operating system without going deep into device drivers", "body": "<p>My first reaction, and judging from the comments, not just mine, was \"what is left do then?\". But that is actually not true.</p>\n\n<p>Beside some kind of hardware abstractions into device drivers, there are other areas, to quote some items from the <a href=\"https://en.wikipedia.org/wiki/Operating_system\" rel=\"nofollow\">Wikipedia article</a>:</p>\n\n<ul>\n<li>Process management</li>\n<li>Interrupt handling</li>\n<li>Memory management</li>\n<li>File systems</li>\n<li>Networking</li>\n<li>Security</li>\n<li>other I / O</li>\n<li>User interface</li>\n</ul>\n\n<p>The problem is that these need to interact with the device drivers intimately. You need a partner working on them, or try to use something existing.</p>\n\n<p>E.g. if you would take a NetBSD distribution and keep mostly its device drivers, keep the boot system and cut the kernel to some minimum, I think you would still end up with something UNIX-like.</p>\n\n<p>Also interesting would be a similiar cut down of some free operating system from the embedded world, e.g. like <a href=\"http://www.freertos.org/\" rel=\"nofollow\">FreeRTOS</a>.</p>\n\n<p>You should also have a look at <a href=\"https://en.wikipedia.org/wiki/Plan_9_from_Bell_Labs\" rel=\"nofollow\">Plan 9</a> which can be seen as a moderate departure from UNIX. Note however:</p>\n\n<blockquote>\n  <p>Other factors that contributed to low adoption of Plan 9 include the\n  lack of commercial backup, the low number of end-user applications,\n  and the lack of device drivers.</p>\n</blockquote>\n\n<p>And that was an effort by some dozen world class computer scientists.</p>\n"}, {"tags": [], "owner": {"reputation": 367, "user_id": 4931387, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rg0Jh.jpg?s=128&g=1", "display_name": "alwaystudent", "link": "https://stackoverflow.com/users/4931387/alwaystudent"}, "is_accepted": false, "score": 0, "last_activity_date": 1443632897, "last_edit_date": 1443632897, "creation_date": 1443632483, "answer_id": 32871822, "question_id": 32871349, "link": "https://stackoverflow.com/questions/32871349/how-can-i-write-operating-system-without-going-deep-into-device-drivers/32871822#32871822", "title": "how can I write operating system without going deep into device drivers", "body": "<p>You can do this if and only if the other take this part i.e they do it for your OS ,if your OS present a brilliant idea or any way it be attractive for developers or companies, the driver is not your problem, and if your OS is not attractive, the driver is dead problem. </p>\n"}], "owner": {"reputation": 275, "user_id": 3999588, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100006769245567/picture?type=large", "display_name": "oddcoder", "link": "https://stackoverflow.com/users/3999588/oddcoder"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 1, "closed_date": 1443631766, "accepted_answer_id": 32871700, "answer_count": 3, "score": -4, "last_activity_date": 1443633378, "creation_date": 1443630887, "question_id": 32871349, "link": "https://stackoverflow.com/questions/32871349/how-can-i-write-operating-system-without-going-deep-into-device-drivers", "closed_reason": "Needs more focus", "title": "how can I write operating system without going deep into device drivers", "body": "<p>I am writing operating system for educational purpose and as a maybe productive system in the future and I want to start it from scratch (I already did) and I really got upset working with hardware, writing simple VGA text mode driver was really nightmare.\nthe problem is that working with hardware is difficult to debug and most hardware are closed source and I am working alone (too much to cope with all available hardware alone)my operating system runs on x86 and maybe x86_64 architecture in the future so I am asking if there is way that can help avoiding working directly with hardware , something like HAL but target independent that provide a interface for communicating with wide range of available hardware \nif such thing is available It should be in C or assembly (but not C++) because I want my os to be written in pure C and assembly(for performance favor)</p>\n"}, {"tags": ["c", "arrays", "sorting", "visual-studio-2013"], "comments": [{"owner": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "edited": false, "score": 1, "creation_date": 1443631264, "post_id": 32871245, "comment_id": 53574633, "body": "Just to point out that you&#39;re code won&#39;t work as it overruns the end of the array three times"}], "answers": [{"tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 4, "last_activity_date": 1443630941, "creation_date": 1443630941, "answer_id": 32871363, "question_id": 32871245, "link": "https://stackoverflow.com/questions/32871245/error-sorting-array-in-c-language/32871363#32871363", "title": "error sorting array in c language", "body": "<p>Visual Studio 2013 has a very old and creaky C compiler which, even after all these years, still does not yet understand C99. So you'll need to change this:</p>\n\n<pre><code>int howmany = 10;\nint goal[howmany];\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>#define howmany 10\nint goal[howmany];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1443632901, "post_id": 32871533, "comment_id": 53575521, "body": "code fixed, so I deleted my prior comment, will delete this one later."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443639678, "post_id": 32871533, "comment_id": 53579091, "body": "Why <code>(int)</code> cast in <code>bubblesort ()</code>?  Recommend <code>size_t i, j</code>"}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1443641881, "last_edit_date": 1443641881, "creation_date": 1443631504, "answer_id": 32871533, "question_id": 32871245, "link": "https://stackoverflow.com/questions/32871245/error-sorting-array-in-c-language/32871533#32871533", "title": "error sorting array in c language", "body": "<p>Well, first <code>swaped</code> is not the same as <code>swapped</code>. It seems you hit a nasty <em>spelling</em> error, which if you set your compiler preferences to show warnings (e.g. <code>-Wall -Wextra</code>) would have been readily apparent.</p>\n\n<p>Following the spelling issue, another warning you would have found is <code>temp</code> was being used uninitialized. Which it turn would have led you to discover your bubblesort was <code>FUBAR</code>. (it also helps to place a <code>'\\n'</code> at the end of your original/sorted list <code>printf</code> statements)</p>\n\n<p>All of your loop limits printing the values must be <code>for (i = 0; i &lt; howmany; i++)</code> <strong>NOT</strong> <code>for (i = 0; i &lt;= howmany; i++)</code> (<code>&lt;=</code> will cause you to read beyond the end of the array.)</p>\n\n<p>Finally, you would have found from your error messages that <code>stdlib.h</code> was needed for <code>rand()</code>.</p>\n\n<p>Take a look at the following, you can implement the bubblesort in the body of your code if you want, or simply call it as a function as shown below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;  /* rand() */\n\n#define howmany 10\n\nvoid bubblesort (int *a, size_t n);\n\nint main() {\n\n\n    int i/*,temp = 0,swapped*/; \n    // int howmany = 10;\n    int goal[howmany];\n\n\n    for (i = 0;i &lt; howmany;i++) {\n        goal[i] = (rand() % 40)+1;\n    }\n    printf(\"orignal list\\n\");\n    for (i = 0;i &lt; howmany;i++) {\n        printf(\"%d \\n\", goal[i]);\n    }\n\n    bubblesort (goal, howmany);\n//     while (1) {\n//         swapped = 0;\n//         for (i = 0;i &lt; howmany;i++) {\n//             if (goal[i] &gt; goal[i + 1]) {\n//                 goal[i] = temp;\n//                 goal[i] = goal[i + 1];\n//                 goal[i + 1] = temp;\n//                 swapped = 1;\n//             }\n// \n//         }\n//         if (swapped == 0) {\n//             break;\n//         }\n// \n//         printf(\"sorted list\");\n//         for (i = 0;i &lt; howmany;i++) {\n//             printf(\"%d \\n\", goal[i]);\n//         }\n//     }\n    printf(\"sorted list\\n\");\n    for (i = 0;i &lt; howmany;i++) {\n        printf(\"%d \\n\", goal[i]);\n    }\n    // _getch();\n    return 0;\n}\n\nvoid bubblesort (int *a, size_t n)\n{\n    size_t i, j;\n    int temp;\n    for (i = 0; i &lt; n; i++) {\n        for (j = 0; j &lt; (n-1); j++) {\n            if (a[j] &gt; a[j + 1]) {\n                temp = a[j + 1];\n                a[j + 1] = a[j];\n                a[j] = temp;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/vsnoconst\norignal list\n24\n7\n18\n36\n34\n16\n27\n13\n10\n22\n3\nsorted list\n7\n10\n13\n16\n18\n22\n24\n27\n34\n36\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5318399, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/905021362922004/picture?type=large", "display_name": "M Ahmad Rana", "link": "https://stackoverflow.com/users/5318399/m-ahmad-rana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 32871363, "answer_count": 2, "score": 0, "last_activity_date": 1443641881, "creation_date": 1443630508, "last_edit_date": 1443630816, "question_id": 32871245, "link": "https://stackoverflow.com/questions/32871245/error-sorting-array-in-c-language", "title": "error sorting array in c language", "body": "<p>Program to write number of goals scored by each player in a arranged list </p>\n\n<p>Sorting array in C language code is showing error \"did not evaluate to constant\" in Visual Studio.</p>\n\n<pre><code>int main() {\n\n    int i,temp,swaped; \n    int howmany = 10;\n    int goal[howmany];\n\n    for (i = 0;i &lt;= howmany;i++) {\n        goal[i] = (rand() % 40)+1;\n    }\n    printf(\"orignal list\");\n    for (i = 0;i &lt;= howmany;i++) {\n        printf(\"%d \\n\", goal[i]);\n    }\n    while (1) {\n        swaped = 0;\n        for (i = 0;i &lt; howmany;i++) {\n            if (goal[i] &gt; goal[i + 1]) {\n                goal[i] = temp;\n                goal[i] = goal[i + 1];\n                goal[i + 1] = temp;\n                swaped = 1;\n            }\n\n        }\n        if (swapped == 0) {\n            break;\n        }\n\n        printf(\"sorted list\");\n        for (i = 0;i &lt; howmany;i++) {\n            printf(\"%d \\n\", goal[i]);\n        }\n    }\n    _getch();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 107, "user_id": 5319766, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/29a9385e735c574a9ce584ba4c0578bf?s=128&d=identicon&r=PG&f=1", "display_name": "naggarwal11", "link": "https://stackoverflow.com/users/5319766/naggarwal11"}, "edited": false, "score": 0, "creation_date": 1443629620, "post_id": 32870922, "comment_id": 53573609, "body": "What you exactly want to do ?"}, {"owner": {"reputation": 9460, "user_id": 1885193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Vsd6.png?s=128&g=1", "display_name": "Gangadhar", "link": "https://stackoverflow.com/users/1885193/gangadhar"}, "edited": false, "score": 0, "creation_date": 1443629644, "post_id": 32870922, "comment_id": 53573626, "body": "The line counts number of times a same character found in given string."}, {"owner": {"reputation": 85, "user_id": 5285618, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UFu2S5f2DFU/AAAAAAAAAAI/AAAAAAAAA2o/zg8WZ9iHkrM/photo.jpg?sz=128", "display_name": "HellHammer", "link": "https://stackoverflow.com/users/5285618/hellhammer"}, "reply_to_user": {"reputation": 9460, "user_id": 1885193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Vsd6.png?s=128&g=1", "display_name": "Gangadhar", "link": "https://stackoverflow.com/users/1885193/gangadhar"}, "edited": false, "score": 0, "creation_date": 1443630148, "post_id": 32870922, "comment_id": 53573955, "body": "@Gangadhar I know what it does but how? That is my question. If you could simplify it."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1443631189, "post_id": 32870922, "comment_id": 53574594, "body": "@HellHammer Just for the record, is there any reason using <b>calloc</b> instead of <b>malloc</b> ? i mean Other than to zero-initializes the buffer ?"}], "answers": [{"tags": [], "owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": false, "score": 0, "last_activity_date": 1443629738, "creation_date": 1443629738, "answer_id": 32871010, "question_id": 32870922, "link": "https://stackoverflow.com/questions/32870922/pointer-de-referencing/32871010#32871010", "title": "Pointer De-referencing", "body": "<p>This code is equivalent to the confusing loop you posted.  Does it help?</p>\n\n<p><code>*(str + i)</code> is confusing way of expressing <code>str[i]</code> and IMO inappropriate here.</p>\n\n<pre><code>for (i = 0; str[i] != '\\0'; ++i)\n{\n  char curr_char = str[i];\n  ++count[curr_char];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 5319766, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/29a9385e735c574a9ce584ba4c0578bf?s=128&d=identicon&r=PG&f=1", "display_name": "naggarwal11", "link": "https://stackoverflow.com/users/5319766/naggarwal11"}, "is_accepted": false, "score": 0, "last_activity_date": 1443630548, "last_edit_date": 1443630548, "creation_date": 1443630093, "answer_id": 32871105, "question_id": 32870922, "link": "https://stackoverflow.com/questions/32870922/pointer-de-referencing/32871105#32871105", "title": "Pointer De-referencing", "body": "<p>In for loop there are three things we need to consider :</p>\n\n<ul>\n<li><p>Explanation of <strong>for loop</strong></p></li>\n<li><p>Initialization of counter variable( i in your eg.). 2) Condition (*(str+i))       3) Increment/decrement part (i++). </p></li>\n<li><p>the for loop gets executed till the condition is true(i.e any non zero value) . so  *(str+i) is providing a non zero value until there is any character in the array..  </p>\n\n<pre><code>count[*(str+i)]++;  // it is counting the number of characters in the array by incrementing the string character by character.\n</code></pre></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 5285618, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UFu2S5f2DFU/AAAAAAAAAAI/AAAAAAAAA2o/zg8WZ9iHkrM/photo.jpg?sz=128", "display_name": "HellHammer", "link": "https://stackoverflow.com/users/5285618/hellhammer"}, "edited": false, "score": 1, "creation_date": 1443630585, "post_id": 32871164, "comment_id": 53574229, "body": "Solved my problem. Just didn&#39;t strike me!"}, {"owner": {"reputation": 39406, "user_id": 371250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKvHm.png?s=128&g=1", "display_name": "ninjalj", "link": "https://stackoverflow.com/users/371250/ninjalj"}, "edited": false, "score": 0, "creation_date": 1443637460, "post_id": 32871164, "comment_id": 53577908, "body": "One of the consequences of <code>str[i]</code> being the same as <code>*(str+i)</code>, is that <code>str[i]</code> is also the same as <code>i[str]</code>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1443630710, "last_edit_date": 1443630710, "creation_date": 1443630281, "answer_id": 32871164, "question_id": 32870922, "link": "https://stackoverflow.com/questions/32870922/pointer-de-referencing/32871164#32871164", "title": "Pointer De-referencing", "body": "<p><code>*(str+i)</code> is same as <code>str[i]</code>. The line:</p>\n\n<pre><code>for (i = 0; *(str+i);  i++)\n</code></pre>\n\n<p>is the same as:</p>\n\n<pre><code>for (i = 0; str[i];  i++)\n</code></pre>\n\n<p>The statements in the loop will be executed as long as <code>str[i]</code> evaluates to non-zero. Since C strings are arrays of characters that are terminated by a null character, the <code>for</code> loop will be executed for each character in <code>str</code>. It will stop when the end of the string is reached.</p>\n\n<pre><code>  count[*(str+i)]++;\n</code></pre>\n\n<p>is the same as:</p>\n\n<pre><code>  count[str[i]]++;\n</code></pre>\n\n<p>If <code>str[i]</code> is <code>'a'</code>, this line will increment the value of <code>count['a']</code>, which is <code>count[97]</code> in ASCII encoding.</p>\n\n<p>At the end of the loop, <code>count</code> will be filled with integers that represent the number of times a particular character appears in <code>str</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 0, "last_activity_date": 1443631134, "creation_date": 1443631134, "answer_id": 32871411, "question_id": 32870922, "link": "https://stackoverflow.com/questions/32870922/pointer-de-referencing/32871411#32871411", "title": "Pointer De-referencing", "body": "<blockquote>\n  <p>I really can't grasp the following lines:</p>\n\n<pre><code>count[*(str+i)]++;\n</code></pre>\n</blockquote>\n\n<p>Work from the outside in:</p>\n\n<ul>\n<li>since <code>str</code> is a pointer to <code>char</code> and <code>i</code> is an <code>int</code>, <code>str + i</code> is a pointer to the <code>char</code> that is <code>i</code> chars after the one <code>str</code> itself points to</li>\n<li><code>*(str+i)</code> dereferences pointer <code>str+i</code>, meaning it evaluates to the <code>char</code> the pointer points to.  This is exactly equivalent to <code>str[i]</code>.</li>\n<li><code>count[*(str+i)]</code> uses the <code>char</code> at index <code>i</code> in string <code>str</code> as an index into dynamic array <code>count</code>.  The expression designates the <code>int</code> at that index (since <code>count</code> points to an array of <code>int</code>s).  See also below.</li>\n<li><code>count[*(str+i)]++</code> evaluates to the <code>int</code> at index <code>*(str+i)</code> in the array <code>count</code> points to.  As a side effect, it increments that array element by one after the value of the is determined expression.  This overall expression is present in your code exclusively for its side effect.</li>\n</ul>\n\n<p>It is important to note that although space is reserved in array <code>count</code> for counting appearances of 256 distinct <code>char</code> values, the expression you asked about <em>is not a safe way to count all of them</em>.  That's because type <code>char</code> can be implemented as a signed type (at the C implementer's discretion), and it is common for it to be implemented that way.  In that case, only the non-negative <code>char</code> values correspond to array elements, and undefined behavior will result if the input string contains others.  Safer would be:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\n# ...\n\ncount[(uint8_t) *(str+i)]++;\n</code></pre>\n\n<p>i.e. the same as the original, except for explicitly casting each character of the input string to an <em>unsigned</em> 8-bit value.</p>\n\n<p>Overall, the function simply creates an array of 256 <code>int</code>s, one for each possible <code>char</code> value, and scans the string to count the number of occurrences of each <code>char</code> value that appears in it.  It then returns this array of occurrence counts.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 2370430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9ebea69bca80c58afd51d2cebfb9838?s=128&d=identicon&r=PG", "display_name": "user2370430", "link": "https://stackoverflow.com/users/2370430/user2370430"}, "is_accepted": false, "score": 0, "last_activity_date": 1515419508, "last_edit_date": 1515419508, "creation_date": 1515415330, "answer_id": 48150558, "question_id": 32870922, "link": "https://stackoverflow.com/questions/32870922/pointer-de-referencing/48150558#48150558", "title": "Pointer De-referencing", "body": "<pre><code>count[*(str+i)]++ =&gt;count[*(str+i)]=count[*(str+i)]+1\n</code></pre>\n\n<p>Now consider one scenario:</p>\n\n<pre><code>char str[] = \"aaab\";\n\n*(str+i)/str[i]  Will show char like 'a','b'...etc.\n</code></pre>\n\n<p>So</p>\n\n<pre><code>   count[*(str+i)]++=count['a']++ Mean;\n   count['a']=count['a']+1 // Will store iteration of a=1\n\n   count['a']=count['a']+1 // Will  Update iteration of a=2\n\n   count['a']=count['a']+1 // Will  Update iteration of a=3\n</code></pre>\n\n<p>and like other character.\nSo <code>count[*(str+i)]++</code>  will update occrance of charcarter in updated <code>count</code>.</p>\n"}], "owner": {"reputation": 85, "user_id": 5285618, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UFu2S5f2DFU/AAAAAAAAAAI/AAAAAAAAA2o/zg8WZ9iHkrM/photo.jpg?sz=128", "display_name": "HellHammer", "link": "https://stackoverflow.com/users/5285618/hellhammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 0, "accepted_answer_id": 32871411, "answer_count": 5, "score": 1, "last_activity_date": 1515419508, "creation_date": 1443629485, "last_edit_date": 1443630027, "question_id": 32870922, "link": "https://stackoverflow.com/questions/32870922/pointer-de-referencing", "title": "Pointer De-referencing", "body": "<pre><code>#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n#define NO_OF_CHARS 256\n\n/* Returns an array of size 256 containg count\n   of characters in the passed char array */\nint *getCharCountArray(char *str)\n{\n   int *count = (int *)calloc(sizeof(int), NO_OF_CHARS);\n   int i;\n   for (i = 0; *(str+i);  i++)\n      count[*(str+i)]++;\n   return count;\n}\n\n/* The function returns index of first non-repeating\n   character in a string. If all characters are repeating \n   then returns -1 */\nint firstNonRepeating(char *str)\n{\n  int *count = getCharCountArray(str);\n  int index = -1, i;\n\n  for (i = 0; *(str+i);  i++)\n  {\n    if (count[*(str+i)] == 1)\n    {\n      index = i;\n      break;\n    }   \n  }  \n\n  free(count); // To avoid memory leak\n  return index;\n}\n\n/* Driver program to test above function */\nint main()\n{\n  char str[] = \"geeksforgeeks\";\n  int index =  firstNonRepeating(str);\n  if (index == -1)  \n    printf(\"Either all characters are repeating or string is empty\");\n  else\n   printf(\"First non-repeating character is %c\", str[index]);\n  getchar();\n  return 0;\n}\n</code></pre>\n\n<p>I really can't grasp the following lines: </p>\n\n<pre><code>count[*(str+i)]++;\n</code></pre>\n\n<p>amd </p>\n\n<pre><code>  int *getCharCountArray(char *str)\n    {\n       int *count = (int *)calloc(sizeof(int), NO_OF_CHARS);\n       int i;\n       for (i = 0; *(str+i);  i++)\n          count[*(str+i)]++;\n       return count;\n    }\n</code></pre>\n\n<p>The program is used to find the first Non-Repeating character in the string. </p>\n"}, {"tags": ["c", "utf-8", "go"], "comments": [{"owner": {"reputation": 3111, "user_id": 455678, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ec6689b267447cdcd58fbe5d89332b25?s=128&d=identicon&r=PG", "display_name": "Lander", "link": "https://stackoverflow.com/users/455678/lander"}, "edited": false, "score": 0, "creation_date": 1443629163, "post_id": 32870736, "comment_id": 53573314, "body": "Are you encountering a problem when reading the string?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1443630587, "post_id": 32870736, "comment_id": 53574232, "body": "Strings are just a sequence of bytes, and Go doesn&#39;t care what&#39;s in there."}, {"owner": {"reputation": 21289, "user_id": 532430, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/uAwnB.png?s=128&g=1", "display_name": "thwd", "link": "https://stackoverflow.com/users/532430/thwd"}, "edited": false, "score": 0, "creation_date": 1443632006, "post_id": 32870736, "comment_id": 53575072, "body": "@udo: Depends entirely on what&#39;s in s2in. It could point to a PNG file. Or UTF-16 text, or some ISO encoded text. Each case is different."}], "answers": [{"tags": [], "owner": {"reputation": 3818, "user_id": 1247113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zRMFj.png?s=128&g=1", "display_name": "rob74", "link": "https://stackoverflow.com/users/1247113/rob74"}, "is_accepted": true, "score": 5, "last_activity_date": 1443641826, "last_edit_date": 1443641826, "creation_date": 1443630072, "answer_id": 32871093, "question_id": 32870736, "link": "https://stackoverflow.com/questions/32870736/golang-how-to-correctly-parse-utf-8-string-from-c/32871093#32871093", "title": "Golang: How to correctly parse UTF-8 string from C", "body": "<p>You don't need to do anything special. UTF-8 is Go's \"native\" character encoding, so you can use the functions from the <code>utf8</code> package you mentioned, e.g. <code>utf8.RuneCountInString</code> to get the number of Unicode runes in a string. Keep in mind that <code>len(s)</code> will still return the number of bytes in the string.</p>\n\n<p>See <a href=\"https://blog.golang.org/strings\" rel=\"noreferrer\">this post in the official blog</a> or <a href=\"http://dominik.honnef.co/posts/2012/04/dealing_with_encodings_in_go/\" rel=\"noreferrer\">this article</a> for some details.</p>\n"}], "owner": {"reputation": 1259, "user_id": 526426, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/b1w0f.jpg?s=128&g=1", "display_name": "udo", "link": "https://stackoverflow.com/users/526426/udo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1267, "favorite_count": 0, "accepted_answer_id": 32871093, "answer_count": 1, "score": 1, "last_activity_date": 1443641826, "creation_date": 1443628932, "question_id": 32870736, "link": "https://stackoverflow.com/questions/32870736/golang-how-to-correctly-parse-utf-8-string-from-c", "title": "Golang: How to correctly parse UTF-8 string from C", "body": "<p>I'm a newbie to the go world, so maybe this is obvious.</p>\n\n<p>I have a Go function which I'm exposing to C with the <code>go build -buildmode=c-shared</code> and corresponding <code>//export funcName</code> comment.\n(You can see it here: <a href=\"https://github.com/udl/bmatch/blob/master/ext/levenshtein.go#L42\" rel=\"nofollow\">https://github.com/udl/bmatch/blob/master/ext/levenshtein.go#L42</a>)</p>\n\n<p>My conversion currently works like this:</p>\n\n<pre><code>func distance(s1in, s2in *C.char) int {\n    s1 := C.GoString(s1in)\n    s2 := C.GoString(s2in)\n</code></pre>\n\n<p>How would I handle UTF-8 input here?\nI've seen there is a UTF-8 package but I don't quite get how it works. <a href=\"https://golang.org/pkg/unicode/utf8/\" rel=\"nofollow\">https://golang.org/pkg/unicode/utf8/</a></p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c", "makefile", "gnu-make", "undefined-reference"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 2, "creation_date": 1443628090, "post_id": 32870403, "comment_id": 53572571, "body": "Are <code>disk_alloc_create</code> and <code>disk_alloc_delete</code> in <code>disk_alloc.c</code>? Can you see those symbols in the <code>disk_alloc.o</code> file and the <code>libtest.a</code> library? Also you realize RHEL 4 is <b>very</b> old and full of <b>gaping</b> security holes, right? (As well as being entirely unmaintained at this point.)"}, {"owner": {"reputation": 1, "user_id": 5393499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e82045492b459c822d35402b38e8c39?s=128&d=identicon&r=PG&f=1", "display_name": "Duder", "link": "https://stackoverflow.com/users/5393499/duder"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1443628262, "post_id": 32870403, "comment_id": 53572691, "body": "Disregarding talk of gaping holes, yes those two functions are in disk_alloc.c and are present in the library."}, {"owner": {"reputation": 1, "user_id": 5393499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e82045492b459c822d35402b38e8c39?s=128&d=identicon&r=PG&f=1", "display_name": "Duder", "link": "https://stackoverflow.com/users/5393499/duder"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1443628690, "post_id": 32870403, "comment_id": 53573025, "body": "@etan-reisner Looking at the disk_alloc.o file, I actually found that the symbols for disk_alloc_create and disk_alloc_delete are not found, but they are in the library. What causes this discrepancy and how can I resolve it?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1443628798, "post_id": 32870403, "comment_id": 53573102, "body": "When you say &quot;they are in the library&quot; you mean you can find them in the <code>libtest.a</code> file? Or in the source? If they are in the library then things should be working I think. If they are only in the source then they either aren&#39;t marked for export or gcc is choosing not to include them in the object file for some reason I can&#39;t imagine."}, {"owner": {"reputation": 1, "user_id": 5393499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e82045492b459c822d35402b38e8c39?s=128&d=identicon&r=PG&f=1", "display_name": "Duder", "link": "https://stackoverflow.com/users/5393499/duder"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1443628869, "post_id": 32870403, "comment_id": 53573142, "body": "They are found in the libtest.a file, but not in disk_alloc.o."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1443628939, "post_id": 32870403, "comment_id": 53573184, "body": "That is certainly odd and I can&#39;t explain that. (I don&#39;t see how that&#39;s possible actually unless they are coming from some other object in the <code>.a</code> library.) And actually, have you tried simply putting <code>test.o</code> <i>after</i> <code>disk_alloc.o</code> in the library? (Hm... actually that&#39;s probably the wrong order now that I think about it.)"}, {"owner": {"reputation": 1, "user_id": 5393499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e82045492b459c822d35402b38e8c39?s=128&d=identicon&r=PG&f=1", "display_name": "Duder", "link": "https://stackoverflow.com/users/5393499/duder"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1443630236, "post_id": 32870403, "comment_id": 53574012, "body": "Rearranging the order of the object files did not seem to have an impact either way."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1443630539, "post_id": 32870403, "comment_id": 53574200, "body": "Can you show the definitions of the functions in the <code>disk_alloc.c</code> file? If you clean up all the <code>.a</code> and <code>.o</code> files and start building from scratch does this problem repeat (exactly)?"}, {"owner": {"reputation": 1, "user_id": 5393499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e82045492b459c822d35402b38e8c39?s=128&d=identicon&r=PG&f=1", "display_name": "Duder", "link": "https://stackoverflow.com/users/5393499/duder"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1443630961, "post_id": 32870403, "comment_id": 53574452, "body": "Check the source posted in my question for the definitions. If I clean up and rebuild, the problem still persists."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1443631847, "post_id": 32870403, "comment_id": 53574975, "body": "I can check out that exact repository, dump that exact Makefile in the <code>dttools&#47;src</code> directory and run it (with a shim <code>test.c</code> that just lists the functions for symbol purposes) and I get an error about <code>cctools_debug</code> being a missing symbol but nothing about <code>disk_alloc_(create|delete)</code>. On CentOS 5 that is. Could this be a tooling issue of the ancient RHEL 4 toolsets?"}, {"owner": {"reputation": 1, "user_id": 5393499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e82045492b459c822d35402b38e8c39?s=128&d=identicon&r=PG&f=1", "display_name": "Duder", "link": "https://stackoverflow.com/users/5393499/duder"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1443632664, "post_id": 32870403, "comment_id": 53575399, "body": "Found the problem. It was a bug on my end and had nothing to do with make. I had edited the file to remove the preprocessor conditional and botched it."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5393499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e82045492b459c822d35402b38e8c39?s=128&d=identicon&r=PG&f=1", "display_name": "Duder", "link": "https://stackoverflow.com/users/5393499/duder"}, "edited": false, "score": 0, "creation_date": 1443628635, "post_id": 32870480, "comment_id": 53572984, "body": "Thanks for the speedy reply. Unfortunately, this produces a heap of &#39;multiple definition&#39; errors for all the functions found in the library and still leaves the &#39;undefined reference&#39; errors at the end of the command. Any other info I can give you?"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1443628711, "post_id": 32870480, "comment_id": 53573044, "body": "The OP is linking the <code>libtest.a</code> library and so doesn&#39;t need the individual object files."}, {"owner": {"reputation": 1, "user_id": 5393499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e82045492b459c822d35402b38e8c39?s=128&d=identicon&r=PG&f=1", "display_name": "Duder", "link": "https://stackoverflow.com/users/5393499/duder"}, "edited": false, "score": 0, "creation_date": 1443629678, "post_id": 32870480, "comment_id": 53573653, "body": "This answer still does not resolve the &#39;undefined reference&#39; errors stemming from disk_alloc_create and disk_alloc_delete. I have removed reference to the library and just used the object files as well as removing only test.o and compiling that separately using your above suggestion. Both yield the same result. Seeing as neither disk_alloc_create nor disk_alloc_delete are found in the disk_alloc.o file, that leads me to believe something has gone wrong there, but I am not sure what."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1443629807, "post_id": 32870480, "comment_id": 53573729, "body": "We can&#39;t help more without the entire source code that your are compiling."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1443630187, "post_id": 32870480, "comment_id": 53573983, "body": "You should have mentioned that in your question, certainly not in a comment"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1443629103, "last_edit_date": 1495541742, "creation_date": 1443628154, "answer_id": 32870480, "question_id": 32870403, "link": "https://stackoverflow.com/questions/32870403/gnu-make-c-undefined-reference-to-function-included-in-library/32870480#32870480", "title": "gnu make C undefined reference to function included in library", "body": "<p>You forgot to link your object files <code>$(OBJ)</code> and you might not need any <code>$(LIB)</code>, so replace</p>\n\n<pre><code>$(PROG):\n    $(CC) $(CFLAGS) $(LIB) -o $@\n</code></pre>\n\n<p>with</p>\n\n<pre><code>$(PROG): $(OBJ)\n    $(CC) $(CFLAGS) $^ -o $@\n</code></pre>\n\n<p>If you absolutely want to have your library, you'll need to link an object file providing <code>main</code> outside of it. Probably keep <code>$(LIB)</code> but remove <code>test.o</code> from definition of <code>OBJ</code>, and do</p>\n\n<pre><code>$(PROG): test.o $(LIB)\n     $(CC) $(CFLAGS) $^ -o $@\n</code></pre>\n\n<p>Read more about <a href=\"https://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html#index-_0024_005e\" rel=\"nofollow noreferrer\">automatic variables</a> in <code>make</code></p>\n\n<p>And indeed, you should upgrade your Linux distribution (using RHEL4 is not reasonable these days). If possible, in 2015, use one with <a href=\"https://gcc.gnu.org/gcc-5/\" rel=\"nofollow noreferrer\">GCC 5</a> &amp; <code>make 4.</code>... Consider also using <a href=\"http://bashdb.sourceforge.net/remake/\" rel=\"nofollow noreferrer\">remake</a> to debug your <code>Makefile</code>-s. See also the links in <a href=\"https://stackoverflow.com/a/32760257/841108\">this</a> answer (including examples of short <code>Makefile</code>-s)</p>\n\n<p>BTW, static libraries are generally obsolete, and in your case it might not worth having a library (even a shared one). If you really want one, make it shared, and read <a href=\"http://tldp.org/HOWTO/Program-Library-HOWTO/\" rel=\"nofollow noreferrer\">Program-Library-HowTo</a> &amp; Drepper's paper: <a href=\"http://people.redhat.com/drepper/dsohowto.pdf\" rel=\"nofollow noreferrer\"><em>How to Write a Shared Library</em></a></p>\n"}], "owner": {"reputation": 1, "user_id": 5393499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e82045492b459c822d35402b38e8c39?s=128&d=identicon&r=PG&f=1", "display_name": "Duder", "link": "https://stackoverflow.com/users/5393499/duder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 895, "favorite_count": 0, "closed_date": 1444324614, "answer_count": 1, "score": -1, "last_activity_date": 1444323656, "creation_date": 1443627920, "last_edit_date": 1444323656, "question_id": 32870403, "link": "https://stackoverflow.com/questions/32870403/gnu-make-c-undefined-reference-to-function-included-in-library", "closed_reason": "Not suitable for this site", "title": "gnu make C undefined reference to function included in library", "body": "<p>UPDATE: Found the problem. It was a bug on my end and had nothing to do with make. I had edited the file to remove the preprocessor conditional and botched it.</p>\n\n<p>I am attempting to compile a testing program using a makefile to handle the creation of a library of files that include functions which are used by the test. When trying to make the final executable, I receive an 'undefined reference' error. Below is my makefile and the resulting output. I have tried switching up the ordering of files and operations within my makefile, but they all resulted in failure. That leads me to believe I am missing some key component to making it work instead of needing to reorder my operations.</p>\n\n<p>I am running RHEL 4 if that matters.</p>\n\n<pre><code>CC=gcc\nCFLAGS=-Wall\nLDFLAGS=-lm\nAR=ar\n\nOBJ = \\\n    test.o \\\n    disk_alloc.o \\\n    stringtools.o \\\n    path.o \\\n    xxmalloc.o\n\nLIB = libtest.a\nPROG = test\nTAR = $(LIB) $(PROG)\n\nall: $(TAR)\n\nlibtest.a: $(OBJ)\n    $(AR) -rv $(LIB) $(OBJ)\n    ranlib $(LIB)\n\n$(PROG):\n    $(CC) $(CFLAGS) $(LIB) -o $@\n\nclean:\n    rm -f $(OBJ) $(TAR)\n\n.PHONY: all clean\n\n# vim: set noexpandtab tabstop=4:\n</code></pre>\n\n<p>Output after executing make:</p>\n\n<pre><code>gcc -Wall   -c -o test.o test.c\ngcc -Wall   -c -o disk_alloc.o disk_alloc.c\ngcc -Wall   -c -o stringtools.o stringtools.c\ngcc -Wall   -c -o path.o path.c\ngcc -Wall   -c -o xxmalloc.o xxmalloc.c\nar -rv libtest.a test.o disk_alloc.o stringtools.o path.o xxmalloc.o\nar: creating libtest.a\na - test.o\na - disk_alloc.o\na - stringtools.o\na - path.o\na - xxmalloc.o\nranlib libtest.a\ngcc -Wall libtest.a -o test\nlibtest.a(test.o): In function `disk_alloc_test_empty':\ntest.c:(.text+0x5f): undefined reference to `disk_alloc_create'\ntest.c:(.text+0x81): undefined reference to `disk_alloc_delete'\nlibtest.a(test.o): In function `disk_alloc_test_read_write':\ntest.c:(.text+0x17b): undefined reference to `disk_alloc_create'\ntest.c:(.text+0x1e0): undefined reference to `disk_alloc_delete'\nlibtest.a(test.o): In function `disk_alloc_test_nested':\ntest.c:(.text+0x30a): undefined reference to `disk_alloc_create'\ntest.c:(.text+0x372): undefined reference to `disk_alloc_create'\ntest.c:(.text+0x410): undefined reference to `disk_alloc_delete'\ntest.c:(.text+0x426): undefined reference to `disk_alloc_delete'\ncollect2: ld returned 1 exit status\nmake: *** [test] Error 1\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1443628559, "post_id": 32870276, "comment_id": 53572922, "body": "print with <code>hh</code> as in <code>printf(&quot;inverted a4 = %hhx\\t b4= %hhx\\n&quot;,~a4, ~b4);</code> to avoid printing sign extension."}], "answers": [{"tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 0, "last_activity_date": 1443627755, "creation_date": 1443627755, "answer_id": 32870343, "question_id": 32870276, "link": "https://stackoverflow.com/questions/32870276/printing-inverse-of-a-character/32870343#32870343", "title": "Printing inverse of a character", "body": "<p><code>sizeof(~b4)</code> was 4 in <a href=\"http://melpon.org/wandbox/permlink/FmY4EtxsDcH5zFQV\" rel=\"nofollow\">Wandbox</a>.</p>\n\n<p>To get only FE, use AND mask.<br>\nAlso, change <code>%x</code> to <code>%X</code> to get FE, not fe.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    unsigned char a4=1;\n    char b4=1;\n    printf(\"inverted a4 = %X\\t b4= %X\\n\",(~a4) &amp; 0xFF, (~b4) &amp; 0xFF);\n    return(0);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "is_accepted": false, "score": 0, "last_activity_date": 1443627878, "creation_date": 1443627878, "answer_id": 32870391, "question_id": 32870276, "link": "https://stackoverflow.com/questions/32870276/printing-inverse-of-a-character/32870391#32870391", "title": "Printing inverse of a character", "body": "<p>The parameter %X and %x expects <code>int</code>.</p>\n\n<p>You providing <code>char</code> and it is casted to <code>int</code>.</p>\n\n<p>The solution is as MikeCAT give:</p>\n\n<pre><code>printf(\"inverted a4 = %X\\t b4= %X\\n\",(~a4) &amp; 0xFF, (~b4) &amp; 0xFF);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1443627971, "creation_date": 1443627971, "answer_id": 32870420, "question_id": 32870276, "link": "https://stackoverflow.com/questions/32870276/printing-inverse-of-a-character/32870420#32870420", "title": "Printing inverse of a character", "body": "<p>The reason for this is the way ...(ellipsis) functions work in C. When the char argument is provided to ellipsis function, it is 'expanded' to int (or unsigned int, depending whether char is signed or unsigned). Actually, everything which is smaller than int is expanded (correct term is promoted) to int. As a result of this promotion, when printf sees the value, it was already promoted. By the way, float is promoted to double in the same way.</p>\n"}, {"comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1443628381, "post_id": 32870498, "comment_id": 53572785, "body": "<code>(char)</code> --&gt; <code>(unsigned char)</code>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1443628382, "post_id": 32870498, "comment_id": 53572788, "body": "It doesn&#39;t give the value <code>0xFFFFFFFE</code>; it gives the value <code>-2</code>."}], "tags": [], "owner": {"reputation": 11, "user_id": 5372440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe2070a8ede91cb217d72411d5ffd37?s=128&d=identicon&r=PG&f=1", "display_name": "R3K", "link": "https://stackoverflow.com/users/5372440/r3k"}, "is_accepted": false, "score": 0, "last_activity_date": 1443628453, "last_edit_date": 1443628453, "creation_date": 1443628202, "answer_id": 32870498, "question_id": 32870276, "link": "https://stackoverflow.com/questions/32870276/printing-inverse-of-a-character/32870498#32870498", "title": "Printing inverse of a character", "body": "<p>The compiler is promoting the character (<code>0x01</code>) to a 32-bit integer (<code>0x00000001</code>) before it inverts it, this gives the value (<code>0xFFFFFFFE</code>).</p>\n\n<p>You could do a bitwise AND as the other answers mentioned, or add a type cast to convert the answer back to <code>char</code> type afterward:</p>\n\n<pre><code>unsigned char a4=1;\nchar b4=1;\nprintf(\"inverted a4 = %X\\t b4= %X\\n\",(unsigned char)(~a4), (char)(~b4));\nreturn(0);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 2, "last_activity_date": 1443628355, "creation_date": 1443628355, "answer_id": 32870545, "question_id": 32870276, "link": "https://stackoverflow.com/questions/32870276/printing-inverse-of-a-character/32870545#32870545", "title": "Printing inverse of a character", "body": "<p>The operand of the <code>~</code> operator undergoes the <em>integer promotions</em>. An operand of type <code>char</code> or <code>unsigned char</code> is promoted to <code>int</code>, and the result is of type <code>int</code>.</p>\n\n<pre><code>char b4=1;\n</code></pre>\n\n<p><code>b4</code> is of type <code>char</code>.</p>\n\n<pre><code>~b4\n</code></pre>\n\n<p>The value of <code>b4</code> is promoted to <code>int</code>, and the <code>~</code> operator yields the bitwise complement of <code>1</code>.  If <code>int</code> is 32 bits, the result is <code>-2</code>, assuming a 2's-complement representation for signed integers.</p>\n\n<pre><code>printf\"%x\\n\", ~b4);\n</code></pre>\n\n<p>The <code>int</code> value <code>-2</code> is printed as if it were of type <code>unsigned char</code>; the result is <code>fffffffe</code>.</p>\n\n<p>If you want just the low-order 8 bits, you can use a bitwise mask:</p>\n\n<pre><code>printf(\"%X\\n\", ~b4 &amp; 0xFF);\n</code></pre>\n\n<p>This will print <code>FE</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 2, "last_activity_date": 1444342164, "last_edit_date": 1444342164, "creation_date": 1443628699, "answer_id": 32870661, "question_id": 32870276, "link": "https://stackoverflow.com/questions/32870276/printing-inverse-of-a-character/32870661#32870661", "title": "Printing inverse of a character", "body": "<p>When you do <em>any arithmetic or bit operation</em> on a <code>char</code> quantity, it is silently converted to <code>int</code> first.  This is called <a href=\"http://www.idryman.org/blog/2012/11/21/integer-promotion/\" rel=\"nofollow\">integer promotion</a>.  It affects <code>short</code> (and <code>signed char</code>, <code>unsigned char</code>, and <code>unsigned short</code>) as well.  (Technically, if <code>sizeof(unsigned short) == sizeof(unsigned int)</code> then <code>unsigned short</code> would promote to <code>unsigned int</code> rather than <code>int</code>, but you're not likely to trip over a system with that characteristic anymore, even though it's still allowed by the C standard.)</p>\n\n<p>This <em>also</em> happens to <code>char</code> and <code>short</code> when they are passed through the anonymous arguments to <code>printf</code> (or any other variadic function).</p>\n\n<p>So, your code</p>\n\n<pre><code>unsigned char a4=1;\nchar b4=1;\nprintf(\"inverted a4 = %x\\t b4= %x\\n\",~a4, ~b4);\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>...\nprintf(\"inverted a4 = %x\\t b4= %x\\n\", (int) ~(int)a4, (int) ~(int)b4);\n</code></pre>\n\n<p>(The cast after the <code>~</code> doesn't do anything but I have written it anyway to emphasize that conversion could happen <em>both</em> because of the arithmetic and because of the argument passing.)</p>\n\n<p>There is no way to turn this behavior off.  To get the effect you wanted, I would write</p>\n\n<pre><code>static_assert(CHAR_BIT == 8);\nprintf(\"inverted a4 = %02x\\tb4 = %02x\\n\",\n       (~(unsigned int)a4) &amp; 0xFFu,\n       (~(unsigned int)b4) &amp; 0xFFu);\n</code></pre>\n\n<p>The difference between this and the code suggested by MikeCAT and Nick is that all bit operations are done on <em>unsigned</em> quantities.  Some bit operations have undefined behavior when applied to signed quantities, and I can never remember exactly what the rules are, so I just avoid doing any of them to signed quantities.  (The change from <code>%x</code> to <code>%02x</code> is just for aesthetics.)</p>\n\n<p>Systems on which the <code>static_assert</code> fails are vanishingly rare nowadays, but again, still allowed by the C standard.  I mostly include it to document the program's expectations.  (The <code>0xFFu</code> masks and <code>%02x</code> formatters are wrong on a system with a different value for <code>CHAR_BIT</code>.)</p>\n"}], "owner": {"reputation": 233, "user_id": 5375911, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/3a63cfd1908b25a60940e19e2878b1ad?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Wheelock", "link": "https://stackoverflow.com/users/5375911/jon-wheelock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 1, "closed_date": 1483180289, "accepted_answer_id": 32870661, "answer_count": 6, "score": -1, "last_activity_date": 1444342164, "creation_date": 1443627593, "question_id": 32870276, "link": "https://stackoverflow.com/questions/32870276/printing-inverse-of-a-character", "closed_reason": "Duplicate", "title": "Printing inverse of a character", "body": "<p>I would like to know why printf statement displays the character value as 4 byte value (fffffffe) in the following code. Since the character is of 1 byte, I thought we should be getting result of only FE one byte value.</p>\n\n<pre><code>int main(void)\n{\n    unsigned char a4=1;\n    char b4=1;\n    printf(\"inverted a4 = %x\\t b4= %x\\n\",~a4, ~b4);\n    return(0);\n}\n</code></pre>\n"}, {"tags": ["c", "language-design"], "comments": [{"owner": {"reputation": 191202, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 1, "creation_date": 1443626781, "post_id": 32869960, "comment_id": 53571670, "body": "<a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Comma_operator</a>"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1443626838, "post_id": 32869960, "comment_id": 53571717, "body": "Perfectly  valid - read up about the comma operator"}, {"owner": {"reputation": 13712, "user_id": 1313233, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/hBeXC.png?s=128&g=1", "display_name": "rkachach", "link": "https://stackoverflow.com/users/1313233/rkachach"}, "edited": false, "score": 0, "creation_date": 1443627022, "post_id": 32869960, "comment_id": 53571840, "body": "Yes, but this doesn&#39;t answer the other questions. Why the compiler doesn&#39;t throw an error in this case, etc .. and specially in which case such syntax could be useful."}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1443627155, "post_id": 32869960, "comment_id": 53571950, "body": "It doesn&#39;t throw an error because the comma operator in <code>foo,(1);</code> is syntactically equivalent to the same operator in <code>i = 0, j = 0;</code>."}, {"owner": {"reputation": 13712, "user_id": 1313233, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/hBeXC.png?s=128&g=1", "display_name": "rkachach", "link": "https://stackoverflow.com/users/1313233/rkachach"}, "edited": false, "score": 0, "creation_date": 1443627263, "post_id": 32869960, "comment_id": 53572037, "body": "So, in this case it&#39;s not an error prone situation. In the example case it&#39;s clear that it&#39;s separating a function call and it&#39;s arguments. Why the compiler in this case doesn&#39;t issue an error? is it hard to detect?"}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1443627524, "post_id": 32869960, "comment_id": 53572191, "body": "What is the warning you get? It should provide a clue as to why it doesn&#39;t issue an error."}, {"owner": {"reputation": 13712, "user_id": 1313233, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/hBeXC.png?s=128&g=1", "display_name": "rkachach", "link": "https://stackoverflow.com/users/1313233/rkachach"}, "edited": false, "score": 0, "creation_date": 1443627617, "post_id": 32869960, "comment_id": 53572257, "body": "&quot;left-hand&quot; operand of comma expression has no effct&quot;. I mean the warning (when -Wall enabled) is good. But couldn&#39;t the compiler detect in this case that a programmer made an error and is calling a function in the wrong way? .. so in this case issue an error instead of a warning!"}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1443628055, "post_id": 32869960, "comment_id": 53572551, "body": "The idea is, the compiler has no idea that you&#39;re calling a function; how should it?"}, {"owner": {"reputation": 13712, "user_id": 1313233, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/hBeXC.png?s=128&g=1", "display_name": "rkachach", "link": "https://stackoverflow.com/users/1313233/rkachach"}, "edited": false, "score": 0, "creation_date": 1443628226, "post_id": 32869960, "comment_id": 53572669, "body": "The compiler knows that foo is a function, otherwise it would issue an error. Since following we get a &quot;(&quot; then I think it should be enough to guess what the programmer is trying to do."}], "answers": [{"comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 2, "creation_date": 1443626907, "post_id": 32870020, "comment_id": 53571769, "body": "In this case, it evaluates <code>(1)</code> and <code>return</code>s it (<code>return foo,(1);</code>)"}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 4, "last_activity_date": 1443626840, "creation_date": 1443626840, "answer_id": 32870020, "question_id": 32869960, "link": "https://stackoverflow.com/questions/32869960/c-function-call-followed-by-a-comma-separator/32870020#32870020", "title": "C function call followed by a comma separator", "body": "<p><code>foo,(1);</code> first evaluate <code>foo</code> and do nothing, then evaluate <code>(1)</code> and do nothing.</p>\n\n<p>The comma operator is useful, for example, when you do multiple things in <code>for</code> loop.</p>\n\n<pre><code>int i, j;\nfor (i = 0, j = 1; i &lt; 10; i++, j *= 2) {\n    printf(\"%d %d\\n\", i, j);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13712, "user_id": 1313233, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/hBeXC.png?s=128&g=1", "display_name": "rkachach", "link": "https://stackoverflow.com/users/1313233/rkachach"}, "edited": false, "score": 0, "creation_date": 1443627920, "post_id": 32870050, "comment_id": 53572463, "body": "Thanks for the response. But the question asks more about why the syntax is allowed for this kind of situations (when it&#39;s clear that the programmer is introducing an error)."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 13712, "user_id": 1313233, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/hBeXC.png?s=128&g=1", "display_name": "rkachach", "link": "https://stackoverflow.com/users/1313233/rkachach"}, "edited": false, "score": 0, "creation_date": 1443628265, "post_id": 32870050, "comment_id": 53572696, "body": "@redobot, the compiler has to allow the syntax since it is legal by the standard of the language. There are so many pitfalls in the language that are worse than this. The number of ways a program will exhibit undefined behavior is rather long. The compiler allows them too. Compared to them, this is rather harmless."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 5, "last_activity_date": 1443626893, "creation_date": 1443626893, "answer_id": 32870050, "question_id": 32869960, "link": "https://stackoverflow.com/questions/32869960/c-function-call-followed-by-a-comma-separator/32870050#32870050", "title": "C function call followed by a comma separator", "body": "<pre><code>return foo,(1);\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>foo; // Nothing happens. This does not call the function.\nreturn (1);\n</code></pre>\n\n<p>Perhaps you meant to use:</p>\n\n<pre><code>foo(1);\nreturn 1;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443628948, "post_id": 32870294, "comment_id": 53573193, "body": "&quot;where the programmer is supposed to know what they&#39;re doing.&quot; --&gt; coding without training wheels."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 5, "last_activity_date": 1443627950, "last_edit_date": 1443627950, "creation_date": 1443627634, "answer_id": 32870294, "question_id": 32869960, "link": "https://stackoverflow.com/questions/32869960/c-function-call-followed-by-a-comma-separator/32870294#32870294", "title": "C function call followed by a comma separator", "body": "<p>C is a simple, minimalist language where the programmer is supposed to know what they're doing.</p>\n\n<p>In C, types convert to each other quite easily and the original C didn't even have function declarations -- the programmer was supposed to know how to call each function and with what parameters.</p>\n\n<p>C was the programming language for Unix and </p>\n\n<blockquote>\n  <p>\"UNIX was not designed to stop you from doing stupid things, because\n  that would also stop you from doing clever things.\"\u2014Doug Gwyn (<a href=\"https://en.wikiquote.org/wiki/Unix\" rel=\"nofollow\">https://en.wikiquote.org/wiki/Unix</a>)</p>\n</blockquote>\n\n<p>As a bonus, if the compiler doesn't try to be smart, compilation can be very fast.</p>\n\n<p>C++ takes a very different approach to this.</p>\n\n<p>As for practical applications of the <code>,</code> operator, take a look at:\n<a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Comma_operator</a></p>\n\n<blockquote>\n  <p>The comma operator has relatively limited use cases.\n  Because it discards its first operand, it is generally only useful\n  where the first operand has desirable side effects. Further, because\n  it is rarely used outside of specific idioms, and easily mistaken with\n  other commas or the semicolon, it is potentially confusing and\n  error-prone. Nevertheless, there are certain circumstances where it is\n  commonly used, notably in for loops and in SFINAE\n  (<a href=\"http://en.cppreference.com/w/cpp/language/sfinae\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/sfinae</a>). For embedded\n  systems which may have limited debugging capabilities, the comma\n  operator can be used in combination with a macro to seamlessly\n  override a function call, to insert code just before the function\n  call.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1443631755, "post_id": 32871189, "comment_id": 53574911, "body": "Also likely is that  &quot;return foo(1);&quot; was what the code was supposed to be, and this example was created to show what can happen when there is an inadvertent typo (the comma)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1443632477, "post_id": 32871189, "comment_id": 53575300, "body": "Good point as well. But a misplaced <code>,</code> kinda minimizes focus on the comma operator and emphasizes careful typing. 6-to-one, 1/2 dozen-to-another I guess <code>:)</code>"}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 2, "last_activity_date": 1443630370, "creation_date": 1443630370, "answer_id": 32871189, "question_id": 32869960, "link": "https://stackoverflow.com/questions/32869960/c-function-call-followed-by-a-comma-separator/32871189#32871189", "title": "C function call followed by a comma separator", "body": "<p>It appears the exercise and sample code was designed specifically to highlight the particular use, pitfalls, and human fallibility when reading, a sequence of operations chained together with the <code>comma operator</code>. </p>\n\n<p>There is nothing wrong with the comma operator, but it is more of a shortcut or hack to save a line or two of code and avoid having to wrap a two expression loop or conditional in braces.</p>\n\n<p>You stumbled into exactly what the writer wanted you to stumble into in the exercise. Your eyes read right past the fact that there were no parenthesis following <code>foo</code> by virtue of the comma operator, with the only applicable return being <code>1</code>.</p>\n\n<p>It is a good example. Why? Learning has occurred -- not only regarding the comma operator, but your learning that the warnings were only disclosed if you use <code>-Wall</code> when you compile your code (you should add <code>-Wextra</code> as well). All examples can only hope to do as well. </p>\n\n<p>To complete the example, look at the working application of the comma operator in that situation. (the bonus -- if you caught it before compiling and running the example)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid foo(int param)\n{\n    printf(\"foo is called\\n\");\n    printf(\"%d\\n\",param);\n}\n\nint main()\n{\n    //return foo,(1);\n    return foo(0),1;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/commafoo\nfoo is called\n0\n\n$ echo $?\n1\n</code></pre>\n\n<p>So, yes, the comma operator does have its place, but it is rarely, if ever, required.</p>\n"}], "owner": {"reputation": 13712, "user_id": 1313233, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/hBeXC.png?s=128&g=1", "display_name": "rkachach", "link": "https://stackoverflow.com/users/1313233/rkachach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "closed_date": 1443631237, "accepted_answer_id": 32870294, "answer_count": 4, "score": 4, "last_activity_date": 1443630370, "creation_date": 1443626691, "last_edit_date": 1443629011, "question_id": 32869960, "link": "https://stackoverflow.com/questions/32869960/c-function-call-followed-by-a-comma-separator", "closed_reason": "Duplicate", "title": "C function call followed by a comma separator", "body": "<p>I was reading some material about errors that should be avoided when writing C programs and I came across the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid foo(int param)\n{\n  printf(\"foo is called\\n\");\n  printf(\"%d\\n\",param);\n}\n\nint main()\n{\n  return foo,(1);\n}\n</code></pre>\n\n<p>The code above build without errors and warnings (it only show a warning when -Wall is activated) but when I run the small program nothing is displayed. The function <strong>foo</strong> is not called because of the comma separator. </p>\n\n<p>My question is why the C standard allow such syntax? Shouldn't the compiler issue an error in this case? In which context this syntax could be used in some real use case?</p>\n\n<p>Thanks in advance,</p>\n\n<p>PD: I'm using GCC 4.8.3</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Couldn't the compiler in this case detect the situation and issue an error instead of warning (as I said it only appears when -Wall is enabled)</p>\n"}, {"tags": ["c", "floating-point", "hex"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1443625255, "post_id": 32869251, "comment_id": 53570676, "body": "What&#39;s the expected output?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1443625400, "post_id": 32869251, "comment_id": 53570781, "body": "That&#39;s curious; there are few systems where a floating point number is 5 bytes long.  What are you supposed to do?  Where&#39;s the decimal point? Transforming a single byte into a <code>float</code> is unlikely to produce a useful value.  The <code>malloc()</code> and <code>strcpy()</code> seem to be superfluous.  Perhaps you&#39;ve stripped a lot of code out and distilled it to this; the memory management lines are superfluous, but perhaps more explicable (an MCVE \u2014 <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable Example?</a>)."}], "answers": [{"comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 4, "creation_date": 1443625309, "post_id": 32869427, "comment_id": 53570721, "body": "<code>float_data = *((float*)floatdata_hex);</code> breaks the strict aliasing rule and therefore it is undefined behaviour."}, {"owner": {"reputation": 199, "user_id": 5061582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a976aa5af0022fe3a5f7443e5577ee?s=128&d=identicon&r=PG&f=1", "display_name": "learningpal", "link": "https://stackoverflow.com/users/5061582/learningpal"}, "edited": false, "score": 0, "creation_date": 1443627037, "post_id": 32869427, "comment_id": 53571853, "body": "Thanks much @MikeCAT: your code works. Sorry I misrepresented the question. But your code explains the concept."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 1, "last_activity_date": 1443625162, "creation_date": 1443625162, "answer_id": 32869427, "question_id": 32869251, "link": "https://stackoverflow.com/questions/32869251/convert-hex-to-float-in-c/32869427#32869427", "title": "Convert hex to float in C", "body": "<p><code>float_data = *((float*)&amp;hexvalue);</code> considers <code>&amp;hexvalue</code> as a pointer to <code>float</code> and then read the data from where <code>&amp;hexvalue</code> points as <code>float</code>.</p>\n\n<p>Thid code <strong>may</strong> work, depending on the environment.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\nint main()\n{\n    char *my_data;\n    double float_data;\n    unsigned int hexvalue[4];\n    unsigned char floatdata_hex[4];\n    int i;\n    my_data = malloc (100);\n    strcpy(my_data, \"39 39 2e 30 35\"); /* the assignment isn't needed */\n    /* the original code will read only one hex value, not four or five */\n    sscanf (my_data, \"%x%x%x%x\", &amp;hexvalue[0], &amp;hexvalue[1], &amp;hexvalue[2], &amp;hexvalue[3]); /* read to int */\n    for (i = 0; i &lt; 4; i++) floatdata_hex[i] = hexvalue[i]; /* and convert them to char later */\n    float_data = *((float*)floatdata_hex);\n    /* the value may be too small to display by %f */\n    printf (\"the floating n. is %.15g\", float_data);\n    free (my_data);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 199, "user_id": 5061582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a976aa5af0022fe3a5f7443e5577ee?s=128&d=identicon&r=PG&f=1", "display_name": "learningpal", "link": "https://stackoverflow.com/users/5061582/learningpal"}, "edited": false, "score": 0, "creation_date": 1443686685, "post_id": 32870538, "comment_id": 53595276, "body": "Can you please explain what does format specifier <code>%hhx</code> stands for?"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1443709672, "last_edit_date": 1443709672, "creation_date": 1443628342, "answer_id": 32870538, "question_id": 32869251, "link": "https://stackoverflow.com/questions/32869251/convert-hex-to-float-in-c/32870538#32870538", "title": "Convert hex to float in C", "body": "<p>Scan using <code>\"%hhx\"</code> into a character array, append the null character and then convert to <code>float</code> using <code>atof()</code>  or <code>strtod()</code>.</p>\n\n<pre><code>int main(void) {\n  unsigned char uc[5+1];\n  sscanf(\"39 39 2e 30 35\", \"%hhx%hhx%hhx%hhx%hhx\", &amp;uc[0], &amp;uc[1], &amp;uc[2], &amp;uc[3], &amp;uc[4]);\n  uc[5] = 0;\n  float f = atof(uc);\n  printf(\"%f\\n\", f);\n  return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>99.050003\n</code></pre>\n\n<p>[edit] Available since C99, With <code>scanf()</code>:</p>\n\n<blockquote>\n  <p><code>hh</code> Specifies that a following <code>d</code>, <code>i</code>, <code>o</code>, <code>u</code>, <code>x</code>, <code>X</code>, or <code>n</code> conversion specifier applies to an argument with type pointer to <code>signed char</code> or <code>unsigned char</code>.  C11dr \u00a77.21.6.2 11</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 1, "last_activity_date": 1443628573, "creation_date": 1443628573, "answer_id": 32870619, "question_id": 32869251, "link": "https://stackoverflow.com/questions/32869251/convert-hex-to-float-in-c/32870619#32870619", "title": "Convert hex to float in C", "body": "<p>This code will do the new conversion, supporting arbitrary length of input.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ndouble ascii_string_to_float(const char *str)\n{\n    double ret = 0.0;\n    char *work1;\n    char *work2;\n    char *tok, *out;\n    size_t len = strlen(str);\n    work1 = malloc(len + 1);\n    work2 = malloc(len + 1);\n    if (work1 == NULL || work2 == NULL)\n    {\n        if (work1 != NULL) free(work1);\n        if (work2 != NULL) free(work2);\n        exit(1);\n    }\n    strcpy(work1, str);\n    out = work2;\n    tok = strtok(work1, \" \");\n    do {\n        int tmp;\n        sscanf(tok, \"%x\", &amp;tmp);\n        *(out++) = tmp;\n    } while ((tok = strtok(NULL, \" \")) != NULL);\n    *out = '\\0';\n    sscanf(work2, \"%lf\", &amp;ret);\n    free(work1);\n    free(work2);\n    return ret;\n}\n\nint main(void)\n{\n    const char *my_data = \"39 39 2e 30 35\";\n    double float_data;\n    float_data = ascii_string_to_float(my_data);\n    printf(\"the floating n. is %f\", float_data);\n    return 0;\n}\n</code></pre>\n\n<p>Error checking isn't done, so please add them if needed.</p>\n"}], "owner": {"reputation": 199, "user_id": 5061582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a976aa5af0022fe3a5f7443e5577ee?s=128&d=identicon&r=PG&f=1", "display_name": "learningpal", "link": "https://stackoverflow.com/users/5061582/learningpal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4479, "favorite_count": 0, "accepted_answer_id": 32870538, "answer_count": 3, "score": 0, "last_activity_date": 1443709672, "creation_date": 1443624721, "last_edit_date": 1443626910, "question_id": 32869251, "link": "https://stackoverflow.com/questions/32869251/convert-hex-to-float-in-c", "title": "Convert hex to float in C", "body": "<p>I have a hexdecimal no. string and I want to convert it into float. Can anyone suggest any idea? I searched here in this forum and i got one post mentioning the following solution. I understood that first string is converted to hex number and then hex no is converted to float. But I didn't understand how this <code>float_data = *((float*)&amp;hexvalue);</code> is taking place. And the code also does not work with this method too.</p>\n\n<p><strong>Correction 1:</strong> I think i didn't mention clearly here. sorry for this. This hex value <code>39 39 2e 30 35</code> when converted to ascii, then it gives 99.05. And I need this ascii as float no.\nFollowing is my code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\nint main()\n{\n    char *my_data;\n    double float_data;\n    unsigned int hexvalue;\n    my_data = malloc (100);\n    my_data =strcpy(my_data, \"39 39 2e 30 35\");\n    sscanf (my_data, \"%x\", &amp;hexvalue);\n    float_data = *((float*)&amp;hexvalue);\n    printf (\"the floating n. is %f\", float_data);\n    free (my_data);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "coccinelle"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 2, "creation_date": 1443624820, "post_id": 32869215, "comment_id": 53570386, "body": "Renaming <code>i</code> to <code>ii</code> doesn&#39;t make the code any more readable, because the name is still useless. Rename the variable to a more descriptive name, not longer."}, {"owner": {"reputation": 166, "user_id": 731351, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ff7437b8556f211b9669ef8ca93e538?s=128&d=identicon&r=PG", "display_name": "darked89", "link": "https://stackoverflow.com/users/731351/darked89"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1443625977, "post_id": 32869215, "comment_id": 53571148, "body": "@ColonelThirtyTwo: Sure, but it is much easier to search in an code editor for ii than for i, no? So once I get more searchable code, I can track what it does/where ii is being changed. It is a step, not the solution."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 2, "creation_date": 1443627793, "post_id": 32869215, "comment_id": 53572383, "body": "I would think <code>ii</code> would be only be easier to search for than <code>i</code> because it&#39;s less likely to appear as part of a longer word... but usually there&#39;s a &quot;whole words only&quot; or similar option you can set when searching to avoid that issue, and double letters aren&#39;t more <i>readable</i> (if not using more descriptive names, I&#39;d actually prefer eg. <code>i</code> over <code>ii</code> since it&#39;s easier to type and I won&#39;t end up wondering if the second <code>i</code> means something)."}, {"owner": {"reputation": 166, "user_id": 731351, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ff7437b8556f211b9669ef8ca93e538?s=128&d=identicon&r=PG", "display_name": "darked89", "link": "https://stackoverflow.com/users/731351/darked89"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1443629424, "post_id": 32869215, "comment_id": 53573474, "body": "@Dmitri: Yes <code>ag -w i path</code> works nicely. But try it with letter <code>a</code>. Guys who wrote program I am looking at used it inside. Plus aa in few places. This is a reason why I wanted to go nuclear with all <code>i</code>,<code>j</code>, just in case. But maybe limiting myself to fixing <code>a</code> and <code>aa</code> will be good enough."}], "owner": {"reputation": 166, "user_id": 731351, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ff7437b8556f211b9669ef8ca93e538?s=128&d=identicon&r=PG", "display_name": "darked89", "link": "https://stackoverflow.com/users/731351/darked89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443624631, "creation_date": 1443624631, "question_id": 32869215, "link": "https://stackoverflow.com/questions/32869215/coccinelle-replace-single-letter-variables-i-ii", "title": "coccinelle: replace single letter variables (i -&gt; ii)", "body": "<p>I am trying to improve readability of ca 15k lines of C code. One idea is to replace single letter variable names first with two letter names (i -> ii etc.), so one has an easier task when looking at the code. Please note that single letter variables are also in .h files.</p>\n\n<p>I guess it is possible to just go use \"rename variable\" in one IDE or another (fixing just 3 most common ones: i, j, s; will make a difference), but if one can automate the task and do it smarter (i.e. checking that ii variable already exists somewhere, so renaming i->ii globally may be problematic). </p>\n\n<p>The brain dead solution:</p>\n\n<pre><code>@@ identifier id=~ \"^i$\"; @@\n- id\n+ ii\n\n@@ identifier id=~ \"^j$\"; @@\n- id\n+ jj\n</code></pre>\n\n<p>But even if I go through the whole alphabet, I will still have a problem with code already using a not so great mixture of i,ii,iii, etc.<br>\nHence my question: are there any semantic patches doing the variable identifier renaming with checking for name conflicts/resolving these (ie by renaming pre-existing ii name to ii_qscgy: just to have most likely unique variable name)? \nSure, I can double down on a silly code above by searching for ii,jj first, made them unique, then go for single i,j etc. but there must be a better way.</p>\n\n<p>Thank you for your help. </p>\n"}, {"tags": ["c", "linux", "assembly", "environment-variables", "stack-overflow"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 3, "creation_date": 1443624856, "post_id": 32869163, "comment_id": 53570410, "body": "There&#39;s a <code>0x20</code> somewhere around position 22 in the shellcode. That&#39;s an ASCII space."}, {"owner": {"reputation": 643, "user_id": 5364037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3e66a9a3e20d065da5a8bc3a1c172be0?s=128&d=identicon&r=PG&f=1", "display_name": "AKJ88", "link": "https://stackoverflow.com/users/5364037/akj88"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1443624932, "post_id": 32869163, "comment_id": 53570453, "body": "Okay, but what kind of problem it causes?"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 5, "creation_date": 1443625423, "post_id": 32869163, "comment_id": 53570791, "body": "Make sure you pass it in quotes as <code>&quot;$FOO&quot;</code> or whatever, since the shell will break it into multiple arguments at the space otherwise."}, {"owner": {"reputation": 643, "user_id": 5364037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3e66a9a3e20d065da5a8bc3a1c172be0?s=128&d=identicon&r=PG&f=1", "display_name": "AKJ88", "link": "https://stackoverflow.com/users/5364037/akj88"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1443625598, "post_id": 32869163, "comment_id": 53570921, "body": "@Jester Problem solved, Thank you."}], "owner": {"reputation": 643, "user_id": 5364037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3e66a9a3e20d065da5a8bc3a1c172be0?s=128&d=identicon&r=PG&f=1", "display_name": "AKJ88", "link": "https://stackoverflow.com/users/5364037/akj88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443624503, "creation_date": 1443624503, "question_id": 32869163, "link": "https://stackoverflow.com/questions/32869163/why-argv1-in-linux-c-program-doesnt-get-correct-values-from-environment-varia", "title": "Why argv[1] in Linux c program doesn&#39;t get correct values from environment variable?", "body": "<p>I'm trying to learn basics of buffer overflow attacks. I wrote a simple shellcode to just execute <code>ls -l</code> and then wrote a program to put this shellcode among some address changing (for now just <code>bbaa</code> address to test this) into an environment variable. This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar execvelsShell[] =  \"\\xeb\\x3d\\x5e\\x31\\xc0\\xb0\\x7d\\x89\\xf3\\xb9\\xff\\xff\\xff\\xff\\xc1\\xe1\\x0c\"\n                        \"\\x21\\xcb\\x31\\xc9\\xb1\\x20\\x31\\xd2\\xb2\\x07\\xcd\\x80\\x31\\xc0\\x88\\x46\\x07\"\n                        \"\\x88\\x46\\x0a\\x89\\x76\\x0b\\x89\\xf3\\x83\\xc3\\x08\\x89\\x5e\\x0f\\x89\\x46\\x13\"\n                        \"\\x89\\xf3\\x8d\\x4e\\x0b\\x8d\\x56\\x13\\xb0\\x0b\\xcd\\x80\\xe8\\xbe\\xff\\xff\\xff\"\n                        \"\\x2f\\x62\\x69\\x6e\\x2f\\x6c\\x73\\x30\\x2d\\x6c\\x30\\x31\\x31\\x31\\x31\\x32\\x32\"\n                        \"\\x32\\x32\\x33\\x33\\x33\\x33\\x33\";\nconst int buffSize = 4+100+4+4+4+4;//var_name + buffer + int i + ebp + ret_address + null\n\n#define NOP 0x90\nchar addr[] = \"\\x61\\x61\\x62\\x62\"; //bbaa for test\n\nint main(){\n    char buffer[buffSize];\n    int shellSize = strlen(execvelsShell);\n    printf(\"shelllen: %d\\n\", shellSize);\n\n    memset(buffer, NOP, buffSize);\n    memcpy(buffer, \"AKJ=\", 4);\n    memcpy(buffer+4, execvelsShell, shellSize);\n    memcpy(buffer+buffSize-8, addr, 4);\n    memcpy(buffer+buffSize-4, \"\\x00\\x00\\x00\\x00\", 4);\n\n    printf(\"Address: %s\\n\", buffer+buffSize-8);\n    printf(\"env len: %d\\n\", strlen(buffer));\n\n    putenv(buffer);\n    system(\"/bin/bash\");\n    return 0;\n}\n</code></pre>\n\n<p>When I print this variable and test it's size both in my code and in bash using <code>echo -n $AKJ | wc</code> I get the correct size but when I send this variable as input for my exploit test subject it prints the size of <code>argv[1]</code> as 22. This is my test program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[]){\n    char buffer[100];\n    int i=0xcceeaabb;\n    printf(\"len: %d\\n\", strlen(argv[1]));\n    strcpy(buffer, argv[1]);\n    return 0;\n}\n</code></pre>\n\n<p>The intresting part is that if I send other variables such as <code>$PATH</code> or even some random string <code>argv[1]</code> has correct value and size. Also when I used <code>gdb</code> I could see that <code>argv[1]</code> has everything I want it to have but in c code it's size is not correct, ergo, it doesn't work.</p>\n\n<p>I've worked several hours on this simple program and used everything I could think of from giving different values and variables to debugging the code using <code>gdb</code> and tracing what happens on stack and registers but couldn't get it to work. I'd appreciate it if someone could shed some light on the problem. I'm pretty sure I'm missing something really simple!!!</p>\n\n<p>BTW I'm working on Ubuntu 14.4 with gcc 4.8.2 and the code I wrote for shellcode can be found <a href=\"http://pastebin.ca/3179005\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": ["c", "conditional-compilation", "ifndef"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1443623523, "post_id": 32868712, "comment_id": 53569464, "body": "What do you expect when writing dodgy code? Good coding style prevents this as defines are always in capitals"}], "answers": [{"tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": true, "score": 7, "last_activity_date": 1443623617, "creation_date": 1443623617, "answer_id": 32868833, "question_id": 32868712, "link": "https://stackoverflow.com/questions/32868712/can-ifndef-ignore-method-or-variable-duplications/32868833#32868833", "title": "Can #ifndef ignore method or variable duplications?", "body": "<p>About case 2:<br/>\nyou should only declare the function signature, not the body. it has nothing to do with the pre-processor commands.</p>\n\n<p>in the header file (decleration only)</p>\n\n<pre><code>#if &lt;Condition&gt;\nvoid foo();\n#endif\n</code></pre>\n\n<p>in the C file </p>\n\n<pre><code>#if &lt;Condition&gt;\nvoid foo(){\n   //body\n}\n\n#endif\n</code></pre>\n\n<p>about case 3:<br/>\nit's similar to case 2, with the addition that you should declare variables in the header file if they are <em>extern</em> , there is no need to declare them in a header file otherwise. if they <em>are</em> declared as extern, they also need to be declared in a C file without the extern keyword:</p>\n\n<p>in the header file:</p>\n\n<pre><code>#if &lt;Condition&gt;\nextern int bar;\n#endif\n</code></pre>\n\n<p>in the C file:</p>\n\n<pre><code>#if &lt;Condition&gt;\nint bar;\n#endif\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 5243022, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a550a6837001110c10852907a0d98b67?s=128&d=identicon&r=PG&f=1", "display_name": "sandy", "link": "https://stackoverflow.com/users/5243022/sandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 32868833, "answer_count": 1, "score": 2, "last_activity_date": 1443623809, "creation_date": 1443623262, "last_edit_date": 1443623809, "question_id": 32868712, "link": "https://stackoverflow.com/questions/32868712/can-ifndef-ignore-method-or-variable-duplications", "title": "Can #ifndef ignore method or variable duplications?", "body": "<p>Consider the code.</p>\n\n<pre><code>#ifndef FOO_H\n#define FOO_H\n//Code\n#endif\n</code></pre>\n\n<p>Code can be following cases</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>// Case 1: \n#define foo 0\n</code></pre>\n\n<pre class=\"lang-c prettyprint-override\"><code>// Case 2:\nvoid foo_method(){};\n</code></pre>\n\n<pre class=\"lang-c prettyprint-override\"><code>// Case 3:\nint foo;\n</code></pre>\n\n<p><code>foo.h</code> is included in many C files. When I compile only the case 1 is without errors, other cases throw errors of duplication.</p>\n\n<p>Why is so when the <code>foo.h</code> is not concatenated to C files except the one while compiling?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1443622533, "post_id": 32868136, "comment_id": 53568769, "body": "Is your calling of <code>fun1</code> in all four cases a typo?"}, {"owner": {"reputation": 1448, "user_id": 1679647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z0sB3.jpg?s=128&g=1", "display_name": "Gerhard Stein", "link": "https://stackoverflow.com/users/1679647/gerhard-stein"}, "edited": false, "score": 0, "creation_date": 1443622709, "post_id": 32868136, "comment_id": 53568883, "body": "This is not going to work because proc1 is set to false and stays that way so far I can see in your code."}, {"owner": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1443622795, "post_id": 32868136, "comment_id": 53568936, "body": "@molbdnilo No, each function has its own name. e.g: <code>function1</code>, ..., <code>function4</code> and each of them is called properly in my <code>main()</code>. I know the flags may be an issue but I&#39;ve only been able to get so far using them"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5393542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80793787f88e868ec0d3a2fd9c8b4e04?s=128&d=identicon&r=PG&f=1", "display_name": "Tal Cohen", "link": "https://stackoverflow.com/users/5393542/tal-cohen"}, "is_accepted": false, "score": 1, "last_activity_date": 1443623399, "creation_date": 1443623399, "answer_id": 32868746, "question_id": 32868136, "link": "https://stackoverflow.com/questions/32868136/unsuccesfull-management-of-specific-processes-in-my-c-console-application/32868746#32868746", "title": "Unsuccesfull management of specific processes in my C++ console application", "body": "<p>I believe you run the .bat file as sync program, therefore until the bat won't finish and return exit code (which you may check as return value of system function) your main program won't continue to run. You may use async process using fork on linux based systems and CreateProcess on windows OS.</p>\n"}, {"comments": [{"owner": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "edited": false, "score": 0, "creation_date": 1443624220, "post_id": 32868823, "comment_id": 53569954, "body": "I modified the <code>fun1</code> function so that it will make more sense to you now. Some misunderstands that you have: every function has different names ( I used fun1,2..just as a model) . Each function creates the same structure of <code>.bat</code> but the process each <code>.bat</code> handles is different."}, {"owner": {"reputation": 1448, "user_id": 1679647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z0sB3.jpg?s=128&g=1", "display_name": "Gerhard Stein", "link": "https://stackoverflow.com/users/1679647/gerhard-stein"}, "reply_to_user": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "edited": false, "score": 0, "creation_date": 1443710127, "post_id": 32868823, "comment_id": 53610153, "body": "But in the batch file you are referring as <code>process.exe</code> what you are trying to kill. So if you ask for <code>process1.exe</code>. It won&#39;t be found. Try to create that batch file with the right process name. Also why do you rewrite the batch file every time you execute your app? What are you trying to do anyways with your programm? I think we need some explanation. It somehow seems that there is a better more elegant way to what you are trying to accomplish."}], "tags": [], "owner": {"reputation": 1448, "user_id": 1679647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z0sB3.jpg?s=128&g=1", "display_name": "Gerhard Stein", "link": "https://stackoverflow.com/users/1679647/gerhard-stein"}, "is_accepted": false, "score": 0, "last_activity_date": 1443623570, "creation_date": 1443623570, "answer_id": 32868823, "question_id": 32868136, "link": "https://stackoverflow.com/questions/32868136/unsuccesfull-management-of-specific-processes-in-my-c-console-application/32868823#32868823", "title": "Unsuccesfull management of specific processes in my C++ console application", "body": "<p>How about this? (C++11 Standard)</p>\n\n<pre><code>    bool proc[] = {false, false, false, false};\n\n    while(true) \n    {\n      for(int i=0 ; i&lt;4 ; i++)\n      {\n        const std::string exeName = \"process\" + std::to_string(i) +  \".exe\";            \n        const std::string funName = \"fun\" + std::to_string(i) +  \".bat\";            \n\n        if(!proc[i] &amp;&amp; ProcessRunning(exeName.c_str()))\n        {\n           fun1(funName.c_str());\n           proc[i]  = true;\n        }\n    }\n</code></pre>\n\n<p>Should make things a bit more flexible, but getting to your problem. If-condition compares the first expression <code>proc</code> and then <code>ProcessRunning(...)</code>. Both must be true in order to enter the control block.</p>\n\n<p>But your file explaining <code>fun1()</code> seems to have an issue at least in comments. You mention for example to <code>//taskkill  process.exe</code> but it has to be <code>process#</code>.</p>\n\n<p>I can help you more on that if you provide the full <code>fun1</code> implementation or at least the most relevant parts. Your cycle though should work. The problem has to be in <code>fun1(...)</code></p>\n\n<p>P.D.: I also would rename <code>fun1(...)</code> to something that makes more sense.</p>\n"}], "owner": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1443624031, "creation_date": 1443621736, "last_edit_date": 1495540241, "question_id": 32868136, "link": "https://stackoverflow.com/questions/32868136/unsuccesfull-management-of-specific-processes-in-my-c-console-application", "title": "Unsuccesfull management of specific processes in my C++ console application", "body": "<p>In this <a href=\"https://stackoverflow.com/questions/32866306\">thread</a> I solved a part of my cases and thanks to NathanOliver I've got to the following code so far:</p>\n\n<pre><code>int main(){\n    //...\n    bool proc1 = false, proc2 = false, proc3 = false, proc4 = false,\n    while(true) {\n        if(!proc1 &amp;&amp; ProcessRunning(\"process1.exe\")){\n            fun1(\"fun1.bat\");\n            proc1  = true;\n        }\n        if(!proc2 &amp;&amp; ProcessRunning(\"process2.exe\")){\n            fun1(\"fun2.bat\");\n            proc2  = true;\n        }\n        if(!proc3 &amp;&amp; ProcessRunning(\"process3.exe\")){\n            fun1(\"fun3.bat\");\n            proc3  = true;\n        }\n        if(!proc4 &amp;&amp; ProcessRunning(\"process4.exe\")){\n            fun1(\"fun4.bat\");\n            proc4  = true;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>What I still can't get through is the case where:</p>\n\n<ul>\n<li>double click on app1 -> <code>process1</code> starts.</li>\n<li>while <code>process1</code> is running I double click on app2 so that <code>process2</code> should have the same behaviour as I mentioned in my first thread:</li>\n</ul>\n\n<blockquote>\n  <p>if it finds <code>process2</code> (the second <code>if(){}</code>), it creates that .bat file and\n  it executes it (kill <code>process2</code>(it might existed before i opened it), start > it again, delete the <code>.bat</code> file generated by <code>fun2(const char name[]){}</code>).</p>\n</blockquote>\n\n<hr>\n\n<p><em>Summary of previous post:</em></p>\n\n<pre><code>int fun1(const char name[]){\n    ofstream file;\n    file.open(name, ios::out);\n    //start of what I write in .bat\n    file &lt;&lt; \"@echo off\";    \n    file &lt;&lt; \"cd to specific path\";\n    file &lt;&lt; \"taskkill  /im process.exe* /f\";\n    file &lt;&lt; \"start process.exe\";\n    file &lt;&lt; \"del \\\"%~f0\\\"\";\n\n    file.close();\n    return system(name);\n}\n</code></pre>\n\n<p>Exactly the same for the rest functions.</p>\n"}, {"tags": ["c", "opengl", "glut", "bezier"], "comments": [{"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1443621880, "post_id": 32868121, "comment_id": 53568320, "body": "start from providing a more comprehensive description of your problem. Do you have a pseudocode? if not how was the algorithm presented to you?"}, {"owner": {"reputation": 4735, "user_id": 1576208, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/3e2ME.jpg?s=128&g=1", "display_name": "SagittariusA", "link": "https://stackoverflow.com/users/1576208/sagittariusa"}, "reply_to_user": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1443622196, "post_id": 32868121, "comment_id": 53568552, "body": "I have a code but I&#39;m afraid it&#39;s useless because up to now it draws bezier curve with the default method or with decasteljau algorithm... the adaptive algorithm was presented to me in a very general way. The teacher showed us a slide with 4 control points making a sort of trapeze inside which there is the curve. Then the two &quot;heights&quot; are calculated and if they don&#39;t satisfy the tolerance the middle point of each side of the trapeze is splitted into two halves and the process starts again for both the &quot;trapezes&quot; thus formed..."}, {"owner": {"reputation": 4974, "user_id": 2587816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0ec5b10cbc8a9a5b707ea67ea60f84d?s=128&d=identicon&r=PG", "display_name": "Jiminion", "link": "https://stackoverflow.com/users/2587816/jiminion"}, "edited": false, "score": 0, "creation_date": 1443622674, "post_id": 32868121, "comment_id": 53568864, "body": "Is one of the coordinates (z?) of the points always 0?  Is this a 2-d or 3-d curve?"}, {"owner": {"reputation": 4735, "user_id": 1576208, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/3e2ME.jpg?s=128&g=1", "display_name": "SagittariusA", "link": "https://stackoverflow.com/users/1576208/sagittariusa"}, "edited": false, "score": 0, "creation_date": 1443622804, "post_id": 32868121, "comment_id": 53568944, "body": "yes, z coordinates are always 0 and it&#39;s a 2d curve!"}, {"owner": {"reputation": 4735, "user_id": 1576208, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/3e2ME.jpg?s=128&g=1", "display_name": "SagittariusA", "link": "https://stackoverflow.com/users/1576208/sagittariusa"}, "reply_to_user": {"reputation": 4974, "user_id": 2587816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0ec5b10cbc8a9a5b707ea67ea60f84d?s=128&d=identicon&r=PG", "display_name": "Jiminion", "link": "https://stackoverflow.com/users/2587816/jiminion"}, "edited": false, "score": 0, "creation_date": 1443628932, "post_id": 32868121, "comment_id": 53573178, "body": "@Jiminion : I&#39;ve just added a sort of code I have seen in the web"}, {"owner": {"reputation": 4735, "user_id": 1576208, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/3e2ME.jpg?s=128&g=1", "display_name": "SagittariusA", "link": "https://stackoverflow.com/users/1576208/sagittariusa"}, "reply_to_user": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1443628948, "post_id": 32868121, "comment_id": 53573192, "body": "@UmNyobe : I&#39;ve just added a sort of code I have seen in the web"}], "answers": [{"tags": [], "owner": {"reputation": 544, "user_id": 5061163, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EigrD.jpg?s=128&g=1", "display_name": "Fabrice NEYRET", "link": "https://stackoverflow.com/users/5061163/fabrice-neyret"}, "is_accepted": false, "score": 1, "last_activity_date": 1444153029, "creation_date": 1444153029, "answer_id": 32976144, "question_id": 32868121, "link": "https://stackoverflow.com/questions/32868121/how-to-implement-adaptive-subdivision-algorithm-for-curve-in-c/32976144#32976144", "title": "How to implement adaptive subdivision algorithm for curve in C", "body": "<p>the Begin / End should engulf your whole loop, not being inside for each isolated vertex !</p>\n"}], "owner": {"reputation": 4735, "user_id": 1576208, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/3e2ME.jpg?s=128&g=1", "display_name": "SagittariusA", "link": "https://stackoverflow.com/users/1576208/sagittariusa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 873, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1444153029, "creation_date": 1443621705, "last_edit_date": 1443628901, "question_id": 32868121, "link": "https://stackoverflow.com/questions/32868121/how-to-implement-adaptive-subdivision-algorithm-for-curve-in-c", "title": "How to implement adaptive subdivision algorithm for curve in C", "body": "<p>My homework is to write a C program with openGL/Glut which, after getting groups of 4 points by mouse click (points with 3 coordinates), should draw a bezier curve with adaptive algorithm. At a theoretical level it's clear how the algorithm works but I don't know how to put that in C code. I mean that at lesson we saw that the 4 control points could have a shape similar to a \"trapeze\" and then the algorithm calculates the two \"heights\" and then checks if they satisfy a tollerance. The problem is that the user might click everywhere in the screen and the points might not have trapeze-like shape...so, where can I start from? This is all I have</p>\n\n<p><a href=\"https://i.stack.imgur.com/p4duQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p4duQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is the cole I have written, which is called each time a control point is added:</p>\n\n<pre><code>if (bezierMode == CASTELJAU_ADAPTIVE) {\n    glColor3f (0.0f, 0.8f, 0.4f); /* draw adaptive casteljau curve in green */\n    for(i=0; i+3&lt;numCV; i += 3)\n        adaptiveDeCasteljau3(CV, i, 0.01);\n}\n\n\nvoid adaptiveDeCasteljau3(float CV[MAX_CV][3], int position, float tolerance)  {\n\n  float x01 = (CV[position][0] + CV[position+1][0]) / 2;\n  float y01 = (CV[position][1] + CV[position+1][1]) / 2;\n\n  float x12 = (CV[position+1][0] + CV[position+2][0]) / 2;\n  float y12 = (CV[position+1][1] + CV[position+2][1]) / 2;\n\n  float x23 = (CV[position+2][0] + CV[position+3][0]) / 2;\n  float y23 = (CV[position+2][1] + CV[position+3][1]) / 2;\n\n  float x012 = (x01 + x12) / 2;\n  float y012 = (y01 + y12) / 2;\n\n  float x123 = (x12 + x23) / 2;\n  float y123 = (y12 + y23) / 2;\n\n  float x0123 = (x012 + x123) / 2;\n  float y0123 = (y012 + y123) / 2;\n\n  float dx = CV[3][0] - CV[0][0];\n  float dy = CV[3][1] - CV[0][1];\n\n  float d2 = fabs(((CV[1][0] - CV[3][0]) * dy - (CV[1][1] - CV[3][1]) * dx));\n  float d3 = fabs(((CV[2][0] - CV[3][0]) * dy - (CV[2][1] - CV[3][1]) * dx));\n\n  if((d2 + d3)*(d2 + d3) &lt; tolerance * (dx*dx + dy*dy)) {\n\n      glBegin(GL_LINE_STRIP);\n          glVertex2f(x0123, y0123);\n      glEnd();\n\n      return;\n  }\n\n  float tmpLEFT[4][3];\n  float tmpRIGHT[4][3];\n\n  tmpLEFT[0][0] = CV[0][0];\n  tmpLEFT[0][1] = CV[0][1];\n  tmpLEFT[1][0] = x01;\n  tmpLEFT[1][1] = y01;\n  tmpLEFT[2][0] = x012;\n  tmpLEFT[2][1] = y012;\n  tmpLEFT[3][0] = x0123;\n  tmpLEFT[3][1] = y0123;\n\n  tmpRIGHT[0][0] = x0123;\n  tmpRIGHT[0][1] = y0123;\n  tmpRIGHT[1][0] = x123;\n  tmpRIGHT[1][1] = y123;\n  tmpRIGHT[2][0] = x23;\n  tmpRIGHT[2][1] = y23;\n  tmpRIGHT[3][0] = CV[3][0];\n  tmpRIGHT[3][1] = CV[3][1];\n\n  adaptiveDeCasteljau3(tmpLEFT, 0, tolerance);\n  adaptiveDeCasteljau3(tmpRIGHT, 0, tolerance);\n\n\n}\n</code></pre>\n\n<p>and obviously nothing is drawn. Do you have any idea?</p>\n"}, {"tags": ["c", "pointers", "initialization"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 2, "creation_date": 1443621607, "post_id": 32868063, "comment_id": 53568124, "body": "It should be undefined behavior."}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 2, "creation_date": 1443621842, "post_id": 32868063, "comment_id": 53568286, "body": "It&#39;s undefined behavior; anything can happen. &quot;Working&quot; is anything. Though it is not guaranteed that it will work."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1443624816, "post_id": 32868063, "comment_id": 53570383, "body": "Or rather &quot;it seems to be working for now, even though it has latent bugs&quot; is one of the results of undefined behavior. Go alter some completely unrelated file in the project and then this bug might decide to crash the program."}, {"owner": {"reputation": 11, "user_id": 5393326, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1DvQkkzTreM/AAAAAAAAAAI/AAAAAAAAAM4/Ql0ggVVzxWs/photo.jpg?sz=128", "display_name": "teirm", "link": "https://stackoverflow.com/users/5393326/teirm"}, "edited": false, "score": 0, "creation_date": 1444004812, "post_id": 32868063, "comment_id": 53704973, "body": "Prior to this post, I was not familiar with undefined behavior in C.  I found the following two links very helpful, and I hope they help those who find this question.   [ What Every C Programmer Should Know About Undefined Behavior #1/3](<a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">blog.llvm.org/2011/05/what-every-c-programmer-should-k&zwnj;&#8203;now.html</a>)  <a href=\"http://blog.regehr.org/archives/213\" rel=\"nofollow noreferrer\">A Guide to Undefined Behavior in C and C++, Part 1</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5393326, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1DvQkkzTreM/AAAAAAAAAAI/AAAAAAAAAM4/Ql0ggVVzxWs/photo.jpg?sz=128", "display_name": "teirm", "link": "https://stackoverflow.com/users/5393326/teirm"}, "edited": false, "score": 0, "creation_date": 1443621941, "post_id": 32868153, "comment_id": 53568363, "body": "I know.  However gdb informs me that SIGSEV is received at the line *d = 6.  This occurs even if I don&#39;t try to print p and f.  My question is more about why the second case works."}, {"owner": {"reputation": 10212, "user_id": 970543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wq9T6.jpg?s=128&g=1", "display_name": "Nik Bougalis", "link": "https://stackoverflow.com/users/970543/nik-bougalis"}, "edited": false, "score": 2, "creation_date": 1443621950, "post_id": 32868153, "comment_id": 53568371, "body": "In both programs, he dereferences an uninitialized pointer (<code>d</code> when he does <code>*d = 6</code>) which invokes undefined behavior."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 10212, "user_id": 970543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wq9T6.jpg?s=128&g=1", "display_name": "Nik Bougalis", "link": "https://stackoverflow.com/users/970543/nik-bougalis"}, "edited": false, "score": 0, "creation_date": 1443622468, "post_id": 32868153, "comment_id": 53568733, "body": "@NikBougalis  Yes , that was reason for seg fault . I modified my answer ."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 1, "last_activity_date": 1443622126, "last_edit_date": 1443622126, "creation_date": 1443621763, "answer_id": 32868153, "question_id": 32868063, "link": "https://stackoverflow.com/questions/32868063/variable-initialization-and-pointer-segfault/32868153#32868153", "title": "Variable initialization and pointer segfault", "body": "<p>In your program -</p>\n\n<pre><code> *d = 6;                          // writing to an invalid memory location\n</code></pre>\n\n<p>You leave the pointer with uninitialized value. So when you dereference it (*d), you access unauthorized location in memory, resulting in a segmentation fault.</p>\n\n<p>you also try to print uninitialized local variables-</p>\n\n<pre><code> printf(\"%d %d %d\\n\", *d, f, p);   // where f and p are indeterminate \n</code></pre>\n\n<p>Therefore , your code invokes <strong><em>undefined behaviour</em></strong> and your program give output which literally can be anything. </p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1443621959, "creation_date": 1443621959, "answer_id": 32868222, "question_id": 32868063, "link": "https://stackoverflow.com/questions/32868063/variable-initialization-and-pointer-segfault/32868222#32868222", "title": "Variable initialization and pointer segfault", "body": "<p>Your first problem is in <code>*d = 6;</code> as you're trying to to dereference an invalid pointer.</p>\n\n<p><code>d</code> is not initialized (allocated memory) and it points to an invalid memory location. Any attempt to dereference that will lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>FWIW, the second code also produces UB for the same reason.</p>\n\n<p>Additionally, in the first code snippet, by writing</p>\n\n<pre><code>printf(\"%d %d %d\\n\", *d, f, p);\n</code></pre>\n\n<p>where <code>f</code> and <code>p</code> are uninitialized automatic local variable, you're trying to read indeterminate values, which again, produces UB. This is avoided in the second snippet by explicit initialization.</p>\n"}, {"comments": [{"owner": {"reputation": 10212, "user_id": 970543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wq9T6.jpg?s=128&g=1", "display_name": "Nik Bougalis", "link": "https://stackoverflow.com/users/970543/nik-bougalis"}, "edited": false, "score": 3, "creation_date": 1443622053, "post_id": 32868225, "comment_id": 53568449, "body": "In C you should <a href=\"http://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc\">not cast the result of <code>malloc</code></a>."}, {"owner": {"reputation": 2345, "user_id": 4511585, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IC7eZ.jpg?s=128&g=1", "display_name": "albttx", "link": "https://stackoverflow.com/users/4511585/albttx"}, "edited": false, "score": 0, "creation_date": 1443624865, "post_id": 32868225, "comment_id": 53570416, "body": "I don&#39;t put the stdio.h because he always put it... but ok, if you prefer i update it"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 10212, "user_id": 970543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wq9T6.jpg?s=128&g=1", "display_name": "Nik Bougalis", "link": "https://stackoverflow.com/users/970543/nik-bougalis"}, "edited": false, "score": 0, "creation_date": 1443625064, "post_id": 32868225, "comment_id": 53570546, "body": "Good. The cast isn&#39;t required as @NikBougalis suggests."}], "tags": [], "owner": {"reputation": 2345, "user_id": 4511585, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IC7eZ.jpg?s=128&g=1", "display_name": "albttx", "link": "https://stackoverflow.com/users/4511585/albttx"}, "is_accepted": false, "score": 1, "last_activity_date": 1443626241, "last_edit_date": 1443626241, "creation_date": 1443621960, "answer_id": 32868225, "question_id": 32868063, "link": "https://stackoverflow.com/questions/32868063/variable-initialization-and-pointer-segfault/32868225#32868225", "title": "Variable initialization and pointer segfault", "body": "<p>You need to Allocate your memory with malloc()</p>\n\n<p>this work:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n    int *d;\n    int f = 10;\n    int p = 9;\n\n    d = /*(int *)*/malloc(sizeof(int) * 1);\n    if (!d)\n        exit(-1);\n    *d = 6;\n\n    printf(\"%d %d %d\\n\", *d, f, p);\n    free(d);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1443622464, "creation_date": 1443622464, "answer_id": 32868416, "question_id": 32868063, "link": "https://stackoverflow.com/questions/32868063/variable-initialization-and-pointer-segfault/32868416#32868416", "title": "Variable initialization and pointer segfault", "body": "<blockquote>\n  <p>This code segfaults at the line (seen in gdb):</p>\n\n<pre><code>*d = 6;\n</code></pre>\n  \n  <p>Which makes sense because I am trying to give random address to a\n  value.</p>\n</blockquote>\n\n<p>It does make sense that that segfaults, but your explanation is grossly incorrect.  You are not in any way giving / or assigning an address to a value.  Rather, you are attempting to store a value at an unspecified address.</p>\n\n<p>It is critically important to understand the difference between <code>d</code> and <code>*d</code>.  The former (as you have declared it) is a pointer that is expected to hold the address of an <code>int</code>.  The latter is the <code>int</code> that <code>d</code> points to.  If <code>d</code> has not, in fact, been initialized to point to an <code>int</code>, then evaluating the expression <code>*d</code> produces undefined behavior.</p>\n\n<p>Undefined behavior is exactly that -- undefined.  You cannot expect a similar source of undefined behavior to produce the same actual behavior in other circumstances, and you cannot even rely on the behavior to manifest an obvious indication of brokenness.  Anything can happen, including, in principle, what the programmer wanted to happen.</p>\n\n<p>Declaring a pointer variable <em>does not</em> automatically cause any storage to be allocated.  There are any number of ways you could initialize <code>d</code>, but one would be</p>\n\n<pre><code>d = &amp;f;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5393326, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1DvQkkzTreM/AAAAAAAAAAI/AAAAAAAAAM4/Ql0ggVVzxWs/photo.jpg?sz=128", "display_name": "teirm", "link": "https://stackoverflow.com/users/5393326/teirm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 32868222, "answer_count": 4, "score": -2, "last_activity_date": 1443626241, "creation_date": 1443621563, "last_edit_date": 1443622953, "question_id": 32868063, "link": "https://stackoverflow.com/questions/32868063/variable-initialization-and-pointer-segfault", "title": "Variable initialization and pointer segfault", "body": "<p>I was thinking about pointer initialization and tried the following two cases:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n    int *d;\n    int f;\n    int p;\n\n    *d = 6;\n\n    printf(\"%d %d %d\\n\", *d, f, p);\n\n    return 0;\n}\n</code></pre>\n\n<p>This code segfaults at the line (seen in gdb):</p>\n\n<pre><code>*d = 6;\n</code></pre>\n\n<p>Which makes sense because I am trying store a value at a random address.</p>\n\n<p>I then tried the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n    int *d;\n    int f = 10;\n    int p = 9;\n\n    *d = 6;\n\n    printf(\"%d %d %d\\n\", *d, f, p);\n\n    return 0;\n}\n</code></pre>\n\n<p>This runs to completion with the output: </p>\n\n<blockquote>\n  <p>6 10 9</p>\n</blockquote>\n\n<p>If only <code>f</code> is initialized to 10 (<code>p</code> is not initialized) or vice versa, the program still completes with output </p>\n\n<blockquote>\n  <p>6 10 0 </p>\n</blockquote>\n\n<p>or </p>\n\n<blockquote>\n  <p>6 0 9 </p>\n</blockquote>\n\n<p>(<code>p</code> initialized).  I do not understand why this works.  My initial guess is that the initialization of either <code>f</code> or <code>p</code> makes space or orients memory to allow for the safe initialization of <code>d</code>.  I also thought about stack allocations, but am still unsure.</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1443621293, "post_id": 32867909, "comment_id": 53567899, "body": "First, you&#39;re using <code>result-&gt;ai_addr</code> after you call <code>freeaddrinfo( result );</code>."}, {"owner": {"reputation": 2327, "user_id": 2280212, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/IUER1.jpg?s=128&g=1", "display_name": "Federico Ponzi", "link": "https://stackoverflow.com/users/2280212/federico-ponzi"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1443621420, "post_id": 32867909, "comment_id": 53568012, "body": "Thanks @AndrewHenle! Fixed that"}], "answers": [{"tags": [], "owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "is_accepted": true, "score": 0, "last_activity_date": 1443634478, "last_edit_date": 1443634478, "creation_date": 1443628847, "answer_id": 32870710, "question_id": 32867909, "link": "https://stackoverflow.com/questions/32867909/c-on-windows-bind-to-a-free-random-port-and-get-the-port-number/32870710#32870710", "title": "C on Windows: Bind to a free random port and get the port number", "body": "<p>Windows works the same as Linux here. </p>\n\n<ul>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms737550(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms737550(v=vs.85).aspx</a></li>\n</ul>\n\n<p>Doesn't your Linux code just work on windows? Really it should be possible to write code which works on both, apart from a couple of corner cases and initializing winsock (<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms742213(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms742213(v=vs.85).aspx</a>).</p>\n"}], "owner": {"reputation": 2327, "user_id": 2280212, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/IUER1.jpg?s=128&g=1", "display_name": "Federico Ponzi", "link": "https://stackoverflow.com/users/2280212/federico-ponzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 32870710, "answer_count": 1, "score": 1, "last_activity_date": 1443634478, "creation_date": 1443621130, "last_edit_date": 1443621402, "question_id": 32867909, "link": "https://stackoverflow.com/questions/32867909/c-on-windows-bind-to-a-free-random-port-and-get-the-port-number", "title": "C on Windows: Bind to a free random port and get the port number", "body": "<p>On linux i would do:</p>\n\n<pre><code>serv_addr.sin_family = AF_INET;\nserv_addr.sin_addr.s_addr = INADDR_ANY;\nserv_addr.sin_port = htons(0);\n\nif (bind(sockfd, (struct sockaddr *) &amp;serv_addr, sizeof(serv_addr)) &lt; 0)\n{\n    perror(\"ERROR on binding\");\n    *err = -2;\n}\nstruct sockaddr_in sin;\nsocklen_t len = sizeof(sin);\n\nif (getsockname(sockfd, (struct sockaddr *)&amp;sin, &amp;len) == -1)\n{\n    *err = -2;\n    perror(\"getsockname\");\n}\n</code></pre>\n\n<p>In Windows i have:</p>\n\n<pre><code>hints.ai_family = AF_INET;\nhints.ai_socktype = SOCK_STREAM;\nhints.ai_protocol = IPPROTO_TCP;\nhints.ai_flags = AI_PASSIVE;\n//using 0 instead of DEFAULT_PORT gives me host not found.\niResult = getaddrinfo(NULL, DEFAULT_PORT, &amp;hints, &amp;result); \nListenSocket = socket(result-&gt;ai_family, result-&gt;ai_socktype, result-&gt;ai_protocol);\n\nsocklen_t len = sizeof(result-&gt;ai_addr);\nprintf(\"Port number: %d\", getsockname(ListenSocket, result-&gt;ai_addr, &amp;len));\n\niResult = bind( ListenSocket, result-&gt;ai_addr, (int)result-&gt;ai_addrlen);\n\nfreeaddrinfo(result);\niResult = listen(ListenSocket, 4);\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "fopen"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1443620196, "post_id": 32867530, "comment_id": 53567069, "body": "Enable compiler warnings and read them carefully."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 5, "last_activity_date": 1443620823, "last_edit_date": 1443620823, "creation_date": 1443620138, "answer_id": 32867552, "question_id": 32867530, "link": "https://stackoverflow.com/questions/32867530/fopen-doesnt-work-program-crashes/32867552#32867552", "title": "fopen doesn&#39;t work, program crashes", "body": "<p>You need to change</p>\n\n<pre><code>printf(\"%s\", &amp;file);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>f = fopen(&amp;file, \"r\");\n</code></pre>\n\n<p>to</p>\n\n<pre><code>printf(\"%s\", file);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>f = fopen(file, \"r\");\n</code></pre>\n\n<p>Please follow the man pages for <a href=\"http://linux.die.net/man/3/fopen\" rel=\"nofollow\"><code>fopen()</code></a> and <a href=\"http://linux.die.net/man/3/fopen\" rel=\"nofollow\"><code>printf()</code></a> and enable compiler warnings.</p>\n"}, {"comments": [{"owner": {"reputation": 830, "user_id": 449387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f885a79a611bf777a84c247b6a1b1149?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/449387/dave"}, "edited": false, "score": 0, "creation_date": 1443625075, "post_id": 32867684, "comment_id": 53570555, "body": "if you&#39;re compiling on linux, add -Wall to gcc args, once you are able to compile without warnings and have a program that executes without core&#39;ing, use errno and strerror() for error reporting."}, {"owner": {"reputation": 3092, "user_id": 904475, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/59ae32c825f1d6465d83f4d00786a0e2?s=128&d=identicon&r=PG", "display_name": "Chad Schouggins", "link": "https://stackoverflow.com/users/904475/chad-schouggins"}, "edited": false, "score": 0, "creation_date": 1489793361, "post_id": 32867684, "comment_id": 72843297, "body": "Useless answer, essentially translates to &quot;It doesn&#39;t work because your code is wrong, once the code is correct it should work&quot;"}], "tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 0, "last_activity_date": 1443620538, "creation_date": 1443620538, "answer_id": 32867684, "question_id": 32867530, "link": "https://stackoverflow.com/questions/32867530/fopen-doesnt-work-program-crashes/32867684#32867684", "title": "fopen doesn&#39;t work, program crashes", "body": "<p>Your \"&amp;\" are all misplaced. If you change it, that should work, roughly.</p>\n\n<p>In future pay more attention to compiler warnings, please.</p>\n"}, {"tags": [], "owner": {"reputation": 619, "user_id": 1666733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d588c62cff899e45a7d9fe926b1a0c63?s=128&d=identicon&r=PG", "display_name": "arduic", "link": "https://stackoverflow.com/users/1666733/arduic"}, "is_accepted": false, "score": 0, "last_activity_date": 1443624045, "creation_date": 1443624045, "answer_id": 32869004, "question_id": 32867530, "link": "https://stackoverflow.com/questions/32867530/fopen-doesnt-work-program-crashes/32869004#32869004", "title": "fopen doesn&#39;t work, program crashes", "body": "<p>I would suggest looking at an example of scanf at the bottom of this page. <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_scanf.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/c_standard_library/c_function_scanf.htm</a></p>\n\n<p>Also it seems that you are fundamentally a bit confused on what a pointer is and where they belong. The &amp; operator is actually the least commonly used of all pointer operators so don't expect to patter them all over the place like you have now.</p>\n"}], "owner": {"reputation": 1, "user_id": 4700911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51bb88258c152e45b6b5e97fb765ce64?s=128&d=identicon&r=PG&f=1", "display_name": "MAX", "link": "https://stackoverflow.com/users/4700911/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1850, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1443624045, "creation_date": 1443620069, "question_id": 32867530, "link": "https://stackoverflow.com/questions/32867530/fopen-doesnt-work-program-crashes", "title": "fopen doesn&#39;t work, program crashes", "body": "<p>I'm trying to open a file with fopen, and i just don't see what's going wrong. The file is in the same directory as the main.c file. I've also tried using the full directory with same results. Thanks for your help</p>\n\n<pre><code>int main()\n{\nconst char file[2000];\n\nint numWords = 0;\nscanf(\"%s\", file);\n\n//printf(\"good\");\nprintf(\"%s\", &amp;file);\n\nFILE *f;\nf = fopen(&amp;file, \"r\");\n\nif(f == NULL)\n{\n    printf(\"Cant open\");\n    printf(\"\\n%s\", file);\n    exit(2);\n}\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "atomic", "intrinsics"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1443619537, "post_id": 32867258, "comment_id": 53566624, "body": "I don&#39;t think the <code>_n</code> versions exist at all; I think <code>n</code> is a placeholder in the docs for the size of the object you are trying to load."}, {"owner": {"reputation": 1255, "user_id": 1048099, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3e2d63b72054c55c7b41119af5f6e1c9?s=128&d=identicon&r=PG", "display_name": "Andrew Parker", "link": "https://stackoverflow.com/users/1048099/andrew-parker"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1443619940, "post_id": 32867258, "comment_id": 53566915, "body": "They actually work.  Try      <code>int main()     {         int i = 6;         int j = __atomic_load_n(&amp;i, 0);            return j;     }</code>  in Wandbox: <a href=\"http://melpon.org/wandbox\" rel=\"nofollow noreferrer\">melpon.org/wandbox</a>. Hence my comment about the docs :)"}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1443620174, "post_id": 32867258, "comment_id": 53567051, "body": "Hmm, so it does. It might do overloading, even in C, since it&#39;s a compiler intrinsic and not a real function."}, {"owner": {"reputation": 1255, "user_id": 1048099, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3e2d63b72054c55c7b41119af5f6e1c9?s=128&d=identicon&r=PG", "display_name": "Andrew Parker", "link": "https://stackoverflow.com/users/1048099/andrew-parker"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1443620848, "post_id": 32867258, "comment_id": 53567542, "body": "Yeah, I&#39;m pretty sure that&#39;s what it&#39;s doing. I&#39;m just curious to know the official story on this stuff."}, {"owner": {"reputation": 1255, "user_id": 1048099, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3e2d63b72054c55c7b41119af5f6e1c9?s=128&d=identicon&r=PG", "display_name": "Andrew Parker", "link": "https://stackoverflow.com/users/1048099/andrew-parker"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1443621379, "post_id": 32867258, "comment_id": 53567978, "body": "Another confusing this is why there&#39;s a function <code>__atomic_load</code> - which takes different parameters - but this one has no explicit specialisation!"}], "owner": {"reputation": 1255, "user_id": 1048099, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3e2d63b72054c55c7b41119af5f6e1c9?s=128&d=identicon&r=PG", "display_name": "Andrew Parker", "link": "https://stackoverflow.com/users/1048099/andrew-parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443664655, "creation_date": 1443619332, "last_edit_date": 1443664655, "question_id": 32867258, "link": "https://stackoverflow.com/questions/32867258/gcc-atomic-functions-n-suffix-vs-explicit-width-e-g-4", "title": "GCC __atomic functions: _n suffix vs explicit width, e.g. _4", "body": "<p>The GCC <code>__atomic</code> API has multiple functions ending in <code>_n</code>, e.g. </p>\n\n<pre><code>__atomic_load_n \n__atomic_store_n\n</code></pre>\n\n<p>The compiler also supports intrinsitcs with <code>n</code> replaced by 1, 2, 4, 8 or 16 (which you have to infer exist from the docs - IMO the docs are pretty hazy for <code>__atomic</code>s and should be improved!).  When an explicit number is used this tells the compiler the width of the data the atomic operation should operate on. When <code>_n</code> is used I'm presuming the compiler infers the width from the type passed if it can, or errors otherwise.</p>\n\n<p>I checked this last statement by passing a <code>void*</code> to <code>__atomic_load_n</code> and it complained, which wasn't a big surprise.</p>\n\n<p>So my questions are: </p>\n\n<ul>\n<li>Is what I have said correct? </li>\n<li>Is there any reason not to use the <code>_n</code> version except in the case that you have some opaque pointer and need to explicitly tell the compiler how wide it's pointee is? </li>\n<li>Are there any other subtleties I'm missing with this stuff?</li>\n</ul>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "unsigned", "signed"], "comments": [{"owner": {"reputation": 1143, "user_id": 3858885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95a19704d80920c1f9e628c0d6463abe?s=128&d=identicon&r=PG", "display_name": "michaelrccurtis", "link": "https://stackoverflow.com/users/3858885/michaelrccurtis"}, "edited": false, "score": 0, "creation_date": 1443618766, "post_id": 32867000, "comment_id": 53566094, "body": "Can you clarify your question? Why do you not expect 12 &gt; -2?"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1443618804, "post_id": 32867000, "comment_id": 53566124, "body": "Um, math agrees with your results."}, {"owner": {"reputation": 475, "user_id": 5118690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a19269e7a06347dfe2c3a7e81d8d2df5?s=128&d=identicon&r=PG&f=1", "display_name": "Missu", "link": "https://stackoverflow.com/users/5118690/missu"}, "edited": false, "score": 0, "creation_date": 1443618992, "post_id": 32867000, "comment_id": 53566248, "body": "Take a look on <a href=\"http://www.tutorialspoint.com/cprogramming/c_type_casting.htm\" rel=\"nofollow noreferrer\">Usual Arithmetic Conversion</a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1443619459, "post_id": 32867000, "comment_id": 53566574, "body": "The conversion goes the opposite way: signed -&gt; unsigned."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1443621283, "post_id": 32867000, "comment_id": 53567891, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/247873/signed-versus-unsigned-integers\">Signed versus Unsigned Integers</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2757, "user_id": 5308259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5628c03fe452a8420fc130408101e057?s=128&d=identicon&r=PG&f=1", "display_name": "Psytho", "link": "https://stackoverflow.com/users/5308259/psytho"}, "edited": false, "score": 0, "creation_date": 1443619061, "post_id": 32867076, "comment_id": 53566296, "body": "Comparing is not an arithmetic operation."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 2757, "user_id": 5308259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5628c03fe452a8420fc130408101e057?s=128&d=identicon&r=PG&f=1", "display_name": "Psytho", "link": "https://stackoverflow.com/users/5308259/psytho"}, "edited": false, "score": 0, "creation_date": 1443619143, "post_id": 32867076, "comment_id": 53566353, "body": "@Alex.S <code>If both of the operands have arithmetic type, the usual arithmetic conversions are performed.</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 2757, "user_id": 5308259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5628c03fe452a8420fc130408101e057?s=128&d=identicon&r=PG&f=1", "display_name": "Psytho", "link": "https://stackoverflow.com/users/5308259/psytho"}, "edited": false, "score": 0, "creation_date": 1443625384, "post_id": 32867076, "comment_id": 53570770, "body": "@Alex.S How is comparing not an arithmetic operation?"}, {"owner": {"reputation": 2757, "user_id": 5308259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5628c03fe452a8420fc130408101e057?s=128&d=identicon&r=PG&f=1", "display_name": "Psytho", "link": "https://stackoverflow.com/users/5308259/psytho"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443644629, "post_id": 32867076, "comment_id": 53581381, "body": "@chux Because comparison is not an arithmetic operation. <a href=\"https://en.wikipedia.org/wiki/Arithmetic\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Arithmetic</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 2757, "user_id": 5308259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5628c03fe452a8420fc130408101e057?s=128&d=identicon&r=PG&f=1", "display_name": "Psytho", "link": "https://stackoverflow.com/users/5308259/psytho"}, "edited": false, "score": 0, "creation_date": 1443644969, "post_id": 32867076, "comment_id": 53581535, "body": "@Alex.S At the risk of a <a href=\"https://www.youtube.com/watch?v=9-k5J4RxQdE\" rel=\"nofollow noreferrer\">duck/rabbit season</a> exchange, a comparison like <code>a&gt;b</code> is done by subtraction which is certain arithmetic."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1443619579, "last_edit_date": 1443619579, "creation_date": 1443618784, "answer_id": 32867076, "question_id": 32867000, "link": "https://stackoverflow.com/questions/32867000/conversion-of-unsigned-integer-variable-to-signed-variable/32867076#32867076", "title": "conversion of unsigned integer variable to signed variable", "body": "<p>First, to quote the <code>C11</code> standard for relational operators, chapter 6.5.8</p>\n\n<blockquote>\n  <p>If both of the operands have arithmetic type, the usual arithmetic conversions are\n  performed.</p>\n</blockquote>\n\n<p>Now, following the description in chapter 6.3.1.8, <em>Usual arithmetic conversions</em>, if you try to perform arithmetic operation between a <code>signed</code> and an <code>unsigned</code> integer (type), the <code>signed</code> one will get promoted to <code>unsigned</code> type (higher rank) and then the operation will take place. </p>\n\n<p>So, here, for the comparison, the value of <code>b</code> is getting converted to <code>unsigned</code> type and you're getting the <em>wrong</em> output there.</p>\n\n<p>To quote the relevant part, from the same chapter</p>\n\n<blockquote>\n  <p>[...] Otherwise, both operands are converted to the unsigned integer type\n  corresponding to the type of the operand with signed integer type.</p>\n</blockquote>\n\n<p>You can also check on the usual arithmetic promotion rule <a href=\"https://www.eskimo.com/~scs/cclass/int/sx4cb.html\" rel=\"nofollow\">here</a></p>\n\n<p>That said, <code>void main()</code> should be <code>int main(int argc, char* argv[])</code>, or, at least, <code>int main(void)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1443618792, "creation_date": 1443618792, "answer_id": 32867081, "question_id": 32867000, "link": "https://stackoverflow.com/questions/32867000/conversion-of-unsigned-integer-variable-to-signed-variable/32867081#32867081", "title": "conversion of unsigned integer variable to signed variable", "body": "<p>It's one of the type promotion rules: if one argument is an <code>int</code> and the other an <code>unsigned int</code> then the <code>int</code> is promoted to an <code>unsigned int</code>, adding UINT_MAX + 1 if necessary.</p>\n\n<p>This happens prior to the comparison.</p>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1443619322, "last_edit_date": 1592644375, "creation_date": 1443618981, "answer_id": 32867148, "question_id": 32867000, "link": "https://stackoverflow.com/questions/32867000/conversion-of-unsigned-integer-variable-to-signed-variable/32867148#32867148", "title": "conversion of unsigned integer variable to signed variable", "body": "<pre><code> if(a&gt;b)\n</code></pre>\n<p>In this <code>a</code> is <code>unsigned int</code>  and <code>b</code> is <code>signed int</code> , so due to implicit conversion , <code>b</code> will be converted to <code>unsigned int type</code> and <code>b</code> will have a large value (no need to say, it will be greater than <code>a</code>).</p>\n<p>Therefore ,you get unexpected result.</p>\n<blockquote>\n<p>According to C99- 6.3.1.8 Usual arithmetic conversions</p>\n<p>[...]</p>\n<p>3.Otherwise, if the operand that has unsigned integer type has rank greater or equal to the rank of the type of the other operand, then the operand with signed integer type is converted to the type of the operand with unsigned integer type.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1443626650, "creation_date": 1443626650, "answer_id": 32869945, "question_id": 32867000, "link": "https://stackoverflow.com/questions/32867000/conversion-of-unsigned-integer-variable-to-signed-variable/32869945#32869945", "title": "conversion of unsigned integer variable to signed variable", "body": "<p>To perform the comparison, both operands are first converted to the same type.  In this case, <code>int b</code> is converted to the higher ranking <code>unsigned</code>.  For the comparison values, it is then <code>12 &gt; (-2 + (UINTMAX + 1))</code>? which is false. </p>\n\n<p>To compare in the usual mathematical sense:</p>\n\n<pre><code>unsigned int a;\nint b;\n\nif ((b &lt; 0) || (a &gt; b)) printf(\"a is greater\");\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 5231956, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/485ec02e65487d6f4e1bce60a674bef2?s=128&d=identicon&r=PG&f=1", "display_name": "Lincoln", "link": "https://stackoverflow.com/users/5231956/lincoln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 32869945, "answer_count": 4, "score": 3, "last_activity_date": 1443626650, "creation_date": 1443618589, "last_edit_date": 1443619463, "question_id": 32867000, "link": "https://stackoverflow.com/questions/32867000/conversion-of-unsigned-integer-variable-to-signed-variable", "title": "conversion of unsigned integer variable to signed variable", "body": "<p>why does below program gives the output that <b>b</b> is greater than <b>a</b>?\nEven though <b>b</b> contains -2.</p>\n\n<pre><code>void main()\n{\n    unsigned int a=12;\n    int b=-2;\n\n    if(a&gt;b)\n        printf(\"a is greater\");\n    else\n        printf(\"b is greater\");\n\n    getch();\n}\n</code></pre>\n"}, {"tags": ["c", "file", "scanf"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1443618006, "post_id": 32866744, "comment_id": 53565571, "body": "Its quite unclear what you want ."}, {"owner": {"reputation": 830, "user_id": 449387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f885a79a611bf777a84c247b6a1b1149?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/449387/dave"}, "edited": false, "score": 0, "creation_date": 1443618142, "post_id": 32866744, "comment_id": 53565677, "body": "You&#39;re unclear here, If you are reading data from a file that is newline &#39;\\n&#39; delimited then you need a loop that can call fgets(), as long as there isn&#39;t binary data in the file.  Post the the rest of your program so we can get an idea of the end goal here."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1443620468, "post_id": 32866744, "comment_id": 53567262, "body": "<code>int a, b, c; char temp[2]; if(fscanf(FILE, &quot;%d%c%d%c%d&quot;, &amp;a, &amp;temp[0], &amp;b, &amp;temp[1], &amp;c) != 5 || temp[0] != &#39;\\n&#39; || temp[1] != &#39; &#39;){ &#47;* Invalid format of data in the file *&#47; }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 40404, "user_id": 282912, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bmLJq.png?s=128&g=1", "display_name": "msw", "link": "https://stackoverflow.com/users/282912/msw"}, "edited": false, "score": 0, "creation_date": 1443626396, "post_id": 32867362, "comment_id": 53571418, "body": "I&#39;ve never figured out why people continue to teach [f]scanf which, upon error, leaves the input stream in a virtually unknown state. fgets and sscanf is the way to separate reading from parsing."}], "tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": false, "score": 3, "last_activity_date": 1443619587, "creation_date": 1443619587, "answer_id": 32867362, "question_id": 32866744, "link": "https://stackoverflow.com/questions/32866744/how-to-use-fscanf-care-about-endofline/32867362#32867362", "title": "How to use fscanf, care about endofline?", "body": "<p>You need to read each line into a char buffer using <code>fgets</code> and parse each line with its own <code>sscanf</code>. You can use an extra <code>%s</code> on the end of the format string (and an extra pointer argument to a dummy variable of type <code>char *</code>) to detect whether the line contains extra stuff after the fields you're looking for.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1443624970, "creation_date": 1443624970, "answer_id": 32869347, "question_id": 32866744, "link": "https://stackoverflow.com/questions/32866744/how-to-use-fscanf-care-about-endofline/32869347#32869347", "title": "How to use fscanf, care about endofline?", "body": "<p><code>fscanf(FILE, \"%d\", ...);</code> first scans and discard white space before scanning for <code>int</code> characters.  In scanning white-space, both <code>' '</code> and <code>'\\n'</code> are treated the same, so using <code>'%d'</code> loses the end-of-line.</p>\n\n<p><code>fscanf(FILE, \"\\n\", ...);</code> and <code>fscanf(FILE, \" \", ...);</code> do the same thing:  scan and discard <em>any</em> white space.  Using \"\\n\" does <em>not</em> scan only for <code>'\\n'</code>.</p>\n\n<p>Code could use <code>fscanf(FILE, \"%d%*1[\\n]%d %d\", &amp;a, &amp;b, &amp;c) == 3</code>, to find a <code>'\\n'</code> after <code>a</code>, but additional <code>'\\n'</code> could be lurking in other places.</p>\n\n<p>The only way using <code>scanf()</code> family to detect a <code>'\\n'</code> involves using <code>'%c'</code> or <code>'%[]'</code> or <code>'%n'</code>.  It is easier to use <code>fgets()</code> and then parse with <code>sscanf()</code> or <code>strtol()</code>.</p>\n\n<pre><code>int Read1and2int(FILE *stream, int *a, int *b, int *c) {\n   char buf[100];\n   int n;\n\n   if (fgets(buf, sizeof buf, stream) == NULL) return EOF;\n   int count = sscanf(buf,\"%d %n\", a, &amp;n);\n   // Non-numeric or extra data\n   if (count != 1 || buf[n]) return 0;\n\n   if (fgets(buf, sizeof buf, stream) == NULL) return 1;\n   count = sscanf(buf,\"%d%d %n\", b, c, &amp;n);\n   // Non-numeric or extra data\n   if (count != 2 || buf[n]) return 1;\n   return 3; \n}\n</code></pre>\n"}], "owner": {"reputation": 1316, "user_id": 4746639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-D0PvMWvD0Gc/AAAAAAAAAAI/AAAAAAAAAGg/V6ByFqwuBPo/photo.jpg?sz=128", "display_name": "CharybdeBE", "link": "https://stackoverflow.com/users/4746639/charybdebe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 32869347, "answer_count": 2, "score": 1, "last_activity_date": 1443624970, "creation_date": 1443617894, "last_edit_date": 1443619363, "question_id": 32866744, "link": "https://stackoverflow.com/questions/32866744/how-to-use-fscanf-care-about-endofline", "title": "How to use fscanf, care about endofline?", "body": "<p>I want to read int from a file</p>\n\n<p>The first line is composed of 1 int and the second of 2</p>\n\n<p>ie </p>\n\n<pre><code> 1\n 2 3\n</code></pre>\n\n<p>if i do </p>\n\n<pre><code> fscanf(FILE, \"%d \\n %d %d\", &amp;a, &amp;b, &amp;c);\n</code></pre>\n\n<p>I obtain correctly the 3 numbers\nbut if i  put all the numbers on the same line in the file\nie <code>1 2 3</code></p>\n\n<p>I obtain the same result (and that's not what i want)</p>\n\n<p>I want to know : How to force the user to go to a new line in his file ?</p>\n\n<p>Edit :\nAs it seems unclear to some (i'm sorry for that) i want that the file </p>\n\n<pre><code>1 \n2 3\n</code></pre>\n\n<p>Produce the result :</p>\n\n<pre><code>a = 1\nb = 2 \nc = 3 \n</code></pre>\n\n<p>And the file</p>\n\n<pre><code>1 2 3 \n</code></pre>\n\n<p>produce either an error or </p>\n\n<pre><code>a = 1\nb = 0\nc = 0\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 6, "creation_date": 1443617680, "post_id": 32866631, "comment_id": 53565308, "body": "Add error checking to the program. It&#39;s almost impossible to debug (or even use) a program with no error checking. For example, after each call to <code>fopen</code>, check the returned value for <code>NULL</code>. Check the return values of <code>scanf</code> and <code>fscanf</code> too."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 2, "creation_date": 1443617802, "post_id": 32866631, "comment_id": 53565411, "body": "Please format your code ."}], "answers": [{"tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 0, "last_activity_date": 1443620860, "creation_date": 1443620860, "answer_id": 32867796, "question_id": 32866631, "link": "https://stackoverflow.com/questions/32866631/debug-assertion-expression-stream-null-every-time-i-use-fopen/32867796#32867796", "title": "debug assertion expression stream!=null every time i use fopen", "body": "<p>You need to do error checking on your fopen procedures and in general. This error is most likely due to a fscanf or fopen returning an unexpected value that you didn't catch.</p>\n\n<p>More useful tips:</p>\n\n<ul>\n<li>Debug with breakpoints if your IDE allows you to</li>\n<li>Format your code to be more in line and easily readable</li>\n<li>Comment on Functions to make clear what they do, for future readers or your future self.</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 4741403, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oMwY1LPfP4I/AAAAAAAAAAI/AAAAAAAAAO0/gJpRZFQBmVY/photo.jpg?sz=128", "display_name": "Tanaz Pari Kazi", "link": "https://stackoverflow.com/users/4741403/tanaz-pari-kazi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 377, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1443620860, "creation_date": 1443617606, "question_id": 32866631, "link": "https://stackoverflow.com/questions/32866631/debug-assertion-expression-stream-null-every-time-i-use-fopen", "title": "debug assertion expression stream!=null every time i use fopen", "body": "<p>I'm actually having problems with not one but 2 to 3 programs using files and  their commands like fopen, fscanf, while(strcmp(input,\"E\")!=0).Atleast, I think that is the problem. All these programs show the same error that is  debug assertion failed! Expression (stream!=null).I tried everything but nothing seems to work pls help. I cant understand what to do. Pls reply as soon as possible.This is one of the programs:</p>\n\n<pre><code>    # include &lt;stdio.h&gt; \n    # include &lt;conio.h&gt; \n    # include &lt;string.h&gt; \n    # include &lt;stdlib.h&gt;\n    void main() \n    { char add[6],length[10],input[10],binary[12],bitmask[12],relocbit; \n      int start,inp,len,i,address,opcode,addr,actualadd; \n      FILE *fp1=fopen(\"relinput.dat\",\"r\"); \n      FILE *fp2=fopen(\"reloutput.dat\",\"w\");\n      system(\"cls\");\n      printf(\"Enter the actual starting address : \"); \n      scanf(\"%d\",&amp;start); \n      fscanf(fp1,\"%s\",input); \n      while(strcmp(input,\"E\")!=0) \n      { if(strcmp(input,\"H\")==0) \n         { fscanf(fp1,\"%s\",add); \n           fscanf(fp1,\"%s\",length);\n           fscanf(fp1,\"%s\",input); \n          } \n        if(strcmp(input,\"T\")==0) \n         { fscanf(fp1,\"%d\",&amp;address);  \n           fscanf(fp1,\"%s\",bitmask);\n           address+=start;\n           len=strlen(bitmask); \n           for(i=0;i&lt;len;i++)\n             { fscanf(fp1,\"%d\",&amp;opcode); \n               fscanf(fp1,\"%d\",&amp;addr); \n               relocbit=bitmask[i];\n               if(relocbit=='0') \n                   actualadd=addr;\n               else \n                   actualadd=addr+start; \n               fprintf(fp2,\"%d\\t%d%d\\n\",address,opcode,actualadd);\n                   address+=3; \n             }\n           fscanf(fp1,\"%s\",input); \n         }\n        } \n        fclose(fp1); \n        fclose(fp2); \n        printf(\"FINISHED\");\n         getch(); \n         }\n</code></pre>\n"}, {"tags": ["c", "hardware"], "comments": [{"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 0, "creation_date": 1443617922, "post_id": 32866606, "comment_id": 53565501, "body": "Wrap them in another struct (so they are <code>RegisterStruct.RESERVED.r01</code>), or allocate them as an int array (<code>uint8 RESERVED[12]</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 3, "last_activity_date": 1443618054, "creation_date": 1443618054, "answer_id": 32866798, "question_id": 32866606, "link": "https://stackoverflow.com/questions/32866606/placeholder-for-hardware-reserved-registers-in-struct/32866798#32866798", "title": "Placeholder for hardware reserved registers in struct", "body": "<p>Obvious naming would be the right thing to use, as there's no \"reserved\" feature in C. </p>\n\n<p>You can use arrays of byte-sized integers to correctly pad to the right length:</p>\n\n<pre><code>typedef volatile struct RegisterStruct\n{\n  uint8_t BDH;\n  uint8_t BDL;\n  uint8_t IR;\n  uint8_t __RESERVED[num_of_reserved_bytes]; // this area should not be accessed\n  uint8_t NEXT_REGISTER_NAME;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1431, "user_id": 1257204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a013d2a5e5727c3c91c357d95d04f98a?s=128&d=identicon&r=PG", "display_name": "m47h", "link": "https://stackoverflow.com/users/1257204/m47h"}, "edited": false, "score": 0, "creation_date": 1443620163, "post_id": 32867263, "comment_id": 53567039, "body": "You are right. But the usage of structs for this purpose has at least one advantage. If you develop a driver for a module (e.g. UART) with a specific register mapping, you can distinguish between different microcontrollers having this module by only changing the address the struct is pointing at."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1443619335, "creation_date": 1443619335, "answer_id": 32867263, "question_id": 32866606, "link": "https://stackoverflow.com/questions/32866606/placeholder-for-hardware-reserved-registers-in-struct/32867263#32867263", "title": "Placeholder for hardware reserved registers in struct", "body": "<p>The problem with using structs for register mapping in general (or similarly, for data communication protocol mapping), is that a struct may contain padding bytes anywhere. </p>\n\n<p>If you use a struct (or union) for such purposes, you have to ensure that padding is disabled, by adding a line like for example</p>\n\n<pre><code>_Static_assert(sizeof(RegisterStruct) == sizeof(uint8_t)*4, \"Padding detected\");\n</code></pre>\n\n<p>This will prevent padding bugs, as it will block structs with padding from compiling.</p>\n\n<p>Unfortunately, you cannot disable struct padding in a portable manner; most of the time you <em>don't</em> want to disable it because it will make the programs slower at best, in the worst case you'll get hardware exceptions for misaligned access, all depending on CPU.</p>\n\n<p>The most common non-standard extension to disable padding is <code>#pragma pack(1)</code>, but it is non-standard and non-portable.</p>\n\n<p>In my opinion, the best way to avoid all such problems is to avoid structs entirely for the actual mapping. Instead, just declare everything as plain volatile variables. (Or by using macros, which is unfortunately the only way you can map something to a specific memory location in standard C). </p>\n\n<p>And when you have gotten that far, there's no need to use any \"reserved\" place holders. Simply don't map anything to those reserved memory locations.</p>\n\n<p>There's actually really no sound reason why you would want to have a number of hardware registers in a struct, even though it is for some reason mighty popular to do so among embedded compilers. You'll find that register maps written for such compilers are unreadable and also extremely non-standard.</p>\n\n<p>For communication protocols it makes more sense to have structs, but then you would typically write serialize/de-serialize routines to fill up the struct.</p>\n"}, {"comments": [{"owner": {"reputation": 1431, "user_id": 1257204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a013d2a5e5727c3c91c357d95d04f98a?s=128&d=identicon&r=PG", "display_name": "m47h", "link": "https://stackoverflow.com/users/1257204/m47h"}, "edited": false, "score": 0, "creation_date": 1443620350, "post_id": 32867446, "comment_id": 53567168, "body": "Good idea, but i do not want to obfuscate my code ;-)"}, {"owner": {"reputation": 57963, "user_id": 968261, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/16f69ca344773bd6c34970b2f6186d61?s=128&d=identicon&r=PG", "display_name": "Alexey Frunze", "link": "https://stackoverflow.com/users/968261/alexey-frunze"}, "reply_to_user": {"reputation": 1431, "user_id": 1257204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a013d2a5e5727c3c91c357d95d04f98a?s=128&d=identicon&r=PG", "display_name": "m47h", "link": "https://stackoverflow.com/users/1257204/m47h"}, "edited": false, "score": 0, "creation_date": 1443620401, "post_id": 32867446, "comment_id": 53567205, "body": "@m47h Well, you do. :)"}], "tags": [], "owner": {"reputation": 57963, "user_id": 968261, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/16f69ca344773bd6c34970b2f6186d61?s=128&d=identicon&r=PG", "display_name": "Alexey Frunze", "link": "https://stackoverflow.com/users/968261/alexey-frunze"}, "is_accepted": false, "score": 1, "last_activity_date": 1443619827, "creation_date": 1443619827, "answer_id": 32867446, "question_id": 32866606, "link": "https://stackoverflow.com/questions/32866606/placeholder-for-hardware-reserved-registers-in-struct/32867446#32867446", "title": "Placeholder for hardware reserved registers in struct", "body": "<p>There isn't anything in C to declare a placeholder/hole without a name in a structure or something with a name that is unreadable (const could help but with write protection only). And I don't see anything in gcc's extensions that could help here.</p>\n\n<p>But you could additionally scramble the name by using the preprocessor, e.g.:</p>\n\n<pre><code>#define GLUE(X,Y,Z) X ## Y ## Z\n#ifdef __GNUC__\n#define SCRAMBLE(X) GLUE(X,_,__COUNTER__)\n#else\n#define SCRAMBLE(X) GLUE(X,_,__LINE__)\n#endif\n\ntypedef volatile struct\n{\n  uint8 BDH;\n  uint8 BDL;\n//  ...\n  uint8 IR;\n  uint8 SCRAMBLE(RESERVED0);\n//  ...\n} RegisterStruct;\n</code></pre>\n"}], "owner": {"reputation": 1431, "user_id": 1257204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a013d2a5e5727c3c91c357d95d04f98a?s=128&d=identicon&r=PG", "display_name": "m47h", "link": "https://stackoverflow.com/users/1257204/m47h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1443619827, "creation_date": 1443617531, "question_id": 32866606, "link": "https://stackoverflow.com/questions/32866606/placeholder-for-hardware-reserved-registers-in-struct", "title": "Placeholder for hardware reserved registers in struct", "body": "<p>i have a struct which represents a set of hardware registers. Here, some parts are reserved and must neither be written nor read. Is there a placeholder or something similar instead of using an obvious variable naming?</p>\n\n<pre><code>typedef volatile struct RegisterStruct\n{\n  uint8 BDH;\n  uint8 BDL;\n  ...\n  uint8 IR;\n  uint8 RESERVED0; // this area should not be accessed\n  ...\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "scanf"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1443617136, "post_id": 32866446, "comment_id": 53564962, "body": "<code>sscan(coef, &quot;%d[^,]&quot;, &amp;coefs[i]);</code> --&gt; <code>if(sscanf(coef, &quot;%d,&quot;, &amp;coefs[i]) != 1){ &#47;* Invalid input detected *&#47; }</code>. Also, <code>fgets(coefs, 999, stdin);</code> --&gt; <code>fgets(coefs, 1000 &#47;* Or sizeof(coefs) *&#47;, stdin);</code>"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1443617525, "post_id": 32866446, "comment_id": 53565203, "body": "To elaborate: <code>[s]scanf</code>returns the number of successfully read items (not chars), which can be 0 if no match was found, e.g. in your case no number was encountered before something else than white space. This return value (items, not chars) can actually be annoying because you don&#39;t know where in a string sscanf failed (so you cannot resume). Man pages for all things unix are online, just  google &quot;man &lt;function&gt;&quot;."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1443617931, "post_id": 32866446, "comment_id": 53565508, "body": "I remembered that <code>[s]scanf</code> knows a <code>n</code> conversion which takes a pointer to int as corresponding parameter; the pointer is used to store the number of characters read so far which is the information missing from the return value."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1443623950, "post_id": 32866446, "comment_id": 53569744, "body": "<code>sscan(coef,</code> : 1st argument need update each loop."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1450811400, "creation_date": 1450811400, "answer_id": 34422830, "question_id": 32866446, "link": "https://stackoverflow.com/questions/32866446/using-sscanf-to-add-an-element-to-an-int-array-per-index/34422830#34422830", "title": "Using sscanf to add an element to an int array per index", "body": "<p>Use <code>\"%n\"</code> to save the count of scanned characters to know where to continue scanning.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define BUFSIZE 1000\n\nvoid coeffunc(int degree) {\n  char coef[BUFSIZE];\n  int coefs[BUFSIZE / 2];  // Number of integer certainly less than &lt; BUFSIZE/2\n\n  printf(\"Enter %d integer coefficients starting from the 0th degree.\\n\"\n      \"Separate each input by a comma: \", degree);\n  if (fgets(coef, sizeof coef, stdin) == NULL) {\n    return;\n  }\n  static const char *format[2] = { \n      \"%d %n\",\n      \" ,%d %n\" };\n  char *p = coef;\n  int i;\n  for (i = 0; i &lt; degree; i++) {\n    int n = 0;\n    sscanf(p, format[i &gt; 0], &amp;coefs[i], &amp;n);\n\n    // Catch potential error \n    if (n == 0) break;\n\n    p += n;\n  }\n\n  // More error detection\n  if (*p) Fail();  // Extra text on the line\n  if (i &lt; degree) Fail(); // No enough values\n}\n</code></pre>\n\n<hr>\n\n<p>Another buffer size approach if VLA allowed (Variable sized arrays)</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n// bit_width*log10(2) rounded-up and sign\n#define INT_TEXT_WIDTH (sizeof(int)*CHAR_BIT/3 + 1 + 1)\n// \", \"\n#define COMMA_SPACE 2\n// \\r\\n\\0\n#define LINE_END 3\n#define BUF_NEEDED(n) ((INT_TEXT_SIZE + COMMA_SPACE) * (n) + LINE_END)\n\nvoid coeffunc(int degree) {\n  int coefs[degree];\n  // To cope with those who like lots of spaces, leading zeros, use a 2x buffer\n  char coef[BUF_NEEDED(degree) *2];\n  ...\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5393037, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2fc86fa73ae967a7f3c7ddb89e714352?s=128&d=identicon&r=PG&f=1", "display_name": "Ralph Omila", "link": "https://stackoverflow.com/users/5393037/ralph-omila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1257, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450811400, "creation_date": 1443616998, "last_edit_date": 1443617492, "question_id": 32866446, "link": "https://stackoverflow.com/questions/32866446/using-sscanf-to-add-an-element-to-an-int-array-per-index", "title": "Using sscanf to add an element to an int array per index", "body": "<p>So, we have a \"Machine Problem\" where we are supposed to obtain the roots of a polynomial. My question is: Is there a way to add an element per index to an int array.</p>\n\n<p>Here is my code(it's just a function btw)</p>\n\n<pre><code>void coeffunc(int degree){\n     char coef[1000];\n     int coefs[1000], i;\n\n     printf(\"Enter %d integer coefficients starting from the 0th degree.\\nSeparate each input by a comma: \", degree);\n     fgets(coefs, 999, stdin);\n     for(i=0;i!=degree;i++){\n          sscan(coef, \"%d[^,]\", &amp;coefs[i]);\n     }\n</code></pre>\n\n<p>My problem with this code is I'm not sure how to catch an error if the input is a character.</p>\n"}, {"tags": ["android", "c", "audio"], "comments": [{"owner": {"reputation": 72, "user_id": 5142300, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6c04cafea7bd96b6f09c4768433b28a6?s=128&d=identicon&r=PG&f=1", "display_name": "srinivas", "link": "https://stackoverflow.com/users/5142300/srinivas"}, "edited": false, "score": 0, "creation_date": 1465715138, "post_id": 32866314, "comment_id": 63011412, "body": "@santhosh did you find solution for this??"}, {"owner": {"reputation": 580, "user_id": 6533853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/5l6fN.jpg?s=128&g=1", "display_name": "Ninja", "link": "https://stackoverflow.com/users/6533853/ninja"}, "edited": false, "score": 0, "creation_date": 1504621333, "post_id": 32866314, "comment_id": 79074465, "body": "Have you got the solution of your question?"}], "owner": {"reputation": 21, "user_id": 5393050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iLmtOtWmQ1s/AAAAAAAAAAI/AAAAAAAAAD8/0Gw8BrjWi_M/photo.jpg?sz=128", "display_name": "Santosh Madhukar", "link": "https://stackoverflow.com/users/5393050/santosh-madhukar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1443700906, "creation_date": 1443616671, "last_edit_date": 1443700906, "question_id": 32866314, "link": "https://stackoverflow.com/questions/32866314/voiceaudio-file-properties-to-be-changed-to-get-another-voice", "title": "Voice(Audio file) properties to be changed to get another Voice", "body": "<p>I am trying to do an Android App i.e Voice Changer:(link shared below)\n[<a href=\"https://play.google.com/store/apps/details?id=com.baviux.voicechanger&amp;hl=en]\" rel=\"nofollow\">https://play.google.com/store/apps/details?id=com.baviux.voicechanger&amp;hl=en]</a>\nI have found all the native libraries to change the audio voice file to another voice\nBut i don't know the exact values of audio properties to be changed to get the type of given voice as any one of below ones:</p>\n\n<p>\u2022 Helium\n\u2022 Robot\n\u2022 Big robot\n\u2022 Squirrel\n\u2022 Dizzy\n\u2022 Backwards\n\u2022 Monster\n\u2022 Nervous\n\u2022 Giant\n\u2022 Telephone\n\u2022 Cave\n\u2022 Cathedral\n\u2022 Dark side\n\u2022 Alien\n\u2022 Grand Canyon\n\u2022 Fan\n\u2022 Devil\n\u2022 Child\n\u2022 Sheep\n\u2022 Overlord\n\u2022 Small alien\n\u2022 Megaphone\n\u2022 Death\n\u2022 Everything is spinning\n\u2022 Hexafluoride\n\u2022 Small creature\n\u2022 Optimus Robot\n\u2022 Android\n\u2022 Villain\n\u2022 Battery low\n\u2022 Shrinking\n\u2022 Cyborg\n\u2022 Duck\n\u2022 Extraterrestrial\n\u2022 Deep voice\n\u2022 Zombie</p>\n\n<p>can any one help me what exact values(properties) of audio file like Pitch,Frequency etc... for above voice types to be get changed using the native libraries</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443616925, "post_id": 32866306, "comment_id": 53564808, "body": "Sorry, wait, what was the problem? Is this just a code review request? If so, it&#39;s off-topic."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1443617527, "post_id": 32866306, "comment_id": 53565206, "body": "What is the purpose of any of the goto&#39;s other than the last one? Wouldn&#39;t that happen anyway?"}, {"owner": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "reply_to_user": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1443617778, "post_id": 32866306, "comment_id": 53565382, "body": "@DavidSchwartz I was just trying to avoid the case in which I close <code>app1</code> and it reopens it instantly after this. It shall just keep looking for a process untill it appears"}], "answers": [{"comments": [{"owner": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "edited": false, "score": 0, "creation_date": 1443620498, "post_id": 32866424, "comment_id": 53567288, "body": "Thanks @NathanOliver. That fixed that specific case. Anyway, there&#39;s also the next situation: if <code>process1.exe</code> is running and I try to open the second process, that won&#39;t work. I mean, it won&#39;t close and reopen the second process. Any turnarounds for this too ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "edited": false, "score": 0, "creation_date": 1443620788, "post_id": 32866424, "comment_id": 53567503, "body": "@Alexander You might want to start a new question about this.  You can link back to this question to show where you started."}, {"owner": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "edited": false, "score": 0, "creation_date": 1443621785, "post_id": 32866424, "comment_id": 53568249, "body": "I did: <a href=\"http://stackoverflow.com/questions/32868136/unsuccesfull-management-of-specific-processes-in-my-c-console-application\" title=\"unsuccesfull management of specific processes in my c console application\">stackoverflow.com/questions/32868136/&hellip;</a>"}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1443621983, "post_id": 32866424, "comment_id": 53568399, "body": "You will need a continue at the end of each if statement."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1443622868, "post_id": 32866424, "comment_id": 53568984, "body": "Otherwise it drops through into the next if instead of going back to the start.  Consequences of not using an else"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1443622980, "post_id": 32866424, "comment_id": 53569075, "body": "@cup and that is what the OP wants.  they want to check each process each iteration.  just because their code does&#39;t do that doesn&#39;t mean mine is wrong."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 7, "last_activity_date": 1443619050, "last_edit_date": 1443619050, "creation_date": 1443616939, "answer_id": 32866424, "question_id": 32866306, "link": "https://stackoverflow.com/questions/32866306/alternatives-of-goto-in-my-c-console-application/32866424#32866424", "title": "Alternatives of goto in my C++ console application", "body": "<p>If you want to check for the existance of each process every loop and you want to run forever you can use a while loop.</p>\n\n<pre><code>int main(){\n    //...\n    while(true) {\n        if(ProcessRunning(\"process1.exe\")){\n            fun1(\"fun1.bat\");\n        }\n        if(ProcessRunning(\"process2.exe\")){\n            fun1(\"fun2.bat\");\n        }\n        if(ProcessRunning(\"process3.exe\")){\n            fun1(\"fun3.bat\");\n        }\n        if(ProcessRunning(\"process4.exe\")){\n            fun1(\"fun4.bat\");\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>We don't want to use <code>else if</code> here as we would never check another process if one process is found.  Using just <code>if</code> it will check each process each iteration.</p>\n\n<p>EDIT:</p>\n\n<p>From the comments it appears that you only want to run your function once.  To do that we can add a bool for each process and check that in the if condition.  if it is true then we will not run the function again.  To do that we can change the code to:</p>\n\n<pre><code>int main(){\n    //...\n    bool proc1 = false, proc2 = false, proc3 = false, proc4 = false,\n    while(true) {\n        if(!proc1 &amp;&amp; ProcessRunning(\"process1.exe\")){\n            fun1(\"fun1.bat\");\n            proc1  = true;\n        }\n        if(!proc2 &amp;&amp; ProcessRunning(\"process2.exe\")){\n            fun1(\"fun2.bat\");\n            proc2  = true;\n        }\n        if(!proc3 &amp;&amp; ProcessRunning(\"process3.exe\")){\n            fun1(\"fun3.bat\");\n            proc3  = true;\n        }\n        if(!proc4 &amp;&amp; ProcessRunning(\"process4.exe\")){\n            fun1(\"fun4.bat\");\n            proc4  = true;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Now if <code>procX</code> is false then the we will check if the process is running and if it is we run <code>fun1()</code> then set <code>procX</code> to true.  Otherwise if <code>procX</code> is true the rest of the if statement is skipped.</p>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 1600799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb4dc86bbde19efd8f8be4c42819423?s=128&d=identicon&r=PG", "display_name": "Daniel Monteiro", "link": "https://stackoverflow.com/users/1600799/daniel-monteiro"}, "is_accepted": false, "score": 0, "last_activity_date": 1443617248, "creation_date": 1443617248, "answer_id": 32866525, "question_id": 32866306, "link": "https://stackoverflow.com/questions/32866306/alternatives-of-goto-in-my-c-console-application/32866525#32866525", "title": "Alternatives of goto in my C++ console application", "body": "<p>How about a map from String to String, in which the key is one string for the name of the process and the value is the .bat file to run? It will look elegant and scalable.</p>\n\n<p><code>std::map</code> is your friend!\n<a href=\"http://www.cplusplus.com/reference/map/map/\" rel=\"nofollow\">http://www.cplusplus.com/reference/map/map/</a></p>\n\n<p>With that, you could use the same <code>while</code> as the other answers, but if only one (or a just a couple of <code>if</code>s, even if you got a bazillion of possibilities.</p>\n"}], "owner": {"reputation": 1054, "user_id": 3316077, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/js6iY.png?s=128&g=1", "display_name": "Cajuu&#39;", "link": "https://stackoverflow.com/users/3316077/cajuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "closed_date": 1443635694, "accepted_answer_id": 32866424, "answer_count": 2, "score": 1, "last_activity_date": 1443619050, "creation_date": 1443616635, "question_id": 32866306, "link": "https://stackoverflow.com/questions/32866306/alternatives-of-goto-in-my-c-console-application", "closed_reason": "Needs details or clarity", "title": "Alternatives of goto in my C++ console application", "body": "<p>I've recently got to a point where I had to deal with some logic in a C++ project, and unfortunately I was not able to do it right using <code>goto</code>.</p>\n\n<p><em>What was the problem about ?</em></p>\n\n<p>I have one function, named <code>ProcessRunning(const char *name)</code> which verifies if a process exists (it returns <code>true</code>) or not (it returns <code>false</code>).</p>\n\n<p>I have another 4 functions, <code>int fun1(const char name[])</code>,<code>int fun2(const char name[])</code>,<code>int fun3(const char name[])</code>, <code>int fun4(const char name[])</code>.\n - each of these functions looks like this:</p>\n\n<pre><code>int fun1(const char name[]){\n    //open a new .bat file\n\n    //start of what I write in .bat\n\n    //taskkill  process.exe\n    //start again process.exe\n    //delete the created file\n\n    //end of what I write in the file\n    return system(name);\n}\n</code></pre>\n\n<p>And exactly the same for the other 3 functions.</p>\n\n<p>Now, in my <code>main()</code> program I am trying to do the following:</p>\n\n<pre><code>int main(){\n    //...\n    start_again:\n    if(ProcessRunning(\"process1.exe\")){\n        fun1(\"fun1.bat\");\n        goto start_again;\n    }\n    else if(ProcessRunning(\"process2.exe\")){\n        fun1(\"fun2.bat\");\n        goto start_again;\n    }\n    else if(ProcessRunning(\"process3.exe\")){\n        fun1(\"fun3.bat\");\n        goto start_again;\n    }\n    else if(ProcessRunning(\"process4.exe\")){\n        fun1(\"fun4.bat\");\n        goto start_again;\n    }\n    else if(!ProcessRunning(\"process1.exe\") || !ProcessRunning(\"process2.exe\") || !ProcessRunning(\"process3.exe\") || !ProcessRunning(\"process4.exe\") || ){\n        goto start_again;\n    }\n    goto start_again;\n    return 0;\n}\n</code></pre>\n\n<p>Now what I would like the whole program to do:  </p>\n\n<ul>\n<li>the program <strong>MUST</strong> always run;</li>\n<li>it checks if one of those 4 processes are running;</li>\n<li>if there's no such process, go back and check again (so there's a permanent check if any of those conditions aren't satisfied)  </li>\n<li>if it finds <code>process1</code> (the first if), it creates that .bat file and it executes it (kill the first process, start it again, delete the <code>.bat</code> file).\nThe process is now running, but the program should still go through the other <code>if</code>s and check if there's <code>process2</code>, <code>process3</code> or <code>process4</code> running and do the same thing for them.</li>\n</ul>\n\n<p>Every process is assigned to an application, let's say:  </p>\n\n<p>app1 -> goes with <code>process1</code><br>\napp2 -> goes with <code>process2</code><br>\n..<br>\napp4 -> goes with <code>process4</code>  </p>\n\n<p>Cases:  </p>\n\n<ul>\n<li>process1 is running  </li>\n<li>process1 is not running<br>\n..  </li>\n<li>and so on<br>\nFor the sake of example I'll just take <code>process1</code> but this should apply to all of them.</li>\n</ul>\n\n<p>Because the app is always running, it checks if there's process1. If there isn't, it checks for process2 and if none is found, start over again and again. Otherwise, if process1 is found, do what's in that <code>if</code> condition but still look after the other processes.</p>\n\n<p>Now, the problem that I have is that I can't find a better solution which will keep my console program running all the time and make these checks. More, the actual implementation that I've found so far it doesn't treat all those situations.</p>\n\n<p>Any advices on this, please (improvements of logic, critiques, alternatives)? (sorry for the long post and possible grammar mistakes).</p>\n"}, {"tags": ["c", "operators", "c-preprocessor"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1443615900, "post_id": 32865828, "comment_id": 53564081, "body": "As it shows up on Windows, too, why did you make that Linux-specific? (It is not)"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1443615907, "post_id": 32865828, "comment_id": 53564088, "body": "Which compiler -- even on Windows -- compiles a translation unit &quot;as expected&quot; that has a function call at global space and no <code>int main()</code>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1443615987, "post_id": 32865828, "comment_id": 53564139, "body": "Always check the result of functions which might encounter an error. Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1443616289, "post_id": 32865828, "comment_id": 53564364, "body": "The Microsoft C compiler is a bit &quot;special&quot;. It&#39;s never been C99-compliant, for instance."}, {"owner": {"reputation": 19, "user_id": 5392268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e1212ffe9d24f76112d667cbd7846a?s=128&d=identicon&r=PG&f=1", "display_name": "MStriker", "link": "https://stackoverflow.com/users/5392268/mstriker"}, "edited": false, "score": 0, "creation_date": 1443616461, "post_id": 32865828, "comment_id": 53564469, "body": "Sorry for the bad code sample, I was in hurry."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1443618500, "post_id": 32865828, "comment_id": 53565898, "body": "Generic curiosity aside, you <i>are</i> hopefully aware that this kind of preprocessor magic is very much frowned upon, and should be reserved for special cases that cannot conceivably be solved in a cleaner way."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5392268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e1212ffe9d24f76112d667cbd7846a?s=128&d=identicon&r=PG&f=1", "display_name": "MStriker", "link": "https://stackoverflow.com/users/5392268/mstriker"}, "edited": false, "score": 0, "creation_date": 1443617361, "post_id": 32866090, "comment_id": 53565096, "body": "This compiles in gcc but not on Visual Studio. I can use the define for Unix only but there is nothing that can work on both?"}, {"owner": {"reputation": 30739, "user_id": 186193, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/df61dcc6eec08cb7d62f1959b89ae843?s=128&d=identicon&r=PG", "display_name": "Ferenc Deak", "link": "https://stackoverflow.com/users/186193/ferenc-deak"}, "reply_to_user": {"reputation": 19, "user_id": 5392268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e1212ffe9d24f76112d667cbd7846a?s=128&d=identicon&r=PG&f=1", "display_name": "MStriker", "link": "https://stackoverflow.com/users/5392268/mstriker"}, "edited": false, "score": 1, "creation_date": 1443617460, "post_id": 32866090, "comment_id": 53565164, "body": "@MStriker you always can use a <code>#ifdef _MSC_VER</code> to check for VS, and use a different set of macros for the tw compilers."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1443635779, "post_id": 32866090, "comment_id": 53577056, "body": "The variadic macro syntax used in this example is an (old) gcc extension and does not conform with standard C. Also, the use of <b>VA_ARGS</b> is incorrect, since the gcc extension doesn&#39;t use <b>VA_ARGS</b> and it will not be replaced. Use <code>#define toString1(...) #__VA_ARGS__</code> and <code>#define toString(S) toString1(S)</code>"}], "tags": [], "owner": {"reputation": 30739, "user_id": 186193, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/df61dcc6eec08cb7d62f1959b89ae843?s=128&d=identicon&r=PG", "display_name": "Ferenc Deak", "link": "https://stackoverflow.com/users/186193/ferenc-deak"}, "is_accepted": false, "score": 1, "last_activity_date": 1443616043, "creation_date": 1443616043, "answer_id": 32866090, "question_id": 32865828, "link": "https://stackoverflow.com/questions/32865828/stringizing-operator-in-c-not-working-on-linux/32866090#32866090", "title": "Stringizing operator in C not working on linux", "body": "<p>The compiler says:</p>\n\n<pre><code> error: macro \"toString1\" passed 4 arguments, but takes just 1\n\n sscanf(numbersS, \"%d,%d,%d,%d\",a1,a2,a3,a4); \n</code></pre>\n\n<p>indeed, <code>numbersS</code> is <code>toString(numbers)</code> and numbers <code>is a,b,c,d</code></p>\n\n<p>so you will need some variable macro magic here to work correctly:</p>\n\n<pre><code>#define a                    2\n#define b                    3\n#define c                    4\n#define d                    5\n#define toString1(S...)         #S\n#define toString(S...)          toString1(S, __VA_ARGS__) \n#define numbers              a,b,c,d\n#define numbersS             toString(numbers)\n\nint main()\n{\n    int a1,a2,a3,a4;\n    sscanf(numbersS, \"%d,%d,%d,%d\",&amp;a1,&amp;a2,&amp;a3,&amp;a4); \n    printf(\"%d %d %d %d\", a1,a2,a3,a4);\n\n}\n</code></pre>\n\n<p>Online: <a href=\"https://ideone.com/puPd6x\" rel=\"nofollow\">https://ideone.com/puPd6x</a></p>\n\n<p>(Also, please note that I have fixed the sscanf to take addresses)</p>\n"}], "owner": {"reputation": 19, "user_id": 5392268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e1212ffe9d24f76112d667cbd7846a?s=128&d=identicon&r=PG&f=1", "display_name": "MStriker", "link": "https://stackoverflow.com/users/5392268/mstriker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1443617478, "creation_date": 1443615353, "last_edit_date": 1443616816, "question_id": 32865828, "link": "https://stackoverflow.com/questions/32865828/stringizing-operator-in-c-not-working-on-linux", "title": "Stringizing operator in C not working on linux", "body": "<p>I have the following code which works as expected in Windows but on Ubuntu I get the error \"toString1 was not declared in this scope\".</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define a                    2\n#define b                    3\n#define c                    4\n#define d                    5\n#define toString1(S)         #S\n#define toString(S)          toString1(S)\n#define numbers              a,b,c,d\n#define numbersS             toString(numbers)\nint main()\n{\n int a1 = 0, a2 = 0, a3 = 0, a4 = 0;\n if (sscanf_s(numbersS, \"%d,%d,%d,%d\", &amp;a1, &amp;a2, &amp;a3, &amp;a4) == 4)\n { \n    printf(\"The numbers were assigned correctly\");\n }\n printf(\"%d %d %d %d \", a1, a2, a3, a4);\n}\n</code></pre>\n\n<p>What could be the reason for that?  If I remove toString1 and make </p>\n\n<pre><code>#define toString(S)           #S\n</code></pre>\n\n<p>the result is 0 for every variable on both Windows and Ubuntu.</p>\n\n<p>Can someone have an explanation for this?</p>\n"}, {"tags": ["c", "output"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1444933303, "post_id": 32865568, "comment_id": 54120428, "body": "what do you expect the output to be, u ask for the print of 6 numbers, which numbers do u expect to be printed?"}], "answers": [{"tags": [], "owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "is_accepted": false, "score": 4, "last_activity_date": 1443616663, "last_edit_date": 1443616663, "creation_date": 1443615192, "answer_id": 32865777, "question_id": 32865568, "link": "https://stackoverflow.com/questions/32865568/use-of-d-6-times-gives-a-strange-output-why/32865777#32865777", "title": "use of %d 6 times gives a strange output..why?", "body": "<p>That is Undefined Behavior.</p>\n\n<p>Short answer is don't do that, and enable compiler warnings to detect it at compile time <code>-Wformat</code> or <code>-Wall</code>.</p>\n\n<p>Long answer:</p>\n\n<p>The function declaration is:</p>\n\n<pre><code>int printf(const char *format, ...);\n</code></pre>\n\n<p>Meaning it knows that the first argument is a format, and after that there may be some more. It scans the <code>format</code> string, and for every specifier (e.g. <code>%d</code>) it tries to remove the data from the stack corresponding to that type (in this case, an <code>int</code>).</p>\n\n<p>When calling your function, you do something like:</p>\n\n<pre><code>push sum\npush const_format_string_pointer\ncall printf\n</code></pre>\n\n<p>In printf, it will first read const_format_string_pointer, then sum, then whatever is on the stack before the sum. That is usually the local variables of the calling function (in this case <code>x</code>,<code>y</code>,<code>sum</code>). And indeed, it did print out 11 and 6, corresponding to <code>sum</code> and <code>y</code>. Another <code>%d</code> would likely print out 5.</p>\n\n<p>The three big numbers are the things compiler added to the stack for it's own need. They have a meaning in debug mode, but it is compiler specific. Also, if you compile your code with optimizations (e.g. <code>-O2</code>), it will probably get rid of some or all of the larger numbers, and you'll end up printing stuff deeper in the stack than caller's local functions, such as caller's pushed <code>ebp</code>, or caller's return address, etc.</p>\n"}], "owner": {"reputation": 682, "user_id": 5256798, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/ee0d6c875e27c27b77195923b0fcbc29?s=128&d=identicon&r=PG&f=1", "display_name": "sachsure", "link": "https://stackoverflow.com/users/5256798/sachsure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1444932970, "creation_date": 1443614523, "last_edit_date": 1444932970, "question_id": 32865568, "link": "https://stackoverflow.com/questions/32865568/use-of-d-6-times-gives-a-strange-output-why", "title": "use of %d 6 times gives a strange output..why?", "body": "<p>the output of the following code on my machine is strange</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main() {\n\n    int x = 5,y=6,sum=0;\n    sum=x+y;\n    printf(\"%d %d %d %d %d %d\", sum = x +y );\n    getch();\n\n}\n</code></pre>\n"}, {"tags": ["c", "gdb"], "comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 2, "creation_date": 1443614452, "post_id": 32865472, "comment_id": 53563116, "body": "What is the command line you are using to invoke gdb, and have you read <code>man gdb</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "edited": false, "score": 0, "creation_date": 1443615887, "post_id": 32865599, "comment_id": 53564073, "body": "Another possibility is using <a href=\"http://elinux.org/KDB\" rel=\"nofollow noreferrer\">KDB</a> (or KGDB), which can be used via a serial console or a connected keyboard"}, {"owner": {"reputation": 954, "user_id": 5275810, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d31b4edfdb153437e0d3daa54e33ffc7?s=128&d=identicon&r=PG&f=1", "display_name": "anikhan", "link": "https://stackoverflow.com/users/5275810/anikhan"}, "edited": false, "score": 0, "creation_date": 1443673571, "post_id": 32865599, "comment_id": 53589576, "body": "Thank you, i am trying to run linux kernel on QEMU, i ran qemu-system-i386 -s -S -kernel bzImage and gdb file vmlinux command is giving  above error"}], "tags": [], "owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "is_accepted": false, "score": 6, "last_activity_date": 1443614631, "creation_date": 1443614631, "answer_id": 32865599, "question_id": 32865472, "link": "https://stackoverflow.com/questions/32865472/unable-to-debug-linux-on-gdb/32865599#32865599", "title": "Unable to debug lInux on gdb", "body": "<p>kernel debugging is a whole different ballgame from debugging a user process and is not as simple as firing up GDB. For this you will need support of a JTAG. \n<a href=\"http://wiki.qemu.org/Main_Page\">QEMU</a> allows you to virtualize a machine and therefore use a virtual JTAG.</p>\n\n<p>For simple stuff you will probably find <code>printk</code> much easier. </p>\n"}], "owner": {"reputation": 954, "user_id": 5275810, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d31b4edfdb153437e0d3daa54e33ffc7?s=128&d=identicon&r=PG&f=1", "display_name": "anikhan", "link": "https://stackoverflow.com/users/5275810/anikhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443614631, "creation_date": 1443614231, "last_edit_date": 1443614401, "question_id": 32865472, "link": "https://stackoverflow.com/questions/32865472/unable-to-debug-linux-on-gdb", "title": "Unable to debug lInux on gdb", "body": "<p>I am trying to debug Linux using gdb, I compiled kernel with \"compile kernel with debug info\".\n    once kernel is compiled I am trying to give \n    GDB file vmlinux\n    (running above command gives me below error)</p>\n\n<pre><code> GNU gdb (Ubuntu 7.7.1-0ubuntu5~14.04.2) 7.7.1\n\n\nReading symbols from file...(no debugging symbols found)...done.\n\"/home/Linux/vmlinux\" is not a core dump: File format not recognized\n</code></pre>\n\n<p>Even I am setting debug con-figs it is giving me \"no debugging symbols found\"</p>\n"}, {"tags": ["c", "linux", "performance", "linux-kernel", "perf"], "comments": [{"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1443637073, "post_id": 32865293, "comment_id": 53577717, "body": "Use <code>perf</code> tool for that. Like in the below answer is mentioned."}], "answers": [{"tags": [], "owner": {"reputation": 20221, "user_id": 133707, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/bf60cc38f73241e4d313ac26e85b1414?s=128&d=identicon&r=PG", "display_name": "Nemanja Boric", "link": "https://stackoverflow.com/users/133707/nemanja-boric"}, "is_accepted": false, "score": 0, "last_activity_date": 1443615520, "creation_date": 1443615520, "answer_id": 32865895, "question_id": 32865293, "link": "https://stackoverflow.com/questions/32865293/how-to-check-performance-of-a-function-in-kernel/32865895#32865895", "title": "How to check performance of a function in kernel", "body": "<p>You should take a look into <a href=\"http://linux.die.net/man/1/oprofile\" rel=\"nofollow\">oprofile</a>. The example output (from <a href=\"http://homepages.cwi.nl/~aeb/linux/profile.html\" rel=\"nofollow\">http://homepages.cwi.nl/~aeb/linux/profile.html</a>)</p>\n\n<pre><code># oprofpp -l -i /foo/vmlinux | tail\nc012ca30 488      1.86174     kmem_cache_free\nc010e280 496      1.89226     mask_and_ack_8259A\nc010a61a 506      1.93041     restore_all\nc0119220 603      2.30047     do_softirq\nc0110b30 663      2.52938     delay_tsc\nc012c7c0 703      2.68198     kmem_cache_alloc\nc02146c0 786      2.99863     __copy_to_user_ll\nc0169b70 809      3.08637     ext3_readdir\nc01476f0 854      3.25805     link_path_walk\nc016fcd0 1446     5.51656     ext3_find_entry\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3913, "user_id": 235548, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yo2fI.jpg?s=128&g=1", "display_name": "maxy", "link": "https://stackoverflow.com/users/235548/maxy"}, "edited": false, "score": 0, "creation_date": 1446552919, "post_id": 32866033, "comment_id": 54781399, "body": "summary: first disable preemption and IRQs, then use assembly (<code>RDTSC</code> instruction) to read the CPU cycle counter before and after the code"}, {"owner": {"reputation": 470, "user_id": 3079496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/esP64.jpg?s=128&g=1", "display_name": "Sebastian Mountaniol", "link": "https://stackoverflow.com/users/3079496/sebastian-mountaniol"}, "edited": false, "score": 0, "creation_date": 1503530072, "post_id": 32866033, "comment_id": 78659468, "body": "This is an interesting approach but too synthetic. Not always it possible to turn off preemption and IRQs."}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "reply_to_user": {"reputation": 470, "user_id": 3079496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/esP64.jpg?s=128&g=1", "display_name": "Sebastian Mountaniol", "link": "https://stackoverflow.com/users/3079496/sebastian-mountaniol"}, "edited": false, "score": 0, "creation_date": 1503562987, "post_id": 32866033, "comment_id": 78670856, "body": "@SebastianMountaniol Turning off IRQs is better, but you don&#39;t have to. In this case you need to test several times and reject high timings that stick out (those that got interrupted)."}, {"owner": {"reputation": 470, "user_id": 3079496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/esP64.jpg?s=128&g=1", "display_name": "Sebastian Mountaniol", "link": "https://stackoverflow.com/users/3079496/sebastian-mountaniol"}, "edited": false, "score": 0, "creation_date": 1503615139, "post_id": 32866033, "comment_id": 78702937, "body": "It possible but here we fall into the trap of a proper threshold."}], "tags": [], "owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "is_accepted": false, "score": 0, "last_activity_date": 1443615864, "creation_date": 1443615864, "answer_id": 32866033, "question_id": 32865293, "link": "https://stackoverflow.com/questions/32865293/how-to-check-performance-of-a-function-in-kernel/32866033#32866033", "title": "How to check performance of a function in kernel", "body": "<p>You might be interested by <a href=\"http://www.intel.com/content/dam/www/public/us/en/documents/white-papers/ia-32-ia-64-benchmark-code-execution-paper.pdf\" rel=\"nofollow\">this paper</a> by an Intel engineer.<br>\nIt explains how to accurately time your code with the CPU timer.</p>\n\n<p>Don't forget to time with a wide range of inputs. You might also want to take into account the potential difference in robustness (how your code behave with wrong inputs).</p>\n"}, {"tags": [], "owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "is_accepted": false, "score": -1, "last_activity_date": 1443616088, "creation_date": 1443616088, "answer_id": 32866118, "question_id": 32865293, "link": "https://stackoverflow.com/questions/32865293/how-to-check-performance-of-a-function-in-kernel/32866118#32866118", "title": "How to check performance of a function in kernel", "body": "<p>The other answers give good suggestions for precision measuring. If you're looking at rough difference, it may be easier to use something from <a href=\"http://lxr.free-electrons.com/source/include/linux/timekeeping.h\" rel=\"nofollow\">timekeeping.h</a>, such as <code>do_gettimeofday</code>:</p>\n\n<pre><code>uint64_t time_one_function(void (*func)(void))\n{   \n    const int NUM_ITERATIONS = 5000;\n    struct timeval before, after;\n\n    do_gettimeofday(&amp;before);\n    for (int i = 0; i &lt; NUM_ITERATIONS; i++)\n    {\n        func();\n    }\n    do_gettimeofday(&amp;after);\n\n    // Time it took to do all iterations in microseconds\n    uint64_t diff_microseconds = (after.tv_sec - before.tv_sec) * 1000000ULL + (after.tv_usec - before.tv_usec);\n\n    // REturn roughly the time in nanoseconds for a single call\n    return (diff_microseconds*1000) / NUM_ITERATIONS;\n}\n</code></pre>\n\n<p>That will give a rough nanoseconds time for a single function, then just call it on both.</p>\n"}, {"comments": [{"owner": {"reputation": 1419, "user_id": 2904103, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d4a83b767e6aa6f4ff7a55ff57b9e6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Haswell", "link": "https://stackoverflow.com/users/2904103/haswell"}, "edited": false, "score": 0, "creation_date": 1446461648, "post_id": 32869162, "comment_id": 54737000, "body": "hi, thanks for the suggestion, I have installed perf, but how to link perf to measure my functions performance."}, {"owner": {"reputation": 3913, "user_id": 235548, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yo2fI.jpg?s=128&g=1", "display_name": "maxy", "link": "https://stackoverflow.com/users/235548/maxy"}, "edited": false, "score": 1, "creation_date": 1446462214, "post_id": 32869162, "comment_id": 54737344, "body": "To get started, try <code>perf record -a</code>, wait a bit, <code>Ctrl-C</code>, then run <code>perf report</code>. Make sure your function is actually called often enough, or it won&#39;t show up."}, {"owner": {"reputation": 1419, "user_id": 2904103, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d4a83b767e6aa6f4ff7a55ff57b9e6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Haswell", "link": "https://stackoverflow.com/users/2904103/haswell"}, "reply_to_user": {"reputation": 3913, "user_id": 235548, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yo2fI.jpg?s=128&g=1", "display_name": "maxy", "link": "https://stackoverflow.com/users/235548/maxy"}, "edited": false, "score": 0, "creation_date": 1446524620, "post_id": 32869162, "comment_id": 54767200, "body": "@maxy Does my function need to be exported, although I am not using it in any other module. Will perf require information from exported symbols only ?"}, {"owner": {"reputation": 1355, "user_id": 1163462, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fb5426025e066629df319666ed5dd553?s=128&d=identicon&r=PG", "display_name": "basav", "link": "https://stackoverflow.com/users/1163462/basav"}, "edited": false, "score": 0, "creation_date": 1446530151, "post_id": 32869162, "comment_id": 54768892, "body": "you can find how to enable support for perf, if not already enabled in the attached link"}], "tags": [], "owner": {"reputation": 1355, "user_id": 1163462, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fb5426025e066629df319666ed5dd553?s=128&d=identicon&r=PG", "display_name": "basav", "link": "https://stackoverflow.com/users/1163462/basav"}, "is_accepted": false, "score": 0, "last_activity_date": 1446530083, "last_edit_date": 1446530083, "creation_date": 1443624500, "answer_id": 32869162, "question_id": 32865293, "link": "https://stackoverflow.com/questions/32865293/how-to-check-performance-of-a-function-in-kernel/32869162#32869162", "title": "How to check performance of a function in kernel", "body": "<p>I have been doing the same thing recently and I am using these tools:</p>\n\n<p>Perf \n<a href=\"http://perf%20wiki\" rel=\"nofollow\">https://perf.wiki.kernel.org/index.php/Main_Page</a></p>\n\n<p>ARM DS5\n<a href=\"http://perf%20wiki\" rel=\"nofollow\">http://ds.arm.com/</a></p>\n\n<p>PowerMonitor\n<a href=\"http://perf%20wiki\" rel=\"nofollow\">https://www.msoon.com/LabEquipment/PowerMonitor/</a></p>\n\n<p>You can get an evaluation version for ARM DS5 and try it out.\nIt will profile the code application wise and you can see \"online\" data.</p>\n\n<p>PowerMonitor is licensed.</p>\n\n<p>Perf is a really handy tool and you can profile for different events.Kernel should be configured for perf events.</p>\n\n<p>It will need some profiling turned on, which can be enabled at the time of Kernel Compilation.</p>\n\n<p>For Perf related information , you can find the guidance here:\n<a href=\"http://perf%20wiki\" rel=\"nofollow\">https://perf.wiki.kernel.org/index.php/Tutorial</a> </p>\n"}], "owner": {"reputation": 1419, "user_id": 2904103, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d4a83b767e6aa6f4ff7a55ff57b9e6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Haswell", "link": "https://stackoverflow.com/users/2904103/haswell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1160, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1446530083, "creation_date": 1443613678, "last_edit_date": 1446461606, "question_id": 32865293, "link": "https://stackoverflow.com/questions/32865293/how-to-check-performance-of-a-function-in-kernel", "title": "How to check performance of a function in kernel", "body": "<p>I am trying to understand and use existing utilities or programmable snippets which allow to measure CPU utilization/performance in terms of Power Consumption, CPU cycles of a function in kernel space.</p>\n\n<p>I have two function snippets which do the same work:</p>\n\n<p><strong>convert ip address to string.</strong></p>\n\n<pre><code>char* inet_ntoa(struct in_addr in, char* buf, size_t* rlen)\n{\n\n        int i;\n        char* bp;\n\n        bp = buf;\n        for (i = 0;i &lt; 4; i++ ) {\n                unsigned int o, n;\n                o = ((unsigned char*)&amp;in)[i];\n                n = o;\n                if ( n &gt;= 200 ) {\n                        *bp++ = '2';\n                        n -= 200;\n                }else if ( n &gt;= 100 ) {\n                        *bp++ = '1';\n                        n -= 100;\n                }\n                if ( o &gt;= 10 ) {\n                        int i;\n                        for ( i = 0; n &gt;= 10; i++ ) {\n                                n -= 10;\n                        }\n                        *bp++ = i + '0';\n                }\n                *bp++ = n + '0';\n                *bp++ = '.';\n        }\n        *--bp = 0;\n        if ( rlen ) {\n                *rlen = bp - buf;\n        }\n\n        return buf;\n}\n</code></pre>\n\n<p>AND</p>\n\n<pre><code>char *inet_ntoa (struct in_addr in)\n    {\n      unsigned char *bytes = (unsigned char *) &amp;in;\n      __snprintf (buffer, sizeof (buffer), \"%d.%d.%d.%d\",\n              bytes[0], bytes[1], bytes[2], bytes[3]);\n\n      return buffer;\n    }\n</code></pre>\n\n<p>The later function is from glibc. The former one is my own.</p>\n\n<p>The two function would be called in kernel space.\nHow can I measure there performance to compare.</p>\n\n<p>My machine is Ubuntu 14.04 x86 i686. Linux kernel 3.13</p>\n\n<p><strong>I Installed perf from source linux/tools.</strong></p>\n\n<p><strong>I have my module running. How can I hook perf to measure my functions performance.</strong></p>\n\n<p>Kindly Suggest.</p>\n"}, {"tags": ["c", "arrays"], "answers": [{"tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 4, "last_activity_date": 1443613441, "creation_date": 1443613441, "answer_id": 32865238, "question_id": 32865179, "link": "https://stackoverflow.com/questions/32865179/excess-elements-in-char-array-initializer/32865238#32865238", "title": "excess elements in char array initializer", "body": "<p><code>\" \"</code> is a string (<code>char *</code>) literal. You want <code>' '</code> for a single <code>char</code>.</p>\n\n<p>Change:</p>\n\n<pre><code>    char board[3][3] = {\n        {\" \" , \" \" , \" \"} , {\" \" , \" \" , \" \"} , {\" \" , \" \" , \"t\"}\n    };\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>    char board[3][3] = {\n        {' ' , ' ' , ' '} , {' ' , ' ' , ' '} , {' ' , ' ' , 't'}\n    };\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 5392877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda2689b46358f011df99d45fc5d0dfc?s=128&d=identicon&r=PG&f=1", "display_name": "Bwal", "link": "https://stackoverflow.com/users/5392877/bwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6561, "favorite_count": 0, "accepted_answer_id": 32865238, "answer_count": 1, "score": 1, "last_activity_date": 1443613619, "creation_date": 1443613256, "last_edit_date": 1443613619, "question_id": 32865179, "link": "https://stackoverflow.com/questions/32865179/excess-elements-in-char-array-initializer", "title": "excess elements in char array initializer", "body": "<p>I'm trying to improve my lousy C skills so I'm writing  a tic tac toe program. It's only in its first steps but I would like to be able to print a board before going into the whole algorithms of the game itself. I'm planning to use 1 for x and 0 for circle in order to be able to use sums later.\nI'm working with gcc (ubuntu) and am getting this error:</p>\n\n<pre><code>xo.c:11:3: error: (near initialization for \u2018board[0]\u2019)\nxo.c:11:3: error: excess elements in char array initializer\nxo.c:11:3: error: (near initialization for \u2018board[0]\u2019)\nxo.c:11:3: error: excess elements in char array initializer\nxo.c:11:3: error: (near initialization for \u2018board[1]\u2019)\nxo.c:11:3: error: excess elements in char array initializer\nxo.c:11:3: error: (near initialization for \u2018board[1]\u2019)\nxo.c:11:3: error: excess elements in char array initializer\nxo.c:11:3: error: (near initialization for \u2018board[2]\u2019)\nxo.c:11:3: error: excess elements in char array initializer\nxo.c:11:3: error: (near initialization for \u2018board[2]\u2019)\n</code></pre>\n\n<p>I would like to initiate a 2 dimensional array of 3x3 for the board. I don't understand why is there an excess, I initialized a [3][3] and entered 9 elements. Here is the code I've written:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\n/***** Create two dimensional array full of blank spaces\n    1 marks the X , 0 marks the circle.\n    Let use enter coordinates (line and coloumn) for placing the 1 (x) and automatically print the board with the computers' move.\n*****/ \nint i = 0;\nint j = 0;\nvoid main() {\n    char board[3][3] = {\n        {\" \" , \" \" , \" \"} , {\" \" , \" \" , \" \"} , {\" \" , \" \" , \"t\"}\n    };\n    for(i=0 ; i&lt;3 ; i++) {\n        for(j=0 ; j&lt;3 ; j++) {\n            printf(\"%c \" , board[i][j]);\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "windows"], "answers": [{"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 2327, "user_id": 2280212, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/IUER1.jpg?s=128&g=1", "display_name": "Federico Ponzi", "link": "https://stackoverflow.com/users/2280212/federico-ponzi"}, "edited": false, "score": 0, "creation_date": 1443612240, "post_id": 32864786, "comment_id": 53561707, "body": "Yes, You should, because of is ignored."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1443612761, "post_id": 32864786, "comment_id": 53562009, "body": "For the linker error, you have to add <code>-lws2_32</code> to the compiler command line."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1443612807, "post_id": 32864786, "comment_id": 53562036, "body": "@MatteoItalia As shown in post, command used is correct: <code>gcc -Wall -o &quot;test&quot; &quot;test.c&quot; -lws2_32</code>"}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 3, "last_activity_date": 1443612457, "last_edit_date": 1443612457, "creation_date": 1443612131, "answer_id": 32864786, "question_id": 32864698, "link": "https://stackoverflow.com/questions/32864698/implicit-declaration-of-function-getaddrinfo-on-windows-with-mingw/32864786#32864786", "title": "implicit declaration of function &#39;getaddrinfo&#39; on Windows with Mingw", "body": "<p>About </p>\n\n<blockquote>\n  <p>warning: ignoring #pragma comment  [-Wunknown-pragmas]\n   #pragma comment (lib, \"Ws2_32.lib\")</p>\n</blockquote>\n\n<p><code>#pragma comment(lib,\"xxx.lib\")</code> is microsoft c/c++ compiler specific.\nGCC does not support it.</p>\n\n<p>About</p>\n\n<blockquote>\n  <p>implicit declaration of function</p>\n</blockquote>\n\n<p>Simply <code>#define _WIN32_WINNT 0x0501</code> before your include, due to </p>\n\n<pre><code>#if (_WIN32_WINNT &gt;= 0x0501)\nvoid WSAAPI freeaddrinfo (struct addrinfo*);\nint WSAAPI getaddrinfo (const char*,const char*,const struct addrinfo*,\n                struct addrinfo**);\nint WSAAPI getnameinfo(const struct sockaddr*,socklen_t,char*,DWORD,\n               char*,DWORD,int);\n#else\n/* FIXME: Need WS protocol-independent API helpers.  */\n#endif\n</code></pre>\n\n<p>in <code>ws2tcpip.h</code> file.</p>\n"}], "owner": {"reputation": 2327, "user_id": 2280212, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/IUER1.jpg?s=128&g=1", "display_name": "Federico Ponzi", "link": "https://stackoverflow.com/users/2280212/federico-ponzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1643, "favorite_count": 0, "accepted_answer_id": 32864786, "answer_count": 1, "score": 0, "last_activity_date": 1443612457, "creation_date": 1443611833, "question_id": 32864698, "link": "https://stackoverflow.com/questions/32864698/implicit-declaration-of-function-getaddrinfo-on-windows-with-mingw", "title": "implicit declaration of function &#39;getaddrinfo&#39; on Windows with Mingw", "body": "<p>I'm trying to create a really basic client application, based on the code on msdn but i get the error in the title.\nHere is the complete code:</p>\n\n<pre><code>#include &lt;tchar.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdarg.h&gt;\n\n#include &lt;windows.h&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;ws2tcpip.h&gt;\n#pragma comment (lib, \"Ws2_32.lib\")\n#define DEBUG 1\n\n\n#define DEFAULT_BUFLEN 512\n#define DEFAULT_PORT \"9001\"\n\nvoid CreateSocket();\nint main(int argc, char* argv[])\n{\n    CreateSocket();\n\n\n    return 0;\n}\n\n\nvoid CreateSocket()\n{\n    WSADATA wsaData;\n    SOCKET ConnectSocket = INVALID_SOCKET;\n    struct addrinfo *result = NULL,\n                    *ptr = NULL,\n                    hints;\n    char *sendbuf = \"this is a test\";\n    int iResult;\n\n    // Initialize Winsock\n    iResult = WSAStartup(MAKEWORD(2,2), &amp;wsaData);\n\n    ZeroMemory( &amp;hints, sizeof(hints) );    \n\n    hints.ai_family = AF_UNSPEC;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_protocol = IPPROTO_TCP;\n\n    iResult = getaddrinfo(\"127.0.0.1\", DEFAULT_PORT, &amp;hints, &amp;result);\n    ConnectSocket = socket(ptr-&gt;ai_family, ptr-&gt;ai_socktype, \n            ptr-&gt;ai_protocol);\n\n    iResult = connect( ConnectSocket, ptr-&gt;ai_addr, (int)ptr-&gt;ai_addrlen);\n\n    freeaddrinfo(result);\n    iResult = send( ConnectSocket, sendbuf, (int)strlen(sendbuf), 0 );\n\n    closesocket(ConnectSocket);\n    WSACleanup();\n\n}\n</code></pre>\n\n<p>I'm on Windows 10, with MinGW.\nThis the complete compile and error:</p>\n\n<pre><code>gcc -Wall -o \"test\" \"test.c\" -lws2_32 (nel direttorio: C:\\Users\\FedericoPonzi\\Google Drive\\Programmazione\\C\\ProgrammazioneDiSistema\\FedericoPonzi-programmazionedisistema-40c332bcd001\\FedericoPonzi-programmazionedisistema-40c332bcd001\\Prove)\ntest.c:10:0: warning: ignoring #pragma comment  [-Wunknown-pragmas]\n #pragma comment (lib, \"Ws2_32.lib\")\n ^\ntest.c: In function 'CreateSocket':\ntest.c:46:2: warning: implicit declaration of function 'getaddrinfo' [-Wimplicit-function-declaration]\n  iResult = getaddrinfo(\"127.0.0.1\", DEFAULT_PORT, &amp;hints, &amp;result);\n  ^\ntest.c:52:2: warning: implicit declaration of function 'freeaddrinfo' [-Wimplicit-function-declaration]\n  freeaddrinfo(result);\n  ^\ntest.c:35:6: warning: variable 'iResult' set but not used [-Wunused-but-set-variable]\n  int iResult;\n      ^\nC:\\Users\\FEDERI~1\\AppData\\Local\\Temp\\ccAW2c9I.o:test.c:(.text+0xbb): undefined reference to `getaddrinfo'\nC:\\Users\\FEDERI~1\\AppData\\Local\\Temp\\ccAW2c9I.o:test.c:(.text+0x11b): undefined reference to `freeaddrinfo'\nc:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: C:\\Users\\FEDERI~1\\AppData\\Local\\Temp\\ccAW2c9I.o: bad reloc address 0x20 in section `.eh_frame'\nc:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: final link failed: Invalid operation\ncollect2.exe: error: ld returned 1 exit status\nCompilazione fallita.\n</code></pre>\n\n<p>I'm using Geany as IDE.</p>\n\n<p>Also: why do i get the \"ignoring pragma\" error? Thanks.</p>\n"}, {"tags": ["c", "linux", "static", "extern"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1443612406, "post_id": 32864590, "comment_id": 53561802, "body": "Please see <a href=\"http://stackoverflow.com/questions/4268589/warning-in-extern-declaration\">other answers</a> to this question. The warning itself has nothing to do with <code>a.c</code>. Even if you compile <code>b.c</code> on its own you would get the same warning."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1443612547, "post_id": 32864590, "comment_id": 53561873, "body": "Why do you say &quot;scope of j is for a.c only&quot;? It&#39;s declared <code>extern</code> in <code>b.c</code>."}, {"owner": {"reputation": 81, "user_id": 3909183, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/1d5b5e7c3e0b7887bafbfee4ae09b5d4?s=128&d=identicon&r=PG&f=1", "display_name": "arya", "link": "https://stackoverflow.com/users/3909183/arya"}, "edited": false, "score": 0, "creation_date": 1443612718, "post_id": 32864590, "comment_id": 53561980, "body": "As <code>j</code> is declared static in <code>a.c</code> I think scope is limited to that file only."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1443612790, "post_id": 32864590, "comment_id": 53562027, "body": "@arya Yes it is. That is why your main prints <code>0</code> for <code>j</code> and not <code>5</code>. It is not clear what you are really asking."}, {"owner": {"reputation": 81, "user_id": 3909183, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/1d5b5e7c3e0b7887bafbfee4ae09b5d4?s=128&d=identicon&r=PG&f=1", "display_name": "arya", "link": "https://stackoverflow.com/users/3909183/arya"}, "edited": false, "score": 0, "creation_date": 1443613014, "post_id": 32864590, "comment_id": 53562172, "body": "Ok let me put like this, When I declare <code>static int j=0</code> in <code>b.c</code> and I make it <code>extern </code> in <code>a.c</code> &amp; print value of <code>j</code> in <code>main</code> function of <code>a.c</code> then I get linker error as <code>undefined reference to </code>j&#39;`.  Then vice a versa should also do the same.right?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1443613125, "post_id": 32864590, "comment_id": 53562238, "body": "You are right, because of static keyword."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1443613411, "post_id": 32864590, "comment_id": 53562435, "body": "@arya You are confusing declarations and definitions. The code as shown in your question has <b>two</b> definitions of <code>j</code>. They are at different scopes and do not clash. The example in your above comment is not complete. <code>extern</code> is not meaningful if you initialise the global. If you don&#39;t initialise it then yes you will get an undefined error in the comments example."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1443613662, "post_id": 32864590, "comment_id": 53562592, "body": "Conversely, the code shown has only <b>one</b> definition of <code>i</code>. They are both at the same (global) scope. Since one is uninitialised the compiler treats them as the same variable. If you tried to initialise <code>i</code> in <code>a.c</code> you will get a multiply defined variable compiler error."}], "answers": [{"tags": [], "owner": {"reputation": 9460, "user_id": 1885193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Vsd6.png?s=128&g=1", "display_name": "Gangadhar", "link": "https://stackoverflow.com/users/1885193/gangadhar"}, "is_accepted": false, "score": 0, "last_activity_date": 1443613517, "last_edit_date": 1443613517, "creation_date": 1443613146, "answer_id": 32865139, "question_id": 32864590, "link": "https://stackoverflow.com/questions/32864590/extern-variable-definition-in-other-file/32865139#32865139", "title": "extern variable definition in other file", "body": "<p>a.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint i;\nstatic int j;\nextern void display();\nint main()\n{\n        printf(\"i = %d\\n\",i);\n        printf(\"j = %d\\n\",j);\n        display();\n        return 0;\n}\n</code></pre>\n\n<p>b.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nextern int i;\nextern int j;\n\nvoid display()\n{\n     printf (\"%d\",j);\n}\n</code></pre>\n\n<p>c.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nextern int i=2;\nextern int j=5;\nvoid display()\n{\n   printf (\"%d\",j);\n}\n</code></pre>\n\n<p>If you compile a.c and b.c  GCC will complain </p>\n\n<blockquote>\n  <p>undefined reference to `j'.</p>\n</blockquote>\n\n<p>Because the program trying to access j which is not defined in the scope of b.c</p>\n\n<p>If you compiple a.c and c.c GCC will throw warning as you stated    </p>\n\n<blockquote>\n  <p>warning: \u00e2j\u00e2 initialized and declared \u00e2extern\u00e2</p>\n</blockquote>\n\n<p>and presumes j defined in c.c and will not throw any errors.</p>\n\n<p>In your case if you remove assignments in b.c you will not found any error at the time of compilation because in b.c there is no function which is accessing value of j.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 3909183, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/1d5b5e7c3e0b7887bafbfee4ae09b5d4?s=128&d=identicon&r=PG&f=1", "display_name": "arya", "link": "https://stackoverflow.com/users/3909183/arya"}, "edited": false, "score": 0, "creation_date": 1443615561, "post_id": 32865369, "comment_id": 53563845, "body": "it was interview question that how will compiler behave if I do like this?"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 1, "last_activity_date": 1443613887, "creation_date": 1443613887, "answer_id": 32865369, "question_id": 32864590, "link": "https://stackoverflow.com/questions/32864590/extern-variable-definition-in-other-file/32865369#32865369", "title": "extern variable definition in other file", "body": "<p>First of all, initializing a variable at the same time as you declare it as extern doesn't make any sense. Which is why you get a compiler warning. C allows it if the variable is at file scope, but as always, C allows many bad things.</p>\n\n<p>Also note that the use of extern is almost always bad practice and should be avoided.</p>\n\n<p>Now for the code, <code>i</code> behaves as expected because the <code>i</code> in both files refer to the same variable. <code>j</code> on the other hand is <code>static</code>, so the scope of that variable is reduced to the local file. There is a rule in the standard saying that all static variables must be initialized to 0 unless the programmer initialized them explicitly. So the value of <code>j</code> will be 0.</p>\n\n<p>Since <code>j</code> is static, <code>extern int j;</code> refers to \"another j somewhere else\", because there is no <code>j</code> variable visible to the file where you wrote the extern. Since \"another j somewhere else\" isn't used by the program, that variable will simply get discarded.</p>\n\n<p><code>static</code> and <code>extern</code> are in many ways each other's opposites. If you think it makes sense to declare the same variable both static and extern, you need to study the static keyword more.</p>\n"}, {"tags": [], "owner": {"reputation": 94, "user_id": 5159806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e67649e45c8bc304994e583753b9d477?s=128&d=identicon&r=PG", "display_name": "user5159806", "link": "https://stackoverflow.com/users/5159806/user5159806"}, "is_accepted": false, "score": 0, "last_activity_date": 1443616422, "creation_date": 1443616422, "answer_id": 32866241, "question_id": 32864590, "link": "https://stackoverflow.com/questions/32864590/extern-variable-definition-in-other-file/32866241#32866241", "title": "extern variable definition in other file", "body": "<p><code>static</code> data is by default initialized with <code>0</code> if not told otherwise, this is why you get 0 as answer, it has nothing to do with b.c module. Also a variable can't be declared both <code>static</code> and <code>extern</code>, sounds like a contradiction to me.</p>\n\n<p>When using <code>extern</code> you should only declare a variable(no space is set to hold it in memory), definition for that variable will be in other module. In a simple way <code>extern</code> tells to the compiler, hey don't worry about this variable its defined elsewhere in a module, so don't set any space for it.</p>\n\n<p>Why your compiler doesn't throw an error? Is b.c linked in your program with a.c? Try to do this and see what happens.</p>\n"}], "owner": {"reputation": 81, "user_id": 3909183, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/1d5b5e7c3e0b7887bafbfee4ae09b5d4?s=128&d=identicon&r=PG&f=1", "display_name": "arya", "link": "https://stackoverflow.com/users/3909183/arya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 32865369, "answer_count": 3, "score": 0, "last_activity_date": 1443616422, "creation_date": 1443611420, "question_id": 32864590, "link": "https://stackoverflow.com/questions/32864590/extern-variable-definition-in-other-file", "title": "extern variable definition in other file", "body": "<p>Hi I have following 2 files\nin <code>a.c</code> I have</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint i;\nstatic int j;\nint main()\n{\n        printf(\"i = %d\\n\",i);\n        printf(\"j = %d\\n\",j);\n        return 0;\n}\n</code></pre>\n\n<p>and in <code>b.c</code> I have</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nextern int i=2;\nextern int j=5;\n</code></pre>\n\n<p>In this example when I run, I get answer as 2,0 but complier throws warning <code>initialized and declared \u2018extern\u2019</code> for both variables.</p>\n\n<p>How b.c is able to access <code>j</code> and not throws error since scope of <code>j</code> is for <code>a.c</code> only?</p>\n"}, {"tags": ["c", "linux", "unix", "memory"], "comments": [{"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 5, "creation_date": 1443611115, "post_id": 32864428, "comment_id": 53561057, "body": "pause the program, and have a look at <code>&#47;proc&#47;pid&#47;maps</code> - there are other things in there, such as libraries. Plus there&#39;s an actual limit on the stack size (ulimit)"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443611242, "post_id": 32864428, "comment_id": 53561135, "body": "Could one print the addresses of objects from libraries? Say, &amp;stdin? Or stdin?"}, {"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "reply_to_user": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 0, "creation_date": 1443611411, "post_id": 32864428, "comment_id": 53561242, "body": "@Petesh This is the stack size: bf99c000-bfa39000 rw-p 00000000 00:00 0          [stack]"}, {"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 6, "creation_date": 1443611860, "post_id": 32864428, "comment_id": 53561516, "body": "@mohan Your stack size is probably limited by <code>ulimit</code>, which is (typically) 8MB. Even on a 32bit system, you will <i>never</i> get the stack to overlap with the data segment in that case; even if there wasn&#39;t a bunch of libraries between them. I&#39;m trying to guide you to understanding that an address map of a real process is different from the simple one you&#39;ve shown."}, {"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1443612174, "post_id": 32864428, "comment_id": 53561666, "body": "So, stack size is fixed. It doesn&#39;t gets grow upto data segment. Is it right?"}, {"owner": {"reputation": 7695, "user_id": 637866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a566553d97f6cdd46b6de6b26f47374?s=128&d=identicon&r=PG", "display_name": "ysdx", "link": "https://stackoverflow.com/users/637866/ysdx"}, "edited": false, "score": 1, "creation_date": 1443612389, "post_id": 32864428, "comment_id": 53561788, "body": "Try something like &quot;ulimit -s 65000000 ; ./a.out&quot; and it will last longer."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1443614153, "post_id": 32864428, "comment_id": 53562923, "body": "Side note - calling <code>main</code> is undefined behaviour, so your compiler is entitled to do whatever it likes with this..."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1443616152, "post_id": 32864428, "comment_id": 53564249, "body": "This is the first time i see main() function called recursively! isn&#39;t that dangerous?!"}, {"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "reply_to_user": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 0, "creation_date": 1443690586, "post_id": 32864428, "comment_id": 53597562, "body": "@Petesh Like stack limt, is there any way to find the heap limit"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1443690661, "post_id": 32864428, "comment_id": 53597615, "body": "@TobySpeight: Calling main is explicitely forbidden in C++ <i>3.6.1 Main function [basic.start.main] &#167;3: The function main shall not be used within a program</i>, but I could not find equivalent in C specifications, so it looks like it should be allowed - even if highly uncommon..."}, {"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 0, "creation_date": 1443691048, "post_id": 32864428, "comment_id": 53597840, "body": "The closest equivalent is <a href=\"http://man7.org/linux/man-pages/man2/getrlimit.2.html\" rel=\"nofollow noreferrer\"><code>RLIMIT_DATA</code></a>; which is reported in ulimit as the <code>Maximum size of a process\u2019s data segment</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1195, "user_id": 2135710, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bf7506c33964a671ef9555e3ee58aa8?s=128&d=identicon&r=PG", "display_name": "hazzelnuttie", "link": "https://stackoverflow.com/users/2135710/hazzelnuttie"}, "is_accepted": false, "score": 0, "last_activity_date": 1443613182, "last_edit_date": 1495540327, "creation_date": 1443613182, "answer_id": 32865148, "question_id": 32864428, "link": "https://stackoverflow.com/questions/32864428/memory-allocation-for-c-program/32865148#32865148", "title": "Memory allocation for C program", "body": "<p>'a' is a global variable and it will not be in stack. This will be in data section - i.e., initialized bss</p>\n\n<p>'i' is a local variable and will be stored in the stack.</p>\n\n<p>These are entirely different sections and hence the difference.</p>\n\n<p>Please refer <a href=\"https://stackoverflow.com/questions/1169858/global-memory-management-in-c-in-stack-or-heap\">Global memory management in C++ in stack or heap?</a></p>\n"}, {"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 0, "last_activity_date": 1443613542, "creation_date": 1443613542, "answer_id": 32865258, "question_id": 32864428, "link": "https://stackoverflow.com/questions/32864428/memory-allocation-for-c-program/32865258#32865258", "title": "Memory allocation for C program", "body": "<p>When you wrote <strong><em>variable \"i\" gets declared</em></strong>, you are writing something correct, but the variable is not declared as the global <code>a</code>.</p>\n\n<p><code>i</code> is stack allocated, and stack has its own size.</p>\n\n<p><code>ulimit</code> can change that limit.</p>\n\n<p>What you are trying to see, <em>collision between address allocation of a global variable and a local variable</em>, is not possible.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1443614944, "creation_date": 1443614944, "answer_id": 32865695, "question_id": 32864428, "link": "https://stackoverflow.com/questions/32864428/memory-allocation-for-c-program/32865695#32865695", "title": "Memory allocation for C program", "body": "<p>Your schema is a conceptual model or a possible implementation. But for example a multithreaded program will have one stack per thread and one single heap, which does not really fit in your simplified schema.</p>\n\n<p>All what is required is that the system allows recursion, meaning that each new invocation of a functions gets a private copy of local variables. All what remains is implementation dependant.</p>\n\n<p>Recent system use page allocation, and a process generally gets a set of page segments, but they are not necessarily consecutive, and you can have <em>holes</em> between them where any access will get a SIGSEGV (segment violation)</p>\n\n<p>TL/DR: you program will more likely get a SIGSEGV signal than the address of the dynamic variable reaching the address of static one - you should find an old MS/DOS box to exhibit such behaviour...</p>\n"}, {"tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": false, "score": 0, "last_activity_date": 1443617764, "creation_date": 1443617764, "answer_id": 32866695, "question_id": 32864428, "link": "https://stackoverflow.com/questions/32864428/memory-allocation-for-c-program/32866695#32866695", "title": "Memory allocation for C program", "body": "<p>The memory model you have is a huge oversimplification that's only useful to start teaching the basics of memory to students to not overwhelm them with details in the beginning. Just like we start math education with addition of natural numbers. It's a good fundament but it won't get you far if you use just that to understand reality.</p>\n\n<p>This model has not been accurate for at least 25-30 years and can't be used to make predictions about actual program behavior. There can be dozens, if not thousands, of other memory mappings between the heap and stack (shared libraries, large mallocs, mmap of files, etc.). The concept of \"heap\" is highly problematic because often it's not much more than the sum of all dynamic allocations of anonymous memory anywhere in the address space for purposes that the operating system didn't know beforehand.</p>\n\n<p>What's happening in your example is that you run into the stack resource limit (see <code>ulimit -s</code>).</p>\n"}], "owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 2, "answer_count": 4, "score": 11, "last_activity_date": 1443688986, "creation_date": 1443610885, "last_edit_date": 1443688986, "question_id": 32864428, "link": "https://stackoverflow.com/questions/32864428/memory-allocation-for-c-program", "title": "Memory allocation for C program", "body": "<p><strong>Program</strong></p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint a=10;\nvoid main()\n{\n    int i=0;\n    printf(\"global = %p, local = %p\\n\",&amp;a,&amp;i);\n    main();\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>mohanraj@ltsp63:~/Advanced_Unix/Chapter7$ ./a.out\nglobal = 0x804a014, local = 0xbfff983c\nglobal = 0x804a014, local = 0xbfff980c\n.\n.\n.\nglobal = 0x804a014, local = 0xbf7fac9c\nglobal = 0x804a014, local = 0xbf7fac6c\nglobal = 0x804a014, local = 0xbf7fac3c\nSegmentation fault (core dumped)\nmohanraj@ltsp63:~/Advanced_Unix/Chapter7$\n</code></pre>\n\n<p>The above program gets segmentation fault Error. Because, the main gets call itself recursively. The following is the memory \nallocation to a C program.</p>\n\n<p><strong>memory allocation</strong></p>\n\n<pre><code>          __________________                        __________________  \n          |                |                        |                | \n          |      stack     |                        |     Main       |\n          |  \u2193             |                        |----------------|\n          ------------------                        |     Main       | \n          |                |                        |----------------|\n          |   &lt;Un Allocated|                        |     Main       |\n          |       space&gt;   |                        |----------------|\n          ------------------                        |     Main       |\n          |                |                        |----------------|\n          |    \u2191           |                        |     Main       |\n          |       Heap     |                        |----------------|\n          |                |                        |     Main       |\n          |                |                        |----------------|\n          __________________                        |////////////////| ---&gt; Collision occurs. So, Segmentation fault Occurs.  \n          |                |                        |________________|\n          |       data     |                        |       data     |\n          __________________                        |________________|\n          |       text     |                        |       text     |\n          __________________                        |________________|\n               Figure(a)                               Figure(b)\n</code></pre>\n\n<p>So, I expect which is showed like in figure(b), the main call recursively. If it reaches the data segment, the collision occurs.\nIf it occurs, there is no more space to allocate for main function. So, it gets segmentation fault error. So using the above program I experiment it.\nOn that program, the address of global variable 'a' is \"0x804a014\". Each time main is called, the local variable \"i\" gets declared. So, I \nexpect, before the segmentation fault, the address of i is nearly to address of 'a'. But, both the address are very different. So what's here going on. </p>\n\n<p>Why the address of 'a' and 'i' is not in the same range at the time of segmentation fault error.  So, how to cross check whether the\nmain reaches the stack size and gets overflowed ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "edited": false, "score": 0, "creation_date": 1443610650, "post_id": 32864316, "comment_id": 53560786, "body": "Who downvoted my question?? Why???"}, {"owner": {"reputation": 182, "user_id": 793932, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/qeWLN.jpg?s=128&g=1", "display_name": "Ak\u0131n Y\u0131lmaz", "link": "https://stackoverflow.com/users/793932/ak%c4%b1n-y%c4%b1lmaz"}, "edited": false, "score": 2, "creation_date": 1443610689, "post_id": 32864316, "comment_id": 53560811, "body": "void functions returns nothing, int functions must return int.."}, {"owner": {"reputation": 1074, "user_id": 2506290, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EH4QK.jpg?s=128&g=1", "display_name": "Chanom First", "link": "https://stackoverflow.com/users/2506290/chanom-first"}, "edited": false, "score": 0, "creation_date": 1443610800, "post_id": 32864316, "comment_id": 53560880, "body": "it&#39;s difference between return type if you use int main you will return integer value before close main function but when use void you not return anything."}, {"owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "edited": false, "score": 0, "creation_date": 1443610807, "post_id": 32864316, "comment_id": 53560884, "body": "No I didn&#39;t copy any question. I just gave my one."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1443611113, "post_id": 32864316, "comment_id": 53561055, "body": "&quot;please mention what does &quot;void&quot; does, and what &quot;int&quot; does&quot; Finding a C book or tutorial too difficult?"}, {"owner": {"reputation": 50836, "user_id": 4953079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/krE6G.jpg?s=128&g=1", "display_name": "Matthias J. Sax", "link": "https://stackoverflow.com/users/4953079/matthias-j-sax"}, "edited": false, "score": 0, "creation_date": 1443611204, "post_id": 32864316, "comment_id": 53561108, "body": "As a beginner, you can treat them as equivalent. The program will do the same stuff. The difference is the return value that is provided to the operation system. If you start your program on command line, after program termination you can access the return code. If the returned code is zero, it indicate that the program run successful (this will also be returned if you use the <code>void</code> signature). All other values indicate an error in the program.      ./runVoidMain     echo $?     -&gt; 0     ./runIntMainWithReturnZero     echo $?     -&gt; 0     ./runIntMainWithReturnOne     echo $?     -&gt; 1"}, {"owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "edited": false, "score": 0, "creation_date": 1443611603, "post_id": 32864316, "comment_id": 53561367, "body": "I have books that use only one of the either ways. No book explained that matter."}, {"owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "edited": false, "score": 0, "creation_date": 1443612209, "post_id": 32864316, "comment_id": 53561682, "body": "Hey guys can you vote for undeleting this question : <a href=\"http://stackoverflow.com/questions/31493309/total-number-of-lines-in-notepad-or-sublime?noredirect=1#comment50950505_31493309\" title=\"total number of lines in notepad or sublime\">stackoverflow.com/questions/31493309/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1443610822, "post_id": 32864369, "comment_id": 53560895, "body": "I would upvote if you hadn&#39;t added that line about embedded systems, because it&#39;s sorely misleading."}, {"owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "edited": false, "score": 0, "creation_date": 1443610845, "post_id": 32864369, "comment_id": 53560906, "body": "Could you plz elaborate on this matter??"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1443611016, "post_id": 32864369, "comment_id": 53560992, "body": "@DevSolar How is it misleading? The format of main on an embedded system is not specified by the standard."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1443611026, "post_id": 32864369, "comment_id": 53560997, "body": "And what does the actually <b>relevant</b> ISO standard say?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1443611084, "post_id": 32864369, "comment_id": 53561034, "body": "@Olaf Depends on which version of the standard, and if it is a hosted or freestanding system, <a href=\"http://stackoverflow.com/a/31263079/584518\">see this</a>."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1443611276, "post_id": 32864369, "comment_id": 53561164, "body": "@Lundin: The standard states that in a hosted system there shall be a function <code>main</code>, and it shall return <code>int</code>. There are no specifications as to what a freestanding system does, so stating that &quot;you will use <code>void main</code>&quot; is misleading."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1443611296, "post_id": 32864369, "comment_id": 53561177, "body": "@Lundin: There is only one valid version of the standard and that is commonly called &quot;ISO&quot;, just because the ANSI is a national organisation. And, as you already commented, the standard does not specify a signature for freestanding implementations; not <code>void main(void)</code> as the answer states.."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1443611436, "post_id": 32864369, "comment_id": 53561255, "body": "@DevSolar: Not exactly. The standard goes one step further and states that a <a href=\"http://port70.net/~nsz/c/c11/n1570.html#5.1.2.1p1\" rel=\"nofollow noreferrer\">freestanding</a> environment may use any signature it wants."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1443611605, "post_id": 32864369, "comment_id": 53561368, "body": "Standards aside, I have yet to see an embedded system where the form of main was not <code>void main (void)</code>. Systems that don&#39;t have a main() at all, but just a reset vector are usually written in pure assembler."}, {"owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "edited": false, "score": 0, "creation_date": 1443611686, "post_id": 32864369, "comment_id": 53561414, "body": "Plz can you stop this fighting!!"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1443611731, "post_id": 32864369, "comment_id": 53561439, "body": "@Lundin: <a href=\"http://wiki.osdev.org/Bare_Bones\" rel=\"nofollow noreferrer\">OSDev BareBones kernel tutorial</a>. You asked. ;)"}, {"owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "edited": false, "score": 0, "creation_date": 1443612237, "post_id": 32864369, "comment_id": 53561703, "body": "Hey guys can you vote for undeleting this question : <a href=\"http://stackoverflow.com/questions/31493309/total-number-of-lines-in-notepad-or-sublime?noredirect=1#comment50950505_31493309\" title=\"total number of lines in notepad or sublime\">stackoverflow.com/questions/31493309/&hellip;</a>"}], "tags": [], "owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1443610699, "last_edit_date": 1495542236, "creation_date": 1443610699, "answer_id": 32864369, "question_id": 32864316, "link": "https://stackoverflow.com/questions/32864316/difference-between-void-main-and-int-main/32864369#32864369", "title": "Difference between &quot;void main&quot; and &quot;int main", "body": "<p>The ANSI standardization of C says that the main function must return an integer. But if you program embedded systems, for instance, then you will use <code>void main</code>. Please se this question for elaboration: <a href=\"https://stackoverflow.com/questions/204476/what-should-main-return-in-c-and-c\">What should main() return in C and C++?</a></p>\n"}, {"comments": [{"owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "edited": false, "score": 0, "creation_date": 1443611453, "post_id": 32864402, "comment_id": 53561265, "body": "It&#39;s perfect. It is useful for me."}, {"owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "edited": false, "score": 0, "creation_date": 1443611491, "post_id": 32864402, "comment_id": 53561295, "body": "I have accepted your answer. <b>THANKS</b>!!!"}, {"owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "edited": false, "score": 0, "creation_date": 1443612293, "post_id": 32864402, "comment_id": 53561732, "body": "Hey guys can you vote for <i>undeleting</i> this question : <a href=\"http://stackoverflow.com/questions/31493309/total-number-of-lines-in-notepad-or-sublime?noredirect=1#comment50950505_31493309\" title=\"total number of lines in notepad or sublime\">stackoverflow.com/questions/31493309/&hellip;</a>"}, {"owner": {"reputation": 843, "user_id": 5052899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/053cb37a159b38e8e66aff3e5cf0a6e5?s=128&d=identicon&r=PG&f=1", "display_name": "Vinoth", "link": "https://stackoverflow.com/users/5052899/vinoth"}, "edited": false, "score": 0, "creation_date": 1443612455, "post_id": 32864402, "comment_id": 53561819, "body": "In void main no need to use return. &#39; void main(){}&#39;. void means null. But using int means you should return some int value..otherwise it will show  the following error <b>&quot;Function expects to return some value&quot;</b>.."}], "tags": [], "owner": {"reputation": 2025, "user_id": 1359137, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/1da62381332ae241f4a28acf7c2f5f52?s=128&d=identicon&r=PG", "display_name": "Animesh Kumar Paul", "link": "https://stackoverflow.com/users/1359137/animesh-kumar-paul"}, "is_accepted": true, "score": 3, "last_activity_date": 1443610790, "creation_date": 1443610790, "answer_id": 32864402, "question_id": 32864316, "link": "https://stackoverflow.com/questions/32864316/difference-between-void-main-and-int-main/32864402#32864402", "title": "Difference between &quot;void main&quot; and &quot;int main", "body": "<p>The <code>int main()</code> and the <code>void main()</code> all do the same, which is process the main process of the program.</p>\n\n<p><code>void main()</code> it means that the functions main() does not return a value. </p>\n\n<p>The difference is <code>int main()</code> is the only right way of calling it, since every program, when called, returns an \"error message\" that the OS interprets, in which case, closing the program with a return 0; tells the process calling your program that it ended without a problem.</p>\n"}], "owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2417, "favorite_count": 1, "closed_date": 1443610949, "accepted_answer_id": 32864402, "answer_count": 2, "score": -2, "last_activity_date": 1461176801, "creation_date": 1443610540, "last_edit_date": 1461176801, "question_id": 32864316, "link": "https://stackoverflow.com/questions/32864316/difference-between-void-main-and-int-main", "closed_reason": "Duplicate", "title": "Difference between &quot;void main&quot; and &quot;int main", "body": "<p>I study C both from textbooks and websites. Somewhere the sample codes begin the program execution by \"void main\" and somewhere they begin the function with \"int main\". What's the difference, really? They both give the same result. Is there anything that makes them slightly  different? If so, please mention what does \"void\" does, and what \"int\" does.</p>\n"}, {"tags": ["c", "tabs", "space", "capture", "scanf"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1443627377, "post_id": 32864220, "comment_id": 53572110, "body": "What do you want with input like &quot;18[tab][tab]Nice to see you again&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1443627052, "post_id": 32864271, "comment_id": 53571866, "body": "1)  This will not work when spaces follow the tab as <code>&#39;\\t&#39;</code> consumes those too.  2) This will save nothing into <code>buffer</code>, leaving it as it was if input begins with <code>&#39;\\t&#39;</code> - yes checkig the return value helps, but this answer does not show what to do when that happens."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1443610557, "last_edit_date": 1443610557, "creation_date": 1443610396, "answer_id": 32864271, "question_id": 32864220, "link": "https://stackoverflow.com/questions/32864220/how-can-i-capture-with-fscanf-in-c-strings-from-a-file-separated-by-tabulators/32864271#32864271", "title": "How can I capture with fscanf, in C, strings from a file separated by tabulators", "body": "<p>Use a character set, i.e. <code>fscanf(file, \"%[^\\t]\\t\", buffer);</code></p>\n\n<p>The <code>^</code> means \"all characters except the following\".</p>\n\n<p>Remember to check the return value.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1443627281, "post_id": 32865839, "comment_id": 53572046, "body": "All these <code>fscanf()</code> save nothing into <code>buffer</code> leaving it as is, if there is not at least 1 matching <code>char</code>."}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1443630166, "post_id": 32865839, "comment_id": 53573966, "body": "@chux Thanks! I updated the answer by improved example. Indeed it is very easy to miss something with tricky operations in <code>scanf</code>. That is correct note that the example does not handle case &quot;18[tab][tab]Nice&quot; if the middle substring should be scanned as empty."}], "tags": [], "owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "is_accepted": false, "score": 0, "last_activity_date": 1443629905, "last_edit_date": 1443629905, "creation_date": 1443615392, "answer_id": 32865839, "question_id": 32864220, "link": "https://stackoverflow.com/questions/32864220/how-can-i-capture-with-fscanf-in-c-strings-from-a-file-separated-by-tabulators/32865839#32865839", "title": "How can I capture with fscanf, in C, strings from a file separated by tabulators", "body": "<p>According to your example you may also want to skip new line characters and other special control characters. You can use <code>scanf</code> string conversion <code>%[</code> to include wanted characters or to exclude unneeded, for example:</p>\n\n<pre><code>/* exclude only '\\t' and '\\n' */\nfscanf(file, \"%[^\\t\\n]\", buffer);\n/* include only alphanumeric characters and space */\nfscanf(file, \"%[0-9A-Za-z ]\", buffer);\n/* include all ASCII printable characters */\nfscanf(file, \"%[ -~]\", buffer);\n</code></pre>\n\n<p>You also should be sure that you have enough space in <code>buffer</code>. If you cannot control provided input string length it makes sense to limit the maximum field width using decimal integer number. Before starting parsing the next suitable string it is possible to skip all unwanted symbols. It can be done with opposite conversion pattern and assignment suppression modifier <code>%*</code>:</p>\n\n<pre><code>char buffer[101]; /* +1 byte for terminating '\\0' */\n\n/* Scan loop */\n{\n    /* Skip all non printable control characters */\n    fscanf(file, \"%*[^ -~]\");\n\n    /* Read up to 100 printable characters so the buffer cannot\n     * overflow. It is possible to run the following line in a loop\n     * to handle case when one string does not fit into single buffer\n     * checking function return value, since it will return 1\n     * if at least one wanted character is found */\n    fscanf(file, \"%100[ -~]\", buffer);\n\n    /*\n     * If scan would be performed only by the following line it is possible\n     * that nothing could be read if the first character is not matching\n     * fscanf(file, \"%100[ -~]%*[^ -~]\", buffer);\n     */\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4341341, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/da13403dabccc0ec764d7e4ba698cf29?s=128&d=identicon&r=PG&f=1", "display_name": "Pablo Ajo", "link": "https://stackoverflow.com/users/4341341/pablo-ajo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443629905, "creation_date": 1443610262, "question_id": 32864220, "link": "https://stackoverflow.com/questions/32864220/how-can-i-capture-with-fscanf-in-c-strings-from-a-file-separated-by-tabulators", "title": "How can I capture with fscanf, in C, strings from a file separated by tabulators", "body": "<p>For example the following text (in the file):</p>\n\n<p>18[tab]Robert[tab]Nice to see you again</p>\n\n<p>I want my code capture:\n- 18\n- Robert\n- Nice to see you again</p>\n\n<p>I tried it with fscanf(file,\"%s\\t\",buffer)\nbut it captured words separated by spaces</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "sockets", "proxy", "fork", "http-request"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1443610051, "post_id": 32863991, "comment_id": 53560438, "body": "Usual problems. No proper error handling. Ignoring the count returned by <code>recv()</code>. Unnecessary zeroing of buffers."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1443619645, "post_id": 32863991, "comment_id": 53566706, "body": "@EJP, The real problem is, as usual, not knowing how to manage null-terminated strings."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1443655841, "post_id": 32863991, "comment_id": 53585558, "body": "@SergeyA I can&#39;t agree with that formulation. There are no null-terminated string to handle in TCP. TCP code should not assume otherwise. It should use the count returned by <code>recv()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1443619953, "creation_date": 1443619953, "answer_id": 32867491, "question_id": 32863991, "link": "https://stackoverflow.com/questions/32863991/unable-to-get-my-proxy-server-to-send-http-requested-information-to-client-sock/32867491#32867491", "title": "unable to get my proxy server to send http requested information to client- Socket programming", "body": "<p>As usual, null-terminated strings are not managed properly here. When following construct is used </p>\n\n<pre><code>send(sock, buff, strlen(buf));\n</code></pre>\n\n<p>The trailing null-terminated character is not sent. On the receiving side, there are two problems. First, <code>recv(sock, buff, sizeof(buff));</code> can receive unpredictable amount of bytes - from 1 to the size of the string provided. So you need to read until you read all the message. Here comes the dilemma - how do you know how long is the actual message? The answer is that you either agree on the size of all the strings in advance, and than you always send that many bytes (regardless of actual string length) or you prefix the the string with it's size in the message. The second problem is that even if by luck the whole string is read, it is not null-terminated, and as such, unusable in the program. It has be null-terminated manually.</p>\n"}], "owner": {"reputation": 1, "user_id": 5378079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4c37d1260212e928f27b2ad2aa7a4c4?s=128&d=identicon&r=PG&f=1", "display_name": "sofuix", "link": "https://stackoverflow.com/users/5378079/sofuix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 741, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443619953, "creation_date": 1443609555, "question_id": 32863991, "link": "https://stackoverflow.com/questions/32863991/unable-to-get-my-proxy-server-to-send-http-requested-information-to-client-sock", "title": "unable to get my proxy server to send http requested information to client- Socket programming", "body": "<p>My objective of my programs is to implement a proxy server that can be connected by a single client and would only allow http request. </p>\n\n<p><strong>The Requirements</strong> </p>\n\n<ol>\n<li>To create a C based client-server architecture using sockets</li>\n<li>The proxy server should be able to accept and service single client's http requests</li>\n</ol>\n\n<hr>\n\n<p>Code </p>\n\n<p>client.c</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;sys/types.h&gt;\n    #include &lt;sys/socket.h&gt;\n    #include &lt;netinet/in.h&gt;\n    #include &lt;netdb.h&gt;\n    #include &lt;string.h&gt;\n    #include &lt;stdlib.h&gt;\n\n\n    int main(int argc, char *argv[]){\n\nint sockfd, portnum, n;\nstruct sockaddr_in serv_addr;\nstruct hostent *server;\n\nchar buffer[256];\nif(argc &lt; 3){\n  fprintf(stderr, \"usage %s hostname port\\n\", argv[0]);\n  exit(1);\n}\nportnum = atoi(argv[2]);\nsockfd= socket(AF_INET, SOCK_STREAM, 0);\n\nif(sockfd &lt;0){\n perror(\"ERROR opening Socket\");\n exit(1);\n}\nserver= gethostbyname(argv[1]);\nif(sockfd  == NULL){\n fprintf(stderr,\"ERROR, no such host\\n\");\n exit(1);\n}\nbzero((char *) &amp;serv_addr, sizeof(serv_addr));\nserv_addr.sin_family = AF_INET;\nbcopy((char *)server-&gt;h_addr,\n     (char *)&amp;serv_addr.sin_addr.s_addr,\n      server-&gt;h_length); \nserv_addr.sin_port = htons(portnum);\n\nif(connect(sockfd,(struct sockaddr *)&amp;serv_addr,sizeof(serv_addr)) &lt;0){\n fprintf(stderr,\"ERROR, on connecting\");\n exit(1);\n}\nprintf(\"Please enter the Host name: \");\nbzero(buffer,256);\nfgets(buffer,255,stdin);\nn=write(sockfd,buffer,strlen(buffer));\nif(n&lt;0){\n printf(\"Error writing to socket\");\n exit(1);\n}\n\nbzero(buffer,256);\nn=read(sockfd,buffer,255);\nif(n&lt;0){\n printf(\"ERROR reading from socket\");\n exit(1);\n}\nprintf(\"%s\\n\", buffer);\n\n\n    return 0;\n    }\n</code></pre>\n\n<p>Proxy server.c</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;sys/types.h&gt;\n    #include &lt;sys/socket.h&gt;\n    #include &lt;netinet/in.h&gt;\n    #include &lt;arpa/inet.h&gt;\n    #include &lt;unistd.h&gt;\n    #include &lt;sys/wait.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;netdb.h&gt;\n    #include &lt;string.h&gt;\n\n\n\n    int main(int argc, char *argv[]){\n\nint sockfd, newsockfd, portnum, clilen;\nchar buffer[256], hostname[256];\npid_t p_id;\nstruct sockaddr_in serv_addr, cli_addr;\nint n, pid;\n\nif(argc &lt; 2){\n    fprintf(stderr, \"ERROR, NO PORT PROVIDED!\\n\");\n    exit(1);\n}\nsockfd = socket(AF_INET, SOCK_STREAM, 0);//socket is made\n\nif(sockfd &lt; 0){\n    fprintf(stderr,\"ERROR opening socket!!\");\n    exit(1);\n}\nbzero((char *) &amp;serv_addr, sizeof(serv_addr));\nportnum = atoi(argv[1]);//port num\n\nserv_addr.sin_family = AF_INET;\nserv_addr.sin_addr.s_addr = htonl(INADDR_ANY);\nserv_addr.sin_port = htons(portnum);\n\n\nif(bind(sockfd, (struct sockaddr*)&amp;serv_addr, sizeof(serv_addr)) &lt; 0){\n    fprintf(stderr,\"ERROR on binding\");\n    exit(1);\n}\n\nif( listen(sockfd, 5) &lt; 0){\n printf(\"ERROR ON LISTEN\");\n exit(1);\n}\n\n    // accept\n        clilen = sizeof(cli_addr);\n    do{\n\nnewsockfd = accept(sockfd, (struct sockaddr *) &amp;cli_addr, &amp;clilen);\nif(newsockfd&lt;0){\n    fprintf(stderr,\"ERROR on accept\\n\");\n    exit(1);\n}\n\n    pid=fork();\n    if(pid==0){ \nbzero(buffer, 256);\nn= read(newsockfd, buffer, 255);\n\nif(n&lt;0){//message from client\n fprintf(stderr,\"ERROR Reading from socket\\n\");\n exit(1);\n}   \n\nstrcpy(hostname, buffer);\nprintf(\"Here is the hostname : %s\\n\", hostname);\n\n//variables used for acsessing webserver?\nint sockwb, wbport, x;\nstruct sockaddr_in webser_addr;\nstruct hostent *wbhost;\nchar webbuf[510];//sending to webserver\n\nwbport =80;//port used to access web server\n\n\n    sockwb = socket(AF_INET, SOCK_STREAM, 0);\n    if(sockwb &lt;0){\n        printf(\"error opeing websocket\\n\");\n        exit(1);\n    }\n    wbhost= gethostbyname(hostname);\n    printf(\"%s\", wbhost-&gt;h_name);\n    if(sockwb == -1){\n        printf(\"NO SUCH web HOST\\n\");\n        exit(1);\n    }\n    bzero((char*) &amp;webser_addr, sizeof(webser_addr));\n    webser_addr.sin_family = AF_INET;\n\n        bcopy((char *)wbhost-&gt;h_addr,               \n            (char *)&amp;webser_addr.sin_addr.s_addr,       \n            wbhost-&gt;h_length);              \n\n    webser_addr.sin_port = htons(wbport);   \n    if(connect(sockwb,(struct sockaddr *)&amp;webser_addr,sizeof(webser_addr)) &lt; 0){\n        printf(\"error on web connecting\\n\");\n        exit(1);\n    }\n    bzero(webbuf,510);\n    strcpy(webbuf, \"GET http://\");\n    strcat(webbuf, hostname);\n    strcat(webbuf, \" HTTP/1.1\");\n\n    printf(\"%s\\n\", webbuf);\n    x=write(sockwb,webbuf,strlen(webbuf));\n    if(x&lt;0){\n        printf(\"error writing to web sock\");\n        exit(1);\n    }   \n    bzero(webbuf,510);\n    x=read(sockwb,webbuf,510);\n    if(n&lt;0){    \n        printf(\"error reading from web socket\");\n        exit(1);\n    }   \n\nn = write(newsockfd, webbuf,255 );//write back to client\n\nif (n&lt;0){\n   fprintf(stderr,\"ERROR WRITING to socket\");\n   exit(1);\n}\n\nprintf(\"%s\\n\", webbuf);\n}//end of if pid==0\n\nprintf(\"closing client\");\nclose(newsockfd);//closing client socket\n\n\n    }while(1);\n    return 0;\n    }\n</code></pre>\n\n<hr>\n\n<p>I have been able to implement a simple client-server exchange with sockets, my issue is with the Http request. I do have to access the web server through port 80 using the GET Method.</p>\n\n<p>The way i have the input that the client is sending to the proxy server should be :     www.NAME.com</p>\n\n<p>The server doesn't seem to doing anything after the initial connection to the client.</p>\n"}, {"tags": ["c", "xml", "xpath", "libxml2", "onvif"], "answers": [{"tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": false, "score": 0, "last_activity_date": 1446915288, "creation_date": 1446915288, "answer_id": 33585288, "question_id": 32863759, "link": "https://stackoverflow.com/questions/32863759/filtering-xml-with-xpath-based-on-content-of-child-elements/33585288#33585288", "title": "Filtering XML with XPath based on content of child elements", "body": "<p>All you need are basic XPath expressions using <a href=\"http://www.w3.org/TR/xpath/#location-paths\" rel=\"nofollow\">location paths</a> and <a href=\"http://www.w3.org/TR/xpath/#predicates\" rel=\"nofollow\">predicates</a>:</p>\n\n<ol>\n<li><p>match any NotficationMessage whose topic is <code>tns1:RuleEngine/LineDetector/Crossed</code></p>\n\n<pre><code>//wsnt:NotificationMessage[wsnt:Topic = 'tns1:RuleEngine/LineDetector/Crossed']\n</code></pre></li>\n<li><p>match any NotficationMessage whose topic is <code>tns1:RuleEngine//.</code></p>\n\n<pre><code>//wsnt:NotificationMessage[wsnt:Topic = 'tns1:RuleEngine//.']\n</code></pre></li>\n<li><p>match any NotficationMessage whose topic is everything but <code>tns1:RuleEngine//.</code></p>\n\n<pre><code>//wsnt:NotificationMessage[wsnt:Topic != 'tns1:RuleEngine//.']\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 3800, "user_id": 795910, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/921b253c1d4b4aeaf444f8213c3b859e?s=128&d=identicon&r=PG", "display_name": "Ottavio Campana", "link": "https://stackoverflow.com/users/795910/ottavio-campana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 457, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446915499, "creation_date": 1443608824, "last_edit_date": 1446915499, "question_id": 32863759, "link": "https://stackoverflow.com/questions/32863759/filtering-xml-with-xpath-based-on-content-of-child-elements", "title": "Filtering XML with XPath based on content of child elements", "body": "<p>I need to filter the response of a SOAP web-service. Since SOAP is based on XML, I am thinking about using libxml2, but I am not able to understand how to write an XPath expression to achieve the desired result.</p>\n\n<p>At the end of the message you'll find an example of the response, where two NotficationMessages are sent, one has a topic <code>tns1:RuleEngine/LineDetector/Crossed</code> , the other one has topic <code>tns1:RuleEngine/CellMotionDetector/Motion</code> .</p>\n\n<p>I am trying to write the following XPath expressions:</p>\n\n<ul>\n<li>match any NotficationMessage whose topic is <code>tns1:RuleEngine/LineDetector/Crossed</code></li>\n<li>match any NotficationMessage whose topic is <code>tns1:RuleEngine//.</code></li>\n<li>match any NotficationMessage whose topic is everything but <code>tns1:RuleEngine//.</code></li>\n</ul>\n\n<p>All the examples I found match on attributes, not the content of child elements.</p>\n\n<p>So I'm asking.</p>\n\n<ol>\n<li>are this kinds of matching doable with libxml2 or with XPath in general?</li>\n<li>can you please give me a hint about writing the XPath expressions?</li>\n</ol>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n  &lt;SOAP-ENV:Envelope \n    xmlns:SOAP-ENV=\"http://www.w3.org/2003/05/soap-envelope\" \n    xmlns:wsa=\"http://www.w3.org/2005/08/addressing\" \n    xmlns:wstop=\"http://docs.oasis-open.org/wsn/t-1\" \n    xmlns:wsnt=\"http://docs.oasis-open.org/wsn/b-2\" \n    xmlns:tet=\"http://www.onvif.org/ver10/events/wsdl\" \n    xmlns:tns1=\"http://www.onvif.org/ver10/topics\"\n    xmlns:tt=\"http://www.onvif.org/ver10/schema\"&gt;\n    &lt;SOAP-ENV:Header&gt;\n      &lt;wsa:Action&gt;  http://www.onvif.org/ver10/events/wsdl/PullPointSubscription/PullMessagesResponse\n      &lt;/wsa:Action&gt;\n    &lt;/SOAP-ENV:Header&gt;\n    &lt;SOAP-ENV:Body&gt;\n      &lt;tet:PullMessagesResponse&gt;\n        &lt;tet:CurrentTime&gt;\n          2008-10-10T12:24:58\n        &lt;/tet:CurrentTime&gt;\n        &lt;tet:TerminationTime&gt;\n          2008-10-10T12:25:58\n        &lt;/tet:TerminationTime&gt;\n        &lt;wsnt:NotificationMessage&gt;\n          &lt;wsnt:Topic Dialect=\"http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet\"&gt;\n            tns1:RuleEngine/LineDetector/Crossed\n          &lt;/wsnt:Topic&gt;\n          &lt;wsnt:Message&gt;\n            &lt;tt:Message UtcTime=\"2008-10-10T12:24:57.321Z\"&gt;\n              &lt;tt:Source&gt;\n                &lt;tt:SimpleItem Name=\"VideoSourceConfigurationToken\"\n                               Value=\"1\"/&gt;\n                &lt;tt:SimpleItem Name=\"VideoAnalyticsConfigurationToken\"\n                               Value=\"2\"/&gt;\n                &lt;tt:SimpleItem Value=\"MyImportantFence1\" Name=\"Rule\"/&gt;\n              &lt;/tt:Source&gt;\n              &lt;tt:Data&gt;\n                &lt;tt:SimpleItem Name=\"ObjectId\" Value=\"15\" /&gt;\n              &lt;/tt:Data&gt;\n            &lt;/tt:Message&gt;\n          &lt;/wsnt:Message&gt;\n        &lt;/wsnt:NotificationMessage&gt;\n        &lt;wsnt:NotficationMessage&gt;\n          &lt;wsnt:Topic Dialect=\"http://www.onvif.org/ver10/tev/topicExpression/ConcreteSet\"&gt;\n           tns1:RuleEngine/CellMotionDetector/Motion\n          &lt;/wsnt:Topic&gt;\n          &lt;wsnt:Message&gt;\n            &lt;tt:Message UtcTime= \"2010-10-20T12:24:57.628\"&gt;\n              &lt;tt:Source&gt;\n               &lt;tt:SimpleItem Name=\"VideoSourceConfigurationToken\" Value=\"1\"/&gt;\n               &lt;tt:SimpleItem Name=\"VideoAnalyticsConfigurationToken\" Value=\"1\"/&gt;\n               &lt;tt:SimpleItem Name=\"Rule\" Value=\"MotionInDefinedCells\"/&gt;\n              &lt;/tt:Source&gt;  \n              &lt;tt:Data&gt;\n               &lt;tt:SimpleItem Name=\"IsMotion\" Value=\"true\"/&gt;\n              &lt;/tt:Data&gt;\n            &lt;/tt:Message&gt;\n          &lt;/wsnt:Message&gt;\n        &lt;/wsnt:NotficationMessage&gt;\n      &lt;/tet:PullMessagesResponse&gt;\n    &lt;/SOAP-ENV:Body&gt;\n&lt;/SOAP-ENV:Envelope&gt;\n</code></pre>\n"}, {"tags": ["c", "openssl", "rsa", "valgrind"], "comments": [{"owner": {"reputation": 475, "user_id": 5118690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a19269e7a06347dfe2c3a7e81d8d2df5?s=128&d=identicon&r=PG&f=1", "display_name": "Missu", "link": "https://stackoverflow.com/users/5118690/missu"}, "edited": false, "score": 1, "creation_date": 1443609065, "post_id": 32863717, "comment_id": 53559885, "body": "Take a look on <a href=\"https://www.openssl.org/docs/faq.html#PROG14\" rel=\"nofollow noreferrer\">openSSL FAQ</a> : section 14"}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 475, "user_id": 5118690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a19269e7a06347dfe2c3a7e81d8d2df5?s=128&d=identicon&r=PG&f=1", "display_name": "Missu", "link": "https://stackoverflow.com/users/5118690/missu"}, "edited": false, "score": 0, "creation_date": 1443609422, "post_id": 32863717, "comment_id": 53560091, "body": "@Missu Thanks. This might be the problem. I wonder why all my googling didn&#39;t find that link. However I have only the headers and the shared object of opensl. How ca I know if it was compiled with -DPURIFY?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1443609490, "post_id": 32863717, "comment_id": 53560126, "body": "Compile <i>openssl</i> from source with <code>-DPURIFY</code> flag if it&#39;s critical to you to debug a memory leak in a program using <code>openssl</code>. This is well known. Just download <i>openssl</i>&#39;s source code and untar it, then cd into the directory and type this <code>.&#47;Configure --prefix=&#47;usr --openssldir=&#47;etc&#47;ssl -shared -DPURIFY linux-(your arch)</code>. Also, why are you using such old versions?"}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1443610368, "post_id": 32863717, "comment_id": 53560615, "body": "@iharob Thank you. Believe me I didn&#39;t choose this version. This is the default openSSL version at the place where I work :)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1443615518, "post_id": 32863717, "comment_id": 53563815, "body": "Well they seem to use an old OS. Probably debian, no other distro uses such old software."}], "answers": [{"comments": [{"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 2, "creation_date": 1443632422, "post_id": 32864061, "comment_id": 53575271, "body": "Please add also this link (provided by @Missu) to strengthen your answer: <a href=\"https://www.openssl.org/docs/faq.html#PROG14\" rel=\"nofollow noreferrer\">openssl.org/docs/faq.html#PROG14</a>"}], "tags": [], "owner": {"reputation": 146, "user_id": 4295403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4aa6b8cf78795ac73ab6658492a295a?s=128&d=identicon&r=PG&f=1", "display_name": "Mag", "link": "https://stackoverflow.com/users/4295403/mag"}, "is_accepted": true, "score": 4, "last_activity_date": 1443683584, "last_edit_date": 1443683584, "creation_date": 1443609768, "answer_id": 32864061, "question_id": 32863717, "link": "https://stackoverflow.com/questions/32863717/why-rsa-generate-key-uses-uninitialized-values-according-to-valgrind/32864061#32864061", "title": "Why RSA_generate_key uses uninitialized values (according to valgrind)", "body": "<p>OpenSSL is using some uninitialized variables to generate the random data to genearate the key. Then Valgrind will complain, so it is not false positive. </p>\n\n<p>According to <a href=\"https://www.openssl.org/docs/faq.html#PROG14\" rel=\"nofollow\">openSSL FAQ</a>, to get rid of it, compile with -DPURIFY.\nHowever, you can debate whether it is a good idea to test a differently compiled binary than the production binary.</p>\n"}], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 633, "favorite_count": 0, "accepted_answer_id": 32864061, "answer_count": 1, "score": 2, "last_activity_date": 1443683584, "creation_date": 1443608734, "last_edit_date": 1443609628, "question_id": 32863717, "link": "https://stackoverflow.com/questions/32863717/why-rsa-generate-key-uses-uninitialized-values-according-to-valgrind", "title": "Why RSA_generate_key uses uninitialized values (according to valgrind)", "body": "<p>I have been working on something that involves cryptography. I must admit that my knowledge in cryptography is very basic. So I decided to see what does the <code>RSA</code> structure contains after RSA key is generated by <code>RSA_generate_key</code> from <code>openssl</code> library. But I got a segmentation fault:</p>\n\n<pre><code>const unsigned long e = 3;\nconst int num = 3072;   \n...\nRSA *rsa_key = RSA_generate_key(num, e, NULL, NULL);\nif (!rsa_key)\n{\n    printf(\"Failed to generate RSA key!\\n\");\n    return RSA_ERROR_CODE;\n}\n\nprintf(\"rsa-&gt;pad=0x%x\\n\", rsa_key-&gt;pad);\nprintf(\"rsa-&gt;version=0x%lx\\n\", rsa_key-&gt;version);\nif (rsa_key-&gt;n)\n{\n    printf(\"rsa-&gt;n-&gt;top=0x%x\\n\", rsa_key-&gt;n-&gt;top); // HERE I got the seg fault\n    ....\n</code></pre>\n\n<p>It looked very strange to me so I wrote a minimal code to test it with the <a href=\"http://valgrind.org/\" rel=\"nofollow\"><code>valgrind tool</code></a>. Here is the code in C:</p>\n\n<pre><code>#include \"openssl/rsa.h\"\n#include &lt;stdio.h&gt;\n\nint main()\n{       \n    const unsigned long e = 3;   // the exponent, 3 in QVRSA\n    const int num = 3072;   \n\n    RSA *rsa_key = RSA_generate_key(num, e, NULL, NULL);\n\n    if (rsa_key == NULL)\n    {\n        printf(\"RSA is invalid!\\n\");\n        return 1;\n    }\n\n    printf(\"rsa-&gt;pad=0x%x\\n\", rsa_key-&gt;pad);\n    printf(\"rsa-&gt;version=0x%lx\\n\", rsa_key-&gt;version);\n    if (rsa_key-&gt;n)\n    {\n        printf(\"rsa-&gt;n-&gt;top=0x%x\\n\", rsa_key-&gt;n-&gt;top);\n    }\n\n    RSA_free(rsa_key);\n    rsa_key = NULL;\n    return 0;\n}\n</code></pre>\n\n<p>The compilation line: <em>gcc rsa.c -lcrypto -g -O0 -o rsa</em></p>\n\n<p>This time there was no segmentation fault and the output was:</p>\n\n<pre><code>rsa-&gt;pad=0x0 \nrsa-&gt;version=0x0 \nrsa-&gt;n-&gt;top=0x30\n</code></pre>\n\n<p><strong>BUT</strong> <code>valgrind</code> fired plenty of error messages:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==6916== Conditional jump or move depends on uninitialised value(s)\n==6916==    at 0x4DAEB37: BN_bin2bn (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x4DB1B62: ??? (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x4DB4471: BN_generate_prime_ex (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x4DC8763: RSA_generate_key_ex (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x4DCB763: RSA_generate_key (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x40072E: main (rsa.c:9)\n==6916==  Uninitialised value was created by a heap allocation\n==6916==    at 0x4B23D6D: malloc (vg_replace_malloc.c:270)\n==6916==    by 0x4D8936A: CRYPTO_malloc (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x4DB1AD1: ??? (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x4DB4471: BN_generate_prime_ex (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x4DC8763: RSA_generate_key_ex (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x4DCB763: RSA_generate_key (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x40072E: main (rsa.c:9)\n\n==6916== Conditional jump or move depends on uninitialised value(s)\n==6916==    at 0x4DB44D0: BN_generate_prime_ex (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x4DC8763: RSA_generate_key_ex (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x4DCB763: RSA_generate_key (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x40072E: main (rsa.c:9)\n==6916==  Uninitialised value was created by a heap allocation\n==6916==    at 0x4B23D6D: malloc (vg_replace_malloc.c:270)\n==6916==    by 0x4D8936A: CRYPTO_malloc (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x4DB1AD1: ??? (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x4DB4471: BN_generate_prime_ex (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x4DC8763: RSA_generate_key_ex (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x4DCB763: RSA_generate_key (in /usr/lib64/libcrypto.so.0.9.8)\n==6916==    by 0x40072E: main (rsa.c:9)\n</code></pre>\n\n<p>And many others with <em>Conditional jump or move depends on uninitialised value(s)</em> title.</p>\n\n<p>Why? Is there a known bug in openSSL or it is just a false alarm and my original segmentation fault is related to some hidden bugs in my original code? </p>\n\n<p>I used:</p>\n\n<ul>\n<li><p>gcc v4.5.2</p></li>\n<li><p>valgrind v3.8.1</p></li>\n<li><p>OpenSSL 0.9.8a</p></li>\n</ul>\n"}, {"tags": ["c", "linux", "sockets", "udp", "posix"], "answers": [{"tags": [], "owner": {"reputation": 184, "user_id": 4555543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a965f614ae4114068d496503c86c2a7?s=128&d=identicon&r=PG&f=1", "display_name": "berthni", "link": "https://stackoverflow.com/users/4555543/berthni"}, "is_accepted": true, "score": 2, "last_activity_date": 1444034529, "last_edit_date": 1444034529, "creation_date": 1444031423, "answer_id": 32943638, "question_id": 32863475, "link": "https://stackoverflow.com/questions/32863475/how-to-not-receive-udp-datagrams-for-the-wrong-subnet-but-still-broadcasts/32943638#32943638", "title": "How to not receive UDP datagrams for the wrong subnet but still broadcasts?", "body": "<p>On your application server and if you don't care about other udp packets, you can set iptables rules like this :</p>\n\n<pre><code>iptables -F # flush filter rules\niptables -A INPUT -p udp -s 168.152.32.0/24 -d 162.152.32.222/32 -j ACCEPT # accept udp packets from 168.152.32.0/24 network to 162.152.32.222 host\niptables -A INPUT -p udp -s 168.152.32.0/24 -d 255.255.255.255/32 -j ACCEPT # accept udp packets from 168.152.32.0/24 network to 255.255.255.255/32 broadcast address \niptables -A INPUT -p udp -s 168.152.32.0/24 -d 168.152.32.255/32 -j ACCEPT # accept udp packets from 168.152.32.0/24 network to 168.152.32.255/32 broadcast address\niptables -A INPUT -p udp -j DROP # drop all other incoming udp packets\n</code></pre>\n\n<p>Or you should consider to accept all the broadcasted packets and then filter manualy the src addresses of your network in your code. The size of your network is small, may be filtering with IP_ADD_SOURCE_MEMBERSHIP setsockopt option is enough for you.</p>\n"}], "owner": {"reputation": 467, "user_id": 5118455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0da1391e8d298f6d4e2d1ac574e4546?s=128&d=identicon&r=PG&f=1", "display_name": "John Hammond", "link": "https://stackoverflow.com/users/5118455/john-hammond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 1, "accepted_answer_id": 32943638, "answer_count": 1, "score": 2, "last_activity_date": 1444034529, "creation_date": 1443607999, "last_edit_date": 1444024542, "question_id": 32863475, "link": "https://stackoverflow.com/questions/32863475/how-to-not-receive-udp-datagrams-for-the-wrong-subnet-but-still-broadcasts", "title": "How to not receive UDP datagrams for the wrong subnet but still broadcasts?", "body": "<p>I have an interface eth0 set up as 168.152.32.222 with netmask 255.255.255.0.</p>\n\n<p>My server application wants to receive now UDP datagrams with the following destination addresses on eth0:</p>\n\n<ol>\n<li>168.152.32.222</li>\n<li>168.152.32.255</li>\n<li>255.255.255.255</li>\n</ol>\n\n<p>This seems like a rather reasonable request, yet I can't get the socket bound properly.</p>\n\n<ul>\n<li>If I bind to 168.152.32.222, I don't receive the broadcasts.</li>\n<li>If I bind to INADDR_ANY, I get datagrams from all interfaces.</li>\n<li>If I bind to INADDR_ANY and SO_BINDTODEVICE, I get packets which arrive on eth0 for different subnets, like 168.152.47.x.</li>\n</ul>\n\n<p>In theory, I could just accept the datagrams and then filter all wrong packets out on my own with the netmask again - but seriously, some lower layer should do this, that's somehow the point of the netmask.</p>\n\n<p><strong>How to not receive UDP datagrams for the wrong subnet but still broadcasts?</strong></p>\n\n<p>A solution outside the server application is acceptable, too. I'm considering filtering the packets with iptables, not sure if this is feasible though and it would be the last resort.</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 1888, "user_id": 3881403, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61b50025bf8456821ba336828c25dafd?s=128&d=identicon&r=PG", "display_name": "Tobia Tesan", "link": "https://stackoverflow.com/users/3881403/tobia-tesan"}, "edited": false, "score": 1, "creation_date": 1443607698, "post_id": 32863341, "comment_id": 53559087, "body": "This is invalid C, but treating it as pseudocode, <code>a</code> <i>is</i> &quot;local&quot; (as in, in the same and in fact only scope I see there)."}, {"owner": {"reputation": 475, "user_id": 5118690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a19269e7a06347dfe2c3a7e81d8d2df5?s=128&d=identicon&r=PG&f=1", "display_name": "Missu", "link": "https://stackoverflow.com/users/5118690/missu"}, "edited": false, "score": 2, "creation_date": 1443607852, "post_id": 32863341, "comment_id": 53559172, "body": "<code>char a;</code>is a character. If you want to put a string in, you must use <code>char * a;</code> or <code>const char * a;</code>. Take a look on <a href=\"http://stackoverflow.com/questions/9834067/difference-between-char-and-const-char\">this post</a>."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1443608821, "creation_date": 1443608821, "answer_id": 32863757, "question_id": 32863341, "link": "https://stackoverflow.com/questions/32863341/set-i-th-of-array-pointer-as-variable-in-c/32863757#32863757", "title": "Set i-th of array pointer as variable in c", "body": "<p>You can of course index by variable, if that's what you're after:</p>\n\n<pre><code>char *a = \"string\", *b = \"string2\";\nsize_t index = 0;\nchar *args[3];\n\nargs[index++] = a;\nargs[index++] = b;\nargs[index++] = NULL;\n</code></pre>\n\n<p>I corrected the declarations of <code>a</code> and <code>b</code> to make them into pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": true, "score": 1, "last_activity_date": 1443609365, "creation_date": 1443609365, "answer_id": 32863944, "question_id": 32863341, "link": "https://stackoverflow.com/questions/32863341/set-i-th-of-array-pointer-as-variable-in-c/32863944#32863944", "title": "Set i-th of array pointer as variable in c", "body": "<p>Yes , you can do that but not with what you have right now . <code>a</code> and <code>b</code> has to be declared correctly-</p>\n\n<pre><code>char *a = \"string\";                //string literal (constant)\nchar *b = \"string2\";               // or write as char b[] = \"string2\"; \nchar *args[3];\nargs[0] = a;\nargs[1] = b;\nargs[2] = NULL;\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 3950004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/631aa20552cca5e078eac25d9bbf9e63?s=128&d=identicon&r=PG&f=1", "display_name": "CbeginnerXO", "link": "https://stackoverflow.com/users/3950004/cbeginnerxo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 32863944, "answer_count": 2, "score": -2, "last_activity_date": 1443609365, "creation_date": 1443607546, "question_id": 32863341, "link": "https://stackoverflow.com/questions/32863341/set-i-th-of-array-pointer-as-variable-in-c", "title": "Set i-th of array pointer as variable in c", "body": "<p>i am wondering is there any way to set i-th or string in pointer array to local variable?</p>\n\n<p>for example</p>\n\n<pre><code>char a = \"string\";\nchar b = \"string2\";\nchar *args[3];\nargs[0] = a;\nargs[1] = b;\nargs[2] = NULL;\n</code></pre>\n\n<p>therefore,</p>\n\n<pre><code>agrs = {\"string\",\"string2\",NULL};\n</code></pre>\n\n<p>thanks!</p>\n"}, {"tags": ["c", "csv"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1443605238, "post_id": 32862450, "comment_id": 53557670, "body": "Even if you do, that will overwrite the beginning of the next line.  I suggest writing to a different file."}, {"owner": {"reputation": 85, "user_id": 5320823, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7cc4d03657460a4d5b6aa321cc5c9801?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Yu", "link": "https://stackoverflow.com/users/5320823/alan-yu"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1443605625, "post_id": 32862450, "comment_id": 53557892, "body": "Hi @interjay , you are right. However, the file that I would like to add information into will be large so open a different file and write them will take a longer time if I only want to add a little information. For example, the file is 10G but I only add 100KB in it."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1443605985, "post_id": 32862450, "comment_id": 53558090, "body": "You simply can&#39;t add data in the middle of a file like that, you really have no choice than to write to a temporary file, then rename it over the original file when done. Also, having a 10G large CSV file? That alone is an enormous <a href=\"http://thedailywtf.com/\" rel=\"nofollow noreferrer\">WTF</a>! A 10G text file is a certain sign of something gone horribly wrong somewhere in the development process."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 3, "creation_date": 1443606082, "post_id": 32862450, "comment_id": 53558140, "body": "You possibly should consider to switch away entirely from csv file to some database. This is exactly the use case where with a (relational) database you would simply add another table..."}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1443607167, "post_id": 32862450, "comment_id": 53558771, "body": "10G csv file parsing :O ? IMHO a script would be better choice than a c - program for this."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1443607182, "post_id": 32862450, "comment_id": 53558779, "body": "And you think <i>inserting</i> into an existing file is faster? Likely not (it actually depends on the FS). The other comments are right - use a database."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1443607248, "post_id": 32862450, "comment_id": 53558821, "body": "@kkk: Why would it? There might be better languages for this, but they are also likely slower."}], "answers": [{"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": true, "score": 0, "last_activity_date": 1443606059, "creation_date": 1443606059, "answer_id": 32862835, "question_id": 32862450, "link": "https://stackoverflow.com/questions/32862450/how-to-write-new-string-in-the-end-of-the-line-in-csv-file-by-c/32862835#32862835", "title": "how to write new string in the end of the line in csv file by C", "body": "<p>Probably you need to follow couple more steps</p>\n\n<p>Open a temporary file along with existing file</p>\n\n<pre><code>FILE *file = fopen(fileName, \"r\");\nFILE *tmpFile = fopen(tempFileName, \"a+\" );\n</code></pre>\n\n<p>get a line from existing file, trim Next line append your fields after comma, probably create comma separated string of extra fields</p>\n\n<pre><code>while (fgets(line, LINE_SIZE, file)!= NULL){\n</code></pre>\n\n<p>Remove New line and add your paremeters</p>\n\n<pre><code>    if( line[ strlen(line) - 1  ] == '\\n' )\n        line[ strlen(line) - 1  ] = '\\0';\n\n    fprintf(tmpFile,\"%s,%s\\n\",line, your_field); // Write to temporary file\n}\n</code></pre>\n\n<p>Delete old file unlink is probably useful  </p>\n\n<pre><code>man -a unlink\n</code></pre>\n\n<p>and then rename temp file to original file </p>\n\n<pre><code>man -a rename\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 5140224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed591022683f255557d2f4e1ceb6c593?s=128&d=identicon&r=PG", "display_name": "Mirar", "link": "https://stackoverflow.com/users/5140224/mirar"}, "is_accepted": false, "score": 0, "last_activity_date": 1443606462, "creation_date": 1443606462, "answer_id": 32862963, "question_id": 32862450, "link": "https://stackoverflow.com/questions/32862450/how-to-write-new-string-in-the-end-of-the-line-in-csv-file-by-c/32862963#32862963", "title": "how to write new string in the end of the line in csv file by C", "body": "<p>There's no way of doing what you want. You can't insert bytes in the middle of a file. </p>\n\n<p>However, if you have spaces or something similar that allows bytes to be written into the file without overwriting data, you could accomplish something close to what you want. Say you have the lines</p>\n\n<pre><code>\"1,2,3,            \"\n\"4,5,6,            \"\n</code></pre>\n\n<p>(note the space) you could insert text there. I would use two file pointers:</p>\n\n<ul>\n<li>get the position from read file pointer when the line starts</li>\n<li>read the line using that file pointer</li>\n<li>add the number of bytes until the first space to the position</li>\n<li>seek on the other file pointer to this position</li>\n<li>write the new data and make sure there's enough space</li>\n</ul>\n\n<p>The first file pointer would be in \"read\" mode, the second in \"write\" mode and none in \"truncate\" because that would screw up your file.</p>\n\n<p>Or use a much better database format. ;)</p>\n"}], "owner": {"reputation": 85, "user_id": 5320823, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7cc4d03657460a4d5b6aa321cc5c9801?s=128&d=identicon&r=PG&f=1", "display_name": "Alan Yu", "link": "https://stackoverflow.com/users/5320823/alan-yu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 32862835, "answer_count": 2, "score": 1, "last_activity_date": 1443607186, "creation_date": 1443604977, "last_edit_date": 1443607186, "question_id": 32862450, "link": "https://stackoverflow.com/questions/32862450/how-to-write-new-string-in-the-end-of-the-line-in-csv-file-by-c", "title": "how to write new string in the end of the line in csv file by C", "body": "<p>I am writing a C code which need to add the new information in the end of the line if the condition match. </p>\n\n<pre><code>    FILE *file = fopen(fileName, \"r+\");\n\n    //read every line if line!=NULL\n    while (fgets(line, LINE_SIZE, file)!= NULL){\n        //split the line by sep\n        split(line, ',', fields);       \n        fprintf(file,\",%d,%d,%d\",D,F,G);\n   }\n</code></pre>\n\n<p>It is the code I try to write the matched information. However, it will write the information in the beginning of the line. Is that possible I can move the \"file\" pointer to the end of the line? </p>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 2175, "user_id": 3045171, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/le4e9.jpg?s=128&g=1", "display_name": "shapiro yaacov", "link": "https://stackoverflow.com/users/3045171/shapiro-yaacov"}, "edited": false, "score": 0, "creation_date": 1443602023, "post_id": 32861406, "comment_id": 53555545, "body": "At least one of the digits appears more than <code>x</code> times, or all digits?"}, {"owner": {"reputation": 2175, "user_id": 3045171, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/le4e9.jpg?s=128&g=1", "display_name": "shapiro yaacov", "link": "https://stackoverflow.com/users/3045171/shapiro-yaacov"}, "edited": false, "score": 0, "creation_date": 1443602078, "post_id": 32861406, "comment_id": 53555578, "body": "Also, what happens if a digit doesn&#39;t appear in the string to begin with?"}, {"owner": {"reputation": 9041, "user_id": 3216312, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/532212e9b26bc1e386a9f13dd8fa520a?s=128&d=identicon&r=PG&f=1", "display_name": "Petr", "link": "https://stackoverflow.com/users/3216312/petr"}, "edited": false, "score": 0, "creation_date": 1443602409, "post_id": 32861406, "comment_id": 53555766, "body": "And what if the sum of all queries is greater than the length of given string?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1443602535, "post_id": 32861406, "comment_id": 53555837, "body": "So it&#39;s O(n) to count the occurrences of each digit, and O(10) to figure out which digit is the best. Overall O(n). I don&#39;t see how you could do better than that."}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1443607872, "post_id": 32861406, "comment_id": 53559184, "body": "Either the question is too unclear to understand or @user3386109 &#39;s comment makes a lot of sense to me."}, {"owner": {"reputation": 93, "user_id": 5387808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/848ab18fba2d1d0814ec02c2fd04926c?s=128&d=identicon&r=PG&f=1", "display_name": "secretstuff", "link": "https://stackoverflow.com/users/5387808/secretstuff"}, "reply_to_user": {"reputation": 2175, "user_id": 3045171, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/le4e9.jpg?s=128&g=1", "display_name": "shapiro yaacov", "link": "https://stackoverflow.com/users/3045171/shapiro-yaacov"}, "edited": false, "score": 0, "creation_date": 1443630512, "post_id": 32861406, "comment_id": 53574175, "body": "@shapiroyaacov at least one of the digits. If a digit doesnt appear in the string, then the number of occurences of some other digit has to increase"}], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 812912, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732c48dee9ac15216258118fb8c0a764?s=128&d=identicon&r=PG", "display_name": "Ivaylo Strandjev", "link": "https://stackoverflow.com/users/812912/ivaylo-strandjev"}, "is_accepted": false, "score": 3, "last_activity_date": 1443603025, "creation_date": 1443603025, "answer_id": 32861792, "question_id": 32861406, "link": "https://stackoverflow.com/questions/32861406/least-cost-algorithm/32861792#32861792", "title": "Least cost algorithm", "body": "<p>You don't need the initial string - you only need the number of times each digit is met in it. Thus you can convert the string to an array of 10 ints-  the number of times each of the digits is met in the string. From there on you can use something like a brute force - for each digit X, assume that you want to have at least Q(query) X-s. Iterate over the remaining digits and greedily first convert the digits closer to X(again do that in the array of counts instead of the original string), you don't need to actually <strong>convert</strong> simply consider the number of times the given digit is met. This algorithm will end up with complexity in the order of O(10^3 + n) which is as good as you can get I think.</p>\n"}], "owner": {"reputation": 93, "user_id": 5387808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/848ab18fba2d1d0814ec02c2fd04926c?s=128&d=identicon&r=PG&f=1", "display_name": "secretstuff", "link": "https://stackoverflow.com/users/5387808/secretstuff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "closed_date": 1444797510, "answer_count": 1, "score": -2, "last_activity_date": 1444142655, "creation_date": 1443601810, "last_edit_date": 1444142655, "question_id": 32861406, "link": "https://stackoverflow.com/questions/32861406/least-cost-algorithm", "closed_reason": "Needs details or clarity", "title": "Least cost algorithm", "body": "<p>I came across this question in a contest and couldn't think of an algorithm other than the brute force method of checking and computing the cost with every digit in the string and then outputting the least cost.</p>\n\n<p>A string consisting of digits (0-9) is given and an integer <code>query</code> is given. We need to make sure that any of the digits in the string (0-9) is repeated >= <code>query</code> times. This is done by replacing individual digits in the string with another digit, and the cost of the operation is the difference between the replaced digit and the digit we are replacing with. Find the minimum cost to make sure that at least one digit exists in the string >= <code>query</code> number of times.</p>\n\n<p>Is there a good algorithm for this?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1443602370, "post_id": 32861356, "comment_id": 53555740, "body": "Long story, but it appears to be missing a concrete question. (For what it&#39;s worth, at a glance you seem to be doing it as asked.)"}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 1, "creation_date": 1443602735, "post_id": 32861356, "comment_id": 53555976, "body": "There is a lie in requirements: <i>&#39;each gap must have spaces added to it&#39;</i>. Cetrainly NOT! If the input line fits the given column width, or it is short say by one, then NO gap or at most one needs to have a space added."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1443603015, "post_id": 32861356, "comment_id": 53556165, "body": "Additionally there is no assumption about spaces in the input line \u2014 so there <i>may</i> be consecutive spaces, like <code>Hello,___my____little_kitty</code> (spaces replaced with underscores to circumvent the default HTML renderer space compression). Should on evenly distribute the spaces <i>being added</i> to the input string then, or <i>all spaces</i> in the resulting output string?"}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1443607369, "post_id": 32861356, "comment_id": 53558896, "body": "What should happen if the input line starts or ends with spaces? Should they be retained? Should the whitespace head or tail of the line be extended to the common width (equal to internal gaps)...?"}], "answers": [{"tags": [], "owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "is_accepted": true, "score": 0, "last_activity_date": 1443604174, "creation_date": 1443604174, "answer_id": 32862179, "question_id": 32861356, "link": "https://stackoverflow.com/questions/32861356/spliting-the-value-of-a-between-multiple-characters/32862179#32862179", "title": "Spliting the value of a % between multiple characters", "body": "<p>Lets see the example. It has 19 spaces to be filled in 4 gaps. If your code runs like that, the value of <code>space_power</code> will be 4 (int(19/4)), and this leaves 3 spaces in the end. You need to keep track of 19 % 4, ie. 3 extra spaces.</p>\n\n<p>So, keep a count, initially equal to 3. Then, while this count is greater than 0, print one extra space along with all <code>space_power</code> number of spaces. Decrease count every time you print a word.</p>\n\n<p>Your code would be like this:</p>\n\n<pre><code>count = remainder_space % space_count;\n</code></pre>\n\n<p>and output block:</p>\n\n<pre><code>i = 0;\nwhile(string[i] != '\\0'){\n    int k = count &gt; 0 ? 1 : 0;\n    if(string[i] == 0x20){\n        for(x = 0; x &lt; space_power + k; x++){\n            printf(\"%c\", 0x20);\n        }\n        count--;\n    }\n    printf(\"%c\", string[i]);\n    i++;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5392158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12655e9a233da9bb439a1c337ee4faf4?s=128&d=identicon&r=PG&f=1", "display_name": "Jadyn J", "link": "https://stackoverflow.com/users/5392158/jadyn-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 32862179, "answer_count": 1, "score": 0, "last_activity_date": 1443604174, "creation_date": 1443601635, "last_edit_date": 1443602200, "question_id": 32861356, "link": "https://stackoverflow.com/questions/32861356/spliting-the-value-of-a-between-multiple-characters", "title": "Spliting the value of a % between multiple characters", "body": "<p>I've been given an assignment question, and I've managed to figure it all out so far, with the exception of splitting a remainder value betwen a few (input determinate)  characters.\nAny help would be greatly appreciated.\nFor reference, my assignment question is:</p>\n\n<p>\"If you look at a newspaper you will see that the writing is justified to fit into the columns.  Write a program that reads in the width of the columns in a newspaper and then a line of text.  Justify the line of text to fit into a column of that width.  When your program is running, the screen should look something like this:</p>\n\n<pre>\nEnter the width of the column: 40\nEnter a line of text: Good morning how are you?\n12345678901234567890123456789012345678901234567890...\nGood     morning     how     are    you?\n</pre>\n\n<p>The justification is done by counting the number of gaps in the text.  In the above example, there are 4 gaps.  Then each gap must have spaces added to it.  The number of extra spaces must be shared out as evenly as possible.  In the above example, the first three gaps have 5 spaces each and the last gap has 4 spaces.</p>\n\n<p>Notes:</p>\n\n<ol>\n<li>If the text is longer than the column then you must report an error \u2013 don't try and break it into two lines!</li>\n<li>Assume that the text will have more than one word in it.</li>\n<li>Note the header line consisting of 123456789012345678....  this is useful to check your result.\n  You can make this header line as long as you like \u2013 70 spaces would be a useful length.</li>\n</ol>\n\n<p>\"</p>\n\n<p>And my code so  far is:</p>\n\n<pre><code>int main() {\n    //input column width\n    printf(\"Enter the width of the column: \");\n    int column;\n    scanf(\"%d\", &amp;column);\n\n    //input text line\n    printf(\"Enter a line of text: \");\n    char string[80];\n    getchar();\n    gets(string);\n\n    //print 1234567890 column header\n    int y = 1,x = 0;\n    while(x &lt; column){\n        if(y &gt; 9){\n            y = 0;\n        }\n        printf(\"%d\", y);\n        y++;\n        x++;\n    }\n    printf(\"\\n\");\n\n    //count spaces\n    int i = 0;\n    int space_count = 0;\n    while(string[i] != '\\0'){\n        if(string[i] == 0x20){\n            space_count++;\n        }\n        //printf(\"%c\", string[i]);\n        i++;\n    }\n\n    //work out variables\n    int string_length = i;\n    int remainder_space = (column - string_length);\n    int space_power = (remainder_space / space_count);\n    //int oddremainder = (space_count % remainder_space) ;\n    //space_power = (space_power + oddremainder);\n    //if\n    //remainder %\n\n    //insert column width check\n    if(string_length &gt; column)\n    {\n        printf(\"Text is too long. Shouldn't be more than %dcharacters\\n\",\n            column);\n        return 1;\n    }\n    //output\n    i = 0;\n    while(string[i] != '\\0'){\n        if(string[i] == 0x20){\n            for(x = 0; x &lt; space_power; x++){\n                printf(\"%c\", 0x20);\n            }\n        }\n        printf(\"%c\", string[i]);\n        i++;\n    }\n</code></pre>\n\n<p>I'm sorry if this isn't the appropriate way of asking a question, my brain is fried and I can't get  my head around this.\nAny pointers or discusion in the right direction would be greatly appreciated.</p>\n"}, {"tags": ["c", "getline", "scanf"], "comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 2, "creation_date": 1443599518, "post_id": 32860697, "comment_id": 53554160, "body": "There is a other way to do this .. You want <code>sscanf() </code> only?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1443599725, "post_id": 32860697, "comment_id": 53554265, "body": "You should have RTFM before asking here."}, {"owner": {"reputation": 65, "user_id": 1804737, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/05ab215b5ae973c22d0a8e8b157d80c2?s=128&d=identicon&r=PG", "display_name": "user1804737", "link": "https://stackoverflow.com/users/1804737/user1804737"}, "edited": false, "score": 0, "creation_date": 1443599886, "post_id": 32860697, "comment_id": 53554361, "body": "Yeah I only want to use sscanf(). Also, what is RTFM?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1443599972, "post_id": 32860697, "comment_id": 53554402, "body": "STFW for <a href=\"https://en.wikipedia.org/wiki/RTFM\" rel=\"nofollow noreferrer\">RTFM</a>."}, {"owner": {"reputation": 65, "user_id": 1804737, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/05ab215b5ae973c22d0a8e8b157d80c2?s=128&d=identicon&r=PG", "display_name": "user1804737", "link": "https://stackoverflow.com/users/1804737/user1804737"}, "edited": false, "score": 0, "creation_date": 1443600979, "post_id": 32860697, "comment_id": 53554932, "body": "I see. Well I have read the manual and I am still confused, shocker. Which is why I am posting here. No need to plague my post with your sour attitude"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1443601447, "post_id": 32860697, "comment_id": 53555192, "body": "But my answer pointed you to the two features of <code>sscanf</code> that are useful to you..."}, {"owner": {"reputation": 65, "user_id": 1804737, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/05ab215b5ae973c22d0a8e8b157d80c2?s=128&d=identicon&r=PG", "display_name": "user1804737", "link": "https://stackoverflow.com/users/1804737/user1804737"}, "edited": false, "score": 0, "creation_date": 1443601967, "post_id": 32860697, "comment_id": 53555512, "body": "I&#39;m not supposed to be using one of the functions you mentioned, and I just wanted some clarity on sscanf, but I do appreciate your help"}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1443599584, "creation_date": 1443599584, "answer_id": 32860749, "question_id": 32860697, "link": "https://stackoverflow.com/questions/32860697/iterating-with-sscanf/32860749#32860749", "title": "Iterating with sscanf", "body": "<p>Read much more about <a href=\"http://man7.org/linux/man-pages/man3/sscanf.3.html\" rel=\"nofollow\">sscanf(3)</a> and <a href=\"http://man7.org/linux/man-pages/man3/strtol.3.html\" rel=\"nofollow\">strtol(3)</a></p>\n\n<p>Notice that <code>sscanf</code> returns the number of scanned elements and accepts the <code>%n</code> conversion specifier (for the number of consumed <code>char</code>-s). Both are extremely useful in your case. And <code>strtol</code> manages the end pointer.</p>\n\n<p>So you could use that in a loop...</p>\n"}, {"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 2, "last_activity_date": 1443600976, "creation_date": 1443600976, "answer_id": 32861156, "question_id": 32860697, "link": "https://stackoverflow.com/questions/32860697/iterating-with-sscanf/32861156#32861156", "title": "Iterating with sscanf", "body": "<p>You can use <code>strtol</code> in a loop until you don't find the <code>NUL</code> character, if you need to store those numbers use an array:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAX_NUMBERS 10\n\nint main(void) \n{\n    char *str = \"12 45 16 789 99\";\n    char *end = str;\n    int numbers[MAX_NUMBERS];\n    int i, count = 0;\n\n    for (i = 0; i &lt; MAX_NUMBERS; i++) {\n        numbers[i] = (int)strtol(end, &amp;end, 10);\n        count++;\n        if (*end == '\\0') break;\n    }\n    for (i = 0; i &lt; count; i++) {\n        printf(\"%d\\n\", numbers[i]);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1443601896, "post_id": 32861324, "comment_id": 53555467, "body": "Probably better with <code>&quot;%d %n&quot;</code>"}], "tags": [], "owner": {"reputation": 475, "user_id": 5118690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a19269e7a06347dfe2c3a7e81d8d2df5?s=128&d=identicon&r=PG&f=1", "display_name": "Missu", "link": "https://stackoverflow.com/users/5118690/missu"}, "is_accepted": false, "score": 3, "last_activity_date": 1443601945, "last_edit_date": 1443601945, "creation_date": 1443601519, "answer_id": 32861324, "question_id": 32860697, "link": "https://stackoverflow.com/questions/32860697/iterating-with-sscanf/32861324#32861324", "title": "Iterating with sscanf", "body": "<p>Maybe something like that :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n  const char * str = \"10 202 3215 1\";\n  int i = 0;\n  unsigned int count = 0, tmp = 0;\n  printf(\"%s\\n\", str);\n  while (sscanf(&amp;str[count], \"%d %n\", &amp;i, &amp;tmp) != EOF) {\n    count += tmp;\n    printf(\"number %d\\n\", i);\n  }\n\n  return 0;\n}  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1450808847, "creation_date": 1450808847, "answer_id": 34422230, "question_id": 32860697, "link": "https://stackoverflow.com/questions/32860697/iterating-with-sscanf/34422230#34422230", "title": "Iterating with sscanf", "body": "<p>Use <code>\"%n\"</code> to record the count of characters scanned.</p>\n\n<pre><code>char *lineOfInts;\n\nchar *p = lineOfInts;\nwhile (*p) {\n  int n;\n  int number;\n  if (sscanf(p, \"%d %n\", &amp;number, &amp;n) == 0) {\n    // non-numeric input\n    break;\n  }\n  p += n;\n  printf(\"Number: %d\\n\", number);\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 1804737, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/05ab215b5ae973c22d0a8e8b157d80c2?s=128&d=identicon&r=PG", "display_name": "user1804737", "link": "https://stackoverflow.com/users/1804737/user1804737"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1450808847, "creation_date": 1443599396, "question_id": 32860697, "link": "https://stackoverflow.com/questions/32860697/iterating-with-sscanf", "title": "Iterating with sscanf", "body": "<p>I do not know much about the sscanf function, but what I am trying to do is iterate through a line of integers. Given the variable</p>\n\n<pre><code>    char *lineOfInts\n</code></pre>\n\n<p>I have made this the line that registers the users input. I am able to get the input fine, but when I try to use sscanf, I want to iterate through every int. I know that I can account through all the ints if i know how many ints there will be before hand like this..</p>\n\n<pre><code>   sscanf(lineOfInts, \"%d %d %d..etc\", &amp;i, &amp;j, &amp;k...) \n</code></pre>\n\n<p>but what if I don't know how many integers a user will input? How can I account for all of the integers with just one variable? like</p>\n\n<pre><code>   sscanf(lineOfInts, \"%d\", &amp;temp);\n   //modifying int\n   // jump to next int and repeat\n</code></pre>\n\n<p>thanks!</p>\n"}, {"tags": ["c", "memory", "memory-management", "binary"], "comments": [{"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1443599090, "post_id": 32860523, "comment_id": 53553909, "body": "See <a href=\"http://stackoverflow.com/questions/1746613/bitwise-operation-and-usage/1746642#1746642\" title=\"bitwise operation and usage\">stackoverflow.com/questions/1746613/bitwise-operation-and-us&zwnj;&#8203;age/&hellip;</a>"}, {"owner": {"reputation": 578, "user_id": 1243244, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c7036a428d113502d8fc2c04f1ff370?s=128&d=identicon&r=PG", "display_name": "light_keeper", "link": "https://stackoverflow.com/users/1243244/light-keeper"}, "edited": false, "score": 3, "creation_date": 1443599280, "post_id": 32860523, "comment_id": 53554026, "body": "See <a href=\"http://stackoverflow.com/questions/47981/how-do-you-set-clear-and-toggle-a-single-bit-in-c-c\" title=\"how do you set clear and toggle a single bit in c c\">stackoverflow.com/questions/47981/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 50933, "user_id": 360211, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/3baKW.png?s=128&g=1", "display_name": "weston", "link": "https://stackoverflow.com/users/360211/weston"}, "is_accepted": false, "score": 3, "last_activity_date": 1443599127, "creation_date": 1443599127, "answer_id": 32860603, "question_id": 32860523, "link": "https://stackoverflow.com/questions/32860523/changing-one-given-bit-in-a-binary-address-in-c/32860603#32860603", "title": "Changing one given bit in a binary address in C", "body": "<p>You can set one bit with a <code>|</code> bitwise or.</p>\n\n<pre><code>adr = adr | 0x10;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1911, "user_id": 5018771, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6dec254b17d75df0cfa8c42806cfca3f?s=128&d=identicon&r=PG&f=1", "display_name": "AdrienW", "link": "https://stackoverflow.com/users/5018771/adrienw"}, "edited": false, "score": 0, "creation_date": 1443707730, "post_id": 32860611, "comment_id": 53608416, "body": "This is almost what I looked for, but my address has void* for a type. And gcc won&#39;t let me compile this way. Do you know how to proceed ?"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 3, "last_activity_date": 1443707803, "last_edit_date": 1443707803, "creation_date": 1443599140, "answer_id": 32860611, "question_id": 32860523, "link": "https://stackoverflow.com/questions/32860523/changing-one-given-bit-in-a-binary-address-in-c/32860611#32860611", "title": "Changing one given bit in a binary address in C", "body": "<p>A tool? To manipulate bits? You don't need a \"tool\", that's about as primitive an operation as you can do.</p>\n\n<pre><code>uint32_t address = 0x0194;\n\naddress |= 1 &lt;&lt; 5; /* This sets the sixth bit. */\n</code></pre>\n\n<p>If you really want to <em>toggle</em> the bit, i.e. set if if it's clear, but clear it if it's set, you use the bitwise XOR operator:</p>\n\n<pre><code>address ^= 1 &lt;&lt; 5;\n</code></pre>\n\n<p>This is <strong>not</strong> \"exponentiation\", it's just a bitwise XOR.</p>\n\n<p>If the address is held in a pointer register, either cast or copy to integer (<code>uintptr_t</code>) and the copy back. </p>\n"}, {"comments": [{"owner": {"reputation": 1911, "user_id": 5018771, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6dec254b17d75df0cfa8c42806cfca3f?s=128&d=identicon&r=PG&f=1", "display_name": "AdrienW", "link": "https://stackoverflow.com/users/5018771/adrienw"}, "edited": false, "score": 0, "creation_date": 1443707741, "post_id": 32860627, "comment_id": 53608422, "body": "This is almost what I looked for, but my address has void* for a type. And gcc won&#39;t let me compile this way. Do you know how to proceed ?"}, {"owner": {"reputation": 8509, "user_id": 1068986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/1Xw9n.jpg?s=128&g=1", "display_name": "sansuiso", "link": "https://stackoverflow.com/users/1068986/sansuiso"}, "reply_to_user": {"reputation": 1911, "user_id": 5018771, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6dec254b17d75df0cfa8c42806cfca3f?s=128&d=identicon&r=PG&f=1", "display_name": "AdrienW", "link": "https://stackoverflow.com/users/5018771/adrienw"}, "edited": false, "score": 0, "creation_date": 1443709776, "post_id": 32860627, "comment_id": 53609873, "body": "Just cast your address to unsigned int, this should be enough for the compiler,"}, {"owner": {"reputation": 1911, "user_id": 5018771, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6dec254b17d75df0cfa8c42806cfca3f?s=128&d=identicon&r=PG&f=1", "display_name": "AdrienW", "link": "https://stackoverflow.com/users/5018771/adrienw"}, "edited": false, "score": 0, "creation_date": 1443712649, "post_id": 32860627, "comment_id": 53611941, "body": "I don&#39;t really understand. I&#39;ve tried the following :  <code>void* ptr1 = mmap(NULL, 640000, PROT_READ | PROT_WRITE, MAP_ANONYMOUS | MAP_FILE | MAP_PRIVATE, -1, 0);  \tprintf(&quot;%p\\n&quot;, ptr1);  \tvoid* ptr2 = ptr1+0x15f6d44;  \tprintf(&quot;%p\\n&quot;, ptr2);  \tvoid* ptr3 = (void*)(ptr2-ptr1);  \tprintf(&quot;%p\\n&quot;, ptr3);  \tvoid* ptr4 = ptr3 ^ (1 &lt;&lt; 6);  \tprintf(&quot;%p\\n&quot;, ptr4);</code>  And I&#39;m getting this error : <code>error: invalid operands to binary ^ (have \u2018void *\u2019 and \u2018int\u2019)</code>  What should I change ?"}, {"owner": {"reputation": 8509, "user_id": 1068986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/1Xw9n.jpg?s=128&g=1", "display_name": "sansuiso", "link": "https://stackoverflow.com/users/1068986/sansuiso"}, "reply_to_user": {"reputation": 1911, "user_id": 5018771, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6dec254b17d75df0cfa8c42806cfca3f?s=128&d=identicon&r=PG&f=1", "display_name": "AdrienW", "link": "https://stackoverflow.com/users/5018771/adrienw"}, "edited": false, "score": 0, "creation_date": 1443770831, "post_id": 32860627, "comment_id": 53633167, "body": "Please have a look at the updated answer. In a nutshell, you have to transform your void type to (unsigned) int, apply arithmetic operations on the int, then take the result back to the void* world."}, {"owner": {"reputation": 1911, "user_id": 5018771, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6dec254b17d75df0cfa8c42806cfca3f?s=128&d=identicon&r=PG&f=1", "display_name": "AdrienW", "link": "https://stackoverflow.com/users/5018771/adrienw"}, "edited": false, "score": 0, "creation_date": 1443867403, "post_id": 32860627, "comment_id": 53669723, "body": "This is amazing ! The double cast works perfectly, thanks so much"}], "tags": [], "owner": {"reputation": 8509, "user_id": 1068986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/1Xw9n.jpg?s=128&g=1", "display_name": "sansuiso", "link": "https://stackoverflow.com/users/1068986/sansuiso"}, "is_accepted": true, "score": 4, "last_activity_date": 1443770765, "last_edit_date": 1443770765, "creation_date": 1443599196, "answer_id": 32860627, "question_id": 32860523, "link": "https://stackoverflow.com/questions/32860523/changing-one-given-bit-in-a-binary-address-in-c/32860627#32860627", "title": "Changing one given bit in a binary address in C", "body": "<p>It looks like you just want to toggle a given bit, which is achieved using an XOR operation:</p>\n\n<pre><code>buddy_adr = (unsigned long)adr ^ (1 &lt;&lt; bit_location);\n</code></pre>\n\n<p>The cast to <code>unsigned long</code> is required to avoid errors of undefined XOR operation on type <code>void*</code>. </p>\n\n<p>Depending on your compiler settings, you may also get a warning about creating a pointer (i.e., an address) by casting an integer, which is obviously dangerous in the general case (you could pass an invalid address value). To silent this warning, cast back the result to <code>void*</code> to let the compiler know that you know what you are doing:</p>\n\n<pre><code>buddy_adr = (void *)((unsigned long(adr ^ (1 &lt;&lt; bit_location));\n</code></pre>\n\n<p>Note that in embedded system programming (where I've used this technique most of the time since many peripherals are memory-mapped) you would usually \"simplify\" this line of code using macros like <code>TOGGLE_BIT(addr, bit)</code> and <code>INT_TO_ADDR(addr)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1497, "user_id": 4843379, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a3681737b6e2ecc037c83474eed2309c?s=128&d=identicon&r=PG&f=1", "display_name": "incompetent", "link": "https://stackoverflow.com/users/4843379/incompetent"}, "is_accepted": false, "score": 2, "last_activity_date": 1443599259, "creation_date": 1443599259, "answer_id": 32860650, "question_id": 32860523, "link": "https://stackoverflow.com/questions/32860523/changing-one-given-bit-in-a-binary-address-in-c/32860650#32860650", "title": "Changing one given bit in a binary address in C", "body": "<p>This is case of bit manipulation which is very common in c programming\nif you want to change xxbxxxxx simply XOR this with xx1xxxxx. XOR topple the given bit. If you want to make it 1 just use OR (|) with all bits 0 except that bit 1 which you want to turn on</p>\n"}, {"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 1, "last_activity_date": 1443601978, "creation_date": 1443601978, "answer_id": 32861457, "question_id": 32860523, "link": "https://stackoverflow.com/questions/32860523/changing-one-given-bit-in-a-binary-address-in-c/32861457#32861457", "title": "Changing one given bit in a binary address in C", "body": "<p>a more compact way to do this </p>\n\n<pre><code>#define BIT_ON(x,bit)           (x |= ( 1 &lt;&lt; (bit-1)) )\n#define BIT_TOGGLE(x,bit)       (x ^= ( 1 &lt;&lt; (bit-1)) )\n#define BIT_OFF(x,bit)          (x &amp;= ~( 1 &lt;&lt; (bit-1)) )\n</code></pre>\n"}], "owner": {"reputation": 1911, "user_id": 5018771, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6dec254b17d75df0cfa8c42806cfca3f?s=128&d=identicon&r=PG&f=1", "display_name": "AdrienW", "link": "https://stackoverflow.com/users/5018771/adrienw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 32860627, "answer_count": 5, "score": 1, "last_activity_date": 1466600750, "creation_date": 1443598861, "last_edit_date": 1466600750, "question_id": 32860523, "link": "https://stackoverflow.com/questions/32860523/changing-one-given-bit-in-a-binary-address-in-c", "title": "Changing one given bit in a binary address in C", "body": "<p>I'm working on the \"buddy-allocation\" for a memory management project in C (see <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/vm-freespace.pdf\" rel=\"nofollow\">page 14 of this .pdf</a>).</p>\n\n<p>I'd like to find the \"buddy\" of a given address, knowing that the two buddies are only one-bit-different (the size of the chunk tells us which bit changes). For example, if one of the two 32-bits buddy chunks has the binary address 0b110<strong>0</strong>10100, the second one will be located at 0b110<strong>1</strong>10100 (the 6th bit from the right changes, as 32=2^(6-1)).</p>\n\n<p>I'd like to implement that in C, without exponentiation algorithms because I'm trying to make my program as fast-executing as possible. At best I'd use a tool to manipulate bits, if that exists. Any hints?</p>\n\n<p>EDIT: the type of the addresses is <strong>void*</strong>. With the solutions posted below, <em>gcc</em> won't let me compile.</p>\n\n<p>EDIT2: I've tried the answers posted below with the XOR operator, but I can't compile because of the type of the addresses. Here's what I've tried :</p>\n\n<pre><code>void* ptr1 = mmap(NULL, 640000, PROT_READ | PROT_WRITE, MAP_ANONYMOUS | MAP_FILE | MAP_PRIVATE, -1, 0);\n    printf(\"%p\\n\", ptr1);\n    void* ptr2 = ptr1+0x15f6d44;\n    printf(\"%p\\n\", ptr2);\n    void* ptr3 = (void*)(ptr2-ptr1);\n    printf(\"%p\\n\", ptr3);\n    void* ptr4 = ptr3 ^ (1 &lt;&lt; 6);\n    printf(\"%p\\n\", ptr4);\n</code></pre>\n\n<p>and the <em>gcc</em> error :</p>\n\n<pre><code>invalid operands to binary ^ (have \u2018void *\u2019 and \u2018int\u2019)\n</code></pre>\n"}, {"tags": ["sql", "c", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": false, "score": 0, "last_activity_date": 1443601653, "creation_date": 1443601653, "answer_id": 32861366, "question_id": 32860491, "link": "https://stackoverflow.com/questions/32860491/how-to-get-exact-sql-statement-sent-to-database/32861366#32861366", "title": "How to get exact SQL statement sent to database", "body": "<p>Both the original SQL statement and the bound parameter values are sent to the database.</p>\n\n<p>There is no mechanism to read out the parameter values.\nYou have to log the values when calling <code>sqlite3_bind_*</code>.</p>\n"}], "owner": {"reputation": 8058, "user_id": 619818, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qzq4k.jpg?s=128&g=1", "display_name": "Angus Comber", "link": "https://stackoverflow.com/users/619818/angus-comber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "closed_date": 1443955588, "answer_count": 1, "score": 0, "last_activity_date": 1443601653, "creation_date": 1443598773, "last_edit_date": 1443600647, "question_id": 32860491, "link": "https://stackoverflow.com/questions/32860491/how-to-get-exact-sql-statement-sent-to-database", "closed_reason": "Duplicate", "title": "How to get exact SQL statement sent to database", "body": "<p>I want to print out the exact SQL statement sent to the database for logging purposes.  I have looked at sqlite3_sql but it doesn't actually print out the SQL statement, just the original SQL I use as input to sqlite3_prepare_v2.</p>\n\n<p>Here is my function to add a value to a row which I want to also print the sql statement.</p>\n\n<pre><code>int add_value(sqlite3* db, sqlite3_stmt * stmt, const char* oid, const char* value)\n{\n    char sql[256] = {0};\n    sprintf(sql, \"UPDATE table1 SET Value=? WHERE Field1=\\\"%s\\\"\", oid);\n    printf(\"%s\\n\", sql);\n\n    int ret = ::sqlite3_prepare_v2(\n        db,\n        sql,\n        strlen(sql),\n        &amp;stmt,\n        0 );\n\n    /* How do I print out the sql statement to be sent to the database? */\n\n    ret = ::sqlite3_bind_text( stmt, 1, value, strlen(value), 0 );\n    ret = sqlite3_step(stmt);\n\n    return ret;\n}\n</code></pre>\n\n<p>For a bit of background I am inserting integers and strings into the database.  So the use of ? was to simplify the handling of the string - ie whether to put quotes round the value or not dependent on data type.  But for debugging purposes I do want to log the sql statements.</p>\n"}, {"tags": ["c", "sockets", "getaddrinfo", "sockaddr-in"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1443599137, "post_id": 32860395, "comment_id": 53553937, "body": "Well of course it changes. That&#39;s what the function is suppose to do. You should bind with the old address before you get the new address. Or use two address structures. Surely this is obvious?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1443599489, "post_id": 32860395, "comment_id": 53554147, "body": "I doubt that <code>p-&gt;ai_addr</code> (a.k.a. <code>destination_addr</code>) is a valid pointer after <code>freeaddrinfo</code>."}, {"owner": {"reputation": 2518, "user_id": 790436, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/be53188cd185b0a44e3a2b16933f1732?s=128&d=identicon&r=PG", "display_name": "joanlofe", "link": "https://stackoverflow.com/users/790436/joanlofe"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1443602552, "post_id": 32860395, "comment_id": 53555856, "body": "@EJP I am using two address structures, <code>destination_addr</code> and  <code>source_addr_info-&gt;ai_addr</code>. There should be no reason why calling <code>getaddrinfo</code> on <code>source_addr_info</code> should change the value of <code>destination_addr</code>. Unless, as @molbdnilo points out, the memory freed by <code>freeaddrinfo</code> is overwritten by the call to <code>getaddrinfo</code>. I will follow that path to solve the problem."}, {"owner": {"reputation": 2518, "user_id": 790436, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/be53188cd185b0a44e3a2b16933f1732?s=128&d=identicon&r=PG", "display_name": "joanlofe", "link": "https://stackoverflow.com/users/790436/joanlofe"}, "edited": false, "score": 0, "creation_date": 1443608534, "post_id": 32860395, "comment_id": 53559544, "body": "I really can not understand why this question has been downvoted."}], "answers": [{"tags": [], "owner": {"reputation": 2518, "user_id": 790436, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/be53188cd185b0a44e3a2b16933f1732?s=128&d=identicon&r=PG", "display_name": "joanlofe", "link": "https://stackoverflow.com/users/790436/joanlofe"}, "is_accepted": true, "score": 1, "last_activity_date": 1443604299, "creation_date": 1443604299, "answer_id": 32862220, "question_id": 32860395, "link": "https://stackoverflow.com/questions/32860395/sockaddr-value-changes-unexpectedly-after-calling-getaddrinfo/32862220#32862220", "title": "sockaddr value changes unexpectedly after calling getaddrinfo()", "body": "<p>Solved. As @molbdnilo pointed out, the error was caused by the call to <code>freeaddrinfo</code>. To fix it I now copy the value pointed by <code>p-&gt;ai_addr</code>, so that it is not lost when freeing. I substituted:</p>\n\n<pre><code>if (p-&gt;ai_addr != NULL)\n    destination_addr = (struct sockaddr_in *) p-&gt;ai_addr;\n</code></pre>\n\n<p>with </p>\n\n<pre><code>if (p-&gt;ai_addr != NULL){\n    destination_addr = malloc(sizeof *destination_addr);\n    memcpy(destination_addr, (struct sockaddr_in *)p-&gt;ai_addr, sizeof *p-&gt;ai_addr);\n}\n</code></pre>\n\n<p>and it worked.</p>\n"}], "owner": {"reputation": 2518, "user_id": 790436, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/be53188cd185b0a44e3a2b16933f1732?s=128&d=identicon&r=PG", "display_name": "joanlofe", "link": "https://stackoverflow.com/users/790436/joanlofe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 32862220, "answer_count": 1, "score": 2, "last_activity_date": 1443604299, "creation_date": 1443598452, "question_id": 32860395, "link": "https://stackoverflow.com/questions/32860395/sockaddr-value-changes-unexpectedly-after-calling-getaddrinfo", "title": "sockaddr value changes unexpectedly after calling getaddrinfo()", "body": "<p>I am programming an UDP client. I want to bind the socket to a given port on the client machine, so that the same port is always used for all sends. I get the sockaddr for the server using getaddrinfo, and I do the same to get the sockaddr which I pass to the call to getaddrinfo. However, after the second call to getaddrinfo the address of the server machine changes, and I end up sending the packet from the client machine to the client machine itself. </p>\n\n<p>The following code is a standalone example that reproduces the error:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n\n#define SERVER_HOST \"www.google.com\"\n#define UDP_PORT \"4000\"\n\nstatic struct sockaddr_in *destination_addr = NULL;\nstatic int client_port;\n\nint main(){\n\n    uint8_t bytes[5] = { 0xaa, 0xab, 0xac, 0xad, 0xaf}; //some data to send\n\n    uint16_t length = 5;\n    int status;\n\n\n    //initialize socket and bind\n    if (destination_addr == NULL) {\n        struct addrinfo hints;\n        struct addrinfo *servinfo, *p;\n        srand(time(NULL));\n        memset(&amp;hints, 0, sizeof hints);\n        hints.ai_family = AF_INET;\n        hints.ai_socktype = SOCK_DGRAM;\n        hints.ai_flags = AI_PASSIVE;\n\n        if ((status = getaddrinfo(SERVER_HOST, UDP_PORT, &amp;hints, &amp;servinfo)) != 0) {\n            printf(\"Unable to send UDP. Reason: %s\", gai_strerror(status));\n            return 0;\n        }\n\n\n        for (p = servinfo; p != NULL; p = p-&gt;ai_next) {\n            if (p-&gt;ai_addr != NULL)\n                destination_addr = (struct sockaddr_in *) p-&gt;ai_addr;\n        }\n        client_port = 1027 + rand()%50000;\n        freeaddrinfo(servinfo);\n        printf(\"Created destination_addr with IP %s\\n\",  inet_ntoa(destination_addr-&gt;sin_addr));\n    }\n\n\n    int send_socket_fd = socket(AF_INET, SOCK_DGRAM, 0);\n    if (send_socket_fd == -1) {\n        printf(\"Unable to create UDP socket. Reason: %s\", strerror(errno));\n        return 0;\n    }\n    printf(\"IP after socket creation is %s\\n\", inet_ntoa(destination_addr-&gt;sin_addr));\n    int yes = 1;\n    if (setsockopt(send_socket_fd, SOL_SOCKET, SO_REUSEADDR, &amp;yes, sizeof (int)) == -1) {\n        perror(\"setsockopt\");\n        return 0;\n    }\n    printf(\"IP after sockopt is %s\\n\", inet_ntoa(destination_addr-&gt;sin_addr));\n\n    // bind to local address\n    char str_client_port[6];\n    snprintf(str_client_port, 5, \"%d\", client_port);\n    struct addrinfo *source_addr_info;\n    struct addrinfo hints;\n    hints.ai_family = AF_INET;\n    hints.ai_socktype = SOCK_DGRAM;\n\n\n    // ***** destination_addr changes after this call *****\n    getaddrinfo (NULL, str_client_port, &amp;hints, &amp;source_addr_info); \n\n\n    printf(\"IP after getaddrinfo is %s\\n\", inet_ntoa(destination_addr-&gt;sin_addr));\n    bind(send_socket_fd, source_addr_info-&gt;ai_addr, source_addr_info-&gt;ai_addrlen);\n    printf(\"IP after binding is %s\\n\", inet_ntoa(destination_addr-&gt;sin_addr));\n\n    // send\n    int bytes_sent = sendto(send_socket_fd, bytes, length, 0, (struct sockaddr *)destination_addr, sizeof *destination_addr);\n    printf(\"Sent to IP %s\\n\", inet_ntoa(destination_addr-&gt;sin_addr));\n    if (bytes_sent != length){\n        if (bytes_sent == -1){\n            printf(\"UDP send failed. Reason: %s\", strerror(errno));\n        }\n        else {\n            printf(\"UDP: not all bytes could be sent.\");\n        }\n    }\n\n\n    close(send_socket_fd);\n    return 1;\n\n}\n</code></pre>\n\n<p>The output generated by the execution of this program in my machine is:</p>\n\n<pre><code>Created destination_addr with IP 64.233.167.105\nIP after socket creation is 64.233.167.105\nIP after sockopt is 64.233.167.105\nIP after getaddrinfo is 0.0.0.0\nIP after binding is 0.0.0.0\nSent to IP 0.0.0.0\n</code></pre>\n\n<p>I am rather new to socket programming in C, and pretty sure I am doing some silly mistake, but after googling a lot and trying many things, I am still stuck with this. Any idea? </p>\n"}, {"tags": ["java", "android", "c", "android-ndk", "java-native-interface"], "comments": [{"owner": {"reputation": 14542, "user_id": 755804, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f26c355432581b8b1fc56f8585732d1a?s=128&d=identicon&r=PG", "display_name": "18446744073709551615", "link": "https://stackoverflow.com/users/755804/18446744073709551615"}, "edited": false, "score": 0, "creation_date": 1443611890, "post_id": 32860294, "comment_id": 53561530, "body": "did you see <a href=\"http://stackoverflow.com/questions/32425865/race-condition-in-android-dlopen/32460683#32460683\" title=\"race condition in android dlopen\">stackoverflow.com/questions/32425865/&hellip;</a> ?"}, {"owner": {"reputation": 45, "user_id": 4493926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6749bf90141208d1956fe23607221884?s=128&d=identicon&r=PG&f=1", "display_name": "homelesser", "link": "https://stackoverflow.com/users/4493926/homelesser"}, "reply_to_user": {"reputation": 14542, "user_id": 755804, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f26c355432581b8b1fc56f8585732d1a?s=128&d=identicon&r=PG", "display_name": "18446744073709551615", "link": "https://stackoverflow.com/users/755804/18446744073709551615"}, "edited": false, "score": 0, "creation_date": 1444268616, "post_id": 32860294, "comment_id": 53835198, "body": "They are not the same problems. I also use &quot;System.loadlibrary()&quot; as you metioned. and if it fails, I will unzip a so file from the apk, and reload it. Most of the time, it can work well, but sometimes crashes. In other words, I cannot make it crash on my own phone, however, it crashes on other users&#39; who use my app."}, {"owner": {"reputation": 5858, "user_id": 3559670, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SGhF4.png?s=128&g=1", "display_name": "KishuDroid", "link": "https://stackoverflow.com/users/3559670/kishudroid"}, "edited": false, "score": 0, "creation_date": 1444372869, "post_id": 32860294, "comment_id": 53884952, "body": "try this :<a href=\"http://stackoverflow.com/questions/15204492/system-loadlibrary-error\" title=\"system loadlibrary error\">stackoverflow.com/questions/15204492/system-loadlibrary-err&zwnj;&#8203;or</a>"}, {"owner": {"reputation": 45, "user_id": 4493926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6749bf90141208d1956fe23607221884?s=128&d=identicon&r=PG&f=1", "display_name": "homelesser", "link": "https://stackoverflow.com/users/4493926/homelesser"}, "reply_to_user": {"reputation": 5858, "user_id": 3559670, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SGhF4.png?s=128&g=1", "display_name": "KishuDroid", "link": "https://stackoverflow.com/users/3559670/kishudroid"}, "edited": false, "score": 0, "creation_date": 1444617700, "post_id": 32860294, "comment_id": 53962848, "body": "@KishuDroid They are not similar problems. My app can work well on most phones without other errors and crashes."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1444915337, "post_id": 32860294, "comment_id": 54108723, "body": "I have never experienced this problem, but it is quite possible that native loader on some 4.0.x devices is not stable enough. One bug in that loader made a fool of itself when both <b>armeabi</b> and <b>armeabi-v7a</b> variants of the libraries were available. Anyways, one cure would be to add <code>try \u2026 catch</code> around <b>System.loadLibrary(&quot;main&quot;)</b> and retry. Another cure - to explicitly call <b>System.loadLibrary(&quot;c&quot;)</b> before <b>main</b>."}, {"owner": {"reputation": 45, "user_id": 4493926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6749bf90141208d1956fe23607221884?s=128&d=identicon&r=PG&f=1", "display_name": "homelesser", "link": "https://stackoverflow.com/users/4493926/homelesser"}, "reply_to_user": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1444966169, "post_id": 32860294, "comment_id": 54132839, "body": "@AlexCohn I agree with u very much. : )"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4493926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6749bf90141208d1956fe23607221884?s=128&d=identicon&r=PG&f=1", "display_name": "homelesser", "link": "https://stackoverflow.com/users/4493926/homelesser"}, "edited": false, "score": 0, "creation_date": 1444371522, "post_id": 33029653, "comment_id": 53884334, "body": "It will crash rarely if I call System.loadLibrary() like yours. I tried another way. When I construct a single instance I call System.loadLibrary(), if failure comes, I unzip a so file from the apk file, and call System.load(). However it is no help. By the way, it crashes on many versions of android os(4.0.3 - 5.1), and easier on 4.0.3 &amp; 4.0.4 comparatively."}, {"owner": {"reputation": 45, "user_id": 4493926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6749bf90141208d1956fe23607221884?s=128&d=identicon&r=PG&f=1", "display_name": "homelesser", "link": "https://stackoverflow.com/users/4493926/homelesser"}, "edited": false, "score": 0, "creation_date": 1444372414, "post_id": 33029653, "comment_id": 53884732, "body": "I update the question. Any idea about the __cxa_atexit ?"}, {"owner": {"reputation": 179, "user_id": 4649506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e325c3981ef57ddf58345a852e7be9?s=128&d=identicon&r=PG&f=1", "display_name": "SHICONG CAO", "link": "https://stackoverflow.com/users/4649506/shicong-cao"}, "reply_to_user": {"reputation": 45, "user_id": 4493926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6749bf90141208d1956fe23607221884?s=128&d=identicon&r=PG&f=1", "display_name": "homelesser", "link": "https://stackoverflow.com/users/4493926/homelesser"}, "edited": false, "score": 0, "creation_date": 1444372575, "post_id": 33029653, "comment_id": 53884808, "body": "Since you can load the library in most case and crash rarely, I suggest you to debug your so library(if you have the source code), some external dependencies loaded in your so library may cause the issue"}], "tags": [], "owner": {"reputation": 179, "user_id": 4649506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e325c3981ef57ddf58345a852e7be9?s=128&d=identicon&r=PG&f=1", "display_name": "SHICONG CAO", "link": "https://stackoverflow.com/users/4649506/shicong-cao"}, "is_accepted": false, "score": -1, "last_activity_date": 1444362889, "last_edit_date": 1495541245, "creation_date": 1444362889, "answer_id": 33029653, "question_id": 32860294, "link": "https://stackoverflow.com/questions/32860294/android-load-library-failed/33029653#33029653", "title": "android load library failed", "body": "<p>Firstly, please make sure that you called System.loadLibrary() like below:</p>\n\n<pre><code>public class MainActivity extends Activity {\n    static {\n        System.loadLibrary(\"main\")\n    }\n    ...\n}\n</code></pre>\n\n<p>Then, according to <a href=\"https://stackoverflow.com/questions/8562706/android-system-loadlibrary-stalls-while-loading-native-library\">the second answer in this post</a>,\nthe problem was with some external dependencies that were loaded statically in your native library. They were only hanging on Android 4.0 and it was running fine 4.2 and up.So you should check your so file.</p>\n\n<p>I just put his answer here:</p>\n\n<p>if you have the problem, put a __android_log_print in the JNI_onLoad of your library (if you have one). If it is not called, check all the functions that can be called statically (beware, some might be hidden behind macros) and try to remove them to see if your able to load the library</p>\n"}], "owner": {"reputation": 45, "user_id": 4493926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6749bf90141208d1956fe23607221884?s=128&d=identicon&r=PG&f=1", "display_name": "homelesser", "link": "https://stackoverflow.com/users/4493926/homelesser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2543, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1447321867, "creation_date": 1443598101, "last_edit_date": 1495542656, "question_id": 32860294, "link": "https://stackoverflow.com/questions/32860294/android-load-library-failed", "title": "android load library failed", "body": "<p>When I use <code>System.loadLibrary()</code> to load my so file, rarely, it fails and the Logcat says </p>\n\n<pre><code>Cannot load library: reloc_library[1286]: 121 cannot locate '__cxa_atexit'\njava.lang.UnsatisfiedLinkError: Cannot load library: reloc_library[1285]:   169 cannot locate '__cxa_atexit'...\nat java.lang.Runtime.loadLibrary(Runtime.java:370)\nat java.lang.System.loadLibrary(System.java:535)\n</code></pre>\n\n<p>After searching the Internet, I don't find any infomation about </p>\n\n<pre><code>cannot locate '__cxa_atexit'\n</code></pre>\n\n<p>(especially the key word __cxa_atexit). Why cannot locate this function? This function seems to be in libc.so. I don't use C++ in my native code, only C. My NDK version is android-ndk-r10e. I think \"cannot locate __cxa_atexit\" maybe a relative clue.</p>\n\n<p>Most of the time (maybe billions starts of app), it can work well, but rarely crashes as above. In other words, I cannot make it crash on my testing phones, however, it will crash rarely on some users'.</p>\n\n<p>This problem may be the same as <a href=\"https://stackoverflow.com/questions/32796782/loading-android-so-sometimes-fails-rarely?lq=1\">another problem</a>.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Most of the phones which this crash happens on are android 4.0.3 and android 4.0.4. These two version are both API-15.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>After reading some Android's source code, I found this issue may be related to dlopen. The error message \"Cannot load library: reloc_library...\" comes from the function dlopen which is hijacked at runtime. The trace is <a href=\"https://github.com/android/platform_bionic/blob/android-sdk-4.0.3_r1/linker/linker.c\" rel=\"nofollow noreferrer\">runtime dlopen</a> -> find_library -> init_library -> link_image -> reloc_library.</p>\n\n<p>Maybe when it resolve symbols in my so files, it finds the \"__cxa_atexit\" is undefined. Then it looks up in the loaded symbols, but find nothing. (why cannot find __cxa_atexit ?) Finally it runs to the line 1285, with the code:</p>\n\n<pre><code>DL_ERR(\"%5d cannot locate '%s'...\\n\", pid, sym_name);\n</code></pre>\n\n<p>I don't know something about linker. Could anyone explain or guess why the __cxa_atexit cannot be located ? Is it a bug of Android ?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>It crashes on ALL Android versions, not only 4.0.3 &amp; 4.0.4.</p>\n\n<p>Error message on 4.0.3 &amp; 4.0.4 is</p>\n\n<pre><code>java.lang.UnsatisfiedLinkError: Cannot load library: reloc_library[1286]: 121 cannot locate '__cxa_atexit'\n</code></pre>\n\n<p>as mentioned above.</p>\n\n<p>When loading some other so on 4.0.3 &amp; 4.0.4, it is</p>\n\n<pre><code>cannot locate 'strcpy'\n</code></pre>\n\n<p>Error message on 4.2.2 is</p>\n\n<pre><code>java.lang.UnsatisfiedLinkError: Cannot load library: load_library(linker.cpp:767): can't read file /mnt/asec/app-name-1/lib/libname.so: I/O error\n</code></pre>\n"}, {"tags": ["c", "gcc", "static-libraries", "static-linking"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1443596810, "post_id": 32859900, "comment_id": 53552621, "body": "Is linked_list.o a C file or a C++ file?"}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 1, "creation_date": 1443596907, "post_id": 32859900, "comment_id": 53552675, "body": "so you definitely have lib at the same level as obj and linkedlist is placed inside it as as .a or .so file correct ?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1443596954, "post_id": 32859900, "comment_id": 53552699, "body": "Is <code>linkedlist</code> really a <i>library</i> and not an <i>object</i> file?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1443596963, "post_id": 32859900, "comment_id": 53552707, "body": "If you are indeed programming in C, don&#39;t use g++ to compile or link your code. If you&#39;re calling a C library from C++ code, do the header file of that C library have the necessary <code>extern &quot;C&quot;</code> wrappers ?"}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1443597023, "post_id": 32859900, "comment_id": 53552741, "body": "suspecting it to be gcc -o wordcount obj/word.o obj/main.o &lt;path_to_linked_list_o&gt;/linkedlist.o"}, {"owner": {"reputation": 33, "user_id": 5391824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1155dcf93591dcddab774ce472669cc?s=128&d=identicon&r=PG&f=1", "display_name": "maybe_confused", "link": "https://stackoverflow.com/users/5391824/maybe-confused"}, "edited": false, "score": 0, "creation_date": 1443599093, "post_id": 32859900, "comment_id": 53553911, "body": "linkedlist.o is the object file that the static library was created. The actual library file is lib/liblinkedlist.a"}, {"owner": {"reputation": 33, "user_id": 5391824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1155dcf93591dcddab774ce472669cc?s=128&d=identicon&r=PG&f=1", "display_name": "maybe_confused", "link": "https://stackoverflow.com/users/5391824/maybe-confused"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1443599258, "post_id": 32859900, "comment_id": 53554019, "body": "@nos The library, and all source files are in c. Switching my compiler from g++ to gcc actually solved the problem. Do you have any ideas why this happened?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1443601857, "post_id": 32859900, "comment_id": 53555442, "body": "@maybe_confused You are compiling with g++, so you are really compiling C++ code, even though the file extension is .c, and the code is also valid C. (Your library however, seem to be compiled as C code). You need to take special actions when calling C code from C++ code, see e.g. <a href=\"http://stackoverflow.com/questions/16850992/call-a-c-function-from-c-code\" title=\"call a c function from c code\">stackoverflow.com/questions/16850992/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 5391824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1155dcf93591dcddab774ce472669cc?s=128&d=identicon&r=PG&f=1", "display_name": "maybe_confused", "link": "https://stackoverflow.com/users/5391824/maybe-confused"}, "is_accepted": true, "score": 0, "last_activity_date": 1443638935, "creation_date": 1443638935, "answer_id": 32873532, "question_id": 32859900, "link": "https://stackoverflow.com/questions/32859900/gcc-static-linking-undefined-references/32873532#32873532", "title": "gcc static linking undefined references", "body": "<p>The issue is that the library was compiled by a C compiler, but I had compiled my new sources that reference the library with a C++ compiler. The object file output is different between these two methods. Take the following code for example:</p>\n\n<pre><code>// main.c\n#include &lt;stdio.h&gt;\n\nvoid foo(int x) {\n  printf(\"%d\\n\");\n}\n\nint main(int argc, char** argv) {\n  foo(argc);\n  return 0;\n}\n</code></pre>\n\n<p>Compiling this file into an object file as a C program will produce different symbols than compiling as a C++ program. Example:</p>\n\n<pre><code># Compile as C program\n$ gcc -c main.c; nm main.o\n00000000 T foo\n00000018 T main\n         U printf\n\n# Compile as C++ program\n$ g++ -c main.c; nm main.o\n00000018 T main\n         U printf\n00000000 T _Z3fooi\n</code></pre>\n\n<p>As you can see the <code>foo</code> function compiled with two different symbols. Since the new source files were compiled as C++, the linker expected C++ style symbols while the library contained C style symbols. The linker couldn't match the symbols and therefore throws an error since the C++ symbols are undefined.</p>\n"}], "owner": {"reputation": 33, "user_id": 5391824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1155dcf93591dcddab774ce472669cc?s=128&d=identicon&r=PG&f=1", "display_name": "maybe_confused", "link": "https://stackoverflow.com/users/5391824/maybe-confused"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1418, "favorite_count": 0, "accepted_answer_id": 32873532, "answer_count": 1, "score": 0, "last_activity_date": 1443638935, "creation_date": 1443596705, "question_id": 32859900, "link": "https://stackoverflow.com/questions/32859900/gcc-static-linking-undefined-references", "title": "gcc static linking undefined references", "body": "<p>I made a static library using ar to make a simple word counter, but when I reach the linking stage in my makefile, I get the following error:</p>\n\n<pre><code>g++ -o wordcount obj/word.o obj/main.o   -Wall -L lib  -llinkedlist\nobj/word.o: In function `cleanUp(linkedList*)':\nword.c:(.text+0x83): undefined reference to `ll_clear(linkedList*)'\nobj/word.o: In function `initialize(linkedList*)':\nword.c:(.text+0xa7): undefined reference to `ll_init(linkedList*)'\nobj/word.o: In function `getTotalWordCount(linkedList*)':\nword.c:(.text+0xbd): undefined reference to `ll_getIterator(linkedList*)'\nword.c:(.text+0xd7): undefined reference to `ll_next(linkedListIterator*)'\nword.c:(.text+0xea): undefined reference to `ll_hasNext(linkedListIterator*)'\nobj/word.o: In function `getWord(linkedList*, unsigned int)':\nword.c:(.text+0x118): undefined reference to `ll_get(linkedList*, unsigned int)'\nobj/word.o: In function `findWord(linkedList*, char*)':\nword.c:(.text+0x12e): undefined reference to `ll_getIterator(linkedList*)'\nword.c:(.text+0x148): undefined reference to `ll_next(linkedListIterator*)'\nword.c:(.text+0x178): undefined reference to `ll_hasNext(linkedListIterator*)'\nobj/word.o: In function `combineCounts(linkedList*, wordData*)':\nword.c:(.text+0x26e): undefined reference to `ll_add(linkedList*, void const*, unsigned int)'\nobj/main.o: In function `main':\nmain.c:(.text+0x1df): undefined reference to `ll_getIterator(linkedList*)'\nmain.c:(.text+0x1f2): undefined reference to `ll_next(linkedListIterator*)'\nmain.c:(.text+0x25c): undefined reference to `ll_hasNext(linkedListIterator*)'\ncollect2: error: ld returned 1 exit status\nmakefile:38: recipe for target 'wordcount' failed\nmake: *** [wordcount] Error 1\n</code></pre>\n\n<p>However, using nm to look at the symbol table for my library produces these results (truncated for readability):</p>\n\n<pre><code>linkedlist.o:\n00000028 T ll_add\n00000124 T ll_addIndex\n000003b7 T ll_clear\n00000363 T ll_get\n00000438 T ll_getIterator\n00000477 T ll_hasNext\n00000000 T ll_init\n00000493 T ll_next\n00000285 T ll_remove\n00000420 T ll_size\n</code></pre>\n\n<p>All the answers I've found for similar questions mention that the order in which you specify libraries matters, but I already am adding my library after all my other object files. Does anyone have any ideas where I might be going wrong?</p>\n"}, {"tags": ["c", "linux", "serial-port"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1443596657, "post_id": 32859827, "comment_id": 53552537, "body": "Have you checked e.g. <a href=\"http://man7.org/linux/man-pages/man3/termios.3.html\" rel=\"nofollow noreferrer\">the termios manual page</a>?"}, {"owner": {"reputation": 3859, "user_id": 1336041, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e7c011510a89bda2022c046a2b98fe15?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/1336041/sam"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1443596960, "post_id": 32859827, "comment_id": 53552706, "body": "thanks, would you please post your answer to the &quot;answer reply&quot; so that I can check it ?"}], "answers": [{"tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 1, "last_activity_date": 1443601871, "last_edit_date": 1592644375, "creation_date": 1443601871, "answer_id": 32861423, "question_id": 32859827, "link": "https://stackoverflow.com/questions/32859827/linux-serial-port-programming-c-cc-character-configurations/32861423#32861423", "title": "Linux serial port programming c_cc character configurations", "body": "<p>As suggested, the manual page for <a href=\"http://man7.org/linux/man-pages/man3/termios.3.html\" rel=\"nofollow noreferrer\">termios</a> is a starting point:</p>\n<blockquote>\n<p><strong>VEOF</strong></p>\n<p>(004, EOT, Ctrl-D) End-of-file character (EOF).  More\nprecisely: this character causes the pending tty buffer to be\nsent to the waiting user program without waiting for end-of-line.  If it is the first character of the line, the read(2)\nin the user program returns 0, which signifies end-of-file.\nRecognized when ICANON is set, and then not passed as input.</p>\n</blockquote>\n<p>In the context of the given link, <a href=\"http://tldp.org/HOWTO/Serial-Programming-HOWTO/x115.html#AEN125\" rel=\"nofollow noreferrer\">3.1. Canonical Input Processing</a>, the OP has observed that commenting out an assignment</p>\n<pre><code>newtio.c_cc[VEOF]     = 4;\n</code></pre>\n<p>prevents <code>^D</code> from working as expected.  That, and similar assignments correspond to the settings one might use for a shell script with <a href=\"http://man7.org/linux/man-pages/man1/stty.1.html\" rel=\"nofollow noreferrer\"><code>stty</code></a>.  Internally (using <em>termios</em>) those are set to an <em>undefined</em> value when assigned <code>0xff</code>, but a default <code>0x00</code> is almost as good.</p>\n"}], "owner": {"reputation": 3859, "user_id": 1336041, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e7c011510a89bda2022c046a2b98fe15?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/1336041/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 1, "accepted_answer_id": 32861423, "answer_count": 1, "score": 0, "last_activity_date": 1443601871, "creation_date": 1443596482, "question_id": 32859827, "link": "https://stackoverflow.com/questions/32859827/linux-serial-port-programming-c-cc-character-configurations", "title": "Linux serial port programming c_cc character configurations", "body": "<p>By referencing the source in the following link :\n<a href=\"http://tldp.org/HOWTO/Serial-Programming-HOWTO/x115.html#AEN125\" rel=\"nofollow\">Serial_Port_Programming_How_To</a></p>\n\n<p>I found out that there are c_cc character configurations there.\nAfter searching around the affections, I did not find the exact answer to this.\nI try to comment out each line of these c_cc configurations and found out the following line does affect the output.</p>\n\n<pre><code>newtio.c_cc[VEOF]     = 4;\n</code></pre>\n\n<p>Can anyone explain the meaning of this and possibly for the rest of these?</p>\n\n<p>Thanks </p>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1443596206, "post_id": 32859664, "comment_id": 53552301, "body": "What is input, expected output and actual output?"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1443596248, "post_id": 32859664, "comment_id": 53552322, "body": "<b><i>Returns a 1 if its not found, return false;</i></b>, really?"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5391818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa1267ec9c59622a80517769a6e2248f?s=128&d=identicon&r=PG&f=1", "display_name": "SomeKindaAlien", "link": "https://stackoverflow.com/users/5391818/somekindaalien"}, "edited": false, "score": 0, "creation_date": 1443598680, "post_id": 32859754, "comment_id": 53553675, "body": "I removed it just to be safe. Still the needle cant be found."}, {"owner": {"reputation": 1528, "user_id": 2042240, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/dcdGA.jpg?s=128&g=1", "display_name": "nowhere", "link": "https://stackoverflow.com/users/2042240/nowhere"}, "reply_to_user": {"reputation": 29, "user_id": 5391818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa1267ec9c59622a80517769a6e2248f?s=128&d=identicon&r=PG&f=1", "display_name": "SomeKindaAlien", "link": "https://stackoverflow.com/users/5391818/somekindaalien"}, "edited": false, "score": 0, "creation_date": 1443599522, "post_id": 32859754, "comment_id": 53554164, "body": "well seems ok actually... can you put printf(values[i]); before the if (value == values[i]) statement and see what do you get as output?"}], "tags": [], "owner": {"reputation": 1528, "user_id": 2042240, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/dcdGA.jpg?s=128&g=1", "display_name": "nowhere", "link": "https://stackoverflow.com/users/2042240/nowhere"}, "is_accepted": false, "score": 2, "last_activity_date": 1443596266, "creation_date": 1443596266, "answer_id": 32859754, "question_id": 32859664, "link": "https://stackoverflow.com/questions/32859664/cs50-helpers-c-code-not-finding-value-needle-any-ideas/32859754#32859754", "title": "CS50 helpers.c, Code not finding value (needle)? Any ideas?", "body": "<p>The problem is this part:</p>\n\n<pre><code>while (n &gt; 0)\n</code></pre>\n\n<p>Which puts you in an endless loop.\nYou should replace it with an if statement:</p>\n\n<pre><code>if(n&lt;=0){\n    return false;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 2, "last_activity_date": 1443596574, "creation_date": 1443596574, "answer_id": 32859856, "question_id": 32859664, "link": "https://stackoverflow.com/questions/32859664/cs50-helpers-c-code-not-finding-value-needle-any-ideas/32859856#32859856", "title": "CS50 helpers.c, Code not finding value (needle)? Any ideas?", "body": "<p>You don't need to check if <code>n</code> is positive. The <code>for</code> loop does that already. When you write a loop</p>\n\n<pre><code>for (int i = 0; i &lt; n; i++)\n</code></pre>\n\n<p>the first thing that happens is that variable <code>i</code> is set to <code>0</code>. The second thing that happens is that <code>i</code> is compared to <code>n</code>. If <code>n</code> is a negative number, then <code>i</code> won't be less than <code>n</code>, so the loop body will never run.</p>\n"}, {"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 0, "last_activity_date": 1443596637, "creation_date": 1443596637, "answer_id": 32859876, "question_id": 32859664, "link": "https://stackoverflow.com/questions/32859664/cs50-helpers-c-code-not-finding-value-needle-any-ideas/32859876#32859876", "title": "CS50 helpers.c, Code not finding value (needle)? Any ideas?", "body": "<pre><code>//  Makes sure the input value is positive\n// Okay donot loop  just return, not sure how you deal with zero though\nif (n &lt; 0)\n    return false;\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5391818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa1267ec9c59622a80517769a6e2248f?s=128&d=identicon&r=PG&f=1", "display_name": "SomeKindaAlien", "link": "https://stackoverflow.com/users/5391818/somekindaalien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1206, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1469854315, "creation_date": 1443596015, "last_edit_date": 1469854315, "question_id": 32859664, "link": "https://stackoverflow.com/questions/32859664/cs50-helpers-c-code-not-finding-value-needle-any-ideas", "title": "CS50 helpers.c, Code not finding value (needle)? Any ideas?", "body": "<p>Not sure why it cant find the value in the array. Whenever I run the code it returns \"didn't find the needle in the haystack.\"</p>\n\n<pre><code> /**\n * helpers.c\n *\n * Computer Science 50\n * Problem Set 3\n *\n * Helper functions for Problem Set 3.\n */\n\n#include &lt;cs50.h&gt;\n\n#include \"helpers.h\"\n\n\n/**\n * Returns true if value is in array of n values, else false.\n */\nbool search(int value, int values[], int n)\n{\n    //Makes sure the input value is positive\n\n    while (n &gt; 0)\n   {\n    //Searches until value is found\n\n    for (int i = 0; i &lt; n; i++)\n    {\n        if (value == values[i])\n        {\n            printf(\"Found it!\\n\");\n            return true;\n        }\n\n    }\n\n  }\n\n  return false;\n\n}\n</code></pre>\n\n<p>Haven't started sort</p>\n\n<pre><code>/**\n * Sorts array of n values.\n */\n/*void sort(int values[], int n)\n{\n    // TODO: implement an O(n^2) sorting algorithm\n    return;\n}*/\n</code></pre>\n\n<p>I have changed it and used an if statement the way it was, still gives the same. </p>\n\n<pre><code>#include &lt;cs50.h&gt;\n\n#include \"helpers.h\"\n\n\n/**\n * Returns true if value is in array of n values, else false.\n */\nbool search(int value, int values[], int n)\n{\n\n  /*  if (n &gt;= 0)\n   {\n    return false; \n   }*/\n\n\n    for (int i = 0; i &lt; n; i++)\n    {\n        if (value == values[i])\n        {\n            printf(\"Found it!\\n\");\n            return true;\n        }\n\n    }\nreturn false;\n\n\n}\n</code></pre>\n\n<p>Problem solved!It seems I accidentally made a second file with the same name outside the folder. I was changing the wrong file!!!</p>\n"}, {"tags": ["c++", "c", "c++11", "undefined-behavior", "unspecified-behavior"], "comments": [{"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1443602706, "post_id": 32859502, "comment_id": 53555959, "body": "One of the things that can happen if you cross the street without looking both ways is that you make it to the other side safely. But it&#39;s an error to <i>predict</i> that a person who crosses the street without looking both ways will make it to the other side safely."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1443605643, "post_id": 32859502, "comment_id": 53557906, "body": "Similar to <a href=\"http://stackoverflow.com/q/29513572/1708801\">Sequence Point ambiguity, undefined behavior?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 5, "creation_date": 1443603226, "post_id": 32861733, "comment_id": 53556309, "body": "@user4791206 What do you mean by &quot;works fine&quot;? Since you cannot predict what it will do, why would you say what it happened to do is it working fine? Someone who predicted it would evaluate in the other order wouldn&#39;t say it worked fine, would they?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4791206"}, "edited": false, "score": 0, "creation_date": 1443604237, "post_id": 32861733, "comment_id": 53557000, "body": "Means , problem of evaluation order is undefined behavior <a href=\"http://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points\">I-read</a> ?"}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1443604432, "post_id": 32861733, "comment_id": 53557136, "body": "It&#39;&#39;s hard to say precisely what category this falls into because you&#39;ve given the question three different language tags. It&#39;s either undefined or unspecified. You can check the specification for the particular language you&#39;re interested in."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4791206"}, "edited": false, "score": 0, "creation_date": 1443604527, "post_id": 32861733, "comment_id": 53557204, "body": "but the question doesn&#39;t mention anything ?"}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1443604569, "post_id": 32861733, "comment_id": 53557231, "body": "Well, the answer is the same whether it&#39;s undefined or unspecified -- we cannot predict that any of those answers will result."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4791206"}, "reply_to_user": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1443605409, "post_id": 32861733, "comment_id": 53557774, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/90969/discussion-between-user4791206-and-david-schwartz\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 14, "last_activity_date": 1443602824, "creation_date": 1443602824, "answer_id": 32861733, "question_id": 32859502, "link": "https://stackoverflow.com/questions/32859502/is-undefined-behavior-in-given-code/32861733#32861733", "title": "Is undefined behavior in given code?", "body": "<pre><code>   return f(x,c) * x;\n</code></pre>\n\n<p>The result of this operation depends on the order in which the two things are evaluated. Since you cannot predict the order they'll be evaluated, you cannot predict the result of this operation.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1443604999, "post_id": 32861911, "comment_id": 53557521, "body": "As a side note, the same text is different in C++11 but has the very same meaning. I think C++11 (and C11) only made the text much harder to understand, why I am quoting an older version of the standard."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4791206"}, "edited": false, "score": 0, "creation_date": 1443607689, "post_id": 32861911, "comment_id": 53559081, "body": "Thank you sir , I got it."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1463427954, "post_id": 32861911, "comment_id": 62050677, "body": "In general &quot;unspecified behavior&quot; doesn&#39;t mean that a programmer can&#39;t know what the code will do--merely that the programmer can&#39;t know in any given case which of the possible behaviors a compiler will select.  If all possible combinations of compiler behavior would meet the programmer&#39;s requirements, then a programmer would be entitled to expect the program to work correctly.  There is nothing wrong with code relying upon a compiler choosing in unspecified fashion from among defined actions, as long as it will work with any such selection the compiler happens to make."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 9, "last_activity_date": 1443603783, "last_edit_date": 1443603783, "creation_date": 1443603366, "answer_id": 32861911, "question_id": 32859502, "link": "https://stackoverflow.com/questions/32859502/is-undefined-behavior-in-given-code/32861911#32861911", "title": "Is undefined behavior in given code?", "body": "<p>C++03 chapter 5:</p>\n\n<blockquote>\n  <p>Except where noted, the order of evaluation of operands of individual operators and subexpressions of individual\n  expressions, and the order in which side effects take place, is unspecified.</p>\n</blockquote>\n\n<p>So in the case of <code>f(x,c) * x</code>, the order of evaluation of the operands is unspecified, meaning that you can't know if the left or right operand will get evaluated first.</p>\n\n<p>Your code has <em>unspecified behavior</em>, meaning that it will behave in a certain defined manner which is only known to the compiler. The programmer can't know what the code will do, only that it will either evaluate the left operand first, or the right operand first. The compiler is even allowed to change the order of evaluation on a case-to-case basis, for optimization purposes. </p>\n\n<p>If the order of evaluation matters, you need to rewrite the code. Code relying on unspecified behavior is always a bug, possibly a quite subtle one which will not immediately surface.</p>\n\n<p>Unspecified behavior is different from undefined behavior, which would mean that anything could happen, including the program going haywire or crashing.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4791206"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 2, "accepted_answer_id": 32861733, "answer_count": 2, "score": 5, "last_activity_date": 1463255092, "creation_date": 1443595481, "last_edit_date": 1463255092, "question_id": 32859502, "link": "https://stackoverflow.com/questions/32859502/is-undefined-behavior-in-given-code", "title": "Is undefined behavior in given code?", "body": "<blockquote>\n  <p>What is the return value of f(p,p), if the value of p is\n  initialized to 5 before the call? Note that the first parameter is\n  passed by reference, whereas the second parameter is passed by value.</p>\n\n<pre><code>int f (int &amp;x, int c) {\n       c = c - 1;\n       if (c==0) return 1;\n       x = x + 1;\n       return f(x,c) * x;\n}\n</code></pre>\n  \n  <p>Options are:</p>\n  \n  <ol>\n  <li>3024 </li>\n  <li>6561</li>\n  <li>55440 </li>\n  <li>161051</li>\n  </ol>\n</blockquote>\n\n<hr>\n\n<p>I try to explain:</p>\n\n<hr>\n\n<p>In this code, there will be four recursive calls with parameters (6,4), (7,3), (8,2) and (9,1). The last call returns 1. But due to pass by reference, x in all the previous functions is now 9. Hence, the value returned by f(p,p) will be 9 * 9 * 9 * 9 * 1 = 6561.</p>\n\n<hr>\n\n<p>This question is from the competitive exam GATE, (<a href=\"http://www.gate.iitb.ac.in/gate2013/wp-content/uploads/2013/03/CS-C.pdf\" rel=\"nofollow\">see Q.no.-42</a>). The answer key is given by GATE \"Marks to all\" (means there is no option correct.) <a href=\"http://www.gate.iisc.ernet.in/2013answers/CS.pdf\" rel=\"nofollow\">key set-C, Q.no.-42</a>. Somewhere explained as:</p>\n\n<p>In GATE 2013 marks were given to all as the same code in C/C++ produces undefined behavior. This is because <code>*</code> is not a sequence point in C/C++. The correct code must replace</p>\n\n<pre><code>return f(x,c) * x;\n</code></pre>\n\n<p>with</p>\n\n<pre><code> res = f(x,c);\n return res * x;\n</code></pre>\n\n<hr>\n\n<p>But the given code works fine. Is GATE's key wrong? Or is really the mistake with the question?</p>\n"}, {"tags": ["c", "linux", "process", "execvp"], "comments": [{"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1443596254, "post_id": 32859493, "comment_id": 53552327, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/18408766/make-a-system-call-to-get-list-of-processes\">Make a system call to get list of processes</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1491, "user_id": 3310212, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/45f6d295f5b617410092dd23196431bb?s=128&d=identicon&r=PG&f=1", "display_name": "Vimzy", "link": "https://stackoverflow.com/users/3310212/vimzy"}, "edited": false, "score": 0, "creation_date": 1443596655, "post_id": 32859785, "comment_id": 53552535, "body": "I have to use ps, and I need to make sure that both running and stopped processes are shown"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1443596776, "post_id": 32859785, "comment_id": 53552604, "body": "Job control and their commands are specific to the <i>shell</i>, there is no general <code>jobs</code> command, it&#39;s a shell built-in command."}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "reply_to_user": {"reputation": 1491, "user_id": 3310212, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/45f6d295f5b617410092dd23196431bb?s=128&d=identicon&r=PG&f=1", "display_name": "Vimzy", "link": "https://stackoverflow.com/users/3310212/vimzy"}, "edited": false, "score": 0, "creation_date": 1443597330, "post_id": 32859785, "comment_id": 53552913, "body": "@Vimzy, if you only need that both running and stopped processes are shown (and you don&#39;t need to differentiate), you can use <code>ps -e</code>."}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1443597456, "post_id": 32859785, "comment_id": 53552976, "body": "@JoachimPileborg, does that mean <code>jobs</code> can&#39;t be used using <code>execvp</code>. I have not tried running this snippet (because I was sure it would work, execvp is used like this)"}, {"owner": {"reputation": 1491, "user_id": 3310212, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/45f6d295f5b617410092dd23196431bb?s=128&d=identicon&r=PG&f=1", "display_name": "Vimzy", "link": "https://stackoverflow.com/users/3310212/vimzy"}, "edited": false, "score": 0, "creation_date": 1443597662, "post_id": 32859785, "comment_id": 53553105, "body": "-e can&#39;t work because it processes that aren&#39;t a part of the group process ID"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1443597745, "post_id": 32859785, "comment_id": 53553158, "body": "Correct, there won&#39;t be such a command in the filesystem anywhere. Instead it&#39;s the shell that catches it and handles it."}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1443598343, "post_id": 32859785, "comment_id": 53553508, "body": "@JoachimPileborg, thanks for the insight. @vimzy, I don&#39;t really understand what you mean by <code>it processes that aren&#39;t a part of the group process ID</code>, because man page says it selects all processes. I don&#39;t really know but maybe <code>ps -A</code> or <code>ps aux</code> can be used."}], "tags": [], "owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "is_accepted": false, "score": 0, "last_activity_date": 1443596363, "creation_date": 1443596363, "answer_id": 32859785, "question_id": 32859493, "link": "https://stackoverflow.com/questions/32859493/linux-command-to-show-stopped-and-running-processes/32859785#32859785", "title": "Linux Command to Show Stopped and Running processes?", "body": "<p><code>ps -e</code>  lists all processes.</p>\n\n<p><code>jobs</code> list all processes currently stopped or in background.</p>\n\n<p>So, you can run <code>jobs</code> command using <code>execvp</code>:</p>\n\n<pre><code>char *arg = {\"jobs\", NULL};\nexecvp(arg[0], arg);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 989, "user_id": 4970442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ed9f7f093bc4915bfe51e794e846ea2?s=128&d=identicon&r=PG", "display_name": "Pablo Bianchi", "link": "https://stackoverflow.com/users/4970442/pablo-bianchi"}, "is_accepted": false, "score": 8, "last_activity_date": 1597879744, "last_edit_date": 1597879744, "creation_date": 1526334434, "answer_id": 50339497, "question_id": 32859493, "link": "https://stackoverflow.com/questions/32859493/linux-command-to-show-stopped-and-running-processes/50339497#50339497", "title": "Linux Command to Show Stopped and Running processes?", "body": "<p><code>jobs -s</code> <a href=\"https://linux.die.net/man/1/bash\" rel=\"nofollow noreferrer\">list <strong>s</strong>topped</a> process by <code>SIGTSTP,</code><a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">no <code>SIGSTOP</code></a>. <a href=\"https://stackoverflow.com/a/11888074/4970442\">The main difference</a> is that <code>SIGSTOP</code> cannot be ignored.</p>\n<p>You can <code>SIGTSTP</code> a process with <code>^Z</code> or from other shell with <code>kill -TSTP PROC_PID</code>, and then list with <code>jobs</code>.</p>\n<p>But what about listing PIDs who had received <strong>SIGSTOP</strong>? <a href=\"https://unix.stackexchange.com/a/350674/209677\">One way</a> to get this is</p>\n<pre><code> ps -e -o stat,command,pid | grep '^S '\n</code></pre>\n<p>I found very useful this two to stop/cont for a while some process (usually the browser):</p>\n<pre><code>kill -STOP $(pgrep procName)\nkill -CONT $(pgrep procName)\n</code></pre>\n<p>Or with <code>killall</code></p>\n<pre><code>killall -STOP procName\nkillall -CONT procName\n</code></pre>\n"}], "owner": {"reputation": 1491, "user_id": 3310212, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/45f6d295f5b617410092dd23196431bb?s=128&d=identicon&r=PG&f=1", "display_name": "Vimzy", "link": "https://stackoverflow.com/users/3310212/vimzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10403, "favorite_count": 2, "answer_count": 2, "score": 4, "last_activity_date": 1597879744, "creation_date": 1443595433, "last_edit_date": 1443596669, "question_id": 32859493, "link": "https://stackoverflow.com/questions/32859493/linux-command-to-show-stopped-and-running-processes", "title": "Linux Command to Show Stopped and Running processes?", "body": "<p>I'm presently executing the following Linux command in one of my c programs to display processes that are running. Is there anyway I can modify it to show stopped processes and running ones?</p>\n\n<pre><code>char *const parmList[] = {\"ps\",\"-o\",\"pid,ppid,time\",\"-g\",\"-r\",groupProcessID,NULL};\nexecvp(\"/bin/ps\", parmList);\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "memory", "numa"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 4530988, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f35186f42f042acb68ca1c12a6978a7e?s=128&d=identicon&r=PG&f=1", "display_name": "user4530988", "link": "https://stackoverflow.com/users/4530988/user4530988"}, "edited": false, "score": 0, "creation_date": 1444614675, "post_id": 32995101, "comment_id": 53962202, "body": "now i&#39;m suffering with following:  ...   CPU_ZERO(&amp;cpu_set);   CPU_SET(0, &amp;cpu_set); ...   CPU_SET(7, &amp;cpu_set);   sched_setaffinity(0, sizeof(cpu_set), &amp;cpu_set);   nodemask = 8;   //ret = set_mempolicy(MPOL_BIND, &amp;nodemask, sizeof(nodemask)*8);                                                                                                                                             ret = mbind(0, 12884901888, MPOL_BIND, &amp;nodemask, sizeof(unsigned long), MPOL_MF_MOVE);  this works with set_mempolicy (commented line), but doesn&#39;t work with mbind. could u pls help here? tnx!"}], "tags": [], "owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "is_accepted": true, "score": 3, "last_activity_date": 1444228491, "creation_date": 1444228491, "answer_id": 32995101, "question_id": 32859409, "link": "https://stackoverflow.com/questions/32859409/is-there-any-example-of-using-mbind-in-c-c-code/32995101#32995101", "title": "Is there any example of using mbind in C/C++ code?", "body": "<p><code>nodemask</code> is a pointer to a bitmask of the allowed NUMA nodes. The bitmask is an array of <code>unsigned long</code> elements with each array element holding as many bits as the size of <code>unsigned long int</code> on the particular architecture allows. Unless your program is running on a really big NUMA system, a single <code>unsigned long</code> variable should suffice.</p>\n\n<p><code>maxnode</code> gives the number of significant bits in <code>nodemask</code>. The kernel rounds internally the size to a multiple of <code>sizeof(unsigned long)</code> but only uses <code>maxnode</code> bits.</p>\n\n<p>There are many examples and libraries around that allow you to create and conveniently manipulate bitmasks without having to fiddle with bit operations yourself. You can utilise <code>libnuma</code>. It doesn't allow you to set the <code>MPOL_MF_MOVE</code> policy but includes functions for the creation and manipulation of nodemasks.</p>\n\n<p><strong>A terrible and very unportable Linux pro-tip:</strong> The existing macros that deal with the CPU affinity masks, namely <code>CPU_ZERO</code> / <code>CPU_SET</code> / <code>CPU_CLR</code> and the associated data structure <code>cpu_set_t</code> can also be used for NUMA nodemasks. The reason for that is that (1) both are implemented as arrays of <code>unsigned long</code> and (2) there are usually less NUMA nodes than logical CPUs, therefore <code>cpu_set_t</code> should have enough bits to be able to represent all NUMA nodes on the system.</p>\n\n<p>Side note: <code>4611686018424767488</code> should probably be suffixed with <code>LL</code>.</p>\n"}], "owner": {"reputation": 63, "user_id": 4530988, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f35186f42f042acb68ca1c12a6978a7e?s=128&d=identicon&r=PG&f=1", "display_name": "user4530988", "link": "https://stackoverflow.com/users/4530988/user4530988"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1224, "favorite_count": 3, "accepted_answer_id": 32995101, "answer_count": 1, "score": 4, "last_activity_date": 1444228491, "creation_date": 1443595119, "last_edit_date": 1443595233, "question_id": 32859409, "link": "https://stackoverflow.com/questions/32859409/is-there-any-example-of-using-mbind-in-c-c-code", "title": "Is there any example of using mbind in C/C++ code?", "body": "<p>I am trying to use <a href=\"http://man7.org/linux/man-pages/man2/mbind.2.html\" rel=\"nofollow\">mbind()</a> in my C++ code in order to rearrange virtual pages across 4 NUMA domains, unfortunately I am new to this function:</p>\n\n<pre><code>long mbind(void *addr, unsigned long len, int mode, const unsigned long *nodemask,   \n              unsigned long maxnode, unsigned flags);\n</code></pre>\n\n<p>Currently, I have something like this:</p>\n\n<pre><code>mbind(0x0,4611686018424767488,MPOL_BIND,nodemask,maxnode,MPOL_MF_MOVE);\n</code></pre>\n\n<p>From the specs it's still unclear to me what to put and how to put for <code>nodemask</code> and <code>maxnode</code>.</p>\n"}, {"tags": ["c", "code-analysis"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1443600336, "post_id": 32859388, "comment_id": 53554597, "body": "It is not really clear what you are asking, could you post a code example?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5185142, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/inPlH.jpg?s=128&g=1", "display_name": "M. Ravi", "link": "https://stackoverflow.com/users/5185142/m-ravi"}, "edited": false, "score": 0, "creation_date": 1493023063, "post_id": 32862825, "comment_id": 74215868, "body": "Declaring the Register as &#39;volatile&#39; worked. Thanks for the answer."}], "tags": [], "owner": {"reputation": 93, "user_id": 2461311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe35e89770114ae634917247653c88d3?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Deba", "link": "https://stackoverflow.com/users/2461311/alex-deba"}, "is_accepted": true, "score": 1, "last_activity_date": 1443606038, "creation_date": 1443606038, "answer_id": 32862825, "question_id": 32859388, "link": "https://stackoverflow.com/questions/32859388/handling-hardware-with-polyspace/32862825#32862825", "title": "Handling hardware with polyspace", "body": "<p>Since KEY+MODE is different from MODE, Polyspace will logically consider the test <code>your_hardware_register == MODE</code> as failed (fortunatly).</p>\n\n<p>It seems that KEY and MODE are bit flags for your register.\nSo I see two options:</p>\n\n<ol>\n<li><p>Use the bitwise AND operator to test the register : <code>if (your_hardware_register &amp; MODE)</code></p></li>\n<li><p>make the register volatile (by adding the qualifier volatile to the declaration of your register) so Polyspace will consider that it can take any value (including MODE).</p></li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 5185142, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/inPlH.jpg?s=128&g=1", "display_name": "M. Ravi", "link": "https://stackoverflow.com/users/5185142/m-ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 32862825, "answer_count": 1, "score": -1, "last_activity_date": 1443606038, "creation_date": 1443595044, "question_id": 32859388, "link": "https://stackoverflow.com/questions/32859388/handling-hardware-with-polyspace", "title": "Handling hardware with polyspace", "body": "<p>I am working with Mathworks Polyspace for my CODE analysis. I have a hardware register where I write a KEY+MODE and read the register to check the value in the register is equal to MODE. </p>\n\n<p>The problem is, Polyspace considers this as 'always fail' as I am writing and reading different values in consecutive steps.</p>\n\n<p>Is there any option in Polyspace to handle this issue.?</p>\n"}, {"tags": ["c", "printf", "ascii", "selection", "logical-operators"], "comments": [{"owner": {"reputation": 871334, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 7, "creation_date": 1443594553, "post_id": 32859195, "comment_id": 53551573, "body": "<i>&quot;without using logical operators, relational operators, or selection constructs such as an if statement&quot;</i> Why not use those? If this is an assignment and that&#39;s a restriction on the assignment, look at your recent classwork, and it should point fairly clearly to what to use."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1443594555, "post_id": 32859195, "comment_id": 53551575, "body": "An array of 13 integers, containing the card value?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1443594555, "post_id": 32859195, "comment_id": 53551576, "body": "When you have variables like <code>cardnum1</code>, <code>cardnum2</code>, <code>cardnum3</code>, <code>cardnum4</code>, you almost certainly want an array: <code>int cardnum[4]</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1443594591, "post_id": 32859195, "comment_id": 53551590, "body": "And why do you have four functions doing the exact same thing? You could call one of them with different arguments instead."}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1443594647, "post_id": 32859195, "comment_id": 53551612, "body": "Curious to know why would someone wants to do all that ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5391696"}, "edited": false, "score": 0, "creation_date": 1443594960, "post_id": 32859195, "comment_id": 53551742, "body": "i&#39;m really new to programming so all of what looks obvious to you doesn&#39;t look that way to me at all. It is for an assignment. And we haven&#39;t learned about arrays or if statements so that&#39;s why I have to write everything out instead of using something simpler. Sorry I should have mentioned that. Thanks for whatever useful input you can offer"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1443595294, "post_id": 32859195, "comment_id": 53551885, "body": "Well, this might be a good time to learn.  If the instructor is making you play \u201cMother, may I?\u201d then you should ask what you are allowed to do."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1443595299, "post_id": 32859195, "comment_id": 53551889, "body": "@CatherineFoye There is nothing syntactically wrong with the way you have written it, it is just a bit longer than you will write it a month from now. As to your question, after you set the values of your cards, just test <code>if (cardnum1 &gt;= 10) cardnum1 = 10;</code> (and the same for the rest) Yes, there are much shorter ways to right that as well, but you will get to them in time. (Ok, I&#39;ll give you a hint, the <code>ternary</code> operator)"}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1443595367, "post_id": 32859195, "comment_id": 53551915, "body": "Try something like <code>val - (val % 10)</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5391696"}, "edited": false, "score": 0, "creation_date": 1443595638, "post_id": 32859195, "comment_id": 53552036, "body": "Sorry, I&#39;m still being unclear lol. I know how to use arrays, logic and relations, and if statements. We just aren&#39;t allowed to use them right now for this. That&#39;s why I asked for it specifically without using any of those. There&#39;s nothing wrong with the current code, I just have no idea what to add to it to give the card numbers 11,12, 13 a value of 10, or how to add &quot;B&quot; to the print statement if the total is over 21. I&#39;ve looked through class notes, the C programming book, and my teammates are useless so I&#39;m on my own. Again thanks to anyone that answers"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5391696"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1443595697, "post_id": 32859195, "comment_id": 53552069, "body": "Thank you @&#212;rel I will try that"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1443596341, "post_id": 32859195, "comment_id": 53552371, "body": "Obviously your teacher is looking for this solution: <code>val=(val&amp;??-7&amp;&amp;val-2&amp;??-7)*012;</code>. I seriously think that you should hand in this solution and thank them for making you such a great C programmer."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1443597891, "post_id": 32859195, "comment_id": 53553250, "body": "the functions <code>cardValue</code> and <code>cardValue2</code>, <code>cardValue3</code>, <code>cardValue4</code> are all the same, why declare separate functions?"}], "answers": [{"tags": [], "owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "is_accepted": false, "score": -1, "last_activity_date": 1443595656, "creation_date": 1443595656, "answer_id": 32859553, "question_id": 32859195, "link": "https://stackoverflow.com/questions/32859195/how-would-i-assign-the-values-of-11-12-and-13-to-all-equal-10-without-using-log/32859553#32859553", "title": "How would I assign the values of 11,12, and 13 to all equal 10 without using logical operators, relational operators, or selection constructs in C?", "body": "<p>if you can use %</p>\n\n<pre><code>val - val % 10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1443598888, "last_edit_date": 1443598888, "creation_date": 1443597718, "answer_id": 32860189, "question_id": 32859195, "link": "https://stackoverflow.com/questions/32859195/how-would-i-assign-the-values-of-11-12-and-13-to-all-equal-10-without-using-log/32860189#32860189", "title": "How would I assign the values of 11,12, and 13 to all equal 10 without using logical operators, relational operators, or selection constructs in C?", "body": "<p>As noted in the comment, there was nothing wrong with the syntax used in writing your program, it is just quite a bit longer than you will write it a month from now. Taking the suggestions and making use of a couple of arrays will help you dramatically cut down on the verbosity of the code while still retaining all the information you desired to print.</p>\n\n<p>In the same manner, reducing the number of functions that provide the same logic also helps to cut down on the line in the code (bad if you are getting paid by the line...)</p>\n\n<p>To your question of keeping card values equal to 10 for all face cards, that can be handled in your <code>cardValue</code> function with a simple test after you reduce the value to between <code>1 - 13</code>. A simple <code>if (value &gt;= 10) value = 10;</code> will insure all face cards have the value of 10.</p>\n\n<p>With those changes made, while still lengthy, it is a bit shorter than the original. Give it a try and let me know if you have any questions:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\n#define SUITS 4\n\nint seedValue();\nint card();\nint cardValue(int);\nvoid printDeal (int *cards, int *values);\n\nint main()\n{\n    int cardnum[SUITS] = {0};\n    int cardval[SUITS] = {0};\n    int i = SUITS;\n\n    srand (seedValue());\n\n    while (i--) {\n        cardnum[i] = card();\n        cardval[i] = cardValue (cardnum[i]);\n    }\n\n    printDeal (cardnum, cardval);\n\n    return 0;\n}\n\nint seedValue()\n{\n    int seed;\n\n    printf (\"Enter the seed value: \");\n    scanf (\"%d\",&amp;seed);\n\n    return seed;\n}\n\nint card ()\n{   return (rand() % 52) + 1; }\n\nint cardValue (int cardnum)\n{\n    int val = cardnum % 13;\n\n    return val &gt; 10 ? 10 : val;\n}\n\nvoid printDeal (int *cards, int *values)\n{\n    int i, pts = 0;\n\n    putchar ('\\n');  /* just to make it look nice */\n\n    for (i = 0; i &lt; SUITS; i++) {\n        printf (\" Card[%2d] : generated: %2d  value: %2d\\n\",\n                i + 1, cards[i], values[i]);\n        pts += values[i];\n    }\n    printf (\"\\nTotal points generated : %d\\n\\n\", pts);\n}\n</code></pre>\n\n<p><strong>Use/Output</strong></p>\n\n<pre><code>$ ./bin/cards\nEnter the seed value: 21\n\n Card[ 1] : generated: 11  value: 10\n Card[ 2] : generated:  3  value:  3\n Card[ 3] : generated: 52  value:  0\n Card[ 4] : generated: 17  value:  4\n\nTotal points generated : 17\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5391696"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443598888, "creation_date": 1443594338, "question_id": 32859195, "link": "https://stackoverflow.com/questions/32859195/how-would-i-assign-the-values-of-11-12-and-13-to-all-equal-10-without-using-log", "title": "How would I assign the values of 11,12, and 13 to all equal 10 without using logical operators, relational operators, or selection constructs in C?", "body": "<p>I'm supposed to make a program that is basically a simple form of Blackjack. The program randomly draws 4 cards from a standard deck of 52, and the card number should be displayed along with its card value. (For example, if the card number is 43 it has a value of 4) The cards 2-10 are worth their given value, an Ace is worth 1, the face cards (11-13, jack, queen, king) are worth 10. When the total exceeds 21 the program should display a 'B' after the total. I'm having trouble with the last two parts. I can't figure out how to get the face cards to equal 10, and to display a 'B' without using logical operators, relational operators, or selection constructs such as an if statement. Any help would be appreciated! Thanks! \nHere is the code that I have so far:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n#include&lt;stdlib.h&gt;\n\nint seedValue();\nint card();\nint cardValue(int);\nint cardValue2(int);\nint cardValue3(int);\nint cardValue4(int);\nvoid printStatements(int, int, int, int, int, int, int, int);\n\nint main()\n{\n  int seed;\n  int cardnum1;\n  int cardnum2;\n  int cardnum3;\n  int cardnum4;\n  int value1;\n  int value2;\n  int value3;\n  int value4;\n\n  seed = seedValue();\n\n  srand(seed);\n\n  cardnum1 = card();\n  cardnum2 = card();\n  cardnum3 = card();\n  cardnum4 = card();\n\n  value1 = cardValue(cardnum1);\n  value2 = cardValue2(cardnum2);\n  value3 = cardValue3(cardnum3);\n  value4 = cardValue4(cardnum4);\n\n  printStatements(cardnum1,cardnum2,cardnum3,cardnum4,value1,value2,value3,value4);\n\n  return(0);\n}\n\nint seedValue()\n{\n  int seed;\n\n  printf(\"Enter the seed value: \");\n  scanf(\"%d\",&amp;seed);\n\n  return(seed);\n}\n\nint card()\n{\n  int cardval;\n\n  cardval = (rand() % 52) + 1;\n\n  return(cardval);\n}\n\nint cardValue(int cardnum1)\n{\n  int val1;\n\n\n  val1 = cardnum1 % 13;\n\n  return(val1);\n}\n\nint cardValue2(int cardnum2)\n{\n  int val2;\n\n  val2 = cardnum2 % 13;\n\n  return(val2);\n}\n\nint cardValue3(int cardnum3)\n{\n  int val3;\n\n  val3 = cardnum3 % 13;\n\n  return(val3);\n}\n\nint cardValue4(int cardnum4)\n{\n  int val4;\n\n  val4 = cardnum4 % 13;\n\n  return(val4);\n}\n\nvoid printStatements(int cardnum1, int cardnum2, int cardnum3, int cardnum4, int value1, int value2, int value3, int value4)\n{\n  printf(\"1. Card generated: %d Card value: %d\\n\",cardnum1,value1);\n  printf(\"2. Card generated: %d Card value: %d\\n\",cardnum2,value2);\n  printf(\"3. Card generated: %d Card value: %d\\n\",cardnum3,value3);\n  printf(\"4. Card generated: %d Card value: %d\\n\",cardnum4,value4);\n\n  printf(\"Total points generated is: %d\\n\",value1 + value2 + value3 + value4);\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "unix", "logging", "syslog"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 5, "last_activity_date": 1443594193, "creation_date": 1443594193, "answer_id": 32859157, "question_id": 32859106, "link": "https://stackoverflow.com/questions/32859106/whats-the-meaning-of-0-big-number-in-syslog-h/32859157#32859157", "title": "What&#39;s the meaning of &quot;0-big number&quot; in syslog.h?", "body": "<p>The author just decided to call 28 set bits (<code>2^28 - 1</code>) a <em>big number</em> instead of writing it out. So it's not a term but means <em>zero</em> to <em>big number</em>.</p>\n"}], "owner": {"reputation": 3, "user_id": 1367336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14fe240b3e36c5d027b3295ac93dd029?s=128&d=identicon&r=PG", "display_name": "jishiyu", "link": "https://stackoverflow.com/users/1367336/jishiyu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 32859157, "answer_count": 1, "score": 0, "last_activity_date": 1443594214, "creation_date": 1443593974, "last_edit_date": 1443594214, "question_id": 32859106, "link": "https://stackoverflow.com/questions/32859106/whats-the-meaning-of-0-big-number-in-syslog-h", "title": "What&#39;s the meaning of &quot;0-big number&quot; in syslog.h?", "body": "<p>I'm chinese.I'm reading syslog.h,and i find a term \"0-big number\" which i can't understand.I can understand the hole paragraph meaning,but i'm still curious about the term \"0-big number\",could anybody explain the term?</p>\n\n<pre><code>/*\n* priorities/facilities are encoded into a single 32-bit quantity, where the\n* bottom 3 bits are the priority (0-7) and the top 28 bits are the facility\n* (0-big number).  Both the priorities and the facilities map roughly\n* one-to-one to strings in the syslogd(8) source code.  This mapping is\n* included in this file.\n\n/* facility codes */\n #define LOG_KERN    (0&lt;&lt;3)  /* kernel messages */\n #define LOG_USER    (1&lt;&lt;3)  /* random user-level messages */\n....\n*/\n</code></pre>\n"}, {"tags": ["c", "sdl"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1443593393, "post_id": 32858947, "comment_id": 53551138, "body": "What is <code>window</code>? Can you perhaps please try  to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> and show us?"}, {"owner": {"reputation": 1, "user_id": 5391632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/669ed2f287a069dfa3edd69809031c35?s=128&d=identicon&r=PG&f=1", "display_name": "raedon707", "link": "https://stackoverflow.com/users/5391632/raedon707"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1443593824, "post_id": 32858947, "comment_id": 53551300, "body": "sure. here it is #include &quot;SDL.h&quot; #include &lt;stdio.h&gt; #define window using namespace std; const int SCREEN_WIDTH = 640;  const int SCREEN_HEIGHT = 480; int main( int argc, char* args[] )  {            SDL_Surface* screenSurface =NULL;        if( SDL_Init( SDL_INIT_VIDEO ) &lt; 0 )        {             printf( &quot;SDL could not initialize! SDL_Error: %s\\n&quot;,SDL_GetError() );             }     else      {              window = SDL_CreateWindow( &quot;SDL Tutorial&quot;, SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_SHOWN );              }       if(window==NULL)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1443593874, "post_id": 32858947, "comment_id": 53551325, "body": "Oh, and please <i>edit your question</i> to show the code. :)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1443593932, "post_id": 32858947, "comment_id": 53551342, "body": "But already now I can say that this looks suspect: <code>#define window</code>, define it as <i>what</i>?"}, {"owner": {"reputation": 1, "user_id": 5391632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/669ed2f287a069dfa3edd69809031c35?s=128&d=identicon&r=PG&f=1", "display_name": "raedon707", "link": "https://stackoverflow.com/users/5391632/raedon707"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1443594027, "post_id": 32858947, "comment_id": 53551383, "body": "dude.. m new here.. and really i dont know what u mean.. please explain."}, {"owner": {"reputation": 1, "user_id": 5391632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/669ed2f287a069dfa3edd69809031c35?s=128&d=identicon&r=PG&f=1", "display_name": "raedon707", "link": "https://stackoverflow.com/users/5391632/raedon707"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1443594228, "post_id": 32858947, "comment_id": 53551447, "body": "yeah.. define it as it is.. window as a word as it is not a keyword or anything.."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5391632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/669ed2f287a069dfa3edd69809031c35?s=128&d=identicon&r=PG&f=1", "display_name": "raedon707", "link": "https://stackoverflow.com/users/5391632/raedon707"}, "edited": false, "score": 0, "creation_date": 1443597781, "post_id": 32859191, "comment_id": 53553186, "body": "dude.. I did exactly what u said.. now its showing &quot;SDL_Window does not name a type SDL_Window*window&quot; what to do now.. :("}, {"owner": {"reputation": 8647, "user_id": 426305, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/VYTU1.jpg?s=128&g=1", "display_name": "deimus", "link": "https://stackoverflow.com/users/426305/deimus"}, "edited": false, "score": 0, "creation_date": 1443598108, "post_id": 32859191, "comment_id": 53553358, "body": "Find where it is defined and include appropriate header"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 5, "last_activity_date": 1443595022, "last_edit_date": 1443595022, "creation_date": 1443594319, "answer_id": 32859191, "question_id": 32858947, "link": "https://stackoverflow.com/questions/32858947/c-primary-expressions-is-it-primary-expression-or-not/32859191#32859191", "title": "C primary expressions - Is it primary expression or not?", "body": "<p>The preprocessor is simple, when it has a macro it replaces that macro <em>as is</em>.</p>\n\n<p>For example if you have</p>\n\n<pre><code>#define window\n</code></pre>\n\n<p>then the preprocessor will replace all occurrences of the symbol <code>windows</code> with <strong><em>nothing</em></strong>!</p>\n\n<p>So for the statement</p>\n\n<pre><code>window = SDL_CreateWindow(...);\n</code></pre>\n\n<p>it will look like this after preprocessing</p>\n\n<pre><code> = SDL_CreateWindow(...);\n</code></pre>\n\n<p>That's hardly valid code.</p>\n\n<p>If you intend for <code>window</code> to be a variable, a pointer to <code>SDL_Window</code>, then you should define it as such:</p>\n\n<pre><code>SDL_Window *window;\n</code></pre>\n\n<p>and <em>remove</em> the preprocessor macro.</p>\n\n<hr>\n\n<p>I agree that the terminology is slightly confusing here. You use the preprocessor to <em>define</em> macros, and then you can <em>define</em> variables, structures, functions etc. You can also <em>declare</em> variables, structures, functions etc.</p>\n\n<p>The preprocessor is what it sounds like. It used to be a separate program that read a source file, did some <em>processing</em> on it (like macro replacement and include file inclusion) and then spat out a temporary file that the compiler then used. These days the preprocessor could be built into the compiler, and run at an early stage as part of the complete compilation process. Most compilers allow you to output the preprocessed source for you to look at, I suggest you try to do that with your code. Macros defined for the preprocessor are not in the source fed to the compiler, those lines are removed by the preprocessor.</p>\n\n<p>Then comes the definition of variables etc. This is completely different from the definition of preprocessor macros. A variable definition tells the compilers \"here is a variable with the name this-and-that, of some type, please allocate memory to store the variable\".</p>\n\n<p>A variable <em>declaration</em> is similar to a definition, but it only tells the compiler \"there is a variable named this-and-that, of some specific type, and it exists somewhere\".</p>\n\n<p>Variables can be both declared and defined at the same time, example</p>\n\n<pre><code>void function(void)\n{\n    int a;  // Declares and defines the variable\n    ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5391632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/669ed2f287a069dfa3edd69809031c35?s=128&d=identicon&r=PG&f=1", "display_name": "raedon707", "link": "https://stackoverflow.com/users/5391632/raedon707"}, "edited": false, "score": 0, "creation_date": 1443597869, "post_id": 32859421, "comment_id": 53553240, "body": "its not working.. now it&#39;s saying &quot;SDL_Window does not name a type SDL_Window*window&quot;....??!"}], "tags": [], "owner": {"reputation": 2799, "user_id": 2185245, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/jHjz4.jpg?s=128&g=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/2185245/abhishek"}, "is_accepted": false, "score": 0, "last_activity_date": 1443595156, "creation_date": 1443595156, "answer_id": 32859421, "question_id": 32858947, "link": "https://stackoverflow.com/questions/32858947/c-primary-expressions-is-it-primary-expression-or-not/32859421#32859421", "title": "C primary expressions - Is it primary expression or not?", "body": "<p>Modify your program this way:</p>\n\n<pre><code>#include \"SDL.h\" \n#include &lt;stdio.h&gt; \nusing namespace std;\n\nconst int SCREEN_WIDTH = 640; \nconst int SCREEN_HEIGHT = 480; \nSDL_Window *window;\nint main( int argc, char* args[] ) \n{\n    SDL_Surface* screenSurface =NULL; \n    if( SDL_Init( SDL_INIT_VIDEO ) &lt; 0 ) \n    { \n        printf( \"SDL could not initialize! SDL_Error: %s\\n\",SDL_GetError() ); \n    } \n    else \n    {  \n        window = SDL_CreateWindow( \"SDL Tutorial\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_SHOWN );\n    } \n    if(window==NULL) \n    { \n        window = SDL_CreateWindow( \"SDL Tutorial\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_SHOWN ); \n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1443595514, "creation_date": 1443595514, "answer_id": 32859519, "question_id": 32858947, "link": "https://stackoverflow.com/questions/32858947/c-primary-expressions-is-it-primary-expression-or-not/32859519#32859519", "title": "C primary expressions - Is it primary expression or not?", "body": "<p>Change</p>\n\n<pre><code>#define window\n</code></pre>\n\n<p>to</p>\n\n<pre><code>SDL_Window * window;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5391632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/669ed2f287a069dfa3edd69809031c35?s=128&d=identicon&r=PG&f=1", "display_name": "raedon707", "link": "https://stackoverflow.com/users/5391632/raedon707"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1443596469, "creation_date": 1443593230, "last_edit_date": 1443596469, "question_id": 32858947, "link": "https://stackoverflow.com/questions/32858947/c-primary-expressions-is-it-primary-expression-or-not", "title": "C primary expressions - Is it primary expression or not?", "body": "<p>I'm using this basic <a href=\"/questions/tagged/sdl\" class=\"post-tag\" title=\"show questions tagged &#39;sdl&#39;\" rel=\"tag\">sdl</a> program to learn print screen. </p>\n\n<p>I get the following error when I run the application:</p>\n\n<blockquote>\n  <p>error: expected primary expression before '=' token\"</p>\n</blockquote>\n\n<pre><code>#include \"SDL.h\" \n#include &lt;stdio.h&gt; \n#define window \nusing namespace std; \nconst int SCREEN_WIDTH = 640; \nconst int SCREEN_HEIGHT = 480; \nint main( int argc, char* args[] ) \n{\n    SDL_Surface* screenSurface =NULL; \n    if( SDL_Init( SDL_INIT_VIDEO ) &lt; 0 ) \n    { \n        printf( \"SDL could not initialize! SDL_Error: %s\\n\",SDL_GetError() ); \n    } \n    else \n    {  \n        window = SDL_CreateWindow( \"SDL Tutorial\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_SHOWN );\n    } \n    if(window==NULL) \n    { \n        window = SDL_CreateWindow( \"SDL Tutorial\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_SHOWN ); \n    }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "error-handling"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1443592206, "post_id": 32858688, "comment_id": 53550611, "body": "Basic thing: <code>=</code> should be <code>==</code>"}, {"owner": {"reputation": 9460, "user_id": 1885193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Vsd6.png?s=128&g=1", "display_name": "Gangadhar", "link": "https://stackoverflow.com/users/1885193/gangadhar"}, "edited": false, "score": 0, "creation_date": 1443592308, "post_id": 32858688, "comment_id": 53550667, "body": "<b>if (*(scroll+i)=&quot; &quot;) ==&gt;  if (*(scroll+i)==&#39; &#39;)</b> compare characters not character and string."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1443592344, "creation_date": 1443592344, "answer_id": 32858735, "question_id": 32858688, "link": "https://stackoverflow.com/questions/32858688/how-to-check-spaces-in-a-string-c/32858735#32858735", "title": "How to check spaces in a string C?", "body": "<p>In C, <code>=</code> is assignment operator, and <code>==</code> is equality operator. You need to use the later one.</p>\n\n<p>That said, there is a nice library function, named <a href=\"http://linux.die.net/man/3/strtok\" rel=\"nofollow\"><code>strtok()</code></a> which can make your life easier. Just pass the string and a delimiter, (here, the space <code></code>) and it will return the token to you, for which you can print the first character to get the initials.</p>\n"}, {"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 0, "last_activity_date": 1443592944, "last_edit_date": 1443592944, "creation_date": 1443592621, "answer_id": 32858806, "question_id": 32858688, "link": "https://stackoverflow.com/questions/32858688/how-to-check-spaces-in-a-string-c/32858806#32858806", "title": "How to check spaces in a string C?", "body": "<p>along with strtok or strchr here is a simple way to implement , some boundary conditions are missing like name ending with single letter etc</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void)\n{\n\n        int i = 0;\n        char scroll[100] = {\"kang cheng junga\"};\n        char *p = scroll; // point to base\n        printf(\"%c\", *p ); // first letter is almost always certain\n        while( *p != '\\0' ) { // till end of String\n\n                if ( *(p-1)     == ' ' &amp;&amp; *(p+1) != '\\0') { // If previous is space and next letter exists\n                        printf(\"%c\", *p );      // take it save it or print it\n                }\n                p ++ ; //proceed\n        }\n\n        return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 5319766, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/29a9385e735c574a9ce584ba4c0578bf?s=128&d=identicon&r=PG&f=1", "display_name": "naggarwal11", "link": "https://stackoverflow.com/users/5319766/naggarwal11"}, "edited": false, "score": 0, "creation_date": 1443592828, "post_id": 32858822, "comment_id": 53550887, "body": "@noggy Also Why have you taken the limits to 100?. Unnecessarily executing the <b>for loop 100 times</b>"}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 1, "creation_date": 1443592985, "post_id": 32858822, "comment_id": 53550951, "body": "*(scroll+i) == &quot; &quot; ; -&gt; *(scroll+i) == &#39; &#39; ;"}, {"owner": {"reputation": 215, "user_id": 5076711, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1028424927168897/picture?type=large", "display_name": "Elliot Tregoning", "link": "https://stackoverflow.com/users/5076711/elliot-tregoning"}, "edited": false, "score": 0, "creation_date": 1508709273, "post_id": 32858822, "comment_id": 80706216, "body": "This method throws warning: <code>comparison between pointer and integer</code> and  I don&#39;t allow my code to have any warnings, it&#39;s bad practice."}], "tags": [], "owner": {"reputation": 107, "user_id": 5319766, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/29a9385e735c574a9ce584ba4c0578bf?s=128&d=identicon&r=PG&f=1", "display_name": "naggarwal11", "link": "https://stackoverflow.com/users/5319766/naggarwal11"}, "is_accepted": false, "score": 1, "last_activity_date": 1527234046, "last_edit_date": 1527234046, "creation_date": 1443592695, "answer_id": 32858822, "question_id": 32858688, "link": "https://stackoverflow.com/questions/32858688/how-to-check-spaces-in-a-string-c/32858822#32858822", "title": "How to check spaces in a string C?", "body": "<p>The Error you are getting is because of the assignment operator (=) . </p>\n\n<pre><code>if (*(scroll+i)=\" \")// assigning a value(blank)\n{\n    printf (*(scroll+i+1));\n}\n\nif (*(scroll+i) == ' ')//Comparing it with a value (blank)\n{\n    printf (*(scroll+i+1));\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 6415329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d590ed520089aa2676479be9514c5cea?s=128&d=identicon&r=PG&f=1", "display_name": "learnerPy", "link": "https://stackoverflow.com/users/6415329/learnerpy"}, "edited": false, "score": 0, "creation_date": 1590257153, "post_id": 32858998, "comment_id": 109615558, "body": "I am curious how to print the rest of the string after detecting the first white space, like &quot;cheng junga&quot; in this case"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 123, "user_id": 6415329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d590ed520089aa2676479be9514c5cea?s=128&d=identicon&r=PG&f=1", "display_name": "learnerPy", "link": "https://stackoverflow.com/users/6415329/learnerpy"}, "edited": false, "score": 1, "creation_date": 1590282790, "post_id": 32858998, "comment_id": 109622508, "body": "The simple way is <code>p = strchr (scroll, &#39; &#39;); puts (p + 1);</code>"}, {"owner": {"reputation": 123, "user_id": 6415329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d590ed520089aa2676479be9514c5cea?s=128&d=identicon&r=PG&f=1", "display_name": "learnerPy", "link": "https://stackoverflow.com/users/6415329/learnerpy"}, "edited": false, "score": 0, "creation_date": 1590319433, "post_id": 32858998, "comment_id": 109630443, "body": "This is working perfectly. Now as soon as I am trying to read &#39;scroll&#39; via input stream      &quot; for (i=0;i&lt;100;i++){     scanf(&quot;%s&quot;, scroll[i]);     } &quot; program is not proceeding further after scanning user input. Any tips?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 123, "user_id": 6415329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d590ed520089aa2676479be9514c5cea?s=128&d=identicon&r=PG&f=1", "display_name": "learnerPy", "link": "https://stackoverflow.com/users/6415329/learnerpy"}, "edited": false, "score": 1, "creation_date": 1590361300, "post_id": 32858998, "comment_id": 109644968, "body": "When you start reading from an input stream, you should read a line-at-a-time into a buffer with <code>fgets()</code> and then parse what you need from the buffer using <code>sscanf()</code>. This ensures you consume a line of input each read and a variation in format does not break your input. For example <code>char buf[256]; while (fgets (buf, sizeof buf, stdin)) { char first[64], middle[64], last[64]; if (sscanf (buf, &quot;%s %s %s&quot;, first, middle, last) == 3) printf (&quot;\\nfirst: %s\\nmiddle: %s\\nlast: %s\\n&quot;, first, middle, last); }</code> You can copy <code>buf</code> or any of the substrings to save as needed."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 3, "last_activity_date": 1443594169, "last_edit_date": 1443594169, "creation_date": 1443593501, "answer_id": 32858998, "question_id": 32858688, "link": "https://stackoverflow.com/questions/32858688/how-to-check-spaces-in-a-string-c/32858998#32858998", "title": "How to check spaces in a string C?", "body": "<p>In addition to <code>strtok</code>, this is one time you can also make use of <code>strpbrk</code> to easily find each <code>space</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main (void) {\n\n    char scroll[100] = \"kang cheng junga\";\n    char *p = scroll;\n\n    printf (\"\\n full name: %s\\n\", scroll);\n    printf (\" initials : %c\", *p);\n\n    while ((p = strpbrk (p, \" \")))\n            printf (\"%c\", *++p);\n\n    printf (\"\\n\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/initials\n\n full name: kang cheng junga\n initials : kcj\n</code></pre>\n\n<p>You can also eliminate the dependence on <code>string.h</code> with an alternative version that uses pointers alone:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void) {\n\n    char scroll[100] = \"kang cheng junga\";\n    char *p = scroll;\n\n    printf (\"\\n full name: %s\\n\", scroll);\n    printf (\" initials : %c\", *p);\n\n    while (*p++)\n        if (*p == ' ' &amp;&amp; *++p)\n            printf (\"%c\", *p);\n\n    printf (\"\\n\\n\");\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 5391604, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-tC_5iT1dLZA/AAAAAAAAAAI/AAAAAAAAAU8/a1Z1FEFaZ3c/photo.jpg?sz=128", "display_name": "noggy", "link": "https://stackoverflow.com/users/5391604/noggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23305, "favorite_count": 0, "accepted_answer_id": 32858998, "answer_count": 4, "score": -2, "last_activity_date": 1527234046, "creation_date": 1443592145, "last_edit_date": 1443592469, "question_id": 32858688, "link": "https://stackoverflow.com/questions/32858688/how-to-check-spaces-in-a-string-c", "title": "How to check spaces in a string C?", "body": "<p>I am trying to have my program take a name as input from the user and then print out the initials of that name. i.e. tommy brown --> tb</p>\n\n<p>What I have so far is this:</p>\n\n<pre><code>int main (void)\n{\n\nchar scroll[100] = {\"kang cheng junga\"};\nprintf (\"%c\\n\", *(scroll+2));\n\nfor (int i=0; i&lt;100; i++)\n{\n    if (*(scroll+i)=\" \")\n    {\n        printf (*(scroll+i+1));\n    }\n}\n</code></pre>\n\n<p>I keep getting this error:</p>\n\n<blockquote>\n  <p>error: incompatible pointer to integer\n        conversion assigning to 'char' from 'char [2]'</p>\n  \n  <p>[-Werror,-Wint-conversion]\n      if (*(scroll+i)=\" \")</p>\n  \n  <p>error: using the result of an assignment as a\n        condition without parentheses </p>\n  \n  <p>[-Werror,-Wparentheses]\n      if (*(scroll+i)=\" \")</p>\n</blockquote>\n\n<p>Can anyone tell me how I've screwed this up? I am having a hard time understanding how * and &amp; function in a C. I am a beginner so I don't really know what I'm doing. </p>\n"}, {"tags": ["c", "fork", "shared-memory"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1443591772, "post_id": 32858557, "comment_id": 53550459, "body": "When you fork a new process, you actually create a new <i>process</i>, and the memory for any process is separate from any other process. So yes you need shared memory, <i>or</i> you could use <i>threads</i> instead."}, {"owner": {"reputation": 10555, "user_id": 194635, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/895e165418bff196cc08e94af29b650f?s=128&d=identicon&r=PG", "display_name": "Stas", "link": "https://stackoverflow.com/users/194635/stas"}, "edited": false, "score": 0, "creation_date": 1443592129, "post_id": 32858557, "comment_id": 53550586, "body": "See <a href=\"http://stackoverflow.com/questions/13274786/how-to-share-memory-between-process-fork\" title=\"how to share memory between process fork\">stackoverflow.com/questions/13274786/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 5391572, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207880779242089/picture?type=large", "display_name": "Teodosis Gavriel", "link": "https://stackoverflow.com/users/5391572/teodosis-gavriel"}, "edited": false, "score": 0, "creation_date": 1443592264, "post_id": 32858557, "comment_id": 53550642, "body": "how do I implement shared memory in this example? i read this, but trully didnt understand must of it <a href=\"http://www.cs.cf.ac.uk/Dave/C/node27.html\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 11, "user_id": 5391572, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207880779242089/picture?type=large", "display_name": "Teodosis Gavriel", "link": "https://stackoverflow.com/users/5391572/teodosis-gavriel"}, "reply_to_user": {"reputation": 10555, "user_id": 194635, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/895e165418bff196cc08e94af29b650f?s=128&d=identicon&r=PG", "display_name": "Stas", "link": "https://stackoverflow.com/users/194635/stas"}, "edited": false, "score": 0, "creation_date": 1443592478, "post_id": 32858557, "comment_id": 53550744, "body": "@Stas so like that example the glob_var in my case should be all the matrix? how do i initialize them?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1443592682, "post_id": 32858557, "comment_id": 53550835, "body": "Is it a <i>requirement</i> that you must use processes and shared memory? Otherwise threads is much easier."}, {"owner": {"reputation": 11, "user_id": 5391572, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207880779242089/picture?type=large", "display_name": "Teodosis Gavriel", "link": "https://stackoverflow.com/users/5391572/teodosis-gavriel"}, "edited": false, "score": 0, "creation_date": 1443593489, "post_id": 32858557, "comment_id": 53551176, "body": "unfortunetly yes, it is a requierement :/"}], "answers": [{"comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1443593828, "post_id": 32858881, "comment_id": 53551304, "body": "Are you sure that using pipes will be <i>much</i> slower than shared memory? Imagine each child processes one row, binary writes it to a pipe (one pipe per child), and parent process just collates what it reads from the pipes. It should be harder to write, but not sure about the time. But I&#39;m pretty sure it would be faster than using shared memory and a global lock at each variable write (upvoted anyway :-) )."}, {"owner": {"reputation": 11, "user_id": 5391572, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207880779242089/picture?type=large", "display_name": "Teodosis Gavriel", "link": "https://stackoverflow.com/users/5391572/teodosis-gavriel"}, "edited": false, "score": 0, "creation_date": 1443594143, "post_id": 32858881, "comment_id": 53551416, "body": "but as @lorehead said, i should not have to use locks because each process would write to a diferent part of the array, so there would never be two process written on the same memory space, im i right?"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1443594151, "post_id": 32858881, "comment_id": 53551420, "body": "Atomic variables should not require a global lock at each write.  In fact, if no process\u2019 section of the array shares a cache line with any other, the processes should all just be able to write to their section with no overhead at all.  You could, I suppose, also use a different shared memory chunk for each object.  But to answer your question: consider how many copies of each piece of the array would have to be made to transfer them over pipes."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1443594545, "post_id": 32858881, "comment_id": 53551567, "body": "Here\u2019s a kind of hackish solution that avoids having to deal with any atomic stuff: declare the rows as an array of pointers to row vectors, then initialize each to a segment of shared memory that only one daughter process will open.  It\u2019s not a great solution in the real world because you\u2019ll have no cache coherency and a lot of overhead, but it keeps the chunks of memory everyone touches completely separate in a transparent way."}], "tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 2, "last_activity_date": 1443593858, "last_edit_date": 1443593858, "creation_date": 1443592943, "answer_id": 32858881, "question_id": 32858557, "link": "https://stackoverflow.com/questions/32858557/problems-with-c-forks-wrong-results-probably-shared-memory/32858881#32858881", "title": "Problems with C forks, wrong results, probably shared memory", "body": "<p>Not giving a complete solution because it\u2019s a homework assignment, but the functions you use to get shared memory on Unix are documented here: <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/shmget.html\" rel=\"nofollow\">http://pubs.opengroup.org/onlinepubs/009695399/functions/shmget.html</a></p>\n\n<p>You would call <code>shmget()</code> and then pass the identifier that gives you to <code>shmat()</code>, in each child process, to get a pointer to shared memory.</p>\n\n<p>One alternative is to have each process pass back its results in a pipe, and copy them, but this will be much slower.  Another is to use threads instead of processes, since threads share memory.  Another is to pass messages.  Another is a memory-mapped file.  But shared memory that you cast to a pointer to a structure is the simplest way to go, and has the best performance.</p>\n\n<p>Finally, if you are writing to the same shared memory, you need to be careful not to let two processes write to the same memory.  If you open one process per row, and your rows are properly aligned, you shouldn\u2019t have an issue, but the safe way to do this is to use either locks or atomic variables.</p>\n"}], "owner": {"reputation": 11, "user_id": 5391572, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207880779242089/picture?type=large", "display_name": "Teodosis Gavriel", "link": "https://stackoverflow.com/users/5391572/teodosis-gavriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1443593858, "creation_date": 1443591534, "last_edit_date": 1443593108, "question_id": 32858557, "link": "https://stackoverflow.com/questions/32858557/problems-with-c-forks-wrong-results-probably-shared-memory", "title": "Problems with C forks, wrong results, probably shared memory", "body": "<p>I have an assignment to do a matrix multiplication with forks, using shared memory, then compare time results with the multiplication without forks, so here is the multiplication without them:</p>\n\n<pre><code>int matrizA[Am][An];\nint matrizB[An][Bp];\n\n//here i fill the matrix from a .txt file\n\nint matrizR[Am][Bp];\nint a,b,c;\nfor (a=0; a &lt; Am; a++){\n    for (b = 0; b &lt; Bp; b++)\n    {\n        matrizR[a][b] = 0;\n        for (c=0; c&lt;An; c++){\n            matrizR[a][b] += matrizA[a][c] * matrizB[c][b]; \n        }\n    }\n}\n</code></pre>\n\n<p>Then i try to implement forks but the results are wrong, im not sure if  I have to implement shared memory and where, are matrizA, matrizB, and matrizR2 should be shared? how i do this?</p>\n\n<pre><code>int matrizR2[Am][Bp];\npid_t pids[Am][Bp];\nint h,j;\n\n/* Start children. */TY\nfor (h = 0; h &lt; Am; ++h) {\n    for (j=0; j&lt;Bp ; ++j){\n      if ((pids[h][j] = fork()) &lt; 0) {\n        perror(\"fork\");\n        abort();\n      } else if (pids[h][j] == 0) {\n        matrizR2[h][j] = 0;\n        for (c=0; c&lt;An; c++){\n            matrizR2[h][j] += matrizA[h][c] * matrizB[c][j]; \n        }\n        printf(\"im fork %d,%d\\n\",h,j);\n        exit(0);\n      }\n    }\n}\n/* Wait for children to exit. */\nint status;\npid_t pid;\nwhile (n &gt; 0) {\n  pid = wait(&amp;status);\n  --n; \n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 2, "creation_date": 1443591305, "post_id": 32858478, "comment_id": 53550288, "body": "One option, which doesn&#39;t require the use of any data structures other than an array, would be to first <i>sort</i> the array, and second to walk through the array, incrementing a counter every time you hit a new value."}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 1, "creation_date": 1443591426, "post_id": 32858478, "comment_id": 53550331, "body": "Another option, if you <i>can</i> use more exotic data structures, would be to use a map and walk through the array once, inserting the same value for each number.  Then you can simply check the <i>number</i> of keys in your map, which is the number of distinct values."}, {"owner": {"reputation": 11824, "user_id": 3107430, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/55fDR.jpg?s=128&g=1", "display_name": "Domysee", "link": "https://stackoverflow.com/users/3107430/domysee"}, "edited": false, "score": 2, "creation_date": 1443593552, "post_id": 32858478, "comment_id": 53551205, "body": "Why did you edit the question so that no one can see what it was?"}, {"owner": {"reputation": 3814, "user_id": 2776146, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/pIofO.jpg?s=128&g=1", "display_name": "TryinHard", "link": "https://stackoverflow.com/users/2776146/tryinhard"}, "edited": false, "score": 0, "creation_date": 1443593722, "post_id": 32858478, "comment_id": 53551268, "body": "Please keep the question as it is. It may be useful for other programmers as refeerence"}, {"owner": {"reputation": 574431, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 1, "creation_date": 1443594363, "post_id": 32858478, "comment_id": 53551506, "body": "Why did you remove the content of your question?  That is NOT how this site works.  You should leave your original question there so this can be part of the Stack Overflow repository of information from previously asked and answered questions.  If you don&#39;t want to restore the content of your question, then we will need to delete it as it is worthless as is since there&#39;s no question any more.  In the future, you can indicate to the community that your question has been answered by clicking the green checkmark next to the best answer that was posted.  That also earns you reputation points."}, {"owner": {"reputation": 574431, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 1, "creation_date": 1443594495, "post_id": 32858478, "comment_id": 53551549, "body": "I have flagged this for moderator attention.  The question needs to either be rolled back to the prior version that shows the actual content of the question or it needs to be deleted."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5391513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03976d47e078541492e4eb6fa96c438f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Sand", "link": "https://stackoverflow.com/users/5391513/peter-sand"}, "edited": false, "score": 0, "creation_date": 1443592238, "post_id": 32858542, "comment_id": 53550627, "body": "How would we check to see if an item from existing array is in the new array?"}, {"owner": {"reputation": 5479, "user_id": 1823740, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/JQ1F0.jpg?s=128&g=1", "display_name": "Dipak", "link": "https://stackoverflow.com/users/1823740/dipak"}, "reply_to_user": {"reputation": 25, "user_id": 5391513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03976d47e078541492e4eb6fa96c438f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Sand", "link": "https://stackoverflow.com/users/5391513/peter-sand"}, "edited": false, "score": 0, "creation_date": 1443941239, "post_id": 32858542, "comment_id": 53687442, "body": "Straight forward is, get each item from new array and compare it with current item in existing array."}], "tags": [], "owner": {"reputation": 5479, "user_id": 1823740, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/JQ1F0.jpg?s=128&g=1", "display_name": "Dipak", "link": "https://stackoverflow.com/users/1823740/dipak"}, "is_accepted": false, "score": 1, "last_activity_date": 1443591459, "creation_date": 1443591459, "answer_id": 32858542, "question_id": 32858478, "link": "https://stackoverflow.com/questions/32858478/array-in-java-repeat/32858542#32858542", "title": "Array in JAVA., repeat?", "body": "<pre><code>#Find unique items from array:\n1. Create one new array\n2. Take each item from existing array\n3. Check if the item is exist in new array\n4. **If not exist push the item into new array** else go for next item\n5. After iterating all item in array get the length of new array\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 1, "creation_date": 1443607318, "post_id": 32858593, "comment_id": 53558869, "body": "A hash is too complex. I&#39;d create a binary tree with left nodes having smaller values, right nodes having larger values. No need to deal with hash collisions; manageable space and time requirements."}], "tags": [], "owner": {"reputation": 3814, "user_id": 2776146, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/pIofO.jpg?s=128&g=1", "display_name": "TryinHard", "link": "https://stackoverflow.com/users/2776146/tryinhard"}, "is_accepted": false, "score": 2, "last_activity_date": 1443591683, "creation_date": 1443591683, "answer_id": 32858593, "question_id": 32858478, "link": "https://stackoverflow.com/questions/32858478/array-in-java-repeat/32858593#32858593", "title": "Array in JAVA., repeat?", "body": "<p>Approach 1(<strong>O(nlogn)</strong>):</p>\n\n<ol>\n<li>Sort the array.</li>\n<li>Compare the adjacent elements in array</li>\n<li>Increment the count whenever the adjacent elements are unequal. Please take care of three consecutive same elements using an extra variable.</li>\n</ol>\n\n<p>Approach 2(<strong>O(n)</strong> but space complexity of <strong>O(n)</strong>):</p>\n\n<ol>\n<li>Create a Hash Table for  value.</li>\n<li>Insert a value if not present in the hash table.</li>\n<li>Count and print the values for present in hashtable </li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 5391513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03976d47e078541492e4eb6fa96c438f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Sand", "link": "https://stackoverflow.com/users/5391513/peter-sand"}, "edited": false, "score": 0, "creation_date": 1443593442, "post_id": 32858781, "comment_id": 53551160, "body": "Thanks, yep, I used the another method."}], "tags": [], "owner": {"reputation": 676, "user_id": 4582545, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-6vi4A4Rsfjk/AAAAAAAAAAI/AAAAAAAAAB4/IiKBbK21vN4/photo.jpg?sz=128", "display_name": "shakeel osmani", "link": "https://stackoverflow.com/users/4582545/shakeel-osmani"}, "is_accepted": false, "score": 0, "last_activity_date": 1443592531, "creation_date": 1443592531, "answer_id": 32858781, "question_id": 32858478, "link": "https://stackoverflow.com/questions/32858478/array-in-java-repeat/32858781#32858781", "title": "Array in JAVA., repeat?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main ()\n{\n    int n[10]  = {1,2,5,5,3,4,1,4,5,11};\n    int count = 0; int i = 0;\n    for (i=0; i&lt; 10; i++)\n    {\n        int j;\n            for (j=0; j&lt;i; j++)\n                if (n[i] == n[j])\n                break;\n            if (i == j)\n                count += 1;\n    }\n\n     printf(\"The counts are: %d distinct elements\", count);\n\n     return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5391513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03976d47e078541492e4eb6fa96c438f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Sand", "link": "https://stackoverflow.com/users/5391513/peter-sand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1444979497, "creation_date": 1443591077, "last_edit_date": 1444979497, "question_id": 32858478, "link": "https://stackoverflow.com/questions/32858478/array-in-java-repeat", "title": "Array in JAVA., repeat?", "body": "<p>I'm writing a function using java language that takes in a 1D array and the size of the array as inputs to the function. I want to find out how many function values of are in the array. How would I do this?</p>\n"}, {"tags": ["c", "loops", "printing", "draw"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1443590463, "post_id": 32858331, "comment_id": 53549982, "body": "Please make an attempt to do your own work. Stackoverflow is not a code writing service. If you have any specific difficulties with your code then please post it (as an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>), explain the problem and ask a specific question."}, {"owner": {"reputation": 71, "user_id": 5306812, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/924727930883454/picture?type=large", "display_name": "Leonardo Dias", "link": "https://stackoverflow.com/users/5306812/leonardo-dias"}, "edited": false, "score": 0, "creation_date": 1443590517, "post_id": 32858331, "comment_id": 53550003, "body": "I have made an attempt"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1443590549, "post_id": 32858331, "comment_id": 53550019, "body": "How about the &quot;post the code and ask a specific question&quot; part?"}, {"owner": {"reputation": 71, "user_id": 5306812, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/924727930883454/picture?type=large", "display_name": "Leonardo Dias", "link": "https://stackoverflow.com/users/5306812/leonardo-dias"}, "edited": false, "score": 0, "creation_date": 1443590573, "post_id": 32858331, "comment_id": 53550029, "body": "Sorry, it&#39;s just that I thought my code was too bad to show you guys, but ill post it anyway... its inefficient"}, {"owner": {"reputation": 71, "user_id": 5306812, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/924727930883454/picture?type=large", "display_name": "Leonardo Dias", "link": "https://stackoverflow.com/users/5306812/leonardo-dias"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1443590614, "post_id": 32858331, "comment_id": 53550046, "body": "How is this not specific? I have specified everything, i even showed examples of inputs and outputs!"}, {"owner": {"reputation": 71, "user_id": 5306812, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/924727930883454/picture?type=large", "display_name": "Leonardo Dias", "link": "https://stackoverflow.com/users/5306812/leonardo-dias"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1443590796, "post_id": 32858331, "comment_id": 53550105, "body": "it&#39;s not &quot;give me the code&quot;, if at least I could get some ideas of how I should do it.... I don&#39;t know why some of you step on beginners so much here..."}, {"owner": {"reputation": 829, "user_id": 1894478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/844dae39b47a501f7ca3d88cbe6f1909?s=128&d=identicon&r=PG", "display_name": "EvgeniyZh", "link": "https://stackoverflow.com/users/1894478/evgeniyzh"}, "edited": false, "score": 0, "creation_date": 1443591123, "post_id": 32858331, "comment_id": 53550211, "body": "You print N asterisks in first line, then in each next line you print asterisk, N-k-1 spaces and one more asterisk where k is number of line until k == N-1, and then one asterisk in last line"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1443591132, "post_id": 32858331, "comment_id": 53550216, "body": "I apologize if that is not your intention. But you need to view it from the reader&#39;s perspective. You dumped an assignment question with no attempted code and no specific question. What conclusion would you expect people to come to? Even now you still haven&#39;t asked a question. Are you saying the code is too long, or it&#39;s taking too long to run or is it just generally how can the code be better written, or...? I guess it is the latter...but just trying to explain that it is your job to make the question clear and not ours to guess."}, {"owner": {"reputation": 71, "user_id": 5306812, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/924727930883454/picture?type=large", "display_name": "Leonardo Dias", "link": "https://stackoverflow.com/users/5306812/leonardo-dias"}, "edited": false, "score": 0, "creation_date": 1443591206, "post_id": 32858331, "comment_id": 53550257, "body": "For example, someone could answer this as &quot;Make a loop with these parameters&quot; which would very much help me, and then later i will be the one helping..."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1443591260, "post_id": 32858331, "comment_id": 53550280, "body": "You seem to be conflating the task of devising an algorithm with the task of implementing an algorithm. If you&#39;ve devised an algorithm, tell us what it is. If you haven&#39;t devised an algorithm, your code is very unlikely to work. It&#39;s worth taking the time to carefully write out an algorithm and convince yourself that it&#39;s correct before you start coding."}, {"owner": {"reputation": 71, "user_id": 5306812, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/924727930883454/picture?type=large", "display_name": "Leonardo Dias", "link": "https://stackoverflow.com/users/5306812/leonardo-dias"}, "edited": false, "score": 0, "creation_date": 1443591935, "post_id": 32858331, "comment_id": 53550515, "body": "Well I know that, it was just an idea I had for the triangle, and I know this algorithm is not correct but that&#39;s the only thing i could come up with..."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 5306812, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/924727930883454/picture?type=large", "display_name": "Leonardo Dias", "link": "https://stackoverflow.com/users/5306812/leonardo-dias"}, "edited": false, "score": 0, "creation_date": 1443591720, "post_id": 32858499, "comment_id": 53550438, "body": "thanks, I thought maybe I could make a function that would print a line with two *(asterisks) on each side with a specified size like: 1 * *, 2 would print *  *, 3 *   * you know?"}, {"owner": {"reputation": 71, "user_id": 5306812, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/924727930883454/picture?type=large", "display_name": "Leonardo Dias", "link": "https://stackoverflow.com/users/5306812/leonardo-dias"}, "edited": false, "score": 0, "creation_date": 1443591826, "post_id": 32858499, "comment_id": 53550470, "body": "a function that takes in an integer that will be the number of spaces between 2 asterisks"}, {"owner": {"reputation": 107, "user_id": 5319766, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/29a9385e735c574a9ce584ba4c0578bf?s=128&d=identicon&r=PG&f=1", "display_name": "naggarwal11", "link": "https://stackoverflow.com/users/5319766/naggarwal11"}, "reply_to_user": {"reputation": 71, "user_id": 5306812, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/924727930883454/picture?type=large", "display_name": "Leonardo Dias", "link": "https://stackoverflow.com/users/5306812/leonardo-dias"}, "edited": false, "score": 0, "creation_date": 1443591850, "post_id": 32858499, "comment_id": 53550479, "body": "@LeonardoDias Yes, there can be a number of ways to solve it.You can choose the one you like the most if the complexity doesn&#39;t matters ."}], "tags": [], "owner": {"reputation": 107, "user_id": 5319766, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/29a9385e735c574a9ce584ba4c0578bf?s=128&d=identicon&r=PG&f=1", "display_name": "naggarwal11", "link": "https://stackoverflow.com/users/5319766/naggarwal11"}, "is_accepted": false, "score": 1, "last_activity_date": 1443592251, "last_edit_date": 1443592251, "creation_date": 1443591193, "answer_id": 32858499, "question_id": 32858331, "link": "https://stackoverflow.com/questions/32858331/print-empty-asterisk-triangle-c/32858499#32858499", "title": "print empty asterisk triangle c", "body": "<p>I'm just providing you a logic , you can work upon it . \nYou can take three loops. One for row say i , second for * (asterisk ) say j , and third for the white spaces ( empty triangle) say k. Now , I hope you know how to make a triangle by using i,j .\nThe logic for k could be it should be executed 1 less then the rows' loop(i.e. the jth one) and should print a blank space(\" \").  </p>\n\n<p>You can divide your Problem in the modules like this</p>\n\n<pre><code>print_asterisk(n);\nprint_hollow_asterisk();\nprint_asterisk(1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "is_accepted": false, "score": 1, "last_activity_date": 1443591321, "creation_date": 1443591321, "answer_id": 32858518, "question_id": 32858331, "link": "https://stackoverflow.com/questions/32858331/print-empty-asterisk-triangle-c/32858518#32858518", "title": "print empty asterisk triangle c", "body": "<p>You need to think about an algorithm for printing out the triangle. There are three separate types of lines you (may) need to draw:</p>\n\n<ol>\n<li>A row full of N asterisks</li>\n<li>A row with an asterisk at the start, one at the end and N-2 spaces in the middle.</li>\n<li>A row with 1 asterisk (which is just a subset of #1).</li>\n</ol>\n\n<p>Step 1 - work out <em>how</em> to print out the above rows</p>\n\n<p>Step 2 - work out <em>when</em> to print out the above rows</p>\n"}, {"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 1, "last_activity_date": 1443592001, "creation_date": 1443592001, "answer_id": 32858656, "question_id": 32858331, "link": "https://stackoverflow.com/questions/32858331/print-empty-asterisk-triangle-c/32858656#32858656", "title": "print empty asterisk triangle c", "body": "<p>a longer version of this problems which can be optimized a great deal</p>\n\n<pre><code> void print_start_and_end_asterix( int n )\n    {\n            int i = 0;\n            for ( ; i &lt; n ; i ++ )\n            {\n                    if( i == 0 || i == n-1 )\n                            printf(\"*\");\n                    else\n                            printf(\" \");\n            }\n            printf(\"\\n\");\n    }\n\n\nvoid print_full_row( int n )\n{\n        int i = 0;\n        for ( ; i &lt; n ; i ++ )\n                printf(\"*\");\n        printf(\"\\n\");\n}\n\nint main (){\n        int n;\n        scanf(\"%d\", &amp;n);\n        int row = 0 , col = n;\n        for ( row = 0 ; row &lt; n ; row ++ , col--) {\n                if( row == 0 )\n                        print_full_row(col);\n                else\n                        print_start_and_end_asterix(col);\n        }\n\n\n        return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 1, "last_activity_date": 1443594392, "creation_date": 1443594392, "answer_id": 32859210, "question_id": 32858331, "link": "https://stackoverflow.com/questions/32858331/print-empty-asterisk-triangle-c/32859210#32859210", "title": "print empty asterisk triangle c", "body": "<p>The triangle being drawn is a two-dimensional figure, and therefore can be drawn with two nested <code>for</code> loops. The outer loop keeps track of the row which is being drawn. The inner loop keeps track of the column. For each combination of <code>row</code> and <code>col</code>, a very simple decision must be made, shall we output an asterisk, or shall we output a space.</p>\n\n<p>Begin with the outer loop. It makes sense for the outer loop to count down from N to 1, since the number of characters on a line starts at N and decreases till it reaches 1. So the outer loop is</p>\n\n<pre><code>for ( row = N; row &gt;= 1; row-- )\n</code></pre>\n\n<p>Next is the inner loop. The inner loop needs to count the number of characters on each line. We've arranged things so that the <code>row</code> variable in the outer loop is equal to the number of characters. Hence, the inner loop is simply</p>\n\n<pre><code>for ( col = 0; col &lt; row; col++ )\n</code></pre>\n\n<p>Now we come to the decision. Given a <code>row</code> and a <code>col</code>, shall we print an asterisk or a space? Well, we should always print an asterisk on the first line, which is where <code>row == N</code>. We should also print an asterisk on the left edge, where <code>col == 0</code>. Finally, we need an asterisk on the right edge, where <code>col == row-1</code>. Hence, the decision code is</p>\n\n<pre><code>if ( row == N || col == 0 || col == row-1 )  // top or left or right\n    putchar( '*' );\nelse\n    putchar( ' ' );\n</code></pre>\n\n<p>Finally, after the inner loop is finished, we need to output a newline character to start the next line</p>\n\n<pre><code>putchar( '\\n' );\n</code></pre>\n\n<p>And that's all there is to it.</p>\n"}, {"tags": [], "owner": {"reputation": 4224, "user_id": 3383213, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/91b489041a73ecbb02cc26af19b5f664?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/3383213/himanshu"}, "is_accepted": true, "score": 1, "last_activity_date": 1443594914, "last_edit_date": 1443594914, "creation_date": 1443594501, "answer_id": 32859237, "question_id": 32858331, "link": "https://stackoverflow.com/questions/32858331/print-empty-asterisk-triangle-c/32859237#32859237", "title": "print empty asterisk triangle c", "body": "<p>you just need to think that first line should be filled with <code>*</code>.<br>\nSecond thing is first character of every line should be <code>*</code>.<br>\nand last character should also be <code>*</code>. and in between you need to fill spaces.</p>\n\n<pre><code>int main()\n{\n    int n=6;\n    for(int i=n-1;i&gt;=0;i--) // using n-1, bcz loop is running upto 0\n    {\n        for(int j=0;j&lt;=i;j++)\n        {\n            if(i==n-1 || j==0 ||i==j)\n                printf(\"*\");\n            else\n                printf(\" \");\n        }\n        printf(\"\\n\");      \n    }\n    return 0;\n}\n</code></pre>\n\n<p>The condition <code>if(i==n-1 || j==0 ||i==j)</code><br>\nhere <code>i==n-1</code> is used so that first line should be filled with <code>*</code>.<br>\n<code>j==0</code> is used to make first character of every line <code>*</code>. every time when new line starts i.e j=0 it will print one <code>*</code> character.<br>\n<code>i==j</code> this is used to make last character <code>*</code> when i==j that is last index upto which we are running loop. so at last index it will print a <code>*</code>.<br>\nAnd for all other values it will print space as it will run <code>else</code> condition.</p>\n\n<p><strong>OUTPUT</strong>  </p>\n\n<pre><code>******\n*   *\n*  *\n* *\n**\n*\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 5306812, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/924727930883454/picture?type=large", "display_name": "Leonardo Dias", "link": "https://stackoverflow.com/users/5306812/leonardo-dias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1969, "favorite_count": 0, "accepted_answer_id": 32859237, "answer_count": 5, "score": -4, "last_activity_date": 1443630140, "creation_date": 1443590334, "last_edit_date": 1443630140, "question_id": 32858331, "link": "https://stackoverflow.com/questions/32858331/print-empty-asterisk-triangle-c", "title": "print empty asterisk triangle c", "body": "<p>So I've looked up and only found normal triangles questions out there.\nThis one is a bit tricky.</p>\n\n<blockquote>\n  <p>Given a N, your program should create an asterisk unfilled triangle with a N side size.</p>\n</blockquote>\n\n<pre><code>Example 1 \nInform N: 1 \n*\n\nExample 2:\nInform N: 2\n**\n*\nExample 3:\nInform N: 3\n***\n**\n*\nExample 4:\nInform N: 4\n****\n* *\n**\n*\nExample 5:\nInform N: 5\n*****\n*  *\n* *\n**\n*\n</code></pre>\n\n<p>Here's my attempt, I could only make a filled triangle inefficiently </p>\n\n<pre><code>void q39(){\n    int n,i,b;\n    printf(\"Inform N: \");\n    scanf (\"%i\",&amp;n);\n    for ( i = 0; i &lt; n; ++i)\n    {\n    printf(\"*\");\n    for ( b = 1; b &lt; n; ++b)\n    {\n        if (i==0)\n        {\n        printf(\"*\");\n        }\n        else if (i==1 &amp;&amp; b&gt;1)\n        {\n            printf(\"*\");\n        }\n        else if (i==2 &amp;&amp; b&gt;2)\n        {\n            printf(\"*\");\n        }\n        else if(i==3 &amp;&amp; b&gt;3){\n            printf(\"*\");\n        }\n        else if(i==4 &amp;&amp; b&gt;4){\n            printf(\"*\");\n        }\n        else if(i==5 &amp;&amp; b&gt;5){\n            printf(\"*\");\n        }\n        else if(i==6 &amp;&amp; b&gt;6){\n            printf(\"*\");\n        }\n        else if(i==7 &amp;&amp; b&gt;7){\n            printf(\"*\");\n        }\n        else if (i==8 &amp;&amp; b&gt;8){\n            printf(\"*\");\n        }\n    }\n        printf(\"\\n\");\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1443590159, "post_id": 32858256, "comment_id": 53549860, "body": "A string is really just an <i>array</i> of characters, terminated by a special character (<code>&#39;\\0&#39;</code>). You <i>do</i> know how to loop over an array?"}, {"owner": {"reputation": 4671, "user_id": 434408, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/WQ1I9.jpg?s=128&g=1", "display_name": "a3.14_Infinity", "link": "https://stackoverflow.com/users/434408/a3-14-infinity"}, "edited": false, "score": 0, "creation_date": 1443590308, "post_id": 32858256, "comment_id": 53549913, "body": "Could you pause and think: &quot;How C++ would have done it? Or, how that api (or method) would have done it?&quot;"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1443590323, "post_id": 32858256, "comment_id": 53549918, "body": "Just declare <code>inputnumber</code> as a char array and your mostly done (still need to ensure you don&#39;t overflow the array). In C a string is by definition a sequence of characters terminated by the <code>NUL</code> (<code>\\0</code>) byte. So once <code>scanf</code> puts the string into the array it already contains the letters the way you want."}, {"owner": {"reputation": 31, "user_id": 5255977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c245fab0921bbe143a44b0ca01706?s=128&d=identicon&r=PG&f=1", "display_name": "Mperera ", "link": "https://stackoverflow.com/users/5255977/mperera"}, "edited": false, "score": 0, "creation_date": 1443590367, "post_id": 32858256, "comment_id": 53549940, "body": "I am asking about a single word ,not a bunch of words .a word (the input is just a single word ) should be separated into its letters like HELLO to H  E  L  L  O and store in an array"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1443590500, "post_id": 32858256, "comment_id": 53549997, "body": "But if you read a word with e.g. <code>scanf</code> and store it in an array, it already <i>is</i> separated as single characters in an array. You need to elaborate on what your problem is."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1443591257, "post_id": 32858256, "comment_id": 53550278, "body": "The problem with the code you show after your edit is that <code>inputnumber</code> is a <i>single</i> character and not an <i>array</i> of characters. You <i>did</i> read my comments?"}, {"owner": {"reputation": 31, "user_id": 5255977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c245fab0921bbe143a44b0ca01706?s=128&d=identicon&r=PG&f=1", "display_name": "Mperera ", "link": "https://stackoverflow.com/users/5255977/mperera"}, "edited": false, "score": 0, "creation_date": 1443591368, "post_id": 32858256, "comment_id": 53550315, "body": "i was reading all the comments ,thanks all"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5255977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c245fab0921bbe143a44b0ca01706?s=128&d=identicon&r=PG&f=1", "display_name": "Mperera ", "link": "https://stackoverflow.com/users/5255977/mperera"}, "edited": false, "score": 0, "creation_date": 1443591016, "post_id": 32858428, "comment_id": 53550172, "body": "you saved my lot of time may be even more than you think ,thanks a lot"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1443591098, "post_id": 32858428, "comment_id": 53550199, "body": "That&#39;s a really roundabout way to loop over a string, when e.g. <code>for (int i = 0; i &lt; strlen(inputnumber) &#47;* or inputnumber[i] != &#39;\\0&#39; *&#47;; ++i)</code>  would work just as fine and, IMO, be more clearer."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1443591188, "post_id": 32858428, "comment_id": 53550244, "body": "Also, you might want to limit that <code>scanf</code> call to now overflow the array, by using <code>&quot;%125s&quot;</code>."}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1443591210, "post_id": 32858428, "comment_id": 53550263, "body": "for someone starting program as int() , IMO the answer will have no value"}, {"owner": {"reputation": 31, "user_id": 5255977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c245fab0921bbe143a44b0ca01706?s=128&d=identicon&r=PG&f=1", "display_name": "Mperera ", "link": "https://stackoverflow.com/users/5255977/mperera"}, "edited": false, "score": 0, "creation_date": 1443591248, "post_id": 32858428, "comment_id": 53550275, "body": "I just tried this and worked ,needed this for my project ."}, {"owner": {"reputation": 31, "user_id": 5255977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c245fab0921bbe143a44b0ca01706?s=128&d=identicon&r=PG&f=1", "display_name": "Mperera ", "link": "https://stackoverflow.com/users/5255977/mperera"}, "edited": false, "score": 0, "creation_date": 1443591534, "post_id": 32858428, "comment_id": 53550369, "body": "I have done a lot of mistakes here because i was in a hurry ,this answer has everything that i needed"}], "tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": true, "score": 4, "last_activity_date": 1443590793, "creation_date": 1443590793, "answer_id": 32858428, "question_id": 32858256, "link": "https://stackoverflow.com/questions/32858256/split-a-stringa-word-to-letters-in-c/32858428#32858428", "title": "Split a string(a word) to letters in C", "body": "<p>look at this code and see your mistakes</p>\n\n<pre><code>        #include &lt;stdio.h&gt;\n    //  #include &lt;stdlib.h&gt; // you dont really need this\n    //  #include &lt;math.h&gt; // or this\n    //  #include&lt;string.h&gt; // or this\n        //int(){\n        int main (){ // &lt;-- int main here\n                printf(  \"Enter the number\" );\n                // declare a character array to Store input String\n                char inputnumber[126];\n                scanf(\"%s\", &amp;inputnumber);\n\n                /** take a pointer to point to first character **/\n                char *p = inputnumber;\n\n                /** iterate through it untill you get '\\0' - a speial character indicating the end of string */\n                while ( *p != '\\0' ) {\n                       // &lt;- print characters not strings hence c\n                      //based on your requirement you can store this in another array\n                        printf (\"%c \", *p  ); \n\n                        p++ ; // move p to point to next position\n                }\n\n                return 0; // return happyily\n        }\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5255977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c245fab0921bbe143a44b0ca01706?s=128&d=identicon&r=PG&f=1", "display_name": "Mperera ", "link": "https://stackoverflow.com/users/5255977/mperera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8816, "favorite_count": 0, "accepted_answer_id": 32858428, "answer_count": 1, "score": -1, "last_activity_date": 1443593049, "creation_date": 1443589962, "last_edit_date": 1443593049, "question_id": 32858256, "link": "https://stackoverflow.com/questions/32858256/split-a-stringa-word-to-letters-in-c", "title": "Split a string(a word) to letters in C", "body": "<p>I need a string to split into its letters and save it in an array .I have no clue how to do this .Its possible in C++ but in C it seems like there is no way to do.</p>\n\n<p>Or if there is a way to take an input string(a word )and save it as separate letters in an array will be ideal .I have used below mentioned code to get the input </p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;math.h&gt;\n    #include&lt;string.h&gt;\n    int(){\nchar inputnumber;\n        printf(  \"Enter the number\" ); \n// the word is like --&gt; hellooo\n         scanf(\"%s\", &amp;inputnumber);\nint i=0;\nprintf(inputnumber[i]);\n    }\n</code></pre>\n\n<p>Update: this is solved ,I did not declare a pointer to the char here ,that's the part which is missing then we can read the word  letter by letter ,thanks all  </p>\n"}, {"tags": ["c", "list", "free"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1443590654, "post_id": 32858250, "comment_id": 53550056, "body": "Because <code>free</code> is allowed to do whatever it wants with the thing you just freed. In this case, your platform&#39;s particular implementation of <code>free</code> didn&#39;t need to overwrite` next_node`."}], "answers": [{"tags": [], "owner": {"reputation": 1553, "user_id": 3526330, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/56c5d12f85c3b3a92caf7c642d01afc5?s=128&d=identicon&r=PG&f=1", "display_name": "saikumarm", "link": "https://stackoverflow.com/users/3526330/saikumarm"}, "is_accepted": false, "score": 0, "last_activity_date": 1443590298, "creation_date": 1443590298, "answer_id": 32858323, "question_id": 32858250, "link": "https://stackoverflow.com/questions/32858250/why-free-release-data-but-save-next-node-value/32858323#32858323", "title": "Why free() release data but save next_node value?", "body": "<p><code>Free</code> basically releases memory that a pointer points to. In the list you have two pointers pointing to different locations and you have freed the memory pointed by data and not the memory pointed by next_node, Therefore that memory is still within your reach. </p>\n"}, {"comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1443592666, "post_id": 32858324, "comment_id": 53550831, "body": "Minor nitpick: for such small allocations the OS is rarely involved - any self-respecting allocator would manage the &quot;small stuff&quot; by itself, without trapping in kernel."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 4, "last_activity_date": 1443590305, "creation_date": 1443590305, "answer_id": 32858324, "question_id": 32858250, "link": "https://stackoverflow.com/questions/32858250/why-free-release-data-but-save-next-node-value/32858324#32858324", "title": "Why free() release data but save next_node value?", "body": "<p>You have <em>undefined behavior</em> when you do</p>\n\n<pre><code>list-&gt;first_node = list-&gt;first_node-&gt;next_node\n</code></pre>\n\n<p>The UB is because <code>list-&gt;first_node</code> no longer points to allocated memory.</p>\n\n<p>However, nothing says that when you call <code>free</code> the data has to be cleared or otherwise modified. All it does is tell the operating system that the memory is once again available for someone to allocate. That's why you can still use the pointer, and that's one of the things with UB, the behavior is <em>undefined</em>, and can sometimes <em>seem</em> to work when in reality it's a very serious problem.</p>\n"}, {"tags": [], "owner": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "is_accepted": false, "score": 1, "last_activity_date": 1443590307, "creation_date": 1443590307, "answer_id": 32858325, "question_id": 32858250, "link": "https://stackoverflow.com/questions/32858250/why-free-release-data-but-save-next-node-value/32858325#32858325", "title": "Why free() release data but save next_node value?", "body": "<p><code>free</code> just releases the memory to allow it to be used again (e.g. in another call to <code>malloc</code>). </p>\n\n<p>It does not clear the memory. So if you use it after the free call you <strong>might</strong> get the same value.</p>\n\n<p>Using the memory after it has been freed, as you have done in the line after the call to <code>free</code> is <strong>\"undefined behaviour\"</strong> and may work sometimes, and not work sometimes - the results can vary each time you run the program. So - <strong>don't do it!</strong></p>\n"}, {"tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": false, "score": 0, "last_activity_date": 1443590796, "creation_date": 1443590796, "answer_id": 32858429, "question_id": 32858250, "link": "https://stackoverflow.com/questions/32858250/why-free-release-data-but-save-next-node-value/32858429#32858429", "title": "Why free() release data but save next_node value?", "body": "<p><code>free</code> doesn't need to erase anything - that would be a waste of time -, it just marks the block of memory you gave back as \"free to be recycled\", adding it back to some free blocks list that it will examine at the next <code>malloc</code>. The fact that one or two members of the memory block has been modified is just an implementation detail - and you shouldn't peek into freed blocks anyway, as the allocator is free to unmap their memory, thus giving you a segfault (more in general, looking at the content of deallocated memory is \"undefined behavior\", i.e. anything can happen). </p>\n"}], "owner": {"reputation": 28, "user_id": 5000435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hnEeo.png?s=128&g=1", "display_name": "redorov", "link": "https://stackoverflow.com/users/5000435/redorov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 2, "accepted_answer_id": 32858324, "answer_count": 4, "score": 1, "last_activity_date": 1443590796, "creation_date": 1443589909, "question_id": 32858250, "link": "https://stackoverflow.com/questions/32858250/why-free-release-data-but-save-next-node-value", "title": "Why free() release data but save next_node value?", "body": "<p>I was training with lists and from some point I start wonder how exactly work free() function. I was think that this will clear either data and next_node values in struct first_node (look at code), but instead only data values was destroy and next_node still point to next position on my list. Why?</p>\n\n<pre><code>struct Data\n{\n    int a;\n    int b;\n};\n\nstruct Node\n{\n    struct Data* data;\n    struct Node* next_node;\n};\n\nstruct List\n{\n    struct Node* first_node;\n};\n\nvoid init(struct List* list)\n{\n    list-&gt;first_node = NULL;\n}\n\u2026\nstruct Data* remove_first_element_from_list(struct List* list)\n{\n    if (list-&gt;first_node == NULL)\n    {\n        printf(\"The list is empty!\\n\");\n        return 0;\n    }\n    struct Data *pointer;\n    pointer = list-&gt;first_node-&gt;data;\n    free(list-&gt;first_node);\n    list-&gt;first_node = list-&gt;first_node-&gt;next_node;\n    return pointer;\n}\n</code></pre>\n\n<p>Thanks for any explaination.</p>\n"}, {"tags": ["c", "macos", "linux-kernel"], "comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1443592539, "post_id": 32858221, "comment_id": 53550778, "body": "Don&#39;t grab headers copied from random locations on the Internet, there&#39;s a high probability to get the version and/or platform wrong, with bizarre consequences for your build."}], "answers": [{"comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 3, "creation_date": 1443590880, "post_id": 32858368, "comment_id": 53550136, "body": "Put it on /usr/local/include, otherwise it may be deleted when you do a system update."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2269707"}, "is_accepted": false, "score": 0, "last_activity_date": 1443590530, "creation_date": 1443590530, "answer_id": 32858368, "question_id": 32858221, "link": "https://stackoverflow.com/questions/32858221/mac-os-x-if-theres-a-header-needed-when-compile-linux-kernel-but-os-x-doesnt/32858368#32858368", "title": "Mac OS X: If there&#39;s a header needed when compile linux kernel, but os x doesn&#39;t have, where should I put it to?", "body": "<p>Answer by myself: put it in /usr/include, and problem solved.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2269707"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 952, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1443590530, "creation_date": 1443589781, "last_edit_date": 1443590125, "question_id": 32858221, "link": "https://stackoverflow.com/questions/32858221/mac-os-x-if-theres-a-header-needed-when-compile-linux-kernel-but-os-x-doesnt", "title": "Mac OS X: If there&#39;s a header needed when compile linux kernel, but os x doesn&#39;t have, where should I put it to?", "body": "<p>Here's the situation:\nI am using a mac to compile Linux kernel for an arm board, some how this happened:</p>\n\n<pre><code>arch/arm/vdso/vdsomunge.c:48:10: fatal error: 'byteswap.h' file not found\n</code></pre>\n\n<p>I googled and find out that mac doesn't have a 'byteswap.h', so I download a 'byteswap.h' version based on 'OSByteOrder.h' write by others, but I don't know where to put that header.</p>\n\n<p>Any one can help?</p>\n"}, {"tags": ["c", "memory", "data-structures", "linked-list", "doubly-linked-list"], "comments": [{"owner": {"reputation": 1422, "user_id": 4538770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd2f0b91001372439c7e23c60e4c52?s=128&d=identicon&r=PG", "display_name": "Jo&#235;l Hecht", "link": "https://stackoverflow.com/users/4538770/jo%c3%abl-hecht"}, "edited": false, "score": 0, "creation_date": 1443590583, "post_id": 32858142, "comment_id": 53550034, "body": "0x0000000a74656772 is the end of your string in memory. It is not part of a node struct. 0x0000000000000000      0x0000000000000031 are probably the end of the memory allocated for the string of your first node, 31 is the seems to be the allocated size."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1443590764, "post_id": 32858142, "comment_id": 53550095, "body": "32-bit or 64-bit platform?"}], "answers": [{"comments": [{"owner": {"reputation": 355, "user_id": 5349100, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0cf2a87b25ab150c907c9ca659ba495b?s=128&d=identicon&r=PG&f=1", "display_name": "mrybak3", "link": "https://stackoverflow.com/users/5349100/mrybak3"}, "edited": false, "score": 0, "creation_date": 1443592630, "post_id": 32858661, "comment_id": 53550815, "body": "Thank you so much. I didn&#39;t know each value would take up a full 16 hex line because I always have the concept of multiple digits being placed in the same line but I didn&#39;t consider that the int HAD TO be alone since every other variable has to take up a whole 16 hex line. Thank you again!"}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 2, "last_activity_date": 1443592041, "creation_date": 1443592041, "answer_id": 32858661, "question_id": 32858142, "link": "https://stackoverflow.com/questions/32858142/understanding-memory-of-doubly-linked-list-struct/32858661#32858661", "title": "Understanding memory of Doubly linked list struct", "body": "<p>Your structure contains 4 64-bit values. The complete structure starting at address 0x602060 is actually spread across two lines of the memory dump:</p>\n\n<pre><code>                       prev                     str\n0x602060:       0x0000000000000000      0x0000000000602090\n0x602070:       0x000000000000000d      0x0000000000602010\n                      strsize                   next\n</code></pre>\n\n<p>Notice that <code>0x0000000000000000</code> is 64 bits long, or 16 hexadecimal digits.</p>\n\n<p>The pointer 0x0000000000602090 is actually the pointer to the string data (for the node at 0x602060), not the pointer to the next node.</p>\n"}], "owner": {"reputation": 355, "user_id": 5349100, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0cf2a87b25ab150c907c9ca659ba495b?s=128&d=identicon&r=PG&f=1", "display_name": "mrybak3", "link": "https://stackoverflow.com/users/5349100/mrybak3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 32858661, "answer_count": 1, "score": 2, "last_activity_date": 1443592041, "creation_date": 1443589355, "question_id": 32858142, "link": "https://stackoverflow.com/questions/32858142/understanding-memory-of-doubly-linked-list-struct", "title": "Understanding memory of Doubly linked list struct", "body": "<p>This is a homework question. My book does not address how to actually sift through the addresses so I need some help</p>\n\n<p>Given a struct</p>\n\n<pre><code>struct lnode {\n struct lnode *prev;\n char *str;\n int strsize;\n struct lnode *next;\n};\n</code></pre>\n\n<p>The linked list starts at address 0x0602060, and looking at the memory around that address we see</p>\n\n<pre><code>(gdb) x/36x 0x0602010\n0x602010:       0x0000000000602060      0x0000000000602040\n0x602020:       0x0000000000000016      0x00000000006020b0\n0x602030:       0x0000000000000000      0x0000000000000021\n0x602040:       0x206d72657464696d      0x756874206e6f2031\n0x602050:       0x00000a7961647372      0x0000000000000031\n0x602060:       0x0000000000000000      0x0000000000602090\n0x602070:       0x000000000000000d      0x0000000000602010\n0x602080:       0x0000000000000000      0x0000000000000021\n0x602090:       0x6f662074276e6f64      0x0000000a74656772\n0x6020a0:       0x0000000000000000      0x0000000000000031\n0x6020b0:       0x0000000000602010      0x00000000006020e0\n0x6020c0:       0x0000000000000016      0x0000000000000000\n0x6020d0:       0x0000000000000000      0x0000000000000021\n0x6020e0:       0x2035206573616870      0x6d20657564207369\n0x6020f0:       0x00000a7961646e6f      0x0000000000020f11\n0x602100:       0x0000000000000000      0x0000000000000000\n0x602110:       0x0000000000000000      0x0000000000000000\n0x602120:       0x0000000000000000      0x0000000000000000\n</code></pre>\n\n<p>I understand how I would traverse a singly linked list with a single variable in the memory.\nI would :</p>\n\n<p>1.Begin at the first address, check where it points to, follow that to the next set of memory</p>\n\n<p>2.The first set of bytes would hold the value in that node, the second set would hold the pointer to the next node</p>\n\n<p>3.Continue</p>\n\n<p>However, this does not work here. </p>\n\n<p>The first node is said to be at 0x602060. Going there and checking the bytes reveals that there are no variable values, followed by a pointer to the next node 0x602090.</p>\n\n<pre><code>0x0000000000000000      0x0000000000602090\n</code></pre>\n\n<p>Going to 0x602090 presents bytes in both sections with no apparent return address. Considering the size of the struct I assume that first the char pointer is shown, then the size in the second column as follows</p>\n\n<pre><code> 0x6f662074276e6f64 (char*)     0x0000000a74656772 (int with padding)\n</code></pre>\n\n<p>Going on, however, what I'm looking at starts to make less sense\nMy assumption is that the next two lines</p>\n\n<pre><code>  (1) 0x0000000000000000      0x0000000000000031\n  (2) 0x0000000000602010      0x00000000006020e0\n</code></pre>\n\n<p>represent (1) some unknown result we don't have to consider and (2) previous pointer followed by next pointer?\nBut the previous pointer is not the same as the start location. And my assumption that one node is represented by 3 line chunks does not seem to hold starting at address 0x6020e0.</p>\n\n<p>Can someone please give me some hints as to how I am supposed to traverse this? Any help is greatly appreciated.</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1443595663, "post_id": 32857867, "comment_id": 53552044, "body": "What is exactly your program doing?"}, {"owner": {"reputation": 3, "user_id": 5391396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8f3fbb67167fcfb3feb9f88c1c94a07?s=128&d=identicon&r=PG&f=1", "display_name": "lvzheng", "link": "https://stackoverflow.com/users/5391396/lvzheng"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1443599248, "post_id": 32857867, "comment_id": 53554012, "body": "its a game, I just confuse how to terminate the child process when parent receive a signal. I seem allow to use global variable. but I still confuse how to capture all signal, because sigaction(SIGINT, &amp;act, pip) can capture SIGINT only"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5391396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8f3fbb67167fcfb3feb9f88c1c94a07?s=128&d=identicon&r=PG&f=1", "display_name": "lvzheng", "link": "https://stackoverflow.com/users/5391396/lvzheng"}, "edited": false, "score": 0, "creation_date": 1443593009, "post_id": 32858072, "comment_id": 53550965, "body": "Is it possible that just pass one parameter pid or FILE??? I pretty confuse how to use the third parameter of sa_sigaction Thanks"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 3, "user_id": 5391396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8f3fbb67167fcfb3feb9f88c1c94a07?s=128&d=identicon&r=PG&f=1", "display_name": "lvzheng", "link": "https://stackoverflow.com/users/5391396/lvzheng"}, "edited": false, "score": 1, "creation_date": 1443595405, "post_id": 32858072, "comment_id": 53551936, "body": "No, it is not possible. And you cannot use <code>FILE*</code> inside your signal handler. The only sensible thing to do in your case is to set some global <code>volatile sig_atomic_t</code> variable in your signal handler."}, {"owner": {"reputation": 3, "user_id": 5391396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8f3fbb67167fcfb3feb9f88c1c94a07?s=128&d=identicon&r=PG&f=1", "display_name": "lvzheng", "link": "https://stackoverflow.com/users/5391396/lvzheng"}, "edited": false, "score": 0, "creation_date": 1443597845, "post_id": 32858072, "comment_id": 53553223, "body": "got it thank you, one more question: I want to handle all signal (not sigkill and sigstop), but sigaction(SIGINT, &amp;act, pip) just handle SIGINT, how to set the sigaction or I have to write 20+ sigaction???"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 3, "user_id": 5391396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8f3fbb67167fcfb3feb9f88c1c94a07?s=128&d=identicon&r=PG&f=1", "display_name": "lvzheng", "link": "https://stackoverflow.com/users/5391396/lvzheng"}, "edited": false, "score": 0, "creation_date": 1443600569, "post_id": 32858072, "comment_id": 53554729, "body": "Did you RTFM <a href=\"http://man7.org/linux/man-pages/man2/sigaction.2.html\" rel=\"nofollow noreferrer\">sigaction(2)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">signal(7)</a> ? And STFW for them?"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 3, "last_activity_date": 1443600652, "last_edit_date": 1443600652, "creation_date": 1443588902, "answer_id": 32858072, "question_id": 32857867, "link": "https://stackoverflow.com/questions/32857867/how-to-pass-two-parameter-to-sa-sigaction-they-are-file-and-pid-of-child-proce/32858072#32858072", "title": "How to pass two parameter to sa_sigaction? they are FILE* and PID of child process", "body": "<p>This is simply <strong>not possible</strong> (to pass more arguments to a signal handler). You need to use some global or static variable.</p>\n\n<p><sup>You cannot add any parameter to your signal handler, even as simple as a <code>pid_t</code> or <code>FILE*</code> or some <code>void*</code></sup></p>\n\n<p>Signals are delivered by the kernel, and it is the kernel (with some help from some low-level, machine and ABI specific, <a href=\"https://en.wikipedia.org/wiki/Trampoline_%28computing%29\" rel=\"nofollow\">trampoline</a>-like code in the <code>libc</code>) which pushes a call frame for the signal handler (and also one for <a href=\"http://man7.org/linux/man-pages/man2/sigreturn.2.html\" rel=\"nofollow\">sigreturn(2))</a>. So the signature of handlers is fixed, as documented in <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow\">signal(7)</a></p>\n\n<p>Besides, you have a small number of signals. So you could consider having a global variable with an array of data related to the signal.</p>\n\n<p>With <a href=\"http://man7.org/linux/man-pages/man2/sigaction.2.html\" rel=\"nofollow\">sigaction(2)</a> (using <code>SA_SIGINFO</code>) you get an <code>int</code> signal number, a <code>siginfo_t</code> and a <code>ucontext_t</code> pointers to your handler. You can use them appropriately. For instance, for a <code>SIGIO</code> you can use the <code>si_fd</code> to get the file descriptor causing that signal.</p>\n\n<p>Beware that <em>signal handlers are only allowed to call</em> (even <em>indirectly</em>) a very <em>small set of functions</em> (the so-called <strong>async-signal-safe</strong> functions, which are often a subset of <a href=\"https://en.wikipedia.org/wiki/System_call\" rel=\"nofollow\">syscalls</a>). In particular calling <code>fputs</code> or any <code>&lt;stdio.h&gt;</code> function; or <code>malloc</code> is <em>forbidden</em> inside signal handlers. Hence, even thru some global variables, you should not use any <code>FILE*</code> inside your signal handler (that would be <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>, even if it might apparently work as you want sometimes).</p>\n\n<p>A common habit (see POSIX documentation about <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/signal.h.html\" rel=\"nofollow\">signal.h</a>) is to <em>only</em> set some  global <code>volatile sig_atomic_t</code> flags in the signal handler, and to test (and reset) that flag <em>outside</em> the handler. You'll then be able typically to call <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow\">poll(2)</a> -probably using <a href=\"http://man7.org/linux/man-pages/man3/fileno.3.html\" rel=\"nofollow\">fileno(3)</a>- or <a href=\"http://man7.org/linux/man-pages/man2/waitpid.2.html\" rel=\"nofollow\">waitpid(2)</a> (<em>outside</em> of yous signal handler, e.g. in some loop inside your main code).</p>\n\n<p>You need to reads books on <a href=\"http://www.makelinux.net/alp/\" rel=\"nofollow\"><em>Advanced Linux Programming</em></a> and or <em>Advanced Posix Programming</em></p>\n"}], "owner": {"reputation": 3, "user_id": 5391396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8f3fbb67167fcfb3feb9f88c1c94a07?s=128&d=identicon&r=PG&f=1", "display_name": "lvzheng", "link": "https://stackoverflow.com/users/5391396/lvzheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 681, "favorite_count": 0, "accepted_answer_id": 32858072, "answer_count": 1, "score": -1, "last_activity_date": 1443600652, "creation_date": 1443587529, "last_edit_date": 1443588698, "question_id": 32857867, "link": "https://stackoverflow.com/questions/32857867/how-to-pass-two-parameter-to-sa-sigaction-they-are-file-and-pid-of-child-proce", "title": "How to pass two parameter to sa_sigaction? they are FILE* and PID of child process", "body": "<p>When I capture any signal, I want to send message 'end' to child process and if they still live use kill pid to kill it. NO global variable</p>\n\n<p>I think I have to use sa_sigaction, but I confuse how to send FILE* of pipe and pid of child to it. Can someone can give em an example for this??</p>\n\n<p>I'd like to pass pip and pid to hdl how to change my code??\nI'd like to capture all signal that can be captured, what is the first parameter\nof  sigaction(SIGINT, &amp;act, pip) ?? instead of just SIGINT\nThanks in advance </p>\n\n<pre><code>static void hdl (int sig, siginfo_t *siginfo, void *pip)\n{\n    xxxxxxx\n}\n\nint main() {\n    FILE** pip;\n    int* pid;\n    struct sigaction act;\n    memset (&amp;act, '\\0', sizeof(act));\n    act.sa_sigaction = &amp;hdl;\n    act.sa_flags = SA_SIGINFO;\n    sigaction(SIGINT, &amp;act, pip);\n\n\n    sleep (10); \n\n\n    return 0;\n}\n</code></pre>\n"}]