[{"tags": ["c", "bash", "pipe", "stdin"], "comments": [{"owner": {"reputation": 355, "user_id": 4002676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b71de5c0a46c32e270fc0b71e6b89c3?s=128&d=identicon&r=PG&f=1", "display_name": "kdmurrray91", "link": "https://stackoverflow.com/users/4002676/kdmurrray91"}, "edited": false, "score": 2, "creation_date": 1483572825, "post_id": 41474976, "comment_id": 70156025, "body": "Devil&#39;s advocate question: Why not just use a 64KiB buffer size? That, along with limiting reads to 64KiB, would probably be faster than either reallocing or faffing about with fstat to pre-determine buffer size. We&#39;ll need more info about the end goal to really know though."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1483573010, "post_id": 41474976, "comment_id": 70156084, "body": "Note: <code>buf.st_size</code> is not specified to be <code>long long</code> but <code>off_t</code> which is some <i>signed</i> integer type.  Suggest <code>printf(&quot;%lld\\n&quot;, (long long) buf.st_size);</code>"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1483573239, "post_id": 41474976, "comment_id": 70156162, "body": "<code>mmap()</code> should work just fine for stdin, assuming that stdin is coming from a disk file. You can&#39;t mmap() a terminal or a pipe, of course."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1483574991, "post_id": 41474976, "comment_id": 70156657, "body": "@Rob\u1d69 Well the asker clearly wants to emulate <code>mmap</code> on a terminal or a pipe, by reading as much as possible into memory..."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1483575098, "post_id": 41474976, "comment_id": 70156696, "body": "If you&#39;re targeting a 64-bit platform, you could use mmap to allocate a really big array (like 1GB) and only commit pages as needed, see <a href=\"http://stackoverflow.com/questions/2782628/any-way-to-reserve-but-not-commit-memory-in-linux\">this question</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1483575147, "post_id": 41474976, "comment_id": 70156711, "body": "There&#39;s no way to get the size of a terminal or pipe, because the data is arriving asynchronously. You can&#39;t know the full size of a pipe until the writer closes it. And if you don&#39;t read periodically, you may deadlock because there&#39;s limited pipe buffering in the kernel."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1483579730, "post_id": 41474976, "comment_id": 70157912, "body": "Keep tabs on how much memory you&#39;ve allocated and how much you&#39;ve used.  Start with, say, 4 KiB allocated; when that&#39;s used up, double the amount you allocate; rinse and repeat.  If there&#39;s enough over-allocated at the end (say, more than 64 KiB), consider a shrinking <code>realloc()</code> to release the superfluous space.  The pipe buffer size will be fairly modest (between 4 KiB and 64 KiB) usually; you will never read more than {PIPE_SIZE} bytes in a single <code>read()</code> call.  However, there could be more data than that to read in total."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1483587639, "post_id": 41474976, "comment_id": 70159704, "body": "But apparently the buffer size for each pipe can be adjusted <a href=\"http://unix.stackexchange.com/questions/11946/how-big-is-the-pipe-buffer\">How big is the pipe buffer?</a> <code>:)</code>"}], "owner": {"reputation": 1798, "user_id": 5405361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a96d89ccf2e89748a3e8896be99d83b9?s=128&d=identicon&r=PG&f=1", "display_name": "Bilow", "link": "https://stackoverflow.com/users/5405361/bilow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483572600, "creation_date": 1483572600, "question_id": 41474976, "link": "https://stackoverflow.com/questions/41474976/optimize-read-realloc-using-fstat-in-c", "title": "Optimize read + realloc using fstat in C", "body": "<p>I want to mmap stdin. But I can't mmap stdin.</p>\n\n<p>So I have to call <code>read</code> and <code>realloc</code> in a loop, and I want to optimize it by choosing a good buffer size.</p>\n\n<p><code>fstat</code> of the file descriptor 0 gives a <code>struct stat</code> with a member named <code>st_size</code>, which seems to represent the amount of bytes that are already in the pipe buffer corresponding to stdin.</p>\n\n<p>Depending on how I call my program, <code>st_size</code> varies between 0 and the full pipe buffer size of stdin, which is about 65520. For example in this program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n    struct stat buf;\n    int i;\n    for (i=0; i&lt;20; i++)\n    {\n        fstat(0, &amp;buf);\n        printf(\"%lld\\n\", buf.st_size);\n        usleep(10);\n    }\n}\n</code></pre>\n\n<p>We can observe the buffer is still being filled:</p>\n\n<pre><code>$ cc fstat.c\n$ for (( i=0; i&lt;10000; i++ )) do echo \"0123456789\" ; done | ./a.out\n9196\n9306\n9350\n9394\n9427\n9471\n9515\n9559\n...\n</code></pre>\n\n<p>And the output of this program changes everytime I re-run it.</p>\n\n<p>I'd like to use <code>st_size</code> for the initial buffer size so I have to do less calls to <code>realloc</code>.</p>\n\n<p>I have three questions, most important one first:</p>\n\n<ul>\n<li><p>Can I 'flush' stdin, i.e. wait until the buffer is not being filled anymore ?</p></li>\n<li><p>Could I do better ? Maybe there is another way to optimize this, to make the <code>realloc</code> in a loop make feel less dirty.</p></li>\n<li><p>Can you confirm I can't use mmap with stdin ?</p></li>\n</ul>\n\n<p>Few details:</p>\n\n<ul>\n<li><p>I wanted to use mmap because I already wrote a program, for educational purpose, that does what <code>nm</code> does, using mmap. I'm wondering how it does handle stdin.</p></li>\n<li><p>I know that <code>st_size</code> can be 0, in which case I will have no choice but to define a buffer size.</p></li>\n<li><p>I know <code>stdin</code> can give more bytes than the pipe buffer size.</p></li>\n<li><p>I want to optimize for educational purpose. There is no imperative need to it.</p></li>\n</ul>\n\n<p>Thank you</p>\n"}, {"tags": ["c", "linux", "shared-memory"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 3, "creation_date": 1483572634, "post_id": 41474948, "comment_id": 70155968, "body": "Clearly you are missing the terminating zero. So it&#39;s not &quot;corrupted&quot; at all."}, {"owner": {"reputation": 9494, "user_id": 988283, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/539251bc88379bc1f60805a7701c1afd?s=128&d=identicon&r=PG", "display_name": "colymore", "link": "https://stackoverflow.com/users/988283/colymore"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1483572725, "post_id": 41474948, "comment_id": 70155999, "body": "Sorry, i don&#180;t understand u"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1483575239, "post_id": 41474948, "comment_id": 70156739, "body": "@colymore The <code>%s</code> format is for printing a C string, which is an array of bytes with an ending null byte. You&#39;re not putting the null byte at the end of the string in the shared memory, so you print the garbage after it."}], "answers": [{"tags": [], "owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "is_accepted": false, "score": 3, "last_activity_date": 1483594416, "last_edit_date": 1483594416, "creation_date": 1483580503, "answer_id": 41476051, "question_id": 41474948, "link": "https://stackoverflow.com/questions/41474948/linux-c-read-data-from-shared-memory-its-corrupted/41476051#41476051", "title": "Linux-C Read data from shared memory it&#39;s corrupted", "body": "<p><code>strncpy(dest, message, MAX_BUF);</code></p>\n\n<p><a href=\"http://man7.org/linux/man-pages/man3/strcpy.3.html\" rel=\"nofollow noreferrer\"><code>strncpy</code> doesn't null-terminate the buffer</a>.\nYou must null-terminate it by yourself.</p>\n\n<pre><code>strncpy(dest, message, MAX_BUF);\ndest[MAX_BUF-1] = '\\0'; /* &lt;- like this */\n</code></pre>\n\n<p><code>printf(%s</code> takes C-string which is a char array with a null character at the end. If you don't null-terminate the string, <code>printf</code> will not know when to stop, thus the garbage output.</p>\n"}], "owner": {"reputation": 9494, "user_id": 988283, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/539251bc88379bc1f60805a7701c1afd?s=128&d=identicon&r=PG", "display_name": "colymore", "link": "https://stackoverflow.com/users/988283/colymore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483594416, "creation_date": 1483572420, "question_id": 41474948, "link": "https://stackoverflow.com/questions/41474948/linux-c-read-data-from-shared-memory-its-corrupted", "title": "Linux-C Read data from shared memory it&#39;s corrupted", "body": "<p>im writing and reading from shared memory a string.\nHere it\u00b4s my code:</p>\n\n<p>This is the writer (i have ommited unrelated code)</p>\n\n<pre><code>int main() {\n\n    char message[MAX_BUF];\n    key_t key;\n    int sharedMemoryId;\n    int semaphoreId;\n    char *vc1;\n    char *data;\n    pid_t p3;\n    struct sembuf operations[1];\n\n    printf(\"start p2\\n\");\n\n    saveMesageInBuffer(message); //This reads message from pipe and saves into message variable\n\n    if(message==NULL){\n      return -1;\n    }\n\n    key = getKeyForFile();\n\n    if(key != -1){\n\n      sharedMemoryId = createSharedMemoryId(key);\n      if(sharedMemoryId!=-1){\n        vc1 = shareContentInMemoryId(sharedMemoryId);\n      }\n\n      switch(p3 = fork()){\n        case -1: \n            printf(\"Error\");\n            break;\n        case 0:\n            printf(\"run\\n\");\n            execl(\"./Ej3\", \"Ej3\", NULL);\n            break;\n        default:\n            sleep(SECONDS);\n            writeMessageInSharedVariable(vc1, message);\n            pause();\n            break;\n    }\n\n    } else {\n       printf(\"Error getting key for file: %s\\n\", strerror(errno));\n    }\n\n    return 0;\n}\n\nvoid writeMessageInSharedVariable(char *dest, char *message){\n  printf(\"El proceso P2 (PID=%d, Ej2) transmite un mensaje al proceso P3 a traves de una variable en memoria compartida\\n\", getpid());\n  strncpy(dest, message, MAX_BUF);\n}\n\nint createSharedMemoryId(key_t key){\n  return shmget(key, MAX_BUF, IPC_CREAT | 0600);\n}\n\nchar* shareContentInMemoryId(int memoryId){\n  return shmat(memoryId, (void *)0, 0);\n}\n\nkey_t getKeyForFile(){\n  char filePath[1024];\n  if (getcwd(filePath, sizeof(filePath)) != NULL){\n        strcat(filePath, \"/\");\n        strcat(filePath, FIFO_FILE_NAME);\n        return ftok(filePath, 0777);\n  } else {\n    return (key_t) -1;\n  }\n}\n</code></pre>\n\n<p>`</p>\n\n<p>This is the reader (compiled as Ej3 and launched via fork and exec from writer)</p>\n\n<pre><code>int main() {\n    key_t key;\n    char message[MAX_BUF];\n    int sharedMemoryId;\n    char* vc1;\n\n    printf(\"el 33 \\n\");\n\n    key = getKeyForFile();\n        if(key != -1){\n        sharedMemoryId = createSharedMemoryId(key, sizeof(message));\n        sleep(3);\n        printf(\"continua\\n\");\n        vc1 = (char*)shmat(sharedMemoryId, (void *)0, 0);\n        if (vc1 == (char *)(-1)) {\n            perror(\"shmat\");\n            exit(1);\n        }\n        printf(\"Readed %s\\n\", vc1);\n\n    } else {\n        printf(\"Error getting key for file: %s\\n\", strerror(errno));\n    }\n\n}\n</code></pre>\n\n<p>I\u00b4m writting test in message and this is the result while i read it.</p>\n\n<p>Readed test\ufffd[]\ufffd\ufffd\ufffdw\ufffd</p>\n"}, {"tags": ["c++", "c", "recursion", "uppercase", "lowercase"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1483571256, "post_id": 41474602, "comment_id": 70155459, "body": "This probably isn&#39;t the problem, but there is nothing in standard C or standard C++ that requires <code>array[d]&gt;=&#39;A&#39; &amp;&amp; array[d]&lt;=&#39;Z&#39;</code> to do anything sensible. Use <code>std::isupper</code> and <code>std::islower</code>. Also read about <code>std::topper</code> and <code>std::tolower</code>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1483571342, "post_id": 41474602, "comment_id": 70155491, "body": "Use a <code>printf</code> to show the value of <code>d</code>, <code>array[d]</code>, and <code>array[d-1]</code> at the beginning of the <code>rek</code> function and the problem should be obvious."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1483571418, "post_id": 41474602, "comment_id": 70155512, "body": "Also note that you&#39;re going to have a problem if <code>d</code> is ever an odd number, because the recursive call will never reach <code>0</code> in that case."}, {"owner": {"reputation": 21, "user_id": 7117250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d55f00ff2fc926835d34860896da53e?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy D", "link": "https://stackoverflow.com/users/7117250/tommy-d"}, "edited": false, "score": 0, "creation_date": 1483571618, "post_id": 41474602, "comment_id": 70155585, "body": "I don&#39;t know wheres the mistake, is it in the recursive call ?, also i how to make it work if {d} is odd number?"}, {"owner": {"reputation": 4023, "user_id": 1033075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2a6e72447d9d41ac31b987a7b2e6341?s=128&d=identicon&r=PG", "display_name": "Patru", "link": "https://stackoverflow.com/users/1033075/patru"}, "edited": false, "score": 0, "creation_date": 1483580588, "post_id": 41474602, "comment_id": 70158145, "body": "This is once more a question where &quot;it doesn&#39;t work&quot; is not enough. Please provide some input values, your expected output and the actual output of your program. Otherwise people will just be guessing (what you homework was?)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1483610772, "post_id": 41474602, "comment_id": 70169291, "body": "the function: <code>gets()</code> has been depreciated for years and is completely missing from the latest C standard (your compiler should have told you that)  Strongly suggest using <code>fgets()</code> instead of <code>gets()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7117250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d55f00ff2fc926835d34860896da53e?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy D", "link": "https://stackoverflow.com/users/7117250/tommy-d"}, "edited": false, "score": 0, "creation_date": 1483571802, "post_id": 41474821, "comment_id": 70155652, "body": "Thanks alot mate big help"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 21, "user_id": 7117250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d55f00ff2fc926835d34860896da53e?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy D", "link": "https://stackoverflow.com/users/7117250/tommy-d"}, "edited": false, "score": 0, "creation_date": 1483571868, "post_id": 41474821, "comment_id": 70155675, "body": "You&#39;re welcome.  Remember to accept your favourite answer and up-vote the helpful comments."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1483572521, "post_id": 41474821, "comment_id": 70155913, "body": "Why use magic number 32?  Perhaps <code>array[d]=array[d]+32;</code> --&gt; <code>array[d]=array[d] + (&#39;a&#39; - &#39;A&#39;);</code> which self documents more the intent.  To covert upper to lower, code could use <code>array[d] ^= &#39;a&#39; &amp; &#39;A&#39;;</code> which works for ASCII and EBCDIC.  Of course <code>tolower()</code> is quite standard."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1483572666, "post_id": 41474821, "comment_id": 70155980, "body": "Good point -- but please move the comment to the main body.  Down here, it&#39;s not going to get the notice it deserves."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1483571695, "creation_date": 1483571695, "answer_id": 41474821, "question_id": 41474602, "link": "https://stackoverflow.com/questions/41474602/how-to-make-recursive-function-it-needs-to-check-if-in-a-given-string-the-curre/41474821#41474821", "title": "How to make recursive function, it needs to check if in a given string the current letter and the one next to it is either lowercase or upper case?", "body": "<p>The <em>main</em> problem is that you recur <em>only</em> if your have a pair of upper-case or lower-case letters.  Otherwise, you drop off the end of your <strong>if</strong>, return to the calling program, and quit converting things.</p>\n\n<p>The initial problem is that you've indexed your string with the length.  A string with 6 characters has indices 0-5, but you've started with locations 5 and 6 -- the final 'O' and the null character.</p>\n\n<p>The result is that you check 'O' and '\\0'; the latter isn't alphabetic at all, so you drop through all of your logic without doing anything, return to the main program, and finish.</p>\n\n<p>For future reference, Here's the debugging instrumentation I used.  Also see the canonical SO <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">debug help</a>.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;ctype.h&gt;\nvoid rek(char array[], int d)\n{\n    int counter=0;\n\n    printf(\"ENTER rek %s %d\\n\", array, d);\n\n    if(d==0)\n    {\n        printf(\"%s \\n\",array);\n        printf(\"%d \\n\",counter);\n    }\n    else\n    {\n        printf(\"TRACE 1: %d %c%c\\n\", d, array[d-1], array[d]);\n        if((array[d]&gt;='A' &amp;&amp; array[d]&lt;='Z')&amp;&amp;(array[d-1]&gt;='A' &amp;&amp; array[d-1]&lt;='Z'))\n        {\n            printf(\"TRACE 2: upper case\");\n            array[d]=array[d]+32;\n            array[d-1]=array[d-1]+32;\n            counter++;\n            rek(array,d-2);\n        }\n        if((array[d]&gt;='a' &amp;&amp; array[d]&lt;='z')&amp;&amp;(array[d-1]&gt;='a' &amp;&amp; array[d-1]&lt;='z'))\n        {\n            printf(\"TRACE 3: lower case\");\n            array[d]=array[d]-32;\n            array[d-1]=array[d-1]-32;\n            counter++;\n            rek(array,d-2);\n        }\n    }\n}\nint main()\n{\n    char *array;\n    int d;\n\n    array = \"HEloOO\";\n    d=strlen(array);\n\n    rek(array,d);\n    printf(\"%s\\n\", array);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1483573736, "last_edit_date": 1483573736, "creation_date": 1483571728, "answer_id": 41474830, "question_id": 41474602, "link": "https://stackoverflow.com/questions/41474602/how-to-make-recursive-function-it-needs-to-check-if-in-a-given-string-the-curre/41474830#41474830", "title": "How to make recursive function, it needs to check if in a given string the current letter and the one next to it is either lowercase or upper case?", "body": "<p>Your function does not call itself when two adjacent characters have different cases. Also you can get different results when the string is processed from the start or from the end. </p>\n\n<p>I would write the function the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nchar * rek(char *s)\n{\n    if (s[0] &amp;&amp; s[1])\n    {\n        size_t i = 1;\n        if (islower((unsigned char)s[0]) &amp;&amp; islower((unsigned char)s[1]))\n        {\n            s[0] = toupper((unsigned char)s[0]);\n            s[1] = toupper((unsigned char)s[1]);\n            ++i;\n        }\n        else if (isupper((unsigned char)s[0]) &amp;&amp; isupper((unsigned char)s[1]))\n        {\n            s[0] = tolower((unsigned char)s[0]);\n            s[1] = tolower((unsigned char)s[1]);\n            ++i;\n        }\n\n        rek(s + i);\n    }\n\n    return s;\n}\n\nint main( void )\n{\n    char s[] = \"HEloOO\";\n\n    puts(rek(s));\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>heLOoo\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 355, "user_id": 5955876, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5b29bb86b71b9c789283bd5180355d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Count Zero", "link": "https://stackoverflow.com/users/5955876/count-zero"}, "is_accepted": false, "score": 0, "last_activity_date": 1483573983, "creation_date": 1483573983, "answer_id": 41475173, "question_id": 41474602, "link": "https://stackoverflow.com/questions/41474602/how-to-make-recursive-function-it-needs-to-check-if-in-a-given-string-the-curre/41475173#41475173", "title": "How to make recursive function, it needs to check if in a given string the current letter and the one next to it is either lowercase or upper case?", "body": "<p>I come up with this dirty solution:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cctype&gt;\n\nusing namespace std;\n\nstring solve(const string&amp; str)\n{\n    if (str.empty()) {\n        return \"\";\n    }\n    if (str.front() &gt;= 'a' &amp;&amp; str.front() &lt;= 'z') {\n        return (char)toupper(str.front()) + solve(str.substr(1));\n    }\n    if (str.front() &gt;= 'A' &amp;&amp; str.front() &lt;= 'Z') {\n        return (char)tolower(str.front()) + solve(str.substr(1));\n    }\n}\n\nint main()\n{\n    string str;\n    cin &gt;&gt; str;\n    cout &lt;&lt; solve(str) &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7117250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d55f00ff2fc926835d34860896da53e?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy D", "link": "https://stackoverflow.com/users/7117250/tommy-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 715, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1483573983, "creation_date": 1483570469, "last_edit_date": 1483571068, "question_id": 41474602, "link": "https://stackoverflow.com/questions/41474602/how-to-make-recursive-function-it-needs-to-check-if-in-a-given-string-the-curre", "title": "How to make recursive function, it needs to check if in a given string the current letter and the one next to it is either lowercase or upper case?", "body": "<p>It should convert a string like this: Example: <strong>HEloOO</strong>, should be converted into : <strong>heLOoo</strong> . For some reason it doesn't work,it just wont convert the letters from uppercase to lowercase and vice versa  any help would be appreciated ?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nvoid rek(char array[], int d)\n{\n    int counter=0;\n\n    if(d==0)\n    {\n        printf(\"%s \\n\",array);\n        printf(\"%d \\n\",counter);\n    }\n    else\n    {\n        if((array[d]&gt;='A' &amp;&amp; array[d]&lt;='Z')&amp;&amp;(array[d-1]&gt;='A' &amp;&amp; array[d-1]&lt;='Z'))\n        {\n            array[d]=array[d]+32;\n            array[d-1]=array[d-1]+32;\n            counter++;\n            rek(array,d-2);\n        }\n        if((array[d]&gt;='a' &amp;&amp; array[d]&lt;='z')&amp;&amp;(array[d-1]&gt;='a' &amp;&amp; array[d-1]&lt;='z'))\n        {\n            array[d]=array[d]-32;\n            array[d-1]=array[d-1]-32;\n            counter++;\n            rek(array,d-2);\n        }\n    }\n}\n\nint main()\n{\n    char array[100];\n    int d;\n\n    gets(array);\n    d=strlen(array);\n\n    rek(array,d);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 1323, "user_id": 2415161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8192ef3e3b566c9357604da1b7e310b?s=128&d=identicon&r=PG", "display_name": "Hermann D&#246;ppes", "link": "https://stackoverflow.com/users/2415161/hermann-d%c3%b6ppes"}, "edited": false, "score": 1, "creation_date": 1483570482, "post_id": 41474549, "comment_id": 70155125, "body": "Please take the <a href=\"https://stackoverflow.com/tour\">Tour</a>, learn to create an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> and consult your <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">Rubber Duck</a>. Do you have a <i>specific</i> question for us?"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1483570743, "post_id": 41474549, "comment_id": 70155250, "body": "<code>arr[i+1]</code> could invoke UB as at some point it will be equivalent to <code>arr[Size]</code> which is out of bounds. Although given the current checks, the whole array is not checked just the first two elements, move <code>return 1;</code> out of the loop and get rid of the <code>else if</code>, and change the loop to <code>for(i=0;i&lt;Size-1;i++)</code>. I think that&#39;ll do what you want but it&#39;s really hard to tell from the question"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1483571521, "post_id": 41474549, "comment_id": 70155542, "body": "Your function just checks the first 2 elements of the array, since it returns in both branches of the <code>if</code>."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1483571881, "creation_date": 1483571881, "answer_id": 41474857, "question_id": 41474549, "link": "https://stackoverflow.com/questions/41474549/the-function-not-returning-any-value/41474857#41474857", "title": "the function not returning any value", "body": "<p>You shouldn't return in the <code>else</code> block. This will immediately return <code>1</code> as soon as it finds two elements that are increasing, it won't check the rest of the array. As a result, your function just checks the first two elements of the array.</p>\n\n<p>Instead, wait until you get through the entire array. If you didn't return <code>0</code> inside the loop, it means that all the elements were ascending, so then you can return <code>1</code>.</p>\n\n<p>Also, you need to avoid accessing outside the array, so you need to stop the array when <code>i</code> is <code>Size - 2</code>, so that <code>arr[i+1]</code> is still inside the array.</p>\n\n<pre><code>int Up_array(int *arr,int Size )\n{\n    int i;\n    for(i=0;i&lt;Size-1;i++)\n    {\n        if (arr[i] &gt; arr[i+1]) \n        {\n            return 0;\n        }\n    }\n    return 1;\n}     \n</code></pre>\n\n<p>And in general, when the condition in <code>else if</code> is the exact opposite of the <code>if</code> condition, you should just use <code>else</code>, not <code>else if</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1483572024, "post_id": 41474867, "comment_id": 70155722, "body": "You don&#39;t need <code>if(Size &gt; 1)</code>, since the <code>for()</code> condition will fail immediately and the loop will never execute."}, {"owner": {"reputation": 1323, "user_id": 2415161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8192ef3e3b566c9357604da1b7e310b?s=128&d=identicon&r=PG", "display_name": "Hermann D&#246;ppes", "link": "https://stackoverflow.com/users/2415161/hermann-d%c3%b6ppes"}, "edited": false, "score": 1, "creation_date": 1483572297, "post_id": 41474867, "comment_id": 70155819, "body": "Please take the <a href=\"https://stackoverflow.com/tour\">Tour</a>. Just dumping code without an explanation is not considered a good answer. Please explain <i>how</i> and <i>why</i> you did whatever you did."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 1323, "user_id": 2415161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8192ef3e3b566c9357604da1b7e310b?s=128&d=identicon&r=PG", "display_name": "Hermann D&#246;ppes", "link": "https://stackoverflow.com/users/2415161/hermann-d%c3%b6ppes"}, "edited": false, "score": 0, "creation_date": 1483572882, "post_id": 41474867, "comment_id": 70156045, "body": "@HermannD&#246;ppes would you please quote the part in the <a href=\"https://stackoverflow.com/tour\">TOUR</a> which actually suggest what you said?"}, {"owner": {"reputation": 1323, "user_id": 2415161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8192ef3e3b566c9357604da1b7e310b?s=128&d=identicon&r=PG", "display_name": "Hermann D&#246;ppes", "link": "https://stackoverflow.com/users/2415161/hermann-d%c3%b6ppes"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1483573218, "post_id": 41474867, "comment_id": 70156150, "body": "@Michi I never claimed the existence of such a part. Those are two different sentences talking about different things."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 1323, "user_id": 2415161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8192ef3e3b566c9357604da1b7e310b?s=128&d=identicon&r=PG", "display_name": "Hermann D&#246;ppes", "link": "https://stackoverflow.com/users/2415161/hermann-d%c3%b6ppes"}, "edited": false, "score": 0, "creation_date": 1483573282, "post_id": 41474867, "comment_id": 70156177, "body": "@HermannD&#246;ppes But you just Down Voted an Answer  (or you didn&#39;t?) because of that."}, {"owner": {"reputation": 27, "user_id": 7376566, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10207357695731682/picture?type=large", "display_name": "Hai Vaknin", "link": "https://stackoverflow.com/users/7376566/hai-vaknin"}, "edited": false, "score": 0, "creation_date": 1483573525, "post_id": 41474867, "comment_id": 70156241, "body": "guys its still not working for me.. there no errors and still not returning nothing"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 27, "user_id": 7376566, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10207357695731682/picture?type=large", "display_name": "Hai Vaknin", "link": "https://stackoverflow.com/users/7376566/hai-vaknin"}, "edited": false, "score": 0, "creation_date": 1483573773, "post_id": 41474867, "comment_id": 70156327, "body": "@HaiVaknin This Answer has so many problems, no wonder is not Working."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "reply_to_user": {"reputation": 27, "user_id": 7376566, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10207357695731682/picture?type=large", "display_name": "Hai Vaknin", "link": "https://stackoverflow.com/users/7376566/hai-vaknin"}, "edited": false, "score": 0, "creation_date": 1483573830, "post_id": 41474867, "comment_id": 70156350, "body": "@HaiVaknin Please append your amended code to your question. I suspect you&#39;re simply not printing the return value, but only one way to know for sure :)"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 27, "user_id": 7376566, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10207357695731682/picture?type=large", "display_name": "Hai Vaknin", "link": "https://stackoverflow.com/users/7376566/hai-vaknin"}, "edited": false, "score": 0, "creation_date": 1483573983, "post_id": 41474867, "comment_id": 70156385, "body": "@HaiVaknin Just for curiosity, <a href=\"http://ideone.com/KZfL3W\" rel=\"nofollow noreferrer\">Does this work for you</a>?"}], "tags": [], "owner": {"reputation": 31, "user_id": 7023496, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dizdwLXiE-Q/AAAAAAAAAAI/AAAAAAAAAC8/8jF7p1qv63s/photo.jpg?sz=128", "display_name": "Riccardo Conti", "link": "https://stackoverflow.com/users/7023496/riccardo-conti"}, "is_accepted": false, "score": -1, "last_activity_date": 1483572088, "last_edit_date": 1483572088, "creation_date": 1483571937, "answer_id": 41474867, "question_id": 41474549, "link": "https://stackoverflow.com/questions/41474549/the-function-not-returning-any-value/41474867#41474867", "title": "the function not returning any value", "body": "<p>Almost right. Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint up_array(int *arr,int Size )\n{    \n    // Checking corner case where Size = 1 (no index out of bound)\n    if(Size &gt; 1) {\n        for(int i=0; i&lt;Size-1; ++i) {\n            if (arr[i] &gt; arr[i+1]) {\n                return 0;\n            } \n        }   \n    }\n    return 1;\n}       \n\nint main ()\n{\n    int *arr,Size;\n\n    printf(\"Please enter the size of the array:\\n\");\n    scanf(\"%d\",&amp;Size);\n    arr=(int*)malloc(Size*sizeof(int));\n    printf(\"Please enter the array (press enter after any number)\\n\");\n    for (int i=0; i&lt;Size ;i++) {\n        scanf(\"%d\",&amp;arr[i]);\n    }\n\n    printf(\"Result %d\", Up_array(arr,Size));\n\n    free(arr);\n    return 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 7376566, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10207357695731682/picture?type=large", "display_name": "Hai Vaknin", "link": "https://stackoverflow.com/users/7376566/hai-vaknin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1483587902, "creation_date": 1483570183, "last_edit_date": 1483587902, "question_id": 41474549, "link": "https://stackoverflow.com/questions/41474549/the-function-not-returning-any-value", "title": "the function not returning any value", "body": "<p>This is my code and its not working .</p>\n\n<p>if the arr in the prev position is bigger or smaller from the follow one if its bigger for all the array so i should return the value 1 </p>\n\n<p>if in some point in the array the prev position of the arr is bigger then then follow one so its should return the value 0 thank for any help</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint Up_array(int *arr,int Size )\n{\n    int i;\n    for(i=0;i&lt;Size;i++)\n\n        if (arr[i] &gt; arr[i+1]) \n        {\n            return 0;\n        }\n        else if(arr[i] &lt;= arr[i+1]) \n        {\n            return 1;\n        }   \n}       \n\nvoid main ()\n{\nint *arr,Size,i;\n\n    printf(\"please enter the size of the array\\n\");\n    scanf(\"%d\",&amp;Size);\n    arr=(int*)malloc(Size*sizeof(int));\n    printf(\"please enter the array\\n\");\n    for (i=0; i&lt;Size ;i++)\n        scanf(\"%d\",&amp;arr[i]);\n    Up_array(arr,Size);\n    free(arr);\n    system(\"pause\");\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "parallel-processing", "openmp", "parallel-for"], "comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1483570303, "post_id": 41474424, "comment_id": 70155051, "body": "You have a reduction and loops not in canonical form, I would have expected a message from the compiler."}, {"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1483593094, "post_id": 41474424, "comment_id": 70160924, "body": "How do you time it?"}, {"owner": {"reputation": 1, "user_id": 6899309, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n7FfMAjfHdQ/AAAAAAAAAAI/AAAAAAAAACc/8KX37RLuiy8/photo.jpg?sz=128", "display_name": "QckNdDrt", "link": "https://stackoverflow.com/users/6899309/qcknddrt"}, "edited": false, "score": 0, "creation_date": 1483601285, "post_id": 41474424, "comment_id": 70164128, "body": "I time it with omp_get_wtime()  ... one call direct before this loop and one directly after."}, {"owner": {"reputation": 656, "user_id": 2722057, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/094b253c70fd99cb98d72026099c1f91?s=128&d=identicon&r=PG&f=1", "display_name": "Paul R.", "link": "https://stackoverflow.com/users/2722057/paul-r"}, "edited": false, "score": 1, "creation_date": 1483614303, "post_id": 41474424, "comment_id": 70171544, "body": "Just to make sure: Did you enable openmp support in the compiler options and did you include the omp.h header to your file? Could you provide a <a href=\"http://stackoverflow.com/help/mcve\">minimal, correct and verifiable example</a>? This helps people to better understand your problem."}, {"owner": {"reputation": 1, "user_id": 6899309, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n7FfMAjfHdQ/AAAAAAAAAAI/AAAAAAAAACc/8KX37RLuiy8/photo.jpg?sz=128", "display_name": "QckNdDrt", "link": "https://stackoverflow.com/users/6899309/qcknddrt"}, "edited": false, "score": 0, "creation_date": 1483616166, "post_id": 41474424, "comment_id": 70172818, "body": "OpenMp flag is set (compiled with visual studio 2015) and omp.h is also included. Will add an verifiable  example."}, {"owner": {"reputation": 1, "user_id": 6899309, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n7FfMAjfHdQ/AAAAAAAAAAI/AAAAAAAAACc/8KX37RLuiy8/photo.jpg?sz=128", "display_name": "QckNdDrt", "link": "https://stackoverflow.com/users/6899309/qcknddrt"}, "reply_to_user": {"reputation": 656, "user_id": 2722057, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/094b253c70fd99cb98d72026099c1f91?s=128&d=identicon&r=PG&f=1", "display_name": "Paul R.", "link": "https://stackoverflow.com/users/2722057/paul-r"}, "edited": false, "score": 0, "creation_date": 1483619020, "post_id": 41474424, "comment_id": 70174787, "body": "@Paul R. You were right ... had set the false flag, thank you ! Better look twice -.-"}, {"owner": {"reputation": 656, "user_id": 2722057, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/094b253c70fd99cb98d72026099c1f91?s=128&d=identicon&r=PG&f=1", "display_name": "Paul R.", "link": "https://stackoverflow.com/users/2722057/paul-r"}, "edited": false, "score": 0, "creation_date": 1483620626, "post_id": 41474424, "comment_id": 70175952, "body": "I think there is another problem with this code. I never used collapse myself before, but If I understand it right, there is a race condition in the inner loop.  <code>result[mNdx * N + nNdx] +=</code> can be executed by different threads having different <code>elemNdx</code> but identical <code>mNdx</code> and <code>nNdx</code>. Maybe collapse(2) would be a better choice."}, {"owner": {"reputation": 1, "user_id": 6899309, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n7FfMAjfHdQ/AAAAAAAAAAI/AAAAAAAAACc/8KX37RLuiy8/photo.jpg?sz=128", "display_name": "QckNdDrt", "link": "https://stackoverflow.com/users/6899309/qcknddrt"}, "edited": false, "score": 0, "creation_date": 1483621745, "post_id": 41474424, "comment_id": 70176825, "body": "Had to remove the collapse, the vs-compiler supports only OpenMP 2.0. Collapse is a OpenMP 3.0 feature. But your argument is also correct, this should cause an race condition. So collapse(2) should be the correct option, if you can use collapse at all."}, {"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1483633241, "post_id": 41474424, "comment_id": 70185103, "body": "Actually, you cannot use <code>collapse</code> at all here since the 2nd level loop isn&#39;t in the <a href=\"http://www.openmp.org/wp-content/uploads/openmp-4.5.pdf#section.2.6\" rel=\"nofollow noreferrer\">canonical form</a>, as it uses the 1st level index as start for iteration. The most important art of the standard that forbids collapsing your construct is: &quot;<b>The <i>b</i>, <i>lb</i> and <i>incr</i> expressions may not reference <i>var</i> of any of the associated loops.</b>&quot;"}], "owner": {"reputation": 1, "user_id": 6899309, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n7FfMAjfHdQ/AAAAAAAAAAI/AAAAAAAAACc/8KX37RLuiy8/photo.jpg?sz=128", "display_name": "QckNdDrt", "link": "https://stackoverflow.com/users/6899309/qcknddrt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483621964, "creation_date": 1483569526, "last_edit_date": 1483621964, "question_id": 41474424, "link": "https://stackoverflow.com/questions/41474424/openmp-for-loop-parallelization", "title": "OpenMp For-Loop Parallelization", "body": "<p>I try to parallelize the following piece of code with OpenMP.</p>\n\n<pre><code>#pragma omp parallel for collapse(2)\n{\n    for (int mNdx = 0; mNdx &lt; M; ++mNdx)\n    {\n        for (int nNdx = mNdx; nNdx &lt; N; ++nNdx)\n        {\n            for (int elemNdx = mNdx; elemNdx &lt;= nNdx; ++elemNdx)\n            {\n                result[mNdx * N + nNdx] += matrixOne[mNdx * N + elemNdx] * matrixTwo[elemNdx * N + nNdx];\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>But the SpeedUp is always about 1.0 (+- 0.05). I tried every possible scheduling (auto, dynamic, static and guided ), different chunk sizes, without collapse and with collapse(2).\nThe runtime doesn't change at all ...</p>\n\n<p>Can anyone explain me why or where my fault is ? <br>\nCould it be due to automated for-loop compiler parallelization ?</p>\n\n<p>Thanks in advance for any advice/tip !</p>\n\n<p>Update:</p>\n\n<p>As required an verifiable example.</p>\n\n<pre><code>#include &lt;omp.h&gt;\n#include &lt;iostream&gt;\n\nvoid initMatrix(float* mat, const int M, const int N);\nvoid initResMatrix(float* mat, const int M, const int N);\n\ndouble matMulUpperTriangular_C(float* matrixOne, float* matrixTwo, float* result, const int M, const int N);\ndouble matMulUpperTriangular_Omp(float* matrixOne, float* matrixTwo, float* result, const int M, const int N);\n\nint main()\n{\n    const int M = 2048, N = 2048;\n    float* matOne = (float*)malloc(M * N * sizeof(float));\n    float* matTwo = (float*)malloc(M * N * sizeof(float));\n    float* res = (float*)malloc(M * N * sizeof(float));\n\n    initMatrix(matOne, M, N);\n    initMatrix(matTwo, M, N);\n    initResMatrix(res, M, N);\n\n    double timeConsumption[2] = { 0.0, 0.0 };\n\n    timeConsumption[0] = matMulUpperTriangular_C(matOne, matTwo, res, M, N);\n    timeConsumption[1] = matMulUpperTriangular_Omp(matOne, matTwo, res, M, N);\n\n    std::cout &lt;&lt; \"Runtime C:\\t\\t\" &lt;&lt; timeConsumption[0] &lt;&lt; \"s\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Runtime Omp:\\t\\t\" &lt;&lt; timeConsumption[1] &lt;&lt; \"s\";\n    std::cout &lt;&lt; \" | SpeedUp: \" &lt;&lt; timeConsumption[0] / timeConsumption[1] &lt;&lt; std::endl;\n\n    system(\"PAUSE\");\n    return 0;\n}\n\nvoid initMatrix(float* mat, const int M, const int N)\n{\n    for (int mNdx = 0; mNdx &lt; M; ++mNdx)\n    {\n        for (int nNdx = 0; nNdx &lt; mNdx; ++nNdx)\n        {\n            mat[mNdx * N + nNdx] = 0;\n        }\n        for (int nNdx = mNdx; nNdx &lt; N; ++nNdx)\n        {\n            mat[mNdx * N + nNdx] = ((mNdx + nNdx) % 5 + 1) * 0.1f;\n        }\n    }\n}\n\nvoid initResMatrix(float* mat, const int M, const int N)\n{\n    for (int mNdx = 0; mNdx &lt; M; ++mNdx)\n    {\n        for (int nNdx = 0; nNdx &lt; N; ++nNdx)\n        {\n            mat[mNdx * N + nNdx] = 0.0f;\n        }\n    }\n}\n\ndouble matMulUpperTriangular_C(float* matrixOne, float* matrixTwo, float* result, const int M, const int N)\n{\n    double startTime = omp_get_wtime();\n\n    for (int mNdx = 0; mNdx &lt; M; ++mNdx)\n    {\n        for (int nNdx = mNdx; nNdx &lt; N; ++nNdx)\n        {\n            for (int elemNdx = mNdx; elemNdx &lt;= nNdx; ++elemNdx)\n            {\n                result[mNdx * N + nNdx] += matrixOne[mNdx * N + elemNdx] * matrixTwo[elemNdx * N + nNdx];\n            }\n        }\n    }\n\n    double endTime = omp_get_wtime();\n\n    return endTime - startTime;\n}\n\ndouble matMulUpperTriangular_Omp(float* matrixOne, float* matrixTwo, float* result, const int M, const int N)\n{\n    double startTime = omp_get_wtime();\n\n    #pragma omp parallel for collapse(2)\n    {\n        for (int mNdx = 0; mNdx &lt; M; ++mNdx)\n        {\n            for (int nNdx = mNdx; nNdx &lt; N; ++nNdx)\n            {\n                for (int elemNdx = mNdx; elemNdx &lt;= nNdx; ++elemNdx)\n                {\n                    result[mNdx * N + nNdx] += matrixOne[mNdx * N + elemNdx] * matrixTwo[elemNdx * N + nNdx];\n                }\n            }\n        }\n    }\n\n    double endTime = omp_get_wtime();\n\n    return endTime - startTime;\n}\n</code></pre>\n\n<p>Solved:</p>\n\n<p>Stupid mistake ...\nhad set the /MP-Flag (Build with Multiple Processes) instead of /openmp.\nNow the SpeedUp is about 2.0 :)</p>\n\n<p>Sorry and thank you all for your help !</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "signals", "posix"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 2, "creation_date": 1483569197, "post_id": 41474299, "comment_id": 70154618, "body": "Check the man page for <code>write</code> instead. It should tell you what errno is set to on certain errors."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1483574641, "post_id": 41474299, "comment_id": 70156549, "body": "Note also that <code>write()</code> returns <code>ssize_t</code>, and <b>NOT</b> <code>int</code>.  They are not the same."}, {"owner": {"reputation": 2975, "user_id": 5559342, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/39185a39d1b8b29d0b51564f7d55164e?s=128&d=identicon&r=PG&f=1", "display_name": "Robb1", "link": "https://stackoverflow.com/users/5559342/robb1"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1483608187, "post_id": 41474299, "comment_id": 70167603, "body": "Thank you both! @AndrewHenle I know it, I just decided to copy the piece of code as I found it :) do you think I should edit the question all the same with <code>ssize_t</code> instead of <code>int</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 5, "creation_date": 1483570357, "post_id": 41474383, "comment_id": 70155077, "body": "This answer is not really sufficient; it doesn&#39;t explain the situations under which <code>EINTR</code> can (or more importantly, can&#39;t) happen. I consider the latter more important because failure to understand that it usually can&#39;t happen is a cause of endless cargo-culting."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1483574572, "post_id": 41474383, "comment_id": 70156531, "body": "@R.. <i>This answer is not really sufficient; it doesn&#39;t explain the situations under which <code>EINTR</code> can (or more importantly, can&#39;t) happen. I consider the latter more important because failure to understand that it usually can&#39;t happen is a cause of endless cargo-culting.</i> If you don&#39;t &quot;cargo cult&quot; system calls, changing something like the signal mask of a process can break things anywhere.  If you like writing fragile code that can be broken by something completely unrelated, that&#39;s your choice.  But please don&#39;t characterize writing robust code as &quot;cargo-culting&quot;."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1483584370, "post_id": 41474383, "comment_id": 70159024, "body": "@AndrewHenle: Installing an interrupting signal handler is an invasive and intentional thing you do when you <i>want</i> to error-out of blocking syscalls that get interrupted. Looping to repeat when that happens does not make sense in general, only when you know you really want that behavior."}, {"owner": {"reputation": 129, "user_id": 3075972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7d41b9d1182d47e16f6064581090c3?s=128&d=identicon&r=PG", "display_name": "bmcorser", "link": "https://stackoverflow.com/users/3075972/bmcorser"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1539048631, "post_id": 41474383, "comment_id": 92350170, "body": "@R.. can you explain (or perhaps just link to an explanation of) a situation that might lead to such a signal handler being a sensible option?"}], "tags": [], "owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "is_accepted": false, "score": 2, "last_activity_date": 1483569336, "creation_date": 1483569336, "answer_id": 41474383, "question_id": 41474299, "link": "https://stackoverflow.com/questions/41474299/checking-if-errno-eintr-what-does-it-mean/41474383#41474383", "title": "Checking if errno != EINTR: what does it mean?", "body": "<p>From the <a href=\"https://linux.die.net/man/2/write\" rel=\"nofollow noreferrer\" title=\"man page\">man page</a> on <code>write</code>:</p>\n\n<blockquote>\n  <p>The call was interrupted by a signal before any data was written</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 6413, "user_id": 5555803, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4823cf23548ba1e4634ad67e78468e67?s=128&d=identicon&r=PG&f=1", "display_name": "Orkhan Alikhanov", "link": "https://stackoverflow.com/users/5555803/orkhan-alikhanov"}, "edited": false, "score": 4, "creation_date": 1573410255, "post_id": 41474692, "comment_id": 103864946, "body": "Might be useful for nerds, <a href=\"https://en.wikipedia.org/wiki/Interrupt\" rel=\"nofollow noreferrer\">Interrupt</a>"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 42, "last_activity_date": 1577889949, "last_edit_date": 1577889949, "creation_date": 1483570943, "answer_id": 41474692, "question_id": 41474299, "link": "https://stackoverflow.com/questions/41474299/checking-if-errno-eintr-what-does-it-mean/41474692#41474692", "title": "Checking if errno != EINTR: what does it mean?", "body": "<p>Many system calls will report the <code>EINTR</code> error code if a signal occurred while the system call was in progress. No error actually occurred, it's just reported that way because the system isn't able to resume the system call automatically. This coding pattern simply retries the system call when this happens, to ignore the interrupt.</p>\n\n<p>For instance, this might happen if the program makes use of <code>alarm()</code> to run some code asynchronously when a timer runs out. If the timeout occurs while the program is calling <code>write()</code>, we just want to retry the system call (aka read/write, etc).</p>\n"}, {"comments": [{"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "edited": false, "score": 2, "creation_date": 1553856260, "post_id": 52459600, "comment_id": 97550244, "body": "Could you tell me where does the reference come from? I would like to take a look. :)"}, {"owner": {"reputation": 2687, "user_id": 5104016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2tHXG.jpg?s=128&g=1", "display_name": "zerocool", "link": "https://stackoverflow.com/users/5104016/zerocool"}, "reply_to_user": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "edited": false, "score": 0, "creation_date": 1558797528, "post_id": 52459600, "comment_id": 99222839, "body": "@Rick I forget I&#39;m very sorry but I think have to do with x86 and kernel stuff because at that time I was reading a lot of books about how stuff works so maybe Understanding the Linux Kernel book or The Linux Programming Interface book."}], "tags": [], "owner": {"reputation": 2687, "user_id": 5104016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2tHXG.jpg?s=128&g=1", "display_name": "zerocool", "link": "https://stackoverflow.com/users/5104016/zerocool"}, "is_accepted": false, "score": 7, "last_activity_date": 1537640480, "creation_date": 1537640480, "answer_id": 52459600, "question_id": 41474299, "link": "https://stackoverflow.com/questions/41474299/checking-if-errno-eintr-what-does-it-mean/52459600#52459600", "title": "Checking if errno != EINTR: what does it mean?", "body": "<p>the answers here are really good and  i want  to add some internal details :</p>\n\n<blockquote>\n  <p>System calls that are interrupted by signals can either abort and\n  return <code>EINTR</code> or automatically restart themselves\n  if and only  if <code>SA_RESTART</code> is specified in <code>sigaction(2)</code></p>\n</blockquote>\n\n<p>and the one responsible for this task is the <code>restart_block</code> which  used to track information and arguments for restarting system calls</p>\n"}], "owner": {"reputation": 2975, "user_id": 5559342, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/39185a39d1b8b29d0b51564f7d55164e?s=128&d=identicon&r=PG&f=1", "display_name": "Robb1", "link": "https://stackoverflow.com/users/5559342/robb1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32756, "favorite_count": 8, "accepted_answer_id": 41474692, "answer_count": 3, "score": 28, "last_activity_date": 1577889949, "creation_date": 1483568965, "last_edit_date": 1537665665, "question_id": 41474299, "link": "https://stackoverflow.com/questions/41474299/checking-if-errno-eintr-what-does-it-mean", "title": "Checking if errno != EINTR: what does it mean?", "body": "<p>I've found this piece of code used several times (also a similar one where it's used <code>open()</code> instead of <code>write()</code>).</p>\n\n<pre><code>int c = write(fd, &amp;v, sizeof(v));\nif (c == -1 &amp;&amp; errno != EINTR) {\n    perror(\"Write to output file\");\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p><strong>Why it is checked if <code>&amp;&amp; errno != EINTR</code> here ?</strong></p>\n\n<p>Looking for <code>errno</code> on <em>man</em> I found the following text about <code>EINTR</code>, but even if I visited <code>man 7 signal</code> that doesn't enlighten me.</p>\n\n<blockquote>\n  <p>EINTR Interrupted function call (POSIX.1); see signal(7).</p>\n</blockquote>\n"}, {"tags": ["c", "calloc"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 6, "creation_date": 1483568741, "post_id": 41474224, "comment_id": 70154444, "body": "Undefined behavior means anything can happen."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1483568756, "post_id": 41474224, "comment_id": 70154450, "body": "no syntax errors = no compile errors in <code>c</code>. What you have compiles fine, but you are writing beyond your memory region (when <code>n &gt; 0</code>) which is undefined behavior."}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 1, "creation_date": 1483568909, "post_id": 41474224, "comment_id": 70154502, "body": "You don&#39;t get errors for things like this in c. It will just try and write it to the address specified. You as the programmer have to be careful to make sure it doesn&#39;t happen."}], "answers": [{"tags": [], "owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "is_accepted": true, "score": 0, "last_activity_date": 1483569227, "last_edit_date": 1495540909, "creation_date": 1483569227, "answer_id": 41474363, "question_id": 41474224, "link": "https://stackoverflow.com/questions/41474224/strange-thing-about-calloc/41474363#41474363", "title": "strange thing about calloc", "body": "<p>In C, a lot of wrong and \"wrong\" things don't display error messages from the compiler. In fact, you may not even see error messagens when you run the program -- but another person running your program in a different computer may see the error.</p>\n\n<p>One important concept in C is called <em>undefined behavior</em>. To put it in simple terms, it means that the behavior of your program is unpredictable, but you can read more about this subject in this question: <a href=\"https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior\">Undefined, unspecified and implementation-defined behavior</a>.</p>\n\n<p>Your program is undefined for a two reasons:</p>\n\n<ol>\n<li>When either <code>size</code> or <code>nmemb</code> is zero, <code>calloc()</code> may return <code>NULL</code>. Your program is not checking the output of <code>calloc()</code>, so there's a good chance that when you do <code>test[i]</code> you are attempting to derreference a <code>NULL</code> pointer -- you should always check the result of <code>calloc()</code> and <code>malloc()</code>.</li>\n<li>When you call <code>malloc()</code> or <code>calloc()</code>, you are essentialy allocating dynamic memory for an array. You can use your pointer to access the elements of the array. But you can't access anything <em>past</em> the array. That is, if you allocate <code>n</code> elements you should not try to access the <code>n+1</code>-th element -- nether for reading.</li>\n</ol>\n\n<p>Both items above make your program invoke undefined behavior. There <strong>might</strong> also be something undefined about accessing an empty object other than item #2 listed above, but I'm unsure.</p>\n\n<p>You should always be careful about undefined behavior because, when your program invokes UB, it is essentialy <strong>unpredictable</strong>. You <em>could</em> see a compilation error, the program <em>could</em> give an error messagen, it <em>could</em> run successfuly without any problems or it <em>could</em> wipe out every single file in your hard disk.</p>\n"}], "owner": {"reputation": 13, "user_id": 7376418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2543a26d392bac72ec653ee137295498?s=128&d=identicon&r=PG&f=1", "display_name": "marcosk", "link": "https://stackoverflow.com/users/7376418/marcosk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "closed_date": 1483569326, "accepted_answer_id": 41474363, "answer_count": 1, "score": 1, "last_activity_date": 1483569227, "creation_date": 1483568627, "last_edit_date": 1483568785, "question_id": 41474224, "link": "https://stackoverflow.com/questions/41474224/strange-thing-about-calloc", "closed_reason": "Duplicate", "title": "strange thing about calloc", "body": "<p>I was writing some code and I used the function <code>calloc</code>. </p>\n\n<p>I understand that, when the first and the second arguments passed to this function are both zero, the function is going to alloc the necessary space for 0 elements, each of them with size 0, but here is the strange thing. </p>\n\n<p>This program works fine even if n > 0. Why is that happening? I think it should display an error because I'm trying to write in a position of the array that doesn't exist. Thanks!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n  int n;\n  scanf(\"%d\", &amp;n);\n  int *test = calloc(0, 0);\n  for(int i = 0; i &lt; n; i++){\n    test[i] = 100;\n    printf(\"%d \", test[i]);\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1483568879, "post_id": 41474163, "comment_id": 70154494, "body": "Related, the case Linus tries to amplify walks a pointer-to-pointer through the list, addressing not just the previous node, but rather the pointer that points to the prospect node. No external pointer-to-node is used beyond <code>head</code>, Rather, a pointer-to-pointer is used instead. And fwiw, the samples posted will both &quot;leak&quot; the removed-node if nothing else points to it in the given example. They will be unreachable once the link is severed."}], "answers": [{"tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": false, "score": 2, "last_activity_date": 1483569114, "creation_date": 1483569114, "answer_id": 41474335, "question_id": 41474163, "link": "https://stackoverflow.com/questions/41474163/singly-linked-list-remove/41474335#41474335", "title": "Singly-Linked List remove", "body": "<p>Sure you can do this in Python. What he's saying is that you have some data structure that represents the list itself and points to the head of the list, and you manipulate that just as you would the pointer in a list item when you're dealing with the first list item.</p>\n\n<p>Now Python is not C so the implementation would be different, but the principle applies. The list itself is not the same object as its first item, and list items should not have the same methods as the list as a whole, so it makes sense to use separate kinds of objects for them.</p>\n\n<p>Both of them can, however, use an attribute of the same name (e.g. <code>next</code>) to point to the next item. So when you iterate through the list, and you are at the first item, the \"previous\" item is the list itself, and you are manipulating its <code>next</code> attribute if you need to remove the first item.</p>\n\n<p>In the real world, of course, you would never write your own Python linked list class except as an exercise. The built-in <code>list</code> is more efficient.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1483569144, "creation_date": 1483569144, "answer_id": 41474342, "question_id": 41474163, "link": "https://stackoverflow.com/questions/41474163/singly-linked-list-remove/41474342#41474342", "title": "Singly-Linked List remove", "body": "<p>You cannot use Linus's specific trick in Python, because, as you well know, Python does not have pointers (as such) or an address-of operator.  You can still, however, eliminate a special case for the list head by giving the list a dummy head node.  You can do that as an inherent part of the design of your list, or you can do it on the fly just by creating an extra node and making it refer to the first data-bearing node as its next node.  Either way, all the nodes you might want to delete are then interior nodes, not special cases.</p>\n"}, {"tags": [], "owner": {"reputation": 105, "user_id": 4835086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b5b6b4edeab1b28365049c395cdce1?s=128&d=identicon&r=PG&f=1", "display_name": "Andi Kleve", "link": "https://stackoverflow.com/users/4835086/andi-kleve"}, "is_accepted": false, "score": 1, "last_activity_date": 1483570598, "creation_date": 1483570598, "answer_id": 41474632, "question_id": 41474163, "link": "https://stackoverflow.com/questions/41474163/singly-linked-list-remove/41474632#41474632", "title": "Singly-Linked List remove", "body": "<p>My first thought upon reading your question was: why would you want to build a singly linked list in python? Python offers a wealth of collection types and you can use these without having to worry about whether they are implemented as singly linked list, as double linked list or as some non-recursive data structure (which are usually easier to handle).</p>\n\n<p>But the answer to your question is: Python allows of course to build a singly linked list. For example, the following code does just that:</p>\n\n<pre><code>class Node:\n    def __init__(self, x, next):\n        self.x = x\n        self.next = next\n\n    def __str__(self):\n        return \"&lt;{}, {!s}&gt;\".format(self.x, self.next)\n\nn = Node(1, None)\nn = Node(2, n)\nn = Node(3, n)\nprint(n)  # output: &lt;3, &lt;2, &lt;1, None&gt;&gt;&gt;\n\nn.next.next = n.next.next.next\nprint(n)  # output: &lt;3, &lt;2, None&gt;&gt;\n</code></pre>\n\n<p>The difference to C is: we did not have to <code>malloc()</code> or work with pointers because python handles memory for us. Python has references instead of pointers, they are similar but much safer and easier to use.</p>\n\n<p>However, before implementing a linked list, you should consider what your requirements are regarding your collection and maybe you can pick a good one from the built-ins or from the collections module.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "is_accepted": false, "score": 0, "last_activity_date": 1514356594, "last_edit_date": 1514356594, "creation_date": 1514355579, "answer_id": 47987293, "question_id": 41474163, "link": "https://stackoverflow.com/questions/41474163/singly-linked-list-remove/47987293#47987293", "title": "Singly-Linked List remove", "body": "<p>You need two levels of indirection to do it the way Linus suggests, but you can potentially do it in Python perhaps by having a reference to an object which stores a reference to an object or something of this sort (an index to an index?). That said, I don't think it maps so elegantly or efficiently to Python and it'd probably be quite wasteful to use an object just to represent a single link in a linked structure. </p>\n\n<p>In Python's case I'd just do the additional branching to check for cases where you're removing from the head unless there's some trick I'm missing.</p>\n\n<p>As for implementing linked lists yourself, I actually find many use cases where the standard libraries don't suffice. Here's one example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/S9i9A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S9i9A.png\" alt=\"enter image description here\"></a></p>\n\n<p>... where the grid might have 10,000 cells. Most linked lists provided by standard libraries aren't optimized to store 10,000+ linked lists in the size of a 32-bit index per list since they're trying to provide interfaces that allow the linked list to be used in isolation (not using a separate backing data structure for storage like an array). Typically the most efficient use of a linked list is one that doesn't own memory or manage any resources. It's just linking data in an auxiliary fashion already allocated and managed in another data structure, like this for a 128-bit (16-byte) tree node in an n-ary tree where elements can be stored at any level of the hierarchy:</p>\n\n<pre><code>struct TreeNode\n{\n     int32 parent;       // parent index or -1 for no parent\n     int32 first_child;  // first child of this node or -1\n     int32 next_sibling; // next child for the parent node or -1\n     int32 element;      // element data stored in this node or -1\n                         // if no data is associated\n};\n</code></pre>\n\n<p>So there's a lot of use cases for implementing your own linked lists and other linked structures which are significantly more efficient for a more narrowly-applicable use case (grid data structures, octrees, quad-trees, graphs, etc), but again, I don't think you can use this trick in languages that don't easily allow you to utilize two or more levels of pointer indirection. Python inherently only has one for objects -- same with Java and C#. You'd need something like a <em>\"reference to a reference to an object\"</em> or an <em>\"index to an index to an object\"</em> or <em>\"an index to an object reference to an object\"</em>.</p>\n\n<p>Also linked lists generally aren't so useful in languages that don't allow you to manage where everything is stored in memory since you can end up getting cache misses galore iterating through linked lists otherwise if each list node is fragmented in memory as would often be the case after a GC cycle, e.g. For linked lists to be really efficient as in the case of the Linux kernel requires you to be able to really have fine control over where each node resides in memory so that list traversal is actually mostly, if not entirely, just iterating through contiguous chunks of memory. Otherwise you're generally better-off using small arrays even if that implies linear-time removals and insertions to/from the middle.</p>\n"}], "owner": {"reputation": 3516, "user_id": 1597944, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/c1d9df1b61a99e23af28bf753da54256?s=128&d=identicon&r=PG&f=1", "display_name": "Harish Kayarohanam", "link": "https://stackoverflow.com/users/1597944/harish-kayarohanam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1050, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1514356594, "creation_date": 1483568292, "last_edit_date": 1483568537, "question_id": 41474163, "link": "https://stackoverflow.com/questions/41474163/singly-linked-list-remove", "title": "Singly-Linked List remove", "body": "<p>I was doing Singly-Linked List implementation and I remember Linus Torvalds talking about it <a href=\"https://youtu.be/o8NPllzkFhE?t=890\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>In a singly-linked list in order to remove a node we should have access to the previous node and then change the node it is currently pointing to.</p>\n\n<p>Like this\n<a href=\"https://i.stack.imgur.com/rVCdE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rVCdE.png\" alt=\"enter image description here\"></a></p>\n\n<p>So any way we should have access to the previous node.</p>\n\n<p>But Linus Torvalds removed the special case by using the idea of address in C. So that head also has the 'previous thing' which is the address of head which points to head. So he has used C's feature of pointer and address to remove special case.</p>\n\n<p>The normal code with special case \n<a href=\"https://i.stack.imgur.com/gvF0j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gvF0j.png\" alt=\"enter image description here\"></a></p>\n\n<p>The code with special case becoming normal case\n<a href=\"https://i.stack.imgur.com/7XBSb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7XBSb.png\" alt=\"enter image description here\"></a></p>\n\n<p>I think this kind of special case removal in singly linked list cannot be done in python, because we don't have the concept of pointers (and hence I will not be able to go one step before head)? Am I right ?</p>\n"}, {"tags": ["c", "list", "sorting", "alphabetical", "alphabetical-sort"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1483567539, "post_id": 41473992, "comment_id": 70153923, "body": "Hmmmm <code>char height[50];</code> --&gt; 50 implies the possibility of <i>very</i> tall students.  ;-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483567594, "post_id": 41473992, "comment_id": 70153945, "body": "What is <code>struct alunno</code>?  IAC, recommend <code>*root = malloc(sizeof(struct alunno));</code> --&gt; <code>*root = malloc(sizeof *(*root));</code> and post <i>true</i> code."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1483567697, "post_id": 41473992, "comment_id": 70153991, "body": "Did you heed the compiler warnings that you get? For example: <code>current = (*current)-&gt;next</code> should produce a warning as <code>current</code> is a <code>student **</code> whereas <code>(*current)-&gt;next</code> is a <code>student *</code>."}, {"owner": {"reputation": 15, "user_id": 6846223, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/15dNY.jpg?s=128&g=1", "display_name": "BlueJay", "link": "https://stackoverflow.com/users/6846223/bluejay"}, "edited": false, "score": 0, "creation_date": 1483567719, "post_id": 41473992, "comment_id": 70154004, "body": "i forgot to translate it"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1483568037, "post_id": 41473992, "comment_id": 70154155, "body": "Note: With <code>N</code> students, to add another student with <code>add_element()</code>, the function may recurse <code>N</code> times.  If <code>N</code> is large, certainly this may be a problem with non-unrolled code.  Suggest a non-recursive solution."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 2, "creation_date": 1483568069, "post_id": 41473992, "comment_id": 70154171, "body": "Do not use the result of <code>strcmp</code> in a switch. The result is guaranteed to be <code>0</code>, or any negative or positive value - not specifically 1 or -1."}], "answers": [{"tags": [], "owner": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "is_accepted": true, "score": 2, "last_activity_date": 1483648947, "creation_date": 1483648947, "answer_id": 41494332, "question_id": 41473992, "link": "https://stackoverflow.com/questions/41473992/sort-in-alphabetical-order-a-list-in-c/41494332#41494332", "title": "Sort in alphabetical order a List in c", "body": "<p>After including remarks from comments to correct the proposed source code, the algorithm to sort the linked-list is missing some steps. At least, to sort a linked-list, it is necessary to have two loops. The choice used of a <code>struct student **current</code> access will be complex for a two nested loops.</p>\n\n<p>Here is another powerful sorting function using the optimized <code>qsort()</code> function.</p>\n\n<p><strong>Step 1</strong> - before showing the function, to sort a list, the <code>root</code> pointer shall be modified.</p>\n\n<blockquote>\n  <p>First method, used for the <code>add_element()</code> by sending the address of\n  the pointer.</p>\n</blockquote>\n\n<pre><code>void sort(struct student **root)\n{\n...\n}\n</code></pre>\n\n<blockquote>\n  <p>Second method, to return the modified <code>root</code>.</p>\n</blockquote>\n\n<pre><code>struct student *sort(struct student *root)\n{\n...\n    return (root);\n}\n</code></pre>\n\n<p><strong>Step 2</strong> - the function <code>sort()</code> using <code>qsort()</code> quicksort function.</p>\n\n<p>The method allocates a temporary array of pointers in order to have a fixed-size element to be sorted.</p>\n\n<ol>\n<li>The first loop is necessary to know the number of pointers to be sorted (if lower than 2, no sort is needed);</li>\n<li>After allocating the array of <code>struct student *</code>, fill the array by using a loop to each item of the linked-list;</li>\n<li>Call the <code>qsort()</code> function by using the customized comparison function <code>node_compare()</code> (see next step);</li>\n<li>Restore the linked-list with the sorted pointers by forcing the value of the <code>struct student *next</code> (the first is <code>*root</code> and the last is pointing to NULL).</li>\n<li>free the temporary array of <code>struct student *</code>;</li>\n</ol>\n\n<p>That's all.</p>\n\n<pre><code>//\nvoid sort(struct student **root)\n{\n    struct student *tmp;\n    struct student **array;\n    int i,icount;\n\n    // number of nodes to be sorted\n    for(tmp = *root,icount = 0;tmp!=NULL;tmp = tmp-&gt;next,icount++);\n    if (icount&lt;2) {\n        // no sort needed\n        return;\n    }\n\n    // allocate an array of pointers\n    array = (struct student **)malloc(icount*sizeof(struct student *));\n    // push linked-list into array of pointers\n    for(tmp = *root,icount = 0;tmp!=NULL;tmp = tmp-&gt;next,icount++) {\n        array[icount]=tmp;\n    }\n\n    // quicksort using node_compare() customized function\n    qsort(array, icount, sizeof(struct student *), node_compare);\n\n    // pop linked-list from array of pointers\n    *root = array[0];\n    (*root)-&gt;next = NULL;\n    for(tmp = *root,i = 1;i&lt;icount;i++) {\n        tmp-&gt;next = array[i];\n        array[i]-&gt;next = NULL;\n        tmp = tmp-&gt;next;\n    }\n    // free the allocated array of pointer\n    free(array);\n}\n//\n</code></pre>\n\n<p><strong>Step 3</strong> - the comparison function <code>node_compare()</code> needed to <code>qsort()</code>.</p>\n\n<blockquote>\n  <p>The function shall return a signed comparison as <code>strcmp()</code> does.</p>\n</blockquote>\n\n<pre><code>int node_compare(const void * a, const void * b)\n{\n    // restore node pointers\n    struct student *node_a = *((struct student **)a);\n    struct student *node_b = *((struct student **)b);\n\n    if (node_b==NULL) return (-1); // force 'node_a'\n    if (node_a==NULL) return (+1); // force 'node_b'\n    // use the strcmp() function\n    return (strcmp(node_a-&gt;lastname,node_b-&gt;lastname));\n}\n</code></pre>\n\n<p><strong>Enhancement</strong> - because the <code>add_element()</code> is using a recursive call not compliant with a long linked-list, here is a quite simple non-recursive algorithm.</p>\n\n<blockquote>\n  <p>If the recursive algorithm limits the size to few-centuries of\n  elements, the proposed one has been tested with 100,000 elements (40Mb\n  linked-list), generated randomly and sorted.</p>\n</blockquote>\n\n<pre><code>void add_element(struct student **root, char lastname[50], char name[50], char date_of_birth[50], char height[50])\n{\n    struct student **current;\n\n    for(current = root; *current !=NULL ; current = &amp;((*current)-&gt;next));\n    *current = (struct student *)malloc(sizeof(struct student));\n    strcpy((*current)-&gt;lastname,lastname);\n    strcpy( (*current)-&gt;name,name);\n    strcpy( (*current)-&gt;date_of_birth,date_of_birth);\n    strcpy( (*current)-&gt;height,height);\n\n    (*current)-&gt;next = NULL;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6846223, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/15dNY.jpg?s=128&g=1", "display_name": "BlueJay", "link": "https://stackoverflow.com/users/6846223/bluejay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 743, "favorite_count": 0, "accepted_answer_id": 41494332, "answer_count": 1, "score": 0, "last_activity_date": 1483648947, "creation_date": 1483567431, "last_edit_date": 1483567756, "question_id": 41473992, "link": "https://stackoverflow.com/questions/41473992/sort-in-alphabetical-order-a-list-in-c", "title": "Sort in alphabetical order a List in c", "body": "<p>Hi i am writing a program that manage a list of student, i am using a list, each element is described like this:</p>\n\n<pre><code>struct student\n{\n    char lastname[50];\n    char name[50];\n    char date_of_birth[50];\n    char height[50];\n    struct student *next;\n};\n\nstruct student *root=0; //this is the root node\n</code></pre>\n\n<p>This is how i add element to the list:</p>\n\n<pre><code>void add_element(struct student **root, char lastname[50], char name[50], char date_of_birth[50], char height[50])\n{\n    if(*root == 0)\n    {\n        *root = malloc(sizeof(struct student));\n         strcpy((*root)-&gt;lastname,lastname);\n         strcpy( (*root)-&gt;name,name);\n         strcpy( (*root)-&gt;date_of_birth,date_of_birth);\n         strcpy( (*root)-&gt;height,height);\n\n        (*root)-&gt;next = 0;\n    }\n    else\n    {\n        add_element(&amp;(*root)-&gt;next,lastname,name,date_of_birth,height);\n    }\n} \n</code></pre>\n\n<p>I also wrote 2 function, one is for reading from a file, the other is to write the file, the file contains all the students, everything works but i need a function to sort all the element in alphabetical order by lastname, i tried to write one, but it doesn't work, it keeps crashing.</p>\n\n<p>I tried a lot of things and they didn't work, this is one attempt, and it doesn't work :-(</p>\n\n<p>please help me</p>\n\n<pre><code>void sort(struct student *head)\n{\n    struct student **current;\n    struct student *tmp;\n\n    for(current = &amp;head ; *current !=NULL ; current = (*current)-&gt;next)\n    {\n        if((*current)-&gt;next == NULL)\n        {\n            break;\n        }\n        switch(strcmp((*current)-&gt;lastname,(*current)-&gt;next-&gt;lastname))\n        {\n            case 0:\n            {\n                printf(\"user not valid\");\n                break;\n            }\n\n            case 1:\n            {\n                tmp = *current;\n                *current = (*current)-&gt;next;\n                (*current)-&gt;next = tmp;\n                break;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483567248, "post_id": 41473864, "comment_id": 70153767, "body": "Admittedly it wouldn&#39;t have been enough to answer your question, but when you are having trouble with a C declaration, <a href=\"http://cdecl.org/\" rel=\"nofollow noreferrer\">Cdecl</a> is always a good starting point. What textbook is it, anyway?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1483567393, "post_id": 41473864, "comment_id": 70153845, "body": "Note that it is sometimes good and useful to have a pointer to a pointer. As the answers explain, however, that&#39;s not what you have in your example."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483568432, "post_id": 41473864, "comment_id": 70154320, "body": "@FabioTurati The link can be tailored.  Example  <a href=\"http://cdecl.org/?q=int+%28%2AarrayABC%29%5B10%5D%3B\" rel=\"nofollow noreferrer\">arrayABC as pointer to array 10 of int</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1483602816, "post_id": 41473864, "comment_id": 70164847, "body": "Could you perhaps leave a note about which book you are reading and post the exact quote? So we can blacklist the book and shame the author publicly on the internet."}], "answers": [{"comments": [{"owner": {"reputation": 1107, "user_id": 3930460, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/7saJD.jpg?s=128&g=1", "display_name": "Kevin Wu", "link": "https://stackoverflow.com/users/3930460/kevin-wu"}, "edited": false, "score": 0, "creation_date": 1483567529, "post_id": 41473922, "comment_id": 70153916, "body": "So basically this expression is the same as int arrayABC[10] with the exception that we can do something like arrayABC++?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1107, "user_id": 3930460, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/7saJD.jpg?s=128&g=1", "display_name": "Kevin Wu", "link": "https://stackoverflow.com/users/3930460/kevin-wu"}, "edited": false, "score": 0, "creation_date": 1483567596, "post_id": 41473922, "comment_id": 70153946, "body": "@KevinWu no it is not much like that.  The difference between <code>int x[10];</code> and <code>int (*x)[10];</code> is the same as the difference between <code>float y;</code> and <code>float *y;</code>"}, {"owner": {"reputation": 1107, "user_id": 3930460, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/7saJD.jpg?s=128&g=1", "display_name": "Kevin Wu", "link": "https://stackoverflow.com/users/3930460/kevin-wu"}, "edited": false, "score": 0, "creation_date": 1483567695, "post_id": 41473922, "comment_id": 70153989, "body": "What happens then if I dereference? (Do *arrayABC)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1107, "user_id": 3930460, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/7saJD.jpg?s=128&g=1", "display_name": "Kevin Wu", "link": "https://stackoverflow.com/users/3930460/kevin-wu"}, "edited": false, "score": 0, "creation_date": 1483568470, "post_id": 41473922, "comment_id": 70154337, "body": "@KevinWu added that to my answer. You can use <code>(*arrayABC)</code> in exactly the same way and with the same behaviour as you would use the name of the array that it points to."}, {"owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "edited": false, "score": 0, "creation_date": 1483579125, "post_id": 41473922, "comment_id": 70157781, "body": "@M.M Is <code>(*arrayABC)</code> the only way to access it as array? Can I dereference and store it into a variable first so I don&#39;t have to dereference it everytime?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "edited": false, "score": 0, "creation_date": 1483581645, "post_id": 41473922, "comment_id": 70158385, "body": "@raymai97 I&#39;m not sure what you mean. A pointer points to things, the purpose of using a pointer is so that you can dereference it to access the thing it is pointing to.  If you don&#39;t want to dereference every time then don&#39;t use a pointer.  You could make another array that is a copy of the array being pointed to."}, {"owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "edited": false, "score": 0, "creation_date": 1483583781, "post_id": 41473922, "comment_id": 70158888, "body": "@M.M Let&#39;s say we have <code>int a = 30, b = 0;</code>, then <code>int *p = &amp;a;</code>, I can deference the value into <code>b</code> by doing <code>b = *p;</code>, which will copy the value pointed by <code>p</code> into <code>b</code>. I would like to know if it&#39;s possible to deference <code>(*arrayABC)</code> into an array variable, making a copy of array."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "edited": false, "score": 1, "creation_date": 1483585217, "post_id": 41473922, "comment_id": 70159199, "body": "@raymai97 yes, write <code>int b[10]; memcpy(b, *arrayABC, sizeof b);</code>  . The assignment operator does not work with arrays in C, you have to use <code>memcpy</code> or a loop assigning element by element."}, {"owner": {"reputation": 1107, "user_id": 3930460, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/7saJD.jpg?s=128&g=1", "display_name": "Kevin Wu", "link": "https://stackoverflow.com/users/3930460/kevin-wu"}, "edited": false, "score": 0, "creation_date": 1483817866, "post_id": 41473922, "comment_id": 70257195, "body": "Two Questions: 1. Will foo upon use not decay into a pointer to the first element of the array and thus &amp;foo actually give back the address of the pointer? 2. When we say that a variable points to an array, what address is actually stored in it? How does it work internally?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1107, "user_id": 3930460, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/7saJD.jpg?s=128&g=1", "display_name": "Kevin Wu", "link": "https://stackoverflow.com/users/3930460/kevin-wu"}, "edited": false, "score": 0, "creation_date": 1483828731, "post_id": 41473922, "comment_id": 70260691, "body": "@KevinWu 1. no, please look up the decay rule. It does not happen in the case <code>&amp;foo</code>. The temporary pointer that results from decay does not have an address anyway.  2. The meaning is exactly the same as pointing to a <code>float</code> or anything else.  &quot;how does it work internally&quot; is an implementation detail, you could experiment with your compiler if you want, but the most common implementation is that at runtime the pointer holds a number corresponding to the memory address of the first byte of the object being pointed to"}, {"owner": {"reputation": 1107, "user_id": 3930460, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/7saJD.jpg?s=128&g=1", "display_name": "Kevin Wu", "link": "https://stackoverflow.com/users/3930460/kevin-wu"}, "edited": false, "score": 0, "creation_date": 1484123793, "post_id": 41473922, "comment_id": 70376003, "body": "but then what is the difference to a pointer pointing to the first element/byte of the array?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1107, "user_id": 3930460, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/7saJD.jpg?s=128&g=1", "display_name": "Kevin Wu", "link": "https://stackoverflow.com/users/3930460/kevin-wu"}, "edited": false, "score": 0, "creation_date": 1484132226, "post_id": 41473922, "comment_id": 70381504, "body": "@KevinWu the same as the difference between a pointer to float, and a pointer to char which points to the first byte of the float.  pointers have a type that they point to"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 10, "last_activity_date": 1483568439, "last_edit_date": 1483568439, "creation_date": 1483567069, "answer_id": 41473922, "question_id": 41473864, "link": "https://stackoverflow.com/questions/41473864/pointer-to-array-in-c/41473922#41473922", "title": "Pointer to Array in C", "body": "<p>This is a pointer to an array. It is not a pointer to a pointer.  Arrays and pointers are different. An array <em>has</em> an address, but an array <em>is</em> not an address. An array is a series of contiguous elements.</p>\n\n<p>This pointer points to the whole array and not just the first element, in the same way that a <code>float *</code> points to the whole float and not just the first byte.</p>\n\n<p>If you have for example:</p>\n\n<pre><code>int foo[10];\nint (*arrayABC)[10] = &amp;foo;\n</code></pre>\n\n<p>then the expressions <code>(*arrayABC)</code> and <code>foo</code> are identical. E.g. <code>foo[3]</code> is the same as <code>(*arrayABC)[3]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1483568203, "last_edit_date": 1483568203, "creation_date": 1483567240, "answer_id": 41473952, "question_id": 41473864, "link": "https://stackoverflow.com/questions/41473864/pointer-to-array-in-c/41473952#41473952", "title": "Pointer to Array in C", "body": "<p>If you have an object of a type <code>T</code> then a pointer to the object is declared like</p>\n\n<pre><code>T obj;\n\nT *ptr = &amp;obj;\n</code></pre>\n\n<p>Now let's the type <code>T</code> is defined the following way</p>\n\n<pre><code>typedef int T[10];\n</code></pre>\n\n<p>Thus the code above</p>\n\n<pre><code>T obj;\n\nT *ptr = &amp;obj;\n</code></pre>\n\n<p>can be rewritten using the typedef definition like</p>\n\n<pre><code>int obj[10];\n\nint (*ptr)[10] = &amp;obj;\n</code></pre>\n\n<p>In the both cases, when <code>T</code> is some abstract type and when <code>T</code> is an alias for <code>int[10]</code>, ptr is a pointer to an object. In the last case <code>ptr</code> is a pointer to an array of <code>10</code> elements of type <code>int</code>.  That is the object pointed to by <code>ptr</code> has array type. Arrays and poiters are different types.</p>\n\n<p>Try the following simple demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void )\n{\n    typedef int T[10];\n\n    T a;\n\n    T *pa = &amp;a;\n\n    printf( \"%zu\\n\", sizeof( *pa ) );\n\n    int b[10];\n\n    int ( *pb )[10] = &amp;b;\n\n    printf( \"%zu\\n\", sizeof( *pb ) );\n}    \n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>40\n40\n</code></pre>\n\n<p>As you can see the both values are equal to the size of an integer array of 10 elements. So the pointers point to arrays. </p>\n\n<p>If you write</p>\n\n<pre><code>int *arrayABC[10];\n</code></pre>\n\n<p>you will get an array of 10 pointers of type <code>int *</code>.</p>\n\n<p>If you write</p>\n\n<pre><code>int (*arrayABC)[10];\n</code></pre>\n\n<p>you will get a pointer to an array of 10 integers.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1483568196, "creation_date": 1483568196, "answer_id": 41474145, "question_id": 41473864, "link": "https://stackoverflow.com/questions/41473864/pointer-to-array-in-c/41474145#41474145", "title": "Pointer to Array in C", "body": "<blockquote>\n  <p>In my textbook, it says that we have a pointer to a pointer to the 0th element of an integer array.</p>\n</blockquote>\n\n<p>Your textbook is ... badly worded, let's leave it at that.  It's a pointer to a 10-element array of <code>int</code>.  </p>\n\n<p>I can <em>kind</em> of see where the book is coming from.  Given the declaration</p>\n\n<pre><code>int (*a)[10];\n</code></pre>\n\n<p>the <em>expression</em> <code>*a</code> will have type <code>int [10]</code> (10-element array of <code>int</code>).  However, unless that expression is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, it will be converted (\"decay\") from type <code>int [10]</code> to <code>int *</code>, and the value of the expression will be the address of the first element of the array:</p>\n\n<pre><code>Expression       Type        \"Decays\" to        Value\n----------       ----        -----------        -----\n        *a       int [10]    int *              Address of first element of the array;\n                                                equivalent to `&amp;(*a)[0]`.  \n</code></pre>\n\n<p>Thus, if I call a function like</p>\n\n<pre><code>foo( *a );\n</code></pre>\n\n<p>what the function <em>actually receives</em> will be a pointer to the first element of the pointed-to array (its type will be <code>int *</code>, not <code>int **</code>).  </p>\n\n<p>So in effect, yes, <code>a</code> often winds up <em>behaving as</em> a pointer to a pointer to the first element of the array; however, its <em>type</em> is <em>not</em> \"pointer to pointer to <code>int</code>\", and type matters.  Given:</p>\n\n<pre><code>int (*a)[10];\nint **b;\n</code></pre>\n\n<p>then you'll get different behavior for the following:</p>\n\n<pre><code>sizeof *a vs. sizeof *b\na + i vs b + i (also applies to a++ vs b++)\n</code></pre>\n"}], "owner": {"reputation": 1107, "user_id": 3930460, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/7saJD.jpg?s=128&g=1", "display_name": "Kevin Wu", "link": "https://stackoverflow.com/users/3930460/kevin-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1068, "favorite_count": 2, "answer_count": 3, "score": 4, "last_activity_date": 1483568439, "creation_date": 1483566786, "question_id": 41473864, "link": "https://stackoverflow.com/questions/41473864/pointer-to-array-in-c", "title": "Pointer to Array in C", "body": "<p>How can you interpret the following line of code?</p>\n\n<pre><code>int (*arrayABC)[10];\n</code></pre>\n\n<p>In my textbook, it says that we have a pointer to a pointer to the 0th element of an integer array.</p>\n\n<p>However, I don't quite understand this.</p>\n\n<p>My interpretation: We have some variable, which gets as its value some address. This address is then the address of the 0th element of an UNNAMED integer array. Basically we have a pointer to the 0th element.</p>\n\n<p>Why then to have a pointer TO A POINTER?</p>\n"}, {"tags": ["c", "time", "pthreads", "semaphore"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1483565009, "post_id": 41473422, "comment_id": 70152667, "body": "Is it really that the signals&#39; correspondence with the system clock is important, or would it be sufficient for the <i>interval</i> between signals to be accurate and consistent?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1483565055, "post_id": 41473422, "comment_id": 70152693, "body": "&quot;however this causes a runtime error&quot;. What error exactly?"}, {"owner": {"reputation": 613, "user_id": 4245870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cW8C3.jpg?s=128&g=1", "display_name": "dovedevic", "link": "https://stackoverflow.com/users/4245870/dovedevic"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1483565120, "post_id": 41473422, "comment_id": 70152730, "body": "@JohnBollinger I would say more so the latter that former, but the former would be a great addition if at all possible <i>with</i> the former."}, {"owner": {"reputation": 613, "user_id": 4245870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cW8C3.jpg?s=128&g=1", "display_name": "dovedevic", "link": "https://stackoverflow.com/users/4245870/dovedevic"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1483565236, "post_id": 41473422, "comment_id": 70152782, "body": "@kaylum, I am using XCode at the moment for debugging, and it informs me only &quot;Thread 5: signal SIGKILL&quot; on the line of the <code>sleep(1);</code>. I&#39;ll edit the question to clarify."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1483565349, "post_id": 41473422, "comment_id": 70152836, "body": "That&#39;s not an error. It&#39;s expected behaviour. Any signal will interrupt a <code>sleep</code>. You won&#39;t even see it if you had not been attached with the debugger (except the <code>sleep</code> will terminate early). So I&#39;m not sure that really is a problem that would require looking for another solution. The question is, what alternate behaviour do you require upon SIGKILL?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1483565485, "post_id": 41473422, "comment_id": 70152878, "body": "See <a href=\"http://stackoverflow.com/questions/11338899/are-there-any-well-behaved-posix-interval-timers\">Are there any well-behaved POSIX interval timers?</a>."}, {"owner": {"reputation": 613, "user_id": 4245870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cW8C3.jpg?s=128&g=1", "display_name": "dovedevic", "link": "https://stackoverflow.com/users/4245870/dovedevic"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1483565537, "post_id": 41473422, "comment_id": 70152909, "body": "@kaylum, Oh..., I didn&#39;t think that XCode would then throw something like that, but I have just confirmed your comment and edited my post. Thanks. Also, in regards to the latter part of your comment, none, I just want to cancel the thread without problem, but also have the thread be as close to a one second pulse as I can and as accurate as possible."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1483574938, "post_id": 41473422, "comment_id": 70156639, "body": "What kind of &quot;second&quot; are you looking for? Do you want wall-clock seconds? Real-time seconds? CPU seconds? Process seconds?"}], "answers": [{"tags": [], "owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "is_accepted": true, "score": 1, "last_activity_date": 1483575891, "creation_date": 1483575891, "answer_id": 41475425, "question_id": 41473422, "link": "https://stackoverflow.com/questions/41473422/block-thread-until-second-changes-on-system-clock/41475425#41475425", "title": "Block thread until second changes on system clock", "body": "<p>You can use the sleep-until-absolute-time functionality of <code>clock_nanosleep()</code> to do this:</p>\n\n<pre><code>const double dutyCycle = 0.001;\nstruct timespec deadline;\n\nclock_gettime(CLOCK_MONOTONIC, &amp;deadline);\n\nwhile (self-&gt;myself-&gt;ThreadActiveStatus != THD_DONE) {\n    /* Sleep until start of next second tick */\n    deadline.tv_sec += 1;\n    deadline.tv_nsec = 0;\n    while (clock_nanosleep(CLOCK_MONOTONIC, TIMER_ABSTIME, &amp;deadline, NULL) != 0)\n        if (errno != EINTR) return NULL;\n\n    setPinValue(BBB_GPIO_PIN_ONE_PPS, ON);\n\n    /* Sleep until duty cycle expired */\n    deadline.tv_nsec = dutyCycle * 1000000000;\n    while (clock_nanosleep(CLOCK_MONOTONIC, TIMER_ABSTIME, &amp;deadline, NULL) != 0)\n        if (errno != EINTR) return NULL;\n\n    setPinValue(BBB_GPIO_PIN_ONE_PPS, OFF);\n}\n</code></pre>\n"}], "owner": {"reputation": 613, "user_id": 4245870, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cW8C3.jpg?s=128&g=1", "display_name": "dovedevic", "link": "https://stackoverflow.com/users/4245870/dovedevic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 41475425, "answer_count": 1, "score": 0, "last_activity_date": 1483575891, "creation_date": 1483564795, "last_edit_date": 1483565608, "question_id": 41473422, "link": "https://stackoverflow.com/questions/41473422/block-thread-until-second-changes-on-system-clock", "title": "Block thread until second changes on system clock", "body": "<p>I am writing a program to send pulse outputs at every second, according to my system clock. It's important that this is as accurate as I can make it. </p>\n\n<p>I am using XCode as my debugger at the moment before I independently run this on a different system.</p>\n\n<p>I am using a detached <code>pthread</code> which sends the output via a (not written by me) function. </p>\n\n<p>I know about the <code>sleep(int seconds)</code> call, however this is not synced on the clock, and I'm not too sure about the accuracy...</p>\n\n<p>I searched around for a better solution, but have only come across C's <code>time.h</code> <code>tm</code> struct. Is there a way to block my thread until the second on a <code>tm</code> changes, or any other better solutions? </p>\n\n<p>Here is my thread function for reference.</p>\n\n<pre><code>/*One PPS*/\nvoid *_THD_One_PPS(void *args) {\n    /* Description: Send a 1 millisecond pulse every second */\n    selfargs_t *self = args;\n    pthread_detach(pthread_self());\n\n    double dutyCycle = 0.001;\n\n    long unsigned onTime = dutyCycle * 1000000000;      // Time signal high, ns\n\n    while (self-&gt;myself-&gt;ThreadActiveStatus != THD_DONE) {\n        sleep(1);   //TODO: Sync with clock as much as possible\n        printf(\"/\\\\ \");\n        setPinValue(BBB_GPIO_PIN_ONE_PPS, ON);\n        pauseNanoSec(onTime);\n        setPinValue(BBB_GPIO_PIN_ONE_PPS, OFF);\n    }\n    printf(\"Pulse Per Sec DIED\");\n    _T_ThreadsDied++;\n    _T_ThreadsAlive--;\n    self-&gt;myself-&gt;ThreadActiveStatus = THD_DONE;\n    free(self-&gt;arguments);\n    free(self);\n    return NULL;\n}\n</code></pre>\n\n<p>Is there an easy or better way to do this?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1483562432, "post_id": 41472826, "comment_id": 70151422, "body": "This method of fibonacci has an exponential time complexity."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1483562716, "post_id": 41472826, "comment_id": 70151556, "body": "I think it will be 67 recursive calls if you change <code>r++</code> to <code>++r</code> because your first call will report <code>0</code>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1483563345, "post_id": 41472826, "comment_id": 70151860, "body": "Although technically the first call (from <code>main</code>) isn&#39;t recursive, so 66 may be the answer that the teacher is looking for."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1483563398, "post_id": 41472826, "comment_id": 70151887, "body": "34 is not the 8th term, it is either the 9th or 10th, depending on whether the Fibonacci series starts at 0 or at 1. Please see the <a href=\"https://en.wikipedia.org/wiki/Fibonacci_number\" rel=\"nofollow noreferrer\">wikipedia page</a>."}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1483565375, "post_id": 41472826, "comment_id": 70152845, "body": "@WeatherVane That&#39;s another zero-based/off-by-one issue. <code>34</code> is correct if you count the terms starting from the zeroth term, <code>1</code>."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1483565963, "post_id": 41472826, "comment_id": 70153125, "body": "If you&#39;re worried about @user3386109&#39;s comment it is best, in your answer to just thoroughly specify how you decided to count."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "edited": false, "score": 0, "creation_date": 1483570969, "post_id": 41472826, "comment_id": 70155348, "body": "@Caleb if you are believer in the use of &quot;zeroth&quot; you might be a believer in multiple universes too. However the initial term of a mathematical series is the first term and not the zeroth."}], "answers": [{"comments": [{"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "edited": false, "score": 0, "creation_date": 1483564993, "post_id": 41473254, "comment_id": 70152660, "body": "Don&#39;t you think @user3386109 comment makes sense? Only self calls are recursive, don&#39;t you think?"}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "reply_to_user": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "edited": false, "score": 1, "creation_date": 1483565844, "post_id": 41473254, "comment_id": 70153053, "body": "@KcFnMi That just comes down to how you want to count. <code>fib()</code> is a recursive function, and it&#39;s called 67 times. If you don&#39;t want to count the call from <code>main()</code> then your 66 is correct, and you can check that the same way I did above. You could also count the call from <code>main()</code> but not calls to <code>fib(0)</code> and <code>fib(1)</code>, since they return a value without recurring. I didn&#39;t realize that you were asking a question about semantics."}], "tags": [], "owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "is_accepted": false, "score": 2, "last_activity_date": 1483564027, "creation_date": 1483564027, "answer_id": 41473254, "question_id": 41472826, "link": "https://stackoverflow.com/questions/41472826/counting-number-of-recursive-calls-in-fibonacci-in-c/41473254#41473254", "title": "Counting number of recursive calls in fibonacci, in C", "body": "<blockquote>\n  <p>Am I right?</p>\n</blockquote>\n\n<p>Here's an easy way to check your results:</p>\n\n<pre><code>&gt; ./fib 8 | grep \"k:\" | wc -l\n67\n</code></pre>\n\n<p>That is, I ran your program at the command line and piped the output to <code>grep</code> to filter the output. Since every call to <code>fib()</code> produces exactly one output line containing <code>k:...</code>, the number of those lines should be the same as the number of calls to the <code>fib()</code> function. I further piped the output from <code>grep</code> to <code>wc -l</code>, which counts the number of lines, and the result is 67.</p>\n\n<p>As @weathervane points out in a comment, changing the <code>r++</code> to <code>++r</code> would increment <code>r</code> before evaluating it in the <code>printf()</code> call, so you'd get the right value displayed. Or, you could just look at the output and notice that you're counting starting from 0:</p>\n\n<pre><code>k: 0 fib n: 8 +\nk: 1 fib n: 7 +\nk: 2 fib n: 6 +\nk: 3 fib n: 5 +\n...\n</code></pre>\n\n<p>Since your count is zero-based, you have to add one to get the total.</p>\n"}, {"comments": [{"owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "edited": false, "score": 1, "creation_date": 1483565005, "post_id": 41473379, "comment_id": 70152665, "body": "Don&#39;t you think @user3386109 comment makes sense? The first call to <code>fib</code> should be considered recursive (any references)?"}], "tags": [], "owner": {"reputation": 343, "user_id": 5704995, "user_type": "registered", "profile_image": "https://graph.facebook.com/1714182875479763/picture?type=large", "display_name": "Shashi Kundan", "link": "https://stackoverflow.com/users/5704995/shashi-kundan"}, "is_accepted": true, "score": 4, "last_activity_date": 1483565755, "last_edit_date": 1483565755, "creation_date": 1483564607, "answer_id": 41473379, "question_id": 41472826, "link": "https://stackoverflow.com/questions/41472826/counting-number-of-recursive-calls-in-fibonacci-in-c/41473379#41473379", "title": "Counting number of recursive calls in fibonacci, in C", "body": "<h2>First of all Total fib calls = 67</h2>\n\n<p>recursive calls is = 66</p>\n\n<pre><code>                   fib(5)   ---root-first call ,not consider recursive call \n                 /           \\     \n           fib(4)             fib(3)   \n         /      \\                /     \\\n     fib(3)      fib(2)       fib(2)    fib(1)\n    /     \\        /    \\       /    \\  \n</code></pre>\n\n<p>-\nbecause first call is not considered as recursive call</p>\n\n<h2>Now lets derive a formula for calculate number of times fib(n) is called</h2>\n\n<p>Let f(n) be the number of calls made to calculate fib(n).</p>\n\n<p>If n &lt; 2 then f(n) = 1.</p>\n\n<p>Otherwise, f(n) = 1 + f(n - 1) + f(n - 2)</p>\n\n<p>So, f is at least O(fib(n)). In fact, f(n) is 2 * fib(n) - 1. </p>\n\n<p>We show this by induction:</p>\n\n<p>Base cases (n &lt; 2, that is, n = 0 or n = 1):</p>\n\n<p>f(n) = 1 = 2 * 1 - 1 = 2 * fib(n) - 1.</p>\n\n<p>Induction step (n >= 2):</p>\n\n<p>f(n + 1) = f(n) + f(n - 1) + 1</p>\n\n<p>f(n + 1) = 2 * fib(n) - 1 + 2 * fib(n - 1) - 1 + 1</p>\n\n<p>f(n + 1) = 2 * fib(n + 1) - 1</p>\n\n<h2>Example</h2>\n\n<p>fib(8)=34   </p>\n\n<p>so  recursive calls= 2*34-1=67</p>\n\n<p>ans=67-1(for first call)</p>\n\n<p>fib(4)=5</p>\n\n<p>so recursive calls= 2*5-1=9</p>\n\n<p>ans=9-1(for first call)</p>\n\n<h2>Also fib(n) can be calculated in o(logn)</h2>\n\n<p>so overall complexity reduces to o(logn)</p>\n\n<p>O(logn) for finding fib(n) and O(1) for finding recursive calls</p>\n\n<p>but your code takes exponential time</p>\n"}], "owner": {"reputation": 4020, "user_id": 5082463, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/877843e34372342a80c73f38ee79ad60?s=128&d=identicon&r=PG&f=1", "display_name": "KcFnMi", "link": "https://stackoverflow.com/users/5082463/kcfnmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3301, "favorite_count": 0, "accepted_answer_id": 41473379, "answer_count": 2, "score": 0, "last_activity_date": 1483565755, "creation_date": 1483562314, "last_edit_date": 1483563809, "question_id": 41472826, "link": "https://stackoverflow.com/questions/41472826/counting-number-of-recursive-calls-in-fibonacci-in-c", "title": "Counting number of recursive calls in fibonacci, in C", "body": "<p>I faced the following question:</p>\n\n<p>Calling <code>fib(8)</code> (below), how many recursive calls are made (ignoring the first) ? And what's the return value?</p>\n\n<pre><code>int fib (int n) {\n    if (n==0 || n==1) return 1;\n    else return fib(n-1) + fib(n-2);\n}\n</code></pre>\n\n<p>So I did:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint r = 0;\n\nint fib (int n) {\n    printf(\"k: %d fib n: %d\", r++, n);\n    if (n==0 || n==1) {\n        printf(\"\\n\");\n        return 1;\n    } else { \n        printf(\" +\\n\");\n        return fib(n-1) + fib(n-2); \n    }\n}\n\nint main(int argc, char **argv) {\n    int n = atoi(argv[1]);\n    int f = fib(n);\n    printf(\"\\nreturn: %d\\n\", f);\n    return 1;\n}\n</code></pre>\n\n<p>Using this I'll answer <code>fib(8) = 34</code> the number of recursive calls is <code>66</code>.</p>\n\n<p>Am I right?</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6951498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb5f7b843b36d11e570d2e8a3ee8c47?s=128&d=identicon&r=PG&f=1", "display_name": "ImReallyBadAtCoding", "link": "https://stackoverflow.com/users/6951498/imreallybadatcoding"}, "edited": false, "score": 0, "creation_date": 1483560690, "post_id": 41472430, "comment_id": 70150552, "body": "That worked :) Thanks! Could I have some more insight on that though?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 3, "user_id": 6951498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb5f7b843b36d11e570d2e8a3ee8c47?s=128&d=identicon&r=PG&f=1", "display_name": "ImReallyBadAtCoding", "link": "https://stackoverflow.com/users/6951498/imreallybadatcoding"}, "edited": false, "score": 0, "creation_date": 1483567321, "post_id": 41472430, "comment_id": 70153805, "body": "@ImReallyBadAtCoding: The <i>expression</i> <code>T</code> has type <code>float [N][N]</code>, so the compiler knows that it&#39;s an array type."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1510625531, "post_id": 41472430, "comment_id": 81504279, "body": "It&#39;s important to realize than when you pass an &quot;array&quot; to a function, you&#39;re not really passing the array, you&#39;re passing a pointer to its first element.  So the argument <code>float T[][N]</code> is really <code>float (*T)[N]</code>, and the compiler silently changes it to that for you."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1483560805, "last_edit_date": 1483560805, "creation_date": 1483560607, "answer_id": 41472430, "question_id": 41472384, "link": "https://stackoverflow.com/questions/41472384/passing-multidimensional-arrays-by-void-functions/41472430#41472430", "title": "Passing multidimensional arrays by void functions", "body": "<p>The only time <code>[]</code> is valid syntax is when declaring an array either with an initializer or as a function parameter.</p>\n\n<p>If you want to pass an array to a function, just pass it:</p>\n\n<pre><code>funk2(N,T);\n</code></pre>\n\n<p>You don't need to call out the dimensions of the array.  The compiler knows it's an array.</p>\n"}], "owner": {"reputation": 3, "user_id": 6951498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb5f7b843b36d11e570d2e8a3ee8c47?s=128&d=identicon&r=PG&f=1", "display_name": "ImReallyBadAtCoding", "link": "https://stackoverflow.com/users/6951498/imreallybadatcoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1510624101, "creation_date": 1483560421, "question_id": 41472384, "link": "https://stackoverflow.com/questions/41472384/passing-multidimensional-arrays-by-void-functions", "title": "Passing multidimensional arrays by void functions", "body": "<p>This is the code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint funk1()\n{\nint N=0;\nfloat a;\nFILE *f;\nf=fopen(\"wyniki.txt\", \"r\");\nwhile(fscanf(f,\"%f\", &amp;a)!=EOF)\n{\n    N++;\n}\nfclose(f);\nreturn N;\n}\n\nvoid funk2(int N, float T[][N])\n{\nFILE *f;\nf=fopen(\"wyniki.txt\", \"r\");\nfloat a;\nint i=0;\nwhile(fscanf(f,\"%f\", &amp;a)!=EOF)\n{\n    T[i][0]=a;\n    T[0][i]=a;\n\n    printf(\"funk 2\\n\");\n    printf(\"liczba = %f    i = %d \\n\", a, i);\n    printf(\"%f   %f\\n\", T[i][0], T[0][i]);\n\n\n    i++;\n}\nfclose(f);\n\n}\n\nmain()\n{\nint N =  funk1();\nfloat T[N][N];\n\nfunk2(N,T[][N]);\n\nint i=0;\nint j=0;\n\nfor(i=0;i&lt;N;i++){\n    for(j=0;j&lt;N;j++){\n        printf(\"|%f|\\t\",T[i][j]);\n    }\n    printf(\"\\n\");\n    printf(\"|%f|\\t\", T[i][j]);\n}\n\ngetch();\nreturn 0;\n}\n</code></pre>\n\n<p>The problem is only with funk2. I want to pass the matrix (T) from main to funk2, do stuff with it and then give it back to main. I have no idea how to do that to be honest, I just tried out messing with it but it doesn't work. Any idea how to do that? Should I provide more information or is this enough? You can ignore the first function and the first half of funk2 as well. It all works just fine, the problem I have only has to do with passing the twodimensional array.</p>\n\n<p>The result of this code is an error in</p>\n\n<pre><code>    funk2(N,T[][N]);\n</code></pre>\n\n<p>(expected expression before ']' token).</p>\n\n<p>Adding an N there results in</p>\n\n<pre><code>expected 'float (*)[(sizetype)(N)]' but argument is of type 'float'\n</code></pre>\n"}, {"tags": ["c", "multithreading", "list", "doubly-linked-list", "corruption"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483559843, "post_id": 41471790, "comment_id": 70150175, "body": "Note: Interesting Unicode character in comment <code>... spots larger than 1\u05e8</code>  Suggest removing distraction -  assuming it is not part of the problem."}, {"owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483559981, "post_id": 41471790, "comment_id": 70150237, "body": "removed - however comments are strippe during the compilation..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483560152, "post_id": 41471790, "comment_id": 70150319, "body": "Perhaps <code>void reader_thread()</code> --&gt; <code>void *reader_thread(void *x_void_ptr)</code>.  Found by enabling all warnings - it saves debug time, try it. <a href=\"http://timmurphy.org/2010/05/04/pthreads-in-c-a-minimal-working-example/\" rel=\"nofollow noreferrer\">Ref</a>"}, {"owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483560396, "post_id": 41471790, "comment_id": 70150421, "body": "tried,did not effect the output.the 2 issues are with synchronization as well as with this memory corruption,can&#39;t seem to find the issue."}, {"owner": {"reputation": 825, "user_id": 1442598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ba1d111d95d327bb1724c681bc5e1ca?s=128&d=identicon&r=PG", "display_name": "1000ml", "link": "https://stackoverflow.com/users/1442598/1000ml"}, "edited": false, "score": 0, "creation_date": 1483560420, "post_id": 41471790, "comment_id": 70150430, "body": "It&#39;s more about readability. Have you tried valgrind? Are you sure that <code>pthread_cond_wait(&amp;read_cond, &amp;read_mutex);</code> inside <code>initlist_pop_tail</code> is called with a locked mutex?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483560452, "post_id": 41471790, "comment_id": 70150442, "body": "Did you enable all warnings to find the other functions that have this problem too?  Was code corrected in those functions to return a valid value?"}, {"owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483560601, "post_id": 41471790, "comment_id": 70150507, "body": "1000ml - pthread_cond_wait called inside pop_tail locks the mutex as soon as the condition is set,and once it is available according to the docs. chux-i did - most are simply conventional - not related to memory leaks."}, {"owner": {"reputation": 825, "user_id": 1442598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ba1d111d95d327bb1724c681bc5e1ca?s=128&d=identicon&r=PG", "display_name": "1000ml", "link": "https://stackoverflow.com/users/1442598/1000ml"}, "edited": false, "score": 0, "creation_date": 1483560701, "post_id": 41471790, "comment_id": 70150561, "body": "<code>They shall be called with mutex locked by the calling thread or undefined behavior results.</code>: <a href=\"https://linux.die.net/man/3/pthread_cond_wait\" rel=\"nofollow noreferrer\">linux.die.net/man/3/pthread_cond_wait</a>"}, {"owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483560850, "post_id": 41471790, "comment_id": 70150647, "body": "1000ml - does that mean i need to lock the mutex before i block on the cond_wait?if so - that is problematic - because the condition is triggered by a writer thread - that has to lock the same mutex(in this scenario - the reader thread will block the general mutex, and wait for a condition to be set by a writer thread.This writer thread will wait for the mutex to free - a deadlock).look at the answer to this question:<a href=\"http://stackoverflow.com/questions/16522858/understanding-of-pthread-cond-wait-and-pthread-cond-signal\" title=\"understanding of pthread cond wait and pthread cond signal\">stackoverflow.com/questions/16522858/&hellip;</a>"}, {"owner": {"reputation": 825, "user_id": 1442598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ba1d111d95d327bb1724c681bc5e1ca?s=128&d=identicon&r=PG", "display_name": "1000ml", "link": "https://stackoverflow.com/users/1442598/1000ml"}, "edited": false, "score": 0, "creation_date": 1483561094, "post_id": 41471790, "comment_id": 70150786, "body": "Yes, but <code>cond_wait</code> will release the lock immediately and put the thread to sleep until a signal is received."}, {"owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483561648, "post_id": 41471790, "comment_id": 70151054, "body": "Good point.i edited that(see the original question) - locked the mutex before waiting for the condition,but the problem remains.Also,does it make sense to wait for a writer to signal and only then read value?"}, {"owner": {"reputation": 825, "user_id": 1442598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ba1d111d95d327bb1724c681bc5e1ca?s=128&d=identicon&r=PG", "display_name": "1000ml", "link": "https://stackoverflow.com/users/1442598/1000ml"}, "edited": false, "score": 0, "creation_date": 1483562392, "post_id": 41471790, "comment_id": 70151401, "body": "Isn&#39;t that what you&#39;re already doing? Yes that makes sense, otherwise you would have to continuously poll for new elements. But you might want to call <code>pop_tail</code> in a loop and handle all elements that are already queued, and only then fall back to sleep. You can&#39;t predict how the threads are scheduled so it&#39;s possible that <code>push_head</code> is called 3 times in a row before <code>pop_tail</code> is called once."}, {"owner": {"reputation": 825, "user_id": 1442598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ba1d111d95d327bb1724c681bc5e1ca?s=128&d=identicon&r=PG", "display_name": "1000ml", "link": "https://stackoverflow.com/users/1442598/1000ml"}, "edited": false, "score": 0, "creation_date": 1483562525, "post_id": 41471790, "comment_id": 70151468, "body": "I assume you&#39;re on linux since you&#39;re using gdb, so give valgrind a try. It can tell you where a double-delete occurs."}, {"owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483562857, "post_id": 41471790, "comment_id": 70151615, "body": "instead of waiting in initlist_pop_tail until i get signaled - i only wait for the signal if the length of the list is 0.however - now i get a segmentation fault.Can you spot the issue?i edited the original answer to include the revised pop_tail and push_Head code"}, {"owner": {"reputation": 825, "user_id": 1442598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ba1d111d95d327bb1724c681bc5e1ca?s=128&d=identicon&r=PG", "display_name": "1000ml", "link": "https://stackoverflow.com/users/1442598/1000ml"}, "edited": false, "score": 0, "creation_date": 1483563261, "post_id": 41471790, "comment_id": 70151815, "body": "<code>if(0 == target_list-&gt;length) { cond_wait(); }</code> you should make that a <code>while(...)</code> because of spurious wakeups."}, {"owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483563432, "post_id": 41471790, "comment_id": 70151902, "body": "edit:okay - replaced the if with a while and the segfault is gone- however the memory problem remains.What can be done except for valgrind?"}, {"owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483565207, "post_id": 41471790, "comment_id": 70152768, "body": "i gave up and used valgrind - enclosed the output in the answer.any idea what is the issue?"}, {"owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "edited": false, "score": 0, "creation_date": 1483566524, "post_id": 41471790, "comment_id": 70153418, "body": "@lippy1234: What exists to prevent the list length from going negative here: <code>target_list-&gt;length--;</code>?"}, {"owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "reply_to_user": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "edited": false, "score": 0, "creation_date": 1483566662, "post_id": 41471790, "comment_id": 70153479, "body": "@DavidCullen - this piece of code only runs if the length of the list is greater than 1(that is why i use the conditional variable and the pthread_cond_wait)"}, {"owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "edited": false, "score": 0, "creation_date": 1483566675, "post_id": 41471790, "comment_id": 70153487, "body": "@lippy1234: Why is <code>initlist_remove_last_k</code> accessing <code>target_list</code> without acquiring its mutex?"}, {"owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "reply_to_user": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "edited": false, "score": 0, "creation_date": 1483567011, "post_id": 41471790, "comment_id": 70153645, "body": "@DavidCullen - you are correct - i added a lock in the first lines that check the size of the list.however - it did not affect the result."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1483735652, "last_edit_date": 1483735652, "creation_date": 1483565175, "answer_id": 41473494, "question_id": 41471790, "link": "https://stackoverflow.com/questions/41471790/double-linked-list-memory-corruption/41473494#41473494", "title": "double linked list - memory corruption", "body": "<pre><code>#include &lt;pthread.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n\n#define USAGE_ERR \"Usage: ./hw3 &lt;WNUM&gt; &lt;RNUM&gt; &lt;MAX&gt; &lt;TIME&gt;\\n\"\n\n/* Argc parameter indexing consts */\n#define INPUT_WNUM_IDX 1\n#define INPUT_RNUM_IDX 2\n#define OUTPUT_MAX_IDX 3\n#define OUTPUT_TIME_IDX 4\n\ntypedef struct node {\n    int value;\n\n    struct node * previous;\n    struct node * next;\n}\nnode;\n\ntypedef struct {\n    int length;\n    node * head;\n    node * tail;\n    pthread_mutex_t mutex;\n}\nlist;\n\nlist * global_list;\nint stop_threads = 0;\nint MAX_LIST_SIZE;\npthread_cond_t      gc_cond  = PTHREAD_COND_INITIALIZER;\npthread_mutex_t     gc_mutex = PTHREAD_MUTEX_INITIALIZER;\n\npthread_cond_t      read_cond  = PTHREAD_COND_INITIALIZER;\npthread_mutex_t     read_mutex = PTHREAD_MUTEX_INITIALIZER;\n\nlist * initlist_create();\nvoid initlist_destroy(list * target_list);\nlist * initlist_push_head(list * target_list, int value);\nint initlist_pop_tail(list * target_list);\nvoid initlist_remove_last_k(list * target_list, int k);\nint initlist_size(list * target_list);\npthread_mutex_t initlist_get_mutex(list * target_list);\nvoid writer_thread();\nvoid reader_thread();\nvoid garbage_collect_thread();\n\n\nlist * initlist_create() {\n    size_t list_size = sizeof(list);\n    list * new_list = (list * ) malloc(list_size);\n    new_list-&gt;head = NULL;\n    new_list-&gt;tail = NULL;\n    new_list-&gt;length = 0;\n    if (0 != pthread_mutex_init( &amp; (new_list-&gt;mutex), NULL)) {\n        exit(errno);\n    }\n    return new_list;\n}\n\nvoid initlist_destroy(list * target_list) {\n    node * current_node;\n    node * temp_node;\n\n    if (0 != pthread_mutex_lock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n\n    if (0 != target_list-&gt;length) {\n        current_node = target_list-&gt;head;\n        while (current_node != NULL) {\n            temp_node = current_node-&gt;next;\n            free(current_node);\n            current_node = temp_node;\n        }\n    }\n\n    if (0 != pthread_mutex_unlock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n\n    if (0 != pthread_mutex_destroy( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n\n    free(target_list);\n}\n\nlist * initlist_push_head(list * target_list, int value) {\n    node * new_node;\n    size_t node_size = sizeof(node);\n\n\n    if (0 != pthread_mutex_lock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n\n    new_node = (node * ) malloc(node_size);\n    if (NULL == new_node)\n    {\n        printf(\"Malloc failed\\n\" );\n        exit(errno);\n    }\n    new_node-&gt;value = value;\n\n    if (0 == target_list-&gt;length) {\n        target_list-&gt;tail = new_node;\n    }\n    else {\n        target_list-&gt;head-&gt;previous = new_node;\n    }\n    new_node-&gt;next = target_list-&gt;head;\n    target_list-&gt;head = new_node;\n\n    pthread_cond_signal(&amp;read_cond);\n    target_list-&gt;length++;\n    if (0 != pthread_mutex_unlock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n    return target_list;\n}\n\nint initlist_pop_tail(list * target_list) {\n    int deleted_node_value;\n\n    if (0 != pthread_mutex_lock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n    while(0 == target_list-&gt;length) {\n        pthread_cond_wait(&amp;read_cond, &amp;target_list-&gt;mutex);\n    }\n    node * last_node = target_list-&gt;tail;\n    deleted_node_value = last_node-&gt;value;\n    target_list-&gt;tail = last_node-&gt;previous;\n    if (last_node-&gt;previous != NULL) {\n        last_node-&gt;previous-&gt;next = NULL;\n        }\n    else\n    {\n        target_list-&gt;head = NULL;\n\n    }\n    target_list-&gt;length--;\n    if (0 != pthread_mutex_unlock( &amp; ( target_list-&gt;mutex) )) {\n        exit(errno);\n    }\n    last_node-&gt;next = NULL;\n    last_node-&gt;previous = NULL;\n    free(last_node);\n\n\n\n    //  node *result = NULL;\n    // lock(&amp;list_ptr-&gt;mutex);\n    // if (list_ptr-&gt;head != NULL) {\n    //     result = list_ptr-&gt;tail;\n    //     list_ptr-&gt;tail = result-&gt;prev;\n    //     if (result-&gt;prev != NULL) {\n    //         result-&gt;prev-&gt;next = NULL;\n    //     }\n    //     else {\n    //         list_ptr-&gt;head = NULL;\n    //     }\n    //     list_ptr-&gt;length--;\n    // }\n    // unlock(&amp;list_ptr-&gt;mutex);\n    // if (result != NULL) {\n    //     result-&gt;next = NULL;\n    //     result-&gt;prev = NULL;\n    // }\n    // return result;\n\n    return deleted_node_value;\n}\n\nvoid initlist_remove_last_k(list * target_list, int k) {\n    int remove_size = k;\n    if (0 != pthread_mutex_lock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n    if (k &gt; target_list-&gt;length)\n    {\n        remove_size = target_list-&gt;length;\n    }\n    if (0 != pthread_mutex_unlock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n    for (int i = 0; i &lt; remove_size; ++i) {\n        initlist_pop_tail(target_list);\n    }\n}\n\nint initlist_size(list * target_list) {\n    int list_size;\n\n    if (0 != pthread_mutex_lock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n\n    list_size = target_list-&gt;length;\n\n    if (0 != pthread_mutex_unlock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n\n    return list_size;\n}\n\npthread_mutex_t initlist_get_mutex(list * target_list) {\n    pthread_mutex_t list_mutex;\n\n    list_mutex = target_list-&gt;mutex;\n\n    return list_mutex;\n\n}\n\nvoid writer_thread()\n{\n    while (1)\n    {\n        if (stop_threads) {\n            return;\n        }\n        if (MAX_LIST_SIZE &lt; initlist_size(global_list))\n        {\n\n            pthread_cond_signal(&amp;gc_cond);\n        }\n        initlist_push_head(global_list, rand());\n\n    }\n}\n\n\nvoid reader_thread()\n{\n    while (1)\n    {\n        if (stop_threads) {\n            return;\n        }\n        if (MAX_LIST_SIZE &lt; initlist_size(global_list))\n        {\n            pthread_cond_signal(&amp;gc_cond);\n        }\n        initlist_pop_tail(global_list);\n\n    }\n}\n\nvoid garbage_collect_thread()\n{\n    while(1) {\n        if (stop_threads) {\n            return;\n        }\n\n        if (0 != pthread_mutex_lock( &amp; (gc_mutex))) {\n            exit(errno);\n        }\n        pthread_cond_wait(&amp;gc_cond, &amp;(gc_mutex));\n        int remove_count = (initlist_size(global_list) / 2);\n        if (0 == remove_count){\n            continue;\n        }\n        initlist_remove_last_k(global_list, remove_count);\n        printf(\"GC \u2013 %d items removed from the list\\r\\n\", remove_count);\n        if (0 != pthread_mutex_unlock( &amp; (gc_mutex))) {\n            exit(errno);\n        }\n    }\n}\n\nint main(int argc, char * * argv) {\n    /* Validate arguments */\n    if (5 != argc) {\n        printf(USAGE_ERR);\n        exit(errno);\n    }\n\n    int writers_count        = atoi(argv[INPUT_WNUM_IDX]);\n    int readers_count        = atoi(argv[INPUT_RNUM_IDX]);\n    int max_run_time         = atoi(argv[OUTPUT_TIME_IDX]);\n    MAX_LIST_SIZE            = atoi(argv[OUTPUT_MAX_IDX]);\n    global_list = initlist_create();\n\n\n    pthread_t garbage_collector_thread;\n\n    pthread_t writer_threads[writers_count];\n    pthread_t reader_threads[readers_count];\n\n    if (0 != pthread_create(&amp;garbage_collector_thread, NULL, garbage_collect_thread, NULL))\n\n    {   exit(errno);\n    }\n\n    for (int i = 0; i &lt; writers_count; ++i)\n    {\n        if (0 != pthread_create(&amp;writer_threads[i], NULL, writer_thread, NULL))\n        {\n            exit(errno);\n        }\n    }\n\n\n    for (int x = 0; x &lt; readers_count; ++x)\n    {\n        if (0 != pthread_create(&amp;reader_threads[x], NULL, reader_thread, NULL))\n        {\n            exit(errno);\n        }\n    }\n\n\n    sleep(max_run_time);\n    stop_threads = 1;\n    int list_size = initlist_size(global_list);\n    printf(\"List size: %d\\r\\n\", list_size);\n\n    for (int i = 0; i &lt; readers_count; ++i)\n    {\n        pthread_cancel(&amp;reader_threads[i]);\n    }\n     for (int i = 0; i &lt; writers_count; ++i)\n    {\n        pthread_cancel(&amp;writer_threads[i]);\n    }\n\n    for (int i = 0; i &lt; list_size; ++i)\n    {\n        printf(\"num is %d\\r\\n\", initlist_pop_tail(global_list));\n    }\n\n    initlist_destroy(global_list);\n\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483706471, "post_id": 41475333, "comment_id": 70217212, "body": "I tried going over the initlist_destroy function,but i cant figure out why the error occurs.any idea?"}, {"owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "reply_to_user": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483712184, "post_id": 41475333, "comment_id": 70220790, "body": "Yes, you are doing something wrong when you add elements to your list or when you remove elements from your list. The <code>next</code> pointer of the last element of your list should be <code>NULL</code>. Instead, it points to the last element of the list. You should be able to see the problem by stepping through the list handling code in a debugger."}, {"owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483712562, "post_id": 41475333, "comment_id": 70220984, "body": "i changed it in the code,it is in the answer down.but now,when i run the code with 10 writers,10 readers,10 meax size and 100 seconds,it gets stuck on the cond_wait in the initlist_pop_tail function,and i cant seem to figure why?"}, {"owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "reply_to_user": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483717130, "post_id": 41475333, "comment_id": 70223784, "body": "I ran the program below and it crashes in <code>initlist_destroy</code> because it tries to free a pointer that was not allocated. Have you tried debugging your list handling code in a single-threaded program?"}, {"owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483718392, "post_id": 41475333, "comment_id": 70224587, "body": "I have.i do not undersand where the issue is.i am freeing the memory once in initlist_pop_tail(only once i&#39;ve removed all reffferences to it).Any ideas?"}, {"owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "reply_to_user": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483719997, "post_id": 41475333, "comment_id": 70225626, "body": "I modified your code in your answer to run single-threaded. I called <code>initlist_push_head</code> three times. I added my <code>list_print</code> function and ran it after each call to <code>initlist_pop_tail</code>. After each call to <code>initlist_pop_tail</code>, <code>list_print</code> still shows one more element in the list than the list length. Your <code>initlist_pop_tail</code> appears to be defective."}, {"owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483720697, "post_id": 41475333, "comment_id": 70226065, "body": "That is strange - what the function does is remove any refference to the last node,and free it.It is only 6 lines,i cant seemt ofigrue why that would happend"}, {"owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "reply_to_user": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483733801, "post_id": 41475333, "comment_id": 70233261, "body": "I replaced the code in your <code>initlist_pop_tail</code> with a version of the code in my <code>list_remove</code> and <code>list_print</code> displayed the correct values and the program ran to completion. You need to look more closely at the code in <code>initlist_pop_tail</code>."}, {"owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483735339, "post_id": 41475333, "comment_id": 70233995, "body": "i looked into your list_remove code - and replicated it,however,every seoncd or third time i run my code it gets stuck while printing the list,and i do not know why.Try running my code and you will see that the second time it runs(running with 10 10 10 100 as the arguments) - it wil lget stuck"}, {"owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "reply_to_user": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483736804, "post_id": 41475333, "comment_id": 70234741, "body": "You need to initialize <code>next</code> and <code>previous</code> to <code>NULL</code> in <code>initlist_push_head</code>. Also, I had to remove the <code>while</code> loop and the read signal code from <code>initlist_pop_tail</code>. But now I have a version of your program that runs to completion. You will have to add an explanation of how the signals are supposed to work in your original question. I do not understand the purpose of the read signal, and it appears to cause a deadlock."}, {"owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "edited": false, "score": 0, "creation_date": 1483773473, "post_id": 41475333, "comment_id": 70243748, "body": "The read signal is a requirment in the project - the reader should wait until the list contains more than 1 value using a condition variable.It does cause a deadlock -  i cant seem to figure out why and when"}], "tags": [], "owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "is_accepted": false, "score": 0, "last_activity_date": 1483633347, "last_edit_date": 1483633347, "creation_date": 1483575147, "answer_id": 41475333, "question_id": 41471790, "link": "https://stackoverflow.com/questions/41471790/double-linked-list-memory-corruption/41475333#41475333", "title": "double linked list - memory corruption", "body": "<p>I ran your code in a debugger and there is an attempt to free the same pointer twice in this code from <code>initlist_destroy</code>:</p>\n\n<pre><code>if (0 != target_list-&gt;length) {\n    current_node = target_list-&gt;head;\n    while (current_node != NULL) {\n        temp_node = current_node-&gt;next;\n        // Added the following line to view pointer values\n        printf(\"Freeing %p...\\n\", current_node);\n        free(current_node);\n        current_node = temp_node;\n    }\n}\n</code></pre>\n\n<p>When I print out the pointer values, I get output like this:</p>\n\n<pre><code>GC \u2013 5 items removed from the list\nList size: 4\nFreeing 0x7fc1a1602d20...\nFreeing 0x7fc1a15045e0...\nFreeing 0x7fc1a3569c40...\nFreeing 0x7fc1a3569c40...\n</code></pre>\n\n<p>As you can see, you attempt to free the same pointer twice. You have a defect in your list handling code. This is not surprising. Linked list code is hard to write.</p>\n\n<p>My recommendation is to write a single-threaded program that</p>\n\n<ol>\n<li>Creates a linked list</li>\n<li>Adds a small number of items to the list (e.g. 3)</li>\n<li>Removes each item from the list</li>\n<li>Verifies the list is empty</li>\n</ol>\n\n<p>I would write a function that prints the list pointers in an easy to read way (e.g. a table of hex values). Call that function after each modification to the list. It should be easy to see what you are doing wrong.</p>\n\n<p><strong>Update</strong></p>\n\n<p>I wrote a program that implements the suggestions above:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;inttypes.h&gt;\n\n#define PTR_FMT \"0x%016\" PRIXPTR\n\nvoid perror_location(const char *file, int line_number) {\n    char location[80];\n    snprintf(location, sizeof(location), \"%s:%d\", file, line_number);\n    perror(location);\n    exit(errno);\n}\n\n#define PERROR() perror_location(__FILE__, __LINE__)\n\nvoid *malloc_safe(size_t size) {\n    void *result = malloc(size);\n    if (NULL == result) {\n        PERROR();\n    }\n    return result;\n}\n\n#define MALLOC(type) \\\n    (type *) malloc_safe(sizeof(type))\n\nvoid lock(pthread_mutex_t *mutex) {\n    if (0 != pthread_mutex_lock(mutex)) {\n        PERROR();\n    }\n}\n\nvoid unlock(pthread_mutex_t *mutex) {\n    if (0 != pthread_mutex_unlock(mutex)) {\n        PERROR();\n    }\n}\n\ntypedef struct _node {\n    int value;\n    struct _node *next;\n    struct _node *prev;\n} node;\n\ntypedef struct _list {\n    node *head;\n    node *tail;\n    size_t length;\n    pthread_mutex_t mutex;\n} list;\n\nlist *list_init(void) {\n    list *result = MALLOC(list);\n    result-&gt;head = NULL;\n    result-&gt;tail = NULL;\n    result-&gt;length = 0;\n    if (0 != pthread_mutex_init(&amp;result-&gt;mutex, NULL)) {\n        PERROR();\n    }\n    return result;\n}\n\nnode *list_add(list *list_ptr, int value) {\n    node *result = MALLOC(node);\n    result-&gt;value = value;\n    result-&gt;next = NULL;\n    result-&gt;prev = NULL;\n    lock(&amp;list_ptr-&gt;mutex);\n    if (list_ptr-&gt;head == NULL) {\n        list_ptr-&gt;head = result;\n        list_ptr-&gt;tail = result;\n    }\n    else {\n        result-&gt;prev = list_ptr-&gt;tail;\n        list_ptr-&gt;tail-&gt;next = result;\n        list_ptr-&gt;tail = result;\n    }\n    list_ptr-&gt;length++;\n    unlock(&amp;list_ptr-&gt;mutex);\n    return result;\n}\n\nnode *list_remove(list *list_ptr) {\n    node *result = NULL;\n    lock(&amp;list_ptr-&gt;mutex);\n    if (list_ptr-&gt;head != NULL) {\n        result = list_ptr-&gt;tail;\n        list_ptr-&gt;tail = result-&gt;prev;\n        if (result-&gt;prev != NULL) {\n            result-&gt;prev-&gt;next = NULL;\n        }\n        else {\n            list_ptr-&gt;head = NULL;\n        }\n        list_ptr-&gt;length--;\n    }\n    unlock(&amp;list_ptr-&gt;mutex);\n    if (result != NULL) {\n        result-&gt;next = NULL;\n        result-&gt;prev = NULL;\n    }\n    return result;\n}\n\nvoid list_print(list *list_ptr) {\n    lock(&amp;list_ptr-&gt;mutex);\n    printf(\"----------\\n\");\n    printf(\"length = %ld\\n\", list_ptr-&gt;length);\n    printf(\"%-18s %-18s %-18s\\n\", \"list\", \"list-&gt;head\", \"list-&gt;tail\");\n    printf(PTR_FMT \" \" PTR_FMT \" \" PTR_FMT \"\\n\",\n           (uintptr_t) list_ptr,\n           (uintptr_t) list_ptr-&gt;head,\n           (uintptr_t) list_ptr-&gt;tail);\n    if (list_ptr-&gt;head != NULL) {\n        printf(\"%-18s %-18s %-18s\\n\", \"node\", \"node-&gt;next\", \"node-&gt;prev\");\n        node *current = list_ptr-&gt;head;\n        do {\n            printf(PTR_FMT \" \" PTR_FMT \" \" PTR_FMT \"\\n\",\n                   (uintptr_t) current,\n                   (uintptr_t) current-&gt;next,\n                   (uintptr_t) current-&gt;prev);\n            current = current-&gt;next;\n        } while (current != NULL);\n    }\n    unlock(&amp;list_ptr-&gt;mutex);\n}\n\nint main(void) {\n    list *linked_list = list_init();\n\n    printf(\"Add items...\\n\");\n    for (int value = 1; value &lt;= 3; value++) {\n        list_add(linked_list, value);\n        list_print(linked_list);\n    }\n\n    printf(\"Remove items...\\n\");\n    while (1) {\n        node *result = list_remove(linked_list);\n        if (NULL == result) {\n            break;\n        }\n        free(result);\n        list_print(linked_list);\n    }\n\n    if ((linked_list-&gt;head != NULL) || (linked_list-&gt;tail != NULL)) {\n        printf(\"ERROR: List is not empty\\n\");\n        return EFAULT;\n    }\n\n    free(linked_list);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Add items...\n----------\nlength = 1\nlist               list-&gt;head         list-&gt;tail        \n0x00007F8180C031B0 0x00007F8180C03210 0x00007F8180C03210\nnode               node-&gt;next         node-&gt;prev        \n0x00007F8180C03210 0x0000000000000000 0x0000000000000000\n----------\nlength = 2\nlist               list-&gt;head         list-&gt;tail        \n0x00007F8180C031B0 0x00007F8180C03210 0x00007F8180C03230\nnode               node-&gt;next         node-&gt;prev        \n0x00007F8180C03210 0x00007F8180C03230 0x0000000000000000\n0x00007F8180C03230 0x0000000000000000 0x00007F8180C03210\n----------\nlength = 3\nlist               list-&gt;head         list-&gt;tail        \n0x00007F8180C031B0 0x00007F8180C03210 0x00007F8180C03250\nnode               node-&gt;next         node-&gt;prev        \n0x00007F8180C03210 0x00007F8180C03230 0x0000000000000000\n0x00007F8180C03230 0x00007F8180C03250 0x00007F8180C03210\n0x00007F8180C03250 0x0000000000000000 0x00007F8180C03230\nRemove items...\n----------\nlength = 2\nlist               list-&gt;head         list-&gt;tail        \n0x00007F8180C031B0 0x00007F8180C03210 0x00007F8180C03230\nnode               node-&gt;next         node-&gt;prev        \n0x00007F8180C03210 0x00007F8180C03230 0x0000000000000000\n0x00007F8180C03230 0x0000000000000000 0x00007F8180C03210\n----------\nlength = 1\nlist               list-&gt;head         list-&gt;tail        \n0x00007F8180C031B0 0x00007F8180C03210 0x00007F8180C03210\nnode               node-&gt;next         node-&gt;prev        \n0x00007F8180C03210 0x0000000000000000 0x0000000000000000\n----------\nlength = 0\nlist               list-&gt;head         list-&gt;tail        \n0x00007F8180C031B0 0x0000000000000000 0x0000000000000000\n</code></pre>\n\n<p>I used a debugger to fix my own list handling. I recommend using one to fix yours.</p>\n"}], "owner": {"reputation": 11, "user_id": 7375917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4949a920dcee51bb872cbdb17e9f143?s=128&d=identicon&r=PG&f=1", "display_name": "lippy1234", "link": "https://stackoverflow.com/users/7375917/lippy1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 384, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1483735652, "creation_date": 1483558074, "last_edit_date": 1483567243, "question_id": 41471790, "link": "https://stackoverflow.com/questions/41471790/double-linked-list-memory-corruption", "title": "double linked list - memory corruption", "body": "<p>I am trying to implement a double linked list in 2 parts:\nthe first is the actual functions for creating the list;\nthe second is a simulator - containing a few threads, readers and writers (each popping and pushing into the double linked list in a while loop), and a garbage collector thread that cleans the list if it gets too large (according to argv).\nThe list uses a mutex and a conditional variable in order to make it thread safe.\nHowever - whenever I run it, I get a double free/memory corruption (fasttop) error and I don't know why. I'd appreciate some help.</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n\n#define USAGE_ERR \"Usage: ./hw3 &lt;WNUM&gt; &lt;RNUM&gt; &lt;MAX&gt; &lt;TIME&gt;\\n\"\n\n/* Argc parameter indexing consts */\n#define INPUT_WNUM_IDX 1\n#define INPUT_RNUM_IDX 2\n#define OUTPUT_MAX_IDX 3\n#define OUTPUT_TIME_IDX 4\n\ntypedef struct node {\n    int value;\n\n    struct node * previous;\n    struct node * next;\n}\nnode;\n\ntypedef struct {\n    int length;\n    node * head;\n    node * tail;\n    pthread_mutex_t mutex;\n}\nlist;\n\nlist * global_list;\nint stop_threads = 0;\nint MAX_LIST_SIZE;\npthread_cond_t      gc_cond  = PTHREAD_COND_INITIALIZER;\npthread_mutex_t     gc_mutex = PTHREAD_MUTEX_INITIALIZER;\n\npthread_cond_t      read_cond  = PTHREAD_COND_INITIALIZER;\npthread_mutex_t     read_mutex = PTHREAD_MUTEX_INITIALIZER;\n\nlist * initlist_create();\nvoid initlist_destroy(list * target_list);\nlist * initlist_push_head(list * target_list, int value);\nint initlist_pop_tail(list * target_list);\nvoid initlist_remove_last_k(list * target_list, int k);\nint initlist_size(list * target_list);\npthread_mutex_t initlist_get_mutex(list * target_list);\nvoid writer_thread();\nvoid reader_thread();\nvoid garbage_collect_thread();\n\n\nlist * initlist_create() {\n    size_t list_size = sizeof(list);\n    list * new_list = (list * ) malloc(list_size);\n    new_list-&gt;head = NULL;\n    new_list-&gt;tail = NULL;\n    new_list-&gt;length = 0;\n    if (0 != pthread_mutex_init( &amp; (new_list-&gt;mutex), NULL)) {\n        exit(errno);\n    }\n    return new_list;\n}\n\nvoid initlist_destroy(list * target_list) {\n    node * current_node;\n    node * temp_node;\n\n    if (0 != pthread_mutex_lock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n\n    if (0 != target_list-&gt;length) {\n        current_node = target_list-&gt;head;\n        while (current_node != NULL) {\n            temp_node = current_node-&gt;next;\n            free(current_node);\n            current_node = temp_node;\n        }\n    }\n\n    if (0 != pthread_mutex_unlock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n\n    if (0 != pthread_mutex_destroy( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n\n    free(target_list);\n}\n\nlist * initlist_push_head(list * target_list, int value) {\n    node * new_node;\n    size_t node_size = sizeof(node);\n\n\n    if (0 != pthread_mutex_lock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n\n    new_node = (node * ) malloc(node_size);\n    if(NULL == new_node)\n    {\n        printf(\"Malloc failed\\n\" );\n        exit(errno);\n    }\n    new_node-&gt;value = value;\n\n\n    if (NULL != target_list-&gt;head) {\n        new_node-&gt;next = target_list-&gt;head;\n        new_node-&gt;previous = target_list-&gt;tail;\n        target_list-&gt;head-&gt;previous = new_node;\n        target_list-&gt;tail-&gt;previous = new_node;\n    }\n    else{\n        target_list-&gt;tail = new_node;\n    }\n\n    target_list-&gt;head = new_node;\n    target_list-&gt;length++;\n    if(0 &lt; target_list-&gt;length){\n        pthread_cond_signal(&amp;read_cond); \n    }\n    if (0 != pthread_mutex_unlock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n    return target_list;\n}\n\nint initlist_pop_tail(list * target_list) {\n    int deleted_node_value;\n\n    if (0 != pthread_mutex_lock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n    while(0 == target_list-&gt;length){\n        pthread_cond_wait(&amp;read_cond, &amp;target_list-&gt;mutex);\n    }\n    node * last_node = target_list-&gt;tail;\n\n\n    if (1 == target_list-&gt;length) {\n        last_node = target_list-&gt;head;\n        target_list-&gt;head =  NULL;\n        target_list-&gt;tail = NULL;\n    } else {\n        target_list-&gt;tail = last_node-&gt;previous;\n        target_list-&gt;tail-&gt;next = target_list-&gt;head;\n    }\n    deleted_node_value = last_node-&gt;value;\n\n\n    // IMPORTANT\n    // If i uncomment this, segfault and memory corruption,no idea why\n    //free(last_node);\n\n    target_list-&gt;length--;\n    if (0 != pthread_mutex_unlock( &amp; ( target_list-&gt;mutex) )) {\n        exit(errno);\n    }\n    // if (0 != pthread_mutex_unlock( &amp; (read_mutex))) {\n    //  exit(errno);\n    // }\n\n    return deleted_node_value;\n}\n\nvoid initlist_remove_last_k(list * target_list, int k) {\n    int remove_size = k;\n    if (0 != pthread_mutex_lock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n    if (k &gt; target_list-&gt;length)\n    {\n        remove_size = target_list-&gt;length;\n    }\n    if (0 != pthread_mutex_unlock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n    for (int i = 0; i &lt; remove_size; ++i) {\n        initlist_pop_tail(target_list);\n    }\n}\n\nint initlist_size(list * target_list) {\n    int list_size;\n\n    if (0 != pthread_mutex_lock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n\n    list_size = target_list-&gt;length;\n\n    if (0 != pthread_mutex_unlock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n\n    return list_size;\n}\n\npthread_mutex_t initlist_get_mutex(list * target_list) {\n    pthread_mutex_t list_mutex;\n\n    if (0 != pthread_mutex_lock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n\n    list_mutex = target_list-&gt;mutex;\n\n    if (0 != pthread_mutex_unlock( &amp; (target_list-&gt;mutex))) {\n        exit(errno);\n    }\n\n    return list_mutex;\n\n}\n\nvoid writer_thread()\n{\n    while (1)\n    {\n        if(stop_threads){\n            return;\n        }   \n        if (MAX_LIST_SIZE &lt; initlist_size(global_list))\n        {\n            pthread_cond_signal(&amp;gc_cond);\n        }\n        initlist_push_head(global_list, rand());\n\n    }\n}\n\n\nvoid reader_thread()\n{\n    while (1)\n    {\n        if(stop_threads){\n            return;\n        }   \n        if (MAX_LIST_SIZE &lt; initlist_size(global_list))\n        {\n            pthread_cond_signal(&amp;gc_cond);\n        }\n        initlist_pop_tail(global_list);\n\n    }\n}\n\nvoid garbage_collect_thread()\n{\n    while(1){\n        if(stop_threads){\n            return;\n        }\n        pthread_cond_wait(&amp;gc_cond, &amp;gc_mutex);\n        int remove_count = (initlist_size(global_list) / 2);\n        initlist_remove_last_k(global_list, remove_count);\n        printf(\"GC \u2013 %d items removed from the list\\r\\n\", remove_count);\n        if (0 != pthread_mutex_unlock( &amp; (gc_mutex))) {\n            exit(errno);\n        }\n    }\n}\n\n\n\n\nint main(int argc, char * * argv) {\n    /* Validate arguments */\n    if (5 != argc) {\n        printf(USAGE_ERR);\n        exit(errno);\n    }\n\n    int writers_count        = atoi(argv[INPUT_WNUM_IDX]);\n    int readers_count        = atoi(argv[INPUT_RNUM_IDX]);\n    int max_run_time         = atoi(argv[OUTPUT_TIME_IDX]);\n    MAX_LIST_SIZE            = atoi(argv[OUTPUT_MAX_IDX]);\n    global_list = initlist_create();\n\n\n    pthread_t garbage_collector_thread;\n\n    pthread_t writer_threads[writers_count];\n    pthread_t reader_threads[readers_count];\n\n    if (0 != pthread_create(&amp;garbage_collector_thread, NULL, garbage_collect_thread, NULL))\n\n        {       exit(errno);\n        }\n\n        for (int i = 0; i &lt; writers_count; ++i)\n        {\n            if (0 != pthread_create(&amp;writer_threads[i], NULL, writer_thread, NULL))\n            {\n                exit(errno);\n            }\n        }\n\n\n        for (int x = 0; x &lt; readers_count; ++x)\n        {\n            if (0 != pthread_create(&amp;reader_threads[x], NULL, reader_thread, NULL))\n            {\n                exit(errno);\n            }\n        }\n\n        sleep(max_run_time);\n        //IMPORTANT\n        //threads should die after this is set,but all threads wait for the mutex to free\n        //in gcc - see \"info threads\" command in gdb\n\n        stop_threads = 1;\n        int list_size = initlist_size(global_list); \n        printf(\"List size: %d\", list_size);\n\n        for (int i = 0; i &lt; list_size; ++i)\n        {\n            continue;\n            printf(\"num is %d\", initlist_pop_tail(global_list));\n        }\n\n        //this gets stuck also when waiting for mutex obviously...\n        initlist_destroy(global_list);\n\n\n    }\n</code></pre>\n"}, {"tags": ["c", "operating-system", "parent-child", "child-process"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1483559432, "post_id": 41471682, "comment_id": 70149962, "body": "You cannot run a process in the zombie state.  A process cannot become a zombie without first dying."}, {"owner": {"reputation": 5883, "user_id": 5411888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vLbdS.jpg?s=128&g=1", "display_name": "Amit Upadhyay", "link": "https://stackoverflow.com/users/5411888/amit-upadhyay"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1483559714, "post_id": 41471682, "comment_id": 70150107, "body": "@JohnBollinger :  Yes, it&#39;s true..."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1483559845, "post_id": 41471682, "comment_id": 70150176, "body": "After you get that shell prompt amid the output, <code>Bye [aupadhyay@localhost practice]$ enter value of a</code>, where do you want the next input that you type to go - to the child or to the shell?"}, {"owner": {"reputation": 5883, "user_id": 5411888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vLbdS.jpg?s=128&g=1", "display_name": "Amit Upadhyay", "link": "https://stackoverflow.com/users/5411888/amit-upadhyay"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1483559925, "post_id": 41471682, "comment_id": 70150206, "body": "@MarkPlotnick : To the child.."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "edited": false, "score": 0, "creation_date": 1483569759, "post_id": 41473123, "comment_id": 70154849, "body": "I appreciate your edit, @Gilles, but I&#39;m still not seeing where POSIX specifies the observed behavior.  While writing this answer, I spent some time reading the very section you reference, and related ones, and nowhere did I find anything saying that a process&#39;s open file description referencing its controlling terminal is closed when that terminal ceases to be its controlling one.  Can you clarify?"}, {"owner": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "edited": false, "score": 0, "creation_date": 1483570027, "post_id": 41473123, "comment_id": 70154953, "body": "The file description referencing the controlling terminal is not closed, and the process will be able to read again if it goes back to the foreground. The <code>read</code> system call fails with EIO, the file descriptor is still valid. \u201cAny attempts by a process in a background process group to read from its controlling terminal \u2026 if the process group of the reading process is orphaned, the read() shall return -1, with errno set to EIO\u201d."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "edited": false, "score": 0, "creation_date": 1483573638, "post_id": 41473123, "comment_id": 70156280, "body": "Ah, but @Gilles, by the time the child tries to read, it has been moved to a different session (that of its new parent, PID 1), and therefore the terminal in question cannot any longer its <i>controlling</i> terminal.  The provisions you quote apply only to controlling terminals.  Furthermore, there is no way for the child to return to its original session, and therefore no way for it ever again to belong to the foreground process group of that session."}, {"owner": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "edited": false, "score": 0, "creation_date": 1483574092, "post_id": 41473123, "comment_id": 70156414, "body": "Uh, why would the child be in a different session? The dissociation of the controlling terminal from the session would only happen if <code>parent</code> was launched in its own terminal, not in the scenario you assume where <code>parent</code> is launched by a shell."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1483588588, "last_edit_date": 1483588588, "creation_date": 1483563548, "answer_id": 41473123, "question_id": 41471682, "link": "https://stackoverflow.com/questions/41471682/child-process-created-using-execl-is-not-accepting-any-input/41473123#41473123", "title": "child process created using execl is not accepting any input", "body": "<p><strong><em>Note: answer significantly overhauled in light of edits and comments by @Gilles.</em></strong></p>\n\n<p>Although I can duplicate the behavior you describe, I can also feed input to the child via I/O redirection:</p>\n\n<pre><code>./parent &lt;&lt;EOF\n\n\n12345\nEOF\n</code></pre>\n\n<p>... resulting in:</p>\n\n<blockquote>\n  <p>I m parent with pid 4430 and ppid 2515 </p>\n  \n  <p>Bye</p>\n  \n  <p>$</p>\n  \n  <p>enter value of a </p>\n  \n  <p>I m child with pid 4431 and ppid 1 </p>\n  \n  <p>Message from parent is hello </p>\n  \n  <p>The value of a is 12345 </p>\n</blockquote>\n\n<p>Note that the data redirected into the parent's standard input are successfully read and echoed by the child, so the problem is not that the child cannot accept input.  That under some conditions it <em>does not</em> either wait for or successfully read input, but instead continues past the read attempts, can only be explained by the <code>scanf()</code> calls failing under those conditions.</p>\n\n<p>The most plausible explanation for such failures is that the process group has been moved to the background by the time the reads are attempted.  Ordinarily, a background process that attempts to read from its controlling terminal will cause its whole process group to stop (not terminate).  In your case, however, the process group is <em>orphaned</em>: no process in the group has a parent inside the session but outside the group.  In this and a few other special cases, a background process's <code>read()</code>s from its controlling terminal, such as those underlying your <code>scanf()</code> calls, <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap11.html#tag_11_01_04\" rel=\"nofollow noreferrer\">are required to fail, setting <code>errno</code> to <code>EIO</code></a>.</p>\n\n<p>In that event, <code>scanf</code> in turn returns <code>EOF</code> to indicate an error, leaving <code>errno</code> set to <code>EIO</code>.  Test the return value of <code>scanf</code> and call <code>perror</code> to observe this.  The read failures are a sensible behavior, as they facilitate the processes in the orphaned group running to completion and terminating, instead of hanging, or the OS summarily killing them.  POSIX's objective here seems to be to provide graceful handling for process groups that are orphaned by termination of a parent that is a job-control shell, leaving no process with the expectation of or responsibility to restart the process group.</p>\n\n<p>Yours is not the case that POSIX seems intent to cater to, but the specifications also support the observed behavior: the shell shifting the foreground process group into the background when its leader dies, yet (it seems) not putting it under job control as a background <em>job</em>.  As far as I can determine, POSIX does not mandate that the shell exhibit such behavior, but neither does it require otherwise.  The result is an orphaned process group in similar circumstances to those conceived by POSIX, and equally well served by the special provisions for orphaned process groups.</p>\n\n<p>If you want the child to retain full access to the parent's controlling terminal then you should ensure that the parent does not terminate before the child does.  If the parent has nothing else to do in the meantime, the appropriate way to ensure that the child terminates first is for the parent to <code>wait()</code> or <code>waitpid()</code> for it:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n\nint main()\n{\n    int p, pp;\n    p = getpid();\n    pp = getppid();\n    printf(\"\\nI m parent with pid %d and ppid %d \\n\", p, pp);\n    int b = fork();\n    if (b == 0)\n    {\n        execl(\"./child\", \"child\", \"hello\", 0);\n    }\n    else\n    {\n        printf(\"\\nBye\\n\");\n        wait(NULL);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 5883, "user_id": 5411888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vLbdS.jpg?s=128&g=1", "display_name": "Amit Upadhyay", "link": "https://stackoverflow.com/users/5411888/amit-upadhyay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 41473123, "answer_count": 1, "score": 2, "last_activity_date": 1483588588, "creation_date": 1483557622, "question_id": 41471682, "link": "https://stackoverflow.com/questions/41471682/child-process-created-using-execl-is-not-accepting-any-input", "title": "child process created using execl is not accepting any input", "body": "<p>I wrote a program which is first replicating the current process (using <code>fork()</code>) and then I m creating a child process using <code>execl()</code>.</p>\n\n<p>Now the problem is that the child process is unable to accept any input.</p>\n\n<p>The <code>child.c</code> program :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;unistd.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int p, pp;\n    int a;\n    char dummy;\n    printf(\"\\n enter value of a \\n\");\n    //fflush(0); // was using to clean STDIN, STDOUT\n    //fflush(1);\n    scanf(\"%c\",&amp;dummy); // simply using to accept any new line character if present any.\n    scanf(\"%c\",&amp;dummy); // simply using to accept any new line character if present any.\n    scanf(\"%d\",&amp;a);\n    p = getpid();\n    pp = getppid();\n    printf(\"\\nI m child with pid %d and ppid %d \\n\", p, pp);\n    char *msg = argv[1];\n    printf(\"\\n Message from parent is %s \\n\",msg);\n    printf(\"\\n The value of a is %d \",a);\n    return 0;\n}\n</code></pre>\n\n<p>I m compiling my child.c with the command: <code>gcc child.c -o child</code> to generate the object file with name <code>child</code> which I m using in my <code>parent.c</code> file</p>\n\n<p>My <code>parent.c</code> program :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;unistd.h&gt;\n\nint main()\n{\n    int p, pp;\n    p = getpid();\n    pp = getppid();\n    printf(\"\\nI m parent with pid %d and ppid %d \\n\", p, pp);\n    int b = fork();\n    if (b == 0)\n    {\n        sleep(1);// for orphan state\n        execl(\"./child\", \"child\", \"hello\", 0);\n    }\n    else\n    {\n        printf(\"\\nBye\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I have tried running the program in both the orphan state and zombie state but in both the cases, the input is not getting accepted in the child process.</p>\n\n<p>When I run this ./a.out of parent program the I get the following output:</p>\n\n<blockquote>\n  <p>I m parent with pid 6801 and ppid 4136 </p>\n  \n  <p>Bye [aupadhyay@localhost practice]$   enter value of a </p>\n  \n  <p>I m child with pid 6802 and ppid 1 </p>\n  \n  <p>Message from parent is hello </p>\n  \n  <p>The value of a is 0</p>\n</blockquote>\n\n<p>The console is not accepting any input rather it is printing the default value of a.</p>\n\n<p>Any information/help on how to get input in child process will be appreciated.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11, "user_id": 7322894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/952f82789455403873bfb6d68165cbef?s=128&d=identicon&r=PG&f=1", "display_name": "gaston_n", "link": "https://stackoverflow.com/users/7322894/gaston-n"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1483557749, "post_id": 41471634, "comment_id": 70149129, "body": "i&#39;m trying to take each line and applicate other function on it &#39;separately&#39; not displaying the whole content of the text file on console ."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1483558116, "post_id": 41471634, "comment_id": 70149324, "body": "Use malloc or realloc."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1483558933, "post_id": 41471634, "comment_id": 70149731, "body": "Use an array of <code>char*</code> pointers. Read each line into an array, use <code>malloc()</code> to allocate a string to hold the contents, copy the string, and put the pointer in the array."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1483559395, "post_id": 41471634, "comment_id": 70149945, "body": "Your own attempt ought to work (for lines less than 999 characters), but change the test to check the return result of <code>fgets</code> itself."}], "answers": [{"comments": [{"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 2, "creation_date": 1483559544, "post_id": 41471999, "comment_id": 70150016, "body": "You should include a note about how <a href=\"http://stackoverflow.com/q/16323185/2615940\">a null character in the input stream can lead to unexpected results</a> when using fgets()."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 0, "creation_date": 1483619605, "post_id": 41471999, "comment_id": 70175197, "body": "@skrrgwasme: you should note that <code>fgets</code> is to be used on text files, and &quot;null bytes do not belong in <b>text</b> files. fgets() was designed to work with text files: using fgets() with files of binary data is not recommended. \u2013 pmg&quot; (from a <a href=\"http://stackoverflow.com/questions/16323185/why-is-the-fgets-function-deprecated#comment23375681_16323215\">comment</a> in there)."}], "tags": [], "owner": {"reputation": 19, "user_id": 7221156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FiQQI.jpg?s=128&g=1", "display_name": "Meuledor", "link": "https://stackoverflow.com/users/7221156/meuledor"}, "is_accepted": false, "score": 1, "last_activity_date": 1483558906, "creation_date": 1483558906, "answer_id": 41471999, "question_id": 41471634, "link": "https://stackoverflow.com/questions/41471634/how-can-i-get-every-line-of-a-text-file-separately-using-c/41471999#41471999", "title": "How can i get every line of a text file separately using C", "body": "<p>If you want to use fgets(), you can try something like that:</p>\n\n<pre><code>char ch[999];   \nFILE * f;\nf = fopen( \"test.txt\" , \"r\");\nif (f) \n{\n    while(fgets(ch, sizeof(ch), f) != NULL)\n    {\n        printf(\"%s\", ch);\n    }\n    fclose(f);\n}\n</code></pre>\n\n<p>Then you can use the variable ch as you want.</p>\n"}], "owner": {"reputation": 11, "user_id": 7322894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/952f82789455403873bfb6d68165cbef?s=128&d=identicon&r=PG&f=1", "display_name": "gaston_n", "link": "https://stackoverflow.com/users/7322894/gaston-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 2, "closed_date": 1483613838, "answer_count": 1, "score": -2, "last_activity_date": 1483560692, "creation_date": 1483557475, "last_edit_date": 1483558832, "question_id": 41471634, "link": "https://stackoverflow.com/questions/41471634/how-can-i-get-every-line-of-a-text-file-separately-using-c", "closed_reason": "Duplicate", "title": "How can i get every line of a text file separately using C", "body": "<p>supposing i have a text file with this content :</p>\n\n<pre><code>this is the first line . \nthis is the second line . \nthis is the third line .\n</code></pre>\n\n<p>my point is to get every line in a separate string variable . </p>\n\n<p>i tried something like this </p>\n\n<pre><code>   do { fgets(ch,1000,f);printf(\"%s \\n\",ch); } while(strlen(ch)!=0); \n</code></pre>\n\n<p>whith \"f\" is a pointer to my file and ch my string variable . </p>\n"}, {"tags": ["c", "string", "strtok"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1483557490, "post_id": 41471571, "comment_id": 70148997, "body": "As a comment, it&#39;s worthwhile noting that <code>strtok</code> is obsoleted by <code>strsep</code> but if you are to use <code>strtok</code> its worthwhile using <code>strtok_r</code> as it&#39;s thread safe and re-entrant."}, {"owner": {"reputation": 845, "user_id": 1289198, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ed1ed50abd03457dd455c60a4e80d7c6?s=128&d=identicon&r=PG", "display_name": "yakoudbz", "link": "https://stackoverflow.com/users/1289198/yakoudbz"}, "edited": false, "score": 2, "creation_date": 1483557624, "post_id": 41471571, "comment_id": 70149077, "body": "my question is: why would you use a complicated function to delete a dot at the end ? could you elaborate on the possible complication in that task ?"}, {"owner": {"reputation": 29, "user_id": 7373810, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ddc58aaafc521f6e8e88da05dbdd3404?s=128&d=identicon&r=PG&f=1", "display_name": "5arg", "link": "https://stackoverflow.com/users/7373810/5arg"}, "edited": false, "score": 0, "creation_date": 1483557833, "post_id": 41471571, "comment_id": 70149174, "body": "It is an assignment which touches on subject of file handling, string manipulation and structures. We are expected to scan data from a file, manipulate it and then print it on a separate file.   I agree it is stupid, but we have to upload the code on the server which evalautes it and it has to be written in that format."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1483562285, "post_id": 41471571, "comment_id": 70151354, "body": "Just create a Function which goes through the whole buffer until end and for each delimiter found save it (its position) into a variable then move to next character found until (maybe) you get another delimiter. Save its position to that variable and return the function with that. Rest is easy to do it if you know the position of that delimiter."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1483571225, "last_edit_date": 1483571225, "creation_date": 1483557698, "answer_id": 41471707, "question_id": 41471571, "link": "https://stackoverflow.com/questions/41471571/saving-a-string-until-a-last-delimiter-is-found-c/41471707#41471707", "title": "Saving a string until a last delimiter is found - C", "body": "<p>If you have a single delimiter, use <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/strrchr.html\" rel=\"nofollow noreferrer\"><code>strrchr</code></a> to find its last occurrence in the string:</p>\n\n<pre><code>char str[] = \"quick.brown.fox\";\nchar *ptr = strrchr(str, '.');\nif (ptr) {\n    *ptr = '\\0';\n}\nprintf(\"%s\\n\"' str);\n</code></pre>\n\n<p>This <a href=\"http://ideone.com/uj8kJV\" rel=\"nofollow noreferrer\">produces the following output</a>:</p>\n\n<pre><code>quick.brown\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "is_accepted": false, "score": 0, "last_activity_date": 1483571182, "last_edit_date": 1483571182, "creation_date": 1483568629, "answer_id": 41474226, "question_id": 41471571, "link": "https://stackoverflow.com/questions/41471571/saving-a-string-until-a-last-delimiter-is-found-c/41474226#41474226", "title": "Saving a string until a last delimiter is found - C", "body": "<p>Like I explained in My comment (if you don't want to use <code>strrchr</code> or you cannot for some reasons)  I'll create a Function which checks the position of that delimiter like this:</p>\n\n<pre><code>int my_strrchr(const char *ptr, const char delimiter){\n    if (ptr == NULL ){\n        printf(\"Error, NULL Pointer\\n\");\n        return -1;\n    }\n\n    if ( *ptr == '\\0' ){\n        printf(\"Error, the Buffer is Empty\\n\");\n        return 0;\n    }\n\n    int i = 0;\n    int ret = 0;\n\n    while( ptr[i] != '\\0' ){\n        if ( ptr[i] == delimiter ){\n            ret = i;\n        }\n        i++;\n    }\n\n    return ret;\n}\n</code></pre>\n\n<p>And use it Like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void){\n    char arr[] = \"4.1.2017.\";\n    char delimiter = '.';\n\n    int len;\n\n    if( (len = my_strrchr(arr, delimiter)) &gt; 0){\n        while ( arr[len] != '\\0'){\n            arr[len] = '\\0';\n        }\n        printf(\"%s\\n\", arr);\n    }\n}\n</code></pre>\n\n<p>See <a href=\"http://ideone.com/qDTuEj\" rel=\"nofollow noreferrer\">DEMO</a>.\nAny way this is only to get you an Idea and as you can see I use no standard Functions here.</p>\n"}], "owner": {"reputation": 29, "user_id": 7373810, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ddc58aaafc521f6e8e88da05dbdd3404?s=128&d=identicon&r=PG&f=1", "display_name": "5arg", "link": "https://stackoverflow.com/users/7373810/5arg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 587, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1483571225, "creation_date": 1483557218, "question_id": 41471571, "link": "https://stackoverflow.com/questions/41471571/saving-a-string-until-a-last-delimiter-is-found-c", "title": "Saving a string until a last delimiter is found - C", "body": "<p>Is it possible to use strtok or some other string function to cut the string until the point where last delimiter is found.</p>\n\n<p>Specific example would be date; I would like to transform \"4.1.2017.\" to \"4.1.2017\" - without the dot at the end.</p>\n"}, {"tags": ["c", "linux", "memory", "operating-system", "kernel"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1483556528, "post_id": 41471315, "comment_id": 70148411, "body": "This is a very low-level hardware-specific (memory controller) subject. VTC as too broad."}, {"owner": {"reputation": 819, "user_id": 6595116, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IYAms.jpg?s=128&g=1", "display_name": "TimeToCode", "link": "https://stackoverflow.com/users/6595116/timetocode"}, "edited": false, "score": 0, "creation_date": 1483557139, "post_id": 41471315, "comment_id": 70148793, "body": "You need to use Assembly."}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 1, "creation_date": 1483566147, "post_id": 41471315, "comment_id": 70153215, "body": "Seems the linux kernel may already support what you&#39;re talking about. <a href=\"https://lwn.net/Articles/565371/\" rel=\"nofollow noreferrer\">lwn.net/Articles/565371</a>"}, {"owner": {"reputation": 9, "user_id": 7375775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0913df8ab811a6b838074d14faf55e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Michel Roger", "link": "https://stackoverflow.com/users/7375775/michel-roger"}, "edited": false, "score": 0, "creation_date": 1483660820, "post_id": 41471315, "comment_id": 70199746, "body": "The solution presented is not exactly what I was looking for due to it is relaying on the memory controller to set different power states after a certain threshold is met. Therefore, we don&#39;t have control about the power stats of the memory, just how the memory allocation is done which in theory is going to free some DIMs which as a result is going to met the threshold set by the controller. Any how, we can not manually set the memory states when is need it by the OS."}], "owner": {"reputation": 9, "user_id": 7375775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0913df8ab811a6b838074d14faf55e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Michel Roger", "link": "https://stackoverflow.com/users/7375775/michel-roger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483567449, "creation_date": 1483556253, "last_edit_date": 1483567449, "question_id": 41471315, "link": "https://stackoverflow.com/questions/41471315/how-to-switch-main-memory-power-states", "title": "How to switch main memory power states", "body": "<p>I am working a project that require to switch memory power states by software. Example, when a RAM DIM is not in use, I need to be able to set it for stand-by power. </p>\n\n<p>I know that memory system has these many states: idle, stand-by, self-refresh, precharge, active, read, and write. From those states, I need to be able by the OS to dynamically switch from one to the other. I would prefer to work on the linux OS. </p>\n\n<p>Does any one has an idea how to manipulate those states from the operating system?</p>\n"}, {"tags": ["c", "cmake", "mingw", "curses", "pdcurses"], "comments": [{"owner": {"reputation": 157, "user_id": 568041, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/14409100d4e33e0a2c3a447cc95c3958?s=128&d=identicon&r=PG", "display_name": "makos", "link": "https://stackoverflow.com/users/568041/makos"}, "edited": false, "score": 0, "creation_date": 1536826874, "post_id": 41471294, "comment_id": 91566036, "body": "Try MinGW-w64, also I think CMake looks for libncurses.a so it won&#39;t find pdcurses unless you rename the file."}], "owner": {"reputation": 1094, "user_id": 5259805, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/448bac0393b643e9a7e2f36cb3995ed0?s=128&d=identicon&r=PG&f=1", "display_name": "zale", "link": "https://stackoverflow.com/users/5259805/zale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 460, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1536577669, "creation_date": 1483556175, "last_edit_date": 1483570923, "question_id": 41471294, "link": "https://stackoverflow.com/questions/41471294/cmake-cant-find-pdcurses-on-mingw", "title": "CMake can&#39;t find PDCurses on MinGW", "body": "<p>I'm trying to build a curses program that uses CMake on Windows with MinGW and PDCurses. I'm using CMake 3.7.1, and all my MinGW packages are up-to-date. Specifically, i have <code>mingw32-libpdcurses</code> 3.4-1 (both <code>dev</code> and <code>dll</code>) and <code>mingw32-pdcurses</code> 3.4-1 (<code>bin</code>, <code>doc</code> and <code>lic</code>) installed.</p>\n\n<p>My full CMakeLists.txt is below, but using <code>find_package(Curses REQUIRED)</code> gives an error: <code>Could NOT find Curses (missing: CURSES_LIBRARY)</code>. <a href=\"https://stackoverflow.com/questions/35159634/how-to-link-curses-h-in-cmake\">This other question</a> deals with a similar situation; the answer's author says he hasn't tested PDCurses on MinGW, but that it should work.</p>\n\n<p>(I had the same results using CMake 3.6.3, which is bundled with CLion).</p>\n\n<p>My CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.3)\nproject(PROJECT_NAME)\n\nif(WIN32)\n    set(PATH \"C:\\\\MinGW\")\nendif()\n\nfind_package(Curses REQUIRED)\ninclude_directories(${CURSES_INCLUDE_DIR})\n\nset(CMAKE_C_FLAGS \"${CMAKE_C_FLAGS} -std=c99 -g -Wall\")\n\nset(SOURCE_FILES src/init.c etc...)\n\nadd_executable(project_name ${SOURCE_FILES})\ntarget_link_libraries(project_name ${CURSES_LIBRARIES} m)\n</code></pre>\n\n<p>Am I doing something wrong? Are there any workarounds?</p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["c", "arrays", "string", "parsing"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1483554875, "post_id": 41470864, "comment_id": 70147549, "body": "<code>char foldersName[count][255];char str[strlen(path)];</code> --&gt; <code>char foldersName[count+1][255];char str[length+1];</code>"}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1483555832, "last_edit_date": 1483555832, "creation_date": 1483554923, "answer_id": 41470938, "question_id": 41470864, "link": "https://stackoverflow.com/questions/41470864/how-to-parse-an-array-in-c/41470938#41470938", "title": "How to parse an array in C", "body": "<p><code>str</code> doesn't have space for the null byte.</p>\n\n<p>Change </p>\n\n<pre><code>   char str[strlen(path)];\n</code></pre>\n\n<p>to</p>\n\n<pre><code>   char str[strlen(path)+1];\n</code></pre>\n\n<p>Similarly <code>char foldersName[count][255];</code> needs change in size too: <code>char foldersName[count+1][255];</code>. With the way, you count <code>/</code>, you could endup with a <code>count</code> value that's far bigger than the necessary. For example, a path could end with a trailing <code>/</code> (<code>/usr/bin/</code>), there can be multiple consecutive <code>/</code> in a path (<code>/usr//bin//lib//</code>) etc. The same could pose a problem when you tokenize the string on <code>/</code>.</p>\n\n<p><code>strtok()</code> returns a null byte terminated string. So, you don't need to do: <code>strcat(foldersName[count],\"\\0\");</code>.</p>\n\n<p>Your program contains several other minor issues/limitations too:</p>\n\n<ul>\n<li>use <code>size_t</code> for storing the return value of <code>strlen()</code>.  </li>\n<li>Be aware that <code>strtok()</code> modifies its input (that's why you had to make a <em>copy</em> of <code>path</code>).  </li>\n<li><code>foldersName[count][255];</code> allocates a <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">variable length array</a> (VLA). If <code>path</code> is very long (contains too many <code>/</code>) then the allocation could fail which can't be easily detected.  </li>\n<li>If any of the path components are longer then 255 you'll have <a href=\"https://en.wikipedia.org/wiki/Buffer_overflow\" rel=\"nofollow noreferrer\">buffer overflow</a>.</li>\n</ul>\n"}], "owner": {"reputation": 45, "user_id": 7371658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b15a5b3060decdd974b823ec3590afc?s=128&d=identicon&r=PG&f=1", "display_name": "Michal Fiala", "link": "https://stackoverflow.com/users/7371658/michal-fiala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2833, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483555832, "creation_date": 1483554633, "last_edit_date": 1483555592, "question_id": 41470864, "link": "https://stackoverflow.com/questions/41470864/how-to-parse-an-array-in-c", "title": "How to parse an array in C", "body": "<p>I wanted to parse an input string (path) into the array.</p>\n\n<p>For example, if the input is </p>\n\n<blockquote>\n  <p>cd(\"C/Hra/Halo 4/Hra\");</p>\n</blockquote>\n\n<p>The array should contains <code>{\"C\",\"Hra\",\"Halo 4\",\"Hra\"}</code>, but it contains <code>{\"C\",\"Hra\",\"Halo 4,\"HraC\"}</code>.\nMy friend suggested me to put <code>\"\\0\"</code> for each string, but it doesn't work. </p>\n\n<p>Can someone please suggest me how to repair it? </p>\n\n<p>My code: </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n void cd(char* path){\n    printf(\"Path %s \\n\",path);\n    int count = 0;\n    int i = 0;\n    int length = (int)strlen(path);\n    for(i;i&lt;length;i++){\n        if(path[i]=='/')\n         count ++;\n    }\n  char foldersName[count][255];\n  char str[strlen(path)];\n  strcpy(str,path);\n  char * pch;\n  pch = strtok (str,\"/\");\n  count = 0;\n  while (pch != NULL)\n  {\n    strcpy(foldersName[count],pch);\n    strcat(foldersName[count],\"\\0\");\n    pch = strtok (NULL, \"/\");\n    count ++;\n  }\n  printf(\"----------------Tokens-----------\\n\");\n  for(i =0;i&lt;count;i++){\n    printf(\"%s \\n\",foldersName[i]);\n  }\n}\n\n int main(int argc, char *argv[])\n{\n\n   cd(\"C/Hra/Halo 4/Hra\");\n\n}\n</code></pre>\n"}, {"tags": ["c", "input", "struct", "compare", "c-strings"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483553814, "post_id": 41470461, "comment_id": 70146983, "body": "A <code>char</code> variable cannot hold a name. You need an array to store s C-string."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7375577, "user_type": "registered", "profile_image": "https://graph.facebook.com/774694932687788/picture?type=large", "display_name": "Ion Gavriliuc", "link": "https://stackoverflow.com/users/7375577/ion-gavriliuc"}, "edited": false, "score": 0, "creation_date": 1483553592, "post_id": 41470517, "comment_id": 70146856, "body": "Thank you... I&#39;m so tired I completely forgot that... Gonna try it now"}, {"owner": {"reputation": 1, "user_id": 7375577, "user_type": "registered", "profile_image": "https://graph.facebook.com/774694932687788/picture?type=large", "display_name": "Ion Gavriliuc", "link": "https://stackoverflow.com/users/7375577/ion-gavriliuc"}, "edited": false, "score": 0, "creation_date": 1483554912, "post_id": 41470517, "comment_id": 70147570, "body": "Everything worked. thank you very much :) Well, in the example i used a file with only a couple of &quot;students&quot; but the exercise actually says that the number of students and the size of their names are undetermined. i just put the size 15 at the beginig to try with a couple only. But thanks for the suggestion, I&#39;ll use that too"}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 0, "last_activity_date": 1483553946, "last_edit_date": 1483553946, "creation_date": 1483553399, "answer_id": 41470517, "question_id": 41470461, "link": "https://stackoverflow.com/questions/41470461/comparing-char-array-in-a-struct-with-user-input-char-array/41470517#41470517", "title": "Comparing char-array in a struct with user input char-array", "body": "<p>You cannot compare C-\"strings\" (which in fact are just <code>char</code>-arrays) using the <code>==</code>-operator:</p>\n\n<pre><code>if(who==stud.id[i]){\n</code></pre>\n\n<p>Use the <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.24.4.2\" rel=\"nofollow noreferrer\"><code>strcmp()</code> function</a> instead:</p>\n\n<pre><code>if (strcmp(who, stud.id[i]) == 0) {\n</code></pre>\n\n<hr>\n\n<p>Unrelated, but still important: You want to make sure to not let the user overflow <code>who</code>.</p>\n\n<p>You can do this by telling <code>scanf()</code> the size of <code>who</code> like this:</p>\n\n<pre><code>scanf(\"%14s\", who); /* Tell it one less to have a spare char \n                       to store the '0'-terminator. */\n</code></pre>\n\n<p>Although <code>scanf(()</code> typically expects an address as argument, you won't pass the address of <code>who</code>, but just <code>who</code>, because an array (which `who^ is) decays to the address of its 1st element., when being passed to a function.</p>\n"}], "owner": {"reputation": 1, "user_id": 7375577, "user_type": "registered", "profile_image": "https://graph.facebook.com/774694932687788/picture?type=large", "display_name": "Ion Gavriliuc", "link": "https://stackoverflow.com/users/7375577/ion-gavriliuc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1134, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483555553, "creation_date": 1483553183, "last_edit_date": 1483555553, "question_id": 41470461, "link": "https://stackoverflow.com/questions/41470461/comparing-char-array-in-a-struct-with-user-input-char-array", "title": "Comparing char-array in a struct with user input char-array", "body": "<p>I am writing a code to search for a specific student in a file, and calculate it's average. everything works except for one thing. When I input the student's name in a char variable, to search for him in the file, the compiler does not get it is equal to a char in the struct of the file...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define nl printf(\"\\n\")\n#define N 100\n\nstruct student {\n    char id[N][N];\n    int vote[10][10];\n};\n\nint main()\n{\nstruct student stud;\nFILE *filer;\nint i=0, j=0, k=0, n_stud=0;\nchar checker[1], who[N];\nfloat avg[10], mark=0.0, count=0.0;\n\nprintf(\"Introduce student id: \");\nscanf(\"%14s\", &amp;who);\nprintf(\"Searching for student %s...\\n\", who);\nnl;\n\nfiler=fopen(\"students.dat\", \"r\");\nif(filer==NULL) {\n    printf(\"Can't open file...\\n\");\n}\n\nfor(i=0; fscanf(filer, \"%s\", &amp;stud.id[i])!=NULL &amp;&amp; fscanf(filer, \"%c\", &amp;checker)!=EOF; ++i) {\n    for(j=0; fscanf(filer, \" %d\", &amp;stud.vote[i][j])!=-1; ++j ) {\n        if(stud.vote[i][j]!=-1) {\n        mark=mark+stud.vote[i][j];\n        count++;\n        } else {\n            for(k=j; k&lt;10; k++) {\n                stud.vote[i][k]=0;\n            }\n            break;\n        }\n    }\n    n_stud++;\n    avg[i]=mark/count;\n    mark=0.0; count=0.0;\n}\n\nfor(i=0; i&lt;n_stud; ++i){\n    if (who == stud.id[i]) {  //HERE IS THE PROBLEM!!!\n        printf(\"Student %s's average is: %.2f\", stud.id, avg[i]);\n    }\n}\nnl;\n\nfclose(filer);\nreturn EXIT_SUCCESS;\n</code></pre>\n\n<p>}</p>\n\n<p>File</p>\n\n<pre><code>s11111  30  28  18  -1\nsa44er44    23  18  30  18  29  18  29  -1\ns33333  30  30  -1\n22222idx 18 -1\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 435637, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 1, "creation_date": 1483551183, "post_id": 41469919, "comment_id": 70145575, "body": "What does <i>&quot;How do make it 1 and 2 constantly&quot;</i> mean exactly?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1483551231, "post_id": 41469919, "comment_id": 70145604, "body": "posting the expected output would be helpful"}, {"owner": {"reputation": 405, "user_id": 5788635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-NmfWb6vWx24/AAAAAAAAAAI/AAAAAAAAABE/aNc3GvTmb4s/photo.jpg?sz=128", "display_name": "Akki", "link": "https://stackoverflow.com/users/5788635/akki"}, "edited": false, "score": 0, "creation_date": 1483551258, "post_id": 41469919, "comment_id": 70145624, "body": "Every row has 1 and 2 consequently at the beginning ."}, {"owner": {"reputation": 405, "user_id": 5788635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-NmfWb6vWx24/AAAAAAAAAAI/AAAAAAAAABE/aNc3GvTmb4s/photo.jpg?sz=128", "display_name": "Akki", "link": "https://stackoverflow.com/users/5788635/akki"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1483551320, "post_id": 41469919, "comment_id": 70145666, "body": "@yano output required is written at the starting of the question"}, {"owner": {"reputation": 2612, "user_id": 706695, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eb9a5e298a2050ebad7ee3d494a13e32?s=128&d=identicon&r=PG", "display_name": "HRgiger", "link": "https://stackoverflow.com/users/706695/hrgiger"}, "edited": false, "score": 0, "creation_date": 1483551411, "post_id": 41469919, "comment_id": 70145721, "body": "@Akki expected or actual? My eyes to tired to compile"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1483551425, "post_id": 41469919, "comment_id": 70145732, "body": "You should reset <code>k</code> before entering the inner loop. Make it <code>1</code> if <code>i</code> is odd and 2 otherwise."}, {"owner": {"reputation": 274, "user_id": 6562313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59b0bb1e797a141fb9a0da24bc81fab?s=128&d=identicon&r=PG&f=1", "display_name": "DBPriGuy", "link": "https://stackoverflow.com/users/6562313/dbpriguy"}, "edited": false, "score": 0, "creation_date": 1483551500, "post_id": 41469919, "comment_id": 70145777, "body": "And what output are you getting with your current code?"}, {"owner": {"reputation": 405, "user_id": 5788635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-NmfWb6vWx24/AAAAAAAAAAI/AAAAAAAAABE/aNc3GvTmb4s/photo.jpg?sz=128", "display_name": "Akki", "link": "https://stackoverflow.com/users/5788635/akki"}, "reply_to_user": {"reputation": 2612, "user_id": 706695, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eb9a5e298a2050ebad7ee3d494a13e32?s=128&d=identicon&r=PG", "display_name": "HRgiger", "link": "https://stackoverflow.com/users/706695/hrgiger"}, "edited": false, "score": 0, "creation_date": 1483551540, "post_id": 41469919, "comment_id": 70145792, "body": "@HRgiger actual required . Valid pattern , i didn&#39;t make it up by myself ."}, {"owner": {"reputation": 405, "user_id": 5788635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-NmfWb6vWx24/AAAAAAAAAAI/AAAAAAAAABE/aNc3GvTmb4s/photo.jpg?sz=128", "display_name": "Akki", "link": "https://stackoverflow.com/users/5788635/akki"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1483551567, "post_id": 41469919, "comment_id": 70145812, "body": "@MOehm what about the extra integers in the 2nd row and the last row ?"}, {"owner": {"reputation": 405, "user_id": 5788635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-NmfWb6vWx24/AAAAAAAAAAI/AAAAAAAAABE/aNc3GvTmb4s/photo.jpg?sz=128", "display_name": "Akki", "link": "https://stackoverflow.com/users/5788635/akki"}, "reply_to_user": {"reputation": 274, "user_id": 6562313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59b0bb1e797a141fb9a0da24bc81fab?s=128&d=identicon&r=PG&f=1", "display_name": "DBPriGuy", "link": "https://stackoverflow.com/users/6562313/dbpriguy"}, "edited": false, "score": 0, "creation_date": 1483551662, "post_id": 41469919, "comment_id": 70145864, "body": "@DBPriGuy 1 3 5 7 9 and so on . but tuff part is to figure out the fix for extra digits in the 2nd and last row . There is one extra integer."}, {"owner": {"reputation": 936, "user_id": 1306355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/970ed70c0bdb1e1241262c8ead344db1?s=128&d=identicon&r=PG", "display_name": "Sung", "link": "https://stackoverflow.com/users/1306355/sung"}, "edited": false, "score": 0, "creation_date": 1483552751, "post_id": 41469919, "comment_id": 70146436, "body": "It is not Design Pattern"}, {"owner": {"reputation": 405, "user_id": 5788635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-NmfWb6vWx24/AAAAAAAAAAI/AAAAAAAAABE/aNc3GvTmb4s/photo.jpg?sz=128", "display_name": "Akki", "link": "https://stackoverflow.com/users/5788635/akki"}, "reply_to_user": {"reputation": 936, "user_id": 1306355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/970ed70c0bdb1e1241262c8ead344db1?s=128&d=identicon&r=PG", "display_name": "Sung", "link": "https://stackoverflow.com/users/1306355/sung"}, "edited": false, "score": 0, "creation_date": 1483552905, "post_id": 41469919, "comment_id": 70146519, "body": "@sung i get it)"}], "answers": [{"comments": [{"owner": {"reputation": 274, "user_id": 6562313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59b0bb1e797a141fb9a0da24bc81fab?s=128&d=identicon&r=PG&f=1", "display_name": "DBPriGuy", "link": "https://stackoverflow.com/users/6562313/dbpriguy"}, "edited": false, "score": 0, "creation_date": 1483551778, "post_id": 41470058, "comment_id": 70145927, "body": "The other kink is that the required output shows that the first row should have 1 element, and the second row 3, which breaks with the simple loop pattern"}, {"owner": {"reputation": 405, "user_id": 5788635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-NmfWb6vWx24/AAAAAAAAAAI/AAAAAAAAABE/aNc3GvTmb4s/photo.jpg?sz=128", "display_name": "Akki", "link": "https://stackoverflow.com/users/5788635/akki"}, "edited": false, "score": 1, "creation_date": 1483551863, "post_id": 41470058, "comment_id": 70145968, "body": "Still that won&#39;t solve it because of 1 extra digit in the second and last row"}, {"owner": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "reply_to_user": {"reputation": 274, "user_id": 6562313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59b0bb1e797a141fb9a0da24bc81fab?s=128&d=identicon&r=PG&f=1", "display_name": "DBPriGuy", "link": "https://stackoverflow.com/users/6562313/dbpriguy"}, "edited": false, "score": 0, "creation_date": 1483551903, "post_id": 41470058, "comment_id": 70145991, "body": "@DBPriGuy true. The OP isn&#39;t very clear on ... much of the detail."}, {"owner": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "reply_to_user": {"reputation": 405, "user_id": 5788635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-NmfWb6vWx24/AAAAAAAAAAI/AAAAAAAAABE/aNc3GvTmb4s/photo.jpg?sz=128", "display_name": "Akki", "link": "https://stackoverflow.com/users/5788635/akki"}, "edited": false, "score": 0, "creation_date": 1483552109, "post_id": 41470058, "comment_id": 70146099, "body": "@Akki see my update; the loop condition in the inner loop has to be changed as well"}, {"owner": {"reputation": 405, "user_id": 5788635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-NmfWb6vWx24/AAAAAAAAAAI/AAAAAAAAABE/aNc3GvTmb4s/photo.jpg?sz=128", "display_name": "Akki", "link": "https://stackoverflow.com/users/5788635/akki"}, "edited": false, "score": 0, "creation_date": 1483552710, "post_id": 41470058, "comment_id": 70146407, "body": "@RodyOldenhuis    Can you explain me what is going on with the code ? i see conditional operators in the second for loop . Quite confusing"}], "tags": [], "owner": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "is_accepted": false, "score": 2, "last_activity_date": 1483552067, "last_edit_date": 1483552067, "creation_date": 1483551646, "answer_id": 41470058, "question_id": 41469919, "link": "https://stackoverflow.com/questions/41469919/c-programming-pattern/41470058#41470058", "title": "C programming pattern", "body": "<p>The (main) problem is that you're not resetting <code>k</code> at each new iteration of the outer loop. Also, the extra integer at the end of the 2<sup>nd</sup> and last rows require an ugly condition in the inner loop:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint \nmain(int argc, \n     char** argv)\n{\n    unsigned int i, j, k,\n                 F = 6u;  /* number of rows + 1 */\n\n    for(i=0u; i&lt;F; ++i)\n    {\n        k = i % 2u + 1u;\n\n        for(j=0u; j &lt; i + (i&gt;=2u) + (i==F-1); ++j)\n        {\n            printf(\"%u \",k);\n            k += 2u;\n        }\n\n        puts(\"\");\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 405, "user_id": 5788635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-NmfWb6vWx24/AAAAAAAAAAI/AAAAAAAAABE/aNc3GvTmb4s/photo.jpg?sz=128", "display_name": "Akki", "link": "https://stackoverflow.com/users/5788635/akki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "protected_date": 1567437032, "answer_count": 1, "score": -4, "last_activity_date": 1567436689, "creation_date": 1483551090, "last_edit_date": 1483552862, "question_id": 41469919, "link": "https://stackoverflow.com/questions/41469919/c-programming-pattern", "title": "C programming pattern", "body": "<p>i needed code for this pattern.</p>\n\n<pre><code>1\n2 4 6\n1 3 5 7\n2 4 6 8 10\n1 3 5 7 9 11 13\n</code></pre>\n\n<p>i tried it , but was not able to make it up my code:-</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nmain(){\nint i,j,k=1;\nfor(i=1;i&lt;=5;i++){\n    for(j=1;j&lt;=i;j++){\n        printf(\"%d\",k);\n        k+=2;\n    }\n    printf(\"\\n\");\n}\n\n}\n</code></pre>\n\n<p>This c pattern has 1 extra integer in the 2nd row and last row. Help would be appreciated</p>\n"}, {"tags": ["c", "sorting", "switch-statement", "scanf"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1483551046, "post_id": 41469864, "comment_id": 70145485, "body": "First, you need a <code>break</code> after <code>bubble_sort();</code> else it falls though to the next case. Second, does this actually compile? In C strings should be in double quotes. And you can&#39;t use strings in a <code>switch</code>."}, {"owner": {"reputation": 95, "user_id": 7243944, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7Twz.jpg?s=128&g=1", "display_name": "Sapphira", "link": "https://stackoverflow.com/users/7243944/sapphira"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1483551118, "post_id": 41469864, "comment_id": 70145536, "body": "I just added a break, but the same problem still occurs. It does compile"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483551151, "post_id": 41469864, "comment_id": 70145563, "body": "Take your compiler&#39;s warning serious. Fix the code until no more warnings are issued ... <i>sigh</i>"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1483551238, "post_id": 41469864, "comment_id": 70145609, "body": "Also, just noticed you declare <code>type</code> as a <code>char</code>, but treat it as a string in the <code>scanf</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1483551305, "post_id": 41469864, "comment_id": 70145654, "body": "Hint: In C a single-quote is very, very, very different from a double-quote."}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483551196, "post_id": 41469927, "comment_id": 70145588, "body": "I see no strings in the OP&#39;s code beside the argument to <code>printf()</code> calls."}, {"owner": {"reputation": 95, "user_id": 7243944, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7Twz.jpg?s=128&g=1", "display_name": "Sapphira", "link": "https://stackoverflow.com/users/7243944/sapphira"}, "edited": false, "score": 0, "creation_date": 1483551208, "post_id": 41469927, "comment_id": 70145592, "body": "where would I add those functions?"}, {"owner": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483551433, "post_id": 41469927, "comment_id": 70145739, "body": "@alk -- it is a new year, lets be forgiving and help people -- you right that he used single quotes, but that was clearly not his intent"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483551546, "post_id": 41469927, "comment_id": 70145797, "body": "OK, so make it really nice and do <code>&quot;%199s&quot;</code> ... ;-)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483551881, "post_id": 41469927, "comment_id": 70145980, "body": "Sry, but still this does not seem to meet the requirements, as they read: &quot;<i>I have to use switch case to do so</i>&quot;"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1483552146, "post_id": 41469927, "comment_id": 70146118, "body": "&quot;Strings in C are a pointer type&quot; - This is completely wrong! 1) C does not have a string type. 2) C &quot;strings&quot; are <code>char</code> arrays by convention, which are <b>not</b> pointers!"}, {"owner": {"reputation": 95, "user_id": 7243944, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7Twz.jpg?s=128&g=1", "display_name": "Sapphira", "link": "https://stackoverflow.com/users/7243944/sapphira"}, "edited": false, "score": 0, "creation_date": 1483590750, "post_id": 41469927, "comment_id": 70160360, "body": "Just out of curiosity, what are the reasons people downvoted this question? I would like to be able to improve my future questions or edit this question if that would benefit other readers."}], "tags": [], "owner": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "is_accepted": false, "score": 1, "last_activity_date": 1483594466, "last_edit_date": 1483594466, "creation_date": 1483551111, "answer_id": 41469927, "question_id": 41469864, "link": "https://stackoverflow.com/questions/41469864/switch-statements-using-string-input/41469927#41469927", "title": "Switch Statements Using String Input", "body": "<p>Strings in C are a pointer type, so when you try to put a string value into a switch statement or if statement like that you are really just comparing two pointers and not the values that they are point to.</p>\n\n<p>You need a function like <code>strcmp</code> or <code>strncmp</code> to compare what is actually being pointed to</p>\n\n<p>So, it should look like something like this;</p>\n\n<pre><code>char type[200];\nprintf(\"What type of sort would you like to perform?\\n\");\nscanf(\"%199s\", type);\nif (strcmp(type,\"bubble\")==0) {\n    bubble_sort();\n} else\nif (strcmp(type,\"selection\")==0) {\n    something_selection();\n} else\nif (strcmp(type,\"insertion\")==0) {\n    something_insetion();\n} else {\n    printf(\"invalid input\\n\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 949, "user_id": 6745643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zh4InaNEvp4/AAAAAAAAAAI/AAAAAAAAADU/VkoLunlB9-c/photo.jpg?sz=128", "display_name": "shafayat hossain", "link": "https://stackoverflow.com/users/6745643/shafayat-hossain"}, "is_accepted": false, "score": 0, "last_activity_date": 1483551391, "creation_date": 1483551391, "answer_id": 41469991, "question_id": 41469864, "link": "https://stackoverflow.com/questions/41469864/switch-statements-using-string-input/41469991#41469991", "title": "Switch Statements Using String Input", "body": "<p>This is not possible in C. Because, to compare two strings, strcmp() function should be used. But there is no way to add function in switch case. </p>\n"}, {"tags": [], "owner": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "is_accepted": false, "score": 1, "last_activity_date": 1483631654, "creation_date": 1483631654, "answer_id": 41489281, "question_id": 41469864, "link": "https://stackoverflow.com/questions/41469864/switch-statements-using-string-input/41489281#41489281", "title": "Switch Statements Using String Input", "body": "<p>Since type is a char and the switch can use single characters, you could scan for one character using %c instead of %s</p>\n\n<pre><code>char type;\nprintf ( \"What type of sort would you like to perform?\\n\");\nprintf ( \"Enter b for bubble\\n\");\nprintf ( \"Enter s for selection\\n\");\nprintf ( \"Enter i for insertion\\n\");\nscanf ( \" %c\", &amp;type);\nswitch ( type)\n{\n    case 'b':\n        bubble_sort();\n        break;\n    case 's':\n        selection_sort();\n        break;\n    case 'i':\n        insertion_sort();\n        break;\n    default:\n        printf(\"invalid input\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7243944, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7Twz.jpg?s=128&g=1", "display_name": "Sapphira", "link": "https://stackoverflow.com/users/7243944/sapphira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1115, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1483631654, "creation_date": 1483550910, "last_edit_date": 1483551930, "question_id": 41469864, "link": "https://stackoverflow.com/questions/41469864/switch-statements-using-string-input", "title": "Switch Statements Using String Input", "body": "<pre><code>char type;\nprintf(\"What type of sort would you like to perform?\\n\");\nscanf(\"%s\", &amp;type);\nswitch(type)\n{\ncase 'bubble':\n    bubble_sort();\ncase 'selection':\ncase 'insertion':\ndefault:\n    printf(\"invalid input\\n\");\n}\n</code></pre>\n\n<p>I am trying to create a program which sorts a list with either bubble, selection, or insertion sort based on the user's input. </p>\n\n<p>I have to use switch case to do so. </p>\n\n<p>I have defined a variable \"type\" before the switch statement, and then use the scanf function to assign it either \"bubble\", \"selection\", or \"insertion\". </p>\n\n<p>However, when I run the code and type in \"bubble\", it does not carry out my bubble_sort function (not shown here) and instead resorts to the default case. </p>\n\n<p>How can I fix this issue? </p>\n\n<p>I am slightly uncertain as to whether 'char' was the correct way to define my \"type\" variable, or whether switch statements can only be used with single characters.</p>\n\n<p>Also, I apologise if my code is not formatted correctly, as I am new to this site. </p>\n\n<p>Let me know if I need to add any more information to this question!</p>\n"}, {"tags": ["c", "hash", "hashtable"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1483550849, "post_id": 41469755, "comment_id": 70145360, "body": "1) you are reallocating a too small size 2) when reshuffeling you should realise that hashtable and new_hashtabel can actually be the same pointer,, they <b>at least</b> have the same contents, unless realloc() failed, which you should check."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 2, "creation_date": 1483550877, "post_id": 41469755, "comment_id": 70145377, "body": "<code>struct hashT</code> or <code>struct hastT</code>? Aren&#39;t you supposed to return a pointer to the hashtable struct from <code>Rehash</code>? And what is <code>temp</code> for if you always access <code>hashtable-&gt;table[i]</code> in the loop?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1483551372, "post_id": 41469755, "comment_id": 70145695, "body": "Plus: after realloc, the <code>table[i].next</code> pointers still have their old values, pointing into the old memory area (which is not valid anymore)"}, {"owner": {"reputation": 1, "user_id": 6086971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pKuyF.jpg?s=128&g=1", "display_name": "Cookie", "link": "https://stackoverflow.com/users/6086971/cookie"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1483556847, "post_id": 41469755, "comment_id": 70148617, "body": "@wildplasser i added the realloc check, but how should the statement be?Should it be (struct hashT*) realloc(hashtable,2*sizeof(hashtable-&gt;table[hashtable-&gt;size]&zwnj;&#8203;)); ??"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1483559044, "post_id": 41469755, "comment_id": 70149778, "body": "I suggest you add a few <code>printf()</code>s to the code to print the various <code>sizeof</code>s. They will not be what you expect them to be."}], "owner": {"reputation": 1, "user_id": 6086971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pKuyF.jpg?s=128&g=1", "display_name": "Cookie", "link": "https://stackoverflow.com/users/6086971/cookie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 298, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483611092, "creation_date": 1483550541, "last_edit_date": 1483611092, "question_id": 41469755, "link": "https://stackoverflow.com/questions/41469755/rehashing-a-struct-hash-table", "title": "Rehashing a struct hash table", "body": "<p>I made a rehash function but it doesnt seem to be working, and I don't know what else to do. Here is my code. I think the problem is in the loop</p>\n\n<pre><code> struct hashT *hashtable; //global variable\n\nstruct hash{\n int size;\n int num_entries;\n struct Node table[];//the hash table\n} *hashT;\n\n\n\n struct Node {\n  struct Node *next;\n char* word;\n int count;\n int score;\n } *head;\n\n struct hastT Rehash(struct hashT *hashtable) {\n     struct hastT *new_hashtable =  realloc(hashtable,2*sizeof(hashtable-&gt;table[hashtable-&gt;size]));\n    struct Node *temp;\n    unsigned long key;\n\n\nnew_hashtable-&gt;size = 2*hashtable-&gt;size;\n\nfor (int i=0; i&lt; hashtable-&gt;size; i++){\n    for (temp = hashtable-&gt;table[i]; temp; temp = temp-&gt;next;) {\n        if (hashtable-&gt;table[i] != NULL) {\n            key = hashF(hashtable-&gt;table[i]-&gt;word);\n            new_hashtable-&gt;table[key]-&gt;word = hashtable-&gt;table[i]-&gt;word;\n            new_hashtable-&gt;num_entries++;\n        }\n    }   \n}\nreturn (new_hashtable);\n\n}        \n</code></pre>\n"}, {"tags": ["c", "parsing"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1483550662, "post_id": 41469694, "comment_id": 70145248, "body": "<code>&lt;ctype.h&gt;</code> has functions that classify characters. If you want to find whole words, test whether the characters just before and after the word are not letters with <code>isalnum</code>. Make sure that you don&#39;t access the character left of the beginning of the line."}, {"owner": {"reputation": 2193, "user_id": 3700524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVsYW.jpg?s=128&g=1", "display_name": "Mohsen_Fatemi", "link": "https://stackoverflow.com/users/3700524/mohsen-fatemi"}, "edited": false, "score": 0, "creation_date": 1483550682, "post_id": 41469694, "comment_id": 70145256, "body": "it must be sth like this <code>while (</code> or <code>while(</code> , after each while loop we have space or (  , otherwise it is not a loop , it&#39;s something like variable name ..."}, {"owner": {"reputation": 2193, "user_id": 3700524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVsYW.jpg?s=128&g=1", "display_name": "Mohsen_Fatemi", "link": "https://stackoverflow.com/users/3700524/mohsen-fatemi"}, "edited": false, "score": 0, "creation_date": 1483550891, "post_id": 41469694, "comment_id": 70145384, "body": "just be aware of do while , it has <code>{</code> after  do , you must check space and {"}, {"owner": {"reputation": 1552, "user_id": 2362671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0585760afe78ec9aafe1836b826ed495?s=128&d=identicon&r=PG", "display_name": "Come Raczy", "link": "https://stackoverflow.com/users/2362671/come-raczy"}, "edited": false, "score": 0, "creation_date": 1483556098, "post_id": 41469694, "comment_id": 70148195, "body": "If you are going to write a parser, you need to be very clear bout your grammar (e.g. what are your &quot;spaces&quot; and other separators? do you have comments? etc.). Also you have the major problem of line continuity with your buffer (if a line is over 200 characters fgets will split into multiple parts and that will need to be addressed). Altogether, even for something as simple as this there are lots of pitfalls and reinventing the solution will be tedious and buggy. It would be way simpler to simply define your grammar and use <a href=\"https://www.gnu.org/software/bison/manual/\" rel=\"nofollow noreferrer\">bison</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1326, "user_id": 638752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20b5bb18f2c79784069a3d72408266b4?s=128&d=identicon&r=PG", "display_name": "theamk", "link": "https://stackoverflow.com/users/638752/theamk"}, "is_accepted": false, "score": 2, "last_activity_date": 1483552946, "creation_date": 1483552946, "answer_id": 41470406, "question_id": 41469694, "link": "https://stackoverflow.com/questions/41469694/count-how-many-times-a-word-is-used-c/41470406#41470406", "title": "Count how many times a word is used. C", "body": "<p>The proper solution also needs to handle strings and comments</p>\n\n<pre><code>print(\"I have no for() loops\")\n/* commented out for() loop */\nchar* c = \"for()\\\"loop\\\\\";\n</code></pre>\n\n<p>If you do not care about this, and really want to use plain C, I would recommend \"strtok\" function which splits string into the words using delimiters (which would be basically all non-alphanumeric symbols in your case -- space, brackets, comma, etc...). Then once you have words, you can just strcmp() them with \"do\", \"while\" or \"for\"</p>\n"}], "owner": {"reputation": 85, "user_id": 7346735, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/27825fb8af2eb787ea05f2e2e2674dc5?s=128&d=identicon&r=PG&f=1", "display_name": "MESA", "link": "https://stackoverflow.com/users/7346735/mesa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483553001, "creation_date": 1483550316, "last_edit_date": 1483553001, "question_id": 41469694, "link": "https://stackoverflow.com/questions/41469694/count-how-many-times-a-word-is-used-c", "title": "Count how many times a word is used. C", "body": "<p>I am trying to count the number of loops and emptylines in a string entered by a user. So here is the way I did it:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\n    int i, lines, loopF = 0, loopW = 0, loopDW = 0, empty = 0;\n    char *p, str[200];\n    const char test[10] = \"while\";\n    char *f;\n    printf(\"Enter a string. Ctrl+Z for exit.\\n\");\n    while (fgets(str, 200, stdin) != NULL) {\n        if (f = strstr(str, test)) { //first way\n            loopW++;\n        }\n        for (i = 0; i &lt; strlen(str); i++) {\n            // count loops\n            if (str[i] == 'f' &amp;&amp; str[i + 1] == 'o' &amp;&amp; str[i + 2] == 'r') {\n                loopF++;\n            }\n            if (str[i] == 'w' &amp;&amp; str[i + 1] == 'h' &amp;&amp; str[i + 2] == 'i'\n                    &amp;&amp; str[i + 3] == 'l' &amp;&amp; str[i + 4] == 'e') { // second way\n                loopW++;\n            }\n            if (str[i] == 'd' &amp;&amp; str[i + 1] == 'o') {\n                loopDW++;\n                if (loopDW &gt;= 1)\n                    loopW--;\n            }\n        }\n        // count empty lines\n        p = str;\n        lines = 0;\n        while (*p != '\\n') {\n            if (*p != ' ') {\n                lines = 1;\n            }\n            p++;\n        }\n        if (!lines) {\n            empty++;\n            lines = 0;\n        }\n    }\n    printf(\"---------------------\\n\");\n    printf(\" Empty lines: %d \\n\\n\", empty);\n    printf(\" Number of loops:\\n\");\n    printf(\" For: %d \\n\", loopF);\n    printf(\" While: %d \\n\", loopW);\n    printf(\" Do/While: %d \\n\", loopDW);\n    printf(\"---------------------\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>I did it for 2 ways only for \"while\" to test but when a user types \"whilethis\" or \"thiswhile\" it counts it(which is not what I want). I want when there is only a while(a loop) to be counted and not with other symbols but i have no idea how to do it. Same is for do/while and for loops. Any help here? :)</p>\n"}, {"tags": ["c", "graphics"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1483552348, "post_id": 41469555, "comment_id": 70146208, "body": "Please don&#39;t post pictures of text."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7163625, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-Lzq2--OuFPs/AAAAAAAAAAI/AAAAAAAAAIA/GH1hxtQBhgE/photo.jpg?sz=128", "display_name": "Ben FM", "link": "https://stackoverflow.com/users/7163625/ben-fm"}, "edited": false, "score": 0, "creation_date": 1483637149, "post_id": 41469939, "comment_id": 70187815, "body": "That&#39;s actually not what i&#39;ve used. I just copied the header code and i&#39;m sure ( at least the provider claims so) that it&#39;s a C header file @Random Davis"}, {"owner": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "reply_to_user": {"reputation": 33, "user_id": 7163625, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-Lzq2--OuFPs/AAAAAAAAAAI/AAAAAAAAAIA/GH1hxtQBhgE/photo.jpg?sz=128", "display_name": "Ben FM", "link": "https://stackoverflow.com/users/7163625/ben-fm"}, "edited": false, "score": 0, "creation_date": 1483644583, "post_id": 41469939, "comment_id": 70192290, "body": "The code you posted has the line <code>#include &lt;sstream&gt; </code>, which is C++. Thus, my answer still stands. But perhaps taking that line out might not affect that header. Still, you&#39;re probably better off using a much newer, more well-supported graphics library."}, {"owner": {"reputation": 33, "user_id": 7163625, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-Lzq2--OuFPs/AAAAAAAAAAI/AAAAAAAAAIA/GH1hxtQBhgE/photo.jpg?sz=128", "display_name": "Ben FM", "link": "https://stackoverflow.com/users/7163625/ben-fm"}, "edited": false, "score": 0, "creation_date": 1483695323, "post_id": 41469939, "comment_id": 70210630, "body": "Yes your right.Can you specifically name one? @Random Davis"}], "tags": [], "owner": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "is_accepted": false, "score": 1, "last_activity_date": 1483644951, "last_edit_date": 1483644951, "creation_date": 1483551153, "answer_id": 41469939, "question_id": 41469555, "link": "https://stackoverflow.com/questions/41469555/graphics-header-compliation-error-in-c/41469939#41469939", "title": "Graphics header compliation error in C", "body": "<p>If it works in C++ mode, but not in C mode, that tell me that it's probably a C++ library. The fact that you get syntax errors in C mode, but not in C++ mode, lends credence to this hypothesis.</p>\n\n<p>Assuming <a href=\"http://web.stanford.edu/class/archive/cs/cs106b/cs106b.1126/materials/cppdoc/graphics-h.html\" rel=\"nofollow noreferrer\">this</a> is what you're using (you should have specified that in your question), that's clearly C++ only, so no wonder you can't compile it as C code. You're hosed if you need to be able to use that library for C code. Still, you can write C-like code and just compile as C++ if you need. I just don't understand why you need to use a C++ library, but also need to compile as C and not C++.</p>\n\n<p>Still, I'm only assuming that's the header file you're trying to include. Without further information on what you're trying to do, and exactly which library you're trying to use, I can only assume what the problem is.</p>\n\n<p>EDIT: Based on the header you posted, it appears at first glance to be C compatible, except for including <code>&lt;sstream&gt;</code>. I have no idea if that's necessary or not. Someone with more experience might be a better resource to determine if that specific library would work in C.</p>\n"}], "owner": {"reputation": 33, "user_id": 7163625, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-Lzq2--OuFPs/AAAAAAAAAAI/AAAAAAAAAIA/GH1hxtQBhgE/photo.jpg?sz=128", "display_name": "Ben FM", "link": "https://stackoverflow.com/users/7163625/ben-fm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1483644951, "creation_date": 1483549825, "last_edit_date": 1483619484, "question_id": 41469555, "link": "https://stackoverflow.com/questions/41469555/graphics-header-compliation-error-in-c", "title": "Graphics header compliation error in C", "body": "<p>First let me say that I've been searching for two days for my answer and I found nothing! So , decided to ask it here.</p>\n\n<p>I downloaded the graphics.h and libbgi.a files and did exactly as the instructions provided and still it doesn't work! I've set linker parameters as well and I must say that this works in C++  mode , but not in C mode. I'm using Dev-C++ 4.9.9.2 as well. Here is what i get :</p>\n\n<p><img src=\"https://i.stack.imgur.com/m1KoG.jpg\" alt=\"My problem&#39;s screenshot photo\"></p>\n\n<p>Can anyone illustrate the problem for me?  </p>\n\n<p>P.S : The header code is </p>\n\n<pre><code>// The winbgim library, Version 6.0, August 9, 2004\n// Written by:\n//      Grant Macklem (Grant.Macklem@colorado.edu)\n//      Gregory Schmelter (Gregory.Schmelter@colorado.edu)\n//      Alan Schmidt (Alan.Schmidt@colorado.edu)\n//      Ivan Stashak (Ivan.Stashak@colorado.edu)\n//      Michael Main (Michael.Main@colorado.edu)\n// CSCI 4830/7818: API Programming\n// University of Colorado at Boulder, Spring 2003\n\n\n// ---------------------------------------------------------------------------\n//                          Notes\n// ---------------------------------------------------------------------------\n// * This library is still under development.\n// * Please see http://www.cs.colorado.edu/~main/bgi for information on\n// * using this library with the mingw32 g++ compiler.\n// * This library only works with Windows API level 4.0 and higher (Windows 95, NT 4.0 and newer)\n// * This library may not be compatible with 64-bit versions of Windows\n// ---------------------------------------------------------------------------\n\n\n// ---------------------------------------------------------------------------\n//                          Macro Guard and Include Directives\n// ---------------------------------------------------------------------------\n#ifndef WINBGI_H\n#define WINBGI_H\n#include &lt;windows.h&gt;        // Provides the mouse message types\n#include &lt;limits.h&gt;         // Provides INT_MAX\n#include &lt;sstream&gt;          // Provides std::ostringstream\n// ---------------------------------------------------------------------------\n\n\n\n// ---------------------------------------------------------------------------\n//                          Definitions\n// ---------------------------------------------------------------------------\n// Definitions for the key pad extended keys are added here.  When one\n// of these keys are pressed, getch will return a zero followed by one\n// of these values. This is the same way that it works in conio for\n// dos applications.\n#define KEY_HOME        71\n#define KEY_UP          72\n#define KEY_PGUP        73\n#define KEY_LEFT        75\n#define KEY_CENTER      76\n#define KEY_RIGHT       77\n#define KEY_END         79\n#define KEY_DOWN        80\n#define KEY_PGDN        81\n#define KEY_INSERT      82\n#define KEY_DELETE      83\n#define KEY_F1          59\n#define KEY_F2          60\n#define KEY_F3          61\n#define KEY_F4          62\n#define KEY_F5          63\n#define KEY_F6          64\n#define KEY_F7          65\n#define KEY_F8          66\n#define KEY_F9          67\n\n// Line thickness settings\n#define NORM_WIDTH      1\n#define THICK_WIDTH     3\n\n// Character Size and Direction\n#define USER_CHAR_SIZE  0\n#define HORIZ_DIR       0\n#define VERT_DIR        1\n\n\n// Constants for closegraph\n#define CURRENT_WINDOW -1\n#define ALL_WINDOWS -2\n#define NO_CURRENT_WINDOW -3\n\n// The standard Borland 16 colors\n#define MAXCOLORS       15\nenum colors { BLACK, BLUE, GREEN, CYAN, RED, MAGENTA, BROWN, LIGHTGRAY, DARKGRAY,\n              LIGHTBLUE, LIGHTGREEN, LIGHTCYAN, LIGHTRED, LIGHTMAGENTA, YELLOW, WHITE };\n\n// The standard line styles\nenum line_styles { SOLID_LINE, DOTTED_LINE, CENTER_LINE, DASHED_LINE, USERBIT_LINE };\n\n// The standard fill styles\nenum fill_styles { EMPTY_FILL, SOLID_FILL, LINE_FILL, LTSLASH_FILL, SLASH_FILL,\n                   BKSLASH_FILL, LTBKSLASH_FILL, HATCH_FILL, XHATCH_FILL, INTERLEAVE_FILL,\n                   WIDE_DOT_FILL, CLOSE_DOT_FILL, USER_FILL };\n\n// The various graphics drivers\nenum graphics_drivers { DETECT, CGA, MCGA, EGA, EGA64, EGAMONO, IBM8514, HERCMONO,\n                        ATT400, VGA, PC3270 };\n\n// Various modes for each graphics driver\nenum graphics_modes { CGAC0, CGAC1, CGAC2, CGAC3, CGAHI, \n                      MCGAC0 = 0, MCGAC1, MCGAC2, MCGAC3, MCGAMED, MCGAHI,\n                      EGALO = 0, EGAHI,\n                      EGA64LO = 0, EGA64HI,\n                      EGAMONOHI = 3,\n                      HERCMONOHI = 0,\n                      ATT400C0 = 0, ATT400C1, ATT400C2, ATT400C3, ATT400MED, ATT400HI,\n                      VGALO = 0, VGAMED, VGAHI,\n                      PC3270HI = 0,\n                      IBM8514LO = 0, IBM8514HI };\n\n// Borland error messages for the graphics window.\n#define NO_CLICK        -1      // No mouse event of the current type in getmouseclick\nenum graph_errors { grInvalidVersion = -18, grInvalidDeviceNum = -15, grInvalidFontNum,\n                    grInvalidFont, grIOerror, grError, grInvalidMode, grNoFontMem,\n                    grFontNotFound, grNoFloodMem, grNoScanMem, grNoLoadMem,\n                    grInvalidDriver, grFileNotFound, grNotDetected, grNoInitGraph,\n                    grOk };\n\n// Write modes\nenum putimage_ops{ COPY_PUT, XOR_PUT, OR_PUT, AND_PUT, NOT_PUT };\n\n// Text Modes\nenum horiz { LEFT_TEXT, CENTER_TEXT, RIGHT_TEXT };\nenum vertical { BOTTOM_TEXT, VCENTER_TEXT, TOP_TEXT }; // middle not needed other than as seperator\nenum font_names { DEFAULT_FONT, TRIPLEX_FONT, SMALL_FONT, SANS_SERIF_FONT,\n             GOTHIC_FONT, SCRIPT_FONT, SIMPLEX_FONT, TRIPLEX_SCR_FONT,\n             COMPLEX_FONT, EUROPEAN_FONT, BOLD_FONT };\n// ---------------------------------------------------------------------------\n\n\n\n// ---------------------------------------------------------------------------\n//                              Structures\n// ---------------------------------------------------------------------------\n// This structure records information about the last call to arc.  It is used\n// by getarccoords to get the location of the endpoints of the arc.\nstruct arccoordstype\n{\n    int x, y;                   // Center point of the arc\n    int xstart, ystart;         // The starting position of the arc\n    int xend, yend;             // The ending position of the arc.\n};\n\n\n// This structure defines the fill style for the current window.  Pattern is\n// one of the system patterns such as SOLID_FILL.  Color is the color to\n// fill with\nstruct fillsettingstype\n{\n    int pattern;                // Current fill pattern\n    int color;                  // Current fill color\n};\n\n\n// This structure records information about the current line style.\n// linestyle is one of the line styles such as SOLID_LINE, upattern is a\n// 16-bit pattern for user defined lines, and thickness is the width of the\n// line in pixels.\nstruct linesettingstype\n{\n    int linestyle;              // Current line style\n    unsigned upattern;          // 16-bit user line pattern\n    int thickness;              // Width of the line in pixels\n};\n\n\n// This structure records information about the text settings.\nstruct textsettingstype\n{\n    int font;                   // The font in use\n    int direction;              // Text direction\n    int charsize;               // Character size\n    int horiz;                  // Horizontal text justification\n    int vert;                   // Vertical text justification\n};\n\n\n// This structure records information about the viewport\nstruct viewporttype\n{\n    int left, top,              // Viewport bounding box\n        right, bottom;\n    int clip;                   // Whether to clip image to viewport\n};\n\n\n// This structure records information about the palette.\nstruct palettetype\n{\n    unsigned char size;\n    signed char colors[MAXCOLORS + 1];\n};\n// ---------------------------------------------------------------------------\n\n\n\n// ---------------------------------------------------------------------------\n//                          API Entries\n// ---------------------------------------------------------------------------\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n// Drawing Functions\nvoid arc( int x, int y, int stangle, int endangle, int radius );\nvoid bar( int left, int top, int right, int bottom );\nvoid bar3d( int left, int top, int right, int bottom, int depth, int topflag );\nvoid circle( int x, int y, int radius );\nvoid cleardevice( );\nvoid clearviewport( );\nvoid drawpoly(int n_points, int* points);\nvoid ellipse( int x, int y, int stangle, int endangle, int xradius, int yradius );\nvoid fillellipse( int x, int y, int xradius, int yradius );\nvoid fillpoly(int n_points, int* points);\nvoid floodfill( int x, int y, int border );\nvoid line( int x1, int y1, int x2, int y2 );\nvoid linerel( int dx, int dy );\nvoid lineto( int x, int y );\nvoid pieslice( int x, int y, int stangle, int endangle, int radius );\nvoid putpixel( int x, int y, int color );\nvoid rectangle( int left, int top, int right, int bottom );\nvoid sector( int x, int y, int stangle, int endangle, int xradius, int yradius );\n\n// Miscellaneous Functions\nint getdisplaycolor( int color );\nint converttorgb( int color );\nvoid delay( int msec );\nvoid getarccoords( arccoordstype *arccoords );\nint getbkcolor( );\nint getcolor( );\nvoid getfillpattern( char *pattern );\nvoid getfillsettings( fillsettingstype *fillinfo );\nvoid getlinesettings( linesettingstype *lineinfo );\nint getmaxcolor( );\nint getmaxheight( );\nint getmaxwidth( );\nint getmaxx( );\nint getmaxy( );\nbool getrefreshingbgi( );\nint getwindowheight( );\nint getwindowwidth( );\nint getpixel( int x, int y );\nvoid getviewsettings( viewporttype *viewport );\nint getx( );\nint gety( );\nvoid moverel( int dx, int dy );\nvoid moveto( int x, int y );\nvoid refreshbgi(int left, int top, int right, int bottom);\nvoid refreshallbgi( );    \nvoid setbkcolor( int color );\nvoid setcolor( int color );\nvoid setfillpattern( char *upattern, int color );\nvoid setfillstyle( int pattern, int color );\nvoid setlinestyle( int linestyle, unsigned upattern, int thickness );\nvoid setrefreshingbgi(bool value);\nvoid setviewport( int left, int top, int right, int bottom, int clip );\nvoid setwritemode( int mode );\n\n// Window Creation / Graphics Manipulation\nvoid closegraph( int wid=ALL_WINDOWS );\nvoid detectgraph( int *graphdriver, int *graphmode );\nvoid getaspectratio( int *xasp, int *yasp );\nchar *getdrivername( );\nint getgraphmode( );\nint getmaxmode( );\nchar *getmodename( int mode_number );\nvoid getmoderange( int graphdriver, int *lomode, int *himode );\nvoid graphdefaults( );\nchar *grapherrormsg( int errorcode );\nint graphresult( );\nvoid initgraph( int *graphdriver, int *graphmode, char *pathtodriver );\nint initwindow\n    ( int width, int height, const char* title=\"Windows BGI\", int left=0, int top=0, bool dbflag=false, bool closeflag=true );\nint installuserdriver( char *name, int *fp );    // Not available in WinBGI\nint installuserfont( char *name );               // Not available in WinBGI\nint registerbgidriver( void *driver );           // Not available in WinBGI\nint registerbgifont( void *font );               // Not available in WinBGI\nvoid restorecrtmode( );\nvoid setaspectratio( int xasp, int yasp );\nunsigned setgraphbufsize( unsigned bufsize );    // Not available in WinBGI\nvoid setgraphmode( int mode );\nvoid showerrorbox( const char *msg = NULL );\n\n// User Interaction\nint getch( );\nint kbhit( );\n\n// User-Controlled Window Functions (winbgi.cpp)\nint getcurrentwindow( );\nvoid setcurrentwindow( int window );\n\n// Double buffering support (winbgi.cpp)\nint getactivepage( );\nint getvisualpage( );\nvoid setactivepage( int page );\nvoid setvisualpage( int page );\nvoid swapbuffers( );\n\n// Image Functions (drawing.cpp)\nunsigned imagesize( int left, int top, int right, int bottom );\nvoid getimage( int left, int top, int right, int bottom, void *bitmap );\nvoid putimage( int left, int top, void *bitmap, int op );\nvoid printimage(\n    const char* title=NULL, \n    double width_inches=7, double border_left_inches=0.75, double border_top_inches=0.75,\n    int left=0, int right=0, int right=INT_MAX, int bottom=INT_MAX,\n    bool active=true, HWND hwnd=NULL\n    );\nvoid readimagefile(\n    const char* filename=NULL,\n    int left=0, int top=0, int right=INT_MAX, int bottom=INT_MAX\n    );\nvoid writeimagefile(\n    const char* filename=NULL,\n    int left=0, int top=0, int right=INT_MAX, int bottom=INT_MAX,\n    bool active=true, HWND hwnd=NULL\n    );\n\n// Text Functions (text.cpp)\nvoid gettextsettings(struct textsettingstype *texttypeinfo);\nvoid outtext(char *textstring);\nvoid outtextxy(int x, int y, char *textstring);\nvoid settextjustify(int horiz, int vert);\nvoid settextstyle(int font, int direction, int charsize);\nvoid setusercharsize(int multx, int divx, int multy, int divy);\nint textheight(char *textstring);\nint textwidth(char *textstring);\nextern std::ostringstream bgiout;    \nvoid outstream(std::ostringstream&amp; out=bgiout);\nvoid outstreamxy(int x, int y, std::ostringstream&amp; out=bgiout);    \n\n// Mouse Functions (mouse.cpp)\nvoid clearmouseclick( int kind );\nvoid clearresizeevent( );\nvoid getmouseclick( int kind, int&amp; x, int&amp; y );\nbool ismouseclick( int kind );\nbool isresizeevent( );\nint mousex( );\nint mousey( );\nvoid registermousehandler( int kind, void h( int, int ) );\nvoid setmousequeuestatus( int kind, bool status=true );\n\n// Palette Functions\npalettetype *getdefaultpalette( );\nvoid getpalette( palettetype *palette );\nint getpalettesize( );\nvoid setallpalette( palettetype *palette );\nvoid setpalette( int colornum, int color );\nvoid setrgbpalette( int colornum, int red, int green, int blue );\n\n// Color Macros\n#define IS_BGI_COLOR(v)     ( ((v) &gt;= 0) &amp;&amp; ((v) &lt; 16) )\n#define IS_RGB_COLOR(v)     ( (v) &amp; 0x03000000 )\n#define RED_VALUE(v)        int(GetRValue( converttorgb(v) ))\n#define GREEN_VALUE(v)      int(GetGValue( converttorgb(v) ))\n#define BLUE_VALUE(v)       int(GetBValue( converttorgb(v) ))\n#undef COLOR\nint COLOR(int r, int g, int b); // No longer a macro\n\n#ifdef __cplusplus\n}\n#endif\n// ---------------------------------------------------------------------------\n\n#endif // WINBGI_H\n</code></pre>\n"}, {"tags": ["c", "performance", "optimization"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1483549752, "post_id": 41469467, "comment_id": 70144681, "body": "Hint: does <code>a</code> depend on <code>i</code> ?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1483549854, "post_id": 41469467, "comment_id": 70144761, "body": "A possible &quot;optimization&quot; would be to use boolean operators instead of bitwise ones. Otherwise no short circuiting can happen."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1483550011, "post_id": 41469467, "comment_id": 70144871, "body": "Indentation is almost correct now."}, {"owner": {"reputation": 13, "user_id": 7366369, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f7f2b7cdd8ba61e56d2ed5f084fb8994?s=128&d=identicon&r=PG&f=1", "display_name": "jaka mojster", "link": "https://stackoverflow.com/users/7366369/jaka-mojster"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1483550104, "post_id": 41469467, "comment_id": 70144927, "body": "@MichaelWalz No it doesn&#39;t. This means that I can take the first if statement outside of the loop right?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483550333, "post_id": 41469467, "comment_id": 70145055, "body": "There use to be times where <code>++i</code> was considered faster than <code>i++</code>."}, {"owner": {"reputation": 13, "user_id": 7366369, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f7f2b7cdd8ba61e56d2ed5f084fb8994?s=128&d=identicon&r=PG&f=1", "display_name": "jaka mojster", "link": "https://stackoverflow.com/users/7366369/jaka-mojster"}, "edited": false, "score": 0, "creation_date": 1483550403, "post_id": 41469467, "comment_id": 70145092, "body": "Would perhaps transforming &quot;for&quot; loop into another loop type be better?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483550506, "post_id": 41469467, "comment_id": 70145155, "body": "In fact none of all those conditions depend on the counter. So the decisions to be taken only need to be taken once, typically outside the loop."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1483550566, "post_id": 41469467, "comment_id": 70145193, "body": "@jakamojster <i>This means that I can take the first if statement outside of the loop right</i> : yes that&#39;s where you can optimize most, but that&#39;s not all."}, {"owner": {"reputation": 13, "user_id": 7366369, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f7f2b7cdd8ba61e56d2ed5f084fb8994?s=128&d=identicon&r=PG&f=1", "display_name": "jaka mojster", "link": "https://stackoverflow.com/users/7366369/jaka-mojster"}, "edited": false, "score": 0, "creation_date": 1483551195, "post_id": 41469467, "comment_id": 70145587, "body": "Regarding the last <code>if</code> statement if we create <code>if</code> that is checking the <code>condition2</code> and than in the sub <code>if</code> checking <code>COND1</code>and <code>COND2</code>, would that be faster?"}, {"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 2, "creation_date": 1483552159, "post_id": 41469467, "comment_id": 70146122, "body": "The first paragraph makes it sound like homework, and bad homework at that. This is terrible code, even if it&#39;s optimized."}, {"owner": {"reputation": 13, "user_id": 7366369, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f7f2b7cdd8ba61e56d2ed5f084fb8994?s=128&d=identicon&r=PG&f=1", "display_name": "jaka mojster", "link": "https://stackoverflow.com/users/7366369/jaka-mojster"}, "reply_to_user": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1483552433, "post_id": 41469467, "comment_id": 70146247, "body": "@MikeDunlavey It&#39;s not a homework, it is a example of a question we can get on exam. I didn&#39;t find any related information in lectures so I turned to all of you for help."}, {"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1483552920, "post_id": 41469467, "comment_id": 70146527, "body": "@jakamojster: Well, in the first place, nothing obviously depends on <i>i</i>, so why the loop? Is <i>b</i> an integer? <i>3.14/180</i> is <i>approximately</i> the conversion factor from degrees to radians. If <i>b</i> is an integer, why bother calling <i>sin</i>? What are <code>COND1</code> and <code>COND2</code>? What is <code>input_flag</code>? What is even the point of optimizing if nearly all the time is spent in <code>Do****Thing</code>? If I got this on an exam, I would tear it up."}, {"owner": {"reputation": 13, "user_id": 7366369, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f7f2b7cdd8ba61e56d2ed5f084fb8994?s=128&d=identicon&r=PG&f=1", "display_name": "jaka mojster", "link": "https://stackoverflow.com/users/7366369/jaka-mojster"}, "reply_to_user": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1483553302, "post_id": 41469467, "comment_id": 70146729, "body": "@MikeDunlavey I posted the whole text and code that was at this task... I also found it a bit wierd before I posted it here... I can&#39;t answer you the questions about <code>b</code>, <code>COND1</code> or <code>input_flag</code>, since I don&#39;t have any more data than what you can see above..."}, {"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1483553534, "post_id": 41469467, "comment_id": 70146820, "body": "@jakamojster: Who posted this nonsense for you? They need some flaming."}, {"owner": {"reputation": 13, "user_id": 7366369, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f7f2b7cdd8ba61e56d2ed5f084fb8994?s=128&d=identicon&r=PG&f=1", "display_name": "jaka mojster", "link": "https://stackoverflow.com/users/7366369/jaka-mojster"}, "reply_to_user": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1483553771, "post_id": 41469467, "comment_id": 70146956, "body": "@MikeDunlavey My professor and assistant. But I would rather not give any names..."}, {"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1483554185, "post_id": 41469467, "comment_id": 70147172, "body": "@jakamojster: Then pass along the comments to them. I was a professor. How anyone could give this to students is a mystery to me."}, {"owner": {"reputation": 13, "user_id": 7366369, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f7f2b7cdd8ba61e56d2ed5f084fb8994?s=128&d=identicon&r=PG&f=1", "display_name": "jaka mojster", "link": "https://stackoverflow.com/users/7366369/jaka-mojster"}, "reply_to_user": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1483554406, "post_id": 41469467, "comment_id": 70147299, "body": "@MikeDunlavey I will do that and even ask him some additional questions about this. But can you perhaps post an answer as efficient as it is possible from current data, so some other users can use it in the future as well?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7366369, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f7f2b7cdd8ba61e56d2ed5f084fb8994?s=128&d=identicon&r=PG&f=1", "display_name": "jaka mojster", "link": "https://stackoverflow.com/users/7366369/jaka-mojster"}, "edited": false, "score": 0, "creation_date": 1483954382, "post_id": 41510589, "comment_id": 70294149, "body": "You exaplained it really well. Now finally it all makes sense together. Thank you Cody."}], "tags": [], "owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "is_accepted": true, "score": 0, "last_activity_date": 1483722789, "last_edit_date": 1483722789, "creation_date": 1483722165, "answer_id": 41510589, "question_id": 41469467, "link": "https://stackoverflow.com/questions/41469467/optimization-of-the-following-block-of-code/41510589#41510589", "title": "Optimization of the following block of code", "body": "<p>Although most of these optimizations will be performed by an optimizing compiler for your automatically, it's still good to understand what the compiler is doing behind your back.<br>\nHere are a few possibilities:</p>\n\n<ol>\n<li><p><strong>Constant folding</strong></p>\n\n<p>The division of 3.14 by 180 involves two compile-time constants, so it can be computed in advance and only the result stored in the binary. This saves us computations at runtime, which speeds up the execution of the code.</p>\n\n<pre><code>3.14/180 = 0.0174444   // assume 64-bit precision, like a double\n</code></pre>\n\n<p>Thus, the code becomes:</p>\n\n<pre><code>for(i=0;i&lt;10000;i++) {    \n  if ( (t1==0) &amp;&amp; (t2==0) &amp;&amp; (t3==0) ) \n     a = sin(45*b*0.0174444);  \n  else  \n     a = sin(135*b*0.0174444);  \n\n  if ( condition2 &amp; COND1 ) \n     DoOneThing(a);\n  else if ( condition2 &amp; COND2 ) \n     DoAnotherThing(a); \n  else \n     DoYetAnotherThing(a); \n} \n</code></pre></li>\n<li><p><strong>Common subexpression elimination</strong></p>\n\n<p>Notice that, in the assignment to <code>a</code>, both sides of the <code>if</code> statement contain the same calculation. Whatever is the same regardless of the evaluation of the conditional can be hoisted out and done unconditionally. Thus:</p>\n\n<pre><code>if ( (t1==0) &amp;&amp; (t2==0) &amp;&amp; (t3==0) ) \n   a = sin(45*b*0.0174444);  \nelse  \n   a = sin(135*b*0.0174444);  \n</code></pre>\n\n<p>becomes:</p>\n\n<pre><code>a = b*0.0174444;\nif ( (t1==0) &amp;&amp; (t2==0) &amp;&amp; (t3==0) ) \n   a *= 45;  \nelse  \n   a *= 135; \na = sin(a); \n</code></pre>\n\n<p>This doesn't directly make the code execute more quickly, although it could conceivably reduce the <em>size</em> of the code (since the same thing won't be evaluated twice in two different places), and sometimes reductions in size can result in speed improvement (due to more optimal use of the cache, etc.).</p>\n\n<p>In fact, looking more carefully, we notice that <code>temp</code> is invariant across all iterations of the <code>for</code> loop, since <code>b</code> is not modified inside of the loop. This means it can be hoisted up even higher:</p>\n\n<pre><code> a = b*0.0174444;\n for(i=0;i&lt;10000;i++) {\n    if ( (t1==0) &amp;&amp; (t2==0) &amp;&amp; (t3==0) ) \n       a *= 45;  \n    else  \n       a *= 135; \n    a = sin(a); \n\n   // etc.\n } \n</code></pre>\n\n<p>This <em>will</em> result in a speed improvement, because now we don't need to compute <code>temp</code> 10000 times\u2014we just compute it once, store it, and reuse it each time through the loop.</p></li>\n<li><p><strong>Loop-invariant code promotion</strong></p>\n\n<p>We just got a taste of this optimization, but there's more that can be done. Looking at the <code>for</code> loop, you'll see that the only variable being modified is <code>i</code>. In the body of the loop, there are no expressions that depend on the value of <code>i</code>, which means that none of these results actually need to be computed inside of the loop. Thus, we can hoist them outside of the loop so that they are only done once, instead of repeated 10000 times.</p>\n\n<p>There is only one caveat: we don't know what the function calls (<code>DoOneThing</code>, <code>DoAnotherThing</code>, and <code>DoYetAnotherThing</code>) do internally, so we can't make any assumptions. (A compiler could, if the function's definitions were visible to it.) All we know is that they only depend on the value of <code>a</code>, so we just need to ensure that each function is called 10000 times.</p>\n\n<pre><code>  a = b*0.0174444;\n  if ( (t1==0) &amp;&amp; (t2==0) &amp;&amp; (t3==0) ) \n      a *= 45;  \n  else  \n      a *= 135;\n  a = sin(a);  \n\n  if ( condition2 &amp; COND1 )\n      for(i=0;i&lt;10000;i++)\n          DoOneThing(a);\n  else if ( condition2 &amp; COND2 ) \n      for(i=0;i&lt;10000;i++)\n          DoAnotherThing(a);\n  else \n      for(i=0;i&lt;10000;i++)\n          DoYetAnotherThing(a);\n</code></pre>\n\n<p>This will be (significantly) faster because we don't have to test the <code>if</code> conditions each time through the loop, or do any of the other calculations.</p></li>\n</ol>\n\n<p>There are certainly other optimizations possible, but these are the big ones that you are probably expected to see. As others have commented, this is pretty terrible code.</p>\n"}], "owner": {"reputation": 13, "user_id": 7366369, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f7f2b7cdd8ba61e56d2ed5f084fb8994?s=128&d=identicon&r=PG&f=1", "display_name": "jaka mojster", "link": "https://stackoverflow.com/users/7366369/jaka-mojster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 41510589, "answer_count": 1, "score": -4, "last_activity_date": 1483722789, "creation_date": 1483549506, "last_edit_date": 1483550658, "question_id": 41469467, "link": "https://stackoverflow.com/questions/41469467/optimization-of-the-following-block-of-code", "title": "Optimization of the following block of code", "body": "<p><em>Consider the following piece of C code. Describe three different optimizations (including their name) that may improve the performance, why they improve the performance, and how the code looks after the optimizations. Assume that all variables are declared and initiated/have some value before the code sequence.</em> </p>\n\n<pre><code> condition2 = condition1 | input_flag; \n\n for(i=0;i&lt;10000;i++){\n\n   if ( (t1==0) &amp;&amp; (t2==0) &amp;&amp; (t3==0) ) \n      a = sin(45\u2217b\u22173.14/180);  \n\n   else  \n      a = sin(135\u2217b\u22173.14/180);  \n\n   if ( condition2 &amp; COND1 ) \n      DoOneThing(a);\n\n   else if ( condition2 &amp; COND2 ) \n      DoAnotherThing(a); \n\n   else \n      DoYetAnotherThing(a); \n } \n</code></pre>\n\n<p>I have the following example of code in C. I am learning the methods of performance optimization, but I am quite new to it and don't know to optimize the following code... </p>\n\n<p>Perhaps one way would be to initialize <code>a</code> inside a loop. But I can't think of any other method to optimize it. </p>\n"}, {"tags": ["c++", "c", "gcc", "clang", "standards"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1483548034, "post_id": 41468934, "comment_id": 70143505, "body": "the document preceeding the final standard is fine"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1483548042, "post_id": 41468934, "comment_id": 70143515, "body": "They standard committee has to charge for the standard in a quirk of how standardization works.  They are working to make the actual standard free instead of having to charge it.  That said you can get by with the draft the was published right before the release of the standard.  That will be right 99.9% of the time.  Also, if you really want to get into the nitty gritty details paying for the standard is not really a big deal. It&#39;s about the cost of a good textbook."}, {"owner": {"reputation": 462, "user_id": 3965581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf90e390117a0232c11a80c862baae47?s=128&d=identicon&r=PG&f=1", "display_name": "PaulOnStackoverflow", "link": "https://stackoverflow.com/users/3965581/paulonstackoverflow"}, "edited": false, "score": 0, "creation_date": 1483548045, "post_id": 41468934, "comment_id": 70143519, "body": "I knew that question would get downvoted given the lack of info I found online - still, please answer my ignorance =)"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 3, "creation_date": 1483548124, "post_id": 41468934, "comment_id": 70143582, "body": "my reason for downvoting: <a href=\"https://www.google.hu/search?q=c+standard+stackoverflow\" rel=\"nofollow noreferrer\">google.hu/search?q=c+standard+stackoverflow</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1483548212, "post_id": 41468934, "comment_id": 70143646, "body": "This is half dupe, half lack of reading compiler documentation, and half off-topic rant about how everything should cost nothing to consume. Yes, three halves :D"}, {"owner": {"reputation": 462, "user_id": 3965581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf90e390117a0232c11a80c862baae47?s=128&d=identicon&r=PG&f=1", "display_name": "PaulOnStackoverflow", "link": "https://stackoverflow.com/users/3965581/paulonstackoverflow"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1483548228, "post_id": 41468934, "comment_id": 70143662, "body": "@NathanOliver, so they are working on making the standard ISO/IEC 9899:2011 public but currently can&#39;t due to &quot;politics&quot;? So the compilers do really implement exactly this standard?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1483548360, "post_id": 41468934, "comment_id": 70143742, "body": "@DimBimJim I doubt any compiler is 100% standard compliant but they try to be.  As far as what standard is implemented it is actually multiple.  It is controlled with compiler flags like <code>-std=c99</code> or <code>-std=c11</code> so you can compile the same code to different standards on the same compiler."}, {"owner": {"reputation": 462, "user_id": 3965581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf90e390117a0232c11a80c862baae47?s=128&d=identicon&r=PG&f=1", "display_name": "PaulOnStackoverflow", "link": "https://stackoverflow.com/users/3965581/paulonstackoverflow"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1483548372, "post_id": 41468934, "comment_id": 70143748, "body": "@KarolyHorvath, well thank you for giving me that google search, I obviously just guessed the price of the document right."}, {"owner": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "edited": false, "score": 0, "creation_date": 1483548384, "post_id": 41468934, "comment_id": 70143759, "body": "@DimBimJim The developers of &quot;large&quot; compilers and toolchains are probably willing to pay for access to the official document. It&#39;s not like it&#39;s hidden anyway -- it&#39;s just behind a paywall, like many scientific papers etc."}, {"owner": {"reputation": 462, "user_id": 3965581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf90e390117a0232c11a80c862baae47?s=128&d=identicon&r=PG&f=1", "display_name": "PaulOnStackoverflow", "link": "https://stackoverflow.com/users/3965581/paulonstackoverflow"}, "edited": false, "score": 0, "creation_date": 1483548642, "post_id": 41468934, "comment_id": 70143944, "body": "I&#39;m not rambling about software costing money, of course that&#39;s fine. It&#39;s rather that an &quot;Open&quot; software orientes on a &quot;closed&quot; document. Though I did really not know exactly in which stackexchange subcategory this was supposed to go."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483548695, "post_id": 41468934, "comment_id": 70143987, "body": "You get downvotes mostly for doing no research at all. The gcc as well as clang documentation are very clear about whihc standard they implement. And a simple search for &quot;c standard&quot; or &quot;c++ standard&quot; directly lead to the documents. If you don&#39;t want to pay for them is a secondary problem and can be solved by another simple search for the differences between the drafts and the standard."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483548875, "post_id": 41468934, "comment_id": 70144102, "body": "@DimBimJim: you should talk to your gouvernment. ISO and IEEE are financed by public funds. It is not the compiler which handle it wrong, but the standardisation organisations. It was fine years ago when there were effective costs for distribution, but now those are negligible - at least for online-publishing."}, {"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 0, "creation_date": 1483548896, "post_id": 41468934, "comment_id": 70144122, "body": "Open is not a synonym of free. The C standard is open in the sense that you can obtain a copy of the text and implement your own compiler. Can you find Delphi&#39;s specification and make your own Delphi IDE?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1483548929, "post_id": 41468934, "comment_id": 70144146, "body": "@NathanOliver: I believe the Final Committee Draft has to be character-by-character identical with the actual standard <i>apart</i> from some material at the front.  The National Bodies can either accept or reject the FCD - they don&#39;t get an opportunity to &quot;edit it just a bit&quot;."}, {"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483548956, "post_id": 41468934, "comment_id": 70144169, "body": "@Olaf This is a huge can of worms. Do we have time to discuss open access to all scientific paper publications too?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1483548995, "post_id": 41468934, "comment_id": 70144194, "body": "@MartinBonner If that is true that is good to know.  I though I had heard there could be some very small differences but it should not affect anything."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 1, "creation_date": 1483549096, "post_id": 41468934, "comment_id": 70144259, "body": "@giusti: It is and it is a political thing. There are countries which require publically financed information to be free. Not sure about you, but I think this is much better way to spend my taxes than financing weapons, and wars."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1483549103, "post_id": 41468934, "comment_id": 70144267, "body": "@NathanOliver Sorry.  What I said was true ... but the FCD is the one committee draft that is <i>not</i> open access - so you have to look at the draft before that (which will obviously be slightly different).   Bother."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1483549159, "post_id": 41468934, "comment_id": 70144305, "body": "@MartinBonner Okay.  So the most current draft is the draft right before the FCD and there can be different?"}, {"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483549228, "post_id": 41468934, "comment_id": 70144357, "body": "@Olaf I&#39;m very interested in that subject, actually, and I do agree with you. I find it absurd that I have to use government money to pay Springer/IEEE/etc to have the results of my government-funded projects published in a conference that was organized by a University with public money."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1483549254, "post_id": 41468934, "comment_id": 70144373, "body": "@NathanOliver: The difference bnetween the final draft and the standard document is just two constant macros related to the C version (iirc the draft uses something like a value of <code>201X</code>, while the standard uses <code>2011</code>. I think there is a corrigendum about those two changes for download (or there even are comments about the expected value int th draft). The other is similar. Both are irrelevant for 99,99% of all clode."}, {"owner": {"reputation": 462, "user_id": 3965581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf90e390117a0232c11a80c862baae47?s=128&d=identicon&r=PG&f=1", "display_name": "PaulOnStackoverflow", "link": "https://stackoverflow.com/users/3965581/paulonstackoverflow"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1483549517, "post_id": 41468934, "comment_id": 70144515, "body": "Again because I want to clarify: I see nothing wrong in making money with scientific papers/software etc. Just that I find it hard to believe that such a huge open-source software is build upon a document one has to pay 200CHF for. @NathanOliver, thank you, I knew about the standard flags. What would rather interest me is if the -std=c11 standard is based upon the &quot;free&quot; document linked in open-std.org or the ISO/IEC 9899:2011 one has to pay for or rather their slightly own adjusted standard."}, {"owner": {"reputation": 462, "user_id": 3965581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf90e390117a0232c11a80c862baae47?s=128&d=identicon&r=PG&f=1", "display_name": "PaulOnStackoverflow", "link": "https://stackoverflow.com/users/3965581/paulonstackoverflow"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483549658, "post_id": 41468934, "comment_id": 70144614, "body": "@Olaf, thank you about the note about the two different macros! I will now pressume that both compilers implement the ISO/IEC 9899:2011 paid standard."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1483549889, "post_id": 41468934, "comment_id": 70144788, "body": "@DimBimJim Honestly I do not think there is one document you could point to and say the compiler implements that standard.  As the standard evolves/is used all sorts of defects are found and changes are requested.  If it looks like that change is going to make it into the standard then a lot of compilers implement it even though it is not standard yet.  Most likely they are using the the actual standard but the latest draft would do you just as well."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483550021, "post_id": 41468934, "comment_id": 70144875, "body": "@DimBimJim: You confuse cause and effect. What do you expect a <b>C</b> compiler to implement if not what the <b>C</b> standard specifies? ANd why do you complain here? Afaik stack overflow is no way affiliated with IEEE, IEC, ISO etc. You should complain there."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1483550056, "post_id": 41468934, "comment_id": 70144900, "body": "@NathanOliver: Still there is only one standard."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483550476, "post_id": 41468934, "comment_id": 70145139, "body": "One for the way: There is only <b>one</b> C standard and one C++ standard. So there is no other <i>standard</i> to implement."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1483550578, "post_id": 41468934, "comment_id": 70145198, "body": "Despite assertions in these comments about government funding, both ISO and IEEE are private-sector organizations, funded by member dues and sales of standards documents."}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1483551241, "post_id": 41469172, "comment_id": 70145612, "body": "The question (now closed as a duplicate) asks about both C and C++. The situation happens to be similar for both."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1483548642, "creation_date": 1483548642, "answer_id": 41469172, "question_id": 41468934, "link": "https://stackoverflow.com/questions/41468934/where-is-actual-standard-for-open-source-c-compilers-gcc-clang-that-they-impl/41469172#41469172", "title": "Where is actual standard for open-source C compilers (gcc, clang) that they implement?", "body": "<p>See the following articles:</p>\n\n<p><a href=\"https://isocpp.org/std/the-standard\" rel=\"nofollow noreferrer\">The Standard</a></p>\n\n<blockquote>\n  <p>The current ISO C++ standard is officially known as ISO International Standard <strong>ISO/IEC 14882:2014(E)</strong> \u2013 Programming Language C++.</p>\n  \n  <p>...</p>\n  \n  <p>Q: Why are the C++ working drafts freely available on GitHub when the standard must be purchased from ISO or another standards organization?</p>\n  \n  <p>ISO holds the copyright for all balloted drafts of the standard, as well as the standard itself. The GitHub repo contains the incremental in-progress working source snapshots as they are edited, which are not the final standards.</p>\n  \n  <p>The only documents that the C++ committee is not permitted to provide freely are the final published standards. The draft repository on GitHub does not contain the final source for any published standards. It contains interim working materials only, and those differ in their contents from the published standards.</p>\n</blockquote>\n\n<p><a href=\"https://www.google.com/amp/s/herbsutter.com/2010/03/03/where-can-you-get-the-iso-c-standard-and-what-does-open-standard-mean/amp/\" rel=\"nofollow noreferrer\">Where can you get the ISO C++ standard, and what does \u201copen standard\u201d mean?</a>.</p>\n\n<blockquote>\n  <p>Today\u2019s question comes from someone who recently asked about why, if ISO C++ is an open standard, ISO charges for it and we can\u2019t just download it for free.</p>\n  \n  <p>The short answer is that people sometimes confuse \u201copen\u201d with \u201cfree.\u201d ISO standards aren\u2019t \u201copen\u201d like the O in FOSS, they\u2019re \u201copen\u201d like \u201cnot developed behind closed doors.\u201d Anyone who wants to pay for membership in their national body (if their country participates in ISO and in the specific project in question) is able to come join the fun. In free-as-in-beer terms, this means that experts are welcome to come to the ISO brewery at their own expense and volunteer their time to help brew the beer, and then when the beer is ready the customers still pay ISO to drink it (the helpers don\u2019t get a cut of that, only a free bottle for their personal use and the satisfaction of having brewed a mighty fine keg).</p>\n  \n  <p>...</p>\n  \n  <blockquote>\n    <p>ISO C++ claims to be an OPEN STANDARD. Where can I download the OPEN STANDARD for ISO C++.</p>\n  </blockquote>\n  \n  <p>All published ISO standards are available for sale from the ISO store, via <a href=\"http://iso.org\" rel=\"nofollow noreferrer\">http://iso.org</a>. </p>\n</blockquote>\n\n<p>So, while the official standard is <em>public</em>, the final release is not <em>free</em>, only the working drafts and other intermediate papers are. You have to pay to access the final standard (unless you find a bootleg copy).</p>\n"}], "owner": {"reputation": 462, "user_id": 3965581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf90e390117a0232c11a80c862baae47?s=128&d=identicon&r=PG&f=1", "display_name": "PaulOnStackoverflow", "link": "https://stackoverflow.com/users/3965581/paulonstackoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "closed_date": 1483548163, "answer_count": 1, "score": 0, "last_activity_date": 1483548642, "creation_date": 1483547851, "question_id": 41468934, "link": "https://stackoverflow.com/questions/41468934/where-is-actual-standard-for-open-source-c-compilers-gcc-clang-that-they-impl", "closed_reason": "Duplicate", "title": "Where is actual standard for open-source C compilers (gcc, clang) that they implement?", "body": "<p>I wanted to learn more about C and instead of getting a rehash in form of a book about C, I wanted to read the \"Standard that compilers are actually implementing\". This seems to be ISO/IEC 9899:2011 Document, currently available on their website for 198 CHF. </p>\n\n<p>This bothered me, as after a quick search I realized that the \"C11\" standard seems to be not publicly available. Open-std.org lists only <a href=\"http://open-std.org/JTC1/SC22/WG14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">this document</a> as \"...reflects what was to become the standard at the time of issue.\", but not the actual standard. </p>\n\n<p>Now my question: </p>\n\n<ul>\n<li>Which Standard exactly are the open-source compilers (especially clang and gcc) implementing? </li>\n<li>Where can I find this standard?</li>\n</ul>\n\n<p>And in case open-source compilers implement a standard that is not publicly available:</p>\n\n<ul>\n<li>Why exactly is a open-source compiler implementing a non-public standard? Does that not greatly prevent people from contributing code or fully understanding the code, which I think is the purpose of open-source. Given all the hours spend on coding and then giving away the code, surely some hours can be spend on writing a standard instead of code.</li>\n</ul>\n"}, {"tags": ["c", "interface", "header", "function-prototypes", "c-header"], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 778374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bfe45f0f660d76702e41fc3e24b690c7?s=128&d=identicon&r=PG", "display_name": "Octan", "link": "https://stackoverflow.com/users/778374/octan"}, "edited": false, "score": 0, "creation_date": 1483592891, "post_id": 41468511, "comment_id": 70160869, "body": "I was hoping to avoid having so many header files but I think this is the only solution we can find in C. Thank you."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 194, "user_id": 778374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bfe45f0f660d76702e41fc3e24b690c7?s=128&d=identicon&r=PG", "display_name": "Octan", "link": "https://stackoverflow.com/users/778374/octan"}, "edited": false, "score": 1, "creation_date": 1483602587, "post_id": 41468511, "comment_id": 70164742, "body": "@Octan: You are welcome. Please see my additional footnote."}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 2, "last_activity_date": 1483607516, "last_edit_date": 1483607516, "creation_date": 1483546672, "answer_id": 41468511, "question_id": 41468429, "link": "https://stackoverflow.com/questions/41468429/how-to-make-a-function-visible-through-a-header-file-in-c/41468511#41468511", "title": "How to make a function visible through a header file in C", "body": "<p>Separate function prototypes into different headers, depending on whether they should be \"visible\"<sup>*1</sup> or not (but be \"internal\").</p>\n\n<ul>\n<li><code>header1_internal.h</code></li>\n<li><code>header1.h</code></li>\n<li><code>header2_internal.h</code></li>\n<li><code>header2.h</code></li>\n<li>...</li>\n</ul>\n\n<p>Include into the <code>*_internal.h</code> headers the related <code>*.h</code> header.</p>\n\n<p>Include the <code>*_internal.h</code> headers into your lib's related modules.</p>\n\n<p>Do not include any <code>*_internal.h</code> into <code>mylib.h</code>.</p>\n\n<hr>\n\n<p><sup>*1: Please note that even when not providing a prototype this way the user might very well craft his/her own prototype and then link the function from <code>mylib</code>. So the functions not prototyped aren't unaccessible.</sup></p>\n"}, {"tags": [], "owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "is_accepted": false, "score": 0, "last_activity_date": 1483546844, "creation_date": 1483546844, "answer_id": 41468582, "question_id": 41468429, "link": "https://stackoverflow.com/questions/41468429/how-to-make-a-function-visible-through-a-header-file-in-c/41468582#41468582", "title": "How to make a function visible through a header file in C", "body": "<p>If <code>void b(void)</code> is not needed by other header file, and you have access to the source file, what about moving the declaration into the source file?</p>\n\n<pre><code>// header1.h\nvoid a(void);\n//void b(void);\n\n// header1.c\n/* some #include here */\nvoid b(void);\n/* other code here */\nvoid b(void) {\n    /* implement it */\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 6398581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y3HT3.jpg?s=128&g=1", "display_name": "Smit Patel", "link": "https://stackoverflow.com/users/6398581/smit-patel"}, "edited": false, "score": 0, "creation_date": 1483550654, "post_id": 41469580, "comment_id": 70145237, "body": "Above mentioned videos contains everything you should know to use header files successfully."}], "tags": [], "owner": {"reputation": 51, "user_id": 6398581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y3HT3.jpg?s=128&g=1", "display_name": "Smit Patel", "link": "https://stackoverflow.com/users/6398581/smit-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1483549938, "creation_date": 1483549938, "answer_id": 41469580, "question_id": 41468429, "link": "https://stackoverflow.com/questions/41468429/how-to-make-a-function-visible-through-a-header-file-in-c/41469580#41469580", "title": "How to make a function visible through a header file in C", "body": "<p>Header files only contains functions that should be accessible by user of header. They represent public interface.</p>\n\n<p>Watch this first:\n<a href=\"http://nptel.ac.in/courses/106104128/53\" rel=\"nofollow noreferrer\">Organizing code into multiple files 1</a>\nYouTube link: <a href=\"https://youtu.be/mnPbAtFhjgk\" rel=\"nofollow noreferrer\">Organizing code into multiple files 1</a></p>\n\n<p><a href=\"http://nptel.ac.in/courses/106104128/54\" rel=\"nofollow noreferrer\">Organizing code into multiple files 2</a>\nyouTube link: <a href=\"https://youtu.be/wOvVQXYuBvk\" rel=\"nofollow noreferrer\">Organizing code into multiple files 2</a></p>\n\n<p>Additionally you can refer <a href=\"https://tfetimes.com/wp-content/uploads/2015/09/An_Introduction_to_GCC-Brian_Gough.pdf\" rel=\"nofollow noreferrer\">Introduction To GCC by Brian Gough</a> to get more insights into compilation and linking process using gcc.</p>\n"}], "owner": {"reputation": 194, "user_id": 778374, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bfe45f0f660d76702e41fc3e24b690c7?s=128&d=identicon&r=PG", "display_name": "Octan", "link": "https://stackoverflow.com/users/778374/octan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 906, "favorite_count": 1, "accepted_answer_id": 41468511, "answer_count": 3, "score": 0, "last_activity_date": 1483607516, "creation_date": 1483546402, "last_edit_date": 1483547976, "question_id": 41468429, "link": "https://stackoverflow.com/questions/41468429/how-to-make-a-function-visible-through-a-header-file-in-c", "title": "How to make a function visible through a header file in C", "body": "<p>I have several header files in a library: <code>header1.h</code>, <code>header2.h</code>...\nI also have a general header file for the library: <code>mylib.h</code></p>\n\n<p>I want the user to import the <code>main.h</code> file and get access to <b>only some of the functions</b> in the other header files.</p>\n\n<p>For example, in the library:</p>\n\n<pre><code>// header1.h\nvoid a(void);\nvoid b(void);\n</code></pre>\n\n<p>-</p>\n\n<pre><code>// mylib.h\n\n// I can't use this:\n#include \"header1.h\"\n// because it would make b function visible.\n\n// Link to function a ????????\n</code></pre>\n\n<p>And in my main program:</p>\n\n<pre><code>// main.c\n#include \"mylib.h\"\n\nint main(void) {\n\n    a(); // Visible: no problem\n    b(); // Not visible: error\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "segmentation-fault", "printf"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 6, "creation_date": 1483545918, "post_id": 41468223, "comment_id": 70141910, "body": "you&#39;re not allocating any space for <code>int *a</code>. Dereferencing an unintialized pointer (your <code>*a = N;</code> line) is undefined behavior"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1483546038, "post_id": 41468223, "comment_id": 70141983, "body": "Have you tried compiling with all warnings enabled: one of those warnings will tell you the cause of your segfault."}, {"owner": {"reputation": 2966, "user_id": 3022310, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f10ec2b45320ee843e539d705c31d08?s=128&d=identicon&r=PG", "display_name": "turbulencetoo", "link": "https://stackoverflow.com/users/3022310/turbulencetoo"}, "edited": false, "score": 0, "creation_date": 1483546044, "post_id": 41468223, "comment_id": 70141989, "body": "To clarify a little further, you have an <code>int *</code> called <code>a</code> that basically points <i>nowhere</i>. When you do <code>*a = N;</code>, you&#39;re telling the computer to go to that <i>nowhere</i> location, and write down the contents of <code>N</code> at that spot. This is what is causing the segfault."}, {"owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "edited": false, "score": 2, "creation_date": 1483546112, "post_id": 41468223, "comment_id": 70142043, "body": "- so instead of dereferencing a and going to nowhere, you should assign a the address of N, or a = &amp;N; Then you can dereference a later to get the value of N."}, {"owner": {"reputation": 3691, "user_id": 1808989, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3884a2f2ee43a4681967493905dcc20c?s=128&d=identicon&r=PG", "display_name": "Andrew Sun", "link": "https://stackoverflow.com/users/1808989/andrew-sun"}, "reply_to_user": {"reputation": 2966, "user_id": 3022310, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f10ec2b45320ee843e539d705c31d08?s=128&d=identicon&r=PG", "display_name": "turbulencetoo", "link": "https://stackoverflow.com/users/3022310/turbulencetoo"}, "edited": false, "score": 0, "creation_date": 1483547083, "post_id": 41468223, "comment_id": 70142782, "body": "@turbulencetoo Strictly speaking, <code>a</code> doesn&#39;t point <i>nowhere</i>, it points <i>somewhere</i>. The problem is that you have no idea where <i>somewhere</i> is. It might even be a valid pointer, causing you to accidentally overwrite some other important value in memory."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 7375077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a85eaba9a87adfcd6340bb926c85b184?s=128&d=identicon&r=PG&f=1", "display_name": "user7375077", "link": "https://stackoverflow.com/users/7375077/user7375077"}, "edited": false, "score": 0, "creation_date": 1483554072, "post_id": 41468504, "comment_id": 70147115, "body": "I got it,but why did it run properly after commenting out the first printf?"}, {"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "reply_to_user": {"reputation": 83, "user_id": 7375077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a85eaba9a87adfcd6340bb926c85b184?s=128&d=identicon&r=PG&f=1", "display_name": "user7375077", "link": "https://stackoverflow.com/users/7375077/user7375077"}, "edited": false, "score": 0, "creation_date": 1483557775, "post_id": 41468504, "comment_id": 70149149, "body": "@user7375077: You may want to inspect the generated assembly for that to figure out what the compiled code actually did and what are the differences between the two cases. <code>*a = N</code> for uninitialized <code>a</code> is <i>undefined behavior</i>: everything can happen."}], "tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": true, "score": 2, "last_activity_date": 1483546655, "creation_date": 1483546655, "answer_id": 41468504, "question_id": 41468223, "link": "https://stackoverflow.com/questions/41468223/c-segmentation-fault-after-adding-a-printf-function-works-fine-after-commenting/41468504#41468504", "title": "C Segmentation fault after adding a printf function. Works fine after commenting out", "body": "<p>Inside your <code>main</code> function, you defined the <code>int *a</code> pointer variable:</p>\n\n<blockquote>\n<pre><code>int main(){\n  int N, i, Planet, *a,junk;\n</code></pre>\n</blockquote>\n\n<p>But then you dereferenced the pointer without having previously allocated any memory for it, nor setting it to point to something meaningful:</p>\n\n<blockquote>\n<pre><code> *a = N;\n</code></pre>\n</blockquote>\n\n<p>This results in undefined behavior.</p>\n\n<p>What you probably wanted is to make <code>a</code> point to <code>N</code>?\nIf so, this is the correct syntax:</p>\n\n<pre><code>a = &amp;N;\n</code></pre>\n\n<p>Now you can use <code>*a</code> to write some content into <code>N</code>.</p>\n\n<hr>\n\n<p><strong>P.S.</strong>\nAs a general rule, I'd suggest you to declare one variable per line, and initialize pointers to <code>NULL</code>, e.g.:</p>\n\n<pre><code>int man() {\n  int *a = NULL;\n  ...\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 7375077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a85eaba9a87adfcd6340bb926c85b184?s=128&d=identicon&r=PG&f=1", "display_name": "user7375077", "link": "https://stackoverflow.com/users/7375077/user7375077"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 41468504, "answer_count": 1, "score": 2, "last_activity_date": 1483546739, "creation_date": 1483545827, "last_edit_date": 1483546739, "question_id": 41468223, "link": "https://stackoverflow.com/questions/41468223/c-segmentation-fault-after-adding-a-printf-function-works-fine-after-commenting", "title": "C Segmentation fault after adding a printf function. Works fine after commenting out", "body": "<p>I get segmentation fault after executing this part of code.If i comment the first printf out,it works fine.Why does this happen?    </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint Func (int *a){\n    printf(\"%d\\n\",56 );\n  printf(\"a is %d\\n\",*a );\n  return 3;\n}\n\n\nint main(){\n  int N, i, Planet, *a,junk;\n\n    junk=scanf(\"%d\", &amp;N );\n    *a = N;\n    Planet = Func(a);\n    printf(\"%d\\n\", Planet);\n    return 0 ;\n}\n</code></pre>\n"}, {"tags": ["c", "malloc"], "answers": [{"comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 7, "creation_date": 1483545524, "post_id": 41468022, "comment_id": 70141633, "body": "It may or may not allocate any memory in the stack for pointer <code>*a</code> depending on how the compiler works.  If you use <code>&amp;a</code> anywhere, yes, but otherwise all bets are off."}, {"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1483545681, "post_id": 41468022, "comment_id": 70141741, "body": "Thanks. I&#39;ll ammend my answer."}, {"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1483546222, "post_id": 41468022, "comment_id": 70142128, "body": "@DietrichEpp Reading again, I may have misunderstood your comment. Could you give me a concrete example?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1483546349, "post_id": 41468022, "comment_id": 70142214, "body": "@DietrichEpp: How is allocation for <code>a</code> handled differently from <code>b</code> in terms of <i>where</i> the memory is allocated?"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 4, "creation_date": 1483546609, "post_id": 41468022, "comment_id": 70142412, "body": "@giusti: The variable can be optimized out, for one thing."}, {"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 3, "creation_date": 1483546841, "post_id": 41468022, "comment_id": 70142607, "body": "But that would be true for any variable. Is there anything special about pointers that make allocation any different if you don&#39;t take the pointer&#39;s address?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1488849470, "post_id": 41468022, "comment_id": 72404610, "body": "@DietrichEpp &quot;pointer <code>*a</code>&quot; &lt;- <code>*a</code> is not a pointer - you mean &quot;pointer <code>a</code>&quot;"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1488852068, "post_id": 41468022, "comment_id": 72405286, "body": "@immibis: <code>*a</code> is how it&#39;s declared.  I don&#39;t think the wording is confusing."}], "tags": [], "owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "is_accepted": true, "score": 21, "last_activity_date": 1503595052, "last_edit_date": 1503595052, "creation_date": 1483545269, "answer_id": 41468022, "question_id": 41467933, "link": "https://stackoverflow.com/questions/41467933/how-much-memory-does-int-x10-allocate/41468022#41468022", "title": "How much memory does int x[10] allocate?", "body": "<p>Simply put:</p>\n\n<pre><code>int *a = malloc( 10 * sizeof(int) );\n</code></pre>\n\n<p>Allocates at least <code>sizeof(int*)</code> bytes of automatic storage for the pointer <code>*a</code>. When <code>malloc</code> is called, this will allocate at least <code>sizeof(int) * 10</code> bytes of dynamic storage for your program.</p>\n\n<p>On the other hand:</p>\n\n<pre><code>int b[10];\n</code></pre>\n\n<p>Allocates at least <code>sizeof(int) * 10</code> bytes of automatic storage. There are no pointers here. When you use the name <code>b</code> in an expression (example: <code>a = b</code>), it decays into a pointer. But <code>a</code> is a pointer and <code>b</code> is an array. Check this on C FAQ: <a href=\"http://c-faq.com/aryptr/index.html\" rel=\"nofollow noreferrer\">C-FAQ Sec. 6: arrays and pointers</a>.</p>\n\n<p>In the most usual case, \"automatic storage\" means the \"stack\", and \"dynamic storage\" means the \"heap\". But that's not always true. You may want to read a bit of discussions about this terms in this question: <a href=\"https://stackoverflow.com/questions/9181782/why-are-the-terms-automatic-and-dynamic-preferred-over-the-terms-stack-and\">\"Why are the terms \u201cautomatic\u201d and \u201cdynamic\u201d preferred over the terms \u201cstack\u201d and \u201cheap\u201d in C++ memory management?\"</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 8, "last_activity_date": 1483545721, "last_edit_date": 1483545721, "creation_date": 1483545405, "answer_id": 41468074, "question_id": 41467933, "link": "https://stackoverflow.com/questions/41467933/how-much-memory-does-int-x10-allocate/41468074#41468074", "title": "How much memory does int x[10] allocate?", "body": "<p>In the first case, <code>a</code> itself occupies <code>sizeof(int *)</code> bytes of automatic storage, and that points to <code>10 * sizeof(int)</code> bytes of dynamic storage.</p>\n\n<p>In the latter case, <code>b</code> occupies <code>10 * sizeof(int)</code> bytes of automatic storage.  Because <code>b</code> is an array, there is no pointer.</p>\n\n<p>So the first case uses more total bytes, but less on the stack (assuming a stack is in use for automatic storage).</p>\n\n<p>If the total number of bytes being used is relatively small, automatic storage is typically fine.  For larger amounts, dynamic storage is preferred.  For stack implementations in particular, having too many automatic variables that are too large can overflow the stack.</p>\n"}], "owner": {"reputation": 821, "user_id": 2688650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6813d00237a6e7fe4878ea6ed4dc166e?s=128&d=identicon&r=PG&f=1", "display_name": "Supernormal", "link": "https://stackoverflow.com/users/2688650/supernormal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3306, "favorite_count": 1, "accepted_answer_id": 41468022, "answer_count": 2, "score": 19, "last_activity_date": 1503595052, "creation_date": 1483545049, "question_id": 41467933, "link": "https://stackoverflow.com/questions/41467933/how-much-memory-does-int-x10-allocate", "title": "How much memory does int x[10] allocate?", "body": "<p>Is there any difference in the memory usage of these two code lines?</p>\n\n<pre><code>int *a = malloc( 10 * sizeof(int) );\nint b[10];\n</code></pre>\n\n<p>The first line should allocate memory for 10 ints and 1 pointer. But I'm not sure about the second. Will that also allocate memory for 10 ints and 1 pointer, or just 10 ints?</p>\n"}, {"tags": ["c", "pointers", "c-preprocessor", "typedef"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1483544771, "post_id": 41467792, "comment_id": 70141094, "body": "The typedef line doesn&#39;t compile. Please do not present uncompilable code."}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1483544860, "post_id": 41467792, "comment_id": 70141171, "body": "<code>costant * c = &amp;a[0];</code> would work (assuming a fixed typedef) -- because a[0] is a <code>const int</code> but <code>c</code> is a <code>pointer to a const int</code>"}, {"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 0, "creation_date": 1483545048, "post_id": 41467792, "comment_id": 70141296, "body": "This code <b>does not</b> work fine."}, {"owner": {"reputation": 39, "user_id": 4714241, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jF6N_YjkLKo/AAAAAAAAAAI/AAAAAAAAAcM/6FGN_OXat7s/photo.jpg?sz=128", "display_name": "Matteo Furlan", "link": "https://stackoverflow.com/users/4714241/matteo-furlan"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1483546177, "post_id": 41467792, "comment_id": 70142092, "body": "@JonathanLeffler Sorry, I corrected the typedef line. It does compile now"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4714241, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jF6N_YjkLKo/AAAAAAAAAAI/AAAAAAAAAcM/6FGN_OXat7s/photo.jpg?sz=128", "display_name": "Matteo Furlan", "link": "https://stackoverflow.com/users/4714241/matteo-furlan"}, "edited": false, "score": 1, "creation_date": 1483546214, "post_id": 41467879, "comment_id": 70142123, "body": "You are right, I corrected the mistake (I just copied wrongly from my editor in another pc)"}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1483544878, "creation_date": 1483544878, "answer_id": 41467879, "question_id": 41467792, "link": "https://stackoverflow.com/questions/41467792/defined-type-not-recognised-by-pointer-initialization/41467879#41467879", "title": "Defined type not recognised by pointer initialization", "body": "<p>Unlike <code>#define</code>, which has the syntax <code>#define NEW_SYMBOL [old_symbol]</code>, the syntax of <code>typedef</code> is:</p>\n\n<pre><code>typedef existing_type new_type;\n</code></pre>\n\n<p>So:</p>\n\n<pre><code>typedef const int constant;\n</code></pre>\n\n<p>Is valid C, whereas</p>\n\n<pre><code>typedef constant const int;\n</code></pre>\n\n<p>Is not.</p>\n"}], "owner": {"reputation": 39, "user_id": 4714241, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jF6N_YjkLKo/AAAAAAAAAAI/AAAAAAAAAcM/6FGN_OXat7s/photo.jpg?sz=128", "display_name": "Matteo Furlan", "link": "https://stackoverflow.com/users/4714241/matteo-furlan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1483544945, "answer_count": 1, "score": 0, "last_activity_date": 1483546107, "creation_date": 1483544649, "last_edit_date": 1483546107, "question_id": 41467792, "link": "https://stackoverflow.com/questions/41467792/defined-type-not-recognised-by-pointer-initialization", "closed_reason": "Duplicate", "title": "Defined type not recognised by pointer initialization", "body": "<p>Trying to define a user-type I stumbled upon an error I don't quite understand: the following code works fine</p>\n\n<pre><code>const int a[5] = { 1, 2, 3, 4, 5 };\n\ntypedef const int costant;\n\ncostant b = 5;\ncostant *c = a;\n\nvoid func( const int item )\n{\n    printf(\"Item: %i\\n\", item );\n}\n\nint main( void )\n{\n    func( a[0] );\n    func( b );\n    func( *c );\n}\n</code></pre>\n\n<p>Nonethe less, initializing the pointer</p>\n\n<pre><code>costant *c = a[0];\n</code></pre>\n\n<p>fails stating that <code>Initializer element is not costant</code>. Trying to access the location <code>a[0]</code> to alter its content is refused with error <code>assignment of read-only location</code>.</p>\n\n<p>Why is considered the array address <code>a</code> as const but not its element <code>a[0]</code>, even though it is \"read-only\"?</p>\n\n<p>Replacing the <code>typedef</code> with a <code>#define costant const int</code> doesn't change the behaviour.</p>\n"}, {"tags": ["c", "string", "pointers", "char"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1483544652, "post_id": 41467762, "comment_id": 70141009, "body": "A pointer is not an array; an array is not a pointer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483548979, "post_id": 41467762, "comment_id": 70144188, "body": "Why compiler did you use that did not provide a warning about <code>char** stringArr = {&quot;ab&quot;, &quot;abc&quot;, &quot;abcd&quot;};</code>?"}, {"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1483556148, "post_id": 41467762, "comment_id": 70148210, "body": "mingw. See them now. Why shouldn&#39;t it be a compiler error rather than warnings?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1483609508, "post_id": 41467762, "comment_id": 70168452, "body": "the posted code does not compile.  When compiling, always enable all the warnings, then fix those warnings.  (for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -pendantic</code>  I also use: <code>-Wconversion -std=gnu99</code> )  warning: unused paramater: <code>strsSize</code> can be fixed by inserting the statement  <code>(void)strsSize;</code>.  and the declaration of the <code>strArray</code> is not correct."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 5, "last_activity_date": 1483545126, "last_edit_date": 1483545126, "creation_date": 1483544728, "answer_id": 41467828, "question_id": 41467762, "link": "https://stackoverflow.com/questions/41467762/de-referencing-char-pointer-run-time-error/41467828#41467828", "title": "De-referencing char pointer run-time error", "body": "<p>The initializer for <code>stringArr</code> is not valid.  You have a pointer to a pointer, not an array.  A pointer cannot be initialized with the <code>{}</code> syntax.</p>\n\n<p>When compiling with <code>-Wall -Wextra</code>, the following warnings are produced:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/tmp/x1.c: In function \u2018main\u2019:\n/tmp/x1.c:15: warning: initialization from incompatible pointer type\n/tmp/x1.c:15: warning: excess elements in scalar initializer\n/tmp/x1.c:15: warning: (near initialization for \u2018stringArr\u2019)\n/tmp/x1.c:15: warning: excess elements in scalar initializer\n/tmp/x1.c:15: warning: (near initialization for \u2018stringArr\u2019)\n</code></pre>\n\n<p>The commented out declaration you have is the correct one.</p>\n\n<p>Both declarations are valid to be passed to <code>GetString</code> because an array decays into a pointer to the first element when passed to a function.  However, a pointer and an array are not the same thing.</p>\n"}], "owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 41467828, "answer_count": 1, "score": 2, "last_activity_date": 1483545126, "creation_date": 1483544553, "question_id": 41467762, "link": "https://stackoverflow.com/questions/41467762/de-referencing-char-pointer-run-time-error", "title": "De-referencing char pointer run-time error", "body": "<p>Why does the below code cause a run-time crash? </p>\n\n<p>The code itself is not very useful, but , by creating a pointer to a char pointer and pointing to string literals in main, passing this pointer to my function and trying to read the strings causes problems. Why is that exactly?</p>\n\n<p>By creating an array of strings instead in main however (commented out) , there are no problems in passing and reading the strings. Thanks in advance for your knowledge.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar* GetString(char** strs, int strsSize);\n\nchar* GetString(char** strs, int strsSize)\n{\n    return *strs;\n}\n\nint main()\n{\n\n    char** stringArr = {\"ab\", \"abc\", \"abcd\"};\n    //char* stringArr [] = {\"ab\", \"abc\", \"abcd\"};\n\n    char* resultStr;\n    resultStr = GetString(stringArr, 3);\n\n    printf(\"%s\\n\", resultStr);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483544579, "post_id": 41467442, "comment_id": 70140959, "body": "&quot;<i>wuite</i>&quot; err, what please?"}, {"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 0, "creation_date": 1483544654, "post_id": 41467442, "comment_id": 70141012, "body": "Please post the definition of at least one of those <code>gpio_</code>* macros. And please explain a bit better what changes when you from from 4x4 to 3x4. Currently, I can&#39;t understand how an <code>#ifdef</code>, practical or not, isn&#39;t your only alternative to rewriting everything."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1483544706, "post_id": 41467442, "comment_id": 70141056, "body": "I guess he doesn&#39;t want to skipp all gpio* calls but only those for pins that are not used. Like the missing ROW_4 with his changed matrix."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1483544764, "post_id": 41467442, "comment_id": 70141090, "body": "Why is #ifdef not practical? It strongly depends where you put it."}], "answers": [{"comments": [{"owner": {"reputation": 875, "user_id": 1797147, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f598bc6686fc6fc7757b81c323d8d7da?s=128&d=identicon&r=PG", "display_name": "user1797147", "link": "https://stackoverflow.com/users/1797147/user1797147"}, "edited": false, "score": 0, "creation_date": 1483544317, "post_id": 41467579, "comment_id": 70140763, "body": "Thank you both for comments, but #ifdef is not practical, see edit post"}, {"owner": {"reputation": 521, "user_id": 7066323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/idq50.jpg?s=128&g=1", "display_name": "Luiz Menezes", "link": "https://stackoverflow.com/users/7066323/luiz-menezes"}, "reply_to_user": {"reputation": 875, "user_id": 1797147, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f598bc6686fc6fc7757b81c323d8d7da?s=128&d=identicon&r=PG", "display_name": "user1797147", "link": "https://stackoverflow.com/users/1797147/user1797147"}, "edited": false, "score": 0, "creation_date": 1483544496, "post_id": 41467579, "comment_id": 70140893, "body": "Let me see if I got this straight... you want that gpio_high and gpio_low or a macro that wrap those functions know wheter led is defined or not, and if not send a Nop()?  See edit answer"}], "tags": [], "owner": {"reputation": 521, "user_id": 7066323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/idq50.jpg?s=128&g=1", "display_name": "Luiz Menezes", "link": "https://stackoverflow.com/users/7066323/luiz-menezes"}, "is_accepted": false, "score": 1, "last_activity_date": 1483544644, "last_edit_date": 1483544644, "creation_date": 1483544070, "answer_id": 41467579, "question_id": 41467442, "link": "https://stackoverflow.com/questions/41467442/c-macro-check-parameter-and-replace-by-nop/41467579#41467579", "title": "c macro, check parameter and replace by nop", "body": "<p>Try this in any .h file that you are sure that will be included where LED are used...</p>\n\n<pre><code>#ifndef LED\n#define GPIO_MAKE_ANALOG Nop()\n#define GPIO_HIGH(A, B) Nop()\n#define GPIO_LOW(A, B) Nop()\n#endif\n\n#ifdef LED\n#define GPIO_MAKE_ANALOG gpio_make_analog(A, B)\n#define GPIO_HIGH(A, B) gpio_high(A, B)\n#define GPIO_LOW(A, B) gpio_low(A, B)\n#endif\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1483544244, "post_id": 41467625, "comment_id": 70140716, "body": "typo: you spelled <code>USE_GPIO</code> differently in the two instances."}], "tags": [], "owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "is_accepted": false, "score": 0, "last_activity_date": 1483544276, "last_edit_date": 1483544276, "creation_date": 1483544217, "answer_id": 41467625, "question_id": 41467442, "link": "https://stackoverflow.com/questions/41467442/c-macro-check-parameter-and-replace-by-nop/41467625#41467625", "title": "c macro, check parameter and replace by nop", "body": "<p>You could wrap your macro calls with a <code>USE_GPIO</code> define. </p>\n\n<pre><code>#ifdef USE_GPIO\n#  define LED  B,2\n#endif\n\n#ifdef USE_GPIO\n#  gpio_make_amalog(LED) \n#  gpio_high(LED)\n#  gpio_low(LED)\n#endif\n</code></pre>\n\n<p>Then you define this macro in your main file, <strong>before</strong> you include your header file. This is a feature test macro.</p>\n\n<p>Notice, however, that if you are doing modular compilation and this code is in a <code>.c</code> file, you will need to specify  the flag in the command line with the <code>-D</code> option (assuming GCC).</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1483546003, "last_edit_date": 1483546003, "creation_date": 1483545678, "answer_id": 41468165, "question_id": 41467442, "link": "https://stackoverflow.com/questions/41467442/c-macro-check-parameter-and-replace-by-nop/41468165#41468165", "title": "c macro, check parameter and replace by nop", "body": "<blockquote>\n  <p>The question is, there is a possibility to test a macro parameter inside that macro, so if LED is not defined, a Nop() to be inserted.</p>\n</blockquote>\n\n<p>There are all sorts of fun games you can play with macro expansion, but there are no <em>bona fide</em> conditionals.  All your strictly macro-based alternatives revolve around macros expanding differently under different circumstances.  It might be possible to use such tricks to achieve your objective, but even evaluating how feasible that is would require knowing a lot more about the values your macros can be defined to take.</p>\n\n<p>You should consider different approaches.  For example, you reject making your macro <em>definitions</em> conditional on the definedness of <code>LED</code>, etc., but I see no barrier to making your macro <em>uses</em> conditional on the definedness of the macros used in their invocations.  That is, instead of your current practice of commenting out macro invocations you don't want, just wrap each of those in appropriate conditional compilation directives once and for all:</p>\n\n<pre><code>#ifdef LED\ngpio_make_amalog(LED);\n#endif\n\n#ifdef COL1_ROW_4\nif (gpio(COL1_ROW_4)) {\n    // ...\n} \n#endif\n</code></pre>\n\n<p>... or even ...</p>\n\n<pre><code>if (\n#ifdef COL2_ROW_2\n    gpio(COL2_ROW_2)\n#else\n    0\n#endif\n) {\n    // ...\n} \n</code></pre>\n\n<p>That will be approximately as much work as commenting out all those invocations once.</p>\n\n<p>Alternatively, if your uses involve manipulation of the whole set of applicable pins, then you might find an <a href=\"https://en.wikipedia.org/wiki/X_Macro\" rel=\"nofollow noreferrer\">X macro</a> approach useful.</p>\n"}], "owner": {"reputation": 875, "user_id": 1797147, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f598bc6686fc6fc7757b81c323d8d7da?s=128&d=identicon&r=PG", "display_name": "user1797147", "link": "https://stackoverflow.com/users/1797147/user1797147"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 41468165, "answer_count": 3, "score": 0, "last_activity_date": 1483546425, "creation_date": 1483543751, "last_edit_date": 1483546425, "question_id": 41467442, "link": "https://stackoverflow.com/questions/41467442/c-macro-check-parameter-and-replace-by-nop", "title": "c macro, check parameter and replace by nop", "body": "<p>I have defined some multilevel macros for GPIO toggle (and set analog, digital, etc) for my MCU. Using gcc. Like this</p>\n\n<pre><code>#define LED  B,2\n\ngpio_make_amalog(LED) \ngpio_high(LED)\ngpio_low(LED)\n</code></pre>\n\n<p>and so on.</p>\n\n<p>The problem is when I try to reuse code (like a recent project) I may not use that gpio, so in every module I have to go and comment out is LED is not defined</p>\n\n<pre><code>//gpio_low(LED)\n</code></pre>\n\n<p>The question is, there is a possibility to test a macro parameter inside that macro, so if LED is not defined, a Nop() to be inserted.</p>\n\n<p>Thank you in advance,</p>\n\n<p>PS.</p>\n\n<p><code>#ifdef</code> is not quite practical. My recent example was a 4x4 column keyboard matrix code and these days I wanted to use a 3x4 keyboard phone type)</p>\n\n<p>So I had a lot of if(gpio(COL1_ROW_4)) {} that needs to be commented.</p>\n\n<p>If the gpio() macro was smarter, a nop will keep the code harmless or so.</p>\n"}, {"tags": ["c", "microcontroller", "stm32", "flir", "nucleo"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1483544477, "post_id": 41467204, "comment_id": 70140882, "body": "so I assume you added the <code>if (frameSkipper==4){ ... frameSkipper=0; }</code> delay code? Why do you have to put a delay of 1 sec between each frame? What happens if you don&#39;t, you get no picture?"}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 0, "creation_date": 1483547620, "post_id": 41467204, "comment_id": 70143203, "body": "What is your question again?"}, {"owner": {"reputation": 149, "user_id": 5908652, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-HKL4fhlUSHc/AAAAAAAAAAI/AAAAAAAAAGg/tIiwkpSxvxs/photo.jpg?sz=128", "display_name": "Armand Chocron", "link": "https://stackoverflow.com/users/5908652/armand-chocron"}, "edited": false, "score": 0, "creation_date": 1483604623, "post_id": 41467204, "comment_id": 70165665, "body": "If I don&#39;t, the program ThermalView does not get the packet as expected and does not succeed in reading the frame.  Magaret, I would like to increse the frame rate"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8292018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e00daedf30eca30e9a32cc46d81f5cb?s=128&d=identicon&r=PG&f=1", "display_name": "RDTECH", "link": "https://stackoverflow.com/users/8292018/rdtech"}, "is_accepted": false, "score": 1, "last_activity_date": 1499805969, "creation_date": 1499805969, "answer_id": 45044190, "question_id": 41467204, "link": "https://stackoverflow.com/questions/41467204/getting-continuous-stream-from-lepton-flir-camera-with-board-nucleo-f401re/45044190#45044190", "title": "Getting continuous stream from Lepton FLIR Camera with board Nucleo-f401re", "body": "<p>Are you using a Lepton 2 or Lepton 3?  The Lepton 3 will require acquisition of not only the \"Frames\" but also 4 \"segments\"  There are also 2 blank screens output by the Lepton Modules. More details in this document:</p>\n\n<p><a href=\"http://www.flir.com/uploadedFiles/OEM/Products/LWIR-Cameras/Lepton/Lepton-vs-Lepton-3-App-Note.pdf\" rel=\"nofollow noreferrer\">http://www.flir.com/uploadedFiles/OEM/Products/LWIR-Cameras/Lepton/Lepton-vs-Lepton-3-App-Note.pdf</a></p>\n\n<p>comparing the Lepton 2X series (80x60) resolution and the Lepton 3 (160x120) resolution.\n<em>The four most significant differences between the Lepton and Lepton 3 VoSPI interfaces are:\n1) On Lepton, reconstructing a video frame from the individual packets requires the host to decode the packet number from each packet header. On Lepton 3, the host must decode both the packet number and the segment number.\n2) The total number of bits per frame is 4X greater for Lepton 3 than for Lepton. Consequently, the minimum SPI clock rate is 4X faster. The maximum SPI clock rate for both modules is 20 MHz.\n3) Both Lepton and Lepton 3 provide the option to output a sync pulse on GPIO3. The frequency of the pulse is 4X higher on Lepton 3 than on Lepton. For Lepton 3, the sync pulse represents when the next available segment is available whereas for Lepton it indicates when the next available frame is available.\n4) When telemetry is enabled in Lepton, it results in three extra video lines (63 total packets per frame). When telemetry is enabled in Lepton 3, it results in 1 additional packet per segment for a total of 2 extra video lines.</em></p>\n\n<p>Im trying to get the lepton 3  to work on my stm32f746g-discovery board.</p>\n"}], "owner": {"reputation": 149, "user_id": 5908652, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-HKL4fhlUSHc/AAAAAAAAAAI/AAAAAAAAAGg/tIiwkpSxvxs/photo.jpg?sz=128", "display_name": "Armand Chocron", "link": "https://stackoverflow.com/users/5908652/armand-chocron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 969, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1617283651, "creation_date": 1483543051, "question_id": 41467204, "link": "https://stackoverflow.com/questions/41467204/getting-continuous-stream-from-lepton-flir-camera-with-board-nucleo-f401re", "title": "Getting continuous stream from Lepton FLIR Camera with board Nucleo-f401re", "body": "<p>I connected my Flir Lepton Camera to my board, and I'm trying to have a continuous stream of the image, thanks to the program ThermalView (source code here: <a href=\"https://github.com/groupgets/LeptonModule/tree/master/software/ThermalView\" rel=\"nofollow noreferrer\">https://github.com/groupgets/LeptonModule/tree/master/software/ThermalView</a>) \nI compiled and downloaded the following code on my board: </p>\n\n<pre><code>    int main(void)\n{\n\n  //HAL_Init();\n\n  /* Configure the system clock */\n  SystemClock_Config();\n\n  /* Initialize all configured peripherals */\n  MX_GPIO_Init();\n  MX_DMA_Init();\n  MX_I2C1_Init();\n  MX_SPI1_Init();\n  MX_USART1_UART_Init();\n  MX_USART2_UART_Init();\n  SystemClock_Config();\n\n  leptonEnd();\n  // LEPTON VDD OFF\n  HAL_Delay(1000);\n  // LEPTON VDD ON\n  HAL_Delay(185);\n\n  LeptonConfigure_I2C(); \n\n  while(1)\n  {\n    LeptonReadFrame();\n    frameToPc(); \n  }\n}\n\n// Output image buffer to USART2\nvoid frameToPc()\n{\n  static uint8_t frameSkipper = 0;\n\n  uint8_t timeStamp = (HAL_GetTick() - last_frame_millis); // calculate time passed since last been here\n\n  last_frame_millis = HAL_GetTick();\n\n\n\n  if(frameSkipper==4)\n  {\n    //PSEDO//\n    //IMGtoRGB();\n\n    ////////\n    uint8_t thermalView_header[] = {0xDE,0xAD,0xBE,0xEF}; // 4-byte header for ThermalView application\n    HAL_Delay(1000);\n    HAL_UART_Transmit_DMA(&amp;huart2, &amp;thermalView_header[0], 4); // print header\n\n    while(huart2.gState != HAL_UART_STATE_READY); // wait for transmission to complete\n\n    HAL_UART_Transmit_DMA(&amp;huart2, &amp;IMG[0], LEPTON_IMG_SIZE_BYTES);\n\n    frameSkipper = 0;\n  }\n\n  frameSkipper++;\n}uint8_t LeptonReadFrame()\n{  \n  uint8_t i, frame_number, frame_complete=0;\n  uint16_t bad_frame_counter=0;\n\n  while(!frame_complete)\n  {\n    leptonBegin();\n\n    HAL_SPI_Receive(&amp;hspi1, &amp;FramePacket[0], LEPTON_PACKET_LENGTH, 1000);  // READ LINE    \n\n    leptonEnd();\n\n    //HAL_UART_Transmit(&amp;huart2,  &amp;FramePacket[0], LEPTON_PACKET_LENGTH, 1000); // PRINT LINE\n\n    if( (FramePacket[0] &amp; 0x0f) != 0x0f ) // not discard frame\n    {\n       frame_number = FramePacket[1];\n\n       if(frame_number &lt; 60) // valid frame\n       {\n         bad_frame_counter = 0; \n\n         for(i= 0; i&lt;LEPTON_PACKET_CONTENT_LENGTH; i++)\n         {\n           IMG[frame_number*LEPTON_PACKET_CONTENT_LENGTH+i] = FramePacket[i+4]; // copy line into IMG buffer, ignoring ID and CRC\n         }\n       }\n       else\n       {\n         bad_frame_counter++;\n       }\n\n       if(frame_number == 59)\n       {\n          frame_complete = 1;\n       }\n\n       if(bad_frame_counter&gt;1000) // 800 lines = 5 bad frames = resync needed\n       {\n          bad_frame_counter = 0;\n          HAL_Delay(185);  // CS is already disabled so the delay is enougth\n       }\n    }\n  }\n  return 1;\n}\n</code></pre>\n\n<p>I'm succesfully getting a stream, but I have to put a delay of 1 sec between each frame, and have to skip frames between 2 frames I'm sending to the computer. If you pay attention to something wrong in the code which prevents increasing the frame rate, let me know.</p>\n"}, {"tags": ["python", "c", "numpy", "convolution"], "comments": [{"owner": {"reputation": 203194, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1483543089, "post_id": 41467200, "comment_id": 70139925, "body": "Is mask always all ones?"}, {"owner": {"reputation": 59, "user_id": 993375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIl3F.jpg?s=128&g=1", "display_name": "grexor", "link": "https://stackoverflow.com/users/993375/grexor"}, "reply_to_user": {"reputation": 203194, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1483543123, "post_id": 41467200, "comment_id": 70139949, "body": "yes, the mask is always all ones"}, {"owner": {"reputation": 203194, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1483544132, "post_id": 41467200, "comment_id": 70140635, "body": "And main_vector always has 0s and 1s only?"}, {"owner": {"reputation": 59, "user_id": 993375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIl3F.jpg?s=128&g=1", "display_name": "grexor", "link": "https://stackoverflow.com/users/993375/grexor"}, "reply_to_user": {"reputation": 203194, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1483544243, "post_id": 41467200, "comment_id": 70140715, "body": "yes exactly, main_vector has only 0 or 1 at any position"}, {"owner": {"reputation": 203194, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1483545251, "post_id": 41467200, "comment_id": 70141439, "body": "Do you need this for the entire length with <code>&quot;same&quot;</code> or something like <code>&quot;valid&quot;</code> be okay too?"}, {"owner": {"reputation": 24566, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1483545376, "post_id": 41467200, "comment_id": 70141526, "body": "In-place multiplication is a bit faster than using <code>numpy.multiply</code>: <code>result *= main_vector</code> (memory allocation!). Note that masking (<code>result[main_vector != 0]</code>) is slower than multiplication."}, {"owner": {"reputation": 59, "user_id": 993375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIl3F.jpg?s=128&g=1", "display_name": "grexor", "link": "https://stackoverflow.com/users/993375/grexor"}, "edited": false, "score": 0, "creation_date": 1483545398, "post_id": 41467200, "comment_id": 70141540, "body": "ideal would be &quot;same&quot;, however &quot;valid&quot; would also be of great help"}, {"owner": {"reputation": 203194, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1483559928, "post_id": 41467200, "comment_id": 70150207, "body": "You can use <a href=\"https://docs.scipy.org/doc/scipy-0.16.0/reference/generated/scipy.ndimage.filters.uniform_filter1d.html\" rel=\"nofollow noreferrer\"><code>1D uniform filter</code></a>. But, with such short vectors, it doesn&#39;t seem to provide any noticeable speedup."}, {"owner": {"reputation": 59, "user_id": 993375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIl3F.jpg?s=128&g=1", "display_name": "grexor", "link": "https://stackoverflow.com/users/993375/grexor"}, "edited": false, "score": 0, "creation_date": 1483612234, "post_id": 41467200, "comment_id": 70170215, "body": "Thank you for all the replies, i will try the in-place multiplication and 1D uniform filter and see if the timings are improved."}, {"owner": {"reputation": 1356, "user_id": 7138814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6x8j.png?s=128&g=1", "display_name": "user7138814", "link": "https://stackoverflow.com/users/7138814/user7138814"}, "edited": false, "score": 0, "creation_date": 1483644739, "post_id": 41467200, "comment_id": 70192370, "body": "Since the mask is all ones, this is more like a rolling sum. See this anwer: <a href=\"http://stackoverflow.com/a/28884909\">stackoverflow.com/a/28884909</a>"}], "owner": {"reputation": 59, "user_id": 993375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIl3F.jpg?s=128&g=1", "display_name": "grexor", "link": "https://stackoverflow.com/users/993375/grexor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 350, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1483543039, "creation_date": 1483543039, "question_id": 41467200, "link": "https://stackoverflow.com/questions/41467200/fast-convolution-of-short-1d-vectors-2-lists-in-python", "title": "fast convolution of short 1d vectors (2 lists) in Python", "body": "<p>I would like to implement the fastest possible convolution of two very short vectors (1d) in Python (or in C with a Python interface). The convolution results are reported only for non-zero values of the first vector.</p>\n\n<p>Example:</p>\n\n<pre><code>main_vector = [0,0,0,1,1,1,0,0,0] # usually &lt; 250 elements long\nmask = [1,1,1]                    # usually 31 elements long\nresult = [0,0,0,2,3,2,0,0,0]      # result of convolution\n</code></pre>\n\n<p>The result is the convolution of the <strong>main_vector</strong> with the <strong>mask</strong>, however the result is <strong>reported only on non-zero values of the main_vector</strong>.</p>\n\n<p>My fastest solution until now:</p>\n\n<pre><code>result = numpy.convolve(main_vector, mask, \"same\")\nresult = numpy.multiply(main_vector, result)\n</code></pre>\n\n<p>Would there be a faster way to implement this in Cython or some other interface? Any ideas very much appreciated. I am using this to do motif searches in bioinformatics, and i perform many of these convolutions.</p>\n"}, {"tags": ["c", "printf", "double", "precision"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1483543259, "post_id": 41467132, "comment_id": 70140047, "body": "<i>&quot;The problem is that this does not work with %g instead of %f.&quot;</i> Not good enough. Be precise. How does it not work?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483544483, "post_id": 41467132, "comment_id": 70140885, "body": "Although OP of another post did not care for the <a href=\"http://stackoverflow.com/a/41402788/2410359\">answer</a> , that does what this OP wants - I think. The issue is that corner cases exist that make using a pre-calculated format not optimal. The linked answer tries various <code>&quot;%.*e&quot;</code> solutions."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1483544640, "post_id": 41467132, "comment_id": 70141001, "body": "Why do you want output to be <code>-123.123456789123456</code> rather than the more precise <code>-123.123456789123457</code>?  (check last digit)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483544959, "post_id": 41467132, "comment_id": 70141245, "body": "1) &quot;print doubles in C, with a width of 20&quot; --&gt; how do you want to print a <code>double</code> like <code>DBL_MAX</code> which may need 300+ digits?  Or do you want to jump to exponential notation?  2) Should positive +123.123456789123456789 print with 1 more decimal place as <code>&quot;123.1234567891234567&quot;</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483545096, "post_id": 41467132, "comment_id": 70141321, "body": "What about <code>double</code> like <code>DBL_MIN</code>  which may have a value near 1e-300?"}, {"owner": {"reputation": 68, "user_id": 4152708, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TNEYIuUUTmE/AAAAAAAAAAI/AAAAAAAAHyE/HW3mSmdRQvY/photo.jpg?sz=128", "display_name": "Pavlos Katsonis", "link": "https://stackoverflow.com/users/4152708/pavlos-katsonis"}, "edited": false, "score": 0, "creation_date": 1483545177, "post_id": 41467132, "comment_id": 70141378, "body": "1) That&#39;s why I want to use %g, so as it jumps to exponential."}, {"owner": {"reputation": 68, "user_id": 4152708, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TNEYIuUUTmE/AAAAAAAAAAI/AAAAAAAAHyE/HW3mSmdRQvY/photo.jpg?sz=128", "display_name": "Pavlos Katsonis", "link": "https://stackoverflow.com/users/4152708/pavlos-katsonis"}, "edited": false, "score": 0, "creation_date": 1483545309, "post_id": 41467132, "comment_id": 70141473, "body": "2) my mistake: it should be 123.1234567891234568. That is 16 digits after the decimal"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1483545380, "post_id": 41467132, "comment_id": 70141529, "body": "<code>&quot;%g&quot;</code> does not always meet &quot;using the maximum precision that can be printed&quot; requirement, but jumps to exponential via a nearly similar criteria.  Which is more important:  maximum precision, ease of coding, correctness across all <code>double</code>?"}, {"owner": {"reputation": 68, "user_id": 4152708, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TNEYIuUUTmE/AAAAAAAAAAI/AAAAAAAAHyE/HW3mSmdRQvY/photo.jpg?sz=128", "display_name": "Pavlos Katsonis", "link": "https://stackoverflow.com/users/4152708/pavlos-katsonis"}, "edited": false, "score": 0, "creation_date": 1483545532, "post_id": 41467132, "comment_id": 70141636, "body": "Correctness is the most important. There is no problem if a digit or two get lost under some circumstances."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 68, "user_id": 4152708, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TNEYIuUUTmE/AAAAAAAAAAI/AAAAAAAAHyE/HW3mSmdRQvY/photo.jpg?sz=128", "display_name": "Pavlos Katsonis", "link": "https://stackoverflow.com/users/4152708/pavlos-katsonis"}, "edited": false, "score": 0, "creation_date": 1483545699, "post_id": 41467132, "comment_id": 70141749, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/132314/discussion-between-chux-and-pavlos-katsonis\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 68, "user_id": 4152708, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TNEYIuUUTmE/AAAAAAAAAAI/AAAAAAAAHyE/HW3mSmdRQvY/photo.jpg?sz=128", "display_name": "Pavlos Katsonis", "link": "https://stackoverflow.com/users/4152708/pavlos-katsonis"}, "is_accepted": true, "score": 1, "last_activity_date": 1483553424, "last_edit_date": 1495540911, "creation_date": 1483553424, "answer_id": 41470521, "question_id": 41467132, "link": "https://stackoverflow.com/questions/41467132/printf-double-with-maximum-precision-in-available-width/41470521#41470521", "title": "printf double with maximum precision in available width", "body": "<p>Following some hints from <a href=\"https://stackoverflow.com/users/2410359/chux\">chux</a> and this <a href=\"https://stackoverflow.com/a/41402788/2410359\" title=\"Treating 0 as a significant figure in printf %g format specifier\">answer</a>, I implemented the following solution that seems to work.\nI no longer try to pre-calculate the correct precision to use, but print with more than enough precision and later I crop the superfluous digits.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstatic void printDouble(double val, int width)\n{\n    char *temp = malloc((width + 32) * sizeof(char));\n    int len = 0;\n    sprintf(temp, \"%*.*g\", width, width, val);\n    len =strlen(temp);\n    if (len &gt; width) {\n        char *dropped = temp + width;\n        char *last = dropped - 1;\n        char *expon = strchr(temp, 'E');\n        if (!expon)\n            expon = strchr(temp, 'e');\n        if (expon) {\n            last = temp + width - 1 - strlen(expon);\n            dropped = last + 1 &lt; expon ? last + 1 : NULL;\n        }\n        if (strchr(temp, '.')) {\n            /* Round */\n            if (dropped &amp;&amp; *dropped &gt;= '5' &amp;&amp; *dropped &lt;= '9') {\n                while (*last == '9')\n                    last--;\n                (*last)++;\n            }\n            /* Remove trailing zeroes */\n            while (*last == '0')\n                last--;\n        }\n        if (expon) {\n            while (*expon != '\\0')\n                *(++last) = *(expon++);\n        }\n        *(++last) = '\\0';\n    }\n    printf(\"%*s\\n\", width, temp);\n    free(temp);\n}\n</code></pre>\n"}], "owner": {"reputation": 68, "user_id": 4152708, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TNEYIuUUTmE/AAAAAAAAAAI/AAAAAAAAHyE/HW3mSmdRQvY/photo.jpg?sz=128", "display_name": "Pavlos Katsonis", "link": "https://stackoverflow.com/users/4152708/pavlos-katsonis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1512, "favorite_count": 0, "accepted_answer_id": 41470521, "answer_count": 1, "score": -1, "last_activity_date": 1483553984, "creation_date": 1483542875, "last_edit_date": 1483553716, "question_id": 41467132, "link": "https://stackoverflow.com/questions/41467132/printf-double-with-maximum-precision-in-available-width", "title": "printf double with maximum precision in available width", "body": "<p>I need to print doubles in C, with a width of 20, but using the maximum precision that can be printed in the 20 chars</p>\n\n<p>For example:</p>\n\n<pre><code>-123.123456789123456789 \n</code></pre>\n\n<p>should be printed: </p>\n\n<pre><code>-123.1234567891234568\n</code></pre>\n\n<p>Up to now I have the following code that works, but is ugly and has a problem:</p>\n\n<pre><code>double num = .......;\nint pr = 0;\nchar temp[32] = { 0 };\nchar *point = NULL;\nsprintf(temp, \"%.20f\", num);\npoint = strchr(temp, '.');\nif (point) {\n    pr = 20 - (1 + point - temp);\n}\nprintf(\"%20.*f\", pr, num);\n</code></pre>\n\n<p>The problem is that this does not work with %g instead of %f, it prints more than 20 characters sometimes, even though no exponential part exists.\nThe problem arises when a number like 0.000123456789123456789 is given. The extra zeroes after the decimal do not seem to count (!).</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1483542853, "post_id": 41467114, "comment_id": 70139791, "body": "<a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}, {"owner": {"reputation": 11, "user_id": 7298574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e739e2035bd8b239a532d07446e8104?s=128&d=identicon&r=PG&f=1", "display_name": "mpisacic", "link": "https://stackoverflow.com/users/7298574/mpisacic"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1483542945, "post_id": 41467114, "comment_id": 70139845, "body": "did it a number of times before without any problems and I don&#39;t think that is the problem here but thanks anyway"}, {"owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 0, "creation_date": 1483543189, "post_id": 41467114, "comment_id": 70139996, "body": "Is the attempt to open the file working? Try just printing a string literal test text to it."}, {"owner": {"reputation": 11, "user_id": 7298574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e739e2035bd8b239a532d07446e8104?s=128&d=identicon&r=PG&f=1", "display_name": "mpisacic", "link": "https://stackoverflow.com/users/7298574/mpisacic"}, "edited": false, "score": 0, "creation_date": 1483543336, "post_id": 41467114, "comment_id": 70140105, "body": "nothins is printed out, even if i put fprintf(f, &quot;%s\\n&quot;, &quot;test&quot;) and loop it 256 times still got empty"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1483543429, "post_id": 41467114, "comment_id": 70140155, "body": "&quot;Empty&quot; as in zero bytes long, or &quot;empty&quot; as in &quot;my text editor doesn&#39;t display any printable characters&quot;?"}, {"owner": {"reputation": 11, "user_id": 7298574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e739e2035bd8b239a532d07446e8104?s=128&d=identicon&r=PG&f=1", "display_name": "mpisacic", "link": "https://stackoverflow.com/users/7298574/mpisacic"}, "edited": false, "score": 0, "creation_date": 1483543494, "post_id": 41467114, "comment_id": 70140206, "body": "file is zero bytes"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1483543570, "post_id": 41467114, "comment_id": 70140254, "body": "You&#39;ve not given us enough to work with here.  We ordinarily expect a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the problem."}, {"owner": {"reputation": 11, "user_id": 7298574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e739e2035bd8b239a532d07446e8104?s=128&d=identicon&r=PG&f=1", "display_name": "mpisacic", "link": "https://stackoverflow.com/users/7298574/mpisacic"}, "edited": false, "score": 0, "creation_date": 1483543663, "post_id": 41467114, "comment_id": 70140320, "body": "don&#39;t know what more is it here to give everything else is working fine if you print to stdout you get data but can&#39;t print anything to file"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1483544098, "post_id": 41467114, "comment_id": 70140605, "body": "We don&#39;t want &quot;everything else&quot;.  We want minimal code to make a complete program that demonstrates the problem, and any input needed to cause the program to do so -- hence <i>complete</i> and <i>verifiable</i>.  Although this may contain excerpts of your program, such as the pieces you&#39;ve already provided, it will not ordinarily be a subset of your program&#39;s code, as that typically is not <i>minimal</i>.  Follow the link in my previous comment if you require further clarification."}], "owner": {"reputation": 11, "user_id": 7298574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e739e2035bd8b239a532d07446e8104?s=128&d=identicon&r=PG&f=1", "display_name": "mpisacic", "link": "https://stackoverflow.com/users/7298574/mpisacic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483542884, "creation_date": 1483542820, "last_edit_date": 1483542884, "question_id": 41467114, "link": "https://stackoverflow.com/questions/41467114/printing-to-file-from-global-array-of-chars-in-c", "title": "Printing to file from global array of chars in c", "body": "<p>I am having a problem while trying to print to txt file from global array of char*.</p>\n\n<p>My array is declared as </p>\n\n<pre><code>char* codes[256];\n</code></pre>\n\n<p>also i have a function that construct a string and returns it to after which that value is placed into this global array</p>\n\n<pre><code>char* printArr(int arr[], int n)\n{\n\n    char* code = (char *) malloc(sizeof(char) * (n+1));\n\n    int i;\n    for (i = 0; i &lt; n; ++i)\n    {\n        code[i] = arr[i] + '0';\n    }\n    code[n] = '\\0';\n\n    return code;\n}\n</code></pre>\n\n<p>after which I just simply place that value into that global array. After that I am trying to print that array values into a txt file like this : </p>\n\n<pre><code>void PrintToFile(char* outputFileName)\n{\n\n   FILE* f = fopen(outputFileName, \"w+\");\n\n   int i;\n\n   for (i = 0; i &lt; 256; ++i)\n   {\n        //printf(\"%s\\n\", codes[i]);\n        fprintf(f, \"%s\\n\", codes[i]);\n   }\n\n   fclose(f);\n}\n</code></pre>\n\n<p>But for some reason my txt file turns out blank.\nAlso without opened stream when I try to print to stdout i get those values but with both printf and fprintf I don't get anything out either on stdout or in txt file.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "sockets", "tcp", "checksum"], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 4134335, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iq19Cyw7vgI/AAAAAAAAAAI/AAAAAAAABDs/YVwmRI5LV9A/photo.jpg?sz=128", "display_name": "Bert.e", "link": "https://stackoverflow.com/users/4134335/bert-e"}, "is_accepted": true, "score": 3, "last_activity_date": 1483544599, "creation_date": 1483544599, "answer_id": 41467776, "question_id": 41466810, "link": "https://stackoverflow.com/questions/41466810/tcp-checksum-is-incorrect-when-trying-to-send-packet-in-c/41467776#41467776", "title": "TCP checksum is incorrect when trying to send packet in C", "body": "<p>Sorry guys, it's one of those times when asking the question actually gives me the answer.</p>\n\n<p>If I understood the documentation correctly, when using a RAW socket, the kernel will replace the IP source address with the address of the sending interface only if the \"source\" field is 0 (<a href=\"http://man7.org/linux/man-pages/man7/raw.7.html#DESCRIPTION\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man7/raw.7.html#DESCRIPTION</a>).</p>\n\n<p>As I was using that feature, I computed my checksum over a TCP pseudo header with an IP source that was 0. That could obviously not work.</p>\n\n<p>Thanks if anyone tried to solve my issue.</p>\n"}], "owner": {"reputation": 67, "user_id": 4134335, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iq19Cyw7vgI/AAAAAAAAAAI/AAAAAAAABDs/YVwmRI5LV9A/photo.jpg?sz=128", "display_name": "Bert.e", "link": "https://stackoverflow.com/users/4134335/bert-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1631, "favorite_count": 1, "accepted_answer_id": 41467776, "answer_count": 1, "score": 1, "last_activity_date": 1483544599, "creation_date": 1483541807, "question_id": 41466810, "link": "https://stackoverflow.com/questions/41466810/tcp-checksum-is-incorrect-when-trying-to-send-packet-in-c", "title": "TCP checksum is incorrect when trying to send packet in C", "body": "<p>I am trying to send a TCP SYN packet through a RAW socket in C (I know it's not the easiest thing to do but I have academic reasons to do so).</p>\n\n<p>When I check the outgoing packet, every fields are good but one: the TCP checksum. Indeed, Wireshark tells me it is incorrect.\nIn the following code, you can see how I build the packet (the IP headers are omitted because they seem to be OK).</p>\n\n<pre><code>#define MINIMUM_TCP_HEADER_LENGTH 20\n#define DEFAULT_TCP_WINDOW 32767\n\n// [... Code that sets the IP headers ...]\n\nstruct tcphdr * tcpHeaders = (struct tcphdr *) (packetBuffer + IPHeaderLength);\n\ntcpHeaders-&gt;source = htons(srcPort_16);\ntcpHeaders-&gt;dest = htons(dstPort_16);\ntcpHeaders-&gt;seq = htonl(tcpSeq_32);\ntcpHeaders-&gt;ack_seq = 0;\ntcpHeaders-&gt;doff = (MINIMUM_TCP_HEADER_LENGTH / 4);\ntcpHeaders-&gt;res1 = 0;\ntcpHeaders-&gt;res2 = 0;\ntcpHeaders-&gt;syn = 1;\ntcpHeaders-&gt;ack = 0;\ntcpHeaders-&gt;fin = 0;\ntcpHeaders-&gt;psh = 0;\ntcpHeaders-&gt;urg = 0;\ntcpHeaders-&gt;rst = 0;\ntcpHeaders-&gt;window = htons(DEFAULT_TCP_WINDOW);\ntcpHeaders-&gt;check = 0x0;\ntcpHeaders-&gt;urg_ptr = 0x0;\n\n//Sets the data\nuint8_t * tcdData = ((uint8_t*) tcpHeaders + MINIMUM_TCP_HEADER_LENGTH);\nmemcpy(tcdData, message, strlen(message));\n\n//Compute TCP checksum over the pseudo TCP header\nuint8_t * pseudo = pseudoBuffer;\nmemset(pseudo, 0, DEFAULT_BUFFER_SIZE);\nmemcpy(pseudo, &amp;((ipHeaders-&gt;ip_src).s_addr), 4);\npseudo += 4;\nmemcpy(pseudo, &amp;((ipHeaders-&gt;ip_dst).s_addr), 4);\npseudo += 4;\nmemset(pseudo++, 0, 1);\nmemset(pseudo++, IPPROTO_TCP, 1);\nuint16_t tcpSegmentLength = htons(MINIMUM_TCP_HEADER_LENGTH + (uint32_t) strlen(message));\nmemcpy(pseudo, &amp;tcpSegmentLength, 2);\npseudo += 2;\n\n//Append the TCP headers and data to the pseudo header\nmemcpy(pseudo, tcpHeaders, MINIMUM_TCP_HEADER_LENGTH + strlen(attentionMessage));\npseudo += MINIMUM_TCP_HEADER_LENGTH + strlen(attentionMessage);\n\n//Compute checksum\nint pseudoBufferLength = pseudo - pseudoBuffer;\ntcpHeaders-&gt;check = calculateInternetChecksum((uint16_t*) pseudoBuffer, pseudoBufferLength);\n\n//[... Code that proceed to send the packet ...]\n</code></pre>\n\n<p>It is worth noting that both \"packetBuffer\" have been filled with zeros using memset (just like \"pseudo\" is) and that the\n\"message\" is a regular string.</p>\n\n<p>Here is the function that computes the checksum:</p>\n\n<pre><code>uint16_t onesComplementAddition(uint16_t *buff, unsigned int nbytes) {\n    if(buff == 0 || nbytes == 0)\n        return 0;\n\n    uint32_t sum = 0;\n    for (; nbytes &gt; 1; nbytes -= 2)\n        sum += *buff++;\n\n    if (nbytes == 1)\n        sum += *(uint8_t*) buff;\n\n    sum  = (sum &gt;&gt; 16) + (sum &amp; 0xFFFF);\n    sum += (sum &gt;&gt; 16);\n\n    return sum;\n}\n\nuint16_t calculateInternetChecksum(uint16_t *buff, unsigned int nbytes) {\n    return ~(onesComplementAddition(buff, nbytes));\n}\n</code></pre>\n\n<p>Wireshark suggests that this could be caused by \"TCP checksum offload\" but \nI doubt it as I don't receive any response from the machine I probe (even though I know for a fact that I should).</p>\n\n<p>Does anyone have an idea why the TCP checksum is not correct?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "struct", "queue", "malloc", "abstract-data-type"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1483541781, "post_id": 41466753, "comment_id": 70139111, "body": "<a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1483542103, "post_id": 41466753, "comment_id": 70139326, "body": "SO isn&#39;t a debugging service. Compile with symbols, run the code inside a debugger to trace through the program(s) line by line inspecting the values of the relevant variables to learn what is really going on. If then a <i>specific</i> question arises feel free to come back here."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1483542129, "post_id": 41466753, "comment_id": 70139345, "body": "Believe it or not, but a program <i>can</i> be made harder to follow by adding <code>typedef</code>s. The more names you have for something, the harder it is to keep track off its use."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1483542705, "post_id": 41466753, "comment_id": 70139701, "body": "Please note that the dot <code>.</code> and arrow <code>-&gt;</code> operators bind very tightly and should not be surrounded by any spaces."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1483542756, "post_id": 41466753, "comment_id": 70139737, "body": "See also <a href=\"http://stackoverflow.com/questions/750178/is-it-a-good-idea-to-typedef-pointers\">Is it a good idea to <code>typedef</code> pointers?</a> \u2014 the short answer is &quot;usually No&quot;."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1483543013, "post_id": 41466753, "comment_id": 70139878, "body": "You don&#39;t adjust <code>q-&gt;dim</code> when you <code>realloc()</code> more space.  That may not be the whole problem, but it is one problem.  Also, the idiom <code>old_ptr = realloc(old_ptr, new_size);</code> is an incipient memory leak.  If the <code>realloc()</code> fails, you&#39;ve just overwritten the pointer to the still allocated memory with NULL.  Use: <code>new_ptr = realloc(old_ptr, new_size); if (new_ptr == 0) { \u2026deal with out of memory error\u2026 }; old_ptr = new_ptr;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1483544286, "creation_date": 1483544286, "answer_id": 41467649, "question_id": 41466753, "link": "https://stackoverflow.com/questions/41466753/why-does-it-say-my-queues-size-is-0/41467649#41467649", "title": "Why does it say my queue&#39;s size is 0?", "body": "<p>You forgot to adjust <code>q-&gt;dim</code>, so <code>q-&gt;tail</code> is still zero (<code>1 % 1</code>) after the <code>enqueue</code>.  </p>\n"}], "owner": {"reputation": 1636, "user_id": 3918095, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01f37b65851537a9e522f7983889f478?s=128&d=identicon&r=PG&f=1", "display_name": "Pine Code", "link": "https://stackoverflow.com/users/3918095/pine-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1483544286, "creation_date": 1483541602, "last_edit_date": 1483541740, "question_id": 41466753, "link": "https://stackoverflow.com/questions/41466753/why-does-it-say-my-queues-size-is-0", "title": "Why does it say my queue&#39;s size is 0?", "body": "<p>I want to implement the queue ADT in C language.</p>\n\n<p>I have the following:</p>\n\n<pre><code>// node structure:\n\ntypedef int ElementType;\ntypedef struct node {\n    ElementType key;\n    struct node* left_child;\n    struct node* right_sib;\n}* Node;\ntypedef Node Item;\n\n// queue structure:\n\nstruct queue {\n  Item* contents;\n  int head;\n  int tail;\n  int dim;\n};\ntypedef struct queue* Queue;\n\n\nQueue initqueue();                  // create a queue\nint queueEmpty(Queue q);            // queue empty?\nvoid enqueue(Queue q, Item elem);   // insert item\nint size(Queue q);                  // size of the queue?\n\n\nQueue initqueue() {\n    Queue q = (Queue)malloc(sizeof(struct queue));\n    q -&gt; contents = (Item*)malloc(sizeof(Item));\n    q -&gt; head = 0;\n    q -&gt; tail = 0;\n    q -&gt; dim = 1;\n    return q;\n}\n\nint queueEmpty(Queue q) {\n    return (q -&gt; head == q -&gt; tail);\n}\n\nvoid enqueue(Queue q, Item elem) {\n    if (q -&gt; head == (q -&gt; tail % q -&gt; dim) + 1 || q -&gt; dim == 1)\n        q -&gt; contents = (Item*)realloc(q -&gt; contents, (q -&gt; dim) * 2);\n    q -&gt; contents[q -&gt; tail] = elem;\n    q -&gt; tail = (q -&gt; tail + 1) % (q -&gt; dim);\n}\n\nint size(Queue q) {\n    if (q -&gt; tail &lt; q -&gt; head)\n        return ((q -&gt; dim) - (q -&gt; head) + (q -&gt; tail) - 1);\n    else\n        return (q -&gt; tail - q -&gt; head);\n}\n\n\nint main() {\n    Queue q;\n    Item i = (Item)malloc(sizeof(struct node));\n    i -&gt; key = 4;\n    q = initqueue();\n    enqueue(q, i);\n    printf(\"%d\\n\", queueEmpty(q));\n    printf(\"%d\\n\", size(q));\n\n    return 0;\n}\n</code></pre>\n\n<p>I don't understand why the output is 0 and 1, that is the queue is empty and its size is 0.</p>\n"}, {"tags": ["c++", "c", "windows", "debugging", "outputdebugstring"], "comments": [{"owner": {"reputation": 300, "user_id": 6221642, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-VfFCMY6NznA/AAAAAAAAAAI/AAAAAAAAACE/KpkmsLQYFZw/photo.jpg?sz=128", "display_name": "Tiger Hwang", "link": "https://stackoverflow.com/users/6221642/tiger-hwang"}, "edited": false, "score": 2, "creation_date": 1483539877, "post_id": 41465986, "comment_id": 70137723, "body": "try dbgview, it will capture the output string, with many other features"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1483541733, "post_id": 41465986, "comment_id": 70139074, "body": "if you want do this &quot;* read this output *&quot; programmatically - this is possible - you need set <code>VEX</code> handler and spy for <code>DBG_PRINTEXCEPTION_[WIDE_]C</code> - if you want I can paste code for redirect <code>OutputDebugString</code> to console - this is small and simply"}, {"owner": {"reputation": 15897, "user_id": 11722, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b0124a12d060a036500e83ec44972492?s=128&d=identicon&r=PG", "display_name": "Zitrax", "link": "https://stackoverflow.com/users/11722/zitrax"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1483604768, "post_id": 41465986, "comment_id": 70165736, "body": "@RbMm sure - that could be useful."}, {"owner": {"reputation": 5184, "user_id": 89691, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/614ca7e0fe36e2232385b717303eb0e3?s=128&d=identicon&r=PG", "display_name": "rossmcm", "link": "https://stackoverflow.com/users/89691/rossmcm"}, "edited": false, "score": 0, "creation_date": 1544392610, "post_id": 41465986, "comment_id": 94249527, "body": "Try <a href=\"https://github.com/CobaltFusion/DebugViewPP/releases\" rel=\"nofollow noreferrer\">DebugView++</a>.  Much faster than DebugView, and has some pretty useful formatting and filtering options."}], "answers": [{"comments": [{"owner": {"reputation": 557, "user_id": 2490611, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0851f1c138a55b39588e02f9c33ea84?s=128&d=identicon&r=PG", "display_name": "Sonny D", "link": "https://stackoverflow.com/users/2490611/sonny-d"}, "edited": false, "score": 0, "creation_date": 1607123923, "post_id": 41480827, "comment_id": 115183379, "body": "your solution doesn&#39;t work. <code>OutputDebugString</code> does not generate exception you mention."}, {"owner": {"reputation": 557, "user_id": 2490611, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0851f1c138a55b39588e02f9c33ea84?s=128&d=identicon&r=PG", "display_name": "Sonny D", "link": "https://stackoverflow.com/users/2490611/sonny-d"}, "edited": false, "score": 1, "creation_date": 1607160892, "post_id": 41480827, "comment_id": 115189058, "body": "YOU ARE RIGHT, I WAS WRONG. INDEED <code>DBG_PRINTEXCEPTION_WIDE_C</code> IS GENERATED. I tested it again, I made mistake. Sorry. I will not delete previous comment to not confuse others."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 557, "user_id": 2490611, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0851f1c138a55b39588e02f9c33ea84?s=128&d=identicon&r=PG", "display_name": "Sonny D", "link": "https://stackoverflow.com/users/2490611/sonny-d"}, "edited": false, "score": 1, "creation_date": 1607195695, "post_id": 41480827, "comment_id": 115198278, "body": "@SonnyD - i almost sure that you test under debugger. exception of course generated and in this case, but debugger handle this exception and as result you not view it in code. exception handler not called"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": false, "score": 8, "last_activity_date": 1483607416, "last_edit_date": 1483607416, "creation_date": 1483606895, "answer_id": 41480827, "question_id": 41465986, "link": "https://stackoverflow.com/questions/41465986/outputdebugstring-in-console/41480827#41480827", "title": "OutputDebugString() in console", "body": "<p>the <code>OutputDebugStringA</code> generate exception <code>DBG_PRINTEXCEPTION_C</code> (<code>W</code> version in win10 - <code>DBG_PRINTEXCEPTION_WIDE_C</code>) with 2 arguments - (string length in characters + 1, string pointer) - as result we can handle this exception yourself (system default handler for this exception do <a href=\"http://www.unixwiz.net/techtips/outputdebugstring.html\" rel=\"noreferrer\">this</a>).</p>\n\n<p>example handler for redirect <code>OutputDebugString</code> to console:</p>\n\n<pre><code>LONG NTAPI VexHandler(PEXCEPTION_POINTERS ExceptionInfo)\n{\n    PEXCEPTION_RECORD ExceptionRecord = ExceptionInfo-&gt;ExceptionRecord;\n\n    switch (ExceptionRecord-&gt;ExceptionCode)\n    {\n    case DBG_PRINTEXCEPTION_WIDE_C:\n    case DBG_PRINTEXCEPTION_C:\n\n        if (ExceptionRecord-&gt;NumberParameters &gt;= 2)\n        {\n            ULONG len = (ULONG)ExceptionRecord-&gt;ExceptionInformation[0];\n\n            union {\n                ULONG_PTR up;\n                PCWSTR pwz;\n                PCSTR psz;\n            };\n\n            up = ExceptionRecord-&gt;ExceptionInformation[1];\n\n            HANDLE hOut = GetStdHandle(STD_ERROR_HANDLE);\n\n            if (ExceptionRecord-&gt;ExceptionCode == DBG_PRINTEXCEPTION_C)\n            {\n                // localized text will be incorrect displayed, if used not CP_OEMCP encoding \n                // WriteConsoleA(hOut, psz, len, &amp;len, 0);\n\n                // assume CP_ACP encoding\n                if (ULONG n = MultiByteToWideChar(CP_ACP, 0, psz, len, 0, 0))\n                {\n                    PWSTR wz = (PWSTR)alloca(n * sizeof(WCHAR));\n\n                    if (len = MultiByteToWideChar(CP_ACP, 0, psz, len, wz, n))\n                    {\n                        pwz = wz;\n                    }\n                }\n            }\n\n            if (len)\n            {\n                WriteConsoleW(hOut, pwz, len - 1, &amp;len, 0);\n            }\n\n        }\n        return EXCEPTION_CONTINUE_EXECUTION;\n    }\n\n    return EXCEPTION_CONTINUE_SEARCH;\n}\n</code></pre>\n\n<p>and for set this handler need call:</p>\n\n<pre><code>AddVectoredExceptionHandler(TRUE, VexHandler);\n</code></pre>\n\n<hr>\n\n<p>the system implementation of <code>OutputDebugString</code> like <a href=\"https://ntquery.wordpress.com/2015/09/07/windows-10-new-anti-debug-outputdebugstringw/\" rel=\"noreferrer\">here</a> - it really called <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms680552(v=vs.85).aspx\" rel=\"noreferrer\"><code>RaiseException</code></a> with exactly this arguments, only in exception handler instead <code>MessageBox</code> - code described <a href=\"http://www.unixwiz.net/techtips/outputdebugstring.html\" rel=\"noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 15897, "user_id": 11722, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b0124a12d060a036500e83ec44972492?s=128&d=identicon&r=PG", "display_name": "Zitrax", "link": "https://stackoverflow.com/users/11722/zitrax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2481, "favorite_count": 4, "answer_count": 1, "score": 7, "last_activity_date": 1502874721, "creation_date": 1483539432, "last_edit_date": 1502874721, "question_id": 41465986, "link": "https://stackoverflow.com/questions/41465986/outputdebugstring-in-console", "title": "OutputDebugString() in console", "body": "<p>I am using a third party library that uses the function <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363362(v=vs.85).aspx\" rel=\"noreferrer\"><code>OutputDebugString()</code></a>, and when reading the MSDN documentation it seems to indicate that this is for printing to the debugger.</p>\n\n<p>But that is inconvenient in my case, is there a way to read this output if there is no debugger connected?</p>\n\n<p>If it was my LIB, I would prefer the output to go to stdout/stderr whenever the user passes <code>--debug</code> or similar, but since it's not I am looking for other ways to pass this info to the console (or file) without connecting a debugger.</p>\n"}, {"tags": ["c", "file", "struct"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483539048, "post_id": 41465801, "comment_id": 70137125, "body": "Too broad. You don&#39;t check the result of <code>scanf</code>, the formatting is a mess, obfuscating the code and <code>fscanf</code> is not well-suited for the input you have anyway. Use a proper parser for such complex input."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1483539061, "post_id": 41465801, "comment_id": 70137134, "body": "When you read into <code>person[j].name</code>, where does the pointer actually point?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1483539458, "post_id": 41465801, "comment_id": 70137401, "body": "Also, on all modern 32- and 64-bit systems, the data type <code>int</code> is a signed 32-bit integer, which can be at most a little over plus 2 billion. Your &quot;id&quot; for the &quot;Obama&quot; person is way beyond what an <i>unsigned</i> 32-bit integer can hold."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1483539789, "post_id": 41465801, "comment_id": 70137647, "body": "<code>&quot;ID:%d&quot;</code> put space to front --&gt; <code>&quot; ID:%d&quot;</code>"}, {"owner": {"reputation": 75, "user_id": 4207114, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d188e8f16d66f69bd47453fab864ee7?s=128&d=identicon&r=PG&f=1", "display_name": "mihaicata1205", "link": "https://stackoverflow.com/users/4207114/mihaicata1205"}, "edited": false, "score": 0, "creation_date": 1483540612, "post_id": 41465801, "comment_id": 70138247, "body": "Thanks guys! I&#39;m using this technique because that is the one I know. But could you please make this code work?"}, {"owner": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "edited": false, "score": 0, "creation_date": 1483542266, "post_id": 41465801, "comment_id": 70139441, "body": "@mihaicata1205 do you want me to debug the same code or recreate it my way?"}, {"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 0, "creation_date": 1483542618, "post_id": 41465801, "comment_id": 70139645, "body": "We&#39;re not supposed to make your code work. You are. Did you check for the return value of the <code>fscanf</code> inside the second <code>for</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4207114, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d188e8f16d66f69bd47453fab864ee7?s=128&d=identicon&r=PG&f=1", "display_name": "mihaicata1205", "link": "https://stackoverflow.com/users/4207114/mihaicata1205"}, "edited": false, "score": 0, "creation_date": 1483542764, "post_id": 41466971, "comment_id": 70139743, "body": "Thanks a lot! @BLUEPIXY"}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": true, "score": 0, "last_activity_date": 1483542700, "last_edit_date": 1483542700, "creation_date": 1483542319, "answer_id": 41466971, "question_id": 41465801, "link": "https://stackoverflow.com/questions/41465801/unable-to-read-a-structure-from-a-text-file-in-c/41466971#41466971", "title": "Unable to read a structure from a text file in C", "body": "<p>fix like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct {\n    long long int id;//32bit int can't hold like 5235252525\n    char name[20];//Allocate space\n    float weight;\n} Person;\n\n#define FORMAT \"%*s ID:%lld Name:%19[^\\n] Weight:%f %*s\"\n\nint main(void){\n    FILE *input=fopen(\"input.txt\", \"r+\");\n    if(!input){\n        perror(\"fopen\");\n        return -1;\n    }\n    int n = 0;\n    Person p;\n    while(3==fscanf(input, FORMAT, &amp;p.id, p.name, &amp;p.weight))\n        ++n;\n\n    printf(\"number of record: %d\\n\", n);\n    Person *person = malloc(n * sizeof(Person));\n    if(!person){\n        perror(\"malloc\");\n        fclose(input);\n        return -2;\n    }\n\n    rewind(input);\n\n    for (int i = 0; i &lt; n; ++i){\n        fscanf(input, FORMAT, &amp;person[i].id, person[i].name, &amp;person[i].weight);\n    }\n    fclose(input);\n\n    //check print\n    for (int i = 0; i &lt; n; ++i){\n        printf(\"ID:%lld, Name:%s, Weight:%.2f\\n\", person[i].id, person[i].name, person[i].weight);\n    }\n    free(person);\n\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 4207114, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d188e8f16d66f69bd47453fab864ee7?s=128&d=identicon&r=PG&f=1", "display_name": "mihaicata1205", "link": "https://stackoverflow.com/users/4207114/mihaicata1205"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 41466971, "answer_count": 1, "score": -4, "last_activity_date": 1483542700, "creation_date": 1483538896, "question_id": 41465801, "link": "https://stackoverflow.com/questions/41465801/unable-to-read-a-structure-from-a-text-file-in-c", "title": "Unable to read a structure from a text file in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct\n{\n    int id;\n    char* name;\n    float weight;\n  } Person;\n\n\n\n\n\nint main()\n{\n    Person *person=malloc(10*sizeof(Person));\n    int i=0;\n    char row[20];\n    FILE *input=fopen(\"input.txt\",\"r+\");\n\n    while(fscanf( input, \"%s\", &amp;row)&gt;0) i++;\n    i/=5;\n    printf(\"%d\\n\", i);\n\n\n    fseek(input,0,SEEK_SET);\n\n\n    int j;\n    char string[20];\n    for (j=0;j&lt;i;j++){\n    fscanf(input,\"%s\",string);\n    fscanf(input,\"ID:%d\",&amp;person[j].id);\n    fscanf(input,\"Name:%s\",person[j].name);\n    fscanf(input,\"Weight:%f\",&amp;person[j].weight);\n    fscanf(input,\"%s\",string);\n    }\n\n    fclose(input);\n\n\n//Person:{\n  //ID:1214124141\n    //Name:Trump\n    //Weight:101.50\n     //}\n    //Person:{\n    //ID:5235252525\n    //Name:Obama\n    //Weight:78.30\n    //}\n\n   return 0;\n}\n</code></pre>\n\n<p>Hello!\nI want to read a structure from a file, but my array <strong>person</strong> contains only 0 even after I read from the file. My input file has the structure shown in the comment lines.</p>\n\n<p>What am I not doing well?\nThanks a lot for the help!</p>\n"}, {"tags": ["c", "file", "c-strings"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 5, "creation_date": 1483538274, "post_id": 41465525, "comment_id": 70136589, "body": "Perhaps because you are using <code>feof</code> incorrectly. Please see <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a> Better to test the return value from <code>fscanf</code> provided for your assurance that it did scan what you intended."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1483540278, "post_id": 41465525, "comment_id": 70138025, "body": "Note that you should not call <code>fclose()</code> when you fail to open the file.  Since you make no use of the command line arguments, it would be clearer to write <code>int main(void)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 1, "last_activity_date": 1483538343, "last_edit_date": 1495542275, "creation_date": 1483538343, "answer_id": 41465612, "question_id": 41465525, "link": "https://stackoverflow.com/questions/41465525/how-to-save-in-a-string-the-contents-of-a-text-file/41465612#41465612", "title": "How to save in a string the contents of a text file", "body": "<p>Besides <a href=\"https://stackoverflow.com/q/5431941/694576\"><code>while(!feof(fp))</code> being \"<em>always wrong</em>\"</a> you miss to <code>0</code>-terminate the result string.</p>\n\n<p>To do so place a </p>\n\n<pre><code>testo[j] = '\\0'\n</code></pre>\n\n<p>just after the <code>while</code>-loop.</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1483540738, "post_id": 41466030, "comment_id": 70138340, "body": "<code>leggiparola</code> needs to be typed <code>int</code> (which isn&#39;t the case as per the OP&#39;s code)  for your proposal to work."}, {"owner": {"reputation": 457, "user_id": 7363182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiVQq.png?s=128&g=1", "display_name": "Demetrio", "link": "https://stackoverflow.com/users/7363182/demetrio"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483548634, "post_id": 41466030, "comment_id": 70143937, "body": "<code>getc</code> works with <code>char</code> so there should be no problem."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483548717, "post_id": 41466030, "comment_id": 70144007, "body": "There will be a problem the moment <code>getc()</code> returns <code>EOF</code>. Recommended further reading: <a href=\"http://stackoverflow.com/questions/7119470/int-c-getchar\">stackoverflow.com/questions/7119470/int-c-getchar</a>"}, {"owner": {"reputation": 457, "user_id": 7363182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiVQq.png?s=128&g=1", "display_name": "Demetrio", "link": "https://stackoverflow.com/users/7363182/demetrio"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483549341, "post_id": 41466030, "comment_id": 70144421, "body": "I didn&#39;t know that. Sometimes i used <code>getc()</code> with <code>char</code> and i never had problems. Anyway thanks for the advice."}], "tags": [], "owner": {"reputation": 457, "user_id": 7363182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiVQq.png?s=128&g=1", "display_name": "Demetrio", "link": "https://stackoverflow.com/users/7363182/demetrio"}, "is_accepted": false, "score": 1, "last_activity_date": 1483549960, "last_edit_date": 1483549960, "creation_date": 1483539528, "answer_id": 41466030, "question_id": 41465525, "link": "https://stackoverflow.com/questions/41465525/how-to-save-in-a-string-the-contents-of-a-text-file/41466030#41466030", "title": "How to save in a string the contents of a text file", "body": "<p>Instead of using fscanf, try with getc:</p>\n\n<pre><code>int leggiparola; /* This need to be an int to also be able to hold another \n                    unique value for EOF besides 256 different char values. */\n\n...\n\nwhile ( (leggiparola = getc(fp)) != EOF)\n{\n   printf(\"%c\",leggiparola);\n   testo[j++] = leggiparola;\n   if (j==sizeof(testo)-1)\n       break;\n }\n testo[j] = 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1483539947, "creation_date": 1483539947, "answer_id": 41466178, "question_id": 41465525, "link": "https://stackoverflow.com/questions/41465525/how-to-save-in-a-string-the-contents-of-a-text-file/41466178#41466178", "title": "How to save in a string the contents of a text file", "body": "<p>Here's fslurp. I't a bit messy due to the need to grow the buffer manually.</p>\n\n<pre><code>/*\n  load a text file into memory\n\n*/\nchar *fslurp(FILE *fp)\n{\n  char *answer;\n  char *temp;\n  int buffsize = 1024;\n  int i = 0;\n  int ch;\n\n  answer = malloc(1024);\n  if(!answer)\n    return 0;\n  while( (ch = fgetc(fp)) != EOF )\n  {\n    if(i == buffsize-2)\n    {\n      if(buffsize &gt; INT_MAX - 100 - buffsize/10)\n      {\n          free(answer);\n          return 0;\n      }\n      buffsize = buffsize + 100 * buffsize/10;\n      temp = realloc(answer, buffsize);\n      if(temp == 0)\n      {\n        free(answer);\n        return 0;\n      }\n      answer = temp;\n    }\n    answer[i++] = (char) ch;\n  }\n  answer[i++] = 0;\n\n  temp = realloc(answer, i);\n  if(temp)\n    return temp;\n  else\n    return answer;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6180458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53639ff988b046ff6faf105d0f63d944?s=128&d=identicon&r=PG&f=1", "display_name": "Paky100", "link": "https://stackoverflow.com/users/6180458/paky100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1483549960, "creation_date": 1483538158, "last_edit_date": 1483538510, "question_id": 41465525, "link": "https://stackoverflow.com/questions/41465525/how-to-save-in-a-string-the-contents-of-a-text-file", "title": "How to save in a string the contents of a text file", "body": "<p>This is the code why when I show in output the string I have all words but with in the final row a strange symbol , an ASCII random symbol...</p>\n\n<p>My objective is to save in a string all words to operate with it.</p>\n\n<p>For example I have this document:</p>\n\n<pre><code>Mario\n\n\nPaul\n\n\nTyler\n</code></pre>\n\n<p>How can i save all words in a string??</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* run this program using the console pauser or add your own getch, system(\"pause\") or input loop */\n\nint main(int argc, char *argv[]) {\n    int l,i=0,j=0,parole=0;\n    char A[10][10];\n    char leggiparola;\n    char testo[500];\n    FILE*fp;\n    fp=fopen(\"parole.txt\",\"r\");\n    if(fp!=NULL)\n    {\n        while(!feof(fp))\n        {\n            fscanf(fp,\"%c\",&amp;leggiparola);\n            printf(\"%c\", leggiparola);\n            testo[j]=leggiparola;\n            j++;\n        }  \n    }\n    fclose(fp);\n    printf(\"%s\",testo);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "io", "printf", "output"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 2, "creation_date": 1483537084, "post_id": 41465129, "comment_id": 70135833, "body": "Your range (and thus the indexing inside the loop) for both <code>for</code> loops are wrong. You are accessing out of bounds of array <code>a</code>. Array index range is <code>0... N-1</code>."}], "answers": [{"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 0, "last_activity_date": 1505273215, "last_edit_date": 1505273215, "creation_date": 1483537174, "answer_id": 41465218, "question_id": 41465129, "link": "https://stackoverflow.com/questions/41465129/generating-absurd-output/41465218#41465218", "title": "Generating absurd output", "body": "<p>You are using the wrong length modifier here:</p>\n\n<pre><code> printf(\"%lld\\n\", count);\n</code></pre>\n\n<p>Doing so invokes undefined behaviour, so anything could be printed \u2014 anything could happen.</p>\n\n<p>To print an <code>int</code> (which <code>count</code> is) just use <code>d</code> without any length modifiers.</p>\n\n<pre><code> printf(\"%d\\n\", count);\n</code></pre>\n\n<p>(or define <code>count</code> to be a <code>long long int</code>, which is what <code>lld</code> expects).</p>\n"}, {"tags": [], "owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "is_accepted": false, "score": 4, "last_activity_date": 1483537177, "creation_date": 1483537177, "answer_id": 41465221, "question_id": 41465129, "link": "https://stackoverflow.com/questions/41465129/generating-absurd-output/41465221#41465221", "title": "Generating absurd output", "body": "<p>There are at least two issues:\nFirst, in C array indexes start with 0, not 1. So it must be</p>\n\n<pre><code>    for(i = 0; i &lt; n; i++)\n        scanf(\"%lld\", &amp;a[i]);\n\n    count = 1;\n    limit = a[0];\n    for(i = 1; i &lt; n; i++)\n    {\n        if(a[i] &lt; limit)\n        {\n            count++;\n            limit = a[i];\n        }\n    }\n</code></pre>\n\n<p>Second, you call <code>printf(\"%lld\\n\", count);</code> but <code>count</code> is an 'ordinary int', so it should be <code>printf(\"%d\\n\", count);</code></p>\n"}, {"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 2, "last_activity_date": 1483537230, "creation_date": 1483537230, "answer_id": 41465235, "question_id": 41465129, "link": "https://stackoverflow.com/questions/41465129/generating-absurd-output/41465235#41465235", "title": "Generating absurd output", "body": "<p>I cannot reproduce the garbage output, but I see two occurrences of UB in your code, caused by accessing the <code>a</code> array out of bounds:</p>\n\n<pre><code>for(i = 1; i &lt;= n; i++)\n   scanf(\"%lld\", &amp;a[i]);\n</code></pre>\n\n<p>...and...</p>\n\n<pre><code>for(i = 2; i &lt;= n; i++)\n{         \n    if(a[i] &lt; limit)\n    {\n            count++;\n            limit = a[i];\n    }\n}\n</code></pre>\n\n<p>In the first case you're iterating over the <strong>[1, <code>n</code>]</strong> range <em>(where <code>n</code> is inclusive)</em>. In the second case you're iterating over the <strong>[2, <code>n</code>]</strong> range <em>(where <code>n</code> is inclusive)</em>.</p>\n\n<p>But your <code>a</code> array has <code>n</code> elements, so its range is <strong>[0, n)</strong>, with <code>n</code> <strong>exclusive</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 1, "last_activity_date": 1483537311, "creation_date": 1483537311, "answer_id": 41465262, "question_id": 41465129, "link": "https://stackoverflow.com/questions/41465129/generating-absurd-output/41465262#41465262", "title": "Generating absurd output", "body": "<p>Given</p>\n\n<pre><code>int count;\n</code></pre>\n\n<p>this code</p>\n\n<pre><code>printf(\"%lld\\n\", count);\n</code></pre>\n\n<p>is undefined behavior.</p>\n\n<p>Per <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">the C Standard</a>, the format specifier <code>\"ll\"</code> is for <code>long long int</code> types:</p>\n\n<blockquote>\n  <p>ll (ell-ell)   Specifies that a following <code>d</code>, <code>i</code>, <code>o</code>, <code>u</code>, <code>x</code>, or <code>X</code>\n  conversion specifier applies to a <code>long long int</code> or <code>unsigned long long int</code> argument; or that a following <code>n</code> conversion specifier applies to a\n  pointer to a <code>long long int</code> argument.</p>\n</blockquote>\n\n<p>And</p>\n\n<blockquote>\n  <p>If  a  conversion  specification  is  invalid,  the  behavior  is \n  undefined.</p>\n</blockquote>\n"}], "owner": {"reputation": 15, "user_id": 6488203, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b42f5df712454dad7567d611347c1441?s=128&d=identicon&r=PG&f=1", "display_name": "underdog_eagle", "link": "https://stackoverflow.com/users/6488203/underdog-eagle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1505273215, "creation_date": 1483536922, "last_edit_date": 1483537629, "question_id": 41465129, "link": "https://stackoverflow.com/questions/41465129/generating-absurd-output", "title": "Generating absurd output", "body": "<p>I wrote the following code but it is generating absurd output values. I can't figure out what's wrong in the code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int t, n, i, count;\n    scanf(\"%d\", &amp;t);\n\n    while(t--)\n    {\n        scanf(\"%d\", &amp;n);\n        long long a[n], limit;\n\n        for(i = 1; i &lt;= n; i++)\n            scanf(\"%lld\", &amp;a[i]);\n\n        count = 1;\n        limit = a[1];\n        for(i = 2; i &lt;= n; i++)\n        {\n            if(a[i] &lt; limit)\n            {\n                count++;\n                limit = a[i];\n            }\n        }\n\n        printf(\"%lld\\n\", count);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>INPUT :-</strong></p>\n\n<blockquote>\n  <p>3<br>\n  1<br>\n  10<br>\n  3<br>\n  8 3 6<br>\n  5<br>\n  4 5 1 2 3  </p>\n</blockquote>\n\n<p><strong>OUTPUT :-</strong></p>\n\n<blockquote>\n  <p>-4621320042389176319<br>\n  4615368115365085186<br>\n  -4621320334446952446  </p>\n</blockquote>\n\n<p>Please give the explanation for whatever problem with my code.</p>\n"}, {"tags": ["c", "pam"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1483540840, "post_id": 41464697, "comment_id": 70138408, "body": "My understanding is that PAM is used to verify (authenticate) that the user can present information that confirms that they are who they claim to be (or who the program decides they are claiming to be).  I don&#39;t think it has provision for deciding who they claim to be; that is effectively a given.  Thus I&#39;m not sure you can do what you want.  But neither am I sure you can&#39;t \u2014 I may have forgotten something relevant."}, {"owner": {"reputation": 2153, "user_id": 4764736, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1423363884633192/picture?type=large", "display_name": "DawidPi", "link": "https://stackoverflow.com/users/4764736/dawidpi"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1483543483, "post_id": 41464697, "comment_id": 70140196, "body": "@JonathanLeffler I think, you might be right. I am a PAM beginner though and I have never implemented any module. I thought it can be possible, because otherwise it would be quite a drawback, as biometric methods of authentication would be not so fully useful"}], "owner": {"reputation": 2153, "user_id": 4764736, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1423363884633192/picture?type=large", "display_name": "DawidPi", "link": "https://stackoverflow.com/users/4764736/dawidpi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1483535584, "creation_date": 1483535584, "question_id": 41464697, "link": "https://stackoverflow.com/questions/41464697/pam-custom-way-to-get-user", "title": "PAM custom way to get user", "body": "<p>my aim is to create custom PAM authentication module based on face recognition. </p>\n\n<p>I am currently having some behavioral issues, because, the way I want this to work is:</p>\n\n<ul>\n<li>user boots the PC,</li>\n<li>camera runs and makes face recognition</li>\n<li>based on who is recognized, user is logged to a proper account.</li>\n</ul>\n\n<p>there might be the issue, when user has multiple accounts, but let's assume this is not important.</p>\n\n<p>So in this scenario I want to be able to determine user on my own, without user interaction. And the usual way to find out username in pam authentication module is by calling <code>pam_get_user</code>.</p>\n\n<p>Is this possible to make it work the way I want, or the user have to pass it's username every time he/she wants to login?</p>\n"}, {"tags": ["c", "matlab", "compiler-errors", "simulink", "s-function"], "comments": [{"owner": {"reputation": 844, "user_id": 7659, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c8bfd87b3ffb5deea9019ff5a5c5760?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/7659/aaron"}, "edited": false, "score": 0, "creation_date": 1483535531, "post_id": 41464523, "comment_id": 70134851, "body": "Very likely you have 2 things named &quot;example&quot;."}, {"owner": {"reputation": 25, "user_id": 7374251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7977fd1610ef6a25c7be3b1bd31b5c3?s=128&d=identicon&r=PG&f=1", "display_name": "J.M.", "link": "https://stackoverflow.com/users/7374251/j-m"}, "reply_to_user": {"reputation": 844, "user_id": 7659, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4c8bfd87b3ffb5deea9019ff5a5c5760?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/7659/aaron"}, "edited": false, "score": 0, "creation_date": 1483535894, "post_id": 41464523, "comment_id": 70135089, "body": "Thanks for the fast response. Unfortunately not, I searched all files and the name is not in use anywhere else - except for the declaration of the external function above my main function and the function call itself."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1483537125, "post_id": 41464523, "comment_id": 70135866, "body": "Are those in the same file example.obj, or are there two files example.obj in different directories?"}, {"owner": {"reputation": 25, "user_id": 7374251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7977fd1610ef6a25c7be3b1bd31b5c3?s=128&d=identicon&r=PG&f=1", "display_name": "J.M.", "link": "https://stackoverflow.com/users/7374251/j-m"}, "edited": false, "score": 0, "creation_date": 1483539230, "post_id": 41464523, "comment_id": 70137248, "body": "They are named differently (&#39;example&#39; was just a common spaceholder). I have a file example.c which I am compiling, thus it creates: example.obj. During this compilation I get the above mentioned error example.obj:example.c:(.text+0x0): multiple definition of &#39;example&#39;."}, {"owner": {"reputation": 1354, "user_id": 5412470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lCzZm.png?s=128&g=1", "display_name": "hmofrad", "link": "https://stackoverflow.com/users/5412470/hmofrad"}, "edited": false, "score": 0, "creation_date": 1483587796, "post_id": 41464523, "comment_id": 70159748, "body": "Have you included the <code>example.c</code> in another <code>c</code> file of your project?"}, {"owner": {"reputation": 25, "user_id": 7374251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7977fd1610ef6a25c7be3b1bd31b5c3?s=128&d=identicon&r=PG&f=1", "display_name": "J.M.", "link": "https://stackoverflow.com/users/7374251/j-m"}, "edited": false, "score": 0, "creation_date": 1483602302, "post_id": 41464523, "comment_id": 70164618, "body": "No, it is just declared as external function above the main function and called one time within the main function"}, {"owner": {"reputation": 25, "user_id": 7374251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7977fd1610ef6a25c7be3b1bd31b5c3?s=128&d=identicon&r=PG&f=1", "display_name": "J.M.", "link": "https://stackoverflow.com/users/7374251/j-m"}, "edited": false, "score": 0, "creation_date": 1484136794, "post_id": 41464523, "comment_id": 70384571, "body": "I avoided the Problem by including the relevant parts of the mentioned c functions into my main program. I still could not figure out why the error occured. Nonetheless I want to thank you guys for your consideration."}], "owner": {"reputation": 25, "user_id": 7374251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7977fd1610ef6a25c7be3b1bd31b5c3?s=128&d=identicon&r=PG&f=1", "display_name": "J.M.", "link": "https://stackoverflow.com/users/7374251/j-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483541108, "creation_date": 1483534979, "last_edit_date": 1592644375, "question_id": 41464523, "link": "https://stackoverflow.com/questions/41464523/compiling-c-s-function-in-matlab-multiple-definition-error", "title": "Compiling C S-Function in MATLAB multiple definition error", "body": "<p>I am trying to compile various C-Functions in MATLAB Simulink using the S-function builder block and the minGW 64bit Compiler.\nA syntax error in the code is impossible since it is code from an ECU which is in production and running for years.</p>\n<p>I keep getting the following error message with two of my files:</p>\n<blockquote>\n<p>...example.obj:example.c:(.text+0x0): multiple definition of `example'</p>\n<p>...example.obj:example.c:(.text+0x0): first defined here</p>\n</blockquote>\n<p>The error confuses me since it is referring to the same position as the &quot;first definition&quot;.\nIn the other functions it is position (<code>.text+0x17a</code>).</p>\n<p>Has any of you guys faced the same problem or any idea how to fix it? Can it be a bug of the compiler?</p>\n<p>Greetings from Germany,\nJonathan</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 0, "creation_date": 1483534786, "post_id": 41464404, "comment_id": 70134347, "body": "You want a variable length array, which luckily C99 onwards has. Read in how many elements you need with the scanf line before declaring <code>int a[n];</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483536041, "post_id": 41464404, "comment_id": 70135167, "body": "&quot;... this program will be compatible with most hardware&quot; - Shouldn&#39;t the program be written such that it is appropriate for the <b>problem</b> it is meant to solve?"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1483542864, "post_id": 41464404, "comment_id": 70139797, "body": "The updated code appears to work if you add the <code>#include &lt;stdio.h&gt;</code>. What is the problem? Further, this sounds like a new question, unrelated to the old one. If you can identify a problem, maybe post a new question?"}, {"owner": {"reputation": 77, "user_id": 7374044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cc3bc2cea058b61261415cf16001641?s=128&d=identicon&r=PG&f=1", "display_name": "user7374044", "link": "https://stackoverflow.com/users/7374044/user7374044"}, "edited": false, "score": 0, "creation_date": 1483548203, "post_id": 41464404, "comment_id": 70143637, "body": "It works! Thank You all soooo much! I&#39;m sooo happy. :) Stackoverflow - the place for me :)"}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 2, "last_activity_date": 1483534783, "creation_date": 1483534783, "answer_id": 41464466, "question_id": 41464404, "link": "https://stackoverflow.com/questions/41464404/size-of-specific-array/41464466#41464466", "title": "Size of specific array", "body": "<p>Your array <code>a</code> can contain only 10 <code>int</code>'s. So, if you input <code>n</code> as 11, then you have <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behaviour</em></a> due to out-of-bounds access.</p>\n\n<p>You can use a C99 <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">VLA</a> (varaible length array) or use dynamic memory allocation using <code>malloc()</code> family functions.</p>\n\n<p>Note: VLAs are optional in C11. So, you may want to check if your implementation doesn't support it by using the macro <code>__STDC_NO_VLA__</code>.</p>\n\n<p>A potential problem with VLAs (which have <em>automatic storage duration</em> -- commonly known as \"stack\") is that it's hard to figure out if the allocation is successful for large arrays.</p>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 1, "last_activity_date": 1483534792, "creation_date": 1483534792, "answer_id": 41464470, "question_id": 41464404, "link": "https://stackoverflow.com/questions/41464404/size-of-specific-array/41464470#41464470", "title": "Size of specific array", "body": "<p>If your C implementation in use supports Variable Length Arrays, then just do:</p>\n\n<pre><code>int i = 0, r = 0, n = 0;\nprintf(\"Enter the amount of numbers in arrays: \";\nscanf(\"%d\", &amp;n);\n\n{\n  int a[n];\n  printf(\"Enter the numbers of array: \";\n  for (i = 0; i &lt; n; i++)\n  {\n    scanf(\"%d\", &amp;a[i]);\n    ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 3294594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kASvf.jpg?s=128&g=1", "display_name": "mpampana", "link": "https://stackoverflow.com/users/3294594/mpampana"}, "is_accepted": false, "score": 2, "last_activity_date": 1483535907, "last_edit_date": 1495540421, "creation_date": 1483535907, "answer_id": 41464787, "question_id": 41464404, "link": "https://stackoverflow.com/questions/41464404/size-of-specific-array/41464787#41464787", "title": "Size of specific array", "body": "<p>If you cannot (or you do not want to) use VLA, use malloc: <a href=\"http://man7.org/linux/man-pages/man3/malloc.3.html\" rel=\"nofollow noreferrer\" title=\"Documentation: Linux Man Page for malloc\">man malloc</a></p>\n\n<p>Example:</p>\n\n<pre><code>int *buffer;\nint dim;\n\nprintf(\"Enter the amount of numbers in arrays: \");\nscanf(\"%d\", &amp;dim);\nbuffer = (int*) malloc(sizeof(int) * dim);\nif (buffer == NULL) {\n   perror(\"Malloc error\");\n   exit(-1);\n}\n</code></pre>\n\n<p>More on malloc here: <a href=\"https://stackoverflow.com/questions/1119134/how-do-malloc-and-free-work\" title=\"malloc details\">Stack Overflow: How do malloc() and free() work? </a></p>\n"}], "owner": {"reputation": 77, "user_id": 7374044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cc3bc2cea058b61261415cf16001641?s=128&d=identicon&r=PG&f=1", "display_name": "user7374044", "link": "https://stackoverflow.com/users/7374044/user7374044"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1483541049, "creation_date": 1483534601, "last_edit_date": 1483541049, "question_id": 41464404, "link": "https://stackoverflow.com/questions/41464404/size-of-specific-array", "title": "Size of specific array", "body": "<p>I have an algorithm, which should show if two arrays are similar or not. It works but I don't know what <strong>size</strong> should be of the array.</p>\n\n<p>For example:</p>\n\n<pre><code>int a[10], i = 0, r = 0, n = 0;\nprintf(\"Enter the amount of numbers in arrays: \";\nscanf(\"%d\", &amp;n);\n\nprintf(\"Enter the numbers of array: \";\nfor (i = 0; i &lt; n; i++)\n{\n   scanf(\"%d\", &amp;a[i]);\n}\n</code></pre>\n\n<p>If I enter for \"n\" variable n = 11, program stops at the end. My question is: What number should I put to the array a[<strong>THAT_PLACE</strong>] to be sure that this program will be compatible with most hardware ( I heard that this is also depending from memory. )</p>\n\n<p>@UPDATE1:</p>\n\n<p>I chose an <strong>alk's</strong> <strong>solution</strong>. But it still doesn't work. Here is my code:</p>\n\n<pre><code>int main()\n{\n\nint i = 0, temp_a = 0, switch_a = 0, temp_b = 0, switch_b = 0, n = 0;\n\nprintf(\"Enter the amount of numbers in arrays: \");\nscanf(\"%d\", &amp;n);\n{\n    int a[n], b[n];\n    printf(\"Enter elements of first array: \");\n    for (i = 0; i &lt; n; ++i)\n    {\n        scanf(\"%d\", &amp;a[i]);\n    }\n    printf(\"Enter elements of second array:  \");\n    for (i = 0; i &lt; n; ++i)\n    {\n        scanf(\"%d\", &amp;b[i]);\n    }\n    do\n    {\n        switch_a = 0;\n        for (i = 0; i &lt; n - 1; i++)\n        {\n            if (a[i] &gt; a[i + 1])\n            {\n                switch_a = switch_a + 1;\n                temp_a = a[i];\n                a[i] = a[i + 1];\n                a[i + 1] = temp_a;\n            }\n        }\n    } while (switch_a != 0);\n    //bubble sort\n    do\n    {\n        switch_b = 0;\n        for (i = 0; i &lt; n - 1; i++)\n        {\n            if (b[i] &gt; b[i + 1])\n            {\n                switch_b = switch_b + 1;\n                temp_b = b[i];\n                b[i] = b[i + 1];\n                b[i + 1] = temp_b;\n            }\n        }\n    } while (switch_b != 0);\n    //Cheks, if an arrays are the same. \n    for (i = 0; i &lt; n; i++)\n    {\n        if (a[i] != b[i])\n        {\n            printf(\"This two arrays don't have the same elements.\\n\\n\\n\");\n            return 0;\n        }\n    }\n\n    printf(\"This two arrays have the same elements.\\n\\n\\n\");\n}\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>Could you check it for me? I can't find what is wrong...</p>\n"}, {"tags": ["c", "arrays", "function", "pointers", "dynamic-arrays"], "answers": [{"comments": [{"owner": {"reputation": 1166, "user_id": 4789408, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/cff1770f7ddafa271e11c30a1c0cbf17?s=128&d=identicon&r=PG&f=1", "display_name": "user4789408", "link": "https://stackoverflow.com/users/4789408/user4789408"}, "edited": false, "score": 0, "creation_date": 1483533141, "post_id": 41463873, "comment_id": 70133276, "body": "Your answer is correct, that solved the problem but now I would know why output was correct?"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 1166, "user_id": 4789408, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/cff1770f7ddafa271e11c30a1c0cbf17?s=128&d=identicon&r=PG&f=1", "display_name": "user4789408", "link": "https://stackoverflow.com/users/4789408/user4789408"}, "edited": false, "score": 0, "creation_date": 1483533331, "post_id": 41463873, "comment_id": 70133396, "body": "@user4789408: I don&#39;t understand &quot;now I would know why output was correct&quot;... Is that a question???"}, {"owner": {"reputation": 1166, "user_id": 4789408, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/cff1770f7ddafa271e11c30a1c0cbf17?s=128&d=identicon&r=PG&f=1", "display_name": "user4789408", "link": "https://stackoverflow.com/users/4789408/user4789408"}, "edited": false, "score": 0, "creation_date": 1483533492, "post_id": 41463873, "comment_id": 70133502, "body": "If I am performing illegal memory-access operation on pt[n], pt[n+1] why at the end of Main the output is correct?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1483533583, "post_id": 41463873, "comment_id": 70133564, "body": "This in undefined behaviour. And <i>undefined</i> really means that anything can happen. Even printing your expected result could happen. Not every access to illegal memory location causes a segmentation fault."}], "tags": [], "owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "is_accepted": false, "score": 0, "last_activity_date": 1483533236, "last_edit_date": 1483533236, "creation_date": 1483532994, "answer_id": 41463873, "question_id": 41463784, "link": "https://stackoverflow.com/questions/41463784/increase-dynamic-array-size-with-a-function-free-error-invalid-next-size-fast/41463873#41463873", "title": "Increase dynamic array size with a function; free error, invalid next size (fast)", "body": "<p>Well, in function <code>extend</code>:</p>\n\n<ul>\n<li>You are allocating <code>pt</code> to a memory block of <code>n</code> entries</li>\n<li>You are attempting to access <code>pt</code> at indexes beyond <code>n-1</code></li>\n</ul>\n\n<p>More specifically, with:</p>\n\n<pre><code>pt = realloc(V, n*sizeof(int));\nfor (i=6; i&lt;(5+n); i++)\n    pt[i] = ...\n</code></pre>\n\n<p>You are performing illegal memory-access operations on:</p>\n\n<ul>\n<li><code>pt[n]</code></li>\n<li><code>pt[n+1]</code></li>\n<li><code>pt[n+2]</code></li>\n<li><code>pt[n+3]</code></li>\n<li><code>pt[n+4]</code></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1166, "user_id": 4789408, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/cff1770f7ddafa271e11c30a1c0cbf17?s=128&d=identicon&r=PG&f=1", "display_name": "user4789408", "link": "https://stackoverflow.com/users/4789408/user4789408"}, "edited": false, "score": 1, "creation_date": 1483533311, "post_id": 41463916, "comment_id": 70133381, "body": "I have an array of 5 elements, &quot;n&quot; is a number, extend function should add others &quot;n&quot; elements to the array with 5 elements.    For example: Array[5], n = 3 -&gt; Array[8]"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1166, "user_id": 4789408, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/cff1770f7ddafa271e11c30a1c0cbf17?s=128&d=identicon&r=PG&f=1", "display_name": "user4789408", "link": "https://stackoverflow.com/users/4789408/user4789408"}, "edited": false, "score": 0, "creation_date": 1483533403, "post_id": 41463916, "comment_id": 70133448, "body": "@user4789408 The function allocates n elements but in the loop there is used n + 5 elements."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 1166, "user_id": 4789408, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/cff1770f7ddafa271e11c30a1c0cbf17?s=128&d=identicon&r=PG&f=1", "display_name": "user4789408", "link": "https://stackoverflow.com/users/4789408/user4789408"}, "edited": false, "score": 1, "creation_date": 1483533499, "post_id": 41463916, "comment_id": 70133506, "body": "@user4789408 If you want to extent to 8 elements, you must pass n=8 to your function, not n=3. <code>realloc()</code> gets the new size. Not the delta size."}, {"owner": {"reputation": 1166, "user_id": 4789408, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/cff1770f7ddafa271e11c30a1c0cbf17?s=128&d=identicon&r=PG&f=1", "display_name": "user4789408", "link": "https://stackoverflow.com/users/4789408/user4789408"}, "edited": false, "score": 0, "creation_date": 1483533675, "post_id": 41463916, "comment_id": 70133615, "body": "I modified the code, now with &quot;realloc(V, (5+n)*sizeof(int))&quot; it should be ok?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1166, "user_id": 4789408, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/cff1770f7ddafa271e11c30a1c0cbf17?s=128&d=identicon&r=PG&f=1", "display_name": "user4789408", "link": "https://stackoverflow.com/users/4789408/user4789408"}, "edited": false, "score": 0, "creation_date": 1483533751, "post_id": 41463916, "comment_id": 70133665, "body": "@user4789408 It is a bad idea because now you force others to modify their answers."}, {"owner": {"reputation": 1166, "user_id": 4789408, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/cff1770f7ddafa271e11c30a1c0cbf17?s=128&d=identicon&r=PG&f=1", "display_name": "user4789408", "link": "https://stackoverflow.com/users/4789408/user4789408"}, "edited": false, "score": 0, "creation_date": 1483533858, "post_id": 41463916, "comment_id": 70133740, "body": "@VladfromMoscow I&#39;ll keep the original answer"}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1483534698, "post_id": 41463916, "comment_id": 70134284, "body": "addionally I would suggest to make <code>extend()</code> return whether or not <code>realloc()</code> was successful (return <code>pt</code> or 0/-1), because if it fails, the calling function must not try to fill any more array elements"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1483535180, "post_id": 41463916, "comment_id": 70134614, "body": "@IngoLeonhardt I agree with you."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1483535271, "last_edit_date": 1483535271, "creation_date": 1483533155, "answer_id": 41463916, "question_id": 41463784, "link": "https://stackoverflow.com/questions/41463784/increase-dynamic-array-size-with-a-function-free-error-invalid-next-size-fast/41463916#41463916", "title": "Increase dynamic array size with a function; free error, invalid next size (fast)", "body": "<p>The function does not change the original variable <code>v</code>. It should be defined at least like</p>\n\n<pre><code>void extend(int **V, int n, int s)\n{\n    int *pt;\n    pt = realloc(*V, n*sizeof(int));\n    if ( pt )\n    {\n        int i;\n        pt[5]=s;\n        for(i=6; i &lt; n; i++)\n        pt[i] = pt[i-1]*2;\n        *V = pt; \n    }\n}\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>int extend(int **V, int n, int s)\n{\n    int *pt;\n\n    pt = realloc(*V, n*sizeof(int));\n    int success = pt != NULL;\n\n    if ( success )\n    {\n        int i;\n        pt[5]=s;\n        for(i=6; i &lt; n; i++)\n        pt[i] = pt[i-1]*2;\n        *V = pt; \n    }\n\n    return success;\n}\n</code></pre>\n\n<p>And the function should be called lije</p>\n\n<pre><code>extend( &amp;v,n,sum);\n</code></pre>\n\n<p>Take into account that the function is unsafe because in general <code>n</code> can be less than or equal to 5. And this statement</p>\n\n<pre><code>for(i=6;i&lt;(5+n);i++)\n          ^^^^\n</code></pre>\n\n<p>can result in undefined behavior.</p>\n\n<p>Or the function shall allocate n + 5 elements. For example</p>\n\n<pre><code>    pt = realloc(*V, ( n + 5 )*sizeof(int));\n                     ^^^^^^^^\n</code></pre>\n\n<p>Also the using of this magic number 5 is unclear and does not make sense.</p>\n"}, {"tags": [], "owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "is_accepted": false, "score": 0, "last_activity_date": 1483534061, "last_edit_date": 1483534061, "creation_date": 1483533749, "answer_id": 41464122, "question_id": 41463784, "link": "https://stackoverflow.com/questions/41463784/increase-dynamic-array-size-with-a-function-free-error-invalid-next-size-fast/41464122#41464122", "title": "Increase dynamic array size with a function; free error, invalid next size (fast)", "body": "<p>The realloc returns a pointer to the new memory block but you do not return that to the caller. Instead v in main, is the same v that was before the call but now invalid and which causes your error no doubt, easiest is to return pt instead:</p>\n\n<pre><code>int* extend(int *V, int n, int s)\n{\n    int *pt;\n    pt = realloc(V, n*sizeof(int));\n    int i;\n    pt[5]=s;\n    for(i=6;i&lt;(5+n);i++)\n    pt[i] = pt[i-1]*2;\n    return pt;\n}\n...\nv = extend(v,n,sum);\n</code></pre>\n\n<p>another thing that is not correct is your initialization of the new elements, n should contain the number of new elements <strong>plus</strong> any old since you want the allocated the block to be bigger. better to give old and new number of elements to it:</p>\n\n<pre><code>int* extend(int *V, int oldNumber, int newNumber, int s)\n{\n    int *pt = realloc(V, newNumber*sizeof(int));\n    int i;\n    if (pt==NULL) \n    {\n      fprintf(stderr,\"Out of memory\\n\");\n      return V;\n    }\n    pt[oldNumber]=s;\n    // now you can initialize the rest of the array\n    for(i=oldNumber+1;i&lt;newNumber;i++) \n      pt[i] = pt[i-1]*2;\n    return pt;\n}\n...\nv = extend(v,5,n,sum);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1483534479, "creation_date": 1483534479, "answer_id": 41464361, "question_id": 41463784, "link": "https://stackoverflow.com/questions/41463784/increase-dynamic-array-size-with-a-function-free-error-invalid-next-size-fast/41464361#41464361", "title": "Increase dynamic array size with a function; free error, invalid next size (fast)", "body": "<p>Grow an array like this</p>\n\n<pre><code>  int capacity = 10; // don't start off as tiny\n  ENTRY *array = malloc(capacity * sizeof(ENTRY));\n  int N = 0;   //number of entries.\n</code></pre>\n\n<p>To add</p>\n\n<pre><code>   int addentry(ENTRY *entry)\n   {\n      ENTRY *temp;\n\n      if(N &gt;= capacity)\n      {\n          temp = realloc(array, (capacity + capacity/2) * sizeof(ENTRY));\n          if(!temp)\n            goto out_of_memory;\n          array = temp;\n          capacity = capacity + capacity/2;\n      }\n      array[N] = *entry;\n      N++;\n      return 0;\n    out_of_memory:\n        //always a problem, maybe terminate program here\n        // as it is, just shunt up\n        return -1;\n   }\n</code></pre>\n\n<p>You need the temp because realloc returns 0 on failure but keeps\nthe argument intact, so you need to keep array to destroy it\ngracefully. Grow by about 1.5, doubling is too aggressive and\nreallocating on every call is too expensive.</p>\n"}], "owner": {"reputation": 1166, "user_id": 4789408, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/cff1770f7ddafa271e11c30a1c0cbf17?s=128&d=identicon&r=PG&f=1", "display_name": "user4789408", "link": "https://stackoverflow.com/users/4789408/user4789408"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 41463916, "answer_count": 4, "score": 2, "last_activity_date": 1483535271, "creation_date": 1483532710, "last_edit_date": 1483534016, "question_id": 41463784, "link": "https://stackoverflow.com/questions/41463784/increase-dynamic-array-size-with-a-function-free-error-invalid-next-size-fast", "title": "Increase dynamic array size with a function; free error, invalid next size (fast)", "body": "<p>I need to create a dynamic array and put five number, after there is another input which is how much I have to increase the array size.\nWhen all input are ended I am going to increase the array size and put numbers inside.</p>\n\n<p>everything works but free return me this error: \"free(): invalid next size (fast): 0x00000...\"</p>\n\n<p>I think there are errors inside \"extend\" function</p>\n\n<pre><code>void extend(int *V, int n, int s)\n{\n    int *pt;\n    pt = realloc(V, n*sizeof(int));\n    int i;\n    pt[5]=s;\n    for(i=6;i&lt;(5+n);i++)\n        pt[i] = pt[i-1]*2;\n}\n\nint main()\n{\n    int *v;\n    int n,i, sum;\n    sum = 0;\n\n    v = malloc(sizeof(int)*5);\n\n    for(i=0;i&lt;5;i++)\n    {\n        scanf(\"%d\", &amp;v[i]);\n        sum+=v[i];\n    }   \n\n    scanf(\"%d\", &amp;n);\n\n    extend(v,n,sum);\n\n    for(i=0;i&lt;(5+n);i++)\n        printf(\"%d\\n\", v[i]);\n    free(v);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "build", "coverity"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 7374099, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MJbCjjpNZgE/AAAAAAAAAAI/AAAAAAAAAF8/8FKTthOLaQw/photo.jpg?sz=128", "display_name": "Sid Gairola", "link": "https://stackoverflow.com/users/7374099/sid-gairola"}, "edited": false, "score": 0, "creation_date": 1483595774, "post_id": 41473323, "comment_id": 70161835, "body": "I am following the instructions on this link <a href=\"https://scan.coverity.com/download?tab=cxx\" rel=\"nofollow noreferrer\">scan.coverity.com/download?tab=cxx</a> And yes i did only copy the bin folder to my project."}, {"owner": {"reputation": 81, "user_id": 7374099, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MJbCjjpNZgE/AAAAAAAAAAI/AAAAAAAAAF8/8FKTthOLaQw/photo.jpg?sz=128", "display_name": "Sid Gairola", "link": "https://stackoverflow.com/users/7374099/sid-gairola"}, "edited": false, "score": 0, "creation_date": 1483601665, "post_id": 41473323, "comment_id": 70164323, "body": "Also how much time does it take for my project to get verified ?"}, {"owner": {"reputation": 1113, "user_id": 5590551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myyec.gif?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/5590551/caleb"}, "reply_to_user": {"reputation": 81, "user_id": 7374099, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MJbCjjpNZgE/AAAAAAAAAAI/AAAAAAAAAF8/8FKTthOLaQw/photo.jpg?sz=128", "display_name": "Sid Gairola", "link": "https://stackoverflow.com/users/7374099/sid-gairola"}, "edited": false, "score": 0, "creation_date": 1483647256, "post_id": 41473323, "comment_id": 70193764, "body": "I can&#39;t really comment on how long it takes for your project to get verified - I don&#39;t work on the SCAN side of things, just the compiler integration side of things. Since you only copied the bin folder, that&#39;d explain your problem. You&#39;ll either need to copy everything or use <code>--prevent-root</code>. It&#39;s possible that creating a <code>bin&#47;</code> symlink to the Coverity installation&#39;s <code>bin&#47;</code> may work for you, instead of outright copying the files."}, {"owner": {"reputation": 81, "user_id": 7374099, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MJbCjjpNZgE/AAAAAAAAAAI/AAAAAAAAAF8/8FKTthOLaQw/photo.jpg?sz=128", "display_name": "Sid Gairola", "link": "https://stackoverflow.com/users/7374099/sid-gairola"}, "edited": false, "score": 0, "creation_date": 1483678585, "post_id": 41473323, "comment_id": 70204076, "body": "thanks it worked, gave the exact path of the bin folder in the Coverity installation&#39;s bin."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1522041191, "post_id": 41473323, "comment_id": 85971397, "body": "What is the name of the shared object that Coverity is looking for? (Adding Coverity root folder, the <code>lib&#47;</code> folder and the <code>bin&#47;</code> folder to <code>$PATH</code> did not help me. Neither did <code>--prevent-root</code>. Neither did setting <code>CLASSPATH</code> to the jre8 <code>lib&#47;</code> folder)."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1522041493, "post_id": 41473323, "comment_id": 85971481, "body": "And <code>ldd &#47;usr&#47;local&#47;bin&#47;cov-analysis-linux64-2017.07&#47;bin&#47;cov-build</code> just says <i><code>not a dynamic executable</code></i>."}, {"owner": {"reputation": 192, "user_id": 3268398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccde2b797d336430ddc588b02a6cb9a6?s=128&d=identicon&r=PG", "display_name": "silvioprog", "link": "https://stackoverflow.com/users/3268398/silvioprog"}, "edited": false, "score": 0, "creation_date": 1534310798, "post_id": 41473323, "comment_id": 90659246, "body": "I got the same problem in a CMake based project but I solved it just adding the <code>bin</code> to the <code>$PATH</code>. My steps was: 1. <code>export PATH=$PATH:&#47;home&#47;user&#47;cov-analysis-linux64-2017.07&#47;</code>; 2. <code>cov-build --dir cov-int make</code> (notice I removed the <code>.&#47;</code> from the command line, since <code>bin</code> was added to <code>$PATH</code>)"}], "tags": [], "owner": {"reputation": 1113, "user_id": 5590551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myyec.gif?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/5590551/caleb"}, "is_accepted": false, "score": 3, "last_activity_date": 1483564356, "creation_date": 1483564356, "answer_id": 41473323, "question_id": 41463659, "link": "https://stackoverflow.com/questions/41463659/coverity-and-failed-to-initialize-icu-try-using-the-prevent-root-option/41473323#41473323", "title": "Coverity and &quot;Failed to initialize ICU, try using the --prevent-root option&quot;", "body": "<p>Coverity uses ICU to handle multibyte encodings. This requires the ICU data files, present in the Coverity installation. That error suggests those files are either missing or not present in the expected location, and suggests you try using <code>--prevent-root</code> to tell it where it can expect to find the files.</p>\n\n<p>Did you <em>only</em> copy the bin directory to your project? This would likely explain the issue, and using <code>--prevent-root</code> to point to the actual Coverity installation should resolve it.</p>\n"}], "owner": {"reputation": 81, "user_id": 7374099, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MJbCjjpNZgE/AAAAAAAAAAI/AAAAAAAAAF8/8FKTthOLaQw/photo.jpg?sz=128", "display_name": "Sid Gairola", "link": "https://stackoverflow.com/users/7374099/sid-gairola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1484, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1522040570, "creation_date": 1483532306, "last_edit_date": 1522040570, "question_id": 41463659, "link": "https://stackoverflow.com/questions/41463659/coverity-and-failed-to-initialize-icu-try-using-the-prevent-root-option", "title": "Coverity and &quot;Failed to initialize ICU, try using the --prevent-root option&quot;", "body": "<p>I have the bin directory in the build directory of my project.</p>\n\n<p>When I run the command <code>./bin/cov-build --dir cov-int make</code> I get the following error -</p>\n\n<blockquote>\n  <p>[ERROR] Failed to initialize ICU, try using the --prevent-root option.</p>\n</blockquote>\n"}, {"tags": ["c#", "c", "struct", "pinvoke"], "comments": [{"owner": {"reputation": 34075, "user_id": 5168011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb70c32e1e533e7c0cb2f9317a6b2aa3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/5168011/guy"}, "edited": false, "score": 1, "creation_date": 1483531788, "post_id": 41463429, "comment_id": 70132387, "body": "What exactly is the problem?"}, {"owner": {"reputation": 2292, "user_id": 215904, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/15a870fee1e3646c8627da49c12aab38?s=128&d=identicon&r=PG", "display_name": "Steinbitglis", "link": "https://stackoverflow.com/users/215904/steinbitglis"}, "reply_to_user": {"reputation": 34075, "user_id": 5168011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb70c32e1e533e7c0cb2f9317a6b2aa3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/5168011/guy"}, "edited": false, "score": 0, "creation_date": 1483531881, "post_id": 41463429, "comment_id": 70132459, "body": "I&#39;m worried that __aligned__(8) changes the memory layout of the struct, so that I have to make equivalent changes on the C# side, but I don&#39;t know what aligned means in this case."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483532043, "post_id": 41463429, "comment_id": 70132547, "body": "Well, <code>__attribute__</code> is defined to nothing, so nothing is happening there ;-). Could be a gcc define."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1483532152, "post_id": 41463429, "comment_id": 70132606, "body": "I don&#39;t know how relevant <a href=\"https://msdn.microsoft.com/en-us/library/ms384329(v=vs.71).aspx\" rel=\"nofollow noreferrer\">this page</a> is (.NET 2003), but they define <code>#pragma pack(push, 8)</code> for the C struct and <code>[StructLayout(LayoutKind::Sequential, Pack=8)]</code> on the C# side."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1483532226, "post_id": 41463429, "comment_id": 70132667, "body": "Sidenote: <code>size_t</code> is unsigned type."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1483532264, "post_id": 41463429, "comment_id": 70132695, "body": "@user694733 True, and not at all guaranteed to have (u)int size."}, {"owner": {"reputation": 2292, "user_id": 215904, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/15a870fee1e3646c8627da49c12aab38?s=128&d=identicon&r=PG", "display_name": "Steinbitglis", "link": "https://stackoverflow.com/users/215904/steinbitglis"}, "edited": false, "score": 0, "creation_date": 1483532389, "post_id": 41463429, "comment_id": 70132771, "body": "Yes, I will have to double check why my &#39;size&#39; is int, that might be a simple mistake on my part. I think the Pack attribute will deal with the other issue. Thanks!"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483532562, "post_id": 41463429, "comment_id": 70132886, "body": "@PeterA.Schneider It&#39;s probably safe to assume this is MS Windows code, so <code>size_t</code> will be a 32-bit unsigned integer."}, {"owner": {"reputation": 2292, "user_id": 215904, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/15a870fee1e3646c8627da49c12aab38?s=128&d=identicon&r=PG", "display_name": "Steinbitglis", "link": "https://stackoverflow.com/users/215904/steinbitglis"}, "edited": false, "score": 0, "creation_date": 1483532713, "post_id": 41463429, "comment_id": 70132969, "body": "the size_t&#39;s on my system should be ulong... it was a mistake an not the core of the question, so I&#39;ve changed the &#39;size&#39; in the question to be ulong."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1483532849, "post_id": 41463429, "comment_id": 70133057, "body": "No, <code>size_t</code> is not <code>ulong</code>. It is <code>UIntPtr</code>. It is pointer sized."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1483534569, "post_id": 41463429, "comment_id": 70134211, "body": "@IanAbbott: Referring (64bit)-Windows: <a href=\"https://msdn.microsoft.com/en-us/library/3b2e7499.aspx\" rel=\"nofollow noreferrer\">&quot;<i><code>size_t</code>, <code>time_t</code>, and <code>ptrdiff_t</code> are 64-bit values on 64-bit Windows operating systems.</i>&quot;</a>"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483547693, "post_id": 41463429, "comment_id": 70143252, "body": "@alk Oops, yes. I should have checked before posting. Sorry for the noise!"}], "answers": [{"comments": [{"owner": {"reputation": 2292, "user_id": 215904, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/15a870fee1e3646c8627da49c12aab38?s=128&d=identicon&r=PG", "display_name": "Steinbitglis", "link": "https://stackoverflow.com/users/215904/steinbitglis"}, "edited": false, "score": 0, "creation_date": 1483533656, "post_id": 41463930, "comment_id": 70133606, "body": "Hmm... wouldn&#39;t &#39;magic&#39; be pushed 4 bytes forward, so that it would start on an 8-byte boundary?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 2292, "user_id": 215904, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/15a870fee1e3646c8627da49c12aab38?s=128&d=identicon&r=PG", "display_name": "Steinbitglis", "link": "https://stackoverflow.com/users/215904/steinbitglis"}, "edited": false, "score": 0, "creation_date": 1483534033, "post_id": 41463930, "comment_id": 70133862, "body": "No it would not. The documentation I linked to doesn&#39;t suggest that."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1483548013, "post_id": 41463930, "comment_id": 70143490, "body": "Wouldn&#39;t the 8 byte alignment affect the size of the structure on 32-bit Windows? I.e. wouldn&#39;t the C version of the struct have 4 bytes of hidden padding at the end to round it up from size 44 to size 48?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1483548448, "post_id": 41463930, "comment_id": 70143808, "body": "@DavidHeffernan Using <code>[StructLayout(LayoutKind.Sequential, Pack=8)]</code> as suggested in earlier comments would appear to fix that."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1483548889, "post_id": 41463930, "comment_id": 70144115, "body": "@IanAbbott Yes, for this particular type, but not universally. <code>Pack</code> impacts alignment of the structure and its members. The C code in the question only specifies alignment of the structure."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1483548968, "post_id": 41463930, "comment_id": 70144180, "body": "@DavidHeffernan Yes, <code>Pack=8</code> would be bad if any members aligned to 16 byte boundaries or larger by default."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1483549240, "post_id": 41463930, "comment_id": 70144363, "body": "@DavidHeffernan The explicit <code>padding</code> member in your 2nd example would be bad on 64-bit Windows, since it would make the C# struct larger than the C struct in that case."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1483549519, "post_id": 41463930, "comment_id": 70144519, "body": "That would matter if you were allocating arrays. Everything is a compromise here."}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": true, "score": 2, "last_activity_date": 1483548647, "last_edit_date": 1483548647, "creation_date": 1483533195, "answer_id": 41463930, "question_id": 41463429, "link": "https://stackoverflow.com/questions/41463429/what-does-aligned-mean-for-structs-in-c/41463930#41463930", "title": "What does &#39;aligned&#39; mean, for structs in c?", "body": "<p>This is a GCC attribute that specifies the minimum alignment of the structure to be 8 bytes. The documentation can be found here: <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Common-Type-Attributes.html#Common-Type-Attributes\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Common-Type-Attributes.html#Common-Type-Attributes</a></p>\n\n<p>This influences allocation of these structs, but it does not impact the offsets of the struct itself. However, it does mean that the native structure may have extra padding after the final member.</p>\n\n<p>There is no equivalent to this in C#, and depending on what the native code does with the struct you may encounter problems. The structure might be misaligned if allocated by your C# code, but that would only affect performance rather than correctness. If the native code makes a copy of the struct, then it will attempt to read any padding at the end of the struct. And conceivably that could lead to an access violation. My guess would be that the heap allocator used by p/invoke will allocate memory in chunks with block size of at least 8, so you'd likely get away with this. But I doubt you could ever rely on that.</p>\n\n<p>Leaving this padding aside, I would translate your struct like this:</p>\n\n<pre><code>[StructLayout(LayoutKind.Sequential)]\npublic struct CommonDialogBaseParam {\n    public UIntPtr size;\n    [MarshalAs(UnmanagedType.ByValArray, SizeConst=36)]\n    public byte[] reserved;\n    public uint magic;\n}\n</code></pre>\n\n<p>Note that I have mapped <code>size_t</code> to <code>UIntPtr</code>, an unsigned pointer sized value. And personally I prefer to see a <code>byte[]</code> for the <code>reserved</code> field. This feels more true to the C code, so far as I can tell.</p>\n\n<p>If you want to be sure that you structure will be big enough then you could add an extra field at the end:</p>\n\n<pre><code>[StructLayout(LayoutKind.Sequential)]\npublic struct CommonDialogBaseParam {\n    public UIntPtr size;\n    [MarshalAs(UnmanagedType.ByValArray, SizeConst=36)]\n    public byte[] reserved;\n    public uint magic;\n    private uint padding;\n}\n</code></pre>\n\n<p>Since none of the types contained in this struct have a size greater than 8, then you could abuse the <code>Pack</code> option of <code>StructLayout</code> to achieve the desired effect:</p>\n\n<pre><code>[StructLayout(LayoutKind.Sequential, Pack=8)]\npublic struct CommonDialogBaseParam {\n    public UIntPtr size;\n    [MarshalAs(UnmanagedType.ByValArray, SizeConst=36)]\n    public byte[] reserved;\n    public uint magic;\n}\n</code></pre>\n\n<p>But be careful with this. The native code aligns the struct. The C# declaration above aligns the struct, and specifies alignment of its members. It so happens here that this does not impact the member alignment, but that would not always be the case.</p>\n\n<p>All in all, a little unsatisfactory.</p>\n"}], "owner": {"reputation": 2292, "user_id": 215904, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/15a870fee1e3646c8627da49c12aab38?s=128&d=identicon&r=PG", "display_name": "Steinbitglis", "link": "https://stackoverflow.com/users/215904/steinbitglis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 41463930, "answer_count": 1, "score": 1, "last_activity_date": 1483548647, "creation_date": 1483531550, "last_edit_date": 1483532622, "question_id": 41463429, "link": "https://stackoverflow.com/questions/41463429/what-does-aligned-mean-for-structs-in-c", "title": "What does &#39;aligned&#39; mean, for structs in c?", "body": "<p>I'm strugling a bit writing some glue code between a c api and a .net application. In order to write the C# struct, I need to figure out what is actually going on on the c side here.</p>\n\n<pre><code>typedef struct CommonDialogBaseParam {\n    size_t size;\n    uint8_t reserved[36];\n    uint32_t magic;\n} CommonDialogBaseParam __attribute__ ((__aligned__(8)));\n\n// Somewhere else\n#define __attribute__(x)\n</code></pre>\n\n<p>I'm tempted to write the C# equivalent as follows:</p>\n\n<pre><code>[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]\npublic struct CommonDialogBaseParam {\n    public ulong size;\n    [MarshalAs(UnmanagedType.ByValTStr, SizeConst=36)]\n    public string reserved;\n    public uint magic;\n}\n</code></pre>\n\n<p>Needless to say... I don't really need proper access to either 'reserved' or 'magic' on the C# side, but I need the members to be preserved properly.</p>\n"}, {"tags": ["c", "recursion", "global-variables", "primes"], "comments": [{"owner": {"reputation": 1713, "user_id": 2955869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NtWpN.jpg?s=128&g=1", "display_name": "uSeemSurprised", "link": "https://stackoverflow.com/users/2955869/useemsurprised"}, "edited": false, "score": 2, "creation_date": 1483531698, "post_id": 41463414, "comment_id": 70132325, "body": "It seems to be printing alright : <a href=\"http://ideone.com/fVe0DH\" rel=\"nofollow noreferrer\">ideone.com/fVe0DH</a>, the solution however is very slow you may want to try <a href=\"https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Sieve_of_Eratosthenes</a>"}, {"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1483534445, "post_id": 41463414, "comment_id": 70134134, "body": "you are calling isPrime way too many times, once a prime number is calculated why not use it to check the new value? Sieve of Eratosthenes as uSeemSurprised mentioned is an even better way of doing it."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1483534646, "post_id": 41463414, "comment_id": 70134251, "body": "<code>isPrime(num);</code> --&gt; <code>return isPrime(num);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 343, "user_id": 5704995, "user_type": "registered", "profile_image": "https://graph.facebook.com/1714182875479763/picture?type=large", "display_name": "Shashi Kundan", "link": "https://stackoverflow.com/users/5704995/shashi-kundan"}, "is_accepted": false, "score": 4, "last_activity_date": 1483537380, "last_edit_date": 1483537380, "creation_date": 1483533672, "answer_id": 41464089, "question_id": 41463414, "link": "https://stackoverflow.com/questions/41463414/print-primes-between-0-and-1-000-000-in-c/41464089#41464089", "title": "Print primes between 0 and 1,000,000 in C", "body": "<p>First of all</p>\n\n<p>All prime numbers lies upto square-root</p>\n\n<p>So you can outer loop by following</p>\n\n<pre><code>int n=sqrt(1000000);\nfor(int i=3;i&lt;=n;i++)\n{\n}\n</code></pre>\n\n<p>you can improve isPrime function by following way</p>\n\n<pre><code>bool isPrime(int n) {\n\n    // Corner cases\n\n    if (n &lt;= 1)  \n        return false;\n    if (n &lt;= 3)\n        return true;\n    // This is checked so that we can skip \n    // middle five numbers in below loop\n\n    if (n%2 == 0 || n%3 == 0) \n        return false;\n    for (int i=5; i*i&lt;=n; i=i+6)\n        if (n%i == 0 || n%(i+2) == 0)\n            return false;\n    return true;\n}\n</code></pre>\n\n<p>which is much faster </p>\n"}], "owner": {"reputation": 321, "user_id": 2183786, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/36e2751c8af5977fc1cfe24ced9413e1?s=128&d=identicon&r=PG", "display_name": "James Baker", "link": "https://stackoverflow.com/users/2183786/james-baker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483537380, "creation_date": 1483531491, "last_edit_date": 1483536249, "question_id": 41463414, "link": "https://stackoverflow.com/questions/41463414/print-primes-between-0-and-1-000-000-in-c", "title": "Print primes between 0 and 1,000,000 in C", "body": "<p>I'm trying to write a recursive function to print all primes between 0 and 1,000,000:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint isPrime(int);\nint globalChk; //Global Variable\n\nint main(){\n\n    printf(\"2\\n\");\n\n    int i;\n\n    for(i=3;i&lt;1000000;i++){\n\n        globalChk = i/2;\n\n         if(isPrime(i)==1){\n             printf(\"%d\",i);\n             printf(\"\\n\");\n         }\n     }\n\n    return 0;\n}\n\nint isPrime(int num){\n    if(globalChk==1){\n        return 1;\n    }\n    else{\n        if(num%globalChk==0) {\n            return 0;\n        }\n        else {\n        globalChk = globalChk-1;\n        isPrime(num);\n        }\n    }\n}\n</code></pre>\n\n<p>At the moment it only seems to be printing 2 and 3 and nothing else. I can't seem to spot the problem. It might be the global variable.</p>\n"}, {"tags": ["c", "libyaml"], "comments": [{"owner": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "edited": false, "score": 0, "creation_date": 1483530984, "post_id": 41463029, "comment_id": 70131869, "body": "OK, one remark I can make without looking into the actual question: using <code>goto</code> is frowned upon by most programmers, and certainly not something you should be using when just starting out with C. It has some <a href=\"http://stackoverflow.com/questions/245742/examples-of-good-gotos-in-c-or-c\">ligitimate use cases</a>, but when learning C it is best to stay away from it, instead of making it part of your normal everyday design workflow."}, {"owner": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "edited": false, "score": 0, "creation_date": 1483531116, "post_id": 41463029, "comment_id": 70131949, "body": "It&#39;s not that <code>goto</code> is so difficult to use, but using it like any other flow control statement <b>will</b> lead to some extremely hard to find bugs, which take away most of your time and most of the fun of learning C. Read <a href=\"http://homepages.cwi.nl/~storm/teaching/reader/Dijkstra68.pdf\" rel=\"nofollow noreferrer\">this classic</a> by E.Dijkstra."}, {"owner": {"reputation": 562, "user_id": 1484411, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/MpeYU.jpg?s=128&g=1", "display_name": "Joseph Persie", "link": "https://stackoverflow.com/users/1484411/joseph-persie"}, "reply_to_user": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "edited": false, "score": 0, "creation_date": 1483531122, "post_id": 41463029, "comment_id": 70131951, "body": "@RodyOldenhuis I would agree with you there the use of that goto construct was taken directly from an example in the library itself."}, {"owner": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "edited": false, "score": 0, "creation_date": 1483531226, "post_id": 41463029, "comment_id": 70132013, "body": "Hmm...OK, strange. Well, just be warned then! :)"}, {"owner": {"reputation": 17446, "user_id": 311635, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0d4907cea9d97688aa7a5e722d742f71?s=128&d=identicon&r=PG", "display_name": "Rudi", "link": "https://stackoverflow.com/users/311635/rudi"}, "edited": false, "score": 1, "creation_date": 1483533233, "post_id": 41463029, "comment_id": 70133335, "body": "I guess that you need to <code>strdup()</code> the data for newHost, and the length is to be calculated via <code>strlen()</code>"}, {"owner": {"reputation": 562, "user_id": 1484411, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/MpeYU.jpg?s=128&g=1", "display_name": "Joseph Persie", "link": "https://stackoverflow.com/users/1484411/joseph-persie"}, "reply_to_user": {"reputation": 17446, "user_id": 311635, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0d4907cea9d97688aa7a5e722d742f71?s=128&d=identicon&r=PG", "display_name": "Rudi", "link": "https://stackoverflow.com/users/311635/rudi"}, "edited": false, "score": 0, "creation_date": 1483533787, "post_id": 41463029, "comment_id": 70133687, "body": "@Rudi That actually resolved the segmentation fault issue! However I think the way I am going about modifying this node is a bad practice. Thanks for that reccomendation nonethless, feel free to post an answer so I can accept it as the solution, thanks."}], "answers": [{"tags": [], "owner": {"reputation": 17446, "user_id": 311635, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0d4907cea9d97688aa7a5e722d742f71?s=128&d=identicon&r=PG", "display_name": "Rudi", "link": "https://stackoverflow.com/users/311635/rudi"}, "is_accepted": true, "score": 1, "last_activity_date": 1483536205, "creation_date": 1483536205, "answer_id": 41464881, "question_id": 41463029, "link": "https://stackoverflow.com/questions/41463029/how-to-modify-an-existing-yaml-node-in-c/41464881#41464881", "title": "How to modify an existing YAML node in C?", "body": "<p>Libyaml expect that the values of each scalar can be removed via <code>free()</code>. So you need to initialize this value with <code>malloc()</code>ed memory:</p>\n\n<pre><code>const char* newHost = \"10.132.16.48:6379:1 redis-001\";\nevent.data.scalar.value = (yaml_char_t*)strdup(newHost);\nevent.data.scalar.length = strlen(newHost);\n</code></pre>\n"}], "owner": {"reputation": 562, "user_id": 1484411, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/MpeYU.jpg?s=128&g=1", "display_name": "Joseph Persie", "link": "https://stackoverflow.com/users/1484411/joseph-persie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 41464881, "answer_count": 1, "score": 1, "last_activity_date": 1483536205, "creation_date": 1483530372, "question_id": 41463029, "link": "https://stackoverflow.com/questions/41463029/how-to-modify-an-existing-yaml-node-in-c", "title": "How to modify an existing YAML node in C?", "body": "<p>I am not C programmer but have recently taking interest in it. I am trying to modify a node of a YAML file using the C libyaml library. When I try to modify the node from an event scalar data the compiler doesn't complain but I get segmentation fault errors.</p>\n\n<pre><code>while (!done)\n{\n    /* Get the next token. */\n\n    if (!yaml_parser_parse(&amp;parser, &amp;event))\n        goto parser_error;\n\n    //yaml_parser_scan(&amp;parser, &amp;token);\n\n    /* Check if this is the stream end. */\n\n    if(beginServerNodes &amp;&amp; event.type == 8) {\n      beginServerNodes = 0;\n    }\n\n    if (event.type == YAML_SCALAR_EVENT) {\n      if(beginServerNodes == 1) {\n        //I WANT TO MODIFY THIS VALUE\n        printf(\"%s\\n\", event.data.scalar.value);\n      }\n      if(strcmp(\"servers\",event.data.scalar.value) == 0) {\n        beginServerNodes = 1;\n      }\n    }\n\n    if (event.type == YAML_STREAM_END_EVENT) {\n        done = 1;\n    }\n    /* Emit the token. */\n\n    if (!yaml_emitter_emit(&amp;emitter, &amp;event))\n        goto emitter_error;\n}\n</code></pre>\n\n<p>So while in that loop when I attempt to modify the following value</p>\n\n<pre><code>event.data.scalar.value\n</code></pre>\n\n<p>It must be of type <code>yaml_char_t</code></p>\n\n<pre><code>  yaml_char_t *newHost = \"10.132.16.48:6379:1 redis-001\";\n  event.data.scalar.value = newHost;\n  event.data.scalar.length = sizeof(newHost);\n</code></pre>\n\n<p>The compiler doesn't complain and the code run by dies with segementation fault. If have seen the examples in the libyaml test directories but nothing is intuitive as far as simply editing a node, at least not to a C newb like myself.</p>\n"}, {"tags": ["c", "types", "posix", "systypes.h"], "comments": [{"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 1, "creation_date": 1483529970, "post_id": 41462907, "comment_id": 70131245, "body": "Typing 3 chars instead of 7? :)"}, {"owner": {"reputation": 2975, "user_id": 5559342, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/39185a39d1b8b29d0b51564f7d55164e?s=128&d=identicon&r=PG&f=1", "display_name": "Robb1", "link": "https://stackoverflow.com/users/5559342/robb1"}, "reply_to_user": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1483530042, "post_id": 41462907, "comment_id": 70131295, "body": "Sorry @Marian , I don&#39;t understand what are you talking about!"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1483530079, "post_id": 41462907, "comment_id": 70131315, "body": "<code>int</code> is a 3 character token, whilst <code>ssize_t</code> is 7."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1483530087, "post_id": 41462907, "comment_id": 70131322, "body": "&quot;<i><code>int</code> is supposed to be bigger than <code>ssize_t</code></i>&quot;, no, in general it isn&#39;t, at least not for the positive part."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1483530165, "post_id": 41462907, "comment_id": 70131374, "body": "<i>&quot;Shouldn&#39;t it be a best practice to use ssize_t&quot;</i> - Using exact types whenever possible is indeed a good practice. And you should embrace it whenever you can."}, {"owner": {"reputation": 2975, "user_id": 5559342, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/39185a39d1b8b29d0b51564f7d55164e?s=128&d=identicon&r=PG&f=1", "display_name": "Robb1", "link": "https://stackoverflow.com/users/5559342/robb1"}, "edited": false, "score": 0, "creation_date": 1483530287, "post_id": 41462907, "comment_id": 70131450, "body": "Oh, I better correct my question so! ^^&#39; So... how is having less characters available a good thing? Shouldn&#39;t <i>everybody</i> use <code>ssize_t</code> instead of <code>int</code>?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1483530558, "post_id": 41462907, "comment_id": 70131598, "body": "Do not change your question after comments/answers had been given, as this might render the latter un-understandable. I edited your question accordingly."}, {"owner": {"reputation": 48960, "user_id": 2522554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83cebe27d4fdd15bb1fb77bab95ff493?s=128&d=identicon&r=PG", "display_name": "bansi", "link": "https://stackoverflow.com/users/2522554/bansi"}, "edited": false, "score": 0, "creation_date": 1483531229, "post_id": 41462907, "comment_id": 70132015, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/19224655/using-ssize-t-vs-int\">Using ssize_t vs int</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1483534281, "post_id": 41462907, "comment_id": 70134017, "body": "Just FYI, the first <code>s</code> in <code>ssize_t</code> stands for <code>signed</code>. It&#39;s a size that can be negative. The special types (like <code>size_t</code> and <code>ssize_t</code> and many others) carries with them more <i>semantic</i> information. Declaring a variable as a <code>ssize_t</code> you tell the reader of the code what the purpose of the variable is."}], "answers": [{"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 1, "last_activity_date": 1483531165, "last_edit_date": 1483531165, "creation_date": 1483530184, "answer_id": 41462982, "question_id": 41462907, "link": "https://stackoverflow.com/questions/41462907/what-return-value-to-use-for-read/41462982#41462982", "title": "What return value to use for `read()`?", "body": "<blockquote>\n  <p>Shouldn't it be a best practice to use <code>ssize_t</code>?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<p>In general use whatever type a function is defined to return.</p>\n\n<hr>\n\n<blockquote>\n  <p><code>int</code> is supposed to be bigger than <code>ssize_t</code></p>\n</blockquote>\n\n<p>No, in general it isn't, at least not for the positive part. </p>\n\n<p>From the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_types.h.html\" rel=\"nofollow noreferrer\">POSIX documenation</a>:</p>\n\n<blockquote>\n  <p>The type <strong><code>ssize_t</code></strong> shall be capable of storing values at least in the range [<code>-1</code>, {<code>SSIZE_MAX</code>}].</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 2975, "user_id": 5559342, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/39185a39d1b8b29d0b51564f7d55164e?s=128&d=identicon&r=PG&f=1", "display_name": "Robb1", "link": "https://stackoverflow.com/users/5559342/robb1"}, "edited": false, "score": 0, "creation_date": 1483530383, "post_id": 41463007, "comment_id": 70131513, "body": "Thanks, I edited my question deleting the wrong assumption."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 2975, "user_id": 5559342, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/39185a39d1b8b29d0b51564f7d55164e?s=128&d=identicon&r=PG&f=1", "display_name": "Robb1", "link": "https://stackoverflow.com/users/5559342/robb1"}, "edited": false, "score": 1, "creation_date": 1483530515, "post_id": 41463007, "comment_id": 70131575, "body": "But fundamentally the answer is the same: always use correct types for storing the return value of functions as documented. &quot;Shouldn&#39;t everybody use ssize_t instead of int?&quot; - Yes, absolutely."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1483530289, "creation_date": 1483530289, "answer_id": 41463007, "question_id": 41462907, "link": "https://stackoverflow.com/questions/41462907/what-return-value-to-use-for-read/41463007#41463007", "title": "What return value to use for `read()`?", "body": "<blockquote>\n  <p>I got that \"in general\"  int is supposed to be bigger than ssize_t and that's why we don't occur in a error.</p>\n</blockquote>\n\n<p>That's not true. There's no absolutely no reason whatsoever for that assumption to be true.</p>\n\n<blockquote>\n  <p>is there a reason to use int instead of ssize_t? Shouldn't it be a best practice to use ssize_t?</p>\n</blockquote>\n\n<p>Yes. Use <code>ssize_t</code> for storing <code>read()</code>'s return.</p>\n\n<p>In most of the your use cases, <code>read()</code> might be handling bytes that can be handled by an <code>int</code>. Hence, you probably never encountered any problems using <code>int</code>. But that's no reason to prefer <code>int</code> over <code>ssize_t</code>. Always use the right types.</p>\n"}], "owner": {"reputation": 2975, "user_id": 5559342, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/39185a39d1b8b29d0b51564f7d55164e?s=128&d=identicon&r=PG&f=1", "display_name": "Robb1", "link": "https://stackoverflow.com/users/5559342/robb1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1463, "favorite_count": 0, "accepted_answer_id": 41463007, "answer_count": 2, "score": 1, "last_activity_date": 1483531165, "creation_date": 1483529914, "last_edit_date": 1483530487, "question_id": 41462907, "link": "https://stackoverflow.com/questions/41462907/what-return-value-to-use-for-read", "title": "What return value to use for `read()`?", "body": "<p>I've noticed that several times to check the return value of <code>read()</code> it's used the type <code>int</code>, but checking on <em>man</em> I noticed that <code>read()</code> returns a value of type <code>ssize_t</code> instead. <strike> I got that \"in general\" int is supposed to be bigger than ssize_t and that's why we don't occur in a error. But my question is: </strike> <strong>Is there a reason to use <code>int</code> instead of <code>ssize_t</code>?</strong> Shouldn't it be a best practice to use <code>ssize_t</code>?</p>\n\n<p>Example code:</p>\n\n<pre><code>int x;\n//ssiz_t x;\nx = read(fd, &amp;a, sizeof(a));\nif (x == sizeof(a))\n    // all is fine\nif (x == -1)\n    // Error while reading file\nif (x == 0)\n    // Unexpected end of file\n</code></pre>\n"}, {"tags": ["c", "pointers", "dynamic-arrays", "dynamic-allocation"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1483525941, "post_id": 41461588, "comment_id": 70128616, "body": "if your code is working, please consider posting it in <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}, {"owner": {"reputation": 1323, "user_id": 2415161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8192ef3e3b566c9357604da1b7e310b?s=128&d=identicon&r=PG", "display_name": "Hermann D&#246;ppes", "link": "https://stackoverflow.com/users/2415161/hermann-d%c3%b6ppes"}, "edited": false, "score": 1, "creation_date": 1483525968, "post_id": 41461588, "comment_id": 70128636, "body": "What is your actual question? Are you looking for a <a href=\"https://codereview.stackexchange.com/\">Code Review</a>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483526133, "post_id": 41461588, "comment_id": 70128756, "body": "<code>char</code> <b>is</b> an integer type. So just: <code>int i = 42; char c = (char)i;</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1483526195, "post_id": 41461588, "comment_id": 70128794, "body": "You don&#39;t seem to grasp the difference between a pointer and the thing it points too, like in this fragment <code>*myString = *(myString - i);    &#47;&#47;move pointer back to the beggining of string</code>. There are other small problems but you have to fix this one first."}, {"owner": {"reputation": 840, "user_id": 6704493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4c301ad478ef6b75733125f2b3d049d?s=128&d=identicon&r=PG&f=1", "display_name": "Pawe\u0142 Dymowski", "link": "https://stackoverflow.com/users/6704493/pawe%c5%82-dymowski"}, "edited": false, "score": 0, "creation_date": 1483526222, "post_id": 41461588, "comment_id": 70128809, "body": "my code is not working, its just idea, my question is: Howto Convert Integer to Char array, taking digit by digit and puting it to dynamic char array using pointers"}, {"owner": {"reputation": 840, "user_id": 6704493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4c301ad478ef6b75733125f2b3d049d?s=128&d=identicon&r=PG&f=1", "display_name": "Pawe\u0142 Dymowski", "link": "https://stackoverflow.com/users/6704493/pawe%c5%82-dymowski"}, "edited": false, "score": 0, "creation_date": 1483526483, "post_id": 41461588, "comment_id": 70128972, "body": "whats wrong with: *myString = *(myString - i); if pointer points to lest say myString[5], I want to &quot;reset&quot; it that it points back to myString[0]"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1483526738, "post_id": 41461588, "comment_id": 70129129, "body": "What&#39;s wrong with it is that you are not moving any pointers. <code>*myString</code> is not a pointer, and indeed one line above you are using the exact same expression <code>*myString</code> to manipulate a character. How could one and the same <code>*myString</code> be both a pointer and a character?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1483526936, "post_id": 41461588, "comment_id": 70129249, "body": "By the way if you need to talk to a specific user, use the @ convention."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1483527616, "post_id": 41461588, "comment_id": 70129745, "body": "If you know the number (along with its base) to be converted you can immediately  derive from it the number of characters you need to allocate. Hint: Read about the Logarithm function."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1483528636, "post_id": 41461588, "comment_id": 70130445, "body": "Even if you can&#39;t use the log function, you can work out the number of digits before allocating the char buffer by repeatedly dividing a copy of the number by 10 while it is non-zero (but you&#39;ll need to treat 0 as a special case, and allocate an extra char for the &#39;-&#39; if necessary). This also makes it easy to construct the string with the digits not in reverse order."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483529625, "post_id": 41461588, "comment_id": 70131035, "body": "&quot;<i>by repeatedly dividing a copy of the number by 10</i>&quot; or what ever the base in question would be. <code>16</code> for displaying <code>0x4D2</code> for example."}, {"owner": {"reputation": 840, "user_id": 6704493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4c301ad478ef6b75733125f2b3d049d?s=128&d=identicon&r=PG&f=1", "display_name": "Pawe\u0142 Dymowski", "link": "https://stackoverflow.com/users/6704493/pawe%c5%82-dymowski"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483529728, "post_id": 41461588, "comment_id": 70131118, "body": "@alk I know there are easier ways, but I`m currently learning about pointers and dynamic allocation, and my task is to do it specifically that way (allocate space for every new char)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483529900, "post_id": 41461588, "comment_id": 70131209, "body": "Please don&#39;t change your question significantly after comments/answer had been given, as this might render the latter un-understandbale. I just rolled back your last edit therefore."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483529976, "post_id": 41461588, "comment_id": 70131249, "body": "<i>Add</i> &quot;changes* as updates to your question."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1483534779, "post_id": 41461588, "comment_id": 70134339, "body": "You cannot call <code>realloc</code> and pass it a pointer to the <i>middle</i> of the allocated string. You always need to keep a pointer to the beginning of the string (but then when you realloc, the pointer to the middle becomes invalid, so you have to do something about it). Also, you are trying to realloc when you add a digit, but not when you add a minus sign."}, {"owner": {"reputation": 840, "user_id": 6704493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4c301ad478ef6b75733125f2b3d049d?s=128&d=identicon&r=PG&f=1", "display_name": "Pawe\u0142 Dymowski", "link": "https://stackoverflow.com/users/6704493/pawe%c5%82-dymowski"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1483536605, "post_id": 41461588, "comment_id": 70135496, "body": "Thanks @n.m. that was helpful, I fixed my code :)"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1483536785, "post_id": 41461588, "comment_id": 70135627, "body": "try <code>int myNumber = -1234;</code>"}, {"owner": {"reputation": 840, "user_id": 6704493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4c301ad478ef6b75733125f2b3d049d?s=128&d=identicon&r=PG&f=1", "display_name": "Pawe\u0142 Dymowski", "link": "https://stackoverflow.com/users/6704493/pawe%c5%82-dymowski"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1483537082, "post_id": 41461588, "comment_id": 70135829, "body": "@BLUEPIXY thanks, I need to fix that"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1483610935, "post_id": 41461588, "comment_id": 70169403, "body": "Voting to close because this question has already been posted to Code Review: <a href=\"http://codereview.stackexchange.com/questions/151711/converting-integer-to-dynamically-allocated-char-array-digit-by-digit-using-poi\" title=\"converting integer to dynamically allocated char array digit by digit using poi\">codereview.stackexchange.com/questions/151711/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "is_accepted": true, "score": 0, "last_activity_date": 1483531582, "last_edit_date": 1483531582, "creation_date": 1483531003, "answer_id": 41463240, "question_id": 41461588, "link": "https://stackoverflow.com/questions/41461588/converting-integer-to-dynamically-allocated-char-array-digit-by-digit-using-poi/41463240#41463240", "title": "Converting Integer to dynamically allocated Char array, digit by digit using pointers", "body": "<p><strong>SPOILER: Don't read or copy this if you don't want the solution.</strong></p>\n\n<p>The following is an example of implementation, using recursive:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n#include &lt;errno.h&gt;\n\nstatic size_t int_to_str_size(int n, size_t acc, int base_size) {\n  int next = n / base_size;\n  if (next != 0) {\n    return int_to_str_size(next, acc + 1, base_size);\n  } else {\n    return n &lt; 0 ? acc + 2 : acc + 1;\n  }\n}\n\nstatic void int_to_str_write(int n, char *str, char *base, int base_size) {\n  *str = base[abs(n % base_size)];\n\n  int next = n / base_size;\n  if (next != 0) {\n    int_to_str_write(next, str - 1, base, base_size);\n  } else {\n    if (n &lt; 0) {\n      *(str - 1) = '-';\n    }\n  }\n}\n\nstatic char *int_to_str(int n, char *base) {\n  size_t base_size = strlen(base);\n  if (base_size &lt; 2 || base_size &gt; INT_MAX) {\n    errno = EINVAL;\n    return NULL;\n  }\n\n  size_t size = int_to_str_size(n, 0, (int)base_size);\n  char *str = malloc(size + 1);\n  if (str == NULL) {\n    return NULL;\n  }\n\n  str[size] = '\\0';\n  int_to_str_write(n, str + size - 1, base, (int)base_size);\n\n  return str;\n}\n\nint main(void) {\n  srand((unsigned int)time(NULL));\n\n  for (uintmax_t i = 0; i &lt; 42; i++) {\n    int n = rand() % 2 ? rand() : -rand();\n\n    char *str = int_to_str(n, \"0123456789\");\n    if (str != NULL) {\n      printf(\"%d == %s\\n\", n, str);\n\n      free(str);\n    } else {\n      perror(\"int_to_str()\");\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 840, "user_id": 6704493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4c301ad478ef6b75733125f2b3d049d?s=128&d=identicon&r=PG&f=1", "display_name": "Pawe\u0142 Dymowski", "link": "https://stackoverflow.com/users/6704493/pawe%c5%82-dymowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 0, "accepted_answer_id": 41463240, "answer_count": 1, "score": -3, "last_activity_date": 1483600462, "creation_date": 1483525757, "last_edit_date": 1483600462, "question_id": 41461588, "link": "https://stackoverflow.com/questions/41461588/converting-integer-to-dynamically-allocated-char-array-digit-by-digit-using-poi", "title": "Converting Integer to dynamically allocated Char array, digit by digit using pointers", "body": "<p>I need to convert Integer to Char, I can use only pointers without array indexes. Char array must be dynamically allocated. Can anybody review my code and tell my what am I doing wrong?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n\n    int myNumber = 1234;\n    char *myString = (char*)malloc(2 * sizeof(char));  //memory for 1 char and '\\0'\n    int i = 0; //parameter for tracking how far my pointer is from the beggining\n\n    if (myNumber &lt; 0){\n        *myString = '-';    //if myNumber is negative put '-' in array\n        *myString = *(myString + 1);    //move pointer to next position\n        i++;\n    }\n\n    while (myNumber != 0){\n\n        myString = (char*)realloc(myString, (i + 2) * sizeof(char));    //increse memory =+1\n        *myString = (myNumber % 10) + '0'; //put digit as char to array\n        myNumber /= 10;\n\n        *myString = *(myString + 1);    //move pointer to next position\n\n        i++;\n    }\n    *myString = '\\0';   //mark end of string\n    *myString = *(myString - i);    //move pointer back to the beggining of string\n\n    printf(\"\\n%s\", *myString); // print char array (not working..)\n\n    return 0;\n}\n</code></pre>\n\n<p>I know there are better ways of converting Int to String (sprintf), but my task is to do it that way.\nIn the code above I`m taking the digits from Int backwards, can it be done in correct order?</p>\n\n<p>edit. as mentioned in the comments the part:</p>\n\n<pre><code>*myString = *(myString + 1);\n</code></pre>\n\n<p>is wrong, correct way of redirecting pointer by one space is:</p>\n\n<pre><code>myString++;\n</code></pre>\n\n<p>same with:</p>\n\n<pre><code>*myString = *(myString - i);    //wrong\nmyString -=i;    //ok\n</code></pre>\n\n<p>Edit2:\nNow my code works! But I need to think how to correct the order of the digits.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n\n    int myNumber = 1234;\n    char *myString = (char*)malloc(2 * sizeof(char));  //memory for 1 char and '\\0'\n    char * position = myString;\n\n    int i = 0;\n\n    if (myNumber &lt; 0){\n        *position = '-';    //if myNumber is negative put '-' in array\n        position += i;  //move pointer to next position\n        i++;\n    }\n\n    while (myNumber != 0){\n\n        myString = (char*)realloc(myString, ((i + 2) * sizeof(char)));  //increse memory =+1\n        position = myString + i; // getting current position after reallocating\n        *position = (myNumber % 10) + '0'; //put digit to array\n        myNumber /= 10;\n\n        position++; //move pointer to next position\n\n        i++;\n    }\n    *position = '\\0';   //mark end of string\n\n    char * temp = myString;\n\n    while (*temp != '\\0'){      \n        printf(\"%c\", *temp); // print char array (not working..)\n        temp++;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Edit 3 Problem solved, thanks for comments, I`m posting code in case anybody will look for similar solution.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\n// move each character in array one place to the right\n// we need to make place for new character on the left\nvoid moveArrayElementsRight(char *ptr, int len) {\n    for (int j = len; j &gt; 1; j--) {\n        *(ptr + j - 1) = *(ptr + j - 2);\n    }\n}\n\nvoid intToStr(int myNumber, char* myString){\n    int i = 1;    //track size of allocated memory\n    bool isMinus = false;\n\n    if (myNumber &lt; 0) {\n\n        myNumber *= -1;    //without this (myNumber % 10) + '0' wont work\n        isMinus = true;\n    }\n\n    if (myNumber == 0){    //special case for 0\n\n        myString = (char*)realloc(myString, ((i + 1) * sizeof(char)));\n        *myString = '0';\n        *(myString + 1) = '\\0';\n    }\n\n    while (myNumber != 0) {\n\n        myString = (char*)realloc(myString, ((i + 1) * sizeof(char)));  //increse memory =+1 for next digit\n        i++;\n        moveArrayElementsRight(myString, i);\n        *myString = (myNumber % 10) + '0'; //put digit to array\n        myNumber /= 10;\n    }\n\n    if (isMinus) {\n\n        myString = (char*)realloc(myString, ((i + 1) * sizeof(char)));  //increse memory =+1 for '-' sign\n        i++;\n        moveArrayElementsRight(myString, i);\n        *myString = '-'; //put sign at the beginning\n    }\n}\n\nint main() {\n\n    int numberToConvert = -10;\n    char *numberAsString = (char*)malloc(sizeof(char));  //create empty array, with place only for '\\0'\n    *numberAsString = '\\0';    //mark the end of array\n\n    intToStr(numberToConvert, numberAsString);\n\n    printf(\"%s\", numberAsString);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linker-errors", "undefined-reference"], "comments": [{"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 3, "creation_date": 1483525897, "post_id": 41461509, "comment_id": 70128587, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1483528724, "post_id": 41461509, "comment_id": 70130508, "body": "Tell Eclipse to tell the compiler to tell the linker to link the appropriate library."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1483528925, "post_id": 41461509, "comment_id": 70130636, "body": "Assuming CDT, for the (somewhat outdated) Juno-Release it&#39;s under &quot;Project-&gt;Properties-&gt;C/C++ Build-&gt;Settings-&gt;GCC Linker-&gt;Libraries&quot;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1483610214, "post_id": 41461509, "comment_id": 70168908, "body": "two things are needed to access the SQL lite functions:  1)at compile time, the appropriate header file must be available and <code>#include</code>d in the source code   2)  at link time the appropriate library must be included via a `-L&lt;pathToLib&gt; -l&lt;shortLibName&gt; parameters (on the end) of the linker command line."}], "answers": [{"tags": [], "owner": {"reputation": 1676, "user_id": 3264809, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d36a2da1d4a8b8336b4684eac4c9fee8?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Gemini", "link": "https://stackoverflow.com/users/3264809/sumit-gemini"}, "is_accepted": false, "score": 0, "last_activity_date": 1483526800, "creation_date": 1483526800, "answer_id": 41461932, "question_id": 41461509, "link": "https://stackoverflow.com/questions/41461509/undefined-reference-to-sqlite-open/41461932#41461932", "title": "undefined reference to sqlite_open", "body": "<p>You need to link the sqlite3 library along with your program:</p>\n\n<pre><code>gcc main.c -lsqlite3\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7254754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0e48220ffcaea014bd6147c0511c8c7?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7254754/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 932, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483528653, "creation_date": 1483525519, "last_edit_date": 1483528653, "question_id": 41461509, "link": "https://stackoverflow.com/questions/41461509/undefined-reference-to-sqlite-open", "title": "undefined reference to sqlite_open", "body": "<p>I know there have been questions asked before about this problem but none seem to shine a light on my problem which is, I am trying to compile a C application and want to access SQLite from within the code (as per test app below) using Eclips as a compile and debugging environment.</p>\n\n<p>I know the .h files are being accessed. the code has as  many lines commented out to do with iostream as I have tried to compile this as a C++ app as well. </p>\n\n<p>I get  errors one for each of 2 the SQL API.</p>\n\n<p>The real question is do I have to set and How do I set a dependency in Eclipse to allow the api to resolve. Thanks</p>\n\n<p>the code</p>\n\n<pre><code>#include &lt;sqlite3.h&gt;\n\nint main()\n{\n    int RetVal;\n    RetVal = OpenDB();\n    return RetVal;\n}\n\nint OpenDB()\n{\n    sqlite3 *db;         // database connection\n    int rc;              // return code\n    char *errmsg;        // pointer to an error string\n\n     /*\n      * open SQLite database file test.db\n      * use \":memory:\" to use an in-memory database\n      */\n     rc = sqlite3_open(\":memory:\", &amp;db);  //fails on this line\n     if (rc != SQLITE_OK)\n        {\n        goto out;\n        }\n\n\n/* use the database... */\n\nout:\n/*\n * close SQLite database\n */\nsqlite3_close(db); //fails on this line\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "binary-tree"], "comments": [{"owner": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "edited": false, "score": 0, "creation_date": 1483525627, "post_id": 41461452, "comment_id": 70128402, "body": "Where is the function calling <code>flag()</code>? I suspect you just haven&#39;t initialized the <code>Node v</code> you pass in"}, {"owner": {"reputation": 25, "user_id": 7212403, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10206103031375306/picture?type=large", "display_name": "Smerald Guci", "link": "https://stackoverflow.com/users/7212403/smerald-guci"}, "reply_to_user": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "edited": false, "score": 0, "creation_date": 1483525740, "post_id": 41461452, "comment_id": 70128486, "body": "It is called in main.c . I created a tree and called the function flag on the root of the tree"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1483525775, "post_id": 41461452, "comment_id": 70128511, "body": "Strange, why do you have the parent in the node <code>struct</code>? By the way, please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. For now, your question will be close as &quot;can&#39;t reproduce&quot; or &quot;unclear&quot;."}, {"owner": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "edited": false, "score": 0, "creation_date": 1483525894, "post_id": 41461452, "comment_id": 70128584, "body": "Can you post the relevant parts of <code>main.c</code> then?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1483525942, "post_id": 41461452, "comment_id": 70128617, "body": "Typedeffing pointers seems to be a phase everyone goes through, and then abandons as the pain becomes unbearable."}, {"owner": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1483526131, "post_id": 41461452, "comment_id": 70128750, "body": "@molbdnilo <i>ahum</i> WinAPI <i>ahum</i>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "edited": false, "score": 0, "creation_date": 1483526250, "post_id": 41461452, "comment_id": 70128830, "body": "@RodyOldenhuis That pain <i>is</i> unbearable."}, {"owner": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1483526288, "post_id": 41461452, "comment_id": 70128849, "body": "@molbdnilo but sadly, still not abandoned."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1483527949, "post_id": 41461452, "comment_id": 70129993, "body": "Don&#39;t add the answer to your question, it makes no sense. Please <a href=\"https://stackoverflow.com/posts/41461452/edit\">edit</a>, to remove it, and post your <b>own answer</b> if you want."}], "answers": [{"comments": [{"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1483526231, "post_id": 41461604, "comment_id": 70128813, "body": "this is just a warning for him to check if he initialized the structure members... he should debug there."}], "tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 1, "last_activity_date": 1483527880, "last_edit_date": 1483527880, "creation_date": 1483525806, "answer_id": 41461604, "question_id": 41461452, "link": "https://stackoverflow.com/questions/41461452/form-flag-with-3-nodes-in-a-binary-tree/41461604#41461604", "title": "Form flag with 3 nodes in a binary tree", "body": "<p>The problem is probably that you call <code>flag</code> with invalid pointer <code>v-&gt;left</code> or <code>v-&gt;right</code>.</p>\n\n<p>Probably you did not initialize with NULL the node fields.</p>\n\n<p>Other problem is that if any of <code>v-&gt;left</code> or <code>v-&gt;right</code> is NULL you still try to access <code>v-&gt;left-&gt;color</code> in the last composed condition.</p>\n\n<p>Other error is that you do not explicitly return a value in case that the last combination is false.  If</p>\n\n<pre><code>v-&gt;color=='W' &amp;&amp;\nv-&gt;father-&gt;color=='G' &amp;&amp;\n(v-&gt;left-&gt;color=='R' || v-&gt;right-&gt;color=='R')\n</code></pre>\n\n<p>is false, you do not return a value at the end of the function.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 7212403, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10206103031375306/picture?type=large", "display_name": "Smerald Guci", "link": "https://stackoverflow.com/users/7212403/smerald-guci"}, "edited": false, "score": 0, "creation_date": 1483526128, "post_id": 41461655, "comment_id": 70128749, "body": "To iterate all the nodes of the tree. I know that I have to store the return value in a variable, but in this case I wouldn&#39;t know how to use it"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 25, "user_id": 7212403, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10206103031375306/picture?type=large", "display_name": "Smerald Guci", "link": "https://stackoverflow.com/users/7212403/smerald-guci"}, "edited": false, "score": 0, "creation_date": 1483526364, "post_id": 41461655, "comment_id": 70128899, "body": "Then you should check the return value and if you got a 1 you can stop the function and return 1."}], "tags": [], "owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "is_accepted": false, "score": 0, "last_activity_date": 1483525958, "creation_date": 1483525958, "answer_id": 41461655, "question_id": 41461452, "link": "https://stackoverflow.com/questions/41461452/form-flag-with-3-nodes-in-a-binary-tree/41461655#41461655", "title": "Form flag with 3 nodes in a binary tree", "body": "<p>You might have NULL pointers...</p>\n\n<pre><code>if(v-&gt;color=='W' &amp;&amp; v-&gt;father-&gt;color=='G' &amp;&amp; (v-&gt;left-&gt;color=='R' || v-&gt;right-&gt;color=='R'))\n</code></pre>\n\n<p>You do not check if <code>v-&gt;left</code> or <code>v-&gt;right</code> are NULL before you dereference them. For the root node also <code>v-&gt;father</code> could be NULL.</p>\n\n<p>You should also add an else part returning 0.</p>\n\n<p>Besides that: \nFor which purpose do you call <code>flag(v-&gt;left)</code> and <code>flag(v-&gt;right)</code> if you don't care about the return value?</p>\n"}, {"comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1483526279, "post_id": 41461703, "comment_id": 70128846, "body": "Your comment &quot;if you come till here...&quot; is not true. Also in every other case he gets there after calling <code>flag()</code> The recursive call will return and we are back here again."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1483526337, "post_id": 41461703, "comment_id": 70128877, "body": "if(v==NULL)     return 0; -- at the end it will correctly access the flags.  The only problem may be that V!=NULL and it&#39;s an invalid pointer."}], "tags": [], "owner": {"reputation": 2104, "user_id": 4635537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad50ed18dff8aaff0ff427ea7b1067d?s=128&d=identicon&r=PG", "display_name": "sameerkn", "link": "https://stackoverflow.com/users/4635537/sameerkn"}, "is_accepted": false, "score": 0, "last_activity_date": 1483526744, "last_edit_date": 1483526744, "creation_date": 1483526118, "answer_id": 41461703, "question_id": 41461452, "link": "https://stackoverflow.com/questions/41461452/form-flag-with-3-nodes-in-a-binary-tree/41461703#41461703", "title": "Form flag with 3 nodes in a binary tree", "body": "<pre><code>int flag(Node v)\n{\n\nif(v==NULL)\n    return 0;\n\nflag(v-&gt;left);  // &lt;&lt;-- this call will return when v-&gt;left is NULL\nflag(v-&gt;right); // &lt;&lt;-- this call will return when v-&gt;right is NULL\n\n//so, if you come till here in case 'v' is leaf then (v-&gt;left is NULL) and (v-&gt;right is NULL)\n//but you are accessing them as 'v-&gt;left-&gt;color'  and 'v-&gt;right-&gt;color'\n//that is accessing 'NULL-&gt;color' is bound to break.\nif(v-&gt;color=='W' &amp;&amp; v-&gt;father-&gt;color=='G' &amp;&amp; (v-&gt;left-&gt;color=='R' || v-&gt;right-&gt;color=='R'))\n\nreturn 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7212403, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10206103031375306/picture?type=large", "display_name": "Smerald Guci", "link": "https://stackoverflow.com/users/7212403/smerald-guci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1483528872, "creation_date": 1483525374, "last_edit_date": 1483528872, "question_id": 41461452, "link": "https://stackoverflow.com/questions/41461452/form-flag-with-3-nodes-in-a-binary-tree", "title": "Form flag with 3 nodes in a binary tree", "body": "<p>I have a binary tree with nodes colored\u00a0either in green, white or red.\u00a0The function returns 1 if\u00a0it finds a path of three nodes that\u00a0form the italian flag, 0 otherwise.\u00a0</p>\n\n<p>This is what I've tried but it gives me segmentation fault.</p>\n\n<pre><code>struct node{\n char color;\n struct node* left;\n struct node* right;\n struct node* father;\n};\n\ntypedef struct node* Node; \n\nint flag(Node v){\n\nif(v==NULL)\n    return 0;\n\nflag(v-&gt;left);\nflag(v-&gt;right);\n\nif(v-&gt;color=='W' &amp;&amp; v-&gt;father-&gt;color=='G' &amp;&amp; (v-&gt;left-&gt;color=='R' || v-&gt;right-&gt;color=='R'))\n    return 1;\n\n}\n</code></pre>\n\n<p>EDIT:\u00a0Thanks to all for answering.\u00a0This should be the correct version </p>\n\n<pre><code>int flag(Node v){\n\nif(v==NULL)\n    return 0;\n\nif(v-&gt;left &amp;&amp; v-&gt;father)\n    if(v-&gt;color=='B' &amp;&amp; v-&gt;father-&gt;color=='V' &amp;&amp; v-&gt;left-&gt;color=='R')\n        return 1;\n\nif(v-&gt;right&amp;&amp; v-&gt;father)\n    if(v-&gt;color=='B' &amp;&amp; v-&gt;father-&gt;color=='V' &amp;&amp; v-&gt;right-&gt;color=='R')\n        return 1;\n\nreturn flag(v-&gt;left) || flag(v-&gt;right);\n\n\n  }\n</code></pre>\n"}, {"tags": ["c", "linux", "unix", "terminal", "console"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1483525618, "post_id": 41461448, "comment_id": 70128396, "body": "You have a fixed <code>barWidth</code>, right? How do you want it to expand-contract <i>automatically</i>?"}, {"owner": {"reputation": 9309, "user_id": 275221, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1e38611c46e24593fe8eecbb0a2d87c3?s=128&d=identicon&r=PG", "display_name": "sorush-r", "link": "https://stackoverflow.com/users/275221/sorush-r"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1483525711, "post_id": 41461448, "comment_id": 70128469, "body": "@SouravGhosh Yes i have a fixed barWidth, and I want it not to be fixed: Read current terminal width instead."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1483526197, "post_id": 41461448, "comment_id": 70128795, "body": "So, what is your attempt in that?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1483526203, "post_id": 41461448, "comment_id": 70128798, "body": "Please show your research/debugging effort so far. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}, {"owner": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "edited": false, "score": 0, "creation_date": 1483526421, "post_id": 41461448, "comment_id": 70128933, "body": "It&#39;s going to be OS dependent, so...are you on Windows, Linux, MacOS,...?"}, {"owner": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "edited": false, "score": 1, "creation_date": 1483526482, "post_id": 41461448, "comment_id": 70128971, "body": "<a href=\"http://stackoverflow.com/questions/1022957/getting-terminal-width-in-c\">Possibly relevant question</a>"}, {"owner": {"reputation": 9309, "user_id": 275221, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1e38611c46e24593fe8eecbb0a2d87c3?s=128&d=identicon&r=PG", "display_name": "sorush-r", "link": "https://stackoverflow.com/users/275221/sorush-r"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1483526527, "post_id": 41461448, "comment_id": 70129004, "body": "@SouravGhosh Updated my question."}, {"owner": {"reputation": 9309, "user_id": 275221, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1e38611c46e24593fe8eecbb0a2d87c3?s=128&d=identicon&r=PG", "display_name": "sorush-r", "link": "https://stackoverflow.com/users/275221/sorush-r"}, "reply_to_user": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "edited": false, "score": 0, "creation_date": 1483526559, "post_id": 41461448, "comment_id": 70129022, "body": "@RodyOldenhuis It should work on Unix-like systems. Basically Linux"}, {"owner": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "edited": false, "score": 0, "creation_date": 1483527001, "post_id": 41461448, "comment_id": 70129296, "body": "Looks like <code>ncurses</code> is really the best way to go here"}, {"owner": {"reputation": 2264, "user_id": 603142, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/XRadr.png?s=128&g=1", "display_name": "F.bernal", "link": "https://stackoverflow.com/users/603142/f-bernal"}, "edited": false, "score": 0, "creation_date": 1483528627, "post_id": 41461448, "comment_id": 70130436, "body": "why do you believe that the size returned is wrong?"}, {"owner": {"reputation": 9309, "user_id": 275221, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1e38611c46e24593fe8eecbb0a2d87c3?s=128&d=identicon&r=PG", "display_name": "sorush-r", "link": "https://stackoverflow.com/users/275221/sorush-r"}, "reply_to_user": {"reputation": 2264, "user_id": 603142, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/XRadr.png?s=128&g=1", "display_name": "F.bernal", "link": "https://stackoverflow.com/users/603142/f-bernal"}, "edited": false, "score": 0, "creation_date": 1483528807, "post_id": 41461448, "comment_id": 70130555, "body": "@F.bernal cause it does not change when I resize the terminal window (as it does for <code>wget</code>)"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1483529089, "post_id": 41461448, "comment_id": 70130724, "body": "@sorush-r: Does the <code>COLUMNS</code> environment variable (<code>echo $COLUMNS</code>) correctly reflect the window width? Does your program catch or ignore the <code>WINCH</code> signal? Are you using a local terminal (a terminal window on a Linux machine), or are you connecting remotely via SSH (say, using PuTTY from a Windows machine)?"}, {"owner": {"reputation": 36850, "user_id": 1085062, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0aa8a161b2e742df24e4049b2a42c35?s=128&d=identicon&r=PG", "display_name": "Rody Oldenhuis", "link": "https://stackoverflow.com/users/1085062/rody-oldenhuis"}, "edited": false, "score": 0, "creation_date": 1483529146, "post_id": 41461448, "comment_id": 70130762, "body": "Looks like this question really is a duplicate of <a href=\"http://stackoverflow.com/questions/1022957/getting-terminal-width-in-c\">the question I linked to</a>; voting to close as dupe."}], "answers": [{"tags": [], "owner": {"reputation": 2264, "user_id": 603142, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/XRadr.png?s=128&g=1", "display_name": "F.bernal", "link": "https://stackoverflow.com/users/603142/f-bernal"}, "is_accepted": false, "score": 0, "last_activity_date": 1483527063, "creation_date": 1483527063, "answer_id": 41462029, "question_id": 41461448, "link": "https://stackoverflow.com/questions/41461448/full-width-progress-bar-in-console/41462029#41462029", "title": "Full width progress bar in console", "body": "<p><strong>Just use</strong>:</p>\n\n<pre><code>struct winsize w;\nioctl(0, TIOCGWINSZ, &amp;w);\n\nprintf (\"lines %d\\n\", w.ws_row);\nprintf (\"columns %d\\n\", w.ws_col);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1084, "user_id": 6655094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef5a8cb090b638fcbccae068456c41ad?s=128&d=identicon&r=PG", "display_name": "soundslikeodd", "link": "https://stackoverflow.com/users/6655094/soundslikeodd"}, "edited": false, "score": 0, "creation_date": 1525699373, "post_id": 50214976, "comment_id": 87447277, "body": "Can you explain your answer?"}], "tags": [], "owner": {"reputation": 19, "user_id": 9752737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d9861a50404ccdd5f8a561e42bb95b0?s=128&d=identicon&r=PG&f=1", "display_name": "rgos", "link": "https://stackoverflow.com/users/9752737/rgos"}, "is_accepted": false, "score": 0, "last_activity_date": 1525703177, "last_edit_date": 1525703177, "creation_date": 1525698355, "answer_id": 50214976, "question_id": 41461448, "link": "https://stackoverflow.com/questions/41461448/full-width-progress-bar-in-console/50214976#50214976", "title": "Full width progress bar in console", "body": "<p>Print progress bar over the full width of the console by first getting console column width:</p>\n\n<pre><code>system(\"clear\");\n\nstruct winsize w;\nioctl(STDOUT_FILENO, TIOCGWINSZ, &amp;w);\n\nint barWidth = w.ws_col - 10;\n\nfloat progress = 0.0;\n\nwhile (progress &lt; 1.0) {\n    printf(\"\\r%3d%% \", int(progress * 100.0));\n    int pos = barWidth * progress;\n    for (int i = 0; i &lt; barWidth; i++) {\n        if (i &lt;= pos) printf(\"\\u258A\");\n        else printf(\" \");\n    }\n    fflush(stdout);\n\n    progress += 0.02; // test\n\n    usleep(100000);\n}\nprintf(\"\\r100%%\\n\");\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/2KlTr.png\" rel=\"nofollow noreferrer\">column 80</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/pH4gb.png\" rel=\"nofollow noreferrer\">column 20</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/hcRNX.png\" rel=\"nofollow noreferrer\">column 123</a></p>\n"}], "owner": {"reputation": 9309, "user_id": 275221, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1e38611c46e24593fe8eecbb0a2d87c3?s=128&d=identicon&r=PG", "display_name": "sorush-r", "link": "https://stackoverflow.com/users/275221/sorush-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 699, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1525703177, "creation_date": 1483525361, "last_edit_date": 1483527701, "question_id": 41461448, "link": "https://stackoverflow.com/questions/41461448/full-width-progress-bar-in-console", "title": "Full width progress bar in console", "body": "<p>I'm having trouble adding progress bar for my calculation tool (written in c). Having a simple progress bar code, I can print progress:</p>\n\n<pre><code>void print_progress(float progress) \n{\n    int barWidth = 70;\n    int pos = barWidth * progress;\n\n    printf(\"%c\",'[');\n\n    for (int i = 0; i &lt; barWidth; ++i) \n    {\n        if (i &lt; pos) {\n            printf(\"%c\",'=');\n        }\n        else if (i == pos) {\n            printf(\"%c\",'&gt;');\n        }\n        else {\n            printf(\"%c\",' ');\n        }\n    }\n\n    printf(\"] %f%% \\r\",(progress * 100.0));\n    fflush(stdout);\n}\n</code></pre>\n\n<p>Though, it prints only a fixed width progress bar. How can I change this to read the screen width and print a full-width progress bar? (Like <code>wget</code> or <code>apt-get</code> progress bars)</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>What I tried so far is to read terminal width using ioctl :</p>\n\n<pre><code>struct winsize max;\nioctl(0, TIOCGWINSZ , &amp;max);\nprintf (\"columns %d\\n\", max.ws_col); // Always 70\n</code></pre>\n\n<p>And also I don't want to add a dependency like <code>ncurses</code>...</p>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>Final (not working) version:</p>\n\n<pre><code>void loadbar(unsigned int x, unsigned int n, unsigned int max_width) {\n    struct winsize ws;\n    ioctl(0, TIOCGWINSZ, &amp;ws);\n    int barWidth = ws.ws_col;\n    if(barWidth &gt; max_width) {\n        barWidth = max_width;\n    }\n    float ratio  =  x/(float)n;\n    int   c      =  ratio * barWidth;\n    printf(\"%s\",\"[\");\n    for (x=0; x&lt;c; x++) {\n        printf(\"%s\",\"=\");\n    }\n    printf(\"%s\",\"&gt;\");\n    for (x=c+1; x&lt;barWidth; x++) {\n        printf(\"%s\",\" \");\n    }\n    printf(\"] %03.2f%%\\r\",100.0*ratio);\n    fflush(stdout);\n}\n</code></pre>\n"}, {"tags": ["c", "x86", "x86-64", "bitset", "sparc"], "comments": [{"owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "edited": false, "score": 1, "creation_date": 1483526190, "post_id": 41461431, "comment_id": 70128790, "body": "each member should be aligned wrt its size, char needs no alignment and a 4 byte int needs to be aligned at 32bit boundary. so ordering the members by their sizes is one way of memory improvement."}, {"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "reply_to_user": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "edited": false, "score": 0, "creation_date": 1483526270, "post_id": 41461431, "comment_id": 70128841, "body": "@perreal Did I say the same? <code>for alignment of b using array</code>. I mean, <code>int b</code> You have described better."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1483526455, "post_id": 41461431, "comment_id": 70128952, "body": "Your prerequiste is wrong already. Please provide a reference to the standard where it imposes this restriction on padding. It is typically defined by the platform&#39;s ABI. Which includes the OS, not only the CPU."}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 2, "creation_date": 1483526522, "post_id": 41461431, "comment_id": 70128998, "body": "<i>Natural size</i> is a property of the data type, not the processor. 16-bit data is aligned on 2 bytes boundary, and so on. So your reasoning is wrong. And we may use an array of ints for bit fields because that let us work with a group of bits together. Chars will also do often"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 0, "creation_date": 1483526674, "post_id": 41461431, "comment_id": 70129095, "body": "@MargaretBloom Bit-fields are only guaranteed by the standard to work with <code>int</code>/<code>unsigned int</code> and <code>_Bool</code>."}, {"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483526749, "post_id": 41461431, "comment_id": 70129134, "body": "@Olaf Alignment rule of 4 bytes is given <a href=\"https://en.wikipedia.org/wiki/Data_structure_alignment\" rel=\"nofollow noreferrer\">here</a>, that says: <i>For example, when the computer&#39;s word size is 4 bytes, the data to be read <b>should</b> be at a memory address which is <b>some multiple of 4</b>. When this is not the case, e.g. the data starts at address 14 instead of 16, then the computer has to read two or more 4 byte chunks and do some calculation before the requested data has been read, or it may generate an <b>alignment fault</b>.</i>."}, {"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483526840, "post_id": 41461431, "comment_id": 70129184, "body": "@Olaf My learning is, <i>unaligned memory access is slower on architectures that allow it (like x86 and amd64), and is explicitly prohibited on strict alignment architectures like SPARC.</i>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483526952, "post_id": 41461431, "comment_id": 70129266, "body": "Wikipedia is <b>not</b> the C standard! I don&#39;t ask what &quot;alignment&quot; means. Your 2nd comment is not necessarily correct."}, {"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483527058, "post_id": 41461431, "comment_id": 70129340, "body": "@Olaf From past 10 years, I am not capable to understand , when somebody says <i>platform application binary interface(ABI)</i>. So am stuck with your first comment"}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483527209, "post_id": 41461431, "comment_id": 70129461, "body": "@Olaf Good point! but I was talking about bit-fields as a general concept (not the C bit-fields). I used an ambiguous terminology, my bad! :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 0, "creation_date": 1483527615, "post_id": 41461431, "comment_id": 70129739, "body": "@MargaretBloom: for generalised bit-fields, <code>int</code> is a very bad choice, because certain shifts are either UB or implementation defined. Correct would be <code>unsigned int</code>, better a fixed-width type like <code>uint32_t</code> which is guaranteed to have no padding-bits."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483527660, "post_id": 41461431, "comment_id": 70129778, "body": "@overexchange: I did not say &quot;platform ABI&quot; ..."}], "answers": [{"comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 3, "creation_date": 1483527660, "post_id": 41462110, "comment_id": 70129779, "body": "Actually the safest procedure is to rely on the compiler, who is going to be way more consistent than any human in applying the rules regarding alignment. Of course the compiler won&#39;t reorder fields in a structure (that can break semantics and ABI), so recent versions of gcc and clang also have warnings for suboptimal struct ordering (they&#39;ll tell you that they had to introduce avoidable padding)."}, {"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "edited": false, "score": 0, "creation_date": 1483527761, "post_id": 41462110, "comment_id": 70129857, "body": "Why <code>short a1</code> is shown as 1 byte, <code>int</code> as 3 bytes? in your referred <a href=\"https://software.intel.com/en-us/articles/coding-for-performance-data-alignment-and-structures\" rel=\"nofollow noreferrer\">link</a> Did I mis-read the address number? address 12-15 mean address 12, 13, 14, 15"}, {"owner": {"reputation": 574, "user_id": 7347121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WELgbb5w_7U/AAAAAAAAAAI/AAAAAAAAAAo/7u7M99npwYM/photo.jpg?sz=128", "display_name": "z0rberg&#39;s", "link": "https://stackoverflow.com/users/7347121/z0rbergs"}, "edited": false, "score": 0, "creation_date": 1483527790, "post_id": 41462110, "comment_id": 70129890, "body": "I agree that, if you don&#39;t know how it works, then you should let someone else handle it for you. In this case the compiler. That being said, it&#39;s much better to know what you are doing instead of willingly handing over control of your code to a piece of software."}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 1, "creation_date": 1483528072, "post_id": 41462110, "comment_id": 70130069, "body": "No, some architecture may have very restrictive alignment requirements. You may think that aligning <code>uint16_t</code> on 2 bytes won&#39;t give any padding but it will on some RISC machines. You are only optimising for one architecture, while the compiler can optimise for any. Learning how to use a compiler is much more difficult than learning how to code in assembly for an architecture."}, {"owner": {"reputation": 574, "user_id": 7347121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WELgbb5w_7U/AAAAAAAAAAI/AAAAAAAAAAo/7u7M99npwYM/photo.jpg?sz=128", "display_name": "z0rberg&#39;s", "link": "https://stackoverflow.com/users/7347121/z0rbergs"}, "edited": false, "score": 0, "creation_date": 1483528271, "post_id": 41462110, "comment_id": 70130212, "body": "I prefer to use the tools i have and let them do what i want, instead of doing what my tool wants from me. You&#39;re right, it&#39;s architecture specific, but doesn&#39;t change anything about it. Relying on your compiler to do what you could do yourself makes you, in my eyes, a tool of your compiler."}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 0, "creation_date": 1483528713, "post_id": 41462110, "comment_id": 70130501, "body": "That&#39;s a respectable personal view, I once, when younger, was also used to think that. However being able to work in abstract terms, knowing what is specific to you and what is common with others is important. Knowing how to make the compiler emit the best code for every possible architecture is anything but being a tool of the compiler, rather using workarounds that work only on a specific case is losing the battle. I agree with you, that knowing the details under the hood is very important, but limiting ourselves to just one &quot;hood&quot; is foolish."}, {"owner": {"reputation": 574, "user_id": 7347121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WELgbb5w_7U/AAAAAAAAAAI/AAAAAAAAAAo/7u7M99npwYM/photo.jpg?sz=128", "display_name": "z0rberg&#39;s", "link": "https://stackoverflow.com/users/7347121/z0rbergs"}, "edited": false, "score": 0, "creation_date": 1483529350, "post_id": 41462110, "comment_id": 70130871, "body": "I don&#39;t believe in the myth that compilers produce the best code possible. Still, you&#39;re absolutely right that anyone who programs for multiple architectures benefits from not having to deal with considerations about specific implementations. I don&#39;t see programming for one single plattform as limitation, though."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 1, "creation_date": 1483531075, "post_id": 41462110, "comment_id": 70131918, "body": "@z0rberg&#39;s: &quot;it&#39;s much better to know what you are doing instead of willingly handing over control of your code to a piece of software.&quot; That&#39;s nonsense. If you use a compiler, you <i>are</i> already willingly handing control over to a piece of software. And as someone else said, compilers are much better at <i>consistently</i> and correctly applying the principles of alignment and at not forgetting something, e.g. forgetting to change the padding when you made a change."}, {"owner": {"reputation": 574, "user_id": 7347121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WELgbb5w_7U/AAAAAAAAAAI/AAAAAAAAAAo/7u7M99npwYM/photo.jpg?sz=128", "display_name": "z0rberg&#39;s", "link": "https://stackoverflow.com/users/7347121/z0rbergs"}, "edited": false, "score": 0, "creation_date": 1483531930, "post_id": 41462110, "comment_id": 70132492, "body": "So it&#39;s nonsense to know what one is doing and one should instead rely on something/someone else to do it for him, because one should not trust in his own abilities to do it properly and correctly. Okay, thanks for clearing that up."}, {"owner": {"reputation": 574, "user_id": 7347121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WELgbb5w_7U/AAAAAAAAAAI/AAAAAAAAAAo/7u7M99npwYM/photo.jpg?sz=128", "display_name": "z0rberg&#39;s", "link": "https://stackoverflow.com/users/7347121/z0rbergs"}, "edited": false, "score": 0, "creation_date": 1483533035, "post_id": 41462110, "comment_id": 70133196, "body": "Don&#39;t get me wrong, please. More knowledge is better than less knowledge. Inventing a tool that takes care of things means future users will be told to use the tool so they don&#39;t have to take care about things themselves, which leads to people having less knowledge about what&#39;s going on, because &quot;the tool does it anyway&quot;. This might seem irrelevant when it doesn&#39;t matter, but more knowledge actually always matters."}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 1, "creation_date": 1483549058, "post_id": 41462110, "comment_id": 70144230, "body": "I agree, and I&#39;m leaving you alone after this :) Just wanted to show you the full picture. You believe this happens as you keep learning: 1) Use high-level tools -&gt; 2) Use a compiler, badly -&gt; 3) Use an assembler -&gt; 4) Has deep understanding of arch &amp; uArch. Instead what happens is this: 1) Use high-level tools -&gt; 2) Use a compiler, badly -&gt; 3) Use an assembler -&gt; 4) Has deep understanding of arch &amp; uArch -&gt; 5) Use <b>other</b> assembly languages -&gt; 6) Has deep understanding of <b>other</b> archs &amp; uArchs -&gt; 7) Finally understand the rationale of C standard -&gt; 8) Use a compiler, very goodly."}, {"owner": {"reputation": 574, "user_id": 7347121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WELgbb5w_7U/AAAAAAAAAAI/AAAAAAAAAAo/7u7M99npwYM/photo.jpg?sz=128", "display_name": "z0rberg&#39;s", "link": "https://stackoverflow.com/users/7347121/z0rbergs"}, "edited": false, "score": 0, "creation_date": 1483550816, "post_id": 41462110, "comment_id": 70145344, "body": "Heh. :) I love assembly. I grew up with it. I never had a thing for C. I dislike it. It&#39;s ugly. I rather use freepascal, which is available for a lot of plattforms and mix it with assembly. My favourite asm is ARM, it&#39;s just amazing! And I admire your understanding, it&#39;s not like I don&#39;t know that you&#39;re really good. I saw your post for the guy who wanted to access his soundblaster and you really went all in. That was amazing!"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1483551680, "post_id": 41462110, "comment_id": 70145872, "body": "Beyond what Margaret said, it turns out understanding what&#39;s going on at the low level can actually be very frustrating. You start looking at the compiler&#39;s output and thinking, &quot;Wow, I could do better if I wrote that by hand!&quot; Of course, you can&#39;t actually write everything by hand, or you&#39;d be horribly unproductive. Assembly is great, but there&#39;s a reason we use at least <i>slightly</i> higher level languages to get real work done. You cannot afford to think about this complicated stuff all the time. Although if you don&#39;t know how things work on low level, you&#39;re doomed to write inefficient code."}, {"owner": {"reputation": 574, "user_id": 7347121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WELgbb5w_7U/AAAAAAAAAAI/AAAAAAAAAAo/7u7M99npwYM/photo.jpg?sz=128", "display_name": "z0rberg&#39;s", "link": "https://stackoverflow.com/users/7347121/z0rbergs"}, "edited": false, "score": 0, "creation_date": 1483552000, "post_id": 41462110, "comment_id": 70146036, "body": "So... uhm ... what do i do now with this answer?"}], "tags": [], "owner": {"reputation": 574, "user_id": 7347121, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WELgbb5w_7U/AAAAAAAAAAI/AAAAAAAAAAo/7u7M99npwYM/photo.jpg?sz=128", "display_name": "z0rberg&#39;s", "link": "https://stackoverflow.com/users/7347121/z0rbergs"}, "is_accepted": false, "score": 1, "last_activity_date": 1483527328, "creation_date": 1483527328, "answer_id": 41462110, "question_id": 41461431, "link": "https://stackoverflow.com/questions/41461431/memory-natural-address-boundary/41462110#41462110", "title": "Memory - Natural address boundary", "body": "<p>Addendum: this is valid for x86/-64 bit processors, but also for others. I am blindly assuming you're using those. For others, you should check the respective manuals.</p>\n\n<hr>\n\n<p>If fasm automatically added fillers into my structs i'd go insane. In general, performance is better when accesses to memory are on a boundary corresponding to the size of the element you want to retrieve. That being said, it's not a definite necessity!</p>\n\n<p>This article here might be worth a look: <a href=\"https://software.intel.com/en-us/articles/coding-for-performance-data-alignment-and-structures\" rel=\"nofollow noreferrer\">https://software.intel.com/en-us/articles/coding-for-performance-data-alignment-and-structures</a></p>\n\n<p>Intel's suggestion for optimal layout is to start with the biggest elements first and going smaller as the structure increases. That way you'll stay aligned properly, as long as the first element is aligned properly. There are no three-byte elements, thus misalignment is out of the question and all the compiler might do is adding bytes at the end, which is the best way to make sure it won't ruin things if you choose to do direct memory accesses instead of using variables.</p>\n\n<p>The safest procedure is to not rely on your compiler, but instead aligning the data properly yourself.</p>\n\n<p>Fun Fact: loops work the same way. Padding NOPs in your code, before the start of a loop, can make a difference.</p>\n"}], "owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483527328, "creation_date": 1483525302, "last_edit_date": 1483526970, "question_id": 41461431, "link": "https://stackoverflow.com/questions/41461431/memory-natural-address-boundary", "title": "Memory - Natural address boundary", "body": "<blockquote>\n  <p>Definition</p>\n  \n  <p><strong>Structure padding</strong> is the process of aligning data members of the structure in accordance with the <strong>memory alignment rules</strong> specified by the processor.</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>what is the <em>memory alignment rule</em> for Intel x86 processor?</p>\n  \n  <p>As per my understanding, natural address boundaries for Intel-x86 processor is 32 bits each(i.e.,<code>addressOffset%4==0</code>)</p>\n  \n  <p>So, In x86 processor,</p>\n</blockquote>\n\n<pre><code>struct mystruct_A {\n    char a;\n    int b;\n    char c;\n\n};\n</code></pre>\n\n<blockquote>\n  <p>will be constructed as,</p>\n</blockquote>\n\n<pre><code>struct mystruct_A {\n    char a;\n    char gap_0[3]; /* inserted by compiler: for alignment of b using array */\n    int b;\n    char c;\n    char gap_1[3]; /* for alignment of the whole struct using array */\n};\n</code></pre>\n\n<blockquote>\n  <p>what is the <em>memory alignment rule</em> for Intel x86-64 processor?</p>\n  \n  <p>As per my understanding, natural address boundaries for Intel x86-64 processor is 64 bits each(i.e.,<code>addressOffset%8==0</code>)</p>\n  \n  <p>So, In x86-64 processor,</p>\n</blockquote>\n\n<pre><code>struct mystruct_A {\n    char a;\n    int b;\n    char c;\n\n};\n</code></pre>\n\n<blockquote>\n  <p>will be constructed as,</p>\n</blockquote>\n\n<pre><code>struct mystruct_A {\n    char a;\n    char gap_0[7]; /* inserted by compiler: for alignment of b using array */\n    int b;\n    char c;\n    char gap_1[7]; /* for alignment of the whole struct using array */\n};\n</code></pre>\n\n<hr>\n\n<p>If the above understanding is correct, then I would like to know <em>why use an array of int for bit operation</em>?</p>\n\n<p>Recommends to use int sized data, as mentioned <a href=\"http://www.mathcs.emory.edu/~cheung/Courses/255/Syllabus/1-C-intro/bit-array.html\" rel=\"nofollow noreferrer\">here</a>, that says,  <em>because the most cost efficient access to memory is accessing int sized data</em>.</p>\n\n<p>Question:</p>\n\n<p>Is this <em>memory alignment rule</em> that forces to declare int sized data for bit operations?</p>\n"}, {"tags": ["c", "function-pointers", "function-declaration"], "comments": [{"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 16, "creation_date": 1483519922, "post_id": 41459639, "comment_id": 70124873, "body": "Because that&#39;s not the syntax specified in the grammar."}, {"owner": {"reputation": 6177, "user_id": 4948889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f1b540c13a4b2663a9bf668f6a50145?s=128&d=identicon&r=PG", "display_name": "Jaffer Wilson", "link": "https://stackoverflow.com/users/4948889/jaffer-wilson"}, "edited": false, "score": 0, "creation_date": 1483520098, "post_id": 41459639, "comment_id": 70124971, "body": "While declaring a function in C, it is highly recommended that you should know what exactly is the syntax of working. If you do not have an idea then you should read about it. I do not understand what you are trying to achieve, and why you require such a complex declaration?"}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1483520225, "post_id": 41459639, "comment_id": 70125069, "body": "You may find <a href=\"http://cdecl.org/\" rel=\"nofollow noreferrer\">cdecl.org</a>  helpful in constructing complicated C types."}, {"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "reply_to_user": {"reputation": 6177, "user_id": 4948889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f1b540c13a4b2663a9bf668f6a50145?s=128&d=identicon&r=PG", "display_name": "Jaffer Wilson", "link": "https://stackoverflow.com/users/4948889/jaffer-wilson"}, "edited": false, "score": 0, "creation_date": 1483520226, "post_id": 41459639, "comment_id": 70125071, "body": "@JafferWilson it&#39;s not that complex, it&#39;s a function which takes an int and a function pointer as arguments, quite often used for registering callbacks and similar"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 3, "creation_date": 1483520448, "post_id": 41459639, "comment_id": 70125208, "body": "I can think of many declarations which look logical but the compiler would not recognize."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1483520599, "post_id": 41459639, "comment_id": 70125323, "body": "I highly recommend using <code>typedef</code> to simplify function pointer usage. Define <code>typedef void FuncType();</code> and use as <code>void func_dec(int x, FuncType * funcptr);</code>"}, {"owner": {"reputation": 145, "user_id": 4866402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a75723b1906396a4e04696d6d1d7e52d?s=128&d=identicon&r=PG&f=1", "display_name": "bharath", "link": "https://stackoverflow.com/users/4866402/bharath"}, "edited": false, "score": 0, "creation_date": 1483522424, "post_id": 41459639, "comment_id": 70126432, "body": "I can understand that grammar specified is not logical in this case. But if something defy&#39;s logic there must be or may be a reason."}, {"owner": {"reputation": 3350, "user_id": 7332147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4GFL.png?s=128&g=1", "display_name": "linuxfan says Reinstate Monica", "link": "https://stackoverflow.com/users/7332147/linuxfan-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483523322, "post_id": 41459639, "comment_id": 70126966, "body": "Upvoted the question: this type of declaration is counter-intuitive, even if there is a reason for that. One must use the available syntax, and yet be free to criticize it."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1483520115, "creation_date": 1483520115, "answer_id": 41459724, "question_id": 41459639, "link": "https://stackoverflow.com/questions/41459639/can-someone-explain-why-void-func-decvoid-int-funcptr-is-illegal/41459724#41459724", "title": "Can someone explain why &quot;void func_dec(void (*)(int) funcptr);&quot; is illegal", "body": "<p>This is because,</p>\n\n<pre><code> void(*)() funcptr\n</code></pre>\n\n<p>is in invalid syntax on it's own. </p>\n\n<p>Just supply the <em>type</em> while writing the function declaration,</p>\n\n<pre><code>void func_dec(int , void(*) ());\n</code></pre>\n\n<p>it should be enough. Otherwise, if you want to specify the variable name also, write</p>\n\n<pre><code> void func_dec(int x, void(*funcptr) ());\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483543665, "post_id": 41462172, "comment_id": 70140324, "body": "@FabioTurati Thanks. I read your version using the &quot;right-left&quot; rule and you are correct. I read my version and got... lost. I removed it from my answer."}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 1, "last_activity_date": 1483543145, "last_edit_date": 1483543145, "creation_date": 1483527543, "answer_id": 41462172, "question_id": 41459639, "link": "https://stackoverflow.com/questions/41459639/can-someone-explain-why-void-func-decvoid-int-funcptr-is-illegal/41462172#41462172", "title": "Can someone explain why &quot;void func_dec(void (*)(int) funcptr);&quot; is illegal", "body": "<p>The function parameter name should go in the same place as the function name goes when you declare a function.</p>\n\n<p>Function declaration:</p>\n\n<pre><code>void func();  // correct syntax\nvoid() func;  // incorrrect syntax\n</code></pre>\n\n<p>Function pointer declaration:</p>\n\n<pre><code>void (*func_ptr)();  // correct syntax\nvoid (*)() func_ptr; // incorrect syntax\n</code></pre>\n\n<p>Declaring a function pointer becomes easier if you use the following trick:</p>\n\n<p>Take the function declaration. Replace the function name with <code>(*pointerName)</code>, or <code>(*)</code> if you want an unnamed version.</p>\n\n<p>Example: </p>\n\n<pre><code> int func1(char* parm1);        // function\n int (*func1_ptr)(char* parm1); // function pointer\n\n // function taking a function pointer as parameter:\n void foo(int (*func1_ptr)(char*));\n // The same declaration with an unnamed parameter:\n void foo(int (*)(char*));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 57963, "user_id": 968261, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/16f69ca344773bd6c34970b2f6186d61?s=128&d=identicon&r=PG", "display_name": "Alexey Frunze", "link": "https://stackoverflow.com/users/968261/alexey-frunze"}, "is_accepted": false, "score": 2, "last_activity_date": 1483529901, "creation_date": 1483529901, "answer_id": 41462898, "question_id": 41459639, "link": "https://stackoverflow.com/questions/41459639/can-someone-explain-why-void-func-decvoid-int-funcptr-is-illegal/41462898#41462898", "title": "Can someone explain why &quot;void func_dec(void (*)(int) funcptr);&quot; is illegal", "body": "<p>It is illegal because the formal definition in the language standard says so. As for the reason why it is that way, and it really may seem obscure, here it is:</p>\n\n<p>From <a href=\"http://www.knosof.co.uk/cbook/cbook.html\" rel=\"nofollow noreferrer\">The New C Standard: An Economic and Cultural Commentary (v 1.2 from June 24, 2009, section 6.7 Declarations)</a>:</p>\n\n<blockquote>\n  <p>The intent of this syntax is for an identifier\u2019s declarator to have\n  the same visual appearance as an instance of that identifier in an\n  expression. For instance, in:</p>\n  \n  <p>int x[3], *y, z(void);</p>\n  \n  <p>char (*f(int))[];</p>\n  \n  <p>the identifier x might appear in the source as an indexed\n  array, y as a dereferenced pointer, and z as a function call. An\n  example of an expression using the result of a call to f is\n  (*f(42))[1].</p>\n</blockquote>\n\n<p>And the same from <a href=\"https://www.bell-labs.com/usr/dmr/www/chist.html\" rel=\"nofollow noreferrer\">The Development of the C Language by Dennis M. Ritchie</a>:</p>\n\n<blockquote>\n  <p>Thus,</p>\n  \n  <p>int i, *pi, **ppi;</p>\n  \n  <p>declare an integer, a pointer to an integer, a\n  pointer to a pointer to an integer. The syntax of these declarations\n  reflects the observation that i, *pi, and **ppi all yield an int type\n  when used in an expression. Similarly,</p>\n  \n  <p>int f(), *f(), (*f)();</p>\n  \n  <p>declare\n  a function returning an integer, a function returning a pointer to an\n  integer, a pointer to a function returning an integer;</p>\n  \n  <p>int *api[10], (*pai)[10];</p>\n  \n  <p>declare an array of pointers to integers, and a pointer to\n  an array of integers. In all these cases the declaration of a variable\n  resembles its usage in an expression whose type is the one named at\n  the head of the declaration.</p>\n</blockquote>\n"}], "owner": {"reputation": 145, "user_id": 4866402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a75723b1906396a4e04696d6d1d7e52d?s=128&d=identicon&r=PG&f=1", "display_name": "bharath", "link": "https://stackoverflow.com/users/4866402/bharath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1483543145, "creation_date": 1483519837, "last_edit_date": 1483520402, "question_id": 41459639, "link": "https://stackoverflow.com/questions/41459639/can-someone-explain-why-void-func-decvoid-int-funcptr-is-illegal", "title": "Can someone explain why &quot;void func_dec(void (*)(int) funcptr);&quot; is illegal", "body": "<p>When declaring a functions which takes function pointer as argument as mentioned  below the compiler throws error.</p>\n\n<pre><code> void func_dec(int x, void(*)() funcptr);\n</code></pre>\n\n<p>Whereas it accepts below declaration,</p>\n\n<pre><code> void func_dec(int x, void(*funcptr)());\n</code></pre>\n\n<p>Why the compiler could not recognize the former declaration though it looks logical. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1483518024, "post_id": 41459152, "comment_id": 70123901, "body": "<code>scanf(&quot;%c&quot;,&amp;letter);</code> should be <code>scanf(&quot; %c&quot;,&amp;letter);</code> (notice a space before <code>%c</code>), but Why?"}, {"owner": {"reputation": 646, "user_id": 6354265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y84zS.jpg?s=128&g=1", "display_name": "Ahad", "link": "https://stackoverflow.com/users/6354265/ahad"}, "edited": false, "score": 0, "creation_date": 1483518578, "post_id": 41459152, "comment_id": 70124169, "body": "why should i add a space before %c?"}, {"owner": {"reputation": 646, "user_id": 6354265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y84zS.jpg?s=128&g=1", "display_name": "Ahad", "link": "https://stackoverflow.com/users/6354265/ahad"}, "edited": false, "score": 0, "creation_date": 1483518606, "post_id": 41459152, "comment_id": 70124186, "body": "is this because of we have an extra space when we hit enter?"}, {"owner": {"reputation": 53, "user_id": 7373097, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-bvD4nOvjV3E/AAAAAAAAAAI/AAAAAAAAAdQ/FGZDavzD_Og/photo.jpg?sz=128", "display_name": "Siddy Mta", "link": "https://stackoverflow.com/users/7373097/siddy-mta"}, "edited": false, "score": 0, "creation_date": 1483518791, "post_id": 41459152, "comment_id": 70124281, "body": "Thanks i just gave a space before %c and it worked!"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1483522313, "post_id": 41459152, "comment_id": 70126358, "body": "Read <a href=\"http://c-faq.com/stdio/scanfprobs.html\" rel=\"nofollow noreferrer\">&quot;Why does everyone say not to use scanf? What should I use instead?&quot;</a>."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1483523471, "post_id": 41459152, "comment_id": 70127061, "body": "You certainly should try to print the integer value of <code>letter</code> after the <code>scanf</code>.That will help you understand why the <code>while(letter==&#39;y&#39;)</code> is not satisfied and the loop terminates."}], "answers": [{"comments": [{"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1556961659, "post_id": 41459420, "comment_id": 98611721, "body": "<a href=\"https://stackoverflow.com/q/47049709/472495\">Given the information in this question</a>, the answer here appears to have been copied from an answer from Jonathan Leffler, which was made on Mar 5 &#39;12 at 7:05. However, I cannot find the original, and I wonder if it has been deleted."}], "tags": [], "owner": {"reputation": 343, "user_id": 5704995, "user_type": "registered", "profile_image": "https://graph.facebook.com/1714182875479763/picture?type=large", "display_name": "Shashi Kundan", "link": "https://stackoverflow.com/users/5704995/shashi-kundan"}, "is_accepted": false, "score": 3, "last_activity_date": 1483519122, "creation_date": 1483519122, "answer_id": 41459420, "question_id": 41459152, "link": "https://stackoverflow.com/questions/41459152/does-not-ask-for-2nd-input-in-do-while-loop/41459420#41459420", "title": "Does not ask for 2nd input in do while loop", "body": "<p>The basic problem is that scanf() leaves the newline after the number in the buffer, and then reads it with %c on the next pass.</p>\n\n<p>You can probably rescue it by using <code>\" %c\" </code>instead of <code>\"%c\"</code>for the format string. The blank causes scanf() to skip white space (including newlines) before reading the character</p>\n\n<p>Or you can use getchar() function</p>\n"}, {"tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": true, "score": 1, "last_activity_date": 1483522508, "last_edit_date": 1483522508, "creation_date": 1483522081, "answer_id": 41460306, "question_id": 41459152, "link": "https://stackoverflow.com/questions/41459152/does-not-ask-for-2nd-input-in-do-while-loop/41460306#41460306", "title": "Does not ask for 2nd input in do while loop", "body": "<p>Either change the first <code>scanf</code> to</p>\n\n<pre><code>scanf(\"%d\\n\", &amp;num);\n</code></pre>\n\n<p>or change the second <code>scanf</code> to</p>\n\n<pre><code>scanf(\" %c\", &amp;letter);\n</code></pre>\n\n<p>to ignore the newline character(s).</p>\n\n<p>Another alternative (will read until valid integers are entered)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int n;\n    while(1) {\n        printf(\"Enter any number: \");\n        if (scanf(\"%d\", &amp;n) != 1)\n            break;\n        printf(\"Square of %d is %d\\n\", n, n * n);\n    }\n}\n</code></pre>\n\n<p><strong>Input</strong></p>\n\n<pre><code>2\n3\n5\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Enter any number: 2\nSquare of 2 is 4\nEnter any number: 3\nSquare of 3 is 9\nEnter any number: 4\nSquare of 4 is 16\nEnter any number: \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7255171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f57bcffb525ecd9f1eee04ddada13c1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thirdymatic", "link": "https://stackoverflow.com/users/7255171/thirdymatic"}, "is_accepted": false, "score": 0, "last_activity_date": 1483523378, "creation_date": 1483523378, "answer_id": 41460747, "question_id": 41459152, "link": "https://stackoverflow.com/questions/41459152/does-not-ask-for-2nd-input-in-do-while-loop/41460747#41460747", "title": "Does not ask for 2nd input in do while loop", "body": "<p>I modified your code a little bit:   </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n    #inlcude &lt;conio.h&gt;\n    void main()\n    {\n     char letter;\n     int num;\n    clrscr();\n     do\n     {\n       printf(\"Enter any number: \");\n       scanf(\" %d\",&amp;num);\n       printf(\"Square of %d is %d\\n\",num,num*num);\n       printf(\" you want to enter another number? y/n\");\n       scanf(\" %c\",&amp;letter);\n     }while(letter=='y');\n}\n</code></pre>\n\n<p>I just added spaces on your scanf to cancel out whitespaces before the scanf reads the integer. <em>%d</em> will only read integers, so having a text/char there cancels out the program. hope it helps!</p>\n\n<p>Edit: I forgot to tell you, I added another #include for the <em>clrscr();</em> to clear the screen when you re-run the program.</p>\n"}], "owner": {"reputation": 53, "user_id": 7373097, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-bvD4nOvjV3E/AAAAAAAAAAI/AAAAAAAAAdQ/FGZDavzD_Og/photo.jpg?sz=128", "display_name": "Siddy Mta", "link": "https://stackoverflow.com/users/7373097/siddy-mta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "closed_date": 1483528053, "accepted_answer_id": 41460306, "answer_count": 3, "score": 2, "last_activity_date": 1483523378, "creation_date": 1483517943, "last_edit_date": 1483521341, "question_id": 41459152, "link": "https://stackoverflow.com/questions/41459152/does-not-ask-for-2nd-input-in-do-while-loop", "closed_reason": "Duplicate", "title": "Does not ask for 2nd input in do while loop", "body": "<pre><code>#include&lt;stdio.h&gt;\nvoid main()\n{\n char letter;\n int num;\n do\n {\n   printf(\"Enter any number: \");\n   scanf(\"%d\",&amp;num);\n   printf(\"Square of %d is %d\\n\",num,num*num);\n   printf(\"you want to enter another no y/n \");\n   scanf(\"%c\",&amp;letter);\n }while(letter=='y');\n}\n</code></pre>\n\n<p>After executing this program, it didn't ask for second scanf function so it terminates after 3rd printf statement printf(\"you want to..\");\nhelp me correct it!</p>\n"}, {"tags": ["c", "floating-point", "floating-accuracy", "square-root"], "comments": [{"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 1, "creation_date": 1483516341, "post_id": 41458193, "comment_id": 70123163, "body": "Looking at the <a href=\"https://cs.uwaterloo.ca/~m32rober/rsqrt.pdf\" rel=\"nofollow noreferrer\">paper</a>, appendix A.2 , the maximum error has been computed by sampling. Hence, I would not be too worried to find an error slightly larger than the maximum error..."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "reply_to_user": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1483523416, "post_id": 41458193, "comment_id": 70127026, "body": "@francis Not really. The program tests every 32-bit value from 0x00800000 to 0x7f7fffff, which covers almost the entire range of positive float values."}, {"owner": {"reputation": 18055, "user_id": 936310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/302ec54987694b9746abf8e2e0ad8caf?s=128&d=identicon&r=PG&f=1", "display_name": "alias", "link": "https://stackoverflow.com/users/936310/alias"}, "reply_to_user": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1483555080, "post_id": 41458193, "comment_id": 70147663, "body": "I think @francis is right; the sampling is the issue here. The stated relative error applies to the original magic number used in Quake, which is what I was using as well. (i.e., the question is really about the original magic number and the associated relative error; not the improvements over it.)"}], "answers": [{"comments": [{"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1483553371, "post_id": 41460625, "comment_id": 70146759, "body": "indeed, you&#39;re right. This original value of Quake III can be found in the <a href=\"https://github.com/id-Software/Quake-III-Arena/blob/master/code/game/q_math.c\" rel=\"nofollow noreferrer\">source of Quake III, in file q_math.c</a> on line 561. The comment on that very line is not intended to be included on a Q/A site... The history of the constant and the optimal value for 64 bit IEEE754 double (0x5fe6eb50c7b537a9) can be found on [wikipedia], citing <a href=\"https://cs.uwaterloo.ca/~m32rober/rsqrt.pdf\" rel=\"nofollow noreferrer\">the work of Matthew Robertson</a>, who also reports the values for double and quad precision!"}, {"owner": {"reputation": 18055, "user_id": 936310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/302ec54987694b9746abf8e2e0ad8caf?s=128&d=identicon&r=PG&f=1", "display_name": "alias", "link": "https://stackoverflow.com/users/936310/alias"}, "edited": false, "score": 0, "creation_date": 1483555000, "post_id": 41460625, "comment_id": 70147616, "body": "I&#39;m not sure if I agree. If you look at Section 4.7 of the paper, the improved magic number of 0x5f375a86 has a maximum relative error of 0.0017512378; which is <i>different</i> than the one for the original magic number. So I think my question stands regarding the relative error of the original <code>Q_rsqrt</code> function."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "reply_to_user": {"reputation": 18055, "user_id": 936310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/302ec54987694b9746abf8e2e0ad8caf?s=128&d=identicon&r=PG&f=1", "display_name": "alias", "link": "https://stackoverflow.com/users/936310/alias"}, "edited": false, "score": 0, "creation_date": 1483567325, "post_id": 41460625, "comment_id": 70153807, "body": "@LeventErkok I see what you mean. By the look of things, the author uses <code>Q_rsqrt()</code> to refer to the original Quake III code, and <code>rsqrt()</code> to refer to the improved version. Neither of these functions yields the result cited in section 4.7. Perhaps you could try contacting the author for clarification."}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "reply_to_user": {"reputation": 18055, "user_id": 936310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/302ec54987694b9746abf8e2e0ad8caf?s=128&d=identicon&r=PG&f=1", "display_name": "alias", "link": "https://stackoverflow.com/users/936310/alias"}, "edited": false, "score": 1, "creation_date": 1483571938, "post_id": 41460625, "comment_id": 70155701, "body": "To test the <code>Q_rsqrt()</code> function on my 64 bit computer, I felt it would be better to use <code>unsigned int</code> instead of <code>long</code>. I found that the largest error of `Q_rsqrt()``is 0x1.cb5d752717ep-10=0.001752338672. It is obtained for the float 0x1.dd678p-49. As noticed by @LeventErkok, it&#39;s higher than the cited bound..."}, {"owner": {"reputation": 18055, "user_id": 936310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/302ec54987694b9746abf8e2e0ad8caf?s=128&d=identicon&r=PG&f=1", "display_name": "alias", "link": "https://stackoverflow.com/users/936310/alias"}, "reply_to_user": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1483595544, "post_id": 41460625, "comment_id": 70161748, "body": "I tried locating the author, but couldn&#39;t find an e-mail address for him. Perhaps he&#39;ll read this one day!  @francis Thanks for the further analysis. If you can turn that comment into an answer, I&#39;d be happy to accept it!"}, {"owner": {"reputation": 138, "user_id": 554117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9280baafd8db29cd836e410d5ecee49?s=128&d=identicon&r=PG", "display_name": "Giulio Pulina", "link": "https://stackoverflow.com/users/554117/giulio-pulina"}, "reply_to_user": {"reputation": 18055, "user_id": 936310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/302ec54987694b9746abf8e2e0ad8caf?s=128&d=identicon&r=PG&f=1", "display_name": "alias", "link": "https://stackoverflow.com/users/936310/alias"}, "edited": false, "score": 0, "creation_date": 1540768957, "post_id": 41460625, "comment_id": 92974025, "body": "@LeventErkok I&#39;m not sure but I think it&#39;s this guy: <a href=\"https://www.linkedin.com/in/mattcharobertson\" rel=\"nofollow noreferrer\">linkedin.com/in/mattcharobertson</a>"}, {"owner": {"reputation": 18055, "user_id": 936310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/302ec54987694b9746abf8e2e0ad8caf?s=128&d=identicon&r=PG&f=1", "display_name": "alias", "link": "https://stackoverflow.com/users/936310/alias"}, "reply_to_user": {"reputation": 138, "user_id": 554117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9280baafd8db29cd836e410d5ecee49?s=128&d=identicon&r=PG", "display_name": "Giulio Pulina", "link": "https://stackoverflow.com/users/554117/giulio-pulina"}, "edited": false, "score": 0, "creation_date": 1540827702, "post_id": 41460625, "comment_id": 92997746, "body": "@GiulioPulina Thanks! I lost interest in delving further, but if anyone else wants to the get to the bottom of this your link might prove fruitful!"}], "tags": [], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "is_accepted": false, "score": 4, "last_activity_date": 1483522987, "creation_date": 1483522987, "answer_id": 41460625, "question_id": 41458193, "link": "https://stackoverflow.com/questions/41458193/quake-inverse-square-root-accuracy/41460625#41460625", "title": "Quake inverse-square root: accuracy", "body": "<p>You're using the wrong magic number.</p>\n\n<p><code>0x5f3759df</code> is the value originally used in Quake III, but it was later found that <code>0x5f375a86</code> gives better results. If you take a look at Fig. 6.1 on page 40 of the paper you cited, you'll see that it's using the improved constant.</p>\n\n<p>Here are the results I obtained using <code>0x5f375a86</code>:</p>\n\n<pre><code>Input    : 0x1.dd687p-7\nActual   : 0x1.091cc953ea828p+3\nMagic    : 0x1.08a5fap+3\nErr      : 0x1.cae79153f2cp-10\nTolerance: 0x1.cb5a044e0581p-10\nPasses   : 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18055, "user_id": 936310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/302ec54987694b9746abf8e2e0ad8caf?s=128&d=identicon&r=PG&f=1", "display_name": "alias", "link": "https://stackoverflow.com/users/936310/alias"}, "edited": false, "score": 0, "creation_date": 1483813355, "post_id": 41516450, "comment_id": 70255597, "body": "Thanks for the analysis!"}], "tags": [], "owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "is_accepted": true, "score": 1, "last_activity_date": 1483748433, "creation_date": 1483748433, "answer_id": 41516450, "question_id": 41458193, "link": "https://stackoverflow.com/questions/41458193/quake-inverse-square-root-accuracy/41516450#41516450", "title": "Quake inverse-square root: accuracy", "body": "<p>Let's try a little piece of code to recompute the bound on the relative error and shows that it's slightly larger than the one in the <a href=\"https://cs.uwaterloo.ca/~m32rober/rsqrt.pdf\" rel=\"nofollow noreferrer\">thesis of Matthew Robertson</a>. Indeed, as noticed first in the answer of @squeamishossifrage and noted in <a href=\"https://cs.uwaterloo.ca/~m32rober/rsqrt.pdf\" rel=\"nofollow noreferrer\">the thesis of Matthew Robertson</a>, this implementation is the one that was disclosed in the source of Quake III. In particular, the original value of the constant of Quake III can be found in the source of Quake III, in file <a href=\"https://github.com/id-Software/Quake-III-Arena/blob/master/code/game/q_math.c\" rel=\"nofollow noreferrer\">q_math.c</a> on line 561.</p>\n\n<p>First, the code needs to be adapted to work on 64bit plateforms. The only thing that may have to be modified is the integer type: <code>long</code> is not plateform-independent. On my linux computer, <code>sizeof(long)</code> returns 8... As updated in the paper on page 49, the type <code>uint32_t</code> will ensure that the type of the integer is of the same size as a <code>float</code>.</p>\n\n<p>Here goes the code, to be compiled by <code>gcc main.c -o main -lm -Wall</code> and ran by <code>./main</code>: </p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;inttypes.h&gt;\n\nfloat Q_rsqrt(float number) {\n    uint32_t i;\n    float x2, y;\n    const float threehalfs = 1.5F;\n\n    x2 = number * 0.5F;\n    y = number;\n    i = *(uint32_t *) &amp;y;\n    i = 0x5f3759df - (i &gt;&gt; 1); //  0x5f3759df 0x5f375a86\n    y = *(float *) &amp;i;\n    y = y * (threehalfs - (x2 * y * y));\n    // y = y * (threehalfs - (x2 * y * y));\n    return y;\n}\n\nint main ()\n{\n\n    printf(\"%ld %ld\\n\",sizeof(long),sizeof(uint32_t));\n\n    uint32_t i;\n    float y;\n    double e, max = 0.0;\n    float maxval=0;\n    for(i = 0x0000000; i &lt; 0x6f800000; i++) {\n        y = *(float *) &amp;i;\n        if(y&gt;1e-30){\n            e = fabs(sqrt((double)y)*(double)Q_rsqrt(y) - 1);\n            if(e &gt; max){\n                max = e;\n                maxval=y;\n            }\n        }\n    }\n    printf(\"On value %2.8g == %a\\n\", maxval, maxval);\n    printf(\"The bound is %2.12g == %a\\n\", max, max);\n\n    return 0;\n}\n</code></pre>\n\n<p>For the bound, I obtained <code>0.0017523386721 == 0x1.cb5d752717ep-10</code>. As you noticed, it is slightly larger than the one reported in the paper (<code>0.001752287</code>). Evaluating the error using <code>float</code> instead of <code>double</code> does not change much the outcome. </p>\n"}], "owner": {"reputation": 18055, "user_id": 936310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/302ec54987694b9746abf8e2e0ad8caf?s=128&d=identicon&r=PG&f=1", "display_name": "alias", "link": "https://stackoverflow.com/users/936310/alias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 41516450, "answer_count": 2, "score": 3, "last_activity_date": 1483748433, "creation_date": 1483514151, "last_edit_date": 1483687990, "question_id": 41458193, "link": "https://stackoverflow.com/questions/41458193/quake-inverse-square-root-accuracy", "title": "Quake inverse-square root: accuracy", "body": "<p>The \"magic\" method of computing the inverse-square root, dating back to the Quake game apparently, is described in many sources. Wikipedia has a nice article on it: <a href=\"https://en.wikipedia.org/wiki/Fast_inverse_square_root\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Fast_inverse_square_root</a></p>\n\n<p>I particularly found the following to be a very nice write-up and analysis of the algorithm: <a href=\"https://cs.uwaterloo.ca/~m32rober/rsqrt.pdf\" rel=\"nofollow noreferrer\">https://cs.uwaterloo.ca/~m32rober/rsqrt.pdf</a></p>\n\n<p>I'm trying to replicate some of these results in this paper, but having an issue with the accuracy. The algorithm, coded in C, is given as follows:</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\nfloat Q_rsqrt(float number) {\n  long i;\n  float x2, y;\n  const float threehalfs = 1.5F;\n\n  x2 = number * 0.5F;\n  y = number;\n  i = *(long *) &amp;y;\n  i = 0x5f3759df - (i &gt;&gt; 1);\n  y = *(float *) &amp;i;\n  y = y * (threehalfs - (x2 * y * y));\n  // y = y * (threehalfs - (x2 * y * y));\n  return y;\n}\n</code></pre>\n\n<p>The <a href=\"https://cs.uwaterloo.ca/~m32rober/rsqrt.pdf\" rel=\"nofollow noreferrer\">paper</a> states that the relative error is at most <code>0.0017522874</code> for all positive normal floats. (See Appendix 2 for the code, and the discussion in Section 1.4.)</p>\n\n<p>However, when I \"plug-in\" the number <code>1.4569335e-2F</code>, the error I get is larger than this predicted tolerance:</p>\n\n<pre><code>int main ()\n{\n\n  float f = 1.4569335e-2F;\n\n  double tolerance = 0.0017522874;\n  double actual    = 1.0 / sqrt(f);\n  float  magic     = Q_rsqrt(f);\n  double err       = fabs (sqrt(f) * (double) magic - 1);\n\n  printf(\"Input    : %a\\n\", f);\n  printf(\"Actual   : %a\\n\", actual);\n  printf(\"Magic    : %a\\n\", magic);\n  printf(\"Err      : %a\\n\", err);\n  printf(\"Tolerance: %a\\n\", tolerance);\n  printf(\"Passes   : %d\\n\", err &lt;= tolerance);\n\n  return 0;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>Input    : 0x1.dd687p-7\nActual   : 0x1.091cc953ea828p+3\nMagic    : 0x1.08a5dcp+3\nErr      : 0x1.cb5b716b7b6p-10\nTolerance: 0x1.cb5a044e0581p-10\nPasses   : 0\n</code></pre>\n\n<p>So, this particular input seems to violate the claim made in that paper.</p>\n\n<p>I'm wondering if this is an issue with the paper itself, or if I made a mistake in my coding. I'd appreciate any feedback!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1483609839, "post_id": 41457662, "comment_id": 70168650, "body": "the value <code>-1</code> is two characters, so will not be seen by <code>getchar()</code> as a -1"}], "answers": [{"tags": [], "owner": {"reputation": 43502, "user_id": 377953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hm9UN.jpg?s=128&g=1", "display_name": "taskinoor", "link": "https://stackoverflow.com/users/377953/taskinoor"}, "is_accepted": true, "score": 8, "last_activity_date": 1483513532, "last_edit_date": 1483513532, "creation_date": 1483512090, "answer_id": 41457706, "question_id": 41457662, "link": "https://stackoverflow.com/questions/41457662/why-loop-is-not-getting-terminated/41457706#41457706", "title": "Why loop is not getting terminated?", "body": "<p>Because typing <code>-1</code> on console doesn't generate EOF. Instead <code>getchar()</code> reads it as two separate characters <code>'-'</code> and <code>'1'</code>.</p>\n\n<p>If you want to terminate it with <code>-1</code> input then you have to keep track of two characters and compare them to exit the loop instead of comparing against EOF. But that is really not equivalent of generating an EOF.</p>\n\n<p>Another option to terminate is to redirect standard input to a file via input redirection <code>&lt;</code> in console. When the reading from input file ends it will signal an EOF.</p>\n"}, {"tags": [], "owner": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "is_accepted": false, "score": 1, "last_activity_date": 1483513184, "last_edit_date": 1483513184, "creation_date": 1483512927, "answer_id": 41457901, "question_id": 41457662, "link": "https://stackoverflow.com/questions/41457662/why-loop-is-not-getting-terminated/41457901#41457901", "title": "Why loop is not getting terminated?", "body": "<p>If you want to loop out of the code without pressing ctrl+D then there are multiple ways of doing it. I will show you the easiest and inefficient way of doing it using a basic if condition. Go through the code and if you have any doubt please feel free to comment on it.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main()\n{\nint c;\nc = getchar();\nwhile ((c != EOF))\n{\n    if (c == 'i')\n        break;\n    putchar(c);\n    c = getchar();\n\n}\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7335078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba2a77dd8515f0aa0a15a3673bf459eb?s=128&d=identicon&r=PG&f=1", "display_name": "Hitesh", "link": "https://stackoverflow.com/users/7335078/hitesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "closed_date": 1485724949, "accepted_answer_id": 41457706, "answer_count": 2, "score": 1, "last_activity_date": 1483513532, "creation_date": 1483511861, "last_edit_date": 1483512869, "question_id": 41457662, "link": "https://stackoverflow.com/questions/41457662/why-loop-is-not-getting-terminated", "closed_reason": "Duplicate", "title": "Why loop is not getting terminated?", "body": "<pre><code>int main()\n{\n    int c;\n    c = getchar();\n    while (c!=EOF){\n        putchar(c);\n        c=getchar();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>in above code when I input value -1 why the loop doesn`t get terminated.<br>\n  value of EOF = -1 I got from this code,</p>\n\n<pre><code>main()\n{\n    printf(\"EOF is %d\\n\",EOF);\n}\n</code></pre>\n\n<p>code get terminated when I use <kbd>Ctrl</kbd>+<kbd>D</kbd>,is there any other way to terminate the same code without using <kbd>Ctrl</kbd>+<kbd>D</kbd>.</p>\n"}, {"tags": ["c", "jpeg", "eof", "fread", "cs50"], "comments": [{"owner": {"reputation": 1029, "user_id": 2176845, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3dc89025bf40202b994b24b28e6d71cd?s=128&d=identicon&r=PG", "display_name": "levengli", "link": "https://stackoverflow.com/users/2176845/levengli"}, "edited": false, "score": 0, "creation_date": 1483512962, "post_id": 41457417, "comment_id": 70121655, "body": "What mode was used for opening the file? Did you specify <code>rb</code> in order to indicate a binary file?"}, {"owner": {"reputation": 431, "user_id": 7272543, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e6887c5b4d0a5940b84367d8ac56f322?s=128&d=identicon&r=PG&f=1", "display_name": "Tikhon", "link": "https://stackoverflow.com/users/7272543/tikhon"}, "reply_to_user": {"reputation": 1029, "user_id": 2176845, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3dc89025bf40202b994b24b28e6d71cd?s=128&d=identicon&r=PG", "display_name": "levengli", "link": "https://stackoverflow.com/users/2176845/levengli"}, "edited": false, "score": 0, "creation_date": 1483513859, "post_id": 41457417, "comment_id": 70122046, "body": "no... i used &quot;w&quot; since i am writing to multiple files...  Edit: just tried to fopen the initial file in rb mode but it didn&#39;t help"}, {"owner": {"reputation": 1029, "user_id": 2176845, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3dc89025bf40202b994b24b28e6d71cd?s=128&d=identicon&r=PG", "display_name": "levengli", "link": "https://stackoverflow.com/users/2176845/levengli"}, "edited": false, "score": 0, "creation_date": 1483514796, "post_id": 41457417, "comment_id": 70122445, "body": "please add more code. it is not clear from the snippet provided exactly what may be the issue"}, {"owner": {"reputation": 431, "user_id": 7272543, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e6887c5b4d0a5940b84367d8ac56f322?s=128&d=identicon&r=PG&f=1", "display_name": "Tikhon", "link": "https://stackoverflow.com/users/7272543/tikhon"}, "reply_to_user": {"reputation": 1029, "user_id": 2176845, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3dc89025bf40202b994b24b28e6d71cd?s=128&d=identicon&r=PG", "display_name": "levengli", "link": "https://stackoverflow.com/users/2176845/levengli"}, "edited": false, "score": 0, "creation_date": 1483515176, "post_id": 41457417, "comment_id": 70122624, "body": "Done. I have taken a closer look at the pics, it seems the SECOND (out of the fifty) is now improperly formatted."}], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 7272543, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e6887c5b4d0a5940b84367d8ac56f322?s=128&d=identicon&r=PG&f=1", "display_name": "Tikhon", "link": "https://stackoverflow.com/users/7272543/tikhon"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1483578754, "post_id": 41458569, "comment_id": 70157701, "body": "Thanks fro the reply. When I first implemented my EOF checker, I broke 000.jpg (the first of 50 images) so the if function was an attempt at a getto workaround. Having implemented it, 000.jpg was OK but now I broke 001.jpg... as well as screwing with some (but not all) subsequent pics..."}], "tags": [], "owner": {"reputation": 431, "user_id": 7272543, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e6887c5b4d0a5940b84367d8ac56f322?s=128&d=identicon&r=PG&f=1", "display_name": "Tikhon", "link": "https://stackoverflow.com/users/7272543/tikhon"}, "is_accepted": true, "score": 0, "last_activity_date": 1483515589, "creation_date": 1483515589, "answer_id": 41458569, "question_id": 41457417, "link": "https://stackoverflow.com/questions/41457417/end-of-file-detection/41458569#41458569", "title": "End of File detection", "body": "<p>OK, I fixed it. </p>\n\n<p>Instead of having a whole separate section of code to check eof I killed two birds in one stone and fread the file WHILE checking for eof:</p>\n\n<pre><code>                //read the next block\n                int k = fread(&amp;buffer, 1, 512, in_pointer);\n                if(k != 512)\n                {\n                        free(filename);\n                        return 0;\n                }\n</code></pre>\n\n<p>I still have no idea why my previous method didn't work, I would be extremly grateful for suggestions...</p>\n"}], "owner": {"reputation": 431, "user_id": 7272543, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e6887c5b4d0a5940b84367d8ac56f322?s=128&d=identicon&r=PG&f=1", "display_name": "Tikhon", "link": "https://stackoverflow.com/users/7272543/tikhon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "accepted_answer_id": 41458569, "answer_count": 1, "score": 0, "last_activity_date": 1483515589, "creation_date": 1483510935, "last_edit_date": 1483515095, "question_id": 41457417, "link": "https://stackoverflow.com/questions/41457417/end-of-file-detection", "title": "End of File detection", "body": "<p>I\u2019m a very novice programmer and I\u2019ve encountered an issue whose nature I don\u2019t understand, whilst working on a problem set of the excellent cs50 course. I have implemented a program to recover JPEG pictures from an image of a memory card and am implementing a break at End of File as follows:</p>\n\n<pre><code>if(file &gt; 1)\n    {\n        if (fread(&amp;buffer, 1, 512, in_pointer) != 512)\n        {\n            free(filename);\n            return 0;\n        }\n        else \n            fseek(in_pointer, -512, SEEK_CUR); \n    }\n</code></pre>\n\n<p>(the pictures are filling up the card in 512 byte blocks). When I first implemented this it broke my first picture (it was recognizable but distorted) so I excluded it by means of the first if statement. Now however the middle files of the set are slightly off\u2013 they still open as Jpegs but I can\u2019t get their thumbnails to work. My hypothesis is that I am corrupting the JPEG file format header. The beginning (including first and last images of the set work perfectly).\nMy questions are:</p>\n\n<ol>\n<li><p>What is an elegant way to implement an EOF break since my getto solution is causing trouble?</p></li>\n<li><p>What is the likely nature of the problem I\u2019ve created (in layman\u2019s terms)?</p></li>\n</ol>\n\n<p>Thank you very much,</p>\n\n<p>Tikhon</p>\n\n<p>ps here is the whole thing</p>\n\n<pre><code>#include &lt;cs50.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdint.h&gt;\n\nint main(int argc, char *argv[])\n{\n// ensure proper usage\nif (argc != 2)\n{\n    fprintf(stderr, \"enter exactly two command line arguments: ./recover and destination of disc to scan\\n\");\n    return 1;\n}\n\n//name the file\nchar *infile = argv[1];\n\n//open card file and ensure proper format\nFILE *in_pointer = fopen(infile, \"r\");\nif (in_pointer == NULL)\n{\n    fprintf(stderr, \"could not open %s\\n\", infile);\n    return 2;\n}\n\ntypedef uint8_t  BYTE;\n\nBYTE buffer[512];\nbool new_jpeg = false;\nint block = 0;\nint file = 0;\nchar *filename = malloc(3);\n//sprintf(filename, \"%03i.jpg\",1);\n\ndo\n{\n\n    //read a 512 block of a jpeg\n    fread(&amp;buffer, 512, 1, in_pointer);\n\n    //check for new jpeg\n    if (buffer[0] == 0xff &amp;&amp;\n        buffer[1] == 0xd8 &amp;&amp;\n        buffer[2] == 0xff &amp;&amp;\n        (buffer[3] &amp; 0xf0) == 0xe0) // took me a while to figure this out\n        {\n    new_jpeg = true;\n    //printf(\"jpeg found, block %i\\n\", block);\n        }\n\n    block++;\n\n\n\n} while(new_jpeg == false);\n\ndo\n{\n            //set name of file to write to\n            sprintf(filename, \"%03i.jpg\",file);\n            file++;\n            new_jpeg = false;\n\n            // open output file\n            FILE *img = fopen(filename, \"w\");\n            if (img == NULL)\n                {\n                    fprintf(stderr, \"Could not create %s.\\n\", filename);\n                    return 3;\n                }\n\n\n        //add blocks to file while before we reach the nea JPEG.\n        do\n        {\n\n\n                fwrite(&amp;buffer, 1, 512, img);\n\n                //read the next block\n                fread(&amp;buffer, 1, 512, in_pointer);\n\n                //There MUST be a better way... Anyhow this checks for end of file but backtracks becouse the act of checking moved the file coursor forward... \n                if(file &gt; 1)\n                {\n                    if (fread(&amp;buffer, 1, 512, in_pointer) != 512)\n                    {\n                        free(filename);\n                        return 0;\n                    }\n                    else \n                    fseek(in_pointer, -512, SEEK_CUR); \n                }\n\n\n                block++; //we are reading off teh next block\n\n                if (buffer[0] == 0xff &amp;&amp;\n                    buffer[1] == 0xd8 &amp;&amp;\n                    buffer[2] == 0xff &amp;&amp;\n                    (buffer[3] &amp; 0xf0) == 0xe0) // took me a while to figure this out\n                {\n                    new_jpeg = true;\n                    //printf(\"jpeg %i found, block %i\\n\", file, block);\n                }\n\n\n        }while(new_jpeg == false);\n\n}while(!feof(in_pointer));    \n\nfree(filename);\n//ran valgrind no probs detected.\n}\n</code></pre>\n"}, {"tags": ["c", "data-structures", "language-agnostic", "priority-queue", "binary-heap"], "comments": [{"owner": {"reputation": 57963, "user_id": 968261, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/16f69ca344773bd6c34970b2f6186d61?s=128&d=identicon&r=PG", "display_name": "Alexey Frunze", "link": "https://stackoverflow.com/users/968261/alexey-frunze"}, "edited": false, "score": 1, "creation_date": 1483532847, "post_id": 41457337, "comment_id": 70133055, "body": "See also heap sort."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 1, "creation_date": 1483537790, "post_id": 41457337, "comment_id": 70136270, "body": "Not really. Even heapsort, it could be argued, is just populating a priority queue and then pulling things off of in order. Binary heap <i>is</i> a priority queue. The more important question is what are applications of priority queues and, of those, which are best implemented with a binary heap and which should use some other priority queue implementation."}, {"owner": {"reputation": 2958, "user_id": 781723, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mYIzP.png?s=128&g=1", "display_name": "D.W.", "link": "https://stackoverflow.com/users/781723/d-w"}, "edited": false, "score": 0, "creation_date": 1483577727, "post_id": 41457337, "comment_id": 70157411, "body": "1. Please provide proper attribution for the source where you copied that from.  See <a href=\"http://stackoverflow.com/help/referencing\">stackoverflow.com/help/referencing</a>.  2. Asking for a list of all applications of binary heaps is probably too broad.  3. What research have you done?  Have you looked in data structures textbooks to see what they do with a heap?"}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1483606448, "post_id": 41457337, "comment_id": 70166615, "body": "&quot;Not really.&quot; -- Yes, really. &quot;Even heapsort, it could be argued, is just populating a priority queue and then pulling things off of in order. &quot; -- Not argued validly. HeapSort sorts -- that&#39;s the <i>application</i>. That it internally uses a heap is a tautology. The reason HeapSort is used is not because it has a heap internally, but because of its performance characteristics. See <a href=\"https://en.wikipedia.org/wiki/Introsort\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Introsort</a>"}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "reply_to_user": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1483638081, "post_id": 41457337, "comment_id": 70188415, "body": "@JimBalter: I think you&#39;re saying that Heapsort is a separate application because &quot;Priority Queue Sort&quot; wouldn&#39;t be as fast; that the heap&#39;s performance characteristics (in particular, the ability to rearrange an array in-place to build a binary heap in O(n)) makes using a binary heap superior to using just any old priority queue. Is that what you&#39;re saying?"}, {"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "reply_to_user": {"reputation": 2958, "user_id": 781723, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mYIzP.png?s=128&g=1", "display_name": "D.W.", "link": "https://stackoverflow.com/users/781723/d-w"}, "edited": false, "score": 0, "creation_date": 1483639265, "post_id": 41457337, "comment_id": 70189122, "body": "@D.W. I have taken the reference from wiki"}, {"owner": {"reputation": 2958, "user_id": 781723, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mYIzP.png?s=128&g=1", "display_name": "D.W.", "link": "https://stackoverflow.com/users/781723/d-w"}, "edited": false, "score": 0, "creation_date": 1483641726, "post_id": 41457337, "comment_id": 70190528, "body": "Please edit the question to follow the guidelines regarding referencing your source.  <a href=\"http://stackoverflow.com/help/referencing\">stackoverflow.com/help/referencing</a>  That includes (1) providing the name of the author or source for the material and (2) linking to the original web page.  Don&#39;t just put clarifications in the comments; we want you to edit the question. &quot;From wiki&quot; is not specific enough; a wiki is a kind of software, and could refer to any number of websites.  If you meant from Wikipedia, you should figure out what page, and then edit your question to follow the guidelines regarding attribution."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "reply_to_user": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1483642157, "post_id": 41457337, "comment_id": 70190786, "body": "@JimMischel No, what I&#39;m saying is that the fact that there&#39;s a PQ inside HeapSort is completely irrelevant -- no one cares, and a totally different sort algorithm with the same performance characteristics could be substituted for HeapSort if someone discovered one."}], "answers": [{"comments": [{"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 3, "creation_date": 1483538091, "post_id": 41460937, "comment_id": 70136461, "body": "You cannot extract elements from a binary heap in constant time. <i>delete-min</i> is an O(log n) operation. Also, the OP asked for uses of binary heap other than to implement a priority queue. All three of your examples (merge sort, Dijkstra&#39;s algorithm, Prim&#39;s algorithm) are based on priority queues. Binary heap is just a convenient implementation."}, {"owner": {"reputation": 690, "user_id": 3086011, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/545a4399f424defa770d451085b5137d?s=128&d=identicon&r=PG", "display_name": "CODError", "link": "https://stackoverflow.com/users/3086011/coderror"}, "reply_to_user": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1483604872, "post_id": 41460937, "comment_id": 70165781, "body": "I corrected my answer. thanks for pointing it out. I am trying to list the few usage of binary heaps. I didn&#39;t talk about the implementation. If you have any situation when you don&#39;t use a binary heap as a priority queue, then you are most welcome to leave a comment. I will be glad to learn."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "reply_to_user": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1483606015, "post_id": 41460937, "comment_id": 70166368, "body": "&quot;extract (max or min) element&quot; -- this is virtually the definition of a priority queue, so you haven&#39;t answered the question, as @JimMischel pointed out.  \t &quot;If you have any situation when you don&#39;t use a binary heap as a priority queue&quot; -- you have it backwards. There are several ways to implement priority queues without using heaps ... the OP mentions sorted and unsorted arrays, and there are numerous others. The question is whether binary heaps are good for anything else. See my answer for ... an actual answer. Edit: I think maybe you didn&#39;t have backwards, just poorly phrased."}, {"owner": {"reputation": 690, "user_id": 3086011, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/545a4399f424defa770d451085b5137d?s=128&d=identicon&r=PG", "display_name": "CODError", "link": "https://stackoverflow.com/users/3086011/coderror"}, "reply_to_user": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1483608924, "post_id": 41460937, "comment_id": 70168076, "body": "@JimBalter I see in your answer that you suggest heapsort as a good application of binary heap. So you think heapsort algorithm doesn&#39;t use the property of extracting min/max element from the tree? Is it not just using a binary heap as a priority queue internally? I don&#39;t really understand your point here."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1483642006, "post_id": 41460937, "comment_id": 70190700, "body": "@CODError &quot;So you think heapsort algorithm doesn&#39;t use the property of extracting min/max element from the tree?&quot; -- No, I don&#39;t think that. &quot;I don&#39;t really understand your point here&quot; -- I explained it in a comment under the OP&#39;s question. Extraction of min/max isn&#39;t the <i>reason</i> HeapSort is used ... the reason is solely its performance characteristics. Some totally different algorithm with the same performance characteristics could be used instead if someone discovered one."}], "tags": [], "owner": {"reputation": 690, "user_id": 3086011, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/545a4399f424defa770d451085b5137d?s=128&d=identicon&r=PG", "display_name": "CODError", "link": "https://stackoverflow.com/users/3086011/coderror"}, "is_accepted": false, "score": 0, "last_activity_date": 1483539193, "last_edit_date": 1495539960, "creation_date": 1483523907, "answer_id": 41460937, "question_id": 41457337, "link": "https://stackoverflow.com/questions/41457337/all-purpose-of-binary-heap/41460937#41460937", "title": "All purpose of binary heap", "body": "<p>A binary heap can be used to extract (max or min) element in O(logn) time. This property can be exploited to be used in many algorithms to get better run-time.</p>\n\n<p>For example, once I used it in k-merge sort algorithm to increase time efficiency of sorting step of the k-merge sort. In brief, it made binary heaps of the k-subarrays, and the sorting can be achieved in linear time which is better than usual sorting step of a merge sort.</p>\n\n<p>It is also used in  Dijkstra's algorithm, Prim's algorithm to decrease their run time. </p>\n\n<p>You can also take a look <a href=\"https://stackoverflow.com/questions/3767863/real-world-applications-of-binary-heaps-and-fibonacci-heaps\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "is_accepted": false, "score": 0, "last_activity_date": 1483605753, "creation_date": 1483605753, "answer_id": 41480526, "question_id": 41457337, "link": "https://stackoverflow.com/questions/41457337/all-purpose-of-binary-heap/41480526#41480526", "title": "All purpose of binary heap", "body": "<p>Binary heaps have one other useful (and major) application: HeapSort. HeapSort has higher overhead than QuickSort but its worst case is O(n log n) vs. QuickSort's O(n*n). QuickSort can be improved upon to obtain a worst case of O(n log n) by switching to HeapSort once the interval is sufficiently short -- this is called IntroSort, and is what is used in the STL and the C++ standard library. See <a href=\"https://en.wikipedia.org/wiki/Introsort\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Introsort</a></p>\n"}], "owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1483605753, "creation_date": 1483510598, "last_edit_date": 1592644375, "question_id": 41457337, "link": "https://stackoverflow.com/questions/41457337/all-purpose-of-binary-heap", "title": "All purpose of binary heap", "body": "<blockquote>\n<h1>Definition:</h1>\n<p>A <strong>priority queue</strong> is an abstract data type which is like a regular queue or stack data structure, but where additionally each element has a &quot;priority&quot; associated with it. In a priority queue, an element with high priority is served before an element with low priority. If two elements have the same priority, they are served according to their order in the queue.</p>\n<h1>Implementation:</h1>\n<p>To implement <strong>Priority queue</strong>, <em>unsorted array</em>, <em>sorted array</em> and <em>binary heap</em> data structure are the 3 implementation strategies .</p>\n<p>To be specific, <em>binary heap</em> implementation strategy can be represented using <em>array</em> of keys,</p>\n<p><a href=\"https://i.stack.imgur.com/dT33q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dT33q.png\" alt=\"enter image description here\" /></a></p>\n<p>or</p>\n<p>each <em>key</em> as <em>binary node</em> having two children.</p>\n<p><a href=\"https://i.stack.imgur.com/BVtQd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BVtQd.png\" alt=\"enter image description here\" /></a></p>\n</blockquote>\n<hr />\n<p>Question:</p>\n<p>Apart from priority queue implementation, Are their any other applications of using <em>binary heap</em> data structure?</p>\n"}, {"tags": ["c", "if-statement"], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1483510919, "post_id": 41457355, "comment_id": 70120754, "body": "Since they are <i>single</i> characters -- why not suggest using <b>single quotes</b> so that the comparison will be valid as written? (e.g. make it a character comparison instead of a string comparison)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1483511174, "post_id": 41457355, "comment_id": 70120870, "body": "That&#39;s a fair edit. Don&#39;t forget <code>char userGuess = &#39;1&#39;;</code> to insure he understands <code>userGuess</code> needs to be a character as well (otherwise, just deference <code>userGuess</code> for the comparison, e.g. <code>*userGuess == &#39;h&#39;</code>, etc.. for comparison of the first character. <code>:)</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1483511186, "post_id": 41457355, "comment_id": 70120879, "body": "It&#39;s not so much invalid to compare string literals using <code>==</code> as essentially invariably meaningless to do so.  It certainly is never going to produce an answer of &#39;true&#39; when one operand is a string literal and the other is a variable.  Maybe this is quibbling, but ..."}], "tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": true, "score": 8, "last_activity_date": 1483512347, "last_edit_date": 1483512347, "creation_date": 1483510667, "answer_id": 41457355, "question_id": 41457327, "link": "https://stackoverflow.com/questions/41457327/whats-wrong-with-the-conditions-in-this-if-else/41457355#41457355", "title": "What&#39;s wrong with the conditions in this IF-ELSE?", "body": "<p><code>userGuess == \"h\"</code> (and <code>userGuess == \"e\"</code>)</p>\n\n<p>You compare string literals using operator <code>==</code> which is not a valid string comparison in C - you should use standard library function for string comparison <code>strcmp</code> instead<sup>1</sup>.</p>\n\n<p>Otherwise, make <code>userGuess</code> as single <code>char</code> variable instead of array of char, and use single character (single quote) for comparison, such as </p>\n\n<pre><code>userGuess == 'h'\n</code></pre>\n\n<hr>\n\n<p><sup>1</sup>\nAs it stands, the comparison <code>userGuess == \"h\"</code> compiles but should give you an warning if you turn on gcc <code>-Wall</code> compiler flag, for example:</p>\n\n<pre><code>warning: comparison with string literal results in unspecified behavior [-Waddress]\n</code></pre>\n\n<p>It means (as mentioned by Jonathan Leffler's comment below), you are not comparing the strings itself but instead comparing the two pointers (<code>userGuess</code> and <code>\"l\"</code> are pointing to the same location) - which is valid but generally meaningless.</p>\n"}, {"comments": [{"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1483513553, "post_id": 41457605, "comment_id": 70121943, "body": "Why not simply <code>userGuess == &#39;h&#39;</code>?"}, {"owner": {"reputation": 705, "user_id": 6453452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/42lHF.jpg?s=128&g=1", "display_name": "Rushat", "link": "https://stackoverflow.com/users/6453452/rushat"}, "edited": false, "score": 0, "creation_date": 1483516529, "post_id": 41457605, "comment_id": 70123237, "body": "I don&#39;t see why the &#39;*&#39; is required. It works perfectly without it :)"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1483539215, "post_id": 41457605, "comment_id": 70137232, "body": "@MythicCocoa-- I believe the point here is that, since you had <code>char userGuess[5]</code>, you could have used <code>*userGuess == &#39;h&#39;</code>, or equivalently <code>userGuess[0] == &#39;h&#39;</code>.  You can&#39;t use <code>userGuess == &#39;h&#39;</code> unless you change the declaration to <code>char userGuess</code>, i.e., not an array."}, {"owner": {"reputation": 98, "user_id": 1516801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f511415bfb556c8a2897b41efd879f0e?s=128&d=identicon&r=PG", "display_name": "ramdav", "link": "https://stackoverflow.com/users/1516801/ramdav"}, "reply_to_user": {"reputation": 705, "user_id": 6453452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/42lHF.jpg?s=128&g=1", "display_name": "Rushat", "link": "https://stackoverflow.com/users/6453452/rushat"}, "edited": false, "score": 0, "creation_date": 1483617432, "post_id": 41457605, "comment_id": 70173756, "body": "@MythicCocoa userGuess is the name of the Variable the Variable is of type char []. The name of a Variable of an Array Type without the braces is equvalent to a pointer to the first element say the array is placed on your stack at address 0x200, issuing <code>userGuess == &#39;h&#39; </code> compares 0x200 to 0x68"}], "tags": [], "owner": {"reputation": 98, "user_id": 1516801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f511415bfb556c8a2897b41efd879f0e?s=128&d=identicon&r=PG", "display_name": "ramdav", "link": "https://stackoverflow.com/users/1516801/ramdav"}, "is_accepted": false, "score": 0, "last_activity_date": 1483511599, "creation_date": 1483511599, "answer_id": 41457605, "question_id": 41457327, "link": "https://stackoverflow.com/questions/41457327/whats-wrong-with-the-conditions-in-this-if-else/41457605#41457605", "title": "What&#39;s wrong with the conditions in this IF-ELSE?", "body": "<p>You are comparing the address of your array userGuess to the address of the Strings \"h\" and \"e\".</p>\n\n<p>The soltution to this would be using </p>\n\n<pre><code>*userGuess == 'h'\n</code></pre>\n\n<p>Name of an Array is the address of this array, same as a pointer. 'h' is a literal character rathen then a string.</p>\n"}, {"comments": [{"owner": {"reputation": 705, "user_id": 6453452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/42lHF.jpg?s=128&g=1", "display_name": "Rushat", "link": "https://stackoverflow.com/users/6453452/rushat"}, "edited": false, "score": 0, "creation_date": 1483516481, "post_id": 41457759, "comment_id": 70123219, "body": "Thanks for your answer +1"}], "tags": [], "owner": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "is_accepted": false, "score": 2, "last_activity_date": 1483512315, "creation_date": 1483512315, "answer_id": 41457759, "question_id": 41457327, "link": "https://stackoverflow.com/questions/41457327/whats-wrong-with-the-conditions-in-this-if-else/41457759#41457759", "title": "What&#39;s wrong with the conditions in this IF-ELSE?", "body": "<p>Please understand the concept of char datatype. If you want to compare only one character then please do not declare the variable as a string and compare it like a character. Please find the code below. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main()\n{\nint rollTotal = 11;\nint rollTotal2 = 10;\nchar userGuess = 'l';\n if ((userGuess == 'h' &amp;&amp; rollTotal2 &gt; rollTotal) || (userGuess == 'e' &amp;&amp; rollTotal2 == rollTotal) || (userGuess == 'l' &amp;&amp; rollTotal2 &lt; rollTotal))\n    {\n    printf(\"You win :D \\n\");\n}\nelse\n{\n    printf(\"You lose D: \\n\");\n}\ngetchar();\nreturn 0;\n}\n</code></pre>\n\n<p>if You want to compare string instead please use strcmp() function to compare the strings and add the header file #include in your code.</p>\n"}], "owner": {"reputation": 705, "user_id": 6453452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/42lHF.jpg?s=128&g=1", "display_name": "Rushat", "link": "https://stackoverflow.com/users/6453452/rushat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 1, "accepted_answer_id": 41457355, "answer_count": 3, "score": 0, "last_activity_date": 1483516215, "creation_date": 1483510553, "last_edit_date": 1495540427, "question_id": 41457327, "link": "https://stackoverflow.com/questions/41457327/whats-wrong-with-the-conditions-in-this-if-else", "title": "What&#39;s wrong with the conditions in this IF-ELSE?", "body": "<p>I have written a program for a weird dice game which presumedly has buggy conditions in the IF-ELSE portion. I am pasting a working code snippet which replicates the problem.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int rollTotal = 11;\n    int rollTotal2 = 10;\n    char userGuess[5] = \"l\";\n\n    if ((userGuess == \"h\" &amp;&amp; rollTotal2 &gt; rollTotal) || (userGuess == \"e\" &amp;&amp; rollTotal2 == rollTotal) || (userGuess == \"l\" &amp;&amp; rollTotal2 &lt; rollTotal))\n    {\n        printf(\"You win :D \\n\");\n    }\n    else\n    {\n        printf(\"You lose D: \\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Expected output: \"You win :D\" | Actual output: \"You lose D:\"</p>\n\n<p>I thought it was a problem with the conditions. So, I changed the conditions to <code>(userGuess == 'h' &amp;&amp; rollTotal2 &gt; rollTotal)</code> and so on (I changed the double inverted commas to a single inverted commas). That gave me the same output along with <code>warning: comparison between pointer and integer</code>. This lead me to a confusing <a href=\"https://stackoverflow.com/questions/5654685/warning-comparison-between-pointer-and-integer-in-c\">SO Q&amp;A</a> which I couldn't make anything of because of me not knowing those functions.</p>\n\n<p>That lead me to the current state of my program which is the one pasted above (I reverted back to double inverted commas). I continue to believe the IF-ELSE's conditions are buggy. It is still giving me the same buggy output along with <code>Warning: comparison with string literals results in unspecified behaviour</code>. This lead me to yet another <a href=\"https://stackoverflow.com/questions/2603039/warning-comparison-with-string-literals-results-in-unspecified-behaviour\">fruitless endeavor</a>.</p>\n\n<p>This error is probably due to my lack of knowledge of pointers and such and is most likely extremely dumb. Please help me out here.</p>\n\n<p>Some information which may help-</p>\n\n<p>IDE: Code::Blocks</p>\n\n<p>Compiler: GCC </p>\n\n<p>OS: Linux</p>\n"}, {"tags": ["c", "file", "file-handling"], "comments": [{"owner": {"reputation": 39539, "user_id": 153430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a446e1fd338fb334fa68b3f7470cd65b?s=128&d=identicon&r=PG", "display_name": "Jim Lewis", "link": "https://stackoverflow.com/users/153430/jim-lewis"}, "edited": false, "score": 2, "creation_date": 1483510918, "post_id": 41457280, "comment_id": 70120753, "body": "When you read a character like &#39;1&#39;, you&#39;re getting the ASCII value corresponding to that glyph in the character set...not the integer 1.  You have to convert from ASCII to the integer equivalent before using it for arithmetic operations."}], "answers": [{"tags": [], "owner": {"reputation": 761, "user_id": 5404171, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J2gnEjvzn-Y/AAAAAAAAAAI/AAAAAAAAABI/wRcV3NGmOL0/photo.jpg?sz=128", "display_name": "Siddharth Srinivasan", "link": "https://stackoverflow.com/users/5404171/siddharth-srinivasan"}, "is_accepted": true, "score": 1, "last_activity_date": 1483512730, "last_edit_date": 1483512730, "creation_date": 1483512279, "answer_id": 41457751, "question_id": 41457280, "link": "https://stackoverflow.com/questions/41457280/not-reading-correct-value-in-file-handling-in-c/41457751#41457751", "title": "Not reading correct value in file handling in C", "body": "<p>The arguments passed to <code>fprintf</code> function in your case is wrong. Change the part to the following:</p>\n\n<pre><code>fprintf(fp,\"\\nINPUT number is = %d\\n\", number); \nfprintf(fp,\"\\nIt's in the binary number is = %d\\n\", binary); \nfprintf(fp,\"\\nNo.of 1's in the binary number is = %d\\n\",number_of_ones); \n</code></pre>\n\n<p>So add <code>fp</code> as the first argument to fprintf.</p>\n\n<p>And to obtain the integer value of the character <code>number_read</code>, make use of the <code>atoi</code> function provided in C. (Check <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_atoi.htm\" rel=\"nofollow noreferrer\">this</a> for reference.)</p>\n"}, {"comments": [{"owner": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "edited": false, "score": 0, "creation_date": 1483514954, "post_id": 41458227, "comment_id": 70122521, "body": "while you&#39;re getting the ASCII value in the character set. Please convert the same to integer equivalent before using it for arithmetic operations."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "edited": false, "score": 1, "creation_date": 1483518022, "post_id": 41458227, "comment_id": 70123899, "body": "@VimalBhaskar: Doesn&#39;t s/he do it here: <code>number = number_read-48;</code>?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1483518123, "post_id": 41458227, "comment_id": 70123943, "body": "For most portability this <code>number = number_read-48;</code>  should be <code>number = number_read - &#39;0&#39;;</code>"}, {"owner": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483518273, "post_id": 41458227, "comment_id": 70124009, "body": "i didnt see that at the begining of the code. Yes that should doit. Other better way is he can use atoi conversion. Beacuse it is evident from the OP&#39;s query that the file is going to contain only a number. So you can convert the number then and there. Correct me if i am wrong. As even i have come here to get experience. @alk"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "edited": false, "score": 1, "creation_date": 1483518457, "post_id": 41458227, "comment_id": 70124098, "body": "@VimalBhaskar: <code>atoi()</code> is for a &quot;string&quot;, we just have a <code>char</code> here. Also for converting &quot;strings&quot; using the members of the <code>strto*()</code> family of function is the preferred way to go, as they provide complete error detection, which the <code>ato*()</code> functions are missing."}, {"owner": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "edited": false, "score": 0, "creation_date": 1483519322, "post_id": 41458227, "comment_id": 70124572, "body": "Thanks for making me understand a new concept today. Will try to incorporate it into my coding and in case if i find any new issues will get back to you. Thank you."}], "tags": [], "owner": {"reputation": 9, "user_id": 7364519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f91c9cf286313a866ed8a3c50536732?s=128&d=identicon&r=PG&f=1", "display_name": "Han", "link": "https://stackoverflow.com/users/7364519/han"}, "is_accepted": false, "score": 0, "last_activity_date": 1483514294, "creation_date": 1483514294, "answer_id": 41458227, "question_id": 41457280, "link": "https://stackoverflow.com/questions/41457280/not-reading-correct-value-in-file-handling-in-c/41458227#41458227", "title": "Not reading correct value in file handling in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar number_read = 0;\nint number = 0;\nint number_of_ones = 0;\nint remainder_value = 0;\nint binary = 0;\nint base = 1;\n\nint main(){\nFILE *fp = fopen(\"File.txt\", \"r\");\n\n    while (1){\n        number_read = fgetc(fp);\n\n        if (feof(fp)){\n            break;\n        }\n        base = 1;\n        number_of_ones = remainder_value = binary = 0;\n\n        printf(\"\\nnumber is=%c\\n\", number_read);\n        number = number_read-48;\n\n        while (number&gt;0){\n            remainder_value = number % 2;\n            /*  To count no.of 1s */\n            if (remainder_value == 1){\n                number_of_ones++;\n            }\n\n            binary = binary + remainder_value * base;\n            number = number/ 2;\n            base = base * 10;\n            if (number == 1){\n                binary = binary + 1 * base;\n                number = 0;\n            }\n        }\n        printf(\"\\nINPUT number is = %d\\n\", number_read-48);\n        printf(\"\\nIt's in the binary number is = %d\\n\", binary);\n        printf(\"\\nNo.of 1's in the binary number is = %d\\n\", number_of_ones);\n\n    }\nreturn 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1483871315, "post_id": 41458365, "comment_id": 70268594, "body": "You could do with checking the return values from <code>fopen</code> (and <code>fprintf</code> as well)"}], "tags": [], "owner": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "is_accepted": false, "score": 0, "last_activity_date": 1483514823, "creation_date": 1483514823, "answer_id": 41458365, "question_id": 41457280, "link": "https://stackoverflow.com/questions/41457280/not-reading-correct-value-in-file-handling-in-c/41458365#41458365", "title": "Not reading correct value in file handling in C", "body": "<p>@Garryp,</p>\n\n<p>I havent touched the logic of the program, I dont understand the reason why you have kept the base as 0 or all the number variable to char which can be easily acheivable using int variable itself. The only problem you actually had was file operation and please find your updated code. \nAlso why is \"number\" variable used unnecessarily? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n\nint number_read = 0;\nchar number = 0;\nint number_of_ones = 0;\nint remainder_value = 0;\nint binary = 0;\nint base = 1;\n\nint main()\n\n{\nFILE *fp,*fp1;\nchar buff[5];\n\nfp = fopen(\"C:\\\\Users\\\\50022314\\\\Desktop\\\\mytest.txt\", \"r+\");\nfp1 = fopen(\"C:\\\\Users\\\\50022314\\\\Desktop\\\\mytest1.txt\", \"a+\");\nwhile (fgets(buff, sizeof(buff), fp) != NULL)\n{\n    number_read = atoi(buff);\n    printf(\"\\nnumber is=%d\", number_read);\n    while (number_read &gt; 0)\n    {\n        remainder_value = number_read % 2;\n        /*  To count no.of 1s */\n        if (remainder_value == 1)\n        {\n            number_of_ones++;\n        }\n\n        binary = binary + remainder_value * base;\n        number_read = number_read / 2;\n        base = base * 10;\n\n    }\n\n\n    fprintf(fp1, \"\\nINPUT number is = %d\\n\", number);\n    fprintf(fp1, \"\\nIt's in the binary number is = %d\\n\", binary);\n    fprintf(fp1, \"\\nNo.of 1's in the binary number is = %d\\n\", number_of_ones);\n}\nfclose(fp);\nfclose(fp1);\nreturn 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 7372627, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-86AVaIcN148/AAAAAAAAAAI/AAAAAAAABsk/ocJYiK3PD1c/photo.jpg?sz=128", "display_name": "Garryp", "link": "https://stackoverflow.com/users/7372627/garryp"}, "edited": false, "score": 0, "creation_date": 1486958755, "post_id": 41479636, "comment_id": 71555010, "body": "Can you all give me Up vote please?? I can not post a question anymore..."}], "tags": [], "owner": {"reputation": 67, "user_id": 7372627, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-86AVaIcN148/AAAAAAAAAAI/AAAAAAAABsk/ocJYiK3PD1c/photo.jpg?sz=128", "display_name": "Garryp", "link": "https://stackoverflow.com/users/7372627/garryp"}, "is_accepted": false, "score": 0, "last_activity_date": 1483602057, "creation_date": 1483602057, "answer_id": 41479636, "question_id": 41457280, "link": "https://stackoverflow.com/questions/41457280/not-reading-correct-value-in-file-handling-in-c/41479636#41479636", "title": "Not reading correct value in file handling in C", "body": "<p>Hello and thank you for answering to my post \nI have checked what I have done wrongly and Here is  my code which working well\nI posted to for future reference for stack follower</p>\n\n<p>still some additional functionality has to be added\nI am trying to convert Decimal to binary for numbers from the file\nand I have to avoid spaces, blank lines and end of line spaces and then print the number..I am still working on it..anyone gives hint or code will be highly appreciated..thank you all</p>\n\n<p>here is my code  :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;string.h&gt;\n#define BUFFER 5\n\n\n\nchar number_read = 0;\nchar number_of_ones = 0;\nchar remainder_value = 0;\nchar binary = 0;\nchar base = 0;\nchar buff[BUFFER];\n\n\n\nint main()\n\n{\n    FILE *fp;                 //file pointer fp\n    fp = fopen(\"File.txt\",\"r+\");\n\n  while (fgets(buff, sizeof(buff), fp) != NULL)\n  {\n      number_read = atoi(buff);                   //ASCII to integer\n      printf(\"\\nnumber is=%d\", number_read);\n      while (number_read &gt; 0)\n       {\n         remainder_value = number_read % 2;\n         /*  To count no.of 1s */\n         if (remainder_value == 1)\n           {\n            number_of_ones++;\n           }\n\n          binary = binary + remainder_value * base;\n          number_read = number_read / 2;\n          base = base * 10;\n       }\n         printf(\"\\nNo.of 1's in It's binary representation is = %d\\n\",number_of_ones); \n         number_of_ones = 0;\n  }\n\n   fclose(fp);\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 7372627, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-86AVaIcN148/AAAAAAAAAAI/AAAAAAAABsk/ocJYiK3PD1c/photo.jpg?sz=128", "display_name": "Garryp", "link": "https://stackoverflow.com/users/7372627/garryp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 41457751, "answer_count": 4, "score": 0, "last_activity_date": 1483871104, "creation_date": 1483510361, "question_id": 41457280, "link": "https://stackoverflow.com/questions/41457280/not-reading-correct-value-in-file-handling-in-c", "title": "Not reading correct value in file handling in C", "body": "<p>My first post :)\nI have written a small program in which I read the value from text file and make it print as it is and next print its equivalent binary value\nBut what I face a problem is the value I print is different from the the one in the file\nfor eg. I have 23 in my text file and when I try to read it and print the value I am getting 1\nanyone has an idea what I am missing or where I am wrong.\nI am posting my code here\nThank you in advance</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n\n\n\n\n\nchar number_read = 0;\nchar number = 0;\nchar number_of_ones = 0;\nchar remainder_value = 0;\nchar binary = 0;\nchar base = 0;\n\n\n\n    int main()\n\n{\n    FILE *fp;\n\n\n    fp = fopen (\"File.txt\",\"r\");\n\n     while(1)\n   {\n      number_read = fgetc(fp);\n\n      if( feof(fp) )\n      { \n         break ;\n      }\n\n      printf(\"\\nnumber is=%c\", number_read);\n\n      while (number_read&gt;0)\n      {\n        remainder_value = number_read % 2;\n        /*  To count no.of 1s */\n        if (remainder_value == 1)\n        {\n            number_of_ones++;\n        }\n\n        binary = binary + remainder_value * base;\n        number_read = number_read/2;\n        base = base * 10;\n\n      }\n\n\n    }       \n    fprintf(\"\\nINPUT number is = %d\\n\", number); \n    fprintf(\"\\nIt's in the binary number is = %d\\n\", binary); \n    fprintf(\"\\nNo.of 1's in the binary number is = %d\\n\", number_of_ones); \n\n   fclose(fp);\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "glut", "glew"], "answers": [{"tags": [], "owner": {"reputation": 1676, "user_id": 3264809, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d36a2da1d4a8b8336b4684eac4c9fee8?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Gemini", "link": "https://stackoverflow.com/users/3264809/sumit-gemini"}, "is_accepted": true, "score": 2, "last_activity_date": 1483517626, "creation_date": 1483517626, "answer_id": 41459087, "question_id": 41457240, "link": "https://stackoverflow.com/questions/41457240/glut-segmentation-fault-on-glcreateshader/41459087#41459087", "title": "GLUT segmentation fault on glCreateShader", "body": "<p>You're not checking OpenGL extensions, version, or etc.</p>\n\n<pre><code>GLenum err = glewInit();\nif (err != GLEW_OK)\n  exit(1); // or handle the error in a nicer way\nif (!GLEW_VERSION_2_1)  // check that the machine supports the 2.1 API.\n  exit(1); // or handle the error in a nicer way\n</code></pre>\n\n<p>This code needs to happen after creating the OpenGL context, but before using any potentially-not-existing functions. More details on the <a href=\"http://glew.sourceforge.net/basic.html\" rel=\"nofollow noreferrer\">GLEW web page</a></p>\n"}], "owner": {"reputation": 45, "user_id": 5887246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb31caca91e03f0845eeda7b86c51d1e?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Zitsew", "link": "https://stackoverflow.com/users/5887246/andrew-zitsew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "accepted_answer_id": 41459087, "answer_count": 1, "score": 1, "last_activity_date": 1483517626, "creation_date": 1483510172, "question_id": 41457240, "link": "https://stackoverflow.com/questions/41457240/glut-segmentation-fault-on-glcreateshader", "title": "GLUT segmentation fault on glCreateShader", "body": "<p>I am writing C++ program with use of glew,glut and GLM.\nWhen I am creating shader like this:</p>\n\n<pre><code>GLuint VertexShaderID = glCreateShader(GL_VERTEX_SHADER);\n</code></pre>\n\n<p>it says \"Segmentation fault(core dumped)\".<br>\nMy hardware is Intel Atom CPU.<br>\nOS:OpenSuse 13.2 32-bit.<br>\nWhat I need to do to make it work?</p>\n"}, {"tags": ["c", "pointers", "structure"], "comments": [{"owner": {"reputation": 337, "user_id": 5803703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580f989162e32a2e0bcb438c86750782?s=128&d=identicon&r=PG&f=1", "display_name": "Massey101", "link": "https://stackoverflow.com/users/5803703/massey101"}, "edited": false, "score": 0, "creation_date": 1483510125, "post_id": 41457197, "comment_id": 70120459, "body": "Please reduce your included code to a minimal example. So we can offer advice."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483517613, "post_id": 41457197, "comment_id": 70123720, "body": "What is unclear to you with the error messages the compiler issues?"}], "answers": [{"comments": [{"owner": {"reputation": 3350, "user_id": 7332147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4GFL.png?s=128&g=1", "display_name": "linuxfan says Reinstate Monica", "link": "https://stackoverflow.com/users/7332147/linuxfan-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483518523, "post_id": 41458007, "comment_id": 70124134, "body": "You should change the declaration, as in SLL_insert_beg() you want to change the value of head_lst. After that, you will also need to change the function&#39;s code to manage a &quot;pointer to pointer&quot; (well, struct node **, a pointer to a pointer pointing to a struct node)."}, {"owner": {"reputation": 1, "user_id": 7372560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81525bb4d6420bbea118546301704076?s=128&d=identicon&r=PG&f=1", "display_name": "megaprog", "link": "https://stackoverflow.com/users/7372560/megaprog"}, "edited": false, "score": 0, "creation_date": 1483602750, "post_id": 41458007, "comment_id": 70164808, "body": "please could you give brief explanation in code. I am unable to understand. where should I change the  code. thanks for paintence rplyyy"}], "tags": [], "owner": {"reputation": 1029, "user_id": 2176845, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3dc89025bf40202b994b24b28e6d71cd?s=128&d=identicon&r=PG", "display_name": "levengli", "link": "https://stackoverflow.com/users/2176845/levengli"}, "is_accepted": false, "score": 1, "last_activity_date": 1483513332, "creation_date": 1483513332, "answer_id": 41458007, "question_id": 41457197, "link": "https://stackoverflow.com/questions/41457197/structure-and-pointers-concept/41458007#41458007", "title": "structure and pointers concept", "body": "<p>The issue is that the declaration is <code>SLL_insert_beg(struct node *head_lst);</code> and the invocation is <code>SLL_insert_beg(&amp;head_lst);</code> - all this while <code>head_lst</code> is declared as a pointer to <code>struct node</code> (<code>struct node *head_lst=NULL</code>). This causes <code>&amp;head_lst</code> to be a pointer to a pointer to <code>struct node</code>.</p>\n\n<p>In other words, as the compiler warned: <code>expected 'struct node *' but argument is of type 'struct node **'</code></p>\n\n<p>Either change the function's declaration, or change the invocation.</p>\n"}], "owner": {"reputation": 1, "user_id": 7372560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81525bb4d6420bbea118546301704076?s=128&d=identicon&r=PG&f=1", "display_name": "megaprog", "link": "https://stackoverflow.com/users/7372560/megaprog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483538142, "creation_date": 1483509979, "last_edit_date": 1483538142, "question_id": 41457197, "link": "https://stackoverflow.com/questions/41457197/structure-and-pointers-concept", "title": "structure and pointers concept", "body": "<p>I tried linked list programming by structur and pointers.passing parameters in functions and accessing structure members and I got below error please help.     </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\n    enter code here\n\n struct node {\n\n    int32_t data;\n    struct node *next;\n};\n\n\nvoid \n     SLL_insert_beg(      struct node *head_lst\n\n                            ){\n    int32_t num_lst; \n    struct node *temp_lst,*new_lst;      //intialising  local variable. \n    new_lst = ( struct node* )malloc( sizeof(struct node) );   //Allocating dynamic memory for node new.\n    printf(\" Enter data: \");\n    scanf(\"%d\", &amp;num_lst );\n    new_lst-&gt;data = num_lst;                   //inserting data into the datafield in node new.\n\n    if(head_lst == NULL)  {                    //Condition to check list is empty in SLL_insert_beg() function.\n\n        new_lst-&gt;next = NULL;                  //Making pointer field to point null in node new. \n        head_lst = new_lst;                    //Making new node as head node.\n\n     } else {\n\n        new_lst-&gt;next = head_lst;              //pointer field in new node points to the head node.\n        head_lst = new_lst;                    //Making new node as head node. \n    }\n}\n\nvoid SLL_display(     struct node *head_lst    \n\n\n                                                  ) {\n\n        struct node *temp_lst,*new_lst;\n        int32_t i_lst = 1 ;                      //intialising  local variable.\n    if( head_lst == NULL ) {                 //Condition to check list is empty in  SLL_display() function.\n\n          printf( \" List is empty!! \" );\n\n    } else {\n\n        temp_lst = head_lst;                 //Making head node as temp node.\n        printf( \"\\nThe linked list is:\\n \" );\n        printf( \" Elements: \" );\n                                             /*Below loop used to print all elements \n                                               in single linked list*/\n        while( temp_lst != NULL ) {  \n\n            printf( \"%d-&gt; \", temp_lst-&gt;data );\n            temp_lst = temp_lst-&gt;next;       //Making  temp next node as  temp node.\n        }\n        printf( \"NULL\\n \" );\n        printf( \" Position: \" );\n\n        temp_lst = head_lst;                 //Making head node as temp node.\n                                             /*Below loop used to print no.of positions \n                                               in single linked list*/\n        while( temp_lst != NULL ) {\n\n            printf( \"%d    \" , i_lst );\n           i_lst = i_lst + 1;                //Incrementing variable 'i_lst' once.\n            temp_lst = temp_lst-&gt;next;       //Making  temp next node as  temp node.\n        }\n\n    }\n\n }                              \nvoid main(void) {                                                  //sll_program(void) {\n\n    int32_t data;\n    int32_t SL_ch; //Intialised a variable  used to choose the option in the below menu.\n   struct node *head_lst=NULL;\n    struct node *temp_lst,*new_lst;\n     while( 1 ) {\n\n                 printf(\" \\n\\nSingly Linked List(SLL)\");\n                 printf(\" \\n1.Insert beg     \\\n                          \\n2.diplay  \\\n                           \\n3.exit     \"   );\n                 printf(\"\\nEnter your choice(1-4):\");\n                 scanf(\"%d\",&amp;SL_ch);\n       switch(SL_ch) {\n\n                     case 1:                  //If choice is 1 calls insert at beginning function.\n                             SLL_insert_beg(    &amp;head_lst\n                                                              );\n                             break;\n                     case 2: \n                          SLL_display(           &amp;head_lst\n\n\n\n                                                             );                   //If choice is 2 calls the display function.\n                                    break;\n                      case 3: \n                                 return;\n                    default: \n                               printf( \"Please give the right choice!!\" );              \n\n       }\n     }\n}\n</code></pre>\n\n<p>AFTER COMPILATION THIS IS THE ERROR for my code</p>\n\n<blockquote>\n  <p>main.c: In function 'main':                                           </p>\n  \n  <p>main.c:91:63: warning: passing argument 1 of 'SLL_insert_beg' from\n  incompatible pointer type [enabled by default]<br>\n  main.c:12:6: note: expected 'struct node *' but argument is of type\n  'struct node **'<br>\n        SLL_insert_beg(      struct node *head_lst                                                                                                          main.c:98:62: warning: passing argument 1 of 'SLL_display' from\n  incompatible pointer type [enabled by default]<br>\n  );                   //If choice is 2 calls the display function.     </p>\n  \n  <p>main.c:34:6: note: expected 'struct node *' but argument is of type\n  'struct node **'<br>\n  void SLL_display(     struct node *head_lst</p>\n</blockquote>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 1, "creation_date": 1483508868, "post_id": 41456926, "comment_id": 70120035, "body": "Scope it with a namespace."}, {"owner": {"reputation": 461, "user_id": 3381858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/42d0fbd7fae3f392da2b7a1661d762b6?s=128&d=identicon&r=PG&f=1", "display_name": "atulya", "link": "https://stackoverflow.com/users/3381858/atulya"}, "edited": false, "score": 0, "creation_date": 1483508973, "post_id": 41456926, "comment_id": 70120064, "body": "MSG structure is getting used in C files also. C doesn&#39;t have namespaces."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1483510013, "post_id": 41456926, "comment_id": 70120418, "body": "Wrapper functions and/or wrapper macros."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 1, "creation_date": 1483512483, "post_id": 41456926, "comment_id": 70121444, "body": "Is a project wide rename not possible or just inconvenient?"}, {"owner": {"reputation": 461, "user_id": 3381858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/42d0fbd7fae3f392da2b7a1661d762b6?s=128&d=identicon&r=PG&f=1", "display_name": "atulya", "link": "https://stackoverflow.com/users/3381858/atulya"}, "edited": false, "score": 0, "creation_date": 1483513089, "post_id": 41456926, "comment_id": 70121731, "body": "Yes, project is wide, module &#39;A&#39; (on which I am working), module &#39;B&#39; and module &#39;C&#39;. B and C can have different versions. and different versions are handled by different persons."}, {"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1483519796, "post_id": 41456926, "comment_id": 70124805, "body": "@atulya: you misunderstood - the &quot;is a project wide&quot; was not a question that asks whever project is wide or small. The question was about &quot;Is a project wide rename (..)&quot;, which means, &quot;Is a rename over-the-whole-project (..)&quot;. Project-wide means over-the-whole-project."}], "answers": [{"comments": [{"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1483519563, "post_id": 41459408, "comment_id": 70124691, "body": "At first moment I thought about adding something like <code>#define MSG _myMSG</code> through project-wide command line compiler options.. <code>-DMSG=myMSG</code> or something very close I suppose. But then, it would also fire in <code>windows.h</code> so that&#39;s pointless unless this option is added only to non-windows-related code, which requires separating the code just like you wrote. So.. thumbs up for code separation first!"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1483519755, "post_id": 41459408, "comment_id": 70124790, "body": "@quetzalcoatl: You <i>can</i> of course surround <code>#include windows.h</code> by <code>#define MSG_before MSG</code> and <code>#define MSG MSG_before #undef MSG_before</code>. But that means you can&#39;t call the related windows functions."}, {"owner": {"reputation": 461, "user_id": 3381858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/42d0fbd7fae3f392da2b7a1661d762b6?s=128&d=identicon&r=PG&f=1", "display_name": "atulya", "link": "https://stackoverflow.com/users/3381858/atulya"}, "edited": false, "score": 0, "creation_date": 1483605449, "post_id": 41459408, "comment_id": 70166092, "body": "Thanks @MSalters, will give a try."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 2, "last_activity_date": 1483519054, "creation_date": 1483519054, "answer_id": 41459408, "question_id": 41456926, "link": "https://stackoverflow.com/questions/41456926/windows-msg-structure-conflicts-with-legacy-project-code-struct-msg/41459408#41459408", "title": "Windows MSG structure conflicts with legacy project code struct MSG", "body": "<p>Not really. The One Definition Rule states that every name should have a unique definition, and your existing definition of <code>::MSG</code> doesn't match the <code>&lt;Windows.h&gt;</code> definition of <code>::MSG</code>. </p>\n\n<p>Windows compilers don't tend to heavily enforce the ODR, so you might get away with it. You'd do generally do this by a hard separation between the two types. That is to say, in a .cpp file which includes <code>windows.h</code>, you cannot include any of your project headers and vice versa. The interface between the two parts must be defined in its own header, which relies on neither windows.h nor your own headers. (As a side benefit, you can then provide an alternative implementation of that .cpp file for Linux, which means your code doesn't get littered with <code>#ifdef WIN32</code>)</p>\n"}], "owner": {"reputation": 461, "user_id": 3381858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/42d0fbd7fae3f392da2b7a1661d762b6?s=128&d=identicon&r=PG&f=1", "display_name": "atulya", "link": "https://stackoverflow.com/users/3381858/atulya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1483519054, "creation_date": 1483508538, "question_id": 41456926, "link": "https://stackoverflow.com/questions/41456926/windows-msg-structure-conflicts-with-legacy-project-code-struct-msg", "title": "Windows MSG structure conflicts with legacy project code struct MSG", "body": "<p>I was working on a legacy code which was running in Linux for more than 20 years.\nIt has 3 modules, which are handled by 3 different persons. I can change in one module only.</p>\n\n<p>Now I got a task to build the same code in windows with minimal functionality.</p>\n\n<p>For interprocess communications, a message structure is used. And it is conflicting with windows MSG structure.</p>\n\n<p>This structure is getting used in other two modules also.</p>\n\n<p>I don't want to rename the structure.\nIs there any other way to resolve this?</p>\n\n<p>code is a mix of C and C++.</p>\n"}, {"tags": ["c", "linux", "linux-kernel"], "comments": [{"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "edited": false, "score": 0, "creation_date": 1483512520, "post_id": 41456310, "comment_id": 70121469, "body": "This might help you: <a href=\"https://lwn.net/Articles/258238/\" rel=\"nofollow noreferrer\">lwn.net/Articles/258238</a>"}], "owner": {"reputation": 41, "user_id": 7172417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a80aefec4cf4100aee113851230980d2?s=128&d=identicon&r=PG&f=1", "display_name": "Schmidt", "link": "https://stackoverflow.com/users/7172417/schmidt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1483505503, "creation_date": 1483504815, "last_edit_date": 1483505503, "question_id": 41456310, "link": "https://stackoverflow.com/questions/41456310/how-to-allocate-a-space-for-a-member-in-a-percpu-structure", "title": "How to allocate a space for a member in a __percpu structure", "body": "<p>I got two structures</p>\n\n<pre><code>struct A{\n   unsigned long long *c;\n};\nstruct B{\n   struct A __percpu *a;\n};\n</code></pre>\n\n<p>and the initial part would be</p>\n\n<pre><code>struct B *b = kmalloc(sizeof(struct B), GFP_KERNEL);\nb-&gt;a = alloc_percpu(struct A);\n</code></pre>\n\n<p>now I want to allocate space for c in each a, how could I do that ?</p>\n"}, {"tags": ["c++", "c", "linux", "gcc", "g++"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 4, "creation_date": 1483502688, "post_id": 41455979, "comment_id": 70118287, "body": "You need to improve your google fu. From the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html#Link-Options\" rel=\"nofollow noreferrer\">gcc manual</a>: &quot;-Wl,option Pass option as an option to the linker&quot;"}, {"owner": {"reputation": 31428, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "edited": false, "score": 3, "creation_date": 1483502770, "post_id": 41455979, "comment_id": 70118307, "body": "Google takes &quot;-&quot; to mean exclusion, Searching &quot;-Wl&quot; will exclude all results containing Wl ;)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 31428, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "edited": false, "score": 0, "creation_date": 1483503096, "post_id": 41455979, "comment_id": 70118377, "body": "@trevor Clearly we need a set of man pages that contain every term except the flag they are covering."}, {"owner": {"reputation": 1422, "user_id": 4759989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff4865147892ee9d56ae63dbaec75418?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4759989/david"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1483503132, "post_id": 41455979, "comment_id": 70118383, "body": "@yakk The GCC man page is about the most unusable man page there is. Waaay to long."}, {"owner": {"reputation": 375, "user_id": 4397868, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/jE0oK.jpg?s=128&g=1", "display_name": "olivia", "link": "https://stackoverflow.com/users/4397868/olivia"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1483513435, "post_id": 41455979, "comment_id": 70121895, "body": "@kaylum Many thanks, but even reading gcc manual, I still cannot figout the purpose of -Wl. Stupid me...Hope to get more detailed explanation."}, {"owner": {"reputation": 1667, "user_id": 4490542, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8925b87f1bc4c6a3bc6956628c9d3b6f?s=128&d=identicon&r=PG&f=1", "display_name": "e.jahandar", "link": "https://stackoverflow.com/users/4490542/e-jahandar"}, "edited": false, "score": 0, "creation_date": 1483513930, "post_id": 41455979, "comment_id": 70122071, "body": "answered here <a href=\"http://stackoverflow.com/a/6562437/4490542\">stackoverflow.com/a/6562437/4490542</a>"}, {"owner": {"reputation": 511, "user_id": 1502776, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9befc9b8e22cc00f2ee851bf3d5b663c?s=128&d=identicon&r=PG", "display_name": "user1502776", "link": "https://stackoverflow.com/users/1502776/user1502776"}, "edited": false, "score": 0, "creation_date": 1570405142, "post_id": 41455979, "comment_id": 102892528, "body": "Can someone provide the commands that actually get passed to gcc and ld from original poster question please ?"}], "owner": {"reputation": 375, "user_id": 4397868, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/jE0oK.jpg?s=128&g=1", "display_name": "olivia", "link": "https://stackoverflow.com/users/4397868/olivia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "closed_date": 1494316542, "answer_count": 0, "score": 0, "last_activity_date": 1483507179, "creation_date": 1483502412, "last_edit_date": 1483507179, "question_id": 41455979, "link": "https://stackoverflow.com/questions/41455979/what-is-the-purpose-of-wl-in-the-gcc-g-command", "closed_reason": "Duplicate", "title": "What is the purpose of -Wl in the gcc/g++ command?", "body": "<p>I Google it, but find no suitable documents that make me clear about <code>-Wl</code>.</p>\n\n<p>Example:</p>\n\n<pre><code>gcc -Wl,--start-group foo.o bar.o -Wl,--end-group\n</code></pre>\n"}, {"tags": ["c", "winapi"], "answers": [{"tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": false, "score": 3, "last_activity_date": 1483524444, "last_edit_date": 1483524444, "creation_date": 1483523526, "answer_id": 41460806, "question_id": 41455965, "link": "https://stackoverflow.com/questions/41455965/scsi-read10-on-a-physical-drive-on-windows/41460806#41460806", "title": "SCSI Read(10) on a Physical Drive on Windows", "body": "<p>you got error code 87 - <code>ERROR_INVALID_PARAMETER</code> because code totally wrong.</p>\n\n<p>for example:</p>\n\n<pre><code>const UCHAR cdb[10] = { 0x28, 0, 0, 0, 0, 0, 0, 0, 512, 0 };\n</code></pre>\n\n<p>but <code>512</code> is <code>&gt; 255</code> (<code>MAXUCHAR</code>) are you not got compiler warning here ?</p>\n\n<pre><code>warning C4305: 'initializing': truncation from 'int' to 'const UCHAR'\n</code></pre>\n\n<p>look at this line !</p>\n\n<pre><code>s.DataBufferOffset = buf;\n</code></pre>\n\n<p>from <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff565345(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>SCSI_PASS_THROUGH</code></a> structure:</p>\n\n<blockquote>\n  <p><strong>DataBufferOffset</strong> </p>\n  \n  <p>Contains an offset from the beginning of this structure to the data\n  buffer. The offset must respect the data alignment requirements of the\n  device.</p>\n</blockquote>\n\n<p>so <strong>offset</strong> to buffer, not <strong>pointer</strong> to buffer</p>\n\n<p>for use this correct you code need be like this:</p>\n\n<pre><code>struct MY_DATA : SCSI_PASS_THROUGH \n{\n    UCHAR buf[512];\n} s;\n\ns.DataBufferOffset = FIELD_OFFSET(MY_DATA, buf);\n</code></pre>\n\n<p>but better use <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff565346(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>SCSI_PASS_THROUGH_DIRECT</code></a> with <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff560521(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>IOCTL_SCSI_PASS_THROUGH_DIRECT</code></a> </p>\n\n<p>you hardcode sector size (512), when need get it at runtime. and how you initialize <code>CDB</code> ?!? at all unclear what you try todo.</p>\n\n<p>working code example (sorry but on <code>c++</code> instead <code>c</code>)</p>\n\n<pre><code>#define _NTSCSI_USER_MODE_\n#include &lt;scsi.h&gt;\n#include &lt;ntddscsi.h&gt;\n\nBOOL scsi_read(HANDLE fh, PVOID buf, DWORD cb, ULONGLONG LogicalBlock, ULONG TransferBlocks)\n{\n    SCSI_PASS_THROUGH_DIRECT s = { \n        sizeof(SCSI_PASS_THROUGH_DIRECT), 0, 0, 0, 0, 0, 0, SCSI_IOCTL_DATA_IN, cb, 30, buf\n    };\n\n    union {\n        PUCHAR Cdb;\n        CDB::_CDB10* Cdb10;\n        CDB::_CDB16* Cdb16;\n    };\n\n    Cdb = s.Cdb;\n\n    if (MAXULONG &lt; LogicalBlock || MAXUSHORT &lt; TransferBlocks)\n    {\n        s.CdbLength = sizeof(CDB::_CDB16);\n        Cdb16-&gt;OperationCode = SCSIOP_READ16;\n        *(ULONGLONG*)Cdb16-&gt;LogicalBlock = _byteswap_uint64(LogicalBlock);\n        *(ULONG*)Cdb16-&gt;TransferLength = _byteswap_ulong(TransferBlocks);\n    }\n    else\n    {\n        s.CdbLength = sizeof(CDB::_CDB10);\n        Cdb10-&gt;OperationCode = SCSIOP_READ;\n        *(ULONG*)&amp;Cdb10-&gt;LogicalBlockByte0 = _byteswap_ulong((ULONG)LogicalBlock);\n        *(USHORT*)&amp;Cdb10-&gt;TransferBlocksMsb = _byteswap_ushort((USHORT)TransferBlocks);\n    }\n\n    DWORD ioctl_bytes;\n\n    return DeviceIoControl(fh, IOCTL_SCSI_PASS_THROUGH_DIRECT, &amp;s, sizeof(s), &amp;s, sizeof(s), &amp;ioctl_bytes, NULL);\n}\n\nBOOL test_scsi_read(PCWSTR fname) \n{\n    BOOL fOk = FALSE;\n\n    HANDLE fh = CreateFileW(fname, GENERIC_READ | GENERIC_WRITE, \n        FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, OPEN_EXISTING, 0, NULL);\n\n    if (fh != INVALID_HANDLE_VALUE) \n    {\n        DWORD ioctl_bytes;\n\n        DISK_GEOMETRY_EX dg;\n\n        if (DeviceIoControl(fh, IOCTL_DISK_GET_DRIVE_GEOMETRY_EX, NULL, 0, &amp;dg, sizeof(dg), &amp;ioctl_bytes, 0))\n        {\n            // 16 sectors for example\n            ULONG cb = 16 * dg.Geometry.BytesPerSector;\n\n            if (PVOID buf = new CHAR[cb])\n            {\n                // read first 16 sectors\n                fOk = scsi_read(fh, buf, cb, 0, 16);\n\n                if (ULONGLONG LogicalBlock = dg.DiskSize.QuadPart / dg.Geometry.BytesPerSector)\n                {\n                    // read last sector\n                    fOk = scsi_read(fh, buf, dg.Geometry.BytesPerSector, LogicalBlock - 1, 1);\n                }\n\n                delete buf;\n            }\n        }\n\n        CloseHandle(fh);\n    }\n\n    return fOk;\n}\n    test_scsi_read(L\"\\\\\\\\?\\\\e:\");\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3463312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e873f5623f1eacc7ec5fcac2d7c09cd5?s=128&d=identicon&r=PG&f=1", "display_name": "user3463312", "link": "https://stackoverflow.com/users/3463312/user3463312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1650, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1483524444, "creation_date": 1483502336, "last_edit_date": 1483512397, "question_id": 41455965, "link": "https://stackoverflow.com/questions/41455965/scsi-read10-on-a-physical-drive-on-windows", "title": "SCSI Read(10) on a Physical Drive on Windows", "body": "<p>I tried issuing a SCSI Read(10) command to a physical drive on a Windows 7 machine. Below is the code snippet that I am using.  It is failing with error code 87.</p>\n\n<pre><code>void scsi_read() \n{\n\n const UCHAR cdb[10] = { 0x28, 0, 0, 0, 0, 0, 0, 0, 512, 0 };\n UCHAR buf[512];\n BYTE senseBuf[196];\n const int SENSE_LENGTH = 196;\n LPCSTR fname = \"\\\\\\\\.\\\\E:\";\n HANDLE fh; \n DWORD ioctl_bytes;\n DWORD err = 0;\n\n SCSI_PASS_THROUGH s = {0};\n memcpy(s.Cdb, cdb, sizeof(cdb));\n s.CdbLength = 10;\n s.DataIn = SCSI_IOCTL_DATA_IN;\n s.TimeOutValue = 30;\n s.Length = sizeof(SCSI_PASS_THROUGH);  \n s.ScsiStatus         = 0x00;\n s.SenseInfoOffset =  senseBuf;\n s.SenseInfoLength  = SENSE_LENGTH;\n s.DataBufferOffset = buf;\n s.DataTransferLength = 512;\n\n fh = CreateFile(\"\\\\\\\\.\\\\E:\", GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ | FILE_SHARE_WRITE, NULL,  OPEN_EXISTING, 0, NULL);\n if(fh == INVALID_HANDLE_VALUE) {\n    printf(\"Could not open %s file, error %d\\n\", fname, GetLastError());\n    return (FALSE);\n }\n\n int ret = DeviceIoControl(fh,IOCTL_SCSI_PASS_THROUGH, &amp;s,sizeof(s), //scsiPassThrough.sizeof,\n                                &amp;s,\n                                sizeof(s),\n                                &amp;ioctl_bytes,\n                                NULL);\n\n printf(\"ret %d\",(int)ret);                                    \n if (ret==1) {\n    printf(\"OK\");\n }\n else {\n\n    err = GetLastError();\n    printf(\"Last error code %u\\n\", err);\n    printf(\"Return size %d\\n\", ioctl_bytes);\n    printf(\"Sense data\\n\");\n    int i=0;\n    for (i = 0; i &lt; 20; i++) {\n        printf(\"\\t%x\", senseBuf[i]);\n    }\n    printf(\"\\n\");\n }\n CloseHandle(fh);\n}\n</code></pre>\n\n<p>Error: Hex dumps are printed in the output</p>\n\n<p><a href=\"https://i.stack.imgur.com/zHoVc.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zHoVc.jpg\" alt=\"Code Output\"></a></p>\n"}, {"tags": ["c", "optimization"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1483503884, "post_id": 41455946, "comment_id": 70118569, "body": "What size are <code>arr1</code> and <code>arr2</code> \u2014 tens, hundreds, thousands, millions of elements?  What&#39;s the type of the elements in the arrays?  Are they simple integers or complete structures, or what?  Does it make sense to use hashes, to compare the hashes, and check for full equality only if the hashes are equal?  Does either array change?  How much does each array change?"}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 1, "creation_date": 1483505417, "post_id": 41455946, "comment_id": 70118930, "body": "It wouldn&#39;t be hard to use a hash mapping elements to pairs of integer counts. When you add E to arr1, increment count1 of the entry E-&gt;&lt;count1,count2&gt;. Similarly for arr2 and count2. Also maintain a single integer total T of the number of entries with both counts greater than zero. You can update these structures in constant time each time an entry in arr1 or arr2 changes or is added/deleted. Then the loop becomes <code>while (T &gt; 0)</code>. OTOH if the code block is big and slow, this may be premature optimization. Comparing a million ints is probably fine if the block takes a second to run."}, {"owner": {"reputation": 585, "user_id": 3897125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbd88edbc10bf1d18cbb9c5a66df389f?s=128&d=identicon&r=PG&f=1", "display_name": "koper89", "link": "https://stackoverflow.com/users/3897125/koper89"}, "edited": false, "score": 0, "creation_date": 1483548782, "post_id": 41455946, "comment_id": 70144043, "body": "Can you sort those arrays, or they cannot be changed? Because if you could sort them it may be much easier."}, {"owner": {"reputation": 101, "user_id": 7200613, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1d368a1232e4b8bce3d2372c1a8a9ccb?s=128&d=identicon&r=PG&f=1", "display_name": "Fosh", "link": "https://stackoverflow.com/users/7200613/fosh"}, "edited": false, "score": 0, "creation_date": 1483566204, "post_id": 41455946, "comment_id": 70153246, "body": "From what I think, you cannot sort them"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11361050, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LplZZSuIqEA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcP-637D6-r-13MsJ5wcG3QMhjoBg/mo/photo.jpg?sz=128", "display_name": "Gabriel Petrov", "link": "https://stackoverflow.com/users/11361050/gabriel-petrov"}, "is_accepted": false, "score": 0, "last_activity_date": 1598533123, "creation_date": 1598533123, "answer_id": 63616518, "question_id": 41455946, "link": "https://stackoverflow.com/questions/41455946/code-optimization-cicle/63616518#63616518", "title": "Code optimization - cicle", "body": "<p>The comments mention a hash and I agree, it could work, but it's very size-dependent. <code>O(n^2)</code>'s overhead will be negligible a lot of the time.</p>\n<p>Otherwise, just add all the elements of <code>arr1</code> into the hashset, then go through <code>arr2</code>'s elements to see if they're in there. You'll get <code>O(n)</code> time. Honestly though, unless you're working with elements in the hundred thousands, even millions, I don't think the pay-out will be that tangible, but it's machine dependent and I haven't tested it myself.</p>\n<p>C++ has std::unordered_set in the standard. If you're using pure C, I'm sure there's implementations available online.</p>\n"}], "owner": {"reputation": 101, "user_id": 7200613, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1d368a1232e4b8bce3d2372c1a8a9ccb?s=128&d=identicon&r=PG&f=1", "display_name": "Fosh", "link": "https://stackoverflow.com/users/7200613/fosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1598533123, "creation_date": 1483502167, "last_edit_date": 1483504699, "question_id": 41455946, "link": "https://stackoverflow.com/questions/41455946/code-optimization-cicle", "title": "Code optimization - cicle", "body": "<p>I want to do a large block of code until at least one of the elements of  array 1 is equal to 1 of the elements of array 2.</p>\n\n<p>I'm asking the community to share, if possible, the best(fastest to process) ways possible to do this \"while\"</p>\n\n<p><em>Sum up:</em></p>\n\n<pre><code>while (none of the elements from arr1 is equal to any of arr2)\n\n{ \n    (code)\n}\n</code></pre>\n\n<p>Reason: In my code, depending on some dimensions set by the user, my program may need to make this n^2 complexity comparison a lot of times, so I'm looking for a way to make it as light as I can.</p>\n\n<p>I'm sorry in advance, and please let me know, if this type of questions are not suitable for StackOverflow.</p>\n\n<p>Edit: My bad in not giving information about the arrays. As I said, it's dimension may vary based on what the user choses, but each one's size should be between 3 and 1000. Both arrays of integers.</p>\n\n<p>Their values do change, the bigger the dimensions, the more it can happen.</p>\n"}, {"tags": ["c++", "c", "makefile"], "answers": [{"tags": [], "owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "is_accepted": false, "score": 1, "last_activity_date": 1483515006, "creation_date": 1483515006, "answer_id": 41458424, "question_id": 41455528, "link": "https://stackoverflow.com/questions/41455528/save-object-files-in-same-makefile-directory-using-depend/41458424#41458424", "title": "Save object files in same makefile directory using depend", "body": "<p>When you set your <code>objects</code> variable you are simply taking the full pathname to the <code>.cpp</code> file and replacing the suffix with <code>.o</code>.  So if you have a file like <code>my/sub/dir/foo.cpp</code> then <code>objects</code> will contain the path <code>my/sub/dir/foo.o</code>.  So, of course when you write a rule <code>$(appname): $(objects)</code>, make is going to try to build the file <code>my/sub/dir/foo.o</code>.  If you want it to build just <code>foo.o</code> instead, then you have to strip off the path as well, not just replace the suffix:</p>\n\n<pre><code>objects := $(patsubst %.cpp,%.o,$(notdir $(srcfiles)))\n</code></pre>\n\n<p>Now, of course, make will say it doesn't know how to build <code>foo.o</code>, because the default rules only know how to build a <code>.o</code> from a <code>.cpp</code>, not from a <code>.cpp</code> file stashed in <code>my/sub/dir</code>.</p>\n\n<p>To make this work the simplest solution is to <a href=\"https://www.gnu.org/software/make/manual/html_node/General-Search.html\" rel=\"nofollow noreferrer\">use VPATH</a> and you can construct the value for VPATH from the list of directories you got from <code>srcfiles</code>, like so:</p>\n\n<pre><code>VPATH := $(sort $(dir $(srcfiles)))\n</code></pre>\n\n<p>You might also consider using a better dependency generation solution, for example <a href=\"http://make.mad-scientist.net/papers/advanced-auto-dependency-generation/\" rel=\"nofollow noreferrer\">the one described here</a>.</p>\n"}], "owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483515006, "creation_date": 1483498554, "last_edit_date": 1495539964, "question_id": 41455528, "link": "https://stackoverflow.com/questions/41455528/save-object-files-in-same-makefile-directory-using-depend", "title": "Save object files in same makefile directory using depend", "body": "<p>I have this <code>makefile</code></p>\n\n<pre><code>appname := fun\n\nsrcfiles := $(shell find .. -name \"*.cpp\")\nheaderfiles := $(shell find .. -name \"*.hpp\")\nobjects  := $(patsubst %.cpp, %.o, $(srcfiles))\n\n\nall: $(srcfiles) $(appname)\n\n$(appname): $(objects)\n    $(CXX) $(LDFLAGS) -o $(appname) $(objects) $(LDLIBS)\n\ndepend: .depend\n\n.depend: $(srcfiles) $(headerfiles)\n    rm -f ./.depend\n    $(CXX) $(CXXFLAGS) -MM $^&gt;&gt;./.depend;\n\nclean:\n    rm -f $(appname) $(objects)\n\ndist-clean: clean\n    rm -f *~ .depend\n\ninclude .depend\n</code></pre>\n\n<p>Where the <code>makefile</code>'s parent directory contain all the code (<code>.hpp</code> and <code>.cpp</code> files). Unfortunately, the <code>.o</code> files are saved in the source code, while I want that they're saved in the same directory of the executable (and <code>makefile</code>). This is the same of <code>Default</code> in Eclipse CDT.</p>\n\n<p>How can I modify <code>makefile</code> in order to do that? </p>\n\n<p>PS: I found similar questions, like <a href=\"https://stackoverflow.com/questions/5178125/how-to-place-object-files-in-separate-subdirectory\">this</a> one, but none of them used <code>depend</code> for defining the <code>$(objects)</code> task (they're all in `%.o% form).</p>\n"}, {"tags": ["c", "lpc"], "comments": [{"owner": {"reputation": 1766, "user_id": 93568, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9KMAS.jpg?s=128&g=1", "display_name": "DfKimera", "link": "https://stackoverflow.com/users/93568/dfkimera"}, "edited": false, "score": 0, "creation_date": 1483500561, "post_id": 41455462, "comment_id": 70117828, "body": "Can you please provide a little more context as to what you&#39;re attempting to do, so we can better understand the problem?"}, {"owner": {"reputation": 11, "user_id": 7372108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b513d2d36407613535e4cefde8923c8?s=128&d=identicon&r=PG&f=1", "display_name": "Ming Wei Tan", "link": "https://stackoverflow.com/users/7372108/ming-wei-tan"}, "reply_to_user": {"reputation": 1766, "user_id": 93568, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9KMAS.jpg?s=128&g=1", "display_name": "DfKimera", "link": "https://stackoverflow.com/users/93568/dfkimera"}, "edited": false, "score": 0, "creation_date": 1484285473, "post_id": 41455462, "comment_id": 70456372, "body": "i want to interface my LPC link2 chips with esp8266 via uart, however the problem is that i do not know how to create a esp8266 library codes that suits my LPCXPRESSO. there are only arduino examples on the web. i need codes that can be used on LPCXPRESSO."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7372108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b513d2d36407613535e4cefde8923c8?s=128&d=identicon&r=PG&f=1", "display_name": "Ming Wei Tan", "link": "https://stackoverflow.com/users/7372108/ming-wei-tan"}, "edited": false, "score": 0, "creation_date": 1484283966, "post_id": 41466880, "comment_id": 70455960, "body": "i had more or less finished learning at commands, but the problem is that i do not know how to write my own LPCXPRESSO library using at commands. pls advice thxs ! there isnt any example codes other than arduino, i need an example for LPCxpresso"}], "tags": [], "owner": {"reputation": 521, "user_id": 7066323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/idq50.jpg?s=128&g=1", "display_name": "Luiz Menezes", "link": "https://stackoverflow.com/users/7066323/luiz-menezes"}, "is_accepted": false, "score": 0, "last_activity_date": 1483541990, "creation_date": 1483541990, "answer_id": 41466880, "question_id": 41455462, "link": "https://stackoverflow.com/questions/41455462/interacting-esp8266-with-lpc-link2-on-lpc-xpresso-instead-of-arduino/41466880#41466880", "title": "Interacting esp8266 with LPC link2 on LPC XpressO instead of Arduino", "body": "<p>You will probably have to write your own esp8266 library. I done that for arduino once because I disliked the native arduino library since it blocked the device while searching for hotspots.</p>\n\n<p>Try to study ESP8622 AT-Commands (they are few), and you will be able to implement what you want in no time, without any library dependencies.</p>\n"}], "owner": {"reputation": 11, "user_id": 7372108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b513d2d36407613535e4cefde8923c8?s=128&d=identicon&r=PG&f=1", "display_name": "Ming Wei Tan", "link": "https://stackoverflow.com/users/7372108/ming-wei-tan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1483541990, "creation_date": 1483498159, "last_edit_date": 1483504503, "question_id": 41455462, "link": "https://stackoverflow.com/questions/41455462/interacting-esp8266-with-lpc-link2-on-lpc-xpresso-instead-of-arduino", "title": "Interacting esp8266 with LPC link2 on LPC XpressO instead of Arduino", "body": "<p>LPC 4370 link2 to interact with huzzah esp8266 breakout board. I am using LPC XpressO, but all the codes available are from Arduino. Tried changing the codes from to suit my programmer.  WiFi.begin(SSID, password);</p>\n\n<p>while (WiFi.status() != WL_CONNECTED) but I do not know how to replace these codes with as there is not a wifi function from my microcontroller. </p>\n"}, {"tags": ["c", "char", "escaping", "ascii"], "comments": [{"owner": {"reputation": 6196, "user_id": 5822075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ba9afcd0c36d9685e3e1b5f2f82be2?s=128&d=identicon&r=PG&f=1", "display_name": "e0k", "link": "https://stackoverflow.com/users/5822075/e0k"}, "edited": false, "score": 1, "creation_date": 1483498181, "post_id": 41455440, "comment_id": 70117280, "body": "You print \\, then you print <code>n</code>.  How is this incorrect or unexpected?"}, {"owner": {"reputation": 57, "user_id": 7313476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9701a44e8a2b38bf890a6c2ef9fc9893?s=128&d=identicon&r=PG&f=1", "display_name": "CJ Koirala", "link": "https://stackoverflow.com/users/7313476/cj-koirala"}, "reply_to_user": {"reputation": 6196, "user_id": 5822075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ba9afcd0c36d9685e3e1b5f2f82be2?s=128&d=identicon&r=PG&f=1", "display_name": "e0k", "link": "https://stackoverflow.com/users/5822075/e0k"}, "edited": false, "score": 0, "creation_date": 1483498297, "post_id": 41455440, "comment_id": 70117295, "body": "\\n does not act as escape sequence"}, {"owner": {"reputation": 3698, "user_id": 1848585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9JLaK.png?s=128&g=1", "display_name": "Brian Tiffin", "link": "https://stackoverflow.com/users/1848585/brian-tiffin"}, "edited": false, "score": 1, "creation_date": 1483498591, "post_id": 41455440, "comment_id": 70117354, "body": "And so you know, @CJKoirala, it is the C preprocessor, cpp, that converts <code>\\n</code> to a newline character.  <code>printf</code> and C compilers in general know nothing about <code>\\n</code> or other sequences."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1483499085, "last_edit_date": 1483499085, "creation_date": 1483498305, "answer_id": 41455491, "question_id": 41455440, "link": "https://stackoverflow.com/questions/41455440/why-cc-92-110-in-printfcc-92-110-doesnt-acts-as-escape-sequence/41455491#41455491", "title": "why &quot;%c%c&quot;,92,110 in printf(&quot;%c%c&quot;,92,110) doesn&#39;t acts as escape sequence?", "body": "<p>The interpretation of escape sequence happens in translation phase whereas, in your code, the sequence only <em>appears</em> at runtime.</p>\n\n<p>Moreover, the newline, <code>\\n</code> is not a <em>combination</em> of two separate <code>char</code> literals <code>\\</code> and <code>n</code>, it is a single value, denoted ny <code>\\n</code>.</p>\n\n<p>See the <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">ASCII table</a>, a newline has ASCII value of 10.</p>\n"}, {"tags": [], "owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "is_accepted": false, "score": 1, "last_activity_date": 1483498518, "creation_date": 1483498518, "answer_id": 41455518, "question_id": 41455440, "link": "https://stackoverflow.com/questions/41455440/why-cc-92-110-in-printfcc-92-110-doesnt-acts-as-escape-sequence/41455518#41455518", "title": "why &quot;%c%c&quot;,92,110 in printf(&quot;%c%c&quot;,92,110) doesn&#39;t acts as escape sequence?", "body": "<p>The '\\n' escape sequence is interpreted by the C compiler and changed into a new line character.  That doesn't mean that an '\\n' sequence is automatically turned into a newline character.  Something has to be expecting to interpret it.  </p>\n\n<p>Compare this: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\n  printf(\"Hello%c%cWorld\",92,110);\n}\n</code></pre>\n\n<p>Which outputs <code>Hello\\nWorld</code> (literally)</p>\n\n<p>With this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\n  printf(\"Hello%cWorld\",10);\n}\n</code></pre>\n\n<p>Which outputs </p>\n\n<p><code>Hello\nWorld</code></p>\n\n<p>With an actual newline character (<code>\\012</code> in octal, <code>10</code> in decimal, or <code>0x0a</code> in hex) </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7369092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3d8f2999418759f681d080b657f43e?s=128&d=identicon&r=PG&f=1", "display_name": "LukeLeo", "link": "https://stackoverflow.com/users/7369092/lukeleo"}, "is_accepted": false, "score": 0, "last_activity_date": 1483498605, "creation_date": 1483498605, "answer_id": 41455538, "question_id": 41455440, "link": "https://stackoverflow.com/questions/41455440/why-cc-92-110-in-printfcc-92-110-doesnt-acts-as-escape-sequence/41455538#41455538", "title": "why &quot;%c%c&quot;,92,110 in printf(&quot;%c%c&quot;,92,110) doesn&#39;t acts as escape sequence?", "body": "<p>ASCII for \\n is 10 not '\\' plus 'n' try the following code,you can get what you want:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\nvoid main(){\n    printf(\"Hello%cWorld\\n\",10);\n    printf(\"\\\\nis%d\",'\\n');\n    getch();\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7313476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9701a44e8a2b38bf890a6c2ef9fc9893?s=128&d=identicon&r=PG&f=1", "display_name": "CJ Koirala", "link": "https://stackoverflow.com/users/7313476/cj-koirala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 41455491, "answer_count": 3, "score": 0, "last_activity_date": 1483499085, "creation_date": 1483497991, "question_id": 41455440, "link": "https://stackoverflow.com/questions/41455440/why-cc-92-110-in-printfcc-92-110-doesnt-acts-as-escape-sequence", "title": "why &quot;%c%c&quot;,92,110 in printf(&quot;%c%c&quot;,92,110) doesn&#39;t acts as escape sequence?", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\nvoid main(){\nprintf(\"Hello%c%cWorld\",92,110);/*92 is ASCII value of \\ and 110 is ASCII value of n*/\ngetch();\n}\n</code></pre>\n\n<p>Output of above program is Hello\\nWorld.</p>\n"}, {"tags": ["c", "pointers", "lexer"], "comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1483498444, "post_id": 41455390, "comment_id": 70117324, "body": "<code>iter</code> is a copy of the pointer <code>srcBuffer</code> in the function <code>lexer_get_single_token()</code>, so any changes are not reflected in the original pointer. You need to return <code>iter</code> from the function, e.g., <code>srcBuffer = lexer_get_single_token()</code>, or change to <code>char **iter</code>, passing  <code>&amp;srcBuffer</code> to the function."}, {"owner": {"reputation": 310, "user_id": 5737217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6285a15aeccc9a50f8040a429e3a497?s=128&d=identicon&r=PG&f=1", "display_name": "Nergal", "link": "https://stackoverflow.com/users/5737217/nergal"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1483498891, "post_id": 41455390, "comment_id": 70117421, "body": "why is it that way though? I thought already being pointer meant it was being passed by reference already?"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1483499255, "post_id": 41455390, "comment_id": 70117507, "body": "See my answer below. Even pointers are passed by value to functions, so it is a copy of the original pointer that you have inside the function. You must pass a pointer to a pointer if you want to modify the original pointer."}], "answers": [{"comments": [{"owner": {"reputation": 310, "user_id": 5737217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6285a15aeccc9a50f8040a429e3a497?s=128&d=identicon&r=PG&f=1", "display_name": "Nergal", "link": "https://stackoverflow.com/users/5737217/nergal"}, "edited": false, "score": 0, "creation_date": 1483499812, "post_id": 41455617, "comment_id": 70117654, "body": "ohhhhh I get it now. it&#39;s not modified since it&#39;s a copy, for if I were to dereference it, it&#39;d pretty much act as a normal array. double a ptr to ptr, dereferencing would access the actual address. I see now. thx David!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483503382, "post_id": 41455617, "comment_id": 70118436, "body": "@DavidBowling You may find <a href=\"http://meta.stackoverflow.com/questions/287723/answers-that-ask-for-upvotes\">this</a> informative."}], "tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": true, "score": 1, "last_activity_date": 1483499169, "creation_date": 1483499169, "answer_id": 41455617, "question_id": 41455390, "link": "https://stackoverflow.com/questions/41455390/char-pointer-will-not-increment-in-function/41455617#41455617", "title": "char* pointer will not increment in function", "body": "<p>C functions pass arguments by value, so inside the function <code>lexer_get_single_token()</code>, <code>iter</code> is a copy of the pointer <code>srcBuffer</code>. This means that changes to the value of <code>iter</code> are not reflected in <code>srcBuffer</code>. If you want to preserve the changes made to <code>iter</code> inside the function, you can either return the pointer to the calling function, or add another layer of indirection.</p>\n\n<p>By changing the function signature to:</p>\n\n<pre><code>char * lexer_get_single_token(char *iter, struct lexer **Q);\n</code></pre>\n\n<p>this function returns a pointer to <code>char</code>, and <code>iter</code> can be returned when the function is finished. The function call would then look like:</p>\n\n<pre><code>srcBuffer = lexer_get_single_token(srcBuffer, &amp;token_queue);\n</code></pre>\n\n<p>After the function call, <code>srcBuffer</code> points to the location indicated by <code>iter</code> when the end of the function was reached. You should save a copy of the original <code>srcBuffer</code> pointer so that you can <code>free</code> it later.</p>\n\n<p>Alternatively, you can change the function signature to:</p>\n\n<pre><code>void lexer_get_single_token(char **iter, struct lexer **Q);\n</code></pre>\n\n<p>Now the function call will look like:</p>\n\n<pre><code>lexer_get_single_token(&amp;srcBuffer, &amp;token_queue);\n</code></pre>\n\n<p>The code in the function will need to be modified to account for the additional indirection, but because you pass in a pointer to <code>srcBuffer</code>, you will be able to make modifications to <code>srcBuffer</code>.</p>\n"}], "owner": {"reputation": 310, "user_id": 5737217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6285a15aeccc9a50f8040a429e3a497?s=128&d=identicon&r=PG&f=1", "display_name": "Nergal", "link": "https://stackoverflow.com/users/5737217/nergal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 41455617, "answer_count": 1, "score": 0, "last_activity_date": 1483499169, "creation_date": 1483497676, "question_id": 41455390, "link": "https://stackoverflow.com/questions/41455390/char-pointer-will-not-increment-in-function", "title": "char* pointer will not increment in function", "body": "<p>I know how pointers and pointer arithmetic works but this is confounding me.</p>\n\n<p>I made a lexer a while back and now I'm modifying it so I can use a parser with it but, for some reason, it will not iterate the <code>char*</code> I pass to the lexer function.</p>\n\n<p>I malloc()'d a char pointer and then passed it to the function where it iterates over it. It does the iteration but it resets back to the original address for some reason. I need the char* to be able to change and STAY at the address it finished at after iterating or else I cannot complete a proper parser...</p>\n\n<p>main.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"lex.h\"\n\nint main(int argc, char **argv)\n{\n    struct lexer *token_queue = NULL;\n\n    FILE *srcfile = fopen( argv[1], \"r+\" );\n    if (!srcfile) {\n        fprintf(stderr, \"file \\\"%s\\\" not found, is null\\n\", argv[1]);\n        lexer_destroy(&amp;token_queue);\n        goto hell;\n    }\n    fseek(srcfile, 0, SEEK_END);    // go all the way to end of file\n    long file_len = ftell(srcfile); // get total size of the file\n    rewind(srcfile);        // reset the file reader to beginning\n\n    char *srcBuffer = malloc(sizeof(char) * (file_len+1));  // pretty sure it's safe to assume char is 1 byte...\n    memset(srcBuffer, '\\0', sizeof(char) * (file_len+1));   // zero the whole buffer\n\n    fread(srcBuffer, sizeof(char), (file_len+1), srcfile);  // get entire file as a string\n    char decision[20];\n\n    do {\n        printf(\"print a token?\\n\");\n        scanf(\"%19s\", decision);\n        lexer_get_single_token(srcBuffer, &amp;token_queue); // tokenize baby!\n\n        //printf(\" *srcBuffer == %c \\n\", *srcBuffer);\n        print_tokens_colored(&amp;token_queue);\n    }\n    while (decision[0] == 'y') ;    // slowly simulate parser asking for another token!\n\n    free(srcBuffer); srcBuffer = NULL;\n    fclose(srcfile); srcfile = NULL;\n\n    lexer_destroy(&amp;token_queue);\nhell:;\n    return 0;\n}\n</code></pre>\n\n<p>lexer function</p>\n\n<pre><code>void lexer_get_single_token(char *iter, struct lexer **Q)\n{\n    char wording[512] = \"\";     // buffer to hold identifiers, keywords, and strings\n    unsigned int i = 0;\n\n    const char *keywords[] = {\n        \"auto\", \"const\", \"double\", \"float\", \"int\", \"short\", \"struct\", \"unsigned\",\n        \"break\", \"continue\", \"else\", \"for\", \"long\", \"signed\", \"switch\", \"void\",\n        \"case\", \"default\", \"enum\", \"goto\", \"register\", \"sizeof\", \"typedef\", \"volatile\",\n        \"char\", \"do\", \"extern\", \"if\", \"return\", \"static\", \"union\", \"while\",\n        \"inline\", \"alignof\", \"_Generic\", \"bool\", \"_Bool\", \"true\", \"false\"\n    };\n    printf(\"*iter == %c\\n\", *iter);\n    while ( *iter != '\\0' ) {\n        while ( is_space(*iter) )\n            ++iter;\n\n        if (*iter == '/' &amp;&amp; iter[1] == '*') {       // found C style /**/ comment\n            do {\n                ++iter;\n            }\n            while ( !(*iter == '*' &amp;&amp; iter[1] == '/') );    // continuously skip until we find a */\n            iter += 2;  // skip twice to pass over */ and go to the next token.\n        }\n\n        if (*iter == '/' &amp;&amp; iter[1] == '/') {       // found C++ style // comment\n            while ( *iter != '\\n' )\n                ++iter;     // skip until the next line which will be skipped itself.\n        }\n\n        if (*iter == '\\\\' &amp;&amp; iter[1] == '\\n') {     // formatting Left slash check\n            lexer_add_token(Q, LeftSlash, \"\\\\\", 2);\n            iter += 2;\n            return;\n        }\n\n        if (*iter == '\\\"') {    // found string literal, adjust for \"\\\\\" so we won't crash\n            wording[i++] = *iter++;     // add the first double quote to buffer\n            while ( *iter != '\\\"' ) {\n                if (*iter == '\\\\' &amp;&amp; iter[1] == '\\\"' &amp;&amp; iter[-1] != '\\\\') {\n                    wording[i++] = *iter++;     // add the literal double quote as well\n                }\n                wording[i++] = *iter++;\n            }\n            wording[i++] = *iter++;     // found the ending double quote, add that too.\n\n            if (wording[0] != '\\0') {\n                lexer_add_token(Q, StringConstant, wording, i+1);\n                reset_string(wording);\n                return;\n            }\n        }\n\n        if ( *iter == '\\'' ) {  // found character literal, adjust for '\\\\' so we won't crash\n            wording[i++] = *iter++;\n            int counter=0;\n            while (*iter != '\\'' &amp;&amp; counter &lt; 2) {      // Same operation as the string literal but limit as char\n                if (*iter == '\\\\' &amp;&amp; iter[1] == '\\'' &amp;&amp; iter[-1] != '\\\\') {\n                    wording[i++] = *iter++;\n                }\n                wording[i++] = *iter++;\n                ++counter;\n            }\n            wording[i++] = *iter++;     // add ending single quote to buffer\n\n            if (wording[0] != '\\0') {\n                lexer_add_token(Q, CharConstant, wording, i+1);\n                reset_string(wording);\n                return;\n            }\n        }\n\n        if (*iter == '0' &amp;&amp; (iter[1] == 'x' || iter[1] == 'X')) {   // found hexadecimal constant\n            wording[i++] = *iter++;     // copy both 0 and x to buffer\n            wording[i++] = *iter++;\n\n            while ( is_numeral(*iter) ) {\n                wording[i++] = *iter++;     // copy numbers and letters A to F\n            }\n            if ( *iter == '.' &amp;&amp; is_numeral(iter[1]) ) {    // found hexadecimal float\n                wording[i++] = *iter++;\n                while ( is_numeral(*iter) )\n                    wording[i++] = *iter++;\n                if (*iter == 'p' &amp;&amp; is_numeral(iter[1])) {  // stuff like 0x0.3p10.\n                    wording[i++] = *iter++;\n                    while ( is_numeral(*iter) )\n                        wording[i++] = *iter++;\n                }\n                if (wording[0] != '\\0') {\n                    lexer_add_token(Q, NumConstantHexFloat, wording, i+1);\n                    reset_string(wording);\n                    return;\n                }\n            }\n            else {      // we didn't find a decimal, so tokenize what we found as a normal hex constant\n                if (wording[0] != '\\0') {\n                    lexer_add_token(Q, NumConstantHex, wording, i+1);\n                    reset_string(wording);\n                    return;\n                }\n            }\n        }\n\n        while ( is_numeric(*iter) ) {   // found decimal constant\n            wording[i++] = *iter++;\n        }\n        if ( *iter == '.' &amp;&amp; is_numeric(iter[1]) ) {    // found floating point number\n            wording[i++] = *iter++;     // add in the decimal char\n            while ( is_numeric(*iter) )\n                wording[i++] = *iter++;\n\n            // add the 'e' constant for large floats as well as 'p' (power) constant\n            if ( (*iter == 'p' || *iter == 'P' || *iter == 'e' || *iter == 'E') &amp;&amp; is_numeric(iter[1]) )\n            {\n                wording[i++] = *iter++;\n                while ( is_numeric(*iter) )\n                    wording[i++] = *iter++;\n            }\n            if (*iter == 'f' || *iter == 'F')   // stuff like 2.0f, add that into the buffer!\n                wording[i++] = *iter++;\n\n            if (wording[0] != '\\0') {\n                lexer_add_token(Q, NumConstantReal, wording, i+1);\n                reset_string(wording);\n                return;\n            }\n        }\n        else {      // no decimal, consider it a natural number\n            if (wording[0] != '\\0') {\n                lexer_add_token(Q, NumConstant, wording, i+1);\n                reset_string(wording);\n                return;\n            }\n        }\n\n        if (is_alphabetic(*iter)) { // found an identifier or potential keyword\n            while (is_potential_identifier(*iter))\n                wording[i++] = *iter++;\n\n            if (wording[0] != '\\0') {\n                int x;\n                int found_keyword = 0;\n                for ( x=0 ; x&lt;sizeof keywords/sizeof keywords[0] ; ++x ) {\n                    if ( !strcmp(wording, keywords[x]) )\n                        found_keyword = 1;\n                }\n                if (found_keyword)\n                    lexer_add_token(Q, Keyword, wording, i+1);\n                else lexer_add_token(Q, NumIdent, wording, i+1);\n                reset_string(wording);\n                return;\n            }\n        }\n\n        switch ( *iter ) {  // add in individual characters\n            case '=':\n                if (iter[1] == '=') {\n                    ++iter;\n                    lexer_add_token(Q, EqualCmp, \"==\", 3);\n                }\n                else lexer_add_token(Q, Equal, \"=\", 2);\n                ++iter;\n                return;\n            case ';':\n                lexer_add_token(Q, Semicolon, \";\", 2);\n                ++iter;\n                return;\n            case ':':\n                lexer_add_token(Q, Colon, \";\", 2);\n                ++iter;\n                return;\n            case '+':   // possible uses =&gt; left unary is positive, twice unary is increment, once binary is addition\n                if (iter[1] == '=') {\n                    ++iter;\n                    lexer_add_token(Q, PlusEqual, \"+=\", 3);\n                }\n                else if (iter[1] == '+') {\n                    ++iter;\n                    lexer_add_token(Q, Increment, \"++\", 3);\n                }\n                else lexer_add_token(Q, Plus, \"+\", 2);\n                ++iter;\n                return;\n            case '-':   // possible uses =&gt; left unary is negating, twice unary is decrement, one binary is minus\n                if (iter[1] == '=') {\n                    ++iter;\n                    lexer_add_token(Q, MinusEqual, \"-=\", 3);\n                }\n                else if (iter[1] == '-') {\n                    ++iter;\n                    lexer_add_token(Q, Decrement, \"--\", 3);\n                }\n                else if (iter[1] == '&gt;') {\n                    ++iter;\n                    lexer_add_token(Q, Arrow, \"-&gt;\", 3);\n                }\n                else lexer_add_token(Q, Dash, \"-\", 2);\n                ++iter;\n                return;\n            case '*':   // leftward unary is dereferencing ptr, binary be mult. Also check for / as ending comment\n                if (iter[1] == '=') {\n                    ++iter;\n                    lexer_add_token(Q, MultEqual, \"*=\", 3);\n                }\n                else lexer_add_token(Q, Asterisk, \"*\", 2);\n                ++iter;\n                return;\n            case '/':   // check for * and / as comment EDIT: DONE\n                if (iter[1] == '=') {\n                    ++iter;\n                    lexer_add_token(Q, DivEqual, \"/=\", 3);\n                }\n                else lexer_add_token(Q, DivSlash, \"/\", 2);\n                ++iter;\n                return;\n            case '(':\n                lexer_add_token(Q, LeftParens, \"(\", 2);\n                ++iter;\n                return;\n            case ')':\n                lexer_add_token(Q, RiteParens, \")\", 2);\n                ++iter;\n                return;\n            case '[':\n                lexer_add_token(Q, LeftSqBracket, \"[\", 2);\n                ++iter;\n                return;\n            case ']':\n                lexer_add_token(Q, RightSqBracket, \"]\", 2);\n                ++iter;\n                return;\n            case '{':\n                lexer_add_token(Q, LeftCurlBrace, \"{\", 2);\n                ++iter;\n                return;\n            case '}':\n                lexer_add_token(Q, RightCurlBrace, \"}\", 2);\n                ++iter;\n                return;\n            case '.':\n                if (iter[1] == '.' &amp;&amp; iter[2] == '.') {\n                    iter += 2;\n                    lexer_add_token(Q, Ellipses, \"...\", 4);\n                }\n                else lexer_add_token(Q, Dot, \".\", 2);\n                ++iter;\n                return;\n            case ',':\n                lexer_add_token(Q, Comma, \",\", 2);\n                ++iter;\n                return;\n            case '&lt;':\n                if (iter[1] == '&lt;') {\n                    if (iter[2] == '=') {\n                        lexer_add_token(Q, LeftBitShiftEqual, \"&lt;&lt;=\", 4);\n                        iter += 2;\n                    }\n                    else {\n                        lexer_add_token(Q, LeftBitShift, \"&lt;&lt;\", 3);\n                        ++iter;\n                    }\n                }\n                else if (iter[1] == '=') {\n                    lexer_add_token(Q, LessEqual, \"&lt;=\", 3);\n                    ++iter;\n                }\n                else lexer_add_token(Q, LeftArrow, \"&lt;\", 2);\n                ++iter;\n                return;\n            case '&gt;':\n                if (iter[1] == '&gt;') {\n                    if (iter[2] == '=') {\n                        lexer_add_token(Q, RightBitShiftEqual, \"&gt;&gt;=\", 4);\n                        iter += 2;\n                    }\n                    else {\n                        lexer_add_token(Q, RightBitShift, \"&gt;&gt;\", 3);\n                        ++iter;\n                    }\n                }\n                else if (iter[1] == '=') {\n                    lexer_add_token(Q, GreaterEqual, \"&gt;=\", 3);\n                    ++iter;\n                }\n                else lexer_add_token(Q, RightArrow, \"&gt;\", 2);\n                ++iter;\n                return;\n            case '?':\n                lexer_add_token(Q, QuestionMark, \"?\", 2);\n                ++iter;\n                return;\n            case '#':\n                lexer_add_token(Q, HashSym, \"#\", 2);\n                ++iter;\n                return;\n            case '&amp;':\n                if (iter[1] == '=') {\n                    ++iter;\n                    lexer_add_token(Q, AndEqual, \"&amp;=\", 3);\n                }\n                else if (iter[1] == '&amp;') {\n                    ++iter;\n                    lexer_add_token(Q, BoolAnd, \"&amp;&amp;\", 3);\n                }\n                else lexer_add_token(Q, Ampersand, \"&amp;\", 2);\n                ++iter;\n                return;\n            case '^':\n                if (iter[1] == '=') {\n                    ++iter;\n                    lexer_add_token(Q, XorEqual, \"^=\", 3);\n                }\n                else lexer_add_token(Q, Carot, \"^\", 2);\n                ++iter;\n                return;\n            case '%':\n                if (iter[1] == '=') {\n                    ++iter;\n                lexer_add_token(Q, ModuloEqual, \"%=\", 3);\n            }\n            else lexer_add_token(Q, Percent, \"%\", 2);\n            ++iter;\n            return;\n        case '!':\n            if (iter[1] == '=') {\n                ++iter;\n                lexer_add_token(Q, NotEqual, \"!=\", 3);\n            }\n            else lexer_add_token(Q, ExclamationMark, \"!\", 2);\n            ++iter;\n            return;\n        case '|':\n            if (iter[1] == '=') {\n                ++iter;\n                lexer_add_token(Q, OrEqual, \"|=\", 3);\n            }\n            else if (iter[1] == '|') {\n                ++iter;\n                lexer_add_token(Q, BoolOr, \"||\", 3);\n            }\n            else lexer_add_token(Q, VerticalBar, \"|\", 2);\n            ++iter;\n            return;\n        case '~':\n            lexer_add_token(Q, Tilde, \"~\", 2);\n            ++iter;\n            return;\n        case '@':\n            lexer_add_token(Q, AtSign, \"@\", 2);\n            ++iter;\n            return;\n        case '$':\n            lexer_add_token(Q, DollarSign, \"$\", 2);\n            ++iter;\n            return;\n        case '`':\n            lexer_add_token(Q, GraveAccent, \"`\", 2);\n            ++iter;\n            return;\n    }\n    ++iter;\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "pointers", "generics", "linked-list", "polymorphism"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1483502848, "post_id": 41455247, "comment_id": 70118319, "body": "<code>new_node-&gt;data + i</code> is an error, you cannot use arithmetic on <code>void *</code>. If you don&#39;t see a compiler warning then adjust your settings.  You should replace that entire loop with <code>memcpy(new_node-&gt;data, new_data, data_size);</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1483502992, "post_id": 41455247, "comment_id": 70118353, "body": "<code>head_ref[listSize-1]</code> is a logic error. Each node resides in a separate memory allocation, but you are indexing off one node as if all of the nodes are part of an array. The code comment suggests you want new nodes to be inserted at the beginning; in that case you would not make any changes to the existing first node; you would set <code>new_node-&gt;next = head_ref;</code> instead , and return <code>new_node;</code> in all cases"}, {"owner": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "edited": false, "score": 0, "creation_date": 1483537354, "post_id": 41455247, "comment_id": 70136013, "body": "To store the size of each data added in the linked-list, it should be useful to a field <code>size_t size;</code> in the <code>struct node</code>. Otherwise, if the size is not a constant for all the linked-list, no way to recover the data except the pointer."}], "owner": {"reputation": 55, "user_id": 4760798, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-lklAYAsEOCU/AAAAAAAAAAI/AAAAAAAABwI/u5BQ8wNBt4o/photo.jpg?sz=128", "display_name": "jamarcus_13", "link": "https://stackoverflow.com/users/4760798/jamarcus-13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483502676, "creation_date": 1483496472, "last_edit_date": 1483502676, "question_id": 41455247, "link": "https://stackoverflow.com/questions/41455247/partially-correct-generic-linked-list-using-void", "title": "Partially correct generic linked list using void*", "body": "<p>Code is an experiment implementing a Generic Linked List in C.</p>\n\n<p>As <code>void</code> pointer is it can be used to point to any data type and size of all types of pointers is always is same, so can always allocate a linked list node. Function pointer is needed to process actual content stored at address pointed by void pointer.</p>\n\n<p>Works only partially, suspect problems using <code>char*</code>.</p>\n\n<p>Main: </p>\n\n<pre><code>nodePtr start = createList();\n// Create and print an int linked list\nunsigned int_size = sizeof(int);\nint arr[] = {10, 20, 30, 40, 50}, i;\nfor (i=0; i&lt; 5; i++) {\n  start= push(start, &amp;arr[i], int_size);}\n\n// Results in 10, 20,40 being stored and doesn't read 30,50!\n</code></pre>\n\n<p>Code:   </p>\n\n<pre><code>struct node\n{\n  // Any data type can be stored in this node\n  void  *data;\n  struct node *next;\n};\n\ntypedef struct node node;\ntypedef node* nodePtr;\ntypedef nodePtr* ptrNodePtr;\n\nnodePtr head, tail;\nint listSize;\n\nnodePtr push(nodePtr head_ref, void *new_data, size_t data_size)\n{\n\n  // Allocate memory for node\n  nodePtr new_node = (nodePtr)malloc(sizeof(node));\n\n  new_node-&gt;data  = malloc(data_size);\n  new_node-&gt;next = NULL;\n\n  // Copy contents of new_data to newly allocated memory.\n  // Assumption: char takes 1 byte.\n  int i;\n  for (i=0; i&lt;data_size; i++)\n    *(char *)(new_node-&gt;data + i) = *(char *)(new_data + i);\n\n  // Change head pointer as new node is added at the beginning\n  if (listSize ==0) {\n    //printf(\"%d\",listSize);\n    head_ref = new_node;  }\n  else{\n    printf(\"%d\",listSize);\n    head_ref[listSize-1].next =  new_node;\n  }\n  listSize++;\n  return head_ref;\n}\n\nnodePtr createList() {\n  head = NULL;\n  tail = NULL;\n  listSize = 0;\n  return head;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1483495143, "post_id": 41455031, "comment_id": 70116625, "body": "Use  scanf(&quot; %c %c&quot; , &amp;k, &amp;l ); that is insert a space before the first format specifier."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1483495146, "post_id": 41455031, "comment_id": 70116626, "body": "You probably are not consuming the newline. See <a href=\"http://stackoverflow.com/q/5240789/669576\">scanf() leaves the new line char in buffer?</a>"}, {"owner": {"reputation": 57, "user_id": 5731408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896a6844436da44c8c438e3ad53dfcfd?s=128&d=identicon&r=PG", "display_name": "Black Kinght", "link": "https://stackoverflow.com/users/5731408/black-kinght"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1483495581, "post_id": 41455031, "comment_id": 70116725, "body": "@VladfromMoscow , yah , you&#39;r right i forgot that"}, {"owner": {"reputation": 57, "user_id": 5731408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896a6844436da44c8c438e3ad53dfcfd?s=128&d=identicon&r=PG", "display_name": "Black Kinght", "link": "https://stackoverflow.com/users/5731408/black-kinght"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1483495691, "post_id": 41455031, "comment_id": 70116748, "body": "@JohnnyMopp thanks alot , this post is really helpful , problem solved"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 5731408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896a6844436da44c8c438e3ad53dfcfd?s=128&d=identicon&r=PG", "display_name": "Black Kinght", "link": "https://stackoverflow.com/users/5731408/black-kinght"}, "edited": false, "score": 0, "creation_date": 1483495797, "post_id": 41455102, "comment_id": 70116768, "body": "first one does not work for me,  but second one works , just adding space before first %c , thanks"}], "tags": [], "owner": {"reputation": 949, "user_id": 6745643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zh4InaNEvp4/AAAAAAAAAAI/AAAAAAAAADU/VkoLunlB9-c/photo.jpg?sz=128", "display_name": "shafayat hossain", "link": "https://stackoverflow.com/users/6745643/shafayat-hossain"}, "is_accepted": false, "score": 1, "last_activity_date": 1483495351, "creation_date": 1483495351, "answer_id": 41455102, "question_id": 41455031, "link": "https://stackoverflow.com/questions/41455031/c-compare-2-chars/41455102#41455102", "title": "C : compare 2 chars", "body": "<p>Use scanf(\"%c %c \" , &amp;k, &amp;l ); or scanf(\" %c %c\" , &amp;k, &amp;l ); \nThis will consume your new line stored in buffer. </p>\n"}], "owner": {"reputation": 57, "user_id": 5731408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896a6844436da44c8c438e3ad53dfcfd?s=128&d=identicon&r=PG", "display_name": "Black Kinght", "link": "https://stackoverflow.com/users/5731408/black-kinght"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1483496077, "answer_count": 1, "score": 0, "last_activity_date": 1483495351, "creation_date": 1483494749, "last_edit_date": 1592644375, "question_id": 41455031, "link": "https://stackoverflow.com/questions/41455031/c-compare-2-chars", "closed_reason": "Duplicate", "title": "C : compare 2 chars", "body": "<p>i wanna to compare two chars ,\nif char_1 == char_2 it must print out 1 else : print 0\nbut it doesn't ,</p>\n<p>just first test is correct and the rest are false\nand i'll attach an example some test cases and it's output</p>\n<p>i have this code</p>\n<h2>code</h2>\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;ctype.h&gt;\n\n\nint check_char(char x , char y );\nint check_spec_char(char x , char y);\n\nint main ()\n{\n    int i , x;\n    char k , l ;\n    for(i = 0 ; i &lt; 5 ; i++)\n    {\n        scanf(&quot;%c %c&quot; , &amp;k, &amp;l );\n        x = check_char(k , l);\n        printf(&quot;%i\\n\\n&quot;, x);\n    }\n    return 0;\n}\n\n\nint check_spec_char(char x , char y)\n{\n    if(((x == 'e' || x == 'i' ) &amp;&amp; (y == 'e' || y == 'i' )) ||\n       (( x == 'p' || x == 'b') &amp;&amp; ( y == 'p' || y =='b')))\n    {\n        return 1;\n\n    } else\n    {\n        return 0 ;\n    }\n}\n\n\nint check_char(char x , char y )\n{\n    x = tolower(x);\n    y = tolower(y);\n\n    if(x == y)\n    {\n        return 1 ;\n    }\n    else if (check_spec_char(x , y) == 1)\n    {\n        return 1 ;\n\n    } else {\n\n        return 0 ;\n    }\n}\n</code></pre>\n<h2>test case and it's output</h2>\n<pre><code>r  r\n1\n    \nr  r\n0\n    \n0\n    \nr  r\n0\n    \n0\n    \nProcess returned 0 (0x0)   execution time : 14.183 s\nPress any key to continue.\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1483491701, "post_id": 41454639, "comment_id": 70115760, "body": "One way is to do like Unicode and explicitly include endian information with the data.  It&#39;s only 1 bit after all :)  It makes it much easier on the decoding side as well as long as you understand that bit."}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1483492090, "post_id": 41454639, "comment_id": 70115851, "body": "Before I write out a long answer, let me ask this.  Why wouldn&#39;t you want to just write our your data in XML or JSON with an appropriate library?  Binary file formats are often harder to debug and have all the issues with endianness and packing you refer to.  Text file formats, like XML and JSON, have none of these issues."}, {"owner": {"reputation": 52, "user_id": 6058398, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kCTf8Hj-gJU/AAAAAAAAAAI/AAAAAAAAABI/ttgn42xMI5I/photo.jpg?sz=128", "display_name": "johnyyonehand", "link": "https://stackoverflow.com/users/6058398/johnyyonehand"}, "edited": false, "score": 0, "creation_date": 1483493026, "post_id": 41454639, "comment_id": 70116103, "body": "Hi selbie, currently we are  doing small project for uni that requires that we store a condensed data as binary file(hence the questions). The purpose of the project it basically boils down to stroing data in binary file and then transforming it into a different files that could represent different files (like PNG,BMP, etc)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483505237, "post_id": 41454639, "comment_id": 70118894, "body": "<a href=\"https://en.wikipedia.org/wiki/TIFF#Byte_order\" rel=\"nofollow noreferrer\">TIFF files</a> began with <code>&quot;MM&quot;</code> or <code>&quot;II&quot;</code> to indicate endian-ness.  A file was typically written in the code&#39;s  native endian while reading a file was obliged to read according to the indicated endian. There are many solutions to endian."}, {"owner": {"reputation": 57963, "user_id": 968261, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/16f69ca344773bd6c34970b2f6186d61?s=128&d=identicon&r=PG", "display_name": "Alexey Frunze", "link": "https://stackoverflow.com/users/968261/alexey-frunze"}, "edited": false, "score": 0, "creation_date": 1483508009, "post_id": 41454639, "comment_id": 70119733, "body": "Some food for thought: <a href=\"https://github.com/alexfru/TypeTraitsInC\" rel=\"nofollow noreferrer\">Type traits in C</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1399, "user_id": 7359606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f9eca7f3b7853fa067205299f3ebc89?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Artsimovich", "link": "https://stackoverflow.com/users/7359606/joseph-artsimovich"}, "is_accepted": false, "score": 2, "last_activity_date": 1483496222, "creation_date": 1483496222, "answer_id": 41455209, "question_id": 41454639, "link": "https://stackoverflow.com/questions/41454639/binary-file-writing-reading-on-different-endians/41455209#41455209", "title": "Binary file writing/reading on different endians", "body": "<blockquote>\n  <p>Is it accepted to use #pragma pack?</p>\n</blockquote>\n\n<p>That's something frowned upon. Packing a struct is going to violate data alignment requirements. On some architectures unaligned access is merely slower, on others it's outright forbidden. In the latter case the compiler is forced to generate code that will reassemble your data members from bytes every time you access them.</p>\n\n<p>Instead of struct packing, you should be writing custom serialization code. That is, design your classes like you normally would, with encapsulation and stuff, and then just provide serialization / deserialization methods.</p>\n\n<blockquote>\n  <p>What about endianness? How should one prepare for switch to different one? Is forcing eg little endian only and requiring application (in BE) to byteswap each element accepted?</p>\n</blockquote>\n\n<p>That's something perfectly accepted and in fact widely used. The alternative of having endiannes being encoded in data format itself is a bad idea IMHO, as it complicates your code for no good reason. When doing I/O, byte swapping is not going to be the performance bottleneck anyway.</p>\n"}], "owner": {"reputation": 52, "user_id": 6058398, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kCTf8Hj-gJU/AAAAAAAAAAI/AAAAAAAAABI/ttgn42xMI5I/photo.jpg?sz=128", "display_name": "johnyyonehand", "link": "https://stackoverflow.com/users/6058398/johnyyonehand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483496222, "creation_date": 1483491344, "last_edit_date": 1495542828, "question_id": 41454639, "link": "https://stackoverflow.com/questions/41454639/binary-file-writing-reading-on-different-endians", "title": "Binary file writing/reading on different endians", "body": "<p>A rather simple questions about safe ways to write constant in size structs (containing uint8_t, uint32_t etc) to binary file that would ensure it's readibility</p>\n\n<ol start=\"2\">\n<li><p>Is it accepted to use <code>#pragma pack</code>? (similiar to <code>BITMAPFILEHEADER</code> ) and then writing entire struct to file (so far it worked with bitmaps).\nShould I rather use a simple serialization to single bytes ( as shown here <a href=\"https://stackoverflow.com/questions/16543519/serialization-of-struct\">Serialization of struct</a>)?</p></li>\n<li><p>What about endianness? How should one prepare for switch to different one? Is forcing eg little endian only and requiring application (in BE) to byteswap each element accepted?</p></li>\n</ol>\n\n<p>My current project is rather simple one, but I would like to expand it in the future so I would rather try to avoid any pitfalls.\nI know that boost offers serialization, but for know I would like to handle stuff manually.</p>\n"}, {"tags": ["c", "dependencies"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483487544, "post_id": 41454134, "comment_id": 70114784, "body": "Read tag-descriptions before adding."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1483487565, "post_id": 41454134, "comment_id": 70114792, "body": "The problem is not so much that there are dependencies, but that it&#39;s difficult <i>for a compiler</i> to analyze whether there are."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1483487574, "post_id": 41454134, "comment_id": 70114794, "body": "Typo in <code>for</code> loop."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1483489937, "post_id": 41454134, "comment_id": 70115351, "body": "you did not add enough information about the context in whichyou run the code."}, {"owner": {"reputation": 9, "user_id": 6483290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43fbe088c5a83acf637b27694310d1d2?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/6483290/kumar"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1483509239, "post_id": 41454134, "comment_id": 70120165, "body": "@JohnBollinger   Thanks. So what does it mean when they say the reuse distance is 5. Doesn&#39;t the pragma allow 5 iterations to run parallel before assuming that there might be dependencies."}], "owner": {"reputation": 9, "user_id": 6483290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43fbe088c5a83acf637b27694310d1d2?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/6483290/kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483509041, "creation_date": 1483487347, "last_edit_date": 1483509041, "question_id": 41454134, "link": "https://stackoverflow.com/questions/41454134/how-to-find-loop-dependency", "title": "How to find loop dependency?", "body": "<pre><code>#pragma pipeline, max_latency = 5\nfor(int i = 1; i &lt; N; i++)\n{\n   //reuse distance &gt;= 5  when N &gt; 1\n   z[i * N + 2] = foobar(z[i-1]));\n}\n</code></pre>\n\n<p>I am reading a paper in the which it says that the above loop has a non-uniform dependency that is difficult to analyze, hence HLS (high level synthesis) tools make an assumption that the write in the current iteration is consumed in the next iteration. This prevents pipelining the loop. Thus user directives(pragmas) are used to bypass HLS analysis.</p>\n\n<p>In the above code I don't understand the dependencies. For N > 1 all reads and writes are independent. Can someone explain the dependency?</p>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 5, "creation_date": 1483481564, "post_id": 41453188, "comment_id": 70112840, "body": "How do you know something is wrong? Do you get a compiler error or a runtime error? What is the error? Also, C/C++ is not a language - C or C++, pick one."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 4, "creation_date": 1483481686, "post_id": 41453188, "comment_id": 70112889, "body": "woe and behold - Simple indentation applied, and a problem stares at us right in the face. Your <code>for</code> loops preform no actions"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1483481690, "post_id": 41453188, "comment_id": 70112891, "body": "<code>for (i = 0; i &lt;= 2; i++);</code> --- this is an empty loop. It does nothing three times. Try removing the semicolon (this bug appears twice)"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1483481706, "post_id": 41453188, "comment_id": 70112895, "body": "Didn&#39;t you get a compiler warning about the semicolons on your <code>for</code> loops?"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1483481863, "post_id": 41453188, "comment_id": 70112962, "body": "Enabling high warning levels on your compiler will let you catch these things easily. You <i>probably</i> should do so, and if you already have, you might want to start paying attention to the warnings the compiler produces."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1483485107, "post_id": 41453188, "comment_id": 70114064, "body": "Aside: <code>for (i = 0; i &lt;= 2; i++)</code> is using a magic number that is <i>different</i> from the magic number used to dimension the array. Better would be <code>for (i = 0; i &lt; 3; i++)</code> and even better would be that <code>3</code> specified in <i>one</i> place only, either with a <code>#define</code> or with a <code>const int</code>."}, {"owner": {"reputation": 107, "user_id": 2901245, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/ff6eef559fd60c2cce3795d4de73856b?s=128&d=identicon&r=PG&f=1", "display_name": "FalloutRanger", "link": "https://stackoverflow.com/users/2901245/falloutranger"}, "edited": false, "score": 0, "creation_date": 1483491891, "post_id": 41453188, "comment_id": 70115798, "body": "Sorry the compiler didn&#39;t show any warning."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1483482143, "post_id": 41453234, "comment_id": 70113074, "body": "This is just one of many problems"}, {"owner": {"reputation": 107, "user_id": 2901245, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/ff6eef559fd60c2cce3795d4de73856b?s=128&d=identicon&r=PG&f=1", "display_name": "FalloutRanger", "link": "https://stackoverflow.com/users/2901245/falloutranger"}, "edited": false, "score": 0, "creation_date": 1483491870, "post_id": 41453234, "comment_id": 70115791, "body": "Problem solved! Thank you!"}], "tags": [], "owner": {"reputation": 2203, "user_id": 6137423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1Rfu.jpg?s=128&g=1", "display_name": "AhmadWabbi", "link": "https://stackoverflow.com/users/6137423/ahmadwabbi"}, "is_accepted": true, "score": 0, "last_activity_date": 1483481702, "creation_date": 1483481702, "answer_id": 41453234, "question_id": 41453188, "link": "https://stackoverflow.com/questions/41453188/how-can-i-debug-this-program/41453234#41453234", "title": "How can I debug this program?", "body": "<p>Remove the semi-column (;) after each <code>for</code> loop. Those are empty <code>for</code> loops in your program. They loop without doing anything.</p>\n"}], "owner": {"reputation": 107, "user_id": 2901245, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/ff6eef559fd60c2cce3795d4de73856b?s=128&d=identicon&r=PG&f=1", "display_name": "FalloutRanger", "link": "https://stackoverflow.com/users/2901245/falloutranger"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "closed_date": 1483482135, "accepted_answer_id": 41453234, "answer_count": 1, "score": -8, "last_activity_date": 1483520825, "creation_date": 1483481381, "last_edit_date": 1483520825, "question_id": 41453188, "link": "https://stackoverflow.com/questions/41453188/how-can-i-debug-this-program", "closed_reason": "Not suitable for this site", "title": "How can I debug this program?", "body": "<p>I wrote some C code that was supposed to transpose a 3x3 integer matrix using the function \"transpose\". However, there is something wrong with the code, but I can't figure it out. Can someone help me with identifying the mistake, please?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint a[3][3];\n\nvoid main()\n{\n    int i, j;\n    void transpose(int x[3][3]);\n\n    printf(\"Enter a 3x3 matrix:\\n\");\n    for (i = 0; i &lt;= 2; i++)\n        ;\n    {\n        for (j = 0; j &lt;= 2; j++)\n            ;\n        {\n            scanf_s(\"%d\", &amp;a[i][j]);\n        }\n    }\n    printf(\"The original matrix is:\\n\");\n    for (i = 0; i &lt;= 2; i++)\n        printf(\"%d %d %d\\n\", a[i][0], a[i][1], a[i][2]);\n    transpose(a);\n    printf(\"The transposed matrix is:\\n\");\n    for (i = 0; i &lt;= 2; i++)\n        printf(\"%d %d %d\\n\", a[i][0], a[i][1], a[i][2]);\n    getchar();\n    getchar();\n}\n\nvoid transpose(int x[3][3])\n{\n    int t;\n    t = x[1][0];\n    x[1][0] = x[0][1];\n    x[0][1] = t;\n    t = x[2][0];\n    x[2][0] = x[0][2];\n    x[0][2] = t;\n    t = x[2][1];\n    x[2][1] = x[1][2];\n    x[1][2] = t;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1483480545, "post_id": 41452985, "comment_id": 70112389, "body": "<code>test[j]</code> is a <code>char *</code>. <code>&amp;test[j]</code> is a <code>char **</code>. You&#39;re trying to assign it to a variable of type <code>char *</code>. Your compiler should warn you about that."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1483480600, "post_id": 41452985, "comment_id": 70112416, "body": "<code>test2[j]=&amp;test[j];</code> --&gt; <code>test2[j]=test[j];</code>, <code>printf(&quot;%d &quot;,*test2[0]);</code> --&gt; <code>printf(&quot;%s &quot;, test2[0]);</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1483480674, "post_id": 41452985, "comment_id": 70112451, "body": "You&#39;re confusing strings and an array of pointers to char. E.g., you start with an array of three strings (the <code>[10]</code> in your parameter definition is unnecessary and illogical), then try to print just one of those? It&#39;s unclear what precisely you&#39;re trying to do."}], "answers": [{"tags": [], "owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1483487794, "creation_date": 1483487794, "answer_id": 41454197, "question_id": 41452985, "link": "https://stackoverflow.com/questions/41452985/copy-array-of-pointers-and-print-the-copy/41454197#41454197", "title": "copy array of pointers and print the copy", "body": "<p>Please try if this program can help you. I assume that you want to print the whole array of strings. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid kosomo(char *test[10]) {\n    int j = 0;\n    char *test2[10];\n    while (test[j] != NULL) {\n        test2[j] = test[j]; \n        j++;\n    }\n    test2[j] = NULL;\n    j=0;\n    while (test2[j] != NULL) {\n        printf(\"%s \", test2[j]);\n        j++;\n    }\n}\n\nint main() {\n    char *test[] = {\"abc\", \"def\", NULL};\n    kosomo(test);\n    return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>abc def \n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7337989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99ff263c148648bc6393d27c10df8095?s=128&d=identicon&r=PG&f=1", "display_name": "Ginger", "link": "https://stackoverflow.com/users/7337989/ginger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1483513536, "accepted_answer_id": 41454197, "answer_count": 1, "score": -3, "last_activity_date": 1483487794, "creation_date": 1483480373, "question_id": 41452985, "link": "https://stackoverflow.com/questions/41452985/copy-array-of-pointers-and-print-the-copy", "closed_reason": "Not suitable for this site", "title": "copy array of pointers and print the copy", "body": "<p>I'm trying to copy a pointers of arrays and print the values from the copied array, but I got a Segmentation fault.</p>\n\n<pre><code>void kosomo(char * test[10]) {\n        int j=0;\n        char * test2[10];\n        while (test[j] != NULL) {\n                test2[j]=&amp;test[j]; // test[j] is the string, so with &amp; it's the address\n                j++;\n        }\n\n        printf(\"%d \",*test2[0]); // trying to do * in order to print the string\n}\n\n\nint main() {\n        char * test[] = {\"abc\",\"def\",NULL};\n\n        kosomo(test);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "ubuntu", "printf", "scanf"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483479808, "post_id": 41452833, "comment_id": 70112089, "body": "<code>malloc(sizeof(int))</code> return a pointer to allocated memory.  Why does code save a pointer to an <code>int</code> with <code>int ipt = malloc(sizeof(int));</code>?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1483479851, "post_id": 41452833, "comment_id": 70112099, "body": "<code>scanf(&quot;d&quot;,&amp;ipt);</code>  --&gt; <code>scanf(&quot;%d&quot;,ipt);</code> since <code>ipt</code> is a pointer (in 2nd example)."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1483480167, "post_id": 41452833, "comment_id": 70112215, "body": "@JohnnyMopp <code>&quot;d&quot;</code> --&gt; <code>&quot;%d&quot;</code>"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1483480209, "post_id": 41452833, "comment_id": 70112230, "body": "@BLUEPIXY Thanks. I caught that already."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1483480281, "post_id": 41452833, "comment_id": 70112261, "body": "@kanr Returning a local variable is ok. What you shouldn&#39;t do is return a pointer to a local variable."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1483485812, "post_id": 41452833, "comment_id": 70114255, "body": "Note that <code>int* give_options();</code> is not a prototype for the function in C; it is only a declaration of the function that doesn&#39;t specify anything about the argument list (except it can&#39;t be a function that takes a variable number of arguments because those must have a prototype in scope with the ellipsis <code>, ...)</code> present).  If you want to specify a function that takes no argument, use <code>int* give_options(void);</code>.  As it stands, the compiler can&#39;t reject <code>give_options(&quot;Aldeburgh&quot;, &quot;Snape Maltings&quot;);</code> as a call to <code>give_options()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1483485944, "post_id": 41452909, "comment_id": 70114292, "body": "And maybe note that this relieves you of the need to include <code>free(dec);</code> somewhere in the calling function after the call to <code>give_options()</code>."}], "tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": true, "score": 2, "last_activity_date": 1483479974, "creation_date": 1483479974, "answer_id": 41452909, "question_id": 41452833, "link": "https://stackoverflow.com/questions/41452833/in-c-how-to-pass-local-function-variable-value-to-another-function-and-print-val/41452909#41452909", "title": "in C how to pass local function variable value to another function and print value without errors", "body": "<p>You can return the value directly (without using pointers)</p>\n\n<p>change </p>\n\n<pre><code>int* give_options();\n</code></pre>\n\n<p>to</p>\n\n<pre><code>int give_options(){\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int* ipt; \nipt = malloc(sizeof(int));\nscanf(\"d\",&amp;ipt);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>int ipt;\nscanf(\"%d\", &amp;ipt);\n</code></pre>\n\n<p>also you can leave </p>\n\n<pre><code>int* dec = give_options();\n</code></pre>\n\n<p>as</p>\n\n<pre><code>int dec = give_options();\n</code></pre>\n\n<p>The functions return value is left in r0 when the function returns.\nI just noticed that your first example already does this.  Are you just trying to learn pointers?</p>\n"}], "owner": {"reputation": 55, "user_id": 2129230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7cad3ab475833dd141cdbafeed5d920c?s=128&d=identicon&r=PG", "display_name": "kanr", "link": "https://stackoverflow.com/users/2129230/kanr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "closed_date": 1483518462, "accepted_answer_id": 41452909, "answer_count": 1, "score": -3, "last_activity_date": 1483479974, "creation_date": 1483479670, "question_id": 41452833, "link": "https://stackoverflow.com/questions/41452833/in-c-how-to-pass-local-function-variable-value-to-another-function-and-print-val", "closed_reason": "Not suitable for this site", "title": "in C how to pass local function variable value to another function and print value without errors", "body": "<pre><code>#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt;\n\nint give_options();\n\nint give_options(){\n\n    printf(\"===== MENU 1 =====\\n\");\n\n    printf(\"&gt; store new customer :\\t\\tenter 1\\n\");\n    printf(\"&gt; view a customer :\\t\\tenter 2\\n\");\n    printf(\"&gt; view all customers :\\t\\tenter 3\\n\");\n    printf(\"&gt; exit program :\\t\\tenter 4\\n \");   \n\n\n    int ipt = malloc(sizeof(int));\n    scanf(\"%d\",&amp;ipt);\n\n    return ipt;\n}\n\n\nint main(){\n    int dec = give_options();\n\n    printf(\"decision is: %d\", dec);     \n\n\n    getchar();\n}\n</code></pre>\n\n<p>Ive started to code in C recently in Ubuntu\nim trying to return the value a local variable of one function and have it passed to another\nfunction. I have read that since local variables are assigned to stack the value will no longer\nexist after function returns, and that I have to allocate memory in heap using malloc.</p>\n\n<p>when I compile I get this warning: </p>\n\n<pre><code>initialization makes integer from pointer without a cast\n[-Wint-conversion] int ipt = malloc(sizeof(int));\n</code></pre>\n\n<p>when I adjust this to int ipt = (int)malloc(sizeof(int)); -I get:</p>\n\n<pre><code>warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]\nint ipt = (int)malloc(sizeof(int));\n</code></pre>\n\n<p>What is the correct thing to do here?</p>\n\n<p>I'm also having trouble with scanf since I switched to coding in Ubuntu.\nI tried a different way, trying to use pointers:</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt;\n\nint* give_options();\n\nint* give_options(){\n\n    printf(\"===== MENU 1 =====\\n\");\n\n    printf(\"&gt; store new customer :\\t\\tenter 1\\n\");\n    printf(\"&gt; view a customer :\\t\\tenter 2\\n\");\n    printf(\"&gt; view all customers :\\t\\tenter 3\\n\");\n    printf(\"&gt; exit program :\\t\\tenter 4\\n \");   \n\n    int* ipt; \n    ipt = malloc(sizeof(int));\n    scanf(\"d\",&amp;ipt);\n\n    return ipt;\n}\n\n\nint main(){\n    int* dec = give_options();\n\n    printf(\"decision is: %d\", dec); \n\n    getchar();\n}\n</code></pre>\n\n<p>compiling this gives me following errors:</p>\n\n<pre><code>warning: format \u2018%d\u2019 expects argument of type \u2018int *\u2019, but argument 2 has type \u2018int **\u2019 [-Wformat=]\n  scanf(\"%d\",&amp;ipt);\n\nwarning: format \u2018%d\u2019 expects argument of type \u2018int\u2019, but argument 2 has type \u2018int *\u2019 [-Wformat=]\n  printf(\"decision is: %d\", dec);\n</code></pre>\n\n<p>which approach is right and which one works?</p>\n"}, {"tags": ["c", "arrays", "performance", "optimization"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1483478292, "post_id": 41452489, "comment_id": 70111364, "body": "If you want speed dont print. Write it to a file or something ..."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1483478295, "post_id": 41452489, "comment_id": 70111365, "body": "Did you mean to use <code>printf()</code> in the second code?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1483478320, "post_id": 41452489, "comment_id": 70111373, "body": "If you&#39;re going to ask for optimizations, always post the compiler options you used to build the code.  If optimizations are not used, your timings you posted are worthless."}, {"owner": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "edited": false, "score": 0, "creation_date": 1483478373, "post_id": 41452489, "comment_id": 70111402, "body": "Any function that puts anything onto the screen will be slow, because it needs to access the screen (and everything in between). If you really need that speed up, construct the whole output as a string before calling <code>printf</code> or similar. But your needs looks suspicious to me. Don&#39;t try to optimize something that will probably turn out to be useless."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "edited": false, "score": 0, "creation_date": 1483478413, "post_id": 41452489, "comment_id": 70111413, "body": "@Nelxiost stdio uses buffering, so it doesn&#39;t access the screen for every character."}, {"owner": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1483478512, "post_id": 41452489, "comment_id": 70111454, "body": "@Barmar It does to an extent. It&#39;s still slow, as pointed out by the question."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1483479016, "post_id": 41452489, "comment_id": 70111710, "body": "If this is for some sort of text output for a game or simulation, you might be better off putting the draw routine into its own thread and perhaps double buffer the grid to remove contention.  This offloads the whole output to a presumably available CPU and leaves the rest for application logic."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483479666, "post_id": 41452489, "comment_id": 70112024, "body": "What are <code>int row(0)</code> etc. supposed to do??"}, {"owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "edited": false, "score": 0, "creation_date": 1483489719, "post_id": 41452489, "comment_id": 70115321, "body": "@Bamar For console output no buffering is used. All is written straight to the screen. Using stderr or stdout is the same when it&#39;s about writing in the console."}, {"owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483537629, "post_id": 41452489, "comment_id": 70136166, "body": "@Olaf   <code>int row(0)</code> is the same as <code>int row = 0</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "edited": false, "score": 0, "creation_date": 1483537684, "post_id": 41452489, "comment_id": 70136201, "body": "@nikau6: That&#39;s not valid C!"}, {"owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483539388, "post_id": 41452489, "comment_id": 70137351, "body": "@Olaf  you&#39;re right. I forgot this post was about C language. It&#39;s valid C++."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1483478752, "post_id": 41452581, "comment_id": 70111571, "body": "He said that printing the entire grid seemed to work, except it didn&#39;t put newlines between the rows. That means there&#39;s no nulls in the middle."}, {"owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1483478862, "post_id": 41452581, "comment_id": 70111635, "body": "I said that if it add a zero at the end of each lines what I propose will work"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1483478915, "post_id": 41452581, "comment_id": 70111664, "body": "Sorry, I misread it, I thought you were saying that if he already did that."}], "tags": [], "owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "is_accepted": false, "score": 2, "last_activity_date": 1483539444, "last_edit_date": 1483539444, "creation_date": 1483478621, "answer_id": 41452581, "question_id": 41452489, "link": "https://stackoverflow.com/questions/41452489/fast-output-of-2d-array-c/41452581#41452581", "title": "Fast Output of 2D Array C", "body": "<p>if you make each of you lines terminate with a '\\0' char, you can do that :</p>\n\n<pre><code>for(int row=0; row&lt;20; ++row)\n{\n    printf(\"%s\\n\", grid[row]);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "edited": false, "score": 0, "creation_date": 1483491434, "post_id": 41452593, "comment_id": 70115687, "body": "If grid is dynamically allocated <code>sizeof(grid[row])</code> will give the size of a pointer. Four or eight bytes depending the system. So in that case the correct answer would be : <code>fwrite(grid[row], sizeof grid[row][0], col, stdout)</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "edited": false, "score": 0, "creation_date": 1483544851, "post_id": 41452593, "comment_id": 70141163, "body": "@nikau6 He described this as a 2D array, not an array of pointers. The fact that <code>printf(&quot;%s&quot;, grid);</code> printed the whole grid supports this (although I suppose it&#39;s possible that the rows were located adjacent to each other when they were dynamically allocated)."}, {"owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "edited": false, "score": 0, "creation_date": 1483545620, "post_id": 41452593, "comment_id": 70141692, "body": "A 2D array can be a 2D array of pointer. And I&#39;m not saying that he&#39;s using a dynamically allocated array, I&#39;m only giving the information that in the case the 2D array is dynamically allocated it&#39;ll not works."}, {"owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "edited": false, "score": 0, "creation_date": 1483545748, "post_id": 41452593, "comment_id": 70141803, "body": "And even if the rows are located adjacent to each other it&#39;ll return the size of a pointer in case its dynamically allocated. Cause grid[n] contains a address not a element. grid[n] contains a address, and grid[n][0] contains the first element of a line."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "edited": false, "score": 0, "creation_date": 1483545863, "post_id": 41452593, "comment_id": 70141872, "body": "I&#39;ve added an addition to my answer that addresses this."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 4, "last_activity_date": 1483545844, "last_edit_date": 1483545844, "creation_date": 1483478679, "answer_id": 41452593, "question_id": 41452489, "link": "https://stackoverflow.com/questions/41452489/fast-output-of-2d-array-c/41452593#41452593", "title": "Fast Output of 2D Array C", "body": "<p>You can write each row at once using fwrite():</p>\n\n<pre><code>for (int row = 0; row &lt; 20; ++row) {\n    fwrite(grid[row], sizeof grid[row], 1, stdout);\n    putchar('\\n');\n}\n</code></pre>\n\n<p>BTW, your code that writes the whole <code>grid</code> using <code>printf(\"%s\", grid)</code> is most likely causing undefined behavior. <code>%s</code> requires the argument to be a pointer to a null-terminated string, and <code>grid</code> presumably doesn't have a null at the end. If it seems to be working it's just accidental, because there happened to be a null byte in the memory following <code>grid</code>.</p>\n\n<p>Note that this solution only works for an actual 2-D array of <code>char</code>. If it's an array of pointers, you can replace <code>sizeof grid[row]</code> with a variable or macro that specifies the size of each row pointed to by <code>grid[row]</code> (or just a hard--coded <code>30</code> as in the question).</p>\n"}], "owner": {"reputation": 11, "user_id": 7371299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37ece67ae5e977270b65e8ab2895458c?s=128&d=identicon&r=PG&f=1", "display_name": "C23", "link": "https://stackoverflow.com/users/7371299/c23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 41452593, "answer_count": 2, "score": 0, "last_activity_date": 1483545844, "creation_date": 1483478150, "last_edit_date": 1483479361, "question_id": 41452489, "link": "https://stackoverflow.com/questions/41452489/fast-output-of-2d-array-c", "title": "Fast Output of 2D Array C", "body": "<p>I'm looking to use a method of outputting a 2D array that is optimized for speed. currently I'm using:</p>\n\n<pre><code>for (int row(0); row &lt; 20; ++row)\n    {\n        for (int col(0); col &lt; 30; ++col)\n        {\n            putchar(grid[row][col]);\n        }\n        putchar('\\n');\n    }\n</code></pre>\n\n<p>this works fine however after testing a few things I noticed that using</p>\n\n<pre><code>printf(\"%s\", grid);\n</code></pre>\n\n<p>I received a massive speed boost, however this was formatted incorrectly as it just output a long string of chars for my array rather than the 30x20 grid I want. I'm wondering if there is any method to get the speed shown with the <code>printf</code> line that formats the grid correctly.</p>\n\n<p>For reference I get about 33ms when using the first method and 1.5ms with the second method.</p>\n"}, {"tags": ["c", "function", "winapi", "input"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1483478065, "post_id": 41452458, "comment_id": 70111265, "body": "Just try it. Come back when you have tried something and have a specific problem. And if in doubt, read the man page/reference for that function. It will tell you exactly what parameters it accepts and what the parameters mean (hint: <code>getche</code> does not take any parameters)."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1483478560, "post_id": 41452458, "comment_id": 70111478, "body": "You need to include an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> showing what you&#39;ve already tried ...but that&#39;s not how <code>getche()</code> works anyway."}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1483480293, "post_id": 41452458, "comment_id": 70112266, "body": "Can&#39;t you just use <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_scanf.htm\" rel=\"nofollow noreferrer\">scanf</a>? <a href=\"http://stackoverflow.com/a/1412524/5601284\">Example here</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1483486956, "post_id": 41452458, "comment_id": 70114595, "body": "@BrandonIbbotson no: &quot;I don&#39;t want the user to type the &#39;enter&#39; key&quot;."}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1483488418, "post_id": 41452458, "comment_id": 70115017, "body": "How are you getting your input then? Maybe this will help: <a href=\"http://stackoverflow.com/questions/6922253/scanf-on-non-stdin-input\">Scanf on non-stdin input</a>."}], "answers": [{"comments": [{"owner": {"reputation": 345, "user_id": 7350448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/649078feaf1e14298ad543d388f0a4f7?s=128&d=identicon&r=PG&f=1", "display_name": "Ma250", "link": "https://stackoverflow.com/users/7350448/ma250"}, "edited": false, "score": 0, "creation_date": 1483478260, "post_id": 41452498, "comment_id": 70111349, "body": "I tried, but it got messier when I tried to check if the parameters are meeting the conditions."}, {"owner": {"reputation": 46, "user_id": 7366855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3a6545ff185c01c0d6f5a9601ea234?s=128&d=identicon&r=PG&f=1", "display_name": "Majki", "link": "https://stackoverflow.com/users/7366855/majki"}, "reply_to_user": {"reputation": 345, "user_id": 7350448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/649078feaf1e14298ad543d388f0a4f7?s=128&d=identicon&r=PG&f=1", "display_name": "Ma250", "link": "https://stackoverflow.com/users/7350448/ma250"}, "edited": false, "score": 1, "creation_date": 1483478621, "post_id": 41452498, "comment_id": 70111508, "body": "Then make a 4-elements bool array. After every getch() check if the read parameter is okay. If it&#39;s alright then fill appropriate id of your array with &#39;true&#39;, otherwise with &#39;false&#39;."}, {"owner": {"reputation": 345, "user_id": 7350448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/649078feaf1e14298ad543d388f0a4f7?s=128&d=identicon&r=PG&f=1", "display_name": "Ma250", "link": "https://stackoverflow.com/users/7350448/ma250"}, "edited": false, "score": 0, "creation_date": 1483543222, "post_id": 41452498, "comment_id": 70140022, "body": "I&#39;m not allowed to make any arrays though"}], "tags": [], "owner": {"reputation": 46, "user_id": 7366855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3a6545ff185c01c0d6f5a9601ea234?s=128&d=identicon&r=PG&f=1", "display_name": "Majki", "link": "https://stackoverflow.com/users/7366855/majki"}, "is_accepted": false, "score": 1, "last_activity_date": 1483480570, "last_edit_date": 1483480570, "creation_date": 1483478190, "answer_id": 41452498, "question_id": 41452458, "link": "https://stackoverflow.com/questions/41452458/is-it-possible-to-collect-multiple-inputs-in-one-getche-function/41452498#41452498", "title": "Is it possible to collect multiple inputs in one getche() function?", "body": "<p>Couldn't you just use a loop with appropriate conditions and getch() function? It might turn out to be easier.</p>\n\n<pre><code> int l = 0;\n while (l &lt; 4)\n {\n   x = getch();\n  // your conditions\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "is_accepted": true, "score": 0, "last_activity_date": 1483543816, "creation_date": 1483543816, "answer_id": 41467469, "question_id": 41452458, "link": "https://stackoverflow.com/questions/41452458/is-it-possible-to-collect-multiple-inputs-in-one-getche-function/41467469#41467469", "title": "Is it possible to collect multiple inputs in one getche() function?", "body": "<p>use a do/while loop to get the digits accepting only 1 through 6. A while loop to concatenate the four digits into an integer.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n//#include &lt;conio.h&gt;\n\nint main(void)\n{\n    int num = 0;\n    int digit = 0;\n    int each = 0;\n\n    printf(\"Type a four digit number using only 1 through 6\\n\");\n    while ( each &lt; 4) {\n        do {\n            digit = getchar ( );\n            //digit = getch ( );//getch does not echo the typed character\n            if ( digit == EOF) {\n                fprintf ( stderr, \"EOF\\n\");\n                return 1;\n            }\n        } while ( digit &lt; '1' || digit &gt; '6');//loop if character is NOT 1 to 6\n        //putch ( digit);//echo the character\n        each++;\n        num *= 10;\n        num += digit - '0';\n    }\n    printf(\"the number is %d\\n\", num);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 7350448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/649078feaf1e14298ad543d388f0a4f7?s=128&d=identicon&r=PG&f=1", "display_name": "Ma250", "link": "https://stackoverflow.com/users/7350448/ma250"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "accepted_answer_id": 41467469, "answer_count": 2, "score": -1, "last_activity_date": 1483543816, "creation_date": 1483477924, "last_edit_date": 1483478150, "question_id": 41452458, "link": "https://stackoverflow.com/questions/41452458/is-it-possible-to-collect-multiple-inputs-in-one-getche-function", "title": "Is it possible to collect multiple inputs in one getche() function?", "body": "<p>I'm planning a function that takes the user's input (4 integers) and checks if each integer is bigger than 1 and smaller than 6, I wanted something simple, and thought that if the function '<strong><em>getche()</em></strong>' (<em>I want to use this particular function because I don't want the user to type the 'enter' key after he gives the input</em>) could get four integers in one code.</p>\n\n<p>I want to avoid this(if possible):</p>\n\n<pre><code>int num1 = 0, num2 = 0, num3 = 0, num4 = 0;\nnum1 = getche();\nnum2 = getche(); ...\n</code></pre>\n\n<p>And I was thinking if something like this is possible:</p>\n\n<pre><code>int num = 0;\nnum = getche(4)\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "arrays", "static"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1483477654, "post_id": 41452363, "comment_id": 70111117, "body": "Please describe the current behaviour of your program. Is it crashing? Getting wrong output (what exactly)? And have you used basic debugging techniques such as using a debugger to trace the execution of your program?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1483477728, "post_id": 41452363, "comment_id": 70111151, "body": "And please take the time to format your code with correct indentation to make it readable."}, {"owner": {"reputation": 113, "user_id": 7214316, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1169686309792072/picture?type=large", "display_name": "Nikita Gusev", "link": "https://stackoverflow.com/users/7214316/nikita-gusev"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1483477892, "post_id": 41452363, "comment_id": 70111207, "body": "@kaylum it doesnt crash, it just prints in wrong way, and i get not understandable numbers"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1483477903, "post_id": 41452363, "comment_id": 70111212, "body": "<code>printf(&quot;%d &quot;,a[n-i+1][j]);</code> that should probably be <code>printf(&quot;%d &quot;,a[i][n-j-1]);</code>"}, {"owner": {"reputation": 113, "user_id": 7214316, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1169686309792072/picture?type=large", "display_name": "Nikita Gusev", "link": "https://stackoverflow.com/users/7214316/nikita-gusev"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1483478142, "post_id": 41452363, "comment_id": 70111295, "body": "@kaylum yes, thank you! it should be  <code>if(i%2 != 0){             printf(&quot;%d &quot;,a[i][n-j-1]);             }               else {                     printf(&quot;%d &quot;,a[i][j]);                 }</code>"}, {"owner": {"reputation": 113, "user_id": 7214316, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1169686309792072/picture?type=large", "display_name": "Nikita Gusev", "link": "https://stackoverflow.com/users/7214316/nikita-gusev"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1483478219, "post_id": 41452363, "comment_id": 70111334, "body": "@kaylum can you give me an idea,please, how i can fill an array in spiral way?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1483481876, "post_id": 41452363, "comment_id": 70112966, "body": "<code>j&lt;m</code> --&gt; <code>j&lt;n</code>"}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1483490200, "post_id": 41452363, "comment_id": 70115408, "body": "<code>print an array in order to the even strings print backwards but the not even string in usual way</code>  This is not correct English.  Can you reformulate ?"}], "answers": [{"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1483575840, "post_id": 41454277, "comment_id": 70156905, "body": "+1 for a neat solution. One question: why do you use, e.g. <code>Walker go_forward(Walker *w);</code>? Since the functions do not modify the <code>Walker</code> through the pointer, why not just pass in a <code>Walker</code> (i.e., <code>Walker go_forward(Walker walker);</code>) and work with the copy before returning it?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1483601320, "post_id": 41454277, "comment_id": 70164155, "body": "@DavidBowling yep, your doubt is reasonable. It seems that it will be changed as it is being passed with a pointer. However, it will not be changed as the first copy will be made. It would be a good idea to add <code>const</code> to indicate that it is not changed in the function. (I&#39;ll do it later.)"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1483601387, "post_id": 41454277, "comment_id": 70164199, "body": "The reason for using the pointer is, Passing with a pointer can reduce the use of the stack.  Either way it&#39;s not a big reason."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1483602179, "post_id": 41454277, "comment_id": 70164565, "body": "Actually it is totally useless. It&#39;s like a residue of a haphazard code. Again, I decided to change according to your recommendation. Thanks."}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 2, "last_activity_date": 1483602569, "last_edit_date": 1483602569, "creation_date": 1483488276, "answer_id": 41454277, "question_id": 41452363, "link": "https://stackoverflow.com/questions/41452363/even-strings-of-an-array-in-backwards-way/41454277#41454277", "title": "even strings of an array in backwards way", "body": "<p>example of filling an array in spiral </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\ntypedef enum {\n    N, W, S, E\n} Dir;\n\ntypedef struct walker {\n    int row, col;\n    Dir dir;\n    int steps;\n} Walker;\n\nWalker go_forward(Walker walker){\n    switch(walker.dir){\n    case N:\n        walker.row -= 1;\n        break;\n    case W:\n        walker.col -= 1;\n        break;\n    case S:\n        walker.row += 1;\n        break;\n    case E:\n        walker.col += 1;\n        break;\n    }\n    return walker;\n}\n\nWalker proceed_left(Walker walker){\n    walker.dir = (walker.dir + 1) % 4;//turn left\n    walker = go_forward(walker);\n    return walker;\n}\n\nint main(void){\n    int n;\n    for(;;){\n        printf(\"Enter n(0 &lt; n &lt; 10): \");fflush(stdout);\n        int ret_s = scanf(\"%d\", &amp;n);\n        if(ret_s == 1){\n            if(0 &lt; n &amp;&amp; n &lt; 10)\n                break;\n        } else if(ret_s == 0)\n            while(getchar() != '\\n');//clear input\n        else //if(ret_s == EOF)\n            return 0;\n    }\n    int a[n][n];\n    memset(a, 0, sizeof(a));//zero clear\n    Walker walker = { .row = n / 2, .col = n / 2, .dir = E, .steps = 0 };\n    for(;;){\n        walker.steps += 1;\n        a[walker.row][walker.col] = walker.steps;\n        if(walker.steps == n * n)//goal\n            break;\n        Walker left = proceed_left(walker);\n        if(a[left.row][left.col] == 0)//left side is vacant\n            walker = left;\n        else\n            walker = go_forward(walker);\n    }\n    for(int r = 0; r &lt; n; ++r){\n        for(int c = 0; c &lt; n; ++c){\n            if(c)\n                putchar(' ');\n            printf(\"%2d\", a[r][c]);\n        }\n        puts(\"\");\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": true, "score": 0, "last_activity_date": 1483493996, "creation_date": 1483493996, "answer_id": 41454941, "question_id": 41452363, "link": "https://stackoverflow.com/questions/41452363/even-strings-of-an-array-in-backwards-way/41454941#41454941", "title": "even strings of an array in backwards way", "body": "<p>Here is a program that includes the function <code>spiral_fill()</code>, which fills a square array with sequential <code>int</code>s, starting from 1 at the center, and proceeding in a counter-clockwise spiral. The function fills the array by first storing a <code>1</code> in the center, then filling the L-shaped region above and to the left, then below and to the right, and continuing until the array is filled.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define ARR_SZ  3\n\nvoid spiral_fill(size_t arr_sz, int arr[arr_sz][arr_sz]);\nvoid print_arr(size_t rows, size_t cols, int arr[rows][cols]);\n\nint main(void)\n{\n    int test_arr[ARR_SZ][ARR_SZ];\n\n    spiral_fill(ARR_SZ, test_arr);\n    print_arr(ARR_SZ, ARR_SZ, test_arr);\n\n    return 0;\n}\n\nvoid spiral_fill(size_t arr_sz, int arr[arr_sz][arr_sz])\n{\n    int center = arr_sz / 2;\n    int current = center;\n    int start_col, stop_col, start_row, stop_row;\n    size_t layer = 0;\n    int next_val = 1;\n\n    arr[center][center] = next_val++;\n    ++layer;\n\n    while (layer &lt; arr_sz) {\n        if (layer % 2) {            // For odd layers, fill upper L\n            current -= layer;\n\n            start_col = center + layer / 2;\n            stop_col = center - (layer + 1) / 2;\n            for (int j = start_col; j &gt;= stop_col; j--) {\n                arr[current][j] = next_val++;\n            }\n            start_row = center - layer / 2;\n            stop_row = center + layer / 2;\n            for (int i = start_row; i &lt;= stop_row; i++) {\n                arr[i][current] = next_val++;\n            }\n            ++layer;\n        } else {                    // For even layers, fill lower L\n            current += layer;\n\n            start_col = center - layer / 2;\n            stop_col = center + layer / 2;\n            for (int j = start_col; j &lt;= stop_col; j++) {\n                arr[current][j] = next_val++;\n            }\n            start_row = center + (layer - 1) / 2;\n            stop_row = center - layer / 2;\n            for (int i = start_row; i &gt;= stop_row ; i--) {\n                arr[i][current] = next_val++;\n            }\n            ++layer;\n        }\n    }\n}\n\nvoid print_arr(size_t rows, size_t cols, int arr[rows][cols])\n{\n    for (size_t i = 0; i &lt; rows; i++) {\n        for (size_t j = 0; j &lt; cols; j++) {\n            printf(\"%-5d \", arr[i][j]);\n        }\n        putchar('\\n');\n    }\n}\n</code></pre>\n\n<p>Here is a 3X3 array:</p>\n\n<pre><code>3     2     9     \n4     1     8     \n5     6     7 \n</code></pre>\n\n<p>Here is a 6X6 array:</p>\n\n<pre><code>31    30    29    28    27    26    \n32    13    12    11    10    25    \n33    14    3     2     9     24    \n34    15    4     1     8     23    \n35    16    5     6     7     22    \n36    17    18    19    20    21 \n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 7214316, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1169686309792072/picture?type=large", "display_name": "Nikita Gusev", "link": "https://stackoverflow.com/users/7214316/nikita-gusev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 41454941, "answer_count": 2, "score": -1, "last_activity_date": 1483602569, "creation_date": 1483477551, "last_edit_date": 1483486957, "question_id": 41452363, "link": "https://stackoverflow.com/questions/41452363/even-strings-of-an-array-in-backwards-way", "title": "even strings of an array in backwards way", "body": "<p>I am trying to print an array in order to the even strings print  backwards but the not even string in usual way. What do I do wrong with it?\nFor example:</p>\n\n<pre><code>1 0 3\n9 7 3\n5 7 8\n</code></pre>\n\n<p>and I need it:</p>\n\n<pre><code>1 0 3\n3 7 9\n5 7 8\n</code></pre>\n\n<p>But I also have a problem with filling an array in spiral way; how should I take a center of an array? Please, could you give an idea \u2014 how should I do this? And the array must be square. For example:</p>\n\n<pre><code>1 2 3\n4 5 6\n7 8 9\n</code></pre>\n\n<p>but I need it:</p>\n\n<pre><code>3 2 9\n4 1 8\n5 6 7\n</code></pre>\n\n<p>My code so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main()\n{\n    int a[10][10],n,m,i,j;\n\n    printf(\"Enter m: \");\n    scanf(\"%d\",&amp;m);\n    printf(\"Enter n: \");\n    scanf(\"%d\",&amp;n);\n    for(i=0;i&lt;m;i++){\n            for(j=0;j&lt;m;j++){\n                    printf(\"a[%d][%d]: \",i+1,j+1);\n       scanf(\"%d\",&amp;a[i][j]);\n            }\n    }\n\n// in usual order\n    for(i=0;i&lt;m;i++){\n            for(j=0;j&lt;n;j++){\n            printf(\"%d \",a[i][j]);\n                }\n                printf(\"\\n\");\n        }\n\n\n        for(i=0;i&lt;m;i++){\n            for(j=0;j&lt;n;j++){\n            if(i%2 != 0){\n            printf(\"%d \",a[i][j]);\n            }\n              else {\n                    printf(\"%d \",a[n-i+1][j]);\n                }\n            }\n            printf(\"\\n\");\n        }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "matrix", "convolution"], "comments": [{"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "edited": false, "score": 0, "creation_date": 1483477533, "post_id": 41452226, "comment_id": 70111072, "body": "This code assumes all values of P are initialized to zero when the function is called."}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "edited": false, "score": 1, "creation_date": 1483477931, "post_id": 41452226, "comment_id": 70111222, "body": "What is the point of mm and nn? If you just use m and n, it seems like it would work."}, {"owner": {"reputation": 364, "user_id": 4949261, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/146fff98778cee8ed270504677e30de2?s=128&d=identicon&r=PG&f=1", "display_name": "Pleasant94", "link": "https://stackoverflow.com/users/4949261/pleasant94"}, "reply_to_user": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "edited": false, "score": 0, "creation_date": 1483478160, "post_id": 41452226, "comment_id": 70111306, "body": "Yes, P is initialized to 0; I feel stupid but.... I think it works. I&#39;m going to check the output values and close the question. Thank you! EDIT: It works!"}], "answers": [{"tags": [], "owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "is_accepted": true, "score": 3, "last_activity_date": 1483478401, "creation_date": 1483478401, "answer_id": 41452549, "question_id": 41452226, "link": "https://stackoverflow.com/questions/41452226/c-2d-convolution/41452549#41452549", "title": "C - 2D Convolution", "body": "<blockquote>\n  <p>The values of the kernel that I need are the lower right part; instead, that code picks the upper left part and I can't write the code to check the right values.</p>\n</blockquote>\n\n<p>This is because you are flipping the mask indices when you compute <code>mm</code> and <code>nn</code>. Simply remove those lines and use <code>m</code> and <code>n</code> to index the mask:</p>\n\n<pre><code>if (ii &gt;= 0 &amp;&amp; ii &lt; WIDTH1 &amp;&amp; jj &gt;= 0 &amp;&amp; jj &lt; WIDTH2)\n    P[i][j] += N[ii][jj] * M[m][n];\n</code></pre>\n"}], "owner": {"reputation": 364, "user_id": 4949261, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/146fff98778cee8ed270504677e30de2?s=128&d=identicon&r=PG&f=1", "display_name": "Pleasant94", "link": "https://stackoverflow.com/users/4949261/pleasant94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8146, "favorite_count": 0, "accepted_answer_id": 41452549, "answer_count": 1, "score": 4, "last_activity_date": 1483478401, "creation_date": 1483477018, "last_edit_date": 1483477391, "question_id": 41452226, "link": "https://stackoverflow.com/questions/41452226/c-2d-convolution", "title": "C - 2D Convolution", "body": "<p>I'm trying to do in C language a convolution of matrices.</p>\n\n<p>I've tried something but cannot do it properly.</p>\n\n<p><code>N[WIDTH1][WIDTH2]</code> is the input matrix, <code>M[MASK_WIDTH1][MASK_WIDTH2]</code> is the kernel matrix, <code>P[][]</code> the output matrix.</p>\n\n<p>First attempt:</p>\n\n<pre><code>void convolution_2D(int N[][WIDTH2], int M[][MASK_WIDTH2], int P[][WIDTH2]) {\n\n// find center position of kernel (half of kernel size)\nint kCenterX = MASK_WIDTH2 / 2;\nint kCenterY = MASK_WIDTH1 / 2;\n\nfor (int i = 0; i &lt; WIDTH1; ++i)              // rows\n{\n    for (int j = 0; j &lt; WIDTH2; ++j)          // columns\n    {\n        for (int m = 0; m &lt; MASK_WIDTH1; ++m)     // kernel rows\n        {\n            int mm = MASK_WIDTH1 - 1 - m;      // row index\n\n            for (int n = 0; n &lt; MASK_WIDTH2; ++n) // kernel columns\n            {\n                int nn = MASK_WIDTH2 - 1 - n;  // column index\n\n                // index of input signal, used for checking boundary\n                int ii = i + (m - kCenterY);\n                int jj = j + (n - kCenterX);\n\n                // ignore input samples which are out of bound\n                if (ii &gt;= 0 &amp;&amp; ii &lt; WIDTH1 &amp;&amp; jj &gt;= 0 &amp;&amp; jj &lt; WIDTH2)\n                    P[i][j] += N[ii][jj] * M[mm][nn];\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The problem is that the boundary values are wrong, because I pick the wrong values of the M matrix. For example, for <code>P[0][0]</code> the result should be, for <code>N</code> and <code>P</code> 5x5 and <code>M</code> 3x3:</p>\n\n<pre><code>P[0][0] = N[0][0]*M[1][1] + N[0][1]*M[1][2] + N[1][0]*M[2][1] + N[1][1]*M[2][2];\n</code></pre>\n\n<p>The values of the kernel that I need are the lower right part; instead, that code picks the upper left part and I can't write the code to check the right values.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1483475837, "post_id": 41451886, "comment_id": 70110244, "body": "For a start is there a problem with the space bar?. Number 2 you do not need to cast malloc as it is bad."}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1483476593, "post_id": 41451886, "comment_id": 70110619, "body": "@EdHeal on some compilers with the non-permissive flag you can&#39;t compile without a cast."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1483476706, "post_id": 41451886, "comment_id": 70110663, "body": "See <a href=\"https://stackoverflow.com/questions/750178/is-it-a-good-idea-to-typedef-pointers\">Is it a good idea to <code>typedef</code> pointers?</a> \u2014 short answer &quot;No&quot;, but that&#39;s what you&#39;re doing, whether you realized it or not."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 2, "creation_date": 1483476772, "post_id": 41451886, "comment_id": 70110692, "body": "@kabanus: Only C++ compilers (perhaps those masquerading as C compilers) object to the absence of a cast.  This might be more of a problem on Windows with MS Visual Studio than on most other platforms."}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1483476879, "post_id": 41451886, "comment_id": 70110739, "body": "@JonathanLeffler Thanks. I assumed a such, but this happens commonly enough for so I just skip these &#39;details&#39;, though your right."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1483476882, "post_id": 41452106, "comment_id": 70110742, "body": "It matters.  Showing people C++ code for a C question confuses people learning C and using a real C compiler.  Actually, it also confuses those who are learning C and using a C++ compiler.  C and C++ are two very different languages.  You should essentially never write C++ code in an answer to a C question on SO."}, {"owner": {"reputation": 589, "user_id": 915783, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d66b5abf197657a0e012a3e5c4f4adf1?s=128&d=identicon&r=PG", "display_name": "user915783", "link": "https://stackoverflow.com/users/915783/user915783"}, "edited": false, "score": 0, "creation_date": 1483477539, "post_id": 41452106, "comment_id": 70111074, "body": "Thanks guys. I had never seen this format , so although I kind of guessed its usage but confirmation like above is useful."}], "tags": [], "owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "is_accepted": true, "score": 3, "last_activity_date": 1483478105, "last_edit_date": 1483478105, "creation_date": 1483476540, "answer_id": 41452106, "question_id": 41451886, "link": "https://stackoverflow.com/questions/41451886/structure-pointer-in-structure-definition/41452106#41452106", "title": "Structure pointer in structure definition", "body": "<p>In case it's not clear, <strong>pa1 is not a pointer to an a1 struct</strong>. What you're doing with the typedef is just defining two types - one a type that is pointer to your struct (p1=a1*), and one the struct itself (a1). For me this works without a problem:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct _a1{\n    int d1;\n} a1, *p1;\n\nint main() {\n    p1 p2 = NULL;\n    p2 = (p1)malloc(sizeof(a1));\n    printf(\"%p\\n\",p2);\n    return 0;\n}\n</code></pre>\n\n<p>And I suggest reading <a href=\"https://stackoverflow.com/questions/750178/is-it-a-good-idea-to-typedef-pointers\">Is it a good idea to <code>typedef</code> pointers?</a> \u2014 I wholeheartedly agree.</p>\n"}], "owner": {"reputation": 589, "user_id": 915783, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d66b5abf197657a0e012a3e5c4f4adf1?s=128&d=identicon&r=PG", "display_name": "user915783", "link": "https://stackoverflow.com/users/915783/user915783"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 41452106, "answer_count": 1, "score": 1, "last_activity_date": 1483478105, "creation_date": 1483475634, "last_edit_date": 1483476632, "question_id": 41451886, "link": "https://stackoverflow.com/questions/41451886/structure-pointer-in-structure-definition", "title": "Structure pointer in structure definition", "body": "<p>I have a code like this in C:   </p>\n\n<pre><code>typedef struct _a1{\n  int d1;\n} a1, *pa1;\n</code></pre>\n\n<p>I can create another pointer and use it like:</p>\n\n<pre><code>a1 *pa2 = NULL;\npa2 = (a1*)malloc(sizeof(a1));\n</code></pre>\n\n<p>Trying the same for \"pa1\" fails. How do I use pointer \"pa1\"?</p>\n"}, {"tags": ["c", "linux", "locking", "mutex"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1483473523, "post_id": 41451092, "comment_id": 70109138, "body": "my first guess is a dependency problem, not a mutex problem. When you create the threads, you have no idea what order they will be executed in. For example, I see the fourth thread does <code>W=pow(Y,Z);</code> and the second thread does <code>Y=D+E;</code>. <code>Y</code> is uninitialized, so if the fourth thread executes first you have undefined behavior. I&#39;m guessing a closer examination would reveal similar such problems. Also not sure from your question which results apply to which threads."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 3, "creation_date": 1483473567, "post_id": 41451092, "comment_id": 70109165, "body": "If the threads need to be executed one at a time in a particular order, you shouldn&#39;t be using threads."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 2, "creation_date": 1483473665, "post_id": 41451092, "comment_id": 70109204, "body": "and just in general, this is a terrible use case for threads. Each one tries to acquire a mutex as soon as it runs, does work in a critical section, then finishes. There is no parallelism at all here, and I would bet this runs slower than a single-threaded app due to spinup time for the threads. If you&#39;re simply looking for proof-of-concept thread example, there are far better scenarios than this."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1483473963, "post_id": 41451092, "comment_id": 70109355, "body": "@yano whether the program&#39;s behavior is defined does not depend on the order in which the threads run, nor indeed on anything about any particular execution of the program.  It contains data races, and that is enough for UB in and of itself."}], "answers": [{"tags": [], "owner": {"reputation": 407, "user_id": 6483012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ccb6ec0120557d8522de07d5f36d900?s=128&d=identicon&r=PG&f=1", "display_name": "Maciej D\u0142ugoszek", "link": "https://stackoverflow.com/users/6483012/maciej-d%c5%82ugoszek"}, "is_accepted": false, "score": 1, "last_activity_date": 1483474539, "creation_date": 1483474539, "answer_id": 41451617, "question_id": 41451092, "link": "https://stackoverflow.com/questions/41451092/could-not-solve-this-error-mutex-in-c-and-the-lock-problems/41451617#41451617", "title": "could not solve this error: mutex in c and the lock problems", "body": "<p>As you can see from the output of the program the situations in which the result differ are when the threads executed in the order you probably did not expect them to.\nFor example </p>\n\n<pre><code>first Thread\nthe result in this thread : 360.000000\n\nsec Thread\nthe result in this thread : 15.000000\n\nthird Thread\nthe result in this thread : 2.000000\n\nfourth Thread\nthe result in this thread : 225.000000\n\nfifth Thread\nthe result in this thread : 0.017778\n\n______________________________________________\nTHE FINAL RESULT = 360.017792\n</code></pre>\n\n<p>In this case all threads executed in expected order and the result is good.</p>\n\n<p>On the other hand , here they did not and result is bad :</p>\n\n<pre><code>first Thread\nthe result in this thread : 360.000000\n\nsec Thread\nthe result in this thread : 15.000000\n\nfifth Thread\nthe result in this thread : inf\n\nthird Thread\nthe result in this thread : 2.000000\n\nfourth Thread\nthe result in this thread : 225.000000\n\n______________________________________________\nTHE FINAL RESULT = inf\n</code></pre>\n\n<p>The truth is, generally you cannot predict which thread will be next to lock the given mutex. Furthermore in this situation the threads are just useless, because threads are used in order to do some work \"simultaneously\", but here they do not. You could just run the functions one after another from <code>main()</code> function </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7371012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3939f1a1e028c4cce9088421ef0fb63?s=128&d=identicon&r=PG&f=1", "display_name": "hazem", "link": "https://stackoverflow.com/users/7371012/hazem"}, "is_accepted": false, "score": 0, "last_activity_date": 1483516481, "creation_date": 1483516481, "answer_id": 41458783, "question_id": 41451092, "link": "https://stackoverflow.com/questions/41451092/could-not-solve-this-error-mutex-in-c-and-the-lock-problems/41458783#41458783", "title": "could not solve this error: mutex in c and the lock problems", "body": "<p>i have solved it and it was pretty easy</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/syscall.h&gt;\n#include &lt;sched.h&gt;\n#define _GNU_SOURCE\n#include&lt;math.h&gt;\n#include &lt;unistd.h&gt;\npthread_mutex_t mutex;\n\nfloat B=10;\nfloat C=12;\nfloat D=2;\nfloat E=13;\nfloat F=4;\nfloat G=2;\nfloat X,Y,Z,W,V;\nfloat A;\n// author Hazem Galal\nvoid *t1(void *param);\nvoid *t2(void *param);\nvoid *t3(void *param);\nvoid *t4(void *param);\nvoid *t5(void *param);\n\n\nint main(int argc, char *argv[])\n{\n\n\n\n    int num_of_args ;\n    pthread_t tid_1;\n        pthread_t tid_2;\n        pthread_t tid_3;\n    pthread_t tid_4;\n    pthread_t tid_5;\n\n    pthread_mutex_init(&amp;mutex,NULL);\n    pthread_mutex_lock(&amp;mutex);\n    pthread_create(&amp;tid_1, NULL, t1, NULL);\n    pthread_mutex_lock(&amp;mutex);\n    pthread_create(&amp;tid_2, NULL, t2, NULL);\n    pthread_mutex_lock(&amp;mutex);\n    pthread_create(&amp;tid_3, NULL, t3, NULL);\n    pthread_mutex_lock(&amp;mutex);\n    pthread_create(&amp;tid_4, NULL, t4, NULL);\n    pthread_mutex_lock(&amp;mutex);\n    pthread_create(&amp;tid_5, NULL, t5, NULL);\n\n\n\n\n    pthread_join(tid_1, NULL);\n    pthread_join(tid_2, NULL);\n    pthread_join(tid_3, NULL);\n    pthread_join(tid_4, NULL);\n    pthread_join(tid_5, NULL);\n\n    A=X+V;  \n\n    printf(\"______________________________________________\\n\");\n    printf(\"THE FINAL RESULT = %f\\n\",A);\n        pthread_mutex_destroy(&amp;mutex);\n\n    return(0);\n}\n\nvoid *t1(void *param)\n{       \n\n\n    printf(\"first Thread\\n\");\n    X=3*B*C;\n    printf(\"the result in this thread : %f\\n\\n\",X);\n\n    pthread_mutex_unlock(&amp;mutex);\n\n    pthread_exit(NULL);\n}\nvoid *t2(void *param)\n{       \n\n\n    printf(\"sec Thread\\n\");\n        Y=D+E;          \n    printf(\"the result in this thread : %f\\n\\n\",Y);\n\n    pthread_mutex_unlock(&amp;mutex);\n\n    pthread_exit(NULL);\n}\nvoid *t3(void *param)\n{       \n\n\n    printf(\"third Thread\\n\");\n        Z=F-G;\n    printf(\"the result in this thread : %f\\n\\n\",Z);\n\n    pthread_mutex_unlock(&amp;mutex);\n\n    pthread_exit(NULL);\n}\nvoid *t4(void *param)\n{       \n\n\n    printf(\"fourth Thread\\n\");\n        W=pow(Y,Z);\n    printf(\"the result in this thread : %f\\n\\n\",W);\n\n    pthread_mutex_unlock(&amp;mutex);\n\n    pthread_exit(NULL);\n}\nvoid *t5(void *param)\n{              \n\n\n    printf(\"fifth Thread\\n\");\n        V=4/W;\n    printf(\"the result in this thread : %f\\n\\n\",V);\n\n    pthread_mutex_unlock(&amp;mutex);\n\n    pthread_exit(NULL);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7371012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3939f1a1e028c4cce9088421ef0fb63?s=128&d=identicon&r=PG&f=1", "display_name": "hazem", "link": "https://stackoverflow.com/users/7371012/hazem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1483516481, "creation_date": 1483472300, "last_edit_date": 1483473784, "question_id": 41451092, "link": "https://stackoverflow.com/questions/41451092/could-not-solve-this-error-mutex-in-c-and-the-lock-problems", "title": "could not solve this error: mutex in c and the lock problems", "body": "<p>My pthreads program is producing inconsistent results:</p>\n\n<ol>\n<li><p>inf</p></li>\n<li><p>364.000000</p></li>\n<li><p>360.017792 (the right sol)</p></li>\n</ol>\n\n<p>I therefore presume I have a problem with locking, but I cannot figure out where or exactly how I should use a mutex to resolve the problem.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/syscall.h&gt;\n#include &lt;sched.h&gt;\n#define _GNU_SOURCE\n#include&lt;math.h&gt;\n#include &lt;unistd.h&gt;\npthread_mutex_t mutex;\n\nfloat B=10;\nfloat C=12;\nfloat D=2;\nfloat E=13;\nfloat F=4;\nfloat G=2;\nfloat X,Y,Z,W,V;\nfloat A;\n\nvoid *t1(void *param);\nvoid *t2(void *param);\nvoid *t3(void *param);\nvoid *t4(void *param);\nvoid *t5(void *param);\n\n\nint main(int argc, char *argv[])\n{\n\n\n\n    int num_of_args ;\n    pthread_t tid_1;\n        pthread_t tid_2;\n        pthread_t tid_3;\n    pthread_t tid_4;\n    pthread_t tid_5;\n\n    pthread_mutex_init(&amp;mutex,NULL);\n\n    pthread_create(&amp;tid_1, NULL, t1, NULL);\n    pthread_create(&amp;tid_2, NULL, t2, NULL);\n    pthread_create(&amp;tid_3, NULL, t3, NULL);\n    pthread_create(&amp;tid_4, NULL, t4, NULL);\n    pthread_create(&amp;tid_5, NULL, t5, NULL);\n\n\n\n\n    pthread_join(tid_1, NULL);\n    pthread_join(tid_2, NULL);\n    pthread_join(tid_3, NULL);\n    pthread_join(tid_4, NULL);\n    pthread_join(tid_5, NULL);\n\n    A=X+V;  \n\n    printf(\"______________________________________________\\n\");\n    printf(\"THE FINAL RESULT = %f\\n\",A);\n        pthread_mutex_destroy(&amp;mutex);\n\n    return(0);\n}\n\nvoid *t1(void *param)\n{       \n        pthread_mutex_lock(&amp;mutex);\n\n    printf(\"first Thread\\n\");\n    X=3*B*C;\n    printf(\"the result in this thread : %f\\n\\n\",X);\n\n    pthread_mutex_unlock(&amp;mutex);\n\n    pthread_exit(NULL);\n}\nvoid *t2(void *param)\n{       \n        pthread_mutex_lock(&amp;mutex);\n\n    printf(\"sec Thread\\n\");\n        Y=D+E;          \n    printf(\"the result in this thread : %f\\n\\n\",Y);\n\n    pthread_mutex_unlock(&amp;mutex);\n\n    pthread_exit(NULL);\n}\nvoid *t3(void *param)\n{       \n        pthread_mutex_lock(&amp;mutex);\n\n    printf(\"third Thread\\n\");\n        Z=F-G;\n    printf(\"the result in this thread : %f\\n\\n\",Z);\n\n    pthread_mutex_unlock(&amp;mutex);\n\n    pthread_exit(NULL);\n}\nvoid *t4(void *param)\n{       \n    pthread_mutex_lock(&amp;mutex);\n\n    printf(\"fourth Thread\\n\");\n        W=pow(Y,Z);\n    printf(\"the result in this thread : %f\\n\\n\",W);\n\n    pthread_mutex_unlock(&amp;mutex);\n\n    pthread_exit(NULL);\n}\nvoid *t5(void *param)\n{              \n    pthread_mutex_lock(&amp;mutex);\n\n    printf(\"fifth Thread\\n\");\n        V=4/W;\n    printf(\"the result in this thread : %f\\n\\n\",V);\n\n    pthread_mutex_unlock(&amp;mutex);\n\n    pthread_exit(NULL);\n}\n</code></pre>\n\n<p>How do I need to change this to ensure a consistently correct result?</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1483468240, "post_id": 41450012, "comment_id": 70106545, "body": "In the second case, the input array ends it life when you exit the function. In the first case, you can return the pointer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1483468258, "post_id": 41450012, "comment_id": 70106556, "body": "You <b>did</b> notice one has to use <code>malloc</code>? Not clear what you ask."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1483468749, "post_id": 41450012, "comment_id": 70106821, "body": "What kind of &quot;difference&quot;? Your &quot;codes&quot; have identical observable behavior. (And they essentially do nothing useful.)  Are two pieces of code with identical observable behavior (which basically do nothing) really different?"}, {"owner": {"reputation": 133, "user_id": 4279313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3aa9d06a7d37abf1fe768600daacf897?s=128&d=identicon&r=PG&f=1", "display_name": "Kubekk", "link": "https://stackoverflow.com/users/4279313/kubekk"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1483469069, "post_id": 41450012, "comment_id": 70106994, "body": "@AnT Yea I would add more code, but why? Pointers and arrays differ in some ways and I wanted to know if during execution of this two &quot;codes&quot; (as you have said) there are going to be any other changes in a memory."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1483469484, "post_id": 41450012, "comment_id": 70107233, "body": "@Kubekk: Modern compilers can often recognize and optimize pieces of code that have identical observable behavior, even if they use completely different memory allocation mechanisms. Modern compilers are pretty good as discarding any &quot;useless&quot; code that does not contribute to observable behavior of the program. Which means that theoretically both of your pieces of code can easily end up being translated into the same code. No difference at all."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1483469764, "post_id": 41450012, "comment_id": 70107380, "body": "@AnT: There very well is different observable behaviour, considering <code>malloc</code> has side-effects. The compiler shall not modify it that way (it would also interfere with testing/debugging mechanisms which use a modified <code>malloc</code> or a wrapper which does additional operations."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1483471513, "post_id": 41450012, "comment_id": 70108232, "body": "As far as the <code>fgets</code> call itself is concerned, there&#39;s no difference - it sees a <code>char *</code> as its first argument either way (the array expression in the second call is converted to a pointer expression before being passed to <code>fgets</code>).  Where it matters is how you manage the input buffer <i>after</i> you&#39;ve read data into it.  If it needs to hang around after the function exits, then you need to use dynamic memory (or pass the target buffer as a parameter to the <code>readN</code> function).  This means you also need to manually <code>free</code> that buffer when you&#39;re done with it."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483484932, "post_id": 41450012, "comment_id": 70114012, "body": "@Olaf: That&#39;s all implementation details that might not exist at all. In general, &quot;having side effects&quot; is not defined as &quot;observable behavior&quot;. It all depends on the exact nature of these side effects. And we don&#39;t know these details. Compilers might have full knowledge of <code>malloc</code> semantics and conclude that in this case the call can be eliminated."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1483485792, "post_id": 41450012, "comment_id": 70114251, "body": "@AnT: Yes, it is implementation details. But it is also fact for any hosted environment with a full-size OS. With side-effects I mean of course &quot;beyond the visibility of the compiler&quot;. Maybe I better had used &quot;external effects&quot;. That would not be the first time a compiler makes too many assumptions."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483486240, "post_id": 41450012, "comment_id": 70114373, "body": "@Olaf: The compiler is free to assume that no side effects exist besides those mandated by the language spec. It is easy to verify that GCC will freely and immediately discard any &quot;unused&quot; calls to <code>malloc</code>. The only thing that can save the call to <code>malloc</code>in this example is actually the fact that the buffer is passed to <code>fgets</code>. <code>fgets</code> is observable and has to be preserved. And the compiler does not have a buffer-less replacement for <code>fgets</code> at its disposal."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1483486521, "post_id": 41450012, "comment_id": 70114452, "body": "@AnT: <code>malloc</code> typically has side-effects outside the TU. Not only that it resides in a different TU, but also it calls OS functions which have side-effects. This becomes worse with dynamic linking, i.e. the side-effects can only be determined at run-time. Interesting discussion, but it leads too far for comments and I don&#39;t have the time for this right now. I undetstand it is not satisfying, but I&#39;ll leave it at this."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1483468276, "creation_date": 1483468276, "answer_id": 41450098, "question_id": 41450012, "link": "https://stackoverflow.com/questions/41450012/difference-between-fgets-array-vs-pointer/41450098#41450098", "title": "Difference between fgets - array vs pointer", "body": "<p>Large part of the convenience that comes with writing functions that take pointers is that they do not care about the memory location, as long as the memory pointed to by the pointer satisfies function's sizing requirements.</p>\n\n<p>In particular, <code>fgets</code> makes no difference between the two calls: it cares only that the pointer <code>ptr</code> that you pass to it be valid for writing <code>length</code> characters.</p>\n\n<p>Even though there is no difference to <code>fgets</code>, your code may care very much about the location of the pointer in memory: for example, your first code snippet must <code>free(text)</code> in order to avoid a memory leak. In contrast, your second code snippet does not need to free <code>test</code>. However, <code>text</code> in the first function remains valid even when function's scope is over, and can be returned to the caller if the function's return type is appropriately changed. The second function cannot do that without making a copy, because <code>text</code> goes out of scope as soon as the end of the function is reached.</p>\n"}, {"comments": [{"owner": {"reputation": 133, "user_id": 4279313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3aa9d06a7d37abf1fe768600daacf897?s=128&d=identicon&r=PG&f=1", "display_name": "Kubekk", "link": "https://stackoverflow.com/users/4279313/kubekk"}, "edited": false, "score": 0, "creation_date": 1483468594, "post_id": 41450104, "comment_id": 70106749, "body": "What would have happend if there would be No enough memory to allocate it for array? I mean while using malloc there is a possibility to check if there was not NULL returned. What about array?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 133, "user_id": 4279313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3aa9d06a7d37abf1fe768600daacf897?s=128&d=identicon&r=PG&f=1", "display_name": "Kubekk", "link": "https://stackoverflow.com/users/4279313/kubekk"}, "edited": false, "score": 0, "creation_date": 1483468663, "post_id": 41450104, "comment_id": 70106778, "body": "automatic allocation are guaranteed, no need to check for that. :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483468665, "post_id": 41450104, "comment_id": 70106780, "body": "Nit-pick: from the <code>fgets</code> view there is absolutely no difference, because it get a psointer for both cases."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483468745, "post_id": 41450104, "comment_id": 70106818, "body": "@Olaf Right sir, I added that related quote also. Any changes in wordings suggested?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483468745, "post_id": 41450104, "comment_id": 70106819, "body": "@SouravGhosh &quot;automatic allocation are guaranteed&quot; - That&#39;s a bit problematic, because typical  implementations only have a limited amount of memory for automatic variables (notice me avoiding the word &quot;stack&quot;;.-). (oh, and: happy new year!)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483468851, "post_id": 41450104, "comment_id": 70106868, "body": "@Olaf Happy new year to you too sir. So how do you propose to modify the wordings there? I know it sounds a bit <i>off</i>, any better alternatives?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483469390, "post_id": 41450104, "comment_id": 70107180, "body": "Well, dear sir, I would leave it as-is. Just because we are here at the abstract machine, not implementation. I use the &quot;nit-pick&quot; term typically when I don&#39;t expect a change. Call it my engineer-gene. :-) To be honest, I don&#39;t understand the question. OP should have noticed one snippet requires <code>malloc</code>. And a full explanation would be off-topic. It should be part of his C book."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1483469473, "post_id": 41450104, "comment_id": 70107223, "body": "@Olaf Then I guess it&#39;s okay. OK, late now, need to rush for dinner, see you tomorrow, good night. :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1483469041, "last_edit_date": 1483469041, "creation_date": 1483468287, "answer_id": 41450104, "question_id": 41450012, "link": "https://stackoverflow.com/questions/41450012/difference-between-fgets-array-vs-pointer/41450104#41450104", "title": "Difference between fgets - array vs pointer", "body": "<p>Technically speaking, the first snippet does not have a success check for <code>malloc()</code> so it has the possibility of invoking UB by dereferencing a NULL pointer, <code>malloc()</code> failure case. Also, this faces a risk of <a href=\"https://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow noreferrer\">memory leak</a> as you neither <code>free()</code> the pointer there nor return it to the caller to make calling <code>free()</code> possible at a later point.</p>\n\n<p>Otherwise, in <strong><em>this particular</em></strong> case, there's not much difference from the <em>\"array and a pointer\" point of view</em> , anyway as long as both of them (passed to <code>fgets()</code>) point to valid memory chunk of the specified size.</p>\n\n<p>To elaborate, quoting <code>C11</code>, chapter \u00a76.3.2.1</p>\n\n<blockquote>\n  <p>Except when it is the operand of the <code>sizeof</code> operator, the <code>_Alignof</code> operator, or the\n  unary <code>&amp;</code> operator, or is a string literal used to initialize an array, an expression that has\n  type <em>\u2018\u2018array of type\u2019\u2019</em> is converted to an expression with type <em>\u2018\u2018pointer to type\u2019\u2019</em> that points\n  to the initial element of the array object and is not an lvalue. [....]</p>\n</blockquote>\n\n<p>So, for the snippet using <code>char text[50];</code>, the call</p>\n\n<pre><code>fgets(text, 50, stdin);\n</code></pre>\n\n<p>makes the first argument to be a pointer to the first element of an array of 50 <code>char</code>s which is behaviorally similar to passing a pointer to a chunk of memory of size of 50 <code>char</code>s.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 4, "creation_date": 1483468531, "post_id": 41450118, "comment_id": 70106721, "body": "There is no stack in the code. The standard does not require using a stack for <i>automatic</i> variables. Don&#39;t mix language abstraction and implementation. And the array does not end when the scope is left. You can pass a pointer to it to a function without problems."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483468604, "post_id": 41450118, "comment_id": 70106755, "body": "@Olaf.: When you call a function including main() a activation frame is pushed in the memory which behaves as FIFO in nature (that&#39;s why stack) and it is generic irrespective of Language implemenattion."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1483468881, "post_id": 41450118, "comment_id": 70106885, "body": "If you show me a quote from the standard where this is actually said for the abstract machine, I (and @Olaf probably too) will believe you. Point is, frames or stacks are not defined by the standard. There are automatic variables, which can be implemented using a stack due to their properties."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1483468883, "post_id": 41450118, "comment_id": 70106887, "body": "Please provide a reference to where the C standard mandates using a stack for automatic variables. FYI: there are implementations which do not use a stack (they might use one optionally if you use recursion)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1483469003, "post_id": 41450118, "comment_id": 70106952, "body": "@Downvoter: I actually would doubt the source of that reference. Simply because the official standard does not have such a requirement ;-)"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483469009, "post_id": 41450118, "comment_id": 70106955, "body": "@Olaf.: Two things then..if possible suggest me an edit 2) If they don&#39;t use stack or anything similar how do they do? <b>Downvoter</b>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483469204, "post_id": 41450118, "comment_id": 70107069, "body": "@coderredoc: 1) Read the standard. 2) Learn about compiler construction. 3) See some embedded compilers and/or 4) Search what &quot;statica call tree&quot; means (meditate why I excluded recursion, which is never required and often not used anyway)."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483469403, "post_id": 41450118, "comment_id": 70107187, "body": "@Olaf.: I dont know about the 3) and 4) ...I dont know what to say..as if I dont know anything. I read a bit about first two..more on 2)..I would ask you to write an answer saying what I said...in correct way. I will delete my answer. Thanks.."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483469600, "post_id": 41450118, "comment_id": 70107296, "body": "See the other answers; no need for another."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483470961, "post_id": 41450118, "comment_id": 70107973, "body": "Let alone you don&#39;t have to reason why you argument at the same abstraction level OP asks, please re-read my comments. I had other issues which are not fixed."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483477065, "post_id": 41450118, "comment_id": 70110836, "body": "@Olaf.: what other issues? Yo have said abt one thing that I corrected"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483477267, "post_id": 41450118, "comment_id": 70110937, "body": "I don&#39;t like to repreat myself. <b>Read</b> my very first comment!"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483555850, "post_id": 41450118, "comment_id": 70148043, "body": "@Olaf.: Please Check my answer....I have disturbed you a lot of times. Sorry for that."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1483556346, "post_id": 41450118, "comment_id": 70148320, "body": "Really I don&#39;t understand this site...the more effort I put to make the answer more readable and accurate it is discouraged."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483564793, "post_id": 41450118, "comment_id": 70152549, "body": "@coderredoc: I removed my DV, as you corrected the major errors. Sorry to tell it still is not a good answer imo, because it describes things way more complicated than necessary. I will not check it again, but as general advice, it is a good idea to stay at the abstraction level the question has (or use the most appropriate, because askers often jump betewwn abstractions themselves). It is also helpful if you use the standard&#39;s nomenclature which is (mostly) well defined and accepted."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": -2, "last_activity_date": 1505359446, "last_edit_date": 1505359446, "creation_date": 1483468327, "answer_id": 41450118, "question_id": 41450012, "link": "https://stackoverflow.com/questions/41450012/difference-between-fgets-array-vs-pointer/41450118#41450118", "title": "Difference between fgets - array vs pointer", "body": "<ul>\n<li><p><code>fgets()</code> take <code>char*</code> as input argument and <code>char text[50]</code> when passed to <code>fegts</code> becomes converted to <code>char*</code> to first element of the array. And <code>text</code> in <code>read1()</code> is already a  <code>char*</code>. So <code>fgets()</code> invocation is same.</p></li>\n<li><p>Difference is <code>text</code> in <code>read1()</code> being dynamically allocated is alive even when the control reaches <code>}</code> of function  <code>read1()</code>. To free it <strong>during program execution</strong> you have to call <code>free()</code> explicitly.</p></li>\n<li><p>The <code>text</code> in <code>main()</code>, being an automatic variable as soon as control reaches <code>}</code> of <code>read2()</code> or the scope of <code>read2()</code> <strong>ends</strong> it becomes and free and you can't access it further. (If you try to do so then you have <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined Behavior</a>).</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1483469949, "post_id": 41450430, "comment_id": 70107467, "body": "A good compiler might add options for static code-analysis (as do some tools) and use the array-length as helpful information. So, while strictly not used, it is a good idea to use corect bounds - if not for anything else than documentation purposes."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1483469628, "creation_date": 1483469628, "answer_id": 41450430, "question_id": 41450012, "link": "https://stackoverflow.com/questions/41450012/difference-between-fgets-array-vs-pointer/41450430#41450430", "title": "Difference between fgets - array vs pointer", "body": "<p>I think you are asking about the difference between passing arrays and pointers as function arguments and declaring function parameters like arrays and pointers.</p>\n\n<p>According to the C Standard (6.3.2.1 Lvalues, arrays, and function designators)</p>\n\n<blockquote>\n  <p>3 Except when it is the operand of the sizeof operator or the unary &amp;\n  operator, or is a string literal used to initialize an array, <strong>an\n  expression that has type \u2018\u2018array of type\u2019\u2019 is converted to an\n  expression with type \u2018\u2018pointer to type\u2019\u2019 that points to the initial\n  element of the array object</strong> and is not an lvalue. If the array\n  object has register storage class, the behavior is unde\ufb01ned.</p>\n</blockquote>\n\n<p>And on the other hand (6.7.6.3 Function declarators (including prototypes))</p>\n\n<blockquote>\n  <p>7 A declaration of a parameter as \u2018\u2018array of type\u2019\u2019 shall be adjusted\n  to \u2018\u2018quali\ufb01ed pointer to type\u2019\u2019, where the type quali\ufb01ers (if any) are\n  those speci\ufb01ed within the [ and ] of the array type derivation...</p>\n</blockquote>\n\n<p>Thus in this function example</p>\n\n<pre><code>void read2() {\n    char text[50];\n    fgets(text, 50, stdin);\n}\n</code></pre>\n\n<p>the array <code>text</code> is implicitly converted to pointer of type <code>char *</code> that points to the first element of the array. That is the function deals with a pointer. It is not important whether a pointer points to the first element of an array with the automatic storage duration or to the first element of an array with the dynamic storage duration.</p>\n\n<p>And moreover for example these functions declare the same one function</p>\n\n<pre><code>void f( char s[50] );\nvoid f( char s[1] );\nvoid f( char s[] );\nvoid f( char *s );\n</code></pre>\n\n<p>because the parameter is adjusted to pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1483479434, "post_id": 41450678, "comment_id": 70111918, "body": "Strictly, the pointer returned by <code>malloc()</code> has no name and hence no scope, but it does have allocated lifetime (which means until deallocated or the program ends).  Double check my terminology \u2014 I&#39;ve not reread that but of the standard so far this year.  But the concept is about right."}], "tags": [], "owner": {"reputation": 217, "user_id": 6701599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ihw-taH00ZU/AAAAAAAAAAI/AAAAAAAAAoA/LVhK_HfOlx4/photo.jpg?sz=128", "display_name": "Fernando Coelho", "link": "https://stackoverflow.com/users/6701599/fernando-coelho"}, "is_accepted": false, "score": 0, "last_activity_date": 1483470539, "creation_date": 1483470539, "answer_id": 41450678, "question_id": 41450012, "link": "https://stackoverflow.com/questions/41450012/difference-between-fgets-array-vs-pointer/41450678#41450678", "title": "Difference between fgets - array vs pointer", "body": "<p>Short answer: In those examples it won't make a difference, but you should free (<a href=\"https://linux.die.net/man/3/free\" rel=\"nofollow noreferrer\">https://linux.die.net/man/3/free</a>) the one you created via malloc before returning.</p>\n\n<p>Long (and somewhat simplified) answer:</p>\n\n<p>The simplified explanation would be that for fgets both variables named text are pointers. Pointers, as the name suggest point to something, in the case of C, they point to a memory area.</p>\n\n<p>In your first example, the memory area you are pointing to is on the Heap, it is dynamically allocated, it has global scope (you could return this variable, you could set it to a global pointer and use it at any point of your code and you could pass it to another function) and you are responsible to free it (in your code, you didn't which results in a memory leak (<a href=\"https://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Memory_leak</a>).</p>\n\n<p>In your second example, the memory area you are pointing to is on the stack (<a href=\"https://en.wikipedia.org/wiki/Stack-based_memory_allocation\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Stack-based_memory_allocation</a>) which is a memory area created when your program starts and that is used to hold variables (as well as some other values for function calls and static variables that I won't discuss in this answer). The scope of this variable is the current function and any function you call from it, but when you return from read2 the content will be overwritten in time, hence you must not return this value or set it to a global pointer, otherwise you will run into trouble later.</p>\n"}], "owner": {"reputation": 133, "user_id": 4279313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3aa9d06a7d37abf1fe768600daacf897?s=128&d=identicon&r=PG&f=1", "display_name": "Kubekk", "link": "https://stackoverflow.com/users/4279313/kubekk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 41450098, "answer_count": 5, "score": -4, "last_activity_date": 1505359446, "creation_date": 1483467981, "last_edit_date": 1483468184, "question_id": 41450012, "link": "https://stackoverflow.com/questions/41450012/difference-between-fgets-array-vs-pointer", "title": "Difference between fgets - array vs pointer", "body": "<p>I have read articles about the difference of array and a pointer, but I am still not sure if it's affect in anyway if I would like to use scanf/fgets.</p>\n\n<p>Let's say I've got a 2 functions which read words.</p>\n\n<pre><code>void read1() {\n    char *text;\n    text = malloc(sizeof(char) * 50);\n    fgets(text, 50, stdin);\n}\n\nvoid read2() {\n    char text[50];\n    fgets(text, 50, stdin);\n}\n</code></pre>\n\n<p>Is there any difference between this codes?</p>\n"}, {"tags": ["c", "linux", "time", "measure"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1483466555, "post_id": 41449460, "comment_id": 70105649, "body": "Too broad. Profile the code <b>iff</b> it isd too slow. It need not be faster than you data transfer."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1483466586, "post_id": 41449460, "comment_id": 70105668, "body": "There are lot of time measurement questions here, they are easy to find."}, {"owner": {"reputation": 2451, "user_id": 1729784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d97a5cecaf61887679df1f79b59b157?s=128&d=identicon&r=PG", "display_name": "DaBler", "link": "https://stackoverflow.com/users/1729784/dabler"}, "edited": false, "score": 0, "creation_date": 1483469568, "post_id": 41449460, "comment_id": 70107278, "body": "The elapsed time is useless on multitasking systems, call <code>getrusage(2)</code> and look at <code>ru_utime</code> (user CPU time used) instead."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1483471092, "post_id": 41449460, "comment_id": 70108039, "body": "Could this <a href=\"https://stackoverflow.com/questions/35564970/how-to-format-a-time-stamp-in-c/35565089#35565089\">Answer be what you need</a> ?"}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 3, "last_activity_date": 1483466817, "last_edit_date": 1483466817, "creation_date": 1483466039, "answer_id": 41449517, "question_id": 41449460, "link": "https://stackoverflow.com/questions/41449460/how-to-measure-execution-time-in-c-on-linux/41449517#41449517", "title": "How to measure execution time in C on Linux", "body": "<p>Read <a href=\"http://man7.org/linux/man-pages/man7/time.7.html\" rel=\"nofollow noreferrer\">time(7)</a>. You probably want to use <a href=\"http://man7.org/linux/man-pages/man2/clock_gettime.2.html\" rel=\"nofollow noreferrer\">clock_gettime(2)</a> with <code>CLOCK_PROCESS_CPUTIME_ID</code> or \n<code>CLOCK_MONOTONIC</code>. Or you could just use <a href=\"http://man7.org/linux/man-pages/man3/clock.3.html\" rel=\"nofollow noreferrer\">clock(3)</a> (for the CPU time in microseconds, since <code>CLOCK_PER_SEC</code> is always a million).</p>\n\n<p>If you want to benchmark an entire program (executable), use <a href=\"http://man7.org/linux/man-pages/man1/time.1.html\" rel=\"nofollow noreferrer\">time(1)</a> command.</p>\n"}, {"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 2, "last_activity_date": 1483467205, "last_edit_date": 1483467205, "creation_date": 1483466464, "answer_id": 41449642, "question_id": 41449460, "link": "https://stackoverflow.com/questions/41449460/how-to-measure-execution-time-in-c-on-linux/41449642#41449642", "title": "How to measure execution time in C on Linux", "body": "<p><code>clock()</code>: The value returned is the CPU time used so far as a clock_t;</p>\n\n<h2>Logic</h2>\n\n<p>Get CPU time at program beginning and at end. Difference is what you want.</p>\n\n<h2>Code</h2>\n\n<pre><code>clock_t begin = clock();\n\n/****  code ****/\n\nclock_t end = clock();\ndouble time_spent = (double)(end - begin) //in microseconds\n</code></pre>\n\n<p><sub> To get the number of seconds used,we divided the difference by <code>CLOCKS_PER_SEC</code>.</sub></p>\n\n<h2>More accurate</h2>\n\n<p>In C11 <code>timespec_get()</code> provides time measurement in the range of <strong>nanoseconds</strong>. But the accuracy is implementation defined and can vary.</p>\n"}, {"tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": false, "score": 0, "last_activity_date": 1483473430, "creation_date": 1483473430, "answer_id": 41451357, "question_id": 41449460, "link": "https://stackoverflow.com/questions/41449460/how-to-measure-execution-time-in-c-on-linux/41451357#41451357", "title": "How to measure execution time in C on Linux", "body": "<p>Measuring the execution time of a proper encryption code is simple although a bit tedious. The runtime of a good encryption code is independent of the quality of the input--no matter what you throw at it, it always needs the same amount of operations per chunk of input. If it doesn't you have a problem called a timing-attack.</p>\n\n<p>So the only thing you need to do is to unroll all loops, count the opcodes and multiply the individual opcodes with their amount of clock-ticks to get the exact runtime. There is one problem: some CPUs have a variable amount of clock-ticks for some of their operations and you might have to change those to operations that have a fixed amount of clock-ticks. A pain in the behind, admitted.</p>\n\n<p>If the single thing you want is to know if the code runs fast enough to fit into a slot of your real-time OS you can simply take to maximum and fill cases below with NOOPs (Your RTOS might have a routine for that).</p>\n"}], "owner": {"reputation": 53, "user_id": 3648937, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/948c298372f1bc05523fc70c3de820bb?s=128&d=identicon&r=PG&f=1", "display_name": "DeoChandra", "link": "https://stackoverflow.com/users/3648937/deochandra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8135, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1483473430, "creation_date": 1483465847, "last_edit_date": 1483468472, "question_id": 41449460, "link": "https://stackoverflow.com/questions/41449460/how-to-measure-execution-time-in-c-on-linux", "title": "How to measure execution time in C on Linux", "body": "<p>I am working on encryption of realtime data. I have developed encryption and decryption algorithm. Now i want to measure the execution time of the same on Linux platform in C. How can i correctly measure it ?. I have tried it as below</p>\n\n<pre><code>             gettimeofday(&amp;tv1, NULL);\n         /* Algorithm Implementation Code*/\n             gettimeofday(&amp;tv2, NULL);\n\n        Total_Runtime=(tv2.tv_usec - tv1.tv_usec) +          \n                      (tv2.tv_sec - tv1.tv_sec)*1000000);\n</code></pre>\n\n<p>which gives me time in microseconds. Is it correct way of time measurement or i should use some other function? Any hint will be appreciated.</p>\n"}, {"tags": ["c", "string", "if-statement"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1483464182, "post_id": 41448967, "comment_id": 70104370, "body": "<a href=\"http://stackoverflow.com/q/1694036/2173917\">DO NOT use <code>gets()</code>, it is dangerous</a>. use <a href=\"https://linux.die.net/man/3/fgets\" rel=\"nofollow noreferrer\"><code>fgets()</code></a> instead."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1483464250, "post_id": 41448967, "comment_id": 70104408, "body": "<code>stopping</code>..please elaborate."}, {"owner": {"reputation": 371, "user_id": 6886130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2JLagENmVmA/AAAAAAAAAAI/AAAAAAAAADQ/1RfJcFDDUJ4/photo.jpg?sz=128", "display_name": "Gradin98", "link": "https://stackoverflow.com/users/6886130/gradin98"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1483464373, "post_id": 41448967, "comment_id": 70104469, "body": "<a href=\"http://prntscr.com/dr2j5r\" rel=\"nofollow noreferrer\">prntscr.com/dr2j5r</a> , when i read 1, the program stoped, i try with fgets() EDIT:  i can use fgets() becouse i need to read from keyboard, not from file"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1483465062, "post_id": 41448967, "comment_id": 70104824, "body": "<code>gets(sir);</code> --&gt; <code>scanf(&quot; %1999[^\\n]&quot;, sir);</code>"}, {"owner": {"reputation": 371, "user_id": 6886130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2JLagENmVmA/AAAAAAAAAAI/AAAAAAAAADQ/1RfJcFDDUJ4/photo.jpg?sz=128", "display_name": "Gradin98", "link": "https://stackoverflow.com/users/6886130/gradin98"}, "edited": false, "score": 0, "creation_date": 1483465457, "post_id": 41448967, "comment_id": 70105015, "body": "BLUEPIXY it&#39;s work :D"}], "answers": [{"comments": [{"owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 3, "creation_date": 1483465699, "post_id": 41449328, "comment_id": 70105168, "body": "This answer still uses <code>gets</code> tough, one should not ignore compiler warnings. (And if your compiler does not warn against <code>gets</code> consider upgrading)."}, {"owner": {"reputation": 1, "user_id": 7370363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FQXU.jpg?s=128&g=1", "display_name": "Shirshendu Bhowmick", "link": "https://stackoverflow.com/users/7370363/shirshendu-bhowmick"}, "reply_to_user": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 0, "creation_date": 1483466027, "post_id": 41449328, "comment_id": 70105333, "body": "The warning is because gets is very bad at handling overflow errors, one needs to handle it. Else to avoid warning can use scanf(&quot;%s&quot;, sir); but it will truncate everything after a space."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1483468087, "post_id": 41449328, "comment_id": 70106450, "body": "@ShirshenduBhowmick <code>gets()</code> <b>and</b>  <code>scanf(&quot;%s&quot;, sir)</code> are both equally bad at handling buffer overflows.  Neither should be used."}, {"owner": {"reputation": 1, "user_id": 7370363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FQXU.jpg?s=128&g=1", "display_name": "Shirshendu Bhowmick", "link": "https://stackoverflow.com/users/7370363/shirshendu-bhowmick"}, "reply_to_user": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 0, "creation_date": 1483471059, "post_id": 41449328, "comment_id": 70108023, "body": "Yes, but  @unimportant was talking about the warning, what i did was just solved the buffer problem by adding <code>getchar()</code>, as @Gradin98 asked only about it."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483472974, "post_id": 41449328, "comment_id": 70108921, "body": "@chux is there any reason why one should not use scanf like =&gt;&gt; scanf(&quot;%SIZEs&quot;, buffer); ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1483473381, "post_id": 41449328, "comment_id": 70109078, "body": "@Michi <code>scanf(&quot;%SIZEs&quot;, buffer);</code> is OK.  Weakness: Return value not checked, general complexities/problems about <code>scanf()</code>, potential consuming leading white-space when not expected.  But yes, that does fix the buffer overflow problem.  C&#39;s inputs functions, as a whole have weakness, but used as building blocks, can be used well."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1483473621, "post_id": 41449328, "comment_id": 70109189, "body": "@chux I will not check the return value of scanf in a comment :)), more over when is about scanf itself and not about its return value. I&#39;m agree that I need some other tweaks to make scanf work when it comes to white spaces, I&#39;ll probably use fgets here. Scanf is not wrong or bad it is only that almost always used wrong. By the way, happy New Year!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1483474109, "post_id": 41449328, "comment_id": 70109424, "body": "@michi  Yes  <code>scanf()</code>  is too often used wrong.  Perhaps &quot;<a href=\"http://www.imdb.com/character/ch0008316/quotes\" rel=\"nofollow noreferrer\">Jessica scanf()</a>&quot; would say &quot;I&#39;m not bad.. I&#39;m just drawn that way&quot;?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1483474387, "post_id": 41449328, "comment_id": 70109549, "body": "@chux you definitely made my day whit that :))"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 371, "user_id": 6886130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2JLagENmVmA/AAAAAAAAAAI/AAAAAAAAADQ/1RfJcFDDUJ4/photo.jpg?sz=128", "display_name": "Gradin98", "link": "https://stackoverflow.com/users/6886130/gradin98"}, "edited": false, "score": 1, "creation_date": 1483475833, "post_id": 41449328, "comment_id": 70110242, "body": "@Gradin98 What would you want to happen to indicate <i>no input</i> into <code>sir</code>?  <code>scanf(&quot; %1999[^\\n]&quot;, sir);</code> will not work in that case, it will not return, waiting for non-white-space input.  If you wanted to enter 3 spaces into <code>sir</code> , that <code>scanf()</code> will not work either.  Perhaps these matter, perhaps not.  The post is unclear."}], "tags": [], "owner": {"reputation": 1, "user_id": 7370363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FQXU.jpg?s=128&g=1", "display_name": "Shirshendu Bhowmick", "link": "https://stackoverflow.com/users/7370363/shirshendu-bhowmick"}, "is_accepted": false, "score": 0, "last_activity_date": 1483465451, "creation_date": 1483465451, "answer_id": 41449328, "question_id": 41448967, "link": "https://stackoverflow.com/questions/41448967/read-strings-in-c-in-if-instruction/41449328#41449328", "title": "Read strings in c in if instruction", "body": "<p>This is due to the C input buffer problem, just add one getchar() as shown, it will work, let me know for any other help.   </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n  int n,i = 0;\n  char sir[2000],ch;\n\n  printf(\"Press you option: \"); scanf(\"%d\",&amp;n);\n\n  if(n == 1)\n  {\n    printf(\"text: \");\n    getchar();\n    gets(sir);\n\n    printf(\"\\nINPUT: \");\n    for(i = 0;i &lt; strlen(sir);i++)\n        printf(\"%c\",sir[i]);\n\n }\nreturn 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 1, "creation_date": 1483473050, "post_id": 41450392, "comment_id": 70108944, "body": "Do NOT <code>fflush(stdin)</code> : <a href=\"http://stackoverflow.com/questions/2979209/using-fflushstdin\">stackoverflow.com/questions/2979209/using-fflushstdin</a>"}], "tags": [], "owner": {"reputation": 659, "user_id": 7356924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd0d6a9d8db7cffe199c9be89424c20?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Bhaskar", "link": "https://stackoverflow.com/users/7356924/vimal-bhaskar"}, "is_accepted": false, "score": 0, "last_activity_date": 1483469398, "creation_date": 1483469398, "answer_id": 41450392, "question_id": 41448967, "link": "https://stackoverflow.com/questions/41448967/read-strings-in-c-in-if-instruction/41450392#41450392", "title": "Read strings in c in if instruction", "body": "<p>gets() is not preferred way to get the input from the user these days. As mentioned above please use fgets to read the input. </p>\n\n<p>Coming back to your problem. Please fflush(stdin) in order to resolve your issue. Trying running the below code. i have just added fflush(stdin) and now the user input is taken by fgets() and no program stopping happens. </p>\n\n<h1>Code :</h1>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nint main()\n{\nint n, i = 0;\nchar sir[2000], ch;\nprintf(\"Press you option: \"); scanf(\"%d\", &amp;n);\nif (n == 1)\n{\nprintf(\"text: \");\nfflush(stdin);\ngets(sir);\nprintf(\"\\nINPUT: \");\nfor (i = 0; i &lt; strlen(sir); i++)\nprintf(\"%c\", sir[i]);\n}\nreturn 0;\n}\n</code></pre>\n\n<p>Also please read and understand why we are using fflush and why we need to avoid gets() function going forward. Hope i have helped you. Thank you :)</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1483475223, "creation_date": 1483475223, "answer_id": 41451775, "question_id": 41448967, "link": "https://stackoverflow.com/questions/41448967/read-strings-in-c-in-if-instruction/41451775#41451775", "title": "Read strings in c in if instruction", "body": "<blockquote>\n  <p>When I add the gets() function in an if-instruction, the program stops.</p>\n</blockquote>\n\n<p>Look at the preceding code.  Maybe you entered <kbd>1</kbd> <kbd>Enter</kbd></p>\n\n<pre><code>printf(\"Press you option: \"); \nscanf(\"%d\",&amp;n);\n</code></pre>\n\n<p><code>scanf(\"%d\",&amp;n);</code> consume the <code>'1'</code>, but not the <code>'\\n'</code>.<br>\nLater code  does </p>\n\n<pre><code>printf(\"text: \"); \ngets(sir);\n</code></pre>\n\n<p>And then <code>gets()</code> reads that <code>'\\n'</code> and returns with <code>sir[0] == '\\0'</code>, an <em>empty</em> string.  This causes <code>for(i = 0;i &lt; strlen(sir);i++)</code> to not iterate the body of the <code>for()</code> loop.</p>\n\n<hr>\n\n<p>What to do?</p>\n\n<p>Read a <em>line</em> of user input  <code>fgets()</code> and then process that string.  Note that invalid input, EOF and buffer overflow handling not addressed in this simple code example.   That would be step 2.</p>\n\n<pre><code>char buf[80];\nprintf(\"Press you option: \"); \nfgets(buf, sizeof buf, stdin);\nsscanf(buf, \"%d\",&amp;n);\n\nprintf(\"text: \"); \nfgets(buf, sizeof buf, stdin);\nbuf[strcspn(buf, \"\\n\")] = '\\0'; // lop off potential \\n\nstrcpy(sir, buf);\n</code></pre>\n"}], "owner": {"reputation": 371, "user_id": 6886130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-2JLagENmVmA/AAAAAAAAAAI/AAAAAAAAADQ/1RfJcFDDUJ4/photo.jpg?sz=128", "display_name": "Gradin98", "link": "https://stackoverflow.com/users/6886130/gradin98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 41451775, "answer_count": 3, "score": 2, "last_activity_date": 1483475223, "creation_date": 1483464147, "last_edit_date": 1483470542, "question_id": 41448967, "link": "https://stackoverflow.com/questions/41448967/read-strings-in-c-in-if-instruction", "title": "Read strings in c in if instruction", "body": "<p>I have a problem with reading strings in c. When I add the gets() function in an if-instruction, the program stops.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    int n,i = 0;\n    char sir[2000],ch;\n\n    printf(\"Press you option: \"); scanf(\"%d\",&amp;n);\n\n    if(n == 1)\n    {\n        printf(\"text: \"); gets(sir);\n\n        printf(\"\\nINPUT: \");\n        for(i = 0;i &lt; strlen(sir);i++)\n            printf(\"%c\",sir[i]);\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Any solution?</p>\n"}, {"tags": ["c", "pointers", "queue", "malloc"], "comments": [{"owner": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "edited": false, "score": 1, "creation_date": 1483464198, "post_id": 41448833, "comment_id": 70104381, "body": "Have you used a debugger to step line-by-line through your code? This will likely allow you to easily pinpoint the nature and location of the issue you&#39;re having. If you haven&#39;t used a debugger before, you should know that using a debugger is, for all intents and purposes, required knowledge for any programmer. For more info, see <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1483464503, "post_id": 41448833, "comment_id": 70104533, "body": "<code>int **queue=(int **)malloc(1);</code> --&gt; <code>int *queue=NULL;</code>"}, {"owner": {"reputation": 166, "user_id": 7301203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-f0J_JCyvTDI/AAAAAAAAAAI/AAAAAAAAAh8/f61V2wxWTTc/photo.jpg?sz=128", "display_name": "Ran Elgiser", "link": "https://stackoverflow.com/users/7301203/ran-elgiser"}, "edited": false, "score": 0, "creation_date": 1483465039, "post_id": 41448833, "comment_id": 70104812, "body": "first of all, i changed the pastebin and added a technical specification for each function.  second of all, i changed it still doesn&#39;t work."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1483465413, "post_id": 41448833, "comment_id": 70104990, "body": "please post code - not links to code :-)"}, {"owner": {"reputation": 1975, "user_id": 5029307, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5481fa266e0007d9c497e95b41019fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/5029307/travis"}, "edited": false, "score": 0, "creation_date": 1483466913, "post_id": 41448833, "comment_id": 70105840, "body": "What do you mean &quot;doesn&#39;t work&quot;?"}, {"owner": {"reputation": 166, "user_id": 7301203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-f0J_JCyvTDI/AAAAAAAAAAI/AAAAAAAAAh8/f61V2wxWTTc/photo.jpg?sz=128", "display_name": "Ran Elgiser", "link": "https://stackoverflow.com/users/7301203/ran-elgiser"}, "edited": false, "score": 0, "creation_date": 1483467773, "post_id": 41448833, "comment_id": 70106276, "body": "crashes the program completly"}], "answers": [{"comments": [{"owner": {"reputation": 166, "user_id": 7301203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-f0J_JCyvTDI/AAAAAAAAAAI/AAAAAAAAAh8/f61V2wxWTTc/photo.jpg?sz=128", "display_name": "Ran Elgiser", "link": "https://stackoverflow.com/users/7301203/ran-elgiser"}, "edited": false, "score": 0, "creation_date": 1483471876, "post_id": 41450395, "comment_id": 70108415, "body": "Thank you so much, your solution is much simpler, i now realize it was much simpler to use a single pointer instead of two, thank you."}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": true, "score": 1, "last_activity_date": 1483472068, "last_edit_date": 1483472068, "creation_date": 1483469415, "answer_id": 41450395, "question_id": 41448833, "link": "https://stackoverflow.com/questions/41448833/c-queue-implimintation/41450395#41450395", "title": "c - queue implimintation", "body": "<p>try this (I'm sorry if my understanding was wrong):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n//#include \"Mission6.h\"\nvoid PrintMenu(void);\nvoid AddItemToQueue(int **queue,int *head,int* tail,int* amountOfTimes);\nvoid RemoveItemFromQueue(int **queue,int *head, int* tail);\nvoid PrintQueue(int *queue, int head, int tail);\n\nvoid MissionSix(void){\n    int queueTail = 0, queueHead = 0, amountOfTimes = 0;\n    //amountOfItems represents the amount of times i used the functionAddItemToQueue\n    int choice;\n    int *queue = NULL;\n    PrintMenu();\n    do{\n        scanf(\"%d\", &amp;choice);\n        switch(choice){\n        case 0:\n            free(queue);\n            return;\n        case 1:\n            AddItemToQueue(&amp;queue, &amp;queueHead, &amp;queueTail, &amp;amountOfTimes);\n            break;\n        case 2:\n            RemoveItemFromQueue(&amp;queue, &amp;queueHead, &amp;queueTail);\n            break;\n        case 3:\n            PrintQueue(queue, queueHead, queueTail);\n            break;\n        case 4:\n            break;\n        case 5:\n            break;\n        case 6:\n            break;\n        case 7:\n            break;\n        case 8: \n            PrintMenu();\n            break;\n        default:\n            printf(\"Error: Unrecognized choice\\n\");\n        }\n        printf(\"Please select your next choice (select 8 for complete menu)\\n\");\n    } while(choice != 0);\n\n}\n\nvoid PrintMenu(void){ \n    fputs(\n        \"Please select your choice:\\n\"\n        \"0. Exit\\n\"\n        \"1. Add item to the queue\\n\"\n        \"2. Remove item from the queue\\n\"\n        \"3. Print queue\\n\"\n        \"4. Print the maximum item in the queue\\n\"\n        \"5. Print the minimum item in the queue\\n\"\n        \"6. Print index of given item\\n\"\n        \"7. Clear queue\\n\"\n        \"8. Print the menu\\n\",\n        stdout\n    );\n}\n\nvoid AddItemToQueue(int **queue, int *head, int *tail, int *amountOfTimes){\n    int itemToAdd;\n    printf(\"Enter item value to add \\n\");\n    scanf(\"%d\", &amp;itemToAdd);\n    *queue = realloc(*queue, ++*amountOfTimes * sizeof(int));\n    if(*queue == NULL){\n        printf(\"Error: Insufficient Memory\\n\");\n        return;\n    }\n    (*queue)[(*tail)++] = itemToAdd;\n}\n\nvoid RemoveItemFromQueue(int **queue, int *head, int *tail){\n//if restructure queue, need int *amountOfTimes\n    if( *head == *tail){\n        printf(\"Error: Queue is empty!\\n\");\n        return;\n    }\n    ++*head;\n}\n\nvoid PrintQueue(int *queue, int head, int tail){\n    int i;\n    printf(\"Queue items are: \");\n    for(i = head; i &lt; tail; ++i){\n        printf(\"%d \", queue[i]);\n    }\n    puts(\"\");\n}\n\nint main(void){\n    MissionSix();\n}\n</code></pre>\n"}], "owner": {"reputation": 166, "user_id": 7301203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-f0J_JCyvTDI/AAAAAAAAAAI/AAAAAAAAAh8/f61V2wxWTTc/photo.jpg?sz=128", "display_name": "Ran Elgiser", "link": "https://stackoverflow.com/users/7301203/ran-elgiser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "closed_date": 1483485171, "accepted_answer_id": 41450395, "answer_count": 1, "score": -1, "last_activity_date": 1483701352, "creation_date": 1483463624, "last_edit_date": 1483466001, "question_id": 41448833, "link": "https://stackoverflow.com/questions/41448833/c-queue-implimintation", "closed_reason": "Not suitable for this site", "title": "c - queue implimintation", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;malloc.h&gt;\n#include \"Mission6.h\"\n/************************************************************************\n* function name:MissionSix\n* input:none\n* output:none\n* operation:gets a choice from the user makes a menu to choose from.\n*************************************************************************/ \nvoid MissionSix(){\n    static int queueTail=0,queueHead=0,amountOfTimes=0; //so their values stay throughout the program.\n    //amountOfItems represents the amount of times i used the functionAddItemToQueue\n    int choice;\n    int **queue=NULL;\n    PrintMenu();\n    do{\n        scanf(\"%d\",&amp;choice);\n        switch(choice){\n            case 0: \n                return;\n            case 1:\n                AddItemToQueue(queue,&amp;queueHead,&amp;queueTail,&amp;amountOfTimes);\n                break;\n            case 2:\n                RemoveItemFromQueue(queue,&amp;queueHead,&amp;queueTail);\n                break;\n            case 3:\n                PrintQueue(queue,&amp;queueHead,&amp;queueTail);\n                break;\n            case 4:\n                break;\n            case 5:\n                break;\n            case 6:\n                break;\n            case 7:\n                break;\n            case 8: \n                PrintMenu();\n                break;\n            default:\n                printf(\"Error: Unrecognized choice\\n\");\n        }\n        printf(\"Please select your next choice (select 8 for complete menu)\\n\");\n    } //end of \"do\"\n    while(choice!=0);\n\n}\n/************************************************************************\n* function name:printMenu\n* input:none\n* output:none\n* operation:prints the menu.\n*************************************************************************/ \nvoid PrintMenu(){ \n    printf(\"Please select your choice:\\n\");\n    printf(\"0. Exit\\n\");\n    printf(\"1. Add item to the queue\\n\");\n    printf(\"2. Remove item from the queue\\n\");\n    printf(\"3. Print queue\\n\");\n    printf(\"4. Print the maximum item in the queue\\n\");\n    printf(\"5. Print the minimum item in the queue\\n\");\n    printf(\"6. Print index of given item\\n\");\n    printf(\"7. Clear queue\\n\");\n    printf(\"8. Print the menu\\n\");\n}\n/************************************************************************\n* function name:AddItemToQueue\n* input: the queue (an array of pointers), its head(integer), its tail(int) and the amount\n  of times this function was called(int)\n* output:none\n* operation:gets an item from the user and adds it to the queue.\n*************************************************************************/ \nvoid AddItemToQueue(int **queue,int *head,int* tail,int* amountOfTimes){\n    int itemToAdd;\n    printf(\"Enter item value to add \\n\");\n    scanf(\"%d\",&amp;itemToAdd);\n    queue=(int **)realloc(queue,sizeof(int*)*((*amountOfTimes)+1)); //amount of items in queue =*head - *tail\n    if(queue==NULL){\n        printf(\"Error: Insufficient Memory\\n\");\n        return;\n    }\n    queue[*head]=(int *)malloc(sizeof(int)); //builds size for the data\n    if (queue[*head]==NULL){\n        printf(\"Error: Insufficient Memory\\n\");\n        return;\n    }\n    *queue[*head]=itemToAdd;//adding the item to the correct spot\n    (*head)++;\n    (*amountOfTimes)++;\n}\n/************************************************************************\n* function name:RemoveItemFromQueue\n* input:the queue (an array of pointers), its head(integer) and its tail(int). \n* output:none\n* operation:removes first element in the queue.\n*************************************************************************/ \nvoid RemoveItemFromQueue(int **queue,int *head, int* tail){\n    if((*head)==(*tail)){ //if head and tail are equal the queue is empty.\n        printf(\"Error: Queue is empty!\\n\");\n        return;\n    }\n\n    free(queue[*tail]);\n    (*tail)++;\n}\n/************************************************************************\n* function name:PrintQueue\n* input:the queue (an array of pointers), its head(integer) and its tail(int). \n* output:none\n* operation:prints the elements of the queue\n*************************************************************************/ \nvoid PrintQueue(int **queue,int *head, int*tail){\n    int i;\n    printf(\"Queue items are: \");\n    for(i=(*tail);i&lt;(*head);i++){\n        printf(\"%d \",**(queue+i));\n    }\n}\n</code></pre>\n\n<p>what i'm trying to do is implement a queue in c: it works as a first in first it. </p>\n\n<p>the problems are:</p>\n\n<ol>\n<li>the function \"RemoveItemFromQueue\" doesn't work</li>\n<li>the function \"PrintQueue\" doesn't work for some reason.</li>\n</ol>\n\n<p>note that i know i haven't freed mallocs in my program, ill deal with it later.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 4, "creation_date": 1483463255, "post_id": 41448679, "comment_id": 70103798, "body": "Undefined behavior: <code>for(i=0;i&lt;=SIZE;i++){</code> goes out of bounds on the array. -&gt; <code>i &lt; SIZE</code>."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1483463277, "post_id": 41448679, "comment_id": 70103814, "body": "Perhaps learning to use a debugger would help"}, {"owner": {"reputation": 39, "user_id": 5958551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Vam4r.png?s=128&g=1", "display_name": "Aria Fathi", "link": "https://stackoverflow.com/users/5958551/aria-fathi"}, "reply_to_user": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 0, "creation_date": 1483463460, "post_id": 41448679, "comment_id": 70103909, "body": "@Unimportant SIZE is 9 array size is exactly 9. Tested and same result. Doesnt count if the number equals to last number"}, {"owner": {"reputation": 39, "user_id": 5958551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Vam4r.png?s=128&g=1", "display_name": "Aria Fathi", "link": "https://stackoverflow.com/users/5958551/aria-fathi"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1483463486, "post_id": 41448679, "comment_id": 70103918, "body": "@EdHeal Im not pro at C, How to use and what debugger to use?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1483463526, "post_id": 41448679, "comment_id": 70103941, "body": "Depends on the IDE you are using"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 3, "creation_date": 1483463631, "post_id": 41448679, "comment_id": 70104018, "body": "@AriaFathi - Since <code>SIZE</code> is 9, the valid indexes into the array are <code>0, 1, 2, ..., 7, 8</code>. Referencing <code>Student[9]</code> results in undefined behavior. The recommended paradigm for walking a C array is <code>for(i = 0; i &lt; SIZE; i++)</code>."}, {"owner": {"reputation": 39, "user_id": 5958551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Vam4r.png?s=128&g=1", "display_name": "Aria Fathi", "link": "https://stackoverflow.com/users/5958551/aria-fathi"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1483463769, "post_id": 41448679, "comment_id": 70104115, "body": "@Rob\u1d69 still same result"}, {"owner": {"reputation": 39, "user_id": 5958551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Vam4r.png?s=128&g=1", "display_name": "Aria Fathi", "link": "https://stackoverflow.com/users/5958551/aria-fathi"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1483463795, "post_id": 41448679, "comment_id": 70104129, "body": "@EdHeal DevC++ im using it right now , but I usually user Code::Blocks"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5958551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Vam4r.png?s=128&g=1", "display_name": "Aria Fathi", "link": "https://stackoverflow.com/users/5958551/aria-fathi"}, "edited": false, "score": 0, "creation_date": 1483463635, "post_id": 41448771, "comment_id": 70104023, "body": "Size is defined 9 ,User will enter 10 numbers , so I do this , it will go from 0 to 8."}, {"owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 2, "creation_date": 1483463714, "post_id": 41448771, "comment_id": 70104085, "body": "And 0 to 8, including 0 itself, is ... 9 elements."}, {"owner": {"reputation": 39, "user_id": 5958551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Vam4r.png?s=128&g=1", "display_name": "Aria Fathi", "link": "https://stackoverflow.com/users/5958551/aria-fathi"}, "reply_to_user": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 0, "creation_date": 1483463887, "post_id": 41448771, "comment_id": 70104188, "body": "@Unimportant Can you give me full code to test? im testing it in anyway I can but same result every time"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 39, "user_id": 5958551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Vam4r.png?s=128&g=1", "display_name": "Aria Fathi", "link": "https://stackoverflow.com/users/5958551/aria-fathi"}, "edited": false, "score": 1, "creation_date": 1483464052, "post_id": 41448771, "comment_id": 70104288, "body": "@AriaFathi: There are <b>three</b> loops - not 2 - which use <code>&lt;= SIZE</code>. Do you really need your entire source repeated and with only these changes?"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 39, "user_id": 5958551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Vam4r.png?s=128&g=1", "display_name": "Aria Fathi", "link": "https://stackoverflow.com/users/5958551/aria-fathi"}, "edited": false, "score": 0, "creation_date": 1483464213, "post_id": 41448771, "comment_id": 70104385, "body": "@AriaFathi - Try this <a href=\"http://ideone.com/51NJC0\" rel=\"nofollow noreferrer\">ideone.com/51NJC0</a>"}, {"owner": {"reputation": 39, "user_id": 5958551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Vam4r.png?s=128&g=1", "display_name": "Aria Fathi", "link": "https://stackoverflow.com/users/5958551/aria-fathi"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1483464241, "post_id": 41448771, "comment_id": 70104400, "body": "@RadLexus Dude I tested it but always same result."}, {"owner": {"reputation": 39, "user_id": 5958551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Vam4r.png?s=128&g=1", "display_name": "Aria Fathi", "link": "https://stackoverflow.com/users/5958551/aria-fathi"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1483464424, "post_id": 41448771, "comment_id": 70104491, "body": "@Rob\u1d69 Same result."}], "tags": [], "owner": {"reputation": 122, "user_id": 7008582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00a84315a410182b6b935689a9e46c74?s=128&d=identicon&r=PG&f=1", "display_name": "Dreamer", "link": "https://stackoverflow.com/users/7008582/dreamer"}, "is_accepted": false, "score": 2, "last_activity_date": 1483463507, "last_edit_date": 1483463507, "creation_date": 1483463408, "answer_id": 41448771, "question_id": 41448679, "link": "https://stackoverflow.com/questions/41448679/c-program-to-count-highest-repetition-of-a-number-in-an-array-of-numbers/41448771#41448771", "title": "C program to count highest repetition of a number in an array of numbers", "body": "<p>I and j are initialized from 0 and condition will be checked till size-1. So, change the condition from <code>j&lt;=SIZE</code> to <code>j&lt;SIZE</code> in both the loops.</p>\n"}, {"comments": [{"owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 3, "creation_date": 1483464811, "post_id": 41449139, "comment_id": 70104702, "body": "No, just no..., back to undefined behavior. Simply remove the <code>if(k == j){ continue; }</code> completely. Each number should be allowed to positively compare with itself."}], "tags": [], "owner": {"reputation": 39, "user_id": 5958551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Vam4r.png?s=128&g=1", "display_name": "Aria Fathi", "link": "https://stackoverflow.com/users/5958551/aria-fathi"}, "is_accepted": false, "score": -1, "last_activity_date": 1483464748, "creation_date": 1483464748, "answer_id": 41449139, "question_id": 41448679, "link": "https://stackoverflow.com/questions/41448679/c-program-to-count-highest-repetition-of-a-number-in-an-array-of-numbers/41449139#41449139", "title": "C program to count highest repetition of a number in an array of numbers", "body": "<p>I fixed it my self , I added this code to the <code>if(k==j)</code> :</p>\n\n<pre><code>if(Student[9]){\ncounter++;\n}\n</code></pre>\n\n<p>and after that goes <code>continue;</code></p>\n"}, {"tags": [], "owner": {"reputation": 668, "user_id": 5052512, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-vwLG_2Kpir0/AAAAAAAAAAI/AAAAAAAAAEA/_aZAaMJ8UnA/photo.jpg?sz=128", "display_name": "Manish Mishra", "link": "https://stackoverflow.com/users/5052512/manish-mishra"}, "is_accepted": true, "score": 0, "last_activity_date": 1483467076, "creation_date": 1483467076, "answer_id": 41449813, "question_id": 41448679, "link": "https://stackoverflow.com/questions/41448679/c-program-to-count-highest-repetition-of-a-number-in-an-array-of-numbers/41449813#41449813", "title": "C program to count highest repetition of a number in an array of numbers", "body": "<p>Still there is a bug, as Your question says, You have 10 numbers and SIZE is still set to 9. The below code is working fine. It is almost similar to your code but with some difference that you should notice. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define SIZE 10\n\nint main () {\n    float Student[SIZE],grade,maxValue;\n    int i,j,k,slot,counter=1,maxCount=1;\n    printf(\"Enter the grade of 10 students \\n\");\n    for(i=0;i&lt;SIZE;i++){\n        printf(\"Enter student %d grade : \",i+1);\n        scanf(\"%f\",&amp;Student[i]);\n    }\n    for(j=0;j&lt;SIZE;j++){\n        grade = Student[j];\n        counter = 1;\n        for(k=0;k&lt;SIZE;k++){\n         if (grade == Student[k] &amp;&amp; j!=k) {\n                counter++;\n         }\n            if (counter &gt; maxCount) {\n                maxCount = counter;\n                maxValue = grade;\n            }\n\n        }\n    }\n\n    if(maxCount == 1 ){\n        printf(\"There are no duplicate numbers.\\n\");\n    }else{\n        printf(\"%.2f repeated %d times.\\n\",maxValue,maxCount);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5958551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Vam4r.png?s=128&g=1", "display_name": "Aria Fathi", "link": "https://stackoverflow.com/users/5958551/aria-fathi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "closed_date": 1483477121, "accepted_answer_id": 41449813, "answer_count": 3, "score": -2, "last_activity_date": 1483467076, "creation_date": 1483463067, "last_edit_date": 1483463306, "question_id": 41448679, "link": "https://stackoverflow.com/questions/41448679/c-program-to-count-highest-repetition-of-a-number-in-an-array-of-numbers", "closed_reason": "Not suitable for this site", "title": "C program to count highest repetition of a number in an array of numbers", "body": "<p>I write this code to count and print highest repetition of a number in an array of 10 numbers. The problem is this program don't do <code>counter++</code> while the number is same as the last number in array.</p>\n\n<p>Here is the code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define SIZE 9\n\nint main () {\n    float Student[SIZE],grade,maxValue;\n    int i,j,k,slot,counter=0,maxCount=-1;\n    printf(\"Enter the grade of 10 students \\n\");\n    for(i=0;i&lt;=SIZE;i++){\n        printf(\"Enter student %d grade : \",i+1);\n        scanf(\"%f\",&amp;Student[i]);\n    }\n    for(j=0;j&lt;=SIZE;j++){\n        grade = Student[j];\n        counter = 0;    \n        for(k=0;k&lt;=SIZE;k++){\n            if(k == j){\n                continue;\n            }\n            if (grade == Student[k]){\n                counter++;\n            }\n            if (counter &gt; maxCount) {\n                maxCount = counter;\n                maxValue = grade;\n            }\n\n        }\n    }\n\n    if(maxCount == 0 ){\n        printf(\"There are no duplicate numbers.\\n\");\n    }else{\n        printf(\"%.2f repeated %d times.\\n\",maxValue,maxCount);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "sorting"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1483463191, "post_id": 41448632, "comment_id": 70103761, "body": "@SirPing  The first parameter of the function  void BubbleSort(int a[], int array_size); is invalid. It must be of the type struct schueler[]"}, {"owner": {"reputation": 1771, "user_id": 5644874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AlXxH.jpg?s=128&g=1", "display_name": "Seek Addo", "link": "https://stackoverflow.com/users/5644874/seek-addo"}, "edited": false, "score": 1, "creation_date": 1483463668, "post_id": 41448632, "comment_id": 70104052, "body": "what did the compiler say?"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 2, "creation_date": 1483465033, "post_id": 41448632, "comment_id": 70104809, "body": "Until your program compiles warning free (using -Wall with gcc for example) we cannot help you."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1483465430, "post_id": 41448632, "comment_id": 70105002, "body": "Use <code>qsort</code> for sort."}, {"owner": {"reputation": 1975, "user_id": 5029307, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5481fa266e0007d9c497e95b41019fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/5029307/travis"}, "edited": false, "score": 0, "creation_date": 1483467272, "post_id": 41448632, "comment_id": 70106028, "body": "Shouldn&#39;t the line <code>struct schueler personen[anz];</code> be <code>schueler personen[anz];</code> instead?"}, {"owner": {"reputation": 107, "user_id": 3917820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d06e07252c080264e0f44b35bf770b6?s=128&d=identicon&r=PG&f=1", "display_name": "shamba", "link": "https://stackoverflow.com/users/3917820/shamba"}, "edited": false, "score": 0, "creation_date": 1483468261, "post_id": 41448632, "comment_id": 70106558, "body": "There are many coding errors in your BubbleSort function. As others said, the first parameter should be of type struct shueler [], the second error is when you compare two arrays of characters if (a[j].nachname &gt; a[j+].nachname), the alphabetic comparaison is not done you must use character by character comparaison. The third error is when you assign to a int type (temp), an array of characters. Define temp as an array of char then use deep copy functions like strcpy"}, {"owner": {"reputation": 1246, "user_id": 713983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809f361edc52e627d115cc68de6e16bc?s=128&d=identicon&r=PG", "display_name": "Roland W", "link": "https://stackoverflow.com/users/713983/roland-w"}, "reply_to_user": {"reputation": 1975, "user_id": 5029307, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5481fa266e0007d9c497e95b41019fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/5029307/travis"}, "edited": false, "score": 1, "creation_date": 1483473529, "post_id": 41448632, "comment_id": 70109140, "body": "@Travis The struct is not <code>typedef</code>ed. You have to use the struct prefix because they live in a different namespace in c."}], "answers": [{"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 1, "last_activity_date": 1483464175, "creation_date": 1483464175, "answer_id": 41448974, "question_id": 41448632, "link": "https://stackoverflow.com/questions/41448632/array-struct-sort-c/41448974#41448974", "title": "Array struct sort - C", "body": "<blockquote>\n<pre><code>error: request for member 'nachname' in something not a structure or union\n</code></pre>\n</blockquote>\n\n<pre><code>    if (a[j].nachname &gt; ...\n</code></pre>\n\n<p><code>a</code> is a pointer to <code>int</code> <em>not</em> to <code>struct schueler</code>, so what it points to does <em>not</em> have a member <code>nachname</code>.</p>\n\n<p>To fix this change </p>\n\n<pre><code>void BubbleSort(int a[], int array_size)\n</code></pre>\n\n<p>to be</p>\n\n<pre><code>void BubbleSort(struct schueler a[], int array_size)\n</code></pre>\n\n<p>And call it like this</p>\n\n<pre><code>BubbleSort(personen, anz); /* note, that the &amp; had been removed. */\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1029, "user_id": 2176845, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3dc89025bf40202b994b24b28e6d71cd?s=128&d=identicon&r=PG", "display_name": "levengli", "link": "https://stackoverflow.com/users/2176845/levengli"}, "is_accepted": false, "score": 0, "last_activity_date": 1483472104, "creation_date": 1483472104, "answer_id": 41451037, "question_id": 41448632, "link": "https://stackoverflow.com/questions/41448632/array-struct-sort-c/41451037#41451037", "title": "Array struct sort - C", "body": "<p>In order to sort an array, use <code>qsort</code>. I am not quite clear on the <code>&gt;</code> operation that was used to compare the strings (<code>a[j].nachname &gt; a[j+1].nachname</code>) but that is a side issue </p>\n"}], "owner": {"reputation": 3, "user_id": 7370476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7y3yH.png?s=128&g=1", "display_name": "SirPing", "link": "https://stackoverflow.com/users/7370476/sirping"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 41448974, "answer_count": 2, "score": -2, "last_activity_date": 1483472104, "creation_date": 1483462901, "last_edit_date": 1483467043, "question_id": 41448632, "link": "https://stackoverflow.com/questions/41448632/array-struct-sort-c", "title": "Array struct sort - C", "body": "<p>I want to sort an strut-array and I keep getting an certain issue and I don't know why</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define STRLEN 20\n\n void BubbleSort(int a[], int array_size);\n\nstruct schueler\n{\n    char vorname[STRLEN];\n    char nachname[STRLEN];\n    char klasse[6];\n    char gbdatum[9];\n    double geld;\n};\n\nint main()\n{\n    int anz;\n    int count = 1;\n    printf(\"Wieviele Schueler moechten Sie eingaben: \");\n    scanf(\"%d\",&amp;anz);\n    struct schueler personen[anz];\n    while(count &lt;= anz)\n    {\n        printf(\"\\n\\nSchueler %d:\\n\\n\", count);\n\n        printf(\"\\nNachname: \");\n        scanf(\"%s\",&amp;personen[count].nachname);\n\n        printf(\"\\nVorname: \");\n        scanf(\"%s\",&amp;personen[count].vorname);\n\n        printf(\"\\nKlasse: \");\n        scanf(\"%s\",&amp;personen[count].klasse);\n\n        printf(\"\\nGeburtsdatum\");\n        scanf(\"%s\",&amp;personen[count].gbdatum);\n\n        printf(\"\\nGeld: \");\n        scanf(\"%d\",&amp;personen[count].geld);\n\n        count++;\n    }\n    BubbleSort(&amp;personen, anz);\n    system(\"CLS\");\n    for(count = 1; count &lt;= anz; count++)\n    {\n        printf(\"Schueler %d:\\n\\n\", count);\n        printf(\"Nachname: \", personen[count].nachname);\n        printf(\"Vorname: \", personen[count].vorname);\n        printf(\"Klasse: \", personen[count].klasse);\n        printf(\"Geburtsdatum: \", personen[count].gbdatum);\n        printf(\"Geld: \", personen[count].geld);\n    }\n}\n\n void BubbleSort(int a[], int array_size)\n {\n     int i, j, temp;\n     for (i = 0; i &lt; (array_size - 1); ++i)\n     {\n          for (j = 0; j &lt; array_size - 1 - i; ++j )\n          {\n               if (a[j].nachname &gt; a[j+1].nachname)\n               {\n                    temp = a[j+1].nachname;\n                    a[j+1].nachname = a[j].nachname;\n                    a[j].nachname = temp;\n               }\n          }\n     }\n }\n</code></pre>\n\n\n\n<p>The issue is</p>\n\n<blockquote>\n  <p>error: request for member 'nachname' in something not a structure or union</p>\n</blockquote>\n"}, {"tags": ["c", "matlab", "mex"], "answers": [{"tags": [], "owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "is_accepted": true, "score": 7, "last_activity_date": 1483594054, "last_edit_date": 1483594054, "creation_date": 1483463643, "answer_id": 41448840, "question_id": 41448540, "link": "https://stackoverflow.com/questions/41448540/mex-function-doesnt-initialise-left-hand-value/41448840#41448840", "title": "MEX function doesn&#39;t initialise left-hand value", "body": "<p>You have three very crucial errors and a few minor hiccups:</p>\n\n<ol>\n<li><p>This line: <code>mwSize n = *(mwSize*)mxGetData(prhs[0]);</code> at the beginning of your MEX function.  </p>\n\n<p>This makes absolutely no sense.  We can clearly see that the input is a single integer.  <a href=\"http://www.mathworks.com/help/matlab/apiref/mxgetdata.html\" rel=\"nofollow noreferrer\"><code>mxGetData</code></a> actually gets a pointer to the actual data that is coming in as inputs into the MEX function, yet you are casting the pointer to <code>mwSize</code> then dereferencing it.  I have absolutely no idea what this would give you, but it's definitely not right.  What you can do instead is get the actual pointer to the data using <a href=\"http://www.mathworks.com/help/matlab/apiref/mxgetpr.html\" rel=\"nofollow noreferrer\"><code>mxGetPr</code></a> where the pointer would provide you with data that conforms to a <code>double</code> precision real type.  Because this would be an integer, you can cast this to <code>int</code>:</p>\n\n<pre><code>int n = (int) *mxGetPr(prhs[0]);\n</code></pre></li>\n<li><p>Because of the correction with (1), you can now allocate your matrix without explicitly casting with <code>size_t</code>.  This I wouldn't call an error, but it's more of a style correction:</p>\n\n<pre><code>plhs[0] = mxCreateDoubleMatrix(1, n*n, mxREAL);\n</code></pre></li>\n<li><p>The most important error of all.  </p>\n\n<p>Take note that your <code>sample</code> function inside your MEX code accepts a pointer to a <code>double</code> pointer in memory for the purposes of modifying the matrix that you created in your main MEX gateway (i.e. <code>mexFunction</code>).  However, you first allocate the memory for the matrix to be written to the output, but are <strong>allocating the memory again</strong> inside your <code>sample</code> function.  Because of this, you are actually creating <strong>another</strong> pointer to memory and writing the data to this pointer and not with the original pointer that you had passed to the function.  Specifically, inside <code>sample</code> you have this code:</p>\n\n<pre><code>(*T) = (double*)malloc(n*n*sizeof(double));\n</code></pre>\n\n<p>Therefore, upon exit of this function the memory that you intended to modify has not been modified.  The point is that allocation inside the function is not required as you have already allocated the memory of the matrix outside of the function.  This can be removed from your code.</p></li>\n<li><p>This is very important in terms of memory access.  Remember that MATLAB is a column-major based language, which means that the columns of a matrix are laid out in a contiguous fashion instead of the rows like in languages such as C.  Therefore, your method of accessing the matrix given that your matrix is of size <code>m x n</code> with <code>m</code> rows and <code>n</code> columns should be <code>(*T)[j*m + i]</code> where the index <code>i</code> accesses the rows and <code>j</code> accesses the columns.  Right now you have it set to <code>(*T)[i*n + j]</code>.  For now as your matrix shares the same rows and columns and that you are creating an identity matrix, either way of accessing is the same but be weary of rectangular sized matrices.</p>\n\n<p>Therefore, the corrected code for your <code>sample</code> function is thus:</p>\n\n<pre><code>void sample(int n, double** T)\n{     \n    int i, j;\n\n    if (*T == NULL)\n    {\n         return;\n    }\n\n    for (i = 0; i &lt; n; i++)\n    {\n        for (j = 0; j &lt; n; j++)\n        {\n            if (i != j)\n                (*T)[j*m + i] = 0;\n            else \n                (*T)[j*m + i] = 1;\n        }\n    }\n}\n</code></pre>\n\n<p>Once you run this code, it now produces the desired results.  However, you have created a <code>n*n</code> row vector and not a <code>n x n</code> matrix, but I'm assuming you did that on purpose.  To get this to run, I placed your source in a file called <code>sample.c</code>, compiled it then ran it:</p>\n\n<pre><code>&gt;&gt; mex -O sample.c\nBuilding with 'gcc'.\nMEX completed successfully.\n&gt;&gt; n = 5;\n&gt;&gt; T = sample(n)\n\nT =\n\n  Columns 1 through 19\n\n 1     0     0     0     0     0     1     0     0     0     0     0     1     0     0     0     0     0     1\n\n  Columns 20 through 25\n\n 0     0     0     0     0     1\n</code></pre>\n\n<p>If you wish to create a <code>n x n</code> matrix instead, change the call to <code>mxCreateDoubleMatrix</code> so that both the first and second arguments are set to <code>n</code>:</p>\n\n<pre><code>plhs[0] = mxCreateDoubleMatrix(n, n, mxREAL);\n</code></pre></li>\n<li><p>This isn't an error but worth nitpicking about.  Your function only expects 1 input so there's no need to submit <code>T</code> as the second parameter.  Your code does not check for a second parameter anyway.  In addition, you need to include the proper headers for your code to compile:</p>\n\n<pre><code>#include &lt;stdlib.h&gt; /* For malloc */\n#include \"mex.h\" /* For the MEX library */\n</code></pre></li>\n</ol>\n\n<hr>\n\n<p>The final code that is corrected is thus:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include \"mex.h\"\n\nvoid sample(int n, double** T)\n{     \n    int i, j;\n    if (*T == NULL)\n    {\n        return;\n    }\n\n    for (i = 0; i &lt; n; i++)\n    {\n        for (j = 0; j &lt; n; j++)\n        {\n            if (i != j)\n                (*T)[j*m + i] = 0;\n            else \n                (*T)[j*m + i] = 1;\n         }\n    }\n}\n\nvoid mexFunction( int nlhs, mxArray *plhs[],\n                  int nrhs, const mxArray *prhs[] )\n{\n    int n = (int) *mxGetPr(prhs[0]);\n    double *T;\n\n    plhs[0] = mxCreateDoubleMatrix(1, n*n, mxREAL);\n    /* Change to this line if you wish to have a n x n matrix */\n    /* plhs[0] = mxCreateDoubleMatrix(n, n, mxREAL); */\n\n    T = mxGetPr(plhs[0]);\n\n    sample(n, &amp;T);  \n}\n</code></pre>\n\n<p>Just for the sake of argument, this is what happens if change <code>mxCreateDoubleMatrix</code> so that it outputs a <code>n x n</code> matrix:</p>\n\n<pre><code>&gt;&gt; mex -O sample.c\nBuilding with 'gcc'.\nMEX completed successfully.\n&gt;&gt; n = 5;\n&gt;&gt; T = sample(n)\n\nT =\n\n     1     0     0     0     0\n     0     1     0     0     0\n     0     0     1     0     0\n     0     0     0     1     0\n     0     0     0     0     1\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4762620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d19e8357d327d1cf6a64864a6a942ac0?s=128&d=identicon&r=PG&f=1", "display_name": "  ProkopenkoV", "link": "https://stackoverflow.com/users/4762620/prokopenkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 41448840, "answer_count": 1, "score": 2, "last_activity_date": 1483594054, "creation_date": 1483462588, "last_edit_date": 1483464306, "question_id": 41448540, "link": "https://stackoverflow.com/questions/41448540/mex-function-doesnt-initialise-left-hand-value", "title": "MEX function doesn&#39;t initialise left-hand value", "body": "<p>I have to use a MEX function which is supposed to allocate a matrix and fill it (for example, make an identity matrix). Here is a code sample:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include \"mex.h\"\n\nvoid sample(int n, double** T)\n{\n     (*T) = (double*)malloc(n*n*sizeof(double));  \n     int i, j;\n     if ((*T) == NULL)\n     {\n        return;\n    }\n    else\n    {\n        for (i = 0; i &lt; n; i++)\n        {\n            for (j = 0; j &lt; n; j++)\n            {\n                if (i != j)\n                    (*T)[i*n + j] = 0;\n                else \n                    (*T)[i*n + j] = 1;\n             }\n        }\n    }\n}\n\nvoid mexFunction( int nlhs, mxArray *plhs[],\n                  int nrhs, const mxArray *prhs[] )\n{\n    mwSize n = *(mwSize*)mxGetData(prhs[0]);\n    double *T;\n\n    plhs[0] = mxCreateDoubleMatrix(1, (size_t)n*(size_t)n, mxREAL);\n\n    T = mxGetPr(plhs[0]);\n\n    sample(n, &amp;T);  \n}\n</code></pre>\n\n<p>I use it like this:</p>\n\n<pre><code>n = 5;\nT = [];\nT = sample(5, T);\n</code></pre>\n\n<p>This call returns a 1-by-0 empty matrix. So, it doesn't allocate a n-by-n matrix and doesn't fill it.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 2, "creation_date": 1483462738, "post_id": 41448452, "comment_id": 70103494, "body": "<code>while(userInput){ sel = userInput() ... </code> does not do what you think it does. A functionname without the <code>()</code> is implicitly converted to a pointer."}, {"owner": {"reputation": 4791, "user_id": 1609614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lvIBD.jpg?s=128&g=1", "display_name": "Ari0nhh", "link": "https://stackoverflow.com/users/1609614/ari0nhh"}, "edited": false, "score": 1, "creation_date": 1483463203, "post_id": 41448452, "comment_id": 70103767, "body": "This code is also wrong and will lead to the undefined behavior: <code>scanf(&quot; %d&quot;, &amp;p[i].ID);</code> <code>p[i].ID</code> is <code>int[100]</code>, not <code>int</code>"}, {"owner": {"reputation": 13596, "user_id": 551045, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d3cf04e39bcaab5592938990ea158d51?s=128&d=identicon&r=PG", "display_name": "RedX", "link": "https://stackoverflow.com/users/551045/redx"}, "edited": false, "score": 3, "creation_date": 1483463661, "post_id": 41448452, "comment_id": 70104048, "body": "Please indent your code properly. This makes reading it much easier and people are more likely to help you."}, {"owner": {"reputation": 35, "user_id": 7366325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2aac3f75030b56b94bd5fae24ebb273?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Haghani", "link": "https://stackoverflow.com/users/7366325/amir-haghani"}, "reply_to_user": {"reputation": 4791, "user_id": 1609614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lvIBD.jpg?s=128&g=1", "display_name": "Ari0nhh", "link": "https://stackoverflow.com/users/1609614/ari0nhh"}, "edited": false, "score": 0, "creation_date": 1483483501, "post_id": 41448452, "comment_id": 70113533, "body": "Thank you all for helping about deleteing and element , but what about editing??? @Ari0nhh im sorry i dont understand the problem , do you mind explaining more?:-) RedX , Thanks for your comment and sorry about that ;) It&#39;s a project for my university"}], "answers": [{"tags": [], "owner": {"reputation": 122, "user_id": 7008582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00a84315a410182b6b935689a9e46c74?s=128&d=identicon&r=PG&f=1", "display_name": "Dreamer", "link": "https://stackoverflow.com/users/7008582/dreamer"}, "is_accepted": false, "score": 2, "last_activity_date": 1483462836, "creation_date": 1483462836, "answer_id": 41448613, "question_id": 41448452, "link": "https://stackoverflow.com/questions/41448452/edit-and-delete-an-input-in-c-programming/41448613#41448613", "title": "Edit and Delete an input in C programming", "body": "<p>You needed a clue, so here it is:-</p>\n\n<p>You can ask the user to provide you with house ID and according to that, the details of that particular ID will be deleted. \nLike in array, you delete an element from a particular position. In here, you need to have an ID and try to delete the record like you used to delete an element from an array. </p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 7366325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2aac3f75030b56b94bd5fae24ebb273?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Haghani", "link": "https://stackoverflow.com/users/7366325/amir-haghani"}, "edited": false, "score": 0, "creation_date": 1483484013, "post_id": 41449448, "comment_id": 70113693, "body": "Hi and thannks a lot for the answer , can you please use this instuction in an example...i used this as you told me to but im getting errors , i think im doing it wrong"}], "tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 1, "last_activity_date": 1483465815, "creation_date": 1483465815, "answer_id": 41449448, "question_id": 41448452, "link": "https://stackoverflow.com/questions/41448452/edit-and-delete-an-input-in-c-programming/41449448#41449448", "title": "Edit and Delete an input in C programming", "body": "<p>To delete the i th structure of an array</p>\n\n<pre><code> MYSTRUCT array[100]; // buffer has room for 100, which is plenty\n int N;               // N is the number we actually have, say ten\n int i = 3;           // index of item to delete\n\n\n // formula for deletion. \n memmove(&amp;array[i], &amp;array[i+1], sizeof(MYSTRUCT) * (N - i - 1));\n N--;\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7366325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2aac3f75030b56b94bd5fae24ebb273?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Haghani", "link": "https://stackoverflow.com/users/7366325/amir-haghani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1483465815, "creation_date": 1483462323, "question_id": 41448452, "link": "https://stackoverflow.com/questions/41448452/edit-and-delete-an-input-in-c-programming", "title": "Edit and Delete an input in C programming", "body": "<p>can you please give me a clue of how can i give the user , the ability to delete their houses or edit their inputs like house ID or house area or price by the functions\ni would appreciate your help &lt;3</p>\n\n<p>this is my code for a real estate</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint userInput();\n\nvoid addHouse();\nvoid deleteHouse();\nvoid editHouse();\nvoid reportHouse();\n\nstruct House\n{\nint ID[100];\nint RP[100];\nint MP[100];\nint area[100];\nint studNum;\nfloat bBalance;\n};\n\nint main()\n{\n//no constants\n\nstruct House p[100];\n\nFILE *fp,*fw,*ft;\n\nint sel = 1; //select number for menu\n\nwhile(userInput){\n\nsel = userInput();\n\nswitch(sel){\n\ncase 1:\naddHouse();\nbreak;\n\ncase 2:\ndeleteHouse();\nbreak;\n\ncase  3:\neditHouse();\nbreak;\n\ncase 4:\nreportHouse();\nbreak;\n\ncase 0:\nbreak;\n\n}\n\n}\n\n}\n\nint userInput()\n{\nint choice;\n\nprintf(\"===========================\\n\");\nprintf(\"(1). Add new property\\n\");\nprintf(\"(2). Delete a property\\n\");\nprintf(\"(3). Edit a property\\n\");\nprintf(\"(4). Report properties\\n\");\nprintf(\"(0). Exit\\n\");\nprintf(\"===========================\\n\\n\");\n\nprintf(\"Enter your choice Please\\n\");\nscanf(\"%d\", &amp;choice);\n\nreturn choice;\n}\n\nvoid addHouse()\n{\nstruct House p[100];\n\nfor(int i = 1; i &lt; 100; i++) {\nprintf(\"What is the number %d house's ID?\\n\",i);\nscanf(\" %d\", &amp;p[i].ID);\nprintf(\"How much is the number %d house's price for rent?\\n\",i);\nscanf(\" %d\", &amp;p[i].RP);\nprintf(\"How much is the number %d house's price for mortgage?\\n\",i);\nscanf(\"%d\", &amp;p[i].MP);\nprintf(\"How much is the number %d house's area?\\n\",i);\nscanf(\" %d\", &amp;p[i].area);\n}\n}\n\nvoid deleteHouse()\n{\nprintf(\"*edits entry*\\n\");\n}\n\nvoid editHouse()\n{\nprintf(\"*deletes entry*\\n\");\n}\n\nvoid reportHouse()\n{\nprintf(\"*adds entry\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "adt"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1483465863, "post_id": 41448323, "comment_id": 70105250, "body": "Do not hide pointer nature behind a <code>typedef</code>, except possibly for function pointers.  It confuses everyone, including you."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1483482659, "post_id": 41449475, "comment_id": 70113226, "body": "Very good use of citation to the standard. Only note would be to include a reference to the specific standard you are relying on. (e.g. C89/90, C99, C11). I don&#39;t think it makes a difference in this case, but there are subtle, and important, changes between them. (I see you provided a link to the C11 draft -- that is sufficient)"}], "tags": [], "owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "is_accepted": false, "score": 3, "last_activity_date": 1483465888, "last_edit_date": 1495541786, "creation_date": 1483465888, "answer_id": 41449475, "question_id": 41448323, "link": "https://stackoverflow.com/questions/41448323/c-generic-adt-error-when-passing-function-pointers/41449475#41449475", "title": "C: Generic ADT error when passing function pointers", "body": "<p>Your example can be boiled down to</p>\n\n<pre><code>typedef void * (*VF)(void *);\ntypedef int * (*IF)(int *);\n\nIF a = 0;\nVF b = a; //Warning\n</code></pre>\n\n<p>In the <a href=\"http://www.open-std.org/jtc1/SC22/wg14/www/docs/n1548.pdf\" rel=\"nofollow noreferrer\">C standard</a> pointers to functions are less versatile than pointer to objects.<br>\nYou can convert a pointer to an object to a pointer to <code>void</code> (and back) without any cast (and warnings) because there is clause in the standard that explicitly allows for it</p>\n\n<blockquote>\n  <p>A pointer to void may be converted to or from a pointer to any object type.<br>\n  A pointer to\n  any object type may be converted to a pointer to void and back again;<br>\n  the result shall\n  compare equal to the original pointer. </p>\n</blockquote>\n\n<p>Note here that a function is not an object.  </p>\n\n<p>Regarding pointers to functions the only thing that the standard guarantees is:</p>\n\n<blockquote>\n  <p>A pointer to a function of one type may be converted to a pointer to a function of another type and back again; the result shall compare equal to the original pointer.<br>\n  If a converted pointer is used to call a function whose type is not compatible with the referenced type, the behavior is undefined</p>\n</blockquote>\n\n<p>Later the standard clarifies what does it mean for two functions to be compatible:</p>\n\n<blockquote>\n  <p>For two function types to be compatible, both shall specify compatible return types.<br>\n  Moreover, the parameter type lists, if both are present, shall agree in the number of parameters and in use of the ellipsis terminator; corresponding parameters shall have compatible types.</p>\n</blockquote>\n\n<p>Now you may think that <code>void*</code> and <code>struct location_t*</code> are compatible types, after all you can assign each others.<br>\nBut the standard is crystal clear:</p>\n\n<blockquote>\n  <p>Two types have compatible type if their types are the same. </p>\n</blockquote>\n\n<p>It later goes on with extending this relationship for more complex types and qualified types.</p>\n\n<p>It may sound surprising but <code>int*</code> and <code>void*</code> are not compatible.<br>\nThey can be assigned but are not compatible, after all the <code>void*</code> could point to a <code>float</code> or an object with different alignment requirements.</p>\n\n<p>When it comes to pointers of different types the standard is concerned mostly about assigning them back and forth.<br>\nIt doesn't forbid converting between incompatible pointer types, but using them is undefined behavior, hence the warning.</p>\n\n<hr>\n\n<p>The better approach is to perform the cast inside the function, <a href=\"https://stackoverflow.com/a/9045604/5801661\">as suggested in this answer</a>.  </p>\n\n<p>All your function should have signature <code>void* (void*)</code> so that no cast between pointers to functions is needed.  </p>\n\n<pre><code>SetElement locationCopy(SetElement element)\n{\n    Location location = (Location)element;\n\n    Location new_location = locationCreate(location-&gt;name);\n\n    return new_location;\n}\n</code></pre>\n\n<p>The casts inside the functions are again subject to undefined behavior if the <code>SetElement</code> pointers are cast to incompatible pointers but that shouldn't happen if you'll call <code>locationCopy</code> only with pointers to <code>Location</code>s (as you indeed expect to do).</p>\n\n<hr>\n\n<p>As a side note, some programmer may frown upon using a <code>typedef</code> to hide a pointer type.  </p>\n"}, {"tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 0, "last_activity_date": 1483480257, "creation_date": 1483480257, "answer_id": 41452959, "question_id": 41448323, "link": "https://stackoverflow.com/questions/41448323/c-generic-adt-error-when-passing-function-pointers/41452959#41452959", "title": "C: Generic ADT error when passing function pointers", "body": "<p>You defined <code>copySetElements</code> as</p>\n\n<pre><code>POINTER (SetElement =&gt; SetElement)\n</code></pre>\n\n<p>You also define <code>setCreate</code> as</p>\n\n<pre><code>copySetElements =&gt; Set\n</code></pre>\n\n<p>And you call <code>setCreate</code> with a parameter <code>locationCopy</code> of type</p>\n\n<pre><code>POINTER(Location =&gt; Location)\n</code></pre>\n\n<p>The warning is generated from this imcompatibility of the declared parameter type and the type of the actual argument.</p>\n"}], "owner": {"reputation": 7154, "user_id": 391649, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/03c3ed34dfaf499cf74d7dbd0ccbc42a?s=128&d=identicon&r=PG", "display_name": "Dean", "link": "https://stackoverflow.com/users/391649/dean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1483480257, "creation_date": 1483461902, "question_id": 41448323, "link": "https://stackoverflow.com/questions/41448323/c-generic-adt-error-when-passing-function-pointers", "title": "C: Generic ADT error when passing function pointers", "body": "<p>I have a generic set of elements provided as a library.</p>\n\n<pre><code>/** Type for defining the set */\ntypedef struct Set_t *Set;\n\n/** Element data type for set container */\ntypedef void* SetElement;\n\n/** Type of function for copying an element of the set */\ntypedef SetElement(*copySetElements)(SetElement);\n</code></pre>\n\n<p>To create the set I must provide a pointer to a function that handles the copying of elements that I intend to use the set for.</p>\n\n<pre><code>Set setCreate(copySetElements copyElement);\n</code></pre>\n\n<p>I wrote the following type and copy function:</p>\n\n<pre><code>typedef struct location_t {\n    char *name;\n} *Location;\n\nLocation locationCopy(Location location){\n\n    Location new_location = locationCreate(location-&gt;name);\n\n    return new_location;\n}\n</code></pre>\n\n<p>*Obviously I simplified everything to focus the discussion.</p>\n\n<p>When I call:</p>\n\n<pre><code>Set locations = setCreate(locationCopy);\n</code></pre>\n\n<p>I get a compiler errors:</p>\n\n<blockquote>\n  <p>warning: passing argument 1 of \u2018setCreate\u2019 from incompatible pointer\n  type</p>\n  \n  <p>expected \u2018copySetElements\u2019 but argument is of type \u2018struct location_t\n  * (*)(struct location_t *)\u2019</p>\n</blockquote>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1483462291, "post_id": 41448263, "comment_id": 70103170, "body": "&quot;<i>Suppose I have 10,000 files in a directory</i>&quot; you do not want such many files in one directory for other reasons (number of inodes, for example). So change the program&#39;s design to evenly distribute the files over several sub-directories or even a tree of sub-directories."}, {"owner": {"reputation": 1083, "user_id": 5094662, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/41759d292db3e3a4af44a55ad4c1d8d3?s=128&d=identicon&r=PG&f=1", "display_name": "BarryBones41", "link": "https://stackoverflow.com/users/5094662/barrybones41"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1483462407, "post_id": 41448263, "comment_id": 70103262, "body": "This is out of my control."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 6, "creation_date": 1483462422, "post_id": 41448263, "comment_id": 70103274, "body": "1MB is not much RAM for a device that needs to handle a table of 10,000 items, regardless of where they come from. You have 100 bytes per item. Filenames are typically allowed to be up to 255 bytes long, although the average is much shorter. If you can&#39;t have all your items in memory at once, you&#39;ll have to do an external sort (i.e. put the data into a temp file in the format you want to have it displayed, then sort the temp file). This won&#39;t be easy."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 2, "creation_date": 1483462866, "post_id": 41448263, "comment_id": 70103576, "body": "I suggest you split the task in half like this: first, forget that you have to gather the data from the directory and just imagine you have it all in a single file, in the best possible format for what you&#39;re about to do. Then figure out how implement the interactive sorted display of that file. That&#39;s the first half done. Now figure out how to create that file with <code>opendir</code>, <code>readdir</code>, <code>stat</code>, etc. That&#39;s the second half, and it should be the easy part."}, {"owner": {"reputation": 1083, "user_id": 5094662, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/41759d292db3e3a4af44a55ad4c1d8d3?s=128&d=identicon&r=PG&f=1", "display_name": "BarryBones41", "link": "https://stackoverflow.com/users/5094662/barrybones41"}, "edited": false, "score": 0, "creation_date": 1483464152, "post_id": 41448263, "comment_id": 70104349, "body": "@WumpusQ.Wumbley appreciate the advice. I&#39;ve thought it through in my head and I&#39;d basically be writing an SQL table with sorting"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 0, "creation_date": 1483464328, "post_id": 41448263, "comment_id": 70104451, "body": "I forgot to mention earlier: if you have or can create some swap space, you can just do the whole thing in your process memory. Performance will gradually get worse as the size increases, but it was going to do that anyway."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1483465511, "post_id": 41448263, "comment_id": 70105054, "body": "1 megabyte of RAM is really not enough for a POSIX system. Quite probably, the kernel would need <i>much more</i> than that. Consider cheap <a href=\"https://www.raspberrypi.org/\" rel=\"nofollow noreferrer\">RaspberryPi</a> boards, they have a <i>gigabyte</i> of RAM. So upgrade your hardware, or downgrade your software and system."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "edited": false, "score": 0, "creation_date": 1483486551, "post_id": 41448263, "comment_id": 70114464, "body": "You can use a trie. You will surely not get out of RAM."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 2807940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff0560c3903ab257e0e626166614c576?s=128&d=identicon&r=PG&f=1", "display_name": "InfiniteRecursion", "link": "https://stackoverflow.com/users/2807940/infiniterecursion"}, "is_accepted": false, "score": 0, "last_activity_date": 1504631886, "creation_date": 1504631886, "answer_id": 46060276, "question_id": 41448263, "link": "https://stackoverflow.com/questions/41448263/file-browser-in-c-for-posix-os/46060276#46060276", "title": "File Browser in C for POSIX OS", "body": "<p>Here's two suggestions, both of which have small memory footprint. The first will use no more memory that the number of results you wish to return for the request. It's a constant-time O(1) memory - it only depends on the size of the result set but is ultimately quadratic time (or worse) if the user really does page through all results:</p>\n\n<p>You are only looking for a small paged result (e.g the r=25 entries). You can generate these by scanning through all filenames and maintaining a sorted list of items you will return, using an insertion sort of length r and for each file inserted, only retain the first r results. (In practice you would not insert the file F if it is lower than the r<sup>th</sup> entry).</p>\n\n<p>How would you generate the 2<sup>nd</sup> page of results? You already know the 25th file from the previous request - so during the scan ignore all entries that are before that. (You'll need to work harder if sorting on fields with duplicates)</p>\n\n<p>The upside is the minimum memory required - the memory needed is not much larger than the r results you wish to return (and can even be less if you don't cache the names). The downside is generating the complete result will be quadratic in time in terms of the number of total files you have. In practice people don't sort results then page through all pages, so this may be acceptable.</p>\n\n<p>If your memory budget is larger (e.g. fewer than 10000 files) but you still don't have enough space to perform a simple in-memory sort of all 10000 filenames then seekdir/telldir is your friend. i.e. create an array of longs by streaming readdir and using telldir to capture the position of each entry. (you might even be able to compress the delta between each telldir to a 2 byte short). As a minimal implementation you can then sort 'em all with clib's sort function and writing your own callback to convert a location into a comparable value. Your call back will use seekdir twice to read the two filenames. </p>\n\n<p>The above approach is overkill - you just sorted <em>all</em> entries and you only needed one page of ~25, so for fun why not read up on Hoare's QuickSelect algorithm and use a version of it to identify the results within the required range. You can recursive ignore all entries outside the required range and only sort the entries between the first and last entry of the results.</p>\n"}, {"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 0, "last_activity_date": 1504636634, "last_edit_date": 1504636634, "creation_date": 1504636310, "answer_id": 46061283, "question_id": 41448263, "link": "https://stackoverflow.com/questions/41448263/file-browser-in-c-for-posix-os/46061283#46061283", "title": "File Browser in C for POSIX OS", "body": "<p>What you want is an <a href=\"https://en.wikipedia.org/wiki/External_sorting\" rel=\"nofollow noreferrer\">external sort</a>, that's a sort done with external resources, usually on disk. The Unix <code>sort</code> command does this. Typically this is done with an <a href=\"https://en.wikipedia.org/wiki/External_sorting#External_merge_sort\" rel=\"nofollow noreferrer\">external merge sort</a>.</p>\n\n<p>The algorithm is basically this. Let's assume you want to dedicate 100k of memory to this (the more you dedicate, the fewer disk operations, the faster it will go).</p>\n\n<ol>\n<li>Read 100k of data into memory (ie. call <code>readdir</code> a bunch).</li>\n<li>Sort that 100k hunk in-memory.</li>\n<li>Write the hunk of sorted data to its own file on disk.\n\n<ul>\n<li>You can also use offsets in a single file.</li>\n</ul></li>\n<li>GOTO 1 until all hunks are sorted.</li>\n</ol>\n\n<p>Now you have X hunks of 100k on disk an each of them are sorted. Let's say you have 9 hunks. To keep within the 100k memory limit, we'll divide the work up into the number of hunks + 1. 9 hunks, plus 1, is 10. 100k / 10 is 10k. So now we're working in blocks of 10k.</p>\n\n<ol start=\"5\">\n<li>Read the first 10k of each hunk into memory.</li>\n<li>Allocate another 10k (or more) as a buffer.</li>\n<li>Do an <a href=\"https://en.wikipedia.org/wiki/Merge_algorithm#K-way_merging\" rel=\"nofollow noreferrer\">K-way merge</a> on the hunks.\n\n<ol>\n<li>Write the smallest in any hunk to the buffer. Repeat.</li>\n<li>When the buffer fills, append it to a file on disk.</li>\n<li>When a hunk empties, read the next 10k from that hunk.</li>\n</ol></li>\n<li>When all hunks are empty, read the resulting sorted file.</li>\n</ol>\n\n<p>You might be able to find a library to perform this for you.</p>\n\n<hr>\n\n<p>Since this is obviously overkill for the normal case of small lists of files, only use it if there are more files in the directory than you care to have in memory.</p>\n\n<p>Both in-memory sort and external sort begin with the same step: start calling <code>readdir</code> and writing to a fixed-sized array. If you run out of files before running out of space, just do an in-memory quicksort on what you've read. If you run out of space, this is now the first hunk of an external sort.</p>\n"}], "owner": {"reputation": 1083, "user_id": 5094662, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/41759d292db3e3a4af44a55ad4c1d8d3?s=128&d=identicon&r=PG&f=1", "display_name": "BarryBones41", "link": "https://stackoverflow.com/users/5094662/barrybones41"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1504636634, "creation_date": 1483461745, "question_id": 41448263, "link": "https://stackoverflow.com/questions/41448263/file-browser-in-c-for-posix-os", "title": "File Browser in C for POSIX OS", "body": "<p>I have created a file browsing UI for an embedded device. On the embedded side, I am able to get all files in a directory off the hard disk and return stats such as name, size, modified, etc. This is done using <code>opendir</code> and <code>closedir</code> and a <code>while</code> loop that goes through every file until no files are left.</p>\n\n<p>This is cool, until file counts reach large quantities. I need to implement pagination and sorting. Suppose I have 10,000 files in a directory - how can I possibly go through this amount of files and sort based on size, name, etc, without easily busting the RAM (about 1mb of RAM... !). Perhaps something already exists within the Hard Drive OS or drivers?</p>\n"}]